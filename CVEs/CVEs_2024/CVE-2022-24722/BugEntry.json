{"buggy_code": ["PATH\n  remote: .\n  specs:\n    view_component (2.48.0)\n      activesupport (>= 5.0.0, < 8.0)\n      method_source (~> 1.0)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (7.0.1)\n      actionpack (= 7.0.1)\n      activesupport (= 7.0.1)\n      nio4r (~> 2.0)\n      websocket-driver (>= 0.6.1)\n    actionmailbox (7.0.1)\n      actionpack (= 7.0.1)\n      activejob (= 7.0.1)\n      activerecord (= 7.0.1)\n      activestorage (= 7.0.1)\n      activesupport (= 7.0.1)\n      mail (>= 2.7.1)\n      net-imap\n      net-pop\n      net-smtp\n    actionmailer (7.0.1)\n      actionpack (= 7.0.1)\n      actionview (= 7.0.1)\n      activejob (= 7.0.1)\n      activesupport (= 7.0.1)\n      mail (~> 2.5, >= 2.5.4)\n      net-imap\n      net-pop\n      net-smtp\n      rails-dom-testing (~> 2.0)\n    actionpack (7.0.1)\n      actionview (= 7.0.1)\n      activesupport (= 7.0.1)\n      rack (~> 2.0, >= 2.2.0)\n      rack-test (>= 0.6.3)\n      rails-dom-testing (~> 2.0)\n      rails-html-sanitizer (~> 1.0, >= 1.2.0)\n    actiontext (7.0.1)\n      actionpack (= 7.0.1)\n      activerecord (= 7.0.1)\n      activestorage (= 7.0.1)\n      activesupport (= 7.0.1)\n      globalid (>= 0.6.0)\n      nokogiri (>= 1.8.5)\n    actionview (7.0.1)\n      activesupport (= 7.0.1)\n      builder (~> 3.1)\n      erubi (~> 1.4)\n      rails-dom-testing (~> 2.0)\n      rails-html-sanitizer (~> 1.1, >= 1.2.0)\n    activejob (7.0.1)\n      activesupport (= 7.0.1)\n      globalid (>= 0.3.6)\n    activemodel (7.0.1)\n      activesupport (= 7.0.1)\n    activerecord (7.0.1)\n      activemodel (= 7.0.1)\n      activesupport (= 7.0.1)\n    activestorage (7.0.1)\n      actionpack (= 7.0.1)\n      activejob (= 7.0.1)\n      activerecord (= 7.0.1)\n      activesupport (= 7.0.1)\n      marcel (~> 1.0)\n      mini_mime (>= 1.1.0)\n    activesupport (7.0.1)\n      concurrent-ruby (~> 1.0, >= 1.0.2)\n      i18n (>= 1.6, < 2)\n      minitest (>= 5.1)\n      tzinfo (~> 2.0)\n    addressable (2.8.0)\n      public_suffix (>= 2.0.2, < 5.0)\n    ansi (1.5.0)\n    appraisal (2.4.1)\n      bundler\n      rake\n      thor (>= 0.14.0)\n    ast (2.4.2)\n    benchmark-ips (2.8.4)\n    better_html (1.0.16)\n      actionview (>= 4.0)\n      activesupport (>= 4.0)\n      ast (~> 2.0)\n      erubi (~> 1.4)\n      html_tokenizer (~> 0.0.6)\n      parser (>= 2.4)\n      smart_properties\n    builder (3.2.4)\n    capybara (3.36.0)\n      addressable\n      matrix\n      mini_mime (>= 0.1.3)\n      nokogiri (~> 1.8)\n      rack (>= 1.6.0)\n      rack-test (>= 0.6.3)\n      regexp_parser (>= 1.5, < 3.0)\n      xpath (~> 3.2)\n    coderay (1.1.3)\n    concurrent-ruby (1.1.9)\n    crass (1.0.6)\n    digest (3.1.0)\n    docile (1.4.0)\n    erb_lint (0.0.37)\n      activesupport\n      better_html (~> 1.0.7)\n      html_tokenizer\n      parser (>= 2.7.1.4)\n      rainbow\n      rubocop\n      smart_properties\n    erubi (1.10.0)\n    globalid (1.0.0)\n      activesupport (>= 5.0)\n    haml (5.2.2)\n      temple (>= 0.8.0)\n      tilt\n    html_tokenizer (0.0.7)\n    i18n (1.8.11)\n      concurrent-ruby (~> 1.0)\n    io-wait (0.2.1)\n    jbuilder (2.11.5)\n      actionview (>= 5.0.0)\n      activesupport (>= 5.0.0)\n    loofah (2.13.0)\n      crass (~> 1.0.2)\n      nokogiri (>= 1.5.9)\n    mail (2.7.1)\n      mini_mime (>= 0.1.1)\n    marcel (1.0.2)\n    matrix (0.4.2)\n    method_source (1.0.0)\n    mini_mime (1.1.2)\n    mini_portile2 (2.7.1)\n    minitest (5.6.0)\n    net-imap (0.2.3)\n      digest\n      net-protocol\n      strscan\n    net-pop (0.1.1)\n      digest\n      net-protocol\n      timeout\n    net-protocol (0.1.2)\n      io-wait\n      timeout\n    net-smtp (0.3.1)\n      digest\n      net-protocol\n      timeout\n    nio4r (2.5.8)\n    nokogiri (1.13.1)\n      mini_portile2 (~> 2.7.0)\n      racc (~> 1.4)\n    parallel (1.21.0)\n    parser (3.1.0.0)\n      ast (~> 2.4.1)\n    pry (0.14.1)\n      coderay (~> 1.1)\n      method_source (~> 1.0)\n    public_suffix (4.0.6)\n    racc (1.6.0)\n    rack (2.2.3)\n    rack-test (1.1.0)\n      rack (>= 1.0, < 3)\n    rails (7.0.1)\n      actioncable (= 7.0.1)\n      actionmailbox (= 7.0.1)\n      actionmailer (= 7.0.1)\n      actionpack (= 7.0.1)\n      actiontext (= 7.0.1)\n      actionview (= 7.0.1)\n      activejob (= 7.0.1)\n      activemodel (= 7.0.1)\n      activerecord (= 7.0.1)\n      activestorage (= 7.0.1)\n      activesupport (= 7.0.1)\n      bundler (>= 1.15.0)\n      railties (= 7.0.1)\n    rails-dom-testing (2.0.3)\n      activesupport (>= 4.2.0)\n      nokogiri (>= 1.6)\n    rails-html-sanitizer (1.4.2)\n      loofah (~> 2.3)\n    railties (7.0.1)\n      actionpack (= 7.0.1)\n      activesupport (= 7.0.1)\n      method_source\n      rake (>= 12.2)\n      thor (~> 1.0)\n      zeitwerk (~> 2.5)\n    rainbow (3.1.1)\n    rake (13.0.6)\n    regexp_parser (2.2.0)\n    rexml (3.2.5)\n    rubocop (1.13.0)\n      parallel (~> 1.10)\n      parser (>= 3.0.0.0)\n      rainbow (>= 2.2.2, < 4.0)\n      regexp_parser (>= 1.8, < 3.0)\n      rexml\n      rubocop-ast (>= 1.2.0, < 2.0)\n      ruby-progressbar (~> 1.7)\n      unicode-display_width (>= 1.4.0, < 3.0)\n    rubocop-ast (1.15.1)\n      parser (>= 3.0.1.1)\n    rubocop-github (0.16.2)\n      rubocop (<= 1.13.0)\n      rubocop-performance (<= 1.11.0)\n      rubocop-rails (<= 2.7.1)\n    rubocop-performance (1.11.0)\n      rubocop (>= 1.7.0, < 2.0)\n      rubocop-ast (>= 0.4.0)\n    rubocop-rails (2.7.1)\n      activesupport (>= 4.2.0)\n      rack (>= 1.1)\n      rubocop (>= 0.87.0)\n    ruby-progressbar (1.11.0)\n    simplecov (0.18.5)\n      docile (~> 1.1)\n      simplecov-html (~> 0.11)\n    simplecov-console (0.7.2)\n      ansi\n      simplecov\n      terminal-table\n    simplecov-html (0.12.3)\n    slim (4.1.0)\n      temple (>= 0.7.6, < 0.9)\n      tilt (>= 2.0.6, < 2.1)\n    smart_properties (1.17.0)\n    sprockets (4.0.2)\n      concurrent-ruby (~> 1.0)\n      rack (> 1, < 3)\n    sprockets-rails (3.2.2)\n      actionpack (>= 4.0)\n      activesupport (>= 4.0)\n      sprockets (>= 3.0.0)\n    strscan (3.0.1)\n    temple (0.8.2)\n    terminal-table (3.0.2)\n      unicode-display_width (>= 1.1.1, < 3)\n    thor (1.2.1)\n    tilt (2.0.10)\n    timeout (0.2.0)\n    tzinfo (2.0.4)\n      concurrent-ruby (~> 1.0)\n    unicode-display_width (2.1.0)\n    webrick (1.7.0)\n    websocket-driver (0.7.5)\n      websocket-extensions (>= 0.1.0)\n    websocket-extensions (0.1.5)\n    xpath (3.2.0)\n      nokogiri (~> 1.8)\n    yard (0.9.27)\n      webrick (~> 1.7.0)\n    yard-activesupport-concern (0.0.1)\n      yard (>= 0.8)\n    zeitwerk (2.5.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  appraisal (~> 2.4)\n  benchmark-ips (~> 2.8.2)\n  better_html (~> 1)\n  bundler (>= 1.15.0)\n  capybara (~> 3)\n  erb_lint (~> 0.0.37)\n  haml (~> 5)\n  jbuilder (~> 2)\n  minitest (= 5.6.0)\n  net-imap\n  net-pop\n  net-smtp\n  pry (~> 0.13)\n  rails (~> 7.0.0)\n  rake (~> 13.0)\n  rubocop-github (~> 0.16.1)\n  simplecov (~> 0.18.0)\n  simplecov-console (~> 0.7.2)\n  slim (~> 4.0)\n  sprockets-rails (~> 3.2.2)\n  view_component!\n  yard (~> 0.9.25)\n  yard-activesupport-concern\n\nBUNDLED WITH\n   2.2.33\n", "---\nlayout: default\ntitle: Changelog\n---\n\n# Changelog\n\n## main\n\n* Support returning Arrays from i18n files, and support marking them as HTML-safe translations.\n\n    *foca*\n\n* Add Cometeer and Framework to users list.\n\n    *Elia Schito*\n\n* Update Microsoft Vale styles.\n\n    *Simon Fish*\n\n* Fix example in testing guide for how to setup default Rails tests.\n\n    *Steven Hansen*\n\n* Update benchmark script to render multiple components/partials instead of a single instance per-run.\n\n    *Blake Williams*\n\n* Add predicate methods `#{slot_name}?` to slots.\n\n    *Hans Lemuet*\n\n* Use a dedicated deprecation instance, silence it while testing.\n\n    *Max Beizer, Hans Lemuet, Elia Schito*\n\n* Fix Ruby warnings.\n\n    *Hans Lemuet*\n\n* Place all generator options under `config.generate` namespace.\n\n    *Simon Fish*\n\n* Allow preview generator to use provided component attributes.\n* Add config option `config.view_component.generate.preview` to enable project-wide preview generation.\n* Ensure all generated `.rb` files include `# frozen_string_literal: true` statement.\n\n    *Bob Maerten*\n\n* Add Shogun to users list.\n\n    *Bernie Chiu*\n\n## 2.49.0\n\n* Fix path handling for evaluated view components that broke in Ruby 3.1.\n\n    *Adam Hess*\n\n* Fix support for the `default:` option for a global translation.\n\n    *Elia Schito*\n\n* Ensure i18n scope is a symbol to protect lookups.\n\n    *Simon Fish*\n\n* Small update to preview docs to include rspec mention.\n\n    *Leigh Halliday*\n\n* Small improvements to collection iteration docs.\n\n    *Brian O'Rourke*\n\n* Add good and bad examples to `ViewComponents in practice`.\n\n    *Joel Hawksley*\n\n* Add Ruby 3.1 and Rails 7.0 to CI\n\n    *Peter Goldstein*\n\n## 2.48.0\n\n* Correct path in example test command in Contributing docs.\n\n    *Mark Wilkinson*\n\n* Update link to GOV.UK Components library in the resources list.\n\n    *Peter Yates*\n\n* Add Lookbook to Resources docs page.\n\n    *Mark Perkins*\n\n* Add blocking compiler mode for use in Rails development and testing modes, improving thread safety.\n\n    *Horia Radu*\n\n* Add generators to support `tailwindcss-rails`.\n\n    *Dino Maric*, *Hans Lemuet*\n\n* Add a namespaced component example to docs.\n\n    *Hans Lemuet*\n\n* Setup `Appraisal` to add flexibility when testing ViewComponent against multiple Rails versions.\n\n    *Hans Lemuet*\n\n* Return correct values for `request.path` and `request.query_string` methods when using the `with_request_url` test helper.\n\n    *Vasiliy Matyushin*\n\n* Improve style in generators docs.\n\n    *Hans Lemuet*\n\n* Correctly type Ruby version strings and update Rails versions used in CI configuration.\n\n    *Hans Lemuet*\n\n* Make `ViewComponent::Collection` act like a collection of view components.\n\n    *Sammy Henningsson*\n\n* Update `@param` of `#render_inline` to include `ViewComponent::Collection`.\n\n    *Yutaka Kamei*\n\n* Add Wecasa to users list.\n\n    *Mohamed Ziata*\n\n## 2.47.0\n\n* Display preview source on previews that exclusively use templates.\n\n    *Edwin Mak*\n\n* Add a test to ensure trailing newlines are stripped when rendering with `#render_in`.\n\n    *Simon Fish*\n\n* Add WEBrick as a depenency to the application.\n\n    *Connor McQuillan*\n\n* Update Ruby version in `.tool-versions`.\n\n    *Connor McQuillan*\n\n* Add a test to ensure blocks can be passed into lambda slots without the need for any other arguments.\n\n    *Simon Fish*\n\n* Add linters for file consistency.\n\n    *Simon Fish*\n\n* Add @boardfish to docs/index.md and sort contributors.\n\n    *Simon Fish*\n\n* Set up Codespaces for bug replication.\n\n    *Simon Fish*\n\n* Add instructions for replicating bugs and failures.\n\n    *Simon Fish*\n\n* Make @boardfish a committer.\n\n    *Joel Hawksley*\n\n* Validate collection parameter with Active Model attribute names.\n\n    *Simon Fish*\n\n* Fix `helpers` not working with component slots when rendered more than 2 component levels deep.\n\n    *Blake Williams*\n\n* Update ruby to the latest versions\n\n    *Pedro Paiva*\n\n* Fix `vale` linter config options.\n\n    *Hans Lemuet*\n\n* Improve Contributing docs to include how to run tests for a specific version on Rails.\n\n    *Hans Lemuet*\n\n* Add failing test for default form builder and documentation around known issue.\n\n    *Simon Fish*\n\n* Add `--locale` flag to the component generator. Generates as many locale files as defined in `I18n.available_locales`, alongside the component.\n* Add config option `config.view_component.generate_locale` to enable project-wide locale generation.\n* Add config option `config.view_component.generate_distinct_locale_files` to enable project-wide per-locale translations file generation.\n\n    *Bob Maerten*\n\n* Add config option `config.view_component.generate_sidecar` to always generate in the sidecar directory.\n\n    *Gleydson Tavares*\n\n## 2.46.0\n\n* Add thread safety to the compiler.\n\n    *Horia Radu*\n\n* Add theme-specific logo images to readme.\n\n    *Dylan Smith*\n\n* Add Orbit to users list.\n\n    *Nicolas Goutay*\n\n* Increase clarity around purpose and use of slots.\n\n    *Simon Fish*\n\n* Deprecate loading `view_component/engine` directly.\n\n  **Upgrade notice**: You should update your `Gemfile` like this:\n\n  ```diff\n  - gem \"view_component\", require: \"view_component/engine\"`\n  + gem \"view_component\"\n  ```\n\n    *Yoshiyuki Hirano*\n\n## 2.45.0\n\n* Remove internal APIs from API documentation, fix link to license.\n\n    *Joel Hawksley*\n\n* Add @yhirano55 to triage team.\n\n    *Joel Hawksley*\n\n* Correct a typo in the sample slots code.\n\n    *Simon Fish*\n\n* Add note about `allowed_queries`.\n\n    *Joel Hawksley*\n\n* Add `vale` content linter.\n\n    *Joel Hawksley*\n\n* Remove `require \"rails/generators/test_case\"` in generator tests.\n\n    *Yoshiyuki Hirano*\n\n* Suppress zeitwerk warning about circular require.\n\n    *Yoshiyuki Hirano*\n\n* Move `test_unit_generator_test.rb` from `test/view_component/` to `test/generators/`.\n\n    *Yoshiyuki Hirano*\n\n* Unify test code of `TestUnitGeneratorTest` with the other generators tests.\n\n    *Yoshiyuki Hirano*\n\n## 2.44.0\n\n* Rename internal accessor to use private naming.\n\n    *Joel Hawksley*, *Blake Williams*, *Cameron Dutro*\n\n* Add Github repo link to docs website header.\n\n    *Hans Lemuet*\n\n* Change logo in README for dark theme readability.\n\n    *Dylan Smith*\n\n* Add Litmus to users list.\n\n    *Dylan Smith*\n\n* Add @dylanatsmith as codeowner of the ViewComponent logo and member of committers team.\n\n    *Joel Hawksley*\n\n* Autoload `CompileCache`, which is optionally called in `engine.rb`.\n\n    *Gregory Igelmund*\n\n* Move frequently asked questions to other pages, add History page.\n\n    *Joel Hawksley*\n\n* Fix typo.\n\n    *James Hart*\n\n* Add `require \"method_source\"` if it options.show_previews_source is enabled.\n\n    *Yoshiyuki Hirano*\n\n* Move show_previews_source definition to Previewable.\n\n    *Yoshiyuki Hirano*\n\n* Clear cache in MethodSource to apply the change odf preview code without app server restart.\n\n    *Yoshiyuki Hirano*\n\n## 2.43.1\n\n* Remove unnecessary call to `ruby2_keywords` for polymorphic slot getters.\n\n    *Cameron Dutro*\n\n## 2.43.0\n\n* Add note about tests and instance methods.\n\n    *Joel Hawksley*\n\n* Flesh out `ViewComponents in practice`.\n\n    *Joel Hawksley*\n\n* Add CODEOWNERS entries for feature areas owned by community committers.\n\n    *Joel Hawksley*\n\n* Separate lint and CI workflows.\n\n    *Blake Williams*\n\n* Add support for `image_path` helper in previews.\n\n    *Tobias Ahlin*, *Joel Hawksley*\n\n* Add section to docs listing users of ViewComponent. Please submit a PR to add your team to the list!\n\n    *Joel Hawksley*\n\n* Fix loading issue with Stimulus generator and add specs for Stimulus generator.\n\n    *Peter Sumskas*\n\n* Remove dependency on `ActionDispatch::Static` in Rails middleware stack when enabling statics assets for source code preview.\n\n    *Gregory Igelmund*\n\n* Require `view_component/engine` automatically.\n\n    *Cameron Dutro*\n\n## 2.42.0\n\n* Add logo files and page to docs.\n\n    *Dylan Smith*\n\n* Add `ViewComponents in practice` documentation.\n\n    *Joel Hawksley*\n\n* Fix bug where calling lambda slots without arguments would break in Ruby < 2.7.\n\n    *Manuel Puyol*\n\n* Improve Stimulus controller template to import from `stimulus` or `@hotwired/stimulus`.\n\n    *Mario Sch\u00fcttel*\n\n* Fix bug where `helpers` would instantiate and use a new `view_context` in each component.\n\n    *Blake Williams*, *Ian C. Anderson*\n\n* Implement polymorphic slots as experimental feature. See the Slots documentation to learn more.\n\n    *Cameron Dutro*\n\n## 2.41.0\n\n* Add `sprockets-rails` development dependency to fix test suite failures when using rails@main.\n\n    *Blake Williams*\n\n* Fix Ruby indentation warning.\n\n    *Blake Williams*\n\n* Add `--parent` generator option to specify the parent class.\n* Add config option `config.view_component.component_parent_class` to change it project-wide.\n\n    *Hans Lemuet*\n\n* Update docs to add example for using Devise helpers in tests.\n\n    *Matthew Rider*\n\n* Fix bug where `with_collection_parameter` didn't inherit from parent component.\n\n    *Will Drexler*, *Christian Campoli*\n\n* Allow query parameters in `with_request_url` test helper.\n\n    *Javi Mart\u00edn*\n\n* Add \"how to render a component to a string\" to FAQ.\n\n    *Hans Lemuet*\n\n* Add `#render_in` to API docs.\n\n    *Hans Lemuet*\n\n* Forward keyword arguments from slot wrapper to component instance using ruby2_keywords.\n\n    *Cameron Dutro*\n\n## 2.40.0\n\n* Replace antipatterns section in the documentation with best practices.\n\n    *Blake Williams*\n\n* Add components to `rails stats` task.\n\n    *Nicolas Brousse*\n\n* Fix bug when using Slim and writing a slot whose block evaluates to `nil`.\n\n    *Yousuf Jukaku*\n\n* Add documentation for test helpers.\n\n    *Joel Hawksley*\n\n## 2.39.0\n\n* Clarify documentation of `with_variant` as an override of Action Pack.\n\n    *Blake Williams*, *Cameron Dutro*, *Joel Hawksley*\n\n* Update docs page to be called Javascript and CSS, rename Building ViewComponents to Guide.\n\n    *Joel Hawksley*\n\n* Deprecate `Base#with_variant`.\n\n    *Cameron Dutro*\n\n* Error out in the CI if docs/api.md has to be regenerated.\n\n    *Dany Marcoux*\n\n## 2.38.0\n\n* Add `--stimulus` flag to the component generator. Generates a Stimulus controller alongside the component.\n* Add config option `config.view_component.generate_stimulus_controller` to always generate a Stimulus controller.\n\n    *Sebastien Auriault*\n\n## 2.37.0\n\n* Clarify slots example in docs to reduce naming confusion.\n\n    *Joel Hawksley*, *Blake Williams*\n\n* Fix error in documentation for `render_many` passthrough slots.\n\n    *Ollie Nye*\n\n* Add test case for conflict with internal `@variant` variable.\n\n    *David Backeus*\n\n* Document decision to not change naming convention recommendation to remove `-Component` suffix.\n\n    *Joel Hawksley*\n\n* Fix typo in documentation.\n\n    *Ryo.gift*\n\n* Add inline template example to benchmark script.\n\n    *Andrew Tait*\n\n* Fix benchmark scripts.\n\n    *Andrew Tait*\n\n* Run benchmarks in CI.\n\n    *Joel Hawksley*\n\n## 2.36.0\n\n* Add `slot_type` helper method.\n\n    *Jon Palmer*\n\n* Add test case for rendering a ViewComponent with slots in a controller.\n\n    *Simon Fish*\n\n* Add example ViewComponent to documentation landing page.\n\n    *Joel Hawksley*\n\n* Set maximum line length to 120.\n\n    *Joel Hawksley*\n\n* Setting a collection slot with the plural setter (`component.items(array)` for `renders_many :items`)  returns the array of slots.\n\n    *Jon Palmer*\n\n* Update error messages to be more descriptive and helpful.\n\n    *Joel Hawksley*\n\n* Raise an error if the slot name for renders_many is :contents\n\n    *Simon Fish*\n\n## 2.35.0\n\n* Only load assets for Preview source highlighting if previews are enabled.\n\n    *Joel Hawksley*\n\n* Fix references to moved documentation files.\n\n    *Richard Macklin*\n\n* Ensure consistent indentation with Rubocop.\n\n    *Joel Hawksley*\n\n* Bump `activesupport` upper bound from `< 7.0` to `< 8.0`.\n\n    *Richard Macklin*\n\n* Add ERB Lint for a few basic rules.\n\n    *Joel Hawksley*\n\n* Sort `gemspec` dependencies alphabetically.\n\n    *Joel Hawksley*\n\n* Lock `method_source` at `1.0` to avoid open-ended dependency.\n\n    *Joel Hawksley*\n\n* Require all PRs to include changelog entries.\n\n    *Joel Hawksley*\n\n* Rename test app and move files under /test/sandbox.\n\n    *Matt-Yorkley*\n\n* Make view_component_path config option available on ViewComponent::Base.\n\n    *Matt-Yorkley*\n\n* Add @boardfish to Triage.\n\n    *Joel Hawksley*\n\n* Adds support to change default components path (app/components) with `config.view_component.view_component_path`.\n\n    *lfalcao*\n\n* Rename private instance variables (such as @variant) to reduce potential conflicts with subclasses.\n\n    *Joel Hawksley*\n\n* Add documentation for configuration options.\n\n    *Joel Hawksley*\n\n* Add view helper `preview_source` for rendering a source code preview below previews.\n* Add config option `config.view_component.show_previews_source` for enabling the source preview.\n\n    *Johannes Engl*\n\n* Add documentation for compatibility with ActionText.\n\n    *Jared Planter*\n\n## 2.34.0\n\n* Add the ability to enable ActiveSupport notifications (`!render.view_component` event) with `config.view_component.instrumentation_enabled`.\n\n    *Svyatoslav Kryukov*\n\n* Add [Generators](https://viewcomponent.org/guide/generators.html) page to documentation.\n\n    *Hans Lemuet*\n\n* Fix bug where ViewComponents didn't work in ActionMailers.\n\n    *dark-panda*\n\n## 2.33.0\n\n* Add support for `_iteration` parameter when rendering in a collection\n\n    *Will Cosgrove*\n\n* Don't raise an error when rendering empty components.\n\n    *Alex Robbin*\n\n## 2.32.0\n\n* Enable previews by default in test environment.\n\n    *Edouard Piron*\n\n* Fix test helper compatibility with Rails 7.0, TestRequest, and TestSession.\n\n    *Leo Correa*\n\n* Add experimental `_output_postamble` lifecyle method.\n\n    *Joel Hawksley*\n\n* Add compatibility notes on FAQ.\n\n    *Matheus Richard*\n\n* Add Bridgetown on Compatibility documentation.\n\n    *Matheus Richard*\n\n* Are you interested in building the future of ViewComponent? GitHub is looking to hire a Senior Engineer to work on Primer ViewComponents and ViewComponent. Apply here: [US/Canada](https://github.com/careers) / [Europe](https://boards.greenhouse.io/github/jobs/3132294). Feel free to reach out to joelhawksley@github.com with any questions.\n\n    *Joel Hawksley*\n\n## 2.31.1\n\n* Fix `DEPRECATION WARNING: before_render_check` when compiling `ViewComponent::Base`\n\n    *Dave Kroondyk*\n\n## 2.31.0\n\n_Note: This release includes an underlying change to Slots that may affect incorrect usage of the API, where Slots were set on a line prefixed by `<%=`. The result of setting a Slot shouldn't be returned. (`<%`)_\n\n* Add `#with_content` to allow setting content without a block.\n\n    *Jordan Raine, Manuel Puyol*\n\n* Add `with_request_url` test helper.\n\n    *Mario Sch\u00fcttel*\n\n* Improve feature parity with Rails translations\n  * Don't create a translation back end if the component has no translation file\n  * Mark translation keys ending with `html` as HTML-safe\n  * Always convert keys to String\n  * Support multiple keys\n\n    *Elia Schito*\n\n* Fix errors on `asset_url` helpers when `asset_host` has no protocol.\n\n    *Elia Schito*\n\n* Prevent slots from overriding the `#content` method when registering a slot with that name.\n\n    *Blake Williams*\n\n* Deprecate `with_slot` in favor of the new [slots API](https://viewcomponent.org/guide/slots.html).\n\n    *Manuel Puyol*\n\n## 2.30.0\n\n* Deprecate `with_content_areas` in favor of [slots](https://viewcomponent.org/guide/slots.html).\n\n    *Joel Hawksley*\n\n## 2.29.0\n\n* Allow Slot lambdas to share data from the parent component and allow chaining on the returned component.\n\n    *Sjors Baltus, Blake Williams*\n\n* Experimental: Add `ViewComponent::Translatable`\n  * `t` and `translate` now will look first into the sidecar YAML translations file.\n  * `helpers.t` and `I18n.t` still reference the global Rails translation files.\n  * `l` and `localize` will still reference the global Rails translation files.\n\n    *Elia Schito*\n\n* Fix rendering output of pass through slots when using HAML.\n\n    *Alex Robbin, Blake Williams*\n\n* Experimental: call `._sidecar_files` to fetch the sidecar files for a given list of extensions, for example passing `[\"yml\", \"yaml\"]`.\n\n    *Elia Schito*\n\n* Fix bug where a single `jbuilder` template matched multiple template handlers.\n\n    *Niels Slot*\n\n## 2.28.0\n\n* Include SlotableV2 by default in Base. **Note:** It's no longer necessary to include `ViewComponent::SlotableV2` to use Slots.\n\n    *Joel Hawksley*\n\n* Prepend Preview routes instead of appending, accounting for cases where host application has catchall route.\n\n    *Joel Hawksley*\n\n* Fix bug where blocks passed to lambda slots will render incorrectly in certain situations.\n\n    *Blake Williams*\n\n## 2.27.0\n\n* Allow customization of the controller used in component tests.\n\n    *Alex Robbin*\n\n* Generate preview at overridden path if one exists when using `--preview` flag.\n\n    *Nishiki Liu*\n\n## 2.26.1\n\n* Fix bug that raises when trying to use a collection before the component has been compiled.\n\n    *Blake Williams*\n\n## 2.26.0\n\n* Delay evaluating component `content` in `render?`, preventing the `content` block from being evaluated when `render?` returns false.\n\n    *Blake Williams*\n\n* Don't generate template when using `--inline` flag.\n\n    *Hans Lemuet*\n\n* Add `--inline` option to the Haml and Slim generators\n\n    *Hans Lemuet*\n\n## 2.25.1\n\n* Experimental: call `._after_compile` class method after a component is compiled.\n\n    *Joel Hawksley*\n\n* Fix bug where SlotV2 was rendered as an HTML string when using Slim.\n\n    *Manuel Puyol*\n\n## 2.25.0\n\n* Add `--preview` generator option to create an associated preview file.\n\n    *Bob Maerten*\n\n* Add argument validation to avoid `content` override.\n\n    *Manuel Puyol*\n\n## 2.24.0\n\n* Add `--inline` option to the erb generator. Prevents default erb template from being created and creates a component with a call method.\n\n    *Nachiket Pusalkar*\n\n* Add test case for checking presence of `content` in `#render?`.\n\n    *Joel Hawksley*\n\n* Rename `master` branch to `main`.\n\n    *Joel Hawksley*\n\n## 2.23.2\n\n* Fix bug where rendering a component `with_collection` from a controller raised an error.\n\n    *Joel Hawksley*\n\n## 2.23.1\n\n* Fixed out-of-order rendering bug in `ActionView::SlotableV2`\n\n    *Blake Williams*\n\n## 2.23.0\n\n* Add `ActionView::SlotableV2`\n  * `with_slot` becomes `renders_one`.\n  * `with_slot collection: true` becomes `renders_many`.\n  * Slot definitions now accept either a component class, component class name, or a lambda instead of a `class_name:` keyword argument.\n  * Slots now support positional arguments.\n  * Slots no longer use the `content` attribute to render content, instead relying on `to_s`. for example `<%= my_slot %>`.\n  * Slot values are no longer set via the `slot` method, and instead use the name of the slot.\n\n    *Blake Williams*\n\n* Add `frozen_string_literal: true` to generated component template.\n\n    *Max Beizer*\n\n## 2.22.1\n\n* Revert refactor that broke rendering for some users.\n\n    *Joel Hawksley*\n\n## 2.22.0\n\n* Add #with_variant to enable inline component variant rendering without template files.\n\n    *Nathan Jones*\n\n## 2.21.0\n\n* Only compile components at application initialization if eager loading is enabled.\n\n    *Joel Hawksley*\n\n## 2.20.0\n\n* Don't add `/test/components/previews` to preview_paths if directory doesn't exist.\n\n    *Andy Holland*\n\n* Add `preview_controller` option to override the controller used for component previews.\n\n    *Matt Swanson, Blake Williams, Juan Manuel Ramallo*\n\n## 2.19.1\n\n* Check if `Rails.application` is loaded.\n\n    *Gleydson Tavares*\n\n* Add documentation for webpack configuration when using Stimulus controllers.\n\n    *Ciprian Redinciuc*\n\n## 2.19.0\n\n* Extend documentation for using Stimulus within sidecar directories.\n\n    *Ciprian Redinciuc*\n\n* Subclassed components inherit templates from parent.\n\n    *Blake Williams*\n\n* Fix uninitialized constant error from `with_collection` when `eager_load` is disabled.\n\n    *Josh Gross*\n\n## 2.18.2\n\n* Raise an error if controller or view context is accessed during initialize as they're only available in render.\n\n    *Julian Nadeau*\n\n* Collate test coverage across CI builds, ensuring 100% test coverage.\n\n    *Joel Hawksley*\n\n## 2.18.1\n\n* Fix bug where previews didn't work when monkey patch was disabled.\n\n    *Mixer Gutierrez*\n\n## 2.18.0\n\n* Fix auto loading of previews (changes no longer require a server restart)\n\n    *Matt Brictson*\n\n* Add `default_preview_layout` configuration option to load custom app/views/layouts.\n\n    *Jared White, Juan Manuel Ramallo*\n\n* Calculate virtual_path once for all instances of a component class to improve performance.\n\n    *Brad Parker*\n\n## 2.17.1\n\n* Fix bug where rendering Slot with empty block resulted in error.\n\n    *Joel Hawksley*\n\n## 2.17.0\n\n* Slots return stripped HTML, removing leading and trailing whitespace.\n\n    *Jason Long, Joel Hawksley*\n\n## 2.16.0\n\n* Add `--sidecar` option to the erb, haml and slim generators. Places the generated template in the sidecar directory.\n\n    *Michael van Rooijen*\n\n## 2.15.0\n\n* Add support for templates as ViewComponent::Preview examples.\n\n    *Juan Manuel Ramallo\n\n## 2.14.1\n\n* Allow using `render_inline` in test when the render monkey patch is disabled with `config.view_component.render_monkey_patch_enabled = false` in versions of Rails < 6.1.\n\n    *Cl\u00e9ment Joubert*\n\n* Fix kwargs warnings in slotable.\n\n    Fixes:\n\n    ```console\n    view_component/lib/view_component/slotable.rb:98: warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call\n    view_component/test/app/components/slots_component.rb:18: warning: The called method `initialize' is defined here\n    ```\n\n    *Eileen M. Uchitelle*\n\n## 2.14.0\n\n* Add `config.preview_paths` to support multiple locations of component preview files. Deprecate `config.preview_path`.\n\n    *Tomas Celizna*\n\n* Only print warning about a missing capybara dependency if the `DEBUG` environment variable is set.\n\n    *Richard Macklin*\n\n## 2.13.0\n\n* Add the ability to disable the render monkey patch with `config.view_component.render_monkey_patch_enabled`. In versions of Rails < 6.1, add `render_component` and `render_component_to_string` methods which can be used for rendering components instead of `render`.\n\n    *Johannes Engl*\n\n## 2.12.0\n\n* Implement Slots as potential successor to Content Areas.\n\n    *Jens Ljungblad, Brian Bugh, Jon Palmer, Joel Hawksley*\n\n## 2.11.1\n\n* Fix kwarg warnings in Ruby 2.7.\n\n    *Joel Hawksley*\n\n## 2.11.0\n\n* Ensure Rails configuration is available within components.\n\n    *Trevor Broaddus*\n\n* Fix bug where global Rails helpers are inaccessible from nested components. Before, `helpers` was pointing to parent component.\n\n    *Franco Sebregondi*\n\n## 2.10.0\n\n* Raise an `ArgumentError` with a helpful message when Ruby can't parse a component class.\n\n    *Max Beizer*\n\n## 2.9.0\n\n* Cache components per-request in development, preventing unnecessary recompilation during a single request.\n\n    *Felipe Sateler*\n\n## 2.8.0\n\n* Add `before_render`, deprecating `before_render_check`.\n\n    *Joel Hawksley*\n\n## 2.7.0\n\n* Add `rendered_component` method to `ViewComponent::TestHelpers` which exposes the raw output of the rendered component.\n\n    *Richard Macklin*\n\n* Support sidecar directories for views and other assets.\n\n    *Jon Palmer*\n\n## 2.6.0\n\n* Add `config.view_component.preview_route` to set the endpoint for component previews. By default `/rails/view_components` is used.\n\n    *Juan Manuel Ramallo*\n\n* Raise error when initializer omits with_collection_parameter.\n\n    *Joel Hawksley*\n\n## 2.5.1\n\n* Compile component before rendering collection.\n\n    *Rainer Borene*\n\n## v2.5.0\n\n* Add counter variables when rendering collections.\n\n    *Frank S*\n\n* Add the ability to access params from preview examples.\n\n    *Fabio Cantoni*\n\n## v2.4.0\n\n* Add `#render_to_string` support.\n\n   *Jarod Reid*\n\n* Declare explicit dependency on `activesupport`.\n\n    *Richard Macklin*\n\n* Remove `autoload`s of internal modules (`Previewable`, `RenderMonkeyPatch`, `RenderingMonkeyPatch`).\n\n    *Richard Macklin*\n\n* Remove `capybara` dependency.\n\n    *Richard Macklin*\n\n## v2.3.0\n\n* Allow using inline render method(s) defined on a parent.\n\n    *Simon Rand*\n\n* Fix bug where inline variant render methods would never be called.\n\n    *Simon Rand*\n\n* ViewComponent preview index views use Rails internal layout instead of application's layout\n\n    *Juan Manuel Ramallo*\n\n## v2.2.2\n\n* Add `Base.format` for better compatibility with `ActionView::Template`.\n\n    *Joel Hawksley*\n\n## v2.2.1\n\n* Fix bug where template couldn't be found if `inherited` was redefined.\n\n    *Joel Hawksley*\n\n## v2.2.0\n\n* Add support for `config.action_view.annotate_template_file_names` (coming in Rails 6.1).\n\n    *Joel Hawksley*\n\n* Remove initializer requirement from the component.\n\n    *Vasiliy Ermolovich*\n\n## v2.1.0\n\n* Support rendering collections (for example, `render(MyComponent.with_collection(@items))`).\n\n    *Tim Clem*\n\n## v2.0.0\n\n* Move to `ViewComponent` namespace, removing all references to `ActionView`.\n\n  * The gem name is now `view_component`.\n  * ViewComponent previews are now accessed at `/rails/view_components`.\n  * ViewComponents can _only_ be rendered with the instance syntax: `render(MyComponent.new)`. Support for all other syntaxes has been removed.\n  * ActiveModel::Validations have been removed. ViewComponent generators no longer include validations.\n  * In Rails 6.1, no monkey patching is used.\n  * `to_component_class` has been removed.\n  * All gem configuration is now in `config.view_component`.\n\n## v1.17.0\n\n* Support Ruby 2.4 in CI.\n\n    *Andrew Mason*\n\n* ViewComponent generators don't not prompt for content requirement.\n\n    *Joel Hawksley*\n\n* Add post-install message that gem has been renamed to `view_component`.\n\n    *Joel Hawksley*\n\n## v1.16.0\n\n* Add `refute_component_rendered` test helper.\n\n    *Joel Hawksley*\n\n* Check for Rails before invocation.\n\n    *Dave Paola*\n\n* Allow components to be rendered without a template file (aka inline component).\n\n    *Rainer Borene*\n\n## v1.15.0\n\n* Re-introduce ActionView::Component::TestHelpers.\n\n    *Joel Hawksley*\n\n* Bypass monkey patch on Rails 6.1 builds.\n\n    *Joel Hawksley*\n\n* Make `ActionView::Helpers::TagHelper` available in Previews.\n\n    ```ruby\n    def with_html_content\n      render(MyComponent.new) do\n        tag.div do\n          content_tag(:span, \"Hello\")\n        end\n      end\n    end\n    ```\n\n    *Sean Doyle*\n\n## v1.14.1\n\n* Fix bug where generator created invalid test code.\n\n    *Joel Hawksley*\n\n## v1.14.0\n\n* Rename ActionView::Component::Base to ViewComponent::Base\n\n    *Joel Hawksley*\n\n## v1.13.0\n\n* Allow components to be rendered inside controllers.\n\n    *Joel Hawksley*\n\n* Improve backtraces from exceptions raised in templates.\n\n    *Blake Williams*\n\n## v1.12.0\n\n* Revert: Remove initializer requirement for Ruby 2.7+\n\n    *Joel Hawksley*\n\n* Restructure Railtie into Engine\n\n    *Sean Doyle*\n\n* Allow components to override before_render_check\n\n    *Joel Hawksley*\n\n## v1.11.1\n\n* Relax Capybara requirement.\n\n    *Joel Hawksley*\n\n## v1.11.0\n\n* Add support for Capybara matchers.\n\n    *Joel Hawksley*\n\n* Add erb, haml, & slim template generators\n\n    *Asger Behncke Jacobsen*\n\n## v1.10.0\n\n* Deprecate all `render` syntaxes except for `render(MyComponent.new(foo: :bar))`\n\n    *Joel Hawksley*\n\n## v1.9.0\n\n* Remove initializer requirement for Ruby 2.7+\n\n    *Dylan Clark*\n\n## v1.8.1\n\n* Run validation checks before calling `#render?`.\n\n    *Ash Wilson*\n\n## v1.8.0\n\n* Remove the unneeded ComponentExamplesController and simplify preview rendering.\n\n    *Jon Palmer*\n\n* Add `#render?` hook to allow components to be no-ops.\n\n    *Kyle Fox*\n\n* Don't assume ApplicationController exists.\n\n    *Jon Palmer*\n\n* Allow some additional checks to overrided render?\n\n    *Sergey Malykh*\n\n* Fix generator placing namespaced components in the root directory.\n\n    *Asger Behncke Jacobsen*\n\n* Fix cache test.\n\n    *Sergey Malykh*\n\n## v1.7.0\n\n* Simplify validation of templates and compilation.\n\n    *Jon Palmer*\n\n* Add support for multiple content areas.\n\n    *Jon Palmer*\n\n## v1.6.2\n\n* Fix Uninitialized Constant error.\n\n    *Jon Palmer*\n\n* Add basic github issue and PR templates.\n\n    *Dylan Clark*\n\n* Update readme phrasing around previews.\n\n    *Justin Coyne*\n\n## v1.6.1\n\n* Allow Previews to have no layout.\n\n    *Jon Palmer*\n\n* Bump rack from 2.0.7 to 2.0.8.\n\n    *Dependabot*\n\n* Compile components on application boot when eager loading is enabled.\n\n    *Joel Hawksley*\n\n* Previews support content blocks.\n\n    *Cesario Uy*\n\n* Follow Rails conventions. (refactor)\n\n    *Rainer Borene*\n\n* Fix edge case issue with extracting variants from less conventional source_locations.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Ryan Workman*\n<!-- vale proselint.GenderBias = YES -->\n\n## v1.6.0\n\n* Avoid dropping elements in the render_inline test helper.\n\n    *@dark-panda*\n\n* Add test for helpers.asset_url.\n\n    *Christopher Coleman*\n\n* Add rudimentary compatibility with better_html.\n\n    *Joel Hawksley*\n\n* Template-less variants fall back to default template.\n\n    *Asger Behncke Jacobsen*, *Cesario Uy*\n\n* Generated tests use new naming convention.\n\n    *Simon Tr\u00e6ls Ravn*\n\n* Eliminate sqlite dependency.\n\n    *Simon Dawson*\n\n* Add support for rendering components via #to_component_class\n\n    *Vinicius Stock*\n\n## v1.5.3\n\n* Add support for RSpec to generators.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Dylan Clark, Ryan Workman*\n<!-- vale proselint.GenderBias = YES -->\n\n* Require controllers as part of setting autoload paths.\n\n    *Joel Hawksley*\n\n## v1.5.2\n\n* Disable eager loading initializer.\n\n    *Kasper Meyer*\n\n## v1.5.1\n\n* Update railties class to work with Rails 6.\n\n    *Juan Manuel Ramallo*\n\n## v1.5.0\n\nNote: `actionview-component` is now loaded by requiring `actionview/component`, not `actionview/component/base`.\n\n* Fix issue with generating component method signatures.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Ryan Workman, Dylan Clark*\n<!-- vale proselint.GenderBias = YES -->\n\n* Create component generator.\n\n    *Vinicius Stock*\n\n* Add helpers proxy.\n\n    *Kasper Meyer*\n\n* Introduce ActionView::Component::Previews.\n\n    *Juan Manuel Ramallo*\n\n## v1.4.0\n\n* Fix bug where components broke in application paths with periods.\n\n    *Anton, Joel Hawksley*\n\n* Add support for `cache_if` in component templates.\n\n    *Aaron Patterson, Joel Hawksley*\n\n* Add support for variants.\n\n    *Juan Manuel Ramallo*\n\n* Fix bug in virtual path lookup.\n\n    *Juan Manuel Ramallo*\n\n* Preselect the rendered component in render_inline.\n\n    *Elia Schito*\n\n## v1.3.6\n\n* Allow template file names without format.\n\n    *Joel Hawksley*\n\n* Add support for translations.\n\n    *Juan Manuel Ramallo*\n\n## v1.3.5\n\n* Re-expose `controller` method.\n\n    *Michael Emhofer, Joel Hawksley*\n\n* Gem version numbers are now accessible through `ActionView::Component::VERSION`\n\n    *Richard Macklin*\n\n* Fix typo in README\n\n    *ars moriendi*\n\n## v1.3.4\n\n* Template errors surface correct file and line number.\n\n    *Justin Coyne*\n\n* Allow access to `request` inside components.\n\n    *Joel Hawksley*\n\n## v1.3.3\n\n* Don't raise error when sidecar files that aren't templates exist.\n\n    *Joel Hawksley*\n\n## v1.3.2\n\n* Support rendering views from inside component templates.\n\n    *Patrick Sinclair*\n\n## v1.3.1\n\n* Fix bug where rendering nested content caused an error.\n\n    *Joel Hawksley, Aaron Patterson*\n\n## v1.3.0\n\n* Components are rendered with enough controller context to support rendering of partials and forms.\n\n    *Patrick Sinclair, Joel Hawksley, Aaron Patterson*\n\n## v1.2.1\n\n* `actionview-component` is now tested against Ruby 2.3/2.4 and Rails 5.0.0.\n\n## v1.2.0\n\n* The `render_component` test helper has been renamed to `render_inline`. `render_component` has been deprecated and will be removed in v2.0.0.\n\n    *Joel Hawksley*\n\n* Components are now rendered with `render MyComponent, foo: :bar` syntax. The existing `render MyComponent.new(foo: :bar)` syntax has been deprecated and will be removed in v2.0.0.\n\n    *Joel Hawksley*\n\n## v1.1.0\n\n* Components now inherit from ActionView::Component::Base\n\n    *Joel Hawksley*\n\n## v1.0.1\n\n* Always recompile component templates outside production.\n\n    *Joel Hawksley, John Hawthorn*\n\n## v1.0.0\n\nThis release extracts the `ActionView::Component` library from the GitHub application.\n\nIt will be published on RubyGems under the existing `actionview-component` gem name, as @chancancode has passed us ownership of the gem.\n", "# frozen_string_literal: true\n\nrequire \"set\"\nrequire \"i18n\"\nrequire \"action_view/helpers/translation_helper\"\nrequire \"active_support/concern\"\n\nmodule ViewComponent\n  module Translatable\n    extend ActiveSupport::Concern\n\n    HTML_SAFE_TRANSLATION_KEY = /(?:_|\\b)html\\z/.freeze\n\n    included do\n      class_attribute :i18n_backend, instance_writer: false, instance_predicate: false\n    end\n\n    class_methods do\n      def i18n_scope\n        @i18n_scope ||= virtual_path.sub(%r{^/}, \"\").gsub(%r{/_?}, \".\")\n      end\n\n      def _after_compile\n        super\n\n        return if CompileCache.compiled? self\n\n        if (translation_files = _sidecar_files(%w[yml yaml])).any?\n          self.i18n_backend = I18nBackend.new(\n            i18n_scope: i18n_scope,\n            load_paths: translation_files,\n          )\n        else\n          # Cleanup if translations file has been removed since the last compilation\n          self.i18n_backend = nil\n        end\n      end\n    end\n\n    class I18nBackend < ::I18n::Backend::Simple\n      EMPTY_HASH = {}.freeze\n\n      def initialize(i18n_scope:, load_paths:)\n        @i18n_scope = i18n_scope.split(\".\").map(&:to_sym)\n        @load_paths = load_paths\n      end\n\n      # Ensure the Simple backend won't load paths from ::I18n.load_path\n      def load_translations\n        super(@load_paths)\n      end\n\n      def scope_data(data)\n        @i18n_scope.reverse_each do |part|\n          data = { part => data }\n        end\n        data\n      end\n\n      def store_translations(locale, data, options = EMPTY_HASH)\n        super(locale, scope_data(data), options)\n      end\n    end\n\n    def translate(key = nil, **options)\n      return super unless i18n_backend\n      return key.map { |k| translate(k, **options) } if key.is_a?(Array)\n\n      locale = options.delete(:locale) || ::I18n.locale\n      key = key&.to_s unless key.is_a?(String)\n      key = \"#{i18n_scope}#{key}\" if key.start_with?(\".\")\n\n      if key.start_with?(i18n_scope + \".\")\n        translated =\n          catch(:exception) do\n            i18n_backend.translate(locale, key, options)\n          end\n\n        # Fallback to the global translations\n        if translated.is_a? ::I18n::MissingTranslation\n          return super(key, locale: locale, **options)\n        end\n\n        if HTML_SAFE_TRANSLATION_KEY.match?(key)\n          translated = html_safe_translation(translated)\n        end\n\n        translated\n      else\n        super(key, locale: locale, **options)\n      end\n    end\n    alias :t :translate\n\n    # Exposes .i18n_scope as an instance method\n    def i18n_scope\n      self.class.i18n_scope\n    end\n\n    def html_safe_translation(translation)\n      if translation.respond_to?(:map)\n        translation.map { |element| html_safe_translation(element) }\n      else\n        # It's assumed here that objects loaded by the i18n backend will respond to `#html_safe?`.\n        # It's reasonable that if we're in Rails, `active_support/core_ext/string/output_safety.rb`\n        # will provide this to `Object`.\n        translation.html_safe # rubocop:disable Rails/OutputSafety\n      end\n    end\n  end\nend\n", "en:\n  hello: \"Hello from sidecar translations!\"\n\n  hello_html: \"Hello from <strong>sidecar translations</strong>!\"\n\n  html: \"hello <em>world</em>!\"\n\n  from:\n    sidecar: This is coming from the sidecar\n\n  list:\n    - This\n    - returns\n    - a list\n\n  list_html:\n    - <em>This</em>\n    - returns\n    - a list with <strong>embedded</strong> HTML\n", "# frozen_string_literal: true\n\nrequire \"test_helper\"\n\nclass TranslatableTest < ViewComponent::TestCase\n  def test_isolated_translations\n    render_inline(TranslatableComponent.new)\n\n    assert_selector(\"p.sidecar.shared-key\", text: \"Hello from sidecar translations!\")\n    assert_selector(\"p.sidecar.nested\", text: \"This is coming from the sidecar\")\n    assert_selector(\"p.sidecar.missing\", text: \"This is coming from Rails\")\n\n    assert_selector(\"p.helpers.shared-key\", text: \"Hello from Rails translations!\")\n    assert_selector(\"p.helpers.nested\", text: \"This is coming from Rails\")\n\n    assert_selector(\"p.global.shared-key\", text: \"Hello from Rails translations!\")\n    assert_selector(\"p.global.nested\", text: \"This is coming from Rails\")\n  end\n\n  def test_multi_key_support\n    assert_equal(\n      [\n        \"Hello from sidecar translations!\",\n        \"This is coming from the sidecar\",\n        \"This is coming from Rails\",\n      ],\n      translate(\n        [\n          \".hello\",\n          \".from.sidecar\",\n          \"from.rails\",\n        ]\n      )\n    )\n  end\n\n  def test_relative_keys_missing_from_component_translations\n    assert_equal \"Relative key from Rails\", translate(\".relative_rails_key\")\n  end\n\n  def test_symbol_keys\n    assert_equal \"Hello from sidecar translations!\", translate(:\".hello\")\n  end\n\n  def test_converts_key_to_string_as_necessary\n    klass = Struct.new(:to_s)\n    key = klass.new(\".hello\")\n    assert_equal \"Hello from sidecar translations!\", translate(key)\n  end\n\n  def test_translate_marks_translations_named_html_as_safe_html\n    assert_equal \"hello <em>world</em>!\", translate(\".html\")\n    assert_predicate translate(\".html\"), :html_safe?\n  end\n\n  def test_translate_marks_translations_with_a_html_suffix_as_safe_html\n    assert_equal \"Hello from <strong>sidecar translations</strong>!\", translate(\".hello_html\")\n    assert_predicate translate(\".hello_html\"), :html_safe?\n  end\n\n  def test_translate_uses_the_helper_when_no_sidecar_file_is_provided\n    # The cache needs to be kept clean for TranslatableComponent, otherwise it will rely on the\n    # already created i18n_backend.\n    ViewComponent::CompileCache.cache.delete(TranslatableComponent)\n\n    ViewComponent::Base.stub(\n      :_sidecar_files,\n      ->(exts) { exts.include?(\"yml\") ? [] : TranslatableComponent.__minitest_stub___sidecar_files(exts) }\n    ) do\n      assert_equal \"MISSING\", translate(\".hello\", default: \"MISSING\")\n      assert_equal \"Hello from Rails translations!\", translate(\"hello\")\n      assert_nil TranslatableComponent.i18n_backend\n    end\n  ensure\n    ViewComponent::CompileCache.cache.delete(TranslatableComponent)\n  end\n\n  def test_default\n    default_value = Object.new\n\n    assert_equal default_value, translate(\".missing\", default: default_value)\n    assert_equal default_value, translate(\"missing\", default: default_value)\n    assert_equal \"Hello from Rails translations!\", translate(\"hello\", default: default_value)\n    assert_equal \"Hello from sidecar translations!\", translate(\".hello\", default: default_value)\n  end\n\n  def test_translate_returns_lists\n    assert_equal [\"This\", \"returns\", \"a list\"], translate(\".list\")\n  end\n\n  def test_translate_returns_html_safe_lists\n    translated_list = translate(\".list_html\")\n\n    assert_equal(\n      [\n        \"<em>This</em>\",\n        \"returns\",\n        \"a list with <strong>embedded</strong> HTML\"\n      ],\n      translated_list\n    )\n\n    translated_list.each do |item|\n      assert_predicate item, :html_safe?\n    end\n  end\n\n  private\n\n  def translate(key, **options)\n    component = TranslatableComponent.new\n    render_inline(component)\n    component.translate(key, **options)\n  end\nend\n"], "fixing_code": ["PATH\n  remote: .\n  specs:\n    view_component (2.49.0)\n      activesupport (>= 5.0.0, < 8.0)\n      method_source (~> 1.0)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (7.0.2)\n      actionpack (= 7.0.2)\n      activesupport (= 7.0.2)\n      nio4r (~> 2.0)\n      websocket-driver (>= 0.6.1)\n    actionmailbox (7.0.2)\n      actionpack (= 7.0.2)\n      activejob (= 7.0.2)\n      activerecord (= 7.0.2)\n      activestorage (= 7.0.2)\n      activesupport (= 7.0.2)\n      mail (>= 2.7.1)\n      net-imap\n      net-pop\n      net-smtp\n    actionmailer (7.0.2)\n      actionpack (= 7.0.2)\n      actionview (= 7.0.2)\n      activejob (= 7.0.2)\n      activesupport (= 7.0.2)\n      mail (~> 2.5, >= 2.5.4)\n      net-imap\n      net-pop\n      net-smtp\n      rails-dom-testing (~> 2.0)\n    actionpack (7.0.2)\n      actionview (= 7.0.2)\n      activesupport (= 7.0.2)\n      rack (~> 2.0, >= 2.2.0)\n      rack-test (>= 0.6.3)\n      rails-dom-testing (~> 2.0)\n      rails-html-sanitizer (~> 1.0, >= 1.2.0)\n    actiontext (7.0.2)\n      actionpack (= 7.0.2)\n      activerecord (= 7.0.2)\n      activestorage (= 7.0.2)\n      activesupport (= 7.0.2)\n      globalid (>= 0.6.0)\n      nokogiri (>= 1.8.5)\n    actionview (7.0.2)\n      activesupport (= 7.0.2)\n      builder (~> 3.1)\n      erubi (~> 1.4)\n      rails-dom-testing (~> 2.0)\n      rails-html-sanitizer (~> 1.1, >= 1.2.0)\n    activejob (7.0.2)\n      activesupport (= 7.0.2)\n      globalid (>= 0.3.6)\n    activemodel (7.0.2)\n      activesupport (= 7.0.2)\n    activerecord (7.0.2)\n      activemodel (= 7.0.2)\n      activesupport (= 7.0.2)\n    activestorage (7.0.2)\n      actionpack (= 7.0.2)\n      activejob (= 7.0.2)\n      activerecord (= 7.0.2)\n      activesupport (= 7.0.2)\n      marcel (~> 1.0)\n      mini_mime (>= 1.1.0)\n    activesupport (7.0.2)\n      concurrent-ruby (~> 1.0, >= 1.0.2)\n      i18n (>= 1.6, < 2)\n      minitest (>= 5.1)\n      tzinfo (~> 2.0)\n    addressable (2.8.0)\n      public_suffix (>= 2.0.2, < 5.0)\n    ansi (1.5.0)\n    appraisal (2.4.1)\n      bundler\n      rake\n      thor (>= 0.14.0)\n    ast (2.4.2)\n    benchmark-ips (2.8.4)\n    better_html (1.0.16)\n      actionview (>= 4.0)\n      activesupport (>= 4.0)\n      ast (~> 2.0)\n      erubi (~> 1.4)\n      html_tokenizer (~> 0.0.6)\n      parser (>= 2.4)\n      smart_properties\n    builder (3.2.4)\n    capybara (3.36.0)\n      addressable\n      matrix\n      mini_mime (>= 0.1.3)\n      nokogiri (~> 1.8)\n      rack (>= 1.6.0)\n      rack-test (>= 0.6.3)\n      regexp_parser (>= 1.5, < 3.0)\n      xpath (~> 3.2)\n    coderay (1.1.3)\n    concurrent-ruby (1.1.9)\n    crass (1.0.6)\n    digest (3.1.0)\n    docile (1.4.0)\n    erb_lint (0.0.37)\n      activesupport\n      better_html (~> 1.0.7)\n      html_tokenizer\n      parser (>= 2.7.1.4)\n      rainbow\n      rubocop\n      smart_properties\n    erubi (1.10.0)\n    globalid (1.0.0)\n      activesupport (>= 5.0)\n    haml (5.2.2)\n      temple (>= 0.8.0)\n      tilt\n    html_tokenizer (0.0.7)\n    i18n (1.10.0)\n      concurrent-ruby (~> 1.0)\n    io-wait (0.2.1)\n    jbuilder (2.11.5)\n      actionview (>= 5.0.0)\n      activesupport (>= 5.0.0)\n    loofah (2.14.0)\n      crass (~> 1.0.2)\n      nokogiri (>= 1.5.9)\n    mail (2.7.1)\n      mini_mime (>= 0.1.1)\n    marcel (1.0.2)\n    matrix (0.4.2)\n    method_source (1.0.0)\n    mini_mime (1.1.2)\n    mini_portile2 (2.8.0)\n    minitest (5.6.0)\n    net-imap (0.2.3)\n      digest\n      net-protocol\n      strscan\n    net-pop (0.1.1)\n      digest\n      net-protocol\n      timeout\n    net-protocol (0.1.2)\n      io-wait\n      timeout\n    net-smtp (0.3.1)\n      digest\n      net-protocol\n      timeout\n    nio4r (2.5.8)\n    nokogiri (1.13.3)\n      mini_portile2 (~> 2.8.0)\n      racc (~> 1.4)\n    parallel (1.21.0)\n    parser (3.1.1.0)\n      ast (~> 2.4.1)\n    pry (0.14.1)\n      coderay (~> 1.1)\n      method_source (~> 1.0)\n    public_suffix (4.0.6)\n    racc (1.6.0)\n    rack (2.2.3)\n    rack-test (1.1.0)\n      rack (>= 1.0, < 3)\n    rails (7.0.2)\n      actioncable (= 7.0.2)\n      actionmailbox (= 7.0.2)\n      actionmailer (= 7.0.2)\n      actionpack (= 7.0.2)\n      actiontext (= 7.0.2)\n      actionview (= 7.0.2)\n      activejob (= 7.0.2)\n      activemodel (= 7.0.2)\n      activerecord (= 7.0.2)\n      activestorage (= 7.0.2)\n      activesupport (= 7.0.2)\n      bundler (>= 1.15.0)\n      railties (= 7.0.2)\n    rails-dom-testing (2.0.3)\n      activesupport (>= 4.2.0)\n      nokogiri (>= 1.6)\n    rails-html-sanitizer (1.4.2)\n      loofah (~> 2.3)\n    railties (7.0.2)\n      actionpack (= 7.0.2)\n      activesupport (= 7.0.2)\n      method_source\n      rake (>= 12.2)\n      thor (~> 1.0)\n      zeitwerk (~> 2.5)\n    rainbow (3.1.1)\n    rake (13.0.6)\n    regexp_parser (2.2.1)\n    rexml (3.2.5)\n    rubocop (1.13.0)\n      parallel (~> 1.10)\n      parser (>= 3.0.0.0)\n      rainbow (>= 2.2.2, < 4.0)\n      regexp_parser (>= 1.8, < 3.0)\n      rexml\n      rubocop-ast (>= 1.2.0, < 2.0)\n      ruby-progressbar (~> 1.7)\n      unicode-display_width (>= 1.4.0, < 3.0)\n    rubocop-ast (1.16.0)\n      parser (>= 3.1.1.0)\n    rubocop-github (0.16.2)\n      rubocop (<= 1.13.0)\n      rubocop-performance (<= 1.11.0)\n      rubocop-rails (<= 2.7.1)\n    rubocop-performance (1.11.0)\n      rubocop (>= 1.7.0, < 2.0)\n      rubocop-ast (>= 0.4.0)\n    rubocop-rails (2.7.1)\n      activesupport (>= 4.2.0)\n      rack (>= 1.1)\n      rubocop (>= 0.87.0)\n    ruby-progressbar (1.11.0)\n    simplecov (0.18.5)\n      docile (~> 1.1)\n      simplecov-html (~> 0.11)\n    simplecov-console (0.7.2)\n      ansi\n      simplecov\n      terminal-table\n    simplecov-html (0.12.3)\n    slim (4.1.0)\n      temple (>= 0.7.6, < 0.9)\n      tilt (>= 2.0.6, < 2.1)\n    smart_properties (1.17.0)\n    sprockets (4.0.3)\n      concurrent-ruby (~> 1.0)\n      rack (> 1, < 3)\n    sprockets-rails (3.2.2)\n      actionpack (>= 4.0)\n      activesupport (>= 4.0)\n      sprockets (>= 3.0.0)\n    strscan (3.0.1)\n    temple (0.8.2)\n    terminal-table (3.0.2)\n      unicode-display_width (>= 1.1.1, < 3)\n    thor (1.2.1)\n    tilt (2.0.10)\n    timeout (0.2.0)\n    tzinfo (2.0.4)\n      concurrent-ruby (~> 1.0)\n    unicode-display_width (2.1.0)\n    webrick (1.7.0)\n    websocket-driver (0.7.5)\n      websocket-extensions (>= 0.1.0)\n    websocket-extensions (0.1.5)\n    xpath (3.2.0)\n      nokogiri (~> 1.8)\n    yard (0.9.27)\n      webrick (~> 1.7.0)\n    yard-activesupport-concern (0.0.1)\n      yard (>= 0.8)\n    zeitwerk (2.5.4)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  appraisal (~> 2.4)\n  benchmark-ips (~> 2.8.2)\n  better_html (~> 1)\n  bundler (>= 1.15.0)\n  capybara (~> 3)\n  erb_lint (~> 0.0.37)\n  haml (~> 5)\n  jbuilder (~> 2)\n  minitest (= 5.6.0)\n  pry (~> 0.13)\n  rails (= 7.0.2)\n  rake (~> 13.0)\n  rubocop-github (~> 0.16.1)\n  simplecov (~> 0.18.0)\n  simplecov-console (~> 0.7.2)\n  slim (~> 4.0)\n  sprockets-rails (~> 3.2.2)\n  view_component!\n  yard (~> 0.9.25)\n  yard-activesupport-concern\n\nBUNDLED WITH\n   2.2.33\n", "---\nlayout: default\ntitle: Changelog\n---\n\n# Changelog\n\n## main\n\n* Support returning Arrays from i18n files, and support marking them as HTML-safe translations.\n\n    *foca*\n\n* Add Cometeer and Framework to users list.\n\n    *Elia Schito*\n\n* Update Microsoft Vale styles.\n\n    *Simon Fish*\n\n* Fix example in testing guide for how to setup default Rails tests.\n\n    *Steven Hansen*\n\n* Update benchmark script to render multiple components/partials instead of a single instance per-run.\n\n    *Blake Williams*\n\n* Add predicate methods `#{slot_name}?` to slots.\n\n    *Hans Lemuet*\n\n* Use a dedicated deprecation instance, silence it while testing.\n\n    *Max Beizer, Hans Lemuet, Elia Schito*\n\n* Fix Ruby warnings.\n\n    *Hans Lemuet*\n\n* Place all generator options under `config.generate` namespace.\n\n    *Simon Fish*\n\n* Allow preview generator to use provided component attributes.\n* Add config option `config.view_component.generate.preview` to enable project-wide preview generation.\n* Ensure all generated `.rb` files include `# frozen_string_literal: true` statement.\n\n    *Bob Maerten*\n\n* Add Shogun to users list.\n\n    *Bernie Chiu*\n\n## 2.49.1\n\n* Patch XSS vulnerability in `ViewComponent::Translatable` module caused by improperly escaped interpolation arguments.\n\n    *Cameron Dutro*\n\n## 2.49.0\n\n* Fix path handling for evaluated view components that broke in Ruby 3.1.\n\n    *Adam Hess*\n\n* Fix support for the `default:` option for a global translation.\n\n    *Elia Schito*\n\n* Ensure i18n scope is a symbol to protect lookups.\n\n    *Simon Fish*\n\n* Small update to preview docs to include rspec mention.\n\n    *Leigh Halliday*\n\n* Small improvements to collection iteration docs.\n\n    *Brian O'Rourke*\n\n* Add good and bad examples to `ViewComponents in practice`.\n\n    *Joel Hawksley*\n\n* Add Ruby 3.1 and Rails 7.0 to CI\n\n    *Peter Goldstein*\n\n## 2.48.0\n\n* Correct path in example test command in Contributing docs.\n\n    *Mark Wilkinson*\n\n* Update link to GOV.UK Components library in the resources list.\n\n    *Peter Yates*\n\n* Add Lookbook to Resources docs page.\n\n    *Mark Perkins*\n\n* Add blocking compiler mode for use in Rails development and testing modes, improving thread safety.\n\n    *Horia Radu*\n\n* Add generators to support `tailwindcss-rails`.\n\n    *Dino Maric*, *Hans Lemuet*\n\n* Add a namespaced component example to docs.\n\n    *Hans Lemuet*\n\n* Setup `Appraisal` to add flexibility when testing ViewComponent against multiple Rails versions.\n\n    *Hans Lemuet*\n\n* Return correct values for `request.path` and `request.query_string` methods when using the `with_request_url` test helper.\n\n    *Vasiliy Matyushin*\n\n* Improve style in generators docs.\n\n    *Hans Lemuet*\n\n* Correctly type Ruby version strings and update Rails versions used in CI configuration.\n\n    *Hans Lemuet*\n\n* Make `ViewComponent::Collection` act like a collection of view components.\n\n    *Sammy Henningsson*\n\n* Update `@param` of `#render_inline` to include `ViewComponent::Collection`.\n\n    *Yutaka Kamei*\n\n* Add Wecasa to users list.\n\n    *Mohamed Ziata*\n\n## 2.47.0\n\n* Display preview source on previews that exclusively use templates.\n\n    *Edwin Mak*\n\n* Add a test to ensure trailing newlines are stripped when rendering with `#render_in`.\n\n    *Simon Fish*\n\n* Add WEBrick as a depenency to the application.\n\n    *Connor McQuillan*\n\n* Update Ruby version in `.tool-versions`.\n\n    *Connor McQuillan*\n\n* Add a test to ensure blocks can be passed into lambda slots without the need for any other arguments.\n\n    *Simon Fish*\n\n* Add linters for file consistency.\n\n    *Simon Fish*\n\n* Add @boardfish to docs/index.md and sort contributors.\n\n    *Simon Fish*\n\n* Set up Codespaces for bug replication.\n\n    *Simon Fish*\n\n* Add instructions for replicating bugs and failures.\n\n    *Simon Fish*\n\n* Make @boardfish a committer.\n\n    *Joel Hawksley*\n\n* Validate collection parameter with Active Model attribute names.\n\n    *Simon Fish*\n\n* Fix `helpers` not working with component slots when rendered more than 2 component levels deep.\n\n    *Blake Williams*\n\n* Update ruby to the latest versions\n\n    *Pedro Paiva*\n\n* Fix `vale` linter config options.\n\n    *Hans Lemuet*\n\n* Improve Contributing docs to include how to run tests for a specific version on Rails.\n\n    *Hans Lemuet*\n\n* Add failing test for default form builder and documentation around known issue.\n\n    *Simon Fish*\n\n* Add `--locale` flag to the component generator. Generates as many locale files as defined in `I18n.available_locales`, alongside the component.\n* Add config option `config.view_component.generate_locale` to enable project-wide locale generation.\n* Add config option `config.view_component.generate_distinct_locale_files` to enable project-wide per-locale translations file generation.\n\n    *Bob Maerten*\n\n* Add config option `config.view_component.generate_sidecar` to always generate in the sidecar directory.\n\n    *Gleydson Tavares*\n\n## 2.46.0\n\n* Add thread safety to the compiler.\n\n    *Horia Radu*\n\n* Add theme-specific logo images to readme.\n\n    *Dylan Smith*\n\n* Add Orbit to users list.\n\n    *Nicolas Goutay*\n\n* Increase clarity around purpose and use of slots.\n\n    *Simon Fish*\n\n* Deprecate loading `view_component/engine` directly.\n\n  **Upgrade notice**: You should update your `Gemfile` like this:\n\n  ```diff\n  - gem \"view_component\", require: \"view_component/engine\"`\n  + gem \"view_component\"\n  ```\n\n    *Yoshiyuki Hirano*\n\n## 2.45.0\n\n* Remove internal APIs from API documentation, fix link to license.\n\n    *Joel Hawksley*\n\n* Add @yhirano55 to triage team.\n\n    *Joel Hawksley*\n\n* Correct a typo in the sample slots code.\n\n    *Simon Fish*\n\n* Add note about `allowed_queries`.\n\n    *Joel Hawksley*\n\n* Add `vale` content linter.\n\n    *Joel Hawksley*\n\n* Remove `require \"rails/generators/test_case\"` in generator tests.\n\n    *Yoshiyuki Hirano*\n\n* Suppress zeitwerk warning about circular require.\n\n    *Yoshiyuki Hirano*\n\n* Move `test_unit_generator_test.rb` from `test/view_component/` to `test/generators/`.\n\n    *Yoshiyuki Hirano*\n\n* Unify test code of `TestUnitGeneratorTest` with the other generators tests.\n\n    *Yoshiyuki Hirano*\n\n## 2.44.0\n\n* Rename internal accessor to use private naming.\n\n    *Joel Hawksley*, *Blake Williams*, *Cameron Dutro*\n\n* Add Github repo link to docs website header.\n\n    *Hans Lemuet*\n\n* Change logo in README for dark theme readability.\n\n    *Dylan Smith*\n\n* Add Litmus to users list.\n\n    *Dylan Smith*\n\n* Add @dylanatsmith as codeowner of the ViewComponent logo and member of committers team.\n\n    *Joel Hawksley*\n\n* Autoload `CompileCache`, which is optionally called in `engine.rb`.\n\n    *Gregory Igelmund*\n\n* Move frequently asked questions to other pages, add History page.\n\n    *Joel Hawksley*\n\n* Fix typo.\n\n    *James Hart*\n\n* Add `require \"method_source\"` if it options.show_previews_source is enabled.\n\n    *Yoshiyuki Hirano*\n\n* Move show_previews_source definition to Previewable.\n\n    *Yoshiyuki Hirano*\n\n* Clear cache in MethodSource to apply the change odf preview code without app server restart.\n\n    *Yoshiyuki Hirano*\n\n## 2.43.1\n\n* Remove unnecessary call to `ruby2_keywords` for polymorphic slot getters.\n\n    *Cameron Dutro*\n\n## 2.43.0\n\n* Add note about tests and instance methods.\n\n    *Joel Hawksley*\n\n* Flesh out `ViewComponents in practice`.\n\n    *Joel Hawksley*\n\n* Add CODEOWNERS entries for feature areas owned by community committers.\n\n    *Joel Hawksley*\n\n* Separate lint and CI workflows.\n\n    *Blake Williams*\n\n* Add support for `image_path` helper in previews.\n\n    *Tobias Ahlin*, *Joel Hawksley*\n\n* Add section to docs listing users of ViewComponent. Please submit a PR to add your team to the list!\n\n    *Joel Hawksley*\n\n* Fix loading issue with Stimulus generator and add specs for Stimulus generator.\n\n    *Peter Sumskas*\n\n* Remove dependency on `ActionDispatch::Static` in Rails middleware stack when enabling statics assets for source code preview.\n\n    *Gregory Igelmund*\n\n* Require `view_component/engine` automatically.\n\n    *Cameron Dutro*\n\n## 2.42.0\n\n* Add logo files and page to docs.\n\n    *Dylan Smith*\n\n* Add `ViewComponents in practice` documentation.\n\n    *Joel Hawksley*\n\n* Fix bug where calling lambda slots without arguments would break in Ruby < 2.7.\n\n    *Manuel Puyol*\n\n* Improve Stimulus controller template to import from `stimulus` or `@hotwired/stimulus`.\n\n    *Mario Sch\u00fcttel*\n\n* Fix bug where `helpers` would instantiate and use a new `view_context` in each component.\n\n    *Blake Williams*, *Ian C. Anderson*\n\n* Implement polymorphic slots as experimental feature. See the Slots documentation to learn more.\n\n    *Cameron Dutro*\n\n## 2.41.0\n\n* Add `sprockets-rails` development dependency to fix test suite failures when using rails@main.\n\n    *Blake Williams*\n\n* Fix Ruby indentation warning.\n\n    *Blake Williams*\n\n* Add `--parent` generator option to specify the parent class.\n* Add config option `config.view_component.component_parent_class` to change it project-wide.\n\n    *Hans Lemuet*\n\n* Update docs to add example for using Devise helpers in tests.\n\n    *Matthew Rider*\n\n* Fix bug where `with_collection_parameter` didn't inherit from parent component.\n\n    *Will Drexler*, *Christian Campoli*\n\n* Allow query parameters in `with_request_url` test helper.\n\n    *Javi Mart\u00edn*\n\n* Add \"how to render a component to a string\" to FAQ.\n\n    *Hans Lemuet*\n\n* Add `#render_in` to API docs.\n\n    *Hans Lemuet*\n\n* Forward keyword arguments from slot wrapper to component instance using ruby2_keywords.\n\n    *Cameron Dutro*\n\n## 2.40.0\n\n* Replace antipatterns section in the documentation with best practices.\n\n    *Blake Williams*\n\n* Add components to `rails stats` task.\n\n    *Nicolas Brousse*\n\n* Fix bug when using Slim and writing a slot whose block evaluates to `nil`.\n\n    *Yousuf Jukaku*\n\n* Add documentation for test helpers.\n\n    *Joel Hawksley*\n\n## 2.39.0\n\n* Clarify documentation of `with_variant` as an override of Action Pack.\n\n    *Blake Williams*, *Cameron Dutro*, *Joel Hawksley*\n\n* Update docs page to be called Javascript and CSS, rename Building ViewComponents to Guide.\n\n    *Joel Hawksley*\n\n* Deprecate `Base#with_variant`.\n\n    *Cameron Dutro*\n\n* Error out in the CI if docs/api.md has to be regenerated.\n\n    *Dany Marcoux*\n\n## 2.38.0\n\n* Add `--stimulus` flag to the component generator. Generates a Stimulus controller alongside the component.\n* Add config option `config.view_component.generate_stimulus_controller` to always generate a Stimulus controller.\n\n    *Sebastien Auriault*\n\n## 2.37.0\n\n* Clarify slots example in docs to reduce naming confusion.\n\n    *Joel Hawksley*, *Blake Williams*\n\n* Fix error in documentation for `render_many` passthrough slots.\n\n    *Ollie Nye*\n\n* Add test case for conflict with internal `@variant` variable.\n\n    *David Backeus*\n\n* Document decision to not change naming convention recommendation to remove `-Component` suffix.\n\n    *Joel Hawksley*\n\n* Fix typo in documentation.\n\n    *Ryo.gift*\n\n* Add inline template example to benchmark script.\n\n    *Andrew Tait*\n\n* Fix benchmark scripts.\n\n    *Andrew Tait*\n\n* Run benchmarks in CI.\n\n    *Joel Hawksley*\n\n## 2.36.0\n\n* Add `slot_type` helper method.\n\n    *Jon Palmer*\n\n* Add test case for rendering a ViewComponent with slots in a controller.\n\n    *Simon Fish*\n\n* Add example ViewComponent to documentation landing page.\n\n    *Joel Hawksley*\n\n* Set maximum line length to 120.\n\n    *Joel Hawksley*\n\n* Setting a collection slot with the plural setter (`component.items(array)` for `renders_many :items`)  returns the array of slots.\n\n    *Jon Palmer*\n\n* Update error messages to be more descriptive and helpful.\n\n    *Joel Hawksley*\n\n* Raise an error if the slot name for renders_many is :contents\n\n    *Simon Fish*\n\n## 2.35.0\n\n* Only load assets for Preview source highlighting if previews are enabled.\n\n    *Joel Hawksley*\n\n* Fix references to moved documentation files.\n\n    *Richard Macklin*\n\n* Ensure consistent indentation with Rubocop.\n\n    *Joel Hawksley*\n\n* Bump `activesupport` upper bound from `< 7.0` to `< 8.0`.\n\n    *Richard Macklin*\n\n* Add ERB Lint for a few basic rules.\n\n    *Joel Hawksley*\n\n* Sort `gemspec` dependencies alphabetically.\n\n    *Joel Hawksley*\n\n* Lock `method_source` at `1.0` to avoid open-ended dependency.\n\n    *Joel Hawksley*\n\n* Require all PRs to include changelog entries.\n\n    *Joel Hawksley*\n\n* Rename test app and move files under /test/sandbox.\n\n    *Matt-Yorkley*\n\n* Make view_component_path config option available on ViewComponent::Base.\n\n    *Matt-Yorkley*\n\n* Add @boardfish to Triage.\n\n    *Joel Hawksley*\n\n* Adds support to change default components path (app/components) with `config.view_component.view_component_path`.\n\n    *lfalcao*\n\n* Rename private instance variables (such as @variant) to reduce potential conflicts with subclasses.\n\n    *Joel Hawksley*\n\n* Add documentation for configuration options.\n\n    *Joel Hawksley*\n\n* Add view helper `preview_source` for rendering a source code preview below previews.\n* Add config option `config.view_component.show_previews_source` for enabling the source preview.\n\n    *Johannes Engl*\n\n* Add documentation for compatibility with ActionText.\n\n    *Jared Planter*\n\n## 2.34.0\n\n* Add the ability to enable ActiveSupport notifications (`!render.view_component` event) with `config.view_component.instrumentation_enabled`.\n\n    *Svyatoslav Kryukov*\n\n* Add [Generators](https://viewcomponent.org/guide/generators.html) page to documentation.\n\n    *Hans Lemuet*\n\n* Fix bug where ViewComponents didn't work in ActionMailers.\n\n    *dark-panda*\n\n## 2.33.0\n\n* Add support for `_iteration` parameter when rendering in a collection\n\n    *Will Cosgrove*\n\n* Don't raise an error when rendering empty components.\n\n    *Alex Robbin*\n\n## 2.32.0\n\n* Enable previews by default in test environment.\n\n    *Edouard Piron*\n\n* Fix test helper compatibility with Rails 7.0, TestRequest, and TestSession.\n\n    *Leo Correa*\n\n* Add experimental `_output_postamble` lifecyle method.\n\n    *Joel Hawksley*\n\n* Add compatibility notes on FAQ.\n\n    *Matheus Richard*\n\n* Add Bridgetown on Compatibility documentation.\n\n    *Matheus Richard*\n\n* Are you interested in building the future of ViewComponent? GitHub is looking to hire a Senior Engineer to work on Primer ViewComponents and ViewComponent. Apply here: [US/Canada](https://github.com/careers) / [Europe](https://boards.greenhouse.io/github/jobs/3132294). Feel free to reach out to joelhawksley@github.com with any questions.\n\n    *Joel Hawksley*\n\n## 2.31.2\n\n* Patch XSS vulnerability in `ViewComponent::Translatable` module caused by improperly escaped interpolation arguments.\n\n    *Cameron Dutro*\n\n## 2.31.1\n\n* Fix `DEPRECATION WARNING: before_render_check` when compiling `ViewComponent::Base`\n\n    *Dave Kroondyk*\n\n## 2.31.0\n\n_Note: This release includes an underlying change to Slots that may affect incorrect usage of the API, where Slots were set on a line prefixed by `<%=`. The result of setting a Slot shouldn't be returned. (`<%`)_\n\n* Add `#with_content` to allow setting content without a block.\n\n    *Jordan Raine, Manuel Puyol*\n\n* Add `with_request_url` test helper.\n\n    *Mario Sch\u00fcttel*\n\n* Improve feature parity with Rails translations\n  * Don't create a translation back end if the component has no translation file\n  * Mark translation keys ending with `html` as HTML-safe\n  * Always convert keys to String\n  * Support multiple keys\n\n    *Elia Schito*\n\n* Fix errors on `asset_url` helpers when `asset_host` has no protocol.\n\n    *Elia Schito*\n\n* Prevent slots from overriding the `#content` method when registering a slot with that name.\n\n    *Blake Williams*\n\n* Deprecate `with_slot` in favor of the new [slots API](https://viewcomponent.org/guide/slots.html).\n\n    *Manuel Puyol*\n\n## 2.30.0\n\n* Deprecate `with_content_areas` in favor of [slots](https://viewcomponent.org/guide/slots.html).\n\n    *Joel Hawksley*\n\n## 2.29.0\n\n* Allow Slot lambdas to share data from the parent component and allow chaining on the returned component.\n\n    *Sjors Baltus, Blake Williams*\n\n* Experimental: Add `ViewComponent::Translatable`\n  * `t` and `translate` now will look first into the sidecar YAML translations file.\n  * `helpers.t` and `I18n.t` still reference the global Rails translation files.\n  * `l` and `localize` will still reference the global Rails translation files.\n\n    *Elia Schito*\n\n* Fix rendering output of pass through slots when using HAML.\n\n    *Alex Robbin, Blake Williams*\n\n* Experimental: call `._sidecar_files` to fetch the sidecar files for a given list of extensions, for example passing `[\"yml\", \"yaml\"]`.\n\n    *Elia Schito*\n\n* Fix bug where a single `jbuilder` template matched multiple template handlers.\n\n    *Niels Slot*\n\n## 2.28.0\n\n* Include SlotableV2 by default in Base. **Note:** It's no longer necessary to include `ViewComponent::SlotableV2` to use Slots.\n\n    *Joel Hawksley*\n\n* Prepend Preview routes instead of appending, accounting for cases where host application has catchall route.\n\n    *Joel Hawksley*\n\n* Fix bug where blocks passed to lambda slots will render incorrectly in certain situations.\n\n    *Blake Williams*\n\n## 2.27.0\n\n* Allow customization of the controller used in component tests.\n\n    *Alex Robbin*\n\n* Generate preview at overridden path if one exists when using `--preview` flag.\n\n    *Nishiki Liu*\n\n## 2.26.1\n\n* Fix bug that raises when trying to use a collection before the component has been compiled.\n\n    *Blake Williams*\n\n## 2.26.0\n\n* Delay evaluating component `content` in `render?`, preventing the `content` block from being evaluated when `render?` returns false.\n\n    *Blake Williams*\n\n* Don't generate template when using `--inline` flag.\n\n    *Hans Lemuet*\n\n* Add `--inline` option to the Haml and Slim generators\n\n    *Hans Lemuet*\n\n## 2.25.1\n\n* Experimental: call `._after_compile` class method after a component is compiled.\n\n    *Joel Hawksley*\n\n* Fix bug where SlotV2 was rendered as an HTML string when using Slim.\n\n    *Manuel Puyol*\n\n## 2.25.0\n\n* Add `--preview` generator option to create an associated preview file.\n\n    *Bob Maerten*\n\n* Add argument validation to avoid `content` override.\n\n    *Manuel Puyol*\n\n## 2.24.0\n\n* Add `--inline` option to the erb generator. Prevents default erb template from being created and creates a component with a call method.\n\n    *Nachiket Pusalkar*\n\n* Add test case for checking presence of `content` in `#render?`.\n\n    *Joel Hawksley*\n\n* Rename `master` branch to `main`.\n\n    *Joel Hawksley*\n\n## 2.23.2\n\n* Fix bug where rendering a component `with_collection` from a controller raised an error.\n\n    *Joel Hawksley*\n\n## 2.23.1\n\n* Fixed out-of-order rendering bug in `ActionView::SlotableV2`\n\n    *Blake Williams*\n\n## 2.23.0\n\n* Add `ActionView::SlotableV2`\n  * `with_slot` becomes `renders_one`.\n  * `with_slot collection: true` becomes `renders_many`.\n  * Slot definitions now accept either a component class, component class name, or a lambda instead of a `class_name:` keyword argument.\n  * Slots now support positional arguments.\n  * Slots no longer use the `content` attribute to render content, instead relying on `to_s`. for example `<%= my_slot %>`.\n  * Slot values are no longer set via the `slot` method, and instead use the name of the slot.\n\n    *Blake Williams*\n\n* Add `frozen_string_literal: true` to generated component template.\n\n    *Max Beizer*\n\n## 2.22.1\n\n* Revert refactor that broke rendering for some users.\n\n    *Joel Hawksley*\n\n## 2.22.0\n\n* Add #with_variant to enable inline component variant rendering without template files.\n\n    *Nathan Jones*\n\n## 2.21.0\n\n* Only compile components at application initialization if eager loading is enabled.\n\n    *Joel Hawksley*\n\n## 2.20.0\n\n* Don't add `/test/components/previews` to preview_paths if directory doesn't exist.\n\n    *Andy Holland*\n\n* Add `preview_controller` option to override the controller used for component previews.\n\n    *Matt Swanson, Blake Williams, Juan Manuel Ramallo*\n\n## 2.19.1\n\n* Check if `Rails.application` is loaded.\n\n    *Gleydson Tavares*\n\n* Add documentation for webpack configuration when using Stimulus controllers.\n\n    *Ciprian Redinciuc*\n\n## 2.19.0\n\n* Extend documentation for using Stimulus within sidecar directories.\n\n    *Ciprian Redinciuc*\n\n* Subclassed components inherit templates from parent.\n\n    *Blake Williams*\n\n* Fix uninitialized constant error from `with_collection` when `eager_load` is disabled.\n\n    *Josh Gross*\n\n## 2.18.2\n\n* Raise an error if controller or view context is accessed during initialize as they're only available in render.\n\n    *Julian Nadeau*\n\n* Collate test coverage across CI builds, ensuring 100% test coverage.\n\n    *Joel Hawksley*\n\n## 2.18.1\n\n* Fix bug where previews didn't work when monkey patch was disabled.\n\n    *Mixer Gutierrez*\n\n## 2.18.0\n\n* Fix auto loading of previews (changes no longer require a server restart)\n\n    *Matt Brictson*\n\n* Add `default_preview_layout` configuration option to load custom app/views/layouts.\n\n    *Jared White, Juan Manuel Ramallo*\n\n* Calculate virtual_path once for all instances of a component class to improve performance.\n\n    *Brad Parker*\n\n## 2.17.1\n\n* Fix bug where rendering Slot with empty block resulted in error.\n\n    *Joel Hawksley*\n\n## 2.17.0\n\n* Slots return stripped HTML, removing leading and trailing whitespace.\n\n    *Jason Long, Joel Hawksley*\n\n## 2.16.0\n\n* Add `--sidecar` option to the erb, haml and slim generators. Places the generated template in the sidecar directory.\n\n    *Michael van Rooijen*\n\n## 2.15.0\n\n* Add support for templates as ViewComponent::Preview examples.\n\n    *Juan Manuel Ramallo\n\n## 2.14.1\n\n* Allow using `render_inline` in test when the render monkey patch is disabled with `config.view_component.render_monkey_patch_enabled = false` in versions of Rails < 6.1.\n\n    *Cl\u00e9ment Joubert*\n\n* Fix kwargs warnings in slotable.\n\n    Fixes:\n\n    ```console\n    view_component/lib/view_component/slotable.rb:98: warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call\n    view_component/test/app/components/slots_component.rb:18: warning: The called method `initialize' is defined here\n    ```\n\n    *Eileen M. Uchitelle*\n\n## 2.14.0\n\n* Add `config.preview_paths` to support multiple locations of component preview files. Deprecate `config.preview_path`.\n\n    *Tomas Celizna*\n\n* Only print warning about a missing capybara dependency if the `DEBUG` environment variable is set.\n\n    *Richard Macklin*\n\n## 2.13.0\n\n* Add the ability to disable the render monkey patch with `config.view_component.render_monkey_patch_enabled`. In versions of Rails < 6.1, add `render_component` and `render_component_to_string` methods which can be used for rendering components instead of `render`.\n\n    *Johannes Engl*\n\n## 2.12.0\n\n* Implement Slots as potential successor to Content Areas.\n\n    *Jens Ljungblad, Brian Bugh, Jon Palmer, Joel Hawksley*\n\n## 2.11.1\n\n* Fix kwarg warnings in Ruby 2.7.\n\n    *Joel Hawksley*\n\n## 2.11.0\n\n* Ensure Rails configuration is available within components.\n\n    *Trevor Broaddus*\n\n* Fix bug where global Rails helpers are inaccessible from nested components. Before, `helpers` was pointing to parent component.\n\n    *Franco Sebregondi*\n\n## 2.10.0\n\n* Raise an `ArgumentError` with a helpful message when Ruby can't parse a component class.\n\n    *Max Beizer*\n\n## 2.9.0\n\n* Cache components per-request in development, preventing unnecessary recompilation during a single request.\n\n    *Felipe Sateler*\n\n## 2.8.0\n\n* Add `before_render`, deprecating `before_render_check`.\n\n    *Joel Hawksley*\n\n## 2.7.0\n\n* Add `rendered_component` method to `ViewComponent::TestHelpers` which exposes the raw output of the rendered component.\n\n    *Richard Macklin*\n\n* Support sidecar directories for views and other assets.\n\n    *Jon Palmer*\n\n## 2.6.0\n\n* Add `config.view_component.preview_route` to set the endpoint for component previews. By default `/rails/view_components` is used.\n\n    *Juan Manuel Ramallo*\n\n* Raise error when initializer omits with_collection_parameter.\n\n    *Joel Hawksley*\n\n## 2.5.1\n\n* Compile component before rendering collection.\n\n    *Rainer Borene*\n\n## v2.5.0\n\n* Add counter variables when rendering collections.\n\n    *Frank S*\n\n* Add the ability to access params from preview examples.\n\n    *Fabio Cantoni*\n\n## v2.4.0\n\n* Add `#render_to_string` support.\n\n   *Jarod Reid*\n\n* Declare explicit dependency on `activesupport`.\n\n    *Richard Macklin*\n\n* Remove `autoload`s of internal modules (`Previewable`, `RenderMonkeyPatch`, `RenderingMonkeyPatch`).\n\n    *Richard Macklin*\n\n* Remove `capybara` dependency.\n\n    *Richard Macklin*\n\n## v2.3.0\n\n* Allow using inline render method(s) defined on a parent.\n\n    *Simon Rand*\n\n* Fix bug where inline variant render methods would never be called.\n\n    *Simon Rand*\n\n* ViewComponent preview index views use Rails internal layout instead of application's layout\n\n    *Juan Manuel Ramallo*\n\n## v2.2.2\n\n* Add `Base.format` for better compatibility with `ActionView::Template`.\n\n    *Joel Hawksley*\n\n## v2.2.1\n\n* Fix bug where template couldn't be found if `inherited` was redefined.\n\n    *Joel Hawksley*\n\n## v2.2.0\n\n* Add support for `config.action_view.annotate_template_file_names` (coming in Rails 6.1).\n\n    *Joel Hawksley*\n\n* Remove initializer requirement from the component.\n\n    *Vasiliy Ermolovich*\n\n## v2.1.0\n\n* Support rendering collections (for example, `render(MyComponent.with_collection(@items))`).\n\n    *Tim Clem*\n\n## v2.0.0\n\n* Move to `ViewComponent` namespace, removing all references to `ActionView`.\n\n  * The gem name is now `view_component`.\n  * ViewComponent previews are now accessed at `/rails/view_components`.\n  * ViewComponents can _only_ be rendered with the instance syntax: `render(MyComponent.new)`. Support for all other syntaxes has been removed.\n  * ActiveModel::Validations have been removed. ViewComponent generators no longer include validations.\n  * In Rails 6.1, no monkey patching is used.\n  * `to_component_class` has been removed.\n  * All gem configuration is now in `config.view_component`.\n\n## v1.17.0\n\n* Support Ruby 2.4 in CI.\n\n    *Andrew Mason*\n\n* ViewComponent generators don't not prompt for content requirement.\n\n    *Joel Hawksley*\n\n* Add post-install message that gem has been renamed to `view_component`.\n\n    *Joel Hawksley*\n\n## v1.16.0\n\n* Add `refute_component_rendered` test helper.\n\n    *Joel Hawksley*\n\n* Check for Rails before invocation.\n\n    *Dave Paola*\n\n* Allow components to be rendered without a template file (aka inline component).\n\n    *Rainer Borene*\n\n## v1.15.0\n\n* Re-introduce ActionView::Component::TestHelpers.\n\n    *Joel Hawksley*\n\n* Bypass monkey patch on Rails 6.1 builds.\n\n    *Joel Hawksley*\n\n* Make `ActionView::Helpers::TagHelper` available in Previews.\n\n    ```ruby\n    def with_html_content\n      render(MyComponent.new) do\n        tag.div do\n          content_tag(:span, \"Hello\")\n        end\n      end\n    end\n    ```\n\n    *Sean Doyle*\n\n## v1.14.1\n\n* Fix bug where generator created invalid test code.\n\n    *Joel Hawksley*\n\n## v1.14.0\n\n* Rename ActionView::Component::Base to ViewComponent::Base\n\n    *Joel Hawksley*\n\n## v1.13.0\n\n* Allow components to be rendered inside controllers.\n\n    *Joel Hawksley*\n\n* Improve backtraces from exceptions raised in templates.\n\n    *Blake Williams*\n\n## v1.12.0\n\n* Revert: Remove initializer requirement for Ruby 2.7+\n\n    *Joel Hawksley*\n\n* Restructure Railtie into Engine\n\n    *Sean Doyle*\n\n* Allow components to override before_render_check\n\n    *Joel Hawksley*\n\n## v1.11.1\n\n* Relax Capybara requirement.\n\n    *Joel Hawksley*\n\n## v1.11.0\n\n* Add support for Capybara matchers.\n\n    *Joel Hawksley*\n\n* Add erb, haml, & slim template generators\n\n    *Asger Behncke Jacobsen*\n\n## v1.10.0\n\n* Deprecate all `render` syntaxes except for `render(MyComponent.new(foo: :bar))`\n\n    *Joel Hawksley*\n\n## v1.9.0\n\n* Remove initializer requirement for Ruby 2.7+\n\n    *Dylan Clark*\n\n## v1.8.1\n\n* Run validation checks before calling `#render?`.\n\n    *Ash Wilson*\n\n## v1.8.0\n\n* Remove the unneeded ComponentExamplesController and simplify preview rendering.\n\n    *Jon Palmer*\n\n* Add `#render?` hook to allow components to be no-ops.\n\n    *Kyle Fox*\n\n* Don't assume ApplicationController exists.\n\n    *Jon Palmer*\n\n* Allow some additional checks to overrided render?\n\n    *Sergey Malykh*\n\n* Fix generator placing namespaced components in the root directory.\n\n    *Asger Behncke Jacobsen*\n\n* Fix cache test.\n\n    *Sergey Malykh*\n\n## v1.7.0\n\n* Simplify validation of templates and compilation.\n\n    *Jon Palmer*\n\n* Add support for multiple content areas.\n\n    *Jon Palmer*\n\n## v1.6.2\n\n* Fix Uninitialized Constant error.\n\n    *Jon Palmer*\n\n* Add basic github issue and PR templates.\n\n    *Dylan Clark*\n\n* Update readme phrasing around previews.\n\n    *Justin Coyne*\n\n## v1.6.1\n\n* Allow Previews to have no layout.\n\n    *Jon Palmer*\n\n* Bump rack from 2.0.7 to 2.0.8.\n\n    *Dependabot*\n\n* Compile components on application boot when eager loading is enabled.\n\n    *Joel Hawksley*\n\n* Previews support content blocks.\n\n    *Cesario Uy*\n\n* Follow Rails conventions. (refactor)\n\n    *Rainer Borene*\n\n* Fix edge case issue with extracting variants from less conventional source_locations.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Ryan Workman*\n<!-- vale proselint.GenderBias = YES -->\n\n## v1.6.0\n\n* Avoid dropping elements in the render_inline test helper.\n\n    *@dark-panda*\n\n* Add test for helpers.asset_url.\n\n    *Christopher Coleman*\n\n* Add rudimentary compatibility with better_html.\n\n    *Joel Hawksley*\n\n* Template-less variants fall back to default template.\n\n    *Asger Behncke Jacobsen*, *Cesario Uy*\n\n* Generated tests use new naming convention.\n\n    *Simon Tr\u00e6ls Ravn*\n\n* Eliminate sqlite dependency.\n\n    *Simon Dawson*\n\n* Add support for rendering components via #to_component_class\n\n    *Vinicius Stock*\n\n## v1.5.3\n\n* Add support for RSpec to generators.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Dylan Clark, Ryan Workman*\n<!-- vale proselint.GenderBias = YES -->\n\n* Require controllers as part of setting autoload paths.\n\n    *Joel Hawksley*\n\n## v1.5.2\n\n* Disable eager loading initializer.\n\n    *Kasper Meyer*\n\n## v1.5.1\n\n* Update railties class to work with Rails 6.\n\n    *Juan Manuel Ramallo*\n\n## v1.5.0\n\nNote: `actionview-component` is now loaded by requiring `actionview/component`, not `actionview/component/base`.\n\n* Fix issue with generating component method signatures.\n\n<!-- vale proselint.GenderBias = NO -->\n    *Ryan Workman, Dylan Clark*\n<!-- vale proselint.GenderBias = YES -->\n\n* Create component generator.\n\n    *Vinicius Stock*\n\n* Add helpers proxy.\n\n    *Kasper Meyer*\n\n* Introduce ActionView::Component::Previews.\n\n    *Juan Manuel Ramallo*\n\n## v1.4.0\n\n* Fix bug where components broke in application paths with periods.\n\n    *Anton, Joel Hawksley*\n\n* Add support for `cache_if` in component templates.\n\n    *Aaron Patterson, Joel Hawksley*\n\n* Add support for variants.\n\n    *Juan Manuel Ramallo*\n\n* Fix bug in virtual path lookup.\n\n    *Juan Manuel Ramallo*\n\n* Preselect the rendered component in render_inline.\n\n    *Elia Schito*\n\n## v1.3.6\n\n* Allow template file names without format.\n\n    *Joel Hawksley*\n\n* Add support for translations.\n\n    *Juan Manuel Ramallo*\n\n## v1.3.5\n\n* Re-expose `controller` method.\n\n    *Michael Emhofer, Joel Hawksley*\n\n* Gem version numbers are now accessible through `ActionView::Component::VERSION`\n\n    *Richard Macklin*\n\n* Fix typo in README\n\n    *ars moriendi*\n\n## v1.3.4\n\n* Template errors surface correct file and line number.\n\n    *Justin Coyne*\n\n* Allow access to `request` inside components.\n\n    *Joel Hawksley*\n\n## v1.3.3\n\n* Don't raise error when sidecar files that aren't templates exist.\n\n    *Joel Hawksley*\n\n## v1.3.2\n\n* Support rendering views from inside component templates.\n\n    *Patrick Sinclair*\n\n## v1.3.1\n\n* Fix bug where rendering nested content caused an error.\n\n    *Joel Hawksley, Aaron Patterson*\n\n## v1.3.0\n\n* Components are rendered with enough controller context to support rendering of partials and forms.\n\n    *Patrick Sinclair, Joel Hawksley, Aaron Patterson*\n\n## v1.2.1\n\n* `actionview-component` is now tested against Ruby 2.3/2.4 and Rails 5.0.0.\n\n## v1.2.0\n\n* The `render_component` test helper has been renamed to `render_inline`. `render_component` has been deprecated and will be removed in v2.0.0.\n\n    *Joel Hawksley*\n\n* Components are now rendered with `render MyComponent, foo: :bar` syntax. The existing `render MyComponent.new(foo: :bar)` syntax has been deprecated and will be removed in v2.0.0.\n\n    *Joel Hawksley*\n\n## v1.1.0\n\n* Components now inherit from ActionView::Component::Base\n\n    *Joel Hawksley*\n\n## v1.0.1\n\n* Always recompile component templates outside production.\n\n    *Joel Hawksley, John Hawthorn*\n\n## v1.0.0\n\nThis release extracts the `ActionView::Component` library from the GitHub application.\n\nIt will be published on RubyGems under the existing `actionview-component` gem name, as @chancancode has passed us ownership of the gem.\n", "# frozen_string_literal: true\n\nrequire \"erb\"\nrequire \"set\"\nrequire \"i18n\"\nrequire \"action_view/helpers/translation_helper\"\nrequire \"active_support/concern\"\n\nmodule ViewComponent\n  module Translatable\n    extend ActiveSupport::Concern\n\n    HTML_SAFE_TRANSLATION_KEY = /(?:_|\\b)html\\z/.freeze\n\n    included do\n      class_attribute :i18n_backend, instance_writer: false, instance_predicate: false\n    end\n\n    class_methods do\n      def i18n_scope\n        @i18n_scope ||= virtual_path.sub(%r{^/}, \"\").gsub(%r{/_?}, \".\")\n      end\n\n      def _after_compile\n        super\n\n        return if CompileCache.compiled? self\n\n        if (translation_files = _sidecar_files(%w[yml yaml])).any?\n          self.i18n_backend = I18nBackend.new(\n            i18n_scope: i18n_scope,\n            load_paths: translation_files,\n          )\n        else\n          # Cleanup if translations file has been removed since the last compilation\n          self.i18n_backend = nil\n        end\n      end\n    end\n\n    class I18nBackend < ::I18n::Backend::Simple\n      EMPTY_HASH = {}.freeze\n\n      def initialize(i18n_scope:, load_paths:)\n        @i18n_scope = i18n_scope.split(\".\").map(&:to_sym)\n        @load_paths = load_paths\n      end\n\n      # Ensure the Simple backend won't load paths from ::I18n.load_path\n      def load_translations\n        super(@load_paths)\n      end\n\n      def scope_data(data)\n        @i18n_scope.reverse_each do |part|\n          data = { part => data }\n        end\n        data\n      end\n\n      def store_translations(locale, data, options = EMPTY_HASH)\n        super(locale, scope_data(data), options)\n      end\n    end\n\n    def translate(key = nil, **options)\n      return super unless i18n_backend\n      return key.map { |k| translate(k, **options) } if key.is_a?(Array)\n\n      locale = options.delete(:locale) || ::I18n.locale\n      key = key&.to_s unless key.is_a?(String)\n      key = \"#{i18n_scope}#{key}\" if key.start_with?(\".\")\n\n      if HTML_SAFE_TRANSLATION_KEY.match?(key)\n        html_escape_translation_options!(options)\n      end\n\n      if key.start_with?(i18n_scope + \".\")\n        translated =\n          catch(:exception) do\n            i18n_backend.translate(locale, key, options)\n          end\n\n        # Fallback to the global translations\n        if translated.is_a? ::I18n::MissingTranslation\n          return super(key, locale: locale, **options)\n        end\n\n        if HTML_SAFE_TRANSLATION_KEY.match?(key)\n          translated = html_safe_translation(translated)\n        end\n\n        translated\n      else\n        super(key, locale: locale, **options)\n      end\n    end\n    alias :t :translate\n\n    # Exposes .i18n_scope as an instance method\n    def i18n_scope\n      self.class.i18n_scope\n    end\n\n    def html_safe_translation(translation)\n      if translation.respond_to?(:map)\n        translation.map { |element| html_safe_translation(element) }\n      else\n        # It's assumed here that objects loaded by the i18n backend will respond to `#html_safe?`.\n        # It's reasonable that if we're in Rails, `active_support/core_ext/string/output_safety.rb`\n        # will provide this to `Object`.\n        translation.html_safe # rubocop:disable Rails/OutputSafety\n      end\n    end\n\n    private\n\n    def html_escape_translation_options!(options)\n      options.each do |name, value|\n        unless i18n_option?(name) || (name == :count && value.is_a?(Numeric))\n          options[name] = ERB::Util.html_escape(value.to_s)\n        end\n      end\n    end\n\n    def i18n_option?(name)\n      (@i18n_option_names ||= I18n::RESERVED_KEYS.to_set).include?(name)\n    end\n  end\nend\n", "en:\n  hello: \"Hello from sidecar translations!\"\n\n  hello_html: \"Hello from <strong>sidecar translations</strong>!\"\n\n  interpolated_html: \"There are %{horse_count} horses in the <strong>barn</strong>!\"\n\n  html: \"hello <em>world</em>!\"\n\n  from:\n    sidecar: This is coming from the sidecar\n\n  list:\n    - This\n    - returns\n    - a list\n\n  list_html:\n    - <em>This</em>\n    - returns\n    - a list with <strong>embedded</strong> HTML\n", "# frozen_string_literal: true\n\nrequire \"test_helper\"\n\nclass TranslatableTest < ViewComponent::TestCase\n  def test_isolated_translations\n    render_inline(TranslatableComponent.new)\n\n    assert_selector(\"p.sidecar.shared-key\", text: \"Hello from sidecar translations!\")\n    assert_selector(\"p.sidecar.nested\", text: \"This is coming from the sidecar\")\n    assert_selector(\"p.sidecar.missing\", text: \"This is coming from Rails\")\n\n    assert_selector(\"p.helpers.shared-key\", text: \"Hello from Rails translations!\")\n    assert_selector(\"p.helpers.nested\", text: \"This is coming from Rails\")\n\n    assert_selector(\"p.global.shared-key\", text: \"Hello from Rails translations!\")\n    assert_selector(\"p.global.nested\", text: \"This is coming from Rails\")\n  end\n\n  def test_multi_key_support\n    assert_equal(\n      [\n        \"Hello from sidecar translations!\",\n        \"This is coming from the sidecar\",\n        \"This is coming from Rails\",\n      ],\n      translate(\n        [\n          \".hello\",\n          \".from.sidecar\",\n          \"from.rails\",\n        ]\n      )\n    )\n  end\n\n  def test_relative_keys_missing_from_component_translations\n    assert_equal \"Relative key from Rails\", translate(\".relative_rails_key\")\n  end\n\n  def test_symbol_keys\n    assert_equal \"Hello from sidecar translations!\", translate(:\".hello\")\n  end\n\n  def test_converts_key_to_string_as_necessary\n    klass = Struct.new(:to_s)\n    key = klass.new(\".hello\")\n    assert_equal \"Hello from sidecar translations!\", translate(key)\n  end\n\n  def test_translate_marks_translations_named_html_as_safe_html\n    assert_equal \"hello <em>world</em>!\", translate(\".html\")\n    assert_predicate translate(\".html\"), :html_safe?\n  end\n\n  def test_translate_marks_translations_with_a_html_suffix_as_safe_html\n    assert_equal \"Hello from <strong>sidecar translations</strong>!\", translate(\".hello_html\")\n    assert_predicate translate(\".hello_html\"), :html_safe?\n  end\n\n  def test_translate_with_html_suffix_escapes_interpolated_arguments\n    translation = translate(\".interpolated_html\", horse_count: \"<script type='text/javascript'>alert('foo');</script>\")\n    assert_equal(\n      \"There are &lt;script type=&#39;text/javascript&#39;&gt;alert(&#39;foo&#39;);&lt;/script&gt; horses in the \"\\\n        \"<strong>barn</strong>!\",\n      translation\n    )\n  end\n\n  def test_translate_with_html_suffix_does_not_double_escape\n    translation = translate(\".interpolated_html\", horse_count: \"> 4\")\n    assert_equal(\n      \"There are &gt; 4 horses in the <strong>barn</strong>!\",\n      translation\n    )\n  end\n\n  def test_translate_uses_the_helper_when_no_sidecar_file_is_provided\n    # The cache needs to be kept clean for TranslatableComponent, otherwise it will rely on the\n    # already created i18n_backend.\n    ViewComponent::CompileCache.cache.delete(TranslatableComponent)\n\n    ViewComponent::Base.stub(\n      :_sidecar_files,\n      ->(exts) { exts.include?(\"yml\") ? [] : TranslatableComponent.__minitest_stub___sidecar_files(exts) }\n    ) do\n      assert_equal \"MISSING\", translate(\".hello\", default: \"MISSING\")\n      assert_equal \"Hello from Rails translations!\", translate(\"hello\")\n      assert_nil TranslatableComponent.i18n_backend\n    end\n  ensure\n    ViewComponent::CompileCache.cache.delete(TranslatableComponent)\n  end\n\n  def test_default\n    default_value = Object.new\n\n    assert_equal default_value, translate(\".missing\", default: default_value)\n    assert_equal default_value, translate(\"missing\", default: default_value)\n    assert_equal \"Hello from Rails translations!\", translate(\"hello\", default: default_value)\n    assert_equal \"Hello from sidecar translations!\", translate(\".hello\", default: default_value)\n  end\n\n  def test_translate_returns_lists\n    assert_equal [\"This\", \"returns\", \"a list\"], translate(\".list\")\n  end\n\n  def test_translate_returns_html_safe_lists\n    translated_list = translate(\".list_html\")\n\n    assert_equal(\n      [\n        \"<em>This</em>\",\n        \"returns\",\n        \"a list with <strong>embedded</strong> HTML\"\n      ],\n      translated_list\n    )\n\n    translated_list.each do |item|\n      assert_predicate item, :html_safe?\n    end\n  end\n\n  private\n\n  def translate(key, **options)\n    component = TranslatableComponent.new\n    render_inline(component)\n    component.translate(key, **options)\n  end\nend\n"], "filenames": ["Gemfile.lock", "docs/CHANGELOG.md", "lib/view_component/translatable.rb", "test/sandbox/app/components/translatable_component.yml", "test/view_component/translatable_test.rb"], "buggy_code_start_loc": [4, 55, 2, 4, 60], "buggy_code_end_loc": [282, 660, 109, 4, 60], "fixing_code_start_loc": [4, 56, 3, 5, 61], "fixing_code_end_loc": [279, 673, 129, 7, 78], "type": "CWE-79", "message": "VIewComponent is a framework for building view components in Ruby on Rails. Versions prior to 2.31.2 and 2.49.1 contain a cross-site scripting vulnerability that has the potential to impact anyone using translations with the view_component gem. Data received via user input and passed as an interpolation argument to the `translate` method is not properly sanitized before display. Versions 2.31.2 and 2.49.1 have been released and fully mitigate the vulnerability. As a workaround, avoid passing user input to the `translate` function, or sanitize the inputs before passing them.", "other": {"cve": {"id": "CVE-2022-24722", "sourceIdentifier": "security-advisories@github.com", "published": "2022-03-02T23:15:09.243", "lastModified": "2022-03-10T15:32:02.227", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "VIewComponent is a framework for building view components in Ruby on Rails. Versions prior to 2.31.2 and 2.49.1 contain a cross-site scripting vulnerability that has the potential to impact anyone using translations with the view_component gem. Data received via user input and passed as an interpolation argument to the `translate` method is not properly sanitized before display. Versions 2.31.2 and 2.49.1 have been released and fully mitigate the vulnerability. As a workaround, avoid passing user input to the `translate` function, or sanitize the inputs before passing them."}, {"lang": "es", "value": "VIewComponent es un framework para construir componentes de visualizaci\u00f3n en Ruby on Rails. Las versiones anteriores a 2.31.2 y 2.49.1 contienen una vulnerabilidad de tipo cross-site scripting que presenta el potencial de afectar a cualquiera usando traducciones con la gema view_component. Los datos recibidos por medio de la entrada del usuario y pasados como argumento de interpolaci\u00f3n al m\u00e9todo \"translate\" no son saneados apropiadamente antes de ser mostrados. Las versiones 2.31.2 y 2.49.1 han sido publicadas y mitigan completamente la vulnerabilidad. Como medida de mitigaci\u00f3n, evite pasar entradas del usuario a la funci\u00f3n \"translate\", o sanee las entradas antes de pasarlas"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "NONE", "baseScore": 8.1, "baseSeverity": "HIGH"}, "exploitabilityScore": 2.8, "impactScore": 5.2}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}, {"source": "security-advisories@github.com", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:github:viewcomponent:*:*:*:*:*:ruby_on_rails:*:*", "versionStartIncluding": "2.31.0", "versionEndExcluding": "2.31.2", "matchCriteriaId": "8BFBC4AF-7D57-4CB1-9681-DFA439A5936A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:github:viewcomponent:*:*:*:*:*:ruby_on_rails:*:*", "versionStartIncluding": "2.32.0", "versionEndExcluding": "2.49.1", "matchCriteriaId": "DA1CA9C8-326A-4337-915E-BEB92EA1BAD0"}]}]}], "references": [{"url": "https://github.com/github/view_component/commit/3f82a6e62578ff6f361aba24a1feb2caccf83ff9", "source": "security-advisories@github.com", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/github/view_component/releases/tag/v2.31.2", "source": "security-advisories@github.com", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/github/view_component/releases/tag/v2.49.1", "source": "security-advisories@github.com", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/github/view_component/security/advisories/GHSA-cm9w-c4rj-r2cf", "source": "security-advisories@github.com", "tags": ["Third Party Advisory"]}]}, "github_commit_url": "https://github.com/github/view_component/commit/3f82a6e62578ff6f361aba24a1feb2caccf83ff9"}}