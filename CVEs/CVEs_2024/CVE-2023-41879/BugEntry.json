{"buggy_code": ["<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2016-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Core data helper\n *\n * @category   Mage\n * @package    Mage_Core\n */\nclass Mage_Core_Helper_Data extends Mage_Core_Helper_Abstract\n{\n    public const XML_PATH_DEFAULT_COUNTRY              = 'general/country/default';\n    public const XML_PATH_PROTECTED_FILE_EXTENSIONS    = 'general/file/protected_extensions';\n    public const XML_PATH_PUBLIC_FILES_VALID_PATHS     = 'general/file/public_files_valid_paths';\n    public const XML_PATH_ENCRYPTION_MODEL             = 'global/helpers/core/encryption_model';\n    public const XML_PATH_DEV_ALLOW_IPS                = 'dev/restrict/allow_ips';\n    public const XML_PATH_CACHE_BETA_TYPES             = 'global/cache/betatypes';\n    public const XML_PATH_CONNECTION_TYPE              = 'global/resources/default_setup/connection/type';\n\n    public const CHARS_LOWERS                          = 'abcdefghijklmnopqrstuvwxyz';\n    public const CHARS_UPPERS                          = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    public const CHARS_DIGITS                          = '0123456789';\n    public const CHARS_SPECIALS                        = '!$*+-.=?@^_|~';\n    public const CHARS_PASSWORD_LOWERS                 = 'abcdefghjkmnpqrstuvwxyz';\n    public const CHARS_PASSWORD_UPPERS                 = 'ABCDEFGHJKLMNPQRSTUVWXYZ';\n    public const CHARS_PASSWORD_DIGITS                 = '23456789';\n    public const CHARS_PASSWORD_SPECIALS               = '!$*-.=?@_';\n\n    /**\n     * Config pathes to merchant country code and merchant VAT number\n     */\n    public const XML_PATH_MERCHANT_COUNTRY_CODE = 'general/store_information/merchant_country';\n    public const XML_PATH_MERCHANT_VAT_NUMBER = 'general/store_information/merchant_vat_number';\n    public const XML_PATH_EU_COUNTRIES_LIST = 'general/country/eu_countries';\n\n    /**\n     * Const for correct dividing decimal values\n     */\n    public const DIVIDE_EPSILON = 10000;\n\n    protected $_moduleName = 'Mage_Core';\n\n    /**\n     * @var Mage_Core_Model_Encryption\n     */\n    protected $_encryptor = null;\n\n    protected $_allowedFormats = [\n        Mage_Core_Model_Locale::FORMAT_TYPE_FULL,\n        Mage_Core_Model_Locale::FORMAT_TYPE_LONG,\n        Mage_Core_Model_Locale::FORMAT_TYPE_MEDIUM,\n        Mage_Core_Model_Locale::FORMAT_TYPE_SHORT\n    ];\n\n    /**\n     * @return Mage_Core_Model_Encryption\n     */\n    public function getEncryptor()\n    {\n        if ($this->_encryptor === null) {\n            $encryptionModel = (string)Mage::getConfig()->getNode(self::XML_PATH_ENCRYPTION_MODEL);\n            if ($encryptionModel) {\n                $this->_encryptor = new $encryptionModel();\n            } else {\n                $this->_encryptor = Mage::getModel('core/encryption');\n            }\n\n            $this->_encryptor->setHelper($this);\n        }\n        return $this->_encryptor;\n    }\n\n    /**\n     * Convert and format price value for current application store\n     *\n     * @param   float $value\n     * @param   bool $format\n     * @param   bool $includeContainer\n     * @return  mixed\n     */\n    public static function currency($value, $format = true, $includeContainer = true)\n    {\n        return self::currencyByStore($value, null, $format, $includeContainer);\n    }\n\n    /**\n     * Convert and format price value for specified store\n     *\n     * @param   float $value\n     * @param   int|Mage_Core_Model_Store $store\n     * @param   bool $format\n     * @param   bool $includeContainer\n     * @return  mixed\n     */\n    public static function currencyByStore($value, $store = null, $format = true, $includeContainer = true)\n    {\n        try {\n            if (!($store instanceof Mage_Core_Model_Store)) {\n                $store = Mage::app()->getStore($store);\n            }\n\n            $value = $store->convertPrice($value, $format, $includeContainer);\n        } catch (Exception $e) {\n            $value = $e->getMessage();\n        }\n\n        return $value;\n    }\n\n    /**\n     * Format and convert currency using current store option\n     *\n     * @param   float $value\n     * @param   bool $includeContainer\n     * @return  string\n     */\n    public function formatCurrency($value, $includeContainer = true)\n    {\n        return self::currency($value, true, $includeContainer);\n    }\n\n    /**\n     * Formats price\n     *\n     * @param float $price\n     * @param bool $includeContainer\n     * @return string\n     */\n    public function formatPrice($price, $includeContainer = true)\n    {\n        return Mage::app()->getStore()->formatPrice($price, $includeContainer);\n    }\n\n    /**\n     * Format date using current locale options and time zone.\n     *\n     * @param   string|Zend_Date|null $date If empty, return current datetime.\n     * @param   string              $format   See Mage_Core_Model_Locale::FORMAT_TYPE_* constants\n     * @param   bool                $showTime Whether to include time\n     * @param   bool                $useTimezone Convert to local datetime?\n     * @return  string\n     */\n    public function formatDate($date = null, $format = Mage_Core_Model_Locale::FORMAT_TYPE_SHORT, $showTime = false, $useTimezone = true)\n    {\n        if (!in_array($format, $this->_allowedFormats, true)) {\n            return $date;\n        }\n        if (empty($date)) {\n            $date = Mage::app()->getLocale()->date(Mage::getSingleton('core/date')->gmtTimestamp(), null, null, $useTimezone);\n        } elseif (is_int($date)) {\n            $date = Mage::app()->getLocale()->date($date, null, null, $useTimezone);\n        } elseif (!$date instanceof Zend_Date) {\n            if ($time = strtotime($date)) {\n                $date = Mage::app()->getLocale()->date($time, null, null, $useTimezone);\n            } else {\n                return '';\n            }\n        }\n\n        $format = $showTime\n            ? Mage::app()->getLocale()->getDateTimeFormat($format)\n            : Mage::app()->getLocale()->getDateFormat($format);\n\n        return $date->toString($format);\n    }\n\n    /**\n     * Format time using current locale options\n     *\n     * @param   string|Zend_Date|null $time\n     * @param   string              $format\n     * @param   bool                $showDate\n     * @return  string\n     */\n    public function formatTime($time = null, $format = Mage_Core_Model_Locale::FORMAT_TYPE_SHORT, $showDate = false)\n    {\n        if (!in_array($format, $this->_allowedFormats, true)) {\n            return $time;\n        }\n\n        if (is_null($time)) {\n            $date = Mage::app()->getLocale()->date(time());\n        } elseif ($time instanceof Zend_Date) {\n            $date = $time;\n        } else {\n            $date = Mage::app()->getLocale()->date(strtotime($time));\n        }\n\n        if ($showDate) {\n            $format = Mage::app()->getLocale()->getDateTimeFormat($format);\n        } else {\n            $format = Mage::app()->getLocale()->getTimeFormat($format);\n        }\n\n        return $date->toString($format);\n    }\n\n    /**\n     * Encrypt data using application key\n     *\n     * @param   string $data\n     * @return  string\n     */\n    public function encrypt($data)\n    {\n        if (!Mage::isInstalled()) {\n            return $data;\n        }\n        return $this->getEncryptor()->encrypt($data);\n    }\n\n    /**\n     * Decrypt data using application key\n     *\n     * @param   string $data\n     * @return  string\n     */\n    public function decrypt($data)\n    {\n        if (!Mage::isInstalled()) {\n            return $data;\n        }\n        return $this->getEncryptor()->decrypt($data);\n    }\n\n    /**\n     * @param string $key\n     * @return Varien_Crypt_Mcrypt\n     */\n    public function validateKey($key)\n    {\n        return $this->getEncryptor()->validateKey($key);\n    }\n\n    /**\n     * @param int $len\n     * @param string|null $chars\n     * @return string\n     */\n    public function getRandomString($len, $chars = null)\n    {\n        if (is_null($chars)) {\n            $chars = self::CHARS_LOWERS . self::CHARS_UPPERS . self::CHARS_DIGITS;\n        }\n        for ($i = 0, $str = '', $lc = strlen($chars) - 1; $i < $len; $i++) {\n            $str .= $chars[random_int(0, $lc)];\n        }\n        return $str;\n    }\n\n    /**\n     * Generate salted hash from password\n     *\n     * @param string $password\n     * @param string|int|bool $salt\n     * @return string\n     */\n    public function getHash($password, $salt = false)\n    {\n        return $this->getEncryptor()->getHash($password, $salt);\n    }\n\n    /**\n     * Generate password hash for user\n     *\n     * @param string $password\n     * @param mixed $salt\n     * @return string\n     */\n    public function getHashPassword($password, $salt = false)\n    {\n        $encryptionModel = $this->getEncryptor();\n        $latestVersionHash = $this->getVersionHash($encryptionModel);\n        if ($latestVersionHash == $encryptionModel::HASH_VERSION_SHA512) {\n            return $this->getEncryptor()->getHashPassword($password, $salt);\n        }\n        return $this->getEncryptor()->getHashPassword($password, Mage_Admin_Model_User::HASH_SALT_EMPTY);\n    }\n\n    /**\n     * @param string $password\n     * @param string $hash\n     * @return bool\n     * @throws Exception\n     */\n    public function validateHash($password, $hash)\n    {\n        return $this->getEncryptor()->validateHash($password, $hash);\n    }\n\n    /**\n     * Get encryption method depending on the presence of the function - password_hash.\n     *\n     * @param Mage_Core_Model_Encryption $encryptionModel\n     * @return int\n     */\n    public function getVersionHash(Mage_Core_Model_Encryption $encryptionModel)\n    {\n        return function_exists('password_hash')\n            ? $encryptionModel::HASH_VERSION_LATEST\n            : $encryptionModel::HASH_VERSION_SHA512;\n    }\n\n    /**\n     * Retrieve store identifier\n     *\n     * @param   mixed $store\n     * @return  int\n     */\n    public function getStoreId($store = null)\n    {\n        return Mage::app()->getStore($store)->getId();\n    }\n\n    /**\n     * @param string $string\n     * @param bool $german\n     * @return false|string\n     *\n     * @SuppressWarnings(PHPMD.ErrorControlOperator)\n     */\n    public function removeAccents($string, $german = false)\n    {\n        static $replacements;\n\n        if (empty($replacements[$german])) {\n            $subst = [\n                // single ISO-8859-1 letters\n                192 => 'A', 193 => 'A', 194 => 'A', 195 => 'A', 196 => 'A', 197 => 'A', 199 => 'C',\n                208 => 'D', 200 => 'E', 201 => 'E', 202 => 'E', 203 => 'E', 204 => 'I', 205 => 'I',\n                206 => 'I', 207 => 'I', 209 => 'N', 210 => 'O', 211 => 'O', 212 => 'O', 213 => 'O',\n                214 => 'O', 216 => 'O', 138 => 'S', 217 => 'U', 218 => 'U', 219 => 'U', 220 => 'U',\n                221 => 'Y', 142 => 'Z', 224 => 'a', 225 => 'a', 226 => 'a', 227 => 'a', 228 => 'a',\n                229 => 'a', 231 => 'c', 232 => 'e', 233 => 'e', 234 => 'e', 235 => 'e', 236 => 'i',\n                237 => 'i', 238 => 'i', 239 => 'i', 241 => 'n', 240 => 'o', 242 => 'o', 243 => 'o',\n                244 => 'o', 245 => 'o', 246 => 'o', 248 => 'o', 154 => 's', 249 => 'u', 250 => 'u',\n                251 => 'u', 252 => 'u', 253 => 'y', 255 => 'y', 158 => 'z',\n                // HTML entities\n                258 => 'A', 260 => 'A', 262 => 'C', 268 => 'C', 270 => 'D', 272 => 'D', 280 => 'E',\n                282 => 'E', 286 => 'G', 304 => 'I', 313 => 'L', 317 => 'L', 321 => 'L', 323 => 'N',\n                327 => 'N', 336 => 'O', 340 => 'R', 344 => 'R', 346 => 'S', 350 => 'S', 354 => 'T',\n                356 => 'T', 366 => 'U', 368 => 'U', 377 => 'Z', 379 => 'Z', 259 => 'a', 261 => 'a',\n                263 => 'c', 269 => 'c', 271 => 'd', 273 => 'd', 281 => 'e', 283 => 'e', 287 => 'g',\n                305 => 'i', 322 => 'l', 314 => 'l', 318 => 'l', 324 => 'n', 328 => 'n', 337 => 'o',\n                341 => 'r', 345 => 'r', 347 => 's', 351 => 's', 357 => 't', 355 => 't', 367 => 'u',\n                369 => 'u', 378 => 'z', 380 => 'z',\n                // ligatures\n                198 => 'Ae', 230 => 'ae', 140 => 'Oe', 156 => 'oe', 223 => 'ss',\n            ];\n\n            if ($german) {\n                // umlauts\n                $subst = [\n                    196 => 'Ae', 228 => 'ae', 214 => 'Oe', 246 => 'oe', 220 => 'Ue', 252 => 'ue'\n                    ] + $subst;\n            }\n\n            $replacements[$german] = [];\n            foreach ($subst as $k => $v) {\n                $replacements[$german][$k < 256 ? chr($k) : '&#' . $k . ';'] = $v;\n            }\n        }\n\n        // convert string from default database format (UTF-8)\n        // to encoding which replacement arrays made with (ISO-8859-1)\n        if ($s = @iconv('UTF-8', 'ISO-8859-1', $string)) {\n            $string = $s;\n        }\n\n        // Replace\n        $string = strtr($string, $replacements[$german]);\n\n        return $string;\n    }\n\n    /**\n     * @param null|string|bool|int|Mage_Core_Model_Store $storeId\n     * @return bool\n     */\n    public function isDevAllowed($storeId = null)\n    {\n        $allow = true;\n\n        $allowedIps = Mage::getStoreConfig(self::XML_PATH_DEV_ALLOW_IPS, $storeId);\n        $remoteAddr = Mage::helper('core/http')->getRemoteAddr();\n        if (!empty($allowedIps) && !empty($remoteAddr)) {\n            $allowedIps = preg_split('#\\s*,\\s*#', $allowedIps, -1, PREG_SPLIT_NO_EMPTY);\n            if (!in_array($remoteAddr, $allowedIps)\n                && !in_array(Mage::helper('core/http')->getHttpHost(), $allowedIps)\n            ) {\n                $allow = false;\n            }\n        }\n\n        return $allow;\n    }\n\n    /**\n     * Get information about available cache types\n     *\n     * @return array\n     */\n    public function getCacheTypes()\n    {\n        $types = [];\n        $config = Mage::getConfig()->getNode(Mage_Core_Model_Cache::XML_PATH_TYPES);\n        foreach ($config->children() as $type => $node) {\n            $types[$type] = (string)$node->label;\n        }\n        return $types;\n    }\n\n    /**\n     * Get information about available cache beta types\n     *\n     * @return array\n     */\n    public function getCacheBetaTypes()\n    {\n        $types = [];\n        $config = Mage::getConfig()->getNode(self::XML_PATH_CACHE_BETA_TYPES);\n        if ($config) {\n            foreach ($config->children() as $type => $node) {\n                $types[$type] = (string)$node->label;\n            }\n        }\n        return $types;\n    }\n\n    /**\n     * Copy data from object|array to object|array containing fields\n     * from fieldset matching an aspect.\n     *\n     * Contents of $aspect are a field name in target object or array.\n     * If '*' - will be used the same name as in the source object or array.\n     *\n     * @param string $fieldset\n     * @param string $aspect\n     * @param array|Varien_Object $source\n     * @param array|Varien_Object $target\n     * @param string $root\n     * @return bool\n     */\n    public function copyFieldset($fieldset, $aspect, $source, $target, $root = 'global')\n    {\n        if (!(is_array($source) || $source instanceof Varien_Object)\n            || !(is_array($target) || $target instanceof Varien_Object)\n        ) {\n            return false;\n        }\n        $fields = Mage::getConfig()->getFieldset($fieldset, $root);\n        if (!$fields) {\n            return false;\n        }\n\n        $sourceIsArray = is_array($source);\n        $targetIsArray = is_array($target);\n\n        $result = false;\n        foreach ($fields as $code => $node) {\n            if (empty($node->$aspect)) {\n                continue;\n            }\n\n            if ($sourceIsArray) {\n                $value = $source[$code] ?? null;\n            } else {\n                $value = $source->getDataUsingMethod($code);\n            }\n\n            $targetCode = (string)$node->$aspect;\n            $targetCode = $targetCode == '*' ? $code : $targetCode;\n\n            if ($targetIsArray) {\n                $target[$targetCode] = $value;\n            } else {\n                $target->setDataUsingMethod($targetCode, $value);\n            }\n\n            $result = true;\n        }\n\n        $eventName = sprintf('core_copy_fieldset_%s_%s', $fieldset, $aspect);\n        Mage::dispatchEvent($eventName, [\n            'target' => $target,\n            'source' => $source,\n            'root'   => $root\n        ]);\n\n        return $result;\n    }\n\n    /**\n     * Decorate a plain array of arrays or objects\n     * The array actually can be an object with Iterator interface\n     *\n     * Keys with prefix_* will be set:\n     * *_is_first - if the element is first\n     * *_is_odd / *_is_even - for odd/even elements\n     * *_is_last - if the element is last\n     *\n     * The respective key/attribute will be set to element, depending on object it is or array.\n     * Varien_Object is supported.\n     *\n     * $forceSetAll true will cause to set all possible values for all elements.\n     * When false (default), only non-empty values will be set.\n     *\n     * @param Varien_Object[] $array\n     * @param string $prefix\n     * @param bool $forceSetAll\n     * @return mixed\n     */\n    public function decorateArray($array, $prefix = 'decorated_', $forceSetAll = false)\n    {\n        // check if array or an object to be iterated given\n        if (!(is_array($array) || is_object($array))) {\n            return $array;\n        }\n\n        $keyIsFirst = \"{$prefix}is_first\";\n        $keyIsOdd   = \"{$prefix}is_odd\";\n        $keyIsEven  = \"{$prefix}is_even\";\n        $keyIsLast  = \"{$prefix}is_last\";\n\n        $count  = count($array); // this will force Iterator to load\n        $i      = 0;\n        $isEven = false;\n        foreach ($array as $key => $element) {\n            if (is_object($element)) {\n                $this->_decorateArrayObject($element, $keyIsFirst, ($i === 0), $forceSetAll || ($i === 0));\n                $this->_decorateArrayObject($element, $keyIsOdd, !$isEven, $forceSetAll || !$isEven);\n                $this->_decorateArrayObject($element, $keyIsEven, $isEven, $forceSetAll || $isEven);\n                $isEven = !$isEven;\n                $i++;\n                $this->_decorateArrayObject($element, $keyIsLast, ($i === $count), $forceSetAll || ($i === $count));\n            } elseif (is_array($element)) {\n                if ($forceSetAll || ($i === 0)) {\n                    $array[$key][$keyIsFirst] = ($i === 0);\n                }\n                if ($forceSetAll || !$isEven) {\n                    $array[$key][$keyIsOdd] = !$isEven;\n                }\n                if ($forceSetAll || $isEven) {\n                    $array[$key][$keyIsEven] = $isEven;\n                }\n                $isEven = !$isEven;\n                $i++;\n                if ($forceSetAll || ($i === $count)) {\n                    $array[$key][$keyIsLast] = ($i === $count);\n                }\n            }\n        }\n\n        return $array;\n    }\n\n    /**\n     * @param Varien_Object $element\n     * @param string $key\n     * @param mixed $value\n     * @param bool $dontSkip\n     */\n    private function _decorateArrayObject($element, $key, $value, $dontSkip)\n    {\n        if ($dontSkip) {\n            if ($element instanceof Varien_Object) {\n                $element->setData($key, $value);\n            } else {\n                $element->$key = $value;\n            }\n        }\n    }\n\n    /**\n     * Transform an assoc array to SimpleXMLElement object\n     * Array has some limitations. Appropriate exceptions will be thrown\n     *\n     * @param array $array\n     * @param string $rootName\n     * @return SimpleXMLElement\n     * @throws Exception\n     */\n    public function assocToXml(array $array, $rootName = '_')\n    {\n        if (empty($rootName) || is_numeric($rootName)) {\n            throw new Exception('Root element must not be empty or numeric');\n        }\n\n        $xmlstr = <<<XML\n<?xml version='1.0' encoding='UTF-8' standalone='yes'?>\n<$rootName></$rootName>\nXML;\n        $xml = new SimpleXMLElement($xmlstr);\n        foreach ($array as $key => $value) {\n            if (is_numeric($key)) {\n                throw new Exception('Array root keys must not be numeric.');\n            }\n        }\n        return self::_assocToXml($array, $rootName, $xml);\n    }\n\n    /**\n     * Function, that actually recursively transforms array to xml\n     *\n     * @param array $array\n     * @param string $rootName\n     * @param SimpleXMLElement $xml\n     * @return SimpleXMLElement\n     * @throws Exception\n     */\n    private function _assocToXml(array $array, $rootName, SimpleXMLElement &$xml)\n    {\n        $hasNumericKey = false;\n        $hasStringKey  = false;\n        foreach ($array as $key => $value) {\n            if (!is_array($value)) {\n                if (is_string($key)) {\n                    if ($key === $rootName) {\n                        throw new Exception('Associative key must not be the same as its parent associative key.');\n                    }\n                    $hasStringKey = true;\n                    $xml->$key = $value;\n                } elseif (is_int($key)) {\n                    $hasNumericKey = true;\n                    $xml->{$rootName}[$key] = $value;\n                }\n            } else {\n                self::_assocToXml($value, $key, $xml->$key);\n            }\n        }\n        if ($hasNumericKey && $hasStringKey) {\n            throw new Exception('Associative and numeric keys must not be mixed at one level.');\n        }\n        return $xml;\n    }\n\n    /**\n     * Transform SimpleXMLElement to associative array\n     * SimpleXMLElement must be conform structure, generated by assocToXml()\n     *\n     * @param SimpleXMLElement $xml\n     * @return array\n     */\n    public function xmlToAssoc(SimpleXMLElement $xml)\n    {\n        $array = [];\n        foreach ($xml as $key => $value) {\n            if (isset($value->$key)) {\n                $i = 0;\n                foreach ($value->$key as $v) {\n                    $array[$key][$i++] = (string)$v;\n                }\n            } else {\n                // try to transform it into string value, trimming spaces between elements\n                $array[$key] = trim((string)$value);\n                if (empty($array[$key]) && !empty($value)) {\n                    $array[$key] = self::xmlToAssoc($value);\n                } else { // untrim strings values\n                    $array[$key] = (string)$value;\n                }\n            }\n        }\n        return $array;\n    }\n\n    /**\n     * Encode the mixed $valueToEncode into the JSON format\n     *\n     * @param mixed $valueToEncode\n     * @param bool $cycleCheck Optional; whether or not to check for object recursion; off by default\n     * @param  array $options Additional options used during encoding\n     * @return string\n     */\n    public function jsonEncode($valueToEncode, $cycleCheck = false, $options = [])\n    {\n        $json = Zend_Json::encode($valueToEncode, $cycleCheck, $options);\n        /** @var Mage_Core_Model_Translate_Inline $inline */\n        $inline = Mage::getSingleton('core/translate_inline');\n        if ($inline->isAllowed()) {\n            $inline->setIsJson(true);\n            $inline->processResponseBody($json);\n            $inline->setIsJson(false);\n        }\n\n        return $json;\n    }\n\n    /**\n     * Decodes the given $encodedValue string which is\n     * encoded in the JSON format\n     *\n     * switch added to prevent exceptions in json_decode\n     *\n     * @param string $encodedValue\n     * @param int $objectDecodeType\n     * @return mixed\n     * @throws Zend_Json_Exception\n     */\n    public function jsonDecode($encodedValue, $objectDecodeType = Zend_Json::TYPE_ARRAY)\n    {\n        switch (true) {\n            case ($encodedValue === null):\n                $encodedValue = 'null';\n                break;\n            case ($encodedValue === true):\n                $encodedValue = 'true';\n                break;\n            case ($encodedValue === false):\n                $encodedValue = 'false';\n                break;\n            case ($encodedValue === ''):\n                $encodedValue = '\"\"';\n                break;\n            default:\n                // do nothing\n        }\n\n        return Zend_Json::decode($encodedValue, $objectDecodeType);\n    }\n\n    /**\n     * Generate a hash from unique ID\n     * @param string $prefix\n     * @return string\n     */\n    public function uniqHash($prefix = '')\n    {\n        return $prefix . md5(uniqid(microtime() . mt_rand(), true));\n    }\n\n    /**\n     * Merge specified files into one\n     *\n     * By default will not merge, if there is already merged file exists and it\n     * was modified after its components\n     * If target file is specified, will attempt to write merged contents into it,\n     * otherwise will return merged content\n     * May apply callback to each file contents. Callback gets parameters:\n     * (<existing system filename>, <file contents>)\n     * May filter files by specified extension(s)\n     * Returns false on error\n     *\n     * @param array $srcFiles\n     * @param string|false $targetFile - file path to be written\n     * @param bool $mustMerge\n     * @param callable $beforeMergeCallback\n     * @param array|string $extensionsFilter\n     * @return bool|string\n     *\n     * @SuppressWarnings(PHPMD.ErrorControlOperator)\n     */\n    public function mergeFiles(\n        array $srcFiles,\n        $targetFile = false,\n        $mustMerge = false,\n        $beforeMergeCallback = null,\n        $extensionsFilter = []\n    ) {\n        try {\n            // check whether merger is required\n            $shouldMerge = $mustMerge || !$targetFile;\n            if (!$shouldMerge) {\n                if (!file_exists($targetFile)) {\n                    $shouldMerge = true;\n                } else {\n                    $targetMtime = filemtime($targetFile);\n                    foreach ($srcFiles as $file) {\n                        if (!file_exists($file)) {\n                            // no translation intentionally\n                            Mage::logException(new Exception(sprintf('File %s not found.', $file)));\n                        } elseif (@filemtime($file) > $targetMtime) {\n                            $shouldMerge = true;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            // merge contents into the file\n            if ($shouldMerge) {\n                if ($targetFile && !is_writable(dirname($targetFile))) {\n                    // no translation intentionally\n                    throw new Exception(sprintf('Path %s is not writeable.', dirname($targetFile)));\n                }\n\n                // filter by extensions\n                if ($extensionsFilter) {\n                    if (!is_array($extensionsFilter)) {\n                        $extensionsFilter = [$extensionsFilter];\n                    }\n                    if (!empty($srcFiles)) {\n                        foreach ($srcFiles as $key => $file) {\n                            $fileExt = strtolower(pathinfo($file, PATHINFO_EXTENSION));\n                            if (!in_array($fileExt, $extensionsFilter)) {\n                                unset($srcFiles[$key]);\n                            }\n                        }\n                    }\n                }\n                if (empty($srcFiles)) {\n                    // no translation intentionally\n                    throw new Exception('No files to compile.');\n                }\n\n                $data = '';\n                foreach ($srcFiles as $file) {\n                    if (!file_exists($file)) {\n                        continue;\n                    }\n                    $contents = file_get_contents($file) . \"\\n\";\n                    if ($beforeMergeCallback && is_callable($beforeMergeCallback)) {\n                        $contents = call_user_func($beforeMergeCallback, $file, $contents);\n                    }\n                    $data .= $contents;\n                }\n                if (!$data) {\n                    // no translation intentionally\n                    throw new Exception(sprintf(\"No content found in files:\\n%s\", implode(\"\\n\", $srcFiles)));\n                }\n                if ($targetFile) {\n                    file_put_contents($targetFile, $data, LOCK_EX);\n                } else {\n                    return $data; // no need to write to file, just return data\n                }\n            }\n\n            return true; // no need in merger or merged into file successfully\n        } catch (Exception $e) {\n            Mage::logException($e);\n        }\n        return false;\n    }\n\n    /**\n     * Return default country code\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return string\n     */\n    public function getDefaultCountry($store = null)\n    {\n        return Mage::getStoreConfig(self::XML_PATH_DEFAULT_COUNTRY, $store);\n    }\n\n    /**\n     * Return list with protected file extensions\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return array\n     */\n    public function getProtectedFileExtensions($store = null)\n    {\n        return Mage::getStoreConfig(self::XML_PATH_PROTECTED_FILE_EXTENSIONS, $store);\n    }\n\n    /**\n     * Return list with public files valid paths\n     *\n     * @return array\n     */\n    public function getPublicFilesValidPath()\n    {\n        return Mage::getStoreConfig(self::XML_PATH_PUBLIC_FILES_VALID_PATHS);\n    }\n\n    /**\n     * Check LFI protection\n     *\n     * @throws Mage_Core_Exception\n     * @param string $name\n     * @return bool\n     */\n    public function checkLfiProtection($name)\n    {\n        if (preg_match('#\\.\\.[\\\\\\/]#', $name)) {\n            throw new Mage_Core_Exception($this->__('Requested file may not include parent directory traversal (\"../\", \"..\\\\\" notation)'));\n        }\n        return true;\n    }\n\n    /**\n     * Check whether database compatible mode is used (configs enable it for MySQL by default).\n     *\n     * @return bool\n     */\n    public function useDbCompatibleMode()\n    {\n        $connType = (string) Mage::getConfig()->getNode(self::XML_PATH_CONNECTION_TYPE);\n        $path = 'global/resource/connection/types/' . $connType . '/compatibleMode';\n        $value = (string) Mage::getConfig()->getNode($path);\n        return (bool) $value;\n    }\n\n    /**\n     * Retrieve merchant country code\n     *\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return string\n     */\n    public function getMerchantCountryCode($store = null)\n    {\n        return (string) Mage::getStoreConfig(self::XML_PATH_MERCHANT_COUNTRY_CODE, $store);\n    }\n\n    /**\n     * Retrieve merchant VAT number\n     *\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return string\n     */\n    public function getMerchantVatNumber($store = null)\n    {\n        return (string) Mage::getStoreConfig(self::XML_PATH_MERCHANT_VAT_NUMBER, $store);\n    }\n\n    /**\n     * Check whether specified country is in EU countries list\n     *\n     * @param string $countryCode\n     * @param null|int $storeId\n     * @return bool\n     */\n    public function isCountryInEU($countryCode, $storeId = null)\n    {\n        $euCountries = explode(',', Mage::getStoreConfig(self::XML_PATH_EU_COUNTRIES_LIST, $storeId));\n        return in_array($countryCode, $euCountries);\n    }\n\n    /**\n     * Returns the floating point remainder (modulo) of the division of the arguments\n     *\n     * @param float|int $dividend\n     * @param float|int $divisor\n     * @return float|int\n     */\n    public function getExactDivision($dividend, $divisor)\n    {\n        $epsilon = $divisor / self::DIVIDE_EPSILON;\n\n        $remainder = fmod($dividend, $divisor);\n        if (abs($remainder - $divisor) < $epsilon || abs($remainder) < $epsilon) {\n            $remainder = 0;\n        }\n\n        return $remainder;\n    }\n\n    /**\n     * Escaping CSV-data\n     *\n     * Security enchancement for CSV data processing by Excel-like applications.\n     * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1054702\n     *\n     * @param array $data\n     * @return array\n     */\n    public function getEscapedCSVData(array $data)\n    {\n        if (Mage::getStoreConfigFlag(Mage_ImportExport_Model_Export_Adapter_Csv::CONFIG_ESCAPING_FLAG)) {\n            foreach ($data as $key => $value) {\n                $value = (string)$value;\n\n                $firstLetter = substr($value, 0, 1);\n                if ($firstLetter && in_array($firstLetter, ['=', '+', '-'])) {\n                    $data[$key] = ' ' . $value;\n                }\n            }\n        }\n        return $data;\n    }\n\n    /**\n     * UnEscapes CSV data\n     *\n     * @param mixed $data\n     * @return mixed array\n     */\n    public function unEscapeCSVData($data)\n    {\n        if (is_array($data) && Mage::getStoreConfigFlag(Mage_ImportExport_Model_Export_Adapter_Csv::CONFIG_ESCAPING_FLAG)) {\n            foreach ($data as $key => $value) {\n                $value = (string)$value;\n\n                if (preg_match(\"/^ [=\\-+]/\", $value)) {\n                    $data[$key] = ltrim($value);\n                }\n            }\n        }\n        return $data;\n    }\n}\n", "<?xml version=\"1.0\"?>\n<!--\n/**\n * OpenMage\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available at https://opensource.org/license/afl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2017-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)\n */\n-->\n<config>\n    <modules>\n        <Mage_Core>\n            <version>1.6.0.10</version>\n        </Mage_Core>\n    </modules>\n    <global>\n        <models>\n            <core_resource>\n                <entities>\n                    <website>\n                        <table>core_website</table>\n                    </website>\n                    <store_group>\n                        <table>core_store_group</table>\n                    </store_group>\n                    <store>\n                        <table>core_store</table>\n                    </store>\n                    <config_field>\n                        <table>core_config_field</table>\n                    </config_field>\n                    <config_data>\n                        <table>core_config_data</table>\n                    </config_data>\n                    <email_template>\n                        <table>core_email_template</table>\n                    </email_template>\n                    <variable>\n                        <table>core_variable</table>\n                    </variable>\n                    <variable_value>\n                        <table>core_variable_value</table>\n                    </variable_value>\n                    <translate>\n                        <table>core_translate</table>\n                    </translate>\n                    <session>\n                        <table>core_session</table>\n                    </session>\n                    <layout_update>\n                        <table>core_layout_update</table>\n                    </layout_update>\n                    <layout_link>\n                        <table>core_layout_link</table>\n                    </layout_link>\n                    <url_rewrite>\n                        <table>core_url_rewrite</table>\n                    </url_rewrite>\n                    <url_rewrite_tag>\n                        <table>core_url_rewrite_tag</table>\n                    </url_rewrite_tag>\n                    <design_change>\n                        <table>design_change</table>\n                    </design_change>\n                    <flag>\n                        <table>core_flag</table>\n                    </flag>\n                    <email_queue>\n                        <table>core_email_queue</table>\n                    </email_queue>\n                    <email_recipients>\n                        <table>core_email_queue_recipients</table>\n                    </email_recipients>\n                    <file_storage><table>core_file_storage</table></file_storage>\n                    <directory_storage><table>core_directory_storage</table></directory_storage>\n                </entities>\n            </core_resource>\n        </models>\n        <blocks>\n            <core>\n                <class>Mage_Core_Block</class>\n            </core>\n        </blocks>\n        <helpers>\n            <core>\n                <encryption_model>Mage_Core_Model_Encryption</encryption_model>\n            </core>\n        </helpers>\n        <template>\n            <email>\n                <design_email_header translate=\"label\" module=\"core\">\n                    <label>Email - Header</label>\n                    <file>html/header.html</file>\n                    <type>text</type>\n                </design_email_header>\n                <design_email_footer translate=\"label\" module=\"core\">\n                    <label>Email - Footer</label>\n                    <file>html/footer.html</file>\n                    <type>text</type>\n                </design_email_footer>\n            </email>\n        </template>\n        <cache>\n            <types>\n                <config translate=\"label,description\" module=\"core\">\n                    <label>Configuration</label>\n                    <description>System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).</description>\n                    <tags>CONFIG</tags>\n                </config>\n                <layout translate=\"label,description\" module=\"core\">\n                    <label>Layouts</label>\n                    <description>Layout building instructions.</description>\n                    <tags>LAYOUT_GENERAL_CACHE_TAG</tags>\n                </layout>\n                <block_html translate=\"label,description\" module=\"core\">\n                    <label>Blocks HTML output</label>\n                    <description>Page blocks HTML.</description>\n                    <tags>BLOCK_HTML</tags>\n                </block_html>\n                <translate translate=\"label,description\" module=\"core\">\n                    <label>Translations</label>\n                    <description>Translation files.</description>\n                    <tags>TRANSLATE</tags>\n                </translate>\n                <collections translate=\"label,description\" module=\"core\">\n                    <label>Collections Data</label>\n                    <description>Collection data files.</description>\n                    <tags>COLLECTION_DATA</tags>\n                </collections>\n            </types>\n        </cache>\n        <session>\n            <validation>\n                <http_user_agent_skip>\n                    <flash>Shockwave Flash</flash>\n                    <flash_mac><![CDATA[Adobe Flash Player\\s{1,}\\w{1,10}]]></flash_mac>\n                </http_user_agent_skip>\n            </validation>\n        </session>\n        <request>\n            <direct_front_name/>\n        </request>\n        <log>\n            <core>\n                <writer_model>Zend_Log_Writer_Stream</writer_model>\n            </core>\n        </log>\n        <url_rewrite>\n            <model>core/url_rewrite</model>\n        </url_rewrite>\n        <request_rewrite>\n            <model>core/url_rewrite_request</model>\n        </request_rewrite>\n        <events>\n            <controller_action_predispatch>\n                <observers>\n                    <security_domain_policy>\n                        <class>Mage_Core_Model_Domainpolicy</class>\n                        <method>addDomainPolicyHeader</method>\n                    </security_domain_policy>\n                </observers>\n            </controller_action_predispatch>\n            <model_save_before>\n                <observers>\n                    <secure_var_processing>\n                        <class>core/observer</class>\n                        <method>secureVarProcessing</method>\n                    </secure_var_processing>\n                </observers>\n            </model_save_before>\n            <model_delete_before>\n                <observers>\n                    <secure_var_processing>\n                        <class>core/observer</class>\n                        <method>secureVarProcessing</method>\n                    </secure_var_processing>\n                </observers>\n            </model_delete_before>\n        </events>\n    </global>\n    <frontend>\n        <routers>\n            <core>\n                <use>standard</use>\n                <args>\n                    <module>Mage_Core</module>\n                    <frontName>core</frontName>\n                </args>\n            </core>\n        </routers>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n        <layout>\n            <updates>\n                <core>\n                    <file>core.xml</file>\n                </core>\n            </updates>\n        </layout>\n    </frontend>\n    <adminhtml>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n        <events>\n            <cms_wysiwyg_config_prepare>\n                <observers>\n                    <variable_observer>\n                        <class>core/variable_observer</class>\n                        <method>prepareWysiwygPluginConfig</method>\n                    </variable_observer>\n                </observers>\n            </cms_wysiwyg_config_prepare>\n            <controller_action_predispatch_adminhtml>\n                <observers>\n                    <synchronize_notification>\n                        <class>core/observer</class>\n                        <method>addSynchronizeNotification</method>\n                    </synchronize_notification>\n                </observers>\n            </controller_action_predispatch_adminhtml>\n            <show_synchronize_message>\n                <observers>\n                    <synchronize_notification>\n                        <class>core/observer</class>\n                        <method>addSynchronizeNotification</method>\n                    </synchronize_notification>\n                </observers>\n            </show_synchronize_message>\n            <clean_cache_by_tags>\n                <observers>\n                    <clean_cache_observer>\n                        <class>core/observer</class>\n                        <method>cleanCacheByTags</method>\n                    </clean_cache_observer>\n                </observers>\n            </clean_cache_by_tags>\n        </events>\n    </adminhtml>\n    <install>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n    </install>\n    <default>\n        <design>\n            <package>\n                <area>frontend</area>\n                <default_theme>default</default_theme>\n                <name>rwd</name>\n                <theme>default</theme>\n                <translate>default</translate>\n            </package>\n            <pagination>\n                <list_allow_all>1</list_allow_all>\n                <pagination_frame>5</pagination_frame>\n            </pagination>\n            <email>\n                <css_non_inline>email-non-inline.css</css_non_inline>\n                <header>design_email_header</header>\n                <footer>design_email_footer</footer>\n            </email>\n        </design>\n        <dev>\n            <restrict>\n                <allow_ips/>\n            </restrict>\n            <debug>\n                <profiler>0</profiler>\n            </debug>\n            <translate_inline>\n                <active>0</active>\n                <active_admin>0</active_admin>\n                <invalid_caches>\n                    <block_html/>\n                </invalid_caches>\n            </translate_inline>\n            <log>\n                <active>0</active>\n                <max_level>7</max_level>\n                <file>system.log</file>\n                <exception_file>exception.log</exception_file>\n            </log>\n            <js>\n                <merge_files>0</merge_files>\n            </js>\n        </dev>\n        <system>\n            <csrf>\n                <use_form_key>1</use_form_key>\n            </csrf>\n            <cache>\n                <flush_cron_expr>30 2 * * *</flush_cron_expr>\n            </cache>\n            <smtp>\n                <disable>0</disable>\n                <host>localhost</host>\n                <port>25</port>\n            </smtp>\n            <media_storage_configuration>\n                <media_storage>0</media_storage>\n                <media_database>default_setup</media_database>\n                <configuration_update_time>3600</configuration_update_time>\n                <allowed_resources>\n                    <compiled_css_folder>css</compiled_css_folder>\n                    <compiled_css_secure_folder>css_secure</compiled_css_secure_folder>\n                    <compiled_js_folder>js</compiled_js_folder>\n                </allowed_resources>\n                <ignored_resources>.svn,.htaccess</ignored_resources>\n                <loaded_modules>\n                    <Mage_Core />\n                </loaded_modules>\n            </media_storage_configuration>\n        </system>\n        <trans_email>\n            <ident_custom1>\n                <email>custom1@example.com</email>\n                <name>Custom 1</name>\n            </ident_custom1>\n            <ident_custom2>\n                <email>custom2@example.com</email>\n                <name>Custom 2</name>\n            </ident_custom2>\n            <ident_general>\n                <email>owner@example.com</email>\n                <name>Owner</name>\n            </ident_general>\n            <ident_sales>\n                <email>sales@example.com</email>\n                <name>Sales</name>\n            </ident_sales>\n            <ident_support>\n                <email>support@example.com</email>\n                <name>CustomerSupport</name>\n            </ident_support>\n        </trans_email>\n        <web>\n            <routers>\n                <admin>\n                    <area>admin</area>\n                    <class>Mage_Core_Controller_Varien_Router_Admin</class>\n                </admin>\n                <standard>\n                    <area>frontend</area>\n                    <class>Mage_Core_Controller_Varien_Router_Standard</class>\n                </standard>\n            </routers>\n            <url>\n                <use_store>0</use_store>\n                <redirect_to_base>1</redirect_to_base>\n            </url>\n            <seo>\n                <use_rewrites>0</use_rewrites>\n            </seo>\n            <unsecure>\n                <base_url>{{base_url}}</base_url>\n                <base_web_url>{{unsecure_base_url}}</base_web_url>\n                <base_link_url>{{unsecure_base_url}}</base_link_url>\n                <base_js_url>{{unsecure_base_url}}js/</base_js_url>\n                <base_skin_url>{{unsecure_base_url}}skin/</base_skin_url>\n                <base_media_url>{{unsecure_base_url}}media/</base_media_url>\n            </unsecure>\n            <secure>\n                <base_url>{{base_url}}</base_url>\n                <base_web_url>{{secure_base_url}}</base_web_url>\n                <base_link_url>{{secure_base_url}}</base_link_url>\n                <base_js_url>{{secure_base_url}}js/</base_js_url>\n                <base_skin_url>{{secure_base_url}}skin/</base_skin_url>\n                <base_media_url>{{secure_base_url}}media/</base_media_url>\n                <use_in_frontend>0</use_in_frontend>\n                <use_in_adminhtml>0</use_in_adminhtml>\n                <offloader_header>SSL_OFFLOADED</offloader_header>\n            </secure>\n            <cookie>\n                <cookie_lifetime>3600</cookie_lifetime>\n                <cookie_httponly>1</cookie_httponly>\n                <cookie_samesite>None</cookie_samesite>\n                <cookie_restriction>0</cookie_restriction>\n                <cookie_restriction_lifetime>31536000</cookie_restriction_lifetime>\n            </cookie>\n            <session>\n                <use_remote_addr>0</use_remote_addr>\n                <use_http_via>0</use_http_via>\n                <use_http_x_forwarded_for>0</use_http_x_forwarded_for>\n                <use_http_user_agent>0</use_http_user_agent>\n                <use_frontend_sid>1</use_frontend_sid>\n                <use_admin_sid>0</use_admin_sid>\n            </session>\n            <browser_capabilities>\n                <cookies>1</cookies>\n                <javascript>1</javascript>\n            </browser_capabilities>\n        </web>\n        <admin>\n            <design>\n                <loading_timeout>200</loading_timeout>\n            </design>\n            <startup>\n                <page>dashboard</page>\n            </startup>\n            <url>\n                <use_custom>0</use_custom>\n                <custom/>\n            </url>\n            <security>\n                <use_form_key>1</use_form_key>\n                <domain_policy_backend>2</domain_policy_backend>\n                <domain_policy_frontend>2</domain_policy_frontend>\n                <extensions_compatibility_mode>1</extensions_compatibility_mode>\n                <session_cookie_lifetime>10800</session_cookie_lifetime>\n                <secure_system_configuration_save_disabled>0</secure_system_configuration_save_disabled>\n            </security>\n        </admin>\n        <general>\n            <country>\n                <eu_countries>AT,BE,BG,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LT,LU,MT,NL,PL,PT,RO,SK,SI,ES,SE,HR</eu_countries>\n            </country>\n            <locale>\n                <firstday>0</firstday>\n                <weekend>0,6</weekend>\n            </locale>\n            <file>\n                <protected_extensions>\n                    <!-- BOF PHP script file extensions -->\n                    <php>php</php>\n                    <php3>php3</php3>\n                    <php4>php4</php4>\n                    <php5>php5</php5>\n                    <php7>php7</php7>\n                    <!-- EOF PHP script file extensions -->\n                    <!-- File extension of configuration of an Apache Web server -->\n                    <htaccess>htaccess</htaccess>\n                    <!-- Java script file extension -->\n                    <jsp>jsp</jsp>\n                    <!-- Perl script file extension -->\n                    <pl>pl</pl>\n                    <!-- Python script file extension -->\n                    <py>py</py>\n                    <!-- Active Server Page script file extension -->\n                    <asp>asp</asp>\n                    <!-- UNIX command prompt file extension -->\n                    <sh>sh</sh>\n                    <!-- Common Gateway Interface script extension type -->\n                    <cgi>cgi</cgi>\n                    <!-- BOF HTML file extensions -->\n                    <htm>htm</htm>\n                    <html>html</html>\n                    <pht>pht</pht>\n                    <phtml>phtml</phtml>\n                    <shtml>shtml</shtml>\n                    <!-- EOF HTML file extensions -->\n                </protected_extensions>\n\n                <!-- Valid Paths to make public files -->\n                <public_files_valid_paths>\n                    <protected>\n                        <app>/app/*/*</app>\n                        <dev>/dev/*/*</dev>\n                        <errors>/errors/*/*</errors>\n                        <js>/js/*/*</js>\n                        <lib>/lib/*/*</lib>\n                        <shell>/shell/*/*</shell>\n                        <skin>/skin/*/*</skin>\n                    </protected>\n                </public_files_valid_paths>\n            </file>\n            <!-- Additional email for notifications -->\n            <additional_notification_emails>\n                <!-- On creating a new admin user. You can specify several emails separated by commas. -->\n                <admin_user_create></admin_user_create>\n            </additional_notification_emails>\n        </general>\n        <validators>\n            <custom_layout>\n                <disallowed_block>\n                    <Mage_Core_Block_Template_Zend/>\n                </disallowed_block>\n            </custom_layout>\n        </validators>\n    </default>\n    <stores>\n        <default>\n            <web>\n                <routers>\n                    <admin>\n                        <area>admin</area>\n                        <class>Mage_Core_Controller_Varien_Router_Admin</class>\n                    </admin>\n                    <standard>\n                        <area>frontend</area>\n                        <class>Mage_Core_Controller_Varien_Router_Standard</class>\n                    </standard>\n                </routers>\n            </web>\n        </default>\n    </stores>\n    <crontab>\n        <jobs>\n            <core_clean_cache>\n                <schedule>\n                    <config_path>system/cache/flush_cron_expr</config_path>\n                </schedule>\n                <run>\n                    <model>core/observer::cleanCache</model>\n                </run>\n            </core_clean_cache>\n            <core_email_queue_send_all>\n                <schedule><cron_expr>*/1 * * * *</cron_expr></schedule>\n                <run><model>core/email_queue::send</model></run>\n            </core_email_queue_send_all>\n            <core_email_queue_clean_up>\n                <schedule><cron_expr>0 0 * * *</cron_expr></schedule>\n                <run><model>core/email_queue::cleanQueue</model></run>\n            </core_email_queue_clean_up>\n        </jobs>\n    </crontab>\n</config>\n", "<?xml version=\"1.0\"?>\n<!--\n/**\n * OpenMage\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available at https://opensource.org/license/afl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2018-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)\n */\n-->\n<config>\n    <tabs>\n        <general translate=\"label\" module=\"core\">\n            <label>General</label>\n            <sort_order>100</sort_order>\n        </general>\n        <service translate=\"label\" module=\"core\">\n            <label>Services</label>\n            <sort_order>99999</sort_order>\n        </service>\n        <advanced translate=\"label\" module=\"core\">\n            <label>Advanced</label>\n            <sort_order>999999</sort_order>\n        </advanced>\n    </tabs>\n    <sections>\n        <system>\n            <groups>\n                <csrf translate=\"label\" module=\"core\">\n                    <label>CSRF protection</label>\n                    <sort_order>0</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_form_key translate=\"label\">\n                            <label>Enabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_form_key>\n                    </fields>\n                </csrf>\n                <cache translate=\"label\" module=\"core\">\n                    <label>Advanced Cache Settings</label>\n                    <sort_order>1000</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <flush_cron_expr translate=\"label comment\">\n                            <label>Cron Expression for Cache Flushing</label>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>The default value is \"30 2 * * *\". An empty value disables automatic cache flushing.</comment>\n                        </flush_cron_expr>\n                    </fields>\n                </cache>\n            </groups>\n        </system>\n        <!--<web_track translate=\"label\" module=\"core\">\n            <label>Web Tracking</label>\n            <sort_order>180</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n        </web_track>-->\n        <advanced translate=\"label\" module=\"core\">\n            <label>Advanced</label>\n            <tab>advanced</tab>\n            <sort_order>910</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <!--datashare translate=\"label\">\n                    <label>Datasharing</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <default translate=\"label\">\n                            <label>Default</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <backend_model>adminhtml/system_config_backend_datashare</backend_model>\n                            <source_model>adminhtml/system_config_source_store</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                        <default translate=\"label\">\n                            <label>Default</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <backend_model>adminhtml/system_config_backend_datashare</backend_model>\n                            <source_model>adminhtml/system_config_source_store</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                    </fields>\n                </datashare-->\n                <modules_disable_output translate=\"label\">\n                    <label>Disable Modules Output</label>\n                    <frontend_model>adminhtml/system_config_form_fieldset_modules_disableOutput</frontend_model>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <dynamic_group>1</dynamic_group>\n                </modules_disable_output>\n            </groups>\n        </advanced>\n        <trans_email translate=\"label\" module=\"core\">\n            <class>separator-top</class>\n            <label>Store Email Addresses</label>\n            <tab>general</tab>\n            <sort_order>90</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <ident_custom1 translate=\"label\">\n                    <label>Custom Email 1</label>\n                    <sort_order>4</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_custom1>\n                <ident_custom2 translate=\"label\">\n                    <label>Custom Email 2</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_custom2>\n                <ident_general translate=\"label\">\n                    <label>General Contact</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_general>\n                <ident_sales translate=\"label\">\n                    <label>Sales Representative</label>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_sales>\n                <ident_support translate=\"label\">\n                    <label>Customer Support</label>\n                    <sort_order>3</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_support>\n            </groups>\n        </trans_email>\n\n        <design translate=\"label\" module=\"core\">\n            <label>Design</label>\n            <tab>general</tab>\n            <sort_order>30</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <package translate=\"label\">\n                    <label>Package</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <name translate=\"label\">\n                            <label>Current Package Name</label>\n                            <backend_model>adminhtml/system_config_backend_design_package</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                        <ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Match expressions in the same order as displayed in the configuration.</comment>\n                        </ua_regexp>\n                    </fields>\n                </package>\n                <theme translate=\"label\">\n                    <label>Themes</label>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <locale translate=\"label\">\n                            <label>Translations</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </locale>\n                        <template translate=\"label\">\n                            <label>Templates</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template>\n                        <template_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Match expressions in the same order as displayed in the configuration.</comment>\n                        </template_ua_regexp>\n                        <skin translate=\"label\">\n                            <label>Skin (Images / CSS)</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </skin>\n                        <skin_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>35</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </skin_ua_regexp>\n                        <layout translate=\"label\">\n                            <label>Layout</label>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </layout>\n                        <layout_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>55</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </layout_ua_regexp>\n                        <default translate=\"label\">\n                            <label>Default</label>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                        <default_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>65</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default_ua_regexp>\n                    </fields>\n                </theme>\n                <pagination translate=\"label\">\n                    <label>Pagination</label>\n                    <sort_order>500</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <pagination_frame translate=\"label comment\">\n                            <label>Pagination Frame</label>\n                            <comment>How many links to display at once.</comment>\n                            <sort_order>7</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </pagination_frame>\n                        <pagination_frame_skip translate=\"label comment\">\n                            <label>Pagination Frame Skip</label>\n                            <comment>If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.</comment>\n                            <sort_order>8</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </pagination_frame_skip>\n                        <anchor_text_for_previous translate=\"label comment\">\n                            <label>Anchor Text for Previous</label>\n                            <comment>Alternative text for previous link in pagination menu. If empty, default arrow image will used.</comment>\n                            <sort_order>9</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </anchor_text_for_previous>\n                        <anchor_text_for_next translate=\"label comment\">\n                            <label>Anchor Text for Next</label>\n                            <comment>Alternative text for next link in pagination menu. If empty, default arrow image will used.</comment>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </anchor_text_for_next>\n                    </fields>\n                </pagination>\n                <email translate=\"label\">\n                    <label>Transactional Emails</label>\n                    <sort_order>510</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <logo translate=\"label\">\n                            <label>Logo Image</label>\n                            <comment>Allowed file types: jpg, jpeg, gif, png. To make logo look good on high-resolution displays, upload an image that is 2x normal size and then specify 1x dimensions in width/height fields below.</comment>\n                            <frontend_type>image</frontend_type>\n                            <backend_model>adminhtml/system_config_backend_email_logo</backend_model>\n                            <base_url type=\"media\" scope_info=\"1\">email/logo</base_url>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo>\n                        <logo_alt translate=\"label\">\n                            <label>Logo Image Alt</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_alt>\n                        <logo_width>\n                            <label>Logo Width</label>\n                            <comment>Only necessary if image has been uploaded above. Enter number of pixels, without appending \"px\".</comment>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_width>\n                        <logo_height>\n                            <label>Logo Height</label>\n                            <comment>Only necessary if image has been uploaded above. Enter number of pixels, without appending \"px\".</comment>\n                            <sort_order>27</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_height>\n                        <header translate=\"label\">\n                            <label>Email Header Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </header>\n                        <footer translate=\"label\">\n                            <label>Email Footer Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </footer>\n                        <css_non_inline>\n                            <label>Non-inline CSS File(s)</label>\n                            <comment><![CDATA[Comma-delimited list of files that will be included inside &lt;style&gt; tag for all templates that include use the '{{var non_inline_styles}}' variable. File path is relative to skin/frontend/PACKAGE/THEME/css/]]></comment>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </css_non_inline>\n                    </fields>\n                </email>\n            </groups>\n        </design>\n        <dev translate=\"label\" module=\"core\">\n            <label>Developer</label>\n            <tab>advanced</tab>\n            <sort_order>920</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <restrict translate=\"label\">\n                    <label>Developer Client Restrictions</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <allow_ips translate=\"label comment\">\n                            <label>Allowed IPs (comma separated)</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Leave empty for access from any location.</comment>\n                        </allow_ips>\n                    </fields>\n                </restrict>\n                <debug translate=\"label\">\n                    <label>Debug</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <profiler translate=\"label\">\n                            <label>Profiler</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </profiler>\n                        <head_admin>\n                            <label>Admin</label>\n                            <frontend_model>adminhtml/system_config_form_field_heading</frontend_model>\n                            <sort_order>21</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </head_admin>\n                        <template_hints_admin translate=\"label\">\n                            <label>Template Path Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>22</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </template_hints_admin>\n                        <template_hints_blocks_admin translate=\"label\">\n                            <label>Add Block Names to Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>23</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </template_hints_blocks_admin>\n                        <head_front>\n                            <label>Frontend</label>\n                            <frontend_model>adminhtml/system_config_form_field_heading</frontend_model>\n                            <sort_order>31</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </head_front>\n                        <template_hints translate=\"label\">\n                            <label>Template Path Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>32</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template_hints>\n                        <template_hints_blocks translate=\"label\">\n                            <label>Add Block Names to Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>33</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template_hints_blocks>\n                    </fields>\n                </debug>\n                <template translate=\"label\">\n                    <label>Template Settings</label>\n                    <sort_order>25</sort_order>\n                    <show_in_default>0</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <allow_symlink translate=\"label comment\">\n                            <label>Allow Symlinks</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_symlink</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>0</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.</comment>\n                        </allow_symlink>\n                    </fields>\n                </template>\n                <translate_inline translate=\"label\">\n                    <label>Translate Inline</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <active translate=\"label\">\n                            <label>Enabled for Frontend</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_translate</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </active>\n                        <active_admin translate=\"label comment\">\n                            <label>Enabled for Admin</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_translate</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.</comment>\n                        </active_admin>\n                    </fields>\n                </translate_inline>\n                <log translate=\"label\">\n                    <label>Log Settings</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <active translate=\"label\">\n                            <label>Enabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </active>\n                        <max_level translate=\"label comment\">\n                            <label>Maximum Log Level</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_log_level</source_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.</comment>\n                        </max_level>\n                        <file translate=\"label comment\">\n                            <label>System Log File Name</label>\n                            <backend_model>adminhtml/system_config_backend_filename</backend_model>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv</comment>\n                        </file>\n                        <exception_file translate=\"label comment\">\n                            <label>Exceptions Log File Name</label>\n                            <backend_model>adminhtml/system_config_backend_filename</backend_model>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv</comment>\n                        </exception_file>\n                    </fields>\n                </log>\n                <js translate=\"label\">\n                    <label>JavaScript Settings</label>\n                    <sort_order>100</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <merge_files translate=\"label\">\n                            <label>Merge JavaScript Files</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </merge_files>\n                    </fields>\n                </js>\n                <css translate=\"label\">\n                    <label>CSS Settings</label>\n                    <sort_order>110</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <merge_css_files translate=\"label\">\n                            <label>Merge CSS Files</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </merge_css_files>\n                    </fields>\n                </css>\n            </groups>\n        </dev>\n        <general translate=\"label\" module=\"core\">\n            <label>General</label>\n            <tab>general</tab>\n            <sort_order>10</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <country translate=\"label\">\n                    <label>Countries Options</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <allow translate=\"label\">\n                            <label>Allow Countries</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </allow>\n                        <default translate=\"label\">\n                            <label>Default Country</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                        <eu_countries translate=\"label\">\n                            <label>European Union Countries</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </eu_countries>\n                    </fields>\n                </country>\n                <locale translate=\"label\">\n                    <label>Locale Options</label>\n                    <sort_order>8</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <timezone translate=\"label\">\n                            <label>Timezone</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_timezone</source_model>\n                            <backend_model>adminhtml/system_config_backend_locale_timezone</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </timezone>\n                        <code translate=\"label\">\n                            <label>Locale</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale</source_model>\n                            <sort_order>5</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </code>\n                        <firstday translate=\"label\">\n                            <label>First Day of Week</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_weekdays</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </firstday>\n                        <weekend translate=\"label\">\n                            <label>Weekend Days</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_weekdays</source_model>\n                            <sort_order>15</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </weekend>\n                    </fields>\n                </locale>\n                <file>\n                    <label>File Settings</label>\n                    <show_in_default>0</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <protected_extensions>\n                            <backend_model>adminhtml/system_config_backend_protected</backend_model>\n                            <show_in_default>0</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </protected_extensions>\n                    </fields>\n                </file>\n                <store_information translate=\"label\">\n                    <label>Store Information</label>\n                    <sort_order>100</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <name translate=\"label\">\n                            <label>Store Name</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                        <phone translate=\"label\">\n                            <label>Store Contact Telephone</label>\n                            <comment>If present, this will be included in all Transactional Emails</comment>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </phone>\n                        <hours translate=\"label\">\n                            <label>Store Hours of Operation</label>\n                            <comment>If present, this will be included in all Transactional Emails</comment>\n                            <sort_order>22</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </hours>\n                        <merchant_country translate=\"label\">\n                            <label>Country</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </merchant_country>\n                        <merchant_vat_number translate=\"label\">\n                            <label>VAT Number</label>\n                            <sort_order>27</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </merchant_vat_number>\n                        <address translate=\"label\">\n                            <label>Store Contact Address</label>\n                            <frontend_type>textarea</frontend_type>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </address>\n                    </fields>\n                </store_information>\n            </groups>\n        </general>\n        <system translate=\"label\" module=\"core\">\n            <class>separator-top</class>\n            <label>System</label>\n            <tab>advanced</tab>\n            <sort_order>900</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <smtp translate=\"label\">\n                    <label>Mail Sending Settings</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <disable translate=\"label\">\n                            <label>Disable Email Communications</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </disable>\n                        <host translate=\"label\">\n                            <label>Host</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>For Windows server only.</comment>\n                        </host>\n                        <port translate=\"label\">\n                            <label>Port (25)</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>For Windows server only.</comment>\n                        </port>\n                        <!--\n                        <auth translate=\"label\">\n                            <label>Authentication method</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_smtpauth</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </auth>\n                        <username translate=\"label\">\n                            <label>Username</label>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </username>\n                        <password translate=\"label\">\n                            <label>Password</label>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </password>\n                        -->\n                        <set_return_path translate=\"label\">\n                            <label>Set Return-Path</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesnocustom</source_model>\n                            <sort_order>70</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </set_return_path>\n                        <return_path_email translate=\"label\">\n                            <label>Return-Path Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>80</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <depends><set_return_path>2</set_return_path></depends>\n                        </return_path_email>\n                    </fields>\n                </smtp>\n                <media_storage_configuration translate=\"label\" module=\"core\">\n                    <label>Storage Configuration for Media</label>\n                    <sort_order>900</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <media_storage translate=\"label\">\n                            <label>Media Storage</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_storage_media_storage</source_model>\n                            <sort_order>100</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </media_storage>\n                        <media_database translate=\"label\">\n                            <label>Select Media Database</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_storage_media_database</source_model>\n                            <backend_model>adminhtml/system_config_backend_storage_media_database</backend_model>\n                            <sort_order>200</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <depends><media_storage>1</media_storage></depends>\n                        </media_database>\n                        <synchronize translate=\"label comment\">\n                            <frontend_type>button</frontend_type>\n                            <frontend_model>adminhtml/system_config_system_storage_media_synchronize</frontend_model>\n                            <sort_order>300</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.</comment>\n                        </synchronize>\n                        <configuration_update_time translate=\"label\">\n                            <label>Environment Update Time</label>\n                            <sort_order>400</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </configuration_update_time>\n                    </fields>\n                </media_storage_configuration>\n            </groups>\n        </system>\n        <admin translate=\"label\" module=\"core\">\n            <label>Admin</label>\n            <tab>advanced</tab>\n            <sort_order>20</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>0</show_in_website>\n            <show_in_store>0</show_in_store>\n            <groups>\n                <design translate=\"label\">\n                    <label>Admin Theme</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_legacy_theme translate=\"label comment\">\n                            <label>Enable legacy Admin Theme</label>\n                            <comment>Use legacy theme from Magento CE</comment>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_legacy_theme>\n                        <loading_timeout translate=\"label comment\">\n                            <label>Loading Indicator Timeout</label>\n                            <comment>Number of milliseconds to delay showing the loading indicator. The default value is \"200\". An empty value disables the delay.</comment>\n                            <validate>validate-number validate-zero-or-greater</validate>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </loading_timeout>\n                    </fields>\n                </design>\n\n                <global_search>\n                    <label>Global Search</label>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <sort_order>6</sort_order>\n                    <fields>\n                        <enable translate=\"label\">\n                            <label>Enable global search</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </enable>\n                    </fields>\n                </global_search>\n\n                <emails translate=\"label\">\n                    <label>Admin User Emails</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <forgot_email_template translate=\"label\">\n                            <label>Forgot Password Email Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </forgot_email_template>\n                        <forgot_email_identity translate=\"label\">\n                            <label>Forgot Password Email Sender</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_identity</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </forgot_email_identity>\n                        <password_reset_link_expiration_period translate=\"label comment\">\n                            <label>Recovery Link Expiration Period (hours)</label>\n                            <comment>Please enter a number 1 or greater in this field.</comment>\n                            <validate>required-entry validate-digits validate-digits-range digits-range-1-</validate>\n                            <backend_model>adminhtml/system_config_backend_admin_password_link_expirationperiod</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </password_reset_link_expiration_period>\n                        <admin_notification_email_template translate=\"label\">\n                            <label>New Admin User Email Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </admin_notification_email_template>\n                    </fields>\n                </emails>\n                <startup translate=\"label\">\n                    <label>Startup Page</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <page translate=\"label\">\n                            <label>Startup Page</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_admin_page</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </page>\n                    </fields>\n                </startup>\n                <url translate=\"label\">\n                    <label>Admin Base URL</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_custom translate=\"label\">\n                            <label>Use Custom Admin URL</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usecustom</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_custom>\n                        <custom translate=\"label comment\">\n                            <label>Custom Admin URL</label>\n                            <backend_model>adminhtml/system_config_backend_admin_custom</backend_model>\n                            <depends><use_custom>1</use_custom></depends>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                        </custom>\n                        <use_custom_path translate=\"label\">\n                            <label>Use Custom Admin Path</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usecustompath</backend_model>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_custom_path>\n                        <custom_path translate=\"label comment\">\n                            <label>Custom Admin Path</label>\n                            <validate>required-entry validate-alphanum</validate>\n                            <backend_model>adminhtml/system_config_backend_admin_custompath</backend_model>\n                            <depends><use_custom_path>1</use_custom_path></depends>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>You will have to log in after you save your custom admin path.</comment>\n                        </custom_path>\n                    </fields>\n                </url>\n                <security translate=\"label\">\n                    <label>Security</label>\n                    <sort_order>35</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_form_key translate=\"label\">\n                            <label>Add Secret Key to URLs</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usesecretkey</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_form_key>\n                        <use_case_sensitive_login translate=\"label\">\n                            <label>Login is Case Sensitive</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_case_sensitive_login>\n                        <session_cookie_lifetime translate=\"label comment\">\n                            <label>Session Lifetime (seconds)</label>\n                            <comment>Values less than 60 are ignored. Note that changes will apply after logout.</comment>\n                            <validate>validate-digits</validate>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </session_cookie_lifetime>\n                        <domain_policy_backend translate=\"label comment\">\n                            <label>Allow Magento Backend to run in frame</label>\n                            <frontend_type>select</frontend_type>\n                            <comment>Enabling ability to run Magento in a frame is not recommended for security reasons.</comment>\n                            <source_model>adminhtml/system_config_source_security_domainpolicy</source_model>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </domain_policy_backend>\n                        <domain_policy_frontend translate=\"label comment\">\n                            <label>Allow Magento Frontend to run in frame</label>\n                            <comment>Enabling ability to run Magento in a frame is not recommended for security reasons.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>5</sort_order>\n                            <source_model>adminhtml/system_config_source_security_domainpolicy</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </domain_policy_frontend>\n                        <extensions_compatibility_mode translate=\"label comment\">\n                            <label>Admin routing compatibility mode for extensions</label>\n                            <comment>Enabling this setting increases risk of automated attacks against admin functionality.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>6</sort_order>\n                            <source_model>adminhtml/system_config_source_enabledisable</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </extensions_compatibility_mode>\n                        <crate_admin_user_notification translate=\"label comment\">\n                            <label>New Admin User Create Notification</label>\n                            <comment>This setting enable notification when new admin user created.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>10</sort_order>\n                            <source_model>adminhtml/system_config_source_enabledisable</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </crate_admin_user_notification>\n                        <reprocess_image_quality translate=\"label comment\">\n                            <label>Image Reprocess Quality</label>\n                            <comment>The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.</comment>\n                            <validate>validate-digits validate-digits-range digits-range-0-100</validate>\n                            <sort_order>180</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </reprocess_image_quality>\n                    </fields>\n                </security>\n                <dashboard translate=\"label\">\n                    <label>Dashboard</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <enable_charts translate=\"label\">\n                            <label>Enable Charts</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </enable_charts>\n                    </fields>\n                </dashboard>\n            </groups>\n        </admin>\n        <web translate=\"label\" module=\"core\">\n            <label>Web</label>\n            <tab>general</tab>\n            <sort_order>20</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <url translate=\"label\">\n                    <label>Url Options</label>\n                    <sort_order>3</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_store translate=\"label comment\">\n                            <label>Add Store Code to Urls</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_store</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).]]></comment>\n                        </use_store>\n                        <redirect_to_base translate=\"label\">\n                            <label>Auto-redirect to Base URL</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_web_redirect</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>I.e. redirect from http://example.com/store/ to http://www.example.com/store/</comment>\n                        </redirect_to_base>\n                    </fields>\n                </url>\n                <seo translate=\"label\">\n                    <label>Search Engines Optimization</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_rewrites translate=\"label\">\n                            <label>Use Web Server Rewrites</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_rewrites>\n                    </fields>\n                </seo>\n                <unsecure translate=\"label\">\n                    <label>Unsecure</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <base_url translate=\"label\">\n                            <label>Base URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_url>\n                        <base_link_url translate=\"label\">\n                            <label>Base Link URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_link_url>\n                        <base_skin_url translate=\"label\">\n                            <label>Base Skin URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_skin_url>\n                        <base_media_url translate=\"label\">\n                            <label>Base Media URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_media_url>\n                        <base_js_url translate=\"label comment\">\n                            <label>Base JavaScript URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain]]></comment>\n                            <validate>required-entry</validate>\n                        </base_js_url>\n                    </fields>\n                </unsecure>\n                <secure translate=\"label\">\n                    <label>Secure</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <base_url translate=\"label comment\">\n                            <label>Base URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                            <validate>required-entry</validate>\n                        </base_url>\n                        <base_link_url translate=\"label comment\">\n                            <label>Base Link URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                            <validate>required-entry</validate>\n                        </base_link_url>\n                        <base_skin_url translate=\"label\">\n                            <label>Base Skin URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_skin_url>\n                        <base_media_url translate=\"label\">\n                            <label>Base Media URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_media_url>\n                        <base_js_url translate=\"label comment\">\n                            <label>Base JavaScript URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain]]></comment>\n                            <validate>required-entry</validate>\n                        </base_js_url>\n                        <use_in_frontend translate=\"label\">\n                            <label>Use Secure URLs in Frontend</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_secure</backend_model>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_in_frontend>\n                        <use_in_adminhtml translate=\"label\">\n                            <label>Use Secure URLs in Admin</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_secure</backend_model>\n                            <sort_order>65</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_in_adminhtml>\n                        <offloader_header translate=\"label\">\n                            <label>Offloader header</label>\n                            <backend_model>adminhtml/system_config_backend_web_secure_offloaderheader</backend_model>\n                            <sort_order>75</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment><![CDATA[\n                                Provide the name of the request header set by the upstream proxy to indicate a secure connection.\n                                The header <code>X-Forwarded-Proto: https</code> is already checked by default regardless of this configuration option.\n                            ]]></comment>\n                        </offloader_header>\n                    </fields>\n                </secure>\n                <default translate=\"label\">\n                    <label>Default Pages</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <front translate=\"label\">\n                            <label>Default Web URL</label>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </front>\n                        <no_route translate=\"label\">\n                            <label>Default No-route URL</label>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </no_route>\n                    </fields>\n                </default>\n                <polls translate=\"label\">\n                    <label>Polls</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                </polls>\n                <cookie translate=\"label\">\n                    <label>Session Cookie Management</label>\n                    <sort_order>50</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <cookie_lifetime translate=\"label\">\n                            <label>Cookie Lifetime</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_lifetime>\n                        <cookie_path translate=\"label\">\n                            <label>Cookie Path</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_path>\n                        <cookie_domain translate=\"label\">\n                            <label>Cookie Domain</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_domain>\n                        <cookie_httponly translate=\"label\">\n                            <label>Use HTTP Only</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_httponly>\n                        <cookie_samesite translate=\"label\">\n                            <label>Same-Site</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_cookie_samesite</source_model>\n                            <comment><![CDATA[<a target=\"_blank\" href=\"https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00\"/>https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00</a>]]></comment>\n                            <sort_order>45</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_samesite>\n                        <cookie_restriction translate=\"label\">\n                            <label>Cookie Restriction Mode</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_cookie</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </cookie_restriction>\n                    </fields>\n                </cookie>\n                <session translate=\"label\">\n                    <label>Session Validation Settings</label>\n                    <sort_order>60</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_remote_addr translate=\"label\">\n                            <label>Validate REMOTE_ADDR</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_remote_addr>\n                        <use_http_via translate=\"label\">\n                            <label>Validate HTTP_VIA</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_via>\n                        <use_http_x_forwarded_for translate=\"label\">\n                            <label>Validate HTTP_X_FORWARDED_FOR</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_x_forwarded_for>\n                        <use_http_user_agent translate=\"label\">\n                            <label>Validate HTTP_USER_AGENT</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_user_agent>\n                        <use_frontend_sid translate=\"label comment\">\n                            <label>Use SID on Frontend</label>\n                            <comment>Allows customers to stay logged in when switching between different stores.</comment>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_frontend_sid>\n                    </fields>\n                </session>\n                <browser_capabilities translate=\"label\">\n                    <label>Browser Capabilities Detection</label>\n                    <sort_order>200</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <cookies translate=\"label\" module=\"cms\">\n                            <label>Redirect to CMS-page if Cookies are Disabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>100</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookies>\n                        <javascript translate=\"label\" module=\"cms\">\n                            <label>Show Notice if JavaScript is Disabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>200</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </javascript>\n                    </fields>\n                </browser_capabilities>\n            </groups>\n        </web>\n    </sections>\n</config>\n", "<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Sales\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2020-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Sales module base helper\n *\n * @category   Mage\n * @package    Mage_Sales\n */\nclass Mage_Sales_Helper_Guest extends Mage_Core_Helper_Data\n{\n    protected $_moduleName = 'Mage_Sales';\n\n    /**\n     * Cookie params\n     */\n    protected $_cookieName  = 'guest-view';\n    protected $_lifeTime    = 600;\n\n    /**\n     * Try to load valid order by $_POST or $_COOKIE\n     *\n     * @return bool|null\n     */\n    public function loadValidOrder()\n    {\n        if (Mage::getSingleton('customer/session')->isLoggedIn()) {\n            Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/order/history'));\n            return false;\n        }\n\n        $post = Mage::app()->getRequest()->getPost();\n        $errors = false;\n\n        /** @var Mage_Sales_Model_Order $order */\n        $order = Mage::getModel('sales/order');\n        /** @var Mage_Core_Model_Cookie $cookieModel */\n        $cookieModel = Mage::getSingleton('core/cookie');\n        $errorMessage = 'Entered data is incorrect. Please try again.';\n\n        if (empty($post) && !$cookieModel->get($this->_cookieName)) {\n            Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/guest/form'));\n            return false;\n        } elseif (!empty($post) && isset($post['oar_order_id']) && isset($post['oar_type'])) {\n            $type           = $post['oar_type'];\n            $incrementId    = $post['oar_order_id'];\n            $lastName       = $post['oar_billing_lastname'];\n            $email          = $post['oar_email'];\n            $zip            = $post['oar_zip'];\n\n            if (empty($incrementId) || empty($lastName) || empty($type) || (!in_array($type, ['email', 'zip']))\n                || ($type == 'email' && empty($email)) || ($type == 'zip' && empty($zip))\n            ) {\n                $errors = true;\n            }\n\n            if (!$errors) {\n                $order->loadByIncrementId($incrementId);\n            }\n\n            if ($order->getId()) {\n                $billingAddress = $order->getBillingAddress();\n                if ((strtolower($lastName) != strtolower($billingAddress->getLastname()))\n                    || ($type == 'email'\n                        && strtolower($email) != strtolower($order->getCustomerEmail()))\n                    || ($type == 'zip'\n                        && (strtolower($zip) != strtolower($billingAddress->getPostcode())))\n                ) {\n                    $errors = true;\n                }\n            } else {\n                $errors = true;\n            }\n\n            if ($errors === false && !is_null($order->getCustomerId())) {\n                $errorMessage = 'Please log in to view your order details.';\n                $errors = true;\n            }\n\n            if (!$errors) {\n                $toCookie = base64_encode($order->getProtectCode() . ':' . $incrementId);\n                $cookieModel->set($this->_cookieName, $toCookie, $this->_lifeTime, '/');\n            }\n        } elseif ($cookieModel->get($this->_cookieName)) {\n            $cookie = $cookieModel->get($this->_cookieName);\n            $cookieOrder = $this->_loadOrderByCookie($cookie);\n            if (!is_null($cookieOrder)) {\n                if (is_null($cookieOrder->getCustomerId())) {\n                    $cookieModel->renew($this->_cookieName, $this->_lifeTime, '/');\n                    $order = $cookieOrder;\n                } else {\n                    $errorMessage = 'Please log in to view your order details.';\n                    $errors = true;\n                }\n            } else {\n                $errors = true;\n            }\n        }\n\n        if (!$errors && $order->getId()) {\n            Mage::register('current_order', $order);\n            return true;\n        }\n\n        Mage::getSingleton('core/session')->addError($this->__($errorMessage));\n        Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/guest/form'));\n        return false;\n    }\n\n    /**\n     * Get Breadcrumbs for current controller action\n     *\n     * @param  Mage_Core_Controller_Front_Action $controller\n     */\n    public function getBreadcrumbs($controller)\n    {\n        /** @var Mage_Page_Block_Html_Breadcrumbs $breadcrumbs */\n        $breadcrumbs = $controller->getLayout()->getBlock('breadcrumbs');\n        $breadcrumbs->addCrumb(\n            'home',\n            [\n                'label' => $this->__('Home'),\n                'title' => $this->__('Go to Home Page'),\n                'link'  => Mage::getBaseUrl()\n            ]\n        );\n        $breadcrumbs->addCrumb(\n            'cms_page',\n            [\n                'label' => $this->__('Order Information'),\n                'title' => $this->__('Order Information')\n            ]\n        );\n    }\n\n    /**\n     * Try to load order by cookie hash\n     *\n     * @param string|null $cookie\n     * @return null|Mage_Sales_Model_Order\n     */\n    protected function _loadOrderByCookie($cookie = null)\n    {\n        if (!is_null($cookie)) {\n            $cookieData = explode(':', base64_decode($cookie));\n            $protectCode = $cookieData[0] ?? null;\n            $incrementId = $cookieData[1] ?? null;\n\n            if (!empty($protectCode) && !empty($incrementId)) {\n                /** @var Mage_Sales_Model_Order $order */\n                $order = Mage::getModel('sales/order');\n                $order->loadByIncrementId($incrementId);\n\n                if ($order->getProtectCode() === $protectCode) {\n                    return $order;\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Getter for $this->_cookieName\n     *\n     * @return string\n     */\n    public function getCookieName()\n    {\n        return $this->_cookieName;\n    }\n}\n", "<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Sales\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2015-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Order model\n *\n * Supported events:\n *  sales_order_load_after\n *  sales_order_save_before\n *  sales_order_save_after\n *  sales_order_delete_before\n *  sales_order_delete_after\n *\n * @category   Mage\n * @package    Mage_Sales\n *\n * @method Mage_Sales_Model_Resource_Order _getResource()\n * @method Mage_Sales_Model_Resource_Order getResource()\n * @method Mage_Sales_Model_Resource_Order_Collection getCollection()\n *\n * @method float getAdjustmentNegative()\n * @method $this setAdjustmentNegative(float $value)\n * @method float getAdjustmentPositive()\n * @method $this setAdjustmentPositive(float $value)\n * @method string getAppliedRuleIds()\n * @method $this setAppliedRuleIds(string $value)\n * @method array getAppliedTaxes()\n * @method $this setAppliedTaxes(array $value)\n * @method bool getAppliedTaxIsSaved()\n * @method $this setAppliedTaxIsSaved(bool $value)\n *\n * @method string getBackUrl()\n * @method float getBaseAdjustmentNegative()\n * @method $this setBaseAdjustmentNegative(float $value)\n * @method float getBaseAdjustmentPositive()\n * @method $this setBaseAdjustmentPositive(float $value)\n * @method string getBaseCurrencyCode()\n * @method $this setBaseCurrencyCode(string $value)\n * @method float getBaseDiscountAmount()\n * @method $this setBaseDiscountAmount(float $value)\n * @method float getBaseDiscountCanceled()\n * @method $this setBaseDiscountCanceled(float $value)\n * @method float getBaseDiscountInvoiced()\n * @method $this setBaseDiscountInvoiced(float $value)\n * @method float getBaseDiscountRefunded()\n * @method $this setBaseDiscountRefunded(float $value)\n * @method float getBaseGrandTotal()\n * @method $this setBaseGrandTotal(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method $this setBaseHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxInvoiced()\n * @method $this setBaseHiddenTaxInvoiced(float $value)\n * @method float getBaseHiddenTaxRefunded()\n * @method $this setBaseHiddenTaxRefunded(float $value)\n * @method float getBaseShippingAmount()\n * @method $this setBaseShippingAmount(float $value)\n * @method float getBaseShippingCanceled()\n * @method $this setBaseShippingCanceled(float $value)\n * @method float getBaseShippingDiscountAmount()\n * @method $this setBaseShippingDiscountAmount(float $value)\n * @method float getBaseShippingHiddenTaxAmount()\n * @method $this setBaseShippingHiddenTaxAmount(float $value)\n * @method float getBaseShippingHiddenTaxInvoiced()\n * @method float getBaseShippingHiddenTaxRefunded()\n * @method float getBaseShippingInclTax()\n * @method $this setBaseShippingInclTax(float $value)\n * @method float getBaseShippingInvoiced()\n * @method $this setBaseShippingInvoiced(float $value)\n * @method float getBaseShippingRefunded()\n * @method $this setBaseShippingRefunded(float $value)\n * @method float getBaseShippingTaxAmount()\n * @method $this setBaseShippingTaxAmount(float $value)\n * @method float getBaseShippingTaxInvoiced()\n * @method $this setBaseShippingTaxInvoiced(float $value)\n * @method float getBaseShippingTaxRefunded()\n * @method $this setBaseShippingTaxRefunded(float $value)\n * @method float getBaseSubtotal()\n * @method $this setBaseSubtotal(float $value)\n * @method float getBaseSubtotalCanceled()\n * @method $this setBaseSubtotalCanceled(float $value)\n * @method float getBaseSubtotalInclTax()\n * @method $this setBaseSubtotalInclTax(float $value)\n * @method float getBaseSubtotalInvoiced()\n * @method $this setBaseSubtotalInvoiced(float $value)\n * @method float getBaseSubtotalRefunded()\n * @method $this setBaseSubtotalRefunded(float $value)\n * @method float getBaseTaxAmount()\n * @method $this setBaseTaxAmount(float $value)\n * @method float getBaseTaxCanceled()\n * @method $this setBaseTaxCanceled(float $value)\n * @method float getBaseTaxInvoiced()\n * @method $this setBaseTaxInvoiced(float $value)\n * @method float getBaseTaxRefunded()\n * @method $this setBaseTaxRefunded(float $value)\n * @method float getBaseToGlobalRate()\n * @method $this setBaseToGlobalRate(float $value)\n * @method float getBaseToOrderRate()\n * @method $this setBaseToOrderRate(float $value)\n * @method float getBaseTotalCanceled()\n * @method $this setBaseTotalCanceled(float $value)\n * @method $this setBaseTotalDue(float $value)\n * @method float getBaseTotalInvoiced()\n * @method $this setBaseTotalInvoiced(float $value)\n * @method float getBaseTotalInvoicedCost()\n * @method $this setBaseTotalInvoicedCost(float $value)\n * @method float getBaseTotalOfflineRefunded()\n * @method $this setBaseTotalOfflineRefunded(float $value)\n * @method float getBaseTotalOnlineRefunded()\n * @method $this setBaseTotalOnlineRefunded(float $value)\n * @method float getBaseTotalPaid()\n * @method $this setBaseTotalPaid(float $value)\n * @method float getBaseTotalQtyOrdered()\n * @method $this setBaseTotalQtyOrdered(float $value)\n * @method float getBaseTotalRefunded()\n * @method $this setBaseTotalRefunded(float $value)\n * @method bool hasBillingAddressId()\n * @method int getBillingAddressId()\n * @method $this setBillingAddressId(int $value)\n * @method $this unsBillingAddressId()\n * @method int getBillingFirstname()\n * @method int getBillingLastname()\n *\n * @method bool hasCanReturnToStock()\n * @method bool getCanReturnToStock()\n * @method $this setCanReturnToStock()\n * @method int getCanShipPartially()\n * @method $this setCanShipPartially(int $value)\n * @method int getCanShipPartiallyItem()\n * @method $this setCanShipPartiallyItem(int $value)\n * @method bool getConvertingFromQuote()\n * @method $this setConvertingFromQuote(bool $value)\n * @method string getCouponCode()\n * @method $this setCouponCode(string $value)\n * @method $this setCouponRuleName(string $value)\n * @method string getCreatedAt()\n * @method $this setCreatedAt(string $value)\n * @method Mage_Customer_Model_Customer getCustomer()\n * @method $this setCustomer(Mage_Customer_Model_Customer $value)\n * @method string getCustomerDob()\n * @method $this setCustomerDob(string $value)\n * @method string getCustomerEmail()\n * @method $this setCustomerEmail(string $value)\n * @method string getCustomerFirstname()\n * @method $this setCustomerFirstname(string $value)\n * @method int getCustomerGender()\n * @method $this setCustomerGender(int $value)\n * @method int getCustomerGroupId()\n * @method $this setCustomerGroupId(int $value)\n * @method int getCustomerId()\n * @method $this setCustomerId(int $value)\n * @method int getCustomerIsGuest()\n * @method $this setCustomerIsGuest(int $value)\n * @method string getCustomerLastname()\n * @method $this setCustomerLastname(string $value)\n * @method string getCustomerMiddlename()\n * @method $this setCustomerMiddlename(string $value)\n * @method string getCustomerNote()\n * @method $this setCustomerNote(string $value)\n * @method bool hasCustomerNoteNotify()\n * @method int getCustomerNoteNotify()\n * @method $this setCustomerNoteNotify(int $value)\n * @method string getCustomerPrefix()\n * @method $this setCustomerPrefix(string $value)\n * @method string getCustomerSuffix()\n * @method $this setCustomerSuffix(string $value)\n * @method string getCustomerTaxvat()\n * @method $this setCustomerTaxvat(string $value)\n *\n * @method float getDiscountAmount()\n * @method $this setDiscountAmount(float $value)\n * @method float getDiscountCanceled()\n * @method $this setDiscountCanceled(float $value)\n * @method string getDiscountDescription()\n * @method $this setDiscountDescription(string $value)\n * @method float getDiscountInvoiced()\n * @method $this setDiscountInvoiced(float $value)\n * @method float getDiscountRefunded()\n * @method $this setDiscountRefunded(float $value)\n *\n * @method int getEditIncrement()\n * @method $this setEditIncrement(int $value)\n * @method int getEmailSent()\n * @method $this setEmailSent(int $value)\n * @method string getExtCustomerId()\n * @method $this setExtCustomerId(string $value)\n * @method string getExtOrderId()\n * @method $this setExtOrderId(string $value)\n *\n * @method bool hasForcedCanCreditmemo()\n * @method bool getForcedCanCreditmemo()\n * @method $this setForcedCanCreditmemo(bool $value)\n * @method int getForcedDoShipmentWithInvoice()\n * @method $this setForcedDoShipmentWithInvoice(int $value)\n *\n * @method $this setGiftMessage(string $value)\n * @method int getGiftMessageId()\n * @method $this setGiftMessageId(int $value)\n * @method string getGlobalCurrencyCode()\n * @method $this setGlobalCurrencyCode(string $value)\n * @method float getGrandTotal()\n * @method $this setGrandTotal(float $value)\n *\n * @method float getHiddenTaxAmount()\n * @method $this setHiddenTaxAmount(float $value)\n * @method float getHiddenTaxInvoiced()\n * @method $this setHiddenTaxInvoiced(float $value)\n * @method float getHiddenTaxRefunded()\n * @method $this setHiddenTaxRefunded(float $value)\n * @method string getHoldBeforeState()\n * @method $this setHoldBeforeState(string $value)\n * @method string getHoldBeforeStatus()\n * @method $this setHoldBeforeStatus(string $value)\n *\n * @method string getIncrementId()\n * @method $this setIncrementId(string $value)\n * @method bool getIsInProcess()\n * @method $this setIsInProcess(bool $value)\n * @method bool getIsMultiPayment()\n *\n * @method string getOrderCurrencyCode()\n * @method $this setOrderCurrencyCode(string $value)\n * @method string getOriginalIncrementId()\n * @method $this setOriginalIncrementId(string $value)\n *\n * @method float getPaymentAuthorizationAmount()\n * @method $this setPaymentAuthorizationAmount(float $value)\n * @method int getPaymentAuthorizationExpiration()\n * @method $this setPaymentAuthorizationExpiration(int $value)\n * @method int getPaypalIpnCustomerNotified()\n * @method $this setPaypalIpnCustomerNotified(int $value)\n * @method string getProtectCode()\n * @method $this setProtectCode(string $value)\n *\n * @method float getQuantity()\n * @method Mage_Sales_Model_Quote getQuote()\n * @method int getQuoteAddressId()\n * @method $this setQuoteAddressId(int $value)\n * @method float getQuoteBaseGrandTotal()\n * @method int getQuoteId()\n * @method $this setQuoteId(int $value)\n * @method $this setQuote(Mage_Sales_Model_Quote $value)\n *\n * @method string getRelationChildId()\n * @method $this setRelationChildId(string $value)\n * @method string getRelationChildRealId()\n * @method $this setRelationChildRealId(string $value)\n * @method string getRelationParentId()\n * @method $this setRelationParentId(string $value)\n * @method string getRelationParentRealId()\n * @method $this setRelationParentRealId(string $value)\n * @method string getRemoteIp()\n * @method $this setRemoteIp(string $value)\n * @method bool getReordered()\n * @method float getRevenue()\n * @method int getRowTaxDisplayPrecision()\n *\n * @method float getShipping()\n * @method bool hasShippingAddressId()\n * @method int getShippingAddressId()\n * @method $this setShippingAddressId(int $value)\n * @method $this unsShippingAddressId()\n * @method float getShippingAmount()\n * @method $this setShippingAmount(float $value)\n * @method float getShippingCanceled()\n * @method $this setShippingCanceled(float $value)\n * @method string getShippingDescription()\n * @method $this setShippingDescription(string $value)\n * @method float getShippingDiscountAmount()\n * @method $this setShippingDiscountAmount(float $value)\n * @method float getShippingHiddenTaxAmount()\n * @method $this setShippingHiddenTaxAmount(float $value)\n * @method float getShippingHiddenTaxInvoiced()\n * @method float getShippingHiddenTaxRefunded()\n * @method float getShippingInclTax()\n * @method $this setShippingInclTax(float $value)\n * @method float getShippingInvoiced()\n * @method $this setShippingInvoiced(float $value)\n * @method $this setShippingMethod(string $value)\n * @method float getShippingRefunded()\n * @method $this setShippingRefunded(float $value)\n * @method float getShippingTaxAmount()\n * @method $this setShippingTaxAmount(float $value)\n * @method float getShippingTaxInvoiced()\n * @method $this setShippingTaxInvoiced(float $value)\n * @method float getShippingTaxRefunded()\n * @method $this setShippingTaxRefunded(float $value)\n * @method string getState()\n * @method string getStatus()\n * @method $this setStatus(string $value)\n * @method string getStoreCurrencyCode()\n * @method $this setStoreCurrencyCode(string $value)\n * @method int getStoreId()\n * @method $this setStoreId(int $value)\n * @method string getStoreName()\n * @method $this setStoreName(string $value)\n * @method float getStoreToBaseRate()\n * @method $this setStoreToBaseRate(float $value)\n * @method float getStoreToOrderRate()\n * @method $this setStoreToOrderRate(float $value)\n * @method float getSubtotal()\n * @method $this setSubtotal(float $value)\n * @method float getSubtotalCanceled()\n * @method $this setSubtotalCanceled(float $value)\n * @method float getSubtotalInclTax()\n * @method $this setSubtotalInclTax(float $value)\n * @method float getSubtotalInvoiced()\n * @method $this setSubtotalInvoiced(float $value)\n * @method float getSubtotalRefunded()\n * @method $this setSubtotalRefunded(float $value)\n *\n * @method float getTax()\n * @method float getTaxAmount()\n * @method $this setTaxAmount(float $value)\n * @method float getTaxCanceled()\n * @method $this setTaxCanceled(float $value)\n * @method float getTaxInvoiced()\n * @method $this setTaxInvoiced(float $value)\n * @method float getTaxRefunded()\n * @method $this setTaxRefunded(float $value)\n * @method float getTotalCanceled()\n * @method $this setTotalCanceled(float $value)\n * @method $this setTotalDue(float $value)\n * @method float getTotalInvoiced()\n * @method $this setTotalInvoiced(float $value)\n * @method int getTotalItemCount()\n * @method $this setTotalItemCount(int $value)\n * @method float getTotalOfflineRefunded()\n * @method $this setTotalOfflineRefunded(float $value)\n * @method float getTotalOnlineRefunded()\n * @method $this setTotalOnlineRefunded(float $value)\n * @method float getTotalPaid()\n * @method $this setTotalPaid(float $value)\n * @method float getTotalQtyOrdered()\n * @method $this setTotalQtyOrdered(float $value)\n * @method float getTotalRefunded()\n * @method $this setTotalRefunded(float $value)\n *\n * @method string getUpdatedAt()\n * @method $this setUpdatedAt(string $value)\n *\n * @method int getIsVirtual()\n * @method $this setIsVirtual(int $value)\n *\n * @method float getWeight()\n * @method $this setWeight(float $value)\n *\n * @method string getXForwardedFor()\n * @method $this setXForwardedFor(string $value)\n */\nclass Mage_Sales_Model_Order extends Mage_Sales_Model_Abstract\n{\n    /**\n     * Identifier for history item\n     */\n    public const ENTITY                                = 'order';\n\n    /**\n     * Event type names for order emails\n     */\n    public const EMAIL_EVENT_NAME_NEW_ORDER    = 'new_order';\n    public const EMAIL_EVENT_NAME_UPDATE_ORDER = 'update_order';\n\n    /**\n     * XML configuration paths\n     */\n    public const XML_PATH_EMAIL_TEMPLATE               = 'sales_email/order/template';\n    public const XML_PATH_EMAIL_GUEST_TEMPLATE         = 'sales_email/order/guest_template';\n    public const XML_PATH_EMAIL_IDENTITY               = 'sales_email/order/identity';\n    public const XML_PATH_EMAIL_COPY_TO                = 'sales_email/order/copy_to';\n    public const XML_PATH_EMAIL_COPY_METHOD            = 'sales_email/order/copy_method';\n    public const XML_PATH_EMAIL_ENABLED                = 'sales_email/order/enabled';\n\n    public const XML_PATH_UPDATE_EMAIL_TEMPLATE        = 'sales_email/order_comment/template';\n    public const XML_PATH_UPDATE_EMAIL_GUEST_TEMPLATE  = 'sales_email/order_comment/guest_template';\n    public const XML_PATH_UPDATE_EMAIL_IDENTITY        = 'sales_email/order_comment/identity';\n    public const XML_PATH_UPDATE_EMAIL_COPY_TO         = 'sales_email/order_comment/copy_to';\n    public const XML_PATH_UPDATE_EMAIL_COPY_METHOD     = 'sales_email/order_comment/copy_method';\n    public const XML_PATH_UPDATE_EMAIL_ENABLED         = 'sales_email/order_comment/enabled';\n\n    /**\n     * Order states\n     */\n    public const STATE_NEW             = 'new';\n    public const STATE_PENDING_PAYMENT = 'pending_payment';\n    public const STATE_PROCESSING      = 'processing';\n    public const STATE_COMPLETE        = 'complete';\n    public const STATE_CLOSED          = 'closed';\n    public const STATE_CANCELED        = 'canceled';\n    public const STATE_HOLDED          = 'holded';\n    public const STATE_PAYMENT_REVIEW  = 'payment_review';\n\n    /**\n     * Order statuses\n     */\n    public const STATUS_FRAUD  = 'fraud';\n\n    /**\n     * Order flags\n     */\n    public const ACTION_FLAG_CANCEL                    = 'cancel';\n    public const ACTION_FLAG_HOLD                      = 'hold';\n    public const ACTION_FLAG_UNHOLD                    = 'unhold';\n    public const ACTION_FLAG_EDIT                      = 'edit';\n    public const ACTION_FLAG_CREDITMEMO                = 'creditmemo';\n    public const ACTION_FLAG_INVOICE                   = 'invoice';\n    public const ACTION_FLAG_REORDER                   = 'reorder';\n    public const ACTION_FLAG_SHIP                      = 'ship';\n    public const ACTION_FLAG_COMMENT                   = 'comment';\n    public const ACTION_FLAG_PRODUCTS_PERMISSION_DENIED = 'product_permission_denied';\n\n    /**\n     * Report date types\n     */\n    public const REPORT_DATE_TYPE_CREATED = 'created';\n    public const REPORT_DATE_TYPE_UPDATED = 'updated';\n    /**\n     * Identifier for history item\n     */\n    public const HISTORY_ENTITY_NAME = 'order';\n\n    protected $_eventPrefix = 'sales_order';\n    protected $_eventObject = 'order';\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Address_Collection|Mage_Sales_Model_Order_Address[]|null\n     */\n    protected $_addresses       = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Item_Collection|Mage_Sales_Model_Order_Item[]|null\n     */\n    protected $_items           = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Payment_Collection|Mage_Sales_Model_Order_Payment[]|null\n     */\n    protected $_payments        = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Status_History_Collection|Mage_Sales_Model_Order_Status_History[]|null\n     */\n    protected $_statusHistory   = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Invoice_Collection|null\n     */\n    protected $_invoices;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Shipment_Track_Collection|null\n     */\n    protected $_tracks;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Shipment_Collection|false|null\n     */\n    protected $_shipments;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Creditmemo_Collection|Mage_Sales_Model_Order_Creditmemo[]|false|null\n     */\n    protected $_creditmemos;\n\n    protected $_relatedObjects  = [];\n    protected $_orderCurrency   = null;\n    protected $_baseCurrency    = null;\n\n    /**\n     * Array of action flags for canUnhold, canEdit, etc.\n     *\n     * @var array\n     */\n    protected $_actionFlag = [];\n\n    /**\n     * Flag: if after order placing we can send new email to the customer.\n     *\n     * @var bool\n     */\n    protected $_canSendNewEmailFlag = true;\n\n    /**\n     * Identifier for history item\n     *\n     * @var string\n     */\n    protected $_historyEntityName = self::HISTORY_ENTITY_NAME;\n\n    protected function _construct()\n    {\n        $this->_init('sales/order');\n    }\n\n    /**\n    * Init mapping array of short fields to\n    * its full names\n    *\n    * @return Varien_Object\n    */\n    protected function _initOldFieldsMap()\n    {\n        // pre 1.6 fields names, old => new\n        $this->_oldFieldsMap = [\n            'payment_authorization_expiration' => 'payment_auth_expiration',\n            'forced_do_shipment_with_invoice' => 'forced_shipment_with_invoice',\n            'base_shipping_hidden_tax_amount' => 'base_shipping_hidden_tax_amnt',\n        ];\n        return $this;\n    }\n\n    /**\n     * Clear order object data\n     *\n     * @param string $key data key\n     * @return $this\n     */\n    public function unsetData($key = null)\n    {\n        parent::unsetData($key);\n        if (is_null($key)) {\n            $this->_items = null;\n        }\n        return $this;\n    }\n\n    /**\n     * Retrieve can flag for action (edit, unhold, etc..)\n     *\n     * @param string $action\n     * @return bool|null\n     */\n    public function getActionFlag($action)\n    {\n        return $this->_actionFlag[$action] ?? null;\n    }\n\n    /**\n     * Set can flag value for action (edit, unhold, etc...)\n     *\n     * @param string $action\n     * @param bool $flag\n     * @return $this\n     */\n    public function setActionFlag($action, $flag)\n    {\n        $this->_actionFlag[$action] = (bool) $flag;\n        return $this;\n    }\n\n    /**\n     * Return flag for order if it can sends new email to customer.\n     *\n     * @return bool\n     */\n    public function getCanSendNewEmailFlag()\n    {\n        return $this->_canSendNewEmailFlag;\n    }\n\n    /**\n     * Set flag for order if it can sends new email to customer.\n     *\n     * @param bool $flag\n     * @return $this\n     */\n    public function setCanSendNewEmailFlag($flag)\n    {\n        $this->_canSendNewEmailFlag = (bool) $flag;\n        return $this;\n    }\n\n    /**\n     * Load order by system increment identifier\n     *\n     * @param string $incrementId\n     * @return $this\n     */\n    public function loadByIncrementId($incrementId)\n    {\n        return $this->loadByAttribute('increment_id', $incrementId);\n    }\n\n    /**\n     * Load order by custom attribute value. Attribute value should be unique\n     *\n     * @param string $attribute\n     * @param string $value\n     * @return $this\n     */\n    public function loadByAttribute($attribute, $value)\n    {\n        $this->load($value, $attribute);\n        return $this;\n    }\n\n    /**\n     * Retrieve store model instance\n     *\n     * @return Mage_Core_Model_Store\n     */\n    public function getStore()\n    {\n        $storeId = $this->getStoreId();\n        if ($storeId) {\n            return Mage::app()->getStore($storeId);\n        }\n        return Mage::app()->getStore();\n    }\n\n    /**\n     * Retrieve order cancel availability\n     *\n     * @return bool\n     */\n    public function canCancel()\n    {\n        if (!$this->_canVoidOrder()) {\n            return false;\n        }\n        if ($this->canUnhold()) {  // $this->isPaymentReview()\n            return false;\n        }\n\n        $allInvoiced = true;\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToInvoice()) {\n                $allInvoiced = false;\n                break;\n            }\n        }\n        if ($allInvoiced) {\n            return false;\n        }\n\n        $state = $this->getState();\n        if ($this->isCanceled() || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_CANCEL) === false) {\n            return false;\n        }\n        /**\n         * Use only state for availability detect\n         */\n        /*foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToCancel()>0) {\n                return true;\n            }\n        }\n        return false;*/\n        return true;\n    }\n\n    /**\n     * Getter whether the payment can be voided\n     *\n     * @return bool\n     */\n    public function canVoidPayment()\n    {\n        return $this->_canVoidOrder() ? $this->getPayment()->canVoid($this->getPayment()) : false;\n    }\n\n    /**\n     * Check whether order could be canceled by states and flags\n     *\n     * @return bool\n     */\n    protected function _canVoidOrder()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order invoice availability\n     *\n     * @return bool\n     */\n    public function canInvoice()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n        $state = $this->getState();\n        if ($this->isCanceled() || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_INVOICE) === false) {\n            return false;\n        }\n\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToInvoice() > 0 && !$item->getLockedDoInvoice()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order credit memo (refund) availability\n     *\n     * @return bool\n     */\n    public function canCreditmemo()\n    {\n        if ($this->hasForcedCanCreditmemo()) {\n            return $this->getForcedCanCreditmemo();\n        }\n\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->isCanceled() || $this->getState() === self::STATE_CLOSED) {\n            return false;\n        }\n\n        /**\n         * We can have problem with float in php (on some server $a=762.73;$b=762.73; $a-$b!=0)\n         * for this we have additional diapason for 0\n         * TotalPaid - contains amount, that were not rounded.\n         */\n        if (abs($this->getStore()->roundPrice($this->getTotalPaid()) - $this->getTotalRefunded()) < .0001) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_EDIT) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order hold availability\n     *\n     * @return bool\n     */\n    public function canHold()\n    {\n        $state = $this->getState();\n        if ($this->isCanceled() || $this->isPaymentReview()\n            || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED || $state === self::STATE_HOLDED\n        ) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_HOLD) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order unhold availability\n     *\n     * @return bool\n     */\n    public function canUnhold()\n    {\n        if ($this->getActionFlag(self::ACTION_FLAG_UNHOLD) === false || $this->isPaymentReview()) {\n            return false;\n        }\n        return $this->getState() === self::STATE_HOLDED;\n    }\n\n    /**\n     * Check if comment can be added to order history\n     *\n     * @return bool\n     */\n    public function canComment()\n    {\n        if ($this->getActionFlag(self::ACTION_FLAG_COMMENT) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order shipment availability\n     *\n     * @return bool\n     */\n    public function canShip()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->getIsVirtual() || $this->isCanceled()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_SHIP) === false) {\n            return false;\n        }\n\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToShip() > 0 && !$item->getIsVirtual()\n                && !$item->getLockedDoShip()\n            ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order edit availability\n     *\n     * @return bool\n     */\n    public function canEdit()\n    {\n        if ($this->canUnhold()) {\n            return false;\n        }\n\n        $state = $this->getState();\n        if ($this->isCanceled() || $this->isPaymentReview()\n            || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED\n        ) {\n            return false;\n        }\n\n        if (!$this->getPayment()->getMethodInstance()->canEdit()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_EDIT) === false) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Retrieve order reorder availability\n     *\n     * @return bool\n     */\n    public function canReorder()\n    {\n        return $this->_canReorder(true);\n    }\n\n    /**\n     * Check the ability to reorder ignoring the availability in stock or status of the ordered products\n     *\n     * @return bool\n     */\n    public function canReorderIgnoreSalable()\n    {\n        return $this->_canReorder(true);\n    }\n\n    /**\n     * Retrieve order reorder availability\n     *\n     * @param bool $ignoreSalable\n     * @return bool\n     */\n    protected function _canReorder($ignoreSalable = false)\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_REORDER) === false) {\n            return false;\n        }\n\n        $products = [];\n        foreach ($this->getItemsCollection() as $item) {\n            $products[] = $item->getProductId();\n        }\n\n        if (!empty($products)) {\n            /*\n             * @TODO ACPAOC: Use product collection here, but ensure that product\n             * is loaded with order store id, otherwise there'll be problems with isSalable()\n             * for configurables, bundles and other composites\n             *\n             */\n            /*\n            $productsCollection = Mage::getModel('catalog/product')->getCollection()\n                ->setStoreId($this->getStoreId())\n                ->addIdFilter($products)\n                ->addAttributeToSelect('status')\n                ->load();\n\n            foreach ($productsCollection as $product) {\n                if (!$product->isSalable()) {\n                    return false;\n                }\n            }\n            */\n\n            foreach ($products as $productId) {\n                $product = Mage::getModel('catalog/product')\n                    ->setStoreId($this->getStoreId())\n                    ->load($productId);\n                if (!$product->getId() || (!$ignoreSalable && !$product->isSalable())) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Check whether the payment is in payment review state\n     * In this state order cannot be normally processed. Possible actions can be:\n     * - accept or deny payment\n     * - fetch transaction information\n     *\n     * @return bool\n     */\n    public function isPaymentReview()\n    {\n        return $this->getState() === self::STATE_PAYMENT_REVIEW;\n    }\n\n    /**\n     * Check whether payment can be accepted or denied\n     *\n     * @return bool\n     */\n    public function canReviewPayment()\n    {\n        return $this->isPaymentReview() && $this->getPayment()->canReviewPayment();\n    }\n\n    /**\n     * Check whether there can be a transaction update fetched for payment in review state\n     *\n     * @return bool\n     */\n    public function canFetchPaymentReviewUpdate()\n    {\n        return $this->isPaymentReview() && $this->getPayment()->canFetchTransactionInfo();\n    }\n\n    /**\n     * Retrieve order configuration model\n     *\n     * @return Mage_Sales_Model_Order_Config\n     */\n    public function getConfig()\n    {\n        return Mage::getSingleton('sales/order_config');\n    }\n\n    /**\n     * Place order payments\n     *\n     * @return $this\n     */\n    protected function _placePayment()\n    {\n        $this->getPayment()->place();\n        return $this;\n    }\n\n    /**\n     * Retrieve order payment model object\n     *\n     * @return Mage_Sales_Model_Order_Payment|false\n     */\n    public function getPayment()\n    {\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if (!$payment->isDeleted()) {\n                return $payment;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Declare order billing address\n     *\n     * @param   Mage_Sales_Model_Order_Address $address\n     * @return  $this\n     */\n    public function setBillingAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $old = $this->getBillingAddress();\n        if (!empty($old)) {\n            $address->setId($old->getId());\n        }\n        $this->addAddress($address->setAddressType('billing'));\n        return $this;\n    }\n\n    /**\n     * Declare order shipping address\n     *\n     * @param   Mage_Sales_Model_Order_Address $address\n     * @return  $this\n     */\n    public function setShippingAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $old = $this->getShippingAddress();\n        if (!empty($old)) {\n            $address->setId($old->getId());\n        }\n        $this->addAddress($address->setAddressType('shipping'));\n        return $this;\n    }\n\n    /**\n     * Retrieve order billing address\n     *\n     * @return Mage_Sales_Model_Order_Address|false\n     */\n    public function getBillingAddress()\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getAddressType() == 'billing' && !$address->isDeleted()) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order shipping address\n     *\n     * @return Mage_Sales_Model_Order_Address|false\n     */\n    public function getShippingAddress()\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getAddressType() == 'shipping' && !$address->isDeleted()) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Order state setter.\n     * If status is specified, will add order status history with specified comment\n     * the setData() cannot be overriden because of compatibility issues with resource model\n     *\n     * @param string $state\n     * @param string|bool $status\n     * @param string $comment\n     * @param bool $isCustomerNotified\n     * @return $this\n     */\n    public function setState($state, $status = false, $comment = '', $isCustomerNotified = null)\n    {\n        return $this->_setState($state, $status, $comment, $isCustomerNotified, true);\n    }\n\n    /**\n     * Order state protected setter.\n     * By default allows to set any state. Can also update status to default or specified value\n     * \u0421omplete and closed states are encapsulated intentionally, see the _checkState()\n     *\n     * @param string $state\n     * @param string|bool $status\n     * @param string $comment\n     * @param bool $isCustomerNotified\n     * @param bool $shouldProtectState\n     * @return $this\n     */\n    protected function _setState(\n        $state,\n        $status = false,\n        $comment = '',\n        $isCustomerNotified = null,\n        $shouldProtectState = false\n    ) {\n        // attempt to set the specified state\n        if ($shouldProtectState) {\n            if ($this->isStateProtected($state)) {\n                Mage::throwException(\n                    Mage::helper('sales')->__('The Order State \"%s\" must not be set manually.', $state)\n                );\n            }\n        }\n        $this->setData('state', $state);\n\n        // add status history\n        if ($status) {\n            if ($status === true) {\n                $status = $this->getConfig()->getStateDefaultStatus($state);\n            }\n            $this->setStatus($status);\n            $history = $this->addStatusHistoryComment($comment, false); // no sense to set $status again\n            $history->setIsCustomerNotified($isCustomerNotified); // for backwards compatibility\n        }\n        return $this;\n    }\n\n    /**\n     * Whether specified state can be set from outside\n     * @param string $state\n     * @return bool\n     */\n    public function isStateProtected($state)\n    {\n        if (empty($state)) {\n            return false;\n        }\n        return self::STATE_COMPLETE == $state || self::STATE_CLOSED == $state;\n    }\n\n    /**\n     * Retrieve label of order status\n     *\n     * @return string\n     */\n    public function getStatusLabel()\n    {\n        return $this->getConfig()->getStatusLabel($this->getStatus());\n    }\n\n    /**\n     * Add status change information to history\n     * @deprecated after 1.4.0.0-alpha3\n     *\n     * @param  string $status\n     * @param  string $comment\n     * @param  bool $isCustomerNotified\n     * @return $this\n     */\n    public function addStatusToHistory($status, $comment = '', $isCustomerNotified = false)\n    {\n        $history = $this->addStatusHistoryComment($comment, $status)\n            ->setIsCustomerNotified($isCustomerNotified);\n        return $this;\n    }\n\n    /**\n     * Add a comment to order\n     * Different or default status may be specified\n     *\n     * @param string $comment\n     * @param bool|string $status\n     * @return Mage_Sales_Model_Order_Status_History\n     */\n    public function addStatusHistoryComment($comment, $status = false)\n    {\n        if ($status === false) {\n            $status = $this->getStatus();\n        } elseif ($status === true) {\n            $status = $this->getConfig()->getStateDefaultStatus($this->getState());\n        } else {\n            $this->setStatus($status);\n        }\n        $history = Mage::getModel('sales/order_status_history')\n            ->setStatus($status)\n            ->setComment($comment)\n            ->setEntityName($this->_historyEntityName);\n        $this->addStatusHistory($history);\n        return $history;\n    }\n\n    /**\n     * Overrides entity id, which will be saved to comments history status\n     *\n     * @param string $entityName\n     * @return $this\n     */\n    public function setHistoryEntityName($entityName)\n    {\n        $this->_historyEntityName = $entityName;\n        return $this;\n    }\n\n    /**\n     * Place order\n     *\n     * @return $this\n     */\n    public function place()\n    {\n        Mage::dispatchEvent('sales_order_place_before', ['order' => $this]);\n        $this->_placePayment();\n        Mage::dispatchEvent('sales_order_place_after', ['order' => $this]);\n        return $this;\n    }\n\n    /**\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function hold()\n    {\n        if (!$this->canHold()) {\n            Mage::throwException(Mage::helper('sales')->__('Hold action is not available.'));\n        }\n        $this->setHoldBeforeState($this->getState());\n        $this->setHoldBeforeStatus($this->getStatus());\n        $this->setState(self::STATE_HOLDED, true);\n        return $this;\n    }\n\n    /**\n     * Attempt to unhold the order\n     *\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function unhold()\n    {\n        if (!$this->canUnhold()) {\n            Mage::throwException(Mage::helper('sales')->__('Unhold action is not available.'));\n        }\n        $this->setState($this->getHoldBeforeState(), $this->getHoldBeforeStatus());\n        $this->setHoldBeforeState(null);\n        $this->setHoldBeforeStatus(null);\n        return $this;\n    }\n\n    /**\n     * Cancel order\n     * @param string $comment\n     * @return $this\n     */\n    public function cancel($comment = '')\n    {\n        if ($this->canCancel()) {\n            $this->getPayment()->cancel();\n            $this->registerCancellation($comment);\n            Mage::dispatchEvent('order_cancel_after', ['order' => $this]);\n        }\n\n        return $this;\n    }\n\n    /**\n     * Prepare order totals to cancellation\n     * @param string $comment\n     * @param bool $graceful\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function registerCancellation($comment = '', $graceful = true)\n    {\n        if ($this->canCancel() || $this->isPaymentReview()) {\n            $cancelState = self::STATE_CANCELED;\n            foreach ($this->getAllItems() as $item) {\n                if ($cancelState != self::STATE_PROCESSING && $item->getQtyToRefund()) {\n                    if ($item->getQtyToShip() > $item->getQtyToCancel()) {\n                        $cancelState = self::STATE_PROCESSING;\n                    } else {\n                        $cancelState = self::STATE_COMPLETE;\n                    }\n                }\n                $item->cancel();\n            }\n\n            $this->setSubtotalCanceled($this->getSubtotal() - $this->getSubtotalInvoiced());\n            $this->setBaseSubtotalCanceled($this->getBaseSubtotal() - $this->getBaseSubtotalInvoiced());\n\n            $this->setTaxCanceled($this->getTaxAmount() - $this->getTaxInvoiced());\n            $this->setBaseTaxCanceled($this->getBaseTaxAmount() - $this->getBaseTaxInvoiced());\n\n            $this->setShippingCanceled($this->getShippingAmount() - $this->getShippingInvoiced());\n            $this->setBaseShippingCanceled($this->getBaseShippingAmount() - $this->getBaseShippingInvoiced());\n\n            $this->setDiscountCanceled(abs($this->getDiscountAmount()) - $this->getDiscountInvoiced());\n            $this->setBaseDiscountCanceled(abs($this->getBaseDiscountAmount()) - $this->getBaseDiscountInvoiced());\n\n            $this->setTotalCanceled($this->getGrandTotal() - $this->getTotalPaid());\n            $this->setBaseTotalCanceled($this->getBaseGrandTotal() - $this->getBaseTotalPaid());\n\n            $this->_setState($cancelState, true, $comment);\n        } elseif (!$graceful) {\n            Mage::throwException(Mage::helper('sales')->__('Order does not allow to be canceled.'));\n        }\n        return $this;\n    }\n\n    /**\n     * Retrieve tracking numbers\n     *\n     * @return array\n     */\n    public function getTrackingNumbers()\n    {\n        if ($this->getData('tracking_numbers')) {\n            return explode(',', $this->getData('tracking_numbers'));\n        }\n        return [];\n    }\n\n    /**\n     * Return model of shipping carrier\n     *\n     * @return Mage_Shipping_Model_Carrier_Abstract\n     */\n    public function getShippingCarrier()\n    {\n        $carrierModel = $this->getData('shipping_carrier');\n        if (is_null($carrierModel)) {\n            $carrierModel = false;\n            /**\n             * $method - carrier_method\n             */\n            $method = $this->getShippingMethod(true);\n            if ($method instanceof Varien_Object) {\n                $className = Mage::getStoreConfig('carriers/' . $method->getCarrierCode() . '/model');\n                if ($className) {\n                    $carrierModel = Mage::getModel($className);\n                }\n            }\n            $this->setData('shipping_carrier', $carrierModel);\n        }\n        return $carrierModel;\n    }\n\n    /**\n     * Retrieve shipping method\n     *\n     * @param bool $asObject return carrier code and shipping method data as object\n     * @return string|Varien_Object\n     */\n    public function getShippingMethod($asObject = false)\n    {\n        $shippingMethod = parent::getShippingMethod();\n        if (!$asObject) {\n            return $shippingMethod;\n        } else {\n            $segments = explode('_', $shippingMethod, 2);\n            if (!isset($segments[1])) {\n                $segments[1] = $segments[0];\n            }\n            list($carrierCode, $method) = $segments;\n            return new Varien_Object([\n                'carrier_code' => $carrierCode,\n                'method'       => $method\n            ]);\n        }\n    }\n\n    /**\n     * Get the current customer email.\n     *\n     * @return string\n     */\n    public function getCurrentCustomerEmail()\n    {\n        if (!$this->getData('current_customer_email')) {\n            if ($this->getCustomer()) {\n                $email = $this->getCustomer()->getEmail();\n            } elseif ($this->getCustomerId()) {\n                $email = Mage::getResourceSingleton('customer/customer')->getEmail($this->getCustomerId());\n            }\n            // Guest checkout or customer was deleted.\n            if (empty($email)) {\n                $email = $this->getCustomerEmail();\n            }\n            $this->setData('current_customer_email', $email);\n        }\n\n        return $this->getData('current_customer_email');\n    }\n\n    /**\n     * Queue email with new order data\n     *\n     * @param bool $forceMode if true then email will be sent regardless of the fact that it was already sent previously\n     *\n     * @return $this\n     * @throws Exception\n     */\n    public function queueNewOrderEmail($forceMode = false)\n    {\n        $storeId = $this->getStore()->getId();\n\n        if (!Mage::helper('sales')->canSendNewOrderEmail($storeId)) {\n            return $this;\n        }\n\n        // Get the destination email addresses to send copies to\n        $copyTo = $this->_getEmails(self::XML_PATH_EMAIL_COPY_TO);\n        $copyMethod = Mage::getStoreConfig(self::XML_PATH_EMAIL_COPY_METHOD, $storeId);\n\n        // Start store emulation process\n        if ($storeId != Mage::app()->getStore()->getId()) {\n            /** @var Mage_Core_Model_App_Emulation $appEmulation */\n            $appEmulation = Mage::getSingleton('core/app_emulation');\n            $initialEnvironmentInfo = $appEmulation->startEnvironmentEmulation($storeId);\n        }\n\n        try {\n            // Retrieve specified view block from appropriate design package (depends on emulated store)\n            $paymentBlock = Mage::helper('payment')->getInfoBlock($this->getPayment())\n                ->setIsSecureMode(true);\n            $paymentBlock->getMethod()->setStore($storeId);\n            $paymentBlockHtml = $paymentBlock->toHtml();\n        } catch (Exception $e) {\n            // Stop store emulation process\n            if (isset($appEmulation, $initialEnvironmentInfo)) {\n                $appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo);\n            }\n            throw $e;\n        }\n\n        // Stop store emulation process\n        if (isset($appEmulation, $initialEnvironmentInfo)) {\n            $appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo);\n        }\n\n        // Retrieve corresponding email template id and customer name\n        if ($this->getCustomerIsGuest()) {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_GUEST_TEMPLATE, $storeId);\n            $customerName = $this->getBillingAddress()->getName();\n        } else {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE, $storeId);\n            $customerName = $this->getCustomerName();\n        }\n\n        /** @var Mage_Core_Model_Email_Template_Mailer $mailer */\n        $mailer = Mage::getModel('core/email_template_mailer');\n        /** @var Mage_Core_Model_Email_Info $emailInfo */\n        $emailInfo = Mage::getModel('core/email_info');\n        $emailInfo->addTo($this->getCurrentCustomerEmail(), $customerName);\n        if ($copyTo && $copyMethod == 'bcc') {\n            // Add bcc to customer email\n            foreach ($copyTo as $email) {\n                $emailInfo->addBcc($email);\n            }\n        }\n        $mailer->addEmailInfo($emailInfo);\n\n        // Email copies are sent as separated emails if their copy method is 'copy'\n        if ($copyTo && $copyMethod == 'copy') {\n            foreach ($copyTo as $email) {\n                $emailInfo = Mage::getModel('core/email_info');\n                $emailInfo->addTo($email);\n                $mailer->addEmailInfo($emailInfo);\n            }\n        }\n\n        // Set all required params and send emails\n        $mailer->setSender(Mage::getStoreConfig(self::XML_PATH_EMAIL_IDENTITY, $storeId));\n        $mailer->setStoreId($storeId);\n        $mailer->setTemplateId($templateId);\n        $mailer->setTemplateParams([\n            'order'        => $this,\n            'billing'      => $this->getBillingAddress(),\n            'payment_html' => $paymentBlockHtml\n        ]);\n\n        /** @var Mage_Core_Model_Email_Queue $emailQueue */\n        $emailQueue = Mage::getModel('core/email_queue');\n        $emailQueue->setEntityId($this->getId())\n            ->setEntityType(self::ENTITY)\n            ->setEventType(self::EMAIL_EVENT_NAME_NEW_ORDER)\n            ->setIsForceCheck(!$forceMode);\n\n        $mailer->setQueue($emailQueue)->send();\n\n        $this->setEmailSent(true);\n        $this->_getResource()->saveAttribute($this, 'email_sent');\n\n        return $this;\n    }\n\n    /**\n     * Send email with order data\n     *\n     * @return $this\n     */\n    public function sendNewOrderEmail()\n    {\n        $this->queueNewOrderEmail(true);\n        return $this;\n    }\n\n    /**\n     * Queue email with order update information\n     *\n     * @param bool $notifyCustomer\n     * @param string $comment\n     * @param bool $forceMode if true then email will be sent regardless of the fact that it was already sent previously\n     *\n     * @return $this\n     */\n    public function queueOrderUpdateEmail($notifyCustomer = true, $comment = '', $forceMode = false)\n    {\n        $storeId = $this->getStore()->getId();\n\n        if (!Mage::helper('sales')->canSendOrderCommentEmail($storeId)) {\n            return $this;\n        }\n        // Get the destination email addresses to send copies to\n        $copyTo = $this->_getEmails(self::XML_PATH_UPDATE_EMAIL_COPY_TO);\n        $copyMethod = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_COPY_METHOD, $storeId);\n        // Check if at least one recipient is found\n        if (!$notifyCustomer && !$copyTo) {\n            return $this;\n        }\n\n        // Retrieve corresponding email template id and customer name\n        if ($this->getCustomerIsGuest()) {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_GUEST_TEMPLATE, $storeId);\n            $customerName = $this->getBillingAddress()->getName();\n        } else {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_TEMPLATE, $storeId);\n            $customerName = $this->getCustomerName();\n        }\n\n        /** @var Mage_Core_Model_Email_Template_Mailer $mailer */\n        $mailer = Mage::getModel('core/email_template_mailer');\n        if ($notifyCustomer) {\n            /** @var Mage_Core_Model_Email_Info $emailInfo */\n            $emailInfo = Mage::getModel('core/email_info');\n            $emailInfo->addTo($this->getCurrentCustomerEmail(), $customerName);\n            if ($copyTo && $copyMethod == 'bcc') {\n                // Add bcc to customer email\n                foreach ($copyTo as $email) {\n                    $emailInfo->addBcc($email);\n                }\n            }\n            $mailer->addEmailInfo($emailInfo);\n        }\n\n        // Email copies are sent as separated emails if their copy method is\n        // 'copy' or a customer should not be notified\n        if ($copyTo && ($copyMethod == 'copy' || !$notifyCustomer)) {\n            foreach ($copyTo as $email) {\n                $emailInfo = Mage::getModel('core/email_info');\n                $emailInfo->addTo($email);\n                $mailer->addEmailInfo($emailInfo);\n            }\n        }\n\n        // Set all required params and send emails\n        $mailer->setSender(Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_IDENTITY, $storeId));\n        $mailer->setStoreId($storeId);\n        $mailer->setTemplateId($templateId);\n        $mailer->setTemplateParams([\n                'order'   => $this,\n                'comment' => $comment,\n                'billing' => $this->getBillingAddress()\n        ]);\n\n        /** @var Mage_Core_Model_Email_Queue $emailQueue */\n        $emailQueue = Mage::getModel('core/email_queue');\n        $emailQueue->setEntityId($this->getId())\n            ->setEntityType(self::ENTITY)\n            ->setEventType(self::EMAIL_EVENT_NAME_UPDATE_ORDER)\n            ->setIsForceCheck(!$forceMode);\n        $mailer->setQueue($emailQueue)->send();\n\n        return $this;\n    }\n\n    /**\n     * Send email with order update information\n     *\n     * @param bool $notifyCustomer\n     * @param string $comment\n     *\n     * @return $this\n     */\n    public function sendOrderUpdateEmail($notifyCustomer = true, $comment = '')\n    {\n        $this->queueOrderUpdateEmail($notifyCustomer, $comment, true);\n        return $this;\n    }\n\n    /**\n     * @param string $configPath\n     * @return array|false\n     */\n    protected function _getEmails($configPath)\n    {\n        $data = Mage::getStoreConfig($configPath, $this->getStoreId());\n        if (!empty($data)) {\n            return explode(',', $data);\n        }\n        return false;\n    }\n\n    /*********************** ADDRESSES ***************************/\n\n    /**\n     * @return Mage_Sales_Model_Resource_Order_Address_Collection\n     */\n    public function getAddressesCollection()\n    {\n        if (is_null($this->_addresses)) {\n            $this->_addresses = Mage::getResourceModel('sales/order_address_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_addresses as $address) {\n                    $address->setOrder($this);\n                }\n            }\n        }\n\n        return $this->_addresses;\n    }\n\n    /**\n     * @param int|string $addressId\n     * @return false|Mage_Sales_Model_Order_Address\n     */\n    public function getAddressById($addressId)\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getId() == $addressId) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Address $address\n     * @return $this\n     * @throws Exception\n     */\n    public function addAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $address->setOrder($this)->setParentId($this->getId());\n        if (!$address->getId()) {\n            $this->getAddressesCollection()->addItem($address);\n        }\n        return $this;\n    }\n\n    /**\n     * @param array $filterByTypes\n     * @param bool $nonChildrenOnly\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getItemsCollection($filterByTypes = [], $nonChildrenOnly = false)\n    {\n        if (is_null($this->_items)) {\n            $this->_items = Mage::getResourceModel('sales/order_item_collection')\n                ->setOrderFilter($this);\n\n            if ($filterByTypes) {\n                $this->_items->filterByTypes($filterByTypes);\n            }\n            if ($nonChildrenOnly) {\n                $this->_items->filterByParent();\n            }\n\n            if ($this->getId()) {\n                foreach ($this->_items as $item) {\n                    $item->setOrder($this);\n                }\n            }\n        }\n        return $this->_items;\n    }\n\n    /**\n     * Get random items collection with related children\n     *\n     * @param int $limit\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getItemsRandomCollection($limit = 1)\n    {\n        return $this->_getItemsRandomCollection($limit);\n    }\n\n    /**\n     * Get random items collection without related children\n     *\n     * @param int $limit\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getParentItemsRandomCollection($limit = 1)\n    {\n        return $this->_getItemsRandomCollection($limit, true);\n    }\n\n    /**\n     * Get random items collection with or without related children\n     *\n     * @param int $limit\n     * @param bool $nonChildrenOnly\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    protected function _getItemsRandomCollection($limit, $nonChildrenOnly = false)\n    {\n        $collection = Mage::getModel('sales/order_item')->getCollection()\n            ->setOrderFilter($this)\n            ->setRandomOrder();\n\n        if ($nonChildrenOnly) {\n            $collection->filterByParent();\n        }\n        $products = [];\n        /** @var Mage_Sales_Model_Order_Item $item */\n        foreach ($collection as $item) {\n            $products[] = $item->getProductId();\n        }\n\n        $productsCollection = Mage::getModel('catalog/product')\n            ->getCollection()\n            ->addIdFilter($products)\n            ->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInSiteIds())\n            /* Price data is added to consider item stock status using price index */\n            ->addPriceData()\n            ->setPageSize($limit)\n            ->load();\n\n        foreach ($collection as $item) {\n            $product = $productsCollection->getItemById($item->getProductId());\n            if ($product) {\n                $item->setProduct($product);\n            }\n        }\n\n        return $collection;\n    }\n\n    /**\n     * @return Mage_Sales_Model_Order_Item[]\n     */\n    public function getAllItems()\n    {\n        $items = [];\n        foreach ($this->getItemsCollection() as $item) {\n            if (!$item->isDeleted()) {\n                $items[] =  $item;\n            }\n        }\n        return $items;\n    }\n\n    /**\n     * @return array\n     */\n    public function getAllVisibleItems()\n    {\n        $items = [];\n        foreach ($this->getItemsCollection() as $item) {\n            if (!$item->isDeleted() && !$item->getParentItemId()) {\n                $items[] = $item;\n            }\n        }\n        return $items;\n    }\n\n    /**\n     * @param int $itemId\n     * @return Mage_Sales_Model_Order_Item|null\n     */\n    public function getItemById($itemId)\n    {\n        return $this->getItemsCollection()->getItemById($itemId);\n    }\n\n    /**\n     * @param int $quoteItemId\n     * @return Mage_Sales_Model_Order_Item|null\n     */\n    public function getItemByQuoteItemId($quoteItemId)\n    {\n        foreach ($this->getItemsCollection() as $item) {\n            if ($item->getQuoteItemId() == $quoteItemId) {\n                return $item;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Item $item\n     * @return $this\n     * @throws Exception\n     */\n    public function addItem(Mage_Sales_Model_Order_Item $item)\n    {\n        $item->setOrder($this);\n        if (!$item->getId()) {\n            $this->getItemsCollection()->addItem($item);\n        }\n        return $this;\n    }\n\n    /**\n     * Whether the order has nominal items only\n     *\n     * @return bool\n     */\n    public function isNominal()\n    {\n        foreach ($this->getAllVisibleItems() as $item) {\n            if ($item->getIsNominal() == '0') {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /*********************** PAYMENTS ***************************/\n\n    /**\n     * @return Mage_Sales_Model_Resource_Order_Payment_Collection\n     */\n    public function getPaymentsCollection()\n    {\n        if (is_null($this->_payments)) {\n            $this->_payments = Mage::getResourceModel('sales/order_payment_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_payments as $payment) {\n                    $payment->setOrder($this);\n                }\n            }\n        }\n        return $this->_payments;\n    }\n\n    /**\n     * @return Mage_Sales_Model_Order_Payment[]\n     */\n    public function getAllPayments()\n    {\n        $payments = [];\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if (!$payment->isDeleted()) {\n                $payments[] =  $payment;\n            }\n        }\n        return $payments;\n    }\n\n    /**\n     * @param int $paymentId\n     * @return bool|Mage_Sales_Model_Order_Payment\n     */\n    public function getPaymentById($paymentId)\n    {\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if ($payment->getId() == $paymentId) {\n                return $payment;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return $this\n     * @throws Exception\n     */\n    public function addPayment(Mage_Sales_Model_Order_Payment $payment)\n    {\n        $payment->setOrder($this)\n            ->setParentId($this->getId());\n        if (!$payment->getId()) {\n            $this->getPaymentsCollection()->addItem($payment);\n        }\n        return $this;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Sales_Model_Order_Payment\n     */\n    public function setPayment(Mage_Sales_Model_Order_Payment $payment)\n    {\n        if (!$this->getIsMultiPayment() && ($old = $this->getPayment())) {\n            $payment->setId($old->getId());\n        }\n        $this->addPayment($payment);\n        return $payment;\n    }\n\n    /*********************** STATUSES ***************************/\n\n    /**\n     * @param bool $reload\n     * @return Mage_Sales_Model_Resource_Order_Status_History_Collection\n     */\n    public function getStatusHistoryCollection($reload = false)\n    {\n        if (is_null($this->_statusHistory) || $reload) {\n            $this->_statusHistory = Mage::getResourceModel('sales/order_status_history_collection')\n                ->setOrderFilter($this)\n                ->setOrder('created_at', 'desc')\n                ->setOrder('entity_id', 'desc');\n\n            if ($this->getId()) {\n                foreach ($this->_statusHistory as $status) {\n                    $status->setOrder($this);\n                }\n            }\n        }\n        return $this->_statusHistory;\n    }\n\n    /**\n     * Return collection of order status history items.\n     *\n     * @return Mage_Sales_Model_Order_Status_History[]\n     */\n    public function getAllStatusHistory()\n    {\n        $history = [];\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if (!$status->isDeleted()) {\n                $history[] =  $status;\n            }\n        }\n        return $history;\n    }\n\n    /**\n     * Return collection of visible on frontend order status history items.\n     *\n     * @return array\n     */\n    public function getVisibleStatusHistory()\n    {\n        $history = [];\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if (!$status->isDeleted() && $status->getComment() && $status->getIsVisibleOnFront()) {\n                $history[] =  $status;\n            }\n        }\n        return $history;\n    }\n\n    /**\n     * @param int $statusId\n     * @return false|Mage_Sales_Model_Order_Status_History\n     */\n    public function getStatusHistoryById($statusId)\n    {\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if ($status->getId() == $statusId) {\n                return $status;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Set the order status history object and the order object to each other\n     * Adds the object to the status history collection, which is automatically saved when the order is saved.\n     * See the entity_id attribute backend model.\n     * Or the history record can be saved standalone after this.\n     *\n     * @param Mage_Sales_Model_Order_Status_History $history\n     * @return $this\n     */\n    public function addStatusHistory(Mage_Sales_Model_Order_Status_History $history)\n    {\n        $history->setOrder($this);\n        $this->setStatus($history->getStatus());\n        if (!$history->getId()) {\n            $this->getStatusHistoryCollection()->addItem($history);\n        }\n        return $this;\n    }\n\n    /**\n     * @return string\n     */\n    public function getRealOrderId()\n    {\n        $id = $this->getData('real_order_id');\n        if (is_null($id)) {\n            $id = $this->getIncrementId();\n        }\n        return $id;\n    }\n\n    /**\n     * Get currency model instance. Will be used currency with which order placed\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getOrderCurrency()\n    {\n        if (is_null($this->_orderCurrency)) {\n            $this->_orderCurrency = Mage::getModel('directory/currency')->load($this->getOrderCurrencyCode());\n        }\n        return $this->_orderCurrency;\n    }\n\n    /**\n     * Get formatted price value including order currency rate to order website currency\n     *\n     * @param   float $price\n     * @param   bool  $addBrackets\n     * @return  string\n     */\n    public function formatPrice($price, $addBrackets = false)\n    {\n        return $this->formatPricePrecision($price, 2, $addBrackets);\n    }\n\n    /**\n     * @param float $price\n     * @param int $precision\n     * @param bool $addBrackets\n     * @return string\n     */\n    public function formatPricePrecision($price, $precision, $addBrackets = false)\n    {\n        return $this->getOrderCurrency()->formatPrecision($price, $precision, [], true, $addBrackets);\n    }\n\n    /**\n     * Retrieve currency formatted string.\n     *\n     * @param float|string $price Numeric value or field name, e.g. \"grand_total\".\n     * @return string\n     */\n    public function formatPriceTxt($price)\n    {\n        $price = (float) (is_numeric($price) ? $price : $this->_getData($price));\n        return $this->getOrderCurrency()->formatTxt($price);\n    }\n\n    /**\n     * Retrieve order website currency for working with base prices\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getBaseCurrency()\n    {\n        if (is_null($this->_baseCurrency)) {\n            $this->_baseCurrency = Mage::getModel('directory/currency')->load($this->getBaseCurrencyCode());\n        }\n        return $this->_baseCurrency;\n    }\n\n    /**\n     * Retrieve order website currency for working with base prices\n     * @deprecated  please use getBaseCurrency instead.\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getStoreCurrency()\n    {\n        return $this->getData('store_currency');\n    }\n\n    /**\n     * @param float $price\n     * @return string\n     */\n    public function formatBasePrice($price)\n    {\n        return $this->formatBasePricePrecision($price, 2);\n    }\n\n    /**\n     * @param float $price\n     * @param int $precision\n     * @return string\n     */\n    public function formatBasePricePrecision($price, $precision)\n    {\n        return $this->getBaseCurrency()->formatPrecision($price, $precision);\n    }\n\n    /**\n     * @return bool\n     */\n    public function isCurrencyDifferent()\n    {\n        return $this->getOrderCurrencyCode() != $this->getBaseCurrencyCode();\n    }\n\n    /**\n     * Retrieve order total due value\n     *\n     * @return float\n     */\n    public function getTotalDue()\n    {\n        $total = $this->getGrandTotal() - $this->getTotalPaid();\n        $total = Mage::app()->getStore($this->getStoreId())->roundPrice($total);\n        return max($total, 0);\n    }\n\n    /**\n     * Retrieve order total due value\n     *\n     * @return float\n     */\n    public function getBaseTotalDue()\n    {\n        $total = $this->getBaseGrandTotal() - $this->getBaseTotalPaid();\n        $total = Mage::app()->getStore($this->getStoreId())->roundPrice($total);\n        return max($total, 0);\n    }\n\n    /**\n     * @param string $key\n     * @param int|string|null $index\n     * @return float|mixed\n     */\n    public function getData($key = '', $index = null)\n    {\n        if ($key == 'total_due') {\n            return $this->getTotalDue();\n        }\n        if ($key == 'base_total_due') {\n            return $this->getBaseTotalDue();\n        }\n        return parent::getData($key, $index);\n    }\n\n    /**\n     * Retrieve order invoices collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Invoice_Collection\n     */\n    public function getInvoiceCollection()\n    {\n        if (is_null($this->_invoices)) {\n            $this->_invoices = Mage::getResourceModel('sales/order_invoice_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_invoices as $invoice) {\n                    $invoice->setOrder($this);\n                }\n            }\n        }\n        return $this->_invoices;\n    }\n\n    /**\n     * Retrieve order invoices collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Invoice_Collection\n     */\n    public function getInvoicesCollection()\n    {\n        return $this->getInvoiceCollection();\n    }\n\n    /**\n     * Retrieve order shipments collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Shipment_Collection|false\n     */\n    public function getShipmentsCollection()\n    {\n        if (empty($this->_shipments)) {\n            if ($this->getId()) {\n                $this->_shipments = Mage::getResourceModel('sales/order_shipment_collection')\n                    ->setOrderFilter($this)\n                    ->load();\n            } else {\n                return false;\n            }\n        }\n        return $this->_shipments;\n    }\n\n    /**\n     * Retrieve order creditmemos collection\n     *\n     * @return  Mage_Sales_Model_Resource_Order_Creditmemo_Collection|Mage_Sales_Model_Order_Creditmemo[]|false\n     */\n    public function getCreditmemosCollection()\n    {\n        if (empty($this->_creditmemos)) {\n            if ($this->getId()) {\n                $this->_creditmemos = Mage::getResourceModel('sales/order_creditmemo_collection')\n                    ->setOrderFilter($this)\n                    ->load();\n            } else {\n                return false;\n            }\n        }\n        return $this->_creditmemos;\n    }\n\n    /**\n     * Retrieve order tracking numbers collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Shipment_Track_Collection\n     */\n    public function getTracksCollection()\n    {\n        if (empty($this->_tracks)) {\n            $this->_tracks = Mage::getResourceModel('sales/order_shipment_track_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                $this->_tracks->load();\n            }\n        }\n        return $this->_tracks;\n    }\n\n    /**\n     * Check order invoices availability\n     *\n     * @return int\n     */\n    public function hasInvoices()\n    {\n        return $this->getInvoiceCollection()->count();\n    }\n\n    /**\n     * Check order shipments availability\n     *\n     * @return bool\n     */\n    public function hasShipments()\n    {\n        $result = false;\n        $shipmentsCollection = $this->getShipmentsCollection();\n        if ($shipmentsCollection) {\n            $result = (bool)$shipmentsCollection->count();\n        }\n        return $result;\n    }\n\n    /**\n     * Check order creditmemos availability\n     *\n     * @return bool\n     */\n    public function hasCreditmemos()\n    {\n        $result = false;\n        $creditmemosCollection = $this->getCreditmemosCollection();\n        if ($creditmemosCollection) {\n            $result = (bool)$creditmemosCollection->count();\n        }\n        return $result;\n    }\n\n    /**\n     * Retrieve array of related objects\n     *\n     * Used for order saving\n     *\n     * @return array\n     */\n    public function getRelatedObjects()\n    {\n        return $this->_relatedObjects;\n    }\n\n    /**\n     * Retrieve customer name\n     *\n     * @return string\n     */\n    public function getCustomerName()\n    {\n        if ($this->getCustomerFirstname()) {\n            $customerName = Mage::helper('customer')->getFullCustomerName($this);\n        } else {\n            $customerName = Mage::helper('sales')->__('Guest');\n        }\n        return $customerName;\n    }\n\n    /**\n     * Add New object to related array\n     *\n     * @param   Mage_Core_Model_Abstract $object\n     * @return  $this\n     */\n    public function addRelatedObject(Mage_Core_Model_Abstract $object)\n    {\n        $this->_relatedObjects[] = $object;\n        return $this;\n    }\n\n    /**\n     * Get formatted order created date in store timezone\n     *\n     * @param   string $format date format type (short|medium|long|full)\n     * @return  string\n     */\n    public function getCreatedAtFormated($format)\n    {\n        return Mage::helper('core')->formatDate($this->getCreatedAtStoreDate(), $format, true);\n    }\n\n    /**\n     * @return string\n     */\n    public function getEmailCustomerNote()\n    {\n        if ($this->getCustomerNoteNotify()) {\n            return $this->getCustomerNote();\n        }\n        return '';\n    }\n\n    /**\n     * Processing object before save data\n     *\n     * @return Mage_Core_Model_Abstract\n     */\n    protected function _beforeSave()\n    {\n        parent::_beforeSave();\n        $this->_checkState();\n        if (!$this->getId()) {\n            $store = $this->getStore();\n            $name = [$store->getWebsite()->getName(),$store->getGroup()->getName(),$store->getName()];\n            $this->setStoreName(implode(\"\\n\", $name));\n        }\n\n        if (!$this->getIncrementId()) {\n            $incrementId = Mage::getSingleton('eav/config')\n                ->getEntityType('order')\n                ->fetchNewIncrementId($this->getStoreId());\n            $this->setIncrementId($incrementId);\n        }\n\n        /**\n         * Process items dependency for new order\n         */\n        if (!$this->getId()) {\n            $itemsCount = 0;\n            foreach ($this->getAllItems() as $item) {\n                $parent = $item->getQuoteParentItemId();\n                if ($parent && !$item->getParentItem()) {\n                    $item->setParentItem($this->getItemByQuoteItemId($parent));\n                } elseif (!$parent) {\n                    $itemsCount++;\n                }\n            }\n            // Set items count\n            $this->setTotalItemCount($itemsCount);\n        }\n        if ($this->getCustomer()) {\n            $this->setCustomerId($this->getCustomer()->getId());\n        }\n\n        if ($this->hasBillingAddressId() && $this->getBillingAddressId() === null) {\n            $this->unsBillingAddressId();\n        }\n\n        if ($this->hasShippingAddressId() && $this->getShippingAddressId() === null) {\n            $this->unsShippingAddressId();\n        }\n\n        if (!$this->getId()) {\n            $this->setData('protect_code', substr(md5(uniqid(mt_rand(), true) . ':' . microtime(true)), 5, 6));\n        }\n\n        if ($this->getStatus() !== $this->getOrigData('status')) {\n            Mage::dispatchEvent('order_status_changed_before_save', ['order' => $this]);\n        }\n\n        return $this;\n    }\n\n    /**\n     * Check order state before saving\n     */\n    protected function _checkState()\n    {\n        if (!$this->getId()) {\n            return $this;\n        }\n\n        $userNotification = $this->hasCustomerNoteNotify() ? $this->getCustomerNoteNotify() : null;\n\n        if (!$this->isCanceled()\n            && !$this->canUnhold()\n            && !$this->canInvoice()\n            && !$this->canShip()\n        ) {\n            if ($this->getBaseGrandTotal() == 0 || $this->canCreditmemo()) {\n                if ($this->getState() !== self::STATE_COMPLETE) {\n                    $this->_setState(self::STATE_COMPLETE, true, '', $userNotification);\n                }\n            } elseif ((float) $this->getTotalRefunded() || (!$this->getTotalRefunded()\n                && $this->hasForcedCanCreditmemo())\n                /**\n                 * Order can be closed just in case when we have refunded amount.\n                 * In case of \"0\" grand total order checking ForcedCanCreditmemo flag\n                 */\n            ) {\n                if ($this->getState() !== self::STATE_CLOSED) {\n                    $this->_setState(self::STATE_CLOSED, true, '', $userNotification);\n                }\n            }\n        }\n\n        if ($this->getState() == self::STATE_NEW && $this->getIsInProcess()) {\n            $this->setState(self::STATE_PROCESSING, true, '', $userNotification);\n        }\n        return $this;\n    }\n\n    /**\n     * Save order related objects\n     *\n     * @inheritDoc\n     */\n    protected function _afterSave()\n    {\n        if ($this->_addresses !== null) {\n            $this->_addresses->save();\n            $billingAddress = $this->getBillingAddress();\n            $attributesForSave = [];\n            if ($billingAddress && $this->getBillingAddressId() != $billingAddress->getId()) {\n                $this->setBillingAddressId($billingAddress->getId());\n                $attributesForSave[] = 'billing_address_id';\n            }\n\n            $shippingAddress = $this->getShippingAddress();\n            if ($shippingAddress && $this->getShippingAddressId() != $shippingAddress->getId()) {\n                $this->setShippingAddressId($shippingAddress->getId());\n                $attributesForSave[] = 'shipping_address_id';\n            }\n\n            if (!empty($attributesForSave)) {\n                $this->_getResource()->saveAttribute($this, $attributesForSave);\n            }\n        }\n        if ($this->_items !== null) {\n            $this->_items->save();\n        }\n        if ($this->_payments !== null) {\n            $this->_payments->save();\n        }\n        if ($this->_statusHistory !== null) {\n            $this->_statusHistory->save();\n        }\n        foreach ($this->getRelatedObjects() as $object) {\n            $object->save();\n        }\n        return parent::_afterSave();\n    }\n\n    /**\n     * @return string\n     */\n    public function getStoreGroupName()\n    {\n        $storeId = $this->getStoreId();\n        if (is_null($storeId)) {\n            return $this->getStoreName(1); // 0 - website name, 1 - store group name, 2 - store name\n        }\n        return $this->getStore()->getGroup()->getName();\n    }\n\n    /**\n     * Resets all data in object\n     * so after another load it will be complete new object\n     *\n     * @return $this\n     */\n    public function reset()\n    {\n        $this->unsetData();\n        $this->_actionFlag = [];\n        $this->_addresses = null;\n        $this->_items = null;\n        $this->_payments = null;\n        $this->_statusHistory = null;\n        $this->_invoices = null;\n        $this->_tracks = null;\n        $this->_shipments = null;\n        $this->_creditmemos = null;\n        $this->_relatedObjects = [];\n        $this->_orderCurrency = null;\n        $this->_baseCurrency = null;\n\n        return $this;\n    }\n\n    /**\n     * @return bool\n     */\n    public function getIsNotVirtual()\n    {\n        return !$this->getIsVirtual();\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getFullTaxInfo()\n    {\n        $rates = Mage::getModel('tax/sales_order_tax')->getCollection()->loadByOrder($this)->toArray();\n        return Mage::getSingleton('tax/calculation')->reproduceProcess($rates['items']);\n    }\n\n    /**\n     * Create new invoice with maximum qty for invoice for each item\n     *\n     * @param array $qtys\n     * @return Mage_Sales_Model_Order_Invoice\n     */\n    public function prepareInvoice($qtys = [])\n    {\n        return Mage::getModel('sales/service_order', $this)->prepareInvoice($qtys);\n    }\n\n    /**\n     * Create new shipment with maximum qty for shipping for each item\n     *\n     * @param array $qtys\n     * @return Mage_Sales_Model_Order_Shipment\n     */\n    public function prepareShipment($qtys = [])\n    {\n        return Mage::getModel('sales/service_order', $this)->prepareShipment($qtys);\n    }\n\n    /**\n     * Check whether order is canceled\n     *\n     * @return bool\n     */\n    public function isCanceled()\n    {\n        return ($this->getState() === self::STATE_CANCELED);\n    }\n\n    /**\n     * Protect order delete from not admin scope\n     * @inheritDoc\n     */\n    protected function _beforeDelete()\n    {\n        $this->_protectFromNonAdmin();\n        return parent::_beforeDelete();\n    }\n}\n", "\"%s\",\"%s\"\n\"%s already exist.\",\"%s already exist.\"\n\"%s already exists.\",\"%s already exists.\"\n\"-- Please Select --\",\"-- Please Select --\"\n\"<strong style=\"\"color:red\"\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain\",\"<strong style=\"\"color:red\"\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain\"\n\"<strong style=\"\"color:red\"\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).\",\"<strong style=\"\"color:red\"\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).\"\n\"A category object is required for determining the product request path.\",\"A category object is required for determining the product request path.\"\n\"Add Block Names to Hints\",\"Add Block Names to Hints\"\n\"Add Secret Key To Url\",\"Add Secret Key To Url\"\n\"Add Secret Key to URLs\",\"Add Secret Key to URLs\"\n\"Add Store Code to Urls\",\"Add Store Code to Urls\"\n\"Admin\",\"Admin\"\n\"Admin Base URL\",\"Admin Base URL\"\n\"Admin User Emails\",\"Admin User Emails\"\n\"Admin routing compatibility mode for extensions\",\"Admin routing compatibility mode for extensions\"\n\"Advanced\",\"Advanced\"\n\"Advanced Cache Settings\",\"Advanced Cache Settings\"\n\"After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.\",\"After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.\"\n\"Allow Countries\",\"Allow Countries\"\n\"Allow Magento Backend to run in frame\",\"Allow Magento Backend to run in frame\"\n\"Allow Magento Frontend to run in frame\",\"Allow Magento Frontend to run in frame\"\n\"Allow Symlinks\",\"Allow Symlinks\"\n\"Allowed IPs (comma separated)\",\"Allowed IPs (comma separated)\"\n\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG, SVG. Not all browsers support all these formats!\",\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG, SVG. Not all browsers support all these formats!\"\n\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG. Not all browsers support all these formats!\",\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG. Not all browsers support all these formats!\"\n\"Allows customers to stay logged in when switching between different stores.\",\"Allows customers to stay logged in when switching between different stores.\"\n\"Alternative text for next link in pagination menu. If empty, default arrow image will used.\",\"Alternative text for next link in pagination menu. If empty, default arrow image will used.\"\n\"Alternative text for previous link in pagination menu. If empty, default arrow image will used.\",\"Alternative text for previous link in pagination menu. If empty, default arrow image will used.\"\n\"An error occurred while saving. Please review the error log.\",\"An error occurred while saving. Please review the error log.\"\n\"Anchor Text for Next\",\"Anchor Text for Next\"\n\"Anchor Text for Previous\",\"Anchor Text for Previous\"\n\"Anchor symbol (#) is not supported in request path\",\"Anchor symbol (#) is not supported in request path\"\n\"Anchor symbol (#) is not supported in url rewrite suffix\",\"Anchor symbol (#) is not supported in url rewrite suffix\"\n\"Are you sure?\",\"Are you sure?\"\n\"Auto-redirect to Base URL\",\"Auto-redirect to Base URL\"\n\"Back\",\"Back\"\n\"Backup Options\",\"Backup Options\"\n\"Base JavaScript URL\",\"Base JavaScript URL\"\n\"Base Link URL\",\"Base Link URL\"\n\"Base Media URL\",\"Base Media URL\"\n\"Base Secure URL\",\"Base Secure URL\"\n\"Base Skin URL\",\"Base Skin URL\"\n\"Base URL\",\"Base URL\"\n\"Base Unsecure URL\",\"Base Unsecure URL\"\n\"Before modifying the store view code please make sure that it is not used in index.php.\",\"Before modifying the store view code please make sure that it is not used in index.php.\"\n\"Before modifying the website code please make sure that it is not used in index.php.\",\"Before modifying the website code please make sure that it is not used in index.php.\"\n\"Block with name \"\"%s\"\" already exists\",\"Block with name \"\"%s\"\" already exists\"\n\"Browser Capabilities Detection\",\"Browser Capabilities Detection\"\n\"CSRF protection\",\"CSRF protection\"\n\"CSS Settings\",\"CSS Settings\"\n\"Cache Storage Management\",\"Cache Storage Management\"\n\"Cache storage may contain additional data. Are you sure that you want flush it?\",\"Cache storage may contain additional data. Are you sure that you want flush it?\"\n\"Can not create invoice. Order was not found.\",\"Can not create invoice. Order was not found.\"\n\"Can't retrieve request object\",\"Can't retrieve request object\"\n\"Can't retrieve entity config: %s\",\"Can't retrieve entity config: %s\"\n\"Cancel\",\"Cancel\"\n\"Cannot complete this operation from non-admin area.\",\"Cannot complete this operation from non-admin area.\"\n\"Card type does not match credit card number.\",\"Card type does not match credit card number.\"\n\"Code\",\"Code\"\n\"Controller file was loaded but class does not exist\",\"Controller file was loaded but class does not exist\"\n\"Cookie Domain\",\"Cookie Domain\"\n\"Cookie Lifetime\",\"Cookie Lifetime\"\n\"Cookie Path\",\"Cookie Path\"\n\"Cookie Restriction Mode\",\"Cookie Restriction Mode\"\n\"Copyright\",\"Copyright\"\n\"Core\",\"Core\"\n\"Countries Options\",\"Countries Options\"\n\"Country\",\"Country\"\n\"Create Store\",\"Create Store\"\n\"Create Store View\",\"Create Store View\"\n\"Create Website\",\"Create Website\"\n\"Credit card number does not match credit card type.\",\"Credit card number does not match credit card type.\"\n\"Cron Expression for Cache Flushing\",\"Cron Expression for Cache Flushing\"\n\"Current Package Name\",\"Current Package Name\"\n\"Custom Admin Path\",\"Custom Admin Path\"\n\"Custom Admin URL\",\"Custom Admin URL\"\n\"Custom Design\",\"Custom Design\"\n\"Custom Email 1\",\"Custom Email 1\"\n\"Custom Email 2\",\"Custom Email 2\"\n\"Custom Variables\",\"Custom Variables\"\n\"Custom1 Contact Email\",\"Custom1 Contact Email\"\n\"Custom1 Contact Name\",\"Custom1 Contact Name\"\n\"Custom2 Contact Email\",\"Custom2 Contact Email\"\n\"Custom2 Contact Name\",\"Custom2 Contact Name\"\n\"Customer Support\",\"Customer Support\"\n\"Dashboard\",\"Dashboard\"\n\"Date From\",\"Date From\"\n\"Date To\",\"Date To\"\n\"Date/time format \"\"%s\"\" is not supported.\",\"Date/time format \"\"%s\"\" is not supported.\"\n\"Debug\",\"Debug\"\n\"Default\",\"Default\"\n\"Default Country\",\"Default Country\"\n\"Default Description\",\"Default Description\"\n\"Default Keywords\",\"Default Keywords\"\n\"Default No-route URL\",\"Default No-route URL\"\n\"Default Pages\",\"Default Pages\"\n\"Default Robots\",\"Default Robots\"\n\"Default Store\",\"Default Store\"\n\"Default Store View\",\"Default Store View\"\n\"Default Title\",\"Default Title\"\n\"Default Web URL\",\"Default Web URL\"\n\"Delete\",\"Delete\"\n\"Delete Store\",\"Delete Store\"\n\"Delete Store View\",\"Delete Store View\"\n\"Delete Website\",\"Delete Website\"\n\"Deleting a %1$s will not delete the information associated with the %1$s (e.g. categories, products, etc.), but the %1$s will not be able to be restored. It is suggested that you create a database backup before deleting the %1$s.\",\"Deleting a %1$s will not delete the information associated with the %1$s (e.g. categories, products, etc.), but the %1$s will not be able to be restored. It is suggested that you create a database backup before deleting the %1$s.\"\n\"Design\",\"Design\"\n\"Design Change\",\"Design Change\"\n\"Developer\",\"Developer\"\n\"Developer Client Restrictions\",\"Developer Client Restrictions\"\n\"Disable Email Communications\",\"Disable Email Communications\"\n\"Disable Modules Output\",\"Disable Modules Output\"\n\"Disallowed block name for frontend.\",\"Disallowed block name for frontend.\"\n\"Disallowed template variable method.\",\"Disallowed template variable method.\"\n\"Display Demo Store Notice\",\"Display Demo Store Notice\"\n\"Duplicate Of Template Name\",\"Duplicate Of Template Name\"\n\"Edit Design Change\",\"Edit Design Change\"\n\"Edit Store\",\"Edit Store\"\n\"Edit Store View\",\"Edit Store View\"\n\"Edit Website\",\"Edit Website\"\n\"Email - Footer\",\"Email - Footer\"\n\"Email - Header\",\"Email - Header\"\n\"Email Footer Template\",\"Email Footer Template\"\n\"Email Header Template\",\"Email Header Template\"\n\"Empty identifier field name\",\"Empty identifier field name\"\n\"Empty main table name\",\"Empty main table name\"\n\"Enable Charts\",\"Enable Charts\"\n\"Enabled\",\"Enabled\"\n\"Enabled for Admin\",\"Enabled for Admin\"\n\"Enabled for Frontend\",\"Enabled for Frontend\"\n\"Enabling ability to run Magento in a frame is not recommended for security reasons.\",\"Enabling ability to run Magento in a frame is not recommended for security reasons.\"\n\"Enabling this setting increases risk of automated attacks against admin functionality.\",\"Enabling this setting increases risk of automated attacks against admin functionality.\"\n\"Environment Update Time\",\"Environment Update Time\"\n\"Error in file: \"\"%s\"\" - %s\",\"Error in file: \"\"%s\"\" - %s\"\n\"European Union Countries\",\"European Union Countries\"\n\"Exceptions Log File Name\",\"Exceptions Log File Name\"\n\"Favicon Icon\",\"Favicon Icon\"\n\"File %s does not exist\",\"File %s does not exist\"\n\"File %s is not readable\",\"File %s is not readable\"\n\"File name is too long. Maximum length is %s.\",\"File name is too long. Maximum length is %s.\"\n\"File not found\",\"File not found\"\n\"File system\",\"File system\"\n\"File with an extension \"\"%value%\"\" is protected and cannot be uploaded\",\"File with an extension \"\"%value%\"\" is protected and cannot be uploaded\"\n\"First Day of Week\",\"First Day of Week\"\n\"Flush Cache Storage\",\"Flush Cache Storage\"\n\"Flush OpenMage Cache\",\"Flush OpenMage Cache\"\n\"Footer\",\"Footer\"\n\"Forgot Password Email Sender\",\"Forgot Password Email Sender\"\n\"Forgot Password Email Template\",\"Forgot Password Email Template\"\n\"General\",\"General\"\n\"General Contact\",\"General Contact\"\n\"General Contact Email\",\"General Contact Email\"\n\"General Contact Name\",\"General Contact Name\"\n\"General Settings\",\"General Settings\"\n\"Get info about current Magento installation\",\"Get info about current Magento installation\"\n\"Global\",\"Global\"\n\"HTML Head\",\"HTML Head\"\n\"HTML filtration has failed.\",\"HTML filtration has failed.\"\n\"HTML tags are not allowed\",\"HTML tags are not allowed\"\n\"Header\",\"Header\"\n\"Helper attributes should not be used in custom layout updates.\",\"Helper attributes should not be used in custom layout updates.\"\n\"Host\",\"Host\"\n\"How many links to display at once.\",\"How many links to display at once.\"\n\"ID Path for Specified Store\",\"ID Path for Specified Store\"\n\"If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.\",\"If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.\"\n\"Image Reprocess Quality\",\"Image Reprocess Quality\"\n\"Incorrect credit card expiration date.\",\"Incorrect credit card expiration date.\"\n\"Input type \"\"%value%\"\" not found in the input types list.\",\"Input type \"\"%value%\"\" not found in the input types list.\"\n\"Invalid MIME type.\",\"Invalid MIME type.\"\n\"Invalid URL '%value%'.\",\"Invalid URL '%value%'.\"\n\"Invalid URL scheme.\",\"Invalid URL scheme.\"\n\"Invalid base url type\",\"Invalid base url type\"\n\"Invalid block type: %s\",\"Invalid block type: %s\"\n\"Invalid block: %s\",\"Invalid block: %s\"\n\"Invalid connection\",\"Invalid connection\"\n\"Invalid date\",\"Invalid date\"\n\"Invalid image.\",\"Invalid image.\"\n\"Invalid layout update handle\",\"Invalid layout update handle\"\n\"Invalid messages storage \"\"%s\"\" for layout messages initialization\",\"Invalid messages storage \"\"%s\"\" for layout messages initialization\"\n\"Invalid query\",\"Invalid query\"\n\"Invalid stream.\",\"Invalid stream.\"\n\"Invalid template path used in layout update.\",\"Invalid template path used in layout update.\"\n\"Invalid transactional email code: %s\",\"Invalid transactional email code: %s\"\n\"Invalid website's configuration path: %s\",\"Invalid website's configuration path: %s\"\n\"JavaScript Settings\",\"JavaScript Settings\"\n\"Layout\",\"Layout\"\n\"Leave empty for access from any location.\",\"Leave empty for access from any location.\"\n\"List of stores\",\"List of stores\"\n\"Locale\",\"Locale\"\n\"Locale Options\",\"Locale Options\"\n\"Log Settings\",\"Log Settings\"\n\"Logging from Mage::log(). File is located in {{base_dir}}/var/log\",\"Logging from Mage::log(). File is located in {{base_dir}}/var/log\"\n\"Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\",\"Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\"\n\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log\",\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log\"\n\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\",\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\"\n\"Login is Case Sensitive\",\"Login is Case Sensitive\"\n\"Logo Image\",\"Logo Image\"\n\"Logo Image Alt\",\"Logo Image Alt\"\n\"Logo Image Src\",\"Logo Image Src\"\n\"Magento info\",\"Magento info\"\n\"Magento info API\",\"Magento info API\"\n\"Mail Sending Settings\",\"Mail Sending Settings\"\n\"Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/\",\"Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/\"\n\"Manage Stores\",\"Manage Stores\"\n\"Match expressions in the same order as displayed in the configuration.\",\"Match expressions in the same order as displayed in the configuration.\"\n\"Maximum Log Level\",\"Maximum Log Level\"\n\"Media Storage\",\"Media Storage\"\n\"Merge CSS Files\",\"Merge CSS Files\"\n\"Merge JavaScript Files\",\"Merge JavaScript Files\"\n\"Message recipients data must be set.\",\"Message recipients data must be set.\"\n\"Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.\",\"Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.\"\n\"Miscellaneous HTML\",\"Miscellaneous HTML\"\n\"Miscellaneous Scripts\",\"Miscellaneous Scripts\"\n\"Model collection resource name is not defined.\",\"Model collection resource name is not defined.\"\n\"Module \"\"%1$s\"\" cannot depend on \"\"%2$s\"\".\",\"Module \"\"%1$s\"\" cannot depend on \"\"%2$s\"\".\"\n\"Module \"\"%1$s\"\" requires module \"\"%2$s\"\".\",\"Module \"\"%1$s\"\" requires module \"\"%2$s\"\".\"\n\"Name\",\"Name\"\n\"New Admin User Create Notification\",\"New Admin User Create Notification\"\n\"New Admin User Email Template\",\"New Admin User Email Template\"\n\"New Design Change\",\"New Design Change\"\n\"New Store\",\"New Store\"\n\"New Store View\",\"New Store View\"\n\"New Website\",\"New Website\"\n\"No\",\"No\"\n\"Offloader header\",\"Offloader header\"\n\"The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.\",\"The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.\"\n\"PHP SOAP extension is required.\",\"PHP SOAP extension is required.\"\n\"Package\",\"Package\"\n\"Pagination\",\"Pagination\"\n\"Pagination Frame\",\"Pagination Frame\"\n\"Pagination Frame Skip\",\"Pagination Frame Skip\"\n\"Parent directory does not exist: %s\",\"Parent directory does not exist: %s\"\n\"Path \"\"%value%\"\" is not available and cannot be used.\",\"Path \"\"%value%\"\" is not available and cannot be used.\"\n\"Path \"\"%value%\"\" is protected and cannot be used.\",\"Path \"\"%value%\"\" is protected and cannot be used.\"\n\"Path \"\"%value%\"\" may not include parent directory traversal (\"\"../\"\", \"\"..\\\\).\"\"\",\"Path \"\"%value%\"\" may not include parent directory traversal (\"\"../\"\", \"\"..\\\\).\"\"\"\n\"Please define flag code.\",\"Please define flag code.\"\n\"Please do not use \"\"event\"\" for an attribute code.\",\"Please do not use \"\"event\"\" for an attribute code.\"\n\"Please do not use event\"\" for an attribute code.\"\"\",\"Please do not use event\"\" for an attribute code.\"\"\"\n\"Please enter 6 or more characters without leading or trailing spaces.\",\"Please enter 6 or more characters without leading or trailing spaces.\"\n\"Please enter 7 or more characters. Password should contain both numeric and alphabetic characters.\",\"Please enter 7 or more characters. Password should contain both numeric and alphabetic characters.\"\n\"Please enter a number 0 or greater in this field.\",\"Please enter a number 0 or greater in this field.\"\n\"Please enter a number 1 or greater in this field.\",\"Please enter a number 1 or greater in this field.\"\n\"Please enter a number greater than 0 in this field.\",\"Please enter a number greater than 0 in this field.\"\n\"Please enter a number lower than 100.\",\"Please enter a number lower than 100.\"\n\"Please enter a valid $ amount. For example $100.00.\",\"Please enter a valid $ amount. For example $100.00.\"\n\"Please enter a valid URL Key. For example \"\"example-page\"\", \"\"example-page.html\"\" or \"\"anotherlevel/example-page\"\".\",\"Please enter a valid URL Key. For example \"\"example-page\"\", \"\"example-page.html\"\" or \"\"anotherlevel/example-page\"\".\"\n\"Please enter a valid URL. For example http://www.example.com or www.example.com\",\"Please enter a valid URL. For example http://www.example.com or www.example.com\"\n\"Please enter a valid URL. Protocol is required (http://, https:// or ftp://)\",\"Please enter a valid URL. Protocol is required (http://, https:// or ftp://)\"\n\"Please enter a valid XML-identifier. For example something_1, block5, id-4.\",\"Please enter a valid XML-identifier. For example something_1, block5, id-4.\"\n\"Please enter a valid credit card number.\",\"Please enter a valid credit card number.\"\n\"Please enter a valid credit card verification number.\",\"Please enter a valid credit card verification number.\"\n\"Please enter a valid date between %s and %s\",\"Please enter a valid date between %s and %s\"\n\"Please enter a valid date equal to or greater than %s\",\"Please enter a valid date equal to or greater than %s\"\n\"Please enter a valid date less than or equal to %s\",\"Please enter a valid date less than or equal to %s\"\n\"Please enter a valid date.\",\"Please enter a valid date.\"\n\"Please enter a valid day (1-%d).\",\"Please enter a valid day (1-%d).\"\n\"Please enter a valid email address. For example johndoe@domain.com.\",\"Please enter a valid email address. For example johndoe@domain.com.\"\n\"Please enter a valid fax number. For example (123) 456-7890 or 123-456-7890.\",\"Please enter a valid fax number. For example (123) 456-7890 or 123-456-7890.\"\n\"Please enter a valid full date\",\"Please enter a valid full date\"\n\"Please enter a valid month (1-12).\",\"Please enter a valid month (1-12).\"\n\"Please enter a valid number in this field.\",\"Please enter a valid number in this field.\"\n\"Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.\",\"Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.\"\n\"Please enter a valid social security number. For example 123-45-6789.\",\"Please enter a valid social security number. For example 123-45-6789.\"\n\"Please enter a valid year (1900-%d).\",\"Please enter a valid year (1900-%d).\"\n\"Please enter a valid zip code.\",\"Please enter a valid zip code.\"\n\"Please enter a valid zip code. For example 90602 or 90602-1234.\",\"Please enter a valid zip code. For example 90602 or 90602-1234.\"\n\"Please enter issue number or start date for switch/solo card type.\",\"Please enter issue number or start date for switch/solo card type.\"\n\"Please enter more characters or clean leading or trailing spaces.\",\"Please enter more characters or clean leading or trailing spaces.\"\n\"Please enter more characters. Password should contain both numeric and alphabetic characters.\",\"Please enter more characters. Password should contain both numeric and alphabetic characters.\"\n\"Please input a valid CSS-length. For example 100px or 77pt or 20em or .5ex or 50%.\",\"Please input a valid CSS-length. For example 100px or 77pt or 20em or .5ex or 50%.\"\n\"Please make sure your passwords match.\",\"Please make sure your passwords match.\"\n\"Please select State/Province.\",\"Please select State/Province.\"\n\"Please select a file\",\"Please select a file\"\n\"Please select an option.\",\"Please select an option.\"\n\"Please select one of the above options.\",\"Please select one of the above options.\"\n\"Please select one of the options.\",\"Please select one of the options.\"\n\"Please set available and/or protected paths list(s) before validation.\",\"Please set available and/or protected paths list(s) before validation.\"\n\"Please specify either a category or a product, or both.\",\"Please specify either a category or a product, or both.\"\n\"Please use letters only (a-z or A-Z) in this field.\",\"Please use letters only (a-z or A-Z) in this field.\"\n\"Please use numbers only in this field. Please avoid spaces or other characters such as dots or commas.\",\"Please use numbers only in this field. Please avoid spaces or other characters such as dots or commas.\"\n\"Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.\",\"Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.\"\n\"Please use only letters (a-z or A-Z) or numbers (0-9) or spaces and # only in this field.\",\"Please use only letters (a-z or A-Z) or numbers (0-9) or spaces and # only in this field.\"\n\"Please use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\",\"Please use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\"\n\"Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\",\"Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\"\n\"Please use only visible characters and spaces.\",\"Please use only visible characters and spaces.\"\n\"Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.\",\"Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.\"\n\"Please wait, loading...\",\"Please wait, loading...\"\n\"Polls\",\"Polls\"\n\"Port (25)\",\"Port (25)\"\n\"Profiler\",\"Profiler\"\n\"Recovery Link Expiration Period (days)\",\"Recovery Link Expiration Period (days)\"\n\"Recovery Link Expiration Period (hours)\",\"Recovery Link Expiration Period (hours)\"\n\"Request Path for Specified Store\",\"Request Path for Specified Store\"\n\"Request path length exceeds allowed %s symbols.\",\"Request path length exceeds allowed %s symbols.\"\n\"Requested file may not include parent directory traversal (\"\"../\"\", \"\"..\\\\ notation)\"\"\",\"Requested file may not include parent directory traversal (\"\"../\"\", \"\"..\\\\ notation)\"\"\"\n\"Requested invalid store \"\"%s\"\"\",\"Requested invalid store \"\"%s\"\"\"\n\"Resource \"\"%s\"\" is not found.\",\"Resource \"\"%s\"\" is not found.\"\n\"Resource is not set.\",\"Resource is not set.\"\n\"Retrieve info about current Magento installation\",\"Retrieve info about current Magento installation\"\n\"Retrieve store data\",\"Retrieve store data\"\n\"Retrieve store list\",\"Retrieve store list\"\n\"Return-Path Email\",\"Return-Path Email\"\n\"Root Category\",\"Root Category\"\n\"Sales Representative\",\"Sales Representative\"\n\"Sales Representative Contact Email\",\"Sales Representative Contact Email\"\n\"Sales Representative Contact Name\",\"Sales Representative Contact Name\"\n\"Save\",\"Save\"\n\"Save Store\",\"Save Store\"\n\"Save Store View\",\"Save Store View\"\n\"Save Website\",\"Save Website\"\n\"Search Engines Optimization\",\"Search Engines Optimization\"\n\"Secure\",\"Secure\"\n\"Security\",\"Security\"\n\"Select Date\",\"Select Date\"\n\"Select Media Database\",\"Select Media Database\"\n\"Sender Email\",\"Sender Email\"\n\"Sender Name\",\"Sender Name\"\n\"Services\",\"Services\"\n\"Session Cookie Management\",\"Session Cookie Management\"\n\"Session Lifetime (seconds)\",\"Session Lifetime (seconds)\"\n\"Session Validation Settings\",\"Session Validation Settings\"\n\"Set Return-Path\",\"Set Return-Path\"\n\"Set as Default\",\"Set as Default\"\n\"Skin (Images / CSS)\",\"Skin (Images / CSS)\"\n\"Small Logo Image Src\",\"Small Logo Image Src\"\n\"Sort Order\",\"Sort Order\"\n\"Specified date/time \"\"%1$s\"\" do not match format \"\"%2$s\"\".\",\"Specified date/time \"\"%1$s\"\" do not match format \"\"%2$s\"\".\"\n\"Start date cannot be greater than end date.\",\"Start date cannot be greater than end date.\"\n\"Startup Page\",\"Startup Page\"\n\"Status\",\"Status\"\n\"Storage Configuration for Media\",\"Storage Configuration for Media\"\n\"Store\",\"Store\"\n\"Store API\",\"Store API\"\n\"Store Contact Address\",\"Store Contact Address\"\n\"Store Contact Information\",\"Store Contact Information\"\n\"Store Contact Telephone\",\"Store Contact Telephone\"\n\"Store Email Addresses\",\"Store Email Addresses\"\n\"Store Hours of Operation\",\"Store Hours of Operation\"\n\"Store Information\",\"Store Information\"\n\"Store Name\",\"Store Name\"\n\"Store View\",\"Store View\"\n\"Store View Information\",\"Store View Information\"\n\"Store View Name\",\"Store View Name\"\n\"Store view doesn't exist\",\"Store view doesn't exist\"\n\"Store with the same code\",\"Store with the same code\"\n\"System\",\"System\"\n\"System Log File Name\",\"System Log File Name\"\n\"Template Path Hints\",\"Template Path Hints\"\n\"Template Settings\",\"Template Settings\"\n\"Template Variables\",\"Template Variables\"\n\"Templates\",\"Templates\"\n\"Text length does not satisfy specified text range.\",\"Text length does not satisfy specified text range.\"\n\"The %s you entered is invalid. Please make sure that it follows \"\"http://domain.com/\"\" format.\",\"The %s you entered is invalid. Please make sure that it follows \"\"http://domain.com/\"\" format.\"\n\"The From Date value should be less than or equal to the To Date value.\",\"The From Date value should be less than or equal to the To Date value.\"\n\"The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\",\"The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\"\n\"The store code may contain only letters (a-z), numbers (0-9), underscore(_) or dash(-), the first character must be a letter\",\"The store code may contain only letters (a-z), numbers (0-9), underscore(_) or dash(-), the first character must be a letter\"\n\"The store does not exist\",\"The store does not exist\"\n\"The store has been deleted.\",\"The store has been deleted.\"\n\"The store has been saved.\",\"The store has been saved.\"\n\"The store view has been deleted.\",\"The store view has been deleted.\"\n\"The store view has been saved\",\"The store view has been saved\"\n\"The template Name must not be empty.\",\"The template Name must not be empty.\"\n\"The value is not within the specified range.\",\"The value is not within the specified range.\"\n\"The website does not exist.\",\"The website does not exist.\"\n\"The website has been deleted.\",\"The website has been deleted.\"\n\"The website has been saved.\",\"The website has been saved.\"\n\"Themes\",\"Themes\"\n\"This category and all its child elements\",\"This category and all its child elements\"\n\"This category and its child categories only\",\"This category and its child categories only\"\n\"This category and its products only\",\"This category and its products only\"\n\"This category only\",\"This category only\"\n\"This date is a required value.\",\"This date is a required value.\"\n\"This is a required field.\",\"This is a required field.\"\n\"This setting enable notification when new admin user created.\",\"This setting enable notification when new admin user created.\"\n\"This store cannot be deleted.\",\"This store cannot be deleted.\"\n\"This store view cannot be deleted.\",\"This store view cannot be deleted.\"\n\"This website cannot be deleted.\",\"This website cannot be deleted.\"\n\"This will be displayed just before body closing tag.\",\"This will be displayed just before body closing tag.\"\n\"This will be included before head closing tag in page HTML.\",\"This will be included before head closing tag in page HTML.\"\n\"Timezone\",\"Timezone\"\n\"Title Prefix\",\"Title Prefix\"\n\"Title Suffix\",\"Title Suffix\"\n\"Transactional Emails\",\"Transactional Emails\"\n\"Translate Inline\",\"Translate Inline\"\n\"Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.\",\"Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.\"\n\"Translations\",\"Translations\"\n\"Two and more slashes together are not permitted in request path\",\"Two and more slashes together are not permitted in request path\"\n\"Two and more slashes together are not permitted in url rewrite suffix\",\"Two and more slashes together are not permitted in url rewrite suffix\"\n\"Unable to create directory: %s\",\"Unable to create directory: %s\"\n\"Unable to delete store view. Please, try again later.\",\"Unable to delete store view. Please, try again later.\"\n\"Unable to delete store. Please, try again later.\",\"Unable to delete store. Please, try again later.\"\n\"Unable to delete website. Please, try again later.\",\"Unable to delete website. Please, try again later.\"\n\"Unable to proceed. Please, try again\",\"Unable to proceed. Please, try again\"\n\"Unable to proceed. Please, try again.\",\"Unable to proceed. Please, try again.\"\n\"Unable to save file \"\"%s\"\" at \"\"%s\"\"\",\"Unable to save file \"\"%s\"\" at \"\"%s\"\"\"\n\"Unable to save file: %s\",\"Unable to save file: %s\"\n\"Unknown old style column type definition: {$definition}.\",\"Unknown old style column type definition: {$definition}.\"\n\"Unknown scope \"\"%s\"\".\",\"Unknown scope \"\"%s\"\".\"\n\"Unsecure\",\"Unsecure\"\n\"Url Options\",\"Url Options\"\n\"Use Custom Admin Path\",\"Use Custom Admin Path\"\n\"Use Custom Admin URL\",\"Use Custom Admin URL\"\n\"Use HTTP Only\",\"Use HTTP Only\"\n\"Same-Site\",\"Same-Site\"\n\"None\",\"None\"\n\"Strict\",\"Strict\"\n\"Lax\",\"Lax\"\n\"Use SID on Frontend\",\"Use SID on Frontend\"\n\"Use Secure URLs in Admin\",\"Use Secure URLs in Admin\"\n\"Use Secure URLs in Frontend\",\"Use Secure URLs in Frontend\"\n\"Use Web Server Rewrites\",\"Use Web Server Rewrites\"\n\"VAT Number\",\"VAT Number\"\n\"The default value is \"\"30 2 * * *\"\". An empty value disables automatic cache flushing.\",\"The default value is \"\"30 2 * * *\"\". An empty value disables automatic cache flushing.\"\n\"Validate HTTP_USER_AGENT\",\"Validate HTTP_USER_AGENT\"\n\"Validate HTTP_VIA\",\"Validate HTTP_VIA\"\n\"Validate HTTP_X_FORWARDED_FOR\",\"Validate HTTP_X_FORWARDED_FOR\"\n\"Validate REMOTE_ADDR\",\"Validate REMOTE_ADDR\"\n\"Validation has failed.\",\"Validation has failed.\"\n\"Values less than 60 are ignored. Note that changes will apply after logout.\",\"Values less than 60 are ignored. Note that changes will apply after logout.\"\n\"Variable Code must be unique.\",\"Variable Code must be unique.\"\n\"Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.\",\"Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.\"\n\"Web\",\"Web\"\n\"Website\",\"Website\"\n\"Website Information\",\"Website Information\"\n\"Website Name\",\"Website Name\"\n\"Website code may only contain letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\",\"Website code may only contain letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\"\n\"Website with the same code\",\"Website with the same code\"\n\"Weekend Days\",\"Weekend Days\"\n\"Welcome Text\",\"Welcome Text\"\n\"Wrong file info format\",\"Wrong file info format\"\n\"Wrong number of arguments for %s\",\"Wrong number of arguments for %s\"\n\"Wrong old style column type definition: {$definition}.\",\"Wrong old style column type definition: {$definition}.\"\n\"XML data is invalid.\",\"XML data is invalid.\"\n\"XML object is not instance of \"\"Varien_Simplexml_Element\"\".\",\"XML object is not instance of \"\"Varien_Simplexml_Element\"\".\"\n\"Yes\",\"Yes\"\n\"You will have to log in after you save your custom admin path.\",\"You will have to log in after you save your custom admin path.\"\n\"Your design change for the specified store intersects with another one, please specify another date range.\",\"Your design change for the specified store intersects with another one, please specify another date range.\"\n\"database \"\"%s\"\"\",\"database \"\"%s\"\"\"\n\"System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).\",\"System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).\"\n\"Admin\",\"Admin\"\n\"Frontend\",\"Frontend\"\n\"The store view #%d is disabled.\",\"The store view #%d is disabled.\"\n\"Loading Indicator Timeout\",\"Loading Indicator Timeout\"\n\"Number of milliseconds to delay showing the loading indicator. The default value is \"\"200\"\". An empty value disables the delay.\",\"Number of milliseconds to delay showing the loading indicator. The default value is \"\"200\"\". An empty value disables the delay.\"\n"], "fixing_code": ["<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2016-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Core data helper\n *\n * @category   Mage\n * @package    Mage_Core\n */\nclass Mage_Core_Helper_Data extends Mage_Core_Helper_Abstract\n{\n    public const XML_PATH_DEFAULT_COUNTRY              = 'general/country/default';\n    public const XML_PATH_PROTECTED_FILE_EXTENSIONS    = 'general/file/protected_extensions';\n    public const XML_PATH_PUBLIC_FILES_VALID_PATHS     = 'general/file/public_files_valid_paths';\n    public const XML_PATH_ENCRYPTION_MODEL             = 'global/helpers/core/encryption_model';\n    public const XML_PATH_DEV_ALLOW_IPS                = 'dev/restrict/allow_ips';\n    public const XML_PATH_CACHE_BETA_TYPES             = 'global/cache/betatypes';\n    public const XML_PATH_CONNECTION_TYPE              = 'global/resources/default_setup/connection/type';\n\n    public const CHARS_LOWERS                          = 'abcdefghijklmnopqrstuvwxyz';\n    public const CHARS_UPPERS                          = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    public const CHARS_DIGITS                          = '0123456789';\n    public const CHARS_SPECIALS                        = '!$*+-.=?@^_|~';\n    public const CHARS_PASSWORD_LOWERS                 = 'abcdefghjkmnpqrstuvwxyz';\n    public const CHARS_PASSWORD_UPPERS                 = 'ABCDEFGHJKLMNPQRSTUVWXYZ';\n    public const CHARS_PASSWORD_DIGITS                 = '23456789';\n    public const CHARS_PASSWORD_SPECIALS               = '!$*-.=?@_';\n\n    /**\n     * Config pathes to merchant country code and merchant VAT number\n     */\n    public const XML_PATH_MERCHANT_COUNTRY_CODE = 'general/store_information/merchant_country';\n    public const XML_PATH_MERCHANT_VAT_NUMBER = 'general/store_information/merchant_vat_number';\n    public const XML_PATH_EU_COUNTRIES_LIST = 'general/country/eu_countries';\n\n    /**\n     * Const for correct dividing decimal values\n     */\n    public const DIVIDE_EPSILON = 10000;\n\n    protected $_moduleName = 'Mage_Core';\n\n    /**\n     * @var Mage_Core_Model_Encryption\n     */\n    protected $_encryptor = null;\n\n    protected $_allowedFormats = [\n        Mage_Core_Model_Locale::FORMAT_TYPE_FULL,\n        Mage_Core_Model_Locale::FORMAT_TYPE_LONG,\n        Mage_Core_Model_Locale::FORMAT_TYPE_MEDIUM,\n        Mage_Core_Model_Locale::FORMAT_TYPE_SHORT\n    ];\n\n    /**\n     * @return Mage_Core_Model_Encryption\n     */\n    public function getEncryptor()\n    {\n        if ($this->_encryptor === null) {\n            $encryptionModel = (string)Mage::getConfig()->getNode(self::XML_PATH_ENCRYPTION_MODEL);\n            if ($encryptionModel) {\n                $this->_encryptor = new $encryptionModel();\n            } else {\n                $this->_encryptor = Mage::getModel('core/encryption');\n            }\n\n            $this->_encryptor->setHelper($this);\n        }\n        return $this->_encryptor;\n    }\n\n    /**\n     * Convert and format price value for current application store\n     *\n     * @param   float $value\n     * @param   bool $format\n     * @param   bool $includeContainer\n     * @return  mixed\n     */\n    public static function currency($value, $format = true, $includeContainer = true)\n    {\n        return self::currencyByStore($value, null, $format, $includeContainer);\n    }\n\n    /**\n     * Convert and format price value for specified store\n     *\n     * @param   float $value\n     * @param   int|Mage_Core_Model_Store $store\n     * @param   bool $format\n     * @param   bool $includeContainer\n     * @return  mixed\n     */\n    public static function currencyByStore($value, $store = null, $format = true, $includeContainer = true)\n    {\n        try {\n            if (!($store instanceof Mage_Core_Model_Store)) {\n                $store = Mage::app()->getStore($store);\n            }\n\n            $value = $store->convertPrice($value, $format, $includeContainer);\n        } catch (Exception $e) {\n            $value = $e->getMessage();\n        }\n\n        return $value;\n    }\n\n    /**\n     * Format and convert currency using current store option\n     *\n     * @param   float $value\n     * @param   bool $includeContainer\n     * @return  string\n     */\n    public function formatCurrency($value, $includeContainer = true)\n    {\n        return self::currency($value, true, $includeContainer);\n    }\n\n    /**\n     * Formats price\n     *\n     * @param float $price\n     * @param bool $includeContainer\n     * @return string\n     */\n    public function formatPrice($price, $includeContainer = true)\n    {\n        return Mage::app()->getStore()->formatPrice($price, $includeContainer);\n    }\n\n    /**\n     * Format date using current locale options and time zone.\n     *\n     * @param   string|Zend_Date|null $date If empty, return current datetime.\n     * @param   string              $format   See Mage_Core_Model_Locale::FORMAT_TYPE_* constants\n     * @param   bool                $showTime Whether to include time\n     * @param   bool                $useTimezone Convert to local datetime?\n     * @return  string\n     */\n    public function formatDate($date = null, $format = Mage_Core_Model_Locale::FORMAT_TYPE_SHORT, $showTime = false, $useTimezone = true)\n    {\n        if (!in_array($format, $this->_allowedFormats, true)) {\n            return $date;\n        }\n        if (empty($date)) {\n            $date = Mage::app()->getLocale()->date(Mage::getSingleton('core/date')->gmtTimestamp(), null, null, $useTimezone);\n        } elseif (is_int($date)) {\n            $date = Mage::app()->getLocale()->date($date, null, null, $useTimezone);\n        } elseif (!$date instanceof Zend_Date) {\n            if ($time = strtotime($date)) {\n                $date = Mage::app()->getLocale()->date($time, null, null, $useTimezone);\n            } else {\n                return '';\n            }\n        }\n\n        $format = $showTime\n            ? Mage::app()->getLocale()->getDateTimeFormat($format)\n            : Mage::app()->getLocale()->getDateFormat($format);\n\n        return $date->toString($format);\n    }\n\n    /**\n     * Format time using current locale options\n     *\n     * @param   string|Zend_Date|null $time\n     * @param   string              $format\n     * @param   bool                $showDate\n     * @return  string\n     */\n    public function formatTime($time = null, $format = Mage_Core_Model_Locale::FORMAT_TYPE_SHORT, $showDate = false)\n    {\n        if (!in_array($format, $this->_allowedFormats, true)) {\n            return $time;\n        }\n\n        if (is_null($time)) {\n            $date = Mage::app()->getLocale()->date(time());\n        } elseif ($time instanceof Zend_Date) {\n            $date = $time;\n        } else {\n            $date = Mage::app()->getLocale()->date(strtotime($time));\n        }\n\n        if ($showDate) {\n            $format = Mage::app()->getLocale()->getDateTimeFormat($format);\n        } else {\n            $format = Mage::app()->getLocale()->getTimeFormat($format);\n        }\n\n        return $date->toString($format);\n    }\n\n    /**\n     * Encrypt data using application key\n     *\n     * @param   string $data\n     * @return  string\n     */\n    public function encrypt($data)\n    {\n        if (!Mage::isInstalled()) {\n            return $data;\n        }\n        return $this->getEncryptor()->encrypt($data);\n    }\n\n    /**\n     * Decrypt data using application key\n     *\n     * @param   string $data\n     * @return  string\n     */\n    public function decrypt($data)\n    {\n        if (!Mage::isInstalled()) {\n            return $data;\n        }\n        return $this->getEncryptor()->decrypt($data);\n    }\n\n    /**\n     * @param string $key\n     * @return Varien_Crypt_Mcrypt\n     */\n    public function validateKey($key)\n    {\n        return $this->getEncryptor()->validateKey($key);\n    }\n\n    /**\n     * @param int $len\n     * @param string|null $chars\n     * @return string\n     */\n    public function getRandomString($len, $chars = null)\n    {\n        if (is_null($chars)) {\n            $chars = self::CHARS_LOWERS . self::CHARS_UPPERS . self::CHARS_DIGITS;\n        }\n        for ($i = 0, $str = '', $lc = strlen($chars) - 1; $i < $len; $i++) {\n            $str .= $chars[random_int(0, $lc)];\n        }\n        return $str;\n    }\n\n    /**\n     * Generate salted hash from password\n     *\n     * @param string $password\n     * @param string|int|bool $salt\n     * @return string\n     */\n    public function getHash($password, $salt = false)\n    {\n        return $this->getEncryptor()->getHash($password, $salt);\n    }\n\n    /**\n     * Generate password hash for user\n     *\n     * @param string $password\n     * @param mixed $salt\n     * @return string\n     */\n    public function getHashPassword($password, $salt = false)\n    {\n        $encryptionModel = $this->getEncryptor();\n        $latestVersionHash = $this->getVersionHash($encryptionModel);\n        if ($latestVersionHash == $encryptionModel::HASH_VERSION_SHA512) {\n            return $this->getEncryptor()->getHashPassword($password, $salt);\n        }\n        return $this->getEncryptor()->getHashPassword($password, Mage_Admin_Model_User::HASH_SALT_EMPTY);\n    }\n\n    /**\n     * @param string $password\n     * @param string $hash\n     * @return bool\n     * @throws Exception\n     */\n    public function validateHash($password, $hash)\n    {\n        return $this->getEncryptor()->validateHash($password, $hash);\n    }\n\n    /**\n     * Get encryption method depending on the presence of the function - password_hash.\n     *\n     * @param Mage_Core_Model_Encryption $encryptionModel\n     * @return int\n     */\n    public function getVersionHash(Mage_Core_Model_Encryption $encryptionModel)\n    {\n        return function_exists('password_hash')\n            ? $encryptionModel::HASH_VERSION_LATEST\n            : $encryptionModel::HASH_VERSION_SHA512;\n    }\n\n    /**\n     * Retrieve store identifier\n     *\n     * @param   mixed $store\n     * @return  int\n     */\n    public function getStoreId($store = null)\n    {\n        return Mage::app()->getStore($store)->getId();\n    }\n\n    /**\n     * @param string $string\n     * @param bool $german\n     * @return false|string\n     *\n     * @SuppressWarnings(PHPMD.ErrorControlOperator)\n     */\n    public function removeAccents($string, $german = false)\n    {\n        static $replacements;\n\n        if (empty($replacements[$german])) {\n            $subst = [\n                // single ISO-8859-1 letters\n                192 => 'A', 193 => 'A', 194 => 'A', 195 => 'A', 196 => 'A', 197 => 'A', 199 => 'C',\n                208 => 'D', 200 => 'E', 201 => 'E', 202 => 'E', 203 => 'E', 204 => 'I', 205 => 'I',\n                206 => 'I', 207 => 'I', 209 => 'N', 210 => 'O', 211 => 'O', 212 => 'O', 213 => 'O',\n                214 => 'O', 216 => 'O', 138 => 'S', 217 => 'U', 218 => 'U', 219 => 'U', 220 => 'U',\n                221 => 'Y', 142 => 'Z', 224 => 'a', 225 => 'a', 226 => 'a', 227 => 'a', 228 => 'a',\n                229 => 'a', 231 => 'c', 232 => 'e', 233 => 'e', 234 => 'e', 235 => 'e', 236 => 'i',\n                237 => 'i', 238 => 'i', 239 => 'i', 241 => 'n', 240 => 'o', 242 => 'o', 243 => 'o',\n                244 => 'o', 245 => 'o', 246 => 'o', 248 => 'o', 154 => 's', 249 => 'u', 250 => 'u',\n                251 => 'u', 252 => 'u', 253 => 'y', 255 => 'y', 158 => 'z',\n                // HTML entities\n                258 => 'A', 260 => 'A', 262 => 'C', 268 => 'C', 270 => 'D', 272 => 'D', 280 => 'E',\n                282 => 'E', 286 => 'G', 304 => 'I', 313 => 'L', 317 => 'L', 321 => 'L', 323 => 'N',\n                327 => 'N', 336 => 'O', 340 => 'R', 344 => 'R', 346 => 'S', 350 => 'S', 354 => 'T',\n                356 => 'T', 366 => 'U', 368 => 'U', 377 => 'Z', 379 => 'Z', 259 => 'a', 261 => 'a',\n                263 => 'c', 269 => 'c', 271 => 'd', 273 => 'd', 281 => 'e', 283 => 'e', 287 => 'g',\n                305 => 'i', 322 => 'l', 314 => 'l', 318 => 'l', 324 => 'n', 328 => 'n', 337 => 'o',\n                341 => 'r', 345 => 'r', 347 => 's', 351 => 's', 357 => 't', 355 => 't', 367 => 'u',\n                369 => 'u', 378 => 'z', 380 => 'z',\n                // ligatures\n                198 => 'Ae', 230 => 'ae', 140 => 'Oe', 156 => 'oe', 223 => 'ss',\n            ];\n\n            if ($german) {\n                // umlauts\n                $subst = [\n                    196 => 'Ae', 228 => 'ae', 214 => 'Oe', 246 => 'oe', 220 => 'Ue', 252 => 'ue'\n                    ] + $subst;\n            }\n\n            $replacements[$german] = [];\n            foreach ($subst as $k => $v) {\n                $replacements[$german][$k < 256 ? chr($k) : '&#' . $k . ';'] = $v;\n            }\n        }\n\n        // convert string from default database format (UTF-8)\n        // to encoding which replacement arrays made with (ISO-8859-1)\n        if ($s = @iconv('UTF-8', 'ISO-8859-1', $string)) {\n            $string = $s;\n        }\n\n        // Replace\n        $string = strtr($string, $replacements[$german]);\n\n        return $string;\n    }\n\n    /**\n     * @param null|string|bool|int|Mage_Core_Model_Store $storeId\n     * @return bool\n     */\n    public function isDevAllowed($storeId = null)\n    {\n        $allow = true;\n\n        $allowedIps = Mage::getStoreConfig(self::XML_PATH_DEV_ALLOW_IPS, $storeId);\n        $remoteAddr = Mage::helper('core/http')->getRemoteAddr();\n        if (!empty($allowedIps) && !empty($remoteAddr)) {\n            $allowedIps = preg_split('#\\s*,\\s*#', $allowedIps, -1, PREG_SPLIT_NO_EMPTY);\n            if (!in_array($remoteAddr, $allowedIps)\n                && !in_array(Mage::helper('core/http')->getHttpHost(), $allowedIps)\n            ) {\n                $allow = false;\n            }\n        }\n\n        return $allow;\n    }\n\n    /**\n     * Get information about available cache types\n     *\n     * @return array\n     */\n    public function getCacheTypes()\n    {\n        $types = [];\n        $config = Mage::getConfig()->getNode(Mage_Core_Model_Cache::XML_PATH_TYPES);\n        foreach ($config->children() as $type => $node) {\n            $types[$type] = (string)$node->label;\n        }\n        return $types;\n    }\n\n    /**\n     * Get information about available cache beta types\n     *\n     * @return array\n     */\n    public function getCacheBetaTypes()\n    {\n        $types = [];\n        $config = Mage::getConfig()->getNode(self::XML_PATH_CACHE_BETA_TYPES);\n        if ($config) {\n            foreach ($config->children() as $type => $node) {\n                $types[$type] = (string)$node->label;\n            }\n        }\n        return $types;\n    }\n\n    /**\n     * Copy data from object|array to object|array containing fields\n     * from fieldset matching an aspect.\n     *\n     * Contents of $aspect are a field name in target object or array.\n     * If '*' - will be used the same name as in the source object or array.\n     *\n     * @param string $fieldset\n     * @param string $aspect\n     * @param array|Varien_Object $source\n     * @param array|Varien_Object $target\n     * @param string $root\n     * @return bool\n     */\n    public function copyFieldset($fieldset, $aspect, $source, $target, $root = 'global')\n    {\n        if (!(is_array($source) || $source instanceof Varien_Object)\n            || !(is_array($target) || $target instanceof Varien_Object)\n        ) {\n            return false;\n        }\n        $fields = Mage::getConfig()->getFieldset($fieldset, $root);\n        if (!$fields) {\n            return false;\n        }\n\n        $sourceIsArray = is_array($source);\n        $targetIsArray = is_array($target);\n\n        $result = false;\n        foreach ($fields as $code => $node) {\n            if (empty($node->$aspect)) {\n                continue;\n            }\n\n            if ($sourceIsArray) {\n                $value = $source[$code] ?? null;\n            } else {\n                $value = $source->getDataUsingMethod($code);\n            }\n\n            $targetCode = (string)$node->$aspect;\n            $targetCode = $targetCode == '*' ? $code : $targetCode;\n\n            if ($targetIsArray) {\n                $target[$targetCode] = $value;\n            } else {\n                $target->setDataUsingMethod($targetCode, $value);\n            }\n\n            $result = true;\n        }\n\n        $eventName = sprintf('core_copy_fieldset_%s_%s', $fieldset, $aspect);\n        Mage::dispatchEvent($eventName, [\n            'target' => $target,\n            'source' => $source,\n            'root'   => $root\n        ]);\n\n        return $result;\n    }\n\n    /**\n     * Decorate a plain array of arrays or objects\n     * The array actually can be an object with Iterator interface\n     *\n     * Keys with prefix_* will be set:\n     * *_is_first - if the element is first\n     * *_is_odd / *_is_even - for odd/even elements\n     * *_is_last - if the element is last\n     *\n     * The respective key/attribute will be set to element, depending on object it is or array.\n     * Varien_Object is supported.\n     *\n     * $forceSetAll true will cause to set all possible values for all elements.\n     * When false (default), only non-empty values will be set.\n     *\n     * @param Varien_Object[] $array\n     * @param string $prefix\n     * @param bool $forceSetAll\n     * @return mixed\n     */\n    public function decorateArray($array, $prefix = 'decorated_', $forceSetAll = false)\n    {\n        // check if array or an object to be iterated given\n        if (!(is_array($array) || is_object($array))) {\n            return $array;\n        }\n\n        $keyIsFirst = \"{$prefix}is_first\";\n        $keyIsOdd   = \"{$prefix}is_odd\";\n        $keyIsEven  = \"{$prefix}is_even\";\n        $keyIsLast  = \"{$prefix}is_last\";\n\n        $count  = count($array); // this will force Iterator to load\n        $i      = 0;\n        $isEven = false;\n        foreach ($array as $key => $element) {\n            if (is_object($element)) {\n                $this->_decorateArrayObject($element, $keyIsFirst, ($i === 0), $forceSetAll || ($i === 0));\n                $this->_decorateArrayObject($element, $keyIsOdd, !$isEven, $forceSetAll || !$isEven);\n                $this->_decorateArrayObject($element, $keyIsEven, $isEven, $forceSetAll || $isEven);\n                $isEven = !$isEven;\n                $i++;\n                $this->_decorateArrayObject($element, $keyIsLast, ($i === $count), $forceSetAll || ($i === $count));\n            } elseif (is_array($element)) {\n                if ($forceSetAll || ($i === 0)) {\n                    $array[$key][$keyIsFirst] = ($i === 0);\n                }\n                if ($forceSetAll || !$isEven) {\n                    $array[$key][$keyIsOdd] = !$isEven;\n                }\n                if ($forceSetAll || $isEven) {\n                    $array[$key][$keyIsEven] = $isEven;\n                }\n                $isEven = !$isEven;\n                $i++;\n                if ($forceSetAll || ($i === $count)) {\n                    $array[$key][$keyIsLast] = ($i === $count);\n                }\n            }\n        }\n\n        return $array;\n    }\n\n    /**\n     * @param Varien_Object $element\n     * @param string $key\n     * @param mixed $value\n     * @param bool $dontSkip\n     */\n    private function _decorateArrayObject($element, $key, $value, $dontSkip)\n    {\n        if ($dontSkip) {\n            if ($element instanceof Varien_Object) {\n                $element->setData($key, $value);\n            } else {\n                $element->$key = $value;\n            }\n        }\n    }\n\n    /**\n     * Transform an assoc array to SimpleXMLElement object\n     * Array has some limitations. Appropriate exceptions will be thrown\n     *\n     * @param array $array\n     * @param string $rootName\n     * @return SimpleXMLElement\n     * @throws Exception\n     */\n    public function assocToXml(array $array, $rootName = '_')\n    {\n        if (empty($rootName) || is_numeric($rootName)) {\n            throw new Exception('Root element must not be empty or numeric');\n        }\n\n        $xmlstr = <<<XML\n<?xml version='1.0' encoding='UTF-8' standalone='yes'?>\n<$rootName></$rootName>\nXML;\n        $xml = new SimpleXMLElement($xmlstr);\n        foreach ($array as $key => $value) {\n            if (is_numeric($key)) {\n                throw new Exception('Array root keys must not be numeric.');\n            }\n        }\n        return self::_assocToXml($array, $rootName, $xml);\n    }\n\n    /**\n     * Function, that actually recursively transforms array to xml\n     *\n     * @param array $array\n     * @param string $rootName\n     * @param SimpleXMLElement $xml\n     * @return SimpleXMLElement\n     * @throws Exception\n     */\n    private function _assocToXml(array $array, $rootName, SimpleXMLElement &$xml)\n    {\n        $hasNumericKey = false;\n        $hasStringKey  = false;\n        foreach ($array as $key => $value) {\n            if (!is_array($value)) {\n                if (is_string($key)) {\n                    if ($key === $rootName) {\n                        throw new Exception('Associative key must not be the same as its parent associative key.');\n                    }\n                    $hasStringKey = true;\n                    $xml->$key = $value;\n                } elseif (is_int($key)) {\n                    $hasNumericKey = true;\n                    $xml->{$rootName}[$key] = $value;\n                }\n            } else {\n                self::_assocToXml($value, $key, $xml->$key);\n            }\n        }\n        if ($hasNumericKey && $hasStringKey) {\n            throw new Exception('Associative and numeric keys must not be mixed at one level.');\n        }\n        return $xml;\n    }\n\n    /**\n     * Transform SimpleXMLElement to associative array\n     * SimpleXMLElement must be conform structure, generated by assocToXml()\n     *\n     * @param SimpleXMLElement $xml\n     * @return array\n     */\n    public function xmlToAssoc(SimpleXMLElement $xml)\n    {\n        $array = [];\n        foreach ($xml as $key => $value) {\n            if (isset($value->$key)) {\n                $i = 0;\n                foreach ($value->$key as $v) {\n                    $array[$key][$i++] = (string)$v;\n                }\n            } else {\n                // try to transform it into string value, trimming spaces between elements\n                $array[$key] = trim((string)$value);\n                if (empty($array[$key]) && !empty($value)) {\n                    $array[$key] = self::xmlToAssoc($value);\n                } else { // untrim strings values\n                    $array[$key] = (string)$value;\n                }\n            }\n        }\n        return $array;\n    }\n\n    /**\n     * Encode the mixed $valueToEncode into the JSON format\n     *\n     * @param mixed $valueToEncode\n     * @param bool $cycleCheck Optional; whether or not to check for object recursion; off by default\n     * @param  array $options Additional options used during encoding\n     * @return string\n     */\n    public function jsonEncode($valueToEncode, $cycleCheck = false, $options = [])\n    {\n        $json = Zend_Json::encode($valueToEncode, $cycleCheck, $options);\n        /** @var Mage_Core_Model_Translate_Inline $inline */\n        $inline = Mage::getSingleton('core/translate_inline');\n        if ($inline->isAllowed()) {\n            $inline->setIsJson(true);\n            $inline->processResponseBody($json);\n            $inline->setIsJson(false);\n        }\n\n        return $json;\n    }\n\n    /**\n     * Decodes the given $encodedValue string which is\n     * encoded in the JSON format\n     *\n     * switch added to prevent exceptions in json_decode\n     *\n     * @param string $encodedValue\n     * @param int $objectDecodeType\n     * @return mixed\n     * @throws Zend_Json_Exception\n     */\n    public function jsonDecode($encodedValue, $objectDecodeType = Zend_Json::TYPE_ARRAY)\n    {\n        switch (true) {\n            case ($encodedValue === null):\n                $encodedValue = 'null';\n                break;\n            case ($encodedValue === true):\n                $encodedValue = 'true';\n                break;\n            case ($encodedValue === false):\n                $encodedValue = 'false';\n                break;\n            case ($encodedValue === ''):\n                $encodedValue = '\"\"';\n                break;\n            default:\n                // do nothing\n        }\n\n        return Zend_Json::decode($encodedValue, $objectDecodeType);\n    }\n\n    /**\n     * Generate a hash from unique ID\n     * @param string $prefix\n     * @return string\n     */\n    public function uniqHash($prefix = '')\n    {\n        return $prefix . md5(uniqid(microtime() . mt_rand(), true));\n    }\n\n    /**\n     * Merge specified files into one\n     *\n     * By default will not merge, if there is already merged file exists and it\n     * was modified after its components\n     * If target file is specified, will attempt to write merged contents into it,\n     * otherwise will return merged content\n     * May apply callback to each file contents. Callback gets parameters:\n     * (<existing system filename>, <file contents>)\n     * May filter files by specified extension(s)\n     * Returns false on error\n     *\n     * @param array $srcFiles\n     * @param string|false $targetFile - file path to be written\n     * @param bool $mustMerge\n     * @param callable $beforeMergeCallback\n     * @param array|string $extensionsFilter\n     * @return bool|string\n     *\n     * @SuppressWarnings(PHPMD.ErrorControlOperator)\n     */\n    public function mergeFiles(\n        array $srcFiles,\n        $targetFile = false,\n        $mustMerge = false,\n        $beforeMergeCallback = null,\n        $extensionsFilter = []\n    ) {\n        try {\n            // check whether merger is required\n            $shouldMerge = $mustMerge || !$targetFile;\n            if (!$shouldMerge) {\n                if (!file_exists($targetFile)) {\n                    $shouldMerge = true;\n                } else {\n                    $targetMtime = filemtime($targetFile);\n                    foreach ($srcFiles as $file) {\n                        if (!file_exists($file)) {\n                            // no translation intentionally\n                            Mage::logException(new Exception(sprintf('File %s not found.', $file)));\n                        } elseif (@filemtime($file) > $targetMtime) {\n                            $shouldMerge = true;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            // merge contents into the file\n            if ($shouldMerge) {\n                if ($targetFile && !is_writable(dirname($targetFile))) {\n                    // no translation intentionally\n                    throw new Exception(sprintf('Path %s is not writeable.', dirname($targetFile)));\n                }\n\n                // filter by extensions\n                if ($extensionsFilter) {\n                    if (!is_array($extensionsFilter)) {\n                        $extensionsFilter = [$extensionsFilter];\n                    }\n                    if (!empty($srcFiles)) {\n                        foreach ($srcFiles as $key => $file) {\n                            $fileExt = strtolower(pathinfo($file, PATHINFO_EXTENSION));\n                            if (!in_array($fileExt, $extensionsFilter)) {\n                                unset($srcFiles[$key]);\n                            }\n                        }\n                    }\n                }\n                if (empty($srcFiles)) {\n                    // no translation intentionally\n                    throw new Exception('No files to compile.');\n                }\n\n                $data = '';\n                foreach ($srcFiles as $file) {\n                    if (!file_exists($file)) {\n                        continue;\n                    }\n                    $contents = file_get_contents($file) . \"\\n\";\n                    if ($beforeMergeCallback && is_callable($beforeMergeCallback)) {\n                        $contents = call_user_func($beforeMergeCallback, $file, $contents);\n                    }\n                    $data .= $contents;\n                }\n                if (!$data) {\n                    // no translation intentionally\n                    throw new Exception(sprintf(\"No content found in files:\\n%s\", implode(\"\\n\", $srcFiles)));\n                }\n                if ($targetFile) {\n                    file_put_contents($targetFile, $data, LOCK_EX);\n                } else {\n                    return $data; // no need to write to file, just return data\n                }\n            }\n\n            return true; // no need in merger or merged into file successfully\n        } catch (Exception $e) {\n            Mage::logException($e);\n        }\n        return false;\n    }\n\n    /**\n     * Return default country code\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return string\n     */\n    public function getDefaultCountry($store = null)\n    {\n        return Mage::getStoreConfig(self::XML_PATH_DEFAULT_COUNTRY, $store);\n    }\n\n    /**\n     * Return list with protected file extensions\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return array\n     */\n    public function getProtectedFileExtensions($store = null)\n    {\n        return Mage::getStoreConfig(self::XML_PATH_PROTECTED_FILE_EXTENSIONS, $store);\n    }\n\n    /**\n     * Return list with public files valid paths\n     *\n     * @return array\n     */\n    public function getPublicFilesValidPath()\n    {\n        return Mage::getStoreConfig(self::XML_PATH_PUBLIC_FILES_VALID_PATHS);\n    }\n\n    /**\n     * Check LFI protection\n     *\n     * @throws Mage_Core_Exception\n     * @param string $name\n     * @return bool\n     */\n    public function checkLfiProtection($name)\n    {\n        if (preg_match('#\\.\\.[\\\\\\/]#', $name)) {\n            throw new Mage_Core_Exception($this->__('Requested file may not include parent directory traversal (\"../\", \"..\\\\\" notation)'));\n        }\n        return true;\n    }\n\n    /**\n     * Check whether database compatible mode is used (configs enable it for MySQL by default).\n     *\n     * @return bool\n     */\n    public function useDbCompatibleMode()\n    {\n        $connType = (string) Mage::getConfig()->getNode(self::XML_PATH_CONNECTION_TYPE);\n        $path = 'global/resource/connection/types/' . $connType . '/compatibleMode';\n        $value = (string) Mage::getConfig()->getNode($path);\n        return (bool) $value;\n    }\n\n    /**\n     * Retrieve merchant country code\n     *\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return string\n     */\n    public function getMerchantCountryCode($store = null)\n    {\n        return (string) Mage::getStoreConfig(self::XML_PATH_MERCHANT_COUNTRY_CODE, $store);\n    }\n\n    /**\n     * Retrieve merchant VAT number\n     *\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return string\n     */\n    public function getMerchantVatNumber($store = null)\n    {\n        return (string) Mage::getStoreConfig(self::XML_PATH_MERCHANT_VAT_NUMBER, $store);\n    }\n\n    /**\n     * Check whether specified country is in EU countries list\n     *\n     * @param string $countryCode\n     * @param null|int $storeId\n     * @return bool\n     */\n    public function isCountryInEU($countryCode, $storeId = null)\n    {\n        $euCountries = explode(',', Mage::getStoreConfig(self::XML_PATH_EU_COUNTRIES_LIST, $storeId));\n        return in_array($countryCode, $euCountries);\n    }\n\n    /**\n     * Returns the floating point remainder (modulo) of the division of the arguments\n     *\n     * @param float|int $dividend\n     * @param float|int $divisor\n     * @return float|int\n     */\n    public function getExactDivision($dividend, $divisor)\n    {\n        $epsilon = $divisor / self::DIVIDE_EPSILON;\n\n        $remainder = fmod($dividend, $divisor);\n        if (abs($remainder - $divisor) < $epsilon || abs($remainder) < $epsilon) {\n            $remainder = 0;\n        }\n\n        return $remainder;\n    }\n\n    /**\n     * Escaping CSV-data\n     *\n     * Security enchancement for CSV data processing by Excel-like applications.\n     * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1054702\n     *\n     * @param array $data\n     * @return array\n     */\n    public function getEscapedCSVData(array $data)\n    {\n        if (Mage::getStoreConfigFlag(Mage_ImportExport_Model_Export_Adapter_Csv::CONFIG_ESCAPING_FLAG)) {\n            foreach ($data as $key => $value) {\n                $value = (string)$value;\n\n                $firstLetter = substr($value, 0, 1);\n                if ($firstLetter && in_array($firstLetter, ['=', '+', '-'])) {\n                    $data[$key] = ' ' . $value;\n                }\n            }\n        }\n        return $data;\n    }\n\n    /**\n     * UnEscapes CSV data\n     *\n     * @param mixed $data\n     * @return mixed array\n     */\n    public function unEscapeCSVData($data)\n    {\n        if (is_array($data) && Mage::getStoreConfigFlag(Mage_ImportExport_Model_Export_Adapter_Csv::CONFIG_ESCAPING_FLAG)) {\n            foreach ($data as $key => $value) {\n                $value = (string)$value;\n\n                if (preg_match(\"/^ [=\\-+]/\", $value)) {\n                    $data[$key] = ltrim($value);\n                }\n            }\n        }\n        return $data;\n    }\n\n    /**\n     * @param bool $setErrorMessage Adds a predefined error message to the 'core/session' object\n     * @return bool\n     */\n    public function isRateLimitExceeded($setErrorMessage = true, $recordRateLimitHit = true): bool\n    {\n        $active = Mage::getStoreConfigFlag('system/rate_limit/active');\n        if ($active && $remoteAddr = Mage::helper('core/http')->getRemoteAddr()) {\n            $cacheTag = 'rate_limit_' . $remoteAddr;\n            if (Mage::app()->testCache($cacheTag)) {\n                $errorMessage = \"Too Soon: You are trying to perform this operation too frequently. Please wait a few seconds and try again.\";\n                Mage::getSingleton('core/session')->addError($this->__($errorMessage));\n                return true;\n            }\n\n            if ($recordRateLimitHit) {\n                $this->recordRateLimitHit();\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * @return void\n     */\n    public function recordRateLimitHit(): void\n    {\n        $active = Mage::getStoreConfigFlag('system/rate_limit/active');\n        if ($active && $remoteAddr = Mage::helper('core/http')->getRemoteAddr()) {\n            $cacheTag = 'rate_limit_' . $remoteAddr;\n            Mage::app()->saveCache(1, $cacheTag, ['brute_force'], Mage::getStoreConfig('system/rate_limit/timeframe'));\n        }\n    }\n}\n", "<?xml version=\"1.0\"?>\n<!--\n/**\n * OpenMage\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available at https://opensource.org/license/afl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2017-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)\n */\n-->\n<config>\n    <modules>\n        <Mage_Core>\n            <version>1.6.0.10</version>\n        </Mage_Core>\n    </modules>\n    <global>\n        <models>\n            <core_resource>\n                <entities>\n                    <website>\n                        <table>core_website</table>\n                    </website>\n                    <store_group>\n                        <table>core_store_group</table>\n                    </store_group>\n                    <store>\n                        <table>core_store</table>\n                    </store>\n                    <config_field>\n                        <table>core_config_field</table>\n                    </config_field>\n                    <config_data>\n                        <table>core_config_data</table>\n                    </config_data>\n                    <email_template>\n                        <table>core_email_template</table>\n                    </email_template>\n                    <variable>\n                        <table>core_variable</table>\n                    </variable>\n                    <variable_value>\n                        <table>core_variable_value</table>\n                    </variable_value>\n                    <translate>\n                        <table>core_translate</table>\n                    </translate>\n                    <session>\n                        <table>core_session</table>\n                    </session>\n                    <layout_update>\n                        <table>core_layout_update</table>\n                    </layout_update>\n                    <layout_link>\n                        <table>core_layout_link</table>\n                    </layout_link>\n                    <url_rewrite>\n                        <table>core_url_rewrite</table>\n                    </url_rewrite>\n                    <url_rewrite_tag>\n                        <table>core_url_rewrite_tag</table>\n                    </url_rewrite_tag>\n                    <design_change>\n                        <table>design_change</table>\n                    </design_change>\n                    <flag>\n                        <table>core_flag</table>\n                    </flag>\n                    <email_queue>\n                        <table>core_email_queue</table>\n                    </email_queue>\n                    <email_recipients>\n                        <table>core_email_queue_recipients</table>\n                    </email_recipients>\n                    <file_storage><table>core_file_storage</table></file_storage>\n                    <directory_storage><table>core_directory_storage</table></directory_storage>\n                </entities>\n            </core_resource>\n        </models>\n        <blocks>\n            <core>\n                <class>Mage_Core_Block</class>\n            </core>\n        </blocks>\n        <helpers>\n            <core>\n                <encryption_model>Mage_Core_Model_Encryption</encryption_model>\n            </core>\n        </helpers>\n        <template>\n            <email>\n                <design_email_header translate=\"label\" module=\"core\">\n                    <label>Email - Header</label>\n                    <file>html/header.html</file>\n                    <type>text</type>\n                </design_email_header>\n                <design_email_footer translate=\"label\" module=\"core\">\n                    <label>Email - Footer</label>\n                    <file>html/footer.html</file>\n                    <type>text</type>\n                </design_email_footer>\n            </email>\n        </template>\n        <cache>\n            <types>\n                <config translate=\"label,description\" module=\"core\">\n                    <label>Configuration</label>\n                    <description>System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).</description>\n                    <tags>CONFIG</tags>\n                </config>\n                <layout translate=\"label,description\" module=\"core\">\n                    <label>Layouts</label>\n                    <description>Layout building instructions.</description>\n                    <tags>LAYOUT_GENERAL_CACHE_TAG</tags>\n                </layout>\n                <block_html translate=\"label,description\" module=\"core\">\n                    <label>Blocks HTML output</label>\n                    <description>Page blocks HTML.</description>\n                    <tags>BLOCK_HTML</tags>\n                </block_html>\n                <translate translate=\"label,description\" module=\"core\">\n                    <label>Translations</label>\n                    <description>Translation files.</description>\n                    <tags>TRANSLATE</tags>\n                </translate>\n                <collections translate=\"label,description\" module=\"core\">\n                    <label>Collections Data</label>\n                    <description>Collection data files.</description>\n                    <tags>COLLECTION_DATA</tags>\n                </collections>\n            </types>\n        </cache>\n        <session>\n            <validation>\n                <http_user_agent_skip>\n                    <flash>Shockwave Flash</flash>\n                    <flash_mac><![CDATA[Adobe Flash Player\\s{1,}\\w{1,10}]]></flash_mac>\n                </http_user_agent_skip>\n            </validation>\n        </session>\n        <request>\n            <direct_front_name/>\n        </request>\n        <log>\n            <core>\n                <writer_model>Zend_Log_Writer_Stream</writer_model>\n            </core>\n        </log>\n        <url_rewrite>\n            <model>core/url_rewrite</model>\n        </url_rewrite>\n        <request_rewrite>\n            <model>core/url_rewrite_request</model>\n        </request_rewrite>\n        <events>\n            <controller_action_predispatch>\n                <observers>\n                    <security_domain_policy>\n                        <class>Mage_Core_Model_Domainpolicy</class>\n                        <method>addDomainPolicyHeader</method>\n                    </security_domain_policy>\n                </observers>\n            </controller_action_predispatch>\n            <model_save_before>\n                <observers>\n                    <secure_var_processing>\n                        <class>core/observer</class>\n                        <method>secureVarProcessing</method>\n                    </secure_var_processing>\n                </observers>\n            </model_save_before>\n            <model_delete_before>\n                <observers>\n                    <secure_var_processing>\n                        <class>core/observer</class>\n                        <method>secureVarProcessing</method>\n                    </secure_var_processing>\n                </observers>\n            </model_delete_before>\n        </events>\n    </global>\n    <frontend>\n        <routers>\n            <core>\n                <use>standard</use>\n                <args>\n                    <module>Mage_Core</module>\n                    <frontName>core</frontName>\n                </args>\n            </core>\n        </routers>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n        <layout>\n            <updates>\n                <core>\n                    <file>core.xml</file>\n                </core>\n            </updates>\n        </layout>\n    </frontend>\n    <adminhtml>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n        <events>\n            <cms_wysiwyg_config_prepare>\n                <observers>\n                    <variable_observer>\n                        <class>core/variable_observer</class>\n                        <method>prepareWysiwygPluginConfig</method>\n                    </variable_observer>\n                </observers>\n            </cms_wysiwyg_config_prepare>\n            <controller_action_predispatch_adminhtml>\n                <observers>\n                    <synchronize_notification>\n                        <class>core/observer</class>\n                        <method>addSynchronizeNotification</method>\n                    </synchronize_notification>\n                </observers>\n            </controller_action_predispatch_adminhtml>\n            <show_synchronize_message>\n                <observers>\n                    <synchronize_notification>\n                        <class>core/observer</class>\n                        <method>addSynchronizeNotification</method>\n                    </synchronize_notification>\n                </observers>\n            </show_synchronize_message>\n            <clean_cache_by_tags>\n                <observers>\n                    <clean_cache_observer>\n                        <class>core/observer</class>\n                        <method>cleanCacheByTags</method>\n                    </clean_cache_observer>\n                </observers>\n            </clean_cache_by_tags>\n        </events>\n    </adminhtml>\n    <install>\n        <translate>\n            <modules>\n                <Mage_Core>\n                    <files>\n                        <default>Mage_Core.csv</default>\n                    </files>\n                </Mage_Core>\n            </modules>\n        </translate>\n    </install>\n    <default>\n        <design>\n            <package>\n                <area>frontend</area>\n                <default_theme>default</default_theme>\n                <name>rwd</name>\n                <theme>default</theme>\n                <translate>default</translate>\n            </package>\n            <pagination>\n                <list_allow_all>1</list_allow_all>\n                <pagination_frame>5</pagination_frame>\n            </pagination>\n            <email>\n                <css_non_inline>email-non-inline.css</css_non_inline>\n                <header>design_email_header</header>\n                <footer>design_email_footer</footer>\n            </email>\n        </design>\n        <dev>\n            <restrict>\n                <allow_ips/>\n            </restrict>\n            <debug>\n                <profiler>0</profiler>\n            </debug>\n            <translate_inline>\n                <active>0</active>\n                <active_admin>0</active_admin>\n                <invalid_caches>\n                    <block_html/>\n                </invalid_caches>\n            </translate_inline>\n            <log>\n                <active>0</active>\n                <max_level>7</max_level>\n                <file>system.log</file>\n                <exception_file>exception.log</exception_file>\n            </log>\n            <js>\n                <merge_files>0</merge_files>\n            </js>\n        </dev>\n        <system>\n            <csrf>\n                <use_form_key>1</use_form_key>\n            </csrf>\n            <rate_limit>\n                <active>1</active>\n                <timeframe>30</timeframe>\n            </rate_limit>\n            <cache>\n                <flush_cron_expr>30 2 * * *</flush_cron_expr>\n            </cache>\n            <smtp>\n                <disable>0</disable>\n                <host>localhost</host>\n                <port>25</port>\n            </smtp>\n            <media_storage_configuration>\n                <media_storage>0</media_storage>\n                <media_database>default_setup</media_database>\n                <configuration_update_time>3600</configuration_update_time>\n                <allowed_resources>\n                    <compiled_css_folder>css</compiled_css_folder>\n                    <compiled_css_secure_folder>css_secure</compiled_css_secure_folder>\n                    <compiled_js_folder>js</compiled_js_folder>\n                </allowed_resources>\n                <ignored_resources>.svn,.htaccess</ignored_resources>\n                <loaded_modules>\n                    <Mage_Core />\n                </loaded_modules>\n            </media_storage_configuration>\n        </system>\n        <trans_email>\n            <ident_custom1>\n                <email>custom1@example.com</email>\n                <name>Custom 1</name>\n            </ident_custom1>\n            <ident_custom2>\n                <email>custom2@example.com</email>\n                <name>Custom 2</name>\n            </ident_custom2>\n            <ident_general>\n                <email>owner@example.com</email>\n                <name>Owner</name>\n            </ident_general>\n            <ident_sales>\n                <email>sales@example.com</email>\n                <name>Sales</name>\n            </ident_sales>\n            <ident_support>\n                <email>support@example.com</email>\n                <name>CustomerSupport</name>\n            </ident_support>\n        </trans_email>\n        <web>\n            <routers>\n                <admin>\n                    <area>admin</area>\n                    <class>Mage_Core_Controller_Varien_Router_Admin</class>\n                </admin>\n                <standard>\n                    <area>frontend</area>\n                    <class>Mage_Core_Controller_Varien_Router_Standard</class>\n                </standard>\n            </routers>\n            <url>\n                <use_store>0</use_store>\n                <redirect_to_base>1</redirect_to_base>\n            </url>\n            <seo>\n                <use_rewrites>0</use_rewrites>\n            </seo>\n            <unsecure>\n                <base_url>{{base_url}}</base_url>\n                <base_web_url>{{unsecure_base_url}}</base_web_url>\n                <base_link_url>{{unsecure_base_url}}</base_link_url>\n                <base_js_url>{{unsecure_base_url}}js/</base_js_url>\n                <base_skin_url>{{unsecure_base_url}}skin/</base_skin_url>\n                <base_media_url>{{unsecure_base_url}}media/</base_media_url>\n            </unsecure>\n            <secure>\n                <base_url>{{base_url}}</base_url>\n                <base_web_url>{{secure_base_url}}</base_web_url>\n                <base_link_url>{{secure_base_url}}</base_link_url>\n                <base_js_url>{{secure_base_url}}js/</base_js_url>\n                <base_skin_url>{{secure_base_url}}skin/</base_skin_url>\n                <base_media_url>{{secure_base_url}}media/</base_media_url>\n                <use_in_frontend>0</use_in_frontend>\n                <use_in_adminhtml>0</use_in_adminhtml>\n                <offloader_header>SSL_OFFLOADED</offloader_header>\n            </secure>\n            <cookie>\n                <cookie_lifetime>3600</cookie_lifetime>\n                <cookie_httponly>1</cookie_httponly>\n                <cookie_samesite>None</cookie_samesite>\n                <cookie_restriction>0</cookie_restriction>\n                <cookie_restriction_lifetime>31536000</cookie_restriction_lifetime>\n            </cookie>\n            <session>\n                <use_remote_addr>0</use_remote_addr>\n                <use_http_via>0</use_http_via>\n                <use_http_x_forwarded_for>0</use_http_x_forwarded_for>\n                <use_http_user_agent>0</use_http_user_agent>\n                <use_frontend_sid>1</use_frontend_sid>\n                <use_admin_sid>0</use_admin_sid>\n            </session>\n            <browser_capabilities>\n                <cookies>1</cookies>\n                <javascript>1</javascript>\n            </browser_capabilities>\n        </web>\n        <admin>\n            <design>\n                <loading_timeout>200</loading_timeout>\n            </design>\n            <startup>\n                <page>dashboard</page>\n            </startup>\n            <url>\n                <use_custom>0</use_custom>\n                <custom/>\n            </url>\n            <security>\n                <use_form_key>1</use_form_key>\n                <domain_policy_backend>2</domain_policy_backend>\n                <domain_policy_frontend>2</domain_policy_frontend>\n                <extensions_compatibility_mode>1</extensions_compatibility_mode>\n                <session_cookie_lifetime>10800</session_cookie_lifetime>\n                <secure_system_configuration_save_disabled>0</secure_system_configuration_save_disabled>\n            </security>\n        </admin>\n        <general>\n            <country>\n                <eu_countries>AT,BE,BG,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LT,LU,MT,NL,PL,PT,RO,SK,SI,ES,SE,HR</eu_countries>\n            </country>\n            <locale>\n                <firstday>0</firstday>\n                <weekend>0,6</weekend>\n            </locale>\n            <file>\n                <protected_extensions>\n                    <!-- BOF PHP script file extensions -->\n                    <php>php</php>\n                    <php3>php3</php3>\n                    <php4>php4</php4>\n                    <php5>php5</php5>\n                    <php7>php7</php7>\n                    <!-- EOF PHP script file extensions -->\n                    <!-- File extension of configuration of an Apache Web server -->\n                    <htaccess>htaccess</htaccess>\n                    <!-- Java script file extension -->\n                    <jsp>jsp</jsp>\n                    <!-- Perl script file extension -->\n                    <pl>pl</pl>\n                    <!-- Python script file extension -->\n                    <py>py</py>\n                    <!-- Active Server Page script file extension -->\n                    <asp>asp</asp>\n                    <!-- UNIX command prompt file extension -->\n                    <sh>sh</sh>\n                    <!-- Common Gateway Interface script extension type -->\n                    <cgi>cgi</cgi>\n                    <!-- BOF HTML file extensions -->\n                    <htm>htm</htm>\n                    <html>html</html>\n                    <pht>pht</pht>\n                    <phtml>phtml</phtml>\n                    <shtml>shtml</shtml>\n                    <!-- EOF HTML file extensions -->\n                </protected_extensions>\n\n                <!-- Valid Paths to make public files -->\n                <public_files_valid_paths>\n                    <protected>\n                        <app>/app/*/*</app>\n                        <dev>/dev/*/*</dev>\n                        <errors>/errors/*/*</errors>\n                        <js>/js/*/*</js>\n                        <lib>/lib/*/*</lib>\n                        <shell>/shell/*/*</shell>\n                        <skin>/skin/*/*</skin>\n                    </protected>\n                </public_files_valid_paths>\n            </file>\n            <!-- Additional email for notifications -->\n            <additional_notification_emails>\n                <!-- On creating a new admin user. You can specify several emails separated by commas. -->\n                <admin_user_create></admin_user_create>\n            </additional_notification_emails>\n        </general>\n        <validators>\n            <custom_layout>\n                <disallowed_block>\n                    <Mage_Core_Block_Template_Zend/>\n                </disallowed_block>\n            </custom_layout>\n        </validators>\n    </default>\n    <stores>\n        <default>\n            <web>\n                <routers>\n                    <admin>\n                        <area>admin</area>\n                        <class>Mage_Core_Controller_Varien_Router_Admin</class>\n                    </admin>\n                    <standard>\n                        <area>frontend</area>\n                        <class>Mage_Core_Controller_Varien_Router_Standard</class>\n                    </standard>\n                </routers>\n            </web>\n        </default>\n    </stores>\n    <crontab>\n        <jobs>\n            <core_clean_cache>\n                <schedule>\n                    <config_path>system/cache/flush_cron_expr</config_path>\n                </schedule>\n                <run>\n                    <model>core/observer::cleanCache</model>\n                </run>\n            </core_clean_cache>\n            <core_email_queue_send_all>\n                <schedule><cron_expr>*/1 * * * *</cron_expr></schedule>\n                <run><model>core/email_queue::send</model></run>\n            </core_email_queue_send_all>\n            <core_email_queue_clean_up>\n                <schedule><cron_expr>0 0 * * *</cron_expr></schedule>\n                <run><model>core/email_queue::cleanQueue</model></run>\n            </core_email_queue_clean_up>\n        </jobs>\n    </crontab>\n</config>\n", "<?xml version=\"1.0\"?>\n<!--\n/**\n * OpenMage\n *\n * This source file is subject to the Academic Free License (AFL 3.0)\n * that is bundled with this package in the file LICENSE_AFL.txt.\n * It is also available at https://opensource.org/license/afl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Core\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2018-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)\n */\n-->\n<config>\n    <tabs>\n        <general translate=\"label\" module=\"core\">\n            <label>General</label>\n            <sort_order>100</sort_order>\n        </general>\n        <service translate=\"label\" module=\"core\">\n            <label>Services</label>\n            <sort_order>99999</sort_order>\n        </service>\n        <advanced translate=\"label\" module=\"core\">\n            <label>Advanced</label>\n            <sort_order>999999</sort_order>\n        </advanced>\n    </tabs>\n    <sections>\n        <system>\n            <groups>\n                <csrf translate=\"label\" module=\"core\">\n                    <label>CSRF protection</label>\n                    <sort_order>0</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_form_key translate=\"label\">\n                            <label>Enabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_form_key>\n                    </fields>\n                </csrf>\n                <rate_limit translate=\"label comment\" module=\"core\">\n                    <label>Rate limit</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <comment>This functionality limits the number of requests a user (identified by IP address) can perform within a specific time frame, preventing excessive resources usage and maintaining system performance, stability and security.</comment>\n                    <fields>\n                        <active translate=\"label\">\n                            <label>Enabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </active>\n                        <timeframe translate=\"label comment\">\n                            <label>Timeframe</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Number of seconds between each allowed request.</comment>\n                        </timeframe>\n                    </fields>\n                </rate_limit>\n                <cache translate=\"label\" module=\"core\">\n                    <label>Advanced Cache Settings</label>\n                    <sort_order>1000</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <flush_cron_expr translate=\"label comment\">\n                            <label>Cron Expression for Cache Flushing</label>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>The default value is \"30 2 * * *\". An empty value disables automatic cache flushing.</comment>\n                        </flush_cron_expr>\n                    </fields>\n                </cache>\n            </groups>\n        </system>\n        <advanced translate=\"label\" module=\"core\">\n            <label>Advanced</label>\n            <tab>advanced</tab>\n            <sort_order>910</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <modules_disable_output translate=\"label\">\n                    <label>Disable Modules Output</label>\n                    <frontend_model>adminhtml/system_config_form_fieldset_modules_disableOutput</frontend_model>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <dynamic_group>1</dynamic_group>\n                </modules_disable_output>\n            </groups>\n        </advanced>\n        <trans_email translate=\"label\" module=\"core\">\n            <class>separator-top</class>\n            <label>Store Email Addresses</label>\n            <tab>general</tab>\n            <sort_order>90</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <ident_custom1 translate=\"label\">\n                    <label>Custom Email 1</label>\n                    <sort_order>4</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_custom1>\n                <ident_custom2 translate=\"label\">\n                    <label>Custom Email 2</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_custom2>\n                <ident_general translate=\"label\">\n                    <label>General Contact</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_general>\n                <ident_sales translate=\"label\">\n                    <label>Sales Representative</label>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_sales>\n                <ident_support translate=\"label\">\n                    <label>Customer Support</label>\n                    <sort_order>3</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <email translate=\"label\">\n                            <label>Sender Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </email>\n                        <name translate=\"label\">\n                            <label>Sender Name</label>\n                            <backend_model>adminhtml/system_config_backend_email_sender</backend_model>\n                            <validate>validate-emailSender</validate>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                    </fields>\n                </ident_support>\n            </groups>\n        </trans_email>\n\n        <design translate=\"label\" module=\"core\">\n            <label>Design</label>\n            <tab>general</tab>\n            <sort_order>30</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <package translate=\"label\">\n                    <label>Package</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <name translate=\"label\">\n                            <label>Current Package Name</label>\n                            <backend_model>adminhtml/system_config_backend_design_package</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                        <ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Match expressions in the same order as displayed in the configuration.</comment>\n                        </ua_regexp>\n                    </fields>\n                </package>\n                <theme translate=\"label\">\n                    <label>Themes</label>\n                    <sort_order>2</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <locale translate=\"label\">\n                            <label>Translations</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </locale>\n                        <template translate=\"label\">\n                            <label>Templates</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template>\n                        <template_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Match expressions in the same order as displayed in the configuration.</comment>\n                        </template_ua_regexp>\n                        <skin translate=\"label\">\n                            <label>Skin (Images / CSS)</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </skin>\n                        <skin_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>35</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </skin_ua_regexp>\n                        <layout translate=\"label\">\n                            <label>Layout</label>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </layout>\n                        <layout_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>55</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </layout_ua_regexp>\n                        <default translate=\"label\">\n                            <label>Default</label>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                        <default_ua_regexp translate=\"comment\">\n                            <label></label>\n                            <frontend_model>adminhtml/system_config_form_field_regexceptions</frontend_model>\n                            <backend_model>adminhtml/system_config_backend_design_exception</backend_model>\n                            <sort_order>65</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default_ua_regexp>\n                    </fields>\n                </theme>\n                <pagination translate=\"label\">\n                    <label>Pagination</label>\n                    <sort_order>500</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <pagination_frame translate=\"label comment\">\n                            <label>Pagination Frame</label>\n                            <comment>How many links to display at once.</comment>\n                            <sort_order>7</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </pagination_frame>\n                        <pagination_frame_skip translate=\"label comment\">\n                            <label>Pagination Frame Skip</label>\n                            <comment>If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.</comment>\n                            <sort_order>8</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </pagination_frame_skip>\n                        <anchor_text_for_previous translate=\"label comment\">\n                            <label>Anchor Text for Previous</label>\n                            <comment>Alternative text for previous link in pagination menu. If empty, default arrow image will used.</comment>\n                            <sort_order>9</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </anchor_text_for_previous>\n                        <anchor_text_for_next translate=\"label comment\">\n                            <label>Anchor Text for Next</label>\n                            <comment>Alternative text for next link in pagination menu. If empty, default arrow image will used.</comment>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </anchor_text_for_next>\n                    </fields>\n                </pagination>\n                <email translate=\"label\">\n                    <label>Transactional Emails</label>\n                    <sort_order>510</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <logo translate=\"label\">\n                            <label>Logo Image</label>\n                            <comment>Allowed file types: jpg, jpeg, gif, png. To make logo look good on high-resolution displays, upload an image that is 2x normal size and then specify 1x dimensions in width/height fields below.</comment>\n                            <frontend_type>image</frontend_type>\n                            <backend_model>adminhtml/system_config_backend_email_logo</backend_model>\n                            <base_url type=\"media\" scope_info=\"1\">email/logo</base_url>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo>\n                        <logo_alt translate=\"label\">\n                            <label>Logo Image Alt</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_alt>\n                        <logo_width>\n                            <label>Logo Width</label>\n                            <comment>Only necessary if image has been uploaded above. Enter number of pixels, without appending \"px\".</comment>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_width>\n                        <logo_height>\n                            <label>Logo Height</label>\n                            <comment>Only necessary if image has been uploaded above. Enter number of pixels, without appending \"px\".</comment>\n                            <sort_order>27</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </logo_height>\n                        <header translate=\"label\">\n                            <label>Email Header Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </header>\n                        <footer translate=\"label\">\n                            <label>Email Footer Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </footer>\n                        <css_non_inline>\n                            <label>Non-inline CSS File(s)</label>\n                            <comment><![CDATA[Comma-delimited list of files that will be included inside &lt;style&gt; tag for all templates that include use the '{{var non_inline_styles}}' variable. File path is relative to skin/frontend/PACKAGE/THEME/css/]]></comment>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </css_non_inline>\n                    </fields>\n                </email>\n            </groups>\n        </design>\n        <dev translate=\"label\" module=\"core\">\n            <label>Developer</label>\n            <tab>advanced</tab>\n            <sort_order>920</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <restrict translate=\"label\">\n                    <label>Developer Client Restrictions</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <allow_ips translate=\"label comment\">\n                            <label>Allowed IPs (comma separated)</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Leave empty for access from any location.</comment>\n                        </allow_ips>\n                    </fields>\n                </restrict>\n                <debug translate=\"label\">\n                    <label>Debug</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <profiler translate=\"label\">\n                            <label>Profiler</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </profiler>\n                        <head_admin>\n                            <label>Admin</label>\n                            <frontend_model>adminhtml/system_config_form_field_heading</frontend_model>\n                            <sort_order>21</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </head_admin>\n                        <template_hints_admin translate=\"label\">\n                            <label>Template Path Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>22</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </template_hints_admin>\n                        <template_hints_blocks_admin translate=\"label\">\n                            <label>Add Block Names to Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>23</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </template_hints_blocks_admin>\n                        <head_front>\n                            <label>Frontend</label>\n                            <frontend_model>adminhtml/system_config_form_field_heading</frontend_model>\n                            <sort_order>31</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </head_front>\n                        <template_hints translate=\"label\">\n                            <label>Template Path Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>32</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template_hints>\n                        <template_hints_blocks translate=\"label\">\n                            <label>Add Block Names to Hints</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>33</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </template_hints_blocks>\n                    </fields>\n                </debug>\n                <template translate=\"label\">\n                    <label>Template Settings</label>\n                    <sort_order>25</sort_order>\n                    <show_in_default>0</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <allow_symlink translate=\"label comment\">\n                            <label>Allow Symlinks</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_symlink</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>0</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.</comment>\n                        </allow_symlink>\n                    </fields>\n                </template>\n                <translate_inline translate=\"label\">\n                    <label>Translate Inline</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <active translate=\"label\">\n                            <label>Enabled for Frontend</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_translate</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </active>\n                        <active_admin translate=\"label comment\">\n                            <label>Enabled for Admin</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_translate</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.</comment>\n                        </active_admin>\n                    </fields>\n                </translate_inline>\n                <log translate=\"label\">\n                    <label>Log Settings</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <active translate=\"label\">\n                            <label>Enabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </active>\n                        <max_level translate=\"label comment\">\n                            <label>Maximum Log Level</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_log_level</source_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.</comment>\n                        </max_level>\n                        <file translate=\"label comment\">\n                            <label>System Log File Name</label>\n                            <backend_model>adminhtml/system_config_backend_filename</backend_model>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv</comment>\n                        </file>\n                        <exception_file translate=\"label comment\">\n                            <label>Exceptions Log File Name</label>\n                            <backend_model>adminhtml/system_config_backend_filename</backend_model>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv</comment>\n                        </exception_file>\n                    </fields>\n                </log>\n                <js translate=\"label\">\n                    <label>JavaScript Settings</label>\n                    <sort_order>100</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <merge_files translate=\"label\">\n                            <label>Merge JavaScript Files</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </merge_files>\n                    </fields>\n                </js>\n                <css translate=\"label\">\n                    <label>CSS Settings</label>\n                    <sort_order>110</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <merge_css_files translate=\"label\">\n                            <label>Merge CSS Files</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </merge_css_files>\n                    </fields>\n                </css>\n            </groups>\n        </dev>\n        <general translate=\"label\" module=\"core\">\n            <label>General</label>\n            <tab>general</tab>\n            <sort_order>10</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <country translate=\"label\">\n                    <label>Countries Options</label>\n                    <sort_order>1</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <allow translate=\"label\">\n                            <label>Allow Countries</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </allow>\n                        <default translate=\"label\">\n                            <label>Default Country</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </default>\n                        <eu_countries translate=\"label\">\n                            <label>European Union Countries</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </eu_countries>\n                    </fields>\n                </country>\n                <locale translate=\"label\">\n                    <label>Locale Options</label>\n                    <sort_order>8</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <timezone translate=\"label\">\n                            <label>Timezone</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_timezone</source_model>\n                            <backend_model>adminhtml/system_config_backend_locale_timezone</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </timezone>\n                        <code translate=\"label\">\n                            <label>Locale</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale</source_model>\n                            <sort_order>5</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </code>\n                        <firstday translate=\"label\">\n                            <label>First Day of Week</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_weekdays</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </firstday>\n                        <weekend translate=\"label\">\n                            <label>Weekend Days</label>\n                            <frontend_type>multiselect</frontend_type>\n                            <source_model>adminhtml/system_config_source_locale_weekdays</source_model>\n                            <sort_order>15</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </weekend>\n                    </fields>\n                </locale>\n                <file>\n                    <label>File Settings</label>\n                    <show_in_default>0</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <protected_extensions>\n                            <backend_model>adminhtml/system_config_backend_protected</backend_model>\n                            <show_in_default>0</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </protected_extensions>\n                    </fields>\n                </file>\n                <store_information translate=\"label\">\n                    <label>Store Information</label>\n                    <sort_order>100</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <name translate=\"label\">\n                            <label>Store Name</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </name>\n                        <phone translate=\"label\">\n                            <label>Store Contact Telephone</label>\n                            <comment>If present, this will be included in all Transactional Emails</comment>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </phone>\n                        <hours translate=\"label\">\n                            <label>Store Hours of Operation</label>\n                            <comment>If present, this will be included in all Transactional Emails</comment>\n                            <sort_order>22</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </hours>\n                        <merchant_country translate=\"label\">\n                            <label>Country</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_country</source_model>\n                            <sort_order>25</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </merchant_country>\n                        <merchant_vat_number translate=\"label\">\n                            <label>VAT Number</label>\n                            <sort_order>27</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <can_be_empty>1</can_be_empty>\n                        </merchant_vat_number>\n                        <address translate=\"label\">\n                            <label>Store Contact Address</label>\n                            <frontend_type>textarea</frontend_type>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </address>\n                    </fields>\n                </store_information>\n            </groups>\n        </general>\n        <system translate=\"label\" module=\"core\">\n            <class>separator-top</class>\n            <label>System</label>\n            <tab>advanced</tab>\n            <sort_order>900</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <smtp translate=\"label\">\n                    <label>Mail Sending Settings</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <disable translate=\"label\">\n                            <label>Disable Email Communications</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </disable>\n                        <host translate=\"label\">\n                            <label>Host</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>For Windows server only.</comment>\n                        </host>\n                        <port translate=\"label\">\n                            <label>Port (25)</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>For Windows server only.</comment>\n                        </port>\n                        <!--\n                        <auth translate=\"label\">\n                            <label>Authentication method</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_smtpauth</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </auth>\n                        <username translate=\"label\">\n                            <label>Username</label>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </username>\n                        <password translate=\"label\">\n                            <label>Password</label>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </password>\n                        -->\n                        <set_return_path translate=\"label\">\n                            <label>Set Return-Path</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesnocustom</source_model>\n                            <sort_order>70</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </set_return_path>\n                        <return_path_email translate=\"label\">\n                            <label>Return-Path Email</label>\n                            <validate>validate-email</validate>\n                            <backend_model>adminhtml/system_config_backend_email_address</backend_model>\n                            <sort_order>80</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <depends><set_return_path>2</set_return_path></depends>\n                        </return_path_email>\n                    </fields>\n                </smtp>\n                <media_storage_configuration translate=\"label\" module=\"core\">\n                    <label>Storage Configuration for Media</label>\n                    <sort_order>900</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <media_storage translate=\"label\">\n                            <label>Media Storage</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_storage_media_storage</source_model>\n                            <sort_order>100</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </media_storage>\n                        <media_database translate=\"label\">\n                            <label>Select Media Database</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_storage_media_database</source_model>\n                            <backend_model>adminhtml/system_config_backend_storage_media_database</backend_model>\n                            <sort_order>200</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <depends><media_storage>1</media_storage></depends>\n                        </media_database>\n                        <synchronize translate=\"label comment\">\n                            <frontend_type>button</frontend_type>\n                            <frontend_model>adminhtml/system_config_system_storage_media_synchronize</frontend_model>\n                            <sort_order>300</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.</comment>\n                        </synchronize>\n                        <configuration_update_time translate=\"label\">\n                            <label>Environment Update Time</label>\n                            <sort_order>400</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </configuration_update_time>\n                    </fields>\n                </media_storage_configuration>\n            </groups>\n        </system>\n        <admin translate=\"label\" module=\"core\">\n            <label>Admin</label>\n            <tab>advanced</tab>\n            <sort_order>20</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>0</show_in_website>\n            <show_in_store>0</show_in_store>\n            <groups>\n                <design translate=\"label\">\n                    <label>Admin Theme</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_legacy_theme translate=\"label comment\">\n                            <label>Enable legacy Admin Theme</label>\n                            <comment>Use legacy theme from Magento CE</comment>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_legacy_theme>\n                        <loading_timeout translate=\"label comment\">\n                            <label>Loading Indicator Timeout</label>\n                            <comment>Number of milliseconds to delay showing the loading indicator. The default value is \"200\". An empty value disables the delay.</comment>\n                            <validate>validate-number validate-zero-or-greater</validate>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </loading_timeout>\n                    </fields>\n                </design>\n\n                <global_search>\n                    <label>Global Search</label>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <sort_order>6</sort_order>\n                    <fields>\n                        <enable translate=\"label\">\n                            <label>Enable global search</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </enable>\n                    </fields>\n                </global_search>\n\n                <emails translate=\"label\">\n                    <label>Admin User Emails</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <forgot_email_template translate=\"label\">\n                            <label>Forgot Password Email Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </forgot_email_template>\n                        <forgot_email_identity translate=\"label\">\n                            <label>Forgot Password Email Sender</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_identity</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </forgot_email_identity>\n                        <password_reset_link_expiration_period translate=\"label comment\">\n                            <label>Recovery Link Expiration Period (hours)</label>\n                            <comment>Please enter a number 1 or greater in this field.</comment>\n                            <validate>required-entry validate-digits validate-digits-range digits-range-1-</validate>\n                            <backend_model>adminhtml/system_config_backend_admin_password_link_expirationperiod</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </password_reset_link_expiration_period>\n                        <admin_notification_email_template translate=\"label\">\n                            <label>New Admin User Email Template</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_email_template</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </admin_notification_email_template>\n                    </fields>\n                </emails>\n                <startup translate=\"label\">\n                    <label>Startup Page</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <page translate=\"label\">\n                            <label>Startup Page</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_admin_page</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </page>\n                    </fields>\n                </startup>\n                <url translate=\"label\">\n                    <label>Admin Base URL</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_custom translate=\"label\">\n                            <label>Use Custom Admin URL</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usecustom</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_custom>\n                        <custom translate=\"label comment\">\n                            <label>Custom Admin URL</label>\n                            <backend_model>adminhtml/system_config_backend_admin_custom</backend_model>\n                            <depends><use_custom>1</use_custom></depends>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                        </custom>\n                        <use_custom_path translate=\"label\">\n                            <label>Use Custom Admin Path</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usecustompath</backend_model>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_custom_path>\n                        <custom_path translate=\"label comment\">\n                            <label>Custom Admin Path</label>\n                            <validate>required-entry validate-alphanum</validate>\n                            <backend_model>adminhtml/system_config_backend_admin_custompath</backend_model>\n                            <depends><use_custom_path>1</use_custom_path></depends>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>You will have to log in after you save your custom admin path.</comment>\n                        </custom_path>\n                    </fields>\n                </url>\n                <security translate=\"label\">\n                    <label>Security</label>\n                    <sort_order>35</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_form_key translate=\"label\">\n                            <label>Add Secret Key to URLs</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_admin_usesecretkey</backend_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_form_key>\n                        <use_case_sensitive_login translate=\"label\">\n                            <label>Login is Case Sensitive</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_case_sensitive_login>\n                        <session_cookie_lifetime translate=\"label comment\">\n                            <label>Session Lifetime (seconds)</label>\n                            <comment>Values less than 60 are ignored. Note that changes will apply after logout.</comment>\n                            <validate>validate-digits</validate>\n                            <sort_order>3</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </session_cookie_lifetime>\n                        <domain_policy_backend translate=\"label comment\">\n                            <label>Allow Magento Backend to run in frame</label>\n                            <frontend_type>select</frontend_type>\n                            <comment>Enabling ability to run Magento in a frame is not recommended for security reasons.</comment>\n                            <source_model>adminhtml/system_config_source_security_domainpolicy</source_model>\n                            <sort_order>4</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </domain_policy_backend>\n                        <domain_policy_frontend translate=\"label comment\">\n                            <label>Allow Magento Frontend to run in frame</label>\n                            <comment>Enabling ability to run Magento in a frame is not recommended for security reasons.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>5</sort_order>\n                            <source_model>adminhtml/system_config_source_security_domainpolicy</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </domain_policy_frontend>\n                        <extensions_compatibility_mode translate=\"label comment\">\n                            <label>Admin routing compatibility mode for extensions</label>\n                            <comment>Enabling this setting increases risk of automated attacks against admin functionality.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>6</sort_order>\n                            <source_model>adminhtml/system_config_source_enabledisable</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </extensions_compatibility_mode>\n                        <crate_admin_user_notification translate=\"label comment\">\n                            <label>New Admin User Create Notification</label>\n                            <comment>This setting enable notification when new admin user created.</comment>\n                            <frontend_type>select</frontend_type>\n                            <sort_order>10</sort_order>\n                            <source_model>adminhtml/system_config_source_enabledisable</source_model>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </crate_admin_user_notification>\n                        <reprocess_image_quality translate=\"label comment\">\n                            <label>Image Reprocess Quality</label>\n                            <comment>The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.</comment>\n                            <validate>validate-digits validate-digits-range digits-range-0-100</validate>\n                            <sort_order>180</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </reprocess_image_quality>\n                    </fields>\n                </security>\n                <dashboard translate=\"label\">\n                    <label>Dashboard</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>0</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <enable_charts translate=\"label\">\n                            <label>Enable Charts</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </enable_charts>\n                    </fields>\n                </dashboard>\n            </groups>\n        </admin>\n        <web translate=\"label\" module=\"core\">\n            <label>Web</label>\n            <tab>general</tab>\n            <sort_order>20</sort_order>\n            <show_in_default>1</show_in_default>\n            <show_in_website>1</show_in_website>\n            <show_in_store>1</show_in_store>\n            <groups>\n                <url translate=\"label\">\n                    <label>Url Options</label>\n                    <sort_order>3</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_store translate=\"label comment\">\n                            <label>Add Store Code to Urls</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_store</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).]]></comment>\n                        </use_store>\n                        <redirect_to_base translate=\"label\">\n                            <label>Auto-redirect to Base URL</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_web_redirect</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment>I.e. redirect from http://example.com/store/ to http://www.example.com/store/</comment>\n                        </redirect_to_base>\n                    </fields>\n                </url>\n                <seo translate=\"label\">\n                    <label>Search Engines Optimization</label>\n                    <sort_order>5</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <use_rewrites translate=\"label\">\n                            <label>Use Web Server Rewrites</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_rewrites>\n                    </fields>\n                </seo>\n                <unsecure translate=\"label\">\n                    <label>Unsecure</label>\n                    <sort_order>10</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <base_url translate=\"label\">\n                            <label>Base URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_url>\n                        <base_link_url translate=\"label\">\n                            <label>Base Link URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_link_url>\n                        <base_skin_url translate=\"label\">\n                            <label>Base Skin URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_skin_url>\n                        <base_media_url translate=\"label\">\n                            <label>Base Media URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_media_url>\n                        <base_js_url translate=\"label comment\">\n                            <label>Base JavaScript URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain]]></comment>\n                            <validate>required-entry</validate>\n                        </base_js_url>\n                    </fields>\n                </unsecure>\n                <secure translate=\"label\">\n                    <label>Secure</label>\n                    <sort_order>20</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <base_url translate=\"label comment\">\n                            <label>Base URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                            <validate>required-entry</validate>\n                        </base_url>\n                        <base_link_url translate=\"label comment\">\n                            <label>Base Link URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment>Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/</comment>\n                            <validate>required-entry</validate>\n                        </base_link_url>\n                        <base_skin_url translate=\"label\">\n                            <label>Base Skin URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_skin_url>\n                        <base_media_url translate=\"label\">\n                            <label>Base Media URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <validate>required-entry</validate>\n                        </base_media_url>\n                        <base_js_url translate=\"label comment\">\n                            <label>Base JavaScript URL</label>\n                            <backend_model>adminhtml/system_config_backend_baseurl</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                            <comment><![CDATA[<strong style=\"color:red\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain]]></comment>\n                            <validate>required-entry</validate>\n                        </base_js_url>\n                        <use_in_frontend translate=\"label\">\n                            <label>Use Secure URLs in Frontend</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_secure</backend_model>\n                            <sort_order>60</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </use_in_frontend>\n                        <use_in_adminhtml translate=\"label\">\n                            <label>Use Secure URLs in Admin</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_secure</backend_model>\n                            <sort_order>65</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_in_adminhtml>\n                        <offloader_header translate=\"label\">\n                            <label>Offloader header</label>\n                            <backend_model>adminhtml/system_config_backend_web_secure_offloaderheader</backend_model>\n                            <sort_order>75</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                            <comment><![CDATA[\n                                Provide the name of the request header set by the upstream proxy to indicate a secure connection.\n                                The header <code>X-Forwarded-Proto: https</code> is already checked by default regardless of this configuration option.\n                            ]]></comment>\n                        </offloader_header>\n                    </fields>\n                </secure>\n                <default translate=\"label\">\n                    <label>Default Pages</label>\n                    <sort_order>30</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <front translate=\"label\">\n                            <label>Default Web URL</label>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </front>\n                        <no_route translate=\"label\">\n                            <label>Default No-route URL</label>\n                            <sort_order>2</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </no_route>\n                    </fields>\n                </default>\n                <polls translate=\"label\">\n                    <label>Polls</label>\n                    <sort_order>40</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                </polls>\n                <cookie translate=\"label\">\n                    <label>Session Cookie Management</label>\n                    <sort_order>50</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <cookie_lifetime translate=\"label\">\n                            <label>Cookie Lifetime</label>\n                            <sort_order>10</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_lifetime>\n                        <cookie_path translate=\"label\">\n                            <label>Cookie Path</label>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_path>\n                        <cookie_domain translate=\"label\">\n                            <label>Cookie Domain</label>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_domain>\n                        <cookie_httponly translate=\"label\">\n                            <label>Use HTTP Only</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_httponly>\n                        <cookie_samesite translate=\"label\">\n                            <label>Same-Site</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_cookie_samesite</source_model>\n                            <comment><![CDATA[<a target=\"_blank\" href=\"https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00\"/>https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00</a>]]></comment>\n                            <sort_order>45</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookie_samesite>\n                        <cookie_restriction translate=\"label\">\n                            <label>Cookie Restriction Mode</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <backend_model>adminhtml/system_config_backend_cookie</backend_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </cookie_restriction>\n                    </fields>\n                </cookie>\n                <session translate=\"label\">\n                    <label>Session Validation Settings</label>\n                    <sort_order>60</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>0</show_in_store>\n                    <fields>\n                        <use_remote_addr translate=\"label\">\n                            <label>Validate REMOTE_ADDR</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>1</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_remote_addr>\n                        <use_http_via translate=\"label\">\n                            <label>Validate HTTP_VIA</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>20</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_via>\n                        <use_http_x_forwarded_for translate=\"label\">\n                            <label>Validate HTTP_X_FORWARDED_FOR</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>30</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_x_forwarded_for>\n                        <use_http_user_agent translate=\"label\">\n                            <label>Validate HTTP_USER_AGENT</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>40</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>0</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_http_user_agent>\n                        <use_frontend_sid translate=\"label comment\">\n                            <label>Use SID on Frontend</label>\n                            <comment>Allows customers to stay logged in when switching between different stores.</comment>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>50</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>0</show_in_store>\n                        </use_frontend_sid>\n                    </fields>\n                </session>\n                <browser_capabilities translate=\"label\">\n                    <label>Browser Capabilities Detection</label>\n                    <sort_order>200</sort_order>\n                    <show_in_default>1</show_in_default>\n                    <show_in_website>1</show_in_website>\n                    <show_in_store>1</show_in_store>\n                    <fields>\n                        <cookies translate=\"label\" module=\"cms\">\n                            <label>Redirect to CMS-page if Cookies are Disabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>100</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </cookies>\n                        <javascript translate=\"label\" module=\"cms\">\n                            <label>Show Notice if JavaScript is Disabled</label>\n                            <frontend_type>select</frontend_type>\n                            <source_model>adminhtml/system_config_source_yesno</source_model>\n                            <sort_order>200</sort_order>\n                            <show_in_default>1</show_in_default>\n                            <show_in_website>1</show_in_website>\n                            <show_in_store>1</show_in_store>\n                        </javascript>\n                    </fields>\n                </browser_capabilities>\n            </groups>\n        </web>\n    </sections>\n</config>\n", "<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Sales\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2020-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Sales module base helper\n *\n * @category   Mage\n * @package    Mage_Sales\n */\nclass Mage_Sales_Helper_Guest extends Mage_Core_Helper_Data\n{\n    protected $_moduleName = 'Mage_Sales';\n\n    /**\n     * Cookie params\n     */\n    protected $_cookieName  = 'guest-view';\n    protected $_lifeTime    = 600;\n\n    /**\n     * Try to load valid order by $_POST or $_COOKIE\n     *\n     * @return bool|null\n     */\n    public function loadValidOrder()\n    {\n        if (Mage::getSingleton('customer/session')->isLoggedIn()) {\n            Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/order/history'));\n            return false;\n        }\n\n        $post = Mage::app()->getRequest()->getPost();\n        $errors = false;\n\n        /** @var Mage_Sales_Model_Order $order */\n        $order = Mage::getModel('sales/order');\n        /** @var Mage_Core_Model_Cookie $cookieModel */\n        $cookieModel = Mage::getSingleton('core/cookie');\n        $errorMessage = 'Entered data is incorrect. Please try again.';\n\n        if (empty($post) && !$cookieModel->get($this->_cookieName)) {\n            Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/guest/form'));\n            return false;\n        } elseif (!empty($post) && isset($post['oar_order_id']) && isset($post['oar_type'])) {\n            $type           = $post['oar_type'];\n            $incrementId    = $post['oar_order_id'];\n            $lastName       = $post['oar_billing_lastname'];\n            $email          = $post['oar_email'];\n            $zip            = $post['oar_zip'];\n\n            if (empty($incrementId) || empty($lastName) || empty($type) || (!in_array($type, ['email', 'zip']))\n                || ($type == 'email' && empty($email)) || ($type == 'zip' && empty($zip))\n            ) {\n                $errors = true;\n            }\n\n            if (!$errors) {\n                $order->loadByIncrementId($incrementId);\n            }\n\n            if ($order->getId()) {\n                $billingAddress = $order->getBillingAddress();\n                if ((strtolower($lastName) != strtolower($billingAddress->getLastname()))\n                    || ($type == 'email'\n                        && strtolower($email) != strtolower($order->getCustomerEmail()))\n                    || ($type == 'zip'\n                        && (strtolower($zip) != strtolower($billingAddress->getPostcode())))\n                ) {\n                    $errors = true;\n                }\n            } else {\n                $errors = true;\n            }\n\n            if ($errors === false && !is_null($order->getCustomerId())) {\n                $errorMessage = 'Please log in to view your order details.';\n                $errors = true;\n            }\n\n            if (!$errors) {\n                $toCookie = base64_encode($order->getProtectCode() . ':' . $incrementId);\n                $cookieModel->set($this->_cookieName, $toCookie, $this->_lifeTime, '/');\n            }\n        } elseif ($cookieModel->get($this->_cookieName)) {\n            $cookie = $cookieModel->get($this->_cookieName);\n            $cookieOrder = $this->_loadOrderByCookie($cookie);\n            if (!is_null($cookieOrder)) {\n                if (is_null($cookieOrder->getCustomerId())) {\n                    $cookieModel->renew($this->_cookieName, $this->_lifeTime, '/');\n                    $order = $cookieOrder;\n                } else {\n                    $errorMessage = 'Please log in to view your order details.';\n                    $errors = true;\n                }\n            } else {\n                Mage::helper('core')->recordRateLimitHit();\n                $errors = true;\n            }\n        }\n\n        if (!$errors && $order->getId()) {\n            Mage::register('current_order', $order);\n            return true;\n        }\n\n        if (!Mage::helper('core')->isRateLimitExceeded(true, false)) {\n            Mage::getSingleton('core/session')->addError($this->__($errorMessage));\n        }\n\n        Mage::app()->getResponse()->setRedirect(Mage::getUrl('sales/guest/form'));\n        return false;\n    }\n\n    /**\n     * Get Breadcrumbs for current controller action\n     *\n     * @param  Mage_Core_Controller_Front_Action $controller\n     */\n    public function getBreadcrumbs($controller)\n    {\n        /** @var Mage_Page_Block_Html_Breadcrumbs $breadcrumbs */\n        $breadcrumbs = $controller->getLayout()->getBlock('breadcrumbs');\n        $breadcrumbs->addCrumb(\n            'home',\n            [\n                'label' => $this->__('Home'),\n                'title' => $this->__('Go to Home Page'),\n                'link'  => Mage::getBaseUrl()\n            ]\n        );\n        $breadcrumbs->addCrumb(\n            'cms_page',\n            [\n                'label' => $this->__('Order Information'),\n                'title' => $this->__('Order Information')\n            ]\n        );\n    }\n\n    /**\n     * Try to load order by cookie hash\n     *\n     * @param string|null $cookie\n     * @return null|Mage_Sales_Model_Order\n     */\n    protected function _loadOrderByCookie($cookie = null)\n    {\n        if (!is_null($cookie)) {\n            $cookieData = explode(':', base64_decode($cookie));\n            $protectCode = $cookieData[0] ?? null;\n            $incrementId = $cookieData[1] ?? null;\n\n            if (!empty($protectCode) && !empty($incrementId)) {\n                /** @var Mage_Sales_Model_Order $order */\n                $order = Mage::getModel('sales/order');\n                $order->loadByIncrementId($incrementId);\n\n                if ($order->getProtectCode() === $protectCode) {\n                    return $order;\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Getter for $this->_cookieName\n     *\n     * @return string\n     */\n    public function getCookieName()\n    {\n        return $this->_cookieName;\n    }\n}\n", "<?php\n/**\n * OpenMage\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available at https://opensource.org/license/osl-3-0-php\n *\n * @category   Mage\n * @package    Mage_Sales\n * @copyright  Copyright (c) 2006-2020 Magento, Inc. (https://www.magento.com)\n * @copyright  Copyright (c) 2015-2023 The OpenMage Contributors (https://www.openmage.org)\n * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)\n */\n\n/**\n * Order model\n *\n * Supported events:\n *  sales_order_load_after\n *  sales_order_save_before\n *  sales_order_save_after\n *  sales_order_delete_before\n *  sales_order_delete_after\n *\n * @category   Mage\n * @package    Mage_Sales\n *\n * @method Mage_Sales_Model_Resource_Order _getResource()\n * @method Mage_Sales_Model_Resource_Order getResource()\n * @method Mage_Sales_Model_Resource_Order_Collection getCollection()\n *\n * @method float getAdjustmentNegative()\n * @method $this setAdjustmentNegative(float $value)\n * @method float getAdjustmentPositive()\n * @method $this setAdjustmentPositive(float $value)\n * @method string getAppliedRuleIds()\n * @method $this setAppliedRuleIds(string $value)\n * @method array getAppliedTaxes()\n * @method $this setAppliedTaxes(array $value)\n * @method bool getAppliedTaxIsSaved()\n * @method $this setAppliedTaxIsSaved(bool $value)\n *\n * @method string getBackUrl()\n * @method float getBaseAdjustmentNegative()\n * @method $this setBaseAdjustmentNegative(float $value)\n * @method float getBaseAdjustmentPositive()\n * @method $this setBaseAdjustmentPositive(float $value)\n * @method string getBaseCurrencyCode()\n * @method $this setBaseCurrencyCode(string $value)\n * @method float getBaseDiscountAmount()\n * @method $this setBaseDiscountAmount(float $value)\n * @method float getBaseDiscountCanceled()\n * @method $this setBaseDiscountCanceled(float $value)\n * @method float getBaseDiscountInvoiced()\n * @method $this setBaseDiscountInvoiced(float $value)\n * @method float getBaseDiscountRefunded()\n * @method $this setBaseDiscountRefunded(float $value)\n * @method float getBaseGrandTotal()\n * @method $this setBaseGrandTotal(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method $this setBaseHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxInvoiced()\n * @method $this setBaseHiddenTaxInvoiced(float $value)\n * @method float getBaseHiddenTaxRefunded()\n * @method $this setBaseHiddenTaxRefunded(float $value)\n * @method float getBaseShippingAmount()\n * @method $this setBaseShippingAmount(float $value)\n * @method float getBaseShippingCanceled()\n * @method $this setBaseShippingCanceled(float $value)\n * @method float getBaseShippingDiscountAmount()\n * @method $this setBaseShippingDiscountAmount(float $value)\n * @method float getBaseShippingHiddenTaxAmount()\n * @method $this setBaseShippingHiddenTaxAmount(float $value)\n * @method float getBaseShippingHiddenTaxInvoiced()\n * @method float getBaseShippingHiddenTaxRefunded()\n * @method float getBaseShippingInclTax()\n * @method $this setBaseShippingInclTax(float $value)\n * @method float getBaseShippingInvoiced()\n * @method $this setBaseShippingInvoiced(float $value)\n * @method float getBaseShippingRefunded()\n * @method $this setBaseShippingRefunded(float $value)\n * @method float getBaseShippingTaxAmount()\n * @method $this setBaseShippingTaxAmount(float $value)\n * @method float getBaseShippingTaxInvoiced()\n * @method $this setBaseShippingTaxInvoiced(float $value)\n * @method float getBaseShippingTaxRefunded()\n * @method $this setBaseShippingTaxRefunded(float $value)\n * @method float getBaseSubtotal()\n * @method $this setBaseSubtotal(float $value)\n * @method float getBaseSubtotalCanceled()\n * @method $this setBaseSubtotalCanceled(float $value)\n * @method float getBaseSubtotalInclTax()\n * @method $this setBaseSubtotalInclTax(float $value)\n * @method float getBaseSubtotalInvoiced()\n * @method $this setBaseSubtotalInvoiced(float $value)\n * @method float getBaseSubtotalRefunded()\n * @method $this setBaseSubtotalRefunded(float $value)\n * @method float getBaseTaxAmount()\n * @method $this setBaseTaxAmount(float $value)\n * @method float getBaseTaxCanceled()\n * @method $this setBaseTaxCanceled(float $value)\n * @method float getBaseTaxInvoiced()\n * @method $this setBaseTaxInvoiced(float $value)\n * @method float getBaseTaxRefunded()\n * @method $this setBaseTaxRefunded(float $value)\n * @method float getBaseToGlobalRate()\n * @method $this setBaseToGlobalRate(float $value)\n * @method float getBaseToOrderRate()\n * @method $this setBaseToOrderRate(float $value)\n * @method float getBaseTotalCanceled()\n * @method $this setBaseTotalCanceled(float $value)\n * @method $this setBaseTotalDue(float $value)\n * @method float getBaseTotalInvoiced()\n * @method $this setBaseTotalInvoiced(float $value)\n * @method float getBaseTotalInvoicedCost()\n * @method $this setBaseTotalInvoicedCost(float $value)\n * @method float getBaseTotalOfflineRefunded()\n * @method $this setBaseTotalOfflineRefunded(float $value)\n * @method float getBaseTotalOnlineRefunded()\n * @method $this setBaseTotalOnlineRefunded(float $value)\n * @method float getBaseTotalPaid()\n * @method $this setBaseTotalPaid(float $value)\n * @method float getBaseTotalQtyOrdered()\n * @method $this setBaseTotalQtyOrdered(float $value)\n * @method float getBaseTotalRefunded()\n * @method $this setBaseTotalRefunded(float $value)\n * @method bool hasBillingAddressId()\n * @method int getBillingAddressId()\n * @method $this setBillingAddressId(int $value)\n * @method $this unsBillingAddressId()\n * @method int getBillingFirstname()\n * @method int getBillingLastname()\n *\n * @method bool hasCanReturnToStock()\n * @method bool getCanReturnToStock()\n * @method $this setCanReturnToStock()\n * @method int getCanShipPartially()\n * @method $this setCanShipPartially(int $value)\n * @method int getCanShipPartiallyItem()\n * @method $this setCanShipPartiallyItem(int $value)\n * @method bool getConvertingFromQuote()\n * @method $this setConvertingFromQuote(bool $value)\n * @method string getCouponCode()\n * @method $this setCouponCode(string $value)\n * @method $this setCouponRuleName(string $value)\n * @method string getCreatedAt()\n * @method $this setCreatedAt(string $value)\n * @method Mage_Customer_Model_Customer getCustomer()\n * @method $this setCustomer(Mage_Customer_Model_Customer $value)\n * @method string getCustomerDob()\n * @method $this setCustomerDob(string $value)\n * @method string getCustomerEmail()\n * @method $this setCustomerEmail(string $value)\n * @method string getCustomerFirstname()\n * @method $this setCustomerFirstname(string $value)\n * @method int getCustomerGender()\n * @method $this setCustomerGender(int $value)\n * @method int getCustomerGroupId()\n * @method $this setCustomerGroupId(int $value)\n * @method int getCustomerId()\n * @method $this setCustomerId(int $value)\n * @method int getCustomerIsGuest()\n * @method $this setCustomerIsGuest(int $value)\n * @method string getCustomerLastname()\n * @method $this setCustomerLastname(string $value)\n * @method string getCustomerMiddlename()\n * @method $this setCustomerMiddlename(string $value)\n * @method string getCustomerNote()\n * @method $this setCustomerNote(string $value)\n * @method bool hasCustomerNoteNotify()\n * @method int getCustomerNoteNotify()\n * @method $this setCustomerNoteNotify(int $value)\n * @method string getCustomerPrefix()\n * @method $this setCustomerPrefix(string $value)\n * @method string getCustomerSuffix()\n * @method $this setCustomerSuffix(string $value)\n * @method string getCustomerTaxvat()\n * @method $this setCustomerTaxvat(string $value)\n *\n * @method float getDiscountAmount()\n * @method $this setDiscountAmount(float $value)\n * @method float getDiscountCanceled()\n * @method $this setDiscountCanceled(float $value)\n * @method string getDiscountDescription()\n * @method $this setDiscountDescription(string $value)\n * @method float getDiscountInvoiced()\n * @method $this setDiscountInvoiced(float $value)\n * @method float getDiscountRefunded()\n * @method $this setDiscountRefunded(float $value)\n *\n * @method int getEditIncrement()\n * @method $this setEditIncrement(int $value)\n * @method int getEmailSent()\n * @method $this setEmailSent(int $value)\n * @method string getExtCustomerId()\n * @method $this setExtCustomerId(string $value)\n * @method string getExtOrderId()\n * @method $this setExtOrderId(string $value)\n *\n * @method bool hasForcedCanCreditmemo()\n * @method bool getForcedCanCreditmemo()\n * @method $this setForcedCanCreditmemo(bool $value)\n * @method int getForcedDoShipmentWithInvoice()\n * @method $this setForcedDoShipmentWithInvoice(int $value)\n *\n * @method $this setGiftMessage(string $value)\n * @method int getGiftMessageId()\n * @method $this setGiftMessageId(int $value)\n * @method string getGlobalCurrencyCode()\n * @method $this setGlobalCurrencyCode(string $value)\n * @method float getGrandTotal()\n * @method $this setGrandTotal(float $value)\n *\n * @method float getHiddenTaxAmount()\n * @method $this setHiddenTaxAmount(float $value)\n * @method float getHiddenTaxInvoiced()\n * @method $this setHiddenTaxInvoiced(float $value)\n * @method float getHiddenTaxRefunded()\n * @method $this setHiddenTaxRefunded(float $value)\n * @method string getHoldBeforeState()\n * @method $this setHoldBeforeState(string $value)\n * @method string getHoldBeforeStatus()\n * @method $this setHoldBeforeStatus(string $value)\n *\n * @method string getIncrementId()\n * @method $this setIncrementId(string $value)\n * @method bool getIsInProcess()\n * @method $this setIsInProcess(bool $value)\n * @method bool getIsMultiPayment()\n *\n * @method string getOrderCurrencyCode()\n * @method $this setOrderCurrencyCode(string $value)\n * @method string getOriginalIncrementId()\n * @method $this setOriginalIncrementId(string $value)\n *\n * @method float getPaymentAuthorizationAmount()\n * @method $this setPaymentAuthorizationAmount(float $value)\n * @method int getPaymentAuthorizationExpiration()\n * @method $this setPaymentAuthorizationExpiration(int $value)\n * @method int getPaypalIpnCustomerNotified()\n * @method $this setPaypalIpnCustomerNotified(int $value)\n * @method string getProtectCode()\n * @method $this setProtectCode(string $value)\n *\n * @method float getQuantity()\n * @method Mage_Sales_Model_Quote getQuote()\n * @method int getQuoteAddressId()\n * @method $this setQuoteAddressId(int $value)\n * @method float getQuoteBaseGrandTotal()\n * @method int getQuoteId()\n * @method $this setQuoteId(int $value)\n * @method $this setQuote(Mage_Sales_Model_Quote $value)\n *\n * @method string getRelationChildId()\n * @method $this setRelationChildId(string $value)\n * @method string getRelationChildRealId()\n * @method $this setRelationChildRealId(string $value)\n * @method string getRelationParentId()\n * @method $this setRelationParentId(string $value)\n * @method string getRelationParentRealId()\n * @method $this setRelationParentRealId(string $value)\n * @method string getRemoteIp()\n * @method $this setRemoteIp(string $value)\n * @method bool getReordered()\n * @method float getRevenue()\n * @method int getRowTaxDisplayPrecision()\n *\n * @method float getShipping()\n * @method bool hasShippingAddressId()\n * @method int getShippingAddressId()\n * @method $this setShippingAddressId(int $value)\n * @method $this unsShippingAddressId()\n * @method float getShippingAmount()\n * @method $this setShippingAmount(float $value)\n * @method float getShippingCanceled()\n * @method $this setShippingCanceled(float $value)\n * @method string getShippingDescription()\n * @method $this setShippingDescription(string $value)\n * @method float getShippingDiscountAmount()\n * @method $this setShippingDiscountAmount(float $value)\n * @method float getShippingHiddenTaxAmount()\n * @method $this setShippingHiddenTaxAmount(float $value)\n * @method float getShippingHiddenTaxInvoiced()\n * @method float getShippingHiddenTaxRefunded()\n * @method float getShippingInclTax()\n * @method $this setShippingInclTax(float $value)\n * @method float getShippingInvoiced()\n * @method $this setShippingInvoiced(float $value)\n * @method $this setShippingMethod(string $value)\n * @method float getShippingRefunded()\n * @method $this setShippingRefunded(float $value)\n * @method float getShippingTaxAmount()\n * @method $this setShippingTaxAmount(float $value)\n * @method float getShippingTaxInvoiced()\n * @method $this setShippingTaxInvoiced(float $value)\n * @method float getShippingTaxRefunded()\n * @method $this setShippingTaxRefunded(float $value)\n * @method string getState()\n * @method string getStatus()\n * @method $this setStatus(string $value)\n * @method string getStoreCurrencyCode()\n * @method $this setStoreCurrencyCode(string $value)\n * @method int getStoreId()\n * @method $this setStoreId(int $value)\n * @method string getStoreName()\n * @method $this setStoreName(string $value)\n * @method float getStoreToBaseRate()\n * @method $this setStoreToBaseRate(float $value)\n * @method float getStoreToOrderRate()\n * @method $this setStoreToOrderRate(float $value)\n * @method float getSubtotal()\n * @method $this setSubtotal(float $value)\n * @method float getSubtotalCanceled()\n * @method $this setSubtotalCanceled(float $value)\n * @method float getSubtotalInclTax()\n * @method $this setSubtotalInclTax(float $value)\n * @method float getSubtotalInvoiced()\n * @method $this setSubtotalInvoiced(float $value)\n * @method float getSubtotalRefunded()\n * @method $this setSubtotalRefunded(float $value)\n *\n * @method float getTax()\n * @method float getTaxAmount()\n * @method $this setTaxAmount(float $value)\n * @method float getTaxCanceled()\n * @method $this setTaxCanceled(float $value)\n * @method float getTaxInvoiced()\n * @method $this setTaxInvoiced(float $value)\n * @method float getTaxRefunded()\n * @method $this setTaxRefunded(float $value)\n * @method float getTotalCanceled()\n * @method $this setTotalCanceled(float $value)\n * @method $this setTotalDue(float $value)\n * @method float getTotalInvoiced()\n * @method $this setTotalInvoiced(float $value)\n * @method int getTotalItemCount()\n * @method $this setTotalItemCount(int $value)\n * @method float getTotalOfflineRefunded()\n * @method $this setTotalOfflineRefunded(float $value)\n * @method float getTotalOnlineRefunded()\n * @method $this setTotalOnlineRefunded(float $value)\n * @method float getTotalPaid()\n * @method $this setTotalPaid(float $value)\n * @method float getTotalQtyOrdered()\n * @method $this setTotalQtyOrdered(float $value)\n * @method float getTotalRefunded()\n * @method $this setTotalRefunded(float $value)\n *\n * @method string getUpdatedAt()\n * @method $this setUpdatedAt(string $value)\n *\n * @method int getIsVirtual()\n * @method $this setIsVirtual(int $value)\n *\n * @method float getWeight()\n * @method $this setWeight(float $value)\n *\n * @method string getXForwardedFor()\n * @method $this setXForwardedFor(string $value)\n */\nclass Mage_Sales_Model_Order extends Mage_Sales_Model_Abstract\n{\n    /**\n     * Identifier for history item\n     */\n    public const ENTITY                                = 'order';\n\n    /**\n     * Event type names for order emails\n     */\n    public const EMAIL_EVENT_NAME_NEW_ORDER    = 'new_order';\n    public const EMAIL_EVENT_NAME_UPDATE_ORDER = 'update_order';\n\n    /**\n     * XML configuration paths\n     */\n    public const XML_PATH_EMAIL_TEMPLATE               = 'sales_email/order/template';\n    public const XML_PATH_EMAIL_GUEST_TEMPLATE         = 'sales_email/order/guest_template';\n    public const XML_PATH_EMAIL_IDENTITY               = 'sales_email/order/identity';\n    public const XML_PATH_EMAIL_COPY_TO                = 'sales_email/order/copy_to';\n    public const XML_PATH_EMAIL_COPY_METHOD            = 'sales_email/order/copy_method';\n    public const XML_PATH_EMAIL_ENABLED                = 'sales_email/order/enabled';\n\n    public const XML_PATH_UPDATE_EMAIL_TEMPLATE        = 'sales_email/order_comment/template';\n    public const XML_PATH_UPDATE_EMAIL_GUEST_TEMPLATE  = 'sales_email/order_comment/guest_template';\n    public const XML_PATH_UPDATE_EMAIL_IDENTITY        = 'sales_email/order_comment/identity';\n    public const XML_PATH_UPDATE_EMAIL_COPY_TO         = 'sales_email/order_comment/copy_to';\n    public const XML_PATH_UPDATE_EMAIL_COPY_METHOD     = 'sales_email/order_comment/copy_method';\n    public const XML_PATH_UPDATE_EMAIL_ENABLED         = 'sales_email/order_comment/enabled';\n\n    /**\n     * Order states\n     */\n    public const STATE_NEW             = 'new';\n    public const STATE_PENDING_PAYMENT = 'pending_payment';\n    public const STATE_PROCESSING      = 'processing';\n    public const STATE_COMPLETE        = 'complete';\n    public const STATE_CLOSED          = 'closed';\n    public const STATE_CANCELED        = 'canceled';\n    public const STATE_HOLDED          = 'holded';\n    public const STATE_PAYMENT_REVIEW  = 'payment_review';\n\n    /**\n     * Order statuses\n     */\n    public const STATUS_FRAUD  = 'fraud';\n\n    /**\n     * Order flags\n     */\n    public const ACTION_FLAG_CANCEL                    = 'cancel';\n    public const ACTION_FLAG_HOLD                      = 'hold';\n    public const ACTION_FLAG_UNHOLD                    = 'unhold';\n    public const ACTION_FLAG_EDIT                      = 'edit';\n    public const ACTION_FLAG_CREDITMEMO                = 'creditmemo';\n    public const ACTION_FLAG_INVOICE                   = 'invoice';\n    public const ACTION_FLAG_REORDER                   = 'reorder';\n    public const ACTION_FLAG_SHIP                      = 'ship';\n    public const ACTION_FLAG_COMMENT                   = 'comment';\n    public const ACTION_FLAG_PRODUCTS_PERMISSION_DENIED = 'product_permission_denied';\n\n    /**\n     * Report date types\n     */\n    public const REPORT_DATE_TYPE_CREATED = 'created';\n    public const REPORT_DATE_TYPE_UPDATED = 'updated';\n    /**\n     * Identifier for history item\n     */\n    public const HISTORY_ENTITY_NAME = 'order';\n\n    protected $_eventPrefix = 'sales_order';\n    protected $_eventObject = 'order';\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Address_Collection|Mage_Sales_Model_Order_Address[]|null\n     */\n    protected $_addresses       = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Item_Collection|Mage_Sales_Model_Order_Item[]|null\n     */\n    protected $_items           = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Payment_Collection|Mage_Sales_Model_Order_Payment[]|null\n     */\n    protected $_payments        = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Status_History_Collection|Mage_Sales_Model_Order_Status_History[]|null\n     */\n    protected $_statusHistory   = null;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Invoice_Collection|null\n     */\n    protected $_invoices;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Shipment_Track_Collection|null\n     */\n    protected $_tracks;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Shipment_Collection|false|null\n     */\n    protected $_shipments;\n\n    /**\n     * @var Mage_Sales_Model_Resource_Order_Creditmemo_Collection|Mage_Sales_Model_Order_Creditmemo[]|false|null\n     */\n    protected $_creditmemos;\n\n    protected $_relatedObjects  = [];\n    protected $_orderCurrency   = null;\n    protected $_baseCurrency    = null;\n\n    /**\n     * Array of action flags for canUnhold, canEdit, etc.\n     *\n     * @var array\n     */\n    protected $_actionFlag = [];\n\n    /**\n     * Flag: if after order placing we can send new email to the customer.\n     *\n     * @var bool\n     */\n    protected $_canSendNewEmailFlag = true;\n\n    /**\n     * Identifier for history item\n     *\n     * @var string\n     */\n    protected $_historyEntityName = self::HISTORY_ENTITY_NAME;\n\n    protected function _construct()\n    {\n        $this->_init('sales/order');\n    }\n\n    /**\n    * Init mapping array of short fields to\n    * its full names\n    *\n    * @return Varien_Object\n    */\n    protected function _initOldFieldsMap()\n    {\n        // pre 1.6 fields names, old => new\n        $this->_oldFieldsMap = [\n            'payment_authorization_expiration' => 'payment_auth_expiration',\n            'forced_do_shipment_with_invoice' => 'forced_shipment_with_invoice',\n            'base_shipping_hidden_tax_amount' => 'base_shipping_hidden_tax_amnt',\n        ];\n        return $this;\n    }\n\n    /**\n     * Clear order object data\n     *\n     * @param string $key data key\n     * @return $this\n     */\n    public function unsetData($key = null)\n    {\n        parent::unsetData($key);\n        if (is_null($key)) {\n            $this->_items = null;\n        }\n        return $this;\n    }\n\n    /**\n     * Retrieve can flag for action (edit, unhold, etc..)\n     *\n     * @param string $action\n     * @return bool|null\n     */\n    public function getActionFlag($action)\n    {\n        return $this->_actionFlag[$action] ?? null;\n    }\n\n    /**\n     * Set can flag value for action (edit, unhold, etc...)\n     *\n     * @param string $action\n     * @param bool $flag\n     * @return $this\n     */\n    public function setActionFlag($action, $flag)\n    {\n        $this->_actionFlag[$action] = (bool) $flag;\n        return $this;\n    }\n\n    /**\n     * Return flag for order if it can sends new email to customer.\n     *\n     * @return bool\n     */\n    public function getCanSendNewEmailFlag()\n    {\n        return $this->_canSendNewEmailFlag;\n    }\n\n    /**\n     * Set flag for order if it can sends new email to customer.\n     *\n     * @param bool $flag\n     * @return $this\n     */\n    public function setCanSendNewEmailFlag($flag)\n    {\n        $this->_canSendNewEmailFlag = (bool) $flag;\n        return $this;\n    }\n\n    /**\n     * Load order by system increment identifier\n     *\n     * @param string $incrementId\n     * @return $this\n     */\n    public function loadByIncrementId($incrementId)\n    {\n        return $this->loadByAttribute('increment_id', $incrementId);\n    }\n\n    /**\n     * Load order by custom attribute value. Attribute value should be unique\n     *\n     * @param string $attribute\n     * @param string $value\n     * @return $this\n     */\n    public function loadByAttribute($attribute, $value)\n    {\n        $this->load($value, $attribute);\n        return $this;\n    }\n\n    /**\n     * Retrieve store model instance\n     *\n     * @return Mage_Core_Model_Store\n     */\n    public function getStore()\n    {\n        $storeId = $this->getStoreId();\n        if ($storeId) {\n            return Mage::app()->getStore($storeId);\n        }\n        return Mage::app()->getStore();\n    }\n\n    /**\n     * Retrieve order cancel availability\n     *\n     * @return bool\n     */\n    public function canCancel()\n    {\n        if (!$this->_canVoidOrder()) {\n            return false;\n        }\n        if ($this->canUnhold()) {  // $this->isPaymentReview()\n            return false;\n        }\n\n        $allInvoiced = true;\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToInvoice()) {\n                $allInvoiced = false;\n                break;\n            }\n        }\n        if ($allInvoiced) {\n            return false;\n        }\n\n        $state = $this->getState();\n        if ($this->isCanceled() || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_CANCEL) === false) {\n            return false;\n        }\n        /**\n         * Use only state for availability detect\n         */\n        /*foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToCancel()>0) {\n                return true;\n            }\n        }\n        return false;*/\n        return true;\n    }\n\n    /**\n     * Getter whether the payment can be voided\n     *\n     * @return bool\n     */\n    public function canVoidPayment()\n    {\n        return $this->_canVoidOrder() ? $this->getPayment()->canVoid($this->getPayment()) : false;\n    }\n\n    /**\n     * Check whether order could be canceled by states and flags\n     *\n     * @return bool\n     */\n    protected function _canVoidOrder()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order invoice availability\n     *\n     * @return bool\n     */\n    public function canInvoice()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n        $state = $this->getState();\n        if ($this->isCanceled() || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_INVOICE) === false) {\n            return false;\n        }\n\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToInvoice() > 0 && !$item->getLockedDoInvoice()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order credit memo (refund) availability\n     *\n     * @return bool\n     */\n    public function canCreditmemo()\n    {\n        if ($this->hasForcedCanCreditmemo()) {\n            return $this->getForcedCanCreditmemo();\n        }\n\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->isCanceled() || $this->getState() === self::STATE_CLOSED) {\n            return false;\n        }\n\n        /**\n         * We can have problem with float in php (on some server $a=762.73;$b=762.73; $a-$b!=0)\n         * for this we have additional diapason for 0\n         * TotalPaid - contains amount, that were not rounded.\n         */\n        if (abs($this->getStore()->roundPrice($this->getTotalPaid()) - $this->getTotalRefunded()) < .0001) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_EDIT) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order hold availability\n     *\n     * @return bool\n     */\n    public function canHold()\n    {\n        $state = $this->getState();\n        if ($this->isCanceled() || $this->isPaymentReview()\n            || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED || $state === self::STATE_HOLDED\n        ) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_HOLD) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order unhold availability\n     *\n     * @return bool\n     */\n    public function canUnhold()\n    {\n        if ($this->getActionFlag(self::ACTION_FLAG_UNHOLD) === false || $this->isPaymentReview()) {\n            return false;\n        }\n        return $this->getState() === self::STATE_HOLDED;\n    }\n\n    /**\n     * Check if comment can be added to order history\n     *\n     * @return bool\n     */\n    public function canComment()\n    {\n        if ($this->getActionFlag(self::ACTION_FLAG_COMMENT) === false) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Retrieve order shipment availability\n     *\n     * @return bool\n     */\n    public function canShip()\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->getIsVirtual() || $this->isCanceled()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_SHIP) === false) {\n            return false;\n        }\n\n        foreach ($this->getAllItems() as $item) {\n            if ($item->getQtyToShip() > 0 && !$item->getIsVirtual()\n                && !$item->getLockedDoShip()\n            ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order edit availability\n     *\n     * @return bool\n     */\n    public function canEdit()\n    {\n        if ($this->canUnhold()) {\n            return false;\n        }\n\n        $state = $this->getState();\n        if ($this->isCanceled() || $this->isPaymentReview()\n            || $state === self::STATE_COMPLETE || $state === self::STATE_CLOSED\n        ) {\n            return false;\n        }\n\n        if (!$this->getPayment()->getMethodInstance()->canEdit()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_EDIT) === false) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Retrieve order reorder availability\n     *\n     * @return bool\n     */\n    public function canReorder()\n    {\n        return $this->_canReorder(true);\n    }\n\n    /**\n     * Check the ability to reorder ignoring the availability in stock or status of the ordered products\n     *\n     * @return bool\n     */\n    public function canReorderIgnoreSalable()\n    {\n        return $this->_canReorder(true);\n    }\n\n    /**\n     * Retrieve order reorder availability\n     *\n     * @param bool $ignoreSalable\n     * @return bool\n     */\n    protected function _canReorder($ignoreSalable = false)\n    {\n        if ($this->canUnhold() || $this->isPaymentReview()) {\n            return false;\n        }\n\n        if ($this->getActionFlag(self::ACTION_FLAG_REORDER) === false) {\n            return false;\n        }\n\n        $products = [];\n        foreach ($this->getItemsCollection() as $item) {\n            $products[] = $item->getProductId();\n        }\n\n        if (!empty($products)) {\n            /*\n             * @TODO ACPAOC: Use product collection here, but ensure that product\n             * is loaded with order store id, otherwise there'll be problems with isSalable()\n             * for configurables, bundles and other composites\n             *\n             */\n            /*\n            $productsCollection = Mage::getModel('catalog/product')->getCollection()\n                ->setStoreId($this->getStoreId())\n                ->addIdFilter($products)\n                ->addAttributeToSelect('status')\n                ->load();\n\n            foreach ($productsCollection as $product) {\n                if (!$product->isSalable()) {\n                    return false;\n                }\n            }\n            */\n\n            foreach ($products as $productId) {\n                $product = Mage::getModel('catalog/product')\n                    ->setStoreId($this->getStoreId())\n                    ->load($productId);\n                if (!$product->getId() || (!$ignoreSalable && !$product->isSalable())) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Check whether the payment is in payment review state\n     * In this state order cannot be normally processed. Possible actions can be:\n     * - accept or deny payment\n     * - fetch transaction information\n     *\n     * @return bool\n     */\n    public function isPaymentReview()\n    {\n        return $this->getState() === self::STATE_PAYMENT_REVIEW;\n    }\n\n    /**\n     * Check whether payment can be accepted or denied\n     *\n     * @return bool\n     */\n    public function canReviewPayment()\n    {\n        return $this->isPaymentReview() && $this->getPayment()->canReviewPayment();\n    }\n\n    /**\n     * Check whether there can be a transaction update fetched for payment in review state\n     *\n     * @return bool\n     */\n    public function canFetchPaymentReviewUpdate()\n    {\n        return $this->isPaymentReview() && $this->getPayment()->canFetchTransactionInfo();\n    }\n\n    /**\n     * Retrieve order configuration model\n     *\n     * @return Mage_Sales_Model_Order_Config\n     */\n    public function getConfig()\n    {\n        return Mage::getSingleton('sales/order_config');\n    }\n\n    /**\n     * Place order payments\n     *\n     * @return $this\n     */\n    protected function _placePayment()\n    {\n        $this->getPayment()->place();\n        return $this;\n    }\n\n    /**\n     * Retrieve order payment model object\n     *\n     * @return Mage_Sales_Model_Order_Payment|false\n     */\n    public function getPayment()\n    {\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if (!$payment->isDeleted()) {\n                return $payment;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Declare order billing address\n     *\n     * @param   Mage_Sales_Model_Order_Address $address\n     * @return  $this\n     */\n    public function setBillingAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $old = $this->getBillingAddress();\n        if (!empty($old)) {\n            $address->setId($old->getId());\n        }\n        $this->addAddress($address->setAddressType('billing'));\n        return $this;\n    }\n\n    /**\n     * Declare order shipping address\n     *\n     * @param   Mage_Sales_Model_Order_Address $address\n     * @return  $this\n     */\n    public function setShippingAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $old = $this->getShippingAddress();\n        if (!empty($old)) {\n            $address->setId($old->getId());\n        }\n        $this->addAddress($address->setAddressType('shipping'));\n        return $this;\n    }\n\n    /**\n     * Retrieve order billing address\n     *\n     * @return Mage_Sales_Model_Order_Address|false\n     */\n    public function getBillingAddress()\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getAddressType() == 'billing' && !$address->isDeleted()) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Retrieve order shipping address\n     *\n     * @return Mage_Sales_Model_Order_Address|false\n     */\n    public function getShippingAddress()\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getAddressType() == 'shipping' && !$address->isDeleted()) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Order state setter.\n     * If status is specified, will add order status history with specified comment\n     * the setData() cannot be overriden because of compatibility issues with resource model\n     *\n     * @param string $state\n     * @param string|bool $status\n     * @param string $comment\n     * @param bool $isCustomerNotified\n     * @return $this\n     */\n    public function setState($state, $status = false, $comment = '', $isCustomerNotified = null)\n    {\n        return $this->_setState($state, $status, $comment, $isCustomerNotified, true);\n    }\n\n    /**\n     * Order state protected setter.\n     * By default allows to set any state. Can also update status to default or specified value\n     * \u0421omplete and closed states are encapsulated intentionally, see the _checkState()\n     *\n     * @param string $state\n     * @param string|bool $status\n     * @param string $comment\n     * @param bool $isCustomerNotified\n     * @param bool $shouldProtectState\n     * @return $this\n     */\n    protected function _setState(\n        $state,\n        $status = false,\n        $comment = '',\n        $isCustomerNotified = null,\n        $shouldProtectState = false\n    ) {\n        // attempt to set the specified state\n        if ($shouldProtectState) {\n            if ($this->isStateProtected($state)) {\n                Mage::throwException(\n                    Mage::helper('sales')->__('The Order State \"%s\" must not be set manually.', $state)\n                );\n            }\n        }\n        $this->setData('state', $state);\n\n        // add status history\n        if ($status) {\n            if ($status === true) {\n                $status = $this->getConfig()->getStateDefaultStatus($state);\n            }\n            $this->setStatus($status);\n            $history = $this->addStatusHistoryComment($comment, false); // no sense to set $status again\n            $history->setIsCustomerNotified($isCustomerNotified); // for backwards compatibility\n        }\n        return $this;\n    }\n\n    /**\n     * Whether specified state can be set from outside\n     * @param string $state\n     * @return bool\n     */\n    public function isStateProtected($state)\n    {\n        if (empty($state)) {\n            return false;\n        }\n        return self::STATE_COMPLETE == $state || self::STATE_CLOSED == $state;\n    }\n\n    /**\n     * Retrieve label of order status\n     *\n     * @return string\n     */\n    public function getStatusLabel()\n    {\n        return $this->getConfig()->getStatusLabel($this->getStatus());\n    }\n\n    /**\n     * Add status change information to history\n     * @deprecated after 1.4.0.0-alpha3\n     *\n     * @param  string $status\n     * @param  string $comment\n     * @param  bool $isCustomerNotified\n     * @return $this\n     */\n    public function addStatusToHistory($status, $comment = '', $isCustomerNotified = false)\n    {\n        $history = $this->addStatusHistoryComment($comment, $status)\n            ->setIsCustomerNotified($isCustomerNotified);\n        return $this;\n    }\n\n    /**\n     * Add a comment to order\n     * Different or default status may be specified\n     *\n     * @param string $comment\n     * @param bool|string $status\n     * @return Mage_Sales_Model_Order_Status_History\n     */\n    public function addStatusHistoryComment($comment, $status = false)\n    {\n        if ($status === false) {\n            $status = $this->getStatus();\n        } elseif ($status === true) {\n            $status = $this->getConfig()->getStateDefaultStatus($this->getState());\n        } else {\n            $this->setStatus($status);\n        }\n        $history = Mage::getModel('sales/order_status_history')\n            ->setStatus($status)\n            ->setComment($comment)\n            ->setEntityName($this->_historyEntityName);\n        $this->addStatusHistory($history);\n        return $history;\n    }\n\n    /**\n     * Overrides entity id, which will be saved to comments history status\n     *\n     * @param string $entityName\n     * @return $this\n     */\n    public function setHistoryEntityName($entityName)\n    {\n        $this->_historyEntityName = $entityName;\n        return $this;\n    }\n\n    /**\n     * Place order\n     *\n     * @return $this\n     */\n    public function place()\n    {\n        Mage::dispatchEvent('sales_order_place_before', ['order' => $this]);\n        $this->_placePayment();\n        Mage::dispatchEvent('sales_order_place_after', ['order' => $this]);\n        return $this;\n    }\n\n    /**\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function hold()\n    {\n        if (!$this->canHold()) {\n            Mage::throwException(Mage::helper('sales')->__('Hold action is not available.'));\n        }\n        $this->setHoldBeforeState($this->getState());\n        $this->setHoldBeforeStatus($this->getStatus());\n        $this->setState(self::STATE_HOLDED, true);\n        return $this;\n    }\n\n    /**\n     * Attempt to unhold the order\n     *\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function unhold()\n    {\n        if (!$this->canUnhold()) {\n            Mage::throwException(Mage::helper('sales')->__('Unhold action is not available.'));\n        }\n        $this->setState($this->getHoldBeforeState(), $this->getHoldBeforeStatus());\n        $this->setHoldBeforeState(null);\n        $this->setHoldBeforeStatus(null);\n        return $this;\n    }\n\n    /**\n     * Cancel order\n     * @param string $comment\n     * @return $this\n     */\n    public function cancel($comment = '')\n    {\n        if ($this->canCancel()) {\n            $this->getPayment()->cancel();\n            $this->registerCancellation($comment);\n            Mage::dispatchEvent('order_cancel_after', ['order' => $this]);\n        }\n\n        return $this;\n    }\n\n    /**\n     * Prepare order totals to cancellation\n     * @param string $comment\n     * @param bool $graceful\n     * @return $this\n     * @throws Mage_Core_Exception\n     */\n    public function registerCancellation($comment = '', $graceful = true)\n    {\n        if ($this->canCancel() || $this->isPaymentReview()) {\n            $cancelState = self::STATE_CANCELED;\n            foreach ($this->getAllItems() as $item) {\n                if ($cancelState != self::STATE_PROCESSING && $item->getQtyToRefund()) {\n                    if ($item->getQtyToShip() > $item->getQtyToCancel()) {\n                        $cancelState = self::STATE_PROCESSING;\n                    } else {\n                        $cancelState = self::STATE_COMPLETE;\n                    }\n                }\n                $item->cancel();\n            }\n\n            $this->setSubtotalCanceled($this->getSubtotal() - $this->getSubtotalInvoiced());\n            $this->setBaseSubtotalCanceled($this->getBaseSubtotal() - $this->getBaseSubtotalInvoiced());\n\n            $this->setTaxCanceled($this->getTaxAmount() - $this->getTaxInvoiced());\n            $this->setBaseTaxCanceled($this->getBaseTaxAmount() - $this->getBaseTaxInvoiced());\n\n            $this->setShippingCanceled($this->getShippingAmount() - $this->getShippingInvoiced());\n            $this->setBaseShippingCanceled($this->getBaseShippingAmount() - $this->getBaseShippingInvoiced());\n\n            $this->setDiscountCanceled(abs($this->getDiscountAmount()) - $this->getDiscountInvoiced());\n            $this->setBaseDiscountCanceled(abs($this->getBaseDiscountAmount()) - $this->getBaseDiscountInvoiced());\n\n            $this->setTotalCanceled($this->getGrandTotal() - $this->getTotalPaid());\n            $this->setBaseTotalCanceled($this->getBaseGrandTotal() - $this->getBaseTotalPaid());\n\n            $this->_setState($cancelState, true, $comment);\n        } elseif (!$graceful) {\n            Mage::throwException(Mage::helper('sales')->__('Order does not allow to be canceled.'));\n        }\n        return $this;\n    }\n\n    /**\n     * Retrieve tracking numbers\n     *\n     * @return array\n     */\n    public function getTrackingNumbers()\n    {\n        if ($this->getData('tracking_numbers')) {\n            return explode(',', $this->getData('tracking_numbers'));\n        }\n        return [];\n    }\n\n    /**\n     * Return model of shipping carrier\n     *\n     * @return Mage_Shipping_Model_Carrier_Abstract\n     */\n    public function getShippingCarrier()\n    {\n        $carrierModel = $this->getData('shipping_carrier');\n        if (is_null($carrierModel)) {\n            $carrierModel = false;\n            /**\n             * $method - carrier_method\n             */\n            $method = $this->getShippingMethod(true);\n            if ($method instanceof Varien_Object) {\n                $className = Mage::getStoreConfig('carriers/' . $method->getCarrierCode() . '/model');\n                if ($className) {\n                    $carrierModel = Mage::getModel($className);\n                }\n            }\n            $this->setData('shipping_carrier', $carrierModel);\n        }\n        return $carrierModel;\n    }\n\n    /**\n     * Retrieve shipping method\n     *\n     * @param bool $asObject return carrier code and shipping method data as object\n     * @return string|Varien_Object\n     */\n    public function getShippingMethod($asObject = false)\n    {\n        $shippingMethod = parent::getShippingMethod();\n        if (!$asObject) {\n            return $shippingMethod;\n        } else {\n            $segments = explode('_', $shippingMethod, 2);\n            if (!isset($segments[1])) {\n                $segments[1] = $segments[0];\n            }\n            list($carrierCode, $method) = $segments;\n            return new Varien_Object([\n                'carrier_code' => $carrierCode,\n                'method'       => $method\n            ]);\n        }\n    }\n\n    /**\n     * Get the current customer email.\n     *\n     * @return string\n     */\n    public function getCurrentCustomerEmail()\n    {\n        if (!$this->getData('current_customer_email')) {\n            if ($this->getCustomer()) {\n                $email = $this->getCustomer()->getEmail();\n            } elseif ($this->getCustomerId()) {\n                $email = Mage::getResourceSingleton('customer/customer')->getEmail($this->getCustomerId());\n            }\n            // Guest checkout or customer was deleted.\n            if (empty($email)) {\n                $email = $this->getCustomerEmail();\n            }\n            $this->setData('current_customer_email', $email);\n        }\n\n        return $this->getData('current_customer_email');\n    }\n\n    /**\n     * Queue email with new order data\n     *\n     * @param bool $forceMode if true then email will be sent regardless of the fact that it was already sent previously\n     *\n     * @return $this\n     * @throws Exception\n     */\n    public function queueNewOrderEmail($forceMode = false)\n    {\n        $storeId = $this->getStore()->getId();\n\n        if (!Mage::helper('sales')->canSendNewOrderEmail($storeId)) {\n            return $this;\n        }\n\n        // Get the destination email addresses to send copies to\n        $copyTo = $this->_getEmails(self::XML_PATH_EMAIL_COPY_TO);\n        $copyMethod = Mage::getStoreConfig(self::XML_PATH_EMAIL_COPY_METHOD, $storeId);\n\n        // Start store emulation process\n        if ($storeId != Mage::app()->getStore()->getId()) {\n            /** @var Mage_Core_Model_App_Emulation $appEmulation */\n            $appEmulation = Mage::getSingleton('core/app_emulation');\n            $initialEnvironmentInfo = $appEmulation->startEnvironmentEmulation($storeId);\n        }\n\n        try {\n            // Retrieve specified view block from appropriate design package (depends on emulated store)\n            $paymentBlock = Mage::helper('payment')->getInfoBlock($this->getPayment())\n                ->setIsSecureMode(true);\n            $paymentBlock->getMethod()->setStore($storeId);\n            $paymentBlockHtml = $paymentBlock->toHtml();\n        } catch (Exception $e) {\n            // Stop store emulation process\n            if (isset($appEmulation, $initialEnvironmentInfo)) {\n                $appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo);\n            }\n            throw $e;\n        }\n\n        // Stop store emulation process\n        if (isset($appEmulation, $initialEnvironmentInfo)) {\n            $appEmulation->stopEnvironmentEmulation($initialEnvironmentInfo);\n        }\n\n        // Retrieve corresponding email template id and customer name\n        if ($this->getCustomerIsGuest()) {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_GUEST_TEMPLATE, $storeId);\n            $customerName = $this->getBillingAddress()->getName();\n        } else {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE, $storeId);\n            $customerName = $this->getCustomerName();\n        }\n\n        /** @var Mage_Core_Model_Email_Template_Mailer $mailer */\n        $mailer = Mage::getModel('core/email_template_mailer');\n        /** @var Mage_Core_Model_Email_Info $emailInfo */\n        $emailInfo = Mage::getModel('core/email_info');\n        $emailInfo->addTo($this->getCurrentCustomerEmail(), $customerName);\n        if ($copyTo && $copyMethod == 'bcc') {\n            // Add bcc to customer email\n            foreach ($copyTo as $email) {\n                $emailInfo->addBcc($email);\n            }\n        }\n        $mailer->addEmailInfo($emailInfo);\n\n        // Email copies are sent as separated emails if their copy method is 'copy'\n        if ($copyTo && $copyMethod == 'copy') {\n            foreach ($copyTo as $email) {\n                $emailInfo = Mage::getModel('core/email_info');\n                $emailInfo->addTo($email);\n                $mailer->addEmailInfo($emailInfo);\n            }\n        }\n\n        // Set all required params and send emails\n        $mailer->setSender(Mage::getStoreConfig(self::XML_PATH_EMAIL_IDENTITY, $storeId));\n        $mailer->setStoreId($storeId);\n        $mailer->setTemplateId($templateId);\n        $mailer->setTemplateParams([\n            'order'        => $this,\n            'billing'      => $this->getBillingAddress(),\n            'payment_html' => $paymentBlockHtml\n        ]);\n\n        /** @var Mage_Core_Model_Email_Queue $emailQueue */\n        $emailQueue = Mage::getModel('core/email_queue');\n        $emailQueue->setEntityId($this->getId())\n            ->setEntityType(self::ENTITY)\n            ->setEventType(self::EMAIL_EVENT_NAME_NEW_ORDER)\n            ->setIsForceCheck(!$forceMode);\n\n        $mailer->setQueue($emailQueue)->send();\n\n        $this->setEmailSent(true);\n        $this->_getResource()->saveAttribute($this, 'email_sent');\n\n        return $this;\n    }\n\n    /**\n     * Send email with order data\n     *\n     * @return $this\n     */\n    public function sendNewOrderEmail()\n    {\n        $this->queueNewOrderEmail(true);\n        return $this;\n    }\n\n    /**\n     * Queue email with order update information\n     *\n     * @param bool $notifyCustomer\n     * @param string $comment\n     * @param bool $forceMode if true then email will be sent regardless of the fact that it was already sent previously\n     *\n     * @return $this\n     */\n    public function queueOrderUpdateEmail($notifyCustomer = true, $comment = '', $forceMode = false)\n    {\n        $storeId = $this->getStore()->getId();\n\n        if (!Mage::helper('sales')->canSendOrderCommentEmail($storeId)) {\n            return $this;\n        }\n        // Get the destination email addresses to send copies to\n        $copyTo = $this->_getEmails(self::XML_PATH_UPDATE_EMAIL_COPY_TO);\n        $copyMethod = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_COPY_METHOD, $storeId);\n        // Check if at least one recipient is found\n        if (!$notifyCustomer && !$copyTo) {\n            return $this;\n        }\n\n        // Retrieve corresponding email template id and customer name\n        if ($this->getCustomerIsGuest()) {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_GUEST_TEMPLATE, $storeId);\n            $customerName = $this->getBillingAddress()->getName();\n        } else {\n            $templateId = Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_TEMPLATE, $storeId);\n            $customerName = $this->getCustomerName();\n        }\n\n        /** @var Mage_Core_Model_Email_Template_Mailer $mailer */\n        $mailer = Mage::getModel('core/email_template_mailer');\n        if ($notifyCustomer) {\n            /** @var Mage_Core_Model_Email_Info $emailInfo */\n            $emailInfo = Mage::getModel('core/email_info');\n            $emailInfo->addTo($this->getCurrentCustomerEmail(), $customerName);\n            if ($copyTo && $copyMethod == 'bcc') {\n                // Add bcc to customer email\n                foreach ($copyTo as $email) {\n                    $emailInfo->addBcc($email);\n                }\n            }\n            $mailer->addEmailInfo($emailInfo);\n        }\n\n        // Email copies are sent as separated emails if their copy method is\n        // 'copy' or a customer should not be notified\n        if ($copyTo && ($copyMethod == 'copy' || !$notifyCustomer)) {\n            foreach ($copyTo as $email) {\n                $emailInfo = Mage::getModel('core/email_info');\n                $emailInfo->addTo($email);\n                $mailer->addEmailInfo($emailInfo);\n            }\n        }\n\n        // Set all required params and send emails\n        $mailer->setSender(Mage::getStoreConfig(self::XML_PATH_UPDATE_EMAIL_IDENTITY, $storeId));\n        $mailer->setStoreId($storeId);\n        $mailer->setTemplateId($templateId);\n        $mailer->setTemplateParams([\n                'order'   => $this,\n                'comment' => $comment,\n                'billing' => $this->getBillingAddress()\n        ]);\n\n        /** @var Mage_Core_Model_Email_Queue $emailQueue */\n        $emailQueue = Mage::getModel('core/email_queue');\n        $emailQueue->setEntityId($this->getId())\n            ->setEntityType(self::ENTITY)\n            ->setEventType(self::EMAIL_EVENT_NAME_UPDATE_ORDER)\n            ->setIsForceCheck(!$forceMode);\n        $mailer->setQueue($emailQueue)->send();\n\n        return $this;\n    }\n\n    /**\n     * Send email with order update information\n     *\n     * @param bool $notifyCustomer\n     * @param string $comment\n     *\n     * @return $this\n     */\n    public function sendOrderUpdateEmail($notifyCustomer = true, $comment = '')\n    {\n        $this->queueOrderUpdateEmail($notifyCustomer, $comment, true);\n        return $this;\n    }\n\n    /**\n     * @param string $configPath\n     * @return array|false\n     */\n    protected function _getEmails($configPath)\n    {\n        $data = Mage::getStoreConfig($configPath, $this->getStoreId());\n        if (!empty($data)) {\n            return explode(',', $data);\n        }\n        return false;\n    }\n\n    /*********************** ADDRESSES ***************************/\n\n    /**\n     * @return Mage_Sales_Model_Resource_Order_Address_Collection\n     */\n    public function getAddressesCollection()\n    {\n        if (is_null($this->_addresses)) {\n            $this->_addresses = Mage::getResourceModel('sales/order_address_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_addresses as $address) {\n                    $address->setOrder($this);\n                }\n            }\n        }\n\n        return $this->_addresses;\n    }\n\n    /**\n     * @param int|string $addressId\n     * @return false|Mage_Sales_Model_Order_Address\n     */\n    public function getAddressById($addressId)\n    {\n        foreach ($this->getAddressesCollection() as $address) {\n            if ($address->getId() == $addressId) {\n                return $address;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Address $address\n     * @return $this\n     * @throws Exception\n     */\n    public function addAddress(Mage_Sales_Model_Order_Address $address)\n    {\n        $address->setOrder($this)->setParentId($this->getId());\n        if (!$address->getId()) {\n            $this->getAddressesCollection()->addItem($address);\n        }\n        return $this;\n    }\n\n    /**\n     * @param array $filterByTypes\n     * @param bool $nonChildrenOnly\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getItemsCollection($filterByTypes = [], $nonChildrenOnly = false)\n    {\n        if (is_null($this->_items)) {\n            $this->_items = Mage::getResourceModel('sales/order_item_collection')\n                ->setOrderFilter($this);\n\n            if ($filterByTypes) {\n                $this->_items->filterByTypes($filterByTypes);\n            }\n            if ($nonChildrenOnly) {\n                $this->_items->filterByParent();\n            }\n\n            if ($this->getId()) {\n                foreach ($this->_items as $item) {\n                    $item->setOrder($this);\n                }\n            }\n        }\n        return $this->_items;\n    }\n\n    /**\n     * Get random items collection with related children\n     *\n     * @param int $limit\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getItemsRandomCollection($limit = 1)\n    {\n        return $this->_getItemsRandomCollection($limit);\n    }\n\n    /**\n     * Get random items collection without related children\n     *\n     * @param int $limit\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    public function getParentItemsRandomCollection($limit = 1)\n    {\n        return $this->_getItemsRandomCollection($limit, true);\n    }\n\n    /**\n     * Get random items collection with or without related children\n     *\n     * @param int $limit\n     * @param bool $nonChildrenOnly\n     * @return Mage_Sales_Model_Resource_Order_Item_Collection\n     */\n    protected function _getItemsRandomCollection($limit, $nonChildrenOnly = false)\n    {\n        $collection = Mage::getModel('sales/order_item')->getCollection()\n            ->setOrderFilter($this)\n            ->setRandomOrder();\n\n        if ($nonChildrenOnly) {\n            $collection->filterByParent();\n        }\n        $products = [];\n        /** @var Mage_Sales_Model_Order_Item $item */\n        foreach ($collection as $item) {\n            $products[] = $item->getProductId();\n        }\n\n        $productsCollection = Mage::getModel('catalog/product')\n            ->getCollection()\n            ->addIdFilter($products)\n            ->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInSiteIds())\n            /* Price data is added to consider item stock status using price index */\n            ->addPriceData()\n            ->setPageSize($limit)\n            ->load();\n\n        foreach ($collection as $item) {\n            $product = $productsCollection->getItemById($item->getProductId());\n            if ($product) {\n                $item->setProduct($product);\n            }\n        }\n\n        return $collection;\n    }\n\n    /**\n     * @return Mage_Sales_Model_Order_Item[]\n     */\n    public function getAllItems()\n    {\n        $items = [];\n        foreach ($this->getItemsCollection() as $item) {\n            if (!$item->isDeleted()) {\n                $items[] =  $item;\n            }\n        }\n        return $items;\n    }\n\n    /**\n     * @return array\n     */\n    public function getAllVisibleItems()\n    {\n        $items = [];\n        foreach ($this->getItemsCollection() as $item) {\n            if (!$item->isDeleted() && !$item->getParentItemId()) {\n                $items[] = $item;\n            }\n        }\n        return $items;\n    }\n\n    /**\n     * @param int $itemId\n     * @return Mage_Sales_Model_Order_Item|null\n     */\n    public function getItemById($itemId)\n    {\n        return $this->getItemsCollection()->getItemById($itemId);\n    }\n\n    /**\n     * @param int $quoteItemId\n     * @return Mage_Sales_Model_Order_Item|null\n     */\n    public function getItemByQuoteItemId($quoteItemId)\n    {\n        foreach ($this->getItemsCollection() as $item) {\n            if ($item->getQuoteItemId() == $quoteItemId) {\n                return $item;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Item $item\n     * @return $this\n     * @throws Exception\n     */\n    public function addItem(Mage_Sales_Model_Order_Item $item)\n    {\n        $item->setOrder($this);\n        if (!$item->getId()) {\n            $this->getItemsCollection()->addItem($item);\n        }\n        return $this;\n    }\n\n    /**\n     * Whether the order has nominal items only\n     *\n     * @return bool\n     */\n    public function isNominal()\n    {\n        foreach ($this->getAllVisibleItems() as $item) {\n            if ($item->getIsNominal() == '0') {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /*********************** PAYMENTS ***************************/\n\n    /**\n     * @return Mage_Sales_Model_Resource_Order_Payment_Collection\n     */\n    public function getPaymentsCollection()\n    {\n        if (is_null($this->_payments)) {\n            $this->_payments = Mage::getResourceModel('sales/order_payment_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_payments as $payment) {\n                    $payment->setOrder($this);\n                }\n            }\n        }\n        return $this->_payments;\n    }\n\n    /**\n     * @return Mage_Sales_Model_Order_Payment[]\n     */\n    public function getAllPayments()\n    {\n        $payments = [];\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if (!$payment->isDeleted()) {\n                $payments[] =  $payment;\n            }\n        }\n        return $payments;\n    }\n\n    /**\n     * @param int $paymentId\n     * @return bool|Mage_Sales_Model_Order_Payment\n     */\n    public function getPaymentById($paymentId)\n    {\n        foreach ($this->getPaymentsCollection() as $payment) {\n            if ($payment->getId() == $paymentId) {\n                return $payment;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return $this\n     * @throws Exception\n     */\n    public function addPayment(Mage_Sales_Model_Order_Payment $payment)\n    {\n        $payment->setOrder($this)\n            ->setParentId($this->getId());\n        if (!$payment->getId()) {\n            $this->getPaymentsCollection()->addItem($payment);\n        }\n        return $this;\n    }\n\n    /**\n     * @param Mage_Sales_Model_Order_Payment $payment\n     * @return Mage_Sales_Model_Order_Payment\n     */\n    public function setPayment(Mage_Sales_Model_Order_Payment $payment)\n    {\n        if (!$this->getIsMultiPayment() && ($old = $this->getPayment())) {\n            $payment->setId($old->getId());\n        }\n        $this->addPayment($payment);\n        return $payment;\n    }\n\n    /*********************** STATUSES ***************************/\n\n    /**\n     * @param bool $reload\n     * @return Mage_Sales_Model_Resource_Order_Status_History_Collection\n     */\n    public function getStatusHistoryCollection($reload = false)\n    {\n        if (is_null($this->_statusHistory) || $reload) {\n            $this->_statusHistory = Mage::getResourceModel('sales/order_status_history_collection')\n                ->setOrderFilter($this)\n                ->setOrder('created_at', 'desc')\n                ->setOrder('entity_id', 'desc');\n\n            if ($this->getId()) {\n                foreach ($this->_statusHistory as $status) {\n                    $status->setOrder($this);\n                }\n            }\n        }\n        return $this->_statusHistory;\n    }\n\n    /**\n     * Return collection of order status history items.\n     *\n     * @return Mage_Sales_Model_Order_Status_History[]\n     */\n    public function getAllStatusHistory()\n    {\n        $history = [];\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if (!$status->isDeleted()) {\n                $history[] =  $status;\n            }\n        }\n        return $history;\n    }\n\n    /**\n     * Return collection of visible on frontend order status history items.\n     *\n     * @return array\n     */\n    public function getVisibleStatusHistory()\n    {\n        $history = [];\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if (!$status->isDeleted() && $status->getComment() && $status->getIsVisibleOnFront()) {\n                $history[] =  $status;\n            }\n        }\n        return $history;\n    }\n\n    /**\n     * @param int $statusId\n     * @return false|Mage_Sales_Model_Order_Status_History\n     */\n    public function getStatusHistoryById($statusId)\n    {\n        foreach ($this->getStatusHistoryCollection() as $status) {\n            if ($status->getId() == $statusId) {\n                return $status;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Set the order status history object and the order object to each other\n     * Adds the object to the status history collection, which is automatically saved when the order is saved.\n     * See the entity_id attribute backend model.\n     * Or the history record can be saved standalone after this.\n     *\n     * @param Mage_Sales_Model_Order_Status_History $history\n     * @return $this\n     */\n    public function addStatusHistory(Mage_Sales_Model_Order_Status_History $history)\n    {\n        $history->setOrder($this);\n        $this->setStatus($history->getStatus());\n        if (!$history->getId()) {\n            $this->getStatusHistoryCollection()->addItem($history);\n        }\n        return $this;\n    }\n\n    /**\n     * @return string\n     */\n    public function getRealOrderId()\n    {\n        $id = $this->getData('real_order_id');\n        if (is_null($id)) {\n            $id = $this->getIncrementId();\n        }\n        return $id;\n    }\n\n    /**\n     * Get currency model instance. Will be used currency with which order placed\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getOrderCurrency()\n    {\n        if (is_null($this->_orderCurrency)) {\n            $this->_orderCurrency = Mage::getModel('directory/currency')->load($this->getOrderCurrencyCode());\n        }\n        return $this->_orderCurrency;\n    }\n\n    /**\n     * Get formatted price value including order currency rate to order website currency\n     *\n     * @param   float $price\n     * @param   bool  $addBrackets\n     * @return  string\n     */\n    public function formatPrice($price, $addBrackets = false)\n    {\n        return $this->formatPricePrecision($price, 2, $addBrackets);\n    }\n\n    /**\n     * @param float $price\n     * @param int $precision\n     * @param bool $addBrackets\n     * @return string\n     */\n    public function formatPricePrecision($price, $precision, $addBrackets = false)\n    {\n        return $this->getOrderCurrency()->formatPrecision($price, $precision, [], true, $addBrackets);\n    }\n\n    /**\n     * Retrieve currency formatted string.\n     *\n     * @param float|string $price Numeric value or field name, e.g. \"grand_total\".\n     * @return string\n     */\n    public function formatPriceTxt($price)\n    {\n        $price = (float) (is_numeric($price) ? $price : $this->_getData($price));\n        return $this->getOrderCurrency()->formatTxt($price);\n    }\n\n    /**\n     * Retrieve order website currency for working with base prices\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getBaseCurrency()\n    {\n        if (is_null($this->_baseCurrency)) {\n            $this->_baseCurrency = Mage::getModel('directory/currency')->load($this->getBaseCurrencyCode());\n        }\n        return $this->_baseCurrency;\n    }\n\n    /**\n     * Retrieve order website currency for working with base prices\n     * @deprecated  please use getBaseCurrency instead.\n     *\n     * @return Mage_Directory_Model_Currency\n     */\n    public function getStoreCurrency()\n    {\n        return $this->getData('store_currency');\n    }\n\n    /**\n     * @param float $price\n     * @return string\n     */\n    public function formatBasePrice($price)\n    {\n        return $this->formatBasePricePrecision($price, 2);\n    }\n\n    /**\n     * @param float $price\n     * @param int $precision\n     * @return string\n     */\n    public function formatBasePricePrecision($price, $precision)\n    {\n        return $this->getBaseCurrency()->formatPrecision($price, $precision);\n    }\n\n    /**\n     * @return bool\n     */\n    public function isCurrencyDifferent()\n    {\n        return $this->getOrderCurrencyCode() != $this->getBaseCurrencyCode();\n    }\n\n    /**\n     * Retrieve order total due value\n     *\n     * @return float\n     */\n    public function getTotalDue()\n    {\n        $total = $this->getGrandTotal() - $this->getTotalPaid();\n        $total = Mage::app()->getStore($this->getStoreId())->roundPrice($total);\n        return max($total, 0);\n    }\n\n    /**\n     * Retrieve order total due value\n     *\n     * @return float\n     */\n    public function getBaseTotalDue()\n    {\n        $total = $this->getBaseGrandTotal() - $this->getBaseTotalPaid();\n        $total = Mage::app()->getStore($this->getStoreId())->roundPrice($total);\n        return max($total, 0);\n    }\n\n    /**\n     * @param string $key\n     * @param int|string|null $index\n     * @return float|mixed\n     */\n    public function getData($key = '', $index = null)\n    {\n        if ($key == 'total_due') {\n            return $this->getTotalDue();\n        }\n        if ($key == 'base_total_due') {\n            return $this->getBaseTotalDue();\n        }\n        return parent::getData($key, $index);\n    }\n\n    /**\n     * Retrieve order invoices collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Invoice_Collection\n     */\n    public function getInvoiceCollection()\n    {\n        if (is_null($this->_invoices)) {\n            $this->_invoices = Mage::getResourceModel('sales/order_invoice_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                foreach ($this->_invoices as $invoice) {\n                    $invoice->setOrder($this);\n                }\n            }\n        }\n        return $this->_invoices;\n    }\n\n    /**\n     * Retrieve order invoices collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Invoice_Collection\n     */\n    public function getInvoicesCollection()\n    {\n        return $this->getInvoiceCollection();\n    }\n\n    /**\n     * Retrieve order shipments collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Shipment_Collection|false\n     */\n    public function getShipmentsCollection()\n    {\n        if (empty($this->_shipments)) {\n            if ($this->getId()) {\n                $this->_shipments = Mage::getResourceModel('sales/order_shipment_collection')\n                    ->setOrderFilter($this)\n                    ->load();\n            } else {\n                return false;\n            }\n        }\n        return $this->_shipments;\n    }\n\n    /**\n     * Retrieve order creditmemos collection\n     *\n     * @return  Mage_Sales_Model_Resource_Order_Creditmemo_Collection|Mage_Sales_Model_Order_Creditmemo[]|false\n     */\n    public function getCreditmemosCollection()\n    {\n        if (empty($this->_creditmemos)) {\n            if ($this->getId()) {\n                $this->_creditmemos = Mage::getResourceModel('sales/order_creditmemo_collection')\n                    ->setOrderFilter($this)\n                    ->load();\n            } else {\n                return false;\n            }\n        }\n        return $this->_creditmemos;\n    }\n\n    /**\n     * Retrieve order tracking numbers collection\n     *\n     * @return Mage_Sales_Model_Resource_Order_Shipment_Track_Collection\n     */\n    public function getTracksCollection()\n    {\n        if (empty($this->_tracks)) {\n            $this->_tracks = Mage::getResourceModel('sales/order_shipment_track_collection')\n                ->setOrderFilter($this);\n\n            if ($this->getId()) {\n                $this->_tracks->load();\n            }\n        }\n        return $this->_tracks;\n    }\n\n    /**\n     * Check order invoices availability\n     *\n     * @return int\n     */\n    public function hasInvoices()\n    {\n        return $this->getInvoiceCollection()->count();\n    }\n\n    /**\n     * Check order shipments availability\n     *\n     * @return bool\n     */\n    public function hasShipments()\n    {\n        $result = false;\n        $shipmentsCollection = $this->getShipmentsCollection();\n        if ($shipmentsCollection) {\n            $result = (bool)$shipmentsCollection->count();\n        }\n        return $result;\n    }\n\n    /**\n     * Check order creditmemos availability\n     *\n     * @return bool\n     */\n    public function hasCreditmemos()\n    {\n        $result = false;\n        $creditmemosCollection = $this->getCreditmemosCollection();\n        if ($creditmemosCollection) {\n            $result = (bool)$creditmemosCollection->count();\n        }\n        return $result;\n    }\n\n    /**\n     * Retrieve array of related objects\n     *\n     * Used for order saving\n     *\n     * @return array\n     */\n    public function getRelatedObjects()\n    {\n        return $this->_relatedObjects;\n    }\n\n    /**\n     * Retrieve customer name\n     *\n     * @return string\n     */\n    public function getCustomerName()\n    {\n        if ($this->getCustomerFirstname()) {\n            $customerName = Mage::helper('customer')->getFullCustomerName($this);\n        } else {\n            $customerName = Mage::helper('sales')->__('Guest');\n        }\n        return $customerName;\n    }\n\n    /**\n     * Add New object to related array\n     *\n     * @param   Mage_Core_Model_Abstract $object\n     * @return  $this\n     */\n    public function addRelatedObject(Mage_Core_Model_Abstract $object)\n    {\n        $this->_relatedObjects[] = $object;\n        return $this;\n    }\n\n    /**\n     * Get formatted order created date in store timezone\n     *\n     * @param   string $format date format type (short|medium|long|full)\n     * @return  string\n     */\n    public function getCreatedAtFormated($format)\n    {\n        return Mage::helper('core')->formatDate($this->getCreatedAtStoreDate(), $format, true);\n    }\n\n    /**\n     * @return string\n     */\n    public function getEmailCustomerNote()\n    {\n        if ($this->getCustomerNoteNotify()) {\n            return $this->getCustomerNote();\n        }\n        return '';\n    }\n\n    /**\n     * Processing object before save data\n     *\n     * @return Mage_Core_Model_Abstract\n     */\n    protected function _beforeSave()\n    {\n        parent::_beforeSave();\n        $this->_checkState();\n        if (!$this->getId()) {\n            $store = $this->getStore();\n            $name = [$store->getWebsite()->getName(),$store->getGroup()->getName(),$store->getName()];\n            $this->setStoreName(implode(\"\\n\", $name));\n        }\n\n        if (!$this->getIncrementId()) {\n            $incrementId = Mage::getSingleton('eav/config')\n                ->getEntityType('order')\n                ->fetchNewIncrementId($this->getStoreId());\n            $this->setIncrementId($incrementId);\n        }\n\n        /**\n         * Process items dependency for new order\n         */\n        if (!$this->getId()) {\n            $itemsCount = 0;\n            foreach ($this->getAllItems() as $item) {\n                $parent = $item->getQuoteParentItemId();\n                if ($parent && !$item->getParentItem()) {\n                    $item->setParentItem($this->getItemByQuoteItemId($parent));\n                } elseif (!$parent) {\n                    $itemsCount++;\n                }\n            }\n            // Set items count\n            $this->setTotalItemCount($itemsCount);\n        }\n        if ($this->getCustomer()) {\n            $this->setCustomerId($this->getCustomer()->getId());\n        }\n\n        if ($this->hasBillingAddressId() && $this->getBillingAddressId() === null) {\n            $this->unsBillingAddressId();\n        }\n\n        if ($this->hasShippingAddressId() && $this->getShippingAddressId() === null) {\n            $this->unsShippingAddressId();\n        }\n\n        if (!$this->getId()) {\n            $this->setData('protect_code', Mage::helper('core')->getRandomString(16));\n        }\n\n        if ($this->getStatus() !== $this->getOrigData('status')) {\n            Mage::dispatchEvent('order_status_changed_before_save', ['order' => $this]);\n        }\n\n        return $this;\n    }\n\n    /**\n     * Check order state before saving\n     */\n    protected function _checkState()\n    {\n        if (!$this->getId()) {\n            return $this;\n        }\n\n        $userNotification = $this->hasCustomerNoteNotify() ? $this->getCustomerNoteNotify() : null;\n\n        if (!$this->isCanceled()\n            && !$this->canUnhold()\n            && !$this->canInvoice()\n            && !$this->canShip()\n        ) {\n            if ($this->getBaseGrandTotal() == 0 || $this->canCreditmemo()) {\n                if ($this->getState() !== self::STATE_COMPLETE) {\n                    $this->_setState(self::STATE_COMPLETE, true, '', $userNotification);\n                }\n            } elseif ((float) $this->getTotalRefunded() || (!$this->getTotalRefunded()\n                && $this->hasForcedCanCreditmemo())\n                /**\n                 * Order can be closed just in case when we have refunded amount.\n                 * In case of \"0\" grand total order checking ForcedCanCreditmemo flag\n                 */\n            ) {\n                if ($this->getState() !== self::STATE_CLOSED) {\n                    $this->_setState(self::STATE_CLOSED, true, '', $userNotification);\n                }\n            }\n        }\n\n        if ($this->getState() == self::STATE_NEW && $this->getIsInProcess()) {\n            $this->setState(self::STATE_PROCESSING, true, '', $userNotification);\n        }\n        return $this;\n    }\n\n    /**\n     * Save order related objects\n     *\n     * @inheritDoc\n     */\n    protected function _afterSave()\n    {\n        if ($this->_addresses !== null) {\n            $this->_addresses->save();\n            $billingAddress = $this->getBillingAddress();\n            $attributesForSave = [];\n            if ($billingAddress && $this->getBillingAddressId() != $billingAddress->getId()) {\n                $this->setBillingAddressId($billingAddress->getId());\n                $attributesForSave[] = 'billing_address_id';\n            }\n\n            $shippingAddress = $this->getShippingAddress();\n            if ($shippingAddress && $this->getShippingAddressId() != $shippingAddress->getId()) {\n                $this->setShippingAddressId($shippingAddress->getId());\n                $attributesForSave[] = 'shipping_address_id';\n            }\n\n            if (!empty($attributesForSave)) {\n                $this->_getResource()->saveAttribute($this, $attributesForSave);\n            }\n        }\n        if ($this->_items !== null) {\n            $this->_items->save();\n        }\n        if ($this->_payments !== null) {\n            $this->_payments->save();\n        }\n        if ($this->_statusHistory !== null) {\n            $this->_statusHistory->save();\n        }\n        foreach ($this->getRelatedObjects() as $object) {\n            $object->save();\n        }\n        return parent::_afterSave();\n    }\n\n    /**\n     * @return string\n     */\n    public function getStoreGroupName()\n    {\n        $storeId = $this->getStoreId();\n        if (is_null($storeId)) {\n            return $this->getStoreName(1); // 0 - website name, 1 - store group name, 2 - store name\n        }\n        return $this->getStore()->getGroup()->getName();\n    }\n\n    /**\n     * Resets all data in object\n     * so after another load it will be complete new object\n     *\n     * @return $this\n     */\n    public function reset()\n    {\n        $this->unsetData();\n        $this->_actionFlag = [];\n        $this->_addresses = null;\n        $this->_items = null;\n        $this->_payments = null;\n        $this->_statusHistory = null;\n        $this->_invoices = null;\n        $this->_tracks = null;\n        $this->_shipments = null;\n        $this->_creditmemos = null;\n        $this->_relatedObjects = [];\n        $this->_orderCurrency = null;\n        $this->_baseCurrency = null;\n\n        return $this;\n    }\n\n    /**\n     * @return bool\n     */\n    public function getIsNotVirtual()\n    {\n        return !$this->getIsVirtual();\n    }\n\n    /**\n     * @return mixed\n     */\n    public function getFullTaxInfo()\n    {\n        $rates = Mage::getModel('tax/sales_order_tax')->getCollection()->loadByOrder($this)->toArray();\n        return Mage::getSingleton('tax/calculation')->reproduceProcess($rates['items']);\n    }\n\n    /**\n     * Create new invoice with maximum qty for invoice for each item\n     *\n     * @param array $qtys\n     * @return Mage_Sales_Model_Order_Invoice\n     */\n    public function prepareInvoice($qtys = [])\n    {\n        return Mage::getModel('sales/service_order', $this)->prepareInvoice($qtys);\n    }\n\n    /**\n     * Create new shipment with maximum qty for shipping for each item\n     *\n     * @param array $qtys\n     * @return Mage_Sales_Model_Order_Shipment\n     */\n    public function prepareShipment($qtys = [])\n    {\n        return Mage::getModel('sales/service_order', $this)->prepareShipment($qtys);\n    }\n\n    /**\n     * Check whether order is canceled\n     *\n     * @return bool\n     */\n    public function isCanceled()\n    {\n        return ($this->getState() === self::STATE_CANCELED);\n    }\n\n    /**\n     * Protect order delete from not admin scope\n     * @inheritDoc\n     */\n    protected function _beforeDelete()\n    {\n        $this->_protectFromNonAdmin();\n        return parent::_beforeDelete();\n    }\n}\n", "\"%s\",\"%s\"\n\"%s already exist.\",\"%s already exist.\"\n\"%s already exists.\",\"%s already exists.\"\n\"-- Please Select --\",\"-- Please Select --\"\n\"<strong style=\"\"color:red\"\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain\",\"<strong style=\"\"color:red\"\">Warning!</strong> When using CDN, in some cases JavaScript may not run properly if CDN is not in your subdomain\"\n\"<strong style=\"\"color:red\"\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).\",\"<strong style=\"\"color:red\"\">Warning!</strong> When using Store Code in URLs, in some cases system may not work properly if URLs without Store Codes are specified in the third party services (e.g. PayPal etc.).\"\n\"A category object is required for determining the product request path.\",\"A category object is required for determining the product request path.\"\n\"Add Block Names to Hints\",\"Add Block Names to Hints\"\n\"Add Secret Key To Url\",\"Add Secret Key To Url\"\n\"Add Secret Key to URLs\",\"Add Secret Key to URLs\"\n\"Add Store Code to Urls\",\"Add Store Code to Urls\"\n\"Admin\",\"Admin\"\n\"Admin Base URL\",\"Admin Base URL\"\n\"Admin User Emails\",\"Admin User Emails\"\n\"Admin routing compatibility mode for extensions\",\"Admin routing compatibility mode for extensions\"\n\"Advanced\",\"Advanced\"\n\"Advanced Cache Settings\",\"Advanced Cache Settings\"\n\"After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.\",\"After selecting a new media storage location, press the Synchronize button\n                                to transfer all media to that location. Media will not be available in the new\n                                location until the synchronization process is complete.\"\n\"Allow Countries\",\"Allow Countries\"\n\"Allow Magento Backend to run in frame\",\"Allow Magento Backend to run in frame\"\n\"Allow Magento Frontend to run in frame\",\"Allow Magento Frontend to run in frame\"\n\"Allow Symlinks\",\"Allow Symlinks\"\n\"Allowed IPs (comma separated)\",\"Allowed IPs (comma separated)\"\n\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG, SVG. Not all browsers support all these formats!\",\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG, SVG. Not all browsers support all these formats!\"\n\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG. Not all browsers support all these formats!\",\"Allowed file types: ICO, PNG, GIF, JPG, JPEG, APNG. Not all browsers support all these formats!\"\n\"Allows customers to stay logged in when switching between different stores.\",\"Allows customers to stay logged in when switching between different stores.\"\n\"Alternative text for next link in pagination menu. If empty, default arrow image will used.\",\"Alternative text for next link in pagination menu. If empty, default arrow image will used.\"\n\"Alternative text for previous link in pagination menu. If empty, default arrow image will used.\",\"Alternative text for previous link in pagination menu. If empty, default arrow image will used.\"\n\"An error occurred while saving. Please review the error log.\",\"An error occurred while saving. Please review the error log.\"\n\"Anchor Text for Next\",\"Anchor Text for Next\"\n\"Anchor Text for Previous\",\"Anchor Text for Previous\"\n\"Anchor symbol (#) is not supported in request path\",\"Anchor symbol (#) is not supported in request path\"\n\"Anchor symbol (#) is not supported in url rewrite suffix\",\"Anchor symbol (#) is not supported in url rewrite suffix\"\n\"Are you sure?\",\"Are you sure?\"\n\"Auto-redirect to Base URL\",\"Auto-redirect to Base URL\"\n\"Back\",\"Back\"\n\"Backup Options\",\"Backup Options\"\n\"Base JavaScript URL\",\"Base JavaScript URL\"\n\"Base Link URL\",\"Base Link URL\"\n\"Base Media URL\",\"Base Media URL\"\n\"Base Secure URL\",\"Base Secure URL\"\n\"Base Skin URL\",\"Base Skin URL\"\n\"Base URL\",\"Base URL\"\n\"Base Unsecure URL\",\"Base Unsecure URL\"\n\"Before modifying the store view code please make sure that it is not used in index.php.\",\"Before modifying the store view code please make sure that it is not used in index.php.\"\n\"Before modifying the website code please make sure that it is not used in index.php.\",\"Before modifying the website code please make sure that it is not used in index.php.\"\n\"Block with name \"\"%s\"\" already exists\",\"Block with name \"\"%s\"\" already exists\"\n\"Browser Capabilities Detection\",\"Browser Capabilities Detection\"\n\"CSRF protection\",\"CSRF protection\"\n\"CSS Settings\",\"CSS Settings\"\n\"Cache Storage Management\",\"Cache Storage Management\"\n\"Cache storage may contain additional data. Are you sure that you want flush it?\",\"Cache storage may contain additional data. Are you sure that you want flush it?\"\n\"Can not create invoice. Order was not found.\",\"Can not create invoice. Order was not found.\"\n\"Can't retrieve request object\",\"Can't retrieve request object\"\n\"Can't retrieve entity config: %s\",\"Can't retrieve entity config: %s\"\n\"Cancel\",\"Cancel\"\n\"Cannot complete this operation from non-admin area.\",\"Cannot complete this operation from non-admin area.\"\n\"Card type does not match credit card number.\",\"Card type does not match credit card number.\"\n\"Code\",\"Code\"\n\"Controller file was loaded but class does not exist\",\"Controller file was loaded but class does not exist\"\n\"Cookie Domain\",\"Cookie Domain\"\n\"Cookie Lifetime\",\"Cookie Lifetime\"\n\"Cookie Path\",\"Cookie Path\"\n\"Cookie Restriction Mode\",\"Cookie Restriction Mode\"\n\"Copyright\",\"Copyright\"\n\"Core\",\"Core\"\n\"Countries Options\",\"Countries Options\"\n\"Country\",\"Country\"\n\"Create Store\",\"Create Store\"\n\"Create Store View\",\"Create Store View\"\n\"Create Website\",\"Create Website\"\n\"Credit card number does not match credit card type.\",\"Credit card number does not match credit card type.\"\n\"Cron Expression for Cache Flushing\",\"Cron Expression for Cache Flushing\"\n\"Current Package Name\",\"Current Package Name\"\n\"Custom Admin Path\",\"Custom Admin Path\"\n\"Custom Admin URL\",\"Custom Admin URL\"\n\"Custom Design\",\"Custom Design\"\n\"Custom Email 1\",\"Custom Email 1\"\n\"Custom Email 2\",\"Custom Email 2\"\n\"Custom Variables\",\"Custom Variables\"\n\"Custom1 Contact Email\",\"Custom1 Contact Email\"\n\"Custom1 Contact Name\",\"Custom1 Contact Name\"\n\"Custom2 Contact Email\",\"Custom2 Contact Email\"\n\"Custom2 Contact Name\",\"Custom2 Contact Name\"\n\"Customer Support\",\"Customer Support\"\n\"Dashboard\",\"Dashboard\"\n\"Date From\",\"Date From\"\n\"Date To\",\"Date To\"\n\"Date/time format \"\"%s\"\" is not supported.\",\"Date/time format \"\"%s\"\" is not supported.\"\n\"Debug\",\"Debug\"\n\"Default\",\"Default\"\n\"Default Country\",\"Default Country\"\n\"Default Description\",\"Default Description\"\n\"Default Keywords\",\"Default Keywords\"\n\"Default No-route URL\",\"Default No-route URL\"\n\"Default Pages\",\"Default Pages\"\n\"Default Robots\",\"Default Robots\"\n\"Default Store\",\"Default Store\"\n\"Default Store View\",\"Default Store View\"\n\"Default Title\",\"Default Title\"\n\"Default Web URL\",\"Default Web URL\"\n\"Delete\",\"Delete\"\n\"Delete Store\",\"Delete Store\"\n\"Delete Store View\",\"Delete Store View\"\n\"Delete Website\",\"Delete Website\"\n\"Deleting a %1$s will not delete the information associated with the %1$s (e.g. categories, products, etc.), but the %1$s will not be able to be restored. It is suggested that you create a database backup before deleting the %1$s.\",\"Deleting a %1$s will not delete the information associated with the %1$s (e.g. categories, products, etc.), but the %1$s will not be able to be restored. It is suggested that you create a database backup before deleting the %1$s.\"\n\"Design\",\"Design\"\n\"Design Change\",\"Design Change\"\n\"Developer\",\"Developer\"\n\"Developer Client Restrictions\",\"Developer Client Restrictions\"\n\"Disable Email Communications\",\"Disable Email Communications\"\n\"Disable Modules Output\",\"Disable Modules Output\"\n\"Disallowed block name for frontend.\",\"Disallowed block name for frontend.\"\n\"Disallowed template variable method.\",\"Disallowed template variable method.\"\n\"Display Demo Store Notice\",\"Display Demo Store Notice\"\n\"Duplicate Of Template Name\",\"Duplicate Of Template Name\"\n\"Edit Design Change\",\"Edit Design Change\"\n\"Edit Store\",\"Edit Store\"\n\"Edit Store View\",\"Edit Store View\"\n\"Edit Website\",\"Edit Website\"\n\"Email - Footer\",\"Email - Footer\"\n\"Email - Header\",\"Email - Header\"\n\"Email Footer Template\",\"Email Footer Template\"\n\"Email Header Template\",\"Email Header Template\"\n\"Empty identifier field name\",\"Empty identifier field name\"\n\"Empty main table name\",\"Empty main table name\"\n\"Enable Charts\",\"Enable Charts\"\n\"Enabled\",\"Enabled\"\n\"Enabled for Admin\",\"Enabled for Admin\"\n\"Enabled for Frontend\",\"Enabled for Frontend\"\n\"Enabling ability to run Magento in a frame is not recommended for security reasons.\",\"Enabling ability to run Magento in a frame is not recommended for security reasons.\"\n\"Enabling this setting increases risk of automated attacks against admin functionality.\",\"Enabling this setting increases risk of automated attacks against admin functionality.\"\n\"Environment Update Time\",\"Environment Update Time\"\n\"Error in file: \"\"%s\"\" - %s\",\"Error in file: \"\"%s\"\" - %s\"\n\"European Union Countries\",\"European Union Countries\"\n\"Exceptions Log File Name\",\"Exceptions Log File Name\"\n\"Favicon Icon\",\"Favicon Icon\"\n\"File %s does not exist\",\"File %s does not exist\"\n\"File %s is not readable\",\"File %s is not readable\"\n\"File name is too long. Maximum length is %s.\",\"File name is too long. Maximum length is %s.\"\n\"File not found\",\"File not found\"\n\"File system\",\"File system\"\n\"File with an extension \"\"%value%\"\" is protected and cannot be uploaded\",\"File with an extension \"\"%value%\"\" is protected and cannot be uploaded\"\n\"First Day of Week\",\"First Day of Week\"\n\"Flush Cache Storage\",\"Flush Cache Storage\"\n\"Flush OpenMage Cache\",\"Flush OpenMage Cache\"\n\"Footer\",\"Footer\"\n\"Forgot Password Email Sender\",\"Forgot Password Email Sender\"\n\"Forgot Password Email Template\",\"Forgot Password Email Template\"\n\"General\",\"General\"\n\"General Contact\",\"General Contact\"\n\"General Contact Email\",\"General Contact Email\"\n\"General Contact Name\",\"General Contact Name\"\n\"General Settings\",\"General Settings\"\n\"Get info about current Magento installation\",\"Get info about current Magento installation\"\n\"Global\",\"Global\"\n\"HTML Head\",\"HTML Head\"\n\"HTML filtration has failed.\",\"HTML filtration has failed.\"\n\"HTML tags are not allowed\",\"HTML tags are not allowed\"\n\"Header\",\"Header\"\n\"Helper attributes should not be used in custom layout updates.\",\"Helper attributes should not be used in custom layout updates.\"\n\"Host\",\"Host\"\n\"How many links to display at once.\",\"How many links to display at once.\"\n\"ID Path for Specified Store\",\"ID Path for Specified Store\"\n\"If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.\",\"If the current frame position does not cover utmost pages, will render link to current position plus/minus this value.\"\n\"Image Reprocess Quality\",\"Image Reprocess Quality\"\n\"Incorrect credit card expiration date.\",\"Incorrect credit card expiration date.\"\n\"Input type \"\"%value%\"\" not found in the input types list.\",\"Input type \"\"%value%\"\" not found in the input types list.\"\n\"Invalid MIME type.\",\"Invalid MIME type.\"\n\"Invalid URL '%value%'.\",\"Invalid URL '%value%'.\"\n\"Invalid URL scheme.\",\"Invalid URL scheme.\"\n\"Invalid base url type\",\"Invalid base url type\"\n\"Invalid block type: %s\",\"Invalid block type: %s\"\n\"Invalid block: %s\",\"Invalid block: %s\"\n\"Invalid connection\",\"Invalid connection\"\n\"Invalid date\",\"Invalid date\"\n\"Invalid image.\",\"Invalid image.\"\n\"Invalid layout update handle\",\"Invalid layout update handle\"\n\"Invalid messages storage \"\"%s\"\" for layout messages initialization\",\"Invalid messages storage \"\"%s\"\" for layout messages initialization\"\n\"Invalid query\",\"Invalid query\"\n\"Invalid stream.\",\"Invalid stream.\"\n\"Invalid template path used in layout update.\",\"Invalid template path used in layout update.\"\n\"Invalid transactional email code: %s\",\"Invalid transactional email code: %s\"\n\"Invalid website's configuration path: %s\",\"Invalid website's configuration path: %s\"\n\"JavaScript Settings\",\"JavaScript Settings\"\n\"Layout\",\"Layout\"\n\"Leave empty for access from any location.\",\"Leave empty for access from any location.\"\n\"List of stores\",\"List of stores\"\n\"Locale\",\"Locale\"\n\"Locale Options\",\"Locale Options\"\n\"Log Settings\",\"Log Settings\"\n\"Logging from Mage::log(). File is located in {{base_dir}}/var/log\",\"Logging from Mage::log(). File is located in {{base_dir}}/var/log\"\n\"Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\",\"Logging from Mage::log(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\"\n\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log\",\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log\"\n\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\",\"Logging from Mage::logException(). File is located in {{base_dir}}/var/log. Allowed file extensions: log, txt, html, csv\"\n\"Login is Case Sensitive\",\"Login is Case Sensitive\"\n\"Logo Image\",\"Logo Image\"\n\"Logo Image Alt\",\"Logo Image Alt\"\n\"Logo Image Src\",\"Logo Image Src\"\n\"Magento info\",\"Magento info\"\n\"Magento info API\",\"Magento info API\"\n\"Mail Sending Settings\",\"Mail Sending Settings\"\n\"Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/\",\"Make sure that base URL ends with '/' (slash), e.g. http://yourdomain/magento/\"\n\"Manage Stores\",\"Manage Stores\"\n\"Match expressions in the same order as displayed in the configuration.\",\"Match expressions in the same order as displayed in the configuration.\"\n\"Maximum Log Level\",\"Maximum Log Level\"\n\"Media Storage\",\"Media Storage\"\n\"Merge CSS Files\",\"Merge CSS Files\"\n\"Merge JavaScript Files\",\"Merge JavaScript Files\"\n\"Message recipients data must be set.\",\"Message recipients data must be set.\"\n\"Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.\",\"Messages with a priority lower than the selected one will not be logged. Log Levels are ordered from highest to lowest priority.\"\n\"Miscellaneous HTML\",\"Miscellaneous HTML\"\n\"Miscellaneous Scripts\",\"Miscellaneous Scripts\"\n\"Model collection resource name is not defined.\",\"Model collection resource name is not defined.\"\n\"Module \"\"%1$s\"\" cannot depend on \"\"%2$s\"\".\",\"Module \"\"%1$s\"\" cannot depend on \"\"%2$s\"\".\"\n\"Module \"\"%1$s\"\" requires module \"\"%2$s\"\".\",\"Module \"\"%1$s\"\" requires module \"\"%2$s\"\".\"\n\"Name\",\"Name\"\n\"New Admin User Create Notification\",\"New Admin User Create Notification\"\n\"New Admin User Email Template\",\"New Admin User Email Template\"\n\"New Design Change\",\"New Design Change\"\n\"New Store\",\"New Store\"\n\"New Store View\",\"New Store View\"\n\"New Website\",\"New Website\"\n\"No\",\"No\"\n\"Offloader header\",\"Offloader header\"\n\"The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.\",\"The recommended value is 85, a higher value will increase the file size. You can set the value to 0 to disable image processing, but it may cause security risks.\"\n\"PHP SOAP extension is required.\",\"PHP SOAP extension is required.\"\n\"Package\",\"Package\"\n\"Pagination\",\"Pagination\"\n\"Pagination Frame\",\"Pagination Frame\"\n\"Pagination Frame Skip\",\"Pagination Frame Skip\"\n\"Parent directory does not exist: %s\",\"Parent directory does not exist: %s\"\n\"Path \"\"%value%\"\" is not available and cannot be used.\",\"Path \"\"%value%\"\" is not available and cannot be used.\"\n\"Path \"\"%value%\"\" is protected and cannot be used.\",\"Path \"\"%value%\"\" is protected and cannot be used.\"\n\"Path \"\"%value%\"\" may not include parent directory traversal (\"\"../\"\", \"\"..\\\\).\"\"\",\"Path \"\"%value%\"\" may not include parent directory traversal (\"\"../\"\", \"\"..\\\\).\"\"\"\n\"Please define flag code.\",\"Please define flag code.\"\n\"Please do not use \"\"event\"\" for an attribute code.\",\"Please do not use \"\"event\"\" for an attribute code.\"\n\"Please do not use event\"\" for an attribute code.\"\"\",\"Please do not use event\"\" for an attribute code.\"\"\"\n\"Please enter 6 or more characters without leading or trailing spaces.\",\"Please enter 6 or more characters without leading or trailing spaces.\"\n\"Please enter 7 or more characters. Password should contain both numeric and alphabetic characters.\",\"Please enter 7 or more characters. Password should contain both numeric and alphabetic characters.\"\n\"Please enter a number 0 or greater in this field.\",\"Please enter a number 0 or greater in this field.\"\n\"Please enter a number 1 or greater in this field.\",\"Please enter a number 1 or greater in this field.\"\n\"Please enter a number greater than 0 in this field.\",\"Please enter a number greater than 0 in this field.\"\n\"Please enter a number lower than 100.\",\"Please enter a number lower than 100.\"\n\"Please enter a valid $ amount. For example $100.00.\",\"Please enter a valid $ amount. For example $100.00.\"\n\"Please enter a valid URL Key. For example \"\"example-page\"\", \"\"example-page.html\"\" or \"\"anotherlevel/example-page\"\".\",\"Please enter a valid URL Key. For example \"\"example-page\"\", \"\"example-page.html\"\" or \"\"anotherlevel/example-page\"\".\"\n\"Please enter a valid URL. For example http://www.example.com or www.example.com\",\"Please enter a valid URL. For example http://www.example.com or www.example.com\"\n\"Please enter a valid URL. Protocol is required (http://, https:// or ftp://)\",\"Please enter a valid URL. Protocol is required (http://, https:// or ftp://)\"\n\"Please enter a valid XML-identifier. For example something_1, block5, id-4.\",\"Please enter a valid XML-identifier. For example something_1, block5, id-4.\"\n\"Please enter a valid credit card number.\",\"Please enter a valid credit card number.\"\n\"Please enter a valid credit card verification number.\",\"Please enter a valid credit card verification number.\"\n\"Please enter a valid date between %s and %s\",\"Please enter a valid date between %s and %s\"\n\"Please enter a valid date equal to or greater than %s\",\"Please enter a valid date equal to or greater than %s\"\n\"Please enter a valid date less than or equal to %s\",\"Please enter a valid date less than or equal to %s\"\n\"Please enter a valid date.\",\"Please enter a valid date.\"\n\"Please enter a valid day (1-%d).\",\"Please enter a valid day (1-%d).\"\n\"Please enter a valid email address. For example johndoe@domain.com.\",\"Please enter a valid email address. For example johndoe@domain.com.\"\n\"Please enter a valid fax number. For example (123) 456-7890 or 123-456-7890.\",\"Please enter a valid fax number. For example (123) 456-7890 or 123-456-7890.\"\n\"Please enter a valid full date\",\"Please enter a valid full date\"\n\"Please enter a valid month (1-12).\",\"Please enter a valid month (1-12).\"\n\"Please enter a valid number in this field.\",\"Please enter a valid number in this field.\"\n\"Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.\",\"Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.\"\n\"Please enter a valid social security number. For example 123-45-6789.\",\"Please enter a valid social security number. For example 123-45-6789.\"\n\"Please enter a valid year (1900-%d).\",\"Please enter a valid year (1900-%d).\"\n\"Please enter a valid zip code.\",\"Please enter a valid zip code.\"\n\"Please enter a valid zip code. For example 90602 or 90602-1234.\",\"Please enter a valid zip code. For example 90602 or 90602-1234.\"\n\"Please enter issue number or start date for switch/solo card type.\",\"Please enter issue number or start date for switch/solo card type.\"\n\"Please enter more characters or clean leading or trailing spaces.\",\"Please enter more characters or clean leading or trailing spaces.\"\n\"Please enter more characters. Password should contain both numeric and alphabetic characters.\",\"Please enter more characters. Password should contain both numeric and alphabetic characters.\"\n\"Please input a valid CSS-length. For example 100px or 77pt or 20em or .5ex or 50%.\",\"Please input a valid CSS-length. For example 100px or 77pt or 20em or .5ex or 50%.\"\n\"Please make sure your passwords match.\",\"Please make sure your passwords match.\"\n\"Please select State/Province.\",\"Please select State/Province.\"\n\"Please select a file\",\"Please select a file\"\n\"Please select an option.\",\"Please select an option.\"\n\"Please select one of the above options.\",\"Please select one of the above options.\"\n\"Please select one of the options.\",\"Please select one of the options.\"\n\"Please set available and/or protected paths list(s) before validation.\",\"Please set available and/or protected paths list(s) before validation.\"\n\"Please specify either a category or a product, or both.\",\"Please specify either a category or a product, or both.\"\n\"Please use letters only (a-z or A-Z) in this field.\",\"Please use letters only (a-z or A-Z) in this field.\"\n\"Please use numbers only in this field. Please avoid spaces or other characters such as dots or commas.\",\"Please use numbers only in this field. Please avoid spaces or other characters such as dots or commas.\"\n\"Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.\",\"Please use only letters (a-z or A-Z) or numbers (0-9) only in this field. No spaces or other characters are allowed.\"\n\"Please use only letters (a-z or A-Z) or numbers (0-9) or spaces and # only in this field.\",\"Please use only letters (a-z or A-Z) or numbers (0-9) or spaces and # only in this field.\"\n\"Please use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\",\"Please use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\"\n\"Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\",\"Please use only letters (a-z), numbers (0-9) or underscore(_) in this field, first character should be a letter.\"\n\"Please use only visible characters and spaces.\",\"Please use only visible characters and spaces.\"\n\"Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.\",\"Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.\"\n\"Please wait, loading...\",\"Please wait, loading...\"\n\"Polls\",\"Polls\"\n\"Port (25)\",\"Port (25)\"\n\"Profiler\",\"Profiler\"\n\"Recovery Link Expiration Period (days)\",\"Recovery Link Expiration Period (days)\"\n\"Recovery Link Expiration Period (hours)\",\"Recovery Link Expiration Period (hours)\"\n\"Request Path for Specified Store\",\"Request Path for Specified Store\"\n\"Request path length exceeds allowed %s symbols.\",\"Request path length exceeds allowed %s symbols.\"\n\"Requested file may not include parent directory traversal (\"\"../\"\", \"\"..\\\\ notation)\"\"\",\"Requested file may not include parent directory traversal (\"\"../\"\", \"\"..\\\\ notation)\"\"\"\n\"Requested invalid store \"\"%s\"\"\",\"Requested invalid store \"\"%s\"\"\"\n\"Resource \"\"%s\"\" is not found.\",\"Resource \"\"%s\"\" is not found.\"\n\"Resource is not set.\",\"Resource is not set.\"\n\"Retrieve info about current Magento installation\",\"Retrieve info about current Magento installation\"\n\"Retrieve store data\",\"Retrieve store data\"\n\"Retrieve store list\",\"Retrieve store list\"\n\"Return-Path Email\",\"Return-Path Email\"\n\"Root Category\",\"Root Category\"\n\"Sales Representative\",\"Sales Representative\"\n\"Sales Representative Contact Email\",\"Sales Representative Contact Email\"\n\"Sales Representative Contact Name\",\"Sales Representative Contact Name\"\n\"Save\",\"Save\"\n\"Save Store\",\"Save Store\"\n\"Save Store View\",\"Save Store View\"\n\"Save Website\",\"Save Website\"\n\"Search Engines Optimization\",\"Search Engines Optimization\"\n\"Secure\",\"Secure\"\n\"Security\",\"Security\"\n\"Select Date\",\"Select Date\"\n\"Select Media Database\",\"Select Media Database\"\n\"Sender Email\",\"Sender Email\"\n\"Sender Name\",\"Sender Name\"\n\"Services\",\"Services\"\n\"Session Cookie Management\",\"Session Cookie Management\"\n\"Session Lifetime (seconds)\",\"Session Lifetime (seconds)\"\n\"Session Validation Settings\",\"Session Validation Settings\"\n\"Set Return-Path\",\"Set Return-Path\"\n\"Set as Default\",\"Set as Default\"\n\"Skin (Images / CSS)\",\"Skin (Images / CSS)\"\n\"Small Logo Image Src\",\"Small Logo Image Src\"\n\"Sort Order\",\"Sort Order\"\n\"Specified date/time \"\"%1$s\"\" do not match format \"\"%2$s\"\".\",\"Specified date/time \"\"%1$s\"\" do not match format \"\"%2$s\"\".\"\n\"Start date cannot be greater than end date.\",\"Start date cannot be greater than end date.\"\n\"Startup Page\",\"Startup Page\"\n\"Status\",\"Status\"\n\"Storage Configuration for Media\",\"Storage Configuration for Media\"\n\"Store\",\"Store\"\n\"Store API\",\"Store API\"\n\"Store Contact Address\",\"Store Contact Address\"\n\"Store Contact Information\",\"Store Contact Information\"\n\"Store Contact Telephone\",\"Store Contact Telephone\"\n\"Store Email Addresses\",\"Store Email Addresses\"\n\"Store Hours of Operation\",\"Store Hours of Operation\"\n\"Store Information\",\"Store Information\"\n\"Store Name\",\"Store Name\"\n\"Store View\",\"Store View\"\n\"Store View Information\",\"Store View Information\"\n\"Store View Name\",\"Store View Name\"\n\"Store view doesn't exist\",\"Store view doesn't exist\"\n\"Store with the same code\",\"Store with the same code\"\n\"System\",\"System\"\n\"System Log File Name\",\"System Log File Name\"\n\"Template Path Hints\",\"Template Path Hints\"\n\"Template Settings\",\"Template Settings\"\n\"Template Variables\",\"Template Variables\"\n\"Templates\",\"Templates\"\n\"Text length does not satisfy specified text range.\",\"Text length does not satisfy specified text range.\"\n\"The %s you entered is invalid. Please make sure that it follows \"\"http://domain.com/\"\" format.\",\"The %s you entered is invalid. Please make sure that it follows \"\"http://domain.com/\"\" format.\"\n\"The From Date value should be less than or equal to the To Date value.\",\"The From Date value should be less than or equal to the To Date value.\"\n\"The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\",\"The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\"\n\"The store code may contain only letters (a-z), numbers (0-9), underscore(_) or dash(-), the first character must be a letter\",\"The store code may contain only letters (a-z), numbers (0-9), underscore(_) or dash(-), the first character must be a letter\"\n\"The store does not exist\",\"The store does not exist\"\n\"The store has been deleted.\",\"The store has been deleted.\"\n\"The store has been saved.\",\"The store has been saved.\"\n\"The store view has been deleted.\",\"The store view has been deleted.\"\n\"The store view has been saved\",\"The store view has been saved\"\n\"The template Name must not be empty.\",\"The template Name must not be empty.\"\n\"The value is not within the specified range.\",\"The value is not within the specified range.\"\n\"The website does not exist.\",\"The website does not exist.\"\n\"The website has been deleted.\",\"The website has been deleted.\"\n\"The website has been saved.\",\"The website has been saved.\"\n\"Themes\",\"Themes\"\n\"This category and all its child elements\",\"This category and all its child elements\"\n\"This category and its child categories only\",\"This category and its child categories only\"\n\"This category and its products only\",\"This category and its products only\"\n\"This category only\",\"This category only\"\n\"This date is a required value.\",\"This date is a required value.\"\n\"This is a required field.\",\"This is a required field.\"\n\"This setting enable notification when new admin user created.\",\"This setting enable notification when new admin user created.\"\n\"This store cannot be deleted.\",\"This store cannot be deleted.\"\n\"This store view cannot be deleted.\",\"This store view cannot be deleted.\"\n\"This website cannot be deleted.\",\"This website cannot be deleted.\"\n\"This will be displayed just before body closing tag.\",\"This will be displayed just before body closing tag.\"\n\"This will be included before head closing tag in page HTML.\",\"This will be included before head closing tag in page HTML.\"\n\"Timezone\",\"Timezone\"\n\"Title Prefix\",\"Title Prefix\"\n\"Title Suffix\",\"Title Suffix\"\n\"Too Soon: You are trying to perform this operation too frequently. Please wait a few seconds and try again.\",\"Too Soon: You are trying to perform this operation too frequently. Please wait a few seconds and try again.\"\n\"Transactional Emails\",\"Transactional Emails\"\n\"Translate Inline\",\"Translate Inline\"\n\"Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.\",\"Translate, blocks and other output caches should be disabled for both frontend and admin inline translations.\"\n\"Translations\",\"Translations\"\n\"Two and more slashes together are not permitted in request path\",\"Two and more slashes together are not permitted in request path\"\n\"Two and more slashes together are not permitted in url rewrite suffix\",\"Two and more slashes together are not permitted in url rewrite suffix\"\n\"Unable to create directory: %s\",\"Unable to create directory: %s\"\n\"Unable to delete store view. Please, try again later.\",\"Unable to delete store view. Please, try again later.\"\n\"Unable to delete store. Please, try again later.\",\"Unable to delete store. Please, try again later.\"\n\"Unable to delete website. Please, try again later.\",\"Unable to delete website. Please, try again later.\"\n\"Unable to proceed. Please, try again\",\"Unable to proceed. Please, try again\"\n\"Unable to proceed. Please, try again.\",\"Unable to proceed. Please, try again.\"\n\"Unable to save file \"\"%s\"\" at \"\"%s\"\"\",\"Unable to save file \"\"%s\"\" at \"\"%s\"\"\"\n\"Unable to save file: %s\",\"Unable to save file: %s\"\n\"Unknown old style column type definition: {$definition}.\",\"Unknown old style column type definition: {$definition}.\"\n\"Unknown scope \"\"%s\"\".\",\"Unknown scope \"\"%s\"\".\"\n\"Unsecure\",\"Unsecure\"\n\"Url Options\",\"Url Options\"\n\"Use Custom Admin Path\",\"Use Custom Admin Path\"\n\"Use Custom Admin URL\",\"Use Custom Admin URL\"\n\"Use HTTP Only\",\"Use HTTP Only\"\n\"Same-Site\",\"Same-Site\"\n\"None\",\"None\"\n\"Strict\",\"Strict\"\n\"Lax\",\"Lax\"\n\"Use SID on Frontend\",\"Use SID on Frontend\"\n\"Use Secure URLs in Admin\",\"Use Secure URLs in Admin\"\n\"Use Secure URLs in Frontend\",\"Use Secure URLs in Frontend\"\n\"Use Web Server Rewrites\",\"Use Web Server Rewrites\"\n\"VAT Number\",\"VAT Number\"\n\"The default value is \"\"30 2 * * *\"\". An empty value disables automatic cache flushing.\",\"The default value is \"\"30 2 * * *\"\". An empty value disables automatic cache flushing.\"\n\"Validate HTTP_USER_AGENT\",\"Validate HTTP_USER_AGENT\"\n\"Validate HTTP_VIA\",\"Validate HTTP_VIA\"\n\"Validate HTTP_X_FORWARDED_FOR\",\"Validate HTTP_X_FORWARDED_FOR\"\n\"Validate REMOTE_ADDR\",\"Validate REMOTE_ADDR\"\n\"Validation has failed.\",\"Validation has failed.\"\n\"Values less than 60 are ignored. Note that changes will apply after logout.\",\"Values less than 60 are ignored. Note that changes will apply after logout.\"\n\"Variable Code must be unique.\",\"Variable Code must be unique.\"\n\"Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.\",\"Warning! Enabling this feature is not recommended on production environments because it represents a potential security risk.\"\n\"Web\",\"Web\"\n\"Website\",\"Website\"\n\"Website Information\",\"Website Information\"\n\"Website Name\",\"Website Name\"\n\"Website code may only contain letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\",\"Website code may only contain letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter\"\n\"Website with the same code\",\"Website with the same code\"\n\"Weekend Days\",\"Weekend Days\"\n\"Welcome Text\",\"Welcome Text\"\n\"Wrong file info format\",\"Wrong file info format\"\n\"Wrong number of arguments for %s\",\"Wrong number of arguments for %s\"\n\"Wrong old style column type definition: {$definition}.\",\"Wrong old style column type definition: {$definition}.\"\n\"XML data is invalid.\",\"XML data is invalid.\"\n\"XML object is not instance of \"\"Varien_Simplexml_Element\"\".\",\"XML object is not instance of \"\"Varien_Simplexml_Element\"\".\"\n\"Yes\",\"Yes\"\n\"You will have to log in after you save your custom admin path.\",\"You will have to log in after you save your custom admin path.\"\n\"Your design change for the specified store intersects with another one, please specify another date range.\",\"Your design change for the specified store intersects with another one, please specify another date range.\"\n\"database \"\"%s\"\"\",\"database \"\"%s\"\"\"\n\"System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).\",\"System (config.xml, local.xml) and modules configuration files (config.xml, system.xml).\"\n\"Admin\",\"Admin\"\n\"Frontend\",\"Frontend\"\n\"The store view #%d is disabled.\",\"The store view #%d is disabled.\"\n\"Loading Indicator Timeout\",\"Loading Indicator Timeout\"\n\"Number of milliseconds to delay showing the loading indicator. The default value is \"\"200\"\". An empty value disables the delay.\",\"Number of milliseconds to delay showing the loading indicator. The default value is \"\"200\"\". An empty value disables the delay.\"\n"], "filenames": ["app/code/core/Mage/Core/Helper/Data.php", "app/code/core/Mage/Core/etc/config.xml", "app/code/core/Mage/Core/etc/system.xml", "app/code/core/Mage/Sales/Helper/Guest.php", "app/code/core/Mage/Sales/Model/Order.php", "app/locale/en_US/Mage_Core.csv"], "buggy_code_start_loc": [1002, 317, 52, 107, 2375, 386], "buggy_code_end_loc": [1002, 317, 116, 118, 2376, 386], "fixing_code_start_loc": [1003, 318, 53, 108, 2375, 387], "fixing_code_end_loc": [1038, 322, 106, 122, 2376, 388], "type": "CWE-330", "message": "Magento LTS is the official OpenMage LTS codebase. Guest orders may be viewed without authentication using a \"guest-view\" cookie which contains the order's \"protect_code\". This code is 6 hexadecimal characters which is arguably not enough to prevent a brute-force attack. Exposing each order would require a separate brute force attack. This issue has been patched in versions 19.5.1 and 20.1.1.", "other": {"cve": {"id": "CVE-2023-41879", "sourceIdentifier": "security-advisories@github.com", "published": "2023-09-11T22:15:08.267", "lastModified": "2023-09-15T17:30:27.577", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Magento LTS is the official OpenMage LTS codebase. Guest orders may be viewed without authentication using a \"guest-view\" cookie which contains the order's \"protect_code\". This code is 6 hexadecimal characters which is arguably not enough to prevent a brute-force attack. Exposing each order would require a separate brute force attack. This issue has been patched in versions 19.5.1 and 20.1.1."}, {"lang": "es", "value": "Magento LTS es el c\u00f3digo base oficial de OpenMage LTS. Los pedidos de invitados se pueden ver sin autenticaci\u00f3n utilizando una cookie de \"guest-view\" que contiene el \"protect_code\" del pedido. Este c\u00f3digo tiene 6 caracteres hexadecimales, lo que podr\u00eda decirse que no es suficiente para evitar un ataque de fuerza bruta. Exponer cada orden requerir\u00eda un ataque de fuerza bruta por separado. Este problema se solucion\u00f3 en las versiones 19.5.1 y 20.1.1."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 7.5, "baseSeverity": "HIGH"}, "exploitabilityScore": 3.9, "impactScore": 3.6}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 7.5, "baseSeverity": "HIGH"}, "exploitabilityScore": 3.9, "impactScore": 3.6}]}, "weaknesses": [{"source": "security-advisories@github.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-330"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:openmage:magento:*:*:*:*:lts:*:*:*", "versionEndExcluding": "19.5.1", "matchCriteriaId": "C2C082C2-33B8-42AA-A80D-7FC64CBEA8A4"}, {"vulnerable": true, "criteria": "cpe:2.3:a:openmage:magento:*:*:*:*:lts:*:*:*", "versionStartIncluding": "20.0.0", "versionEndExcluding": "20.1.1", "matchCriteriaId": "C0ACC44D-FE37-4C32-B49F-DD00D3CAA1DA"}]}]}], "references": [{"url": "https://github.com/OpenMage/magento-lts/commit/2a2a2fb504247e8966f8ffc2e17d614be5d43128", "source": "security-advisories@github.com", "tags": ["Patch"]}, {"url": "https://github.com/OpenMage/magento-lts/commit/31e74ac5d670b10001f88f038046b62367f15877", "source": "security-advisories@github.com", "tags": ["Patch"]}, {"url": "https://github.com/OpenMage/magento-lts/releases/tag/v19.5.1", "source": "security-advisories@github.com", "tags": ["Release Notes"]}, {"url": "https://github.com/OpenMage/magento-lts/releases/tag/v20.1.1", "source": "security-advisories@github.com", "tags": ["Release Notes"]}, {"url": "https://github.com/OpenMage/magento-lts/security/advisories/GHSA-9358-cpvx-c2qp", "source": "security-advisories@github.com", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/OpenMage/magento-lts/commit/2a2a2fb504247e8966f8ffc2e17d614be5d43128"}}