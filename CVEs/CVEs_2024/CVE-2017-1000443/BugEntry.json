{"buggy_code": ["<?php\n\n/* \n * GLOBAL CONFIGURATION FILE\nWARNING EDITING THIS DOCUMENT WITHOUT UNDERSTANDING WHAT EACH OPTION DOES CAN HAVE DIRE CONSEQUENCES\n\nEach option allows for the manipulation of global values. These affect the game engine and should be tested prior to pushing to production.\n*/\n\n$GAMEVERSION = \"0.1.47\"; // Game version\n$MAXEPCOUNT = 64000; // Max Experience allowed\n$MEP4LVL = 640; // Max experience per level\n\n// Site Registration Configurations\n\n$REGISTRATION = '1';  // Enables users to register accounts\n$AUTHTOJOIN = '1'; // Forces users to confirm their emails prior to logging in for the first time\n$adminrestrict = false; // Set the site into offline mode and prevent users from navigating any further portion of the site\n$adminip = \"\"; // Set the Administrator's IP Address\n\n// Jail Chance Config\n\n$jailDefaultChance = 40; // Base Probability that the user's task will fail and go to jail\n$jailMaxBail = 25000; // Max amount posted for user bail\n$jailMinBail = 1000; // Minimum amount posted for user bail\n$jailBustOutChance = 25; // Base Probability that another hacker will successfully break user out of jail\n\n// FBI Cron Config\n\n$fbiRunTime = 120; // How long until the FBI attempt to bust hackers on the FBI list (Default 2 Hours)\n$fbiSuccessChance = 80; // What is the probability of the hacker being caught by the FBI (80%)\n\n// FBI Hack Chance Config\n\n$fbiServerPass = 40; // Probability that the user will crack the FBI server password\n$fbiServerModify = 65; // Probability that the user will successfully modify the FBI Database\n$fbiServerFail = 78; // Probability that the user will be caught modifying the FBI Database\n\n// Hack Chance Config\n\n$pvpHackervsHacker = 32; // Default value in which a launched attack will successfully infect\n$pvpHackervsBot = 85; // Default value vs a bot\n$pvpHackervsServer = 45; // Default value vs a server\n\n// Small Hack Chance Config\n\n$baseSmallJobSuccess = 34; \n\n// Hacker Ethic Boosts\n\n$hatBlackAttack = .25;\n$hatBlackDefense = .5;\n$hatBlackSkill = .10;\n\n$hatWhiteAttack = .5;\n$hatWhiteDefense = .25;\n$hatWhiteDefense = .10;\n\n$hatGrayAttack = .15;\n$hatGrayDefense = .15;\n$hatGraySkill = .15; // ( DO NOT DISCLOSE, GRAY HATS CAN LEARN SKILLS FASTER THAN NORMAL DUE TO THEIR LACK OF SPECIALIZATION  )\n\n$hatSwitch = 1; // How many times can a player change their hacker ethic within 24 hours.\n\n// Server Config\n\n$serverDecayValue = .02; // Per hour how many points to remove from server health\n$serverFirewallDecayValue = .05; // Per hour how many points to remove from server firewall\n$serverRaidDecay = .0023; // Per hour how many points to remove from server storage array health\n\n$serverFireSharingRev = 200; // Per hour how much money is made from FSS\n$serverPornRev = 75; // Per hour how much money is made from Porn\n$serverSpamRev = 30; // Per hour how much money is made from Spam\n$serverFtpRev = 0; // Per hour how much money is made from FTP\n\n// PC Config\n\n$pcDecayValue = .012; // Per hour how many points to remove from PC health\n$pcFirewallDecayValue = .023; // Per hour how many points to remove from PC firewall\n$pcHddDecayValue = .01; // Per hour how many points to remove from PC HDD health\n\n// ISP Config\n\n$ispRefreshIP = 5; // How many times a player can request to have their IP changed within 24 hours \n$ispCostperRefresh = 100; // Cost in $ for refreshing an IP address\n$ispServiceFeedialup = 0; // Cost in $ for Dialup Service\n$ispServiceFeedT1 = 1000; // Cost in $ for T1 Service (1.5 Mbps)\n$ispServiceFeedT2 = 2000; // Cost in $ for T2 Service (Bonded T1, 3.0 Mbps)\n$ispServiceFeedT3 = 3000; // Cost in $ for T3 Service (40 Mbps)\n$ispServiceFeedOC3 = 8000; // Cost in $ for OC1 Service (155.52 Mbps)\n$ispServerCost = 20000; // Cost in $ for purchase of 1 Server\n$ispServerMaintCost = 5000; // Cost in $ for daily server maintenance\n\n// Hacker for Hire Config\n\n$h4hTraceUser = 10000; // Cost in $ to trace a specifc user's IP address\n$h4hTraceHacked = 8000; // Cost in $ to find out who hacked you\n$h4hTraceUserFail = $h4hTraceUser / 2; // Return half the money for failing to trace the user\n\n//SERVER DEFINED (VARIABLES THAT THE SYSTEM SETS FOR ITSELF)\n\n$serverCoolDown = false; // Game server exausted resources to perform actions\n$systemDDoS = false; // Game system has been brought down by game-wide DDoS\n$systemInfected = false; // Game server is serving outside privlidge.\n$reset_imminent = false; // Game server is under (fictional) attack and is soon to fail\n$systemwatchdog = false; // Anti-cheat engine\n$midnight_reset = false; // Enables the midnight reset (SEE MIDNIGHT RESET)\n\n// SYSTEM WATCHDOG CONFIGURATION\n\n$sysguard = true;\n$reportonly = true; // Only generate a report and don't perform freeze/jail tasks.\n$guardmode = \"relaxed\"; // (Relaxed/Enforcing)\n$jailmode = false; // Send offenders to jail (ONLY 1 CAN BE ACTIVE)\n$prisonmode = false; // Send offenders to prison (ONLY 1 CAN BE ACTIVE)\n$sysuserid = 9; // Account system id to perform watchdog actions as\n$createticket = false; // Autogen system ticket for potential disrupters\n$freezeuser = false; // Lock the user to the suspended screen until an administrator deems appropriate\n\n// BUSINESS COMMERCE CONFIGURATION\n\n$businesses = true; // Enable or disable the creation of businesses\n$reset_resistance = true; // prevent businesses from being forgotten on system reset\n\n// CURRENCY / EXCHANGE CONFIGURATION\n\n$defaultcurrency = \"USD\";\n$cryptocurrency = \"BTC\";\n$cryptoUseLiveFeed = false; // Allow live market value to affect game market\n$exchange = false; // Toggle currency exchange system\n$trade = false; // Toggle stock trade system\n$stockUseLiveFeed = false; // Allow live stock market value to affect game market\n\n// ADMIN CONFIGURATION\n\n$idOverride = 1; // DB UserID with Highest Priv\n$adminPlay = false; // Toogle admin's ability to play game\n$modPlay = true; // Toggle mod's ability to play game\n\n\n// MORE OPTIONS COMING LATER\n", "<?php \nrequire '../sql/connect.php';\nrequire '../conf/global.php';\n$ip = $_SERVER['REMOTE_ADDR'];\n\nif($ip == \"127.0.0.1\" || $ip == \"::1\" || $ip == ''){\n\t\n\tif($sysguard){\n\t\techo \"DEBUG: System Guard Online\";\n\t\t\t\n\t\t// Money Transaction Checker\n\t\t$chktrans = \"SELECT * FROM bank_transactions WHERE watchdog_approve = '0' AND wd_scanned = '0'\";\n\t\t$result2 = $conn->query($chktrans);\n\t\t$num_rows = mysqli_num_rows($result2);\n\t\tif($num_rows > 0){\n\t\t\t\n\t\t\t$syslogsql = \"INSERT INTO gamelogs(userid,username,type) VALUES('9', 'SYSTEM', 'Watchdog Performing Scan: Bank Transactions')\";\n\t\t\t$result = $conn->query($syslogsql);\n\t\t\t\n\t\t\twhile($row = $result2->fetch_assoc()) {\n\t\t\t\t$transactionid = $row['id'];\n\t\t\t\t$senderid = $row['userid'];\n\t\t\t\t$recieverid = $row['recvid'];\n\t\t\t\t$amount = $row['amount'];\n\t\t\t\tif($transactionid % 2 == 0){\n\t\t\t\t\t$linkedtransid = $transactionid -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$linkedtransid = $transactionid +1 ;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$checkUserIp = \"SELECT regip FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t$chkipResult = $conn->query($checkUserIp);\n\t\t\t\t\n\t\t\t\twhile ($rowip = mysqli_fetch_assoc($chkipResult)) {\n\t\t\t\t\t$account1ip = $rowip[\"regip\"];\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$checkUserIp2 = \"SELECT regip FROM accounts WHERE id = '$recieverid' limit 1\";\n\t\t\t\t$chkipResult2 = $conn->query($checkUserIp2);\t\t\t\n\t\t\t\t\n\t\t\t\twhile ($rowip2 = mysqli_fetch_assoc($chkipResult2)) {\n\t\t\t\t\t$account2ip = $rowip2[\"regip\"];\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif($senderid == $recieverid && $amount < 0 && $account1ip == $account2ip){\n\t\t\t\t\t// Known bank transfer logic (A negative transaction charge is sent to the user to subtract out the dollar amount from their account.)\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\n\n\t\t\t\t};\n\t\t\t\tif($senderid == $recieverid && $amount > 0 && $account1ip == $account2ip){\n\t\t\t\t\t// Known bank transfer logic (Post the new balance to the user as if they deposited the money themselves.)\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\n\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount < 0 && $account1ip == $account2ip){\n\t\t\t\t\t// ACCOUNT CAUGHT | User has created another account and sent the funds to alt account\n\t\t\t\t\t$WD_DNY = \"UPDATE bank_transactions SET watchdog_approve = '0', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_DNY);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\n\t\t\t\t\t\n\t\t\t\t\t$sqlsearchuname = \"SELECT username FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t\t$result22 = $conn->query($sqlsearchuname);\n\t\t\t\t\t$row22 = $result22->fetch_assoc();\n\t\t\t\t\t$username = $row22['username'];\n\t\t\t\t\t\n\t\t\t\t\t$WD_ALRT = \"INSERT INTO gamelogs(userid,username,type) VALUES ('$senderid', '$username', 'MULTI-ACCOUNT MONEY TRANSFER DETECTED!!!')\";\n\t\t\t\t\t$result = $conn->query($WD_ALRT);\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount > 0 && $account1ip == $account2ip){\n\t\t\t\t\t// ACCOUNT CAUGHT | User has created another account and sent the funds to alt account\n\t\t\t\t\t$WD_DNY = \"UPDATE bank_transactions SET watchdog_approve = '0' AND wd_scanned = '1' WHERE id = '$transactionid\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_DNY);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\n\t\t\t\t\t\n\t\t\t\t\t$sqlsearchuname = \"SELECT username FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t\t$result22 = $conn->query($sqlsearchuname);\n\t\t\t\t\t$row22 = $result22->fetch_assoc();\n\t\t\t\t\t$username = $row22['username'];\n\t\t\t\t\t\n\t\t\t\t\t$WD_ALRT = \"INSERT INTO gamelogs(userid,username,type) VALUES ('$senderid', '$username', 'MULTI-ACCOUNT MONEY TRANSFER DETECTED!!!')\";\n\t\t\t\t\t$result = $conn->query($WD_ALRT);\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount > 0 && $account1ip != $account2ip){\n\t\t\t\t\t// Known bank transfer logic ( Legit Transfer )\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\tif($senderid == $recieverid && $amount > 0 && $account1ip != $account2ip){\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\t\t\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount < 0 && $account1ip != $account2ip){\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$WD_LNK_TRNS = \"UPDATE bank_transactions SET linked_transid = '$linkedtransid' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t\t$result = $conn->query($WD_LNK_TRNS);\n\t\t\t\t};\n\t\t\t}\t\t\n\t\t}\n\t\telse {\n\t\t\t// Nothing to do, do nothing.\n\t\t}\n\t}\n\t\t\n\telse{\n\t\techo \"DEBUG: System Guard Offline\";\n\t};\n}\n\nelse {\n\techo \"403 Forbidden : System Access Only\";\n};\n?>", "<?php\n\nif (empty($_SERVER['HTTP_CF_CONNECTING_IP'])) {\n\tif(!empty($_SERVER[\"HTTP_X_FORWARDED_FOR\"])) {\n\t\t$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];\n\t}\n\telse{\n\t$ip = $_SERVER['REMOTE_ADDR'];\n\t};\n}\nelse {\n\t$ip = $_SERVER['HTTP_CF_CONNECTING_IP'];\n};\n\n$error=''; // Variable To Store Error Message\nif (empty($_POST['username']) || empty($_POST['password'])) {\n$error = \"Username or Password field is empty\";\necho $error;\n};\n\ndate_default_timezone_set('America/New_York');\n$username=$_POST['username'];\n\n//Check to see if user is activated\n\n$sql = \"SELECT id from accounts WHERE username = '$username' AND active = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\nwhile($row = $result->fetch_assoc()) {\n\t$userid = $row[\"id\"];\n};\n\n\tif ($num_rows == 0) {\n\t\techo \"<br>\";\n\t\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but is not activated.')\";\n\t\t$result = $conn->query($sql);\n\t\techo \"This user account has not been activated, please check your email for the activation letter. If you have not recieved this email please contact an administrator at <a href='mailto:support@boothlabs.me'>support@boothlabs.me</a>'\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<form name='back' action='/'>\";\n\t\techo '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\t\techo '</form>';\n}\nelse {\n\n\n//Check to see if user is deleted\n\n$sql = \"SELECT id FROM accounts WHERE username = '$username' AND deleted = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\n\nif ($num_rows > 0) {\n\techo \"<br>\";\n\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but their account is deleted.')\";\n\t$result = $conn->query($sql);\n\techo \"This user account is deleted, if you wish to reactivate your account please contact an administrator.\";\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<form name='back' action='/'>\";\n\techo '  <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\techo '</form>';\n}\nelse {\n\n$sql = \"SELECT id FROM accounts WHERE username = '$username' AND banned = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\nwhile($row = $result->fetch_assoc()) {\n\t$userid = $row[\"id\"];\n};\n\t\n\tif ($num_rows > 0) {\n\t\techo \"<br>\";\n\t\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but is banned.')\";\n\t\t$result = $conn->query($sql);\n\t\techo \"This user account is banned, please contact an administrator for more information.\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<form name='back' action='/'>\";\n\t\techo '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\t\techo '</form>';\n}\n\nelse {\n\n\n$sql1 = \"SELECT password FROM accounts WHERE username='$username'\";\n$result1 = $conn->query($sql1);\n\nif ($result1->num_rows > 0) {\n     while($row = $result1->fetch_assoc()) {\n         $dbhash = $row[\"password\"];\n     }\n};\n\n$sql2 = \"SELECT id FROM accounts WHERE username='$username'\";\n$result2 = $conn->query($sql2);\nif ($result2->num_rows > 0) {\n\twhile($row = $result2->fetch_assoc()) {\n\t\t$userid = $row[\"id\"];\n\t}\n};\n\n$parts = explode('$', $dbhash);\n$password = crypt($_POST['password'], sprintf('$%s$%s$%s$', $parts[1], $parts[2], $parts[3]));\n\n\n// SQL query to fetch information of registered users and finds user match.\n$sql = \"SELECT * FROM accounts WHERE password='$password' AND username='$username'\";\n$result = $conn->query($sql);\n$rows = mysqli_num_rows($result);\nif ($rows == 1) {\n$_SESSION['login_user'] = $username; // Initializing Session\n$_SESSION[\"loggedIn\"] = true;\n$_SESSION[\"userid\"] = $userid;\n$date = date('Y-m-d H-i-s');\n$sql = \"UPDATE accounts SET lastip='$ip', lastlogindate='$date' WHERE password='$password' AND username='$username'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('\".$_SESSION['userid'].\"', '\".$_SESSION['login_user'].\"', 'Logged in')\";\n$result = $conn->query($sql);\n\n\nheader(\"location: /\"); // Redirecting To Other Page\n} else {\n$error = \"Username or Password is invalid\";\necho \"<br>\";\necho \"<h1>Login Failed</h1>\";\necho \"<br>\";\necho \"<p>The specified username and/or password did not match our records. Please try again.</p>\";\necho \"<br>\";\necho \"<form name='back' action='?a=login'>\";\necho '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\necho '</form>';\n};\n};\n};\n};\n?>", "<div id='content'>\n<h2>Site Offline</h2>\n\n<h4>LiteCity is currently offline for maintenance </h4>\n\n<h5>Whats to come</h5>\n\n<ul>\n\n\t<li>Anti-cheat system</li>\n\t<li>Live Events</li>\n\t<li>CLI game program</li>\n\t<li>Redesigned UI</li>\n\t<li>... and much more</li>\n\n</ul>\n</div>", "<?php\n\nif ($REGISTRATION == 0) {\n\techo \"Site is not accepting new users at this time. Please try again later.\";\n}\nelse {\n\nif (empty($_SERVER['HTTP_CF_CONNECTING_IP'])) {\n\tif(!empty($_SERVER[\"HTTP_X_FORWARDED_FOR\"])) {\n\t\t$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];\n\t}\n\telse{\n\t$ip = $_SERVER['REMOTE_ADDR'];\n\t};\n}\nelse {\n\t$ip = $_SERVER['HTTP_CF_CONNECTING_IP'];\n};\n$salt = substr(str_replace('+','.',base64_encode(md5(mt_rand(), true))),0,16);\n$rounds = 10000;\n$encpass = crypt($_POST['password'], sprintf('$6$rounds=%d$%s$', $rounds, $salt));\n$reghash = md5( rand(0,1000) );\n\nrequire_once \"recaptchalib.php\";\n\n// your secret key\n$secret = \"CHANGEME\";\n \n// empty response\n$response = null;\n \n// check secret key\n$reCaptcha = new ReCaptcha($secret);\n\n$email = $_POST['email'];\n\n// Remove all illegal characters from email\n$email = filter_var($email, FILTER_SANITIZE_EMAIL);\n\n// Validate e-mail\nif (!filter_var($email, FILTER_VALIDATE_EMAIL) === false) {\n\nif ($_POST[\"password\"] == $_POST[\"confpass\"]) {\n\n// if submitted check response\nif ($_POST[\"g-recaptcha-response\"]) {\n    $response = $reCaptcha->verifyResponse(\n        $_SERVER[\"REMOTE_ADDR\"],\n        $_POST[\"g-recaptcha-response\"]\n    );\n}\n\nif ($response != null && $response->success) {\n\n\n//if submit is not blanked i.e. it is clicked.\nif(isset($_REQUEST['submit'])!='')\n{\nif($_REQUEST['username']=='' || $_REQUEST['email']=='' || $_REQUEST['password']=='')\n{\necho \"please fill the empty field.\";\n}\nelse\n{\n$sql = \"INSERT INTO accounts(username,email,password,regip,reghash) VALUES('\".$_REQUEST['username'].\"', '\".$_REQUEST['email'].\"', '$encpass', '$ip', '$reghash')\";\n$result = $conn->query($sql);\nif($result)\n{\n\n$username = $_POST['username'];\n\n$to      = $email; // Send email to our user\n$subject = \"Hacker City Signup | Verification\"; // Give the email a subject \n$message = \"\n \nThank you for registering an account at Hacker City.\nYour account has been created and the final step is to activate your account.\n\nWe use activation emails as a way to prevent bots and trouble users from abusing the system and flooding the site with fake users.\n \n------------------------\nUsername: $username\nPassword: Not sent via email for security \n------------------------\n \nPlease click this link to activate your account:\nhttps://boothlabs.me/verify.php?email=$email&reghash=$reghash\n \n\"; // Our message above including the link\n                     \n$headers = 'From:noreply@boothlabs.me' . \"\\r\\n\"; // Set from headers\nmail($to, $subject, $message, $headers); // Send our email\n\n$username = $_REQUEST['username'];\n\n$sql9 = \"SELECT id FROM accounts WHERE username = '$username';\";\n$result9 = $conn->query($sql9);\nwhile ($row9 = $result9->fetch_assoc()){\n$userid = $row9['id'];\n}\n\n$sql10 = \"INSERT INTO `usersystems` (`userid`, `cpu`, `motherboard`, `ram`, `os`, `hddtype`, `hddhealth`, `size`, `spaceused`, `spacefree`, `logs`, `securitypack`, `firewall`, `sphealth`, `firewallhealth`, `connectedto`, `connectiontype`, `ipaddress`, `gatewayip`, `gatewaystatus`, `systemstatus`) VALUES ('$userid', '486', 'Simple Motherboard', '256MB', 'DOS', '10GB', '100', '10GB', '0', '10', 'Not Installed', 'Not Installed', 'Not Installed', '0', '0', 'n00bnet', 'Loopback', '127.0.0.1', '', 'Offline', 'online');\";\n$result10 = $conn->query($sql10);\n\necho \"Account Created Successfully, Check your email for instructions on activating your account .\";\n}\nelse {\necho \"There is some problem creating your account, please contact an administrator to resolve the issue.\";\necho \"<br>\";\necho $sql;\n};\n}\n}\n}\nelse {\n\techo \"You did not pass the robot validation.\";\n};\n}\nelse {\n\techo \"Your passwords did not match, please try again,\";\n};\n}\nelse {\n\techo \"Your email did not appear to be valid, please try again.\";\n};\n};\n?>\n", "<div id=\"login\">\n\n<img style=\"height:150px; width:150px;\"src=\"/images/bankimg.png\">\n\n<h6>Keeping you in the green</h6>\n\n\n<?php\n\nif(!isset($_SESSION['bank_login'])){\n\t\t\n$sql = \"SELECT userid FROM economy WHERE userid = '$userid'\";\n$result = $conn->query($sql);\nif ($result->num_rows > 0) {\n     echo '<form name=\"login\" method=\"POST\" autocomplete=\"off\" action=\"?a=bankin\">';\n\t echo \"<br>\";\n\t echo 'Password:  <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t echo \"<br>\";\n \t echo \"<button class='btn waves-effect waves-light' type='submit' name='submit'>Login<i class='material-icons center'></i></button>\";\n\t echo \"<br>\";\n\t echo \"<br>\";\n\t echo \"</form>\";\n} else {\n     echo \"<p>We don't appear to have your account on file. Why not register an account with us? Opening an account is totally free and requires no inital payment!</p>\";\n\t echo '<form name=\"registration\" method=\"POST\" action=\"?a=bankin\">';\n\t echo 'Password: <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t echo \"<br>\";\n\t echo \"<br>\";\n\t echo '<input style=\"width:70px;\" type=\"submit\" name=\"submit\" value=\"Register\">';\n\t echo \"</form>\";\n\t echo \"<br>\";\n\t \n};\n}\nif (isset($_SESSION['bank_login'])){\n\n\techo \"<h2>\";\n\techo $_SESSION['login_user'];\n\techo \"'s Banking Account</h2>\";\n\t$sql = \"SELECT cash FROM economy WHERE userid = '$userid'\";\n\t$result = $conn->query($sql);\n\twhile ($row = $result->fetch_assoc()){\n\t\t$balance = $row['cash'];\n\t};\n\t\n\techo \"<p>Total Balance: $\"; printf(\"%.2f\", $balance); echo \"</p>\";\n\techo '<form name=\"sendmoney\" method=\"POST\" action=\"?a=banksend\">';\n\techo \"Amount:\"; echo '<input type=\"text\" name=\"amount\" value=\"\" size=\"10\">';\n\techo \"<br>\";\n\techo \"To:\"; echo '<input type=\"text\" name=\"recvusername\" value=\"\">';\n\techo \"<br>\";\n\techo \"Details:\"; echo '<input type=\"text\" name=\"details\" value=\"\">';\n\techo \"<br>\";\n\t\n    echo \"<input type='radio' value='hacker' id='hacker' name='type'>\";\n    echo \"<label for='hacker'>Hacker</label>\";\n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<input type='radio' value='clan' id='clan' name='type'>\";\n    echo \"<label for='clan'>Clan</label>\";   \n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<br>\";\n\n\techo \"<button class='btn waves-effect waves-light' type='submit' name='action'>Send Cash<i class='material-icons center'></i></button>\";\n\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<h6>Previous Transactions (Last 50)</h6>\";\n\t\n\n\t$sql = \"SELECT timestamp,amount,details FROM bank_transactions WHERE userid = '$userid' ORDER BY timestamp DESC \";\n\t$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\t\t$amount = $row['amount'];\n\t\t$takebal = number_format($amount, 2, '.', '');\n     echo \"<div id=admintable><table><tr><th>Timestamp</th><th>Amount</th><th>Details</th>\";\n     // output data of each row\n     while($row = $result->fetch_assoc()) {\n\n         echo \"<tr><td>\" . $row[\"timestamp\"]. \"</td><td>$\" . $row[\"amount\"]. \"</td><td>\" . $row[\"details\"]. \"</td>\";\n     }\n     echo \"</table>\";\n} else {\n     echo \"No transactions found.\";\n};\n\n\n}\n\n\n?>\n\n</div>\n</div>", "<div id=\"content\">\n\n<?php\n\n$SendUser=$userid;\n$SendUserName = $_SESSION['login_user'];\n$RecUser=$_POST['recvusername'];\n$type=$_POST['type'];\n\nif($type == 'hacker'){\n\n$details = \"sent by $SendUserName reason: \";\n$details .= $_POST['details']; \n$details2 = \"sent to $RecUser reason: \";\n$details2 .= $_POST['details'];\n$amount = $_POST['amount'];\n$amountnegative = $amount * -1;\n\n//Check to see if RecUser has an account with the bank\n\n$sql = \"SELECT id FROM accounts WHERE username = '$RecUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$recvuser = $row['id']; // User ID return\n}\n\n$sql = \"SELECT id FROM economy WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$SendUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBal = $row['cash'];\n}\n\n$newBalUs1 = $oldBal - $amount;\n\nif ($recvuser == $SendUser) {\necho \"<h1>Transaction Failed</h1>\";\necho \"<br>\";\necho \"You can't send money to yourself!\"; \necho \"<br>\";\necho \"<br>\";\necho \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\nif ($newBalUs1 < 0)\n{\n   echo \"<h1>Transaction Failed</h1>\";\n   echo \"<br>\";\n   echo \"You can't send more money than you actually have.\";\n   echo \"<br>\";\n   echo \"<br>\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$recvuser'\";  //fetch the recieving users current bank balance\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBalUs2 = $row['cash'];   // export the returned value to a variable\n}\n\n$newBalUs2 = $oldBalUs2 + $amount;\n\n$sql = \"UPDATE economy SET cash='$newBalUs2' WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\n$sql = \"UPDATE economy SET cash='$newBalUs1' WHERE userid= '$SendUser'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$SendUser', '$recvuser', '$details2', '$amountnegative')\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$recvuser', '$recvuser', '$details', '$amount')\";\n$result = $conn->query($sql);\n\n   echo \"Transaction Complete\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n}\n}\n} \nelse {\n\techo \"<h1>Transaction Failed</h1>\";\n\techo \"<br>\";\n\techo \"<p>We are sorry. Our database failed to find the hacker \"; echo $RecUser; echo \" in our banking database.</p>\";\n\techo \"<p>Your previous transaction has been canceled.</p>\";\n\techo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n};\n}\nelse{ //type is clan\necho \"Money Transfers to clan banks are unavailable at this time\";\n};\n\n\n?>\n</div>", "<div id=\"login\">\n\n<img style=\"height:150px; width:150px;\"src=\"/images/bankimg.png\">\n\n<h6>Keeping you in the green</h6>\n\n\n<?php\n\t$getUserClan = \"SELECT clan FROM accounts WHERE id = '$userid'\";\n\t$resultUC = $conn->query($getUserClan);\n\twhile ($rowClan = $resultUC->fetch_assoc()){\n\t\t$clanid = $rowClan['clan'];\n\t};\n\nif(!isset($_SESSION['clanbank_login'])){\n\n\t$sql = \"SELECT clanid FROM claneconomy WHERE clanid = '$clanid'\";\n\t$result = $conn->query($sql);\n\tif ($result->num_rows > 0) {\n    \techo '<form name=\"login\" method=\"POST\" autocomplete=\"off\" action=\"?a=clanbankin\">';\n\t\techo \"<br>\";\n\t\techo 'Password:  <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t\techo \"<br>\";\n\t\techo '<input style=\"width:70px;\" type=\"submit\" name=\"submit\" value=\"Login\">';\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"</form>\";\n\t}\n\telse {\n    \techo \"<p>We don't appear to have your clan's account on file. Why not register a clan account with us? Opening an account is totally free and requires no inital payment!</p>\";\n\t\techo '<form name=\"registration\" method=\"POST\" action=\"?a=clanbankin\">';\n\t\techo 'Password: <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo '<input style=\"width:70px;\" type=\"submit\" name=\"submit\" value=\"Register\">';\n\t\techo \"</form>\";\n\t\techo \"<br>\";\n\t};\n}\nelse {\n\techo \"<h2>\";\n\n$sqlGetName = \"SELECT * FROM clans WHERE id = '$clanid'\";\n$resultGetName = $conn->query($sqlGetName);\n\twhile ($rowGetName = $resultGetName->fetch_assoc()){\n\t\t$clanname = $rowGetName['clanname'];\n\t};\n\n\techo $clanname;\n\techo \"'s Banking Account</h2>\";\n\t$sql = \"SELECT cash FROM claneconomy WHERE clanid = '$clanid'\";\n\t$result = $conn->query($sql);\n\twhile ($row = $result->fetch_assoc()){\n\t\t$balance = $row['cash'];\n\t};\n\t\n\techo \"<p>Total Balance: $\"; printf(\"%.2f\", $balance); echo \"</p>\";\n\techo '<form name=\"sendmoney\" method=\"POST\" action=\"?a=clanbanksend\">';\n\techo \"Amount:\"; echo '<input type=\"text\" name=\"amount\" value=\"\" size=\"10\">';\n\techo \"<br>\";\n\techo \"To:\"; echo '<input type=\"text\" name=\"recvusername\" value=\"\">';\n\techo \"<br>\";\n\techo \"Details:\"; echo '<input type=\"text\" name=\"details\" value=\"\">';\n\techo \"<br>\";\n    echo \"<br>\";\n\n\techo \"<button class='btn waves-effect waves-light' type='submit' name='action'>Send Cash<i class='material-icons center'></i></button>\";\n\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<h6>Previous Transactions (Last 50)</h6>\";\n\t\n\n\t$sql = \"SELECT timestamp,amount,details FROM clanbank_transactions WHERE clanid = '$clanid' ORDER BY timestamp DESC \";\n\t$result = $conn->query($sql);\n\n\tif ($result->num_rows > 0) {\n\n\t\t$amount = $row['amount'];\n\t\t$takebal = number_format($amount, 2, '.', '');\n    \techo \"<div id=admintable><table><tr><th>Timestamp</th><th>Amount</th><th>Details</th>\";\n    \t// output data of each row\n     \twhile($row = $result->fetch_assoc()) {\n        \techo \"<tr><td>\" . $row[\"timestamp\"]. \"</td><td>$\" . $row[\"amount\"]. \"</td><td>\" . $row[\"details\"]. \"</td>\";\n     \t};\n\t\techo \"</table>\";\n\t} \n\telse {\n    \techo \"No transactions found.\";\n\t};\n};\n?>\n</div>\n</div>", "<div id=\"content\">\n<?php\n\n$username = $_SESSION['login_user'];\n\n\t$getUserClan = \"SELECT clan FROM accounts WHERE id = '$userid'\";\n\t$resultUC = $conn->query($getUserClan);\n\twhile ($rowClan = $resultUC->fetch_assoc()){\n\t\t$clanid = $rowClan['clan'];\n\t};\n\n// Check if Clan account exists, if not allow the user to set the password now and log them in\n\n$sqlCheckEconomy = \"SELECT * FROM claneconomy WHERE clanid = '$clanid'\";\n$resultCheckEconomy = $conn->query($sqlCheckEconomy);\nif ($resultCheckEconomy->num_rows == 0) {\n\n$sql = \"INSERT INTO claneconomy(clanid) VALUE('$clanid')\";\n$result = $conn->query($sql);\n\n// Set Clan bank password\n\n$password = $_POST['password'];\n\n$sqlSetCBP = \"UPDATE clans SET bankpassword = '$password' WHERE id = '$clanid'\";\n$resultSetCBP = $conn->query($sqlSetCBP);\n\nheader(\"location: ?a=bank\"); // Redirecting To Other Page\n}\nelse {\n\n$sql1 = \"SELECT bankpassword FROM clans WHERE id='$clanid'\";\n$result1 = $conn->query($sql1);\n\nif ($result1->num_rows > 0) {\n     while($row = $result1->fetch_assoc()) {\n         $clanpass = $row[\"bankpassword\"];\n     };\n};\n\n$password = $_POST['password'];\n\n// SQL query to fetch information of registered users and finds user match.\n$sql = \"SELECT * FROM clans WHERE bankpassword='$password' AND id='$clanid'\";\n$result = $conn->query($sql);\n$rows = mysqli_num_rows($result);\nif ($rows == 1) {\n$_SESSION['clanbank_login']=1; // Just something to say the user password was correct\n\n$sql = \"SELECT id FROM clans WHERE id = '$clanid'\";\n$result = $conn->query($sql);\nif ($result->num_rows > 0) {\n\nheader(\"location: ?a=clanbank\"); // Redirecting To Other Page\n}\n} else {\n$error = \"Incorrect Password\";\necho \"<br>\";\necho \"<h1>Incorrect Password</h1>\";\necho \"<br>\";\necho \"<br>\";\necho \"<form name='back' action='?a=clanbank'>\";\necho \"<button class='btn waves-effect waves-light' type='submit' name='submit'>Back<i class='material-icons center'></i></button>\";\necho '</form>';\n};\n};\n?>\n</div>", "<div id=\"content\">\n\n<?php\n\n$SendUser=$clanid;\n$RecUser=$_POST['recvusername'];\n\n$details = \"sent by $SendUserName reason: \";\n$details .= $_POST['details']; \n$details2 = \"sent to $RecUser reason: \";\n$details2 .= $_POST['details'];\n$amount = $_POST['amount'];\n$amountnegative = $amount * -1;\n\n//Check to see if RecUser has an account with the bank\n\n$sql = \"SELECT id FROM accounts WHERE username = '$RecUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$recvuser = $row['id']; // User ID return\n}\n\n$sql = \"SELECT id FROM economy WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$SendUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBal = $row['cash'];\n}\n\n$newBalUs1 = $oldBal - $amount;\n\nif ($recvuser == $SendUser) {\necho \"<h1>Transaction Failed</h1>\";\necho \"<br>\";\necho \"You can't send money to yourself!\"; \necho \"<br>\";\necho \"<br>\";\necho \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\nif ($newBalUs1 < 0)\n{\n   echo \"<h1>Transaction Failed</h1>\";\n   echo \"<br>\";\n   echo \"You can't send more money than you actually have.\";\n   echo \"<br>\";\n   echo \"<br>\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$recvuser'\";  //fetch the recieving users current bank balance\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBalUs2 = $row['cash'];   // export the returned value to a variable\n}\n\n$newBalUs2 = $oldBalUs2 + $amount;\n\n$sql = \"UPDATE economy SET cash='$newBalUs2' WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\n$sql = \"UPDATE economy SET cash='$newBalUs1' WHERE userid= '$SendUser'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$SendUser', '$recvuser', '$details2', '$amountnegative')\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$recvuser', '$recvuser', '$details', '$amount')\";\n$result = $conn->query($sql);\n\n   echo \"Transaction Complete\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n}\n}\n} \nelse {\n\techo \"<h1>Transaction Failed</h1>\";\n\techo \"<br>\";\n\techo \"<p>We are sorry. Our database failed to find the hacker \"; echo $RecUser; echo \" in our banking database.</p>\";\n\techo \"<p>Your previous transaction has been canceled.</p>\";\n\techo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n};\n\n\n?>\n</div>", "<script type=\"text/javascript\">\nfunction checkDelete(){\n    return confirm('Are you sure?');\n}\n</script>\n\n<div id=\"admin\">\n<div id=\"content\">\n\t<h1>Clan Roster</h1>\n\t<br>\n\t\n\n<?php\n\t\n\t$username = $_SESSION['login_user'];\n\n\t$sqlGetClanID = \"SELECT clan FROM accounts WHERE username = '$username'\";\n\t$resultGetCID = $conn->query($sqlGetClanID);\n\twhile($rowCID = $resultGetCID->fetch_assoc()) {\n\t\t$clanid = $rowCID['clan'];\n\t};\n\n$sql = \"SELECT id, username FROM accounts WHERE clan = '$clanid'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n     echo \"<div id=admintable><table><tr><th>Username</th><th>Role</th><th>Bank Balance</th><th>Action</th>\";\n     // output data of each row\n     while($row = $result->fetch_assoc()) {\n    \t echo \"<tr><td><a href=?a=profile&id=\" . $row[\"id\"]. \">\" . $row[\"username\"]. \"</td><td>\" . $row[\"email\"]. \"</td><td>\" . $row[\"role\"]. \"</td><td>\" . $row[\"lastip\"]. \"</td><td>\" . $row[\"lastlogindate\"]. \"</td><td>\" . $row[\"regdate\"]. \"\";\n\t\t echo \"<td><a href=?a=profile&id=\" . $row[\"id\"]. \"><button type='submit' name='action'><i class='material-icons center'>edit</i></button></a>\";\n\t\t echo \"<input type='hidden' name='tempId' value='\".$row[\"id\"].\"'/><form action='?m=deluser' method='POST'><button type='submit' name='action' action=''><i class='material-icons center'>delete</i></button></form>\";\n\t\t echo \"<input type='hidden' name='tempId' value='\".$row[\"id\"].\"'/><form action='?m=banuser' method='POST'><button type='submit' name='action'><i class='material-icons center'>block</i></button></form></td>\";\n     }\n     echo \"</table>\";\n} else {\n     echo \"0 results\";\n};\n\n\n$result->free();\n\n?>\n</div>\n</div>", "<?php\n$bio = $_POST['bio'];\n$_safebio = mysqli_real_escape_string($conn, $bio);\n\n$sql = \"UPDATE accounts SET bio='$_safebio' WHERE username='$username'\";\n\n$result = $conn->query($sql);\n\nheader(\"location: /game/main/index.php?a=accountdetails\");\n\n?>", "<html>\n<head>\n\n<title>Hacker City | <?php \nif (empty($_GET['m'])){\n\tif (empty($_GET['a'])) {\n\t\techo \"Index\";\n\t}\n\telse{\n\t\t$url = $_GET['a'];\n\t\tswitch($url){\n\t\t\tcase \"accountdetails\": echo \"Account Details\";break;\n\t\t\tcase \"jail\": echo \"Jail\";break;\n\t\t\tcase \"smalljobs\": echo \"Small Jobs\";break;\n\t\t\tcase \"statistics\": echo \"Player Stats\";break;\n\t\t\tcase \"bank\": echo \"Personal Bank\";break;\n\t\t\tcase \"softwareshop\": echo \"Software Shop\";break;\n\t\t\tcase \"hardwareshop\": echo \"Hardware Shop\";break;\n\t\t\tcase \"isp\": echo \"Internet Provider\";break;\n\t\t\tcase \"h4h\": echo \"Hacker 4 Hire\";break;\n\t\t\tcase \"cryptocurrency\": echo \"Cryptocurrency\";break;\n\t\t\tcase \"leaderboard\": echo \"Leaderboard\";break;\n\t\t\tcase \"cryptowallet\": echo \"Cryptowallet\";break;\n\t\t\tcase \"internet\": echo \"Internet\";break;\n\t\t\tcase \"publicftp\": echo \"Public FTP Servers\";break;\n\t\t\tcase \"support\": echo \"Support Tickets\";break;\n\t\t\tcase \"chat\": echo \"Chat\";break;\n\t\t\tcase \"rules\": echo \"Rules\";break;\n\t\t\tcase \"system\": echo \"System\";break;\n\t\t\tcase \"syslogs\": echo \"System Logs\";break;\n\t\t\tcase \"email\": echo \"Email Client\";break;\n\t\t\tcase \"storage\": echo \"Storage\";break;\n\t\t\tcase \"cmd\": echo \"Command Prompt\";break;\n\t\t\tcase \"prison\": echo \"Prison\";break;\n\t\t\tcase \"fbimostwanted\": echo \"FBI Most Wanted List\";break;\n\t\t\tcase \"techspecs\": echo \"Server Resources\";break;\n\t\t\tcase \"clanbank\": echo \"Clan Bank\";break;\n\t\t\tcase \"clanroster\": echo \"Clan Roster\";break;\n\t\t\tcase \"profile\": echo \"Player Profile\";break;\n\t\t};\n\t};\n}\nelse {\n\t$urlm = $_GET['m'];\n\tswitch($urlm){\n\t\tcase \"logs\": echo \"Game Logs\";break;\n\t\tcase \"banklogs\"; echo \"Bank Transactions\";break;\n\t\tcase \"tickets\"; echo \"Ticket Management\";break;\n\t\tcase \"usermanagement\"; echo \"User Accounts\";break;\n\t};\n}\n\n\n?></title>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Ek+Mukta\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/materialize.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/style.css\">\n\n<link rel=\"shortcut icon\" href=\"/images/favicon.ico\" type=\"image/x-icon\">\n<link rel=\"icon\" href=\"/images/favicon.ico\" type=\"image/x-icon\">\n<script src=\"/js/materialize.js\"></script>\n<!-- <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>-->\n<script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js\"></script>\n<script src=\"/js/gameclock.js\"></script>\n<script src=\"/js/countdown.js\"></script>\n\n</head>\n\n<?php\n\n$mem = new Memcache();\n$mem->addServer(\"127.0.0.1\", 11211);\nrequire 'sql/connect.php';\nrequire 'conf/global.php';\n\nsession_start();\n$start_time = microtime(TRUE);\n$ip = $_SERVER['REMOTE_ADDR'];\n$time = $_SERVER['REQUEST_TIME'];\n$timeout_duration = 1800;\n\n\nif (isset($_SESSION['LAST_ACTIVITY']) && ($time - $_SESSION['LAST_ACTIVITY']) > $timeout_duration) {\n\t\n\t$username = $_SESSION['login_user'];\n\t$userid = $_SESSION['userid'];\n\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', 'Logged out due to inactivity')\";\n\t$result = $conn->query($sql);\n\tsession_unset();\n\tsession_destroy();\n\tsession_start();\n};\n\n\n// REBUILD MODE\n\nif($adminrestrict == true && $adminip != $ip ){\n\tinclude 'layout/guest/header.htm';\n\t\n\tinclude \"game/guest/rebuild.htm\";\n\t\n\tinclude \"layout/guest/footer.htm\";\n\t\n}\nelse {\n\n\tif(!isset($_SESSION['login_user'])){\n\n\t\tinclude 'layout/guest/header.htm';\n\t\n\t\t$a = 'guest';\n\t\t$disallowed_paths = array('header', 'footer');\n\t\tif (!empty($_GET['a'])) {\n\t\t\t$tmp_action = basename($_GET['a']);\n\t\t\t// Checks if action is allowed and file exists, then sets the action\n\t\t\tif (!in_array($tmp_action, $disallowed_paths) && file_exists(\"game/guest/{$tmp_action}.htm\")){\n\t\t\t\t$a = $tmp_action;\n\t\t\t};\n\t\t};\n\t\n\tinclude \"game/guest/{$a}.htm\";\n\t\n\tinclude \"layout/guest/footer.htm\";\n\t}\n\telse {\n\t\t$username = $_SESSION['login_user'];\n\t\t$userid = $_SESSION['userid'];\n\t\t$_SESSION['LAST_ACTIVITY'] = $time;\n\t\t$jailtime = '';\n\t\tdate_default_timezone_set('America/New_York');\n\t\t$date = date('Y-m-d H-i-s');\n\t\t$sql = \"UPDATE accounts SET lastseen='$date' WHERE username='$username'\";\n\t\t$result = $conn->query($sql);\n\t\t\n\t\t$sql = \"SELECT * FROM accounts WHERE id ='$userid'\";\n\t\t$result = $conn->query($sql);\n\t\twhile ($row = $result->fetch_assoc()){\n\t\t\t$currenttime = $row['lastseen'];\n\t\t};\n\t\t\n\t\t$sql93 = \"SELECT * FROM jail WHERE userid ='$userid' AND active = '1'\";\n\t\t$result12 = $conn->query($sql93);\n\t\t\n\t\t$num_rows = mysqli_num_rows($result12);\n\t\t\n\t\tif($num_rows == 1) {\n\t\t\n\t\t\twhile ($row1 = $result12->fetch_assoc()){\n\t\t\t\t$jailtime = $row1['jailrelease'];\n\t\t\t};\n\t\t};\t\t\n\t\t$jailoverridepaths = array('accountdetails','jailed','chat','leaderboard','support','ticketcreation','logout','rules','statistics','subcom','subti','ticketclose','userselfdelete','viewmessage','view','profile');\n\n\t\tinclude '/usr/share/nginx/html/layout/main/header.htm';\n\t\techo 'System Time: <div id=\"clockbox\"></div>';\n\t\techo 'Small Hacks: <div id=\"countdown\"></div>';\n\t\t\n\t\t$sql = \"SELECT * FROM accounts WHERE id = '$userid'\";\n\t\t$result = $conn->query($sql);\n\t\t\twhile($row = $result->fetch_assoc()){\n\t\t\t\t\t$cooldown = $row['smallhackcd'];\n\t\t\t}; \n\t\t\n\t\t$disallowed_paths = array('header', 'footer');\n\t\tif (!empty($_GET['m'])){\n\t\t\t$management = basename($_GET['m']);\n\t\t\tif (!in_array($management, $disallowed_paths) && file_exists(\"/usr/share/nginx/html/game/main/admin/{$management}.htm\")){\n\t\t\t\t$m = $management;\n\t\t\t\tif ($jailtime != ''){\n\t\t\t\t\tif ($jailtime > $currenttime && !in_array($management, $jailoverridepaths)){\n\t\t\t\t\t\theader(\"location: ?a=jailed\");\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tinclude (\"/usr/share/nginx/html/game/main/admin/{$m}.htm\");\n\t\t\t}\n\t\t};\n\t\tif (empty($_GET['m'])){\n\t\t\t$a = 'home';\n\t\t\t$disallowed_paths = array('header', 'footer');\n\t\t\tif (!empty($_GET['a'])) {\n\t\t\t\t$tmp_action = basename($_GET['a']);\n\t\t\t\t// Checks if action is allowed and file exists, then sets the action\n\t\t\t\tif (!in_array($tmp_action, $disallowed_paths) && file_exists(\"/usr/share/nginx/html/game/main/user/{$tmp_action}.htm\")){\n\t\t\t\t\t$a = $tmp_action;\n\t\t\t\t};\n\t\t\t};\n\t\t\tif(isset($a)){\n\t\t\t\tinclude \"/usr/share/nginx/html/game/main/user/{$a}.htm\";\n\t\t\t};\n\t\t}\n\t\t\tinclude \"/usr/share/nginx/html/layout/main/footer.htm\";\n\t\t}\n\t\t}\n?>", "<div id=\"footer\">\n<div class=\"bottomleft\">\n<?php\n\n\techo \"\u00a9 2016-2017 Booth Labs\";\n\techo \"<br>\";\n\t\n\t$end_time = microtime(TRUE);\n\t\n\t$time_taken = $end_time - $start_time;\n\t\n\t$time_taken = round($time_taken,5);\n\t\n\techo 'Page generated in '.$time_taken.' seconds.';\n?>\n\n</div>\n\n<div class=\"bottomright\">\n<h6>Version <?php echo $GAMEVERSION; ?></h6>\n<h6>Developed by Francis Booth</h6>\n</div>\n<h6>Gameserver: <?php echo gethostname(); ?> </h6>\n\n\n<div style=\"clear: both\"></div>\n\n<script type=\"text/javascript\">\nvar sc_project=11259067; \nvar sc_invisible=1; \nvar sc_security=\"f04c648b\"; \nvar scJsHost = ((\"https:\" == document.location.protocol) ?\n\"https://secure.\" : \"http://www.\");\ndocument.write(\"<sc\"+\"ript type='text/javascript' src='\" +\nscJsHost+\n\"statcounter.com/counter/counter.js'></\"+\"script>\");\n</script>\n<noscript><div class=\"statcounter\"><a title=\"web stats\"\nhref=\"http://statcounter.com/\" target=\"_blank\"><img\nclass=\"statcounter\"\nsrc=\"//c.statcounter.com/11259067/0/f04c648b/1/\" alt=\"web\nstats\"></a></div></noscript>\n", "<html>\n\t<head>\n\t\t<title>Hacker City | Index</title>\n\t\t<link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Ek+Mukta\">\n\t\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/css/style.css\">\n\t\t<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/css/materialize.css\">\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/css/burn.css\">\n\t\t<link rel=\"shortcut icon\" href=\"/usr/share/nginx/html/images/favicon.ico\" type=\"image/x-icon\">\n\t\t<link rel=\"icon\" href=\"/usr/share/nginx/html/images/favicon.ico\" type=\"image/x-icon\">\n\t\t<script src=\"/js/materialize.js\"></script>\n\t\t<script src='https://www.google.com/recaptcha/api.js'></script>\n\t\t<script async src=\"/js/spanize.js\"></script>\n\t</head>\n\t\n<body>\n\n<?php\n\tinclude 'layout/guest/nav.htm';\n?>\t\n", "<div id=\"footer\">\n<div class=\"bottomleft\">\n<?php\n\n\techo \"\u00a9 2016-2017 Booth Labs\";\n\techo \"<br>\";\n\t\n\t$end_time = microtime(TRUE);\n\t\n\t$time_taken = $end_time - $start_time;\n\t\n\t$time_taken = round($time_taken,5);\n\t\n\techo 'Page generated in '.$time_taken.' seconds.';\n?>\n\n</div>\n\n<div class=\"bottomright\">\n<h6>Version <?php echo $GAMEVERSION; ?>\n</h6>\n<h6>Developed by Francis Booth</h6>\n</div>\n<h6>Gameserver: <?php echo gethostname(); ?> </h6>\n\n<div style=\"clear: both\"></div>\n\n<script type=\"text/javascript\">\nvar sc_project=11259067; \nvar sc_invisible=1; \nvar sc_security=\"f04c648b\"; \nvar scJsHost = ((\"https:\" == document.location.protocol) ?\n\"https://secure.\" : \"http://www.\");\ndocument.write(\"<sc\"+\"ript type='text/javascript' src='\" +\nscJsHost+\n\"statcounter.com/counter/counter.js'></\"+\"script>\");\n</script>\n<noscript><div class=\"statcounter\"><a title=\"web stats\"\nhref=\"https://statcounter.com/\" target=\"_blank\"><img\nclass=\"statcounter\"\nsrc=\"//c.statcounter.com/11259067/0/f04c648b/1/\" alt=\"web\nstats\"></a></div></noscript>\n", "<div class=\"menu-wrap\">\n    <nav class=\"menu\">\n        <ul class=\"clearfix\">\n        \n            <li>\n            \t<a href=\"/\"><?php echo $_SESSION['login_user'];?></a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=accountdetails\">Account Details</a></li>\n            \t\t<li><a href=\"?a=statistics\">Statistics</a></li>\n            \t\t<li><a href=\"?a=system\">System</a></li>\n            \t\t<?php\n            \t\t\n            \t\t$username = $_SESSION['login_user'];\n            \t\t\n            \t\t$getid = \"SELECT id FROM accounts WHERE username = '$username'\";\n\t\t\t\t\t$getResult = $conn->query($getid);\n\t\t\t\t\t\n\t\t\t\t\twhile($getrow = $getResult->fetch_assoc()) {\n\t\t\t\t\t\t$userid = $getrow['id'];\n\t\t\t\t\t};\n            \t\t\n            \t\t$sql = \"SELECT * FROM usersystems WHERE id = $userid\";\n\t\t\t\t\t$result = $conn->query($sql);\n\t\t\t\t\twhile ($row = $result->fetch_assoc()){\n\t\t\t\t\t\t$logs = $row['logs'];\n\t\t\t\t\t}\n\t\t\t\t\tif(isset($logs)){\n\t\t\t\t\tif($logs == 'Installed'){\n\t\t\t\t\t\techo \"<li><a href='?a=syslogs'>System Logs</a></li>\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\techo \"\";\n\t\t\t\t\t};\n\t\t\t\t\t};\n            \t\t\n            \t\t?>\n            \t\t\n            \t\t<li><a href=\"?a=email\">Mail</a></li>\n            \t\t<li><a href=\"?a=storage\">Storage</a></li>\n            \t\t<li><a href=\"?a=cmd\">CMD</a></li>\n            \t\t<li><a href=\"?a=logout\">Logout</a></li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href=\"#\">Hacking</a>\n\t\t\t\t\n\t\t\t\t<ul class=\"sub-menu\">\n\t\t\t\t\t<li><a href=\"?a=smalljobs\">Small Jobs</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack A PC</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack A Server</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack the FBI Database</a></li>\n\t\t\t\t\t<li><a href=\"?a=infections\">Infections</a></li>\n\t\t\t\t\t<li><a href=\"#\">Contract Hacks</a></li>\n\t\t\t\t</ul>\n\t\t\t</li>\t\n\t\t\t\n            <li>\n            \t<a href=\"#\">World</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=leaderboard\">Leaderboard</a></li>\n            \t\t<li><a href=\"?a=bank\">Bank</a></li>\n            \t\t<li><a href=\"?a=cryptowallet\">CryptoWallet</a></li>\n            \t\t<li><a href=\"?a=internet\">Internet</a></li>\n            \t\t<li><a href=\"?a=publicftp\">Public FTP</a></li>\n            \t\t<li><a href=\"?a=support\">Support Ticket(s)</a></li>\n            \t\t<li><a href=\"?a=chat\">Chat</a></li>\n            \t\t<li><a href=\"?a=rules\">Rules</a></li>\n            \t</ul>\n            </li>\n            <li>\n            \t<a href=\"#\">Clan</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<?php\n\t            \t\t$username = $_SESSION['login_user'];\n    \t        \t\t$sql12 = \"SELECT * FROM accounts WHERE username = '$username'\";\n\t\t\t\t\t\t$result12 = $conn->query($sql12);\n\t\t\t\t\t\twhile ($row = $result12->fetch_assoc()){\n\t\t\t\t\t\t\t$clan = $row['clan'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif($clan == ''){\n\t\t\t\t\t\t\techo \"<li><a href='?a=createclan'>Create Clan</a></li>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t$sqlClan = \"SELECT * FROM clans WHERE id = '$clan'\";\n\t\t\t\t\t\t\t$sqlClanResult = $conn->query($sqlClan);\n\t\t\t\t\t\t\twhile ($row78 = $sqlClanResult->fetch_assoc()){\n\t\t\t\t\t\t\t\t$clanname = $row78['clanname'];\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanpage'>$clanname</a></li>\";\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanroster'>Clan Roster</a></li>\";\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanbank'>Clan Bank</a></li>\";\n\t\t\t\t\t\t};\n\t\t\t\t\t?>\n\t\t\t\t</ul>\n\t\t\t</li>\n            \t\t\n            <li>\n            \t<a href=\"#\">Marketplace</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=softwareshop\">Software Shop</a></li>\n            \t\t<li><a href=\"?a=hardwareshop\">Hardware Shop</a></li>\n            \t\t<li><a href=\"?a=isp\">Internet Provider</a></li>\n            \t\t<li><a href=\"?a=h4h\">Hacker for Hire</a></li>\n            \t\t<li><a href=\"?a=cryptocurrency\">Cryptocurrency</a></li>\n            \t</ul>\n            </li>\n            <li>\n            \t<a href=\"#\">Law Enforcement</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=jail\">Jail</a></li>\n            \t\t<li><a href=\"?a=prison\">Prison</a></li>\n            \t\t<li><a href=\"?a=fbimostwanted\">FBI Most Wanted</a></li>\n            \t</ul>\n            </li>            \n            \n<?php\n\n\n\t$username = $_SESSION['login_user'];\n\t$sql = \"SELECT role FROM accounts WHERE username='$username'\";\n\t$result = $conn->query($sql);\n\t$row = mysqli_fetch_assoc($result);\n\nif ($row[\"role\"] != 'user') {\n\t\techo '<li>';\n\t\t\techo '<a href=\"#\">Admin</a>';\n\t\t\techo '<ul class=\"sub-menu\">';\n\t\t\techo '<li><a href=\"?m=logs\">System Logs</a></li>';\n\t\t\techo '<li><a href=\"?m=banklogs\">Bank Logs</a></li>';\n\t\t\techo '<li><a href=\"?m=tickets\">Tickets</a></li>';\n\t\t\techo '<li><a href=\"?m=usermanagement\">Users</a></li>';\n\t\techo '</ul>';\t\t\n}\nelse { \necho '';\n}\n?>\n        </ul>\n    </nav>\n</div>\n\n<?php\n\n$sql = \"SELECT id, username, role, lastseen FROM accounts WHERE lastseen BETWEEN timestamp(DATE_SUB(NOW(), INTERVAL 5 MINUTE)) AND timestamp(NOW()) AND role!='user'\";\n$result = $conn->query($sql);\n\n\nif ($result->num_rows > 0) {\n\techo \"<div id='online-staff' class='slide-in-box'>\";\n     while($row = $result->fetch_assoc()) {\n\t\t echo \"\";\n    \t echo \"<a href=?a=profile&id=\" . $row[\"id\"]. \">\" . $row[\"username\"]. \"</a>\";\n\t\t echo \"&nbsp;&nbsp;\";\n     }\n}\necho \"</div>\";\n\n?>\n<br>\n\n\n\n"], "fixing_code": ["<?php\n\n/* \n * GLOBAL CONFIGURATION FILE\nWARNING EDITING THIS DOCUMENT WITHOUT UNDERSTANDING WHAT EACH OPTION DOES CAN HAVE DIRE CONSEQUENCES\n\nEach option allows for the manipulation of global values. These affect the game engine and should be tested prior to pushing to production.\n*/\n\n$GAMEVERSION = \"0.1.48\"; // Game version\n$MAXEPCOUNT = 64000; // Max Experience allowed\n$MEP4LVL = 640; // Max experience per level\n\n// Site Registration Configurations\n\n$REGISTRATION = '1';  // Enables users to register accounts\n$AUTHTOJOIN = '1'; // Forces users to confirm their emails prior to logging in for the first time\n$adminrestrict = false; // Set the site into offline mode and prevent users from navigating any further portion of the site\n$adminip = \"\"; // Set the Administrator's IP Address\n\n// Jail Chance Config\n\n$jailDefaultChance = 40; // Base Probability that the user's task will fail and go to jail\n$jailMaxBail = 25000; // Max amount posted for user bail\n$jailMinBail = 1000; // Minimum amount posted for user bail\n$jailBustOutChance = 25; // Base Probability that another hacker will successfully break user out of jail\n\n// FBI Cron Config\n\n$fbiRunTime = 120; // How long until the FBI attempt to bust hackers on the FBI list (Default 2 Hours)\n$fbiSuccessChance = 80; // What is the probability of the hacker being caught by the FBI (80%)\n\n// FBI Hack Chance Config\n\n$fbiServerPass = 40; // Probability that the user will crack the FBI server password\n$fbiServerModify = 65; // Probability that the user will successfully modify the FBI Database\n$fbiServerFail = 78; // Probability that the user will be caught modifying the FBI Database\n\n// Hack Chance Config\n\n$pvpHackervsHacker = 32; // Default value in which a launched attack will successfully infect\n$pvpHackervsBot = 85; // Default value vs a bot\n$pvpHackervsServer = 45; // Default value vs a server\n\n// Small Hack Chance Config\n\n$baseSmallJobSuccess = 34; \n\n// Hacker Ethic Boosts\n\n$hatBlackAttack = .25;\n$hatBlackDefense = .5;\n$hatBlackSkill = .10;\n\n$hatWhiteAttack = .5;\n$hatWhiteDefense = .25;\n$hatWhiteDefense = .10;\n\n$hatGrayAttack = .15;\n$hatGrayDefense = .15;\n$hatGraySkill = .15; // ( DO NOT DISCLOSE, GRAY HATS CAN LEARN SKILLS FASTER THAN NORMAL DUE TO THEIR LACK OF SPECIALIZATION  )\n\n$hatSwitch = 1; // How many times can a player change their hacker ethic within 24 hours.\n\n// Server Config\n\n$serverDecayValue = .02; // Per hour how many points to remove from server health\n$serverFirewallDecayValue = .05; // Per hour how many points to remove from server firewall\n$serverRaidDecay = .0023; // Per hour how many points to remove from server storage array health\n\n$serverFireSharingRev = 200; // Per hour how much money is made from FSS\n$serverPornRev = 75; // Per hour how much money is made from Porn\n$serverSpamRev = 30; // Per hour how much money is made from Spam\n$serverFtpRev = 0; // Per hour how much money is made from FTP\n\n// PC Config\n\n$pcDecayValue = .012; // Per hour how many points to remove from PC health\n$pcFirewallDecayValue = .023; // Per hour how many points to remove from PC firewall\n$pcHddDecayValue = .01; // Per hour how many points to remove from PC HDD health\n\n// ISP Config\n\n$ispRefreshIP = 5; // How many times a player can request to have their IP changed within 24 hours \n$ispCostperRefresh = 100; // Cost in $ for refreshing an IP address\n$ispServiceFeedialup = 0; // Cost in $ for Dialup Service\n$ispServiceFeedT1 = 1000; // Cost in $ for T1 Service (1.5 Mbps)\n$ispServiceFeedT2 = 2000; // Cost in $ for T2 Service (Bonded T1, 3.0 Mbps)\n$ispServiceFeedT3 = 3000; // Cost in $ for T3 Service (40 Mbps)\n$ispServiceFeedOC3 = 8000; // Cost in $ for OC1 Service (155.52 Mbps)\n$ispServerCost = 20000; // Cost in $ for purchase of 1 Server\n$ispServerMaintCost = 5000; // Cost in $ for daily server maintenance\n\n// Hacker for Hire Config\n\n$h4hTraceUser = 10000; // Cost in $ to trace a specifc user's IP address\n$h4hTraceHacked = 8000; // Cost in $ to find out who hacked you\n$h4hTraceUserFail = $h4hTraceUser / 2; // Return half the money for failing to trace the user\n\n//SERVER DEFINED (VARIABLES THAT THE SYSTEM SETS FOR ITSELF)\n\n$serverCoolDown = false; // Game server exausted resources to perform actions\n$systemDDoS = false; // Game system has been brought down by game-wide DDoS\n$systemInfected = false; // Game server is serving outside privlidge.\n$reset_imminent = false; // Game server is under (fictional) attack and is soon to fail\n$systemwatchdog = false; // Anti-cheat engine\n$midnight_reset = false; // Enables the midnight reset (SEE MIDNIGHT RESET)\n\n// SYSTEM WATCHDOG CONFIGURATION\n\n$sysguard = true;\n$reportonly = true; // Only generate a report and don't perform freeze/jail tasks.\n$guardmode = \"relaxed\"; // (Relaxed/Enforcing)\n$jailmode = false; // Send offenders to jail (ONLY 1 CAN BE ACTIVE)\n$prisonmode = false; // Send offenders to prison (ONLY 1 CAN BE ACTIVE)\n$sysuserid = 9; // Account system id to perform watchdog actions as\n$createticket = false; // Autogen system ticket for potential disrupters\n$freezeuser = false; // Lock the user to the suspended screen until an administrator deems appropriate\n\n// BUSINESS COMMERCE CONFIGURATION\n\n$businesses = true; // Enable or disable the creation of businesses\n$reset_resistance = true; // prevent businesses from being forgotten on system reset\n\n// CURRENCY / EXCHANGE CONFIGURATION\n\n$defaultcurrency = \"USD\";\n$cryptocurrency = \"BTC\";\n$cryptoUseLiveFeed = false; // Allow live market value to affect game market\n$exchange = false; // Toggle currency exchange system\n$trade = false; // Toggle stock trade system\n$stockUseLiveFeed = false; // Allow live stock market value to affect game market\n\n// ADMIN CONFIGURATION\n\n$idOverride = 1; // DB UserID with Highest Priv\n$adminPlay = false; // Toogle admin's ability to play game\n$modPlay = true; // Toggle mod's ability to play game\n\n\n// MORE OPTIONS COMING LATER\n", "<?php \nrequire '../sql/connect.php';\nrequire '../conf/global.php';\n$ip = $_SERVER['REMOTE_ADDR'];\n\nif($ip == \"127.0.0.1\" || $ip == \"::1\" || $ip == ''){\n\t\n\tif($sysguard){\n\t\techo \"DEBUG: System Guard Online\";\n\t\t\t\n\t\t// Money Transaction Checker\n\t\t$chktrans = \"SELECT * FROM bank_transactions WHERE watchdog_approve = '0' AND wd_scanned = '0'\";\n\t\t$result2 = $conn->query($chktrans);\n\t\t$num_rows = mysqli_num_rows($result2);\n\t\tif($num_rows > 0){\n\t\t\t\n\t\t\t$syslogsql = \"INSERT INTO gamelogs(userid,username,type) VALUES('9', 'SYSTEM', 'Watchdog Performing Scan: Bank Transactions')\";\n\t\t\t$result = $conn->query($syslogsql);\n\t\t\t\n\t\t\twhile($row = $result2->fetch_assoc()) {\n\t\t\t\t$transactionid = $row['id'];\n\t\t\t\t$senderid = $row['userid'];\n\t\t\t\t$recieverid = $row['recvid'];\n\t\t\t\t$amount = $row['amount'];\n\t\t\t\t\n\t\t\t\t$checkUserIp = \"SELECT regip FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t$chkipResult = $conn->query($checkUserIp);\n\t\t\t\t\n\t\t\t\twhile ($rowip = mysqli_fetch_assoc($chkipResult)) {\n\t\t\t\t\t$account1ip = $rowip[\"regip\"];\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$checkUserIp2 = \"SELECT regip FROM accounts WHERE id = '$recieverid' limit 1\";\n\t\t\t\t$chkipResult2 = $conn->query($checkUserIp2);\t\t\t\n\t\t\t\t\n\t\t\t\twhile ($rowip2 = mysqli_fetch_assoc($chkipResult2)) {\n\t\t\t\t\t$account2ip = $rowip2[\"regip\"];\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif($senderid == $recieverid && $amount < 0 && $account1ip == $account2ip){\n\t\t\t\t\t// Known bank transfer logic (A negative transaction charge is sent to the user to subtract out the dollar amount from their account.)\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\n\t\t\t\t};\n\t\t\t\tif($senderid == $recieverid && $amount > 0 && $account1ip == $account2ip){\n\t\t\t\t\t// Known bank transfer logic (Post the new balance to the user as if they deposited the money themselves.)\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount < 0 && $account1ip == $account2ip){\n\t\t\t\t\t// ACCOUNT CAUGHT | User has created another account and sent the funds to alt account\n\t\t\t\t\t$WD_DNY = \"UPDATE bank_transactions SET watchdog_approve = '0', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_DNY);\n\t\t\t\t\t\n\t\t\t\t\t$sqlsearchuname = \"SELECT username FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t\t$result22 = $conn->query($sqlsearchuname);\n\t\t\t\t\t$row22 = $result22->fetch_assoc();\n\t\t\t\t\t$username = $row22['username'];\n\t\t\t\t\t\n\t\t\t\t\t$WD_ALRT = \"INSERT INTO gamelogs(userid,username,type) VALUES ('$senderid', '$username', 'MULTI-ACCOUNT MONEY TRANSFER DETECTED!!!')\";\n\t\t\t\t\t$result = $conn->query($WD_ALRT);\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount > 0 && $account1ip == $account2ip){\n\t\t\t\t\t// ACCOUNT CAUGHT | User has created another account and sent the funds to alt account\n\t\t\t\t\t$WD_DNY = \"UPDATE bank_transactions SET watchdog_approve = '0' AND wd_scanned = '1' WHERE id = '$transactionid\";\n\t\t\t\t\t$result = $conn->query($WD_DNY);\n\t\t\t\t\t\n\t\t\t\t\t$sqlsearchuname = \"SELECT username FROM accounts WHERE id = '$senderid' limit 1\";\n\t\t\t\t\t$result22 = $conn->query($sqlsearchuname);\n\t\t\t\t\t$row22 = $result22->fetch_assoc();\n\t\t\t\t\t$username = $row22['username'];\n\t\t\t\t\t\n\t\t\t\t\t$WD_ALRT = \"INSERT INTO gamelogs(userid,username,type) VALUES ('$senderid', '$username', 'MULTI-ACCOUNT MONEY TRANSFER DETECTED!!!')\";\n\t\t\t\t\t$result = $conn->query($WD_ALRT);\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount > 0 && $account1ip != $account2ip){\n\t\t\t\t\t// Known bank transfer logic ( Legit Transfer )\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\t\t\t\t\n\t\t\t\t};\n\t\t\t\tif($senderid == $recieverid && $amount > 0 && $account1ip != $account2ip){\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\t\t\n\t\t\t\t};\n\t\t\t\tif($senderid != $recieverid && $amount < 0 && $account1ip != $account2ip){\n\t\t\t\t\t$WD_APP = \"UPDATE bank_transactions SET watchdog_approve = '1', wd_scanned = '1' WHERE id = '$transactionid'\";\n\t\t\t\t\t$result = $conn->query($WD_APP);\n\t\t\t\t};\n\t\t\t}\t\t\n\t\t}\n\t\telse {\n\t\t\t// Nothing to do, do nothing.\n\t\t}\n\t}\n\t\t\n\telse{\n\t\techo \"DEBUG: System Guard Offline\";\n\t};\n}\n\nelse {\n\techo \"403 Forbidden : System Access Only\";\n};\n?>", "<?php\n\nif (empty($_SERVER['HTTP_CF_CONNECTING_IP'])) {\n\tif(!empty($_SERVER[\"HTTP_X_FORWARDED_FOR\"])) {\n\t\t$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];\n\t\t// Check if IP is valid\n\t\tif(filter_var($ip, FILTER_VALIDATE_IP)){} // Leave ip as is\n\t\telse{$ip = $_SERVER['REMOTE_ADDR'];};\t\t\n\t}\n\telse{\n\t$ip = $_SERVER['REMOTE_ADDR'];\n\t};\n}\nelse {\n\t$ip = $_SERVER['HTTP_CF_CONNECTING_IP'];\n\t// Check if IP is valid\n\tif(filter_var($ip, FILTER_VALIDATE_IP)){} // Leave ip as is\n\telse{$ip = $_SERVER['REMOTE_ADDR'];};\t\n};\n\n$error=''; // Variable To Store Error Message\nif (empty($_POST['username']) || empty($_POST['password'])) {\n$error = \"Username or Password field is empty\";\necho $error;\n};\n\ndate_default_timezone_set('America/New_York');\n$username=$_POST['username'];\n\n//Check to see if user is activated\n\n$sql = \"SELECT id from accounts WHERE username = '$username' AND active = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\nwhile($row = $result->fetch_assoc()) {\n\t$userid = $row[\"id\"];\n};\n\n\tif ($num_rows == 0) {\n\t\techo \"<br>\";\n\t\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but is not activated.')\";\n\t\t$result = $conn->query($sql);\n\t\techo \"This user account has not been activated, please check your email for the activation letter. If you have not recieved this email please contact an administrator at <a href='mailto:support@boothlabs.me'>support@boothlabs.me</a>'\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<form name='back' action='/'>\";\n\t\techo '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\t\techo '</form>';\n}\nelse {\n\n\n//Check to see if user is deleted\n\n$sql = \"SELECT id FROM accounts WHERE username = '$username' AND deleted = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\n\nif ($num_rows > 0) {\n\techo \"<br>\";\n\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but their account is deleted.')\";\n\t$result = $conn->query($sql);\n\techo \"This user account is deleted, if you wish to reactivate your account please contact an administrator.\";\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<form name='back' action='/'>\";\n\techo '  <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\techo '</form>';\n}\nelse {\n\n$sql = \"SELECT id FROM accounts WHERE username = '$username' AND banned = '1'\";\n$result = $conn->query($sql);\n$num_rows = mysqli_num_rows($result);\nwhile($row = $result->fetch_assoc()) {\n\t$userid = $row[\"id\"];\n};\n\t\n\tif ($num_rows > 0) {\n\t\techo \"<br>\";\n\t\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', '$username tried to login but is banned.')\";\n\t\t$result = $conn->query($sql);\n\t\techo \"This user account is banned, please contact an administrator for more information.\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"<form name='back' action='/'>\";\n\t\techo '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\n\t\techo '</form>';\n}\n\nelse {\n\n\n$sql1 = \"SELECT password FROM accounts WHERE username='$username'\";\n$result1 = $conn->query($sql1);\n\nif ($result1->num_rows > 0) {\n     while($row = $result1->fetch_assoc()) {\n         $dbhash = $row[\"password\"];\n     }\n};\n\n$sql2 = \"SELECT id FROM accounts WHERE username='$username'\";\n$result2 = $conn->query($sql2);\nif ($result2->num_rows > 0) {\n\twhile($row = $result2->fetch_assoc()) {\n\t\t$userid = $row[\"id\"];\n\t}\n};\n\n$parts = explode('$', $dbhash);\n$password = crypt($_POST['password'], sprintf('$%s$%s$%s$', $parts[1], $parts[2], $parts[3]));\n\n\n// SQL query to fetch information of registered users and finds user match.\n$sql = \"SELECT * FROM accounts WHERE password='$password' AND username='$username'\";\n$result = $conn->query($sql);\n$rows = mysqli_num_rows($result);\nif ($rows == 1) {\n$_SESSION['login_user'] = $username; // Initializing Session\n$_SESSION[\"loggedIn\"] = true;\n$_SESSION[\"userid\"] = $userid;\n$date = date('Y-m-d H-i-s');\n$sql = \"UPDATE accounts SET lastip='$ip', lastlogindate='$date' WHERE password='$password' AND username='$username'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('\".$_SESSION['userid'].\"', '\".$_SESSION['login_user'].\"', 'Logged in')\";\n$result = $conn->query($sql);\n\n\nheader(\"location: /\"); // Redirecting To Other Page\n} else {\n$error = \"Username or Password is invalid\";\necho \"<br>\";\necho \"<h1>Login Failed</h1>\";\necho \"<br>\";\necho \"<p>The specified username and/or password did not match our records. Please try again.</p>\";\necho \"<br>\";\necho \"<form name='back' action='?a=login'>\";\necho '<button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\">Back</button>';\necho '</form>';\n};\n};\n};\n};\n?>", "<div id='content'>\n<h2>Site Offline</h2>\n\n<h4>HackerCity is currently offline for maintenance </h4>\n\n<p>Keep up to date on the latest bugs on our Github!</p>\n<a style=\"font-size:20px;color:cyan;\" href=\"https://github.com/Eleix/openhacker/issues\">HackerCity Github Issues Page</a>\n</ul>\n</div>\n", "<?php\n\nif ($REGISTRATION == 0) {\n\techo \"Site is not accepting new users at this time. Please try again later.\";\n}\nelse {\n\nif (empty($_SERVER['HTTP_CF_CONNECTING_IP'])) {\n\tif(!empty($_SERVER[\"HTTP_X_FORWARDED_FOR\"])) {\n\t\t$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];\n\t\t// Check if IP is valid\n\t\tif(filter_var($ip, FILTER_VALIDATE_IP)){} // Leave ip as is\n\t\telse{$ip = $_SERVER['REMOTE_ADDR'];};\t\t\n\t}\n\telse{\n\t$ip = $_SERVER['REMOTE_ADDR'];\n\t};\n}\nelse {\n\t$ip = $_SERVER['HTTP_CF_CONNECTING_IP'];\n\t// Check if IP is valid\n\tif(filter_var($ip, FILTER_VALIDATE_IP)){} // Leave ip as is\n\telse{$ip = $_SERVER['REMOTE_ADDR'];};\t\n};\n\n$salt = substr(str_replace('+','.',base64_encode(md5(mt_rand(), true))),0,16);\n$rounds = 10000;\n$encpass = crypt($_POST['password'], sprintf('$6$rounds=%d$%s$', $rounds, $salt));\n$reghash = md5( rand(0,1000) );\n\nrequire_once \"recaptchalib.php\";\n\n// your secret key\n$secret = \"CHANGEME\";\n \n// empty response\n$response = null;\n \n// check secret key\n$reCaptcha = new ReCaptcha($secret);\n\n$email = $_POST['email'];\n\n// Remove all illegal characters from email\n$email = filter_var($email, FILTER_SANITIZE_EMAIL);\n\n// Validate e-mail\nif (!filter_var($email, FILTER_VALIDATE_EMAIL) === false) {\n\nif ($_POST[\"password\"] == $_POST[\"confpass\"]) {\n\n// if submitted check response\nif ($_POST[\"g-recaptcha-response\"]) {\n    $response = $reCaptcha->verifyResponse(\n        $_SERVER[\"REMOTE_ADDR\"],\n        $_POST[\"g-recaptcha-response\"]\n    );\n}\n\nif ($response != null && $response->success) {\n\n//if submit is not blanked i.e. it is clicked.\nif(isset($_REQUEST['submit'])!='')\n{\nif($_POST['username']=='' || $_POST['email']=='' || $_POST['password']=='')\n{\necho \"please fill the empty field.\";\n}\nelse\n{\n\n// Validate and Sanitize Username\n\n$username = $_POST['username'];\n$safeusername = (filter_var($username, FILTER_SANITIZE_STRING));\nif(@preg_match(''/^[a-zA-Z0-9]{3,}$/', $safeusername)) { // invalid username\n\techo \"Your username is not allowed. Allowed values are a-z, A-Z, 0-9 and must be at least 3 characters\";\n}\nelse { // valid username\n\n$sql = \"INSERT INTO accounts(username,email,password,regip,reghash) VALUES('$safeusername', '$email', '$encpass', '$ip', '$reghash')\";\n$result = $conn->query($sql);\nif($result)\n{\n\n$to      = $email; // Send email to our user\n$subject = \"Hacker City Signup | Verification\"; // Give the email a subject \n$message = \"\n \nThank you for registering an account at Hacker City.\nYour account has been created and the final step is to activate your account.\n\nWe use activation emails as a way to prevent bots and trouble users from abusing the system and flooding the site with fake users.\n \n------------------------\nUsername: $safeusername\nPassword: Not sent via email for security \n------------------------\n \nPlease click this link to activate your account:\nhttps://boothlabs.me/verify.php?email=$email&reghash=$reghash\n \n\"; // Our message above including the link\n                     \n$headers = 'From:noreply@boothlabs.me' . \"\\r\\n\"; // Set from headers\nmail($to, $subject, $message, $headers); // Send our email\n\n$sql9 = \"SELECT id FROM accounts WHERE username = '$safeusername';\";\n$result9 = $conn->query($sql9);\nwhile ($row9 = $result9->fetch_assoc()){\n$userid = $row9['id'];\n}\n\n$sql10 = \"INSERT INTO `usersystems` (`userid`, `cpu`, `motherboard`, `ram`, `os`, `hddtype`, `hddhealth`, `size`, `spaceused`, `spacefree`, `logs`, `securitypack`, `firewall`, `sphealth`, `firewallhealth`, `connectedto`, `connectiontype`, `ipaddress`, `gatewayip`, `gatewaystatus`, `systemstatus`) VALUES ('$userid', '486', 'Simple Motherboard', '256MB', 'DOS', '10GB', '100', '10GB', '0', '10', 'Not Installed', 'Not Installed', 'Not Installed', '0', '0', 'n00bnet', 'Loopback', '127.0.0.1', '', 'Offline', 'online');\";\n$result10 = $conn->query($sql10);\n\n// Create bank account\n\n$sql11 = \"INSERT INTO 'economy' ('userid') VALUES ('$userid');\"\n$result11 = $conn->query($sql11);\n\necho \"Account Created Successfully, Check your email for instructions on activating your account .\";\n}\nelse {\necho \"There is some problem creating your account, please contact an administrator to resolve the issue.\";\necho \"<br>\";\necho $sql;\n};\n};\n}\n}\nelse {\n\techo \"You did not pass the robot validation.\";\n};\n}\nelse {\n\techo \"Your passwords did not match, please try again,\";\n};\n}\nelse {\n\techo \"Your email did not appear to be valid, please try again.\";\n};\n};\n?>\n", "<div id=\"login\">\n\n<img style=\"height:150px; width:150px;\"src=\"/images/bankimg.png\">\n\n<h6>Keeping you in the green</h6>\n\n\n<?php\n\nif(!isset($_SESSION['bank_login'])){\n\t\t\n$sql = \"SELECT userid FROM economy WHERE userid = '$userid'\";\n$result = $conn->query($sql);\nif ($result->num_rows > 0) {\n     echo '<form name=\"login\" method=\"POST\" autocomplete=\"off\" action=\"?a=bankin\">';\n\t echo \"<br>\";\n\t echo 'Password:  <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t echo \"<br>\";\n \t echo \"<button class='btn waves-effect waves-light' type='submit' name='submit'>Login<i class='material-icons center'></i></button>\";\n\t echo \"<br>\";\n\t echo \"<br>\";\n\t echo \"</form>\";\n} else {\n     echo \"<p>We don't appear to have your account on file. Why not register an account with us? Opening an account is totally free and requires no inital payment!</p>\";\n\t echo '<form name=\"registration\" method=\"POST\" action=\"?a=bankin\">';\n\t echo 'Password: <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t echo \"<br>\";\n\t echo \"<br>\";\n\t echo '<input style=\"width:70px;\" type=\"submit\" name=\"submit\" value=\"Register\">';\n\t echo \"</form>\";\n\t echo \"<br>\";\n\t \n};\n}\nif (isset($_SESSION['bank_login'])){\n\n\techo \"<h2>\";\n\techo $_SESSION['login_user'];\n\techo \"'s Banking Account</h2>\";\n\t$sql = \"SELECT cash FROM economy WHERE userid = '$userid'\";\n\t$result = $conn->query($sql);\n\twhile ($row = $result->fetch_assoc()){\n\t\t$balance = $row['cash'];\n\t};\n\t\n\techo \"<p>Total Balance: $\"; printf(\"%.2f\", $balance); echo \"</p>\";\n\techo '<form name=\"sendmoney\" method=\"POST\" action=\"?a=banksend\">';\n\techo \"Amount:\"; echo '<input type=\"text\" name=\"amount\" value=\"\" size=\"10\">';\n\techo \"<br>\";\n\techo \"To:\"; echo '<input type=\"text\" name=\"recvusername\" value=\"\">';\n\techo \"<br>\";\n\techo \"Details:\"; echo '<input type=\"text\" name=\"details\" value=\"\">';\n\techo \"<br>\";\n\t\n    echo \"<input type='radio' value='hacker' id='hacker' name='type'>\";\n    echo \"<label for='hacker'>Hacker</label>\";\n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<input type='radio' value='clan' id='clan' name='type'>\";\n    echo \"<label for='clan'>Clan</label>\";   \n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<br>\";\n\n\techo \"<button class='btn waves-effect waves-light' type='submit' name='action'>Send Cash<i class='material-icons center'></i></button>\";\n\techo \"</form>\";\n\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<h6>Previous Transactions (Last 50)</h6>\";\n\t\n\n\t$sql = \"SELECT timestamp,amount,details FROM bank_transactions WHERE userid = '$userid' ORDER BY timestamp DESC \";\n\t$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\t\t$amount = $row['amount'];\n\t\t$takebal = number_format($amount, 2, '.', '');\n     echo \"<div id=admintable><table><tr><th>Timestamp</th><th>Amount</th><th>Details</th>\";\n     // output data of each row\n     while($row = $result->fetch_assoc()) {\n\n         echo \"<tr><td>\" . $row[\"timestamp\"]. \"</td><td>$\" . $row[\"amount\"]. \"</td><td>\" . $row[\"details\"]. \"</td>\";\n     }\n     echo \"</table>\";\n} else {\n     echo \"No transactions found.\";\n};\n\n\n}\n\n\n?>\n\n</div>\n</div>", "<div id=\"content\">\n\n<?php\n\n$SendUser=$userid;\n$SendUserName = $_SESSION['login_user'];\n$RecUser=$_POST['recvusername'];\n$type=$_POST['type'];\n$amount = $_POST['amount'];\n$details = $_POST['details'];\n\n//Sanitize details input\n\n$safedetails = (filter_var($details, FILTER_SANITIZE_STRING));\n\nif($amount < 0 ){ \n\techo \"Amount sent cannot be a negative number.\";\n\techo \"<br>\";\n\techo \"Transaction cancelled\";\n\necho \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n}\nelse{\n\nif($type == 'hacker'){\n\n$details = \"sent by $SendUserName reason: \";\n$details .= $safedetails; \n$details2 = \"sent to $RecUser reason: \";\n$details2 .= $safedetails;\n\n\t\n$amountnegative = $amount * -1;\n\n//Check to see if RecUser has an account with the bank\n\n$sql = \"SELECT id FROM accounts WHERE username = '$RecUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$recvuser = $row['id']; // User ID return\n}\n\n$sql = \"SELECT id FROM economy WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$SendUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBal = $row['cash'];\n}\n\n$newBalUs1 = $oldBal - $amount;\n\nif ($recvuser == $SendUser) {\necho \"<h1>Transaction Failed</h1>\";\necho \"<br>\";\necho \"You can't send money to yourself!\"; \necho \"<br>\";\necho \"<br>\";\necho \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\nif ($newBalUs1 < 0)\n{\n   echo \"<h1>Transaction Failed</h1>\";\n   echo \"<br>\";\n   echo \"You can't send more money than you actually have.\";\n   echo \"<br>\";\n   echo \"<br>\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$recvuser'\";  //fetch the recieving users current bank balance\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBalUs2 = $row['cash'];   // export the returned value to a variable\n}\n\n$newBalUs2 = $oldBalUs2 + $amount;\n\n$sql = \"UPDATE economy SET cash='$newBalUs2' WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\n$sql = \"UPDATE economy SET cash='$newBalUs1' WHERE userid= '$SendUser'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$SendUser', '$recvuser', '$details2', '$amountnegative')\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$recvuser', '$recvuser', '$details', '$amount')\";\n$result = $conn->query($sql);\n\n   echo \"Transaction Complete\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n}\n}\n} \nelse {\n\techo \"<h1>Transaction Failed</h1>\";\n\techo \"<br>\";\n\techo \"<p>We are sorry. Our database failed to find the hacker \"; echo $RecUser; echo \" in our banking database.</p>\";\n\techo \"<p>Your previous transaction has been canceled.</p>\";\n\techo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n};\n}\nelse{ //type is clan\n\n$clanname = $RecUser; //Used in the error message\n\n// Convert clan name to ID\n$sqlConv2ID = \"SELECT id FROM clans WHERE clanname = '$RecUser'\";\n$resultConv2ID = $conn->query($sqlConv2ID);\nwhile($rowConvID = $resultConv2ID->fetch_assoc()){\n  $RecUser = $rowConvID['id'];\n};\n\n$details = \"sent by $SendUserName reason: \";\n$details .= $safedetails; \n$details2 = \"sent to $clanname reason: \";\n$details2 .= $safedetails;\n$amount = $_POST['amount'];\n$amountnegative = $amount * -1;\n\n//Check to see if RecUser has an account with the bank\n\n$sql = \"SELECT clanid FROM claneconomy WHERE clanid = '$RecUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$recvuser = $row['clanid']; // Clan ID return\n};\n\n$sql = \"SELECT clanid FROM claneconomy WHERE clanid = '$recvuser'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$SendUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBal = $row['cash'];\n}\n\n$newBalUs1 = $oldBal - $amount;\n\nif ($newBalUs1 < 0)\n{\n   echo \"<h1>Transaction Failed</h1>\";\n   echo \"<br>\";\n   echo \"You can't send more money than you actually have.\";\n   echo \"<br>\";\n   echo \"<br>\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\n$sql = \"SELECT cash FROM claneconomy WHERE clanid = '$recvuser'\";  //fetch the recieving clan's current bank balance\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBalUs2 = $row['cash'];   // export the returned value to a variable\n}\n\n$newBalUs2 = $oldBalUs2 + $amount;\n\n$sql = \"UPDATE claneconomy SET cash='$newBalUs2' WHERE clanid = '$recvuser'\";\n$result = $conn->query($sql);\n\n$sql = \"UPDATE economy SET cash='$newBalUs1' WHERE userid= '$SendUser'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$SendUser', '$recvuser', '$details2', '$amountnegative')\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO clanbank_transactions(clanid,clanrecvid,details,amount,transactionuserid) VALUES('$recvuser', '$recvuser', '$details', '$amount', '$SendUserName')\";\n$result = $conn->query($sql);\n\n   echo \"Transaction Complete\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n}\n} \nelse {\n\techo \"<h1>Transaction Failed</h1>\";\n\techo \"<br>\";\n\techo \"<p>We are sorry. Our database failed to find the clan \"; echo $clanname; echo \" in our banking database.</p>\";\n\techo \"<p>Your previous transaction has been canceled.</p>\";\n\techo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n};\n};\n};\n\n?>\n</div>\n", "<div id=\"login\">\n\n<img style=\"height:150px; width:150px;\"src=\"/images/bankimg.png\">\n\n<h6>Keeping you in the green</h6>\n\n\n<?php\n\t$getUserClan = \"SELECT clan FROM accounts WHERE id = '$userid'\";\n\t$resultUC = $conn->query($getUserClan);\n\twhile ($rowClan = $resultUC->fetch_assoc()){\n\t\t$clanid = $rowClan['clan'];\n\t};\n\nif(!isset($_SESSION['clanbank_login'])){\n\n\t$sql = \"SELECT clanid FROM claneconomy WHERE clanid = '$clanid'\";\n\t$result = $conn->query($sql);\n\tif ($result->num_rows > 0) {\n    \techo '<form name=\"login\" method=\"POST\" autocomplete=\"off\" action=\"?a=clanbankin\">';\n\t\techo \"<br>\";\n\t\techo 'Password:  <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t\techo \"<br>\";\n\t\techo \"<button class='btn waves-effect waves-light' type='submit' name='submit'>Login<i class='material-icons center'></i></button>\";\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo \"</form>\";\n\t}\n\telse {\n    \techo \"<p>We don't appear to have your clan's account on file. Why not register a clan account with us? Opening an account is totally free and requires no inital payment!</p>\";\n\t\techo '<form name=\"registration\" method=\"POST\" action=\"?a=clanbankin\">';\n\t\techo 'Password: <input type=\"password\" name=\"password\" value=\"\"><br>';\n\t\techo \"<br>\";\n\t\techo \"<br>\";\n\t\techo '<input style=\"width:70px;\" type=\"submit\" name=\"submit\" value=\"Register\">';\n\t\techo \"</form>\";\n\t\techo \"<br>\";\n\t};\n}\nelse {\n\techo \"<h2>\";\n\n$sqlGetName = \"SELECT * FROM clans WHERE id = '$clanid'\";\n$resultGetName = $conn->query($sqlGetName);\n\twhile ($rowGetName = $resultGetName->fetch_assoc()){\n\t\t$clanname = $rowGetName['clanname'];\n\t};\n\n\techo $clanname;\n\techo \"'s Banking Account</h2>\";\n\t$sql = \"SELECT cash FROM claneconomy WHERE clanid = '$clanid'\";\n\t$result = $conn->query($sql);\n\twhile ($row = $result->fetch_assoc()){\n\t\t$balance = $row['cash'];\n\t};\n\t\n\techo \"<p>Total Balance: $\"; printf(\"%.2f\", $balance); echo \"</p>\";\n\techo '<form name=\"sendmoney\" method=\"POST\" action=\"?a=clanbanksend\">';\n\techo \"Amount:\"; echo '<input type=\"text\" name=\"amount\" value=\"\" size=\"10\">';\n\techo \"<br>\";\n\techo \"To:\"; echo '<input type=\"text\" name=\"recvusername\" value=\"\">';\n\techo \"<br>\";\n\techo \"Details:\"; echo '<input type=\"text\" name=\"details\" value=\"\">';\n\techo \"<br>\";\n\n    echo \"<input type='radio' value='hacker' id='hacker' name='type'>\";\n    echo \"<label for='hacker'>Hacker</label>\";\n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<input type='radio' value='clan' id='clan' name='type'>\";\n    echo \"<label for='clan'>Clan</label>\";   \n    echo \"<div class='check'><div class='inside'></div></div>\";\n\n    echo \"<br>\";\n\n\techo \"<button class='btn waves-effect waves-light' type='submit' name='action'>Send Cash<i class='material-icons center'></i></button>\";\n\techo \"</form>\";\n\n\techo \"<br>\";\n\techo \"<br>\";\n\techo \"<h6>Previous Transactions (Last 50)</h6>\";\n\t\n\n\t$sql = \"SELECT timestamp,amount,details FROM clanbank_transactions WHERE clanid = '$clanid' ORDER BY timestamp DESC \";\n\t$result = $conn->query($sql);\n\n\tif ($result->num_rows > 0) {\n\n\t\t$amount = $row['amount'];\n\t\t$takebal = number_format($amount, 2, '.', '');\n    \techo \"<div id=admintable><table><tr><th>Timestamp</th><th>Amount</th><th>Details</th>\";\n    \t// output data of each row\n     \twhile($row = $result->fetch_assoc()) {\n        \techo \"<tr><td>\" . $row[\"timestamp\"]. \"</td><td>$\" . $row[\"amount\"]. \"</td><td>\" . $row[\"details\"]. \"</td>\";\n     \t};\n\t\techo \"</table>\";\n\t} \n\telse {\n    \techo \"No transactions found.\";\n\t};\n};\n?>\n</div>\n</div>", "<div id=\"content\">\n<?php\n\n$username = $_SESSION['login_user'];\n\n\t$getUserClan = \"SELECT clan FROM accounts WHERE id = '$userid'\";\n\t$resultUC = $conn->query($getUserClan);\n\twhile ($rowClan = $resultUC->fetch_assoc()){\n\t\t$clanid = $rowClan['clan'];\n\t};\n\n// Check if Clan account exists, if not allow the user to set the password now and log them in\n\n$sqlCheckEconomy = \"SELECT * FROM claneconomy WHERE clanid = '$clanid'\";\n$resultCheckEconomy = $conn->query($sqlCheckEconomy);\nif ($resultCheckEconomy->num_rows == 0) {\n\n$sql = \"INSERT INTO claneconomy(clanid) VALUE('$clanid')\";\n$result = $conn->query($sql);\n\n// Set Clan bank password\n\n$password = $_POST['password'];\n$safepassword = mysqli_real_escape_string($conn, $password);\n\n$sqlSetCBP = \"UPDATE clans SET bankpassword = '$safepassword' WHERE id = '$clanid'\";\n$resultSetCBP = $conn->query($sqlSetCBP);\n\nheader(\"location: ?a=bank\"); // Redirecting To Other Page\n}\nelse {\n\n$sql1 = \"SELECT bankpassword FROM clans WHERE id='$clanid'\";\n$result1 = $conn->query($sql1);\n\nif ($result1->num_rows > 0) {\n     while($row = $result1->fetch_assoc()) {\n         $clanpass = $row[\"bankpassword\"];\n     };\n};\n\n$password = $_POST['password'];\n\n// SQL query to fetch information of registered users and finds user match.\n$sql = \"SELECT * FROM clans WHERE bankpassword='$password' AND id='$clanid'\";\n$result = $conn->query($sql);\n$rows = mysqli_num_rows($result);\nif ($rows == 1) {\n$_SESSION['clanbank_login']=1; // Just something to say the user password was correct\n\n$sql = \"SELECT id FROM clans WHERE id = '$clanid'\";\n$result = $conn->query($sql);\nif ($result->num_rows > 0) {\n\nheader(\"location: ?a=clanbank\"); // Redirecting To Other Page\n}\n} else {\n$error = \"Incorrect Password\";\necho \"<br>\";\necho \"<h1>Incorrect Password</h1>\";\necho \"<br>\";\necho \"<br>\";\necho \"<form name='back' action='?a=clanbank'>\";\necho \"<button class='btn waves-effect waves-light' type='submit' name='submit'>Back<i class='material-icons center'></i></button>\";\necho '</form>';\n};\n};\n?>\n</div>", "<div id=\"content\">\n\n<?php\n\n\t$username = $_SESSION['login_user'];\n\n\t$sqlGetClanID = \"SELECT clan FROM accounts WHERE username = '$username'\";\n\t$resultGetCID = $conn->query($sqlGetClanID);\n\twhile($rowCID = $resultGetCID->fetch_assoc()) {\n\t\t$clanid = $rowCID['clan'];\n\t};\n\n\n$SendUser=$clanid;\n$RecUser=$_POST['recvusername'];\n$type=$_POST['type'];\n$amount = $_POST['amount'];\n$details = $_POST['details'];\n\n//Sanitize details input\n\n$safedetails = (filter_var($details, FILTER_SANITIZE_STRING));\n\nif($amount < 0 ){ \n\techo \"Amount sent cannot be a negative number.\";\n\techo \"<br>\";\n\techo \"Transaction cancelled\";\n\necho \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n}\nelse{\n\nif($type == 'hacker'){\n\n$details = \"sent by $SendUserName reason: \";\n$details .= $safedetails; \n$details2 = \"sent to $RecUser reason: \";\n$details2 .= $safedetails;\n$amount = $_POST['amount'];\n$amountnegative = $amount * -1;\n\n//Check to see if RecUser has an account with the bank\n\n$sql = \"SELECT id FROM accounts WHERE username = '$RecUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$recvuser = $row['id']; // User ID return\n}\n\n$sql = \"SELECT id FROM economy WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n\n\n$sql = \"SELECT cash FROM claneconomy WHERE clanid = '$SendUser'\";\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBal = $row['cash'];\n}\n\n$newBalUs1 = $oldBal - $amount;\n\nif ($newBalUs1 < 0)\n{\n   echo \"<h1>Transaction Failed</h1>\";\n   echo \"<br>\";\n   echo \"You can't send more money than you actually have.\";\n   echo \"<br>\";\n   echo \"<br>\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n} else {\n\n$sql = \"SELECT cash FROM economy WHERE userid = '$recvuser'\";  //fetch the recieving users current bank balance\n$result = $conn->query($sql);\n\nwhile($row = $result->fetch_assoc()){\n$oldBalUs2 = $row['cash'];   // export the returned value to a variable\n}\n\n$newBalUs2 = $oldBalUs2 + $amount;\n\n$sql = \"UPDATE economy SET cash='$newBalUs2' WHERE userid = '$recvuser'\";\n$result = $conn->query($sql);\n\n$sql = \"UPDATE claneconomy SET cash='$newBalUs1' WHERE clanid= '$SendUser'\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO clanbank_transactions(userid,recvid,details,amount) VALUES('$SendUser', '$recvuser', '$details2', '$amountnegative')\";\n$result = $conn->query($sql);\n\n$sql = \"INSERT INTO bank_transactions(userid,recvid,details,amount) VALUES('$recvuser', '$recvuser', '$details', '$amount')\";\n$result = $conn->query($sql);\n\n   echo \"Transaction Complete\";\n   echo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n}\n} \nelse {\n\techo \"<h1>Transaction Failed</h1>\";\n\techo \"<br>\";\n\techo \"<p>We are sorry. Our database failed to find the hacker \"; echo $RecUser; echo \" in our banking database.</p>\";\n\techo \"<p>Your previous transaction has been canceled.</p>\";\n\techo \"<td><form action='?a=bank' method='POST'><input type='submit' name='submit-btn' value='Back to account summary' /></td></form>\";\n\n};\n}\nelse {\necho \"Clan to Clan coming soon\";\n};\n};\n?>\n</div>\n", "<script type=\"text/javascript\">\nfunction checkDelete(){\n    return confirm('Are you sure?');\n}\n</script>\n\n<div id=\"admin\">\n<div id=\"content\">\n\t<h1>Clan Roster</h1>\n\t<br>\n\t\n\n<?php\n\t\n\t$username = $_SESSION['login_user'];\n\n\t$sqlGetClanID = \"SELECT clan FROM accounts WHERE username = '$username'\";\n\t$resultGetCID = $conn->query($sqlGetClanID);\n\twhile($rowCID = $resultGetCID->fetch_assoc()) {\n\t\t$clanid = $rowCID['clan'];\n\t};\n\n$sql = \"SELECT id, username, clancouncil FROM accounts WHERE clan = '$clanid'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n     echo \"<div id=admintable><table><tr><th>Username</th><th>Role</th><th>Bank Balance</th><th>Action</th>\";\n\n     // output data of each row\n     while($row = $result->fetch_assoc()) {\n    \t echo \"<tr><td><a href=?a=profile&id=\" . $row[\"id\"]. \">\" . $row[\"username\"]. \"</td><td>\" . $row[\"clancouncil\"]. \"</td><td>\" . $row[\"role\"]. \"</td><td>\" . $row[\"lastip\"]. \"</td><td>\" . $row[\"lastlogindate\"]. \"</td><td>\" . $row[\"regdate\"]. \"\";\n\t\t echo \"<td><a href=?a=profile&id=\" . $row[\"id\"]. \"><button type='submit' name='action'><i class='material-icons center'>edit</i></button></a>\";\n\t\t echo \"<input type='hidden' name='tempId' value='\".$row[\"id\"].\"'/><form action='?m=deluser' method='POST'><button type='submit' name='action' action=''><i class='material-icons center'>delete</i></button></form>\";\n\t\t echo \"<input type='hidden' name='tempId' value='\".$row[\"id\"].\"'/><form action='?m=banuser' method='POST'><button type='submit' name='action'><i class='material-icons center'>block</i></button></form></td>\";\n     }\n     echo \"</table>\";\n} else {\n     echo \"0 results\";\n};\n\n\n$result->free();\n\n?>\n</div>\n</div>", "<?php\n$bio = $_POST['bio'];\n\n// Sanitize bio but allow for a minimal amount of HTML so the user can style their bio thir way.\n$safebio = $purifier->purify($_safebio);\n\n$sql = \"UPDATE accounts SET bio='$safebio' WHERE username='$username'\";\n\n$result = $conn->query($sql);\n\nheader(\"location: ?a=accountdetails\");\n\n?>", "<html>\n<head>\n\n<title>Hacker City | <?php \nif (empty($_GET['m'])){\n\tif (empty($_GET['a'])) {\n\t\techo \"Index\";\n\t}\n\telse{\n\t\t$url = $_GET['a'];\n\t\tswitch($url){\n\t\t\tcase \"accountdetails\": echo \"Account Details\";break;\n\t\t\tcase \"jail\": echo \"Jail\";break;\n\t\t\tcase \"smalljobs\": echo \"Small Jobs\";break;\n\t\t\tcase \"statistics\": echo \"Player Stats\";break;\n\t\t\tcase \"bank\": echo \"Personal Bank\";break;\n\t\t\tcase \"softwareshop\": echo \"Software Shop\";break;\n\t\t\tcase \"hardwareshop\": echo \"Hardware Shop\";break;\n\t\t\tcase \"isp\": echo \"Internet Provider\";break;\n\t\t\tcase \"h4h\": echo \"Hacker 4 Hire\";break;\n\t\t\tcase \"cryptocurrency\": echo \"Cryptocurrency\";break;\n\t\t\tcase \"leaderboard\": echo \"Leaderboard\";break;\n\t\t\tcase \"cryptowallet\": echo \"Cryptowallet\";break;\n\t\t\tcase \"internet\": echo \"Internet\";break;\n\t\t\tcase \"publicftp\": echo \"Public FTP Servers\";break;\n\t\t\tcase \"support\": echo \"Support Tickets\";break;\n\t\t\tcase \"chat\": echo \"Chat\";break;\n\t\t\tcase \"rules\": echo \"Rules\";break;\n\t\t\tcase \"system\": echo \"System\";break;\n\t\t\tcase \"syslogs\": echo \"System Logs\";break;\n\t\t\tcase \"email\": echo \"Email Client\";break;\n\t\t\tcase \"storage\": echo \"Storage\";break;\n\t\t\tcase \"cmd\": echo \"Command Prompt\";break;\n\t\t\tcase \"prison\": echo \"Prison\";break;\n\t\t\tcase \"fbimostwanted\": echo \"FBI Most Wanted List\";break;\n\t\t\tcase \"techspecs\": echo \"Server Resources\";break;\n\t\t\tcase \"clanbank\": echo \"Clan Bank\";break;\n\t\t\tcase \"clanroster\": echo \"Clan Roster\";break;\n\t\t\tcase \"profile\": echo \"Player Profile\";break;\n\t\t\tcase \"guest\": echo \"Guest\";break;\n\t\t\tcase \"login\": echo \"Login\";break;\n\t\t\tcase \"register\": echo \"Register\";break;\n\t\t};\n\t};\n}\nelse {\n\t$urlm = $_GET['m'];\n\tswitch($urlm){\n\t\tcase \"logs\": echo \"Game Logs\";break;\n\t\tcase \"banklogs\"; echo \"Bank Transactions\";break;\n\t\tcase \"tickets\"; echo \"Ticket Management\";break;\n\t\tcase \"usermanagement\"; echo \"User Accounts\";break;\n\t};\n}\n\n\n?></title>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Ek+Mukta\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/materialize.css\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/style.css\">\n\n<link rel=\"shortcut icon\" href=\"/images/favicon.ico\" type=\"image/x-icon\">\n<link rel=\"icon\" href=\"/images/favicon.ico\" type=\"image/x-icon\">\n<script src=\"/js/materialize.js\"></script>\n<!-- <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>-->\n<script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js\"></script>\n<script src=\"/js/gameclock.js\"></script>\n<script src=\"/js/countdown.js\"></script>\n\n</head>\n\n<?php\n\nrequire_once '../htmlpurifier/library/HTMLPurifier.auto.php';\n$purifier = new HTMLPurifier();\n\n$mem = new Memcache();\n$mem->addServer(\"127.0.0.1\", 11211);\nrequire 'sql/connect.php';\nrequire 'conf/global.php';\n\nsession_start();\n$start_time = microtime(TRUE);\n$ip = $_SERVER['REMOTE_ADDR'];\n$time = $_SERVER['REQUEST_TIME'];\n$timeout_duration = 1800;\n\n\nif (isset($_SESSION['LAST_ACTIVITY']) && ($time - $_SESSION['LAST_ACTIVITY']) > $timeout_duration) {\n\t\n\t$username = $_SESSION['login_user'];\n\t$userid = $_SESSION['userid'];\n\t$sql = \"INSERT INTO gamelogs(userid,username,type) VALUES('$userid', '$username', 'Logged out due to inactivity')\";\n\t$result = $conn->query($sql);\n\tsession_unset();\n\tsession_destroy();\n\tsession_start();\n};\n\n\n// REBUILD MODE\n\nif($adminrestrict == true && $adminip != $ip ){\n\tinclude 'layout/guest/header.htm';\n\t\n\tinclude \"game/guest/rebuild.htm\";\n\t\n\tinclude \"layout/guest/footer.htm\";\n\t\n}\nelse {\n\n\tif(!isset($_SESSION['login_user'])){\n\n\t\tinclude 'layout/guest/header.htm';\n\t\n\t\t$a = 'guest';\n\t\t$disallowed_paths = array('header', 'footer');\n\t\tif (!empty($_GET['a'])) {\n\t\t\t$tmp_action = basename($_GET['a']);\n\t\t\t// Checks if action is allowed and file exists, then sets the action\n\t\t\tif (!in_array($tmp_action, $disallowed_paths) && file_exists(\"game/guest/{$tmp_action}.htm\")){\n\t\t\t\t$a = $tmp_action;\n\t\t\t};\n\t\t};\n\t\n\tinclude \"game/guest/{$a}.htm\";\n\t\n\tinclude \"layout/guest/footer.htm\";\n\t}\n\telse {\n\t\t$username = $_SESSION['login_user'];\n\t\t$userid = $_SESSION['userid'];\n\t\t$_SESSION['LAST_ACTIVITY'] = $time;\n\t\t$jailtime = '';\n\t\tdate_default_timezone_set('America/New_York');\n\t\t$date = date('Y-m-d H-i-s');\n\t\t$sql = \"UPDATE accounts SET lastseen='$date' WHERE username='$username'\";\n\t\t$result = $conn->query($sql);\n\t\t\n\t\t$sql = \"SELECT * FROM accounts WHERE id ='$userid'\";\n\t\t$result = $conn->query($sql);\n\t\twhile ($row = $result->fetch_assoc()){\n\t\t\t$currenttime = $row['lastseen'];\n\t\t};\n\t\t\n\t\t$sql93 = \"SELECT * FROM jail WHERE userid ='$userid' AND active = '1'\";\n\t\t$result12 = $conn->query($sql93);\n\t\t\n\t\t$num_rows = mysqli_num_rows($result12);\n\t\t\n\t\tif($num_rows == 1) {\n\t\t\n\t\t\twhile ($row1 = $result12->fetch_assoc()){\n\t\t\t\t$jailtime = $row1['jailrelease'];\n\t\t\t};\n\t\t};\t\t\n\t\t$jailoverridepaths = array('accountdetails','jailed','chat','leaderboard','support','ticketcreation','logout','rules','statistics','subcom','subti','ticketclose','userselfdelete','viewmessage','view','profile');\n\n\t\tinclude '/usr/share/nginx/html/layout/main/header.htm';\n\t\techo 'System Time: <div id=\"clockbox\"></div>';\n\t\techo 'Small Hacks: <div id=\"countdown\"></div>';\n\t\t\n\t\t$sql = \"SELECT * FROM accounts WHERE id = '$userid'\";\n\t\t$result = $conn->query($sql);\n\t\t\twhile($row = $result->fetch_assoc()){\n\t\t\t\t\t$cooldown = $row['smallhackcd'];\n\t\t\t}; \n\t\t\n\t\t$disallowed_paths = array('header', 'footer');\n\t\tif (!empty($_GET['m'])){\n\t\t\t$management = basename($_GET['m']);\n\t\t\tif (!in_array($management, $disallowed_paths) && file_exists(\"/usr/share/nginx/html/game/main/admin/{$management}.htm\")){\n\t\t\t\t$m = $management;\n\t\t\t\tif ($jailtime != ''){\n\t\t\t\t\tif ($jailtime > $currenttime && !in_array($management, $jailoverridepaths)){\n\t\t\t\t\t\theader(\"location: ?a=jailed\");\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tinclude (\"/usr/share/nginx/html/game/main/admin/{$m}.htm\");\n\t\t\t}\n\t\t};\n\t\tif (empty($_GET['m'])){\n\t\t\t$a = 'home';\n\t\t\t$disallowed_paths = array('header', 'footer');\n\t\t\tif (!empty($_GET['a'])) {\n\t\t\t\t$tmp_action = basename($_GET['a']);\n\t\t\t\t// Checks if action is allowed and file exists, then sets the action\n\t\t\t\tif (!in_array($tmp_action, $disallowed_paths) && file_exists(\"/usr/share/nginx/html/game/main/user/{$tmp_action}.htm\")){\n\t\t\t\t\t$a = $tmp_action;\n\t\t\t\t};\n\t\t\t};\n\t\t\tif(isset($a)){\n\t\t\t\tinclude \"/usr/share/nginx/html/game/main/user/{$a}.htm\";\n\t\t\t};\n\t\t}\n\t\t\tinclude \"/usr/share/nginx/html/layout/main/footer.htm\";\n\t\t}\n\t\t}\n?>", "<div id=\"footer\">\n<div class=\"bottomleft\">\n<?php\n\n\techo \"\u00a9 2016-2017 Booth Labs\";\n\techo \"<br>\";\n\t\n\t$end_time = microtime(TRUE);\n\t\n\t$time_taken = $end_time - $start_time;\n\t\n\t$time_taken = round($time_taken,5);\n\t\n\techo 'Page generated in '.$time_taken.' seconds.';\n?>\n\n</div>\n\n<div class=\"bottomright\">\n<h6>Version <?php echo $GAMEVERSION; ?></h6>\n<h6>Developed by Francis Booth</h6>\n</div>\n<h6>Gameserver: <?php echo gethostname(); ?> </h6>\n\n<div style=\"clear: both\"></div>\n\n<script type=\"text/javascript\">\nvar sc_project=11259067; \nvar sc_invisible=1; \nvar sc_security=\"f04c648b\"; \nvar scJsHost = ((\"https:\" == document.location.protocol) ?\n\"https://secure.\" : \"http://www.\");\ndocument.write(\"<sc\"+\"ript type='text/javascript' src='\" +\nscJsHost+\n\"statcounter.com/counter/counter.js'></\"+\"script>\");\n</script>\n<noscript><div class=\"statcounter\"><a title=\"web stats\"\nhref=\"http://statcounter.com/\" target=\"_blank\"><img\nclass=\"statcounter\"\nsrc=\"//c.statcounter.com/11259067/0/f04c648b/1/\" alt=\"web\nstats\"></a></div></noscript>\n", "<?php\n\tinclude 'layout/guest/nav.htm';\n?>\t\n", "<div id=\"footer\">\n<div class=\"bottomleft\">\n<?php\n\n\techo \"\u00a9 2016-2017 Booth Labs\";\n\techo \"<br>\";\n\t\n\t$end_time = microtime(TRUE);\n\t\n\t$time_taken = $end_time - $start_time;\n\t\n\t$time_taken = round($time_taken,5);\n\t\n\techo 'Page generated in '.$time_taken.' seconds.';\n?>\n\n</div>\n\n<div class=\"bottomright\">\n<h6>Version <?php echo $GAMEVERSION; ?></h6>\n<h6>Developed by Francis Booth</h6>\n</div>\n<h6>Gameserver: <?php echo gethostname(); ?> </h6>\n\n<div style=\"clear: both\"></div>\n\n<script type=\"text/javascript\">\nvar sc_project=11259067; \nvar sc_invisible=1; \nvar sc_security=\"f04c648b\"; \nvar scJsHost = ((\"https:\" == document.location.protocol) ?\n\"https://secure.\" : \"http://www.\");\ndocument.write(\"<sc\"+\"ript type='text/javascript' src='\" +\nscJsHost+\n\"statcounter.com/counter/counter.js'></\"+\"script>\");\n</script>\n<noscript><div class=\"statcounter\"><a title=\"web stats\"\nhref=\"https://statcounter.com/\" target=\"_blank\"><img\nclass=\"statcounter\"\nsrc=\"//c.statcounter.com/11259067/0/f04c648b/1/\" alt=\"web\nstats\"></a></div></noscript>\n", "<div class=\"menu-wrap\">\n    <nav class=\"menu\">\n        <ul class=\"clearfix\">\n        \n            <li>\n            \t<a href=\"/\"><?php echo $_SESSION['login_user'];?></a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=accountdetails\">Account Details</a></li>\n            \t\t<li><a href=\"?a=statistics\">Statistics</a></li>\n            \t\t<li><a href=\"?a=system\">System</a></li>\n            \t\t<?php\n            \t\t\n            \t\t$username = $_SESSION['login_user'];\n            \t\t\n            \t\t$getid = \"SELECT id FROM accounts WHERE username = '$username'\";\n\t\t\t\t\t$getResult = $conn->query($getid);\n\t\t\t\t\t\n\t\t\t\t\twhile($getrow = $getResult->fetch_assoc()) {\n\t\t\t\t\t\t$userid = $getrow['id'];\n\t\t\t\t\t};\n            \t\t\n            \t\t$sql = \"SELECT * FROM usersystems WHERE id = $userid\";\n\t\t\t\t\t$result = $conn->query($sql);\n\t\t\t\t\twhile ($row = $result->fetch_assoc()){\n\t\t\t\t\t\t$logs = $row['logs'];\n\t\t\t\t\t}\n\t\t\t\t\tif(isset($logs)){\n\t\t\t\t\tif($logs == 'Installed'){\n\t\t\t\t\t\techo \"<li><a href='?a=syslogs'>System Logs</a></li>\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\techo \"\";\n\t\t\t\t\t};\n\t\t\t\t\t};\n            \t\t\n            \t\t?>\n            \t\t\n            \t\t<li><a href=\"?a=email\">Mail</a></li>\n            \t\t<li><a href=\"?a=storage\">Storage</a></li>\n            \t\t<li><a href=\"?a=cmd\">CMD</a></li>\n            \t\t<li><a href=\"?a=logout\">Logout</a></li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href=\"#\">Hacking</a>\n\t\t\t\t\n\t\t\t\t<ul class=\"sub-menu\">\n\t\t\t\t\t<li><a href=\"?a=smalljobs\">Small Jobs</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack A PC</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack A Server</a></li>\n\t\t\t\t\t<li><a href=\"#\">Hack the FBI Database</a></li>\n\t\t\t\t\t<li><a href=\"?a=infections\">Infections</a></li>\n\t\t\t\t\t<li><a href=\"#\">Contract Hacks</a></li>\n\t\t\t\t</ul>\n\t\t\t</li>\t\n\t\t\t\n            <li>\n            \t<a href=\"#\">World</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=leaderboard\">Leaderboard</a></li>\n            \t\t<li><a href=\"?a=bank\">Bank</a></li>\n            \t\t<li><a href=\"?a=cryptowallet\">CryptoWallet</a></li>\n            \t\t<li><a href=\"?a=internet\">Internet</a></li>\n            \t\t<li><a href=\"?a=publicftp\">Public FTP</a></li>\n            \t\t<li><a href=\"?a=support\">Support Ticket(s)</a></li>\n            \t\t<li><a href=\"?a=chat\">Chat</a></li>\n            \t\t<li><a href=\"?a=rules\">Rules</a></li>\n            \t</ul>\n            </li>\n            <li>\n            \t<a href=\"#\">Clan</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<?php\n\t            \t\t$username = $_SESSION['login_user'];\n    \t        \t\t$sql12 = \"SELECT * FROM accounts WHERE username = '$username'\";\n\t\t\t\t\t\t$result12 = $conn->query($sql12);\n\t\t\t\t\t\twhile ($row = $result12->fetch_assoc()){\n\t\t\t\t\t\t\t$clan = $row['clan'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif($clan == ''){\n\t\t\t\t\t\t\techo \"<li><a href='?a=createclan'>Create Clan</a></li>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t$sqlClan = \"SELECT * FROM clans WHERE id = '$clan'\";\n\t\t\t\t\t\t\t$sqlClanResult = $conn->query($sqlClan);\n\t\t\t\t\t\t\twhile ($row78 = $sqlClanResult->fetch_assoc()){\n\t\t\t\t\t\t\t\t$clanname = $row78['clanname'];\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanpage'>$clanname</a></li>\";\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanroster'>Clan Roster</a></li>\";\n\t\t\t\t\t\t\techo \"<li><a href='?a=clanbank'>Clan Bank</a></li>\";\n\t\t\t\t\t\t};\n\t\t\t\t\t?>\n\t\t\t\t</ul>\n\t\t\t</li>\n            \t\t\n            <li>\n            \t<a href=\"#\">Marketplace</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=softwareshop\">Software Shop</a></li>\n            \t\t<li><a href=\"?a=hardwareshop\">Hardware Shop</a></li>\n            \t\t<li><a href=\"?a=isp\">Internet Provider</a></li>\n            \t\t<li><a href=\"?a=h4h\">Hacker for Hire</a></li>\n            \t\t<li><a href=\"?a=cryptomarket\">Crypto-Market</a></li>\n            \t</ul>\n            </li>\n            <li>\n            \t<a href=\"#\">Law Enforcement</a>\n            \t<ul class=\"sub-menu\">\n            \t\t<li><a href=\"?a=jail\">Jail</a></li>\n            \t\t<li><a href=\"?a=prison\">Prison</a></li>\n            \t\t<li><a href=\"?a=fbimostwanted\">FBI Most Wanted</a></li>\n            \t</ul>\n            </li>            \n            \n<?php\n\n\n\t$username = $_SESSION['login_user'];\n\t$sql = \"SELECT role FROM accounts WHERE username='$username'\";\n\t$result = $conn->query($sql);\n\t$row = mysqli_fetch_assoc($result);\n\nif ($row[\"role\"] != 'user') {\n\t\techo '<li>';\n\t\t\techo '<a href=\"#\">Admin</a>';\n\t\t\techo '<ul class=\"sub-menu\">';\n\t\t\techo '<li><a href=\"?m=logs\">System Logs</a></li>';\n\t\t\techo '<li><a href=\"?m=banklogs\">Bank Logs</a></li>';\n\t\t\techo '<li><a href=\"?m=tickets\">Tickets</a></li>';\n\t\t\techo '<li><a href=\"?m=usermanagement\">Users</a></li>';\n\t\techo '</ul>';\t\t\n}\nelse { \necho '';\n}\n?>\n        </ul>\n    </nav>\n</div>\n\n<?php\n\n$sql = \"SELECT id, username, role, lastseen FROM accounts WHERE lastseen BETWEEN timestamp(DATE_SUB(NOW(), INTERVAL 5 MINUTE)) AND timestamp(NOW()) AND role!='user'\";\n$result = $conn->query($sql);\n\n\nif ($result->num_rows > 0) {\n\techo \"<div id='online-staff' class='slide-in-box'>\";\n     while($row = $result->fetch_assoc()) {\n\t\t echo \"\";\n    \t echo \"<a href=?a=profile&id=\" . $row[\"id\"]. \">\" . $row[\"username\"]. \"</a>\";\n\t\t echo \"&nbsp;&nbsp;\";\n     }\n}\necho \"</div>\";\n\n?>\n<br>\n\n\n\n"], "filenames": ["conf/global.php", "cron/watchdog.php", "game/guest/lgin.htm", "game/guest/rebuild.htm", "game/guest/reg.htm", "game/main/user/bank.htm", "game/main/user/banksend.htm", "game/main/user/clanbank.htm", "game/main/user/clanbankin.htm", "game/main/user/clanbanksend.htm", "game/main/user/clanroster.htm", "game/main/user/updateacc.htm", "index.php", "layout/guest/footer.htm", "layout/guest/header.htm", "layout/main/footer.htm", "layout/main/header.htm"], "buggy_code_start_loc": [10, 25, 5, 4, 10, 65, 8, 24, 23, 4, 23, 3, 39, 25, 1, 20, 104], "buggy_code_end_loc": [11, 110, 12, 18, 113, 65, 105, 67, 26, 97, 31, 10, 69, 26, 19, 22, 105], "fixing_code_start_loc": [10, 24, 6, 4, 11, 66, 9, 24, 24, 5, 23, 2, 40, 24, 0, 20, 104], "fixing_code_end_loc": [11, 89, 19, 10, 130, 67, 204, 78, 27, 117, 32, 12, 76, 24, 0, 21, 105], "type": "CWE-79", "message": "Eleix Openhacker version 0.1.47 is vulnerable to a XSS vulnerability in the bank transactions component resulting in arbitrary code execution in the browser.", "other": {"cve": {"id": "CVE-2017-1000443", "sourceIdentifier": "cve@mitre.org", "published": "2018-01-02T14:29:00.240", "lastModified": "2018-01-17T17:37:10.393", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Eleix Openhacker version 0.1.47 is vulnerable to a XSS vulnerability in the bank transactions component resulting in arbitrary code execution in the browser."}, {"lang": "es", "value": "Eleix Openhacker, en su versi\u00f3n 0.1.47, es vulnerable a XSS en el componente bank transactions. Esto resulta en la ejecuci\u00f3n de c\u00f3digo arbitrario en el navegador."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:openhacker_project:openhacker:0.1.47:*:*:*:*:*:*:*", "matchCriteriaId": "5C98FB3A-5280-4653-912B-29E0506EE53F"}]}]}], "references": [{"url": "https://github.com/Eleix/openhacker/commit/9da5c237ba5e2311f01edc83389bc5aaf0a9885c", "source": "cve@mitre.org", "tags": ["Issue Tracking", "Patch"]}, {"url": "https://github.com/Eleix/openhacker/issues/5", "source": "cve@mitre.org", "tags": ["Issue Tracking", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/Eleix/openhacker/commit/9da5c237ba5e2311f01edc83389bc5aaf0a9885c"}}