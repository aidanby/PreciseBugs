{"buggy_code": ["<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Services\\Account\\AccountAcl;\n\n/** @var AccountExtData $accountData */\n$accountData = $_getvar('accountData');\n\n/** @var AccountAcl $accountAcl */\n$accountAcl = $_getvar('accountAcl');\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <form method=\"post\" name=\"editpass\" id=\"frmEditPass\" class=\"form-action\"\n          data-onsubmit=\"account/save\"\n          data-action-route=\"<?php echo $_getvar('formRoute', ''); ?>\"\n          data-item-id=\"<?php echo $_getvar('accountId', ''); ?>\"\n          data-hash=\"\">\n        <table class=\"data\">\n            <tr>\n                <td class=\"descField\"><?php echo __('Name'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"name\" name=\"name\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getName(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"name\"><?php echo __('Account name'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Client'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"client\" name=\"client\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getClientName(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"client\"><?php echo __('Client'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"url\" name=\"url\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo $accountData->getUrl(); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"url\"><?php echo __('URL / IP'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('User'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"login\" name=\"login\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getLogin(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"login\"><?php echo __('User'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Password'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"password\" name=\"password\" type=\"password\"\n                               required\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                               maxlength=\"255\" autocomplete=\"off\">\n                        <label class=\"mdl-textfield__label\"\n                               for=\"password\"><?php echo __('Password'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Password (repeat)'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"password_repeat\" name=\"password_repeat\"\n                               type=\"password\" required\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               maxlength=\"255\" autocomplete=\"off\">\n                        <label class=\"mdl-textfield__label\"\n                               for=\"password_repeat\"><?php echo __('Password'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <?php if ($configData->isAccountExpireEnabled()): ?>\n                <tr>\n                    <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                    <td class=\"valField\">\n                        <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                            <input id=\"password_date_expire\"\n                                   name=\"password_date_expire\" type=\"date\"\n                                   class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                   value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                   data-dst-unix=\"password_date_expire_unix\">\n                            <input type='hidden'\n                                   name='password_date_expire_unix' value=\"\"/>\n                            <label class=\"mdl-textfield__label\"\n                                   for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                        </div>\n                        <i class=\"material-icons btn-action\"\n                           title=\"<?php echo __('Select date'); ?>\">date_range</i>\n                    </td>\n                </tr>\n            <?php endif; ?>\n        </table>\n\n        <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n        <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n        <div class=\"item-actions\">\n            <ul>\n                <li>\n                    <button id=\"btnBack\" type=\"button\"\n                            class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                            title=\"<?php echo __('Back'); ?>\">\n                        <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                    </button>\n                </li>\n                <li>\n                    <button id=\"btnSave\" name=\"btnSave\" type=\"submit\"\n                            form=\"frmEditPass\"\n                            class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                            title=\"<?php echo __('Save'); ?>\">\n                        <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n                    </button>\n                </li>\n            </ul>\n        </div>\n    </form>\n</div>\n\n<script>\n    $('input:password:visible:first').focus();\n</script>\n", "<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Services\\Account\\AccountAcl;\n\n/** @var AccountExtData $accountData */\n$accountData = $_getvar('accountData');\n\n/** @var AccountAcl $accountAcl */\n$accountAcl = $_getvar('accountAcl');\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"\n           title=\"<?php echo __('History'); ?>\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <div class=\"mdl-tabs mdl-js-tabs mdl-js-ripple-effect\">\n        <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#account-panel\"\n               class=\"mdl-tabs__tab is-active\"><?php echo __('Account'); ?></a>\n\n            <?php if ($accountAcl->isShowDetails()): ?>\n                <a href=\"#detail-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Details'); ?></a>\n            <?php endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel is-active\" id=\"account-panel\">\n            <form method=\"post\" name=\"frmaccount\" id=\"frmAccount\"\n                  class=\"form-action\"\n                  data-onsubmit=\"account/save\"\n                  data-action-route=\"<?php echo $_getvar('formRoute', ''); ?>\"\n                  data-item-id=\"<?php echo $_getvar('accountId', ''); ?>\"\n                  data-hash=\"\">\n                <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n                <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n                <table class=\"data\">\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Name'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"name\" name=\"name\" type=\"text\"\n                                       required\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\"\n                                       value=\"<?php echo htmlspecialchars($accountData->getName(), ENT_QUOTES); ?>\"\n                                       tabindex=\"1\" readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Account name'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Client'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Client'); ?></div>\n\n                            <select id=\"client_id\" name=\"client_id\"\n                                    class=\"select-box sel-chosen-client\"\n                                    tabindex=\"2\" required disabled>\n                                <?php /** @var SelectItem $client */\n                                foreach ($_getvar('clients') as $client): ?>\n                                    <option\n                                            value=\"<?php echo $client->getId(); ?>\"\n                                        <?php echo $client->isSelected() ? 'selected' : ''; ?>>\n                                        <?php echo htmlspecialchars($client->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Category'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Category'); ?></div>\n\n                            <select id=\"category_id\" name=\"category_id\"\n                                    class=\"select-box\"\n                                    tabindex=\"3\" required disabled>\n                                <option value=\"\"><?php echo __('Select Category'); ?></option>\n                                <?php /** @var SelectItem $category */\n                                foreach ($_getvar('categories') as $category): ?>\n                                    <option\n                                            value=\"<?php echo $category->getId(); ?>\"\n                                        <?php echo $category->isSelected() ? 'selected' : ''; ?>>\n                                        <?php echo htmlspecialchars($category->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"url\" name=\"url\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"255\" tabindex=\"4\"\n                                       value=\"<?php echo $accountData->getUrl(); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access URL or IP'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('User'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"login\" name=\"login\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\" tabindex=\"5\"\n                                       value=\"<?php echo htmlspecialchars($accountData->getLogin(), ENT_QUOTES); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access user'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"password_date_expire\"\n                                       name=\"password_date_expire\" type=\"date\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                       tabindex=\"8\"\n                                       value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Notes'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <textarea\n                                class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                rows=\"3\" id=\"notes\"\n                                name=\"notes\" tabindex=\"9\"\n                                maxlength=\"5000\"\n                                readonly><?php echo htmlspecialchars($accountData->getNotes(), ENT_QUOTES); ?>\n                        </textarea>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"notes\"><?php echo __('Notes about the account'); ?></label>\n                            </div>\n                    </tr>\n                    <?php if ($accountAcl->isShowHistory()\n                        && count($_getvar('historyData', [])) > 0): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('History'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('History'); ?></div>\n\n                                <select id=\"history_id\" name=\"history_id\"\n                                        class=\"select-box\" tabindex=\"12\"\n                                        data-action-route=\"account/viewHistory\"\n                                        data-onchange=\"account/viewHistory\">\n                                    <option value=\"\"><?php echo __('Select date'); ?></option>\n                                    <?php /** @var SelectItem $history */\n                                    foreach ($_getvar('historyData') as $history): ?>\n                                        <option\n                                                value=\"<?php echo $history->getId(); ?>\"\n                                            <?php echo $history->isSelected() ? 'selected' : ''; ?>>\n                                            <?php echo htmlspecialchars($history->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Last Modification'); ?></td>\n                        <td class=\"valField\">\n                            <?php printf(\n                                    '%s (%s)',\n                                    $accountData->getDateEdit(),\n                                    htmlspecialchars($accountData->getUserEditName(), ENT_QUOTES)\n                                ?: htmlspecialchars($accountData->getUserEditLogin(), ENT_QUOTES)); ?>\n                        </td>\n                    </tr>\n                </table>\n\n            </form>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"detail-panel\">\n            <?php if ($accountAcl->isShowDetails()): include $this->includeTemplate('details'); endif; ?>\n        </div>\n\n    </div>\n\n    <?php include $this->includeTemplate('actions'); ?>\n</div>\n", "<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Services\\Account\\AccountAcl;\n\n$accountData = $_getvar('accountData');\n$accountAcl = $_getvar('accountAcl');\n$gotData = $_getvar('gotData', false);\n$showLinked = $gotData && count($_getvar('linkedAccounts', [])) > 0;\n$showFiles = $gotData && $configData->isFilesEnabled() && $accountAcl->isShowFiles();\n$showDetails = $gotData && $accountAcl->isShowDetails();\n$showPermissions = $accountAcl->isShowPermission()\n    || $_getvar('allowPrivate', false)\n    || $_getvar('allowPrivateGroup', false);\n$showCustomFields = count($_getvar('customFields', 0)) > 0;\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <div class=\"mdl-tabs mdl-js-tabs mdl-js-ripple-effect\">\n        <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#account-panel\"\n               class=\"mdl-tabs__tab is-active\"><?php echo __('Account'); ?></a>\n\n            <?php if ($showCustomFields): ?>\n                <a href=\"#customfield-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Custom Fields'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showPermissions): ?>\n                <a href=\"#permission-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Permissions'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showFiles): ?>\n                <a href=\"#file-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Files'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showDetails): ?>\n                <a href=\"#detail-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Details'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showLinked): ?>\n                <a href=\"#linked-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Links'); ?></a>\n            <?php endif; ?>\n        </div>\n\n        <form method=\"post\" name=\"frmaccount\" id=\"frmAccount\"\n              class=\"form-action\"\n              data-onsubmit=\"account/save\"\n              data-action-route=\"<?php echo $_getvar('formRoute') ?: ''; ?>\"\n              data-item-id=\"<?php echo $_getvar('accountId') ?: ''; ?>\"\n              data-hash=\"\">\n\n            <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n            <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n            <div class=\"mdl-tabs__panel is-active\" id=\"account-panel\">\n                <table class=\"data\">\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Name'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"name\" name=\"name\" type=\"text\"\n                                       required\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"100\"\n                                       value=\"<?php echo $gotData\n                                           ? htmlspecialchars($accountData->getName(), ENT_QUOTES)\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Account name'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Client'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Client'); ?></div>\n\n                            <select id=\"client_id\" name=\"client_id\"\n                                    class=\"select-box\"\n                                    required <?php echo $_getvar('disabled'); ?>>\n                                <option value=\"\"><?php echo __('Select Client'); ?></option>\n                                <?php /** @var SelectItem $client */\n                                foreach ($_getvar('clients') as $client): ?>\n                                    <option\n                                            value=\"<?php echo $client->getId(); ?>\"\n                                        <?php echo ($gotData && $client->getId() === $accountData->getClientId())\n                                            ? 'selected'\n                                            : ''; ?>\n                                    >\n                                        <?php echo htmlspecialchars($client->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                            <?php if ($_getvar('addClientEnabled')): ?>\n                                <i class=\"material-icons btn-action btn-add-select\"\n                                   title=\"<?php echo __('New Client'); ?>\"\n                                   data-action-route=\"<?php echo $_getvar('addClientRoute'); ?>\"\n                                   data-item-route=\"items/clients\"\n                                   data-item-dst=\"client_id\"\n                                   data-item-id=\"0\"\n                                   data-onclick=\"appMgmt/show\"><?php echo $icons->getIconAdd()->getIcon(); ?></i>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Category'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Category'); ?></div>\n\n                            <select id=\"category_id\" name=\"category_id\"\n                                    class=\"select-box\"\n                                    required <?php echo $_getvar('disabled'); ?>>\n                                <option value=\"\"><?php echo __('Select Category'); ?></option>\n                                <?php /** @var SelectItem $category */\n                                foreach ($_getvar('categories') as $category): ?>\n                                    <option\n                                            value=\"<?php echo $category->getId(); ?>\"\n                                        <?php echo ($gotData && $category->getId() === $accountData->getCategoryId())\n                                            ? 'selected'\n                                            : ''; ?>\n                                    >\n                                        <?php echo htmlspecialchars($category->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                            <?php if ($_getvar('addCategoryEnabled')): ?>\n                                <i class=\"material-icons btn-action btn-add-select\"\n                                   title=\"<?php echo __('New Category'); ?>\"\n                                   data-action-route=\"<?php echo $_getvar('addCategoryRoute'); ?>\"\n                                   data-item-route=\"items/categories\"\n                                   data-item-dst=\"category_id\"\n                                   data-item-id=\"0\"\n                                   data-onclick=\"appMgmt/show\"><?php echo $icons->getIconAdd()->getIcon(); ?></i>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"url\" name=\"url\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"255\"\n                                       value=\"<?php echo $gotData\n                                           ? $accountData->getUrl()\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access URL or IP'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('User'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"login\" name=\"login\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\"\n                                       value=\"<?php echo $gotData\n                                           ? htmlspecialchars($accountData->getLogin(), ENT_QUOTES)\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access user'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <?php if ($accountAcl->isShowPass()): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Password'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                    <input id=\"password\" name=\"password\"\n                                           type=\"password\" required\n                                           class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                                           maxlength=\"255\"\n                                           autocomplete=\"off\">\n                                    <label class=\"mdl-textfield__label\"\n                                           for=\"password\"><?php echo __('Password'); ?></label>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Password (repeat)'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                    <input id=\"password_repeat\"\n                                           name=\"password_repeat\"\n                                           type=\"password\" required\n                                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                           maxlength=\"255\" autocomplete=\"off\">\n                                    <label class=\"mdl-textfield__label\"\n                                           for=\"password_repeat\"><?php echo __('Password (repeat)'); ?></label>\n                                </div>\n                            </td>\n                        </tr>\n                        <?php if ($configData->isAccountExpireEnabled()): ?>\n                            <tr>\n                                <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                                <td class=\"valField\">\n                                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                        <input id=\"password_date_expire\"\n                                               name=\"password_date_expire\"\n                                               type=\"date\"\n                                               class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                               value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                               data-dst-unix=\"password_date_expire_unix\"\n                                            <?php echo $_getvar('readonly'); ?>\n                                        >\n                                        <input type='hidden'\n                                               name='password_date_expire_unix'\n                                               value=\"\"/>\n                                        <label class=\"mdl-textfield__label\"\n                                               for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                                    </div>\n\n                                    <i class=\"material-icons btn-action\"\n                                       title=\"<?php echo __('Select date'); ?>\">date_range</i>\n                                </td>\n                            </tr>\n                        <?php endif; ?>\n                    <?php endif; ?>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Notes'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <textarea\n                                class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                rows=\"3\" id=\"notes\"\n                                name=\"notes\"\n                                maxlength=\"5000\" <?php echo $_getvar('readonly'); ?>>\n                            <?php echo $gotData\n                                ? htmlspecialchars($accountData->getNotes(), ENT_QUOTES)\n                                : ''; ?>\n                        </textarea>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"notes\"><?php echo __('Notes about the account'); ?></label>\n                            </div>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Tags'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Tags'); ?></div>\n\n                            <?php if (!$_getvar('isView')): ?>\n                                <select id=\"tags\" name=\"tags[]\"\n                                        multiple=\"multiple\"\n                                        class=\"select-box-tags\">\n                                    <option value=\"\"><?php echo __('Select Tags'); ?></option>\n                                    <?php /** @var SelectItem $tag */\n                                    foreach ($_getvar('tags') as $tag): ?>\n                                        <option value=\"<?php echo $tag->getId(); ?>\"\n                                            <?php echo $tag->isSelected() ? 'selected' : ''; ?>>\n                                            <?php echo htmlspecialchars($tag->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                                <?php if ($_getvar('addTagEnabled')): ?>\n                                    <i class=\"material-icons btn-action btn-add-select\"\n                                       title=\"<?php echo __('New Tag'); ?>\"\n                                       data-action-route=\"<?php echo $_getvar('addTagRoute'); ?>\"\n                                       data-item-route=\"items/tags\"\n                                       data-item-dst=\"tags\"\n                                       data-item-id=\"0\"\n                                       data-onclick=\"appMgmt/show\">\n                                        <?php echo $icons->getIconAdd()->getIcon(); ?>\n                                    </i>\n                                <?php endif; ?>\n                                <?php if ($_getvar('copyAction')): ?>\n                                    <input type=\"hidden\" name=\"tags_update\"\n                                           value=\"1\">\n                                <?php endif; ?>\n                            <?php else: ?>\n                                <div class=\"tag-list-box\">\n                                    <div class=\"tag-list-body\">\n                                        <div class=\"tags-list-items\">\n                                            <?php /** @var SelectItem $tag */\n                                            foreach ($_getvar('tags') as $tag): ?>\n                                                <?php if ($tag->isSelected()): ?>\n                                                    <span class=\"tag\"><?php echo htmlspecialchars($tag->getName(), ENT_QUOTES); ?></span>\n                                                <?php endif; ?>\n                                            <?php endforeach; ?>\n                                        </div>\n                                    </div>\n                                </div>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n\n                    <?php if (!$showLinked): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Linked Account'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Linked Account'); ?></div>\n\n                                <select id=\"parent_account_id\"\n                                        name=\"parent_account_id\"\n                                        class=\"select-box select-box-deselect\" <?php echo $_getvar('disabled'); ?>\n                                        data-sk=\"<?php echo $_getvar('sk'); ?>\"\n                                        data-action-route=\"items/accountsUser\"\n                                        data-item-id=\"<?php echo $gotData ? $_getvar('accountId') : ''; ?>\"\n                                        data-selected-id=\"<?php echo $gotData ? $accountData->getParentId() : ''; ?>\">\n                                    <option value=\"\"><?php echo __('Select Account'); ?></option>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($accountAcl->isShowHistory()\n                        && count($_getvar('historyData', [])) > 0): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('History'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('History'); ?></div>\n\n                                <select id=\"history_id\" name=\"history_id\"\n                                        class=\"select-box\"\n                                        data-action-route=\"account/viewHistory\"\n                                        data-onchange=\"account/viewHistory\">\n                                    <option value=\"\"><?php echo __('Select date'); ?></option>\n                                    <?php /** @var SelectItem $history */\n                                    foreach ($_getvar('historyData') as $history): ?>\n                                        <option\n                                                value=\"<?php echo $history->getId(); ?>\">\n                                            <?php echo htmlspecialchars($history->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('editAction')\n                        && $_getvar('isModified', false)\n                        && $accountData->getUserEditName()): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Last Modification'); ?></td>\n                            <td class=\"valField\"><?php printf('%s (%s)',\n                                    $accountData->getDateEdit(),\n                                    htmlspecialchars($accountData->getUserEditName(), ENT_QUOTES)); ?>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('publicLinkShow', false) === true\n                        && $_getvar('publicLinkUrl') !== null): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Public Link'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Public Link'); ?></div>\n\n                                <a href=\"<?php echo $_getvar('publicLinkUrl'); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php echo __('Public Link'); ?>\">\n                                    <i class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                                </a>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('accountId')): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Direct Link'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Direct Link'); ?></div>\n\n                                <a href=\"<?php echo $_getvar('deepLink'); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php echo __('Direct Link'); ?>\">\n                                    <i class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                                </a>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n                </table>\n            </div>\n\n            <div class=\"mdl-tabs__panel\" id=\"customfield-panel\">\n                <?php if ($showCustomFields): ?>\n                    <div id=\"data-customfields\">\n                        <table class=\"data\">\n                            <?php include $this->includeTemplate('aux-customfields', 'common'); ?>\n                        </table>\n                    </div>\n                <?php endif; ?>\n            </div>\n\n            <div class=\"mdl-tabs__panel\" id=\"permission-panel\">\n                <?php if ($showPermissions):\n                    include $this->includeTemplate('account-permissions');\n                endif; ?>\n            </div>\n        </form>\n\n        <div class=\"mdl-tabs__panel\" id=\"file-panel\">\n            <?php if ($showFiles) :\n                include $this->includeTemplate('files');\n            endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"detail-panel\">\n            <?php if ($showDetails):\n                include $this->includeTemplate('details');\n            endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"linked-panel\">\n            <?php if ($showLinked):\n                include $this->includeTemplate('linkedAccounts');\n            endif; ?>\n        </div>\n    </div>\n\n    <?php include $this->includeTemplate('actions'); ?>\n</div>", "<?php\n/**\n * @var ThemeIcons         $icons\n * @var callable           $_getvar\n * @var ConfigData         $configData\n * @var AccountSearchItem  $account\n * @var DataGridTab        $data\n * @var DataGridActionBase $actionMenu\n * @var DataGridActionBase $action\n * @var AccountSearchItem  $accountSearchItem\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\Acl\\ActionsInterface;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Html\\DataGrid\\Action\\DataGridActionBase;\nuse SP\\Html\\DataGrid\\DataGridTab;\nuse SP\\Services\\Account\\AccountSearchItem;\nuse SP\\Util\\DateUtil;\n\nif (!isset($data)) {\n    $data = $_getvar('data');\n}\n\n$wikiFilter = $_getvar('wikiFilter');\n$favoriteRouteOn = $_getvar('favoriteRouteOn');\n$favoriteRouteOff = $_getvar('favoriteRouteOff');\n?>\n\n<div id=\"data-search\">\n    <?php foreach ($data->getData()->getData() as $index => $accountSearchItem):\n        if ($index === 'count'): continue; endif;\n        $accountSearchData = $accountSearchItem->getAccountSearchVData();\n        ?>\n\n        <div class=\"account-label round shadow\">\n            <div class=\"label-left\">\n                <div class=\"label-row-up\">\n                    <div class=\"field-customer label-field\">\n                        <div class=\"field-name-hidden\"><?php echo __('Client'); ?></div>\n                        <?php if (null !== $accountSearchItem->getClientLink()): ?>\n                            <a href=\"<?php echo $accountSearchItem->getClientLink(); ?>\"\n                               target=\"blank\"\n                               title=\"<?php echo __('Search in Wiki'); ?>\">\n                                <span class=\"mdl-chip mdl-chip--contact\">\n                                    <span style=\"background-color: <?php echo $accountSearchItem->getColor(); ?>;\"\n                                          class=\"mdl-chip__contact mdl-color-text--white\">\n                                        <?php echo htmlspecialchars(mb_ucfirst($accountSearchData->getClientName()), ENT_QUOTES); ?>\n                                    </span>\n                                    <span class=\"mdl-chip__text\"\n                                          title=\"<?php echo htmlspecialchars($accountSearchData->getClientName(), ENT_QUOTES); ?>\">\n                                        <?php echo htmlspecialchars($accountSearchItem->getShortClientName(), ENT_QUOTES); ?>\n                                    </span>\n                                </span>\n                            </a>\n                        <?php else: ?>\n                            <span class=\"mdl-chip mdl-chip--contact\">\n                                <span style=\"background-color: <?php echo $accountSearchItem->getColor(); ?>;\"\n                                      class=\"mdl-chip__contact mdl-color-text--white\">\n                                    <?php echo htmlspecialchars(mb_ucfirst($accountSearchData->getClientName()), ENT_QUOTES); ?>\n                                </span>\n                                <span class=\"mdl-chip__text\"\n                                      title=\"<?php echo htmlspecialchars($accountSearchData->getClientName(), ENT_QUOTES); ?>\">\n                                    <?php echo htmlspecialchars($accountSearchItem->getShortClientName(), ENT_QUOTES); ?>\n                                </span>\n                            </span>\n                        <?php endif; ?>\n                    </div>\n\n                    <div class=\"field-account field-text label-field\">\n                        <div class=\"field-name\"><?php echo __('Name'); ?></div>\n                        <?php if ($accountSearchItem->isShow()\n                            && $accountSearchItem::$accountLink\n                            && $accountSearchItem->getLink()): ?>\n                            <a title=\"<?php echo __('Account Details'); ?>\"\n                               class=\"btn-action\"\n                               data-action-route=\"<?php echo $_getvar('viewAccountRoute'); ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-onclick=\"account/view\"><?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?></a>\n                        <?php else: ?>\n                            <div class=\"field-text\">\n                                <?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n\n                    <div class=\"field-category field-text label-field\">\n                        <div class=\"field-name\"><?php echo __('Category'); ?></div>\n                        <div class=\"field-text\">\n                            <?php echo htmlspecialchars($accountSearchData->getCategoryName(), ENT_QUOTES); ?>\n                        </div>\n                    </div>\n\n                    <?php if ($accountSearchItem->isShow()): ?>\n                        <div class=\"field-user field-text label-field\">\n                            <div class=\"field-name\"><?php echo __('User'); ?></div>\n                            <div class=\"field-text\">\n                                <?php echo htmlspecialchars($accountSearchItem->getShortLogin(), ENT_QUOTES); ?>\n                            </div>\n                        </div>\n\n                        <div class=\"field-url field-text label-field\">\n                            <div class=\"field-name\"><?php echo __('URL / IP'); ?></div>\n                            <?php if ($accountSearchItem->isUrlIslink()): ?>\n                                <a href=\"<?php echo $accountSearchData->getUrl(); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php printf(__('Open link to: %s'), $accountSearchData->getUrl()); ?>\">\n                                    <?php echo $accountSearchItem->getShortUrl(); ?>\n                                </a>\n                            <?php else: ?>\n                                <div class=\"field-text\"><?php echo $accountSearchItem->getShortUrl(); ?></div>\n                            <?php endif; ?>\n                        </div>\n                    <?php else: ?>\n                        <div class=\"field-user field-text label-field\"></div>\n                        <div class=\"field-url field-text label-field\"></div>\n                    <?php endif; ?>\n                </div>\n                <div class=\"label-row-down\">\n                    <div class=\"tags-box\">\n                        <?php foreach ($accountSearchItem->getTags() as $tag): ?>\n                            <span class=\"tag\"\n                                  data-tag-id=\"<?php echo $tag->id; ?>\">\n                                <?php echo htmlspecialchars($tag->name, ENT_QUOTES); ?>\n                            </span>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n            <div class=\"label-right\">\n                <div class=\"account-info\">\n                    <?php if ($accountSearchItem->isShow()): ?>\n                        <?php if ($accountSearchItem->isPasswordExpired()): ?>\n                            <i id=\"icon-expired-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons <?php echo $icons->getIconWarning()->getClass(); ?>\">\n                                <?php echo $icons->getIconWarning()->getIcon(); ?></i>\n                            <span\n                                    for=\"icon-expired-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Password Expired'); ?>\n                            </span>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchData->getIsPrivate() === 1): ?>\n                            <i id=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">lock</i>\n                            <span\n                                    for=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Private Account'); ?>\n                            </span>\n                        <?php elseif ($accountSearchData->getIsPrivateGroup() === 1): ?>\n                            <i id=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">lock_open</i>\n                            <span\n                                    for=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Private Account (Group)'); ?>\n                            </span>\n                        <?php else: ?>\n                            <i id=\"accesses-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">face</i>\n\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"accesses-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Permissions'); ?></p>\n                                    <p>\n                                        <?php echo implode('<br>', $accountSearchItem->getAccesses()); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchItem->isFavorite()): ?>\n                            <i id=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons icon-favorite mdl-color-text--amber-A100\"\n                               data-action-route-on=\"<?php echo $favoriteRouteOn; ?>\"\n                               data-action-route-off=\"<?php echo $favoriteRouteOff; ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-status=\"<?php echo 'on'; ?>\">star</i>\n                            <span\n                                    for=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Delete Favorite'); ?>\n                            </span>\n                        <?php else: ?>\n                            <i id=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons icon-favorite\"\n                               data-action-route-on=\"<?php echo $favoriteRouteOn; ?>\"\n                               data-action-route-off=\"<?php echo $favoriteRouteOff; ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-status=\"<?php echo 'off'; ?>\">star_border</i>\n                            <span\n                                    for=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Mark as Favorite'); ?>\n                            </span>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchData->getNotes() !== ''): ?>\n                            <i id=\"notes-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">speaker_notes</i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"notes-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Notes'); ?></p>\n                                    <p>\n                                        <?php echo $accountSearchItem->getShortNotes(); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchItem->getNumFiles() > 0): ?>\n                            <i id=\"attachments-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">attach_file</i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"attachments-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <?php printf(\n                                            '%s: %d',\n                                        __('Attachments'),\n                                        $accountSearchItem->getNumFiles()\n                                    ); ?>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if (null !== $accountSearchItem->getPublicLink()): ?>\n                            <i id=\"publiclink-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"publiclink-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Public Link'); ?></p>\n                                    <p>\n                                        <?php printf(\n                                                '%s: %s',\n                                            __('Expiry Date'),\n                                            DateUtil::getDateFromUnix($accountSearchData->getPublicLinkDateExpire())\n                                        ); ?>\n                                        <br>\n                                        <?php printf(\n                                                '%s: %s',\n                                                __('Visits'),\n                                                $accountSearchData->getPublicLinkTotalCountViews()\n                                        ); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($wikiFilter\n                            && $accountSearchItem->isWikiMatch($wikiFilter)): ?>\n                            <?php if (AccountSearchItem::$dokuWikiEnabled): ?>\n                                <a href=\"<?php echo $_getvar('wikiPageUrl'), urldecode($accountSearchData->getName()); ?>\"\n                                   target=\"_blank\">\n                                    <i class=\"material-icons\"\n                                       title=\"<?php echo __('Link to Wiki'); ?>\">library_books</i>\n                                </a>\n                                <i class=\"btn-action material-icons fg-green100\"\n                                   title=\"<?php echo __('View at Wiki'); ?>\"\n                                   data-action-route=\"<?php echo ActionsInterface::WIKI_VIEW; ?>\"\n                                   data-pagename=\"<?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?>\"\n                                   data-onclick=\"wiki/show\">library_books</i>\n                            <?php else: ?>\n                                <a href=\"<?php echo $_getvar('wikiPageUrl'), urlencode($accountSearchData->getName()); ?>\"\n                                   target=\"_blank\">\n                                    <i class=\"material-icons\"\n                                       title=\"<?php echo __('Link to Wiki'); ?>\">library_books</i>\n                                </a>\n                            <?php endif; ?>\n                        <?php endif; ?>\n                    <?php endif; ?>\n                </div>\n\n\n                <?php if ($accountSearchItem->isShow()\n                    || $accountSearchItem->isShowRequest()): ?>\n                    <div class=\"account-actions\">\n                        <?php foreach ($data->getDataActionsFiltered($accountSearchItem) as $action):\n                            $actionUid = uniqid('btn-action-', true);\n                            ?>\n                            <i id=\"<?php echo $actionUid; ?>\"\n                               class=\"btn-action material-icons <?php echo $action->getClassesAsString(), ' ', $action->getIcon()->getClass(); ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-parent-id=\"<?php echo $accountSearchData->getParentId(); ?>\"\n                                <?php foreach ($action->getData() as $dataName => $dataValue):\n                                    printf('data-%s=\"%s\"', $dataName, $dataValue);\n                                endforeach; ?>>\n                                <?php echo $action->getIcon()->getIcon(); ?></i>\n                            <span\n                                    for=\"<?php echo $actionUid; ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--bottom\"><?php echo $action->getTitle(); ?></span>\n                        <?php endforeach; ?>\n\n                        <?php if ($data->getDataActionsMenuCount()):\n                            $actionsMenu = $data->getDataActionsMenuFiltered($accountSearchItem);\n                            if (count($actionsMenu) > 0):\n                                $actionMenuUid = uniqid('actions-menu-lower-right-', true);\n                                ?>\n                                <button id=\"<?php echo $actionMenuUid; ?>\"\n                                        class=\"mdl-button mdl-js-button mdl-button--icon\">\n                                    <i class=\"material-icons\">more_vert</i>\n                                </button>\n                                <ul class=\"mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect\"\n                                    for=\"<?php echo $actionMenuUid; ?>\">\n\n                                    <?php foreach ($actionsMenu as $actionMenu): ?>\n                                        <li class=\"btn-action mdl-menu__item <?php echo $actionMenu->getClassesAsString(); ?>\"\n                                            data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                                            data-parent-id=\"<?php echo $accountSearchData->getParentId(); ?>\"\n                                            <?php foreach ($actionMenu->getData() as $dataName => $dataValue):\n                                                printf('data-%s=\"%s\"', $dataName, $dataValue);\n                                            endforeach; ?>>\n                                            <i class=\"material-icons <?php echo $actionMenu->getIcon()->getClass(); ?>\"\n                                               title=\"<?php echo $actionMenu->getTitle(); ?>\">\n                                                <?php echo $actionMenu->getIcon()->getIcon(); ?>\n                                            </i>\n                                            <?php echo $actionMenu->getName(); ?>\n                                        </li>\n                                    <?php endforeach; ?>\n                                </ul>\n                            <?php endif; ?>\n                        <?php endif; ?>\n                    </div>\n                <?php endif; ?>\n            </div>\n        </div>\n    <?php endforeach; ?>\n</div>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">verified_user</i>\n    <?php echo __('Authentication'); ?>\n</div>\n\n<table id=\"tblAuth\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-auth-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"authbasic_enabled\">\n                            <input type=\"checkbox\" id=\"authbasic_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"authbasic_enabled\" <?php echo $configData->isAuthBasicEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Auth Basic'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use Auth Basic for authorizing accesses to the application'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"authbasicautologin_enabled\">\n                            <input type=\"checkbox\"\n                                   id=\"authbasicautologin_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"authbasicautologin_enabled\" <?php echo $configData->isAuthBasicAutoLoginEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Auth Basic SSO'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use auto-login through Auth Basic'); ?></span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Domain'); ?>\n            <div id=\"help-domain\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-domain\">\n                <p>\n                    <?php echo __('The domain will be added to sysPass user name for checking against the Auth Basic one.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"authbasic_domain\" name=\"authbasic_domain\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getAuthBasicDomain(); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"authbasic_domain\"><?php echo __('Domain name'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Default Group'); ?>\n            <div id=\"help-sso_defaultgroup\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\"\n                 for=\"help-sso_defaultgroup\">\n                <p>\n                    <?php echo __('Sets the default users group for newly created SSO users'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Default Group'); ?></div>\n\n            <select id=\"sso_defaultgroup\" name=\"sso_defaultgroup\"\n                    class=\"select-box sel-chosen-usergroup\">\n                <option value=\"\"><?php echo __('Select Group'); ?></option>\n                <?php /** @var SelectItem $userGroup */\n                foreach ($_getvar('userGroups') as $userGroup): ?>\n                    <option\n                            value=\"<?php echo $userGroup->getId(); ?>\" <?php echo $userGroup->getId() === $configData->getSsoDefaultGroup() ? 'selected' : ''; ?>><?php echo htmlspecialchars($userGroup->getName(), ENT_QUOTES); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Default Profile'); ?>\n            <div id=\"help-sso_defaultprofile\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\"\n                 for=\"help-sso_defaultprofile\">\n                <p>\n                    <?php echo __('Sets the default profile for the newly created SSO users.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Default Profile'); ?></div>\n\n            <select id=\"sso_defaultprofile\" name=\"sso_defaultprofile\"\n                    class=\"select-box sel-chosen-profile\">\n                <option value=\"\"><?php echo __('Select User'); ?></option>\n                <?php /** @var SelectItem $userProfile */\n                foreach ($_getvar('userProfiles') as $userProfile): ?>\n                    <option\n                            value=\"<?php echo $userProfile->getId(); ?>\" <?php echo ($userProfile->getId() === $configData->getSsoDefaultProfile()) ? 'selected' : ''; ?>><?php echo htmlspecialchars($userProfile->getName(), ENT_QUOTES); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">view_headline</i>\n    <?php echo __('Events'); ?>\n</div>\n\n<table id=\"tblEvents\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-events-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"log_enabled\">\n                            <input type=\"checkbox\" id=\"log_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"log_enabled\" <?php echo $configData->isLogEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable event log'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Saves the actions done by the application.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"syslog_enabled\">\n                            <input type=\"checkbox\" id=\"syslog_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"syslog_enabled\" <?php echo $configData->isSyslogEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable Syslog'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"remotesyslog_enabled\">\n                            <input type=\"checkbox\" id=\"remotesyslog_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"remotesyslog_enabled\" <?php echo $configData->isSyslogRemoteEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable Remote Syslog'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"></span>\n                    </span>\n                </li>\n\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Server'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"remotesyslog_server\" name=\"remotesyslog_server\"\n                       type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo $configData->getSyslogServer(); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"remotesyslog_server\"><?php echo __('Hostname or IP address'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Port'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"remotesyslog_port\" name=\"remotesyslog_port\"\n                       type=\"number\"\n                       pattern=\"[0-9]{1-5}\" step=\"1\" max=\"65535\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo $configData->getSyslogPort(); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"remotesyslog_port\"><?php echo __('Port'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Events'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Events'); ?></div>\n\n            <select id=\"log_events\" name=\"log_events[]\" multiple=\"multiple\"\n                    class=\"select-box\" data-create=\"true\">\n                <?php /** @var SelectItem $logEvent */\n                foreach ($_getvar('logEvents') as $logEvent): ?>\n                    <option\n                            value=\"<?php echo $logEvent->getName(); ?>\"\n                        <?php echo $logEvent->isSelected() ? 'selected' : '' ?>><?php echo $logEvent->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">device_hub</i>\n    <?php echo __('Proxy'); ?>\n</div>\n\n<table id=\"tblProxy\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-proxy-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"proxy_enabled\">\n                            <input type=\"checkbox\" id=\"proxy_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"proxy_enabled\" <?php echo $configData->isProxyEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Proxy'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use a proxy server for checking out for updates and notifications.'); ?></span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Server'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_server\" name=\"proxy_server\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyServer(); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_server\"><?php echo __('Proxy server'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Port'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_port\" name=\"proxy_port\" type=\"number\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       pattern=\"[0-9]{1,5}\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyPort(); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_port\"><?php echo __('Proxy server port'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('User'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_user\" name=\"proxy_user\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyUser(); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_user\"><?php echo __('Proxy server user'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Password'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_pass\" name=\"proxy_pass\" type=\"password\"\n                       class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyPass() ? '***' : ''; ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_pass\"><?php echo __('Proxy server password'); ?></label>\n            </div>\n        </td>\n    </tr>\n\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('curlIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'curl'); ?>\n        <i id=\"help-curl\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-curl\">\n            <p>\n                <?php echo __('This extension is needed to check for sysPass updates and notices'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">home</i>\n    <?php echo __('Site'); ?>\n</div>\n\n<table id=\"tblSite\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Language'); ?>\n            <div id=\"help-sitelang\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-sitelang\">\n                <p>\n                    <?php echo __('Sets the global app language. You can set a per user language on preferences.'); ?>\n                </p>\n\n                <p>\n                    <?php echo __('To improve/add translations, you can get involved at https://poeditor.com/join/project/fmlsBuugyv'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Language'); ?></div>\n\n            <select name=\"sitelang\" id=\"sel-sitelang\" size=\"1\"\n                    class=\"select-box sel-chosen-ns\">\n                <?php /** @var SelectItem $lang */\n                foreach ($_getvar('langs') as $lang): ?>\n                    <option\n                            value='<?php echo $lang->getId(); ?>' <?php echo $lang->isSelected() ? 'selected' : ''; ?>><?php echo $lang->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Visual Theme'); ?>\n            <div id=\"help-sitetheme\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-sitetheme\">\n                <p>\n                    <?php echo __('Sets the global application visual theme. You can set a per user visual theme on preferences.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Visual Theme'); ?></div>\n\n            <select name=\"sitetheme\" id=\"sel-sitetheme\" size=\"1\"\n                    class=\"select-box sel-chosen-ns\">\n                <?php /** @var SelectItem $theme */\n                foreach ($_getvar('themes') as $theme): ?>\n                    <option\n                            value='<?php echo $theme->getId(); ?>' <?php echo $theme->isSelected() ? 'selected' : \"\"; ?>><?php echo $theme->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Session timeout (s)'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"session_timeout\" name=\"session_timeout\" type=\"number\"\n                       min=\"0\" step=\"300\"\n                       pattern=\"[0-9]{2,4}\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"5\"\n                       value=\"<?php echo $configData->getSessionTimeout(); ?>\"\n                       required/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"session_timeout\"><?php echo __('Session timeout (s)'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Application URL'); ?>\n            <div id=\"help-app_url\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-app_url\">\n                <p>\n                    <?php echo __('Sets the application URL when accessing through a reverse proxy or load balancer.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"app_url\" name=\"app_url\" type=\"url\"\n                       pattern=\"^https?://.*\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo $configData->getApplicationUrl(); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"app_url\"><?php echo __('Application URL'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-site-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"https_enabled\">\n                            <input type=\"checkbox\" id=\"https_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"https_enabled\" <?php echo $configData->isHttpsEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Force HTTPS'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('It forces the use of HTTPS on all the connections'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"debug_enabled\">\n                            <input type=\"checkbox\" id=\"debug_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"debug_enabled\" <?php echo $configData->isDebug() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable debug'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Displays some information about application configuration and performance.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"maintenance_enabled\">\n                            <input type=\"checkbox\" id=\"maintenance_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"maintenance_enabled\" <?php echo $configData->isMaintenance() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Maintenance mode'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('In this mode nobody can log into the application. To disable it, you need to either modify the configuration file or unset on the site tab.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"check_updates_enabled\">\n                            <input type=\"checkbox\" id=\"check_updates_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"check_updates_enabled\" <?php echo $configData->isCheckUpdates() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Check for updates'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Check for application updates (only for administrators).'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"check_notices_enabled\">\n                            <input type=\"checkbox\" id=\"check_notices_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"check_notices_enabled\" <?php echo $configData->isChecknotices() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Check for notifications'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Check if there are either sysPass security or warning notices (only for administrators).'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"encrypt_session_enabled\">\n                            <input type=\"checkbox\" id=\"encrypt_session_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"encrypt_session_enabled\" <?php echo $configData->isEncryptSession() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Encrypt Session'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\">\n                            <?php echo __('Encrypt PHP session data'); ?>\n                            <?php echo __('This feature increases the PHP sessions security, because the stored data won\\'t be readable.'); ?>\n                        </span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('ldapIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'ldap'); ?>\n        <i id=\"help-ldap\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-ldap\">\n            <p>\n                <?php echo __('This extension is needed to connect to the LDAP server'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">business</i>\n    <?php echo __('Configuration'); ?>\n</div>\n\n<form method=\"post\" name=\"frmLdap\" id=\"frmLdap\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configLdap/save\"\n      data-hash=\"\">\n    <table id=\"tblLdap\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-ldap-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_enabled\">\n                                <input type=\"checkbox\" id=\"ldap_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_enabled\" <?php echo $configData->isLdapEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span><?php echo __('Enable LDAP'); ?></span>\n                                <span class=\"mdl-list__item-sub-title\">\n                                    <?php echo __('Enables authentication against an LDAP server.'); ?>\n                                    <br>\n                                    <?php echo __('This method will use MySQL as fallback.'); ?>\n                                </span>\n                            </span>\n                    </li>\n\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_tls_enabled\">\n                                <input type=\"checkbox\" id=\"ldap_tls_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_tls_enabled\" <?php echo $configData->isLdapTlsEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span>TLS</span>\n                                <span class=\"mdl-list__item-sub-title\">\n                                    <?php echo __('Enables the connection over TLS'); ?>\n                                </span>\n                            </span>\n                    </li>\n\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"><?php echo __('Server Type'); ?></td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Server Type'); ?></div>\n\n                <select id=\"ldap_defaultgroup\" name=\"ldap_server_type\"\n                        class=\"select-box sel-chosen-usergroup\" required>\n                    <option value=\"\"><?php echo __('Server Type'); ?></option>\n                    <?php /** @var SelectItem $serverType */\n                    foreach ($_getvar('serverTypes') as $serverType): ?>\n                        <option\n                                value=\"<?php echo $serverType->getId(); ?>\" <?php echo $serverType->isSelected() ? 'selected' : ''; ?>><?php echo $serverType->getName(); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Server'); ?>\n                <div id=\"help-ldap_server\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_server\">\n                    <p>\n                        <?php echo __('Hostname or IP address of LDAP server.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>ldap.example.org</li>\n                        <li>ldap://ldap.example.org</li>\n                        <li>ldaps://ldap.example.org</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_server\" name=\"ldap_server\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapServer(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_server\"><?php echo __('Server'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Bind User'); ?>\n                <div id=\"help-ldap_binduser\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_binduser\">\n                    <p>\n                        <?php echo __('User to connect to LDAP service.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=syspass,ou=Users,dc=syspass,o=org</li>\n                        <li>syspass</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_binduser\" name=\"ldap_binduser\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapBindUser(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_binduser\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Bind Password'); ?>\n                <div id=\"help-ldap_bindpass\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_bindpass\">\n                    <p>\n                        <?php echo __('LDAP connection user\\'s password'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_bindpass\" name=\"ldap_bindpass\"\n                           type=\"password\"\n                           class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapBindPass() ? '***' : ''; ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_bindpass\"><?php echo __('Password'); ?></label>\n\n                </div>\n                <?php if ($configData->getLdapBindPass()): ?>\n                    <div id=\"help-ldap_password\"\n                         class=\"icon material-icons <?php echo $icons->getIconWarning()->getClass(); ?>\"><?php echo $icons->getIconWarning()->getIcon(); ?></div>\n                    <div class=\"mdl-tooltip mdl-tooltip--large\"\n                         for=\"help-ldap_password\">\n                        <p>\n                            <?php echo __('This isn\\'t the real LDAP password. You should set the real one before checking or importing LDAP objects'); ?>\n                        </p>\n                    </div>\n                <?php endif; ?>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Search base'); ?>\n                <div id=\"help-ldap_base\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_base\">\n                    <p>\n                        <?php echo __('LDAP base to perform the LDAP users search.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=Users,dc=example,dc=org</li>\n                        <li>ou=AdminUsers,dc=example,o=org</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_base\" name=\"ldap_base\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapBase(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_base\"><?php echo __('Search base'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Group'); ?>\n                <div id=\"help-ldap_group\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_group\">\n                    <p>\n                        <?php echo __('LDAP group which user must belong to for granting to log in.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('This group needs to be placed in the LDAP search base.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=GRP_SPUSERS,cn=Users,dc=example,dc=org</li>\n                        <li>GRP_SPUSERS</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_group\" name=\"ldap_group\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapGroup(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_group\"><?php echo __('Group'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Default Group'); ?>\n                <div id=\"help-ldap_defaultgroup\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_defaultgroup\">\n                    <p>\n                        <?php echo __('Sets the default users group for newly created LDAP users'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Default Group'); ?></div>\n\n                <select id=\"ldap_defaultgroup\" name=\"ldap_defaultgroup\"\n                        class=\"select-box sel-chosen-usergroup\" required>\n                    <option value=\"\"><?php echo __('Select Group'); ?></option>\n                    <?php /** @var SelectItem $userGroup */\n                    foreach ($_getvar('userGroups') as $userGroup): ?>\n                        <option\n                                value=\"<?php echo $userGroup->getId(); ?>\"\n                            <?php echo $userGroup->getId() === $configData->getLdapDefaultGroup() ? 'selected' : ''; ?>>\n                            <?php echo htmlspecialchars($userGroup->getName(), ENT_QUOTES); ?>\n                        </option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Default Profile'); ?>\n                <div id=\"help-ldap_defaultprofile\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_defaultprofile\">\n                    <p>\n                        <?php echo __('Sets the default profile for the newly created LDAP users.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Default Profile'); ?></div>\n\n                <select id=\"ldap_defaultprofile\" name=\"ldap_defaultprofile\"\n                        class=\"select-box sel-chosen-profile\" required>\n                    <option value=\"\"><?php echo __('Select User'); ?></option>\n                    <?php /** @var SelectItem $userProfile */\n                    foreach ($_getvar('userProfiles') as $userProfile): ?>\n                        <option\n                                value=\"<?php echo $userProfile->getId(); ?>\" <?php echo ($userProfile->getId() === $configData->getLdapDefaultProfile()) ? 'selected' : ''; ?>><?php echo htmlspecialchars($userProfile->getName(), ENT_QUOTES); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n    </table>\n\n\n    <div class=\"tab-actions\">\n        <ul>\n            <li>\n                <button id=\"btnBack\" type=\"button\"\n                        class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                        title=\"<?php echo __('Back'); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                        data-onclick=\"ldap/check\"\n                        data-action-route=\"configLdap/check\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button form=\"frmLdap\"\n                        class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                        title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n                </button>\n            </li>\n        </ul>\n    </div>\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">import_export</i>\n        <?php echo __('Import'); ?>\n    </div>\n\n    <table id=\"tblLdap\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Login Attribute'); ?>\n                <div id=\"help-ldap_login_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_login_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user\\'s login when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Login Attribute'); ?></div>\n\n                <select id=\"ldap_login_attribute\" name=\"ldap_login_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"samaccountname\" selected>sAMAccountName\n                    </option>\n                    <option value=\"userprincipalname\">userPrincipalName</option>\n                    <option value=\"uid\">uid</option>\n                    <option value=\"login\">login</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Name Attribute'); ?>\n                <div id=\"help-ldap_username_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_username_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user\\'s name when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Name Attribute'); ?></div>\n\n                <select id=\"ldap_username_attribute\"\n                        name=\"ldap_username_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"displayname\" selected>displayName</option>\n                    <option value=\"fullname\">fullName</option>\n                    <option value=\"cn\">cn</option>\n                    <option value=\"name\">name</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-ldap-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_import_groups\">\n                                <input type=\"checkbox\" id=\"ldap_import_groups\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_import_groups\"/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span><?php echo __('Import Groups'); ?></span>\n                                <span class=\"mdl-list__item-sub-title\"></span>\n                            </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Group Name Attribute'); ?>\n                <div id=\"help-ldap_groupname_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_groupname_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user group name when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Group Name Attribute'); ?></div>\n\n                <select id=\"ldap_groupname_attribute\"\n                        name=\"ldap_groupname_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"cn\">cn</option>\n                    <option value=\"name\">name</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Filter'); ?>\n                <div id=\"help-ldap_import_filter\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_import_filter\">\n                    <p>\n                        <?php echo __('Filter for importing LDAP users or groups.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_import_filter\" name=\"ldap_import_filter\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_import_filter\"><?php echo __('Filter'); ?></label>\n                </div>\n            </td>\n        </tr>\n    </table>\n\n    <div class=\"tab-actions\">\n        <ul>\n            <li>\n                <button id=\"btnBack\" type=\"button\"\n                        class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                        title=\"<?php echo __('Back'); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                        data-onclick=\"ldap/check\"\n                        data-action-route=\"configLdap/checkImport\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored\"\n                        data-onclick=\"ldap/import\"\n                        data-action-route=\"configLdap/import\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo __('Import users from LDAP'); ?>\">\n                    <i class=\"material-icons\">get_app</i>\n                </button>\n            </li>\n        </ul>\n    </div>\n</form>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">mail</i>\n    <?php echo __('Mail'); ?>\n</div>\n\n<form method=\"post\" name=\"frmMail\" id=\"frmMail\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configMail/save\"\n      data-hash=\"\">\n    <table id=\"tblMail\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-mail-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_enabled\">\n                                <input type=\"checkbox\" id=\"mail_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_enabled\" <?php echo $configData->isMailEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable email notifications'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"><?php echo __('Enable email notifications'); ?></span>\n                        </span>\n                    </li>\n\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_requests_enabled\">\n                                <input type=\"checkbox\"\n                                       id=\"mail_requests_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_requests_enabled\" <?php echo $configData->isMailRequestsEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable requests by email'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\">\n                                <?php echo __('Allows users to request for either modifications to existing accounts or access to accounts which they have no rights on.'); ?>\n                            </span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Server'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_server\" name=\"mail_server\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getMailServer(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_server\"><?php echo __('Server'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Port'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_port\" name=\"mail_port\" type=\"number\"\n                           pattern=\"[0-9]{1,5}\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"5\"\n                           value=\"<?php echo $configData->getMailPort(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_port\"><?php echo __('Port'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-mail-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_auth_enabled\">\n                                <input type=\"checkbox\" id=\"mail_auth_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_auth_enabled\" <?php echo $configData->isMailAuthenabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable Authentication'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"></span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('User'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_user\" name=\"mail_user\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"50\"\n                           value=\"<?php echo $configData->getMailUser(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_user\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Password'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_pass\" name=\"mail_pass\" type=\"password\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getMailPass() ? '***' : ''; ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_pass\"><?php echo __('Password'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Security'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Security'); ?></div>\n\n                <select name=\"mail_security\" id=\"sel-mailsecurity\" size=\"1\"\n                        class=\"select-box select-box-deselect\">\n                    <option value=\"\"><?php echo __('Disabled'); ?></option>\n                    <?php foreach ($_getvar('mailSecurity') as $security): ?>\n                        <option\n                                value=\"<?php echo $security; ?>\" <?php echo ($configData->getMailSecurity() === $security) ? 'selected' : ''; ?>><?php echo $security; ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Sender email address'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_from\" name=\"mail_from\" type=\"email\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getMailFrom(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_from\"><?php echo __('Sender email address'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Recipients'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Recipients'); ?></div>\n\n                <input type=\"text\" name=\"mail_recipients\" id=\"mail_recipients\"\n                       class=\"select-items-tag\"\n                       value=\"<?php echo implode(',', $configData->getMailRecipients()); ?>\"/>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Events'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Events'); ?></div>\n\n                <select id=\"mail_events\" name=\"mail_events[]\"\n                        multiple=\"multiple\" class=\"select-box\"\n                        data-create=\"true\">\n                    <?php /** @var SelectItem $mailEvent */\n                    foreach ($_getvar('mailEvents') as $mailEvent): ?>\n                        <option\n                                value=\"<?php echo $mailEvent->getName(); ?>\"\n                            <?php echo $mailEvent->isSelected() ? 'selected' : '' ?>><?php echo $mailEvent->getName(); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button type=\"button\"\n                    class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                    data-onclick=\"config/mailCheck\"\n                    data-action-route=\"configMail/check\"\n                    data-src=\"#frmMail\"\n                    title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmMail\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('curlIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'curl'); ?>\n        <i id=\"help-curl\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-curl\">\n            <p>\n                <?php echo __('This extension is needed to connect with DokuWiki'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<form method=\"post\" name=\"frmDokuWiki\" id=\"frmDokuWiki\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configDokuWiki/save\"\n      data-hash=\"\">\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">folder</i>\n        <?php echo __('DokuWiki API'); ?>\n    </div>\n\n    <table id=\"tblDokuWiki\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-wiki-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"dokuwiki_enabled\">\n                                <input type=\"checkbox\" id=\"dokuwiki_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"dokuwiki_enabled\" <?php echo $configData->isDokuwikiEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable DokuWiki API'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\">\n                                <?php echo __('Enables DokuWiki XML-RPC API for Wiki links.'); ?>\n                                <br>\n                                <?php echo __('In order to get this feature working, you should enable Wiki links for accounts filtering'); ?>\n                            </span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('API URL'); ?>\n                <div id=\"help-dokuwiki_url\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_url\">\n                    <p>\n                        <?php echo __('DokuWiki API URL'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    <ul>\n                        <li>http://wiki.syspass.org/lib/exe/xmlrpc.php</li>\n                    </ul>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_url\" name=\"dokuwiki_url\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo $configData->getDokuwikiUrl(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_url\"><?php echo __('API URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Base URL'); ?>\n                <div id=\"help-dokuwiki_urlbase\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_urlbase\">\n                    <p>\n                        <?php echo __('DokuWiki base URL'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    <ul>\n                        <li>http://wiki.syspass.org/dokuwiki</li>\n                    </ul>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_urlbase\" name=\"dokuwiki_urlbase\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo $configData->getDokuwikiUrlBase(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_urlbase\"><?php echo __('Base URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('User'); ?>\n                <div id=\"help-dokuwiki_user\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_user\">\n                    <p>\n                        <?php echo __('User for connecting to the DokuWiki API.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_user\" name=\"dokuwiki_user\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getDokuwikiUser(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_user\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Password'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_pass\" name=\"dokuwiki_pass\"\n                           type=\"password\"\n                           class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getDokuwikiPass(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_pass\"><?php echo __('Password'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Namespace'); ?>\n                <div id=\"help-dokuwiki_namespace\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_namespace\">\n                    <p>\n                        <?php echo __('Namespace used to search pages.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_namespace\" name=\"dokuwiki_namespace\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getDokuwikiNamespace(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_namespace\"><?php echo __('Namespace'); ?></label>\n                </div>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button type=\"button\"\n                    class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                    data-onclick=\"checks/wiki\"\n                    data-action-route=\"configWiki/checkDokuwiki\"\n                    data-src=\"#frmWiki\"\n                    title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmWiki\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<form method=\"post\" name=\"frmWiki\" id=\"frmWiki\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configWiki/save\"\n      data-hash=\"\">\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">folder</i>\n        <?php echo __('Wiki'); ?>\n    </div>\n\n    <table id=\"tblWiki\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-wiki-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"wiki_enabled\">\n                                <input type=\"checkbox\" id=\"wiki_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"wiki_enabled\" <?php echo $configData->isWikiEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable Wiki links'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"><?php echo __('Enables the option to add a link to search for results in an external Wiki.'); ?></span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Wiki search URL'); ?>\n                <div id=\"help-wiki_searchurl\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wiki_searchurl\">\n                    <p>\n                        <?php echo __('URL that Wiki uses for making an entry searching.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('The client\\'s name is used as parameter.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    </p>\n\n                    <p>\n                        https://wiki.example.org/search.php?phrase=\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"wiki_searchurl\" name=\"wiki_searchurl\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo $configData->getWikiSearchurl(); ?>\">\n                    <label class=\"mdl-textfield__label\"\n                           for=\"wiki_searchurl\"><?php echo __('Wiki search URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Wiki page URL'); ?>\n                <div id=\"help-wiki_pageurl\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wiki_pageurl\">\n                    <p>\n                        <?php echo __('URL that Wiki uses for accessing to the entry details.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Account\\'s name is used as parameter of Wiki search variable.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    </p>\n\n                    <p>\n                        https://wiki.example.org/show.php?name=\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"wiki_pageurl\" name=\"wiki_pageurl\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo $configData->getWikiPageurl(); ?>\">\n                    <label class=\"mdl-textfield__label\"\n                           for=\"wiki_pageurl\"><?php echo __('Wiki page URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Account name prefix'); ?>\n                <div id=\"help-wikifilter\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wikifilter\">\n                    <p>\n                        <?php echo __('Prefix to determine which accounts have a link to the Wiki.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:') . ' serv- | srv- | vm-'; ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Account name prefix'); ?></div>\n\n                <input type=\"text\" name=\"wiki_filter\" id=\"wikifilter\"\n                       value=\"<?php echo implode(',', $configData->getWikiFilter()); ?>\"/>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmWiki\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n\n/**\n * sysPass\n *\n * @author    nuxsmin\n * @link      https://syspass.org\n * @copyright 2012-2019, Rub\u00e9n Dom\u00ednguez nuxsmin@$syspass.org\n *\n * This file is part of sysPass.\n *\n * sysPass is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * sysPass is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n *  along with sysPass.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nnamespace SP\\Services\\Install;\n\nuse Defuse\\Crypto\\Exception\\EnvironmentIsBrokenException;\nuse Exception;\nuse Psr\\Container\\ContainerExceptionInterface;\nuse Psr\\Container\\NotFoundExceptionInterface;\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\Crypt\\Hash;\nuse SP\\Core\\Events\\EventDispatcher;\nuse SP\\Core\\Exceptions\\ConstraintException;\nuse SP\\Core\\Exceptions\\InvalidArgumentException;\nuse SP\\Core\\Exceptions\\QueryException;\nuse SP\\Core\\Exceptions\\SPException;\nuse SP\\DataModel\\ProfileData;\nuse SP\\DataModel\\UserData;\nuse SP\\DataModel\\UserGroupData;\nuse SP\\DataModel\\UserProfileData;\nuse SP\\Http\\Request;\nuse SP\\Services\\Config\\ConfigService;\nuse SP\\Services\\Service;\nuse SP\\Services\\User\\UserService;\nuse SP\\Services\\UserGroup\\UserGroupService;\nuse SP\\Services\\UserProfile\\UserProfileService;\nuse SP\\Storage\\Database\\Database;\nuse SP\\Storage\\Database\\DBStorageInterface;\nuse SP\\Util\\VersionUtil;\n\ndefined('APP_ROOT') || die();\n\n/**\n * Esta clase es la encargada de instalar sysPass.\n */\nfinal class Installer extends Service\n{\n    /**\n     * sysPass' version and build number\n     */\n    const VERSION = [3, 2, 4];\n    const VERSION_TEXT = '3.2';\n    const BUILD = 22052601;\n\n    /**\n     * @var DatabaseSetupInterface\n     */\n    private $dbs;\n    /**\n     * @var Request\n     */\n    private $request;\n    /**\n     * @var InstallData\n     */\n    private $installData;\n    /**\n     * @var ConfigData\n     */\n    private $configData;\n\n    /**\n     * @param InstallData $installData\n     *\n     * @return static\n     * @throws InvalidArgumentException\n     * @throws SPException\n     * @throws EnvironmentIsBrokenException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     */\n    public function run(InstallData $installData)\n    {\n        $this->installData = $installData;\n\n        $this->checkData();\n        $this->install();\n\n        return $this;\n    }\n\n    /**\n     * @throws InvalidArgumentException\n     */\n    private function checkData()\n    {\n        if (empty($this->installData->getAdminLogin())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the admin username'),\n                SPException::ERROR,\n                __u('Admin user to log into the application'));\n        }\n\n        if (empty($this->installData->getAdminPass())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the admin\\'s password'),\n                SPException::ERROR,\n                __u('Application administrator\\'s password'));\n        }\n\n        if (empty($this->installData->getMasterPassword())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the Master Password'),\n                SPException::ERROR,\n                __u('Master password to encrypt the passwords'));\n        }\n\n        if (strlen($this->installData->getMasterPassword()) < 11) {\n            throw new InvalidArgumentException(\n                __u('Master password too short'),\n                SPException::CRITICAL,\n                __u('The Master Password length need to be at least 11 characters'));\n        }\n\n        if (empty($this->installData->getDbAdminUser())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database user'),\n                SPException::CRITICAL,\n                __u('An user with database administrative rights'));\n        }\n\n        if (empty($this->installData->getDbAdminPass()) && APP_MODULE !== 'tests') {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database password'),\n                SPException::ERROR,\n                __u('Database administrator\\'s password'));\n        }\n\n        if (empty($this->installData->getDbName())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database name'),\n                SPException::ERROR,\n                __u('Application database name. eg. syspass'));\n        }\n\n        if (substr_count($this->installData->getDbName(), '.') >= 1) {\n            throw new InvalidArgumentException(\n                __u('Database name cannot contain \".\"'),\n                SPException::CRITICAL,\n                __u('Please, remove dots in database name'));\n        }\n\n        if (empty($this->installData->getDbHost())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database server'),\n                SPException::ERROR,\n                __u('Server where the database will be installed'));\n        }\n    }\n\n    /**\n     * Iniciar instalaci\u00f3n.\n     *\n     * @throws SPException\n     * @throws EnvironmentIsBrokenException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     * @throws ConstraintException\n     * @throws QueryException\n     */\n    private function install()\n    {\n        $this->setupDbHost();\n        $this->setupConfig();\n        $this->setupDb();\n\n        $this->updateConnectionData();\n        $this->saveMasterPassword();\n        $this->createAdminAccount();\n\n        $version = VersionUtil::getVersionStringNormalized();\n\n        $this->dic->get(ConfigService::class)\n            ->create(new \\SP\\DataModel\\ConfigData('version', $version));\n\n        $this->configData->setInstalled(true);\n\n        $this->config->saveConfig($this->configData, false);\n    }\n\n    /**\n     * Setup database connection data\n     */\n    private function setupDbHost()\n    {\n        if (preg_match('/^(?:(?P<host>.*):(?P<port>\\d{1,5}))|^(?:unix:(?P<socket>.*))/', $this->installData->getDbHost(), $match)) {\n            if (!empty($match['socket'])) {\n                $this->installData->setDbSocket($match['socket']);\n            } else {\n                $this->installData->setDbHost($match['host']);\n                $this->installData->setDbPort($match['port']);\n            }\n        } else {\n            $this->installData->setDbPort(3306);\n        }\n\n        if (strpos('localhost', $this->installData->getDbHost()) === false\n            && strpos('127.0.0.1', $this->installData->getDbHost()) === false\n        ) {\n            if (APP_MODULE === 'tests') {\n                $address = SELF_IP_ADDRESS;\n            } else {\n                $address = $this->request->getServer('SERVER_ADDR');\n            }\n\n            $this->installData->setDbAuthHost($address);\n            $this->installData->setDbAuthHostDns(gethostbyaddr($address));\n        } else {\n            $this->installData->setDbAuthHost('localhost');\n        }\n    }\n\n    /**\n     * Setup sysPass config data\n     */\n    private function setupConfig()\n    {\n        // Sets version and remove upgrade key\n        $this->configData->setConfigVersion(VersionUtil::getVersionStringNormalized());\n        $this->configData->setDatabaseVersion(VersionUtil::getVersionStringNormalized());\n        $this->configData->setUpgradeKey(null);\n\n        // Set DB connection info\n        $this->configData->setDbHost($this->installData->getDbHost());\n        $this->configData->setDbSocket($this->installData->getDbSocket());\n        $this->configData->setDbPort($this->installData->getDbPort());\n        $this->configData->setDbName($this->installData->getDbName());\n\n        // Set site config\n        $this->configData->setSiteLang($this->installData->getSiteLang());\n\n        $this->config->updateConfig($this->configData);\n    }\n\n    /**\n     * @param string $type\n     *\n     * @throws SPException\n     */\n    private function setupDb($type = 'mysql')\n    {\n        switch ($type) {\n            case 'mysql':\n                $this->dbs = new MySQL($this->installData, $this->configData);\n                break;\n        }\n\n        // Si no es modo hosting se crea un hash para la clave y un usuario con prefijo \"sp_\" para la DB\n        if ($this->installData->isHostingMode()) {\n            // Guardar el usuario/clave de conexi\u00f3n a la BD\n            $this->configData->setDbUser($this->installData->getDbAdminUser());\n            $this->configData->setDbPass($this->installData->getDbAdminPass());\n        } else {\n            $this->dbs->setupDbUser();\n        }\n\n        $this->dbs->createDatabase();\n        $this->dbs->createDBStructure();\n        $this->dbs->checkConnection();\n    }\n\n    /**\n     * Setup database connection for sysPass.\n     *\n     * Updates the database storage interface in the dependency container\n     */\n    private function updateConnectionData()\n    {\n        $this->dic->set(DBStorageInterface::class, $this->dbs->createDbHandlerFromInstaller());\n        $this->dic->set(\n            Database::class,\n            new Database(\n                $this->dic->get(DBStorageInterface::class),\n                $this->dic->get(EventDispatcher::class)\n            )\n        );\n    }\n\n    /**\n     * Saves the master password metadata\n     *\n     * @throws SPException\n     */\n    private function saveMasterPassword()\n    {\n        try {\n            // This service needs to be called after a successful database setup, since\n            // DI container stores the definition on its first call, so it would contain\n            // an incomplete database setup\n            $configService = $this->dic->get(ConfigService::class);\n\n            $configService->create(new \\SP\\DataModel\\ConfigData('masterPwd', Hash::hashKey($this->installData->getMasterPassword())));\n            $configService->create(new \\SP\\DataModel\\ConfigData('lastupdatempass', time()));\n        } catch (Exception $e) {\n            processException($e);\n\n            $this->dbs->rollback();\n\n            throw new SPException(\n                $e->getMessage(),\n                SPException::CRITICAL,\n                __u('Warn to developer'),\n                $e->getCode(),\n                $e\n            );\n        }\n    }\n\n    /**\n     * Crear el usuario admin de sysPass.\n     * Esta funci\u00f3n crea el grupo, perfil y usuario 'admin' para utilizar sysPass.\n     *\n     * @throws SPException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     */\n    private function createAdminAccount()\n    {\n        try {\n            $userGroupData = new UserGroupData();\n            $userGroupData->setName('Admins');\n            $userGroupData->setDescription('sysPass Admins');\n\n            $userProfileData = new UserProfileData();\n            $userProfileData->setName('Admin');\n            $userProfileData->setProfile(new ProfileData());\n\n            $userService = $this->dic->get(UserService::class);\n            $userGroupService = $this->dic->get(UserGroupService::class);\n            $userProfileService = $this->dic->get(UserProfileService::class);\n\n            // Datos del usuario\n            $userData = new UserData();\n            $userData->setUserGroupId($userGroupService->create($userGroupData));\n            $userData->setUserProfileId($userProfileService->create($userProfileData));\n            $userData->setLogin($this->installData->getAdminLogin());\n            $userData->setName('sysPass Admin');\n            $userData->setIsAdminApp(1);\n\n            $id = $userService->createWithMasterPass($userData, $this->installData->getAdminPass(), $this->installData->getMasterPassword());\n\n            if ($id === 0) {\n                throw new SPException(__u('Error while creating \\'admin\\' user'));\n            }\n        } catch (Exception $e) {\n            processException($e);\n\n            $this->dbs->rollback();\n\n            throw new SPException(\n                $e->getMessage(),\n                SPException::CRITICAL,\n                __u('Warn to developer'),\n                $e->getCode(),\n                $e\n            );\n        }\n    }\n\n    /**\n     * initialize\n     */\n    protected function initialize()\n    {\n        $this->configData = $this->config->getConfigData();\n        $this->request = $this->dic->get(Request::class);\n    }\n}"], "fixing_code": ["<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Services\\Account\\AccountAcl;\n\n/** @var AccountExtData $accountData */\n$accountData = $_getvar('accountData');\n\n/** @var AccountAcl $accountAcl */\n$accountAcl = $_getvar('accountAcl');\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <form method=\"post\" name=\"editpass\" id=\"frmEditPass\" class=\"form-action\"\n          data-onsubmit=\"account/save\"\n          data-action-route=\"<?php echo $_getvar('formRoute', ''); ?>\"\n          data-item-id=\"<?php echo $_getvar('accountId', ''); ?>\"\n          data-hash=\"\">\n        <table class=\"data\">\n            <tr>\n                <td class=\"descField\"><?php echo __('Name'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"name\" name=\"name\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getName(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"name\"><?php echo __('Account name'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Client'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"client\" name=\"client\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getClientName(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"client\"><?php echo __('Client'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"url\" name=\"url\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getUrl(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"url\"><?php echo __('URL / IP'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('User'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"login\" name=\"login\" type=\"text\"\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               value=\"<?php echo htmlspecialchars($accountData->getLogin(), ENT_QUOTES); ?>\"\n                               readonly>\n                        <label class=\"mdl-textfield__label\"\n                               for=\"login\"><?php echo __('User'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Password'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"password\" name=\"password\" type=\"password\"\n                               required\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                               maxlength=\"255\" autocomplete=\"off\">\n                        <label class=\"mdl-textfield__label\"\n                               for=\"password\"><?php echo __('Password'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"descField\"><?php echo __('Password (repeat)'); ?></td>\n                <td class=\"valField\">\n                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <input id=\"password_repeat\" name=\"password_repeat\"\n                               type=\"password\" required\n                               class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                               maxlength=\"255\" autocomplete=\"off\">\n                        <label class=\"mdl-textfield__label\"\n                               for=\"password_repeat\"><?php echo __('Password'); ?></label>\n                    </div>\n                </td>\n            </tr>\n            <?php if ($configData->isAccountExpireEnabled()): ?>\n                <tr>\n                    <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                    <td class=\"valField\">\n                        <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                            <input id=\"password_date_expire\"\n                                   name=\"password_date_expire\" type=\"date\"\n                                   class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                   value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                   data-dst-unix=\"password_date_expire_unix\">\n                            <input type='hidden'\n                                   name='password_date_expire_unix' value=\"\"/>\n                            <label class=\"mdl-textfield__label\"\n                                   for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                        </div>\n                        <i class=\"material-icons btn-action\"\n                           title=\"<?php echo __('Select date'); ?>\">date_range</i>\n                    </td>\n                </tr>\n            <?php endif; ?>\n        </table>\n\n        <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n        <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n        <div class=\"item-actions\">\n            <ul>\n                <li>\n                    <button id=\"btnBack\" type=\"button\"\n                            class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                            title=\"<?php echo __('Back'); ?>\">\n                        <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                    </button>\n                </li>\n                <li>\n                    <button id=\"btnSave\" name=\"btnSave\" type=\"submit\"\n                            form=\"frmEditPass\"\n                            class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                            title=\"<?php echo __('Save'); ?>\">\n                        <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n                    </button>\n                </li>\n            </ul>\n        </div>\n    </form>\n</div>\n\n<script>\n    $('input:password:visible:first').focus();\n</script>\n", "<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Services\\Account\\AccountAcl;\n\n/** @var AccountExtData $accountData */\n$accountData = $_getvar('accountData');\n\n/** @var AccountAcl $accountAcl */\n$accountAcl = $_getvar('accountAcl');\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"\n           title=\"<?php echo __('History'); ?>\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <div class=\"mdl-tabs mdl-js-tabs mdl-js-ripple-effect\">\n        <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#account-panel\"\n               class=\"mdl-tabs__tab is-active\"><?php echo __('Account'); ?></a>\n\n            <?php if ($accountAcl->isShowDetails()): ?>\n                <a href=\"#detail-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Details'); ?></a>\n            <?php endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel is-active\" id=\"account-panel\">\n            <form method=\"post\" name=\"frmaccount\" id=\"frmAccount\"\n                  class=\"form-action\"\n                  data-onsubmit=\"account/save\"\n                  data-action-route=\"<?php echo $_getvar('formRoute', ''); ?>\"\n                  data-item-id=\"<?php echo $_getvar('accountId', ''); ?>\"\n                  data-hash=\"\">\n                <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n                <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n                <table class=\"data\">\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Name'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"name\" name=\"name\" type=\"text\"\n                                       required\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\"\n                                       value=\"<?php echo htmlspecialchars($accountData->getName(), ENT_QUOTES); ?>\"\n                                       tabindex=\"1\" readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Account name'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Client'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Client'); ?></div>\n\n                            <select id=\"client_id\" name=\"client_id\"\n                                    class=\"select-box sel-chosen-client\"\n                                    tabindex=\"2\" required disabled>\n                                <?php /** @var SelectItem $client */\n                                foreach ($_getvar('clients') as $client): ?>\n                                    <option\n                                            value=\"<?php echo $client->getId(); ?>\"\n                                        <?php echo $client->isSelected() ? 'selected' : ''; ?>>\n                                        <?php echo htmlspecialchars($client->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Category'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Category'); ?></div>\n\n                            <select id=\"category_id\" name=\"category_id\"\n                                    class=\"select-box\"\n                                    tabindex=\"3\" required disabled>\n                                <option value=\"\"><?php echo __('Select Category'); ?></option>\n                                <?php /** @var SelectItem $category */\n                                foreach ($_getvar('categories') as $category): ?>\n                                    <option\n                                            value=\"<?php echo $category->getId(); ?>\"\n                                        <?php echo $category->isSelected() ? 'selected' : ''; ?>>\n                                        <?php echo htmlspecialchars($category->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"url\" name=\"url\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"255\" tabindex=\"4\"\n                                       value=\"<?php echo htmlspecialchars($accountData->getUrl(), ENT_QUOTES); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access URL or IP'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('User'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"login\" name=\"login\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\" tabindex=\"5\"\n                                       value=\"<?php echo htmlspecialchars($accountData->getLogin(), ENT_QUOTES); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access user'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"password_date_expire\"\n                                       name=\"password_date_expire\" type=\"date\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                       tabindex=\"8\"\n                                       value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                       readonly>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Notes'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <textarea\n                                class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                rows=\"3\" id=\"notes\"\n                                name=\"notes\" tabindex=\"9\"\n                                maxlength=\"5000\"\n                                readonly><?php echo htmlspecialchars($accountData->getNotes(), ENT_QUOTES); ?>\n                        </textarea>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"notes\"><?php echo __('Notes about the account'); ?></label>\n                            </div>\n                    </tr>\n                    <?php if ($accountAcl->isShowHistory()\n                        && count($_getvar('historyData', [])) > 0): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('History'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('History'); ?></div>\n\n                                <select id=\"history_id\" name=\"history_id\"\n                                        class=\"select-box\" tabindex=\"12\"\n                                        data-action-route=\"account/viewHistory\"\n                                        data-onchange=\"account/viewHistory\">\n                                    <option value=\"\"><?php echo __('Select date'); ?></option>\n                                    <?php /** @var SelectItem $history */\n                                    foreach ($_getvar('historyData') as $history): ?>\n                                        <option\n                                                value=\"<?php echo $history->getId(); ?>\"\n                                            <?php echo $history->isSelected() ? 'selected' : ''; ?>>\n                                            <?php echo htmlspecialchars($history->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Last Modification'); ?></td>\n                        <td class=\"valField\">\n                            <?php printf(\n                                    '%s (%s)',\n                                    $accountData->getDateEdit(),\n                                    htmlspecialchars($accountData->getUserEditName(), ENT_QUOTES)\n                                ?: htmlspecialchars($accountData->getUserEditLogin(), ENT_QUOTES)); ?>\n                        </td>\n                    </tr>\n                </table>\n\n            </form>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"detail-panel\">\n            <?php if ($accountAcl->isShowDetails()): include $this->includeTemplate('details'); endif; ?>\n        </div>\n\n    </div>\n\n    <?php include $this->includeTemplate('actions'); ?>\n</div>\n", "<?php\n/**\n * @var callable       $_getvar\n * @var ThemeIcons     $icons\n * @var AccountExtData $accountData\n * @var AccountAcl     $accountAcl\n * @var ConfigData     $configData\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\DataModel\\AccountExtData;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Services\\Account\\AccountAcl;\n\n$accountData = $_getvar('accountData');\n$accountAcl = $_getvar('accountAcl');\n$gotData = $_getvar('gotData', false);\n$showLinked = $gotData && count($_getvar('linkedAccounts', [])) > 0;\n$showFiles = $gotData && $configData->isFilesEnabled() && $accountAcl->isShowFiles();\n$showDetails = $gotData && $accountAcl->isShowDetails();\n$showPermissions = $accountAcl->isShowPermission()\n    || $_getvar('allowPrivate', false)\n    || $_getvar('allowPrivateGroup', false);\n$showCustomFields = count($_getvar('customFields', 0)) > 0;\n?>\n\n<div class=\"data-container\">\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\"><?php echo $_getvar('title')['icon']; ?></i>\n        <?php echo $_getvar('title')['name']; ?>\n    </div>\n\n    <div class=\"mdl-tabs mdl-js-tabs mdl-js-ripple-effect\">\n        <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#account-panel\"\n               class=\"mdl-tabs__tab is-active\"><?php echo __('Account'); ?></a>\n\n            <?php if ($showCustomFields): ?>\n                <a href=\"#customfield-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Custom Fields'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showPermissions): ?>\n                <a href=\"#permission-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Permissions'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showFiles): ?>\n                <a href=\"#file-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Files'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showDetails): ?>\n                <a href=\"#detail-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Details'); ?></a>\n            <?php endif; ?>\n\n            <?php if ($showLinked): ?>\n                <a href=\"#linked-panel\"\n                   class=\"mdl-tabs__tab\"><?php echo __('Links'); ?></a>\n            <?php endif; ?>\n        </div>\n\n        <form method=\"post\" name=\"frmaccount\" id=\"frmAccount\"\n              class=\"form-action\"\n              data-onsubmit=\"account/save\"\n              data-action-route=\"<?php echo $_getvar('formRoute') ?: ''; ?>\"\n              data-item-id=\"<?php echo $_getvar('accountId') ?: ''; ?>\"\n              data-hash=\"\">\n\n            <input type=\"hidden\" name=\"sk\" value=\"<?php echo $sk; ?>\">\n            <input type=\"hidden\" name=\"isAjax\" value=\"1\">\n\n            <div class=\"mdl-tabs__panel is-active\" id=\"account-panel\">\n                <table class=\"data\">\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Name'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"name\" name=\"name\" type=\"text\"\n                                       required\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"100\"\n                                       value=\"<?php echo $gotData\n                                           ? htmlspecialchars($accountData->getName(), ENT_QUOTES)\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Account name'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Client'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Client'); ?></div>\n\n                            <select id=\"client_id\" name=\"client_id\"\n                                    class=\"select-box\"\n                                    required <?php echo $_getvar('disabled'); ?>>\n                                <option value=\"\"><?php echo __('Select Client'); ?></option>\n                                <?php /** @var SelectItem $client */\n                                foreach ($_getvar('clients') as $client): ?>\n                                    <option\n                                            value=\"<?php echo $client->getId(); ?>\"\n                                        <?php echo ($gotData && $client->getId() === $accountData->getClientId())\n                                            ? 'selected'\n                                            : ''; ?>\n                                    >\n                                        <?php echo htmlspecialchars($client->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                            <?php if ($_getvar('addClientEnabled')): ?>\n                                <i class=\"material-icons btn-action btn-add-select\"\n                                   title=\"<?php echo __('New Client'); ?>\"\n                                   data-action-route=\"<?php echo $_getvar('addClientRoute'); ?>\"\n                                   data-item-route=\"items/clients\"\n                                   data-item-dst=\"client_id\"\n                                   data-item-id=\"0\"\n                                   data-onclick=\"appMgmt/show\"><?php echo $icons->getIconAdd()->getIcon(); ?></i>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Category'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Category'); ?></div>\n\n                            <select id=\"category_id\" name=\"category_id\"\n                                    class=\"select-box\"\n                                    required <?php echo $_getvar('disabled'); ?>>\n                                <option value=\"\"><?php echo __('Select Category'); ?></option>\n                                <?php /** @var SelectItem $category */\n                                foreach ($_getvar('categories') as $category): ?>\n                                    <option\n                                            value=\"<?php echo $category->getId(); ?>\"\n                                        <?php echo ($gotData && $category->getId() === $accountData->getCategoryId())\n                                            ? 'selected'\n                                            : ''; ?>\n                                    >\n                                        <?php echo htmlspecialchars($category->getName(), ENT_QUOTES); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                            <?php if ($_getvar('addCategoryEnabled')): ?>\n                                <i class=\"material-icons btn-action btn-add-select\"\n                                   title=\"<?php echo __('New Category'); ?>\"\n                                   data-action-route=\"<?php echo $_getvar('addCategoryRoute'); ?>\"\n                                   data-item-route=\"items/categories\"\n                                   data-item-dst=\"category_id\"\n                                   data-item-id=\"0\"\n                                   data-onclick=\"appMgmt/show\"><?php echo $icons->getIconAdd()->getIcon(); ?></i>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('URL / IP'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"url\" name=\"url\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"255\"\n                                       value=\"<?php echo $gotData\n                                           ? htmlspecialchars($accountData->getUrl(), ENT_QUOTES)\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access URL or IP'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('User'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                <input id=\"login\" name=\"login\" type=\"text\"\n                                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                       maxlength=\"50\"\n                                       value=\"<?php echo $gotData\n                                           ? htmlspecialchars($accountData->getLogin(), ENT_QUOTES)\n                                           : ''; ?>\"\n                                    <?php echo $_getvar('readonly'); ?>\n                                >\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"name\"><?php echo __('Access user'); ?></label>\n                            </div>\n                        </td>\n                    </tr>\n                    <?php if ($accountAcl->isShowPass()): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Password'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                    <input id=\"password\" name=\"password\"\n                                           type=\"password\" required\n                                           class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                                           maxlength=\"255\"\n                                           autocomplete=\"off\">\n                                    <label class=\"mdl-textfield__label\"\n                                           for=\"password\"><?php echo __('Password'); ?></label>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Password (repeat)'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                    <input id=\"password_repeat\"\n                                           name=\"password_repeat\"\n                                           type=\"password\" required\n                                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                           maxlength=\"255\" autocomplete=\"off\">\n                                    <label class=\"mdl-textfield__label\"\n                                           for=\"password_repeat\"><?php echo __('Password (repeat)'); ?></label>\n                                </div>\n                            </td>\n                        </tr>\n                        <?php if ($configData->isAccountExpireEnabled()): ?>\n                            <tr>\n                                <td class=\"descField\"><?php echo __('Password Expiry Date'); ?></td>\n                                <td class=\"valField\">\n                                    <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                                        <input id=\"password_date_expire\"\n                                               name=\"password_date_expire\"\n                                               type=\"date\"\n                                               class=\"mdl-textfield__input mdl-color-text--indigo-400 password-datefield__input\"\n                                               value=\"<?php echo $_getvar('accountPassDateChange'); ?>\"\n                                               data-dst-unix=\"password_date_expire_unix\"\n                                            <?php echo $_getvar('readonly'); ?>\n                                        >\n                                        <input type='hidden'\n                                               name='password_date_expire_unix'\n                                               value=\"\"/>\n                                        <label class=\"mdl-textfield__label\"\n                                               for=\"password_date_expire\"><?php echo __('Date'); ?></label>\n                                    </div>\n\n                                    <i class=\"material-icons btn-action\"\n                                       title=\"<?php echo __('Select date'); ?>\">date_range</i>\n                                </td>\n                            </tr>\n                        <?php endif; ?>\n                    <?php endif; ?>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Notes'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                        <textarea\n                                class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                                rows=\"3\" id=\"notes\"\n                                name=\"notes\"\n                                maxlength=\"5000\" <?php echo $_getvar('readonly'); ?>>\n                            <?php echo $gotData\n                                ? htmlspecialchars($accountData->getNotes(), ENT_QUOTES)\n                                : ''; ?>\n                        </textarea>\n                                <label class=\"mdl-textfield__label\"\n                                       for=\"notes\"><?php echo __('Notes about the account'); ?></label>\n                            </div>\n                    </tr>\n                    <tr>\n                        <td class=\"descField\"><?php echo __('Tags'); ?></td>\n                        <td class=\"valField\">\n                            <div class=\"lowres-title\"><?php echo __('Tags'); ?></div>\n\n                            <?php if (!$_getvar('isView')): ?>\n                                <select id=\"tags\" name=\"tags[]\"\n                                        multiple=\"multiple\"\n                                        class=\"select-box-tags\">\n                                    <option value=\"\"><?php echo __('Select Tags'); ?></option>\n                                    <?php /** @var SelectItem $tag */\n                                    foreach ($_getvar('tags') as $tag): ?>\n                                        <option value=\"<?php echo $tag->getId(); ?>\"\n                                            <?php echo $tag->isSelected() ? 'selected' : ''; ?>>\n                                            <?php echo htmlspecialchars($tag->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                                <?php if ($_getvar('addTagEnabled')): ?>\n                                    <i class=\"material-icons btn-action btn-add-select\"\n                                       title=\"<?php echo __('New Tag'); ?>\"\n                                       data-action-route=\"<?php echo $_getvar('addTagRoute'); ?>\"\n                                       data-item-route=\"items/tags\"\n                                       data-item-dst=\"tags\"\n                                       data-item-id=\"0\"\n                                       data-onclick=\"appMgmt/show\">\n                                        <?php echo $icons->getIconAdd()->getIcon(); ?>\n                                    </i>\n                                <?php endif; ?>\n                                <?php if ($_getvar('copyAction')): ?>\n                                    <input type=\"hidden\" name=\"tags_update\"\n                                           value=\"1\">\n                                <?php endif; ?>\n                            <?php else: ?>\n                                <div class=\"tag-list-box\">\n                                    <div class=\"tag-list-body\">\n                                        <div class=\"tags-list-items\">\n                                            <?php /** @var SelectItem $tag */\n                                            foreach ($_getvar('tags') as $tag): ?>\n                                                <?php if ($tag->isSelected()): ?>\n                                                    <span class=\"tag\"><?php echo htmlspecialchars($tag->getName(), ENT_QUOTES); ?></span>\n                                                <?php endif; ?>\n                                            <?php endforeach; ?>\n                                        </div>\n                                    </div>\n                                </div>\n                            <?php endif; ?>\n                        </td>\n                    </tr>\n\n                    <?php if (!$showLinked): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Linked Account'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Linked Account'); ?></div>\n\n                                <select id=\"parent_account_id\"\n                                        name=\"parent_account_id\"\n                                        class=\"select-box select-box-deselect\" <?php echo $_getvar('disabled'); ?>\n                                        data-sk=\"<?php echo $_getvar('sk'); ?>\"\n                                        data-action-route=\"items/accountsUser\"\n                                        data-item-id=\"<?php echo $gotData ? $_getvar('accountId') : ''; ?>\"\n                                        data-selected-id=\"<?php echo $gotData ? $accountData->getParentId() : ''; ?>\">\n                                    <option value=\"\"><?php echo __('Select Account'); ?></option>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($accountAcl->isShowHistory()\n                        && count($_getvar('historyData', [])) > 0): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('History'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('History'); ?></div>\n\n                                <select id=\"history_id\" name=\"history_id\"\n                                        class=\"select-box\"\n                                        data-action-route=\"account/viewHistory\"\n                                        data-onchange=\"account/viewHistory\">\n                                    <option value=\"\"><?php echo __('Select date'); ?></option>\n                                    <?php /** @var SelectItem $history */\n                                    foreach ($_getvar('historyData') as $history): ?>\n                                        <option\n                                                value=\"<?php echo $history->getId(); ?>\">\n                                            <?php echo htmlspecialchars($history->getName(), ENT_QUOTES); ?>\n                                        </option>\n                                    <?php endforeach; ?>\n                                </select>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('editAction')\n                        && $_getvar('isModified', false)\n                        && $accountData->getUserEditName()): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Last Modification'); ?></td>\n                            <td class=\"valField\"><?php printf('%s (%s)',\n                                    $accountData->getDateEdit(),\n                                    htmlspecialchars($accountData->getUserEditName(), ENT_QUOTES)); ?>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('publicLinkShow', false) === true\n                        && $_getvar('publicLinkUrl') !== null): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Public Link'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Public Link'); ?></div>\n\n                                <a href=\"<?php echo $_getvar('publicLinkUrl'); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php echo __('Public Link'); ?>\">\n                                    <i class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                                </a>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n\n                    <?php if ($_getvar('accountId')): ?>\n                        <tr>\n                            <td class=\"descField\"><?php echo __('Direct Link'); ?></td>\n                            <td class=\"valField\">\n                                <div class=\"lowres-title\"><?php echo __('Direct Link'); ?></div>\n\n                                <a href=\"<?php echo $_getvar('deepLink'); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php echo __('Direct Link'); ?>\">\n                                    <i class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                                </a>\n                            </td>\n                        </tr>\n                    <?php endif; ?>\n                </table>\n            </div>\n\n            <div class=\"mdl-tabs__panel\" id=\"customfield-panel\">\n                <?php if ($showCustomFields): ?>\n                    <div id=\"data-customfields\">\n                        <table class=\"data\">\n                            <?php include $this->includeTemplate('aux-customfields', 'common'); ?>\n                        </table>\n                    </div>\n                <?php endif; ?>\n            </div>\n\n            <div class=\"mdl-tabs__panel\" id=\"permission-panel\">\n                <?php if ($showPermissions):\n                    include $this->includeTemplate('account-permissions');\n                endif; ?>\n            </div>\n        </form>\n\n        <div class=\"mdl-tabs__panel\" id=\"file-panel\">\n            <?php if ($showFiles) :\n                include $this->includeTemplate('files');\n            endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"detail-panel\">\n            <?php if ($showDetails):\n                include $this->includeTemplate('details');\n            endif; ?>\n        </div>\n\n        <div class=\"mdl-tabs__panel\" id=\"linked-panel\">\n            <?php if ($showLinked):\n                include $this->includeTemplate('linkedAccounts');\n            endif; ?>\n        </div>\n    </div>\n\n    <?php include $this->includeTemplate('actions'); ?>\n</div>", "<?php\n/**\n * @var ThemeIcons         $icons\n * @var callable           $_getvar\n * @var ConfigData         $configData\n * @var AccountSearchItem  $account\n * @var DataGridTab        $data\n * @var DataGridActionBase $actionMenu\n * @var DataGridActionBase $action\n * @var AccountSearchItem  $accountSearchItem\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\Acl\\ActionsInterface;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Html\\DataGrid\\Action\\DataGridActionBase;\nuse SP\\Html\\DataGrid\\DataGridTab;\nuse SP\\Services\\Account\\AccountSearchItem;\nuse SP\\Util\\DateUtil;\n\nif (!isset($data)) {\n    $data = $_getvar('data');\n}\n\n$wikiFilter = $_getvar('wikiFilter');\n$favoriteRouteOn = $_getvar('favoriteRouteOn');\n$favoriteRouteOff = $_getvar('favoriteRouteOff');\n?>\n\n<div id=\"data-search\">\n    <?php foreach ($data->getData()->getData() as $index => $accountSearchItem):\n        if ($index === 'count'): continue; endif;\n        $accountSearchData = $accountSearchItem->getAccountSearchVData();\n        ?>\n\n        <div class=\"account-label round shadow\">\n            <div class=\"label-left\">\n                <div class=\"label-row-up\">\n                    <div class=\"field-customer label-field\">\n                        <div class=\"field-name-hidden\"><?php echo __('Client'); ?></div>\n                        <?php if (null !== $accountSearchItem->getClientLink()): ?>\n                            <a href=\"<?php echo $accountSearchItem->getClientLink(); ?>\"\n                               target=\"blank\"\n                               title=\"<?php echo __('Search in Wiki'); ?>\">\n                                <span class=\"mdl-chip mdl-chip--contact\">\n                                    <span style=\"background-color: <?php echo $accountSearchItem->getColor(); ?>;\"\n                                          class=\"mdl-chip__contact mdl-color-text--white\">\n                                        <?php echo htmlspecialchars(mb_ucfirst($accountSearchData->getClientName()), ENT_QUOTES); ?>\n                                    </span>\n                                    <span class=\"mdl-chip__text\"\n                                          title=\"<?php echo htmlspecialchars($accountSearchData->getClientName(), ENT_QUOTES); ?>\">\n                                        <?php echo htmlspecialchars($accountSearchItem->getShortClientName(), ENT_QUOTES); ?>\n                                    </span>\n                                </span>\n                            </a>\n                        <?php else: ?>\n                            <span class=\"mdl-chip mdl-chip--contact\">\n                                <span style=\"background-color: <?php echo $accountSearchItem->getColor(); ?>;\"\n                                      class=\"mdl-chip__contact mdl-color-text--white\">\n                                    <?php echo htmlspecialchars(mb_ucfirst($accountSearchData->getClientName()), ENT_QUOTES); ?>\n                                </span>\n                                <span class=\"mdl-chip__text\"\n                                      title=\"<?php echo htmlspecialchars($accountSearchData->getClientName(), ENT_QUOTES); ?>\">\n                                    <?php echo htmlspecialchars($accountSearchItem->getShortClientName(), ENT_QUOTES); ?>\n                                </span>\n                            </span>\n                        <?php endif; ?>\n                    </div>\n\n                    <div class=\"field-account field-text label-field\">\n                        <div class=\"field-name\"><?php echo __('Name'); ?></div>\n                        <?php if ($accountSearchItem->isShow()\n                            && $accountSearchItem::$accountLink\n                            && $accountSearchItem->getLink()): ?>\n                            <a title=\"<?php echo __('Account Details'); ?>\"\n                               class=\"btn-action\"\n                               data-action-route=\"<?php echo $_getvar('viewAccountRoute'); ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-onclick=\"account/view\"><?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?></a>\n                        <?php else: ?>\n                            <div class=\"field-text\">\n                                <?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n\n                    <div class=\"field-category field-text label-field\">\n                        <div class=\"field-name\"><?php echo __('Category'); ?></div>\n                        <div class=\"field-text\">\n                            <?php echo htmlspecialchars($accountSearchData->getCategoryName(), ENT_QUOTES); ?>\n                        </div>\n                    </div>\n\n                    <?php if ($accountSearchItem->isShow()): ?>\n                        <div class=\"field-user field-text label-field\">\n                            <div class=\"field-name\"><?php echo __('User'); ?></div>\n                            <div class=\"field-text\">\n                                <?php echo htmlspecialchars($accountSearchItem->getShortLogin(), ENT_QUOTES); ?>\n                            </div>\n                        </div>\n\n                        <div class=\"field-url field-text label-field\">\n                            <div class=\"field-name\"><?php echo __('URL / IP'); ?></div>\n                            <?php if ($accountSearchItem->isUrlIslink()): ?>\n                                <a href=\"<?php echo urlencode($accountSearchData->getUrl()); ?>\"\n                                   target=\"_blank\"\n                                   title=\"<?php printf(__('Open link to: %s'), htmlspecialchars($accountSearchData->getUrl(), ENT_QUOTES)); ?>\">\n                                    <?php echo htmlspecialchars($accountSearchItem->getShortUrl(), ENT_QUOTES); ?>\n                                </a>\n                            <?php else: ?>\n                                <div class=\"field-text\"><?php echo htmlspecialchars($accountSearchItem->getShortUrl(), ENT_QUOTES); ?></div>\n                            <?php endif; ?>\n                        </div>\n                    <?php else: ?>\n                        <div class=\"field-user field-text label-field\"></div>\n                        <div class=\"field-url field-text label-field\"></div>\n                    <?php endif; ?>\n                </div>\n                <div class=\"label-row-down\">\n                    <div class=\"tags-box\">\n                        <?php foreach ($accountSearchItem->getTags() as $tag): ?>\n                            <span class=\"tag\"\n                                  data-tag-id=\"<?php echo $tag->id; ?>\">\n                                <?php echo htmlspecialchars($tag->name, ENT_QUOTES); ?>\n                            </span>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n            <div class=\"label-right\">\n                <div class=\"account-info\">\n                    <?php if ($accountSearchItem->isShow()): ?>\n                        <?php if ($accountSearchItem->isPasswordExpired()): ?>\n                            <i id=\"icon-expired-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons <?php echo $icons->getIconWarning()->getClass(); ?>\">\n                                <?php echo $icons->getIconWarning()->getIcon(); ?></i>\n                            <span\n                                    for=\"icon-expired-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Password Expired'); ?>\n                            </span>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchData->getIsPrivate() === 1): ?>\n                            <i id=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">lock</i>\n                            <span\n                                    for=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Private Account'); ?>\n                            </span>\n                        <?php elseif ($accountSearchData->getIsPrivateGroup() === 1): ?>\n                            <i id=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">lock_open</i>\n                            <span\n                                    for=\"icon-private-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Private Account (Group)'); ?>\n                            </span>\n                        <?php else: ?>\n                            <i id=\"accesses-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">face</i>\n\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"accesses-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Permissions'); ?></p>\n                                    <p>\n                                        <?php echo implode('<br>', $accountSearchItem->getAccesses()); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchItem->isFavorite()): ?>\n                            <i id=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons icon-favorite mdl-color-text--amber-A100\"\n                               data-action-route-on=\"<?php echo $favoriteRouteOn; ?>\"\n                               data-action-route-off=\"<?php echo $favoriteRouteOff; ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-status=\"<?php echo 'on'; ?>\">star</i>\n                            <span\n                                    for=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Delete Favorite'); ?>\n                            </span>\n                        <?php else: ?>\n                            <i id=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons icon-favorite\"\n                               data-action-route-on=\"<?php echo $favoriteRouteOn; ?>\"\n                               data-action-route-off=\"<?php echo $favoriteRouteOff; ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-status=\"<?php echo 'off'; ?>\">star_border</i>\n                            <span\n                                    for=\"btn-favorite-<?php echo $accountSearchData->getId(); ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--top\">\n                                <?php echo __('Mark as Favorite'); ?>\n                            </span>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchData->getNotes() !== ''): ?>\n                            <i id=\"notes-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">speaker_notes</i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"notes-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Notes'); ?></p>\n                                    <p>\n                                        <?php echo $accountSearchItem->getShortNotes(); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($accountSearchItem->getNumFiles() > 0): ?>\n                            <i id=\"attachments-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\">attach_file</i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"attachments-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <?php printf(\n                                            '%s: %d',\n                                        __('Attachments'),\n                                        $accountSearchItem->getNumFiles()\n                                    ); ?>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if (null !== $accountSearchItem->getPublicLink()): ?>\n                            <i id=\"publiclink-<?php echo $accountSearchData->getId(); ?>\"\n                               class=\"material-icons\"><?php echo $icons->getIconPublicLink()->getIcon(); ?></i>\n                            <div class=\"mdl-tooltip mdl-tooltip--top\"\n                                 for=\"publiclink-<?php echo $accountSearchData->getId(); ?>\">\n                                <div class=\"tooltip-text\">\n                                    <p class=\"tooltip-header\"><?php echo __('Public Link'); ?></p>\n                                    <p>\n                                        <?php printf(\n                                                '%s: %s',\n                                            __('Expiry Date'),\n                                            DateUtil::getDateFromUnix($accountSearchData->getPublicLinkDateExpire())\n                                        ); ?>\n                                        <br>\n                                        <?php printf(\n                                                '%s: %s',\n                                                __('Visits'),\n                                                $accountSearchData->getPublicLinkTotalCountViews()\n                                        ); ?>\n                                    </p>\n                                </div>\n                            </div>\n                        <?php endif; ?>\n\n                        <?php if ($wikiFilter\n                            && $accountSearchItem->isWikiMatch($wikiFilter)): ?>\n                            <?php if (AccountSearchItem::$dokuWikiEnabled): ?>\n                                <a href=\"<?php echo $_getvar('wikiPageUrl'), urldecode($accountSearchData->getName()); ?>\"\n                                   target=\"_blank\">\n                                    <i class=\"material-icons\"\n                                       title=\"<?php echo __('Link to Wiki'); ?>\">library_books</i>\n                                </a>\n                                <i class=\"btn-action material-icons fg-green100\"\n                                   title=\"<?php echo __('View at Wiki'); ?>\"\n                                   data-action-route=\"<?php echo ActionsInterface::WIKI_VIEW; ?>\"\n                                   data-pagename=\"<?php echo htmlspecialchars($accountSearchData->getName(), ENT_QUOTES); ?>\"\n                                   data-onclick=\"wiki/show\">library_books</i>\n                            <?php else: ?>\n                                <a href=\"<?php echo $_getvar('wikiPageUrl'), urlencode($accountSearchData->getName()); ?>\"\n                                   target=\"_blank\">\n                                    <i class=\"material-icons\"\n                                       title=\"<?php echo __('Link to Wiki'); ?>\">library_books</i>\n                                </a>\n                            <?php endif; ?>\n                        <?php endif; ?>\n                    <?php endif; ?>\n                </div>\n\n\n                <?php if ($accountSearchItem->isShow()\n                    || $accountSearchItem->isShowRequest()): ?>\n                    <div class=\"account-actions\">\n                        <?php foreach ($data->getDataActionsFiltered($accountSearchItem) as $action):\n                            $actionUid = uniqid('btn-action-', true);\n                            ?>\n                            <i id=\"<?php echo $actionUid; ?>\"\n                               class=\"btn-action material-icons <?php echo $action->getClassesAsString(), ' ', $action->getIcon()->getClass(); ?>\"\n                               data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                               data-parent-id=\"<?php echo $accountSearchData->getParentId(); ?>\"\n                                <?php foreach ($action->getData() as $dataName => $dataValue):\n                                    printf('data-%s=\"%s\"', $dataName, $dataValue);\n                                endforeach; ?>>\n                                <?php echo $action->getIcon()->getIcon(); ?></i>\n                            <span\n                                    for=\"<?php echo $actionUid; ?>\"\n                                    class=\"mdl-tooltip mdl-tooltip--bottom\"><?php echo $action->getTitle(); ?></span>\n                        <?php endforeach; ?>\n\n                        <?php if ($data->getDataActionsMenuCount()):\n                            $actionsMenu = $data->getDataActionsMenuFiltered($accountSearchItem);\n                            if (count($actionsMenu) > 0):\n                                $actionMenuUid = uniqid('actions-menu-lower-right-', true);\n                                ?>\n                                <button id=\"<?php echo $actionMenuUid; ?>\"\n                                        class=\"mdl-button mdl-js-button mdl-button--icon\">\n                                    <i class=\"material-icons\">more_vert</i>\n                                </button>\n                                <ul class=\"mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect\"\n                                    for=\"<?php echo $actionMenuUid; ?>\">\n\n                                    <?php foreach ($actionsMenu as $actionMenu): ?>\n                                        <li class=\"btn-action mdl-menu__item <?php echo $actionMenu->getClassesAsString(); ?>\"\n                                            data-item-id=\"<?php echo $accountSearchData->getId(); ?>\"\n                                            data-parent-id=\"<?php echo $accountSearchData->getParentId(); ?>\"\n                                            <?php foreach ($actionMenu->getData() as $dataName => $dataValue):\n                                                printf('data-%s=\"%s\"', $dataName, $dataValue);\n                                            endforeach; ?>>\n                                            <i class=\"material-icons <?php echo $actionMenu->getIcon()->getClass(); ?>\"\n                                               title=\"<?php echo $actionMenu->getTitle(); ?>\">\n                                                <?php echo $actionMenu->getIcon()->getIcon(); ?>\n                                            </i>\n                                            <?php echo $actionMenu->getName(); ?>\n                                        </li>\n                                    <?php endforeach; ?>\n                                </ul>\n                            <?php endif; ?>\n                        <?php endif; ?>\n                    </div>\n                <?php endif; ?>\n            </div>\n        </div>\n    <?php endforeach; ?>\n</div>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">verified_user</i>\n    <?php echo __('Authentication'); ?>\n</div>\n\n<table id=\"tblAuth\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-auth-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"authbasic_enabled\">\n                            <input type=\"checkbox\" id=\"authbasic_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"authbasic_enabled\" <?php echo $configData->isAuthBasicEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Auth Basic'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use Auth Basic for authorizing accesses to the application'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"authbasicautologin_enabled\">\n                            <input type=\"checkbox\"\n                                   id=\"authbasicautologin_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"authbasicautologin_enabled\" <?php echo $configData->isAuthBasicAutoLoginEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Auth Basic SSO'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use auto-login through Auth Basic'); ?></span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Domain'); ?>\n            <div id=\"help-domain\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-domain\">\n                <p>\n                    <?php echo __('The domain will be added to sysPass user name for checking against the Auth Basic one.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"authbasic_domain\" name=\"authbasic_domain\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo htmlspecialchars($configData->getAuthBasicDomain(), ENT_QUOTES); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"authbasic_domain\"><?php echo __('Domain name'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Default Group'); ?>\n            <div id=\"help-sso_defaultgroup\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\"\n                 for=\"help-sso_defaultgroup\">\n                <p>\n                    <?php echo __('Sets the default users group for newly created SSO users'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Default Group'); ?></div>\n\n            <select id=\"sso_defaultgroup\" name=\"sso_defaultgroup\"\n                    class=\"select-box sel-chosen-usergroup\">\n                <option value=\"\"><?php echo __('Select Group'); ?></option>\n                <?php /** @var SelectItem $userGroup */\n                foreach ($_getvar('userGroups') as $userGroup): ?>\n                    <option\n                            value=\"<?php echo $userGroup->getId(); ?>\" <?php echo $userGroup->getId() === $configData->getSsoDefaultGroup() ? 'selected' : ''; ?>><?php echo htmlspecialchars($userGroup->getName(), ENT_QUOTES); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Default Profile'); ?>\n            <div id=\"help-sso_defaultprofile\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\"\n                 for=\"help-sso_defaultprofile\">\n                <p>\n                    <?php echo __('Sets the default profile for the newly created SSO users.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Default Profile'); ?></div>\n\n            <select id=\"sso_defaultprofile\" name=\"sso_defaultprofile\"\n                    class=\"select-box sel-chosen-profile\">\n                <option value=\"\"><?php echo __('Select User'); ?></option>\n                <?php /** @var SelectItem $userProfile */\n                foreach ($_getvar('userProfiles') as $userProfile): ?>\n                    <option\n                            value=\"<?php echo $userProfile->getId(); ?>\" <?php echo ($userProfile->getId() === $configData->getSsoDefaultProfile()) ? 'selected' : ''; ?>><?php echo htmlspecialchars($userProfile->getName(), ENT_QUOTES); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">view_headline</i>\n    <?php echo __('Events'); ?>\n</div>\n\n<table id=\"tblEvents\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-events-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"log_enabled\">\n                            <input type=\"checkbox\" id=\"log_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"log_enabled\" <?php echo $configData->isLogEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable event log'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Saves the actions done by the application.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"syslog_enabled\">\n                            <input type=\"checkbox\" id=\"syslog_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"syslog_enabled\" <?php echo $configData->isSyslogEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable Syslog'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"remotesyslog_enabled\">\n                            <input type=\"checkbox\" id=\"remotesyslog_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"remotesyslog_enabled\" <?php echo $configData->isSyslogRemoteEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable Remote Syslog'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"></span>\n                    </span>\n                </li>\n\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Server'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"remotesyslog_server\" name=\"remotesyslog_server\"\n                       type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo htmlspecialchars($configData->getSyslogServer(), ENT_QUOTES); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"remotesyslog_server\"><?php echo __('Hostname or IP address'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Port'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"remotesyslog_port\" name=\"remotesyslog_port\"\n                       type=\"number\"\n                       pattern=\"[0-9]{1-5}\" step=\"1\" max=\"65535\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo $configData->getSyslogPort(); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"remotesyslog_port\"><?php echo __('Port'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Events'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Events'); ?></div>\n\n            <select id=\"log_events\" name=\"log_events[]\" multiple=\"multiple\"\n                    class=\"select-box\" data-create=\"true\">\n                <?php /** @var SelectItem $logEvent */\n                foreach ($_getvar('logEvents') as $logEvent): ?>\n                    <option\n                            value=\"<?php echo $logEvent->getName(); ?>\"\n                        <?php echo $logEvent->isSelected() ? 'selected' : '' ?>><?php echo $logEvent->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">device_hub</i>\n    <?php echo __('Proxy'); ?>\n</div>\n\n<table id=\"tblProxy\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-proxy-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"proxy_enabled\">\n                            <input type=\"checkbox\" id=\"proxy_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"proxy_enabled\" <?php echo $configData->isProxyEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Use Proxy'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Use a proxy server for checking out for updates and notifications.'); ?></span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Server'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_server\" name=\"proxy_server\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo htmlspecialchars($configData->getProxyServer(), ENT_QUOTES); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_server\"><?php echo __('Proxy server'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Port'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_port\" name=\"proxy_port\" type=\"number\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       pattern=\"[0-9]{1,5}\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyPort(); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_port\"><?php echo __('Proxy server port'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('User'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_user\" name=\"proxy_user\" type=\"text\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo htmlspecialchars($configData->getProxyUser(), ENT_QUOTES); ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_user\"><?php echo __('Proxy server user'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Password'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"proxy_pass\" name=\"proxy_pass\" type=\"password\"\n                       class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"128\"\n                       value=\"<?php echo $configData->getProxyPass() ? '***' : ''; ?>\">\n                <label class=\"mdl-textfield__label\"\n                       for=\"proxy_pass\"><?php echo __('Proxy server password'); ?></label>\n            </div>\n        </td>\n    </tr>\n\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('curlIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'curl'); ?>\n        <i id=\"help-curl\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-curl\">\n            <p>\n                <?php echo __('This extension is needed to check for sysPass updates and notices'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">home</i>\n    <?php echo __('Site'); ?>\n</div>\n\n<table id=\"tblSite\" class=\"data tblConfig\">\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Language'); ?>\n            <div id=\"help-sitelang\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-sitelang\">\n                <p>\n                    <?php echo __('Sets the global app language. You can set a per user language on preferences.'); ?>\n                </p>\n\n                <p>\n                    <?php echo __('To improve/add translations, you can get involved at https://poeditor.com/join/project/fmlsBuugyv'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Language'); ?></div>\n\n            <select name=\"sitelang\" id=\"sel-sitelang\" size=\"1\"\n                    class=\"select-box sel-chosen-ns\">\n                <?php /** @var SelectItem $lang */\n                foreach ($_getvar('langs') as $lang): ?>\n                    <option\n                            value='<?php echo $lang->getId(); ?>' <?php echo $lang->isSelected() ? 'selected' : ''; ?>><?php echo $lang->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Visual Theme'); ?>\n            <div id=\"help-sitetheme\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-sitetheme\">\n                <p>\n                    <?php echo __('Sets the global application visual theme. You can set a per user visual theme on preferences.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"lowres-title\"><?php echo __('Visual Theme'); ?></div>\n\n            <select name=\"sitetheme\" id=\"sel-sitetheme\" size=\"1\"\n                    class=\"select-box sel-chosen-ns\">\n                <?php /** @var SelectItem $theme */\n                foreach ($_getvar('themes') as $theme): ?>\n                    <option\n                            value='<?php echo $theme->getId(); ?>' <?php echo $theme->isSelected() ? 'selected' : \"\"; ?>><?php echo $theme->getName(); ?></option>\n                <?php endforeach; ?>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Session timeout (s)'); ?>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"session_timeout\" name=\"session_timeout\" type=\"number\"\n                       min=\"0\" step=\"300\"\n                       pattern=\"[0-9]{2,4}\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       maxlength=\"5\"\n                       value=\"<?php echo $configData->getSessionTimeout(); ?>\"\n                       required/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"session_timeout\"><?php echo __('Session timeout (s)'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\">\n            <?php echo __('Application URL'); ?>\n            <div id=\"help-app_url\"\n                 class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n            <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-app_url\">\n                <p>\n                    <?php echo __('Sets the application URL when accessing through a reverse proxy or load balancer.'); ?>\n                </p>\n            </div>\n        </td>\n        <td class=\"valField\">\n            <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                <input id=\"app_url\" name=\"app_url\" type=\"url\"\n                       pattern=\"^https?://.*\"\n                       class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                       value=\"<?php echo htmlspecialchars($configData->getApplicationUrl(), ENT_QUOTES); ?>\"/>\n                <label class=\"mdl-textfield__label\"\n                       for=\"app_url\"><?php echo __('Application URL'); ?></label>\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <td class=\"descField\"></td>\n        <td class=\"valField\">\n            <ul class=\"config-site-list-action mdl-list\">\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"https_enabled\">\n                            <input type=\"checkbox\" id=\"https_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"https_enabled\" <?php echo $configData->isHttpsEnabled() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Force HTTPS'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('It forces the use of HTTPS on all the connections'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"debug_enabled\">\n                            <input type=\"checkbox\" id=\"debug_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"debug_enabled\" <?php echo $configData->isDebug() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Enable debug'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Displays some information about application configuration and performance.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"maintenance_enabled\">\n                            <input type=\"checkbox\" id=\"maintenance_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"maintenance_enabled\" <?php echo $configData->isMaintenance() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Maintenance mode'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('In this mode nobody can log into the application. To disable it, you need to either modify the configuration file or unset on the site tab.'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"check_updates_enabled\">\n                            <input type=\"checkbox\" id=\"check_updates_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"check_updates_enabled\" <?php echo $configData->isCheckUpdates() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Check for updates'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Check for application updates (only for administrators).'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"check_notices_enabled\">\n                            <input type=\"checkbox\" id=\"check_notices_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"check_notices_enabled\" <?php echo $configData->isChecknotices() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Check for notifications'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\"><?php echo __('Check if there are either sysPass security or warning notices (only for administrators).'); ?></span>\n                    </span>\n                </li>\n\n                <li class=\"mdl-list__item mdl-list__item--two-line\">\n                    <div class=\"mdl-switch__box\">\n                        <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                               for=\"encrypt_session_enabled\">\n                            <input type=\"checkbox\" id=\"encrypt_session_enabled\"\n                                   class=\"mdl-switch__input\"\n                                   name=\"encrypt_session_enabled\" <?php echo $configData->isEncryptSession() ? 'checked' : ''; ?>/>\n                        </label>\n                    </div>\n\n                    <span class=\"mdl-list__item-primary-content\">\n                        <span><?php echo __('Encrypt Session'); ?></span>\n                        <span class=\"mdl-list__item-sub-title\">\n                            <?php echo __('Encrypt PHP session data'); ?>\n                            <?php echo __('This feature increases the PHP sessions security, because the stored data won\\'t be readable.'); ?>\n                        </span>\n                    </span>\n                </li>\n            </ul>\n        </td>\n    </tr>\n</table>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('ldapIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'ldap'); ?>\n        <i id=\"help-ldap\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-ldap\">\n            <p>\n                <?php echo __('This extension is needed to connect to the LDAP server'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">business</i>\n    <?php echo __('Configuration'); ?>\n</div>\n\n<form method=\"post\" name=\"frmLdap\" id=\"frmLdap\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configLdap/save\"\n      data-hash=\"\">\n    <table id=\"tblLdap\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-ldap-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_enabled\">\n                                <input type=\"checkbox\" id=\"ldap_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_enabled\" <?php echo $configData->isLdapEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span><?php echo __('Enable LDAP'); ?></span>\n                                <span class=\"mdl-list__item-sub-title\">\n                                    <?php echo __('Enables authentication against an LDAP server.'); ?>\n                                    <br>\n                                    <?php echo __('This method will use MySQL as fallback.'); ?>\n                                </span>\n                            </span>\n                    </li>\n\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_tls_enabled\">\n                                <input type=\"checkbox\" id=\"ldap_tls_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_tls_enabled\" <?php echo $configData->isLdapTlsEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span>TLS</span>\n                                <span class=\"mdl-list__item-sub-title\">\n                                    <?php echo __('Enables the connection over TLS'); ?>\n                                </span>\n                            </span>\n                    </li>\n\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"><?php echo __('Server Type'); ?></td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Server Type'); ?></div>\n\n                <select id=\"ldap_defaultgroup\" name=\"ldap_server_type\"\n                        class=\"select-box sel-chosen-usergroup\" required>\n                    <option value=\"\"><?php echo __('Server Type'); ?></option>\n                    <?php /** @var SelectItem $serverType */\n                    foreach ($_getvar('serverTypes') as $serverType): ?>\n                        <option\n                                value=\"<?php echo $serverType->getId(); ?>\" <?php echo $serverType->isSelected() ? 'selected' : ''; ?>><?php echo $serverType->getName(); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Server'); ?>\n                <div id=\"help-ldap_server\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_server\">\n                    <p>\n                        <?php echo __('Hostname or IP address of LDAP server.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>ldap.example.org</li>\n                        <li>ldap://ldap.example.org</li>\n                        <li>ldaps://ldap.example.org</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_server\" name=\"ldap_server\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getLdapServer(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_server\"><?php echo __('Server'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Bind User'); ?>\n                <div id=\"help-ldap_binduser\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_binduser\">\n                    <p>\n                        <?php echo __('User to connect to LDAP service.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=syspass,ou=Users,dc=syspass,o=org</li>\n                        <li>syspass</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_binduser\" name=\"ldap_binduser\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getLdapBindUser(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_binduser\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Bind Password'); ?>\n                <div id=\"help-ldap_bindpass\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_bindpass\">\n                    <p>\n                        <?php echo __('LDAP connection user\\'s password'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_bindpass\" name=\"ldap_bindpass\"\n                           type=\"password\"\n                           class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getLdapBindPass() ? '***' : ''; ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_bindpass\"><?php echo __('Password'); ?></label>\n\n                </div>\n                <?php if ($configData->getLdapBindPass()): ?>\n                    <div id=\"help-ldap_password\"\n                         class=\"icon material-icons <?php echo $icons->getIconWarning()->getClass(); ?>\"><?php echo $icons->getIconWarning()->getIcon(); ?></div>\n                    <div class=\"mdl-tooltip mdl-tooltip--large\"\n                         for=\"help-ldap_password\">\n                        <p>\n                            <?php echo __('This isn\\'t the real LDAP password. You should set the real one before checking or importing LDAP objects'); ?>\n                        </p>\n                    </div>\n                <?php endif; ?>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Search base'); ?>\n                <div id=\"help-ldap_base\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_base\">\n                    <p>\n                        <?php echo __('LDAP base to perform the LDAP users search.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=Users,dc=example,dc=org</li>\n                        <li>ou=AdminUsers,dc=example,o=org</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_base\" name=\"ldap_base\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getLdapBase(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_base\"><?php echo __('Search base'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Group'); ?>\n                <div id=\"help-ldap_group\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_group\">\n                    <p>\n                        <?php echo __('LDAP group which user must belong to for granting to log in.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('This group needs to be placed in the LDAP search base.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:'); ?>\n                    </p>\n\n                    <ul>\n                        <li>cn=GRP_SPUSERS,cn=Users,dc=example,dc=org</li>\n                        <li>GRP_SPUSERS</li>\n                    </ul>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_group\" name=\"ldap_group\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getLdapGroup(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_group\"><?php echo __('Group'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Default Group'); ?>\n                <div id=\"help-ldap_defaultgroup\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_defaultgroup\">\n                    <p>\n                        <?php echo __('Sets the default users group for newly created LDAP users'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Default Group'); ?></div>\n\n                <select id=\"ldap_defaultgroup\" name=\"ldap_defaultgroup\"\n                        class=\"select-box sel-chosen-usergroup\" required>\n                    <option value=\"\"><?php echo __('Select Group'); ?></option>\n                    <?php /** @var SelectItem $userGroup */\n                    foreach ($_getvar('userGroups') as $userGroup): ?>\n                        <option\n                                value=\"<?php echo $userGroup->getId(); ?>\"\n                            <?php echo $userGroup->getId() === $configData->getLdapDefaultGroup() ? 'selected' : ''; ?>>\n                            <?php echo htmlspecialchars($userGroup->getName(), ENT_QUOTES); ?>\n                        </option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Default Profile'); ?>\n                <div id=\"help-ldap_defaultprofile\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_defaultprofile\">\n                    <p>\n                        <?php echo __('Sets the default profile for the newly created LDAP users.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Default Profile'); ?></div>\n\n                <select id=\"ldap_defaultprofile\" name=\"ldap_defaultprofile\"\n                        class=\"select-box sel-chosen-profile\" required>\n                    <option value=\"\"><?php echo __('Select User'); ?></option>\n                    <?php /** @var SelectItem $userProfile */\n                    foreach ($_getvar('userProfiles') as $userProfile): ?>\n                        <option\n                                value=\"<?php echo $userProfile->getId(); ?>\" <?php echo ($userProfile->getId() === $configData->getLdapDefaultProfile()) ? 'selected' : ''; ?>><?php echo htmlspecialchars($userProfile->getName(), ENT_QUOTES); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n    </table>\n\n\n    <div class=\"tab-actions\">\n        <ul>\n            <li>\n                <button id=\"btnBack\" type=\"button\"\n                        class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                        title=\"<?php echo __('Back'); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                        data-onclick=\"ldap/check\"\n                        data-action-route=\"configLdap/check\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button form=\"frmLdap\"\n                        class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                        title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n                </button>\n            </li>\n        </ul>\n    </div>\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">import_export</i>\n        <?php echo __('Import'); ?>\n    </div>\n\n    <table id=\"tblLdap\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Login Attribute'); ?>\n                <div id=\"help-ldap_login_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_login_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user\\'s login when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Login Attribute'); ?></div>\n\n                <select id=\"ldap_login_attribute\" name=\"ldap_login_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"samaccountname\" selected>sAMAccountName\n                    </option>\n                    <option value=\"userprincipalname\">userPrincipalName</option>\n                    <option value=\"uid\">uid</option>\n                    <option value=\"login\">login</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Name Attribute'); ?>\n                <div id=\"help-ldap_username_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_username_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user\\'s name when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Name Attribute'); ?></div>\n\n                <select id=\"ldap_username_attribute\"\n                        name=\"ldap_username_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"displayname\" selected>displayName</option>\n                    <option value=\"fullname\">fullName</option>\n                    <option value=\"cn\">cn</option>\n                    <option value=\"name\">name</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-ldap-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"ldap_import_groups\">\n                                <input type=\"checkbox\" id=\"ldap_import_groups\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"ldap_import_groups\"/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                                <span><?php echo __('Import Groups'); ?></span>\n                                <span class=\"mdl-list__item-sub-title\"></span>\n                            </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Group Name Attribute'); ?>\n                <div id=\"help-ldap_groupname_attribute\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_groupname_attribute\">\n                    <p>\n                        <?php echo __('Defines the attribute for the user group name when importing.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Group Name Attribute'); ?></div>\n\n                <select id=\"ldap_groupname_attribute\"\n                        name=\"ldap_groupname_attribute\"\n                        class=\"select-box\" required>\n                    <option value=\"cn\">cn</option>\n                    <option value=\"name\">name</option>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Filter'); ?>\n                <div id=\"help-ldap_import_filter\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-ldap_import_filter\">\n                    <p>\n                        <?php echo __('Filter for importing LDAP users or groups.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"ldap_import_filter\" name=\"ldap_import_filter\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"ldap_import_filter\"><?php echo __('Filter'); ?></label>\n                </div>\n            </td>\n        </tr>\n    </table>\n\n    <div class=\"tab-actions\">\n        <ul>\n            <li>\n                <button id=\"btnBack\" type=\"button\"\n                        class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                        title=\"<?php echo __('Back'); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                        data-onclick=\"ldap/check\"\n                        data-action-route=\"configLdap/checkImport\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                    <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n                </button>\n            </li>\n            <li>\n                <button type=\"button\"\n                        class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored\"\n                        data-onclick=\"ldap/import\"\n                        data-action-route=\"configLdap/import\"\n                        data-src=\"#frmLdap\"\n                        title=\"<?php echo __('Import users from LDAP'); ?>\">\n                    <i class=\"material-icons\">get_app</i>\n                </button>\n            </li>\n        </ul>\n    </div>\n</form>", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Components\\SelectItem;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<div id=\"title\" class=\"titleNormal\">\n    <i class=\"material-icons\">mail</i>\n    <?php echo __('Mail'); ?>\n</div>\n\n<form method=\"post\" name=\"frmMail\" id=\"frmMail\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configMail/save\"\n      data-hash=\"\">\n    <table id=\"tblMail\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-mail-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_enabled\">\n                                <input type=\"checkbox\" id=\"mail_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_enabled\" <?php echo $configData->isMailEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable email notifications'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"><?php echo __('Enable email notifications'); ?></span>\n                        </span>\n                    </li>\n\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_requests_enabled\">\n                                <input type=\"checkbox\"\n                                       id=\"mail_requests_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_requests_enabled\" <?php echo $configData->isMailRequestsEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable requests by email'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\">\n                                <?php echo __('Allows users to request for either modifications to existing accounts or access to accounts which they have no rights on.'); ?>\n                            </span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Server'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_server\" name=\"mail_server\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getMailServer(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_server\"><?php echo __('Server'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Port'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_port\" name=\"mail_port\" type=\"number\"\n                           pattern=\"[0-9]{1,5}\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"5\"\n                           value=\"<?php echo $configData->getMailPort(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_port\"><?php echo __('Port'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-mail-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"mail_auth_enabled\">\n                                <input type=\"checkbox\" id=\"mail_auth_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"mail_auth_enabled\" <?php echo $configData->isMailAuthenabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable Authentication'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"></span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('User'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_user\" name=\"mail_user\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"50\"\n                           value=\"<?php echo htmlspecialchars($configData->getMailUser(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_user\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Password'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_pass\" name=\"mail_pass\" type=\"password\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400 passwordfield__input\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getMailPass() ? '***' : ''; ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_pass\"><?php echo __('Password'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Security'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Security'); ?></div>\n\n                <select name=\"mail_security\" id=\"sel-mailsecurity\" size=\"1\"\n                        class=\"select-box select-box-deselect\">\n                    <option value=\"\"><?php echo __('Disabled'); ?></option>\n                    <?php foreach ($_getvar('mailSecurity') as $security): ?>\n                        <option\n                                value=\"<?php echo $security; ?>\" <?php echo ($configData->getMailSecurity() === $security) ? 'selected' : ''; ?>><?php echo $security; ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Sender email address'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"mail_from\" name=\"mail_from\" type=\"email\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getMailFrom(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"mail_from\"><?php echo __('Sender email address'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Recipients'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Recipients'); ?></div>\n\n                <input type=\"text\" name=\"mail_recipients\" id=\"mail_recipients\"\n                       class=\"select-items-tag\"\n                       value=\"<?php echo implode(',', $configData->getMailRecipients()); ?>\"/>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Events'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Events'); ?></div>\n\n                <select id=\"mail_events\" name=\"mail_events[]\"\n                        multiple=\"multiple\" class=\"select-box\"\n                        data-create=\"true\">\n                    <?php /** @var SelectItem $mailEvent */\n                    foreach ($_getvar('mailEvents') as $mailEvent): ?>\n                        <option\n                                value=\"<?php echo $mailEvent->getName(); ?>\"\n                            <?php echo $mailEvent->isSelected() ? 'selected' : '' ?>><?php echo $mailEvent->getName(); ?></option>\n                    <?php endforeach; ?>\n                </select>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button type=\"button\"\n                    class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                    data-onclick=\"config/mailCheck\"\n                    data-action-route=\"configMail/check\"\n                    data-src=\"#frmMail\"\n                    title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmMail\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<?php if (!$_getvar('curlIsAvailable')): ?>\n    <div class=\"msg-option-unvailable\">\n        <?php printf(__('The \\'%s\\' extension is unavailable'), 'curl'); ?>\n        <i id=\"help-curl\"\n           class=\"material-icons\"><?php echo $icons->getIconHelp()->getIcon(); ?></i>\n        <div class=\"mdl-tooltip mdl-tooltip--large\" for=\"help-curl\">\n            <p>\n                <?php echo __('This extension is needed to connect with DokuWiki'); ?>\n            </p>\n        </div>\n    </div>\n<?php endif; ?>\n\n<form method=\"post\" name=\"frmDokuWiki\" id=\"frmDokuWiki\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configDokuWiki/save\"\n      data-hash=\"\">\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">folder</i>\n        <?php echo __('DokuWiki API'); ?>\n    </div>\n\n    <table id=\"tblDokuWiki\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-wiki-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"dokuwiki_enabled\">\n                                <input type=\"checkbox\" id=\"dokuwiki_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"dokuwiki_enabled\" <?php echo $configData->isDokuwikiEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable DokuWiki API'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\">\n                                <?php echo __('Enables DokuWiki XML-RPC API for Wiki links.'); ?>\n                                <br>\n                                <?php echo __('In order to get this feature working, you should enable Wiki links for accounts filtering'); ?>\n                            </span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('API URL'); ?>\n                <div id=\"help-dokuwiki_url\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_url\">\n                    <p>\n                        <?php echo __('DokuWiki API URL'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    <ul>\n                        <li>http://wiki.syspass.org/lib/exe/xmlrpc.php</li>\n                    </ul>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_url\" name=\"dokuwiki_url\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo htmlspecialchars($configData->getDokuwikiUrl(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_url\"><?php echo __('API URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Base URL'); ?>\n                <div id=\"help-dokuwiki_urlbase\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_urlbase\">\n                    <p>\n                        <?php echo __('DokuWiki base URL'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    <ul>\n                        <li>http://wiki.syspass.org/dokuwiki</li>\n                    </ul>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_urlbase\" name=\"dokuwiki_urlbase\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo htmlspecialchars($configData->getDokuwikiUrlBase(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_urlbase\"><?php echo __('Base URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('User'); ?>\n                <div id=\"help-dokuwiki_user\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_user\">\n                    <p>\n                        <?php echo __('User for connecting to the DokuWiki API.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_user\" name=\"dokuwiki_user\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getDokuwikiUser(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_user\"><?php echo __('User'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Password'); ?>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_pass\" name=\"dokuwiki_pass\"\n                           type=\"password\"\n                           class=\"mdl-textfield__input passwordfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo $configData->getDokuwikiPass(); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_pass\"><?php echo __('Password'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Namespace'); ?>\n                <div id=\"help-dokuwiki_namespace\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-dokuwiki_namespace\">\n                    <p>\n                        <?php echo __('Namespace used to search pages.'); ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"dokuwiki_namespace\" name=\"dokuwiki_namespace\"\n                           type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"128\"\n                           value=\"<?php echo htmlspecialchars($configData->getDokuwikiNamespace(), ENT_QUOTES); ?>\"/>\n                    <label class=\"mdl-textfield__label\"\n                           for=\"dokuwiki_namespace\"><?php echo __('Namespace'); ?></label>\n                </div>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button type=\"button\"\n                    class=\"btn-action mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconCheck()->getClassButton(); ?>\"\n                    data-onclick=\"checks/wiki\"\n                    data-action-route=\"configWiki/checkDokuwiki\"\n                    data-src=\"#frmWiki\"\n                    title=\"<?php echo $icons->getIconCheck()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconCheck()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmWiki\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n/**\n * @var ThemeIcons $icons\n * @var ConfigData $configData\n * @var callable   $_getvar\n * @var Template   $this\n */\n\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\UI\\ThemeIcons;\nuse SP\\Mvc\\View\\Template;\n\n?>\n\n<form method=\"post\" name=\"frmWiki\" id=\"frmWiki\" class=\"form-action\"\n      data-onsubmit=\"config/save\"\n      data-action-route=\"configWiki/save\"\n      data-hash=\"\">\n\n    <div id=\"title\" class=\"titleNormal\">\n        <i class=\"material-icons\">folder</i>\n        <?php echo __('Wiki'); ?>\n    </div>\n\n    <table id=\"tblWiki\" class=\"data tblConfig\">\n        <tr>\n            <td class=\"descField\"></td>\n            <td class=\"valField\">\n                <ul class=\"config-wiki-list-action mdl-list\">\n                    <li class=\"mdl-list__item mdl-list__item--two-line\">\n                        <div class=\"mdl-switch__box\">\n                            <label class=\"mdl-switch mdl-js-switch mdl-js-ripple-effect\"\n                                   for=\"wiki_enabled\">\n                                <input type=\"checkbox\" id=\"wiki_enabled\"\n                                       class=\"mdl-switch__input\"\n                                       name=\"wiki_enabled\" <?php echo $configData->isWikiEnabled() ? 'checked' : ''; ?>/>\n                            </label>\n                        </div>\n\n                        <span class=\"mdl-list__item-primary-content\">\n                            <span><?php echo __('Enable Wiki links'); ?></span>\n                            <span class=\"mdl-list__item-sub-title\"><?php echo __('Enables the option to add a link to search for results in an external Wiki.'); ?></span>\n                        </span>\n                    </li>\n                </ul>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Wiki search URL'); ?>\n                <div id=\"help-wiki_searchurl\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wiki_searchurl\">\n                    <p>\n                        <?php echo __('URL that Wiki uses for making an entry searching.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('The client\\'s name is used as parameter.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    </p>\n\n                    <p>\n                        https://wiki.example.org/search.php?phrase=\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"wiki_searchurl\" name=\"wiki_searchurl\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo htmlspecialchars($configData->getWikiSearchurl(), ENT_QUOTES); ?>\">\n                    <label class=\"mdl-textfield__label\"\n                           for=\"wiki_searchurl\"><?php echo __('Wiki search URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Wiki page URL'); ?>\n                <div id=\"help-wiki_pageurl\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wiki_pageurl\">\n                    <p>\n                        <?php echo __('URL that Wiki uses for accessing to the entry details.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Account\\'s name is used as parameter of Wiki search variable.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Example:'); ?>\n                    </p>\n\n                    <p>\n                        https://wiki.example.org/show.php?name=\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n                    <input id=\"wiki_pageurl\" name=\"wiki_pageurl\" type=\"text\"\n                           class=\"mdl-textfield__input mdl-color-text--indigo-400\"\n                           maxlength=\"255\"\n                           value=\"<?php echo htmlspecialchars($configData->getWikiPageurl(), ENT_QUOTES); ?>\">\n                    <label class=\"mdl-textfield__label\"\n                           for=\"wiki_pageurl\"><?php echo __('Wiki page URL'); ?></label>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td class=\"descField\">\n                <?php echo __('Account name prefix'); ?>\n                <div id=\"help-wikifilter\"\n                     class=\"icon material-icons <?php echo $icons->getIconHelp()->getClass(); ?>\"><?php echo $icons->getIconHelp()->getIcon(); ?></div>\n                <div class=\"mdl-tooltip mdl-tooltip--large\"\n                     for=\"help-wikifilter\">\n                    <p>\n                        <?php echo __('Prefix to determine which accounts have a link to the Wiki.'); ?>\n                    </p>\n\n                    <p>\n                        <?php echo __('Examples:') . ' serv- | srv- | vm-'; ?>\n                    </p>\n                </div>\n            </td>\n            <td class=\"valField\">\n                <div class=\"lowres-title\"><?php echo __('Account name prefix'); ?></div>\n\n                <input type=\"text\" name=\"wiki_filter\" id=\"wikifilter\"\n                       value=\"<?php echo implode(',', $configData->getWikiFilter()); ?>\"/>\n            </td>\n        </tr>\n    </table>\n</form>\n\n<div class=\"tab-actions\">\n    <ul>\n        <li>\n            <button id=\"btnBack\" type=\"button\"\n                    class=\"btn-back mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconBack()->getClassButton(); ?>\"\n                    title=\"<?php echo __('Back'); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconBack()->getIcon(); ?></i>\n            </button>\n        </li>\n        <li>\n            <button form=\"frmWiki\"\n                    class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored <?php echo $icons->getIconSave()->getClassButton(); ?>\"\n                    title=\"<?php echo $icons->getIconSave()->getTitle(); ?>\">\n                <i class=\"material-icons\"><?php echo $icons->getIconSave()->getIcon(); ?></i>\n            </button>\n        </li>\n    </ul>\n</div>\n", "<?php\n\n/**\n * sysPass\n *\n * @author    nuxsmin\n * @link      https://syspass.org\n * @copyright 2012-2019, Rub\u00e9n Dom\u00ednguez nuxsmin@$syspass.org\n *\n * This file is part of sysPass.\n *\n * sysPass is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * sysPass is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n *  along with sysPass.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nnamespace SP\\Services\\Install;\n\nuse Defuse\\Crypto\\Exception\\EnvironmentIsBrokenException;\nuse Exception;\nuse Psr\\Container\\ContainerExceptionInterface;\nuse Psr\\Container\\NotFoundExceptionInterface;\nuse SP\\Config\\ConfigData;\nuse SP\\Core\\Crypt\\Hash;\nuse SP\\Core\\Events\\EventDispatcher;\nuse SP\\Core\\Exceptions\\ConstraintException;\nuse SP\\Core\\Exceptions\\InvalidArgumentException;\nuse SP\\Core\\Exceptions\\QueryException;\nuse SP\\Core\\Exceptions\\SPException;\nuse SP\\DataModel\\ProfileData;\nuse SP\\DataModel\\UserData;\nuse SP\\DataModel\\UserGroupData;\nuse SP\\DataModel\\UserProfileData;\nuse SP\\Http\\Request;\nuse SP\\Services\\Config\\ConfigService;\nuse SP\\Services\\Service;\nuse SP\\Services\\User\\UserService;\nuse SP\\Services\\UserGroup\\UserGroupService;\nuse SP\\Services\\UserProfile\\UserProfileService;\nuse SP\\Storage\\Database\\Database;\nuse SP\\Storage\\Database\\DBStorageInterface;\nuse SP\\Util\\VersionUtil;\n\ndefined('APP_ROOT') || die();\n\n/**\n * Esta clase es la encargada de instalar sysPass.\n */\nfinal class Installer extends Service\n{\n    /**\n     * sysPass' version and build number\n     */\n    const VERSION = [3, 2, 5];\n    const VERSION_TEXT = '3.2';\n    const BUILD = 22060401;\n\n    /**\n     * @var DatabaseSetupInterface\n     */\n    private $dbs;\n    /**\n     * @var Request\n     */\n    private $request;\n    /**\n     * @var InstallData\n     */\n    private $installData;\n    /**\n     * @var ConfigData\n     */\n    private $configData;\n\n    /**\n     * @param InstallData $installData\n     *\n     * @return static\n     * @throws InvalidArgumentException\n     * @throws SPException\n     * @throws EnvironmentIsBrokenException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     */\n    public function run(InstallData $installData)\n    {\n        $this->installData = $installData;\n\n        $this->checkData();\n        $this->install();\n\n        return $this;\n    }\n\n    /**\n     * @throws InvalidArgumentException\n     */\n    private function checkData()\n    {\n        if (empty($this->installData->getAdminLogin())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the admin username'),\n                SPException::ERROR,\n                __u('Admin user to log into the application'));\n        }\n\n        if (empty($this->installData->getAdminPass())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the admin\\'s password'),\n                SPException::ERROR,\n                __u('Application administrator\\'s password'));\n        }\n\n        if (empty($this->installData->getMasterPassword())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the Master Password'),\n                SPException::ERROR,\n                __u('Master password to encrypt the passwords'));\n        }\n\n        if (strlen($this->installData->getMasterPassword()) < 11) {\n            throw new InvalidArgumentException(\n                __u('Master password too short'),\n                SPException::CRITICAL,\n                __u('The Master Password length need to be at least 11 characters'));\n        }\n\n        if (empty($this->installData->getDbAdminUser())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database user'),\n                SPException::CRITICAL,\n                __u('An user with database administrative rights'));\n        }\n\n        if (empty($this->installData->getDbAdminPass()) && APP_MODULE !== 'tests') {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database password'),\n                SPException::ERROR,\n                __u('Database administrator\\'s password'));\n        }\n\n        if (empty($this->installData->getDbName())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database name'),\n                SPException::ERROR,\n                __u('Application database name. eg. syspass'));\n        }\n\n        if (substr_count($this->installData->getDbName(), '.') >= 1) {\n            throw new InvalidArgumentException(\n                __u('Database name cannot contain \".\"'),\n                SPException::CRITICAL,\n                __u('Please, remove dots in database name'));\n        }\n\n        if (empty($this->installData->getDbHost())) {\n            throw new InvalidArgumentException(\n                __u('Please, enter the database server'),\n                SPException::ERROR,\n                __u('Server where the database will be installed'));\n        }\n    }\n\n    /**\n     * Iniciar instalaci\u00f3n.\n     *\n     * @throws SPException\n     * @throws EnvironmentIsBrokenException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     * @throws ConstraintException\n     * @throws QueryException\n     */\n    private function install()\n    {\n        $this->setupDbHost();\n        $this->setupConfig();\n        $this->setupDb();\n\n        $this->updateConnectionData();\n        $this->saveMasterPassword();\n        $this->createAdminAccount();\n\n        $version = VersionUtil::getVersionStringNormalized();\n\n        $this->dic->get(ConfigService::class)\n            ->create(new \\SP\\DataModel\\ConfigData('version', $version));\n\n        $this->configData->setInstalled(true);\n\n        $this->config->saveConfig($this->configData, false);\n    }\n\n    /**\n     * Setup database connection data\n     */\n    private function setupDbHost()\n    {\n        if (preg_match('/^(?:(?P<host>.*):(?P<port>\\d{1,5}))|^(?:unix:(?P<socket>.*))/', $this->installData->getDbHost(), $match)) {\n            if (!empty($match['socket'])) {\n                $this->installData->setDbSocket($match['socket']);\n            } else {\n                $this->installData->setDbHost($match['host']);\n                $this->installData->setDbPort($match['port']);\n            }\n        } else {\n            $this->installData->setDbPort(3306);\n        }\n\n        if (strpos('localhost', $this->installData->getDbHost()) === false\n            && strpos('127.0.0.1', $this->installData->getDbHost()) === false\n        ) {\n            if (APP_MODULE === 'tests') {\n                $address = SELF_IP_ADDRESS;\n            } else {\n                $address = $this->request->getServer('SERVER_ADDR');\n            }\n\n            $this->installData->setDbAuthHost($address);\n            $this->installData->setDbAuthHostDns(gethostbyaddr($address));\n        } else {\n            $this->installData->setDbAuthHost('localhost');\n        }\n    }\n\n    /**\n     * Setup sysPass config data\n     */\n    private function setupConfig()\n    {\n        // Sets version and remove upgrade key\n        $this->configData->setConfigVersion(VersionUtil::getVersionStringNormalized());\n        $this->configData->setDatabaseVersion(VersionUtil::getVersionStringNormalized());\n        $this->configData->setUpgradeKey(null);\n\n        // Set DB connection info\n        $this->configData->setDbHost($this->installData->getDbHost());\n        $this->configData->setDbSocket($this->installData->getDbSocket());\n        $this->configData->setDbPort($this->installData->getDbPort());\n        $this->configData->setDbName($this->installData->getDbName());\n\n        // Set site config\n        $this->configData->setSiteLang($this->installData->getSiteLang());\n\n        $this->config->updateConfig($this->configData);\n    }\n\n    /**\n     * @param string $type\n     *\n     * @throws SPException\n     */\n    private function setupDb($type = 'mysql')\n    {\n        switch ($type) {\n            case 'mysql':\n                $this->dbs = new MySQL($this->installData, $this->configData);\n                break;\n        }\n\n        // Si no es modo hosting se crea un hash para la clave y un usuario con prefijo \"sp_\" para la DB\n        if ($this->installData->isHostingMode()) {\n            // Guardar el usuario/clave de conexi\u00f3n a la BD\n            $this->configData->setDbUser($this->installData->getDbAdminUser());\n            $this->configData->setDbPass($this->installData->getDbAdminPass());\n        } else {\n            $this->dbs->setupDbUser();\n        }\n\n        $this->dbs->createDatabase();\n        $this->dbs->createDBStructure();\n        $this->dbs->checkConnection();\n    }\n\n    /**\n     * Setup database connection for sysPass.\n     *\n     * Updates the database storage interface in the dependency container\n     */\n    private function updateConnectionData()\n    {\n        $this->dic->set(DBStorageInterface::class, $this->dbs->createDbHandlerFromInstaller());\n        $this->dic->set(\n            Database::class,\n            new Database(\n                $this->dic->get(DBStorageInterface::class),\n                $this->dic->get(EventDispatcher::class)\n            )\n        );\n    }\n\n    /**\n     * Saves the master password metadata\n     *\n     * @throws SPException\n     */\n    private function saveMasterPassword()\n    {\n        try {\n            // This service needs to be called after a successful database setup, since\n            // DI container stores the definition on its first call, so it would contain\n            // an incomplete database setup\n            $configService = $this->dic->get(ConfigService::class);\n\n            $configService->create(new \\SP\\DataModel\\ConfigData('masterPwd', Hash::hashKey($this->installData->getMasterPassword())));\n            $configService->create(new \\SP\\DataModel\\ConfigData('lastupdatempass', time()));\n        } catch (Exception $e) {\n            processException($e);\n\n            $this->dbs->rollback();\n\n            throw new SPException(\n                $e->getMessage(),\n                SPException::CRITICAL,\n                __u('Warn to developer'),\n                $e->getCode(),\n                $e\n            );\n        }\n    }\n\n    /**\n     * Crear el usuario admin de sysPass.\n     * Esta funci\u00f3n crea el grupo, perfil y usuario 'admin' para utilizar sysPass.\n     *\n     * @throws SPException\n     * @throws ContainerExceptionInterface\n     * @throws NotFoundExceptionInterface\n     */\n    private function createAdminAccount()\n    {\n        try {\n            $userGroupData = new UserGroupData();\n            $userGroupData->setName('Admins');\n            $userGroupData->setDescription('sysPass Admins');\n\n            $userProfileData = new UserProfileData();\n            $userProfileData->setName('Admin');\n            $userProfileData->setProfile(new ProfileData());\n\n            $userService = $this->dic->get(UserService::class);\n            $userGroupService = $this->dic->get(UserGroupService::class);\n            $userProfileService = $this->dic->get(UserProfileService::class);\n\n            // Datos del usuario\n            $userData = new UserData();\n            $userData->setUserGroupId($userGroupService->create($userGroupData));\n            $userData->setUserProfileId($userProfileService->create($userProfileData));\n            $userData->setLogin($this->installData->getAdminLogin());\n            $userData->setName('sysPass Admin');\n            $userData->setIsAdminApp(1);\n\n            $id = $userService->createWithMasterPass($userData, $this->installData->getAdminPass(), $this->installData->getMasterPassword());\n\n            if ($id === 0) {\n                throw new SPException(__u('Error while creating \\'admin\\' user'));\n            }\n        } catch (Exception $e) {\n            processException($e);\n\n            $this->dbs->rollback();\n\n            throw new SPException(\n                $e->getMessage(),\n                SPException::CRITICAL,\n                __u('Warn to developer'),\n                $e->getCode(),\n                $e\n            );\n        }\n    }\n\n    /**\n     * initialize\n     */\n    protected function initialize()\n    {\n        $this->configData = $this->config->getConfigData();\n        $this->request = $this->dic->get(Request::class);\n    }\n}"], "filenames": ["app/modules/web/themes/material-blue/views/account/account-editpass.inc", "app/modules/web/themes/material-blue/views/account/account-history.inc", "app/modules/web/themes/material-blue/views/account/account.inc", "app/modules/web/themes/material-blue/views/account/search-rows.inc", "app/modules/web/themes/material-blue/views/config/general-auth.inc", "app/modules/web/themes/material-blue/views/config/general-events.inc", "app/modules/web/themes/material-blue/views/config/general-proxy.inc", "app/modules/web/themes/material-blue/views/config/general-site.inc", "app/modules/web/themes/material-blue/views/config/ldap.inc", "app/modules/web/themes/material-blue/views/config/mail.inc", "app/modules/web/themes/material-blue/views/config/wiki-dokuwiki.inc", "app/modules/web/themes/material-blue/views/config/wiki.inc", "lib/SP/Services/Install/Installer.php"], "buggy_code_start_loc": [66, 113, 167, 105, 77, 86, 52, 121, 127, 76, 90, 77, 63], "buggy_code_end_loc": [67, 114, 168, 112, 78, 87, 84, 122, 263, 177, 145, 113, 66], "fixing_code_start_loc": [66, 113, 167, 105, 77, 86, 52, 121, 127, 76, 90, 77, 63], "fixing_code_end_loc": [67, 114, 168, 112, 78, 87, 84, 122, 263, 177, 145, 113, 66], "type": "CWE-79", "message": "A vulnerability classified as problematic was found in nuxsmin sysPass up to 3.2.4. Affected by this vulnerability is an unknown functionality of the component URL Handler. The manipulation leads to cross site scripting. The attack can be launched remotely. Upgrading to version 3.2.5 is able to address this issue. The name of the patch is 4da4d031732ecca67519851fd0c34597dbb8ee55. It is recommended to upgrade the affected component. The associated identifier of this vulnerability is VDB-222319.", "other": {"cve": {"id": "CVE-2022-4930", "sourceIdentifier": "cna@vuldb.com", "published": "2023-03-06T16:15:09.593", "lastModified": "2023-03-13T18:33:32.357", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability classified as problematic was found in nuxsmin sysPass up to 3.2.4. Affected by this vulnerability is an unknown functionality of the component URL Handler. The manipulation leads to cross site scripting. The attack can be launched remotely. Upgrading to version 3.2.5 is able to address this issue. The name of the patch is 4da4d031732ecca67519851fd0c34597dbb8ee55. It is recommended to upgrade the affected component. The associated identifier of this vulnerability is VDB-222319."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 3.5, "baseSeverity": "LOW"}, "exploitabilityScore": 2.1, "impactScore": 1.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:syspass:syspass:*:*:*:*:*:*:*:*", "versionEndIncluding": "3.2.4", "matchCriteriaId": "20017A3C-7023-4E84-AF68-6C2C3B4F9DBF"}]}]}], "references": [{"url": "https://github.com/nuxsmin/sysPass/commit/4da4d031732ecca67519851fd0c34597dbb8ee55", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://github.com/nuxsmin/sysPass/pull/1832", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://github.com/nuxsmin/sysPass/releases/tag/3.2.5", "source": "cna@vuldb.com", "tags": ["Release Notes"]}, {"url": "https://vuldb.com/?ctiid.222319", "source": "cna@vuldb.com", "tags": ["Permissions Required", "Third Party Advisory"]}, {"url": "https://vuldb.com/?id.222319", "source": "cna@vuldb.com", "tags": ["Third Party Advisory"]}]}, "github_commit_url": "https://github.com/nuxsmin/sysPass/commit/4da4d031732ecca67519851fd0c34597dbb8ee55"}}