{"buggy_code": ["<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\nauth_check($auth[$sub_menu], 'w');\n\nif ($is_admin != 'super' && $w == '') alert('\ucd5c\uace0\uad00\ub9ac\uc790\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4.');\n\n$html_title = '\uac8c\uc2dc\ud310\uadf8\ub8f9';\n$gr_id_attr = '';\n$sound_only = '';\nif ($w == '') {\n    $gr_id_attr = 'required';\n    $sound_only = '<strong class=\"sound_only\"> \ud544\uc218</strong>';\n    $gr['gr_use_access'] = 0;\n    $html_title .= ' \uc0dd\uc131';\n} else if ($w == 'u') {\n    $gr_id_attr = 'readonly';\n    $gr = sql_fetch(\" select * from {$g5['group_table']} where gr_id = '$gr_id' \");\n    $html_title .= ' \uc218\uc815';\n}\nelse\n    alert('\uc81c\ub300\ub85c \ub41c \uac12\uc774 \ub118\uc5b4\uc624\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.');\n\nif (!isset($group['gr_device'])) {\n    sql_query(\" ALTER TABLE `{$g5['group_table']}` ADD `gr_device` ENUM('both','pc','mobile') NOT NULL DEFAULT 'both' AFTER `gr_subject` \", false);\n}\n\n\n$g5['title'] = $html_title;\ninclude_once('./admin.head.php');\n?>\n\n<form name=\"fboardgroup\" id=\"fboardgroup\" action=\"./boardgroup_form_update.php\" onsubmit=\"return fboardgroup_check(this);\" method=\"post\" autocomplete=\"off\">\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w ?>\">\n<input type=\"hidden\" name=\"sfl\" value=\"<?php echo $sfl ?>\">\n<input type=\"hidden\" name=\"stx\" value=\"<?php echo $stx ?>\">\n<input type=\"hidden\" name=\"sst\" value=\"<?php echo $sst ?>\">\n<input type=\"hidden\" name=\"sod\" value=\"<?php echo $sod ?>\">\n<input type=\"hidden\" name=\"page\" value=\"<?php echo $page ?>\">\n<input type=\"hidden\" name=\"token\" value=\"\">\n\n<div class=\"tbl_frm01 tbl_wrap\">\n    <table>\n    <caption><?php echo $g5['title']; ?></caption>\n    <colgroup>\n        <col class=\"grid_4\">\n        <col>\n    </colgroup>\n    <tbody>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_id\">\uadf8\ub8f9 ID<?php echo $sound_only ?></label></th>\n        <td><input type=\"text\" name=\"gr_id\" value=\"<?php echo $group['gr_id'] ?>\" id=\"gr_id\" <?php echo $gr_id_attr; ?> class=\"<?php echo $gr_id_attr; ?> alnum_ frm_input\" maxlength=\"10\">\n            <?php\n            if ($w=='')\n                echo '\uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5 (\uacf5\ubc31\uc5c6\uc774)';\n            else\n                echo '<a href=\"'.G5_BBS_URL.'/group.php?gr_id='.$group['gr_id'].'\" class=\"btn_frmline\">\uac8c\uc2dc\ud310\uadf8\ub8f9 \ubc14\ub85c\uac00\uae30</a>';\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_subject\">\uadf8\ub8f9 \uc81c\ubaa9<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\n        <td>\n            <input type=\"text\" name=\"gr_subject\" value=\"<?php echo get_text($group['gr_subject']) ?>\" id=\"gr_subject\" required class=\"required frm_input\" size=\"80\">\n            <?php\n            if ($w == 'u')\n                echo '<a href=\"./board_form.php?gr_id='.$gr_id.'\" class=\"btn_frmline\">\uac8c\uc2dc\ud310\uc0dd\uc131</a>';\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_device\">\uc811\uc18d\uae30\uae30</label></th>\n        <td>\n            <?php echo help(\"PC \uc640 \ubaa8\ubc14\uc77c \uc0ac\uc6a9\uc744 \uad6c\ubd84\ud569\ub2c8\ub2e4.\") ?>\n            <select id=\"gr_device\" name=\"gr_device\">\n                <option value=\"both\"<?php echo get_selected($group['gr_device'], 'both', true); ?>>PC\uc640 \ubaa8\ubc14\uc77c\uc5d0\uc11c \ubaa8\ub450 \uc0ac\uc6a9</option>\n                <option value=\"pc\"<?php echo get_selected($group['gr_device'], 'pc'); ?>>PC \uc804\uc6a9</option>\n                <option value=\"mobile\"<?php echo get_selected($group['gr_device'], 'mobile'); ?>>\ubaa8\ubc14\uc77c \uc804\uc6a9</option>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><?php if ($is_admin == 'super') { ?><label for=\"gr_admin\"><?php } ?>\uadf8\ub8f9 \uad00\ub9ac\uc790<?php if ($is_admin == 'super') { ?></label><?php } ?></th>\n        <td>\n            <?php\n            if ($is_admin == 'super')\n                echo '<input type=\"text\" id=\"gr_admin\" name=\"gr_admin\" class=\"frm_input\" value=\"'.$gr['gr_admin'].'\" maxlength=\"20\">';\n            else\n                echo '<input type=\"hidden\" id=\"gr_admin\" name=\"gr_admin\" value=\"'.$gr['gr_admin'].'\">'.$gr['gr_admin'];\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_use_access\">\uc811\uadfc\ud68c\uc6d0\uc0ac\uc6a9</label></th>\n        <td>\n            <?php echo help(\"\uc0ac\uc6a9\uc5d0 \uccb4\ud06c\ud558\uc2dc\uba74 \uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc740 \uc811\uadfc\uac00\ub2a5\ud55c \ud68c\uc6d0\ub9cc \uc811\uadfc\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\") ?>\n            <input type=\"checkbox\" name=\"gr_use_access\" value=\"1\" id=\"gr_use_access\" <?php echo $gr['gr_use_access']?'checked':''; ?>>\n            \uc0ac\uc6a9\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\">\uc811\uadfc\ud68c\uc6d0\uc218</th>\n        <td>\n            <?php\n            // \uc811\uadfc\ud68c\uc6d0\uc218\n            $sql1 = \" select count(*) as cnt from {$g5['group_member_table']} where gr_id = '{$gr_id}' \";\n            $row1 = sql_fetch($sql1);\n            echo '<a href=\"./boardgroupmember_list.php?gr_id='.$gr_id.'\">'.$row1['cnt'].'</a>';\n            ?>\n        </td>\n    </tr>\n    <?php for ($i=1;$i<=10;$i++) { ?>\n    <tr>\n        <th scope=\"row\">\uc5ec\ubd84\ud544\ub4dc<?php echo $i ?></th>\n        <td class=\"td_extra\">\n            <label for=\"gr_<?php echo $i ?>_subj\">\uc5ec\ubd84\ud544\ub4dc <?php echo $i ?> \uc81c\ubaa9</label>\n            <input type=\"text\" name=\"gr_<?php echo $i ?>_subj\" value=\"<?php echo get_text($group['gr_'.$i.'_subj']) ?>\" id=\"gr_<?php echo $i ?>_subj\" class=\"frm_input\">\n            <label for=\"gr_<?php echo $i ?>\">\uc5ec\ubd84\ud544\ub4dc <?php echo $i ?> \ub0b4\uc6a9</label>\n            <input type=\"text\" name=\"gr_<?php echo $i ?>\" value=\"<?php echo $gr['gr_'.$i] ?>\" id=\"gr_<?php echo $i ?>\" class=\"frm_input\">\n        </td>\n    </tr>\n    <?php } ?>\n    </tbody>\n    </table>\n</div>\n\n<div class=\"btn_fixed_top\">\n    <a href=\"./boardgroup_list.php?<?php echo $qstr ?>\" class=\"btn btn_02\">\ubaa9\ub85d</a>\n    <input type=\"submit\" class=\"btn_submit btn\" accesskey=\"s\" value=\"\ud655\uc778\">\n</div>\n\n</form>\n\n<div class=\"local_desc01 local_desc\">\n    <p>\n        \uac8c\uc2dc\ud310\uc744 \uc0dd\uc131\ud558\uc2dc\ub824\uba74 1\uac1c \uc774\uc0c1\uc758 \uac8c\uc2dc\ud310\uadf8\ub8f9\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.<br>\n        \uac8c\uc2dc\ud310\uadf8\ub8f9\uc744 \uc774\uc6a9\ud558\uc2dc\uba74 \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \uac8c\uc2dc\ud310\uc744 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n    </p>\n</div>\n\n<script>\nfunction fboardgroup_check(f)\n{\n    f.action = './boardgroup_form_update.php';\n    return true;\n}\n</script>\n\n<?php\ninclude_once ('./admin.tail.php');\n?>\n", "<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\nif ($w == 'u')\n    check_demo();\n\nauth_check($auth[$sub_menu], 'w');\n\nif ($is_admin != 'super' && $w == '') alert('\ucd5c\uace0\uad00\ub9ac\uc790\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4.');\n\ncheck_admin_token();\n\nif (!preg_match(\"/^([A-Za-z0-9_]{1,10})$/\", $_POST['gr_id']))\n    alert('\uadf8\ub8f9 ID\ub294 \uacf5\ubc31\uc5c6\uc774 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uc0ac\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4. (10\uc790 \uc774\ub0b4)');\n\nif (!$gr_subject) alert('\uadf8\ub8f9 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.');\n\n$sql_common = \" gr_subject = '{$_POST['gr_subject']}',\n                gr_device = '{$_POST['gr_device']}',\n                gr_admin  = '{$_POST['gr_admin']}',\n                gr_1_subj = '{$_POST['gr_1_subj']}',\n                gr_2_subj = '{$_POST['gr_2_subj']}',\n                gr_3_subj = '{$_POST['gr_3_subj']}',\n                gr_4_subj = '{$_POST['gr_4_subj']}',\n                gr_5_subj = '{$_POST['gr_5_subj']}',\n                gr_6_subj = '{$_POST['gr_6_subj']}',\n                gr_7_subj = '{$_POST['gr_7_subj']}',\n                gr_8_subj = '{$_POST['gr_8_subj']}',\n                gr_9_subj = '{$_POST['gr_9_subj']}',\n                gr_10_subj = '{$_POST['gr_10_subj']}',\n                gr_1 = '{$_POST['gr_1']}',\n                gr_2 = '{$_POST['gr_2']}',\n                gr_3 = '{$_POST['gr_3']}',\n                gr_4 = '{$_POST['gr_4']}',\n                gr_5 = '{$_POST['gr_5']}',\n                gr_6 = '{$_POST['gr_6']}',\n                gr_7 = '{$_POST['gr_7']}',\n                gr_8 = '{$_POST['gr_8']}',\n                gr_9 = '{$_POST['gr_9']}',\n                gr_10 = '{$_POST['gr_10']}' \";\nif (isset($_POST['gr_use_access']))\n    $sql_common .= \", gr_use_access = '{$_POST['gr_use_access']}' \";\nelse\n    $sql_common .= \", gr_use_access = '' \";\n\nif ($w == '') {\n\n    $sql = \" select count(*) as cnt from {$g5['group_table']} where gr_id = '{$_POST['gr_id']}' \";\n    $row = sql_fetch($sql);\n    if ($row['cnt'])\n        alert('\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uadf8\ub8f9 ID \uc785\ub2c8\ub2e4.');\n\n    $sql = \" insert into {$g5['group_table']}\n                set gr_id = '{$_POST['gr_id']}',\n                     {$sql_common} \";\n    sql_query($sql);\n\n} else if ($w == \"u\") {\n\n    $sql = \" update {$g5['group_table']}\n                set {$sql_common}\n                where gr_id = '{$_POST['gr_id']}' \";\n    sql_query($sql);\n\n} else {\n    alert('\uc81c\ub300\ub85c \ub41c \uac12\uc774 \ub118\uc5b4\uc624\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.');\n}\n\ngoto_url('./boardgroup_form.php?w=u&amp;gr_id='.$gr_id.'&amp;'.$qstr);\n?>\n", "<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\n//print_r2($_POST); exit;\n\ncheck_demo();\n\nauth_check($auth[$sub_menu], 'w');\n\ncheck_admin_token();\n\n$count = count($_POST['chk']);\n\nif(!$count)\n    alert($_POST['act_button'].'\ud560 \uac8c\uc2dc\ud310\uadf8\ub8f9\uc744 1\uac1c\uc774\uc0c1 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.');\n\nfor ($i=0; $i<$count; $i++)\n{\n    $k     = $_POST['chk'][$i];\n    $gr_id = $_POST['group_id'][$k];\n\n    if($_POST['act_button'] == '\uc120\ud0dd\uc218\uc815') {\n        $sql = \" update {$g5['group_table']}\n                    set gr_subject    = '{$_POST['gr_subject'][$k]}',\n                        gr_device     = '{$_POST['gr_device'][$k]}',\n                        gr_admin      = '{$_POST['gr_admin'][$k]}',\n                        gr_use_access = '{$_POST['gr_use_access'][$k]}',\n                        gr_order      = '{$_POST['gr_order'][$k]}'\n                  where gr_id         = '{$gr_id}' \";\n        if ($is_admin != 'super')\n            $sql .= \" and gr_admin    = '{$_POST['gr_admin'][$k]}' \";\n        sql_query($sql);\n    } else if($_POST['act_button'] == '\uc120\ud0dd\uc0ad\uc81c') {\n        $row = sql_fetch(\" select count(*) as cnt from {$g5['board_table']} where gr_id = '$gr_id' \");\n        if ($row['cnt'])\n            alert(\"\uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc774 \uc874\uc7ac\ud558\uc5ec \uac8c\uc2dc\ud310 \uadf8\ub8f9\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\\\n\\\\n\uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc744 \uba3c\uc800 \uc0ad\uc81c\ud558\uc5ec \uc8fc\uc2ed\uc2dc\uc624.\", './board_list.php?sfl=gr_id&amp;stx='.$gr_id);\n\n        // \uadf8\ub8f9 \uc0ad\uc81c\n        sql_query(\" delete from {$g5['group_table']} where gr_id = '$gr_id' \");\n\n        // \uadf8\ub8f9\uc811\uadfc \ud68c\uc6d0 \uc0ad\uc81c\n        sql_query(\" delete from {$g5['group_member_table']} where gr_id = '$gr_id' \");\n    }\n}\n\ngoto_url('./boardgroup_list.php?'.$qstr);\n?>\n", "<?php\r\n$sub_menu = '300600';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n// \uc0c1\ub2e8, \ud558\ub2e8 \ud30c\uc77c\uacbd\ub85c \ud544\ub4dc \ucd94\uac00\r\nif(!sql_query(\" select co_include_head from {$g5['content_table']} limit 1 \", false)) {\r\n    $sql = \" ALTER TABLE `{$g5['content_table']}`  ADD `co_include_head` VARCHAR( 255 ) NOT NULL ,\r\n                                                    ADD `co_include_tail` VARCHAR( 255 ) NOT NULL \";\r\n    sql_query($sql, false);\r\n}\r\n\r\n// html purifier \uc0ac\uc6a9\uc5ec\ubd80 \ud544\ub4dc\r\nif(!sql_query(\" select co_tag_filter_use from {$g5['content_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_tag_filter_use` tinyint(4) NOT NULL DEFAULT '0' AFTER `co_content` \", true);\r\n    sql_query(\" update {$g5['content_table']} set co_tag_filter_use = '1' \");\r\n}\r\n\r\n// \ubaa8\ubc14\uc77c \ub0b4\uc6a9 \ucd94\uac00\r\nif(!sql_query(\" select co_mobile_content from {$g5['content_table']} limit 1\", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_mobile_content` longtext NOT NULL AFTER `co_content` \", true);\r\n}\r\n\r\n// \uc2a4\ud0a8 \uc124\uc815 \ucd94\uac00\r\nif(!sql_query(\" select co_skin from {$g5['content_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_skin` varchar(255) NOT NULL DEFAULT '' AFTER `co_mobile_content`,\r\n                    ADD `co_mobile_skin` varchar(255) NOT NULL DEFAULT '' AFTER `co_skin` \", true);\r\n    sql_query(\" update {$g5['content_table']} set co_skin = 'basic', co_mobile_skin = 'basic' \");\r\n}\r\n\r\n$html_title = \"\ub0b4\uc6a9\";\r\n$g5['title'] = $html_title.' \uad00\ub9ac';\r\n\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= \" \uc218\uc815\";\r\n    $readonly = \" readonly\";\r\n\r\n    $sql = \" select * from {$g5['content_table']} where co_id = '$co_id' \";\r\n    $co = sql_fetch($sql);\r\n    if (!$co['co_id'])\r\n        alert('\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n}\r\nelse\r\n{\r\n    $html_title .= ' \uc785\ub825';\r\n    $co['co_html'] = 2;\r\n    $co['co_skin'] = 'basic';\r\n    $co['co_mobile_skin'] = 'basic';\r\n}\r\n\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmcontentform\" action=\"./contentformupdate.php\" onsubmit=\"return frmcontentform_check(this);\" method=\"post\" enctype=\"MULTIPART/FORM-DATA\" >\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"co_html\" value=\"1\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?> \ubaa9\ub85d</caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_id\">ID</label></th>\r\n        <td>\r\n            <?php echo help('20\uc790 \uc774\ub0b4\uc758 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.'); ?>\r\n            <input type=\"text\" value=\"<?php echo $co['co_id']; ?>\" name=\"co_id\" id =\"co_id\" required <?php echo $readonly; ?> class=\"required <?php echo $readonly; ?> frm_input\" size=\"20\" maxlength=\"20\">\r\n            <?php if ($w == 'u') { ?><a href=\"<?php echo G5_BBS_URL; ?>/content.php?co_id=<?php echo $co_id; ?>\" class=\"btn_frmline\">\ub0b4\uc6a9\ud655\uc778</a><?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_subject\">\uc81c\ubaa9</label></th>\r\n        <td><input type=\"text\" name=\"co_subject\" value=\"<?php echo htmlspecialchars2($co['co_subject']); ?>\" id=\"co_subject\" required class=\"frm_input required\" size=\"90\"></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ub0b4\uc6a9</th>\r\n        <td><?php echo editor_html('co_content', get_text($co['co_content'], 0)); ?></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c \ub0b4\uc6a9</th>\r\n        <td><?php echo editor_html('co_mobile_content', get_text($co['co_mobile_content'], 0)); ?></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_skin\">\uc2a4\ud0a8 \ub514\ub809\ud1a0\ub9ac<strong class=\"sound_only\">\ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo get_skin_select('content', 'co_skin', 'co_skin', $co['co_skin'], 'required'); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_mobile_skin\">\ubaa8\ubc14\uc77c\uc2a4\ud0a8 \ub514\ub809\ud1a0\ub9ac<strong class=\"sound_only\">\ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo get_mobile_skin_select('content', 'co_mobile_skin', 'co_mobile_skin', $co['co_mobile_skin'], 'required'); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_tag_filter_use\">\ud0dc\uadf8 \ud544\ud130\ub9c1 \uc0ac\uc6a9</label></th>\r\n        <td>\r\n            <?php echo help(\"\ub0b4\uc6a9\uc5d0\uc11c iframe \ub4f1\uc758 \ud0dc\uadf8\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 \uc0ac\uc6a9\uc548\ud568\uc73c\ub85c \uc120\ud0dd\ud574 \uc8fc\uc2ed\uc2dc\uc624.\"); ?>\r\n            <select name=\"co_tag_filter_use\" id=\"co_tag_filter_use\">\r\n                <option value=\"1\"<?php echo get_selected(1, $co['co_tag_filter_use']); ?>>\uc0ac\uc6a9\ud568</option>\r\n                <option value=\"0\"<?php echo get_selected(0, $co['co_tag_filter_use']); ?>>\uc0ac\uc6a9\uc548\ud568</option>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_include_head\">\uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c</label></th>\r\n        <td>\r\n            <?php echo help(\"\uc124\uc815\uac12\uc774 \uc5c6\uc73c\uba74 \uae30\ubcf8 \uc0c1\ub2e8 \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"co_include_head\" value=\"<?php echo $co['co_include_head']; ?>\" id=\"co_include_head\" class=\"frm_input\" size=\"60\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_include_tail\">\ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c</label></th>\r\n        <td>\r\n            <?php echo help(\"\uc124\uc815\uac12\uc774 \uc5c6\uc73c\uba74 \uae30\ubcf8 \ud558\ub2e8 \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"co_include_tail\" value=\"<?php echo $co['co_include_tail']; ?>\" id=\"co_include_tail\" class=\"frm_input\" size=\"60\">\r\n        </td>\r\n    </tr>\r\n    <tr id=\"admin_captcha_box\" style=\"display:none;\">\r\n        <th scope=\"row\">\uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0</th>\r\n        <td>\r\n            <?php\r\n            echo help(\"\ud30c\uc77c \uacbd\ub85c\ub97c \uc785\ub825 \ub610\ub294 \uc218\uc815\uc2dc \ucea1\ucc60\ub97c \ubc18\ub4dc\uc2dc \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4.\");\r\n\r\n            include_once(G5_CAPTCHA_PATH.'/captcha.lib.php');\r\n            $captcha_html = captcha_html();\r\n            $captcha_js   = chk_captcha_js();\r\n            echo $captcha_html;\r\n            ?>\r\n            <script>\r\n            jQuery(\"#captcha_key\").removeAttr(\"required\").removeClass(\"required\");\r\n            </script>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_himg\">\uc0c1\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"co_himg\" id=\"co_himg\">\r\n            <?php\r\n            $himg = G5_DATA_PATH.'/content/'.$co['co_id'].'_h';\r\n            if (file_exists($himg)) {\r\n                $size = @getimagesize($himg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"co_himg_del\" value=\"1\" id=\"co_himg_del\"> <label for=\"co_himg_del\">\uc0ad\uc81c</label>';\r\n                $himg_str = '<img src=\"'.G5_DATA_URL.'/content/'.$co['co_id'].'_h\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($himg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $himg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_timg\">\ud558\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"co_timg\" id=\"co_timg\">\r\n            <?php\r\n            $timg = G5_DATA_PATH.'/content/'.$co['co_id'].'_t';\r\n            if (file_exists($timg)) {\r\n                $size = @getimagesize($timg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"co_timg_del\" value=\"1\" id=\"co_timg_del\"> <label for=\"co_timg_del\">\uc0ad\uc81c</label>';\r\n                $timg_str = '<img src=\"'.G5_DATA_URL.'/content/'.$co['co_id'].'_t\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($timg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $timg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./contentlist.php\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn btn_submit\" accesskey=\"s\">\r\n</div>\r\n\r\n</form>\r\n\r\n<?php\r\n// [KVE-2018-2089] \ucde8\uc57d\uc810 \uc73c\ub85c \uc778\ud574 \ud30c\uc77c \uacbd\ub85c \uc218\uc815\uc2dc\uc5d0\ub9cc \uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0 \ucf54\ub4dc \uc0ac\uc6a9\r\n?>\r\n<script>\r\nvar captcha_chk = false;\r\n\r\nfunction use_captcha_check(){\r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: g5_admin_url+\"/ajax.use_captcha.php\",\r\n        data: { admin_use_captcha: \"1\" },\r\n        cache: false,\r\n        async: false,\r\n        dataType: \"json\",\r\n        success: function(data) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction frm_check_file(){\r\n    var co_include_head = \"<?php echo $co['co_include_head']; ?>\";\r\n    var co_include_tail = \"<?php echo $co['co_include_tail']; ?>\";\r\n    var head = jQuery.trim(jQuery(\"#co_include_head\").val());\r\n    var tail = jQuery.trim(jQuery(\"#co_include_tail\").val());\r\n\r\n    if(co_include_head !== head || co_include_tail !== tail){\r\n        // \ucea1\ucc60\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\r\n        jQuery(\"#admin_captcha_box\").show();\r\n        captcha_chk = true;\r\n\r\n        use_captcha_check();\r\n\r\n        return false;\r\n    } else {\r\n        jQuery(\"#admin_captcha_box\").hide();\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\njQuery(function($){\r\n    if( window.self !== window.top ){   // frame \ub610\ub294 iframe\uc744 \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \uccb4\ud06c\r\n        $(\"#co_include_head, #co_include_tail\").on(\"change paste keyup\", function(e) {\r\n            frm_check_file();\r\n        });\r\n\r\n        use_captcha_check();\r\n    }\r\n});\r\n\r\nfunction frmcontentform_check(f)\r\n{\r\n    errmsg = \"\";\r\n    errfld = \"\";\r\n\r\n    <?php echo get_editor_js('co_content'); ?>\r\n    <?php echo chk_editor_js('co_content'); ?>\r\n    <?php echo get_editor_js('co_mobile_content'); ?>\r\n\r\n    check_field(f.co_id, \"ID\ub97c \uc785\ub825\ud558\uc138\uc694.\");\r\n    check_field(f.co_subject, \"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n    check_field(f.co_content, \"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n\r\n    if (errmsg != \"\") {\r\n        alert(errmsg);\r\n        errfld.focus();\r\n        return false;\r\n    }\r\n    \r\n    if( captcha_chk ) {\r\n        <?php echo $captcha_js; // \ucea1\ucc60 \uc0ac\uc6a9\uc2dc \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c \uc785\ub825\ub41c \ucea1\ucc60\ub97c \uac80\uc0ac\ud568  ?>\r\n    }\r\n\r\n    return true;\r\n}\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '300600';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($w == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if(preg_match(\"/[^a-z0-9_]/i\", $co_id)) alert(\"ID \ub294 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.\");\r\n\r\n    $sql = \" select * from {$g5['content_table']} where co_id = '$co_id' \";\r\n    $co_row = sql_fetch($sql);\r\n}\r\n\r\n$co_include_head = preg_replace(array(\"#[\\\\\\]+$#\", \"#(<\\?php|<\\?)#i\"), \"\", substr($co_include_head, 0, 255));\r\n$co_include_tail = preg_replace(array(\"#[\\\\\\]+$#\", \"#(<\\?php|<\\?)#i\"), \"\", substr($co_include_tail, 0, 255));\r\n\r\n// \uad00\ub9ac\uc790\uac00 \uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0\ub97c \uc0ac\uc6a9\ud574\uc57c \ud560 \uacbd\uc6b0\r\nif (($co_row['co_include_head'] !== $co_include_head || $co_row['co_include_tail'] !== $co_include_tail) && function_exists('get_admin_captcha_by') && get_admin_captcha_by()){\r\n    include_once(G5_CAPTCHA_PATH.'/captcha.lib.php');\r\n\r\n    if (!chk_captcha()) {\r\n        alert('\uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0 \uc22b\uc790\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\n@mkdir(G5_DATA_PATH.\"/content\", G5_DIR_PERMISSION);\r\n@chmod(G5_DATA_PATH.\"/content\", G5_DIR_PERMISSION);\r\n\r\nif ($co_himg_del)  @unlink(G5_DATA_PATH.\"/content/{$co_id}_h\");\r\nif ($co_timg_del)  @unlink(G5_DATA_PATH.\"/content/{$co_id}_t\");\r\n\r\n$error_msg = '';\r\n\r\nif( $co_include_head ){\r\n\r\n    $file_ext = pathinfo($co_include_head, PATHINFO_EXTENSION);\r\n\r\n    if( ! $file_ext || ! in_array($file_ext, array('php', 'htm', 'html')) || ! preg_match('/^.*\\.(php|htm|html)$/i', $co_include_head) ) {\r\n        alert('\uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc758 \ud655\uc7a5\uc790\ub294 php, htm, html \ub9cc \ud5c8\uc6a9\ud569\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\nif( $co_include_tail ){\r\n\r\n    $file_ext = pathinfo($co_include_tail, PATHINFO_EXTENSION);\r\n\r\n    if( ! $file_ext || ! in_array($file_ext, array('php', 'htm', 'html')) || ! preg_match('/^.*\\.(php|htm|html)$/i', $co_include_tail) ) {\r\n        alert('\ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc758 \ud655\uc7a5\uc790\ub294 php, htm, html \ub9cc \ud5c8\uc6a9\ud569\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\nif( $co_include_head && ! is_include_path_check($co_include_head) ){\r\n    $co_include_head = '';\r\n    $error_msg = '/data/file/ \ub610\ub294 /data/editor/ \ud3ec\ud568\ub41c \ubb38\uc790\ub97c \uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc5d0 \ud3ec\ud568\uc2dc\ud0ac\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.';\r\n}\r\n\r\nif( $co_include_tail && ! is_include_path_check($co_include_tail) ){\r\n    $co_include_tail = '';\r\n    $error_msg = '/data/file/ \ub610\ub294 /data/editor/ \ud3ec\ud568\ub41c \ubb38\uc790\ub97c \ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc5d0 \ud3ec\ud568\uc2dc\ud0ac\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.';\r\n}\r\n\r\n$sql_common = \" co_include_head     = '$co_include_head',\r\n                co_include_tail     = '$co_include_tail',\r\n                co_html             = '$co_html',\r\n                co_tag_filter_use   = '$co_tag_filter_use',\r\n                co_subject          = '$co_subject',\r\n                co_content          = '$co_content',\r\n                co_mobile_content   = '$co_mobile_content',\r\n                co_skin             = '$co_skin',\r\n                co_mobile_skin      = '$co_mobile_skin' \";\r\n\r\nif ($w == \"\")\r\n{\r\n    $row = $co_row;\r\n    if ($row['co_id'])\r\n        alert(\"\uc774\ubbf8 \uac19\uc740 ID\ub85c \ub4f1\ub85d\ub41c \ub0b4\uc6a9\uc774 \uc788\uc2b5\ub2c8\ub2e4.\");\r\n\r\n    $sql = \" insert {$g5['content_table']}\r\n                set co_id = '$co_id',\r\n                    $sql_common \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['content_table']}\r\n                set $sql_common\r\n              where co_id = '$co_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    @unlink(G5_DATA_PATH.\"/content/{$co_id}_h\");\r\n    @unlink(G5_DATA_PATH.\"/content/{$co_id}_t\");\r\n\r\n    $sql = \" delete from {$g5['content_table']} where co_id = '$co_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif(function_exists('get_admin_captcha_by'))\r\n    get_admin_captcha_by('remove');\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if ($_FILES['co_himg']['name'])\r\n    {\r\n        $dest_path = G5_DATA_PATH.\"/content/\".$co_id.\"_h\";\r\n        @move_uploaded_file($_FILES['co_himg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n    if ($_FILES['co_timg']['name'])\r\n    {\r\n        $dest_path = G5_DATA_PATH.\"/content/\".$co_id.\"_t\";\r\n        @move_uploaded_file($_FILES['co_timg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n\r\n    if( $error_msg ){\r\n        alert($error_msg, \"./contentform.php?w=u&amp;co_id=$co_id\");\r\n    } else {\r\n        goto_url(\"./contentform.php?w=u&amp;co_id=$co_id\");\r\n    }\r\n}\r\nelse\r\n{\r\n    goto_url(\"./contentlist.php\");\r\n}\r\n?>\r\n", "<?php\r\n$sub_menu = '300700';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$html_title = 'FAQ';\r\n\r\n$fm_id = preg_replace('/[^0-9]/', '', $fm_id);\r\n\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= ' \uc218\uc815';\r\n    $readonly = ' readonly';\r\n\r\n    $sql = \" select * from {$g5['faq_master_table']} where fm_id = '$fm_id' \";\r\n    $fm = sql_fetch($sql);\r\n    if (!$fm['fm_id']) alert('\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n}\r\nelse\r\n{\r\n    $html_title .= ' \uc785\ub825';\r\n}\r\n\r\n$g5['title'] = $html_title.' \uad00\ub9ac';\r\n\r\n// \ubaa8\ubc14\uc77c \uc0c1\ud558\ub2e8 \ub0b4\uc6a9 \ud544\ub4dc\ucd94\uac00\r\nif(!sql_query(\" select fm_mobile_head_html from {$g5['faq_master_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['faq_master_table']}`\r\n                    ADD `fm_mobile_head_html` text NOT NULL AFTER `fm_tail_html`,\r\n                    ADD `fm_mobile_tail_html` text NOT NULL AFTER `fm_mobile_head_html` \", true);\r\n}\r\n\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmfaqmasterform\" action=\"./faqmasterformupdate.php\" onsubmit=\"return frmfaqmasterform_check(this);\" method=\"post\" enctype=\"MULTIPART/FORM-DATA\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"fm_id\" value=\"<?php echo $fm_id; ?>\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_order\">\ucd9c\ub825\uc21c\uc11c</label></th>\r\n        <td>\r\n            <?php echo help('\uc22b\uc790\uac00 \uc791\uc744\uc218\ub85d FAQ \ubd84\ub958\uc5d0\uc11c \uba3c\uc800 \ucd9c\ub825\ub429\ub2c8\ub2e4.'); ?>\r\n            <input type=\"text\" name=\"fm_order\" value=\"<?php echo $fm['fm_order']; ?>\" id=\"fm_order\" class=\"frm_input\" maxlength=\"10\" size=\"10\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_subject\">\uc81c\ubaa9</label></th>\r\n        <td>\r\n            <input type=\"text\" value=\"<?php echo get_text($fm['fm_subject']); ?>\" name=\"fm_subject\" id=\"fm_subject\" required class=\"frm_input required\"  size=\"70\">\r\n            <?php if ($w == 'u') { ?>\r\n            <a href=\"<?php echo G5_BBS_URL; ?>/faq.php?fm_id=<?php echo $fm_id; ?>\" class=\"btn_frmline\">\ubcf4\uae30</a>\r\n            <a href=\"./faqlist.php?fm_id=<?php echo $fm_id; ?>\" class=\"btn_frmline\">\uc0c1\uc138\ubcf4\uae30</a>\r\n            <?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_himg\">\uc0c1\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"fm_himg\" id=\"fm_himg\">\r\n            <?php\r\n            $himg = G5_DATA_PATH.'/faq/'.$fm['fm_id'].'_h';\r\n            if (file_exists($himg)) {\r\n                $size = @getimagesize($himg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"fm_himg_del\" value=\"1\" id=\"fm_himg_del\"> <label for=\"fm_himg_del\">\uc0ad\uc81c</label>';\r\n                $himg_str = '<img src=\"'.G5_DATA_URL.'/faq/'.$fm['fm_id'].'_h\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($himg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $himg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_timg\">\ud558\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"fm_timg\" id=\"fm_timg\">\r\n            <?php\r\n            $timg = G5_DATA_PATH.'/faq/'.$fm['fm_id'].'_t';\r\n            if (file_exists($timg)) {\r\n                $size = @getimagesize($timg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"fm_timg_del\" value=\"1\" id=\"fm_timg_del\"><label for=\"fm_timg_del\">\uc0ad\uc81c</label>';\r\n                $timg_str = '<img src=\"'.G5_DATA_URL.'/faq/'.$fm['fm_id'].'_t\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($timg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $timg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc0c1\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_head_html', get_text($fm['fm_head_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ud558\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_tail_html', get_text($fm['fm_tail_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c\uc0c1\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_mobile_head_html', get_text($fm['fm_mobile_head_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c\ud558\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_mobile_tail_html', get_text($fm['fm_mobile_tail_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./faqmasterlist.php\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\">\r\n</div>\r\n\r\n</form>\r\n\r\n<script>\r\nfunction frmfaqmasterform_check(f)\r\n{\r\n    <?php echo get_editor_js('fm_head_html'); ?>\r\n    <?php echo get_editor_js('fm_tail_html'); ?>\r\n    <?php echo get_editor_js('fm_mobile_head_html'); ?>\r\n    <?php echo get_editor_js('fm_mobile_tail_html'); ?>\r\n}\r\n\r\n// document.frmfaqmasterform.fm_subject.focus();\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '300700';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($W == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\n@mkdir(G5_DATA_PATH.\"/faq\", G5_DIR_PERMISSION);\r\n@chmod(G5_DATA_PATH.\"/faq\", G5_DIR_PERMISSION);\r\n\r\nif ($fm_himg_del)  @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_h\");\r\nif ($fm_timg_del)  @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_t\");\r\n\r\n$sql_common = \" set fm_subject = '$fm_subject',\r\n                    fm_head_html = '$fm_head_html',\r\n                    fm_tail_html = '$fm_tail_html',\r\n                    fm_mobile_head_html = '$fm_mobile_head_html',\r\n                    fm_mobile_tail_html = '$fm_mobile_tail_html',\r\n                    fm_order = '$fm_order' \";\r\n\r\nif ($w == \"\")\r\n{\r\n    $sql = \" alter table {$g5['faq_master_table']} auto_increment=1 \";\r\n    sql_query($sql);\r\n\r\n    $sql = \" insert {$g5['faq_master_table']} $sql_common \";\r\n    sql_query($sql);\r\n\r\n    $fm_id = sql_insert_id();\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['faq_master_table']} $sql_common where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_h\");\r\n    @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_t\");\r\n\r\n    // FAQ\uc0ad\uc81c\r\n\t$sql = \" delete from {$g5['faq_master_table']} where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n\r\n    // FAQ\uc0c1\uc138\uc0ad\uc81c\r\n\t$sql = \" delete from {$g5['faq_table']} where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if ($_FILES['fm_himg']['name']){\r\n        $dest_path = G5_DATA_PATH.\"/faq/\".$fm_id.\"_h\";\r\n        @move_uploaded_file($_FILES['fm_himg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n    if ($_FILES['fm_timg']['name']){\r\n        $dest_path = G5_DATA_PATH.\"/faq/\".$fm_id.\"_t\";\r\n        @move_uploaded_file($_FILES['fm_timg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n\r\n    goto_url(\"./faqmasterform.php?w=u&amp;fm_id=$fm_id\");\r\n}\r\nelse\r\n    goto_url(\"./faqmasterlist.php\");\r\n?>\r\n", "<?php\r\n$sub_menu = '100310';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$nw_id = preg_replace('/[^0-9]/', '', $nw_id);\r\n\r\n$html_title = \"\ud31d\uc5c5\ub808\uc774\uc5b4\";\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= \" \uc218\uc815\";\r\n    $sql = \" select * from {$g5['new_win_table']} where nw_id = '$nw_id' \";\r\n    $nw = sql_fetch($sql);\r\n    if (!$nw['nw_id']) alert(\"\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\");\r\n}\r\nelse\r\n{\r\n    $html_title .= \" \uc785\ub825\";\r\n    $nw['nw_device'] = 'both';\r\n    $nw['nw_disable_hours'] = 24;\r\n    $nw['nw_left']   = 10;\r\n    $nw['nw_top']    = 10;\r\n    $nw['nw_width']  = 450;\r\n    $nw['nw_height'] = 500;\r\n    $nw['nw_content_html'] = 2;\r\n}\r\n\r\n$g5['title'] = $html_title;\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmnewwin\" action=\"./newwinformupdate.php\" onsubmit=\"return frmnewwin_check(this);\" method=\"post\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"nw_id\" value=\"<?php echo $nw_id; ?>\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"local_desc01 local_desc\">\r\n    <p>\ucd08\uae30\ud654\uba74 \uc811\uc18d \uc2dc \uc790\ub3d9\uc73c\ub85c \ub730 \ud31d\uc5c5\ub808\uc774\uc5b4\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.</p>\r\n</div>\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_device\">\uc811\uc18d\uae30\uae30</label></th>\r\n        <td>\r\n            <?php echo help(\"\ud31d\uc5c5\ub808\uc774\uc5b4\uac00 \ud45c\uc2dc\ub420 \uc811\uc18d\uae30\uae30\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\"); ?>\r\n            <select name=\"nw_device\" id=\"nw_device\">\r\n                <option value=\"both\"<?php echo get_selected($nw['nw_device'], 'both', true); ?>>PC\uc640 \ubaa8\ubc14\uc77c</option>\r\n                <option value=\"pc\"<?php echo get_selected($nw['nw_device'], 'pc'); ?>>PC</option>\r\n                <option value=\"mobile\"<?php echo get_selected($nw['nw_device'], 'mobile'); ?>>\ubaa8\ubc14\uc77c</option>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_disable_hours\">\uc2dc\uac04<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo help(\"\uace0\uac1d\uc774 \ub2e4\uc2dc \ubcf4\uc9c0 \uc54a\uc74c\uc744 \uc120\ud0dd\ud560 \uc2dc \uba87 \uc2dc\uac04\ub3d9\uc548 \ud31d\uc5c5\ub808\uc774\uc5b4\ub97c \ubcf4\uc5ec\uc8fc\uc9c0 \uc54a\uc744\uc9c0 \uc124\uc815\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"nw_disable_hours\" value=\"<?php echo $nw['nw_disable_hours']; ?>\" id=\"nw_disable_hours\" required class=\"frm_input required\" size=\"5\"> \uc2dc\uac04\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_begin_time\">\uc2dc\uc791\uc77c\uc2dc<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_begin_time\" value=\"<?php echo $nw['nw_begin_time']; ?>\" id=\"nw_begin_time\" required class=\"frm_input required\" size=\"21\" maxlength=\"19\">\r\n            <input type=\"checkbox\" name=\"nw_begin_chk\" value=\"<?php echo date(\"Y-m-d 00:00:00\", G5_SERVER_TIME); ?>\" id=\"nw_begin_chk\" onclick=\"if (this.checked == true) this.form.nw_begin_time.value=this.form.nw_begin_chk.value; else this.form.nw_begin_time.value = this.form.nw_begin_time.defaultValue;\">\r\n            <label for=\"nw_begin_chk\">\uc2dc\uc791\uc77c\uc2dc\ub97c \uc624\ub298\ub85c</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_end_time\">\uc885\ub8cc\uc77c\uc2dc<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_end_time\" value=\"<?php echo $nw['nw_end_time']; ?>\" id=\"nw_end_time\" required class=\"frm_input required\" size=\"21\" maxlength=\"19\">\r\n            <input type=\"checkbox\" name=\"nw_end_chk\" value=\"<?php echo date(\"Y-m-d 23:59:59\", G5_SERVER_TIME+(60*60*24*7)); ?>\" id=\"nw_end_chk\" onclick=\"if (this.checked == true) this.form.nw_end_time.value=this.form.nw_end_chk.value; else this.form.nw_end_time.value = this.form.nw_end_time.defaultValue;\">\r\n            <label for=\"nw_end_chk\">\uc885\ub8cc\uc77c\uc2dc\ub97c \uc624\ub298\ub85c\ubd80\ud130 7\uc77c \ud6c4\ub85c</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_left\">\ud31d\uc5c5\ub808\uc774\uc5b4 \uc88c\uce21 \uc704\uce58<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n           <input type=\"text\" name=\"nw_left\" value=\"<?php echo $nw['nw_left']; ?>\" id=\"nw_left\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_top\">\ud31d\uc5c5\ub808\uc774\uc5b4 \uc0c1\ub2e8 \uc704\uce58<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_top\" value=\"<?php echo $nw['nw_top']; ?>\" id=\"nw_top\" required class=\"frm_input required\"  size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_width\">\ud31d\uc5c5\ub808\uc774\uc5b4 \ub113\uc774<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_width\" value=\"<?php echo $nw['nw_width'] ?>\" id=\"nw_width\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_height\">\ud31d\uc5c5\ub808\uc774\uc5b4 \ub192\uc774<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_height\" value=\"<?php echo $nw['nw_height'] ?>\" id=\"nw_height\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_subject\">\ud31d\uc5c5 \uc81c\ubaa9<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_subject\" value=\"<?php echo stripslashes($nw['nw_subject']) ?>\" id=\"nw_subject\" required class=\"frm_input required\" size=\"80\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_content\">\ub0b4\uc6a9</label></th>\r\n        <td><?php echo editor_html('nw_content', get_text($nw['nw_content'], 0)); ?></td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./newwinlist.php\" class=\" btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\">\r\n</div>\r\n</form>\r\n\r\n<script>\r\nfunction frmnewwin_check(f)\r\n{\r\n    errmsg = \"\";\r\n    errfld = \"\";\r\n\r\n    <?php echo get_editor_js('nw_content'); ?>\r\n\r\n    check_field(f.nw_subject, \"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n\r\n    if (errmsg != \"\") {\r\n        alert(errmsg);\r\n        errfld.focus();\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '100310';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($w == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\n$sql_common = \" nw_device = '{$_POST['nw_device']}',\r\n                nw_begin_time = '{$_POST['nw_begin_time']}',\r\n                nw_end_time = '{$_POST['nw_end_time']}',\r\n                nw_disable_hours = '{$_POST['nw_disable_hours']}',\r\n                nw_left = '{$_POST['nw_left']}',\r\n                nw_top = '{$_POST['nw_top']}',\r\n                nw_height = '{$_POST['nw_height']}',\r\n                nw_width = '{$_POST['nw_width']}',\r\n                nw_subject = '{$_POST['nw_subject']}',\r\n                nw_content = '{$_POST['nw_content']}',\r\n                nw_content_html = '{$_POST['nw_content_html']}' \";\r\n\r\nif($w == \"\")\r\n{\r\n    $sql = \" insert {$g5['new_win_table']} set $sql_common \";\r\n    sql_query($sql);\r\n\r\n    $nw_id = sql_insert_id();\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['new_win_table']} set $sql_common where nw_id = '$nw_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    $sql = \" delete from {$g5['new_win_table']} where nw_id = '$nw_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif ($w == \"d\")\r\n{\r\n    goto_url('./newwinlist.php');\r\n}\r\nelse\r\n{\r\n    goto_url(\"./newwinform.php?w=u&amp;nw_id=$nw_id\");\r\n}\r\n?>\r\n", "<?php\n$sub_menu = \"200200\";\ninclude_once('./_common.php');\n\nauth_check($auth[$sub_menu], 'w');\n\ncheck_admin_token();\n\n$mb_id = $_POST['mb_id'];\n$po_point = $_POST['po_point'];\n$po_content = $_POST['po_content'];\n$expire = preg_replace('/[^0-9]/', '', $_POST['po_expire_term']);\n\n$mb = get_member($mb_id);\n\nif (!$mb['mb_id'])\n    alert('\uc874\uc7ac\ud558\ub294 \ud68c\uc6d0\uc544\uc774\ub514\uac00 \uc544\ub2d9\ub2c8\ub2e4.', './point_list.php?'.$qstr);\n\nif (($po_point < 0) && ($po_point * (-1) > $mb['mb_point']))\n    alert('\ud3ec\uc778\ud2b8\ub97c \uae4e\ub294 \uacbd\uc6b0 \ud604\uc7ac \ud3ec\uc778\ud2b8\ubcf4\ub2e4 \uc791\uc73c\uba74 \uc548\ub429\ub2c8\ub2e4.', './point_list.php?'.$qstr);\n\ninsert_point($mb_id, $po_point, $po_content, '@passive', $mb_id, $member['mb_id'].'-'.uniqid(''), $expire);\n\ngoto_url('./point_list.php?'.$qstr);\n?>\n", "<?php\r\n$sub_menu = \"900800\";\r\ninclude_once(\"./_common.php\");\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$g5['title'] = \"\ud734\ub300\ud3f0\ubc88\ud638 \uc5c5\ub370\uc774\ud2b8\";\r\n\r\n$g5['sms5_demo'] = 0;\r\n\r\n$is_hp_exist = false;\r\n\r\n$bk_hp = get_hp($bk_hp);\r\n\r\nif ($w=='u') // \uc5c5\ub370\uc774\ud2b8\r\n{\r\n    if (!$bg_no) $bg_no = 0;\r\n\r\n    if (!$bk_receipt) $bk_receipt = 0; else $bk_receipt = 1;\r\n\r\n    if (!strlen(trim($bk_name)))\r\n        alert('\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694');\r\n\r\n    if ($bk_hp == '')\r\n        alert('\ud734\ub300\ud3f0\ubc88\ud638\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.');\r\n/*\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no<>'$bk_no' and bk_hp='$bk_hp'\");\r\n    if ($res)\r\n        alert('\uac19\uc740 \ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.');\r\n*/\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if ($bg_no != $res['bg_no']) {\r\n        if ($res['mb_id']) $mem = \"bg_member\"; else $mem = \"bg_nomember\";\r\n        if ($res['bk_receipt'] == 1) $sms = \"bg_receipt\"; else $sms = \"bg_reject\";\r\n        sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count - 1, $mem = $mem - 1, $sms = $sms - 1 where bg_no='{$res['bg_no']}'\");\r\n        sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count + 1, $mem = $mem + 1, $sms = $sms + 1 where bg_no='$bg_no'\");\r\n    }\r\n\r\n    if ($bk_receipt != $res['bk_receipt']) {\r\n        if ($bk_receipt == 1)\r\n            sql_query(\"update {$g5['sms5_book_group_table']} set bg_receipt = bg_receipt + 1, bg_reject = bg_reject - 1 where bg_no='$bg_no'\");\r\n        else\r\n            sql_query(\"update {$g5['sms5_book_group_table']} set bg_receipt = bg_receipt - 1, bg_reject = bg_reject + 1 where bg_no='$bg_no'\");\r\n    }\r\n\r\n    sql_query(\"update {$g5['sms5_book_table']} set bg_no='$bg_no', bk_name='$bk_name', bk_hp='$bk_hp', bk_receipt='$bk_receipt', bk_datetime='\".G5_TIME_YMDHIS.\"', bk_memo='\".addslashes($bk_memo).\"' where bk_no='$bk_no'\");\r\n    if ($res['mb_id']){ //\ub9cc\uc57d\uc5d0 mb_id\uac00 \uc788\ub2e4\uba74...\r\n        // \ud734\ub300\ud3f0\ubc88\ud638 \uc911\ubcf5\uccb4\ud06c\r\n        $sql = \" select mb_id from {$g5['member_table']} where mb_id <> '{$res['mb_id']}' and mb_hp = '{$bk_hp}' \";\r\n        $mb_hp_exist = sql_fetch($sql);\r\n        if ($mb_hp_exist['mb_id']) { //\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\ub2e4\uba74\r\n            $is_hp_exist = true;\r\n        } else {\r\n             sql_query(\"update {$g5['member_table']} set mb_name='\".addslashes($bk_name).\"', mb_hp='$bk_hp', mb_sms='$bk_receipt' where mb_id='{$res['mb_id']}'\", false);\r\n        }\r\n    }\r\n    $get_bg_no = $bg_no;\r\n\r\n    $go_url = './num_book_write.php?bk_no='.$bk_no.'&amp;w='.$w.'&amp;page='.$page;\r\n    if( $is_hp_exist ){ //\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\ub2e4\uba74\r\n        //alert( \"\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\uc5b4\uc11c \ud68c\uc6d0\uc815\ubcf4\uc5d0\ub294 \ubc18\uc601\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\", $go_url );\r\n        goto_url($go_url);\r\n    } else {\r\n        goto_url($go_url);\r\n    }\r\n    exit;\r\n}\r\nelse if ($w=='d') // \uc0ad\uc81c\r\n{\r\n    if (!is_numeric($bk_no))\r\n        alert('\uace0\uc720\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if ($res['bk_receipt'] == 1) $bg_sms = 'bg_receipt'; else $bg_sms = 'bg_reject';\r\n    if ($res['mb_id']) $bg_mb = 'bg_member'; else $bg_mb = 'bg_nomember';\r\n\r\n    sql_query(\"delete from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count - 1, $bg_mb = $bg_mb - 1, $bg_sms = $bg_sms - 1 where bg_no = '{$res['bg_no']}'\");\r\n\r\n/*\r\n    if (!is_numeric($bk_no))\r\n        alert('\uace0\uc720\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from $g5[sms5_book_table] where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if (!$res[mb_id])\r\n    {\r\n        if ($res[receipt] == 1)\r\n            $sql_sms = \"bg_receipt = bg_receipt - 1\";\r\n        else\r\n            $sql_sms = \"bg_reject = bg_reject - 1\";\r\n\r\n        sql_query(\"delete from $g5[sms5_book_table] where bk_no='$bk_no'\");\r\n        sql_query(\"update $g5[sms5_book_group_table] set bg_count = bg_count - 1, bg_nomember = bg_nomember - 1, $sql_sms where bg_no = '$res[bg_no]'\");\r\n    }\r\n    else\r\n        alert(\"\ud68c\uc6d0\uc740 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\\\n\\\\n\ud68c\uc6d0\uad00\ub9ac \uba54\ub274\uc5d0\uc11c \uc0ad\uc81c\ud55c \ud6c4\\\\n\\\\n\ud68c\uc6d0\uc815\ubcf4\uc5c5\ub370\uc774\ud2b8 \uba54\ub274\ub97c \uc2e4\ud589 \ud574\uc8fc\uc138\uc694.\");\r\n*/\r\n}\r\nelse // \ub4f1\ub85d\r\n{\r\n    if (!$bg_no) $bg_no = 1;\r\n\r\n    if (!$bk_receipt) $bk_receipt = 0; else $bk_receipt = 1;\r\n\r\n    if (!strlen(trim($bk_name)))\r\n        alert('\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694');\r\n\r\n    if ($bk_hp == '')\r\n        alert('\ud734\ub300\ud3f0\ubc88\ud638\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_hp='$bk_hp'\");\r\n    if ($res)\r\n        alert('\uac19\uc740 \ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.');\r\n\r\n    if ($bk_receipt == 1)\r\n        $sql_sms = \"bg_receipt = bg_receipt + 1\";\r\n    else\r\n        $sql_sms = \"bg_reject = bg_reject + 1\";\r\n\r\n    sql_query(\"insert into {$g5['sms5_book_table']} set bg_no='$bg_no', bk_name='\".addslashes($bk_name).\"', bk_hp='$bk_hp', bk_receipt='$bk_receipt', bk_datetime='\".G5_TIME_YMDHIS.\"', bk_memo='\".addslashes($bk_memo).\"'\");\r\n    sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count + 1, bg_nomember = bg_nomember + 1, $sql_sms where bg_no = '$bg_no'\");\r\n\r\n    $get_bg_no = $bg_no;\r\n}\r\n\r\n$go_url = './num_book.php?page='.$page.'&amp;bg_no='.$get_bg_no.'&amp;ap='.$ap;\r\ngoto_url($go_url);\r\n?>", "<?php\r\n$sub_menu = \"900800\";\r\ninclude_once(\"./_common.php\");\r\n\r\n$colspan = 4;\r\n\r\nauth_check($auth[$sub_menu], \"r\");\r\n\r\n$g5['title'] = \"\ud734\ub300\ud3f0\ubc88\ud638 \";\r\n\r\n$exist_hplist = array();\r\n\r\nif ($w == 'u' && is_numeric($bk_no)) {\r\n    $write = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$write)\r\n        alert('\ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    if ($write['mb_id']) {\r\n        $res = sql_fetch(\"select mb_id from {$g5['member_table']} where mb_id='{$write['mb_id']}'\");\r\n        $write['mb_id'] = $res['mb_id'];\r\n        $sql = \"select mb_id from {$g5['member_table']} where mb_hp = '{$write['bk_hp']}' and mb_id <> '{$write['mb_id']}' and mb_hp <> '' \";\r\n        $result = sql_query($sql);\r\n        while($tmp = sql_fetch_array($result)){\r\n            $exist_hplist[] = $tmp;\r\n        }\r\n        $exist_msg_1 = '(\uc218\uc815\uc2dc \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.)';\r\n        $exist_msg_2 = '(\uc218\uc815\uc2dc \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.)';\r\n        $exist_msg = count($exist_hplist) ? $exist_msg_1 : $exist_msg_2;\r\n    }\r\n    $g5['title'] .= '\uc218\uc815';\r\n}\r\nelse  {\r\n    $write['bg_no'] = $bg_no;\r\n    $g5['title'] .= '\ucd94\uac00';\r\n}\r\n\r\nif (!is_numeric($write['bk_receipt']))\r\n    $write['bk_receipt'] = 1;\r\n\r\n$no_group = sql_fetch(\"select * from {$g5['sms5_book_group_table']} where bg_no = 1\");\r\n\r\ninclude_once(G5_ADMIN_PATH.\"/admin.head.php\");\r\n?>\r\n\r\n<form name=\"book_form\" id=\"book_form\" method=\"post\" action=\"./num_book_update.php\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo get_sanitize_input($w); ?>\">\r\n<input type=\"hidden\" name=\"page\" value=\"<?php echo get_sanitize_input($page); ?>\">\r\n<input type=\"hidden\" name=\"ap\" value=\"<?php echo get_sanitize_input($ap); ?>\">\r\n<input type=\"hidden\" name=\"bk_no\" value=\"<?php echo $write['bk_no']?>\">\r\n<input type=\"hidden\" name=\"mb_id\" id=\"mb_id\" value=\"<?php echo $write['mb_id']?>\">\r\n<input type=\"hidden\" name=\"get_bg_no\" value=\"<?php echo get_sanitize_input($bg_no); ?>\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bg_no\">\uadf8\ub8f9 <strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <select name=\"bg_no\" id=\"bg_no\" required class=\"required\">\r\n                <option value=\"1\"><?php echo $no_group['bg_name']?> (<?php echo number_format($no_group['bg_count'])?> \uba85)</option>\r\n                <?php\r\n                $qry = sql_query(\"select * from {$g5['sms5_book_group_table']} where bg_no> 1 order by bg_name\");\r\n                while($res = sql_fetch_array($qry)) {\r\n                ?>\r\n                <option value=\"<?php echo $res['bg_no']?>\" <?php echo $res['bg_no']==$write['bg_no']?'selected':''?>> <?php echo $res['bg_name']?>  (<?php echo number_format($res['bg_count'])?> \uba85) </option>\r\n                <?php } ?>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_name\">\uc774\ub984<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td><input type=\"text\" name=\"bk_name\" id=\"bk_name\" maxlength=\"50\" value=\"<?php echo $write['bk_name']?>\" required class=\"frm_input required\"></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_hp\">\ud734\ub300\ud3f0\ubc88\ud638<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"bk_hp\" id=\"bk_hp\" value=\"<?php echo $write['bk_hp']?>\" required class=\"frm_input required\">\r\n            <?php if( count($exist_hplist) ) { // \uc911\ubcf5\ub418\ub294 \ubaa9\ub85d\uc774 \uc788\ub2e4\uba74 ?>\r\n            <div id=\"hp_check_el\">\r\n                <ul>\r\n                <?php\r\n\n                foreach( $exist_hplist as $v ) {\r\n\n                    if( empty($v) ) continue;\r\n                    $href = G5_ADMIN_URL.\"/member_form.php?w=u&amp;mb_id={$v['mb_id']}\";\r\n                ?>\r\n                    <li><strong>\uc911\ubcf5\ub428 </strong><a href=\"<?php echo $href; ?>\" target=\"_blank\"><?php echo $v['mb_id']; ?></a></li>\r\n                <?php\r\n                }\r\n                ?>\r\n                </ul>\r\n            </div>\r\n            <?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc218\uc2e0\uc5ec\ubd80</th>\r\n        <td>\r\n            <input type=\"radio\" name=\"bk_receipt\" id=\"bk_receipt_1\" value=\"1\" <?php echo $write['bk_receipt']?'checked':''?>>\r\n            <label for=\"bk_receipt_1\">\uc218\uc2e0\ud5c8\uc6a9</label>\r\n            <input type=\"radio\" name=\"bk_receipt\" id=\"bk_receipt_2\" value=\"0\" <?php echo !$write['bk_receipt']?'checked':''?>>\r\n            <label for=\"bk_receipt_2\">\uc218\uc2e0\uac70\ubd80</label>\r\n        </td>\r\n    </tr>\r\n    <?php if ($w == 'u') { ?>\r\n    <tr>\r\n        <th scope=\"row\">\ud68c\uc6d0\uc544\uc774\ub514</th>\r\n        <td> <?php echo $write['mb_id'] ? '<a href=\"'.G5_ADMIN_URL.'/member_form.php?w=u&amp;mb_id='.$write['mb_id'].'\">'.$write['mb_id'].'</a>' : '\ube44\ud68c\uc6d0'?> </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc5c5\ub370\uc774\ud2b8</th>\r\n        <td> <?php echo $write['bk_datetime']?> </td>\r\n    </tr>\r\n    <?php } ?>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_memo\">\uba54\ubaa8</label></th>\r\n        <td>\r\n            <textarea name=\"bk_memo\" id=\"bk_memo\"><?php echo $write['bk_memo']?></textarea>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n</table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\" onclick=\"return book_submit();\">\r\n    <a href=\"./num_book.php?<?php echo clean_query_string($_SERVER['QUERY_STRING']); ?>\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n</div>\r\n\r\n</form>\r\n<script>\r\nfunction book_submit(){\r\n    var f = document.book_form;\r\n    var regExp_hp = /^(01[016789]{1}|02|0[3-9]{1}[0-9]{1})-?[0-9]{3,4}-?[0-9]{4}$/;\r\n\r\n    if(!f.bk_hp.value){\r\n        f.bk_hp.focus();\r\n        alert(\"\ud734\ub300\ud3f0\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.\");\r\n        return false;\r\n    } else if ( !regExp_hp.test(f.bk_hp.value) )\r\n    {\r\n        f.bk_hp.focus();\r\n        alert(\"\ud734\ub300\ud3f0\ubc88\ud638 \uc785\ub825\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\");\r\n        return false;\r\n    }\r\n\r\n    var w = \"<?php echo $w; ?>\";\r\n    var bk_no = \"<?php echo $bk_no; ?>\";\r\n    var mb_id = f.mb_id.value;\r\n    var bk_hp = f.bk_hp.value;\r\n    var params = { w: w, bk_no: bk_no, mb_id : mb_id, bk_hp : bk_hp };\r\n    var is_submit;\r\n\r\n    $.ajax({\r\n        url: \"./ajax.hp_chk.php\",\r\n        type: \"POST\",\r\n        cache:false,\r\n        timeout : 30000,\r\n        dataType:\"json\",\r\n        data:params,\r\n        success: function(data) {\r\n            if(data.error) {\r\n                is_submit = false;\r\n                alert( data.error );\r\n            } else {\r\n                var list_text = \"\";\r\n                var list_data;\r\n\r\n                $.each( data.exist , function(num) {\r\n                    list_data = data.exist[num];\r\n\r\n                    if(list_data) {\r\n                        var href = \"<?php echo G5_ADMIN_URL ?>/member_form.php?w=u&mb_id=\"+list_data;\r\n                        list_text += \"<li><a href=\\\"\"+href+\"\\\" target=\\\"_blank\\\">\"+list_data+\"</a></li>\";\r\n                    }\r\n                });\r\n\r\n                var $check_msg = $(\"#hp_check_el\");\r\n\r\n                if( !list_text ){ // \uc911\ubcf5 \ud734\ub300\ud3f0 \ubc88\ud638\uac00 \uc5c6\ub2e4\uba74 submit\r\n                    if($check_msg.size()> 0)\r\n                        $check_msg.remove();\r\n\r\n                    is_submit = true;\r\n                } else {\r\n                    if($check_msg.size() < 1)\r\n                        $(\"input#bk_hp\").after(\"<div id=\\\"hp_check_el\\\"><h3>\uc774 \ubc88\ud638\ub97c \uc4f0\ub294 \ud68c\uc6d0 \uc815\ubcf4</h3><ul></ul></div>\");\r\n\r\n                    $(\"#hp_check_el\").find(\"ul\").html( list_text );\r\n\r\n                    if(confirm(\"\ud68c\uc6d0 \uc815\ubcf4\uc5d0 \uc911\ubcf5 \ud734\ub300\ud3f0 \ubc88\ud638\uac00 \uc788\uc2b5\ub2c8\ub2e4.\uc218\uc815\ud558\uc2e4 \uacbd\uc6b0 \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\\n\uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\"))\r\n                        is_submit = true;\r\n                    else\r\n                        is_submit = false;\r\n                }\r\n            }\r\n\r\n            if(is_submit)\r\n                f.submit();\r\n        }\r\n    });\r\n\r\n    return false;\r\n}\r\n</script>\r\n<?php\r\ninclude_once(G5_ADMIN_PATH.'/admin.tail.php');\r\n?>"], "fixing_code": ["<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\nauth_check($auth[$sub_menu], 'w');\n\nif ($is_admin != 'super' && $w == '') alert('\ucd5c\uace0\uad00\ub9ac\uc790\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4.');\n\n$html_title = '\uac8c\uc2dc\ud310\uadf8\ub8f9';\n$gr_id_attr = '';\n$sound_only = '';\nif ($w == '') {\n    $gr_id_attr = 'required';\n    $sound_only = '<strong class=\"sound_only\"> \ud544\uc218</strong>';\n    $gr = array('gr_use_access' => 0);\n    $html_title .= ' \uc0dd\uc131';\n} else if ($w == 'u') {\n    $gr_id_attr = 'readonly';\n    $gr = sql_fetch(\" select * from {$g5['group_table']} where gr_id = '$gr_id' \");\n    $html_title .= ' \uc218\uc815';\n}\nelse\n    alert('\uc81c\ub300\ub85c \ub41c \uac12\uc774 \ub118\uc5b4\uc624\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.');\n\nif (!isset($group['gr_device'])) {\n    sql_query(\" ALTER TABLE `{$g5['group_table']}` ADD `gr_device` ENUM('both','pc','mobile') NOT NULL DEFAULT 'both' AFTER `gr_subject` \", false);\n}\n\n\n$g5['title'] = $html_title;\ninclude_once('./admin.head.php');\n?>\n\n<form name=\"fboardgroup\" id=\"fboardgroup\" action=\"./boardgroup_form_update.php\" onsubmit=\"return fboardgroup_check(this);\" method=\"post\" autocomplete=\"off\">\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w ?>\">\n<input type=\"hidden\" name=\"sfl\" value=\"<?php echo $sfl ?>\">\n<input type=\"hidden\" name=\"stx\" value=\"<?php echo $stx ?>\">\n<input type=\"hidden\" name=\"sst\" value=\"<?php echo $sst ?>\">\n<input type=\"hidden\" name=\"sod\" value=\"<?php echo $sod ?>\">\n<input type=\"hidden\" name=\"page\" value=\"<?php echo $page ?>\">\n<input type=\"hidden\" name=\"token\" value=\"\">\n\n<div class=\"tbl_frm01 tbl_wrap\">\n    <table>\n    <caption><?php echo $g5['title']; ?></caption>\n    <colgroup>\n        <col class=\"grid_4\">\n        <col>\n    </colgroup>\n    <tbody>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_id\">\uadf8\ub8f9 ID<?php echo $sound_only ?></label></th>\n        <td><input type=\"text\" name=\"gr_id\" value=\"<?php echo $group['gr_id'] ?>\" id=\"gr_id\" <?php echo $gr_id_attr; ?> class=\"<?php echo $gr_id_attr; ?> alnum_ frm_input\" maxlength=\"10\">\n            <?php\n            if ($w=='')\n                echo '\uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5 (\uacf5\ubc31\uc5c6\uc774)';\n            else\n                echo '<a href=\"'.G5_BBS_URL.'/group.php?gr_id='.$group['gr_id'].'\" class=\"btn_frmline\">\uac8c\uc2dc\ud310\uadf8\ub8f9 \ubc14\ub85c\uac00\uae30</a>';\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_subject\">\uadf8\ub8f9 \uc81c\ubaa9<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\n        <td>\n            <input type=\"text\" name=\"gr_subject\" value=\"<?php echo get_text($group['gr_subject']) ?>\" id=\"gr_subject\" required class=\"required frm_input\" size=\"80\">\n            <?php\n            if ($w == 'u')\n                echo '<a href=\"./board_form.php?gr_id='.$gr_id.'\" class=\"btn_frmline\">\uac8c\uc2dc\ud310\uc0dd\uc131</a>';\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_device\">\uc811\uc18d\uae30\uae30</label></th>\n        <td>\n            <?php echo help(\"PC \uc640 \ubaa8\ubc14\uc77c \uc0ac\uc6a9\uc744 \uad6c\ubd84\ud569\ub2c8\ub2e4.\") ?>\n            <select id=\"gr_device\" name=\"gr_device\">\n                <option value=\"both\"<?php echo get_selected($group['gr_device'], 'both', true); ?>>PC\uc640 \ubaa8\ubc14\uc77c\uc5d0\uc11c \ubaa8\ub450 \uc0ac\uc6a9</option>\n                <option value=\"pc\"<?php echo get_selected($group['gr_device'], 'pc'); ?>>PC \uc804\uc6a9</option>\n                <option value=\"mobile\"<?php echo get_selected($group['gr_device'], 'mobile'); ?>>\ubaa8\ubc14\uc77c \uc804\uc6a9</option>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><?php if ($is_admin == 'super') { ?><label for=\"gr_admin\"><?php } ?>\uadf8\ub8f9 \uad00\ub9ac\uc790<?php if ($is_admin == 'super') { ?></label><?php } ?></th>\n        <td>\n            <?php\n            if ($is_admin == 'super')\n                echo '<input type=\"text\" id=\"gr_admin\" name=\"gr_admin\" class=\"frm_input\" value=\"'.$gr['gr_admin'].'\" maxlength=\"20\">';\n            else\n                echo '<input type=\"hidden\" id=\"gr_admin\" name=\"gr_admin\" value=\"'.$gr['gr_admin'].'\">'.$gr['gr_admin'];\n            ?>\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\"><label for=\"gr_use_access\">\uc811\uadfc\ud68c\uc6d0\uc0ac\uc6a9</label></th>\n        <td>\n            <?php echo help(\"\uc0ac\uc6a9\uc5d0 \uccb4\ud06c\ud558\uc2dc\uba74 \uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc740 \uc811\uadfc\uac00\ub2a5\ud55c \ud68c\uc6d0\ub9cc \uc811\uadfc\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\") ?>\n            <input type=\"checkbox\" name=\"gr_use_access\" value=\"1\" id=\"gr_use_access\" <?php echo $gr['gr_use_access']?'checked':''; ?>>\n            \uc0ac\uc6a9\n        </td>\n    </tr>\n    <tr>\n        <th scope=\"row\">\uc811\uadfc\ud68c\uc6d0\uc218</th>\n        <td>\n            <?php\n            // \uc811\uadfc\ud68c\uc6d0\uc218\n            $sql1 = \" select count(*) as cnt from {$g5['group_member_table']} where gr_id = '{$gr_id}' \";\n            $row1 = sql_fetch($sql1);\n            echo '<a href=\"./boardgroupmember_list.php?gr_id='.$gr_id.'\">'.$row1['cnt'].'</a>';\n            ?>\n        </td>\n    </tr>\n    <?php for ($i=1;$i<=10;$i++) { ?>\n    <tr>\n        <th scope=\"row\">\uc5ec\ubd84\ud544\ub4dc<?php echo $i ?></th>\n        <td class=\"td_extra\">\n            <label for=\"gr_<?php echo $i ?>_subj\">\uc5ec\ubd84\ud544\ub4dc <?php echo $i ?> \uc81c\ubaa9</label>\n            <input type=\"text\" name=\"gr_<?php echo $i ?>_subj\" value=\"<?php echo get_text($group['gr_'.$i.'_subj']) ?>\" id=\"gr_<?php echo $i ?>_subj\" class=\"frm_input\">\n            <label for=\"gr_<?php echo $i ?>\">\uc5ec\ubd84\ud544\ub4dc <?php echo $i ?> \ub0b4\uc6a9</label>\n            <input type=\"text\" name=\"gr_<?php echo $i ?>\" value=\"<?php echo $gr['gr_'.$i] ?>\" id=\"gr_<?php echo $i ?>\" class=\"frm_input\">\n        </td>\n    </tr>\n    <?php } ?>\n    </tbody>\n    </table>\n</div>\n\n<div class=\"btn_fixed_top\">\n    <a href=\"./boardgroup_list.php?<?php echo $qstr ?>\" class=\"btn btn_02\">\ubaa9\ub85d</a>\n    <input type=\"submit\" class=\"btn_submit btn\" accesskey=\"s\" value=\"\ud655\uc778\">\n</div>\n\n</form>\n\n<div class=\"local_desc01 local_desc\">\n    <p>\n        \uac8c\uc2dc\ud310\uc744 \uc0dd\uc131\ud558\uc2dc\ub824\uba74 1\uac1c \uc774\uc0c1\uc758 \uac8c\uc2dc\ud310\uadf8\ub8f9\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.<br>\n        \uac8c\uc2dc\ud310\uadf8\ub8f9\uc744 \uc774\uc6a9\ud558\uc2dc\uba74 \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \uac8c\uc2dc\ud310\uc744 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n    </p>\n</div>\n\n<script>\nfunction fboardgroup_check(f)\n{\n    f.action = './boardgroup_form_update.php';\n    return true;\n}\n</script>\n\n<?php\ninclude_once ('./admin.tail.php');\n?>\n", "<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\nif ($w == 'u')\n    check_demo();\n\nauth_check($auth[$sub_menu], 'w');\n\nif ($is_admin != 'super' && $w == '') alert('\ucd5c\uace0\uad00\ub9ac\uc790\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4.');\n\ncheck_admin_token();\n\nif (!preg_match(\"/^([A-Za-z0-9_]{1,10})$/\", $_POST['gr_id']))\n    alert('\uadf8\ub8f9 ID\ub294 \uacf5\ubc31\uc5c6\uc774 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uc0ac\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4. (10\uc790 \uc774\ub0b4)');\n\nif (!$gr_subject) alert('\uadf8\ub8f9 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.');\n\n$gr_subject = isset($_POST['gr_subject']) ? strip_tags($_POST['gr_subject']) : '';\n\n$sql_common = \" gr_subject = '{$gr_subject}',\n                gr_device = '{$_POST['gr_device']}',\n                gr_admin  = '{$_POST['gr_admin']}',\n                gr_1_subj = '{$_POST['gr_1_subj']}',\n                gr_2_subj = '{$_POST['gr_2_subj']}',\n                gr_3_subj = '{$_POST['gr_3_subj']}',\n                gr_4_subj = '{$_POST['gr_4_subj']}',\n                gr_5_subj = '{$_POST['gr_5_subj']}',\n                gr_6_subj = '{$_POST['gr_6_subj']}',\n                gr_7_subj = '{$_POST['gr_7_subj']}',\n                gr_8_subj = '{$_POST['gr_8_subj']}',\n                gr_9_subj = '{$_POST['gr_9_subj']}',\n                gr_10_subj = '{$_POST['gr_10_subj']}',\n                gr_1 = '{$_POST['gr_1']}',\n                gr_2 = '{$_POST['gr_2']}',\n                gr_3 = '{$_POST['gr_3']}',\n                gr_4 = '{$_POST['gr_4']}',\n                gr_5 = '{$_POST['gr_5']}',\n                gr_6 = '{$_POST['gr_6']}',\n                gr_7 = '{$_POST['gr_7']}',\n                gr_8 = '{$_POST['gr_8']}',\n                gr_9 = '{$_POST['gr_9']}',\n                gr_10 = '{$_POST['gr_10']}' \";\nif (isset($_POST['gr_use_access']))\n    $sql_common .= \", gr_use_access = '{$_POST['gr_use_access']}' \";\nelse\n    $sql_common .= \", gr_use_access = '' \";\n\nif ($w == '') {\n\n    $sql = \" select count(*) as cnt from {$g5['group_table']} where gr_id = '{$_POST['gr_id']}' \";\n    $row = sql_fetch($sql);\n    if ($row['cnt'])\n        alert('\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uadf8\ub8f9 ID \uc785\ub2c8\ub2e4.');\n\n    $sql = \" insert into {$g5['group_table']}\n                set gr_id = '{$_POST['gr_id']}',\n                     {$sql_common} \";\n    sql_query($sql);\n\n} else if ($w == \"u\") {\n\n    $sql = \" update {$g5['group_table']}\n                set {$sql_common}\n                where gr_id = '{$_POST['gr_id']}' \";\n    sql_query($sql);\n\n} else {\n    alert('\uc81c\ub300\ub85c \ub41c \uac12\uc774 \ub118\uc5b4\uc624\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.');\n}\n\ngoto_url('./boardgroup_form.php?w=u&amp;gr_id='.$gr_id.'&amp;'.$qstr);\n?>\n", "<?php\n$sub_menu = \"300200\";\ninclude_once('./_common.php');\n\n//print_r2($_POST); exit;\n\ncheck_demo();\n\nauth_check($auth[$sub_menu], 'w');\n\ncheck_admin_token();\n\n$count = count($_POST['chk']);\n\nif(!$count)\n    alert($_POST['act_button'].'\ud560 \uac8c\uc2dc\ud310\uadf8\ub8f9\uc744 1\uac1c\uc774\uc0c1 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.');\n\nfor ($i=0; $i<$count; $i++)\n{\n    $k     = $_POST['chk'][$i];\n    $gr_id = $_POST['group_id'][$k];\n    $gr_subject = strip_tags($_POST['gr_subject'][$k]);\n\n    if($_POST['act_button'] == '\uc120\ud0dd\uc218\uc815') {\n        $sql = \" update {$g5['group_table']}\n                    set gr_subject    = '{$gr_subject}',\n                        gr_device     = '{$_POST['gr_device'][$k]}',\n                        gr_admin      = '{$_POST['gr_admin'][$k]}',\n                        gr_use_access = '{$_POST['gr_use_access'][$k]}',\n                        gr_order      = '{$_POST['gr_order'][$k]}'\n                  where gr_id         = '{$gr_id}' \";\n        if ($is_admin != 'super')\n            $sql .= \" and gr_admin    = '{$_POST['gr_admin'][$k]}' \";\n        sql_query($sql);\n    } else if($_POST['act_button'] == '\uc120\ud0dd\uc0ad\uc81c') {\n        $row = sql_fetch(\" select count(*) as cnt from {$g5['board_table']} where gr_id = '$gr_id' \");\n        if ($row['cnt'])\n            alert(\"\uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc774 \uc874\uc7ac\ud558\uc5ec \uac8c\uc2dc\ud310 \uadf8\ub8f9\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\\\n\\\\n\uc774 \uadf8\ub8f9\uc5d0 \uc18d\ud55c \uac8c\uc2dc\ud310\uc744 \uba3c\uc800 \uc0ad\uc81c\ud558\uc5ec \uc8fc\uc2ed\uc2dc\uc624.\", './board_list.php?sfl=gr_id&amp;stx='.$gr_id);\n\n        // \uadf8\ub8f9 \uc0ad\uc81c\n        sql_query(\" delete from {$g5['group_table']} where gr_id = '$gr_id' \");\n\n        // \uadf8\ub8f9\uc811\uadfc \ud68c\uc6d0 \uc0ad\uc81c\n        sql_query(\" delete from {$g5['group_member_table']} where gr_id = '$gr_id' \");\n    }\n}\n\ngoto_url('./boardgroup_list.php?'.$qstr);\n?>\n", "<?php\r\n$sub_menu = '300600';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n// \uc0c1\ub2e8, \ud558\ub2e8 \ud30c\uc77c\uacbd\ub85c \ud544\ub4dc \ucd94\uac00\r\nif(!sql_query(\" select co_include_head from {$g5['content_table']} limit 1 \", false)) {\r\n    $sql = \" ALTER TABLE `{$g5['content_table']}`  ADD `co_include_head` VARCHAR( 255 ) NOT NULL ,\r\n                                                    ADD `co_include_tail` VARCHAR( 255 ) NOT NULL \";\r\n    sql_query($sql, false);\r\n}\r\n\r\n// html purifier \uc0ac\uc6a9\uc5ec\ubd80 \ud544\ub4dc\r\nif(!sql_query(\" select co_tag_filter_use from {$g5['content_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_tag_filter_use` tinyint(4) NOT NULL DEFAULT '0' AFTER `co_content` \", true);\r\n    sql_query(\" update {$g5['content_table']} set co_tag_filter_use = '1' \");\r\n}\r\n\r\n// \ubaa8\ubc14\uc77c \ub0b4\uc6a9 \ucd94\uac00\r\nif(!sql_query(\" select co_mobile_content from {$g5['content_table']} limit 1\", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_mobile_content` longtext NOT NULL AFTER `co_content` \", true);\r\n}\r\n\r\n// \uc2a4\ud0a8 \uc124\uc815 \ucd94\uac00\r\nif(!sql_query(\" select co_skin from {$g5['content_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['content_table']}`\r\n                    ADD `co_skin` varchar(255) NOT NULL DEFAULT '' AFTER `co_mobile_content`,\r\n                    ADD `co_mobile_skin` varchar(255) NOT NULL DEFAULT '' AFTER `co_skin` \", true);\r\n    sql_query(\" update {$g5['content_table']} set co_skin = 'basic', co_mobile_skin = 'basic' \");\r\n}\r\n\r\n$html_title = \"\ub0b4\uc6a9\";\r\n$g5['title'] = $html_title.' \uad00\ub9ac';\r\n\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= \" \uc218\uc815\";\r\n    $readonly = \" readonly\";\r\n\r\n    $sql = \" select * from {$g5['content_table']} where co_id = '$co_id' \";\r\n    $co = sql_fetch($sql);\r\n    if (!$co['co_id'])\r\n        alert('\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n}\r\nelse\r\n{\r\n    $html_title .= ' \uc785\ub825';\r\n    $co = array(\r\n        'co_html' => 2,\r\n        'co_skin' => 'basic',\r\n        'co_mobile_skin' => 'basic'\r\n        );\r\n}\r\n\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmcontentform\" action=\"./contentformupdate.php\" onsubmit=\"return frmcontentform_check(this);\" method=\"post\" enctype=\"MULTIPART/FORM-DATA\" >\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"co_html\" value=\"1\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?> \ubaa9\ub85d</caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_id\">ID</label></th>\r\n        <td>\r\n            <?php echo help('20\uc790 \uc774\ub0b4\uc758 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.'); ?>\r\n            <input type=\"text\" value=\"<?php echo $co['co_id']; ?>\" name=\"co_id\" id =\"co_id\" required <?php echo $readonly; ?> class=\"required <?php echo $readonly; ?> frm_input\" size=\"20\" maxlength=\"20\">\r\n            <?php if ($w == 'u') { ?><a href=\"<?php echo G5_BBS_URL; ?>/content.php?co_id=<?php echo $co_id; ?>\" class=\"btn_frmline\">\ub0b4\uc6a9\ud655\uc778</a><?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_subject\">\uc81c\ubaa9</label></th>\r\n        <td><input type=\"text\" name=\"co_subject\" value=\"<?php echo htmlspecialchars2($co['co_subject']); ?>\" id=\"co_subject\" required class=\"frm_input required\" size=\"90\"></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ub0b4\uc6a9</th>\r\n        <td><?php echo editor_html('co_content', get_text($co['co_content'], 0)); ?></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c \ub0b4\uc6a9</th>\r\n        <td><?php echo editor_html('co_mobile_content', get_text($co['co_mobile_content'], 0)); ?></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_skin\">\uc2a4\ud0a8 \ub514\ub809\ud1a0\ub9ac<strong class=\"sound_only\">\ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo get_skin_select('content', 'co_skin', 'co_skin', $co['co_skin'], 'required'); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_mobile_skin\">\ubaa8\ubc14\uc77c\uc2a4\ud0a8 \ub514\ub809\ud1a0\ub9ac<strong class=\"sound_only\">\ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo get_mobile_skin_select('content', 'co_mobile_skin', 'co_mobile_skin', $co['co_mobile_skin'], 'required'); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_tag_filter_use\">\ud0dc\uadf8 \ud544\ud130\ub9c1 \uc0ac\uc6a9</label></th>\r\n        <td>\r\n            <?php echo help(\"\ub0b4\uc6a9\uc5d0\uc11c iframe \ub4f1\uc758 \ud0dc\uadf8\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 \uc0ac\uc6a9\uc548\ud568\uc73c\ub85c \uc120\ud0dd\ud574 \uc8fc\uc2ed\uc2dc\uc624.\"); ?>\r\n            <select name=\"co_tag_filter_use\" id=\"co_tag_filter_use\">\r\n                <option value=\"1\"<?php echo get_selected(1, $co['co_tag_filter_use']); ?>>\uc0ac\uc6a9\ud568</option>\r\n                <option value=\"0\"<?php echo get_selected(0, $co['co_tag_filter_use']); ?>>\uc0ac\uc6a9\uc548\ud568</option>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_include_head\">\uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c</label></th>\r\n        <td>\r\n            <?php echo help(\"\uc124\uc815\uac12\uc774 \uc5c6\uc73c\uba74 \uae30\ubcf8 \uc0c1\ub2e8 \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"co_include_head\" value=\"<?php echo $co['co_include_head']; ?>\" id=\"co_include_head\" class=\"frm_input\" size=\"60\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_include_tail\">\ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c</label></th>\r\n        <td>\r\n            <?php echo help(\"\uc124\uc815\uac12\uc774 \uc5c6\uc73c\uba74 \uae30\ubcf8 \ud558\ub2e8 \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"co_include_tail\" value=\"<?php echo $co['co_include_tail']; ?>\" id=\"co_include_tail\" class=\"frm_input\" size=\"60\">\r\n        </td>\r\n    </tr>\r\n    <tr id=\"admin_captcha_box\" style=\"display:none;\">\r\n        <th scope=\"row\">\uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0</th>\r\n        <td>\r\n            <?php\r\n            echo help(\"\ud30c\uc77c \uacbd\ub85c\ub97c \uc785\ub825 \ub610\ub294 \uc218\uc815\uc2dc \ucea1\ucc60\ub97c \ubc18\ub4dc\uc2dc \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4.\");\r\n\r\n            include_once(G5_CAPTCHA_PATH.'/captcha.lib.php');\r\n            $captcha_html = captcha_html();\r\n            $captcha_js   = chk_captcha_js();\r\n            echo $captcha_html;\r\n            ?>\r\n            <script>\r\n            jQuery(\"#captcha_key\").removeAttr(\"required\").removeClass(\"required\");\r\n            </script>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_himg\">\uc0c1\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"co_himg\" id=\"co_himg\">\r\n            <?php\r\n            $himg = G5_DATA_PATH.'/content/'.$co['co_id'].'_h';\r\n            if (file_exists($himg)) {\r\n                $size = @getimagesize($himg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"co_himg_del\" value=\"1\" id=\"co_himg_del\"> <label for=\"co_himg_del\">\uc0ad\uc81c</label>';\r\n                $himg_str = '<img src=\"'.G5_DATA_URL.'/content/'.$co['co_id'].'_h\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($himg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $himg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"co_timg\">\ud558\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"co_timg\" id=\"co_timg\">\r\n            <?php\r\n            $timg = G5_DATA_PATH.'/content/'.$co['co_id'].'_t';\r\n            if (file_exists($timg)) {\r\n                $size = @getimagesize($timg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"co_timg_del\" value=\"1\" id=\"co_timg_del\"> <label for=\"co_timg_del\">\uc0ad\uc81c</label>';\r\n                $timg_str = '<img src=\"'.G5_DATA_URL.'/content/'.$co['co_id'].'_t\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($timg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $timg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./contentlist.php\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn btn_submit\" accesskey=\"s\">\r\n</div>\r\n\r\n</form>\r\n\r\n<?php\r\n// [KVE-2018-2089] \ucde8\uc57d\uc810 \uc73c\ub85c \uc778\ud574 \ud30c\uc77c \uacbd\ub85c \uc218\uc815\uc2dc\uc5d0\ub9cc \uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0 \ucf54\ub4dc \uc0ac\uc6a9\r\n?>\r\n<script>\r\nvar captcha_chk = false;\r\n\r\nfunction use_captcha_check(){\r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: g5_admin_url+\"/ajax.use_captcha.php\",\r\n        data: { admin_use_captcha: \"1\" },\r\n        cache: false,\r\n        async: false,\r\n        dataType: \"json\",\r\n        success: function(data) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction frm_check_file(){\r\n    var co_include_head = \"<?php echo $co['co_include_head']; ?>\";\r\n    var co_include_tail = \"<?php echo $co['co_include_tail']; ?>\";\r\n    var head = jQuery.trim(jQuery(\"#co_include_head\").val());\r\n    var tail = jQuery.trim(jQuery(\"#co_include_tail\").val());\r\n\r\n    if(co_include_head !== head || co_include_tail !== tail){\r\n        // \ucea1\ucc60\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\r\n        jQuery(\"#admin_captcha_box\").show();\r\n        captcha_chk = true;\r\n\r\n        use_captcha_check();\r\n\r\n        return false;\r\n    } else {\r\n        jQuery(\"#admin_captcha_box\").hide();\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\njQuery(function($){\r\n    if( window.self !== window.top ){   // frame \ub610\ub294 iframe\uc744 \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \uccb4\ud06c\r\n        $(\"#co_include_head, #co_include_tail\").on(\"change paste keyup\", function(e) {\r\n            frm_check_file();\r\n        });\r\n\r\n        use_captcha_check();\r\n    }\r\n});\r\n\r\nfunction frmcontentform_check(f)\r\n{\r\n    errmsg = \"\";\r\n    errfld = \"\";\r\n\r\n    <?php echo get_editor_js('co_content'); ?>\r\n    <?php echo chk_editor_js('co_content'); ?>\r\n    <?php echo get_editor_js('co_mobile_content'); ?>\r\n\r\n    check_field(f.co_id, \"ID\ub97c \uc785\ub825\ud558\uc138\uc694.\");\r\n    check_field(f.co_subject, \"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n    check_field(f.co_content, \"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n\r\n    if (errmsg != \"\") {\r\n        alert(errmsg);\r\n        errfld.focus();\r\n        return false;\r\n    }\r\n    \r\n    if( captcha_chk ) {\r\n        <?php echo $captcha_js; // \ucea1\ucc60 \uc0ac\uc6a9\uc2dc \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c \uc785\ub825\ub41c \ucea1\ucc60\ub97c \uac80\uc0ac\ud568  ?>\r\n    }\r\n\r\n    return true;\r\n}\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '300600';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($w == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if(preg_match(\"/[^a-z0-9_]/i\", $co_id)) alert(\"ID \ub294 \uc601\ubb38\uc790, \uc22b\uc790, _ \ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.\");\r\n\r\n    $sql = \" select * from {$g5['content_table']} where co_id = '$co_id' \";\r\n    $co_row = sql_fetch($sql);\r\n}\r\n\r\n$co_subject = strip_tags($co_subject);\r\n$co_include_head = preg_replace(array(\"#[\\\\\\]+$#\", \"#(<\\?php|<\\?)#i\"), \"\", substr($co_include_head, 0, 255));\r\n$co_include_tail = preg_replace(array(\"#[\\\\\\]+$#\", \"#(<\\?php|<\\?)#i\"), \"\", substr($co_include_tail, 0, 255));\r\n\r\n// \uad00\ub9ac\uc790\uac00 \uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0\ub97c \uc0ac\uc6a9\ud574\uc57c \ud560 \uacbd\uc6b0\r\nif (($co_row['co_include_head'] !== $co_include_head || $co_row['co_include_tail'] !== $co_include_tail) && function_exists('get_admin_captcha_by') && get_admin_captcha_by()){\r\n    include_once(G5_CAPTCHA_PATH.'/captcha.lib.php');\r\n\r\n    if (!chk_captcha()) {\r\n        alert('\uc790\ub3d9\ub4f1\ub85d\ubc29\uc9c0 \uc22b\uc790\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\n@mkdir(G5_DATA_PATH.\"/content\", G5_DIR_PERMISSION);\r\n@chmod(G5_DATA_PATH.\"/content\", G5_DIR_PERMISSION);\r\n\r\nif ($co_himg_del)  @unlink(G5_DATA_PATH.\"/content/{$co_id}_h\");\r\nif ($co_timg_del)  @unlink(G5_DATA_PATH.\"/content/{$co_id}_t\");\r\n\r\n$error_msg = '';\r\n\r\nif( $co_include_head ){\r\n\r\n    $file_ext = pathinfo($co_include_head, PATHINFO_EXTENSION);\r\n\r\n    if( ! $file_ext || ! in_array($file_ext, array('php', 'htm', 'html')) || ! preg_match('/^.*\\.(php|htm|html)$/i', $co_include_head) ) {\r\n        alert('\uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc758 \ud655\uc7a5\uc790\ub294 php, htm, html \ub9cc \ud5c8\uc6a9\ud569\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\nif( $co_include_tail ){\r\n\r\n    $file_ext = pathinfo($co_include_tail, PATHINFO_EXTENSION);\r\n\r\n    if( ! $file_ext || ! in_array($file_ext, array('php', 'htm', 'html')) || ! preg_match('/^.*\\.(php|htm|html)$/i', $co_include_tail) ) {\r\n        alert('\ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc758 \ud655\uc7a5\uc790\ub294 php, htm, html \ub9cc \ud5c8\uc6a9\ud569\ub2c8\ub2e4.');\r\n    }\r\n}\r\n\r\nif( $co_include_head && ! is_include_path_check($co_include_head) ){\r\n    $co_include_head = '';\r\n    $error_msg = '/data/file/ \ub610\ub294 /data/editor/ \ud3ec\ud568\ub41c \ubb38\uc790\ub97c \uc0c1\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc5d0 \ud3ec\ud568\uc2dc\ud0ac\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.';\r\n}\r\n\r\nif( $co_include_tail && ! is_include_path_check($co_include_tail) ){\r\n    $co_include_tail = '';\r\n    $error_msg = '/data/file/ \ub610\ub294 /data/editor/ \ud3ec\ud568\ub41c \ubb38\uc790\ub97c \ud558\ub2e8 \ud30c\uc77c \uacbd\ub85c\uc5d0 \ud3ec\ud568\uc2dc\ud0ac\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.';\r\n}\r\n\r\n$sql_common = \" co_include_head     = '$co_include_head',\r\n                co_include_tail     = '$co_include_tail',\r\n                co_html             = '$co_html',\r\n                co_tag_filter_use   = '$co_tag_filter_use',\r\n                co_subject          = '$co_subject',\r\n                co_content          = '$co_content',\r\n                co_mobile_content   = '$co_mobile_content',\r\n                co_skin             = '$co_skin',\r\n                co_mobile_skin      = '$co_mobile_skin' \";\r\n\r\nif ($w == \"\")\r\n{\r\n    $row = $co_row;\r\n    if ($row['co_id'])\r\n        alert(\"\uc774\ubbf8 \uac19\uc740 ID\ub85c \ub4f1\ub85d\ub41c \ub0b4\uc6a9\uc774 \uc788\uc2b5\ub2c8\ub2e4.\");\r\n\r\n    $sql = \" insert {$g5['content_table']}\r\n                set co_id = '$co_id',\r\n                    $sql_common \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['content_table']}\r\n                set $sql_common\r\n              where co_id = '$co_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    @unlink(G5_DATA_PATH.\"/content/{$co_id}_h\");\r\n    @unlink(G5_DATA_PATH.\"/content/{$co_id}_t\");\r\n\r\n    $sql = \" delete from {$g5['content_table']} where co_id = '$co_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif(function_exists('get_admin_captcha_by'))\r\n    get_admin_captcha_by('remove');\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if ($_FILES['co_himg']['name'])\r\n    {\r\n        $dest_path = G5_DATA_PATH.\"/content/\".$co_id.\"_h\";\r\n        @move_uploaded_file($_FILES['co_himg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n    if ($_FILES['co_timg']['name'])\r\n    {\r\n        $dest_path = G5_DATA_PATH.\"/content/\".$co_id.\"_t\";\r\n        @move_uploaded_file($_FILES['co_timg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n\r\n    if( $error_msg ){\r\n        alert($error_msg, \"./contentform.php?w=u&amp;co_id=$co_id\");\r\n    } else {\r\n        goto_url(\"./contentform.php?w=u&amp;co_id=$co_id\");\r\n    }\r\n}\r\nelse\r\n{\r\n    goto_url(\"./contentlist.php\");\r\n}\r\n?>\r\n", "<?php\r\n$sub_menu = '300700';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$html_title = 'FAQ';\r\n\r\n$fm_id = preg_replace('/[^0-9]/', '', $fm_id);\r\n\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= ' \uc218\uc815';\r\n    $readonly = ' readonly';\r\n\r\n    $sql = \" select * from {$g5['faq_master_table']} where fm_id = '$fm_id' \";\r\n    $fm = sql_fetch($sql);\r\n    if (!$fm['fm_id']) alert('\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n}\r\nelse\r\n{\r\n    $html_title .= ' \uc785\ub825';\r\n    $fm = array();\r\n}\r\n\r\n$g5['title'] = $html_title.' \uad00\ub9ac';\r\n\r\n// \ubaa8\ubc14\uc77c \uc0c1\ud558\ub2e8 \ub0b4\uc6a9 \ud544\ub4dc\ucd94\uac00\r\nif(!sql_query(\" select fm_mobile_head_html from {$g5['faq_master_table']} limit 1 \", false)) {\r\n    sql_query(\" ALTER TABLE `{$g5['faq_master_table']}`\r\n                    ADD `fm_mobile_head_html` text NOT NULL AFTER `fm_tail_html`,\r\n                    ADD `fm_mobile_tail_html` text NOT NULL AFTER `fm_mobile_head_html` \", true);\r\n}\r\n\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmfaqmasterform\" action=\"./faqmasterformupdate.php\" onsubmit=\"return frmfaqmasterform_check(this);\" method=\"post\" enctype=\"MULTIPART/FORM-DATA\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"fm_id\" value=\"<?php echo $fm_id; ?>\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_order\">\ucd9c\ub825\uc21c\uc11c</label></th>\r\n        <td>\r\n            <?php echo help('\uc22b\uc790\uac00 \uc791\uc744\uc218\ub85d FAQ \ubd84\ub958\uc5d0\uc11c \uba3c\uc800 \ucd9c\ub825\ub429\ub2c8\ub2e4.'); ?>\r\n            <input type=\"text\" name=\"fm_order\" value=\"<?php echo $fm['fm_order']; ?>\" id=\"fm_order\" class=\"frm_input\" maxlength=\"10\" size=\"10\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_subject\">\uc81c\ubaa9</label></th>\r\n        <td>\r\n            <input type=\"text\" value=\"<?php echo get_text($fm['fm_subject']); ?>\" name=\"fm_subject\" id=\"fm_subject\" required class=\"frm_input required\"  size=\"70\">\r\n            <?php if ($w == 'u') { ?>\r\n            <a href=\"<?php echo G5_BBS_URL; ?>/faq.php?fm_id=<?php echo $fm_id; ?>\" class=\"btn_frmline\">\ubcf4\uae30</a>\r\n            <a href=\"./faqlist.php?fm_id=<?php echo $fm_id; ?>\" class=\"btn_frmline\">\uc0c1\uc138\ubcf4\uae30</a>\r\n            <?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_himg\">\uc0c1\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"fm_himg\" id=\"fm_himg\">\r\n            <?php\r\n            $himg = G5_DATA_PATH.'/faq/'.$fm['fm_id'].'_h';\r\n            if (file_exists($himg)) {\r\n                $size = @getimagesize($himg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"fm_himg_del\" value=\"1\" id=\"fm_himg_del\"> <label for=\"fm_himg_del\">\uc0ad\uc81c</label>';\r\n                $himg_str = '<img src=\"'.G5_DATA_URL.'/faq/'.$fm['fm_id'].'_h\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($himg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $himg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"fm_timg\">\ud558\ub2e8\uc774\ubbf8\uc9c0</label></th>\r\n        <td>\r\n            <input type=\"file\" name=\"fm_timg\" id=\"fm_timg\">\r\n            <?php\r\n            $timg = G5_DATA_PATH.'/faq/'.$fm['fm_id'].'_t';\r\n            if (file_exists($timg)) {\r\n                $size = @getimagesize($timg);\r\n                if($size[0] && $size[0] > 750)\r\n                    $width = 750;\r\n                else\r\n                    $width = $size[0];\r\n\r\n                echo '<input type=\"checkbox\" name=\"fm_timg_del\" value=\"1\" id=\"fm_timg_del\"><label for=\"fm_timg_del\">\uc0ad\uc81c</label>';\r\n                $timg_str = '<img src=\"'.G5_DATA_URL.'/faq/'.$fm['fm_id'].'_t\" width=\"'.$width.'\" alt=\"\">';\r\n            }\r\n            if ($timg_str) {\r\n                echo '<div class=\"banner_or_img\">';\r\n                echo $timg_str;\r\n                echo '</div>';\r\n            }\r\n            ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc0c1\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_head_html', get_text($fm['fm_head_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ud558\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_tail_html', get_text($fm['fm_tail_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c\uc0c1\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_mobile_head_html', get_text($fm['fm_mobile_head_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\ubaa8\ubc14\uc77c\ud558\ub2e8 \ub0b4\uc6a9</th>\r\n        <td>\r\n            <?php echo editor_html('fm_mobile_tail_html', get_text($fm['fm_mobile_tail_html'], 0)); ?>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./faqmasterlist.php\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\">\r\n</div>\r\n\r\n</form>\r\n\r\n<script>\r\nfunction frmfaqmasterform_check(f)\r\n{\r\n    <?php echo get_editor_js('fm_head_html'); ?>\r\n    <?php echo get_editor_js('fm_tail_html'); ?>\r\n    <?php echo get_editor_js('fm_mobile_head_html'); ?>\r\n    <?php echo get_editor_js('fm_mobile_tail_html'); ?>\r\n}\r\n\r\n// document.frmfaqmasterform.fm_subject.focus();\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '300700';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($W == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\n@mkdir(G5_DATA_PATH.\"/faq\", G5_DIR_PERMISSION);\r\n@chmod(G5_DATA_PATH.\"/faq\", G5_DIR_PERMISSION);\r\n\r\nif ($fm_himg_del)  @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_h\");\r\nif ($fm_timg_del)  @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_t\");\r\n\r\n$fm_subject = strip_tags($fm_subject);\r\n\r\n$sql_common = \" set fm_subject = '$fm_subject',\r\n                    fm_head_html = '$fm_head_html',\r\n                    fm_tail_html = '$fm_tail_html',\r\n                    fm_mobile_head_html = '$fm_mobile_head_html',\r\n                    fm_mobile_tail_html = '$fm_mobile_tail_html',\r\n                    fm_order = '$fm_order' \";\r\n\r\nif ($w == \"\")\r\n{\r\n    $sql = \" alter table {$g5['faq_master_table']} auto_increment=1 \";\r\n    sql_query($sql);\r\n\r\n    $sql = \" insert {$g5['faq_master_table']} $sql_common \";\r\n    sql_query($sql);\r\n\r\n    $fm_id = sql_insert_id();\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['faq_master_table']} $sql_common where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_h\");\r\n    @unlink(G5_DATA_PATH.\"/faq/{$fm_id}_t\");\r\n\r\n    // FAQ\uc0ad\uc81c\r\n\t$sql = \" delete from {$g5['faq_master_table']} where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n\r\n    // FAQ\uc0c1\uc138\uc0ad\uc81c\r\n\t$sql = \" delete from {$g5['faq_table']} where fm_id = '$fm_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif ($w == \"\" || $w == \"u\")\r\n{\r\n    if ($_FILES['fm_himg']['name']){\r\n        $dest_path = G5_DATA_PATH.\"/faq/\".$fm_id.\"_h\";\r\n        @move_uploaded_file($_FILES['fm_himg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n    if ($_FILES['fm_timg']['name']){\r\n        $dest_path = G5_DATA_PATH.\"/faq/\".$fm_id.\"_t\";\r\n        @move_uploaded_file($_FILES['fm_timg']['tmp_name'], $dest_path);\r\n        @chmod($dest_path, G5_FILE_PERMISSION);\r\n    }\r\n\r\n    goto_url(\"./faqmasterform.php?w=u&amp;fm_id=$fm_id\");\r\n}\r\nelse\r\n    goto_url(\"./faqmasterlist.php\");\r\n?>\r\n", "<?php\r\n$sub_menu = '100310';\r\ninclude_once('./_common.php');\r\ninclude_once(G5_EDITOR_LIB);\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$nw_id = preg_replace('/[^0-9]/', '', $nw_id);\r\n\r\n$html_title = \"\ud31d\uc5c5\ub808\uc774\uc5b4\";\r\nif ($w == \"u\")\r\n{\r\n    $html_title .= \" \uc218\uc815\";\r\n    $sql = \" select * from {$g5['new_win_table']} where nw_id = '$nw_id' \";\r\n    $nw = sql_fetch($sql);\r\n    if (!$nw['nw_id']) alert(\"\ub4f1\ub85d\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\");\r\n}\r\nelse\r\n{\r\n    $html_title .= \" \uc785\ub825\";\r\n    $nw['nw_device'] = 'both';\r\n    $nw['nw_disable_hours'] = 24;\r\n    $nw['nw_left']   = 10;\r\n    $nw['nw_top']    = 10;\r\n    $nw['nw_width']  = 450;\r\n    $nw['nw_height'] = 500;\r\n    $nw['nw_content_html'] = 2;\r\n}\r\n\r\n$g5['title'] = $html_title;\r\ninclude_once (G5_ADMIN_PATH.'/admin.head.php');\r\n?>\r\n\r\n<form name=\"frmnewwin\" action=\"./newwinformupdate.php\" onsubmit=\"return frmnewwin_check(this);\" method=\"post\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo $w; ?>\">\r\n<input type=\"hidden\" name=\"nw_id\" value=\"<?php echo $nw_id; ?>\">\r\n<input type=\"hidden\" name=\"token\" value=\"\">\r\n\r\n<div class=\"local_desc01 local_desc\">\r\n    <p>\ucd08\uae30\ud654\uba74 \uc811\uc18d \uc2dc \uc790\ub3d9\uc73c\ub85c \ub730 \ud31d\uc5c5\ub808\uc774\uc5b4\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.</p>\r\n</div>\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_device\">\uc811\uc18d\uae30\uae30</label></th>\r\n        <td>\r\n            <?php echo help(\"\ud31d\uc5c5\ub808\uc774\uc5b4\uac00 \ud45c\uc2dc\ub420 \uc811\uc18d\uae30\uae30\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\"); ?>\r\n            <select name=\"nw_device\" id=\"nw_device\">\r\n                <option value=\"both\"<?php echo get_selected($nw['nw_device'], 'both', true); ?>>PC\uc640 \ubaa8\ubc14\uc77c</option>\r\n                <option value=\"pc\"<?php echo get_selected($nw['nw_device'], 'pc'); ?>>PC</option>\r\n                <option value=\"mobile\"<?php echo get_selected($nw['nw_device'], 'mobile'); ?>>\ubaa8\ubc14\uc77c</option>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_disable_hours\">\uc2dc\uac04<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <?php echo help(\"\uace0\uac1d\uc774 \ub2e4\uc2dc \ubcf4\uc9c0 \uc54a\uc74c\uc744 \uc120\ud0dd\ud560 \uc2dc \uba87 \uc2dc\uac04\ub3d9\uc548 \ud31d\uc5c5\ub808\uc774\uc5b4\ub97c \ubcf4\uc5ec\uc8fc\uc9c0 \uc54a\uc744\uc9c0 \uc124\uc815\ud569\ub2c8\ub2e4.\"); ?>\r\n            <input type=\"text\" name=\"nw_disable_hours\" value=\"<?php echo $nw['nw_disable_hours']; ?>\" id=\"nw_disable_hours\" required class=\"frm_input required\" size=\"5\"> \uc2dc\uac04\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_begin_time\">\uc2dc\uc791\uc77c\uc2dc<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_begin_time\" value=\"<?php echo $nw['nw_begin_time']; ?>\" id=\"nw_begin_time\" required class=\"frm_input required\" size=\"21\" maxlength=\"19\">\r\n            <input type=\"checkbox\" name=\"nw_begin_chk\" value=\"<?php echo date(\"Y-m-d 00:00:00\", G5_SERVER_TIME); ?>\" id=\"nw_begin_chk\" onclick=\"if (this.checked == true) this.form.nw_begin_time.value=this.form.nw_begin_chk.value; else this.form.nw_begin_time.value = this.form.nw_begin_time.defaultValue;\">\r\n            <label for=\"nw_begin_chk\">\uc2dc\uc791\uc77c\uc2dc\ub97c \uc624\ub298\ub85c</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_end_time\">\uc885\ub8cc\uc77c\uc2dc<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_end_time\" value=\"<?php echo $nw['nw_end_time']; ?>\" id=\"nw_end_time\" required class=\"frm_input required\" size=\"21\" maxlength=\"19\">\r\n            <input type=\"checkbox\" name=\"nw_end_chk\" value=\"<?php echo date(\"Y-m-d 23:59:59\", G5_SERVER_TIME+(60*60*24*7)); ?>\" id=\"nw_end_chk\" onclick=\"if (this.checked == true) this.form.nw_end_time.value=this.form.nw_end_chk.value; else this.form.nw_end_time.value = this.form.nw_end_time.defaultValue;\">\r\n            <label for=\"nw_end_chk\">\uc885\ub8cc\uc77c\uc2dc\ub97c \uc624\ub298\ub85c\ubd80\ud130 7\uc77c \ud6c4\ub85c</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_left\">\ud31d\uc5c5\ub808\uc774\uc5b4 \uc88c\uce21 \uc704\uce58<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n           <input type=\"text\" name=\"nw_left\" value=\"<?php echo $nw['nw_left']; ?>\" id=\"nw_left\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_top\">\ud31d\uc5c5\ub808\uc774\uc5b4 \uc0c1\ub2e8 \uc704\uce58<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_top\" value=\"<?php echo $nw['nw_top']; ?>\" id=\"nw_top\" required class=\"frm_input required\"  size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_width\">\ud31d\uc5c5\ub808\uc774\uc5b4 \ub113\uc774<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_width\" value=\"<?php echo $nw['nw_width'] ?>\" id=\"nw_width\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_height\">\ud31d\uc5c5\ub808\uc774\uc5b4 \ub192\uc774<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_height\" value=\"<?php echo $nw['nw_height'] ?>\" id=\"nw_height\" required class=\"frm_input required\" size=\"5\"> px\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_subject\">\ud31d\uc5c5 \uc81c\ubaa9<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"nw_subject\" value=\"<?php echo get_sanitize_input($nw['nw_subject']); ?>\" id=\"nw_subject\" required class=\"frm_input required\" size=\"80\">\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"nw_content\">\ub0b4\uc6a9</label></th>\r\n        <td><?php echo editor_html('nw_content', get_text($nw['nw_content'], 0)); ?></td>\r\n    </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <a href=\"./newwinlist.php\" class=\" btn btn_02\">\ubaa9\ub85d</a>\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\">\r\n</div>\r\n</form>\r\n\r\n<script>\r\nfunction frmnewwin_check(f)\r\n{\r\n    errmsg = \"\";\r\n    errfld = \"\";\r\n\r\n    <?php echo get_editor_js('nw_content'); ?>\r\n\r\n    check_field(f.nw_subject, \"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.\");\r\n\r\n    if (errmsg != \"\") {\r\n        alert(errmsg);\r\n        errfld.focus();\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n</script>\r\n\r\n<?php\r\ninclude_once (G5_ADMIN_PATH.'/admin.tail.php');\r\n?>\r\n", "<?php\r\n$sub_menu = '100310';\r\ninclude_once('./_common.php');\r\n\r\nif ($w == \"u\" || $w == \"d\")\r\n    check_demo();\r\n\r\nif ($w == 'd')\r\n    auth_check($auth[$sub_menu], \"d\");\r\nelse\r\n    auth_check($auth[$sub_menu], \"w\");\r\n\r\ncheck_admin_token();\r\n\r\n$nw_subject = isset($_POST['nw_subject']) ? strip_tags($_POST['nw_subject']) : '';\r\n\r\n$sql_common = \" nw_device = '{$_POST['nw_device']}',\r\n                nw_begin_time = '{$_POST['nw_begin_time']}',\r\n                nw_end_time = '{$_POST['nw_end_time']}',\r\n                nw_disable_hours = '{$_POST['nw_disable_hours']}',\r\n                nw_left = '{$_POST['nw_left']}',\r\n                nw_top = '{$_POST['nw_top']}',\r\n                nw_height = '{$_POST['nw_height']}',\r\n                nw_width = '{$_POST['nw_width']}',\r\n                nw_subject = '{$nw_subject}',\r\n                nw_content = '{$_POST['nw_content']}',\r\n                nw_content_html = '{$_POST['nw_content_html']}' \";\r\n\r\nif($w == \"\")\r\n{\r\n    $sql = \" insert {$g5['new_win_table']} set $sql_common \";\r\n    sql_query($sql);\r\n\r\n    $nw_id = sql_insert_id();\r\n}\r\nelse if ($w == \"u\")\r\n{\r\n    $sql = \" update {$g5['new_win_table']} set $sql_common where nw_id = '$nw_id' \";\r\n    sql_query($sql);\r\n}\r\nelse if ($w == \"d\")\r\n{\r\n    $sql = \" delete from {$g5['new_win_table']} where nw_id = '$nw_id' \";\r\n    sql_query($sql);\r\n}\r\n\r\nif ($w == \"d\")\r\n{\r\n    goto_url('./newwinlist.php');\r\n}\r\nelse\r\n{\r\n    goto_url(\"./newwinform.php?w=u&amp;nw_id=$nw_id\");\r\n}\r\n?>\r\n", "<?php\n$sub_menu = \"200200\";\ninclude_once('./_common.php');\n\nauth_check($auth[$sub_menu], 'w');\n\ncheck_admin_token();\n\n$mb_id = strip_tags($_POST['mb_id']);\n$po_point = strip_tags($_POST['po_point']);\n$po_content = strip_tags($_POST['po_content']);\n$expire = preg_replace('/[^0-9]/', '', $_POST['po_expire_term']);\n\n$mb = get_member($mb_id);\n\nif (!$mb['mb_id'])\n    alert('\uc874\uc7ac\ud558\ub294 \ud68c\uc6d0\uc544\uc774\ub514\uac00 \uc544\ub2d9\ub2c8\ub2e4.', './point_list.php?'.$qstr);\n\nif (($po_point < 0) && ($po_point * (-1) > $mb['mb_point']))\n    alert('\ud3ec\uc778\ud2b8\ub97c \uae4e\ub294 \uacbd\uc6b0 \ud604\uc7ac \ud3ec\uc778\ud2b8\ubcf4\ub2e4 \uc791\uc73c\uba74 \uc548\ub429\ub2c8\ub2e4.', './point_list.php?'.$qstr);\n\ninsert_point($mb_id, $po_point, $po_content, '@passive', $mb_id, $member['mb_id'].'-'.uniqid(''), $expire);\n\ngoto_url('./point_list.php?'.$qstr);\n?>\n", "<?php\r\n$sub_menu = \"900800\";\r\ninclude_once(\"./_common.php\");\r\n\r\nauth_check($auth[$sub_menu], \"w\");\r\n\r\n$g5['title'] = \"\ud734\ub300\ud3f0\ubc88\ud638 \uc5c5\ub370\uc774\ud2b8\";\r\n\r\n$g5['sms5_demo'] = 0;\r\n\r\n$is_hp_exist = false;\r\n\r\n$bk_hp = get_hp($bk_hp);\r\n\r\nif ($w=='u') // \uc5c5\ub370\uc774\ud2b8\r\n{\r\n    if (!$bg_no) $bg_no = 0;\r\n\r\n    if (!$bk_receipt) $bk_receipt = 0; else $bk_receipt = 1;\r\n\r\n    if (!strlen(trim($bk_name)))\r\n        alert('\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694');\r\n\r\n    $bk_name = strip_tags($bk_name);\r\n\r\n    if ($bk_hp == '')\r\n        alert('\ud734\ub300\ud3f0\ubc88\ud638\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.');\r\n/*\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no<>'$bk_no' and bk_hp='$bk_hp'\");\r\n    if ($res)\r\n        alert('\uac19\uc740 \ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.');\r\n*/\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if ($bg_no != $res['bg_no']) {\r\n        if ($res['mb_id']) $mem = \"bg_member\"; else $mem = \"bg_nomember\";\r\n        if ($res['bk_receipt'] == 1) $sms = \"bg_receipt\"; else $sms = \"bg_reject\";\r\n        sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count - 1, $mem = $mem - 1, $sms = $sms - 1 where bg_no='{$res['bg_no']}'\");\r\n        sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count + 1, $mem = $mem + 1, $sms = $sms + 1 where bg_no='$bg_no'\");\r\n    }\r\n\r\n    if ($bk_receipt != $res['bk_receipt']) {\r\n        if ($bk_receipt == 1)\r\n            sql_query(\"update {$g5['sms5_book_group_table']} set bg_receipt = bg_receipt + 1, bg_reject = bg_reject - 1 where bg_no='$bg_no'\");\r\n        else\r\n            sql_query(\"update {$g5['sms5_book_group_table']} set bg_receipt = bg_receipt - 1, bg_reject = bg_reject + 1 where bg_no='$bg_no'\");\r\n    }\r\n\r\n    sql_query(\"update {$g5['sms5_book_table']} set bg_no='$bg_no', bk_name='$bk_name', bk_hp='$bk_hp', bk_receipt='$bk_receipt', bk_datetime='\".G5_TIME_YMDHIS.\"', bk_memo='\".addslashes($bk_memo).\"' where bk_no='$bk_no'\");\r\n    if ($res['mb_id']){ //\ub9cc\uc57d\uc5d0 mb_id\uac00 \uc788\ub2e4\uba74...\r\n        // \ud734\ub300\ud3f0\ubc88\ud638 \uc911\ubcf5\uccb4\ud06c\r\n        $sql = \" select mb_id from {$g5['member_table']} where mb_id <> '{$res['mb_id']}' and mb_hp = '{$bk_hp}' \";\r\n        $mb_hp_exist = sql_fetch($sql);\r\n        if ($mb_hp_exist['mb_id']) { //\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\ub2e4\uba74\r\n            $is_hp_exist = true;\r\n        } else {\r\n             sql_query(\"update {$g5['member_table']} set mb_name='\".addslashes($bk_name).\"', mb_hp='$bk_hp', mb_sms='$bk_receipt' where mb_id='{$res['mb_id']}'\", false);\r\n        }\r\n    }\r\n    $get_bg_no = $bg_no;\r\n\r\n    $go_url = './num_book_write.php?bk_no='.$bk_no.'&amp;w='.$w.'&amp;page='.$page;\r\n    if( $is_hp_exist ){ //\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\ub2e4\uba74\r\n        //alert( \"\uc911\ubcf5\ub41c \ud68c\uc6d0 \ud734\ub300\ud3f0\ubc88\ud638\uac00 \uc788\uc5b4\uc11c \ud68c\uc6d0\uc815\ubcf4\uc5d0\ub294 \ubc18\uc601\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\", $go_url );\r\n        goto_url($go_url);\r\n    } else {\r\n        goto_url($go_url);\r\n    }\r\n    exit;\r\n}\r\nelse if ($w=='d') // \uc0ad\uc81c\r\n{\r\n    if (!is_numeric($bk_no))\r\n        alert('\uace0\uc720\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if ($res['bk_receipt'] == 1) $bg_sms = 'bg_receipt'; else $bg_sms = 'bg_reject';\r\n    if ($res['mb_id']) $bg_mb = 'bg_member'; else $bg_mb = 'bg_nomember';\r\n\r\n    sql_query(\"delete from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count - 1, $bg_mb = $bg_mb - 1, $bg_sms = $bg_sms - 1 where bg_no = '{$res['bg_no']}'\");\r\n\r\n/*\r\n    if (!is_numeric($bk_no))\r\n        alert('\uace0\uc720\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from $g5[sms5_book_table] where bk_no='$bk_no'\");\r\n    if (!$res)\r\n        alert('\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \uc785\ub2c8\ub2e4.');\r\n\r\n    if (!$res[mb_id])\r\n    {\r\n        if ($res[receipt] == 1)\r\n            $sql_sms = \"bg_receipt = bg_receipt - 1\";\r\n        else\r\n            $sql_sms = \"bg_reject = bg_reject - 1\";\r\n\r\n        sql_query(\"delete from $g5[sms5_book_table] where bk_no='$bk_no'\");\r\n        sql_query(\"update $g5[sms5_book_group_table] set bg_count = bg_count - 1, bg_nomember = bg_nomember - 1, $sql_sms where bg_no = '$res[bg_no]'\");\r\n    }\r\n    else\r\n        alert(\"\ud68c\uc6d0\uc740 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\\\n\\\\n\ud68c\uc6d0\uad00\ub9ac \uba54\ub274\uc5d0\uc11c \uc0ad\uc81c\ud55c \ud6c4\\\\n\\\\n\ud68c\uc6d0\uc815\ubcf4\uc5c5\ub370\uc774\ud2b8 \uba54\ub274\ub97c \uc2e4\ud589 \ud574\uc8fc\uc138\uc694.\");\r\n*/\r\n}\r\nelse // \ub4f1\ub85d\r\n{\r\n    if (!$bg_no) $bg_no = 1;\r\n\r\n    if (!$bk_receipt) $bk_receipt = 0; else $bk_receipt = 1;\r\n\r\n    if (!strlen(trim($bk_name)))\r\n        alert('\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694');\r\n\r\n    if ($bk_hp == '')\r\n        alert('\ud734\ub300\ud3f0\ubc88\ud638\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.');\r\n\r\n    $res = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_hp='$bk_hp'\");\r\n    if ($res)\r\n        alert('\uac19\uc740 \ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.');\r\n\r\n    if ($bk_receipt == 1)\r\n        $sql_sms = \"bg_receipt = bg_receipt + 1\";\r\n    else\r\n        $sql_sms = \"bg_reject = bg_reject + 1\";\r\n\r\n    sql_query(\"insert into {$g5['sms5_book_table']} set bg_no='$bg_no', bk_name='\".addslashes($bk_name).\"', bk_hp='$bk_hp', bk_receipt='$bk_receipt', bk_datetime='\".G5_TIME_YMDHIS.\"', bk_memo='\".addslashes($bk_memo).\"'\");\r\n    sql_query(\"update {$g5['sms5_book_group_table']} set bg_count = bg_count + 1, bg_nomember = bg_nomember + 1, $sql_sms where bg_no = '$bg_no'\");\r\n\r\n    $get_bg_no = $bg_no;\r\n}\r\n\r\n$go_url = './num_book.php?page='.$page.'&amp;bg_no='.$get_bg_no.'&amp;ap='.$ap;\r\ngoto_url($go_url);\r\n?>", "<?php\r\n$sub_menu = \"900800\";\r\ninclude_once(\"./_common.php\");\r\n\r\n$colspan = 4;\r\n\r\nauth_check($auth[$sub_menu], \"r\");\r\n\r\n$g5['title'] = \"\ud734\ub300\ud3f0\ubc88\ud638 \";\r\n\r\n$exist_hplist = array();\r\n\r\nif ($w == 'u' && is_numeric($bk_no)) {\r\n    $write = sql_fetch(\"select * from {$g5['sms5_book_table']} where bk_no='$bk_no'\");\r\n    if (!$write)\r\n        alert('\ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.');\r\n\r\n    if ($write['mb_id']) {\r\n        $res = sql_fetch(\"select mb_id from {$g5['member_table']} where mb_id='{$write['mb_id']}'\");\r\n        $write['mb_id'] = $res['mb_id'];\r\n        $sql = \"select mb_id from {$g5['member_table']} where mb_hp = '{$write['bk_hp']}' and mb_id <> '{$write['mb_id']}' and mb_hp <> '' \";\r\n        $result = sql_query($sql);\r\n        while($tmp = sql_fetch_array($result)){\r\n            $exist_hplist[] = $tmp;\r\n        }\r\n        $exist_msg_1 = '(\uc218\uc815\uc2dc \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.)';\r\n        $exist_msg_2 = '(\uc218\uc815\uc2dc \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.)';\r\n        $exist_msg = count($exist_hplist) ? $exist_msg_1 : $exist_msg_2;\r\n    }\r\n    $g5['title'] .= '\uc218\uc815';\r\n}\r\nelse  {\r\n    $write = array('bg_no' => (int) $bg_no);\r\n    $g5['title'] .= '\ucd94\uac00';\r\n}\r\n\r\nif (!is_numeric($write['bk_receipt']))\r\n    $write['bk_receipt'] = 1;\r\n\r\n$no_group = sql_fetch(\"select * from {$g5['sms5_book_group_table']} where bg_no = 1\");\r\n\r\ninclude_once(G5_ADMIN_PATH.\"/admin.head.php\");\r\n?>\r\n\r\n<form name=\"book_form\" id=\"book_form\" method=\"post\" action=\"./num_book_update.php\">\r\n<input type=\"hidden\" name=\"w\" value=\"<?php echo get_sanitize_input($w); ?>\">\r\n<input type=\"hidden\" name=\"page\" value=\"<?php echo get_sanitize_input($page); ?>\">\r\n<input type=\"hidden\" name=\"ap\" value=\"<?php echo get_sanitize_input($ap); ?>\">\r\n<input type=\"hidden\" name=\"bk_no\" value=\"<?php echo $write['bk_no']?>\">\r\n<input type=\"hidden\" name=\"mb_id\" id=\"mb_id\" value=\"<?php echo $write['mb_id']?>\">\r\n<input type=\"hidden\" name=\"get_bg_no\" value=\"<?php echo get_sanitize_input($bg_no); ?>\">\r\n\r\n<div class=\"tbl_frm01 tbl_wrap\">\r\n    <table>\r\n    <caption><?php echo $g5['title']; ?></caption>\r\n    <colgroup>\r\n        <col class=\"grid_4\">\r\n        <col>\r\n    </colgroup>\r\n    <tbody>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bg_no\">\uadf8\ub8f9 <strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <select name=\"bg_no\" id=\"bg_no\" required class=\"required\">\r\n                <option value=\"1\"><?php echo $no_group['bg_name']?> (<?php echo number_format($no_group['bg_count'])?> \uba85)</option>\r\n                <?php\r\n                $qry = sql_query(\"select * from {$g5['sms5_book_group_table']} where bg_no> 1 order by bg_name\");\r\n                while($res = sql_fetch_array($qry)) {\r\n                ?>\r\n                <option value=\"<?php echo $res['bg_no']?>\" <?php echo $res['bg_no']==$write['bg_no']?'selected':''?>> <?php echo $res['bg_name']?>  (<?php echo number_format($res['bg_count'])?> \uba85) </option>\r\n                <?php } ?>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_name\">\uc774\ub984<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td><input type=\"text\" name=\"bk_name\" id=\"bk_name\" maxlength=\"50\" value=\"<?php echo get_sanitize_input($write['bk_name']); ?>\" required class=\"frm_input required\"></td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_hp\">\ud734\ub300\ud3f0\ubc88\ud638<strong class=\"sound_only\"> \ud544\uc218</strong></label></th>\r\n        <td>\r\n            <input type=\"text\" name=\"bk_hp\" id=\"bk_hp\" value=\"<?php echo $write['bk_hp']?>\" required class=\"frm_input required\">\r\n            <?php if( count($exist_hplist) ) { // \uc911\ubcf5\ub418\ub294 \ubaa9\ub85d\uc774 \uc788\ub2e4\uba74 ?>\r\n            <div id=\"hp_check_el\">\r\n                <ul>\r\n                <?php\r\n\n                foreach( $exist_hplist as $v ) {\r\n\n                    if( empty($v) ) continue;\r\n                    $href = G5_ADMIN_URL.\"/member_form.php?w=u&amp;mb_id={$v['mb_id']}\";\r\n                ?>\r\n                    <li><strong>\uc911\ubcf5\ub428 </strong><a href=\"<?php echo $href; ?>\" target=\"_blank\"><?php echo $v['mb_id']; ?></a></li>\r\n                <?php\r\n                }\r\n                ?>\r\n                </ul>\r\n            </div>\r\n            <?php } ?>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc218\uc2e0\uc5ec\ubd80</th>\r\n        <td>\r\n            <input type=\"radio\" name=\"bk_receipt\" id=\"bk_receipt_1\" value=\"1\" <?php echo $write['bk_receipt']?'checked':''?>>\r\n            <label for=\"bk_receipt_1\">\uc218\uc2e0\ud5c8\uc6a9</label>\r\n            <input type=\"radio\" name=\"bk_receipt\" id=\"bk_receipt_2\" value=\"0\" <?php echo !$write['bk_receipt']?'checked':''?>>\r\n            <label for=\"bk_receipt_2\">\uc218\uc2e0\uac70\ubd80</label>\r\n        </td>\r\n    </tr>\r\n    <?php if ($w == 'u') { ?>\r\n    <tr>\r\n        <th scope=\"row\">\ud68c\uc6d0\uc544\uc774\ub514</th>\r\n        <td> <?php echo $write['mb_id'] ? '<a href=\"'.G5_ADMIN_URL.'/member_form.php?w=u&amp;mb_id='.$write['mb_id'].'\">'.$write['mb_id'].'</a>' : '\ube44\ud68c\uc6d0'?> </td>\r\n    </tr>\r\n    <tr>\r\n        <th scope=\"row\">\uc5c5\ub370\uc774\ud2b8</th>\r\n        <td> <?php echo $write['bk_datetime']?> </td>\r\n    </tr>\r\n    <?php } ?>\r\n    <tr>\r\n        <th scope=\"row\"><label for=\"bk_memo\">\uba54\ubaa8</label></th>\r\n        <td>\r\n            <textarea name=\"bk_memo\" id=\"bk_memo\"><?php echo $write['bk_memo']?></textarea>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n</table>\r\n</div>\r\n\r\n<div class=\"btn_fixed_top\">\r\n    <input type=\"submit\" value=\"\ud655\uc778\" class=\"btn_submit btn\" accesskey=\"s\" onclick=\"return book_submit();\">\r\n    <a href=\"./num_book.php?<?php echo clean_query_string($_SERVER['QUERY_STRING']); ?>\" class=\"btn btn_02\">\ubaa9\ub85d</a>\r\n</div>\r\n\r\n</form>\r\n<script>\r\nfunction book_submit(){\r\n    var f = document.book_form;\r\n    var regExp_hp = /^(01[016789]{1}|02|0[3-9]{1}[0-9]{1})-?[0-9]{3,4}-?[0-9]{4}$/;\r\n\r\n    if(!f.bk_hp.value){\r\n        f.bk_hp.focus();\r\n        alert(\"\ud734\ub300\ud3f0\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.\");\r\n        return false;\r\n    } else if ( !regExp_hp.test(f.bk_hp.value) )\r\n    {\r\n        f.bk_hp.focus();\r\n        alert(\"\ud734\ub300\ud3f0\ubc88\ud638 \uc785\ub825\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\");\r\n        return false;\r\n    }\r\n\r\n    var w = \"<?php echo $w; ?>\";\r\n    var bk_no = \"<?php echo $bk_no; ?>\";\r\n    var mb_id = f.mb_id.value;\r\n    var bk_hp = f.bk_hp.value;\r\n    var params = { w: w, bk_no: bk_no, mb_id : mb_id, bk_hp : bk_hp };\r\n    var is_submit;\r\n\r\n    $.ajax({\r\n        url: \"./ajax.hp_chk.php\",\r\n        type: \"POST\",\r\n        cache:false,\r\n        timeout : 30000,\r\n        dataType:\"json\",\r\n        data:params,\r\n        success: function(data) {\r\n            if(data.error) {\r\n                is_submit = false;\r\n                alert( data.error );\r\n            } else {\r\n                var list_text = \"\";\r\n                var list_data;\r\n\r\n                $.each( data.exist , function(num) {\r\n                    list_data = data.exist[num];\r\n\r\n                    if(list_data) {\r\n                        var href = \"<?php echo G5_ADMIN_URL ?>/member_form.php?w=u&mb_id=\"+list_data;\r\n                        list_text += \"<li><a href=\\\"\"+href+\"\\\" target=\\\"_blank\\\">\"+list_data+\"</a></li>\";\r\n                    }\r\n                });\r\n\r\n                var $check_msg = $(\"#hp_check_el\");\r\n\r\n                if( !list_text ){ // \uc911\ubcf5 \ud734\ub300\ud3f0 \ubc88\ud638\uac00 \uc5c6\ub2e4\uba74 submit\r\n                    if($check_msg.size()> 0)\r\n                        $check_msg.remove();\r\n\r\n                    is_submit = true;\r\n                } else {\r\n                    if($check_msg.size() < 1)\r\n                        $(\"input#bk_hp\").after(\"<div id=\\\"hp_check_el\\\"><h3>\uc774 \ubc88\ud638\ub97c \uc4f0\ub294 \ud68c\uc6d0 \uc815\ubcf4</h3><ul></ul></div>\");\r\n\r\n                    $(\"#hp_check_el\").find(\"ul\").html( list_text );\r\n\r\n                    if(confirm(\"\ud68c\uc6d0 \uc815\ubcf4\uc5d0 \uc911\ubcf5 \ud734\ub300\ud3f0 \ubc88\ud638\uac00 \uc788\uc2b5\ub2c8\ub2e4.\uc218\uc815\ud558\uc2e4 \uacbd\uc6b0 \ud68c\uc6d0\uc815\ubcf4\uc5d0 \ubc18\uc601\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\\n\uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\"))\r\n                        is_submit = true;\r\n                    else\r\n                        is_submit = false;\r\n                }\r\n            }\r\n\r\n            if(is_submit)\r\n                f.submit();\r\n        }\r\n    });\r\n\r\n    return false;\r\n}\r\n</script>\r\n<?php\r\ninclude_once(G5_ADMIN_PATH.'/admin.tail.php');\r\n?>"], "filenames": ["adm/boardgroup_form.php", "adm/boardgroup_form_update.php", "adm/boardgroup_list_update.php", "adm/contentform.php", "adm/contentformupdate.php", "adm/faqmasterform.php", "adm/faqmasterformupdate.php", "adm/newwinform.php", "adm/newwinformupdate.php", "adm/point_update.php", "adm/sms_admin/num_book_update.php", "adm/sms_admin/num_book_write.php"], "buggy_code_start_loc": [15, 19, 21, 52, 22, 23, 19, 112, 14, 9, 22, 33], "buggy_code_end_loc": [16, 20, 26, 55, 22, 23, 19, 113, 24, 12, 22, 78], "fixing_code_start_loc": [15, 19, 22, 52, 23, 24, 20, 112, 15, 9, 23, 33], "fixing_code_end_loc": [16, 22, 27, 57, 24, 25, 22, 113, 26, 12, 25, 78], "type": "CWE-79", "message": "Cross-Site Scripting (XSS) vulnerability in newwinform.php in GNUBOARD5 before 5.3.1.6 allows remote attackers to inject arbitrary web script or HTML via the popup title parameter.", "other": {"cve": {"id": "CVE-2018-15585", "sourceIdentifier": "cve@mitre.org", "published": "2019-03-27T20:29:03.690", "lastModified": "2019-03-28T13:54:38.270", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-Site Scripting (XSS) vulnerability in newwinform.php in GNUBOARD5 before 5.3.1.6 allows remote attackers to inject arbitrary web script or HTML via the popup title parameter."}, {"lang": "es", "value": "Vulnerabilidad de Cross-Site Scripting (XSS) en newwinform.php en GNUBOARD5, en versiones anteriores a la 5.3.1.6, permite que atacantes remotos inyecten scripts web o HTML arbitrarios mediante el par\u00e1metro popup title."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:gnuboard5_project:gnuboard5:*:*:*:*:*:*:*:*", "versionEndExcluding": "5.3.1.6", "matchCriteriaId": "BE3770F8-701C-488C-B0D7-00321A38D96C"}]}]}], "references": [{"url": "https://github.com/gnuboard/gnuboard5/blob/b1fc952c7600b825c4b02e2789ddafdea18c8d13/adm/newwinform.php", "source": "cve@mitre.org", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/gnuboard/gnuboard5/blob/b1fc952c7600b825c4b02e2789ddafdea18c8d13/adm/newwinformupdate.php", "source": "cve@mitre.org", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/gnuboard/gnuboard5/commit/b1fc952c7600b825c4b02e2789ddafdea18c8d13", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/gnuboard/gnuboard5/commit/b1fc952c7600b825c4b02e2789ddafdea18c8d13"}}