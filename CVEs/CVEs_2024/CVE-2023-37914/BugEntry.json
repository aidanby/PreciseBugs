{"buggy_code": ["<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n\n<!--\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n-->\n\n<xwikidoc version=\"1.4\" reference=\"Invitation.InvitationCommon\" locale=\"\">\n  <web>Invitation</web>\n  <name>InvitationCommon</name>\n  <language/>\n  <defaultLanguage/>\n  <translation>0</translation>\n  <creator>xwiki:XWiki.Admin</creator>\n  <parent>Invitation.WebHome</parent>\n  <author>xwiki:XWiki.Admin</author>\n  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>\n  <version>1.1</version>\n  <title/>\n  <comment/>\n  <minorEdit>false</minorEdit>\n  <syntaxId>xwiki/2.1</syntaxId>\n  <hidden>true</hidden>\n  <content>{{velocity}}\n#*\n * Invitation Application\n * This document contains common macros used by all documents in the Invitation Application.\n *\n * Macros in this script don't rely on any variables except those which are passed to them and the following:\n *\n * $doc the com.xpn.xwiki.api.Document object representing the document containing this code.\n * $msg the internationalization message provider containing a get(String) and a get(String, List) function\n * $xcontext the com.xpn.xwiki.Context object for this request\n * $xwiki an object of the com.xpn.xwiki.api.XWiki class.\n * $escapetool an object of class org.apache.velocity.tools.generic.EscapeTool\n * $util used to get a newline character ($util.getNewLine())\n *\n * No macros in this script depend on any other macros.\n *###\n##\n#if($request.getParameter('test') == '1')\n  {{info}}testLoadInvitationConfig{{/info}}\n  #testLoadInvitationConfig()\n#elseif($doc.documentReference.name == 'InvitationCommon')\n  #set ($linkTarget = \"${doc.getSpace()}.WebHome\")\n  #set ($linkTarget = $services.rendering.escape($linkTarget, 'xwiki/2.1'))\n  {{info}}$services.localization.render('xe.invitation.internalDocument', [$linkTarget]){{/info}}\n#end\n##\n#*\n * Display a message for the sender (preview) or for the admin (review sent messages)\n *\n * $mail (XObject representing email message) the message to view\n *\n * $recipients (List&lt;String&gt;) (Optional) the list of email addresses to override the list provided by $mail\n *                                       used for preview because createMailFromTemplate will exclude addresses\n *                                       which are invalid and we want to show the invalid addresses to the\n *                                       user to tell them that they need to correct them.\n *\n * $invalidAddresses (List&lt;String&gt;) (Optional) List of invalid email addresses in recipients. Needed if you want to\n *                                             show the user that they made a mistake on some addresses.\n *                                             For each email in $invalidEmails, if it is also in $recipients, then it\n *                                             will be marked but left in the same order, emails in $invlaidEmails but\n *                                             not found in $recipients will end up at the end of the list.\n *###\n#macro(displayMessage, $mail, $recipients, $invalidAddresses)\n\n  {{html wiki=false clean=false}}\n  &lt;div id=\"invitation-displaymessage\" class=\"invitation\"&gt;\n   &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.previewLabel'))&lt;/strong&gt;\n   &lt;div class=\"invitation invitation-preview\"&gt;\n    #set($recips = [])\n    #set($invalid = [])\n    ## get the lists of valid and invalid email addresses.\n    #if(\"$!invalidAddresses\" == '')\n      #set($invalid = [])\n      #if(\"$!recipients\" == '')\n        #set($recips = [$mail.getProperty('recipient').getValue().trim()])\n      #else\n        #set($discard = $recips.addAll($recipients))\n      #end\n    #else\n      ## Set to local variables to prevent altering input values.\n      #set($discard = $recips.addAll($recipients))\n      #set($discard = $invalid.addAll($invalidAddresses))\n    #end\n    ## Print the email addresses to be sent to.\n    ## To:\n    &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.toLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-to-field\" class=\"invitation-preview field\"&gt;\n     #foreach($recip in $recips)\n       #if($invalid.contains($recip))\n         &lt;span class=\"invalid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n         #set($discard = $invalid.remove($recip))\n       #else\n         &lt;span class=\"valid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n       #end\n     #end\n     #foreach($recip in $invalid)\n       &lt;span class=\"invalid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n     #end\n     &amp;nbsp; ## used to make the field the correct size if it's empty.\n    &lt;/div&gt;\n    ## Tell the user that some of the email addresses are invalid.\n    #if($invalidAddresses &amp;&amp; $invalidAddresses.size() &gt; 0)\n      &lt;p class=\"invalid-address-message\"&gt;\n       &lt;span class=\"errormessage\"&gt;\n        #if($recips.size() == 1)\n          ## The email address given is invalid and will not be sent to.\n          $escapetool.xml($services.localization.render('xe.invitation.displayMessage.theAddressIsInvalid'))\n        #else\n          #if($invalid.size() &gt; 1)\n            $escapetool.xml($services.localization.render('xe.invitation.displayMessage.someAddressesAreInvalid', [$invalidAddresses.size()]))\n          #else\n            $escapetool.xml($services.localization.render('xe.invitation.displayMessage.anAddressesIsInvalid'))\n          #end\n        #end\n       &lt;/span&gt;\n      &lt;/p&gt;\n    #end\n     ## Subject:\n     &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.subjectLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-subjectline-field\" class=\"invitation-preview field\"&gt;\n     $escapetool.xml($mail.getProperty('subjectLine').getValue())\n    &lt;/div&gt;\n    ## Message:\n    &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.contentLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-messagebody-field\" class=\"invitation-preview field\"&gt;\n     $mail.getProperty('messageBody').getValue()\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n  {{/html}}\n\n#end\n##\n#*\n * Load the configuration.\n * Only works if the script calling this macro has permission to view InvitationConfig \n * (or create it if it doesn't exist)\n *\n * $config (Map&lt;String, String&gt;) will be populated with invitation configuration.\n *\n * $configDocName (String) (Optional) will load configuration from this document, if not specified will use\n *                                    'InvitationConfig' in the same space as $doc.\n *\n * $configClassName (String) (Optional) will load configuration from object of this class, if not specified will use\n *                                      'Invitation' in the same space as $doc.\n *###\n#macro(loadInvitationConfig, $config, $configDocName, $configClassName)\n  #define($discard)\n    #if(\"$!configDocName\" == '')\n      #set($configDocNameInternal = \"${doc.getSpace()}.InvitationConfig\")\n    #else\n      #set($configDocNameInternal = $configDocName)\n    #end\n    #if(\"$!configClassName\" == '')\n      #set($configClassNameInternal = \"${doc.getSpace()}.WebHome\")\n    #else\n      #set($configClassNameInternal = $configClassName)\n    #end\n    ##\n    ## Load some parameters from the configuration.\n    #set($configDoc = $xwiki.getDocumentAsAuthor($configDocNameInternal))\n    ##\n    ## If no configuration document exists, create one and save it.\n    #if($configDoc.isNew())\n      ##\n      ## load the default configuration from this document.\n      #set($thisDocument = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationCommon\"))\n      #set($defaultConfigObj = $thisDocument.getObject($configClassNameInternal))\n      #foreach($element in $defaultConfigObj.getProperties())\n        $config.put($element.getName(), $defaultConfigObj.getProperty($element.getName()).getValue())\n      #end\n      ##\n      #set($configDocContent = \n        '{{velocity}}{{info}}$services.localization.render(''xe.invitation.internalDocument'','\n          + '[$services.rendering.escape(\"' + \"$!config.get('mainPage')\" \n          + '\", ''xwiki/2.1'')]){{/info}}{{/velocity}}')\n      $configDoc.setContent($configDocContent)\n      $configDoc.setParent($configClassNameInternal)\n      #set($configObj = $configDoc.newObject($configClassNameInternal))\n      #foreach($key in $config.keySet())\n        $configObj.set($key, $config.get($key))\n      #end\n      ## Now create the configurable objects.\n      #set($cfgable = $configDoc.newObject('XWiki.ConfigurableClass'))\n      $cfgable.set('displayInSection', 'Invitation')\n      $cfgable.set('configurationClass', $configClassNameInternal)\n      $cfgable.set('configureGlobally', 1)\n      #set($propsToShow = 'subjectLineTemplate|messageBodyTemplate|emailRegex|from_address|allowUsersOfOtherWikis'\n                        + '|usersMayPersonalizeMessage|usersMaySendToMultiple|emailClass|emailContainer')\n      $cfgable.set('propertiesToShow', $propsToShow)\n      #set($cfgable = $configDoc.newObject('XWiki.ConfigurableClass'))\n      $cfgable.set('displayInSection', 'Invitation')\n      $cfgable.set('heading', '$services.localization.render(''xe.invitation.configuration.smtpHeading'')')\n      $cfgable.set('configurationClass', $configClassNameInternal)\n      $cfgable.set('configureGlobally', 1)\n      $cfgable.set('propertiesToShow',\n                        'smtp_server_password|smtp_server_username|smtp_port|smtp_server|javamail_extra_props')\n      $configDoc.saveAsAuthor()\n    #else\n      ## load the configuration object...\n      #set($configObj = $configDoc.getObject($configClassNameInternal))\n      #foreach($element in $configObj.getProperties())\n        $config.put($element.getName(), $configObj.getProperty($element.getName()).getValue())\n      #end\n    #end\n  #end## define $discard\n  ## Now invoke the defined code...\n  #set($discard = $discard.toString())\n#end\n##\n#*\n * Basic unit testing of the macro above.\n *###\n#macro(testLoadInvitationConfig)\n  #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n  #if(!$configDoc.isNew())\n    $configDoc.deleteAsAuthor()\n  #end\n  #set($configClass = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.WebHome\"))\n  #if($configClass.isNew())\n    #set ($classDocumentLink = $services.rendering.escape(\"${doc.getSpace()}.WebHome\", 'xwiki/2.1'))\n    {{error}}Class document [[$classDocumentLink]] not found. can't run test.{{/error}}\n  #else\n    #set($config = {})\n    #loadInvitationConfig($config, 'HopefullyNonexistantSpace')\n    #if($config.size() &lt; 9)\n      {{error}}Config map too small{{/error}}\n    #end\n    #if($config.get('from_address') != 'no-reply@localhost.localdomain')\n      {{error}}form_address incorrect, expecting \"no-reply@localhost.localdomain\" got \"$config.get('from_address')\"{{/error}}\n    #end\n    #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n    #if($configDoc.isNew())\n      {{error}}Config document not created{{/error}}\n    #else\n      #set($configObj = $configDoc.getObject(\"${doc.getSpace()}.Invitation\"))\n      $configObj.set('from_address', 'thisisatest@localhost.localdomain')\n      $configDoc.saveAsAuthor()\n      $config.clear()\n      #loadInvitationConfig($config, 'HopefullyNonexistantSpace')\n      #if($config.get('from_address') != 'thisisatest@localhost.localdomain')\n        {{error}}altering config parameter failed.{{/error}}\n      #end\n    #end\n  #end\n  #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n  #if(!$configDoc.isNew())\n    $configDoc.deleteAsAuthor()\n  #end\n#end\n##\n#**\n * Load mail from mail containing document.\n *\n * $config (Map&lt;String, String&gt;) will be used to get the name of the email class.\n *\n * $emailContainer (Document) the document to get the email from.\n *\n * $mail (Map&lt;String, XObject&gt;) will be populated with email message XObjects by their messageID.\n *###\n#macro(loadInvitationMail, $config, $emailContainer, $mail)\n  ## If this doesn't already exist, it's created.\n  #if($emailContainer.isNew())\n    #set($emailContainerContent = \n      '{{velocity}}{{info}}$services.localization.render(''xe.invitation.internalDocument'','\n        + '[$services.rendering.escape(\"' + \"$config.get('emailContainer')\" \n        + '\", ''xwiki/2.1'')]){{/info}}{{/velocity}}')\n    #set($discard = $emailContainer.setContent($emailContainerContent))\n    #set($discard = $emailContainer.setHidden(true))\n    #set($discard = $emailContainer.saveAsAuthor())\n  #end\n  ##\n  ## Load messages into a Map by messageID.\n  #foreach($obj in $emailContainer.getObjects($config.get('emailClass')))\n    #set($discard = $mail.put($obj.getProperty('messageID').getValue(), $obj))\n  #end\n#end\n##\n#**\n * Is a guest allowed to accept an invitation?\n *\n * $guestActionsDoc (Document) the document which guests will use to register.\n *###\n#macro(canGuestAcceptInvitation, $guestActionsDoc)\n  #set($out = 'true')\n  #if(!$xwiki.hasAccessLevel('register', 'XWiki.XWikiGuest', 'XWiki.XWikiPreferences')\n      &amp;&amp; !$guestActionsDoc.hasProgrammingRights())\n  ##\n    #set($out = 'false')\n  #end\n  $out##\n#end\n##\n#**\n * Get the action taken by the user.\n * This will interpret actions taken using displayActionConfirmationForm\n *\n * $parameterMap (Map&lt;String, String&gt;) the parameter map gotten by calling getParameterMap on the servlet request.\n *\n * $actionOutList (List&lt;String&gt;) will be populated with a single value (the action)\n *###\n#macro(getUserAction, $parameterMap, $actionOutList)\n  #set($actionInternal = 0)\n  #foreach($param in $parameterMap.keySet())\n    #if($param.indexOf('doAction_') != -1)\n      ## Strip 'doAction_'\n      #set($actionInternal = $param.substring(9))\n    #end\n  #end\n  #if($actionInternal != 0)\n    #set($discard = $actionOutList.add($actionInternal))\n  #end\n#end\n##\n#*\n * Display a form allowing a user to confirm doing an action.\n *\n * $messageIDs (List&lt;String&gt;) the unique IDs of the invitations to act upon.\n *\n * $action (String) the action to do.\n *\n * $memoLabel (String) what the memo field should be labeled.\n *\n * $confirmLabel (String) what the confirm button should say.\n *\n * $additionalParameters (Map&lt;String, String&gt;) these parameters will be xml escaped and placed in hidden input fields.\n *###\n#macro(displayActionConfirmationForm, $messageIDs, $action, $memoLabel, $confirmLabel, $additionalParameters)\n  {{html wiki=false clean=false}}\n  &lt;div class=\"invitation action-confirm\"&gt;\n   &lt;form action=\"$doc.getURL()\" method=\"POST\"&gt;\n    ##\n    #foreach($id in $messageIDs)\n      &lt;input type=\"hidden\" name=\"messageID\" value=\"$escapetool.xml($id)\" /&gt;\n    #end\n    &lt;input type=\"hidden\" name=\"confirm\" value=\"y\" /&gt;\n    &lt;input type=\"hidden\" name=\"form_token\" value=\"$!{services.csrf.getToken()}\" /&gt;\n    #if($additionalParameters &amp;&amp; $additionalParameters.size() &gt; 0)\n      #foreach($param in $additionalParameters.keySet())\n        &lt;input type=\"hidden\" name=\"$escapetool.xml($param)\" value=\"$escapetool.xml($additionalParameters.get($param))\" /&gt;\n      #end\n    #end\n    ##\n    &lt;dl&gt;\n     &lt;dt&gt;&lt;label for=\"memo\"&gt;$memoLabel&lt;/label&gt;&lt;/dt&gt;\n     &lt;dd&gt;&lt;input type=\"text\" size=\"54\" name=\"memo\" /&gt;&lt;/dd&gt;\n    &lt;/dl&gt;\n    &lt;div class=\"bottombuttons\"&gt;\n     &lt;div class=\"buttons\"&gt;\n      &lt;span class=\"buttonwrapper\"&gt;\n       &lt;input type=\"submit\" class=\"button\" name=\"doAction_$escapetool.xml($action)\" value=\"$confirmLabel\" /&gt;\n      &lt;/span&gt;\n     &lt;/div&gt;\n    &lt;/div&gt;\n   &lt;/form&gt;\n  &lt;/div&gt;\n  {{/html}}\n#end\n##\n#*\n * Set the status of a message and log the memo.\n *\n * $message (Xobject) the message to act on.\n *\n * $status (String) the status to set the message to.\n *\n * $memo (String) what to enter in the log.\n *###\n#macro(setMessageStatus, $message, $status, $memo)\n   $message.set('status', $status)##\n   #set($history = $message.getProperty('history').getValue())\n   #set($statusWord = \"#messageStatusForCode($status)\")\n   ## disallow injection of \\n which starts a new line or { which may be used for macros.\n   #set($log = $memo.replaceAll('\\n', ' ').replaceAll('\\{', '~{'))\n   #set($entry = \"|$statusWord|[[$xcontext.getUser()]]|$!log\")\n   #if(\"$!history\" != '')\n     $message.set('history', \"$!history$util.getNewline()$entry\")##\n   #else\n     $message.set('history', $entry)##\n   #end\n#end\n##\n#*\n * Get the last memo from the message history.\n *\n * $message (Xobject) the message to act on.\n *###\n#macro(getLastMemo, $message)\n  #set($history = \"$!message.getProperty('history').getValue()\")\n  #set($indexAfterLastNewline = $mathtool.add($history.lastIndexOf($util.getNewline()), 1))\n  #if($indexAfterLastNewline &lt; $history.length())\n    #set($entry = \"$!history.substring($indexAfterLastNewline)\")\n    #set($indexAfterLastPipe = $mathtool.add($entry.lastIndexOf('|'), 1))\n    #if($indexAfterLastPipe &lt; $entry.length())\n        $entry.substring($indexAfterLastPipe)##\n    #end\n  #end\n#end\n##\n#*\n * Get the status of the current message for it's code.\n * unsent - not sent yet.\n * pending - sent and awating a response\n * accepted - sent and accepted by recipient\n * declined - sent and declined by recipient\n * canceled - sent then canceled by sender\n * reported - as spam (by recipient)\n * notSpam - reported as spam and investigated (by admin)\n * sendingFailed - failed to send message\n * else - unknown status\n *\n * $status (String) the status of the message.\n *###\n#macro(messageStatusForCode, $status)\n  #if($status == 'unsent')\n    $services.localization.render('xe.invitation.messageStatus.unsent')##\n  #elseif($status == 'pending')\n    $services.localization.render('xe.invitation.messageStatus.pending')##\n  #elseif($status == 'accepted')\n    $services.localization.render('xe.invitation.messageStatus.accepted')##\n  #elseif($status == 'declined')\n    $services.localization.render('xe.invitation.messageStatus.declined')##\n  #elseif($status == 'canceled')\n    $services.localization.render('xe.invitation.messageStatus.canceled')##\n  #elseif($status == 'reported')\n    $services.localization.render('xe.invitation.messageStatus.reported')##\n  #elseif($status == 'notSpam')\n    $services.localization.render('xe.invitation.messageStatus.investigated')##\n  #elseif($status == 'sendingFailed')\n    $services.localization.render('xe.invitation.messageStatus.sendingFailed')##\n  #else\n    $services.localization.render('xe.invitation.messageStatus.unknown', [$escapetool.xml($status)])##\n  #end\n#end\n{{/velocity}}</content>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>Invitation.WebHome</className>\n    <guid>5b0a8220-404d-4d1b-b162-0ebcf323181e</guid>\n    <class>\n      <name>Invitation.WebHome</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allowUsersOfOtherWikis>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>allowUsersOfOtherWikis</name>\n        <number>4</number>\n        <prettyName>Let users of other wikis send</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allowUsersOfOtherWikis>\n      <commonPage>\n        <disabled>0</disabled>\n        <name>commonPage</name>\n        <number>18</number>\n        <picker>0</picker>\n        <prettyName>common</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </commonPage>\n      <emailClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailClass</name>\n        <number>5</number>\n        <picker>1</picker>\n        <prettyName>Email message XClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailClass>\n      <emailContainer>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailContainer</name>\n        <number>9</number>\n        <picker>1</picker>\n        <prettyName>Document containing email XObjects</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailContainer>\n      <emailRegex>\n        <disabled>0</disabled>\n        <name>emailRegex</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>Regular expression for validating email addresses</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </emailRegex>\n      <from_address>\n        <disabled>0</disabled>\n        <name>from_address</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>Email \"from\" address</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </from_address>\n      <guestsActionsPage>\n        <disabled>0</disabled>\n        <name>guestsActionsPage</name>\n        <number>14</number>\n        <picker>0</picker>\n        <prettyName>guestsActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </guestsActionsPage>\n      <javamail_extra_props>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>javamail_extra_props</name>\n        <number>15</number>\n        <picker>0</picker>\n        <prettyName>Javamail extra properties</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </javamail_extra_props>\n      <mainPage>\n        <disabled>0</disabled>\n        <name>mainPage</name>\n        <number>19</number>\n        <picker>0</picker>\n        <prettyName>mainPage</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </mainPage>\n      <membersActionsPage>\n        <disabled>0</disabled>\n        <name>membersActionsPage</name>\n        <number>16</number>\n        <picker>0</picker>\n        <prettyName>membersActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersActionsPage>\n      <membersCommonPage>\n        <disabled>0</disabled>\n        <name>membersCommonPage</name>\n        <number>17</number>\n        <picker>0</picker>\n        <prettyName>membersCommon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersCommonPage>\n      <messageBodyTemplate>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplate</name>\n        <number>3</number>\n        <picker>0</picker>\n        <prettyName>Email message body HTML template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplate>\n      <messageBodyTemplatePlain>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplatePlain</name>\n        <number>20</number>\n        <picker>0</picker>\n        <prettyName>Message body plain text template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplatePlain>\n      <smtp_port>\n        <disabled>0</disabled>\n        <name>smtp_port</name>\n        <number>13</number>\n        <picker>0</picker>\n        <prettyName>Smtp port</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_port>\n      <smtp_server>\n        <disabled>0</disabled>\n        <name>smtp_server</name>\n        <number>12</number>\n        <picker>0</picker>\n        <prettyName>Smtp server host name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server>\n      <smtp_server_password>\n        <disabled>0</disabled>\n        <name>smtp_server_password</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>Smtp password</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_password>\n      <smtp_server_username>\n        <disabled>0</disabled>\n        <name>smtp_server_username</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>Smtp username</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_username>\n      <subjectLineTemplate>\n        <disabled>0</disabled>\n        <name>subjectLineTemplate</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>Email subject line template</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </subjectLineTemplate>\n      <usersMayPersonalizeMessage>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMayPersonalizeMessage</name>\n        <number>8</number>\n        <prettyName>Let users personalize messages</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMayPersonalizeMessage>\n      <usersMaySendToMultiple>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMaySendToMultiple</name>\n        <number>6</number>\n        <prettyName>Let users send to multiple addresses</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMaySendToMultiple>\n    </class>\n    <property>\n      <allowUsersOfOtherWikis>0</allowUsersOfOtherWikis>\n    </property>\n    <property>\n      <commonPage>Invitation.InvitationCommon</commonPage>\n    </property>\n    <property>\n      <emailClass>Invitation.InvitationMailClass</emailClass>\n    </property>\n    <property>\n      <emailContainer>Invitation.InvitationMessages</emailContainer>\n    </property>\n    <property>\n      <emailRegex>/^([^@\\s]+)@((?:[-a-zA-Z0-9]+\\.)+[a-zA-Z]{2,})$/</emailRegex>\n    </property>\n    <property>\n      <from_address>no-reply@localhost.localdomain</from_address>\n    </property>\n    <property>\n      <guestsActionsPage>Invitation.InvitationGuestActions</guestsActionsPage>\n    </property>\n    <property>\n      <javamail_extra_props/>\n    </property>\n    <property>\n      <mainPage>Invitation.WebHome</mainPage>\n    </property>\n    <property>\n      <membersActionsPage>Invitation.InvitationMemberActions</membersActionsPage>\n    </property>\n    <property>\n      <membersCommonPage>Invitation.InvitationMembersCommon</membersCommonPage>\n    </property>\n    <property>\n      <messageBodyTemplate>{{velocity}}\n#set($discard = \"#template('colorThemeInit.vm')\")\n#if(\"$!theme\" == \"\")\n #set($theme = {\"linkColor\":\"#4791BC\"})\n#end\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))\n#set($wikiName = $xwiki.getRequestURL().replaceAll(\"http://([^/:]*).*$\", \"$1\"))\n#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get(\"guestsActionsPage\")).getExternalURL())\n#set($linkStyle = \"color:$theme.get('linkColor');text-decoration:none;\")\n#set($bigText = \"font-size:130%;\")\n#set($joinLink = \"float:left;\")\n#set($declineLink = \"color:#f88;float:right;text-decoration:none;\")\n\n$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])\n\n{{html clean=false}}\n#if(\"$!messageBody\" != \"\")\n  &lt;p style=\"$bigText\"&gt;\n  $!escapetool.xml($!messageBody)\n  &lt;/p&gt;\n#end\n&lt;p style=\"margin-top:30px\"&gt;\n&lt;a href=\"${guestActionsURL}?doAction_accept=y&amp;amp;messageID=$messageID\" style=\"$bigText$joinLink$linkStyle\"&gt;\n$services.localization.render('xe.invitation.emailContent.joinLink')\n&lt;/a&gt;\n&lt;a href=\"${guestActionsURL}?doAction_decline=y&amp;amp;messageID=$messageID\" style=\"$bigText$declineLink\"&gt;\n $services.localization.render('xe.invitation.emailContent.declineLink')\n&lt;/a&gt;&lt;/p&gt;\n&lt;hr style=\"clear:both\" /&gt;\n$services.localization.render('xe.invitation.emailContent.reportMessage', [\"&lt;a href=$escapetool.getQ()${guestActionsURL}?doAction_report=y&amp;amp;messageID=$messageID$escapetool.getQ() style=$escapetool.getQ()$linkStyle$escapetool.getQ()&gt;\", \"&lt;/a&gt;\"])\n{{/html}}\n{{/velocity}}</messageBodyTemplate>\n    </property>\n    <property>\n      <messageBodyTemplatePlain>{{velocity}}\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))#set($wikiName = $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"))#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get('guestsActionsPage')).getExternalURL())$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])#if(\"$!messageBody\" != '')  $messageBody#end$services.localization.render('xe.invitation.emailContent.joinLink')${guestActionsURL}?doAction_accept=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.declineLink')${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.reportMessage', ['', \"$util.getNewline()${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID\"]){{/velocity}}</messageBodyTemplatePlain>\n    </property>\n    <property>\n      <smtp_port>25</smtp_port>\n    </property>\n    <property>\n      <smtp_server>localhost</smtp_server>\n    </property>\n    <property>\n      <smtp_server_password/>\n    </property>\n    <property>\n      <smtp_server_username/>\n    </property>\n    <property>\n      <subjectLineTemplate>{{velocity}}$services.localization.render('xe.invitation.emailContent.subjectLine', [$xcontext.getUser().replaceAll(\"^[^\\.]*.\", \"\"), $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"), $!subjectLine]){{/velocity}}</subjectLineTemplate>\n    </property>\n    <property>\n      <usersMayPersonalizeMessage>1</usersMayPersonalizeMessage>\n    </property>\n    <property>\n      <usersMaySendToMultiple>0</usersMaySendToMultiple>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>XWiki.StyleSheetExtension</className>\n    <guid>57002efd-3fd9-45a9-bedf-d9741dcc1ac9</guid>\n    <class>\n      <name>XWiki.StyleSheetExtension</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <cache>\n        <cache>0</cache>\n        <defaultValue>long</defaultValue>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>cache</name>\n        <number>5</number>\n        <prettyName>Caching policy</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>long|short|default|forbid</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </cache>\n      <code>\n        <contenttype>PureText</contenttype>\n        <disabled>0</disabled>\n        <editor>PureText</editor>\n        <name>code</name>\n        <number>2</number>\n        <prettyName>Code</prettyName>\n        <rows>20</rows>\n        <size>50</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </code>\n      <contentType>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>contentType</name>\n        <number>6</number>\n        <prettyName>Content Type</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>CSS|LESS</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </contentType>\n      <name>\n        <disabled>0</disabled>\n        <name>name</name>\n        <number>1</number>\n        <prettyName>Name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </name>\n      <parse>\n        <disabled>0</disabled>\n        <displayFormType>select</displayFormType>\n        <displayType>yesno</displayType>\n        <name>parse</name>\n        <number>4</number>\n        <prettyName>Parse content</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </parse>\n      <use>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>use</name>\n        <number>3</number>\n        <prettyName>Use this extension</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>currentPage|onDemand|always</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </use>\n    </class>\n    <property>\n      <cache>long</cache>\n    </property>\n    <property>\n      <code>#template(\"colorThemeInit.vm\")\n.invitation, .invitation input[type='text'], .invitation textarea, .invitation table {\n  float: left;\n  width: 450px;\n}\n\n/* Keep the table from overflowing */\n.invitation .message-table table, .invitation .history-table table {\n  table-layout: fixed;\n  word-wrap: break-word;\n}\n.invitation table th.checkboxcol {\n  width: 5%\n}\n.invitation table th.sentDate {\n  width: 15%\n}\n.invitation table th.recipient {\n  width: 28%\n}\n.invitation table th.history {\n  width: 18%\n}\n/* For message history table */\n.invitation table th.status-set-to {\n  width: 10%\n}\n.invitation table th.log-entry {\n  width: 60%\n}\n\n.invitation-preview {\n  background-color: #FCFCFC;\n  border: 1px solid $theme.get('menuSelectedEntryBackgroundColor');\n  padding: 3px;\n}\n\n.invitation-preview, .right-side {\n  margin-left: 30px;\n}\n\n.invitation-preview .field {\n  background-color: $theme.get('pageContentBackgroundColor');\n  margin-left: 20px;\n  margin-bottom: 10px;\n  padding: 10px;\n  overflow: hidden;\n\n  /* Makes the field fit with padding and margins. */\n  width: 390px;\n}\n\n.clearboth {\n  clear:both;\n}\n\n.invitation input[type='text'], .invitation textarea {\n  margin-bottom: 10px;\n}\n\n/* Labels */\n.invitation strong, .invitation label {\n  font-size: .85em;\n  text-transform: uppercase;\n}\n\n/* \"Preview:\" label */\n.invitation strong {\n  padding-left: 30px;\n}\n\n.invitation-preview strong {\n  padding-left: 20px;\n}</code>\n    </property>\n    <property>\n      <contentType>CSS</contentType>\n    </property>\n    <property>\n      <name>Invitation Style Sheet</name>\n    </property>\n    <property>\n      <parse>1</parse>\n    </property>\n    <property>\n      <use>onDemand</use>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>XWiki.XWikiRights</className>\n    <guid>f5e4ea78-756b-46a6-87e2-8a79d9ea6cee</guid>\n    <class>\n      <name>XWiki.XWikiRights</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allow>\n        <defaultValue>1</defaultValue>\n        <disabled>0</disabled>\n        <displayFormType>select</displayFormType>\n        <displayType>allow</displayType>\n        <name>allow</name>\n        <number>4</number>\n        <prettyName>Allow/Deny</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allow>\n      <groups>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <multiSelect>1</multiSelect>\n        <name>groups</name>\n        <number>1</number>\n        <picker>1</picker>\n        <prettyName>Groups</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>5</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.GroupsClass</classType>\n      </groups>\n      <levels>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <multiSelect>1</multiSelect>\n        <name>levels</name>\n        <number>2</number>\n        <prettyName>Levels</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>3</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.LevelsClass</classType>\n      </levels>\n      <users>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <multiSelect>1</multiSelect>\n        <name>users</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>Users</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>5</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.UsersClass</classType>\n      </users>\n    </class>\n    <property>\n      <allow>1</allow>\n    </property>\n    <property>\n      <groups>XWiki.XWikiAllGroup</groups>\n    </property>\n    <property>\n      <levels>view</levels>\n    </property>\n    <property>\n      <users>XWiki.XWikiGuest</users>\n    </property>\n  </object>\n</xwikidoc>\n", "<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n\n<!--\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n-->\n\n<xwikidoc version=\"1.5\" reference=\"Invitation.InvitationConfig\" locale=\"\">\n  <web>Invitation</web>\n  <name>InvitationConfig</name>\n  <language/>\n  <defaultLanguage/>\n  <translation>0</translation>\n  <creator>xwiki:XWiki.Admin</creator>\n  <parent>Invitation.WebHome</parent>\n  <author>xwiki:XWiki.Admin</author>\n  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>\n  <version>1.1</version>\n  <title/>\n  <comment/>\n  <minorEdit>false</minorEdit>\n  <syntaxId>xwiki/2.1</syntaxId>\n  <hidden>true</hidden>\n  <content>{{velocity}}{{info}}$services.localization.render('xe.invitation.internalDocument', ['Invitation.WebHome']){{/info}}{{/velocity}}</content>\n  <attachment>\n    <filename>InvitationSectionIcon.png</filename>\n    <mimetype>image/png</mimetype>\n    <author>xwiki:XWiki.Admin</author>\n    <version>1.1</version>\n    <comment/>\n    <content>iVBORw0KGgoAAAANSUhEUgAAAH0AAABVCAYAAABkf+t+AAAABmJLR0QA/wD/AP+gvaeTAAAeWklEQVR4Xu2daYxkZ3X3//fWrX3tfe/p2RfPjD22GS9gMGM7DDEQvQqLSAIfIgEfk6BE72vyIUIRThBfgrIoJHolhBNLEYki4tiEGBA2wcwYj2cM9ng83T09W69LdS1de9375DlH9UhX99bW1QV0y3Osx3fpulOe/p3zP+c5z1NlQwiBd5fdMQPdtzt2B/oduwP9jkHTNF2d2o5OEzTUOdmvH/odcBodGoATdG2HZgdXO/YC6FlZWRm8cuXKeCgU6vH7/YnV1eURy0KP1+uNyREPBPwfzOcLX5Fv92cALILfLeh3ok6Be7QG70ducOqoDEBAwTt//vykZVn9gUAgUa1W+9fX14ckxDiBM81qIhgMRi+89lrMMIxEuVKJyvvKH7B37xSUjYyMIBQK2t0H0zMznwfw5wCqEj5xt9710Bmc0x6FzuCUOcDZ6FkEjsb8/Pzg7OzVCRl1cQmsZ3l5bQSwenw+X9wwvDEJMyF/Fr148fV4tVKN+/w+n2LT29sD+RxDEgBOHD/ueHOh3r3lfRXM6qZ0mgEA3tqjJjnqdsAbO1Au7aajvgnn+aVLl4ITExMkkb0vvfTDvdFotEdGl4w60SujbljeZ7ksFAo90iIejycmn4lVKhWKRijbt+8AlI2NTUiQYYXCwag5OEuIZqCdj6l7de/rukexshT4HRPpCpwadeBp9Xjb4T3//PM9k5OTlOtGMpnMsISXkJIZT6WSlOsSFHVCWAkJIyKlMi7hRU3TjFerFf/c3DUmcvDgEdhBHpdR5wQkmviSPdDK5bKLRGvo7d9vDR2QfzcgDg1pDgLdFiQWbNZuvjfalkw3KHX0MFQ+8tCefPLJwNmzZxNTU1M9N2/enIpLi0QicQA9m5sZynUxCS9KEGU0hiUgynUxCY9ynZZKpRAOhzE6OqpgYGJ8HEGST5e1hpnP57cKm611hLd+ffv31cF9P53OVJEGmZdGE2YEvQIgL6S1DV3lCxoAEgB6L1/++djq6saQqjBXVpZGJKA+ynPy2CMh9UkJIsmMlkqlSLFY8APA2toqhoeH4fUaULZ37/4GKg0YhkedUh5DMrmuYGAdyabAO7Rmkt3Bc6Lt18vfE5ZXV6FsRZ4PDgxgcnzM5Q+bm1njP/7jO/8KNpCKRdW5rus+OQLgFHfxmT/5k//7/4mr5Jgh8O1GuvHCC88/NzIy+rjP59XBb+LH0aNHbeD2Qkourlx5GydOnER7JiA6YSMExBbIiU7/zNay3H6KsB9aKYEwAcih+VrVDWda1Qd+r+8jAMg5fAB0CT5NwdsOdEtKcenUqVN6fQaChyyA6Nhd2O736q5DKVjbga2gtHy+fWdIJy8jEQ/WwPuwka7K6whSmSri8SigBdpKC+Fo9PRjjz229wc/+MF14liT+s12oCOb3dxsBcOyLDp2H3b3o9sNu+Po7bIz8P00YhEP8gUdhqcEoIhY2ATMNHqiBmCtIJUWSMQNbGRCSMQ0zN0yMTXZD4GwHPbUDF3WUx+W0L8JoKz4toKu8kSqAY0aTB7NnGInwd4ZUt7wfb0wLQ9M0+DhZmHC5xMol02EAwVYpom9YxZ0kcX1G2tIxP2IJvbj5o0ZQITQk9DfC+DZGlu9XehCFhmZRiDtPIXoZt7uvmMIsU3YqqLvmpS7HUG31iCEDnDhy8UqdeR4kFkWF7d1HaJ/IAwq2KvlNEZH+uHzlvGfzyf9NuC6VmvhNYHOcM1nn302Ww/kqxdex/nXXsf07CxM08QTH3gf7rnnHhfsYj6L5fnptiFuwbakBK2tZQS3NLGNZ7ObeVx641XsP7AP5YqmKnOUiiU6ct3U19+LkeFBvnaYyyH8vjI8KGp1ptWipbxvbKwVGsn07NycI5rcGIqFTdycfh317Y4VJdSZa7fg9XkxNjWIX7z5jpTqJfj9Pjn8XLx9+lP/BwDP0fHmm1cQk/f275tq6n6Xr9xC3+C+9TqNMasl9GKxsl4PZm9PovMgZbtja+spzC+uIplK4/rNRZzWj6Ovb4rbv9FIGMouXvwFhmWEj4wM4dSpE1hcXOZ7x48fqRv1Ho+J0eEE5uZeCzmbaErim0KXveosum53bGl5DbPX53nmk8nk8NADJ3DoyBSGR46hX8q4so1UBguLK1hcWsXS0grD9xheGD4fXv3ZRbz34dNwmq5ZOPezWcguqHPmpbVVvWcyybVcLset0F+m6R4vQtE+8kRYZhWVcmErfX7YrVzKQ1gmdoKVyhVcfueahLwOMtnkwtTkCIrFMkf65MSwVM04xoYHcN+9J1GqxGA3Xy2S/YEAJsaHsbq6hmvXruLw4QOYHB9hud9/YC87UTgUxOBAL3SdUm0ZlQoKduA4JsfltqDnb9WDPjYygm6a1xfE4PhRaDoDhAYNqDmAAtsudKVe9Cydq+ftaUo4Crx8dh0rt98Gv7PWPeD/9f1XUK5UcOzwPgk3hs1cgaVcr/09o+EQhgf7sGf/KDTdLdXhcJCdIrmRxvzCCg4d2CPPs1hbW5cOM4IbN+e5DgiHQ1Ts1aCbWFiqAPB2tuDyzDPPZL/2ta9VnT8PBoPdrrEZirBU8uEjLyXaKagzda8RH8HqYbindQTe7hjKKXSDpVbTdOUk3QDOkX328Yfhl0eyVDorwedloXUNJ+86iEQ8ikgkBK/HUNM1pzHI7GZOQq0y+HvvOYaZmTnMXrvJUr8snejY0QMYHR2qObjA1J5BXJ1ZtzpdZROWZWUA9G6p6UIA22auYAj+5Wuax5GFFCQ7Po3/EXDe50u+r4AnkxsyWnpANp19EROh0/DrUQiuWZJclJqmRaB4QcijeyT0bQPnyH7koVN8/eOfXuQoX1lNwhKWVMpBeA0D/X0JkEUSIZhmfegej0e+fkgqxDzB59QQiUbx+sW3ZNE3ib7eOHrkewUDfpBtZlMIhgZQrS4XO4I+NIQiFXNyhazX0RChhRZaqmwMvG3eDImPuu7l6HbaVhlo7CgWpq9O4+tf/2v85oc/hCef/E28nvwmAkYP+rST8v7fsEN89atfgT8UR6FYog4GPD4dQrhlflHmzaUVzs0kySS7FMGu+fYPX/6ZAo71jTQ7QCQcwrEj+yjyKcoJNvXUa1B16OzAGpSRc5BRng4EfHaZJ/iqccOgD91/Uub5G+y8gEAqnYeAv/NNFMvLKBUKhaw7ujmvU3OmQ9huPbbDrVarkO8LZc7UYhhGbW0gC2XRaNSR63XIHTQYHx/DC9/9Hvr6BxAfm0TA24N//PtvSqlcZEcwvH4aHO2WYOezA8dbEtKlX7wDMgJNRoUZASCYVIyRbUrgM3O3cc+JQzh14jA5AAM/sG8CD9x3nKSdUggXXb2JmIpyFEplxBIR5IuGff6OYqmE1bUkhof6ZTQnaDB0ZVN7xmAYOsrlKimAPFYQDGqIx+PYLEZgSYPdLrcFXQGoZAl4a247zniv2h/+4R/g6af/UtYn/8Tn3/v2OUxPT+PBBx8g6K2aDQz8tIR2UMJzGEfyzdtLIKPc/PGPPYaoPEpJp4hXz5EDSIm/RJU8q8NPzr+BM+9/D0Yk0P6+OKoVOx9wkWYzVqHrN+Zht+GhAVybu4FiqcLF3fTsDRw5OIw3fj6N/qFTtNOn0HFOz+Xym/hVmAZoLO2gSObIbWH0mrbAf+ELn8df/dXXeZAdPHgQn/3sZ9CO/e4nPqxyNUdpMpUBGUUrRSFFtSMNEHCScwZul/iPfOgRlv7bCyt0XYv0EgxfAI0QZbKbVMCxSui6TpLPkT2/uMybTQ4dmIIwqzyN8/tKOHHibiysiI7lvQZAT6OOjY0Ok7x3kXl37V9mcvijn6QwHvbg384O48yZD8p9dy+A7OMf/20EL/8LEi/+EarRcaz+/qtoZucvvCmjdE6CChIsAsdS/j/nLtklXkZchhxDRbgCzg6wd3IUZFSx53IFVgSyPinzlqXDZq7mDBkVmRPjI/DJ4+zcLRQKJWQzGddK3Es/voSDh0+xvHcKnXJFpp6YBwOBNpYyxRYaLDSgthBRN9Ae0Ty2Yp86EOZBdvXqNAGneoBqBZqKstQX/uBTamEI9Y0jlyX87GMPkRw3k3gu8E7fexcDVcCVA9yaX8arr7+FTDaHfL6A2eu3cf+pY4j3R+tO1+YXlrkOIAv4fZTDOeIHBnq5mr/4xmWett28dRsnjx9V0zUZ6cdQLIPkvaPqnVfannvuO2kXzPaXPDvprNFiA2+G7Ibdkr+Ub3zjHwg4g759+zbld5b6L33pKbUwhAbGoD/xW4+r6pwqeJprK4mn4s4l8TduLbIKKODT127VVCFIzkOBRH8Oq8TY2IBzukZKQMCVMlAaoakbyToVdFzNQ1hcyPb29SAY4gDkv9tGKiGv/duT92QylXOvS/OUrX50d1i8a7qOLhupBcHl6H7qqf+Hu/7xH7D3k5/EtCzizp07j29965mWuV3l81elxEtJr4GOUeFGEU7RS+1SCaaPpmQy8pbYKd734D3YMzFCwPnZM4/cTw0WpRZ87tE13J5fwZ59g7AZTdNo0UUe/dycUcUcme7RWSk8Hg2mZTGH/r4+ANSUGcFykl8HU1qH0NlS7ujlKVvHK23CNjXSdQ+3YQ1vEJboNvQkA//MZ34PExPjMN56C3omo0DjjTd+jjaMqm7K180knqZx1HLl/D05PkxVOkU8AeeuXF9PnKKXcj5H7vjoIOaXV/HgB+6m6ZqzIeOs4HlOPjU5RkdabJEKtoCjh/cjkYjxEqzHU5WSfwPx2GFuyRalNWphtISeltZlFrAsAW8gBiPYC+g+hBL9teZEd6kfOnQQf/d3fwNluc99DuYET70YfJvGvXMl4SqHK4vU+ud3SdiAe36vgCupvrK8TnN0imJqv0qAl3H8xHvRhpGs0yIL7V3E4tIypqYmcPjQfrW6Bk2rYGJyArONC2zRVqSnUqksumhCCJ6i7DnyMN6+8g6q1QIMfwkJ7n1r+GVa6exZdGAUtZTPKS9TLq515GIk5xS5DFdJPJlyCgXcbgf2jePK1es4fuwA7r3vKALRCEfu8buOcJetcfBl8M7VWQSDAbz51hW8/30P8uvj8VitcheomNxu3ra80wrb/OrqKgYGBuzoMDo81LJ6hxB1oQfDCV4sOHr0CKanZ6hapy4cbwrYoUbACbJqwDSTeKrgOZ87TfUgpiZHecdMUoI8+5FH8J77+rgSLxYF74wJBQlmVILOIl8oIFM7Xr9+C6Zl4v777qbfFc/N7dM1XSupWCZ5L3UMfXl5edVdnXMh13LHqKhf3NPaeS13GThy5AgWFxdpiuGEzr19n8+nfllqOsfVvc3IYeh5+2vpHnk7vdZ5zj/folEHjSO+gVFE82jDuAgcBrC0sY4Xnn8JH/no+yGsFB5+8CguvTENyxfBwvwCKhWaMZRx4+YCrk7fQCwWxd0njyEaidDOGcfsR0jHc6TITqE/99xzmS9+8Ys2oJ1P1dRqWSjWr6ZpPCYnJxmaEMIu8Qxqc3OTQZER2EQigYWFBTqnaRjBtBdA6jlyADqqrhyfq159f38/7KamtBDNJb6LxuCnAj5eX//Tp/4WTzx6Gv/8zHfxve//FKYwuVbwGDrOfPA0An4Ljz16hIpeGd3D6O3tgxAlnuoJaPJowPCYyGTWiIEKhM7lXX47QqVUKuaEQNi9+BGQUHJb671rHvj9YQiHM1AUEkjVbmzSZmWI3bRquWRbpFVnGrpubqmnBRnaTcOpQVQt/MajD6jpGaeT1YUkV/2VfIUXhZbmV3mR5tChSW7Dvuc9J3kzxfqagYcePqP+82nWUtrWlI2WV8fGxl3QR4dHcHVmBu2asATC8QHJ3QvUotrRlKFopHtKqpWkUxQrWVYSraSerpWsOyVfOYj9OZfERxOD8toLIaw2p57dhz8+NoQtWQWwKhauzOoAJuDRc1i6eZO/BEFp7nagCymNaQDDtltqtCjkXHcRCMXs25cUeHVOS4MEk0cmk1GyruSbBku1knDpkASWnqEj1QF2yWcnUrJvf84u8RY8GN17N5KLV2pKo6n0g51uE5NTNQwCI2N8qlJhpVPoKkdm3UCbwG7gEsQ2khgk4E7YNOxr5gSKQG61577l1yunKlQ8SAwdQnZ1BpWqCa/h2RXQFXBhu64VweXtQNfy+dxmPaA9iYQNtmiZ2znSgzEF3RVNCr6SerljhyKZI5PzvFuim8l2u6/nI20AzVoWgqERlNI3OdrVQtBOZq9wO6hvX951XU8z10YfehBoq3IPRXqhGz7lHy7gZA4HYBleWloiJ6DuoJJ6MnYGda3O1bGO1f1ZX18ftS0JPKeWkZFhZNf8SC7PQtds4Hc2eXsZquqgaofQGZb54ovfy4qOPgcm7NC5x46ttVtJ5vnrtVZWVhCLxRhct0ypx/j4OKam9hBczvmLcxnegGj5BCuBQVK/m+RdgKa625J3io5MXaCixac8BdQ5Q4/2jtJxq21bBj80NETzcyrMODq3ZjyFoSKNGkBU8CklIcjsWJYlwNW7VUV6Y40+PMiv9/tBq2Ekd/TMjhV4B/XtyjtXwDkHUB779u5p+zPYZH5bPneYuu+6Vue6zhsdsbGxweAjkQhBaOSk1IZUUzqCzNJNpqp/9YUKTisWcijIYVZN3lxpGPRa7y5QdmFHTjXKdqt3kWzdkWsygRMEPA6vLwDL/akTBa/utdN6e3sJHOV5knvVzLH/eUoZKKoVXDrWBa2eUe+bz2VQKRehS+DqmR1tQtSr42i6ux155/yQbVWsiSY5nfO5PwQB3X6vEdxmKYCgEWwFnsDSNI0Whij/EjgFmY4KrBrNrhl6NrUGNg27wkTjE2wz0svJXD7H35pot554vGXYK4iRxBAdG32+zCntrWcCoRB9MpOiXN1reyhzXVsWNtaXbZGvZhG7hbq6ZHmvbgt6T0//Lep0MXRFE0LN0xvmdWED6A+xFLuAK1My3cQcwOoqhv3+lodlVni/nH3KqMuxs0PfJe88ksnk9uR9fn4+44pg0e5XYQKGLwifL0T5vB5wO7RGsJVsq0FSrpyIzslhFPA2wbsdqJDLolzME3G8MpvDZF8ARyYCBH+nB3r3q/eXX3459Tu/82kH87YKOZ4K+UkhNA/gkPc6UWuXa+Ug9pxLcLkiV1M5tRWMzglO47zdGn4uu4FKpcTvsZGrYlPzIm9m8dAhH4J+fdfIu2lZ5W1DP3fuuWRq4y8qfX39XifpfdzUcEe9fbIeCieIcu0aqshSEF3RbIetZD8QCKhNFgqi6tNToUk/I/BOJ2obPhdxmaSSdXbg3qFx3FiZx8BSDkfHozA8+u6Qd2D70FcfRaFQLGYA9LVuzrhlPhTtbVShK8g01LU6EkSCqnrv9RRCFXVUuJDMK/CNQPOadHozj1Q2J8cm8sUiMrkicoUibt2YRSZTQrlqIVvWcDiegNfrw4Xbc/AZORwei757qnd8GzD/2MwydIba3rcbE1eP4UMgFCcAzQoze74m+aZpGUG0w1bDCZJeT88ReIr45vkdAobX4E2FQjfgD1UQCFeRL5Vhiir6TQFL82G/ZsCCzk0gY89B/HBmGpqexf7BCO0539nybpql7UPnNmZ+ExCuldVEPO5grkzNz8PQDa+E4gYuHHJPEk6/ZDXftg0C6YRun4+TItDCCXXj1GpafeiWTdaVh3LPvQrLNKHBJeGcWkbHJvCTK29jOB5ALOTdwfIuaFS7AZ2/kaJedPck4oBlNoh6C/5g1P4VZvZcrfI1ASPgrpzMubV+xV/vWm2mIPj2ws4B3lLXDFzNx81qGZawAE13Ts7Imfjrxw8OR+Dz6jtY3vmqG/LOEKyXXvpRRtigOkO+frhrqinjhE1ACJLK1+pndsDKKRx5n61RoUZpgZZgXeDVqJgmcvkCUtk8kpkscoUSMvkilpYXsbq+gaopUKqSxHtw14m7ecn19q1bmAjmcPpgL3yGvmOXVdVZtVvyXqmU04qok7nWoIDTdJ0WWegXp2ATZBXVCoiCWg9yvV02TVOE2j2TSqXsU0Bl8Ho8GEhEeQBDINM14NL5/0YqbMJjGLwh8d8vrHONsLa8gH2RAh48tAOBswkHe3buSjeg067XXL2cPjI0iKWlhXrFPEt7qZqFWa6qSlwBomLDnqsVHDtwN2y3NZqXk4pwxHNh12JZtFrlThw5KW+T8nkNdoSV+TnsS1g4faDHDvzdIO8q7+lJN1jBn8mqd58rd48Bn9cHny9A0U6Sa4epotoZ0duCrs4NwyDwtI5O4Js6TiGX4U6cx6PTcww9HvZhSAK/d18cAZ9n9+yaEYBVNYvdgE6dr2yjnC7q5nSBYj6DubfPQfMEea4eiiTg49W2plHdGXR3xFMqofdQFX098Ox4+c00R7vfT/UFOyPOnBhENOh1RvjOlndVCwnL7AZ0ym+ZejndH/Ar4E7m3NJMJ5fom5fkuQnD50cgGEa8Z0COQQTCcfl8CLzObqEe6Ib751pD5xRCsOlIStMQfDa9ptQGFj0LoCfstdcDu2UTRVflnYqv1XQ6hXgsrpizDQ8O0qdgXBIv7F/zp+tymKiWi9isFJFNr+P29Sv8IUafP4hYvB+xnn5EYn0IhmPsBEDDTZNbiXi1s5ZlXjmB3Sgo0qm12jN0bdXm8uChaTudunA5gGlZ3ZH3cDi8TDlZNNoo4cCtOOkenXIkyyYYBJS009SC8inL69L8LHTdw0oQCselEpAjDPKHI7z+IKFvCryJcZTz983k82pPnHIk3iVTKuZqdAWE7d+7xxR7odJmV5oztEsl5YDtLh8dp7qmw+Cq3Q+OHluRZ5kWKtUqD9OsRReEBLDJI7k2T2C4CPQFQuQAnBYCIU4J/M3R7ZoCHwgG+Ks77LOGQmET5VIRWu2/16Pr9mp/d8q76JK8X716NfPEE4/bcro6ZYlv1JsBF0aaAcEFsN0bBW8t9lYNjnjLcq1xc4fMrJaQy9RSwtxlGIaPnIAcgEco2iNhRqnH3yri+T3CtDiTz6upHApSZSyzCo5+XatBV7XFrghxV7SbZqUb8s4Njxn6bNnw0LDLoQL+utM2HhwxGuwZujadE+QQLLVetXHR8bFnSgGmScOkY805KhJUCvnsBhZuXuVpYSAU4ZQQS/QjmpBqEIzAFwg7nUAValSf1D4UqSO9saqiGrrG9QdH/C4zx7Yv0Z3q/ctf/jI+9tGPZgUQdbb5RZ2c3jgtqnyv0SD4cujE2Wb2LpuAyfBNhm5W+RzsEKwOJvLZFHJyrC7doOil4pAdIU4poXeIlcAfjADQ1JItq4xlmrRxwtY3UFG+O3O5OrO6VL0zJZl/MyDoiqgTVHupxQ1fnTvUQNNIDQCP0CEMD8O3OPIJuFMBLH6GHiyX8jzSyRVo196C4aXWbwSJvkHEEgO8Xy8a62FZr5RVPicH1G1Fno38rpqnc/1S6BZ0q1wubjZYaHHCbo28bYfgY80BdAgPSzRJGIFm+NWqWYt+4foaFIsdpYJcNolsZh1CXOapYjBES7hertw5ymvdOMrpuyCfN19x7FZzRkh75ZVX0s3gisYfZ+6aAzAQIQCd2Hq44re8tg80OPKcrS4g51AKwelA5UGuLXSeaaiGzC4GzjfdLnsMwOWtQVeykRVO4MJxbTsEIwkcOHnGTV/Uv3D/Oa0eqUEW6mh72r52z9BpekjgK6iUK+CUIIcAKYiHGziRcJhW2Mix2lrIEO6U5tzQ0Gb3zNVgaQ23QeXOnCrdk3daMMnafqWtJJ5klKppx48bQXUTFi7yDV/LJ+6Mo2S+pgQc5Vbto8kMnp1C1/Takq8fOuV0aHWXLdu/J5o4gBu++54bpBu0G7Yyk+Udgsa2oRcK+ayTuWgbFFmDyGjTCdyvdQN3nWiAJmpLtxpV5xYXbKblrTmCUIssCnhrsHzSwb1OYLsjvV2nsGzgRcfQNU1P1Z+iua/dbESbsMlEB7Cb32OU5AAEnqdnHopym3Oo+BatIbKJjmG7obUG2T5sVuQCHQBUAXDU4zJEB9B5eTUj7I0XcGFFOcT2/eyiycyiMzlXKFzWCESbjuDC0OI17Ud96y1NaDfC4bDmwNWKqEa4AJQYfhwm0hBkW4Z+4cKF55PJtZRpmsHe3l6PaQpNFne6BC9W11YqmcymN5fL+gqFkkd2vOTPTfrRr/r/2xLFzjNq+/plD8CLX6rpIBYzM9feBJAFUABQRprgdxjpTz/99E8lxfO2Z3QAHtt5oDZ86t6vtMtxx0RtmAybox15AJVOoSsTNZAm2Pi8WgOcq72Zh8avFfgd8FWGPYUSrsPaFnQhzbbsaConsI2yI8Kd4LWGzrRbbQC/Xlutu3/F4nEdzIisY+gKvIIkHcCqA1M0gas5AO9+W92R0Q4X6M6hux1Ane6uyL1jBt51dsf+F6sNFKNoUUSaAAAAAElFTkSuQmCC</content>\n    <filesize>7845</filesize>\n  </attachment>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>0</number>\n    <className>Invitation.WebHome</className>\n    <guid>922f917b-ccec-41a4-a288-0eb6bcd05e06</guid>\n    <class>\n      <name>Invitation.WebHome</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allowUsersOfOtherWikis>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>allowUsersOfOtherWikis</name>\n        <number>4</number>\n        <prettyName>Let users of other wikis send</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allowUsersOfOtherWikis>\n      <commonPage>\n        <disabled>0</disabled>\n        <name>commonPage</name>\n        <number>18</number>\n        <picker>0</picker>\n        <prettyName>common</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </commonPage>\n      <emailClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailClass</name>\n        <number>5</number>\n        <picker>1</picker>\n        <prettyName>Email message XClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailClass>\n      <emailContainer>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailContainer</name>\n        <number>9</number>\n        <picker>1</picker>\n        <prettyName>Document containing email XObjects</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailContainer>\n      <emailRegex>\n        <disabled>0</disabled>\n        <name>emailRegex</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>Regular expression for validating email addresses</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </emailRegex>\n      <from_address>\n        <disabled>0</disabled>\n        <name>from_address</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>Email \"from\" address</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </from_address>\n      <guestsActionsPage>\n        <disabled>0</disabled>\n        <name>guestsActionsPage</name>\n        <number>14</number>\n        <picker>0</picker>\n        <prettyName>guestsActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </guestsActionsPage>\n      <javamail_extra_props>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>javamail_extra_props</name>\n        <number>15</number>\n        <picker>0</picker>\n        <prettyName>Javamail extra properties</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </javamail_extra_props>\n      <mainPage>\n        <disabled>0</disabled>\n        <name>mainPage</name>\n        <number>19</number>\n        <picker>0</picker>\n        <prettyName>mainPage</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </mainPage>\n      <membersActionsPage>\n        <disabled>0</disabled>\n        <name>membersActionsPage</name>\n        <number>16</number>\n        <picker>0</picker>\n        <prettyName>membersActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersActionsPage>\n      <membersCommonPage>\n        <disabled>0</disabled>\n        <name>membersCommonPage</name>\n        <number>17</number>\n        <picker>0</picker>\n        <prettyName>membersCommon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersCommonPage>\n      <messageBodyTemplate>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplate</name>\n        <number>3</number>\n        <picker>0</picker>\n        <prettyName>Email message body HTML template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplate>\n      <messageBodyTemplatePlain>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplatePlain</name>\n        <number>20</number>\n        <picker>0</picker>\n        <prettyName>Message body plain text template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplatePlain>\n      <smtp_port>\n        <disabled>0</disabled>\n        <name>smtp_port</name>\n        <number>13</number>\n        <picker>0</picker>\n        <prettyName>Smtp port</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_port>\n      <smtp_server>\n        <disabled>0</disabled>\n        <name>smtp_server</name>\n        <number>12</number>\n        <picker>0</picker>\n        <prettyName>Smtp server host name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server>\n      <smtp_server_password>\n        <disabled>0</disabled>\n        <name>smtp_server_password</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>Smtp password</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_password>\n      <smtp_server_username>\n        <disabled>0</disabled>\n        <name>smtp_server_username</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>Smtp username</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_username>\n      <subjectLineTemplate>\n        <disabled>0</disabled>\n        <name>subjectLineTemplate</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>Email subject line template</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </subjectLineTemplate>\n      <usersMayPersonalizeMessage>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMayPersonalizeMessage</name>\n        <number>8</number>\n        <prettyName>Let users personalize messages</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMayPersonalizeMessage>\n      <usersMaySendToMultiple>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMaySendToMultiple</name>\n        <number>6</number>\n        <prettyName>Let users send to multiple addresses</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMaySendToMultiple>\n    </class>\n    <property>\n      <allowUsersOfOtherWikis>0</allowUsersOfOtherWikis>\n    </property>\n    <property>\n      <commonPage>Invitation.InvitationCommon</commonPage>\n    </property>\n    <property>\n      <emailClass>Invitation.InvitationMailClass</emailClass>\n    </property>\n    <property>\n      <emailContainer>Invitation.InvitationMessages</emailContainer>\n    </property>\n    <property>\n      <emailRegex>/^([^@\\s]+)@((?:[-a-zA-Z0-9]+\\.)+[a-zA-Z]{2,})$/</emailRegex>\n    </property>\n    <property>\n      <from_address>no-reply@localhost.localdomain</from_address>\n    </property>\n    <property>\n      <guestsActionsPage>Invitation.InvitationGuestActions</guestsActionsPage>\n    </property>\n    <property>\n      <javamail_extra_props/>\n    </property>\n    <property>\n      <mainPage>Invitation.WebHome</mainPage>\n    </property>\n    <property>\n      <membersActionsPage>Invitation.InvitationMemberActions</membersActionsPage>\n    </property>\n    <property>\n      <membersCommonPage>Invitation.InvitationMembersCommon</membersCommonPage>\n    </property>\n    <property>\n      <messageBodyTemplate>{{velocity}}\n#set($discard = \"#template('colorThemeInit.vm')\")\n#if(\"$!theme\" == \"\")\n #set($theme = {\"linkColor\":\"#4791BC\"})\n#end\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))\n#set($wikiName = $xwiki.getRequestURL().replaceAll(\"http://([^/:]*).*$\", \"$1\"))\n#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get(\"guestsActionsPage\")).getExternalURL())\n#set($linkStyle = \"color:$theme.get('linkColor');text-decoration:none;\")\n#set($bigText = \"font-size:130%;\")\n#set($joinLink = \"float:left;\")\n#set($declineLink = \"color:#f88;float:right;text-decoration:none;\")\n\n$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])\n\n{{html clean=false}}\n#if(\"$!messageBody\" != \"\")\n  &lt;p style=\"$bigText\"&gt;\n  $!escapetool.xml($!messageBody)\n  &lt;/p&gt;\n#end\n&lt;p style=\"margin-top:30px\"&gt;\n&lt;a href=\"${guestActionsURL}?doAction_accept=y&amp;amp;messageID=$messageID\" style=\"$bigText$joinLink$linkStyle\"&gt;\n$services.localization.render('xe.invitation.emailContent.joinLink')\n&lt;/a&gt;\n&lt;a href=\"${guestActionsURL}?doAction_decline=y&amp;amp;messageID=$messageID\" style=\"$bigText$declineLink\"&gt;\n $services.localization.render('xe.invitation.emailContent.declineLink')\n&lt;/a&gt;&lt;/p&gt;\n&lt;hr style=\"clear:both\" /&gt;\n$services.localization.render('xe.invitation.emailContent.reportMessage', [\"&lt;a href=$escapetool.getQ()${guestActionsURL}?doAction_report=y&amp;amp;messageID=$messageID$escapetool.getQ() style=$escapetool.getQ()$linkStyle$escapetool.getQ()&gt;\", \"&lt;/a&gt;\"])\n{{/html}}\n{{/velocity}}</messageBodyTemplate>\n    </property>\n    <property>\n      <messageBodyTemplatePlain>{{velocity}}\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))#set($wikiName = $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"))#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get('guestsActionsPage')).getExternalURL())$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])#if(\"$!messageBody\" != '')  $messageBody#end$services.localization.render('xe.invitation.emailContent.joinLink')${guestActionsURL}?doAction_accept=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.declineLink')${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.reportMessage', ['', \"$util.getNewline()${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID\"]){{/velocity}}</messageBodyTemplatePlain>\n    </property>\n    <property>\n      <smtp_port>25</smtp_port>\n    </property>\n    <property>\n      <smtp_server>localhost</smtp_server>\n    </property>\n    <property>\n      <smtp_server_password/>\n    </property>\n    <property>\n      <smtp_server_username/>\n    </property>\n    <property>\n      <subjectLineTemplate>{{velocity}}$services.localization.render('xe.invitation.emailContent.subjectLine', [$xcontext.getUser().replaceAll(\"^[^\\.]*.\", \"\"), $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"), $!subjectLine]){{/velocity}}</subjectLineTemplate>\n    </property>\n    <property>\n      <usersMayPersonalizeMessage>1</usersMayPersonalizeMessage>\n    </property>\n    <property>\n      <usersMaySendToMultiple>0</usersMaySendToMultiple>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>0</number>\n    <className>XWiki.ConfigurableClass</className>\n    <guid>ce538a91-32b8-4623-9367-090c256e9c2d</guid>\n    <class>\n      <name>XWiki.ConfigurableClass</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <categoryIcon>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>categoryIcon</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>categoryIcon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </categoryIcon>\n      <codeToExecute>\n        <contenttype>VelocityWiki</contenttype>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <hint/>\n        <name>codeToExecute</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>codeToExecute</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </codeToExecute>\n      <configurationClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <idField/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>configurationClass</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>configurationClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </configurationClass>\n      <displayBeforeCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayBeforeCategory</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>displayBeforeCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayBeforeCategory>\n      <displayInCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInCategory</name>\n        <number>9</number>\n        <picker>0</picker>\n        <prettyName>displayInCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInCategory>\n      <displayInSection>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInSection</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>displayInSection</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInSection>\n      <heading>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>heading</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>heading</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </heading>\n      <iconAttachment>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>iconAttachment</name>\n        <number>8</number>\n        <picker>0</picker>\n        <prettyName>iconAttachment</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </iconAttachment>\n      <linkPrefix>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>linkPrefix</name>\n        <number>5</number>\n        <picker>0</picker>\n        <prettyName>linkPrefix</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </linkPrefix>\n      <propertiesToShow>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>1</multiSelect>\n        <name>propertiesToShow</name>\n        <number>6</number>\n        <picker>0</picker>\n        <prettyName>propertiesToShow</prettyName>\n        <relationalStorage>1</relationalStorage>\n        <separator> </separator>\n        <separators> ,|</separators>\n        <size>20</size>\n        <sort>none</sort>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values/>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </propertiesToShow>\n      <scope>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>scope</name>\n        <number>12</number>\n        <picker>1</picker>\n        <prettyName>scope</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <sort/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values>WIKI|SPACE|ALL_SPACES|WIKI+ALL_SPACES</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </scope>\n      <sectionOrder>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>sectionOrder</name>\n        <number>12</number>\n        <numberType>integer</numberType>\n        <prettyName>sectionOrder</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>\n      </sectionOrder>\n    </class>\n    <property>\n      <categoryIcon/>\n    </property>\n    <property>\n      <codeToExecute/>\n    </property>\n    <property>\n      <configurationClass>Invitation.WebHome</configurationClass>\n    </property>\n    <property>\n      <displayBeforeCategory/>\n    </property>\n    <property>\n      <displayInCategory>usersgroups</displayInCategory>\n    </property>\n    <property>\n      <displayInSection>Invitation</displayInSection>\n    </property>\n    <property>\n      <heading/>\n    </property>\n    <property>\n      <iconAttachment>InvitationSectionIcon.png</iconAttachment>\n    </property>\n    <property>\n      <linkPrefix/>\n    </property>\n    <property>\n      <propertiesToShow>\n        <value>subjectLineTemplate</value>\n        <value>messageBodyTemplate</value>\n        <value>emailRegex</value>\n        <value>from_address</value>\n        <value>allowUsersOfOtherWikis</value>\n        <value>usersMayPersonalizeMessage</value>\n        <value>usersMaySendToMultiple</value>\n        <value>emailClass</value>\n        <value>emailContainer</value>\n      </propertiesToShow>\n    </property>\n    <property>\n      <scope>WIKI</scope>\n    </property>\n    <property>\n      <sectionOrder>600</sectionOrder>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>1</number>\n    <className>XWiki.ConfigurableClass</className>\n    <guid>10608785-fe04-4114-a284-dfabc1ebfdee</guid>\n    <class>\n      <name>XWiki.ConfigurableClass</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <categoryIcon>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>categoryIcon</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>categoryIcon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </categoryIcon>\n      <codeToExecute>\n        <contenttype>VelocityWiki</contenttype>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <hint/>\n        <name>codeToExecute</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>codeToExecute</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </codeToExecute>\n      <configurationClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <idField/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>configurationClass</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>configurationClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </configurationClass>\n      <displayBeforeCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayBeforeCategory</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>displayBeforeCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayBeforeCategory>\n      <displayInCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInCategory</name>\n        <number>9</number>\n        <picker>0</picker>\n        <prettyName>displayInCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInCategory>\n      <displayInSection>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInSection</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>displayInSection</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInSection>\n      <heading>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>heading</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>heading</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </heading>\n      <iconAttachment>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>iconAttachment</name>\n        <number>8</number>\n        <picker>0</picker>\n        <prettyName>iconAttachment</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </iconAttachment>\n      <linkPrefix>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>linkPrefix</name>\n        <number>5</number>\n        <picker>0</picker>\n        <prettyName>linkPrefix</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </linkPrefix>\n      <propertiesToShow>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>1</multiSelect>\n        <name>propertiesToShow</name>\n        <number>6</number>\n        <picker>0</picker>\n        <prettyName>propertiesToShow</prettyName>\n        <relationalStorage>1</relationalStorage>\n        <separator> </separator>\n        <separators> ,|</separators>\n        <size>20</size>\n        <sort>none</sort>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values/>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </propertiesToShow>\n      <scope>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>scope</name>\n        <number>12</number>\n        <picker>1</picker>\n        <prettyName>scope</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <sort/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values>WIKI|SPACE|ALL_SPACES|WIKI+ALL_SPACES</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </scope>\n      <sectionOrder>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>sectionOrder</name>\n        <number>12</number>\n        <numberType>integer</numberType>\n        <prettyName>sectionOrder</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>\n      </sectionOrder>\n    </class>\n    <property>\n      <categoryIcon/>\n    </property>\n    <property>\n      <codeToExecute/>\n    </property>\n    <property>\n      <configurationClass>Invitation.WebHome</configurationClass>\n    </property>\n    <property>\n      <displayBeforeCategory/>\n    </property>\n    <property>\n      <displayInCategory/>\n    </property>\n    <property>\n      <displayInSection>Invitation</displayInSection>\n    </property>\n    <property>\n      <heading>$services.localization.render('xe.invitation.configuration.smtpHeading')</heading>\n    </property>\n    <property>\n      <iconAttachment/>\n    </property>\n    <property>\n      <linkPrefix/>\n    </property>\n    <property>\n      <propertiesToShow>\n        <value>smtp_server_password</value>\n        <value>smtp_server_username</value>\n        <value>smtp_port</value>\n        <value>smtp_server</value>\n        <value>javamail_extra_props</value>\n      </propertiesToShow>\n    </property>\n    <property>\n      <scope>WIKI</scope>\n    </property>\n    <property>\n      <sectionOrder/>\n    </property>\n  </object>\n</xwikidoc>\n", "/*\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\npackage org.xwiki.invitation;\n\nimport java.util.stream.IntStream;\n\nimport javax.script.ScriptContext;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.xwiki.model.reference.DocumentReference;\nimport org.xwiki.rendering.RenderingScriptServiceComponentList;\nimport org.xwiki.rendering.internal.configuration.DefaultRenderingConfigurationComponentList;\nimport org.xwiki.rendering.internal.macro.message.ErrorMessageMacro;\nimport org.xwiki.rendering.internal.macro.message.InfoMessageMacro;\nimport org.xwiki.rendering.syntax.Syntax;\nimport org.xwiki.script.ScriptContextManager;\nimport org.xwiki.security.authorization.AuthorizationManager;\nimport org.xwiki.test.annotation.ComponentList;\nimport org.xwiki.test.page.HTML50ComponentList;\nimport org.xwiki.test.page.PageTest;\nimport org.xwiki.test.page.TestNoScriptMacro;\nimport org.xwiki.test.page.XWikiSyntax21ComponentList;\nimport org.xwiki.user.UserReferenceComponentList;\n\nimport com.xpn.xwiki.api.Object;\nimport com.xpn.xwiki.doc.XWikiDocument;\nimport com.xpn.xwiki.objects.BaseObject;\n\nimport static javax.script.ScriptContext.GLOBAL_SCOPE;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\n\n/**\n * Test of {@code Invitation.InvitationCommon}.\n *\n * @version $Id$\n * @since 15.0RC1\n * @since 14.10.1\n * @since 14.4.8\n * @since 13.10.11\n */\n@HTML50ComponentList\n@XWikiSyntax21ComponentList\n@RenderingScriptServiceComponentList\n@DefaultRenderingConfigurationComponentList\n@UserReferenceComponentList\n@ComponentList({\n    InfoMessageMacro.class,\n    ErrorMessageMacro.class,\n    TestNoScriptMacro.class\n})\nclass InvitationCommonPageTest extends PageTest\n{\n    private ScriptContext scriptContext;\n\n    @BeforeEach\n    void setUp() throws Exception\n    {\n        AuthorizationManager authorizationManager = this.componentManager.getInstance(AuthorizationManager.class);\n        // Allow everything by default.\n        when(authorizationManager.hasAccess(any(), any(), any())).thenReturn(true);\n        this.scriptContext = this.oldcore.getMocker().<ScriptContextManager>getInstance(ScriptContextManager.class)\n            .getCurrentScriptContext();\n    }\n\n    @Test\n    void testEq0() throws Exception\n    {\n        this.context.setDoc(this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"]]  {{noscript/}}\", \"InvitationCommon\"), this.context));\n\n        DocumentReference invitationCommonReference = new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\");\n        Document document = Jsoup.parse(loadPage(invitationCommonReference).getRenderedContent(this.context));\n        assertEquals(\"xe.invitation.internalDocument []] {{noscript/}}.WebHome]\",\n            document.selectFirst(\".infomessage\").text());\n    }\n\n    @Test\n    void testEq1ConfigClassIsNew() throws Exception\n    {\n        String spaceName = \"<script>console.log</script>]]{{noscript/}}\";\n        DocumentReference invitationCommonReference = new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\");\n\n        XWikiDocument doc =\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", spaceName, \"InvitationCommon\"), this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        this.request.put(\"test\", \"1\");\n\n        Document document = Jsoup.parse(loadPage(invitationCommonReference).getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element errorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Class document <script>console\\\\.log</script>]]{{noscript/}}.WebHome not found. \"\n            + \"can't run test.\", errorMessage.text());\n        Element errorLink = errorMessage.selectFirst(\"a\");\n        assertEquals(\"<script>console\\\\.log</script>]]{{noscript/}}.WebHome\", errorLink.text());\n        assertEquals(\"<script>console\\\\.log</script>]]{{noscript/}}.WebHome\", errorLink.attr(\"href\"));\n    }\n\n    @Test\n    void testEq1ConfigClassExistsInvalidFromAddress() throws Exception\n    {\n        // Create an InvitationCommon file.\n        DocumentReference documentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\");\n        XWikiDocument doc = this.xwiki.getDocument(documentReference, this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"<script>console.log('from_address')</script>\", this.context);\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        XWikiDocument invitationCommonDoc = loadPage(new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\"));\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config map too small\", firstErrorMessage.text());\n        Element secondErrorMessage = document.select(\".errormessage\").get(1);\n        assertEquals(\"form_address incorrect, expecting \\\"no-reply@localhost.localdomain\\\" \"\n            + \"got \\\"<script>console.log('from_address')</script>\\\"\", secondErrorMessage.text());\n    }\n\n    @Test\n    void testEq1ConfigClassExistsConfigMapTooSmall() throws Exception\n    {\n        // Create an InvitationCommon file.\n        XWikiDocument doc = this.xwiki\n            .getDocument(new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\"),\n                this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"no-reply@localhost.localdomain\", this.context);\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        DocumentReference reference = new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\");\n        XWikiDocument invitationCommonDoc = loadPage(reference);\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config map too small\", firstErrorMessage.text());\n        Element secondErrorMessage = document.select(\".errormessage\").get(1);\n        assertEquals(\"Config document not created\", secondErrorMessage.text());\n    }\n\n    @Test\n    void testEq1ConfigClassExistsNewInvitationConfig() throws Exception\n    {\n        // Create an InvitationCommon file.\n        XWikiDocument doc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\"), this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n        // Initialize 8 fields, because that's the only check performed in the document currently.\n        IntStream.range(0, 8)\n            .forEach(value -> configDoc.getXClass().addTextField(\"field\" + value, \"Field \" + value, 30));\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"no-reply@localhost.localdomain\", this.context);\n        IntStream.range(0, 8)\n            .forEach(value -> invitationConfigXObject.set(\"field\" + value, \"value \" + value, this.context));\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        DocumentReference reference = new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\");\n        XWikiDocument invitationCommonDoc = loadPage(reference);\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config document not created\", firstErrorMessage.text());\n    }\n\n    @Test\n    void displayMessageVelocityMacro() throws Exception\n    {\n        loadPage(new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\"));\n        DocumentReference invitationMailClassDocumentReference =\n            new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationMailClass\");\n        loadPage(invitationMailClassDocumentReference);\n\n        XWikiDocument page = this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"Space\", \"Page\"), this.context);\n        BaseObject invitationMailXObject = page.newXObject(invitationMailClassDocumentReference, this.context);\n        invitationMailXObject.set(\"messageBody\", \"<strong>message body</strong>\", this.context);\n        page.setSyntax(Syntax.XWIKI_2_1);\n        page.setContent(\"{{include reference=\\\"Invitation.InvitationCommon\\\"/}}\\n\"\n            + \"\\n\"\n            + \"{{velocity}}\\n\"\n            + \"$mail.class\\n\"\n            + \"#displayMessage($mail)\\n\"\n            + \"{{/velocity}}\");\n\n        this.scriptContext.setAttribute(\"mail\", new Object(invitationMailXObject, this.context), GLOBAL_SCOPE);\n\n        Document document = renderHTMLPage(page);\n        assertEquals(\"<strong>message body</strong>\", document.selectFirst(\"#preview-messagebody-field\").html());\n    }\n}\n", "/*\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\npackage org.xwiki.invitation;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.junit.jupiter.api.Test;\nimport org.xwiki.model.reference.DocumentReference;\nimport org.xwiki.rendering.RenderingScriptServiceComponentList;\nimport org.xwiki.rendering.internal.configuration.DefaultExtendedRenderingConfiguration;\nimport org.xwiki.rendering.internal.configuration.RenderingConfigClassDocumentConfigurationSource;\nimport org.xwiki.rendering.internal.macro.message.InfoMessageMacro;\nimport org.xwiki.test.annotation.ComponentList;\nimport org.xwiki.test.page.HTML50ComponentList;\nimport org.xwiki.test.page.PageTest;\nimport org.xwiki.test.page.TestNoScriptMacro;\nimport org.xwiki.test.page.XWikiSyntax21ComponentList;\n\nimport com.xpn.xwiki.doc.XWikiDocument;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n/**\n * Test of {@code Invitation.InvitationConfig}.\n *\n * @version $Id$\n * @since 15.0RC1\n * @since 14.4.8\n * @since 14.10.4\n */\n@HTML50ComponentList\n@XWikiSyntax21ComponentList\n@RenderingScriptServiceComponentList\n@ComponentList({\n    InfoMessageMacro.class,\n    TestNoScriptMacro.class,\n    // Start - Required in addition of RenderingScriptServiceComponentList\n    DefaultExtendedRenderingConfiguration.class,\n    RenderingConfigClassDocumentConfigurationSource.class,\n    // End - Required in additional of RenderingScriptServiceComponentList\n})\nclass InvitationConfigPageTest extends PageTest\n{\n    private static final DocumentReference INVITATION_CONFIG_DOCUMENT_REFERENCE =\n        new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationConfig\");\n\n    @Test\n    void escapeInfoMessageInternalDocumentParameter() throws Exception\n    {\n        XWikiDocument invitationGuestActionsDocument = loadPage(INVITATION_CONFIG_DOCUMENT_REFERENCE);\n\n        // Set up the current doc in the context so that $doc is bound in scripts\n        this.context.setDoc(\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"]] {{noscript/}}\", \"Page\"), this.context));\n\n        Document document = Jsoup.parse(invitationGuestActionsDocument.getRenderedContent(this.context));\n        Element infomessage = document.selectFirst(\".infomessage\");\n        assertEquals(\"xe.invitation.internalDocument [Invitation.WebHome]\", infomessage.text());\n    }\n}\n"], "fixing_code": ["<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n\n<!--\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n-->\n\n<xwikidoc version=\"1.4\" reference=\"Invitation.InvitationCommon\" locale=\"\">\n  <web>Invitation</web>\n  <name>InvitationCommon</name>\n  <language/>\n  <defaultLanguage/>\n  <translation>0</translation>\n  <creator>xwiki:XWiki.Admin</creator>\n  <parent>Invitation.WebHome</parent>\n  <author>xwiki:XWiki.Admin</author>\n  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>\n  <version>1.1</version>\n  <title/>\n  <comment/>\n  <minorEdit>false</minorEdit>\n  <syntaxId>xwiki/2.1</syntaxId>\n  <hidden>true</hidden>\n  <content>{{velocity}}\n#*\n * Invitation Application\n * This document contains common macros used by all documents in the Invitation Application.\n *\n * Macros in this script don't rely on any variables except those which are passed to them and the following:\n *\n * $doc the com.xpn.xwiki.api.Document object representing the document containing this code.\n * $msg the internationalization message provider containing a get(String) and a get(String, List) function\n * $xcontext the com.xpn.xwiki.Context object for this request\n * $xwiki an object of the com.xpn.xwiki.api.XWiki class.\n * $escapetool an object of class org.apache.velocity.tools.generic.EscapeTool\n * $util used to get a newline character ($util.getNewLine())\n *\n * No macros in this script depend on any other macros.\n *###\n##\n#if($request.getParameter('test') == '1')\n  {{info}}testLoadInvitationConfig{{/info}}\n  #testLoadInvitationConfig()\n#elseif($doc.documentReference.name == 'InvitationCommon')\n  #set ($linkTarget = \"${doc.getSpace()}.WebHome\")\n  #set ($linkTarget = $services.rendering.escape($linkTarget, 'xwiki/2.1'))\n  {{info}}$services.localization.render('xe.invitation.internalDocument', [$linkTarget]){{/info}}\n#end\n##\n#*\n * Display a message for the sender (preview) or for the admin (review sent messages)\n *\n * $mail (XObject representing email message) the message to view\n *\n * $recipients (List&lt;String&gt;) (Optional) the list of email addresses to override the list provided by $mail\n *                                       used for preview because createMailFromTemplate will exclude addresses\n *                                       which are invalid and we want to show the invalid addresses to the\n *                                       user to tell them that they need to correct them.\n *\n * $invalidAddresses (List&lt;String&gt;) (Optional) List of invalid email addresses in recipients. Needed if you want to\n *                                             show the user that they made a mistake on some addresses.\n *                                             For each email in $invalidEmails, if it is also in $recipients, then it\n *                                             will be marked but left in the same order, emails in $invlaidEmails but\n *                                             not found in $recipients will end up at the end of the list.\n *###\n#macro(displayMessage, $mail, $recipients, $invalidAddresses)\n\n  {{html wiki=false clean=false}}\n  &lt;div id=\"invitation-displaymessage\" class=\"invitation\"&gt;\n   &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.previewLabel'))&lt;/strong&gt;\n   &lt;div class=\"invitation invitation-preview\"&gt;\n    #set($recips = [])\n    #set($invalid = [])\n    ## get the lists of valid and invalid email addresses.\n    #if(\"$!invalidAddresses\" == '')\n      #set($invalid = [])\n      #if(\"$!recipients\" == '')\n        #set($recips = [$mail.getProperty('recipient').getValue().trim()])\n      #else\n        #set($discard = $recips.addAll($recipients))\n      #end\n    #else\n      ## Set to local variables to prevent altering input values.\n      #set($discard = $recips.addAll($recipients))\n      #set($discard = $invalid.addAll($invalidAddresses))\n    #end\n    ## Print the email addresses to be sent to.\n    ## To:\n    &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.toLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-to-field\" class=\"invitation-preview field\"&gt;\n     #foreach($recip in $recips)\n       #if($invalid.contains($recip))\n         &lt;span class=\"invalid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n         #set($discard = $invalid.remove($recip))\n       #else\n         &lt;span class=\"valid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n       #end\n     #end\n     #foreach($recip in $invalid)\n       &lt;span class=\"invalid-address\"&gt;$!escapetool.xml($!recip)&lt;/span&gt; ##\n     #end\n     &amp;nbsp; ## used to make the field the correct size if it's empty.\n    &lt;/div&gt;\n    ## Tell the user that some of the email addresses are invalid.\n    #if($invalidAddresses &amp;&amp; $invalidAddresses.size() &gt; 0)\n      &lt;p class=\"invalid-address-message\"&gt;\n       &lt;span class=\"errormessage\"&gt;\n        #if($recips.size() == 1)\n          ## The email address given is invalid and will not be sent to.\n          $escapetool.xml($services.localization.render('xe.invitation.displayMessage.theAddressIsInvalid'))\n        #else\n          #if($invalid.size() &gt; 1)\n            $escapetool.xml($services.localization.render('xe.invitation.displayMessage.someAddressesAreInvalid', [$invalidAddresses.size()]))\n          #else\n            $escapetool.xml($services.localization.render('xe.invitation.displayMessage.anAddressesIsInvalid'))\n          #end\n        #end\n       &lt;/span&gt;\n      &lt;/p&gt;\n    #end\n     ## Subject:\n     &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.subjectLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-subjectline-field\" class=\"invitation-preview field\"&gt;\n     $escapetool.xml($mail.getProperty('subjectLine').getValue())\n    &lt;/div&gt;\n    ## Message:\n    &lt;strong&gt;$escapetool.xml($services.localization.render('xe.invitation.contentLabel'))&lt;/strong&gt;\n    &lt;div id=\"preview-messagebody-field\" class=\"invitation-preview field\"&gt;\n     $mail.getProperty('messageBody').getValue()\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n  {{/html}}\n\n#end\n##\n#*\n * Load the configuration.\n * Only works if the script calling this macro has permission to view InvitationConfig \n * (or create it if it doesn't exist)\n *\n * $config (Map&lt;String, String&gt;) will be populated with invitation configuration.\n *\n * $configDocName (String) (Optional) will load configuration from this document, if not specified will use\n *                                    'InvitationConfig' in the same space as $doc.\n *\n * $configClassName (String) (Optional) will load configuration from object of this class, if not specified will use\n *                                      'Invitation' in the same space as $doc.\n *###\n#macro(loadInvitationConfig, $config, $configDocName, $configClassName)\n  #define($discard)\n    #if(\"$!configDocName\" == '')\n      #set($configDocNameInternal = \"${doc.getSpace()}.InvitationConfig\")\n    #else\n      #set($configDocNameInternal = $configDocName)\n    #end\n    #if(\"$!configClassName\" == '')\n      #set($configClassNameInternal = \"${doc.getSpace()}.WebHome\")\n    #else\n      #set($configClassNameInternal = $configClassName)\n    #end\n    ##\n    ## Load some parameters from the configuration.\n    #set($configDoc = $xwiki.getDocumentAsAuthor($configDocNameInternal))\n    ##\n    ## If no configuration document exists, create one and save it.\n    #if($configDoc.isNew())\n      ##\n      ## load the default configuration from this document.\n      #set($thisDocument = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationCommon\"))\n      #set($defaultConfigObj = $thisDocument.getObject($configClassNameInternal))\n      #foreach($element in $defaultConfigObj.getProperties())\n        $config.put($element.getName(), $defaultConfigObj.getProperty($element.getName()).getValue())\n      #end\n      ##\n      #set($configDocContent = \n        '{{velocity}}{{info}}$services.localization.render(''xe.invitation.internalDocument'','\n          + '[$services.rendering.escape(\"' + \"$!config.get('mainPage')\" \n          + '\", ''xwiki/2.1'')]){{/info}}{{/velocity}}')\n      $configDoc.setContent($configDocContent)\n      $configDoc.setParent($configClassNameInternal)\n      #set($configObj = $configDoc.newObject($configClassNameInternal))\n      #foreach($key in $config.keySet())\n        $configObj.set($key, $config.get($key))\n      #end\n      ## Now create the configurable objects.\n      #set($cfgable = $configDoc.newObject('XWiki.ConfigurableClass'))\n      $cfgable.set('displayInSection', 'Invitation')\n      $cfgable.set('configurationClass', $configClassNameInternal)\n      $cfgable.set('configureGlobally', 1)\n      #set($propsToShow = 'subjectLineTemplate|messageBodyTemplate|emailRegex|from_address|allowUsersOfOtherWikis'\n                        + '|usersMayPersonalizeMessage|usersMaySendToMultiple|emailClass|emailContainer')\n      $cfgable.set('propertiesToShow', $propsToShow)\n      #set($cfgable = $configDoc.newObject('XWiki.ConfigurableClass'))\n      $cfgable.set('displayInSection', 'Invitation')\n      $cfgable.set('heading', '$services.localization.render(''xe.invitation.configuration.smtpHeading'')')\n      $cfgable.set('configurationClass', $configClassNameInternal)\n      $cfgable.set('configureGlobally', 1)\n      $cfgable.set('propertiesToShow',\n                        'smtp_server_password|smtp_server_username|smtp_port|smtp_server|javamail_extra_props')\n      $configDoc.saveAsAuthor()\n    #else\n      ## load the configuration object...\n      #set($configObj = $configDoc.getObject($configClassNameInternal))\n      #foreach($element in $configObj.getProperties())\n        $config.put($element.getName(), $configObj.getProperty($element.getName()).getValue())\n      #end\n    #end\n  #end## define $discard\n  ## Now invoke the defined code...\n  #set($discard = $discard.toString())\n#end\n##\n#*\n * Basic unit testing of the macro above.\n *###\n#macro(testLoadInvitationConfig)\n  #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n  #if(!$configDoc.isNew())\n    $configDoc.deleteAsAuthor()\n  #end\n  #set($configClass = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.WebHome\"))\n  #if($configClass.isNew())\n    #set ($classDocumentLink = $services.rendering.escape(\"${doc.getSpace()}.WebHome\", 'xwiki/2.1'))\n    {{error}}Class document [[$classDocumentLink]] not found. can't run test.{{/error}}\n  #else\n    #set($config = {})\n    #loadInvitationConfig($config, 'HopefullyNonexistantSpace')\n    #if($config.size() &lt; 9)\n      {{error}}Config map too small{{/error}}\n    #end\n    #if($config.get('from_address') != 'no-reply@localhost.localdomain')\n      {{error}}form_address incorrect, expecting \"no-reply@localhost.localdomain\" got \"$config.get('from_address')\"{{/error}}\n    #end\n    #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n    #if($configDoc.isNew())\n      {{error}}Config document not created{{/error}}\n    #else\n      #set($configObj = $configDoc.getObject(\"${doc.getSpace()}.Invitation\"))\n      $configObj.set('from_address', 'thisisatest@localhost.localdomain')\n      $configDoc.saveAsAuthor()\n      $config.clear()\n      #loadInvitationConfig($config, 'HopefullyNonexistantSpace')\n      #if($config.get('from_address') != 'thisisatest@localhost.localdomain')\n        {{error}}altering config parameter failed.{{/error}}\n      #end\n    #end\n  #end\n  #set($configDoc = $xwiki.getDocumentAsAuthor(\"${doc.getSpace()}.InvitationConfig\"))\n  #if(!$configDoc.isNew())\n    $configDoc.deleteAsAuthor()\n  #end\n#end\n##\n#**\n * Load mail from mail containing document.\n *\n * $config (Map&lt;String, String&gt;) will be used to get the name of the email class.\n *\n * $emailContainer (Document) the document to get the email from.\n *\n * $mail (Map&lt;String, XObject&gt;) will be populated with email message XObjects by their messageID.\n *###\n#macro(loadInvitationMail, $config, $emailContainer, $mail)\n  ## If this doesn't already exist, it's created.\n  #if($emailContainer.isNew())\n    #set($emailContainerContent = \n      '{{velocity}}{{info}}$services.localization.render(''xe.invitation.internalDocument'','\n        + '[$services.rendering.escape(\"' + \"$config.get('emailContainer')\" \n        + '\", ''xwiki/2.1'')]){{/info}}{{/velocity}}')\n    #set($discard = $emailContainer.setContent($emailContainerContent))\n    #set($discard = $emailContainer.setHidden(true))\n    #set($discard = $emailContainer.saveAsAuthor())\n  #end\n  ##\n  ## Load messages into a Map by messageID.\n  #foreach($obj in $emailContainer.getObjects($config.get('emailClass')))\n    #set($discard = $mail.put($obj.getProperty('messageID').getValue(), $obj))\n  #end\n#end\n##\n#**\n * Is a guest allowed to accept an invitation?\n *\n * $guestActionsDoc (Document) the document which guests will use to register.\n *###\n#macro(canGuestAcceptInvitation, $guestActionsDoc)\n  #set($out = 'true')\n  #if(!$xwiki.hasAccessLevel('register', 'XWiki.XWikiGuest', 'XWiki.XWikiPreferences')\n      &amp;&amp; !$guestActionsDoc.hasProgrammingRights())\n  ##\n    #set($out = 'false')\n  #end\n  $out##\n#end\n##\n#**\n * Get the action taken by the user.\n * This will interpret actions taken using displayActionConfirmationForm\n *\n * $parameterMap (Map&lt;String, String&gt;) the parameter map gotten by calling getParameterMap on the servlet request.\n *\n * $actionOutList (List&lt;String&gt;) will be populated with a single value (the action)\n *###\n#macro(getUserAction, $parameterMap, $actionOutList)\n  #set($actionInternal = 0)\n  #foreach($param in $parameterMap.keySet())\n    #if($param.indexOf('doAction_') != -1)\n      ## Strip 'doAction_'\n      #set($actionInternal = $param.substring(9))\n    #end\n  #end\n  #if($actionInternal != 0)\n    #set($discard = $actionOutList.add($actionInternal))\n  #end\n#end\n##\n#*\n * Display a form allowing a user to confirm doing an action.\n *\n * $messageIDs (List&lt;String&gt;) the unique IDs of the invitations to act upon.\n *\n * $action (String) the action to do.\n *\n * $memoLabel (String) what the memo field should be labeled.\n *\n * $confirmLabel (String) what the confirm button should say.\n *\n * $additionalParameters (Map&lt;String, String&gt;) these parameters will be xml escaped and placed in hidden input fields.\n *###\n#macro(displayActionConfirmationForm, $messageIDs, $action, $memoLabel, $confirmLabel, $additionalParameters)\n  {{html wiki=false clean=false}}\n  &lt;div class=\"invitation action-confirm\"&gt;\n   &lt;form action=\"$doc.getURL()\" method=\"POST\"&gt;\n    ##\n    #foreach($id in $messageIDs)\n      &lt;input type=\"hidden\" name=\"messageID\" value=\"$escapetool.xml($id)\" /&gt;\n    #end\n    &lt;input type=\"hidden\" name=\"confirm\" value=\"y\" /&gt;\n    &lt;input type=\"hidden\" name=\"form_token\" value=\"$!{services.csrf.getToken()}\" /&gt;\n    #if($additionalParameters &amp;&amp; $additionalParameters.size() &gt; 0)\n      #foreach($param in $additionalParameters.keySet())\n        &lt;input type=\"hidden\" name=\"$escapetool.xml($param)\" value=\"$escapetool.xml($additionalParameters.get($param))\" /&gt;\n      #end\n    #end\n    ##\n    &lt;dl&gt;\n     &lt;dt&gt;&lt;label for=\"memo\"&gt;$memoLabel&lt;/label&gt;&lt;/dt&gt;\n     &lt;dd&gt;&lt;input type=\"text\" size=\"54\" name=\"memo\" /&gt;&lt;/dd&gt;\n    &lt;/dl&gt;\n    &lt;div class=\"bottombuttons\"&gt;\n     &lt;div class=\"buttons\"&gt;\n      &lt;span class=\"buttonwrapper\"&gt;\n       &lt;input type=\"submit\" class=\"button\" name=\"doAction_$escapetool.xml($action)\" value=\"$confirmLabel\" /&gt;\n      &lt;/span&gt;\n     &lt;/div&gt;\n    &lt;/div&gt;\n   &lt;/form&gt;\n  &lt;/div&gt;\n  {{/html}}\n#end\n##\n#*\n * Set the status of a message and log the memo.\n *\n * $message (Xobject) the message to act on.\n *\n * $status (String) the status to set the message to.\n *\n * $memo (String) what to enter in the log.\n *###\n#macro(setMessageStatus, $message, $status, $memo)\n   $message.set('status', $status)##\n   #set($history = $message.getProperty('history').getValue())\n   #set($statusWord = \"#messageStatusForCode($status)\")\n   ## disallow injection of \\n which starts a new line or { which may be used for macros.\n   #set($log = $memo.replaceAll('\\n', ' ').replaceAll('\\{', '~{'))\n   #set($entry = \"|$statusWord|[[$xcontext.getUser()]]|$!log\")\n   #if(\"$!history\" != '')\n     $message.set('history', \"$!history$util.getNewline()$entry\")##\n   #else\n     $message.set('history', $entry)##\n   #end\n#end\n##\n#*\n * Get the last memo from the message history.\n *\n * $message (Xobject) the message to act on.\n *###\n#macro(getLastMemo, $message)\n  #set($history = \"$!message.getProperty('history').getValue()\")\n  #set($indexAfterLastNewline = $mathtool.add($history.lastIndexOf($util.getNewline()), 1))\n  #if($indexAfterLastNewline &lt; $history.length())\n    #set($entry = \"$!history.substring($indexAfterLastNewline)\")\n    #set($indexAfterLastPipe = $mathtool.add($entry.lastIndexOf('|'), 1))\n    #if($indexAfterLastPipe &lt; $entry.length())\n        $entry.substring($indexAfterLastPipe)##\n    #end\n  #end\n#end\n##\n#*\n * Get the status of the current message for it's code.\n * unsent - not sent yet.\n * pending - sent and awating a response\n * accepted - sent and accepted by recipient\n * declined - sent and declined by recipient\n * canceled - sent then canceled by sender\n * reported - as spam (by recipient)\n * notSpam - reported as spam and investigated (by admin)\n * sendingFailed - failed to send message\n * else - unknown status\n *\n * $status (String) the status of the message.\n *###\n#macro(messageStatusForCode, $status)\n  #if($status == 'unsent')\n    $services.localization.render('xe.invitation.messageStatus.unsent')##\n  #elseif($status == 'pending')\n    $services.localization.render('xe.invitation.messageStatus.pending')##\n  #elseif($status == 'accepted')\n    $services.localization.render('xe.invitation.messageStatus.accepted')##\n  #elseif($status == 'declined')\n    $services.localization.render('xe.invitation.messageStatus.declined')##\n  #elseif($status == 'canceled')\n    $services.localization.render('xe.invitation.messageStatus.canceled')##\n  #elseif($status == 'reported')\n    $services.localization.render('xe.invitation.messageStatus.reported')##\n  #elseif($status == 'notSpam')\n    $services.localization.render('xe.invitation.messageStatus.investigated')##\n  #elseif($status == 'sendingFailed')\n    $services.localization.render('xe.invitation.messageStatus.sendingFailed')##\n  #else\n    $services.localization.render('xe.invitation.messageStatus.unknown', [$escapetool.xml($status)])##\n  #end\n#end\n{{/velocity}}</content>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>Invitation.WebHome</className>\n    <guid>5b0a8220-404d-4d1b-b162-0ebcf323181e</guid>\n    <class>\n      <name>Invitation.WebHome</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allowUsersOfOtherWikis>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>allowUsersOfOtherWikis</name>\n        <number>4</number>\n        <prettyName>Let users of other wikis send</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allowUsersOfOtherWikis>\n      <commonPage>\n        <disabled>0</disabled>\n        <name>commonPage</name>\n        <number>18</number>\n        <picker>0</picker>\n        <prettyName>common</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </commonPage>\n      <emailClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailClass</name>\n        <number>5</number>\n        <picker>1</picker>\n        <prettyName>Email message XClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailClass>\n      <emailContainer>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailContainer</name>\n        <number>9</number>\n        <picker>1</picker>\n        <prettyName>Document containing email XObjects</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailContainer>\n      <emailRegex>\n        <disabled>0</disabled>\n        <name>emailRegex</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>Regular expression for validating email addresses</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </emailRegex>\n      <from_address>\n        <disabled>0</disabled>\n        <name>from_address</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>Email \"from\" address</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </from_address>\n      <guestsActionsPage>\n        <disabled>0</disabled>\n        <name>guestsActionsPage</name>\n        <number>14</number>\n        <picker>0</picker>\n        <prettyName>guestsActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </guestsActionsPage>\n      <javamail_extra_props>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>javamail_extra_props</name>\n        <number>15</number>\n        <picker>0</picker>\n        <prettyName>Javamail extra properties</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </javamail_extra_props>\n      <mainPage>\n        <disabled>0</disabled>\n        <name>mainPage</name>\n        <number>19</number>\n        <picker>0</picker>\n        <prettyName>mainPage</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </mainPage>\n      <membersActionsPage>\n        <disabled>0</disabled>\n        <name>membersActionsPage</name>\n        <number>16</number>\n        <picker>0</picker>\n        <prettyName>membersActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersActionsPage>\n      <membersCommonPage>\n        <disabled>0</disabled>\n        <name>membersCommonPage</name>\n        <number>17</number>\n        <picker>0</picker>\n        <prettyName>membersCommon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersCommonPage>\n      <messageBodyTemplate>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplate</name>\n        <number>3</number>\n        <picker>0</picker>\n        <prettyName>Email message body HTML template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplate>\n      <messageBodyTemplatePlain>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplatePlain</name>\n        <number>20</number>\n        <picker>0</picker>\n        <prettyName>Message body plain text template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplatePlain>\n      <smtp_port>\n        <disabled>0</disabled>\n        <name>smtp_port</name>\n        <number>13</number>\n        <picker>0</picker>\n        <prettyName>Smtp port</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_port>\n      <smtp_server>\n        <disabled>0</disabled>\n        <name>smtp_server</name>\n        <number>12</number>\n        <picker>0</picker>\n        <prettyName>Smtp server host name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server>\n      <smtp_server_password>\n        <disabled>0</disabled>\n        <name>smtp_server_password</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>Smtp password</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_password>\n      <smtp_server_username>\n        <disabled>0</disabled>\n        <name>smtp_server_username</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>Smtp username</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_username>\n      <subjectLineTemplate>\n        <disabled>0</disabled>\n        <name>subjectLineTemplate</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>Email subject line template</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </subjectLineTemplate>\n      <usersMayPersonalizeMessage>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMayPersonalizeMessage</name>\n        <number>8</number>\n        <prettyName>Let users personalize messages</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMayPersonalizeMessage>\n      <usersMaySendToMultiple>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMaySendToMultiple</name>\n        <number>6</number>\n        <prettyName>Let users send to multiple addresses</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMaySendToMultiple>\n    </class>\n    <property>\n      <allowUsersOfOtherWikis>0</allowUsersOfOtherWikis>\n    </property>\n    <property>\n      <commonPage>Invitation.InvitationCommon</commonPage>\n    </property>\n    <property>\n      <emailClass>Invitation.InvitationMailClass</emailClass>\n    </property>\n    <property>\n      <emailContainer>Invitation.InvitationMessages</emailContainer>\n    </property>\n    <property>\n      <emailRegex>/^([^@\\s]+)@((?:[-a-zA-Z0-9]+\\.)+[a-zA-Z]{2,})$/</emailRegex>\n    </property>\n    <property>\n      <from_address>no-reply@localhost.localdomain</from_address>\n    </property>\n    <property>\n      <guestsActionsPage>Invitation.InvitationGuestActions</guestsActionsPage>\n    </property>\n    <property>\n      <javamail_extra_props/>\n    </property>\n    <property>\n      <mainPage>Invitation.WebHome</mainPage>\n    </property>\n    <property>\n      <membersActionsPage>Invitation.InvitationMemberActions</membersActionsPage>\n    </property>\n    <property>\n      <membersCommonPage>Invitation.InvitationMembersCommon</membersCommonPage>\n    </property>\n    <property>\n      <messageBodyTemplate>{{velocity}}\n#set($discard = \"#template('colorThemeInit.vm')\")\n#if(\"$!theme\" == \"\")\n #set($theme = {\"linkColor\":\"#4791BC\"})\n#end\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))\n#set($wikiName = $xwiki.getRequestURL().replaceAll(\"http://([^/:]*).*$\", \"$1\"))\n#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get(\"guestsActionsPage\")).getExternalURL())\n#set($linkStyle = \"color:$theme.get('linkColor');text-decoration:none;\")\n#set($bigText = \"font-size:130%;\")\n#set($joinLink = \"float:left;\")\n#set($declineLink = \"color:#f88;float:right;text-decoration:none;\")\n\n$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])\n\n{{html clean=false}}\n#if(\"$!messageBody\" != \"\")\n  &lt;p style=\"$bigText\"&gt;\n  $!escapetool.xml($!messageBody)\n  &lt;/p&gt;\n#end\n&lt;p style=\"margin-top:30px\"&gt;\n&lt;a href=\"${guestActionsURL}?doAction_accept=y&amp;amp;messageID=$messageID\" style=\"$bigText$joinLink$linkStyle\"&gt;\n$services.localization.render('xe.invitation.emailContent.joinLink')\n&lt;/a&gt;\n&lt;a href=\"${guestActionsURL}?doAction_decline=y&amp;amp;messageID=$messageID\" style=\"$bigText$declineLink\"&gt;\n $services.localization.render('xe.invitation.emailContent.declineLink')\n&lt;/a&gt;&lt;/p&gt;\n&lt;hr style=\"clear:both\" /&gt;\n$services.localization.render('xe.invitation.emailContent.reportMessage', [\"&lt;a href=$escapetool.getQ()${guestActionsURL}?doAction_report=y&amp;amp;messageID=$messageID$escapetool.getQ() style=$escapetool.getQ()$linkStyle$escapetool.getQ()&gt;\", \"&lt;/a&gt;\"])\n{{/html}}\n{{/velocity}}</messageBodyTemplate>\n    </property>\n    <property>\n      <messageBodyTemplatePlain>{{velocity}}\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))#set($wikiName = $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"))#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get('guestsActionsPage')).getExternalURL())$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])#if(\"$!messageBody\" != '')  $messageBody#end$services.localization.render('xe.invitation.emailContent.joinLink')${guestActionsURL}?doAction_accept=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.declineLink')${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.reportMessage', ['', \"$util.getNewline()${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID\"]){{/velocity}}</messageBodyTemplatePlain>\n    </property>\n    <property>\n      <smtp_port>25</smtp_port>\n    </property>\n    <property>\n      <smtp_server>localhost</smtp_server>\n    </property>\n    <property>\n      <smtp_server_password/>\n    </property>\n    <property>\n      <smtp_server_username/>\n    </property>\n    <property>\n      <subjectLineTemplate>{{velocity wiki='false'}}$services.localization.render('xe.invitation.emailContent.subjectLine', [$xcontext.getUser().replaceAll(\"^[^\\.]*.\", \"\"), $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"), $!subjectLine]){{/velocity}}</subjectLineTemplate>\n    </property>\n    <property>\n      <usersMayPersonalizeMessage>1</usersMayPersonalizeMessage>\n    </property>\n    <property>\n      <usersMaySendToMultiple>0</usersMaySendToMultiple>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>XWiki.StyleSheetExtension</className>\n    <guid>57002efd-3fd9-45a9-bedf-d9741dcc1ac9</guid>\n    <class>\n      <name>XWiki.StyleSheetExtension</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <cache>\n        <cache>0</cache>\n        <defaultValue>long</defaultValue>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>cache</name>\n        <number>5</number>\n        <prettyName>Caching policy</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>long|short|default|forbid</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </cache>\n      <code>\n        <contenttype>PureText</contenttype>\n        <disabled>0</disabled>\n        <editor>PureText</editor>\n        <name>code</name>\n        <number>2</number>\n        <prettyName>Code</prettyName>\n        <rows>20</rows>\n        <size>50</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </code>\n      <contentType>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>contentType</name>\n        <number>6</number>\n        <prettyName>Content Type</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>CSS|LESS</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </contentType>\n      <name>\n        <disabled>0</disabled>\n        <name>name</name>\n        <number>1</number>\n        <prettyName>Name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </name>\n      <parse>\n        <disabled>0</disabled>\n        <displayFormType>select</displayFormType>\n        <displayType>yesno</displayType>\n        <name>parse</name>\n        <number>4</number>\n        <prettyName>Parse content</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </parse>\n      <use>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText>forbidden</freeText>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>use</name>\n        <number>3</number>\n        <prettyName>Use this extension</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <unmodifiable>0</unmodifiable>\n        <values>currentPage|onDemand|always</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </use>\n    </class>\n    <property>\n      <cache>long</cache>\n    </property>\n    <property>\n      <code>#template(\"colorThemeInit.vm\")\n.invitation, .invitation input[type='text'], .invitation textarea, .invitation table {\n  float: left;\n  width: 450px;\n}\n\n/* Keep the table from overflowing */\n.invitation .message-table table, .invitation .history-table table {\n  table-layout: fixed;\n  word-wrap: break-word;\n}\n.invitation table th.checkboxcol {\n  width: 5%\n}\n.invitation table th.sentDate {\n  width: 15%\n}\n.invitation table th.recipient {\n  width: 28%\n}\n.invitation table th.history {\n  width: 18%\n}\n/* For message history table */\n.invitation table th.status-set-to {\n  width: 10%\n}\n.invitation table th.log-entry {\n  width: 60%\n}\n\n.invitation-preview {\n  background-color: #FCFCFC;\n  border: 1px solid $theme.get('menuSelectedEntryBackgroundColor');\n  padding: 3px;\n}\n\n.invitation-preview, .right-side {\n  margin-left: 30px;\n}\n\n.invitation-preview .field {\n  background-color: $theme.get('pageContentBackgroundColor');\n  margin-left: 20px;\n  margin-bottom: 10px;\n  padding: 10px;\n  overflow: hidden;\n\n  /* Makes the field fit with padding and margins. */\n  width: 390px;\n}\n\n.clearboth {\n  clear:both;\n}\n\n.invitation input[type='text'], .invitation textarea {\n  margin-bottom: 10px;\n}\n\n/* Labels */\n.invitation strong, .invitation label {\n  font-size: .85em;\n  text-transform: uppercase;\n}\n\n/* \"Preview:\" label */\n.invitation strong {\n  padding-left: 30px;\n}\n\n.invitation-preview strong {\n  padding-left: 20px;\n}</code>\n    </property>\n    <property>\n      <contentType>CSS</contentType>\n    </property>\n    <property>\n      <name>Invitation Style Sheet</name>\n    </property>\n    <property>\n      <parse>1</parse>\n    </property>\n    <property>\n      <use>onDemand</use>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationCommon</name>\n    <number>0</number>\n    <className>XWiki.XWikiRights</className>\n    <guid>f5e4ea78-756b-46a6-87e2-8a79d9ea6cee</guid>\n    <class>\n      <name>XWiki.XWikiRights</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allow>\n        <defaultValue>1</defaultValue>\n        <disabled>0</disabled>\n        <displayFormType>select</displayFormType>\n        <displayType>allow</displayType>\n        <name>allow</name>\n        <number>4</number>\n        <prettyName>Allow/Deny</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allow>\n      <groups>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <multiSelect>1</multiSelect>\n        <name>groups</name>\n        <number>1</number>\n        <picker>1</picker>\n        <prettyName>Groups</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>5</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.GroupsClass</classType>\n      </groups>\n      <levels>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <multiSelect>1</multiSelect>\n        <name>levels</name>\n        <number>2</number>\n        <prettyName>Levels</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>3</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.LevelsClass</classType>\n      </levels>\n      <users>\n        <cache>0</cache>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <multiSelect>1</multiSelect>\n        <name>users</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>Users</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <size>5</size>\n        <unmodifiable>0</unmodifiable>\n        <classType>com.xpn.xwiki.objects.classes.UsersClass</classType>\n      </users>\n    </class>\n    <property>\n      <allow>1</allow>\n    </property>\n    <property>\n      <groups>XWiki.XWikiAllGroup</groups>\n    </property>\n    <property>\n      <levels>view</levels>\n    </property>\n    <property>\n      <users>XWiki.XWikiGuest</users>\n    </property>\n  </object>\n</xwikidoc>\n", "<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n\n<!--\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n-->\n\n<xwikidoc version=\"1.5\" reference=\"Invitation.InvitationConfig\" locale=\"\">\n  <web>Invitation</web>\n  <name>InvitationConfig</name>\n  <language/>\n  <defaultLanguage/>\n  <translation>0</translation>\n  <creator>xwiki:XWiki.Admin</creator>\n  <parent>Invitation.WebHome</parent>\n  <author>xwiki:XWiki.Admin</author>\n  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>\n  <version>1.1</version>\n  <title/>\n  <comment/>\n  <minorEdit>false</minorEdit>\n  <syntaxId>xwiki/2.1</syntaxId>\n  <hidden>true</hidden>\n  <content>{{velocity}}{{info}}$services.localization.render('xe.invitation.internalDocument', ['Invitation.WebHome']){{/info}}{{/velocity}}</content>\n  <attachment>\n    <filename>InvitationSectionIcon.png</filename>\n    <mimetype>image/png</mimetype>\n    <author>xwiki:XWiki.Admin</author>\n    <version>1.1</version>\n    <comment/>\n    <content>iVBORw0KGgoAAAANSUhEUgAAAH0AAABVCAYAAABkf+t+AAAABmJLR0QA/wD/AP+gvaeTAAAeWklEQVR4Xu2daYxkZ3X3//fWrX3tfe/p2RfPjD22GS9gMGM7DDEQvQqLSAIfIgEfk6BE72vyIUIRThBfgrIoJHolhBNLEYki4tiEGBA2wcwYj2cM9ng83T09W69LdS1de9375DlH9UhX99bW1QV0y3Osx3fpulOe/p3zP+c5z1NlQwiBd5fdMQPdtzt2B/oduwP9jkHTNF2d2o5OEzTUOdmvH/odcBodGoATdG2HZgdXO/YC6FlZWRm8cuXKeCgU6vH7/YnV1eURy0KP1+uNyREPBPwfzOcLX5Fv92cALILfLeh3ok6Be7QG70ducOqoDEBAwTt//vykZVn9gUAgUa1W+9fX14ckxDiBM81qIhgMRi+89lrMMIxEuVKJyvvKH7B37xSUjYyMIBQK2t0H0zMznwfw5wCqEj5xt9710Bmc0x6FzuCUOcDZ6FkEjsb8/Pzg7OzVCRl1cQmsZ3l5bQSwenw+X9wwvDEJMyF/Fr148fV4tVKN+/w+n2LT29sD+RxDEgBOHD/ueHOh3r3lfRXM6qZ0mgEA3tqjJjnqdsAbO1Au7aajvgnn+aVLl4ITExMkkb0vvfTDvdFotEdGl4w60SujbljeZ7ksFAo90iIejycmn4lVKhWKRijbt+8AlI2NTUiQYYXCwag5OEuIZqCdj6l7de/rukexshT4HRPpCpwadeBp9Xjb4T3//PM9k5OTlOtGMpnMsISXkJIZT6WSlOsSFHVCWAkJIyKlMi7hRU3TjFerFf/c3DUmcvDgEdhBHpdR5wQkmviSPdDK5bKLRGvo7d9vDR2QfzcgDg1pDgLdFiQWbNZuvjfalkw3KHX0MFQ+8tCefPLJwNmzZxNTU1M9N2/enIpLi0QicQA9m5sZynUxCS9KEGU0hiUgynUxCY9ynZZKpRAOhzE6OqpgYGJ8HEGST5e1hpnP57cKm611hLd+ffv31cF9P53OVJEGmZdGE2YEvQIgL6S1DV3lCxoAEgB6L1/++djq6saQqjBXVpZGJKA+ynPy2CMh9UkJIsmMlkqlSLFY8APA2toqhoeH4fUaULZ37/4GKg0YhkedUh5DMrmuYGAdyabAO7Rmkt3Bc6Lt18vfE5ZXV6FsRZ4PDgxgcnzM5Q+bm1njP/7jO/8KNpCKRdW5rus+OQLgFHfxmT/5k//7/4mr5Jgh8O1GuvHCC88/NzIy+rjP59XBb+LH0aNHbeD2Qkourlx5GydOnER7JiA6YSMExBbIiU7/zNay3H6KsB9aKYEwAcih+VrVDWda1Qd+r+8jAMg5fAB0CT5NwdsOdEtKcenUqVN6fQaChyyA6Nhd2O736q5DKVjbga2gtHy+fWdIJy8jEQ/WwPuwka7K6whSmSri8SigBdpKC+Fo9PRjjz229wc/+MF14liT+s12oCOb3dxsBcOyLDp2H3b3o9sNu+Po7bIz8P00YhEP8gUdhqcEoIhY2ATMNHqiBmCtIJUWSMQNbGRCSMQ0zN0yMTXZD4GwHPbUDF3WUx+W0L8JoKz4toKu8kSqAY0aTB7NnGInwd4ZUt7wfb0wLQ9M0+DhZmHC5xMol02EAwVYpom9YxZ0kcX1G2tIxP2IJvbj5o0ZQITQk9DfC+DZGlu9XehCFhmZRiDtPIXoZt7uvmMIsU3YqqLvmpS7HUG31iCEDnDhy8UqdeR4kFkWF7d1HaJ/IAwq2KvlNEZH+uHzlvGfzyf9NuC6VmvhNYHOcM1nn302Ww/kqxdex/nXXsf07CxM08QTH3gf7rnnHhfsYj6L5fnptiFuwbakBK2tZQS3NLGNZ7ObeVx641XsP7AP5YqmKnOUiiU6ct3U19+LkeFBvnaYyyH8vjI8KGp1ptWipbxvbKwVGsn07NycI5rcGIqFTdycfh317Y4VJdSZa7fg9XkxNjWIX7z5jpTqJfj9Pjn8XLx9+lP/BwDP0fHmm1cQk/f275tq6n6Xr9xC3+C+9TqNMasl9GKxsl4PZm9PovMgZbtja+spzC+uIplK4/rNRZzWj6Ovb4rbv9FIGMouXvwFhmWEj4wM4dSpE1hcXOZ7x48fqRv1Ho+J0eEE5uZeCzmbaErim0KXveosum53bGl5DbPX53nmk8nk8NADJ3DoyBSGR46hX8q4so1UBguLK1hcWsXS0grD9xheGD4fXv3ZRbz34dNwmq5ZOPezWcguqHPmpbVVvWcyybVcLset0F+m6R4vQtE+8kRYZhWVcmErfX7YrVzKQ1gmdoKVyhVcfueahLwOMtnkwtTkCIrFMkf65MSwVM04xoYHcN+9J1GqxGA3Xy2S/YEAJsaHsbq6hmvXruLw4QOYHB9hud9/YC87UTgUxOBAL3SdUm0ZlQoKduA4JsfltqDnb9WDPjYygm6a1xfE4PhRaDoDhAYNqDmAAtsudKVe9Cydq+ftaUo4Crx8dh0rt98Gv7PWPeD/9f1XUK5UcOzwPgk3hs1cgaVcr/09o+EQhgf7sGf/KDTdLdXhcJCdIrmRxvzCCg4d2CPPs1hbW5cOM4IbN+e5DgiHQ1Ts1aCbWFiqAPB2tuDyzDPPZL/2ta9VnT8PBoPdrrEZirBU8uEjLyXaKagzda8RH8HqYbindQTe7hjKKXSDpVbTdOUk3QDOkX328Yfhl0eyVDorwedloXUNJ+86iEQ8ikgkBK/HUNM1pzHI7GZOQq0y+HvvOYaZmTnMXrvJUr8snejY0QMYHR2qObjA1J5BXJ1ZtzpdZROWZWUA9G6p6UIA22auYAj+5Wuax5GFFCQ7Po3/EXDe50u+r4AnkxsyWnpANp19EROh0/DrUQiuWZJclJqmRaB4QcijeyT0bQPnyH7koVN8/eOfXuQoX1lNwhKWVMpBeA0D/X0JkEUSIZhmfegej0e+fkgqxDzB59QQiUbx+sW3ZNE3ib7eOHrkewUDfpBtZlMIhgZQrS4XO4I+NIQiFXNyhazX0RChhRZaqmwMvG3eDImPuu7l6HbaVhlo7CgWpq9O4+tf/2v85oc/hCef/E28nvwmAkYP+rST8v7fsEN89atfgT8UR6FYog4GPD4dQrhlflHmzaUVzs0kySS7FMGu+fYPX/6ZAo71jTQ7QCQcwrEj+yjyKcoJNvXUa1B16OzAGpSRc5BRng4EfHaZJ/iqccOgD91/Uub5G+y8gEAqnYeAv/NNFMvLKBUKhaw7ujmvU3OmQ9huPbbDrVarkO8LZc7UYhhGbW0gC2XRaNSR63XIHTQYHx/DC9/9Hvr6BxAfm0TA24N//PtvSqlcZEcwvH4aHO2WYOezA8dbEtKlX7wDMgJNRoUZASCYVIyRbUrgM3O3cc+JQzh14jA5AAM/sG8CD9x3nKSdUggXXb2JmIpyFEplxBIR5IuGff6OYqmE1bUkhof6ZTQnaDB0ZVN7xmAYOsrlKimAPFYQDGqIx+PYLEZgSYPdLrcFXQGoZAl4a247zniv2h/+4R/g6af/UtYn/8Tn3/v2OUxPT+PBBx8g6K2aDQz8tIR2UMJzGEfyzdtLIKPc/PGPPYaoPEpJp4hXz5EDSIm/RJU8q8NPzr+BM+9/D0Yk0P6+OKoVOx9wkWYzVqHrN+Zht+GhAVybu4FiqcLF3fTsDRw5OIw3fj6N/qFTtNOn0HFOz+Xym/hVmAZoLO2gSObIbWH0mrbAf+ELn8df/dXXeZAdPHgQn/3sZ9CO/e4nPqxyNUdpMpUBGUUrRSFFtSMNEHCScwZul/iPfOgRlv7bCyt0XYv0EgxfAI0QZbKbVMCxSui6TpLPkT2/uMybTQ4dmIIwqzyN8/tKOHHibiysiI7lvQZAT6OOjY0Ok7x3kXl37V9mcvijn6QwHvbg384O48yZD8p9dy+A7OMf/20EL/8LEi/+EarRcaz+/qtoZucvvCmjdE6CChIsAsdS/j/nLtklXkZchhxDRbgCzg6wd3IUZFSx53IFVgSyPinzlqXDZq7mDBkVmRPjI/DJ4+zcLRQKJWQzGddK3Es/voSDh0+xvHcKnXJFpp6YBwOBNpYyxRYaLDSgthBRN9Ae0Ty2Yp86EOZBdvXqNAGneoBqBZqKstQX/uBTamEI9Y0jlyX87GMPkRw3k3gu8E7fexcDVcCVA9yaX8arr7+FTDaHfL6A2eu3cf+pY4j3R+tO1+YXlrkOIAv4fZTDOeIHBnq5mr/4xmWett28dRsnjx9V0zUZ6cdQLIPkvaPqnVfannvuO2kXzPaXPDvprNFiA2+G7Ibdkr+Ub3zjHwg4g759+zbld5b6L33pKbUwhAbGoD/xW4+r6pwqeJprK4mn4s4l8TduLbIKKODT127VVCFIzkOBRH8Oq8TY2IBzukZKQMCVMlAaoakbyToVdFzNQ1hcyPb29SAY4gDkv9tGKiGv/duT92QylXOvS/OUrX50d1i8a7qOLhupBcHl6H7qqf+Hu/7xH7D3k5/EtCzizp07j29965mWuV3l81elxEtJr4GOUeFGEU7RS+1SCaaPpmQy8pbYKd734D3YMzFCwPnZM4/cTw0WpRZ87tE13J5fwZ59g7AZTdNo0UUe/dycUcUcme7RWSk8Hg2mZTGH/r4+ANSUGcFykl8HU1qH0NlS7ujlKVvHK23CNjXSdQ+3YQ1vEJboNvQkA//MZ34PExPjMN56C3omo0DjjTd+jjaMqm7K180knqZx1HLl/D05PkxVOkU8AeeuXF9PnKKXcj5H7vjoIOaXV/HgB+6m6ZqzIeOs4HlOPjU5RkdabJEKtoCjh/cjkYjxEqzHU5WSfwPx2GFuyRalNWphtISeltZlFrAsAW8gBiPYC+g+hBL9teZEd6kfOnQQf/d3fwNluc99DuYET70YfJvGvXMl4SqHK4vU+ud3SdiAe36vgCupvrK8TnN0imJqv0qAl3H8xHvRhpGs0yIL7V3E4tIypqYmcPjQfrW6Bk2rYGJyArONC2zRVqSnUqksumhCCJ6i7DnyMN6+8g6q1QIMfwkJ7n1r+GVa6exZdGAUtZTPKS9TLq515GIk5xS5DFdJPJlyCgXcbgf2jePK1es4fuwA7r3vKALRCEfu8buOcJetcfBl8M7VWQSDAbz51hW8/30P8uvj8VitcheomNxu3ra80wrb/OrqKgYGBuzoMDo81LJ6hxB1oQfDCV4sOHr0CKanZ6hapy4cbwrYoUbACbJqwDSTeKrgOZ87TfUgpiZHecdMUoI8+5FH8J77+rgSLxYF74wJBQlmVILOIl8oIFM7Xr9+C6Zl4v777qbfFc/N7dM1XSupWCZ5L3UMfXl5edVdnXMh13LHqKhf3NPaeS13GThy5AgWFxdpiuGEzr19n8+nfllqOsfVvc3IYeh5+2vpHnk7vdZ5zj/folEHjSO+gVFE82jDuAgcBrC0sY4Xnn8JH/no+yGsFB5+8CguvTENyxfBwvwCKhWaMZRx4+YCrk7fQCwWxd0njyEaidDOGcfsR0jHc6TITqE/99xzmS9+8Ys2oJ1P1dRqWSjWr6ZpPCYnJxmaEMIu8Qxqc3OTQZER2EQigYWFBTqnaRjBtBdA6jlyADqqrhyfq159f38/7KamtBDNJb6LxuCnAj5eX//Tp/4WTzx6Gv/8zHfxve//FKYwuVbwGDrOfPA0An4Ljz16hIpeGd3D6O3tgxAlnuoJaPJowPCYyGTWiIEKhM7lXX47QqVUKuaEQNi9+BGQUHJb671rHvj9YQiHM1AUEkjVbmzSZmWI3bRquWRbpFVnGrpubqmnBRnaTcOpQVQt/MajD6jpGaeT1YUkV/2VfIUXhZbmV3mR5tChSW7Dvuc9J3kzxfqagYcePqP+82nWUtrWlI2WV8fGxl3QR4dHcHVmBu2asATC8QHJ3QvUotrRlKFopHtKqpWkUxQrWVYSraSerpWsOyVfOYj9OZfERxOD8toLIaw2p57dhz8+NoQtWQWwKhauzOoAJuDRc1i6eZO/BEFp7nagCymNaQDDtltqtCjkXHcRCMXs25cUeHVOS4MEk0cmk1GyruSbBku1knDpkASWnqEj1QF2yWcnUrJvf84u8RY8GN17N5KLV2pKo6n0g51uE5NTNQwCI2N8qlJhpVPoKkdm3UCbwG7gEsQ2khgk4E7YNOxr5gSKQG61577l1yunKlQ8SAwdQnZ1BpWqCa/h2RXQFXBhu64VweXtQNfy+dxmPaA9iYQNtmiZ2znSgzEF3RVNCr6SerljhyKZI5PzvFuim8l2u6/nI20AzVoWgqERlNI3OdrVQtBOZq9wO6hvX951XU8z10YfehBoq3IPRXqhGz7lHy7gZA4HYBleWloiJ6DuoJJ6MnYGda3O1bGO1f1ZX18ftS0JPKeWkZFhZNf8SC7PQtds4Hc2eXsZquqgaofQGZb54ovfy4qOPgcm7NC5x46ttVtJ5vnrtVZWVhCLxRhct0ypx/j4OKam9hBczvmLcxnegGj5BCuBQVK/m+RdgKa625J3io5MXaCixac8BdQ5Q4/2jtJxq21bBj80NETzcyrMODq3ZjyFoSKNGkBU8CklIcjsWJYlwNW7VUV6Y40+PMiv9/tBq2Ekd/TMjhV4B/XtyjtXwDkHUB779u5p+zPYZH5bPneYuu+6Vue6zhsdsbGxweAjkQhBaOSk1IZUUzqCzNJNpqp/9YUKTisWcijIYVZN3lxpGPRa7y5QdmFHTjXKdqt3kWzdkWsygRMEPA6vLwDL/akTBa/utdN6e3sJHOV5knvVzLH/eUoZKKoVXDrWBa2eUe+bz2VQKRehS+DqmR1tQtSr42i6ux155/yQbVWsiSY5nfO5PwQB3X6vEdxmKYCgEWwFnsDSNI0Whij/EjgFmY4KrBrNrhl6NrUGNg27wkTjE2wz0svJXD7H35pot554vGXYK4iRxBAdG32+zCntrWcCoRB9MpOiXN1reyhzXVsWNtaXbZGvZhG7hbq6ZHmvbgt6T0//Lep0MXRFE0LN0xvmdWED6A+xFLuAK1My3cQcwOoqhv3+lodlVni/nH3KqMuxs0PfJe88ksnk9uR9fn4+44pg0e5XYQKGLwifL0T5vB5wO7RGsJVsq0FSrpyIzslhFPA2wbsdqJDLolzME3G8MpvDZF8ARyYCBH+nB3r3q/eXX3459Tu/82kH87YKOZ4K+UkhNA/gkPc6UWuXa+Ug9pxLcLkiV1M5tRWMzglO47zdGn4uu4FKpcTvsZGrYlPzIm9m8dAhH4J+fdfIu2lZ5W1DP3fuuWRq4y8qfX39XifpfdzUcEe9fbIeCieIcu0aqshSEF3RbIetZD8QCKhNFgqi6tNToUk/I/BOJ2obPhdxmaSSdXbg3qFx3FiZx8BSDkfHozA8+u6Qd2D70FcfRaFQLGYA9LVuzrhlPhTtbVShK8g01LU6EkSCqnrv9RRCFXVUuJDMK/CNQPOadHozj1Q2J8cm8sUiMrkicoUibt2YRSZTQrlqIVvWcDiegNfrw4Xbc/AZORwei757qnd8GzD/2MwydIba3rcbE1eP4UMgFCcAzQoze74m+aZpGUG0w1bDCZJeT88ReIr45vkdAobX4E2FQjfgD1UQCFeRL5Vhiir6TQFL82G/ZsCCzk0gY89B/HBmGpqexf7BCO0539nybpql7UPnNmZ+ExCuldVEPO5grkzNz8PQDa+E4gYuHHJPEk6/ZDXftg0C6YRun4+TItDCCXXj1GpafeiWTdaVh3LPvQrLNKHBJeGcWkbHJvCTK29jOB5ALOTdwfIuaFS7AZ2/kaJedPck4oBlNoh6C/5g1P4VZvZcrfI1ASPgrpzMubV+xV/vWm2mIPj2ws4B3lLXDFzNx81qGZawAE13Ts7Imfjrxw8OR+Dz6jtY3vmqG/LOEKyXXvpRRtigOkO+frhrqinjhE1ACJLK1+pndsDKKRx5n61RoUZpgZZgXeDVqJgmcvkCUtk8kpkscoUSMvkilpYXsbq+gaopUKqSxHtw14m7ecn19q1bmAjmcPpgL3yGvmOXVdVZtVvyXqmU04qok7nWoIDTdJ0WWegXp2ATZBXVCoiCWg9yvV02TVOE2j2TSqXsU0Bl8Ho8GEhEeQBDINM14NL5/0YqbMJjGLwh8d8vrHONsLa8gH2RAh48tAOBswkHe3buSjeg067XXL2cPjI0iKWlhXrFPEt7qZqFWa6qSlwBomLDnqsVHDtwN2y3NZqXk4pwxHNh12JZtFrlThw5KW+T8nkNdoSV+TnsS1g4faDHDvzdIO8q7+lJN1jBn8mqd58rd48Bn9cHny9A0U6Sa4epotoZ0duCrs4NwyDwtI5O4Js6TiGX4U6cx6PTcww9HvZhSAK/d18cAZ9n9+yaEYBVNYvdgE6dr2yjnC7q5nSBYj6DubfPQfMEea4eiiTg49W2plHdGXR3xFMqofdQFX098Ox4+c00R7vfT/UFOyPOnBhENOh1RvjOlndVCwnL7AZ0ym+ZejndH/Ar4E7m3NJMJ5fom5fkuQnD50cgGEa8Z0COQQTCcfl8CLzObqEe6Ib751pD5xRCsOlIStMQfDa9ptQGFj0LoCfstdcDu2UTRVflnYqv1XQ6hXgsrpizDQ8O0qdgXBIv7F/zp+tymKiWi9isFJFNr+P29Sv8IUafP4hYvB+xnn5EYn0IhmPsBEDDTZNbiXi1s5ZlXjmB3Sgo0qm12jN0bdXm8uChaTudunA5gGlZ3ZH3cDi8TDlZNNoo4cCtOOkenXIkyyYYBJS009SC8inL69L8LHTdw0oQCselEpAjDPKHI7z+IKFvCryJcZTz983k82pPnHIk3iVTKuZqdAWE7d+7xxR7odJmV5oztEsl5YDtLh8dp7qmw+Cq3Q+OHluRZ5kWKtUqD9OsRReEBLDJI7k2T2C4CPQFQuQAnBYCIU4J/M3R7ZoCHwgG+Ks77LOGQmET5VIRWu2/16Pr9mp/d8q76JK8X716NfPEE4/bcro6ZYlv1JsBF0aaAcEFsN0bBW8t9lYNjnjLcq1xc4fMrJaQy9RSwtxlGIaPnIAcgEco2iNhRqnH3yri+T3CtDiTz6upHApSZSyzCo5+XatBV7XFrghxV7SbZqUb8s4Njxn6bNnw0LDLoQL+utM2HhwxGuwZujadE+QQLLVetXHR8bFnSgGmScOkY805KhJUCvnsBhZuXuVpYSAU4ZQQS/QjmpBqEIzAFwg7nUAValSf1D4UqSO9saqiGrrG9QdH/C4zx7Yv0Z3q/ctf/jI+9tGPZgUQdbb5RZ2c3jgtqnyv0SD4cujE2Wb2LpuAyfBNhm5W+RzsEKwOJvLZFHJyrC7doOil4pAdIU4poXeIlcAfjADQ1JItq4xlmrRxwtY3UFG+O3O5OrO6VL0zJZl/MyDoiqgTVHupxQ1fnTvUQNNIDQCP0CEMD8O3OPIJuFMBLH6GHiyX8jzSyRVo196C4aXWbwSJvkHEEgO8Xy8a62FZr5RVPicH1G1Fno38rpqnc/1S6BZ0q1wubjZYaHHCbo28bYfgY80BdAgPSzRJGIFm+NWqWYt+4foaFIsdpYJcNolsZh1CXOapYjBES7hertw5ymvdOMrpuyCfN19x7FZzRkh75ZVX0s3gisYfZ+6aAzAQIQCd2Hq44re8tg80OPKcrS4g51AKwelA5UGuLXSeaaiGzC4GzjfdLnsMwOWtQVeykRVO4MJxbTsEIwkcOHnGTV/Uv3D/Oa0eqUEW6mh72r52z9BpekjgK6iUK+CUIIcAKYiHGziRcJhW2Mix2lrIEO6U5tzQ0Gb3zNVgaQ23QeXOnCrdk3daMMnafqWtJJ5klKppx48bQXUTFi7yDV/LJ+6Mo2S+pgQc5Vbto8kMnp1C1/Takq8fOuV0aHWXLdu/J5o4gBu++54bpBu0G7Yyk+Udgsa2oRcK+ayTuWgbFFmDyGjTCdyvdQN3nWiAJmpLtxpV5xYXbKblrTmCUIssCnhrsHzSwb1OYLsjvV2nsGzgRcfQNU1P1Z+iua/dbESbsMlEB7Cb32OU5AAEnqdnHopym3Oo+BatIbKJjmG7obUG2T5sVuQCHQBUAXDU4zJEB9B5eTUj7I0XcGFFOcT2/eyiycyiMzlXKFzWCESbjuDC0OI17Ud96y1NaDfC4bDmwNWKqEa4AJQYfhwm0hBkW4Z+4cKF55PJtZRpmsHe3l6PaQpNFne6BC9W11YqmcymN5fL+gqFkkd2vOTPTfrRr/r/2xLFzjNq+/plD8CLX6rpIBYzM9feBJAFUABQRprgdxjpTz/99E8lxfO2Z3QAHtt5oDZ86t6vtMtxx0RtmAybox15AJVOoSsTNZAm2Pi8WgOcq72Zh8avFfgd8FWGPYUSrsPaFnQhzbbsaConsI2yI8Kd4LWGzrRbbQC/Xlutu3/F4nEdzIisY+gKvIIkHcCqA1M0gas5AO9+W92R0Q4X6M6hux1Ane6uyL1jBt51dsf+F6sNFKNoUUSaAAAAAElFTkSuQmCC</content>\n    <filesize>7845</filesize>\n  </attachment>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>0</number>\n    <className>Invitation.WebHome</className>\n    <guid>922f917b-ccec-41a4-a288-0eb6bcd05e06</guid>\n    <class>\n      <name>Invitation.WebHome</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <allowUsersOfOtherWikis>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>allowUsersOfOtherWikis</name>\n        <number>4</number>\n        <prettyName>Let users of other wikis send</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </allowUsersOfOtherWikis>\n      <commonPage>\n        <disabled>0</disabled>\n        <name>commonPage</name>\n        <number>18</number>\n        <picker>0</picker>\n        <prettyName>common</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </commonPage>\n      <emailClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailClass</name>\n        <number>5</number>\n        <picker>1</picker>\n        <prettyName>Email message XClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailClass>\n      <emailContainer>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <hint/>\n        <idField/>\n        <multiSelect>0</multiSelect>\n        <name>emailContainer</name>\n        <number>9</number>\n        <picker>1</picker>\n        <prettyName>Document containing email XObjects</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </emailContainer>\n      <emailRegex>\n        <disabled>0</disabled>\n        <name>emailRegex</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>Regular expression for validating email addresses</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </emailRegex>\n      <from_address>\n        <disabled>0</disabled>\n        <name>from_address</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>Email \"from\" address</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </from_address>\n      <guestsActionsPage>\n        <disabled>0</disabled>\n        <name>guestsActionsPage</name>\n        <number>14</number>\n        <picker>0</picker>\n        <prettyName>guestsActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </guestsActionsPage>\n      <javamail_extra_props>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>javamail_extra_props</name>\n        <number>15</number>\n        <picker>0</picker>\n        <prettyName>Javamail extra properties</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </javamail_extra_props>\n      <mainPage>\n        <disabled>0</disabled>\n        <name>mainPage</name>\n        <number>19</number>\n        <picker>0</picker>\n        <prettyName>mainPage</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </mainPage>\n      <membersActionsPage>\n        <disabled>0</disabled>\n        <name>membersActionsPage</name>\n        <number>16</number>\n        <picker>0</picker>\n        <prettyName>membersActions</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersActionsPage>\n      <membersCommonPage>\n        <disabled>0</disabled>\n        <name>membersCommonPage</name>\n        <number>17</number>\n        <picker>0</picker>\n        <prettyName>membersCommon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </membersCommonPage>\n      <messageBodyTemplate>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplate</name>\n        <number>3</number>\n        <picker>0</picker>\n        <prettyName>Email message body HTML template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplate>\n      <messageBodyTemplatePlain>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <name>messageBodyTemplatePlain</name>\n        <number>20</number>\n        <picker>0</picker>\n        <prettyName>Message body plain text template</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </messageBodyTemplatePlain>\n      <smtp_port>\n        <disabled>0</disabled>\n        <name>smtp_port</name>\n        <number>13</number>\n        <picker>0</picker>\n        <prettyName>Smtp port</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_port>\n      <smtp_server>\n        <disabled>0</disabled>\n        <name>smtp_server</name>\n        <number>12</number>\n        <picker>0</picker>\n        <prettyName>Smtp server host name</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server>\n      <smtp_server_password>\n        <disabled>0</disabled>\n        <name>smtp_server_password</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>Smtp password</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_password>\n      <smtp_server_username>\n        <disabled>0</disabled>\n        <name>smtp_server_username</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>Smtp username</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </smtp_server_username>\n      <subjectLineTemplate>\n        <disabled>0</disabled>\n        <name>subjectLineTemplate</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>Email subject line template</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </subjectLineTemplate>\n      <usersMayPersonalizeMessage>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMayPersonalizeMessage</name>\n        <number>8</number>\n        <prettyName>Let users personalize messages</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMayPersonalizeMessage>\n      <usersMaySendToMultiple>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayFormType>checkbox</displayFormType>\n        <displayType/>\n        <name>usersMaySendToMultiple</name>\n        <number>6</number>\n        <prettyName>Let users send to multiple addresses</prettyName>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>\n      </usersMaySendToMultiple>\n    </class>\n    <property>\n      <allowUsersOfOtherWikis>0</allowUsersOfOtherWikis>\n    </property>\n    <property>\n      <commonPage>Invitation.InvitationCommon</commonPage>\n    </property>\n    <property>\n      <emailClass>Invitation.InvitationMailClass</emailClass>\n    </property>\n    <property>\n      <emailContainer>Invitation.InvitationMessages</emailContainer>\n    </property>\n    <property>\n      <emailRegex>/^([^@\\s]+)@((?:[-a-zA-Z0-9]+\\.)+[a-zA-Z]{2,})$/</emailRegex>\n    </property>\n    <property>\n      <from_address>no-reply@localhost.localdomain</from_address>\n    </property>\n    <property>\n      <guestsActionsPage>Invitation.InvitationGuestActions</guestsActionsPage>\n    </property>\n    <property>\n      <javamail_extra_props/>\n    </property>\n    <property>\n      <mainPage>Invitation.WebHome</mainPage>\n    </property>\n    <property>\n      <membersActionsPage>Invitation.InvitationMemberActions</membersActionsPage>\n    </property>\n    <property>\n      <membersCommonPage>Invitation.InvitationMembersCommon</membersCommonPage>\n    </property>\n    <property>\n      <messageBodyTemplate>{{velocity}}\n#set($discard = \"#template('colorThemeInit.vm')\")\n#if(\"$!theme\" == \"\")\n #set($theme = {\"linkColor\":\"#4791BC\"})\n#end\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))\n#set($wikiName = $xwiki.getRequestURL().replaceAll(\"http://([^/:]*).*$\", \"$1\"))\n#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get(\"guestsActionsPage\")).getExternalURL())\n#set($linkStyle = \"color:$theme.get('linkColor');text-decoration:none;\")\n#set($bigText = \"font-size:130%;\")\n#set($joinLink = \"float:left;\")\n#set($declineLink = \"color:#f88;float:right;text-decoration:none;\")\n\n$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])\n\n{{html clean=false}}\n#if(\"$!messageBody\" != \"\")\n  &lt;p style=\"$bigText\"&gt;\n  $!escapetool.xml($!messageBody)\n  &lt;/p&gt;\n#end\n&lt;p style=\"margin-top:30px\"&gt;\n&lt;a href=\"${guestActionsURL}?doAction_accept=y&amp;amp;messageID=$messageID\" style=\"$bigText$joinLink$linkStyle\"&gt;\n$services.localization.render('xe.invitation.emailContent.joinLink')\n&lt;/a&gt;\n&lt;a href=\"${guestActionsURL}?doAction_decline=y&amp;amp;messageID=$messageID\" style=\"$bigText$declineLink\"&gt;\n $services.localization.render('xe.invitation.emailContent.declineLink')\n&lt;/a&gt;&lt;/p&gt;\n&lt;hr style=\"clear:both\" /&gt;\n$services.localization.render('xe.invitation.emailContent.reportMessage', [\"&lt;a href=$escapetool.getQ()${guestActionsURL}?doAction_report=y&amp;amp;messageID=$messageID$escapetool.getQ() style=$escapetool.getQ()$linkStyle$escapetool.getQ()&gt;\", \"&lt;/a&gt;\"])\n{{/html}}\n{{/velocity}}</messageBodyTemplate>\n    </property>\n    <property>\n      <messageBodyTemplatePlain>{{velocity}}\n#set($userName = $xwiki.getUserName($xcontext.getUser(), false))#set($wikiName = $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"))#set($guestActionsURL = $xwiki.getDocumentAsAuthor($config.get('guestsActionsPage')).getExternalURL())$services.localization.render('xe.invitation.emailContent.userHasInvitedYouToJoinWiki', [$userName, $wikiName])#if(\"$!messageBody\" != '')  $messageBody#end$services.localization.render('xe.invitation.emailContent.joinLink')${guestActionsURL}?doAction_accept=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.declineLink')${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID$services.localization.render('xe.invitation.emailContent.reportMessage', ['', \"$util.getNewline()${guestActionsURL}?doAction_decline=y&amp;messageID=$messageID\"]){{/velocity}}</messageBodyTemplatePlain>\n    </property>\n    <property>\n      <smtp_port>25</smtp_port>\n    </property>\n    <property>\n      <smtp_server>localhost</smtp_server>\n    </property>\n    <property>\n      <smtp_server_password/>\n    </property>\n    <property>\n      <smtp_server_username/>\n    </property>\n    <property>\n      <subjectLineTemplate>{{velocity wiki='false'}}$services.localization.render('xe.invitation.emailContent.subjectLine', [$xcontext.getUser().replaceAll(\"^[^\\.]*.\", \"\"), $xwiki.getRequestURL().replaceAll(\"https?://([^/:]*).*$\", \"$1\"), $!subjectLine]){{/velocity}}</subjectLineTemplate>\n    </property>\n    <property>\n      <usersMayPersonalizeMessage>1</usersMayPersonalizeMessage>\n    </property>\n    <property>\n      <usersMaySendToMultiple>0</usersMaySendToMultiple>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>0</number>\n    <className>XWiki.ConfigurableClass</className>\n    <guid>ce538a91-32b8-4623-9367-090c256e9c2d</guid>\n    <class>\n      <name>XWiki.ConfigurableClass</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <categoryIcon>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>categoryIcon</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>categoryIcon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </categoryIcon>\n      <codeToExecute>\n        <contenttype>VelocityWiki</contenttype>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <hint/>\n        <name>codeToExecute</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>codeToExecute</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </codeToExecute>\n      <configurationClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <idField/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>configurationClass</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>configurationClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </configurationClass>\n      <displayBeforeCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayBeforeCategory</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>displayBeforeCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayBeforeCategory>\n      <displayInCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInCategory</name>\n        <number>9</number>\n        <picker>0</picker>\n        <prettyName>displayInCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInCategory>\n      <displayInSection>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInSection</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>displayInSection</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInSection>\n      <heading>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>heading</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>heading</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </heading>\n      <iconAttachment>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>iconAttachment</name>\n        <number>8</number>\n        <picker>0</picker>\n        <prettyName>iconAttachment</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </iconAttachment>\n      <linkPrefix>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>linkPrefix</name>\n        <number>5</number>\n        <picker>0</picker>\n        <prettyName>linkPrefix</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </linkPrefix>\n      <propertiesToShow>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>1</multiSelect>\n        <name>propertiesToShow</name>\n        <number>6</number>\n        <picker>0</picker>\n        <prettyName>propertiesToShow</prettyName>\n        <relationalStorage>1</relationalStorage>\n        <separator> </separator>\n        <separators> ,|</separators>\n        <size>20</size>\n        <sort>none</sort>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values/>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </propertiesToShow>\n      <scope>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>scope</name>\n        <number>12</number>\n        <picker>1</picker>\n        <prettyName>scope</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <sort/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values>WIKI|SPACE|ALL_SPACES|WIKI+ALL_SPACES</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </scope>\n      <sectionOrder>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>sectionOrder</name>\n        <number>12</number>\n        <numberType>integer</numberType>\n        <prettyName>sectionOrder</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>\n      </sectionOrder>\n    </class>\n    <property>\n      <categoryIcon/>\n    </property>\n    <property>\n      <codeToExecute/>\n    </property>\n    <property>\n      <configurationClass>Invitation.WebHome</configurationClass>\n    </property>\n    <property>\n      <displayBeforeCategory/>\n    </property>\n    <property>\n      <displayInCategory>usersgroups</displayInCategory>\n    </property>\n    <property>\n      <displayInSection>Invitation</displayInSection>\n    </property>\n    <property>\n      <heading/>\n    </property>\n    <property>\n      <iconAttachment>InvitationSectionIcon.png</iconAttachment>\n    </property>\n    <property>\n      <linkPrefix/>\n    </property>\n    <property>\n      <propertiesToShow>\n        <value>subjectLineTemplate</value>\n        <value>messageBodyTemplate</value>\n        <value>emailRegex</value>\n        <value>from_address</value>\n        <value>allowUsersOfOtherWikis</value>\n        <value>usersMayPersonalizeMessage</value>\n        <value>usersMaySendToMultiple</value>\n        <value>emailClass</value>\n        <value>emailContainer</value>\n      </propertiesToShow>\n    </property>\n    <property>\n      <scope>WIKI</scope>\n    </property>\n    <property>\n      <sectionOrder>600</sectionOrder>\n    </property>\n  </object>\n  <object>\n    <name>Invitation.InvitationConfig</name>\n    <number>1</number>\n    <className>XWiki.ConfigurableClass</className>\n    <guid>10608785-fe04-4114-a284-dfabc1ebfdee</guid>\n    <class>\n      <name>XWiki.ConfigurableClass</name>\n      <customClass/>\n      <customMapping/>\n      <defaultViewSheet/>\n      <defaultEditSheet/>\n      <defaultWeb/>\n      <nameField/>\n      <validationScript/>\n      <categoryIcon>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>categoryIcon</name>\n        <number>11</number>\n        <picker>0</picker>\n        <prettyName>categoryIcon</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </categoryIcon>\n      <codeToExecute>\n        <contenttype>VelocityWiki</contenttype>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <editor>---</editor>\n        <hint/>\n        <name>codeToExecute</name>\n        <number>7</number>\n        <picker>0</picker>\n        <prettyName>codeToExecute</prettyName>\n        <rows>5</rows>\n        <size>40</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>\n      </codeToExecute>\n      <configurationClass>\n        <cache>0</cache>\n        <classname/>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <idField/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>configurationClass</name>\n        <number>3</number>\n        <picker>1</picker>\n        <prettyName>configurationClass</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators/>\n        <size>30</size>\n        <sort>none</sort>\n        <sql/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <valueField/>\n        <classType>com.xpn.xwiki.objects.classes.PageClass</classType>\n      </configurationClass>\n      <displayBeforeCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayBeforeCategory</name>\n        <number>10</number>\n        <picker>0</picker>\n        <prettyName>displayBeforeCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayBeforeCategory>\n      <displayInCategory>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInCategory</name>\n        <number>9</number>\n        <picker>0</picker>\n        <prettyName>displayInCategory</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInCategory>\n      <displayInSection>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>displayInSection</name>\n        <number>1</number>\n        <picker>0</picker>\n        <prettyName>displayInSection</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </displayInSection>\n      <heading>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>heading</name>\n        <number>2</number>\n        <picker>0</picker>\n        <prettyName>heading</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </heading>\n      <iconAttachment>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>iconAttachment</name>\n        <number>8</number>\n        <picker>0</picker>\n        <prettyName>iconAttachment</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </iconAttachment>\n      <linkPrefix>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>linkPrefix</name>\n        <number>5</number>\n        <picker>0</picker>\n        <prettyName>linkPrefix</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>\n      </linkPrefix>\n      <propertiesToShow>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>input</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>1</multiSelect>\n        <name>propertiesToShow</name>\n        <number>6</number>\n        <picker>0</picker>\n        <prettyName>propertiesToShow</prettyName>\n        <relationalStorage>1</relationalStorage>\n        <separator> </separator>\n        <separators> ,|</separators>\n        <size>20</size>\n        <sort>none</sort>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values/>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </propertiesToShow>\n      <scope>\n        <cache>0</cache>\n        <customDisplay/>\n        <defaultValue/>\n        <disabled>0</disabled>\n        <displayType>select</displayType>\n        <freeText/>\n        <hint/>\n        <largeStorage>0</largeStorage>\n        <multiSelect>0</multiSelect>\n        <name>scope</name>\n        <number>12</number>\n        <picker>1</picker>\n        <prettyName>scope</prettyName>\n        <relationalStorage>0</relationalStorage>\n        <separator> </separator>\n        <separators>|, </separators>\n        <size>1</size>\n        <sort/>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <values>WIKI|SPACE|ALL_SPACES|WIKI+ALL_SPACES</values>\n        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>\n      </scope>\n      <sectionOrder>\n        <customDisplay/>\n        <disabled>0</disabled>\n        <hint/>\n        <name>sectionOrder</name>\n        <number>12</number>\n        <numberType>integer</numberType>\n        <prettyName>sectionOrder</prettyName>\n        <size>30</size>\n        <unmodifiable>0</unmodifiable>\n        <validationMessage/>\n        <validationRegExp/>\n        <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>\n      </sectionOrder>\n    </class>\n    <property>\n      <categoryIcon/>\n    </property>\n    <property>\n      <codeToExecute/>\n    </property>\n    <property>\n      <configurationClass>Invitation.WebHome</configurationClass>\n    </property>\n    <property>\n      <displayBeforeCategory/>\n    </property>\n    <property>\n      <displayInCategory/>\n    </property>\n    <property>\n      <displayInSection>Invitation</displayInSection>\n    </property>\n    <property>\n      <heading>$services.localization.render('xe.invitation.configuration.smtpHeading')</heading>\n    </property>\n    <property>\n      <iconAttachment/>\n    </property>\n    <property>\n      <linkPrefix/>\n    </property>\n    <property>\n      <propertiesToShow>\n        <value>smtp_server_password</value>\n        <value>smtp_server_username</value>\n        <value>smtp_port</value>\n        <value>smtp_server</value>\n        <value>javamail_extra_props</value>\n      </propertiesToShow>\n    </property>\n    <property>\n      <scope>WIKI</scope>\n    </property>\n    <property>\n      <sectionOrder/>\n    </property>\n  </object>\n</xwikidoc>\n", "/*\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\npackage org.xwiki.invitation;\n\nimport java.util.stream.IntStream;\n\nimport javax.script.ScriptContext;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.xwiki.model.reference.DocumentReference;\nimport org.xwiki.rendering.RenderingScriptServiceComponentList;\nimport org.xwiki.rendering.internal.configuration.DefaultRenderingConfigurationComponentList;\nimport org.xwiki.rendering.internal.macro.message.ErrorMessageMacro;\nimport org.xwiki.rendering.internal.macro.message.InfoMessageMacro;\nimport org.xwiki.script.ScriptContextManager;\nimport org.xwiki.security.authorization.AuthorizationManager;\nimport org.xwiki.test.annotation.ComponentList;\nimport org.xwiki.test.page.HTML50ComponentList;\nimport org.xwiki.test.page.PageTest;\nimport org.xwiki.test.page.TestNoScriptMacro;\nimport org.xwiki.test.page.XWikiSyntax21ComponentList;\nimport org.xwiki.user.UserReferenceComponentList;\n\nimport com.xpn.xwiki.api.Object;\nimport com.xpn.xwiki.doc.XWikiDocument;\nimport com.xpn.xwiki.objects.BaseObject;\n\nimport static javax.script.ScriptContext.GLOBAL_SCOPE;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\nimport static org.xwiki.rendering.syntax.Syntax.PLAIN_1_0;\nimport static org.xwiki.rendering.syntax.Syntax.XWIKI_2_0;\nimport static org.xwiki.rendering.syntax.Syntax.XWIKI_2_1;\n\n/**\n * Test of {@code Invitation.InvitationCommon}.\n *\n * @version $Id$\n * @since 15.0RC1\n * @since 14.10.1\n * @since 14.4.8\n * @since 13.10.11\n */\n@HTML50ComponentList\n@XWikiSyntax21ComponentList\n@RenderingScriptServiceComponentList\n@DefaultRenderingConfigurationComponentList\n@UserReferenceComponentList\n@ComponentList({\n    InfoMessageMacro.class,\n    ErrorMessageMacro.class,\n    TestNoScriptMacro.class\n})\nclass InvitationCommonPageTest extends PageTest\n{\n    public static final DocumentReference INVITATION_COMMON_REFERENCE =\n        new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationCommon\");\n\n    private ScriptContext scriptContext;\n\n    @BeforeEach\n    void setUp() throws Exception\n    {\n        AuthorizationManager authorizationManager = this.componentManager.getInstance(AuthorizationManager.class);\n        // Allow everything by default.\n        when(authorizationManager.hasAccess(any(), any(), any())).thenReturn(true);\n        this.scriptContext = this.oldcore.getMocker().<ScriptContextManager>getInstance(ScriptContextManager.class)\n            .getCurrentScriptContext();\n    }\n\n    @Test\n    void testEq0() throws Exception\n    {\n        this.context.setDoc(this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"]]  {{noscript/}}\", \"InvitationCommon\"), this.context));\n\n        Document document = Jsoup.parse(loadPage(INVITATION_COMMON_REFERENCE).getRenderedContent(this.context));\n        assertEquals(\"xe.invitation.internalDocument []] {{noscript/}}.WebHome]\",\n            document.selectFirst(\".infomessage\").text());\n    }\n\n    @Test\n    void testEq1ConfigClassIsNew() throws Exception\n    {\n        String spaceName = \"<script>console.log</script>]]{{noscript/}}\";\n\n        XWikiDocument doc =\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", spaceName, \"InvitationCommon\"), this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        this.request.put(\"test\", \"1\");\n\n        Document document = Jsoup.parse(loadPage(INVITATION_COMMON_REFERENCE).getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element errorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Class document <script>console\\\\.log</script>]]{{noscript/}}.WebHome not found. \"\n            + \"can't run test.\", errorMessage.text());\n        Element errorLink = errorMessage.selectFirst(\"a\");\n        assertEquals(\"<script>console\\\\.log</script>]]{{noscript/}}.WebHome\", errorLink.text());\n        assertEquals(\"<script>console\\\\.log</script>]]{{noscript/}}.WebHome\", errorLink.attr(\"href\"));\n    }\n\n    @Test\n    void testEq1ConfigClassExistsInvalidFromAddress() throws Exception\n    {\n        // Create an InvitationCommon file.\n        DocumentReference documentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\");\n        XWikiDocument doc = this.xwiki.getDocument(documentReference, this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"<script>console.log('from_address')</script>\", this.context);\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        XWikiDocument invitationCommonDoc = loadPage(INVITATION_COMMON_REFERENCE);\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config map too small\", firstErrorMessage.text());\n        Element secondErrorMessage = document.select(\".errormessage\").get(1);\n        assertEquals(\"form_address incorrect, expecting \\\"no-reply@localhost.localdomain\\\" \"\n            + \"got \\\"<script>console.log('from_address')</script>\\\"\", secondErrorMessage.text());\n    }\n\n    @Test\n    void testEq1ConfigClassExistsConfigMapTooSmall() throws Exception\n    {\n        // Create an InvitationCommon file.\n        XWikiDocument doc = this.xwiki\n            .getDocument(new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\"),\n                this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"no-reply@localhost.localdomain\", this.context);\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        XWikiDocument invitationCommonDoc = loadPage(INVITATION_COMMON_REFERENCE);\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config map too small\", firstErrorMessage.text());\n        Element secondErrorMessage = document.select(\".errormessage\").get(1);\n        assertEquals(\"Config document not created\", secondErrorMessage.text());\n    }\n\n    @Test\n    void testEq1ConfigClassExistsNewInvitationConfig() throws Exception\n    {\n        // Create an InvitationCommon file.\n        XWikiDocument doc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"InvitationCommon\"), this.context);\n        this.xwiki.saveDocument(doc, this.context);\n        this.context.setDoc(doc);\n\n        // Create a WebHome file in the same space as InvitationCommon, with an XClass containing the expected fields.\n        DocumentReference configDocumentReference =\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"WebHome\");\n        XWikiDocument configDoc = this.xwiki.getDocument(configDocumentReference, this.context);\n        configDoc.getXClass().addTextField(\"from_address\", \"From Address\", 30);\n        // Initialize 8 fields, because that's the only check performed in the document currently.\n        IntStream.range(0, 8)\n            .forEach(value -> configDoc.getXClass().addTextField(\"field\" + value, \"Field \" + value, 30));\n        this.xwiki.saveDocument(configDoc, this.context);\n\n        // Initialize the document in the same space as InvitationCommon, containing an XObject with a WebHome XObject.\n        XWikiDocument hopefullyNonExistantSpaceDoc = this.xwiki.getDocument(\n            new DocumentReference(\"xwiki\", \"<script>console.log</script>\", \"HopefullyNonexistantSpace\"), this.context);\n        BaseObject invitationConfigXObject =\n            hopefullyNonExistantSpaceDoc.newXObject(configDocumentReference, this.context);\n        invitationConfigXObject.set(\"from_address\", \"no-reply@localhost.localdomain\", this.context);\n        IntStream.range(0, 8)\n            .forEach(value -> invitationConfigXObject.set(\"field\" + value, \"value \" + value, this.context));\n        this.xwiki.saveDocument(hopefullyNonExistantSpaceDoc, this.context);\n\n        this.request.put(\"test\", \"1\");\n\n        XWikiDocument invitationCommonDoc = loadPage(INVITATION_COMMON_REFERENCE);\n        Document document = Jsoup.parse(invitationCommonDoc.getRenderedContent(this.context));\n\n        assertEquals(\"testLoadInvitationConfig\", document.selectFirst(\".infomessage\").text());\n        Element firstErrorMessage = document.selectFirst(\".errormessage\");\n        assertEquals(\"Config document not created\", firstErrorMessage.text());\n    }\n\n    @Test\n    void displayMessageVelocityMacro() throws Exception\n    {\n        loadPage(INVITATION_COMMON_REFERENCE);\n        DocumentReference invitationMailClassDocumentReference =\n            new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationMailClass\");\n        loadPage(invitationMailClassDocumentReference);\n\n        XWikiDocument page = this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"Space\", \"Page\"), this.context);\n        BaseObject invitationMailXObject = page.newXObject(invitationMailClassDocumentReference, this.context);\n        invitationMailXObject.set(\"messageBody\", \"<strong>message body</strong>\", this.context);\n        page.setSyntax(XWIKI_2_1);\n        page.setContent(\"{{include reference=\\\"Invitation.InvitationCommon\\\"/}}\\n\"\n            + \"\\n\"\n            + \"{{velocity}}\\n\"\n            + \"$mail.class\\n\"\n            + \"#displayMessage($mail)\\n\"\n            + \"{{/velocity}}\");\n\n        this.scriptContext.setAttribute(\"mail\", new Object(invitationMailXObject, this.context), GLOBAL_SCOPE);\n\n        Document document = renderHTMLPage(page);\n        assertEquals(\"<strong>message body</strong>\", document.selectFirst(\"#preview-messagebody-field\").html());\n    }\n\n    /**\n     * Check if the value of subjectLine correctly escape its parameters.\n     */\n    @Test\n    void subjectLineTemplate() throws Exception\n    {\n        com.xpn.xwiki.api.Document invitationCommonDocument =\n            new com.xpn.xwiki.api.Document(loadPage(INVITATION_COMMON_REFERENCE), this.context);\n        String value = String.valueOf(\n            invitationCommonDocument.getObject(\"xwiki:Invitation.WebHome\").getProperty(\"subjectLineTemplate\")\n                .getValue());\n        this.oldcore.getScriptContext().setAttribute(\"subjectLine\", \"{{noscript/}}\", GLOBAL_SCOPE);\n        com.xpn.xwiki.api.Document testDocument = new com.xpn.xwiki.api.Document(\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"Space\", \"Test\"), this.context), this.context);\n        String renderedContent = testDocument.getRenderedContent(value, XWIKI_2_0.toIdString(), PLAIN_1_0.toIdString());\n        assertEquals(\"xe.invitation.emailContent.subjectLine [XWikiGuest, null, {{noscript/}}]\", renderedContent);\n    }\n}\n", "/*\n * See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n * This is free software; you can redistribute it and/or modify it\n * under the terms of the GNU Lesser General Public License as\n * published by the Free Software Foundation; either version 2.1 of\n * the License, or (at your option) any later version.\n *\n * This software is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this software; if not, write to the Free\n * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n * 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n */\npackage org.xwiki.invitation;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.junit.jupiter.api.Test;\nimport org.xwiki.model.reference.DocumentReference;\nimport org.xwiki.rendering.RenderingScriptServiceComponentList;\nimport org.xwiki.rendering.internal.configuration.DefaultExtendedRenderingConfiguration;\nimport org.xwiki.rendering.internal.configuration.RenderingConfigClassDocumentConfigurationSource;\nimport org.xwiki.rendering.internal.macro.message.InfoMessageMacro;\nimport org.xwiki.test.annotation.ComponentList;\nimport org.xwiki.test.page.HTML50ComponentList;\nimport org.xwiki.test.page.PageTest;\nimport org.xwiki.test.page.TestNoScriptMacro;\nimport org.xwiki.test.page.XWikiSyntax21ComponentList;\n\nimport com.xpn.xwiki.doc.XWikiDocument;\n\nimport static javax.script.ScriptContext.GLOBAL_SCOPE;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.xwiki.rendering.syntax.Syntax.PLAIN_1_0;\nimport static org.xwiki.rendering.syntax.Syntax.XWIKI_2_0;\n\n/**\n * Test of {@code Invitation.InvitationConfig}.\n *\n * @version $Id$\n * @since 15.0RC1\n * @since 14.4.8\n * @since 14.10.4\n */\n@HTML50ComponentList\n@XWikiSyntax21ComponentList\n@RenderingScriptServiceComponentList\n@ComponentList({\n    InfoMessageMacro.class,\n    TestNoScriptMacro.class,\n    // Start - Required in addition of RenderingScriptServiceComponentList\n    DefaultExtendedRenderingConfiguration.class,\n    RenderingConfigClassDocumentConfigurationSource.class,\n    // End - Required in additional of RenderingScriptServiceComponentList\n})\nclass InvitationConfigPageTest extends PageTest\n{\n    private static final DocumentReference INVITATION_CONFIG_REFERENCE =\n        new DocumentReference(\"xwiki\", \"Invitation\", \"InvitationConfig\");\n\n    @Test\n    void escapeInfoMessageInternalDocumentParameter() throws Exception\n    {\n        XWikiDocument invitationGuestActionsDocument = loadPage(INVITATION_CONFIG_REFERENCE);\n\n        // Set up the current doc in the context so that $doc is bound in scripts\n        this.context.setDoc(\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"]] {{noscript/}}\", \"Page\"), this.context));\n\n        Document document = Jsoup.parse(invitationGuestActionsDocument.getRenderedContent(this.context));\n        Element infomessage = document.selectFirst(\".infomessage\");\n        assertEquals(\"xe.invitation.internalDocument [Invitation.WebHome]\", infomessage.text());\n    }\n\n    @Test\n    void subjectLineTemplate() throws Exception\n    {\n        com.xpn.xwiki.api.Document invitationConfigDocument =\n            new com.xpn.xwiki.api.Document(loadPage(INVITATION_CONFIG_REFERENCE), this.context);\n        String value = String.valueOf(\n            invitationConfigDocument.getObject(\"xwiki:Invitation.WebHome\").getProperty(\"subjectLineTemplate\")\n                .getValue());\n        this.oldcore.getScriptContext().setAttribute(\"subjectLine\", \"{{noscript/}}\", GLOBAL_SCOPE);\n        com.xpn.xwiki.api.Document testDocument = new com.xpn.xwiki.api.Document(\n            this.xwiki.getDocument(new DocumentReference(\"xwiki\", \"Space\", \"Test\"), this.context), this.context);\n        String renderedContent = testDocument.getRenderedContent(value, XWIKI_2_0.toIdString(), PLAIN_1_0.toIdString());\n        assertEquals(\"xe.invitation.emailContent.subjectLine [XWikiGuest, null, {{noscript/}}]\", renderedContent);\n    }\n}\n"], "filenames": ["xwiki-platform-core/xwiki-platform-invitation/xwiki-platform-invitation-ui/src/main/resources/Invitation/InvitationCommon.xml", "xwiki-platform-core/xwiki-platform-invitation/xwiki-platform-invitation-ui/src/main/resources/Invitation/InvitationConfig.xml", "xwiki-platform-core/xwiki-platform-invitation/xwiki-platform-invitation-ui/src/test/java/org/xwiki/invitation/InvitationCommonPageTest.java", "xwiki-platform-core/xwiki-platform-invitation/xwiki-platform-invitation-ui/src/test/java/org/xwiki/invitation/InvitationConfigPageTest.java"], "buggy_code_start_loc": [828, 423, 36, 38], "buggy_code_end_loc": [829, 424, 264, 77], "fixing_code_start_loc": [828, 423, 35, 39], "fixing_code_end_loc": [829, 424, 284, 96], "type": "CWE-94", "message": "XWiki Platform is a generic wiki platform offering runtime services for applications built on top of it. Any user who can view `Invitation.WebHome` can execute arbitrary script macros including Groovy and Python macros that allow remote code execution including unrestricted read and write access to all wiki contents. This vulnerability has been patched on XWiki 14.4.8, 15.2-rc-1, and 14.10.6. Users are advised to upgrade. Users unable to upgrade may manually apply the patch on `Invitation.InvitationCommon` and `Invitation.InvitationConfig`, but there are otherwise no known workarounds for this vulnerability.", "other": {"cve": {"id": "CVE-2023-37914", "sourceIdentifier": "security-advisories@github.com", "published": "2023-08-17T18:15:14.810", "lastModified": "2023-08-24T17:14:24.473", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "XWiki Platform is a generic wiki platform offering runtime services for applications built on top of it. Any user who can view `Invitation.WebHome` can execute arbitrary script macros including Groovy and Python macros that allow remote code execution including unrestricted read and write access to all wiki contents. This vulnerability has been patched on XWiki 14.4.8, 15.2-rc-1, and 14.10.6. Users are advised to upgrade. Users unable to upgrade may manually apply the patch on `Invitation.InvitationCommon` and `Invitation.InvitationConfig`, but there are otherwise no known workarounds for this vulnerability."}, {"lang": "es", "value": "XWiki Platform es una plataforma wiki gen\u00e9rica que ofrece servicios en tiempo de ejecuci\u00f3n para aplicaciones construidas sobre ella. Cualquier usuario que pueda ver `Invitation.WebHome` puede ejecutar macros de script arbitrarias incluyendo macros Groovy y Python que permiten la ejecuci\u00f3n remota de c\u00f3digo incluyendo acceso de lectura y escritura sin restricciones a todos los contenidos del wiki. Esta vulnerabilidad ha sido parcheada en XWiki 14.4.8, 15.2-rc-1, y 14.10.6. Se recomienda a los usuarios que actualicen. Los usuarios que no puedan actualizar pueden aplicar manualmente el parche en `Invitation.InvitationCommon` e `Invitation.InvitationConfig`, pero por lo dem\u00e1s no hay soluciones conocidas para esta vulnerabilidad."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 8.8, "baseSeverity": "HIGH"}, "exploitabilityScore": 2.8, "impactScore": 5.9}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "CHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "LOW", "baseScore": 9.9, "baseSeverity": "CRITICAL"}, "exploitabilityScore": 3.1, "impactScore": 6.0}]}, "weaknesses": [{"source": "security-advisories@github.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-94"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:xwiki:xwiki:*:*:*:*:*:*:*:*", "versionStartIncluding": "2.5", "versionEndExcluding": "14.4.8", "matchCriteriaId": "27E99C7F-8D35-4531-8D90-D55C39B65090"}, {"vulnerable": true, "criteria": "cpe:2.3:a:xwiki:xwiki:*:*:*:*:*:*:*:*", "versionStartIncluding": "14.5.0", "versionEndExcluding": "14.10.6", "matchCriteriaId": "E8F8681E-982C-4D6F-9F38-CC7B98753E9D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:xwiki:xwiki:*:*:*:*:*:*:*:*", "versionStartIncluding": "15.0", "versionEndExcluding": "15.2", "matchCriteriaId": "F1AD4421-AE75-43F7-9B8F-F0A739D166C8"}]}]}], "references": [{"url": "https://github.com/xwiki/xwiki-platform/commit/ff1d8a1790c6ee534c6a4478360a06efeb2d3591", "source": "security-advisories@github.com", "tags": ["Patch"]}, {"url": "https://github.com/xwiki/xwiki-platform/security/advisories/GHSA-7954-6m9q-gpvf", "source": "security-advisories@github.com", "tags": ["Exploit", "Third Party Advisory"]}, {"url": "https://jira.xwiki.org/browse/XWIKI-20421", "source": "security-advisories@github.com", "tags": ["Exploit", "Issue Tracking", "Vendor Advisory"]}]}, "github_commit_url": "https://github.com/xwiki/xwiki-platform/commit/ff1d8a1790c6ee534c6a4478360a06efeb2d3591"}}