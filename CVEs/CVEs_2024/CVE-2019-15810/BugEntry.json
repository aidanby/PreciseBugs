{"buggy_code": ["use strict;\nuse warnings;\nuse Module::Build;\n\nModule::Build->new(\n  module_name => 'App::Netdisco',\n  license     => 'bsd',\n  dynamic_config => 1,\n  configure_requires => {\n    'DBIx::Class' => '0.082810',\n    'Module::Build' => '0.42',\n  },\n  build_requires => {\n    'ExtUtils::Config' => '0',\n    'ExtUtils::Helpers' => '0',\n    'ExtUtils::InstallPaths' => '0',\n  },\n  requires => {\n    'aliased' => '0',\n    'autovivification' => '0',\n    'namespace::clean' => '0.24',\n    'version' => '0.9902',\n    'Algorithm::Cron' => '0.07',\n    'AnyEvent' => '7.05',\n    'AnyEvent::DNS::EtcHosts' => '0',\n    'App::cpanminus' => '1.6108',\n    'App::local::lib::helper' => '0.07',\n    'Archive::Extract' => '0',\n    'Authen::Radius' => '0',\n    'CGI::Expand' => '2.05',\n    'Data::Printer' => '0',\n    'DBD::Pg' => '0',\n    'DBIx::Class' => '0.082841',\n    'DBIx::Class::Helpers' => '2.033004',\n    'Daemon::Control' => '0.001006',\n    'Dancer' => '1.3132',\n    'Dancer::Plugin::DBIC' => '0.2001',\n    'Dancer::Plugin::Auth::Extensible' => '0.30',\n    'Dancer::Plugin::Passphrase' => '2.0.1',\n    'Dancer::Plugin::Swagger' => '0',\n    'Dancer::Session::Cookie' => '0.27',\n    'Expect' => '0',\n    'File::ShareDir' => '1.03',\n    'File::Slurper' => '0.009',\n    'Guard' => '1.022',\n    'HTML::Parser' => '3.70',\n    'HTTP::Tiny' => '0.029',\n    'IO::Socket::SSL' => '2.048',\n    'JSON' => '2.90',\n    'JSON::XS' => '3.01',\n    'List::Util' => '1.49',\n    'List::MoreUtils' => '0.428',\n    'MIME::Base64' => '3.13',\n    'Module::Load' => '0.32',\n    'Moo' => '1.001000',\n    'MCE' => '1.703',\n    'Net::Domain' => '1.23',\n    'Net::DNS' => '0.72',\n    'Net::LDAP' => '0',\n    'Net::OpenSSH' => '0',\n    'NetAddr::MAC' => '0.93',\n    'NetAddr::IP' => '4.068',\n    'Opcode' => '1.07',\n    'Package::DeprecationManager' => '0',\n    'Path::Class' => '0.32',\n    'Plack' => '1.0023',\n    'Plack::Handler::Twiggy' => '0',\n    'Plack::Middleware::Debug' => '0',\n    'Plack::Middleware::Expires' => '0.03',\n    'Plack::Middleware::ReverseProxy' => '0.15',\n    'Pod::Usage' => 0,\n    'Regexp::Common' => 2017060201,\n    'Role::Tiny' => '1.002005',\n    'Scope::Guard' => 0,\n    'Sereal' => '0',\n    'Socket6' => '0.23',\n    'Starman' => '0.4008',\n    'Storable' => '0',\n    'Sys::SigAction' => '0',\n    'SNMP::Info' => '3.68',\n    'SQL::Abstract' => '1.85',\n    'SQL::Translator' => '0.11024',\n    'Template' => '2.24',\n    'Template::Plugin::CSV' => '0.04',\n    'Template::Plugin::Number::Format' => '1.02',\n    'Term::ReadLine' => '0',\n    'Term::UI' => '0',\n    'Try::Tiny' => '0',\n    'URI' => '0',\n    'URL::Encode' => '0.03',\n    'URL::Encode::XS' => '0',\n    'YAML' => '0.84',\n    'YAML::XS' => '0.41',\n  },\n  recommends => {\n    'Graph' => '0',\n    'GraphViz' => '0',\n  },\n  test_requires => {\n    'Test::More' => '1.302083',\n    'Env::Path'  => '0',\n    'Test::Compile' => '0',\n    'Test::File::ShareDir::Dist' => '0',\n  },\n  script_files => [\n    'bin/nd-import-topology',\n    'bin/netdisco-db-deploy',\n    'bin/netdisco-deploy',\n    'bin/netdisco-do',\n    'bin/netdisco-backend-fg',\n    'bin/netdisco-backend',\n    'bin/netdisco-daemon-fg',\n    'bin/netdisco-daemon',\n    'bin/netdisco-web-fg',\n    'bin/netdisco-web',\n    'bin/netdisco-rancid-export',\n    'bin/netdisco-sshcollector',\n  ],\n  share_dir => 'share',\n  meta_merge => {\n    resources => {\n      homepage => 'http://netdisco.org/',\n      bugtracker => 'https://github.com/netdisco/netdisco/issues',\n      repository => 'https://github.com/netdisco/netdisco',\n      MailingList => 'https://lists.sourceforge.net/lists/listinfo/netdisco-users',\n      IRC => 'irc://irc.freenode.org/#netdisco',\n    },\n  },\n)->create_build_script;\n", "# This is the main configuration file for Netdisco web and backend apps\n#\n#    DO NOT EDIT THIS FILE\n#\n# Overrides should go to ~/environments/deployment.yml\n#\n# https://github.com/netdisco/netdisco/wiki/Configuration has\n# in depth explanations about each setting.\n\n# ----------------\n# GENERAL SETTINGS\n# ----------------\n\nlog: 'warning'\nlogger_format: '[%P] %U %L %m'\ninclude_paths:  []\ntemplate_paths: []\nsite_local_files: false\nexternal_databases: []\n\n# ------------\n# WEB FRONTEND\n# ------------\n\ndomain_suffix: []\nno_auth: false\nsuggest_guest: false\nnavbar_autocomplete: true\ntrust_remote_user: false\ntrust_x_remote_user: false\napi_token_lifetime: 3600\n#ldap:\n#  servers: []\n#  user_string: 'MYDOMAIN\\%USER%'\n#  base: \"\"\n#  proxy_user: \"\"\n#  proxy_pass: \"\"\n#  opts:\n#    debug: 3\n#  tls_opts: {}\npath: '/'\nweb_plugins:\n  - Inventory\n  - Report::PortVLANMismatch\n  - Report::PortAdminDown\n  - Report::PortBlocking\n  - Report::PortMultiNodes\n  - Report::PortSsid\n  - Report::PortUtilization\n  - Report::ApChannelDist\n  - Report::ApClients\n  - Report::ApRadioChannelPower\n  - Report::HalfDuplex\n  - Report::DeviceAddrNoDNS\n  - Report::DeviceByLocation\n  - Report::InventoryByModelByOS\n  - Report::DeviceDnsMismatch\n  - Report::DevicePoeStatus\n  - Report::DuplexMismatch\n  - Report::IpInventory\n  - Report::ModuleInventory\n  - Report::Netbios\n  - Report::NodeMultiIPs\n  - Report::NodeVendor\n  - Report::NodesDiscovered\n  - Report::SsidInventory\n  - Report::VlanInventory\n  - Report::SubnetUtilization\n  - Report::PortLog\n  - AdminTask::JobQueue\n  - AdminTask::NodeMonitor\n  - AdminTask::Topology\n  - AdminTask::PollerPerformance\n  - AdminTask::PseudoDevice\n  - AdminTask::SlowDevices\n  - AdminTask::UndiscoveredNeighbors\n  - AdminTask::OrphanedDevices\n  - AdminTask::DuplicateDevices\n  - AdminTask::TimedOutDevices\n  - AdminTask::UserLog\n  - AdminTask::Users\n  - Search::Device\n  - Search::Node\n  - Search::VLAN\n  - Search::Port\n  - Device::Details\n  - Device::Ports\n  - Device::Modules\n  - Device::Neighbors\n  - Device::Addresses\n  - Device::Vlans\nextra_web_plugins: []\nsidebar_defaults:\n  search_node:\n    stamps:      { default: checked }\n    deviceports: { default: checked }\n    show_vendor: { default: null }\n    archived:    { default: null }\n    partial:     { default: null }\n    age_invert:  { default: null }\n    daterange:   { default: null }\n    mac_format:  { default: IEEE }\n  search_port:\n    partial:     { default: checked }\n    uplink:      { default: null }\n    ethernet:    { default: checked }\n  search_device:\n    matchall:    { default: checked }\n  device_ports:\n    c_admin:       { label: 'Port Controls', default: null, idx: 0 }\n    c_port:        { label: 'Port', default: checked, idx: 1 }\n    c_descr:       { label: 'Description', default: null, idx: 2 }\n    c_comment:     { label: 'Last Comment', default: null, idx: 3 }\n    c_type:        { label: 'Type', default: null, idx: 4 }\n    c_duplex:      { label: 'Duplex', default: null, idx: 5 }\n    c_lastchange:  { label: 'Last Change', default: null, idx: 6 }\n    c_name:        { label: 'Name', default: checked, idx: 7 }\n    c_speed:       { label: 'Speed (running)', default: null, idx: 8 }\n    c_speed_admin: { label: 'Speed (configured)', default: null, idx: 9 }\n    c_error:       { label: 'Error Message', default: null, idx: 10 }\n    c_mac:         { label: 'Port MAC', default: null, idx: 11 }\n    c_mtu:         { label: 'MTU', default: null, idx: 12 }\n    c_pvid:        { label: 'Native VLAN', default: checked, idx: 13 }\n    c_vmember:     { label: 'VLAN Membership', default: checked, idx: 14 }\n    c_power:       { label: 'PoE', default: null, idx: 15 }\n    c_ssid:        { label: 'SSID', default: null, idx: 16 }\n    c_nodes:       { label: 'Connected Nodes', default: null, idx: 17 }\n    c_neighbors:   { label: 'Connected Devices', default: checked, idx: 18 }\n    c_stp:         { label: 'Spanning Tree', default: null, idx: 19 }\n    c_up:          { label: 'Status', default: null, idx: 20 }\n    mac_format:    { default: IEEE }\n    n_inventory:   { label: 'Inventory Data', default: checked, idx: 0 }\n    n_detailed_inventory: { label: 'Detailed Inventory', default: null, idx: 1 }\n    n_age:         { label: 'Age Stamp', default: null, idx: 2 }\n    n_ip4:         { label: 'IPv4 Addresses', default: checked, idx: 3 }\n    n_ip6:         { label: 'IPv6 Addresses', default: checked, idx: 4 }\n    n_netbios:     { label: 'NetBIOS Name', default: checked, idx: 5 }\n    n_ssid:        { label: 'SSID', default: checked, idx: 6 }\n    n_vendor:      { label: 'Vendor', default: null, idx: 7 }\n    n_archived:    { label: 'Archived Data', default: null, idx: 8 }\n    age_num:       { default: 3 }\n    age_unit:      { default: months }\n  device_netmap:\n    showips:     { default: null }\n    showspeed:   { default: null }\n    mapshow:     { default: neighbors }\n    colorby:     { default: speed }\n    dynamicsize: { default: checked }\n  report_moduleinventory:\n    fruonly:     { default: checked }\n    matchall:    { default: checked }\n  report_portutilization:\n    age_num:      { default: 3 }\n    age_unit:     { default: months }\ndevice_port_col_idx_left: 0\ndevice_port_col_idx_mid: 2\ndevice_port_col_idx_right: -1\njobqueue_refresh: 10\nsafe_password_store: true\nreports: []\nsystem_reports:\n  - tag: portserrordisabled\n    label: 'Error Disabled Ports'\n    category: Port\n    columns:\n    - { ip: Device } \n    - { dns: DNS } \n    - { port: Port } \n    - { name: Description } \n    - { reason: Reason } \n    query: |\n      SELECT dp.ip, d.dns, dp.port, dp.name, properties.error_disable_cause AS reason\n        FROM device_port dp\n        INNER JOIN device_port_properties properties USING (ip, port)\n        LEFT JOIN device d USING (ip)\n      WHERE properties.error_disable_cause IS NOT NULL\n      ORDER BY dp.ip, dp.port\ntable_pagesize: 10\ntable_showrecordsmenu:\n  - [10, 25, 50, 100, '-1']\n  - [10, 25, 50, 100, 'All']\nvlanctl: true\nportctl_nameonly: false\nportctl_nophones: false\nportctl_vlans: false\nportctl_uplinks: false\nport_control_reasons:\n  address:     'Address Allocation Abuse'\n  copyright:   'Copyright Violation'\n  dos:         'Denial of Service'\n  bandwidth:   'Excessive Bandwidth'\n  polling:     'Excessive Polling of DNS/DHCP/SNMP'\n  noserv:      'Not In Service'\n  exploit:     'Remote Exploit Possible'\n  compromised: 'System Compromised'\n  other:       'Other'\n  resolved:    'Issue Resolved'\ncheck_userlog: false\ndevport_vlan_limit: 150\nlogin_logo: \"\"\ndefanged_admin: 'admin'\n\n# -------------\n# NETDISCO CORE\n# -------------\n\n# mibhome is discovered from environment\n# mibdirs defaults to contents of mibhome\nhost_groups:\n  __ANY__:\n    - 'any'\n  __LOCAL_ADDRESSES__:\n    - '::1'\n    - 'fe80::/10'\n    - '127.0.0.0/8'\nhost_group_displaynames: {}\ndevice_identity: []\ncommunity: []\ncommunity_rw: []\ndevice_auth: []\nuse_legacy_rancidexport: false\nuse_legacy_sshcollector: false\nget_credentials: \"\"\nbulkwalk_off: false\nbulkwalk_no: []\nbulkwalk_repeaters: 20\nnonincreasing: false\nsnmpver: 3\nsnmptimeout: 3000000\nsnmpretries: 2\nsnmp_remoteport: {}\ndevices_no: []\ndevices_only: []\ndiscover_no: []\ndiscover_only: []\ndiscover_no_type: []\ndiscover_waps: true\ndiscover_phones: false\ndiscover_min_age: 0\nmacsuck_no: []\nmacsuck_only: []\nmacsuck_all_vlans: false\nmacsuck_no_unnamed: false\nmacsuck_no_vlan:\n  - 'fddi-default'\n  - 'token-ring-default'\n  - 'fddinet-default'\n  - 'trnet-default'\n  - 'fcoe-vsan-4048'\n  - 'SAM-vlan-boot'\n  - 'SAM-vlan-appliance-management'\n  - 'SAM-vlan-management'\nmacsuck_no_devicevlan: []\nmacsuck_unsupported: []\nmacsuck_unsupported_type: []\nmacsuck_bleed: false\nmacsuck_min_age: 0\nsnmpforce_v1: []\nsnmpforce_v2: []\nsnmpforce_v3: []\narpnip_no: []\narpnip_only: []\narpnip_min_age: 0\nnbtstat_no: []\nnbtstat_only: []\nnbtstat_max_age: 7\nnbtstat_interval: 0.02\nnbtstat_response_timeout: 1\nnode_freshness: 0\nexpire_devices: 60\nexpire_nodes: 90\nexpire_nodes_archive: 60\nexpire_jobs: 14\nexpire_userlog: 365\nexpire_nodeip_freshness: null\nstore_wireless_clients: true\nstore_modules: true\nignore_interfaces:\n  - 'EOBC'\n  - 'unrouted VLAN(?: \\d+)?'\n  - 'StackPort'\n  - 'Control Plane Interface'\n  - 'SPAN (S|R)P Interface'\n  - 'StackSub-.*'\n  - 'StackPort\\d+'\n  - 'netflow'\n  - 'Vlan\\d+-mpls layer'\n  - 'BRI\\S+-Bearer Channel'\n  - 'BRI\\S+-Physical'\n  - 'BRI\\S+-Signalling'\n  - 'BRI\\S+-Signaling'\n  - 'Embedded-Service-Engine\\d+\\/\\d+'\n  - 'Virtual-Template\\d+'\n  - 'Virtual-Access\\d+'\n  - '(E|T)\\d \\d\\/\\d\\/\\d'\n  - 'InLoopback0'\n  - 'NULL\\d'\n  - 'Register-Tunnel\\d'\n  - 'Blade-Aggregation\\d'\n  - 'M-GigabitEthernet\\d\\/\\d\\/\\d'\n  - 'Ethernet(?:-| )QOS Packet Scheduler'\n  - 'Ethernet(?:-| )WFP (?:802\\.3|Native) MAC Layer Lightweight Filter'\n  - 'ii\\d\\/\\d\\/\\d+'\nignore_notpresent_types:\n  - 'ethernetCsmacd'\n  - 'tunnel'\n  - 'ieee8023adLag'\nignore_private_nets: false\nreverse_sysname: false\nphone_capabilities:\n  - '(?i:phone)'\nphone_platforms:\n  - '(?i:mitel.5\\d{3})'\nwap_capabilities:\n  - 'wlanAccessPoint'\nwap_platforms:\n  - '(?i:\\bwap\\b)'\n  - 'cisco\\s+AIR-[L|C]?AP'\n  - '-K9W8-'\n\n# --------------\n# BACKEND DAEMON\n# --------------\n\nworkers:\n  tasks: 'AUTO * 2'\n  timeout: 600\n  sleep_time: 1\n  min_runtime: 0\n  max_deferrals: 10\n  retry_after: '7 days'\n  queue: PostgreSQL\n\n#\u00a050 minutes\njobs_stale_after: 3000\njobs_qdepth: 50\n\ndns:\n  max_outstanding: 50\n  hosts_file: '/etc/hosts'\n  no: ['group:__LOCAL_ADDRESSES__','169.254.0.0/16']\n\nschedule:\n  discoverall:\n    when: '5 7 * * *'\n  macwalk:\n    when:\n      min: 20\n  arpwalk:\n    when:\n      min: 50\n  nbtwalk:\n    when: '0 8,13,21 * * *'\n  expire:\n    when: '30 23 * * *'\n  makerancidconf: null\n\njob_prio:\n  high:\n    - location\n    - contact\n    - portcontrol\n    - portname\n    - vlan\n    - power\n  normal:\n    - discoverall\n    - discover\n    - arpwalk\n    - arpnip\n    - macwalk\n    - macsuck\n    - nbtwalk\n    - nbtstat\n    - expire\n    - stats\n\nworker_plugins:\n  - 'Arpnip'\n  - 'Arpnip::Nodes'\n  - 'Arpnip::Subnets'\n  - 'Arpwalk'\n  - 'Contact'\n  - 'Delete'\n  - 'Discover'\n  - 'Discover::CanonicalIP'\n  - 'Discover::Entities'\n  - 'Discover::Neighbors'\n  - 'Discover::Neighbors::Routed'\n  - 'Discover::Neighbors::DOCSIS'\n  - 'Discover::PortPower'\n  - 'Discover::PortProperties'\n  - 'Discover::Properties'\n  - 'Discover::VLANs'\n  - 'Discover::Wireless'\n  - 'Discover::WithNodes'\n  - 'DiscoverAll'\n  - 'DumpConfig'\n  - 'Expire'\n  - 'ExpireNodes'\n  - 'Graph'\n  - 'Location'\n  - 'Macsuck'\n  - 'Macsuck::Nodes'\n  - 'Macsuck::WirelessNodes'\n  - 'Macwalk'\n  - 'MakeRancidConf'\n  - 'NodeMonitor'\n  - 'Nbtstat'\n  - 'Nbtstat::Core'\n  - 'Nbtwalk'\n  - 'PortControl'\n  - 'PortName'\n  - 'Power'\n  - 'Psql'\n  - 'Renumber'\n  - 'SetUserToken'\n  - 'Show'\n  - 'Stats'\n  - 'Vlan'\n  - 'Vlan::Core'\n\nextra_worker_plugins: []\n\ndriver_priority:\n  restconf: 500\n  netconf:  400\n  eapi:     300\n  cli:      200\n  snmp:     100\n\n# ---------------\n# GraphViz Export\n# ---------------\n\ngraph:\n  # ---- Graph Settings ----\n  edge_color      : wheat\n\n  graph           : 'graph/netmap.gif'\n  graph_png       : 'graph/netmap.png'\n  graph_bg        : black\n  graph_clusters  : false  # try fdp layout\n  graph_color     : white\n  graph_default   : png\n  #graph_dir      : net_dir.gif\n  graph_epsilon   : 6\n  graph_layout    : twopi  # try neato or fdp too\n  graph_map       : 'graph/netmap.map'\n  graph_overlap   : scale\n  graph_nodesep   : 2\n  graph_ranksep   : .3\n  graph_raw       : 'graph/graph_raw.dot'\n  graph_splines   : false\n  graph_svg       : 'graph/netmap.svg'\n  graph_timeout   : 90\n  graph_x         : 30\n  graph_y         : 30\n\n  node_fillcolor  : dimgrey\n  node_font       : lucon\n  node_fontsize   : 46.0\n  node_fontcolor  : white\n  node_problem    : red\n  node_shape      : box\n  node_style      : filled\n  #edge_style      : setlinewidth(10)\n\n  # ---- Node Maps ----\n  # variable:matching pattern:node attribute:attribute value:key:key name\n  #node_map:\n  #  - 'label:cat(?!-g):fillcolor:blue:cat:Blue Box - Catalyst Device'\n  #  - 'label:-g:fillcolor:darkgreen:dev-g:Green Box - Gateway / Router'\n  #  - 'ip:^192.168\\.:color:yellow:dev:Yellow Border - ResNet'\n\n# ---------------\n# DANCER INTERNAL\n# ---------------\n\ncharset: 'UTF-8'\nwarnings: false\nshow_errors: false\nlogger: 'console'\nengines:\n  netdisco_template_toolkit:\n    encoding: 'utf8'\n    start_tag: '[%'\n    end_tag: '%]'\n    PRE_CHOMP: 1\n    INCLUDE_PATH: []\nlayout: 'main'\nplugins:\n  Swagger:\n     main_api_module: 'App::Netdisco'\n     ui_url: '/swagger-ui'\n  Auth::Extensible:\n    no_api_change_warning: true\n    no_default_pages: true\n    no_login_handler: true\n    realms:\n      users:\n        provider: 'App::Netdisco::Web::Auth::Provider::DBIC'\n        schema_name: 'netdisco'\nsession: 'cookie'\nsession_cookie_key: 'this_will_be_overridden_on_webapp_startup'\ntemplate: 'netdisco_template_toolkit'\nroute_cache: true\nappname: 'Netdisco'\nbehind_proxy: false\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar nd_sidebar-pinned\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin nd_sidebar-pin-clicked\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n\n      <div class=\"tab-content\">\n        <div id=\"[% task.tag %]_search\" class=\"tab-pane active\">\n          <form id=\"[% task.tag %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/admin') %]\">\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% task.tag %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/admintask/${task.tag}.tt\" %]\n            [% CATCH %]\n            <script type=\"text/javascript\">has_sidebar[\"[% task.tag %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      <li class=\"active\"><a id=\"[% task.tag %]_link\" class=\"nd_single-tab\"\n        href=\"#[% task.tag %]_pane\">[% task.label %]</a></li>\n      [% IF task.tag == 'jobqueue' %]\n      <span id=\"nd_device-name\">\n        <a class=\"nd_adminbutton\" name=\"delall\" href=\"#\"><i class=\"icon-trash text-error\"></i></a>\n        <a id=\"nd_countdown-refresh\" href=\"#\"><i class=\"text-success icon-refresh\"></i></a>\n        <a id=\"nd_countdown-control\" href=\"#\">\n          <i id=\"nd_countdown-control-icon\" class=\"text-success icon-play\"></i></a>\n        <span id=\"nd_countdown\"></span>\n      </span>\n      [% ELSIF task.tag == 'userlog' %]\n      <span id=\"nd_device-name\">\n        <a class=\"nd_adminbutton\" name=\"delall\" href=\"#\"><i class=\"icon-trash text-error\"></i></a>\n      </span>\n      [% ELSIF task.provides_csv %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n      [% END %]\n    </ul>\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"[% task.tag %]_pane\"></div>\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/admintask.js' -%]\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span4 alert alert-info\">No duplicate devices found.</div>\n[% ELSE %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device IP</th>\n      <th class=\"nd_center-cell\">Contact</th>\n      <th class=\"nd_center-cell\">Location</th>\n      <th class=\"nd_center-cell\">System Name</th>\n      <th class=\"nd_center-cell\">Model</th>\n      <th class=\"nd_center-cell\">OS Version</th>\n      <th class=\"nd_center-cell\">Serial</th>\n      <th class=\"nd_center-cell\">Last Discovered</th>\n      <th class=\"nd_center-cell\">Delete</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% SET count = 0 %]\n    [% FOREACH row IN results %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') %]?tab=details&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% row.dns | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.contact  | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.location | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.name     | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.model    | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.os_ver   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.serial   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_discover_stamp | html_entity %]</td>\n\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-danger btn-small\"\n          data-toggle=\"modal\" data-target=\"#nd_devdel-[% count %]\" type=\"button\">\n          <i class=\"icon-trash text-danger\"></i>\n        </button>\n\n        <div id=\"nd_devdel-[% count %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count %]\">Confirm Delete: [% row.ip || row.dns | html_entity %]</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <ul>\n                <li><p>This action is immediate and not reversible</p></li>\n                <li><p>All associated Nodes may be removed from the database</p></li>\n              </ul>\n            </blockquote>\n            <textarea id=\"nd_devdel-log\" class=\"input-block-level\" rows=\"2\" data-form=\"delete\"\n              placeholder=\"Enter a log message\" name=\"log\"></textarea>\n            <label class=\"checkbox\" style=\"display: block\">\n              <input id=\"nd_devdel-archive\" type=\"checkbox\" data-form=\"delete\" name=\"archive\">\n              <h4 class=\"nd_unbolden\">Archive Nodes</h4>\n            </label>\n            <input type=\"hidden\" data-form=\"delete\" value=\"[% row.ip | html_entity %]\" name=\"device\"/>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span2 alert alert-info\">The job queue is empty.</div>\n[% ELSE %]\n<table class=\"table table-bordered table-condensed table-hover nd_floatinghead\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Entered</th>\n      <th class=\"nd_center-cell\">Action</th>\n      <th class=\"nd_center-cell\">Status</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Port</th>\n      <th class=\"nd_center-cell\">Param</th>\n      <th class=\"nd_center-cell\">User</th>\n      <th class=\"nd_center-cell\">Started</th>\n      <th class=\"nd_center-cell\">Finished</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr\n      [% ' class=\"nd_jobqueueitem success\"' IF row.status == 'done' %]\n      [% ' class=\"nd_jobqueueitem error\"'   IF row.status == 'error' %]\n      [% ' class=\"nd_jobqueueitem info\"'    IF row.status.search('^queued-') %]\n      data-content=\"<pre>[% row.log | html_entity %]</pre>\"\n    >\n      <td class=\"nd_center-cell\">[% row.entered_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        [% FOREACH word IN row.action.split('_') %]\n        [% word.ucfirst | html_entity %]&nbsp;\n        [% END %]\n      </td>\n      [% IF row.status.search('^queued-') %]\n      <td class=\"nd_center-cell\">Running on &quot;[% row.status.remove('^queued-') | html_entity %]&quot;</td>\n      [% ELSE %]\n      <td class=\"nd_center-cell\">[% row.status.ucfirst | html_entity %]</td>\n      [% END %]\n      <td class=\"nd_center-cell\">\n        [% IF row.action == 'discover' AND row.status == 'error' %]\n        <a href=\"[% uri_for('/') %]?device=[% row.device | uri %]\">[% row.device | html_entity %]</a>\n        [% ELSE %]\n        <a href=\"[% uri_for('/device') %]?q=[% row.device | uri %]\">[% row.target.dns || row.device | html_entity %]</a>\n        [% END %]\n      </td>\n      <td class=\"nd_center-cell\">[% row.port | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.subaction | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.username | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.started_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.finished_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"del\" name=\"job\" type=\"hidden\" value=\"[% row.job | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\"><i class=\"icon-trash text-error\"></i></button>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Date Added</th>\n      <th class=\"nd_center-cell\">MAC Address</th>\n      <th class=\"nd_center-cell\">Match OUI</th>\n      <th class=\"nd_center-cell\">Enabled</th>\n      <th class=\"nd_center-cell\">Reason</th>\n      <th class=\"nd_center-cell\">Email</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"mac\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"matchoui\" type=\"checkbox\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"active\" type=\"checkbox\" checked></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"why\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"cc\"  type=\"email\"></td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.date | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"mac\" type=\"text\" value=\"[% row.mac | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"matchoui\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.matchoui %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"active\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.active %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"why\" type=\"text\" value=\"[% row.why | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"cc\" type=\"email\" value=\"[% row.cc | html_entity %]\">\n      </td>\n\n      <td class=\"nd_center-cell\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">Monitor for &quot;[% row.mac | html_entity %]&quot; will be removed.</p>\n            </blockquote>\n            <input data-form=\"del\" name=\"mac\" type=\"hidden\" value=\"[% row.mac | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ \n      {\n        \"targets\": [ 0, 2, 3, 6 ],\n        \"searchable\": false\n      },\n      {\n        \"targets\": [ 0, 2, 3, 6 ],\n        \"orderable\": false\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "[% IF orphans.size > 0 %]\n<div class=\"accordion\" id=\"accordion-orphans\">\n  <div class=\"accordion-group\">\n      <div class=\"accordion-heading\"> \n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-orphan\" href=\"#collapse-orphan\">\n            <i class=\"icon-chevron-up\"></i> &nbsp;\n            Orphaned Devices\n          </a>\n      </div>\n    <div id=\"collapse-orphan\" class=\"accordion-body collapse\">\n      <div class=\"accordion-inner\">\n      <table class=\"table table-bordered table-condensed\">\n        <thead>\n          <tr>\n            <th>Device</th>            \n            <th>Location</th>\n            <th>Contact</th>\n            <th>Vendor</th>\n            <th>Model</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH row IN orphans %]\n          <tr>\n            <td><a href=\"[% uri_for('/device') %]?q=[% row.ip | uri %]\">\n            [% row.dns || row.name || row.ip | html_entity %]</a></td>\n            <td>\n              [% IF row.location %]\n                <a href=\"[% search_device %]&q=[% row.location | uri %]&location=[% row.location | uri %]\">\n                 [% row.location | html_entity %]</a>\n              [% ELSE %]\n                [Not Set]\n              [% END %]\n            </td>\n            <td>[% row.contact | html_entity %]</td>\n            <td>[% row.vendor | html_entity %]</td>\n            <td>[% row.model | html_entity %]</td>\n          </tr>\n          [%END%]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  </div>\n</div>\n[% END %]\n[%# The largest graph is considered the main network, all others are\n    considered orphaned, so we need two to generate div %]\n[% IF graphs.size > 1 %]\n<div class=\"accordion\" id=\"accordion-networks\">\n[% count = 0 %]\n[% FOREACH network IN graphs %]\n  [% count = count + 1 %]\n  [%# The largest is not an orphan, so skip %]\n  [% NEXT IF count == 1 %]\n  <div class=\"accordion-group\">\n      <div class=\"accordion-heading\"> \n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-[% count %]\" href=\"#collapse-[% count %]\">\n            <i class=\"icon-chevron-up\"></i> &nbsp;\n              Orphaned Network: [% count - 1 | html_entity  %] Size: [% network.size | html_entity  %] Devices\n          </a>\n      </div>\n    <div id=\"collapse-[% count %]\" class=\"accordion-body collapse\">\n      <div class=\"accordion-inner\">\n      <table class=\"table table-bordered table-condensed\">\n        <thead>\n          <tr>\n            <th>Device</th>            \n            <th>Location</th>\n            <th>Contact</th>\n            <th>Vendor</th>\n            <th>Model</th>\n          </tr>\n        </thead>\n        <tbody>\n        [% FOREACH row IN network %]\n          <tr>\n            <td><a href=\"[% uri_for('/device') %]?tab=netmap&q=[% row.ip | uri %]&firstsearch=on\">\n            [% row.dns || row.name || row.ip | html_entity %]</a></td>\n            <td>\n              [% IF row.location %]\n                <a href=\"[% search_device %]&q=[% row.location | uri %]&location=[% row.location | uri %]\">\n                 [% row.location | html_entity %]</a>\n              [% ELSE %]\n                [Not Set]\n              [% END %]\n            </td>\n            <td>[% row.contact | html_entity %]</td>\n            <td>[% row.vendor | html_entity %]</td>\n            <td>[% row.model | html_entity %]</td>\n          </tr>\n        [% END %]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  </div>\n[% END %]\n</div>\n[% END %]\n<script>\n$('.accordion').on('show hide', function (n) {\n    $(n.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-chevron-up icon-chevron-down');\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device Name</th>\n      <th class=\"nd_center-cell\">Device IP</th>\n      <th class=\"nd_center-cell\">Number of Ports</th>\n      <th class=\"nd_center-cell\">Services</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"dns\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"ip\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"ports\" type=\"number\" value=\"1\"></td>\n      <td class=\"nd_center-cell\">\n        <span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <a class=\"nd_layer-three-link\" href=\"#\" rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Enable Arpnip\"><span class=\"badge\">3</span></a><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <input data-form=\"add\" name=\"layers\" type=\"hidden\" value=\"00000000\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') %]?q=[% row.ip | uri %]\">[% row.dns | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.ip | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"ports\" type=\"number\" value=\"[% row.port_count | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <a class=\"nd_layer-three-link\" href=\"#\" rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Enable Arpnip\"><span class=\"badge[% ' badge-success' IF row.layers.substr(5,1) %]\">3</span></a><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <input data-form=\"update\" name=\"layers\" type=\"hidden\" value=\"[% row.layers | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"dns\" type=\"hidden\" value=\"[% row.dns | html_entity %]\">\n        <input data-form=\"update\" name=\"ip\" type=\"hidden\" value=\"[% row.ip | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">\n                Pseudo-device &quot;[% row.dns | html_entity %] / [% row.ip | html_entity %]&quot; will be deleted.</p>\n            </blockquote>\n            <input data-form=\"delete\" name=\"device\" type=\"hidden\" value=\"[% row.ip | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ {\n        \"targets\": [ 2, 3 ],\n        \"orderable\": false,\n        \"searchable\": false\n      } ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n  $('.nd_layer-three-link').click(function() {\n    var badge = $(this).children('span').first();\n    var layers = $(this).parent().children('input').first();\n    $(badge).toggleClass('badge-success');\n    if ($(badge).hasClass('badge-success')) {\n      $(layers).attr('value', '00000100');\n    }\n    else {\n      $(layers).attr('value', '00000000');\n    }\n  });\n} );\n</script>\n\n", "[% IF results.count == 0 %]\n<div class=\"span3 alert alert-info\">The aren't enough jobs to report.</div>\n[% ELSE %]\n<table id=\"asd-data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Action</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Started</th>\n      <th class=\"nd_center-cell\">Finished</th>\n      <th class=\"nd_center-cell\">Time Elapsed</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = results.next) %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.action.ucfirst | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') %]?q=[% row.device | uri %]\">[% row.device | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.started  | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.finished | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.elapsed  | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n    $('#asd-data-table').dataTable({\n        \"paging\":   false,\n        \"searching\": false,\n        \"info\":     false,\n        \"order\": [[ 4, 'desc' ], [ 0, 'asc' ], [ 1, 'asc' ] ],\n        \"pageLength\": 12\n    });\n} );\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span4 alert alert-info\">No significant events to report.</div>\n[% ELSE %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Poller Host</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Device DNS</th>\n      <th class=\"nd_center-cell\">Failed Connections</th>\n      <th class=\"nd_center-cell\">Last Retry</th>\n      <th class=\"nd_center-cell\">Try Again</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.backend | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/search') %]?tab=node&q=[% row.device | uri %]\">[% row.device | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.dns | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.deferrals | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_defer | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"del\" name=\"backend\" type=\"hidden\" value=\"[% row.backend | html_entity %]\">\n        <input data-form=\"del\" name=\"device\"  type=\"hidden\" value=\"[% row.device  | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\">\n          <i class=\"icon-repeat text-success\"></i>\n        </button>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Left Device</th>\n      <th class=\"nd_center-cell\">Left Port</th>\n      <th class=\"nd_center-cell\">Right Device</th>\n      <th class=\"nd_center-cell\">Right Port</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_dev nd_topo_dev1\" name=\"dev1\" type=\"text\" value=\"[% params.dev1 | html_entity %]\">\n          <span class=\"add-on nd_topo_dev_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_port nd_topo_dev1\" name=\"port1\" type=\"text\" value=\"[% params.port1 | html_entity %]\">\n          <span class=\"add-on nd_topo_port_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_dev nd_topo_dev2\" name=\"dev2\"  type=\"text\">\n          <span class=\"add-on nd_topo_dev_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_port nd_topo_dev2\" name=\"port2\" type=\"text\">\n          <span class=\"add-on nd_topo_port_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\" href=\"[% uri_for('/device') %]?q=[% row.device1.ip | uri %]\">\n        [% (row.device1.dns || row.device1.name || row.device1.ip) | html_entity %]</a>\n      </td>\n      <td class=\"nd_center-cell\">[% row.port1 | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\" href=\"[% uri_for('/device') %]?q=[% row.device2.ip | uri %]\">\n        [% (row.device2.dns || row.device2.name || row.device2.ip) | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.port2 | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">The link between these two ports will be removed:</p>\n              <p>&nbsp;</p>\n            <ul>\n              <li><p class=\"text-info\">[% (row.device1.dns || row.device1.name || row.device1.ip) | html_entity %],&nbsp;\n                [% row.port1 | html_entity %]</p></li>\n              <li><p class=\"text-info\">[% (row.device2.dns || row.device2.name || row.device2.ip) | html_entity %],&nbsp;\n                [% row.port2 | html_entity %]</p></li>\n            </ul>\n            </blockquote>\n            <input data-form=\"del\" name=\"dev1\" type=\"hidden\" value=\"[% row.dev1 | html_entity %]\">\n            <input data-form=\"del\" name=\"port1\" type=\"hidden\" value=\"[% row.port1 | html_entity %]\">\n            <input data-form=\"del\" name=\"dev2\" type=\"hidden\" value=\"[% row.dev2 | html_entity %]\">\n            <input data-form=\"del\" name=\"port2\" type=\"hidden\" value=\"[% row.port2 | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ {\n        \"targets\": [ 4 ],\n        \"orderable\": false,\n        \"searchable\": false\n      } ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Observing Interface</th>\n      <th>Undiscovered Neighbor</th> \n      <th>Neighbor ID</th> \n      <th nowrap>Last Discovery</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    [% NEXT IF NOT row.remote_ip %]\n    <tr>\n      <td nowrap><a href=\"[% device_ports %]&q=[% row.ip | uri %]\">\n              [% row.dns || row.name || row.ip | html_entity %]</a><br>\n          <a href=\"[% device_ports %]&q=[% row.ip | uri %]&f=[% row.port | uri %]\">\n              [% row.port | html_entity %]</a>\n          [% IF row.port_description %]<br>[% row.port_description | html_entity %][% END %]\n          [% IF row.comment %]<br>&quot;<em>[% row.comment | html_entity %]</em>&quot;[% END %]\n      </td>\n      <td nowrap><a href=\"[% search_node %]&q=[% row.remote_ip | uri %]\">\n          [% row.remote_ip | html_entity %]</a><br>\n          [% row.remote_port | html_entity %]</td>\n      <td>[% row.remote_id | html_entity %]<br>\n          [% row.remote_type | remove('(?:(?:C|c)opyright\\s+)?\\(c\\).*') | remove('Technical Support: http://.*') | html_entity | html_line_break %]</td>\n      <td nowrap>[% row.finished | html_entity %]<br>[% row.log | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"order\": [[ 2, 'desc' ], [ 1, 'asc' ] ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "[% IF results.count == 0 %]\n<div class=\"span2 alert alert-info\">The user activity log is empty.</div>\n[% ELSE %]\n<table id=\"aul-data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Creation</th>\n      <th class=\"nd_center-cell\">User</th>\n      <th class=\"nd_center-cell\">User IP</th>\n      <th class=\"nd_center-cell\">Event</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#aul-data-table').dataTable( {\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/control/admin/userlog/data') %]\",\n    \"columns\": [{\n      \"data\": 'creation',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return moment(data).format('YYYY-MM-DD HH:mm');\n      }\n    }, {\n      \"data\": 'username',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'userip',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'event',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'entry',\n      \"className\": \"nd_center-cell\",\n      \"searchable\": false,\n      \"orderable\": false,\n      \"render\": function(data, type, row, meta) {\n        return '<input data-form=\"del\" name=\"entry\" type=\"hidden\" value=\"' + encodeURIComponent(data) + \n        '\"><button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\"><i class=\"icon-trash text-error\"></i></button>';\n      }\n    }\n  ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Full Name</th>\n      <th class=\"nd_center-cell\">Username</th>\n      <th class=\"nd_center-cell\">Password</th>\n      <th class=\"nd_center-cell\">LDAP Auth</th>\n      <th class=\"nd_center-cell\">RADIUS Auth</th>\n      <th class=\"nd_center-cell\">Port Control</th>\n      <th class=\"nd_center-cell\">Administrator</th>\n      <th class=\"nd_center-cell\">Created</th>\n      <th class=\"nd_center-cell\">Last Login</th>\n      <th class=\"nd_center-cell\">Note</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"fullname\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"username\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"password\" type=\"password\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"ldap\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"radius\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"port_control\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"admin\"></td>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"note\" type=\"text\"></td>\n      <td nowrap class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n\n    [% SET count = 0 %]\n    [% FOREACH row IN results %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"fullname\" type=\"text\" value=\"[% row.fullname | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"username\" type=\"text\" value=\"[% row.username | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"password\" type=\"password\" value=\"********\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"ldap\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.ldap %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"radius\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.radius %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"port_control\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.port_control %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"admin\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.admin %]>\n      </td>\n      <td class=\"nd_center-cell\">[% row.created   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_seen | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"note\" type=\"text\" value=\"[% row.note | html_entity %]\">\n      </td>\n\n      <td nowrap class=\"nd_center-cell\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">User &quot;[% row.username | html_entity %]&quot; will be deleted.</p>\n            </blockquote>\n            <input data-form=\"del\" name=\"username\" type=\"hidden\" value=\"[% row.username | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ \n      {\n        \"targets\": [ 2, 3, 4, 5, 6, 7, 8, 9 ],\n        \"searchable\": false\n      },\n      {\n        \"targets\": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ],\n        \"orderable\": false\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "\n    \"processing\": true\n    ,\"stateSave\": true\n    ,\"pageLength\": [% settings.table_pagesize %]\n    ,\"lengthMenu\": [% table_showrecordsmenu %]\n    ,\"dom\": '<\"top\"l<\"nd_datatables-pager\"p>f>rit<\"bottom\"><\"clear\">'\n    ,\"language\": {\n      \"search\": '_INPUT_'\n      ,\"searchPlaceholder\": 'Filter records...'\n      ,\"lengthMenu\": \"Show _MENU_ records.\"\n      ,\"info\":         \"&nbsp;Showing _START_ to _END_ of _TOTAL_\"\n      ,\"infoFiltered\": \"(filtered from _MAX_ total)\"\n      ,\"infoEmpty\":    \"&nbsp;No matching entries\"\n    }\n    ,\"stateSaveParams\": function (settings, data) {\n      // make sure filter is never saved\n      data.search.search = \"\";\n      // make sure paging position is not saved\n      data.start = 0;\n      [% IF is_custom_report %]\n      // disable sorting for custom reports\n      data.order = \"\";\n      [% END %]\n    }\n", "<table id=\"da-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Address</th>\n      <th>DNS</th>\n      <th class=\"nd_center-cell\">Interface</th>\n      <th>Description</th>\n      <th>Prefix</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#da-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'alias',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'dns',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'device_port.name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'subnet',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '&ip=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% SET user_can_port_control = user_has_role('port_control') %]\n<table class=\"table table-condensed table-striped\">\n  <tbody>\n    <tr>\n      <td>System Name</td>\n      <td>[% d.name %]</td>\n    </tr>\n    <tr>\n      <td>Location\n      [% IF user_can_port_control %]\n      <i class=\"icon-edit nd_edit-icon nd_device-details-edit\"></i>\n      [% END %]\n      </td>\n      [% IF user_can_port_control %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\"\n        data-field=\"location\" data-for-device=\"[% d.ip %]\">\n          [% d.location | html_entity %]\n      </td>\n      [% ELSE %]\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device %]&q=[% d.location | uri %]&location=[% d.location | uri %]\">[% d.location | html_entity %]</a>\n      </td>\n      [% END %]\n    </tr>\n    <tr>\n      <td>Contact\n      [% IF user_can_port_control %]\n      <i class=\"icon-edit nd_edit-icon nd_device-details-edit\"></i>\n      [% END %]\n      </td>\n      [% IF user_can_port_control %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\"\n        data-field=\"contact\" data-for-device=\"[% d.ip | html_entity %]\">\n          [% d.contact | html_entity %]\n      </td>\n      [% ELSE %]\n      <td>[% d.contact | html_entity %]</td>\n      [% END %]\n    </tr>\n    <tr>\n      <td>Vendor / Model</td>\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device %]&q=[% d.vendor | uri %]&vendor=[% d.vendor | uri %]\">[% d.vendor | html_entity %]</a>\n        /\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device %]&q=[% d.model | uri %]&model=[% d.model | uri %]\">[% d.model | html_entity %]</a>\n      </td>\n    </tr>\n    <tr>\n      <td>OS / Version</td>\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device %]&q=[% d.os | uri %]&os=[% d.os | uri %]\">[% d.os | html_entity %]</a>\n        /\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device %]&q=[% d.os_ver | uri %]&os_ver=[% d.os_ver | uri %]\">[% d.os_ver | html_entity %]</a>\n      </td>\n    </tr>\n    <tr>\n      <td>Serial Number</td>\n      <td>[% d.serial | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Description</td>\n      <td>[% d.description | html_entity | html_line_break %]</td>\n    </tr>\n    [% IF settings._extra_device_details.size %]\n    [% FOREACH config IN settings._extra_device_details %]\n    <tr>\n      <td>\n          [% config.label %]\n      </td>\n      <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_details.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n      </td>\n    </tr>\n    [% END %]\n    [% END %]\n    <tr>\n      <td>Administration</td>\n      <td>\n        <a href=\"ssh://[% d.ip | uri %]\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-keyboard\"></i> SSH</span></a>\n        <a href=\"telnet://[% d.ip | uri %]\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-keyboard\"></i> Telnet</span></a>\n        <a href=\"https://[% d.ip | uri %]/\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-external-link\"></i> Web</span></a>\n      </td>\n    </tr>\n    <tr>\n      <td>SNMP Class</td>\n      <td><a target=\"_blank\" href=\"https://metacpan.org/pod/[% d.snmp_class | uri %]\">[% d.snmp_class | html_entity %]</a></td>\n    </tr>\n    <tr>\n      <td>Uptime</td>\n      <td>[% d.uptime_age | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Layers</td>\n      <td>\n        [% d.layers.substr(7,1) ? '<span class=\"badge badge-success\">1</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(6,1) ? '<span class=\"badge badge-success\">2</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(5,1) ? '<span class=\"badge badge-success\">3</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(4,1) ? '<span class=\"badge badge-success\">4</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(3,1) ? '<span class=\"badge badge-success\">5</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(2,1) ? '<span class=\"badge badge-success\">6</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n        [% d.layers.substr(1,1) ? '<span class=\"badge badge-success\">7</span>' : '<span class=\"badge\">&nbsp;</span>' %]\n      </td>\n    </tr>\n    <tr>\n      <td>Last Discover</td>\n      <td>[% d.last_discover_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Last Arpnip</td>\n      <td>[% d.last_arpnip_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Last Macsuck</td>\n      <td>[% d.last_macsuck_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Hardware Status</td>\n      <td>Fan: [% d.fan | html_entity %]\n        <br/>PS1 [[% d.ps1_type | html_entity %]]: [% d.ps1_status | html_entity %]\n        <br/>PS2 [[% d.ps2_type | html_entity %]]: [% d.ps2_status | html_entity %]</td>\n    </tr>\n    [% IF p.size %]\n    <tr>\n      <td>PoE Status</td>\n      <td>\n      [% FOREACH m IN p %]\n        [% UNLESS m.module == 1 %]\n          <br/>\n        [% END %]\n        Module [% m.module %]: [% m.status | html_entity %], [% m.poe_capable_ports %] power-capable ports, [% m.poe_powered_ports %] powered ([% m.poe_disabled_ports %] admin disabled, [% m.poe_errored_ports %] errors), [% m.poe_power_committed %]/[% m.power %] watts committed.\n      [% END %]\n      </td>\n    </tr>\n    [% END %]\n    <tr>\n      <td>MAC Address</td>\n      <td>[% d.mac | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>VTP Domain</td>\n      <td>[% d.vtp_domain | html_entity %]</td>\n    </tr>\n    [% IF user_has_role('admin') %]\n    <tr data-for-device=\"[% d.ip %]\">\n      <td>Admin Tasks</td>\n      <td>\n        <input type=\"hidden\" data-form=\"discover\" value=\"[% d.ip %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"discover\">Discover</button>\n        <input type=\"hidden\" data-form=\"arpnip\" value=\"[% d.ip %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"arpnip\">Arpnip</button>\n        <input type=\"hidden\" data-form=\"macsuck\" value=\"[% d.ip %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"macsuck\">Macsuck</button>\n        <input type=\"hidden\" data-form=\"nbtstat\" value=\"[% d.ip %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"nbtstat\">NBTstat</button>\n\n        <button class=\"btn btn-danger btn-small pull-right\"\n          data-toggle=\"modal\" data-target=\"#nd_devdel\" type=\"button\">Delete</button>\n\n        <div id=\"nd_devdel\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label\">Confirm Delete: [% d.dns || d.ip | html_entity %]</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <ul>\n                <li><p>This action is immediate and not reversible</p></li>\n                <li><p>All associated Nodes may be removed from the database</p></li>\n              </ul>\n            </blockquote>\n            <textarea id=\"nd_devdel-log\" class=\"input-block-level\" rows=\"2\" data-form=\"delete\"\n              placeholder=\"Enter a log message\" name=\"log\"></textarea>\n            <label class=\"checkbox\">\n              <input id=\"nd_devdel-archive\" type=\"checkbox\" data-form=\"delete\" name=\"archive\">\n              <h4 class=\"nd_unbolden\">Archive Nodes</h4>\n            </label>\n            <input type=\"hidden\" data-form=\"delete\" value=\"[% d.ip %]\" name=\"device\"/>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n", "[% BLOCK recurse -%]\n[% INCLUDE print_line item=item %]\n  [% IF nodes.$item.children.defined -%]\n  <ul>\n  [% FOREACH kidtype IN nodes.$item.children.keys -%]\n    [%- FOREACH kid IN nodes.$item.children.$kidtype -%]\n      [%- IF kid -%]\n        [% INCLUDE recurse item=kid %]\n      [%- END -%]\n    [%- END -%]\n  [%- END -%]\n  </ul>\n  [% END -%]\n  </li>\n[%- END -%]\n[% BLOCK print_line -%]\n<li>\n[% IF nodes.$item.children.defined -%]\n<span><i class=\"icon-minus-sign text-info\"></i>&nbsp;\n[%- ELSE -%]\n<span><i class=\"icon-leaf\"></i>&nbsp;\n[%- END -%]\n <a href=\"[% uri_for('/report/moduleinventory') %]?description=[% nodes.$item.module.description | uri %]\">[% nodes.$item.module.description -%]</a>\n[%- IF nodes.$item.module.name -%]\n <a href=\"[% uri_for('/report/moduleinventory') %]?name=[% nodes.$item.module.name | uri %]\">([% nodes.$item.module.name %])</a>\n[%- END -%]\n[%- IF nodes.$item.module.fw_ver -%]\n fw: [% nodes.$item.module.fw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.hw_ver -%]\n hw: [% nodes.$item.module.hw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.sw_ver -%]\n sw: [% nodes.$item.module.sw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.serial -%]\n <a href=\"[% uri_for('/report/moduleinventory') %]?serial=[% nodes.$item.module.serial | uri %]\">[serial: [% nodes.$item.module.serial %]]</a>\n[%- END -%]\n[%- IF nodes.$item.module.type -%]\n / <a href=\"[% uri_for('/report/moduleinventory') %]?type=[% nodes.$item.module.type | uri %]\">[% nodes.$item.module.type %]</a>\n[%- END -%]\n[%- IF nodes.$item.module.model -%]\n / <a href=\"[% uri_for('/report/moduleinventory') %]?model=[% nodes.$item.module.model | uri %]\">[% nodes.$item.module.model %]</a>\n[%- END -%]\n[%- IF nodes.$item.module.fru -%]\n <b>[FRU]</b>\n[%- END -%]\n</span>\n[%- END -%]\n<div class=\"tree\">\n<ul>\n[% FOREACH module IN nodes.root %]\n  [% INCLUDE recurse item=module %]\n[%- END -%]\n</ul>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/bootstrap-tree.js' -%]\n</script>\n", "<div id=\"netmap_pane_tooltip\" class=\"net_gobrechts_d3_force_tooltip\" style=\"top: 0px; left: 0px;\"></div>\n<script>\n\n// ***********************************************\n// ************ retrieve network map *************\n// ***********************************************\n\n$.getJSON('[% uri_for('/ajax/data/device/netmap') %]?[% my_query %]', function(mapdata) {\n\n  jQuery(document).ready(function() {\n    window.graph = netGobrechtsD3Force('netmap_pane')\n      // .debug(true)\n      .width( parseInt(jQuery('#netmap_pane').parent().css('width')) )\n      .height( window.innerHeight - 100 )\n      .showSelfLinks(true)\n      .wrapLabels(true)\n      .lassoMode(true)\n      .dragMode(true)\n      .zoomMode(true)\n      .pinMode(true)\n      [% '.showLegend(false)' UNLESS (params.colorby == 'hgroup' OR params.colorby == 'lgroup') %]\n      .showLinkDirection(false)\n      .colorScheme('color10')\n      //.preventLabelOverlappingOnForceEnd(\n      //  (mapdata['newnodes'] && ('[% params.mapshow %]' == 'neighbors'))\n      //  ? true : false\n      //)\n      .nodeEventToStopPinMode('none')\n      .showTooltips(true)\n      .tooltipPosition('svgTopLeft')\n      .nodeEventToOpenLink('dblclick')\n      .nodeLinkTarget('none')\n      .minNodeRadius(4)\n      .maxNodeRadius(4 + (mapdata['numsizes'] || 0))\n      .minZoomFactor(0.1)\n      .maxZoomFactor(10)\n      .labelDistance(2)\n      .linkDistance(120)\n      .charge(-550)\n      .gravity(0.3);\n\n    graph['nd2'] = {};\n    graph['nd2']['centernode'] = mapdata['centernode'];\n    graph['nd2']['dragging'] = false;\n\n    // ***************************************\n    // *********** fullscreen icon ***********\n    // ***************************************\n\n    graph.inspect().dom.svg\n      .append(\"g\")\n      .attr(\"id\", \"nd2_netmap-fullscreen-container\")\n      .attr(\"transform\", \"translate(\" + (graph.width() - 17) + \",17)\")\n      .append(\"svg:text\")\n      .attr(\"id\", \"nd2_netmap-fullscreen\")\n      .attr(\"class\", \"link\")\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"font-family\", \"FontAwesome\")\n      .text('\\uf065')\n      .on(\"click\", function() {\n        requestFullScreen(document.getElementById('netmap_pane'));\n      });\n\n    // **************************************************\n    // *********** force running spinner icon ***********\n    // **************************************************\n\n    graph.inspect().dom.svg\n      .append(\"g\")\n      .attr(\"id\", \"nd2_netmap-spinner-container\")\n      .attr(\"transform\", \"translate(\" + (graph.width() - 15) + \",\" + (graph.height() - 15) + \")\")\n      .append(\"path\")\n      .attr(\"id\", \"nd2_netmap-spinner\");\n\n    graph.inspect().main.force.on('start.nd2spinner', function() {\n      d3.select(\"#nd2_netmap-spinner\").call(spin);\n    });\n\n    // ****************************************************\n    // *********** link labels that track links ***********\n    // ****************************************************\n\n    graph.inspect().main.force.on('tick.movelinklabel', function() {\n      graph.inspect().dom.svg.selectAll('text.nd_netmap-linklabel')\n        .attr('x', function(d) {\n          var sx = graph.nodeDataById($(this).attr('data-source'));\n          var tx = graph.nodeDataById($(this).attr('data-target'));\n          if (!(sx && tx)) { return 0 }\n          return ((sx.x + tx.x) / 2);\n        })\n        .attr('y', function(d) {\n          var sy = graph.nodeDataById($(this).attr('data-source'));\n          var ty = graph.nodeDataById($(this).attr('data-target'));\n          if (!(sy && ty)) { return 0 }\n          return ((sy.y + ty.y) / 2);\n        });\n    });\n\n    graph.inspect().main.force.on('start.movelinklabel', function() {\n      mapdata['data']['links'].forEach(function(link) {\n        graph.inspect().dom.svg.select('g.graph')\n          .append('svg:text')\n          .attr('class', 'nd_netmap-linklabel')\n          .attr('data-source', link['FROMID'])\n          .attr('data-target', link['TOID'])\n          .attr('text-anchor', 'middle')\n          [% \".attr('fill', 'black')\" IF params.showspeed %]\n          .text(link['SPEED']);\n      });\n\n      graph.inspect().main.force.on('start.movelinklabel', null);\n    });\n\n    // **********************************************************\n    // ********* node lasso and group-dragging support **********\n    // **********************************************************\n\n    graph.inspect().main.force.on('start.draggednode', function() {\n      graph.inspect().main.nodes.on('mousedown.dragall', function(n) {\n        if (this.nodeName !== 'circle') { return }\n        graph['nd2']['dragging'] = true;\n        graph['nd2']['dragStartX'] = n.x;\n        graph['nd2']['dragStartY'] = n.y;\n        graph['nd2']['draggedNode'] = n.index;\n        console.log(graph['nd2']);\n      });\n\n      graph.inspect().main.nodes.on('mousemove.dragall', function(draggedNode) {\n        var evt = window.event;\n        if (!(\"buttons\" in evt) || (evt.buttons !== 1)) { return }\n        if (!(graph['nd2']['dragging']) || !(graph['nd2']['draggedNode'])) { return }\n        if (draggedNode.index !== graph['nd2']['draggedNode']) { return }\n\n        var dx = (draggedNode.x - graph['nd2']['dragStartX']),\n            dy = (draggedNode.y - graph['nd2']['dragStartY']);\n        graph['nd2']['dragStartX'] += dx;\n        graph['nd2']['dragStartY'] += dy;\n\n        graph.inspect().main.nodes\n          .filter(function(n) { return (n.selected && (n.index !== draggedNode.index)) })\n          .each(function(n) {\n              n.x += dx; n.y += dy;\n              n.px += dx; n.py += dy;\n          });\n      });\n\n      graph.inspect().main.nodes.on('mouseup.dragall', function(n) {\n        graph['nd2']['dragging'] = false;\n      });\n\n      graph.inspect().main.force.on('start.draggednode', null);\n    });\n\n    // *****************************\n    // ********* DO IT!! ***********\n    // *****************************\n\n    graph.start(mapdata);\n\n    // about a second after render starts, zoom in a bit\n    if ('[% params.mapshow %]' == 'neighbors') {\n      setTimeout(function() {\n        //if ('[% params.dynamicsize %]' == 'on') {\n        //  graph.zoomToFit();\n        //} else {\n          var node = graph.nodeDataById( graph['nd2']['centernode'] );\n          graph.zoomSmooth(node.x, node.y, node.radius * 125);\n        //}\n      }, 1500);\n    }\n  }); // document.onReady\n\n}); // getJSON\n\n// ***********************************************\n// ******** force engine status spinner  *********\n// ***********************************************\n\nvar radius = 12;\nvar tau = 2 * Math.PI;\n\nvar arc = d3.svg.arc()\n  .innerRadius(radius * 0.5)\n  .outerRadius(radius * 0.8)\n  .startAngle(0)\n  .endAngle(0.33 * tau);\n\nvar circle = d3.svg.arc()\n  .innerRadius(radius * 0.5)\n  .outerRadius(radius * 0.8)\n  .startAngle(0)\n  .endAngle(tau);\n\nfunction spin(selection, duration) {\n  duration = duration || 1500;\n  if (! graph.inspect().status.forceRunning) {\n    d3.select('#nd2_netmap-spinner').style('fill', '#CCFFCC').attr('d', circle);\n    saveMapPositions();\n    return;\n  }\n  d3.select('#nd2_netmap-spinner').style('fill', '#FFE4B5').attr('d', arc);\n  selection.transition()\n    .ease(\"linear\")\n    .duration(duration)\n    .attrTween(\"transform\", function() {\n        return d3.interpolateString(\"rotate(0)\", \"rotate(360)\");\n    });\n  setTimeout(function() { spin(selection, duration); }, duration);\n}\n\n// ********************************************************\n// ********* save new node positions back to DB ***********\n// ********************************************************\n\nfunction saveMapPositions() {\n  graph.inspect().main.nodes.each(function(n) { n.fixed = true });\n  $.post(\n    '[% uri_for('/ajax/data/device/netmappositions') %]'\n    ,$(\"#nd_vlan-entry, #nd_hgroup-select, #nd_lgroup-select, #nq, input[name='mapshow']\").serialize()\n      + '&positions=' + JSON.stringify(graph.positions())\n  );\n  // toastr.success('Saved map positions.');\n}\n\n// ***********************************************\n// ************ full screen handling *************\n// ***********************************************\n\nfunction isFullScreen() {\n  return (document.webkitFullscreenElement || document.mozFullScreenElement || document.fullscreenElement);\n}\n\nfunction requestFullScreen(elt) {\n  if (isFullScreen()) {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n  }\n  else {\n    if (elt.requestFullscreen) {\n      elt.requestFullscreen();\n    } else if (elt.msRequestFullscreen) {\n      elt.msRequestFullscreen();\n    } else if (elt.mozRequestFullScreen) {\n      elt.mozRequestFullScreen();\n    } else if (elt.webkitRequestFullscreen) {\n      elt.webkitRequestFullscreen();\n    }\n  }\n}\n\n$(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function() {\n  resizeGraphContainer();\n  $('#nd2_netmap-fullscreen').text(function() {\n    return (isFullScreen() ? '\\uf066' : '\\uf065');\n  });\n});\n\n// **************************************************\n// ************ react to sidebar in/out *************\n// **************************************************\n\n// custom resize function as there is no event to fire and we need\n// to react to the sidebar.\nfunction resizeGraphContainer() {\n  setTimeout(function(){\n    var netmap_pane = jQuery('#netmap_pane');\n    graph.width( parseInt(netmap_pane.parent().css('width')) ).resume();\n    graph.height( window.innerHeight - 100 ).resume();\n    d3.select(\"#nd2_netmap-spinner-container\").attr(\"transform\",\n      \"translate(\" + (graph.width() - 15) + \",\" + (graph.height() - 15) + \")\");\n    d3.select(\"#nd2_netmap-fullscreen-container\").attr(\"transform\",\n      \"translate(\" + (graph.width() - 17) + \",17)\");\n  }, 500)\n}\n\n$('#nd_sidebar-toggle-img-in').on(\"click\", resizeGraphContainer);\n$('#nd_sidebar-toggle-img-out').on(\"click\", resizeGraphContainer);\n$(window).on(\"resize\", resizeGraphContainer);\n\n// vim: ft=javascript\n</script>\n", "[% SET user_can_port_control = user_has_role('port_control') %]\n<table id=\"dp-data-table\" class=\"table table-bordered table-striped\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th></th>\n      [% FOREACH item IN settings.port_columns %]\n      [% NEXT IF item.name == 'c_admin' %]\n      [% NEXT IF item.name == 'c_nodes' AND params.c_nodes AND params.c_neighbors %]\n        [% NEXT UNLESS params.${item.name} %]\n        [% SET th_class = '' %]\n        [% IF (item.name == 'c_port' OR item.name == 'c_descr' OR item.name == 'c_name') %]\n          [% th_class = ' class=\"portsort\"' %]\n        [% END %]\n        <th[% th_class %]>\n          [% IF item.name == 'c_neighbors' %]\n          [% IF params.c_nodes %]\n          Connected Nodes &amp; Devices\n          [% ELSE %]\n          Connected Devices\n          [% END %]\n          [% ELSE %]\n          [% item.label | html_entity %]\n          [% END %]\n        </th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    [% SET portname = row.port %]\n    <tr>\n      <td class=\"nd_center-cell nd_devport-icon\">\n        [% IF row.up_admin != 'up' %]\n        <i class=\"icon-remove icon-large\"></i>\n        [% ELSIF row.up == 'up' AND row.stp == 'blocking' AND vlans.$portname.vlan_count < 2 %]\n        <i class=\"icon-ban-circle text-info icon-large\"></i>\n        [% ELSIF row.error_disable_cause %]\n        <i class=\"icon-exclamation-sign text-error icon-large\"></i>\n        [% ELSIF row.has_column_loaded('is_free') AND row.is_free %]\n        <i class=\"icon-circle-arrow-down text-success icon-large\"></i>\n        [% ELSIF row.up_admin == 'up' AND (row.up != 'up' AND row.up != 'dormant') %]\n          [% IF params.port_state == 'free' %]\n          <i class=\"icon-circle-arrow-down text-success icon-large\"></i>\n          [% ELSE %]\n          <i class=\"icon-arrow-down text-error icon-large\"></i>\n          [% END %]\n        [% ELSE %]\n        <i class=\"icon-angle-up text-success icon-large\"></i>\n        [% END %]\n        [% IF row.slave_of %]<br/>\n          [% IF row.get_column('agg_master_up_admin') != 'up' %]\n            <small><i class=\"icon-group muted\"></i></small>\n          [% ELSIF row.get_column('agg_master_up') == 'up' %]\n            <small><i class=\"icon-group text-success\"></i></small>\n          [% ELSE %]\n            <small><i class=\"icon-group text-error\"></i></small>\n          [% END %]\n        [% END %]\n      </td>\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'left' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n\n      [% IF params.c_port %]\n      [% IF user_can_port_control AND params.c_admin %]\n      [% IF row.up_admin == 'up' %]\n      <td nowrap class=\"nd_editable-cell\" data-action=\"down\"\n        data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\"\n        data-field=\"c_port\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      [% ELSE %]\n      <td nowrap class=\"nd_editable-cell\" data-action=\"up\"\n        data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\"\n        data-field=\"c_port\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      [% END %]\n      [% ELSE %]\n      <td nowrap data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\">\n      [% END %]\n        <a class=\"nd_log-icon\"\n          href=\"[% uri_for('/report/portlog') %]?q=[% device.ip | uri %]&f=[% row.port | uri %]\">\n          <i class=\"icon-file-text-alt\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"View Port Log\"></i>\n        </a>\n      [% IF user_can_port_control AND params.c_admin %]\n      [% IF row.up_admin == 'up' %]\n        <span class=\"nd_hand-icon\">\n          <i class=\"icon-bullseye\" data-action=\"bounce\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Bounce Port\"></i>\n          <i class=\"icon-hand-down\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Disable Port\"></i>\n        </span>\n      [% ELSE %]\n        <span class=\"nd_hand-icon\">\n          <i class=\"icon-bullseye\" data-action=\"bounce\" style=\"display: none\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Bounce Port\"></i>\n          <i class=\"icon-hand-up\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Enable Port\"></i>\n        </span>\n      [% END %]\n      [% END %]\n        <a class=\"nd_this-port-only nd_port-only-first\" href=\"[% device_ports %]&q=[% params.q | uri %]&f=[% row.port | uri %]&prefer=port\">\n          [% IF row.is_master %]\n            <small><i class=\"icon-group muted\"></i></small>&nbsp;\n          [% END %]\n        [% row.port | html_entity %]</a>\n        [% IF row.slave_of %]<br/>\n          <a class=\"nd_this-port-only\" href=\"[% device_ports %]&q=[% params.q | uri %]&f=[% row.slave_of | uri %]&prefer=port\">\n          [% row.slave_of | html_entity %]</a>\n        [% END %]\n      </td>\n      [% END %]\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'mid' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n\n      [% IF params.c_descr %]\n      <td nowrap>[% row.descr | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_comment %]\n      <td nowrap>[% row.last_comment | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_type %]\n      <td>[% row.type | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_duplex %]\n      <td>\n        [% IF row.up == 'up' AND row.duplex %]\n        [% (row.duplex_admin.ucfirst || 'Auto') | html_entity %] / [% row.duplex.ucfirst | html_entity %]\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_lastchange %]\n      <td>[% row.lastchange_stamp | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_name %]\n      [% IF user_can_port_control AND params.c_admin %]\n      <td nowrap class=\"nd_editable-cell\" contenteditable=\"true\"\n          data-field=\"c_name\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      <i class=\"icon-edit nd_edit-icon\"></i>\n      [% ELSE %]\n      <td nowrap class=\"nd_editable-cell\">\n      [% END %]\n      <div class=\"nd_editable-cell-content\">\n        [% row.name | html_entity %]\n      </div>\n      </td>\n      [% END %]\n\n      [% IF params.c_speed %]\n      <td>[% row.speed | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_speed_admin %]\n      <td>[% row.speed_admin | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_error %]\n      <td>[% row.error_disable_cause | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_mac %]\n      <td>[% row.mac | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_mtu %]\n      <td>[% row.mtu | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_pvid %]\n      [% IF user_can_port_control AND params.c_admin %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\" data-default=\"[% row.vlan | html_entity %]\"\n        data-field=\"c_pvid\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      <i class=\"icon-edit nd_edit-icon\"></i>\n      <div class=\"nd_editable-cell-content\">\n        [% IF row.vlan AND row.vlan > 0 %][% row.vlan | html_entity %][% END %]\n      </div>\n      </td>\n      [% ELSE %]\n      <td>\n        [% IF row.vlan AND row.vlan > 0 %]\n        <a class=\"nd_linkcell\"\n          href=\"[% uri_for('/search') %]?tab=vlan&q=[% row.vlan | uri %]\">\n            [% row.vlan | html_entity %]</a>\n        [% END %]\n      </td>\n      [% END %]\n      [% END %]\n\n      [% IF params.c_vmember %]\n      <td>\n        [% IF vlans.$portname.vlan_count <= settings.devport_vlan_limit %]\n          [% SET vlan_count = vlans.$portname.vlan_count %]\n          [% SET output = '' %]\n          [% FOREACH vlan IN vlans.$portname.vlan_set.nsort %]\n            [% IF vlan == 0 %][% SET vlan_count = (vlan_count - 1) %][% NEXT %][% END %]\n            [% SET output = output _\n              '<a href=\"' _ uri_for('/search') _ '?tab=vlan&q=' _ vlan _ '\">' _ vlan _ '</a>' %]\n            [% SET output = output _ ', ' IF NOT loop.last %]\n          [% END %]\n          [% IF vlan_count > 10 %] [%# TODO make this a settable variable %]\n            [% SET output = '<div class=\"nd_vlan-total\">(' _ vlan_count\n              _ ')</div><span class=\"nd_linkcell nd_collapse-vlans\">\n                <div class=\"nd_arrow-up-down-left icon-chevron-up icon-large\"></div>Show VLANs</span>\n                <div class=\"nd_collapsing nd_collapse-pre-hidden\">' _ output %]\n            [% SET output = output _ '</div>' %]\n          [% END %]\n          [% output %]\n        [% ELSE %]\n        <i class=\"icon-asterisk text-warning\"></i> ([% vlans.$portname.vlan_count %] is too many to list)\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_power %]\n        [% IF row.power %]\n          [% IF row.power.admin == 'true' %]\n            [% IF user_can_port_control AND params.c_admin %]\n              <td nowrap data-action=\"false\"\n                data-field=\"c_power\" data-for-device=\"[% device.ip | html_entity %]\"\n                data-for-port=\"[% row.port | html_entity %]\">\n\n                <i class=\"icon-off nd_power-icon nd_power-on\"\n                  rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n                  data-animation=\"\" data-title=\"Disable Power\"></i>\n            [% ELSE %]\n              <td nowrap>\n                <i class=\"icon-off nd_power-on\"></i>\n            [% END %]\n                <span>\n                [% IF row.power.power AND row.power.power > 0 %]\n                  [% row.power.power | html_entity %]&nbsp;mW\n                [% ELSE %]\n                  ([% row.power.status | html_entity %])\n                [% END %]\n                </span>\n          [% ELSE %]\n            [% IF user_can_port_control AND params.c_admin %]\n              <td nowrap data-action=\"true\"\n                data-field=\"c_power\" data-for-device=\"[% device.ip | html_entity %]\"\n                data-for-port=\"[% row.port | html_entity %]\">\n\n                <i class=\"icon-off nd_power-icon\"\n                  rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n                  data-animation=\"\" data-title=\"Enable Power\"></i>\n            [% ELSE %]\n              <td>\n                <i class=\"icon-off\"></i>\n            [% END %]\n          [% END %]\n              </td>\n        [% ELSE %]\n          <td></td>\n        [% END %]\n      [% END %]\n\n      [% IF params.c_ssid %]\n      <td>[% row.ssid.ssid | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_nodes OR params.c_neighbors %]\n      <td>\n        [% IF params.c_neighbors AND (row.remote_ip OR row.is_uplink) %]\n          [% IF row.get_column('neighbor_ip') %]\n            <i class=\"icon-link[% ' text-warning' IF row.manual_topo %]\"></i>\n            [% IF row.remote_is_phone %]\n              <i class=\"icon-phone\"></i>&nbsp;\n            [% ELSIF row.remote_is_wap %]\n              <i class=\"icon-rss\"></i>&nbsp;\n            [% END %]\n            <a href=\"[% device_ports %]&q=[% row.get_column('neighbor_ip') | uri %]\">\n                [% row.get_column('neighbor_dns').remove(settings.domain_suffix) || row.get_column('neighbor_ip') | html_entity %]</a>\n            [% IF row.remote_port and has_snmp(row.remote_type) %]\n                -\n                <a href=\"[% device_ports %]&q=[% row.get_column('neighbor_ip') | uri %]&f=[% row.remote_port | uri %]&prefer=port\">\n                    [% row.remote_port | html_entity %]</a>\n            [% END %]\n            <br/>\n            [% IF params.n_inventory and row.remote_inventory %]\n              [% row.remote_inventory %]<br/>\n            [% END %]\n            [% IF params.n_detailed_inventory and (row.remote_id or row.remote_type) %]\n              ([% 'id: '_ row.remote_id IF row.remote_id %]\n              [% ' type: '_ row.remote_type IF row.remote_type %])<br/>\n            [% END %]\n          [% ELSIF row.remote_ip %]\n            [% '<i class=\"icon-unlink text-error\"></i>&nbsp;' IF has_snmp(row.remote_type) %]\n            [% IF row.remote_is_phone %]\n              <i class=\"icon-phone\"></i>&nbsp;\n            [% ELSIF row.remote_is_wap %]\n              <i class=\"icon-rss\"></i>&nbsp;\n            [% END %]\n            <a href=\"[% search_node %]&q=[% row.remote_ip | uri %]\">\n              [% row.remote_ip | html_entity %]\n              [% IF row.remote_port and has_snmp(row.remote_type) %]\n                - [% row.remote_port | html_entity %]\n              [% END %]\n            </a><br/>\n            [% IF params.n_inventory and row.remote_inventory %]\n              [% row.remote_inventory %]<br/>\n            [% END %]\n            [% IF params.n_detailed_inventory and (row.remote_id or row.remote_type) %]\n              ([% 'id: '_ row.remote_id IF row.remote_id %]\n              [% ' type: '_ row.remote_type IF row.remote_type %])<br/>\n            [% END %]\n          [% ELSE %]\n            [% '<i class=\"icon-unlink text-error\"></i>&nbsp; (possible uplink)' IF has_snmp(row.remote_type) %]\n          [% END %]\n        [% END %]\n        [% IF params.c_nodes %]\n        [% FOREACH node IN row.$nodes %]\n          [% '<br/>' IF (row.remote_ip OR row.is_uplink) OR NOT loop.first %]\n          [% '<i class=\"icon-book\"></i>&nbsp; ' IF NOT node.active %]\n          [% '<i class=\"icon-signal\"></i>&nbsp;' IF node.wireless.defined %]\n          <a href=\"[% search_node %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n            [% node.net_mac.$mac_format_call | html_entity %]</a>\n          [% IF (node.vlan > 0) && (node.vlan != row.vlan) %]\n            (on vlan [% node.vlan | html_entity %])\n          [% END %]            \n          [% IF params.n_ssid AND node.wireless.defined %]\n            (SSID:\n            [% FOREACH wlan IN node.wireless %]\n              <a href=\"[%+ uri_for('/report/portssid') %]?ssid=[% wlan.ssid | uri %]\">[% wlan.ssid | html_entity %]</a>\n            [% END %]\n            )\n          [% END %]\n          [% IF params.n_vendor AND node.oui.defined %]\n            (Vendor:\n            [% FOREACH oui IN node.oui %]\n              <a href=\"[%+ uri_for('/report/nodevendor') %]?vendor=[% oui.abbrev | uri %]\">[% oui.abbrev | html_entity %]</a>\n            [% END %]\n            )\n          [% END %]\n          [% ' (' _ node.time_last_age _ ')' IF params.n_age %]\n          [% IF params.n_ip4 OR params.n_ip6 %]\n            [% FOREACH ip IN node.$ips %]\n            <br/>&nbsp; [% '<i class=\"icon-book\"></i>&nbsp; ' IF NOT ip.active %]\n              [% SET dns = ip.dns %]\n              [% IF dns %]\n              <a href=\"[% search_node %]&q=[% ip.ip | uri %]\">[% dns %] ([% ip.ip | html_entity %])</a>\n              [% ELSE %]\n              <a href=\"[% search_node %]&q=[% ip.ip | uri %]\">[% ip.ip | html_entity %]</a>\n              [% END %]\n            [% END %]\n          [% END %]\n          [% IF params.n_netbios %]\n            [% FOREACH nbt IN node.netbios %]\n            <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\\<a href=\"[% uri_for('/report/netbios') %]?domain=[% nbt.domain | uri %]\" title=\"Nodes in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n            <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n            [% END %]\n          [% END %]\n        [% END %]\n        [% END %]\n        [% IF user_can_port_control AND params.c_admin %]\n        <a class=\"nd_log-icon\"\n          href=\"[% uri_for('/admin/topology') %]?dev1=[% device.ip | uri %]&port1=[% row.port | uri %]\">\n          <i class=\"icon-link text-warning\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Manual Topology\"></i>\n        </a>\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_stp %]\n      <td>[% row.stp | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_up %]\n      <td>\n        [% row.up_admin.ucfirst | html_entity %] / [% row.up.ucfirst | html_entity %]\n      </td>\n      [% END %]\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'right' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n[% IF user_can_port_control %]\n<div id=\"nd_portlog\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n    role=\"dialog\" aria-hidden=\"true\">\n  <div class=\"modal-body\">\n    <blockquote>\n      <ul><li><p>Please provide a reason for changing the Port Configuration</p></li></ul>\n    </blockquote>\n    <select id=\"nd_portlog-reason\" class=\"input-block-level\" name=\"reason\">\n      [% FOREACH pair IN settings.port_control_reasons.pairs %]\n        <option[% ' selected=\"selected\"' IF pair.key == 'other' %] value=\"[% pair.key | html_entity %]\">\n          [% pair.value | html_entity %]</option>\n      [% END %]\n    </select>\n    <textarea id=\"nd_portlog-log\" class=\"input-block-level\" rows=\"2\" name=\"log\"\n      placeholder=\"Enter a log message\"></textarea>\n  </div>\n  <div class=\"modal-footer\">\n    <button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n    <button id=\"nd_portlog-submit\" class=\"btn btn-info\" data-dismiss=\"modal\">Continue</button>\n  </div>\n</div>\n[% END %]\n\n<script>\n$(document).ready(function() {\n    $('#dp-data-table').dataTable({\n        \"columnDefs\": [\n            { \"sortable\": false, \"targets\": 0 },\n            { \"searchable\": false, \"targets\": 0 },\n            { \"type\": 'portsort', \"targets\": [ 'portsort' ] }\n        ],\n        \"order\": [[ 1, 'asc' ]],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN ID</th>\n      <th>VLAN Name</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Channel</th>\n      <th>Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 1, \"desc\" ]],\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'channel'\n      }, {\n        \"data\": 'ch_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Model</th>\n      <th>Location</th>\n      <th>Port</th>\n      <th>SSID</th>\n      <th>Node Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 5, \"desc\" ]],\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% uri_for('/device') %]?tab=details&q=' + encodeURIComponent(row.ip) + '\">'\n            + he.encode(row.dns || row.name || row.ip) + '</a>' :\n          data;\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ssid',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'mac_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP</th>\n      <th>DNS</th>\n      <th>Device</th>\n      <th>Port</th>            \n      <th>Name</th>\n      <th>Description</th>\n      <th class=\"nd_center-cell\">Channel</th>\n      <th class=\"nd_center-cell\">Tx Power (mW/dBm)</th>\n    </tr>\n  </thead>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\nfunction groupString(d) {\n    \"use strict\";\n    var s = '';\n    s = s + 'Device: ';\n    s = s + '<a href=\"[% uri_for('/device') %]?tab=details&q=' + encodeURIComponent(d.ip) + '\">';\n    s = s + he.encode(d.dns || d.device_name || d.ip);\n    if (d.dns || d.device_name) {\n        s = s + ' (' +  he.encode(d.ip) + ') ';\n    }\n    s = s + '</a> Model: ' + he.encode(d.model || '');\n    s = s + he.encode(d.location ? ' Location: ' + d.location : '');\n\n    return s;\n}\n\n$(document).ready(function() {\n  var table = $('#data-table').DataTable({\n    \"serverSide\": true,\n    \"ajax\": \"[% uri_for('/ajax/content/report/apradiochannelpower/data') %]\",\n    \"order\": [[ 0, 'asc' ]],\n    \"columns\": [\n      {\n        // Grouping column\n        \"data\": 'ip',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'device_name',\n        \"visible\": false\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port_name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'descr',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'channel',\n        \"className\": \"nd_center-cell\"\n      }, {\n        \"data\": 'power',\n        \"className\": \"nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return (row.power2 ? data + ' / ' + row.power2 : '');\n        }\n      }\n    ],\n    \"drawCallback\": function ( settings ) {\n      var api = this.api();\n      var rows = api.rows( {page:'current'} ).nodes();\n      var last=null;\n\n      api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n        if ( last !== group ) {\n          var row_data = api.row( i ).data();\n          $(rows).eq( i ).before(\n            '<tr class=\"group\"><td colspan=\"5\">' + groupString(row_data) + '</td></tr>'\n            );\n          last = group;\n        }\n      } );\n    },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n \n  // Order by the grouping\n  $('#data-table tbody').on( 'click', 'tr.group', function () {\n    var currentOrder = table.order()[0];\n    if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n      table.order( [ 0, 'desc' ] ).draw();\n    }\n    else {\n      table.order( [ 0, 'asc' ] ).draw();\n    }\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Address</th>\n      <th class=\"nd_center-cell\">Contact</th>\n      <th class=\"nd_center-cell\">Location</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [{\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'alias',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'contact',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Location</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">System Name</th>\n      <th class=\"nd_center-cell\">Vendor</th>\n      <th class=\"nd_center-cell\">Model</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"order\": [[ 0, \"asc\" ], [2, \"asc\"], [ 3, \"asc\" ], [4, \"asc\"]],\n        \"data\": [% results %],\n        \"columns\": [\n           {\n                \"data\": 'location',\n                \"render\": function(data, type, row, meta) {\n                  if (data) {\n                    return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '&location=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n\n                  } else {\n                    return '[Not Set]';\n                  }\n                }\n            }, {\n                \"data\": 'ip',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% uri_for('/device') %]?q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n                }\n            }, {\n                \"data\": 'name',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }, {\n                \"data\": 'vendor',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }, {\n                \"data\": 'model',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>DNS</th>\n      <th>IP Address</th>\n      <th>Contact</th>\n      <th>Location</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n            return '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.name || row.ip) + '</a>';\n          }\n      }, {\n        \"data\": 'dns',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'contact',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP</th>\n      <th>DNS</th>\n      <th>Name</th>\n      <th>Model</th>\n      <th>Location</th>\n      <th>PoE<br>Module</th>\n      <th class=\"nd_center-cell\">Supply</th>\n      <th class=\"nd_center-cell\">Power<br>(W)</th>\n      <th class=\"nd_center-cell\">Capable<br>Ports</th>\n      <th class=\"nd_center-cell\">Powered<br>Ports</th>\n      <th class=\"nd_center-cell\">Disabled<br>Ports</th>\n      <th class=\"nd_center-cell\">Errored<br>Ports</th>\n      <th class=\"nd_center-cell\">Committed<br>(W)</th>\n      <th class=\"nd_center-cell\">Delivering<br>(W)</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td>[% row.ip %]</td>\n      <td>[% row.dns %]</td>\n      <td>[% row.name %]</td>\n      <td>[% row.model %]</td>\n      <td>[% row.location %]</td>\n      <td>[% row.module %]</td>\n      <td class=\"nd_center-cell\">[% row.power %]</td>\n      <td class=\"nd_center-cell\">[% row.status %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_capable_ports %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_powered_ports %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_disabled_ports %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_errored_ports %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_power_committed %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_power_delivering %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\nfunction groupString(d) {\n    \"use strict\";\n    var s = '';\n    s = s + 'Device: ';\n    s = s + '<a href=\"[% uri_for('/device') %]?tab=details&q=' + encodeURIComponent(d.ip) + '\">';\n    s = s + he.encode(d.dns || d.name || d.ip);\n    if (d.dns || d.name) {\n        s = s + ' (' +  he.encode(d.ip) + ') ';\n    }\n    s = s + '</a> Model: ' + he.encode(d.model || '');\n    s = s + he.encode(d.location ? ' Location: ' + d.location : '');\n\n    return s;\n}\n\n$(document).ready(function() {\n    var table = $('#data-table').DataTable({\n    \"serverSide\": true,\n    \"ajax\": \"[% uri_for('/ajax/content/report/devicepoestatus/data') %]\",\n    \"order\": [[ 0, 'asc' ]],\n    \"columns\": [\n      {\n        // Grouping column\n        \"data\": 'ip',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'name',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'model',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'location',\n        \"visible\": false\n      }, {\n        \"data\": 'module',\n        \"searchable\": false\n      }, {\n        \"data\": 'status',\n        \"className\": \"nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'power',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_capable_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_powered_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_disabled_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_errored_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_power_committed',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_power_delivering',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"drawCallback\": function ( settings ) {\n      var api = this.api();\n      var rows = api.rows( {page:'current'} ).nodes();\n      var last=null;\n\n      api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n        if ( last !== group ) {\n          var row_data = api.row( i ).data();\n          $(rows).eq( i ).before(\n            '<tr class=\"group\"><td colspan=\"9\">' + groupString(row_data) + '</td></tr>'\n            );\n          last = group;\n        }\n      } );\n    },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n \n    // Order by the grouping\n    $('#data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Left Device</th>\n      <th>Port</th>\n      <th>Duplex</th>\n      <th>Right Device</th>\n      <th>Port</th>\n      <th>Duplex</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'left_ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.left_dns || row.left_ip);\n        }\n      }, {\n        \"data\": 'left_port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.left_dns || row.left_ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'left_duplex',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data || ''));\n        }\n      }, {\n        \"data\": 'right_ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.right_dns || row.right_ip);\n        }\n      }, {\n        \"data\": 'right_port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.right_dns || row.right_ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'right_duplex',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data || ''));\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Description</th>\n      <th>Duplex</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.device.dns || row.device.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'duplex',\n        \"searchable\": false,\n        \"orderable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data));\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"nsbi-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Model</th>\n      <th>Operating System Version</th>\n      <th>Count</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td>\n        <a href=\"[% search_device %]&q=[% row.model | uri %]&vendor=[% row.vendor | uri %]&model=[% row.model | uri %]\">\n            [% row.vendor.ucfirst | html_entity %]&nbsp;[% row.model | html_entity %]</a>\n            [% IF row.os %] running &quot;[% row.os | html_entity %]&quot;[% END %]\n      </td>\n      <td>\n        <a class=\"nd_linkcell\"\n          href=\"[% search_device %]&q=[% row.os_ver | uri %]&vendor=[% row.vendor | uri %]&model=[% row.model | uri %]&os=[% row.os | uri %]&os_ver=[% row.os_ver | uri %]&matchall=on\">\n            [% row.os_ver | html_entity %]</a>\n      </td>\n      <td>[% row.os_ver_count | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbi-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        sort: false,\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbi-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP Address</th>\n      <th>MAC Address</th>\n      <th class=\"nd_center-cell\">DNS</th>\n      <th>Last Used</th>      \n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          var cell_str = he.encode(data);\n          if (type == 'display') {\n            if (row.time_last && row.node) {\n              cell_str = '<a href=\"[% search_node %]&q=' + encodeURIComponent(data)\n                + (row.active ? '' : '&archived=on') + '\">' + he.encode(data)\n                + (row.active ? '' : '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;') + '</a>';\n            }\n            else if (row.time_last) {\n              cell_str = '<a href=\"[% search_device %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n            }\n          }\n          return cell_str;\n        }\n      }, {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          var cell_str = he.encode(data || '');\n          if (type == 'display' && data && row.time_last) {\n            cell_str = '<a href=\"[% search_node %]&q=' + encodeURIComponent(data)\n              + (row.active ? '' : '&archived=on') + '\">' + he.encode(data)\n              + (row.active ? '' : '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;') + '</a>';\n          }\n          return cell_str;\n        }\n      }, {\n        \"data\": 'dns',\n        \"className\": \"nd_nowrap nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'age',\n        \"render\": function(data, type, row, meta) {\n          if (type == 'display') {\n            return he.encode(data || 'Never');\n          }\n          else {\n            // so that sorting works correctly on this column\n            return row.time_last;\n          }\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Device</th>\n        <th>Description</th>\n        <th>Name</th>\n        <th>Class</th>\n        <th>Type</th>\n        <th>Model</th>\n        <th>Serial</th>\n        <th>HW Version</th>\n        <th>SW Version</th>\n        <th>FW Version</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Class</th>\n        <th>Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %] \n    \"serverSide\": true,\n    \"searching\": false,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/moduleinventory/data') %]?[% url(params('query').hash) %]\",\n    \"columns\": [\n      {\n      \"data\": 'ip',\n      \"render\": function(data, type, row, meta) {\n        return '<a href=\"[% uri_for('/device') %]?tab=modules&q=' + encodeURIComponent(data) + '\">' + he.encode(row.device.dns || row.device.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&description=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&name=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'class',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&class=' + encodeURIComponent(data) + '\">' + he.encode(capitalizeFirstLetter(data + '')) + '</a>';\n        }\n      }, {\n        \"data\": 'type',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&type=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'serial',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&serial=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'hw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'sw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'fw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'class',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory %]&class=' + encodeURIComponent(data) + '\">' + he.encode(capitalizeFirstLetter(data + '')) + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n      [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Domain</th>\n        <th>Node</th>\n        <th>Name</th>\n        <th>User</th>\n        <th>First Seen</th>\n        <th>Last Seen</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Domain</th>\n        <th>Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %]\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/netbios/data') %]?[% url(params('query').hash) %]\",\n    \"columns\": [\n      {\n        \"data\": 'domain',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '(Blank Domain)');\n        }\n      }, {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + '</a>';\n        }\n      }, {\n        \"data\": 'nbname',\n        \"render\": function(data, type, row, meta) {\n          var prefix = '';\n          if (row.domain) {\n            prefix = '\\\\\\\\' + row.domain + '\\\\';\n          }\n          return he.encode(prefix) + '<a href=\"[% search_node %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n        }\n      }, {\n        \"data\": 'nbuser',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.nbuser || '[No User]');\n        }\n      }, {\n        \"data\": 'time_first',\n        \"render\": function(data, type, row, meta) {\n          return moment(data).format('YYYY-MM-DD HH:mm');\n        }\n      }, {\n        \"data\": 'time_last',\n        \"render\": function(data, type, row, meta) {\n          return moment(data).format('YYYY-MM-DD HH:mm');\n        }\n      }\n    ],\n    \"order\": [[0, \"asc\"], [5, \"desc\"]],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [    \n      {\n        \"data\": 'domain',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/netbios') %]?domain=' + encodeURIComponent(data || 'blank') + '\">' + he.encode(data || '(Blank Domain)') + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"order\": [[1, \"desc\"]],\n    [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "[% USE Number.Format %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Vendor</th>\n      <th>Location</th>\n      <th>IPs</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 3, \"desc\" ]],\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + '</a>';\n        }\n      }, {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.switch) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(row.dns || row.name || row.switch) + '(' + he.encode(data) + ')</a>';\n        }\n      }, {\n        \"data\": 'ip_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Remote ID</th>\n      <th>Remote IP</th>\n      <th>Remote Port</th>\n      <th>Remote Type</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || data);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&c_nodes=on&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_id',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node %]&q=' + encodeURIComponent(data || '') + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'remote_port',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_type',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>MAC</th>\n        <th>Vendor</th>        \n        <th>Device (Port)</th>\n        <th>Device DNS</th>\n        <th>Device Name</th>\n        <th>Device IP</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n      <th class=\"nd_center-cell\">Vendor</th>\n      <th class=\"nd_center-cell\">Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %]\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/nodevendor/data') %]?[% url(params('query').hash) %]\",\n    \"columns\": [\n      {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          var icon = '&nbsp;&nbsp;<i class=\"icon-book text-warning\"></i> ';\n          if (row.active) {\n            icon = '';\n          }\n          return '<a href=\"[% search_node %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + icon + '</a>';\n        }\n      }, {\n        \"data\": 'oui.abbrev',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/nodevendor') %]?vendor=' + encodeURIComponent(row.oui.abbrev || 'blank') + '\">' + he.encode(row.oui.company ||'(Unknown Vendor)') + '</a>';\n        }\n      }, {\n        \"data\": 'port',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.switch) + '&f=' + encodeURIComponent(data) + '&c_nodes=on&n_ssid=on\">' + he.encode(row.device.dns || row.device.name || row.switch) + '(' + he.encode(data) + ')</a>';\n        }\n      }, {\n        // Included for filtering\n        \"data\": 'device.dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'device.name',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'switch',\n        \"visible\": false\n      }\n    ],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [    \n      {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/nodevendor') %]?vendor=' + encodeURIComponent(row.abbrev || 'blank') + '\">' + he.encode(row.vendor ||'(Unknown Vendor)') + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"order\": [[1, \"desc\"]],\n    [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>Admin Status</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 0, \"asc\" ], [1, \"asc\"]],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'up_admin',\n        \"orderable\": false,\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    \"data\": [% results %],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>STP Status</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 0, \"asc\" ], [1, \"asc\"]],\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'stp',\n        \"orderable\": false,\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>Node Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 3, \"desc\" ]],\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'mac_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE Number.Format %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Device (Port)</th>\n        <th>Broadcast</th>\n        <th>Model</th>\n        <th>SSID</th>\n        <th>Vendor</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n      <th class=\"nd_center-cell\">SSID</th>\n      <th class=\"nd_center-cell\">Broadcast</th>\n      <th class=\"nd_center-cell\">Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    [% IF opt %]\n    \"columns\": [\n      {\n      \"data\": 'ip',\n      \"render\": function(data, type, row, meta) {\n        return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(data) + '&f=' + encodeURIComponent(row.port.port) + '&c_nodes=on&n_ssid=on\">' + he.encode(row.device.dns || row.device.name || row.ip) + '(' + he.encode(row.port.port) + ')</a>';\n        }\n      }, {\n        \"data\": 'broadcast',\n        \"render\": function(data, type, row, meta) {\n          return (data ? 'Yes' : 'No');\n        }\n      }, {\n        \"data\": 'device.model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ssid',\n        \"searchable\": false,\n        \"orderable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'device.vendor',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    [% ELSE %]\n    \"columns\": [\n      {\n        \"data\": 'ssid',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/portssid') %]?ssid=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'broadcast',\n        \"render\": function(data, type, row, meta) {\n          return (data ? 'Yes' : 'No');\n        }\n      }, {\n        \"data\": 'count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      },\n    ],\n    \"order\": [[ 2, \"desc\" ]],\n  [% END %]  \n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th class=\"nd_center-cell\">Total Ports</th>\n      <th class=\"nd_center-cell\">In Use</th>\n      <th class=\"nd_center-cell\">Shutdown</th>\n      <th class=\"nd_center-cell\">Free</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"data\": [% results %],\n        \"columns\": [\n           {\n                \"data\": 'ip',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n                }\n            }, {\n                \"data\": 'port_count',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_in_use',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_shutdown',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_free',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Left Device</th>\n      <th>Left Port</th>\n      <th>Left VLANs</th>\n      <th>Right Device</th>\n      <th>Right Port</th>\n      <th>Right VLANs</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"data\": [% results %],\n        \"columns\": [\n               {\n                \"data\": 'left_device',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>'; }\n            }, {\n              \"data\": 'left_port',\n              \"type\": 'portsort',\n              \"render\": function(data, type, row, meta) {\n                return type === 'display' ?\n                  '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.left_device) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n                  he.encode(data || ''); }\n            }, {\n                \"data\": 'left_vlans'\n            }, {\n                \"data\": 'right_device',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>'; }\n            }, {\n              \"data\": 'right_port',\n              \"type\": 'portsort',\n              \"render\": function(data, type, row, meta) {\n                return type === 'display' ?\n                  '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.right_device) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n                  he.encode(data || ''); }\n            }, {\n                \"data\": 'right_vlans'\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "[% USE Number.Format %]\n<table id=\"data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Subnet</th>\n      <th class=\"nd_center-cell\">Size</th>\n      <th class=\"nd_center-cell\">Number of Active Nodes</th>\n      <th class=\"nd_center-cell\">Percent Utilization</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td class=\"nd_center-cell\"><a href=\"[% uri_for('/report/ipinventory') %]?subnet=[% row.subnet | uri %]&daterange=[% params.daterange | uri %]&age_invert=[% params.age_invert | uri %]&limit=[% row.subnet_size | uri %]\">\n               [% row.subnet | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.subnet_size | format_number %]</td>\n      <td class=\"nd_center-cell\">[% row.active | format_number %]</td>\n      <td class=\"nd_center-cell\">[% row.percent | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"order\": [[ 3, 'desc' ]],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN ID</th>\n      <th>VLAN Name</th>\n      <th>Device Count</th>\n      <th>Port Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [\n      {\n        \"data\": 'vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'dcount',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'pcount',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"ds-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Location</th>\n      <th>System Name</th>\n      <th>Model</th>\n      <th>OS Version</th>\n      <th>Management IP</th>\n      <th>Serial</th>\n      <th>First Seen</th>\n      <th>Last Discovered</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#ds-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [{\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/device') %]?q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'os_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'serial',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'first_seen_stamp',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'last_discover_stamp',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "[% USE date(format = '%Y-%m-%d %H:%M') %]\n[% USE Number.Format %]\n<table id=\"nsbi-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Match</th>\n      <th class=\"nd_center-cell\">Device or Node</th>\n      [% IF params.stamps %]\n      <th>First Seen</th>\n      <th>Last Seen</th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = macs.next) %]\n    [% IF row.nbname %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n          [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_linkcell nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') %]?domain=[% row.domain | uri %]\" title=\"Devices in this Domain\">[% row.domain | html_entity %]</a>\\<a href=\"[% search_node %]&q=[% row.nbname | uri %]\">[% row.nbname | html_entity %]</a>\n        <br>[% row.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% ELSE %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n          [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>IP &rarr; MAC</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT row.active %]\n        [% ' (' _ row.dns.remove(settings.domain_suffix) _ ')' IF row.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH nbt IN row.netbios %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% nbt.net_mac.$mac_format_call | uri %]\">\n          [% nbt.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% nbt.oui.abbrev | uri %]\">\n        [% nbt.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_linkcell nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') %]?domain=[% nbt.domain | uri %]\" title=\"Devices in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n        <br>[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% date.format(nbt.time_first) | html_entity %]</td>\n      <td>[% date.format(nbt.time_last) | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH ni IN row.nodeips %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% ni.net_mac.$mac_format_call | uri %]\">\n          [% ni.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% ni.oui.abbrev | uri %]\">\n        [% ni.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>IP &rarr; MAC</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node %]&q=[% ni.ip | uri %]\">[% ni.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT ni.active %]\n        [% ' (' _ ni.dns.remove(settings.domain_suffix) _ ')' IF ni.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% date.format(ni.time_first) | html_entity %]</td>\n      <td>[% date.format(ni.time_last) | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH node IN row.node_sightings(archive_filter) %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n          [% node.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% node.oui.abbrev | uri %]\">\n        [% node.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n        <a class=\"nd_linkcell\"\n          href=\"[% device_ports %]&q=[% node.switch | uri %]&f=[% node.port | uri %]&c_nodes=on&c_neighbors=on&prefer=port\">\n          [% node.switch | html_entity %] - [% node.port | html_entity %]\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>' IF NOT node.active %]</a>\n        [% IF node.device.dns AND node.device_port AND node.device_port.name %]\n          ([% node.device.dns | html_entity %] - [% node.device_port.name | html_entity %])\n        [% END %]\n            on vlan [% node.vlan %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% node.time_first_stamp | html_entity %]</td>\n      <td>[% node.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n      [% FOREACH wlan IN node.wireless %]\n      <tr>\n        <td>MAC: <a href=\"[% search_node %]&q=[% wlan.net_mac.$mac_format_call | uri %]\">\n            [% wlan.net_mac.$mac_format_call | html_entity %]</a>\n        [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% wlan.oui.abbrev | uri %]\">\n        [% wlan.oui.company | html_entity %]</a> )\n        [% END %]\n        </td>\n        <td>Wireless Info</td>\n        <td class=\"nd_center-cell\">SSID: [% wlan.ssid | html_entity %]<br>\n          MaxRate: [% wlan.maxrate | html_entity %]Mbps TxRate: [% wlan.txrate | html_entity %]Mbps<br>\n          SigStr: [% wlan.sigstrength | html_entity %] SigQual: [% wlan.sigqual | html_entity %]<br>\n          Rx: [% wlan.rxpkt | format_number %] pkts, [% wlan.rxbyte | format_number %] bytes<br>\n          Tx: [% wlan.txpkt | format_number %] pkts, [% wlan.txbyte | format_number %] bytes<br>\n        </td>\n        [% IF params.stamps %]\n        <td> &nbsp; </td>\n        <td>[% date.format(wlan.time_last) | html_entity %]</td>\n        [% END %]\n      </tr>\n      [% END %]\n    [% END %]\n    [% FOREACH nodeip IN row.ip_aliases(archive_filter) %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node %]&q=[% nodeip.net_mac.$mac_format_call | uri %]\">\n          [% nodeip.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% nodeip.oui.abbrev | uri %]\">\n        [% nodeip.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>MAC &rarr; IP</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node %]&q=[% nodeip.ip | uri %]\">[% nodeip.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT nodeip.active %]\n        [% ' (' _ nodeip.dns.remove(settings.domain_suffix) _ ')' IF nodeip.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% nodeip.time_first_stamp | html_entity %]</td>\n      <td>[% nodeip.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbi-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        \"order\": [[ 0, 'asc' ]],\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    [% IF params.stamps %]\n                        '<tr class=\"group\"><td colspan=\"4\">'+group+'</td></tr>'                    \n                    [% ELSE %]\n                        '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'                    \n                    [% END %]\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbi-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "[% USE Number.Format %]\n<table id=\"nsbm-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Match</th>\n      <th class=\"nd_center-cell\">Device or Node</th>\n      [% IF params.stamps %]\n      <th>First Seen</th>\n      <th>Last Seen</th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = ips.next) %]\n    <tr>\n      <td>\n          MAC: <a href=\"[% search_node %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n            [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>MAC &rarr; IP</td>\n      <td class=\"nd_center-cell\"><a href=\"[% search_node %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT row.active %]\n        [% ' (' _ row.dns.remove(settings.domain_suffix) _ ')' IF row.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (node = sightings.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n            [% node.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% node.oui.abbrev | uri %]\">\n        [% node.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n            <a href=\"[% device_ports %]&q=[% node.switch | uri %]&f=[% node.port | uri %]&c_nodes=on&c_neighbors=on&prefer=port\">\n            [% node.switch | html_entity %] - [% node.port | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT node.active %]\n        [% IF node.device.dns AND node.device_port AND node.device_port.name %]\n          ([% node.device.dns | html_entity %] - [% node.device_port.name | html_entity %])\n        [% END %]\n            on vlan [% node.vlan %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% node.time_first_stamp | html_entity %]</td>\n      <td>[% node.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (port = ports.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node %]&q=[% port.net_mac.$mac_format_call | uri %]\">[% port.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% port.oui.abbrev | uri %]\">\n        [% port.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n            <a href=\"[% device_ports %]&q=[% port.ip | uri %]&f=[% port.port | uri %]&c_mac=on&c_nodes=on&c_neighbors=on\">\n            [% port.ip | html_entity %] - [% port.descr | html_entity %]</a>\n        [% IF port.device.dns AND port.name %]\n          ([% port.device.dns | html_entity %] - [% port.name | html_entity %])\n        [% END %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% port.creation | html_entity %]</td>\n      <td>[% port.creation | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (nbt = netbios.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node %]&q=[% nbt.net_mac.$mac_format_call | uri %]\">[% nbt.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% nbt.oui.abbrev | uri %]\">\n        [% nbt.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') %]?domain=[% nbt.domain | uri %]\" title=\"Devices in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n        <br>[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% nbt.time_first_stamp | html_entity %]</td>\n      <td>[% nbt.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (wlan = wireless.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node %]&q=[% wlan.net_mac.$mac_format_call | uri %]\">[% wlan.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') %]?vendor=[% wlan.oui.abbrev | uri %]\">\n        [% wlan.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Wireless Info</td>\n      <td class=\"nd_center-cell\">SSID: [% wlan.ssid | html_entity %]<br>\n          MaxRate: [% wlan.maxrate | html_entity %]Mbps TxRate: [% wlan.txrate | html_entity %]Mbps<br>\n          SigStr: [% wlan.sigstrength | html_entity %] SigQual: [% wlan.sigqual | html_entity %]<br>\n          Rx: [% wlan.rxpkt | format_number %] pkts, [% wlan.rxbyte | format_number %] bytes<br>\n          Tx: [% wlan.txpkt | format_number %] pkts, [% wlan.txbyte | format_number %] bytes<br>\n      </td>\n      [% IF params.stamps %]\n      <td> &nbsp; </td>\n      <td>[% wlan.get_column('time_last_stamp') | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbm-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        \"order\": [[ 0, 'asc' ]],\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    [% IF params.stamps %]\n                        '<tr class=\"group\"><td colspan=\"4\">'+group+'</td></tr>'                    \n                    [% ELSE %]\n                        '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'                    \n                    [% END %]\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbm-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"ps-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Status</th>\n      <th>Name</th>\n      <th>Port</th>\n      <th>VLAN</th>\n      <th>Speed</th>\n      <th>Last Change</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#ps-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columnDefs\": [\n        { \"sortable\": false, \"targets\": 0 },\n        { \"searchable\": false, \"targets\": 0 },\n        { \"type\": 'portsort', \"targets\": [ 'portsort' ] }\n    ],\n    \"order\": [[ 1, 'asc' ]],\n    \"columns\": [{\n        \"data\": 'up',\n        \"className\": \"nd_center-cell nd_devport-icon\",\n        \"render\": function(data, type, row, meta) {\n          if (row.up_admin != \"up\") {\n            return'<i class=\"icon-remove\"></i>';\n          }\n          else if (row.up_admin == \"up\" && (row.up != \"up\" && row.up != \"dormant\")) {\n            return '<i class=\"icon-arrow-down text-error\"></i>';\n          }\n          else {\n            return '<i class=\"icon-angle-up text-success\"></i>';\n          }\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"className\": \"nd_nowrap nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          var ddns = '';\n          if (row.device.dns || row.device.name) {\n            ddns = '<br>(' + he.encode(row.device.dns || row.device.name)  + ')';\n          }\n          return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(data)\n            + '&f=' + encodeURIComponent(row.port) + '\">' + he.encode(data)\n            + ' [' + he.encode(row.port) + ']</a>' + ddns;\n        }\n      }, {\n        \"data\": 'port_vlans.vlan',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }, {\n        \"data\": 'speed',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }, {\n        \"data\": 'lastchange_stamp',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n\n", "<table id=\"vs-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN</th>\n      <th>Device</th>\n      <th>Description</th>\n      <th>Model</th>\n      <th>OS</th>\n      <th>Vendor</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#vs-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results %],\n    \"columns\": [{\n        \"data\": 'vlans.vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'vlans.description',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'os',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "[% USE Number.Format %]\n    <div class=\"row\">\n    [% IF stats.day %]\n      <div class=\"span5 offset1\">\n      <h4>Statistics for this installation</h4>\n        <table class=\"table table-condensed\">\n          <thead>\n            <tr>\n              <th>[% stats.device_count | format_number %] devices\n                  with [% stats.device_ip_count | format_number %] IPs\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th>[% stats.device_port_count | format_number %] interfaces\n                  of which [% stats.device_port_up_count | format_number %] are up\n              </th>\n            </tr>\n            [% IF stats.device_link_count %]\n            <tr>\n              <th>[% stats.device_link_count| format_number %] layer 2 links between devices</th>\n            </tr>\n            [% END %]\n            <tr>\n              <th>[% stats.node_table_count | format_number %] nodes logged, of which [% stats.node_active_count | format_number %] are active</th>\n            </tr>\n            <tr>\n              <th>[% stats.ip_table_count | format_number %] IPs logged, of which [% stats.ip_active_count | format_number %] are active</th>\n            </tr>\n            <tr>\n              <th>Statistics last generated on [% stats.day %]</th>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"span4 offset1\">\n      <h4>Built using Open Source</h4>\n        <table class=\"table table-condensed\">\n          <thead>\n            <tr>\n              <th>Software</th>\n              <th>Version</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th><b><a href=\"http://netdisco.org\">App::Netdisco</a></b></th>\n              <th>[% stats.netdisco_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"https://github.com/netdisco/snmp-info\">SNMP::Info</a></th>\n              <th>[% stats.snmpinfo_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"https://metacpan.org/module/netdisco-db-deploy\">DB Schema</a></th>\n              <th>[% stats.schema_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"http://www.postgresql.org\">PostgreSQL</a></th>\n              <th>[% stats.pg_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"http://www.perl.org\">Perl</a></th>\n              <th>[% stats.perl_ver | html_entity %]</th>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    [% ELSE %]\n      <div class=\"span4 alert alert-info\">Statistics will be available tomorrow.</div>\n    [% END %]\n    </div>\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n      <a id=\"nd_sidebar-reset-link\" href=\"#\">\n        <i class=\"nd_sidebar-reset icon-undo\"\n          rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Reset to Defaults\" data-container=\"body\"></i>\n      </a>\n      <div class=\"tab-content\">\n        [% FOREACH tab IN settings._device_tabs %]\n        <div id=\"[% tab.tag %]_search\" class=\"tab-pane [% 'active' IF params.tab == tab.tag %]\">\n          <form id=\"[% tab.tag %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/device') %]\">\n            <input name=\"tab\" value=\"[% tab.tag %]\" type=\"hidden\"/>\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/device/${tab.tag}.tt\" %]\n            [% CATCH %]\n            <!-- no \"[% tab.tag %]\" search options -->\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <input name=\"f\" value=\"[% params.f | html_entity %]\" type=\"hidden\"/>\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n        [% END %]\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      [% FOREACH tab IN settings._device_tabs %]\n      <li[% ' class=\"active\"' IF params.tab == tab.tag %]><a id=\"[% tab.tag %]_link\" href=\"#[% tab.tag %]_pane\">[% tab.label %]</a></li>\n      [% END %]\n      <span id=\"nd_device-name\">\n        [% display_name | html_entity %]\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">&nbsp;\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n    </ul>\n    <div class=\"tab-content\">\n      [% FOREACH tab IN settings._device_tabs %]\n      <div class=\"tab-pane[% ' active' IF params.tab == tab.tag %]\" id=\"[% tab.tag %]_pane\"></div>\n      [% END %]\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/device.js' -%]\n</script>\n", "<div class=\"container\">\n  <div class=\"row nd_hero-row\">\n    <div class=\"span8 offset2\">\n      [% IF params.login_failed %]\n      <div class=\"alert alert-error fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Incorrect username or password, please try again.\n      </div>\n      [% END %]\n      [% IF params.logout %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        You are now logged out.\n      </div>\n      [% END %]\n      [% IF params.nosuchdevice %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Sorry, no such device is known.\n      </div>\n      [% END %]\n      [% IF vars.notfound %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Sorry, page not found.&nbsp;\n          <a href=\"https://github.com/netdisco/netdisco/issues/new\" target=\"_blank\"><i class=\"icon-bug\"></i>&nbsp;Report a Bug?</a>\n      </div>\n      [% END %]\n      [% IF settings.suggest_guest AND NOT session.logged_in_user %]\n      <div class=\"alert alert-info fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Guest access is available by entering username &quot;guest&quot; and password &quot;guest&quot;.\n      </div>\n      [% END %]\n      <div class=\"hero-unit\">\n        <h2>Welcome to Netdisco</h2>\n        <small>Netdisco is an Open Source management tool designed for network administrators.</small>\n        [% IF NOT session.logged_in_user %]\n        <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/login') %]\">\n          <div class=\"form-horizontal\">\n            <input id='loginuser' placeholder=\"Username\" class=\"span2\" name=\"username\" type=\"text\" required=\"required\"/>\n            <input placeholder=\"Password\" class=\"span2\" name=\"password\" type=\"password\" required=\"required\"/>\n            <button type=\"submit\" class=\"btn btn-info\">Log In</button>\n            [% IF settings.login_logo %]\n            <img src=\"[% settings.login_logo %]\" alt=\"Login Logo\" />\n            [% END %]\n          </div>\n          [% IF params.return_url %]\n          <input type=\"hidden\" name=\"return_url\" value=\"[% params.return_url | html_entity %]\"/>\n          [% END %]\n        </form>\n        [% ELSE %]\n          <p></p> <p></p>\n          <form class=\"\" method=\"get\" action=\"[% uri_for('/search') %]\">\n            <div class=\"form-horizontal\">\n              <input placeholder=\"Find Anything\" class=\"span4\" id=\"nqbody\" name=\"q\" type=\"text\" autocomplete=\"off\"/>\n              <input name=\"firstsearch\" type=\"hidden\" value=\"on\">\n              <div class=\"btn-group\">\n                <button type=\"submit\" class=\"btn btn-primary\">Search</button>\n                <button class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                  <span class=\"caret\"></span>&nbsp;\n                </button>\n                <ul class=\"dropdown-menu\">\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"device\">Search Devices</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"node\">Search Nodes</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"vlan\">Search VLANs</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"port\">Search Ports</a></li>\n                </ul>\n              </div>\n            </div>\n          </form>\n          [% IF user_has_role('admin') %]\n          <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/admin/discover') %]\">\n            <div class=\"form-horizontal\">\n              <input placeholder=\"Device hostname or IP\" class=\"span4\" name=\"device\" value=\"[% params.device %]\" type=\"text\"/>\n              <input type=\"hidden\" name=\"extra\" value=\"with-nodes\"/>\n              <button type=\"submit\" class=\"btn btn-info\">Discover</button>\n            </div>\n          </form>\n          [% END %]\n        [% END %]\n      </div>\n    </div>\n  </div>\n  [% IF session.logged_in_user %]\n  <div class=\"accordion\" id=\"accordion-statistics\">\n    <div class=\"accordion-group\">\n      <div class=\"accordion-heading nd_sysinfo-heading\">\n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-stats\" href=\"#\">\n            <i class=\"icon-chevron-up nd_chevron\"></i> System Information\n          </a>\n      </div>\n      <div id=\"collapse-stats\" class=\"accordion-body collapse\">\n        <div class=\"accordion-inner\">\n          <div id=\"nd_stats\">\n            <div id=\"nd_stats_status\" class=\"span2 offset4 alert\">\n              <i class=\"icon-spinner icon-spin\"></i> Compiling statistics...</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  [% END %]\n</div> <!-- /container -->\n\n[% IF session.logged_in_user %]\n<script type=\"text/javascript\">\n  var stats_loaded = 0;\n  $('#nqbody').focus(); // set focus to main search\n  $('#loginuser').focus(); // set focus to login, if it's there\n\n  $('.collapse').on('show', function() {\n    $('.nd_chevron').toggleClass('icon-chevron-up icon-chevron-down');\n\n    if (! stats_loaded) {\n      $('#nd_stats').load(\"[% uri_for('/ajax/content/statistics') %]\", function(r,s,x) {\n        if (s == \"error\") {\n          $('#nd_stats_status').addClass('alert-error')\n            .html('<i class=\"icon-warning-sign\"></i> Failed to retrieve system information.');\n        }\n      });\n      stats_loaded = 1;\n    }\n  });\n\n  $('.collapse').on('hide', function() {\n    $('.nd_chevron').toggleClass('icon-chevron-up icon-chevron-down');\n  });\n</script>\n[% END %]\n", "<div class=\"container\">\n  [% IF platforms.size %]\n  <div class=\"row\">\n    <div class=\"span6\">\n      <h3 class=\"nd_inventory-table-head\">By Platform</h3>\n      <table class=\"table table-condensed table-hover\">\n        <thead>\n          <tr>\n            <th>Vendor</th>\n            <th>Model</th>\n            <th>Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH platform IN platforms %]\n          [% NEXT UNLESS platform.vendor OR platform.model %]\n          <tr>\n            <th>\n              [% IF platform.vendor %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device %]&q=[% platform.vendor | uri %]&vendor=[% platform.vendor | uri %]\">\n                  [% platform.vendor | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>\n              [% IF platform.model %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device %]&q=[% platform.model | uri %]&model=[% platform.model | uri %]\">\n                  [% platform.model | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>[% platform.count | html_entity %]</th>\n          </tr>\n          [% END %]\n        </tbody>\n      </table>\n    </div>\n    <div class=\"span6\">\n      <h3 class=\"nd_inventory-table-head\">By Software Release</h3>\n      <table class=\"table table-condensed table-hover\">\n        <thead>\n          <tr>\n            <th>OS</th>\n            <th>Version</th>\n            <th>Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH release IN releases %]\n          [% NEXT UNLESS release.os OR release.os_ver %]\n          <tr>\n            <th>\n              [% IF release.os %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device %]&q=[% release.os | uri %]&os=[% release.os | uri %]\">\n                  [% release.os | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>\n              [% IF release.os_ver %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device %]&q=[% release.os_ver | uri %]&os_ver=[% release.os_ver | uri %]\">\n                  [% release.os_ver | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>[% release.count | html_entity %]</th>\n          </tr>\n          [% END %]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  [% ELSE %]\n  <script type=\"text/javascript\">\n    window.location = '[% uri_for(\"/\") %]';\n  </script>\n  [% END %]\n</div>\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'admin';\n\n  // keep track of timers so we can kill them\n  var nd_timers  = new Array();\n  var timermax   = [% settings.jobqueue_refresh || 5 | html_entity %];\n  var timercache = timermax - 1;\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n\n    // reload this table every 5 seconds\n    if (tab == 'jobqueue'\n        && $('#nd_countdown-control-icon').hasClass('icon-play')) {\n\n        $('#nd_countdown').text(timermax);\n\n        // add new timers\n        for (var i = timercache; i > 0; i--) {\n          nd_timers.push(setTimeout(function() {\n            $('#nd_countdown').text(timercache);\n            timercache = timercache - 1;\n          }, ((timermax * 1000) - (i * 1000)) ));\n        }\n\n        nd_timers.push(setTimeout(function() {\n          // clear any running timers\n          for (var i = 0; i < nd_timers.length; i++) {\n              clearTimeout(nd_timers[i]);\n          }\n\n          // reset the timer cache\n          timercache = timermax - 1;\n\n          // reload the tab content in...\n          $('#' + tab + '_form').trigger('submit');\n        }, (timermax * 1000)));\n    }\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_dev').autocomplete({\n      source: uri_base + '/ajax/data/deviceip/typeahead'\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_port.nd_topo_dev1').autocomplete({\n      source: function (request, response)  {\n        var query = $('.nd_topo_dev1').serialize();\n        return $.get( uri_base + '/ajax/data/port/typeahead', query, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_port.nd_topo_dev2').autocomplete({\n      source: function (request, response)  {\n        var query = $('.nd_topo_dev2').serialize();\n        return $.get( uri_base + '/ajax/data/port/typeahead', query, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate modals and tooltips\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% task.tag %]'\n    var target = '#' + tab + '_pane';\n\n    // get all devices on device input focus\n    $(target).on('focus', '.nd_topo_dev', function(e) {\n      $(this).autocomplete('search', '%') });\n    $(target).on('click', '.nd_topo_dev_caret', function(e) {\n      $(this).siblings('.nd_topo_dev').autocomplete('search', '%') });\n\n    // get all ports on port input focus\n    $(target).on('focus', '.nd_topo_port', function(e) {\n      $(this).autocomplete('search') });\n    $(target).on('click', '.nd_topo_port_caret', function(e) {\n      $(this).siblings('.nd_topo_port').val('');\n      $(this).siblings('.nd_topo_port').autocomplete('search');\n    });\n\n    // job control refresh icon should reload the page\n    $('#nd_countdown-refresh').click(function(event) {\n      event.preventDefault();\n      for (var i = 0; i < nd_timers.length; i++) {\n          clearTimeout(nd_timers[i]);\n      }\n      $('#' + tab + '_form').trigger('submit');\n    });\n\n    // job control pause/play icon switcheroo\n    $('#nd_countdown-control').click(function(event) {\n      event.preventDefault();\n      var icon = $('#nd_countdown-control-icon');\n      icon.toggleClass('icon-pause icon-play text-error text-success');\n\n      if (icon.hasClass('icon-pause')) {\n        for (var i = 0; i < nd_timers.length; i++) {\n            clearTimeout(nd_timers[i]);\n        }\n        $('#nd_countdown').text('0');\n      }\n      else {\n        $('#' + tab + '_form').trigger('submit');\n      }\n    });\n\n    // activity for admin task tables\n    // dynamically bind to all forms in the table\n    $('.content').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // clear any running timers\n      for (var i = 0; i < nd_timers.length; i++) {\n          clearTimeout(nd_timers[i]);\n      }\n\n      // what purpose - add/update/del\n      var mode = $(this).attr('name');\n\n      // submit the query and put results into the tab pane\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/admin/' + tab + '/' + mode\n        ,data: $(this).closest('tr').find('input[data-form=\"' + mode + '\"]').serializeArray()\n        ,beforeSend: function() {\n          if (mode == 'add' || mode == 'delete') {\n            $(target).html(\n              '<div class=\"span2 alert\">Request submitted...</div>'\n            );\n          }\n        }\n        ,success: function() {\n          if (mode == 'add') {\n            toastr.success('Added record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else if (mode == 'delete') {\n            toastr.success('Deleted record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else {\n            toastr.success('Updated record');\n          }\n        }\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          if (mode == 'add') {\n            toastr.error('Failed to add record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else if (mode == 'delete') {\n            toastr.error('Failed to delete record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else {\n            toastr.error('Failed to update record');\n          }\n        }\n      });\n    });\n\n    // bind qtip2 to show the event log output\n    $(target).on('mouseover', '.nd_jobqueueitem', function(event) {\n      $(this).qtip({\n        overwrite: false,\n        content: {\n          attr: 'data-content'\n        },\n        show: {\n          event: event.type,\n          ready: true,\n          delay: 100\n        },\n        position: {\n          my: 'top center',\n          at: 'bottom center',\n          target: false\n        },\n        style: {\n          classes: 'qtip-cluetip qtip-rounded nd_qtip-unconstrained'\n        }\n      });\n    });\n  });\n", "  // csv download icon on any table page\n  // needs to be dynamically updated to use current search options\n  function update_csv_download_link (type, tab, show) {\n    var form = '#' + tab + '_form';\n    var query = $(form).serialize();\n\n    if (show.length) {\n      $('#nd_csv-download')\n        .attr('href', uri_base + '/ajax/content/' + type + '/' + tab + '?' + query)\n        .attr('download', 'netdisco-' + type + '-' + tab + '.csv')\n        .show();\n    }\n    else {\n      $('#nd_csv-download').hide();\n    }\n  }\n\n  // page title includes tab name and possibly device name\n  // this is nice for when you have multiple netdisco pages open in the\n  // browser\n  function update_page_title (tab) {\n    var pgtitle = 'Netdisco';\n    if ($.trim($('#nd_device-name').text()).length) {\n      pgtitle = $.trim($('#nd_device-name').text()) +' - '+ $('#'+ tab + '_link').text();\n    }\n    return pgtitle;\n  }\n\n  // update browser search history with the new query.\n  // support history add (push) or replace via push parameter\n  function update_browser_history (tab, pgtitle, push) {\n    var form = '#' + tab + '_form';\n    var query = $(form).serialize();\n    if (query.length) { query = '?' + query }\n\n    if (window.History && window.History.enabled) {\n      is_from_history_plugin = 1;\n\n      if (push.length) {\n        var target = uri_base + '/' + path + '/' + tab + query;\n        if (location.pathname == target) { return };\n        window.History.pushState(\n          {name: tab, fields: $(form).serializeArray()}, pgtitle, target\n        );\n      }\n      else {\n        var target = uri_base + '/' + path + query;\n        window.History.replaceState(\n          {name: tab, fields: $(form).serializeArray()}, pgtitle, target\n        );\n      }\n\n      is_from_history_plugin = 0;\n    }\n  }\n\n  // each sidebar search form has a hidden copy of the main navbar search\n  function copy_navbar_to_sidebar (tab) {\n    var form = '#' + tab + '_form';\n\n    // copy navbar value to currently active sidebar form\n    if ($('#nq').val()) {\n      $(form).find(\"input[name=q]\").val( $('#nq').val() );\n    }\n    // then copy to all other inactive tab sidebars\n    $('form').find(\"input[name=q]\").each( function() {\n      $(this).val( $(form).find(\"input[name=q]\").val() );\n    });\n  }\n\n  $(document).ready(function() {\n    [% IF search %]\n    // search tabs\n    [% FOREACH tab IN settings._search_tabs %]\n    $('[% \"#${tab.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% tab.tag %]');\n      copy_navbar_to_sidebar('[% tab.tag %]');\n      update_browser_history('[% tab.tag %]', pgtitle, '');\n      update_csv_download_link('search', '[% tab.tag %]', '[% tab.provides_csv %]');\n      do_search(event, '[% tab.tag %]');\n    });\n    [% END %]\n    [% END %]\n\n    [% IF device %]\n    // device tabs\n    [% FOREACH tab IN settings._device_tabs %]\n    $('[% \"#${tab.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% tab.tag %]');\n      copy_navbar_to_sidebar('[% tab.tag %]');\n      update_browser_history('[% tab.tag %]', pgtitle, '');\n      update_csv_download_link('device', '[% tab.tag %]', '[% tab.provides_csv %]');\n\n      [% IF tab.tag == 'ports' %]\n      // form reset icon on ports tab\n      $('#nd_sidebar-reset-link').attr('href', uri_base + '/device?tab=[% tab.tag %]&reset=on&firstsearch=on&' +\n        $('#ports_form')\n          .find('input[name=\"q\"],input[name=\"f\"],input[name=\"partial\"],input[name=\"invert\"]')\n          .serialize());\n\n      [% ELSIF tab.tag == 'netmap' %]\n      // form reset icon on netmap tab\n      $('#nd_sidebar-reset-link').attr('href', uri_base + '/device?tab=[% tab.tag %]&reset=on&firstsearch=on&' +\n        $('#netmap_form').find('input[name=\"q\"]').serialize());\n      [% END %]\n\n      do_search(event, '[% tab.tag %]');\n    });\n    [% END %]\n    [% END %]\n\n    [% IF report %]\n    // for the report pages\n    $('[% \"#${report.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% report.tag %]');\n      update_browser_history('[% report.tag %]', pgtitle, '1');\n      update_csv_download_link('report', '[% report.tag %]', '1');\n      do_search(event, '[% report.tag %]');\n    });\n    [% END -%]\n\n    [% IF task %]\n    // for the admin pages\n    $('[% \"#${task.tag}_form\" %]').submit(function (event) {\n      update_page_title('[% task.tag %]');\n      update_csv_download_link('admin', '[% task.tag %]', '1');\n      do_search(event, '[% task.tag %]');\n    });\n    [% END %]\n\n    // on page load, load the content for the active tab\n    [% IF params.tab %]\n    [% IF params.tab == 'ipinventory' OR params.tab == 'subnets' %]\n      $('#[% params.tab %]_submit').click();\n    [% ELSE %]\n      $('#[% params.tab %]_form').trigger(\"submit\");\n    [% END %]\n    [% END %]\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'device';\n\n  // fields in the Device Search Options form (Device tab)\n  var form_inputs = $(\"#ports_form .clearfix input\").not('[type=\"checkbox\"]')\n      .add(\"#ports_form .clearfix select\");\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n\n    // LT wanted the page title to reflect what's on the page :)\n    document.title = $('#nd_device-name').text()\n      +' - '+ $('#'+ tab + '_link').text();\n\n    // used for contenteditable cells to find out whether the user has made\n    // changes, and only reset when they submit or cancel the change\n    var dirty = false;\n\n    // activate modals, tooltips and popovers\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n    $(\"[rel=popover]\").popover({live: true});\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% tab.tag %]'\n    var target = '#' + tab + '_pane';\n    var portfilter = $('#ports_form').find(\"input[name=f]\");\n\n    // sidebar form fields should change colour and have trash/copy icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // sidebar collapser events trigger change of up/down arrow\n    $('.collapse').on('show', function() {\n      $(this).siblings().find('.nd_arrow-up-down-right')\n        .toggleClass('icon-chevron-up icon-chevron-down');\n    });\n\n    $('.collapse').on('hide', function() {\n      $(this).siblings().find('.nd_arrow-up-down-right')\n        .toggleClass('icon-chevron-up icon-chevron-down');\n    });\n\n    // if the user edits the filter box, revert to automagical search\n    $('#ports_form').on('input', \"input[name=f]\", function() {\n      $('#nd_ports-form-prefer-field').attr('value', '');\n    });\n\n    // handler for trashcan icon in port filter box\n    $('.nd_field-clear-icon').click(function() {\n      portfilter.val('');\n      $('#nd_ports-form-prefer-field').attr('value', '');\n      $('#ports_form').trigger('submit');\n      device_form_state(portfilter); // will hide copy icons\n    });\n\n    // allow port filter to have a preference for port/name/vlan\n    $('#ports_form').on('click', '.nd_device-port-submit-prefer', function() {\n      event.preventDefault();\n      $('#nd_ports-form-prefer-field').attr('value', $(this).data('prefer'));\n      $(this).parents('form').submit();\n    });\n\n    // clickable device port names can simply resubmit AJAX rather than\n    // fetch the whole page again.\n    $('#ports_pane').on('click', '.nd_this-port-only', function(event) {\n      event.preventDefault(); // link is real so prevent page submit\n\n      var port = $(this).text();\n      port = $.trim(port);\n      portfilter.val(port);\n      $('.nd_field-clear-icon').show();\n\n      // make sure we're preferring a port filter\n      $('#nd_ports-form-prefer-field').attr('value', 'port');\n\n      $('#ports_form').trigger('submit');\n      device_form_state(portfilter); // will hide copy icons\n    });\n\n    // VLANs column list collapser trigger\n    // it's a bit of a faff because we can't easily use Bootstrap's collapser\n    $('#ports_pane').on('click', '.nd_collapse-vlans', function() {\n        $(this).siblings('.nd_collapsing').toggle();\n        if ($(this).find('.nd_arrow-up-down-left').hasClass('icon-chevron-up')) {\n          $(this).html('<div class=\"nd_arrow-up-down-left icon-chevron-down icon-large\"></div>Hide VLANs');\n        }\n        else {\n          $(this).html('<div class=\"nd_arrow-up-down-left icon-chevron-up icon-large\"></div>Show VLANs');\n        }\n    });\n\n    // refresh tooltips when the datatables table is updated\n    $('#ports_pane').on('draw.dt', function() {\n        $(\"[rel=tooltip]\").tooltip({live: true});\n    });\n\n    // netmap show controls\n    $('#nd_showips').change(function() {\n      if ($(this).prop('checked')) {\n        graph.inspect().main.nodes.each(function(n) {\n          if (n['ORIG_LABEL'] != n['ID']) {\n            n['LABEL'] = n['ORIG_LABEL'] + ' ' + n['ID'];\n          }\n        });\n        graph.wrapLabels(true).start();\n      } else {\n        graph.inspect().main.nodes.each(function(n) {\n          n['LABEL'] = n['ORIG_LABEL'];\n        });\n        graph.wrapLabels(false).start();\n      }\n    });\n    $('#nd_showspeed').change(function() {\n      $('.nd_netmap-linklabel').css('fill',\n        ($(this).prop('checked') ? 'black' : 'none')\n      );\n    });\n\n    // netmap pin/release controls\n    $('#nd_netmap-releaseall').on('click', function(event) {\n      event.preventDefault();\n      graph.releaseFixedNodes().resume();\n    });\n    $('#nd_netmap-releaseonly').on('click', function(event) {\n      event.preventDefault();\n      graph.inspect().main.nodes\n        .filter(function(n) { return n.selected })\n        .each(function(n) { n.fixed = false });\n      graph.resume();\n    });\n    $('#nd_netmap-pinonly').on('click', function(event) {\n      event.preventDefault();\n      graph.inspect().main.nodes\n        .filter(function(n) { return n.selected })\n        .each(function(n) { n.fixed = true });\n    });\n    $('#nd_netmap-zoomtodevice').on('click', function(event) {\n      event.preventDefault();\n      var node = graph.nodeDataById( graph['nd2']['centernode'] );\n      graph.zoomSmooth(node.x, node.y, node.radius * 125);\n    });\n    $('#nd_netmap-save').on('click', function(event) {\n      event.preventDefault();\n      saveMapPositions();\n    });\n\n    // activity for admin tasks in device details\n    $('#details_pane').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // what purpose - discover/macsuck/arpnip\n      var mode = $(this).attr('name');\n      var tr = $(this).closest('tr');\n\n      // submit the query\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/admin/' + mode\n        ,data: tr.find('input[data-form=\"' + mode + '\"],textarea[data-form=\"' + mode + '\"]').serializeArray()\n        ,success: function() {\n          if (mode != 'delete') {\n            toastr.info('Requested '+ mode +' for device '+ tr.data('for-device'));\n          }\n          else {\n            toastr.success('Deleted device '+ tr.data('for-device'));\n          }\n        }\n        // skip any error reporting for now\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          toastr.error('Failed to '+ mode +' device '+ tr.data('for-device'));\n        }\n      });\n    });\n\n    // clear any values in the delete confirm dialog\n    $('#details_pane').on('hidden', '.nd_modal', function () {\n      $('#nd_devdel-log').val('');\n      $('#nd_devdel-archive').attr('checked', false);\n    });\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'report';\n\n  // colored input fields in the Report Options sidebar forms\n  var form_inputs = $(\".nd_colored-input\");\n\n  // this is called by do_search to support local code\n  // here, when tab changes need to strike/unstrike the navbar search\n  function inner_view_processing(tab) {\n\n    // activate modals, tooltips and popovers\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n    $(\"[rel=popover]\").popover({live: true});\n  }\n\n  // on load, check initial Report Options form state,\n  // and on each change to the form fields\n  $(document).ready(function() {\n    var tab = '[% report.tag %]'\n    var target = '#' + tab + '_pane';\n\n    // sidebar form fields should change colour and have trash icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // handler for bin icon in search forms\n    $('.nd_field-clear-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('[name=' + name + ']');\n      input.val('');\n      device_form_state(input); // reset input field\n    });\n\n    $('#nd_ipinventory-subnet').on('input', function(event) {\n      if ($(this).val().indexOf(':') != -1) {\n        $('#never').attr('disabled', 'disabled');\n      }\n      else {\n        $('#never').removeAttr('disabled');\n      }\n    });\n\n    // activate typeahead on prefix/subnet box\n    $('#nd_ipinventory-subnet').autocomplete({\n      source: function (request, response) {\n        return $.get( uri_base + '/ajax/data/subnet/typeahead', request, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 3\n    });\n\n    // dynamically bind to all forms in the table\n    $('.content').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // what purpose - add/update/del\n      var mode = $(this).attr('name');\n\n      // submit the query and put results into the tab pane\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/report/' + tab + '/' + mode\n        ,data: $(this).closest('tr').find('input[data-form=\"' + mode + '\"]').serializeArray()\n        ,beforeSend: function() {\n          $(target).html(\n            '<div class=\"span2 alert\">Request submitted...</div>'\n          );\n        }\n        ,success: function() {\n          $('#' + tab + '_form').trigger('submit');\n        }\n        // skip any error reporting for now\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          $('#' + tab + '_form').trigger('submit');\n        }\n      });\n    });\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'search';\n\n  // fields in the Device Search Options form (Device tab)\n  var form_inputs = $(\"#device_form .clearfix input\").not('[type=\"checkbox\"]')\n      .add(\"#device_form .clearfix select\");\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% tab.tag %]'\n    var target = '#' + tab + '_pane';\n\n    // sidebar form fields should change colour and have bin/copy icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // handler for copy icon in search option\n    $('.nd_field-copy-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('#device_form [name=' + name + ']');\n      input.val( $('#nq').val() );\n      device_form_state(input); // will hide copy icons\n    });\n\n    // handler for bin icon in search option\n    $('.nd_field-clear-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('#device_form [name=' + name + ']');\n      input.val('');\n      device_form_state(input); // will hide copy icons\n    });\n  });\n", "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n        \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n  <meta http-equiv=\"Content-type\" content=\"text/html; charset=[% settings.charset | html_entity %]\" />\n  <link rel=\"shortcut icon\" href=\"[% uri_base %]/images/favicon.ico\" type=\"image/x-icon\">\n  <link rel=\"icon\" href=\"[% uri_base %]/images/favicon.ico\" type=\"image/x-icon\">\n  <title>Netdisco</title>\n\n  <!-- HTML5 shim, for IE6-8 support of HTML elements -->\n  <!--[if lt IE 9]>\n    <script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\n  <![endif]-->\n\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery-latest.min.js\"></script>\n<!--  <script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-migrate-1.1.1.js\"></script> -->\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery-ui.custom.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery-history.js\"></script>\n<!--  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery.cookie.js\"></script> -->\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery-deserialize.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/bootstrap.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/bootstrap2-toggle.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/underscore.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery.qtip.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/d3-3.5.17.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/d3-force-network-chart.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/toastr.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery.floatThead.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/daterangepicker.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/moment.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/jquery.dataTables.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/dataTables.bootstrap.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/dataTables.ip-address-detect.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/dataTables.ip-address-sort.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/he.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/natural.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/portsort.js\"></script>\n\n  <script type=\"text/javascript\">\n    var uri_base = '[% uri_base %]';\n    var nd_check_userlog = '[% settings.check_userlog %]';\n  </script>\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/netdisco.js\"></script>\n\n  [% IF user_has_role('port_control') %]\n  <script type=\"text/javascript\" src=\"[% uri_base %]/javascripts/netdisco_portcontrol.js\"></script>\n  [% END %]\n\n  [% FOREACH add_js IN settings._additional_javascript %]\n  <script type=\"text/javascript\" src=\"[% uri_base %]/plugin/[% add_js %]/[% add_js %].js\"></script>\n  [% END %]\n\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/bootstrap.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/bootstrap2-toggle.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/awesome-bootstrap-checkbox.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/jquery.qtip.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/smoothness/jquery-ui.custom.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/font-awesome.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/toastr.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/d3-force-network-chart.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/netdisco.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/bootstrap-tree.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/daterangepicker-bs2.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/dataTables.bootstrap.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/css/nd_print.css\" media=\"print\"/>\n\n  [% FOREACH add_css IN settings._additional_css %]\n  <link rel=\"stylesheet\" href=\"[% uri_base %]/plugin/[% add_css %]/[% add_css %].css\"/>\n  [% END %]\n</head>\n\n<body>\n<div class=\"navbar navbar-inverse navbar-fixed-top\">\n  <div class=\"navbar-inner\">\n    <div class=\"container\">\n      <a class=\"brand\" href=\"[% uri_for('/') %]\">Netdisco</a>\n      [% IF session.logged_in_user %]\n      <ul class=\"nav\">\n        [% FOREACH ni IN settings._navbar_items %]\n        <li[% ' class=\"active\"' IF vars.nav == ni.tag %]>\n          <a href=\"[% uri_for(ni.path) %]\">[% ni.label | html_entity %]</a>\n        </li>\n        [% END %]\n        [% IF settings._reports.size %]\n        <li class=\"dropdown[% ' active' IF vars.nav == 'reports' %]\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Reports <b class=\"caret\"></b></a>\n          <ul class=\"dropdown-menu\">\n          [% FOREACH category IN settings._report_order %]\n            [% IF settings._reports_menu.$category.size %]\n            <li class=\"dropdown-submenu\">\n            <a href=\"#\">[% category | html_entity %]</a>\n              <ul class=\"dropdown-menu\">\n              [% FOREACH item IN settings._reports_menu.$category %]\n                [% NEXT IF settings._reports.$item.hidden %]\n                <li><a href=\"[% uri_for('/report/' _ item) %]?firstsearch=on\">[% settings._reports.$item.label | html_entity %]</a></li>\n              [% END %]\n              </ul>\n            </li>\n            [% END %]\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n        [% END %]\n        [% IF user_has_role('admin') %]\n        <li class=\"dropdown[% ' active' IF vars.nav == 'admin' %]\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Admin <b class=\"caret\"></b></a>\n          <ul class=\"dropdown-menu\">\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/discoverall') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Discover All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/arpwalk') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Arpnip All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/macwalk') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Macsuck All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/nbtwalk') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">NBTstat All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/expire') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Run Expire Job</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/stats') %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Update Statistics</button>\n            </form>\n          </li>\n          [% IF settings._admin_tasks.size %]\n            <li class=\"divider\"></li>\n            [% FOREACH ai IN settings._admin_order %]\n              [% NEXT IF settings._admin_tasks.$ai.hidden %]\n              <li><a href=\"[% uri_for('/admin/' _ ai) %]\">[% settings._admin_tasks.$ai.label | html_entity %]</a></li>\n            [% END %]\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n        [% END %]\n      </ul>\n      <form class=\"navbar-search pull-left\" method=\"get\" action=\"[% uri_for('/search') %]\">\n        <input placeholder=\"Find Anything\" class=\"search-query span3\"\n          id=\"nq\" name=\"q\" value=\"[% display_name %]\" type=\"text\" autocomplete=\"off\"/>\n        <input name=\"firstsearch\" type=\"hidden\" value=\"on\">\n        <div class=\"btn-group nd_navbar-search-group\">\n          <button class=\"btn btn-inverse nd_navbar-search-icon\">\n            <span style=\"font-size: 18px;\">\n              <i id=\"navsearchgo\" class=\"icon-search\"></i>\n            </span>\n          </button>\n          <button class=\"btn btn-inverse dropdown-toggle nd_navbar-search-caret\" data-toggle=\"dropdown\">\n            <span class=\"caret\" style=\"border-top-color: #999; border-bottom-color: #999\"></span>\n          </button>\n          <ul class=\"dropdown-menu\">\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"device\">Search Devices</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"node\">Search Nodes</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"vlan\">Search VLANs</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"port\">Search Ports</a></li>\n          </ul>\n        </div>\n      </form>\n      <ul class=\"nav pull-right\">\n        <li class=\"nd_navbar-text\">Logged in as&nbsp;</li>\n        <li class=\"dropdown\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n          [% IF user_has_role('admin') %]\n            <i class=\"icon-user text-error\"></i>\n          [% ELSIF user_has_role('port_control') %]\n            <i class=\"icon-user text-warning\"></i>\n          [% ELSE %]\n            <i class=\"icon-user\"></i>\n          [% END %]&nbsp;\n            [% session.logged_in_fullname || session.logged_in_user | html_entity %] <b class=\"caret\"></b>\n          </a>\n          <ul class=\"dropdown-menu\">\n          [% IF NOT ( user_has_role('ldap') OR user_has_role('radius') ) %]\n            <li><a href=\"[% uri_for('/password') %]\">Change Password</a></li>\n          [% END %]\n          [% IF NOT settings.no_auth %]\n            <li><a href=\"[% uri_for('/logout') %]\">Log Out</a></li>\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n      </ul>\n      [% END %]\n    </div>\n  </div>\n</div>\n\n[% content %]\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/common.js' -%]\n</script>\n\n</body>\n</html>\n", "<div class=\"container\">\n  <div class=\"row nd_hero-row\">\n    <div class=\"span8 offset2\">\n      [% IF vars.passchange_ok %]\n      <div class=\"alert alert-success fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Password successfully updated.\n      </div>\n      [% END %]\n      [% IF vars.passchange_failed %]\n      <div class=\"alert alert-error fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Incorrect current password, or new passwords did not match. Please try again.\n      </div>\n      [% END %]\n      <div class=\"hero-unit\">\n        <h2>Change Password</h2>\n        <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/password') %]\">\n          <div class=\"form-horizontal\">\n            <input placeholder=\"Current Password\" class=\"span2\" name=\"old\" type=\"password\" required=\"required\"/><br/>\n            <input placeholder=\"New Password\" class=\"span2\" name=\"new\" type=\"password\" required=\"required\"/>\n            <input placeholder=\"Confirm New Password\" class=\"span2\" name=\"confirm\" type=\"password\" required=\"required\"/>\n            <button type=\"submit\" class=\"btn btn-info\">Save</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div> <!-- /container -->\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar nd_sidebar-pinned\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin nd_sidebar-pin-clicked\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n\n      <div class=\"tab-content\">\n        <div id=\"[% report.tag %]_search\" class=\"tab-pane active\">\n          <form id=\"[% report.tag %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/report') %]\">\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% report.tag %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/report/${report.tag}.tt\" %]\n            [% CATCH %]\n            <script type=\"text/javascript\">has_sidebar[\"[% report.tag %]\"] = 0;</script>\n            [% INCLUDE \"sidebar/report/generic_report.tt\" %]\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      <li class=\"active\"><a id=\"[% report.tag %]_link\" class=\"nd_single-tab\"\n        href=\"#[% report.tag %]_pane\">[% report.label %]</a></li>\n      [% IF report.tag == 'portlog' %]\n      <span id=\"nd_device-name\">\n        <a href=\"[% device_ports %]&q=[% params.q | uri %]\">[% params.q %]</a>\n        -\n        <a href=\"[% device_ports %]&q=[% params.q | uri %]&f=[% params.f | uri %]\">[% params.f %]</a>\n      </span>\n      [% ELSIF report.provides_csv %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n      [% END %]\n    </ul>\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"[% report.tag %]_pane\"></div>\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/report.js' -%]\n</script>\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Pin Sidebar\" data-container=\"body\"></i>\n      <div class=\"tab-content\">\n        [% FOREACH tab IN settings._search_tabs %]\n        <div id=\"[% tab.tag %]_search\" class=\"tab-pane [% 'active' IF params.tab == tab.tag %]\">\n          <form id=\"[% tab.tag %]_form\" class=\"nd_sidebar-form form-stacked\" method=\"get\" action=\"[% uri_for('/search') %]\">\n            <input name=\"tab\" value=\"[% tab.tag %]\" type=\"hidden\"/>\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/search/${tab.tag}.tt\" %]\n            [% CATCH %]\n            <!-- no \"[% tab.tag %]\" search options -->\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n        [% END %]\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      [% FOREACH tab IN settings._search_tabs %]\n      <li[% ' class=\"active\"' IF params.tab == tab.tag %]><a id=\"[% tab.tag %]_link\" href=\"#[% tab.tag %]_pane\">[% tab.label %]</a></li>\n      [% END %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n    </ul>\n    <div class=\"tab-content\">\n      [% FOREACH tab IN settings._search_tabs %]\n      <div class=\"tab-pane[% ' active' IF params.tab == tab.tag %]\" id=\"[% tab.tag %]_pane\"></div>\n      [% END %]\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/search.js' -%]\n</script>\n", "\n            <span class=\"nd_sidebar-title\"><em>Neighbor Map Controls</em></span>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix nd_netmap-sidebar\">\n              <ul class=\"muted nd_netmap-sidebar-help\">\n                <li>Tip: shift-drag to lasso</li>\n                <li><a href=\"https://github.com/netdisco/netdisco/wiki/Network-Map\" target=\"_blank\">User Guide\n                  <i class=\"icon-external-link\"></i></a></li>\n              </ul>\n            </div>\n\n            <div class=\"clearfix control-group nd_netmap-sidebar\">\n              <div class=\"checkbox pull-left\">\n                <label>\n                  <input type=\"checkbox\" name=\"showips\" id=\"nd_showips\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.showips %]\n                    data-toggle=\"toggle\" data-size=\"small\" data-width=\"30\"\n                    data-on=\"Show\" data-off=\" \" data-onstyle=\"success\">\n                  <span onclick=\"$('#nd_showips').bootstrapToggle('toggle')\">&nbsp;Management IP</span>\n                </label>\n              </div>\n              <div class=\"checkbox pull-left\">\n                <label>\n                  <input type=\"checkbox\" name=\"showspeed\" id=\"nd_showspeed\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.showspeed %]\n                    data-toggle=\"toggle\" data-size=\"small\" data-width=\"30\"\n                    data-on=\"Show\" data-off=\" \" data-onstyle=\"success\">\n                  <span onclick=\"$('#nd_showspeed').bootstrapToggle('toggle')\">&nbsp;Link Speed</span>\n                </label>\n              </div>\n            </div>\n\n            <label><span id=\"\">Positions: </span>\n                  <button id=\"nd_netmap-save\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                  <i class=\"icon-save icon-large pull-left nd_navbar-icon\"></i> Save</button>\n            </label>\n\n            <table margin=\"0\" border=\"0\" class=\"nd_netmap-pin-controls\">\n            <tr>\n              <td class=\"nd_netmap-pin-controls-top-row\">\n                <button id=\"nd_netmap-releaseonly\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-unlock icon-large pull-left nd_navbar-icon\"></i> Lasso</button>\n              </td>\n              <td class=\"nd_netmap-pin-controls-top-row\">\n                <button id=\"nd_netmap-pinonly\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-lock icon-large pull-left nd_navbar-icon\"></i> Lasso</button>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <button id=\"nd_netmap-releaseall\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-unlock icon-large pull-left nd_navbar-icon\"></i> All</button>\n              </td>\n              <td>\n                <button id=\"nd_netmap-zoomtodevice\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Device</button>\n              </td>\n            </tr>\n            </table>\n\n            <hr class=\"nd_sidebar-hr\"/>\n\n            <div class=\"radio radio-success\">\n                <input type=\"radio\" name=\"mapshow\" id=\"nd_mapshow-all\"\n                [% 'checked' IF vars.sidebar_defaults.device_netmap.mapshow == 'all' %] value=\"all\">\n                <label for=\"nd_mapshow-all\">All Devices</label>\n            </div>\n            <div class=\"radio radio-success\">\n                <input type=\"radio\" name=\"mapshow\" id=\"nd_mapshow-neighbors\"\n                [% 'checked' IF vars.sidebar_defaults.device_netmap.mapshow == 'neighbors' %] value=\"neighbors\">\n                <label for=\"nd_mapshow-neighbors\">Only Neighbors</label>\n            </div>\n\n            <label><span id=\"nd_vlan-label-text\">Carrying VLAN: </span>\n              <input name=\"vlan\" id=\"nd_vlan-entry\" class=\"input-mini\" type=\"number\" placeholder=\"ID\"\n                value=\"[% params.vlan | html_entity %]\" type=\"text\"/>\n            </label>\n\n            [% IF hgroup_list.size %]\n            <select class=\"nd_side-select\" size=\"[% hgroup_list.size > 4 ? 4 : hgroup_list.size %]\"\n              multiple name=\"hgroup\" id=\"nd_hgroup-select\"\n              rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Host Groups\">\n              [% FOREACH opt IN hgroup_list.pairs %]\n              <option[% ' selected=\"selected\"' IF hgroup_lkp.exists(opt.key) %]\n                value=\"[% opt.key %]\">[% opt.value | html_entity %]</option>\n              [% END %]\n            </select>\n            [% END %]\n            [% IF lgroup_list.size %]\n            <select class=\"nd_side-select\" size=\"[% lgroup_list.size > 4 ? 4 : lgroup_list.size %]\"\n              multiple name=\"lgroup\" id=\"nd_lgroup-select\"\n              rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Device Locations\">\n              [% FOREACH loc IN lgroup_list %]\n              <option[% ' selected=\"selected\"' IF lgroup_lkp.exists(loc) %]\n                value=\"[% loc %]\">[% loc | html_entity %]</option>\n              [% END %]\n            </select>\n            [% END %]\n\n            <div class=\"clearfix nd_netmap-sidebar\">\n\n              [% IF hgroup_list.size OR lgroup_list.size %]\n              <div class=\"clearfix input-prepend\">\n              <label><span id=\"nd_colorby-label-text\">Color by: </span>\n                <select id=\"nd_colorby\" name=\"colorby\">\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'off' %]\n                    value=\"off\">Off</option>\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'speed' %]\n                    value=\"speed\">Throughput</option>\n                  [% IF hgroup_list.size %]\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'hgroup' %]\n                    value=\"hgroup\">Host Group</option>\n                  [% END %]\n                  [% IF lgroup_list.size %]\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'lgroup' %]\n                    value=\"lgroup\">Location</option>\n                  [% END %]\n                </select>\n              </label>\n              </div>\n              [% END %]\n\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"dynamicsize\" name=\"dynamicsize\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.dynamicsize %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"dynamicsize\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Dynamic Size</span>\n                </label>\n              </div>\n\n            </div>\n\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n                <i class=\"icon-pencil icon-large pull-left nd_navbar-icon\"></i>\n            Redraw Map</button>\n", "\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <input id=\"nd_ports-form-prefer-field\" name=\"prefer\" value=\"[% params.prefer | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <i class=\"nd_field-clear-icon icon-trash icon-large\"\n                 rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Show all Ports\"\n                 id=\"f_clear_btn\" data-btn-for=\"port\"></i>\n              <input id=\"nd_port-query\" placeholder=\"Port, Name or VLAN\"\n                name=\"f\" value=\"[% params.f | html_entity %]\" type=\"text\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Filter by Port, Name or VLAN\"/>\n              <div class=\"clearfix input-prepend nd_port-partial\">\n                <label class=\"add-on nd_port-partial-label\">\n                  <input type=\"checkbox\" id=\"partial\"\n                    name=\"partial\"[% ' checked=\"checked\"' IF params.partial %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"partial\">\n                  <span class=\"nd_port-partial-checkbox uneditable-input\">Partial Match</span>\n                </label>\n                <label class=\"add-on nd_port-invert-label\">\n                  <input type=\"checkbox\" id=\"invert\"\n                    name=\"invert\"[% ' checked=\"checked\"' IF params.invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"invert\">\n                  <span class=\"nd_port-invert-checkbox uneditable-input\">Not</span>\n                </label>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_legend\">\n                <label class=\"nd_collapser\">Legend\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_legend\" class=\"collapse\">\n                <ul class=\"icons-ul\"><!-- nd_inputs-list unstyled\"> -->\n                  <li><i class=\"icon-li icon-angle-up text-success\"></i>&nbsp; Link Up</li>\n                  <li><i class=\"icon-li icon-arrow-down text-error\"></i>&nbsp; Link Down</li>\n                  <li><i class=\"icon-li icon-circle-arrow-down text-success\"></i>&nbsp; Port Free</li>\n                  <li><i class=\"icon-li icon-remove\"></i>&nbsp; Admin Disabled</li>\n                  <li><i class=\"icon-li icon-exclamation-sign text-error\"></i>&nbsp; Error Disabled</li>\n                  <li><i class=\"icon-li icon-ban-circle text-info\"></i>&nbsp; Blocking</li>\n                  <li><i class=\"icon-li icon-off\"></i>&nbsp; PoE Disabled</li>\n                  <li><i class=\"icon-li icon-off nd_power-on\"></i>&nbsp; PoE Enabled</li>\n                  <li><i class=\"icon-li icon-link text-warning\"></i>&nbsp; Manual Topology</li>\n                  <li><i class=\"icon-li icon-link\"></i>&nbsp; Neighbor Device</li>\n                  <li><i class=\"icon-li icon-unlink text-error\"></i>&nbsp; Neighbor Inacessible</li>\n                  <li><i class=\"icon-li icon-phone\"></i>&nbsp; IP Phone</li>\n                  <li><i class=\"icon-li icon-signal\"></i>&nbsp; Wireless Client</li>\n                  <li><i class=\"icon-li icon-rss\"></i>&nbsp; Wireless Access Point</li>\n                  <li><i class=\"icon-li icon-book\"></i>&nbsp; Archived Data</li>\n                  <li><i class=\"icon-li icon-group\"></i>&nbsp; Link Aggregate</li>\n                  [% IF user_has_role('port_control') %]\n                  <li><i class=\"icon-li icon-refresh icon-spin\"></i>&nbsp; Click \"Update View\"</li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_columns\">\n                <label class=\"nd_collapser\">Display Columns\n                <i class=\"nd_arrow-up-down-right icon-chevron-down icon-large\"></i>\n                </label></span>\n              <div id=\"nd_columns\" class=\"collapse in\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  [% FOREACH item IN settings.port_columns %]\n                  [% NEXT IF item.name == 'c_admin' AND NOT user_has_role('port_control') %]\n                  <li>\n                    <label class=\"checkbox\">\n                      <input type=\"checkbox\" id=\"[% item.name | html_entity %]\"\n                        name=\"[% item.name | html_entity %]\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.device_ports.${item.name} %] />\n                      [% IF item.name == 'c_admin' %]\n                        <span class=\"label label-info\">[% item.label | html_entity %]</span>\n                      [% ELSE %]\n                        [% item.label | html_entity %]\n                      [% END %]\n                    </label>\n                  </li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_nodeprops\">\n                <label class=\"nd_collapser\">Node Properties\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_nodeprops\" class=\"collapse\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  <li>\n                    <em class=\"muted\">MAC address format:</em><br/>\n                    <select id=\"nd_mac-format\" name=\"mac_format\">\n                      [% FOREACH format IN [ 'IEEE', 'Cisco', 'Microsoft', 'Sun' ] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.mac_format == format %]>[% format %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                  [% FOREACH item IN settings.connected_properties %]\n                  <li>\n                    <label class=\"checkbox\">\n                      <input type=\"checkbox\" id=\"[% item.name | html_entity %]\"\n                        name=\"[% item.name | html_entity %]\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.device_ports.${item.name} %] />\n                      [% item.label | html_entity %]\n                    </label>\n                  </li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_portprops\">\n                <label class=\"nd_collapser\">Port Properties\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_portprops\" class=\"collapse\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  <li>\n                    <em class=\"muted\">Mark as Free if Down for:</em><br/>\n                    <select id=\"nd_days-select\" name=\"age_num\">\n                      [% FOREACH count IN [1..31] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.age_num == count %]>[% count %]</option>\n                      [% END %]\n                    </select>\n                    <select id=\"nd_age-select\" name=\"age_unit\">\n                      [% FOREACH unit IN [ 'days', 'weeks', 'months', 'years' ] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.age_unit == unit %]>[% unit %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                  <li>\n                    <em class=\"muted\">Show Ports with Status:</em><br/>\n                    <div class=\"clearfix\">\n                      <select id=\"nd_port-state-select\" size=\"4\" multiple name=\"port_state\">\n                        <option selected=\"selected\" value=\"up\">Link Up</option>\n                        <option selected=\"selected\" value=\"free\">Port Free</option>\n                        <option selected=\"selected\" value=\"down\">Link Down</option>\n                        <option selected=\"selected\" value=\"shut\">Admin Disabled</option>\n                      </select>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"btn-group\">\n              <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info nd_sidebar-btn-drop\">\n                <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Update View</button>\n              <button class=\"btn btn-info dropdown-toggle nd_sidebar-btn-drop-drop\" data-toggle=\"dropdown\">\n                <span class=\"caret\"></span>\n              </button>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"\">Default Search</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"port\">Filter by Port</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"name\">Filter by Name</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"vlan\">Filter by VLAN</a></li>\n              </ul>\n            </div>\n\n", "\n            <div class=\"clearfix\">\n              <input id=\"nd_ipinventory-subnet\" class=\"nd_sidebar-topinput nd_colored-input\"\n                placeholder=\"CIDR Prefix/Subnet\" required=\"required\"\n                name=\"subnet\" value=\"[% params.subnet | html_entity %]\" type=\"text\" autocomplete=\"off\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Prefix/Subnet in CIDR Format\"/>\n            </div>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Date Range</strong></em></label>\n              </legend>\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF params.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              <div class=\"clearfix\">\n                <input class=\"nd_side-input\" id=\"daterange\" required=\"required\"\n                  type=\"text\" name=\"daterange\" value=\"[%\n                    (params.exists('daterange') ? params.daterange : to_daterange()) | html_entity %]\"/>\n              </div>\n            </fieldset>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n              <div class=\"clearfix\">\n                <ul class=\"unstyled\">\n                  <li>\n                    <em class=\"muted\">Oldest records limit:</em><br/>\n                    <select id=\"nd_mac-format\" class=\"nd_side-select\" name=\"limit\">\n                      [% FOREACH size IN [ '32', '64', '128', '256', '512', '1024', '2048', '4096', '8192' ] %]\n                      <option[% ' selected=\"selected\"' IF (params.limit == size OR (NOT params.limit AND size == 2048)) %]>\n                        [% size %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                </ul>\n                <div class=\"clearfix input-prepend\"\n                    rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Applies to IPv4 Only\">\n                  <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"never\"\n                    name=\"never\"[% ' checked=\"checked\"' IF (params.never OR vars.sidebar_defaults.report_ipinventory.never) %]/>\n                  </label>\n                  <label class=\"nd_checkboxlabel\" for=\"never\">\n                    <span class=\"nd_searchcheckbox uneditable-input\">List IP's Never Seen</span>\n                  </label>\n                </div>\n              </div>\n            </fieldset>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search IPs</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Module Search</em></p>\n            <div class=\"clearfix\">\n              <i id=\"device_clear_btn\" data-btn-for=\"device\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Device\"\n                type=\"text\" name=\"device\" value=\"[% params.dns | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Device IP, DNS, Description, Name, Location, Serial, or Contact\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"description_clear_btn\" data-btn-for=\"description\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Description\"\n                type=\"text\" name=\"description\" value=\"[% params.description | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Description\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"name_clear_btn\" data-btn-for=\"name\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Name\"\n                type=\"text\" name=\"name\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Name\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"type_clear_btn\" data-btn-for=\"type\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Type\"\n                type=\"text\" name=\"type\" value=\"[% params.type | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Type\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"model_clear_btn\" data-btn-for=\"model\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Model\"\n                type=\"text\" name=\"model\" value=\"[% params.model | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Model\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"serial_clear_btn\" data-btn-for=\"serial\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Serial\"\n                type=\"text\" name=\"serial\" value=\"[% params.serial | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Serial\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% class_list.size > 5 ? 5 : class_list.size %]\"\n                multiple name=\"class\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Class\">\n                [% FOREACH opt IN class_list %]\n                <option[% ' selected=\"selected\"' IF class_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"fruonly\"\n                  name=\"fruonly\"[% ' checked=\"checked\"' IF (params.fruonly OR vars.sidebar_defaults.report_moduleinventory.fruonly) %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"fruonly\">\n                <span class=\"nd_searchcheckbox uneditable-input\">FRU Only</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF (params.matchall OR vars.sidebar_defaults.report_moduleinventory.matchall) %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            </fieldset>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Modules</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>NetBIOS Domain</em></p>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% domain_list.size > 8 ? 8 : domain_list.size %]\"\n                multiple name=\"domain\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Domain\">\n                [% FOREACH opt IN domain_list %]\n                  [% UNLESS opt == '' %]\n                    <option[% ' selected=\"selected\"' IF domain_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                  [% ELSE %]\n                    <option value=\"blank\"[% ' selected=\"selected\"' IF domain_lkp.exists('blank') %]>[% '(Blank Domain)' | html_entity %]</option>     \n                  [% END %]\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search NetBIOS</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <input class=\"nd_side-input\" placeholder=\"Remote ID (host name)\"\n                type=\"text\" name=\"remote_id\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote ID\"/>\n            </div>\n            <div class=\"clearfix\">\n              <input class=\"nd_side-input\" placeholder=\"Remote Type (platform)\"\n                type=\"text\" name=\"remote_type\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote Type\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% type_list.size > 8 ? 8 : type_list.size %]\"\n                multiple name=\"remote_type\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote Type\">\n                [% FOREACH opt IN type_list %]\n                    <option[% ' selected=\"selected\"' IF type_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"phones\"\n                  name=\"phones\"[% ' checked=\"checked\"' IF params.phones %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"phones\">\n                <span class=\"nd_searchcheckbox uneditable-input\"><i class=\"icon-li icon-phone\"></i>&nbsp; IP Phones</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"aps\"\n                  name=\"aps\"[% ' checked=\"checked\"' IF params.aps %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"aps\">\n                <span class=\"nd_searchcheckbox uneditable-input\"><i class=\"icon-li icon-signal\"></i>&nbsp; Wireless APs</span>\n              </label>\n            </div>\n            <div class=\"clearfix\"><p></p></div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF params.matchall %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Nodes</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Vendor Search</em></p>\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Vendor</strong></em></label>\n              </legend>\n              <div class=\"clearfix\">\n                <select class=\"nd_side-select nd_colored-input\" size=\"[% vendor_list.size > 8 ? 8 : vendor_list.size %]\"\n                  multiple name=\"vendor\"\n                  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Vendor\">\n                  [% FOREACH opt IN vendor_list %]\n                    [% UNLESS opt == '' %]\n                      <option[% ' selected=\"selected\"' IF vendor_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                    [% ELSE %]\n                      <option value=\"blank\"[% ' selected=\"selected\"' IF vendor_lkp.exists('blank') %]>[% '(Unknown Vendor)' | html_entity %]</option>     \n                    [% END %]\n                  [% END %]\n                </select>\n              </div>\n            </fieldset>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n                <div class=\"clearfix input-prepend\"\n                    rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Include Archived Data\">\n                  <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"archived\"\n                    name=\"archived\"[% ' checked=\"checked\"' IF params.archived %]/>\n                  </label>\n                  <label class=\"nd_checkboxlabel\" for=\"archived\">\n                    <span class=\"nd_searchcheckbox uneditable-input\">Archived Data</span>\n                  </label>\n                </div>\n            </fieldset>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Vendors</button>\n\n", "\n            <div class=\"clearfix nd_netmap-sidebar\">\n              <em class=\"muted nd_sidebar-label\">Filter by VLAN:</em><br/>\n              <input id=\"nd_port-query\" placeholder=\"\" type=\"number\"\n                name=\"vlan\" value=\"[% params.vlan | html_entity %]\" type=\"text\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"VLAN\"/>\n            </div>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n                <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Ports</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Details by SSID</em></p>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% ssid_list.size > 8 ? 8 : ssid_list.size %]\"\n                multiple name=\"ssid\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"SSID\">\n                [% FOREACH opt IN ssid_list %]\n                    <option[% ' selected=\"selected\"' IF ssid_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search SSID</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Port Utilization</em></p>\n            <div class=\"clearfix\">\n              <em class=\"muted\">Mark as Free if Down for:</em><br/>\n              <select id=\"nd_days-select\" name=\"age_num\">\n                [% FOREACH count IN [1..31] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.report_portutilization.age_num == count %]>[% count %]</option>\n                [% END %]\n              </select>\n              <select id=\"nd_age-select\" name=\"age_unit\">\n                [% FOREACH unit IN [ 'days', 'weeks', 'months', 'years' ] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.report_portutilization.age_unit == unit %]>[% unit %]</option>\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Run Report</button>\n\n", "\n            <div class=\"clearfix\">\n              <input id=\"nd_ipinventory-subnet\" class=\"nd_sidebar-topinput nd_colored-input\"\n                placeholder=\"CIDR Prefix/Subnet\" required=\"required\"\n                name=\"subnet\" value=\"[% params.subnet | html_entity %]\" type=\"text\" autocomplete=\"off\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Prefix/Subnet in CIDR Format\"/>\n            </div>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Date Range</strong></em></label>\n              </legend>\n              <!--\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF params.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              -->\n              <div class=\"clearfix\">\n                <input class=\"nd_side-input\" id=\"daterange\" required=\"required\"\n                  type=\"text\" name=\"daterange\" value=\"[%\n                    (params.exists('daterange') ? params.daterange : to_daterange()) | html_entity %]\"/>\n              </div>\n            </fieldset>\n\n            <button id=\"[% report.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Subnets</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Device Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"dns\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"dns_clear_btn\" data-btn-for=\"dns\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"DNS\"\n                type=\"text\" name=\"dns\" value=\"[% params.dns | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"DNS\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"ip\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"ip_clear_btn\" data-btn-for=\"ip\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"IP Address\"\n                type=\"text\" name=\"ip\" value=\"[% params.ip | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"IP Address\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"name\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"name_clear_btn\" data-btn-for=\"name\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"System Name\"\n                type=\"text\" name=\"name\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"System Name\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"location\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"location_clear_btn\" data-btn-for=\"location\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"Location\"\n                type=\"text\" name=\"location\" value=\"[% params.location | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Location\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"description\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"description_clear_btn\" data-btn-for=\"description\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"Description\"\n                type=\"text\" name=\"description\" value=\"[% params.description | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Description\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% model_list.size > 5 ? 5 : model_list.size %]\"\n                multiple name=\"model\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Model\">\n                [% FOREACH opt IN model_list %]\n                <option[% ' selected=\"selected\"' IF model_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% os_list.size > 5 ? 5 : os_list.size %]\"\n                multiple name=\"os\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Operating System\">\n                [% FOREACH opt IN os_list %]\n                <option[% ' selected=\"selected\"' IF os_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% os_ver_list.size > 5 ? 5 : os_ver_list.size %]\"\n                multiple name=\"os_ver\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"OS Release\">\n                [% FOREACH opt IN os_ver_list %]\n                <option[% ' selected=\"selected\"' IF os_ver_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% vendor_list.size > 5 ? 5 : vendor_list.size %]\"\n                multiple name=\"vendor\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Vendor\">\n                [% FOREACH opt IN vendor_list %]\n                <option[% ' selected=\"selected\"' IF vendor_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"3\"\n                multiple name=\"layers\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Layer\">\n                [% FOREACH opt IN [ 1 .. 7 ] %]\n                <option[% ' selected=\"selected\"' IF layers_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_device.matchall %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Devices</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"stamps\"\n                  name=\"stamps\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.stamps %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"stamps\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Time Stamps</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"deviceports\"\n                  name=\"deviceports\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.deviceports %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"deviceports\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Device Ports</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"show_vendor\"\n                  name=\"show_vendor\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.show_vendor %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"show_vendor\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Vendor</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"archived\"\n                  name=\"archived\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.archived %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"archived\">\n                <span class=\"nd_searchcheckbox uneditable-input\">\n                  Archived Data &nbsp;<i class=\"icon-book text-warning\"></i></span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on nd_sidebar-legend\">\n                <input type=\"checkbox\" id=\"node_partial\"\n                  name=\"partial\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.partial %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"node_partial\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Partial Match</span>\n              </label>\n            </div>\n            <div class=\"clearfix\">\n              <em class=\"muted\">Date Range:</em><br/>\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              <input class=\"nd_side-input\" id=\"daterange\"\n                type=\"text\" name=\"daterange\" value=\"[% vars.sidebar_defaults.search_node.daterange | html_entity %]\"/>\n            </div>\n            <div class=\"clearfix\">\n              <em class=\"muted\">MAC address format:</em><br/>\n              <select id=\"nd_node-mac-format\" name=\"mac_format\">\n                [% FOREACH format IN [ 'IEEE', 'Cisco', 'Microsoft', 'Sun' ] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.search_node.mac_format == format %]>[% format %]</option>\n                [% END %]\n              </select>\n            </div>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Nodes</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Port Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_partial\"\n                  name=\"partial\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.partial %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_partial\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Partial Match</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_uplink\"\n                  name=\"uplink\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.uplink %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_uplink\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Uplinks</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_ethernet\"\n                  name=\"ethernet\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.ethernet %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_ethernet\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Ethernet Only</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Ports</button>\n"], "fixing_code": ["use strict;\nuse warnings;\nuse Module::Build;\n\nModule::Build->new(\n  module_name => 'App::Netdisco',\n  license     => 'bsd',\n  dynamic_config => 1,\n  configure_requires => {\n    'DBIx::Class' => '0.082810',\n    'Module::Build' => '0.42',\n  },\n  build_requires => {\n    'ExtUtils::Config' => '0',\n    'ExtUtils::Helpers' => '0',\n    'ExtUtils::InstallPaths' => '0',\n  },\n  requires => {\n    'aliased' => '0',\n    'autovivification' => '0',\n    'namespace::clean' => '0.24',\n    'version' => '0.9902',\n    'Algorithm::Cron' => '0.07',\n    'AnyEvent' => '7.05',\n    'AnyEvent::DNS::EtcHosts' => '0',\n    'App::cpanminus' => '1.6108',\n    'App::local::lib::helper' => '0.07',\n    'Archive::Extract' => '0',\n    'Authen::Radius' => '0',\n    'CGI::Expand' => '2.05',\n    'Data::Printer' => '0',\n    'DBD::Pg' => '0',\n    'DBIx::Class' => '0.082841',\n    'DBIx::Class::Helpers' => '2.033004',\n    'Daemon::Control' => '0.001006',\n    'Dancer' => '1.3132',\n    'Dancer::Plugin::DBIC' => '0.2001',\n    'Dancer::Plugin::Auth::Extensible' => '0.30',\n    'Dancer::Plugin::Passphrase' => '2.0.1',\n    'Dancer::Plugin::Swagger' => '0',\n    'Dancer::Session::Cookie' => '0.27',\n    'Expect' => '0',\n    'File::ShareDir' => '1.03',\n    'File::Slurper' => '0.009',\n    'Guard' => '1.022',\n    'HTML::Parser' => '3.70',\n    'HTTP::Tiny' => '0.029',\n    'IO::Socket::SSL' => '2.048',\n    'JSON' => '2.90',\n    'JSON::XS' => '3.01',\n    'List::Util' => '1.49',\n    'List::MoreUtils' => '0.428',\n    'MIME::Base64' => '3.13',\n    'Module::Load' => '0.32',\n    'Moo' => '1.001000',\n    'MCE' => '1.703',\n    'Net::Domain' => '1.23',\n    'Net::DNS' => '0.72',\n    'Net::LDAP' => '0',\n    'Net::OpenSSH' => '0',\n    'NetAddr::MAC' => '0.93',\n    'NetAddr::IP' => '4.068',\n    'Opcode' => '1.07',\n    'Package::DeprecationManager' => '0',\n    'Path::Class' => '0.32',\n    'Plack' => '1.0023',\n    'Plack::Handler::Twiggy' => '0',\n    'Plack::Middleware::Debug' => '0',\n    'Plack::Middleware::Expires' => '0.03',\n    'Plack::Middleware::ReverseProxy' => '0.15',\n    'Pod::Usage' => 0,\n    'Regexp::Common' => 2017060201,\n    'Role::Tiny' => '1.002005',\n    'Scope::Guard' => 0,\n    'Sereal' => '0',\n    'Socket6' => '0.23',\n    'Starman' => '0.4008',\n    'Storable' => '0',\n    'Sys::SigAction' => '0',\n    'SNMP::Info' => '3.68',\n    'SQL::Abstract' => '1.85',\n    'SQL::Translator' => '0.11024',\n    'Template' => '2.24',\n    'Template::AutoFilter' => '0',\n    'Template::Plugin::CSV' => '0.04',\n    'Template::Plugin::Number::Format' => '1.02',\n    'Term::ReadLine' => '0',\n    'Term::UI' => '0',\n    'Try::Tiny' => '0',\n    'URI' => '0',\n    'URL::Encode' => '0.03',\n    'URL::Encode::XS' => '0',\n    'YAML' => '0.84',\n    'YAML::XS' => '0.41',\n  },\n  recommends => {\n    'Graph' => '0',\n    'GraphViz' => '0',\n  },\n  test_requires => {\n    'Test::More' => '1.302083',\n    'Env::Path'  => '0',\n    'Test::Compile' => '0',\n    'Test::File::ShareDir::Dist' => '0',\n  },\n  script_files => [\n    'bin/nd-import-topology',\n    'bin/netdisco-db-deploy',\n    'bin/netdisco-deploy',\n    'bin/netdisco-do',\n    'bin/netdisco-backend-fg',\n    'bin/netdisco-backend',\n    'bin/netdisco-daemon-fg',\n    'bin/netdisco-daemon',\n    'bin/netdisco-web-fg',\n    'bin/netdisco-web',\n    'bin/netdisco-rancid-export',\n    'bin/netdisco-sshcollector',\n  ],\n  share_dir => 'share',\n  meta_merge => {\n    resources => {\n      homepage => 'http://netdisco.org/',\n      bugtracker => 'https://github.com/netdisco/netdisco/issues',\n      repository => 'https://github.com/netdisco/netdisco',\n      MailingList => 'https://lists.sourceforge.net/lists/listinfo/netdisco-users',\n      IRC => 'irc://irc.freenode.org/#netdisco',\n    },\n  },\n)->create_build_script;\n", "# This is the main configuration file for Netdisco web and backend apps\n#\n#    DO NOT EDIT THIS FILE\n#\n# Overrides should go to ~/environments/deployment.yml\n#\n# https://github.com/netdisco/netdisco/wiki/Configuration has\n# in depth explanations about each setting.\n\n# ----------------\n# GENERAL SETTINGS\n# ----------------\n\nlog: 'warning'\nlogger_format: '[%P] %U %L %m'\ninclude_paths:  []\ntemplate_paths: []\nsite_local_files: false\nexternal_databases: []\n\n# ------------\n# WEB FRONTEND\n# ------------\n\ndomain_suffix: []\nno_auth: false\nsuggest_guest: false\nnavbar_autocomplete: true\ntrust_remote_user: false\ntrust_x_remote_user: false\napi_token_lifetime: 3600\n#ldap:\n#  servers: []\n#  user_string: 'MYDOMAIN\\%USER%'\n#  base: \"\"\n#  proxy_user: \"\"\n#  proxy_pass: \"\"\n#  opts:\n#    debug: 3\n#  tls_opts: {}\npath: '/'\nweb_plugins:\n  - Inventory\n  - Report::PortVLANMismatch\n  - Report::PortAdminDown\n  - Report::PortBlocking\n  - Report::PortMultiNodes\n  - Report::PortSsid\n  - Report::PortUtilization\n  - Report::ApChannelDist\n  - Report::ApClients\n  - Report::ApRadioChannelPower\n  - Report::HalfDuplex\n  - Report::DeviceAddrNoDNS\n  - Report::DeviceByLocation\n  - Report::InventoryByModelByOS\n  - Report::DeviceDnsMismatch\n  - Report::DevicePoeStatus\n  - Report::DuplexMismatch\n  - Report::IpInventory\n  - Report::ModuleInventory\n  - Report::Netbios\n  - Report::NodeMultiIPs\n  - Report::NodeVendor\n  - Report::NodesDiscovered\n  - Report::SsidInventory\n  - Report::VlanInventory\n  - Report::SubnetUtilization\n  - Report::PortLog\n  - AdminTask::JobQueue\n  - AdminTask::NodeMonitor\n  - AdminTask::Topology\n  - AdminTask::PollerPerformance\n  - AdminTask::PseudoDevice\n  - AdminTask::SlowDevices\n  - AdminTask::UndiscoveredNeighbors\n  - AdminTask::OrphanedDevices\n  - AdminTask::DuplicateDevices\n  - AdminTask::TimedOutDevices\n  - AdminTask::UserLog\n  - AdminTask::Users\n  - Search::Device\n  - Search::Node\n  - Search::VLAN\n  - Search::Port\n  - Device::Details\n  - Device::Ports\n  - Device::Modules\n  - Device::Neighbors\n  - Device::Addresses\n  - Device::Vlans\nextra_web_plugins: []\nsidebar_defaults:\n  search_node:\n    stamps:      { default: checked }\n    deviceports: { default: checked }\n    show_vendor: { default: null }\n    archived:    { default: null }\n    partial:     { default: null }\n    age_invert:  { default: null }\n    daterange:   { default: null }\n    mac_format:  { default: IEEE }\n  search_port:\n    partial:     { default: checked }\n    uplink:      { default: null }\n    ethernet:    { default: checked }\n  search_device:\n    matchall:    { default: checked }\n  device_ports:\n    c_admin:       { label: 'Port Controls', default: null, idx: 0 }\n    c_port:        { label: 'Port', default: checked, idx: 1 }\n    c_descr:       { label: 'Description', default: null, idx: 2 }\n    c_comment:     { label: 'Last Comment', default: null, idx: 3 }\n    c_type:        { label: 'Type', default: null, idx: 4 }\n    c_duplex:      { label: 'Duplex', default: null, idx: 5 }\n    c_lastchange:  { label: 'Last Change', default: null, idx: 6 }\n    c_name:        { label: 'Name', default: checked, idx: 7 }\n    c_speed:       { label: 'Speed (running)', default: null, idx: 8 }\n    c_speed_admin: { label: 'Speed (configured)', default: null, idx: 9 }\n    c_error:       { label: 'Error Message', default: null, idx: 10 }\n    c_mac:         { label: 'Port MAC', default: null, idx: 11 }\n    c_mtu:         { label: 'MTU', default: null, idx: 12 }\n    c_pvid:        { label: 'Native VLAN', default: checked, idx: 13 }\n    c_vmember:     { label: 'VLAN Membership', default: checked, idx: 14 }\n    c_power:       { label: 'PoE', default: null, idx: 15 }\n    c_ssid:        { label: 'SSID', default: null, idx: 16 }\n    c_nodes:       { label: 'Connected Nodes', default: null, idx: 17 }\n    c_neighbors:   { label: 'Connected Devices', default: checked, idx: 18 }\n    c_stp:         { label: 'Spanning Tree', default: null, idx: 19 }\n    c_up:          { label: 'Status', default: null, idx: 20 }\n    mac_format:    { default: IEEE }\n    n_inventory:   { label: 'Inventory Data', default: checked, idx: 0 }\n    n_detailed_inventory: { label: 'Detailed Inventory', default: null, idx: 1 }\n    n_age:         { label: 'Age Stamp', default: null, idx: 2 }\n    n_ip4:         { label: 'IPv4 Addresses', default: checked, idx: 3 }\n    n_ip6:         { label: 'IPv6 Addresses', default: checked, idx: 4 }\n    n_netbios:     { label: 'NetBIOS Name', default: checked, idx: 5 }\n    n_ssid:        { label: 'SSID', default: checked, idx: 6 }\n    n_vendor:      { label: 'Vendor', default: null, idx: 7 }\n    n_archived:    { label: 'Archived Data', default: null, idx: 8 }\n    age_num:       { default: 3 }\n    age_unit:      { default: months }\n  device_netmap:\n    showips:     { default: null }\n    showspeed:   { default: null }\n    mapshow:     { default: neighbors }\n    colorby:     { default: speed }\n    dynamicsize: { default: checked }\n  report_moduleinventory:\n    fruonly:     { default: checked }\n    matchall:    { default: checked }\n  report_portutilization:\n    age_num:      { default: 3 }\n    age_unit:     { default: months }\ndevice_port_col_idx_left: 0\ndevice_port_col_idx_mid: 2\ndevice_port_col_idx_right: -1\njobqueue_refresh: 10\nsafe_password_store: true\nreports: []\nsystem_reports:\n  - tag: portserrordisabled\n    label: 'Error Disabled Ports'\n    category: Port\n    columns:\n    - { ip: Device } \n    - { dns: DNS } \n    - { port: Port } \n    - { name: Description } \n    - { reason: Reason } \n    query: |\n      SELECT dp.ip, d.dns, dp.port, dp.name, properties.error_disable_cause AS reason\n        FROM device_port dp\n        INNER JOIN device_port_properties properties USING (ip, port)\n        LEFT JOIN device d USING (ip)\n      WHERE properties.error_disable_cause IS NOT NULL\n      ORDER BY dp.ip, dp.port\ntable_pagesize: 10\ntable_showrecordsmenu:\n  - [10, 25, 50, 100, '-1']\n  - [10, 25, 50, 100, 'All']\nvlanctl: true\nportctl_nameonly: false\nportctl_nophones: false\nportctl_vlans: false\nportctl_uplinks: false\nport_control_reasons:\n  address:     'Address Allocation Abuse'\n  copyright:   'Copyright Violation'\n  dos:         'Denial of Service'\n  bandwidth:   'Excessive Bandwidth'\n  polling:     'Excessive Polling of DNS/DHCP/SNMP'\n  noserv:      'Not In Service'\n  exploit:     'Remote Exploit Possible'\n  compromised: 'System Compromised'\n  other:       'Other'\n  resolved:    'Issue Resolved'\ncheck_userlog: false\ndevport_vlan_limit: 150\nlogin_logo: \"\"\ndefanged_admin: 'admin'\n\n# -------------\n# NETDISCO CORE\n# -------------\n\n# mibhome is discovered from environment\n# mibdirs defaults to contents of mibhome\nhost_groups:\n  __ANY__:\n    - 'any'\n  __LOCAL_ADDRESSES__:\n    - '::1'\n    - 'fe80::/10'\n    - '127.0.0.0/8'\nhost_group_displaynames: {}\ndevice_identity: []\ncommunity: []\ncommunity_rw: []\ndevice_auth: []\nuse_legacy_rancidexport: false\nuse_legacy_sshcollector: false\nget_credentials: \"\"\nbulkwalk_off: false\nbulkwalk_no: []\nbulkwalk_repeaters: 20\nnonincreasing: false\nsnmpver: 3\nsnmptimeout: 3000000\nsnmpretries: 2\nsnmp_remoteport: {}\ndevices_no: []\ndevices_only: []\ndiscover_no: []\ndiscover_only: []\ndiscover_no_type: []\ndiscover_waps: true\ndiscover_phones: false\ndiscover_min_age: 0\nmacsuck_no: []\nmacsuck_only: []\nmacsuck_all_vlans: false\nmacsuck_no_unnamed: false\nmacsuck_no_vlan:\n  - 'fddi-default'\n  - 'token-ring-default'\n  - 'fddinet-default'\n  - 'trnet-default'\n  - 'fcoe-vsan-4048'\n  - 'SAM-vlan-boot'\n  - 'SAM-vlan-appliance-management'\n  - 'SAM-vlan-management'\nmacsuck_no_devicevlan: []\nmacsuck_unsupported: []\nmacsuck_unsupported_type: []\nmacsuck_bleed: false\nmacsuck_min_age: 0\nsnmpforce_v1: []\nsnmpforce_v2: []\nsnmpforce_v3: []\narpnip_no: []\narpnip_only: []\narpnip_min_age: 0\nnbtstat_no: []\nnbtstat_only: []\nnbtstat_max_age: 7\nnbtstat_interval: 0.02\nnbtstat_response_timeout: 1\nnode_freshness: 0\nexpire_devices: 60\nexpire_nodes: 90\nexpire_nodes_archive: 60\nexpire_jobs: 14\nexpire_userlog: 365\nexpire_nodeip_freshness: null\nstore_wireless_clients: true\nstore_modules: true\nignore_interfaces:\n  - 'EOBC'\n  - 'unrouted VLAN(?: \\d+)?'\n  - 'StackPort'\n  - 'Control Plane Interface'\n  - 'SPAN (S|R)P Interface'\n  - 'StackSub-.*'\n  - 'StackPort\\d+'\n  - 'netflow'\n  - 'Vlan\\d+-mpls layer'\n  - 'BRI\\S+-Bearer Channel'\n  - 'BRI\\S+-Physical'\n  - 'BRI\\S+-Signalling'\n  - 'BRI\\S+-Signaling'\n  - 'Embedded-Service-Engine\\d+\\/\\d+'\n  - 'Virtual-Template\\d+'\n  - 'Virtual-Access\\d+'\n  - '(E|T)\\d \\d\\/\\d\\/\\d'\n  - 'InLoopback0'\n  - 'NULL\\d'\n  - 'Register-Tunnel\\d'\n  - 'Blade-Aggregation\\d'\n  - 'M-GigabitEthernet\\d\\/\\d\\/\\d'\n  - 'Ethernet(?:-| )QOS Packet Scheduler'\n  - 'Ethernet(?:-| )WFP (?:802\\.3|Native) MAC Layer Lightweight Filter'\n  - 'ii\\d\\/\\d\\/\\d+'\nignore_notpresent_types:\n  - 'ethernetCsmacd'\n  - 'tunnel'\n  - 'ieee8023adLag'\nignore_private_nets: false\nreverse_sysname: false\nphone_capabilities:\n  - '(?i:phone)'\nphone_platforms:\n  - '(?i:mitel.5\\d{3})'\nwap_capabilities:\n  - 'wlanAccessPoint'\nwap_platforms:\n  - '(?i:\\bwap\\b)'\n  - 'cisco\\s+AIR-[L|C]?AP'\n  - '-K9W8-'\n\n# --------------\n# BACKEND DAEMON\n# --------------\n\nworkers:\n  tasks: 'AUTO * 2'\n  timeout: 600\n  sleep_time: 1\n  min_runtime: 0\n  max_deferrals: 10\n  retry_after: '7 days'\n  queue: PostgreSQL\n\n#\u00a050 minutes\njobs_stale_after: 3000\njobs_qdepth: 50\n\ndns:\n  max_outstanding: 50\n  hosts_file: '/etc/hosts'\n  no: ['group:__LOCAL_ADDRESSES__','169.254.0.0/16']\n\nschedule:\n  discoverall:\n    when: '5 7 * * *'\n  macwalk:\n    when:\n      min: 20\n  arpwalk:\n    when:\n      min: 50\n  nbtwalk:\n    when: '0 8,13,21 * * *'\n  expire:\n    when: '30 23 * * *'\n  makerancidconf: null\n\njob_prio:\n  high:\n    - location\n    - contact\n    - portcontrol\n    - portname\n    - vlan\n    - power\n  normal:\n    - discoverall\n    - discover\n    - arpwalk\n    - arpnip\n    - macwalk\n    - macsuck\n    - nbtwalk\n    - nbtstat\n    - expire\n    - stats\n\nworker_plugins:\n  - 'Arpnip'\n  - 'Arpnip::Nodes'\n  - 'Arpnip::Subnets'\n  - 'Arpwalk'\n  - 'Contact'\n  - 'Delete'\n  - 'Discover'\n  - 'Discover::CanonicalIP'\n  - 'Discover::Entities'\n  - 'Discover::Neighbors'\n  - 'Discover::Neighbors::Routed'\n  - 'Discover::Neighbors::DOCSIS'\n  - 'Discover::PortPower'\n  - 'Discover::PortProperties'\n  - 'Discover::Properties'\n  - 'Discover::VLANs'\n  - 'Discover::Wireless'\n  - 'Discover::WithNodes'\n  - 'DiscoverAll'\n  - 'DumpConfig'\n  - 'Expire'\n  - 'ExpireNodes'\n  - 'Graph'\n  - 'Location'\n  - 'Macsuck'\n  - 'Macsuck::Nodes'\n  - 'Macsuck::WirelessNodes'\n  - 'Macwalk'\n  - 'MakeRancidConf'\n  - 'NodeMonitor'\n  - 'Nbtstat'\n  - 'Nbtstat::Core'\n  - 'Nbtwalk'\n  - 'PortControl'\n  - 'PortName'\n  - 'Power'\n  - 'Psql'\n  - 'Renumber'\n  - 'SetUserToken'\n  - 'Show'\n  - 'Stats'\n  - 'Vlan'\n  - 'Vlan::Core'\n\nextra_worker_plugins: []\n\ndriver_priority:\n  restconf: 500\n  netconf:  400\n  eapi:     300\n  cli:      200\n  snmp:     100\n\n# ---------------\n# GraphViz Export\n# ---------------\n\ngraph:\n  # ---- Graph Settings ----\n  edge_color      : wheat\n\n  graph           : 'graph/netmap.gif'\n  graph_png       : 'graph/netmap.png'\n  graph_bg        : black\n  graph_clusters  : false  # try fdp layout\n  graph_color     : white\n  graph_default   : png\n  #graph_dir      : net_dir.gif\n  graph_epsilon   : 6\n  graph_layout    : twopi  # try neato or fdp too\n  graph_map       : 'graph/netmap.map'\n  graph_overlap   : scale\n  graph_nodesep   : 2\n  graph_ranksep   : .3\n  graph_raw       : 'graph/graph_raw.dot'\n  graph_splines   : false\n  graph_svg       : 'graph/netmap.svg'\n  graph_timeout   : 90\n  graph_x         : 30\n  graph_y         : 30\n\n  node_fillcolor  : dimgrey\n  node_font       : lucon\n  node_fontsize   : 46.0\n  node_fontcolor  : white\n  node_problem    : red\n  node_shape      : box\n  node_style      : filled\n  #edge_style      : setlinewidth(10)\n\n  # ---- Node Maps ----\n  # variable:matching pattern:node attribute:attribute value:key:key name\n  #node_map:\n  #  - 'label:cat(?!-g):fillcolor:blue:cat:Blue Box - Catalyst Device'\n  #  - 'label:-g:fillcolor:darkgreen:dev-g:Green Box - Gateway / Router'\n  #  - 'ip:^192.168\\.:color:yellow:dev:Yellow Border - ResNet'\n\n# ---------------\n# DANCER INTERNAL\n# ---------------\n\ncharset: 'UTF-8'\nwarnings: false\nshow_errors: false\nlogger: 'console'\nengines:\n  netdisco_template_toolkit:\n    subclass: 'Template::AutoFilter'\n    encoding: 'utf8'\n    start_tag: '[%'\n    end_tag: '%]'\n    ANYCASE: 1\n    ABSOLUTE: 1\n    PRE_CHOMP: 1\n    INCLUDE_PATH: []\n    AUTO_FILTER: 'html_entity'\nlayout: 'main'\nplugins:\n  Swagger:\n     main_api_module: 'App::Netdisco'\n     ui_url: '/swagger-ui'\n  Auth::Extensible:\n    no_api_change_warning: true\n    no_default_pages: true\n    no_login_handler: true\n    realms:\n      users:\n        provider: 'App::Netdisco::Web::Auth::Provider::DBIC'\n        schema_name: 'netdisco'\nsession: 'cookie'\nsession_cookie_key: 'this_will_be_overridden_on_webapp_startup'\ntemplate: 'netdisco_template_toolkit'\nroute_cache: true\nappname: 'Netdisco'\nbehind_proxy: false\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar nd_sidebar-pinned\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin nd_sidebar-pin-clicked\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n\n      <div class=\"tab-content\">\n        <div id=\"[% task.tag | html_entity %]_search\" class=\"tab-pane active\">\n          <form id=\"[% task.tag | html_entity %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/admin') | none %]\">\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% task.tag | html_entity %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/admintask/${task.tag}.tt\" %]\n            [% CATCH %]\n            <script type=\"text/javascript\">has_sidebar[\"[% task.tag | html_entity %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      <li class=\"active\"><a id=\"[% task.tag | html_entity %]_link\" class=\"nd_single-tab\"\n        href=\"#[% task.tag | html_entity %]_pane\">[% task.label | html_entity %]</a></li>\n      [% IF task.tag == 'jobqueue' %]\n      <span id=\"nd_device-name\">\n        <a class=\"nd_adminbutton\" name=\"delall\" href=\"#\"><i class=\"icon-trash text-error\"></i></a>\n        <a id=\"nd_countdown-refresh\" href=\"#\"><i class=\"text-success icon-refresh\"></i></a>\n        <a id=\"nd_countdown-control\" href=\"#\">\n          <i id=\"nd_countdown-control-icon\" class=\"text-success icon-play\"></i></a>\n        <span id=\"nd_countdown\"></span>\n      </span>\n      [% ELSIF task.tag == 'userlog' %]\n      <span id=\"nd_device-name\">\n        <a class=\"nd_adminbutton\" name=\"delall\" href=\"#\"><i class=\"icon-trash text-error\"></i></a>\n      </span>\n      [% ELSIF task.provides_csv %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n      [% END %]\n    </ul>\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"[% task.tag | html_entity %]_pane\"></div>\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/admintask.js' -%]\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span4 alert alert-info\">No duplicate devices found.</div>\n[% ELSE %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device IP</th>\n      <th class=\"nd_center-cell\">Contact</th>\n      <th class=\"nd_center-cell\">Location</th>\n      <th class=\"nd_center-cell\">System Name</th>\n      <th class=\"nd_center-cell\">Model</th>\n      <th class=\"nd_center-cell\">OS Version</th>\n      <th class=\"nd_center-cell\">Serial</th>\n      <th class=\"nd_center-cell\">Last Discovered</th>\n      <th class=\"nd_center-cell\">Delete</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% SET count = 0 %]\n    [% FOREACH row IN results %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') | none %]?tab=details&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% row.dns | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.contact  | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.location | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.name     | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.model    | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.os_ver   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.serial   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_discover_stamp | html_entity %]</td>\n\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-danger btn-small\"\n          data-toggle=\"modal\" data-target=\"#nd_devdel-[% count | html_entity %]\" type=\"button\">\n          <i class=\"icon-trash text-danger\"></i>\n        </button>\n\n        <div id=\"nd_devdel-[% count | html_entity %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count | html_entity %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count | html_entity %]\">Confirm Delete: [% row.ip || row.dns | html_entity %]</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <ul>\n                <li><p>This action is immediate and not reversible</p></li>\n                <li><p>All associated Nodes may be removed from the database</p></li>\n              </ul>\n            </blockquote>\n            <textarea id=\"nd_devdel-log\" class=\"input-block-level\" rows=\"2\" data-form=\"delete\"\n              placeholder=\"Enter a log message\" name=\"log\"></textarea>\n            <label class=\"checkbox\" style=\"display: block\">\n              <input id=\"nd_devdel-archive\" type=\"checkbox\" data-form=\"delete\" name=\"archive\">\n              <h4 class=\"nd_unbolden\">Archive Nodes</h4>\n            </label>\n            <input type=\"hidden\" data-form=\"delete\" value=\"[% row.ip | html_entity %]\" name=\"device\"/>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span2 alert alert-info\">The job queue is empty.</div>\n[% ELSE %]\n<table class=\"table table-bordered table-condensed table-hover nd_floatinghead\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Entered</th>\n      <th class=\"nd_center-cell\">Action</th>\n      <th class=\"nd_center-cell\">Status</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Port</th>\n      <th class=\"nd_center-cell\">Param</th>\n      <th class=\"nd_center-cell\">User</th>\n      <th class=\"nd_center-cell\">Started</th>\n      <th class=\"nd_center-cell\">Finished</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr\n      [% ' class=\"nd_jobqueueitem success\"' IF row.status == 'done' %]\n      [% ' class=\"nd_jobqueueitem error\"'   IF row.status == 'error' %]\n      [% ' class=\"nd_jobqueueitem info\"'    IF row.status.search('^queued-') %]\n      data-content=\"<pre>[% row.log | html_entity %]</pre>\"\n    >\n      <td class=\"nd_center-cell\">[% row.entered_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        [% FOREACH word IN row.action.split('_') %]\n        [% word.ucfirst | html_entity %]&nbsp;\n        [% END %]\n      </td>\n      [% IF row.status.search('^queued-') %]\n      <td class=\"nd_center-cell\">Running on &quot;[% row.status.remove('^queued-') | html_entity %]&quot;</td>\n      [% ELSE %]\n      <td class=\"nd_center-cell\">[% row.status.ucfirst | html_entity %]</td>\n      [% END %]\n      <td class=\"nd_center-cell\">\n        [% IF row.action == 'discover' AND row.status == 'error' %]\n        <a href=\"[% uri_for('/') | none %]?device=[% row.device | uri %]\">[% row.device | html_entity %]</a>\n        [% ELSE %]\n        <a href=\"[% uri_for('/device') | none %]?q=[% row.device | uri %]\">[% row.target.dns || row.device | html_entity %]</a>\n        [% END %]\n      </td>\n      <td class=\"nd_center-cell\">[% row.port | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.subaction | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.username | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.started_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.finished_stamp | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"del\" name=\"job\" type=\"hidden\" value=\"[% row.job | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\"><i class=\"icon-trash text-error\"></i></button>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Date Added</th>\n      <th class=\"nd_center-cell\">MAC Address</th>\n      <th class=\"nd_center-cell\">Match OUI</th>\n      <th class=\"nd_center-cell\">Enabled</th>\n      <th class=\"nd_center-cell\">Reason</th>\n      <th class=\"nd_center-cell\">Email</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"mac\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"matchoui\" type=\"checkbox\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"active\" type=\"checkbox\" checked></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"why\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"cc\"  type=\"email\"></td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.date | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"mac\" type=\"text\" value=\"[% row.mac | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"matchoui\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.matchoui %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"active\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.active %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"why\" type=\"text\" value=\"[% row.why | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"cc\" type=\"email\" value=\"[% row.cc | html_entity %]\">\n      </td>\n\n      <td class=\"nd_center-cell\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count | html_entity %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count | html_entity %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count | html_entity %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count | html_entity %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">Monitor for &quot;[% row.mac | html_entity %]&quot; will be removed.</p>\n            </blockquote>\n            <input data-form=\"del\" name=\"mac\" type=\"hidden\" value=\"[% row.mac | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ \n      {\n        \"targets\": [ 0, 2, 3, 6 ],\n        \"searchable\": false\n      },\n      {\n        \"targets\": [ 0, 2, 3, 6 ],\n        \"orderable\": false\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "[% IF orphans.size > 0 %]\n<div class=\"accordion\" id=\"accordion-orphans\">\n  <div class=\"accordion-group\">\n      <div class=\"accordion-heading\"> \n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-orphan\" href=\"#collapse-orphan\">\n            <i class=\"icon-chevron-up\"></i> &nbsp;\n            Orphaned Devices\n          </a>\n      </div>\n    <div id=\"collapse-orphan\" class=\"accordion-body collapse\">\n      <div class=\"accordion-inner\">\n      <table class=\"table table-bordered table-condensed\">\n        <thead>\n          <tr>\n            <th>Device</th>            \n            <th>Location</th>\n            <th>Contact</th>\n            <th>Vendor</th>\n            <th>Model</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH row IN orphans %]\n          <tr>\n            <td><a href=\"[% uri_for('/device') | none %]?q=[% row.ip | uri %]\">\n            [% row.dns || row.name || row.ip | html_entity %]</a></td>\n            <td>\n              [% IF row.location %]\n                <a href=\"[% search_device | none %]&q=[% row.location | uri %]&location=[% row.location | uri %]\">\n                 [% row.location | html_entity %]</a>\n              [% ELSE %]\n                [Not Set]\n              [% END %]\n            </td>\n            <td>[% row.contact | html_entity %]</td>\n            <td>[% row.vendor | html_entity %]</td>\n            <td>[% row.model | html_entity %]</td>\n          </tr>\n          [%END%]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  </div>\n</div>\n[% END %]\n[%# The largest graph is considered the main network, all others are\n    considered orphaned, so we need two to generate div %]\n[% IF graphs.size > 1 %]\n<div class=\"accordion\" id=\"accordion-networks\">\n[% count = 0 %]\n[% FOREACH network IN graphs %]\n  [% count = count + 1 %]\n  [%# The largest is not an orphan, so skip %]\n  [% NEXT IF count == 1 %]\n  <div class=\"accordion-group\">\n      <div class=\"accordion-heading\"> \n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-[% count | html_entity %]\" href=\"#collapse-[% count | html_entity %]\">\n            <i class=\"icon-chevron-up\"></i> &nbsp;\n              Orphaned Network: [% count - 1 | html_entity  %] Size: [% network.size | html_entity  %] Devices\n          </a>\n      </div>\n    <div id=\"collapse-[% count | html_entity %]\" class=\"accordion-body collapse\">\n      <div class=\"accordion-inner\">\n      <table class=\"table table-bordered table-condensed\">\n        <thead>\n          <tr>\n            <th>Device</th>            \n            <th>Location</th>\n            <th>Contact</th>\n            <th>Vendor</th>\n            <th>Model</th>\n          </tr>\n        </thead>\n        <tbody>\n        [% FOREACH row IN network %]\n          <tr>\n            <td><a href=\"[% uri_for('/device') | none %]?tab=netmap&q=[% row.ip | uri %]&firstsearch=on\">\n            [% row.dns || row.name || row.ip | html_entity %]</a></td>\n            <td>\n              [% IF row.location %]\n                <a href=\"[% search_device | none %]&q=[% row.location | uri %]&location=[% row.location | uri %]\">\n                 [% row.location | html_entity %]</a>\n              [% ELSE %]\n                [Not Set]\n              [% END %]\n            </td>\n            <td>[% row.contact | html_entity %]</td>\n            <td>[% row.vendor | html_entity %]</td>\n            <td>[% row.model | html_entity %]</td>\n          </tr>\n        [% END %]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  </div>\n[% END %]\n</div>\n[% END %]\n<script>\n$('.accordion').on('show hide', function (n) {\n    $(n.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-chevron-up icon-chevron-down');\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device Name</th>\n      <th class=\"nd_center-cell\">Device IP</th>\n      <th class=\"nd_center-cell\">Number of Ports</th>\n      <th class=\"nd_center-cell\">Services</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"dns\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"ip\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"ports\" type=\"number\" value=\"1\"></td>\n      <td class=\"nd_center-cell\">\n        <span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <a class=\"nd_layer-three-link\" href=\"#\" rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Enable Arpnip\"><span class=\"badge\">3</span></a><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <input data-form=\"add\" name=\"layers\" type=\"hidden\" value=\"00000000\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') | none %]?q=[% row.ip | uri %]\">[% row.dns | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.ip | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"ports\" type=\"number\" value=\"[% row.port_count | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <a class=\"nd_layer-three-link\" href=\"#\" rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Enable Arpnip\"><span class=\"badge[% ' badge-success' IF row.layers.substr(5,1) %]\">3</span></a><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span><span class=\"badge\">&nbsp;</span>\n        <input data-form=\"update\" name=\"layers\" type=\"hidden\" value=\"[% row.layers | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"dns\" type=\"hidden\" value=\"[% row.dns | html_entity %]\">\n        <input data-form=\"update\" name=\"ip\" type=\"hidden\" value=\"[% row.ip | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count | html_entity %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count | html_entity %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count | html_entity %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count | html_entity %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">\n                Pseudo-device &quot;[% row.dns | html_entity %] / [% row.ip | html_entity %]&quot; will be deleted.</p>\n            </blockquote>\n            <input data-form=\"delete\" name=\"device\" type=\"hidden\" value=\"[% row.ip | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ {\n        \"targets\": [ 2, 3 ],\n        \"orderable\": false,\n        \"searchable\": false\n      } ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n  $('.nd_layer-three-link').click(function() {\n    var badge = $(this).children('span').first();\n    var layers = $(this).parent().children('input').first();\n    $(badge).toggleClass('badge-success');\n    if ($(badge).hasClass('badge-success')) {\n      $(layers).attr('value', '00000100');\n    }\n    else {\n      $(layers).attr('value', '00000000');\n    }\n  });\n} );\n</script>\n\n", "[% IF results.count == 0 %]\n<div class=\"span3 alert alert-info\">The aren't enough jobs to report.</div>\n[% ELSE %]\n<table id=\"asd-data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Action</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Started</th>\n      <th class=\"nd_center-cell\">Finished</th>\n      <th class=\"nd_center-cell\">Time Elapsed</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = results.next) %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.action.ucfirst | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/device') | none %]?q=[% row.device | uri %]\">[% row.device | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.started  | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.finished | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.elapsed  | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n    $('#asd-data-table').dataTable({\n        \"paging\":   false,\n        \"searching\": false,\n        \"info\":     false,\n        \"order\": [[ 4, 'desc' ], [ 0, 'asc' ], [ 1, 'asc' ] ],\n        \"pageLength\": 12\n    });\n} );\n</script>\n", "[% IF NOT results.size %]\n<div class=\"span4 alert alert-info\">No significant events to report.</div>\n[% ELSE %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Poller Host</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Device DNS</th>\n      <th class=\"nd_center-cell\">Failed Connections</th>\n      <th class=\"nd_center-cell\">Last Retry</th>\n      <th class=\"nd_center-cell\">Try Again</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td class=\"nd_center-cell\">[% row.backend | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\"\n        href=\"[% uri_for('/search') | none %]?tab=node&q=[% row.device | uri %]\">[% row.device | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.dns | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.deferrals | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_defer | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"del\" name=\"backend\" type=\"hidden\" value=\"[% row.backend | html_entity %]\">\n        <input data-form=\"del\" name=\"device\"  type=\"hidden\" value=\"[% row.device  | html_entity %]\">\n        <button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\">\n          <i class=\"icon-repeat text-success\"></i>\n        </button>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Left Device</th>\n      <th class=\"nd_center-cell\">Left Port</th>\n      <th class=\"nd_center-cell\">Right Device</th>\n      <th class=\"nd_center-cell\">Right Port</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_dev nd_topo_dev1\" name=\"dev1\" type=\"text\" value=\"[% params.dev1 | html_entity %]\">\n          <span class=\"add-on nd_topo_dev_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_port nd_topo_dev1\" name=\"port1\" type=\"text\" value=\"[% params.port1 | html_entity %]\">\n          <span class=\"add-on nd_topo_port_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_dev nd_topo_dev2\" name=\"dev2\"  type=\"text\">\n          <span class=\"add-on nd_topo_dev_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <div class=\"input-append\">\n          <input data-form=\"add\" class=\"nd_topo_port nd_topo_dev2\" name=\"port2\" type=\"text\">\n          <span class=\"add-on nd_topo_port_caret\"><i class=\"icon-caret-down icon-large\"></i></span>\n        </div>\n      </td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n    [% SET count = 0 %]\n    [% WHILE (row = results.next) %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\" href=\"[% uri_for('/device') | none %]?q=[% row.device1.ip | uri %]\">\n        [% (row.device1.dns || row.device1.name || row.device1.ip) | html_entity %]</a>\n      </td>\n      <td class=\"nd_center-cell\">[% row.port1 | html_entity %]</td>\n      <td class=\"nd_center-cell\"><a class=\"nd_linkcell\" href=\"[% uri_for('/device') | none %]?q=[% row.device2.ip | uri %]\">\n        [% (row.device2.dns || row.device2.name || row.device2.ip) | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.port2 | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count | html_entity %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count | html_entity %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count | html_entity %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count | html_entity %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">The link between these two ports will be removed:</p>\n              <p>&nbsp;</p>\n            <ul>\n              <li><p class=\"text-info\">[% (row.device1.dns || row.device1.name || row.device1.ip) | html_entity %],&nbsp;\n                [% row.port1 | html_entity %]</p></li>\n              <li><p class=\"text-info\">[% (row.device2.dns || row.device2.name || row.device2.ip) | html_entity %],&nbsp;\n                [% row.port2 | html_entity %]</p></li>\n            </ul>\n            </blockquote>\n            <input data-form=\"del\" name=\"dev1\" type=\"hidden\" value=\"[% row.dev1 | html_entity %]\">\n            <input data-form=\"del\" name=\"port1\" type=\"hidden\" value=\"[% row.port1 | html_entity %]\">\n            <input data-form=\"del\" name=\"dev2\" type=\"hidden\" value=\"[% row.dev2 | html_entity %]\">\n            <input data-form=\"del\" name=\"port2\" type=\"hidden\" value=\"[% row.port2 | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ {\n        \"targets\": [ 4 ],\n        \"orderable\": false,\n        \"searchable\": false\n      } ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Observing Interface</th>\n      <th>Undiscovered Neighbor</th> \n      <th>Neighbor ID</th> \n      <th nowrap>Last Discovery</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    [% NEXT IF NOT row.remote_ip %]\n    <tr>\n      <td nowrap><a href=\"[% device_ports | none %]&q=[% row.ip | uri %]\">\n              [% row.dns || row.name || row.ip | html_entity %]</a><br>\n          <a href=\"[% device_ports | none %]&q=[% row.ip | uri %]&f=[% row.port | uri %]\">\n              [% row.port | html_entity %]</a>\n          [% IF row.port_description %]<br>[% row.port_description | html_entity %][% END %]\n          [% IF row.comment %]<br>&quot;<em>[% row.comment | html_entity %]</em>&quot;[% END %]\n      </td>\n      <td nowrap><a href=\"[% search_node | none %]&q=[% row.remote_ip | uri %]\">\n          [% row.remote_ip | html_entity %]</a><br>\n          [% row.remote_port | html_entity %]</td>\n      <td>[% row.remote_id | html_entity %]<br>\n          [% row.remote_type | remove('(?:(?:C|c)opyright\\s+)?\\(c\\).*') | remove('Technical Support: http://.*') | html_entity | html_line_break %]</td>\n      <td nowrap>[% row.finished | html_entity %]<br>[% row.log | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"order\": [[ 2, 'desc' ], [ 1, 'asc' ] ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "[% IF results.count == 0 %]\n<div class=\"span2 alert alert-info\">The user activity log is empty.</div>\n[% ELSE %]\n<table id=\"aul-data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Creation</th>\n      <th class=\"nd_center-cell\">User</th>\n      <th class=\"nd_center-cell\">User IP</th>\n      <th class=\"nd_center-cell\">Event</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n</table>\n[% END %]\n\n<script>\n$(document).ready(function() {\n  $('#aul-data-table').dataTable( {\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/control/admin/userlog/data') | none %]\",\n    \"columns\": [{\n      \"data\": 'creation',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return moment(data).format('YYYY-MM-DD HH:mm');\n      }\n    }, {\n      \"data\": 'username',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'userip',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'event',\n      \"className\": \"nd_center-cell\",\n      \"render\": function(data, type, row, meta) {\n        return he.encode(data || '');\n      }\n    }, {\n      \"data\": 'entry',\n      \"className\": \"nd_center-cell\",\n      \"searchable\": false,\n      \"orderable\": false,\n      \"render\": function(data, type, row, meta) {\n        return '<input data-form=\"del\" name=\"entry\" type=\"hidden\" value=\"' + encodeURIComponent(data) + \n        '\"><button class=\"btn nd_adminbutton\" name=\"del\" type=\"submit\"><i class=\"icon-trash text-error\"></i></button>';\n      }\n    }\n  ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Full Name</th>\n      <th class=\"nd_center-cell\">Username</th>\n      <th class=\"nd_center-cell\">Password</th>\n      <th class=\"nd_center-cell\">LDAP Auth</th>\n      <th class=\"nd_center-cell\">RADIUS Auth</th>\n      <th class=\"nd_center-cell\">Port Control</th>\n      <th class=\"nd_center-cell\">Administrator</th>\n      <th class=\"nd_center-cell\">Created</th>\n      <th class=\"nd_center-cell\">Last Login</th>\n      <th class=\"nd_center-cell\">Note</th>\n      <th class=\"nd_center-cell\">Action</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" name=\"fullname\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"username\" type=\"text\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"password\" type=\"password\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"ldap\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"radius\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"port_control\"></td>\n      <td class=\"nd_center-cell\"><input data-form=\"add\" type=\"checkbox\" name=\"admin\"></td>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"></td>\n      <td class=\"nd_center-cell\"><input class=\"span2\" data-form=\"add\" name=\"note\" type=\"text\"></td>\n      <td nowrap class=\"nd_center-cell\">\n        <button class=\"btn btn-small nd_adminbutton\" name=\"add\" type=\"submit\"><i class=\"icon-plus-sign\"></i> Add</button>\n      </td>\n    </tr>\n\n    [% SET count = 0 %]\n    [% FOREACH row IN results %]\n    [% SET count = count + 1 %]\n    <tr>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"fullname\" type=\"text\" value=\"[% row.fullname | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"username\" type=\"text\" value=\"[% row.username | html_entity %]\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"password\" type=\"password\" value=\"********\">\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"ldap\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.ldap %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"radius\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.radius %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"port_control\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.port_control %]>\n      </td>\n      <td class=\"nd_center-cell\">\n        <input data-form=\"update\" name=\"admin\" type=\"checkbox\" [% ' checked=\"checked\"' IF row.admin %]>\n      </td>\n      <td class=\"nd_center-cell\">[% row.created   | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.last_seen | html_entity %]</td>\n      <td class=\"nd_center-cell\">\n        <input class=\"span2\" data-form=\"update\" name=\"note\" type=\"text\" value=\"[% row.note | html_entity %]\">\n      </td>\n\n      <td nowrap class=\"nd_center-cell\">\n        <button class=\"btn nd_adminbutton\" name=\"update\" type=\"submit\"><i class=\"icon-save text-warning\"></i></button>\n\n        <button class=\"btn\" data-toggle=\"modal\"\n          data-target=\"#nd_devdel-[% count | html_entity %]\" type=\"button\"><i class=\"icon-trash text-error\"></i></button>\n\n        <div id=\"nd_devdel-[% count | html_entity %]\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label-[% count | html_entity %]\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label-[% count | html_entity %]\">Are you sure?</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <p class=\"text-info\">User &quot;[% row.username | html_entity %]&quot; will be deleted.</p>\n            </blockquote>\n            <input data-form=\"del\" name=\"username\" type=\"hidden\" value=\"[% row.username | html_entity %]\">\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"del\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"columnDefs\": [ \n      {\n        \"targets\": [ 2, 3, 4, 5, 6, 7, 8, 9 ],\n        \"searchable\": false\n      },\n      {\n        \"targets\": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ],\n        \"orderable\": false\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "\n    \"processing\": true\n    ,\"stateSave\": true\n    ,\"pageLength\": [% settings.table_pagesize | none %]\n    ,\"lengthMenu\": [% table_showrecordsmenu | none %]\n    ,\"dom\": '<\"top\"l<\"nd_datatables-pager\"p>f>rit<\"bottom\"><\"clear\">'\n    ,\"language\": {\n      \"search\": '_INPUT_'\n      ,\"searchPlaceholder\": 'Filter records...'\n      ,\"lengthMenu\": \"Show _MENU_ records.\"\n      ,\"info\":         \"&nbsp;Showing _START_ to _END_ of _TOTAL_\"\n      ,\"infoFiltered\": \"(filtered from _MAX_ total)\"\n      ,\"infoEmpty\":    \"&nbsp;No matching entries\"\n    }\n    ,\"stateSaveParams\": function (settings, data) {\n      // make sure filter is never saved\n      data.search.search = \"\";\n      // make sure paging position is not saved\n      data.start = 0;\n      [% IF is_custom_report %]\n      // disable sorting for custom reports\n      data.order = \"\";\n      [% END %]\n    }\n", "<table id=\"da-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Address</th>\n      <th>DNS</th>\n      <th class=\"nd_center-cell\">Interface</th>\n      <th>Description</th>\n      <th>Prefix</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#da-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'alias',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'dns',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'device_port.name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'subnet',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '&ip=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% SET user_can_port_control = user_has_role('port_control') %]\n<table class=\"table table-condensed table-striped\">\n  <tbody>\n    <tr>\n      <td>System Name</td>\n      <td>[% d.name | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Location\n      [% IF user_can_port_control %]\n      <i class=\"icon-edit nd_edit-icon nd_device-details-edit\"></i>\n      [% END %]\n      </td>\n      [% IF user_can_port_control %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\"\n        data-field=\"location\" data-for-device=\"[% d.ip | html_entity %]\">\n          [% d.location | html_entity %]\n      </td>\n      [% ELSE %]\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device | none %]&q=[% d.location | uri %]&location=[% d.location | uri %]\">[% d.location | html_entity %]</a>\n      </td>\n      [% END %]\n    </tr>\n    <tr>\n      <td>Contact\n      [% IF user_can_port_control %]\n      <i class=\"icon-edit nd_edit-icon nd_device-details-edit\"></i>\n      [% END %]\n      </td>\n      [% IF user_can_port_control %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\"\n        data-field=\"contact\" data-for-device=\"[% d.ip | html_entity %]\">\n          [% d.contact | html_entity %]\n      </td>\n      [% ELSE %]\n      <td>[% d.contact | html_entity %]</td>\n      [% END %]\n    </tr>\n    <tr>\n      <td>Vendor / Model</td>\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device | none %]&q=[% d.vendor | uri %]&vendor=[% d.vendor | uri %]\">[% d.vendor | html_entity %]</a>\n        /\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device | none %]&q=[% d.model | uri %]&model=[% d.model | uri %]\">[% d.model | html_entity %]</a>\n      </td>\n    </tr>\n    <tr>\n      <td>OS / Version</td>\n      <td>\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device | none %]&q=[% d.os | uri %]&os=[% d.os | uri %]\">[% d.os | html_entity %]</a>\n        /\n        <a rel=\"tooltip\" data-placement=\"top\" data-offset=\"5\" data-title=\"Find Similar Devices\"\n        href=\"[% search_device | none %]&q=[% d.os_ver | uri %]&os_ver=[% d.os_ver | uri %]\">[% d.os_ver | html_entity %]</a>\n      </td>\n    </tr>\n    <tr>\n      <td>Serial Number</td>\n      <td>[% d.serial | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Description</td>\n      <td>[% d.description | html_entity | html_line_break %]</td>\n    </tr>\n    [% IF settings._extra_device_details.size %]\n    [% FOREACH config IN settings._extra_device_details %]\n    <tr>\n      <td>\n          [% config.label | html_entity %]\n      </td>\n      <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_details.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n      </td>\n    </tr>\n    [% END %]\n    [% END %]\n    <tr>\n      <td>Administration</td>\n      <td>\n        <a href=\"ssh://[% d.ip | uri %]\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-keyboard\"></i> SSH</span></a>\n        <a href=\"telnet://[% d.ip | uri %]\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-keyboard\"></i> Telnet</span></a>\n        <a href=\"https://[% d.ip | uri %]/\" target=\"_blank\">\n          <span class=\"label label-info\"><i class=\"icon-external-link\"></i> Web</span></a>\n      </td>\n    </tr>\n    <tr>\n      <td>SNMP Class</td>\n      <td><a target=\"_blank\" href=\"https://metacpan.org/pod/[% d.snmp_class | uri %]\">[% d.snmp_class | html_entity %]</a></td>\n    </tr>\n    <tr>\n      <td>Uptime</td>\n      <td>[% d.uptime_age | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Layers</td>\n      <td>\n        [% (d.layers.substr(7,1) ? '<span class=\"badge badge-success\">1</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(6,1) ? '<span class=\"badge badge-success\">2</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(5,1) ? '<span class=\"badge badge-success\">3</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(4,1) ? '<span class=\"badge badge-success\">4</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(3,1) ? '<span class=\"badge badge-success\">5</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(2,1) ? '<span class=\"badge badge-success\">6</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n        [% (d.layers.substr(1,1) ? '<span class=\"badge badge-success\">7</span>' : '<span class=\"badge\">&nbsp;</span>') | none %]\n      </td>\n    </tr>\n    <tr>\n      <td>Last Discover</td>\n      <td>[% d.last_discover_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Last Arpnip</td>\n      <td>[% d.last_arpnip_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Last Macsuck</td>\n      <td>[% d.last_macsuck_stamp | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>Hardware Status</td>\n      <td>Fan: [% d.fan | html_entity %]\n        <br/>PS1 [[% d.ps1_type | html_entity %]]: [% d.ps1_status | html_entity %]\n        <br/>PS2 [[% d.ps2_type | html_entity %]]: [% d.ps2_status | html_entity %]</td>\n    </tr>\n    [% IF p.size %]\n    <tr>\n      <td>PoE Status</td>\n      <td>\n      [% FOREACH m IN p %]\n        [% UNLESS m.module == 1 %]\n          <br/>\n        [% END %]\n        Module [% m.module | html_entity %]: [% m.status | html_entity %], [% m.poe_capable_ports | html_entity %] power-capable ports, [% m.poe_powered_ports | html_entity %] powered ([% m.poe_disabled_ports | html_entity %] admin disabled, [% m.poe_errored_ports | html_entity %] errors), [% m.poe_power_committed | html_entity %]/[% m.power | html_entity %] watts committed.\n      [% END %]\n      </td>\n    </tr>\n    [% END %]\n    <tr>\n      <td>MAC Address</td>\n      <td>[% d.mac | html_entity %]</td>\n    </tr>\n    <tr>\n      <td>VTP Domain</td>\n      <td>[% d.vtp_domain | html_entity %]</td>\n    </tr>\n    [% IF user_has_role('admin') %]\n    <tr data-for-device=\"[% d.ip | html_entity %]\">\n      <td>Admin Tasks</td>\n      <td>\n        <input type=\"hidden\" data-form=\"discover\" value=\"[% d.ip | html_entity %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"discover\">Discover</button>\n        <input type=\"hidden\" data-form=\"arpnip\" value=\"[% d.ip | html_entity %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"arpnip\">Arpnip</button>\n        <input type=\"hidden\" data-form=\"macsuck\" value=\"[% d.ip | html_entity %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"macsuck\">Macsuck</button>\n        <input type=\"hidden\" data-form=\"nbtstat\" value=\"[% d.ip | html_entity %]\" name=\"device\"/>\n        <button class=\"btn btn-info btn-small nd_adminbutton\" name=\"nbtstat\">NBTstat</button>\n\n        <button class=\"btn btn-danger btn-small pull-right\"\n          data-toggle=\"modal\" data-target=\"#nd_devdel\" type=\"button\">Delete</button>\n\n        <div id=\"nd_devdel\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n          role=\"dialog\" aria-labelledby=\"nd_devdel-label\" aria-hidden=\"true\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</button>\n            <h3 id=\"nd_devdel-label\">Confirm Delete: [% d.dns || d.ip | html_entity %]</h3>\n          </div>\n          <div class=\"modal-body\">\n            <blockquote>\n              <ul>\n                <li><p>This action is immediate and not reversible</p></li>\n                <li><p>All associated Nodes may be removed from the database</p></li>\n              </ul>\n            </blockquote>\n            <textarea id=\"nd_devdel-log\" class=\"input-block-level\" rows=\"2\" data-form=\"delete\"\n              placeholder=\"Enter a log message\" name=\"log\"></textarea>\n            <label class=\"checkbox\">\n              <input id=\"nd_devdel-archive\" type=\"checkbox\" data-form=\"delete\" name=\"archive\">\n              <h4 class=\"nd_unbolden\">Archive Nodes</h4>\n            </label>\n            <input type=\"hidden\" data-form=\"delete\" value=\"[% d.ip | html_entity %]\" name=\"device\"/>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-success\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n            <button class=\"btn btn-danger nd_adminbutton\" name=\"delete\" data-dismiss=\"modal\">Confirm</button>\n          </div>\n        </div>\n      </td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n", "[% BLOCK recurse -%]\n[% INCLUDE print_line item=item %]\n  [% IF nodes.$item.children.defined -%]\n  <ul>\n  [% FOREACH kidtype IN nodes.$item.children.keys -%]\n    [%- FOREACH kid IN nodes.$item.children.$kidtype -%]\n      [%- IF kid -%]\n        [% INCLUDE recurse item=kid %]\n      [%- END -%]\n    [%- END -%]\n  [%- END -%]\n  </ul>\n  [% END -%]\n  </li>\n[%- END -%]\n[% BLOCK print_line -%]\n<li>\n[% IF nodes.$item.children.defined -%]\n<span><i class=\"icon-minus-sign text-info\"></i>&nbsp;\n[%- ELSE -%]\n<span><i class=\"icon-leaf\"></i>&nbsp;\n[%- END -%]\n <a href=\"[% uri_for('/report/moduleinventory') | none %]?description=[% nodes.$item.module.description | uri %]\">[% nodes.$item.module.description -%]</a>\n[%- IF nodes.$item.module.name -%]\n <a href=\"[% uri_for('/report/moduleinventory') | none %]?name=[% nodes.$item.module.name | uri %]\">([% nodes.$item.module.name %])</a>\n[%- END -%]\n[%- IF nodes.$item.module.fw_ver -%]\n fw: [% nodes.$item.module.fw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.hw_ver -%]\n hw: [% nodes.$item.module.hw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.sw_ver -%]\n sw: [% nodes.$item.module.sw_ver %]\n[%- END -%]\n[%- IF nodes.$item.module.serial -%]\n <a href=\"[% uri_for('/report/moduleinventory') | none %]?serial=[% nodes.$item.module.serial | uri %]\">[serial: [% nodes.$item.module.serial %]]</a>\n[%- END -%]\n[%- IF nodes.$item.module.type -%]\n / <a href=\"[% uri_for('/report/moduleinventory') | none %]?type=[% nodes.$item.module.type | uri %]\">[% nodes.$item.module.type %]</a>\n[%- END -%]\n[%- IF nodes.$item.module.model -%]\n / <a href=\"[% uri_for('/report/moduleinventory') | none %]?model=[% nodes.$item.module.model | uri %]\">[% nodes.$item.module.model %]</a>\n[%- END -%]\n[%- IF nodes.$item.module.fru -%]\n <b>[FRU]</b>\n[%- END -%]\n</span>\n[%- END -%]\n<div class=\"tree\">\n<ul>\n[% FOREACH module IN nodes.root %]\n  [% INCLUDE recurse item=module %]\n[%- END -%]\n</ul>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/bootstrap-tree.js' -%]\n</script>\n", "<div id=\"netmap_pane_tooltip\" class=\"net_gobrechts_d3_force_tooltip\" style=\"top: 0px; left: 0px;\"></div>\n<script>\n\n// ***********************************************\n// ************ retrieve network map *************\n// ***********************************************\n\n$.getJSON('[% uri_for('/ajax/data/device/netmap') | none %]?[% my_query | none %]', function(mapdata) {\n\n  jQuery(document).ready(function() {\n    window.graph = netGobrechtsD3Force('netmap_pane')\n      // .debug(true)\n      .width( parseInt(jQuery('#netmap_pane').parent().css('width')) )\n      .height( window.innerHeight - 100 )\n      .showSelfLinks(true)\n      .wrapLabels(true)\n      .lassoMode(true)\n      .dragMode(true)\n      .zoomMode(true)\n      .pinMode(true)\n      [% '.showLegend(false)' UNLESS (params.colorby == 'hgroup' OR params.colorby == 'lgroup') %]\n      .showLinkDirection(false)\n      .colorScheme('color10')\n      //.preventLabelOverlappingOnForceEnd(\n      //  (mapdata['newnodes'] && ('[% params.mapshow | html_entity %]' == 'neighbors'))\n      //  ? true : false\n      //)\n      .nodeEventToStopPinMode('none')\n      .showTooltips(true)\n      .tooltipPosition('svgTopLeft')\n      .nodeEventToOpenLink('dblclick')\n      .nodeLinkTarget('none')\n      .minNodeRadius(4)\n      .maxNodeRadius(4 + (mapdata['numsizes'] || 0))\n      .minZoomFactor(0.1)\n      .maxZoomFactor(10)\n      .labelDistance(2)\n      .linkDistance(120)\n      .charge(-550)\n      .gravity(0.3);\n\n    graph['nd2'] = {};\n    graph['nd2']['centernode'] = mapdata['centernode'];\n    graph['nd2']['dragging'] = false;\n\n    // ***************************************\n    // *********** fullscreen icon ***********\n    // ***************************************\n\n    graph.inspect().dom.svg\n      .append(\"g\")\n      .attr(\"id\", \"nd2_netmap-fullscreen-container\")\n      .attr(\"transform\", \"translate(\" + (graph.width() - 17) + \",17)\")\n      .append(\"svg:text\")\n      .attr(\"id\", \"nd2_netmap-fullscreen\")\n      .attr(\"class\", \"link\")\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"font-family\", \"FontAwesome\")\n      .text('\\uf065')\n      .on(\"click\", function() {\n        requestFullScreen(document.getElementById('netmap_pane'));\n      });\n\n    // **************************************************\n    // *********** force running spinner icon ***********\n    // **************************************************\n\n    graph.inspect().dom.svg\n      .append(\"g\")\n      .attr(\"id\", \"nd2_netmap-spinner-container\")\n      .attr(\"transform\", \"translate(\" + (graph.width() - 15) + \",\" + (graph.height() - 15) + \")\")\n      .append(\"path\")\n      .attr(\"id\", \"nd2_netmap-spinner\");\n\n    graph.inspect().main.force.on('start.nd2spinner', function() {\n      d3.select(\"#nd2_netmap-spinner\").call(spin);\n    });\n\n    // ****************************************************\n    // *********** link labels that track links ***********\n    // ****************************************************\n\n    graph.inspect().main.force.on('tick.movelinklabel', function() {\n      graph.inspect().dom.svg.selectAll('text.nd_netmap-linklabel')\n        .attr('x', function(d) {\n          var sx = graph.nodeDataById($(this).attr('data-source'));\n          var tx = graph.nodeDataById($(this).attr('data-target'));\n          if (!(sx && tx)) { return 0 }\n          return ((sx.x + tx.x) / 2);\n        })\n        .attr('y', function(d) {\n          var sy = graph.nodeDataById($(this).attr('data-source'));\n          var ty = graph.nodeDataById($(this).attr('data-target'));\n          if (!(sy && ty)) { return 0 }\n          return ((sy.y + ty.y) / 2);\n        });\n    });\n\n    graph.inspect().main.force.on('start.movelinklabel', function() {\n      mapdata['data']['links'].forEach(function(link) {\n        graph.inspect().dom.svg.select('g.graph')\n          .append('svg:text')\n          .attr('class', 'nd_netmap-linklabel')\n          .attr('data-source', link['FROMID'])\n          .attr('data-target', link['TOID'])\n          .attr('text-anchor', 'middle')\n          [% \".attr('fill', 'black')\" IF params.showspeed %]\n          .text(link['SPEED']);\n      });\n\n      graph.inspect().main.force.on('start.movelinklabel', null);\n    });\n\n    // **********************************************************\n    // ********* node lasso and group-dragging support **********\n    // **********************************************************\n\n    graph.inspect().main.force.on('start.draggednode', function() {\n      graph.inspect().main.nodes.on('mousedown.dragall', function(n) {\n        if (this.nodeName !== 'circle') { return }\n        graph['nd2']['dragging'] = true;\n        graph['nd2']['dragStartX'] = n.x;\n        graph['nd2']['dragStartY'] = n.y;\n        graph['nd2']['draggedNode'] = n.index;\n        console.log(graph['nd2']);\n      });\n\n      graph.inspect().main.nodes.on('mousemove.dragall', function(draggedNode) {\n        var evt = window.event;\n        if (!(\"buttons\" in evt) || (evt.buttons !== 1)) { return }\n        if (!(graph['nd2']['dragging']) || !(graph['nd2']['draggedNode'])) { return }\n        if (draggedNode.index !== graph['nd2']['draggedNode']) { return }\n\n        var dx = (draggedNode.x - graph['nd2']['dragStartX']),\n            dy = (draggedNode.y - graph['nd2']['dragStartY']);\n        graph['nd2']['dragStartX'] += dx;\n        graph['nd2']['dragStartY'] += dy;\n\n        graph.inspect().main.nodes\n          .filter(function(n) { return (n.selected && (n.index !== draggedNode.index)) })\n          .each(function(n) {\n              n.x += dx; n.y += dy;\n              n.px += dx; n.py += dy;\n          });\n      });\n\n      graph.inspect().main.nodes.on('mouseup.dragall', function(n) {\n        graph['nd2']['dragging'] = false;\n      });\n\n      graph.inspect().main.force.on('start.draggednode', null);\n    });\n\n    // *****************************\n    // ********* DO IT!! ***********\n    // *****************************\n\n    graph.start(mapdata);\n\n    // about a second after render starts, zoom in a bit\n    if ('[% params.mapshow | html_entity %]' == 'neighbors') {\n      setTimeout(function() {\n        //if ('[% params.dynamicsize | html_entity %]' == 'on') {\n        //  graph.zoomToFit();\n        //} else {\n          var node = graph.nodeDataById( graph['nd2']['centernode'] );\n          graph.zoomSmooth(node.x, node.y, node.radius * 125);\n        //}\n      }, 1500);\n    }\n  }); // document.onReady\n\n}); // getJSON\n\n// ***********************************************\n// ******** force engine status spinner  *********\n// ***********************************************\n\nvar radius = 12;\nvar tau = 2 * Math.PI;\n\nvar arc = d3.svg.arc()\n  .innerRadius(radius * 0.5)\n  .outerRadius(radius * 0.8)\n  .startAngle(0)\n  .endAngle(0.33 * tau);\n\nvar circle = d3.svg.arc()\n  .innerRadius(radius * 0.5)\n  .outerRadius(radius * 0.8)\n  .startAngle(0)\n  .endAngle(tau);\n\nfunction spin(selection, duration) {\n  duration = duration || 1500;\n  if (! graph.inspect().status.forceRunning) {\n    d3.select('#nd2_netmap-spinner').style('fill', '#CCFFCC').attr('d', circle);\n    saveMapPositions();\n    return;\n  }\n  d3.select('#nd2_netmap-spinner').style('fill', '#FFE4B5').attr('d', arc);\n  selection.transition()\n    .ease(\"linear\")\n    .duration(duration)\n    .attrTween(\"transform\", function() {\n        return d3.interpolateString(\"rotate(0)\", \"rotate(360)\");\n    });\n  setTimeout(function() { spin(selection, duration); }, duration);\n}\n\n// ********************************************************\n// ********* save new node positions back to DB ***********\n// ********************************************************\n\nfunction saveMapPositions() {\n  graph.inspect().main.nodes.each(function(n) { n.fixed = true });\n  $.post(\n    '[% uri_for('/ajax/data/device/netmappositions') | none %]'\n    ,$(\"#nd_vlan-entry, #nd_hgroup-select, #nd_lgroup-select, #nq, input[name='mapshow']\").serialize()\n      + '&positions=' + JSON.stringify(graph.positions())\n  );\n  // toastr.success('Saved map positions.');\n}\n\n// ***********************************************\n// ************ full screen handling *************\n// ***********************************************\n\nfunction isFullScreen() {\n  return (document.webkitFullscreenElement || document.mozFullScreenElement || document.fullscreenElement);\n}\n\nfunction requestFullScreen(elt) {\n  if (isFullScreen()) {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    }\n  }\n  else {\n    if (elt.requestFullscreen) {\n      elt.requestFullscreen();\n    } else if (elt.msRequestFullscreen) {\n      elt.msRequestFullscreen();\n    } else if (elt.mozRequestFullScreen) {\n      elt.mozRequestFullScreen();\n    } else if (elt.webkitRequestFullscreen) {\n      elt.webkitRequestFullscreen();\n    }\n  }\n}\n\n$(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function() {\n  resizeGraphContainer();\n  $('#nd2_netmap-fullscreen').text(function() {\n    return (isFullScreen() ? '\\uf066' : '\\uf065');\n  });\n});\n\n// **************************************************\n// ************ react to sidebar in/out *************\n// **************************************************\n\n// custom resize function as there is no event to fire and we need\n// to react to the sidebar.\nfunction resizeGraphContainer() {\n  setTimeout(function(){\n    var netmap_pane = jQuery('#netmap_pane');\n    graph.width( parseInt(netmap_pane.parent().css('width')) ).resume();\n    graph.height( window.innerHeight - 100 ).resume();\n    d3.select(\"#nd2_netmap-spinner-container\").attr(\"transform\",\n      \"translate(\" + (graph.width() - 15) + \",\" + (graph.height() - 15) + \")\");\n    d3.select(\"#nd2_netmap-fullscreen-container\").attr(\"transform\",\n      \"translate(\" + (graph.width() - 17) + \",17)\");\n  }, 500)\n}\n\n$('#nd_sidebar-toggle-img-in').on(\"click\", resizeGraphContainer);\n$('#nd_sidebar-toggle-img-out').on(\"click\", resizeGraphContainer);\n$(window).on(\"resize\", resizeGraphContainer);\n\n// vim: ft=javascript\n</script>\n", "[% SET user_can_port_control = user_has_role('port_control') %]\n<table id=\"dp-data-table\" class=\"table table-bordered table-striped\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th></th>\n      [% FOREACH item IN settings.port_columns %]\n      [% NEXT IF item.name == 'c_admin' %]\n      [% NEXT IF item.name == 'c_nodes' AND params.c_nodes AND params.c_neighbors %]\n        [% NEXT UNLESS params.${item.name} %]\n        [% SET th_class = '' %]\n        [% IF (item.name == 'c_port' OR item.name == 'c_descr' OR item.name == 'c_name') %]\n          [% th_class = ' class=\"portsort\"' %]\n        [% END %]\n        <th[% th_class | html_entity %]>\n          [% IF item.name == 'c_neighbors' %]\n          [% IF params.c_nodes %]\n          Connected Nodes &amp; Devices\n          [% ELSE %]\n          Connected Devices\n          [% END %]\n          [% ELSE %]\n          [% item.label | html_entity %]\n          [% END %]\n        </th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    [% SET portname = row.port %]\n    <tr>\n      <td class=\"nd_center-cell nd_devport-icon\">\n        [% IF row.up_admin != 'up' %]\n        <i class=\"icon-remove icon-large\"></i>\n        [% ELSIF row.up == 'up' AND row.stp == 'blocking' AND vlans.$portname.vlan_count < 2 %]\n        <i class=\"icon-ban-circle text-info icon-large\"></i>\n        [% ELSIF row.error_disable_cause %]\n        <i class=\"icon-exclamation-sign text-error icon-large\"></i>\n        [% ELSIF row.has_column_loaded('is_free') AND row.is_free %]\n        <i class=\"icon-circle-arrow-down text-success icon-large\"></i>\n        [% ELSIF row.up_admin == 'up' AND (row.up != 'up' AND row.up != 'dormant') %]\n          [% IF params.port_state == 'free' %]\n          <i class=\"icon-circle-arrow-down text-success icon-large\"></i>\n          [% ELSE %]\n          <i class=\"icon-arrow-down text-error icon-large\"></i>\n          [% END %]\n        [% ELSE %]\n        <i class=\"icon-angle-up text-success icon-large\"></i>\n        [% END %]\n        [% IF row.slave_of %]<br/>\n          [% IF row.get_column('agg_master_up_admin') != 'up' %]\n            <small><i class=\"icon-group muted\"></i></small>\n          [% ELSIF row.get_column('agg_master_up') == 'up' %]\n            <small><i class=\"icon-group text-success\"></i></small>\n          [% ELSE %]\n            <small><i class=\"icon-group text-error\"></i></small>\n          [% END %]\n        [% END %]\n      </td>\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'left' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n\n      [% IF params.c_port %]\n      [% IF user_can_port_control AND params.c_admin %]\n      [% IF row.up_admin == 'up' %]\n      <td nowrap class=\"nd_editable-cell\" data-action=\"down\"\n        data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\"\n        data-field=\"c_port\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      [% ELSE %]\n      <td nowrap class=\"nd_editable-cell\" data-action=\"up\"\n        data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\"\n        data-field=\"c_port\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      [% END %]\n      [% ELSE %]\n      <td nowrap data-order=\"[% row.port | html_entity %]\" data-filter=\"[% row.port | html_entity %]\">\n      [% END %]\n        <a class=\"nd_log-icon\"\n          href=\"[% uri_for('/report/portlog') | none %]?q=[% device.ip | uri %]&f=[% row.port | uri %]\">\n          <i class=\"icon-file-text-alt\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"View Port Log\"></i>\n        </a>\n      [% IF user_can_port_control AND params.c_admin %]\n      [% IF row.up_admin == 'up' %]\n        <span class=\"nd_hand-icon\">\n          <i class=\"icon-bullseye\" data-action=\"bounce\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Bounce Port\"></i>\n          <i class=\"icon-hand-down\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Disable Port\"></i>\n        </span>\n      [% ELSE %]\n        <span class=\"nd_hand-icon\">\n          <i class=\"icon-bullseye\" data-action=\"bounce\" style=\"display: none\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Bounce Port\"></i>\n          <i class=\"icon-hand-up\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Enable Port\"></i>\n        </span>\n      [% END %]\n      [% END %]\n        <a class=\"nd_this-port-only nd_port-only-first\" href=\"[% device_ports | none %]&q=[% params.q | uri %]&f=[% row.port | uri %]&prefer=port\">\n          [% IF row.is_master %]\n            <small><i class=\"icon-group muted\"></i></small>&nbsp;\n          [% END %]\n        [% row.port | html_entity %]</a>\n        [% IF row.slave_of %]<br/>\n          <a class=\"nd_this-port-only\" href=\"[% device_ports | none %]&q=[% params.q | uri %]&f=[% row.slave_of | uri %]&prefer=port\">\n          [% row.slave_of | html_entity %]</a>\n        [% END %]\n      </td>\n      [% END %]\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'mid' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n\n      [% IF params.c_descr %]\n      <td nowrap>[% row.descr | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_comment %]\n      <td nowrap>[% row.last_comment | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_type %]\n      <td>[% row.type | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_duplex %]\n      <td>\n        [% IF row.up == 'up' AND row.duplex %]\n        [% (row.duplex_admin.ucfirst || 'Auto') | html_entity %] / [% row.duplex.ucfirst | html_entity %]\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_lastchange %]\n      <td>[% row.lastchange_stamp | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_name %]\n      [% IF user_can_port_control AND params.c_admin %]\n      <td nowrap class=\"nd_editable-cell\" contenteditable=\"true\"\n          data-field=\"c_name\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      <i class=\"icon-edit nd_edit-icon\"></i>\n      [% ELSE %]\n      <td nowrap class=\"nd_editable-cell\">\n      [% END %]\n      <div class=\"nd_editable-cell-content\">\n        [% row.name | html_entity %]\n      </div>\n      </td>\n      [% END %]\n\n      [% IF params.c_speed %]\n      <td>[% row.speed | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_speed_admin %]\n      <td>[% row.speed_admin | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_error %]\n      <td>[% row.error_disable_cause | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_mac %]\n      <td>[% row.mac | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_mtu %]\n      <td>[% row.mtu | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_pvid %]\n      [% IF user_can_port_control AND params.c_admin %]\n      <td class=\"nd_editable-cell\" contenteditable=\"true\" data-default=\"[% row.vlan | html_entity %]\"\n        data-field=\"c_pvid\" data-for-device=\"[% device.ip | html_entity %]\" data-for-port=\"[% row.port | html_entity %]\">\n      <i class=\"icon-edit nd_edit-icon\"></i>\n      <div class=\"nd_editable-cell-content\">\n        [% IF row.vlan AND row.vlan > 0 %][% row.vlan | html_entity %][% END %]\n      </div>\n      </td>\n      [% ELSE %]\n      <td>\n        [% IF row.vlan AND row.vlan > 0 %]\n        <a class=\"nd_linkcell\"\n          href=\"[% uri_for('/search') | none %]?tab=vlan&q=[% row.vlan | uri %]\">\n            [% row.vlan | html_entity %]</a>\n        [% END %]\n      </td>\n      [% END %]\n      [% END %]\n\n      [% IF params.c_vmember %]\n      <td>\n        [% IF vlans.$portname.vlan_count <= settings.devport_vlan_limit %]\n          [% SET vlan_count = vlans.$portname.vlan_count %]\n          [% SET output = '' %]\n          [% FOREACH vlan IN vlans.$portname.vlan_set.nsort %]\n            [% IF vlan == 0 %][% SET vlan_count = (vlan_count - 1) %][% NEXT %][% END %]\n            [% SET output = output _\n              '<a href=\"' _ uri_for('/search') _ '?tab=vlan&q=' _ vlan _ '\">' _ vlan _ '</a>' %]\n            [% SET output = output _ ', ' IF NOT loop.last %]\n          [% END %]\n          [% IF vlan_count > 10 %] [%# TODO make this a settable variable %]\n            [% SET output = '<div class=\"nd_vlan-total\">(' _ vlan_count\n              _ ')</div><span class=\"nd_linkcell nd_collapse-vlans\">\n                <div class=\"nd_arrow-up-down-left icon-chevron-up icon-large\"></div>Show VLANs</span>\n                <div class=\"nd_collapsing nd_collapse-pre-hidden\">' _ output %]\n            [% SET output = output _ '</div>' %]\n          [% END %]\n          [% output | none %]\n        [% ELSE %]\n        <i class=\"icon-asterisk text-warning\"></i> ([% vlans.$portname.vlan_count %] is too many to list)\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_power %]\n        [% IF row.power %]\n          [% IF row.power.admin == 'true' %]\n            [% IF user_can_port_control AND params.c_admin %]\n              <td nowrap data-action=\"false\"\n                data-field=\"c_power\" data-for-device=\"[% device.ip | html_entity %]\"\n                data-for-port=\"[% row.port | html_entity %]\">\n\n                <i class=\"icon-off nd_power-icon nd_power-on\"\n                  rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n                  data-animation=\"\" data-title=\"Disable Power\"></i>\n            [% ELSE %]\n              <td nowrap>\n                <i class=\"icon-off nd_power-on\"></i>\n            [% END %]\n                <span>\n                [% IF row.power.power AND row.power.power > 0 %]\n                  [% row.power.power | html_entity %]&nbsp;mW\n                [% ELSE %]\n                  ([% row.power.status | html_entity %])\n                [% END %]\n                </span>\n          [% ELSE %]\n            [% IF user_can_port_control AND params.c_admin %]\n              <td nowrap data-action=\"true\"\n                data-field=\"c_power\" data-for-device=\"[% device.ip | html_entity %]\"\n                data-for-port=\"[% row.port | html_entity %]\">\n\n                <i class=\"icon-off nd_power-icon\"\n                  rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n                  data-animation=\"\" data-title=\"Enable Power\"></i>\n            [% ELSE %]\n              <td>\n                <i class=\"icon-off\"></i>\n            [% END %]\n          [% END %]\n              </td>\n        [% ELSE %]\n          <td></td>\n        [% END %]\n      [% END %]\n\n      [% IF params.c_ssid %]\n      <td>[% row.ssid.ssid | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_nodes OR params.c_neighbors %]\n      <td>\n        [% IF params.c_neighbors AND (row.remote_ip OR row.is_uplink) %]\n          [% IF row.get_column('neighbor_ip') %]\n            <i class=\"icon-link[% ' text-warning' IF row.manual_topo %]\"></i>\n            [% IF row.remote_is_phone %]\n              <i class=\"icon-phone\"></i>&nbsp;\n            [% ELSIF row.remote_is_wap %]\n              <i class=\"icon-rss\"></i>&nbsp;\n            [% END %]\n            <a href=\"[% device_ports | none %]&q=[% row.get_column('neighbor_ip') | uri %]\">\n                [% row.get_column('neighbor_dns').remove(settings.domain_suffix) || row.get_column('neighbor_ip') | html_entity %]</a>\n            [% IF row.remote_port and has_snmp(row.remote_type) %]\n                -\n                <a href=\"[% device_ports | none %]&q=[% row.get_column('neighbor_ip') | uri %]&f=[% row.remote_port | uri %]&prefer=port\">\n                    [% row.remote_port | html_entity %]</a>\n            [% END %]\n            <br/>\n            [% IF params.n_inventory and row.remote_inventory %]\n              [% row.remote_inventory | html_entity %]<br/>\n            [% END %]\n            [% IF params.n_detailed_inventory and (row.remote_id or row.remote_type) %]\n              ([% 'id: '_ row.remote_id IF row.remote_id %]\n              [% ' type: '_ row.remote_type IF row.remote_type %])<br/>\n            [% END %]\n          [% ELSIF row.remote_ip %]\n            [% '<i class=\"icon-unlink text-error\"></i>&nbsp;' IF has_snmp(row.remote_type) %]\n            [% IF row.remote_is_phone %]\n              <i class=\"icon-phone\"></i>&nbsp;\n            [% ELSIF row.remote_is_wap %]\n              <i class=\"icon-rss\"></i>&nbsp;\n            [% END %]\n            <a href=\"[% search_node | none %]&q=[% row.remote_ip | uri %]\">\n              [% row.remote_ip | html_entity %]\n              [% IF row.remote_port and has_snmp(row.remote_type) %]\n                - [% row.remote_port | html_entity %]\n              [% END %]\n            </a><br/>\n            [% IF params.n_inventory and row.remote_inventory %]\n              [% row.remote_inventory | html_entity %]<br/>\n            [% END %]\n            [% IF params.n_detailed_inventory and (row.remote_id or row.remote_type) %]\n              ([% 'id: '_ row.remote_id IF row.remote_id %]\n              [% ' type: '_ row.remote_type IF row.remote_type %])<br/>\n            [% END %]\n          [% ELSE %]\n            [% '<i class=\"icon-unlink text-error\"></i>&nbsp; (possible uplink)' IF has_snmp(row.remote_type) %]\n          [% END %]\n        [% END %]\n        [% IF params.c_nodes %]\n        [% FOREACH node IN row.$nodes %]\n          [% '<br/>' IF (row.remote_ip OR row.is_uplink) OR NOT loop.first %]\n          [% '<i class=\"icon-book\"></i>&nbsp; ' IF NOT node.active %]\n          [% '<i class=\"icon-signal\"></i>&nbsp;' IF node.wireless.defined %]\n          <a href=\"[% search_node | none %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n            [% node.net_mac.$mac_format_call | html_entity %]</a>\n          [% IF (node.vlan > 0) && (node.vlan != row.vlan) %]\n            (on vlan [% node.vlan | html_entity %])\n          [% END %]            \n          [% IF params.n_ssid AND node.wireless.defined %]\n            (SSID:\n            [% FOREACH wlan IN node.wireless %]\n              <a href=\"[%+ uri_for('/report/portssid') %]?ssid=[% wlan.ssid | uri %]\">[% wlan.ssid | html_entity %]</a>\n            [% END %]\n            )\n          [% END %]\n          [% IF params.n_vendor AND node.oui.defined %]\n            (Vendor:\n            [% FOREACH oui IN node.oui %]\n              <a href=\"[%+ uri_for('/report/nodevendor') %]?vendor=[% oui.abbrev | uri %]\">[% oui.abbrev | html_entity %]</a>\n            [% END %]\n            )\n          [% END %]\n          [% ' (' _ node.time_last_age _ ')' IF params.n_age %]\n          [% IF params.n_ip4 OR params.n_ip6 %]\n            [% FOREACH ip IN node.$ips %]\n            <br/>&nbsp; [% '<i class=\"icon-book\"></i>&nbsp; ' IF NOT ip.active %]\n              [% SET dns = ip.dns %]\n              [% IF dns %]\n              <a href=\"[% search_node | none %]&q=[% ip.ip | uri %]\">[% dns | html_entity %] ([% ip.ip | html_entity %])</a>\n              [% ELSE %]\n              <a href=\"[% search_node | none %]&q=[% ip.ip | uri %]\">[% ip.ip | html_entity %]</a>\n              [% END %]\n            [% END %]\n          [% END %]\n          [% IF params.n_netbios %]\n            [% FOREACH nbt IN node.netbios %]\n            <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\\<a href=\"[% uri_for('/report/netbios') | none %]?domain=[% nbt.domain | uri %]\" title=\"Nodes in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node | none %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n            <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node | none %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n            [% END %]\n          [% END %]\n        [% END %]\n        [% END %]\n        [% IF user_can_port_control AND params.c_admin %]\n        <a class=\"nd_log-icon\"\n          href=\"[% uri_for('/admin/topology') | none %]?dev1=[% device.ip | uri %]&port1=[% row.port | uri %]\">\n          <i class=\"icon-link text-warning\"\n            rel=\"tooltip\" data-placement=\"top\" data-offset=\"3\"\n            data-animation=\"\" data-title=\"Manual Topology\"></i>\n        </a>\n        [% END %]\n      </td>\n      [% END %]\n\n      [% IF params.c_stp %]\n      <td>[% row.stp | html_entity %]</td>\n      [% END %]\n\n      [% IF params.c_up %]\n      <td>\n        [% row.up_admin.ucfirst | html_entity %] / [% row.up.ucfirst | html_entity %]\n      </td>\n      [% END %]\n\n      [% FOREACH config IN settings._extra_device_port_cols %]\n        [% NEXT UNLESS config.position == 'right' AND params.${config.name} %]\n        <td>\n          [% TRY %]\n          [% INCLUDE \"plugin/${config.name}/device_port_column.tt\" %]\n          [% CATCH %]\n          <!-- dummy content required by Template Toolkit TRY -->\n          [% END %]\n        </td>\n      [% END %]\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n[% IF user_can_port_control %]\n<div id=\"nd_portlog\" class=\"nd_modal nd_deep-horizon modal hide fade\" tabindex=\"-1\"\n    role=\"dialog\" aria-hidden=\"true\">\n  <div class=\"modal-body\">\n    <blockquote>\n      <ul><li><p>Please provide a reason for changing the Port Configuration</p></li></ul>\n    </blockquote>\n    <select id=\"nd_portlog-reason\" class=\"input-block-level\" name=\"reason\">\n      [% FOREACH pair IN settings.port_control_reasons.pairs %]\n        <option[% ' selected=\"selected\"' IF pair.key == 'other' %] value=\"[% pair.key | html_entity %]\">\n          [% pair.value | html_entity %]</option>\n      [% END %]\n    </select>\n    <textarea id=\"nd_portlog-log\" class=\"input-block-level\" rows=\"2\" name=\"log\"\n      placeholder=\"Enter a log message\"></textarea>\n  </div>\n  <div class=\"modal-footer\">\n    <button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">Cancel</button>\n    <button id=\"nd_portlog-submit\" class=\"btn btn-info\" data-dismiss=\"modal\">Continue</button>\n  </div>\n</div>\n[% END %]\n\n<script>\n$(document).ready(function() {\n    $('#dp-data-table').dataTable({\n        \"columnDefs\": [\n            { \"sortable\": false, \"targets\": 0 },\n            { \"searchable\": false, \"targets\": 0 },\n            { \"type\": 'portsort', \"targets\": [ 'portsort' ] }\n        ],\n        \"order\": [[ 1, 'asc' ]],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN ID</th>\n      <th>VLAN Name</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') | none %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Channel</th>\n      <th>Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 1, \"desc\" ]],\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'channel'\n      }, {\n        \"data\": 'ch_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Model</th>\n      <th>Location</th>\n      <th>Port</th>\n      <th>SSID</th>\n      <th>Node Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 5, \"desc\" ]],\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% uri_for('/device') | none %]?tab=details&q=' + encodeURIComponent(row.ip) + '\">'\n            + he.encode(row.dns || row.name || row.ip) + '</a>' :\n          data;\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ssid',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'mac_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP</th>\n      <th>DNS</th>\n      <th>Device</th>\n      <th>Port</th>            \n      <th>Name</th>\n      <th>Description</th>\n      <th class=\"nd_center-cell\">Channel</th>\n      <th class=\"nd_center-cell\">Tx Power (mW/dBm)</th>\n    </tr>\n  </thead>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\nfunction groupString(d) {\n    \"use strict\";\n    var s = '';\n    s = s + 'Device: ';\n    s = s + '<a href=\"[% uri_for('/device') | none %]?tab=details&q=' + encodeURIComponent(d.ip) + '\">';\n    s = s + he.encode(d.dns || d.device_name || d.ip);\n    if (d.dns || d.device_name) {\n        s = s + ' (' +  he.encode(d.ip) + ') ';\n    }\n    s = s + '</a> Model: ' + he.encode(d.model || '');\n    s = s + he.encode(d.location ? ' Location: ' + d.location : '');\n\n    return s;\n}\n\n$(document).ready(function() {\n  var table = $('#data-table').DataTable({\n    \"serverSide\": true,\n    \"ajax\": \"[% uri_for('/ajax/content/report/apradiochannelpower/data') | none %]\",\n    \"order\": [[ 0, 'asc' ]],\n    \"columns\": [\n      {\n        // Grouping column\n        \"data\": 'ip',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'device_name',\n        \"visible\": false\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port_name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'descr',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'channel',\n        \"className\": \"nd_center-cell\"\n      }, {\n        \"data\": 'power',\n        \"className\": \"nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return (row.power2 ? data + ' / ' + row.power2 : '');\n        }\n      }\n    ],\n    \"drawCallback\": function ( settings ) {\n      var api = this.api();\n      var rows = api.rows( {page:'current'} ).nodes();\n      var last=null;\n\n      api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n        if ( last !== group ) {\n          var row_data = api.row( i ).data();\n          $(rows).eq( i ).before(\n            '<tr class=\"group\"><td colspan=\"5\">' + groupString(row_data) + '</td></tr>'\n            );\n          last = group;\n        }\n      } );\n    },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n \n  // Order by the grouping\n  $('#data-table tbody').on( 'click', 'tr.group', function () {\n    var currentOrder = table.order()[0];\n    if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n      table.order( [ 0, 'desc' ] ).draw();\n    }\n    else {\n      table.order( [ 0, 'asc' ] ).draw();\n    }\n  } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">Address</th>\n      <th class=\"nd_center-cell\">Contact</th>\n      <th class=\"nd_center-cell\">Location</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [{\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'alias',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'contact',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Location</th>\n      <th class=\"nd_center-cell\">Device</th>\n      <th class=\"nd_center-cell\">System Name</th>\n      <th class=\"nd_center-cell\">Vendor</th>\n      <th class=\"nd_center-cell\">Model</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"order\": [[ 0, \"asc\" ], [2, \"asc\"], [ 3, \"asc\" ], [4, \"asc\"]],\n        \"data\": [% results | none %],\n        \"columns\": [\n           {\n                \"data\": 'location',\n                \"render\": function(data, type, row, meta) {\n                  if (data) {\n                    return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '&location=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n\n                  } else {\n                    return '[Not Set]';\n                  }\n                }\n            }, {\n                \"data\": 'ip',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% uri_for('/device') | none %]?q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n                }\n            }, {\n                \"data\": 'name',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }, {\n                \"data\": 'vendor',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }, {\n                \"data\": 'model',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n                }\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>DNS</th>\n      <th>IP Address</th>\n      <th>Contact</th>\n      <th>Location</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n            return '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.name || row.ip) + '</a>';\n          }\n      }, {\n        \"data\": 'dns',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'contact',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP</th>\n      <th>DNS</th>\n      <th>Name</th>\n      <th>Model</th>\n      <th>Location</th>\n      <th>PoE<br>Module</th>\n      <th class=\"nd_center-cell\">Supply</th>\n      <th class=\"nd_center-cell\">Power<br>(W)</th>\n      <th class=\"nd_center-cell\">Capable<br>Ports</th>\n      <th class=\"nd_center-cell\">Powered<br>Ports</th>\n      <th class=\"nd_center-cell\">Disabled<br>Ports</th>\n      <th class=\"nd_center-cell\">Errored<br>Ports</th>\n      <th class=\"nd_center-cell\">Committed<br>(W)</th>\n      <th class=\"nd_center-cell\">Delivering<br>(W)</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td>[% row.ip | html_entity %]</td>\n      <td>[% row.dns | html_entity %]</td>\n      <td>[% row.name | html_entity %]</td>\n      <td>[% row.model | html_entity %]</td>\n      <td>[% row.location | html_entity %]</td>\n      <td>[% row.module | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.power | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.status | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_capable_ports | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_powered_ports | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_disabled_ports | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_errored_ports | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_power_committed | html_entity %]</td>\n      <td class=\"nd_center-cell\">[% row.poe_power_delivering | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\nfunction groupString(d) {\n    \"use strict\";\n    var s = '';\n    s = s + 'Device: ';\n    s = s + '<a href=\"[% uri_for('/device') | none %]?tab=details&q=' + encodeURIComponent(d.ip) + '\">';\n    s = s + he.encode(d.dns || d.name || d.ip);\n    if (d.dns || d.name) {\n        s = s + ' (' +  he.encode(d.ip) + ') ';\n    }\n    s = s + '</a> Model: ' + he.encode(d.model || '');\n    s = s + he.encode(d.location ? ' Location: ' + d.location : '');\n\n    return s;\n}\n\n$(document).ready(function() {\n    var table = $('#data-table').DataTable({\n    \"serverSide\": true,\n    \"ajax\": \"[% uri_for('/ajax/content/report/devicepoestatus/data') | none %]\",\n    \"order\": [[ 0, 'asc' ]],\n    \"columns\": [\n      {\n        // Grouping column\n        \"data\": 'ip',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'name',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'model',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'location',\n        \"visible\": false\n      }, {\n        \"data\": 'module',\n        \"searchable\": false\n      }, {\n        \"data\": 'status',\n        \"className\": \"nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'power',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_capable_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_powered_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_disabled_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_errored_ports',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_power_committed',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'poe_power_delivering',\n        \"className\": \"nd_center-cell\",\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"drawCallback\": function ( settings ) {\n      var api = this.api();\n      var rows = api.rows( {page:'current'} ).nodes();\n      var last=null;\n\n      api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n        if ( last !== group ) {\n          var row_data = api.row( i ).data();\n          $(rows).eq( i ).before(\n            '<tr class=\"group\"><td colspan=\"9\">' + groupString(row_data) + '</td></tr>'\n            );\n          last = group;\n        }\n      } );\n    },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n \n    // Order by the grouping\n    $('#data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Left Device</th>\n      <th>Port</th>\n      <th>Duplex</th>\n      <th>Right Device</th>\n      <th>Port</th>\n      <th>Duplex</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'left_ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.left_dns || row.left_ip);\n        }\n      }, {\n        \"data\": 'left_port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.left_dns || row.left_ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'left_duplex',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data || ''));\n        }\n      }, {\n        \"data\": 'right_ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.right_dns || row.right_ip);\n        }\n      }, {\n        \"data\": 'right_port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.right_dns || row.right_ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'right_duplex',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data || ''));\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Description</th>\n      <th>Duplex</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.device.dns || row.device.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_duplex=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'duplex',\n        \"searchable\": false,\n        \"orderable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(capitalizeFirstLetter(data));\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"nsbi-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Model</th>\n      <th>Operating System Version</th>\n      <th>Count</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td>\n        <a href=\"[% search_device | none %]&q=[% row.model | uri %]&vendor=[% row.vendor | uri %]&model=[% row.model | uri %]\">\n            [% row.vendor.ucfirst | html_entity %]&nbsp;[% row.model | html_entity %]</a>\n            [% IF row.os %] running &quot;[% row.os | html_entity %]&quot;[% END %]\n      </td>\n      <td>\n        <a class=\"nd_linkcell\"\n          href=\"[% search_device | none %]&q=[% row.os_ver | uri %]&vendor=[% row.vendor | uri %]&model=[% row.model | uri %]&os=[% row.os | uri %]&os_ver=[% row.os_ver | uri %]&matchall=on\">\n            [% row.os_ver | html_entity %]</a>\n      </td>\n      <td>[% row.os_ver_count | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbi-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        sort: false,\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbi-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>IP Address</th>\n      <th>MAC Address</th>\n      <th class=\"nd_center-cell\">DNS</th>\n      <th>Last Used</th>      \n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          var cell_str = he.encode(data);\n          if (type == 'display') {\n            if (row.time_last && row.node) {\n              cell_str = '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data)\n                + (row.active ? '' : '&archived=on') + '\">' + he.encode(data)\n                + (row.active ? '' : '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;') + '</a>';\n            }\n            else if (row.time_last) {\n              cell_str = '<a href=\"[% search_device | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n            }\n          }\n          return cell_str;\n        }\n      }, {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          var cell_str = he.encode(data || '');\n          if (type == 'display' && data && row.time_last) {\n            cell_str = '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data)\n              + (row.active ? '' : '&archived=on') + '\">' + he.encode(data)\n              + (row.active ? '' : '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;') + '</a>';\n          }\n          return cell_str;\n        }\n      }, {\n        \"data\": 'dns',\n        \"className\": \"nd_nowrap nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'age',\n        \"render\": function(data, type, row, meta) {\n          if (type == 'display') {\n            return he.encode(data || 'Never');\n          }\n          else {\n            // so that sorting works correctly on this column\n            return row.time_last;\n          }\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Device</th>\n        <th>Description</th>\n        <th>Name</th>\n        <th>Class</th>\n        <th>Type</th>\n        <th>Model</th>\n        <th>Serial</th>\n        <th>HW Version</th>\n        <th>SW Version</th>\n        <th>FW Version</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Class</th>\n        <th>Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %] \n    \"serverSide\": true,\n    \"searching\": false,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/moduleinventory/data') | none %]?[% url(params('query').hash) | none %]\",\n    \"columns\": [\n      {\n      \"data\": 'ip',\n      \"render\": function(data, type, row, meta) {\n        return '<a href=\"[% uri_for('/device') | none %]?tab=modules&q=' + encodeURIComponent(data) + '\">' + he.encode(row.device.dns || row.device.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&description=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&name=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'class',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&class=' + encodeURIComponent(data) + '\">' + he.encode(capitalizeFirstLetter(data + '')) + '</a>';\n        }\n      }, {\n        \"data\": 'type',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&type=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&model=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'serial',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&serial=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'hw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'sw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'fw_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'class',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% report_moduleinventory | none %]&class=' + encodeURIComponent(data) + '\">' + he.encode(capitalizeFirstLetter(data + '')) + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n      [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Domain</th>\n        <th>Node</th>\n        <th>Name</th>\n        <th>User</th>\n        <th>First Seen</th>\n        <th>Last Seen</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Domain</th>\n        <th>Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %]\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/netbios/data') | none %]?[% url(params('query').hash) | none %]\",\n    \"columns\": [\n      {\n        \"data\": 'domain',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '(Blank Domain)');\n        }\n      }, {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + '</a>';\n        }\n      }, {\n        \"data\": 'nbname',\n        \"render\": function(data, type, row, meta) {\n          var prefix = '';\n          if (row.domain) {\n            prefix = '\\\\\\\\' + row.domain + '\\\\';\n          }\n          return he.encode(prefix) + '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data) + '</a>';\n        }\n      }, {\n        \"data\": 'nbuser',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.nbuser || '[No User]');\n        }\n      }, {\n        \"data\": 'time_first',\n        \"render\": function(data, type, row, meta) {\n          return moment(data).format('YYYY-MM-DD HH:mm');\n        }\n      }, {\n        \"data\": 'time_last',\n        \"render\": function(data, type, row, meta) {\n          return moment(data).format('YYYY-MM-DD HH:mm');\n        }\n      }\n    ],\n    \"order\": [[0, \"asc\"], [5, \"desc\"]],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [    \n      {\n        \"data\": 'domain',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/netbios') | none %]?domain=' + encodeURIComponent(data || 'blank') + '\">' + he.encode(data || '(Blank Domain)') + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"order\": [[1, \"desc\"]],\n    [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "[% USE Number.Format %]\n<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Vendor</th>\n      <th>Location</th>\n      <th>IPs</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 3, \"desc\" ]],\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + '</a>';\n        }\n      }, {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'port',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.switch) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(row.dns || row.name || row.switch) + '(' + he.encode(data) + ')</a>';\n        }\n      }, {\n        \"data\": 'ip_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Remote ID</th>\n      <th>Remote IP</th>\n      <th>Remote Port</th>\n      <th>Remote Type</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || data);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&c_nodes=on&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_id',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data || '') + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'remote_port',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'remote_type',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE url %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>MAC</th>\n        <th>Vendor</th>        \n        <th>Device (Port)</th>\n        <th>Device DNS</th>\n        <th>Device Name</th>\n        <th>Device IP</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n      <th class=\"nd_center-cell\">Vendor</th>\n      <th class=\"nd_center-cell\">Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    [% IF opt %]\n    \"serverSide\": true,\n    \"order\": [[ 0, \"desc\" ]],\n    \"ajax\": \"[% uri_for('/ajax/content/report/nodevendor/data') | none %]?[% url(params('query').hash) | none %]\",\n    \"columns\": [\n      {\n        \"data\": 'mac',\n        \"render\": function(data, type, row, meta) {\n          var icon = '&nbsp;&nbsp;<i class=\"icon-book text-warning\"></i> ';\n          if (row.active) {\n            icon = '';\n          }\n          return '<a href=\"[% search_node | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data.toUpperCase()) + icon + '</a>';\n        }\n      }, {\n        \"data\": 'oui.abbrev',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=' + encodeURIComponent(row.oui.abbrev || 'blank') + '\">' + he.encode(row.oui.company ||'(Unknown Vendor)') + '</a>';\n        }\n      }, {\n        \"data\": 'port',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.switch) + '&f=' + encodeURIComponent(data) + '&c_nodes=on&n_ssid=on\">' + he.encode(row.device.dns || row.device.name || row.switch) + '(' + he.encode(data) + ')</a>';\n        }\n      }, {\n        // Included for filtering\n        \"data\": 'device.dns',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'device.name',\n        \"visible\": false\n      }, {\n        // Included for filtering\n        \"data\": 'switch',\n        \"visible\": false\n      }\n    ],\n    [% ELSE %]\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [    \n      {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=' + encodeURIComponent(row.abbrev || 'blank') + '\">' + he.encode(row.vendor ||'(Unknown Vendor)') + '</a>';\n        }\n      }, {\n        \"data\": 'count',\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n    \"order\": [[1, \"desc\"]],\n    [% END %]\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>Admin Status</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 0, \"asc\" ], [1, \"asc\"]],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'up_admin',\n        \"orderable\": false,\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    \"data\": [% results | none %],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>STP Status</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 0, \"asc\" ], [1, \"asc\"]],\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'stp',\n        \"orderable\": false,\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Port</th>\n      <th>Port Description</th>      \n      <th>Node Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"order\": [[ 3, \"desc\" ]],\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(row.dns || row.name || row.ip);\n        }\n      }, {\n        \"data\": 'port',\n        \"type\": 'portsort',\n        \"render\": function(data, type, row, meta) {\n          return type === 'display' ?\n            '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '&c_nodes=on\">' + he.encode(data || '') + '</a>' :\n            he.encode(data || '');\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'mac_count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "[% USE Number.Format %]\n[% IF opt %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n        <th>Device (Port)</th>\n        <th>Broadcast</th>\n        <th>Model</th>\n        <th>SSID</th>\n        <th>Vendor</th>\n      </tr>\n    </thead>\n  </table>\n[% ELSE %]\n  <table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n    <thead>\n      <tr>\n      <th class=\"nd_center-cell\">SSID</th>\n      <th class=\"nd_center-cell\">Broadcast</th>\n      <th class=\"nd_center-cell\">Count</th>\n      </tr>\n    </thead>\n  </table>\n[% END %]\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    [% IF opt %]\n    \"columns\": [\n      {\n      \"data\": 'ip',\n      \"render\": function(data, type, row, meta) {\n        return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(data) + '&f=' + encodeURIComponent(row.port.port) + '&c_nodes=on&n_ssid=on\">' + he.encode(row.device.dns || row.device.name || row.ip) + '(' + he.encode(row.port.port) + ')</a>';\n        }\n      }, {\n        \"data\": 'broadcast',\n        \"render\": function(data, type, row, meta) {\n          return (data ? 'Yes' : 'No');\n        }\n      }, {\n        \"data\": 'device.model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ssid',\n        \"searchable\": false,\n        \"orderable\": false,\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'device.vendor',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n    [% ELSE %]\n    \"columns\": [\n      {\n        \"data\": 'ssid',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/report/portssid') | none %]?ssid=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'broadcast',\n        \"render\": function(data, type, row, meta) {\n          return (data ? 'Yes' : 'No');\n        }\n      }, {\n        \"data\": 'count',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      },\n    ],\n    \"order\": [[ 2, \"desc\" ]],\n  [% END %]  \n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th class=\"nd_center-cell\">Total Ports</th>\n      <th class=\"nd_center-cell\">In Use</th>\n      <th class=\"nd_center-cell\">Shutdown</th>\n      <th class=\"nd_center-cell\">Free</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"data\": [% results | none %],\n        \"columns\": [\n           {\n                \"data\": 'ip',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n                }\n            }, {\n                \"data\": 'port_count',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_in_use',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_shutdown',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }, {\n                \"data\": 'ports_free',\n                \"searchable\": false,\n                \"render\": function(data, type, row, meta) {\n                    return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n                }\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Left Device</th>\n      <th>Left Port</th>\n      <th>Left VLANs</th>\n      <th>Right Device</th>\n      <th>Right Port</th>\n      <th>Right VLANs</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n    var table = $('#data-table').dataTable({\n        \"deferRender\": true,\n        \"data\": [% results | none %],\n        \"columns\": [\n               {\n                \"data\": 'left_device',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>'; }\n            }, {\n              \"data\": 'left_port',\n              \"type\": 'portsort',\n              \"render\": function(data, type, row, meta) {\n                return type === 'display' ?\n                  '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.left_device) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n                  he.encode(data || ''); }\n            }, {\n                \"data\": 'left_vlans'\n            }, {\n                \"data\": 'right_device',\n                \"render\": function(data, type, row, meta) {\n                    return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>'; }\n            }, {\n              \"data\": 'right_port',\n              \"type\": 'portsort',\n              \"render\": function(data, type, row, meta) {\n                return type === 'display' ?\n                  '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.right_device) + '&f=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>' :\n                  he.encode(data || ''); }\n            }, {\n                \"data\": 'right_vlans'\n            }\n        ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    });\n\n});\n</script>\n", "[% USE Number.Format %]\n<table id=\"data-table\" class=\"table table-bordered table-condensed table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th class=\"nd_center-cell\">Subnet</th>\n      <th class=\"nd_center-cell\">Size</th>\n      <th class=\"nd_center-cell\">Number of Active Nodes</th>\n      <th class=\"nd_center-cell\">Percent Utilization</th>\n    </tr>\n  </thead>\n  <tbody>\n    [% FOREACH row IN results %]\n    <tr>\n      <td class=\"nd_center-cell\"><a href=\"[% uri_for('/report/ipinventory') | none %]?subnet=[% row.subnet | uri %]&daterange=[% params.daterange | uri %]&age_invert=[% params.age_invert | uri %]&limit=[% row.subnet_size | uri %]\">\n               [% row.subnet | html_entity %]</a></td>\n      <td class=\"nd_center-cell\">[% row.subnet_size | format_number %]</td>\n      <td class=\"nd_center-cell\">[% row.active | format_number %]</td>\n      <td class=\"nd_center-cell\">[% row.percent | html_entity %]</td>\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<script>\n$(document).ready(function() {\n  $('#data-table').dataTable({\n    \"order\": [[ 3, 'desc' ]],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  } );\n} );\n</script>\n\n", "<table id=\"data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN ID</th>\n      <th>VLAN Name</th>\n      <th>Device Count</th>\n      <th>Port Count</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [\n      {\n        \"data\": 'vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') | none %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'description',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/search') | none %]?tab=vlan&q=' + encodeURIComponent(data) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'dcount',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }, {\n        \"data\": 'pcount',\n        \"searchable\": false,\n        \"render\": function(data, type, row, meta) {\n          return data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});\n</script>\n", "<table id=\"ds-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Device</th>\n      <th>Location</th>\n      <th>System Name</th>\n      <th>Model</th>\n      <th>OS Version</th>\n      <th>Management IP</th>\n      <th>Serial</th>\n      <th>First Seen</th>\n      <th>Last Discovered</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#ds-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [{\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% uri_for('/device') | none %]?q=' + encodeURIComponent(data) + '\">' + he.encode(row.dns || row.name || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'location',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'os_ver',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'serial',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'first_seen_stamp',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'last_discover_stamp',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "[% USE date(format = '%Y-%m-%d %H:%M') %]\n[% USE Number.Format %]\n<table id=\"nsbi-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Match</th>\n      <th class=\"nd_center-cell\">Device or Node</th>\n      [% IF params.stamps %]\n      <th>First Seen</th>\n      <th>Last Seen</th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = macs.next) %]\n    [% IF row.nbname %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n          [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_linkcell nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') | none %]?domain=[% row.domain | uri %]\" title=\"Devices in this Domain\">[% row.domain | html_entity %]</a>\\<a href=\"[% search_node | none %]&q=[% row.nbname | uri %]\">[% row.nbname | html_entity %]</a>\n        <br>[% row.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node | none %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% ELSE %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n          [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>IP &rarr; MAC</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node | none %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT row.active %]\n        [% ' (' _ row.dns.remove(settings.domain_suffix) _ ')' IF row.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH nbt IN row.netbios %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% nbt.net_mac.$mac_format_call | uri %]\">\n          [% nbt.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% nbt.oui.abbrev | uri %]\">\n        [% nbt.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_linkcell nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') | none %]?domain=[% nbt.domain | uri %]\" title=\"Devices in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node | none %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n        <br>[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node | none %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% date.format(nbt.time_first) | html_entity %]</td>\n      <td>[% date.format(nbt.time_last) | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH ni IN row.nodeips %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% ni.net_mac.$mac_format_call | uri %]\">\n          [% ni.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% ni.oui.abbrev | uri %]\">\n        [% ni.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>IP &rarr; MAC</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node | none %]&q=[% ni.ip | uri %]\">[% ni.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT ni.active %]\n        [% ' (' _ ni.dns.remove(settings.domain_suffix) _ ')' IF ni.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% date.format(ni.time_first) | html_entity %]</td>\n      <td>[% date.format(ni.time_last) | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% FOREACH node IN row.node_sightings(archive_filter) %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n          [% node.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% node.oui.abbrev | uri %]\">\n        [% node.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n        <a class=\"nd_linkcell\"\n          href=\"[% device_ports | none %]&q=[% node.switch | uri %]&f=[% node.port | uri %]&c_nodes=on&c_neighbors=on&prefer=port\">\n          [% node.switch | html_entity %] - [% node.port | html_entity %]\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>' IF NOT node.active %]</a>\n        [% IF node.device.dns AND node.device_port AND node.device_port.name %]\n          ([% node.device.dns | html_entity %] - [% node.device_port.name | html_entity %])\n        [% END %]\n            on vlan [% node.vlan | html_entity %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% node.time_first_stamp | html_entity %]</td>\n      <td>[% node.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n      [% FOREACH wlan IN node.wireless %]\n      <tr>\n        <td>MAC: <a href=\"[% search_node | none %]&q=[% wlan.net_mac.$mac_format_call | uri %]\">\n            [% wlan.net_mac.$mac_format_call | html_entity %]</a>\n        [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% wlan.oui.abbrev | uri %]\">\n        [% wlan.oui.company | html_entity %]</a> )\n        [% END %]\n        </td>\n        <td>Wireless Info</td>\n        <td class=\"nd_center-cell\">SSID: [% wlan.ssid | html_entity %]<br>\n          MaxRate: [% wlan.maxrate | html_entity %]Mbps TxRate: [% wlan.txrate | html_entity %]Mbps<br>\n          SigStr: [% wlan.sigstrength | html_entity %] SigQual: [% wlan.sigqual | html_entity %]<br>\n          Rx: [% wlan.rxpkt | format_number %] pkts, [% wlan.rxbyte | format_number %] bytes<br>\n          Tx: [% wlan.txpkt | format_number %] pkts, [% wlan.txbyte | format_number %] bytes<br>\n        </td>\n        [% IF params.stamps %]\n        <td> &nbsp; </td>\n        <td>[% date.format(wlan.time_last) | html_entity %]</td>\n        [% END %]\n      </tr>\n      [% END %]\n    [% END %]\n    [% FOREACH nodeip IN row.ip_aliases(archive_filter) %]\n    <tr>\n      <td>MAC: <a href=\"[% search_node | none %]&q=[% nodeip.net_mac.$mac_format_call | uri %]\">\n          [% nodeip.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% nodeip.oui.abbrev | uri %]\">\n        [% nodeip.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>MAC &rarr; IP</td>\n      <td class=\"nd_center-cell\">\n        <a href=\"[% search_node | none %]&q=[% nodeip.ip | uri %]\">[% nodeip.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT nodeip.active %]\n        [% ' (' _ nodeip.dns.remove(settings.domain_suffix) _ ')' IF nodeip.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% nodeip.time_first_stamp | html_entity %]</td>\n      <td>[% nodeip.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbi-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        \"order\": [[ 0, 'asc' ]],\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    [% IF params.stamps %]\n                        '<tr class=\"group\"><td colspan=\"4\">'+group+'</td></tr>'                    \n                    [% ELSE %]\n                        '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'                    \n                    [% END %]\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbi-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "[% USE Number.Format %]\n<table id=\"nsbm-data-table\" class=\"table table-bordered table-hover\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>MAC</th>\n      <th>Match</th>\n      <th class=\"nd_center-cell\">Device or Node</th>\n      [% IF params.stamps %]\n      <th>First Seen</th>\n      <th>Last Seen</th>\n      [% END %]\n    </tr>\n  </thead>\n  <tbody>\n    [% WHILE (row = ips.next) %]\n    <tr>\n      <td>\n          MAC: <a href=\"[% search_node | none %]&q=[% row.net_mac.$mac_format_call | uri %]\">\n            [% row.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% row.oui.abbrev | uri %]\">\n        [% row.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>MAC &rarr; IP</td>\n      <td class=\"nd_center-cell\"><a href=\"[% search_node | none %]&q=[% row.ip | uri %]\">[% row.ip | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT row.active %]\n        [% ' (' _ row.dns.remove(settings.domain_suffix) _ ')' IF row.dns %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% row.time_first_stamp | html_entity %]</td>\n      <td>[% row.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (node = sightings.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node | none %]&q=[% node.net_mac.$mac_format_call | uri %]\">\n            [% node.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% node.oui.abbrev | uri %]\">\n        [% node.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n            <a href=\"[% device_ports | none %]&q=[% node.switch | uri %]&f=[% node.port | uri %]&c_nodes=on&c_neighbors=on&prefer=port\">\n            [% node.switch | html_entity %] - [% node.port | html_entity %]</a>\n        [% '&nbsp;<i class=\"icon-book text-warning\"></i>&nbsp;' IF NOT node.active %]\n        [% IF node.device.dns AND node.device_port AND node.device_port.name %]\n          ([% node.device.dns | html_entity %] - [% node.device_port.name | html_entity %])\n        [% END %]\n            on vlan [% node.vlan | html_entity %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% node.time_first_stamp | html_entity %]</td>\n      <td>[% node.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (port = ports.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node | none %]&q=[% port.net_mac.$mac_format_call | uri %]\">[% port.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% port.oui.abbrev | uri %]\">\n        [% port.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Switch Port</td>\n      <td class=\"nd_center-cell\">\n            <a href=\"[% device_ports | none %]&q=[% port.ip | uri %]&f=[% port.port | uri %]&c_mac=on&c_nodes=on&c_neighbors=on\">\n            [% port.ip | html_entity %] - [% port.descr | html_entity %]</a>\n        [% IF port.device.dns AND port.name %]\n          ([% port.device.dns | html_entity %] - [% port.name | html_entity %])\n        [% END %]\n      </td>\n      [% IF params.stamps %]\n      <td>[% port.creation | html_entity %]</td>\n      <td>[% port.creation | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (nbt = netbios.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node | none %]&q=[% nbt.net_mac.$mac_format_call | uri %]\">[% nbt.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% nbt.oui.abbrev | uri %]\">\n        [% nbt.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>NetBIOS</td>\n      <td class=\"nd_center-cell\">\\\\<a href=\"[% uri_for('/report/netbios') | none %]?domain=[% nbt.domain | uri %]\" title=\"Devices in this Domain\">[% nbt.domain | html_entity %]</a>\\<a href=\"[% search_node | none %]&q=[% nbt.nbname | uri %]\">[% nbt.nbname | html_entity %]</a>\n        <br>[% nbt.nbuser || '[No User]' | html_entity %]@<a href=\"[% search_node | none %]&q=[% nbt.ip | uri %]\">[% nbt.ip | html_entity %]</a>\n      </td>\n      [% IF params.stamps %]\n      <td>[% nbt.time_first_stamp | html_entity %]</td>\n      <td>[% nbt.time_last_stamp | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n    [% WHILE (wlan = wireless.next) %]\n    <tr>\n      <td>\n        MAC: <a href=\"[% search_node | none %]&q=[% wlan.net_mac.$mac_format_call | uri %]\">[% wlan.net_mac.$mac_format_call | html_entity %]</a>\n      [% IF params.show_vendor %]\n        ( <a href=\"[% uri_for('/report/nodevendor') | none %]?vendor=[% wlan.oui.abbrev | uri %]\">\n        [% wlan.oui.company | html_entity %]</a> )\n      [% END %]\n      </td>\n      <td>Wireless Info</td>\n      <td class=\"nd_center-cell\">SSID: [% wlan.ssid | html_entity %]<br>\n          MaxRate: [% wlan.maxrate | html_entity %]Mbps TxRate: [% wlan.txrate | html_entity %]Mbps<br>\n          SigStr: [% wlan.sigstrength | html_entity %] SigQual: [% wlan.sigqual | html_entity %]<br>\n          Rx: [% wlan.rxpkt | format_number %] pkts, [% wlan.rxbyte | format_number %] bytes<br>\n          Tx: [% wlan.txpkt | format_number %] pkts, [% wlan.txbyte | format_number %] bytes<br>\n      </td>\n      [% IF params.stamps %]\n      <td> &nbsp; </td>\n      <td>[% wlan.get_column('time_last_stamp') | html_entity %]</td>\n      [% END %]\n    </tr>\n    [% END %]\n  </tbody>\n</table>\n\n<style>\ntr.group,\ntr.group:hover {\n    background-color: #ddd !important;\n}\n</style>\n\n<script>\n$(document).ready(function() {\n    var table = $('#nsbm-data-table').DataTable({\n        \"columnDefs\": [\n            { \"visible\": false, \"targets\": 0 }\n        ],\n        \"order\": [[ 0, 'asc' ]],\n        \"drawCallback\": function ( settings ) {\n            var api = this.api();\n            var rows = api.rows( {page:'current'} ).nodes();\n            var last=null;\n \n            api.column(0, {page:'current'} ).data().each( function ( group, i ) {\n                if ( last !== group ) {\n                    $(rows).eq( i ).before(\n                    [% IF params.stamps %]\n                        '<tr class=\"group\"><td colspan=\"4\">'+group+'</td></tr>'                    \n                    [% ELSE %]\n                        '<tr class=\"group\"><td colspan=\"2\">'+group+'</td></tr>'                    \n                    [% END %]\n                    );\n\n                    last = group;\n                }\n            } );\n        },\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n    } );\n \n    // Order by the grouping\n    $('#nsbm-data-table tbody').on( 'click', 'tr.group', function () {\n        var currentOrder = table.order()[0];\n        if ( currentOrder[0] === 0 && currentOrder[1] === 'asc' ) {\n            table.order( [ 0, 'desc' ] ).draw();\n        }\n        else {\n            table.order( [ 0, 'asc' ] ).draw();\n        }\n    } );\n} );\n</script>\n", "<table id=\"ps-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>Status</th>\n      <th>Name</th>\n      <th>Port</th>\n      <th>VLAN</th>\n      <th>Speed</th>\n      <th>Last Change</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#ps-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columnDefs\": [\n        { \"sortable\": false, \"targets\": 0 },\n        { \"searchable\": false, \"targets\": 0 },\n        { \"type\": 'portsort', \"targets\": [ 'portsort' ] }\n    ],\n    \"order\": [[ 1, 'asc' ]],\n    \"columns\": [{\n        \"data\": 'up',\n        \"className\": \"nd_center-cell nd_devport-icon\",\n        \"render\": function(data, type, row, meta) {\n          if (row.up_admin != \"up\") {\n            return'<i class=\"icon-remove\"></i>';\n          }\n          else if (row.up_admin == \"up\" && (row.up != \"up\" && row.up != \"dormant\")) {\n            return '<i class=\"icon-arrow-down text-error\"></i>';\n          }\n          else {\n            return '<i class=\"icon-angle-up text-success\"></i>';\n          }\n        }\n      }, {\n        \"data\": 'name',\n        \"render\": function(data, type, row, meta) {\n          return he.encode(data || '');\n        }\n      }, {\n        \"data\": 'ip',\n        \"className\": \"nd_nowrap nd_center-cell\",\n        \"render\": function(data, type, row, meta) {\n          var ddns = '';\n          if (row.device.dns || row.device.name) {\n            ddns = '<br>(' + he.encode(row.device.dns || row.device.name)  + ')';\n          }\n          return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(data)\n            + '&f=' + encodeURIComponent(row.port) + '\">' + he.encode(data)\n            + ' [' + he.encode(row.port) + ']</a>' + ddns;\n        }\n      }, {\n        \"data\": 'port_vlans.vlan',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }, {\n        \"data\": 'speed',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }, {\n        \"data\": 'lastchange_stamp',\n        \"render\": function(data, type, row, meta) {\n          return data || '';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n\n", "<table id=\"vs-data-table\" class=\"table table-striped table-bordered\" width=\"100%\" cellspacing=\"0\">\n  <thead>\n    <tr>\n      <th>VLAN</th>\n      <th>Device</th>\n      <th>Description</th>\n      <th>Model</th>\n      <th>OS</th>\n      <th>Vendor</th>\n    </tr>\n  </thead>\n</table>\n\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  var table = $('#vs-data-table').dataTable({\n    \"deferRender\": true,\n    \"data\": [% results | none %],\n    \"columns\": [{\n        \"data\": 'vlans.vlan',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(data) + '\">' + data + '</a>';\n        }\n      }, {\n        \"data\": 'ip',\n        \"render\": function(data, type, row, meta) {\n          return '<a href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(row.dns || row.ip) + '</a>';\n        }\n      }, {\n        \"data\": 'vlans.description',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'model',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'os',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }, {\n        \"data\": 'vendor',\n        \"render\": function(data, type, row, meta) {\n          return '<a class=\"nd_linkcell nd_stealth-link\" href=\"[% device_ports | none %]&q=' + encodeURIComponent(row.ip) + '&f=' + encodeURIComponent(row.vlans.vlan) + '\">' + he.encode(data || '') + '</a>';\n        }\n      }\n    ],\n[% INCLUDE 'ajax/datatabledefaults.tt' -%]\n  });\n});</script>\n", "[% USE Number.Format %]\n    <div class=\"row\">\n    [% IF stats.day %]\n      <div class=\"span5 offset1\">\n      <h4>Statistics for this installation</h4>\n        <table class=\"table table-condensed\">\n          <thead>\n            <tr>\n              <th>[% stats.device_count | format_number %] devices\n                  with [% stats.device_ip_count | format_number %] IPs\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th>[% stats.device_port_count | format_number %] interfaces\n                  of which [% stats.device_port_up_count | format_number %] are up\n              </th>\n            </tr>\n            [% IF stats.device_link_count %]\n            <tr>\n              <th>[% stats.device_link_count| format_number %] layer 2 links between devices</th>\n            </tr>\n            [% END %]\n            <tr>\n              <th>[% stats.node_table_count | format_number %] nodes logged, of which [% stats.node_active_count | format_number %] are active</th>\n            </tr>\n            <tr>\n              <th>[% stats.ip_table_count | format_number %] IPs logged, of which [% stats.ip_active_count | format_number %] are active</th>\n            </tr>\n            <tr>\n              <th>Statistics last generated on [% stats.day | html_entity %]</th>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"span4 offset1\">\n      <h4>Built using Open Source</h4>\n        <table class=\"table table-condensed\">\n          <thead>\n            <tr>\n              <th>Software</th>\n              <th>Version</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th><b><a href=\"http://netdisco.org\">App::Netdisco</a></b></th>\n              <th>[% stats.netdisco_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"https://github.com/netdisco/snmp-info\">SNMP::Info</a></th>\n              <th>[% stats.snmpinfo_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"https://metacpan.org/module/netdisco-db-deploy\">DB Schema</a></th>\n              <th>[% stats.schema_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"http://www.postgresql.org\">PostgreSQL</a></th>\n              <th>[% stats.pg_ver | html_entity %]</th>\n            </tr>\n            <tr>\n              <th><a href=\"http://www.perl.org\">Perl</a></th>\n              <th>[% stats.perl_ver | html_entity %]</th>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    [% ELSE %]\n      <div class=\"span4 alert alert-info\">Statistics will be available tomorrow.</div>\n    [% END %]\n    </div>\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n      <a id=\"nd_sidebar-reset-link\" href=\"#\">\n        <i class=\"nd_sidebar-reset icon-undo\"\n          rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Reset to Defaults\" data-container=\"body\"></i>\n      </a>\n      <div class=\"tab-content\">\n        [% FOREACH tab IN settings._device_tabs %]\n        <div id=\"[% tab.tag | html_entity %]_search\" class=\"tab-pane [% 'active' IF params.tab == tab.tag %]\">\n          <form id=\"[% tab.tag | html_entity %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/device') | none %]\">\n            <input name=\"tab\" value=\"[% tab.tag | html_entity %]\" type=\"hidden\"/>\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag | html_entity %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/device/${tab.tag}.tt\" %]\n            [% CATCH %]\n            <!-- no \"[% tab.tag | html_entity %]\" search options -->\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <input name=\"f\" value=\"[% params.f | html_entity %]\" type=\"hidden\"/>\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag | html_entity %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n        [% END %]\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      [% FOREACH tab IN settings._device_tabs %]\n      <li[% ' class=\"active\"' IF params.tab == tab.tag %]><a id=\"[% tab.tag | html_entity %]_link\" href=\"#[% tab.tag | html_entity %]_pane\">[% tab.label | html_entity %]</a></li>\n      [% END %]\n      <span id=\"nd_device-name\">\n        [% display_name | html_entity %]\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">&nbsp;\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n    </ul>\n    <div class=\"tab-content\">\n      [% FOREACH tab IN settings._device_tabs %]\n      <div class=\"tab-pane[% ' active' IF params.tab == tab.tag %]\" id=\"[% tab.tag | html_entity %]_pane\"></div>\n      [% END %]\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/device.js' -%]\n</script>\n", "<div class=\"container\">\n  <div class=\"row nd_hero-row\">\n    <div class=\"span8 offset2\">\n      [% IF params.login_failed %]\n      <div class=\"alert alert-error fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Incorrect username or password, please try again.\n      </div>\n      [% END %]\n      [% IF params.logout %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        You are now logged out.\n      </div>\n      [% END %]\n      [% IF params.nosuchdevice %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Sorry, no such device is known.\n      </div>\n      [% END %]\n      [% IF vars.notfound %]\n      <div class=\"alert fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Sorry, page not found.&nbsp;\n          <a href=\"https://github.com/netdisco/netdisco/issues/new\" target=\"_blank\"><i class=\"icon-bug\"></i>&nbsp;Report a Bug?</a>\n      </div>\n      [% END %]\n      [% IF settings.suggest_guest AND NOT session.logged_in_user %]\n      <div class=\"alert alert-info fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Guest access is available by entering username &quot;guest&quot; and password &quot;guest&quot;.\n      </div>\n      [% END %]\n      <div class=\"hero-unit\">\n        <h2>Welcome to Netdisco</h2>\n        <small>Netdisco is an Open Source management tool designed for network administrators.</small>\n        [% IF NOT session.logged_in_user %]\n        <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/login') | none %]\">\n          <div class=\"form-horizontal\">\n            <input id='loginuser' placeholder=\"Username\" class=\"span2\" name=\"username\" type=\"text\" required=\"required\"/>\n            <input placeholder=\"Password\" class=\"span2\" name=\"password\" type=\"password\" required=\"required\"/>\n            <button type=\"submit\" class=\"btn btn-info\">Log In</button>\n            [% IF settings.login_logo %]\n            <img src=\"[% settings.login_logo | none %]\" alt=\"Login Logo\" />\n            [% END %]\n          </div>\n          [% IF params.return_url %]\n          <input type=\"hidden\" name=\"return_url\" value=\"[% params.return_url | html_entity %]\"/>\n          [% END %]\n        </form>\n        [% ELSE %]\n          <p></p> <p></p>\n          <form class=\"\" method=\"get\" action=\"[% uri_for('/search') | none %]\">\n            <div class=\"form-horizontal\">\n              <input placeholder=\"Find Anything\" class=\"span4\" id=\"nqbody\" name=\"q\" type=\"text\" autocomplete=\"off\"/>\n              <input name=\"firstsearch\" type=\"hidden\" value=\"on\">\n              <div class=\"btn-group\">\n                <button type=\"submit\" class=\"btn btn-primary\">Search</button>\n                <button class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                  <span class=\"caret\"></span>&nbsp;\n                </button>\n                <ul class=\"dropdown-menu\">\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"device\">Search Devices</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"node\">Search Nodes</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"vlan\">Search VLANs</a></li>\n                  <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"port\">Search Ports</a></li>\n                </ul>\n              </div>\n            </div>\n          </form>\n          [% IF user_has_role('admin') %]\n          <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/admin/discover') | none %]\">\n            <div class=\"form-horizontal\">\n              <input placeholder=\"Device hostname or IP\" class=\"span4\" name=\"device\" value=\"[% params.device | html_entity %]\" type=\"text\"/>\n              <input type=\"hidden\" name=\"extra\" value=\"with-nodes\"/>\n              <button type=\"submit\" class=\"btn btn-info\">Discover</button>\n            </div>\n          </form>\n          [% END %]\n        [% END %]\n      </div>\n    </div>\n  </div>\n  [% IF session.logged_in_user %]\n  <div class=\"accordion\" id=\"accordion-statistics\">\n    <div class=\"accordion-group\">\n      <div class=\"accordion-heading nd_sysinfo-heading\">\n          <a class=\"accordion-toggle\" data-toggle=\"collapse\" data-target=\"#collapse-stats\" href=\"#\">\n            <i class=\"icon-chevron-up nd_chevron\"></i> System Information\n          </a>\n      </div>\n      <div id=\"collapse-stats\" class=\"accordion-body collapse\">\n        <div class=\"accordion-inner\">\n          <div id=\"nd_stats\">\n            <div id=\"nd_stats_status\" class=\"span2 offset4 alert\">\n              <i class=\"icon-spinner icon-spin\"></i> Compiling statistics...</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  [% END %]\n</div> <!-- /container -->\n\n[% IF session.logged_in_user %]\n<script type=\"text/javascript\">\n  var stats_loaded = 0;\n  $('#nqbody').focus(); // set focus to main search\n  $('#loginuser').focus(); // set focus to login, if it's there\n\n  $('.collapse').on('show', function() {\n    $('.nd_chevron').toggleClass('icon-chevron-up icon-chevron-down');\n\n    if (! stats_loaded) {\n      $('#nd_stats').load(\"[% uri_for('/ajax/content/statistics') | none %]\", function(r,s,x) {\n        if (s == \"error\") {\n          $('#nd_stats_status').addClass('alert-error')\n            .html('<i class=\"icon-warning-sign\"></i> Failed to retrieve system information.');\n        }\n      });\n      stats_loaded = 1;\n    }\n  });\n\n  $('.collapse').on('hide', function() {\n    $('.nd_chevron').toggleClass('icon-chevron-up icon-chevron-down');\n  });\n</script>\n[% END %]\n", "<div class=\"container\">\n  [% IF platforms.size %]\n  <div class=\"row\">\n    <div class=\"span6\">\n      <h3 class=\"nd_inventory-table-head\">By Platform</h3>\n      <table class=\"table table-condensed table-hover\">\n        <thead>\n          <tr>\n            <th>Vendor</th>\n            <th>Model</th>\n            <th>Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH platform IN platforms %]\n          [% NEXT UNLESS platform.vendor OR platform.model %]\n          <tr>\n            <th>\n              [% IF platform.vendor %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device | none %]&q=[% platform.vendor | uri %]&vendor=[% platform.vendor | uri %]\">\n                  [% platform.vendor | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>\n              [% IF platform.model %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device | none %]&q=[% platform.model | uri %]&model=[% platform.model | uri %]\">\n                  [% platform.model | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>[% platform.count | html_entity %]</th>\n          </tr>\n          [% END %]\n        </tbody>\n      </table>\n    </div>\n    <div class=\"span6\">\n      <h3 class=\"nd_inventory-table-head\">By Software Release</h3>\n      <table class=\"table table-condensed table-hover\">\n        <thead>\n          <tr>\n            <th>OS</th>\n            <th>Version</th>\n            <th>Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          [% FOREACH release IN releases %]\n          [% NEXT UNLESS release.os OR release.os_ver %]\n          <tr>\n            <th>\n              [% IF release.os %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device | none %]&q=[% release.os | uri %]&os=[% release.os | uri %]\">\n                  [% release.os | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>\n              [% IF release.os_ver %]\n              <a class=\"nd_linkcell\"\n                href=\"[% search_device | none %]&q=[% release.os_ver | uri %]&os_ver=[% release.os_ver | uri %]\">\n                  [% release.os_ver | html_entity %]</a>\n              [% ELSE %]unknown[% END %]\n            </th>\n            <th>[% release.count | html_entity %]</th>\n          </tr>\n          [% END %]\n        </tbody>\n      </table>\n    </div>\n  </div>\n  [% ELSE %]\n  <script type=\"text/javascript\">\n    window.location = '[% uri_for(\"/\") %]';\n  </script>\n  [% END %]\n</div>\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'admin';\n\n  // keep track of timers so we can kill them\n  var nd_timers  = new Array();\n  var timermax   = [% settings.jobqueue_refresh || 5 | html_entity %];\n  var timercache = timermax - 1;\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n\n    // reload this table every 5 seconds\n    if (tab == 'jobqueue'\n        && $('#nd_countdown-control-icon').hasClass('icon-play')) {\n\n        $('#nd_countdown').text(timermax);\n\n        // add new timers\n        for (var i = timercache; i > 0; i--) {\n          nd_timers.push(setTimeout(function() {\n            $('#nd_countdown').text(timercache);\n            timercache = timercache - 1;\n          }, ((timermax * 1000) - (i * 1000)) ));\n        }\n\n        nd_timers.push(setTimeout(function() {\n          // clear any running timers\n          for (var i = 0; i < nd_timers.length; i++) {\n              clearTimeout(nd_timers[i]);\n          }\n\n          // reset the timer cache\n          timercache = timermax - 1;\n\n          // reload the tab content in...\n          $('#' + tab + '_form').trigger('submit');\n        }, (timermax * 1000)));\n    }\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_dev').autocomplete({\n      source: uri_base + '/ajax/data/deviceip/typeahead'\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_port.nd_topo_dev1').autocomplete({\n      source: function (request, response)  {\n        var query = $('.nd_topo_dev1').serialize();\n        return $.get( uri_base + '/ajax/data/port/typeahead', query, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate typeahead on the topo boxes\n    $('.nd_topo_port.nd_topo_dev2').autocomplete({\n      source: function (request, response)  {\n        var query = $('.nd_topo_dev2').serialize();\n        return $.get( uri_base + '/ajax/data/port/typeahead', query, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 0\n    });\n\n    // activate modals and tooltips\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% task.tag | html_entity %]'\n    var target = '#' + tab + '_pane';\n\n    // get all devices on device input focus\n    $(target).on('focus', '.nd_topo_dev', function(e) {\n      $(this).autocomplete('search', '%') });\n    $(target).on('click', '.nd_topo_dev_caret', function(e) {\n      $(this).siblings('.nd_topo_dev').autocomplete('search', '%') });\n\n    // get all ports on port input focus\n    $(target).on('focus', '.nd_topo_port', function(e) {\n      $(this).autocomplete('search') });\n    $(target).on('click', '.nd_topo_port_caret', function(e) {\n      $(this).siblings('.nd_topo_port').val('');\n      $(this).siblings('.nd_topo_port').autocomplete('search');\n    });\n\n    // job control refresh icon should reload the page\n    $('#nd_countdown-refresh').click(function(event) {\n      event.preventDefault();\n      for (var i = 0; i < nd_timers.length; i++) {\n          clearTimeout(nd_timers[i]);\n      }\n      $('#' + tab + '_form').trigger('submit');\n    });\n\n    // job control pause/play icon switcheroo\n    $('#nd_countdown-control').click(function(event) {\n      event.preventDefault();\n      var icon = $('#nd_countdown-control-icon');\n      icon.toggleClass('icon-pause icon-play text-error text-success');\n\n      if (icon.hasClass('icon-pause')) {\n        for (var i = 0; i < nd_timers.length; i++) {\n            clearTimeout(nd_timers[i]);\n        }\n        $('#nd_countdown').text('0');\n      }\n      else {\n        $('#' + tab + '_form').trigger('submit');\n      }\n    });\n\n    // activity for admin task tables\n    // dynamically bind to all forms in the table\n    $('.content').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // clear any running timers\n      for (var i = 0; i < nd_timers.length; i++) {\n          clearTimeout(nd_timers[i]);\n      }\n\n      // what purpose - add/update/del\n      var mode = $(this).attr('name');\n\n      // submit the query and put results into the tab pane\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/admin/' + tab + '/' + mode\n        ,data: $(this).closest('tr').find('input[data-form=\"' + mode + '\"]').serializeArray()\n        ,beforeSend: function() {\n          if (mode == 'add' || mode == 'delete') {\n            $(target).html(\n              '<div class=\"span2 alert\">Request submitted...</div>'\n            );\n          }\n        }\n        ,success: function() {\n          if (mode == 'add') {\n            toastr.success('Added record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else if (mode == 'delete') {\n            toastr.success('Deleted record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else {\n            toastr.success('Updated record');\n          }\n        }\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          if (mode == 'add') {\n            toastr.error('Failed to add record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else if (mode == 'delete') {\n            toastr.error('Failed to delete record');\n            $('#' + tab + '_form').trigger('submit');\n          }\n          else {\n            toastr.error('Failed to update record');\n          }\n        }\n      });\n    });\n\n    // bind qtip2 to show the event log output\n    $(target).on('mouseover', '.nd_jobqueueitem', function(event) {\n      $(this).qtip({\n        overwrite: false,\n        content: {\n          attr: 'data-content'\n        },\n        show: {\n          event: event.type,\n          ready: true,\n          delay: 100\n        },\n        position: {\n          my: 'top center',\n          at: 'bottom center',\n          target: false\n        },\n        style: {\n          classes: 'qtip-cluetip qtip-rounded nd_qtip-unconstrained'\n        }\n      });\n    });\n  });\n", "  // csv download icon on any table page\n  // needs to be dynamically updated to use current search options\n  function update_csv_download_link (type, tab, show) {\n    var form = '#' + tab + '_form';\n    var query = $(form).serialize();\n\n    if (show.length) {\n      $('#nd_csv-download')\n        .attr('href', uri_base + '/ajax/content/' + type + '/' + tab + '?' + query)\n        .attr('download', 'netdisco-' + type + '-' + tab + '.csv')\n        .show();\n    }\n    else {\n      $('#nd_csv-download').hide();\n    }\n  }\n\n  // page title includes tab name and possibly device name\n  // this is nice for when you have multiple netdisco pages open in the\n  // browser\n  function update_page_title (tab) {\n    var pgtitle = 'Netdisco';\n    if ($.trim($('#nd_device-name').text()).length) {\n      pgtitle = $.trim($('#nd_device-name').text()) +' - '+ $('#'+ tab + '_link').text();\n    }\n    return pgtitle;\n  }\n\n  // update browser search history with the new query.\n  // support history add (push) or replace via push parameter\n  function update_browser_history (tab, pgtitle, push) {\n    var form = '#' + tab + '_form';\n    var query = $(form).serialize();\n    if (query.length) { query = '?' + query }\n\n    if (window.History && window.History.enabled) {\n      is_from_history_plugin = 1;\n\n      if (push.length) {\n        var target = uri_base + '/' + path + '/' + tab + query;\n        if (location.pathname == target) { return };\n        window.History.pushState(\n          {name: tab, fields: $(form).serializeArray()}, pgtitle, target\n        );\n      }\n      else {\n        var target = uri_base + '/' + path + query;\n        window.History.replaceState(\n          {name: tab, fields: $(form).serializeArray()}, pgtitle, target\n        );\n      }\n\n      is_from_history_plugin = 0;\n    }\n  }\n\n  // each sidebar search form has a hidden copy of the main navbar search\n  function copy_navbar_to_sidebar (tab) {\n    var form = '#' + tab + '_form';\n\n    // copy navbar value to currently active sidebar form\n    if ($('#nq').val()) {\n      $(form).find(\"input[name=q]\").val( $('#nq').val() );\n    }\n    // then copy to all other inactive tab sidebars\n    $('form').find(\"input[name=q]\").each( function() {\n      $(this).val( $(form).find(\"input[name=q]\").val() );\n    });\n  }\n\n  $(document).ready(function() {\n    [% IF search %]\n    // search tabs\n    [% FOREACH tab IN settings._search_tabs %]\n    $('[% \"#${tab.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% tab.tag | html_entity %]');\n      copy_navbar_to_sidebar('[% tab.tag | html_entity %]');\n      update_browser_history('[% tab.tag | html_entity %]', pgtitle, '');\n      update_csv_download_link('search', '[% tab.tag | html_entity %]', '[% tab.provides_csv | html_entity %]');\n      do_search(event, '[% tab.tag | html_entity %]');\n    });\n    [% END %]\n    [% END %]\n\n    [% IF device %]\n    // device tabs\n    [% FOREACH tab IN settings._device_tabs %]\n    $('[% \"#${tab.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% tab.tag | html_entity %]');\n      copy_navbar_to_sidebar('[% tab.tag | html_entity %]');\n      update_browser_history('[% tab.tag | html_entity %]', pgtitle, '');\n      update_csv_download_link('device', '[% tab.tag | html_entity %]', '[% tab.provides_csv | html_entity %]');\n\n      [% IF tab.tag == 'ports' %]\n      // form reset icon on ports tab\n      $('#nd_sidebar-reset-link').attr('href', uri_base + '/device?tab=[% tab.tag | html_entity %]&reset=on&firstsearch=on&' +\n        $('#ports_form')\n          .find('input[name=\"q\"],input[name=\"f\"],input[name=\"partial\"],input[name=\"invert\"]')\n          .serialize());\n\n      [% ELSIF tab.tag == 'netmap' %]\n      // form reset icon on netmap tab\n      $('#nd_sidebar-reset-link').attr('href', uri_base + '/device?tab=[% tab.tag | html_entity %]&reset=on&firstsearch=on&' +\n        $('#netmap_form').find('input[name=\"q\"]').serialize());\n      [% END %]\n\n      do_search(event, '[% tab.tag | html_entity %]');\n    });\n    [% END %]\n    [% END %]\n\n    [% IF report %]\n    // for the report pages\n    $('[% \"#${report.tag}_form\" %]').submit(function (event) {\n      var pgtitle = update_page_title('[% report.tag | html_entity %]');\n      update_browser_history('[% report.tag | html_entity %]', pgtitle, '1');\n      update_csv_download_link('report', '[% report.tag | html_entity %]', '1');\n      do_search(event, '[% report.tag | html_entity %]');\n    });\n    [% END -%]\n\n    [% IF task %]\n    // for the admin pages\n    $('[% \"#${task.tag}_form\" %]').submit(function (event) {\n      update_page_title('[% task.tag | html_entity %]');\n      update_csv_download_link('admin', '[% task.tag | html_entity %]', '1');\n      do_search(event, '[% task.tag | html_entity %]');\n    });\n    [% END %]\n\n    // on page load, load the content for the active tab\n    [% IF params.tab %]\n    [% IF params.tab == 'ipinventory' OR params.tab == 'subnets' %]\n      $('#[% params.tab | html_entity %]_submit').click();\n    [% ELSE %]\n      $('#[% params.tab | html_entity %]_form').trigger(\"submit\");\n    [% END %]\n    [% END %]\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'device';\n\n  // fields in the Device Search Options form (Device tab)\n  var form_inputs = $(\"#ports_form .clearfix input\").not('[type=\"checkbox\"]')\n      .add(\"#ports_form .clearfix select\");\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n\n    // LT wanted the page title to reflect what's on the page :)\n    document.title = $('#nd_device-name').text()\n      +' - '+ $('#'+ tab + '_link').text();\n\n    // used for contenteditable cells to find out whether the user has made\n    // changes, and only reset when they submit or cancel the change\n    var dirty = false;\n\n    // activate modals, tooltips and popovers\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n    $(\"[rel=popover]\").popover({live: true});\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% tab.tag | html_entity %]'\n    var target = '#' + tab + '_pane';\n    var portfilter = $('#ports_form').find(\"input[name=f]\");\n\n    // sidebar form fields should change colour and have trash/copy icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // sidebar collapser events trigger change of up/down arrow\n    $('.collapse').on('show', function() {\n      $(this).siblings().find('.nd_arrow-up-down-right')\n        .toggleClass('icon-chevron-up icon-chevron-down');\n    });\n\n    $('.collapse').on('hide', function() {\n      $(this).siblings().find('.nd_arrow-up-down-right')\n        .toggleClass('icon-chevron-up icon-chevron-down');\n    });\n\n    // if the user edits the filter box, revert to automagical search\n    $('#ports_form').on('input', \"input[name=f]\", function() {\n      $('#nd_ports-form-prefer-field').attr('value', '');\n    });\n\n    // handler for trashcan icon in port filter box\n    $('.nd_field-clear-icon').click(function() {\n      portfilter.val('');\n      $('#nd_ports-form-prefer-field').attr('value', '');\n      $('#ports_form').trigger('submit');\n      device_form_state(portfilter); // will hide copy icons\n    });\n\n    // allow port filter to have a preference for port/name/vlan\n    $('#ports_form').on('click', '.nd_device-port-submit-prefer', function() {\n      event.preventDefault();\n      $('#nd_ports-form-prefer-field').attr('value', $(this).data('prefer'));\n      $(this).parents('form').submit();\n    });\n\n    // clickable device port names can simply resubmit AJAX rather than\n    // fetch the whole page again.\n    $('#ports_pane').on('click', '.nd_this-port-only', function(event) {\n      event.preventDefault(); // link is real so prevent page submit\n\n      var port = $(this).text();\n      port = $.trim(port);\n      portfilter.val(port);\n      $('.nd_field-clear-icon').show();\n\n      // make sure we're preferring a port filter\n      $('#nd_ports-form-prefer-field').attr('value', 'port');\n\n      $('#ports_form').trigger('submit');\n      device_form_state(portfilter); // will hide copy icons\n    });\n\n    // VLANs column list collapser trigger\n    // it's a bit of a faff because we can't easily use Bootstrap's collapser\n    $('#ports_pane').on('click', '.nd_collapse-vlans', function() {\n        $(this).siblings('.nd_collapsing').toggle();\n        if ($(this).find('.nd_arrow-up-down-left').hasClass('icon-chevron-up')) {\n          $(this).html('<div class=\"nd_arrow-up-down-left icon-chevron-down icon-large\"></div>Hide VLANs');\n        }\n        else {\n          $(this).html('<div class=\"nd_arrow-up-down-left icon-chevron-up icon-large\"></div>Show VLANs');\n        }\n    });\n\n    // refresh tooltips when the datatables table is updated\n    $('#ports_pane').on('draw.dt', function() {\n        $(\"[rel=tooltip]\").tooltip({live: true});\n    });\n\n    // netmap show controls\n    $('#nd_showips').change(function() {\n      if ($(this).prop('checked')) {\n        graph.inspect().main.nodes.each(function(n) {\n          if (n['ORIG_LABEL'] != n['ID']) {\n            n['LABEL'] = n['ORIG_LABEL'] + ' ' + n['ID'];\n          }\n        });\n        graph.wrapLabels(true).start();\n      } else {\n        graph.inspect().main.nodes.each(function(n) {\n          n['LABEL'] = n['ORIG_LABEL'];\n        });\n        graph.wrapLabels(false).start();\n      }\n    });\n    $('#nd_showspeed').change(function() {\n      $('.nd_netmap-linklabel').css('fill',\n        ($(this).prop('checked') ? 'black' : 'none')\n      );\n    });\n\n    // netmap pin/release controls\n    $('#nd_netmap-releaseall').on('click', function(event) {\n      event.preventDefault();\n      graph.releaseFixedNodes().resume();\n    });\n    $('#nd_netmap-releaseonly').on('click', function(event) {\n      event.preventDefault();\n      graph.inspect().main.nodes\n        .filter(function(n) { return n.selected })\n        .each(function(n) { n.fixed = false });\n      graph.resume();\n    });\n    $('#nd_netmap-pinonly').on('click', function(event) {\n      event.preventDefault();\n      graph.inspect().main.nodes\n        .filter(function(n) { return n.selected })\n        .each(function(n) { n.fixed = true });\n    });\n    $('#nd_netmap-zoomtodevice').on('click', function(event) {\n      event.preventDefault();\n      var node = graph.nodeDataById( graph['nd2']['centernode'] );\n      graph.zoomSmooth(node.x, node.y, node.radius * 125);\n    });\n    $('#nd_netmap-save').on('click', function(event) {\n      event.preventDefault();\n      saveMapPositions();\n    });\n\n    // activity for admin tasks in device details\n    $('#details_pane').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // what purpose - discover/macsuck/arpnip\n      var mode = $(this).attr('name');\n      var tr = $(this).closest('tr');\n\n      // submit the query\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/admin/' + mode\n        ,data: tr.find('input[data-form=\"' + mode + '\"],textarea[data-form=\"' + mode + '\"]').serializeArray()\n        ,success: function() {\n          if (mode != 'delete') {\n            toastr.info('Requested '+ mode +' for device '+ tr.data('for-device'));\n          }\n          else {\n            toastr.success('Deleted device '+ tr.data('for-device'));\n          }\n        }\n        // skip any error reporting for now\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          toastr.error('Failed to '+ mode +' device '+ tr.data('for-device'));\n        }\n      });\n    });\n\n    // clear any values in the delete confirm dialog\n    $('#details_pane').on('hidden', '.nd_modal', function () {\n      $('#nd_devdel-log').val('');\n      $('#nd_devdel-archive').attr('checked', false);\n    });\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'report';\n\n  // colored input fields in the Report Options sidebar forms\n  var form_inputs = $(\".nd_colored-input\");\n\n  // this is called by do_search to support local code\n  // here, when tab changes need to strike/unstrike the navbar search\n  function inner_view_processing(tab) {\n\n    // activate modals, tooltips and popovers\n    $('.nd_modal').modal({show: false});\n    $(\"[rel=tooltip]\").tooltip({live: true});\n    $(\"[rel=popover]\").popover({live: true});\n  }\n\n  // on load, check initial Report Options form state,\n  // and on each change to the form fields\n  $(document).ready(function() {\n    var tab = '[% report.tag | html_entity %]'\n    var target = '#' + tab + '_pane';\n\n    // sidebar form fields should change colour and have trash icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // handler for bin icon in search forms\n    $('.nd_field-clear-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('[name=' + name + ']');\n      input.val('');\n      device_form_state(input); // reset input field\n    });\n\n    $('#nd_ipinventory-subnet').on('input', function(event) {\n      if ($(this).val().indexOf(':') != -1) {\n        $('#never').attr('disabled', 'disabled');\n      }\n      else {\n        $('#never').removeAttr('disabled');\n      }\n    });\n\n    // activate typeahead on prefix/subnet box\n    $('#nd_ipinventory-subnet').autocomplete({\n      source: function (request, response) {\n        return $.get( uri_base + '/ajax/data/subnet/typeahead', request, function (data) {\n          return response(data);\n        });\n      }\n      ,delay: 150\n      ,minLength: 3\n    });\n\n    // dynamically bind to all forms in the table\n    $('.content').on('click', '.nd_adminbutton', function(event) {\n      // stop form from submitting normally\n      event.preventDefault();\n\n      // what purpose - add/update/del\n      var mode = $(this).attr('name');\n\n      // submit the query and put results into the tab pane\n      $.ajax({\n        type: 'POST'\n        ,async: true\n        ,dataType: 'html'\n        ,url: uri_base + '/ajax/control/report/' + tab + '/' + mode\n        ,data: $(this).closest('tr').find('input[data-form=\"' + mode + '\"]').serializeArray()\n        ,beforeSend: function() {\n          $(target).html(\n            '<div class=\"span2 alert\">Request submitted...</div>'\n          );\n        }\n        ,success: function() {\n          $('#' + tab + '_form').trigger('submit');\n        }\n        // skip any error reporting for now\n        // TODO: fix sanity_ok in Netdisco Web\n        ,error: function() {\n          $('#' + tab + '_form').trigger('submit');\n        }\n      });\n    });\n  });\n", "  // used by the tabbing interface to make sure the correct\n  // ajax content is loaded\n  var path = 'search';\n\n  // fields in the Device Search Options form (Device tab)\n  var form_inputs = $(\"#device_form .clearfix input\").not('[type=\"checkbox\"]')\n      .add(\"#device_form .clearfix select\");\n\n  // this is called by do_search to support local code\n  // which might need to act on the newly inserted content\n  // but which cannot use jQuery delegation via .on()\n  function inner_view_processing(tab) {\n  }\n\n  // on load, establish global delegations for now and future\n  $(document).ready(function() {\n    var tab = '[% tab.tag | html_entity %]'\n    var target = '#' + tab + '_pane';\n\n    // sidebar form fields should change colour and have bin/copy icon\n    form_inputs.each(function() {device_form_state($(this))});\n    form_inputs.change(function() {device_form_state($(this))});\n\n    // handler for copy icon in search option\n    $('.nd_field-copy-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('#device_form [name=' + name + ']');\n      input.val( $('#nq').val() );\n      device_form_state(input); // will hide copy icons\n    });\n\n    // handler for bin icon in search option\n    $('.nd_field-clear-icon').click(function() {\n      var name = $(this).data('btn-for');\n      var input = $('#device_form [name=' + name + ']');\n      input.val('');\n      device_form_state(input); // will hide copy icons\n    });\n  });\n", "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n        \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n  <meta http-equiv=\"Content-type\" content=\"text/html; charset=[% settings.charset | html_entity %]\" />\n  <link rel=\"shortcut icon\" href=\"[% uri_base | none %]/images/favicon.ico\" type=\"image/x-icon\">\n  <link rel=\"icon\" href=\"[% uri_base | none %]/images/favicon.ico\" type=\"image/x-icon\">\n  <title>Netdisco</title>\n\n  <!-- HTML5 shim, for IE6-8 support of HTML elements -->\n  <!--[if lt IE 9]>\n    <script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\n  <![endif]-->\n\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery-latest.min.js\"></script>\n<!--  <script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-migrate-1.1.1.js\"></script> -->\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery-ui.custom.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery-history.js\"></script>\n<!--  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery.cookie.js\"></script> -->\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery-deserialize.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/bootstrap.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/bootstrap2-toggle.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/underscore.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery.qtip.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/d3-3.5.17.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/d3-force-network-chart.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/toastr.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery.floatThead.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/daterangepicker.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/moment.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/jquery.dataTables.min.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/dataTables.bootstrap.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/dataTables.ip-address-detect.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/dataTables.ip-address-sort.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/he.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/natural.js\"></script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/portsort.js\"></script>\n\n  <script type=\"text/javascript\">\n    var uri_base = '[% uri_base | none %]';\n    var nd_check_userlog = '[% settings.check_userlog | html_entity %]';\n  </script>\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/netdisco.js\"></script>\n\n  [% IF user_has_role('port_control') %]\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/javascripts/netdisco_portcontrol.js\"></script>\n  [% END %]\n\n  [% FOREACH add_js IN settings._additional_javascript %]\n  <script type=\"text/javascript\" src=\"[% uri_base | none %]/plugin/[% add_js | none %]/[% add_js | none %].js\"></script>\n  [% END %]\n\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/bootstrap.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/bootstrap2-toggle.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/awesome-bootstrap-checkbox.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/jquery.qtip.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/smoothness/jquery-ui.custom.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/font-awesome.min.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/toastr.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/d3-force-network-chart.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/netdisco.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/bootstrap-tree.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/daterangepicker-bs2.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/dataTables.bootstrap.css\"/>\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/css/nd_print.css\" media=\"print\"/>\n\n  [% FOREACH add_css IN settings._additional_css %]\n  <link rel=\"stylesheet\" href=\"[% uri_base | none %]/plugin/[% add_css | none %]/[% add_css | none %].css\"/>\n  [% END %]\n</head>\n\n<body>\n<div class=\"navbar navbar-inverse navbar-fixed-top\">\n  <div class=\"navbar-inner\">\n    <div class=\"container\">\n      <a class=\"brand\" href=\"[% uri_for('/') | none %]\">Netdisco</a>\n      [% IF session.logged_in_user %]\n      <ul class=\"nav\">\n        [% FOREACH ni IN settings._navbar_items %]\n        <li[% ' class=\"active\"' IF vars.nav == ni.tag %]>\n          <a href=\"[% uri_for(ni.path) | none %]\">[% ni.label | html_entity %]</a>\n        </li>\n        [% END %]\n        [% IF settings._reports.size %]\n        <li class=\"dropdown[% ' active' IF vars.nav == 'reports' %]\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Reports <b class=\"caret\"></b></a>\n          <ul class=\"dropdown-menu\">\n          [% FOREACH category IN settings._report_order %]\n            [% IF settings._reports_menu.$category.size %]\n            <li class=\"dropdown-submenu\">\n            <a href=\"#\">[% category | html_entity %]</a>\n              <ul class=\"dropdown-menu\">\n              [% FOREACH item IN settings._reports_menu.$category %]\n                [% NEXT IF settings._reports.$item.hidden %]\n                <li><a href=\"[% uri_for('/report/' _ item) %]?firstsearch=on\">[% settings._reports.$item.label | html_entity %]</a></li>\n              [% END %]\n              </ul>\n            </li>\n            [% END %]\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n        [% END %]\n        [% IF user_has_role('admin') %]\n        <li class=\"dropdown[% ' active' IF vars.nav == 'admin' %]\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Admin <b class=\"caret\"></b></a>\n          <ul class=\"dropdown-menu\">\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/discoverall') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Discover All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/arpwalk') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Arpnip All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/macwalk') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Macsuck All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/nbtwalk') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">NBTstat All</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/expire') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Run Expire Job</button>\n            </form>\n          </li>\n          <li>\n            <form method=\"post\" class=\"nd_inline-form\" action=\"[% uri_for('/admin/stats') | none %]\">\n              <button type=\"submit\" class=\"btn btn-link nd_btn-link\">Update Statistics</button>\n            </form>\n          </li>\n          [% IF settings._admin_tasks.size %]\n            <li class=\"divider\"></li>\n            [% FOREACH ai IN settings._admin_order %]\n              [% NEXT IF settings._admin_tasks.$ai.hidden %]\n              <li><a href=\"[% uri_for('/admin/' _ ai) %]\">[% settings._admin_tasks.$ai.label | html_entity %]</a></li>\n            [% END %]\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n        [% END %]\n      </ul>\n      <form class=\"navbar-search pull-left\" method=\"get\" action=\"[% uri_for('/search') | none %]\">\n        <input placeholder=\"Find Anything\" class=\"search-query span3\"\n          id=\"nq\" name=\"q\" value=\"[% display_name | html_entity %]\" type=\"text\" autocomplete=\"off\"/>\n        <input name=\"firstsearch\" type=\"hidden\" value=\"on\">\n        <div class=\"btn-group nd_navbar-search-group\">\n          <button class=\"btn btn-inverse nd_navbar-search-icon\">\n            <span style=\"font-size: 18px;\">\n              <i id=\"navsearchgo\" class=\"icon-search\"></i>\n            </span>\n          </button>\n          <button class=\"btn btn-inverse dropdown-toggle nd_navbar-search-caret\" data-toggle=\"dropdown\">\n            <span class=\"caret\" style=\"border-top-color: #999; border-bottom-color: #999\"></span>\n          </button>\n          <ul class=\"dropdown-menu\">\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"device\">Search Devices</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"node\">Search Nodes</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"vlan\">Search VLANs</a></li>\n            <li><a class=\"nd_navsearchgo-specific\" href=\"\" data-tab=\"port\">Search Ports</a></li>\n          </ul>\n        </div>\n      </form>\n      <ul class=\"nav pull-right\">\n        <li class=\"nd_navbar-text\">Logged in as&nbsp;</li>\n        <li class=\"dropdown\">\n          <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n          [% IF user_has_role('admin') %]\n            <i class=\"icon-user text-error\"></i>\n          [% ELSIF user_has_role('port_control') %]\n            <i class=\"icon-user text-warning\"></i>\n          [% ELSE %]\n            <i class=\"icon-user\"></i>\n          [% END %]&nbsp;\n            [% session.logged_in_fullname || session.logged_in_user | html_entity %] <b class=\"caret\"></b>\n          </a>\n          <ul class=\"dropdown-menu\">\n          [% IF NOT ( user_has_role('ldap') OR user_has_role('radius') ) %]\n            <li><a href=\"[% uri_for('/password') | none %]\">Change Password</a></li>\n          [% END %]\n          [% IF NOT settings.no_auth %]\n            <li><a href=\"[% uri_for('/logout') | none %]\">Log Out</a></li>\n          [% END %]\n          </ul>\n        </li> <!-- /dropdown -->\n      </ul>\n      [% END %]\n    </div>\n  </div>\n</div>\n\n[% content | none %]\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/common.js' -%]\n</script>\n\n</body>\n</html>\n", "<div class=\"container\">\n  <div class=\"row nd_hero-row\">\n    <div class=\"span8 offset2\">\n      [% IF vars.passchange_ok %]\n      <div class=\"alert alert-success fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Password successfully updated.\n      </div>\n      [% END %]\n      [% IF vars.passchange_failed %]\n      <div class=\"alert alert-error fade in\">\n        <a class=\"close\" data-dismiss=\"alert\">\u00d7</a>\n        Incorrect current password, or new passwords did not match. Please try again.\n      </div>\n      [% END %]\n      <div class=\"hero-unit\">\n        <h2>Change Password</h2>\n        <form class=\"nd_login-form\" method=\"post\" action=\"[% uri_for('/password') | none %]\">\n          <div class=\"form-horizontal\">\n            <input placeholder=\"Current Password\" class=\"span2\" name=\"old\" type=\"password\" required=\"required\"/><br/>\n            <input placeholder=\"New Password\" class=\"span2\" name=\"new\" type=\"password\" required=\"required\"/>\n            <input placeholder=\"Confirm New Password\" class=\"span2\" name=\"confirm\" type=\"password\" required=\"required\"/>\n            <button type=\"submit\" class=\"btn btn-info\">Save</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div> <!-- /container -->\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar nd_sidebar-pinned\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin nd_sidebar-pin-clicked\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Unpin Sidebar\" data-container=\"body\"></i>\n\n      <div class=\"tab-content\">\n        <div id=\"[% report.tag | html_entity %]_search\" class=\"tab-pane active\">\n          <form id=\"[% report.tag | html_entity %]_form\" class=\"nd_sidebar-form form-stacked\"\n              method=\"get\" action=\"[% uri_for('/report') | none %]\">\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% report.tag | html_entity %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/report/${report.tag}.tt\" %]\n            [% CATCH %]\n            <script type=\"text/javascript\">has_sidebar[\"[% report.tag | html_entity %]\"] = 0;</script>\n            [% INCLUDE \"sidebar/report/generic_report.tt\" %]\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      <li class=\"active\"><a id=\"[% report.tag | html_entity %]_link\" class=\"nd_single-tab\"\n        href=\"#[% report.tag | html_entity %]_pane\">[% report.label | html_entity %]</a></li>\n      [% IF report.tag == 'portlog' %]\n      <span id=\"nd_device-name\">\n        <a href=\"[% device_ports | none %]&q=[% params.q | uri %]\">[% params.q | html_entity %]</a>\n        -\n        <a href=\"[% device_ports | none %]&q=[% params.q | uri %]&f=[% params.f | uri %]\">[% params.f | html_entity %]</a>\n      </span>\n      [% ELSIF report.provides_csv %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n      [% END %]\n    </ul>\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"[% report.tag | html_entity %]_pane\"></div>\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/report.js' -%]\n</script>\n", "<i class=\"nd_sidebar-toggle icon-wrench icon-large\" id=\"nd_sidebar-toggle-img-out\"\n  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Show Sidebar\"></i>\n<div class=\"container-fluid\">\n  <div class=\"nd_sidebar\">\n    <div class=\"well\">\n      <i class=\"nd_sidebar-toggle icon-signout\" id=\"nd_sidebar-toggle-img-in\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Hide Sidebar\" data-container=\"body\"></i>\n      <i class=\"nd_sidebar-pin icon-pushpin\"\n        rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Pin Sidebar\" data-container=\"body\"></i>\n      <div class=\"tab-content\">\n        [% FOREACH tab IN settings._search_tabs %]\n        <div id=\"[% tab.tag | html_entity %]_search\" class=\"tab-pane [% 'active' IF params.tab == tab.tag %]\">\n          <form id=\"[% tab.tag | html_entity %]_form\" class=\"nd_sidebar-form form-stacked\" method=\"get\" action=\"[% uri_for('/search') | none %]\">\n            <input name=\"tab\" value=\"[% tab.tag | html_entity %]\" type=\"hidden\"/>\n            [% TRY %]\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag | html_entity %]\"] = 1;</script>\n            [% INCLUDE \"sidebar/search/${tab.tag}.tt\" %]\n            [% CATCH %]\n            <!-- no \"[% tab.tag | html_entity %]\" search options -->\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <script type=\"text/javascript\">has_sidebar[\"[% tab.tag | html_entity %]\"] = 0;</script>\n            [% END %]\n          </form>\n        </div> <!-- /tab-pane -->\n        [% END %]\n      </div> <!-- /tab-content -->\n    </div>\n  </div>\n\n  <div class=\"content\">\n    <ul id=\"nd_search-results\" class=\"nav nav-tabs\">\n      [% FOREACH tab IN settings._search_tabs %]\n      <li[% ' class=\"active\"' IF params.tab == tab.tag %]><a id=\"[% tab.tag | html_entity %]_link\" href=\"#[% tab.tag | html_entity %]_pane\">[% tab.label | html_entity %]</a></li>\n      [% END %]\n      <span id=\"nd_device-name\">\n        <a id=\"nd_csv-download\" href=\"#\" download=\"netdisco.csv\">\n          <i id=\"nd_csv-download-icon\" class=\"text-info icon-file-text-alt icon-large\"\n            rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Download as CSV\"></i></a>\n      </span>\n    </ul>\n    <div class=\"tab-content\">\n      [% FOREACH tab IN settings._search_tabs %]\n      <div class=\"tab-pane[% ' active' IF params.tab == tab.tag %]\" id=\"[% tab.tag | html_entity %]_pane\"></div>\n      [% END %]\n  </div>\n</div>\n\n<script type=\"text/javascript\">\n[%+ INCLUDE 'js/search.js' -%]\n</script>\n", "\n            <span class=\"nd_sidebar-title\"><em>Neighbor Map Controls</em></span>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix nd_netmap-sidebar\">\n              <ul class=\"muted nd_netmap-sidebar-help\">\n                <li>Tip: shift-drag to lasso</li>\n                <li><a href=\"https://github.com/netdisco/netdisco/wiki/Network-Map\" target=\"_blank\">User Guide\n                  <i class=\"icon-external-link\"></i></a></li>\n              </ul>\n            </div>\n\n            <div class=\"clearfix control-group nd_netmap-sidebar\">\n              <div class=\"checkbox pull-left\">\n                <label>\n                  <input type=\"checkbox\" name=\"showips\" id=\"nd_showips\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.showips %]\n                    data-toggle=\"toggle\" data-size=\"small\" data-width=\"30\"\n                    data-on=\"Show\" data-off=\" \" data-onstyle=\"success\">\n                  <span onclick=\"$('#nd_showips').bootstrapToggle('toggle')\">&nbsp;Management IP</span>\n                </label>\n              </div>\n              <div class=\"checkbox pull-left\">\n                <label>\n                  <input type=\"checkbox\" name=\"showspeed\" id=\"nd_showspeed\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.showspeed %]\n                    data-toggle=\"toggle\" data-size=\"small\" data-width=\"30\"\n                    data-on=\"Show\" data-off=\" \" data-onstyle=\"success\">\n                  <span onclick=\"$('#nd_showspeed').bootstrapToggle('toggle')\">&nbsp;Link Speed</span>\n                </label>\n              </div>\n            </div>\n\n            <label><span id=\"\">Positions: </span>\n                  <button id=\"nd_netmap-save\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                  <i class=\"icon-save icon-large pull-left nd_navbar-icon\"></i> Save</button>\n            </label>\n\n            <table margin=\"0\" border=\"0\" class=\"nd_netmap-pin-controls\">\n            <tr>\n              <td class=\"nd_netmap-pin-controls-top-row\">\n                <button id=\"nd_netmap-releaseonly\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-unlock icon-large pull-left nd_navbar-icon\"></i> Lasso</button>\n              </td>\n              <td class=\"nd_netmap-pin-controls-top-row\">\n                <button id=\"nd_netmap-pinonly\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-lock icon-large pull-left nd_navbar-icon\"></i> Lasso</button>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <button id=\"nd_netmap-releaseall\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-unlock icon-large pull-left nd_navbar-icon\"></i> All</button>\n              </td>\n              <td>\n                <button id=\"nd_netmap-zoomtodevice\" class=\"nd_sidebar-btn-netmap btn btn-small btn-info\">\n                    <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Device</button>\n              </td>\n            </tr>\n            </table>\n\n            <hr class=\"nd_sidebar-hr\"/>\n\n            <div class=\"radio radio-success\">\n                <input type=\"radio\" name=\"mapshow\" id=\"nd_mapshow-all\"\n                [% 'checked' IF vars.sidebar_defaults.device_netmap.mapshow == 'all' %] value=\"all\">\n                <label for=\"nd_mapshow-all\">All Devices</label>\n            </div>\n            <div class=\"radio radio-success\">\n                <input type=\"radio\" name=\"mapshow\" id=\"nd_mapshow-neighbors\"\n                [% 'checked' IF vars.sidebar_defaults.device_netmap.mapshow == 'neighbors' %] value=\"neighbors\">\n                <label for=\"nd_mapshow-neighbors\">Only Neighbors</label>\n            </div>\n\n            <label><span id=\"nd_vlan-label-text\">Carrying VLAN: </span>\n              <input name=\"vlan\" id=\"nd_vlan-entry\" class=\"input-mini\" type=\"number\" placeholder=\"ID\"\n                value=\"[% params.vlan | html_entity %]\" type=\"text\"/>\n            </label>\n\n            [% IF hgroup_list.size %]\n            <select class=\"nd_side-select\" size=\"[% hgroup_list.size > 4 ? 4 : hgroup_list.size %]\"\n              multiple name=\"hgroup\" id=\"nd_hgroup-select\"\n              rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Host Groups\">\n              [% FOREACH opt IN hgroup_list.pairs %]\n              <option[% ' selected=\"selected\"' IF hgroup_lkp.exists(opt.key) %]\n                value=\"[% opt.key | html_entity %]\">[% opt.value | html_entity %]</option>\n              [% END %]\n            </select>\n            [% END %]\n            [% IF lgroup_list.size %]\n            <select class=\"nd_side-select\" size=\"[% lgroup_list.size > 4 ? 4 : lgroup_list.size %]\"\n              multiple name=\"lgroup\" id=\"nd_lgroup-select\"\n              rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Device Locations\">\n              [% FOREACH loc IN lgroup_list %]\n              <option[% ' selected=\"selected\"' IF lgroup_lkp.exists(loc) %]\n                value=\"[% loc | html_entity %]\">[% loc | html_entity %]</option>\n              [% END %]\n            </select>\n            [% END %]\n\n            <div class=\"clearfix nd_netmap-sidebar\">\n\n              [% IF hgroup_list.size OR lgroup_list.size %]\n              <div class=\"clearfix input-prepend\">\n              <label><span id=\"nd_colorby-label-text\">Color by: </span>\n                <select id=\"nd_colorby\" name=\"colorby\">\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'off' %]\n                    value=\"off\">Off</option>\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'speed' %]\n                    value=\"speed\">Throughput</option>\n                  [% IF hgroup_list.size %]\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'hgroup' %]\n                    value=\"hgroup\">Host Group</option>\n                  [% END %]\n                  [% IF lgroup_list.size %]\n                  <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_netmap.colorby == 'lgroup' %]\n                    value=\"lgroup\">Location</option>\n                  [% END %]\n                </select>\n              </label>\n              </div>\n              [% END %]\n\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"dynamicsize\" name=\"dynamicsize\"\n                    [% ' checked=\"checked\"' IF vars.sidebar_defaults.device_netmap.dynamicsize %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"dynamicsize\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Dynamic Size</span>\n                </label>\n              </div>\n\n            </div>\n\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n                <i class=\"icon-pencil icon-large pull-left nd_navbar-icon\"></i>\n            Redraw Map</button>\n", "\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <input id=\"nd_ports-form-prefer-field\" name=\"prefer\" value=\"[% params.prefer | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <i class=\"nd_field-clear-icon icon-trash icon-large\"\n                 rel=\"tooltip\" data-placement=\"bottom\" data-offset=\"3\" data-title=\"Show all Ports\"\n                 id=\"f_clear_btn\" data-btn-for=\"port\"></i>\n              <input id=\"nd_port-query\" placeholder=\"Port, Name or VLAN\"\n                name=\"f\" value=\"[% params.f | html_entity %]\" type=\"text\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Filter by Port, Name or VLAN\"/>\n              <div class=\"clearfix input-prepend nd_port-partial\">\n                <label class=\"add-on nd_port-partial-label\">\n                  <input type=\"checkbox\" id=\"partial\"\n                    name=\"partial\"[% ' checked=\"checked\"' IF params.partial %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"partial\">\n                  <span class=\"nd_port-partial-checkbox uneditable-input\">Partial Match</span>\n                </label>\n                <label class=\"add-on nd_port-invert-label\">\n                  <input type=\"checkbox\" id=\"invert\"\n                    name=\"invert\"[% ' checked=\"checked\"' IF params.invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"invert\">\n                  <span class=\"nd_port-invert-checkbox uneditable-input\">Not</span>\n                </label>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_legend\">\n                <label class=\"nd_collapser\">Legend\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_legend\" class=\"collapse\">\n                <ul class=\"icons-ul\"><!-- nd_inputs-list unstyled\"> -->\n                  <li><i class=\"icon-li icon-angle-up text-success\"></i>&nbsp; Link Up</li>\n                  <li><i class=\"icon-li icon-arrow-down text-error\"></i>&nbsp; Link Down</li>\n                  <li><i class=\"icon-li icon-circle-arrow-down text-success\"></i>&nbsp; Port Free</li>\n                  <li><i class=\"icon-li icon-remove\"></i>&nbsp; Admin Disabled</li>\n                  <li><i class=\"icon-li icon-exclamation-sign text-error\"></i>&nbsp; Error Disabled</li>\n                  <li><i class=\"icon-li icon-ban-circle text-info\"></i>&nbsp; Blocking</li>\n                  <li><i class=\"icon-li icon-off\"></i>&nbsp; PoE Disabled</li>\n                  <li><i class=\"icon-li icon-off nd_power-on\"></i>&nbsp; PoE Enabled</li>\n                  <li><i class=\"icon-li icon-link text-warning\"></i>&nbsp; Manual Topology</li>\n                  <li><i class=\"icon-li icon-link\"></i>&nbsp; Neighbor Device</li>\n                  <li><i class=\"icon-li icon-unlink text-error\"></i>&nbsp; Neighbor Inacessible</li>\n                  <li><i class=\"icon-li icon-phone\"></i>&nbsp; IP Phone</li>\n                  <li><i class=\"icon-li icon-signal\"></i>&nbsp; Wireless Client</li>\n                  <li><i class=\"icon-li icon-rss\"></i>&nbsp; Wireless Access Point</li>\n                  <li><i class=\"icon-li icon-book\"></i>&nbsp; Archived Data</li>\n                  <li><i class=\"icon-li icon-group\"></i>&nbsp; Link Aggregate</li>\n                  [% IF user_has_role('port_control') %]\n                  <li><i class=\"icon-li icon-refresh icon-spin\"></i>&nbsp; Click \"Update View\"</li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_columns\">\n                <label class=\"nd_collapser\">Display Columns\n                <i class=\"nd_arrow-up-down-right icon-chevron-down icon-large\"></i>\n                </label></span>\n              <div id=\"nd_columns\" class=\"collapse in\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  [% FOREACH item IN settings.port_columns %]\n                  [% NEXT IF item.name == 'c_admin' AND NOT user_has_role('port_control') %]\n                  <li>\n                    <label class=\"checkbox\">\n                      <input type=\"checkbox\" id=\"[% item.name | html_entity %]\"\n                        name=\"[% item.name | html_entity %]\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.device_ports.${item.name} %] />\n                      [% IF item.name == 'c_admin' %]\n                        <span class=\"label label-info\">[% item.label | html_entity %]</span>\n                      [% ELSE %]\n                        [% item.label | html_entity %]\n                      [% END %]\n                    </label>\n                  </li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_nodeprops\">\n                <label class=\"nd_collapser\">Node Properties\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_nodeprops\" class=\"collapse\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  <li>\n                    <em class=\"muted\">MAC address format:</em><br/>\n                    <select id=\"nd_mac-format\" name=\"mac_format\">\n                      [% FOREACH format IN [ 'IEEE', 'Cisco', 'Microsoft', 'Sun' ] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.mac_format == format %]>[% format | html_entity %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                  [% FOREACH item IN settings.connected_properties %]\n                  <li>\n                    <label class=\"checkbox\">\n                      <input type=\"checkbox\" id=\"[% item.name | html_entity %]\"\n                        name=\"[% item.name | html_entity %]\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.device_ports.${item.name} %] />\n                      [% item.label | html_entity %]\n                    </label>\n                  </li>\n                  [% END %]\n                </ul>\n              </div>\n            </div>\n            <div class=\"clearfix\">\n              <span data-toggle=\"collapse\" data-target=\"#nd_portprops\">\n                <label class=\"nd_collapser\">Port Properties\n                <i class=\"nd_arrow-up-down-right icon-chevron-up icon-large\"></i>\n                </label></span>\n              <div id=\"nd_portprops\" class=\"collapse\">\n                <ul class=\"nd_inputs-list unstyled\">\n                  <li>\n                    <em class=\"muted\">Mark as Free if Down for:</em><br/>\n                    <select id=\"nd_days-select\" name=\"age_num\">\n                      [% FOREACH count IN [1..31] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.age_num == count %]>[% count | html_entity %]</option>\n                      [% END %]\n                    </select>\n                    <select id=\"nd_age-select\" name=\"age_unit\">\n                      [% FOREACH unit IN [ 'days', 'weeks', 'months', 'years' ] %]\n                      <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.device_ports.age_unit == unit %]>[% unit | html_entity %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                  <li>\n                    <em class=\"muted\">Show Ports with Status:</em><br/>\n                    <div class=\"clearfix\">\n                      <select id=\"nd_port-state-select\" size=\"4\" multiple name=\"port_state\">\n                        <option selected=\"selected\" value=\"up\">Link Up</option>\n                        <option selected=\"selected\" value=\"free\">Port Free</option>\n                        <option selected=\"selected\" value=\"down\">Link Down</option>\n                        <option selected=\"selected\" value=\"shut\">Admin Disabled</option>\n                      </select>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"btn-group\">\n              <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info nd_sidebar-btn-drop\">\n                <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Update View</button>\n              <button class=\"btn btn-info dropdown-toggle nd_sidebar-btn-drop-drop\" data-toggle=\"dropdown\">\n                <span class=\"caret\"></span>\n              </button>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"\">Default Search</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"port\">Filter by Port</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"name\">Filter by Name</a></li>\n                <li><a class=\"nd_device-port-submit-prefer\" href=\"\" data-prefer=\"vlan\">Filter by VLAN</a></li>\n              </ul>\n            </div>\n\n", "\n            <div class=\"clearfix\">\n              <input id=\"nd_ipinventory-subnet\" class=\"nd_sidebar-topinput nd_colored-input\"\n                placeholder=\"CIDR Prefix/Subnet\" required=\"required\"\n                name=\"subnet\" value=\"[% params.subnet | html_entity %]\" type=\"text\" autocomplete=\"off\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Prefix/Subnet in CIDR Format\"/>\n            </div>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Date Range</strong></em></label>\n              </legend>\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF params.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              <div class=\"clearfix\">\n                <input class=\"nd_side-input\" id=\"daterange\" required=\"required\"\n                  type=\"text\" name=\"daterange\" value=\"[%\n                    (params.exists('daterange') ? params.daterange : to_daterange()) | html_entity %]\"/>\n              </div>\n            </fieldset>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n              <div class=\"clearfix\">\n                <ul class=\"unstyled\">\n                  <li>\n                    <em class=\"muted\">Oldest records limit:</em><br/>\n                    <select id=\"nd_mac-format\" class=\"nd_side-select\" name=\"limit\">\n                      [% FOREACH size IN [ '32', '64', '128', '256', '512', '1024', '2048', '4096', '8192' ] %]\n                      <option[% ' selected=\"selected\"' IF (params.limit == size OR (NOT params.limit AND size == 2048)) %]>\n                        [% size | html_entity %]</option>\n                      [% END %]\n                    </select>\n                  </li>\n                </ul>\n                <div class=\"clearfix input-prepend\"\n                    rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Applies to IPv4 Only\">\n                  <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"never\"\n                    name=\"never\"[% ' checked=\"checked\"' IF (params.never OR vars.sidebar_defaults.report_ipinventory.never) %]/>\n                  </label>\n                  <label class=\"nd_checkboxlabel\" for=\"never\">\n                    <span class=\"nd_searchcheckbox uneditable-input\">List IP's Never Seen</span>\n                  </label>\n                </div>\n              </div>\n            </fieldset>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search IPs</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Module Search</em></p>\n            <div class=\"clearfix\">\n              <i id=\"device_clear_btn\" data-btn-for=\"device\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Device\"\n                type=\"text\" name=\"device\" value=\"[% params.dns | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Device IP, DNS, Description, Name, Location, Serial, or Contact\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"description_clear_btn\" data-btn-for=\"description\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Description\"\n                type=\"text\" name=\"description\" value=\"[% params.description | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Description\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"name_clear_btn\" data-btn-for=\"name\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Name\"\n                type=\"text\" name=\"name\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Name\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"type_clear_btn\" data-btn-for=\"type\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Type\"\n                type=\"text\" name=\"type\" value=\"[% params.type | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Type\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"model_clear_btn\" data-btn-for=\"model\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Model\"\n                type=\"text\" name=\"model\" value=\"[% params.model | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Model\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i id=\"serial_clear_btn\" data-btn-for=\"serial\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input nd_colored-input\" placeholder=\"Module Serial\"\n                type=\"text\" name=\"serial\" value=\"[% params.serial | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Serial\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% class_list.size > 5 ? 5 : class_list.size %]\"\n                multiple name=\"class\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Module Class\">\n                [% FOREACH opt IN class_list %]\n                <option[% ' selected=\"selected\"' IF class_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"fruonly\"\n                  name=\"fruonly\"[% ' checked=\"checked\"' IF (params.fruonly OR vars.sidebar_defaults.report_moduleinventory.fruonly) %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"fruonly\">\n                <span class=\"nd_searchcheckbox uneditable-input\">FRU Only</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF (params.matchall OR vars.sidebar_defaults.report_moduleinventory.matchall) %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            </fieldset>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Modules</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>NetBIOS Domain</em></p>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% domain_list.size > 8 ? 8 : domain_list.size %]\"\n                multiple name=\"domain\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Domain\">\n                [% FOREACH opt IN domain_list %]\n                  [% UNLESS opt == '' %]\n                    <option[% ' selected=\"selected\"' IF domain_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                  [% ELSE %]\n                    <option value=\"blank\"[% ' selected=\"selected\"' IF domain_lkp.exists('blank') %]>[% '(Blank Domain)' | html_entity %]</option>     \n                  [% END %]\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search NetBIOS</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <input class=\"nd_side-input\" placeholder=\"Remote ID (host name)\"\n                type=\"text\" name=\"remote_id\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote ID\"/>\n            </div>\n            <div class=\"clearfix\">\n              <input class=\"nd_side-input\" placeholder=\"Remote Type (platform)\"\n                type=\"text\" name=\"remote_type\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote Type\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% type_list.size > 8 ? 8 : type_list.size %]\"\n                multiple name=\"remote_type\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Remote Type\">\n                [% FOREACH opt IN type_list %]\n                    <option[% ' selected=\"selected\"' IF type_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"phones\"\n                  name=\"phones\"[% ' checked=\"checked\"' IF params.phones %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"phones\">\n                <span class=\"nd_searchcheckbox uneditable-input\"><i class=\"icon-li icon-phone\"></i>&nbsp; IP Phones</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"aps\"\n                  name=\"aps\"[% ' checked=\"checked\"' IF params.aps %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"aps\">\n                <span class=\"nd_searchcheckbox uneditable-input\"><i class=\"icon-li icon-signal\"></i>&nbsp; Wireless APs</span>\n              </label>\n            </div>\n            <div class=\"clearfix\"><p></p></div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF params.matchall %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Nodes</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Vendor Search</em></p>\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Vendor</strong></em></label>\n              </legend>\n              <div class=\"clearfix\">\n                <select class=\"nd_side-select nd_colored-input\" size=\"[% vendor_list.size > 8 ? 8 : vendor_list.size %]\"\n                  multiple name=\"vendor\"\n                  rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Vendor\">\n                  [% FOREACH opt IN vendor_list %]\n                    [% UNLESS opt == '' %]\n                      <option[% ' selected=\"selected\"' IF vendor_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                    [% ELSE %]\n                      <option value=\"blank\"[% ' selected=\"selected\"' IF vendor_lkp.exists('blank') %]>[% '(Unknown Vendor)' | html_entity %]</option>     \n                    [% END %]\n                  [% END %]\n                </select>\n              </div>\n            </fieldset>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Options</strong></em></label>\n              </legend>\n                <div class=\"clearfix input-prepend\"\n                    rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Include Archived Data\">\n                  <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"archived\"\n                    name=\"archived\"[% ' checked=\"checked\"' IF params.archived %]/>\n                  </label>\n                  <label class=\"nd_checkboxlabel\" for=\"archived\">\n                    <span class=\"nd_searchcheckbox uneditable-input\">Archived Data</span>\n                  </label>\n                </div>\n            </fieldset>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Vendors</button>\n\n", "\n            <div class=\"clearfix nd_netmap-sidebar\">\n              <em class=\"muted nd_sidebar-label\">Filter by VLAN:</em><br/>\n              <input id=\"nd_port-query\" placeholder=\"\" type=\"number\"\n                name=\"vlan\" value=\"[% params.vlan | html_entity %]\" type=\"text\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"VLAN\"/>\n            </div>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n                <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Ports</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Details by SSID</em></p>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select nd_colored-input\" size=\"[% ssid_list.size > 8 ? 8 : ssid_list.size %]\"\n                multiple name=\"ssid\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"SSID\">\n                [% FOREACH opt IN ssid_list %]\n                    <option[% ' selected=\"selected\"' IF ssid_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search SSID</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Port Utilization</em></p>\n            <div class=\"clearfix\">\n              <em class=\"muted\">Mark as Free if Down for:</em><br/>\n              <select id=\"nd_days-select\" name=\"age_num\">\n                [% FOREACH count IN [1..31] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.report_portutilization.age_num == count %]>[% count | html_entity %]</option>\n                [% END %]\n              </select>\n              <select id=\"nd_age-select\" name=\"age_unit\">\n                [% FOREACH unit IN [ 'days', 'weeks', 'months', 'years' ] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.report_portutilization.age_unit == unit %]>[% unit | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Run Report</button>\n\n", "\n            <div class=\"clearfix\">\n              <input id=\"nd_ipinventory-subnet\" class=\"nd_sidebar-topinput nd_colored-input\"\n                placeholder=\"CIDR Prefix/Subnet\" required=\"required\"\n                name=\"subnet\" value=\"[% params.subnet | html_entity %]\" type=\"text\" autocomplete=\"off\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Prefix/Subnet in CIDR Format\"/>\n            </div>\n\n            <fieldset>\n              <legend class=\"nd_sidebar-legend\">\n                <label><em><strong>Date Range</strong></em></label>\n              </legend>\n              <!--\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF params.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              -->\n              <div class=\"clearfix\">\n                <input class=\"nd_side-input\" id=\"daterange\" required=\"required\"\n                  type=\"text\" name=\"daterange\" value=\"[%\n                    (params.exists('daterange') ? params.daterange : to_daterange()) | html_entity %]\"/>\n              </div>\n            </fieldset>\n\n            <button id=\"[% report.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n             <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Subnets</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Device Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"dns\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"dns_clear_btn\" data-btn-for=\"dns\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"DNS\"\n                type=\"text\" name=\"dns\" value=\"[% params.dns | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"DNS\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"ip\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"ip_clear_btn\" data-btn-for=\"ip\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"IP Address\"\n                type=\"text\" name=\"ip\" value=\"[% params.ip | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"IP Address\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"name\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"name_clear_btn\" data-btn-for=\"name\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"System Name\"\n                type=\"text\" name=\"name\" value=\"[% params.name | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"System Name\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"location\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"location_clear_btn\" data-btn-for=\"location\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"Location\"\n                type=\"text\" name=\"location\" value=\"[% params.location | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Location\"/>\n            </div>\n            <div class=\"clearfix\">\n              <i data-btn-for=\"description\" class=\"nd_field-copy-icon icon-copy icon-large\"></i>\n              <i id=\"description_clear_btn\" data-btn-for=\"description\"\n                class=\"nd_field-clear-icon icon-trash icon-large\"></i>\n              <input class=\"nd_side-input\" placeholder=\"Description\"\n                type=\"text\" name=\"description\" value=\"[% params.description | html_entity %]\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Description\"/>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% model_list.size > 5 ? 5 : model_list.size %]\"\n                multiple name=\"model\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Model\">\n                [% FOREACH opt IN model_list %]\n                <option[% ' selected=\"selected\"' IF model_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% os_list.size > 5 ? 5 : os_list.size %]\"\n                multiple name=\"os\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Operating System\">\n                [% FOREACH opt IN os_list %]\n                <option[% ' selected=\"selected\"' IF os_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% os_ver_list.size > 5 ? 5 : os_ver_list.size %]\"\n                multiple name=\"os_ver\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"OS Release\">\n                [% FOREACH opt IN os_ver_list %]\n                <option[% ' selected=\"selected\"' IF os_ver_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"[% vendor_list.size > 5 ? 5 : vendor_list.size %]\"\n                multiple name=\"vendor\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Vendor\">\n                [% FOREACH opt IN vendor_list %]\n                <option[% ' selected=\"selected\"' IF vendor_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix\">\n              <select class=\"nd_side-select\" size=\"3\"\n                multiple name=\"layers\"\n                rel=\"tooltip\" data-placement=\"left\" data-offset=\"5\" data-title=\"Layer\">\n                [% FOREACH opt IN [ 1 .. 7 ] %]\n                <option[% ' selected=\"selected\"' IF layers_lkp.exists(opt) %]>[% opt | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"matchall\"\n                  name=\"matchall\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_device.matchall %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"matchall\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Match All Options</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Devices</button>\n", "\n            <p class=\"nd_sidebar-title\"><em>Node Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"stamps\"\n                  name=\"stamps\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.stamps %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"stamps\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Time Stamps</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"deviceports\"\n                  name=\"deviceports\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.deviceports %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"deviceports\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Device Ports</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"show_vendor\"\n                  name=\"show_vendor\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.show_vendor %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"show_vendor\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Vendor</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"archived\"\n                  name=\"archived\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.archived %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"archived\">\n                <span class=\"nd_searchcheckbox uneditable-input\">\n                  Archived Data &nbsp;<i class=\"icon-book text-warning\"></i></span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on nd_sidebar-legend\">\n                <input type=\"checkbox\" id=\"node_partial\"\n                  name=\"partial\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.partial %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"node_partial\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Partial Match</span>\n              </label>\n            </div>\n            <div class=\"clearfix\">\n              <em class=\"muted\">Date Range:</em><br/>\n              <div class=\"clearfix input-prepend\">\n                <label class=\"add-on\">\n                  <input type=\"checkbox\" id=\"age_invert\"\n                    name=\"age_invert\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_node.age_invert %]/>\n                </label>\n                <label class=\"nd_checkboxlabel\" for=\"age_invert\">\n                  <span class=\"nd_searchcheckbox uneditable-input\">Not within...</span>\n                </label>\n              </div>\n              <input class=\"nd_side-input\" id=\"daterange\"\n                type=\"text\" name=\"daterange\" value=\"[% vars.sidebar_defaults.search_node.daterange | html_entity %]\"/>\n            </div>\n            <div class=\"clearfix\">\n              <em class=\"muted\">MAC address format:</em><br/>\n              <select id=\"nd_node-mac-format\" name=\"mac_format\">\n                [% FOREACH format IN [ 'IEEE', 'Cisco', 'Microsoft', 'Sun' ] %]\n                <option[% ' selected=\"selected\"' IF vars.sidebar_defaults.search_node.mac_format == format %]>[% format | html_entity %]</option>\n                [% END %]\n              </select>\n            </div>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Nodes</button>\n\n", "\n            <p class=\"nd_sidebar-title\"><em>Port Search Options</em></p>\n            <input name=\"q\" value=\"[% params.q | html_entity %]\" type=\"hidden\"/>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_partial\"\n                  name=\"partial\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.partial %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_partial\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Partial Match</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_uplink\"\n                  name=\"uplink\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.uplink %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_uplink\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Uplinks</span>\n              </label>\n            </div>\n            <div class=\"clearfix input-prepend\">\n              <label class=\"add-on\">\n                <input type=\"checkbox\" id=\"port_ethernet\"\n                  name=\"ethernet\"[% ' checked=\"checked\"' IF vars.sidebar_defaults.search_port.ethernet %]/>\n              </label>\n              <label class=\"nd_checkboxlabel\" for=\"port_ethernet\">\n                <span class=\"nd_searchcheckbox uneditable-input\">Ethernet Only</span>\n              </label>\n            </div>\n            <button id=\"[% tab.tag | html_entity %]_submit\" type=\"submit\" class=\"btn btn-info\">\n              <i class=\"icon-search icon-large pull-left nd_navbar-icon\"></i> Search Ports</button>\n"], "filenames": ["Build.PL", "share/config.yml", "share/views/admintask.tt", "share/views/ajax/admintask/duplicatedevices.tt", "share/views/ajax/admintask/jobqueue.tt", "share/views/ajax/admintask/nodemonitor.tt", "share/views/ajax/admintask/orphaned.tt", "share/views/ajax/admintask/pseudodevice.tt", "share/views/ajax/admintask/slowdevices.tt", "share/views/ajax/admintask/timedoutdevices.tt", "share/views/ajax/admintask/topology.tt", "share/views/ajax/admintask/undiscoveredneighbors.tt", "share/views/ajax/admintask/userlog.tt", "share/views/ajax/admintask/users.tt", "share/views/ajax/datatabledefaults.tt", "share/views/ajax/device/addresses.tt", "share/views/ajax/device/details.tt", "share/views/ajax/device/modules.tt", "share/views/ajax/device/netmap.tt", "share/views/ajax/device/ports.tt", "share/views/ajax/device/vlans.tt", "share/views/ajax/report/apchanneldist.tt", "share/views/ajax/report/apclients.tt", "share/views/ajax/report/apradiochannelpower.tt", "share/views/ajax/report/deviceaddrnodns.tt", "share/views/ajax/report/devicebylocation.tt", "share/views/ajax/report/devicednsmismatch.tt", "share/views/ajax/report/devicepoestatus.tt", "share/views/ajax/report/duplexmismatch.tt", "share/views/ajax/report/halfduplex.tt", "share/views/ajax/report/inventorybymodelbyos.tt", "share/views/ajax/report/ipinventory.tt", "share/views/ajax/report/moduleinventory.tt", "share/views/ajax/report/netbios.tt", "share/views/ajax/report/nodemultiips.tt", "share/views/ajax/report/nodesdiscovered.tt", "share/views/ajax/report/nodevendor.tt", "share/views/ajax/report/portadmindown.tt", "share/views/ajax/report/portblocking.tt", "share/views/ajax/report/portmultinodes.tt", "share/views/ajax/report/portssid.tt", "share/views/ajax/report/portutilization.tt", "share/views/ajax/report/portvlanmismatch.tt", "share/views/ajax/report/subnets.tt", "share/views/ajax/report/vlaninventory.tt", "share/views/ajax/search/device.tt", "share/views/ajax/search/node_by_ip.tt", "share/views/ajax/search/node_by_mac.tt", "share/views/ajax/search/port.tt", "share/views/ajax/search/vlan.tt", "share/views/ajax/statistics.tt", "share/views/device.tt", "share/views/index.tt", "share/views/inventory.tt", "share/views/js/admintask.js", "share/views/js/common.js", "share/views/js/device.js", "share/views/js/report.js", "share/views/js/search.js", "share/views/layouts/main.tt", "share/views/password.tt", "share/views/report.tt", "share/views/search.tt", "share/views/sidebar/device/netmap.tt", "share/views/sidebar/device/ports.tt", "share/views/sidebar/report/ipinventory.tt", "share/views/sidebar/report/moduleinventory.tt", "share/views/sidebar/report/netbios.tt", "share/views/sidebar/report/nodesdiscovered.tt", "share/views/sidebar/report/nodevendor.tt", "share/views/sidebar/report/portmultinodes.tt", "share/views/sidebar/report/portssid.tt", "share/views/sidebar/report/portutilization.tt", "share/views/sidebar/report/subnets.tt", "share/views/sidebar/search/device.tt", "share/views/sidebar/search/node.tt", "share/views/sidebar/search/port.tt"], "buggy_code_start_loc": [83, 485, 12, 24, 40, 51, 25, 30, 19, 20, 45, 14, 22, 69, 4, 17, 6, 23, 8, 14, 14, 15, 19, 28, 16, 18, 17, 23, 18, 16, 13, 16, 37, 32, 18, 18, 32, 28, 17, 17, 30, 17, 18, 14, 16, 21, 19, 18, 18, 18, 32, 16, 39, 21, 81, 76, 30, 21, 17, 6, 18, 12, 12, 85, 92, 40, 77, 17, 51, 38, 8, 13, 7, 31, 98, 68, 31], "buggy_code_end_loc": [83, 490, 53, 45, 43, 58, 83, 53, 20, 21, 61, 22, 23, 76, 6, 46, 191, 44, 219, 381, 25, 16, 45, 63, 21, 49, 23, 69, 49, 29, 20, 40, 99, 79, 34, 42, 75, 46, 30, 30, 68, 23, 43, 15, 27, 26, 156, 110, 53, 48, 33, 51, 117, 63, 82, 137, 31, 22, 18, 199, 19, 48, 44, 136, 144, 59, 78, 18, 52, 39, 9, 14, 18, 32, 99, 73, 32], "fixing_code_start_loc": [84, 486, 12, 24, 40, 51, 25, 30, 19, 20, 45, 14, 22, 69, 4, 17, 6, 23, 8, 14, 14, 15, 19, 28, 16, 18, 17, 23, 18, 16, 13, 16, 37, 32, 18, 18, 32, 28, 17, 17, 30, 17, 18, 14, 16, 21, 19, 18, 18, 18, 32, 16, 39, 21, 81, 76, 30, 21, 17, 6, 18, 12, 12, 85, 92, 40, 77, 17, 51, 38, 8, 13, 7, 31, 98, 68, 31], "fixing_code_end_loc": [85, 495, 53, 45, 43, 58, 83, 53, 20, 21, 61, 22, 23, 76, 6, 46, 191, 44, 219, 381, 25, 16, 45, 63, 21, 49, 23, 69, 49, 29, 20, 40, 99, 79, 34, 42, 75, 46, 30, 30, 68, 23, 43, 15, 27, 26, 156, 110, 53, 48, 33, 51, 117, 63, 82, 137, 31, 22, 18, 199, 19, 48, 44, 136, 144, 59, 78, 18, 52, 39, 9, 14, 18, 32, 99, 73, 32], "type": "CWE-79", "message": "Insufficient sanitization during device search in Netdisco 2.042010 allows for reflected XSS via manipulation of a URL parameter.", "other": {"cve": {"id": "CVE-2019-15810", "sourceIdentifier": "cve@mitre.org", "published": "2019-09-30T17:15:11.720", "lastModified": "2019-10-02T17:07:01.227", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Insufficient sanitization during device search in Netdisco 2.042010 allows for reflected XSS via manipulation of a URL parameter."}, {"lang": "es", "value": "El saneamiento insuficiente durante la b\u00fasqueda de dispositivos en Netdisco versi\u00f3n 2.042010, permite un ataque de tipo XSS reflejado mediante la manipulaci\u00f3n de un par\u00e1metro URL."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:netdisco:netdisco:2.042010:*:*:*:*:*:*:*", "matchCriteriaId": "45A47C2B-72B6-469F-9BC1-7660F31C7053"}]}]}], "references": [{"url": "https://github.com/netdisco/netdisco/commit/deb9b62c7f839f5e41aa4d620bcdac5f9321a8a3", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/netdisco/netdisco/commits/master", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/netdisco/netdisco/commit/deb9b62c7f839f5e41aa4d620bcdac5f9321a8a3"}}