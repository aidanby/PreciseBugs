{"buggy_code": ["<?php\nnamespace Omeka;\n\nreturn [\n    'password' => [\n        'min_length' => 6,\n        'min_lowercase' => null,\n        'min_uppercase' => null,\n        'min_number' => null,\n        'min_symbol' => null,\n        'symbol_list' => '`~!@#$%^&*()-=_+[]\\{}|;:\",./<>?\\'',\n    ],\n    'session' => [\n        'config' => [],\n        'save_handler' => null,\n    ],\n    'listeners' => [\n        'ModuleRouteListener',\n        'Omeka\\MvcExceptionListener',\n        'Omeka\\MvcListeners',\n    ],\n    'view_manager' => [\n        'display_not_found_reason' => true,\n        'display_exceptions' => true,\n        'doctype' => 'HTML5',\n        'not_found_template' => 'error/404',\n        'exception_template' => 'error/index',\n        'template_path_stack' => [\n            OMEKA_PATH . '/application/view',\n        ],\n        'strategies' => [\n            'Omeka\\ViewApiJsonStrategy',\n        ],\n    ],\n    'assets' => [\n        'use_externals' => true,\n        'externals' => [\n            'Omeka' => [\n                'vendor/jquery/jquery.min.js' => 'https://code.jquery.com/jquery-3.6.2.min.js',\n            ],\n        ],\n    ],\n    'api_assets' => [\n        'allowed_media_types' => [\n            'image/jpeg',\n            'image/png',\n            'image/gif',\n            'image/webp',\n        ],\n    ],\n    'permissions' => [\n        'acl_resources' => [\n            'Omeka\\Module\\Manager',\n        ],\n    ],\n    'temp_dir' => sys_get_temp_dir(),\n    'file_store' => [\n        'local' => [\n            'base_path' => null,\n            'base_uri' => null,\n        ],\n    ],\n    'entity_manager' => [\n        'is_dev_mode' => false,\n        'mapping_classes_paths' => [\n            OMEKA_PATH . '/application/src/Entity',\n        ],\n        'resource_discriminator_map' => [\n            'Omeka\\Entity\\Item' => Entity\\Item::class,\n            'Omeka\\Entity\\Media' => Entity\\Media::class,\n            'Omeka\\Entity\\ItemSet' => Entity\\ItemSet::class,\n            'Omeka\\Entity\\ValueAnnotation' => Entity\\ValueAnnotation::class,\n        ],\n        'filters' => [\n            'resource_visibility' => Db\\Filter\\ResourceVisibilityFilter::class,\n            'site_page_visibility' => Db\\Filter\\SitePageVisibilityFilter::class,\n            'value_visibility' => Db\\Filter\\ValueVisibilityFilter::class,\n        ],\n        'functions' => [\n             'datetime' => [\n                'convert_tz' => \\DoctrineExtensions\\Query\\Mysql\\ConvertTz::class,\n                'date' => \\DoctrineExtensions\\Query\\Mysql\\Date::class,\n                'date_format' => \\DoctrineExtensions\\Query\\Mysql\\DateFormat::class,\n                'dateadd' => \\DoctrineExtensions\\Query\\Mysql\\DateAdd::class,\n                'datesub' => \\DoctrineExtensions\\Query\\Mysql\\DateSub::class,\n                'datediff' => \\DoctrineExtensions\\Query\\Mysql\\DateDiff::class,\n                'day' => \\DoctrineExtensions\\Query\\Mysql\\Day::class,\n                'dayname' => \\DoctrineExtensions\\Query\\Mysql\\DayName::class,\n                'dayofweek' => \\DoctrineExtensions\\Query\\Mysql\\DayOfWeek::class,\n                'dayofyear' => \\DoctrineExtensions\\Query\\Mysql\\DayOfYear::class,\n                'div' => \\DoctrineExtensions\\Query\\Mysql\\Div::class,\n                'from_unixtime' => \\DoctrineExtensions\\Query\\Mysql\\FromUnixtime::class,\n                'hour' => \\DoctrineExtensions\\Query\\Mysql\\Hour::class,\n                'last_day' => \\DoctrineExtensions\\Query\\Mysql\\LastDay::class,\n                'minute' => \\DoctrineExtensions\\Query\\Mysql\\Minute::class,\n                'now' => \\DoctrineExtensions\\Query\\Mysql\\Now::class,\n                'month' => \\DoctrineExtensions\\Query\\Mysql\\Month::class,\n                'monthname' => \\DoctrineExtensions\\Query\\Mysql\\MonthName::class,\n                'second' => \\DoctrineExtensions\\Query\\Mysql\\Second::class,\n                'strtodate' => \\DoctrineExtensions\\Query\\Mysql\\StrToDate::class,\n                'time' => \\DoctrineExtensions\\Query\\Mysql\\Time::class,\n                'timediff' => \\DoctrineExtensions\\Query\\Mysql\\TimeDiff::class,\n                'timestampadd' => \\DoctrineExtensions\\Query\\Mysql\\TimestampAdd::class,\n                'timestampdiff' => \\DoctrineExtensions\\Query\\Mysql\\TimestampDiff::class,\n                'timetosec' => \\DoctrineExtensions\\Query\\Mysql\\TimeToSec::class,\n                'week' => \\DoctrineExtensions\\Query\\Mysql\\Week::class,\n                'weekday' => \\DoctrineExtensions\\Query\\Mysql\\WeekDay::class,\n                'year' => \\DoctrineExtensions\\Query\\Mysql\\Year::class,\n                'yearweek' => \\DoctrineExtensions\\Query\\Mysql\\YearWeek::class,\n                'unix_timestamp' => \\DoctrineExtensions\\Query\\Mysql\\UnixTimestamp::class,\n            ],\n            'numeric' => [\n                'acos' => \\DoctrineExtensions\\Query\\Mysql\\Acos::class,\n                'asin' => \\DoctrineExtensions\\Query\\Mysql\\Asin::class,\n                'atan2' => \\DoctrineExtensions\\Query\\Mysql\\Atan2::class,\n                'atan' => \\DoctrineExtensions\\Query\\Mysql\\Atan::class,\n                'bit_count' => \\DoctrineExtensions\\Query\\Mysql\\BitCount::class,\n                'bit_xor' => \\DoctrineExtensions\\Query\\Mysql\\BitXor::class,\n                'ceil' => \\DoctrineExtensions\\Query\\Mysql\\Ceil::class,\n                'cos' => \\DoctrineExtensions\\Query\\Mysql\\Cos::class,\n                'cot' => \\DoctrineExtensions\\Query\\Mysql\\Cot::class,\n                'floor' => \\DoctrineExtensions\\Query\\Mysql\\Floor::class,\n                'pi' => \\DoctrineExtensions\\Query\\Mysql\\Pi::class,\n                'power' => \\DoctrineExtensions\\Query\\Mysql\\Power::class,\n                'quarter' => \\DoctrineExtensions\\Query\\Mysql\\Quarter::class,\n                'rand' => \\DoctrineExtensions\\Query\\Mysql\\Rand::class,\n                'round' => \\DoctrineExtensions\\Query\\Mysql\\Round::class,\n                'stddev' => \\DoctrineExtensions\\Query\\Mysql\\StdDev::class,\n                'sin' => \\DoctrineExtensions\\Query\\Mysql\\Sin::class,\n                'std' => \\DoctrineExtensions\\Query\\Mysql\\Std::class,\n                'tan' => \\DoctrineExtensions\\Query\\Mysql\\Tan::class,\n            ],\n            'string' => [\n                'ascii' => \\DoctrineExtensions\\Query\\Mysql\\Ascii::class,\n                'binary' => \\DoctrineExtensions\\Query\\Mysql\\Binary::class,\n                'char_length' => \\DoctrineExtensions\\Query\\Mysql\\CharLength::class,\n                'concat_ws' => \\DoctrineExtensions\\Query\\Mysql\\ConcatWs::class,\n                'countif' => \\DoctrineExtensions\\Query\\Mysql\\CountIf::class,\n                'crc32' => \\DoctrineExtensions\\Query\\Mysql\\Crc32::class,\n                'degrees' => \\DoctrineExtensions\\Query\\Mysql\\Degrees::class,\n                'field' => \\DoctrineExtensions\\Query\\Mysql\\Field::class,\n                'find_in_set' => \\DoctrineExtensions\\Query\\Mysql\\FindInSet::class,\n                'greatest' => \\DoctrineExtensions\\Query\\Mysql\\Greatest::class,\n                'group_concat' => \\DoctrineExtensions\\Query\\Mysql\\GroupConcat::class,\n                'ifelse' => \\DoctrineExtensions\\Query\\Mysql\\IfElse::class,\n                'ifnull' => \\DoctrineExtensions\\Query\\Mysql\\IfNull::class,\n                'least' => \\DoctrineExtensions\\Query\\Mysql\\Least::class,\n                'lpad' => \\DoctrineExtensions\\Query\\Mysql\\Lpad::class,\n                'match' => \\DoctrineExtensions\\Query\\Mysql\\MatchAgainst::class,\n                'md5' => \\DoctrineExtensions\\Query\\Mysql\\Md5::class,\n                'nullif' => \\DoctrineExtensions\\Query\\Mysql\\NullIf::class,\n                'radians' => \\DoctrineExtensions\\Query\\Mysql\\Radians::class,\n                'regexp' => \\DoctrineExtensions\\Query\\Mysql\\Regexp::class,\n                'replace' => \\DoctrineExtensions\\Query\\Mysql\\Replace::class,\n                'rpad' => \\DoctrineExtensions\\Query\\Mysql\\Rpad::class,\n                'sha1' => \\DoctrineExtensions\\Query\\Mysql\\Sha1::class,\n                'sha2' => \\DoctrineExtensions\\Query\\Mysql\\Sha2::class,\n                'soundex' => \\DoctrineExtensions\\Query\\Mysql\\Soundex::class,\n                'substring_index' => \\DoctrineExtensions\\Query\\Mysql\\SubstringIndex::class,\n                'uuid_short' => \\DoctrineExtensions\\Query\\Mysql\\UuidShort::class,\n                'hex' => \\DoctrineExtensions\\Query\\Mysql\\Hex::class,\n                'unhex' => \\DoctrineExtensions\\Query\\Mysql\\Unhex::class,\n            ],\n        ],\n        'proxy_paths' => [\n            OMEKA_PATH . '/application/data/doctrine-proxies',\n        ],\n    ],\n    'installer' => [\n        'pre_tasks' => [\n            Installation\\Task\\CheckEnvironmentTask::class,\n            Installation\\Task\\CheckDirPermissionsTask::class,\n        ],\n        'tasks' => [\n            Installation\\Task\\DestroySessionTask::class,\n            Installation\\Task\\ClearCacheTask::class,\n            Installation\\Task\\InstallSchemaTask::class,\n            Installation\\Task\\RecordMigrationsTask::class,\n            Installation\\Task\\InstallDefaultVocabulariesTask::class,\n            Installation\\Task\\InstallDefaultTemplatesTask::class,\n            Installation\\Task\\CreateFirstUserTask::class,\n            Installation\\Task\\AddDefaultSettingsTask::class,\n        ],\n    ],\n    'translator' => [\n        'locale' => 'en_US',\n        'translation_file_patterns' => [\n            [\n                'type' => 'gettext',\n                'base_dir' => OMEKA_PATH . '/application/language',\n                'pattern' => '%s.mo',\n                'text_domain' => null,\n            ],\n        ],\n    ],\n    'logger' => [\n        'log' => false,\n        'path' => OMEKA_PATH . '/logs/application.log',\n        'priority' => \\Laminas\\Log\\Logger::NOTICE,\n    ],\n    'http_client' => [\n        'adapter' => \\Laminas\\Http\\Client\\Adapter\\Socket::class,\n        'sslcapath' => null,\n        'sslcafile' => null,\n    ],\n    'cli' => [\n        'execute_strategy' => 'auto',\n        'phpcli_path' => null,\n    ],\n    'thumbnails' => [\n        'types' => [\n            'large' => [\n                'strategy' => 'default',\n                'constraint' => 800,\n                'options' => [],\n            ],\n            'medium' => [\n                'strategy' => 'default',\n                'constraint' => 400,\n                'options' => [],\n            ],\n            'square' => [\n                'strategy' => 'square',\n                'constraint' => 200,\n                'options' => [\n                    'gravity' => 'center',\n                ],\n            ],\n        ],\n        'fallbacks' => [\n            'default' => ['thumbnails/default.png', 'Omeka'],\n            'fallbacks' => [\n                'image' => ['thumbnails/image.png', 'Omeka'],\n                'video' => ['thumbnails/video.png', 'Omeka'],\n                'audio' => ['thumbnails/audio.png', 'Omeka'],\n            ],\n        ],\n        'thumbnailer_options' => [\n            'imagemagick_dir' => null,\n            'page' => 0,\n        ],\n    ],\n    'service_manager' => [\n        'abstract_factories' => [\n            \\Laminas\\Navigation\\Service\\NavigationAbstractServiceFactory::class,\n        ],\n        'factories' => [\n            'Omeka\\Acl' => Service\\AclFactory::class,\n            'Omeka\\ApiAdapterManager' => Service\\ApiAdapterManagerFactory::class,\n            'Omeka\\ApiManager' => Service\\ApiManagerFactory::class,\n            'Omeka\\AuthenticationService' => Service\\AuthenticationServiceFactory::class,\n            'Omeka\\EntityManager' => Service\\EntityManagerFactory::class,\n            'Omeka\\Installer' => Service\\InstallerFactory::class,\n            'Omeka\\Logger' => Service\\LoggerFactory::class,\n            'Omeka\\MigrationManager' => Service\\MigrationManagerFactory::class,\n            'Omeka\\ViewApiJsonStrategy' => Service\\ViewApiJsonStrategyFactory::class,\n            'Omeka\\HttpClient' => Service\\HttpClientFactory::class,\n            'Omeka\\Mailer' => Service\\MailerFactory::class,\n            'Omeka\\HtmlPurifier' => Service\\HtmlPurifierFactory::class,\n            'Omeka\\BlockLayoutManager' => Service\\BlockLayoutManagerFactory::class,\n            'Omeka\\ResourcePageBlockLayoutManager' => Service\\ResourcePageBlockLayoutManagerFactory::class,\n            'Omeka\\DataTypeManager' => Service\\DataTypeManagerFactory::class,\n            'Omeka\\Cli' => Service\\CliFactory::class,\n            'Omeka\\Paginator' => Service\\PaginatorFactory::class,\n            'Omeka\\RdfImporter' => Service\\RdfImporterFactory::class,\n            'Omeka\\Site\\ThemeManager' => Service\\ThemeManagerFactory::class,\n            'Omeka\\Site\\NavigationLinkManager' => Service\\NavigationLinkManagerFactory::class,\n            'Omeka\\Site\\NavigationTranslator' => Service\\SiteNavigationTranslatorFactory::class,\n            'Omeka\\File\\Thumbnailer\\ImageMagick' => Service\\File\\Thumbnailer\\ImageMagickFactory::class,\n            'Omeka\\File\\Thumbnailer\\Gd' => Service\\File\\Thumbnailer\\GdFactory::class,\n            'Omeka\\File\\Thumbnailer\\Imagick' => Service\\File\\Thumbnailer\\ImagickFactory::class,\n            'Omeka\\File\\Thumbnailer\\NoThumbnail' => Service\\File\\Thumbnailer\\NoThumbnailFactory::class,\n            'Omeka\\File\\Store\\Local' => Service\\File\\Store\\LocalFactory::class,\n            'Omeka\\File\\MediaTypeMap' => Service\\MediaTypeMapFactory::class,\n            'Omeka\\File\\ThumbnailManager' => Service\\File\\ThumbnailManagerFactory::class,\n            'Omeka\\File\\TempFileFactory' => Service\\File\\TempFileFactoryFactory::class,\n            'Omeka\\File\\Downloader' => Service\\File\\DownloaderFactory::class,\n            'Omeka\\File\\Uploader' => Service\\File\\UploaderFactory::class,\n            'Omeka\\File\\Validator' => Service\\File\\ValidatorFactory::class,\n            'Omeka\\Settings' => Service\\Settings\\SettingsFactory::class,\n            'Omeka\\Settings\\Site' => Service\\Settings\\SiteSettingsFactory::class,\n            'Omeka\\Settings\\User' => Service\\Settings\\UserSettingsFactory::class,\n            'Omeka\\Job\\Dispatcher' => Service\\Job\\DispatcherFactory::class,\n            'Omeka\\Job\\DispatchStrategy\\PhpCli' => Service\\Job\\DispatchStrategy\\PhpCliFactory::class,\n            'Omeka\\Job\\DispatchStrategy\\Synchronous' => Service\\Job\\DispatchStrategy\\SynchronousFactory::class,\n            'Omeka\\Media\\Ingester\\Manager' => Service\\Media\\Ingester\\ManagerFactory::class,\n            'Omeka\\Media\\Renderer\\Manager' => Service\\Media\\Renderer\\ManagerFactory::class,\n            'Omeka\\Media\\FileRenderer\\Manager' => Service\\Media\\FileRenderer\\ManagerFactory::class,\n            'Omeka\\FulltextSearch' => Service\\FulltextSearchFactory::class,\n            'Omeka\\Environment' => Service\\EnvironmentFactory::class,\n            'Omeka\\ColumnTypeManager' => Service\\ColumnType\\ManagerFactory::class,\n            'Omeka\\Browse' => Service\\BrowseFactory::class,\n        ],\n        'invokables' => [\n            'ModuleRouteListener' => \\Laminas\\Mvc\\ModuleRouteListener::class,\n            'Omeka\\MvcExceptionListener' => Mvc\\ExceptionListener::class,\n            'Omeka\\MvcListeners' => Mvc\\MvcListeners::class,\n            'Omeka\\ViewApiJsonRenderer' => View\\Renderer\\ApiJsonRenderer::class,\n        ],\n        'delegators' => [\n            'Laminas\\I18n\\Translator\\TranslatorInterface' => [\n                'Omeka\\Service\\Delegator\\TranslatorDelegatorFactory',\n            ],\n        ],\n        'aliases' => [\n            'Omeka\\File\\Store' => 'Omeka\\File\\Store\\Local',\n            'Omeka\\File\\Thumbnailer' => 'Omeka\\File\\Thumbnailer\\ImageMagick',\n            'Omeka\\Job\\DispatchStrategy' => 'Omeka\\Job\\DispatchStrategy\\PhpCli',\n            'Omeka\\JobDispatcher' => 'Omeka\\Job\\Dispatcher',\n            'Laminas\\Authentication\\AuthenticationService' => 'Omeka\\AuthenticationService',\n        ],\n        'shared' => [\n            'Omeka\\Paginator' => false,\n            'Omeka\\HttpClient' => false,\n        ],\n    ],\n    'controllers' => [\n        'invokables' => [\n            'Omeka\\Controller\\Index' => Controller\\IndexController::class,\n            'Omeka\\Controller\\IiifViewer' => Controller\\IiifViewerController::class,\n            'Omeka\\Controller\\Search' => Controller\\SearchController::class,\n            'Omeka\\Controller\\Maintenance' => Controller\\MaintenanceController::class,\n            'Omeka\\Controller\\Site\\Index' => Controller\\Site\\IndexController::class,\n            'Omeka\\Controller\\Site\\Item' => Controller\\Site\\ItemController::class,\n            'Omeka\\Controller\\Site\\ItemSet' => Controller\\Site\\ItemSetController::class,\n            'Omeka\\Controller\\Site\\Media' => Controller\\Site\\MediaController::class,\n            'Omeka\\Controller\\Site\\Page' => Controller\\Site\\PageController::class,\n            'Omeka\\Controller\\Site\\CrossSiteSearch' => Controller\\Site\\CrossSiteSearchController::class,\n            'Omeka\\Controller\\Admin\\Asset' => Controller\\Admin\\AssetController::class,\n            'Omeka\\Controller\\Admin\\Query' => Controller\\Admin\\QueryController::class,\n            'Omeka\\Controller\\Admin\\Columns' => Controller\\Admin\\ColumnsController::class,\n            'Omeka\\Controller\\Admin\\Index' => Controller\\Admin\\IndexController::class,\n            'Omeka\\Controller\\Admin\\ItemSet' => Controller\\Admin\\ItemSetController::class,\n            'Omeka\\Controller\\Admin\\Job' => Controller\\Admin\\JobController::class,\n            'Omeka\\Controller\\Admin\\Media' => Controller\\Admin\\MediaController::class,\n            'Omeka\\Controller\\Admin\\Property' => Controller\\Admin\\PropertyController::class,\n            'Omeka\\Controller\\Admin\\ResourceClass' => Controller\\Admin\\ResourceClassController::class,\n            'Omeka\\Controller\\Admin\\Setting' => Controller\\Admin\\SettingController::class,\n            'Omeka\\Controller\\SiteAdmin\\Page' => Controller\\SiteAdmin\\PageController::class,\n        ],\n        'factories' => [\n            'Omeka\\Controller\\Login' => Service\\Controller\\LoginControllerFactory::class,\n            'Omeka\\Controller\\Api' => Service\\Controller\\ApiControllerFactory::class,\n            'Omeka\\Controller\\Install' => Service\\Controller\\InstallControllerFactory::class,\n            'Omeka\\Controller\\Migrate' => Service\\Controller\\MigrateControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Module' => Service\\Controller\\Admin\\ModuleControllerFactory::class,\n            'Omeka\\Controller\\Admin\\User' => Service\\Controller\\Admin\\UserControllerFactory::class,\n            'Omeka\\Controller\\Admin\\ResourceTemplate' => Service\\Controller\\Admin\\ResourceTemplateControllerFactory::class,\n            'Omeka\\Controller\\Admin\\SystemInfo' => Service\\Controller\\Admin\\SystemInfoControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Vocabulary' => Service\\Controller\\Admin\\VocabularyControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Item' => Service\\Controller\\Admin\\ItemControllerFactory::class,\n            'Omeka\\Controller\\SiteAdmin\\Index' => Service\\Controller\\SiteAdmin\\IndexControllerFactory::class,\n        ],\n    ],\n    'controller_plugins' => [\n        'invokables' => [\n            'messenger' => Mvc\\Controller\\Plugin\\Messenger::class,\n            'setBrowseDefaults' => Mvc\\Controller\\Plugin\\SetBrowseDefaults::class,\n            'currentSite' => Mvc\\Controller\\Plugin\\CurrentSite::class,\n            'mergeValuesJson' => Mvc\\Controller\\Plugin\\MergeValuesJson::class,\n        ],\n        'factories' => [\n            'api' => Service\\ControllerPlugin\\ApiFactory::class,\n            'jobDispatcher' => Service\\ControllerPlugin\\JobDispatcherFactory::class,\n            'logger' => Service\\ControllerPlugin\\LoggerFactory::class,\n            'paginator' => Service\\ControllerPlugin\\PaginatorFactory::class,\n            'translate' => Service\\ControllerPlugin\\TranslateFactory::class,\n            'getForm' => Service\\ControllerPlugin\\GetFormFactory::class,\n            'userIsAllowed' => Service\\ControllerPlugin\\UserIsAllowedFactory::class,\n            'mailer' => Service\\ControllerPlugin\\MailerFactory::class,\n            'settings' => Service\\ControllerPlugin\\SettingsFactory::class,\n            'siteSettings' => Service\\ControllerPlugin\\SiteSettingsFactory::class,\n            'userSettings' => Service\\ControllerPlugin\\UserSettingsFactory::class,\n            'status' => Service\\ControllerPlugin\\StatusFactory::class,\n            'viewHelpers' => Service\\ControllerPlugin\\ViewHelpersFactory::class,\n            'browse' => Service\\ControllerPlugin\\BrowseFactory::class,\n        ],\n    ],\n    'api_adapters' => [\n        'invokables' => [\n            'users' => Api\\Adapter\\UserAdapter::class,\n            'vocabularies' => Api\\Adapter\\VocabularyAdapter::class,\n            'resource_classes' => Api\\Adapter\\ResourceClassAdapter::class,\n            'resource_templates' => Api\\Adapter\\ResourceTemplateAdapter::class,\n            'properties' => Api\\Adapter\\PropertyAdapter::class,\n            'items' => Api\\Adapter\\ItemAdapter::class,\n            'media' => Api\\Adapter\\MediaAdapter::class,\n            'item_sets' => Api\\Adapter\\ItemSetAdapter::class,\n            'value_annotations' => Api\\Adapter\\ValueAnnotationAdapter::class,\n            'modules' => Api\\Adapter\\ModuleAdapter::class,\n            'sites' => Api\\Adapter\\SiteAdapter::class,\n            'site_pages' => Api\\Adapter\\SitePageAdapter::class,\n            'jobs' => Api\\Adapter\\JobAdapter::class,\n            'resources' => Api\\Adapter\\ResourceAdapter::class,\n            'assets' => Api\\Adapter\\AssetAdapter::class,\n            'api_resources' => Api\\Adapter\\ApiResourceAdapter::class,\n            'data_types' => Api\\Adapter\\DataTypeAdapter::class,\n        ],\n    ],\n    'view_helpers' => [\n        'invokables' => [\n            'pageTitle' => View\\Helper\\PageTitle::class,\n            'htmlElement' => View\\Helper\\HtmlElement::class,\n            'hyperlink' => View\\Helper\\Hyperlink::class,\n            'messages' => View\\Helper\\Messages::class,\n            'sortLink' => View\\Helper\\SortLink::class,\n            'sortSelector' => View\\Helper\\SortSelector::class,\n            'filterSelector' => View\\Helper\\FilterSelector::class,\n            'propertySelector' => View\\Helper\\PropertySelector::class,\n            'itemSetSelector' => View\\Helper\\ItemSetSelector::class,\n            'siteSelector' => View\\Helper\\SiteSelector::class,\n            'userSelector' => View\\Helper\\UserSelector::class,\n            'searchFilters' => View\\Helper\\SearchFilters::class,\n            'blockAttachmentsForm' => View\\Helper\\BlockAttachmentsForm::class,\n            'blockShowTitleSelect' => View\\Helper\\BlockShowTitleSelect::class,\n            'ckEditor' => View\\Helper\\CkEditor::class,\n            'sitePagePagination' => View\\Helper\\SitePagePagination::class,\n            'sectionNav' => View\\Helper\\SectionNav::class,\n            'uploadLimit' => View\\Helper\\UploadLimit::class,\n            'formRecaptcha' => Form\\View\\Helper\\FormRecaptcha::class,\n            'formCkeditor' => Form\\View\\Helper\\FormCkeditor::class,\n            'formCkeditorInline' => Form\\View\\Helper\\FormCkeditorInline::class,\n            'formRestoreTextarea' => Form\\View\\Helper\\FormRestoreTextarea::class,\n            'formCollectionElementGroups' => Form\\View\\Helper\\FormCollectionElementGroups::class,\n            'queryToHiddenInputs' => View\\Helper\\QueryToHiddenInputs::class,\n            'formAsset' => Form\\View\\Helper\\FormAsset::class,\n            'formQuery' => Form\\View\\Helper\\FormQuery::class,\n            'formColumns' => Form\\View\\Helper\\FormColumns::class,\n            'formBrowseDefaults' => Form\\View\\Helper\\FormBrowseDefaults::class,\n            'themeSettingAsset' => View\\Helper\\ThemeSettingAsset::class,\n            'themeSettingAssetUrl' => View\\Helper\\ThemeSettingAssetUrl::class,\n            'formColorPicker' => Form\\View\\Helper\\FormColorPicker::class,\n            'thumbnail' => View\\Helper\\Thumbnail::class,\n            'userBar' => View\\Helper\\UserBar::class,\n            'cancelButton' => View\\Helper\\CancelButton::class,\n            'sortMedia' => View\\Helper\\SortMedia::class,\n            'lightGalleryOutput' => View\\Helper\\LightGalleryOutput::class,\n            'iiifViewer' => View\\Helper\\IiifViewer::class,\n            'currentSite' => View\\Helper\\CurrentSite::class,\n        ],\n        'factories' => [\n            'api' => Service\\ViewHelper\\ApiFactory::class,\n            'assetUrl' => Service\\ViewHelper\\AssetUrlFactory::class,\n            'blockLayout' => Service\\ViewHelper\\BlockLayoutFactory::class,\n            'blockThumbnailTypeSelect' => Service\\ViewHelper\\BlockThumbnailTypeSelectFactory::class,\n            'dataType' => Service\\ViewHelper\\DataTypeFactory::class,\n            'i18n' => Service\\ViewHelper\\I18nFactory::class,\n            'logger' => Service\\ViewHelper\\LoggerFactory::class,\n            'media' => Service\\ViewHelper\\MediaFactory::class,\n            'navigationLink' => Service\\ViewHelper\\NavigationLinkFactory::class,\n            'pagination' => Service\\ViewHelper\\PaginationFactory::class,\n            'params' => Service\\ViewHelper\\ParamsFactory::class,\n            'setting' => Service\\ViewHelper\\SettingFactory::class,\n            'userSetting' => Service\\ViewHelper\\UserSettingFactory::class,\n            'siteSetting' => Service\\ViewHelper\\SiteSettingFactory::class,\n            'themeSetting' => Service\\ViewHelper\\ThemeSettingFactory::class,\n            'trigger' => Service\\ViewHelper\\TriggerFactory::class,\n            'userIsAllowed' => Service\\ViewHelper\\UserIsAllowedFactory::class,\n            'deleteConfirm' => Service\\ViewHelper\\DeleteConfirmFactory::class,\n            'resourceClassSelect' => Service\\ViewHelper\\ResourceClassSelectFactory::class,\n            'resourceTemplateSelect' => Service\\ViewHelper\\ResourceTemplateSelectFactory::class,\n            'propertySelect' => Service\\ViewHelper\\PropertySelectFactory::class,\n            'itemSetSelect' => Service\\ViewHelper\\ItemSetSelectFactory::class,\n            'roleSelect' => Service\\ViewHelper\\RoleSelectFactory::class,\n            'userSelect' => Service\\ViewHelper\\UserSelectFactory::class,\n            'searchUserFilters' => Service\\ViewHelper\\SearchUserFiltersFactory::class,\n            'siteSelect' => Service\\ViewHelper\\SiteSelectFactory::class,\n            'resourceSelect' => Service\\ViewHelper\\ResourceSelectFactory::class,\n            'jsTranslate' => Service\\ViewHelper\\JsTranslateFactory::class,\n            'lang' => Service\\ViewHelper\\LangFactory::class,\n            'status' => Service\\ViewHelper\\StatusFactory::class,\n            'passwordRequirements' => Service\\ViewHelper\\PasswordRequirementsFactory::class,\n            'resourcePageBlocks' => Service\\ViewHelper\\ResourcePageBlocksFactory::class,\n            'browse' => Service\\ViewHelper\\BrowseFactory::class,\n        ],\n        'shared' => [\n            'resourcePageBlocks' => false,\n        ],\n        'delegators' => [\n            'Laminas\\Form\\View\\Helper\\FormElement' => [\n                Service\\Delegator\\FormElementDelegatorFactory::class,\n            ],\n            'Laminas\\Form\\View\\Helper\\FormSelect' => [\n                Service\\Delegator\\FormSelectDelegatorFactory::class,\n            ],\n            'Laminas\\Form\\View\\Helper\\FormRow' => [\n                Service\\Delegator\\FormRowDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\Navigation' => [\n                Service\\Delegator\\NavigationDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\HeadTitle' => [\n                Service\\Delegator\\HeadTitleDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\Url' => [\n                Service\\Delegator\\UrlDelegatorFactory::class,\n            ],\n        ],\n    ],\n    'form_elements' => [\n        'initializers' => [\n            Form\\Initializer\\Csrf::class,\n        ],\n        'factories' => [\n            'Omeka\\Form\\ResourceForm' => Service\\Form\\ResourceFormFactory::class,\n            'Omeka\\Form\\ResourceBatchUpdateForm' => Service\\Form\\ResourceBatchUpdateFormFactory::class,\n            'Omeka\\Form\\UserForm' => Service\\Form\\UserFormFactory::class,\n            'Omeka\\Form\\SettingForm' => Service\\Form\\SettingFormFactory::class,\n            'Omeka\\Form\\ModuleStateChangeForm' => Service\\Form\\ModuleStateChangeFormFactory::class,\n            'Omeka\\Form\\SiteForm' => Service\\Form\\SiteFormFactory::class,\n            'Omeka\\Form\\SiteSettingsForm' => Service\\Form\\SiteSettingsFormFactory::class,\n            'Omeka\\Form\\UserBatchUpdateForm' => Service\\Form\\UserBatchUpdateFormFactory::class,\n            'Omeka\\Form\\Element\\ResourceSelect' => Service\\Form\\Element\\ResourceSelectFactory::class,\n            'Omeka\\Form\\Element\\ResourceClassSelect' => Service\\Form\\Element\\ResourceClassSelectFactory::class,\n            'Omeka\\Form\\Element\\ResourceTemplateSelect' => Service\\Form\\Element\\ResourceTemplateSelectFactory::class,\n            'Omeka\\Form\\Element\\PropertySelect' => Service\\Form\\Element\\PropertySelectFactory::class,\n            'Omeka\\Form\\Element\\ItemSetSelect' => Service\\Form\\Element\\ItemSetSelectFactory::class,\n            'Omeka\\Form\\Element\\SiteSelect' => Service\\Form\\Element\\SiteSelectFactory::class,\n            'Omeka\\Form\\Element\\LocaleSelect' => Service\\Form\\Element\\LocaleSelectFactory::class,\n            'Omeka\\Form\\Element\\RoleSelect' => Service\\Form\\Element\\RoleSelectFactory::class,\n            'Omeka\\Form\\Element\\UserSelect' => Service\\Form\\Element\\UserSelectFactory::class,\n            'Omeka\\Form\\Element\\Recaptcha' => Service\\Form\\Element\\RecaptchaFactory::class,\n            'Omeka\\Form\\Element\\HtmlTextarea' => Service\\Form\\Element\\HtmlTextareaFactory::class,\n            'Omeka\\Form\\Element\\Ckeditor' => Service\\Form\\Element\\CkeditorFactory::class,\n            'Omeka\\Form\\Element\\CkeditorInline' => Service\\Form\\Element\\CkeditorInlineFactory::class,\n            'Omeka\\Form\\Element\\PasswordConfirm' => Service\\Form\\Element\\PasswordConfirmFactory::class,\n            'Omeka\\Form\\Element\\SitePageSelect' => Service\\Form\\Element\\SitePageSelectFactory::class,\n        ],\n    ],\n    'data_types' => [\n        'invokables' => [\n            'literal' => DataType\\Literal::class,\n            'uri' => DataType\\Uri::class,\n            'resource' => DataType\\Resource\\All::class,\n            'resource:item' => DataType\\Resource\\Item::class,\n            'resource:itemset' => DataType\\Resource\\ItemSet::class,\n            'resource:media' => DataType\\Resource\\Media::class,\n        ],\n        'value_annotating' => [\n            'literal',\n            'uri',\n            'resource:item',\n            'resource:itemset',\n            'resource:media',\n        ]\n    ],\n    'column_types' => [\n        'invokables' => [\n            'created' => ColumnType\\Created::class,\n            'id' => ColumnType\\Id::class,\n            'is_open' => ColumnType\\IsOpen::class,\n            'is_public' => ColumnType\\IsPublic::class,\n            'media_type' => ColumnType\\MediaType::class,\n            'modified' => ColumnType\\Modified::class,\n            'owner' => ColumnType\\Owner::class,\n            'resource_class' => ColumnType\\ResourceClass::class,\n            'resource_template' => ColumnType\\ResourceTemplate::class,\n            'size' => ColumnType\\Size::class,\n            'slug' => ColumnType\\Slug::class,\n        ],\n        'factories' => [\n            'theme' => Service\\ColumnType\\ThemeFactory::class,\n            'value' => Service\\ColumnType\\ValueFactory::class,\n        ],\n    ],\n    'column_defaults' => [\n        'admin' => [\n            'items' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'item_sets' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'media' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'sites' => [\n                ['type' => 'slug'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n        ],\n        'public' => [],\n    ],\n    'browse_defaults' => [\n        'admin' => [\n            'items' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'item_sets' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'media' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'sites' => [\n                'sort_by' => 'title',\n                'sort_order' => 'asc',\n            ],\n            'assets' => [\n                'sort_by' => 'id',\n                'sort_order' => 'desc',\n            ],\n            'jobs' => [\n                'sort_by' => 'id',\n                'sort_order' => 'desc',\n            ],\n            'resource_templates' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'users' => [\n                'sort_by' => 'email',\n                'sort_order' => 'asc',\n            ],\n            'vocabularies' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'resource_classes' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'properties' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'site_pages' => [\n                'sort_by' => 'nav',\n                'sort_order' => 'asc',\n            ],\n        ],\n        'public' => [\n            'items' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n        ],\n    ],\n    'sort_defaults' => [\n        'admin' => [\n            'items' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'item_sets' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'media' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'sites' => [\n                'title' => 'Title', // @translate\n                'slug' => 'URL slug', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'assets' => [\n                'name' => 'Name', // @translate\n                'id' => 'ID', // @translate\n            ],\n            'jobs' => [\n                'id' => 'ID', // @translate\n                'class' => 'Class', // @translate\n                'status' => 'Status', // @translate\n                'owner_email' => 'Owner email', // @translate\n            ],\n            'resource_templates' => [\n                'label' => 'Label', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'users' => [\n                'email' => 'Email', // @translate\n                'role' => 'Role', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'vocabularies' => [\n                'label' => 'Label', // @translate\n                'prefix' => 'Prefix', // @translate\n                'resource_class_count' => 'Resource class count', // @translate\n                'property_count' => 'Property count', // @translate\n            ],\n            'resource_classes' => [\n                'label' => 'Label', // @translate\n                'local_name' => 'Term', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'properties' => [\n                'label' => 'Label', // @translate\n                'local_name' => 'Term', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'site_pages' => [\n                'title' => 'Title', // @translate\n                'slug' => 'URL slug', // @translate\n                'created' => 'Created', // @translate\n                'modified' => 'Modified', // @translate\n                'nav' => 'Navigation', // @translate\n            ],\n        ],\n        'public' => [\n            'items' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'created' => 'Created', // @translate\n            ],\n        ],\n    ],\n    'block_layouts' => [\n        'invokables' => [\n            'pageTitle' => Site\\BlockLayout\\PageTitle::class,\n            'media' => Site\\BlockLayout\\Media::class,\n            'browsePreview' => Site\\BlockLayout\\BrowsePreview::class,\n            'itemShowCase' => Site\\BlockLayout\\ItemShowcase::class,\n            'listOfSites' => Site\\BlockLayout\\ListOfSites::class,\n            'tableOfContents' => Site\\BlockLayout\\TableOfContents::class,\n            'lineBreak' => Site\\BlockLayout\\LineBreak::class,\n            'itemWithMetadata' => Site\\BlockLayout\\ItemWithMetadata::class,\n            'pageDateTime' => Site\\BlockLayout\\PageDateTime::class,\n        ],\n        'factories' => [\n            'asset' => Service\\BlockLayout\\AssetFactory::class,\n            'html' => Service\\BlockLayout\\HtmlFactory::class,\n            'listOfPages' => Service\\BlockLayout\\PageListFactory::class,\n        ],\n    ],\n    'resource_page_block_layouts' => [\n        'invokables' => [\n            'itemSets' => Site\\ResourcePageBlockLayout\\ItemSets::class,\n            'lightboxGallery' => Site\\ResourcePageBlockLayout\\LightboxGallery::class,\n            'linkedResources' => Site\\ResourcePageBlockLayout\\LinkedResources::class,\n            'mediaEmbeds' => Site\\ResourcePageBlockLayout\\MediaEmbeds::class,\n            'mediaList' => Site\\ResourcePageBlockLayout\\MediaList::class,\n            'mediaRender' => Site\\ResourcePageBlockLayout\\MediaRender::class,\n            'resourceClass' => Site\\ResourcePageBlockLayout\\ResourceClass::class,\n            'sitePages' => Site\\ResourcePageBlockLayout\\SitePages::class,\n            'values' => Site\\ResourcePageBlockLayout\\Values::class,\n        ],\n    ],\n    'resource_page_blocks_default' => [\n        'items' => [\n            'main' => [],\n        ],\n        'item_sets' => [\n            'main' => [],\n        ],\n        'media' => [\n            'main' => [],\n        ],\n    ],\n    'navigation_links' => [\n        'invokables' => [\n            'page' => Site\\Navigation\\Link\\Page::class,\n            'url' => Site\\Navigation\\Link\\Url::class,\n        ],\n        'factories' => [\n            'browse' => Service\\Site\\Navigation\\Link\\BrowseFactory::class,\n            'browseItemSets' => Service\\Site\\Navigation\\Link\\BrowseItemSetsFactory::class,\n        ],\n    ],\n    'media_ingesters' => [\n        'factories' => [\n            'upload' => Service\\Media\\Ingester\\UploadFactory::class,\n            'url' => Service\\Media\\Ingester\\UrlFactory::class,\n            'html' => Service\\Media\\Ingester\\HtmlFactory::class,\n            'iiif' => Service\\Media\\Ingester\\IIIFFactory::class,\n            'iiif_presentation' => Service\\Media\\Ingester\\IiifPresentationFactory::class,\n            'oembed' => Service\\Media\\Ingester\\OEmbedFactory::class,\n            'youtube' => Service\\Media\\Ingester\\YoutubeFactory::class,\n        ],\n    ],\n    'media_renderers' => [\n        'invokables' => [\n            'oembed' => Media\\Renderer\\OEmbed::class,\n            'youtube' => Media\\Renderer\\Youtube::class,\n            'html' => Media\\Renderer\\Html::class,\n            'iiif' => Media\\Renderer\\IIIF::class,\n            'iiif_presentation' => Media\\Renderer\\IiifPresentation::class,\n        ],\n        'factories' => [\n            'file' => Service\\Media\\Renderer\\FileFactory::class,\n        ],\n    ],\n    'file_renderers' => [\n        'invokables' => [\n            'fallback' => Media\\FileRenderer\\FallbackRenderer::class,\n            'thumbnail' => Media\\FileRenderer\\ThumbnailRenderer::class,\n            'audio' => Media\\FileRenderer\\AudioRenderer::class,\n            'video' => Media\\FileRenderer\\VideoRenderer::class,\n        ],\n        'aliases' => [\n            'audio/ogg' => 'audio',\n            'audio/x-aac' => 'audio',\n            'audio/mpeg' => 'audio',\n            'audio/mp4' => 'audio',\n            'audio/x-wav' => 'audio',\n            'audio/x-aiff' => 'audio',\n            'application/ogg' => 'video',\n            'video/mp4' => 'video',\n            'video/quicktime' => 'video',\n            'video/x-msvideo' => 'video',\n            'video/ogg' => 'video',\n            'video/webm' => 'video',\n            'mp3' => 'audio',\n        ],\n    ],\n    'oembed' => [\n        'whitelist' => [\n            '#^https?://(www\\.)?youtube\\.com/watch.*$#i',\n            '#^https?://(www\\.)?youtube\\.com/playlist.*$#i',\n            '#^https?://youtu\\.be/.*$#i',\n            '#^http://blip.tv/*$#',\n            '#^https?://(.+\\.)?vimeo\\.com/.*$#i',\n            '#^https?://(www\\.)?dailymotion\\.com/.*$#i',\n            '#^http://dai.ly/*$#',\n            '#^https?://(www\\.)?flickr\\.com/.*$#i',\n            '#^https?://flic\\.kr/.*$#i',\n            '#^https?://(.+\\.)?smugmug\\.com/.*$#i',\n            '#^https?://(www\\.)?hulu\\.com/watch/.*$#i',\n            '#^http://revision3.com/*$#',\n            '#^http://i*.photobucket.com/albums/*$#',\n            '#^http://gi*.photobucket.com/groups/*$#',\n            '#^https?://(www\\.)?scribd\\.com/doc/.*$#i',\n            '#^https?://wordpress.tv/.*$#i',\n            '#^https?://(.+\\.)?polldaddy\\.com/.*$#i',\n            '#^https?://poll\\.fm/.*$#i',\n            '#^https?://(www\\.)?funnyordie\\.com/videos/.*$#i',\n            '#^https?://(www\\.)?twitter\\.com/.+?/status(es)?/.*$#i',\n            '#^https?://(www\\.)?soundcloud\\.com/.*$#i',\n            '#^https?://(www\\.)?slideshare\\.net/.*$#i',\n            '#^https?://(www\\.)?rdio\\.com/.*$#i',\n            '#^https?://rd\\.io/x/.*$#i',\n            '#^https?://(open|play)\\.spotify\\.com/.*$#i',\n            '#^https?://(.+\\.)?imgur\\.com/.*$#i',\n            '#^https?://(www\\.)?meetu(\\.ps|p\\.com)/.*$#i',\n            '#^https?://(www\\.)?issuu\\.com/.+/docs/.+$#i',\n            '#^https?://(www\\.)?collegehumor\\.com/video/.*$#i',\n            '#^https?://(www\\.)?mixcloud\\.com/.*$#i',\n            '#^https?://(www\\.|embed\\.)?ted\\.com/talks/.*$#i',\n            '#^https?://(www\\.)?(animoto|video214)\\.com/play/.*$#i',\n        ],\n    ],\n    'mail' => [\n        'transport' => [\n            'type' => 'sendmail',\n            'options' => [],\n        ],\n        'default_message_options' => [\n            'encoding' => 'UTF-8',\n        ],\n    ],\n    'js_translate_strings' => [\n        'Something went wrong', // @translate\n        'Make private', // @translate\n        'Make public', // @translate\n        'Expand', // @translate\n        'Collapse', // @translate\n        'You have unsaved changes.', // @translate\n        'Restore item set', // @translate\n        'Close icon set', // @translate\n        'Open icon set', // @translate\n        '[Untitled]', // @translate\n        'Failed loading resource template from API', // @translate\n        'Restore property', // @translate\n        'There are no available pages.', // @translate\n        'Please enter a valid language tag', // @translate\n        'Title', // @translate\n        'Description', // @translate\n        'Unknown block layout', // @translate\n        'Required field must be completed', // @translate\n    ],\n];\n", "<?php\nnamespace Omeka\\Api\\Adapter;\n\nuse Doctrine\\ORM\\QueryBuilder;\nuse Omeka\\Api\\Request;\nuse Omeka\\Entity\\EntityInterface;\nuse Omeka\\File\\Validator;\nuse Omeka\\Stdlib\\ErrorStore;\n\nclass AssetAdapter extends AbstractEntityAdapter\n{\n    protected $sortFields = [\n        'id' => 'id',\n        'media_type' => 'mediaType',\n        'name' => 'name',\n        'extension' => 'extension',\n    ];\n\n    public function getResourceName()\n    {\n        return 'assets';\n    }\n\n    public function getRepresentationClass()\n    {\n        return \\Omeka\\Api\\Representation\\AssetRepresentation::class;\n    }\n\n    public function getEntityClass()\n    {\n        return \\Omeka\\Entity\\Asset::class;\n    }\n\n    public function buildQuery(QueryBuilder $qb, array $query)\n    {\n        if (isset($query['owner_id']) && is_numeric($query['owner_id'])) {\n            $userAlias = $this->createAlias();\n            if (0 == $query['owner_id']) {\n                // Search assets without an owner.\n                $qb->andWhere($qb->expr()->isNull('omeka_root.owner'));\n            } else {\n                $qb->innerJoin(\n                    'omeka_root.owner',\n                    $userAlias\n                );\n                $qb->andWhere($qb->expr()->eq(\n                    \"$userAlias.id\",\n                    $this->createNamedParameter($qb, $query['owner_id']))\n                );\n            }\n        }\n    }\n\n    public function hydrate(Request $request, EntityInterface $entity, ErrorStore $errorStore)\n    {\n        $data = $request->getContent();\n\n        if (Request::CREATE === $request->getOperation()) {\n            $fileData = $request->getFileData();\n            if (!isset($fileData['file'])) {\n                $errorStore->addError('file', 'No file was uploaded');\n                return;\n            }\n\n            $uploader = $this->getServiceLocator()->get('Omeka\\File\\Uploader');\n            $tempFile = $uploader->upload($fileData['file'], $errorStore);\n            if (!$tempFile) {\n                return;\n            }\n\n            $tempFile->setSourceName($fileData['file']['name']);\n            $config = $this->getServiceLocator()->get('Config');\n            $validator = new Validator($config['api_assets']['allowed_media_types']);\n            if (!$validator->validate($tempFile, $errorStore)) {\n                return;\n            }\n\n            $this->hydrateOwner($request, $entity);\n            $entity->setStorageId($tempFile->getStorageId());\n            $entity->setExtension($tempFile->getExtension());\n            $entity->setMediaType($tempFile->getMediaType());\n            $entity->setName($request->getValue('o:name', $fileData['file']['name']));\n\n            $tempFile->storeAsset();\n            $tempFile->delete();\n        } else {\n            if ($this->shouldHydrate($request, 'o:name')) {\n                $entity->setName($request->getValue('o:name'));\n            }\n        }\n\n        if ($this->shouldHydrate($request, 'o:alt_text')) {\n            $entity->setAltText($request->getValue('o:alt_text'));\n        }\n    }\n\n    public function validateEntity(EntityInterface $entity, ErrorStore $errorStore)\n    {\n        // Don't add this name error if we have any other errors already\n        if ($errorStore->hasErrors()) {\n            return;\n        }\n\n        $name = $entity->getName();\n        if (!is_string($name) || $name === '') {\n            $errorStore->addError('o:name', 'An asset must have a name.');\n        }\n    }\n}\n"], "fixing_code": ["<?php\nnamespace Omeka;\n\nreturn [\n    'password' => [\n        'min_length' => 6,\n        'min_lowercase' => null,\n        'min_uppercase' => null,\n        'min_number' => null,\n        'min_symbol' => null,\n        'symbol_list' => '`~!@#$%^&*()-=_+[]\\{}|;:\",./<>?\\'',\n    ],\n    'session' => [\n        'config' => [],\n        'save_handler' => null,\n    ],\n    'listeners' => [\n        'ModuleRouteListener',\n        'Omeka\\MvcExceptionListener',\n        'Omeka\\MvcListeners',\n    ],\n    'view_manager' => [\n        'display_not_found_reason' => true,\n        'display_exceptions' => true,\n        'doctype' => 'HTML5',\n        'not_found_template' => 'error/404',\n        'exception_template' => 'error/index',\n        'template_path_stack' => [\n            OMEKA_PATH . '/application/view',\n        ],\n        'strategies' => [\n            'Omeka\\ViewApiJsonStrategy',\n        ],\n    ],\n    'assets' => [\n        'use_externals' => true,\n        'externals' => [\n            'Omeka' => [\n                'vendor/jquery/jquery.min.js' => 'https://code.jquery.com/jquery-3.6.2.min.js',\n            ],\n        ],\n    ],\n    'api_assets' => [\n        'allowed_media_types' => [\n            'image/jpeg',\n            'image/png',\n            'image/gif',\n            'image/webp',\n        ],\n        'allowed_extensions' => [\n            'jpeg',\n            'jpg',\n            'png',\n            'gif',\n            'webp',\n        ],\n    ],\n    'permissions' => [\n        'acl_resources' => [\n            'Omeka\\Module\\Manager',\n        ],\n    ],\n    'temp_dir' => sys_get_temp_dir(),\n    'file_store' => [\n        'local' => [\n            'base_path' => null,\n            'base_uri' => null,\n        ],\n    ],\n    'entity_manager' => [\n        'is_dev_mode' => false,\n        'mapping_classes_paths' => [\n            OMEKA_PATH . '/application/src/Entity',\n        ],\n        'resource_discriminator_map' => [\n            'Omeka\\Entity\\Item' => Entity\\Item::class,\n            'Omeka\\Entity\\Media' => Entity\\Media::class,\n            'Omeka\\Entity\\ItemSet' => Entity\\ItemSet::class,\n            'Omeka\\Entity\\ValueAnnotation' => Entity\\ValueAnnotation::class,\n        ],\n        'filters' => [\n            'resource_visibility' => Db\\Filter\\ResourceVisibilityFilter::class,\n            'site_page_visibility' => Db\\Filter\\SitePageVisibilityFilter::class,\n            'value_visibility' => Db\\Filter\\ValueVisibilityFilter::class,\n        ],\n        'functions' => [\n             'datetime' => [\n                'convert_tz' => \\DoctrineExtensions\\Query\\Mysql\\ConvertTz::class,\n                'date' => \\DoctrineExtensions\\Query\\Mysql\\Date::class,\n                'date_format' => \\DoctrineExtensions\\Query\\Mysql\\DateFormat::class,\n                'dateadd' => \\DoctrineExtensions\\Query\\Mysql\\DateAdd::class,\n                'datesub' => \\DoctrineExtensions\\Query\\Mysql\\DateSub::class,\n                'datediff' => \\DoctrineExtensions\\Query\\Mysql\\DateDiff::class,\n                'day' => \\DoctrineExtensions\\Query\\Mysql\\Day::class,\n                'dayname' => \\DoctrineExtensions\\Query\\Mysql\\DayName::class,\n                'dayofweek' => \\DoctrineExtensions\\Query\\Mysql\\DayOfWeek::class,\n                'dayofyear' => \\DoctrineExtensions\\Query\\Mysql\\DayOfYear::class,\n                'div' => \\DoctrineExtensions\\Query\\Mysql\\Div::class,\n                'from_unixtime' => \\DoctrineExtensions\\Query\\Mysql\\FromUnixtime::class,\n                'hour' => \\DoctrineExtensions\\Query\\Mysql\\Hour::class,\n                'last_day' => \\DoctrineExtensions\\Query\\Mysql\\LastDay::class,\n                'minute' => \\DoctrineExtensions\\Query\\Mysql\\Minute::class,\n                'now' => \\DoctrineExtensions\\Query\\Mysql\\Now::class,\n                'month' => \\DoctrineExtensions\\Query\\Mysql\\Month::class,\n                'monthname' => \\DoctrineExtensions\\Query\\Mysql\\MonthName::class,\n                'second' => \\DoctrineExtensions\\Query\\Mysql\\Second::class,\n                'strtodate' => \\DoctrineExtensions\\Query\\Mysql\\StrToDate::class,\n                'time' => \\DoctrineExtensions\\Query\\Mysql\\Time::class,\n                'timediff' => \\DoctrineExtensions\\Query\\Mysql\\TimeDiff::class,\n                'timestampadd' => \\DoctrineExtensions\\Query\\Mysql\\TimestampAdd::class,\n                'timestampdiff' => \\DoctrineExtensions\\Query\\Mysql\\TimestampDiff::class,\n                'timetosec' => \\DoctrineExtensions\\Query\\Mysql\\TimeToSec::class,\n                'week' => \\DoctrineExtensions\\Query\\Mysql\\Week::class,\n                'weekday' => \\DoctrineExtensions\\Query\\Mysql\\WeekDay::class,\n                'year' => \\DoctrineExtensions\\Query\\Mysql\\Year::class,\n                'yearweek' => \\DoctrineExtensions\\Query\\Mysql\\YearWeek::class,\n                'unix_timestamp' => \\DoctrineExtensions\\Query\\Mysql\\UnixTimestamp::class,\n            ],\n            'numeric' => [\n                'acos' => \\DoctrineExtensions\\Query\\Mysql\\Acos::class,\n                'asin' => \\DoctrineExtensions\\Query\\Mysql\\Asin::class,\n                'atan2' => \\DoctrineExtensions\\Query\\Mysql\\Atan2::class,\n                'atan' => \\DoctrineExtensions\\Query\\Mysql\\Atan::class,\n                'bit_count' => \\DoctrineExtensions\\Query\\Mysql\\BitCount::class,\n                'bit_xor' => \\DoctrineExtensions\\Query\\Mysql\\BitXor::class,\n                'ceil' => \\DoctrineExtensions\\Query\\Mysql\\Ceil::class,\n                'cos' => \\DoctrineExtensions\\Query\\Mysql\\Cos::class,\n                'cot' => \\DoctrineExtensions\\Query\\Mysql\\Cot::class,\n                'floor' => \\DoctrineExtensions\\Query\\Mysql\\Floor::class,\n                'pi' => \\DoctrineExtensions\\Query\\Mysql\\Pi::class,\n                'power' => \\DoctrineExtensions\\Query\\Mysql\\Power::class,\n                'quarter' => \\DoctrineExtensions\\Query\\Mysql\\Quarter::class,\n                'rand' => \\DoctrineExtensions\\Query\\Mysql\\Rand::class,\n                'round' => \\DoctrineExtensions\\Query\\Mysql\\Round::class,\n                'stddev' => \\DoctrineExtensions\\Query\\Mysql\\StdDev::class,\n                'sin' => \\DoctrineExtensions\\Query\\Mysql\\Sin::class,\n                'std' => \\DoctrineExtensions\\Query\\Mysql\\Std::class,\n                'tan' => \\DoctrineExtensions\\Query\\Mysql\\Tan::class,\n            ],\n            'string' => [\n                'ascii' => \\DoctrineExtensions\\Query\\Mysql\\Ascii::class,\n                'binary' => \\DoctrineExtensions\\Query\\Mysql\\Binary::class,\n                'char_length' => \\DoctrineExtensions\\Query\\Mysql\\CharLength::class,\n                'concat_ws' => \\DoctrineExtensions\\Query\\Mysql\\ConcatWs::class,\n                'countif' => \\DoctrineExtensions\\Query\\Mysql\\CountIf::class,\n                'crc32' => \\DoctrineExtensions\\Query\\Mysql\\Crc32::class,\n                'degrees' => \\DoctrineExtensions\\Query\\Mysql\\Degrees::class,\n                'field' => \\DoctrineExtensions\\Query\\Mysql\\Field::class,\n                'find_in_set' => \\DoctrineExtensions\\Query\\Mysql\\FindInSet::class,\n                'greatest' => \\DoctrineExtensions\\Query\\Mysql\\Greatest::class,\n                'group_concat' => \\DoctrineExtensions\\Query\\Mysql\\GroupConcat::class,\n                'ifelse' => \\DoctrineExtensions\\Query\\Mysql\\IfElse::class,\n                'ifnull' => \\DoctrineExtensions\\Query\\Mysql\\IfNull::class,\n                'least' => \\DoctrineExtensions\\Query\\Mysql\\Least::class,\n                'lpad' => \\DoctrineExtensions\\Query\\Mysql\\Lpad::class,\n                'match' => \\DoctrineExtensions\\Query\\Mysql\\MatchAgainst::class,\n                'md5' => \\DoctrineExtensions\\Query\\Mysql\\Md5::class,\n                'nullif' => \\DoctrineExtensions\\Query\\Mysql\\NullIf::class,\n                'radians' => \\DoctrineExtensions\\Query\\Mysql\\Radians::class,\n                'regexp' => \\DoctrineExtensions\\Query\\Mysql\\Regexp::class,\n                'replace' => \\DoctrineExtensions\\Query\\Mysql\\Replace::class,\n                'rpad' => \\DoctrineExtensions\\Query\\Mysql\\Rpad::class,\n                'sha1' => \\DoctrineExtensions\\Query\\Mysql\\Sha1::class,\n                'sha2' => \\DoctrineExtensions\\Query\\Mysql\\Sha2::class,\n                'soundex' => \\DoctrineExtensions\\Query\\Mysql\\Soundex::class,\n                'substring_index' => \\DoctrineExtensions\\Query\\Mysql\\SubstringIndex::class,\n                'uuid_short' => \\DoctrineExtensions\\Query\\Mysql\\UuidShort::class,\n                'hex' => \\DoctrineExtensions\\Query\\Mysql\\Hex::class,\n                'unhex' => \\DoctrineExtensions\\Query\\Mysql\\Unhex::class,\n            ],\n        ],\n        'proxy_paths' => [\n            OMEKA_PATH . '/application/data/doctrine-proxies',\n        ],\n    ],\n    'installer' => [\n        'pre_tasks' => [\n            Installation\\Task\\CheckEnvironmentTask::class,\n            Installation\\Task\\CheckDirPermissionsTask::class,\n        ],\n        'tasks' => [\n            Installation\\Task\\DestroySessionTask::class,\n            Installation\\Task\\ClearCacheTask::class,\n            Installation\\Task\\InstallSchemaTask::class,\n            Installation\\Task\\RecordMigrationsTask::class,\n            Installation\\Task\\InstallDefaultVocabulariesTask::class,\n            Installation\\Task\\InstallDefaultTemplatesTask::class,\n            Installation\\Task\\CreateFirstUserTask::class,\n            Installation\\Task\\AddDefaultSettingsTask::class,\n        ],\n    ],\n    'translator' => [\n        'locale' => 'en_US',\n        'translation_file_patterns' => [\n            [\n                'type' => 'gettext',\n                'base_dir' => OMEKA_PATH . '/application/language',\n                'pattern' => '%s.mo',\n                'text_domain' => null,\n            ],\n        ],\n    ],\n    'logger' => [\n        'log' => false,\n        'path' => OMEKA_PATH . '/logs/application.log',\n        'priority' => \\Laminas\\Log\\Logger::NOTICE,\n    ],\n    'http_client' => [\n        'adapter' => \\Laminas\\Http\\Client\\Adapter\\Socket::class,\n        'sslcapath' => null,\n        'sslcafile' => null,\n    ],\n    'cli' => [\n        'execute_strategy' => 'auto',\n        'phpcli_path' => null,\n    ],\n    'thumbnails' => [\n        'types' => [\n            'large' => [\n                'strategy' => 'default',\n                'constraint' => 800,\n                'options' => [],\n            ],\n            'medium' => [\n                'strategy' => 'default',\n                'constraint' => 400,\n                'options' => [],\n            ],\n            'square' => [\n                'strategy' => 'square',\n                'constraint' => 200,\n                'options' => [\n                    'gravity' => 'center',\n                ],\n            ],\n        ],\n        'fallbacks' => [\n            'default' => ['thumbnails/default.png', 'Omeka'],\n            'fallbacks' => [\n                'image' => ['thumbnails/image.png', 'Omeka'],\n                'video' => ['thumbnails/video.png', 'Omeka'],\n                'audio' => ['thumbnails/audio.png', 'Omeka'],\n            ],\n        ],\n        'thumbnailer_options' => [\n            'imagemagick_dir' => null,\n            'page' => 0,\n        ],\n    ],\n    'service_manager' => [\n        'abstract_factories' => [\n            \\Laminas\\Navigation\\Service\\NavigationAbstractServiceFactory::class,\n        ],\n        'factories' => [\n            'Omeka\\Acl' => Service\\AclFactory::class,\n            'Omeka\\ApiAdapterManager' => Service\\ApiAdapterManagerFactory::class,\n            'Omeka\\ApiManager' => Service\\ApiManagerFactory::class,\n            'Omeka\\AuthenticationService' => Service\\AuthenticationServiceFactory::class,\n            'Omeka\\EntityManager' => Service\\EntityManagerFactory::class,\n            'Omeka\\Installer' => Service\\InstallerFactory::class,\n            'Omeka\\Logger' => Service\\LoggerFactory::class,\n            'Omeka\\MigrationManager' => Service\\MigrationManagerFactory::class,\n            'Omeka\\ViewApiJsonStrategy' => Service\\ViewApiJsonStrategyFactory::class,\n            'Omeka\\HttpClient' => Service\\HttpClientFactory::class,\n            'Omeka\\Mailer' => Service\\MailerFactory::class,\n            'Omeka\\HtmlPurifier' => Service\\HtmlPurifierFactory::class,\n            'Omeka\\BlockLayoutManager' => Service\\BlockLayoutManagerFactory::class,\n            'Omeka\\ResourcePageBlockLayoutManager' => Service\\ResourcePageBlockLayoutManagerFactory::class,\n            'Omeka\\DataTypeManager' => Service\\DataTypeManagerFactory::class,\n            'Omeka\\Cli' => Service\\CliFactory::class,\n            'Omeka\\Paginator' => Service\\PaginatorFactory::class,\n            'Omeka\\RdfImporter' => Service\\RdfImporterFactory::class,\n            'Omeka\\Site\\ThemeManager' => Service\\ThemeManagerFactory::class,\n            'Omeka\\Site\\NavigationLinkManager' => Service\\NavigationLinkManagerFactory::class,\n            'Omeka\\Site\\NavigationTranslator' => Service\\SiteNavigationTranslatorFactory::class,\n            'Omeka\\File\\Thumbnailer\\ImageMagick' => Service\\File\\Thumbnailer\\ImageMagickFactory::class,\n            'Omeka\\File\\Thumbnailer\\Gd' => Service\\File\\Thumbnailer\\GdFactory::class,\n            'Omeka\\File\\Thumbnailer\\Imagick' => Service\\File\\Thumbnailer\\ImagickFactory::class,\n            'Omeka\\File\\Thumbnailer\\NoThumbnail' => Service\\File\\Thumbnailer\\NoThumbnailFactory::class,\n            'Omeka\\File\\Store\\Local' => Service\\File\\Store\\LocalFactory::class,\n            'Omeka\\File\\MediaTypeMap' => Service\\MediaTypeMapFactory::class,\n            'Omeka\\File\\ThumbnailManager' => Service\\File\\ThumbnailManagerFactory::class,\n            'Omeka\\File\\TempFileFactory' => Service\\File\\TempFileFactoryFactory::class,\n            'Omeka\\File\\Downloader' => Service\\File\\DownloaderFactory::class,\n            'Omeka\\File\\Uploader' => Service\\File\\UploaderFactory::class,\n            'Omeka\\File\\Validator' => Service\\File\\ValidatorFactory::class,\n            'Omeka\\Settings' => Service\\Settings\\SettingsFactory::class,\n            'Omeka\\Settings\\Site' => Service\\Settings\\SiteSettingsFactory::class,\n            'Omeka\\Settings\\User' => Service\\Settings\\UserSettingsFactory::class,\n            'Omeka\\Job\\Dispatcher' => Service\\Job\\DispatcherFactory::class,\n            'Omeka\\Job\\DispatchStrategy\\PhpCli' => Service\\Job\\DispatchStrategy\\PhpCliFactory::class,\n            'Omeka\\Job\\DispatchStrategy\\Synchronous' => Service\\Job\\DispatchStrategy\\SynchronousFactory::class,\n            'Omeka\\Media\\Ingester\\Manager' => Service\\Media\\Ingester\\ManagerFactory::class,\n            'Omeka\\Media\\Renderer\\Manager' => Service\\Media\\Renderer\\ManagerFactory::class,\n            'Omeka\\Media\\FileRenderer\\Manager' => Service\\Media\\FileRenderer\\ManagerFactory::class,\n            'Omeka\\FulltextSearch' => Service\\FulltextSearchFactory::class,\n            'Omeka\\Environment' => Service\\EnvironmentFactory::class,\n            'Omeka\\ColumnTypeManager' => Service\\ColumnType\\ManagerFactory::class,\n            'Omeka\\Browse' => Service\\BrowseFactory::class,\n        ],\n        'invokables' => [\n            'ModuleRouteListener' => \\Laminas\\Mvc\\ModuleRouteListener::class,\n            'Omeka\\MvcExceptionListener' => Mvc\\ExceptionListener::class,\n            'Omeka\\MvcListeners' => Mvc\\MvcListeners::class,\n            'Omeka\\ViewApiJsonRenderer' => View\\Renderer\\ApiJsonRenderer::class,\n        ],\n        'delegators' => [\n            'Laminas\\I18n\\Translator\\TranslatorInterface' => [\n                'Omeka\\Service\\Delegator\\TranslatorDelegatorFactory',\n            ],\n        ],\n        'aliases' => [\n            'Omeka\\File\\Store' => 'Omeka\\File\\Store\\Local',\n            'Omeka\\File\\Thumbnailer' => 'Omeka\\File\\Thumbnailer\\ImageMagick',\n            'Omeka\\Job\\DispatchStrategy' => 'Omeka\\Job\\DispatchStrategy\\PhpCli',\n            'Omeka\\JobDispatcher' => 'Omeka\\Job\\Dispatcher',\n            'Laminas\\Authentication\\AuthenticationService' => 'Omeka\\AuthenticationService',\n        ],\n        'shared' => [\n            'Omeka\\Paginator' => false,\n            'Omeka\\HttpClient' => false,\n        ],\n    ],\n    'controllers' => [\n        'invokables' => [\n            'Omeka\\Controller\\Index' => Controller\\IndexController::class,\n            'Omeka\\Controller\\IiifViewer' => Controller\\IiifViewerController::class,\n            'Omeka\\Controller\\Search' => Controller\\SearchController::class,\n            'Omeka\\Controller\\Maintenance' => Controller\\MaintenanceController::class,\n            'Omeka\\Controller\\Site\\Index' => Controller\\Site\\IndexController::class,\n            'Omeka\\Controller\\Site\\Item' => Controller\\Site\\ItemController::class,\n            'Omeka\\Controller\\Site\\ItemSet' => Controller\\Site\\ItemSetController::class,\n            'Omeka\\Controller\\Site\\Media' => Controller\\Site\\MediaController::class,\n            'Omeka\\Controller\\Site\\Page' => Controller\\Site\\PageController::class,\n            'Omeka\\Controller\\Site\\CrossSiteSearch' => Controller\\Site\\CrossSiteSearchController::class,\n            'Omeka\\Controller\\Admin\\Asset' => Controller\\Admin\\AssetController::class,\n            'Omeka\\Controller\\Admin\\Query' => Controller\\Admin\\QueryController::class,\n            'Omeka\\Controller\\Admin\\Columns' => Controller\\Admin\\ColumnsController::class,\n            'Omeka\\Controller\\Admin\\Index' => Controller\\Admin\\IndexController::class,\n            'Omeka\\Controller\\Admin\\ItemSet' => Controller\\Admin\\ItemSetController::class,\n            'Omeka\\Controller\\Admin\\Job' => Controller\\Admin\\JobController::class,\n            'Omeka\\Controller\\Admin\\Media' => Controller\\Admin\\MediaController::class,\n            'Omeka\\Controller\\Admin\\Property' => Controller\\Admin\\PropertyController::class,\n            'Omeka\\Controller\\Admin\\ResourceClass' => Controller\\Admin\\ResourceClassController::class,\n            'Omeka\\Controller\\Admin\\Setting' => Controller\\Admin\\SettingController::class,\n            'Omeka\\Controller\\SiteAdmin\\Page' => Controller\\SiteAdmin\\PageController::class,\n        ],\n        'factories' => [\n            'Omeka\\Controller\\Login' => Service\\Controller\\LoginControllerFactory::class,\n            'Omeka\\Controller\\Api' => Service\\Controller\\ApiControllerFactory::class,\n            'Omeka\\Controller\\Install' => Service\\Controller\\InstallControllerFactory::class,\n            'Omeka\\Controller\\Migrate' => Service\\Controller\\MigrateControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Module' => Service\\Controller\\Admin\\ModuleControllerFactory::class,\n            'Omeka\\Controller\\Admin\\User' => Service\\Controller\\Admin\\UserControllerFactory::class,\n            'Omeka\\Controller\\Admin\\ResourceTemplate' => Service\\Controller\\Admin\\ResourceTemplateControllerFactory::class,\n            'Omeka\\Controller\\Admin\\SystemInfo' => Service\\Controller\\Admin\\SystemInfoControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Vocabulary' => Service\\Controller\\Admin\\VocabularyControllerFactory::class,\n            'Omeka\\Controller\\Admin\\Item' => Service\\Controller\\Admin\\ItemControllerFactory::class,\n            'Omeka\\Controller\\SiteAdmin\\Index' => Service\\Controller\\SiteAdmin\\IndexControllerFactory::class,\n        ],\n    ],\n    'controller_plugins' => [\n        'invokables' => [\n            'messenger' => Mvc\\Controller\\Plugin\\Messenger::class,\n            'setBrowseDefaults' => Mvc\\Controller\\Plugin\\SetBrowseDefaults::class,\n            'currentSite' => Mvc\\Controller\\Plugin\\CurrentSite::class,\n            'mergeValuesJson' => Mvc\\Controller\\Plugin\\MergeValuesJson::class,\n        ],\n        'factories' => [\n            'api' => Service\\ControllerPlugin\\ApiFactory::class,\n            'jobDispatcher' => Service\\ControllerPlugin\\JobDispatcherFactory::class,\n            'logger' => Service\\ControllerPlugin\\LoggerFactory::class,\n            'paginator' => Service\\ControllerPlugin\\PaginatorFactory::class,\n            'translate' => Service\\ControllerPlugin\\TranslateFactory::class,\n            'getForm' => Service\\ControllerPlugin\\GetFormFactory::class,\n            'userIsAllowed' => Service\\ControllerPlugin\\UserIsAllowedFactory::class,\n            'mailer' => Service\\ControllerPlugin\\MailerFactory::class,\n            'settings' => Service\\ControllerPlugin\\SettingsFactory::class,\n            'siteSettings' => Service\\ControllerPlugin\\SiteSettingsFactory::class,\n            'userSettings' => Service\\ControllerPlugin\\UserSettingsFactory::class,\n            'status' => Service\\ControllerPlugin\\StatusFactory::class,\n            'viewHelpers' => Service\\ControllerPlugin\\ViewHelpersFactory::class,\n            'browse' => Service\\ControllerPlugin\\BrowseFactory::class,\n        ],\n    ],\n    'api_adapters' => [\n        'invokables' => [\n            'users' => Api\\Adapter\\UserAdapter::class,\n            'vocabularies' => Api\\Adapter\\VocabularyAdapter::class,\n            'resource_classes' => Api\\Adapter\\ResourceClassAdapter::class,\n            'resource_templates' => Api\\Adapter\\ResourceTemplateAdapter::class,\n            'properties' => Api\\Adapter\\PropertyAdapter::class,\n            'items' => Api\\Adapter\\ItemAdapter::class,\n            'media' => Api\\Adapter\\MediaAdapter::class,\n            'item_sets' => Api\\Adapter\\ItemSetAdapter::class,\n            'value_annotations' => Api\\Adapter\\ValueAnnotationAdapter::class,\n            'modules' => Api\\Adapter\\ModuleAdapter::class,\n            'sites' => Api\\Adapter\\SiteAdapter::class,\n            'site_pages' => Api\\Adapter\\SitePageAdapter::class,\n            'jobs' => Api\\Adapter\\JobAdapter::class,\n            'resources' => Api\\Adapter\\ResourceAdapter::class,\n            'assets' => Api\\Adapter\\AssetAdapter::class,\n            'api_resources' => Api\\Adapter\\ApiResourceAdapter::class,\n            'data_types' => Api\\Adapter\\DataTypeAdapter::class,\n        ],\n    ],\n    'view_helpers' => [\n        'invokables' => [\n            'pageTitle' => View\\Helper\\PageTitle::class,\n            'htmlElement' => View\\Helper\\HtmlElement::class,\n            'hyperlink' => View\\Helper\\Hyperlink::class,\n            'messages' => View\\Helper\\Messages::class,\n            'sortLink' => View\\Helper\\SortLink::class,\n            'sortSelector' => View\\Helper\\SortSelector::class,\n            'filterSelector' => View\\Helper\\FilterSelector::class,\n            'propertySelector' => View\\Helper\\PropertySelector::class,\n            'itemSetSelector' => View\\Helper\\ItemSetSelector::class,\n            'siteSelector' => View\\Helper\\SiteSelector::class,\n            'userSelector' => View\\Helper\\UserSelector::class,\n            'searchFilters' => View\\Helper\\SearchFilters::class,\n            'blockAttachmentsForm' => View\\Helper\\BlockAttachmentsForm::class,\n            'blockShowTitleSelect' => View\\Helper\\BlockShowTitleSelect::class,\n            'ckEditor' => View\\Helper\\CkEditor::class,\n            'sitePagePagination' => View\\Helper\\SitePagePagination::class,\n            'sectionNav' => View\\Helper\\SectionNav::class,\n            'uploadLimit' => View\\Helper\\UploadLimit::class,\n            'formRecaptcha' => Form\\View\\Helper\\FormRecaptcha::class,\n            'formCkeditor' => Form\\View\\Helper\\FormCkeditor::class,\n            'formCkeditorInline' => Form\\View\\Helper\\FormCkeditorInline::class,\n            'formRestoreTextarea' => Form\\View\\Helper\\FormRestoreTextarea::class,\n            'formCollectionElementGroups' => Form\\View\\Helper\\FormCollectionElementGroups::class,\n            'queryToHiddenInputs' => View\\Helper\\QueryToHiddenInputs::class,\n            'formAsset' => Form\\View\\Helper\\FormAsset::class,\n            'formQuery' => Form\\View\\Helper\\FormQuery::class,\n            'formColumns' => Form\\View\\Helper\\FormColumns::class,\n            'formBrowseDefaults' => Form\\View\\Helper\\FormBrowseDefaults::class,\n            'themeSettingAsset' => View\\Helper\\ThemeSettingAsset::class,\n            'themeSettingAssetUrl' => View\\Helper\\ThemeSettingAssetUrl::class,\n            'formColorPicker' => Form\\View\\Helper\\FormColorPicker::class,\n            'thumbnail' => View\\Helper\\Thumbnail::class,\n            'userBar' => View\\Helper\\UserBar::class,\n            'cancelButton' => View\\Helper\\CancelButton::class,\n            'sortMedia' => View\\Helper\\SortMedia::class,\n            'lightGalleryOutput' => View\\Helper\\LightGalleryOutput::class,\n            'iiifViewer' => View\\Helper\\IiifViewer::class,\n            'currentSite' => View\\Helper\\CurrentSite::class,\n        ],\n        'factories' => [\n            'api' => Service\\ViewHelper\\ApiFactory::class,\n            'assetUrl' => Service\\ViewHelper\\AssetUrlFactory::class,\n            'blockLayout' => Service\\ViewHelper\\BlockLayoutFactory::class,\n            'blockThumbnailTypeSelect' => Service\\ViewHelper\\BlockThumbnailTypeSelectFactory::class,\n            'dataType' => Service\\ViewHelper\\DataTypeFactory::class,\n            'i18n' => Service\\ViewHelper\\I18nFactory::class,\n            'logger' => Service\\ViewHelper\\LoggerFactory::class,\n            'media' => Service\\ViewHelper\\MediaFactory::class,\n            'navigationLink' => Service\\ViewHelper\\NavigationLinkFactory::class,\n            'pagination' => Service\\ViewHelper\\PaginationFactory::class,\n            'params' => Service\\ViewHelper\\ParamsFactory::class,\n            'setting' => Service\\ViewHelper\\SettingFactory::class,\n            'userSetting' => Service\\ViewHelper\\UserSettingFactory::class,\n            'siteSetting' => Service\\ViewHelper\\SiteSettingFactory::class,\n            'themeSetting' => Service\\ViewHelper\\ThemeSettingFactory::class,\n            'trigger' => Service\\ViewHelper\\TriggerFactory::class,\n            'userIsAllowed' => Service\\ViewHelper\\UserIsAllowedFactory::class,\n            'deleteConfirm' => Service\\ViewHelper\\DeleteConfirmFactory::class,\n            'resourceClassSelect' => Service\\ViewHelper\\ResourceClassSelectFactory::class,\n            'resourceTemplateSelect' => Service\\ViewHelper\\ResourceTemplateSelectFactory::class,\n            'propertySelect' => Service\\ViewHelper\\PropertySelectFactory::class,\n            'itemSetSelect' => Service\\ViewHelper\\ItemSetSelectFactory::class,\n            'roleSelect' => Service\\ViewHelper\\RoleSelectFactory::class,\n            'userSelect' => Service\\ViewHelper\\UserSelectFactory::class,\n            'searchUserFilters' => Service\\ViewHelper\\SearchUserFiltersFactory::class,\n            'siteSelect' => Service\\ViewHelper\\SiteSelectFactory::class,\n            'resourceSelect' => Service\\ViewHelper\\ResourceSelectFactory::class,\n            'jsTranslate' => Service\\ViewHelper\\JsTranslateFactory::class,\n            'lang' => Service\\ViewHelper\\LangFactory::class,\n            'status' => Service\\ViewHelper\\StatusFactory::class,\n            'passwordRequirements' => Service\\ViewHelper\\PasswordRequirementsFactory::class,\n            'resourcePageBlocks' => Service\\ViewHelper\\ResourcePageBlocksFactory::class,\n            'browse' => Service\\ViewHelper\\BrowseFactory::class,\n        ],\n        'shared' => [\n            'resourcePageBlocks' => false,\n        ],\n        'delegators' => [\n            'Laminas\\Form\\View\\Helper\\FormElement' => [\n                Service\\Delegator\\FormElementDelegatorFactory::class,\n            ],\n            'Laminas\\Form\\View\\Helper\\FormSelect' => [\n                Service\\Delegator\\FormSelectDelegatorFactory::class,\n            ],\n            'Laminas\\Form\\View\\Helper\\FormRow' => [\n                Service\\Delegator\\FormRowDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\Navigation' => [\n                Service\\Delegator\\NavigationDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\HeadTitle' => [\n                Service\\Delegator\\HeadTitleDelegatorFactory::class,\n            ],\n            'Laminas\\View\\Helper\\Url' => [\n                Service\\Delegator\\UrlDelegatorFactory::class,\n            ],\n        ],\n    ],\n    'form_elements' => [\n        'initializers' => [\n            Form\\Initializer\\Csrf::class,\n        ],\n        'factories' => [\n            'Omeka\\Form\\ResourceForm' => Service\\Form\\ResourceFormFactory::class,\n            'Omeka\\Form\\ResourceBatchUpdateForm' => Service\\Form\\ResourceBatchUpdateFormFactory::class,\n            'Omeka\\Form\\UserForm' => Service\\Form\\UserFormFactory::class,\n            'Omeka\\Form\\SettingForm' => Service\\Form\\SettingFormFactory::class,\n            'Omeka\\Form\\ModuleStateChangeForm' => Service\\Form\\ModuleStateChangeFormFactory::class,\n            'Omeka\\Form\\SiteForm' => Service\\Form\\SiteFormFactory::class,\n            'Omeka\\Form\\SiteSettingsForm' => Service\\Form\\SiteSettingsFormFactory::class,\n            'Omeka\\Form\\UserBatchUpdateForm' => Service\\Form\\UserBatchUpdateFormFactory::class,\n            'Omeka\\Form\\Element\\ResourceSelect' => Service\\Form\\Element\\ResourceSelectFactory::class,\n            'Omeka\\Form\\Element\\ResourceClassSelect' => Service\\Form\\Element\\ResourceClassSelectFactory::class,\n            'Omeka\\Form\\Element\\ResourceTemplateSelect' => Service\\Form\\Element\\ResourceTemplateSelectFactory::class,\n            'Omeka\\Form\\Element\\PropertySelect' => Service\\Form\\Element\\PropertySelectFactory::class,\n            'Omeka\\Form\\Element\\ItemSetSelect' => Service\\Form\\Element\\ItemSetSelectFactory::class,\n            'Omeka\\Form\\Element\\SiteSelect' => Service\\Form\\Element\\SiteSelectFactory::class,\n            'Omeka\\Form\\Element\\LocaleSelect' => Service\\Form\\Element\\LocaleSelectFactory::class,\n            'Omeka\\Form\\Element\\RoleSelect' => Service\\Form\\Element\\RoleSelectFactory::class,\n            'Omeka\\Form\\Element\\UserSelect' => Service\\Form\\Element\\UserSelectFactory::class,\n            'Omeka\\Form\\Element\\Recaptcha' => Service\\Form\\Element\\RecaptchaFactory::class,\n            'Omeka\\Form\\Element\\HtmlTextarea' => Service\\Form\\Element\\HtmlTextareaFactory::class,\n            'Omeka\\Form\\Element\\Ckeditor' => Service\\Form\\Element\\CkeditorFactory::class,\n            'Omeka\\Form\\Element\\CkeditorInline' => Service\\Form\\Element\\CkeditorInlineFactory::class,\n            'Omeka\\Form\\Element\\PasswordConfirm' => Service\\Form\\Element\\PasswordConfirmFactory::class,\n            'Omeka\\Form\\Element\\SitePageSelect' => Service\\Form\\Element\\SitePageSelectFactory::class,\n        ],\n    ],\n    'data_types' => [\n        'invokables' => [\n            'literal' => DataType\\Literal::class,\n            'uri' => DataType\\Uri::class,\n            'resource' => DataType\\Resource\\All::class,\n            'resource:item' => DataType\\Resource\\Item::class,\n            'resource:itemset' => DataType\\Resource\\ItemSet::class,\n            'resource:media' => DataType\\Resource\\Media::class,\n        ],\n        'value_annotating' => [\n            'literal',\n            'uri',\n            'resource:item',\n            'resource:itemset',\n            'resource:media',\n        ]\n    ],\n    'column_types' => [\n        'invokables' => [\n            'created' => ColumnType\\Created::class,\n            'id' => ColumnType\\Id::class,\n            'is_open' => ColumnType\\IsOpen::class,\n            'is_public' => ColumnType\\IsPublic::class,\n            'media_type' => ColumnType\\MediaType::class,\n            'modified' => ColumnType\\Modified::class,\n            'owner' => ColumnType\\Owner::class,\n            'resource_class' => ColumnType\\ResourceClass::class,\n            'resource_template' => ColumnType\\ResourceTemplate::class,\n            'size' => ColumnType\\Size::class,\n            'slug' => ColumnType\\Slug::class,\n        ],\n        'factories' => [\n            'theme' => Service\\ColumnType\\ThemeFactory::class,\n            'value' => Service\\ColumnType\\ValueFactory::class,\n        ],\n    ],\n    'column_defaults' => [\n        'admin' => [\n            'items' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'item_sets' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'media' => [\n                ['type' => 'resource_class'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n            'sites' => [\n                ['type' => 'slug'],\n                ['type' => 'owner'],\n                ['type' => 'created'],\n            ],\n        ],\n        'public' => [],\n    ],\n    'browse_defaults' => [\n        'admin' => [\n            'items' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'item_sets' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'media' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n            'sites' => [\n                'sort_by' => 'title',\n                'sort_order' => 'asc',\n            ],\n            'assets' => [\n                'sort_by' => 'id',\n                'sort_order' => 'desc',\n            ],\n            'jobs' => [\n                'sort_by' => 'id',\n                'sort_order' => 'desc',\n            ],\n            'resource_templates' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'users' => [\n                'sort_by' => 'email',\n                'sort_order' => 'asc',\n            ],\n            'vocabularies' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'resource_classes' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'properties' => [\n                'sort_by' => 'label',\n                'sort_order' => 'asc',\n            ],\n            'site_pages' => [\n                'sort_by' => 'nav',\n                'sort_order' => 'asc',\n            ],\n        ],\n        'public' => [\n            'items' => [\n                'sort_by' => 'created',\n                'sort_order' => 'desc',\n            ],\n        ],\n    ],\n    'sort_defaults' => [\n        'admin' => [\n            'items' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'item_sets' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'media' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'sites' => [\n                'title' => 'Title', // @translate\n                'slug' => 'URL slug', // @translate\n                'owner_name' => 'Owner', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'assets' => [\n                'name' => 'Name', // @translate\n                'id' => 'ID', // @translate\n            ],\n            'jobs' => [\n                'id' => 'ID', // @translate\n                'class' => 'Class', // @translate\n                'status' => 'Status', // @translate\n                'owner_email' => 'Owner email', // @translate\n            ],\n            'resource_templates' => [\n                'label' => 'Label', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'owner_name' => 'Owner', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'users' => [\n                'email' => 'Email', // @translate\n                'role' => 'Role', // @translate\n                'created' => 'Created', // @translate\n            ],\n            'vocabularies' => [\n                'label' => 'Label', // @translate\n                'prefix' => 'Prefix', // @translate\n                'resource_class_count' => 'Resource class count', // @translate\n                'property_count' => 'Property count', // @translate\n            ],\n            'resource_classes' => [\n                'label' => 'Label', // @translate\n                'local_name' => 'Term', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'properties' => [\n                'label' => 'Label', // @translate\n                'local_name' => 'Term', // @translate\n                'item_count' => 'Item count', // @translate\n            ],\n            'site_pages' => [\n                'title' => 'Title', // @translate\n                'slug' => 'URL slug', // @translate\n                'created' => 'Created', // @translate\n                'modified' => 'Modified', // @translate\n                'nav' => 'Navigation', // @translate\n            ],\n        ],\n        'public' => [\n            'items' => [\n                'title' => 'Title', // @translate\n                'resource_class_label' => 'Resource class', // @translate\n                'created' => 'Created', // @translate\n            ],\n        ],\n    ],\n    'block_layouts' => [\n        'invokables' => [\n            'pageTitle' => Site\\BlockLayout\\PageTitle::class,\n            'media' => Site\\BlockLayout\\Media::class,\n            'browsePreview' => Site\\BlockLayout\\BrowsePreview::class,\n            'itemShowCase' => Site\\BlockLayout\\ItemShowcase::class,\n            'listOfSites' => Site\\BlockLayout\\ListOfSites::class,\n            'tableOfContents' => Site\\BlockLayout\\TableOfContents::class,\n            'lineBreak' => Site\\BlockLayout\\LineBreak::class,\n            'itemWithMetadata' => Site\\BlockLayout\\ItemWithMetadata::class,\n            'pageDateTime' => Site\\BlockLayout\\PageDateTime::class,\n        ],\n        'factories' => [\n            'asset' => Service\\BlockLayout\\AssetFactory::class,\n            'html' => Service\\BlockLayout\\HtmlFactory::class,\n            'listOfPages' => Service\\BlockLayout\\PageListFactory::class,\n        ],\n    ],\n    'resource_page_block_layouts' => [\n        'invokables' => [\n            'itemSets' => Site\\ResourcePageBlockLayout\\ItemSets::class,\n            'lightboxGallery' => Site\\ResourcePageBlockLayout\\LightboxGallery::class,\n            'linkedResources' => Site\\ResourcePageBlockLayout\\LinkedResources::class,\n            'mediaEmbeds' => Site\\ResourcePageBlockLayout\\MediaEmbeds::class,\n            'mediaList' => Site\\ResourcePageBlockLayout\\MediaList::class,\n            'mediaRender' => Site\\ResourcePageBlockLayout\\MediaRender::class,\n            'resourceClass' => Site\\ResourcePageBlockLayout\\ResourceClass::class,\n            'sitePages' => Site\\ResourcePageBlockLayout\\SitePages::class,\n            'values' => Site\\ResourcePageBlockLayout\\Values::class,\n        ],\n    ],\n    'resource_page_blocks_default' => [\n        'items' => [\n            'main' => [],\n        ],\n        'item_sets' => [\n            'main' => [],\n        ],\n        'media' => [\n            'main' => [],\n        ],\n    ],\n    'navigation_links' => [\n        'invokables' => [\n            'page' => Site\\Navigation\\Link\\Page::class,\n            'url' => Site\\Navigation\\Link\\Url::class,\n        ],\n        'factories' => [\n            'browse' => Service\\Site\\Navigation\\Link\\BrowseFactory::class,\n            'browseItemSets' => Service\\Site\\Navigation\\Link\\BrowseItemSetsFactory::class,\n        ],\n    ],\n    'media_ingesters' => [\n        'factories' => [\n            'upload' => Service\\Media\\Ingester\\UploadFactory::class,\n            'url' => Service\\Media\\Ingester\\UrlFactory::class,\n            'html' => Service\\Media\\Ingester\\HtmlFactory::class,\n            'iiif' => Service\\Media\\Ingester\\IIIFFactory::class,\n            'iiif_presentation' => Service\\Media\\Ingester\\IiifPresentationFactory::class,\n            'oembed' => Service\\Media\\Ingester\\OEmbedFactory::class,\n            'youtube' => Service\\Media\\Ingester\\YoutubeFactory::class,\n        ],\n    ],\n    'media_renderers' => [\n        'invokables' => [\n            'oembed' => Media\\Renderer\\OEmbed::class,\n            'youtube' => Media\\Renderer\\Youtube::class,\n            'html' => Media\\Renderer\\Html::class,\n            'iiif' => Media\\Renderer\\IIIF::class,\n            'iiif_presentation' => Media\\Renderer\\IiifPresentation::class,\n        ],\n        'factories' => [\n            'file' => Service\\Media\\Renderer\\FileFactory::class,\n        ],\n    ],\n    'file_renderers' => [\n        'invokables' => [\n            'fallback' => Media\\FileRenderer\\FallbackRenderer::class,\n            'thumbnail' => Media\\FileRenderer\\ThumbnailRenderer::class,\n            'audio' => Media\\FileRenderer\\AudioRenderer::class,\n            'video' => Media\\FileRenderer\\VideoRenderer::class,\n        ],\n        'aliases' => [\n            'audio/ogg' => 'audio',\n            'audio/x-aac' => 'audio',\n            'audio/mpeg' => 'audio',\n            'audio/mp4' => 'audio',\n            'audio/x-wav' => 'audio',\n            'audio/x-aiff' => 'audio',\n            'application/ogg' => 'video',\n            'video/mp4' => 'video',\n            'video/quicktime' => 'video',\n            'video/x-msvideo' => 'video',\n            'video/ogg' => 'video',\n            'video/webm' => 'video',\n            'mp3' => 'audio',\n        ],\n    ],\n    'oembed' => [\n        'whitelist' => [\n            '#^https?://(www\\.)?youtube\\.com/watch.*$#i',\n            '#^https?://(www\\.)?youtube\\.com/playlist.*$#i',\n            '#^https?://youtu\\.be/.*$#i',\n            '#^http://blip.tv/*$#',\n            '#^https?://(.+\\.)?vimeo\\.com/.*$#i',\n            '#^https?://(www\\.)?dailymotion\\.com/.*$#i',\n            '#^http://dai.ly/*$#',\n            '#^https?://(www\\.)?flickr\\.com/.*$#i',\n            '#^https?://flic\\.kr/.*$#i',\n            '#^https?://(.+\\.)?smugmug\\.com/.*$#i',\n            '#^https?://(www\\.)?hulu\\.com/watch/.*$#i',\n            '#^http://revision3.com/*$#',\n            '#^http://i*.photobucket.com/albums/*$#',\n            '#^http://gi*.photobucket.com/groups/*$#',\n            '#^https?://(www\\.)?scribd\\.com/doc/.*$#i',\n            '#^https?://wordpress.tv/.*$#i',\n            '#^https?://(.+\\.)?polldaddy\\.com/.*$#i',\n            '#^https?://poll\\.fm/.*$#i',\n            '#^https?://(www\\.)?funnyordie\\.com/videos/.*$#i',\n            '#^https?://(www\\.)?twitter\\.com/.+?/status(es)?/.*$#i',\n            '#^https?://(www\\.)?soundcloud\\.com/.*$#i',\n            '#^https?://(www\\.)?slideshare\\.net/.*$#i',\n            '#^https?://(www\\.)?rdio\\.com/.*$#i',\n            '#^https?://rd\\.io/x/.*$#i',\n            '#^https?://(open|play)\\.spotify\\.com/.*$#i',\n            '#^https?://(.+\\.)?imgur\\.com/.*$#i',\n            '#^https?://(www\\.)?meetu(\\.ps|p\\.com)/.*$#i',\n            '#^https?://(www\\.)?issuu\\.com/.+/docs/.+$#i',\n            '#^https?://(www\\.)?collegehumor\\.com/video/.*$#i',\n            '#^https?://(www\\.)?mixcloud\\.com/.*$#i',\n            '#^https?://(www\\.|embed\\.)?ted\\.com/talks/.*$#i',\n            '#^https?://(www\\.)?(animoto|video214)\\.com/play/.*$#i',\n        ],\n    ],\n    'mail' => [\n        'transport' => [\n            'type' => 'sendmail',\n            'options' => [],\n        ],\n        'default_message_options' => [\n            'encoding' => 'UTF-8',\n        ],\n    ],\n    'js_translate_strings' => [\n        'Something went wrong', // @translate\n        'Make private', // @translate\n        'Make public', // @translate\n        'Expand', // @translate\n        'Collapse', // @translate\n        'You have unsaved changes.', // @translate\n        'Restore item set', // @translate\n        'Close icon set', // @translate\n        'Open icon set', // @translate\n        '[Untitled]', // @translate\n        'Failed loading resource template from API', // @translate\n        'Restore property', // @translate\n        'There are no available pages.', // @translate\n        'Please enter a valid language tag', // @translate\n        'Title', // @translate\n        'Description', // @translate\n        'Unknown block layout', // @translate\n        'Required field must be completed', // @translate\n    ],\n];\n", "<?php\nnamespace Omeka\\Api\\Adapter;\n\nuse Doctrine\\ORM\\QueryBuilder;\nuse Omeka\\Api\\Request;\nuse Omeka\\Entity\\EntityInterface;\nuse Omeka\\File\\Validator;\nuse Omeka\\Stdlib\\ErrorStore;\n\nclass AssetAdapter extends AbstractEntityAdapter\n{\n    protected $sortFields = [\n        'id' => 'id',\n        'media_type' => 'mediaType',\n        'name' => 'name',\n        'extension' => 'extension',\n    ];\n\n    public function getResourceName()\n    {\n        return 'assets';\n    }\n\n    public function getRepresentationClass()\n    {\n        return \\Omeka\\Api\\Representation\\AssetRepresentation::class;\n    }\n\n    public function getEntityClass()\n    {\n        return \\Omeka\\Entity\\Asset::class;\n    }\n\n    public function buildQuery(QueryBuilder $qb, array $query)\n    {\n        if (isset($query['owner_id']) && is_numeric($query['owner_id'])) {\n            $userAlias = $this->createAlias();\n            if (0 == $query['owner_id']) {\n                // Search assets without an owner.\n                $qb->andWhere($qb->expr()->isNull('omeka_root.owner'));\n            } else {\n                $qb->innerJoin(\n                    'omeka_root.owner',\n                    $userAlias\n                );\n                $qb->andWhere($qb->expr()->eq(\n                    \"$userAlias.id\",\n                    $this->createNamedParameter($qb, $query['owner_id']))\n                );\n            }\n        }\n    }\n\n    public function hydrate(Request $request, EntityInterface $entity, ErrorStore $errorStore)\n    {\n        $data = $request->getContent();\n\n        if (Request::CREATE === $request->getOperation()) {\n            $fileData = $request->getFileData();\n            if (!isset($fileData['file'])) {\n                $errorStore->addError('file', 'No file was uploaded');\n                return;\n            }\n\n            $uploader = $this->getServiceLocator()->get('Omeka\\File\\Uploader');\n            $tempFile = $uploader->upload($fileData['file'], $errorStore);\n            if (!$tempFile) {\n                return;\n            }\n\n            $tempFile->setSourceName($fileData['file']['name']);\n            $config = $this->getServiceLocator()->get('Config');\n            $validator = new Validator($config['api_assets']['allowed_media_types'], $config['api_assets']['allowed_extensions']);\n            if (!$validator->validate($tempFile, $errorStore)) {\n                return;\n            }\n\n            $this->hydrateOwner($request, $entity);\n            $entity->setStorageId($tempFile->getStorageId());\n            $entity->setExtension($tempFile->getExtension());\n            $entity->setMediaType($tempFile->getMediaType());\n            $entity->setName($request->getValue('o:name', $fileData['file']['name']));\n\n            $tempFile->storeAsset();\n            $tempFile->delete();\n        } else {\n            if ($this->shouldHydrate($request, 'o:name')) {\n                $entity->setName($request->getValue('o:name'));\n            }\n        }\n\n        if ($this->shouldHydrate($request, 'o:alt_text')) {\n            $entity->setAltText($request->getValue('o:alt_text'));\n        }\n    }\n\n    public function validateEntity(EntityInterface $entity, ErrorStore $errorStore)\n    {\n        // Don't add this name error if we have any other errors already\n        if ($errorStore->hasErrors()) {\n            return;\n        }\n\n        $name = $entity->getName();\n        if (!is_string($name) || $name === '') {\n            $errorStore->addError('o:name', 'An asset must have a name.');\n        }\n    }\n}\n"], "filenames": ["application/config/module.config.php", "application/src/Api/Adapter/AssetAdapter.php"], "buggy_code_start_loc": [48, 73], "buggy_code_end_loc": [48, 74], "fixing_code_start_loc": [49, 73], "fixing_code_end_loc": [56, 74], "type": "CWE-434", "message": "Unrestricted Upload of File with Dangerous Type in GitHub repository omeka/omeka-s prior to 4.0.3.", "other": {"cve": {"id": "CVE-2023-4159", "sourceIdentifier": "security@huntr.dev", "published": "2023-08-04T18:15:18.077", "lastModified": "2023-08-09T13:15:41.000", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Unrestricted Upload of File with Dangerous Type in GitHub repository omeka/omeka-s prior to 4.0.3."}, {"lang": "es", "value": "Carga no restringida de archivos de tipo peligroso en el repositorio GitHub omeka/omeka-s anterior a 4.0.3."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 8.8, "baseSeverity": "HIGH"}, "exploitabilityScore": 2.8, "impactScore": 5.9}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "CHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 9.9, "baseSeverity": "CRITICAL"}, "exploitabilityScore": 3.1, "impactScore": 6.0}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-434"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:omeka:omeka_s:*:*:*:*:*:*:*:*", "versionEndExcluding": "4.0.3", "matchCriteriaId": "B619F3B7-C1D9-4056-9C23-8E39B1185F3D"}]}]}], "references": [{"url": "https://github.com/omeka/omeka-s/commit/2a7fb26452167c8a1d95f207ae5328c6b1b0fcf8", "source": "security@huntr.dev", "tags": ["Patch"]}, {"url": "https://huntr.dev/bounties/e2e2365e-6a5f-4ca4-9ef1-297e3ed41f9c", "source": "security@huntr.dev", "tags": ["Exploit", "Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/omeka/omeka-s/commit/2a7fb26452167c8a1d95f207ae5328c6b1b0fcf8"}}