{"buggy_code": ["# phpMyFAQ 3.1.8\n\n**Codename \"Poseidon\"**\n\n## CHANGELOG\n\nThis is a log of major user-visible changes in each phpMyFAQ release.\n\n### phpMyFAQ v3.1.8 - 2022-10-24\n\n- fixed multiple security vulnerabilities (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.7 - 2022-10-02\n\n- fixed CSRF vulnerability (KhanhCM, Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.6 - 2022-07-23\n\n- fixed XSS vulnerability (jhond0e, Thorsten)\n- fixed dismiss error for cookie consent (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.5 - 2022-06-27\n\n- added compatibility with Elasticsearch v8+ (Thorsten)\n- added trust of self-signed certificates with MS SQL (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.4 - 2022-04-25\n\n- added missing assets (Thorsten)\n\n### phpMyFAQ v3.1.3 - 2022-04-24\n\n- fixed login via LDAP (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.2 - 2022-03-16\n\n- fixed minor bugs (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.1.1 - 2022-02-14\n\n- fixed enabled debug mode (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.1.0 - 2022-02-12\n\n- Happy 21st Birthday, phpMyFAQ!\n- changed PHP requirement to PHP 7.4+ (Thorsten)\n- added support for PHP 8.0 and PHP 8.1 (Thorsten)\n- added support for Elasticsearch v6+ (Thorsten)\n- added drag'n'drop sorting for main categories (Paolo Caparrelli, Thorsten)\n- added possibility to add users without a password (Thorsten)\n- added export of all users as CSV (Thorsten)\n- added ChartJS as new charting library (Thorsten)\n- added REST API v2.1 to register users and add FAQs (Thorsten)\n- added API client tokens for REST API v2.1 (Thorsten)\n- added opt-in for displaying user data (Thorsten)\n- added mail notifications for new FAQs in admin section (Thorsten)\n- added possibility to login via email address (Thorsten)\n- updated to Bootstrap v4.6 (Thorsten)\n- updated to Composer v2 and improved build (Alexander M. Turek, Thorsten)\n- updated to Twitter API v2 (Thorsten)\n- improved install and update scripts (Thorsten)\n- removed REST API v1 (Thorsten)\n- removed RSS support (Thorsten)\n- removed rewrite support for IIS (Thorsten)\n- removed password hashing with MD5 and SHA-1 (Thorsten)\n- removed OpenSearch support (Thorsten)\n- removed XML export (Thorsten)\n- removed auto-save for FAQs during editing (Thorsten)\n- removed obsolete DbUnit tests (Thorsten)\n- fixed minor bugs (Nico Schmitz-Laux, Thorsten)\n\n### phpMyFAQ v3.0.12 - 2022-01-22\n\n- fixed broken LDAP authentication (Thorsten)\n- updated bundled dependencies (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.11 - 2022-01-18\n\n- fixed enabled debug mode (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.0.10 - 2022-01-17\n\n- fixed multiple XSS and CSRF vulnerabilities (0x7zed, M0rphling, justinp09010, Dennis Yassine, Thorsten)\n- fixed many minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.9 - 2021-04-17\n\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.8 - 2021-02-24\n\n- updated to Bootstrap v4.6 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.7 - 2020-12-23\n\n- fixed XSS vulnerability (Curtis Robinson, Thorsten)\n- added TOC plugin for TinyMCE (Thorsten)\n- removed support for deprecated data-vocabulary.org schema (Thorsten)\n- removed Travis CI build (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.6 - 2020-11-27\n\n- added support for PHP 8.0\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.5 - 2020-10-17\n\n- minor improvements (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.4 - 2020-07-26\n\n- session timeout extended to 5 hours (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.3 - 2020-05-21\n\n- improved FAQ editing (Thorsten)\n- updated to Bootstrap v4.5 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.2 - 2020-04-16\n\n- improved handling of multiple homepage categories (Thorsten)\n- improved FAQ editing (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.1 - 2020-03-17\n\n- re-added tag cloud on several pages (Thorsten)\n- fixed minor bugs (Thorsten)\n- fixed update issues for PostgreSQL (Thorsten)\n\n### phpMyFAQ v3.0.0 - 2020-02-16\n\n- changed PHP requirement to PHP 7.2+ (Thorsten)\n- added PHP namespaces (Thorsten)\n- added Docker support (Adrien Estanove)\n- added experimental large permissions support with sections (Timo Wolf, Thorsten)\n- added support for Elasticsearch v5+ (Thorsten)\n- added LDAP configuration frontend (Thorsten)\n- added configuration for enable/disable XML sitemap (Thorsten)\n- added support for category images (Thorsten)\n- added support for categories on homepage (Thorsten)\n- added filter functionality in templates (Thorsten)\n- added improved attachment overview (Thorsten)\n- added HTML5 export (Thorsten)\n- added support for EU General Data Protection Regulation (Jochen Steinhilber)\n- added multiple attachment upload (Thorsten)\n- added 404 page template (Thorsten)\n- added Mongolian translation (khaidaw@gmail.com)\n- added support for adding own meta content in templates (Thorsten)\n- added new REST API v2 (includes login) (Thorsten)\n- improved sticky records (Thorsten)\n- improved brute force handling (Thorsten)\n- switched CSS development from LESS to SCSS (Thorsten)\n- template variable syntax compatible with Twig/Handlebars (Thorsten)\n- updated Turkish translation (Can Kirca)\n- updated bundled dependencies (Thorsten)\n- deprecated RSS feeds (Thorsten)\n- deprecated REST API v1 (Thorsten)\n- removed translation admin frontend (Thorsten)\n- removed XHTML export (Thorsten)\n- removed support for ext/mssql (Thorsten)\n- removed bundled Symfony ClassLoader (Thorsten)\n- removed Bower, now using Yarn only (Thorsten)\n- removed Grunt, now using Webpack (Thorsten)\n- removed Modernizr (Thorsten)\n- removed share on Facebook link (Thorsten)\n- removed Facebook Like Button support (Thorsten)\n\n### phpMyFAQ v2.9.13 - 2019-02-14\n\n- fixed XSS vulnerabilities in the bundled Bootstrap version (Thorsten)\n\n### phpMyFAQ v2.9.12 - 2019-02-12\n\n- updated bundled Bootstrap to v3.4.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.11 - 2018-09-02\n\n- fixed multiple vulnerabilities (Thorsten)\n- updated bundled jQuery to v1.12.4 (Thorsten)\n- updated bundled Handlebars to v4.0.11 (Thorsten)\n\n### phpMyFAQ v2.9.10 - 2018-02-17\n\n- updated Dutch translation (https://github.com/joskevos)\n- updated bundled SwiftMailer to v5.4.9 (Thorsten)\n- updated bundled phpseclib to v2.0.9 (Thorsten)\n- updated bundled TinyMCE to v4.6.7 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.9 - 2017-10-19\n\n- fixed multiple XSS and CSRF vulnerabilities (Thorsten)\n- updated bundled Bootstrap to v3.3.7 (Thorsten)\n- updated bundled Font Awesome to v4.7.0 (Thorsten)\n- updated bundled TinyMCE to v4.5.7 (Thorsten)\n- updated bundled HighlightJS to v9.12.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.8 - 2017-07-12\n\n- fixed improper restriction (Thorsten)\n- add LDAP search in sub groups (Thorsten)\n- updated French translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.7 - 2017-04-02\n\n- fixed stored XSS vulnerability (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.6 - 2017-01-27\n\n- fixed possible arbitrary PHP code execution (Thorsten)\n- ready for PHP 7.1 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.5 - 2016-08-31\n\n- fixed minor bugs (Thorsten, Matt Brennan)\n\n### phpMyFAQ v2.9.4 - 2016-08-02\n\n- deactivated debug mode (Thorsten)\n- updated bundled TinyMCE to v4.4.1 (Thorsten)\n- updated bundled Bootstrap to v3.3.7 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.3 - 2016-08-01\n\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.2 - 2016-07-05\n\n- updated bundled phpseclib to v2.0.2 (Thorsten)\n- updated bundled TinyMCE to v4.4.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.1 - 2016-05-31\n\n- fixed stored XSS vulnerability (Kacper Szurek)\n- added new source code paste plugin (Thorsten)\n- removed American English translation (Thorsten)\n- updated bundled TinyMCE to v4.3.12 (Thorsten)\n- updated bundled Typeahead.js to v0.11.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.0 - 2016-05-13\n\n- ready for PHP 7 (Thorsten)\n- changed PHP requirement to PHP 5.5+ and PHP 7 (Thorsten)\n- added support for HHVM 3.4.2+ (Thorsten)\n- added support for Elasticsearch (Thorsten)\n- added new mobile first, touch-friendly default layout (Thorsten)\n- added tag intersection based search (Tomer Weinberg, Thorsten)\n- added support for Markdown (Jerry van Kooten, Thorsten)\n- added permissions for guests (Thorsten)\n- added support for multiple LDAP/AD servers (Bernhard M\u00fcller, Thorsten)\n- added experimental support for LDAP dynamic user binding (Thorsten)\n- added frontend dependency management using Bower (Thorsten)\n- added possibility to delete all logged search terms (Thorsten)\n- added support for MySQL sockets\n- added configuration for enable/disable highlighting search terms (Thorsten)\n- added configuration for enable/disable RSS feeds (Thorsten)\n- added configuration to enable/disable gzip compression (Thorsten)\n- added configuration for inactive, hidden categories (Thorsten)\n- added configuration to disable registration (Thorsten)\n- added configuration to allow anonymous downloads (Thorsten)\n- added configuration to override user passwords by admin (Thorsten)\n- added configuration to reset voting and visits (Thorsten)\n- added configuration to disable smart answering (Thorsten)\n- added tag management frontend (Thorsten)\n- added full support for SQLite3 (Peter Kehl)\n- added control for meta robots handling (Thorsten)\n- added configuration for auto-activation of new users (Christopher Andrews)\n- added support for SMTP (Christopher Andrews)\n- added bundled Twitter Typeahead.js (Thorsten)\n- added support for custom headers and footers in PDF exports (Thorsten)\n- added support for language specific open questions (Thorsten)\n- added moderator groups to categories (Thorsten)\n- added FAQ overview page (Thorsten)\n- added JSON export (Thorsten)\n- added private notes to FAQs (Thorsten)\n- added experimental support for bcrypt (Thorsten)\n- extended REST/JSON API (Thorsten)\n- added simple bash based backup script (Thorsten)\n- code base PSR-1 and PSR-2 compatible (Thorsten)\n- updated bundled Symfony ClassLoader to v2.6.13 (Thorsten)\n- updated bundled jQuery to v1.11.2 (Thorsten)\n- updated bundled Bootstrap to v3.3.5 (Thorsten)\n- updated bundled Font Awesome to v4.4.0 (Thorsten)\n- updated bundled Modernizr to v2.8.3 (Thorsten)\n- updated bundled TinyMCE to v4.2.7 (Thorsten)\n- updated bundled SwiftMailer to v5.4.1 (Christopher Andrews, Thorsten)\n- updated bundled Parsedown to v1.5.3 (Jerry van Kooten, Thorsten)\n- updated bundled HighlightJS to v8.9.1 (Thorsten)\n- updated bundled Elasticsearch Client to v2.1.5 (Thorsten)\n- updated Russian translation\n- removed bundled SyntaxHighlighter (Thorsten)\n- dropped support for ext/mysql (Thorsten)\n- dropped support for SQLite2 (Thorsten)\n- dropped support for Zeus Webserver, IIS 6 and lighttpd (Thorsten)\n- fixed a lot of minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.29 - 2016-05-31\n\n- fixed stored XSS vulnerability (Kacper Szurek)\n\n### phpMyFAQ v2.8.28 - 2016-05-13\n\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.27 - 2016-04-11\n\n- fixed CSRF security issue (High-Tech Bridge Security Research Lab)\n- added possibility to use fullscreen videos (Thorsten)\n- added compatibility with MySQL 5.7 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.26 - 2016-02-12\n\n- 15 years of phpMyFAQ Edition\n- dropped support for Internet Explorer 9 and 10 (Thorsten)\n- updated Italian translation (Agnese Morettini)\n- updated Norwegian Bokm\u00e5l translation (Stian Svarholt)\n- updated bundled Symfony ClassLoader to v2.6.13 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.25 - 2015-12-05\n\n- ready for PHP 7 (Thorsten)\n- added American English translation (Stewart Day)\n- updated bundled Symfony ClassLoader to v2.6.11 (Thorsten)\n- updated Japanese translation\n- updated Brazilian Portuguese translation\n- updated Italian translation (Amedeo Fragai)\n- updated Dutch translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.24 - 2015-07-27\n\n- updated Farsi translation (aysabzevar)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.23 - 2015-06-13\n\n- updated bundled Symfony ClassLoader to v2.6.9 (Thorsten)\n- fixed \"remember me\" issues (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.22 - 2015-03-31\n\n- updated Czech translation\n- updated Brazilian Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.21 - 2015-02-28\n\n- added experimental rewrite rules for IIS7 and IIS8 (Thorsten)\n- improved usability in admin backend (Thorsten)\n- improved HTML5 support in editor (Thorsten)\n- improved code coverage (Thorsten)\n- updated Brazilian Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.20 - 2015-02-07\n\n- added experimental support for HHVM 3.4.2+\n- added experimental support for PHP 7.0\n- updated Brazilian Portuguese translation\n- updated French translation (Olivier Binet)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.19 - 2014-12-31\n\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.18 - 2014-11-30\n\n- added clickjacking prevention (Thorsten, Narendra Bhati)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.17 - 2014-11-05\n\n- fixed typo in update script (Thorsten)\n\n### phpMyFAQ v2.8-16 - 2014-11-03\n\n- fixed restore from backup (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.15 - 2014-10-02\n\n- fixed broken installation (Thorsten)\n- updated Farsi translation\n\n### phpMyFAQ v2.8.14 - 2014-10-01\n\n- fixed installation compatibility with MySQL 5.1 and MySQL 5.5 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.13 - 2014-09-16\n\n- fixed multiple security vulnerabilities (Nikhil Srivastava, Thorsten)\n- backported full support for SQLite3 (Peter Kehl)\n- updated Chinese (Traditional) translation (Barlos Lee)\n- updated Farsi translation\n- updated Italian translation\n- updated Spanish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.12 - 2014-08-02\n\n- updated Hebrew translation\n- updated to Twitter OAuth v1.1 (Thorsten)\n- updated bundled Symfony ClassLoader to v2.5.1 (Thorsten)\n- fixed RSS/Atom feed compatibility (Thorsten)\n\n### phpMyFAQ v2.8.11 - 2014-06-28\n\n- updated German translation (Thorsten)\n- updated Romanian translation\n- updated Spanish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.10 - 2014-05-30\n\n- dropped support for Internet Explorer 7 and 8 (Thorsten)\n- updated Brazilian Portuguese translation (Joao Tafarelo)\n- updated bundled TinyMCE to v3.5.11 (Thorsten)\n- updated bundled TCPDF library to v6.0.078 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.9 - 2014-04-28\n\n- updated Thai translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.8 - 2014-03-18\n\n- improved API security (Thorsten)\n- fixed search with Hebrew characters (Thorsten)\n- fixed PDF export with Czech and Slovak characters (Thorsten)\n- fixed a lot of bugs (Thorsten)\n\n### phpMyFAQ v2.8.7 - 2014-02-05\n\n- fixed PHP 5.4 related issue introduced in 2.8.6 (Thorsten)\n\n### phpMyFAQ v2.8.6 - 2014-02-04\n\n- fixed IE8/9 only XSS and CSRF vulnerabilities (JPCERT, Thorsten)\n- updated Hungarian translation\n- updated Spanish translation (Luis Carvalho)\n- updated bundled Symfony ClassLoader to v2.4.1 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.5 - 2013-12-31\n\n- fixed SSO logins with mod_auth_kerb (Stephane Lapie)\n- improved HTTPS handling (Thorsten)\n- updated Dutch translation\n- updated European Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.4 - 2013-11-26\n\n- fixed possible arbitrary PHP code execution (Thorsten)\n- updated Chinese (Traditional) translation\n- updated Dutch translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.3 - 2013-11-18\n\n- fixed missing permission check on Image Manager (Thorsten)\n- improved HTML / CSS code (Michael Meister)\n- updated Brazilian Portuguese translation\n- updated Japanese translation\n- updated Spanish translation\n- updated Swedish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.2 - 2013-07-25\n\n- added French Canada translation (Jacqueline Gazaille T\u00e9treault)\n- improved attachment upload dialog with HTML5 File API (Thorsten)\n- updated Finnish translation (Pasi Pajukoski)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.1 - 2013-06-26\n\n- added support for Grunt (Thorsten)\n- added minified CSS and JavaScript code (Thorsten)\n- improved usability for group administration (Thorsten)\n- fixed broken updates for MS SQL and SQLite (Thorsten)\n- fixed IE8 related JavaScript issues (Thorsten)\n- fixed HTML5 validation errors (Thorsten)\n- fixed Arabic translation (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.0 - 2013-05-21\n\n- changed PHP requirement to PHP 5.3.3 and later (Thorsten)\n- phpMyFAQ is now licensed under the terms of Mozilla Public License 2.0 (Thorsten, Florian)\n- added new and improved frontend and backend user interface based on Twitter Bootstrap (Thorsten)\n- added multi site support (Florian, Thorsten)\n- added auto-save for FAQs during editing (Anatoliy)\n- added improved advanced search in subcategories (Thorsten)\n- added possibility to close and delete open questions (Peter Caesar)\n- added possibility to delete multiple open questions (Thorsten)\n- added user control panel (Thorsten)\n- added support for Composer (Thorsten, Alexander M. Turek)\n- added online verification check (Thorsten, Florian)\n- added configurable maintenance mode (Thorsten)\n- added user notification for answered questions (Thorsten)\n- added possibility to deactivate complete FAQ export (Thorsten)\n- added possibility to random sorting of FAQs (Thorsten)\n- added documentation in Markdown with GitHub style HTML export (Thorsten)\n- added support for Gravatar (Thorsten)\n- added user statistic report in admin dashboard (Thorsten)\n- improved usability of administration backend (Thorsten)\n- improved setup and update (Thorsten, Florian)\n- improved security with salted passwords (Thorsten)\n- improved attachment functionality (Thorsten)\n- improved CSS development with LESS (Thorsten)\n- improved minified CSS output (Thorsten)\n- simplified the link verification (Thorsten)\n- dropped support for IBM DB2, Interbase/Firebird and Sybase (Thorsten)\n- dropped support for PHP register_globals and magic_quotes_gpc (Thorsten)\n- dropped support for Google Translate API v1 (Thorsten)\n- removed Delicious support (Thorsten)\n- updated bundled jQuery to v1.9.1 (Thorsten)\n- updated bundled Modernizr to v2.6.2 (Thorsten)\n- updated bundled Bootstrap to v2.3.2 (Thorsten)\n- updated bundled TinyMCE to v3.5.7 (Thorsten)\n- updated bundled Symfony ClassLoader to v2.2.1 (Alexander M. Turek)\n- updated bundled Font Awesome to v3.1 (Thorsten)\n- updated bundled jQuery Sparklines to v2.1.1 (Thorsten)\n- updated PHP dependency management using Composer (Thorsten)\n- updated Czech translation (Jaroslav S\u00edka)\n- updated Portuguese translation\n- fixed some bugs (Thorsten, Florian, Alexander M. Turek)\n\n### phpMyFAQ v2.7.9 - 2012-11-02\n\n- updated Czech translation (Jaroslav S\u00edka)\n- updated Dutch translation\n- updated French translation\n- improved English translation\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.8 - 2012-08-22\n\n- added experimental rewrite rules for Zeus Webserver (Chris Crawshaw)\n- updated Arabic translation\n- updated Dutch translation\n- updated Spanish translation (Lisandro L\u00f3pez Villatoro)\n- improved LDAP handling (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.7 - 2012-07-01\n\n- added Bosnian translation (Alen Durmo)\n- improved complete PDF export (Thorsten)\n- updated Polish translation\n- updated Simplified Chinese translation\n- fixed Arabian and Bengali translation (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.6 - 2012-05-16\n\n- updated Dutch translation\n- updated Polish translation\n- updated Russian translation\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.5 - 2012-04-14\n\n- fixed serious security issue in bundled ImageManager library (Thorsten)\n- full support for Microsoft SQL Server Driver for PHP (Thorsten)\n- added online verification check (Thorsten, Florian)\n- added experimental support for SQLite3 (Thorsten)\n- updated Spanish translation (Reynaldo Martinez P.)\n- fixed Slovak translation (Thorsten)\n- fixed IE9 related JavaScript issues (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.4 - 2012-02-22\n\n- added PDF export for complete FAQ in frontend (Thorsten)\n- updated Japanese translation\n- updated Russian translation (Alexander Melnik)\n- updated Spanish translation\n- fixed backup issue (Thorsten)\n- fixed some bugs (Alexander Melnik, Thorsten, Aco Mitevski)\n\n### phpMyFAQ v2.7.3 - 2012-01-16\n\n- improved PDF export (Thorsten)\n- updated Dutch translation (Almar van Pel)\n- fixed some PostgreSQL related issues (Vince, Thorsten)\n- fixed some attachment related issues (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.2 - 2011-12-31\n\n- improved PDF export and install script (Thorsten)\n- updated Finnish translation (Petteri Hirvonen, Niklas Lamp\u00e9n)\n- updated French translation (C\u00e9dric Frayssinet)\n- updated Chinese (Simplified) translation\n- updated bundled TCPDF library to v5.9.136 (Thorsten)\n- updated bundled jQuery datePicker plugin (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.1 - 2011-10-25\n\n- fixed security issue in bundled ImageManager library (Thorsten)\n- added missing translations (Thorsten)\n- added configurable encryption type for passwords (Thorsten)\n- added support for anonymous login for LDAP servers (Thorsten)\n- added table of contents in PDF exports (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.0 - 2011-09-30\n\n- changed PHP requirement to PHP 5.2.3 (Thorsten)\n- dropped support for MySQL 4.1 (Thorsten)\n- dropped support for Internet Explorer 6 + 7 (Thorsten)\n- dropped support for obsolete Microsummaries (Thorsten)\n- added new HTML5/CSS3 powered layout and administration backend (Thorsten)\n- added configurable search relevance functionality (Gustavo Solt)\n- added automatic translations with Google Translate (Gustavo Solt)\n- added Twitter support (Thorsten, Thomas Zeithaml)\n- added Facebook Like Button support (Thorsten)\n- added \"Bookmark on Delicious\" support (Thorsten)\n- added attachment administration frontend (Anatoliy)\n- added basic authentication support for LDAP groups (Thorsten)\n- added basic support for HTML5 microdata (Thorsten)\n- added functionality of the TinyMCE save button (Gustavo Solt)\n- added basic reporting functionality (Gustavo Solt, Thorsten)\n- added IPv6 support (David Soria Parra)\n- added support for Single Sign On authentication (Thorsten)\n- added support for complete secured FAQ installations (Thorsten)\n- added user configurable date formatting (Thorsten)\n- added possibility to delete user generated search terms (Thorsten)\n- improved usability in frontend and administration backend (Thorsten)\n- enabling Gzip compression by default (Thorsten, Lorenzo Milesi)\n- updated bundled jQuery to v1.6.2 (Thorsten)\n- updated bundled Modernizr to v2.0 (Thorsten)\n- updated bundled TinyMCE to v3.4.2 (Thorsten)\n- updated bundled SyntaxHighlighter to v3.0.83 (Thorsten)\n- updated bundled TCPDF library to v5.9.110 (Thorsten)\n- updated Dutch translation (ronald AT proudsites DOT com)\n- updated German translation (Thorsten)\n- updated Japanese translation (hiromi-suzuki AT garage DOT co DOT jp)\n- updated Portuguese translation (Fernando G. Monteiro)\n- updated Russian translation (cyber-01 AT yandex DOT ru)\n- updated Spanish translation (Jason)\n- fixed a lot of bugs (Thorsten)\n\n### phpMyFAQ v2.6.18 - 2011-09-28\n\n- updated Spanish translation\n- fixed Danish translation\n- fixed minor bugs (Thorsten, Matthew Robinson)\n\n### phpMyFAQ v2.6.17 - 2011-06-08\n\n- updated Portuguese translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.16 - 2011-05-31\n\n- updated Portuguese translation\n- updated Dutch translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.15 - 2011-02-23\n\n- added Malay translation (Ahmad Kamil Zailani)\n- updated Danish translation\n- updated Brazilian Portuguese translation\n- updated Spanish translation (Martin Schenk)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.14 - 2011-01-24\n\n- added rewrite rules for nginx (Florian Anderiasch)\n- added compatibility for MySQL 5.5 with ext/mysql (Thorsten)\n- added support to ban IPs from user tracking files (Thorsten)\n- improved restore functionality (Thorsten)\n- updated Dutch translation (Hans)\n- updated German translation (Thorsten)\n- Fixed issue with sending mails to category administrators (Gustavo Solt)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.13 - 2010-12-15\n\n- clean package after compromised server (Thorsten)\n\n### phpMyFAQ v2.6.12 - 2010-12-13\n\n- added experimental support for MariaDB (Thorsten)\n- added empty LDAP configuration file as example (Thorsten)\n- updated Arabic translation\n- updated Dutch translation (Werner Helmich)\n- updated French translation\n- updated Norwegian Bokm\u00e5l translation (harald@delelisten.no)\n- fixed minor bugs (Thorsten, Gustavo Solt)\n\n### phpMyFAQ v2.6.11 - 2010-11-03\n\n- fixed some bugs introduced with phpMyFAQ 2.6.10 (Thorsten)\n\n### phpMyFAQ v2.6.10 - 2010-11-02\n\n- added several security enhancements (Thorsten)\n- updated Chinese (Simplified) translation\n- updated German translation (Thorsten)\n- updated Portuguese translation (Fernando G. Monteiro)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.9 - 2010-09-28\n\n- fixed XSS vulnerability (Yam Mesicka, Thorsten)\n- added Slovak translation (Tibor)\n- added minor usability improvement in administration backend (Thorsten)\n- fixed issue with embedded Google Analytics code (Thorsten)\n\n### phpMyFAQ v2.6.8 - 2010-08-31\n\n- dropped Oracle database support (Thorsten)\n- added new TinyMCE plugin for adding internal links by a suggest search (Thorsten)\n- added basic HTML5 powered administration backend (Thorsten)\n- improved setup and update functionality (Thorsten, Bram)\n- updated bundled TCPDF library to v5.6.000 (Thorsten)\n- updated bundled TinyMCE editor component to v3.3.8 (Thorsten)\n- updated bundled phpseclib to v0.2.1 (Thorsten)\n- updated Russian translation\n- updated Portuguese translation\n- fixed XML rendering issue (Thorsten)\n- fixed many bugs (Thorsten, Bram)\n\n### phpMyFAQ v2.6.7 - 2010-07-29\n\n- refactored search backend (Thorsten)\n- improved pagination functionality (Thorsten)\n- fixed various problems with Microsoft SQL Server Driver for PHP (Thorsten)\n- fixed minor bugs (Thorsten, Aaron Burgie)\n\n### phpMyFAQ v2.6.6 - 2010-06-21\n\n- refactored database abstraction (Thorsten)\n- fixed OpenLDAP authentication (Franky)\n- fixed duplication of search results (Aaron Burgie)\n- fixed issue with duplicate sitemap characters (Aaron Burgie)\n- fixed solution ID issues (Thorsten)\n- improved Glossary deletion workflow (Thorsten)\n- updated Brazilian Portuguese translation\n- updated Norwegian Bokm\u00e5l translation\n- fixed minor bugs (Thorsten, Philip Mikas)\n\n### phpMyFAQ v2.6.5 - 2010-05-24\n\n- updated bundled TCPDF library to v5.0.009 (Thorsten)\n- updated bundled TinyMCE editor component to v3.3.5.1 (Thorsten)\n- refactored OpenSearch plugin code base (Thorsten)\n- fixed small update issues in update script (Thorsten)\n- fixed missing language fallback issue in instant response (Thorsten)\n- fixed user deletion in admin backend (Thorsten)\n- fixed backup/restore bug (Thorsten)\n- updated Polish translation\n- updated Russian translation\n- updated Thai translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.4 - 2010-04-18\n\n- added experimental support for Microsoft SQL Server Driver for PHP (Thorsten)\n- improved FAQ record administration frontend (Thorsten)\n- improved Sitemap titles (Thorsten)\n- updated German translation (Thorsten)\n- updated Romanian translation\n- updated Swedish translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.3 - 2010-03-03\n\n- fixed various mail issues (Thorsten)\n- improved links rewriting (Guillaume Le Maout)\n- improved sitemap for Chinese, Japanese and Korean content (Thorsten)\n- improved meta keyword handling\n- updated Portuguese translation (Fernando G. Monteiro)\n- updated French translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.2 - 2010-02-01\n\n- fixed update script issue (Thorsten)\n- fixed display of Chinese, Japanese and Korean content in PDFs (Thorsten)\n- fixed issues with RSS feeds (Thorsten)\n- fixed broken Spanish translation (Thorsten)\n- updated French translation (C\u00e9dric Frayssinet)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.6.1 - 2010-01-24\n\n- updated bundled TCPDF library to v4.8.026 (Thorsten)\n- improved cookie handling (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.6.0 - 2010-01-11\n\n- moved all language files to UTF-8 (Anatoliy)\n- added TCPDF as replacement for FPDF library (Thorsten)\n- added support for TinyMCE translations (Aurimas Fi\u0161eras)\n- added support for multi-language news (Thorsten)\n- added user adjustable template sets and styles (Anatoliy)\n- added support plurals in translations (Aurimas Fi\u0161eras)\n- added share on Facebook link (Thorsten)\n- added a rest/json API (Thorsten)\n- added secure login if SSL is available (Tobias Hommel)\n- added FAQ entry dependent meta description (Thorsten)\n- added experimental support for Microsoft Windows Web App Gallery (Thorsten)\n- improved attachment functionality (Anatoliy)\n- improved install script (Thorsten)\n- improved category view with description (Thorsten)\n- improved FAQ entry activation (Anatoliy)\n- improved user administration (Max K\u00f6hler)\n- improved FAQ entry workflow (Anatoliy, Thorsten)\n- removed Docbook XML export (Thorsten)\n- removed Net_IDNA library (Thorsten)\n- updated Greek translation (Periklis Tsirakidis)\n- updated Lithuanian translation (Aurimas Fi\u0161eras)\n- updated Japanese translation\n\n### phpMyFAQ v2.5.7 - 2010-01-19\n\n- improved glossary detection (Guillaume Le Maout)\n- updated Dutch translation\n- updated Indonasian translation\n- updated Chinese (Simplified) translation\n- updated Japanese translation\n- updated Norwegian Bokmal translation\n- many minor bugfixes (Thorsten, Guillaume Le Maout)\n\n### phpMyFAQ v2.5.6 - 2009-12-22\n\n- updated bundled TinyMCE editor component to v3.2.7 (Thorsten)\n- updated bundled SyntaxHighlighter library to v2.1.364 (Thorsten)\n- updated bundled SyntaxHighlighter plugin for TinyMCE (Thorsten)\n- updated Brazilian Portuguese translation\n- updated Spanish translation\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.5 - 2009-12-01\n\n- fixed IE6/7 only XSS vulnerabilities (Amol Naik, Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.4 - 2009-11-10\n\n- fixed various PostgreSQL related issues (Anatoliy, Thorsten)\n- updated Dutch translation\n- updated Brazilian Portuguese translation\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.3 - 2009-10-19\n\n- switched repository from SVN to git (David Soria Parra, Thorsten)\n- added missing Perl syntax hightlighting (Thorsten)\n- fixed missing info link in news (Thorsten)\n- fixed broken group permission check for instant response (Thorsten)\n- fixed broken attachment download (Thorsten)\n- fixed SQLite problems (David Soria Parra)\n- updated Japanese translation\n\n### phpMyFAQ v2.5.2 - 2009-09-01\n\n- fixed IE6/7 only XSS vulnerability (Thorsten)\n- updated Polish language file (Dariusz Grzesista)\n- updated Chinese language file\n- fixed problem with Czech translation (Anatoliy)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.1 - 2009-08-10\n\n- added support for LDAP-datamapping, e.g. against an Active Directory Server (Lars Scheithauer)\n- added support for multi-domain-authentication, e.g. against an ADS-Global Catalog (Lars Scheithauer)\n- added support for PHP LDAP options (Lars Scheithauer)\n- added Lithuanian translation (Aurimas Fiseras)\n- fixed LDAP issues (Lars Scheithauer)\n- fixed some Oracle issues (Thorsten)\n- improved svn2package script (Rene Treffer)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.0 - 2009-07-21\n\n- changed PHP requirement to PHP 5.2 (Thorsten)\n- dropped support for MySQL 4.0 and MaxDB (Thorsten)\n- dropped support for XML-RPC (Thorsten)\n- refactored complete code base to PHP 5.2+ (Thorsten, Matteo)\n- added new and improved new basic layout theme (Charles A. Landemaine)\n- added new administration layout (Thorsten)\n- added new Image Manager in administration backend (Thorsten)\n- added RSS feed for every category (Thorsten)\n- added ability to copy and duplicate FAQ entries (Thorsten)\n- added support for blocks in template engine (Jan Mergler)\n- added public user registration (Elger Thiele)\n- added LDAP authentication (Alberto Cabello Sanchez)\n- added HTTP authentication (Thorsten)\n- added Mail sub system (Matteo)\n- added enable/disable WYSIWYG Editor flag (Thorsten)\n- added most popular searches list (Thorsten)\n- added frontend for search logs statistics (Anatoliy Belsky)\n- added sticky FAQ records (Anatoliy Belsky)\n- added smart answering for user questions (Anatoliy Belsky)\n- added string wrapper for better UTF-8 handling (Anatoliy Belsky)\n- added translation frontend (Anatoliy Belsky)\n- added jQuery 1.3 as replacement for Prototype/Script.aculo.us (Thorsten)\n- added configurable attachment directory (Anatoliy Belsky)\n- added approval permission for FAQs (Anatoliy Belsky)\n- added Hindi translation (Sumeet Raj Aggarwal)\n- improved user administration frontend (Sarah Hermann)\n- improved performance (Thorsten)\n- improved language files (Anatoliy Belsky, Thorsten)\n- ajaxified comment and record administration (Thorsten)\n- updated bundled Net_IDNA to v0.6.3 (Thorsten)\n- updated bundled TinyMCE editor component to v3.2.5 (Thorsten)\n- updated bundled FPDF library to v1.6 (Thorsten)\n- updated Turkish translation (Evren Yurtesen)\n\n### phpMyFAQ v2.0.15 - 2009-06-02\n\n- fixed XSS vulnerability (Thorsten)\n\n### phpMyFAQ v2.0.14 - 2009-05-21\n\n- updated Vietnamese translation (Julien Petitperrin)\n- improved tagging implementation (Thorsten)\n- fixed authentication bypass (Thorsten)\n- fixed content type for RSS feeds (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.13 - 2009-04-20\n\n- added new blocked words for spam protection (Kai)\n- fixed fatal error in PHP 5.3 (David Soria Parra, Thorsten)\n- fixed redirect problem with multiviews in .htaccess (Antonio)\n- fixed problem with visible questions in RSS feed (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.12 - 2009-02-17\n\n- fixed bug with MySQL 6 and ext/mysqli (Johannes)\n- fixed stat call bug in installer on OpenSuse 10.3 (Thorsten)\n- improved SVN checkout script (Rene Treffer)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.11 - 2009-01-22\n\n- updated English and Turkish translation and switched to UTF-8 (Evren Yurtesen)\n- updated Simplified Chinese translation (Techice Young)\n- fixed possible infinity loop bug in categories (Kaoru Izutani)\n- fixed permission bypass issue (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.10 - 2008-11-26\n\n- fixed image bug in PDF (Thorsten)\n- fixed isses in admin log display (Thorsten)\n- re-added missing XML-RPCS library files (Thorsten)\n- fixed PHP warnings and notices (Thorsten)\n- minor bugfixes (Thorsten, Andreas Hansson)\n\n### phpMyFAQ v2.0.9 - 2008-10-17\n\n- dedicated to my uncle Werner\n- fixed content deletion bug (Thorsten)\n- fixed SVN export script (Thorsten)\n- improved comment spam protection (Thorsten)\n- re-added missing css color file (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.8 - 2008-09-11\n\n- fixed security vulnerability in XSS filter (Alexios Fakos at n.runs.com)\n- switched repository from CVS to SVN (Thorsten)\n- fixed session bug with MS SQL (Simon Stewart)\n- fixed login errors with IBM DB2 (Thorsten, Helmut Tessarek)\n- updated French translation (Julien Ross)\n- updated Serbian translation (Slavisa Milojkovic)\n\n### phpMyFAQ v2.0.7 - 2008-05-12\n\n- added Bengali translation (Md. Masum Billah)\n- added Ukrainian translation (Oleg P. Suvolokin and Denis A. Barybin)\n- updated Czech translation (Petr Silon)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.6 - 2008-02-24\n\n- permission setting related fix (Carlos Eduardo Nogueira Gon\ufffdalves)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.5 - 2008-01-20\n\n- fixed lighttpd rewrite rules (Markus Kohlmeyer)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.4 - 2007-11-18\n\n- add Thai translation (Thanadon Somdee)\n- improved DiggIt link (Thorsten\n- fixed French translation (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.3 - 2007-08-18\n\n- some permission related fixes (Thorsten)\n- some glossary related fixes (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.2 - 2007-07-08\n\n- some performance improvements (Thorsten)\n- some permission related fixes (Adrianna Musiol)\n- some update fixes (Matteo)\n- updated Danish translation (Tommy Ipsen)\n- some minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.1 - 2007-06-01\n\n- fixed broken update script (Thorsten, Matteo)\n- fixed bugs with basic permission level (Thorsten, Matteo)\n- fixed PHP segfaults with Zend Optimizer extension (Thorsten, Matteo)\n- updated Japanese translation (Tadashi Jokagi)\n- many minor bugfixes (Thorsten, Matteo)\n\n### phpMyFAQ v2.0.0 - 2007-05-22\n\n- added rewritten and enhanced user management (Lars)\n- added rewritten and enhanced authorization management (Lars)\n- added user and group based permissions for categories and records (Thorsten)\n- added Ajax support (Thorsten, Matteo)\n- added automatic link verification (Minoru Toda)\n- added user binding to a category (Thorsten)\n- added glossary support (Thorsten)\n- added possibility to delete admin log (Thorsten)\n- added configurable visibility of new questions (Thorsten)\n- added improved and template-based XHTML export (Thorsten)\n- added dynamic related articles (Thorsten, Marco Enders, Thomas Zeithaml)\n- added support for Google, Yahoo!, and MSN sitemaps (Matteo)\n- added improved WYSIWYG editor and Image Manager (Thorsten)\n- added improved News module (Matteo, Thorsten)\n- added tagging (Thorsten)\n- added DiggIt! link (Thorsten)\n- added Microsummaries (Matteo)\n- added OpenSearch support (Thorsten)\n- added \"submit translation\" link (Matteo)\n- added experimental support for Oracle (Thorsten)\n- added experimental support for Interbase/Firebird (Thorsten)\n- added sorting by id, title and date for records in admin backend (Thorsten)\n- added comment administration frontend (Thorsten)\n- added configurable simple reordering of records (Thorsten)\n- added questionnaire for statistics in installer (Johannes)\n- added Ajax-powered Instant Response (Thorsten)\n- added editable default values for record configuration (Thorsten)\n- added blacklist for search bots (Marco Fester, Thorsten)\n- added stylesheets for right-to-left text-direction (Roy Ronen)\n- improved export functions (Matteo)\n- improved URL rewrite functions (Matteo)\n- improved category management (Thorsten, Rudi Ferrari)\n- improved administration backend (Thorsten, Matteo)\n- updated Arabic translation (Ahmed Shalaby)\n- updated German translation (Thorsten)\n- updated Hewbrew translation (Roy Ronen)\n- updated Italian translation (Matteo)\n- updated Japanese translation (Tadashi Jokagi)\n- updated Spanish translation (Eduardo Polidor)\n\n### phpMyFAQ v1.6.11 - 2007-03-31\n\n- updated Finnish translation\n- fixed problems with unsupported charsets in PHP\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.10 - 2007-02-18\n\n- fixed a serious security issue\n- improved performance\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.9 - 2007-01-28\n\n- updated bundled PHP XMLRPC to v2.1\n- fixed the backup download permissions\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.8 - 2006-12-15\n\n- fixed a possible security issue\n- fixed the blank dropdown in the installer\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.7 - 2006-11-27\n\n- added Persian (Farsi) translation\n- fixed PHP 5.2.0 related issues\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.6 - 2006-10-28\n\n- updated Arabic translation (also moved to UTF-8)\n- updated bundled Net_IDNA to v0.4.4\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.5 - 2006-09-21\n\n- added Welsh translation\n- added French documentation\n- updated Czech translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.4 - 2006-08-19\n\n- updated Brazilian Portuguese translation\n- updated Dutch translation\n- updated French translation\n- updated Italian translation\n- updated Japanese translation\n- updated Portuguese translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.3 - 2006-07-16\n\n- added German documentation\n- updated bundled NET_IDNA class to v0.4.3\n- released a spec file for building an RPM package of phpMyFAQ\n- updated Simplified Chinese translation (also moved to utf-8)\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.2 - 2006-06-17\n\n- added user tracking data deletion\n- improved PHP 5 support for MySQL and SQLite\n- updated Dutch translation\n- updated French translation\n- updated Italian translation\n- updated Swedish translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.1 - 2006-05-13\n\n- added spam control center\n- added mod_rewrite support for lighttpd\n- added Microsoft Internet Explorer 7 search plugin\n- added automatic admin session expiry notice\n- improved record administration\n- improved user administration\n- improved category administration\n- improved highlighting of searched words\n- updated Italian translation\n- updated German translation\n- updated Danish translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.0 - 2006-04-21\n\n- fixed PHP security issue\n- added unique solution id\n- added revision system\n- added support for captchas\n- added bad word list blocker\n- added search in one selected category\n- added linked breadcrumb\n- added RSS feed for open questions\n- added Brazilian Portuguese translation\n- improved record administration\n- improved spam protection\n- improved language detection and handling\n- updated Italian translation\n- updated Japanese translation\n- updated Korean translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.9 - 2006-04-21\n\n- fixed PHP security issue\n\n### phpMyFAQ v1.5.8 - 2006-04-09\n\n- updated Korean translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.7 - 2006-03-02\n\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.6 - 2006-01-27\n\n- added Basque translation\n- improved spam protection\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.5 - 2005-12-19\n\n- added support for MaxDB\n- added keywords into meta keywords\n- added search by record ID\n- improved language detection and handling\n- updated Italian translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.4 - 2005-11-18\n\n- fixed security issues\n- full support for IBM DB2 databases\n- added re-ordering of sub-categories\n- added Firefox/Mozilla search plugin\n- updated Hebrew translation\n- updated Simplified Chinese translation\n- updated Spanish translation\n- updated Italian translation\n- updated Japanese translation\n- updated Danish translation\n- some minor improvements\n- many minor bugfixes\n\n### phpMyFAQ v1.5.3 - 2005-10-15\n\n- added several security enhancements\n- added Greek translation\n- improved RSS support\n- improved backup/restore frontend\n- updated Indonasian translation\n- updated bundled Net_IDNA class\n- many minor bugfixes\n\n### phpMyFAQ v1.5.2 - 2005-09-23\n\n- fixed serious security issues\n- full support for SQLite\n- more compliance with phpMyFAQ 1.4.x templates\n- many minor bugfixes\n\n### phpMyFAQ v1.5.1 - 2005-09-19\n\n- added experimental support for SQLite\n- added dynamic Sitemap\n- added Norwegian Bokm\ufffdl translation\n- improved image handling in PDF export\n- some minor bugfixes\n\n### phpMyFAQ v1.5.0 - 2005-08-20\n\n- full support for PostgreSQL databases\n- full support for Sybase databases\n- full support for MS SQL databases\n- full support for MySQL 4.1/5.0 databases\n- experimental support for IBM DB2 databases\n- LDAP support as an additional option\n- one entry in various categories\n- mod_rewrite support\n- faster template engine parses PHP code\n- rewritten PDF export\n- complete XML, XHTML and DocBook XML exports\n- many code and performance improvements and code cleanup\n- better RSS support\n- updated bundled htmlArea\n- PHP 5.x compatible\n\n### phpMyFAQ v1.4.10 - 2005-08-01\n\n- compatibility to PHP 4.4.0\n\n### phpMyFAQ v1.4.9 - 2005-06-29\n\n- fixed serious security issue in bundled XML-RPC component\n- some minor bugfixes\n\n### phpMyFAQ v1.4.8 - 2005-04-11\n\n- fixed bug with images in PDFs\n- fixed bug with URLs in export\n- updated Japanese language file\n- updated Korean translation\n- some minor bugfixes\n\n### phpMyFAQ v1.4.7 - 2005-03-06\n\n- fixed possible SQL injection bug\n- some minor bugfixes\n\n### phpMyFAQ v1.4.6 - 2005-02-20\n\n- updated Polish language file\n- updated French language file\n- some minor bugfixes\n\n### phpMyFAQ v1.4.5 - 2005-01-21\n\n- updated Japanese language file\n- updated Chinese (Traditional) translation\n- some minor bugfixes\n\n### phpMyFAQ v1.4.4 - 2004-12-06\n\n- added Romanian translation\n- added Chinese (Traditional) translation\n- many bugfixes\n\n### phpMyFAQ v1.4.3 - 2004-11-05\n\n- added Turkish translation\n- added Indonesian translation\n- updated German language file\n- many bugfixes\n\n### phpMyFAQ v1.4.2 - 2004-10-10\n\n- added Finnish translation\n- added Hebrew translation\n- fulltext search inside admin section\n- some accessibility improvements\n- many bugfixes\n\n### phpMyFAQ v1.4.1 - 2004-08-16\n\n- improved category administration\n- added Swedish translation\n- added Korean translation\n- added Japanese translation\n- custom admin menu according to user permissions\n- easier record deleting\n- session and language stored in a cookie\n- less SQL queries in admin section\n- updated install script\n- updated Chinese language file\n- updated Portoguese language file\n- improved IDN domain support\n- improved accessibility\n- many bugfixes\n\n### phpMyFAQ v1.4.0a - 2004-07-27\n\n- fixed security vulnerability\n\n### phpMyFAQ v1.4.0 - 2004-07-22\n\n- added WYSIWYG Editor\n- added Image Manager\n- added new category module\n- added support for XML-RPC\n- added support for timezones\n- added ISO 639 support in language files\n- added script that converts BBCode in XHTML\n- better PDF export with table of contents\n- new and better installer\n- new XHTML based templates\n- automatic language detection\n- improved IDN domain support\n- password reset function\n- include internal links with dropdown box\n- many code improvements and code cleanup\n- many bug fixes\n\n### phpMyFAQ v1.3.14 - 2004-06-09:\n\n- added Slovenian translation\n- added Serbian translation\n- added Danish translation\n- improved performance on Windows Server 2003 and PHP with ISAPI\n- fixed some bugs\n\n### phpMyFAQ v1.3.13 - 2004-05-17:\n\n- fixed serious security vulnerability (Stefan Esser)\n- fixed some bugs\n\n### phpMyFAQ v1.3.12 - 2004-04-21:\n\n- added Hungarian language file\n- fixed some bugs\n\n### phpMyFAQ v1.3.11a - 2004-04-13:\n\n- fixed some annoying bugs\n\n### phpMyFAQ v1.3.11 - 2004-04-07:\n\n- added Chinese translation\n- added Czech translation\n- added support for IDN domains\n- many bugfixes\n\n### phpMyFAQ v1.3.10 - 2004-02-12\n\n- updated bundled FPDF class\n- added Arabic language file\n- many bugfixes\n\n### phpMyFAQ v1.3.9pl1 - 2004-01-02\n\n- added Vietnamese language file\n- bugfixes\n\n### phpMyFAQ v1.3.9 - 2003-11-26\n\n- improvements at highlighting searched words\n- updated english language file\n- bBCode support for the news\n- better category browsing\n- graphical analysis of votings\n- date informations ISO 8601 compliant\n- some optimized code\n- added Russian language file\n- enhanced BB-Code Editor\n- fixed some multibyte issues\n- improved display of images in PDF export\n- some fixes for PHP5\n- some bug fixes\n\n### phpMyFAQ v1.3.8 - 2003-10-23\n\n- added latvian language file\n- fixed italian language file\n- bugfix in backup module (IE problem)\n- support for MySQL 4.0 full text search\n- some improvements in installer (Bug #0000017)\n- many bugfixes in the backup module\n- better performance in admin area\n- fixed cookie problem\n- fixed a bug in the BB-Code Parser\n- fixed a bug in the language files\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.7 - 2003-09-19\n\n- dedicated to Johnny Cash\n- added a patch against Verisign\n- fixed Windows bug in Send2Friend\n- some improvements in the BB-Code-Parser\n- fixed some layout problems\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.6 - 2003-09-01\n\n- fixed bug in installer\n\n### phpMyFAQ v1.3.5 - 2003-08-31\n\n- basic internal linking of FAQ records\n- RSS-Feed-Export via Cronjob\n- solved some PDF problems\n- updated english language file\n- some improvements in the BB-Code-Parser\n- some bug fixes\n\n### phpMyFAQ v1.3.4 - 2003-08-03\n\n- improvements at highlighting searched words\n- fixed bug in installer\n- added new BB-Code-Parser\n- added italian translation\n- updated dutch and french language file\n- little changes in the language files\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.3 - 2003-06-26\n\n- better installation\n- default password removed\n- added IP ban lists\n- added portuguese translation\n- added spanish translation\n- selection of default language and setting the password at installation\n- changed default language from german to english\n- better PDF export with support for pictures\n- export all records to one PDF file\n- user management improved\n- added allow/disallow comment function\n- added copyright notice and url in the printer friendly page and the pdf file\n- backup files are called phpmyfaq.<date>.sql instead of attachment.php\n- fixed bug at installation when using MySQL 4\n- fixed bug when deleting news\n- fixed bug when deleting comments\n- many minor bug fixes\n\n### phpMyFAQ v1.3.2 - 2003-05-25\n\n- more verifications in update script\n- added new category sorting\n- added polish language file\n- fixed bug in backup\n- added reload locking in voting module\n- BB-Code help with multi-language support\n- better navigation\n- minor bug fixes\n\n### phpMyFAQ v1.3.1 - 2003-05-02\n\n- added preview at record editing\n- added RSS-Feeds from Top 10, News and latest records\n- better navigation in admin area\n- system information in admin area\n- added french language file\n- fixed bug in session search\n- fixed bugs in adding records\n- solved cookie problems\n- fixed a problem with send2friend link\n- fixed delimiter bug with Apache2 and PHP 4.3\n- minor bug fixes\n\n### phpMyFAQ v1.3.0 - 2003-04-17\n\n- support for multi language records\n- enhanced security\n- encrypted passwords\n- admin area uses modules\n- PDF support\n- more support of XML with XML namespaces and XML schema\n- BBCode editor, support for more bb code\n- PHP syntax highlighting\n- database abstraction layer\n- english documentation\n- many bugfixes\n\n### phpMyFAQ v1.2.5b - 2003-03-24\n\n- bugfixes\n\n### phpMyFAQ v1.2.5a - 2003-03-04\n\n- uBB code bugfixes\n- top ten bugfix\n\n### phpMyFAQ v1.2.5 - 2003-02-02\n\n- bugfixes\n\n### phpMyFAQ v1.2.4 - 2003-01-31\n\n- better checking of variables\n- bugs in admin area fixed\n- better printing function\n\n### phpMyFAQ v1.2.3 - 2002-11-30\n\n- check whether installation oder update script isn't deleted\n- fixed bugs in language files, the news module and open questions\n- automatic langauge detection in admin area\n\n### phpMyFAQ v1.2.2 - 2002-11-04\n\n- minor bug fixes\n\n### phpMyFAQ v1.2.1 - 2002-10-24\n\n- better update function and language selection\n- solved cookie problems\n- many bug fixes, thanks to sascha AT rootforum DOT de\n\n### phpMyFAQ v1.2.0 - 2002-10-09\n\n- phpMyFAQ is now Open Source software\n- template system for free layouts\n- fully compatible with PHP 4.1, PHP 4.2 and PHP 4.3 (register_globals = off)\n- all color and font definitions with CSS\n- better SQL queries\n- better category navigation\n- better search engine\n- better Send2Friend function\n- better installation script\n- many bugfixes\n\n### phpMyFAQ v1.1.5 - 2002-06-23\n\n- minor bug fixes\n- russian language file\n\n### phpMyFAQ v1.1.4a - 2002-06-08\n\n- minor bug fixes for PHP 4.1.0\n\n### phpMyFAQ v1.1.4 - 2002-05-24\n\n- minor bug fixes\n- rewrite of PHP code for better performance\n- change of the CSS file from style.php to style.css\n- better HTML code\n- voting can be switched off\n\n### phpMyFAQ v1.1.3 - 2002-05-01\n\n- fixed bug in UBB parser\n- fixed bugs in viewing comments\n- rewrite of the PHP code\n\n### phpMyFAQ v1.1.2 - 2002-03-22\n\n- added Send2Friend function\n- minor bug fixes\n\n### phpMyFAQ v1.1.1 - 2002-03-06\n\n- minor bug fixes\n\n### phpMyFAQ v1.1.0 - 2002-02-11\n\n- porting to PHP4\n- many bugfixes\n- more functions in the attachments module\n- support for sub categories\n- user tracking and admin logging can be switched off\n- better installation script\n- better PHP code\n- admin area supports Netscape 4.x\n- no actions could be performed without any records\n- better admin logging\n- admin account cannot be deleted (security fix)\n- better documention\n\n### phpMyFAQ v1.0.1a - 2001-10-15\n\n- file ending .php instead of .php3\n\n### phpMyFAQ v1.0.1 - 2001-10-10\n\n- fixed bugs in installation and update script\n\n### phpMyFAQ v1.0 - 2001-09-30\n\n- minor bug fixes\n\n### phpMyFAQ v0.95 - 2001-09-11\n\n- cleaned MySQL table names\n- documentation\n- phpMyFAQ is HTML 4.0 valid\n- minor bug fixes\n\n### phpMyFAQ v0.90 - 2001-08-23\n\n- added update function for phpMyFAQ v0.80\n- added question _ answer _ system\n- configurable design of the admin area\n- minor bug fixes\n\n### phpMyFAQ v0.87 - 2001-07-20\n\n- top Ten and newest records can be switched off\n- minor bug fixes\n\n### phpMyFAQ v0.86 - 2001-07-10\n\n- uBB parser fixed\n- minor bug fixes\n\n### phpMyFAQ v0.85 - 2001-07-08\n\n- added backup module (Import and Export)\n- added UBB-Code support\n- records can be exported to XML\n- minor bug fixes\n\n### phpMyFAQ v0.80a - 2001-06-07\n\n- minor bug fixes\n\n### phpMyFAQ v0.80 - 2001-05-30\n\n- added form for questions\n- added Top 5 of the newest articles\n- added support for attachments for records in admin area\n- added support for adding records in admin area\n- configuration editable in admin area\n- showing number of users online\n- print function\n- better support in writing comments\n- bugfix: fixed bad output in comments with HTML\n\n### phpMyFAQ v0.70 - 2001-04-27\n\n- installation script\n- better right management in admin area\n- free designs in configuration possible\n- added support for language files (german, english)\n- bugfix: fixed a problem when deleting comments\n\n### phpMyFAQ v0.666 - 2001-04-10\n\n- added support for categories\n- added voting system\n- added support for deleting comments\n- minor bug fixes\n\n### phpMyFAQ v0.65 - 2001-03-18\n\n- added support for comments\n- added support for FAQ news\n- better search engine\n\n### phpMyFAQ v0.60 - 2001-02-22\n\n- first released version\n\nAll versions before 0.60 were internal developer versions.\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file, You can\nobtain one at http://mozilla.org/MPL/2.0/.\n\nSoftware distributed under the License is distributed on an \"AS IS\"\nbasis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the\nLicense for the specific language governing rights and limitations\nunder the License.\n\nCopyright \u00a9 2001-2022 Thorsten Rinne and the phpMyFAQ Team\n", "<?php\n\n/**\n * Delete open questions.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package phpMyFAQ\n * @author Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2003-2022 phpMyFAQ Team\n * @license http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link https://www.phpmyfaq.de\n * @since 2003-02-24\n */\n\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Date;\nuse phpMyFAQ\\Filter;\nuse phpMyFAQ\\Question;\n\nif (!defined('IS_VALID_PHPMYFAQ')) {\n    http_response_code(400);\n    exit();\n}\n?>\n<div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n  <h1 class=\"h2\">\n    <i aria-hidden=\"true\" class=\"fa fa-question-circle-o\"></i>\n      <?= $PMF_LANG['msgOpenQuestions'] ?>\n  </h1>\n</div>\n\n<div class=\"row\">\n  <div class=\"col-lg-12\">\n      <?php\n      if ($user->perm->hasPermission($user->getUserId(), 'delquestion')) {\n          $category = new Category($faqConfig, [], false);\n          $question = new Question($faqConfig);\n          $category->setUser($currentAdminUser);\n          $category->setGroups($currentAdminGroups);\n          $date = new Date($faqConfig);\n          $questionId = Filter::filterInput(INPUT_GET, 'id', FILTER_VALIDATE_INT);\n          $csrfToken = Filter::filterInput(INPUT_GET, 'csrf', FILTER_UNSAFE_RAW);\n\n          if (!isset($_SESSION['phpmyfaq_csrf_token']) || $_SESSION['phpmyfaq_csrf_token'] !== $csrfToken) {\n              $csrfChecked = false;\n          } else {\n              $csrfChecked = true;\n          }\n\n          $toggle = Filter::filterInput(INPUT_GET, 'is_visible', FILTER_UNSAFE_RAW);\n          if ($csrfChecked && $toggle === 'toggle') {\n              $isVisible = $question->getVisibility($questionId);\n              if (!is_null($isVisible)) {\n                  $question->setVisibility($questionId, ($isVisible == 'N' ? 'Y' : 'N'));\n              }\n          }\n\n            echo '<div id=\"returnMessage\"></div>';\n\n            $openQuestions = $question->getAllOpenQuestions();\n\n            if (count($openQuestions) > 0) {\n                ?>\n            <form id=\"questionSelection\" name=\"questionSelection\" method=\"post\" accept-charset=\"utf-8\">\n              <input type=\"hidden\" name=\"csrf\" value=\"<?= $user->getCsrfTokenFromSession() ?>\">\n              <table class=\"table table-striped\">\n                <thead>\n                <tr>\n                  <th></th>\n                  <th><?= $PMF_LANG['ad_entry_author'] ?></th>\n                  <th><?= $PMF_LANG['ad_entry_theme'] ?></th>\n                  <th colspan=\"2\"><?= $PMF_LANG['ad_entry_visibility'] ?>?</th>\n                </tr>\n                </thead>\n                <tbody>\n                <?php\n                foreach ($openQuestions as $openQuestion) {\n                    ?>\n                  <tr>\n                    <td>\n                      <label>\n                        <input id=\"questions[]\" name=\"questions[]\" value=\"<?= $openQuestion->getId() ?>\" type=\"checkbox\">\n                      </label>\n                    </td>\n                    <td>\n                        <?= $date->format(Date::createIsoDate($openQuestion->getCreated())) ?>\n                      <br>\n                      <a href=\"mailto:<?= $openQuestion->getEmail() ?>\">\n                          <?= $openQuestion->getUsername() ?>\n                      </a>\n                    </td>\n                    <td>\n                      <strong><?= $category->categoryName[$openQuestion->getCategoryId()]['name'] ?></strong>\n                      <br>\n                        <?= $openQuestion->getQuestion() ?>\n                    </td>\n                    <td>\n                      <a href=\"?action=question&amp;id=<?= $openQuestion->getId() ?>&amp;is_visible=toggle&csrf=<?= $user->getCsrfTokenFromSession() ?>\"\n                         class=\"btn btn-info\">\n                          <?= ('Y' === $openQuestion->isVisible()) ? $PMF_LANG['ad_gen_yes'] : $PMF_LANG['ad_gen_no'] ?>\n                      </a>\n                    </td>\n                    <td>\n                        <?php if ($faqConfig->get('records.enableCloseQuestion') && $openQuestion->getAnswerId()) { ?>\n                        <a href=\"?action=editentry&amp;id=<?= $openQuestion->getAnswerId() ?>&amp;lang=<?= $faqLangCode ?>\"\n                           class=\"btn btn-success\">\n                            <?= $PMF_LANG['msg2answerFAQ'] ?>\n                        </a>\n                        <?php } else { ?>\n                        <a href=\"?action=takequestion&amp;id=<?= $openQuestion->getId() ?>\" class=\"btn btn-success\">\n                            <?= $PMF_LANG['ad_ques_take'] ?>\n                        </a>\n                        <?php } ?>\n                    </td>\n                  </tr>\n                <?php } ?>\n                </tbody>\n              </table>\n\n              <div class=\"text-right\">\n                <button class=\"btn btn-danger\" id=\"submitDeleteQuestions\" type=\"submit\">\n                    <?= $PMF_LANG['ad_entry_delete'] ?>\n                </button>\n              </div>\n\n            </form>\n            <script src=\"assets/js/record.js\"></script>\n                <?php\n            } else {\n                echo $PMF_LANG['msgNoQuestionsAvailable'];\n            }\n        } else {\n            echo $PMF_LANG['err_NotAuth'];\n        }\n        ?>\n  </div>\n</div>\n", "<?php\n\n/**\n * The Ajax Service Layer.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package phpMyFAQ\n * @author Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2010-2022 phpMyFAQ Team\n * @license http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link https://www.phpmyfaq.de\n * @since 2010-09-15\n */\n\nconst IS_VALID_PHPMYFAQ = null;\n\nuse phpMyFAQ\\Captcha;\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Comments;\nuse phpMyFAQ\\Entity\\Comment;\nuse phpMyFAQ\\Entity\\CommentType;\nuse phpMyFAQ\\Faq;\nuse phpMyFAQ\\Faq\\FaqMetaData;\nuse phpMyFAQ\\Faq\\FaqPermission;\nuse phpMyFAQ\\Filter;\nuse phpMyFAQ\\Helper\\CategoryHelper;\nuse phpMyFAQ\\Helper\\FaqHelper;\nuse phpMyFAQ\\Helper\\HttpHelper;\nuse phpMyFAQ\\Helper\\QuestionHelper;\nuse phpMyFAQ\\Helper\\RegistrationHelper;\nuse phpMyFAQ\\Language;\nuse phpMyFAQ\\Language\\Plurals;\nuse phpMyFAQ\\Link;\nuse phpMyFAQ\\Mail;\nuse phpMyFAQ\\Network;\nuse phpMyFAQ\\News;\nuse phpMyFAQ\\Notification;\nuse phpMyFAQ\\Question;\nuse phpMyFAQ\\Rating;\nuse phpMyFAQ\\Search;\nuse phpMyFAQ\\Search\\SearchResultSet;\nuse phpMyFAQ\\Session;\nuse phpMyFAQ\\Stopwords;\nuse phpMyFAQ\\Strings;\nuse phpMyFAQ\\User;\nuse phpMyFAQ\\User\\CurrentUser;\nuse phpMyFAQ\\Utils;\n\n//\n// Bootstrapping\n//\nrequire 'src/Bootstrap.php';\n\n$action = Filter::filterInput(INPUT_GET, 'action', FILTER_UNSAFE_RAW);\n$ajaxLang = Filter::filterInput(INPUT_POST, 'lang', FILTER_UNSAFE_RAW);\n$code = Filter::filterInput(INPUT_POST, 'captcha', FILTER_UNSAFE_RAW);\n$currentToken = Filter::filterInput(INPUT_POST, 'csrf', FILTER_UNSAFE_RAW);\n\n$Language = new Language($faqConfig);\n$languageCode = $Language->setLanguage($faqConfig->get('main.languageDetection'), $faqConfig->get('main.language'));\nrequire_once 'lang/language_en.php';\n$faqConfig->setLanguage($Language);\n\nif (Language::isASupportedLanguage($ajaxLang)) {\n    $languageCode = trim($ajaxLang);\n    require_once 'lang/language_' . $languageCode . '.php';\n} else {\n    $languageCode = 'en';\n    require_once 'lang/language_en.php';\n}\n\n//\n// Load plurals support for selected language\n//\n$plr = new Plurals($PMF_LANG);\n\n//\n// Initializing static string wrapper\n//\nStrings::init($languageCode);\n\n//\n// Send headers\n//\n$http = new HttpHelper();\n$http->setContentType('application/json');\n\n$faqSession = new Session($faqConfig);\n$network = new Network($faqConfig);\n$stopWords = new Stopwords($faqConfig);\n\nif (!$network->checkIp($_SERVER['REMOTE_ADDR'])) {\n    $message = ['error' => $PMF_LANG['err_bannedIP']];\n}\n\n//\n// Check, if user is logged in\n//\n$user = CurrentUser::getFromCookie($faqConfig);\nif (!$user instanceof CurrentUser) {\n    $user = CurrentUser::getFromSession($faqConfig);\n}\nif ($user instanceof CurrentUser) {\n    $isLoggedIn = true;\n} else {\n    $isLoggedIn = false;\n}\n\n//\n// Check captcha\n//\n$captcha = new Captcha($faqConfig);\n$captcha->setUserIsLoggedIn($isLoggedIn);\n\nif (\n'savevoting' !== $action && 'saveuserdata' !== $action && 'changepassword' !== $action && !is_null($code) &&\n    !$captcha->checkCaptchaCode($code)\n) {\n    $message = ['error' => $PMF_LANG['msgCaptcha']];\n}\n\n//\n// Check if the user is logged in when FAQ is completely secured\n//\nif (\n    false === $isLoggedIn && $faqConfig->get('security.enableLoginOnly') &&\n    'changepassword' !== $action && 'saveregistration' !== $action\n) {\n    $message = ['error' => $PMF_LANG['ad_msg_noauth']];\n}\n\nif (isset($message['error'])) {\n    $http->sendJsonWithHeaders($message);\n    exit();\n}\n\n// Save user generated content\nswitch ($action) {\n    //\n    // Comments\n    //\n    case 'savecomment':\n        if (\n            !$faqConfig->get('records.allowCommentsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addcomment')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $oComment = new Comments($faqConfig);\n        $category = new Category($faqConfig);\n        $type = Filter::filterInput(INPUT_POST, 'type', FILTER_UNSAFE_RAW);\n        $faqId = Filter::filterInput(INPUT_POST, 'id', FILTER_VALIDATE_INT, 0);\n        $newsId = Filter::filterInput(INPUT_POST, 'newsId', FILTER_VALIDATE_INT);\n        $username = Filter::filterInput(INPUT_POST, 'user', FILTER_UNSAFE_RAW);\n        $mailer = Filter::filterInput(INPUT_POST, 'mail', FILTER_VALIDATE_EMAIL);\n        $comment = Filter::filterInput(INPUT_POST, 'comment_text', FILTER_UNSAFE_RAW);\n\n        switch ($type) {\n            case 'news':\n                $id = $newsId;\n                break;\n            case 'faq';\n                $id = $faqId;\n                break;\n        }\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($mailer)) {\n            $mailer = $faqConfig->getAdminEmail();\n        }\n\n        // Check display name and e-mail address for not logged in users\n        if (false === $isLoggedIn) {\n            $user = new User($faqConfig);\n            if (true === $user->checkDisplayName($username) && true === $user->checkMailAddress($mailer)) {\n                $message = ['error' => '-' . $PMF_LANG['err_SaveComment']];\n                break;\n            }\n        }\n        \n        if (\n            !is_null($username) && !is_null($mailer) && !is_null($comment) && $stopWords->checkBannedWord(\n                $comment\n            ) && !$faq->commentDisabled(\n                $id,\n                $languageCode,\n                $type\n            )\n        ) {\n            try {\n                $faqSession->userTracking('save_comment', $id);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n\n            $commentEntity = new Comment();\n            $commentEntity\n                ->setRecordId($id)\n                ->setType($type)\n                ->setUsername($username)\n                ->setEmail($mailer)\n                ->setComment(nl2br($comment))\n                ->setDate($_SERVER['REQUEST_TIME']);\n\n            if ($oComment->addComment($commentEntity)) {\n                $emailTo = $faqConfig->getAdminEmail();\n                $title = '';\n                $urlToContent = '';\n                if ('faq' == $type) {\n                    $faq->getRecord($id);\n                    if ($faq->faqRecord['email'] != '') {\n                        $emailTo = $faq->faqRecord['email'];\n                    }\n\n                    $title = $faq->getRecordTitle($id);\n\n                    $faqUrl = sprintf(\n                        '%s?action=faq&cat=%d&id=%d&artlang=%s',\n                        $faqConfig->getDefaultUrl(),\n                        $category->getCategoryIdFromFaq($faq->faqRecord['id']),\n                        $faq->faqRecord['id'],\n                        $faq->faqRecord['lang']\n                    );\n                    $oLink = new Link($faqUrl, $faqConfig);\n                    $oLink->itemTitle = $faq->faqRecord['title'];\n                    $urlToContent = $oLink->toString();\n                } else {\n                    $news = new News($faqConfig);\n                    $newsData = $news->getNewsEntry($id);\n                    if ($newsData['authorEmail'] != '') {\n                        $emailTo = $newsData['authorEmail'];\n                    }\n\n                    $title = $newsData['header'];\n\n                    $link = sprintf(\n                        '%s?action=news&newsid=%d&newslang=%s',\n                        $faqConfig->getDefaultUrl(),\n                        $newsData['id'],\n                        $newsData['lang']\n                    );\n                    $oLink = new Link($link, $faqConfig);\n                    $oLink->itemTitle = $newsData['header'];\n                    $urlToContent = $oLink->toString();\n                }\n\n                $commentMail =\n                    'User: ' . $commentEntity->getUsername() . ', mailto:' . $commentEntity->getEmail() . \"\\n\" .\n                    'Title: ' . $title . \"\\n\" .\n                    'New comment posted here: ' . $urlToContent .\n                    \"\\n\\n\" .\n                    wordwrap($comment, 72);\n\n                $send = [];\n                $mailer = new Mail($faqConfig);\n                $mailer->setReplyTo($commentEntity->getEmail(), $commentEntity->getUsername());\n                $mailer->addTo($emailTo);\n\n                $send[$emailTo] = 1;\n                $send[$faqConfig->getAdminEmail()] = 1;\n\n                if ($type === CommentType::FAQ) {\n                    // Let the category owner of a FAQ get a copy of the message\n                    $category = new Category($faqConfig);\n                    $categories = $category->getCategoryIdsFromFaq($faq->faqRecord['id']);\n                    foreach ($categories as $_category) {\n                        $userId = $category->getOwner($_category);\n                        $catUser = new User($faqConfig);\n                        $catUser->getUserById($userId);\n                        $catOwnerEmail = $catUser->getUserData('email');\n\n                        if ($catOwnerEmail !== '') {\n                            if (!isset($send[$catOwnerEmail]) && $catOwnerEmail !== $emailTo) {\n                                $mailer->addCc($catOwnerEmail);\n                                $send[$catOwnerEmail] = 1;\n                            }\n                        }\n                    }\n                }\n\n                $mailer->subject = $faqConfig->getTitle() . ': New comment for \"' . $title . '\"';\n                $mailer->message = strip_tags($commentMail);\n\n                $result = $mailer->send();\n                unset($mailer);\n\n                $message = ['success' => $PMF_LANG['msgCommentThanks']];\n            } else {\n                try {\n                    $faqSession->userTracking('error_save_comment', $id);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n                $message = ['error' => $PMF_LANG['err_SaveComment']];\n            }\n        } else {\n            $message = ['error' => 'Please add your name, your e-mail address and a comment!'];\n        }\n        break;\n\n    case 'savefaq':\n        if (\n            !$faqConfig->get('records.allowNewFaqsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addfaq')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $category = new Category($faqConfig);\n        $questionObject = new Question($faqConfig);\n\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $faqId = Filter::filterInput(INPUT_POST, 'faqid', FILTER_VALIDATE_INT);\n        $faqLanguage = Filter::filterInput(INPUT_POST, 'lang', FILTER_UNSAFE_RAW);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n        if ($faqConfig->get('main.enableWysiwygEditorFrontend')) {\n            $answer = Filter::filterInput(INPUT_POST, 'answer', FILTER_SANITIZE_SPECIAL_CHARS);\n            $answer = html_entity_decode($answer);\n        } else {\n            $answer = Filter::filterInput(INPUT_POST, 'answer', FILTER_UNSAFE_RAW);\n            $answer = nl2br($answer);\n        }\n        $translatedAnswer = Filter::filterInput(INPUT_POST, 'translated_answer', FILTER_UNSAFE_RAW);\n        $contentLink = Filter::filterInput(INPUT_POST, 'contentlink', FILTER_UNSAFE_RAW);\n        $contentLink = Filter::filterVar($contentLink, FILTER_VALIDATE_URL);\n        $keywords = Filter::filterInput(INPUT_POST, 'keywords', FILTER_UNSAFE_RAW);\n        $categories = Filter::filterInputArray(\n            INPUT_POST,\n            [\n                'rubrik' => [\n                    'filter' => FILTER_VALIDATE_INT,\n                    'flags' => FILTER_REQUIRE_ARRAY,\n                ],\n            ]\n        );\n\n        // Check on translation\n        if (empty($answer) && !is_null($translatedAnswer)) {\n            $answer = $translatedAnswer;\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !empty($question) &&\n            $stopWords->checkBannedWord(strip_tags($question)) &&\n            !empty($answer) && $stopWords->checkBannedWord(strip_tags($answer)) &&\n            ((is_null($faqId) && !is_null($categories['rubrik'])) || (!is_null($faqId) && !is_null($faqLanguage) &&\n                    Language::isASupportedLanguage($faqLanguage)))\n        ) {\n            $isNew = true;\n            $newLanguage = '';\n\n            if (!is_null($faqId)) {\n                $isNew = false;\n                try {\n                    $faqSession->userTracking('save_new_translation_entry', 0);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n            } else {\n                try {\n                    $faqSession->userTracking('save_new_entry', 0);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n            }\n\n            $isTranslation = false;\n            if (!is_null($faqLanguage)) {\n                $isTranslation = true;\n                $newLanguage = $faqLanguage;\n            }\n\n            if (!is_null($contentLink) && Strings::substr($contentLink, 7) !== '') {\n                $answer = sprintf(\n                    '%s<br><div id=\"newFAQContentLink\">%s<a href=\"http://%s\" target=\"_blank\">%s</a></div>',\n                    $answer,\n                    $PMF_LANG['msgInfo'],\n                    Strings::substr($contentLink, 7),\n                    $contentLink\n                );\n            }\n\n            $autoActivate = $faqConfig->get('records.defaultActivation');\n\n            $newData = [\n                'lang' => ($isTranslation === true ? $newLanguage : $languageCode),\n                'thema' => $question,\n                'active' => ($autoActivate ? FAQ_SQL_ACTIVE_YES : FAQ_SQL_ACTIVE_NO),\n                'sticky' => 0,\n                'content' => $answer,\n                'keywords' => $keywords,\n                'author' => $author,\n                'email' => $email,\n                'comment' => 'y',\n                'date' => date('YmdHis'),\n                'dateStart' => '00000000000000',\n                'dateEnd' => '99991231235959',\n                'linkState' => '',\n                'linkDateCheck' => 0,\n                'notes' => ''\n            ];\n\n            if ($isNew) {\n                $categories = $categories['rubrik'];\n            } else {\n                $newData['id'] = $faqId;\n                $categories = $category->getCategoryIdsFromFaq($newData['id']);\n            }\n\n            $recordId = $faq->addRecord($newData, $isNew);\n\n            $openQuestionId = Filter::filterInput(INPUT_POST, 'openQuestionID', FILTER_VALIDATE_INT);\n            if ($openQuestionId) {\n                if ($faqConfig->get('records.enableDeleteQuestion')) {\n                    $questionObject->deleteQuestion($openQuestionId);\n                } else { // adds this faq record id to the related open question\n                    $questionObject->updateQuestionAnswer($openQuestionId, $recordId, $categories[0]);\n                }\n            }\n\n            $faqMetaData = new FaqMetaData($faqConfig);\n            $faqMetaData\n                ->setFaqId($recordId)\n                ->setFaqLanguage($newData['lang'])\n                ->setCategories($categories)\n                ->save();\n\n            // Let the admin and the category owners to be informed by email of this new entry\n            $categoryHelper = new CategoryHelper();\n            $categoryHelper\n                ->setCategory($category)\n                ->setConfiguration($faqConfig);\n\n            $moderators = $categoryHelper->getModerators($categories);\n\n            try {\n                $notification = new Notification($faqConfig);\n                $notification->sendNewFaqAdded($moderators, $recordId, $faqLanguage);\n            } catch (Exception $e) {\n                // @todo handle exception in v3.2\n            }\n\n\n            $message = [\n                'success' => ($isNew ? $PMF_LANG['msgNewContentThanks'] : $PMF_LANG['msgNewTranslationThanks']),\n            ];\n        } else {\n            $message = [\n                'error' => $PMF_LANG['err_SaveEntries']\n            ];\n        }\n\n        break;\n\n    //\n    // Add question\n    //\n    case 'savequestion':\n        if (\n            !$faqConfig->get('records.allowQuestionsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addquestion')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $cat = new Category($faqConfig);\n        $categories = $cat->getAllCategories();\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $ucategory = Filter::filterInput(INPUT_POST, 'category', FILTER_VALIDATE_INT);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n        $save = Filter::filterInput(INPUT_POST, 'save', FILTER_VALIDATE_INT, 0);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        // If smart answering is disabled, save question immediately\n        if (false === $faqConfig->get('main.enableSmartAnswering')) {\n            $save = true;\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) && $stopWords->checkBannedWord(\n                Strings::htmlspecialchars($question)\n            )\n        ) {\n            if ($faqConfig->get('records.enableVisibilityQuestions')) {\n                $visibility = 'Y';\n            } else {\n                $visibility = 'N';\n            }\n\n            $questionData = [\n                'username' => $author,\n                'email' => $email,\n                'category_id' => $ucategory,\n                'question' => $question,\n                'is_visible' => $visibility\n            ];\n\n            if (false === (bool)$save) {\n                $cleanQuestion = $stopWords->clean($question);\n\n                $user = new CurrentUser($faqConfig);\n                $faqSearch = new Search($faqConfig);\n                $faqSearch->setCategory(new Category($faqConfig));\n                $faqSearch->setCategoryId((int) $ucategory);\n                $faqPermission = new FaqPermission($faqConfig);\n                $faqSearchResult = new SearchResultSet($user, $faqPermission, $faqConfig);\n                $searchResult = [];\n                $mergedResult = [];\n\n                foreach ($cleanQuestion as $word) {\n                    if (!empty($word)) {\n                        $searchResult[] = $faqSearch->search($word, false);\n                    }\n                }\n                foreach ($searchResult as $resultSet) {\n                    foreach ($resultSet as $result) {\n                        $mergedResult[] = $result;\n                    }\n                }\n                $faqSearchResult->reviewResultSet($mergedResult);\n\n                if (0 < $faqSearchResult->getNumberOfResults()) {\n                    $response = sprintf(\n                        '<p>%s</p>',\n                        $plr->getMsg('plmsgSearchAmount', $faqSearchResult->getNumberOfResults())\n                    );\n\n                    $response .= '<ul>';\n\n                    $faqHelper = new FaqHelper($faqConfig);\n                    foreach ($faqSearchResult->getResultSet() as $result) {\n                        $url = sprintf(\n                            '%sindex.php?action=faq&cat=%d&id=%d&artlang=%s',\n                            $faqConfig->getDefaultUrl(),\n                            $result->category_id,\n                            $result->id,\n                            $result->lang\n                        );\n                        $oLink = new Link($url, $faqConfig);\n                        $oLink->text = Utils::chopString($result->question, 15);\n                        $oLink->itemTitle = $result->question;\n\n                        try {\n                            $response .= sprintf(\n                                '<li>%s<br><div class=\"searchpreview\">%s...</div></li>',\n                                $oLink->toHtmlAnchor(),\n                                $faqHelper->renderAnswerPreview($result->answer, 10)\n                            );\n                        } catch (Exception $e) {\n                            // handle exception\n                        }\n                    }\n                    $response .= '</ul>';\n\n                    $message = ['result' => $response];\n                } else {\n                    $questionHelper = new QuestionHelper($faqConfig, $cat);\n                    $questionHelper->sendSuccessMail($questionData, $categories);\n                    $message = ['success' => $PMF_LANG['msgAskThx4Mail']];\n                }\n            } else {\n                $questionHelper = new QuestionHelper($faqConfig, $cat);\n                $questionHelper->sendSuccessMail($questionData, $categories);\n                $message = ['success' => $PMF_LANG['msgAskThx4Mail']];\n            }\n        } else {\n            $message = ['error' => $PMF_LANG['err_SaveQuestion']];\n        }\n\n        break;\n\n    case 'saveregistration':\n        $registration = new RegistrationHelper($faqConfig);\n\n        $fullName = Filter::filterInput(INPUT_POST, 'realname', FILTER_UNSAFE_RAW);\n        $userName = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $isVisible = Filter::filterInput(INPUT_POST, 'is_visible', FILTER_UNSAFE_RAW) ?? false;\n\n        if (!$registration->isDomainWhitelisted($email)) {\n            $message = ['error' => 'The domain is not whitelisted.'];\n            break;\n        }\n\n        if (!is_null($userName) && !is_null($email) && !is_null($fullName)) {\n            $message = $registration->createUser($userName, $fullName, $email, $isVisible);\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    case 'savevoting':\n        $faq = new Faq($faqConfig);\n        $rating = new Rating($faqConfig);\n        $type = Filter::filterInput(INPUT_POST, 'type', FILTER_UNSAFE_RAW, 'faq');\n        $recordId = Filter::filterInput(INPUT_POST, 'id', FILTER_VALIDATE_INT, 0);\n        $vote = Filter::filterInput(INPUT_POST, 'vote', FILTER_VALIDATE_INT);\n        $userIp = Filter::filterVar($_SERVER['REMOTE_ADDR'], FILTER_VALIDATE_IP);\n\n        if (isset($vote) && $rating->check($recordId, $userIp) && $vote > 0 && $vote < 6) {\n            try {\n                $faqSession->userTracking('save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n\n            $votingData = [\n                'record_id' => $recordId,\n                'vote' => $vote,\n                'user_ip' => $userIp,\n            ];\n\n            if (!$rating->getNumberOfVotings($recordId)) {\n                $rating->addVoting($votingData);\n            } else {\n                $rating->update($votingData);\n            }\n            $message = [\n                'success' => $PMF_LANG['msgVoteThanks'],\n                'rating' => $rating->getVotingResult($recordId),\n            ];\n        } elseif (!$rating->check($recordId, $userIp)) {\n            try {\n                $faqSession->userTracking('error_save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n            $message = ['error' => $PMF_LANG['err_VoteTooMuch']];\n        } else {\n            try {\n                $faqSession->userTracking('error_save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n            $message = ['error' => $PMF_LANG['err_noVote']];\n        }\n\n        break;\n\n    // Send user generated mails\n    case 'sendcontact':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) && !empty($question) &&\n            $stopWords->checkBannedWord(Strings::htmlspecialchars($question))\n        ) {\n            $question = sprintf(\n                \"%s %s\\n%s %s\\n\\n %s\",\n                $PMF_LANG['msgNewContentName'],\n                $author,\n                $PMF_LANG['msgNewContentMail'],\n                $email,\n                $question\n            );\n\n            $mailer = new Mail($faqConfig);\n            $mailer->setReplyTo($email, $author);\n            $mailer->addTo($faqConfig->getAdminEmail());\n            $mailer->subject = Utils::resolveMarkers('Feedback: %sitename%', $faqConfig);\n            $mailer->message = $question;\n            $mailer->send();\n\n            unset($mailer);\n\n            $message = ['success' => $PMF_LANG['msgMailContact']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    // Send mails to friends\n    case 'sendtofriends':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $link = Filter::filterInput(INPUT_POST, 'link', FILTER_VALIDATE_URL);\n        $attached = Filter::filterInput(INPUT_POST, 'message', FILTER_UNSAFE_RAW);\n        $mailto = Filter::filterInputArray(\n            INPUT_POST,\n            [\n                'mailto' => [\n                    'filter' => FILTER_VALIDATE_EMAIL,\n                    'flags' => FILTER_REQUIRE_ARRAY | FILTER_NULL_ON_FAILURE,\n                ],\n            ]\n        );\n\n        if (\n            !is_null($author) && !is_null($email) && is_array($mailto) && !empty($mailto['mailto'][0]) &&\n            $stopWords->checkBannedWord(Strings::htmlspecialchars($attached))\n        ) {\n            foreach ($mailto['mailto'] as $recipient) {\n                $recipient = trim(strip_tags($recipient));\n                if (!empty($recipient)) {\n                    $mailer = new Mail($faqConfig);\n                    $mailer->setReplyTo($email, $author);\n                    $mailer->addTo($recipient);\n                    $mailer->subject = $PMF_LANG['msgS2FMailSubject'] . $author;\n                    $mailer->message = sprintf(\n                        \"%s\\r\\n\\r\\n%s\\r\\n%s\\r\\n\\r\\n%s\",\n                        $faqConfig->get('main.send2friendText'),\n                        $PMF_LANG['msgS2FText2'],\n                        $link,\n                        $attached\n                    );\n\n                    // Send the email\n                    $result = $mailer->send();\n                    unset($mailer);\n                    usleep(250);\n                }\n            }\n\n            $message = ['success' => $PMF_LANG['msgS2FThx']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    //\n    // Save user data from UCP\n    //\n    case 'saveuserdata':\n        if (!isset($_SESSION['phpmyfaq_csrf_token']) || $_SESSION['phpmyfaq_csrf_token'] !== $currentToken) {\n            $message = ['error' => $PMF_LANG['ad_msg_noauth']];\n            break;\n        }\n\n        $userId = Filter::filterInput(INPUT_POST, 'userid', FILTER_VALIDATE_INT);\n        $userName = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $isVisible = Filter::filterInput(INPUT_POST, 'is_visible', FILTER_UNSAFE_RAW);\n        $password = Filter::filterInput(INPUT_POST, 'password', FILTER_UNSAFE_RAW);\n        $confirm = Filter::filterInput(INPUT_POST, 'password_confirm', FILTER_UNSAFE_RAW);\n\n        $user = CurrentUser::getFromSession($faqConfig);\n\n        if ($userId !== $user->getUserId()) {\n            $message = ['error' => 'User ID mismatch!'];\n            break;\n        }\n\n        if ($password !== $confirm) {\n            $message = ['error' => $PMF_LANG['ad_user_error_passwordsDontMatch']];\n            break;\n        }\n\n        $userData = [\n            'display_name' => $userName,\n            'email' => $email,\n            'is_visible' => $isVisible === 'on' ? 1 : 0\n        ];\n        $success = $user->setUserData($userData);\n\n        if (0 !== strlen($password) && 0 !== strlen($confirm)) {\n            foreach ($user->getAuthContainer() as $author => $auth) {\n                if ($auth->setReadOnly()) {\n                    continue;\n                }\n                if (!$auth->update($user->getLogin(), $password)) {\n                    $message = ['error' => $auth->error()];\n                    $success = false;\n                } else {\n                    $success = true;\n                }\n            }\n        }\n\n        if ($success) {\n            $message = ['success' => $PMF_LANG['ad_entry_savedsuc']];\n        } else {\n            $message = ['error' => $PMF_LANG['ad_entry_savedfail']];\n        }\n        break;\n\n    //\n    // Change password\n    //\n    case 'changepassword':\n        $username = Filter::filterInput(INPUT_POST, 'username', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n\n        if (!is_null($username) && !is_null($email)) {\n            $user = new CurrentUser($faqConfig);\n            $loginExist = $user->getUserByLogin($username);\n\n            if ($loginExist && ($email == $user->getUserData('email'))) {\n                $newPassword = $user->createPassword();\n                $user->changePassword($newPassword);\n                $text = $PMF_LANG['lostpwd_text_1'] . \"\\nUsername: \" . $username . \"\\nNew Password: \" . $newPassword . \"\\n\\n\" . $PMF_LANG['lostpwd_text_2'];\n\n                $mailer = new Mail($faqConfig);\n                $mailer->addTo($email);\n                $mailer->subject = Utils::resolveMarkers('[%sitename%] Username / password request', $faqConfig);\n                $mailer->message = $text;\n                $result = $mailer->send();\n                unset($mailer);\n                // Trust that the email has been sent\n                $message = ['success' => $PMF_LANG['lostpwd_mail_okay']];\n            } else {\n                $message = ['error' => $PMF_LANG['lostpwd_err_1']];\n            }\n        } else {\n            $message = ['error' => $PMF_LANG['lostpwd_err_2']];\n        }\n        break;\n\n    //\n    // Request removal of user\n    //\n    case 'request-removal':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $loginName = Filter::filterInput(INPUT_POST, 'loginname', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) &&\n            !empty($question) && $stopWords->checkBannedWord(Strings::htmlspecialchars($question))\n        ) {\n            $question = sprintf(\n                \"%s %s\\n%s %s\\n%s %s\\n\\n %s\",\n                $PMF_LANG['ad_user_loginname'],\n                $loginName,\n                $PMF_LANG['msgNewContentName'],\n                $author,\n                $PMF_LANG['msgNewContentMail'],\n                $email,\n                $question\n            );\n\n            $mailer = new Mail($faqConfig);\n            $mailer->setReplyTo($email, $author);\n            $mailer->addTo($faqConfig->getAdminEmail());\n            $mailer->subject = $faqConfig->getTitle() . ': Remove User Request';\n            $mailer->message = $question;\n            $result = $mailer->send();\n            unset($mailer);\n\n            $message = ['success' => $PMF_LANG['msgMailContact']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n}\n\n$http->sendJsonWithHeaders($message);\nexit();\n", "<?php\n\n/**\n * Questions helper class for phpMyFAQ.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\\Helper\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2019-2022 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2019-11-26\n */\n\nnamespace phpMyFAQ\\Helper;\n\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Configuration;\nuse phpMyFAQ\\Mail;\nuse phpMyFAQ\\Question;\nuse phpMyFAQ\\User;\n\n/**\n * Class QuestionHelper\n * @package phpMyFAQ\\Helper\n */\nclass QuestionHelper\n{\n    /** @var Configuration */\n    private $config;\n\n    /** @var Category */\n    private $category;\n\n    /** @var array */\n    private $translation;\n\n    /**\n     * QuestionHelper constructor.\n     * @param Configuration $config\n     * @param Category $category\n     */\n    public function __construct(Configuration $config, Category $category)\n    {\n        global $PMF_LANG;\n        $this->config = $config;\n        $this->category = $category;\n        $this->translation = $PMF_LANG;\n    }\n\n    /**\n     * @param array $questionData\n     * @param $categories\n     */\n    public function sendSuccessMail(array $questionData, $categories)\n    {\n        $questionObject = new Question($this->config);\n        $questionObject->addQuestion($questionData);\n\n        $questionMail = 'User: ' . $questionData['username'] .\n            ', mailto:' . $questionData['email'] . \"\\n\" . $this->translation['msgCategory'] .\n            ': ' . $categories[$questionData['category_id']]['name'] . \"\\n\\n\" .\n            wordwrap($questionData['question'], 72) . \"\\n\\n\" .\n            $this->config->getDefaultUrl() . 'admin/';\n\n        $userId = $this->category->getOwner($questionData['category_id']);\n        $oUser = new User($this->config);\n        $oUser->getUserById($userId);\n\n        $userEmail = $oUser->getUserData('email');\n        $mainAdminEmail = $this->config->getAdminEmail();\n\n        $mailer = new Mail($this->config);\n        $mailer->setReplyTo($questionData['email'], $questionData['username']);\n        $mailer->addTo($mainAdminEmail);\n        // Let the category owner get a copy of the message\n        if (!empty($userEmail) && $mainAdminEmail != $userEmail) {\n            $mailer->addCc($userEmail);\n        }\n        $mailer->subject = $this->config->getTitle() . ': New Question was added.';\n        $mailer->message = $questionMail;\n        $mailer->send();\n        unset($mailer);\n    }\n}\n"], "fixing_code": ["# phpMyFAQ 3.1.9\n\n**Codename \"Poseidon\"**\n\n## CHANGELOG\n\nThis is a log of major user-visible changes in each phpMyFAQ release.\n\n### phpMyFAQ v3.1.9 - 2022-11-\n\n- fixed multiple security vulnerabilities (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.8 - 2022-10-24\n\n- fixed multiple security vulnerabilities (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.7 - 2022-10-02\n\n- fixed CSRF vulnerability (KhanhCM, Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.6 - 2022-07-23\n\n- fixed XSS vulnerability (jhond0e, Thorsten)\n- fixed dismiss error for cookie consent (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.5 - 2022-06-27\n\n- added compatibility with Elasticsearch v8+ (Thorsten)\n- added trust of self-signed certificates with MS SQL (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.4 - 2022-04-25\n\n- added missing assets (Thorsten)\n\n### phpMyFAQ v3.1.3 - 2022-04-24\n\n- fixed login via LDAP (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.1.2 - 2022-03-16\n\n- fixed minor bugs (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.1.1 - 2022-02-14\n\n- fixed enabled debug mode (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.1.0 - 2022-02-12\n\n- Happy 21st Birthday, phpMyFAQ!\n- changed PHP requirement to PHP 7.4+ (Thorsten)\n- added support for PHP 8.0 and PHP 8.1 (Thorsten)\n- added support for Elasticsearch v6+ (Thorsten)\n- added drag'n'drop sorting for main categories (Paolo Caparrelli, Thorsten)\n- added possibility to add users without a password (Thorsten)\n- added export of all users as CSV (Thorsten)\n- added ChartJS as new charting library (Thorsten)\n- added REST API v2.1 to register users and add FAQs (Thorsten)\n- added API client tokens for REST API v2.1 (Thorsten)\n- added opt-in for displaying user data (Thorsten)\n- added mail notifications for new FAQs in admin section (Thorsten)\n- added possibility to login via email address (Thorsten)\n- updated to Bootstrap v4.6 (Thorsten)\n- updated to Composer v2 and improved build (Alexander M. Turek, Thorsten)\n- updated to Twitter API v2 (Thorsten)\n- improved install and update scripts (Thorsten)\n- removed REST API v1 (Thorsten)\n- removed RSS support (Thorsten)\n- removed rewrite support for IIS (Thorsten)\n- removed password hashing with MD5 and SHA-1 (Thorsten)\n- removed OpenSearch support (Thorsten)\n- removed XML export (Thorsten)\n- removed auto-save for FAQs during editing (Thorsten)\n- removed obsolete DbUnit tests (Thorsten)\n- fixed minor bugs (Nico Schmitz-Laux, Thorsten)\n\n### phpMyFAQ v3.0.12 - 2022-01-22\n\n- fixed broken LDAP authentication (Thorsten)\n- updated bundled dependencies (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.11 - 2022-01-18\n\n- fixed enabled debug mode (Thorsten)\n- updated bundled dependencies (Thorsten)\n\n### phpMyFAQ v3.0.10 - 2022-01-17\n\n- fixed multiple XSS and CSRF vulnerabilities (0x7zed, M0rphling, justinp09010, Dennis Yassine, Thorsten)\n- fixed many minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.9 - 2021-04-17\n\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.8 - 2021-02-24\n\n- updated to Bootstrap v4.6 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.7 - 2020-12-23\n\n- fixed XSS vulnerability (Curtis Robinson, Thorsten)\n- added TOC plugin for TinyMCE (Thorsten)\n- removed support for deprecated data-vocabulary.org schema (Thorsten)\n- removed Travis CI build (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.6 - 2020-11-27\n\n- added support for PHP 8.0\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.5 - 2020-10-17\n\n- minor improvements (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.4 - 2020-07-26\n\n- session timeout extended to 5 hours (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.3 - 2020-05-21\n\n- improved FAQ editing (Thorsten)\n- updated to Bootstrap v4.5 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.2 - 2020-04-16\n\n- improved handling of multiple homepage categories (Thorsten)\n- improved FAQ editing (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v3.0.1 - 2020-03-17\n\n- re-added tag cloud on several pages (Thorsten)\n- fixed minor bugs (Thorsten)\n- fixed update issues for PostgreSQL (Thorsten)\n\n### phpMyFAQ v3.0.0 - 2020-02-16\n\n- changed PHP requirement to PHP 7.2+ (Thorsten)\n- added PHP namespaces (Thorsten)\n- added Docker support (Adrien Estanove)\n- added experimental large permissions support with sections (Timo Wolf, Thorsten)\n- added support for Elasticsearch v5+ (Thorsten)\n- added LDAP configuration frontend (Thorsten)\n- added configuration for enable/disable XML sitemap (Thorsten)\n- added support for category images (Thorsten)\n- added support for categories on homepage (Thorsten)\n- added filter functionality in templates (Thorsten)\n- added improved attachment overview (Thorsten)\n- added HTML5 export (Thorsten)\n- added support for EU General Data Protection Regulation (Jochen Steinhilber)\n- added multiple attachment upload (Thorsten)\n- added 404 page template (Thorsten)\n- added Mongolian translation (khaidaw@gmail.com)\n- added support for adding own meta content in templates (Thorsten)\n- added new REST API v2 (includes login) (Thorsten)\n- improved sticky records (Thorsten)\n- improved brute force handling (Thorsten)\n- switched CSS development from LESS to SCSS (Thorsten)\n- template variable syntax compatible with Twig/Handlebars (Thorsten)\n- updated Turkish translation (Can Kirca)\n- updated bundled dependencies (Thorsten)\n- deprecated RSS feeds (Thorsten)\n- deprecated REST API v1 (Thorsten)\n- removed translation admin frontend (Thorsten)\n- removed XHTML export (Thorsten)\n- removed support for ext/mssql (Thorsten)\n- removed bundled Symfony ClassLoader (Thorsten)\n- removed Bower, now using Yarn only (Thorsten)\n- removed Grunt, now using Webpack (Thorsten)\n- removed Modernizr (Thorsten)\n- removed share on Facebook link (Thorsten)\n- removed Facebook Like Button support (Thorsten)\n\n### phpMyFAQ v2.9.13 - 2019-02-14\n\n- fixed XSS vulnerabilities in the bundled Bootstrap version (Thorsten)\n\n### phpMyFAQ v2.9.12 - 2019-02-12\n\n- updated bundled Bootstrap to v3.4.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.11 - 2018-09-02\n\n- fixed multiple vulnerabilities (Thorsten)\n- updated bundled jQuery to v1.12.4 (Thorsten)\n- updated bundled Handlebars to v4.0.11 (Thorsten)\n\n### phpMyFAQ v2.9.10 - 2018-02-17\n\n- updated Dutch translation (https://github.com/joskevos)\n- updated bundled SwiftMailer to v5.4.9 (Thorsten)\n- updated bundled phpseclib to v2.0.9 (Thorsten)\n- updated bundled TinyMCE to v4.6.7 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.9 - 2017-10-19\n\n- fixed multiple XSS and CSRF vulnerabilities (Thorsten)\n- updated bundled Bootstrap to v3.3.7 (Thorsten)\n- updated bundled Font Awesome to v4.7.0 (Thorsten)\n- updated bundled TinyMCE to v4.5.7 (Thorsten)\n- updated bundled HighlightJS to v9.12.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.8 - 2017-07-12\n\n- fixed improper restriction (Thorsten)\n- add LDAP search in sub groups (Thorsten)\n- updated French translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.7 - 2017-04-02\n\n- fixed stored XSS vulnerability (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.6 - 2017-01-27\n\n- fixed possible arbitrary PHP code execution (Thorsten)\n- ready for PHP 7.1 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.5 - 2016-08-31\n\n- fixed minor bugs (Thorsten, Matt Brennan)\n\n### phpMyFAQ v2.9.4 - 2016-08-02\n\n- deactivated debug mode (Thorsten)\n- updated bundled TinyMCE to v4.4.1 (Thorsten)\n- updated bundled Bootstrap to v3.3.7 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.3 - 2016-08-01\n\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.2 - 2016-07-05\n\n- updated bundled phpseclib to v2.0.2 (Thorsten)\n- updated bundled TinyMCE to v4.4.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.1 - 2016-05-31\n\n- fixed stored XSS vulnerability (Kacper Szurek)\n- added new source code paste plugin (Thorsten)\n- removed American English translation (Thorsten)\n- updated bundled TinyMCE to v4.3.12 (Thorsten)\n- updated bundled Typeahead.js to v0.11.0 (Thorsten)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.9.0 - 2016-05-13\n\n- ready for PHP 7 (Thorsten)\n- changed PHP requirement to PHP 5.5+ and PHP 7 (Thorsten)\n- added support for HHVM 3.4.2+ (Thorsten)\n- added support for Elasticsearch (Thorsten)\n- added new mobile first, touch-friendly default layout (Thorsten)\n- added tag intersection based search (Tomer Weinberg, Thorsten)\n- added support for Markdown (Jerry van Kooten, Thorsten)\n- added permissions for guests (Thorsten)\n- added support for multiple LDAP/AD servers (Bernhard M\u00fcller, Thorsten)\n- added experimental support for LDAP dynamic user binding (Thorsten)\n- added frontend dependency management using Bower (Thorsten)\n- added possibility to delete all logged search terms (Thorsten)\n- added support for MySQL sockets\n- added configuration for enable/disable highlighting search terms (Thorsten)\n- added configuration for enable/disable RSS feeds (Thorsten)\n- added configuration to enable/disable gzip compression (Thorsten)\n- added configuration for inactive, hidden categories (Thorsten)\n- added configuration to disable registration (Thorsten)\n- added configuration to allow anonymous downloads (Thorsten)\n- added configuration to override user passwords by admin (Thorsten)\n- added configuration to reset voting and visits (Thorsten)\n- added configuration to disable smart answering (Thorsten)\n- added tag management frontend (Thorsten)\n- added full support for SQLite3 (Peter Kehl)\n- added control for meta robots handling (Thorsten)\n- added configuration for auto-activation of new users (Christopher Andrews)\n- added support for SMTP (Christopher Andrews)\n- added bundled Twitter Typeahead.js (Thorsten)\n- added support for custom headers and footers in PDF exports (Thorsten)\n- added support for language specific open questions (Thorsten)\n- added moderator groups to categories (Thorsten)\n- added FAQ overview page (Thorsten)\n- added JSON export (Thorsten)\n- added private notes to FAQs (Thorsten)\n- added experimental support for bcrypt (Thorsten)\n- extended REST/JSON API (Thorsten)\n- added simple bash based backup script (Thorsten)\n- code base PSR-1 and PSR-2 compatible (Thorsten)\n- updated bundled Symfony ClassLoader to v2.6.13 (Thorsten)\n- updated bundled jQuery to v1.11.2 (Thorsten)\n- updated bundled Bootstrap to v3.3.5 (Thorsten)\n- updated bundled Font Awesome to v4.4.0 (Thorsten)\n- updated bundled Modernizr to v2.8.3 (Thorsten)\n- updated bundled TinyMCE to v4.2.7 (Thorsten)\n- updated bundled SwiftMailer to v5.4.1 (Christopher Andrews, Thorsten)\n- updated bundled Parsedown to v1.5.3 (Jerry van Kooten, Thorsten)\n- updated bundled HighlightJS to v8.9.1 (Thorsten)\n- updated bundled Elasticsearch Client to v2.1.5 (Thorsten)\n- updated Russian translation\n- removed bundled SyntaxHighlighter (Thorsten)\n- dropped support for ext/mysql (Thorsten)\n- dropped support for SQLite2 (Thorsten)\n- dropped support for Zeus Webserver, IIS 6 and lighttpd (Thorsten)\n- fixed a lot of minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.29 - 2016-05-31\n\n- fixed stored XSS vulnerability (Kacper Szurek)\n\n### phpMyFAQ v2.8.28 - 2016-05-13\n\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.27 - 2016-04-11\n\n- fixed CSRF security issue (High-Tech Bridge Security Research Lab)\n- added possibility to use fullscreen videos (Thorsten)\n- added compatibility with MySQL 5.7 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.26 - 2016-02-12\n\n- 15 years of phpMyFAQ Edition\n- dropped support for Internet Explorer 9 and 10 (Thorsten)\n- updated Italian translation (Agnese Morettini)\n- updated Norwegian Bokm\u00e5l translation (Stian Svarholt)\n- updated bundled Symfony ClassLoader to v2.6.13 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.25 - 2015-12-05\n\n- ready for PHP 7 (Thorsten)\n- added American English translation (Stewart Day)\n- updated bundled Symfony ClassLoader to v2.6.11 (Thorsten)\n- updated Japanese translation\n- updated Brazilian Portuguese translation\n- updated Italian translation (Amedeo Fragai)\n- updated Dutch translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.24 - 2015-07-27\n\n- updated Farsi translation (aysabzevar)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.23 - 2015-06-13\n\n- updated bundled Symfony ClassLoader to v2.6.9 (Thorsten)\n- fixed \"remember me\" issues (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.22 - 2015-03-31\n\n- updated Czech translation\n- updated Brazilian Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.21 - 2015-02-28\n\n- added experimental rewrite rules for IIS7 and IIS8 (Thorsten)\n- improved usability in admin backend (Thorsten)\n- improved HTML5 support in editor (Thorsten)\n- improved code coverage (Thorsten)\n- updated Brazilian Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.20 - 2015-02-07\n\n- added experimental support for HHVM 3.4.2+\n- added experimental support for PHP 7.0\n- updated Brazilian Portuguese translation\n- updated French translation (Olivier Binet)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.19 - 2014-12-31\n\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.18 - 2014-11-30\n\n- added clickjacking prevention (Thorsten, Narendra Bhati)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.17 - 2014-11-05\n\n- fixed typo in update script (Thorsten)\n\n### phpMyFAQ v2.8-16 - 2014-11-03\n\n- fixed restore from backup (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.15 - 2014-10-02\n\n- fixed broken installation (Thorsten)\n- updated Farsi translation\n\n### phpMyFAQ v2.8.14 - 2014-10-01\n\n- fixed installation compatibility with MySQL 5.1 and MySQL 5.5 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.13 - 2014-09-16\n\n- fixed multiple security vulnerabilities (Nikhil Srivastava, Thorsten)\n- backported full support for SQLite3 (Peter Kehl)\n- updated Chinese (Traditional) translation (Barlos Lee)\n- updated Farsi translation\n- updated Italian translation\n- updated Spanish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.12 - 2014-08-02\n\n- updated Hebrew translation\n- updated to Twitter OAuth v1.1 (Thorsten)\n- updated bundled Symfony ClassLoader to v2.5.1 (Thorsten)\n- fixed RSS/Atom feed compatibility (Thorsten)\n\n### phpMyFAQ v2.8.11 - 2014-06-28\n\n- updated German translation (Thorsten)\n- updated Romanian translation\n- updated Spanish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.10 - 2014-05-30\n\n- dropped support for Internet Explorer 7 and 8 (Thorsten)\n- updated Brazilian Portuguese translation (Joao Tafarelo)\n- updated bundled TinyMCE to v3.5.11 (Thorsten)\n- updated bundled TCPDF library to v6.0.078 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.9 - 2014-04-28\n\n- updated Thai translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.8 - 2014-03-18\n\n- improved API security (Thorsten)\n- fixed search with Hebrew characters (Thorsten)\n- fixed PDF export with Czech and Slovak characters (Thorsten)\n- fixed a lot of bugs (Thorsten)\n\n### phpMyFAQ v2.8.7 - 2014-02-05\n\n- fixed PHP 5.4 related issue introduced in 2.8.6 (Thorsten)\n\n### phpMyFAQ v2.8.6 - 2014-02-04\n\n- fixed IE8/9 only XSS and CSRF vulnerabilities (JPCERT, Thorsten)\n- updated Hungarian translation\n- updated Spanish translation (Luis Carvalho)\n- updated bundled Symfony ClassLoader to v2.4.1 (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.5 - 2013-12-31\n\n- fixed SSO logins with mod_auth_kerb (Stephane Lapie)\n- improved HTTPS handling (Thorsten)\n- updated Dutch translation\n- updated European Portuguese translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.4 - 2013-11-26\n\n- fixed possible arbitrary PHP code execution (Thorsten)\n- updated Chinese (Traditional) translation\n- updated Dutch translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.3 - 2013-11-18\n\n- fixed missing permission check on Image Manager (Thorsten)\n- improved HTML / CSS code (Michael Meister)\n- updated Brazilian Portuguese translation\n- updated Japanese translation\n- updated Spanish translation\n- updated Swedish translation\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.2 - 2013-07-25\n\n- added French Canada translation (Jacqueline Gazaille T\u00e9treault)\n- improved attachment upload dialog with HTML5 File API (Thorsten)\n- updated Finnish translation (Pasi Pajukoski)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.1 - 2013-06-26\n\n- added support for Grunt (Thorsten)\n- added minified CSS and JavaScript code (Thorsten)\n- improved usability for group administration (Thorsten)\n- fixed broken updates for MS SQL and SQLite (Thorsten)\n- fixed IE8 related JavaScript issues (Thorsten)\n- fixed HTML5 validation errors (Thorsten)\n- fixed Arabic translation (Thorsten)\n- fixed some minor bugs (Thorsten)\n\n### phpMyFAQ v2.8.0 - 2013-05-21\n\n- changed PHP requirement to PHP 5.3.3 and later (Thorsten)\n- phpMyFAQ is now licensed under the terms of Mozilla Public License 2.0 (Thorsten, Florian)\n- added new and improved frontend and backend user interface based on Twitter Bootstrap (Thorsten)\n- added multi site support (Florian, Thorsten)\n- added auto-save for FAQs during editing (Anatoliy)\n- added improved advanced search in subcategories (Thorsten)\n- added possibility to close and delete open questions (Peter Caesar)\n- added possibility to delete multiple open questions (Thorsten)\n- added user control panel (Thorsten)\n- added support for Composer (Thorsten, Alexander M. Turek)\n- added online verification check (Thorsten, Florian)\n- added configurable maintenance mode (Thorsten)\n- added user notification for answered questions (Thorsten)\n- added possibility to deactivate complete FAQ export (Thorsten)\n- added possibility to random sorting of FAQs (Thorsten)\n- added documentation in Markdown with GitHub style HTML export (Thorsten)\n- added support for Gravatar (Thorsten)\n- added user statistic report in admin dashboard (Thorsten)\n- improved usability of administration backend (Thorsten)\n- improved setup and update (Thorsten, Florian)\n- improved security with salted passwords (Thorsten)\n- improved attachment functionality (Thorsten)\n- improved CSS development with LESS (Thorsten)\n- improved minified CSS output (Thorsten)\n- simplified the link verification (Thorsten)\n- dropped support for IBM DB2, Interbase/Firebird and Sybase (Thorsten)\n- dropped support for PHP register_globals and magic_quotes_gpc (Thorsten)\n- dropped support for Google Translate API v1 (Thorsten)\n- removed Delicious support (Thorsten)\n- updated bundled jQuery to v1.9.1 (Thorsten)\n- updated bundled Modernizr to v2.6.2 (Thorsten)\n- updated bundled Bootstrap to v2.3.2 (Thorsten)\n- updated bundled TinyMCE to v3.5.7 (Thorsten)\n- updated bundled Symfony ClassLoader to v2.2.1 (Alexander M. Turek)\n- updated bundled Font Awesome to v3.1 (Thorsten)\n- updated bundled jQuery Sparklines to v2.1.1 (Thorsten)\n- updated PHP dependency management using Composer (Thorsten)\n- updated Czech translation (Jaroslav S\u00edka)\n- updated Portuguese translation\n- fixed some bugs (Thorsten, Florian, Alexander M. Turek)\n\n### phpMyFAQ v2.7.9 - 2012-11-02\n\n- updated Czech translation (Jaroslav S\u00edka)\n- updated Dutch translation\n- updated French translation\n- improved English translation\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.8 - 2012-08-22\n\n- added experimental rewrite rules for Zeus Webserver (Chris Crawshaw)\n- updated Arabic translation\n- updated Dutch translation\n- updated Spanish translation (Lisandro L\u00f3pez Villatoro)\n- improved LDAP handling (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.7 - 2012-07-01\n\n- added Bosnian translation (Alen Durmo)\n- improved complete PDF export (Thorsten)\n- updated Polish translation\n- updated Simplified Chinese translation\n- fixed Arabian and Bengali translation (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.6 - 2012-05-16\n\n- updated Dutch translation\n- updated Polish translation\n- updated Russian translation\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.5 - 2012-04-14\n\n- fixed serious security issue in bundled ImageManager library (Thorsten)\n- full support for Microsoft SQL Server Driver for PHP (Thorsten)\n- added online verification check (Thorsten, Florian)\n- added experimental support for SQLite3 (Thorsten)\n- updated Spanish translation (Reynaldo Martinez P.)\n- fixed Slovak translation (Thorsten)\n- fixed IE9 related JavaScript issues (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.4 - 2012-02-22\n\n- added PDF export for complete FAQ in frontend (Thorsten)\n- updated Japanese translation\n- updated Russian translation (Alexander Melnik)\n- updated Spanish translation\n- fixed backup issue (Thorsten)\n- fixed some bugs (Alexander Melnik, Thorsten, Aco Mitevski)\n\n### phpMyFAQ v2.7.3 - 2012-01-16\n\n- improved PDF export (Thorsten)\n- updated Dutch translation (Almar van Pel)\n- fixed some PostgreSQL related issues (Vince, Thorsten)\n- fixed some attachment related issues (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.2 - 2011-12-31\n\n- improved PDF export and install script (Thorsten)\n- updated Finnish translation (Petteri Hirvonen, Niklas Lamp\u00e9n)\n- updated French translation (C\u00e9dric Frayssinet)\n- updated Chinese (Simplified) translation\n- updated bundled TCPDF library to v5.9.136 (Thorsten)\n- updated bundled jQuery datePicker plugin (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.1 - 2011-10-25\n\n- fixed security issue in bundled ImageManager library (Thorsten)\n- added missing translations (Thorsten)\n- added configurable encryption type for passwords (Thorsten)\n- added support for anonymous login for LDAP servers (Thorsten)\n- added table of contents in PDF exports (Thorsten)\n- fixed some bugs (Thorsten)\n\n### phpMyFAQ v2.7.0 - 2011-09-30\n\n- changed PHP requirement to PHP 5.2.3 (Thorsten)\n- dropped support for MySQL 4.1 (Thorsten)\n- dropped support for Internet Explorer 6 + 7 (Thorsten)\n- dropped support for obsolete Microsummaries (Thorsten)\n- added new HTML5/CSS3 powered layout and administration backend (Thorsten)\n- added configurable search relevance functionality (Gustavo Solt)\n- added automatic translations with Google Translate (Gustavo Solt)\n- added Twitter support (Thorsten, Thomas Zeithaml)\n- added Facebook Like Button support (Thorsten)\n- added \"Bookmark on Delicious\" support (Thorsten)\n- added attachment administration frontend (Anatoliy)\n- added basic authentication support for LDAP groups (Thorsten)\n- added basic support for HTML5 microdata (Thorsten)\n- added functionality of the TinyMCE save button (Gustavo Solt)\n- added basic reporting functionality (Gustavo Solt, Thorsten)\n- added IPv6 support (David Soria Parra)\n- added support for Single Sign On authentication (Thorsten)\n- added support for complete secured FAQ installations (Thorsten)\n- added user configurable date formatting (Thorsten)\n- added possibility to delete user generated search terms (Thorsten)\n- improved usability in frontend and administration backend (Thorsten)\n- enabling Gzip compression by default (Thorsten, Lorenzo Milesi)\n- updated bundled jQuery to v1.6.2 (Thorsten)\n- updated bundled Modernizr to v2.0 (Thorsten)\n- updated bundled TinyMCE to v3.4.2 (Thorsten)\n- updated bundled SyntaxHighlighter to v3.0.83 (Thorsten)\n- updated bundled TCPDF library to v5.9.110 (Thorsten)\n- updated Dutch translation (ronald AT proudsites DOT com)\n- updated German translation (Thorsten)\n- updated Japanese translation (hiromi-suzuki AT garage DOT co DOT jp)\n- updated Portuguese translation (Fernando G. Monteiro)\n- updated Russian translation (cyber-01 AT yandex DOT ru)\n- updated Spanish translation (Jason)\n- fixed a lot of bugs (Thorsten)\n\n### phpMyFAQ v2.6.18 - 2011-09-28\n\n- updated Spanish translation\n- fixed Danish translation\n- fixed minor bugs (Thorsten, Matthew Robinson)\n\n### phpMyFAQ v2.6.17 - 2011-06-08\n\n- updated Portuguese translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.16 - 2011-05-31\n\n- updated Portuguese translation\n- updated Dutch translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.15 - 2011-02-23\n\n- added Malay translation (Ahmad Kamil Zailani)\n- updated Danish translation\n- updated Brazilian Portuguese translation\n- updated Spanish translation (Martin Schenk)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.14 - 2011-01-24\n\n- added rewrite rules for nginx (Florian Anderiasch)\n- added compatibility for MySQL 5.5 with ext/mysql (Thorsten)\n- added support to ban IPs from user tracking files (Thorsten)\n- improved restore functionality (Thorsten)\n- updated Dutch translation (Hans)\n- updated German translation (Thorsten)\n- Fixed issue with sending mails to category administrators (Gustavo Solt)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.13 - 2010-12-15\n\n- clean package after compromised server (Thorsten)\n\n### phpMyFAQ v2.6.12 - 2010-12-13\n\n- added experimental support for MariaDB (Thorsten)\n- added empty LDAP configuration file as example (Thorsten)\n- updated Arabic translation\n- updated Dutch translation (Werner Helmich)\n- updated French translation\n- updated Norwegian Bokm\u00e5l translation (harald@delelisten.no)\n- fixed minor bugs (Thorsten, Gustavo Solt)\n\n### phpMyFAQ v2.6.11 - 2010-11-03\n\n- fixed some bugs introduced with phpMyFAQ 2.6.10 (Thorsten)\n\n### phpMyFAQ v2.6.10 - 2010-11-02\n\n- added several security enhancements (Thorsten)\n- updated Chinese (Simplified) translation\n- updated German translation (Thorsten)\n- updated Portuguese translation (Fernando G. Monteiro)\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.9 - 2010-09-28\n\n- fixed XSS vulnerability (Yam Mesicka, Thorsten)\n- added Slovak translation (Tibor)\n- added minor usability improvement in administration backend (Thorsten)\n- fixed issue with embedded Google Analytics code (Thorsten)\n\n### phpMyFAQ v2.6.8 - 2010-08-31\n\n- dropped Oracle database support (Thorsten)\n- added new TinyMCE plugin for adding internal links by a suggest search (Thorsten)\n- added basic HTML5 powered administration backend (Thorsten)\n- improved setup and update functionality (Thorsten, Bram)\n- updated bundled TCPDF library to v5.6.000 (Thorsten)\n- updated bundled TinyMCE editor component to v3.3.8 (Thorsten)\n- updated bundled phpseclib to v0.2.1 (Thorsten)\n- updated Russian translation\n- updated Portuguese translation\n- fixed XML rendering issue (Thorsten)\n- fixed many bugs (Thorsten, Bram)\n\n### phpMyFAQ v2.6.7 - 2010-07-29\n\n- refactored search backend (Thorsten)\n- improved pagination functionality (Thorsten)\n- fixed various problems with Microsoft SQL Server Driver for PHP (Thorsten)\n- fixed minor bugs (Thorsten, Aaron Burgie)\n\n### phpMyFAQ v2.6.6 - 2010-06-21\n\n- refactored database abstraction (Thorsten)\n- fixed OpenLDAP authentication (Franky)\n- fixed duplication of search results (Aaron Burgie)\n- fixed issue with duplicate sitemap characters (Aaron Burgie)\n- fixed solution ID issues (Thorsten)\n- improved Glossary deletion workflow (Thorsten)\n- updated Brazilian Portuguese translation\n- updated Norwegian Bokm\u00e5l translation\n- fixed minor bugs (Thorsten, Philip Mikas)\n\n### phpMyFAQ v2.6.5 - 2010-05-24\n\n- updated bundled TCPDF library to v5.0.009 (Thorsten)\n- updated bundled TinyMCE editor component to v3.3.5.1 (Thorsten)\n- refactored OpenSearch plugin code base (Thorsten)\n- fixed small update issues in update script (Thorsten)\n- fixed missing language fallback issue in instant response (Thorsten)\n- fixed user deletion in admin backend (Thorsten)\n- fixed backup/restore bug (Thorsten)\n- updated Polish translation\n- updated Russian translation\n- updated Thai translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.4 - 2010-04-18\n\n- added experimental support for Microsoft SQL Server Driver for PHP (Thorsten)\n- improved FAQ record administration frontend (Thorsten)\n- improved Sitemap titles (Thorsten)\n- updated German translation (Thorsten)\n- updated Romanian translation\n- updated Swedish translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.3 - 2010-03-03\n\n- fixed various mail issues (Thorsten)\n- improved links rewriting (Guillaume Le Maout)\n- improved sitemap for Chinese, Japanese and Korean content (Thorsten)\n- improved meta keyword handling\n- updated Portuguese translation (Fernando G. Monteiro)\n- updated French translation\n- fixed minor bugs (Thorsten)\n\n### phpMyFAQ v2.6.2 - 2010-02-01\n\n- fixed update script issue (Thorsten)\n- fixed display of Chinese, Japanese and Korean content in PDFs (Thorsten)\n- fixed issues with RSS feeds (Thorsten)\n- fixed broken Spanish translation (Thorsten)\n- updated French translation (C\u00e9dric Frayssinet)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.6.1 - 2010-01-24\n\n- updated bundled TCPDF library to v4.8.026 (Thorsten)\n- improved cookie handling (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.6.0 - 2010-01-11\n\n- moved all language files to UTF-8 (Anatoliy)\n- added TCPDF as replacement for FPDF library (Thorsten)\n- added support for TinyMCE translations (Aurimas Fi\u0161eras)\n- added support for multi-language news (Thorsten)\n- added user adjustable template sets and styles (Anatoliy)\n- added support plurals in translations (Aurimas Fi\u0161eras)\n- added share on Facebook link (Thorsten)\n- added a rest/json API (Thorsten)\n- added secure login if SSL is available (Tobias Hommel)\n- added FAQ entry dependent meta description (Thorsten)\n- added experimental support for Microsoft Windows Web App Gallery (Thorsten)\n- improved attachment functionality (Anatoliy)\n- improved install script (Thorsten)\n- improved category view with description (Thorsten)\n- improved FAQ entry activation (Anatoliy)\n- improved user administration (Max K\u00f6hler)\n- improved FAQ entry workflow (Anatoliy, Thorsten)\n- removed Docbook XML export (Thorsten)\n- removed Net_IDNA library (Thorsten)\n- updated Greek translation (Periklis Tsirakidis)\n- updated Lithuanian translation (Aurimas Fi\u0161eras)\n- updated Japanese translation\n\n### phpMyFAQ v2.5.7 - 2010-01-19\n\n- improved glossary detection (Guillaume Le Maout)\n- updated Dutch translation\n- updated Indonasian translation\n- updated Chinese (Simplified) translation\n- updated Japanese translation\n- updated Norwegian Bokmal translation\n- many minor bugfixes (Thorsten, Guillaume Le Maout)\n\n### phpMyFAQ v2.5.6 - 2009-12-22\n\n- updated bundled TinyMCE editor component to v3.2.7 (Thorsten)\n- updated bundled SyntaxHighlighter library to v2.1.364 (Thorsten)\n- updated bundled SyntaxHighlighter plugin for TinyMCE (Thorsten)\n- updated Brazilian Portuguese translation\n- updated Spanish translation\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.5 - 2009-12-01\n\n- fixed IE6/7 only XSS vulnerabilities (Amol Naik, Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.4 - 2009-11-10\n\n- fixed various PostgreSQL related issues (Anatoliy, Thorsten)\n- updated Dutch translation\n- updated Brazilian Portuguese translation\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.3 - 2009-10-19\n\n- switched repository from SVN to git (David Soria Parra, Thorsten)\n- added missing Perl syntax hightlighting (Thorsten)\n- fixed missing info link in news (Thorsten)\n- fixed broken group permission check for instant response (Thorsten)\n- fixed broken attachment download (Thorsten)\n- fixed SQLite problems (David Soria Parra)\n- updated Japanese translation\n\n### phpMyFAQ v2.5.2 - 2009-09-01\n\n- fixed IE6/7 only XSS vulnerability (Thorsten)\n- updated Polish language file (Dariusz Grzesista)\n- updated Chinese language file\n- fixed problem with Czech translation (Anatoliy)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.1 - 2009-08-10\n\n- added support for LDAP-datamapping, e.g. against an Active Directory Server (Lars Scheithauer)\n- added support for multi-domain-authentication, e.g. against an ADS-Global Catalog (Lars Scheithauer)\n- added support for PHP LDAP options (Lars Scheithauer)\n- added Lithuanian translation (Aurimas Fiseras)\n- fixed LDAP issues (Lars Scheithauer)\n- fixed some Oracle issues (Thorsten)\n- improved svn2package script (Rene Treffer)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.5.0 - 2009-07-21\n\n- changed PHP requirement to PHP 5.2 (Thorsten)\n- dropped support for MySQL 4.0 and MaxDB (Thorsten)\n- dropped support for XML-RPC (Thorsten)\n- refactored complete code base to PHP 5.2+ (Thorsten, Matteo)\n- added new and improved new basic layout theme (Charles A. Landemaine)\n- added new administration layout (Thorsten)\n- added new Image Manager in administration backend (Thorsten)\n- added RSS feed for every category (Thorsten)\n- added ability to copy and duplicate FAQ entries (Thorsten)\n- added support for blocks in template engine (Jan Mergler)\n- added public user registration (Elger Thiele)\n- added LDAP authentication (Alberto Cabello Sanchez)\n- added HTTP authentication (Thorsten)\n- added Mail sub system (Matteo)\n- added enable/disable WYSIWYG Editor flag (Thorsten)\n- added most popular searches list (Thorsten)\n- added frontend for search logs statistics (Anatoliy Belsky)\n- added sticky FAQ records (Anatoliy Belsky)\n- added smart answering for user questions (Anatoliy Belsky)\n- added string wrapper for better UTF-8 handling (Anatoliy Belsky)\n- added translation frontend (Anatoliy Belsky)\n- added jQuery 1.3 as replacement for Prototype/Script.aculo.us (Thorsten)\n- added configurable attachment directory (Anatoliy Belsky)\n- added approval permission for FAQs (Anatoliy Belsky)\n- added Hindi translation (Sumeet Raj Aggarwal)\n- improved user administration frontend (Sarah Hermann)\n- improved performance (Thorsten)\n- improved language files (Anatoliy Belsky, Thorsten)\n- ajaxified comment and record administration (Thorsten)\n- updated bundled Net_IDNA to v0.6.3 (Thorsten)\n- updated bundled TinyMCE editor component to v3.2.5 (Thorsten)\n- updated bundled FPDF library to v1.6 (Thorsten)\n- updated Turkish translation (Evren Yurtesen)\n\n### phpMyFAQ v2.0.15 - 2009-06-02\n\n- fixed XSS vulnerability (Thorsten)\n\n### phpMyFAQ v2.0.14 - 2009-05-21\n\n- updated Vietnamese translation (Julien Petitperrin)\n- improved tagging implementation (Thorsten)\n- fixed authentication bypass (Thorsten)\n- fixed content type for RSS feeds (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.13 - 2009-04-20\n\n- added new blocked words for spam protection (Kai)\n- fixed fatal error in PHP 5.3 (David Soria Parra, Thorsten)\n- fixed redirect problem with multiviews in .htaccess (Antonio)\n- fixed problem with visible questions in RSS feed (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.12 - 2009-02-17\n\n- fixed bug with MySQL 6 and ext/mysqli (Johannes)\n- fixed stat call bug in installer on OpenSuse 10.3 (Thorsten)\n- improved SVN checkout script (Rene Treffer)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.11 - 2009-01-22\n\n- updated English and Turkish translation and switched to UTF-8 (Evren Yurtesen)\n- updated Simplified Chinese translation (Techice Young)\n- fixed possible infinity loop bug in categories (Kaoru Izutani)\n- fixed permission bypass issue (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.10 - 2008-11-26\n\n- fixed image bug in PDF (Thorsten)\n- fixed isses in admin log display (Thorsten)\n- re-added missing XML-RPCS library files (Thorsten)\n- fixed PHP warnings and notices (Thorsten)\n- minor bugfixes (Thorsten, Andreas Hansson)\n\n### phpMyFAQ v2.0.9 - 2008-10-17\n\n- dedicated to my uncle Werner\n- fixed content deletion bug (Thorsten)\n- fixed SVN export script (Thorsten)\n- improved comment spam protection (Thorsten)\n- re-added missing css color file (Thorsten)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.8 - 2008-09-11\n\n- fixed security vulnerability in XSS filter (Alexios Fakos at n.runs.com)\n- switched repository from CVS to SVN (Thorsten)\n- fixed session bug with MS SQL (Simon Stewart)\n- fixed login errors with IBM DB2 (Thorsten, Helmut Tessarek)\n- updated French translation (Julien Ross)\n- updated Serbian translation (Slavisa Milojkovic)\n\n### phpMyFAQ v2.0.7 - 2008-05-12\n\n- added Bengali translation (Md. Masum Billah)\n- added Ukrainian translation (Oleg P. Suvolokin and Denis A. Barybin)\n- updated Czech translation (Petr Silon)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.6 - 2008-02-24\n\n- permission setting related fix (Carlos Eduardo Nogueira Gon\ufffdalves)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.5 - 2008-01-20\n\n- fixed lighttpd rewrite rules (Markus Kohlmeyer)\n- minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.4 - 2007-11-18\n\n- add Thai translation (Thanadon Somdee)\n- improved DiggIt link (Thorsten\n- fixed French translation (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.3 - 2007-08-18\n\n- some permission related fixes (Thorsten)\n- some glossary related fixes (Thorsten)\n- many minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.2 - 2007-07-08\n\n- some performance improvements (Thorsten)\n- some permission related fixes (Adrianna Musiol)\n- some update fixes (Matteo)\n- updated Danish translation (Tommy Ipsen)\n- some minor bugfixes (Thorsten)\n\n### phpMyFAQ v2.0.1 - 2007-06-01\n\n- fixed broken update script (Thorsten, Matteo)\n- fixed bugs with basic permission level (Thorsten, Matteo)\n- fixed PHP segfaults with Zend Optimizer extension (Thorsten, Matteo)\n- updated Japanese translation (Tadashi Jokagi)\n- many minor bugfixes (Thorsten, Matteo)\n\n### phpMyFAQ v2.0.0 - 2007-05-22\n\n- added rewritten and enhanced user management (Lars)\n- added rewritten and enhanced authorization management (Lars)\n- added user and group based permissions for categories and records (Thorsten)\n- added Ajax support (Thorsten, Matteo)\n- added automatic link verification (Minoru Toda)\n- added user binding to a category (Thorsten)\n- added glossary support (Thorsten)\n- added possibility to delete admin log (Thorsten)\n- added configurable visibility of new questions (Thorsten)\n- added improved and template-based XHTML export (Thorsten)\n- added dynamic related articles (Thorsten, Marco Enders, Thomas Zeithaml)\n- added support for Google, Yahoo!, and MSN sitemaps (Matteo)\n- added improved WYSIWYG editor and Image Manager (Thorsten)\n- added improved News module (Matteo, Thorsten)\n- added tagging (Thorsten)\n- added DiggIt! link (Thorsten)\n- added Microsummaries (Matteo)\n- added OpenSearch support (Thorsten)\n- added \"submit translation\" link (Matteo)\n- added experimental support for Oracle (Thorsten)\n- added experimental support for Interbase/Firebird (Thorsten)\n- added sorting by id, title and date for records in admin backend (Thorsten)\n- added comment administration frontend (Thorsten)\n- added configurable simple reordering of records (Thorsten)\n- added questionnaire for statistics in installer (Johannes)\n- added Ajax-powered Instant Response (Thorsten)\n- added editable default values for record configuration (Thorsten)\n- added blacklist for search bots (Marco Fester, Thorsten)\n- added stylesheets for right-to-left text-direction (Roy Ronen)\n- improved export functions (Matteo)\n- improved URL rewrite functions (Matteo)\n- improved category management (Thorsten, Rudi Ferrari)\n- improved administration backend (Thorsten, Matteo)\n- updated Arabic translation (Ahmed Shalaby)\n- updated German translation (Thorsten)\n- updated Hewbrew translation (Roy Ronen)\n- updated Italian translation (Matteo)\n- updated Japanese translation (Tadashi Jokagi)\n- updated Spanish translation (Eduardo Polidor)\n\n### phpMyFAQ v1.6.11 - 2007-03-31\n\n- updated Finnish translation\n- fixed problems with unsupported charsets in PHP\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.10 - 2007-02-18\n\n- fixed a serious security issue\n- improved performance\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.9 - 2007-01-28\n\n- updated bundled PHP XMLRPC to v2.1\n- fixed the backup download permissions\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.8 - 2006-12-15\n\n- fixed a possible security issue\n- fixed the blank dropdown in the installer\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.7 - 2006-11-27\n\n- added Persian (Farsi) translation\n- fixed PHP 5.2.0 related issues\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.6 - 2006-10-28\n\n- updated Arabic translation (also moved to UTF-8)\n- updated bundled Net_IDNA to v0.4.4\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.5 - 2006-09-21\n\n- added Welsh translation\n- added French documentation\n- updated Czech translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.4 - 2006-08-19\n\n- updated Brazilian Portuguese translation\n- updated Dutch translation\n- updated French translation\n- updated Italian translation\n- updated Japanese translation\n- updated Portuguese translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.3 - 2006-07-16\n\n- added German documentation\n- updated bundled NET_IDNA class to v0.4.3\n- released a spec file for building an RPM package of phpMyFAQ\n- updated Simplified Chinese translation (also moved to utf-8)\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.2 - 2006-06-17\n\n- added user tracking data deletion\n- improved PHP 5 support for MySQL and SQLite\n- updated Dutch translation\n- updated French translation\n- updated Italian translation\n- updated Swedish translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.1 - 2006-05-13\n\n- added spam control center\n- added mod_rewrite support for lighttpd\n- added Microsoft Internet Explorer 7 search plugin\n- added automatic admin session expiry notice\n- improved record administration\n- improved user administration\n- improved category administration\n- improved highlighting of searched words\n- updated Italian translation\n- updated German translation\n- updated Danish translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.6.0 - 2006-04-21\n\n- fixed PHP security issue\n- added unique solution id\n- added revision system\n- added support for captchas\n- added bad word list blocker\n- added search in one selected category\n- added linked breadcrumb\n- added RSS feed for open questions\n- added Brazilian Portuguese translation\n- improved record administration\n- improved spam protection\n- improved language detection and handling\n- updated Italian translation\n- updated Japanese translation\n- updated Korean translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.9 - 2006-04-21\n\n- fixed PHP security issue\n\n### phpMyFAQ v1.5.8 - 2006-04-09\n\n- updated Korean translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.7 - 2006-03-02\n\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.6 - 2006-01-27\n\n- added Basque translation\n- improved spam protection\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.5 - 2005-12-19\n\n- added support for MaxDB\n- added keywords into meta keywords\n- added search by record ID\n- improved language detection and handling\n- updated Italian translation\n- fixed some minor bugs\n\n### phpMyFAQ v1.5.4 - 2005-11-18\n\n- fixed security issues\n- full support for IBM DB2 databases\n- added re-ordering of sub-categories\n- added Firefox/Mozilla search plugin\n- updated Hebrew translation\n- updated Simplified Chinese translation\n- updated Spanish translation\n- updated Italian translation\n- updated Japanese translation\n- updated Danish translation\n- some minor improvements\n- many minor bugfixes\n\n### phpMyFAQ v1.5.3 - 2005-10-15\n\n- added several security enhancements\n- added Greek translation\n- improved RSS support\n- improved backup/restore frontend\n- updated Indonasian translation\n- updated bundled Net_IDNA class\n- many minor bugfixes\n\n### phpMyFAQ v1.5.2 - 2005-09-23\n\n- fixed serious security issues\n- full support for SQLite\n- more compliance with phpMyFAQ 1.4.x templates\n- many minor bugfixes\n\n### phpMyFAQ v1.5.1 - 2005-09-19\n\n- added experimental support for SQLite\n- added dynamic Sitemap\n- added Norwegian Bokm\ufffdl translation\n- improved image handling in PDF export\n- some minor bugfixes\n\n### phpMyFAQ v1.5.0 - 2005-08-20\n\n- full support for PostgreSQL databases\n- full support for Sybase databases\n- full support for MS SQL databases\n- full support for MySQL 4.1/5.0 databases\n- experimental support for IBM DB2 databases\n- LDAP support as an additional option\n- one entry in various categories\n- mod_rewrite support\n- faster template engine parses PHP code\n- rewritten PDF export\n- complete XML, XHTML and DocBook XML exports\n- many code and performance improvements and code cleanup\n- better RSS support\n- updated bundled htmlArea\n- PHP 5.x compatible\n\n### phpMyFAQ v1.4.10 - 2005-08-01\n\n- compatibility to PHP 4.4.0\n\n### phpMyFAQ v1.4.9 - 2005-06-29\n\n- fixed serious security issue in bundled XML-RPC component\n- some minor bugfixes\n\n### phpMyFAQ v1.4.8 - 2005-04-11\n\n- fixed bug with images in PDFs\n- fixed bug with URLs in export\n- updated Japanese language file\n- updated Korean translation\n- some minor bugfixes\n\n### phpMyFAQ v1.4.7 - 2005-03-06\n\n- fixed possible SQL injection bug\n- some minor bugfixes\n\n### phpMyFAQ v1.4.6 - 2005-02-20\n\n- updated Polish language file\n- updated French language file\n- some minor bugfixes\n\n### phpMyFAQ v1.4.5 - 2005-01-21\n\n- updated Japanese language file\n- updated Chinese (Traditional) translation\n- some minor bugfixes\n\n### phpMyFAQ v1.4.4 - 2004-12-06\n\n- added Romanian translation\n- added Chinese (Traditional) translation\n- many bugfixes\n\n### phpMyFAQ v1.4.3 - 2004-11-05\n\n- added Turkish translation\n- added Indonesian translation\n- updated German language file\n- many bugfixes\n\n### phpMyFAQ v1.4.2 - 2004-10-10\n\n- added Finnish translation\n- added Hebrew translation\n- fulltext search inside admin section\n- some accessibility improvements\n- many bugfixes\n\n### phpMyFAQ v1.4.1 - 2004-08-16\n\n- improved category administration\n- added Swedish translation\n- added Korean translation\n- added Japanese translation\n- custom admin menu according to user permissions\n- easier record deleting\n- session and language stored in a cookie\n- less SQL queries in admin section\n- updated install script\n- updated Chinese language file\n- updated Portoguese language file\n- improved IDN domain support\n- improved accessibility\n- many bugfixes\n\n### phpMyFAQ v1.4.0a - 2004-07-27\n\n- fixed security vulnerability\n\n### phpMyFAQ v1.4.0 - 2004-07-22\n\n- added WYSIWYG Editor\n- added Image Manager\n- added new category module\n- added support for XML-RPC\n- added support for timezones\n- added ISO 639 support in language files\n- added script that converts BBCode in XHTML\n- better PDF export with table of contents\n- new and better installer\n- new XHTML based templates\n- automatic language detection\n- improved IDN domain support\n- password reset function\n- include internal links with dropdown box\n- many code improvements and code cleanup\n- many bug fixes\n\n### phpMyFAQ v1.3.14 - 2004-06-09:\n\n- added Slovenian translation\n- added Serbian translation\n- added Danish translation\n- improved performance on Windows Server 2003 and PHP with ISAPI\n- fixed some bugs\n\n### phpMyFAQ v1.3.13 - 2004-05-17:\n\n- fixed serious security vulnerability (Stefan Esser)\n- fixed some bugs\n\n### phpMyFAQ v1.3.12 - 2004-04-21:\n\n- added Hungarian language file\n- fixed some bugs\n\n### phpMyFAQ v1.3.11a - 2004-04-13:\n\n- fixed some annoying bugs\n\n### phpMyFAQ v1.3.11 - 2004-04-07:\n\n- added Chinese translation\n- added Czech translation\n- added support for IDN domains\n- many bugfixes\n\n### phpMyFAQ v1.3.10 - 2004-02-12\n\n- updated bundled FPDF class\n- added Arabic language file\n- many bugfixes\n\n### phpMyFAQ v1.3.9pl1 - 2004-01-02\n\n- added Vietnamese language file\n- bugfixes\n\n### phpMyFAQ v1.3.9 - 2003-11-26\n\n- improvements at highlighting searched words\n- updated english language file\n- bBCode support for the news\n- better category browsing\n- graphical analysis of votings\n- date informations ISO 8601 compliant\n- some optimized code\n- added Russian language file\n- enhanced BB-Code Editor\n- fixed some multibyte issues\n- improved display of images in PDF export\n- some fixes for PHP5\n- some bug fixes\n\n### phpMyFAQ v1.3.8 - 2003-10-23\n\n- added latvian language file\n- fixed italian language file\n- bugfix in backup module (IE problem)\n- support for MySQL 4.0 full text search\n- some improvements in installer (Bug #0000017)\n- many bugfixes in the backup module\n- better performance in admin area\n- fixed cookie problem\n- fixed a bug in the BB-Code Parser\n- fixed a bug in the language files\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.7 - 2003-09-19\n\n- dedicated to Johnny Cash\n- added a patch against Verisign\n- fixed Windows bug in Send2Friend\n- some improvements in the BB-Code-Parser\n- fixed some layout problems\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.6 - 2003-09-01\n\n- fixed bug in installer\n\n### phpMyFAQ v1.3.5 - 2003-08-31\n\n- basic internal linking of FAQ records\n- RSS-Feed-Export via Cronjob\n- solved some PDF problems\n- updated english language file\n- some improvements in the BB-Code-Parser\n- some bug fixes\n\n### phpMyFAQ v1.3.4 - 2003-08-03\n\n- improvements at highlighting searched words\n- fixed bug in installer\n- added new BB-Code-Parser\n- added italian translation\n- updated dutch and french language file\n- little changes in the language files\n- many, many minor bug fixes\n\n### phpMyFAQ v1.3.3 - 2003-06-26\n\n- better installation\n- default password removed\n- added IP ban lists\n- added portuguese translation\n- added spanish translation\n- selection of default language and setting the password at installation\n- changed default language from german to english\n- better PDF export with support for pictures\n- export all records to one PDF file\n- user management improved\n- added allow/disallow comment function\n- added copyright notice and url in the printer friendly page and the pdf file\n- backup files are called phpmyfaq.<date>.sql instead of attachment.php\n- fixed bug at installation when using MySQL 4\n- fixed bug when deleting news\n- fixed bug when deleting comments\n- many minor bug fixes\n\n### phpMyFAQ v1.3.2 - 2003-05-25\n\n- more verifications in update script\n- added new category sorting\n- added polish language file\n- fixed bug in backup\n- added reload locking in voting module\n- BB-Code help with multi-language support\n- better navigation\n- minor bug fixes\n\n### phpMyFAQ v1.3.1 - 2003-05-02\n\n- added preview at record editing\n- added RSS-Feeds from Top 10, News and latest records\n- better navigation in admin area\n- system information in admin area\n- added french language file\n- fixed bug in session search\n- fixed bugs in adding records\n- solved cookie problems\n- fixed a problem with send2friend link\n- fixed delimiter bug with Apache2 and PHP 4.3\n- minor bug fixes\n\n### phpMyFAQ v1.3.0 - 2003-04-17\n\n- support for multi language records\n- enhanced security\n- encrypted passwords\n- admin area uses modules\n- PDF support\n- more support of XML with XML namespaces and XML schema\n- BBCode editor, support for more bb code\n- PHP syntax highlighting\n- database abstraction layer\n- english documentation\n- many bugfixes\n\n### phpMyFAQ v1.2.5b - 2003-03-24\n\n- bugfixes\n\n### phpMyFAQ v1.2.5a - 2003-03-04\n\n- uBB code bugfixes\n- top ten bugfix\n\n### phpMyFAQ v1.2.5 - 2003-02-02\n\n- bugfixes\n\n### phpMyFAQ v1.2.4 - 2003-01-31\n\n- better checking of variables\n- bugs in admin area fixed\n- better printing function\n\n### phpMyFAQ v1.2.3 - 2002-11-30\n\n- check whether installation oder update script isn't deleted\n- fixed bugs in language files, the news module and open questions\n- automatic langauge detection in admin area\n\n### phpMyFAQ v1.2.2 - 2002-11-04\n\n- minor bug fixes\n\n### phpMyFAQ v1.2.1 - 2002-10-24\n\n- better update function and language selection\n- solved cookie problems\n- many bug fixes, thanks to sascha AT rootforum DOT de\n\n### phpMyFAQ v1.2.0 - 2002-10-09\n\n- phpMyFAQ is now Open Source software\n- template system for free layouts\n- fully compatible with PHP 4.1, PHP 4.2 and PHP 4.3 (register_globals = off)\n- all color and font definitions with CSS\n- better SQL queries\n- better category navigation\n- better search engine\n- better Send2Friend function\n- better installation script\n- many bugfixes\n\n### phpMyFAQ v1.1.5 - 2002-06-23\n\n- minor bug fixes\n- russian language file\n\n### phpMyFAQ v1.1.4a - 2002-06-08\n\n- minor bug fixes for PHP 4.1.0\n\n### phpMyFAQ v1.1.4 - 2002-05-24\n\n- minor bug fixes\n- rewrite of PHP code for better performance\n- change of the CSS file from style.php to style.css\n- better HTML code\n- voting can be switched off\n\n### phpMyFAQ v1.1.3 - 2002-05-01\n\n- fixed bug in UBB parser\n- fixed bugs in viewing comments\n- rewrite of the PHP code\n\n### phpMyFAQ v1.1.2 - 2002-03-22\n\n- added Send2Friend function\n- minor bug fixes\n\n### phpMyFAQ v1.1.1 - 2002-03-06\n\n- minor bug fixes\n\n### phpMyFAQ v1.1.0 - 2002-02-11\n\n- porting to PHP4\n- many bugfixes\n- more functions in the attachments module\n- support for sub categories\n- user tracking and admin logging can be switched off\n- better installation script\n- better PHP code\n- admin area supports Netscape 4.x\n- no actions could be performed without any records\n- better admin logging\n- admin account cannot be deleted (security fix)\n- better documention\n\n### phpMyFAQ v1.0.1a - 2001-10-15\n\n- file ending .php instead of .php3\n\n### phpMyFAQ v1.0.1 - 2001-10-10\n\n- fixed bugs in installation and update script\n\n### phpMyFAQ v1.0 - 2001-09-30\n\n- minor bug fixes\n\n### phpMyFAQ v0.95 - 2001-09-11\n\n- cleaned MySQL table names\n- documentation\n- phpMyFAQ is HTML 4.0 valid\n- minor bug fixes\n\n### phpMyFAQ v0.90 - 2001-08-23\n\n- added update function for phpMyFAQ v0.80\n- added question _ answer _ system\n- configurable design of the admin area\n- minor bug fixes\n\n### phpMyFAQ v0.87 - 2001-07-20\n\n- top Ten and newest records can be switched off\n- minor bug fixes\n\n### phpMyFAQ v0.86 - 2001-07-10\n\n- uBB parser fixed\n- minor bug fixes\n\n### phpMyFAQ v0.85 - 2001-07-08\n\n- added backup module (Import and Export)\n- added UBB-Code support\n- records can be exported to XML\n- minor bug fixes\n\n### phpMyFAQ v0.80a - 2001-06-07\n\n- minor bug fixes\n\n### phpMyFAQ v0.80 - 2001-05-30\n\n- added form for questions\n- added Top 5 of the newest articles\n- added support for attachments for records in admin area\n- added support for adding records in admin area\n- configuration editable in admin area\n- showing number of users online\n- print function\n- better support in writing comments\n- bugfix: fixed bad output in comments with HTML\n\n### phpMyFAQ v0.70 - 2001-04-27\n\n- installation script\n- better right management in admin area\n- free designs in configuration possible\n- added support for language files (german, english)\n- bugfix: fixed a problem when deleting comments\n\n### phpMyFAQ v0.666 - 2001-04-10\n\n- added support for categories\n- added voting system\n- added support for deleting comments\n- minor bug fixes\n\n### phpMyFAQ v0.65 - 2001-03-18\n\n- added support for comments\n- added support for FAQ news\n- better search engine\n\n### phpMyFAQ v0.60 - 2001-02-22\n\n- first released version\n\nAll versions before 0.60 were internal developer versions.\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file, You can\nobtain one at http://mozilla.org/MPL/2.0/.\n\nSoftware distributed under the License is distributed on an \"AS IS\"\nbasis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the\nLicense for the specific language governing rights and limitations\nunder the License.\n\nCopyright \u00a9 2001-2022 Thorsten Rinne and the phpMyFAQ Team\n", "<?php\n\n/**\n * Delete open questions.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package phpMyFAQ\n * @author Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2003-2022 phpMyFAQ Team\n * @license http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link https://www.phpmyfaq.de\n * @since 2003-02-24\n */\n\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Date;\nuse phpMyFAQ\\Filter;\nuse phpMyFAQ\\Question;\nuse phpMyFAQ\\Strings;\n\nif (!defined('IS_VALID_PHPMYFAQ')) {\n    http_response_code(400);\n    exit();\n}\n?>\n<div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n  <h1 class=\"h2\">\n    <i aria-hidden=\"true\" class=\"fa fa-question-circle-o\"></i>\n      <?= $PMF_LANG['msgOpenQuestions'] ?>\n  </h1>\n</div>\n\n<div class=\"row\">\n  <div class=\"col-lg-12\">\n      <?php\n      if ($user->perm->hasPermission($user->getUserId(), 'delquestion')) {\n          $category = new Category($faqConfig, [], false);\n          $question = new Question($faqConfig);\n          $category->setUser($currentAdminUser);\n          $category->setGroups($currentAdminGroups);\n          $date = new Date($faqConfig);\n          $questionId = Filter::filterInput(INPUT_GET, 'id', FILTER_VALIDATE_INT);\n          $csrfToken = Filter::filterInput(INPUT_GET, 'csrf', FILTER_UNSAFE_RAW);\n\n          if (!isset($_SESSION['phpmyfaq_csrf_token']) || $_SESSION['phpmyfaq_csrf_token'] !== $csrfToken) {\n              $csrfChecked = false;\n          } else {\n              $csrfChecked = true;\n          }\n\n          $toggle = Filter::filterInput(INPUT_GET, 'is_visible', FILTER_UNSAFE_RAW);\n          if ($csrfChecked && $toggle === 'toggle') {\n              $isVisible = $question->getVisibility($questionId);\n              if (!is_null($isVisible)) {\n                  $question->setVisibility($questionId, ($isVisible == 'N' ? 'Y' : 'N'));\n              }\n          }\n\n            echo '<div id=\"returnMessage\"></div>';\n\n            $openQuestions = $question->getAllOpenQuestions();\n\n            if (count($openQuestions) > 0) {\n                ?>\n            <form id=\"questionSelection\" name=\"questionSelection\" method=\"post\" accept-charset=\"utf-8\">\n              <input type=\"hidden\" name=\"csrf\" value=\"<?= $user->getCsrfTokenFromSession() ?>\">\n              <table class=\"table table-striped\">\n                <thead>\n                <tr>\n                  <th></th>\n                  <th><?= $PMF_LANG['ad_entry_author'] ?></th>\n                  <th><?= $PMF_LANG['ad_entry_theme'] ?></th>\n                  <th colspan=\"2\"><?= $PMF_LANG['ad_entry_visibility'] ?>?</th>\n                </tr>\n                </thead>\n                <tbody>\n                <?php\n                foreach ($openQuestions as $openQuestion) {\n                    ?>\n                  <tr>\n                    <td>\n                      <label>\n                        <input id=\"questions[]\" name=\"questions[]\" value=\"<?= $openQuestion->getId() ?>\" type=\"checkbox\">\n                      </label>\n                    </td>\n                    <td>\n                        <?= $date->format(Date::createIsoDate($openQuestion->getCreated())) ?>\n                      <br>\n                      <a href=\"mailto:<?= $openQuestion->getEmail() ?>\">\n                          <?= $openQuestion->getUsername() ?>\n                      </a>\n                    </td>\n                    <td>\n                      <strong><?= $category->categoryName[$openQuestion->getCategoryId()]['name'] ?></strong>\n                      <br>\n                        <?= Strings::htmlentities($openQuestion->getQuestion()) ?>\n                    </td>\n                    <td>\n                      <a href=\"?action=question&amp;id=<?= $openQuestion->getId() ?>&amp;is_visible=toggle&csrf=<?= $user->getCsrfTokenFromSession() ?>\"\n                         class=\"btn btn-info\">\n                          <?= ('Y' === $openQuestion->isVisible()) ? $PMF_LANG['ad_gen_yes'] : $PMF_LANG['ad_gen_no'] ?>\n                      </a>\n                    </td>\n                    <td>\n                        <?php if ($faqConfig->get('records.enableCloseQuestion') && $openQuestion->getAnswerId()) { ?>\n                        <a href=\"?action=editentry&amp;id=<?= $openQuestion->getAnswerId() ?>&amp;lang=<?= $faqLangCode ?>\"\n                           class=\"btn btn-success\">\n                            <?= $PMF_LANG['msg2answerFAQ'] ?>\n                        </a>\n                        <?php } else { ?>\n                        <a href=\"?action=takequestion&amp;id=<?= $openQuestion->getId() ?>\" class=\"btn btn-success\">\n                            <?= $PMF_LANG['ad_ques_take'] ?>\n                        </a>\n                        <?php } ?>\n                    </td>\n                  </tr>\n                <?php } ?>\n                </tbody>\n              </table>\n\n              <div class=\"text-right\">\n                <button class=\"btn btn-danger\" id=\"submitDeleteQuestions\" type=\"submit\">\n                    <?= $PMF_LANG['ad_entry_delete'] ?>\n                </button>\n              </div>\n\n            </form>\n            <script src=\"assets/js/record.js\"></script>\n                <?php\n            } else {\n                echo $PMF_LANG['msgNoQuestionsAvailable'];\n            }\n        } else {\n            echo $PMF_LANG['err_NotAuth'];\n        }\n        ?>\n  </div>\n</div>\n", "<?php\n\n/**\n * The Ajax Service Layer.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package phpMyFAQ\n * @author Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2010-2022 phpMyFAQ Team\n * @license http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link https://www.phpmyfaq.de\n * @since 2010-09-15\n */\n\nconst IS_VALID_PHPMYFAQ = null;\n\nuse phpMyFAQ\\Captcha;\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Comments;\nuse phpMyFAQ\\Entity\\Comment;\nuse phpMyFAQ\\Entity\\CommentType;\nuse phpMyFAQ\\Faq;\nuse phpMyFAQ\\Faq\\FaqMetaData;\nuse phpMyFAQ\\Faq\\FaqPermission;\nuse phpMyFAQ\\Filter;\nuse phpMyFAQ\\Helper\\CategoryHelper;\nuse phpMyFAQ\\Helper\\FaqHelper;\nuse phpMyFAQ\\Helper\\HttpHelper;\nuse phpMyFAQ\\Helper\\QuestionHelper;\nuse phpMyFAQ\\Helper\\RegistrationHelper;\nuse phpMyFAQ\\Language;\nuse phpMyFAQ\\Language\\Plurals;\nuse phpMyFAQ\\Link;\nuse phpMyFAQ\\Mail;\nuse phpMyFAQ\\Network;\nuse phpMyFAQ\\News;\nuse phpMyFAQ\\Notification;\nuse phpMyFAQ\\Question;\nuse phpMyFAQ\\Rating;\nuse phpMyFAQ\\Search;\nuse phpMyFAQ\\Search\\SearchResultSet;\nuse phpMyFAQ\\Session;\nuse phpMyFAQ\\Stopwords;\nuse phpMyFAQ\\Strings;\nuse phpMyFAQ\\User;\nuse phpMyFAQ\\User\\CurrentUser;\nuse phpMyFAQ\\Utils;\n\n//\n// Bootstrapping\n//\nrequire 'src/Bootstrap.php';\n\n$action = Filter::filterInput(INPUT_GET, 'action', FILTER_UNSAFE_RAW);\n$ajaxLang = Filter::filterInput(INPUT_POST, 'lang', FILTER_UNSAFE_RAW);\n$code = Filter::filterInput(INPUT_POST, 'captcha', FILTER_UNSAFE_RAW);\n$currentToken = Filter::filterInput(INPUT_POST, 'csrf', FILTER_UNSAFE_RAW);\n\n$Language = new Language($faqConfig);\n$languageCode = $Language->setLanguage($faqConfig->get('main.languageDetection'), $faqConfig->get('main.language'));\nrequire_once 'lang/language_en.php';\n$faqConfig->setLanguage($Language);\n\nif (Language::isASupportedLanguage($ajaxLang)) {\n    $languageCode = trim($ajaxLang);\n    require_once 'lang/language_' . $languageCode . '.php';\n} else {\n    $languageCode = 'en';\n    require_once 'lang/language_en.php';\n}\n\n//\n// Load plurals support for selected language\n//\n$plr = new Plurals($PMF_LANG);\n\n//\n// Initializing static string wrapper\n//\nStrings::init($languageCode);\n\n//\n// Send headers\n//\n$http = new HttpHelper();\n$http->setContentType('application/json');\n\n$faqSession = new Session($faqConfig);\n$network = new Network($faqConfig);\n$stopWords = new Stopwords($faqConfig);\n\nif (!$network->checkIp($_SERVER['REMOTE_ADDR'])) {\n    $message = ['error' => $PMF_LANG['err_bannedIP']];\n}\n\n//\n// Check, if user is logged in\n//\n$user = CurrentUser::getFromCookie($faqConfig);\nif (!$user instanceof CurrentUser) {\n    $user = CurrentUser::getFromSession($faqConfig);\n}\nif ($user instanceof CurrentUser) {\n    $isLoggedIn = true;\n} else {\n    $isLoggedIn = false;\n}\n\n//\n// Check captcha\n//\n$captcha = new Captcha($faqConfig);\n$captcha->setUserIsLoggedIn($isLoggedIn);\n\nif (\n'savevoting' !== $action && 'saveuserdata' !== $action && 'changepassword' !== $action && !is_null($code) &&\n    !$captcha->checkCaptchaCode($code)\n) {\n    $message = ['error' => $PMF_LANG['msgCaptcha']];\n}\n\n//\n// Check if the user is logged in when FAQ is completely secured\n//\nif (\n    false === $isLoggedIn && $faqConfig->get('security.enableLoginOnly') &&\n    'changepassword' !== $action && 'saveregistration' !== $action\n) {\n    $message = ['error' => $PMF_LANG['ad_msg_noauth']];\n}\n\nif (isset($message['error'])) {\n    $http->sendJsonWithHeaders($message);\n    exit();\n}\n\n// Save user generated content\nswitch ($action) {\n    //\n    // Comments\n    //\n    case 'savecomment':\n        if (\n            !$faqConfig->get('records.allowCommentsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addcomment')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $oComment = new Comments($faqConfig);\n        $category = new Category($faqConfig);\n        $type = Filter::filterInput(INPUT_POST, 'type', FILTER_UNSAFE_RAW);\n        $faqId = Filter::filterInput(INPUT_POST, 'id', FILTER_VALIDATE_INT, 0);\n        $newsId = Filter::filterInput(INPUT_POST, 'newsId', FILTER_VALIDATE_INT);\n        $username = Filter::filterInput(INPUT_POST, 'user', FILTER_UNSAFE_RAW);\n        $mailer = Filter::filterInput(INPUT_POST, 'mail', FILTER_VALIDATE_EMAIL);\n        $comment = Filter::filterInput(INPUT_POST, 'comment_text', FILTER_UNSAFE_RAW);\n\n        switch ($type) {\n            case 'news':\n                $id = $newsId;\n                break;\n            case 'faq';\n                $id = $faqId;\n                break;\n        }\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($mailer)) {\n            $mailer = $faqConfig->getAdminEmail();\n        }\n\n        // Check display name and e-mail address for not logged in users\n        if (false === $isLoggedIn) {\n            $user = new User($faqConfig);\n            if (true === $user->checkDisplayName($username) && true === $user->checkMailAddress($mailer)) {\n                $message = ['error' => '-' . $PMF_LANG['err_SaveComment']];\n                break;\n            }\n        }\n        \n        if (\n            !is_null($username) && !is_null($mailer) && !is_null($comment) && $stopWords->checkBannedWord(\n                $comment\n            ) && !$faq->commentDisabled(\n                $id,\n                $languageCode,\n                $type\n            )\n        ) {\n            try {\n                $faqSession->userTracking('save_comment', $id);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n\n            $commentEntity = new Comment();\n            $commentEntity\n                ->setRecordId($id)\n                ->setType($type)\n                ->setUsername($username)\n                ->setEmail($mailer)\n                ->setComment(nl2br($comment))\n                ->setDate($_SERVER['REQUEST_TIME']);\n\n            if ($oComment->addComment($commentEntity)) {\n                $emailTo = $faqConfig->getAdminEmail();\n                $title = '';\n                $urlToContent = '';\n                if ('faq' == $type) {\n                    $faq->getRecord($id);\n                    if ($faq->faqRecord['email'] != '') {\n                        $emailTo = $faq->faqRecord['email'];\n                    }\n\n                    $title = $faq->getRecordTitle($id);\n\n                    $faqUrl = sprintf(\n                        '%s?action=faq&cat=%d&id=%d&artlang=%s',\n                        $faqConfig->getDefaultUrl(),\n                        $category->getCategoryIdFromFaq($faq->faqRecord['id']),\n                        $faq->faqRecord['id'],\n                        $faq->faqRecord['lang']\n                    );\n                    $oLink = new Link($faqUrl, $faqConfig);\n                    $oLink->itemTitle = $faq->faqRecord['title'];\n                    $urlToContent = $oLink->toString();\n                } else {\n                    $news = new News($faqConfig);\n                    $newsData = $news->getNewsEntry($id);\n                    if ($newsData['authorEmail'] != '') {\n                        $emailTo = $newsData['authorEmail'];\n                    }\n\n                    $title = $newsData['header'];\n\n                    $link = sprintf(\n                        '%s?action=news&newsid=%d&newslang=%s',\n                        $faqConfig->getDefaultUrl(),\n                        $newsData['id'],\n                        $newsData['lang']\n                    );\n                    $oLink = new Link($link, $faqConfig);\n                    $oLink->itemTitle = $newsData['header'];\n                    $urlToContent = $oLink->toString();\n                }\n\n                $commentMail =\n                    'User: ' . $commentEntity->getUsername() . ', mailto:' . $commentEntity->getEmail() . \"\\n\" .\n                    'Title: ' . $title . \"\\n\" .\n                    'New comment posted here: ' . $urlToContent .\n                    \"\\n\\n\" .\n                    wordwrap($comment, 72);\n\n                $send = [];\n                $mailer = new Mail($faqConfig);\n                $mailer->setReplyTo($commentEntity->getEmail(), $commentEntity->getUsername());\n                $mailer->addTo($emailTo);\n\n                $send[$emailTo] = 1;\n                $send[$faqConfig->getAdminEmail()] = 1;\n\n                if ($type === CommentType::FAQ) {\n                    // Let the category owner of a FAQ get a copy of the message\n                    $category = new Category($faqConfig);\n                    $categories = $category->getCategoryIdsFromFaq($faq->faqRecord['id']);\n                    foreach ($categories as $_category) {\n                        $userId = $category->getOwner($_category);\n                        $catUser = new User($faqConfig);\n                        $catUser->getUserById($userId);\n                        $catOwnerEmail = $catUser->getUserData('email');\n\n                        if ($catOwnerEmail !== '') {\n                            if (!isset($send[$catOwnerEmail]) && $catOwnerEmail !== $emailTo) {\n                                $mailer->addCc($catOwnerEmail);\n                                $send[$catOwnerEmail] = 1;\n                            }\n                        }\n                    }\n                }\n\n                $mailer->subject = $faqConfig->getTitle() . ': New comment for \"' . $title . '\"';\n                $mailer->message = strip_tags($commentMail);\n\n                $result = $mailer->send();\n                unset($mailer);\n\n                $message = ['success' => $PMF_LANG['msgCommentThanks']];\n            } else {\n                try {\n                    $faqSession->userTracking('error_save_comment', $id);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n                $message = ['error' => $PMF_LANG['err_SaveComment']];\n            }\n        } else {\n            $message = ['error' => 'Please add your name, your e-mail address and a comment!'];\n        }\n        break;\n\n    case 'savefaq':\n        if (\n            !$faqConfig->get('records.allowNewFaqsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addfaq')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $category = new Category($faqConfig);\n        $questionObject = new Question($faqConfig);\n\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $faqId = Filter::filterInput(INPUT_POST, 'faqid', FILTER_VALIDATE_INT);\n        $faqLanguage = Filter::filterInput(INPUT_POST, 'lang', FILTER_UNSAFE_RAW);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n        if ($faqConfig->get('main.enableWysiwygEditorFrontend')) {\n            $answer = Filter::filterInput(INPUT_POST, 'answer', FILTER_SANITIZE_SPECIAL_CHARS);\n            $answer = html_entity_decode($answer);\n        } else {\n            $answer = Filter::filterInput(INPUT_POST, 'answer', FILTER_UNSAFE_RAW);\n            $answer = nl2br($answer);\n        }\n        $translatedAnswer = Filter::filterInput(INPUT_POST, 'translated_answer', FILTER_UNSAFE_RAW);\n        $contentLink = Filter::filterInput(INPUT_POST, 'contentlink', FILTER_UNSAFE_RAW);\n        $contentLink = Filter::filterVar($contentLink, FILTER_VALIDATE_URL);\n        $keywords = Filter::filterInput(INPUT_POST, 'keywords', FILTER_UNSAFE_RAW);\n        $categories = Filter::filterInputArray(\n            INPUT_POST,\n            [\n                'rubrik' => [\n                    'filter' => FILTER_VALIDATE_INT,\n                    'flags' => FILTER_REQUIRE_ARRAY,\n                ],\n            ]\n        );\n\n        // Check on translation\n        if (empty($answer) && !is_null($translatedAnswer)) {\n            $answer = $translatedAnswer;\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !empty($question) &&\n            $stopWords->checkBannedWord(strip_tags($question)) &&\n            !empty($answer) && $stopWords->checkBannedWord(strip_tags($answer)) &&\n            ((is_null($faqId) && !is_null($categories['rubrik'])) || (!is_null($faqId) && !is_null($faqLanguage) &&\n                    Language::isASupportedLanguage($faqLanguage)))\n        ) {\n            $isNew = true;\n            $newLanguage = '';\n\n            if (!is_null($faqId)) {\n                $isNew = false;\n                try {\n                    $faqSession->userTracking('save_new_translation_entry', 0);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n            } else {\n                try {\n                    $faqSession->userTracking('save_new_entry', 0);\n                } catch (Exception $e) {\n                    // @todo handle the exception\n                }\n            }\n\n            $isTranslation = false;\n            if (!is_null($faqLanguage)) {\n                $isTranslation = true;\n                $newLanguage = $faqLanguage;\n            }\n\n            if (!is_null($contentLink) && Strings::substr($contentLink, 7) !== '') {\n                $answer = sprintf(\n                    '%s<br><div id=\"newFAQContentLink\">%s<a href=\"http://%s\" target=\"_blank\">%s</a></div>',\n                    $answer,\n                    $PMF_LANG['msgInfo'],\n                    Strings::substr($contentLink, 7),\n                    $contentLink\n                );\n            }\n\n            $autoActivate = $faqConfig->get('records.defaultActivation');\n\n            $newData = [\n                'lang' => ($isTranslation === true ? $newLanguage : $languageCode),\n                'thema' => $question,\n                'active' => ($autoActivate ? FAQ_SQL_ACTIVE_YES : FAQ_SQL_ACTIVE_NO),\n                'sticky' => 0,\n                'content' => $answer,\n                'keywords' => $keywords,\n                'author' => $author,\n                'email' => $email,\n                'comment' => 'y',\n                'date' => date('YmdHis'),\n                'dateStart' => '00000000000000',\n                'dateEnd' => '99991231235959',\n                'linkState' => '',\n                'linkDateCheck' => 0,\n                'notes' => ''\n            ];\n\n            if ($isNew) {\n                $categories = $categories['rubrik'];\n            } else {\n                $newData['id'] = $faqId;\n                $categories = $category->getCategoryIdsFromFaq($newData['id']);\n            }\n\n            $recordId = $faq->addRecord($newData, $isNew);\n\n            $openQuestionId = Filter::filterInput(INPUT_POST, 'openQuestionID', FILTER_VALIDATE_INT);\n            if ($openQuestionId) {\n                if ($faqConfig->get('records.enableDeleteQuestion')) {\n                    $questionObject->deleteQuestion($openQuestionId);\n                } else { // adds this faq record id to the related open question\n                    $questionObject->updateQuestionAnswer($openQuestionId, $recordId, $categories[0]);\n                }\n            }\n\n            $faqMetaData = new FaqMetaData($faqConfig);\n            $faqMetaData\n                ->setFaqId($recordId)\n                ->setFaqLanguage($newData['lang'])\n                ->setCategories($categories)\n                ->save();\n\n            // Let the admin and the category owners to be informed by email of this new entry\n            $categoryHelper = new CategoryHelper();\n            $categoryHelper\n                ->setCategory($category)\n                ->setConfiguration($faqConfig);\n\n            $moderators = $categoryHelper->getModerators($categories);\n\n            try {\n                $notification = new Notification($faqConfig);\n                $notification->sendNewFaqAdded($moderators, $recordId, $faqLanguage);\n            } catch (Exception $e) {\n                // @todo handle exception in v3.2\n            }\n\n\n            $message = [\n                'success' => ($isNew ? $PMF_LANG['msgNewContentThanks'] : $PMF_LANG['msgNewTranslationThanks']),\n            ];\n        } else {\n            $message = [\n                'error' => $PMF_LANG['err_SaveEntries']\n            ];\n        }\n\n        break;\n\n    //\n    // Add question\n    //\n    case 'savequestion':\n        if (\n            !$faqConfig->get('records.allowQuestionsForGuests') &&\n            !$user->perm->hasPermission($user->getUserId(), 'addquestion')\n        ) {\n            $message = ['error' => $PMF_LANG['err_NotAuth']];\n            break;\n        }\n\n        $faq = new Faq($faqConfig);\n        $cat = new Category($faqConfig);\n        $categories = $cat->getAllCategories();\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $ucategory = Filter::filterInput(INPUT_POST, 'category', FILTER_VALIDATE_INT);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n        $save = Filter::filterInput(INPUT_POST, 'save', FILTER_VALIDATE_INT, 0);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        // If smart answering is disabled, save question immediately\n        if (false === $faqConfig->get('main.enableSmartAnswering')) {\n            $save = true;\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) && $stopWords->checkBannedWord(\n                Strings::htmlspecialchars($question)\n            )\n        ) {\n            if ($faqConfig->get('records.enableVisibilityQuestions')) {\n                $visibility = 'Y';\n            } else {\n                $visibility = 'N';\n            }\n\n            $questionData = [\n                'username' => $author,\n                'email' => $email,\n                'category_id' => $ucategory,\n                'question' => Strings::htmlspecialchars($question),\n                'is_visible' => $visibility\n            ];\n\n            if (false === (bool)$save) {\n                $cleanQuestion = $stopWords->clean($question);\n\n                $user = new CurrentUser($faqConfig);\n                $faqSearch = new Search($faqConfig);\n                $faqSearch->setCategory(new Category($faqConfig));\n                $faqSearch->setCategoryId((int) $ucategory);\n                $faqPermission = new FaqPermission($faqConfig);\n                $faqSearchResult = new SearchResultSet($user, $faqPermission, $faqConfig);\n                $searchResult = [];\n                $mergedResult = [];\n\n                foreach ($cleanQuestion as $word) {\n                    if (!empty($word)) {\n                        $searchResult[] = $faqSearch->search($word, false);\n                    }\n                }\n                foreach ($searchResult as $resultSet) {\n                    foreach ($resultSet as $result) {\n                        $mergedResult[] = $result;\n                    }\n                }\n                $faqSearchResult->reviewResultSet($mergedResult);\n\n                if (0 < $faqSearchResult->getNumberOfResults()) {\n                    $response = sprintf(\n                        '<p>%s</p>',\n                        $plr->getMsg('plmsgSearchAmount', $faqSearchResult->getNumberOfResults())\n                    );\n\n                    $response .= '<ul>';\n\n                    $faqHelper = new FaqHelper($faqConfig);\n                    foreach ($faqSearchResult->getResultSet() as $result) {\n                        $url = sprintf(\n                            '%sindex.php?action=faq&cat=%d&id=%d&artlang=%s',\n                            $faqConfig->getDefaultUrl(),\n                            $result->category_id,\n                            $result->id,\n                            $result->lang\n                        );\n                        $oLink = new Link($url, $faqConfig);\n                        $oLink->text = Utils::chopString($result->question, 15);\n                        $oLink->itemTitle = $result->question;\n\n                        try {\n                            $response .= sprintf(\n                                '<li>%s<br><div class=\"searchpreview\">%s...</div></li>',\n                                $oLink->toHtmlAnchor(),\n                                $faqHelper->renderAnswerPreview($result->answer, 10)\n                            );\n                        } catch (Exception $e) {\n                            // handle exception\n                        }\n                    }\n                    $response .= '</ul>';\n\n                    $message = ['result' => $response];\n                } else {\n                    $questionHelper = new QuestionHelper($faqConfig, $cat);\n                    try {\n                        $questionHelper->sendSuccessMail($questionData, $categories);\n                    } catch (Exception $e) {\n                        // @todo Handle exception\n                    }\n                    $message = ['success' => $PMF_LANG['msgAskThx4Mail']];\n                }\n            } else {\n                $questionHelper = new QuestionHelper($faqConfig, $cat);\n                try {\n                    $questionHelper->sendSuccessMail($questionData, $categories);\n                } catch (Exception $e) {\n                    // @todo Handle exception\n                }\n                $message = ['success' => $PMF_LANG['msgAskThx4Mail']];\n            }\n        } else {\n            $message = ['error' => $PMF_LANG['err_SaveQuestion']];\n        }\n\n        break;\n\n    case 'saveregistration':\n        $registration = new RegistrationHelper($faqConfig);\n\n        $fullName = Filter::filterInput(INPUT_POST, 'realname', FILTER_UNSAFE_RAW);\n        $userName = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $isVisible = Filter::filterInput(INPUT_POST, 'is_visible', FILTER_UNSAFE_RAW) ?? false;\n\n        if (!$registration->isDomainWhitelisted($email)) {\n            $message = ['error' => 'The domain is not whitelisted.'];\n            break;\n        }\n\n        if (!is_null($userName) && !is_null($email) && !is_null($fullName)) {\n            $message = $registration->createUser($userName, $fullName, $email, $isVisible);\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    case 'savevoting':\n        $faq = new Faq($faqConfig);\n        $rating = new Rating($faqConfig);\n        $type = Filter::filterInput(INPUT_POST, 'type', FILTER_UNSAFE_RAW, 'faq');\n        $recordId = Filter::filterInput(INPUT_POST, 'id', FILTER_VALIDATE_INT, 0);\n        $vote = Filter::filterInput(INPUT_POST, 'vote', FILTER_VALIDATE_INT);\n        $userIp = Filter::filterVar($_SERVER['REMOTE_ADDR'], FILTER_VALIDATE_IP);\n\n        if (isset($vote) && $rating->check($recordId, $userIp) && $vote > 0 && $vote < 6) {\n            try {\n                $faqSession->userTracking('save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n\n            $votingData = [\n                'record_id' => $recordId,\n                'vote' => $vote,\n                'user_ip' => $userIp,\n            ];\n\n            if (!$rating->getNumberOfVotings($recordId)) {\n                $rating->addVoting($votingData);\n            } else {\n                $rating->update($votingData);\n            }\n            $message = [\n                'success' => $PMF_LANG['msgVoteThanks'],\n                'rating' => $rating->getVotingResult($recordId),\n            ];\n        } elseif (!$rating->check($recordId, $userIp)) {\n            try {\n                $faqSession->userTracking('error_save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n            $message = ['error' => $PMF_LANG['err_VoteTooMuch']];\n        } else {\n            try {\n                $faqSession->userTracking('error_save_voting', $recordId);\n            } catch (Exception $e) {\n                // @todo handle the exception\n            }\n            $message = ['error' => $PMF_LANG['err_noVote']];\n        }\n\n        break;\n\n    // Send user generated mails\n    case 'sendcontact':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) && !empty($question) &&\n            $stopWords->checkBannedWord(Strings::htmlspecialchars($question))\n        ) {\n            $question = sprintf(\n                \"%s %s\\n%s %s\\n\\n %s\",\n                $PMF_LANG['msgNewContentName'],\n                $author,\n                $PMF_LANG['msgNewContentMail'],\n                $email,\n                $question\n            );\n\n            $mailer = new Mail($faqConfig);\n            $mailer->setReplyTo($email, $author);\n            $mailer->addTo($faqConfig->getAdminEmail());\n            $mailer->subject = Utils::resolveMarkers('Feedback: %sitename%', $faqConfig);\n            $mailer->message = $question;\n            $mailer->send();\n\n            unset($mailer);\n\n            $message = ['success' => $PMF_LANG['msgMailContact']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    // Send mails to friends\n    case 'sendtofriends':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $link = Filter::filterInput(INPUT_POST, 'link', FILTER_VALIDATE_URL);\n        $attached = Filter::filterInput(INPUT_POST, 'message', FILTER_UNSAFE_RAW);\n        $mailto = Filter::filterInputArray(\n            INPUT_POST,\n            [\n                'mailto' => [\n                    'filter' => FILTER_VALIDATE_EMAIL,\n                    'flags' => FILTER_REQUIRE_ARRAY | FILTER_NULL_ON_FAILURE,\n                ],\n            ]\n        );\n\n        if (\n            !is_null($author) && !is_null($email) && is_array($mailto) && !empty($mailto['mailto'][0]) &&\n            $stopWords->checkBannedWord(Strings::htmlspecialchars($attached))\n        ) {\n            foreach ($mailto['mailto'] as $recipient) {\n                $recipient = trim(strip_tags($recipient));\n                if (!empty($recipient)) {\n                    $mailer = new Mail($faqConfig);\n                    $mailer->setReplyTo($email, $author);\n                    $mailer->addTo($recipient);\n                    $mailer->subject = $PMF_LANG['msgS2FMailSubject'] . $author;\n                    $mailer->message = sprintf(\n                        \"%s\\r\\n\\r\\n%s\\r\\n%s\\r\\n\\r\\n%s\",\n                        $faqConfig->get('main.send2friendText'),\n                        $PMF_LANG['msgS2FText2'],\n                        $link,\n                        $attached\n                    );\n\n                    // Send the email\n                    $result = $mailer->send();\n                    unset($mailer);\n                    usleep(250);\n                }\n            }\n\n            $message = ['success' => $PMF_LANG['msgS2FThx']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n\n    //\n    // Save user data from UCP\n    //\n    case 'saveuserdata':\n        if (!isset($_SESSION['phpmyfaq_csrf_token']) || $_SESSION['phpmyfaq_csrf_token'] !== $currentToken) {\n            $message = ['error' => $PMF_LANG['ad_msg_noauth']];\n            break;\n        }\n\n        $userId = Filter::filterInput(INPUT_POST, 'userid', FILTER_VALIDATE_INT);\n        $userName = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $isVisible = Filter::filterInput(INPUT_POST, 'is_visible', FILTER_UNSAFE_RAW);\n        $password = Filter::filterInput(INPUT_POST, 'password', FILTER_UNSAFE_RAW);\n        $confirm = Filter::filterInput(INPUT_POST, 'password_confirm', FILTER_UNSAFE_RAW);\n\n        $user = CurrentUser::getFromSession($faqConfig);\n\n        if ($userId !== $user->getUserId()) {\n            $message = ['error' => 'User ID mismatch!'];\n            break;\n        }\n\n        if ($password !== $confirm) {\n            $message = ['error' => $PMF_LANG['ad_user_error_passwordsDontMatch']];\n            break;\n        }\n\n        $userData = [\n            'display_name' => $userName,\n            'email' => $email,\n            'is_visible' => $isVisible === 'on' ? 1 : 0\n        ];\n        $success = $user->setUserData($userData);\n\n        if (0 !== strlen($password) && 0 !== strlen($confirm)) {\n            foreach ($user->getAuthContainer() as $author => $auth) {\n                if ($auth->setReadOnly()) {\n                    continue;\n                }\n                if (!$auth->update($user->getLogin(), $password)) {\n                    $message = ['error' => $auth->error()];\n                    $success = false;\n                } else {\n                    $success = true;\n                }\n            }\n        }\n\n        if ($success) {\n            $message = ['success' => $PMF_LANG['ad_entry_savedsuc']];\n        } else {\n            $message = ['error' => $PMF_LANG['ad_entry_savedfail']];\n        }\n        break;\n\n    //\n    // Change password\n    //\n    case 'changepassword':\n        $username = Filter::filterInput(INPUT_POST, 'username', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n\n        if (!is_null($username) && !is_null($email)) {\n            $user = new CurrentUser($faqConfig);\n            $loginExist = $user->getUserByLogin($username);\n\n            if ($loginExist && ($email == $user->getUserData('email'))) {\n                $newPassword = $user->createPassword();\n                $user->changePassword($newPassword);\n                $text = $PMF_LANG['lostpwd_text_1'] . \"\\nUsername: \" . $username . \"\\nNew Password: \" . $newPassword . \"\\n\\n\" . $PMF_LANG['lostpwd_text_2'];\n\n                $mailer = new Mail($faqConfig);\n                $mailer->addTo($email);\n                $mailer->subject = Utils::resolveMarkers('[%sitename%] Username / password request', $faqConfig);\n                $mailer->message = $text;\n                $result = $mailer->send();\n                unset($mailer);\n                // Trust that the email has been sent\n                $message = ['success' => $PMF_LANG['lostpwd_mail_okay']];\n            } else {\n                $message = ['error' => $PMF_LANG['lostpwd_err_1']];\n            }\n        } else {\n            $message = ['error' => $PMF_LANG['lostpwd_err_2']];\n        }\n        break;\n\n    //\n    // Request removal of user\n    //\n    case 'request-removal':\n        $author = Filter::filterInput(INPUT_POST, 'name', FILTER_UNSAFE_RAW);\n        $loginName = Filter::filterInput(INPUT_POST, 'loginname', FILTER_UNSAFE_RAW);\n        $email = Filter::filterInput(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);\n        $question = Filter::filterInput(INPUT_POST, 'question', FILTER_UNSAFE_RAW);\n\n        // If e-mail address is set to optional\n        if (!$faqConfig->get('main.optionalMailAddress') && is_null($email)) {\n            $email = $faqConfig->getAdminEmail();\n        }\n\n        if (\n            !is_null($author) && !is_null($email) && !is_null($question) &&\n            !empty($question) && $stopWords->checkBannedWord(Strings::htmlspecialchars($question))\n        ) {\n            $question = sprintf(\n                \"%s %s\\n%s %s\\n%s %s\\n\\n %s\",\n                $PMF_LANG['ad_user_loginname'],\n                $loginName,\n                $PMF_LANG['msgNewContentName'],\n                $author,\n                $PMF_LANG['msgNewContentMail'],\n                $email,\n                $question\n            );\n\n            $mailer = new Mail($faqConfig);\n            $mailer->setReplyTo($email, $author);\n            $mailer->addTo($faqConfig->getAdminEmail());\n            $mailer->subject = $faqConfig->getTitle() . ': Remove User Request';\n            $mailer->message = $question;\n            $result = $mailer->send();\n            unset($mailer);\n\n            $message = ['success' => $PMF_LANG['msgMailContact']];\n        } else {\n            $message = ['error' => $PMF_LANG['err_sendMail']];\n        }\n        break;\n}\n\n$http->sendJsonWithHeaders($message);\nexit();\n", "<?php\n\n/**\n * Questions helper class for phpMyFAQ.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public License,\n * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n * obtain one at http://mozilla.org/MPL/2.0/.\n *\n * @package   phpMyFAQ\\Helper\n * @author    Thorsten Rinne <thorsten@phpmyfaq.de>\n * @copyright 2019-2022 phpMyFAQ Team\n * @license   http://www.mozilla.org/MPL/2.0/ Mozilla Public License Version 2.0\n * @link      https://www.phpmyfaq.de\n * @since     2019-11-26\n */\n\nnamespace phpMyFAQ\\Helper;\n\nuse phpMyFAQ\\Category;\nuse phpMyFAQ\\Configuration;\nuse phpMyFAQ\\Core\\Exception;\nuse phpMyFAQ\\Mail;\nuse phpMyFAQ\\Question;\nuse phpMyFAQ\\User;\n\n/**\n * Class QuestionHelper\n * @package phpMyFAQ\\Helper\n */\nclass QuestionHelper\n{\n    /** @var Configuration */\n    private $config;\n\n    /** @var Category */\n    private $category;\n\n    /** @var array */\n    private $translation;\n\n    /**\n     * QuestionHelper constructor.\n     * @param Configuration $config\n     * @param Category $category\n     */\n    public function __construct(Configuration $config, Category $category)\n    {\n        global $PMF_LANG;\n        $this->config = $config;\n        $this->category = $category;\n        $this->translation = $PMF_LANG;\n    }\n\n    /**\n     * @param array $questionData\n     * @param array $categories\n     * @throws Exception\n     */\n    public function sendSuccessMail(array $questionData, array $categories): void\n    {\n        $questionObject = new Question($this->config);\n        $questionObject->addQuestion($questionData);\n\n        $questionMail = 'User: ' . $questionData['username'] .\n            ', mailto:' . $questionData['email'] . \"\\n\" . $this->translation['msgCategory'] .\n            ': ' . $categories[$questionData['category_id']]['name'] . \"\\n\\n\" .\n            wordwrap($questionData['question'], 72) . \"\\n\\n\" .\n            $this->config->getDefaultUrl() . 'admin/';\n\n        $userId = $this->category->getOwner($questionData['category_id']);\n        $oUser = new User($this->config);\n        $oUser->getUserById($userId);\n\n        $userEmail = $oUser->getUserData('email');\n        $mainAdminEmail = $this->config->getAdminEmail();\n\n        $mailer = new Mail($this->config);\n        $mailer->setReplyTo($questionData['email'], $questionData['username']);\n        $mailer->addTo($mainAdminEmail);\n        // Let the category owner get a copy of the message\n        if (!empty($userEmail) && $mainAdminEmail != $userEmail) {\n            $mailer->addCc($userEmail);\n        }\n        $mailer->subject = $this->config->getTitle() . ': New Question was added.';\n        $mailer->message = $questionMail;\n        $mailer->send();\n        unset($mailer);\n    }\n}\n"], "filenames": ["CHANGELOG.md", "phpmyfaq/admin/record.questions.php", "phpmyfaq/ajaxservice.php", "phpmyfaq/src/phpMyFAQ/Helper/QuestionHelper.php"], "buggy_code_start_loc": [1, 21, 510, 21], "buggy_code_end_loc": [7, 99, 580, 59], "fixing_code_start_loc": [1, 22, 510, 22], "fixing_code_end_loc": [13, 100, 588, 61], "type": "CWE-79", "message": "Cross-site Scripting (XSS) - Stored in GitHub repository thorsten/phpmyfaq prior to 3.1.9.", "other": {"cve": {"id": "CVE-2022-4408", "sourceIdentifier": "security@huntr.dev", "published": "2022-12-11T15:15:10.733", "lastModified": "2022-12-13T14:59:27.213", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-site Scripting (XSS) - Stored in GitHub repository thorsten/phpmyfaq prior to 3.1.9."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 4.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 1.4}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}, {"source": "security@huntr.dev", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:phpmyfaq:phpmyfaq:*:*:*:*:*:*:*:*", "versionEndExcluding": "3.1.9", "matchCriteriaId": "3DAB360A-D5DD-4DCA-A0C4-B171302FB531"}]}]}], "references": [{"url": "https://github.com/thorsten/phpmyfaq/commit/e2ea332a2b5e798f2c39203b2489a2dabe831751", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/2ec4ddd4-de22-4f2d-ba92-3382b452bfea", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/thorsten/phpmyfaq/commit/e2ea332a2b5e798f2c39203b2489a2dabe831751"}}