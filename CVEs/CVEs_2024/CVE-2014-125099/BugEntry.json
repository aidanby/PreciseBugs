{"buggy_code": ["<?php\r\n/*\r\n * Plugin Name: I Recommend This\r\n * Plugin URI: http://www.harishchouhan.com/personal-projects/i-recommend-this/\r\n * Description: This plugin allows your visitors to simply recommend or like your posts instead of commment it.\r\n * Version: 3.7.2\r\n * Author: Harish Chouhan\r\n * Author URI: http://www.harishchouhan.com\r\n * Author Email: me@harishchouhan.com\r\n *\r\n * @package WordPress\r\n * @subpackage DOT_IRecommendThis\r\n * @author Harish\r\n * @since 2.0\r\n *\r\n * License:\r\n\r\n  Copyright 2013 \"I Recommend This WordPress Plugin\" (me@harishchouhan.coms)\r\n\r\n  This program is free software; you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License, version 2, as\r\n  published by the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program; if not, write to the Free Software\r\n  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\r\n\r\n */\r\nif ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly\r\nif ( ! class_exists( 'DOT_IRecommendThis' ) )\r\n{\r\n\r\n\r\n\tclass DOT_IRecommendThis {\r\n\r\n\t\tpublic $version = '2.6.2';\r\n\t\tpublic $db_version = '2.6.2';\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Constructor\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction __construct( $file )\r\n\t\t{\r\n\t\t\t$this->file = $file;\r\n\r\n\t\t\t// Run this on activation / deactivation\r\n\t\t\tregister_activation_hook( $file, array( $this, 'activate' ) );\r\n\r\n\t\t\t// Load text domain\r\n\t\t\tadd_action( 'init', array( &$this, 'load_localisation' ), 0 );\r\n\r\n\t\t\tadd_action( 'admin_menu', array( &$this, 'dot_irecommendthis_menu' ) );\r\n\t\t\tadd_action( 'admin_init', array( &$this, 'dot_irecommendthis_settings' ) );\r\n\t\t\tadd_action( 'init', array( &$this, 'add_widget_most_recommended_posts' ) );\r\n\t\t\tadd_action( 'wp_enqueue_scripts', array( &$this, 'dot_enqueue_scripts' ) );\r\n\t\t\tadd_filter( 'the_content', array( &$this, 'dot_content' ) );\r\n\t\t\tadd_action( 'publish_post', array( &$this, 'dot_setup_recommends' ) );\r\n\t\t\tadd_action( 'wp_ajax_dot-irecommendthis', array( &$this, 'ajax_callback' ) );\r\n\t\t\tadd_action( 'wp_ajax_nopriv_dot-irecommendthis', array( &$this, 'ajax_callback' ) );\r\n\t\t\tadd_shortcode( 'dot_recommends', array( &$this, 'shortcode' ) );\r\n\t\t\tadd_shortcode( 'dot_recommended_posts', array( &$this, 'dot_recommended_top_posts' ) );\r\n\r\n\t\t} // end constructor\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Activate\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function activate( $network_wide ) {\r\n\t\t\tif (!isset($wpdb)) $wpdb = $GLOBALS['wpdb'];\r\n\t\t\tglobal $wpdb;\r\n\r\n\t\t\t$table_name = $wpdb->prefix . \"irecommendthis_votes\";\r\n\t\t\tif($wpdb->get_var(\"show tables like '$table_name'\") != $table_name)\r\n\t\t\t{\r\n\t\t\t\t$sql = \"CREATE TABLE \" . $table_name . \" (\r\n\t\t\t\t\tid MEDIUMINT(9) NOT NULL AUTO_INCREMENT,\r\n\t\t\t\t\ttime TIMESTAMP NOT NULL,\r\n\t\t\t\t\tpost_id BIGINT(20) NOT NULL,\r\n\t\t\t\t\tip VARCHAR(15) NOT NULL,\r\n\t\t\t\t\tUNIQUE KEY id (id)\r\n\t\t\t\t);\";\r\n\r\n\t\t\t\trequire_once(ABSPATH . 'wp-admin/includes/upgrade.php');\r\n\r\n\t\t\t\tdbDelta($sql);\r\n\r\n\t\t\t\t$this->register_plugin_version();\r\n\r\n\t\t\t\tif ( $this->db_version != '' ) {\r\n\t\t\t\t\tupdate_option( 'dot_irecommendthis_db_version', $this->db_version );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add_option(\"dot_irecommendthis_db_version\", $dot_irecommendthis_db_version);\r\n\t\t\t}\r\n\r\n\t\t} // end activate\r\n\r\n\t\tprivate function register_plugin_version () {\r\n\t\t\tif ( $this->version != '' ) {\r\n\t\t\t\tupdate_option( 'dot-irecommendthis' . '-version', $this->version );\r\n\t\t\t}\r\n\t\t} // End register_plugin_version()\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Localisation | Public | 1.4.6 | Return : void\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function load_localisation ()\r\n\t\t{\r\n\r\n\t\t\tload_plugin_textdomain( 'dot', false, dirname( plugin_basename( $this->file ) ) . '/languages/' );\r\n\r\n\r\n\t\t} // End load_localisation()\r\n\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Enqueue Scripts\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_enqueue_scripts()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_css']) ) $options['disable_css'] = '0';\r\n\t\t\tif( !isset($options['recommend_style']) ) $options['recommend_style'] = '0';\r\n\r\n\t\t\tif ($options['disable_css'] == '0') {\r\n\r\n\t\t\t\tif ($options['recommend_style'] == '0') {\r\n\t\t\t\t\twp_enqueue_style( 'dot-irecommendthis', plugins_url( '/css/dot-irecommendthis.css', __FILE__ ) );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twp_enqueue_style( 'dot-irecommendthis', plugins_url( '/css/dot-irecommendthis-heart.css', __FILE__ ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twp_register_script('dot-irecommendthis',  plugins_url( '/js/dot_irecommendthis.js', __FILE__ ), 'jquery', '2.6.0', 'in_footer');\r\n\r\n\t\t\twp_enqueue_script( 'jquery' );\r\n\t\t\twp_enqueue_script( 'dot-irecommendthis' );\r\n\r\n\t\t\twp_localize_script( 'dot-irecommendthis', 'dot_irecommendthis', array( 'ajaxurl' => admin_url('admin-ajax.php')) );\r\n\r\n\t\t}\t//dot_enqueue_scripts\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Admin Menu\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_irecommendthis_menu()\r\n\t\t{\r\n\t\t\t$page_title = __('I Recommend This', 'dot');\r\n\t\t\t$menu_title = __('I Recommend This', 'dot');\r\n\t\t\t$capability = 'manage_options';\r\n\t\t\t$menu_slug = 'dot-irecommendthis';\r\n\t\t\t$function =  array( &$this, 'dot_settings_page');\r\n\t\t\tadd_options_page($page_title, $menu_title, $capability, $menu_slug, $function);\r\n\r\n\t\t}\t//dot_irecommendthis_menu\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Settings & Settings Page\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function dot_irecommendthis_settings() // whitelist options\r\n\t\t{\r\n\t\t\tregister_setting( 'dot-irecommendthis', 'dot_irecommendthis_settings', array(&$this, 'settings_validate') );\r\n\r\n\t\t\tadd_settings_section( 'dot-irecommendthis', '', array(&$this, 'section_intro'), 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'show_on', __( 'Automatically display on', 'dot' ), array(&$this, 'setting_show_on'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_zero_suffix', __( 'Text after 0 Count', 'dot' ), array(&$this, 'setting_text_zero_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_one_suffix', __( 'Text after 1 Count', 'dot' ), array(&$this, 'setting_text_one_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_more_suffix', __( 'Text after more than 1 Count', 'dot' ), array(&$this, 'setting_text_more_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'link_title_new', __( 'Title for New posts', 'dot' ), array(&$this, 'setting_link_title_new'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'link_title_active', __( 'Title for already voted posts', 'dot' ), array(&$this, 'setting_link_title_active'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'disable_css', __( 'Disable CSS', 'dot' ), array(&$this, 'setting_disable_css'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'hide_zero', __( 'Hide Zero Count', 'dot' ), array(&$this, 'setting_hide_zero'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'disable_unique_ip', __( 'Disable IP saving', 'dot' ), array(&$this, 'setting_disable_unique_ip'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'recommend_style', __( 'Choose a style', 'dot' ), array(&$this, 'setting_recommend_style'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'instructions', __( 'Shortcode and Template Tag', 'dot' ), array(&$this, 'setting_instructions'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t}\t//dot_irecommendthis_settings\r\n\r\n\r\n\t\tpublic function dot_settings_page()\r\n\t\t{\r\n\t\t\t?>\r\n\t\t\t<div class=\"wrap\">\r\n\t\t\t\t<?php screen_icon(); ?>\r\n\t\t\t\t<h2>\"I Recommend This\" Options</h2>\r\n\t\t\t\t\t<div class=\"metabox-holder has-right-sidebar\">\r\n\t\t\t\t\t\t<!-- SIDEBAR -->\r\n\t\t\t\t\t\t<div class=\"inner-sidebar\">\r\n\t\t\t\t\t\t\t<!--<div class=\"postbox\">\r\n\t\t\t\t\t\t\t\t<h3><span>Metabox 1</span></h3>\r\n\t\t\t\t\t\t\t\t<div class=\"inside\">\r\n\t\t\t\t\t\t\t\t\t<p>Hi, I'm metabox 1!</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>-->\r\n\t\t\t\t\t\t</div> <!-- //inner-sidebar -->\r\n\r\n\t\t\t\t\t\t<!-- MAIN CONTENT -->\r\n\t\t\t\t\t\t<div id=\"post-body\">\r\n\t\t\t\t\t\t\t<div id=\"post-body-content\">\r\n\t\t\t\t\t\t\t\t<form action=\"options.php\" method=\"post\">\r\n\t\t\t\t\t\t\t\t\t<?php settings_fields( 'dot-irecommendthis' ); ?>\r\n\t\t\t\t\t\t\t\t\t<?php do_settings_sections( 'dot-irecommendthis' ); ?>\r\n\t\t\t\t\t\t\t\t\t<p class=\"submit\"><input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Save Changes', 'dot' ); ?>\" /></p>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> <!-- //main content -->\r\n\t\t\t\t\t</div> <!-- //metabox-holder -->\r\n\t\t\t</div>\r\n\t\t\t<?php\r\n\r\n\t\t} //dot_settings_page\r\n\r\n\t\tfunction section_intro()\r\n\t\t{\r\n\t\t\t?>\r\n\r\n\t\t\t<p><?php _e('<a href=\"https://twitter.com/harishchouhan\" class=\"twitter-follow-button\" data-show-count=\"false\">Follow @harishchouhan</a>\r\n<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=\"//platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");</script>', 'dot'); ?><br />\r\n\t\t\t<?php _e('or Check out our other themes & plugins at <a href=\"http://www.dreamsonline.net\">Dreams Online Themes</a>.', 'dot'); ?></p>\r\n\t\t\t<p><?php _e('This plugin allows your visitors to simply recommend or like your posts instead of commment it.', 'dot'); ?></p>\r\n\t\t\t<?php\r\n\t\t}\r\n\r\n\t\tfunction setting_show_on()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '0';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[add_to_posts]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[add_to_posts]\" value=\"1\"'. (($options['add_to_posts']) ? ' checked=\"checked\"' : '') .' />\r\n\t\t\t'. __('Posts', 'dot') .'</label><br />\r\n\t\t\t<input type=\"hidden\" name=\"dot_irecommendthis_settings[add_to_other]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[add_to_other]\" value=\"1\"'. (($options['add_to_other']) ? ' checked=\"checked\"' : '') .' />\r\n\t\t\t'. __('All other pages like Index, Archive, etc.', 'dot') .'</label><br />';\r\n\t\t}\r\n\r\n\t\tfunction setting_hide_zero()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['hide_zero']) ) $options['hide_zero'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[hide_zero]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[hide_zero]\" value=\"1\"'. (($options['hide_zero']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('Hide count if count is zero', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_disable_unique_ip()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[disable_unique_ip]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[disable_unique_ip]\" value=\"1\"'. (($options['disable_unique_ip']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('Disable saving of IP Address. Will only save cookies to track user votes.', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_disable_css()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_css']) ) $options['disable_css'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[disable_css]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[disable_css]\" value=\"1\"'. (($options['disable_css']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('I want to use my own CSS styles', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_zero_suffix()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_zero_suffix]\" class=\"regular-text\" value=\"'. $options['text_zero_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after zero count. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_one_suffix() {\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_one_suffix]\" class=\"regular-text\" value=\"'. $options['text_one_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after 1 person has recommended. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_more_suffix()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_more_suffix]\" class=\"regular-text\" value=\"'. $options['text_more_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after more than 1 person have recommended. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_link_title_new()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['link_title_new']) ) $options['link_title_new'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[link_title_new]\" class=\"regular-text\" value=\"'. $options['link_title_new'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Link Title element for posts not yet voted by a user.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_link_title_active()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['link_title_active']) ) $options['link_title_active'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[link_title_active]\" class=\"regular-text\" value=\"'. $options['link_title_active'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Link Title element for posts already voted by a user.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_recommend_style()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['recommend_style']) ) $options['recommend_style'] = '0';\r\n\r\n\t\t\techo '<label><input type=\"radio\" name=\"dot_irecommendthis_settings[recommend_style]\" value=\"0\"'. (($options['recommend_style']) == \"0\" ? 'checked' : '') .' />\r\n\t\t\t'. __('Default style - Thumb', 'dot') .'</label><br />\r\n\r\n\t\t\t<label><input type=\"radio\" name=\"dot_irecommendthis_settings[recommend_style]\" value=\"1\"'. (($options['recommend_style']) == \"1\" ? 'checked' : '') .' />\r\n\t\t\t'. __('Heart', 'dot') .'</label><br />';\r\n\t\t}\r\n\r\n\t\tfunction setting_instructions()\r\n\t\t{\r\n\t\t\techo '<p>'. __('To use I Recomment This in your posts and pages you can use the shortcode:', 'dot') .'</p>\r\n\t\t\t<p><code>[dot_recommends]</code></p>\r\n\t\t\t<p>'. __('To use I Recomment This manually in your theme template use the following PHP code:', 'dot') .'</p>\r\n\t\t\t<p><code>&lt;?php if( function_exists(\\'dot_irecommendthis\\') ) dot_irecommendthis(); ?&gt;</code></p>\r\n\t\t\t<p>'. __('To show top recommended post from a particular date use below shortcode', 'dot') .'</p>\r\n\t\t\t<p><code>[dot_recommended_posts container=\\'div\\' post_type=\\'showcase\\' number=\\'10\\' year=\\'2013\\' monthnum=\\'7\\']</code></p>';\r\n\t\t}\r\n\r\n\t\tfunction settings_validate($input)\r\n\t\t{\r\n\t\t\treturn $input;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Content / Front-end view\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_content( $content )\r\n\t\t{\r\n\t\t\t// Don't show on custom page templates or pages\r\n\t\t\tif(is_page_template() || is_page() || is_front_page()) return $content;\r\n\r\n\t\t\t// Don't show after excerpts\r\n\t\t\tglobal $wp_current_filter;\r\n\t\t\tif ( in_array( 'get_the_excerpt', (array) $wp_current_filter ) ) {\r\n\t\t\t\treturn $content;\r\n\t\t\t}\r\n\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '0';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '0';\r\n\r\n\t\t\tif(is_singular('post') && $options['add_to_posts']) $content .= $this->dot_recommend();\r\n\t\t\tif((is_home() || is_category() || is_tag() || is_author() || is_date() || is_search()) && $options['add_to_other'] ) $content .= $this->dot_recommend();\r\n\r\n\t\t\treturn $content;\r\n\r\n\t\t}\t//dot_content\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Setup recommends\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_setup_recommends( $post_id )\r\n\t\t{\r\n\t\t\tif(!is_numeric($post_id)) return;\r\n\r\n\t\t\tadd_post_meta($post_id, '_recommended', '0', true);\r\n\r\n\t\t}\t//setup_recommends\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * AJAX Callback\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction ajax_callback($post_id)\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '1';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '1';\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\r\n\t\t\tif( isset($_POST['recommend_id']) ) {\r\n\t\t\t\t// Click event. Get and Update Count\r\n\t\t\t\t$post_id = str_replace('dot-irecommendthis-', '', $_POST['recommend_id']);\r\n\t\t\t\techo $this->dot_recommend_this($post_id, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix'], 'update');\r\n\t\t\t} else {\r\n\t\t\t\t// AJAXing data in. Get Count\r\n\t\t\t\t$post_id = str_replace('dot-irecommendthis-', '', $_POST['post_id']);\r\n\t\t\t\techo $this->dot_recommend_this($post_id, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix'], 'get');\r\n\t\t\t}\r\n\r\n\t\t\texit;\r\n\r\n\t\t}\t//ajax_callback\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Main Process\r\n\t\t *--------------------------------------------*/\r\n\r\n\r\n\t\tfunction dot_recommend_this($post_id, $text_zero_suffix = false, $text_one_suffix = false, $text_more_suffix = false, $action = 'get')\r\n\t\t{\r\n\t\t\tif(!is_numeric($post_id)) return;\r\n\t\t\t$text_zero_suffix = strip_tags($text_zero_suffix);\r\n\t\t\t$text_one_suffix = strip_tags($text_one_suffix);\r\n\t\t\t$text_more_suffix = strip_tags($text_more_suffix);\r\n\r\n\r\n\t\t\tswitch($action) {\r\n\r\n\t\t\t\tcase 'get':\r\n\t\t\t\t\t$recommended = get_post_meta($post_id, '_recommended', true);\r\n\t\t\t\t\tif( !$recommended ){\r\n\t\t\t\t\t\t$recommended = 0;\r\n\t\t\t\t\t\tadd_post_meta($post_id, '_recommended', $recommended, true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( $recommended == 0 ) { $suffix = $text_zero_suffix; }\r\n\t\t\t\t\telseif( $recommended == 1 ) { $suffix = $text_one_suffix; }\r\n\t\t\t\t\telse { $suffix = $text_more_suffix; }\r\n\r\n\r\n\t\t\t\t\t/*\r\n\r\n\t\t\t\t\tHides the count is the count is zero.\r\n\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\t\t\tif( !isset($options['hide_zero']) ) $options['hide_zero'] = '0';\r\n\r\n\r\n\t\t\t\t\tif( ($recommended == 0) &&  $options['hide_zero'] == 1 ) {\r\n\r\n\t\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">&nbsp;</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t\treturn $output;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">'. $recommended .'</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t\treturn $output;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\tcase 'update':\r\n\r\n\t\t\t\t\t$recommended = get_post_meta($post_id, '_recommended', true);\r\n\r\n\t\t\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0';\r\n\r\n\t\t\t\t\t/*\r\n\r\n\t\t\t\t\tCheck if Unique IP saving is required or disabled\r\n\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif( $options['disable_unique_ip'] != 0 ) {\r\n\r\n\t\t\t\t\t\tif ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) ) {\r\n\t\t\t\t\t\t\treturn $recommended;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$recommended++;\r\n\t\t\t\t\t\tupdate_post_meta($post_id, '_recommended', $recommended);\r\n\t\t\t\t\t\tsetcookie('dot_irecommendthis_'. $post_id, time(), time()+3600*24*365, '/');\r\n\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tglobal $wpdb;\r\n\t\t\t\t\t\t$ip = $_SERVER['REMOTE_ADDR'];\r\n\t\t\t\t\t\t$voteStatusByIp = $wpdb->get_var(\"SELECT COUNT(*) FROM \".$wpdb->prefix.\"irecommendthis_votes WHERE post_id = '$post_id' AND ip = '$ip'\");\r\n\r\n\t\t\t\t\t\tif ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) || $voteStatusByIp != 0 ) {\r\n\t\t\t\t\t\t\treturn $recommended;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$recommended++;\r\n\t\t\t\t\t\tupdate_post_meta($post_id, '_recommended', $recommended);\r\n\t\t\t\t\t\tsetcookie('dot_irecommendthis_'. $post_id, time(), time()+3600*24*365, '/');\r\n\t\t\t\t\t\t$wpdb->query(\"INSERT INTO \".$wpdb->prefix.\"irecommendthis_votes VALUES ('', NOW(), '$post_id', '$ip')\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tif( $recommended == 0 ) { $suffix = $text_zero_suffix; }\r\n\t\t\t\t\telseif( $recommended == 1 ) { $suffix = $text_one_suffix; }\r\n\t\t\t\t\telse { $suffix = $text_more_suffix; }\r\n\r\n\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">'. $recommended .'</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t$dot_irt_html = apply_filters( 'dot_irt_before_count', $output );\r\n\r\n\t\t\t\t\treturn $dot_irt_html;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\t//dot_recommend_this\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Shortcode\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction shortcode( $atts )\r\n\t\t{\r\n\t\t\textract( shortcode_atts( array('id' => null), $atts ) );\r\n\t\t\treturn $this->dot_recommend($id);\r\n\r\n\t\t}\t//shortcode\r\n\r\n\r\n\t\tfunction dot_recommend($id=null)\r\n\t\t{\r\n\r\n\r\n\t\t\tglobal $wpdb;\r\n\t\t\t$ip = $_SERVER['REMOTE_ADDR'];\r\n\t\t\t$post_ID = $id ? $id : get_the_ID();\r\n\t\t\tglobal $post;\r\n\r\n\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\t\t\tif( !isset($options['link_title_new']) ) $options['link_title_new'] = '';\r\n\t\t\tif( !isset($options['link_title_active']) ) $options['link_title_active'] = '';\r\n\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0'; //Check if Unique IP saving is required or disabled\r\n\r\n\r\n\r\n\t\t\tif( $options['disable_unique_ip'] != '1' ) {\r\n\r\n\t\t\t\t$voteStatusByIp = $wpdb->get_var(\"SELECT COUNT(*) FROM \".$wpdb->prefix.\"irecommendthis_votes WHERE post_id = '$post_ID' AND ip = '$ip'\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$output = $this->dot_recommend_this($post_ID, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix']);\r\n\r\n\r\n\r\n\t\t\t//if ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) && $voteStatusByIp != 0 ) {\r\n\r\n\t\t\tif( $options['disable_unique_ip'] != '0' ) {\r\n\r\n\t\t\t\tif (!isset($_COOKIE['dot_irecommendthis_'.$post_ID])) {\r\n\t\t\t\t\t$class = 'dot-irecommendthis';\r\n\r\n\r\n\t\t\t\t\tif( $options['link_title_new'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('Recommend this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_new'];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t$class = 'dot-irecommendthis active';\r\n\r\n\t\t\t\t\tif( $options['link_title_active'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('You already recommended this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_active'];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tif (!isset($_COOKIE['dot_irecommendthis_'.$post_ID]) && $voteStatusByIp == 0) {\r\n\t\t\t\t\t$class = 'dot-irecommendthis';\r\n\r\n\r\n\t\t\t\t\tif( $options['link_title_new'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('Recommend this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_new'];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t$class = 'dot-irecommendthis active';\r\n\r\n\t\t\t\t\tif( $options['link_title_active'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('You already recommended this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_active'];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$dot_irt_html = '<a href=\"#\" class=\"'. $class .'\" id=\"dot-irecommendthis-'. $post_ID .'\" title=\"'. $title .'\">';\r\n\r\n\t\t\t$dot_irt_html .= apply_filters( 'dot_irt_before_count', $output );\r\n\t\t\t$dot_irt_html .= '</a>';\r\n\r\n\t\t\treturn $dot_irt_html;\r\n\r\n\t\t\t//return '<a href=\"#\" class=\"'. $class .'\" id=\"dot-irecommendthis-'. $post_ID .'\" title=\"'. $title .'\"><i class=\"icon-heart\"></i> '. $output .'</a>';\r\n\t\t}\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Shortcode //dot_recommended_top_posts\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_recommended_top_posts( $atts, $content = null )\r\n\t\t{\r\n\t\t    // get our variable from $atts\r\n\t\t    extract(shortcode_atts(array(\r\n\t\t        'container' => 'li',\r\n\t\t        'number' => '10',\r\n\t\t        'post_type' => 'post',\r\n\t\t        'year' => '',\r\n\t\t        'monthnum' => '',\r\n\t\t        'show_count' => '1',\r\n\t\t    ), $atts));\r\n\r\n\t\t    global $wpdb;\r\n\r\n\t\t    $request = \"SELECT * FROM $wpdb->posts, $wpdb->postmeta\";\r\n\t\t    $request .= \" WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id\";\r\n\r\n\t\t    if ($year != '') {\r\n\t\t        $request .= \" AND YEAR(post_date) = '$year'\";\r\n\t\t    }\r\n\r\n\t\t    if ($monthnum != '') {\r\n\t\t        $request .= \" AND MONTH(post_date) = '$monthnum'\";\r\n\t\t    }\r\n\r\n\t\t    $request .= \" AND post_status='publish' AND post_type='$post_type' AND meta_key='_recommended'\";\r\n\t\t    $request .= \" ORDER BY $wpdb->postmeta.meta_value+0 DESC LIMIT $number\";\r\n\t\t    $posts = $wpdb->get_results($request);\r\n\r\n\t\t    $return = '';\r\n\r\n\r\n\t\t    foreach ($posts as $item) {\r\n\t\t        $post_title = stripslashes($item->post_title);\r\n\t\t        $permalink = get_permalink($item->ID);\r\n\t\t        $post_count = $item->meta_value;\r\n\r\n\t\t        $return .= '<' . $container . '>';\r\n\t\t        $return .= '<a href=\"' . $permalink . '\" title=\"' . $post_title.'\" rel=\"nofollow\">' . $post_title . '</a> ';\r\n\r\n\t\t        if ( $show_count == '1') {\r\n\t\t            $return .= '<span class=\"votes\">' . $post_count . '</span> ';\r\n\t\t        }\r\n\r\n\t\t        //$return .= get_the_post_thumbnail($item->ID, 'showcase-thumbnail');\r\n\t\t        $return .= '</' . $container . '>';\r\n\r\n\t\t    }\r\n\t\t    return $return;\r\n\r\n\t\t}\t//dot_recommended_top_posts\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Widget\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction add_widget_most_recommended_posts()\r\n\t\t{\r\n\r\n\t\t\tfunction most_recommended_posts($numberOf, $before, $after, $show_count, $post_type=\"post\", $raw=false) {\r\n\t\t\t\tglobal $wpdb;\r\n\r\n\t\t\t\t$request = \"SELECT * FROM $wpdb->posts, $wpdb->postmeta\";\r\n\t\t\t\t$request .= \" WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id\";\r\n\t\t\t\t$request .= \" AND post_status='publish' AND post_type='$post_type' AND meta_key='_recommended'\";\r\n\t\t\t\t$request .= \" ORDER BY $wpdb->postmeta.meta_value+0 DESC LIMIT $numberOf\";\r\n\t\t\t\t$posts = $wpdb->get_results($request);\r\n\r\n\t\t\t\tif ($raw):\r\n\t\t\t\t\treturn $posts;\r\n\t\t\t\telse:\r\n\t\t\t\t\tforeach ($posts as $item) {\r\n\t\t\t\t\t\t$post_title = stripslashes($item->post_title);\r\n\t\t\t\t\t\t$permalink = get_permalink($item->ID);\r\n\t\t\t\t\t\t$post_count = $item->meta_value;\r\n\t\t\t\t\t\techo $before.'<a href=\"' . $permalink . '\" title=\"' . $post_title.'\" rel=\"nofollow\">' . $post_title . '</a>';\r\n\t\t\t\t\t\techo $show_count == '1' ? ' ('.$post_count.')' : '';\r\n\t\t\t\t\t\techo $after;\r\n\t\t\t\t\t}\r\n\t\t\t\tendif;\r\n\t\t\t}\r\n\r\n\t\t\tfunction widget_most_recommended_posts($args)\r\n\t\t\t{\r\n\t\t\t\textract($args);\r\n\t\t\t\t$options = get_option(\"most_recommended_posts\");\r\n\t\t\t\tif (!is_array( $options ))\r\n\t\t\t\t{\r\n\t\t\t\t\t$options = array(\r\n\t\t\t\t\t'title' => __('Most recommended posts', 'dot'),\r\n\t\t\t\t\t'number' => __('5', 'dot'),\r\n\t\t\t\t\t'show_count' => '0'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t$title = $options['title'];\r\n\t\t\t\t$numberOf = $options['number'];\r\n\t\t\t\t$show_count = $options['show_count'];\r\n\r\n\t\t\t\techo $before_widget;\r\n\t\t\t\techo $before_title . $title . $after_title;\r\n\t\t\t\techo '<ul class=\"mostrecommendedposts\">';\r\n\r\n\t\t\t\tmost_recommended_posts($numberOf, '<li>', '</li>', $show_count);\r\n\r\n\t\t\t\techo '</ul>';\r\n\t\t\t\techo $after_widget;\r\n\t\t\t}\r\n\r\n\t\t\twp_register_sidebar_widget('most_recommended_posts', __('Most recommended posts', 'dot'), 'widget_most_recommended_posts');\r\n\r\n\t\t\tfunction options_widget_most_recommended_posts() {\r\n\t\t\t\t$options = get_option(\"most_recommended_posts\");\r\n\r\n\t\t\t\tif (!is_array( $options )) {\r\n\t\t\t\t\t$options = array(\r\n\t\t\t\t\t'title' => __('Most recommended posts', 'dot'),\r\n\t\t\t\t\t'number' => __('5', 'dot'),\r\n\t\t\t\t\t'show_count' => '0'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( isset($_POST['mrp-submit']) ) {\r\n\t\t\t\t\t$options['title'] = htmlspecialchars($_POST['mrp-title']);\r\n\t\t\t\t\t$options['number'] = htmlspecialchars($_POST['mrp-number']);\r\n\t\t\t\t\t$options['show_count'] = $_POST['mrp-show-count'];\r\n\t\t\t\t\tif ( $options['number'] > 15) { $options['number'] = 15; }\r\n\r\n\t\t\t\t\tupdate_option(\"most_recommended_posts\", $options);\r\n\t\t\t\t}\r\n\t\t\t\t?>\r\n\t\t\t\t<p><label for=\"mrp-title\"><?php _e('Title:', 'dot'); ?><br />\r\n\t\t\t\t<input class=\"widefat\" type=\"text\" id=\"mrp-title\" name=\"mrp-title\" value=\"<?php echo $options['title'];?>\" /></label></p>\r\n\r\n\t\t\t\t<p><label for=\"mrp-number\"><?php _e('Number of posts to show:', 'dot'); ?><br />\r\n\t\t\t\t<input type=\"text\" id=\"mrp-number\" name=\"mrp-number\" style=\"width: 25px;\" value=\"<?php echo $options['number'];?>\" /> <small>(max. 15)</small></label></p>\r\n\r\n\t\t\t\t<p><label for=\"mrp-show-count\"><input type=\"checkbox\" id=\"mrp-show-count\" name=\"mrp-show-count\" value=\"1\"<?php if($options['show_count'] == '1') echo 'checked=\"checked\"'; ?> /> <?php _e('Show post count', 'dot'); ?></label></p>\r\n\r\n\t\t\t\t<input type=\"hidden\" id=\"mrp-submit\" name=\"mrp-submit\" value=\"1\" />\r\n\t\t\t\t<?php\r\n\t\t\t}\r\n\t\t\twp_register_widget_control('most_recommended_posts', __('Most recommended posts', 'dot'), 'options_widget_most_recommended_posts');\r\n\t\t}\r\n\r\n\r\n\t} // End Class\r\n\r\n\tglobal $dot_irecommendthis;\r\n\r\n\t// Initiation call of plugin\r\n\t$dot_irecommendthis = new DOT_IRecommendThis(__FILE__);\r\n\r\n}\r\n\r\n\t/*--------------------------------------------*\r\n\t * Template Tag\r\n\t *--------------------------------------------*/\r\n\r\n\tfunction dot_irecommendthis()\r\n\t{\r\n\t\tglobal $dot_irecommendthis;\r\n\t\techo $dot_irecommendthis->dot_recommend();\r\n\r\n\t}\r\n\r\n\t/*--------------------------------------------*\r\n\t * Settings Menu\r\n\t *--------------------------------------------*/\r\n\r\n\tadd_filter( 'plugin_action_links_' . plugin_basename( __FILE__ ), 'dot_irecommendthis_plugin_links' );\r\n\r\n\tfunction dot_irecommendthis_plugin_links($links) {\r\n\t\treturn array_merge(\r\n\t\t\tarray(\r\n\t\t\t\t'settings' => '<a href=\"' . get_bloginfo('wpurl') . '/wp-admin/options-general.php?page=dot-irecommendthis\">' . __('Settings', 'dot-irecommendthis') . '</a>'\r\n\t\t\t),\r\n\t\t\t$links\r\n\t\t);\r\n\t}\r\n\r\n\t/*--------------------------------------------*\r\n\t* Add Likes Column In Post Manage Page\r\n\t*--------------------------------------------*/\r\n\r\n\tfunction dot_columns_head($defaults) {\r\n\t\t$defaults['likes'] = __('Likes', 'dot');\r\n\t\treturn $defaults;\r\n\t}\r\n\r\n\tfunction dot_column_content($column_name, $post_ID) {\r\n\t\tif ($column_name == 'likes')\r\n\t\t\techo get_post_meta($post_ID, '_recommended', true) . ' ' . __('like', 'dot');\r\n\t}\r\n\r\n\tfunction dot_column_register_sortable( $columns ) {\r\n\t    $columns['likes'] = 'likes';\r\n\t\treturn $columns;\r\n\t}\r\n\r\n\tfunction dot_column_orderby( $vars ) {\r\n\t\tif ( isset( $vars['orderby'] ) && 'likes' == $vars['orderby'] ) {\r\n\t\t\t$vars = array_merge( $vars, array(\r\n\t\t\t\t'meta_key' => '_recommended',\r\n\t\t\t\t'orderby' => 'meta_value'\r\n\t\t\t) );\r\n\t\t}\r\n\r\n\t\treturn $vars;\r\n\t}\r\n\tadd_filter('request', 'dot_column_orderby');\r\n\tadd_filter('manage_edit-post_sortable_columns', 'dot_column_register_sortable');\r\n\tadd_filter('manage_posts_columns', 'dot_columns_head');\r\n    add_action('manage_posts_custom_column', 'dot_column_content', 10, 2);\r\n\r\n?>", "=== Plugin Name ===\r\nContributors: hchouhan, themeist, dreamsmedia, Benoit \"LeBen\" Burgener\r\nDonate link: http://themeist.co\r\nTags: recommend, like, love, post, rate, rating, post rating, heart, dribbble like, tumblr like\r\nRequires at least: 3.7\r\nTested up to: 3.9.1\r\nStable tag: 3.7.2\r\nLast Updated: 2014-June-21\r\nLicense: GPLv2 or later\r\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\r\n\r\nThis plugin allows your visitors to simply like/recommend your posts instead of comment on it.\r\n\r\n\r\n== Description ==\r\n\r\nThis plugin allows your visitors to simply like/recommend your posts instead of comment on it.\r\n\r\n\r\n= This plugin includes =\r\n* A counter to display the number of \"like\" and to vote.\r\n* A widget and a function to display the X most liked posts.\r\n* A preference pane with some options.\r\n* Saves Cookie as well as users IP address to disable voting on the same post again\r\n* Displays Number of likes on Post Edit page along with sorting option Thanks to [HSG](http://profiles.wordpress.org/HSG/)\r\n\r\n\r\n= Advanced Options =\r\n* Hide count if count is zero\r\n* Set a default messages when count is zero, one or more\r\n* Choose between a \"Thumbs Up\" or a \"Heart\" icon to allow recommending on a post\r\n* Disable CSS to allow you to add your own styling rules\r\n* Disable saving of IP address in the table.\r\n\r\n= Shortcodes =\r\n* You can add the voting link to any page using shortcodes\r\n* Now using shortcode display a specific number of most recommended posts of all time or from a specific time period with support to chose the post type.\r\n\r\n= Translations =\r\n\r\n- English (en_US) - Harish Chouhan\r\n- French (fr_FR) - Murat [wptheme.fr](http://wptheme.fr/)\r\n- Portuguese (pt_BR) - [Darlan ten Caten](http://i9solucoesdigitais.com.br/)\r\n- Persian (fa_IR) - [Hossein Soroor Golshani](http://profiles.wordpress.org/HSG/)\r\n- Spanish (es_ES) - [Andrew Kurtis - WebHostingHub](http://www.webhostinghub.com/)\r\n\r\nIf you have created your own language pack (or have an update of an existing one) you can send in your .PO and .MO files so we can bundle it into I Recommend This plugin. You can [download the latest POT file](http://plugins.svn.wordpress.org/i-recommend-this/trunk/languages/dot-en.po), and [PO files in each language](http://plugins.svn.wordpress.org/i-recommend-this/trunk/languages/).\r\n\r\n\r\nThis plugin is based exactly on Benoit \"LeBen\" Burgener's \"I Like This\" Plugin and has been modified after getting requests for the changes I had made on my website.\r\n\r\nPlease report any bugs you find via http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/ or via WordPress forums.\r\n\r\n= Examples of how the plugin has been used =\r\n\r\n* [Flat UI Design Gallery](http://flattrendz.com) - Example usage in website Design Gallery\r\n* [Harish's blog](http://www.harishchouhan.com/blog/) -\r\n* [OnePageMania.com](http://onepagemania.com/) -\r\n\r\n\r\n= My Links =\r\n\r\n* Twitter @[harishchouhan](https://twitter.com/harishchouhan)\r\n* Google+ [Harish Chouhan](https://plus.google.com/u/0/103138475844539274387/)\r\n\r\n\r\nIf you love the plugin, please consider rating it and clicking on \"it works\" button.\r\n\r\n\r\n== Installation ==\r\n\r\n1. Upload the directory `/i-recommend-this/` to the `/wp-content/plugins/` directory\r\n2. Activate the plugin through the 'Plugins' menu in WordPress\r\n3. Click on the Settings link below the plugin name on the plugins page\r\n\r\nTo display the recomment/like link other than at the bottom of individual post, you would have to add below code in your template\r\n`<?php if( function_exists('dot_irecommendthis') ) dot_irecommendthis(); ?>`\r\n\r\nShortcode\r\n`[dot_recommends]`\r\n\r\nTo display the most recommended posts you can below code in your template\r\n`<?php if( function_exists('dot_irecommendthis') ) echo do_shortcode(\"[dot_recommended_posts container='div' post_type='post' number='10' year='2013' monthnum='7']\"); ?>`\r\n\r\nShortcode\r\n`[dot_recommended_posts post_type='post' container='div' number='10' year='2013' monthnum='7']`\r\n\r\n== Frequently Asked Questions ==\r\n\r\nTake a look at the [official \"I Recommend This\" FAQ](http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/).\r\n\r\nYou can also visit the [support center](http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/) and start a discussion if needed.\r\n\r\n\r\n\r\n== Changelog ==\r\n\r\n= 3.7.2\r\n* Updated 'dot_irecommendthis.js' file to make plugin work even when the like button is on a hidden element. Thanks to [forthewinn](http://wordpress.org/support/profile/forthewinn). [Support Ticket](http://wordpress.org/support/topic/recommendation-to-fix-usage-in-hiddenexpanding-elements)\r\n\r\n= 3.7.1\r\n* Spanish translation added. Thanks to Andrew Kurtis from [WebHostingHub](http://www.webhostinghub.com/)\r\n\r\n= 3.7.0\r\n* Added to remove resolve wrong tags set for this plugin earlier. My sincere apologies for the extra update mess.\r\n\r\n= 2.6.5\r\n* Removed deprecaed JQuery function live with on in dot_irecommendthis.js\r\n\r\n= 2.6.4\r\n* Moved enqueued JS from wp_head() to wp_footer().\r\n\r\n= 2.6.3\r\n* Fixed 3 undefined index errors for disable_unique_ip, link_title_new & link_title_active. Thanks to [sebabornia](http://wordpress.org/support/profile/sebabornia)\r\n\r\n= 2.6.2\r\n* French translation added. Thanks to Murat from [wptheme.fr](http://wptheme.fr/)\r\n\r\n= 2.6.1\r\n* Updates to Persian translation\r\n\r\n= 2.6.0\r\n* Added Persian translation - Thanks to [HSG](http://profiles.wordpress.org/HSG/)\r\n* Now you can see number of likes on Post Edit page along with sorting option. Thanks to [HSG](http://profiles.wordpress.org/HSG/)\r\n\r\n= 2.5.3\r\n* Fixed PHP error in Widget.\r\n* Converted text strings in widget to be translatable.\r\n\r\n= 2.5.3\r\n* Fixed textdomain problem. Added portuguese translation. Thanks to @Darlan ten Caten.\r\n\r\n= 2.5.2\r\n* Replaced 'before' & 'after' attributes in shortocde 'dot_recommended_posts' with a single attribute 'container'\r\n\r\n= 2.5.1\r\n* Change shortcode name from dot_recommends_posts to dot_recommended_posts\r\n\r\n= 2.5.0\r\n* Added new shortcode with multiple options to display most recommended post / post_type of all time or from a specific date\r\n\r\n= 2.4.2\r\n* Bug fix. Thanks to @mmaxim\r\n\r\n= 2.4.1\r\n* Fixed undefined index error.\r\n\r\n= 2.4.0\r\n* Added filter dot_irt_before_count to be able to allow custom content or icons before the count.\r\n\r\n\r\n= 2.3.0\r\n* Added option to hide count if count is zero\r\n* Added option to disable saving of IP address in the database\r\n\r\n\r\n= 2.2.0\r\n* Added option to customize the link title. You can now remove the word recomment and add anything you like. Ideas suggested by Krystina Montemurro.\r\n\r\n\r\n= 2.1.5\r\n* Support URL update for new plugin details page.\r\n\r\n= 2.1.4\r\n* Removed 2 instances of double quotes. Thanks to [boyevul](http://profiles.wordpress.org/boyevul/)\r\n\r\n= 2.1.3\r\n* Fixed errors shown when Debug mode was on. Thanks to [Air](http://profiles.wordpress.org/air-1/)\r\n\r\n= 2.1.2\r\n* Fixed CSS Disable issue. Thanks to Nicolas Mollet.\r\n\r\n= 2.1\r\n* Fixed Naming Errors. Thanks to Marian Hillmar.\r\n* Fixed Shortcode name & Added support to place like button anywhere pointing to any post. Thanks to Bryant Williams for the code.\r\n\r\n\r\n= 2.0\r\n* This is a major revamp. The entire plugin structure is now based on OOP\r\n* Settings are now stored using Settings API and Settings page is created based on WordPress standards.\r\n* This plugin contains code from \"Zilla Like\" plugin developed by Orman Clark of www.themezilla.com.\r\n* Translation files are finally added.\r\n\r\n\r\n= 1.4.3\r\n* All deprecated functions removed. Plugin might not work on WordPress versions older than 3.\r\n\r\n\r\n= 1.4.1\r\n* Fixed bug that broke update.\r\n\r\n= 1.4\r\n* Added feature to display custom text when a post is liked.\r\n\r\n= 1.3\r\n* Removed 2 functions \"register_widget_control()\" & \"register_sidebar_widget()\" deprecated in version 2.8 with latest functions\r\n\r\n\r\n= 1.2\r\n* More bugs fixed.\r\n\r\n\r\n= 1.1\r\n* Fixed Bug that did not allow displaying text next to the counter.\r\n* Updated code using branch of original plugin on GitHub\r\n\r\n\r\n= 1.0\r\n* Removed JQuery loading style when heart is clicked.\r\n* Modified CSS & Images of LeBen's \"I Like This\" plugin based on what many users requested.\r\n* This is the first version"], "fixing_code": ["<?php\r\n/*\r\n * Plugin Name: I Recommend This\r\n * Plugin URI: http://www.harishchouhan.com/personal-projects/i-recommend-this/\r\n * Description: This plugin allows your visitors to simply recommend or like your posts instead of commment it.\r\n * Version: 3.7.3\r\n * Author: Harish Chouhan\r\n * Author URI: http://www.harishchouhan.com\r\n * Author Email: me@harishchouhan.com\r\n *\r\n * @package WordPress\r\n * @subpackage DOT_IRecommendThis\r\n * @author Harish\r\n * @since 2.0\r\n *\r\n * License:\r\n\r\n  Copyright 2013 \"I Recommend This WordPress Plugin\" (me@harishchouhan.coms)\r\n\r\n  This program is free software; you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License, version 2, as\r\n  published by the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program; if not, write to the Free Software\r\n  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\r\n\r\n */\r\nif ( ! defined( 'ABSPATH' ) ) exit; // Exit if accessed directly\r\nif ( ! class_exists( 'DOT_IRecommendThis' ) )\r\n{\r\n\r\n\r\n\tclass DOT_IRecommendThis {\r\n\r\n\t\tpublic $version = '2.6.2';\r\n\t\tpublic $db_version = '2.6.2';\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Constructor\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction __construct( $file )\r\n\t\t{\r\n\t\t\t$this->file = $file;\r\n\r\n\t\t\t// Run this on activation / deactivation\r\n\t\t\tregister_activation_hook( $file, array( $this, 'activate' ) );\r\n\r\n\t\t\t// Load text domain\r\n\t\t\tadd_action( 'init', array( &$this, 'load_localisation' ), 0 );\r\n\r\n\t\t\tadd_action( 'admin_menu', array( &$this, 'dot_irecommendthis_menu' ) );\r\n\t\t\tadd_action( 'admin_init', array( &$this, 'dot_irecommendthis_settings' ) );\r\n\t\t\tadd_action( 'init', array( &$this, 'add_widget_most_recommended_posts' ) );\r\n\t\t\tadd_action( 'wp_enqueue_scripts', array( &$this, 'dot_enqueue_scripts' ) );\r\n\t\t\tadd_filter( 'the_content', array( &$this, 'dot_content' ) );\r\n\t\t\tadd_action( 'publish_post', array( &$this, 'dot_setup_recommends' ) );\r\n\t\t\tadd_action( 'wp_ajax_dot-irecommendthis', array( &$this, 'ajax_callback' ) );\r\n\t\t\tadd_action( 'wp_ajax_nopriv_dot-irecommendthis', array( &$this, 'ajax_callback' ) );\r\n\t\t\tadd_shortcode( 'dot_recommends', array( &$this, 'shortcode' ) );\r\n\t\t\tadd_shortcode( 'dot_recommended_posts', array( &$this, 'dot_recommended_top_posts' ) );\r\n\r\n\t\t} // end constructor\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Activate\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function activate( $network_wide ) {\r\n\t\t\tif (!isset($wpdb)) $wpdb = $GLOBALS['wpdb'];\r\n\t\t\tglobal $wpdb;\r\n\r\n\t\t\t$table_name = $wpdb->prefix . \"irecommendthis_votes\";\r\n\t\t\tif($wpdb->get_var(\"show tables like '$table_name'\") != $table_name)\r\n\t\t\t{\r\n\t\t\t\t$sql = \"CREATE TABLE \" . $table_name . \" (\r\n\t\t\t\t\tid MEDIUMINT(9) NOT NULL AUTO_INCREMENT,\r\n\t\t\t\t\ttime TIMESTAMP NOT NULL,\r\n\t\t\t\t\tpost_id BIGINT(20) NOT NULL,\r\n\t\t\t\t\tip VARCHAR(15) NOT NULL,\r\n\t\t\t\t\tUNIQUE KEY id (id)\r\n\t\t\t\t);\";\r\n\r\n\t\t\t\trequire_once(ABSPATH . 'wp-admin/includes/upgrade.php');\r\n\r\n\t\t\t\tdbDelta($sql);\r\n\r\n\t\t\t\t$this->register_plugin_version();\r\n\r\n\t\t\t\tif ( $this->db_version != '' ) {\r\n\t\t\t\t\tupdate_option( 'dot_irecommendthis_db_version', $this->db_version );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//add_option(\"dot_irecommendthis_db_version\", $dot_irecommendthis_db_version);\r\n\t\t\t}\r\n\r\n\t\t} // end activate\r\n\r\n\t\tprivate function register_plugin_version () {\r\n\t\t\tif ( $this->version != '' ) {\r\n\t\t\t\tupdate_option( 'dot-irecommendthis' . '-version', $this->version );\r\n\t\t\t}\r\n\t\t} // End register_plugin_version()\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Localisation | Public | 1.4.6 | Return : void\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function load_localisation ()\r\n\t\t{\r\n\r\n\t\t\tload_plugin_textdomain( 'dot', false, dirname( plugin_basename( $this->file ) ) . '/languages/' );\r\n\r\n\r\n\t\t} // End load_localisation()\r\n\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Enqueue Scripts\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_enqueue_scripts()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_css']) ) $options['disable_css'] = '0';\r\n\t\t\tif( !isset($options['recommend_style']) ) $options['recommend_style'] = '0';\r\n\r\n\t\t\tif ($options['disable_css'] == '0') {\r\n\r\n\t\t\t\tif ($options['recommend_style'] == '0') {\r\n\t\t\t\t\twp_enqueue_style( 'dot-irecommendthis', plugins_url( '/css/dot-irecommendthis.css', __FILE__ ) );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twp_enqueue_style( 'dot-irecommendthis', plugins_url( '/css/dot-irecommendthis-heart.css', __FILE__ ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twp_register_script('dot-irecommendthis',  plugins_url( '/js/dot_irecommendthis.js', __FILE__ ), 'jquery', '2.6.0', 'in_footer');\r\n\r\n\t\t\twp_enqueue_script( 'jquery' );\r\n\t\t\twp_enqueue_script( 'dot-irecommendthis' );\r\n\r\n\t\t\twp_localize_script( 'dot-irecommendthis', 'dot_irecommendthis', array( 'ajaxurl' => admin_url('admin-ajax.php')) );\r\n\r\n\t\t}\t//dot_enqueue_scripts\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Admin Menu\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_irecommendthis_menu()\r\n\t\t{\r\n\t\t\t$page_title = __('I Recommend This', 'dot');\r\n\t\t\t$menu_title = __('I Recommend This', 'dot');\r\n\t\t\t$capability = 'manage_options';\r\n\t\t\t$menu_slug = 'dot-irecommendthis';\r\n\t\t\t$function =  array( &$this, 'dot_settings_page');\r\n\t\t\tadd_options_page($page_title, $menu_title, $capability, $menu_slug, $function);\r\n\r\n\t\t}\t//dot_irecommendthis_menu\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Settings & Settings Page\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tpublic function dot_irecommendthis_settings() // whitelist options\r\n\t\t{\r\n\t\t\tregister_setting( 'dot-irecommendthis', 'dot_irecommendthis_settings', array(&$this, 'settings_validate') );\r\n\r\n\t\t\tadd_settings_section( 'dot-irecommendthis', '', array(&$this, 'section_intro'), 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'show_on', __( 'Automatically display on', 'dot' ), array(&$this, 'setting_show_on'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_zero_suffix', __( 'Text after 0 Count', 'dot' ), array(&$this, 'setting_text_zero_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_one_suffix', __( 'Text after 1 Count', 'dot' ), array(&$this, 'setting_text_one_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'text_more_suffix', __( 'Text after more than 1 Count', 'dot' ), array(&$this, 'setting_text_more_suffix'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'link_title_new', __( 'Title for New posts', 'dot' ), array(&$this, 'setting_link_title_new'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'link_title_active', __( 'Title for already voted posts', 'dot' ), array(&$this, 'setting_link_title_active'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'disable_css', __( 'Disable CSS', 'dot' ), array(&$this, 'setting_disable_css'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'hide_zero', __( 'Hide Zero Count', 'dot' ), array(&$this, 'setting_hide_zero'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'disable_unique_ip', __( 'Disable IP saving', 'dot' ), array(&$this, 'setting_disable_unique_ip'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'recommend_style', __( 'Choose a style', 'dot' ), array(&$this, 'setting_recommend_style'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t\tadd_settings_field( 'instructions', __( 'Shortcode and Template Tag', 'dot' ), array(&$this, 'setting_instructions'), 'dot-irecommendthis', 'dot-irecommendthis' );\r\n\r\n\t\t}\t//dot_irecommendthis_settings\r\n\r\n\r\n\t\tpublic function dot_settings_page()\r\n\t\t{\r\n\t\t\t?>\r\n\t\t\t<div class=\"wrap\">\r\n\t\t\t\t<?php screen_icon(); ?>\r\n\t\t\t\t<h2>\"I Recommend This\" Options</h2>\r\n\t\t\t\t\t<div class=\"metabox-holder has-right-sidebar\">\r\n\t\t\t\t\t\t<!-- SIDEBAR -->\r\n\t\t\t\t\t\t<div class=\"inner-sidebar\">\r\n\t\t\t\t\t\t\t<!--<div class=\"postbox\">\r\n\t\t\t\t\t\t\t\t<h3><span>Metabox 1</span></h3>\r\n\t\t\t\t\t\t\t\t<div class=\"inside\">\r\n\t\t\t\t\t\t\t\t\t<p>Hi, I'm metabox 1!</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>-->\r\n\t\t\t\t\t\t</div> <!-- //inner-sidebar -->\r\n\r\n\t\t\t\t\t\t<!-- MAIN CONTENT -->\r\n\t\t\t\t\t\t<div id=\"post-body\">\r\n\t\t\t\t\t\t\t<div id=\"post-body-content\">\r\n\t\t\t\t\t\t\t\t<form action=\"options.php\" method=\"post\">\r\n\t\t\t\t\t\t\t\t\t<?php settings_fields( 'dot-irecommendthis' ); ?>\r\n\t\t\t\t\t\t\t\t\t<?php do_settings_sections( 'dot-irecommendthis' ); ?>\r\n\t\t\t\t\t\t\t\t\t<p class=\"submit\"><input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Save Changes', 'dot' ); ?>\" /></p>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> <!-- //main content -->\r\n\t\t\t\t\t</div> <!-- //metabox-holder -->\r\n\t\t\t</div>\r\n\t\t\t<?php\r\n\r\n\t\t} //dot_settings_page\r\n\r\n\t\tfunction section_intro()\r\n\t\t{\r\n\t\t\t?>\r\n\r\n\t\t\t<p><?php _e('<a href=\"https://twitter.com/harishchouhan\" class=\"twitter-follow-button\" data-show-count=\"false\">Follow @harishchouhan</a>\r\n<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=\"//platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");</script>', 'dot'); ?><br />\r\n\t\t\t<?php _e('or Check out our other themes & plugins at <a href=\"http://www.dreamsonline.net\">Dreams Online Themes</a>.', 'dot'); ?></p>\r\n\t\t\t<p><?php _e('This plugin allows your visitors to simply recommend or like your posts instead of commment it.', 'dot'); ?></p>\r\n\t\t\t<?php\r\n\t\t}\r\n\r\n\t\tfunction setting_show_on()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '0';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[add_to_posts]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[add_to_posts]\" value=\"1\"'. (($options['add_to_posts']) ? ' checked=\"checked\"' : '') .' />\r\n\t\t\t'. __('Posts', 'dot') .'</label><br />\r\n\t\t\t<input type=\"hidden\" name=\"dot_irecommendthis_settings[add_to_other]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[add_to_other]\" value=\"1\"'. (($options['add_to_other']) ? ' checked=\"checked\"' : '') .' />\r\n\t\t\t'. __('All other pages like Index, Archive, etc.', 'dot') .'</label><br />';\r\n\t\t}\r\n\r\n\t\tfunction setting_hide_zero()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['hide_zero']) ) $options['hide_zero'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[hide_zero]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[hide_zero]\" value=\"1\"'. (($options['hide_zero']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('Hide count if count is zero', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_disable_unique_ip()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[disable_unique_ip]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[disable_unique_ip]\" value=\"1\"'. (($options['disable_unique_ip']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('Disable saving of IP Address. Will only save cookies to track user votes.', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_disable_css()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['disable_css']) ) $options['disable_css'] = '0';\r\n\r\n\t\t\techo '<input type=\"hidden\" name=\"dot_irecommendthis_settings[disable_css]\" value=\"0\" />\r\n\t\t\t<label><input type=\"checkbox\" name=\"dot_irecommendthis_settings[disable_css]\" value=\"1\"'. (($options['disable_css']) ? ' checked=\"checked\"' : '') .' />' .\r\n\t\t\t__('I want to use my own CSS styles', 'dot') . '</label>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_zero_suffix()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_zero_suffix]\" class=\"regular-text\" value=\"'. $options['text_zero_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after zero count. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_one_suffix() {\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_one_suffix]\" class=\"regular-text\" value=\"'. $options['text_one_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after 1 person has recommended. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_text_more_suffix()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[text_more_suffix]\" class=\"regular-text\" value=\"'. $options['text_more_suffix'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Text to display after more than 1 person have recommended. Leave blank for no text after the count.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_link_title_new()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['link_title_new']) ) $options['link_title_new'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[link_title_new]\" class=\"regular-text\" value=\"'. $options['link_title_new'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Link Title element for posts not yet voted by a user.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_link_title_active()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['link_title_active']) ) $options['link_title_active'] = '';\r\n\r\n\t\t\techo '<input type=\"text\" name=\"dot_irecommendthis_settings[link_title_active]\" class=\"regular-text\" value=\"'. $options['link_title_active'] .'\" /><br />\r\n\t\t\t<span class=\"description\">'. __('Link Title element for posts already voted by a user.', 'dot') .'</span>';\r\n\t\t}\r\n\r\n\t\tfunction setting_recommend_style()\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['recommend_style']) ) $options['recommend_style'] = '0';\r\n\r\n\t\t\techo '<label><input type=\"radio\" name=\"dot_irecommendthis_settings[recommend_style]\" value=\"0\"'. (($options['recommend_style']) == \"0\" ? 'checked' : '') .' />\r\n\t\t\t'. __('Default style - Thumb', 'dot') .'</label><br />\r\n\r\n\t\t\t<label><input type=\"radio\" name=\"dot_irecommendthis_settings[recommend_style]\" value=\"1\"'. (($options['recommend_style']) == \"1\" ? 'checked' : '') .' />\r\n\t\t\t'. __('Heart', 'dot') .'</label><br />';\r\n\t\t}\r\n\r\n\t\tfunction setting_instructions()\r\n\t\t{\r\n\t\t\techo '<p>'. __('To use I Recomment This in your posts and pages you can use the shortcode:', 'dot') .'</p>\r\n\t\t\t<p><code>[dot_recommends]</code></p>\r\n\t\t\t<p>'. __('To use I Recomment This manually in your theme template use the following PHP code:', 'dot') .'</p>\r\n\t\t\t<p><code>&lt;?php if( function_exists(\\'dot_irecommendthis\\') ) dot_irecommendthis(); ?&gt;</code></p>\r\n\t\t\t<p>'. __('To show top recommended post from a particular date use below shortcode', 'dot') .'</p>\r\n\t\t\t<p><code>[dot_recommended_posts container=\\'div\\' post_type=\\'showcase\\' number=\\'10\\' year=\\'2013\\' monthnum=\\'7\\']</code></p>';\r\n\t\t}\r\n\r\n\t\tfunction settings_validate($input)\r\n\t\t{\r\n\t\t\treturn $input;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Content / Front-end view\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_content( $content )\r\n\t\t{\r\n\t\t\t// Don't show on custom page templates or pages\r\n\t\t\tif(is_page_template() || is_page() || is_front_page()) return $content;\r\n\r\n\t\t\t// Don't show after excerpts\r\n\t\t\tglobal $wp_current_filter;\r\n\t\t\tif ( in_array( 'get_the_excerpt', (array) $wp_current_filter ) ) {\r\n\t\t\t\treturn $content;\r\n\t\t\t}\r\n\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '0';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '0';\r\n\r\n\t\t\tif(is_singular('post') && $options['add_to_posts']) $content .= $this->dot_recommend();\r\n\t\t\tif((is_home() || is_category() || is_tag() || is_author() || is_date() || is_search()) && $options['add_to_other'] ) $content .= $this->dot_recommend();\r\n\r\n\t\t\treturn $content;\r\n\r\n\t\t}\t//dot_content\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Setup recommends\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_setup_recommends( $post_id )\r\n\t\t{\r\n\t\t\tif(!is_numeric($post_id)) return;\r\n\r\n\t\t\tadd_post_meta($post_id, '_recommended', '0', true);\r\n\r\n\t\t}\t//setup_recommends\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * AJAX Callback\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction ajax_callback($post_id)\r\n\t\t{\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['add_to_posts']) ) $options['add_to_posts'] = '1';\r\n\t\t\tif( !isset($options['add_to_other']) ) $options['add_to_other'] = '1';\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\r\n\t\t\tif( isset($_POST['recommend_id']) ) {\r\n\t\t\t\t// Click event. Get and Update Count\r\n\t\t\t\t$post_id = str_replace('dot-irecommendthis-', '', $_POST['recommend_id']);\r\n\t\t\t\techo $this->dot_recommend_this($post_id, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix'], 'update');\r\n\t\t\t} else {\r\n\t\t\t\t// AJAXing data in. Get Count\r\n\t\t\t\t$post_id = str_replace('dot-irecommendthis-', '', $_POST['post_id']);\r\n\t\t\t\techo $this->dot_recommend_this($post_id, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix'], 'get');\r\n\t\t\t}\r\n\r\n\t\t\texit;\r\n\r\n\t\t}\t//ajax_callback\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Main Process\r\n\t\t *--------------------------------------------*/\r\n\r\n\r\n\t\tfunction dot_recommend_this($post_id, $text_zero_suffix = false, $text_one_suffix = false, $text_more_suffix = false, $action = 'get')\r\n\t\t{\r\n\t\t\tif(!is_numeric($post_id)) return;\r\n\t\t\t$text_zero_suffix = strip_tags($text_zero_suffix);\r\n\t\t\t$text_one_suffix = strip_tags($text_one_suffix);\r\n\t\t\t$text_more_suffix = strip_tags($text_more_suffix);\r\n\r\n\r\n\t\t\tswitch($action) {\r\n\r\n\t\t\t\tcase 'get':\r\n\t\t\t\t\t$recommended = get_post_meta($post_id, '_recommended', true);\r\n\t\t\t\t\tif( !$recommended ){\r\n\t\t\t\t\t\t$recommended = 0;\r\n\t\t\t\t\t\tadd_post_meta($post_id, '_recommended', $recommended, true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( $recommended == 0 ) { $suffix = $text_zero_suffix; }\r\n\t\t\t\t\telseif( $recommended == 1 ) { $suffix = $text_one_suffix; }\r\n\t\t\t\t\telse { $suffix = $text_more_suffix; }\r\n\r\n\r\n\t\t\t\t\t/*\r\n\r\n\t\t\t\t\tHides the count is the count is zero.\r\n\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\t\t\tif( !isset($options['hide_zero']) ) $options['hide_zero'] = '0';\r\n\r\n\r\n\t\t\t\t\tif( ($recommended == 0) &&  $options['hide_zero'] == 1 ) {\r\n\r\n\t\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">&nbsp;</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t\treturn $output;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">'. $recommended .'</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t\treturn $output;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\tcase 'update':\r\n\r\n\t\t\t\t\t$recommended = get_post_meta($post_id, '_recommended', true);\r\n\r\n\t\t\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0';\r\n\r\n\t\t\t\t\t/*\r\n\r\n\t\t\t\t\tCheck if Unique IP saving is required or disabled\r\n\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif( $options['disable_unique_ip'] != 0 ) {\r\n\r\n\t\t\t\t\t\tif ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) ) {\r\n\t\t\t\t\t\t\treturn $recommended;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$recommended++;\r\n\t\t\t\t\t\tupdate_post_meta($post_id, '_recommended', $recommended);\r\n\t\t\t\t\t\tsetcookie('dot_irecommendthis_'. $post_id, time(), time()+3600*24*365, '/');\r\n\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tglobal $wpdb;\r\n\t\t\t\t\t\t$ip = $_SERVER['REMOTE_ADDR'];\r\n\t\t\t\t\t\t$voteStatusByIp = $wpdb->get_var(\"SELECT COUNT(*) FROM \".$wpdb->prefix.\"irecommendthis_votes WHERE post_id = '$post_id' AND ip = '$ip'\");\r\n\r\n\t\t\t\t\t\tif ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) || $voteStatusByIp != 0 ) {\r\n\t\t\t\t\t\t\treturn $recommended;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$recommended++;\r\n\t\t\t\t\t\tupdate_post_meta($post_id, '_recommended', $recommended);\r\n\t\t\t\t\t\tsetcookie('dot_irecommendthis_'. $post_id, time(), time()+3600*24*365, '/');\r\n\t\t\t\t\t\t$wpdb->query(\"INSERT INTO \".$wpdb->prefix.\"irecommendthis_votes VALUES ('', NOW(), '$post_id', '$ip')\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tif( $recommended == 0 ) { $suffix = $text_zero_suffix; }\r\n\t\t\t\t\telseif( $recommended == 1 ) { $suffix = $text_one_suffix; }\r\n\t\t\t\t\telse { $suffix = $text_more_suffix; }\r\n\r\n\t\t\t\t\t$output = '<span class=\"dot-irecommendthis-count\">'. $recommended .'</span> <span class=\"dot-irecommendthis-suffix\">'. $suffix .'</span>';\r\n\r\n\t\t\t\t\t$dot_irt_html = apply_filters( 'dot_irt_before_count', $output );\r\n\r\n\t\t\t\t\treturn $dot_irt_html;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\t//dot_recommend_this\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Shortcode\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction shortcode( $atts )\r\n\t\t{\r\n\t\t\textract( shortcode_atts( array('id' => null), $atts ) );\r\n\t\t\treturn $this->dot_recommend($id);\r\n\r\n\t\t}\t//shortcode\r\n\r\n\r\n\t\tfunction dot_recommend($id=null)\r\n\t\t{\r\n\r\n\r\n\t\t\tglobal $wpdb;\r\n\t\t\t$ip = $_SERVER['REMOTE_ADDR'];\r\n\t\t\t$post_ID = $id ? $id : get_the_ID();\r\n\t\t\tglobal $post;\r\n\r\n\r\n\t\t\t$options = get_option( 'dot_irecommendthis_settings' );\r\n\t\t\tif( !isset($options['text_zero_suffix']) ) $options['text_zero_suffix'] = '';\r\n\t\t\tif( !isset($options['text_one_suffix']) ) $options['text_one_suffix'] = '';\r\n\t\t\tif( !isset($options['text_more_suffix']) ) $options['text_more_suffix'] = '';\r\n\t\t\tif( !isset($options['link_title_new']) ) $options['link_title_new'] = '';\r\n\t\t\tif( !isset($options['link_title_active']) ) $options['link_title_active'] = '';\r\n\t\t\tif( !isset($options['disable_unique_ip']) ) $options['disable_unique_ip'] = '0'; //Check if Unique IP saving is required or disabled\r\n\r\n\r\n\r\n\t\t\tif( $options['disable_unique_ip'] != '1' ) {\r\n\r\n\t\t\t\t$voteStatusByIp = $wpdb->get_var(\"SELECT COUNT(*) FROM \".$wpdb->prefix.\"irecommendthis_votes WHERE post_id = '$post_ID' AND ip = '$ip'\");\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$output = $this->dot_recommend_this($post_ID, $options['text_zero_suffix'], $options['text_one_suffix'], $options['text_more_suffix']);\r\n\r\n\r\n\r\n\t\t\t//if ( isset($_COOKIE['dot_irecommendthis_'. $post_id]) && $voteStatusByIp != 0 ) {\r\n\r\n\t\t\tif( $options['disable_unique_ip'] != '0' ) {\r\n\r\n\t\t\t\tif (!isset($_COOKIE['dot_irecommendthis_'.$post_ID])) {\r\n\t\t\t\t\t$class = 'dot-irecommendthis';\r\n\r\n\r\n\t\t\t\t\tif( $options['link_title_new'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('Recommend this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_new'];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t$class = 'dot-irecommendthis active';\r\n\r\n\t\t\t\t\tif( $options['link_title_active'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('You already recommended this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_active'];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tif (!isset($_COOKIE['dot_irecommendthis_'.$post_ID]) && $voteStatusByIp == 0) {\r\n\t\t\t\t\t$class = 'dot-irecommendthis';\r\n\r\n\r\n\t\t\t\t\tif( $options['link_title_new'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('Recommend this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_new'];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t$class = 'dot-irecommendthis active';\r\n\r\n\t\t\t\t\tif( $options['link_title_active'] == '' ) {\r\n\r\n\t\t\t\t\t\t$title = __('You already recommended this', 'dot');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t$title = $options['link_title_active'];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$dot_irt_html = '<a href=\"#\" class=\"'. $class .'\" id=\"dot-irecommendthis-'. $post_ID .'\" title=\"'. $title .'\">';\r\n\r\n\t\t\t$dot_irt_html .= apply_filters( 'dot_irt_before_count', $output );\r\n\t\t\t$dot_irt_html .= '</a>';\r\n\r\n\t\t\treturn $dot_irt_html;\r\n\r\n\t\t\t//return '<a href=\"#\" class=\"'. $class .'\" id=\"dot-irecommendthis-'. $post_ID .'\" title=\"'. $title .'\"><i class=\"icon-heart\"></i> '. $output .'</a>';\r\n\t\t}\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Shortcode //dot_recommended_top_posts\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction dot_recommended_top_posts( $atts, $content = null )\r\n\t\t{\r\n\r\n\t\t\t// define attributes and their defaults\r\n\t\t\t// get our variable from $atts\r\n\t\t\t$atts = shortcode_atts( array(\r\n\t\t\t\t'container' => 'li',\r\n\t\t\t\t'number' => '10',\r\n\t\t\t\t'post_type' => 'post',\r\n\t\t\t\t'year' => '',\r\n\t\t\t\t'monthnum' => '',\r\n\t\t\t\t'show_count' => '1',\r\n\t\t\t), $atts );\r\n\r\n\t\t\tglobal $wpdb;\r\n\r\n\t\t\t\t// empty params array to hold params for prepared statement\r\n\t\t\t\t$params = array();\r\n\r\n\t\t\t\t// build query string\r\n\t\t\t\t$sql = \"SELECT * FROM $wpdb->posts, $wpdb->postmeta WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id\";\r\n\r\n\t\t\t\t// add year\r\n\t\t\t\tif( '' !== $atts['year'] ) {\r\n\t\t\t\t\t$sql .= ' AND YEAR(post_date) = %d';\r\n\t\t\t\t\t$params[] = $atts['year'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// add monthnum\r\n\t\t\t\tif( '' !== $atts['monthnum'] ) {\r\n\t\t\t\t\t$sql .= ' AND MONTH(post_date) = %d';\r\n\t\t\t\t\t$params[] = $atts['monthnum'];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// add post WHERE\r\n\t\t\t\t$sql .= \" AND post_status = 'publish' AND post_type = %s AND meta_key = '_recommended'\";\r\n\t\t\t\t$params[] = $atts['post_type'];\r\n\r\n\t\t\t\t// add order by and limit\r\n\t\t\t\t$sql .= \" ORDER BY {$wpdb->postmeta}.meta_value+0 DESC LIMIT %d\";\r\n\t\t\t\t$params[] = $atts['number'];\r\n\r\n\t\t\t\t// prepare sql statement\r\n\t\t\t\t$query = $wpdb->prepare( $sql, $params );\r\n\r\n\t\t\t\t// execute query\r\n\t\t\t\t$posts = $wpdb->get_results( $query );\r\n\r\n\t\t\t\t$return = '';\r\n\r\n\t\t\tforeach ($posts as $item) {\r\n\t\t\t\t$post_title = stripslashes( $item->post_title );\r\n\t\t\t\t$permalink = get_permalink( $item->ID );\r\n\t\t\t\t$post_count = $item->meta_value;\r\n\r\n\t\t\t\t$return .= '<' . esc_html( $atts['container'] ) . '>';\r\n\t\t\t\t$return .= '<a href=\"' . esc_url( $permalink ) . '\" title=\"' . esc_attr( $post_title ) .'\" rel=\"nofollow\">' . esc_html( $post_title ) . '</a> ';\r\n\r\n\t\t\t\tif ( $atts['show_count'] == '1') {\r\n\t\t\t\t\t$return .= '<span class=\"votes\">' . esc_html( $post_count ) . '</span> ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$return .= '</' . esc_html( $atts['container'] ) . '>';\r\n\r\n\t\t\t}\r\n\t\t\treturn $return;\r\n\r\n\t\t}\t//dot_recommended_top_posts\r\n\r\n\r\n\t\t/*--------------------------------------------*\r\n\t\t * Widget\r\n\t\t *--------------------------------------------*/\r\n\r\n\t\tfunction add_widget_most_recommended_posts()\r\n\t\t{\r\n\r\n\t\t\tfunction most_recommended_posts($numberOf, $before, $after, $show_count, $post_type=\"post\", $raw=false) {\r\n\t\t\t\tglobal $wpdb;\r\n\r\n\t\t\t\t$request = \"SELECT * FROM $wpdb->posts, $wpdb->postmeta\";\r\n\t\t\t\t$request .= \" WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id\";\r\n\t\t\t\t$request .= \" AND post_status='publish' AND post_type='$post_type' AND meta_key='_recommended'\";\r\n\t\t\t\t$request .= \" ORDER BY $wpdb->postmeta.meta_value+0 DESC LIMIT $numberOf\";\r\n\t\t\t\t$posts = $wpdb->get_results($request);\r\n\r\n\t\t\t\tif ($raw):\r\n\t\t\t\t\treturn $posts;\r\n\t\t\t\telse:\r\n\t\t\t\t\tforeach ($posts as $item) {\r\n\t\t\t\t\t\t$post_title = stripslashes($item->post_title);\r\n\t\t\t\t\t\t$permalink = get_permalink($item->ID);\r\n\t\t\t\t\t\t$post_count = $item->meta_value;\r\n\t\t\t\t\t\techo $before.'<a href=\"' . $permalink . '\" title=\"' . $post_title.'\" rel=\"nofollow\">' . $post_title . '</a>';\r\n\t\t\t\t\t\techo $show_count == '1' ? ' ('.$post_count.')' : '';\r\n\t\t\t\t\t\techo $after;\r\n\t\t\t\t\t}\r\n\t\t\t\tendif;\r\n\t\t\t}\r\n\r\n\t\t\tfunction widget_most_recommended_posts($args)\r\n\t\t\t{\r\n\t\t\t\textract($args);\r\n\t\t\t\t$options = get_option(\"most_recommended_posts\");\r\n\t\t\t\tif (!is_array( $options ))\r\n\t\t\t\t{\r\n\t\t\t\t\t$options = array(\r\n\t\t\t\t\t'title' => __('Most recommended posts', 'dot'),\r\n\t\t\t\t\t'number' => __('5', 'dot'),\r\n\t\t\t\t\t'show_count' => '0'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t$title = $options['title'];\r\n\t\t\t\t$numberOf = $options['number'];\r\n\t\t\t\t$show_count = $options['show_count'];\r\n\r\n\t\t\t\techo $before_widget;\r\n\t\t\t\techo $before_title . $title . $after_title;\r\n\t\t\t\techo '<ul class=\"mostrecommendedposts\">';\r\n\r\n\t\t\t\tmost_recommended_posts($numberOf, '<li>', '</li>', $show_count);\r\n\r\n\t\t\t\techo '</ul>';\r\n\t\t\t\techo $after_widget;\r\n\t\t\t}\r\n\r\n\t\t\twp_register_sidebar_widget('most_recommended_posts', __('Most recommended posts', 'dot'), 'widget_most_recommended_posts');\r\n\r\n\t\t\tfunction options_widget_most_recommended_posts() {\r\n\t\t\t\t$options = get_option(\"most_recommended_posts\");\r\n\r\n\t\t\t\tif (!is_array( $options )) {\r\n\t\t\t\t\t$options = array(\r\n\t\t\t\t\t'title' => __('Most recommended posts', 'dot'),\r\n\t\t\t\t\t'number' => __('5', 'dot'),\r\n\t\t\t\t\t'show_count' => '0'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( isset($_POST['mrp-submit']) ) {\r\n\t\t\t\t\t$options['title'] = htmlspecialchars($_POST['mrp-title']);\r\n\t\t\t\t\t$options['number'] = htmlspecialchars($_POST['mrp-number']);\r\n\t\t\t\t\t$options['show_count'] = $_POST['mrp-show-count'];\r\n\t\t\t\t\tif ( $options['number'] > 15) { $options['number'] = 15; }\r\n\r\n\t\t\t\t\tupdate_option(\"most_recommended_posts\", $options);\r\n\t\t\t\t}\r\n\t\t\t\t?>\r\n\t\t\t\t<p><label for=\"mrp-title\"><?php _e('Title:', 'dot'); ?><br />\r\n\t\t\t\t<input class=\"widefat\" type=\"text\" id=\"mrp-title\" name=\"mrp-title\" value=\"<?php echo $options['title'];?>\" /></label></p>\r\n\r\n\t\t\t\t<p><label for=\"mrp-number\"><?php _e('Number of posts to show:', 'dot'); ?><br />\r\n\t\t\t\t<input type=\"text\" id=\"mrp-number\" name=\"mrp-number\" style=\"width: 25px;\" value=\"<?php echo $options['number'];?>\" /> <small>(max. 15)</small></label></p>\r\n\r\n\t\t\t\t<p><label for=\"mrp-show-count\"><input type=\"checkbox\" id=\"mrp-show-count\" name=\"mrp-show-count\" value=\"1\"<?php if($options['show_count'] == '1') echo 'checked=\"checked\"'; ?> /> <?php _e('Show post count', 'dot'); ?></label></p>\r\n\r\n\t\t\t\t<input type=\"hidden\" id=\"mrp-submit\" name=\"mrp-submit\" value=\"1\" />\r\n\t\t\t\t<?php\r\n\t\t\t}\r\n\t\t\twp_register_widget_control('most_recommended_posts', __('Most recommended posts', 'dot'), 'options_widget_most_recommended_posts');\r\n\t\t}\r\n\r\n\r\n\t} // End Class\r\n\r\n\tglobal $dot_irecommendthis;\r\n\r\n\t// Initiation call of plugin\r\n\t$dot_irecommendthis = new DOT_IRecommendThis(__FILE__);\r\n\r\n}\r\n\r\n\t/*--------------------------------------------*\r\n\t * Template Tag\r\n\t *--------------------------------------------*/\r\n\r\n\tfunction dot_irecommendthis()\r\n\t{\r\n\t\tglobal $dot_irecommendthis;\r\n\t\techo $dot_irecommendthis->dot_recommend();\r\n\r\n\t}\r\n\r\n\t/*--------------------------------------------*\r\n\t * Settings Menu\r\n\t *--------------------------------------------*/\r\n\r\n\tadd_filter( 'plugin_action_links_' . plugin_basename( __FILE__ ), 'dot_irecommendthis_plugin_links' );\r\n\r\n\tfunction dot_irecommendthis_plugin_links($links) {\r\n\t\treturn array_merge(\r\n\t\t\tarray(\r\n\t\t\t\t'settings' => '<a href=\"' . get_bloginfo('wpurl') . '/wp-admin/options-general.php?page=dot-irecommendthis\">' . __('Settings', 'dot-irecommendthis') . '</a>'\r\n\t\t\t),\r\n\t\t\t$links\r\n\t\t);\r\n\t}\r\n\r\n\t/*--------------------------------------------*\r\n\t* Add Likes Column In Post Manage Page\r\n\t*--------------------------------------------*/\r\n\r\n\tfunction dot_columns_head($defaults) {\r\n\t\t$defaults['likes'] = __('Likes', 'dot');\r\n\t\treturn $defaults;\r\n\t}\r\n\r\n\tfunction dot_column_content($column_name, $post_ID) {\r\n\t\tif ($column_name == 'likes')\r\n\t\t\techo get_post_meta($post_ID, '_recommended', true) . ' ' . __('like', 'dot');\r\n\t}\r\n\r\n\tfunction dot_column_register_sortable( $columns ) {\r\n\t\t$columns['likes'] = 'likes';\r\n\t\treturn $columns;\r\n\t}\r\n\r\n\tfunction dot_column_orderby( $vars ) {\r\n\t\tif ( isset( $vars['orderby'] ) && 'likes' == $vars['orderby'] ) {\r\n\t\t\t$vars = array_merge( $vars, array(\r\n\t\t\t\t'meta_key' => '_recommended',\r\n\t\t\t\t'orderby' => 'meta_value'\r\n\t\t\t) );\r\n\t\t}\r\n\r\n\t\treturn $vars;\r\n\t}\r\n\tadd_filter('request', 'dot_column_orderby');\r\n\tadd_filter('manage_edit-post_sortable_columns', 'dot_column_register_sortable');\r\n\tadd_filter('manage_posts_columns', 'dot_columns_head');\r\n\tadd_action('manage_posts_custom_column', 'dot_column_content', 10, 2);\r\n\r\n?>", "=== Plugin Name ===\r\nContributors: hchouhan, themeist, dreamsmedia, Benoit \"LeBen\" Burgener\r\nDonate link: http://themeist.co\r\nTags: recommend, like, love, post, rate, rating, post rating, heart, dribbble like, tumblr like\r\nRequires at least: 4.0\r\nTested up to: 4.0\r\nStable tag: 3.7.3\r\nLast Updated: 2014-September-24\r\nLicense: GPLv2 or later\r\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\r\n\r\nThis plugin allows your visitors to simply like/recommend your posts instead of comment on it.\r\n\r\n== Description ==\r\n\r\nThis plugin allows your visitors to simply like/recommend your posts instead of comment on it.\r\n\r\n= Features of I Recommend This =\r\n\r\n- A counter to display the number of \"like\" and to vote.\r\n- A widget and a function to display the X most liked posts.\r\n- Saves Cookie as well as users IP address to disable voting on the same post again.\r\n- Displays Number of likes on Post Edit page along with sorting option. [HSG](http://profiles.wordpress.org/HSG/)\r\n- A preference pane with some options.\r\n\r\n** Advanced Options **\r\n\r\n* Hide count if count is zero\r\n* Set a default messages when count is zero, one or more\r\n* Choose between a \"Thumbs Up\" or a \"Heart\" icon to allow post recommending.\r\n* Disable plugin CSS to allow you to add your own styling rules\r\n* Disable saving of IP address in the table.\r\n\r\n** Shortcodes **\r\n\r\n- Add the voting link to any page using shortcodes\r\n- Display specific number of most recommended posts of all time or from a specific time period with support for custom post types.\r\n\r\n= Examples of how the plugin has been used =\r\n\r\n- [Flat UI Design Gallery](http://flattrendz.com)\r\n- [Harish's blog](http://www.harishchouhan.com/blog/)\r\n- [OnePageMania.com](http://onepagemania.com/)\r\n\r\n= Translations =\r\n\r\n- English (en_US) - Harish Chouhan\r\n- French (fr_FR) - Murat [wptheme.fr](http://wptheme.fr/)\r\n- Portuguese (pt_BR) - [Darlan ten Caten](http://i9solucoesdigitais.com.br/)\r\n- Persian (fa_IR) - [Hossein Soroor Golshani](http://profiles.wordpress.org/HSG/)\r\n- Spanish (es_ES) - [Andrew Kurtis - WebHostingHub](http://www.webhostinghub.com/)\r\n\r\nIf you have created your own language pack (or have an update of an existing one) you can send in your .PO and .MO files so we can bundle it into I Recommend This plugin. You can [download the latest POT file](http://plugins.svn.wordpress.org/i-recommend-this/trunk/languages/dot-en.po), and [PO files in each language](http://plugins.svn.wordpress.org/i-recommend-this/trunk/languages/).\r\n\r\n\r\nThis plugin is based exactly on Benoit \"LeBen\" Burgener's \"I Like This\" Plugin and has been modified after getting requests for the changes I had made on my website.\r\n\r\nPlease report any bugs you find via  [Support Forum](https://wordpress.org/support/plugin/i-recommend-this) or via comment on http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/\r\n\r\n> ** For Developers **\r\n>\r\n> If you're a developer and want to contribute, head over to [I Recommend This plugin on GitHub](https://github.com/hchouhan/I-Recommend-This)\r\n>\r\n\r\n= My Links =\r\n\r\n* Twitter @[harishchouhan](https://twitter.com/harishchouhan)\r\n* Google+ [Harish Chouhan](https://plus.google.com/u/0/103138475844539274387/)\r\n\r\n\r\nIf you love the plugin, please consider rating it and clicking on \"it works\" button.\r\n\r\n\r\n== Installation ==\r\n\r\n1. Upload the directory `/i-recommend-this/` to the `/wp-content/plugins/` directory\r\n2. Activate the plugin through the 'Plugins' menu in WordPress\r\n3. Click on the Settings link below the plugin name on the plugins page\r\n\r\nTo display the recomment/like link other than at the bottom of individual post, you would have to add below code in your template\r\n`<?php if( function_exists('dot_irecommendthis') ) dot_irecommendthis(); ?>`\r\n\r\nShortcode\r\n`[dot_recommends]`\r\n\r\nTo display the most recommended posts you can below code in your template\r\n`<?php if( function_exists('dot_irecommendthis') ) echo do_shortcode(\"[dot_recommended_posts container='div' post_type='post' number='10' year='2013' monthnum='7']\"); ?>`\r\n\r\nShortcode\r\n`[dot_recommended_posts post_type='post' container='div' number='10' year='2013' monthnum='7']`\r\n\r\n== Frequently Asked Questions ==\r\n\r\nTake a look at the [official \"I Recommend This\" FAQ](http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/).\r\n\r\nYou can also visit the [support center](http://www.dreamsonline.net/wordpress-plugins/i-recommend-this/) and start a discussion if needed.\r\n\r\n\r\n\r\n== Changelog ==\r\n\r\n= 3.7.3\r\n* Fixed a Possible SQL injection vulnerability reported by [Oskar Adin](https://github.com/osadi) and fixed by [Danny van Kooten](https://twitter.com/DannyvanKooten).\r\n\r\n= 3.7.2\r\n* Updated 'dot_irecommendthis.js' file to make plugin work even when the like button is on a hidden element. Thanks to [forthewinn](http://wordpress.org/support/profile/forthewinn). [Support Ticket](http://wordpress.org/support/topic/recommendation-to-fix-usage-in-hiddenexpanding-elements)\r\n\r\n= 3.7.1\r\n* Spanish translation added. Thanks to Andrew Kurtis from [WebHostingHub](http://www.webhostinghub.com/)\r\n\r\n= 3.7.0\r\n* Added to remove resolve wrong tags set for this plugin earlier. My sincere apologies for the extra update mess.\r\n\r\n= 2.6.5\r\n* Removed deprecaed JQuery function live with on in dot_irecommendthis.js\r\n\r\n= 2.6.4\r\n* Moved enqueued JS from wp_head() to wp_footer().\r\n\r\n= 2.6.3\r\n* Fixed 3 undefined index errors for disable_unique_ip, link_title_new & link_title_active. Thanks to [sebabornia](http://wordpress.org/support/profile/sebabornia)\r\n\r\n= 2.6.2\r\n* French translation added. Thanks to Murat from [wptheme.fr](http://wptheme.fr/)\r\n\r\n= 2.6.1\r\n* Updates to Persian translation\r\n\r\n= 2.6.0\r\n* Added Persian translation - Thanks to [HSG](http://profiles.wordpress.org/HSG/)\r\n* Now you can see number of likes on Post Edit page along with sorting option. Thanks to [HSG](http://profiles.wordpress.org/HSG/)\r\n\r\n= 2.5.3\r\n* Fixed PHP error in Widget.\r\n* Converted text strings in widget to be translatable.\r\n\r\n= 2.5.3\r\n* Fixed textdomain problem. Added portuguese translation. Thanks to @Darlan ten Caten.\r\n\r\n= 2.5.2\r\n* Replaced 'before' & 'after' attributes in shortocde 'dot_recommended_posts' with a single attribute 'container'\r\n\r\n= 2.5.1\r\n* Change shortcode name from dot_recommends_posts to dot_recommended_posts\r\n\r\n= 2.5.0\r\n* Added new shortcode with multiple options to display most recommended post / post_type of all time or from a specific date\r\n\r\n= 2.4.2\r\n* Bug fix. Thanks to @mmaxim\r\n\r\n= 2.4.1\r\n* Fixed undefined index error.\r\n\r\n= 2.4.0\r\n* Added filter dot_irt_before_count to be able to allow custom content or icons before the count.\r\n\r\n\r\n= 2.3.0\r\n* Added option to hide count if count is zero\r\n* Added option to disable saving of IP address in the database\r\n\r\n\r\n= 2.2.0\r\n* Added option to customize the link title. You can now remove the word recomment and add anything you like. Ideas suggested by Krystina Montemurro.\r\n\r\n\r\n= 2.1.5\r\n* Support URL update for new plugin details page.\r\n\r\n= 2.1.4\r\n* Removed 2 instances of double quotes. Thanks to [boyevul](http://profiles.wordpress.org/boyevul/)\r\n\r\n= 2.1.3\r\n* Fixed errors shown when Debug mode was on. Thanks to [Air](http://profiles.wordpress.org/air-1/)\r\n\r\n= 2.1.2\r\n* Fixed CSS Disable issue. Thanks to Nicolas Mollet.\r\n\r\n= 2.1\r\n* Fixed Naming Errors. Thanks to Marian Hillmar.\r\n* Fixed Shortcode name & Added support to place like button anywhere pointing to any post. Thanks to Bryant Williams for the code.\r\n\r\n\r\n= 2.0\r\n* This is a major revamp. The entire plugin structure is now based on OOP\r\n* Settings are now stored using Settings API and Settings page is created based on WordPress standards.\r\n* This plugin contains code from \"Zilla Like\" plugin developed by Orman Clark of www.themezilla.com.\r\n* Translation files are finally added.\r\n\r\n\r\n= 1.4.3\r\n* All deprecated functions removed. Plugin might not work on WordPress versions older than 3.\r\n\r\n\r\n= 1.4.1\r\n* Fixed bug that broke update.\r\n\r\n= 1.4\r\n* Added feature to display custom text when a post is liked.\r\n\r\n= 1.3\r\n* Removed 2 functions \"register_widget_control()\" & \"register_sidebar_widget()\" deprecated in version 2.8 with latest functions\r\n\r\n\r\n= 1.2\r\n* More bugs fixed.\r\n\r\n\r\n= 1.1\r\n* Fixed Bug that did not allow displaying text next to the counter.\r\n* Updated code using branch of original plugin on GitHub\r\n\r\n\r\n= 1.0\r\n* Removed JQuery loading style when heart is clicked.\r\n* Modified CSS & Images of LeBen's \"I Like This\" plugin based on what many users requested.\r\n* This is the first version"], "filenames": ["dot-irecommendthis.php", "readme.txt"], "buggy_code_start_loc": [6, 5], "buggy_code_end_loc": [887, 96], "fixing_code_start_loc": [6, 5], "fixing_code_end_loc": [904, 104], "type": "CWE-89", "message": "A vulnerability has been found in I Recommend This Plugin up to 3.7.2 on WordPress and classified as critical. Affected by this vulnerability is an unknown functionality of the file dot-irecommendthis.php. The manipulation leads to sql injection. The attack can be launched remotely. Upgrading to version 3.7.3 is able to address this issue. The name of the patch is 058b3ef5c7577bf557557904a53ecc8599b13649. It is recommended to upgrade the affected component. The identifier VDB-226309 was assigned to this vulnerability.", "other": {"cve": {"id": "CVE-2014-125099", "sourceIdentifier": "cna@vuldb.com", "published": "2023-04-20T06:15:06.867", "lastModified": "2023-04-29T02:54:19.860", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability has been found in I Recommend This Plugin up to 3.7.2 on WordPress and classified as critical. Affected by this vulnerability is an unknown functionality of the file dot-irecommendthis.php. The manipulation leads to sql injection. The attack can be launched remotely. Upgrading to version 3.7.3 is able to address this issue. The name of the patch is 058b3ef5c7577bf557557904a53ecc8599b13649. It is recommended to upgrade the affected component. The identifier VDB-226309 was assigned to this vulnerability."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 9.8, "baseSeverity": "CRITICAL"}, "exploitabilityScore": 3.9, "impactScore": 5.9}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "LOW", "baseScore": 6.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 3.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:P/I:P/A:P", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "PARTIAL", "integrityImpact": "PARTIAL", "availabilityImpact": "PARTIAL", "baseScore": 6.5}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 6.4, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-89"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:themeist:i_recommend_this:*:*:*:*:*:wordpress:*:*", "versionEndIncluding": "3.7.2", "matchCriteriaId": "C73088C0-5069-45B8-877F-E158B6C94FE7"}]}]}], "references": [{"url": "https://github.com/wp-plugins/i-recommend-this/commit/058b3ef5c7577bf557557904a53ecc8599b13649", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://github.com/wp-plugins/i-recommend-this/releases/tag/3.7.3", "source": "cna@vuldb.com", "tags": ["Release Notes"]}, {"url": "https://vuldb.com/?ctiid.226309", "source": "cna@vuldb.com", "tags": ["Permissions Required", "Third Party Advisory"]}, {"url": "https://vuldb.com/?id.226309", "source": "cna@vuldb.com", "tags": ["Permissions Required", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/wp-plugins/i-recommend-this/commit/058b3ef5c7577bf557557904a53ecc8599b13649"}}