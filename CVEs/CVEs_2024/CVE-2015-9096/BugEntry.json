{"buggy_code": ["Tue Jun  7 21:27:25 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/rubygems/*_{cert,cert_32}.pem: Regenerate test certificates for\n\t  OpenSSL 1.1.0. This is already in upstream.\n\t  https://github.com/rubygems/rubygems/commit/9be5c53939440a61c4bba73cfffbeb5cfadf72be\n\t  [ruby-core:75225] [Feature #12324]\n\nTue Jun  7 21:27:17 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/open-uri/test_ssl.rb: Regenerate test certificates. The test CA\n\t  certificate was incorrectly generated. A CA certificate must have the\n\t  basic constraints extension with cA bit set to TRUE. OpenSSL <= 1.0.2\n\t  allowed the error when the certificate is in the trusted store but\n\t  OpenSSL 1.1.0 no longer does.\n\t  [ruby-core:75225] [Feature #12324]\n\nTue Jun  7 21:20:38 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/openssl/test_x509name.rb: Don't register OID for 'emailAddress'\n\t  and 'serialNumber'. A recent change in OpenSSL made OBJ_create()\n\t  reject an already existing OID. They were needed to run tests with\n\t  OpenSSL 0.9.6 which is now unsupported.\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=52832e470f5fe8c222249ae5b539aeb3c74cdb25\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* test/openssl/test_ssl_session.rb (test_server_session): Duplicate\n\t  SSL::Session before re-adding to the session store. OpenSSL 1.1.0\n\t  starts rejecting SSL_SESSION once removed by SSL_CTX_remove_session().\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=7c2d4fee2547650102cd16d23f8125b76112ae75\n\n\t* test/openssl/test_pkey_ec.rb (setup): Remove X25519 from @keys. X25519\n\t  is new in OpenSSL 1.1.0 but this is for key agreement and not for\n\t  signing.\n\n\t* test/openssl/test_pair.rb, test/openssl/test_ssl.rb,\n\t  test/openssl/utils.rb: Set security level to 0 when using aNULL cipher\n\t  suites.\n\n\t* test/openssl/utils.rb: Use 1024 bits DSA key for client certificates.\n\n\t* test/openssl/test_engine.rb: Run each test in separate process.\n\t  We can no longer cleanup engines explicitly as ENGINE_cleanup() was\n\t  removed.\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=6d4fb1d59e61aacefa25edc4fe5acfe1ac93f743\n\n\t* ext/openssl/ossl_engine.c (ossl_engine_s_cleanup): Add a note to the\n\t  RDoc for Engine.cleanup.\n\n\t* ext/openssl/lib/openssl/digest.rb: Don't define constants for DSS,\n\t  DSS1 and SHA(-0) when using with OpenSSL 1.1.0. They are removed.\n\n\t* test/openssl/test_digest.rb, test/openssl/test_pkey_dsa.rb,\n\t  test/openssl/test_pkey_dsa.rb, test/openssl/test_ssl.rb,\n\t  test/openssl/test_x509cert.rb, test/openssl/test_x509req.rb: Don't\n\t  test unsupported hash functions.\n\nTue Jun  7 17:49:52 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Change test for encodings\n\t  without any non-ASCII case conversions from ASCII-only test\n\t  to full test.\n\nTue Jun  7 17:18:39 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c (rb_str_upcase_bang, rb_str_capitalize_bang,\n\t  rb_str_swapcase_bang): Switch to use primitive.\n\nTue Jun  7 16:44:16 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c (rb_str_downcase_bang): Switch to use primitive except if\n\t  conversion can be done ASCII-only.\n\nTue Jun  7 16:13:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Add regression tests for\n\t  current ASCII-only case conversion.\n\nTue Jun  7 15:28:38 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Fix method name\n\t  (generate_casefold_tests -> generate_case_mapping_tests).\n\nTue Jun  7 15:05:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.h/c: Rename onigenc_not_support_case_map to\n\t  onigenc_ascii_only_case_map.\n\n\t* regenc.h: Add definition of onigenc_single_byte_ascii_only_case_map.\n\n\t* enc/iso_8859_X.c, windows_125X.c, ascii.c, us-ascii.c, koi8_x.c:\n\t  Replace onigenc_not_support_case_map by\n\t  onigenc_single_byte_ascii_only_case_map.\n\n\t* enc/big5.c, cp949.c, emacs_mule.c, euc_X.c, gbX.c, shift_jis.c,\n\t  windows_31j.c: Replace onigenc_not_support_case_map by\n\t  onigenc_ascii_only_case_map.\n\nTue Jun  7 14:57:09 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check for SSL_CTX_set_min_proto_version()\n\t  macro added in OpenSSL 1.1.0. Version-specific methods, such as\n\t  TLSv1_method(), are deprecated in OpenSSL 1.1.0. We need to use\n\t  version-flexible methods (TLS_*method() or SSLv23_*method()) and\n\t  disable other protocol versions as necessary.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_ssl.c: Use SSL_CTX_set_{min,max}_proto_version() to\n\t  fix the protocol version.\n\nTue Jun  7 12:55:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.c (onigenc_not_support_case_map): Move to end of file;\n\t  (onigenc_single_byte_ascii_only_case_map): Add new function.\n\nTue Jun  7 09:26:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.c (onigenc_not_support_case_map): Rewrite to work correctly\n\t  in ASCII range.\n\nMon Jun  6 23:00:00 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* appveyor.yml: Update libressl version to 2.3.5.\n\nMon Jun  6 18:37:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_throw_start): check if the iseq is symbol\n\t  proc, class definition should not be a symbol proc.\n\t  [ruby-core:75856] [Bug #12462]\n\nMon Jun  6 18:36:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Added UTF-16BE/LE and UTF-32BE/LE to supported encodings\n\t  for Unicode case mapping.\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Tests for above\n\t  functionality; fixed an encoding issue in assertion error message.\n\nMon Jun  6 17:29:35 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Speed up testing for small\n\t  encodings by preselecting codepoints.\n\nMon Jun  6 17:10:50 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_cipher.c (ossl_cipher_free): Use EVP_CIPHER_CTX_free()\n\t  to free EVP_CIPHER_CTX allocated by EVP_CIPHER_CTX_new().\n\t  [ruby-core:75225] [Feature #12324]\n\nMon Jun  6 13:37:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c Change rb_str_casemap to use encoding primitive\n\t  case_map instead of directly calling onigenc_unicode_case_map.\n\nMon Jun  6 13:16:46 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb:\n\t  Remove :lithuanian guard for Unicode case mapping.\n\nMon Jun  6 10:39:56 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.h: Include ruby/config.h. r55285 added\n\t  some inline functions but VC does not recognize 'inline' keyword.\n\nMon Jun  6 09:25:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (thread_start_func_2): report raised exception if\n\t  report_on_exception flag is set.  [Feature #6647]\n\nMon Jun  6 01:36:24 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of SSL_is_server(). This\n\t  function was introduced in OpenSSL 1.0.2.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/openssl_missing.h: Implement SSL_is_server() if missing.\n\n\t* ext/openssl/ossl_ssl.c (ssl_info_cb): Use SSL_is_server() to see if\n\t  the SSL is server. The state machine in OpenSSL was rewritten and\n\t  SSL_get_state() no longer returns SSL_ST_ACCEPT.\n\n\t  (ossl_ssl_cipher_to_ary, ossl_sslctx_session_get_cb): Add some\n\t  `const`s to suppress warning.\n\nMon Jun  6 01:18:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c (decode_bool): Do the same thing as\n\t  d2i_ASN1_BOOLEAN() does by ourselves. This function is removed in\n\t  OpenSSL 1.1.0.\n\t  [ruby-core:75225] [Feature #12324]\n\nMon Jun  6 00:34:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of accessor functions that\n\t  don't exist in OpenSSL 0.9.8. OpenSSL 1.1.0 made most of its\n\t  structures opaque and requires use of these accessor functions.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/openssl_missing.[ch]: Implement them if missing.\n\n\t* ext/openssl/ossl*.c: Use these accessor functions.\n\n\t* test/openssl/test_hmac.rb: Add missing test for HMAC#reset.\n\nMon Jun  6 00:00:13 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.[ch]: Implement EVP_PKEY_get0_*() and\n\t  {RSA,DSA,EC_KEY,DH}_get0_*() functions.\n\t  OpenSSL 1.1.0 makes EVP_PKEY/RSA/DSA/DH opaque. We used to provide\n\t  setter methods for each parameter of each PKey type, for example\n\t  PKey::RSA#e=, but this is no longer possible because the new API\n\t  RSA_set0_key() requires the 'n' at the same time. This commit adds\n\t  deprecation warning to them and adds PKey::*#set_* methods as direct\n\t  wrapper for those new APIs. For example, 'rsa.e = 3' now needs to be\n\t  rewritten as 'rsa.set_key(rsa.n, 3, rsa.d)'.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_pkey*.[ch]: Use the new accessor functions. Implement\n\t  RSA#set_{key,factors,crt_params}, DSA#set_{key,pqg}, DH#set_{key,pqg}.\n\t  Emit a warning with rb_warning() when old setter methods are used.\n\n\t* test/drb/ut_array_drbssl.rb, test/drb/ut_drb_drbssl.rb,\n\t  test/rubygems/test_gem_remote_fetcher.rb: Don't set a priv_key for DH\n\t  object that are used in tmp_dh_callback. Generating a new key pair\n\t  every time should be fine - actually the private exponent is ignored\n\t  in OpenSSL >= 1.0.2f/1.0.1r even if we explicitly set.\n\t  https://www.openssl.org/news/secadv/20160128.txt\n\nSun Jun  5 22:06:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* configure.in: Fix the timing to detect the appropriate C++ compiler\n\t  in OS X.\n\nSun Jun  5 21:42:24 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check absence of CRYPTO_lock() to see if the\n\t  OpenSSL has the new threading API. In OpenSSL <= 1.0.2, an application\n\t  had to set locking callbacks to use OpenSSL in a multi-threaded\n\t  environment. OpenSSL 1.1.0 now finds pthreads or Windows threads so we\n\t  don't need to do something special.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t  Also check existence of *_up_ref(). Some structures in OpenSSL have\n\t  a reference counter. We used to increment it with CRYPTO_add() which\n\t  is a part of the old API.\n\n\t* ext/openssl/openssl_missing.h: Implement *_up_ref() if missing.\n\n\t* ext/openssl/ossl.c: Don't set locking callbacks if unneeded.\n\n\t* ext/openssl/ossl_pkey.c, ext/openssl/ossl_ssl.c,\n\t  ext/openssl/ossl_x509cert.c, ext/openssl/ossl_x509crl.c,\n\t  ext/openssl/ossl_x509store.c: Use *_up_ref() instead of CRYPTO_add().\n\nSun Jun  5 21:38:13 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check if RAND_pseudo_bytes() is usable. It is\n\t  marked as deprecated in OpenSSL 1.1.0.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_rand.c: Disable Random.pseudo_bytes if\n\t  RAND_pseudo_bytes() is unavailable.\n\n\t* test/openssl/test_random.rb: Don't test Random.pseudo_bytes if not\n\t  defined.\n\nSun Jun  5 19:06:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* NEWS: Add news about Unicode-wide case mapping for\n\t  String/Symbol#upcase/downcase/swapcase/capitalize(!).\n\nSun Jun  5 15:24:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb:\n\t  Remove :lithuanian guard for Unicode case mapping.\n\nSun Jun  5 14:46:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Remove :lithuanian guard for Unicode case mapping.\n\nSat Jun  4 10:54:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt.h (struct crypt_data): remove unnecessary member\n\t  \"initialized\".\n\n\t* missing/crypt.c (des_setkey_r): nothing to be initialized in\n\t  crypt_data.\n\n\t* configure.in (struct crypt_data): check for \"initialized\" in\n\t  struct crypt_data, which may be only in glibc, and isn't on AIX\n\t  at least.\n\nSat Jun  4 10:38:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/win32.c: unify MAX_PATH, _MAX_PATH, and MAXPATHLEN to\n\t  PATH_MAX, except for MAX_PATH in get_special_folder for an API\n\t  limit.\n\nFri Jun  3 21:27:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (process_options): rb_str_conv_enc() never set encoding\n\t  of the source string, but returns the string itself if the\n\t  conversion failed.  then the instance variable does not need to\n\t  be set again.\n\nFri Jun  3 18:04:37 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ruby.c (process_options): need to duplicate path before passing it to\n\t  rb_str_conv_enc() because the function might call rb_enc_associate()\n\t  internally.  this fixes test failures on Windows introduced at r55260.\n\nFri Jun  3 17:44:25 2016  Reiner Herrmann  <reiner@reiner-h.de>\n\n\t* lib/mkmf.rb (create_makefile): sort lists of source and object\n\t  files in generated Makefile, unless given by extconf.rb.\n\t  [Fix GH-1367]\n\nThu Jun  2 21:18:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/win32.c (get_special_folder): use SHGetPathFromIDListEx if\n\t  available instead of old SHGetPathFromIDListW, to check the\n\t  buffer size.\n\nThu Jun  2 17:05:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (ruby_init_loadpath_safe): remove MAXPATHLEN restriction\n\t  for Windows 10.\n\nThu Jun  2 16:51:35 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* misc/ruby-mode.el (ruby-here-doc-beg-re),\n\t  (ruby-here-doc-beg-match, ruby-parse-partial): Support for\n\t  `squiggly heredoc' syntax in ruby-mode.  [Fix GH-1372]\n\nThu Jun  2 10:24:48 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Raise ArgumentError when invalid string is detected in\n\t  case mapping methods.\n\n\t* enc/unicode.c: Check for invalid string and signal with negative\n\t  length value.\n\n\t* test/ruby/enc/test_case_mapping.rb: Add tests for above.\n\n\t* test/ruby/test_m17n_comb.rb: Add a message to clarify test failure.\n\nWed Jun  1 21:41:05 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of ASN1_TIME_adj(). The old\n\t  ASN1_TIME_set() is not Year 2038 ready on sizeof(time_t) == 4\n\t  environment. This function was added in OpenSSL 1.0.0.\n\t  [ruby-core:45552] [Bug #6571]\n\n\t* ext/openssl/ossl_asn1.c (ossl_time_split): Added. Split the argument\n\t  (Time) into the number of days elapsed since the epoch and the\n\t  remainder seconds to conform to ASN1_TIME_adj().\n\t  (obj_to_asn1utime, obj_to_asn1gtime): Use ossl_time_split() and\n\t  ASN1_*TIME_adj().\n\n\t* ext/openssl/ossl_asn1.h: Add the function prototype for\n\t  ossl_time_split().\n\n\t* ext/openssl/ossl_x509.[ch]: Add ossl_x509_time_adjust(). Similarly to\n\t  obj_to_asn1*time(), use X509_time_adj_ex() instead of X509_time_adj().\n\n\t* ext/openssl/ossl_x509cert.c, ext/openssl/ossl_x509crl.c,\n\t  ext/openssl/ossl_x509revoked.c: Use ossl_x509_time_adjust().\n\nWed Jun  1 15:58:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: revert r55237.  replace crypt, not crypt_r, and\n\t  check if crypt is broken more.\n\n\t* missing/crypt.c: move crypt_r.c\n\n\t* string.c (rb_str_crypt): use crypt_r if provided by the system.\n\nWed Jun  1 14:07:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt_r.c (a64toi): initialize statically and fix out of\n\t  bounds access when salt is not 7bit clean.\n\nWed Jun  1 11:34:59 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/Makefile.sub (MISSING): fixed build error introduced at r55237.\n\nWed Jun  1 09:48:06 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_crypt): use reentrant crypt_r.\n\nWed Jun  1 09:37:26 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* missing/crypt.c (des_setkey): void function never returns any value.\n\nWed Jun  1 09:16:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* crypt.h: separate header file from missing/crypt.c.\n\n\t* missing/crypt.c (crypt_r, setkey_r, encrypt_r): add reentrant\n\t  versions.\n\nWed Jun  1 02:25:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt.c: fix size macros to use configured values\n\t  for platforms long is larger than 32bit.\n\t  [ruby-core:75792] [Bug #12446]\n\nTue May 31 17:28:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb (OptionParser::Completion.candidate): get rid of\n\t  nil as key names.  [ruby-core:75773] [Bug #12438]\n\n\t* lib/optparse.rb (OptionParser#make_switch): char class option\n\t  cannot be NoArgument, default to RequiredArgument.\n\nTue May 31 00:30:11 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/socket/raddrinfo.c (host_str, port_str): Use StringValueCStr\n\t  instead of (Safe)StringValue, to detect NUL byte in the string.\n\nMon May 30 22:02:01 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c (time_to_time_t): Use NUM2TIMET() instead of\n\t  NUM2LONG(). time_t may be larger than long.\n\t  [ruby-core:45552] [Bug #6571]\n\nMon May 30 21:15:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Document current behavior for other case mapping methods\n\t  on String. [ci skip]\n\nMon May 30 20:00:25 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Document current situation for String#downcase. [ci skip]\n\nMon May 30 18:29:28 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_s_alloc): Enable the automatic\n\t  curve selection for ECDH by calling SSL_CTX_set_ecdh_auto(). With\n\t  this a TLS server automatically selects a curve which both the client\n\t  and the server support to use in ECDH. This changes the default\n\t  behavior but users can still disable ECDH by excluding 'ECDH' cipher\n\t  suites from the cipher list (with SSLContext#ciphers=). This commit\n\t  also deprecate #tmp_ecdh_callback=. It was added in Ruby 2.3.0. It\n\t  wraps SSL_CTX_set_tmp_ecdh_callback() which will be removed in OpenSSL\n\t  1.1.0. Its callback receives two values 'is_export' and 'keylength'\n\t  but both are completely useless for determining a curve to use in\n\t  ECDH. The automatic curve selection was introduced to replace this.\n\n\t  (ossl_sslctx_setup): Deprecate SSLContext#tmp_ecdh_callback=. Emit a\n\t  warning if this is in use.\n\n\t  (ossl_sslctx_set_ecdh_curves): Add SSLContext#ecdh_curves=. Wrap\n\t  SSL_CTX_set1_curves_list(). If it is not available, this falls back\n\t  to SSL_CTX_set_tmp_ecdh().\n\n\t  (Init_ossl_ssl): Define SSLContext#ecdh_curves=.\n\n\t* ext/openssl/extconf.rb: Check the existence of EC_curve_nist2nid(),\n\t  SSL_CTX_set1_curves_list(), SSL_CTX_set_ecdh_auto() and\n\t  SSL_CTX_set_tmp_ecdh_callback().\n\n\t* ext/openssl/openssl_missing.[ch]: Implement EC_curve_nist2nid() if\n\t  missing.\n\n\t* test/openssl/test_pair.rb (test_ecdh_callback): Use\n\t  EnvUtil.suppress_warning to suppress deprecated warning.\n\n\t  (test_ecdh_curves): Test that SSLContext#ecdh_curves= works.\n\n\t* test/openssl/utils.rb (start_server): Use SSLContext#ecdh_curves=.\n\nMon May 30 16:28:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/raddrinfo.c (host_str, port_str): use RSTRING_LEN\n\t  instead of strlen, since RSTRING_PTR StringValueCStr may not be\n\t  NUL-terminated when SHARABLE_MIDDLE_SUBSTRING=1.  reported by\n\t  @tmtms, http://twitter.com/tmtms/status/736910516229005312\n\nMon May 30 16:20:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (str_fill_term): return new pointer reallocated by\n\t  filling terminator.\n\nMon May 30 14:54:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/stringio/stringio.c (enc_subseq): share the return value and\n\t  the buffer as possible.\n\nMon May 30 14:50:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (str_substr, rb_str_aref): refactor not to create\n\t  unnecessary empty string.\n\n\t* string.c (str_byte_substr, str_byte_aref): ditto.\n\nMon May 30 00:09:37 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/-test-/auto_ext.rb: fixed a heedless bug introduced at r55198.\n\t  this change will make RubyCI green.\n\nSun May 29 22:58:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regexec.c (ONIGENC_IS_MBC_ASCII_WORD): redefine optimized one.\n\t  WORD of Ruby's ascii compatible encoding is always [a-zA-Z0-9_].\n\nSun May 29 22:44:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regexec.c (match_at): make compilers optimize harder.\n\nSun May 29 12:08:42 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/-test-/auto_ext.rb (auto_ext): utility method to create\n\t  extension libraries for tests.\n\nSat May 28 20:40:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* misc/ruby-additional.el (ruby-insert-heredoc-code-block): insert\n\t  here document code block for assert_separately mainly.\n\nSat May 28 20:34:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/test_unicode_normalize.rb: Add test to check for availability of\n\t  Unicode data file; refactoring; fix an error with tests for destructive\n\t  method (unicode_normalize!).\n\nSat May 28 19:08:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Add error messages to tests\n\t  for data file availability; refactoring.\n\nSat May 28 14:00:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/lib/openssl/ssl.rb (SSLSocket): Move the implementation of\n\t  SSLSocket#initialize to C. Initialize the SSL (OpenSSL object) in it.\n\t  Currently this is delayed until ossl_ssl_setup(), which is called from\n\t  SSLSocket#accept or #connect. Say we call SSLSocket#hostname= with an\n\t  illegal value. We expect an exception to be raised in #hostname= but\n\t  actually we get it in the later SSLSocket#connect. Because the SSL is\n\t  not ready at #hostname=, the actual call of SSL_set_tlsext_host_name()\n\t  is also delayed.\n\t  This also fixes: [ruby-dev:49376] [Bug #11724]\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_initialize): Added. Almost the same\n\t  as the Ruby version but this instantiate the SSL object at the same\n\t  time.\n\n\t  (ossl_ssl_setup): Adjust to the changes. Just set the underlying IO to\n\t  the SSL.\n\n\t  (ssl_started): Added. Make use of SSL_get_fd(). This returns -1 if not\n\t  yet set by SSL_set_fd().\n\n\t  (ossl_ssl_data_get_struct): Removed. Now GetSSL() checks that the SSL\n\t  exists.\n\n\t  (ossl_ssl_set_session): Don't call ossl_ssl_setup() here as now the\n\t  SSL is already instantiated in #initialize.\n\n\t  (ossl_ssl_shutdown, ossl_start_ssl, ossl_ssl_read_internal,\n\t   ossl_ssl_write_internal, ossl_ssl_stop, ossl_ssl_get_cert,\n\t   ossl_ssl_get_peer_cert, ossl_ssl_get_peer_cert_chain,\n\t   ossl_ssl_get_version, ossl_ssl_get_cipher, ossl_ssl_get_state,\n\t   ossl_ssl_pending, ossl_ssl_session_reused,\n\t   ossl_ssl_get_verify_result, ossl_ssl_get_client_ca_list,\n\t   ossl_ssl_npn_protocol, ossl_ssl_alpn_protocol, ossl_ssl_tmp_key): Use\n\t  GetSSL() instead of ossl_ssl_data_get_struct(). Use ssl_started().\n\n\t  (Init_ossl_ssl): Add method declarations of SSLSocket#{initialize,\n\t  hostname=}.\n\n\t* ext/openssl/ossl_ssl.h (GetSSL): Check that the SSL is not NULL. It\n\t  should not be NULL because we now set it in #initialize.\n\n\t* ext/openssl/ossl_ssl_session.c (ossl_ssl_session_initialize): No need\n\t  to check if the SSL is NULL.\n\nSat May 28 10:47:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update latest releases, power_assert-0.3.0,\n\t  test-unit 3.1.9, minitest 5.9.0, did_you_mean 1.0.1\n\nSat May 28 10:45:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* addr2line.c: drop support for ATARI ST platform. It was\n\t  discontinued more than two decades ago. [fix GH-1350] Patch by\n\t  @cremno\n\t* include/ruby/ruby.h: ditto.\n\t* io.c: ditto.\n\nSat May 28 10:39:47 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Converted exception for\n\t  unavailable Unicode data files to failed assertion.\n\nSat May 28 10:26:18 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/cgi/util.rb: added missing quote.\n\t  [fix GH-1363][ci skip] Patch by @dwaller\n\nFri May 27 17:38:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_local_constants_i): exclude hidden constants.\n\t  [ruby-core:75575] [Bug #12389]\n\nFri May 27 17:09:44 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* transcode.c (str_transcode0): scrub in the given encoding when\n\t  the source encoding is given, not in the encoding of the\n\t  receiver.  [ruby-core:75732] [Bug #12431]\n\nFri May 27 15:07:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): remove nul padding which\n\t  caused syntax error if fmt is not a string literal.\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): suppress array-bounds\n\t  warnings by old clang.\n\n\t* include/ruby/ruby.h (rb_scan_args0): make extractor macros\n\t  inline functions, which do not validate the format and are\n\t  unnecessary to be expanded.\n\nFri May 27 01:00:36 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* symbol.c (is_identchar): use ISDIGIT instead of rb_enc_isalnum.\n\t  Though rb_enc_isalnum is encoding aware function, its argument here\n\t  is *m, which is a single byte. Therefore ISDIGIT is faster.\n\n\t* symbol.c (is_special_global_name): ditto.\n\n\t* symbol.c (rb_enc_symname_type): ditto.\n\nFri May 27 00:39:40 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): add nul padding here to\n\t  apply to all references.\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): move length mismatch\n\t  check outside conditional operators.\n\nThu May 26 14:21:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_dh.c (ossl_dh_compute_key): Check that the DH\n\t  has 'p' (the prime) before calling DH_size(). We can create a DH with\n\t  no parameter but DH_size() does not check and dereferences NULL.\n\t  [ruby-core:75720] [Bug #12428]\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_sign): Ditto. DSA_size() does\n\t  not check dsa->q.\n\n\t* ext/openssl/ossl_pkey_rsa.c (ossl_rsa_public_encrypt,\n\t  ossl_rsa_public_decrypt, ossl_rsa_private_encrypt,\n\t  ossl_rsa_private_decrypt): Ditto. RSA_size() does not check rsa->n.\n\nThu May 26 14:13:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_count): verify length with\n\t  counting variables together.\n\nThu May 26 09:45:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Add set of comprehensive\n\t  (across most Unicode characters; later across most character encodings)\n\t  tests for case mapping.\n\nThu May 26 05:00:13 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* class.c (rb_define_class): Fix documentation.\n\nWed May 25 20:50:12 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (unescape_nonascii): scan hex up to only 3 characters.\n\t  [Bug #12420] [Bug #12423]\n\nWed May 25 19:07:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Handle DOTLESS_i by hand because it isn't involved in folding.\n\nWed May 25 18:30:53 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regparse.c (fetch_token_in_cc): raise error if given octal escaped\n\t  character is too big. [Bug #12420] [Bug #12423]\n\nWed May 25 17:45:15 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl, test/openssl: Drop OpenSSL < 0.9.8 support.\n\nWed May 25 17:43:30 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.h, ext/openssl/ossl.h: Remove\n\t  unnecessary 'extern \"C\"' blocks. We don't use C++ and these headers\n\t  are local to ext/openssl, so there is no need to enclose with it.\n\nWed May 25 17:42:58 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Remove check of OPENSSL_FIPS macro. This is\n\t  unneeded because we can check the macro directly in source code,\n\t  just as we already do for OPENSSL_NO_* macros.\n\n\t* ext/openssl/ossl.c: Replace occurrences of HAVE_OPENSSL_FIPS with\n\t  OPENSSL_FIPS.\n\nWed May 25 17:13:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* class.c (rb_scan_args): merge code for n_trail.\n\nWed May 25 17:11:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_validate): move failed\n\t  condition to the terminal.  [ruby-core:75714] [Bug #12426]\n\nWed May 25 13:13:37 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regcomp.c: remove condition for debug output because prelude\n\t  doesn't use regexp now.\n\nWed May 25 13:10:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regcomp.c (compile_length_tree): return error code immediately\n\t  if compile_length_tree raised error [Bug #12418]\n\nWed May 25 08:01:39 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fix flag error for switch from titlecase to lowercase.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above error.\n\nWed May 25 01:13:55 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ec_key_new_from_group): Create a new\n\t  EC_KEY on given EC group. Extracted from ossl_ec_key_initialize().\n\t  (ossl_ec_key_s_generate): Added. Create a new EC instance and\n\t  generate a random private and public key.\n\t  (ossl_ec_key_initialize): Use ec_key_new_from_group().\n\t  (Init_ossl_ec): Define the new method EC.generate. This change is\n\t  for consistency with other PKey types.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb: Test that EC.generate works.\n\nWed May 25 00:37:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_generate_key): Fix up RDoc.\n\t  (Init_ossl_ec): Rename EC#generate_key to EC#generate_key!. Make the\n\t  old name an alias of #generate_key!. This change is for consistency\n\t  with other PKey types.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb: Use EC#generate_key! instead of\n\t  EC#generate_key.\n\nWed May 25 00:23:05 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_set): check the arity after\n\t  adjusting argc for an option hash, for optimization in simpler\n\t  cases.\n\nWed May 25 00:21:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (XCFLAGS): merge flags only for ruby itself from\n\t  ruby_cflags.\n\nTue May 24 22:04:15 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_cipher.c (ossl_cipher_set_key, ossl_cipher_set_iv):\n\t  Reject too long values as well as too short ones. Currently they\n\t  just truncate the input but this would hide bugs and lead to\n\t  unexpected encryption/decryption results.\n\n\t* test/openssl/test_cipher.rb: Test that Cipher#key= and #iv= reject\n\t  Strings with invalid length.\n\nTue May 24 21:32:21 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509ext.c (ossl_x509ext_set_value): Use\n\t  ASN1_OCTET_STRING_set() instead of M_ASN1_OCTET_STRING_set(). Macros\n\t  prefixed by \"M_\" are discouraged to be used from outside OpenSSL\n\t  library[1].\n\t  (ossl_x509ext_get_value): Likewise, use ASN1_STRING_print() instead\n\t  of M_ASN1_OCTET_STRING_print().\n\t  [1] https://git.openssl.org/gitweb/?p=openssl.git;a=blob;f=CHANGES;h=bf61913d7b01212b4d8b2f3c13d71d645914f67c;hb=b6079a7835f61daa9fb2cbf9addfa86049523933#l878\n\n\t* ext/openssl/ossl.h: Include openssl/asn1.h instead of\n\t  openssl/asn1_mac.h. It just includes openssl/asn1.h and defines some\n\t  additional \"M_\" macros.\n\nTue May 24 18:52:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): verify the format to\n\t  scan if no invalid chars and variable argument length matching,\n\t  at the compile time if possible.\n\nTue May 24 17:18:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/defines.h (ERRORFUNC, WARNINGFUNC): add fallback\n\t  definitions.\n\nTue May 24 16:37:43 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (ruby_cflags): separate from optflags [Bug #12409]\n\t  -fexcess-precision=standard and -fp-model precise are set to this now.\n\n\t* configure.in (cflags): use ruby_cflags.\n\nTue May 24 16:20:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (ERRORFUNC, WARNINGFUNC): __error__ and __warning__\n\t  attributes take a parenthesized string literal.\n\nTue May 24 12:35:56 2016  URABE Shyouhei  <shyouhei@ruby-lang.org>\n\n\t* common.mk: sort lines, and add missing dependencies suggested\n\t  by tool/update-deps\n\nMon May 23 21:33:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/missing.h (isfinite): move from numeric.c.\n\nMon May 23 21:09:06 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (Init_openssl): Avoid reference to unset global\n\t  variable. ossl_raise() may be called before dOSSL is set. Since\n\t  global variables default to 0 and the default value of dOSSL set in\n\t  Init_openssl() is also Qfalse, there is no real issue but confusing.\n\t  Patch by Bertram Scharpf <software@bertram-scharpf.de>\n\t  [ruby-core:58264] [Bug #9101]\n\nMon May 23 20:32:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c, ext/openssl/ossl_bn.c,\n\t  ext/openssl/ossl_cipher.c, ext/openssl/ossl_digest.c\n\t  ext/openssl/ossl_engine.c, ext/openssl/ossl_ns_spki.c\n\t  ext/openssl/ossl_pkcs12.c, ext/openssl/ossl_pkcs7.c\n\t  ext/openssl/ossl_pkey.c, ext/openssl/ossl_pkey_ec.c\n\t  ext/openssl/ossl_rand.c, ext/openssl/ossl_ssl.c\n\t  ext/openssl/ossl_x509attr.c, ext/openssl/ossl_x509cert.c\n\t  ext/openssl/ossl_x509ext.c, ext/openssl/ossl_x509store.c: Use\n\t  StringValueCStr() where NUL-terminated string is expected.\n\nMon May 23 20:20:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (isfinite): get rid of a warning on\n\t  cygwin. [Bug #12417][ruby-core:75691]\n\nMon May 23 19:41:27 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_rand.c (ossl_rand_egd, ossl_rand_egd_bytes):\n\t  RAND_egd{_bytes,}() return -1 on failure, not 0.\n\t  Patch by cremno phobia <cremno@mail.ru>\n\t  [ruby-core:63795] [Bug #10053]\n\t  (ossl_pseudo_bytes): Similar, RAND_pseudo_bytes() may return 0 or\n\t  -1 on failure.\n\nMon May 23 15:52:07 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (isfinite): isfinite does not always\n\t  exist.  fixed build error on Windows introduced at r55123.\n\nMon May 23 13:19:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args0): make compile error if the\n\t  format is wrong or does not match with the variable argument\n\t  length if possible.\n\nMon May 23 12:47:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args0): raise fatal error if\n\t  variable argument length does not match, it is a bug in the code\n\t  which uses rb_scan_args, not a runtime error.\n\nMon May 23 12:30:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (GetVpValueWithPrec): consider\n\t  non-finite float values not to raise FloatDomainError.\n\t  [ruby-core:75682] [Bug #12414]\n\nMon May 23 12:21:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* array.c (rb_ary_fill): suppress warnings: 'item' may be used\n\t  uninitialized in this function\n\nMon May 23 07:41:49 2016  Eric Wong  <e@80x24.org>\n\n\t* dir.c (dir_close): update RDoc for 2.3 #close change\n\t  [ruby-core:75679] [Bug #12413]\n\nSun May 22 20:01:21 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/timeridconv.rb: use finalizer trick instead of thread.\n\n\t* test/drb/ut_timerholder.rb: ditto.\n\nSun May 22 17:25:18 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_options.rb: adjust test class name\n\t  to match file name\n\nSun May 22 17:24:07 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* rename test/ruby/enc/test_casing_options.rb to test_case_options.rb\n\t  for consistency\n\nSun May 22 17:06:55 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* transcode.c (enc_arg, str_transcode_enc_args, econv_args):\n\t  remove volatile, and add GC guards in callers.\n\t  [ruby-core:75664] [Bug #12411]\n\nSun May 22 16:27:00 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/-test-/integer/core_ext.c: move testutil/integer.c.\n\n\t* test/lib/-test-/integer.rb: extract implementation details from\n\t  test/unit/assertions.rb.  [Bug #12408]\n\nSun May 22 14:57:43 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Extend OnigEncodingTypeDefine to define a\n\t  new encoding primitive 'case_map' for case mapping\n\n\t* enc/utf-8.c, utf_16be/le.c, utf_32be/le.c:\n\t  add onigenc_unicode_case_map as case_map primitive\n\n\t* enc/ascii.c, big5.c, cp949.c, emacs_mule.c, euc_jp/kr/tw.c, gb18030.c,\n\t  gbk.c, iso_8859_1/2/3/4/5/6/7/8/9/10/11/13/14/15/16.c, koi8_r/u.c,\n\t  shift_jis.c, us_ascii.c, windows_1250/1251/1252.c:\n\t  add onigenc_not_support_case_map as case_map primitive\n\nSun May 22 14:45:45 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.h/c: Define new function onigenc_not_support_case_map\n\nSun May 22 12:14:06 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): use original rb_scan_args\n\t  when fmt is dynamic.\n\nSun May 22 11:41:12 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* class.c (rb_scan_args): moved to bottom of the file to make the\n\t  effect of `#undef rb_scan_args` the minimum.\n\n\t* include/ruby/ruby.h (rb_scan_args): overwrite only if GCC and\n\t  optimized. Visual C++ 14 or later can compile it but make it\n\t  conservative.\n\nSat May 21 22:45:50 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): don't use ALWAYS_INLINE with\n\t  `inline`.  if gcc needs this duplication, do in ALWAYS_INLINE macro.\n\nSat May 21 21:11:56 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): use __VA_ARGS__ instead of\n\t  va_arg to allow compilers optimize more aggressive.\n\t  https://gustedt.wordpress.com/2011/07/10/avoid-writing-va_arg-functions/\n\t  rb_scan_args is now expected to be statically resolved.\n\nSun May 22 02:41:52 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/zlib/zlib.c: remove hacky macro introduced at r30437.\n\n\t* ext/zlib/zlib.c (gzfile_make_header): cast as long (instead of int).\n\n\t* ext/zlib/zlib.c (gzfile_make_footer): ditto.\n\nSat May 21 21:07:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (ALWAYS_INLINE): force compilers the function inlined.\n\nSat May 21 16:16:03 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_stop): Don't free the SSL struct\n\t  here. Since some methods such as SSLSocket#connect releases GVL,\n\t  there is a chance of use after free if we free the SSL from another\n\t  thread. SSLSocket#stop was documented as \"prepares it for another\n\t  connection\" so this is a slightly incompatible change. However when\n\t  this sentence was added (r30090, Add toplevel documentation for\n\t  OpenSSL, 2010-12-06), it didn't actually. The current behavior is\n\t  from r40304 (Correct shutdown behavior w.r.t GC., 2013-04-15).\n\t  [ruby-core:74978] [Bug #12292]\n\n\t* ext/openssl/lib/openssl/ssl.rb (sysclose): Update doc.\n\n\t* test/openssl/test_ssl.rb: Test this.\n\nSat May 21 14:41:14 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c: [DOC] Fix SSL client example. The variable name\n\t  was wrong. Patch by Andreas Tiefenthaler <at@an-ti.eu> (@pxlpnk).\n\t  [GH ruby/openssl#32]\n\nSat May 21 14:25:38 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c: rename PKey::EC#private_key? and\n\t  #public_key? to #private? and #public? for consistency with other\n\t  PKey types. Old names remain as alias.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb (test_check_key): check private? and\n\t  public? works correctly.\n\nSat May 21 12:40:36 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/lib/openssl/buffering.rb (read_nonblock, readpartial):\n\t  Remove impossible EOFError raise. Patch by Zach Anker\n\t  <zanker@squareup.com>.  [GH ruby/openssl#23]\n\nSat May 21 11:18:42 2016  Evgeni Golov  <evgeni@golov.de>\n\n\t* lib/ipaddr.rb: [DOC] fix documentation of IN6MASK to mention\n\t  IPv6.  [Fix GH-1349]\n\nSat May 21 11:12:53 2016  Dan Martinez  <dfm@razorwind.org>\n\n\t* io.c (Init_IO): [DOC] define dummy ARGF instead of ARGF.class to\n\t  re-enable the generation of ARGF documentation.  [Fix GH-1358]\n\nSat May 21 11:07:29 2016  0x01f7  <souk.0x01f7@gmail.com>\n\n\t* doc/syntax/methods.rdoc (Method Names): add proper closing tag.\n\t  [Fix GH-1356]\n\nSat May 21 09:26:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SETJMP): fix missing macro definition\n\t  for the configured result.  fix up r55021.\n\nSat May 21 00:36:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* process.c (rb_execarg_commandline): build command line string\n\t  from argument vector in rb_execarg.\n\t  [ruby-core:75611] [Bug #12398]\n\nFri May 20 23:25:42 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (ossl_pem_passwd_value): Added. Convert the\n\t  argument to String with StringValue() and validate the length is in\n\t  4..PEM_BUFSIZE. PEM_BUFSIZE is a macro defined in OpenSSL headers.\n\t  (ossl_pem_passwd_cb): When reading/writing encrypted PEM format, we\n\t  used to pass the password to PEM_def_callback() directly but it was\n\t  problematic. It is not NUL character safe. And surprisingly, it\n\t  silently truncates the password to 1024 bytes.  [GH ruby/openssl#51]\n\n\t* ext/openssl/ossl.h: Add function prototype declaration of newly\n\t  added ossl_pem_passwd_value().\n\n\t* ext/openssl/ossl_pkey.c (ossl_pkey_new_from_data): Use\n\t  ossl_pem_passwd_value() to validate the password String.\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_initialize, ossl_dsa_export):\n\t  ditto.\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_initialize,\n\t  ossl_ec_key_to_string): ditto.\n\n\t* ext/openssl/ossl_pkey_rsa.c (ossl_rsa_initialize, ossl_rsa_export):\n\t  ditto.\n\n\t* test/openssl/test_pkey_{dsa,ec,rsa}.rb: test this.\n\nFri May 20 23:45:53 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* id_table.c (list_id_table_init): When unaligned word access is\n\t  prohibited and sizeof(VALUE) is 8 (64-bit machines),\n\t  capa should always be even number for 8-byte word alignment\n\t  of the values of a table. This code assumes that sizeof(ID) is 4,\n\t  sizeof(VALUE) is 8, and xmalloc() returns 8-byte aligned memory.\n\t  This fixes bus error on 64-bit SPARC Solaris 10.\n\t  [Bug #12406][ruby-dev:49631]\n\nFri May 20 22:30:09 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* symbol.h (rb_id2sym): Use HAVE_BUILTIN___BUILTIN_CONSTANT_P\n\nFri May 20 22:19:00 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* ext/date/date_core.c: [DOC] fix typos.\n\t  [fix GH-1360] patched by @soundasleep\n\nFri May 20 21:26:58 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* include/ruby/defines.h (RB_GNUC_EXTENSION, RB_GNUC_EXTENSION_BLOCK):\n\t  macros for skipping __extension__ on non-GCC compilers.\n\t* eval_error.c (warn_print): use RB_GNUC_EXTENSION_BLOCK instead of\n\t  __extension__ because __extension__ is a GNU extension.\n\t  Fix compile error on Solaris 10 with Oracle Solaris Studio 12.x.\n\t  [Bug #12397] [ruby-dev:49629].\n\t* internal.h (rb_fstring_cstr, rb_fstring_enc_cstr): ditto\n\t* include/ruby/encoding.h (rb_enc_str_new, rb_enc_str_new_cstr): ditto\n\t* include/ruby/intern.h (rb_str_new, rb_str_new_cstr,\n\t  rb_usascii_str_new, rb_utf8_str_new, rb_tainted_str_new_cstr,\n\t  rb_usascii_str_new_cstr, rb_utf8_str_new_cstr,\n\t  rb_external_str_new_cstr, rb_locale_str_new_cstr,\n\t  rb_str_buf_new_cstr, rb_str_cat_cstr, rb_exc_new_cstr): ditto\n\nFri May 20 21:17:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/win32ole/win32ole.c (fole_missing): make substring or dup to\n\t  share the content if possible.\n\nFri May 20 19:48:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (NEW_PARTIAL_MEMO_FOR): shrink buffer array not to\n\t  mark non-VALUE fields.  fix check_rvalue_consistency abort with\n\t  RGENGC_CHECK_MODE=2.\n\n\t* internal.h (NEW_CMP_OPT_MEMO): exclude struct cmp_opt_data from\n\t  the valid array range.\n\n\t* enum.c (slicewhen_i): exclude inverted too.\n\nThu May 19 21:21:57 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* re.c (rb_reg_match_m_p): [DOC] fix return value in rdoc.\n\n\t* test/ruby/test_regexp.rb (TestRegexp#test_match_p): add some\n\t  tests from document.\n\nThu May 19 13:22:44 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (Init_openssl): register an ex_data index for\n\t  X509_STORE and X509_STORE_CTX respectively. Since they don't share\n\t  the ex_data index registry, we can't use the same index.\n\t  (ossl_verify_cb): use the the correct index.\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_verify_callback): ditto.\n\n\t* ext/openssl/ossl_x509store.c (ossl_x509store_set_vfy_cb): ditto.\n\t  (ossl_x509stctx_verify): ditto.\n\n\t* ext/openssl/ossl.h (void ossl_clear_error): add extern declarations\n\t  of ossl_store_{ctx_,}ex_verify_cb_idx.\n\n\t* ext/openssl/openssl_missing.c: remove X509_STORE_set_ex_data and\n\t  X509_STORE_get_ex_data.\n\n\t* ext/openssl/openssl_missing.h: implement X509_STORE_get_ex_data,\n\t  X509_STORE_set_ex_data and X509_STORE_get_ex_new_index as macros.\n\nThu May 19 13:11:35 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509attr.c (ossl_x509attr_set_value): check that the\n\t  argument is an OpenSSL::ASN1::Data before converting to ASN1_TYPE.\n\t  This fixes SEGV on OpenSSL::X509::Attribute#value=(non-asn1-value).\n\n\t* test/openssl/test_x509attr.rb: add tests for OpenSSL::X509::Attribute.\n\nThu May 19 12:10:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): fix match against empty string.\n\t  rb_str_offset returns the end when the position exceeds the\n\t  length.  fix the range parameter of onig_search.\n\t  [ruby-core:75604] [Bug #12394]\n\nThu May 19 11:37:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): should return false if no match, as the\n\t  document says.  [Feature #8110]\n\nThu May 19 00:17:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (reg_names_iter): specify capacify\n\nWed May 18 21:29:59 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* thread.c (recursive_list_access): a object id may be a Bignum.  so,\n\t  the list must be a objhash, instead of a identhash.\n\t  this fixes many test errors on mswin64 CI.\n\nWed May 18 19:33:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): Introduce Regexp#match?, which returns\n\t  bool and doesn't save backref.\n\nWed May 18 16:52:03 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkcs12.c (ossl_pkcs12_initialize): pop errors\n\t  leaked by PKCS12_parse(). This is a bug in OpenSSL, which exists\n\t  in the versions before the version 1.0.0t, 1.0.1p, 1.0.2d.\n\nWed May 18 16:04:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/downloader.rb (Downloader::RubyGems.download): verify gems\n\t  only if RubyGems is 2.4 or later.  old RubyGems fails to verify\n\t  almost all of bundled gems.\n\nWed May 18 14:52:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_modify_expand): check integer overflow.\n\t  [ruby-core:75592] [Bug #12390]\n\nWed May 18 13:11:44 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_ary_subseq): get subseq of match array without creating\n\t  temporary array.\n\n\t* re.c (match_ary_aref): get element(s) of match array without creating\n\t  temporary array.\n\n\t* re.c (match_aref): Use match_ary_subseq with handling irregulars.\n\n\t* re.c (match_values_at): Use match_ary_aref.\n\nWed May 18 13:03:07 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509cert.c (ossl_x509_verify): X509_verify()\n\t  family may put errors on 0 return (0 means verification failure).\n\t  Clear OpenSSL error queue before return to Ruby. Since the queue is\n\t  thread global, remaining errors in the queue can cause an unexpected\n\t  error in the next OpenSSL operation.  [ruby-core:48284] [Bug #7215]\n\n\t* ext/openssl/ossl_x509crl.c (ossl_x509crl_verify): ditto.\n\n\t* ext/openssl/ossl_x509req.c (ossl_x509req_verify): ditto.\n\n\t* ext/openssl/ossl_x509store.c (ossl_x509stctx_verify): ditto.\n\n\t* ext/openssl/ossl_pkey_dh.c (dh_generate): clear the OpenSSL error\n\t  queue before re-raising exception.\n\n\t* ext/openssl/ossl_pkey_dsa.c (dsa_generate): ditto.\n\n\t* ext/openssl/ossl_pkey_rsa.c (rsa_generate): ditto.\n\n\t* ext/openssl/ossl_ssl.c (ossl_start_ssl): ditto.\n\n\t* test/openssl: check that OpenSSL.errors is empty every time after\n\t  running a test case.\n\nWed May 18 12:07:42 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (ossl_clear_error): Extracted from\n\t  ossl_make_error(). This prints errors in the OpenSSL error queue if\n\t  OpenSSL.debug is true, and clears the queue.\n\t  (ossl_make_error): use ossl_clear_error().\n\n\t* ext/openssl/ossl.h: add prototype declaration of ossl_make_error().\n\t  (OSSL_BIO_reset) use ossl_clear_error() to clear the queue. Clearing\n\t  silently makes debugging difficult.\n\n\t* ext/openssl/ossl_engine.c (ossl_engine_s_by_id): ditto.\n\n\t* ext/openssl/ossl_ns_spki.c (ossl_spki_initialize): ditto.\n\n\t* ext/openssl/ossl_pkcs7.c (ossl_pkcs7_verify): ditto.\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_initialize): ditto.\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_initialize): ditto.\n\t  (ossl_ec_group_initialize): ditto.\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_shutdown): ditto.\n\nWed May 18 11:53:49 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_point_mul): Validate the\n\t  arguments before passing to EC_POINT(s)_mul(). Add description of this\n\t  method.  [ruby-core:65152] [Bug #10268]\n\n\t* test/openssl/test_pkey_ec.rb (test_ec_point_mul): Test that\n\t  OpenSSL::PKey::EC::Point#mul works.\n\nWed May 18 11:19:59 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_bn.c (try_convert_to_bnptr): Extracted from\n\t  GetBNPtr(). This doesn't raise exception but returns NULL on error.\n\t  (GetBNPtr): Raise TypeError if conversion fails.\n\t  (ossl_bn_eq): Implement BN#==.\n\t  (ossl_bn_eql): #eql? should not raise TypeError even if the argument\n\t  is not compatible with BN.\n\t  (ossl_bn_hash): Implement BN#hash.\n\n\t* ext/openssl/ossl_bn.c (Init_ossl_bn): Define #== and #hash.\n\n\t* test/openssl/test_bn.rb: Test BN#eql?, #== and #hash\n\nWed May 18 10:17:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_INTEGER_TYPE_P): new macro and\n\t  underlying inline function to check if the object is an\n\t  Integer (Fixnum or Bignum).\n\nWed May 18 09:52:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum, hash_sum, hash_sum_i, enum_sum_i, sum_iter):\n\t  Optimize for hashes when each method isn't redefined.\n\nWed May 18 09:14:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum, int_range_sum): Extract int_range_sum from\n\t  enum_sum.\n\nWed May 18 03:16:06 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (match_values_at): fix regression at r55036.\n\t  MatchData#values_at accepts Range.\n\nWed May 18 02:02:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_aref): remove useless condition and call rb_fix2int.\n\t  rb_reg_nth_match handles negative index.\n\nWed May 18 01:57:43 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_values_at): MatchData#values_at supports named captures\n\t  [Feature #9179]\n\n\t* re.c (namev_to_backref_number): separated.\n\nWed May 18 00:05:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): Optimize for a range from int to int.\n\n\t* test/ruby/test_enum.rb (test_range_sum): Move from test_range.rb,\n\t  and add assertions for some conditions.\n\n\t* test/ruby/test_enum.rb (test_hash_sum): Move from test_hash.rb.\n\n\t* test/ruby/test_hash.rb, test/ruby/test_range.rb: Remove test_sum.\n\nTue May 17 23:08:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): [DOC] Write documentation.\n\nTue May 17 22:53:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): Implement Enumerable#sum.\n\n\t* test/ruby/test_enum.rb (test_sum): Test sum for Enumerable.\n\n\t* test/ruby/test_hash.rb (test_sum): Test sum for Hash.\n\n\t* test/ruby/test_range.rb (test_sum): Test sum for Range.\n\nTue May 17 22:11:41 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* object.c, numeric.c, enum.c, ext/-test-/bignum/mul.c,\n\t  lib/rexml/quickpath.rb, lib/rexml/text.rb, lib/rexml/xpath_parser.rb,\n\t  lib/rubygems/specification.rb, lib/uri/generic.rb,\n\t  bootstraptest/test_eval.rb, basictest/test.rb,\n\t  test/-ext-/bignum/test_big2str.rb, test/-ext-/bignum/test_div.rb,\n\t  test/-ext-/bignum/test_mul.rb, test/-ext-/bignum/test_str2big.rb,\n\t  test/csv/test_data_converters.rb, test/date/test_date.rb,\n\t  test/json/test_json_generate.rb, test/minitest/test_minitest_mock.rb,\n\t  test/openssl/test_cipher.rb, test/rexml/test_jaxen.rb,\n\t  test/ruby/test_array.rb, test/ruby/test_basicinstructions.rb,\n\t  test/ruby/test_bignum.rb, test/ruby/test_case.rb,\n\t  test/ruby/test_class.rb, test/ruby/test_complex.rb,\n\t  test/ruby/test_enum.rb, test/ruby/test_eval.rb,\n\t  test/ruby/test_iseq.rb, test/ruby/test_literal.rb,\n\t  test/ruby/test_math.rb, test/ruby/test_module.rb,\n\t  test/ruby/test_numeric.rb, test/ruby/test_range.rb,\n\t  test/ruby/test_rational.rb, test/ruby/test_refinement.rb,\n\t  test/ruby/test_rubyvm.rb, test/ruby/test_struct.rb,\n\t  test/ruby/test_variable.rb, test/rubygems/test_gem_specification.rb,\n\t  test/thread/test_queue.rb: Use Integer instead of Fixnum and Bignum.\n\nTue May 17 15:26:10 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* [Feature #12005] Unify Fixnum and Bignum into Integer\n\n\t* include/ruby/ruby.h (rb_class_of): Return rb_cInteger for fixnums.\n\n\t* insns.def (INTEGER_REDEFINED_OP_FLAG): Unified from\n\t  FIXNUM_REDEFINED_OP_FLAG and BIGNUM_REDEFINED_OP_FLAG.\n\n\t* vm_core.h: Ditto.\n\n\t* vm_insnhelper.c (opt_eq_func): Use INTEGER_REDEFINED_OP_FLAG instead\n\t  of FIXNUM_REDEFINED_OP_FLAG.\n\n\t* vm.c (vm_redefinition_check_flag): Use rb_cInteger instead of\n\t  rb_cFixnum and rb_cBignum.\n\t  (C): Use Integer instead of Fixnum and Bignum.\n\n\t* numeric.c (fix_succ): Removed.\n\t  (Init_Numeric): Define Fixnum as Integer.\n\n\t* bignum.c (bignew): Use rb_cInteger instead of rb_cBignum.\n\t  (rb_int_coerce): replaced from rb_big_coerce and return fixnums\n\t  as-is.\n\t  (Init_Bignum): Define Bignum as Integer.\n\t  Don't define ===.\n\n\t* error.c (builtin_class_name): Return \"Integer\" for fixnums.\n\n\t* sprintf.c (ruby__sfvextra): Use rb_cInteger instead of rb_cFixnum.\n\n\t* ext/-test-/testutil: New directory to test.\n\t  Currently it provides utilities for fixnum and bignum.\n\n\t* ext/json/generator/generator.c: Define mInteger_to_json.\n\n\t* lib/mathn.rb (Fixnum#/): Redefinition removed.\n\nTue May 17 11:58:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_BUILTIN_SETJMP): declare t as NORETURN\n\t  to suppress warnings by -Wsuggest-attribute=noreturn.\n\t  [ruby-core:75510] [Bug #12383]\n\nTue May 17 10:40:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SETJMP): needs the header and proper\n\t  arguments for builtin setjmp functions.\n\nMon May 16 20:00:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.h: Additional uses of ONIG_CASE_MAPPING compilation switch\n\nMon May 16 19:46:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Introducing ONIG_CASE_MAPPING compilation\n\t  switch\n\n\t* include/ruby/oniguruma.h, enc/unicode.h: Using ONIG_CASE_MAPPING\n\t  compilation switch\n\nMon May 16 19:29:31 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update xmlrpc-0.1.1. xmlrpc-0.1.0 didn't allow\n\t  to install on 2.4.0dev.\n\nMon May 16 13:28:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (FUNC_STDCALL, FUNC_CDECL, FUNC_FASTCALL): set\n\t  macro names explicitly to the old names, which are accidentally\n\t  changed at r54985, for backward compatibilities.\n\t  fiddle also depends on these names to fallback to ANSI names.\n\t  [ruby-core:75494] [Bug #12377]\n\nMon May 16 11:39:02 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/xmlrpc.rb, lib/xmlrpc/*, test/xmlrpc: XMLRPC is bundled gem\n\t  on Ruby 2.4. It is extracted to https://github.com/ruby/xmlrpc\n\t  [Feature #12160][ruby-core:74239]\n\t* gems/bundled_gems: ditto.\n\nMon May 16 06:06:21 2016  Eric Wong  <e@80x24.org>\n\n\t* proc.c: fix RDoc of Proc#===/call/yield/[]\n\t  [Bug #12332]\n\nSun May 15 20:55:31 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/timeridconv.rb: don't use keeper thread. [Bug #12342]\n\n\t* test/drb/ut_timerholder.rb: ditto.\n\nSun May 15 16:15:25 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* array.c (rb_ary_entry): extract rb_ary_elt to organize if-conditions\n\t  and check whether is embedded at once.\n\nSun May 15 10:57:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_get_ev_const): warn deprecated constant even\n\t  in the class context.  [ruby-core:75505] [Bug #12382]\n\nSun May 15 03:13:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* iseq.h (struct iseq_compile_data): use struct rb_id_table\n\t  instead of st_table.\n\n\t* iseq.c (prepare_iseq_build): don't allocate ivar_cache_table\n\t  until it has at least one element.\n\n\t* iseq.c (compile_data_free): free ivar_cache_table only if it\n\t  is allocated.\n\n\t* compile.c (get_ivar_ic_value): allocate if the table is not\n\t  allocated yet.\n\nSat May 14 09:04:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/mkmf.rb (pkg_config): use xsystem consistently to set up\n\t  library path environment variable as well as latter pkg-config\n\t  calls.  [ruby-dev:49619] [Bug #12379]\n\nSat May 14 00:16:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (make_seed_value): append leading-zero-guard and get\n\t  rid of making a local copy of the seed.\n\nFri May 13 08:46:42 2016  cremno  <cremno@mail.ru>\n\n\t* NEWS: drop FreeBSD < 4 support.  [Fix GH-1339]\n\t  The most recent version affected by this is 3.5 and was released\n\t  in 2000.\n\t  https://www.freebsd.org/releases/3.5R/announce.html\n\t  https://en.wikipedia.org/wiki/History_of_FreeBSD#Version_history\n\nFri May 13 03:12:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/defines.h (GCC_VERSION_SINCE): moved from internal.h.\n\nFri May 13 03:11:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (__builtin_constant_p): check.\n\n\t* internal.h: Use HAVE_BUILTIN___BUILTIN_CONSTANT_P\n\nFri May 13 03:10:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: use alternative keyword\n\t  to avoid macros conflicts with them.\n\nThu May 12 01:54:08 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/mkmf.rb (try_func): get rid of conflict of declarations of\n\t  main().  checking local symbol reference does not make sense.\n\nThu May 12 00:18:19 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/Makefile.sub (HAVE_QSORT_S): use qsort_s only for Visual Studio\n\t  2012 or later, because VS2010 seems to causes a SEGV in\n\t  test/ruby/test_enum.rb.\n\nWed May 11 23:59:47 2016  Masaya Tarui  <tarui@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_getivar): describe fast-path explicit\n\t  (compiler friendly). [Bug #12274].\n\nWed May 11 21:30:07 2016  Masaya Tarui  <tarui@ruby-lang.org>\n\n\t* compile.c (iseq_compile_each): share InlineCache during same\n\t  instance variable accesses. Reducing memory consumption,\n\t  rising cache hit rate and rising branch prediction hit rate\n\t  are expected. A part of [Bug #12274].\n\n\t* iseq.h (struct iseq_compile_data): introduce instance\n\t  variable IC table for sharing.\n\n\t* iseq.c (prepare_iseq_build, compile_data_free):\n\t  construct/destruct above table.\n\nWed May 11 17:18:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* util.c (ruby_qsort): use qsort_s if available, for Microsoft\n\t  Visual Studio 2005 (msvcr80.dll) and mingw.\n\nWed May 11 10:33:26 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* COPYING: Remove trailing-whitespaces.\n\t  [ci skip][fix GH-1348]\n\nTue May 10 21:05:45 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* insns.def (defineclass): Also raise an error when redeclaring the\n\t  superclass of a class as Object and it has another superclass.\n\t  [Bug #12367] [ruby-core:75446]\n\n\t* test/ruby/test_class.rb: test for above.\n\nTue May 10 14:57:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (obj_random_bytes): base on bytes method instead of\n\t  rand method, not to call toplevel rand method.\n\nTue May 10 13:07:28 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (-fexcess-precision=standard): before r54895 -std=c99\n\t  is specified and it implied -fexcess-precision=standard.\n\t  Now with -std=gnu99, it should be explicitly specified.\n\t  https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\n\nMon May  9 10:51:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_atfork_internal): move th to an argument.\n\n\t* thread.c (rb_thread_atfork): do not repeat GET_THREAD().\n\nMon May  9 10:46:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_atfork, rb_thread_atfork_before_exec): do\n\t  nothing unless working fork is available.\n\n\t* thread_sync.c (rb_mutex_abandon_all): define only if working\n\t  fork is available.\n\n\t* thread_sync.c (rb_mutex_abandon_keeping_mutexes): ditto.\n\n\t* thread_sync.c (rb_mutex_abandon_locking_mutex): ditto.\n\n\t* thread_win32.c (gvl_init): never used.\n\nMon May  9 07:18:06 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/{defines,ruby}.h: need to define function attributes\n\t  alternatives in defines.h instead of ruby.h, because they are used\n\t  in oniguruma.h and the header used without including ruby.h at\n\t  encoding library sources.\n\nMon May  9 06:30:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/ruby.h (CONSTFUNC, PUREFUNC): fixed build errors on\n\t  non-gcc build environments introduced at r54952.\n\nMon May  9 02:51:51 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (rb_gc_unprotect_logging): throw rb_memerror when it cannot\n\t  allocate memory. This is pointed out by Facebook's Infer.\n\n\t* gc.c (gc_prof_setup_new_record): ditto.\n\n\t* regparse.c (parse_regexp): ditto.\n\n\t* util.c (MALLOC): use xmalloc and xfree like above.\n\nMon May  9 02:39:16 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: check function attribute const and pure,\n\t  and define CONSTFUNC and PUREFUNC if available.\n\t  Note that I don't add those options as default because\n\t  it still shows many false-positive (it seems not to consider\n\t  longjmp).\n\n\t* vm_eval.c (stack_check): get rb_thread_t* as an argument\n\t  to avoid duplicate call of GET_THREAD().\n\nSun May  8 21:01:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/openssl/extconf.rb: assume it doesn't have SSLv2 related\n\t  functions when OPENSSL_NO_SSL2 is defined.\n\t  Usually openssl's header and the library (libssl) have the same\n\t  set of functions, but on some environment the library has functions\n\t  whose headers doesn't declare. (openssl/opensslconf.h and libssl.so\n\t  aren't be synchronized)\n\t  To detect such case explicitly check feature macro and remove\n\t  related functions.\n\nSun May  8 18:51:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (rb_home_dir_of): return the default home path if the\n\t  user name is the current user name, on platforms where struct\n\t  pwd is not supported.  a temporary measure against\n\t  [Bug #12226].\n\nSun May  8 08:51:38 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Wsuggest-attribute=format and suppress warnings.\n\nSun May  8 08:31:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Wsuggest-attribute=noreturn and suppress warnings.\n\nSun May  8 08:19:16 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Werror=implicit-int to avoid missing type of\n\t  function declaration.\n\nSat May  7 22:22:37 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/ssl.rb: Accept string value for SSLCertName. It is used\n\t  to invoke ssl server with command line.\n\t  [fix GH-1329] Patch by @kerlin\n\t* test/webrick/test_ssl_server.rb: Added test for GH-1329\n\nSat May  7 21:55:12 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/webrick/test_ssl_server.rb: Added basic test for `webrick/ssl`\n\nSat May  7 16:22:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (int_pair_to_real_inclusive): optimize to multiply\n\t  without Bignum.\n\nSat May  7 07:58:02 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* process.c (rb_exec_getargs): honor the expected argument types\n\t  over the conversion method.  the basic language functionality\n\t  should be robust.  [ruby-core:75388] [Bug #12355]\n\nFri May  6 08:16:26 2016  David Silva  <david.silva@digital.cabinet-office.gov.uk>\n\n\t* enum.c (enum_find): [DOC] add more examples to the documentation\n\t  of Enumerable#detect, to show that it equals to Enumerable#find.\n\t  [Fix GH-1340]\n\nThu May  5 18:08:31 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* test/ruby/test_complexrational.rb: Remove duplicated raise.\n\nThu May  5 14:41:05 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* string.c (rb_str_sub): Fix a special match variable name.\n\t  [ci skip]\n\nThu May  5 12:22:17 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_eval_cmd, rb_catch_obj): use TH_JUMP_TAG with the\n\t  same rb_thread_t used for TH_PUSH_TAG, instead of JUMP_TAG with\n\t  the current thread global variable.\n\nThu May  5 10:49:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (fill_random_bytes_syscall): use arc4random_buf if\n\t  available.\n\nWed May  4 23:13:58 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* numeric.c (fix_plus): Remove rb_nucomp_add prototype\n\t  declaration.\n\n\t* numeric.c (fix_mul): Remove rb_nucomp_mul prototype\n\t  declaration.\n\n\t* internal.h (rb_nucomp_add, rb_nucomp_mul): add prototype\n\t  declarations.\n\nWed May  4 18:38:00 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* lib/net/http/header.rb (Net::HTTPHeader#{each_header,each_name,\n\t  each_capitalized_name,each_value,each_capitalized}): Return\n\t  sized enumerators.\n\n\t* test/net/http/test_httpheader.rb: add test for above.\n\nWed May  4 17:53:15 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* lib/set.rb (Set#{delete_if,keep_if,collect!,reject!,select!,classify,divide},\n\t  SortedSet#{delete_if,keep_if}): Return sized enumerators.\n\n\t* test/test_set.rb: add test for above.\n\nTue May  3 23:25:48 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* numeric.c: [DOC] Update result of 123456789 ** -2.\n\t  [ruby-dev:49606] [Bug #12339]\n\nTue May  3 23:13:16 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* internal.h (RCOMPLEX_SET_IMAG): undef RCOMPLEX_SET_IMAG\n\t  instead of duplicated undef RCOMPLEX_SET_REAL.\n\nTue May  3 22:55:07 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* complex.c (rb_complex_set_imag): Fix to properly set imag\n\t  of complex.\n\nTue May  3 22:19:55 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (warnflags): use -std=gnu99 instead of\n\t  -std=iso9899:1999. [Feature #12336]\n\nTue May  3 22:10:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (count_utf8_lead_bytes_with_word): Use __builtin_popcount\n\t  only if it can use SSE 4.2 POPCNT whose latency is 3 cycle.\n\n\t* internal.h (rb_popcount64): use __builtin_popcountll because now\n\t  it is in fast path.\n\nTue May  3 14:19:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (new_if_gen): set newline flag to NODE_IF to trace all\n\t  if/elsif statements.  [ruby-core:67720] [Bug #10763]\n\nTue May  3 05:35:54 2016  Eric Wong  <e@80x24.org>\n\n\t* process.c (disable_child_handler_fork_child):\n\t  initialize handler for SIGPIPE for !POSIX_SIGNAL\n\nMon May  2 23:03:42 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c, include/ruby/win32.h (rb_w32_utruncate): implements new\n\t  truncate alternative which accepts UTF-8 path.\n\n\t* file.c (truncate): use above function.\n\t  [Bug #12340]\n\nMon May  2 20:59:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (str_coderange): to avoid function call when the string already\n\t  has coderange information.\n\n\t* re.c (rb_reg_prepare_enc): add shortcut path when the regexp has\n\t  the same encoding of given string.\n\n\t* re.c (rb_reg_prepare_re): avoid duplicated allocation of\n\t  onig_errmsg_buffer.\n\n\nMon May  2 12:34:52 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_refinement.rb (test_inspect): Use Integer instead of\n\t  Fixnum.\n\nMon May  2 06:58:38 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* complex.c: Don't refer rb_cFixnum and rb_cBignum.\n\t  (k_fixnum_p): Use FIXNUM_P.\n\t  (k_bignum_p): Use RB_TYPE_P.\n\nMon May  2 01:27:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_numeric.rb (test_step): Use Integer::FIXNUM_MAX.\n\nMon May  2 01:15:01 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_module.rb (test_name): Use Integer instead of Fixnum.\n\nMon May  2 01:00:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/test/unit/assertions.rb (assert_fixnum): Defined.\n\t  (assert_bignum): Defined.\n\n\t* test/ruby/test_bignum.rb: Use assert_bignum.\n\n\t* test/ruby/test_integer_comb.rb: Use assert_fixnum and assert_bignum.\n\n\t* test/ruby/test_optimization.rb: Ditto.\n\nMon May  2 00:41:53 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* vm_trace.c (recalc_remove_ruby_vm_event_flags): Add a cast to\n\t  avoid signed integer overflow.\n\nMon May  2 00:06:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/envutil.rb: Define Integer::{FIXNUM_MIN,FIXNUM_MAX}.\n\n\t* test/ruby/test_bignum.rb: Use Integer::{FIXNUM_MIN,FIXNUM_MAX}.\n\n\t* test/ruby/test_bignum.rb: Ditto.\n\n\t* test/ruby/test_integer_comb.rb: Ditto.\n\n\t* test/ruby/test_marshal.rb: Ditto.\n\n\t* test/ruby/test_optimization.rb: Ditto.\n\nSun May  1 23:59:59 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* array.c (rb_ary_sum): fix for mathn\n\n\t* test/ruby/test_array.rb (test_sum): ditto.\n\nSun May  1 23:51:54 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Options#non_options): fixed wrong regexp.\n\t  if both positives and negatives were specified, positives had to\n\t  be specified from the beginning.\n\nSun May  1 21:00:07 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c: drop Win2K support.\n\nSun May  1 20:39:47 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* cont.c, hash.c, random.c, win32/win32.c: cleanup some Win9x/ME/NT4\n\t  support leftovers.\n\t  [fix GH-1328] patched by @cremno\n\nSun May  1 07:30:44 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (search_nonascii): use nlz on big endian environments.\n\n\t* internal.h (nlz_intptr): defined.\n\nSun May  1 00:03:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (__builtin_ctz): check.\n\n\t* configure.in (__builtin_ctzll): check.\n\n\t* internal.h (rb_popcount32): defined for ntz_int32.\n\t  it can use __builtin_popcount but this function is not used on\n\t  GCC environment because it uses __builtin_ctz.\n\t  When another function uses this, using __builtin_popcount\n\t  should be re-considered.\n\n\t* internal.h (rb_popcount64): ditto.\n\n\t* internal.h (ntz_int32): defined for ntz_intptr.\n\n\t* internal.h (ntz_int64): defined for ntz_intptr.\n\n\t* internal.h (ntz_intptr): defined as ntz for uintptr_t.\n\n\t* string.c (search_nonascii): unroll and use ntz.\n\nSat Apr 30 21:54:13 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (Init_Numeric): Gather Fixnum method definitions.\n\nSat Apr 30 21:28:14 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_div): Define Integer#/.\n\n\t* bignum.c (rb_big_div): Don't define Bignum#/.\n\n\t* lib/mathn.rb (Integer#/): Replace Integer#/ instead of Bignum#/.\n\nSat Apr 30 21:11:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_plus): Define Integer#+.\n\n\t* bignum.c (rb_big_plus): Don't define Bignum#+.\n\nSat Apr 30 21:01:20 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_minus): Define Integer#-.\n\n\t* bignum.c (rb_big_minus): Don't define Bignum#-.\n\nSat Apr 30 20:53:33 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_mul): Define Integer#*.\n\n\t* bignum.c (rb_big_mul): Don't define Bignum#*.\n\nSat Apr 30 20:30:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_modulo): Define Integer#%.\n\n\t* bignum.c (rb_big_modulo): Don't define Bignum#%.\n\nSat Apr 30 20:17:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_equal): Define Integer#==.\n\n\t* bignum.c (rb_big_eq): Don't define Bignum#==.\n\nSat Apr 30 19:41:15 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_gt): Define Integer#>.\n\n\t* bignum.c (rb_big_gt): Don't define Bignum#>.\n\t  Renamed from big_gt.\n\n\t* internal.h (rb_big_gt): Declared.\n\nSat Apr 30 19:24:40 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_ge): Define Integer#>=.\n\n\t* bignum.c (rb_big_ge): Don't define Bignum#>=.\n\t  Renamed from big_ge.\n\n\t* internal.h (rb_big_ge): Declared.\n\nSat Apr 30 19:20:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/standard_library.rdoc: Remove obsoleted classes and modules.\n\nSat Apr 30 19:09:23 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_lt): Define Integer#<.\n\n\t* bignum.c (rb_big_lt): Don't define Bignum#<.\n\t  Renamed from big_lt.\n\n\t* internal.h (rb_big_lt): Declared.\n\nSat Apr 30 18:44:05 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_le): Define Integer#<=.\n\n\t* bignum.c (rb_big_le): Don't define Bignum#<=.\n\t  Renamed from big_le.\n\n\t* internal.h (rb_big_le): Declared.\n\nSat Apr 30 18:11:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* bignum.c (Init_Bignum): Define Integer::GMP_VERSION.\n\nSat Apr 30 16:58:18 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_remainder): Define Integer#remainder.\n\n\t* bignum.c (rb_big_remainder): Don't define Bignum#remainder.\n\n\t* internal.h (rb_big_remainder): Declared.\n\nSat Apr 30 15:29:24 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_uminus): {Fixnum,Bignum}#-@ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_uminus): Don't define Bignum#-@.\n\nSat Apr 30 14:42:20 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_idiv): {Fixnum,Bignum}#div is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_idiv): Don't define Bignum#div.\n\nSat Apr 30 14:25:55 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_modulo): {Fixnum,Bignum}#modulo is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_modulo): Don't define Bignum#modulo.\n\nSat Apr 30 14:04:30 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_divmod): {Fixnum,Bignum}#divmod is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_divmod): Don't define Bignum#divmod.\n\nSat Apr 30 13:20:00 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_fdiv): {Fixnum,Bignum}#fdiv is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_fdiv): Don't define Bignum#fdiv.\n\nSat Apr 30 12:25:43 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_pow): {Fixnum,Bignum}#** is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_pow): Don't define Bignum#**.\n\nSat Apr 30 12:28:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* bignum.c (rb_big_comp): Renamed from rb_big_neg.\n\n\t* numeric.c (fix_comp): Renamed from fix_rev.\n\nSat Apr 30 12:25:43 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_comp): {Fixnum,Bignum}#~ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_neg): Don't define Bignum#~.\n\n\t* internal.h (rb_big_neg): Declared.\n\nSat Apr 30 12:07:42 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_and): {Fixnum,Bignum}#& is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_and): Don't define Bignum#&.\n\nSat Apr 30 11:56:15 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/thread: removed dummy extension library.  thread_sync.c\n\t  provides \"thread.rb\" already.\n\nSat Apr 30 11:53:48 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_or): {Fixnum,Bignum}#| is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_or): Don't define Bignum#|.\n\nSat Apr 30 11:18:47 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* vm_trace.c: Fix typos. [ci skip]\n\nSat Apr 30 10:09:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/pty/pty.c (establishShell): honor USER environment variable\n\t  and login name over uid, one uid can be shared by some login\n\t  names.\n\nFri Apr 29 22:40:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/maintainers.rdoc (ext/io/nonblock): still maintained, as\n\t  well as ext/io/wait, which is the origin.\n\nFri Apr 29 21:18:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* doc/maintainers.rdoc (ext/win32): of course, it's still maintained.\n\nFri Apr 29 21:03:10 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update latest gems, test-unit-3.1.8 and rake-11.1.2.\n\nFri Apr 29 20:43:02 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Update latest maintainers list on Ruby 2.4\n\nFri Apr 29 19:52:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Removed deprecated entries. These are already deleted.\n\nFri Apr 29 19:48:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Removed Ruby 1.8 entries. It's not necessary to\n\t  Ruby 2.4 or later.\n\nThu Apr 28 17:03:17 2016  Nicholas Maccharoli  <nmaccharoli@gmail.com>\n\n\t* hash.c (rb_hash_update_{block,func}_callback): dry up hash\n\t  update callback code.  [Fix GH-1338]\n\nThu Apr 28 16:52:05 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_prepare_enc): use rb_enc_asciicompat(enc) instead of\n\t  rb_enc_str_asciicompat_p(str) to avoid useless rb_enc_get(str) call.\n\nThu Apr 28 16:33:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb: [DOC] fix example code.  base on the code by\n\t  Semyon Gaivoronskiy in [ruby-core:75224].  [Bug #12323]\n\nThu Apr 28 09:33:03 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.4.\n\t  Please see entries of 2.6.4 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nThu Apr 28 04:49:07 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in (rb_cv_lgamma_r_pm0): check if lgamma_r(+0.0)\n\t  returns positive infinity, in addition to lgamma_r(-0.0).\n\t  AIX returns an incorrect result of negative infinity.\n\n\t* math.c (ruby_lgamma_r): handle +0.0, in addition to -0.0.\n\nThu Apr 28 01:11:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c: define _DEFAULT_SOURCE because glibc 2.20 deprecates\n\t  _BSD_SOURCE.\n\t  https://sourceware.org/glibc/wiki/Release/2.20\n\nThu Apr 28 00:27:55 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_xor): {Fixnum,Bignum}#^ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_xor): Don't define Bignum#^.\n\nWed Apr 27 20:53:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_aref): {Fixnum,Bignum}#[] is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_aref): Don't define Bignum#<<.\n\n\t* internal.h (rb_big_aref): Declared.\n\nWed Apr 27 16:10:35 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/instruction.rb: fix to follow current implementation.\n\nWed Apr 27 15:47:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/stringio/stringio.c (strio_s_new): warn if a block is given,\n\t  as well as IO.new.\n\nWed Apr 27 14:29:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (ruby_only_for_internal_use): raise fatal error when\n\t  deprecated function only for internal use is called, not just a\n\t  warning.\n\nTue Apr 26 23:42:30 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb (rel): should not raise exceptions even if\n\t  the user input is wrong.  only reports the error and continue process.\n\nTue Apr 26 23:35:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (process_options): convert -e script to the encoding\n\t  given by a command line option on Windows.  assume it is the\n\t  expected encoding.  [ruby-dev:49461] [Bug #11900]\n\nTue Apr 26 21:11:02 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_lshift): {Fixnum,Bignum}#<< is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_lshift): Don't define Bignum#<<.\n\nTue Apr 26 20:59:40 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_rshift): {Fixnum,Bignum}#>> is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_rshift): Don't define Bignum#>>.\n\nTue Apr 26 20:46:16 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_size): {Fixnum,Bignum}#size is unified into Integer.\n\n\t* bignum.c (rb_big_size_m): Don't define Bignum#size.\n\n\t* internal.h (rb_big_size_m): Declared.\n\nTue Apr 26 20:09:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_bit_length): {Fixnum,Bignum}#bit_length is\n\t  unified into Integer.\n\n\t* bignum.c (rb_big_bit_length): Don't define Bignum#bit_length.\n\n\t* internal.h (rb_big_bit_length): Declared.\n\nTue Apr 26 19:56:16 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_abs): Integer#{abs,magnitude} moved from\n\t  Fixnum and Bignum.\n\n\t* bignum.c (rb_big_abs): Don't define Bignum#{abs,magnitude}.\n\n\t* internal.h (rb_big_abs): Declared.\n\nMon Apr 25 14:39:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/rbconfig/sizeof/extconf.rb: just check the existence of each\n\t  types, to reduce configuration time, especially cross-compiling.\n\n\t* template/sizes.c.tmpl: calculate sizes of checked types at\n\t  compilation time.\n\nMon Apr 25 11:27:27 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* doc/extension.rdoc: Improvements to english grammars.\n\t  [Bug #12246][ruby-core:74792][ci skip]\n\nMon Apr 25 11:17:50 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* encoding.c: Fix return value of `Encoding::ISO8859_1.name`\n\t  [Bug #12313][ruby-core:75147][ci skip]\n\t* ext/bigdecimal/bigdecimal.c: Fix code sample of `BigDecimal.new`\n\nSun Apr 24 23:29:16 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in: add missing -lm for AIX.\n\nSun Apr 24 18:33:58 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* vm_insnhelper.c (INLINE): disable r54738 if __NO_INLINE__ is defined.\n\t  It caused \"undefined reference to `vm_getivar'\".\n\nSun Apr 24 09:32:12 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* test/ruby/test_array.rb: Add test cases for Array#sum with\n\t  non-numeric objects.\n\nSun Apr 24 04:21:27 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* vm_insnhelper.c (INLINE): define as `inline` when it is optimized.\n\t  define as `static inline` when it is not optimized to keep\n\t  the symbol generated.\n\n\t* vm_insnhelper.c (vm_getivar): use `INLINE` to force inline\n\t  so that a compiler inlines it into vm_getinstancevariable\n\t  and optimizes out is_attr and related branches.\n\n\t* vm_insnhelper.c (vm_getivar): use `inline` to recommend inline.\n\t  Without this vm1_ivar_set is degraded.\n\n\t  benchmark results:\n\t  minimum results in each 5 measurements.\n\t  Execution time (sec)\n\t  name    ruby 2.4.0dev (2016-04-23 trunk 54727) [x86_64-linux]   ruby 2.4.0dev (2016-04-23 trunk 54733) [x86_64-linux]       built-ruby\n\t  loop_whileloop 0.641                                                   0.642 0.646\n\t  vm1_ivar* 1.002                                                   0.999 0.831\n\t  vm1_ivar_set* 0.369                                                   1.106 0.362\n\n\t  Speedup ratio: compare with the result of `ruby 2.4.0dev (2016-04-23\n\t  trunk 54727) [x86_64-linux]' (greater is better)\n\t  name    ruby 2.4.0dev (2016-04-23 trunk 54733) [x86_64-linux]\n\t  built-ruby\n\t  loop_whileloop\n\t  0.998        0.991\n\t  vm1_ivar*\n\t  1.003        1.205\n\t  vm1_ivar_set*\n\t  0.334        1.018\n\nSat Apr 23 18:01:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_getivar): specify inline instead of static inline.\n\t  vm_getivar is called by vm_call_ivar and vm_getinstancevariable.\n\t  At least with GCC 4.8 and 5.3 on Linux, they are inlining it into\n\t  vm_call_ivar but not vm_getinstancevariable.\n\t  By `inline`, they correctly inline it and gains performance.\n\n\t  Speedup ratio: compare with the result of `ruby 2.4.0dev (2016-04-23\n\t  trunk 54727) [x86_64-linux]' (greater is better)\n\t  name    built-ruby\n\t  loop_whileloop       1.001\n\t  vm1_ivar*            1.189\n\t  vm1_ivar_set*        1.024\n\n\t  Note the `inline`'s meaning is different between old GCC\n\t  and C99. Old GCC's inline means C99's extern inline.\n\t  https://gcc.gnu.org/onlinedocs/gcc/Inline.html\n\t  Since Ruby specify -std=iso9899:1999, it works like C99.\n\nSat Apr 23 16:11:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_mul_size_overflow): use UNLIKELY\n\t  by user side to improve generality.\n\nSat Apr 23 16:10:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_LIKELY): use prefix in ruby.h.\n\n\t* intern.h (LIKELY): define with RB_LIKELY.\n\nSat Apr 23 13:27:25 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* NEWS: Add descriptions for Time#to_time updates.\n\t  [Bug #12271]\n\nSat Apr 23 13:21:24 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* NEWS: Add descriptions for DateTime#to_time updates.\n\t  [Bug #12189]\n\nSat Apr 23 11:21:27 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* ext/date/date_core.c (Init_date_core): [DOC] Convert DateTime\n\t  documentation to RDoc from Markdown.\n\t  [ruby-core:75136] [Bug #12311]\n\nSat Apr 23 09:03:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c: cygwin does not use w32_cmdvector, command line can be\n\t  other than UTF-8.  [ruby-dev:49519] [Bug #12184]\n\nSat Apr 23 01:00:03 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in: don't use the system-provided round(3) on AIX.\n\t  In AIX, round(0.49999999999999994) returns 1.0.\n\t  Use round() in numeric.c instead.\n\nFri Apr 22 21:00:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_time_tz.rb: Tests depends on Europe/Moscow removed\n\t  to avoid test failures due to the tzdata change.\n\t  https://github.com/eggert/tz/commit/8ee11a301cf173afb0c76e0315b9f9ec8ebb9d95\n\t  Found by naruse.\n\nFri Apr 22 20:18:40 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_mul_size_overflow): added to handle\n\t  mul overflow efficiently.\n\n\t* include/ruby/ruby.h (rb_alloc_tmp_buffer2): use rb_mul_size_overflow\n\t  and avoid division where it can define DSIZE_T.\n\n\t* gc.c (xmalloc2_size): moved from ruby.h and use rb_mul_size_overflow.\n\nFri Apr 22 20:34:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* time.c (time_asctime): [DOC] add ctime example, not only\n\t  asctime.  [ruby-core:75126] [Bug #12310]\n\nFri Apr 22 18:44:32 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* variable.c: use uint32_t instead of long to avoid confusion about\n\t  the type of ivtbl->numiv.\n\nFri Apr 22 15:09:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval_jump.c (exec_end_procs_chain): restore previous error info\n\t  for each end procs.  [ruby-core:75038] [Bug #12302]\n\nFri Apr 22 15:04:56 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: the fullpath of merger.rb is too long to\n\t  copy&paste on Windows.  show shorter name instead on the platform.\n\t  I'm sure that the user of this command on Windows is only me.\n\nFri Apr 22 14:52:04 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/merger.rb: remove temporary file.\n\nFri Apr 22 11:27:03 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http.rb: Improve documentation for SSL requests via GET method.\n\t  [fix GH-1325][ci skip] Patch by @jsyeo\n\nFri Apr 22 10:51:13 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/ssl.rb: Support to add SSLCiphers option.\n\t  [fix GH-1321] Patch by @rhadoo\n\nFri Apr 22 10:43:19 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* file.c, win32/file.c: Removed obsoleted safe level checks.\n\t  [fix GH-1327] Patch by @cremno\n\nFri Apr 22 10:01:48 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* benchmark/bm_so_meteor_contest.rb: fix a typo.\n\t  [fix GH-1330][ci skip] Patch by @sachin21\n\nFri Apr 22 04:57:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (rb_alloc_tmp_buffer_with_count): added like xmalloc2 to\n\t  avoid duplicated check of size.\n\n\t* gc.c (ruby_xmalloc2): added to keep separate layers.\n\n\t* include/ruby/ruby.h (rb_alloc_tmp_buffer2): added to check\n\t  the size more statically.\n\nFri Apr 22 04:54:40 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (LIKELY): moved from internal.h.\n\n\t* include/ruby/ruby.h (UNLIKELY): ditto.\n\nThu Apr 21 01:44:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (objspace_malloc_prepare): remove size check because it is\n\t  used by objspace_xmalloc and objspace_xcalloc.\n\t  objspace_xmalloc introduces its own check in this commit.\n\t  objspace_xcalloc checks with xmalloc2_size (ruby_xmalloc2_size).\n\n\t* gc.c (objspace_xmalloc0): common xmalloc function.\n\n\t* gc.c (objspace_xmalloc): introduce its own size check.\n\n\t* gc.c (objspace_xmalloc2): separated from ruby_xmalloc2 to clarify\n\t  the layer who has the responsibility to check the size.\n\n\t* gc.c (objspace_xrealloc): remove duplicated size check.\n\n\t* gc.c (ruby_xmalloc2): use objspace_xmalloc2.\n\n\t* include/ruby/ruby.h (ruby_xmalloc2_size): follow the size limit\n\t  as SSIZE_MAX. Note that ISO C says size_t is unsigned integer.\n\nThu Apr 21 12:14:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: check if succeeded in creating config.h.\n\n\t* tool/ifchange: ignore failures when TEST_COLORS unmatched. just\n\t  use the default value if expected name is not contained in it.\n\t  [ruby-core:75046] [Bug #12303]\n\nWed Apr 20 17:33:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/cgi/escape/escape.c (cgiesc_unescape): define unescape\n\t  method instead of _unescape, and should pass the optional\n\t  argument to the super method.\n\n\t* lib/cgi/util.rb (CGI::Util#_unescape): remove intermediate\n\t  method.\n\nWed Apr 20 15:52:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (syntax_error_initialize): move the default message,\n\t  \"compile error\", from parse.y.  the default parameter should\n\t  belong to the class definition.\n\n\t* parse.y (yycompile0): use the default parameter.\n\nWed Apr 20 10:25:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (append_compile_error): use rb_syntax_error_append.\n\n\t* error.c (rb_syntax_error_append): append messages into a\n\t  SyntaxError exception instance.\n\n\t* parse.y (yycompile0): make new SyntaxError instance in main\n\t  mode, otherwise error_buffer should be a SyntaxError if error\n\t  has occurred.\n\nTue Apr 19 17:42:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (err_vcatf): rename, and separate appending message from\n\t  creating a string buffer.\n\n\t* error.c (rb_syntax_error_append): merge rb_error_vsprintf and\n\t  rb_compile_err_append.\n\n\t* parse.y (parser_compile_error): use rb_syntax_error_append.\n\nTue Apr 19 13:46:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (append_compile_error, compile_bug): pass iseq and get\n\t  error info and file from it, not by the thread error info.\n\n\t* error.c (rb_report_bug_valist): take va_list instead of variadic\n\t  arguments, and just report the bug but not abort.\n\nTue Apr 19 13:18:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/time.rb: revert r54167 because it would break\n\t  backward compatibilities, and it is documented that\n\t  Time.parse does not take into account time zone\n\t  abbreations other than ones described in RFC 822\n\nTue Apr 19 13:12:03 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ChangeLog: Fix dates of previous commits\n\nTue Apr 19 12:45:03 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ChangeLog: Add descriptions for logger updates\n\t* NEWS: Add descriptions for logger updates\n\nTue Apr 19 12:45:02 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Add shift_period_suffix option\n\nTue Apr 19 12:45:01 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Allow specifying logger parameters in constructor\n\t  such as level, progname, datetime_format, formatter.\n\nMon Apr 18 16:07:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_peephole_optimize): should not replace the\n\t  current target INSN, not to follow the replaced dangling link in\n\t  the caller.  [ruby-core:74993] [Bug #11816]\n\nMon Apr 18 12:56:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flo_truncate): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (int_truncate): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\nSun Apr 17 04:18:56 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: revisions are strings.\n\nSat Apr 16 14:26:49 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* ext/date/date_core.c : remove not used f_getlocal macro.\n\t  After r54553 f_getlocal macro is not used.\n\nSat Apr 16 14:15:24 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* ext/date/date_core.c : remove not used f_utc6 macro.\n\t  After r54169 f_utc6 macro is not used.\n\nSat Apr 16 10:00:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* struct.c (struct_make_members_list, rb_struct_s_def): member\n\t  names should be unique. [ruby-core:74971] [Bug #12291]\n\n\t* struct.c (struct_make_members_list): extract making member name\n\t  list from char* va_list, with creating symbols without\n\t  intermediate IDs.\n\nSat Apr 16 01:33:27 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: sort revisions.\n\nSat Apr 16 01:16:02 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Don't yield same element twice.\n\t  Found by nagachika.\n\nSat Apr 16 01:03:32 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Fix SEGV by [1/2r, 1].sum.\n\nFri Apr 15 23:52:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* rational.c (rb_rational_plus): rename from rb_rational_add\n\t  to be aligned with rb_fix_plus.\n\n\t* array.c (rb_ary_sum): ditto.\n\n\t* internal.h: ditto.\n\nFri Apr 15 23:42:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* rational.c (rb_rational_add): rename from nurat_add.\n\n\t* array.c (rb_ary_sum): use rb_rational_add directly.\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for an array of\n\t  Rational values.\n\nFri Apr 15 22:31:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* array.c (rb_ary_sum): apply the precision compensated algorithm\n\t  for an array in which Rational and Float values are mixed.\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for the above\n\t  change.\n\nFri Apr 15 22:30:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_setname): defer setting native thread name\n\t  set in initialize until the native thread is created.\n\t  [ruby-core:74963] [Bug #12290]\n\nFri Apr 15 20:27:16 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/irb/ext/save-history.rb: Fix NoMethodError when method is not defined.\n\nFri Apr 15 15:38:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* common.mk (benchmark): order options for built-ruby and compare-ruby.\n\nFri Apr 15 14:14:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for Rational and\n\t  Complex numbers.\n\nFri Apr 15 10:07:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/console/console.c (console_key_pressed_p): raise the same\n\t  exception, \"unknown virtual key code\", for names with nul chars.\n\t  though console_win32_vk() considers the length and can deal with\n\t  nul chars, rb_sprintf() raised at PRIsVALUE previously, so quote\n\t  it if it is unprintable.\n\nFri Apr 15 09:02:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/console/console.c (rb_sym2str): fallback definition for\n\t  older ruby.  [ruby-core:74953] [Bug #12284]\n\nThu Apr 14 21:46:36 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Support the optional argument, init, and\n\t  block.\n\nThu Apr 14 19:02:41 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/irb/ext/save-history.rb: suppress warning: method redefined;\n\t  discarding old save_history=.\n\nThu Apr 14 14:58:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/tk/tkutil/tkutil.c (tk_hash_kv): the third argument can be\n\t  nil not only an Array.  reported by @windwiny at\n\t  https://github.com/ruby/ruby/commit/cdaa94e#commitcomment-17096618\n\nThu Apr 14 14:28:55 2016  cremno phobia  <cremno@mail.ru>\n\n\t* cont.c (fiber_initialize_machine_stack_context): fix wrong\n\t  _MSC_VER check, should be decimal but not hexadecimal.\n\t  [ruby-core:74936] [Bug #12279]\n\nWed Apr 13 22:51:38 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Array#sum is implemented.\n\t  Kahan's compensated summation algorithm for precise sum of float\n\t  numbers is moved from ary_inject_op in enum.c.\n\n\t* enum.c (ary_inject_op): Don't specialize for float numbers.\n\n\t  [ruby-core:74569] [Feature #12217] proposed by mrkn.\n\nWed Apr 13 15:56:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flo_ceil): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (flo_floor): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (int_ceil): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\n\t* numeric.c (int_floor): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\nWed Apr 13 14:47:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (Init_File): add alias File.empty? to File.zero?.\n\t  [Feature #9969]\n\nWed Apr 13 14:36:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (assign_in_cond): allow multiple assignment in\n\t  conditional expression.  [Feature #10617]\n\nWed Apr 13 14:11:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* bignum.c (rb_big_size): add wrapper function of BIGSIZE and\n\t  rename the method function with _m suffix.\n\n\t* numeric.c (int_round_zero_p): extracted from rb_int_round.\n\t  optimize for Bignum, and convert VALUE returned by Numeric#size\n\t  to long.\n\nWed Apr 13 12:00:08 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* test/ruby/test_basicinstructions.rb: add a test to check access\n\t  instance variables on special const objects.\n\n\t  All of such objects are frozen, so that we can not set instance\n\t  variables for them. But we can read instance variables and return\n\t  default value (nil).\n\nTue Apr 12 20:40:35 2016  Kaneko Yuichiro  <spiketeika@gmail.com>\n\n\t* ext/date/date_core.c (time_to_time): should preserve timezone\n\t  info.  [ruby-core:74889] [Bug #12271]\n\nTue Apr 12 11:51:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (new_label_body): initialize bit fields, since\n\t  compile_data_alloc does not clear the memory.  [Bug #12082]\n\nMon Apr 11 20:18:43 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* vm_backtrace.c (frame2klass): filter only for imemo_ment.\n\t  T_IMEMO/imemo_iseq can be passed here.\n\nMon Apr 11 17:43:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_optimize): disable tail call optimization in\n\t  rescued, rescue, and ensure blocks.\n\t  [ruby-core:73871] [Bug #12082]\n\nMon Apr 11 06:54:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (apply2files): apply to a VALUE vector instead of a\n\t  temporary array.\n\nSun Apr 10 20:54:16 2016  Joe Swatosh  <joe.swatosh@gmail.com>\n\n\t* ext/win32/lib/win32/registry.rb (DeleteValue, DeleteKey): fix\n\t  API names.  [ruby-core:74863] [Bug #12264]\n\nSun Apr 10 17:47:42 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (rb_realpath_internal): no argument conversions since\n\t  this internal function does not need to_path and encoding\n\t  conversions, not to be affected by the default internal\n\t  encoding.\n\nSat Apr  9 10:03:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* load.c (rb_f_load): raise with the original path name before\n\t  encoding conversion.\n\nSat Apr  9 02:05:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* bignum.c (rb_cstr_parse_inum): [EXPERIMENTAL] new function to\n\t  parse integer in C-string with length.  the name and the\n\t  arguments may be changed in the future.\n\n\t* bignum.c (rb_str_to_inum): preserve encoding of the argument in\n\t  error messages, and no longer needs to copy non-terminated\n\t  strings.\n\n\t* bignum.c (rb_str2big_{poweroftwo,normal,karatsuba,gmp}): ditto.\n\nThu Apr  7 19:04:03 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/regexp.rdoc (comments): [DOC] terminators cannot appear in\n\t  comments.  [ruby-core:74838] [Bug #12256]\n\nThu Apr  7 11:24:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/tk/tkutil/tkutil.c (cbsubst_initialize): fix out-of-bound\n\t  access when no arguments given.  `p Tk::Event.new` crashed.\n\nFri Apr  1 01:26:00 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* ext/coverage/coverage.c: Fully reset coverage to not persist global state.\n\t  It was returning old file coverages as empty arrays to the user.\n\t  [ruby-core:74596] [Bug #12220]\n\n\t* ext/coverage/coverage.c (rb_coverages): remove unused static state.\n\n\t* thread.c: Moved and renamed coverage_clear_result_i to reset_coverage_i.\n\n\t* test/coverage/test_coverage.rb: improve precision of tests.\n\nWed Apr  6 22:41:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (rb_cv_lgamma_r_m0): fix the condition for\n\t  lgamma_r(-0.0).  [Bug #12249]\n\nWed Apr  6 17:38:42 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/downloader.rb (RubyGems.download): follow the change of the\n\t  rubygems ssl_certs directory tree introduced by previous commit.\n\nWed Apr  6 15:00:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.3.\n\t  Please see entries of 2.6.3 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nWed Apr  6 14:13:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (rb_cv_lgamma_r_m0): check if lgamma_r(-0.0)\n\t  returns negative infinity.  [Bug #12249]\n\n\t* math.c (ruby_lgamma_r): define by the configured result.\n\nWed Apr  6 10:56:15 2016  Anton Davydov  <antondavydov.o@gmail.com>\n\n\t* lib/logger.rb (Logger#level=): remove unnecessary local\n\t  variable.\n\n\t* lib/logger.rb (Logger#initialize, Logger#reopen): [DOC] mention\n\t  the default values.  cherrypicked from [GH-1319].\n\nWed Apr  6 10:17:53 2016  cremno phobia  <cremno@mail.ru>\n\n\t* math.c (ruby_lgamma_r): missing/lgamma_r.c is used on Windows,\n\t  since msvcrt does not provide it.\n\n\t* missing/lgamma_r.c (lgamma_r): fix lgamma(-0.0).\n\t  [ruby-core:74823] [Bug #12249]\n\nWed Apr  6 01:22:55 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* math.c (ruby_lgamma_r): mswin's lgamma_r also seems to be wrong.\n\t  cf. [Bug #12249]\n\nWed Apr  6 00:53:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* math.c (ruby_lgamma_r): fix lgamma(-0.0) on mingw and OSX.\n\n\t* math.c (ruby_tgamma): fix tgamma(-0.0) on mingw.\n\t  [ruby-core:74817] [Bug #12249]\n\nTue Apr  5 14:50:28 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c (mime_putc): fix typo.\n\t  [Bug #12202] [ruby-core:74802]\n\nTue Apr  5 00:06:44 2016  Aeris  <aeris@imirhil.fr>\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_tmp_key): Access to ephemeral\n\t  TLS session key in case of forward secrecy cipher.  Only\n\t  available since OpenSSL 1.0.2.  [Fix GH-1318]\n\n\t* ext/openssl/extconf.rb: Check for SSL_get_server_tmp_key.\n\nMon Apr  4 23:37:05 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_core.h (rb_vm_struct): make at_exit a single linked list but\n\t  not RArray, not to mark the registered functions by the write\n\t  barrier.  based on the patches by Evan Phoenix.\n\t  [ruby-core:73908] [Bug #12095]\n\nMon Apr  4 17:43:45 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: change default value of\n\t  RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO 0.3 -> 0.2\n\t  RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO 0.8 -> 0.65\n\n\t  These values are same as Ruby 2.0.0.\n\n\t  This change cause GC counts.\n\t  However, generational GC reduced each (minor) GC time and\n\t  increase memory locality. So that not so big impact on my\n\t  benchmarking results.\n\t  (surprisingly, this fix speed up programs on some cases)\n\n\t  You can change these values by environment variables\n\t  if you feel wrong.\n\nMon Apr  4 17:36:52 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (get_envparam_double): take an upper_bound.\n\n\t  And also take an accept_zero flag which allow to accept zero\n\t  even if lower_bound is set.\n\n\t* gc.c (ruby_gc_set_params): fix parameters.\n\n\t  RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO set 0.9 as *lower_bound*, so that\n\t  it should be upper_bound.\n\t  Set RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO as lower bound.\n\n\t  Also set lower/upper bound of RUBY_GC_HEAP_FREE_SLOTS_GOAL_RATIO to\n\t  RUBY_GC_HEAP_FREE_SLOTS_MIN/MAX_RATIO.\n\nMon Apr  4 16:41:32 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* vm.c (Init_VM): should pass tokens.\n\nSun Apr  3 09:34:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flodivmod): round division if it is a finite number\n\t  and module is required.\n\n\t* numeric.c (dbl2ival): do not round here.\n\n\t* numeric.c (flo_ceil): use dbl2ival.\n\n\t* numeric.c (flo_round): round explicitly.\n\nSat Apr  2 15:24:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/intern.h (rb_check_arity): returns argc.\n\nFri Apr  1 20:58:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Data generation to implement\n\t  swapcase functionality for titlecase characters. Swapcase isn't defined\n\t  by Unicode, because the purpose/usage of swapcase is unclear anyway.\n\t  The implementation follows a proposal from Nobu, swapping the case of\n\t  each component of a titlecase character individually.\n\t  This means that the titlecase characters have to be decomposed.\n\n\t* enc/unicode.c: Code using the above data.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for the above.\n\nFri Apr  1 14:55:28 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* configure.in (AC_CONFIG_FILES): $srcdir/.git can be a file pointing\n\t  the real git_dir, such as when the git working tree is a \"linked\n\t  working tree\" (a working tree created by git-worktree). So use\n\t  git-rev-parse --git-dir to check if $srcdir is the top-level of a git\n\t  repository, not just checking if the $srcdir/.git directory does exist\n\t  or not.  [ruby-core:74759] [Bug #12239]\n\n\t* tool/change_maker.rb: use tool/vcs.rb to detect VCS. This used to have\n\t  its own VCS detection code, while we have tool/vcs.rb.\n\n\t* tool/vcs.rb (detect): remove code duplication\n\nFri Apr  1 04:50:44 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_s_alloc):\n\t  enable SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER by default\n\t  [Bug #12126]\n\nFri Apr  1 01:13:55 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* thread.c (update_coverage): Do not track coverage in loaded files\n\t  after Coverage.result. Avoids out-of-bounds access. [Bug #12237]\n\n\t* ext/coverage/coverage.c (coverage_clear_result_i): document.\n\nThu Mar 31 19:16:16 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: need to set initial value of GC_HEAP_FREE_SLOTS_GOAL_RATIO.\n\nThu Mar 31 17:50:27 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: change additional allocation policy.\n\n\t  Introduce new environment variable\n\t  RUBY_GC_HEAP_FREE_SLOTS_GOAL_RATIO (goal_ratio) to calculate the\n\t  ratio of additional memory.\n\n\t  Before this change, we add pages with the following formula\n\t  (when free_slots < total_pages * RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO):\n\t    next_pages = total_pages * RUBY_GC_HEAP_GROWTH_FACTOR\n\n\t  This addition can allocate too much.\n\n\t  With this change, we increase pages to satisfy the following formula:\n\t    next_free_slots = next_total_slots * goal_ratio\n\t  where\n\t    next_free_slots = free_slots + adding_slots\n\t    next_total_slots = total_slots + adding_slots.\n\n\t  If you want to prepare many free slots, increase this ratio.\n\n\t  If this variable is 0, then simply multiply\n\t  RUBY_GC_HEAP_GROWTH_FACTOR.\n\n\t* gc.c (get_envparam_double): enable to accept 0.\n\nThu Mar 31 17:48:25 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_marks_finish): fix syntax error.\n\nThu Mar 31 16:49:36 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: simplify allocate/free detecting logic at the end of marking.\n\n\t  Before this change, heap_pages_min_slots are calculated at the\n\t  beginning sweeping phase. And this value is used at the end of\n\t  *next* marking phase.\n\n\t  To simplify it, we use this value at the end of this marking phase.\n\t  It means that we don't need to store this value as global state.\n\n\t  Also heap_pages_max_slots is calculated at the begging of sweeping\n\t  phase and used at the end of sweeping phase.\n\t  To simplify this logic, we introduced new global value\n\t  heap_pages_freeable_pages it means extra pages count we can free.\n\t  gc_sweep_step() checks this value and moves empty pages to tomb_heap\n\t  not more than this value.\n\n\t  Because of this fix, heap_pages_swept_slots is no longer needed.\n\n\t* gc.c (rb_objspace_t::heap_pages): restruct the objspace global\n\t  status.\n\n\t  remove the following fields\n\t    * swept_slots (and heap_pages_swept_slots)\n\t    * min_free_slots (and heap_pages_min_free_slots)\n\t    * max_free_slots (and heap_pages_max_free_slots)\n\t  And add the following filed.\n\t    * freeable_pages (and heap_pages_freeable_pages)\n\n\t* gc.c (heap_pages_free_unused_pages): unlink tomb heap pages\n\t  because tomb heap should have only freeable pages.\n\n\t* gc.c (heap_extend_pages): add parameters for future extension.\n\nThu Mar 31 16:43:02 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: add GC parameters to configure the following values:\n\t  * RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO:\n\t    allocate additional pages when free slots is lower than\n\t    the value (total_slots * (this ratio)).\n\t  * RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO:\n\t    allow to free pages when free slots is greater than\n\t    the value (total_slots * (this ratio)).\n\n\t  Before this change, these values are hard coded.\n\n\t* gc.c (ruby_gc_params_t): ditto.\n\n\t* gc.c (ruby_gc_set_params): ditto.\n\nThu Mar 31 15:59:17 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_verify_heap_page): check the number of zombies.\n\n\t* gc.c (gc_verify_heap_pages): check also tomb heap.\n\nThu Mar 31 15:48:18 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_page_sweep): return free slots count.\n\n\t* gc.c (gc_sweep_step): use returned free slots count.\n\n\t* gc.c (gc_sweep_step): change variable name `next'\n\t  to `next_sweep_page'.\n\nThu Mar 31 11:33:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (d_lite_strftime, dt_lite_strftime): [DOC]\n\t  fix indent not to be a big sole verbatim.\n\nThu Mar 31 11:18:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (Init_date_core): [DOC] fix misplaced doc\n\t  of DateTime.  [ruby-core:74729] [Bug #12233]\n\nThu Mar 31 03:41:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c: Merge upstream 69f7e74dde.\n\t  fix indent.\n\nWed Mar 30 16:33:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* extension.rdoc, extension.ja.rdoc: [DOC] Fix some errors.\n\t  Renamed files, wrong method names or argument types; the example\n\t  GetDBM macro is now updated to the current version of the actual\n\t  code.  patch by Marcus Stollsteimer in [ruby-core:74690].\n\t  [Bug #12228]\n\nWed Mar 30 09:46:01 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/open-uri.rb: Use `userinfo` for authenticated proxy.\n\t  [fix GH-1148] Patch by @SokichiFujita\n\t* test/open-uri/test_open-uri.rb: ditto.\n\t  [fix GH-1309] Patch by @jdamick\n\nWed Mar 30 01:56:06 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c: Merge upstream 4f3edf80a0.\n\t  patched by Anton Sivakov [Bug #12201] [Bug #12202]\n\nWed Mar 30 01:54:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: add given revision to current changesets\n\t  on associating the revision to the related ticket.\n\nWed Mar 30 01:53:17 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/merger.rb: update revision.h before merge.\n\nTue Mar 29 19:33:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* addr2line.c: define toupper for its use. fix r54391.\n\nTue Mar 29 19:23:46 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_isupper, rb_islower, rb_isalpha, rb_isdigit,\n\t  rb_isalnum, rb_isxdigit, rb_isblank, rb_isspace, rb_isblank,\n\t  rb_iscntrl, rb_isprint, rb_ispunct, rb_isgraph,\n\t  rb_tolower, rb_toupper): use inline function to avoid function call.\n\n\t* include/ruby/ruby.h (rb_isascii): use inline function to clarify\n\t  the logic.\n\nTue Mar 29 18:56:55 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb (backport): show merger.rb's path.\n\n\t* tool/redmine-backporter.rb (show): show current issue again if no\n\t  ticket number is given.\n\n\t* tool/redmine-backporter.rb (rel): show error message if current\n\t  bugs.ruby-lang.org doesn't support the API.\n\nTue Mar 29 18:54:34 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/merger.rb: support to backport header as backport identifier.\n\t  Now you can specify by 'merge revision(s) 49254: [Backport #10738]'.\n\nTue Mar 29 16:53:44 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Tweaked handling of 6\n\t  special cases in CaseUnfold_11_Table.\n\n\t* enc/unicode.c: Adjustments for above.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for the above: Some tests in\n\t  test_titlecase activated; test_greek added. A test in test_cherokee fixed.\n\nTue Mar 29 13:31:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Cleaned up some comments.\n\nTue Mar 29 13:24:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Removing data for idempotent\n\t  titlecasing.\n\n\t* enc/unicode.c: Adjust code to data removal.\n\nTue Mar 29 12:45:18 2016  Laurent Arnoud  <laurent@spkdev.net>\n\n\t* lib/webrick/httpresponse.rb: Move error_body to method. It allow to\n\t  override the body more easily. [fix GH-1307]\n\t* test/webrick/test_httpresponse.rb: ditto.\n\nTue Mar 29 06:40:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (rb_compile_err_append): rb_thread_t::base_block is no\n\t  longer used.\n\n\t* iseq.c (rb_iseq_compile_with_option): ditto, no protection is\n\t  needed.\n\nTue Mar 29 06:39:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (struct parser_params): move parse_in_eval flag from\n\t  rb_thread_t.\n\n\t* parse.y (rb_parser_set_context): set parsing context, not only\n\t  mild error flag.\n\n\t* iseq.c (rb_iseq_compile_with_option): the parser now refers no\n\t  thread local states to be restored.\n\n\t* vm_eval.c (eval_string_with_cref): ditto.\n\nMon Mar 28 21:24:02 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* numeric.c (int_pos_p): fix typos.\n\nMon Mar 28 14:54:49 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Refactoring in preparation for data reduction for\n\t  titlecase.\n\nMon Mar 28 14:36:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Minor refactoring for I WITH DOT ABOVE.\n\nMon Mar 28 14:26:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Removed code now covered by data from table.\n\nMon Mar 28 11:49:21 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Adding comments. [ci skip]\n\nMon Mar 28 11:30:23 2016  Shinichi Maeshima  <netwillnet@gmail.com>\n\n\t* lib/rubygems.rb: Fix `Gem.find_spec_for_exe` picks oldest gem.\n\t  https://github.com/travis-ci/travis-ci/issues/5798\n\t  https://github.com/rubygems/rubygems/pull/1566\n\t* test/rubygems/test_gem.rb: ditto.\n\nMon Mar 28 11:26:31 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.2.\n\t  Please see entries of 2.6.2 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nMon Mar 28 11:02:31 2016  Hiroshi Shirosaki  <h.shirosaki@gmail.com>\n\n\t* lib/rubygems/test_case.rb: Fix test on Windows for inconsistent temp path.\n\t  https://github.com/rubygems/rubygems/pull/1554\n\t  [Bug #12193][ruby-core:74431]\n\nMon Mar 28 08:19:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): refactor floating point format of\n\t  Rational by using generic Integer functions.\n\n\t* sprintf.c (rb_str_format): fix buffer overflow, length must be\n\t  greater than precision.  reported by William Bowling <will AT\n\t  wbowling.info>.\n\nSun Mar 27 12:13:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): convert Rational to floating point\n\t  format by using generic Integer functions, not by methods which\n\t  can be overwritten.\n\nSat Mar 26 10:55:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (rb_int2str): conversion function to String for\n\t  generic Integer.\n\n\t* numeric.c (rb_int_round): rounding function for generic\n\t  Integers.\n\n\t* numeric.c (rb_int_{uminus,plus,minus,mul,idiv,modulo}): basic\n\t  arithmetic functions for generic Integers.\n\n\t* numeric.c (FIXNUM_{POSITIVE,NEGATIVE,ZERO}_P): predict macros\n\t  only for Fixnum.\n\nSat Mar 26 06:34:24 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* localeinit.c (rb_locale_charmap_index): fix prototype.\n\t  patched by Andreas Schwab [Bug #12218]\n\nFri Mar 25 16:40:48 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Additional tests title case;\n\t  some not yet activated.\n\nFri Mar 25 13:38:11 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: check SSL_CTX_set_next_proto_select_cb\n\t  function rather than OPENSSL_NPN_NEGOTIATED macro. it exists\n\t  even if it is disabled by OpenSSL configuration.\n\t  [ruby-core:74384] [Bug #12182]\n\n\t* ext/openssl/ossl_ssl.c: update #ifdef(s) as above.\n\n\t* test/openssl/test_ssl.rb: skip NPN tests if NPN is disabled.\n\nFri Mar 25 11:08:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/uri/http.rb (URI::HTTP#initialize): [DOC] fix example,\n\t  missing mandatory arguments.  [ruby-core:74540] [Bug #12215]\n\nFri Mar 25 01:50:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* thread_pthread.c (reserve_stack): fix reserving position where\n\t  the stack growing bottom to top. [Bug #12118]\n\nFri Mar 25 01:10:42 2016  Sebastian Schuberth  <sschuberth@gmail.com>\n\n\t* lib/mkmf.rb (find_executable0): On Windows, it is actually valid\n\t  to surround individual PATH directory entries with double\n\t  quotes. Remove these before joining the path as otherwise the\n\t  literal quotes would become part of the path, resulting in the\n\t  executable not to be found.  [Fix GH-1305]\n\nThu Mar 24 22:38:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (FMT, FMTV): remove recursive-assignments to get rid\n\t  of undefined behavior.  [ruby-core:74532] [Bug #12213]\n\nThu Mar 24 17:44:02 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (FMT_PADDING): extract format for padding.\n\n\t* strftime.c (FMT_PRECISION): extract precision formula.\n\n\t* strftime.c (FMTV): append formatted string to expand the result.\n\nThu Mar 24 14:20:21 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (STRFTIME): deal with case conversion flags for\n\t  recursive formats.\n\nThu Mar 24 12:43:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (dt_lite_iso8601): strftimev() always\n\t  returns a String, so append them directly.\n\n\t* ext/date/date_core.c (d_lite_jisx0301, iso8601_timediv),\n\t  (dt_lite_jisx0301): format by the format string in local buffer\n\t  to prevent intermediate strings from GC.\n\n\t* ext/date/date_core.c (mk_inspect_raw, mk_inspect): inspect by\n\t  \"%+\"PRIsVALUE, to prevent intermediate strings from GC.\n\nThu Mar 24 11:43:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (rb_strftime_with_timespec): remove unnecessary\n\t  check, as `s` equals to `endp` when recursed STRFTIME resized\n\t  the capacity same as the size.\n\nWed Mar 23 21:48:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (ary_inject_op): put subtract operation out of if-clause.\n\nWed Mar 23 21:38:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (ary_inject_op): Use Kahan's compensated summation algorithm\n\t  for summing up float values.\n\nWed Mar 23 20:56:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (rb_strftime_with_timespec): append formatted results\n\t  to the given string with expanding, and also deal with NUL chars.\n\n\t* strftime.c (rb_strftime, rb_strftime_timespec): return formatted\n\t  string, not the length put in the given buffer.\n\n\t* time.c (rb_strftime_alloc): no longer needs to retry with\n\t  reallocating buffers.\n\n\t* time.c (time_strftime): no longer needs to split by NUL chars.\n\nWed Mar 23 14:23:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/rdoc/ri/driver.rb (interactive): rescue NotFoundError raised in\n\t  expand_name. (display_name rescues NotFoundError by itself,\n\t  the original logic looks buggy...)\n\nWed Mar 23 11:44:53 2016  cremno  <cremno@mail.ru>\n\n\t* marshal.c (r_long): cast to `signed char`, which is used\n\t  already, instead of SIGN_EXTEND_CHAR.\n\n\t* parse.y: SIGN_EXTEND_CHAR is no longer used.  [Fix GH-1302]\n\nWed Mar 23 11:38:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cygwin/GNUmakefile.in (MSYS2_ARG_CONV_EXCL_PARAM):\n\t  * add missing parentheses and remove double quotes.\n\t  * rename to get rid of recursive references.\n\t  * as --excludes-dir option is for a path name, its argument\n\t    should be converted.\n\t  [ruby-dev:49526] [Bug #12199]\n\nWed Mar 23 10:39:38 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* variable.c: Added documentation about order of `Module#constants`\n\t  [ci skip][Bug #12121][ruby-dev:49505][fix GH-1301]\n\nTue Mar 22 21:08:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Additional flag for characters that are titlecase.\n\n\t* enc/unicode/case-folding.rb, casefold.h: Using above flag in data.\n\n\t* enc/unicode.c: Marking capitalized character as unmodified if it is\n\t  already titlecase.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above functionality.\n\nTue Mar 22 14:18:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (lambda_body, parser_yylex): warn mismatched indentation\n\t  of lambda block.\n\nTue Mar 22 11:36:49 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (wmul): wrong condition.\n\t  fixed many test failures on 32bit and LLP64 platforms.\n\nTue Mar 22 10:31:34 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (wdiv, wmod): wdivmod0() assumes the 3rd and the 4th arguments\n\t  are valid pointers.\n\t  maybe checking them in wdivmod0() is better manner, but I guess that\n\t  passing real dummy pointers may be faster than checking and branching\n\t  in wdivmod0().\n\t  this commit fixes SEGV on 32bit and LLP64 platforms.\n\nTue Mar 22 10:24:04 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (divmodv): void function never returns any value.\n\nTue Mar 22 10:11:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Test::Unit::StatusLine#failed): print\n\t  failed messages only if replacing mode, otherwise defer them\n\t  until the end, to get rid of interleaving failures with progress\n\t  messages.  refix r54195.\n\nTue Mar 22 03:45:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (MUL_OVERFLOW_FIXWV_P): defined for FIXWV.\n\n\t* time.c (wmul): use MUL_OVERFLOW_FIXWV_P and only switch.\n\n\t* time.c (wmul): use mul which has Fixnum optimization.\n\n\t* time.c (rb_time_magnify): If WIDEVALUE_IS_WIDER, wmul() has the same\n\t  optimized logic, else mul() has also the similar logic for Fixnum.\n\n\t* time.c (rb_time_unmagnify): almost ditto.\n\nTue Mar 22 03:10:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (divmodv): add the case both arguments are Fixnum.\n\n\t* time.c (wquo): use quo which has Fixnum optimization.\n\n\t* time.c (wdivmod0): added for WIDEVALUE_IS_WIDER.\n\n\t* time.c (wdivmod): use wdivmod0 and divmodv.\n\t  divmodv has Fixnum optimization.\n\n\t* time.c (wdiv): use wdivmod0 and div to avoid the use of divmodv which\n\t  calls id_quo whose return value is array.\n\n\t* time.c (wmod): use wdivmod0 and mod to avoid the use of divmodv which\n\t  calls id_quo whose return value is array.\n\nMon Mar 21 22:32:50 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* internal.h (rb_fix_divmod_fix): like r54213, use FIX2NUM only if\n\t  x == FIXNUM_MIN && y == -1. This must be a rare case and it is\n\t  expected compiler to handle well.\n\nMon Mar 21 22:15:11 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (mod): Add Fixnum case.\n\n\t* time.c (quo): c can be Fixnum except a == FIXNUM_MIN && b == -1.\n\t  Such case can be optimized out because quo()'s argument is constant.\n\nMon Mar 21 22:09:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (rb_fix_mul_fix): multiply converted values, not\n\t  object VALUEs.\n\nMon Mar 21 20:18:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* common.mk (TEST_EXCLUDES, EXCLUDE_TESTFRAMEWORK): use full spell\n\t  long option.\n\n\t* cygwin/GNUmakefile.in (MSYS2_ARG_CONV_EXCL): suppress path name\n\t  conversions by msys2.  [ruby-dev:49525] [Bug #12199]\n\nMon Mar 21 19:09:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (enc_succ_alnum_char): try to skip an invalid character\n\t  gap between GREEK CAPITAL RHO and SIGMA.\n\t  [ruby-core:74478] [Bug #12204]\n\nMon Mar 21 18:55:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* node.c (rb_gc_mark_node): NODE_MATCH2 can have nd_args, u3,\n\t  since r54100.\n\nSun Mar 20 21:17:13 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* internal.h (rb_int128t2big): declare only when HAVE_INT128_T.\n\t  fixed a compile error with VC++ introduced at r54203.\n\nSun Mar 20 20:10:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* internal.h (DLONG): defined if long is 32bit (and LONG_LONG is 64bit;\n\t  but LONG_LONG is always defined as 64bit), or there's int128_t.\n\n\t* internal.h (DL2NUM): defined if DLONG is defined.\n\n\t* internal.h (rb_fix_mul_fix): defined for `Fixnum * Fixnum`.\n\n\t* insns.def (opt_mul): use rb_fix_mul_fix().\n\n\t* numeric.c (fix_mul): ditto.\n\n\t* time.c (mul): ditto.\n\nSun Mar 20 18:53:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (fix_gt, fix_ge, fix_lt, fix_le): optimize comparisons\n\t  Fixnum against Bignum by rb_big_cmp in inversed order without\n\t  new Bignum instance.\n\nSun Mar 20 18:44:52 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (add): remove FIXABLE() which is in LONG2NUM().\n\n\t* time.c (sub): ditto.\n\n\t* time.c (mul): ditto.\n\nSun Mar 20 04:46:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* bignum.c (rb_big_cmp): reduce the code.\n\n\t* bignum.c (rb_big_eq): If normalized bignum is still bignum,\n\t  it must be larger than fixnum.\n\nSat Mar 20 00:58:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* include/ruby/intern.h (rb_big_odd_p, rb_big_even_p): move to\n\t  internal.h so that they are exported only for ruby itself.\n\n\t* internal.h (rb_big_odd_p, rb_big_even_p): ditto.\n\nSat Mar 19 21:56:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Test::Unit::StatusLine#failed): defer\n\t  failed messages until the end in verbose mode, to get rid of\n\t  interleaving failures with progress messages.\n\nSat Mar 19 21:53:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (fix_cmp): invert the result as the comparison is\n\t  inverted.\n\nSat Mar 19 18:32:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_f): raise NotImplementedError when a receiver\n\t  class is unknown.\n\n\t* test/-ext-/integer/test_my_integer.rb (test_my_integer_to_f): modify\n\t  a test for the above change.\n\nSat Mar 19 18:21:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#<=>): remove it because they are unified with\n\t  Integer#<=>.\n\n\t* numeric.c (Integer#<=>, Fixnum#<=>): move <=> method from Fixnum to\n\t  Integer.\n\n\t* numeric.c (int_cmp): add this method for Integer#<=>.\n\n\t* test/-ext-/integer/test_my_integer.rb (test_my_integer_cmp): add a\n\t  test to examine Integer#<=> for unknown subclasses.\n\nSat Mar 19 14:46:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_compile_with_option): make the parser in mild\n\t  error.\n\n\t* load.c (rb_load_internal0): ditto.\n\n\t* parse.y (yycompile0): return the error message within the error\n\t  to be raised.  [Feature #11951]\n\n\t* parse.y (parser_compile_error): accumulate error messages in the\n\t  error_buffer.\n\nSat Mar 19 03:57:13 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (LOCALTIME): organize #ifdefs.\n\n\t* time.c (GMTIME): define only ifndef HAVE_STRUCT_TM_TM_GMTOFF.\n\nSat Mar 19 03:53:31 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (rb_cv_member_struct_tm_tm_gmtoff): For Linux (glibc)\n\t  define _BSD_SOURCE for time.h to define struct tm.tm_gmtoff.\n\n\t* time.c: define _BSD_SOURCE at the top.\n\nSat Mar 19 03:00:50 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/time/test_new.rb (test_timespec_new): change a gmtoff\n\t  test to a better one that does not depend on whether the current\n\t  time is in summer time or not.\n\nFri Mar 19 00:00:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_to_f, Bignum#to_f): removed them because they are\n\t  unified with int_to_f and Integer#to_f.\n\n\t* numeric.c (int_to_f): treat Bignum values directly.\n\nFri Mar 18 23:41:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_f, fix_to_f): rename fix_to_f to int_to_f, and add\n\t  treatment for subclasses which don't have definitions of to_f method.\n\n\t* numeric.c (Integer#to_f, Fixnum#to_f): move to_f method from Fixnum\n\t  to Integer.\n\n\t* ext/-test-/integer/my_integer.c: define helper class for testing\n\t  to_f method for a subclass of Integer.\n\n\t* ext/-test-/integer/extconf.rb: ditto.\n\n\t* ext/-test-/integer/init.c: ditto.\n\n\t* test/-ext-/integer/test_my_integer.rb: examine to_f method for a\n\t  subclass of Integer.\n\nFri Mar 18 22:32:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* include/ruby/intern.h (rb_big_hash): Move to internal.h.\n\n\t* internal.h: ditto.\n\nFri Mar 18 22:10:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#eql?): remove its definition because it is unified\n\t  with Numeric#eql?.\n\n\t* numeric.c (num_eql): treat Bignum values directly.\n\nFri Mar 18 21:57:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_to_s, Bignum#to_s): remove its definition because\n\t  it is unified with Integer#to_s.\n\n\t* numeric.c (int_to_s): treat Bignum values directly.\n\nFri Mar 18 21:30:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_s): Move from fix_to_s.\n\n\t* numeric.c (Integer#to_s): Move from Fixnum#to_s.\n\nFri Mar 18 16:22:24 2016  Victor Nawothnig  <Victor.Nawothnig@gmail.com>\n\n\t* parse.y (parse_numvar): NTH_REF must be less than a half of\n\t  INT_MAX, as it is left-shifted to be ORed with back-ref flag.\n\t  [ruby-core:74444] [Bug#12192] [Fix GH-1296]\n\nFri Mar 18 12:25:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* gc.c (tick): fix missing close parenthesis.  [Fix GH-1291]\n\nFri Mar 18 10:24:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ext/date/date_core.c (datetime_to_time): preserve timezone info\n\t  [Bug #12189] [Fix GH-1295]\n\nFri Mar 18 10:17:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_hash): make it public function to be available in\n\t  other source files, and remove documentation comment for Bignum#hash.\n\n\t* bignum.c (Bignum#hash): remove its definition because it is unified\n\t  with Object#hash.\n\n\t* include/ruby/intern.h (rb_big_hash): add a prototype declaration.\n\n\t* hash.c (any_hash): treat Bignum values directly.\n\nFri Mar 18 02:35:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/time.rb (parse, strptime): Fix Time.parse/strptime does not\n\t  have compatibility with DateTime.parse/strptime in terms of parsing\n\t  timezone [Bug #12190] [Fix GH-1297]\n\nFri Mar 18 02:17:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (fix_zero_p, fix_even_p, fix_odd_p): remove needless\n\t  functions.\n\nFri Mar 18 02:15:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_even_p): treat Fixnum and Bignum values directly.\n\nFri Mar 18 02:07:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#even?, Bignum#odd?): remove definitions\n\t  because they are unified with Integer#even? and Integer#odd?.\n\n\t* numeric.c (Fixnum#zero?, Fixnum#even?, Fixnum#odd?): remove\n\t  definitions because they are unified with Numeric#zero?,\n\t  Integer#even?, and Integer#odd?.\n\n\t* numeric.c (num_zero_p, int_odd_p): treat Fixnum and\n\t  Bignum values directly.\n\n\t* test/ruby/test_integer.rb (test_odd_p_even_p): remove meaningless\n\t  test case.\n\nFri Mar 18 01:51:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_even_p, rb_big_odd_p): make them public functions\n\t  to be available in other source files.\n\n\t* include/ruby/intern.h (rb_big_even_p, rb_big_odd_p): add prototype\n\t  declarations.\n\nFri Mar 18 00:25:56 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (ary_inject_op): Implement the specialized code for sum of\n\t  float numbers.\n\nFri Mar 18 00:15:05 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* numeric.c (num_step): use rb_equal for zero check. rb_num_coerce_cmp\n\t  created an object which caused extra overhead.\n\nThu Mar 17 22:21:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_GC_GUARD_PTR): remove intermediate\n\t  macro, and expand for each RB_GC_GUARD.  [Fix GH-1293]\n\nThu Mar 17 22:08:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_specialized_instruction): move specialization\n\t  for opt_newarray_max/min from translation phase.\n\nThu Mar 17 21:52:09 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c, enum.c: make rdoc format consistent.\n\nThu Mar 17 21:47:57 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* NEWS: add Array#max, #min, and the optimization.  [Feature #12172]\n\nThu Mar 17 21:45:02 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* compile.c (NODE_CALL): add optimization shortcut for Array#max/min.\n\t  Now `[x, y].max` is optimized so that a temporal array object is not\n\t  created in some condition.  [Feature #12172]\n\n\t* insns.def (opt_newarray_max, opt_newarray_min): added.\n\nThu Mar 17 21:35:52 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): implement Array#max and min with\n\t  arguments.  replace super call with rb_nmin_run.\n\n\t* enum.c (nmin_run): exported (as rb_nmin_run).\n\n\t* internal.h: added a prototype for rb_nmin_run.\n\nThu Mar 17 21:24:52 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): implement a block by itself instead\n\t  of delegating Enumerable#max/min.\n\nThu Mar 17 21:09:34 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): Array#max and Array#min added.\n\t  [Feature #12172]\n\n\t* internal.h (OPTIMIZED_CMP): moved from enum.c so that array.c can\n\t  use it.\n\n\t* test/ruby/test_array.rb (test_max, test_min): tests for Array#max\n\t  and Array#min.\n\n\t* test/ruby/test_enum.rb (test_max, test_min): revised a bit to test\n\t  Enumerable#max and #min explicitly.\n\nThu Mar 17 21:02:42 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* internal.c: struct cmp_opt_data added for refactoring out a data\n\t  structure for CMP_OPTIMIZABLE\n\n\t* array.c (struct ary_sort_data): use struct cmp_opt_data.\n\n\t* enum.c (struct min_t, max_t, min_max_t): use struct cmp_opt_data.\n\nThu Mar 17 20:55:21 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (ary_inject_op): Extracted from enum_inject.\n\nThu Mar 17 18:39:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for sum of\n\t  integers including Bignums.\n\n\t* internal.h (rb_fix_plus): Declared to be usable from enum_inject.\n\n\t* numeric.c (rb_fix_plus): Defined.\n\nThu Mar 17 17:20:28 2016  Anton Davydov  <antondavydov.o@gmail.com>\n\n\t* thread_sync.c: [DOC] Update documentation for Queue class\n\t  description.  [Fix GH-1292]\n\nThu Mar 17 17:14:51 2016  Dinar Valeev  <dvaleev@suse.com>\n\n\t* gc.c (tick): Use __builtin_ppc_get_timebase for POWER arch.\n\t  [Fix GH-1291]\n\nThu Mar 17 11:51:48 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/securerandom.rb (gen_random): to avoid blocking on Windows.\n\t  On Windows OpenSSL RAND_bytes (underlying implementation is\n\t  RAND_poll in crypto/rand/rand_win.c) may be blocked at\n\t  NetStatisticsGet.\n\t  https://wiki.openssl.org/index.php/Random_Numbers#Windows_Issues\n\t  Instead of this, use Random.raw_seed directly (whose implementation\n\t  CryptGenRandom is one of the source of\n\t  entropy of RAND_poll on Windows).\n\t  https://wiki.openssl.org/index.php/Random_Numbers\n\t  Note: CryptGenRandom function is PRNG and doesn't check its entropy,\n\t  so it won't block. [Bug #12139]\n\t  https://msdn.microsoft.com/ja-jp/library/windows/desktop/aa379942.aspx\n\t  https://tools.ietf.org/html/rfc4086#section-7.1.3\n\t  https://eprint.iacr.org/2007/419.pdf\n\t  http://www.cs.huji.ac.il/~dolev/pubs/thesis/msc-thesis-leo.pdf\n\nThu Mar 17 12:09:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed two macro definitions.\n\t* test/ruby/enc/test_case_mapping.rb: Test cases that detected\n\t  the above bugs.\n\nThu Mar 17 11:36:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (inspect_tcpi_msec): more accurate condition\n\t  for TCPI msec member inspection function.\n\t  [ruby-core:74388] [Bug #12185]\n\nThu Mar 17 08:13:43 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/time/test_new.rb (test_timespec_new): Time#gmtoff values\n\t  are the same only when both or neither of the Time objects are in\n\t  summer time (daylight-saving time).\n\nThu Mar 17 07:17:36 2016  Eric Hodel  <drbrain@segment7.net>\n\n\t* marshal.c (r_object0):  raise ArgumentError when linking to undefined\n\t  object.\n\nThu Mar 17 00:45:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/ruby/test_bignum.rb: Make sure to use Bignum values in the tests.\n\nWed Mar 16 23:10:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* defs/keywords (alias, undef): symbol literals are allowed.\n\n\t* parse.y (parse_percent): should parse symbol literals for alias\n\t  and undef.  [ruby-dev:47681] [Bug #8851]\n\nWed Mar 16 21:39:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* enc/trans/JIS: update Unicode's notice. [Bug #11844]\n\nWed Mar 16 20:03:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* proc.c (proc_binding): proc from symbol can not make a binding.\n\t  [ruby-core:74100] [Bug #12137]\n\nWed Mar 16 18:42:45 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Fixed and activated a test for Cherokee.\n\nWed Mar 16 17:58:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Fixed a logical error.\n\nWed Mar 16 17:57:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Adding tests for Cherokee.\n\t  One test not yet working.\n\t  (with Kimihito Matsui)\n\nWed Mar 16 15:44:05 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Adding tests for actual Unicode\n\t  case mapping. Fixing some aliasing issues.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 21:38:28 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Consider redefinition of Fixnum#+.\n\t  [ruby-dev:49510] [Bug#12178] Reported by usa.\n\nTue Mar 15 20:32:57 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for :+ operator\n\t  for Fixnums.\n\nTue Mar 15 20:21:01 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for self is an\n\t  array and a symbol operator is given.\n\nTue Mar 15 16:29:51 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Eliminating common code.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 16:17:09 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Expansion of some code repetition in preparation for\n\t  elimination of common code pieces.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 13:49:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Additional macros and code to use mapping data in\n\t  CaseMappingSpecials array.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 13:41:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (rb_gc_mark_global_tbl): should be private,\n\t  but was accidentally exported.\n\nTue Mar 15 12:51:06 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* doc/extension.ja.rdoc: Fix RDoc markup in doc/extension*.rdoc.\n\t  [ci skip][Bug #12143][ruby-core:74143]\n\t* doc/extension.rdoc: ditto.\n\nTue Mar 15 09:56:41 2016  Ian Lunderskov  <ian.lunderskov@gmail.com>\n\n\t* time.c: Minor typo in Time#dst? documentation.\n\t  [ci skip][fix GH-1290]\n\nTue Mar 15 04:36:41 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_rubyoptions.rb (test_disable): add tests for\n\t  --disable-gems and --disable-did_you_mean.\n\nTue Mar 15 03:35:04 2016  Eric Hodel  <drbrain@segment7.net>\n\n\t* marshal.c (r_object0): Fix Marshal crash for corrupt extended object.\n\nTue Mar 15 01:22:27 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_rubyoptions.rb: make version matching support\n\t  JRuby's version output.\n\nMon Mar 14 19:05:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* bignum.c (big2str_2bdigits): reduce div instruction.\n\nMon Mar 14 18:39:53 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h, enc/unicode.c: Adjusting flag assignments\n\t  and macros to work with unified CaseMappingSpecials array.\n\t  (with Kimihito Matsui)\n\nMon Mar 14 16:53:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (compile_named_capture_assign): optimize named capture\n\t  assignments, by replacing repeating global variable accesses\n\t  with `dup`, and by returning the matched result instead of\n\t  re-getting it from the MatchData.\n\n\t* parse.y (reg_named_capture_assign_gen): build just assignment\n\t  nodes for the optimization.\n\nMon Mar 14 16:02:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (ruby_is_fd_loadable): now return -1 if loadable but\n\t  may block.\n\n\t* ruby.c (open_load_file): wait to read by the result of\n\t  ruby_is_fd_loadable, without fstat.\n\nMon Mar 14 13:38:38 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* numeric.c (fix2str): improve r54092 like rb_int2big().\n\nMon Mar 14 10:02:23 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_setup): document as MT-unsafe\n\t  [ruby-core:73803] [Bug #12069]\n\nSun Mar 13 09:43:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/win32.h (O_SHARE_DELETE): change to fit Fixnum\n\t  limit.  [ruby-core:74285] [Bug #12171]\n\nSun Mar 13 09:15:45 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (rb_fix2str): fix edge case, accidentally generated\n\t  wrong Fixnum from LONG_MIN.\n\nSat Mar 12 09:50:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_f_catch): [DOC] fix malformed RDoc syntax, \"+...+\"\n\t  cannot enclose non-identifier characters.\n\t  a patch by Sebastian S in [ruby-core:74278].  [Bug#12170]\n\nSat Mar 12 02:44:48 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/test/unit.rb: describe !/REGEXP/ in the help message.\n\nFri Mar 11 17:03:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Options#non_options): make regexp name\n\t  options prefixed with \"!\" negative filters.\n\n\t* common.mk (TEST_EXCLUDES): use negative filter to exclude memory\n\t  leak tests.  -x option excludes test files, not test methods.\n\nFri Mar 11 16:11:27 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Streamlining approach to\n\t  case mapping data not available from case folding by unifying all\n\t  three cases (special title, special upper, special lower).\n\t* enc/unicode.c: Adjust macro names for above (macros are currently inactive).\n\t  (with Kimihito Matsui)\n\nThu Mar 10 17:34:16 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (prepare_iseq_build): enable coverage by coverage_enabled\n\t  option, not by parse_in_eval flag in the thread context.\n\n\t* iseq.h (rb_compile_option_struct): add coverage_enabled flag.\n\n\t* parse.y (yycompile0): set coverage_enabled flag if coverage\n\t  array is made.\n\nThu Mar 10 15:19:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* node.c (dump_option): nd_compile_option is a hidden hash object,\n\t  cannot call inspect on it.\n\nThu Mar 10 09:49:54 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/socket/test_socket.rb (test_udp_recvmsg_truncation):\n\t  AIX does not set the MSG_TRUNC flag for a message partially read\n\t  by recvmsg(2) with the MSG_PEEK flag set.\n\nWed Mar  9 16:48:45 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: fix my last commit (syntax error).\n\nWed Mar  9 16:41:44 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: fix output messages.\n\n\t* benchmark/memory_wrapper.rb: use respond_to? because\n\t  member? does not work well.\n\nWed Mar  9 16:20:25 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: support memory usage benchmark.\n\t  use `--measure-target=[target]'.\n\t  Now, we can use the following targets:\n\t    * real (default): real time which returns process time in sec.\n\t    * peak: peak memory usage (physical memory) in bytes.\n\t    * size: last memory usage (physical memory) in bytes.\n\n\t* benchmark/memory_wrapper.rb: ditto.\n\nWed Mar  9 15:04:22 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/bm_vm3_gc_old_full.rb: add GC.start benchmark.\n\n\t* benchmark/bm_vm3_gc_old_immediate.rb: ditto.\n\n\t* benchmark/bm_vm3_gc_old_lazy.rb: ditto.\n\nWed Mar  9 14:59:11 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: exit benchmarking if a benchmark process\n\t  receives signals.\n\nWed Mar  9 13:22:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/memory_status.rb: make Memory::Status independent of\n\t  MiniTest::Skip.\n\n\t* test/lib/test/unit/assertions.rb (assert_no_memory_leak): skip\n\t  if Memory::Status is not available.\n\nWed Mar  9 09:19:55 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/io/wait/test_io_wait.rb (test_wait_readwrite_timeout):\n\t  select(2) in AIX returns \"readable\" for the write-side fd\n\t  of a pipe, so it is not possible to use a pipe to test\n\t  the read-write timeout of IO#wait on AIX.\n\nWed Mar  9 03:35:22 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_require.rb (test_require_with_loaded_features_pop):\n\t  Only remove PATH so threads don't accidentally double-pop.\n\nWed Mar  9 00:29:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_method.c (rb_alias): the original name should be properly\n\t  available method_added method, set the name before calling the\n\t  hook.\n\nWed Mar  9 00:07:03 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/logger.rb (Logger::LogDevice#initialize): define using\n\t  keyword arguments.\n\nTue Mar  8 23:37:07 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_array.rb: split out the test for no stack error\n\t  on large input for test_permutation, test_repeated_permutation,\n\t  and test_repeated_combination, and make them all timeout:30.\n\nTue Mar  8 17:20:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* intern.h (rb_divmod): assume compilers `/` and `%` comply C99\n\t  and reduce branching. If a compiler doesn't comply, add #ifdefs.\n\n\t* intern.h (rb_div): added for Ruby's behavior.\n\n\t* intern.h (rb_mod): added for Ruby's behavior.\n\n\t* insns.def (opt_div): use rb_div.\n\n\t* insns.def (opt_mod): use rb_mod.\n\n\t* numeric.c (fixdivmod): removed.\n\n\t* numeric.c (fix_divide): use rb_div.\n\n\t* numeric.c (fix_mod): use rb_mod.\n\n\t* numeric.c (fix_divmod): use rb_divmod.\n\nTue Mar  8 17:53:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_mod): show its method name on ZeroDivisionError.\n\t  [Bug #12158]\n\nTue Mar  8 17:33:38 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (rb_w32_write_console): now no need to check\n\t  ERROR_CALL_NOT_IMPLEMENTED because it is for old Win9X.\n\nTue Mar  8 16:54:29 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (rb_w32_write_console): stop the VT100 emulation if the\n\t  console supports it natively.\n\nTue Mar  8 08:13:01 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/net/imap/test_imap.rb (test_idle_timeout): Because of the\n\t  timeout specified in \"imap.idle(0.2)\", there is no guarantee that\n\t  the server thread has done all the work before the client thread\n\t  performs the assertions. It depends on the thread scheduling.\n\t  Add checks to avoid false positives (on AIX, particularly).\n\nTue Mar  8 00:42:22 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ruby.c (warn_cr_in_shebang): meaningless check on DOSISH platforms.\n\t  fixed a test failure introduced at r53998.\n\nTue Mar  8 00:27:53 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/tcllib/tablelist_tile.rb: fix method name typo.\n\t  [ruby-core:72513] [Bug #11893] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:25:08 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/tcllib/toolbar.rb: fix method name typo.\n\t  [ruby-core:72511] [Bug #11891] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:21:58 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/blt/tree.rb: fix method name typo.\n\t  [ruby-core:72510] [Bug #11890] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:11:47 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tk/menubar.rb: fix a typo in font name. [ruby-core:72505]\n\t  [Bug #11886] The patch provided by Akira Matsuda.\n\n\t* ext/tk/sample/*.rb: ditto.\n\nMon Mar  7 13:32:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* class.c (rb_define_class, rb_define_class_id_under): raise\n\t  ArgumentError if super is 0, deprecated behavior which has been\n\t  warned long time.\n\nMon Mar  7 13:28:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h: move function declarations for class internals from\n\t  include/ruby/intern.h.\n\nMon Mar  7 10:58:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/win32ole/win32ole_event.c (rescue_callback): use\n\t  rb_write_error_str instead of rb_write_error, to respect\n\t  the encoding and prevent the message from GC.\n\n\t* internal.h (rb_write_error_str): export.\n\nMon Mar  7 01:38:41 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/ruby/test_process.rb (test_execopts_gid): Skip a test\n\t  that is known to fail on AIX. AIX allows setgid to\n\t  a supplementary group, but Ruby does not allow the \"-e\"\n\t  option when setgid'ed, so the test does not work as intended.\n\nSun Mar  6 22:43:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* io.c (rb_obj_display): [DOC] fix output of Array, as Array#to_s\n\t  is same as Array#inspect since 1.9.\n\nSat Mar  5 09:50:58 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/socket/test_addrinfo.rb (test_ipv6_address_predicates):\n\t  IN6_IS_ADDR_V4COMPAT and IN6_IS_ADDR_V4MAPPED are broken\n\t  on AIX, so skip related tests.\n\nSat Mar  5 09:17:54 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/rinda/test_rinda.rb (test_make_socket_ipv4_multicast):\n\t  The fifth argument to getsockopt(2) should be modified to\n\t  indicate the actual size of the value on return,\n\t  but not in AIX. This is a know bug. Skip related tests.\n\t* test/rinda/test_rinda.rb (test_ring_server_ipv4_multicast):\n\t  ditto.\n\t* test/rinda/test_rinda.rb (test_make_socket_unicast): ditto.\n\t* test/socket/test_basicsocket.rb (test_getsockopt): ditto.\n\t* test/socket/test_sockopt.rb (test_bool): ditto.\n\nSat Mar  5 07:36:27 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/float/test_nextafter.rb: In AIX,\n\t  nextafter(+0.0,-0.0)=+0.0, and nextafter(-0.0,+0.0)=-0.0,\n\t  but they should return -0.0 and +0.0, respectively. This is\n\t  a known bug in nextafter(3) on AIX, so skip related tests.\n\nSat Mar  5 07:14:10 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/zlib/test_zlib.rb (test_adler32_combine, test_crc32_combine):\n\t  Skip two tests on AIX because zconf.h in zlib does not correctly\n\t  recognize _LARGE_FILES in AIX. The problem was already reported\n\t  to zlib, and skip these tests until it is fixed.\n\nSat Mar  5 03:07:40 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* thread_pthread.c (getstack): __pi_stacksize returned by\n\t  pthread_getthrds_np() is wrong on AIX. Use\n\t  __pi_stackend - __pi_stackaddr instead.\n\nFri Mar  4 19:19:42 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: use 2 bits with unsigned int for rb_objspace::flags::mode\n\t  because it always returns 0 to 2 (non-negative value).\n\nFri Mar  4 18:42:08 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename \"enum gc_stat\" to \"enum gc_mode\"\n\t  because there is a same name (no related) function gc_stat().\n\n\t  Also gc_stat_* are renamed to gc_mode_*,\n\t  gc_stat_transition() to gc_mode_transition(),\n\t  rb_objspace::flags::stat is renamed to rb_objspace::flags::mode.\n\n\t  Change rb_objspace::flags::mode from 2 bits to 3 bits because VC++\n\t  returns negative enum value with 2 bits.\n\n\t* gc.c (gc_mode): add a macro to access rb_objspace::flags::mode\n\t  with verification code (verification is enabled only on\n\t  RGENGC_CHECK_MODE > 0).\n\n\t* gc.c (gc_mode_set): same macro for setter.\n\nFri Mar  4 09:28:18 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.1.\n\t  Please see entries of 2.6.0 and 2.6.1 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\t  [fix GH-1270] Patch by @segiddins\n\nThu Mar  3 14:09:00 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (modifiable?, new_ostruct_member!, table!):\n\t  rename methods for internal use with suffixes and make private,\n\t  [ruby-core:71069] [Bug #11587]\n\nWed Mar  2 16:28:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (method_missing): call by found method entry and get\n\t  rid of searching the same method entry twice.\n\n\t* vm_eval.c (vm_call0_body): calling method_missing method is\n\t  method_missing().\n\nWed Mar  2 15:13:33 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed broken parser named XMLScanStreamParser.\n\t  It's not works with current Ruby version.\n\t  [fix GH-1271][ruby-core:59588][Bug #9369]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nWed Mar  2 15:08:33 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed broken parser named XMLTreeParser.\n\t  Required gem of its parser didn't compile on newer Ruby versions.\n\t  [fix GH-1271][ruby-core:59590][Bug #9370]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nTue Mar  1 11:25:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/fileutils.rb: use keyword arguments instead of option\n\t  hashes.\n\nMon Feb 29 16:50:20 2016  hanachin  <hanachin@gmail.com>\n\n\t* array.c (rb_ary_push_m): [DOC] Remove trailing comma from\n\t  Array#push example, as other Array examples doesn't put trailing\n\t  comma.  [Fix GH-1279]\n\nMon Feb 29 16:31:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* common.mk, tool/mkconfig.rb: set cross_compiling option from\n\t  Makefile, but not from rbconfig.rb, which is just going to be\n\t  created by this command.\n\nSun Feb 28 23:13:49 2016  C.J. Collier  <cjcollier@linuxfoundation.org>\n\n\t* configure.in: Add summary to end of configure output.\n\t  [Fix GH-1275]\n\nSun Feb 28 20:23:36 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/drb.rb (error_print): Add verbose failure messages and\n\t  avoid infamous DRb::DRbConnError. [Feature #12101]\n\nSun Feb 28 13:40:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (nometh_err_initialize): add private_call? parameter.\n\n\t* error.c (nometh_err_private_call_p): add private_call? method,\n\t  to tell if the exception raised in private form FCALL or VCALL.\n\t  [Feature #12043]\n\n\t* vm_eval.c (make_no_method_exception): append private_call?\n\t  argument.\n\n\t* vm_insnhelper.c (ci_missing_reason): copy FCALL flag.\n\nSun Feb 28 10:19:47 2016  Ryan T. Hosford  <tad.hosford@gmail.com>\n\n\t* array.c (rb_ary_and): clarify that set intersection returns the\n\t  unique elements common to both arrays.\n\n\t* array.c (rb_ary_or): clarify that union preserves the order from\n\t  the given arrays.\n\nSat Feb 27 17:05:29 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Reducing size of TitleCase\n\t  table by eliminating duplicates.\n\t  (with Kimihito Matsui)\n\nFri Feb 26 14:40:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (num_step_scan_args): comparison String with Numeric\n\t  should raise TypeError. it is an invalid type, but not a\n\t  mismatch the number of arguments.  [ruby-core:62430] [Bug #9810]\n\nFri Feb 26 14:39:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/extension.rdoc, doc/extension.ja.rdoc: add editor local\n\t  variables, with commenting out by :enddoc: directives which are\n\t  just ignored unless code object mode.  [Bug #12111]\n\nFri Feb 26 12:25:56 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/extension.ja.rdoc: removed rendering error caused by editor specific\n\t  configuration on http://docs.ruby-lang.org/en/trunk/extension_rdoc.html .\n\t  [Bug #12111][ruby-core:73990]\n\nFri Feb 26 11:21:41 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed references to NQXML. It's obsoleted parser.\n\t  [fix GH-1245][ruby-core:59593][Feature #9371]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nFri Feb 26 11:10:19 2016  Rick Salevsky  <rsalevsky@suse.com>\n\n\t* lib/tmpdir.rb: Unify to coding-style for method definition.\n\t  [fix GH-1252]\n\nFri Feb 26 11:02:04 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* README.md: update markdown syntax for anchor tag.\n\t  [fix GH-1265] Patch by @lukBarros\n\nFri Feb 26 10:52:29 2016  Alex Boyd  <alex@opengroove.org>\n\n\t* lib/irb.rb: avoid to needless truncation when using back_trace_limit option.\n\t  [fix GH-1205][ruby-core:72773][Bug #11969]\n\nFri Feb 26 08:11:58 2016  Aaron Patterson <tenderlove@ruby-lang.org>\n\n\t* gem_prelude.rb: Reduce system calls by activating the `did_you_mean`\n\t  gem before requiring the gem.  Activating the gem puts the gem on\n\t  the load path, where simply requiring the file will search every gem\n\t  that's installed until it can find a gem that contains the\n\t  `did_you_mean` file.\n\nThu Feb 25 19:04:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Adding possibility for debugging output\n\t  for TitleCase table in casefold.h.\n\t  (with Kimihito Matsui)\n\nWed Feb 24 22:31:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Rearranging flag assignments and making\n\t  space for titlecase indices; adding additional macros to add or\n\t  extract titlecase index; adding comments for better documentation.\n\t* enc/unicode.c: Moving some macros to include/ruby/oniguruma.h;\n\t  activating use of titlecase indices.\n\t  (with Kimihito Matsui)\n\nWed Feb 24 21:03:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* random.c (limited_rand): Add a specialized path for when the limit fits\n\t  in 32 bit.\n\nTue Feb 23 21:52:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Outputting actual titlecase\n\t  data (new table, with indices from other tables).\n\t* enc/unicode.c: Ignoring titlecase data indices for the moment.\n\t  (with Kimihito Matsui)\n\nTue Feb 23 15:21:14 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Reading casing data from\n\t  SpecialCasing.txt.\n\t  (with Kimihito Matsui)\n\nMon Feb 22 18:33:55 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Adding flag for title-case,\n\t  not yet operational.\n\t  (with Kimihito Matsui)\n\nMon Feb 22 18:17:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Fixed bug that avoided inclusion\n\t  of compatibility characters in upper-/lower-case mappings.\n\t  (with Kimihito Matsui)\n\nSun Feb 21 13:57:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cgi/escape/escape.c: Optimize CGI.unescape performance by C ext\n\t  for ASCII-compatible encodings.  [Fix GH-1250]\n\nSun Feb 21 13:56:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cgi/escape/escape.c: Optimize CGI.unescapeHTML performance by C\n\t  ext for ASCII-compatible encodings.  [Fix GH-1242]\n\nSat Feb 20 15:38:16 2016  Eric Wong  <e@80x24.org>\n\n\t* doc/extension.rdoc: update paths for defs/ directory\n\nSat Feb 20 14:44:15 2016  Lucas Buchala  <lucasbuchala@gmail.com>\n\n\t* vm_eval.c (rb_mod_module_eval): [DOC] Fix documentation\n\t  signature for Module#module_eval.  [Fix GH-1258]\n\nSat Feb 20 14:40:44 2016  Adam O'Connor  <northband@gmail.com>\n\n\t* README.md: a few grammatical changes to the main Ruby README.md.\n\t  [Fix GH-1259]\n\nSat Feb 20 13:04:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* dir.c (push_pattern, push_glob): deal with read paths as UTF-8\n\t  to stat later, on Windows as well as OS X.\n\t  [ruby-core:73868] [Bug #12081]\n\nSat Feb 20 01:53:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* object.c (rb_mod_const_get): make error message at uninterned\n\t  string consistent with symbols.  [ruby-dev:49498] [Bug #12089]\n\nFri Feb 19 23:37:52 2016  Masahiro Tomita  <tommy@tmtm.org>\n\n\t* lib/find.rb (Find#find): raise with the given path name if it\n\t  does not exist.  [ruby-dev:49497] [Bug #12087]\n\nFri Feb 19 12:44:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Activated use of case mapping data in CaseUnfold_11 array.\n\t  (with Kimihito Matsui)\n\nFri Feb 19 11:08:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/extmk.rb: add cygwin case, nothing excluded.\n\t  [ruby-core:73806] [Bug#12071]\n\nThu Feb 18 21:32:15 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* man/irb.1: fix output in EXAMPLES.\n\nThu Feb 18 21:05:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (sym_match_m): delegate to String#match but not\n\t  String#=~.  [ruby-core:72864] [Bug #11991]\n\nThu Feb 18 14:15:38 2016  Shota Fukumori  <her@sorah.jp>\n\n\t* re.c: Add MatchData#named_captures\n\t  [Feature #11999] [ruby-core:72897]\n\n\t* test/ruby/test_regexp.rb(test_match_data_named_captures): Test for above.\n\n\t* NEWS: News about MatchData#named_captures.\n\nWed Feb 17 21:41:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* defs/id.def (predefined): add idLASTLINE and idBACKREF for $_\n\t  and $~ respectively.\n\n\t* parse.y: use idLASTLINE and idBACKREF instead of rb_intern.\n\nWed Feb 17 20:23:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_init): fix segfault and memory leak, consider\n\t  wide char encoding terminator.\n\nWed Feb 17 12:14:59 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (rb_str_init): introduce String.new(capacity: size)\n\t  [Feature #12024]\n\nTue Feb 16 19:10:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Used only first element\n\t  (rather than all) of target in CaseUnfold_11 array.\n\t  (with Kimihito Matsui)\n\nTue Feb 16 18:24:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (compare_with_zero): fix variable name, rb_cmperr\n\t  requires VALUEs but not an ID.\n\nTue Feb 16 17:34:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* dir.c (rb_dir_s_empty_p): add Dir.empty? method, which tells the\n\t  argument is the name of an empty directory.  [Feature #10121]\n\nTue Feb 16 09:51:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/rbinstall.rb (without_destdir): just strip a drive letter\n\t  which is prepended by with_destdir.\n\t  pointed out by @DavidEGrayson.\n\t  https://github.com/ruby/ruby/commit/0e5f9ae#commitcomment-16101763\n\nTue Feb 16 04:42:13 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_plus): simply use LONG2NUM() instead of wrongly\n\t  complex overflow case.\n\n\t* insns.def (opt_sub): ditto.\n\nTue Feb 16 02:49:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/rbinstall.rb (without_destdir): compare with the destdir\n\t  after stripping a drive letter, on dosish platforms.\n\t  pointed out by @DavidEGrayson.\n\t  https://github.com/ruby/ruby/commit/d0cf23b#commitcomment-16100407\n\nMon Feb 15 15:44:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parse_ident): allow keyword arguments just after a\n\t  method where the same name local variable is defined.\n\t  [ruby-core:73816] [Bug#12073]\n\nMon Feb 15 14:43:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Added debugging option\n\t  (with Kimihito Matsui)\n\nSun Feb 14 17:31:50 2016  Lars Kanis  <lars@greiz-reinsdorf.de>\n\n\t* lib/mkmf.rb (with_{cpp,c,ld}flags): copy caller strings not to\n\t  be modified, in append_{cpp,c,ld}flags respectively.\n\t  [Fix GH-1246]\n\nSun Feb 14 16:18:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval.c (setup_exception): set the cause only if it is explicitly\n\t  given or not set yet.  [Bug #12068]\n\nSat Feb 13 21:44:58 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* hash.c (rb_hash_invert): [DOC] more examples.\n\nSat Feb 13 17:30:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/uri/generic.rb (URI::Generic#find_proxy): support CIDR in\n\t  no_proxy.  [ruby-core:73769] [Feature#12062]\n\nSat Feb 13 17:11:58 2016  Fabian Wiesel  <fabian.wiesel@sap.com>\n\n\t* lib/uri/generic.rb (find_proxy): exclude white-spaces and allow\n\t  for a leading dot in the domain name in no_proxy.\n\t  [ruby-core:54542] [Feature #8317]\n\nFri Feb 12 12:20:56 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (name_err_initialize, nometh_err_initialize): [DOC] fix\n\t  argument positions.  optional parameters except for the message\n\t  are placed at the last.\n\nFri Feb 12 11:49:49 2016  Anthony Dmitriyev  <antstorm@gmail.com>\n\n\t* net/ftp.rb: add NullSocket#closed? to fix closing not opened\n\t  connection.  [Fix GH-1232]\n\nFri Feb 12 11:17:38 2016  Bogdan  <bogdanvlviv@gmail.com>\n\n\t* re.c (rb_reg_initialize_m): [DOC] fix missing right bracket.\n\t  [Fix GH-1243]\n\nThu Feb 11 14:57:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SIZEOF, RUBY_DEFINT): fix for types\n\t  which are conditionally available depending on architectures\n\t  when universal binary, e.g., __int128.\n\nThu Feb 11 06:26:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (RUBY_DEFINT): use Parameter Expansion.\n\nThu Feb 11 05:33:24 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (int128_t): don't check HAVE_XXX (for example\n\t  HAVE___INT128) because RUBY_CHECK_SIZEOF() don't define it for\n\t  config.h and use of $ac_cv_sizeof___int128 alternates the check.\n\t  (and don't need to define because users shouldn't know that)\n\nWed Feb 10 12:03:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (ARFLAGS): check if deterministic mode flag is\n\t  effective, which is on by default on Ubuntu.\n\nTue Feb  9 16:36:23 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Remove block from Logger.add as it's not needed\n\t  patch provided by Daniel Lobato Garcia [fix GH-1240] [Bug #12054]\n\nTue Feb  9 14:32:23 2016  Zachary Scott  <zzak@ruby-lang.org>\n\n\t* ext/zlib/zlib.c: Document mtime header behavior with patch by @schneems\n\t  Fixes [GH-1129]: https://github.com/ruby/ruby/pull/1129\n\nTue Feb  9 13:52:49 2016  Zachary Scott  <zzak@ruby-lang.org>\n\n\t* re.c: Remove deprecated kcode argument from Regexp.new and compile\n\t  patch provided by Dylan Pulliam [Bug #11495]\n\nMon Feb  8 21:26:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, enc/unicode/casefold.h: Flags for\n\t  upper/lower conversion added (titlecase and SpecialCasing still missing)\n\t  (with Kimihito Matsui)\n\nMon Feb  8 20:43:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c, enc/unicode.c: Disassociating ONIGENC_CASE_FOLD flag from\n\t  ONIGENC_CASE_DOWNCASE.\n\t  (with Kimihito Matsui)\n\nMon Feb  8 13:00:17 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Shortened macros for enc/unicode/casefold.h to\n\t  single-letter; use flags in casefold.h for logic.\n\n\t* enc/unicode/case-folding.rb: Added flag for case folding.\n\t  Changed parameter passing.\n\n\t* enc/unicode/casefold.h: New flags added.\n\t  (with Kimihito Matsui)\n\nMon Feb  8 10:30:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (feature_option): raise a runtime error if ambiguous\n\t  feature name is given, in the future.  [Bug #12050]\n\nMon Feb  8 09:43:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Removed enc/unicode/casefold.h from automatic build because\n\t  some CI systems don't have gperf. Creation of enc/unicode/casefold.h\n\t  is now possible with make unicode-up. This is intended as a temporary measure.\n\nSun Feb  7 22:10:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added two more precondition files for enc/unicode/casefold.h\n\n\t* enc/unicode.c: Added shortening macros for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Fixed file encoding for CaseFolding.txt\n\t  to ASCII-8BIT (should fix some ci errors). Clarified usage. Created\n\t  class MapItem. Partially implemented class CaseMapping.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 14:12:32 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Fixing parameter passing.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 11:44:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: New classes CaseMapping/CaseMappingDummy\n\t  to pass as parameters; not yet implemented or used.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 11:16:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: using new option in recipe for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Correctly specify argument to new option.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 10:43:27 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t(this commit message applies to the previous commit)\n\t* common.mk: explicit recipe for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Adding -m option to prepare for using\n\t  multiple data files.\n\t  (with Kimihito Matsui)\n\nSat Feb  6 22:30:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/cgi/util.rb (escapeHTML, unescapeHTML): consider\n\t  ASCII-incompatible encodings.  [Fix GH-1239]\n\nSat Feb  6 15:18:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_regex_casefold.rb: Added data-based testing for\n\t  String#downcase :fold.\n\n\t* enc/unicode.c: Fixed a range error (lowest non-ASCII character affected\n\t  by case operations is U+00B5, MICRO SIGN)\n\n\t* test/ruby/enc/test_case_mapping.rb: Explicit test for case folding of\n\t  MICRO SIGN to Greek mu.\n\t  (with Kimihito Matsui)\n\nSat Feb  6 14:51:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_regex_casefold.rb: Tests for three case folding\n\t  primitives (mbc_case_fold, get_case_fold_codes_by_str,\n\t  apply_all_case_fold) in the various encodings. Currently only known\n\t  good encodings are tested to avoid test failures. For bug hunting,\n\t  start by adding more encodings with\n\t  generate_test_casefold encoding\n\t  (with Kimihito Matsui)\n\nSat Feb  6 14:37:16 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c, test/ruby/enc/test_case_mapping.rb: Implemented :fold\n\t  option for String#downcase by using case folding data from\n\t  regular expression engine, and added a few simple tests.\n\t  (with Kimihito Matsui)\n\nFri Feb  5 20:08:59 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: added tests for :ascii option.\n\t  (with Kimihito Matsui)\n\nFri Feb  5 12:22:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_mult): Use int128_t for overflow detection.\n\n\t* bignum.c (rb_uint128t2big): added for opt_mult.\n\n\t* bignum.c (rb_uint128t2big): added for rb_uint128t2big..\n\n\t* configure.in: define int128_t, uint128_t and related MACROs.\n\t  Initially introduced by r41379 but reverted by r50749.\n\nThu Feb  4 21:05:17 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Activated :ascii flag for ASCII-only case conversion\n\t  (with Kimihito Matsui)\n\nThu Feb  4 17:38:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (reg_set_source): make source string frozen without\n\t  copying.\n\n\t* re.c (rb_reg_initialize_m): refactor initialization with\n\t  encoding.\n\nThu Feb  4 15:35:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_fstring_enc_new, rb_fstring_enc_cstr): functions to\n\t  make fstring with encoding.\n\nThu Feb  4 14:42:29 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added Unicode data file SpecialCasing.txt to be additionally\n\t  downloaded (with Kimihito Matsui)\n\nThu Feb  4 12:39:08 2016  joker1007  <kakyoin.hierophant@gmail.com>\n\n\t* cgi/escape/escape.c: Optimize CGI.escape performance by C ext\n\t  for ASCII-compatible encodings.  [Fix GH-1238]\n\nThu Feb  4 11:53:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Introduce two variables (UNICODE_DATA_DIR and\n\t  UNICODE_SRC_DATA_DIR) to eliminate repetitions.\n\nWed Feb  3 12:13:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (str_new_frozen): if the given string is embeddedable\n\t  but not embedded, embed a new copied string. [Bug #11946]\n\nWed Feb  3 08:25:38 2016  boshan  <boshan@subsplash.com>\n\n\t* ext/openssl/ossl_pkey.c (Init_ossl_pkey): [DOC] Fix typo\n\t  \"encrypted\" to \"decrypted\".  [Fix GH-1235]\n\nWed Feb  3 08:21:32 2016  Seiei Miyagi  <hanachin@gmail.com>\n\n\t* ext/ripper/lib/ripper/lexer.rb (on_heredoc_dedent): Fix\n\t  Ripper.lex error in dedenting squiggly heredoc.  heredoc tree is\n\t  also an array of Elem in the outer tree.  [Fix GH-1234]\n\nWed Feb  3 02:33:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_prepare_enc): use already compiled US-ASCII regexp\n\t  if given string is ASCII only.\n\t  121.2s to 113.9s on my x86_64-freebsd10.2 Intel Core i5 661\n\nTue Feb  2 13:02:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c: Introduce RREGEXP_PTR.\n\t  patch by dbussink.\n\t  partially merge https://github.com/ruby/ruby/pull/497\n\n\t* include/ruby/ruby.h: ditto.\n\n\t* gc.c: ditto.\n\n\t* ext/strscan/strscan.c: ditto.\n\n\t* parse.y: ditto.\n\n\t* string.c: ditto.\n\nTue Feb  2 09:08:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems/specification.rb: `coding` is effective only first\n\t  line except shebang.\n\n\t* lib/rubygems/package.rb, lib/rubygems/package/*: ditto.\n\nMon Feb  1 21:41:58 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.5.2.\n\t  It supports to enable frozen string literal and add `--norc` option for\n\t  disable to `.gemrc` configuration.\n\t  See 2.5.2 release notes for other fixes and enhancements.\n\t  https://github.com/rubygems/rubygems/blob/a8aa3bac723f045c52471c7b9328310a048561e0/History.txt#L3\n\nSun Jan 31 12:33:13 2016  Dan Kreiger  <dan@dankreiger.com>\n\n\t* test/drb/ut_large.rb (multiply, avg, median): add additional\n\t  math operations to DRbLarge.  [Fix GH-1086]\n\nSun Jan 31 12:19:15 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_file_exhaustive.rb (test_lstat): Add lacking test\n\t  for File#lstat.  [Fix GH-1231]\n\nSun Jan 31 12:15:33 2016  Prayag Verma  <prayag.verma@gmail.com>\n\n\t* doc/standard_library.rdoc: fix typo  [Fix GH-1230]\n\t  Spelling mistakes -\n\t  outputing > outputting\n\t  publich > publish\n\nSat Jan 30 15:18:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_check_funcall_with_hook): also should call the\n\t  given hook before returning Qundef when overridden respond_to?\n\t  method returned false.  [ruby-core:73556] [Bug #12030]\n\nFri Jan 29 17:40:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/file.c (rb_readlink): drop garbage after the substitute\n\t  name, as rb_w32_read_reparse_point returns the expected buffer\n\t  size but \"\\??\\\" prefix is dropped from the result.\n\n\t* win32/win32.c (w32_readlink): ditto, including NUL-terminator.\n\nFri Jan 29 17:07:27 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (fileattr_to_unixmode, rb_w32_reparse_symlink_p): volume\n\t  mount point should be treated as directory, not symlink.\n\t  [ruby-core:72483] [Bug #11874]\n\n\t* win32/win32.c (rb_w32_read_reparse_point): check the reparse point is\n\t  a volume mount point or not.\n\n\t* win32/file.c (rb_readlink): follow above change (but this pass won't\n\t  be used).\n\nFri Jan 29 16:17:07 2016  Lucas Buchala  <lucasbuchala@gmail.com>\n\n\t* enum.c (enum_take_while, enum_drop_while): rename block\n\t  parameter to obj, since they are generic objects.  [Fix GH-1226]\n\nFri Jan 29 14:15:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/erb.rb (ERB::Compiler#detect_magic_comment): allow\n\t  frozen-string-literal in comment as well as encoding.\n\n\t* lib/erb.rb (ERB#def_method): insert def line just before the\n\t  first non-comment and non-empty line, not to leave duplicated\n\t  and stale magic comments.\n\nFri Jan 29 11:13:33 2016  Jeremy Evans  <code@jeremyevans.net>\n\n\t* lib/erb.rb (ERB#set_eoutvar): explicitly make mutable string as\n\t  a buffer to make ERB work with --enable-frozen-string-literal.\n\t  [ruby-core:73561] [Bug #12031]\n\nFri Jan 29 10:44:56 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http/header.rb: Warn nil variable on HTTP Header.\n\t  It caused to NoMethodError. [fix GH-952][fix GH-641] Patch by @teosz\n\t* test/net/http/test_httpheader.rb: Added test for nil HTTP Header.\n\nThu Jan 28 17:31:43 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/socket.c (sock_gethostname): support unlimited size\n\t  hostname.\n\nWed Jan 27 21:03:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/-ext-/string/test_capacity.rb: Added missing library.\n\nWed Jan 27 18:53:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed bit mask in macro OnigCodePointCount\n\nWed Jan 27 17:54:42 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Protect code point count by macro, in order to\n\t  be able to use the remaining bits for flags.\n\t  (with Kimihito Matsui)\n\nWed Jan 27 16:34:35 2016  boshan  <boshan@subsplash.com>\n\n\t* lib/tempfile.rb (Tempfile#initialize): [DOC] the first parameter\n\t  `basename` is optional and defaulted to an empty string since\n\t  [GH-523].  [Fix GH-1225]\n\nWed Jan 27 16:25:54 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* array.c (rb_ary_dig): [DOC] fix the exception class to be raised\n\t  when intermediate object does not have dig method.  TypeError\n\t  will be raised now.  [Fix GH-1224]\n\nTue Jan 26 19:36:15 2016  Aggelos Avgerinos  <evaggelos.avgerinos@gmail.com>\n\n\t* array.c (permute0, rpermute0): [DOC] Substitute indexes ->\n\t  indices in documentation for consistency.  [Fix GH-1222]\n\nTue Jan 26 15:21:37 2016  Eric Wong  <e@80x24.org>\n\n\t* compile.c (caller_location): use rb_fstring_cstr for \"<compiled>\"\n\t  (it is converted to fstring anyways inside rb_iseq_new_with_opt)\n\t* iseq.c (iseqw_s_compile): ditto\n\t* iseq.c (rb_iseq_new_main): use rb_fstring_cstr for \"<main>\"\n\t* vm.c (Init_VM): ditto, share with with above\n\t* iseq.c (iseqw_s_compile_file): rb_fstring before rb_io_t->pathv\n\t  share \"<main>\" with above\n\t* vm.c (rb_binding_add_dynavars): fstring \"<temp>\" immediately\n\nTue Jan 26 15:14:01 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* compile.c (iseq_peephole_optimize): don't apply tailcall\n\t  optimization to send/invokesuper instructions with blockiseq.\n\t  This is a follow-up to the changes in r51903; blockiseq is now\n\t  the third operand of send/invokesuper instructions.\n\t  [ruby-core:73413] [Bug #12018]\n\nTue Jan 26 14:26:46 2016  Eric Wong  <e@80x24.org>\n\n\t* signal.c (sig_list): use fstring for hash key\n\t* test/ruby/test_signal.rb (test_signal_list_dedupe_keys): added\n\nTue Jan 26 13:08:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* signal.c (rb_f_kill): should immediately deliver reserved\n\t  signals SIGILL and SIGFPE, not only SIGSEGV and SIGBUS.\n\nTue Jan 26 07:57:28 2016  Joseph Tibbertsma  <josephtibbertsma@gmail.com>\n\n\t* gc.c (RVALUE_PAGE_WB_UNPROTECTED): fix a typo of argument name.\n\t  [Fix GH-1221]\n\nMon Jan 25 17:26:54 2016  Eric Wong  <e@80x24.org>\n\n\t* ruby_assert.h (RUBY_ASSERT_WHEN): fix reference to macro name\n\t* vm_core.h: include ruby_assert.h before using\n\t  [ruby-core:73371]\n\nMon Jan 25 15:55:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* symbol.c (sym_check_asciionly): more informative error message\n\t  with the encoding name and the inspected content.\n\t  [ruby-core:73398] [Feature #12016]\n\nMon Jan 25 09:38:26 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/ruby/test_string.rb: added testcase for next!, succ and succ!\n\t  [fix GH-1213] Patch by @K0mAtoru\n\nMon Jan 25 09:32:25 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/httpservlet/filehandler.rb: fix documentation for namespace.\n\t  [fix GH-1219][ci skip] Patch by @leafac\n\nSun Jan 24 19:34:23 2016  Eric Wong  <e@80x24.org>\n\n\t* vm_insnhelper.c (vm_check_if_namespace): tiny size reduction\n\nSun Jan 24 18:12:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Simplifying Unicode data file download logic to make\n\t  it more reliable (including additional fix not in r53633) [Bug #12007]\n\nSun Jan 24 16:54:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/wait/wait.c (io_wait_readwrite): [EXPERIMENTAL] allow to\n\t  wait for multiple modes, readable and writable, at once.  the\n\t  arguments may change in the future.  [Feature #12013]\n\nSat Jan 23 22:30:59 2016  K0mA  <mctj1218@gmail.com>\n\n\t* test/ruby/test_array.rb (test_keep_if): Add test for\n\t  Array#keep_if separate from Array#select!  [Fix GH-1218]\n\nSat Jan 23 20:54:26 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* common.mk: revert r53633. It broke rubyci and travis.\n\t  https://travis-ci.org/ruby/ruby/builds/104259623\n\nSat Jan 23 20:10:29 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* range.c (range_eqq): revert r51585 because rb_call_super() is\n\t  called in range_include() and thus r51585 doesn't work when the\n\t  receiver Range object consists of non linear objects such as Date\n\t  objects.\n\t  [ruby-core:72908] [Bug #12003]\n\nSat Jan 23 18:37:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* ChangeLog: Fixing wrong time on previous commit, and adding\n\t  previous commit message to svn [ci skip]\n\nSat Jan 23 18:30:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Simplifying Unicode data file download logic to make\n\t  it more reliable [Bug #12007]\n\nSat Jan 23 16:29:42 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* tool/downloader.rb: Fixed a logical error, improved documentation\n\nSat Jan 23 11:42:43 2016  Peter Suschlik  <ps@neopoly.de>\n\n\t* README.md: Use SVG Travis badge over PNG for better quality and\n\t  device support.  [Fix GH-1214] [Fix GH-1216]\n\nSat Jan 23 11:29:16 2016  Pascal Betz  <pascal.betz@simplificator.com>\n\n\t* lib/csv.rb: Update documentation of CSV header converter for\n\t  r45498, [GH-575].  [Fix GH-1215]\n\nFri Jan 22 17:36:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_core.h (VM_ASSERT): use RUBY_ASSERT instead of rb_bug.\n\n\t* error.c (rb_assert_failure): assertion with stack dump.\n\n\t* ruby_assert.h (RUBY_ASSERT): new header for the assertion.\n\nFri Jan 22 00:25:57 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regparse.c (fetch_name_with_level): allow non word characters\n\t  at the first character.  [Feature #11949]\n\n\t* regparse.c (fetch_name): ditto.\n\nThu Jan 21 17:34:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* marshal.c (r_object0): honor Marshal.load post proc\n\t  value for TYPE_LINK.  by Hiroshi Nakamura <nahi@ruby-lang.org>\n\t  https://github.com/ruby/ruby/pull/1204 fix GH-1204\n\nThu Jan 21 16:37:50 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* Makefile.in (update-rubyspec): fix r53208 like r53451.\n\nWed Jan 20 20:58:25 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* common.mk, Makefile.in: update-config_files is only for Unix\n\t  platforms.\n\nWed Jan 20 17:13:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/extlibs.rb: add --cache option to change cache directory.\n\nTue Jan 19 17:03:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added Unicode data file CaseFolding.txt to be additionally\n\t  downloaded (with Kimihito Matsui)\n\nTue Jan 19 10:09:58 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* lib/shell.rb (Shell.debug_output_exclusive_unlock): remove\n\t  because Mutex#exclusive_unlock was already deleted. [fix GH-1185]\n\nTue Jan 19 09:38:27 2016  Nick Cox  <nick@nickcox.me>\n\n\t* vm_method.c: fix grammar in respond_to? warning.\n\t  [fix GH-1047]\n\nMon Jan 18 14:37:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parser_here_document): an escaped newline is not an\n\t  actual newline, and the rest part should not be dedented.\n\t  [ruby-core:72855] [Bug #11989]\n\nMon Jan 18 12:04:34 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/ruby/test_string.rb: Added extra testcase for test_rstrip_bang\n\t  and test_lstrip_bang. [fix GH-1178] Patch by @Matrixbirds\n\nMon Jan 18 11:47:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* string.c: fix a typo. [fix GH-1202][ci skip] Patch by @sunboshan\n\nSun Jan 17 21:15:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: improve ICC (Intel C Compiler) support.\n\n\t* configure.in (CXX): The name of icc's c++ compiler is `icpc`.\n\n\t* configure.in (warnings): Add `-diag-disable=2259` to suppress\n\t  noisy warnings: \"non-pointer conversion from \"...\" to \"...\" may\n\t  lose significant bits\".\n\n\t* configure.in (optflags): Add `-fp-model precise` like -fno-fast-math.\n\n\t* lib/mkmf.rb: icc supports -Werror=division-by-zero\n\t  and -Werror=deprecated-declarations, but doesn't support\n\t  -Wdivision-by-zero and -Wdeprecated-declarations.\n\nSun Jan 17 20:40:10 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Any kind of option is now taking the new code path for\n\t  upcase/downcase/capitalize/swapcase. :lithuanian can be used for\n\t  testing if no specific option is desired.\n\t* test/ruby/enc/test_case_mapping.rb: Adjusted to above.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 20:10:10 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed a logical error and some comments.\n\t* test/ruby/enc/test_case_mapping.rb: Made tests more general.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 17:41:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Removed artificial expansion for Turkic,\n\t  added hand-coded support for Turkic, fixed logic for swapcase.\n\t* string.c: Made use of new case mapping code possible from upcase,\n\t  capitalize, and swapcase (with :lithuanian as a guard).\n\t* test/ruby/enc/test_case_mapping.rb: Adjusted for above.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 15:30:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (sockopt_bool): relax boolean size to be one\n\t  too not only sizeof(int).  Winsock getsockopt() returns a single\n\t  byte as a boolean socket option.  [ruby-core:72730] [Bug #11958]\n\nSun Jan 17 14:43:01 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_env.rb: [Fix GH-1201]\n\t  * Extract test code for ENV#keep_if from ENV#select_bang\n\t  * Add a test case for ENV#select_bang,keep_if\n\nSun Jan 17 14:42:25 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_env.rb: [Fix GH-1201]\n\t  * Extract test code for ENV#delete_if from ENV#reject_bang\n\t  * Add a test case for ENV#reject_bang,delete_if\n\nSun Jan 17 14:40:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (check_size): extract a macro to check\n\t  binary data size, with a consistent message.\n\n\t* ext/socket/option.c (sockopt_byte): fix error message,\n\t  sizeof(int) differs from sizeof(unsigned char) in general.\n\nSat Jan 16 21:16:21 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (xstring): reset heredoc indent after dedenting,\n\t  so that following string literal would not be dedented.\n\t  [ruby-core:72857] [Bug #11990]\n\nSat Jan 16 17:24:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Artificial mapping to test buffer expansion code.\n\t* string.c: Fixed buffer expansion logic.\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above.\n\t  (with Kimihito Matsui)\n\nSat Jan 16 16:47:14 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* ext/openssl/lib/openssl/pkey.rb: Added 2048 bit DH parameter.\n\t* test/openssl/test_pkey_dh.rb: ditto.\n\nSat Jan 16 10:51:19 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* enc/unicode.c: fix implicit conversion error with clang. fixup r53548.\n\t* string.c: ditto.\n\nSat Jan 16 10:31:00 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* common.mk: test-sample was changed to test-basic.\n\t  [Feature #11982][ruby-core:72823]\n\t* basictest/runner.rb: ditto. rename from tool/rubytest.rb.\n\t* basictest/test.rb: ditto. rename from sample/test.rb.\n\t* defs/gmake.mk: picked from r53540\n\t* sample/test.rb: backward compatibility for chkbuild.\n\nSat Jan 16 10:23:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c, enc/unicode.c: New code path as a preparation for Unicode-wide\n\t  case mapping. The code path is currently guarded by the :lithuanian\n\t  option to avoid accidental problems in daily use.\n\t* test/ruby/enc/test_case_mapping.rb: Test for above.\n\t* string.c: function 'check_case_options': fixed logical errors\n\t  (with Kimihito Matsui)\n\nFri Jan 15 20:20:20 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* regint.h (PLATFORM_UNALIGNED_WORD_ACCESS): The value of\n\t  UNALIGNED_WORD_ACCESS should be used to determine whether\n\t  unaligned word access is allowed or not. After this commit,\n\t  ./configure CPPFLAGS=\"-DUNALIGNED_WORD_ACCESS=0\" disables\n\t  unaligned word access even on platforms that support the feature.\n\nFri Jan 15 16:12:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (string1): reset heredoc indent for each string literal\n\t  so that concatenated string would not be dedented.\n\t  [ruby-core:72857] [Bug #11990]\n\nThu Jan 14 20:01:00 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/uri/generic.rb (URI::Generic#to_s): change encoding to\n\t  UTF-8 as Ruby 2.2/ by Koichi ITO <koic.ito@gmail.com>\n\t  https://github.com/ruby/ruby/pull/1188 fix GH-1188\n\nThu Jan 14 17:36:16 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_f_global_variables): add matched back references\n\t  only, as well as defined? operator.\n\nThu Jan 14 16:12:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): format exact number more exactly.\n\nThu Jan 14 15:08:43 2016  Tony Arcieri  <bascule@gmail.com>\n\n\t* Remove 512-bit DH group. It's affected by LogJam Attack.\n\t  https://weakdh.org/\n\t  [fix GH-1196][Bug #11968][ruby-core:72766]\n\nThu Jan 14 11:44:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_f_global_variables): add $1..$9 only if $~ is\n\t  set.  fix the condition removed at r14014.\n\nWed Jan 13 17:21:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* .travis.yml: removed commented-out code.\n\nWed Jan 13 17:14:54 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* .travis.yml: removed osx code. follow up with r53517\n\nWed Jan 13 16:56:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_mark): mark parent iseq to prevent dynamically\n\t  generated iseq by eval from GC.  [ruby-core:72620] [Bug #11928]\n\nWed Jan 13 03:42:58 2016  Eric Wong  <e@80x24.org>\n\n\t* class.c (Init_class_hierarchy): resolve name for rb_cObject ASAP\n\t* object.c (rb_mod_const_set): move name resolution to rb_const_set\n\t* variable.c (rb_const_set): do class resolution here\n\t  [ruby-core:72807] [Bug #11977]\n\nWed Jan 13 00:37:12 2016  Satoshi Ohmori  <sachin21dev@gmail.com>\n\n\t* man/ruby.1: fix double word typo.  [Fix GH-1194]\n\nTue Jan 12 21:01:09 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* common.mk: update URL and name for the Ruby spec suite.\n\nTue Jan 12 19:52:19 2016  sorah (Shota Fukumori)  <her@sorah.jp>\n\n\t* lib/forwardable.rb: Convert given accessors to String.\n\n\t  r53381 changed to accept only Symbol or String for accessors, but\n\t  there are several rubygems that pass classes (e.g. Array,\n\t  Hash, ...) as accessors. Prior r53381, it was accepted because Class#to_s\n\t  returns its class name. After r53381 given accessors are checked\n\t  with define_method, but it accepts only Symbol or String, otherwise\n\t  raises TypeError.\n\n\t      def_delegator Foo, :some_method\n\n\t  This change is to revert unexpected incompatibility. But this behavior\n\t  may change in the future.\n\nMon Jan 12 18:41:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: made a variable name more grammatically correct\n\nMon Jan 12 18:34:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: minor grammar fix [ci skip]\n\nMon Jan 12 16:09:09 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_casing_options.rb: Tests for option\n\t  parsing/checking for upcase/downcase/capitalize/swapcase\n\t  (see r53503; with Kimihito Matsui)\n\nMon Jan 12 16:03:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Added option parsing/checking for upcase/downcase/\n\t  capitalize/swapcase (with Kimihito Matsui)\n\nMon Jan 11 21:28:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Added flags needed for upcase/downcase\n\t  Unicode addition (with Kimihito Matsui)\n\nMon Jan 11 09:50:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: check if the API version number is consistent with\n\t  the program version number.\n\nSun Jan 10 20:57:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (compile_massign_lhs): when index ends with splat,\n\t  append rhs value to it like POSTARG, since VM_CALL_ARGS_SPLAT\n\t  splats the last argument only.  [ruby-core:72777] [Bug #11970]\n\nSun Jan 10 15:45:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/missing.h (explicit_bzero_by_memset_s): remove\n\t  inline implementation by memset_s, which needs a macro before\n\t  including headers and can cause problems in extension libraries\n\t  by the order of the macro and headers.\n\nSun Jan 10 13:41:36 2016  Eric Wong  <e@80x24.org>\n\n\t* io.c (rb_deferr): remove long obsolete global\n\nSun Jan 10 09:14:42 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/psych/lib/psych/visitors/yaml_tree.rb (visit_String):\n\t  eliminate chomp\n\t* lib/net/http.rb (connect): eliminate delete\n\t* lib/net/http/header.rb (basic_encode): ditto\n\t* lib/net/imap.rb (authenticate): eliminate gsub\n\t  (self.encode_utf7): shorten delete arg\n\t* lib/net/smtp.rb (base64_encode): eliminate gsub\n\t* lib/open-uri.rb (OpenURI.open_http): eliminate delete\n\t* lib/rss/rss.rb: ditto\n\t* lib/securerandom.rb (base64): ditto\n\t  (urlsafe_base64): eliminate delete!\n\t* lib/webrick/httpauth/digestauth.rb (split_param_value):\n\t  eliminate chop\n\t* lib/webrick/httpproxy.rb (do_CONNECT): eliminate delete\n\t  (setup_upstream_proxy_authentication): ditto\n\t  [ruby-core:72666] [Feature #11938]\n\nSat Jan  9 23:19:14 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_hash.rb (test_try_convert): Add test for\n\t  Hash.try_convert.  [Fix GH-1190]\n\nSat Jan  9 23:15:25 2016  Jon Moss  <maclover7@users.noreply.github.com>\n\n\t* ext/openssl/ossl.c: Add missing variables to documentation\n\t  examples.  [Fix GH-1189]\n\nSat Jan  9 18:25:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* symbol.h (is_attrset_id): ASET is an attrset ID.  fix\n\t  unexpected safe call instead of an ordinary ASET.\n\nSat Jan  9 10:44:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in, win32/setup.mak: extract RUBY_PROGRAM_VERSION from\n\t  RUBY_VERSION in version.h instead of RUBY_API_VERSION numbers in\n\t  include/ruby/version.h, and cut it into version numbers.\n\nSat Jan  9 07:13:33 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename PAGE_* to HEAP_PAGE_* because PAGE_SIZE is used\n\t  in Mac OS X.\n\n\t* test/ruby/test_gc.rb: catch up this fix.\n\nSat Jan  9 05:45:40 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: PAGE_BITMAP_PLANES (the number of bitmap) is 4, not 3.\n\nSat Jan  9 05:42:57 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename constant names HEAP_* to PAGE_*.\n\n\t  Keys of GC::INTERNAL_CONSTANTS are also renamed.\n\n\t* test/ruby/test_gc.rb: catch up this fix.\n\nFri Jan  8 22:30:06 2016  Akinori MUSHA  <knu@iDaemons.org>\n\n\t* doc/regexp.rdoc: [DOC] Elaborate on the \\G anchor. [ci skip]\n\nFri Jan  8 19:49:27 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: remove heap_page::body. Instead of this field,\n\t  heap_page::start field works well.\n\nFri Jan  8 19:31:52 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename rb_heap_t::page_length to rb_heap_t::total_pages.\n\n\t  `page_length' is not clear (we may understand with length of\n\t  a page).\n\nFri Jan  8 17:07:14 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: remove heap_page::heap. This field is only used to recognize\n\t  whether a page is in a tomb or not. Instead of this field,\n\t  heap_page::flags::in_tomb (1 bit field) is added.\n\n\t  Also type of heap_page::(total|free|final)_slots are changed from\n\t  int to short. 2B is enough for them.\n\nFri Jan  8 09:33:59 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_compile_with_option): move variable initialization\n\t  code to avoid maybe-uninitialized warnings by gcc 4.8.\n\nFri Jan  8 00:03:22 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* enum.c (enum_min, enum_max): do the same optimization as r53454.\n\nThu Jan  7 22:32:21 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* ruby.h: undef HAVE_BUILTIN___BUILTIN_CHOOSE_EXPR_CONSTANT_P\n\t  and HAVE_BUILTIN___BUILTIN_TYPES_COMPATIBLE_P on C++.\n\t  [ruby-core:72736] [Bug #11962]\n\nThu Jan  7 22:02:21 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* enum.c (enum_minmax): optimize object comparison in\n\t  Enumerable#minmax.\n\nThu Jan  7 14:49:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_pending_interrupt_p): no pending interrupt\n\t  before initialization.\n\n\t* thread.c (thread_raise_m, rb_thread_kill): uninitialized thread\n\t  cannot interrupt.  [ruby-core:72732] [Bug #11959]\n\nThu Jan  7 11:34:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/backward.h (ruby_show_copyright_to_die): for source\n\t  code backward compatibility.\n\n\t* ruby.c (process_options): return Qtrue to exit the process\n\t  successfully.\n\n\t* version.c (ruby_show_copyright): no longer exit.\n\nWed Jan  6 17:22:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb (OptionParser#order!): add `into` optional\n\t  keyword argument to store the results.  [Feature #11191]\n\nTue Jan  5 21:44:37 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* ChangeLog: fix wrong class name.\n\nTue Jan  5 21:43:50 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb(test_chr): added test for String#chr\n\t  [fix GH-1179]\n\nTue Jan  5 21:32:26 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_numeric.rb (test_nonzero_p): added test for Numeric#nonzero?\n\t  [fix GH-1187]\n\nTue Jan  5 11:47:23 2016  Damir Gaynetdinov  <damir.gaynetdinov@gmail.com>\n\n\t* doc/marshal.rdoc: Clarify object references example, that the\n\t  reference is same object.  [Fix GH-1156]\n\nTue Jan  5 05:06:51 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/stringio/stringio.c (strio_binmode): implement to set encoding\n\t* test/stringio/test_stringio.rb (test_binmode): new test\n\t  [ruby-core:72699] [Bug #11945]\n\nMon Jan  4 15:44:37 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* variable.c (rb_mod_deprecate_constant): [DOC] added\n\t  documentation for Module#deprecate_constant. [ci skip]\n\nMon Jan  4 15:36:38 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* thread_sync.c: [DOC] remove SizedQueue#close argument.\n\t  [ci skip]\n\nMon Jan  4 10:14:24 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/coverage/test_coverage.rb: ignored test when enabled to coverage.\n\t  It lead to crash with `make test-all`.\n\nMon Jan  4 08:10:44 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* insns.def (opt_case_dispatch): Move a comment to the\n\t  appropriate position.\n\t  [ci skip]\n\nSun Jan  3 23:55:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/rubygems/security.rb (DIGEST_ALGORITHM, KEY_ALGORITHM):\n\t  should check same name as the used constants.\n\t  [ruby-core:72674] [Bug #11940]\n\nSun Jan  3 19:22:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* aclocal.m4: add fallback file for non-aclocal environments.\n\t  [ruby-core:72683] [Bug #11942]\n\nSun Jan  3 13:56:49 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* eval_error.c (rb_print_undef): Use `rb_method_visibility_t`\n\t  instead of `int`.\n\t* eval_intern.h (rb_print_undef): ditto\n\t* proc.c (mnew_internal): ditto\n\t* vm_method.c (rb_export_method): ditto\n\t  [Misc #11649] [ruby-core:71311] [fix GH-1078]\n\nSun Jan  3 12:12:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* acinclude.m4: rename aclocal.m4, which should be generated by\n\t  aclocal.  [ruby-core:72675] [Bug #11941]\n\nSat Jan  2 21:07:55 2016  Eric Wong  <e@80x24.org>\n\n\t* thread_sync.c (queue_do_pop): avoid cast with Qfalse\n\t  (rb_szqueue_push): ditto, use queue_sleep wrapper\n\nSat Jan  2 16:16:14 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/erb.rb: Allow ERB subclass to add token easily.\n\t  [Feature #11936]\n\n\t* test/erb/test_erb.rb: ditto.\n\nSat Jan  2 14:44:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (regexp): set_yylval_num sets u1, should use nd_tag\n\t  instead of nd_state.  [ruby-core:72638] [Bug #11932]\n\nSat Jan  2 02:27:22 2016  Marc-Andre Lafortune  <ruby-core@marc-andre.ca>\n\n\t* lib/ostruct.rb: Fix case of frozen object with initializer.\n\t  Bug revealed by RubySpec [ruby-core:72639]\n\nFri Jan  1 22:01:52 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* NEWS: mention CSV's liberal_parsing option.\n\nFri Jan  1 19:38:23 2016  okkez  <okkez000@gmail.com>\n\n\t* doc/NEWS-2.3.0: fix double words typo.\n\t  [ci skip][fix GH-1183]\n\nFri Jan  1 15:28:56 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (remove_unreachable_chunk): decrease count of\n\t  call_info in removed instructions.  fix up r53402.\n\nFri Jan  1 12:05:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (remove_unreachable_chunk): remove unreferred label\n\t  to optimize away unreachable chunk.\n\nFri Jan  1 11:42:57 2016  James Edward Gray II  <james@graysoftinc.com>\n\n\t* lib/csv.rb (CSV): Add a liberal_parsing option.\n\t  Patch by Braden Anderson. [#11839]\n\t* test/csv/test_features.rb:  test liberal_parsing\n\nFri Jan  1 10:27:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/mkconfig.rb (RbConfig): prefix SDKROOT to oldincludedir\n\t  not includedir, the latter is outside the ruby installation.\n\t  [ruby-core:72496] [Bug #11881]\n\nFri Jan  1 08:53:02 2016  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/ruby/test_lazy_enumerator.rb (test_take_bad_arg): Add test\n\t  code in case of Enumerator::Lazy#take called with negative number.\n\t  [ruby-dev:49467] [Bug #11933]\n\nFri Jan  1 05:06:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parser_here_document): update indent for each line in\n\t  indented here document with single-quotes.\n\t  [ruby-core:72479] [Bug #11871]\n\nFri Jan  1 03:26:44 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (freeze): define deferred accessors before\n\t  freezing to get rid of an error when just reading frozen\n\t  OpenStruct.\n\nThu Dec 31 14:36:45 2015  Marc-Andre Lafortune  <ruby-core@marc-andre.ca>\n\n\t* lib/ostruct.rb: Fix new_ostruct_member to correctly avoid\n\t  redefinition [#11901]\n\nThu Dec 31 02:45:12 2015  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* test/ruby/test_module.rb (test_classpath): r53376 may change\n\t  the order of m.constants.\n\t  `make TESTS='-v ruby/test_class.rb ruby/test_module.rb' test-all`\n\t  may fail after that.\n\t  http://rubyci.s3.amazonaws.com/tk2-243-31075/ruby-trunk/log/20151230T164202Z.log.html.gz\n\nThu Dec 31 02:20:00 2015  Benoit Daloze  <eregontp@gmail.com>\n\n\t* common.mk (help): Fix typo.\n\nWed Dec 30 20:53:09 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http/responses.rb: Added new response class for 451 status code.\n\t* lib/net/http.rb: documentation for HTTPUnavailableForLegalReasons\n\nWed Dec 30 20:45:45 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/httpstatus.rb: Added HTTP 451 Status Code.\n\t  [fix GH-1167] Patch by @MuhammetDilmac\n\t  https://tools.ietf.org/html/draft-tbray-http-legally-restricted-status-00\n\nWed Dec 30 20:25:52 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/syntax/calling_methods.rdoc: fix old operator for safe navigation\n\t  operator. [ci skip][fix GH-1182] Patch by @dougo\n\nWed Dec 30 16:43:23 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_ord): Add test for String#ord.\n\t  [Fix GH-1181]\n\nWed Dec 30 11:28:57 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/forwardable.rb (def_instance_delegator): adjust backtrace of\n\t  method body by tail call optimization.  adjusting the delegated\n\t  target is still done by deleting backtrace.\n\n\t* lib/forwardable.rb (def_single_delegator): ditto.\n\nWed Dec 30 11:18:42 2015  Elliot Winkler  <elliot.winkler@gmail.com>\n\n\t* lib/forwardable.rb (def_instance_delegator) fix delegating to\n\t  'args' and 'block', clashing with local variables in generated\n\t  methods.  [ruby-core:72579] [Bug #11916]\n\n\t* lib/forwardable.rb (def_single_delegator): ditto.\n\nWed Dec 30 09:58:56 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* object.c (rb_class_inherited_p): search the corresponding\n\t  ancestor to prepended module from prepending class itself.\n\t  [ruby-core:72493] [Bug #11878]\n\nWed Dec 30 09:20:00 2015  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/stringio/test_io.rb (test_flag): add assertion for error when\n\t  text and binary mode are mixed.\n\t  [ruby-dev:49465] [Feature #11921]\n\nWed Dec 30 08:43:59 2015  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/stringio/test_stringio.rb (test_initialize): add test for\n\t  StringIO#initialize.  [ruby-core:72585] [Feature #11920]\n\nWed Dec 30 05:19:24 2015  Eric Wong  <e@80x24.org>\n\n\t* class.c (struct clone_const_arg): adjust for id_table\n\t  (clone_const): ditto\n\t  (clone_const_i): ditto\n\t  (rb_mod_init_copy): ditto\n\t  (rb_singleton_class_clone_and_attach): ditto\n\t  (rb_include_class_new): ditto\n\t  (include_modules_at): ditto\n\t* constant.h (rb_free_const_table): ditto\n\t* gc.c (free_const_entry_i): ditto\n\t  (rb_free_const_table): ditto\n\t  (obj_memsize_of): ditto\n\t  (mark_const_entry_i): ditto\n\t  (mark_const_tbl): ditto\n\t* internal.h (struct rb_classext_struct): ditto\n\t* object.c (rb_mod_const_set): resolve class name on assignment\n\t* variable.c (const_update): replace with const_tbl_update\n\t  (const_tbl_update): new function\n\t  (fc_i): adjust for id_table\n\t  (find_class_path): ditto\n\t  (autoload_const_set): st_update => const_tbl_update\n\t  (rb_const_remove): adjust for id_table\n\t  (sv_i): ditto\n\t  (rb_local_constants_i): ditto\n\t  (rb_local_constants): ditto\n\t  (rb_mod_const_at): ditto\n\t  (rb_mod_const_set): ditto\n\t  (rb_const_lookup): ditto\n\t  [ruby-core:72112] [Feature #11614]\n\nWed Dec 30 04:10:13 2015  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* thread_pthread.c (rb_thread_create_timer_thread): destroy attr even\n\t  if pthread_create() failed.\n\nWed Dec 30 02:55:09 2015  Eric Wong  <e@80x24.org>\n\n\t* thread_pthread.c (setup_communication_pipe): delay setting owner\n\t  (rb_thread_create_timer_thread): until thread creation succeeds\n\t  [ruby-core:72590] [Bug #11922]\n\nTue Dec 29 19:12:46 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (proc_options): -W command line option should be able to\n\t  override -w in RUBYOPT environment variable.\n\nTue Dec 29 17:54:16 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval.c (ignored_block): warn if a block is given to `using`,\n\t  which is probably for `Module.new`.\n\nTue Dec 29 12:48:34 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (OpenStruct): make respond_to? working on\n\t  just-allocated objects for workaround of Psych.\n\t  [ruby-core:72501] [Bug #11884]\n\nTue Dec 29 10:35:00 2015  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/mkmf/test_have_func.rb (test_have_func):\n\t  Add assertion to examine the existence of HAVE_RUBY_INIT.\n\n\t* test/mkmf/test_have_func.rb (test_not_have_func):\n\t  Add assertion to examine the absence of HAVE_RUBY_INIT.\n\nTue Dec 29 06:50:42 2015  Eric Wong  <e@80x24.org>\n\n\t* thread_sync.c: static classes\n\nTue Dec 29 05:30:30 2015  Eric Wong  <e@80x24.org>\n\n\t* lib/resolv.rb (Resolv::IPv6.create): avoid modifying frozen\n\t* test/resolv/test_dns.rb (test_ipv6_create): test for above\n\t  [Bug #11910] [ruby-core:72559]\n\nMon Dec 28 14:55:57 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (TestString#test_rstrip_bang): Add test\n\t  for String#rstrip!.  [Fix GH-1176]\n\nMon Dec 28 09:18:53 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (TestString#test_lstrip_bang): Add test\n\t  for String#lstrip!.  [Fix GH-1176]\n\nSun Dec 27 23:32:26 2015  Masaki Suketa <masaki.suketa@nifty.ne.jp>\n\n\t* ext/win32ole/win32ole.c (ole_variant2val): refactoring.\n\nSun Dec 27 21:14:42 2015  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* process.c (rb_execarg_parent_start1): need to convert the encoding to\n\t  ospath's one.\n\nSun Dec 27 20:54:22 2015  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* process.c: use rb_w32_uchdir() instead of plain chdir() on Windows.\n\t  reported by naruse via twitter.\n\n\t* process.c (rb_execarg_addopt): need to convert the encoding to\n\t  ospath's one.\n\nSun Dec 27 20:00:31 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* enc/x_emoji.h: fix dead-link.\n\nSun Dec 27 19:55:55 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/NEWS-2.3.0: fix a typo.\n\nSun Dec 27 18:08:15 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* string.c (rb_str_lstrip_bang, rb_str_rstrip_bang): [DOC] Fix\n\t  ruby-doc comments for String#rstrip! and lstrip!.  It looks like\n\t  dropped bang.  [Fix GH-1175]\n\nSun Dec 27 15:14:20 2015  Eric Wong  <e@80x24.org>\n\n\t* io.c (io_getpartial): remove unused kwarg from template\n\t* test/ruby/test_io.rb (test_readpartial_bad_args): new\n\t  [Bug #11885]\n\nSun Dec 27 11:50:53 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_rstrip, test_lstrip): Add tests\n\t  for String#lstrip and rstrip.  The test cases are used from\n\t  string.c ruby-doc comments.  [Fix GH-1174]\n\nSun Dec 27 11:47:46 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_insert): Add test for\n\t  String#insert.  The test cases are written in string.c\n\t  comments as a reference.  [Fix GH-1173]\n\nSun Dec 27 11:03:33 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (show_bitstack): trace stack_type value if yydebug.\n\nSun Dec 27 10:03:14 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* enc/depend (enc, trans): fix version dependency, shared object\n\t  files depend on the RUBY_SO_NAME value for runtime link.\n\nSun Dec 27 09:47:20 2015  Masaki Suketa <masaki.suketa@nifty.ne.jp>\n\n\t* ext/win32ole/win32ole.c (ole_vstr2wc, ole_variant2val): fix blank\n\t  string conversion.\n\t  [Bug #11880]\n\t  Thanks Akio Tajima for the patch!\n\nSun Dec 27 09:34:53 2015  craft4coder  <yooobuntu@163.com>\n\n\t* doc/extension.rdoc: [DOC] `nul` should be uppercase.\n\t  change 'nul' => 'NUL'.  [Fix GH-1172]\n\nSat Dec 26 18:29:01 2015  Kouhei Sutou  <kou@cozmixng.org>\n\n\t* lib/xmlrpc/client.rb: Support SSL options in async methods of\n\t  XMLRPC::Client.\n\t  [Bug #11489]\n\t  Reported by Aleksandar Kostadinov. Thanks!!!\n\nSat Dec 26 11:26:38 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* miniinit.c (Init_enc): add some common aliases of built-in\n\t  encodings.  [ruby-core:72481] [Bug #11872]\n\nFri Dec 25 22:43:26 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: extract RUBY_RELEASE_DAY at generating Makefile.\n\n\t* version.h (RUBY_RELEASE_DATE): construct from RUBY_RELEASE_YEAR,\n\t  RUBY_RELEASE_MONTH, and RUBY_RELEASE_DAY.\n\nFri Dec 25 21:33:06 2015  Yukihiro Matsumoto  <matz@ruby-lang.org>\n\n\t* version.h (RUBY_VERSION): 2.4.0 development has started.\n\nFri Dec 25 14:12:12 2015  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* doc/ChangeLog-2.3.0, ext/tk/lib/tkextlib/SUPPORT_STATUS,\n\t  include/ruby/version.h: minor grammar fixes [ci skip]\n\nFri Dec 25 08:23:22 2015  Tadashi Saito  <tad.a.digger@gmail.com>\n\n\t* compile.c, cont.c, doc, man: fix common misspelling.\n\t  [ruby-core:72466] [Bug #11870]\n\n\nFor the changes before 2.3.0, see doc/ChangeLog-2.3.0\nFor the changes before 2.2.0, see doc/ChangeLog-2.2.0\nFor the changes before 2.1.0, see doc/ChangeLog-2.1.0\nFor the changes before 2.0.0, see doc/ChangeLog-2.0.0\nFor the changes before 1.9.3, see doc/ChangeLog-1.9.3\nFor the changes before 1.8.0, see doc/ChangeLog-1.8.0\n\nLocal variables:\ncoding: us-ascii\nadd-log-time-format: (lambda ()\n  (let* ((time (current-time))\n\t (system-time-locale \"C\")\n\t (diff (+ (cadr time) 32400))\n\t (lo (% diff 65536))\n\t (hi (+ (car time) (/ diff 65536))))\n  (format-time-string \"%a %b %e %H:%M:%S %Y\" (list hi lo) t)))\nindent-tabs-mode: t\ntab-width: 8\nchange-log-indent-text: 2\nend:\nvim: tabstop=8 shiftwidth=2\n", "# frozen_string_literal: false\n# = net/smtp.rb\n#\n# Copyright (c) 1999-2007 Yukihiro Matsumoto.\n#\n# Copyright (c) 1999-2007 Minero Aoki.\n#\n# Written & maintained by Minero Aoki <aamine@loveruby.net>.\n#\n# Documented by William Webber and Minero Aoki.\n#\n# This program is free software. You can re-distribute and/or\n# modify this program under the same terms as Ruby itself.\n#\n# NOTE: You can find Japanese version of this document at:\n# http://www.ruby-lang.org/ja/man/html/net_smtp.html\n#\n# $Id$\n#\n# See Net::SMTP for documentation.\n#\n\nrequire 'net/protocol'\nrequire 'digest/md5'\nrequire 'timeout'\nbegin\n  require 'openssl'\nrescue LoadError\nend\n\nmodule Net\n\n  # Module mixed in to all SMTP error classes\n  module SMTPError\n    # This *class* is a module for backward compatibility.\n    # In later release, this module becomes a class.\n  end\n\n  # Represents an SMTP authentication error.\n  class SMTPAuthenticationError < ProtoAuthError\n    include SMTPError\n  end\n\n  # Represents SMTP error code 420 or 450, a temporary error.\n  class SMTPServerBusy < ProtoServerError\n    include SMTPError\n  end\n\n  # Represents an SMTP command syntax error (error code 500)\n  class SMTPSyntaxError < ProtoSyntaxError\n    include SMTPError\n  end\n\n  # Represents a fatal SMTP error (error code 5xx, except for 500)\n  class SMTPFatalError < ProtoFatalError\n    include SMTPError\n  end\n\n  # Unexpected reply code returned from server.\n  class SMTPUnknownError < ProtoUnknownError\n    include SMTPError\n  end\n\n  # Command is not supported on server.\n  class SMTPUnsupportedCommand < ProtocolError\n    include SMTPError\n  end\n\n  #\n  # == What is This Library?\n  #\n  # This library provides functionality to send internet\n  # mail via SMTP, the Simple Mail Transfer Protocol. For details of\n  # SMTP itself, see [RFC2821] (http://www.ietf.org/rfc/rfc2821.txt).\n  #\n  # == What is This Library NOT?\n  #\n  # This library does NOT provide functions to compose internet mails.\n  # You must create them by yourself. If you want better mail support,\n  # try RubyMail or TMail or search for alternatives in\n  # {RubyGems.org}[https://rubygems.org/] or {The Ruby\n  # Toolbox}[https://www.ruby-toolbox.com/].\n  #\n  # FYI: the official documentation on internet mail is: [RFC2822] (http://www.ietf.org/rfc/rfc2822.txt).\n  #\n  # == Examples\n  #\n  # === Sending Messages\n  #\n  # You must open a connection to an SMTP server before sending messages.\n  # The first argument is the address of your SMTP server, and the second\n  # argument is the port number. Using SMTP.start with a block is the simplest\n  # way to do this. This way, the SMTP connection is closed automatically\n  # after the block is executed.\n  #\n  #     require 'net/smtp'\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       # Use the SMTP object smtp only in this block.\n  #     end\n  #\n  # Replace 'your.smtp.server' with your SMTP server. Normally\n  # your system manager or internet provider supplies a server\n  # for you.\n  #\n  # Then you can send messages.\n  #\n  #     msgstr = <<END_OF_MESSAGE\n  #     From: Your Name <your@mail.address>\n  #     To: Destination Address <someone@example.com>\n  #     Subject: test message\n  #     Date: Sat, 23 Jun 2001 16:26:43 +0900\n  #     Message-Id: <unique.message.id.string@example.com>\n  #\n  #     This is a test message.\n  #     END_OF_MESSAGE\n  #\n  #     require 'net/smtp'\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       smtp.send_message msgstr,\n  #                         'your@mail.address',\n  #                         'his_address@example.com'\n  #     end\n  #\n  # === Closing the Session\n  #\n  # You MUST close the SMTP session after sending messages, by calling\n  # the #finish method:\n  #\n  #     # using SMTP#finish\n  #     smtp = Net::SMTP.start('your.smtp.server', 25)\n  #     smtp.send_message msgstr, 'from@address', 'to@address'\n  #     smtp.finish\n  #\n  # You can also use the block form of SMTP.start/SMTP#start.  This closes\n  # the SMTP session automatically:\n  #\n  #     # using block form of SMTP.start\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       smtp.send_message msgstr, 'from@address', 'to@address'\n  #     end\n  #\n  # I strongly recommend this scheme.  This form is simpler and more robust.\n  #\n  # === HELO domain\n  #\n  # In almost all situations, you must provide a third argument\n  # to SMTP.start/SMTP#start. This is the domain name which you are on\n  # (the host to send mail from). It is called the \"HELO domain\".\n  # The SMTP server will judge whether it should send or reject\n  # the SMTP session by inspecting the HELO domain.\n  #\n  #     Net::SMTP.start('your.smtp.server', 25,\n  #                     'mail.from.domain') { |smtp| ... }\n  #\n  # === SMTP Authentication\n  #\n  # The Net::SMTP class supports three authentication schemes;\n  # PLAIN, LOGIN and CRAM MD5.  (SMTP Authentication: [RFC2554])\n  # To use SMTP authentication, pass extra arguments to\n  # SMTP.start/SMTP#start.\n  #\n  #     # PLAIN\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :plain)\n  #     # LOGIN\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :login)\n  #\n  #     # CRAM MD5\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :cram_md5)\n  #\n  class SMTP\n\n    Revision = %q$Revision$.split[1]\n\n    # The default SMTP port number, 25.\n    def SMTP.default_port\n      25\n    end\n\n    # The default mail submission port number, 587.\n    def SMTP.default_submission_port\n      587\n    end\n\n    # The default SMTPS port number, 465.\n    def SMTP.default_tls_port\n      465\n    end\n\n    class << self\n      alias default_ssl_port default_tls_port\n    end\n\n    def SMTP.default_ssl_context\n      OpenSSL::SSL::SSLContext.new\n    end\n\n    #\n    # Creates a new Net::SMTP object.\n    #\n    # +address+ is the hostname or ip address of your SMTP\n    # server.  +port+ is the port to connect to; it defaults to\n    # port 25.\n    #\n    # This method does not open the TCP connection.  You can use\n    # SMTP.start instead of SMTP.new if you want to do everything\n    # at once.  Otherwise, follow SMTP.new with SMTP#start.\n    #\n    def initialize(address, port = nil)\n      @address = address\n      @port = (port || SMTP.default_port)\n      @esmtp = true\n      @capabilities = nil\n      @socket = nil\n      @started = false\n      @open_timeout = 30\n      @read_timeout = 60\n      @error_occurred = false\n      @debug_output = nil\n      @tls = false\n      @starttls = false\n      @ssl_context = nil\n    end\n\n    # Provide human-readable stringification of class state.\n    def inspect\n      \"#<#{self.class} #{@address}:#{@port} started=#{@started}>\"\n    end\n\n    #\n    # Set whether to use ESMTP or not.  This should be done before\n    # calling #start.  Note that if #start is called in ESMTP mode,\n    # and the connection fails due to a ProtocolError, the SMTP\n    # object will automatically switch to plain SMTP mode and\n    # retry (but not vice versa).\n    #\n    attr_accessor :esmtp\n\n    # +true+ if the SMTP object uses ESMTP (which it does by default).\n    alias :esmtp? :esmtp\n\n    # true if server advertises STARTTLS.\n    # You cannot get valid value before opening SMTP session.\n    def capable_starttls?\n      capable?('STARTTLS')\n    end\n\n    def capable?(key)\n      return nil unless @capabilities\n      @capabilities[key] ? true : false\n    end\n    private :capable?\n\n    # true if server advertises AUTH PLAIN.\n    # You cannot get valid value before opening SMTP session.\n    def capable_plain_auth?\n      auth_capable?('PLAIN')\n    end\n\n    # true if server advertises AUTH LOGIN.\n    # You cannot get valid value before opening SMTP session.\n    def capable_login_auth?\n      auth_capable?('LOGIN')\n    end\n\n    # true if server advertises AUTH CRAM-MD5.\n    # You cannot get valid value before opening SMTP session.\n    def capable_cram_md5_auth?\n      auth_capable?('CRAM-MD5')\n    end\n\n    def auth_capable?(type)\n      return nil unless @capabilities\n      return false unless @capabilities['AUTH']\n      @capabilities['AUTH'].include?(type)\n    end\n    private :auth_capable?\n\n    # Returns supported authentication methods on this server.\n    # You cannot get valid value before opening SMTP session.\n    def capable_auth_types\n      return [] unless @capabilities\n      return [] unless @capabilities['AUTH']\n      @capabilities['AUTH']\n    end\n\n    # true if this object uses SMTP/TLS (SMTPS).\n    def tls?\n      @tls\n    end\n\n    alias ssl? tls?\n\n    # Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for\n    # this object.  Must be called before the connection is established\n    # to have any effect.  +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_tls(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @starttls\n      @tls = true\n      @ssl_context = context\n    end\n\n    alias enable_ssl enable_tls\n\n    # Disables SMTP/TLS for this object.  Must be called before the\n    # connection is established to have any effect.\n    def disable_tls\n      @tls = false\n      @ssl_context = nil\n    end\n\n    alias disable_ssl disable_tls\n\n    # Returns truth value if this object uses STARTTLS.\n    # If this object always uses STARTTLS, returns :always.\n    # If this object uses STARTTLS when the server support TLS, returns :auto.\n    def starttls?\n      @starttls\n    end\n\n    # true if this object uses STARTTLS.\n    def starttls_always?\n      @starttls == :always\n    end\n\n    # true if this object uses STARTTLS when server advertises STARTTLS.\n    def starttls_auto?\n      @starttls == :auto\n    end\n\n    # Enables SMTP/TLS (STARTTLS) for this object.\n    # +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_starttls(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @tls\n      @starttls = :always\n      @ssl_context = context\n    end\n\n    # Enables SMTP/TLS (STARTTLS) for this object if server accepts.\n    # +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_starttls_auto(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @tls\n      @starttls = :auto\n      @ssl_context = context\n    end\n\n    # Disables SMTP/TLS (STARTTLS) for this object.  Must be called\n    # before the connection is established to have any effect.\n    def disable_starttls\n      @starttls = false\n      @ssl_context = nil\n    end\n\n    # The address of the SMTP server to connect to.\n    attr_reader :address\n\n    # The port number of the SMTP server to connect to.\n    attr_reader :port\n\n    # Seconds to wait while attempting to open a connection.\n    # If the connection cannot be opened within this time, a\n    # Net::OpenTimeout is raised. The default value is 30 seconds.\n    attr_accessor :open_timeout\n\n    # Seconds to wait while reading one block (by one read(2) call).\n    # If the read(2) call does not complete within this time, a\n    # Net::ReadTimeout is raised. The default value is 60 seconds.\n    attr_reader :read_timeout\n\n    # Set the number of seconds to wait until timing-out a read(2)\n    # call.\n    def read_timeout=(sec)\n      @socket.read_timeout = sec if @socket\n      @read_timeout = sec\n    end\n\n    #\n    # WARNING: This method causes serious security holes.\n    # Use this method for only debugging.\n    #\n    # Set an output stream for debug logging.\n    # You must call this before #start.\n    #\n    #   # example\n    #   smtp = Net::SMTP.new(addr, port)\n    #   smtp.set_debug_output $stderr\n    #   smtp.start do |smtp|\n    #     ....\n    #   end\n    #\n    def debug_output=(arg)\n      @debug_output = arg\n    end\n\n    alias set_debug_output debug_output=\n\n    #\n    # SMTP session control\n    #\n\n    #\n    # Creates a new Net::SMTP object and connects to the server.\n    #\n    # This method is equivalent to:\n    #\n    #   Net::SMTP.new(address, port).start(helo_domain, account, password, authtype)\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('your.smtp.server') do |smtp|\n    #       smtp.send_message msgstr, 'from@example.com', ['dest@example.com']\n    #     end\n    #\n    # === Block Usage\n    #\n    # If called with a block, the newly-opened Net::SMTP object is yielded\n    # to the block, and automatically closed when the block finishes.  If called\n    # without a block, the newly-opened Net::SMTP object is returned to\n    # the caller, and it is the caller's responsibility to close it when\n    # finished.\n    #\n    # === Parameters\n    #\n    # +address+ is the hostname or ip address of your smtp server.\n    #\n    # +port+ is the port to connect to; it defaults to port 25.\n    #\n    # +helo+ is the _HELO_ _domain_ provided by the client to the\n    # server (see overview comments); it defaults to 'localhost'.\n    #\n    # The remaining arguments are used for SMTP authentication, if required\n    # or desired.  +user+ is the account name; +secret+ is your password\n    # or other authentication token; and +authtype+ is the authentication\n    # type, one of :plain, :login, or :cram_md5.  See the discussion of\n    # SMTP Authentication in the overview notes.\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPAuthenticationError\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::OpenTimeout\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def SMTP.start(address, port = nil, helo = 'localhost',\n                   user = nil, secret = nil, authtype = nil,\n                   &block)   # :yield: smtp\n      new(address, port).start(helo, user, secret, authtype, &block)\n    end\n\n    # +true+ if the SMTP session has been started.\n    def started?\n      @started\n    end\n\n    #\n    # Opens a TCP connection and starts the SMTP session.\n    #\n    # === Parameters\n    #\n    # +helo+ is the _HELO_ _domain_ that you'll dispatch mails from; see\n    # the discussion in the overview notes.\n    #\n    # If both of +user+ and +secret+ are given, SMTP authentication\n    # will be attempted using the AUTH command.  +authtype+ specifies\n    # the type of authentication to attempt; it must be one of\n    # :login, :plain, and :cram_md5.  See the notes on SMTP Authentication\n    # in the overview.\n    #\n    # === Block Usage\n    #\n    # When this methods is called with a block, the newly-started SMTP\n    # object is yielded to the block, and automatically closed after\n    # the block call finishes.  Otherwise, it is the caller's\n    # responsibility to close the session when finished.\n    #\n    # === Example\n    #\n    # This is very similar to the class method SMTP.start.\n    #\n    #     require 'net/smtp'\n    #     smtp = Net::SMTP.new('smtp.mail.server', 25)\n    #     smtp.start(helo_domain, account, password, authtype) do |smtp|\n    #       smtp.send_message msgstr, 'from@example.com', ['dest@example.com']\n    #     end\n    #\n    # The primary use of this method (as opposed to SMTP.start)\n    # is probably to set debugging (#set_debug_output) or ESMTP\n    # (#esmtp=), which must be done before the session is\n    # started.\n    #\n    # === Errors\n    #\n    # If session has already been started, an IOError will be raised.\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPAuthenticationError\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::OpenTimeout\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def start(helo = 'localhost',\n              user = nil, secret = nil, authtype = nil)   # :yield: smtp\n      if block_given?\n        begin\n          do_start helo, user, secret, authtype\n          return yield(self)\n        ensure\n          do_finish\n        end\n      else\n        do_start helo, user, secret, authtype\n        return self\n      end\n    end\n\n    # Finishes the SMTP session and closes TCP connection.\n    # Raises IOError if not started.\n    def finish\n      raise IOError, 'not yet started' unless started?\n      do_finish\n    end\n\n    private\n\n    def tcp_socket(address, port)\n      TCPSocket.open address, port\n    end\n\n    def do_start(helo_domain, user, secret, authtype)\n      raise IOError, 'SMTP session already started' if @started\n      if user or secret\n        check_auth_method(authtype || DEFAULT_AUTH_TYPE)\n        check_auth_args user, secret\n      end\n      s = Timeout.timeout(@open_timeout, Net::OpenTimeout) do\n        tcp_socket(@address, @port)\n      end\n      logging \"Connection opened: #{@address}:#{@port}\"\n      @socket = new_internet_message_io(tls? ? tlsconnect(s) : s)\n      check_response critical { recv_response() }\n      do_helo helo_domain\n      if starttls_always? or (capable_starttls? and starttls_auto?)\n        unless capable_starttls?\n          raise SMTPUnsupportedCommand,\n              \"STARTTLS is not supported on this server\"\n        end\n        starttls\n        @socket = new_internet_message_io(tlsconnect(s))\n        # helo response may be different after STARTTLS\n        do_helo helo_domain\n      end\n      authenticate user, secret, (authtype || DEFAULT_AUTH_TYPE) if user\n      @started = true\n    ensure\n      unless @started\n        # authentication failed, cancel connection.\n        s.close if s and not s.closed?\n        @socket = nil\n      end\n    end\n\n    def ssl_socket(socket, context)\n      OpenSSL::SSL::SSLSocket.new socket, context\n    end\n\n    def tlsconnect(s)\n      verified = false\n      s = ssl_socket(s, @ssl_context)\n      logging \"TLS connection started\"\n      s.sync_close = true\n      s.connect\n      if @ssl_context.verify_mode != OpenSSL::SSL::VERIFY_NONE\n        s.post_connection_check(@address)\n      end\n      verified = true\n      s\n    ensure\n      s.close unless verified\n    end\n\n    def new_internet_message_io(s)\n      io = InternetMessageIO.new(s)\n      io.read_timeout = @read_timeout\n      io.debug_output = @debug_output\n      io\n    end\n\n    def do_helo(helo_domain)\n      res = @esmtp ? ehlo(helo_domain) : helo(helo_domain)\n      @capabilities = res.capabilities\n    rescue SMTPError\n      if @esmtp\n        @esmtp = false\n        @error_occurred = false\n        retry\n      end\n      raise\n    end\n\n    def do_finish\n      quit if @socket and not @socket.closed? and not @error_occurred\n    ensure\n      @started = false\n      @error_occurred = false\n      @socket.close if @socket and not @socket.closed?\n      @socket = nil\n    end\n\n    #\n    # Message Sending\n    #\n\n    public\n\n    #\n    # Sends +msgstr+ as a message.  Single CR (\"\\r\") and LF (\"\\n\") found\n    # in the +msgstr+, are converted into the CR LF pair.  You cannot send a\n    # binary message with this method. +msgstr+ should include both\n    # the message headers and body.\n    #\n    # +from_addr+ is a String representing the source mail address.\n    #\n    # +to_addr+ is a String or Strings or Array of Strings, representing\n    # the destination mail address or addresses.\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('smtp.example.com') do |smtp|\n    #       smtp.send_message msgstr,\n    #                         'from@example.com',\n    #                         ['dest@example.com', 'dest2@example.com']\n    #     end\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def send_message(msgstr, from_addr, *to_addrs)\n      raise IOError, 'closed session' unless @socket\n      mailfrom from_addr\n      rcptto_list(to_addrs) {data msgstr}\n    end\n\n    alias send_mail send_message\n    alias sendmail send_message   # obsolete\n\n    #\n    # Opens a message writer stream and gives it to the block.\n    # The stream is valid only in the block, and has these methods:\n    #\n    # puts(str = '')::       outputs STR and CR LF.\n    # print(str)::           outputs STR.\n    # printf(fmt, *args)::   outputs sprintf(fmt,*args).\n    # write(str)::           outputs STR and returns the length of written bytes.\n    # <<(str)::              outputs STR and returns self.\n    #\n    # If a single CR (\"\\r\") or LF (\"\\n\") is found in the message,\n    # it is converted to the CR LF pair.  You cannot send a binary\n    # message with this method.\n    #\n    # === Parameters\n    #\n    # +from_addr+ is a String representing the source mail address.\n    #\n    # +to_addr+ is a String or Strings or Array of Strings, representing\n    # the destination mail address or addresses.\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('smtp.example.com', 25) do |smtp|\n    #       smtp.open_message_stream('from@example.com', ['dest@example.com']) do |f|\n    #         f.puts 'From: from@example.com'\n    #         f.puts 'To: dest@example.com'\n    #         f.puts 'Subject: test message'\n    #         f.puts\n    #         f.puts 'This is a test message.'\n    #       end\n    #     end\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def open_message_stream(from_addr, *to_addrs, &block)   # :yield: stream\n      raise IOError, 'closed session' unless @socket\n      mailfrom from_addr\n      rcptto_list(to_addrs) {data(&block)}\n    end\n\n    alias ready open_message_stream   # obsolete\n\n    #\n    # Authentication\n    #\n\n    public\n\n    DEFAULT_AUTH_TYPE = :plain\n\n    def authenticate(user, secret, authtype = DEFAULT_AUTH_TYPE)\n      check_auth_method authtype\n      check_auth_args user, secret\n      send auth_method(authtype), user, secret\n    end\n\n    def auth_plain(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        get_response('AUTH PLAIN ' + base64_encode(\"\\0#{user}\\0#{secret}\"))\n      }\n      check_auth_response res\n      res\n    end\n\n    def auth_login(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        check_auth_continue get_response('AUTH LOGIN')\n        check_auth_continue get_response(base64_encode(user))\n        get_response(base64_encode(secret))\n      }\n      check_auth_response res\n      res\n    end\n\n    def auth_cram_md5(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        res0 = get_response('AUTH CRAM-MD5')\n        check_auth_continue res0\n        crammed = cram_md5_response(secret, res0.cram_md5_challenge)\n        get_response(base64_encode(\"#{user} #{crammed}\"))\n      }\n      check_auth_response res\n      res\n    end\n\n    private\n\n    def check_auth_method(type)\n      unless respond_to?(auth_method(type), true)\n        raise ArgumentError, \"wrong authentication type #{type}\"\n      end\n    end\n\n    def auth_method(type)\n      \"auth_#{type.to_s.downcase}\".intern\n    end\n\n    def check_auth_args(user, secret, authtype = DEFAULT_AUTH_TYPE)\n      unless user\n        raise ArgumentError, 'SMTP-AUTH requested but missing user name'\n      end\n      unless secret\n        raise ArgumentError, 'SMTP-AUTH requested but missing secret phrase'\n      end\n    end\n\n    def base64_encode(str)\n      # expects \"str\" may not become too long\n      [str].pack('m0')\n    end\n\n    IMASK = 0x36\n    OMASK = 0x5c\n\n    # CRAM-MD5: [RFC2195]\n    def cram_md5_response(secret, challenge)\n      tmp = Digest::MD5.digest(cram_secret(secret, IMASK) + challenge)\n      Digest::MD5.hexdigest(cram_secret(secret, OMASK) + tmp)\n    end\n\n    CRAM_BUFSIZE = 64\n\n    def cram_secret(secret, mask)\n      secret = Digest::MD5.digest(secret) if secret.size > CRAM_BUFSIZE\n      buf = secret.ljust(CRAM_BUFSIZE, \"\\0\")\n      0.upto(buf.size - 1) do |i|\n        buf[i] = (buf[i].ord ^ mask).chr\n      end\n      buf\n    end\n\n    #\n    # SMTP command dispatcher\n    #\n\n    public\n\n    # Aborts the current mail transaction\n\n    def rset\n      getok('RSET')\n    end\n\n    def starttls\n      getok('STARTTLS')\n    end\n\n    def helo(domain)\n      getok(\"HELO #{domain}\")\n    end\n\n    def ehlo(domain)\n      getok(\"EHLO #{domain}\")\n    end\n\n    def mailfrom(from_addr)\n      if $SAFE > 0\n        raise SecurityError, 'tainted from_addr' if from_addr.tainted?\n      end\n      getok(\"MAIL FROM:<#{from_addr}>\")\n    end\n\n    def rcptto_list(to_addrs)\n      raise ArgumentError, 'mail destination not given' if to_addrs.empty?\n      ok_users = []\n      unknown_users = []\n      to_addrs.flatten.each do |addr|\n        begin\n          rcptto addr\n        rescue SMTPAuthenticationError\n          unknown_users << addr.dump\n        else\n          ok_users << addr\n        end\n      end\n      raise ArgumentError, 'mail destination not given' if ok_users.empty?\n      ret = yield\n      unless unknown_users.empty?\n        raise SMTPAuthenticationError, \"failed to deliver for #{unknown_users.join(', ')}\"\n      end\n      ret\n    end\n\n    def rcptto(to_addr)\n      if $SAFE > 0\n        raise SecurityError, 'tainted to_addr' if to_addr.tainted?\n      end\n      getok(\"RCPT TO:<#{to_addr}>\")\n    end\n\n    # This method sends a message.\n    # If +msgstr+ is given, sends it as a message.\n    # If block is given, yield a message writer stream.\n    # You must write message before the block is closed.\n    #\n    #   # Example 1 (by string)\n    #   smtp.data(<<EndMessage)\n    #   From: john@example.com\n    #   To: betty@example.com\n    #   Subject: I found a bug\n    #\n    #   Check vm.c:58879.\n    #   EndMessage\n    #\n    #   # Example 2 (by block)\n    #   smtp.data {|f|\n    #     f.puts \"From: john@example.com\"\n    #     f.puts \"To: betty@example.com\"\n    #     f.puts \"Subject: I found a bug\"\n    #     f.puts \"\"\n    #     f.puts \"Check vm.c:58879.\"\n    #   }\n    #\n    def data(msgstr = nil, &block)   #:yield: stream\n      if msgstr and block\n        raise ArgumentError, \"message and block are exclusive\"\n      end\n      unless msgstr or block\n        raise ArgumentError, \"message or block is required\"\n      end\n      res = critical {\n        check_continue get_response('DATA')\n        socket_sync_bak = @socket.io.sync\n        begin\n          @socket.io.sync = false\n          if msgstr\n            @socket.write_message msgstr\n          else\n            @socket.write_message_by_block(&block)\n          end\n        ensure\n          @socket.io.flush\n          @socket.io.sync = socket_sync_bak\n        end\n        recv_response()\n      }\n      check_response res\n      res\n    end\n\n    def quit\n      getok('QUIT')\n    end\n\n    private\n\n    def getok(reqline)\n      res = critical {\n        @socket.writeline reqline\n        recv_response()\n      }\n      check_response res\n      res\n    end\n\n    def get_response(reqline)\n      @socket.writeline reqline\n      recv_response()\n    end\n\n    def recv_response\n      buf = ''\n      while true\n        line = @socket.readline\n        buf << line << \"\\n\"\n        break unless line[3,1] == '-'   # \"210-PIPELINING\"\n      end\n      Response.parse(buf)\n    end\n\n    def critical\n      return Response.parse('200 dummy reply code') if @error_occurred\n      begin\n        return yield()\n      rescue Exception\n        @error_occurred = true\n        raise\n      end\n    end\n\n    def check_response(res)\n      unless res.success?\n        raise res.exception_class, res.message\n      end\n    end\n\n    def check_continue(res)\n      unless res.continue?\n        raise SMTPUnknownError, \"could not get 3xx (#{res.status}: #{res.string})\"\n      end\n    end\n\n    def check_auth_response(res)\n      unless res.success?\n        raise SMTPAuthenticationError, res.message\n      end\n    end\n\n    def check_auth_continue(res)\n      unless res.continue?\n        raise res.exception_class, res.message\n      end\n    end\n\n    # This class represents a response received by the SMTP server. Instances\n    # of this class are created by the SMTP class; they should not be directly\n    # created by the user. For more information on SMTP responses, view\n    # {Section 4.2 of RFC 5321}[http://tools.ietf.org/html/rfc5321#section-4.2]\n    class Response\n      # Parses the received response and separates the reply code and the human\n      # readable reply text\n      def self.parse(str)\n        new(str[0,3], str)\n      end\n\n      # Creates a new instance of the Response class and sets the status and\n      # string attributes\n      def initialize(status, string)\n        @status = status\n        @string = string\n      end\n\n      # The three digit reply code of the SMTP response\n      attr_reader :status\n\n      # The human readable reply text of the SMTP response\n      attr_reader :string\n\n      # Takes the first digit of the reply code to determine the status type\n      def status_type_char\n        @status[0, 1]\n      end\n\n      # Determines whether the response received was a Positive Completion\n      # reply (2xx reply code)\n      def success?\n        status_type_char() == '2'\n      end\n\n      # Determines whether the response received was a Positive Intermediate\n      # reply (3xx reply code)\n      def continue?\n        status_type_char() == '3'\n      end\n\n      # The first line of the human readable reply text\n      def message\n        @string.lines.first\n      end\n\n      # Creates a CRAM-MD5 challenge. You can view more information on CRAM-MD5\n      # on Wikipedia: http://en.wikipedia.org/wiki/CRAM-MD5\n      def cram_md5_challenge\n        @string.split(/ /)[1].unpack('m')[0]\n      end\n\n      # Returns a hash of the human readable reply text in the response if it\n      # is multiple lines. It does not return the first line. The key of the\n      # hash is the first word the value of the hash is an array with each word\n      # thereafter being a value in the array\n      def capabilities\n        return {} unless @string[3, 1] == '-'\n        h = {}\n        @string.lines.drop(1).each do |line|\n          k, *v = line[4..-1].chomp.split\n          h[k] = v\n        end\n        h\n      end\n\n      # Determines whether there was an error and raises the appropriate error\n      # based on the reply code of the response\n      def exception_class\n        case @status\n        when /\\A4/  then SMTPServerBusy\n        when /\\A50/ then SMTPSyntaxError\n        when /\\A53/ then SMTPAuthenticationError\n        when /\\A5/  then SMTPFatalError\n        else             SMTPUnknownError\n        end\n      end\n    end\n\n    def logging(msg)\n      @debug_output << msg + \"\\n\" if @debug_output\n    end\n\n  end   # class SMTP\n\n  SMTPSession = SMTP # :nodoc:\n\nend\n", "# frozen_string_literal: false\nrequire 'net/smtp'\nrequire 'stringio'\nrequire 'test/unit'\n\nmodule Net\n  class TestSMTP < Test::Unit::TestCase\n    class FakeSocket\n      def initialize out = \"250 OK\\n\"\n        @write_io = StringIO.new\n        @read_io  = StringIO.new out\n      end\n\n      def writeline line\n        @write_io.write \"#{line}\\r\\n\"\n      end\n\n      def readline\n        line = @read_io.gets\n        raise 'ran out of input' unless line\n        line.chop\n      end\n    end\n\n    def test_critical\n      smtp = Net::SMTP.new 'localhost', 25\n\n      assert_raise RuntimeError do\n        smtp.send :critical do\n          raise 'fail on purpose'\n        end\n      end\n\n      assert_kind_of Net::SMTP::Response, smtp.send(:critical),\n                     '[Bug #9125]'\n    end\n\n    def test_esmtp\n      smtp = Net::SMTP.new 'localhost', 25\n      assert smtp.esmtp\n      assert smtp.esmtp?\n\n      smtp.esmtp = 'omg'\n      assert_equal 'omg', smtp.esmtp\n      assert_equal 'omg', smtp.esmtp?\n    end\n\n    def test_rset\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, FakeSocket.new\n\n      assert smtp.rset\n    end\n  end\nend\n"], "fixing_code": ["Wed Jun  8 16:03:09 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* lib/net/smtp.rb (getok, get_response): raise an ArgumentError when\n\t  CR or LF is included in a line, because they are not allowed in\n\t  RFC5321.\n\nTue Jun  7 21:27:25 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/rubygems/*_{cert,cert_32}.pem: Regenerate test certificates for\n\t  OpenSSL 1.1.0. This is already in upstream.\n\t  https://github.com/rubygems/rubygems/commit/9be5c53939440a61c4bba73cfffbeb5cfadf72be\n\t  [ruby-core:75225] [Feature #12324]\n\nTue Jun  7 21:27:17 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/open-uri/test_ssl.rb: Regenerate test certificates. The test CA\n\t  certificate was incorrectly generated. A CA certificate must have the\n\t  basic constraints extension with cA bit set to TRUE. OpenSSL <= 1.0.2\n\t  allowed the error when the certificate is in the trusted store but\n\t  OpenSSL 1.1.0 no longer does.\n\t  [ruby-core:75225] [Feature #12324]\n\nTue Jun  7 21:20:38 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* test/openssl/test_x509name.rb: Don't register OID for 'emailAddress'\n\t  and 'serialNumber'. A recent change in OpenSSL made OBJ_create()\n\t  reject an already existing OID. They were needed to run tests with\n\t  OpenSSL 0.9.6 which is now unsupported.\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=52832e470f5fe8c222249ae5b539aeb3c74cdb25\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* test/openssl/test_ssl_session.rb (test_server_session): Duplicate\n\t  SSL::Session before re-adding to the session store. OpenSSL 1.1.0\n\t  starts rejecting SSL_SESSION once removed by SSL_CTX_remove_session().\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=7c2d4fee2547650102cd16d23f8125b76112ae75\n\n\t* test/openssl/test_pkey_ec.rb (setup): Remove X25519 from @keys. X25519\n\t  is new in OpenSSL 1.1.0 but this is for key agreement and not for\n\t  signing.\n\n\t* test/openssl/test_pair.rb, test/openssl/test_ssl.rb,\n\t  test/openssl/utils.rb: Set security level to 0 when using aNULL cipher\n\t  suites.\n\n\t* test/openssl/utils.rb: Use 1024 bits DSA key for client certificates.\n\n\t* test/openssl/test_engine.rb: Run each test in separate process.\n\t  We can no longer cleanup engines explicitly as ENGINE_cleanup() was\n\t  removed.\n\t  https://git.openssl.org/gitweb/?p=openssl.git;a=commit;h=6d4fb1d59e61aacefa25edc4fe5acfe1ac93f743\n\n\t* ext/openssl/ossl_engine.c (ossl_engine_s_cleanup): Add a note to the\n\t  RDoc for Engine.cleanup.\n\n\t* ext/openssl/lib/openssl/digest.rb: Don't define constants for DSS,\n\t  DSS1 and SHA(-0) when using with OpenSSL 1.1.0. They are removed.\n\n\t* test/openssl/test_digest.rb, test/openssl/test_pkey_dsa.rb,\n\t  test/openssl/test_pkey_dsa.rb, test/openssl/test_ssl.rb,\n\t  test/openssl/test_x509cert.rb, test/openssl/test_x509req.rb: Don't\n\t  test unsupported hash functions.\n\nTue Jun  7 17:49:52 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Change test for encodings\n\t  without any non-ASCII case conversions from ASCII-only test\n\t  to full test.\n\nTue Jun  7 17:18:39 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c (rb_str_upcase_bang, rb_str_capitalize_bang,\n\t  rb_str_swapcase_bang): Switch to use primitive.\n\nTue Jun  7 16:44:16 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c (rb_str_downcase_bang): Switch to use primitive except if\n\t  conversion can be done ASCII-only.\n\nTue Jun  7 16:13:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Add regression tests for\n\t  current ASCII-only case conversion.\n\nTue Jun  7 15:28:38 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive: Fix method name\n\t  (generate_casefold_tests -> generate_case_mapping_tests).\n\nTue Jun  7 15:05:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.h/c: Rename onigenc_not_support_case_map to\n\t  onigenc_ascii_only_case_map.\n\n\t* regenc.h: Add definition of onigenc_single_byte_ascii_only_case_map.\n\n\t* enc/iso_8859_X.c, windows_125X.c, ascii.c, us-ascii.c, koi8_x.c:\n\t  Replace onigenc_not_support_case_map by\n\t  onigenc_single_byte_ascii_only_case_map.\n\n\t* enc/big5.c, cp949.c, emacs_mule.c, euc_X.c, gbX.c, shift_jis.c,\n\t  windows_31j.c: Replace onigenc_not_support_case_map by\n\t  onigenc_ascii_only_case_map.\n\nTue Jun  7 14:57:09 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check for SSL_CTX_set_min_proto_version()\n\t  macro added in OpenSSL 1.1.0. Version-specific methods, such as\n\t  TLSv1_method(), are deprecated in OpenSSL 1.1.0. We need to use\n\t  version-flexible methods (TLS_*method() or SSLv23_*method()) and\n\t  disable other protocol versions as necessary.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_ssl.c: Use SSL_CTX_set_{min,max}_proto_version() to\n\t  fix the protocol version.\n\nTue Jun  7 12:55:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.c (onigenc_not_support_case_map): Move to end of file;\n\t  (onigenc_single_byte_ascii_only_case_map): Add new function.\n\nTue Jun  7 09:26:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.c (onigenc_not_support_case_map): Rewrite to work correctly\n\t  in ASCII range.\n\nMon Jun  6 23:00:00 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* appveyor.yml: Update libressl version to 2.3.5.\n\nMon Jun  6 18:37:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_throw_start): check if the iseq is symbol\n\t  proc, class definition should not be a symbol proc.\n\t  [ruby-core:75856] [Bug #12462]\n\nMon Jun  6 18:36:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Added UTF-16BE/LE and UTF-32BE/LE to supported encodings\n\t  for Unicode case mapping.\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Tests for above\n\t  functionality; fixed an encoding issue in assertion error message.\n\nMon Jun  6 17:29:35 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Speed up testing for small\n\t  encodings by preselecting codepoints.\n\nMon Jun  6 17:10:50 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_cipher.c (ossl_cipher_free): Use EVP_CIPHER_CTX_free()\n\t  to free EVP_CIPHER_CTX allocated by EVP_CIPHER_CTX_new().\n\t  [ruby-core:75225] [Feature #12324]\n\nMon Jun  6 13:37:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c Change rb_str_casemap to use encoding primitive\n\t  case_map instead of directly calling onigenc_unicode_case_map.\n\nMon Jun  6 13:16:46 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb:\n\t  Remove :lithuanian guard for Unicode case mapping.\n\nMon Jun  6 10:39:56 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.h: Include ruby/config.h. r55285 added\n\t  some inline functions but VC does not recognize 'inline' keyword.\n\nMon Jun  6 09:25:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (thread_start_func_2): report raised exception if\n\t  report_on_exception flag is set.  [Feature #6647]\n\nMon Jun  6 01:36:24 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of SSL_is_server(). This\n\t  function was introduced in OpenSSL 1.0.2.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/openssl_missing.h: Implement SSL_is_server() if missing.\n\n\t* ext/openssl/ossl_ssl.c (ssl_info_cb): Use SSL_is_server() to see if\n\t  the SSL is server. The state machine in OpenSSL was rewritten and\n\t  SSL_get_state() no longer returns SSL_ST_ACCEPT.\n\n\t  (ossl_ssl_cipher_to_ary, ossl_sslctx_session_get_cb): Add some\n\t  `const`s to suppress warning.\n\nMon Jun  6 01:18:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c (decode_bool): Do the same thing as\n\t  d2i_ASN1_BOOLEAN() does by ourselves. This function is removed in\n\t  OpenSSL 1.1.0.\n\t  [ruby-core:75225] [Feature #12324]\n\nMon Jun  6 00:34:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of accessor functions that\n\t  don't exist in OpenSSL 0.9.8. OpenSSL 1.1.0 made most of its\n\t  structures opaque and requires use of these accessor functions.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/openssl_missing.[ch]: Implement them if missing.\n\n\t* ext/openssl/ossl*.c: Use these accessor functions.\n\n\t* test/openssl/test_hmac.rb: Add missing test for HMAC#reset.\n\nMon Jun  6 00:00:13 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.[ch]: Implement EVP_PKEY_get0_*() and\n\t  {RSA,DSA,EC_KEY,DH}_get0_*() functions.\n\t  OpenSSL 1.1.0 makes EVP_PKEY/RSA/DSA/DH opaque. We used to provide\n\t  setter methods for each parameter of each PKey type, for example\n\t  PKey::RSA#e=, but this is no longer possible because the new API\n\t  RSA_set0_key() requires the 'n' at the same time. This commit adds\n\t  deprecation warning to them and adds PKey::*#set_* methods as direct\n\t  wrapper for those new APIs. For example, 'rsa.e = 3' now needs to be\n\t  rewritten as 'rsa.set_key(rsa.n, 3, rsa.d)'.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_pkey*.[ch]: Use the new accessor functions. Implement\n\t  RSA#set_{key,factors,crt_params}, DSA#set_{key,pqg}, DH#set_{key,pqg}.\n\t  Emit a warning with rb_warning() when old setter methods are used.\n\n\t* test/drb/ut_array_drbssl.rb, test/drb/ut_drb_drbssl.rb,\n\t  test/rubygems/test_gem_remote_fetcher.rb: Don't set a priv_key for DH\n\t  object that are used in tmp_dh_callback. Generating a new key pair\n\t  every time should be fine - actually the private exponent is ignored\n\t  in OpenSSL >= 1.0.2f/1.0.1r even if we explicitly set.\n\t  https://www.openssl.org/news/secadv/20160128.txt\n\nSun Jun  5 22:06:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* configure.in: Fix the timing to detect the appropriate C++ compiler\n\t  in OS X.\n\nSun Jun  5 21:42:24 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check absence of CRYPTO_lock() to see if the\n\t  OpenSSL has the new threading API. In OpenSSL <= 1.0.2, an application\n\t  had to set locking callbacks to use OpenSSL in a multi-threaded\n\t  environment. OpenSSL 1.1.0 now finds pthreads or Windows threads so we\n\t  don't need to do something special.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t  Also check existence of *_up_ref(). Some structures in OpenSSL have\n\t  a reference counter. We used to increment it with CRYPTO_add() which\n\t  is a part of the old API.\n\n\t* ext/openssl/openssl_missing.h: Implement *_up_ref() if missing.\n\n\t* ext/openssl/ossl.c: Don't set locking callbacks if unneeded.\n\n\t* ext/openssl/ossl_pkey.c, ext/openssl/ossl_ssl.c,\n\t  ext/openssl/ossl_x509cert.c, ext/openssl/ossl_x509crl.c,\n\t  ext/openssl/ossl_x509store.c: Use *_up_ref() instead of CRYPTO_add().\n\nSun Jun  5 21:38:13 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check if RAND_pseudo_bytes() is usable. It is\n\t  marked as deprecated in OpenSSL 1.1.0.\n\t  [ruby-core:75225] [Feature #12324]\n\n\t* ext/openssl/ossl_rand.c: Disable Random.pseudo_bytes if\n\t  RAND_pseudo_bytes() is unavailable.\n\n\t* test/openssl/test_random.rb: Don't test Random.pseudo_bytes if not\n\t  defined.\n\nSun Jun  5 19:06:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* NEWS: Add news about Unicode-wide case mapping for\n\t  String/Symbol#upcase/downcase/swapcase/capitalize(!).\n\nSun Jun  5 15:24:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb:\n\t  Remove :lithuanian guard for Unicode case mapping.\n\nSun Jun  5 14:46:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Remove :lithuanian guard for Unicode case mapping.\n\nSat Jun  4 10:54:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt.h (struct crypt_data): remove unnecessary member\n\t  \"initialized\".\n\n\t* missing/crypt.c (des_setkey_r): nothing to be initialized in\n\t  crypt_data.\n\n\t* configure.in (struct crypt_data): check for \"initialized\" in\n\t  struct crypt_data, which may be only in glibc, and isn't on AIX\n\t  at least.\n\nSat Jun  4 10:38:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/win32.c: unify MAX_PATH, _MAX_PATH, and MAXPATHLEN to\n\t  PATH_MAX, except for MAX_PATH in get_special_folder for an API\n\t  limit.\n\nFri Jun  3 21:27:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (process_options): rb_str_conv_enc() never set encoding\n\t  of the source string, but returns the string itself if the\n\t  conversion failed.  then the instance variable does not need to\n\t  be set again.\n\nFri Jun  3 18:04:37 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ruby.c (process_options): need to duplicate path before passing it to\n\t  rb_str_conv_enc() because the function might call rb_enc_associate()\n\t  internally.  this fixes test failures on Windows introduced at r55260.\n\nFri Jun  3 17:44:25 2016  Reiner Herrmann  <reiner@reiner-h.de>\n\n\t* lib/mkmf.rb (create_makefile): sort lists of source and object\n\t  files in generated Makefile, unless given by extconf.rb.\n\t  [Fix GH-1367]\n\nThu Jun  2 21:18:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/win32.c (get_special_folder): use SHGetPathFromIDListEx if\n\t  available instead of old SHGetPathFromIDListW, to check the\n\t  buffer size.\n\nThu Jun  2 17:05:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (ruby_init_loadpath_safe): remove MAXPATHLEN restriction\n\t  for Windows 10.\n\nThu Jun  2 16:51:35 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* misc/ruby-mode.el (ruby-here-doc-beg-re),\n\t  (ruby-here-doc-beg-match, ruby-parse-partial): Support for\n\t  `squiggly heredoc' syntax in ruby-mode.  [Fix GH-1372]\n\nThu Jun  2 10:24:48 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Raise ArgumentError when invalid string is detected in\n\t  case mapping methods.\n\n\t* enc/unicode.c: Check for invalid string and signal with negative\n\t  length value.\n\n\t* test/ruby/enc/test_case_mapping.rb: Add tests for above.\n\n\t* test/ruby/test_m17n_comb.rb: Add a message to clarify test failure.\n\nWed Jun  1 21:41:05 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Check existence of ASN1_TIME_adj(). The old\n\t  ASN1_TIME_set() is not Year 2038 ready on sizeof(time_t) == 4\n\t  environment. This function was added in OpenSSL 1.0.0.\n\t  [ruby-core:45552] [Bug #6571]\n\n\t* ext/openssl/ossl_asn1.c (ossl_time_split): Added. Split the argument\n\t  (Time) into the number of days elapsed since the epoch and the\n\t  remainder seconds to conform to ASN1_TIME_adj().\n\t  (obj_to_asn1utime, obj_to_asn1gtime): Use ossl_time_split() and\n\t  ASN1_*TIME_adj().\n\n\t* ext/openssl/ossl_asn1.h: Add the function prototype for\n\t  ossl_time_split().\n\n\t* ext/openssl/ossl_x509.[ch]: Add ossl_x509_time_adjust(). Similarly to\n\t  obj_to_asn1*time(), use X509_time_adj_ex() instead of X509_time_adj().\n\n\t* ext/openssl/ossl_x509cert.c, ext/openssl/ossl_x509crl.c,\n\t  ext/openssl/ossl_x509revoked.c: Use ossl_x509_time_adjust().\n\nWed Jun  1 15:58:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: revert r55237.  replace crypt, not crypt_r, and\n\t  check if crypt is broken more.\n\n\t* missing/crypt.c: move crypt_r.c\n\n\t* string.c (rb_str_crypt): use crypt_r if provided by the system.\n\nWed Jun  1 14:07:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt_r.c (a64toi): initialize statically and fix out of\n\t  bounds access when salt is not 7bit clean.\n\nWed Jun  1 11:34:59 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/Makefile.sub (MISSING): fixed build error introduced at r55237.\n\nWed Jun  1 09:48:06 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_crypt): use reentrant crypt_r.\n\nWed Jun  1 09:37:26 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* missing/crypt.c (des_setkey): void function never returns any value.\n\nWed Jun  1 09:16:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* crypt.h: separate header file from missing/crypt.c.\n\n\t* missing/crypt.c (crypt_r, setkey_r, encrypt_r): add reentrant\n\t  versions.\n\nWed Jun  1 02:25:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* missing/crypt.c: fix size macros to use configured values\n\t  for platforms long is larger than 32bit.\n\t  [ruby-core:75792] [Bug #12446]\n\nTue May 31 17:28:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb (OptionParser::Completion.candidate): get rid of\n\t  nil as key names.  [ruby-core:75773] [Bug #12438]\n\n\t* lib/optparse.rb (OptionParser#make_switch): char class option\n\t  cannot be NoArgument, default to RequiredArgument.\n\nTue May 31 00:30:11 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/socket/raddrinfo.c (host_str, port_str): Use StringValueCStr\n\t  instead of (Safe)StringValue, to detect NUL byte in the string.\n\nMon May 30 22:02:01 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c (time_to_time_t): Use NUM2TIMET() instead of\n\t  NUM2LONG(). time_t may be larger than long.\n\t  [ruby-core:45552] [Bug #6571]\n\nMon May 30 21:15:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Document current behavior for other case mapping methods\n\t  on String. [ci skip]\n\nMon May 30 20:00:25 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Document current situation for String#downcase. [ci skip]\n\nMon May 30 18:29:28 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_s_alloc): Enable the automatic\n\t  curve selection for ECDH by calling SSL_CTX_set_ecdh_auto(). With\n\t  this a TLS server automatically selects a curve which both the client\n\t  and the server support to use in ECDH. This changes the default\n\t  behavior but users can still disable ECDH by excluding 'ECDH' cipher\n\t  suites from the cipher list (with SSLContext#ciphers=). This commit\n\t  also deprecate #tmp_ecdh_callback=. It was added in Ruby 2.3.0. It\n\t  wraps SSL_CTX_set_tmp_ecdh_callback() which will be removed in OpenSSL\n\t  1.1.0. Its callback receives two values 'is_export' and 'keylength'\n\t  but both are completely useless for determining a curve to use in\n\t  ECDH. The automatic curve selection was introduced to replace this.\n\n\t  (ossl_sslctx_setup): Deprecate SSLContext#tmp_ecdh_callback=. Emit a\n\t  warning if this is in use.\n\n\t  (ossl_sslctx_set_ecdh_curves): Add SSLContext#ecdh_curves=. Wrap\n\t  SSL_CTX_set1_curves_list(). If it is not available, this falls back\n\t  to SSL_CTX_set_tmp_ecdh().\n\n\t  (Init_ossl_ssl): Define SSLContext#ecdh_curves=.\n\n\t* ext/openssl/extconf.rb: Check the existence of EC_curve_nist2nid(),\n\t  SSL_CTX_set1_curves_list(), SSL_CTX_set_ecdh_auto() and\n\t  SSL_CTX_set_tmp_ecdh_callback().\n\n\t* ext/openssl/openssl_missing.[ch]: Implement EC_curve_nist2nid() if\n\t  missing.\n\n\t* test/openssl/test_pair.rb (test_ecdh_callback): Use\n\t  EnvUtil.suppress_warning to suppress deprecated warning.\n\n\t  (test_ecdh_curves): Test that SSLContext#ecdh_curves= works.\n\n\t* test/openssl/utils.rb (start_server): Use SSLContext#ecdh_curves=.\n\nMon May 30 16:28:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/raddrinfo.c (host_str, port_str): use RSTRING_LEN\n\t  instead of strlen, since RSTRING_PTR StringValueCStr may not be\n\t  NUL-terminated when SHARABLE_MIDDLE_SUBSTRING=1.  reported by\n\t  @tmtms, http://twitter.com/tmtms/status/736910516229005312\n\nMon May 30 16:20:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (str_fill_term): return new pointer reallocated by\n\t  filling terminator.\n\nMon May 30 14:54:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/stringio/stringio.c (enc_subseq): share the return value and\n\t  the buffer as possible.\n\nMon May 30 14:50:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (str_substr, rb_str_aref): refactor not to create\n\t  unnecessary empty string.\n\n\t* string.c (str_byte_substr, str_byte_aref): ditto.\n\nMon May 30 00:09:37 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/-test-/auto_ext.rb: fixed a heedless bug introduced at r55198.\n\t  this change will make RubyCI green.\n\nSun May 29 22:58:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regexec.c (ONIGENC_IS_MBC_ASCII_WORD): redefine optimized one.\n\t  WORD of Ruby's ascii compatible encoding is always [a-zA-Z0-9_].\n\nSun May 29 22:44:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regexec.c (match_at): make compilers optimize harder.\n\nSun May 29 12:08:42 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/-test-/auto_ext.rb (auto_ext): utility method to create\n\t  extension libraries for tests.\n\nSat May 28 20:40:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* misc/ruby-additional.el (ruby-insert-heredoc-code-block): insert\n\t  here document code block for assert_separately mainly.\n\nSat May 28 20:34:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/test_unicode_normalize.rb: Add test to check for availability of\n\t  Unicode data file; refactoring; fix an error with tests for destructive\n\t  method (unicode_normalize!).\n\nSat May 28 19:08:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Add error messages to tests\n\t  for data file availability; refactoring.\n\nSat May 28 14:00:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/lib/openssl/ssl.rb (SSLSocket): Move the implementation of\n\t  SSLSocket#initialize to C. Initialize the SSL (OpenSSL object) in it.\n\t  Currently this is delayed until ossl_ssl_setup(), which is called from\n\t  SSLSocket#accept or #connect. Say we call SSLSocket#hostname= with an\n\t  illegal value. We expect an exception to be raised in #hostname= but\n\t  actually we get it in the later SSLSocket#connect. Because the SSL is\n\t  not ready at #hostname=, the actual call of SSL_set_tlsext_host_name()\n\t  is also delayed.\n\t  This also fixes: [ruby-dev:49376] [Bug #11724]\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_initialize): Added. Almost the same\n\t  as the Ruby version but this instantiate the SSL object at the same\n\t  time.\n\n\t  (ossl_ssl_setup): Adjust to the changes. Just set the underlying IO to\n\t  the SSL.\n\n\t  (ssl_started): Added. Make use of SSL_get_fd(). This returns -1 if not\n\t  yet set by SSL_set_fd().\n\n\t  (ossl_ssl_data_get_struct): Removed. Now GetSSL() checks that the SSL\n\t  exists.\n\n\t  (ossl_ssl_set_session): Don't call ossl_ssl_setup() here as now the\n\t  SSL is already instantiated in #initialize.\n\n\t  (ossl_ssl_shutdown, ossl_start_ssl, ossl_ssl_read_internal,\n\t   ossl_ssl_write_internal, ossl_ssl_stop, ossl_ssl_get_cert,\n\t   ossl_ssl_get_peer_cert, ossl_ssl_get_peer_cert_chain,\n\t   ossl_ssl_get_version, ossl_ssl_get_cipher, ossl_ssl_get_state,\n\t   ossl_ssl_pending, ossl_ssl_session_reused,\n\t   ossl_ssl_get_verify_result, ossl_ssl_get_client_ca_list,\n\t   ossl_ssl_npn_protocol, ossl_ssl_alpn_protocol, ossl_ssl_tmp_key): Use\n\t  GetSSL() instead of ossl_ssl_data_get_struct(). Use ssl_started().\n\n\t  (Init_ossl_ssl): Add method declarations of SSLSocket#{initialize,\n\t  hostname=}.\n\n\t* ext/openssl/ossl_ssl.h (GetSSL): Check that the SSL is not NULL. It\n\t  should not be NULL because we now set it in #initialize.\n\n\t* ext/openssl/ossl_ssl_session.c (ossl_ssl_session_initialize): No need\n\t  to check if the SSL is NULL.\n\nSat May 28 10:47:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update latest releases, power_assert-0.3.0,\n\t  test-unit 3.1.9, minitest 5.9.0, did_you_mean 1.0.1\n\nSat May 28 10:45:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* addr2line.c: drop support for ATARI ST platform. It was\n\t  discontinued more than two decades ago. [fix GH-1350] Patch by\n\t  @cremno\n\t* include/ruby/ruby.h: ditto.\n\t* io.c: ditto.\n\nSat May 28 10:39:47 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Converted exception for\n\t  unavailable Unicode data files to failed assertion.\n\nSat May 28 10:26:18 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/cgi/util.rb: added missing quote.\n\t  [fix GH-1363][ci skip] Patch by @dwaller\n\nFri May 27 17:38:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_local_constants_i): exclude hidden constants.\n\t  [ruby-core:75575] [Bug #12389]\n\nFri May 27 17:09:44 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* transcode.c (str_transcode0): scrub in the given encoding when\n\t  the source encoding is given, not in the encoding of the\n\t  receiver.  [ruby-core:75732] [Bug #12431]\n\nFri May 27 15:07:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): remove nul padding which\n\t  caused syntax error if fmt is not a string literal.\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): suppress array-bounds\n\t  warnings by old clang.\n\n\t* include/ruby/ruby.h (rb_scan_args0): make extractor macros\n\t  inline functions, which do not validate the format and are\n\t  unnecessary to be expanded.\n\nFri May 27 01:00:36 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* symbol.c (is_identchar): use ISDIGIT instead of rb_enc_isalnum.\n\t  Though rb_enc_isalnum is encoding aware function, its argument here\n\t  is *m, which is a single byte. Therefore ISDIGIT is faster.\n\n\t* symbol.c (is_special_global_name): ditto.\n\n\t* symbol.c (rb_enc_symname_type): ditto.\n\nFri May 27 00:39:40 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): add nul padding here to\n\t  apply to all references.\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): move length mismatch\n\t  check outside conditional operators.\n\nThu May 26 14:21:10 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_dh.c (ossl_dh_compute_key): Check that the DH\n\t  has 'p' (the prime) before calling DH_size(). We can create a DH with\n\t  no parameter but DH_size() does not check and dereferences NULL.\n\t  [ruby-core:75720] [Bug #12428]\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_sign): Ditto. DSA_size() does\n\t  not check dsa->q.\n\n\t* ext/openssl/ossl_pkey_rsa.c (ossl_rsa_public_encrypt,\n\t  ossl_rsa_public_decrypt, ossl_rsa_private_encrypt,\n\t  ossl_rsa_private_decrypt): Ditto. RSA_size() does not check rsa->n.\n\nThu May 26 14:13:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_count): verify length with\n\t  counting variables together.\n\nThu May 26 09:45:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_comprehensive.rb: Add set of comprehensive\n\t  (across most Unicode characters; later across most character encodings)\n\t  tests for case mapping.\n\nThu May 26 05:00:13 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* class.c (rb_define_class): Fix documentation.\n\nWed May 25 20:50:12 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (unescape_nonascii): scan hex up to only 3 characters.\n\t  [Bug #12420] [Bug #12423]\n\nWed May 25 19:07:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Handle DOTLESS_i by hand because it isn't involved in folding.\n\nWed May 25 18:30:53 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regparse.c (fetch_token_in_cc): raise error if given octal escaped\n\t  character is too big. [Bug #12420] [Bug #12423]\n\nWed May 25 17:45:15 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl, test/openssl: Drop OpenSSL < 0.9.8 support.\n\nWed May 25 17:43:30 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/openssl_missing.h, ext/openssl/ossl.h: Remove\n\t  unnecessary 'extern \"C\"' blocks. We don't use C++ and these headers\n\t  are local to ext/openssl, so there is no need to enclose with it.\n\nWed May 25 17:42:58 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: Remove check of OPENSSL_FIPS macro. This is\n\t  unneeded because we can check the macro directly in source code,\n\t  just as we already do for OPENSSL_NO_* macros.\n\n\t* ext/openssl/ossl.c: Replace occurrences of HAVE_OPENSSL_FIPS with\n\t  OPENSSL_FIPS.\n\nWed May 25 17:13:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* class.c (rb_scan_args): merge code for n_trail.\n\nWed May 25 17:11:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_validate): move failed\n\t  condition to the terminal.  [ruby-core:75714] [Bug #12426]\n\nWed May 25 13:13:37 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regcomp.c: remove condition for debug output because prelude\n\t  doesn't use regexp now.\n\nWed May 25 13:10:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regcomp.c (compile_length_tree): return error code immediately\n\t  if compile_length_tree raised error [Bug #12418]\n\nWed May 25 08:01:39 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fix flag error for switch from titlecase to lowercase.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above error.\n\nWed May 25 01:13:55 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ec_key_new_from_group): Create a new\n\t  EC_KEY on given EC group. Extracted from ossl_ec_key_initialize().\n\t  (ossl_ec_key_s_generate): Added. Create a new EC instance and\n\t  generate a random private and public key.\n\t  (ossl_ec_key_initialize): Use ec_key_new_from_group().\n\t  (Init_ossl_ec): Define the new method EC.generate. This change is\n\t  for consistency with other PKey types.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb: Test that EC.generate works.\n\nWed May 25 00:37:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_generate_key): Fix up RDoc.\n\t  (Init_ossl_ec): Rename EC#generate_key to EC#generate_key!. Make the\n\t  old name an alias of #generate_key!. This change is for consistency\n\t  with other PKey types.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb: Use EC#generate_key! instead of\n\t  EC#generate_key.\n\nWed May 25 00:23:05 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_set): check the arity after\n\t  adjusting argc for an option hash, for optimization in simpler\n\t  cases.\n\nWed May 25 00:21:52 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (XCFLAGS): merge flags only for ruby itself from\n\t  ruby_cflags.\n\nTue May 24 22:04:15 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_cipher.c (ossl_cipher_set_key, ossl_cipher_set_iv):\n\t  Reject too long values as well as too short ones. Currently they\n\t  just truncate the input but this would hide bugs and lead to\n\t  unexpected encryption/decryption results.\n\n\t* test/openssl/test_cipher.rb: Test that Cipher#key= and #iv= reject\n\t  Strings with invalid length.\n\nTue May 24 21:32:21 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509ext.c (ossl_x509ext_set_value): Use\n\t  ASN1_OCTET_STRING_set() instead of M_ASN1_OCTET_STRING_set(). Macros\n\t  prefixed by \"M_\" are discouraged to be used from outside OpenSSL\n\t  library[1].\n\t  (ossl_x509ext_get_value): Likewise, use ASN1_STRING_print() instead\n\t  of M_ASN1_OCTET_STRING_print().\n\t  [1] https://git.openssl.org/gitweb/?p=openssl.git;a=blob;f=CHANGES;h=bf61913d7b01212b4d8b2f3c13d71d645914f67c;hb=b6079a7835f61daa9fb2cbf9addfa86049523933#l878\n\n\t* ext/openssl/ossl.h: Include openssl/asn1.h instead of\n\t  openssl/asn1_mac.h. It just includes openssl/asn1.h and defines some\n\t  additional \"M_\" macros.\n\nTue May 24 18:52:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args_verify): verify the format to\n\t  scan if no invalid chars and variable argument length matching,\n\t  at the compile time if possible.\n\nTue May 24 17:18:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/defines.h (ERRORFUNC, WARNINGFUNC): add fallback\n\t  definitions.\n\nTue May 24 16:37:43 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (ruby_cflags): separate from optflags [Bug #12409]\n\t  -fexcess-precision=standard and -fp-model precise are set to this now.\n\n\t* configure.in (cflags): use ruby_cflags.\n\nTue May 24 16:20:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (ERRORFUNC, WARNINGFUNC): __error__ and __warning__\n\t  attributes take a parenthesized string literal.\n\nTue May 24 12:35:56 2016  URABE Shyouhei  <shyouhei@ruby-lang.org>\n\n\t* common.mk: sort lines, and add missing dependencies suggested\n\t  by tool/update-deps\n\nMon May 23 21:33:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/missing.h (isfinite): move from numeric.c.\n\nMon May 23 21:09:06 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (Init_openssl): Avoid reference to unset global\n\t  variable. ossl_raise() may be called before dOSSL is set. Since\n\t  global variables default to 0 and the default value of dOSSL set in\n\t  Init_openssl() is also Qfalse, there is no real issue but confusing.\n\t  Patch by Bertram Scharpf <software@bertram-scharpf.de>\n\t  [ruby-core:58264] [Bug #9101]\n\nMon May 23 20:32:16 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_asn1.c, ext/openssl/ossl_bn.c,\n\t  ext/openssl/ossl_cipher.c, ext/openssl/ossl_digest.c\n\t  ext/openssl/ossl_engine.c, ext/openssl/ossl_ns_spki.c\n\t  ext/openssl/ossl_pkcs12.c, ext/openssl/ossl_pkcs7.c\n\t  ext/openssl/ossl_pkey.c, ext/openssl/ossl_pkey_ec.c\n\t  ext/openssl/ossl_rand.c, ext/openssl/ossl_ssl.c\n\t  ext/openssl/ossl_x509attr.c, ext/openssl/ossl_x509cert.c\n\t  ext/openssl/ossl_x509ext.c, ext/openssl/ossl_x509store.c: Use\n\t  StringValueCStr() where NUL-terminated string is expected.\n\nMon May 23 20:20:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (isfinite): get rid of a warning on\n\t  cygwin. [Bug #12417][ruby-core:75691]\n\nMon May 23 19:41:27 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_rand.c (ossl_rand_egd, ossl_rand_egd_bytes):\n\t  RAND_egd{_bytes,}() return -1 on failure, not 0.\n\t  Patch by cremno phobia <cremno@mail.ru>\n\t  [ruby-core:63795] [Bug #10053]\n\t  (ossl_pseudo_bytes): Similar, RAND_pseudo_bytes() may return 0 or\n\t  -1 on failure.\n\nMon May 23 15:52:07 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (isfinite): isfinite does not always\n\t  exist.  fixed build error on Windows introduced at r55123.\n\nMon May 23 13:19:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args0): make compile error if the\n\t  format is wrong or does not match with the variable argument\n\t  length if possible.\n\nMon May 23 12:47:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args0): raise fatal error if\n\t  variable argument length does not match, it is a bug in the code\n\t  which uses rb_scan_args, not a runtime error.\n\nMon May 23 12:30:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/bigdecimal/bigdecimal.c (GetVpValueWithPrec): consider\n\t  non-finite float values not to raise FloatDomainError.\n\t  [ruby-core:75682] [Bug #12414]\n\nMon May 23 12:21:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* array.c (rb_ary_fill): suppress warnings: 'item' may be used\n\t  uninitialized in this function\n\nMon May 23 07:41:49 2016  Eric Wong  <e@80x24.org>\n\n\t* dir.c (dir_close): update RDoc for 2.3 #close change\n\t  [ruby-core:75679] [Bug #12413]\n\nSun May 22 20:01:21 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/timeridconv.rb: use finalizer trick instead of thread.\n\n\t* test/drb/ut_timerholder.rb: ditto.\n\nSun May 22 17:25:18 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_options.rb: adjust test class name\n\t  to match file name\n\nSun May 22 17:24:07 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* rename test/ruby/enc/test_casing_options.rb to test_case_options.rb\n\t  for consistency\n\nSun May 22 17:06:55 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* transcode.c (enc_arg, str_transcode_enc_args, econv_args):\n\t  remove volatile, and add GC guards in callers.\n\t  [ruby-core:75664] [Bug #12411]\n\nSun May 22 16:27:00 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/-test-/integer/core_ext.c: move testutil/integer.c.\n\n\t* test/lib/-test-/integer.rb: extract implementation details from\n\t  test/unit/assertions.rb.  [Bug #12408]\n\nSun May 22 14:57:43 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Extend OnigEncodingTypeDefine to define a\n\t  new encoding primitive 'case_map' for case mapping\n\n\t* enc/utf-8.c, utf_16be/le.c, utf_32be/le.c:\n\t  add onigenc_unicode_case_map as case_map primitive\n\n\t* enc/ascii.c, big5.c, cp949.c, emacs_mule.c, euc_jp/kr/tw.c, gb18030.c,\n\t  gbk.c, iso_8859_1/2/3/4/5/6/7/8/9/10/11/13/14/15/16.c, koi8_r/u.c,\n\t  shift_jis.c, us_ascii.c, windows_1250/1251/1252.c:\n\t  add onigenc_not_support_case_map as case_map primitive\n\nSun May 22 14:45:45 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* regenc.h/c: Define new function onigenc_not_support_case_map\n\nSun May 22 12:14:06 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): use original rb_scan_args\n\t  when fmt is dynamic.\n\nSun May 22 11:41:12 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* class.c (rb_scan_args): moved to bottom of the file to make the\n\t  effect of `#undef rb_scan_args` the minimum.\n\n\t* include/ruby/ruby.h (rb_scan_args): overwrite only if GCC and\n\t  optimized. Visual C++ 14 or later can compile it but make it\n\t  conservative.\n\nSat May 21 22:45:50 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): don't use ALWAYS_INLINE with\n\t  `inline`.  if gcc needs this duplication, do in ALWAYS_INLINE macro.\n\nSat May 21 21:11:56 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_scan_args): use __VA_ARGS__ instead of\n\t  va_arg to allow compilers optimize more aggressive.\n\t  https://gustedt.wordpress.com/2011/07/10/avoid-writing-va_arg-functions/\n\t  rb_scan_args is now expected to be statically resolved.\n\nSun May 22 02:41:52 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/zlib/zlib.c: remove hacky macro introduced at r30437.\n\n\t* ext/zlib/zlib.c (gzfile_make_header): cast as long (instead of int).\n\n\t* ext/zlib/zlib.c (gzfile_make_footer): ditto.\n\nSat May 21 21:07:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (ALWAYS_INLINE): force compilers the function inlined.\n\nSat May 21 16:16:03 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_stop): Don't free the SSL struct\n\t  here. Since some methods such as SSLSocket#connect releases GVL,\n\t  there is a chance of use after free if we free the SSL from another\n\t  thread. SSLSocket#stop was documented as \"prepares it for another\n\t  connection\" so this is a slightly incompatible change. However when\n\t  this sentence was added (r30090, Add toplevel documentation for\n\t  OpenSSL, 2010-12-06), it didn't actually. The current behavior is\n\t  from r40304 (Correct shutdown behavior w.r.t GC., 2013-04-15).\n\t  [ruby-core:74978] [Bug #12292]\n\n\t* ext/openssl/lib/openssl/ssl.rb (sysclose): Update doc.\n\n\t* test/openssl/test_ssl.rb: Test this.\n\nSat May 21 14:41:14 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c: [DOC] Fix SSL client example. The variable name\n\t  was wrong. Patch by Andreas Tiefenthaler <at@an-ti.eu> (@pxlpnk).\n\t  [GH ruby/openssl#32]\n\nSat May 21 14:25:38 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c: rename PKey::EC#private_key? and\n\t  #public_key? to #private? and #public? for consistency with other\n\t  PKey types. Old names remain as alias.  [ruby-core:45541] [Bug #6567]\n\n\t* test/openssl/test_pkey_ec.rb (test_check_key): check private? and\n\t  public? works correctly.\n\nSat May 21 12:40:36 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/lib/openssl/buffering.rb (read_nonblock, readpartial):\n\t  Remove impossible EOFError raise. Patch by Zach Anker\n\t  <zanker@squareup.com>.  [GH ruby/openssl#23]\n\nSat May 21 11:18:42 2016  Evgeni Golov  <evgeni@golov.de>\n\n\t* lib/ipaddr.rb: [DOC] fix documentation of IN6MASK to mention\n\t  IPv6.  [Fix GH-1349]\n\nSat May 21 11:12:53 2016  Dan Martinez  <dfm@razorwind.org>\n\n\t* io.c (Init_IO): [DOC] define dummy ARGF instead of ARGF.class to\n\t  re-enable the generation of ARGF documentation.  [Fix GH-1358]\n\nSat May 21 11:07:29 2016  0x01f7  <souk.0x01f7@gmail.com>\n\n\t* doc/syntax/methods.rdoc (Method Names): add proper closing tag.\n\t  [Fix GH-1356]\n\nSat May 21 09:26:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SETJMP): fix missing macro definition\n\t  for the configured result.  fix up r55021.\n\nSat May 21 00:36:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* process.c (rb_execarg_commandline): build command line string\n\t  from argument vector in rb_execarg.\n\t  [ruby-core:75611] [Bug #12398]\n\nFri May 20 23:25:42 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (ossl_pem_passwd_value): Added. Convert the\n\t  argument to String with StringValue() and validate the length is in\n\t  4..PEM_BUFSIZE. PEM_BUFSIZE is a macro defined in OpenSSL headers.\n\t  (ossl_pem_passwd_cb): When reading/writing encrypted PEM format, we\n\t  used to pass the password to PEM_def_callback() directly but it was\n\t  problematic. It is not NUL character safe. And surprisingly, it\n\t  silently truncates the password to 1024 bytes.  [GH ruby/openssl#51]\n\n\t* ext/openssl/ossl.h: Add function prototype declaration of newly\n\t  added ossl_pem_passwd_value().\n\n\t* ext/openssl/ossl_pkey.c (ossl_pkey_new_from_data): Use\n\t  ossl_pem_passwd_value() to validate the password String.\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_initialize, ossl_dsa_export):\n\t  ditto.\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_initialize,\n\t  ossl_ec_key_to_string): ditto.\n\n\t* ext/openssl/ossl_pkey_rsa.c (ossl_rsa_initialize, ossl_rsa_export):\n\t  ditto.\n\n\t* test/openssl/test_pkey_{dsa,ec,rsa}.rb: test this.\n\nFri May 20 23:45:53 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* id_table.c (list_id_table_init): When unaligned word access is\n\t  prohibited and sizeof(VALUE) is 8 (64-bit machines),\n\t  capa should always be even number for 8-byte word alignment\n\t  of the values of a table. This code assumes that sizeof(ID) is 4,\n\t  sizeof(VALUE) is 8, and xmalloc() returns 8-byte aligned memory.\n\t  This fixes bus error on 64-bit SPARC Solaris 10.\n\t  [Bug #12406][ruby-dev:49631]\n\nFri May 20 22:30:09 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* symbol.h (rb_id2sym): Use HAVE_BUILTIN___BUILTIN_CONSTANT_P\n\nFri May 20 22:19:00 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* ext/date/date_core.c: [DOC] fix typos.\n\t  [fix GH-1360] patched by @soundasleep\n\nFri May 20 21:26:58 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* include/ruby/defines.h (RB_GNUC_EXTENSION, RB_GNUC_EXTENSION_BLOCK):\n\t  macros for skipping __extension__ on non-GCC compilers.\n\t* eval_error.c (warn_print): use RB_GNUC_EXTENSION_BLOCK instead of\n\t  __extension__ because __extension__ is a GNU extension.\n\t  Fix compile error on Solaris 10 with Oracle Solaris Studio 12.x.\n\t  [Bug #12397] [ruby-dev:49629].\n\t* internal.h (rb_fstring_cstr, rb_fstring_enc_cstr): ditto\n\t* include/ruby/encoding.h (rb_enc_str_new, rb_enc_str_new_cstr): ditto\n\t* include/ruby/intern.h (rb_str_new, rb_str_new_cstr,\n\t  rb_usascii_str_new, rb_utf8_str_new, rb_tainted_str_new_cstr,\n\t  rb_usascii_str_new_cstr, rb_utf8_str_new_cstr,\n\t  rb_external_str_new_cstr, rb_locale_str_new_cstr,\n\t  rb_str_buf_new_cstr, rb_str_cat_cstr, rb_exc_new_cstr): ditto\n\nFri May 20 21:17:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/win32ole/win32ole.c (fole_missing): make substring or dup to\n\t  share the content if possible.\n\nFri May 20 19:48:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (NEW_PARTIAL_MEMO_FOR): shrink buffer array not to\n\t  mark non-VALUE fields.  fix check_rvalue_consistency abort with\n\t  RGENGC_CHECK_MODE=2.\n\n\t* internal.h (NEW_CMP_OPT_MEMO): exclude struct cmp_opt_data from\n\t  the valid array range.\n\n\t* enum.c (slicewhen_i): exclude inverted too.\n\nThu May 19 21:21:57 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* re.c (rb_reg_match_m_p): [DOC] fix return value in rdoc.\n\n\t* test/ruby/test_regexp.rb (TestRegexp#test_match_p): add some\n\t  tests from document.\n\nThu May 19 13:22:44 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (Init_openssl): register an ex_data index for\n\t  X509_STORE and X509_STORE_CTX respectively. Since they don't share\n\t  the ex_data index registry, we can't use the same index.\n\t  (ossl_verify_cb): use the the correct index.\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_verify_callback): ditto.\n\n\t* ext/openssl/ossl_x509store.c (ossl_x509store_set_vfy_cb): ditto.\n\t  (ossl_x509stctx_verify): ditto.\n\n\t* ext/openssl/ossl.h (void ossl_clear_error): add extern declarations\n\t  of ossl_store_{ctx_,}ex_verify_cb_idx.\n\n\t* ext/openssl/openssl_missing.c: remove X509_STORE_set_ex_data and\n\t  X509_STORE_get_ex_data.\n\n\t* ext/openssl/openssl_missing.h: implement X509_STORE_get_ex_data,\n\t  X509_STORE_set_ex_data and X509_STORE_get_ex_new_index as macros.\n\nThu May 19 13:11:35 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509attr.c (ossl_x509attr_set_value): check that the\n\t  argument is an OpenSSL::ASN1::Data before converting to ASN1_TYPE.\n\t  This fixes SEGV on OpenSSL::X509::Attribute#value=(non-asn1-value).\n\n\t* test/openssl/test_x509attr.rb: add tests for OpenSSL::X509::Attribute.\n\nThu May 19 12:10:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): fix match against empty string.\n\t  rb_str_offset returns the end when the position exceeds the\n\t  length.  fix the range parameter of onig_search.\n\t  [ruby-core:75604] [Bug #12394]\n\nThu May 19 11:37:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): should return false if no match, as the\n\t  document says.  [Feature #8110]\n\nThu May 19 00:17:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (reg_names_iter): specify capacify\n\nWed May 18 21:29:59 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* thread.c (recursive_list_access): a object id may be a Bignum.  so,\n\t  the list must be a objhash, instead of a identhash.\n\t  this fixes many test errors on mswin64 CI.\n\nWed May 18 19:33:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_match_m_p): Introduce Regexp#match?, which returns\n\t  bool and doesn't save backref.\n\nWed May 18 16:52:03 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkcs12.c (ossl_pkcs12_initialize): pop errors\n\t  leaked by PKCS12_parse(). This is a bug in OpenSSL, which exists\n\t  in the versions before the version 1.0.0t, 1.0.1p, 1.0.2d.\n\nWed May 18 16:04:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/downloader.rb (Downloader::RubyGems.download): verify gems\n\t  only if RubyGems is 2.4 or later.  old RubyGems fails to verify\n\t  almost all of bundled gems.\n\nWed May 18 14:52:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_modify_expand): check integer overflow.\n\t  [ruby-core:75592] [Bug #12390]\n\nWed May 18 13:11:44 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_ary_subseq): get subseq of match array without creating\n\t  temporary array.\n\n\t* re.c (match_ary_aref): get element(s) of match array without creating\n\t  temporary array.\n\n\t* re.c (match_aref): Use match_ary_subseq with handling irregulars.\n\n\t* re.c (match_values_at): Use match_ary_aref.\n\nWed May 18 13:03:07 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_x509cert.c (ossl_x509_verify): X509_verify()\n\t  family may put errors on 0 return (0 means verification failure).\n\t  Clear OpenSSL error queue before return to Ruby. Since the queue is\n\t  thread global, remaining errors in the queue can cause an unexpected\n\t  error in the next OpenSSL operation.  [ruby-core:48284] [Bug #7215]\n\n\t* ext/openssl/ossl_x509crl.c (ossl_x509crl_verify): ditto.\n\n\t* ext/openssl/ossl_x509req.c (ossl_x509req_verify): ditto.\n\n\t* ext/openssl/ossl_x509store.c (ossl_x509stctx_verify): ditto.\n\n\t* ext/openssl/ossl_pkey_dh.c (dh_generate): clear the OpenSSL error\n\t  queue before re-raising exception.\n\n\t* ext/openssl/ossl_pkey_dsa.c (dsa_generate): ditto.\n\n\t* ext/openssl/ossl_pkey_rsa.c (rsa_generate): ditto.\n\n\t* ext/openssl/ossl_ssl.c (ossl_start_ssl): ditto.\n\n\t* test/openssl: check that OpenSSL.errors is empty every time after\n\t  running a test case.\n\nWed May 18 12:07:42 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl.c (ossl_clear_error): Extracted from\n\t  ossl_make_error(). This prints errors in the OpenSSL error queue if\n\t  OpenSSL.debug is true, and clears the queue.\n\t  (ossl_make_error): use ossl_clear_error().\n\n\t* ext/openssl/ossl.h: add prototype declaration of ossl_make_error().\n\t  (OSSL_BIO_reset) use ossl_clear_error() to clear the queue. Clearing\n\t  silently makes debugging difficult.\n\n\t* ext/openssl/ossl_engine.c (ossl_engine_s_by_id): ditto.\n\n\t* ext/openssl/ossl_ns_spki.c (ossl_spki_initialize): ditto.\n\n\t* ext/openssl/ossl_pkcs7.c (ossl_pkcs7_verify): ditto.\n\n\t* ext/openssl/ossl_pkey_dsa.c (ossl_dsa_initialize): ditto.\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_key_initialize): ditto.\n\t  (ossl_ec_group_initialize): ditto.\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_shutdown): ditto.\n\nWed May 18 11:53:49 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_pkey_ec.c (ossl_ec_point_mul): Validate the\n\t  arguments before passing to EC_POINT(s)_mul(). Add description of this\n\t  method.  [ruby-core:65152] [Bug #10268]\n\n\t* test/openssl/test_pkey_ec.rb (test_ec_point_mul): Test that\n\t  OpenSSL::PKey::EC::Point#mul works.\n\nWed May 18 11:19:59 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/ossl_bn.c (try_convert_to_bnptr): Extracted from\n\t  GetBNPtr(). This doesn't raise exception but returns NULL on error.\n\t  (GetBNPtr): Raise TypeError if conversion fails.\n\t  (ossl_bn_eq): Implement BN#==.\n\t  (ossl_bn_eql): #eql? should not raise TypeError even if the argument\n\t  is not compatible with BN.\n\t  (ossl_bn_hash): Implement BN#hash.\n\n\t* ext/openssl/ossl_bn.c (Init_ossl_bn): Define #== and #hash.\n\n\t* test/openssl/test_bn.rb: Test BN#eql?, #== and #hash\n\nWed May 18 10:17:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_INTEGER_TYPE_P): new macro and\n\t  underlying inline function to check if the object is an\n\t  Integer (Fixnum or Bignum).\n\nWed May 18 09:52:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum, hash_sum, hash_sum_i, enum_sum_i, sum_iter):\n\t  Optimize for hashes when each method isn't redefined.\n\nWed May 18 09:14:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum, int_range_sum): Extract int_range_sum from\n\t  enum_sum.\n\nWed May 18 03:16:06 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (match_values_at): fix regression at r55036.\n\t  MatchData#values_at accepts Range.\n\nWed May 18 02:02:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_aref): remove useless condition and call rb_fix2int.\n\t  rb_reg_nth_match handles negative index.\n\nWed May 18 01:57:43 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (match_values_at): MatchData#values_at supports named captures\n\t  [Feature #9179]\n\n\t* re.c (namev_to_backref_number): separated.\n\nWed May 18 00:05:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): Optimize for a range from int to int.\n\n\t* test/ruby/test_enum.rb (test_range_sum): Move from test_range.rb,\n\t  and add assertions for some conditions.\n\n\t* test/ruby/test_enum.rb (test_hash_sum): Move from test_hash.rb.\n\n\t* test/ruby/test_hash.rb, test/ruby/test_range.rb: Remove test_sum.\n\nTue May 17 23:08:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): [DOC] Write documentation.\n\nTue May 17 22:53:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (enum_sum): Implement Enumerable#sum.\n\n\t* test/ruby/test_enum.rb (test_sum): Test sum for Enumerable.\n\n\t* test/ruby/test_hash.rb (test_sum): Test sum for Hash.\n\n\t* test/ruby/test_range.rb (test_sum): Test sum for Range.\n\nTue May 17 22:11:41 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* object.c, numeric.c, enum.c, ext/-test-/bignum/mul.c,\n\t  lib/rexml/quickpath.rb, lib/rexml/text.rb, lib/rexml/xpath_parser.rb,\n\t  lib/rubygems/specification.rb, lib/uri/generic.rb,\n\t  bootstraptest/test_eval.rb, basictest/test.rb,\n\t  test/-ext-/bignum/test_big2str.rb, test/-ext-/bignum/test_div.rb,\n\t  test/-ext-/bignum/test_mul.rb, test/-ext-/bignum/test_str2big.rb,\n\t  test/csv/test_data_converters.rb, test/date/test_date.rb,\n\t  test/json/test_json_generate.rb, test/minitest/test_minitest_mock.rb,\n\t  test/openssl/test_cipher.rb, test/rexml/test_jaxen.rb,\n\t  test/ruby/test_array.rb, test/ruby/test_basicinstructions.rb,\n\t  test/ruby/test_bignum.rb, test/ruby/test_case.rb,\n\t  test/ruby/test_class.rb, test/ruby/test_complex.rb,\n\t  test/ruby/test_enum.rb, test/ruby/test_eval.rb,\n\t  test/ruby/test_iseq.rb, test/ruby/test_literal.rb,\n\t  test/ruby/test_math.rb, test/ruby/test_module.rb,\n\t  test/ruby/test_numeric.rb, test/ruby/test_range.rb,\n\t  test/ruby/test_rational.rb, test/ruby/test_refinement.rb,\n\t  test/ruby/test_rubyvm.rb, test/ruby/test_struct.rb,\n\t  test/ruby/test_variable.rb, test/rubygems/test_gem_specification.rb,\n\t  test/thread/test_queue.rb: Use Integer instead of Fixnum and Bignum.\n\nTue May 17 15:26:10 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* [Feature #12005] Unify Fixnum and Bignum into Integer\n\n\t* include/ruby/ruby.h (rb_class_of): Return rb_cInteger for fixnums.\n\n\t* insns.def (INTEGER_REDEFINED_OP_FLAG): Unified from\n\t  FIXNUM_REDEFINED_OP_FLAG and BIGNUM_REDEFINED_OP_FLAG.\n\n\t* vm_core.h: Ditto.\n\n\t* vm_insnhelper.c (opt_eq_func): Use INTEGER_REDEFINED_OP_FLAG instead\n\t  of FIXNUM_REDEFINED_OP_FLAG.\n\n\t* vm.c (vm_redefinition_check_flag): Use rb_cInteger instead of\n\t  rb_cFixnum and rb_cBignum.\n\t  (C): Use Integer instead of Fixnum and Bignum.\n\n\t* numeric.c (fix_succ): Removed.\n\t  (Init_Numeric): Define Fixnum as Integer.\n\n\t* bignum.c (bignew): Use rb_cInteger instead of rb_cBignum.\n\t  (rb_int_coerce): replaced from rb_big_coerce and return fixnums\n\t  as-is.\n\t  (Init_Bignum): Define Bignum as Integer.\n\t  Don't define ===.\n\n\t* error.c (builtin_class_name): Return \"Integer\" for fixnums.\n\n\t* sprintf.c (ruby__sfvextra): Use rb_cInteger instead of rb_cFixnum.\n\n\t* ext/-test-/testutil: New directory to test.\n\t  Currently it provides utilities for fixnum and bignum.\n\n\t* ext/json/generator/generator.c: Define mInteger_to_json.\n\n\t* lib/mathn.rb (Fixnum#/): Redefinition removed.\n\nTue May 17 11:58:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_BUILTIN_SETJMP): declare t as NORETURN\n\t  to suppress warnings by -Wsuggest-attribute=noreturn.\n\t  [ruby-core:75510] [Bug #12383]\n\nTue May 17 10:40:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SETJMP): needs the header and proper\n\t  arguments for builtin setjmp functions.\n\nMon May 16 20:00:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.h: Additional uses of ONIG_CASE_MAPPING compilation switch\n\nMon May 16 19:46:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Introducing ONIG_CASE_MAPPING compilation\n\t  switch\n\n\t* include/ruby/oniguruma.h, enc/unicode.h: Using ONIG_CASE_MAPPING\n\t  compilation switch\n\nMon May 16 19:29:31 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update xmlrpc-0.1.1. xmlrpc-0.1.0 didn't allow\n\t  to install on 2.4.0dev.\n\nMon May 16 13:28:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (FUNC_STDCALL, FUNC_CDECL, FUNC_FASTCALL): set\n\t  macro names explicitly to the old names, which are accidentally\n\t  changed at r54985, for backward compatibilities.\n\t  fiddle also depends on these names to fallback to ANSI names.\n\t  [ruby-core:75494] [Bug #12377]\n\nMon May 16 11:39:02 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/xmlrpc.rb, lib/xmlrpc/*, test/xmlrpc: XMLRPC is bundled gem\n\t  on Ruby 2.4. It is extracted to https://github.com/ruby/xmlrpc\n\t  [Feature #12160][ruby-core:74239]\n\t* gems/bundled_gems: ditto.\n\nMon May 16 06:06:21 2016  Eric Wong  <e@80x24.org>\n\n\t* proc.c: fix RDoc of Proc#===/call/yield/[]\n\t  [Bug #12332]\n\nSun May 15 20:55:31 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/timeridconv.rb: don't use keeper thread. [Bug #12342]\n\n\t* test/drb/ut_timerholder.rb: ditto.\n\nSun May 15 16:15:25 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* array.c (rb_ary_entry): extract rb_ary_elt to organize if-conditions\n\t  and check whether is embedded at once.\n\nSun May 15 10:57:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_get_ev_const): warn deprecated constant even\n\t  in the class context.  [ruby-core:75505] [Bug #12382]\n\nSun May 15 03:13:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* iseq.h (struct iseq_compile_data): use struct rb_id_table\n\t  instead of st_table.\n\n\t* iseq.c (prepare_iseq_build): don't allocate ivar_cache_table\n\t  until it has at least one element.\n\n\t* iseq.c (compile_data_free): free ivar_cache_table only if it\n\t  is allocated.\n\n\t* compile.c (get_ivar_ic_value): allocate if the table is not\n\t  allocated yet.\n\nSat May 14 09:04:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/mkmf.rb (pkg_config): use xsystem consistently to set up\n\t  library path environment variable as well as latter pkg-config\n\t  calls.  [ruby-dev:49619] [Bug #12379]\n\nSat May 14 00:16:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (make_seed_value): append leading-zero-guard and get\n\t  rid of making a local copy of the seed.\n\nFri May 13 08:46:42 2016  cremno  <cremno@mail.ru>\n\n\t* NEWS: drop FreeBSD < 4 support.  [Fix GH-1339]\n\t  The most recent version affected by this is 3.5 and was released\n\t  in 2000.\n\t  https://www.freebsd.org/releases/3.5R/announce.html\n\t  https://en.wikipedia.org/wiki/History_of_FreeBSD#Version_history\n\nFri May 13 03:12:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/defines.h (GCC_VERSION_SINCE): moved from internal.h.\n\nFri May 13 03:11:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (__builtin_constant_p): check.\n\n\t* internal.h: Use HAVE_BUILTIN___BUILTIN_CONSTANT_P\n\nFri May 13 03:10:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: use alternative keyword\n\t  to avoid macros conflicts with them.\n\nThu May 12 01:54:08 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/mkmf.rb (try_func): get rid of conflict of declarations of\n\t  main().  checking local symbol reference does not make sense.\n\nThu May 12 00:18:19 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/Makefile.sub (HAVE_QSORT_S): use qsort_s only for Visual Studio\n\t  2012 or later, because VS2010 seems to causes a SEGV in\n\t  test/ruby/test_enum.rb.\n\nWed May 11 23:59:47 2016  Masaya Tarui  <tarui@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_getivar): describe fast-path explicit\n\t  (compiler friendly). [Bug #12274].\n\nWed May 11 21:30:07 2016  Masaya Tarui  <tarui@ruby-lang.org>\n\n\t* compile.c (iseq_compile_each): share InlineCache during same\n\t  instance variable accesses. Reducing memory consumption,\n\t  rising cache hit rate and rising branch prediction hit rate\n\t  are expected. A part of [Bug #12274].\n\n\t* iseq.h (struct iseq_compile_data): introduce instance\n\t  variable IC table for sharing.\n\n\t* iseq.c (prepare_iseq_build, compile_data_free):\n\t  construct/destruct above table.\n\nWed May 11 17:18:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* util.c (ruby_qsort): use qsort_s if available, for Microsoft\n\t  Visual Studio 2005 (msvcr80.dll) and mingw.\n\nWed May 11 10:33:26 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* COPYING: Remove trailing-whitespaces.\n\t  [ci skip][fix GH-1348]\n\nTue May 10 21:05:45 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* insns.def (defineclass): Also raise an error when redeclaring the\n\t  superclass of a class as Object and it has another superclass.\n\t  [Bug #12367] [ruby-core:75446]\n\n\t* test/ruby/test_class.rb: test for above.\n\nTue May 10 14:57:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (obj_random_bytes): base on bytes method instead of\n\t  rand method, not to call toplevel rand method.\n\nTue May 10 13:07:28 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (-fexcess-precision=standard): before r54895 -std=c99\n\t  is specified and it implied -fexcess-precision=standard.\n\t  Now with -std=gnu99, it should be explicitly specified.\n\t  https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\n\nMon May  9 10:51:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_atfork_internal): move th to an argument.\n\n\t* thread.c (rb_thread_atfork): do not repeat GET_THREAD().\n\nMon May  9 10:46:36 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_atfork, rb_thread_atfork_before_exec): do\n\t  nothing unless working fork is available.\n\n\t* thread_sync.c (rb_mutex_abandon_all): define only if working\n\t  fork is available.\n\n\t* thread_sync.c (rb_mutex_abandon_keeping_mutexes): ditto.\n\n\t* thread_sync.c (rb_mutex_abandon_locking_mutex): ditto.\n\n\t* thread_win32.c (gvl_init): never used.\n\nMon May  9 07:18:06 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/{defines,ruby}.h: need to define function attributes\n\t  alternatives in defines.h instead of ruby.h, because they are used\n\t  in oniguruma.h and the header used without including ruby.h at\n\t  encoding library sources.\n\nMon May  9 06:30:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* include/ruby/ruby.h (CONSTFUNC, PUREFUNC): fixed build errors on\n\t  non-gcc build environments introduced at r54952.\n\nMon May  9 02:51:51 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (rb_gc_unprotect_logging): throw rb_memerror when it cannot\n\t  allocate memory. This is pointed out by Facebook's Infer.\n\n\t* gc.c (gc_prof_setup_new_record): ditto.\n\n\t* regparse.c (parse_regexp): ditto.\n\n\t* util.c (MALLOC): use xmalloc and xfree like above.\n\nMon May  9 02:39:16 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: check function attribute const and pure,\n\t  and define CONSTFUNC and PUREFUNC if available.\n\t  Note that I don't add those options as default because\n\t  it still shows many false-positive (it seems not to consider\n\t  longjmp).\n\n\t* vm_eval.c (stack_check): get rb_thread_t* as an argument\n\t  to avoid duplicate call of GET_THREAD().\n\nSun May  8 21:01:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/openssl/extconf.rb: assume it doesn't have SSLv2 related\n\t  functions when OPENSSL_NO_SSL2 is defined.\n\t  Usually openssl's header and the library (libssl) have the same\n\t  set of functions, but on some environment the library has functions\n\t  whose headers doesn't declare. (openssl/opensslconf.h and libssl.so\n\t  aren't be synchronized)\n\t  To detect such case explicitly check feature macro and remove\n\t  related functions.\n\nSun May  8 18:51:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (rb_home_dir_of): return the default home path if the\n\t  user name is the current user name, on platforms where struct\n\t  pwd is not supported.  a temporary measure against\n\t  [Bug #12226].\n\nSun May  8 08:51:38 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Wsuggest-attribute=format and suppress warnings.\n\nSun May  8 08:31:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Wsuggest-attribute=noreturn and suppress warnings.\n\nSun May  8 08:19:16 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: add -Werror=implicit-int to avoid missing type of\n\t  function declaration.\n\nSat May  7 22:22:37 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/ssl.rb: Accept string value for SSLCertName. It is used\n\t  to invoke ssl server with command line.\n\t  [fix GH-1329] Patch by @kerlin\n\t* test/webrick/test_ssl_server.rb: Added test for GH-1329\n\nSat May  7 21:55:12 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/webrick/test_ssl_server.rb: Added basic test for `webrick/ssl`\n\nSat May  7 16:22:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (int_pair_to_real_inclusive): optimize to multiply\n\t  without Bignum.\n\nSat May  7 07:58:02 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* process.c (rb_exec_getargs): honor the expected argument types\n\t  over the conversion method.  the basic language functionality\n\t  should be robust.  [ruby-core:75388] [Bug #12355]\n\nFri May  6 08:16:26 2016  David Silva  <david.silva@digital.cabinet-office.gov.uk>\n\n\t* enum.c (enum_find): [DOC] add more examples to the documentation\n\t  of Enumerable#detect, to show that it equals to Enumerable#find.\n\t  [Fix GH-1340]\n\nThu May  5 18:08:31 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* test/ruby/test_complexrational.rb: Remove duplicated raise.\n\nThu May  5 14:41:05 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* string.c (rb_str_sub): Fix a special match variable name.\n\t  [ci skip]\n\nThu May  5 12:22:17 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_eval_cmd, rb_catch_obj): use TH_JUMP_TAG with the\n\t  same rb_thread_t used for TH_PUSH_TAG, instead of JUMP_TAG with\n\t  the current thread global variable.\n\nThu May  5 10:49:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* random.c (fill_random_bytes_syscall): use arc4random_buf if\n\t  available.\n\nWed May  4 23:13:58 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* numeric.c (fix_plus): Remove rb_nucomp_add prototype\n\t  declaration.\n\n\t* numeric.c (fix_mul): Remove rb_nucomp_mul prototype\n\t  declaration.\n\n\t* internal.h (rb_nucomp_add, rb_nucomp_mul): add prototype\n\t  declarations.\n\nWed May  4 18:38:00 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* lib/net/http/header.rb (Net::HTTPHeader#{each_header,each_name,\n\t  each_capitalized_name,each_value,each_capitalized}): Return\n\t  sized enumerators.\n\n\t* test/net/http/test_httpheader.rb: add test for above.\n\nWed May  4 17:53:15 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* lib/set.rb (Set#{delete_if,keep_if,collect!,reject!,select!,classify,divide},\n\t  SortedSet#{delete_if,keep_if}): Return sized enumerators.\n\n\t* test/test_set.rb: add test for above.\n\nTue May  3 23:25:48 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* numeric.c: [DOC] Update result of 123456789 ** -2.\n\t  [ruby-dev:49606] [Bug #12339]\n\nTue May  3 23:13:16 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* internal.h (RCOMPLEX_SET_IMAG): undef RCOMPLEX_SET_IMAG\n\t  instead of duplicated undef RCOMPLEX_SET_REAL.\n\nTue May  3 22:55:07 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* complex.c (rb_complex_set_imag): Fix to properly set imag\n\t  of complex.\n\nTue May  3 22:19:55 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (warnflags): use -std=gnu99 instead of\n\t  -std=iso9899:1999. [Feature #12336]\n\nTue May  3 22:10:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (count_utf8_lead_bytes_with_word): Use __builtin_popcount\n\t  only if it can use SSE 4.2 POPCNT whose latency is 3 cycle.\n\n\t* internal.h (rb_popcount64): use __builtin_popcountll because now\n\t  it is in fast path.\n\nTue May  3 14:19:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (new_if_gen): set newline flag to NODE_IF to trace all\n\t  if/elsif statements.  [ruby-core:67720] [Bug #10763]\n\nTue May  3 05:35:54 2016  Eric Wong  <e@80x24.org>\n\n\t* process.c (disable_child_handler_fork_child):\n\t  initialize handler for SIGPIPE for !POSIX_SIGNAL\n\nMon May  2 23:03:42 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c, include/ruby/win32.h (rb_w32_utruncate): implements new\n\t  truncate alternative which accepts UTF-8 path.\n\n\t* file.c (truncate): use above function.\n\t  [Bug #12340]\n\nMon May  2 20:59:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (str_coderange): to avoid function call when the string already\n\t  has coderange information.\n\n\t* re.c (rb_reg_prepare_enc): add shortcut path when the regexp has\n\t  the same encoding of given string.\n\n\t* re.c (rb_reg_prepare_re): avoid duplicated allocation of\n\t  onig_errmsg_buffer.\n\n\nMon May  2 12:34:52 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_refinement.rb (test_inspect): Use Integer instead of\n\t  Fixnum.\n\nMon May  2 06:58:38 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* complex.c: Don't refer rb_cFixnum and rb_cBignum.\n\t  (k_fixnum_p): Use FIXNUM_P.\n\t  (k_bignum_p): Use RB_TYPE_P.\n\nMon May  2 01:27:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_numeric.rb (test_step): Use Integer::FIXNUM_MAX.\n\nMon May  2 01:15:01 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_module.rb (test_name): Use Integer instead of Fixnum.\n\nMon May  2 01:00:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/test/unit/assertions.rb (assert_fixnum): Defined.\n\t  (assert_bignum): Defined.\n\n\t* test/ruby/test_bignum.rb: Use assert_bignum.\n\n\t* test/ruby/test_integer_comb.rb: Use assert_fixnum and assert_bignum.\n\n\t* test/ruby/test_optimization.rb: Ditto.\n\nMon May  2 00:41:53 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* vm_trace.c (recalc_remove_ruby_vm_event_flags): Add a cast to\n\t  avoid signed integer overflow.\n\nMon May  2 00:06:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/envutil.rb: Define Integer::{FIXNUM_MIN,FIXNUM_MAX}.\n\n\t* test/ruby/test_bignum.rb: Use Integer::{FIXNUM_MIN,FIXNUM_MAX}.\n\n\t* test/ruby/test_bignum.rb: Ditto.\n\n\t* test/ruby/test_integer_comb.rb: Ditto.\n\n\t* test/ruby/test_marshal.rb: Ditto.\n\n\t* test/ruby/test_optimization.rb: Ditto.\n\nSun May  1 23:59:59 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* array.c (rb_ary_sum): fix for mathn\n\n\t* test/ruby/test_array.rb (test_sum): ditto.\n\nSun May  1 23:51:54 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Options#non_options): fixed wrong regexp.\n\t  if both positives and negatives were specified, positives had to\n\t  be specified from the beginning.\n\nSun May  1 21:00:07 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c: drop Win2K support.\n\nSun May  1 20:39:47 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* cont.c, hash.c, random.c, win32/win32.c: cleanup some Win9x/ME/NT4\n\t  support leftovers.\n\t  [fix GH-1328] patched by @cremno\n\nSun May  1 07:30:44 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (search_nonascii): use nlz on big endian environments.\n\n\t* internal.h (nlz_intptr): defined.\n\nSun May  1 00:03:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (__builtin_ctz): check.\n\n\t* configure.in (__builtin_ctzll): check.\n\n\t* internal.h (rb_popcount32): defined for ntz_int32.\n\t  it can use __builtin_popcount but this function is not used on\n\t  GCC environment because it uses __builtin_ctz.\n\t  When another function uses this, using __builtin_popcount\n\t  should be re-considered.\n\n\t* internal.h (rb_popcount64): ditto.\n\n\t* internal.h (ntz_int32): defined for ntz_intptr.\n\n\t* internal.h (ntz_int64): defined for ntz_intptr.\n\n\t* internal.h (ntz_intptr): defined as ntz for uintptr_t.\n\n\t* string.c (search_nonascii): unroll and use ntz.\n\nSat Apr 30 21:54:13 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (Init_Numeric): Gather Fixnum method definitions.\n\nSat Apr 30 21:28:14 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_div): Define Integer#/.\n\n\t* bignum.c (rb_big_div): Don't define Bignum#/.\n\n\t* lib/mathn.rb (Integer#/): Replace Integer#/ instead of Bignum#/.\n\nSat Apr 30 21:11:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_plus): Define Integer#+.\n\n\t* bignum.c (rb_big_plus): Don't define Bignum#+.\n\nSat Apr 30 21:01:20 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_minus): Define Integer#-.\n\n\t* bignum.c (rb_big_minus): Don't define Bignum#-.\n\nSat Apr 30 20:53:33 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_mul): Define Integer#*.\n\n\t* bignum.c (rb_big_mul): Don't define Bignum#*.\n\nSat Apr 30 20:30:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_modulo): Define Integer#%.\n\n\t* bignum.c (rb_big_modulo): Don't define Bignum#%.\n\nSat Apr 30 20:17:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_equal): Define Integer#==.\n\n\t* bignum.c (rb_big_eq): Don't define Bignum#==.\n\nSat Apr 30 19:41:15 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_gt): Define Integer#>.\n\n\t* bignum.c (rb_big_gt): Don't define Bignum#>.\n\t  Renamed from big_gt.\n\n\t* internal.h (rb_big_gt): Declared.\n\nSat Apr 30 19:24:40 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_ge): Define Integer#>=.\n\n\t* bignum.c (rb_big_ge): Don't define Bignum#>=.\n\t  Renamed from big_ge.\n\n\t* internal.h (rb_big_ge): Declared.\n\nSat Apr 30 19:20:40 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/standard_library.rdoc: Remove obsoleted classes and modules.\n\nSat Apr 30 19:09:23 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_lt): Define Integer#<.\n\n\t* bignum.c (rb_big_lt): Don't define Bignum#<.\n\t  Renamed from big_lt.\n\n\t* internal.h (rb_big_lt): Declared.\n\nSat Apr 30 18:44:05 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_le): Define Integer#<=.\n\n\t* bignum.c (rb_big_le): Don't define Bignum#<=.\n\t  Renamed from big_le.\n\n\t* internal.h (rb_big_le): Declared.\n\nSat Apr 30 18:11:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* bignum.c (Init_Bignum): Define Integer::GMP_VERSION.\n\nSat Apr 30 16:58:18 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_remainder): Define Integer#remainder.\n\n\t* bignum.c (rb_big_remainder): Don't define Bignum#remainder.\n\n\t* internal.h (rb_big_remainder): Declared.\n\nSat Apr 30 15:29:24 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_uminus): {Fixnum,Bignum}#-@ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_uminus): Don't define Bignum#-@.\n\nSat Apr 30 14:42:20 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_idiv): {Fixnum,Bignum}#div is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_idiv): Don't define Bignum#div.\n\nSat Apr 30 14:25:55 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_modulo): {Fixnum,Bignum}#modulo is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_modulo): Don't define Bignum#modulo.\n\nSat Apr 30 14:04:30 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_divmod): {Fixnum,Bignum}#divmod is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_divmod): Don't define Bignum#divmod.\n\nSat Apr 30 13:20:00 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_fdiv): {Fixnum,Bignum}#fdiv is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_fdiv): Don't define Bignum#fdiv.\n\nSat Apr 30 12:25:43 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_pow): {Fixnum,Bignum}#** is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_pow): Don't define Bignum#**.\n\nSat Apr 30 12:28:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* bignum.c (rb_big_comp): Renamed from rb_big_neg.\n\n\t* numeric.c (fix_comp): Renamed from fix_rev.\n\nSat Apr 30 12:25:43 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_comp): {Fixnum,Bignum}#~ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_neg): Don't define Bignum#~.\n\n\t* internal.h (rb_big_neg): Declared.\n\nSat Apr 30 12:07:42 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_and): {Fixnum,Bignum}#& is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_and): Don't define Bignum#&.\n\nSat Apr 30 11:56:15 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/thread: removed dummy extension library.  thread_sync.c\n\t  provides \"thread.rb\" already.\n\nSat Apr 30 11:53:48 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_or): {Fixnum,Bignum}#| is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_or): Don't define Bignum#|.\n\nSat Apr 30 11:18:47 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* vm_trace.c: Fix typos. [ci skip]\n\nSat Apr 30 10:09:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/pty/pty.c (establishShell): honor USER environment variable\n\t  and login name over uid, one uid can be shared by some login\n\t  names.\n\nFri Apr 29 22:40:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/maintainers.rdoc (ext/io/nonblock): still maintained, as\n\t  well as ext/io/wait, which is the origin.\n\nFri Apr 29 21:18:12 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* doc/maintainers.rdoc (ext/win32): of course, it's still maintained.\n\nFri Apr 29 21:03:10 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* gems/bundled_gems: Update latest gems, test-unit-3.1.8 and rake-11.1.2.\n\nFri Apr 29 20:43:02 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Update latest maintainers list on Ruby 2.4\n\nFri Apr 29 19:52:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Removed deprecated entries. These are already deleted.\n\nFri Apr 29 19:48:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/maintainers.rdoc: Removed Ruby 1.8 entries. It's not necessary to\n\t  Ruby 2.4 or later.\n\nThu Apr 28 17:03:17 2016  Nicholas Maccharoli  <nmaccharoli@gmail.com>\n\n\t* hash.c (rb_hash_update_{block,func}_callback): dry up hash\n\t  update callback code.  [Fix GH-1338]\n\nThu Apr 28 16:52:05 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_prepare_enc): use rb_enc_asciicompat(enc) instead of\n\t  rb_enc_str_asciicompat_p(str) to avoid useless rb_enc_get(str) call.\n\nThu Apr 28 16:33:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb: [DOC] fix example code.  base on the code by\n\t  Semyon Gaivoronskiy in [ruby-core:75224].  [Bug #12323]\n\nThu Apr 28 09:33:03 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.4.\n\t  Please see entries of 2.6.4 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nThu Apr 28 04:49:07 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in (rb_cv_lgamma_r_pm0): check if lgamma_r(+0.0)\n\t  returns positive infinity, in addition to lgamma_r(-0.0).\n\t  AIX returns an incorrect result of negative infinity.\n\n\t* math.c (ruby_lgamma_r): handle +0.0, in addition to -0.0.\n\nThu Apr 28 01:11:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c: define _DEFAULT_SOURCE because glibc 2.20 deprecates\n\t  _BSD_SOURCE.\n\t  https://sourceware.org/glibc/wiki/Release/2.20\n\nThu Apr 28 00:27:55 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_xor): {Fixnum,Bignum}#^ is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_xor): Don't define Bignum#^.\n\nWed Apr 27 20:53:59 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_aref): {Fixnum,Bignum}#[] is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_aref): Don't define Bignum#<<.\n\n\t* internal.h (rb_big_aref): Declared.\n\nWed Apr 27 16:10:35 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/instruction.rb: fix to follow current implementation.\n\nWed Apr 27 15:47:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/stringio/stringio.c (strio_s_new): warn if a block is given,\n\t  as well as IO.new.\n\nWed Apr 27 14:29:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (ruby_only_for_internal_use): raise fatal error when\n\t  deprecated function only for internal use is called, not just a\n\t  warning.\n\nTue Apr 26 23:42:30 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb (rel): should not raise exceptions even if\n\t  the user input is wrong.  only reports the error and continue process.\n\nTue Apr 26 23:35:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (process_options): convert -e script to the encoding\n\t  given by a command line option on Windows.  assume it is the\n\t  expected encoding.  [ruby-dev:49461] [Bug #11900]\n\nTue Apr 26 21:11:02 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_lshift): {Fixnum,Bignum}#<< is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_lshift): Don't define Bignum#<<.\n\nTue Apr 26 20:59:40 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_rshift): {Fixnum,Bignum}#>> is unified into\n\t  Integer.\n\n\t* bignum.c (rb_big_rshift): Don't define Bignum#>>.\n\nTue Apr 26 20:46:16 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_size): {Fixnum,Bignum}#size is unified into Integer.\n\n\t* bignum.c (rb_big_size_m): Don't define Bignum#size.\n\n\t* internal.h (rb_big_size_m): Declared.\n\nTue Apr 26 20:09:08 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (rb_int_bit_length): {Fixnum,Bignum}#bit_length is\n\t  unified into Integer.\n\n\t* bignum.c (rb_big_bit_length): Don't define Bignum#bit_length.\n\n\t* internal.h (rb_big_bit_length): Declared.\n\nTue Apr 26 19:56:16 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* numeric.c (int_abs): Integer#{abs,magnitude} moved from\n\t  Fixnum and Bignum.\n\n\t* bignum.c (rb_big_abs): Don't define Bignum#{abs,magnitude}.\n\n\t* internal.h (rb_big_abs): Declared.\n\nMon Apr 25 14:39:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/rbconfig/sizeof/extconf.rb: just check the existence of each\n\t  types, to reduce configuration time, especially cross-compiling.\n\n\t* template/sizes.c.tmpl: calculate sizes of checked types at\n\t  compilation time.\n\nMon Apr 25 11:27:27 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* doc/extension.rdoc: Improvements to english grammars.\n\t  [Bug #12246][ruby-core:74792][ci skip]\n\nMon Apr 25 11:17:50 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* encoding.c: Fix return value of `Encoding::ISO8859_1.name`\n\t  [Bug #12313][ruby-core:75147][ci skip]\n\t* ext/bigdecimal/bigdecimal.c: Fix code sample of `BigDecimal.new`\n\nSun Apr 24 23:29:16 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in: add missing -lm for AIX.\n\nSun Apr 24 18:33:58 2016  Kazuki Tsujimoto  <kazuki@callcc.net>\n\n\t* vm_insnhelper.c (INLINE): disable r54738 if __NO_INLINE__ is defined.\n\t  It caused \"undefined reference to `vm_getivar'\".\n\nSun Apr 24 09:32:12 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* test/ruby/test_array.rb: Add test cases for Array#sum with\n\t  non-numeric objects.\n\nSun Apr 24 04:21:27 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* vm_insnhelper.c (INLINE): define as `inline` when it is optimized.\n\t  define as `static inline` when it is not optimized to keep\n\t  the symbol generated.\n\n\t* vm_insnhelper.c (vm_getivar): use `INLINE` to force inline\n\t  so that a compiler inlines it into vm_getinstancevariable\n\t  and optimizes out is_attr and related branches.\n\n\t* vm_insnhelper.c (vm_getivar): use `inline` to recommend inline.\n\t  Without this vm1_ivar_set is degraded.\n\n\t  benchmark results:\n\t  minimum results in each 5 measurements.\n\t  Execution time (sec)\n\t  name    ruby 2.4.0dev (2016-04-23 trunk 54727) [x86_64-linux]   ruby 2.4.0dev (2016-04-23 trunk 54733) [x86_64-linux]       built-ruby\n\t  loop_whileloop 0.641                                                   0.642 0.646\n\t  vm1_ivar* 1.002                                                   0.999 0.831\n\t  vm1_ivar_set* 0.369                                                   1.106 0.362\n\n\t  Speedup ratio: compare with the result of `ruby 2.4.0dev (2016-04-23\n\t  trunk 54727) [x86_64-linux]' (greater is better)\n\t  name    ruby 2.4.0dev (2016-04-23 trunk 54733) [x86_64-linux]\n\t  built-ruby\n\t  loop_whileloop\n\t  0.998        0.991\n\t  vm1_ivar*\n\t  1.003        1.205\n\t  vm1_ivar_set*\n\t  0.334        1.018\n\nSat Apr 23 18:01:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* vm_insnhelper.c (vm_getivar): specify inline instead of static inline.\n\t  vm_getivar is called by vm_call_ivar and vm_getinstancevariable.\n\t  At least with GCC 4.8 and 5.3 on Linux, they are inlining it into\n\t  vm_call_ivar but not vm_getinstancevariable.\n\t  By `inline`, they correctly inline it and gains performance.\n\n\t  Speedup ratio: compare with the result of `ruby 2.4.0dev (2016-04-23\n\t  trunk 54727) [x86_64-linux]' (greater is better)\n\t  name    built-ruby\n\t  loop_whileloop       1.001\n\t  vm1_ivar*            1.189\n\t  vm1_ivar_set*        1.024\n\n\t  Note the `inline`'s meaning is different between old GCC\n\t  and C99. Old GCC's inline means C99's extern inline.\n\t  https://gcc.gnu.org/onlinedocs/gcc/Inline.html\n\t  Since Ruby specify -std=iso9899:1999, it works like C99.\n\nSat Apr 23 16:11:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_mul_size_overflow): use UNLIKELY\n\t  by user side to improve generality.\n\nSat Apr 23 16:10:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_LIKELY): use prefix in ruby.h.\n\n\t* intern.h (LIKELY): define with RB_LIKELY.\n\nSat Apr 23 13:27:25 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* NEWS: Add descriptions for Time#to_time updates.\n\t  [Bug #12271]\n\nSat Apr 23 13:21:24 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* NEWS: Add descriptions for DateTime#to_time updates.\n\t  [Bug #12189]\n\nSat Apr 23 11:21:27 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* ext/date/date_core.c (Init_date_core): [DOC] Convert DateTime\n\t  documentation to RDoc from Markdown.\n\t  [ruby-core:75136] [Bug #12311]\n\nSat Apr 23 09:03:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c: cygwin does not use w32_cmdvector, command line can be\n\t  other than UTF-8.  [ruby-dev:49519] [Bug #12184]\n\nSat Apr 23 01:00:03 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* configure.in: don't use the system-provided round(3) on AIX.\n\t  In AIX, round(0.49999999999999994) returns 1.0.\n\t  Use round() in numeric.c instead.\n\nFri Apr 22 21:00:44 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/ruby/test_time_tz.rb: Tests depends on Europe/Moscow removed\n\t  to avoid test failures due to the tzdata change.\n\t  https://github.com/eggert/tz/commit/8ee11a301cf173afb0c76e0315b9f9ec8ebb9d95\n\t  Found by naruse.\n\nFri Apr 22 20:18:40 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_mul_size_overflow): added to handle\n\t  mul overflow efficiently.\n\n\t* include/ruby/ruby.h (rb_alloc_tmp_buffer2): use rb_mul_size_overflow\n\t  and avoid division where it can define DSIZE_T.\n\n\t* gc.c (xmalloc2_size): moved from ruby.h and use rb_mul_size_overflow.\n\nFri Apr 22 20:34:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* time.c (time_asctime): [DOC] add ctime example, not only\n\t  asctime.  [ruby-core:75126] [Bug #12310]\n\nFri Apr 22 18:44:32 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* variable.c: use uint32_t instead of long to avoid confusion about\n\t  the type of ivtbl->numiv.\n\nFri Apr 22 15:09:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval_jump.c (exec_end_procs_chain): restore previous error info\n\t  for each end procs.  [ruby-core:75038] [Bug #12302]\n\nFri Apr 22 15:04:56 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: the fullpath of merger.rb is too long to\n\t  copy&paste on Windows.  show shorter name instead on the platform.\n\t  I'm sure that the user of this command on Windows is only me.\n\nFri Apr 22 14:52:04 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/merger.rb: remove temporary file.\n\nFri Apr 22 11:27:03 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http.rb: Improve documentation for SSL requests via GET method.\n\t  [fix GH-1325][ci skip] Patch by @jsyeo\n\nFri Apr 22 10:51:13 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/ssl.rb: Support to add SSLCiphers option.\n\t  [fix GH-1321] Patch by @rhadoo\n\nFri Apr 22 10:43:19 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* file.c, win32/file.c: Removed obsoleted safe level checks.\n\t  [fix GH-1327] Patch by @cremno\n\nFri Apr 22 10:01:48 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* benchmark/bm_so_meteor_contest.rb: fix a typo.\n\t  [fix GH-1330][ci skip] Patch by @sachin21\n\nFri Apr 22 04:57:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (rb_alloc_tmp_buffer_with_count): added like xmalloc2 to\n\t  avoid duplicated check of size.\n\n\t* gc.c (ruby_xmalloc2): added to keep separate layers.\n\n\t* include/ruby/ruby.h (rb_alloc_tmp_buffer2): added to check\n\t  the size more statically.\n\nFri Apr 22 04:54:40 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (LIKELY): moved from internal.h.\n\n\t* include/ruby/ruby.h (UNLIKELY): ditto.\n\nThu Apr 21 01:44:19 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* gc.c (objspace_malloc_prepare): remove size check because it is\n\t  used by objspace_xmalloc and objspace_xcalloc.\n\t  objspace_xmalloc introduces its own check in this commit.\n\t  objspace_xcalloc checks with xmalloc2_size (ruby_xmalloc2_size).\n\n\t* gc.c (objspace_xmalloc0): common xmalloc function.\n\n\t* gc.c (objspace_xmalloc): introduce its own size check.\n\n\t* gc.c (objspace_xmalloc2): separated from ruby_xmalloc2 to clarify\n\t  the layer who has the responsibility to check the size.\n\n\t* gc.c (objspace_xrealloc): remove duplicated size check.\n\n\t* gc.c (ruby_xmalloc2): use objspace_xmalloc2.\n\n\t* include/ruby/ruby.h (ruby_xmalloc2_size): follow the size limit\n\t  as SSIZE_MAX. Note that ISO C says size_t is unsigned integer.\n\nThu Apr 21 12:14:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: check if succeeded in creating config.h.\n\n\t* tool/ifchange: ignore failures when TEST_COLORS unmatched. just\n\t  use the default value if expected name is not contained in it.\n\t  [ruby-core:75046] [Bug #12303]\n\nWed Apr 20 17:33:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/cgi/escape/escape.c (cgiesc_unescape): define unescape\n\t  method instead of _unescape, and should pass the optional\n\t  argument to the super method.\n\n\t* lib/cgi/util.rb (CGI::Util#_unescape): remove intermediate\n\t  method.\n\nWed Apr 20 15:52:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (syntax_error_initialize): move the default message,\n\t  \"compile error\", from parse.y.  the default parameter should\n\t  belong to the class definition.\n\n\t* parse.y (yycompile0): use the default parameter.\n\nWed Apr 20 10:25:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (append_compile_error): use rb_syntax_error_append.\n\n\t* error.c (rb_syntax_error_append): append messages into a\n\t  SyntaxError exception instance.\n\n\t* parse.y (yycompile0): make new SyntaxError instance in main\n\t  mode, otherwise error_buffer should be a SyntaxError if error\n\t  has occurred.\n\nTue Apr 19 17:42:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (err_vcatf): rename, and separate appending message from\n\t  creating a string buffer.\n\n\t* error.c (rb_syntax_error_append): merge rb_error_vsprintf and\n\t  rb_compile_err_append.\n\n\t* parse.y (parser_compile_error): use rb_syntax_error_append.\n\nTue Apr 19 13:46:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (append_compile_error, compile_bug): pass iseq and get\n\t  error info and file from it, not by the thread error info.\n\n\t* error.c (rb_report_bug_valist): take va_list instead of variadic\n\t  arguments, and just report the bug but not abort.\n\nTue Apr 19 13:18:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/time.rb: revert r54167 because it would break\n\t  backward compatibilities, and it is documented that\n\t  Time.parse does not take into account time zone\n\t  abbreations other than ones described in RFC 822\n\nTue Apr 19 13:12:03 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ChangeLog: Fix dates of previous commits\n\nTue Apr 19 12:45:03 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ChangeLog: Add descriptions for logger updates\n\t* NEWS: Add descriptions for logger updates\n\nTue Apr 19 12:45:02 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Add shift_period_suffix option\n\nTue Apr 19 12:45:01 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Allow specifying logger parameters in constructor\n\t  such as level, progname, datetime_format, formatter.\n\nMon Apr 18 16:07:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_peephole_optimize): should not replace the\n\t  current target INSN, not to follow the replaced dangling link in\n\t  the caller.  [ruby-core:74993] [Bug #11816]\n\nMon Apr 18 12:56:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flo_truncate): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (int_truncate): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\nSun Apr 17 04:18:56 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: revisions are strings.\n\nSat Apr 16 14:26:49 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* ext/date/date_core.c : remove not used f_getlocal macro.\n\t  After r54553 f_getlocal macro is not used.\n\nSat Apr 16 14:15:24 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* ext/date/date_core.c : remove not used f_utc6 macro.\n\t  After r54169 f_utc6 macro is not used.\n\nSat Apr 16 10:00:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* struct.c (struct_make_members_list, rb_struct_s_def): member\n\t  names should be unique. [ruby-core:74971] [Bug #12291]\n\n\t* struct.c (struct_make_members_list): extract making member name\n\t  list from char* va_list, with creating symbols without\n\t  intermediate IDs.\n\nSat Apr 16 01:33:27 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: sort revisions.\n\nSat Apr 16 01:16:02 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Don't yield same element twice.\n\t  Found by nagachika.\n\nSat Apr 16 01:03:32 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Fix SEGV by [1/2r, 1].sum.\n\nFri Apr 15 23:52:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* rational.c (rb_rational_plus): rename from rb_rational_add\n\t  to be aligned with rb_fix_plus.\n\n\t* array.c (rb_ary_sum): ditto.\n\n\t* internal.h: ditto.\n\nFri Apr 15 23:42:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* rational.c (rb_rational_add): rename from nurat_add.\n\n\t* array.c (rb_ary_sum): use rb_rational_add directly.\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for an array of\n\t  Rational values.\n\nFri Apr 15 22:31:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* array.c (rb_ary_sum): apply the precision compensated algorithm\n\t  for an array in which Rational and Float values are mixed.\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for the above\n\t  change.\n\nFri Apr 15 22:30:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_setname): defer setting native thread name\n\t  set in initialize until the native thread is created.\n\t  [ruby-core:74963] [Bug #12290]\n\nFri Apr 15 20:27:16 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/irb/ext/save-history.rb: Fix NoMethodError when method is not defined.\n\nFri Apr 15 15:38:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* common.mk (benchmark): order options for built-ruby and compare-ruby.\n\nFri Apr 15 14:14:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/ruby/test_array.rb (test_sum): add assertions for Rational and\n\t  Complex numbers.\n\nFri Apr 15 10:07:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/console/console.c (console_key_pressed_p): raise the same\n\t  exception, \"unknown virtual key code\", for names with nul chars.\n\t  though console_win32_vk() considers the length and can deal with\n\t  nul chars, rb_sprintf() raised at PRIsVALUE previously, so quote\n\t  it if it is unprintable.\n\nFri Apr 15 09:02:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/console/console.c (rb_sym2str): fallback definition for\n\t  older ruby.  [ruby-core:74953] [Bug #12284]\n\nThu Apr 14 21:46:36 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Support the optional argument, init, and\n\t  block.\n\nThu Apr 14 19:02:41 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/irb/ext/save-history.rb: suppress warning: method redefined;\n\t  discarding old save_history=.\n\nThu Apr 14 14:58:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/tk/tkutil/tkutil.c (tk_hash_kv): the third argument can be\n\t  nil not only an Array.  reported by @windwiny at\n\t  https://github.com/ruby/ruby/commit/cdaa94e#commitcomment-17096618\n\nThu Apr 14 14:28:55 2016  cremno phobia  <cremno@mail.ru>\n\n\t* cont.c (fiber_initialize_machine_stack_context): fix wrong\n\t  _MSC_VER check, should be decimal but not hexadecimal.\n\t  [ruby-core:74936] [Bug #12279]\n\nWed Apr 13 22:51:38 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* array.c (rb_ary_sum): Array#sum is implemented.\n\t  Kahan's compensated summation algorithm for precise sum of float\n\t  numbers is moved from ary_inject_op in enum.c.\n\n\t* enum.c (ary_inject_op): Don't specialize for float numbers.\n\n\t  [ruby-core:74569] [Feature #12217] proposed by mrkn.\n\nWed Apr 13 15:56:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flo_ceil): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (flo_floor): add an optional parameter, digits, as\n\t  well as Float#round.  [Feature #12245]\n\n\t* numeric.c (int_ceil): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\n\t* numeric.c (int_floor): add an optional parameter, digits, as\n\t  well as Integer#round.  [Feature #12245]\n\nWed Apr 13 14:47:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (Init_File): add alias File.empty? to File.zero?.\n\t  [Feature #9969]\n\nWed Apr 13 14:36:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (assign_in_cond): allow multiple assignment in\n\t  conditional expression.  [Feature #10617]\n\nWed Apr 13 14:11:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* bignum.c (rb_big_size): add wrapper function of BIGSIZE and\n\t  rename the method function with _m suffix.\n\n\t* numeric.c (int_round_zero_p): extracted from rb_int_round.\n\t  optimize for Bignum, and convert VALUE returned by Numeric#size\n\t  to long.\n\nWed Apr 13 12:00:08 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* test/ruby/test_basicinstructions.rb: add a test to check access\n\t  instance variables on special const objects.\n\n\t  All of such objects are frozen, so that we can not set instance\n\t  variables for them. But we can read instance variables and return\n\t  default value (nil).\n\nTue Apr 12 20:40:35 2016  Kaneko Yuichiro  <spiketeika@gmail.com>\n\n\t* ext/date/date_core.c (time_to_time): should preserve timezone\n\t  info.  [ruby-core:74889] [Bug #12271]\n\nTue Apr 12 11:51:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (new_label_body): initialize bit fields, since\n\t  compile_data_alloc does not clear the memory.  [Bug #12082]\n\nMon Apr 11 20:18:43 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* vm_backtrace.c (frame2klass): filter only for imemo_ment.\n\t  T_IMEMO/imemo_iseq can be passed here.\n\nMon Apr 11 17:43:04 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_optimize): disable tail call optimization in\n\t  rescued, rescue, and ensure blocks.\n\t  [ruby-core:73871] [Bug #12082]\n\nMon Apr 11 06:54:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (apply2files): apply to a VALUE vector instead of a\n\t  temporary array.\n\nSun Apr 10 20:54:16 2016  Joe Swatosh  <joe.swatosh@gmail.com>\n\n\t* ext/win32/lib/win32/registry.rb (DeleteValue, DeleteKey): fix\n\t  API names.  [ruby-core:74863] [Bug #12264]\n\nSun Apr 10 17:47:42 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (rb_realpath_internal): no argument conversions since\n\t  this internal function does not need to_path and encoding\n\t  conversions, not to be affected by the default internal\n\t  encoding.\n\nSat Apr  9 10:03:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* load.c (rb_f_load): raise with the original path name before\n\t  encoding conversion.\n\nSat Apr  9 02:05:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* bignum.c (rb_cstr_parse_inum): [EXPERIMENTAL] new function to\n\t  parse integer in C-string with length.  the name and the\n\t  arguments may be changed in the future.\n\n\t* bignum.c (rb_str_to_inum): preserve encoding of the argument in\n\t  error messages, and no longer needs to copy non-terminated\n\t  strings.\n\n\t* bignum.c (rb_str2big_{poweroftwo,normal,karatsuba,gmp}): ditto.\n\nThu Apr  7 19:04:03 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/regexp.rdoc (comments): [DOC] terminators cannot appear in\n\t  comments.  [ruby-core:74838] [Bug #12256]\n\nThu Apr  7 11:24:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/tk/tkutil/tkutil.c (cbsubst_initialize): fix out-of-bound\n\t  access when no arguments given.  `p Tk::Event.new` crashed.\n\nFri Apr  1 01:26:00 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* ext/coverage/coverage.c: Fully reset coverage to not persist global state.\n\t  It was returning old file coverages as empty arrays to the user.\n\t  [ruby-core:74596] [Bug #12220]\n\n\t* ext/coverage/coverage.c (rb_coverages): remove unused static state.\n\n\t* thread.c: Moved and renamed coverage_clear_result_i to reset_coverage_i.\n\n\t* test/coverage/test_coverage.rb: improve precision of tests.\n\nWed Apr  6 22:41:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (rb_cv_lgamma_r_m0): fix the condition for\n\t  lgamma_r(-0.0).  [Bug #12249]\n\nWed Apr  6 17:38:42 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* tool/downloader.rb (RubyGems.download): follow the change of the\n\t  rubygems ssl_certs directory tree introduced by previous commit.\n\nWed Apr  6 15:00:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.3.\n\t  Please see entries of 2.6.3 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nWed Apr  6 14:13:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (rb_cv_lgamma_r_m0): check if lgamma_r(-0.0)\n\t  returns negative infinity.  [Bug #12249]\n\n\t* math.c (ruby_lgamma_r): define by the configured result.\n\nWed Apr  6 10:56:15 2016  Anton Davydov  <antondavydov.o@gmail.com>\n\n\t* lib/logger.rb (Logger#level=): remove unnecessary local\n\t  variable.\n\n\t* lib/logger.rb (Logger#initialize, Logger#reopen): [DOC] mention\n\t  the default values.  cherrypicked from [GH-1319].\n\nWed Apr  6 10:17:53 2016  cremno phobia  <cremno@mail.ru>\n\n\t* math.c (ruby_lgamma_r): missing/lgamma_r.c is used on Windows,\n\t  since msvcrt does not provide it.\n\n\t* missing/lgamma_r.c (lgamma_r): fix lgamma(-0.0).\n\t  [ruby-core:74823] [Bug #12249]\n\nWed Apr  6 01:22:55 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* math.c (ruby_lgamma_r): mswin's lgamma_r also seems to be wrong.\n\t  cf. [Bug #12249]\n\nWed Apr  6 00:53:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* math.c (ruby_lgamma_r): fix lgamma(-0.0) on mingw and OSX.\n\n\t* math.c (ruby_tgamma): fix tgamma(-0.0) on mingw.\n\t  [ruby-core:74817] [Bug #12249]\n\nTue Apr  5 14:50:28 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c (mime_putc): fix typo.\n\t  [Bug #12202] [ruby-core:74802]\n\nTue Apr  5 00:06:44 2016  Aeris  <aeris@imirhil.fr>\n\n\t* ext/openssl/ossl_ssl.c (ossl_ssl_tmp_key): Access to ephemeral\n\t  TLS session key in case of forward secrecy cipher.  Only\n\t  available since OpenSSL 1.0.2.  [Fix GH-1318]\n\n\t* ext/openssl/extconf.rb: Check for SSL_get_server_tmp_key.\n\nMon Apr  4 23:37:05 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_core.h (rb_vm_struct): make at_exit a single linked list but\n\t  not RArray, not to mark the registered functions by the write\n\t  barrier.  based on the patches by Evan Phoenix.\n\t  [ruby-core:73908] [Bug #12095]\n\nMon Apr  4 17:43:45 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: change default value of\n\t  RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO 0.3 -> 0.2\n\t  RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO 0.8 -> 0.65\n\n\t  These values are same as Ruby 2.0.0.\n\n\t  This change cause GC counts.\n\t  However, generational GC reduced each (minor) GC time and\n\t  increase memory locality. So that not so big impact on my\n\t  benchmarking results.\n\t  (surprisingly, this fix speed up programs on some cases)\n\n\t  You can change these values by environment variables\n\t  if you feel wrong.\n\nMon Apr  4 17:36:52 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (get_envparam_double): take an upper_bound.\n\n\t  And also take an accept_zero flag which allow to accept zero\n\t  even if lower_bound is set.\n\n\t* gc.c (ruby_gc_set_params): fix parameters.\n\n\t  RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO set 0.9 as *lower_bound*, so that\n\t  it should be upper_bound.\n\t  Set RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO as lower bound.\n\n\t  Also set lower/upper bound of RUBY_GC_HEAP_FREE_SLOTS_GOAL_RATIO to\n\t  RUBY_GC_HEAP_FREE_SLOTS_MIN/MAX_RATIO.\n\nMon Apr  4 16:41:32 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* vm.c (Init_VM): should pass tokens.\n\nSun Apr  3 09:34:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (flodivmod): round division if it is a finite number\n\t  and module is required.\n\n\t* numeric.c (dbl2ival): do not round here.\n\n\t* numeric.c (flo_ceil): use dbl2ival.\n\n\t* numeric.c (flo_round): round explicitly.\n\nSat Apr  2 15:24:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/intern.h (rb_check_arity): returns argc.\n\nFri Apr  1 20:58:33 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Data generation to implement\n\t  swapcase functionality for titlecase characters. Swapcase isn't defined\n\t  by Unicode, because the purpose/usage of swapcase is unclear anyway.\n\t  The implementation follows a proposal from Nobu, swapping the case of\n\t  each component of a titlecase character individually.\n\t  This means that the titlecase characters have to be decomposed.\n\n\t* enc/unicode.c: Code using the above data.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for the above.\n\nFri Apr  1 14:55:28 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* configure.in (AC_CONFIG_FILES): $srcdir/.git can be a file pointing\n\t  the real git_dir, such as when the git working tree is a \"linked\n\t  working tree\" (a working tree created by git-worktree). So use\n\t  git-rev-parse --git-dir to check if $srcdir is the top-level of a git\n\t  repository, not just checking if the $srcdir/.git directory does exist\n\t  or not.  [ruby-core:74759] [Bug #12239]\n\n\t* tool/change_maker.rb: use tool/vcs.rb to detect VCS. This used to have\n\t  its own VCS detection code, while we have tool/vcs.rb.\n\n\t* tool/vcs.rb (detect): remove code duplication\n\nFri Apr  1 04:50:44 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_s_alloc):\n\t  enable SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER by default\n\t  [Bug #12126]\n\nFri Apr  1 01:13:55 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* thread.c (update_coverage): Do not track coverage in loaded files\n\t  after Coverage.result. Avoids out-of-bounds access. [Bug #12237]\n\n\t* ext/coverage/coverage.c (coverage_clear_result_i): document.\n\nThu Mar 31 19:16:16 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: need to set initial value of GC_HEAP_FREE_SLOTS_GOAL_RATIO.\n\nThu Mar 31 17:50:27 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: change additional allocation policy.\n\n\t  Introduce new environment variable\n\t  RUBY_GC_HEAP_FREE_SLOTS_GOAL_RATIO (goal_ratio) to calculate the\n\t  ratio of additional memory.\n\n\t  Before this change, we add pages with the following formula\n\t  (when free_slots < total_pages * RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO):\n\t    next_pages = total_pages * RUBY_GC_HEAP_GROWTH_FACTOR\n\n\t  This addition can allocate too much.\n\n\t  With this change, we increase pages to satisfy the following formula:\n\t    next_free_slots = next_total_slots * goal_ratio\n\t  where\n\t    next_free_slots = free_slots + adding_slots\n\t    next_total_slots = total_slots + adding_slots.\n\n\t  If you want to prepare many free slots, increase this ratio.\n\n\t  If this variable is 0, then simply multiply\n\t  RUBY_GC_HEAP_GROWTH_FACTOR.\n\n\t* gc.c (get_envparam_double): enable to accept 0.\n\nThu Mar 31 17:48:25 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_marks_finish): fix syntax error.\n\nThu Mar 31 16:49:36 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: simplify allocate/free detecting logic at the end of marking.\n\n\t  Before this change, heap_pages_min_slots are calculated at the\n\t  beginning sweeping phase. And this value is used at the end of\n\t  *next* marking phase.\n\n\t  To simplify it, we use this value at the end of this marking phase.\n\t  It means that we don't need to store this value as global state.\n\n\t  Also heap_pages_max_slots is calculated at the begging of sweeping\n\t  phase and used at the end of sweeping phase.\n\t  To simplify this logic, we introduced new global value\n\t  heap_pages_freeable_pages it means extra pages count we can free.\n\t  gc_sweep_step() checks this value and moves empty pages to tomb_heap\n\t  not more than this value.\n\n\t  Because of this fix, heap_pages_swept_slots is no longer needed.\n\n\t* gc.c (rb_objspace_t::heap_pages): restruct the objspace global\n\t  status.\n\n\t  remove the following fields\n\t    * swept_slots (and heap_pages_swept_slots)\n\t    * min_free_slots (and heap_pages_min_free_slots)\n\t    * max_free_slots (and heap_pages_max_free_slots)\n\t  And add the following filed.\n\t    * freeable_pages (and heap_pages_freeable_pages)\n\n\t* gc.c (heap_pages_free_unused_pages): unlink tomb heap pages\n\t  because tomb heap should have only freeable pages.\n\n\t* gc.c (heap_extend_pages): add parameters for future extension.\n\nThu Mar 31 16:43:02 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: add GC parameters to configure the following values:\n\t  * RUBY_GC_HEAP_FREE_SLOTS_MIN_RATIO:\n\t    allocate additional pages when free slots is lower than\n\t    the value (total_slots * (this ratio)).\n\t  * RUBY_GC_HEAP_FREE_SLOTS_MAX_RATIO:\n\t    allow to free pages when free slots is greater than\n\t    the value (total_slots * (this ratio)).\n\n\t  Before this change, these values are hard coded.\n\n\t* gc.c (ruby_gc_params_t): ditto.\n\n\t* gc.c (ruby_gc_set_params): ditto.\n\nThu Mar 31 15:59:17 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_verify_heap_page): check the number of zombies.\n\n\t* gc.c (gc_verify_heap_pages): check also tomb heap.\n\nThu Mar 31 15:48:18 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c (gc_page_sweep): return free slots count.\n\n\t* gc.c (gc_sweep_step): use returned free slots count.\n\n\t* gc.c (gc_sweep_step): change variable name `next'\n\t  to `next_sweep_page'.\n\nThu Mar 31 11:33:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (d_lite_strftime, dt_lite_strftime): [DOC]\n\t  fix indent not to be a big sole verbatim.\n\nThu Mar 31 11:18:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (Init_date_core): [DOC] fix misplaced doc\n\t  of DateTime.  [ruby-core:74729] [Bug #12233]\n\nThu Mar 31 03:41:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c: Merge upstream 69f7e74dde.\n\t  fix indent.\n\nWed Mar 30 16:33:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* extension.rdoc, extension.ja.rdoc: [DOC] Fix some errors.\n\t  Renamed files, wrong method names or argument types; the example\n\t  GetDBM macro is now updated to the current version of the actual\n\t  code.  patch by Marcus Stollsteimer in [ruby-core:74690].\n\t  [Bug #12228]\n\nWed Mar 30 09:46:01 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/open-uri.rb: Use `userinfo` for authenticated proxy.\n\t  [fix GH-1148] Patch by @SokichiFujita\n\t* test/open-uri/test_open-uri.rb: ditto.\n\t  [fix GH-1309] Patch by @jdamick\n\nWed Mar 30 01:56:06 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* ext/nkf/nkf-utf8/nkf.c: Merge upstream 4f3edf80a0.\n\t  patched by Anton Sivakov [Bug #12201] [Bug #12202]\n\nWed Mar 30 01:54:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb: add given revision to current changesets\n\t  on associating the revision to the related ticket.\n\nWed Mar 30 01:53:17 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/merger.rb: update revision.h before merge.\n\nTue Mar 29 19:33:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* addr2line.c: define toupper for its use. fix r54391.\n\nTue Mar 29 19:23:46 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* include/ruby/ruby.h (rb_isupper, rb_islower, rb_isalpha, rb_isdigit,\n\t  rb_isalnum, rb_isxdigit, rb_isblank, rb_isspace, rb_isblank,\n\t  rb_iscntrl, rb_isprint, rb_ispunct, rb_isgraph,\n\t  rb_tolower, rb_toupper): use inline function to avoid function call.\n\n\t* include/ruby/ruby.h (rb_isascii): use inline function to clarify\n\t  the logic.\n\nTue Mar 29 18:56:55 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/redmine-backporter.rb (backport): show merger.rb's path.\n\n\t* tool/redmine-backporter.rb (show): show current issue again if no\n\t  ticket number is given.\n\n\t* tool/redmine-backporter.rb (rel): show error message if current\n\t  bugs.ruby-lang.org doesn't support the API.\n\nTue Mar 29 18:54:34 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* tool/merger.rb: support to backport header as backport identifier.\n\t  Now you can specify by 'merge revision(s) 49254: [Backport #10738]'.\n\nTue Mar 29 16:53:44 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Tweaked handling of 6\n\t  special cases in CaseUnfold_11_Table.\n\n\t* enc/unicode.c: Adjustments for above.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for the above: Some tests in\n\t  test_titlecase activated; test_greek added. A test in test_cherokee fixed.\n\nTue Mar 29 13:31:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Cleaned up some comments.\n\nTue Mar 29 13:24:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Removing data for idempotent\n\t  titlecasing.\n\n\t* enc/unicode.c: Adjust code to data removal.\n\nTue Mar 29 12:45:18 2016  Laurent Arnoud  <laurent@spkdev.net>\n\n\t* lib/webrick/httpresponse.rb: Move error_body to method. It allow to\n\t  override the body more easily. [fix GH-1307]\n\t* test/webrick/test_httpresponse.rb: ditto.\n\nTue Mar 29 06:40:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (rb_compile_err_append): rb_thread_t::base_block is no\n\t  longer used.\n\n\t* iseq.c (rb_iseq_compile_with_option): ditto, no protection is\n\t  needed.\n\nTue Mar 29 06:39:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (struct parser_params): move parse_in_eval flag from\n\t  rb_thread_t.\n\n\t* parse.y (rb_parser_set_context): set parsing context, not only\n\t  mild error flag.\n\n\t* iseq.c (rb_iseq_compile_with_option): the parser now refers no\n\t  thread local states to be restored.\n\n\t* vm_eval.c (eval_string_with_cref): ditto.\n\nMon Mar 28 21:24:02 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* numeric.c (int_pos_p): fix typos.\n\nMon Mar 28 14:54:49 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Refactoring in preparation for data reduction for\n\t  titlecase.\n\nMon Mar 28 14:36:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Minor refactoring for I WITH DOT ABOVE.\n\nMon Mar 28 14:26:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Removed code now covered by data from table.\n\nMon Mar 28 11:49:21 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Adding comments. [ci skip]\n\nMon Mar 28 11:30:23 2016  Shinichi Maeshima  <netwillnet@gmail.com>\n\n\t* lib/rubygems.rb: Fix `Gem.find_spec_for_exe` picks oldest gem.\n\t  https://github.com/travis-ci/travis-ci/issues/5798\n\t  https://github.com/rubygems/rubygems/pull/1566\n\t* test/rubygems/test_gem.rb: ditto.\n\nMon Mar 28 11:26:31 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.2.\n\t  Please see entries of 2.6.2 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\nMon Mar 28 11:02:31 2016  Hiroshi Shirosaki  <h.shirosaki@gmail.com>\n\n\t* lib/rubygems/test_case.rb: Fix test on Windows for inconsistent temp path.\n\t  https://github.com/rubygems/rubygems/pull/1554\n\t  [Bug #12193][ruby-core:74431]\n\nMon Mar 28 08:19:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): refactor floating point format of\n\t  Rational by using generic Integer functions.\n\n\t* sprintf.c (rb_str_format): fix buffer overflow, length must be\n\t  greater than precision.  reported by William Bowling <will AT\n\t  wbowling.info>.\n\nSun Mar 27 12:13:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): convert Rational to floating point\n\t  format by using generic Integer functions, not by methods which\n\t  can be overwritten.\n\nSat Mar 26 10:55:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (rb_int2str): conversion function to String for\n\t  generic Integer.\n\n\t* numeric.c (rb_int_round): rounding function for generic\n\t  Integers.\n\n\t* numeric.c (rb_int_{uminus,plus,minus,mul,idiv,modulo}): basic\n\t  arithmetic functions for generic Integers.\n\n\t* numeric.c (FIXNUM_{POSITIVE,NEGATIVE,ZERO}_P): predict macros\n\t  only for Fixnum.\n\nSat Mar 26 06:34:24 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* localeinit.c (rb_locale_charmap_index): fix prototype.\n\t  patched by Andreas Schwab [Bug #12218]\n\nFri Mar 25 16:40:48 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Additional tests title case;\n\t  some not yet activated.\n\nFri Mar 25 13:38:11 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* ext/openssl/extconf.rb: check SSL_CTX_set_next_proto_select_cb\n\t  function rather than OPENSSL_NPN_NEGOTIATED macro. it exists\n\t  even if it is disabled by OpenSSL configuration.\n\t  [ruby-core:74384] [Bug #12182]\n\n\t* ext/openssl/ossl_ssl.c: update #ifdef(s) as above.\n\n\t* test/openssl/test_ssl.rb: skip NPN tests if NPN is disabled.\n\nFri Mar 25 11:08:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/uri/http.rb (URI::HTTP#initialize): [DOC] fix example,\n\t  missing mandatory arguments.  [ruby-core:74540] [Bug #12215]\n\nFri Mar 25 01:50:58 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* thread_pthread.c (reserve_stack): fix reserving position where\n\t  the stack growing bottom to top. [Bug #12118]\n\nFri Mar 25 01:10:42 2016  Sebastian Schuberth  <sschuberth@gmail.com>\n\n\t* lib/mkmf.rb (find_executable0): On Windows, it is actually valid\n\t  to surround individual PATH directory entries with double\n\t  quotes. Remove these before joining the path as otherwise the\n\t  literal quotes would become part of the path, resulting in the\n\t  executable not to be found.  [Fix GH-1305]\n\nThu Mar 24 22:38:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (FMT, FMTV): remove recursive-assignments to get rid\n\t  of undefined behavior.  [ruby-core:74532] [Bug #12213]\n\nThu Mar 24 17:44:02 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (FMT_PADDING): extract format for padding.\n\n\t* strftime.c (FMT_PRECISION): extract precision formula.\n\n\t* strftime.c (FMTV): append formatted string to expand the result.\n\nThu Mar 24 14:20:21 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (STRFTIME): deal with case conversion flags for\n\t  recursive formats.\n\nThu Mar 24 12:43:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/date/date_core.c (dt_lite_iso8601): strftimev() always\n\t  returns a String, so append them directly.\n\n\t* ext/date/date_core.c (d_lite_jisx0301, iso8601_timediv),\n\t  (dt_lite_jisx0301): format by the format string in local buffer\n\t  to prevent intermediate strings from GC.\n\n\t* ext/date/date_core.c (mk_inspect_raw, mk_inspect): inspect by\n\t  \"%+\"PRIsVALUE, to prevent intermediate strings from GC.\n\nThu Mar 24 11:43:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (rb_strftime_with_timespec): remove unnecessary\n\t  check, as `s` equals to `endp` when recursed STRFTIME resized\n\t  the capacity same as the size.\n\nWed Mar 23 21:48:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (ary_inject_op): put subtract operation out of if-clause.\n\nWed Mar 23 21:38:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* enum.c (ary_inject_op): Use Kahan's compensated summation algorithm\n\t  for summing up float values.\n\nWed Mar 23 20:56:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* strftime.c (rb_strftime_with_timespec): append formatted results\n\t  to the given string with expanding, and also deal with NUL chars.\n\n\t* strftime.c (rb_strftime, rb_strftime_timespec): return formatted\n\t  string, not the length put in the given buffer.\n\n\t* time.c (rb_strftime_alloc): no longer needs to retry with\n\t  reallocating buffers.\n\n\t* time.c (time_strftime): no longer needs to split by NUL chars.\n\nWed Mar 23 14:23:54 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/rdoc/ri/driver.rb (interactive): rescue NotFoundError raised in\n\t  expand_name. (display_name rescues NotFoundError by itself,\n\t  the original logic looks buggy...)\n\nWed Mar 23 11:44:53 2016  cremno  <cremno@mail.ru>\n\n\t* marshal.c (r_long): cast to `signed char`, which is used\n\t  already, instead of SIGN_EXTEND_CHAR.\n\n\t* parse.y: SIGN_EXTEND_CHAR is no longer used.  [Fix GH-1302]\n\nWed Mar 23 11:38:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cygwin/GNUmakefile.in (MSYS2_ARG_CONV_EXCL_PARAM):\n\t  * add missing parentheses and remove double quotes.\n\t  * rename to get rid of recursive references.\n\t  * as --excludes-dir option is for a path name, its argument\n\t    should be converted.\n\t  [ruby-dev:49526] [Bug #12199]\n\nWed Mar 23 10:39:38 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* variable.c: Added documentation about order of `Module#constants`\n\t  [ci skip][Bug #12121][ruby-dev:49505][fix GH-1301]\n\nTue Mar 22 21:08:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Additional flag for characters that are titlecase.\n\n\t* enc/unicode/case-folding.rb, casefold.h: Using above flag in data.\n\n\t* enc/unicode.c: Marking capitalized character as unmodified if it is\n\t  already titlecase.\n\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above functionality.\n\nTue Mar 22 14:18:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (lambda_body, parser_yylex): warn mismatched indentation\n\t  of lambda block.\n\nTue Mar 22 11:36:49 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (wmul): wrong condition.\n\t  fixed many test failures on 32bit and LLP64 platforms.\n\nTue Mar 22 10:31:34 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (wdiv, wmod): wdivmod0() assumes the 3rd and the 4th arguments\n\t  are valid pointers.\n\t  maybe checking them in wdivmod0() is better manner, but I guess that\n\t  passing real dummy pointers may be faster than checking and branching\n\t  in wdivmod0().\n\t  this commit fixes SEGV on 32bit and LLP64 platforms.\n\nTue Mar 22 10:24:04 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* time.c (divmodv): void function never returns any value.\n\nTue Mar 22 10:11:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Test::Unit::StatusLine#failed): print\n\t  failed messages only if replacing mode, otherwise defer them\n\t  until the end, to get rid of interleaving failures with progress\n\t  messages.  refix r54195.\n\nTue Mar 22 03:45:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (MUL_OVERFLOW_FIXWV_P): defined for FIXWV.\n\n\t* time.c (wmul): use MUL_OVERFLOW_FIXWV_P and only switch.\n\n\t* time.c (wmul): use mul which has Fixnum optimization.\n\n\t* time.c (rb_time_magnify): If WIDEVALUE_IS_WIDER, wmul() has the same\n\t  optimized logic, else mul() has also the similar logic for Fixnum.\n\n\t* time.c (rb_time_unmagnify): almost ditto.\n\nTue Mar 22 03:10:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (divmodv): add the case both arguments are Fixnum.\n\n\t* time.c (wquo): use quo which has Fixnum optimization.\n\n\t* time.c (wdivmod0): added for WIDEVALUE_IS_WIDER.\n\n\t* time.c (wdivmod): use wdivmod0 and divmodv.\n\t  divmodv has Fixnum optimization.\n\n\t* time.c (wdiv): use wdivmod0 and div to avoid the use of divmodv which\n\t  calls id_quo whose return value is array.\n\n\t* time.c (wmod): use wdivmod0 and mod to avoid the use of divmodv which\n\t  calls id_quo whose return value is array.\n\nMon Mar 21 22:32:50 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* internal.h (rb_fix_divmod_fix): like r54213, use FIX2NUM only if\n\t  x == FIXNUM_MIN && y == -1. This must be a rare case and it is\n\t  expected compiler to handle well.\n\nMon Mar 21 22:15:11 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (mod): Add Fixnum case.\n\n\t* time.c (quo): c can be Fixnum except a == FIXNUM_MIN && b == -1.\n\t  Such case can be optimized out because quo()'s argument is constant.\n\nMon Mar 21 22:09:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (rb_fix_mul_fix): multiply converted values, not\n\t  object VALUEs.\n\nMon Mar 21 20:18:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* common.mk (TEST_EXCLUDES, EXCLUDE_TESTFRAMEWORK): use full spell\n\t  long option.\n\n\t* cygwin/GNUmakefile.in (MSYS2_ARG_CONV_EXCL): suppress path name\n\t  conversions by msys2.  [ruby-dev:49525] [Bug #12199]\n\nMon Mar 21 19:09:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (enc_succ_alnum_char): try to skip an invalid character\n\t  gap between GREEK CAPITAL RHO and SIGMA.\n\t  [ruby-core:74478] [Bug #12204]\n\nMon Mar 21 18:55:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* node.c (rb_gc_mark_node): NODE_MATCH2 can have nd_args, u3,\n\t  since r54100.\n\nSun Mar 20 21:17:13 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* internal.h (rb_int128t2big): declare only when HAVE_INT128_T.\n\t  fixed a compile error with VC++ introduced at r54203.\n\nSun Mar 20 20:10:14 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* internal.h (DLONG): defined if long is 32bit (and LONG_LONG is 64bit;\n\t  but LONG_LONG is always defined as 64bit), or there's int128_t.\n\n\t* internal.h (DL2NUM): defined if DLONG is defined.\n\n\t* internal.h (rb_fix_mul_fix): defined for `Fixnum * Fixnum`.\n\n\t* insns.def (opt_mul): use rb_fix_mul_fix().\n\n\t* numeric.c (fix_mul): ditto.\n\n\t* time.c (mul): ditto.\n\nSun Mar 20 18:53:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (fix_gt, fix_ge, fix_lt, fix_le): optimize comparisons\n\t  Fixnum against Bignum by rb_big_cmp in inversed order without\n\t  new Bignum instance.\n\nSun Mar 20 18:44:52 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (add): remove FIXABLE() which is in LONG2NUM().\n\n\t* time.c (sub): ditto.\n\n\t* time.c (mul): ditto.\n\nSun Mar 20 04:46:02 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* bignum.c (rb_big_cmp): reduce the code.\n\n\t* bignum.c (rb_big_eq): If normalized bignum is still bignum,\n\t  it must be larger than fixnum.\n\nSat Mar 20 00:58:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* include/ruby/intern.h (rb_big_odd_p, rb_big_even_p): move to\n\t  internal.h so that they are exported only for ruby itself.\n\n\t* internal.h (rb_big_odd_p, rb_big_even_p): ditto.\n\nSat Mar 19 21:56:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Test::Unit::StatusLine#failed): defer\n\t  failed messages until the end in verbose mode, to get rid of\n\t  interleaving failures with progress messages.\n\nSat Mar 19 21:53:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (fix_cmp): invert the result as the comparison is\n\t  inverted.\n\nSat Mar 19 18:32:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_f): raise NotImplementedError when a receiver\n\t  class is unknown.\n\n\t* test/-ext-/integer/test_my_integer.rb (test_my_integer_to_f): modify\n\t  a test for the above change.\n\nSat Mar 19 18:21:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#<=>): remove it because they are unified with\n\t  Integer#<=>.\n\n\t* numeric.c (Integer#<=>, Fixnum#<=>): move <=> method from Fixnum to\n\t  Integer.\n\n\t* numeric.c (int_cmp): add this method for Integer#<=>.\n\n\t* test/-ext-/integer/test_my_integer.rb (test_my_integer_cmp): add a\n\t  test to examine Integer#<=> for unknown subclasses.\n\nSat Mar 19 14:46:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_compile_with_option): make the parser in mild\n\t  error.\n\n\t* load.c (rb_load_internal0): ditto.\n\n\t* parse.y (yycompile0): return the error message within the error\n\t  to be raised.  [Feature #11951]\n\n\t* parse.y (parser_compile_error): accumulate error messages in the\n\t  error_buffer.\n\nSat Mar 19 03:57:13 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* time.c (LOCALTIME): organize #ifdefs.\n\n\t* time.c (GMTIME): define only ifndef HAVE_STRUCT_TM_TM_GMTOFF.\n\nSat Mar 19 03:53:31 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (rb_cv_member_struct_tm_tm_gmtoff): For Linux (glibc)\n\t  define _BSD_SOURCE for time.h to define struct tm.tm_gmtoff.\n\n\t* time.c: define _BSD_SOURCE at the top.\n\nSat Mar 19 03:00:50 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/time/test_new.rb (test_timespec_new): change a gmtoff\n\t  test to a better one that does not depend on whether the current\n\t  time is in summer time or not.\n\nFri Mar 19 00:00:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_to_f, Bignum#to_f): removed them because they are\n\t  unified with int_to_f and Integer#to_f.\n\n\t* numeric.c (int_to_f): treat Bignum values directly.\n\nFri Mar 18 23:41:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_f, fix_to_f): rename fix_to_f to int_to_f, and add\n\t  treatment for subclasses which don't have definitions of to_f method.\n\n\t* numeric.c (Integer#to_f, Fixnum#to_f): move to_f method from Fixnum\n\t  to Integer.\n\n\t* ext/-test-/integer/my_integer.c: define helper class for testing\n\t  to_f method for a subclass of Integer.\n\n\t* ext/-test-/integer/extconf.rb: ditto.\n\n\t* ext/-test-/integer/init.c: ditto.\n\n\t* test/-ext-/integer/test_my_integer.rb: examine to_f method for a\n\t  subclass of Integer.\n\nFri Mar 18 22:32:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* include/ruby/intern.h (rb_big_hash): Move to internal.h.\n\n\t* internal.h: ditto.\n\nFri Mar 18 22:10:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#eql?): remove its definition because it is unified\n\t  with Numeric#eql?.\n\n\t* numeric.c (num_eql): treat Bignum values directly.\n\nFri Mar 18 21:57:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_to_s, Bignum#to_s): remove its definition because\n\t  it is unified with Integer#to_s.\n\n\t* numeric.c (int_to_s): treat Bignum values directly.\n\nFri Mar 18 21:30:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_to_s): Move from fix_to_s.\n\n\t* numeric.c (Integer#to_s): Move from Fixnum#to_s.\n\nFri Mar 18 16:22:24 2016  Victor Nawothnig  <Victor.Nawothnig@gmail.com>\n\n\t* parse.y (parse_numvar): NTH_REF must be less than a half of\n\t  INT_MAX, as it is left-shifted to be ORed with back-ref flag.\n\t  [ruby-core:74444] [Bug#12192] [Fix GH-1296]\n\nFri Mar 18 12:25:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* gc.c (tick): fix missing close parenthesis.  [Fix GH-1291]\n\nFri Mar 18 10:24:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* ext/date/date_core.c (datetime_to_time): preserve timezone info\n\t  [Bug #12189] [Fix GH-1295]\n\nFri Mar 18 10:17:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_hash): make it public function to be available in\n\t  other source files, and remove documentation comment for Bignum#hash.\n\n\t* bignum.c (Bignum#hash): remove its definition because it is unified\n\t  with Object#hash.\n\n\t* include/ruby/intern.h (rb_big_hash): add a prototype declaration.\n\n\t* hash.c (any_hash): treat Bignum values directly.\n\nFri Mar 18 02:35:12 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/time.rb (parse, strptime): Fix Time.parse/strptime does not\n\t  have compatibility with DateTime.parse/strptime in terms of parsing\n\t  timezone [Bug #12190] [Fix GH-1297]\n\nFri Mar 18 02:17:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (fix_zero_p, fix_even_p, fix_odd_p): remove needless\n\t  functions.\n\nFri Mar 18 02:15:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* numeric.c (int_even_p): treat Fixnum and Bignum values directly.\n\nFri Mar 18 02:07:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (Bignum#even?, Bignum#odd?): remove definitions\n\t  because they are unified with Integer#even? and Integer#odd?.\n\n\t* numeric.c (Fixnum#zero?, Fixnum#even?, Fixnum#odd?): remove\n\t  definitions because they are unified with Numeric#zero?,\n\t  Integer#even?, and Integer#odd?.\n\n\t* numeric.c (num_zero_p, int_odd_p): treat Fixnum and\n\t  Bignum values directly.\n\n\t* test/ruby/test_integer.rb (test_odd_p_even_p): remove meaningless\n\t  test case.\n\nFri Mar 18 01:51:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* bignum.c (rb_big_even_p, rb_big_odd_p): make them public functions\n\t  to be available in other source files.\n\n\t* include/ruby/intern.h (rb_big_even_p, rb_big_odd_p): add prototype\n\t  declarations.\n\nFri Mar 18 00:25:56 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (ary_inject_op): Implement the specialized code for sum of\n\t  float numbers.\n\nFri Mar 18 00:15:05 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* numeric.c (num_step): use rb_equal for zero check. rb_num_coerce_cmp\n\t  created an object which caused extra overhead.\n\nThu Mar 17 22:21:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/ruby.h (RB_GC_GUARD_PTR): remove intermediate\n\t  macro, and expand for each RB_GC_GUARD.  [Fix GH-1293]\n\nThu Mar 17 22:08:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (iseq_specialized_instruction): move specialization\n\t  for opt_newarray_max/min from translation phase.\n\nThu Mar 17 21:52:09 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c, enum.c: make rdoc format consistent.\n\nThu Mar 17 21:47:57 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* NEWS: add Array#max, #min, and the optimization.  [Feature #12172]\n\nThu Mar 17 21:45:02 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* compile.c (NODE_CALL): add optimization shortcut for Array#max/min.\n\t  Now `[x, y].max` is optimized so that a temporal array object is not\n\t  created in some condition.  [Feature #12172]\n\n\t* insns.def (opt_newarray_max, opt_newarray_min): added.\n\nThu Mar 17 21:35:52 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): implement Array#max and min with\n\t  arguments.  replace super call with rb_nmin_run.\n\n\t* enum.c (nmin_run): exported (as rb_nmin_run).\n\n\t* internal.h: added a prototype for rb_nmin_run.\n\nThu Mar 17 21:24:52 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): implement a block by itself instead\n\t  of delegating Enumerable#max/min.\n\nThu Mar 17 21:09:34 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* array.c (rb_ary_max, rb_ary_min): Array#max and Array#min added.\n\t  [Feature #12172]\n\n\t* internal.h (OPTIMIZED_CMP): moved from enum.c so that array.c can\n\t  use it.\n\n\t* test/ruby/test_array.rb (test_max, test_min): tests for Array#max\n\t  and Array#min.\n\n\t* test/ruby/test_enum.rb (test_max, test_min): revised a bit to test\n\t  Enumerable#max and #min explicitly.\n\nThu Mar 17 21:02:42 2016  Yusuke Endoh  <mame@ruby-lang.org>\n\n\t* internal.c: struct cmp_opt_data added for refactoring out a data\n\t  structure for CMP_OPTIMIZABLE\n\n\t* array.c (struct ary_sort_data): use struct cmp_opt_data.\n\n\t* enum.c (struct min_t, max_t, min_max_t): use struct cmp_opt_data.\n\nThu Mar 17 20:55:21 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (ary_inject_op): Extracted from enum_inject.\n\nThu Mar 17 18:39:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for sum of\n\t  integers including Bignums.\n\n\t* internal.h (rb_fix_plus): Declared to be usable from enum_inject.\n\n\t* numeric.c (rb_fix_plus): Defined.\n\nThu Mar 17 17:20:28 2016  Anton Davydov  <antondavydov.o@gmail.com>\n\n\t* thread_sync.c: [DOC] Update documentation for Queue class\n\t  description.  [Fix GH-1292]\n\nThu Mar 17 17:14:51 2016  Dinar Valeev  <dvaleev@suse.com>\n\n\t* gc.c (tick): Use __builtin_ppc_get_timebase for POWER arch.\n\t  [Fix GH-1291]\n\nThu Mar 17 11:51:48 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/securerandom.rb (gen_random): to avoid blocking on Windows.\n\t  On Windows OpenSSL RAND_bytes (underlying implementation is\n\t  RAND_poll in crypto/rand/rand_win.c) may be blocked at\n\t  NetStatisticsGet.\n\t  https://wiki.openssl.org/index.php/Random_Numbers#Windows_Issues\n\t  Instead of this, use Random.raw_seed directly (whose implementation\n\t  CryptGenRandom is one of the source of\n\t  entropy of RAND_poll on Windows).\n\t  https://wiki.openssl.org/index.php/Random_Numbers\n\t  Note: CryptGenRandom function is PRNG and doesn't check its entropy,\n\t  so it won't block. [Bug #12139]\n\t  https://msdn.microsoft.com/ja-jp/library/windows/desktop/aa379942.aspx\n\t  https://tools.ietf.org/html/rfc4086#section-7.1.3\n\t  https://eprint.iacr.org/2007/419.pdf\n\t  http://www.cs.huji.ac.il/~dolev/pubs/thesis/msc-thesis-leo.pdf\n\nThu Mar 17 12:09:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed two macro definitions.\n\t* test/ruby/enc/test_case_mapping.rb: Test cases that detected\n\t  the above bugs.\n\nThu Mar 17 11:36:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (inspect_tcpi_msec): more accurate condition\n\t  for TCPI msec member inspection function.\n\t  [ruby-core:74388] [Bug #12185]\n\nThu Mar 17 08:13:43 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/time/test_new.rb (test_timespec_new): Time#gmtoff values\n\t  are the same only when both or neither of the Time objects are in\n\t  summer time (daylight-saving time).\n\nThu Mar 17 07:17:36 2016  Eric Hodel  <drbrain@segment7.net>\n\n\t* marshal.c (r_object0):  raise ArgumentError when linking to undefined\n\t  object.\n\nThu Mar 17 00:45:00 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/ruby/test_bignum.rb: Make sure to use Bignum values in the tests.\n\nWed Mar 16 23:10:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* defs/keywords (alias, undef): symbol literals are allowed.\n\n\t* parse.y (parse_percent): should parse symbol literals for alias\n\t  and undef.  [ruby-dev:47681] [Bug #8851]\n\nWed Mar 16 21:39:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* enc/trans/JIS: update Unicode's notice. [Bug #11844]\n\nWed Mar 16 20:03:35 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* proc.c (proc_binding): proc from symbol can not make a binding.\n\t  [ruby-core:74100] [Bug #12137]\n\nWed Mar 16 18:42:45 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Fixed and activated a test for Cherokee.\n\nWed Mar 16 17:58:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Fixed a logical error.\n\nWed Mar 16 17:57:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Adding tests for Cherokee.\n\t  One test not yet working.\n\t  (with Kimihito Matsui)\n\nWed Mar 16 15:44:05 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: Adding tests for actual Unicode\n\t  case mapping. Fixing some aliasing issues.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 21:38:28 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Consider redefinition of Fixnum#+.\n\t  [ruby-dev:49510] [Bug#12178] Reported by usa.\n\nTue Mar 15 20:32:57 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for :+ operator\n\t  for Fixnums.\n\nTue Mar 15 20:21:01 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* enum.c (enum_inject): Implement the specialized code for self is an\n\t  array and a symbol operator is given.\n\nTue Mar 15 16:29:51 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Eliminating common code.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 16:17:09 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Expansion of some code repetition in preparation for\n\t  elimination of common code pieces.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 13:49:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Additional macros and code to use mapping data in\n\t  CaseMappingSpecials array.\n\t  (with Kimihito Matsui)\n\nTue Mar 15 13:41:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h (rb_gc_mark_global_tbl): should be private,\n\t  but was accidentally exported.\n\nTue Mar 15 12:51:06 2016  Marcus Stollsteimer  <sto.mar@web.de>\n\n\t* doc/extension.ja.rdoc: Fix RDoc markup in doc/extension*.rdoc.\n\t  [ci skip][Bug #12143][ruby-core:74143]\n\t* doc/extension.rdoc: ditto.\n\nTue Mar 15 09:56:41 2016  Ian Lunderskov  <ian.lunderskov@gmail.com>\n\n\t* time.c: Minor typo in Time#dst? documentation.\n\t  [ci skip][fix GH-1290]\n\nTue Mar 15 04:36:41 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_rubyoptions.rb (test_disable): add tests for\n\t  --disable-gems and --disable-did_you_mean.\n\nTue Mar 15 03:35:04 2016  Eric Hodel  <drbrain@segment7.net>\n\n\t* marshal.c (r_object0): Fix Marshal crash for corrupt extended object.\n\nTue Mar 15 01:22:27 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_rubyoptions.rb: make version matching support\n\t  JRuby's version output.\n\nMon Mar 14 19:05:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* bignum.c (big2str_2bdigits): reduce div instruction.\n\nMon Mar 14 18:39:53 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h, enc/unicode.c: Adjusting flag assignments\n\t  and macros to work with unified CaseMappingSpecials array.\n\t  (with Kimihito Matsui)\n\nMon Mar 14 16:53:37 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (compile_named_capture_assign): optimize named capture\n\t  assignments, by replacing repeating global variable accesses\n\t  with `dup`, and by returning the matched result instead of\n\t  re-getting it from the MatchData.\n\n\t* parse.y (reg_named_capture_assign_gen): build just assignment\n\t  nodes for the optimization.\n\nMon Mar 14 16:02:59 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* file.c (ruby_is_fd_loadable): now return -1 if loadable but\n\t  may block.\n\n\t* ruby.c (open_load_file): wait to read by the result of\n\t  ruby_is_fd_loadable, without fstat.\n\nMon Mar 14 13:38:38 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* numeric.c (fix2str): improve r54092 like rb_int2big().\n\nMon Mar 14 10:02:23 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/openssl/ossl_ssl.c (ossl_sslctx_setup): document as MT-unsafe\n\t  [ruby-core:73803] [Bug #12069]\n\nSun Mar 13 09:43:23 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/win32.h (O_SHARE_DELETE): change to fit Fixnum\n\t  limit.  [ruby-core:74285] [Bug #12171]\n\nSun Mar 13 09:15:45 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (rb_fix2str): fix edge case, accidentally generated\n\t  wrong Fixnum from LONG_MIN.\n\nSat Mar 12 09:50:27 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_f_catch): [DOC] fix malformed RDoc syntax, \"+...+\"\n\t  cannot enclose non-identifier characters.\n\t  a patch by Sebastian S in [ruby-core:74278].  [Bug#12170]\n\nSat Mar 12 02:44:48 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* test/lib/test/unit.rb: describe !/REGEXP/ in the help message.\n\nFri Mar 11 17:03:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/test/unit.rb (Options#non_options): make regexp name\n\t  options prefixed with \"!\" negative filters.\n\n\t* common.mk (TEST_EXCLUDES): use negative filter to exclude memory\n\t  leak tests.  -x option excludes test files, not test methods.\n\nFri Mar 11 16:11:27 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Streamlining approach to\n\t  case mapping data not available from case folding by unifying all\n\t  three cases (special title, special upper, special lower).\n\t* enc/unicode.c: Adjust macro names for above (macros are currently inactive).\n\t  (with Kimihito Matsui)\n\nThu Mar 10 17:34:16 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (prepare_iseq_build): enable coverage by coverage_enabled\n\t  option, not by parse_in_eval flag in the thread context.\n\n\t* iseq.h (rb_compile_option_struct): add coverage_enabled flag.\n\n\t* parse.y (yycompile0): set coverage_enabled flag if coverage\n\t  array is made.\n\nThu Mar 10 15:19:54 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* node.c (dump_option): nd_compile_option is a hidden hash object,\n\t  cannot call inspect on it.\n\nThu Mar 10 09:49:54 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/socket/test_socket.rb (test_udp_recvmsg_truncation):\n\t  AIX does not set the MSG_TRUNC flag for a message partially read\n\t  by recvmsg(2) with the MSG_PEEK flag set.\n\nWed Mar  9 16:48:45 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: fix my last commit (syntax error).\n\nWed Mar  9 16:41:44 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: fix output messages.\n\n\t* benchmark/memory_wrapper.rb: use respond_to? because\n\t  member? does not work well.\n\nWed Mar  9 16:20:25 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: support memory usage benchmark.\n\t  use `--measure-target=[target]'.\n\t  Now, we can use the following targets:\n\t    * real (default): real time which returns process time in sec.\n\t    * peak: peak memory usage (physical memory) in bytes.\n\t    * size: last memory usage (physical memory) in bytes.\n\n\t* benchmark/memory_wrapper.rb: ditto.\n\nWed Mar  9 15:04:22 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/bm_vm3_gc_old_full.rb: add GC.start benchmark.\n\n\t* benchmark/bm_vm3_gc_old_immediate.rb: ditto.\n\n\t* benchmark/bm_vm3_gc_old_lazy.rb: ditto.\n\nWed Mar  9 14:59:11 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* benchmark/driver.rb: exit benchmarking if a benchmark process\n\t  receives signals.\n\nWed Mar  9 13:22:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* test/lib/memory_status.rb: make Memory::Status independent of\n\t  MiniTest::Skip.\n\n\t* test/lib/test/unit/assertions.rb (assert_no_memory_leak): skip\n\t  if Memory::Status is not available.\n\nWed Mar  9 09:19:55 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/io/wait/test_io_wait.rb (test_wait_readwrite_timeout):\n\t  select(2) in AIX returns \"readable\" for the write-side fd\n\t  of a pipe, so it is not possible to use a pipe to test\n\t  the read-write timeout of IO#wait on AIX.\n\nWed Mar  9 03:35:22 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_require.rb (test_require_with_loaded_features_pop):\n\t  Only remove PATH so threads don't accidentally double-pop.\n\nWed Mar  9 00:29:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_method.c (rb_alias): the original name should be properly\n\t  available method_added method, set the name before calling the\n\t  hook.\n\nWed Mar  9 00:07:03 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/logger.rb (Logger::LogDevice#initialize): define using\n\t  keyword arguments.\n\nTue Mar  8 23:37:07 2016  Charles Oliver Nutter  <headius@headius.com>\n\n\t* test/ruby/test_array.rb: split out the test for no stack error\n\t  on large input for test_permutation, test_repeated_permutation,\n\t  and test_repeated_combination, and make them all timeout:30.\n\nTue Mar  8 17:20:21 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* intern.h (rb_divmod): assume compilers `/` and `%` comply C99\n\t  and reduce branching. If a compiler doesn't comply, add #ifdefs.\n\n\t* intern.h (rb_div): added for Ruby's behavior.\n\n\t* intern.h (rb_mod): added for Ruby's behavior.\n\n\t* insns.def (opt_div): use rb_div.\n\n\t* insns.def (opt_mod): use rb_mod.\n\n\t* numeric.c (fixdivmod): removed.\n\n\t* numeric.c (fix_divide): use rb_div.\n\n\t* numeric.c (fix_mod): use rb_mod.\n\n\t* numeric.c (fix_divmod): use rb_divmod.\n\nTue Mar  8 17:53:09 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_mod): show its method name on ZeroDivisionError.\n\t  [Bug #12158]\n\nTue Mar  8 17:33:38 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (rb_w32_write_console): now no need to check\n\t  ERROR_CALL_NOT_IMPLEMENTED because it is for old Win9X.\n\nTue Mar  8 16:54:29 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (rb_w32_write_console): stop the VT100 emulation if the\n\t  console supports it natively.\n\nTue Mar  8 08:13:01 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/net/imap/test_imap.rb (test_idle_timeout): Because of the\n\t  timeout specified in \"imap.idle(0.2)\", there is no guarantee that\n\t  the server thread has done all the work before the client thread\n\t  performs the assertions. It depends on the thread scheduling.\n\t  Add checks to avoid false positives (on AIX, particularly).\n\nTue Mar  8 00:42:22 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* ruby.c (warn_cr_in_shebang): meaningless check on DOSISH platforms.\n\t  fixed a test failure introduced at r53998.\n\nTue Mar  8 00:27:53 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/tcllib/tablelist_tile.rb: fix method name typo.\n\t  [ruby-core:72513] [Bug #11893] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:25:08 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/tcllib/toolbar.rb: fix method name typo.\n\t  [ruby-core:72511] [Bug #11891] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:21:58 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tkextlib/blt/tree.rb: fix method name typo.\n\t  [ruby-core:72510] [Bug #11890] The patch provided by Akira Matsuda.\n\n\nTue Mar  8 00:11:47 2016  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* ext/tk/lib/tk/menubar.rb: fix a typo in font name. [ruby-core:72505]\n\t  [Bug #11886] The patch provided by Akira Matsuda.\n\n\t* ext/tk/sample/*.rb: ditto.\n\nMon Mar  7 13:32:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* class.c (rb_define_class, rb_define_class_id_under): raise\n\t  ArgumentError if super is 0, deprecated behavior which has been\n\t  warned long time.\n\nMon Mar  7 13:28:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* internal.h: move function declarations for class internals from\n\t  include/ruby/intern.h.\n\nMon Mar  7 10:58:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/win32ole/win32ole_event.c (rescue_callback): use\n\t  rb_write_error_str instead of rb_write_error, to respect\n\t  the encoding and prevent the message from GC.\n\n\t* internal.h (rb_write_error_str): export.\n\nMon Mar  7 01:38:41 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/ruby/test_process.rb (test_execopts_gid): Skip a test\n\t  that is known to fail on AIX. AIX allows setgid to\n\t  a supplementary group, but Ruby does not allow the \"-e\"\n\t  option when setgid'ed, so the test does not work as intended.\n\nSun Mar  6 22:43:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* io.c (rb_obj_display): [DOC] fix output of Array, as Array#to_s\n\t  is same as Array#inspect since 1.9.\n\nSat Mar  5 09:50:58 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/socket/test_addrinfo.rb (test_ipv6_address_predicates):\n\t  IN6_IS_ADDR_V4COMPAT and IN6_IS_ADDR_V4MAPPED are broken\n\t  on AIX, so skip related tests.\n\nSat Mar  5 09:17:54 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/rinda/test_rinda.rb (test_make_socket_ipv4_multicast):\n\t  The fifth argument to getsockopt(2) should be modified to\n\t  indicate the actual size of the value on return,\n\t  but not in AIX. This is a know bug. Skip related tests.\n\t* test/rinda/test_rinda.rb (test_ring_server_ipv4_multicast):\n\t  ditto.\n\t* test/rinda/test_rinda.rb (test_make_socket_unicast): ditto.\n\t* test/socket/test_basicsocket.rb (test_getsockopt): ditto.\n\t* test/socket/test_sockopt.rb (test_bool): ditto.\n\nSat Mar  5 07:36:27 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/-ext-/float/test_nextafter.rb: In AIX,\n\t  nextafter(+0.0,-0.0)=+0.0, and nextafter(-0.0,+0.0)=-0.0,\n\t  but they should return -0.0 and +0.0, respectively. This is\n\t  a known bug in nextafter(3) on AIX, so skip related tests.\n\nSat Mar  5 07:14:10 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* test/zlib/test_zlib.rb (test_adler32_combine, test_crc32_combine):\n\t  Skip two tests on AIX because zconf.h in zlib does not correctly\n\t  recognize _LARGE_FILES in AIX. The problem was already reported\n\t  to zlib, and skip these tests until it is fixed.\n\nSat Mar  5 03:07:40 2016  Rei Odaira  <Rei.Odaira@gmail.com>\n\n\t* thread_pthread.c (getstack): __pi_stacksize returned by\n\t  pthread_getthrds_np() is wrong on AIX. Use\n\t  __pi_stackend - __pi_stackaddr instead.\n\nFri Mar  4 19:19:42 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: use 2 bits with unsigned int for rb_objspace::flags::mode\n\t  because it always returns 0 to 2 (non-negative value).\n\nFri Mar  4 18:42:08 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename \"enum gc_stat\" to \"enum gc_mode\"\n\t  because there is a same name (no related) function gc_stat().\n\n\t  Also gc_stat_* are renamed to gc_mode_*,\n\t  gc_stat_transition() to gc_mode_transition(),\n\t  rb_objspace::flags::stat is renamed to rb_objspace::flags::mode.\n\n\t  Change rb_objspace::flags::mode from 2 bits to 3 bits because VC++\n\t  returns negative enum value with 2 bits.\n\n\t* gc.c (gc_mode): add a macro to access rb_objspace::flags::mode\n\t  with verification code (verification is enabled only on\n\t  RGENGC_CHECK_MODE > 0).\n\n\t* gc.c (gc_mode_set): same macro for setter.\n\nFri Mar  4 09:28:18 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.6.1.\n\t  Please see entries of 2.6.0 and 2.6.1 on\n\t  https://github.com/rubygems/rubygems/blob/master/History.txt\n\t  [fix GH-1270] Patch by @segiddins\n\nThu Mar  3 14:09:00 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (modifiable?, new_ostruct_member!, table!):\n\t  rename methods for internal use with suffixes and make private,\n\t  [ruby-core:71069] [Bug #11587]\n\nWed Mar  2 16:28:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (method_missing): call by found method entry and get\n\t  rid of searching the same method entry twice.\n\n\t* vm_eval.c (vm_call0_body): calling method_missing method is\n\t  method_missing().\n\nWed Mar  2 15:13:33 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed broken parser named XMLScanStreamParser.\n\t  It's not works with current Ruby version.\n\t  [fix GH-1271][ruby-core:59588][Bug #9369]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nWed Mar  2 15:08:33 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed broken parser named XMLTreeParser.\n\t  Required gem of its parser didn't compile on newer Ruby versions.\n\t  [fix GH-1271][ruby-core:59590][Bug #9370]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nTue Mar  1 11:25:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/fileutils.rb: use keyword arguments instead of option\n\t  hashes.\n\nMon Feb 29 16:50:20 2016  hanachin  <hanachin@gmail.com>\n\n\t* array.c (rb_ary_push_m): [DOC] Remove trailing comma from\n\t  Array#push example, as other Array examples doesn't put trailing\n\t  comma.  [Fix GH-1279]\n\nMon Feb 29 16:31:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* common.mk, tool/mkconfig.rb: set cross_compiling option from\n\t  Makefile, but not from rbconfig.rb, which is just going to be\n\t  created by this command.\n\nSun Feb 28 23:13:49 2016  C.J. Collier  <cjcollier@linuxfoundation.org>\n\n\t* configure.in: Add summary to end of configure output.\n\t  [Fix GH-1275]\n\nSun Feb 28 20:23:36 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/drb/drb.rb (error_print): Add verbose failure messages and\n\t  avoid infamous DRb::DRbConnError. [Feature #12101]\n\nSun Feb 28 13:40:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (nometh_err_initialize): add private_call? parameter.\n\n\t* error.c (nometh_err_private_call_p): add private_call? method,\n\t  to tell if the exception raised in private form FCALL or VCALL.\n\t  [Feature #12043]\n\n\t* vm_eval.c (make_no_method_exception): append private_call?\n\t  argument.\n\n\t* vm_insnhelper.c (ci_missing_reason): copy FCALL flag.\n\nSun Feb 28 10:19:47 2016  Ryan T. Hosford  <tad.hosford@gmail.com>\n\n\t* array.c (rb_ary_and): clarify that set intersection returns the\n\t  unique elements common to both arrays.\n\n\t* array.c (rb_ary_or): clarify that union preserves the order from\n\t  the given arrays.\n\nSat Feb 27 17:05:29 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Reducing size of TitleCase\n\t  table by eliminating duplicates.\n\t  (with Kimihito Matsui)\n\nFri Feb 26 14:40:48 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (num_step_scan_args): comparison String with Numeric\n\t  should raise TypeError. it is an invalid type, but not a\n\t  mismatch the number of arguments.  [ruby-core:62430] [Bug #9810]\n\nFri Feb 26 14:39:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* doc/extension.rdoc, doc/extension.ja.rdoc: add editor local\n\t  variables, with commenting out by :enddoc: directives which are\n\t  just ignored unless code object mode.  [Bug #12111]\n\nFri Feb 26 12:25:56 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/extension.ja.rdoc: removed rendering error caused by editor specific\n\t  configuration on http://docs.ruby-lang.org/en/trunk/extension_rdoc.html .\n\t  [Bug #12111][ruby-core:73990]\n\nFri Feb 26 11:21:41 2016  herwinw  <herwin@quarantainenet.nl>\n\n\t* lib/xmlrpc.rb: Removed references to NQXML. It's obsoleted parser.\n\t  [fix GH-1245][ruby-core:59593][Feature #9371]\n\t* lib/xmlrpc/config.rb: ditto.\n\t* lib/xmlrpc/parser.rb: ditto.\n\nFri Feb 26 11:10:19 2016  Rick Salevsky  <rsalevsky@suse.com>\n\n\t* lib/tmpdir.rb: Unify to coding-style for method definition.\n\t  [fix GH-1252]\n\nFri Feb 26 11:02:04 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* README.md: update markdown syntax for anchor tag.\n\t  [fix GH-1265] Patch by @lukBarros\n\nFri Feb 26 10:52:29 2016  Alex Boyd  <alex@opengroove.org>\n\n\t* lib/irb.rb: avoid to needless truncation when using back_trace_limit option.\n\t  [fix GH-1205][ruby-core:72773][Bug #11969]\n\nFri Feb 26 08:11:58 2016  Aaron Patterson <tenderlove@ruby-lang.org>\n\n\t* gem_prelude.rb: Reduce system calls by activating the `did_you_mean`\n\t  gem before requiring the gem.  Activating the gem puts the gem on\n\t  the load path, where simply requiring the file will search every gem\n\t  that's installed until it can find a gem that contains the\n\t  `did_you_mean` file.\n\nThu Feb 25 19:04:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Adding possibility for debugging output\n\t  for TitleCase table in casefold.h.\n\t  (with Kimihito Matsui)\n\nWed Feb 24 22:31:13 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Rearranging flag assignments and making\n\t  space for titlecase indices; adding additional macros to add or\n\t  extract titlecase index; adding comments for better documentation.\n\t* enc/unicode.c: Moving some macros to include/ruby/oniguruma.h;\n\t  activating use of titlecase indices.\n\t  (with Kimihito Matsui)\n\nWed Feb 24 21:03:04 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* random.c (limited_rand): Add a specialized path for when the limit fits\n\t  in 32 bit.\n\nTue Feb 23 21:52:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Outputting actual titlecase\n\t  data (new table, with indices from other tables).\n\t* enc/unicode.c: Ignoring titlecase data indices for the moment.\n\t  (with Kimihito Matsui)\n\nTue Feb 23 15:21:14 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Reading casing data from\n\t  SpecialCasing.txt.\n\t  (with Kimihito Matsui)\n\nMon Feb 22 18:33:55 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Adding flag for title-case,\n\t  not yet operational.\n\t  (with Kimihito Matsui)\n\nMon Feb 22 18:17:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Fixed bug that avoided inclusion\n\t  of compatibility characters in upper-/lower-case mappings.\n\t  (with Kimihito Matsui)\n\nSun Feb 21 13:57:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cgi/escape/escape.c: Optimize CGI.unescape performance by C ext\n\t  for ASCII-compatible encodings.  [Fix GH-1250]\n\nSun Feb 21 13:56:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* cgi/escape/escape.c: Optimize CGI.unescapeHTML performance by C\n\t  ext for ASCII-compatible encodings.  [Fix GH-1242]\n\nSat Feb 20 15:38:16 2016  Eric Wong  <e@80x24.org>\n\n\t* doc/extension.rdoc: update paths for defs/ directory\n\nSat Feb 20 14:44:15 2016  Lucas Buchala  <lucasbuchala@gmail.com>\n\n\t* vm_eval.c (rb_mod_module_eval): [DOC] Fix documentation\n\t  signature for Module#module_eval.  [Fix GH-1258]\n\nSat Feb 20 14:40:44 2016  Adam O'Connor  <northband@gmail.com>\n\n\t* README.md: a few grammatical changes to the main Ruby README.md.\n\t  [Fix GH-1259]\n\nSat Feb 20 13:04:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* dir.c (push_pattern, push_glob): deal with read paths as UTF-8\n\t  to stat later, on Windows as well as OS X.\n\t  [ruby-core:73868] [Bug #12081]\n\nSat Feb 20 01:53:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* object.c (rb_mod_const_get): make error message at uninterned\n\t  string consistent with symbols.  [ruby-dev:49498] [Bug #12089]\n\nFri Feb 19 23:37:52 2016  Masahiro Tomita  <tommy@tmtm.org>\n\n\t* lib/find.rb (Find#find): raise with the given path name if it\n\t  does not exist.  [ruby-dev:49497] [Bug #12087]\n\nFri Feb 19 12:44:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Activated use of case mapping data in CaseUnfold_11 array.\n\t  (with Kimihito Matsui)\n\nFri Feb 19 11:08:32 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/extmk.rb: add cygwin case, nothing excluded.\n\t  [ruby-core:73806] [Bug#12071]\n\nThu Feb 18 21:32:15 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* man/irb.1: fix output in EXAMPLES.\n\nThu Feb 18 21:05:47 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (sym_match_m): delegate to String#match but not\n\t  String#=~.  [ruby-core:72864] [Bug #11991]\n\nThu Feb 18 14:15:38 2016  Shota Fukumori  <her@sorah.jp>\n\n\t* re.c: Add MatchData#named_captures\n\t  [Feature #11999] [ruby-core:72897]\n\n\t* test/ruby/test_regexp.rb(test_match_data_named_captures): Test for above.\n\n\t* NEWS: News about MatchData#named_captures.\n\nWed Feb 17 21:41:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* defs/id.def (predefined): add idLASTLINE and idBACKREF for $_\n\t  and $~ respectively.\n\n\t* parse.y: use idLASTLINE and idBACKREF instead of rb_intern.\n\nWed Feb 17 20:23:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_str_init): fix segfault and memory leak, consider\n\t  wide char encoding terminator.\n\nWed Feb 17 12:14:59 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (rb_str_init): introduce String.new(capacity: size)\n\t  [Feature #12024]\n\nTue Feb 16 19:10:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, casefold.h: Used only first element\n\t  (rather than all) of target in CaseUnfold_11 array.\n\t  (with Kimihito Matsui)\n\nTue Feb 16 18:24:38 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* numeric.c (compare_with_zero): fix variable name, rb_cmperr\n\t  requires VALUEs but not an ID.\n\nTue Feb 16 17:34:18 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* dir.c (rb_dir_s_empty_p): add Dir.empty? method, which tells the\n\t  argument is the name of an empty directory.  [Feature #10121]\n\nTue Feb 16 09:51:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/rbinstall.rb (without_destdir): just strip a drive letter\n\t  which is prepended by with_destdir.\n\t  pointed out by @DavidEGrayson.\n\t  https://github.com/ruby/ruby/commit/0e5f9ae#commitcomment-16101763\n\nTue Feb 16 04:42:13 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_plus): simply use LONG2NUM() instead of wrongly\n\t  complex overflow case.\n\n\t* insns.def (opt_sub): ditto.\n\nTue Feb 16 02:49:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/rbinstall.rb (without_destdir): compare with the destdir\n\t  after stripping a drive letter, on dosish platforms.\n\t  pointed out by @DavidEGrayson.\n\t  https://github.com/ruby/ruby/commit/d0cf23b#commitcomment-16100407\n\nMon Feb 15 15:44:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parse_ident): allow keyword arguments just after a\n\t  method where the same name local variable is defined.\n\t  [ruby-core:73816] [Bug#12073]\n\nMon Feb 15 14:43:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Added debugging option\n\t  (with Kimihito Matsui)\n\nSun Feb 14 17:31:50 2016  Lars Kanis  <lars@greiz-reinsdorf.de>\n\n\t* lib/mkmf.rb (with_{cpp,c,ld}flags): copy caller strings not to\n\t  be modified, in append_{cpp,c,ld}flags respectively.\n\t  [Fix GH-1246]\n\nSun Feb 14 16:18:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval.c (setup_exception): set the cause only if it is explicitly\n\t  given or not set yet.  [Bug #12068]\n\nSat Feb 13 21:44:58 2016  Tanaka Akira  <akr@fsij.org>\n\n\t* hash.c (rb_hash_invert): [DOC] more examples.\n\nSat Feb 13 17:30:49 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/uri/generic.rb (URI::Generic#find_proxy): support CIDR in\n\t  no_proxy.  [ruby-core:73769] [Feature#12062]\n\nSat Feb 13 17:11:58 2016  Fabian Wiesel  <fabian.wiesel@sap.com>\n\n\t* lib/uri/generic.rb (find_proxy): exclude white-spaces and allow\n\t  for a leading dot in the domain name in no_proxy.\n\t  [ruby-core:54542] [Feature #8317]\n\nFri Feb 12 12:20:56 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* error.c (name_err_initialize, nometh_err_initialize): [DOC] fix\n\t  argument positions.  optional parameters except for the message\n\t  are placed at the last.\n\nFri Feb 12 11:49:49 2016  Anthony Dmitriyev  <antstorm@gmail.com>\n\n\t* net/ftp.rb: add NullSocket#closed? to fix closing not opened\n\t  connection.  [Fix GH-1232]\n\nFri Feb 12 11:17:38 2016  Bogdan  <bogdanvlviv@gmail.com>\n\n\t* re.c (rb_reg_initialize_m): [DOC] fix missing right bracket.\n\t  [Fix GH-1243]\n\nThu Feb 11 14:57:58 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (RUBY_CHECK_SIZEOF, RUBY_DEFINT): fix for types\n\t  which are conditionally available depending on architectures\n\t  when universal binary, e.g., __int128.\n\nThu Feb 11 06:26:18 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (RUBY_DEFINT): use Parameter Expansion.\n\nThu Feb 11 05:33:24 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in (int128_t): don't check HAVE_XXX (for example\n\t  HAVE___INT128) because RUBY_CHECK_SIZEOF() don't define it for\n\t  config.h and use of $ac_cv_sizeof___int128 alternates the check.\n\t  (and don't need to define because users shouldn't know that)\n\nWed Feb 10 12:03:41 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in (ARFLAGS): check if deterministic mode flag is\n\t  effective, which is on by default on Ubuntu.\n\nTue Feb  9 16:36:23 2016  Naotoshi Seo  <sonots@gmail.com>\n\n\t* lib/logger.rb: Remove block from Logger.add as it's not needed\n\t  patch provided by Daniel Lobato Garcia [fix GH-1240] [Bug #12054]\n\nTue Feb  9 14:32:23 2016  Zachary Scott  <zzak@ruby-lang.org>\n\n\t* ext/zlib/zlib.c: Document mtime header behavior with patch by @schneems\n\t  Fixes [GH-1129]: https://github.com/ruby/ruby/pull/1129\n\nTue Feb  9 13:52:49 2016  Zachary Scott  <zzak@ruby-lang.org>\n\n\t* re.c: Remove deprecated kcode argument from Regexp.new and compile\n\t  patch provided by Dylan Pulliam [Bug #11495]\n\nMon Feb  8 21:26:19 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb, enc/unicode/casefold.h: Flags for\n\t  upper/lower conversion added (titlecase and SpecialCasing still missing)\n\t  (with Kimihito Matsui)\n\nMon Feb  8 20:43:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c, enc/unicode.c: Disassociating ONIGENC_CASE_FOLD flag from\n\t  ONIGENC_CASE_DOWNCASE.\n\t  (with Kimihito Matsui)\n\nMon Feb  8 13:00:17 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Shortened macros for enc/unicode/casefold.h to\n\t  single-letter; use flags in casefold.h for logic.\n\n\t* enc/unicode/case-folding.rb: Added flag for case folding.\n\t  Changed parameter passing.\n\n\t* enc/unicode/casefold.h: New flags added.\n\t  (with Kimihito Matsui)\n\nMon Feb  8 10:30:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (feature_option): raise a runtime error if ambiguous\n\t  feature name is given, in the future.  [Bug #12050]\n\nMon Feb  8 09:43:57 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Removed enc/unicode/casefold.h from automatic build because\n\t  some CI systems don't have gperf. Creation of enc/unicode/casefold.h\n\t  is now possible with make unicode-up. This is intended as a temporary measure.\n\nSun Feb  7 22:10:08 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added two more precondition files for enc/unicode/casefold.h\n\n\t* enc/unicode.c: Added shortening macros for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Fixed file encoding for CaseFolding.txt\n\t  to ASCII-8BIT (should fix some ci errors). Clarified usage. Created\n\t  class MapItem. Partially implemented class CaseMapping.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 14:12:32 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: Fixing parameter passing.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 11:44:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode/case-folding.rb: New classes CaseMapping/CaseMappingDummy\n\t  to pass as parameters; not yet implemented or used.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 11:16:00 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: using new option in recipe for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Correctly specify argument to new option.\n\t  (with Kimihito Matsui)\n\nSun Feb  7 10:43:27 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t(this commit message applies to the previous commit)\n\t* common.mk: explicit recipe for enc/unicode/casefold.h\n\n\t* enc/unicode/case-folding.rb: Adding -m option to prepare for using\n\t  multiple data files.\n\t  (with Kimihito Matsui)\n\nSat Feb  6 22:30:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/cgi/util.rb (escapeHTML, unescapeHTML): consider\n\t  ASCII-incompatible encodings.  [Fix GH-1239]\n\nSat Feb  6 15:18:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_regex_casefold.rb: Added data-based testing for\n\t  String#downcase :fold.\n\n\t* enc/unicode.c: Fixed a range error (lowest non-ASCII character affected\n\t  by case operations is U+00B5, MICRO SIGN)\n\n\t* test/ruby/enc/test_case_mapping.rb: Explicit test for case folding of\n\t  MICRO SIGN to Greek mu.\n\t  (with Kimihito Matsui)\n\nSat Feb  6 14:51:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_regex_casefold.rb: Tests for three case folding\n\t  primitives (mbc_case_fold, get_case_fold_codes_by_str,\n\t  apply_all_case_fold) in the various encodings. Currently only known\n\t  good encodings are tested to avoid test failures. For bug hunting,\n\t  start by adding more encodings with\n\t  generate_test_casefold encoding\n\t  (with Kimihito Matsui)\n\nSat Feb  6 14:37:16 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c, test/ruby/enc/test_case_mapping.rb: Implemented :fold\n\t  option for String#downcase by using case folding data from\n\t  regular expression engine, and added a few simple tests.\n\t  (with Kimihito Matsui)\n\nFri Feb  5 20:08:59 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_case_mapping.rb: added tests for :ascii option.\n\t  (with Kimihito Matsui)\n\nFri Feb  5 12:22:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* insns.def (opt_mult): Use int128_t for overflow detection.\n\n\t* bignum.c (rb_uint128t2big): added for opt_mult.\n\n\t* bignum.c (rb_uint128t2big): added for rb_uint128t2big..\n\n\t* configure.in: define int128_t, uint128_t and related MACROs.\n\t  Initially introduced by r41379 but reverted by r50749.\n\nThu Feb  4 21:05:17 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Activated :ascii flag for ASCII-only case conversion\n\t  (with Kimihito Matsui)\n\nThu Feb  4 17:38:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* re.c (reg_set_source): make source string frozen without\n\t  copying.\n\n\t* re.c (rb_reg_initialize_m): refactor initialization with\n\t  encoding.\n\nThu Feb  4 15:35:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* string.c (rb_fstring_enc_new, rb_fstring_enc_cstr): functions to\n\t  make fstring with encoding.\n\nThu Feb  4 14:42:29 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added Unicode data file SpecialCasing.txt to be additionally\n\t  downloaded (with Kimihito Matsui)\n\nThu Feb  4 12:39:08 2016  joker1007  <kakyoin.hierophant@gmail.com>\n\n\t* cgi/escape/escape.c: Optimize CGI.escape performance by C ext\n\t  for ASCII-compatible encodings.  [Fix GH-1238]\n\nThu Feb  4 11:53:56 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Introduce two variables (UNICODE_DATA_DIR and\n\t  UNICODE_SRC_DATA_DIR) to eliminate repetitions.\n\nWed Feb  3 12:13:20 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* string.c (str_new_frozen): if the given string is embeddedable\n\t  but not embedded, embed a new copied string. [Bug #11946]\n\nWed Feb  3 08:25:38 2016  boshan  <boshan@subsplash.com>\n\n\t* ext/openssl/ossl_pkey.c (Init_ossl_pkey): [DOC] Fix typo\n\t  \"encrypted\" to \"decrypted\".  [Fix GH-1235]\n\nWed Feb  3 08:21:32 2016  Seiei Miyagi  <hanachin@gmail.com>\n\n\t* ext/ripper/lib/ripper/lexer.rb (on_heredoc_dedent): Fix\n\t  Ripper.lex error in dedenting squiggly heredoc.  heredoc tree is\n\t  also an array of Elem in the outer tree.  [Fix GH-1234]\n\nWed Feb  3 02:33:39 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c (rb_reg_prepare_enc): use already compiled US-ASCII regexp\n\t  if given string is ASCII only.\n\t  121.2s to 113.9s on my x86_64-freebsd10.2 Intel Core i5 661\n\nTue Feb  2 13:02:03 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* re.c: Introduce RREGEXP_PTR.\n\t  patch by dbussink.\n\t  partially merge https://github.com/ruby/ruby/pull/497\n\n\t* include/ruby/ruby.h: ditto.\n\n\t* gc.c: ditto.\n\n\t* ext/strscan/strscan.c: ditto.\n\n\t* parse.y: ditto.\n\n\t* string.c: ditto.\n\nTue Feb  2 09:08:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems/specification.rb: `coding` is effective only first\n\t  line except shebang.\n\n\t* lib/rubygems/package.rb, lib/rubygems/package/*: ditto.\n\nMon Feb  1 21:41:58 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/rubygems.rb, lib/rubygems/*, test/rubygems/*: Update rubygems-2.5.2.\n\t  It supports to enable frozen string literal and add `--norc` option for\n\t  disable to `.gemrc` configuration.\n\t  See 2.5.2 release notes for other fixes and enhancements.\n\t  https://github.com/rubygems/rubygems/blob/a8aa3bac723f045c52471c7b9328310a048561e0/History.txt#L3\n\nSun Jan 31 12:33:13 2016  Dan Kreiger  <dan@dankreiger.com>\n\n\t* test/drb/ut_large.rb (multiply, avg, median): add additional\n\t  math operations to DRbLarge.  [Fix GH-1086]\n\nSun Jan 31 12:19:15 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_file_exhaustive.rb (test_lstat): Add lacking test\n\t  for File#lstat.  [Fix GH-1231]\n\nSun Jan 31 12:15:33 2016  Prayag Verma  <prayag.verma@gmail.com>\n\n\t* doc/standard_library.rdoc: fix typo  [Fix GH-1230]\n\t  Spelling mistakes -\n\t  outputing > outputting\n\t  publich > publish\n\nSat Jan 30 15:18:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_eval.c (rb_check_funcall_with_hook): also should call the\n\t  given hook before returning Qundef when overridden respond_to?\n\t  method returned false.  [ruby-core:73556] [Bug #12030]\n\nFri Jan 29 17:40:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* win32/file.c (rb_readlink): drop garbage after the substitute\n\t  name, as rb_w32_read_reparse_point returns the expected buffer\n\t  size but \"\\??\\\" prefix is dropped from the result.\n\n\t* win32/win32.c (w32_readlink): ditto, including NUL-terminator.\n\nFri Jan 29 17:07:27 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* win32/win32.c (fileattr_to_unixmode, rb_w32_reparse_symlink_p): volume\n\t  mount point should be treated as directory, not symlink.\n\t  [ruby-core:72483] [Bug #11874]\n\n\t* win32/win32.c (rb_w32_read_reparse_point): check the reparse point is\n\t  a volume mount point or not.\n\n\t* win32/file.c (rb_readlink): follow above change (but this pass won't\n\t  be used).\n\nFri Jan 29 16:17:07 2016  Lucas Buchala  <lucasbuchala@gmail.com>\n\n\t* enum.c (enum_take_while, enum_drop_while): rename block\n\t  parameter to obj, since they are generic objects.  [Fix GH-1226]\n\nFri Jan 29 14:15:26 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/erb.rb (ERB::Compiler#detect_magic_comment): allow\n\t  frozen-string-literal in comment as well as encoding.\n\n\t* lib/erb.rb (ERB#def_method): insert def line just before the\n\t  first non-comment and non-empty line, not to leave duplicated\n\t  and stale magic comments.\n\nFri Jan 29 11:13:33 2016  Jeremy Evans  <code@jeremyevans.net>\n\n\t* lib/erb.rb (ERB#set_eoutvar): explicitly make mutable string as\n\t  a buffer to make ERB work with --enable-frozen-string-literal.\n\t  [ruby-core:73561] [Bug #12031]\n\nFri Jan 29 10:44:56 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http/header.rb: Warn nil variable on HTTP Header.\n\t  It caused to NoMethodError. [fix GH-952][fix GH-641] Patch by @teosz\n\t* test/net/http/test_httpheader.rb: Added test for nil HTTP Header.\n\nThu Jan 28 17:31:43 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/socket.c (sock_gethostname): support unlimited size\n\t  hostname.\n\nWed Jan 27 21:03:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/-ext-/string/test_capacity.rb: Added missing library.\n\nWed Jan 27 18:53:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed bit mask in macro OnigCodePointCount\n\nWed Jan 27 17:54:42 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Protect code point count by macro, in order to\n\t  be able to use the remaining bits for flags.\n\t  (with Kimihito Matsui)\n\nWed Jan 27 16:34:35 2016  boshan  <boshan@subsplash.com>\n\n\t* lib/tempfile.rb (Tempfile#initialize): [DOC] the first parameter\n\t  `basename` is optional and defaulted to an empty string since\n\t  [GH-523].  [Fix GH-1225]\n\nWed Jan 27 16:25:54 2016  Koichi ITO  <koic.ito@gmail.com>\n\n\t* array.c (rb_ary_dig): [DOC] fix the exception class to be raised\n\t  when intermediate object does not have dig method.  TypeError\n\t  will be raised now.  [Fix GH-1224]\n\nTue Jan 26 19:36:15 2016  Aggelos Avgerinos  <evaggelos.avgerinos@gmail.com>\n\n\t* array.c (permute0, rpermute0): [DOC] Substitute indexes ->\n\t  indices in documentation for consistency.  [Fix GH-1222]\n\nTue Jan 26 15:21:37 2016  Eric Wong  <e@80x24.org>\n\n\t* compile.c (caller_location): use rb_fstring_cstr for \"<compiled>\"\n\t  (it is converted to fstring anyways inside rb_iseq_new_with_opt)\n\t* iseq.c (iseqw_s_compile): ditto\n\t* iseq.c (rb_iseq_new_main): use rb_fstring_cstr for \"<main>\"\n\t* vm.c (Init_VM): ditto, share with with above\n\t* iseq.c (iseqw_s_compile_file): rb_fstring before rb_io_t->pathv\n\t  share \"<main>\" with above\n\t* vm.c (rb_binding_add_dynavars): fstring \"<temp>\" immediately\n\nTue Jan 26 15:14:01 2016  Kazuki Yamaguchi  <k@rhe.jp>\n\n\t* compile.c (iseq_peephole_optimize): don't apply tailcall\n\t  optimization to send/invokesuper instructions with blockiseq.\n\t  This is a follow-up to the changes in r51903; blockiseq is now\n\t  the third operand of send/invokesuper instructions.\n\t  [ruby-core:73413] [Bug #12018]\n\nTue Jan 26 14:26:46 2016  Eric Wong  <e@80x24.org>\n\n\t* signal.c (sig_list): use fstring for hash key\n\t* test/ruby/test_signal.rb (test_signal_list_dedupe_keys): added\n\nTue Jan 26 13:08:34 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* signal.c (rb_f_kill): should immediately deliver reserved\n\t  signals SIGILL and SIGFPE, not only SIGSEGV and SIGBUS.\n\nTue Jan 26 07:57:28 2016  Joseph Tibbertsma  <josephtibbertsma@gmail.com>\n\n\t* gc.c (RVALUE_PAGE_WB_UNPROTECTED): fix a typo of argument name.\n\t  [Fix GH-1221]\n\nMon Jan 25 17:26:54 2016  Eric Wong  <e@80x24.org>\n\n\t* ruby_assert.h (RUBY_ASSERT_WHEN): fix reference to macro name\n\t* vm_core.h: include ruby_assert.h before using\n\t  [ruby-core:73371]\n\nMon Jan 25 15:55:30 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* symbol.c (sym_check_asciionly): more informative error message\n\t  with the encoding name and the inspected content.\n\t  [ruby-core:73398] [Feature #12016]\n\nMon Jan 25 09:38:26 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/ruby/test_string.rb: added testcase for next!, succ and succ!\n\t  [fix GH-1213] Patch by @K0mAtoru\n\nMon Jan 25 09:32:25 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/httpservlet/filehandler.rb: fix documentation for namespace.\n\t  [fix GH-1219][ci skip] Patch by @leafac\n\nSun Jan 24 19:34:23 2016  Eric Wong  <e@80x24.org>\n\n\t* vm_insnhelper.c (vm_check_if_namespace): tiny size reduction\n\nSun Jan 24 18:12:36 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Simplifying Unicode data file download logic to make\n\t  it more reliable (including additional fix not in r53633) [Bug #12007]\n\nSun Jan 24 16:54:11 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/io/wait/wait.c (io_wait_readwrite): [EXPERIMENTAL] allow to\n\t  wait for multiple modes, readable and writable, at once.  the\n\t  arguments may change in the future.  [Feature #12013]\n\nSat Jan 23 22:30:59 2016  K0mA  <mctj1218@gmail.com>\n\n\t* test/ruby/test_array.rb (test_keep_if): Add test for\n\t  Array#keep_if separate from Array#select!  [Fix GH-1218]\n\nSat Jan 23 20:54:26 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* common.mk: revert r53633. It broke rubyci and travis.\n\t  https://travis-ci.org/ruby/ruby/builds/104259623\n\nSat Jan 23 20:10:29 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* range.c (range_eqq): revert r51585 because rb_call_super() is\n\t  called in range_include() and thus r51585 doesn't work when the\n\t  receiver Range object consists of non linear objects such as Date\n\t  objects.\n\t  [ruby-core:72908] [Bug #12003]\n\nSat Jan 23 18:37:37 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* ChangeLog: Fixing wrong time on previous commit, and adding\n\t  previous commit message to svn [ci skip]\n\nSat Jan 23 18:30:30 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Simplifying Unicode data file download logic to make\n\t  it more reliable [Bug #12007]\n\nSat Jan 23 16:29:42 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* tool/downloader.rb: Fixed a logical error, improved documentation\n\nSat Jan 23 11:42:43 2016  Peter Suschlik  <ps@neopoly.de>\n\n\t* README.md: Use SVG Travis badge over PNG for better quality and\n\t  device support.  [Fix GH-1214] [Fix GH-1216]\n\nSat Jan 23 11:29:16 2016  Pascal Betz  <pascal.betz@simplificator.com>\n\n\t* lib/csv.rb: Update documentation of CSV header converter for\n\t  r45498, [GH-575].  [Fix GH-1215]\n\nFri Jan 22 17:36:46 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* vm_core.h (VM_ASSERT): use RUBY_ASSERT instead of rb_bug.\n\n\t* error.c (rb_assert_failure): assertion with stack dump.\n\n\t* ruby_assert.h (RUBY_ASSERT): new header for the assertion.\n\nFri Jan 22 00:25:57 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* regparse.c (fetch_name_with_level): allow non word characters\n\t  at the first character.  [Feature #11949]\n\n\t* regparse.c (fetch_name): ditto.\n\nThu Jan 21 17:34:01 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* marshal.c (r_object0): honor Marshal.load post proc\n\t  value for TYPE_LINK.  by Hiroshi Nakamura <nahi@ruby-lang.org>\n\t  https://github.com/ruby/ruby/pull/1204 fix GH-1204\n\nThu Jan 21 16:37:50 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* Makefile.in (update-rubyspec): fix r53208 like r53451.\n\nWed Jan 20 20:58:25 2016  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* common.mk, Makefile.in: update-config_files is only for Unix\n\t  platforms.\n\nWed Jan 20 17:13:39 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/extlibs.rb: add --cache option to change cache directory.\n\nTue Jan 19 17:03:40 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* common.mk: Added Unicode data file CaseFolding.txt to be additionally\n\t  downloaded (with Kimihito Matsui)\n\nTue Jan 19 10:09:58 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* lib/shell.rb (Shell.debug_output_exclusive_unlock): remove\n\t  because Mutex#exclusive_unlock was already deleted. [fix GH-1185]\n\nTue Jan 19 09:38:27 2016  Nick Cox  <nick@nickcox.me>\n\n\t* vm_method.c: fix grammar in respond_to? warning.\n\t  [fix GH-1047]\n\nMon Jan 18 14:37:07 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parser_here_document): an escaped newline is not an\n\t  actual newline, and the rest part should not be dedented.\n\t  [ruby-core:72855] [Bug #11989]\n\nMon Jan 18 12:04:34 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/ruby/test_string.rb: Added extra testcase for test_rstrip_bang\n\t  and test_lstrip_bang. [fix GH-1178] Patch by @Matrixbirds\n\nMon Jan 18 11:47:27 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* string.c: fix a typo. [fix GH-1202][ci skip] Patch by @sunboshan\n\nSun Jan 17 21:15:30 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* configure.in: improve ICC (Intel C Compiler) support.\n\n\t* configure.in (CXX): The name of icc's c++ compiler is `icpc`.\n\n\t* configure.in (warnings): Add `-diag-disable=2259` to suppress\n\t  noisy warnings: \"non-pointer conversion from \"...\" to \"...\" may\n\t  lose significant bits\".\n\n\t* configure.in (optflags): Add `-fp-model precise` like -fno-fast-math.\n\n\t* lib/mkmf.rb: icc supports -Werror=division-by-zero\n\t  and -Werror=deprecated-declarations, but doesn't support\n\t  -Wdivision-by-zero and -Wdeprecated-declarations.\n\nSun Jan 17 20:40:10 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Any kind of option is now taking the new code path for\n\t  upcase/downcase/capitalize/swapcase. :lithuanian can be used for\n\t  testing if no specific option is desired.\n\t* test/ruby/enc/test_case_mapping.rb: Adjusted to above.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 20:10:10 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Fixed a logical error and some comments.\n\t* test/ruby/enc/test_case_mapping.rb: Made tests more general.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 17:41:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Removed artificial expansion for Turkic,\n\t  added hand-coded support for Turkic, fixed logic for swapcase.\n\t* string.c: Made use of new case mapping code possible from upcase,\n\t  capitalize, and swapcase (with :lithuanian as a guard).\n\t* test/ruby/enc/test_case_mapping.rb: Adjusted for above.\n\t  (with Kimihito Matsui)\n\nSun Jan 17 15:30:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (sockopt_bool): relax boolean size to be one\n\t  too not only sizeof(int).  Winsock getsockopt() returns a single\n\t  byte as a boolean socket option.  [ruby-core:72730] [Bug #11958]\n\nSun Jan 17 14:43:01 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_env.rb: [Fix GH-1201]\n\t  * Extract test code for ENV#keep_if from ENV#select_bang\n\t  * Add a test case for ENV#select_bang,keep_if\n\nSun Jan 17 14:42:25 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_env.rb: [Fix GH-1201]\n\t  * Extract test code for ENV#delete_if from ENV#reject_bang\n\t  * Add a test case for ENV#reject_bang,delete_if\n\nSun Jan 17 14:40:22 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ext/socket/option.c (check_size): extract a macro to check\n\t  binary data size, with a consistent message.\n\n\t* ext/socket/option.c (sockopt_byte): fix error message,\n\t  sizeof(int) differs from sizeof(unsigned char) in general.\n\nSat Jan 16 21:16:21 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (xstring): reset heredoc indent after dedenting,\n\t  so that following string literal would not be dedented.\n\t  [ruby-core:72857] [Bug #11990]\n\nSat Jan 16 17:24:24 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* enc/unicode.c: Artificial mapping to test buffer expansion code.\n\t* string.c: Fixed buffer expansion logic.\n\t* test/ruby/enc/test_case_mapping.rb: Tests for above.\n\t  (with Kimihito Matsui)\n\nSat Jan 16 16:47:14 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* ext/openssl/lib/openssl/pkey.rb: Added 2048 bit DH parameter.\n\t* test/openssl/test_pkey_dh.rb: ditto.\n\nSat Jan 16 10:51:19 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* enc/unicode.c: fix implicit conversion error with clang. fixup r53548.\n\t* string.c: ditto.\n\nSat Jan 16 10:31:00 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* common.mk: test-sample was changed to test-basic.\n\t  [Feature #11982][ruby-core:72823]\n\t* basictest/runner.rb: ditto. rename from tool/rubytest.rb.\n\t* basictest/test.rb: ditto. rename from sample/test.rb.\n\t* defs/gmake.mk: picked from r53540\n\t* sample/test.rb: backward compatibility for chkbuild.\n\nSat Jan 16 10:23:23 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c, enc/unicode.c: New code path as a preparation for Unicode-wide\n\t  case mapping. The code path is currently guarded by the :lithuanian\n\t  option to avoid accidental problems in daily use.\n\t* test/ruby/enc/test_case_mapping.rb: Test for above.\n\t* string.c: function 'check_case_options': fixed logical errors\n\t  (with Kimihito Matsui)\n\nFri Jan 15 20:20:20 2016  Naohisa Goto  <ngotogenome@gmail.com>\n\n\t* regint.h (PLATFORM_UNALIGNED_WORD_ACCESS): The value of\n\t  UNALIGNED_WORD_ACCESS should be used to determine whether\n\t  unaligned word access is allowed or not. After this commit,\n\t  ./configure CPPFLAGS=\"-DUNALIGNED_WORD_ACCESS=0\" disables\n\t  unaligned word access even on platforms that support the feature.\n\nFri Jan 15 16:12:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (string1): reset heredoc indent for each string literal\n\t  so that concatenated string would not be dedented.\n\t  [ruby-core:72857] [Bug #11990]\n\nThu Jan 14 20:01:00 2016  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* lib/uri/generic.rb (URI::Generic#to_s): change encoding to\n\t  UTF-8 as Ruby 2.2/ by Koichi ITO <koic.ito@gmail.com>\n\t  https://github.com/ruby/ruby/pull/1188 fix GH-1188\n\nThu Jan 14 17:36:16 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_f_global_variables): add matched back references\n\t  only, as well as defined? operator.\n\nThu Jan 14 16:12:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* sprintf.c (rb_str_format): format exact number more exactly.\n\nThu Jan 14 15:08:43 2016  Tony Arcieri  <bascule@gmail.com>\n\n\t* Remove 512-bit DH group. It's affected by LogJam Attack.\n\t  https://weakdh.org/\n\t  [fix GH-1196][Bug #11968][ruby-core:72766]\n\nThu Jan 14 11:44:29 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* variable.c (rb_f_global_variables): add $1..$9 only if $~ is\n\t  set.  fix the condition removed at r14014.\n\nWed Jan 13 17:21:45 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* .travis.yml: removed commented-out code.\n\nWed Jan 13 17:14:54 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* .travis.yml: removed osx code. follow up with r53517\n\nWed Jan 13 16:56:19 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_mark): mark parent iseq to prevent dynamically\n\t  generated iseq by eval from GC.  [ruby-core:72620] [Bug #11928]\n\nWed Jan 13 03:42:58 2016  Eric Wong  <e@80x24.org>\n\n\t* class.c (Init_class_hierarchy): resolve name for rb_cObject ASAP\n\t* object.c (rb_mod_const_set): move name resolution to rb_const_set\n\t* variable.c (rb_const_set): do class resolution here\n\t  [ruby-core:72807] [Bug #11977]\n\nWed Jan 13 00:37:12 2016  Satoshi Ohmori  <sachin21dev@gmail.com>\n\n\t* man/ruby.1: fix double word typo.  [Fix GH-1194]\n\nTue Jan 12 21:01:09 2016  Benoit Daloze  <eregontp@gmail.com>\n\n\t* common.mk: update URL and name for the Ruby spec suite.\n\nTue Jan 12 19:52:19 2016  sorah (Shota Fukumori)  <her@sorah.jp>\n\n\t* lib/forwardable.rb: Convert given accessors to String.\n\n\t  r53381 changed to accept only Symbol or String for accessors, but\n\t  there are several rubygems that pass classes (e.g. Array,\n\t  Hash, ...) as accessors. Prior r53381, it was accepted because Class#to_s\n\t  returns its class name. After r53381 given accessors are checked\n\t  with define_method, but it accepts only Symbol or String, otherwise\n\t  raises TypeError.\n\n\t      def_delegator Foo, :some_method\n\n\t  This change is to revert unexpected incompatibility. But this behavior\n\t  may change in the future.\n\nMon Jan 12 18:41:41 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: made a variable name more grammatically correct\n\nMon Jan 12 18:34:34 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: minor grammar fix [ci skip]\n\nMon Jan 12 16:09:09 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* test/ruby/enc/test_casing_options.rb: Tests for option\n\t  parsing/checking for upcase/downcase/capitalize/swapcase\n\t  (see r53503; with Kimihito Matsui)\n\nMon Jan 12 16:03:03 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* string.c: Added option parsing/checking for upcase/downcase/\n\t  capitalize/swapcase (with Kimihito Matsui)\n\nMon Jan 11 21:28:28 2016  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* include/ruby/oniguruma.h: Added flags needed for upcase/downcase\n\t  Unicode addition (with Kimihito Matsui)\n\nMon Jan 11 09:50:24 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: check if the API version number is consistent with\n\t  the program version number.\n\nSun Jan 10 20:57:25 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (compile_massign_lhs): when index ends with splat,\n\t  append rhs value to it like POSTARG, since VM_CALL_ARGS_SPLAT\n\t  splats the last argument only.  [ruby-core:72777] [Bug #11970]\n\nSun Jan 10 15:45:10 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/missing.h (explicit_bzero_by_memset_s): remove\n\t  inline implementation by memset_s, which needs a macro before\n\t  including headers and can cause problems in extension libraries\n\t  by the order of the macro and headers.\n\nSun Jan 10 13:41:36 2016  Eric Wong  <e@80x24.org>\n\n\t* io.c (rb_deferr): remove long obsolete global\n\nSun Jan 10 09:14:42 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/psych/lib/psych/visitors/yaml_tree.rb (visit_String):\n\t  eliminate chomp\n\t* lib/net/http.rb (connect): eliminate delete\n\t* lib/net/http/header.rb (basic_encode): ditto\n\t* lib/net/imap.rb (authenticate): eliminate gsub\n\t  (self.encode_utf7): shorten delete arg\n\t* lib/net/smtp.rb (base64_encode): eliminate gsub\n\t* lib/open-uri.rb (OpenURI.open_http): eliminate delete\n\t* lib/rss/rss.rb: ditto\n\t* lib/securerandom.rb (base64): ditto\n\t  (urlsafe_base64): eliminate delete!\n\t* lib/webrick/httpauth/digestauth.rb (split_param_value):\n\t  eliminate chop\n\t* lib/webrick/httpproxy.rb (do_CONNECT): eliminate delete\n\t  (setup_upstream_proxy_authentication): ditto\n\t  [ruby-core:72666] [Feature #11938]\n\nSat Jan  9 23:19:14 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_hash.rb (test_try_convert): Add test for\n\t  Hash.try_convert.  [Fix GH-1190]\n\nSat Jan  9 23:15:25 2016  Jon Moss  <maclover7@users.noreply.github.com>\n\n\t* ext/openssl/ossl.c: Add missing variables to documentation\n\t  examples.  [Fix GH-1189]\n\nSat Jan  9 18:25:57 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* symbol.h (is_attrset_id): ASET is an attrset ID.  fix\n\t  unexpected safe call instead of an ordinary ASET.\n\nSat Jan  9 10:44:33 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in, win32/setup.mak: extract RUBY_PROGRAM_VERSION from\n\t  RUBY_VERSION in version.h instead of RUBY_API_VERSION numbers in\n\t  include/ruby/version.h, and cut it into version numbers.\n\nSat Jan  9 07:13:33 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename PAGE_* to HEAP_PAGE_* because PAGE_SIZE is used\n\t  in Mac OS X.\n\n\t* test/ruby/test_gc.rb: catch up this fix.\n\nSat Jan  9 05:45:40 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: PAGE_BITMAP_PLANES (the number of bitmap) is 4, not 3.\n\nSat Jan  9 05:42:57 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename constant names HEAP_* to PAGE_*.\n\n\t  Keys of GC::INTERNAL_CONSTANTS are also renamed.\n\n\t* test/ruby/test_gc.rb: catch up this fix.\n\nFri Jan  8 22:30:06 2016  Akinori MUSHA  <knu@iDaemons.org>\n\n\t* doc/regexp.rdoc: [DOC] Elaborate on the \\G anchor. [ci skip]\n\nFri Jan  8 19:49:27 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: remove heap_page::body. Instead of this field,\n\t  heap_page::start field works well.\n\nFri Jan  8 19:31:52 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: rename rb_heap_t::page_length to rb_heap_t::total_pages.\n\n\t  `page_length' is not clear (we may understand with length of\n\t  a page).\n\nFri Jan  8 17:07:14 2016  Koichi Sasada  <ko1@atdot.net>\n\n\t* gc.c: remove heap_page::heap. This field is only used to recognize\n\t  whether a page is in a tomb or not. Instead of this field,\n\t  heap_page::flags::in_tomb (1 bit field) is added.\n\n\t  Also type of heap_page::(total|free|final)_slots are changed from\n\t  int to short. 2B is enough for them.\n\nFri Jan  8 09:33:59 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* iseq.c (rb_iseq_compile_with_option): move variable initialization\n\t  code to avoid maybe-uninitialized warnings by gcc 4.8.\n\nFri Jan  8 00:03:22 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* enum.c (enum_min, enum_max): do the same optimization as r53454.\n\nThu Jan  7 22:32:21 2016  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* ruby.h: undef HAVE_BUILTIN___BUILTIN_CHOOSE_EXPR_CONSTANT_P\n\t  and HAVE_BUILTIN___BUILTIN_TYPES_COMPATIBLE_P on C++.\n\t  [ruby-core:72736] [Bug #11962]\n\nThu Jan  7 22:02:21 2016  Shugo Maeda  <shugo@ruby-lang.org>\n\n\t* enum.c (enum_minmax): optimize object comparison in\n\t  Enumerable#minmax.\n\nThu Jan  7 14:49:12 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* thread.c (rb_thread_pending_interrupt_p): no pending interrupt\n\t  before initialization.\n\n\t* thread.c (thread_raise_m, rb_thread_kill): uninitialized thread\n\t  cannot interrupt.  [ruby-core:72732] [Bug #11959]\n\nThu Jan  7 11:34:14 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* include/ruby/backward.h (ruby_show_copyright_to_die): for source\n\t  code backward compatibility.\n\n\t* ruby.c (process_options): return Qtrue to exit the process\n\t  successfully.\n\n\t* version.c (ruby_show_copyright): no longer exit.\n\nWed Jan  6 17:22:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/optparse.rb (OptionParser#order!): add `into` optional\n\t  keyword argument to store the results.  [Feature #11191]\n\nTue Jan  5 21:44:37 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* ChangeLog: fix wrong class name.\n\nTue Jan  5 21:43:50 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb(test_chr): added test for String#chr\n\t  [fix GH-1179]\n\nTue Jan  5 21:32:26 2016  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_numeric.rb (test_nonzero_p): added test for Numeric#nonzero?\n\t  [fix GH-1187]\n\nTue Jan  5 11:47:23 2016  Damir Gaynetdinov  <damir.gaynetdinov@gmail.com>\n\n\t* doc/marshal.rdoc: Clarify object references example, that the\n\t  reference is same object.  [Fix GH-1156]\n\nTue Jan  5 05:06:51 2016  Eric Wong  <e@80x24.org>\n\n\t* ext/stringio/stringio.c (strio_binmode): implement to set encoding\n\t* test/stringio/test_stringio.rb (test_binmode): new test\n\t  [ruby-core:72699] [Bug #11945]\n\nMon Jan  4 15:44:37 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* variable.c (rb_mod_deprecate_constant): [DOC] added\n\t  documentation for Module#deprecate_constant. [ci skip]\n\nMon Jan  4 15:36:38 2016  Sho Hashimoto  <sho-h@ruby-lang.org>\n\n\t* thread_sync.c: [DOC] remove SizedQueue#close argument.\n\t  [ci skip]\n\nMon Jan  4 10:14:24 2016  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* test/coverage/test_coverage.rb: ignored test when enabled to coverage.\n\t  It lead to crash with `make test-all`.\n\nMon Jan  4 08:10:44 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* insns.def (opt_case_dispatch): Move a comment to the\n\t  appropriate position.\n\t  [ci skip]\n\nSun Jan  3 23:55:13 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/rubygems/security.rb (DIGEST_ALGORITHM, KEY_ALGORITHM):\n\t  should check same name as the used constants.\n\t  [ruby-core:72674] [Bug #11940]\n\nSun Jan  3 19:22:01 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* aclocal.m4: add fallback file for non-aclocal environments.\n\t  [ruby-core:72683] [Bug #11942]\n\nSun Jan  3 13:56:49 2016  Yuichiro Kaneko  <yui-knk@ruby-lang.org>\n\n\t* eval_error.c (rb_print_undef): Use `rb_method_visibility_t`\n\t  instead of `int`.\n\t* eval_intern.h (rb_print_undef): ditto\n\t* proc.c (mnew_internal): ditto\n\t* vm_method.c (rb_export_method): ditto\n\t  [Misc #11649] [ruby-core:71311] [fix GH-1078]\n\nSun Jan  3 12:12:09 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* acinclude.m4: rename aclocal.m4, which should be generated by\n\t  aclocal.  [ruby-core:72675] [Bug #11941]\n\nSat Jan  2 21:07:55 2016  Eric Wong  <e@80x24.org>\n\n\t* thread_sync.c (queue_do_pop): avoid cast with Qfalse\n\t  (rb_szqueue_push): ditto, use queue_sleep wrapper\n\nSat Jan  2 16:16:14 2016  Masatoshi SEKI  <m_seki@mva.biglobe.ne.jp>\n\n\t* lib/erb.rb: Allow ERB subclass to add token easily.\n\t  [Feature #11936]\n\n\t* test/erb/test_erb.rb: ditto.\n\nSat Jan  2 14:44:31 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (regexp): set_yylval_num sets u1, should use nd_tag\n\t  instead of nd_state.  [ruby-core:72638] [Bug #11932]\n\nSat Jan  2 02:27:22 2016  Marc-Andre Lafortune  <ruby-core@marc-andre.ca>\n\n\t* lib/ostruct.rb: Fix case of frozen object with initializer.\n\t  Bug revealed by RubySpec [ruby-core:72639]\n\nFri Jan  1 22:01:52 2016  Kazuhiro NISHIYAMA  <zn@mbf.nifty.com>\n\n\t* NEWS: mention CSV's liberal_parsing option.\n\nFri Jan  1 19:38:23 2016  okkez  <okkez000@gmail.com>\n\n\t* doc/NEWS-2.3.0: fix double words typo.\n\t  [ci skip][fix GH-1183]\n\nFri Jan  1 15:28:56 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (remove_unreachable_chunk): decrease count of\n\t  call_info in removed instructions.  fix up r53402.\n\nFri Jan  1 12:05:53 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* compile.c (remove_unreachable_chunk): remove unreferred label\n\t  to optimize away unreachable chunk.\n\nFri Jan  1 11:42:57 2016  James Edward Gray II  <james@graysoftinc.com>\n\n\t* lib/csv.rb (CSV): Add a liberal_parsing option.\n\t  Patch by Braden Anderson. [#11839]\n\t* test/csv/test_features.rb:  test liberal_parsing\n\nFri Jan  1 10:27:28 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* tool/mkconfig.rb (RbConfig): prefix SDKROOT to oldincludedir\n\t  not includedir, the latter is outside the ruby installation.\n\t  [ruby-core:72496] [Bug #11881]\n\nFri Jan  1 08:53:02 2016  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/ruby/test_lazy_enumerator.rb (test_take_bad_arg): Add test\n\t  code in case of Enumerator::Lazy#take called with negative number.\n\t  [ruby-dev:49467] [Bug #11933]\n\nFri Jan  1 05:06:20 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (parser_here_document): update indent for each line in\n\t  indented here document with single-quotes.\n\t  [ruby-core:72479] [Bug #11871]\n\nFri Jan  1 03:26:44 2016  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (freeze): define deferred accessors before\n\t  freezing to get rid of an error when just reading frozen\n\t  OpenStruct.\n\nThu Dec 31 14:36:45 2015  Marc-Andre Lafortune  <ruby-core@marc-andre.ca>\n\n\t* lib/ostruct.rb: Fix new_ostruct_member to correctly avoid\n\t  redefinition [#11901]\n\nThu Dec 31 02:45:12 2015  NARUSE, Yui  <naruse@ruby-lang.org>\n\n\t* test/ruby/test_module.rb (test_classpath): r53376 may change\n\t  the order of m.constants.\n\t  `make TESTS='-v ruby/test_class.rb ruby/test_module.rb' test-all`\n\t  may fail after that.\n\t  http://rubyci.s3.amazonaws.com/tk2-243-31075/ruby-trunk/log/20151230T164202Z.log.html.gz\n\nThu Dec 31 02:20:00 2015  Benoit Daloze  <eregontp@gmail.com>\n\n\t* common.mk (help): Fix typo.\n\nWed Dec 30 20:53:09 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/net/http/responses.rb: Added new response class for 451 status code.\n\t* lib/net/http.rb: documentation for HTTPUnavailableForLegalReasons\n\nWed Dec 30 20:45:45 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* lib/webrick/httpstatus.rb: Added HTTP 451 Status Code.\n\t  [fix GH-1167] Patch by @MuhammetDilmac\n\t  https://tools.ietf.org/html/draft-tbray-http-legally-restricted-status-00\n\nWed Dec 30 20:25:52 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/syntax/calling_methods.rdoc: fix old operator for safe navigation\n\t  operator. [ci skip][fix GH-1182] Patch by @dougo\n\nWed Dec 30 16:43:23 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_ord): Add test for String#ord.\n\t  [Fix GH-1181]\n\nWed Dec 30 11:28:57 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/forwardable.rb (def_instance_delegator): adjust backtrace of\n\t  method body by tail call optimization.  adjusting the delegated\n\t  target is still done by deleting backtrace.\n\n\t* lib/forwardable.rb (def_single_delegator): ditto.\n\nWed Dec 30 11:18:42 2015  Elliot Winkler  <elliot.winkler@gmail.com>\n\n\t* lib/forwardable.rb (def_instance_delegator) fix delegating to\n\t  'args' and 'block', clashing with local variables in generated\n\t  methods.  [ruby-core:72579] [Bug #11916]\n\n\t* lib/forwardable.rb (def_single_delegator): ditto.\n\nWed Dec 30 09:58:56 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* object.c (rb_class_inherited_p): search the corresponding\n\t  ancestor to prepended module from prepending class itself.\n\t  [ruby-core:72493] [Bug #11878]\n\nWed Dec 30 09:20:00 2015  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/stringio/test_io.rb (test_flag): add assertion for error when\n\t  text and binary mode are mixed.\n\t  [ruby-dev:49465] [Feature #11921]\n\nWed Dec 30 08:43:59 2015  Yuki Kurihara  <co000ri@gmail.com>\n\n\t* test/stringio/test_stringio.rb (test_initialize): add test for\n\t  StringIO#initialize.  [ruby-core:72585] [Feature #11920]\n\nWed Dec 30 05:19:24 2015  Eric Wong  <e@80x24.org>\n\n\t* class.c (struct clone_const_arg): adjust for id_table\n\t  (clone_const): ditto\n\t  (clone_const_i): ditto\n\t  (rb_mod_init_copy): ditto\n\t  (rb_singleton_class_clone_and_attach): ditto\n\t  (rb_include_class_new): ditto\n\t  (include_modules_at): ditto\n\t* constant.h (rb_free_const_table): ditto\n\t* gc.c (free_const_entry_i): ditto\n\t  (rb_free_const_table): ditto\n\t  (obj_memsize_of): ditto\n\t  (mark_const_entry_i): ditto\n\t  (mark_const_tbl): ditto\n\t* internal.h (struct rb_classext_struct): ditto\n\t* object.c (rb_mod_const_set): resolve class name on assignment\n\t* variable.c (const_update): replace with const_tbl_update\n\t  (const_tbl_update): new function\n\t  (fc_i): adjust for id_table\n\t  (find_class_path): ditto\n\t  (autoload_const_set): st_update => const_tbl_update\n\t  (rb_const_remove): adjust for id_table\n\t  (sv_i): ditto\n\t  (rb_local_constants_i): ditto\n\t  (rb_local_constants): ditto\n\t  (rb_mod_const_at): ditto\n\t  (rb_mod_const_set): ditto\n\t  (rb_const_lookup): ditto\n\t  [ruby-core:72112] [Feature #11614]\n\nWed Dec 30 04:10:13 2015  CHIKANAGA Tomoyuki  <nagachika@ruby-lang.org>\n\n\t* thread_pthread.c (rb_thread_create_timer_thread): destroy attr even\n\t  if pthread_create() failed.\n\nWed Dec 30 02:55:09 2015  Eric Wong  <e@80x24.org>\n\n\t* thread_pthread.c (setup_communication_pipe): delay setting owner\n\t  (rb_thread_create_timer_thread): until thread creation succeeds\n\t  [ruby-core:72590] [Bug #11922]\n\nTue Dec 29 19:12:46 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* ruby.c (proc_options): -W command line option should be able to\n\t  override -w in RUBYOPT environment variable.\n\nTue Dec 29 17:54:16 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* eval.c (ignored_block): warn if a block is given to `using`,\n\t  which is probably for `Module.new`.\n\nTue Dec 29 12:48:34 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* lib/ostruct.rb (OpenStruct): make respond_to? working on\n\t  just-allocated objects for workaround of Psych.\n\t  [ruby-core:72501] [Bug #11884]\n\nTue Dec 29 10:35:00 2015  Kenta Murata  <mrkn@mrkn.jp>\n\n\t* test/mkmf/test_have_func.rb (test_have_func):\n\t  Add assertion to examine the existence of HAVE_RUBY_INIT.\n\n\t* test/mkmf/test_have_func.rb (test_not_have_func):\n\t  Add assertion to examine the absence of HAVE_RUBY_INIT.\n\nTue Dec 29 06:50:42 2015  Eric Wong  <e@80x24.org>\n\n\t* thread_sync.c: static classes\n\nTue Dec 29 05:30:30 2015  Eric Wong  <e@80x24.org>\n\n\t* lib/resolv.rb (Resolv::IPv6.create): avoid modifying frozen\n\t* test/resolv/test_dns.rb (test_ipv6_create): test for above\n\t  [Bug #11910] [ruby-core:72559]\n\nMon Dec 28 14:55:57 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (TestString#test_rstrip_bang): Add test\n\t  for String#rstrip!.  [Fix GH-1176]\n\nMon Dec 28 09:18:53 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (TestString#test_lstrip_bang): Add test\n\t  for String#lstrip!.  [Fix GH-1176]\n\nSun Dec 27 23:32:26 2015  Masaki Suketa <masaki.suketa@nifty.ne.jp>\n\n\t* ext/win32ole/win32ole.c (ole_variant2val): refactoring.\n\nSun Dec 27 21:14:42 2015  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* process.c (rb_execarg_parent_start1): need to convert the encoding to\n\t  ospath's one.\n\nSun Dec 27 20:54:22 2015  NAKAMURA Usaku  <usa@ruby-lang.org>\n\n\t* process.c: use rb_w32_uchdir() instead of plain chdir() on Windows.\n\t  reported by naruse via twitter.\n\n\t* process.c (rb_execarg_addopt): need to convert the encoding to\n\t  ospath's one.\n\nSun Dec 27 20:00:31 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* enc/x_emoji.h: fix dead-link.\n\nSun Dec 27 19:55:55 2015  SHIBATA Hiroshi  <hsbt@ruby-lang.org>\n\n\t* doc/NEWS-2.3.0: fix a typo.\n\nSun Dec 27 18:08:15 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* string.c (rb_str_lstrip_bang, rb_str_rstrip_bang): [DOC] Fix\n\t  ruby-doc comments for String#rstrip! and lstrip!.  It looks like\n\t  dropped bang.  [Fix GH-1175]\n\nSun Dec 27 15:14:20 2015  Eric Wong  <e@80x24.org>\n\n\t* io.c (io_getpartial): remove unused kwarg from template\n\t* test/ruby/test_io.rb (test_readpartial_bad_args): new\n\t  [Bug #11885]\n\nSun Dec 27 11:50:53 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_rstrip, test_lstrip): Add tests\n\t  for String#lstrip and rstrip.  The test cases are used from\n\t  string.c ruby-doc comments.  [Fix GH-1174]\n\nSun Dec 27 11:47:46 2015  Kuniaki IGARASHI  <igaiga@gmail.com>\n\n\t* test/ruby/test_string.rb (test_insert): Add test for\n\t  String#insert.  The test cases are written in string.c\n\t  comments as a reference.  [Fix GH-1173]\n\nSun Dec 27 11:03:33 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* parse.y (show_bitstack): trace stack_type value if yydebug.\n\nSun Dec 27 10:03:14 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* enc/depend (enc, trans): fix version dependency, shared object\n\t  files depend on the RUBY_SO_NAME value for runtime link.\n\nSun Dec 27 09:47:20 2015  Masaki Suketa <masaki.suketa@nifty.ne.jp>\n\n\t* ext/win32ole/win32ole.c (ole_vstr2wc, ole_variant2val): fix blank\n\t  string conversion.\n\t  [Bug #11880]\n\t  Thanks Akio Tajima for the patch!\n\nSun Dec 27 09:34:53 2015  craft4coder  <yooobuntu@163.com>\n\n\t* doc/extension.rdoc: [DOC] `nul` should be uppercase.\n\t  change 'nul' => 'NUL'.  [Fix GH-1172]\n\nSat Dec 26 18:29:01 2015  Kouhei Sutou  <kou@cozmixng.org>\n\n\t* lib/xmlrpc/client.rb: Support SSL options in async methods of\n\t  XMLRPC::Client.\n\t  [Bug #11489]\n\t  Reported by Aleksandar Kostadinov. Thanks!!!\n\nSat Dec 26 11:26:38 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* miniinit.c (Init_enc): add some common aliases of built-in\n\t  encodings.  [ruby-core:72481] [Bug #11872]\n\nFri Dec 25 22:43:26 2015  Nobuyoshi Nakada  <nobu@ruby-lang.org>\n\n\t* configure.in: extract RUBY_RELEASE_DAY at generating Makefile.\n\n\t* version.h (RUBY_RELEASE_DATE): construct from RUBY_RELEASE_YEAR,\n\t  RUBY_RELEASE_MONTH, and RUBY_RELEASE_DAY.\n\nFri Dec 25 21:33:06 2015  Yukihiro Matsumoto  <matz@ruby-lang.org>\n\n\t* version.h (RUBY_VERSION): 2.4.0 development has started.\n\nFri Dec 25 14:12:12 2015  Martin Duerst  <duerst@it.aoyama.ac.jp>\n\n\t* doc/ChangeLog-2.3.0, ext/tk/lib/tkextlib/SUPPORT_STATUS,\n\t  include/ruby/version.h: minor grammar fixes [ci skip]\n\nFri Dec 25 08:23:22 2015  Tadashi Saito  <tad.a.digger@gmail.com>\n\n\t* compile.c, cont.c, doc, man: fix common misspelling.\n\t  [ruby-core:72466] [Bug #11870]\n\n\nFor the changes before 2.3.0, see doc/ChangeLog-2.3.0\nFor the changes before 2.2.0, see doc/ChangeLog-2.2.0\nFor the changes before 2.1.0, see doc/ChangeLog-2.1.0\nFor the changes before 2.0.0, see doc/ChangeLog-2.0.0\nFor the changes before 1.9.3, see doc/ChangeLog-1.9.3\nFor the changes before 1.8.0, see doc/ChangeLog-1.8.0\n\nLocal variables:\ncoding: us-ascii\nadd-log-time-format: (lambda ()\n  (let* ((time (current-time))\n\t (system-time-locale \"C\")\n\t (diff (+ (cadr time) 32400))\n\t (lo (% diff 65536))\n\t (hi (+ (car time) (/ diff 65536))))\n  (format-time-string \"%a %b %e %H:%M:%S %Y\" (list hi lo) t)))\nindent-tabs-mode: t\ntab-width: 8\nchange-log-indent-text: 2\nend:\nvim: tabstop=8 shiftwidth=2\n", "# frozen_string_literal: false\n# = net/smtp.rb\n#\n# Copyright (c) 1999-2007 Yukihiro Matsumoto.\n#\n# Copyright (c) 1999-2007 Minero Aoki.\n#\n# Written & maintained by Minero Aoki <aamine@loveruby.net>.\n#\n# Documented by William Webber and Minero Aoki.\n#\n# This program is free software. You can re-distribute and/or\n# modify this program under the same terms as Ruby itself.\n#\n# NOTE: You can find Japanese version of this document at:\n# http://www.ruby-lang.org/ja/man/html/net_smtp.html\n#\n# $Id$\n#\n# See Net::SMTP for documentation.\n#\n\nrequire 'net/protocol'\nrequire 'digest/md5'\nrequire 'timeout'\nbegin\n  require 'openssl'\nrescue LoadError\nend\n\nmodule Net\n\n  # Module mixed in to all SMTP error classes\n  module SMTPError\n    # This *class* is a module for backward compatibility.\n    # In later release, this module becomes a class.\n  end\n\n  # Represents an SMTP authentication error.\n  class SMTPAuthenticationError < ProtoAuthError\n    include SMTPError\n  end\n\n  # Represents SMTP error code 420 or 450, a temporary error.\n  class SMTPServerBusy < ProtoServerError\n    include SMTPError\n  end\n\n  # Represents an SMTP command syntax error (error code 500)\n  class SMTPSyntaxError < ProtoSyntaxError\n    include SMTPError\n  end\n\n  # Represents a fatal SMTP error (error code 5xx, except for 500)\n  class SMTPFatalError < ProtoFatalError\n    include SMTPError\n  end\n\n  # Unexpected reply code returned from server.\n  class SMTPUnknownError < ProtoUnknownError\n    include SMTPError\n  end\n\n  # Command is not supported on server.\n  class SMTPUnsupportedCommand < ProtocolError\n    include SMTPError\n  end\n\n  #\n  # == What is This Library?\n  #\n  # This library provides functionality to send internet\n  # mail via SMTP, the Simple Mail Transfer Protocol. For details of\n  # SMTP itself, see [RFC2821] (http://www.ietf.org/rfc/rfc2821.txt).\n  #\n  # == What is This Library NOT?\n  #\n  # This library does NOT provide functions to compose internet mails.\n  # You must create them by yourself. If you want better mail support,\n  # try RubyMail or TMail or search for alternatives in\n  # {RubyGems.org}[https://rubygems.org/] or {The Ruby\n  # Toolbox}[https://www.ruby-toolbox.com/].\n  #\n  # FYI: the official documentation on internet mail is: [RFC2822] (http://www.ietf.org/rfc/rfc2822.txt).\n  #\n  # == Examples\n  #\n  # === Sending Messages\n  #\n  # You must open a connection to an SMTP server before sending messages.\n  # The first argument is the address of your SMTP server, and the second\n  # argument is the port number. Using SMTP.start with a block is the simplest\n  # way to do this. This way, the SMTP connection is closed automatically\n  # after the block is executed.\n  #\n  #     require 'net/smtp'\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       # Use the SMTP object smtp only in this block.\n  #     end\n  #\n  # Replace 'your.smtp.server' with your SMTP server. Normally\n  # your system manager or internet provider supplies a server\n  # for you.\n  #\n  # Then you can send messages.\n  #\n  #     msgstr = <<END_OF_MESSAGE\n  #     From: Your Name <your@mail.address>\n  #     To: Destination Address <someone@example.com>\n  #     Subject: test message\n  #     Date: Sat, 23 Jun 2001 16:26:43 +0900\n  #     Message-Id: <unique.message.id.string@example.com>\n  #\n  #     This is a test message.\n  #     END_OF_MESSAGE\n  #\n  #     require 'net/smtp'\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       smtp.send_message msgstr,\n  #                         'your@mail.address',\n  #                         'his_address@example.com'\n  #     end\n  #\n  # === Closing the Session\n  #\n  # You MUST close the SMTP session after sending messages, by calling\n  # the #finish method:\n  #\n  #     # using SMTP#finish\n  #     smtp = Net::SMTP.start('your.smtp.server', 25)\n  #     smtp.send_message msgstr, 'from@address', 'to@address'\n  #     smtp.finish\n  #\n  # You can also use the block form of SMTP.start/SMTP#start.  This closes\n  # the SMTP session automatically:\n  #\n  #     # using block form of SMTP.start\n  #     Net::SMTP.start('your.smtp.server', 25) do |smtp|\n  #       smtp.send_message msgstr, 'from@address', 'to@address'\n  #     end\n  #\n  # I strongly recommend this scheme.  This form is simpler and more robust.\n  #\n  # === HELO domain\n  #\n  # In almost all situations, you must provide a third argument\n  # to SMTP.start/SMTP#start. This is the domain name which you are on\n  # (the host to send mail from). It is called the \"HELO domain\".\n  # The SMTP server will judge whether it should send or reject\n  # the SMTP session by inspecting the HELO domain.\n  #\n  #     Net::SMTP.start('your.smtp.server', 25,\n  #                     'mail.from.domain') { |smtp| ... }\n  #\n  # === SMTP Authentication\n  #\n  # The Net::SMTP class supports three authentication schemes;\n  # PLAIN, LOGIN and CRAM MD5.  (SMTP Authentication: [RFC2554])\n  # To use SMTP authentication, pass extra arguments to\n  # SMTP.start/SMTP#start.\n  #\n  #     # PLAIN\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :plain)\n  #     # LOGIN\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :login)\n  #\n  #     # CRAM MD5\n  #     Net::SMTP.start('your.smtp.server', 25, 'mail.from.domain',\n  #                     'Your Account', 'Your Password', :cram_md5)\n  #\n  class SMTP\n\n    Revision = %q$Revision$.split[1]\n\n    # The default SMTP port number, 25.\n    def SMTP.default_port\n      25\n    end\n\n    # The default mail submission port number, 587.\n    def SMTP.default_submission_port\n      587\n    end\n\n    # The default SMTPS port number, 465.\n    def SMTP.default_tls_port\n      465\n    end\n\n    class << self\n      alias default_ssl_port default_tls_port\n    end\n\n    def SMTP.default_ssl_context\n      OpenSSL::SSL::SSLContext.new\n    end\n\n    #\n    # Creates a new Net::SMTP object.\n    #\n    # +address+ is the hostname or ip address of your SMTP\n    # server.  +port+ is the port to connect to; it defaults to\n    # port 25.\n    #\n    # This method does not open the TCP connection.  You can use\n    # SMTP.start instead of SMTP.new if you want to do everything\n    # at once.  Otherwise, follow SMTP.new with SMTP#start.\n    #\n    def initialize(address, port = nil)\n      @address = address\n      @port = (port || SMTP.default_port)\n      @esmtp = true\n      @capabilities = nil\n      @socket = nil\n      @started = false\n      @open_timeout = 30\n      @read_timeout = 60\n      @error_occurred = false\n      @debug_output = nil\n      @tls = false\n      @starttls = false\n      @ssl_context = nil\n    end\n\n    # Provide human-readable stringification of class state.\n    def inspect\n      \"#<#{self.class} #{@address}:#{@port} started=#{@started}>\"\n    end\n\n    #\n    # Set whether to use ESMTP or not.  This should be done before\n    # calling #start.  Note that if #start is called in ESMTP mode,\n    # and the connection fails due to a ProtocolError, the SMTP\n    # object will automatically switch to plain SMTP mode and\n    # retry (but not vice versa).\n    #\n    attr_accessor :esmtp\n\n    # +true+ if the SMTP object uses ESMTP (which it does by default).\n    alias :esmtp? :esmtp\n\n    # true if server advertises STARTTLS.\n    # You cannot get valid value before opening SMTP session.\n    def capable_starttls?\n      capable?('STARTTLS')\n    end\n\n    def capable?(key)\n      return nil unless @capabilities\n      @capabilities[key] ? true : false\n    end\n    private :capable?\n\n    # true if server advertises AUTH PLAIN.\n    # You cannot get valid value before opening SMTP session.\n    def capable_plain_auth?\n      auth_capable?('PLAIN')\n    end\n\n    # true if server advertises AUTH LOGIN.\n    # You cannot get valid value before opening SMTP session.\n    def capable_login_auth?\n      auth_capable?('LOGIN')\n    end\n\n    # true if server advertises AUTH CRAM-MD5.\n    # You cannot get valid value before opening SMTP session.\n    def capable_cram_md5_auth?\n      auth_capable?('CRAM-MD5')\n    end\n\n    def auth_capable?(type)\n      return nil unless @capabilities\n      return false unless @capabilities['AUTH']\n      @capabilities['AUTH'].include?(type)\n    end\n    private :auth_capable?\n\n    # Returns supported authentication methods on this server.\n    # You cannot get valid value before opening SMTP session.\n    def capable_auth_types\n      return [] unless @capabilities\n      return [] unless @capabilities['AUTH']\n      @capabilities['AUTH']\n    end\n\n    # true if this object uses SMTP/TLS (SMTPS).\n    def tls?\n      @tls\n    end\n\n    alias ssl? tls?\n\n    # Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for\n    # this object.  Must be called before the connection is established\n    # to have any effect.  +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_tls(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @starttls\n      @tls = true\n      @ssl_context = context\n    end\n\n    alias enable_ssl enable_tls\n\n    # Disables SMTP/TLS for this object.  Must be called before the\n    # connection is established to have any effect.\n    def disable_tls\n      @tls = false\n      @ssl_context = nil\n    end\n\n    alias disable_ssl disable_tls\n\n    # Returns truth value if this object uses STARTTLS.\n    # If this object always uses STARTTLS, returns :always.\n    # If this object uses STARTTLS when the server support TLS, returns :auto.\n    def starttls?\n      @starttls\n    end\n\n    # true if this object uses STARTTLS.\n    def starttls_always?\n      @starttls == :always\n    end\n\n    # true if this object uses STARTTLS when server advertises STARTTLS.\n    def starttls_auto?\n      @starttls == :auto\n    end\n\n    # Enables SMTP/TLS (STARTTLS) for this object.\n    # +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_starttls(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @tls\n      @starttls = :always\n      @ssl_context = context\n    end\n\n    # Enables SMTP/TLS (STARTTLS) for this object if server accepts.\n    # +context+ is a OpenSSL::SSL::SSLContext object.\n    def enable_starttls_auto(context = SMTP.default_ssl_context)\n      raise 'openssl library not installed' unless defined?(OpenSSL)\n      raise ArgumentError, \"SMTPS and STARTTLS is exclusive\" if @tls\n      @starttls = :auto\n      @ssl_context = context\n    end\n\n    # Disables SMTP/TLS (STARTTLS) for this object.  Must be called\n    # before the connection is established to have any effect.\n    def disable_starttls\n      @starttls = false\n      @ssl_context = nil\n    end\n\n    # The address of the SMTP server to connect to.\n    attr_reader :address\n\n    # The port number of the SMTP server to connect to.\n    attr_reader :port\n\n    # Seconds to wait while attempting to open a connection.\n    # If the connection cannot be opened within this time, a\n    # Net::OpenTimeout is raised. The default value is 30 seconds.\n    attr_accessor :open_timeout\n\n    # Seconds to wait while reading one block (by one read(2) call).\n    # If the read(2) call does not complete within this time, a\n    # Net::ReadTimeout is raised. The default value is 60 seconds.\n    attr_reader :read_timeout\n\n    # Set the number of seconds to wait until timing-out a read(2)\n    # call.\n    def read_timeout=(sec)\n      @socket.read_timeout = sec if @socket\n      @read_timeout = sec\n    end\n\n    #\n    # WARNING: This method causes serious security holes.\n    # Use this method for only debugging.\n    #\n    # Set an output stream for debug logging.\n    # You must call this before #start.\n    #\n    #   # example\n    #   smtp = Net::SMTP.new(addr, port)\n    #   smtp.set_debug_output $stderr\n    #   smtp.start do |smtp|\n    #     ....\n    #   end\n    #\n    def debug_output=(arg)\n      @debug_output = arg\n    end\n\n    alias set_debug_output debug_output=\n\n    #\n    # SMTP session control\n    #\n\n    #\n    # Creates a new Net::SMTP object and connects to the server.\n    #\n    # This method is equivalent to:\n    #\n    #   Net::SMTP.new(address, port).start(helo_domain, account, password, authtype)\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('your.smtp.server') do |smtp|\n    #       smtp.send_message msgstr, 'from@example.com', ['dest@example.com']\n    #     end\n    #\n    # === Block Usage\n    #\n    # If called with a block, the newly-opened Net::SMTP object is yielded\n    # to the block, and automatically closed when the block finishes.  If called\n    # without a block, the newly-opened Net::SMTP object is returned to\n    # the caller, and it is the caller's responsibility to close it when\n    # finished.\n    #\n    # === Parameters\n    #\n    # +address+ is the hostname or ip address of your smtp server.\n    #\n    # +port+ is the port to connect to; it defaults to port 25.\n    #\n    # +helo+ is the _HELO_ _domain_ provided by the client to the\n    # server (see overview comments); it defaults to 'localhost'.\n    #\n    # The remaining arguments are used for SMTP authentication, if required\n    # or desired.  +user+ is the account name; +secret+ is your password\n    # or other authentication token; and +authtype+ is the authentication\n    # type, one of :plain, :login, or :cram_md5.  See the discussion of\n    # SMTP Authentication in the overview notes.\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPAuthenticationError\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::OpenTimeout\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def SMTP.start(address, port = nil, helo = 'localhost',\n                   user = nil, secret = nil, authtype = nil,\n                   &block)   # :yield: smtp\n      new(address, port).start(helo, user, secret, authtype, &block)\n    end\n\n    # +true+ if the SMTP session has been started.\n    def started?\n      @started\n    end\n\n    #\n    # Opens a TCP connection and starts the SMTP session.\n    #\n    # === Parameters\n    #\n    # +helo+ is the _HELO_ _domain_ that you'll dispatch mails from; see\n    # the discussion in the overview notes.\n    #\n    # If both of +user+ and +secret+ are given, SMTP authentication\n    # will be attempted using the AUTH command.  +authtype+ specifies\n    # the type of authentication to attempt; it must be one of\n    # :login, :plain, and :cram_md5.  See the notes on SMTP Authentication\n    # in the overview.\n    #\n    # === Block Usage\n    #\n    # When this methods is called with a block, the newly-started SMTP\n    # object is yielded to the block, and automatically closed after\n    # the block call finishes.  Otherwise, it is the caller's\n    # responsibility to close the session when finished.\n    #\n    # === Example\n    #\n    # This is very similar to the class method SMTP.start.\n    #\n    #     require 'net/smtp'\n    #     smtp = Net::SMTP.new('smtp.mail.server', 25)\n    #     smtp.start(helo_domain, account, password, authtype) do |smtp|\n    #       smtp.send_message msgstr, 'from@example.com', ['dest@example.com']\n    #     end\n    #\n    # The primary use of this method (as opposed to SMTP.start)\n    # is probably to set debugging (#set_debug_output) or ESMTP\n    # (#esmtp=), which must be done before the session is\n    # started.\n    #\n    # === Errors\n    #\n    # If session has already been started, an IOError will be raised.\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPAuthenticationError\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::OpenTimeout\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def start(helo = 'localhost',\n              user = nil, secret = nil, authtype = nil)   # :yield: smtp\n      if block_given?\n        begin\n          do_start helo, user, secret, authtype\n          return yield(self)\n        ensure\n          do_finish\n        end\n      else\n        do_start helo, user, secret, authtype\n        return self\n      end\n    end\n\n    # Finishes the SMTP session and closes TCP connection.\n    # Raises IOError if not started.\n    def finish\n      raise IOError, 'not yet started' unless started?\n      do_finish\n    end\n\n    private\n\n    def tcp_socket(address, port)\n      TCPSocket.open address, port\n    end\n\n    def do_start(helo_domain, user, secret, authtype)\n      raise IOError, 'SMTP session already started' if @started\n      if user or secret\n        check_auth_method(authtype || DEFAULT_AUTH_TYPE)\n        check_auth_args user, secret\n      end\n      s = Timeout.timeout(@open_timeout, Net::OpenTimeout) do\n        tcp_socket(@address, @port)\n      end\n      logging \"Connection opened: #{@address}:#{@port}\"\n      @socket = new_internet_message_io(tls? ? tlsconnect(s) : s)\n      check_response critical { recv_response() }\n      do_helo helo_domain\n      if starttls_always? or (capable_starttls? and starttls_auto?)\n        unless capable_starttls?\n          raise SMTPUnsupportedCommand,\n              \"STARTTLS is not supported on this server\"\n        end\n        starttls\n        @socket = new_internet_message_io(tlsconnect(s))\n        # helo response may be different after STARTTLS\n        do_helo helo_domain\n      end\n      authenticate user, secret, (authtype || DEFAULT_AUTH_TYPE) if user\n      @started = true\n    ensure\n      unless @started\n        # authentication failed, cancel connection.\n        s.close if s and not s.closed?\n        @socket = nil\n      end\n    end\n\n    def ssl_socket(socket, context)\n      OpenSSL::SSL::SSLSocket.new socket, context\n    end\n\n    def tlsconnect(s)\n      verified = false\n      s = ssl_socket(s, @ssl_context)\n      logging \"TLS connection started\"\n      s.sync_close = true\n      s.connect\n      if @ssl_context.verify_mode != OpenSSL::SSL::VERIFY_NONE\n        s.post_connection_check(@address)\n      end\n      verified = true\n      s\n    ensure\n      s.close unless verified\n    end\n\n    def new_internet_message_io(s)\n      io = InternetMessageIO.new(s)\n      io.read_timeout = @read_timeout\n      io.debug_output = @debug_output\n      io\n    end\n\n    def do_helo(helo_domain)\n      res = @esmtp ? ehlo(helo_domain) : helo(helo_domain)\n      @capabilities = res.capabilities\n    rescue SMTPError\n      if @esmtp\n        @esmtp = false\n        @error_occurred = false\n        retry\n      end\n      raise\n    end\n\n    def do_finish\n      quit if @socket and not @socket.closed? and not @error_occurred\n    ensure\n      @started = false\n      @error_occurred = false\n      @socket.close if @socket and not @socket.closed?\n      @socket = nil\n    end\n\n    #\n    # Message Sending\n    #\n\n    public\n\n    #\n    # Sends +msgstr+ as a message.  Single CR (\"\\r\") and LF (\"\\n\") found\n    # in the +msgstr+, are converted into the CR LF pair.  You cannot send a\n    # binary message with this method. +msgstr+ should include both\n    # the message headers and body.\n    #\n    # +from_addr+ is a String representing the source mail address.\n    #\n    # +to_addr+ is a String or Strings or Array of Strings, representing\n    # the destination mail address or addresses.\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('smtp.example.com') do |smtp|\n    #       smtp.send_message msgstr,\n    #                         'from@example.com',\n    #                         ['dest@example.com', 'dest2@example.com']\n    #     end\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def send_message(msgstr, from_addr, *to_addrs)\n      raise IOError, 'closed session' unless @socket\n      mailfrom from_addr\n      rcptto_list(to_addrs) {data msgstr}\n    end\n\n    alias send_mail send_message\n    alias sendmail send_message   # obsolete\n\n    #\n    # Opens a message writer stream and gives it to the block.\n    # The stream is valid only in the block, and has these methods:\n    #\n    # puts(str = '')::       outputs STR and CR LF.\n    # print(str)::           outputs STR.\n    # printf(fmt, *args)::   outputs sprintf(fmt,*args).\n    # write(str)::           outputs STR and returns the length of written bytes.\n    # <<(str)::              outputs STR and returns self.\n    #\n    # If a single CR (\"\\r\") or LF (\"\\n\") is found in the message,\n    # it is converted to the CR LF pair.  You cannot send a binary\n    # message with this method.\n    #\n    # === Parameters\n    #\n    # +from_addr+ is a String representing the source mail address.\n    #\n    # +to_addr+ is a String or Strings or Array of Strings, representing\n    # the destination mail address or addresses.\n    #\n    # === Example\n    #\n    #     Net::SMTP.start('smtp.example.com', 25) do |smtp|\n    #       smtp.open_message_stream('from@example.com', ['dest@example.com']) do |f|\n    #         f.puts 'From: from@example.com'\n    #         f.puts 'To: dest@example.com'\n    #         f.puts 'Subject: test message'\n    #         f.puts\n    #         f.puts 'This is a test message.'\n    #       end\n    #     end\n    #\n    # === Errors\n    #\n    # This method may raise:\n    #\n    # * Net::SMTPServerBusy\n    # * Net::SMTPSyntaxError\n    # * Net::SMTPFatalError\n    # * Net::SMTPUnknownError\n    # * Net::ReadTimeout\n    # * IOError\n    #\n    def open_message_stream(from_addr, *to_addrs, &block)   # :yield: stream\n      raise IOError, 'closed session' unless @socket\n      mailfrom from_addr\n      rcptto_list(to_addrs) {data(&block)}\n    end\n\n    alias ready open_message_stream   # obsolete\n\n    #\n    # Authentication\n    #\n\n    public\n\n    DEFAULT_AUTH_TYPE = :plain\n\n    def authenticate(user, secret, authtype = DEFAULT_AUTH_TYPE)\n      check_auth_method authtype\n      check_auth_args user, secret\n      send auth_method(authtype), user, secret\n    end\n\n    def auth_plain(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        get_response('AUTH PLAIN ' + base64_encode(\"\\0#{user}\\0#{secret}\"))\n      }\n      check_auth_response res\n      res\n    end\n\n    def auth_login(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        check_auth_continue get_response('AUTH LOGIN')\n        check_auth_continue get_response(base64_encode(user))\n        get_response(base64_encode(secret))\n      }\n      check_auth_response res\n      res\n    end\n\n    def auth_cram_md5(user, secret)\n      check_auth_args user, secret\n      res = critical {\n        res0 = get_response('AUTH CRAM-MD5')\n        check_auth_continue res0\n        crammed = cram_md5_response(secret, res0.cram_md5_challenge)\n        get_response(base64_encode(\"#{user} #{crammed}\"))\n      }\n      check_auth_response res\n      res\n    end\n\n    private\n\n    def check_auth_method(type)\n      unless respond_to?(auth_method(type), true)\n        raise ArgumentError, \"wrong authentication type #{type}\"\n      end\n    end\n\n    def auth_method(type)\n      \"auth_#{type.to_s.downcase}\".intern\n    end\n\n    def check_auth_args(user, secret, authtype = DEFAULT_AUTH_TYPE)\n      unless user\n        raise ArgumentError, 'SMTP-AUTH requested but missing user name'\n      end\n      unless secret\n        raise ArgumentError, 'SMTP-AUTH requested but missing secret phrase'\n      end\n    end\n\n    def base64_encode(str)\n      # expects \"str\" may not become too long\n      [str].pack('m0')\n    end\n\n    IMASK = 0x36\n    OMASK = 0x5c\n\n    # CRAM-MD5: [RFC2195]\n    def cram_md5_response(secret, challenge)\n      tmp = Digest::MD5.digest(cram_secret(secret, IMASK) + challenge)\n      Digest::MD5.hexdigest(cram_secret(secret, OMASK) + tmp)\n    end\n\n    CRAM_BUFSIZE = 64\n\n    def cram_secret(secret, mask)\n      secret = Digest::MD5.digest(secret) if secret.size > CRAM_BUFSIZE\n      buf = secret.ljust(CRAM_BUFSIZE, \"\\0\")\n      0.upto(buf.size - 1) do |i|\n        buf[i] = (buf[i].ord ^ mask).chr\n      end\n      buf\n    end\n\n    #\n    # SMTP command dispatcher\n    #\n\n    public\n\n    # Aborts the current mail transaction\n\n    def rset\n      getok('RSET')\n    end\n\n    def starttls\n      getok('STARTTLS')\n    end\n\n    def helo(domain)\n      getok(\"HELO #{domain}\")\n    end\n\n    def ehlo(domain)\n      getok(\"EHLO #{domain}\")\n    end\n\n    def mailfrom(from_addr)\n      if $SAFE > 0\n        raise SecurityError, 'tainted from_addr' if from_addr.tainted?\n      end\n      getok(\"MAIL FROM:<#{from_addr}>\")\n    end\n\n    def rcptto_list(to_addrs)\n      raise ArgumentError, 'mail destination not given' if to_addrs.empty?\n      ok_users = []\n      unknown_users = []\n      to_addrs.flatten.each do |addr|\n        begin\n          rcptto addr\n        rescue SMTPAuthenticationError\n          unknown_users << addr.dump\n        else\n          ok_users << addr\n        end\n      end\n      raise ArgumentError, 'mail destination not given' if ok_users.empty?\n      ret = yield\n      unless unknown_users.empty?\n        raise SMTPAuthenticationError, \"failed to deliver for #{unknown_users.join(', ')}\"\n      end\n      ret\n    end\n\n    def rcptto(to_addr)\n      if $SAFE > 0\n        raise SecurityError, 'tainted to_addr' if to_addr.tainted?\n      end\n      getok(\"RCPT TO:<#{to_addr}>\")\n    end\n\n    # This method sends a message.\n    # If +msgstr+ is given, sends it as a message.\n    # If block is given, yield a message writer stream.\n    # You must write message before the block is closed.\n    #\n    #   # Example 1 (by string)\n    #   smtp.data(<<EndMessage)\n    #   From: john@example.com\n    #   To: betty@example.com\n    #   Subject: I found a bug\n    #\n    #   Check vm.c:58879.\n    #   EndMessage\n    #\n    #   # Example 2 (by block)\n    #   smtp.data {|f|\n    #     f.puts \"From: john@example.com\"\n    #     f.puts \"To: betty@example.com\"\n    #     f.puts \"Subject: I found a bug\"\n    #     f.puts \"\"\n    #     f.puts \"Check vm.c:58879.\"\n    #   }\n    #\n    def data(msgstr = nil, &block)   #:yield: stream\n      if msgstr and block\n        raise ArgumentError, \"message and block are exclusive\"\n      end\n      unless msgstr or block\n        raise ArgumentError, \"message or block is required\"\n      end\n      res = critical {\n        check_continue get_response('DATA')\n        socket_sync_bak = @socket.io.sync\n        begin\n          @socket.io.sync = false\n          if msgstr\n            @socket.write_message msgstr\n          else\n            @socket.write_message_by_block(&block)\n          end\n        ensure\n          @socket.io.flush\n          @socket.io.sync = socket_sync_bak\n        end\n        recv_response()\n      }\n      check_response res\n      res\n    end\n\n    def quit\n      getok('QUIT')\n    end\n\n    private\n\n    def validate_line(line)\n      # A bare CR or LF is not allowed in RFC5321.\n      if /[\\r\\n]/ =~ line\n        raise ArgumentError, \"A line must not contain CR or LF\"\n      end\n    end\n\n    def getok(reqline)\n      validate_line reqline\n      res = critical {\n        @socket.writeline reqline\n        recv_response()\n      }\n      check_response res\n      res\n    end\n\n    def get_response(reqline)\n      validate_line reqline\n      @socket.writeline reqline\n      recv_response()\n    end\n\n    def recv_response\n      buf = ''\n      while true\n        line = @socket.readline\n        buf << line << \"\\n\"\n        break unless line[3,1] == '-'   # \"210-PIPELINING\"\n      end\n      Response.parse(buf)\n    end\n\n    def critical\n      return Response.parse('200 dummy reply code') if @error_occurred\n      begin\n        return yield()\n      rescue Exception\n        @error_occurred = true\n        raise\n      end\n    end\n\n    def check_response(res)\n      unless res.success?\n        raise res.exception_class, res.message\n      end\n    end\n\n    def check_continue(res)\n      unless res.continue?\n        raise SMTPUnknownError, \"could not get 3xx (#{res.status}: #{res.string})\"\n      end\n    end\n\n    def check_auth_response(res)\n      unless res.success?\n        raise SMTPAuthenticationError, res.message\n      end\n    end\n\n    def check_auth_continue(res)\n      unless res.continue?\n        raise res.exception_class, res.message\n      end\n    end\n\n    # This class represents a response received by the SMTP server. Instances\n    # of this class are created by the SMTP class; they should not be directly\n    # created by the user. For more information on SMTP responses, view\n    # {Section 4.2 of RFC 5321}[http://tools.ietf.org/html/rfc5321#section-4.2]\n    class Response\n      # Parses the received response and separates the reply code and the human\n      # readable reply text\n      def self.parse(str)\n        new(str[0,3], str)\n      end\n\n      # Creates a new instance of the Response class and sets the status and\n      # string attributes\n      def initialize(status, string)\n        @status = status\n        @string = string\n      end\n\n      # The three digit reply code of the SMTP response\n      attr_reader :status\n\n      # The human readable reply text of the SMTP response\n      attr_reader :string\n\n      # Takes the first digit of the reply code to determine the status type\n      def status_type_char\n        @status[0, 1]\n      end\n\n      # Determines whether the response received was a Positive Completion\n      # reply (2xx reply code)\n      def success?\n        status_type_char() == '2'\n      end\n\n      # Determines whether the response received was a Positive Intermediate\n      # reply (3xx reply code)\n      def continue?\n        status_type_char() == '3'\n      end\n\n      # The first line of the human readable reply text\n      def message\n        @string.lines.first\n      end\n\n      # Creates a CRAM-MD5 challenge. You can view more information on CRAM-MD5\n      # on Wikipedia: http://en.wikipedia.org/wiki/CRAM-MD5\n      def cram_md5_challenge\n        @string.split(/ /)[1].unpack('m')[0]\n      end\n\n      # Returns a hash of the human readable reply text in the response if it\n      # is multiple lines. It does not return the first line. The key of the\n      # hash is the first word the value of the hash is an array with each word\n      # thereafter being a value in the array\n      def capabilities\n        return {} unless @string[3, 1] == '-'\n        h = {}\n        @string.lines.drop(1).each do |line|\n          k, *v = line[4..-1].chomp.split\n          h[k] = v\n        end\n        h\n      end\n\n      # Determines whether there was an error and raises the appropriate error\n      # based on the reply code of the response\n      def exception_class\n        case @status\n        when /\\A4/  then SMTPServerBusy\n        when /\\A50/ then SMTPSyntaxError\n        when /\\A53/ then SMTPAuthenticationError\n        when /\\A5/  then SMTPFatalError\n        else             SMTPUnknownError\n        end\n      end\n    end\n\n    def logging(msg)\n      @debug_output << msg + \"\\n\" if @debug_output\n    end\n\n  end   # class SMTP\n\n  SMTPSession = SMTP # :nodoc:\n\nend\n", "# frozen_string_literal: false\nrequire 'net/smtp'\nrequire 'stringio'\nrequire 'test/unit'\n\nmodule Net\n  class TestSMTP < Test::Unit::TestCase\n    class FakeSocket\n      attr_reader :write_io\n\n      def initialize out = \"250 OK\\n\"\n        @write_io = StringIO.new\n        @read_io  = StringIO.new out\n      end\n\n      def writeline line\n        @write_io.write \"#{line}\\r\\n\"\n      end\n\n      def readline\n        line = @read_io.gets\n        raise 'ran out of input' unless line\n        line.chop\n      end\n    end\n\n    def test_critical\n      smtp = Net::SMTP.new 'localhost', 25\n\n      assert_raise RuntimeError do\n        smtp.send :critical do\n          raise 'fail on purpose'\n        end\n      end\n\n      assert_kind_of Net::SMTP::Response, smtp.send(:critical),\n                     '[Bug #9125]'\n    end\n\n    def test_esmtp\n      smtp = Net::SMTP.new 'localhost', 25\n      assert smtp.esmtp\n      assert smtp.esmtp?\n\n      smtp.esmtp = 'omg'\n      assert_equal 'omg', smtp.esmtp\n      assert_equal 'omg', smtp.esmtp?\n    end\n\n    def test_rset\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, FakeSocket.new\n\n      assert smtp.rset\n    end\n\n    def test_mailfrom\n      sock = FakeSocket.new\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, sock\n      assert smtp.mailfrom(\"foo@example.com\").success?\n      assert_equal \"MAIL FROM:<foo@example.com>\\r\\n\", sock.write_io.string\n    end\n\n    def test_rcptto\n      sock = FakeSocket.new\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, sock\n      assert smtp.rcptto(\"foo@example.com\").success?\n      assert_equal \"RCPT TO:<foo@example.com>\\r\\n\", sock.write_io.string\n    end\n\n    def test_auth_plain\n      sock = FakeSocket.new\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, sock\n      assert smtp.auth_plain(\"foo\", \"bar\").success?\n      assert_equal \"AUTH PLAIN AGZvbwBiYXI=\\r\\n\", sock.write_io.string\n    end\n\n    def test_crlf_injection\n      smtp = Net::SMTP.new 'localhost', 25\n      smtp.instance_variable_set :@socket, FakeSocket.new\n\n      assert_raise(ArgumentError) do\n        smtp.mailfrom(\"foo\\r\\nbar\")\n      end\n\n      assert_raise(ArgumentError) do\n        smtp.mailfrom(\"foo\\rbar\")\n      end\n\n      assert_raise(ArgumentError) do\n        smtp.mailfrom(\"foo\\nbar\")\n      end\n\n      assert_raise(ArgumentError) do\n        smtp.rcptto(\"foo\\r\\nbar\")\n      end\n    end\n  end\nend\n"], "filenames": ["ChangeLog", "lib/net/smtp.rb", "test/net/smtp/test_smtp.rb"], "buggy_code_start_loc": [0, 928, 8], "buggy_code_end_loc": [0, 938, 53], "fixing_code_start_loc": [1, 929, 9], "fixing_code_end_loc": [7, 948, 101], "type": "CWE-93", "message": "Net::SMTP in Ruby before 2.4.0 is vulnerable to SMTP command injection via CRLF sequences in a RCPT TO or MAIL FROM command, as demonstrated by CRLF sequences immediately before and after a DATA substring.", "other": {"cve": {"id": "CVE-2015-9096", "sourceIdentifier": "cve@mitre.org", "published": "2017-06-12T20:29:00.190", "lastModified": "2018-07-15T01:29:00.337", "vulnStatus": "Modified", "descriptions": [{"lang": "en", "value": "Net::SMTP in Ruby before 2.4.0 is vulnerable to SMTP command injection via CRLF sequences in a RCPT TO or MAIL FROM command, as demonstrated by CRLF sequences immediately before and after a DATA substring."}, {"lang": "es", "value": "El modulo Net::SMTP de Ruby anterior a su versi\u00f3n 2.4.0 es vulnerable a la inyecci\u00f3n de comandos SMTP mediante secuencias CRLF de los comandos \"RCPT TO\" o \"MAIL FROM\", como demuestra las secuencias CRLF inmediatamente antes y despu\u00e9s de la substring DATA."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-93"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:ruby-lang:ruby:*:rc1:*:*:*:*:*:*", "versionEndIncluding": "2.4.0", "matchCriteriaId": "70BED4E2-17E3-4B9D-8C58-ECBE978E90F3"}]}]}], "references": [{"url": "http://www.mbsd.jp/Whitepaper/smtpi.pdf", "source": "cve@mitre.org", "tags": ["Exploit", "Third Party Advisory"]}, {"url": "https://github.com/ruby/ruby/commit/0827a7e52ba3d957a634b063bf5a391239b9ffee", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/rubysec/ruby-advisory-db/issues/215", "source": "cve@mitre.org", "tags": ["Issue Tracking", "Third Party Advisory"]}, {"url": "https://hackerone.com/reports/137631", "source": "cve@mitre.org", "tags": ["Third Party Advisory"]}, {"url": "https://lists.debian.org/debian-lts-announce/2018/07/msg00012.html", "source": "cve@mitre.org"}, {"url": "https://www.debian.org/security/2017/dsa-3966", "source": "cve@mitre.org"}]}, "github_commit_url": "https://github.com/ruby/ruby/commit/0827a7e52ba3d957a634b063bf5a391239b9ffee"}}