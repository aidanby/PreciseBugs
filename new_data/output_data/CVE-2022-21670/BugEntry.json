{"buggy_code": ["# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n\n## [12.3.1] - 2022-01-07\n### Fixed\n- Fix corner case when tab prevents paragraph continuation in lists, #830.\n\n\n## [12.3.0] - 2021-12-09\n### Changed\n- `StateInline.delimiters[].jump` is removed.\n\n### Fixed\n- Fixed quadratic complexity in pathological `***<10k stars>***a***<10k stars>***` case.\n\n\n## [12.2.0] - 2021-08-02\n### Added\n- Ordered lists: add order value to token info.\n\n### Fixed\n- Always suffix indented code block with a newline, #799.\n\n\n## [12.1.0] - 2021-07-01\n### Changed\n- Updated CM spec compatibility to 0.30.\n\n\n## [12.0.6] - 2021-04-16\n### Fixed\n- Newline in `alt` should be rendered, #775.\n\n\n## [12.0.5] - 2021-04-15\n### Fixed\n- HTML block tags with `===` inside are no longer incorrectly interpreted as headers, #772.\n- Fix table/list parsing ambiguity, #767.\n\n\n## [12.0.4] - 2020-12-20\n### Fixed\n- Fix crash introduced in `12.0.3` when processing strikethrough (`~~`) and similar plugins, #742.\n- Avoid fenced token mutation, #745.\n\n\n## [12.0.3] - 2020-12-07\n### Fixed\n- `[](<foo<bar>)` is no longer a valid link.\n- `[](url (xxx())` is no longer a valid link.\n- `[](url\\ xxx)` is no longer a valid link.\n- Fix performance issues when parsing links (#732, #734), backticks, (#733, #736),\n  emphases (#735), and autolinks (#737).\n- Allow newline in `<? ... ?>` in an inline context.\n- Allow `<meta>` html tag to appear in an inline context.\n\n\n## [12.0.2] - 2020-10-23\n### Fixed\n- Three pipes (`|\\n|\\n|`) are no longer rendered as a table with no columns, #724.\n\n\n## [12.0.1] - 2020-10-19\n### Fixed\n- Fix tables inside lists indented with tabs, #721.\n\n\n## [12.0.0] - 2020-10-14\n### Added\n- `.gitattributes`, force unix eol under windows, for development.\n\n### Changed\n- Added 3rd argument to `highlight(code, lang, attrs)`, #626.\n- Rewrite tables according to latest GFM spec, #697.\n- Use `rollup.js` to browserify sources.\n- Drop `bower.json` (bower reached EOL).\n- Deps bump.\n- Tune `specsplit.js` options.\n- Drop `Makefile` in favour of npm scrips.\n\n### Fixed\n- Fix mappings for table rows (amended fix made in 11.0.1), #705.\n- `%25` is no longer decoded in beautified urls, #720.\n\n\n## [11.0.1] - 2020-09-14\n### Fixed\n- Fix blockquote lazy newlines, #696.\n- Fix missed mappings for table rows, #705.\n\n\n## [11.0.0] - 2020-05-20\n### Changed\n- Bumped `linkify-it` to 3.0.0, #661 + allow unlimited `.` inside links.\n- Dev deps bump.\n- Switch to `nyc` for coverage reports.\n- Partially moved tasks from Makefile to npm scripts.\n- Automate web update on npm publish.\n\n### Fixed\n- Fix em- and en-dashes not being typographed when separated by 1 char, #624.\n- Allow opening quote after another punctuation char in typographer, #641.\n- Assorted wording & typo fixes.\n\n\n## [10.0.0] - 2019-09-11\n### Security\n- Fix quadratic parse time for some combinations of pairs, #583. Algorithm is\n  now similar to one in reference implementation.\n\n### Changed\n- Minor internal structs change, to make pairs parse more effective (cost is\n  linear now). If you use external \"pairs\" extensions, you need sync those with\n  \"official ones\". Without update, old code will work, but can cause invalid\n  result in rare case. This is the only reason of major version bump. With high probability you don't need to change your code, only update version dependency.\n- Updated changelog format.\n- Deps bump.\n\n\n## [9.1.0] - 2019-08-11\n### Changed\n- Remove extra characters from line break check. Leave only 0x0A & 0x0D, as in\n  CommonMark spec, #581.\n\n\n## [9.0.1] - 2019-07-12\n### Fixed\n- Fix possible corruption of open/close tag levels, #466\n\n\n## [9.0.0] - 2019-07-09\n### Changed\n- Updated CM spec compatibility to 0.29.\n- Update Travis-CI node version to actual (8 & latest).\n- Deps bump.\n\n\n## [8.4.2] - 2018-02-15\n### Fixed\n- Fix `--no-html` CLI option, #476.\n\n\n## [8.4.1] - 2018-02-15\n### Fixed\n- Fix smartquotes around softbreaks, #430.\n\n\n## [8.4.0] - 2017-08-24\n### Changed\n- Updated CM spec compatibility to 0.28.\n\n\n## [8.3.2] - 2017-08-03\n### Fixed\n- Fix blockquote termination inside lists, #386.\n\n\n## [8.3.1] - 2017-03-06\n### Fixed\n- Fix blockquote termination by list item, #338.\n\n\n## [8.3.0] - 2017-02-16\n### Changed\n- Remove tabs at the beginning of the line in paragraphs.\n- Better error message for bad input type, #324.\n\n### Fixed\n- Fix table indentation issues, #325, #224.\n- Fix blockquote termination inside indented lists, #329.\n\n\n## [8.2.2] - 2016-12-15\n### Added\n- Add `-o` / `--output` option to CLI, #312.\n\n\n## [8.2.1] - 2016-12-02\n### Fixed\n- Add missed h2..h6 to whitelisted block tags.\n\n\n## [8.2.0] - 2016-12-01\n### Changed\n- Updated CM spec compatibility to 0.27 (no significant changes).\n\n### Fixed\n- Fix backticks handle inside tables, #303.\n- Fix edge case for fenced blocks with `~~~` in info, #301.\n- Fix fallback to reference if link is not valid, #302.\n\n\n## [8.1.0] - 2016-11-03\n### Changed\n- Make link parse helpers (`md.helpers`) pluggable, #299.\n\n\n## [8.0.1] - 2016-10-18\n### Fixed\n- Tables: allow tab characters in markup\n\n\n## [8.0.0] - 2016-09-16\n### Changed\n- Benchmarks src cleanup.\n- Remove testing in old nodes (but still use es5).\n- Updated CM spec compatibility to 0.26 (see list below):\n- Two consecutive newlines no longer terminate a list.\n- Ordered list terminating a paragraph can now only start with 1.\n- Adjust emphasis algorithm (`*foo**bar**baz*` is now parsed as `<strong>`\n  inside `<em>`).\n- Fix tab width calculation inside lists and blockquotes.\n\n\n## [7.0.1] - 2016-08-16\n### Fixed\n- Fence renderer: fix concat of class array, #276.\n- Code renderer: do not render double space before attrs, #275.\n- Replacer: disable replacements inside autolinks, #272.\n\n\n## [7.0.0] - 2016-06-22\n### Changed\n- Bump `linkify-it` dependency to 2.0.0.  `---` no longer terminates\n  autodetected links by default. `md.linkifier.set('---', true)` will return old\n  behaviour.\n- Major version bumped, because internals or `linkify-it` was changed.\n  You will not be affected anyhow, if not used direct access to\n  `require('linkify-it/re')` for customizations.\n\n\n## [6.1.1] - 2016-06-21\n### Changed\n- Render `code_inline` & `code_block` attributes if exist.\n\n\n## [6.1.0] - 2016-06-19\n### Changed\n- Updated `fence` renderer to not mutate token. Token stream should be\n  immutable after renderer call.\n\n\n## [6.0.5] - 2016-06-01\n### Fixed\n- Process `\\r` the same way as `\\n` and `\\r\\n\\`, #252.\n\n\n## [6.0.4] - 2016-05-30\n### Added\n- Added `Token.attrGet()` method for convenience, #251.\n\n\n## [6.0.3] - 2016-05-30\n### Security\n- Security fix: possible ReDOS in `linkify-it` (forced bump of `linkify-it` &\n  `uc-micro` dependencies). New installs will use fixed packages automatically,\n  but we bumped `markdown-it` version for sure & for web builds.\n\n\n## [6.0.2] - 2016-05-16\n### Fixed\n- Fix: should not escape twice content of image alt attribute, #246.\n\n\n## [6.0.1] - 2016-04-02\n### Fixed\n- Improve support of missing values in tables, #224.\n\n\n## [6.0.0] - 2016-02-11\n### Changed\n- Maintenance release. Version bump caused by notable changes in CM spec\n  (multiline setext headers, no spaces inside links, ...). API was not changed.\n- Fit CM 0.24 spec requirements.\n\n### Fixed\n- Fixed nesting limit check in inline blocks, #197.\n- Fixed posible tail loss in CLI ouput.\n\n\n## [5.1.0] - 2016-01-07\n### Added\n- Token: added `.attrSet()` & `.attrJoin()` methods.\n- Highlighter: allow wrapper override (if result starts with \"<pre\").\n\n\n## [5.0.3] - 2016-01-04\n### Fixed\n- Allow single column and mismatched columns count in tables.\n- Smartquotes: take into account adjacent tokens.\n- Fill `content` property in image token with `alt` source.\n\n\n## [5.0.2] - 2015-11-20\n### Fixed\n- Fix meta information (`token.markup` and `token.info`) for autolink tokens.\n\n\n## [5.0.1] - 2015-10-30\n### Fixed\n- Improved tables compatibility with github, #120.\n\n\n## [5.0.0] - 2015-10-05\n### Changed\n- Internal API change. Due to new CM spec requirements, we had to update\n  internals. That should not touch ordinary users, but can affect some external\n  plugins. If you are plugin developper - see migration guide:\n  https://github.com/markdown-it/markdown-it/blob/master/docs/5.0_migration.md.\n- Updated CM spec compatibility to 0.22 (see list below).\n- Keep tabs (don't replace with spaces).\n- Don't wrap iframes with paragraphs.\n- Rewritten emphasis algorithm.\n\n### Fixed\n- Fix closure compiler collisions (don't use reserved words), #159.\n\n\n## [4.4.0] - 2015-07-18\n### Changed\n- Updated HTML blocks logic to CM 0.21 spec.\n- Minor fixes.\n\n\n## [4.3.1] - 2015-07-15\n### Security\n- Fix class name injection in fence renderer.\n\n### Fixed\n- Allow numbered lists starting from zero.\n\n\n## [4.3.0] - 2015-06-29\n### Changed\n- `linkify-it` dependency update (1.2.0). Now accepts dash at the end of links.\n\n\n## [4.2.2] - 2015-06-10\n### Changed\n- CM spec 0.20.\n\n### Added\n- Added support for multichar substituition in smartquites, #115.\n\n### Fixed\n- Fixed code block render inside blockquites, #116.\n- Doc fixes.\n\n\n## [4.2.1] - 2015-05-01\n### Changed\n- Minor emphasis update to match CM spec 0.19.\n\n\n## [4.2.0] - 2015-04-21\n### Changed\n- Bumped [linkify-it](https://github.com/markdown-it/linkify-it) version to\n  1.1.0. Now links with IP hosts and without protocols are not linkified by\n  default, due possible collisions with some version numbers patterns (0.5.0.0).\n  You still can return back old behaviour by `md.linkify.set({ fuzzyIP: true })`.\n\n\n## [4.1.2] - 2015-04-19\n### Changed\n- Bumped linkifier version. More strict 2-chars tald support for links without\n  schema. Should not linkify things like `io.js` and `node.js`.\n\n\n## [4.1.1] - 2015-04-15\n### Fixed\n- Improved pipe chars support in table cells, #86 (thanks to @jbt).\n\n\n## [4.1.0] - 2015-03-31\n### Security\n- Disabled `data:` URLs by default (except some image mimes), to avoid\n  possible XSS. Version bumped, because features changed (formally). If you did\n  not used `data:` URLs, consider this version as 4.0.4 (no API changes).\n\n### Changed\n- Simplified link validator code. Now more easy to understand and to copy\n  into your projects for customization.\n\n\n## [4.0.3] - 2015-03-25\n### Changed\n- Updated linkifier.\n- Smartquotes rule cleanup (#76).\n\n### Fixed\n- Fixed replacements rule bug in PhantomJS (#77).\n\n\n## [4.0.2] - 2015-03-22\n### Fixed\n- Fixed emphasis `marker` fields in tokens (#69).\n- Fixed html block tokens with numbers in name (#74).\n\n\n## [4.0.1] - 2015-03-13\n### Added\n- Added custom container plugin demo.\n\n### Changed\n- Updated `linkify-it` version.\n\n\n## [4.0.0] - 2015-03-11\n### Changed\n- Breaking internal API changes. See [v4 migration notes](https://github.com/markdown-it/markdown-it/blob/master/docs/4.0_migration.md). In usual case you will need to update plugins.\n- Token internals changed\n- Unified the most of renderer methods.\n- Changed tokens creation - use `state.push(...)` (see sources)\n- Moved `normalizeUrl()` to root class as `.normalizeLink()` &\n  added `normalizeLinkText()` method.\n- Moved `.validateUrl()` to root class and simplified logic - no more need to\n  replace entities.\n- Joined md unescape & replace entities logic to `utils.unescapeAll()`.\n- Removed `replaceEntities()` in `utils`.\n- `md.utils.lib` now exposes useful libs for plugins.\n- Use entities data from external package.\n\n### Fixed\n- Fixed emphasis regression, caused by CM v0.18 spec (#65).\n\n\n## [3.1.0] - 2015-03-05\n### Changed\n- Spec conformance update to 0.18.\n- Significantly improved autolinking quality (use `linkify-it` package), #2.\n\n### Fixed\n- Rewritten links normalizer to solve different edge cases (use `mdurl`\n  package), #29.\n- Moved link title entities replace out of renderer.\n- Fixed escaped entities in links (`foo\\&amp;/bar`).\n- Improved smartquotes logic, #61.\n\n\n## [3.0.7] - 2015-02-22\n### Added\n- Added basic CLI support.\n\n### Changed\n- Use external package for unicode data (punctuation).\n\n### Fixed\n- Added \\v \\f to valid whitespaces.\n- Match table columns count by header.\n\n\n## [3.0.6] - 2015-02-12\n### Added\n- Sync scroll result => source in demo.\n\n### Changed\n- Moved `normalizeReference()` to utils.\n\n### Fixed\n- Fixed hang on long vertical list of links. Appeared in 3.0.5. See #54 for\n  details. Thanks to @fengmk2 for report!\n- Table lines now can have escaped pipe char `\\|` (#5).\n\n\n## [3.0.5] - 2015-02-06\n### Changed\n- Significantly improved tests coverage (with dead code removal and other\n  related things).\n\n### Fixed\n- Fixed link validator - could skip some kind of javascript links with uppercase\n  digital entities (thanks to @opennota)\n\n\n## [3.0.4] - 2015-01-13\n### Changed\n- Improved errors processing in url normalizer (for broken sequences).\n- Improved nesting limit processing in inline parser.\n- Reorganized tests & improved coverage.\n- Show inline diffs for failed tests.\n\n\n## [3.0.3] - 2015-01-11\n### Fixed\n- Fixed punctuation check in emphasis.\n\n\n## [3.0.2] - 2015-01-09\n### Fixed\n- Allow dashes in HTML tag names (needed for custom HTML tags).\n\n\n## [3.0.1] - 2015-01-07\n### Changed\n- Added # to terminator chars.\n\n### Fixed\n- Improved link encoder - fix invalid surrogates to avoid errors.\n\n\n## [3.0.0] - 2015-01-04\n### Changed\n- Big split. All \"rare\" rules moved to external plugins (deflist, abbr, footnote,\n  sub, sup, ins, mark).\n- Updated CM spec conformance to v0.15 (better unicode support).\n- Added `md` (parser instance) link to all state objects (instead of former\n  options/parser).\n- References/Footnotes/Abbrs moved to `block` chain.\n- Input normalization moved to `core` chain.\n- Splitted links and images to separate rules.\n- Renamed some rules.\n- Removed `full` preset. Not needed anymore.\n- enable/disable methods now throw by default on invalid rules (exceptions can\n  be disabled).\n- Replace NULL characters with 0xFFFD instead of strip.\n- Removed custom fences sugar (overcomplication).\n- Rewritten link components parse helpers.\n- More functions in `md.utils`.\n\n### Fixed\n- Fixed inline html comments & cdata parse.\n\n\n## [2.2.1] - 2014-12-29\n### Added\n- Added development info.\n\n### Changed\n- .use() now pass any number of params to plugins.\n\n### Fixed\n- Fixed line breaks in definitions lists.\n\n\n## [2.2.0] - 2014-12-28\n### Added\n- API docs.\n- Added 'zero' preset.\n\n### Changed\n- Updated CM spec conformance to v0.13.\n\n### Fixed\n- Fixed several crashes, when some basic rules are disabled\n  (block termination check, references check).\n\n\n## [2.1.3] - 2014-12-24\n### Added\n- Added curring to `set`/`configure`/`enable`/`disable` methods.\n\n### Changed\n- Demo rework - now can include plugins.\n- Docs update.\n\n\n## [2.1.2] - 2014-12-23\n### Changed\n- Exposed helpers into parser instances (for plugins).\n- Removed utils from global export - been in instances seems enougth.\n- Refactored demo & added markdown-it-emoji to it.\n\n\n## [2.1.1] - 2014-12-22\n### Changed\n- Refreshed browser builds, missed in prev release.\n- Minor changes.\n\n\n## [2.1.0] - 2014-12-21\n### Changed\n- Separated method to enable rules by whitelist (enableOnly).\n- Changed second param of enable/disable ruler methods.\n- Shortcuts in main class for bulk enable/disable rules.\n- ASCII-friendly browserified files.\n- Separate package for spec tests.\n\n\n## [2.0.0] - 2014-12-20\n### Changed\n- New project name & home! Now it's `markdown-it`,\n- Sugar for constructor call - `new` is not mandatory now.\n- Renamed presets folder (configs -> presets).\n\n\n[12.3.1]: https://github.com/markdown-it/markdown-it/compare/12.3.0...12.3.1\n[12.3.0]: https://github.com/markdown-it/markdown-it/compare/12.2.0...12.3.0\n[12.2.0]: https://github.com/markdown-it/markdown-it/compare/12.1.0...12.2.0\n[12.1.0]: https://github.com/markdown-it/markdown-it/compare/12.0.6...12.1.0\n[12.0.6]: https://github.com/markdown-it/markdown-it/compare/12.0.5...12.0.6\n[12.0.5]: https://github.com/markdown-it/markdown-it/compare/12.0.4...12.0.5\n[12.0.4]: https://github.com/markdown-it/markdown-it/compare/12.0.3...12.0.4\n[12.0.3]: https://github.com/markdown-it/markdown-it/compare/12.0.2...12.0.3\n[12.0.2]: https://github.com/markdown-it/markdown-it/compare/12.0.1...12.0.2\n[12.0.1]: https://github.com/markdown-it/markdown-it/compare/12.0.0...12.0.1\n[12.0.0]: https://github.com/markdown-it/markdown-it/compare/11.0.1...12.0.0\n[11.0.1]: https://github.com/markdown-it/markdown-it/compare/11.0.0...11.0.1\n[11.0.0]: https://github.com/markdown-it/markdown-it/compare/10.0.0...11.0.0\n[10.0.0]: https://github.com/markdown-it/markdown-it/compare/9.1.0...10.0.0\n[9.1.0]: https://github.com/markdown-it/markdown-it/compare/9.0.1...9.1.0\n[9.0.1]: https://github.com/markdown-it/markdown-it/compare/9.0.0...9.0.1\n[9.0.0]: https://github.com/markdown-it/markdown-it/compare/8.4.2...9.0.0\n[8.4.2]: https://github.com/markdown-it/markdown-it/compare/8.4.1...8.4.2\n[8.4.1]: https://github.com/markdown-it/markdown-it/compare/8.4.0...8.4.1\n[8.4.0]: https://github.com/markdown-it/markdown-it/compare/8.3.2...8.4.0\n[8.3.2]: https://github.com/markdown-it/markdown-it/compare/8.3.1...8.3.2\n[8.3.1]: https://github.com/markdown-it/markdown-it/compare/8.3.0...8.3.1\n[8.3.0]: https://github.com/markdown-it/markdown-it/compare/8.2.2...8.3.0\n[8.2.2]: https://github.com/markdown-it/markdown-it/compare/8.2.1...8.2.2\n[8.2.1]: https://github.com/markdown-it/markdown-it/compare/8.2.0...8.2.1\n[8.2.0]: https://github.com/markdown-it/markdown-it/compare/8.1.0...8.2.0\n[8.1.0]: https://github.com/markdown-it/markdown-it/compare/8.0.1...8.1.0\n[8.0.1]: https://github.com/markdown-it/markdown-it/compare/8.0.0...8.0.1\n[8.0.0]: https://github.com/markdown-it/markdown-it/compare/7.0.1...8.0.0\n[7.0.1]: https://github.com/markdown-it/markdown-it/compare/7.0.0...7.0.1\n[7.0.0]: https://github.com/markdown-it/markdown-it/compare/6.1.1...7.0.0\n[6.1.1]: https://github.com/markdown-it/markdown-it/compare/6.1.0...6.1.1\n[6.1.0]: https://github.com/markdown-it/markdown-it/compare/6.0.5...6.1.0\n[6.0.5]: https://github.com/markdown-it/markdown-it/compare/6.0.4...6.0.5\n[6.0.4]: https://github.com/markdown-it/markdown-it/compare/6.0.3...6.0.4\n[6.0.3]: https://github.com/markdown-it/markdown-it/compare/6.0.2...6.0.3\n[6.0.2]: https://github.com/markdown-it/markdown-it/compare/6.0.1...6.0.2\n[6.0.1]: https://github.com/markdown-it/markdown-it/compare/6.0.0...6.0.1\n[6.0.0]: https://github.com/markdown-it/markdown-it/compare/5.1.0...6.0.0\n[5.1.0]: https://github.com/markdown-it/markdown-it/compare/5.0.3...5.1.0\n[5.0.3]: https://github.com/markdown-it/markdown-it/compare/5.0.2...5.0.3\n[5.0.2]: https://github.com/markdown-it/markdown-it/compare/5.0.1...5.0.2\n[5.0.1]: https://github.com/markdown-it/markdown-it/compare/5.0.0...5.0.1\n[5.0.0]: https://github.com/markdown-it/markdown-it/compare/4.4.0...5.0.0\n[4.4.0]: https://github.com/markdown-it/markdown-it/compare/4.3.1...4.4.0\n[4.3.1]: https://github.com/markdown-it/markdown-it/compare/4.3.0...4.3.1\n[4.3.0]: https://github.com/markdown-it/markdown-it/compare/4.2.2...4.3.0\n[4.2.2]: https://github.com/markdown-it/markdown-it/compare/4.2.1...4.2.2\n[4.2.1]: https://github.com/markdown-it/markdown-it/compare/4.2.0...4.2.1\n[4.2.0]: https://github.com/markdown-it/markdown-it/compare/4.1.2...4.2.0\n[4.1.2]: https://github.com/markdown-it/markdown-it/compare/4.1.1...4.1.2\n[4.1.1]: https://github.com/markdown-it/markdown-it/compare/4.1.0...4.1.1\n[4.1.0]: https://github.com/markdown-it/markdown-it/compare/4.0.3...4.1.0\n[4.0.3]: https://github.com/markdown-it/markdown-it/compare/4.0.2...4.0.3\n[4.0.2]: https://github.com/markdown-it/markdown-it/compare/4.0.1...4.0.2\n[4.0.1]: https://github.com/markdown-it/markdown-it/compare/4.0.0...4.0.1\n[4.0.0]: https://github.com/markdown-it/markdown-it/compare/3.1.0...4.0.0\n[3.1.0]: https://github.com/markdown-it/markdown-it/compare/3.0.7...3.1.0\n[3.0.7]: https://github.com/markdown-it/markdown-it/compare/3.0.6...3.0.7\n[3.0.6]: https://github.com/markdown-it/markdown-it/compare/3.0.5...3.0.6\n[3.0.5]: https://github.com/markdown-it/markdown-it/compare/3.0.4...3.0.5\n[3.0.4]: https://github.com/markdown-it/markdown-it/compare/3.0.3...3.0.4\n[3.0.3]: https://github.com/markdown-it/markdown-it/compare/3.0.2...3.0.3\n[3.0.2]: https://github.com/markdown-it/markdown-it/compare/3.0.1...3.0.2\n[3.0.1]: https://github.com/markdown-it/markdown-it/compare/3.0.0...3.0.1\n[3.0.0]: https://github.com/markdown-it/markdown-it/compare/2.2.1...3.0.0\n[2.2.1]: https://github.com/markdown-it/markdown-it/compare/2.2.0...2.2.1\n[2.2.0]: https://github.com/markdown-it/markdown-it/compare/2.1.3...2.2.0\n[2.1.3]: https://github.com/markdown-it/markdown-it/compare/2.1.2...2.1.3\n[2.1.2]: https://github.com/markdown-it/markdown-it/compare/2.1.1...2.1.2\n[2.1.1]: https://github.com/markdown-it/markdown-it/compare/2.1.0...2.1.1\n[2.1.0]: https://github.com/markdown-it/markdown-it/compare/2.0.0...2.1.0\n[2.0.0]: https://github.com/markdown-it/markdown-it/releases/tag/2.0.0\n", "// Proceess '\\n'\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        state.pending = state.pending.replace(/ +$/, '');\n        state.push('hardbreak', 'br', 0);\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push('softbreak', 'br', 0);\n      }\n\n    } else {\n      state.push('softbreak', 'br', 0);\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && isSpace(state.src.charCodeAt(pos))) { pos++; }\n\n  state.pos = pos;\n  return true;\n};\n", "'use strict';\n\n\nconst needle = require('needle');\nconst assert = require('assert');\nconst crypto = require('crypto');\nconst Worker = require('jest-worker').default;\n\n\nasync function test_pattern(str) {\n  const worker = new Worker(require.resolve('./pathological_worker.js'), {\n    numWorkers: 1,\n    enableWorkerThreads: true\n  });\n\n  let result;\n\n  try {\n    result = await Promise.race([\n      worker.render(str),\n\n      new Promise(function (resolve, reject){\n        setTimeout(() => { reject(new Error('Terminated (timeout exceeded)')); }, 3000);\n      })\n    ]);\n  } catch (e) {\n    throw e;\n  } finally {\n    await worker.end();\n  }\n\n  return result;\n}\n\n\ndescribe('Pathological sequences speed', () => {\n\n  it('Integrity check', async () => {\n    assert.strictEqual(\n      await test_pattern('foo'),\n      '<p>foo</p>\\n'\n    );\n  });\n\n  // Ported from cmark, https://github.com/commonmark/cmark/blob/master/test/pathological_tests.py\n  describe('Cmark', () => {\n\n    it('verify original source crc', async () => {\n      /* eslint-disable  max-len */\n      const src = await needle('get', 'https://raw.githubusercontent.com/commonmark/cmark/master/test/pathological_tests.py');\n      const src_md5 = crypto.createHash('md5').update(src.body).digest('hex');\n\n      assert.strictEqual(\n        src_md5,\n        require('./pathological.json').md5,\n        'CRC or cmark pathological tests hanged. Verify and update pathological.json'\n      );\n    });\n\n    it('nested inlines', async () => {\n      await test_pattern('*'.repeat(60000) + 'a' + '*'.repeat(60000));\n    });\n\n    it('nested strong emph', async () => {\n      await test_pattern('*a **a '.repeat(5000) + 'b' + ' a** a*'.repeat(5000));\n    });\n\n    it('many emph closers with no openers', async () => {\n      await test_pattern('a_ '.repeat(30000));\n    });\n\n    it('many emph openers with no closers', async () => {\n      await test_pattern('_a '.repeat(30000));\n    });\n\n    it('many link closers with no openers', async () => {\n      await test_pattern('a]'.repeat(10000));\n    });\n\n    it('many link openers with no closers', async () => {\n      await test_pattern('[a'.repeat(10000));\n    });\n\n    it('mismatched openers and closers', async () => {\n      await test_pattern('*a_ '.repeat(50000));\n    });\n\n    it('commonmark/cmark#389', async () => {\n      await test_pattern('*a '.repeat(20000) + '_a*_ '.repeat(20000));\n    });\n\n    it('openers and closers multiple of 3', async () => {\n      await test_pattern('a**b' + ('c* '.repeat(50000)));\n    });\n\n    it('link openers and emph closers', async () => {\n      await test_pattern('[ a_'.repeat(10000));\n    });\n\n    it('pattern [ (]( repeated', async () => {\n      await test_pattern('[ (]('.repeat(40000));\n    });\n\n    it('nested brackets', async () => {\n      await test_pattern('['.repeat(20000) + 'a' + ']'.repeat(20000));\n    });\n\n    it('nested block quotes', async () => {\n      await test_pattern('> '.repeat(50000) + 'a');\n    });\n\n    it('deeply nested lists', async () => {\n      await test_pattern(Array(1000).fill(0).map(function (_, x) { return '  '.repeat(x) + '* a\\n'; }).join(''));\n    });\n\n    it('backticks', async () => {\n      await test_pattern(Array(3000).fill(0).map(function (_, x) { return 'e' + '`'.repeat(x); }).join(''));\n    });\n\n    it('unclosed links A', async () => {\n      await test_pattern('[a](<b'.repeat(30000));\n    });\n\n    it('unclosed links B', async () => {\n      await test_pattern('[a](b'.repeat(30000));\n    });\n  });\n\n  describe('Markdown-it', () => {\n    it('emphasis **_* pattern', async () => {\n      await test_pattern('**_* '.repeat(50000));\n    });\n\n    it('backtick ``\\\\``\\\\`` pattern', async () => {\n      await test_pattern('``\\\\'.repeat(50000));\n    });\n\n    it('autolinks <<<<...<<> pattern', async () => {\n      await test_pattern('<'.repeat(400000) + '>');\n    });\n  });\n});\n"], "fixing_code": ["# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [12.3.2] - 2022-01-08\n### Security\n- Fix possible ReDOS in newline rule. Thanks to @MakeNowJust.\n\n\n## [12.3.1] - 2022-01-07\n### Fixed\n- Fix corner case when tab prevents paragraph continuation in lists, #830.\n\n\n## [12.3.0] - 2021-12-09\n### Changed\n- `StateInline.delimiters[].jump` is removed.\n\n### Fixed\n- Fixed quadratic complexity in pathological `***<10k stars>***a***<10k stars>***` case.\n\n\n## [12.2.0] - 2021-08-02\n### Added\n- Ordered lists: add order value to token info.\n\n### Fixed\n- Always suffix indented code block with a newline, #799.\n\n\n## [12.1.0] - 2021-07-01\n### Changed\n- Updated CM spec compatibility to 0.30.\n\n\n## [12.0.6] - 2021-04-16\n### Fixed\n- Newline in `alt` should be rendered, #775.\n\n\n## [12.0.5] - 2021-04-15\n### Fixed\n- HTML block tags with `===` inside are no longer incorrectly interpreted as headers, #772.\n- Fix table/list parsing ambiguity, #767.\n\n\n## [12.0.4] - 2020-12-20\n### Fixed\n- Fix crash introduced in `12.0.3` when processing strikethrough (`~~`) and similar plugins, #742.\n- Avoid fenced token mutation, #745.\n\n\n## [12.0.3] - 2020-12-07\n### Fixed\n- `[](<foo<bar>)` is no longer a valid link.\n- `[](url (xxx())` is no longer a valid link.\n- `[](url\\ xxx)` is no longer a valid link.\n- Fix performance issues when parsing links (#732, #734), backticks, (#733, #736),\n  emphases (#735), and autolinks (#737).\n- Allow newline in `<? ... ?>` in an inline context.\n- Allow `<meta>` html tag to appear in an inline context.\n\n\n## [12.0.2] - 2020-10-23\n### Fixed\n- Three pipes (`|\\n|\\n|`) are no longer rendered as a table with no columns, #724.\n\n\n## [12.0.1] - 2020-10-19\n### Fixed\n- Fix tables inside lists indented with tabs, #721.\n\n\n## [12.0.0] - 2020-10-14\n### Added\n- `.gitattributes`, force unix eol under windows, for development.\n\n### Changed\n- Added 3rd argument to `highlight(code, lang, attrs)`, #626.\n- Rewrite tables according to latest GFM spec, #697.\n- Use `rollup.js` to browserify sources.\n- Drop `bower.json` (bower reached EOL).\n- Deps bump.\n- Tune `specsplit.js` options.\n- Drop `Makefile` in favour of npm scrips.\n\n### Fixed\n- Fix mappings for table rows (amended fix made in 11.0.1), #705.\n- `%25` is no longer decoded in beautified urls, #720.\n\n\n## [11.0.1] - 2020-09-14\n### Fixed\n- Fix blockquote lazy newlines, #696.\n- Fix missed mappings for table rows, #705.\n\n\n## [11.0.0] - 2020-05-20\n### Changed\n- Bumped `linkify-it` to 3.0.0, #661 + allow unlimited `.` inside links.\n- Dev deps bump.\n- Switch to `nyc` for coverage reports.\n- Partially moved tasks from Makefile to npm scripts.\n- Automate web update on npm publish.\n\n### Fixed\n- Fix em- and en-dashes not being typographed when separated by 1 char, #624.\n- Allow opening quote after another punctuation char in typographer, #641.\n- Assorted wording & typo fixes.\n\n\n## [10.0.0] - 2019-09-11\n### Security\n- Fix quadratic parse time for some combinations of pairs, #583. Algorithm is\n  now similar to one in reference implementation.\n\n### Changed\n- Minor internal structs change, to make pairs parse more effective (cost is\n  linear now). If you use external \"pairs\" extensions, you need sync those with\n  \"official ones\". Without update, old code will work, but can cause invalid\n  result in rare case. This is the only reason of major version bump. With high probability you don't need to change your code, only update version dependency.\n- Updated changelog format.\n- Deps bump.\n\n\n## [9.1.0] - 2019-08-11\n### Changed\n- Remove extra characters from line break check. Leave only 0x0A & 0x0D, as in\n  CommonMark spec, #581.\n\n\n## [9.0.1] - 2019-07-12\n### Fixed\n- Fix possible corruption of open/close tag levels, #466\n\n\n## [9.0.0] - 2019-07-09\n### Changed\n- Updated CM spec compatibility to 0.29.\n- Update Travis-CI node version to actual (8 & latest).\n- Deps bump.\n\n\n## [8.4.2] - 2018-02-15\n### Fixed\n- Fix `--no-html` CLI option, #476.\n\n\n## [8.4.1] - 2018-02-15\n### Fixed\n- Fix smartquotes around softbreaks, #430.\n\n\n## [8.4.0] - 2017-08-24\n### Changed\n- Updated CM spec compatibility to 0.28.\n\n\n## [8.3.2] - 2017-08-03\n### Fixed\n- Fix blockquote termination inside lists, #386.\n\n\n## [8.3.1] - 2017-03-06\n### Fixed\n- Fix blockquote termination by list item, #338.\n\n\n## [8.3.0] - 2017-02-16\n### Changed\n- Remove tabs at the beginning of the line in paragraphs.\n- Better error message for bad input type, #324.\n\n### Fixed\n- Fix table indentation issues, #325, #224.\n- Fix blockquote termination inside indented lists, #329.\n\n\n## [8.2.2] - 2016-12-15\n### Added\n- Add `-o` / `--output` option to CLI, #312.\n\n\n## [8.2.1] - 2016-12-02\n### Fixed\n- Add missed h2..h6 to whitelisted block tags.\n\n\n## [8.2.0] - 2016-12-01\n### Changed\n- Updated CM spec compatibility to 0.27 (no significant changes).\n\n### Fixed\n- Fix backticks handle inside tables, #303.\n- Fix edge case for fenced blocks with `~~~` in info, #301.\n- Fix fallback to reference if link is not valid, #302.\n\n\n## [8.1.0] - 2016-11-03\n### Changed\n- Make link parse helpers (`md.helpers`) pluggable, #299.\n\n\n## [8.0.1] - 2016-10-18\n### Fixed\n- Tables: allow tab characters in markup\n\n\n## [8.0.0] - 2016-09-16\n### Changed\n- Benchmarks src cleanup.\n- Remove testing in old nodes (but still use es5).\n- Updated CM spec compatibility to 0.26 (see list below):\n- Two consecutive newlines no longer terminate a list.\n- Ordered list terminating a paragraph can now only start with 1.\n- Adjust emphasis algorithm (`*foo**bar**baz*` is now parsed as `<strong>`\n  inside `<em>`).\n- Fix tab width calculation inside lists and blockquotes.\n\n\n## [7.0.1] - 2016-08-16\n### Fixed\n- Fence renderer: fix concat of class array, #276.\n- Code renderer: do not render double space before attrs, #275.\n- Replacer: disable replacements inside autolinks, #272.\n\n\n## [7.0.0] - 2016-06-22\n### Changed\n- Bump `linkify-it` dependency to 2.0.0.  `---` no longer terminates\n  autodetected links by default. `md.linkifier.set('---', true)` will return old\n  behaviour.\n- Major version bumped, because internals or `linkify-it` was changed.\n  You will not be affected anyhow, if not used direct access to\n  `require('linkify-it/re')` for customizations.\n\n\n## [6.1.1] - 2016-06-21\n### Changed\n- Render `code_inline` & `code_block` attributes if exist.\n\n\n## [6.1.0] - 2016-06-19\n### Changed\n- Updated `fence` renderer to not mutate token. Token stream should be\n  immutable after renderer call.\n\n\n## [6.0.5] - 2016-06-01\n### Fixed\n- Process `\\r` the same way as `\\n` and `\\r\\n\\`, #252.\n\n\n## [6.0.4] - 2016-05-30\n### Added\n- Added `Token.attrGet()` method for convenience, #251.\n\n\n## [6.0.3] - 2016-05-30\n### Security\n- Security fix: possible ReDOS in `linkify-it` (forced bump of `linkify-it` &\n  `uc-micro` dependencies). New installs will use fixed packages automatically,\n  but we bumped `markdown-it` version for sure & for web builds.\n\n\n## [6.0.2] - 2016-05-16\n### Fixed\n- Fix: should not escape twice content of image alt attribute, #246.\n\n\n## [6.0.1] - 2016-04-02\n### Fixed\n- Improve support of missing values in tables, #224.\n\n\n## [6.0.0] - 2016-02-11\n### Changed\n- Maintenance release. Version bump caused by notable changes in CM spec\n  (multiline setext headers, no spaces inside links, ...). API was not changed.\n- Fit CM 0.24 spec requirements.\n\n### Fixed\n- Fixed nesting limit check in inline blocks, #197.\n- Fixed posible tail loss in CLI ouput.\n\n\n## [5.1.0] - 2016-01-07\n### Added\n- Token: added `.attrSet()` & `.attrJoin()` methods.\n- Highlighter: allow wrapper override (if result starts with \"<pre\").\n\n\n## [5.0.3] - 2016-01-04\n### Fixed\n- Allow single column and mismatched columns count in tables.\n- Smartquotes: take into account adjacent tokens.\n- Fill `content` property in image token with `alt` source.\n\n\n## [5.0.2] - 2015-11-20\n### Fixed\n- Fix meta information (`token.markup` and `token.info`) for autolink tokens.\n\n\n## [5.0.1] - 2015-10-30\n### Fixed\n- Improved tables compatibility with github, #120.\n\n\n## [5.0.0] - 2015-10-05\n### Changed\n- Internal API change. Due to new CM spec requirements, we had to update\n  internals. That should not touch ordinary users, but can affect some external\n  plugins. If you are plugin developper - see migration guide:\n  https://github.com/markdown-it/markdown-it/blob/master/docs/5.0_migration.md.\n- Updated CM spec compatibility to 0.22 (see list below).\n- Keep tabs (don't replace with spaces).\n- Don't wrap iframes with paragraphs.\n- Rewritten emphasis algorithm.\n\n### Fixed\n- Fix closure compiler collisions (don't use reserved words), #159.\n\n\n## [4.4.0] - 2015-07-18\n### Changed\n- Updated HTML blocks logic to CM 0.21 spec.\n- Minor fixes.\n\n\n## [4.3.1] - 2015-07-15\n### Security\n- Fix class name injection in fence renderer.\n\n### Fixed\n- Allow numbered lists starting from zero.\n\n\n## [4.3.0] - 2015-06-29\n### Changed\n- `linkify-it` dependency update (1.2.0). Now accepts dash at the end of links.\n\n\n## [4.2.2] - 2015-06-10\n### Changed\n- CM spec 0.20.\n\n### Added\n- Added support for multichar substituition in smartquites, #115.\n\n### Fixed\n- Fixed code block render inside blockquites, #116.\n- Doc fixes.\n\n\n## [4.2.1] - 2015-05-01\n### Changed\n- Minor emphasis update to match CM spec 0.19.\n\n\n## [4.2.0] - 2015-04-21\n### Changed\n- Bumped [linkify-it](https://github.com/markdown-it/linkify-it) version to\n  1.1.0. Now links with IP hosts and without protocols are not linkified by\n  default, due possible collisions with some version numbers patterns (0.5.0.0).\n  You still can return back old behaviour by `md.linkify.set({ fuzzyIP: true })`.\n\n\n## [4.1.2] - 2015-04-19\n### Changed\n- Bumped linkifier version. More strict 2-chars tald support for links without\n  schema. Should not linkify things like `io.js` and `node.js`.\n\n\n## [4.1.1] - 2015-04-15\n### Fixed\n- Improved pipe chars support in table cells, #86 (thanks to @jbt).\n\n\n## [4.1.0] - 2015-03-31\n### Security\n- Disabled `data:` URLs by default (except some image mimes), to avoid\n  possible XSS. Version bumped, because features changed (formally). If you did\n  not used `data:` URLs, consider this version as 4.0.4 (no API changes).\n\n### Changed\n- Simplified link validator code. Now more easy to understand and to copy\n  into your projects for customization.\n\n\n## [4.0.3] - 2015-03-25\n### Changed\n- Updated linkifier.\n- Smartquotes rule cleanup (#76).\n\n### Fixed\n- Fixed replacements rule bug in PhantomJS (#77).\n\n\n## [4.0.2] - 2015-03-22\n### Fixed\n- Fixed emphasis `marker` fields in tokens (#69).\n- Fixed html block tokens with numbers in name (#74).\n\n\n## [4.0.1] - 2015-03-13\n### Added\n- Added custom container plugin demo.\n\n### Changed\n- Updated `linkify-it` version.\n\n\n## [4.0.0] - 2015-03-11\n### Changed\n- Breaking internal API changes. See [v4 migration notes](https://github.com/markdown-it/markdown-it/blob/master/docs/4.0_migration.md). In usual case you will need to update plugins.\n- Token internals changed\n- Unified the most of renderer methods.\n- Changed tokens creation - use `state.push(...)` (see sources)\n- Moved `normalizeUrl()` to root class as `.normalizeLink()` &\n  added `normalizeLinkText()` method.\n- Moved `.validateUrl()` to root class and simplified logic - no more need to\n  replace entities.\n- Joined md unescape & replace entities logic to `utils.unescapeAll()`.\n- Removed `replaceEntities()` in `utils`.\n- `md.utils.lib` now exposes useful libs for plugins.\n- Use entities data from external package.\n\n### Fixed\n- Fixed emphasis regression, caused by CM v0.18 spec (#65).\n\n\n## [3.1.0] - 2015-03-05\n### Changed\n- Spec conformance update to 0.18.\n- Significantly improved autolinking quality (use `linkify-it` package), #2.\n\n### Fixed\n- Rewritten links normalizer to solve different edge cases (use `mdurl`\n  package), #29.\n- Moved link title entities replace out of renderer.\n- Fixed escaped entities in links (`foo\\&amp;/bar`).\n- Improved smartquotes logic, #61.\n\n\n## [3.0.7] - 2015-02-22\n### Added\n- Added basic CLI support.\n\n### Changed\n- Use external package for unicode data (punctuation).\n\n### Fixed\n- Added \\v \\f to valid whitespaces.\n- Match table columns count by header.\n\n\n## [3.0.6] - 2015-02-12\n### Added\n- Sync scroll result => source in demo.\n\n### Changed\n- Moved `normalizeReference()` to utils.\n\n### Fixed\n- Fixed hang on long vertical list of links. Appeared in 3.0.5. See #54 for\n  details. Thanks to @fengmk2 for report!\n- Table lines now can have escaped pipe char `\\|` (#5).\n\n\n## [3.0.5] - 2015-02-06\n### Changed\n- Significantly improved tests coverage (with dead code removal and other\n  related things).\n\n### Fixed\n- Fixed link validator - could skip some kind of javascript links with uppercase\n  digital entities (thanks to @opennota)\n\n\n## [3.0.4] - 2015-01-13\n### Changed\n- Improved errors processing in url normalizer (for broken sequences).\n- Improved nesting limit processing in inline parser.\n- Reorganized tests & improved coverage.\n- Show inline diffs for failed tests.\n\n\n## [3.0.3] - 2015-01-11\n### Fixed\n- Fixed punctuation check in emphasis.\n\n\n## [3.0.2] - 2015-01-09\n### Fixed\n- Allow dashes in HTML tag names (needed for custom HTML tags).\n\n\n## [3.0.1] - 2015-01-07\n### Changed\n- Added # to terminator chars.\n\n### Fixed\n- Improved link encoder - fix invalid surrogates to avoid errors.\n\n\n## [3.0.0] - 2015-01-04\n### Changed\n- Big split. All \"rare\" rules moved to external plugins (deflist, abbr, footnote,\n  sub, sup, ins, mark).\n- Updated CM spec conformance to v0.15 (better unicode support).\n- Added `md` (parser instance) link to all state objects (instead of former\n  options/parser).\n- References/Footnotes/Abbrs moved to `block` chain.\n- Input normalization moved to `core` chain.\n- Splitted links and images to separate rules.\n- Renamed some rules.\n- Removed `full` preset. Not needed anymore.\n- enable/disable methods now throw by default on invalid rules (exceptions can\n  be disabled).\n- Replace NULL characters with 0xFFFD instead of strip.\n- Removed custom fences sugar (overcomplication).\n- Rewritten link components parse helpers.\n- More functions in `md.utils`.\n\n### Fixed\n- Fixed inline html comments & cdata parse.\n\n\n## [2.2.1] - 2014-12-29\n### Added\n- Added development info.\n\n### Changed\n- .use() now pass any number of params to plugins.\n\n### Fixed\n- Fixed line breaks in definitions lists.\n\n\n## [2.2.0] - 2014-12-28\n### Added\n- API docs.\n- Added 'zero' preset.\n\n### Changed\n- Updated CM spec conformance to v0.13.\n\n### Fixed\n- Fixed several crashes, when some basic rules are disabled\n  (block termination check, references check).\n\n\n## [2.1.3] - 2014-12-24\n### Added\n- Added curring to `set`/`configure`/`enable`/`disable` methods.\n\n### Changed\n- Demo rework - now can include plugins.\n- Docs update.\n\n\n## [2.1.2] - 2014-12-23\n### Changed\n- Exposed helpers into parser instances (for plugins).\n- Removed utils from global export - been in instances seems enougth.\n- Refactored demo & added markdown-it-emoji to it.\n\n\n## [2.1.1] - 2014-12-22\n### Changed\n- Refreshed browser builds, missed in prev release.\n- Minor changes.\n\n\n## [2.1.0] - 2014-12-21\n### Changed\n- Separated method to enable rules by whitelist (enableOnly).\n- Changed second param of enable/disable ruler methods.\n- Shortcuts in main class for bulk enable/disable rules.\n- ASCII-friendly browserified files.\n- Separate package for spec tests.\n\n\n## [2.0.0] - 2014-12-20\n### Changed\n- New project name & home! Now it's `markdown-it`,\n- Sugar for constructor call - `new` is not mandatory now.\n- Renamed presets folder (configs -> presets).\n\n\n[12.3.2]: https://github.com/markdown-it/markdown-it/compare/12.3.1...12.3.2\n[12.3.1]: https://github.com/markdown-it/markdown-it/compare/12.3.0...12.3.1\n[12.3.0]: https://github.com/markdown-it/markdown-it/compare/12.2.0...12.3.0\n[12.2.0]: https://github.com/markdown-it/markdown-it/compare/12.1.0...12.2.0\n[12.1.0]: https://github.com/markdown-it/markdown-it/compare/12.0.6...12.1.0\n[12.0.6]: https://github.com/markdown-it/markdown-it/compare/12.0.5...12.0.6\n[12.0.5]: https://github.com/markdown-it/markdown-it/compare/12.0.4...12.0.5\n[12.0.4]: https://github.com/markdown-it/markdown-it/compare/12.0.3...12.0.4\n[12.0.3]: https://github.com/markdown-it/markdown-it/compare/12.0.2...12.0.3\n[12.0.2]: https://github.com/markdown-it/markdown-it/compare/12.0.1...12.0.2\n[12.0.1]: https://github.com/markdown-it/markdown-it/compare/12.0.0...12.0.1\n[12.0.0]: https://github.com/markdown-it/markdown-it/compare/11.0.1...12.0.0\n[11.0.1]: https://github.com/markdown-it/markdown-it/compare/11.0.0...11.0.1\n[11.0.0]: https://github.com/markdown-it/markdown-it/compare/10.0.0...11.0.0\n[10.0.0]: https://github.com/markdown-it/markdown-it/compare/9.1.0...10.0.0\n[9.1.0]: https://github.com/markdown-it/markdown-it/compare/9.0.1...9.1.0\n[9.0.1]: https://github.com/markdown-it/markdown-it/compare/9.0.0...9.0.1\n[9.0.0]: https://github.com/markdown-it/markdown-it/compare/8.4.2...9.0.0\n[8.4.2]: https://github.com/markdown-it/markdown-it/compare/8.4.1...8.4.2\n[8.4.1]: https://github.com/markdown-it/markdown-it/compare/8.4.0...8.4.1\n[8.4.0]: https://github.com/markdown-it/markdown-it/compare/8.3.2...8.4.0\n[8.3.2]: https://github.com/markdown-it/markdown-it/compare/8.3.1...8.3.2\n[8.3.1]: https://github.com/markdown-it/markdown-it/compare/8.3.0...8.3.1\n[8.3.0]: https://github.com/markdown-it/markdown-it/compare/8.2.2...8.3.0\n[8.2.2]: https://github.com/markdown-it/markdown-it/compare/8.2.1...8.2.2\n[8.2.1]: https://github.com/markdown-it/markdown-it/compare/8.2.0...8.2.1\n[8.2.0]: https://github.com/markdown-it/markdown-it/compare/8.1.0...8.2.0\n[8.1.0]: https://github.com/markdown-it/markdown-it/compare/8.0.1...8.1.0\n[8.0.1]: https://github.com/markdown-it/markdown-it/compare/8.0.0...8.0.1\n[8.0.0]: https://github.com/markdown-it/markdown-it/compare/7.0.1...8.0.0\n[7.0.1]: https://github.com/markdown-it/markdown-it/compare/7.0.0...7.0.1\n[7.0.0]: https://github.com/markdown-it/markdown-it/compare/6.1.1...7.0.0\n[6.1.1]: https://github.com/markdown-it/markdown-it/compare/6.1.0...6.1.1\n[6.1.0]: https://github.com/markdown-it/markdown-it/compare/6.0.5...6.1.0\n[6.0.5]: https://github.com/markdown-it/markdown-it/compare/6.0.4...6.0.5\n[6.0.4]: https://github.com/markdown-it/markdown-it/compare/6.0.3...6.0.4\n[6.0.3]: https://github.com/markdown-it/markdown-it/compare/6.0.2...6.0.3\n[6.0.2]: https://github.com/markdown-it/markdown-it/compare/6.0.1...6.0.2\n[6.0.1]: https://github.com/markdown-it/markdown-it/compare/6.0.0...6.0.1\n[6.0.0]: https://github.com/markdown-it/markdown-it/compare/5.1.0...6.0.0\n[5.1.0]: https://github.com/markdown-it/markdown-it/compare/5.0.3...5.1.0\n[5.0.3]: https://github.com/markdown-it/markdown-it/compare/5.0.2...5.0.3\n[5.0.2]: https://github.com/markdown-it/markdown-it/compare/5.0.1...5.0.2\n[5.0.1]: https://github.com/markdown-it/markdown-it/compare/5.0.0...5.0.1\n[5.0.0]: https://github.com/markdown-it/markdown-it/compare/4.4.0...5.0.0\n[4.4.0]: https://github.com/markdown-it/markdown-it/compare/4.3.1...4.4.0\n[4.3.1]: https://github.com/markdown-it/markdown-it/compare/4.3.0...4.3.1\n[4.3.0]: https://github.com/markdown-it/markdown-it/compare/4.2.2...4.3.0\n[4.2.2]: https://github.com/markdown-it/markdown-it/compare/4.2.1...4.2.2\n[4.2.1]: https://github.com/markdown-it/markdown-it/compare/4.2.0...4.2.1\n[4.2.0]: https://github.com/markdown-it/markdown-it/compare/4.1.2...4.2.0\n[4.1.2]: https://github.com/markdown-it/markdown-it/compare/4.1.1...4.1.2\n[4.1.1]: https://github.com/markdown-it/markdown-it/compare/4.1.0...4.1.1\n[4.1.0]: https://github.com/markdown-it/markdown-it/compare/4.0.3...4.1.0\n[4.0.3]: https://github.com/markdown-it/markdown-it/compare/4.0.2...4.0.3\n[4.0.2]: https://github.com/markdown-it/markdown-it/compare/4.0.1...4.0.2\n[4.0.1]: https://github.com/markdown-it/markdown-it/compare/4.0.0...4.0.1\n[4.0.0]: https://github.com/markdown-it/markdown-it/compare/3.1.0...4.0.0\n[3.1.0]: https://github.com/markdown-it/markdown-it/compare/3.0.7...3.1.0\n[3.0.7]: https://github.com/markdown-it/markdown-it/compare/3.0.6...3.0.7\n[3.0.6]: https://github.com/markdown-it/markdown-it/compare/3.0.5...3.0.6\n[3.0.5]: https://github.com/markdown-it/markdown-it/compare/3.0.4...3.0.5\n[3.0.4]: https://github.com/markdown-it/markdown-it/compare/3.0.3...3.0.4\n[3.0.3]: https://github.com/markdown-it/markdown-it/compare/3.0.2...3.0.3\n[3.0.2]: https://github.com/markdown-it/markdown-it/compare/3.0.1...3.0.2\n[3.0.1]: https://github.com/markdown-it/markdown-it/compare/3.0.0...3.0.1\n[3.0.0]: https://github.com/markdown-it/markdown-it/compare/2.2.1...3.0.0\n[2.2.1]: https://github.com/markdown-it/markdown-it/compare/2.2.0...2.2.1\n[2.2.0]: https://github.com/markdown-it/markdown-it/compare/2.1.3...2.2.0\n[2.1.3]: https://github.com/markdown-it/markdown-it/compare/2.1.2...2.1.3\n[2.1.2]: https://github.com/markdown-it/markdown-it/compare/2.1.1...2.1.2\n[2.1.1]: https://github.com/markdown-it/markdown-it/compare/2.1.0...2.1.1\n[2.1.0]: https://github.com/markdown-it/markdown-it/compare/2.0.0...2.1.0\n[2.0.0]: https://github.com/markdown-it/markdown-it/releases/tag/2.0.0\n", "// Proceess '\\n'\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function newline(state, silent) {\n  var pmax, max, ws, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Find whitespaces tail of pending chars.\n        ws = pmax - 1;\n        while (ws >= 1 && state.pending.charCodeAt(ws - 1) === 0x20) ws--;\n\n        state.pending = state.pending.slice(0, ws);\n        state.push('hardbreak', 'br', 0);\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push('softbreak', 'br', 0);\n      }\n\n    } else {\n      state.push('softbreak', 'br', 0);\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && isSpace(state.src.charCodeAt(pos))) { pos++; }\n\n  state.pos = pos;\n  return true;\n};\n", "'use strict';\n\n\nconst needle = require('needle');\nconst assert = require('assert');\nconst crypto = require('crypto');\nconst Worker = require('jest-worker').default;\n\n\nasync function test_pattern(str) {\n  const worker = new Worker(require.resolve('./pathological_worker.js'), {\n    numWorkers: 1,\n    enableWorkerThreads: true\n  });\n\n  let result;\n\n  try {\n    result = await Promise.race([\n      worker.render(str),\n\n      new Promise(function (resolve, reject){\n        setTimeout(() => { reject(new Error('Terminated (timeout exceeded)')); }, 3000);\n      })\n    ]);\n  } catch (e) {\n    throw e;\n  } finally {\n    await worker.end();\n  }\n\n  return result;\n}\n\n\ndescribe('Pathological sequences speed', () => {\n\n  it('Integrity check', async () => {\n    assert.strictEqual(\n      await test_pattern('foo'),\n      '<p>foo</p>\\n'\n    );\n  });\n\n  // Ported from cmark, https://github.com/commonmark/cmark/blob/master/test/pathological_tests.py\n  describe('Cmark', () => {\n\n    it('verify original source crc', async () => {\n      /* eslint-disable  max-len */\n      const src = await needle('get', 'https://raw.githubusercontent.com/commonmark/cmark/master/test/pathological_tests.py');\n      const src_md5 = crypto.createHash('md5').update(src.body).digest('hex');\n\n      assert.strictEqual(\n        src_md5,\n        require('./pathological.json').md5,\n        'CRC or cmark pathological tests hanged. Verify and update pathological.json'\n      );\n    });\n\n    it('nested inlines', async () => {\n      await test_pattern('*'.repeat(60000) + 'a' + '*'.repeat(60000));\n    });\n\n    it('nested strong emph', async () => {\n      await test_pattern('*a **a '.repeat(5000) + 'b' + ' a** a*'.repeat(5000));\n    });\n\n    it('many emph closers with no openers', async () => {\n      await test_pattern('a_ '.repeat(30000));\n    });\n\n    it('many emph openers with no closers', async () => {\n      await test_pattern('_a '.repeat(30000));\n    });\n\n    it('many link closers with no openers', async () => {\n      await test_pattern('a]'.repeat(10000));\n    });\n\n    it('many link openers with no closers', async () => {\n      await test_pattern('[a'.repeat(10000));\n    });\n\n    it('mismatched openers and closers', async () => {\n      await test_pattern('*a_ '.repeat(50000));\n    });\n\n    it('commonmark/cmark#389', async () => {\n      await test_pattern('*a '.repeat(20000) + '_a*_ '.repeat(20000));\n    });\n\n    it('openers and closers multiple of 3', async () => {\n      await test_pattern('a**b' + ('c* '.repeat(50000)));\n    });\n\n    it('link openers and emph closers', async () => {\n      await test_pattern('[ a_'.repeat(10000));\n    });\n\n    it('pattern [ (]( repeated', async () => {\n      await test_pattern('[ (]('.repeat(40000));\n    });\n\n    it('nested brackets', async () => {\n      await test_pattern('['.repeat(20000) + 'a' + ']'.repeat(20000));\n    });\n\n    it('nested block quotes', async () => {\n      await test_pattern('> '.repeat(50000) + 'a');\n    });\n\n    it('deeply nested lists', async () => {\n      await test_pattern(Array(1000).fill(0).map(function (_, x) { return '  '.repeat(x) + '* a\\n'; }).join(''));\n    });\n\n    it('backticks', async () => {\n      await test_pattern(Array(3000).fill(0).map(function (_, x) { return 'e' + '`'.repeat(x); }).join(''));\n    });\n\n    it('unclosed links A', async () => {\n      await test_pattern('[a](<b'.repeat(30000));\n    });\n\n    it('unclosed links B', async () => {\n      await test_pattern('[a](b'.repeat(30000));\n    });\n  });\n\n  describe('Markdown-it', () => {\n    it('emphasis **_* pattern', async () => {\n      await test_pattern('**_* '.repeat(50000));\n    });\n\n    it('backtick ``\\\\``\\\\`` pattern', async () => {\n      await test_pattern('``\\\\'.repeat(50000));\n    });\n\n    it('autolinks <<<<...<<> pattern', async () => {\n      await test_pattern('<'.repeat(400000) + '>');\n    });\n\n    it('hardbreak whitespaces pattern', async () => {\n      await test_pattern('x' + ' '.repeat(150000) + 'x  \\nx');\n    });\n  });\n});\n"], "filenames": ["CHANGELOG.md", "lib/rules_inline/newline.js", "test/pathological.js"], "buggy_code_start_loc": [6, 9, 140], "buggy_code_end_loc": [590, 24, 140], "fixing_code_start_loc": [7, 9, 141], "fixing_code_end_loc": [596, 28, 145], "type": "CWE-400", "message": "markdown-it is a Markdown parser. Prior to version 1.3.2, special patterns with length greater than 50 thousand characterss could slow down the parser significantly. Users should upgrade to version 12.3.2 to receive a patch. There are no known workarounds aside from upgrading.", "other": {"cve": {"id": "CVE-2022-21670", "sourceIdentifier": "security-advisories@github.com", "published": "2022-01-10T21:15:07.967", "lastModified": "2022-01-18T20:18:01.537", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "markdown-it is a Markdown parser. Prior to version 1.3.2, special patterns with length greater than 50 thousand characterss could slow down the parser significantly. Users should upgrade to version 12.3.2 to receive a patch. There are no known workarounds aside from upgrading."}, {"lang": "es", "value": "markdown-it es un analizador de Markdown. En versiones anteriores a 1.3.2, los patrones especiales con una longitud superior a 50 mil caracteres pod\u00edan ralentizar el analizador de forma significativa. Los usuarios deben actualizar a versi\u00f3n 12.3.2 para recibir un parche. No se presentan medidas de mitigaci\u00f3n conocidas aparte de la actualizaci\u00f3n"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "LOW", "baseScore": 5.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 3.9, "impactScore": 1.4}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "LOW", "baseScore": 5.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 3.9, "impactScore": 1.4}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:N/C:N/I:N/A:P", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "PARTIAL", "baseScore": 5.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 10.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-400"}]}, {"source": "security-advisories@github.com", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-400"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:markdown-it_project:markdown-it:*:*:*:*:*:*:*:*", "versionEndIncluding": "12.3.1", "matchCriteriaId": "A45DD250-2EA4-4CD1-8D64-D2DC3B30D3B2"}]}]}], "references": [{"url": "https://github.com/markdown-it/markdown-it/commit/ffc49ab46b5b751cd2be0aabb146f2ef84986101", "source": "security-advisories@github.com", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/markdown-it/markdown-it/security/advisories/GHSA-6vfc-qv3f-vr6c", "source": "security-advisories@github.com", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/markdown-it/markdown-it/commit/ffc49ab46b5b751cd2be0aabb146f2ef84986101"}}