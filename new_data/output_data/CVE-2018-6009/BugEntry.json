{"buggy_code": ["Yii Framework 2 Change Log\n==========================\n\n2.0.14 under development\n------------------------\n- Enh #15417: Added `yii\\validators\\FileValidator::$minFiles` (vladis84)\n- Bug #8983: Only truncate the original log file for rotation (matthewyang, developeruz)\n- Bug #14157: Add support for loading default value `CURRENT_TIMESTAMP` of MySQL `datetime` field (rossoneri)\n- Bug #14276: Fixed I18N format with dotted parameters (developeruz)\n- Bug #14484: Fixed `yii\\validators\\UniqueValidator` for target classes with a default scope (laszlovl, developeruz)\n- Bug #14604: Fixed `yii\\validators\\CompareValidator` `compareAttribute` does not work if `compareAttribute` form ID has been changed (mikk150)\n- Bug #14903: Fixed route with extra dashes is executed controller while it should not (developeruz)\n- Bug #15046: Throw an `yii\\web\\HeadersAlreadySentException` if headers were sent before web response (dmirogin)\n- Bug #15142: Fixed array params replacing in `yii\\helpers\\BaseUrl::current()` (IceJOKER)\n- Bug #15169: Fixed translating a string when NULL parameter is passed (developeruz)\n- Bug #15194: Fixed `yii\\db\\QueryBuilder::insert()` to preserve passed params when building a `INSERT INTO ... SELECT` query for MSSQL, PostgreSQL and SQLite (sergeymakinen)\n- Bug #15229: Fixed `yii\\console\\widgets\\Table` default value for `getScreenWidth()`, when `Console::getScreenSize()` can't determine screen size (webleaf)\n- Bug #15234: Fixed `\\yii\\widgets\\LinkPager` removed `tag` from `disabledListItemSubTagOptions` (SDKiller)\n- Bug #15249: Controllers in subdirectories were not visible in commands list (IceJOKER)\n- Bug #15270: Resolved potential race conditions when writing generated php-files (kalessil)\n- Bug #15301: Fixed `ArrayHelper::filter()` to work properly with `0` in values (hhniao)\n- Bug #15302: Fixed `yii\\caching\\DbCache` so that `getValues` now behaves the same as `getValue` with regards to streams (edwards-sj)\n- Bug #15317: Regenerate CSRF token if an empty value is given (sammousa)\n- Bug #15320: Fixed special role checks in `yii\\filters\\AccessRule::matchRole()` (Izumi-kun)\n- Bug #15322: Fixed PHP 7.2 compatibility of `FileHelper::getExtensionsByMimeType()` (samdark)\n- Bug #15355: Fixed `yii\\db\\Query::from()` does not work with `yii\\db\\Expression` (vladis84, silverfire, samdark)\n- Bug #15356: Fixed multiple bugs in `yii\\db\\Query::getTablesUsedInFrom()` (vladis84, samdark)\n- Bug #15380: `FormatConverter::convertDateIcuToPhp()` now converts `a` ICU symbols to `A` (brandonkelly)\n- Bug #15407: Fixed rendering rows with associative arrays in `yii\\console\\widgets\\Table` (dmrogin)\n- Bug #15432: Fixed wrong value being set in `yii\\filters\\RateLimiter::checkRateLimit()` resulting in wrong `X-Rate-Limit-Reset` header value (bizley)\n- Bug #15440: Fixed `yii\\behaviors\\AttributeTypecastBehavior::$attributeTypes` auto-detection fails for rule, which specify attribute with '!' prefix (klimov-paul)\n- Bug #15462: Fixed `accessChecker` configuration error (developeruz)\n- Enh #3087: Added `yii\\helpers\\BaseHtml::error()` \"errorSource\" option to be able to customize errors display (yanggs07, developeruz, silverfire)\n- Enh #3250: Added support for events partial wildcard matching (klimov-paul)\n- Enh #5515: Added default value for `yii\\behaviors\\BlameableBehavior` for cases when the user is guest (dmirogin)\n- Enh #7988: Added `\\yii\\helpers\\Console::errorSummary()` and `\\yii\\helpers\\Json::errorSummary()` (developeruz)\n- Enh #7996: Short syntax for verb in GroupUrlRule (schojniak, developeruz)\n- Enh #8752: Allow specify `$attributeNames` as a string for `yii\\base\\Model` `validate()` method (developeruz)\n- Enh #9137: Added `Access-Control-Allow-Method` header for the OPTIONS request (developeruz)\n- Enh #9253: Allow `variations` to be a string for `yii\\filters\\PageCache` and `yii\\widgets\\FragmentCache` (schojniak, developeruz)\n- Enh #12623: Added `yii\\helpers\\StringHelper::matchWildcard()` replacing usage of `fnmatch()`, which may be unreliable (klimov-paul)\n- Enh #14043: Added `yii\\helpers\\IpHelper` (silverfire, cebe)\n- Enh #14355: Added ability to pass an empty array as a parameter in console command (developeruz)\n- Enh #14568: Refactored migration templates to use `safeUp()` and `safeDown()` methods (Kolyunya)\n- Enh #14662: Added support for custom `Content-Type` specification to `yii\\web\\JsonResponseFormatter` (Kolyunya)\n- Enh #15024: `yii\\web\\Pjax` widget does not prevent CSS files from sending anymore because they are handled by client-side plugin correctly (onmotion)\n- Enh #15135: Automatic completion for help in bash and zsh (Valkeru)\n- Enh #15219: Added `yii\\filters\\auth\\HttpHeaderAuth` (bboure)\n- Enh #15221: Added support for specifying `--camelCase` console options in `--kebab-case` (brandonkelly)\n- Enh #15221: Added support for the `--<option> <value>` console option syntax (brandonkelly)\n- Enh #15221: Improved the `help/list-action-options` console command output for command options without a description (brandonkelly)\n- Enh #15226: Auto generate placeholder from fields (vladis84)\n- Enh #15332: Always check for availability of `openssl_pseudo_random_bytes`, even if LibreSSL is available (sammousa)\n- Enh #15335: Added `FileHelper::unlink()` that works well under all OSes (samdark)\n- Enh #15340: Test CHANGELOG.md for valid format (sammousa)\n- Enh #15347: Add `Instance` support for object property in DI container (kojit2009)\n- Enh #15357: Added multi statement support for `yii\\db\\sqlite\\Command` (sergeymakinen)\n- Enh #15360: Refactored `BaseConsole::updateProgress()` (developeruz)\n- Enh #15415: Added transaction/retry support for `yii\\db\\Command` (sergeymakinen)\n- Enh #15422: Added default roles dynamic definition support via closure for `yii\\rbac\\BaseManager` (deltacube)\n- Enh: Added check to `yii\\base\\Model::formName()` to prevent source path disclosure when form is represented by an anonymous class (silverfire)\n- Chg #15420: Handle OPTIONS request in `yii\\filter\\Cors` so the preflight check isn't passed trough authentication filters (michaelarnauts, leandrogehlen)\n\n\n2.0.13.1 November 14, 2017\n--------------------------\n\n- Bug #15081: Fixed \"Undefined offset: 1\" in log Target (ischenko)\n- Bug #15086: Fixed jQuery onLoad event handling (alexantr)\n- Bug #15108: Fixed `yii\\db\\Schema::getSchemaNames()` for MSSQL and added tests for all DBMSes (sergeymakinen)\n- Bug #15117: Fixed DB schema cache did not honor table prefixes (sergeymakinen)\n\n\n2.0.13 November 03, 2017\n------------------------\n\n- Bug #6226: Fix fatal symlink error during assets publishing in multi threaded environment (dynasource)\n- Bug #6526: Fixed `yii\\db\\Command::batchInsert()` casting of double values correctly independent of the locale (cebe, leammas)\n- Bug #6588: Fixed changing array keys after validation of multiple files in `yii\\validators\\FileValidator` (developeruz)\n- Bug #7890: Allow `migrate/mark` to mark history at the point of the base migration (cebe)\n- Bug #11242: Fixed excess escaping in `yii\\db\\Command::batchInsert()` (silverfire)\n- Bug #11825: User can login by cookie only once when `autoRenewCookie` is set to false (shirase, silverfire)\n- Bug #12860: Fixed possible race conditions in `yii\\mutex\\FileMutex` (kidol)\n- Bug #13258: Fixed `yii\\mutex\\FileMutex::$autoRelease` having no effect due to missing base class initialization (kidol)\n- Bug #13436: Fixed migration for MSSQL DbSession (silverfire)\n- Bug #13564: Fixed `yii\\web\\Request::getAuthUser()`, `getAuthPassword()` to respect `HTTP_AUTHORIZATION` request header (silverfire)\n- Bug #13720: Improve `yii\\helpers\\FormatConverter::convertDatePhpToIcu()` to handle escaped chars correctly (rob006)\n- Bug #13757: Fixed ambiguous column error in `BaseActiveRecord::refresh()` when the query adds a JOIN by default (cebe, ivankff)\n- Bug #13779: Fixed `yii\\db\\ActiveRecord::joinWith()` unable to use relation defined via attached behavior (ElisDN, klimov-paul)\n- Bug #13859: Fixed ambiguous column error in `Query::column()` when `$indexBy` is used with a JOIN (cebe)\n- Bug #13969: Fixed a bug in a `yii\\console\\controllers\\CacheController` when caches defined via a closure were not detected (Kolyunya)\n- Bug #14016: Fixed empty messages marked as unused in PHP and PO sources when extracted with message command when `markUnused` is `false` (samdark)\n- Bug #14129: Fixed console help to properly work with tricky camelcased controller names (samdark, silverfire)\n- Bug #14134: Fixed multiple `validateAttribute()` calls when `scenarios()` returns duplicate attributes (krukru)\n- Bug #14165: Set `_slave` of `Connection` to `false` instead of `null` in `close` method (rossoneri)\n- Bug #14186: Forced validation in `yiiActiveForm` do not trigger `afterValidate` event (arogachev)\n- Bug #14192: Fixed wrong default null value for TIMESTAMP when using PostgreSQL (Tigrov)\n- Bug #14202: Fixed current time in (UTC) `\\Yii::$app->formatter` if time not set (bscheshirwork)\n- Bug #14206: `MySqlMutex`, `PgsqlMutex` and `OracleMutex` now use `useMaster()` to ensure lock is aquired on the same DB server (cebe, ryusoft)\n- Bug #14248: `yii\\console\\controllers\\MessageController` no longer outputs colorized filenames when console does not support text colorization (PowerGamer1)\n- Bug #14264: Fixed a bug where `yii\\log\\Logger::calculateTimings()` was not accepting messages with array tokens (bizley)\n- Bug #14269: Fixed broken error page when calling an undefined method (cebe)\n- Bug #14304: Fixed `yii\\validators\\UniqueValidator` and `yii\\validators\\ExistValidator` to skip prefixes in case expressions are used (samdark)\n- Bug #14307: Fixed PHP warning when `yii\\console\\UnknownCommandException` is thrown for empty command (rob006)\n- Bug #14318: Trigger `yiiActiveForm.events.afterValidateAttribute` after updating attribute  (dmirogin)\n- Bug #14334: Fixed `\\yii\\db\\QueryBuilder::buildNotCondition` loses params when operand is `\\yii\\db\\Expression` (Ni-san)\n- Bug #14341: Fixed regression in error handling introduced by fixing #14264 (samdark)\n- Bug #14370: Fixed creating built-in validator in model with same function name (dmirogin)\n- Bug #14406: Fixed caching rules in `yii\\web\\UrlManager` with different ruleConfig configuration (dmirogin)\n- Bug #14423: Fixed `ArrayHelper::merge` behavior with null values for integer-keyed elements (dmirogin)\n- Bug #14449: Fix PHP 7.2 compatibility bugs and add explicit closure support in `yii\\base\\Application` (dynasource)\n- Bug #14471: `ContentNegotiator` will always set one of the configured server response formats even if the client does not accept any of them (PowerGamer1)\n- Bug #14492: Fixed error handler not escaping error info in debug mode, see CVE-2017-11516 (samdark)\n- Bug #14493: Fixed getting permissions in `yii\\rbac\\Dbmanger::getPermissionsByUser` by user with id equals 0 (dmirogin)\n- Bug #14510: The state of a form is always \"not validated\" when using forced validation in `yiiActiveForm` (arogachev)\n- Bug #14523: Added `yii\\web\\MultipartFormDataParser::$force` option allowing to enforce parsing even on 'POST' request (klimov-paul)\n- Bug #14525: Fixed 2.0.12 regression of loading of global fixtures trough `yii fixture/load` (michaelarnauts)\n- Bug #14533: Fixed `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` throw exception in case they are set for `yii\\db\\ActiveRecord` with `$targetClass` pointing to NOSQL ActiveRecord (klimov-paul)\n- Bug #14542: Ensured only ASCII characters are in CSRF cookie value since binary data causes issues with ModSecurity and some browsers (samdark)\n- Bug #14543: Throw exception when trying to create migration longer than 180 symbols (dmirogin, cebe)\n- Bug #14596: Fix event call on init in `yii\\widgets\\BaseListView` (panchenkodv)\n- Bug #14697: Fixed `console\\widgets\\Table` rendering when there's no data supplied (bscheshirwork)\n- Bug #14723: Fixed serialization of `yii\\db\\Connection` instance closes database connection (klimov-paul)\n- Bug #14773: Fixed `yii\\widgets\\ActiveField::$options` does not support 'class' option in array format (klimov-paul)\n- Bug #14902: Fixed PHP notice in `yii\\web\\MultipartFormDataParser` (olimsaidov)\n- Bug #14921: Fixed bug with replacing numeric keys in `yii\\helpers\\Url::current()` (rob006)\n- Enh #4479: Implemented REST filters (klimov-paul)\n- Enh #4495:  Added closure support in `yii\\i18n\\Formatter` (developeruz)\n- Enh #5786: Allowed to use custom constructors in ActiveRecord-based classes (ElisDN, klimov-paul)\n- Enh #6644: Added `yii\\helpers\\ArrayHelper::setValue()` (LAV45)\n- Enh #7823: Added `yii\\filters\\AjaxFilter` filter (dmirogin)\n- Enh #9438: `yii\\web\\DbSession` now relies on error handler to display errors (samdark)\n- Enh #9703, #9709: Added `yii\\i18n\\Formatter::asWeight()` and `::asLength()` formatters (nineinchnick, silverfire)\n- Enh #11415: Added `yii\\console\\widgets\\Table` to draw tables in console apps (pana1990, rob006, samdark, tonykor)\n- Enh #13254: Made `yii\\helpers\\StringHelper` and `yii\\validators\\StringValidator` independent of `Yii::$app` instance (cebe)\n- Enh #13378: Added `yii\\behaviors\\SluggableBehaviour::skipOnEmpty` option (andrewnester)\n- Enh #13403: Added 'permissions' additionally to 'roles' in `yii\\filters\\AccessRule` in order to be able to specify these separately (thyseus)\n- Enh #13486: Use DI container to instantiate cookies in order to be able to set defaults (samdark)\n- Enh #13586: Added `$preserveNonEmptyValues` property to the `yii\\behaviors\\AttributeBehavior` (Kolyunya)\n- Enh #13780: Added support for trusted proxies in `yii\\web\\Request` (sammousa, cebe, silverfire)\n- Enh #13787: Added `yii\\db\\Migration::$maxSqlOutputLength` that allows limiting number of characters for outputting SQL (thiagotalma)\n- Enh #13824: Support extracting concatenated strings in `yii message` (developeruz)\n- Enh #13835: Added `yii\\web\\Request::getOrigin()` method that returns `HTTP_ORIGIN` of current CORS request (yyxx9988)\n- Enh #13853: Added `yii\\db\\Migration::$compact` as well as `yii\\console\\controllers\\BaseMigrateController::$compact` to allow making the migration console output more compact (francislavoie)\n- Enh #14022: `yii\\web\\UrlManager::setBaseUrl()` now supports aliases (dmirogin)\n- Enh #14061: Added request scope assignments cache to `yii\\rbac\\DbManager::checkAccess()` to avoid duplicate queries for user assignments (leandrogehlen, cebe, nineinchnick, ryusoft)\n- Enh #14081: Added `yii\\caching\\CacheInterface` to make custom cache extensions adoption easier (silverfire)\n- Enh #14087: Added `yii\\web\\View::registerCsrfMetaTags()` method that registers CSRF tags dynamically ensuring that caching doesn't interfere (RobinKamps)\n- Enh #14089: Added tests for `yii\\base\\Theme` (vladis84)\n- Enh #14105: Implemented a solution for retrieving DBMS constraints in `yii\\db\\Schema` (sergeymakinen)\n- Enh #14126: Added variadic parameters support to DI container (SamMousa)\n- Enh #14151: Added `yii\\behaviors\\AttributesBehavior` that assigns values specified to one or multiple attributes of an AR object when certain events happen (bscheshirwork)\n- Enh #14184: Module service locator now falls back to its parent module service locator in case component isn't found (SamMousa)\n- Enh #14188: Add constants and function for sysexits(3) to `ConsoleHelper` (tom--, samdark, cebe)\n- Enh #14273: `yii\\log\\Target::$enabled` now supports callable value (dmirogin)\n- Enh #14294: Added `InputWidget::renderInput()` to move behavior described in `InputWidget` class docs to the class itself (cebe)\n- Enh #14298: The default response formatter configs defined by `yii\\web\\Response::defaultFormatters()` now use the array syntax (brandonkelly)\n- Enh #14363: Added `yii\\widgets\\LinkPager::$linkContainerOptions` and possibility to override tag in `yii\\widgets\\LinkPager::$options` (dmirogin)\n- Enh #14389: Optimize `Validator::validateAttributes()` by calling `attributeNames()` only once (nicdnep)\n- Enh #14417: Added configuration for headers in PHP files generated by `message/extract` command (rob006)\n- Enh #14431: Moved `ActiveQuery::getTablesUsedInFrom()` to `Query` to make the functionality available on the lower layer (cebe)\n- Enh #14620: Updated `yii.activeForm.js` and `yii\\web\\View` to jQuery 3.0 compatible API (silverfire)\n- Enh #14633: Add miliseconds to log time in `\\yii\\log\\Target` (Ni-san)\n- Enh #14664: Add migrate/fresh command to truncate database and apply migrations again (thyseus)\n- Enh #14765: RBAC: add index on `user_id` column in `auth_assignment` table for performance reasons (bicf)\n- Enh #14864: Ability to use dependencies in constructor of migrations (vtvz)\n- Enh #14877: Disabled profiling on connection opening when profiling is disabled (njasm)\n- Enh #14913: Assset hashing now takes asset linking into account to improve cache busting (schmunk42)\n- Enh #14929: Ensure trailing `;` on combining files with `asset` command to fix compiler failures (tanakahisateru)\n- Enh #14958: Added options to copy stacktrace and search for error message to the exception page (cebe)\n- Enh #14967: Added Armenian Translations (gevorgmansuryan)\n- Enh #15015: Added `StringHelper::floatToString()` to safely cast float values independent of the locale, also fixes some places in the framework that use it now (cebe)\n- Chg #7936: Deprecate `yii\\base\\Object` in favor of `yii\\base\\BaseObject` for compatibility with PHP 7.2 (rob006, cebe, klimov-paul)\n- Chg #14201: `yii\\console\\controllers\\MessageController::extractMessagesFromTokens()` is now protected (faenir)\n- Chg #14286: Used primary inputmask package name instead of an alias (samdark)\n- Chg #14321: `yii\\widgets\\MaskedInput` is now registering its JavaScript `clientOptions` initialization code in head section (DaveFerger)\n- Chg #14487: Changed i18n message error to warning (dmirogin)\n\n2.0.12 June 05, 2017\n--------------------\n\n- Bug #4408: Add support for unicode word characters and `+` character in attribute names (sammousa, kmindi)\n- Bug #5442: Fixed problem on load fixture dependencies with database related tests (leandrogehlen)\n- Bug #7946: Fixed a bug when the `form` attribute was not propagated to the hidden input of the checkbox (Kolyunya)\n- Bug #8120: Fixes LIKE special characters escaping for Cubrid/MSSQL/Oracle/SQLite in `yii\\db\\QueryBuilder` (sergeymakinen)\n- Bug #9669: AssetManager and `FileHelper::copyDirectory()` were copying empty directories when using `only` or `except` options. Added an option to disable this (cebe)\n- Bug #10305: Oracle SQL queries with `IN` condition and more than 1000 parameters are working now (silverfire)\n- Bug #10346: Fixed \"DOMException: Invalid Character Error\" in `yii\\web\\XmlResponseFormatter::buildXml()` (sasha-ch)\n- Bug #10372: Fixed console controller including complex typed arguments in help (sammousa)\n- Bug #11230: Include `defaultRoles` in `yii\\rbac\\DbManager->getRolesByUser()` results (developeruz)\n- Bug #11404: `yii\\base\\Model::loadMultiple()` returns true even if `yii\\base\\Model::load()` returns false (zvook)\n- Bug #11719: Fixed `yii\\db\\Connection::$enableQueryCache` caused infinite loop when the same connection was used for `yii\\caching\\DbCache` (michaelarnauts)\n- Bug #12715: Exception `SAVEPOINT LEVEL1 does not exist` instead of deadlock exception (Vovan-VE)\n- Bug #13058: Fixed caught exception thrown during view file rendering produces wrong output (klimov-paul)\n- Bug #13086, #13656: Fixed bug with optional parameters at the beginning of pattern in `yii\\web\\UrlRule` (rob006)\n- Bug #13087: Fixed getting active validators for safe attribute (developeruz, klimov-paul)\n- Bug #13306: Wildcard in `reloadableScripts` in `yii.js` allows 0 characters (arogachev)\n- Bug #13340: Fixed `yii\\db\\Connection::useMaster()` - exception within callback completely disables slaves (Vovan-VE)\n- Bug #13343: Fixed `yii\\i18n\\Formatter::asTime()` to process time-only values without time zone conversion (bizley)\n- Bug #13350: Fixed bug with incorrect caching of `yii\\web\\UrlRule::createUrl()` results in `yii\\web\\UrlManager` (rob006)\n- Bug #13362: Fixed return value of `yii\\caching\\MemCache::setValues()`  (masterklavi)\n- Bug #13379: Fixed `applyFilter()` function in `yii.gridView.js` to work correctly when params in `filterUrl` are indexed (SilverFire, arogachev)\n- Bug #13418: Fixed `QueryBuilder::batchInsert()` if `$rows` is `\\Generator` (lav45)\n- Bug #13494: Fixed `yii\\console\\controllers\\MessageConstroller::saveMessagesToDb()` to work on different DBMS correctly (silverfire)\n- Bug #13513: Fixed RBAC migration to work correctly on Oracle DBMS (silverfire)\n- Bug #13537: Fixed `yii\\web\\CacheSession::destroySession()` to work correctly when session is not written yet (silverfire, papalapa)\n- Bug #13538: Fixed `yii\\db\\BaseActiveRecord::deleteAll()` changes method signature declared by `yii\\db\\ActiveRecordInterface::deleteAll()` (klimov-paul)\n- Bug #13551: Fixed `FixtureController` to load fixtures from subdirectories (d1rtyf1ng3rs, silverfire)\n- Bug #13571: Fix `yii\\db\\mssql\\QueryBuilder::checkIntegrity` for all tables (boboldehampsink)\n- Bug #13577: `yii\\db\\QueryBuilder::truncateTable` should work consistent over all databases (boboldehampsink)\n- Bug #13582: PK column in `yii\\db\\pgsql\\QueryBuilder::resetSequence()` was not quoted properly (boboldehampsink)\n- Bug #13592: Fixes `yii\\db\\oci\\Schema::setTransactionIsolationLevel()` in Oracle (sergeymakinen)\n- Bug #13594: Fixes insufficient quoting in `yii\\db\\QueryBuilder::prepareInsertSelectSubQuery()` (sergeymakinen)\n- Bug #13649: Fixes issue where `['uncheck' => false]` and `['label' => false]` options for `ActiveRadio` and `ActiveCheckbox` were ignored (Alex-Code)\n- Bug #13657: Fixed `yii\\helpers\\StringHelper::truncateHtml()` skip extra tags at the end (sam002)\n- Bug #13670: Fixed alias option from console when it includes `-` or `_` in option name (pana1990)\n- Bug #13671: Fixed error handler trace to work correctly with XDebug (samdark)\n- Bug #13689: Fixed handling of errors in closures (mikehaertl)\n- Bug #13694: `yii\\widgets\\Pjax` now sends `X-Pjax-Url` header with response to fix redirect (wleona3, Faryshta)\n- Bug #13704: Fixed `yii\\validators\\UniqueValidator` to prefix attribute name with model's database table name (vladis84)\n- Bug #13707: Fixed `yii\\web\\ErrorHandler` and `yii\\web\\ErrorAction` not setting correct response code to response object before rendering error view (samdark)\n- Bug #13728: Fixed the bug when `yii\\behaviors\\SluggableBehavior` wasn't preserving immutable slug values (Kolyunya)\n- Bug #13738: Fixed `getQueryParams()` method in `yii.js` to correctly parse URL with question mark and no query parameters (vladdnepr)\n- Bug #13776: Fixed setting precision and scale for decimal columns in MSSQL (arturf)\n- Bug #13790: Fixed error in `\\yii\\widgets\\MaskedInput` JavaScript by raising version required (samdark)\n- Bug #13807: Fixed `yii\\db\\QueryBuilder` to inherit subquery params when building a `INSERT INTO ... SELECT` query (sergeymakinen)\n- Bug #13842: Fixed ambiguous table SQL error while using `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` (vladis84, samdark)\n- Bug #13846: Fixed `Query::count()` issue with `orderBy` (Alex-Code)\n- Bug #13848: `yii\\di\\Instance::ensure()` wasn't throwing an exception when `$type` is specified and `$reference` object isn't instance of `$type` (c-jonua)\n- Bug #13890: `yii\\log\\DbTarget` log messages where not written when a database transaction was rolled back, added support for cloning a `yii\\db\\Connection` (shirase, cebe)\n- Bug #13901: Fixed passing unused parameter to `formatMessage()` call in `\\yii\\validators\\IpValidator` (Kolyunya)\n- Bug #13961: Fixed `unserialize()` error during RBAC rule retrieving from PostgreSQL DBMS (vsguts, nanodesu88, cebe)\n- Bug #14012: `yii\\db\\pgsql\\Schema::findViewNames()` was skipping materialized views (insolita)\n- Bug #14033: Fixed `yii\\filters\\AccessRule::matchIp()` erroring in case IP is not defined under HHVM (Kolyunya)\n- Bug #14042: Fixed ambiguous column name in SELECT in UniqueValidator (cebe)\n- Bug #14052: Fixed processing parse errors on PHP 7 since these are instances of `\\ParseError` (samdark)\n- Bug #14072: Fixed a bug where `\\yii\\db\\Command::createTable()`, `addForeignKey()`, `dropForeignKey()`, `addCommentOnColumn()`, and `dropCommentFromColumn()` weren't refreshing the table cache on `yii\\db\\Schema` (brandonkelly)\n- Bug #14074: Fixed default value of `yii\\console\\controllers\\FixtureController::$globalFixtures` to contain valid class name (lynicidn)\n- Bug #14094: Fixed bug when single `yii\\web\\UrlManager::createUrl()` call my result multiple calls of `yii\\web\\UrlRule::createUrl()` for the same rule (rossoneri)\n- Bug #14133: Fixed bug when calculating timings with mixed nested profile begin and end in `yii\\log\\Logger::calculateTimings()` (bizley)\n- Enh #4793: `yii\\filters\\AccessControl` now can be used without `user` component (bizley)\n- Enh #4999: Added support for wildcards at `yii\\filters\\AccessRule::$controllers` (klimov-paul)\n- Enh #5108: `yii\\validators\\DateValidator` now resets `$timestampAttribute` value on empty validated attribute value (klimov-paul)\n- Enh #8426: `yii\\filters\\AccessRule` now allows passing parameters to the role checking function (fsateler, cebe, Faryshta)\n- Enh #8641: Enhanced `yii\\console\\Request::resolve()` to prevent passing parameters, that begin from digits (silverfire)\n- Enh #11288: Added support for caching of `yii\\web\\UrlRule::createUrl()` results in `yii\\web\\UrlManager` for rules with defaults (rob006)\n- Enh #12528: Added option to disable query logging and profiling in DB command (cebe)\n- Enh #13144: Refactored `yii\\db\\Query::queryScalar()` (Alex-Code)\n- Enh #13179: Added `yii\\data\\Sort::parseSortParam` allowing to customize sort param in descendant class (leandrogehlen)\n- Enh #13221: Make `\\yii\\db\\QueryTrait::limit()` and `\\yii\\db\\QueryTrait::offset()` methods work with `\\yii\\db\\Expression` (Ni-san)\n- Enh #13226: `yii cache` command now warns about the fact that it's not able to flush APC cache from console (samdark)\n- Enh #13240: Client scripts registration in `yii\\widgets\\ActiverForm` was moved to the separate `registerClientScript()` method (uaoleg, silverfire)\n- Enh #13243: Added support for unicode attribute names in `yii\\widgets\\DetailView` (arogachev)\n- Enh #13254: Core validators no longer require `Yii::$app` to be set (sammousa)\n- Enh #13260: Added support for sorting by expression to `\\yii\\data\\Sort` (LAV45, klimov-paul)\n- Enh #13278: `yii\\caching\\DbQueryDependency` created allowing specification of the cache dependency via `yii\\db\\QueryInterface` (klimov-paul)\n- Enh #13352: Added option to not render empty row in `yii\\grid\\GridView` when data is empty and `emptyText` set to `false` (arogachev)\n- Enh #13356: Support multiple paths in `MigrateController::$migrationPath` to load non-namespaced migrations for BC with existing applications and extensions (schmunk42, cebe)\n- Enh #13360: Added Dockerized test setup for the framework tests (schmunk42)\n- Enh #13369: Added ability to render current `yii\\widgets\\LinkPager` page disabled (aquy)\n- Enh #13376: Data provider now automatically sets an ID so there is no need to set it manually in case multiple data providers are used with pagination (SamMousa)\n- Enh #13407: Added URL-safe base64 encode/decode methods to `StringHelper` (andrewnester)\n- Enh #13467: `yii\\data\\ActiveDataProvider` no longer queries models if models count is zero (kLkA, Kolyunya)\n- Enh #13523: Fixed pluralization and singularization for words `pasta`, `currency` (developeruz, silverfire)\n- Enh #13550: Refactored `unset()` call order in `yii\\di\\ServiceLocator::set()` (Lanrik)\n- Enh #13560: Refactored `\\yii\\widgets\\FragmentCache::getCachedContent()`, added tests (Kolyunya)\n- Enh #13576: Added support of `srcset` to `yii\\helpers\\Html::img()` (Kolyunya)\n- Enh #13577: Implemented `yii\\db\\mssql\\QueryBuilder::resetSequence()` (boboldehampsink)\n- Enh #13582: Added tests for all `yii\\db\\QueryBuilder::resetSequence()` implementations, fixed SQLite implementation (boboldehampsink)\n- Enh #13642: Allow overriding the function for creating related queries in ActiveRecord by adding `createRelationQuery()` (leandrogehlen)\n- Enh #13650: Improved `yii\\base\\Security::hkdf()` to take advantage of native `hash_hkdf()` implementation in PHP >= 7.1.2  (charlesportwoodii)\n- Enh #13695: `yii\\web\\Response::setStatusCode()` method now returns the Response object itself (kyle-mccarthy)\n- Enh #13698: `yii\\grid\\DataColumn` filter is automatically generated as dropdown list in case of `format` set to `boolean` (bizley)\n- Enh #13770: Added support for `yii\\widgets\\Menu` item classes definition in the form of an array (Kolyunya)\n- Enh #13820: Add new HTTP status code 451 (yyxx9988)\n- Enh #13823: Refactored migrations template (Kolyunya)\n- Enh #13837: Refactored masking of CSRF tokens (sammousa)\n- Enh #13845: `mt_rand()` is used instead of `rand()` in `yii\\captcha\\CaptchaAction` (kalessil)\n- Enh #13883: `yii\\data\\SqlDataProvider` now provides automatic fallback for the case when `totalCount` is not specified (SamMousa)\n- Enh #13911: Significantly enhanced MSSQL schema reading performance (paulzi, WebdevMerlion)\n- Enh #13945: Removed Courier New from error page fonts list since it looks bad on Linux (samdark)\n- Enh #13963: Added tests for `yii\\behaviors\\TimestampBehavior` (vladis84)\n- Enh #13976: Disabled IPv6 check on `\\yii\\validators\\IpValidator` as it turns out it is not needed for `inet_*` methods to work (mikk150)\n- Enh #13981: `yii\\caching\\Cache::getOrSet()` now supports both `Closure` and `callable` (silverfire)\n- Enh #13994: Refactored `yii\\filters\\RateLimiter`. Added tests (vladis84)\n- Enh #14059: Removed unused AR instantiating for calling of static methods (ElisDN)\n- Enh #14067: `yii\\web\\View::clear()` sets populated arrays to empty arrays instead of null, also changed default values to empty array (craiglondon)\n- Enh #14098: `yii\\helpers\\BaseFileHelper::normalizeOptions()` is now protected (brandonkelly)\n- Enh: Added `yii\\di\\Instance::__set_state()` method to restore object after serialization using `var_export()` function (silvefire)\n\n\n2.0.11.2 February 08, 2017\n--------------------------\n\n- Bug #13501: Fixed `yii\\rbac\\DbManager::getRule()` and `yii\\rbac\\DbManager::getRules()` to properly handle resource data came from Rule table when using PostgreSQL (StalkAlex)\n- Bug #13508: Fixed duplicate attachment of behavior BC break (cebe)\n- Bug #13522: Issue with UrlRule, which created duplicate slashes when a default value was used (cebe)\n- Bug #13533: Fixed BC break in `yii\\validators\\ExistValidator::$targetAttribute` (developeruz)\n\n\n2.0.11.1 February 02, 2017\n------------------------\n\n- Bug #11502: Fixed `yii\\console\\controllers\\MessageController` to properly populate missing languages in case of extraction with \"db\" format (bizley)\n- Bug #13489: Fixed button names in ActionColumn to contain proper `Yii::t()` tags and restored missing translations for `el`, `fa`, `ja`, `ru`, and `sk` (cebe, softark)\n\n\n2.0.11 February 01, 2017\n------------------------\n\n- Bug #4113: Error page stacktrace was generating links to private methods which are not part of the API docs (samdark)\n- Bug #7727: Fixed `yii\\helpers\\StringHelper::truncateHtml()` leaving extra tags (developeruz)\n- Bug #9305: Fixed MSSQL `Schema::TYPE_TIMESTAMP` to be 'datetime' instead of 'timestamp', which is just an incremental number (nkovacs)\n- Bug #9616: Fixed mysql\\Schema::loadColumnSchema to set enumValues attribute correctly if enum definition contains commas (fphammerle)\n- Bug #9796: Initialization of not existing `yii\\grid\\ActionColumn` default buttons (arogachev)\n- Bug #10488: Fixed incorrect behavior of `yii\\validation\\NumberValidator` when used with locales where decimal separator is comma (quantum13, samdark, rob006)\n- Bug #11122: Fixed can not use `orderBy` with aggregate functions like `count` (Ni-san)\n- Bug #11771: Fixed semantics of `yii\\di\\ServiceLocator::__isset()` to match the behavior of `__get()` which fixes inconsistent behavior on newer PHP versions (cebe)\n- Bug #12133: Fixed `getDbTargets()` function in `yii\\log\\migrations\\m141106_185632_log_init` that would create a log table correctly (bumstik)\n- Bug #12213: Fixed `yii\\db\\ActiveRecord::unlinkAll()` to respect `onCondition()` of the relational query (silverfire)\n- Bug #12345: Fixed `Formatter::asCurrency()` for proper decimal formatting (Oxyaction)\n- Bug #12599: Fixed MSSQL fail to work with `nvarbinary`. Enhanced SQL scripts compatibility with older versions (samdark)\n- Bug #12681: Changed `data` column type from `text` to `blob` to handle null-byte (`\\0`) in serialized RBAC rule properly (silverfire)\n- Bug #12703: Fixed `StringHelper::truncateHtml()` non functional when dom PHP extension is disabled (samdark)\n- Bug #12713: Fixed `yii\\caching\\FileDependency` to clear stat cache before reading filemtime (SG5)\n- Bug #12714: Fixed `yii\\validation\\EmailValidator` to prevent false-positives checks when property `checkDns` is set to `true` (silverfire)\n- Bug #12735: Fixed `yii\\console\\controllers\\MigrateController` creating multiple primary keys for field `bigPrimaryKey:unsigned` (SG5)\n- Bug #12791: Fixed `yii\\behaviors\\AttributeTypecastBehavior` unable to automatically detect `attributeTypes`, triggering PHP Fatal Error (klimov-paul)\n- Bug #12795: Fixed inconsistency, `Yii::$app->controller` is available after handling the request since 2.0.10, this is now also the case for `Yii::$app->controller->action` (cebe)\n- Bug #12803, #12921: Fixed BC break in `yii.activeForm.js` introduced in #11999. Reverted commit 3ba72da (silverfire)\n- Bug #12810: Fixed `yii\\rbac\\DbManager::getChildRoles()` and `yii\\rbac\\PhpManager::getChildRoles()` throws an exception when role has no child roles (mysterydragon)\n- Bug #12822: Fixed `yii\\i18n\\Formatter::asTimestamp()` to process timestamp with miliseconds correctly (h311ion)\n- Bug #12824: Enabled usage of `yii\\mutex\\FileMutex` on Windows systems (davidsonalencar)\n- Bug #12828: Fixed handling of nested arrays, objects in `\\yii\\grid\\GridView::guessColumns` (githubjeka)\n- Bug #12836: Fixed `yii\\widgets\\GridView::filterUrl` to not ignore `#` part of filter URL (cebe, arogachev)\n- Bug #12856: Fixed `yii\\web\\XmlResponseFormatter` to use `true` and `false` to represent booleans (samdark)\n- Bug #12879: Console progress bar was not working properly in Windows terminals (samdark, kids-return)\n- Bug #12880: Fixed `yii\\behaviors\\AttributeTypecastBehavior` marks attributes with `null` value as 'dirty' (klimov-paul)\n- Bug #12904: Fixed lowercase table name in migrations (zlakomanoff)\n- Bug #12939: Hard coded table names for MSSQL in RBAC migration (arogachev)\n- Bug #12969: Improved unique ID generation for `yii\\widgets\\Pjax` widgets (dynasource, samdark, rob006)\n- Bug #12974: Fixed incorrect order of migrations history in case `yii\\console\\controllers\\MigrateController::$migrationNamespaces` is in use (evgen-d, klimov-paul)\n- Bug #13071: Help option for commands was not working in modules (arogachev, haimanman)\n- Bug #13089: Fixed `yii\\console\\controllers\\AssetController::adjustCssUrl()` breaks URL reference specification (`url(#id)`) (vitalyzhakov)\n- Bug #13105: Fixed `validate()` method in `yii.activeForm.js` to prevent unexpected form submit when `forceValidate` set to `true` (silverfire)\n- Bug #13108: Fix execute command with negative integer parameter (pana1990, uaoleg)\n- Bug #13118: Fixed `handleAction()` function in `yii.js` to handle attribute `data-pjax=0` as disabled PJAX (silverfire, arisk)\n- Bug #13128: Fixed incorrect position of {pos} string in ColumnSchemaBuilder `__toString` (df2)\n- Bug #13159: Fixed `destroy` method in `yii.captcha.js` which did not work as expected (arogachev)\n- Bug #13198: Fixed order of checks in `yii\\validators\\IpValidator` that sometimes caused wrong error message (silverfire)\n- Bug #13200: Creating URLs for routes specified in `yii\\rest\\UrlRule::$extraPatterns` did not work if no HTTP verb was specified (cebe)\n- Bug #13212: Fixed `DbSession::regenerateID()` failure when `session_regenerate_id()` fails (andrewnester)\n- Bug #13229: Fix fetching schema information for `pgsql` when `PDO::ATTR_CASE` is set (klimov-paul)\n- Bug #13231: Fixed `destroy` method in `yii.gridView.js` which did not work as expected (arogachev)\n- Bug #13232: Event handlers were not detached with changed selector in `yii.gridView.js` (arogachev)\n- Bug #13277: Fixed invalid parsing of `--` (\"End of Options\" special argument) in CLI (rugabarbo)\n- Bug #13287: Fixed translating \"and\" separator in `UniqueValidator` error message (jetexe)\n- Bug #13300: Allow pjax with \"data-pjax\" with no value in `yii.js` (arogachev)\n- Bug #13307: Preventing of race conditions in script filter in `yii.js` works incorrectly (arogachev)\n- Bug #13309: Fixes incorrect console width/height detecting with using Stty on Mac (nowm)\n- Bug #13310: Handle relative and absolute URLs coincidence in CSS filter in `yii.js` (arogachev)\n- Bug #13312: `skipOuterContainers` option was incorrectly passed to pjax in `handleAction` in `yii.js` (arogachev)\n- Bug #13326: Fixed wrong background color generation in `BaseConsole::renderColoredString()` (nowm, silverfire)\n- Bug #13401: Fixed lack of escaping of request dump at exception screens (samdark)\n- Bug #13416: Fixed `yii\\web\\MultipartFormDataParser` adds an extra newline to every value (klimov-paul)\n- Enh #475: Added Bash and Zsh completion support for the `./yii` command (cebe, silverfire)\n- Enh #6242: Access to validator in inline validation (arogachev)\n- Enh #6373: Introduce `yii\\db\\Query::emulateExecution()` to force returning an empty result for a query (klimov-paul)\n- Enh #6809: Added `yii\\caching\\Cache::$defaultDuration` property, allowing to set custom default cache duration (sdkiller)\n- Enh #7333: Improved error message for `yii\\di\\Instance::ensure()` when a component does not exist (cebe)\n- Enh #7420: Attributes for prompt generated with `renderSelectOptions` of `\\yii\\helpers\\Html` helper (arogachev)\n- Enh #7435: Added `EVENT_BEFORE_RUN`, `EVENT_AFTER_RUN` and corresponding methods to `yii\\base\\Widget` (petrabarus)\n- Enh #7820: Add `or` relation for `targetAttribute` in `yii\\validators\\UniqueValidator` (developeruz)\n- Enh #8293: `yii\\db\\Query` can be passed to `insert` method in `yii\\db\\QueryBuilder` (voroks)\n- Enh #9053: Added`yii\\grid\\RadioButtonColumn` (darwinisgod)\n- Enh #9162: Added support of closures in `value` for attributes in `yii\\widgets\\DetailView` (arogachev)\n- Enh #10970: Allow omit specifying empty default params on URL creation (rob006)\n- Enh #11037: `yii.js` and `yii.validation.js` use `Regexp.test()` instead of `String.match()` (arogachev, nkovacs)\n- Enh #11163: Added separate method for client-side validation options `yii\\validators\\Validator::getClientOptions()` (arogachev)\n- Enh #11464: Populate foreign key names from schema (joaoppereira)\n- Enh #11697: Added `filterHaving()`, `andFilterHaving()` and `orFilterHaving()` to `yii\\db\\Query` (nicdnepr, samdark)\n- Enh #11756: Added type mapping for `varbinary` data type in MySQL DBMS (silverfire)\n- Enh #11758: Implemented Dependency Injection Container configuration using Application configuration array (silverfire)\n- Enh #11929: Changed `type` column type from `int` to `smallInt` in RBAC migrations (silverfire)\n- Enh #11959: Added `yii\\caching\\Cache::getOrSet()` method (silverfire)\n- Enh #12000: Added EVENT_INIT to widget (user57376)\n- Enh #12015: Changed visibility `yii\\db\\ActiveQueryTrait::createModels()` from private to protected (ArekX, dynasource)\n- Enh #12145: Added `beforeCacheResponse` and `afterRestoreResponse` to `yii\\filters\\PageCache` to be more easily extendable (sergeymakinen)\n- Enh #12390: Avoid creating queries with false where condition (`0=1`) when fetching relational data (klimov-paul)\n- Enh #12399: Added `ActiveField::addAriaAttributes` property for `aria-required` and `aria-invalid` attributes rendering (Oxyaction, samdark)\n- Enh #12419: Added ability to remove root tag and object tags for `yii\\web\\XmlResponseFormatter` (mhthnz, samdark)\n- Enh #12612: Query conditions added with `yii\\db\\Query::andWhere()` now get appended to the existing conditions if they were already being joined with the `and` operator (brandonkelly)\n- Enh #12619: Added catch `Throwable` in `yii\\base\\ErrorHandler::handleException()`, transactions and simlar places where consistency must be kept after exception (rob006, cebe)\n- Enh #12659: Suggest alternatives when console command was not found (mdmunir, cebe)\n- Enh #12691: Added support for protocol-relative URLs in `yii\\web\\UrlRule::$pattern` (erickskrauch)\n- Enh #12710: Added `beforeItem` and `afterItem` to `yii\\widgets\\ListView` (mdmunir, silverfire)\n- Enh #12725: Enhanced `yii\\widgets\\Menu` to allow item option `active` be a Closure (voskobovich, silverfire)\n- Enh #12726: `yii\\base\\Application::$version` converted to `yii\\base\\Module::$version` virtual property, allowing to specify version as a PHP callback (klimov-paul)\n- Enh #12732: Added `is_dir()` validation to `yii\\helpers\\BaseFileHelper::findFiles()` method (zalatov, silverfire)\n- Enh #12738: Added support for creating protocol-relative URLs in `UrlManager::createAbsoluteUrl()` and `Url` helper methods (rob006)\n- Enh #12748: Migration generator now tries to fetch reference column name for foreignKey from schema if it's not set explicitly (MKiselev)\n- Enh #12750: `yii\\widgets\\ListView::itemOptions` can be a closure now (webdevsega, silverfire)\n- Enh #12758: Added the ability to use instances of `\\yii\\db\\Query` class as values in the `\\yii\\db\\QueryBuilder::insert()` method (PowerGamer1)\n- Enh #12771: Skip \\yii\\rbac\\PhpManager::checkAccessRecursive and \\yii\\rbac\\DbManager::checkAccessRecursive if role assignments are empty (Ni-san)\n- Enh #12790: Added `scrollToErrorOffset` option for `yii\\widgets\\ActiveForm` which adds ability to specify offset in pixels when scrolling to error (mg-code)\n- Enh #12798: Changed `yii\\cache\\Dependency::getHasChanged()` (deprecated, to be removed in 2.1) to `yii\\cache\\Dependency::isChanged()` (dynasource)\n- Enh #12807: Added console controller checks for `yii\\console\\controllers\\HelpController` (schmunk42)\n- Enh #12816: Added `columnSchemaClass` option for `yii\\db\\Schema` which adds ability to specify custom `yii\\db\\ColumnSchema` class (nanodesu88)\n- Enh #12854: Added `RangeNotSatisfiableHttpException` to cover HTTP error 416 file request exceptions (zalatov)\n- Enh #12881: Added `removeValue` method to `yii\\helpers\\BaseArrayHelper` (nilsburg)\n- Enh #12901: Added `getDefaultHelpHeader` method to the `yii\\console\\controllers\\HelpController` class to be able to override default help header in a class heir (diezztsk)\n- Enh #12988: Changed `textarea` method within the `yii\\helpers\\BaseHtml` class to allow users to control whether HTML entities found within `$value` will be double-encoded or not (cyphix333)\n- Enh #13020: Added `disabledListItemSubTagOptions` attribute for `yii\\widgets\\LinkPager` in order to customize the disabled list item sub tag element (nadar)\n- Enh #13035: Use ArrayHelper::getValue() in SluggableBehavior::getValue() (thyseus)\n- Enh #13036: Added shortcut methods `asJson()` and `asXml()` for returning JSON and XML data in web controller actions (cebe)\n- Enh #13050: Added `yii\\filters\\HostControl` allowing protection against 'host header' attacks (klimov-paul, rob006)\n- Enh #13074: Improved `yii\\log\\SyslogTarget` with `$options` to be able to change the default `openlog` options (timbeks)\n- Enh #13122: Optimized query for information about foreign keys in `yii\\db\\oci` (zlakomanoff)\n- Enh #13134: Added logging URL rules (bashkarev)\n- Enh #13202: Refactor validateAttribute method in UniqueValidator (developeruz)\n- Enh #13219: Enhancements for `yii\\db\\Connection` (Vovan-VE)\n  - Added `shuffleMasters` option which adds ability to disable shuffling of masters connections.\n  - Added `getMaster()` getter and `master` property for getting currently active master connection.\n  - Extracted `openFromPoolSequentially()` protected method from `openFromPool()` protected method.\n- Enh #13264: Added `yii\\widgets\\InputWidget::$field` field, allowing access to the related `yii\\widget\\ActiveField` instance (klimov-paul)\n- Enh #13266: Added `yii\\validators\\EachValidator::$stopOnFirstError` allowing addition of more than one error (klimov-paul)\n- Enh #13268: Added logging of memory usage (bashkarev)\n- Enh #13417: Allow customizing `yii\\data\\ActiveDataProvider` in `yii\\rest\\IndexAction` (leandrogehlen)\n- Enh #13453: Select only primary key when counting records in UniqueValidator (developeruz)\n- Enh: Added constants for specifying `yii\\validators\\CompareValidator::$type` (cebe)\n- Enh: Refactored `yii\\web\\ErrorAction` to make it reusable (silverfire)\n- Enh: Added support for field `yii\\console\\controllers\\BaseMigrateController::$migrationNamespaces` setup from CLI (schmunk42)\n- Chg #11906: Updated `yii\\widgets\\MaskedInput` inputmask dependency to `~3.3.3` (samdark)\n\n2.0.10 October 20, 2016\n-----------------------\n\n- Bug #7670: Added `yii\\web\\UrlNormalizer` for normalizing requests with and without trailing slashes (rob006, cronfy, klimov-paul)\n- Bug #7670: Added `UrlNormalizer` for normalizing requests with and without trailing slashes (rob006, cronfy, klimov-paul)\n- Bug #9027: Fixed descendant class of `yii\\web\\UploadedFile` returns parent instances in case invoked after it (andrewnester)\n- Bug #9277: Fixed `yii\\console\\controllers\\AssetController` looses custom options of 'target' bundles (petrabarus, klimov-paul)\n- Bug #9561: Fixed `canGetProperty()` and `canSetProperty()` returns `false` for `yii\\db\\BaseActiveRecord` attributes (klimov-paul, Ni-san)\n- Bug #10358: Fixed race condition in `yii.js` AJAX prefilter (silverfire)\n- Bug #10563: Fixed forming `Content-Disposition` header for file downloads (samdark)\n- Bug #10567: Fixed `yii\\console\\controllers\\AssetController` looses bundle override configuration, which makes it external one (klimov-paul)\n- Bug #10587: Latest used controller instance was not available in `Response::EVENT_AFTER_SEND` handler (samdark, andrewnester)\n- Bug #10681: Reverted fix of beforeValidate event calling in `yii.activeForm.js` (silverfire)\n- Bug #11347: Fixed `yii\\widgets\\Pjax::registerClientScript()` to pass custom `container` to the PJAX JS plugin (silverfire)\n- Bug #11352: Fixed `updateInputs()` method in `yii.activeForm.js` to prevent reading property of undefined (silverfire)\n- Bug #11461: Fixed migration tool error when create migrate with comma in `defaultValue` (pana1990, s-o-f)\n- Bug #11541: Fixed default MySQL integer display width for unsigned primary key (h311ion, rob006, cebe)\n- Bug #11715: Fixed JS validation when the same model's attribute file input is listed more than once on the same page (uaoleg)\n- Bug #11726: `yii\\web\\DbSession` was echoing database errors in production mode (samdark, pastuhov, deadkrolik)\n- Bug #11907: Fixed `yii\\helpers\\Console::getScreenSize()` on Windows was giving out width and height swapped (Spell6inder, samdark, cebe)\n- Bug #11912: Fixed PostgreSQL Schema to support negative default values for integer/float/decimal columns (nsknewbie)\n- Bug #11921: Fixed URL decoding in `yii.getQueryParams()` to handle `+` (plus) character properly (silverfire)\n- Bug #11922: Fixed `yii\\log\\FileTarget` does not apply `fileMode` for rotated via copy files (klimov-paul)\n- Bug #11947: Fixed `gridData` initialization in `yii.gridView.js` (pavlm)\n- Bug #11949: Fixed `yii\\widgets\\ActiveField::end()` generates close tag when it's `option['tag']` is `null` (egorio)\n- Bug #11977: Fixed `yii\\rest\\Serializer::serialize()` serializes DataProvider incorrectly, if models keys do not compose integer sequence (dcb9, klimov-paul)\n- Bug #11990: Fixed `yii\\db\\BaseActiveRecord::refresh()` may set incorrect `oldAttributes` values at some cases (only-victor)\n- Bug #12009: Do not render `for` field label attribute for active form `RadioList` and `CheckboxList` (shevchik87, samdark)\n- Bug #12030: Fixed `yii\\base\\Model::offsetExists()` throws an exception on un-existing field (klimov-paul)\n- Bug #12037: Fixed 2.0.7 regression in memcahe/memcached cache backend (samdark)\n- Bug #12043: Fixed `yii\\helpers\\Json::encode()` encodes empty array returned by `JsonSerializable::jsonSerialize()` as object (klimov-paul)\n- Bug #12053: `./yii migrate/create` was generating wrong code when using `bigPrimaryKey` (VojtechH, samdark)\n- Bug #12068: Added missing `LEVEL_PROFILE` for the syslog target (Mak-Di)\n- Bug #12100: Fixed `yii\\filters\\HttpCache` was sending an empty Pragma header (sergeymakinen)\n- Bug #12107: Fixed REST Serializer to validate input for 'expand' and 'fields' parameter, which crashed on array input (njspok, cebe)\n- Bug #12143: Fixed `yii\\db\\BaseActiveRecord::updateAttributes()` change `isNewRecord` state for the new model (klimov-paul)\n- Bug #12152: Fixed BC break for `yii\\validators\\UniqueValidator` custom message when validating multiple attributes (rob006)\n- Bug #12293: Fixed MSSQL `yii\\db\\mssql\\Schema::resolveTableNames()` when using linked database tables (hAppywAy)\n- Bug #12331: Fixed bug with incorrect currency formatter output, when `$thousandSeparator` was explicitly set (cebe)\n- Bug #12423: Fixed migration tool problem of creating fields with brackets in comment (pana1990)\n- Bug #12428: Fixed `yii\\db\\mysql\\QueryBuilder` causes warning when insert default rows into a table without primary key (DrmagicE)\n- Bug #12431: Fix bug when lock file was not removed after `yii\\mutex\\FileMutex::release()` (rob006)\n- Bug #12446: Disable slaves when execute migrations to resolve master-slave replication no-sync (lichunqiang)\n- Bug #12463: Fixed `yii\\web\\Request::getBodyParams()` does not pass full 'content-type' value to `yii\\web\\RequestParserInterface::parse()` (klimov-paul)\n- Bug #12537: Fixes issues with spaces in `StringHelper:truncateHtml` (Alex-Code)\n- Bug #12554: Fixed `yii\\validators\\UniqueValidator` error of getting first model indexed by field (DrDeath72)\n- Bug #12599: Fixed casting of `binary()` type for MSSQL (silverfire)\n- Bug #12605: Make 'safe' validator work on write-only properties (arthibald, CeBe)\n- Bug #12629: Fixed `yii\\widgets\\ActiveField::widget()` to call `adjustLabelFor()` for `InputWidget` descendants (coderlex)\n- Bug #12649: Fixed consistency of `indexBy` handling for `yii\\db\\Query::column()` (silverfire)\n- Enh #384: Added ability to run migration from several locations via `yii\\console\\controllers\\BaseMigrateController::$migrationNamespaces` (klimov-paul)\n- Enh #6996: Added `yii\\web\\MultipartFormDataParser`, which allows proper processing of 'multipart/form-data' encoded non POST requests (klimov-paul)\n- Enh #8719: Add support for HTML5 attributes on submitbutton (formaction/formmethod...) for ActiveForm (VirtualRJ)\n- Enh #9469: Added support for namespaced migrations via `yii\\console\\controllers\\BaseMigrateController::migrationNamespaces` (klimov-paul)\n- Enh #9708: Added `yii\\console\\controllers\\AssetController::deleteSource` option allowing deletion of the source asset files after compression (pana1990, klimov-paul)\n- Enh #9989: ActiveForm now respects formtarget, formmethod and formenctype attributes of submit button (AnatolyRugalev)\n- Enh #10243: Added `yii\\data\\Sort::setAttributeOrders()` method allowing manual setup of current sort (klimov-paul)\n- Enh #10583: Do not silence session errors in debug mode (samdark)\n- Enh #11096: Added support for PSR-2 style migration naming for namespaced migrations (klimov-paul)\n- Enh #11245: Added `yii\\rbac\\ManagerInterface::getChildRoles()` method, allowing finding child roles for the given one (githubjeka)\n- Enh #11275: Added possibility of unset or force replace former value in `yii\\helpers\\ArrayHelper::merge()` (mdmunir, rob006)\n- Enh #11309: Added `yii\\web\\Request::getHostName()` method that returns hostname of current request (rob006)\n- Enh #11494: `yii.reloadableScripts` now support wildcards with `*` character (silverfire)\n- Enh #11658: Added argument to `yii\\grid\\ActionColumn::urlCreator` callback, which holds reference to the column instance (klimov-paul)\n- Enh #11804: Added `yii\\behaviors\\AttributeTypecastBehavior` for maintaining of strict ActiveRecord attribute types (klimov-paul)\n- Enh #11835: Fixed `\\yii\\db\\mssql\\QueryBuilder::$typeMap[TYPE_TEXT]` - `NTEXT` data type was deprecated in MSSQL (githubjeka)\n- Enh #11844: Added the ability to customize HTML attributes of label and value tags in `\\yii\\widgets\\DetailView` (githubjeka)\n- Enh #11950: Improve `yii\\helpers\\BaseArrayHelper::keyExists()` speed (egorio)\n- Enh #11979: Added `yii\\mutex\\OracleMutex` which implements mutex \"lock\" mechanism via Oracle locks (zlakomanoff)\n- Enh #12028: Add -h|--help option to console command to display help information (pana1990)\n- Enh #12038: Introduced `yii\\base\\ViewNotFoundException` which is thrown when views file doesn't exists, used it in `ViewAction` (samdark)\n- Enh #12048: Improved message extraction command performance (samdark)\n- Enh #12073: Added the ability to suppress the generation of input hint when it is specified through `yii\\base\\Model::attributeHints()` (PowerGamer1)\n- Enh #12082: Used `jQuery.on(` instead of event method to ensure forwards compatibility (newerton)\n- Enh #12099: `yii\\filters\\HttpCache` no longer returns 304 HTTP code when callbacks return null (sergeymakinen)\n- Enh #12193: Added the ability to suppress the generation of duplicate error messages in `yii\\helpers\\Html::errorSummary()`. Added the ability to display error messages beyond the first error for each model attribute (PowerGamer1)\n- Enh #12198: Added `time` and `datetime` validator short names (nkovacs)\n- Enh #12230: Allows BaseHtml::activeListInput to override the field value (RangelReale)\n- Enh #12296: Added value validation to `yii\\log\\Target::setLevels()` (Mak-Di)\n- Enh #12376: Added parameter to `yii.activeForm.js` `validate()` method to be able to force validation (DrDeath72)\n- Enh #12382: Changed `yii\\widgets\\MaskedInput` to use `jQuery` instead of `$` to prevent conflicts (samdark)\n- Enh #12440: Added `yii\\base\\Event::offAll()` method allowing clear all registered class-level event handlers (klimov-paul)\n- Enh #12499: When AJAX validation in enabled, `yii.activeForm.js` will run it forcefully on form submit to display all possible errors (silverfire)\n- Enh #12580: Make `yii.js` comply with strict and non-strict javascript mode to allow concatenation with external code (mikehaertl)\n- Enh #12664: Added support for wildcards for `optional` at `yii\\filters\\auth\\AuthMethod` (mg-code)\n- Enh #12744: Added `afterInit` event to `yii.activeForm.js` (werew01f)\n- Enh: Method `yii\\console\\controllers\\AssetController::getAssetManager()` automatically enables `yii\\web\\AssetManager::forceCopy` in case it is not explicitly specified (pana1990, klimov-paul)\n\n\n2.0.9 July 11, 2016\n-------------------\n\n- Bug #6347: `inverseOf()` not working for dynamic relational queries (laszlovl)\n- Bug #8644: Fixed trying to ENABLE/DISABLE TRIGGER ALL on a view in PostgreSQL (ricpelo)\n- Bug #9950: Updated `yii\\grid\\DataColumn::getHeaderCellLabel()` to extract attribute label from the `filterModel` of Grid (silverfire)\n- Bug #10613: Fixed PostgreSQL Schema to return correct column names for unique indexes that have mixed case column names (cebe)\n- Bug #10681: Fixed active form `beforeValidate` wasn't triggered in some cases (lynicidn)\n- Bug #11252: Use strict comparison on `ActiveRecord::hasAttribute()` to avoid cases where it returns true when a number is passed to it (Faryshta)\n- Bug #11322: Fixed incorrect error message in `yii\\validators\\UniqueValidator` for composite `targetAttribute` (PowerGamer1, silverfire, cebe)\n- Bug #11429: Fixed `yii\\i18n\\PhpMessageSource::loadFallbackMessages()` not to log error when source and language is same, but locales are different (silverfire)\n- Bug #11459: Fixed flash messages not destroyed when `session.auto_start = 1` set in php.ini (cartmanchen)\n- Bug #11498: Fixed inability to save serialized object into PostgreSQL binary column (klimov-paul)\n- Bug #11507: Fixed `yii\\validators\\EachValidator::validateAttribute()` does not respect `skipOnEmpty` rule parameter (webdevsega)\n- Bug #11523: Fixed `yii\\web\\User::checkRedirectAcceptable()` to treat acceptable content type `*/*` as `*` (silverfire)\n- Bug #11527: Fixed `bigPrimaryKey()` for SQLite (dynasource)\n- Bug #11528: Fixed `yii\\i18n\\MessageFormatter` construction exception caught for PHP 7 compatibility (subdee, cebe)\n- Bug #11532: Fixed casting of empty char value to `null` resulting in integrity constraint violation for not null columns (samdark)\n- Bug #11536: Fixed regression introduced in 2.0.8, where scalar value was not allowed in `QueryBuilder` `IN` condition anymore (cebe)\n- Bug #11549: Fixed `yii\\helpers\\ArrayHelper::getValue()` to work properly with float keys (zsounder, AnikanovD)\n- Bug #11561: Fixed DI container throwing exceptions for optional dependencies (SamMousa)\n- Bug #11571: Fixed `yii\\db\\ColumnSchemaBuilder` to work with custom column types (andrey-mokhov, silverfire)\n- Bug #11662: Fixed `schema-oci.sql` for RBAC (jonny7)\n- Bug #11672: Fixed `yii\\validators\\NumberValidator` erroring when value is an object without `__toString()` method (SamMousa)\n- Bug #11686: `yii\\helpers\\ArrayHelper::isIn()` comparison did not work in strict mode (taobig)\n- Bug #11693: Handle `yii\\db\\QueryBuilder::batchInsert()` calls with no data to insert (rob006)\n- Bug #11723: Fixed PHP 7 + XDebug error handling displaying \"Expected array for frame 0\" (tanakahisateru)\n- Bug #11735: Fixed `yii\\web\\UploadedFile` to return `null` when there's no file uploaded (brummm)\n- Bug #11739: Fixed `yii\\helpers\\ArrayHelper::index()` losing precision for float keys (AnikanovD)\n- Bug #11774: Fixed incorrect recusuive symlinks check in `yii\\helpers\\FileHelper` (AnikanovD)\n- Bug #11822: Fixed exception on non-string value provided as CSRF token (cebe)\n- Bug #11847: Fixed `yii\\widgets\\Pjax` to properly respond with partials when custom selector is used for container (pigochu, samdark)\n- Bug #11863: Fixed usage of `mb_substr()` with PHP < 5.4.8 where length of NULL was treated the same as 0 (samdark)\n- Bug #11865: Fixed setting `selected` for dropdown list using options (samdark)\n- Bug #11878: Fixed i18n gettext fallback language message loading (stevekr)\n- Bug #11896: Fix for DROP TRIGGER in migrations from RBAC. (barradas-alberto)\n- Enh #8795: Refactored `yii\\web\\User::loginByCookie()` in order to make it easier to override (maine-mike, silverfire)\n- Enh #9574: Implicit run `yii\\db\\ColumnSchemaBuilder::null()` when default value is set to `null`. (rob006)\n- Enh #9948: `yii\\rbac\\PhpManager` now invalidates script file cache performed by 'OPCache' or 'APC' on file saving (klimov-paul)\n- Enh #10422: Added `null` method on `yii\\db\\ColumnSchemaBuilder` to explicitly set column nullability (nevermnd)\n- Enh #11168: `yii\\helpers\\BaseHtml` now uses abstracted `booleanInput()` and `activeBooleanInput()` methods to render `radio()`, `checkbox()`, `activeRadio()` and `activeCheckbox()` (cesarnicola)\n- Enh #11195: Added ability to append custom string to schema builder column definition (df2, samdark)\n- Enh #11212: Added headers to PO file in `yii\\i18n\\GettextPoFile::save()` (stevekr)\n- Enh #11414: Files specified as `null` in `yii\\web\\AssetBundle` won't be registered (Razzwan)\n- Enh #11428: Speedup SQL query in `yii\\db\\oci\\Schema::findColumns()` (SSiwek)\n- Enh #11432: Added HTTP status 421 \"Misdirected Request\" to list of statuses in `yii\\web\\Response` (dasmfm)\n- Enh #11438: Configurable `yii\\helpers\\Markdown` default flavor (mdmunir)\n- Enh #11462: Added support of filtering rules to `yii\\log\\Target::logVar` (HaruAtari)\n- Enh #11462: Added `yii\\helpers\\BaseArrayHelper::filter()` method (HaruAtari)\n- Enh #11484: Speed up `yii\\db\\oci\\Schema::loadTableSchema()` for Oracle DBMS (SSiwek)\n- Enh #11490: Added `yii\\data\\ArrayDataProvider::$modelClass` property to specify a model used to provide column labels even when data array is empty (PowerGamer1)\n- Enh #11591: Added support for wildcards for `only` and `except` at `yii\\base\\ActionFilter` (klimov-paul)\n- Enh #11679: Extracted `yii\\rbac\\CheckAccessInterface` from `yii\\rbac\\ManagerInterface` (SamMousa, samdark, mdomba)\n- Enh #11725: Added indexes on message tables (OndrejVasicek)\n- Enh #11729: Added `yii\\grid\\CheckboxColumn::$cssClass` property to specify a class added to checkbox input (thiagotalma)\n- Enh #11808: `_table` and `_column` suffixes are now required when generating migration (rob006)\n- Enh #11850: Introduced `yii\\widgets\\Pjax::$submitEvent` to be able to customize event triggering PJAX form submit (Bvanleeuwen)\n- Enh #11857: `yii\\filters\\AccessRule::$verbs` can now be configured in upper and lowercase (DrDeath72, samdark)\n- Chg #11364: Updated jQuery dependency to include versions `1.12.*` (cebe)\n- Chg #11683: Fixed fixture command to work with short syntax. `yii fixture \"*, -User\"` should be used instead of `yii fixture \"*\" -User` (Faryshta, samdark)\n\n\n2.0.8 April 28, 2016\n--------------------\n\n- Bug #7627: Fixed `yii\\widgets\\ActiveField` to handle inputs AJAX validation with changed ID properly (dizeee)\n- Bug #7717: Fixed the bug that `$properties` parameter in `ArrayHelper::toArray()` was not passed to recursive calls (quantum13)\n- Bug #9074: Fixed JS call `$('#grid').yiiGridView('getSelectedRows')` when `GridView::$showHeader` is set to false (NekitoSP, silverfire)\n- Bug #9851: Fixed partial commit / rollback in nested transactions (sammousa)\n- Bug #9935: Fixed `yii\\validators\\EachValidator` does not invoke `validateAttribute()` method of the embedded validator (klimov-paul)\n- Bug #10201: Fixed bug in ActiveRecord, where relational data could not be fetched in case with composite key and join with IN condition (PaulVanSchayck, airmoi, joe-meyer, cebe)\n- Bug #10235: Fixed `yii\\console\\Application::runAction()` to not to corrupt response object (hiqsol)\n- Bug #10480: Fixed removing old identity cookie when loggin in as another user without logging out first (maine-mike)\n- Bug #10617: Fixed `yii\\web\\Request::getBodyParams()` returned `null` instead of empty array if request body is empty and content type is application/json (samdark)\n- Bug #10784: Fixed `yii\\grid\\CheckboxColumn` to set correct value when `yii\\grid\\CheckboxColumn::$checkboxOptions` closure is used (nukkumatti)\n- Bug #10850: Fixed unable to use 'definitions' and 'aliases' at `yii\\widgets\\MaskedInput` (rahimov, klimov-paul)\n- Bug #10884: Fixed `yii\\i18n\\MessageFormatter` for formatting messages when not all parameters are given (laxity7, cebe)\n- Bug #10935: Fixed cache key collision in `yii\\web\\UrlManager::createUrl()` (sammousa)\n- Bug #10946: Fixed parameters binding to the SQL query in `yii\\db\\mysqlSchema::findConstraints()` (silverfire)\n- Bug #10969: Fixed generator migration tool with decimal params in column (pana1990)\n- Bug #10974: `yii.js` - fixed error in ajaxPrefilter event handler, caused by blocked frame (maximal)\n- Bug #11012: Fixed `yii\\web\\UploadedFile::getBaseName()` to work with UTF-8 file names (hiscaler, silverfire)\n- Bug #11026: Fixed `yii\\helpers\\StringHelper::truncateWords()` to count words properly for non-English text (samdark, tol17)\n- Bug #11038: Fixed handling of intervals of 0 seconds in `yii\\i18n\\Formatter::asDuration()` (VirtualRJ)\n- Bug #11040: Check parameter 'recursive' and disable recursive copying with option 'recursive' => false in method BaseFileHelper::copyDirectory (Ni-san)\n- Bug #11052: Fixed `HtmlPurifier` configuration sequence (samdark)\n- Bug #11066: `yii.js` - fixed `getQueryParams()` function to handle URLs with anchors correctly (DrDeath72)\n- Bug #11088: Fixed bug with column name not being quoted correctly, when a quoted table name or a table name in prefix syntax was used (cebe, edgardmessias, Ni-san)\n- Bug #11093: Fixed `yii\\db\\QueryBuilder::buildAndCondition()` to add query params passed directly by `yii\\db\\Expression` (CedricYii, silverfire)\n- Bug #11125: Fixed `JSON_ERROR_SYNTAX` for `json_decode(null)` in PHP 7 (fps01)\n- Bug #11132: Fixed `yii\\widgets\\FragmentCache` not handling empty content correctly in all cases (kidol)\n- Bug #11188: Fixed wrong index usage in `CaptchaAction` when calling `imagefilledrectangle` (alsopub)\n- Bug #11196: Fixed VarDumper throws PHP Fatal when dumping `__PHP_Incomplete_Class` (DamianZ)\n- Bug #11220: NumberValidator now handles objects properly (samdark)\n- Bug #11221: Boolean validator generates incorrect error message (azaikin, githubjeka)\n- Bug #11223: Fixed returning an empty array when DbManager::getRolesByUser() was called on a user with user id 0 (VirtualRJ)\n- Bug #11228: `yii.activeForm.js` - AJAX validation will not be triggered if client side validation failed (silverfire)\n- Bug #11262: Enabled use of yii2 inside of PHAR packaged console applications (hiqsol)\n- Bug #11270: Fixed `yii\\db\\BaseActiveRecord::link()` method in order to support closure in `indexBy` for relations declaration (iushev)\n- Bug #11280: Descendants of `yii\\console\\controllers\\BaseMigrateController`, like the one for MongoDB, unable to create new migration (klimov-paul)\n- Bug #11333: Avoid serializing PHP 7 errors (zuozp8)\n- Bug #11425: Fixed namespace conflict with Markdown helper and Console helper (cebe, mdmunir)\n- Bug: SQlite querybuilder did not create primary key with bigint for `TYPE_BIGPK` (cebe)\n- Enh #5469: Add mimetype validation by mask in FileValidator (kirsenn, samdark, silverfire)\n- Enh #7177, #10165: Added support for validating datetime and time values using intl short format to `DateValidator` (VirtualRJ, cebe)\n- Enh #8145, #8139, #10234 #11153: `yii\\validators\\Validator::$attributes` property now supports `!attribute` notation to validate attribute, but do not mark it as safe (mdmunir)\n- Enh #8148: Implemented ability to add comment on table and column in migration (vaseninm, silverfire)\n- Enh #8505: `yii\\db\\Query` now contains a andFilterCompare() method that allows filtering using operators in the query value (lennartvdd)\n- Enh #8602: `yii\\validators\\DateValidator` skip validation for `timestampAttribute`, if it is already in correct format (klimov-paul)\n- Enh #8639: Improve ActiveRecord to not create new instances of classes when objects are available (cebe)\n- Enh #8779: Automatically set `enctype` form option when using file input field (pana1990, arogachev)\n- Enh #9340: Adds `after()` and `first()` column schema builder modifiers (df2)\n- Enh #9425: `yii\\db\\Query::exists()` now uses SQL standard `EXISTS()` query via new `yii\\db\\QueryBuilder::selectExists()` method to improving performance in some cases (PowerGamer1)\n- Enh #9562: Adds `char` datatype to framework (df2)\n- Enh #9604: `yii\\db\\BaseActiveRecord` now triggers event `EVENT_AFTER_REFRESH` after a record is refreshed (raoul2000)\n- Enh #9893: `yii.js` handleAction enhanced to support for data-form attribute, so links can trigger specific forms (SamMousa)\n- Enh #10309: Extracted `yii\\web\\UrlManager` rule cache key into `$cacheKey` protected property (lordthorzonus)\n- Enh #10322: ActiveForm now respects `formtarget` attribute of submit button (AnatolyRugalev)\n- Enh #10451: Check of existence of `$_SERVER` in `yii\\web\\Request` before using it (quantum13)\n- Enh #10475: Extracted `getUrlFromCache()` and `setRuleToCache()` protected methods from `yii\\web\\UrlManager::createUrl()` (dmdark)\n- Enh #10487: `yii\\helpers\\BaseArrayHelper::index()` got a third parameter `$groupBy` to group the input array by the key in one or more dimensions (quantum13, silverfire, samdark)\n- Enh #10610: Added `BaseUrl::$urlManager` to be able to set URL manager used for creating URLs (samdark)\n- Enh #10631: Split getting label and rendering cell in `yii\\grid\\DataColumn::renderHeaderCellContent()` to make code simpler (t-kanstantsin, samdark)\n- Enh #10710: `yii\\helpers\\FileHelper::copyDirectory()` is now throwing exception when trying to copy a directory to itself or a subdirectory (wallysalami, cebe, samdark)\n- Enh #10764: `yii\\helpers\\Html::tag()` and `::beginTag()` return content without any HTML when the `$tag` attribute is `false` or `null` (pana1990)\n- Enh #10840: Added `yii\\console\\Controller::optionAliases()` method to support aliases for commands (pana1990)\n- Enh #10889: Allows unsigned primary key column definitions (df2)\n- Enh #10908: Added Dependency Injection for Closure configuration (SamMousa)\n- Enh #10910: Fixed Captcha client side validation after image refresh, when controller is under module (silverfire)\n- Enh #10921: `__toString()` of column schema builder now adapts to column types (df2)\n- Enh #10931: Removed hard dependency of `yii\\di\\Container` on `Yii::$app` (SamMousa)\n- Enh #10937: `yii\\web\\User` will now confirm the request accepts an HTML response before redirecting to the login page. Added optional `$checkAcceptHeader` to `yii\\web\\User::loginRequired()` (sammousa)\n- Enh #10941: Added `yii\\helpers\\ArrayHelper::isTraversable()`, added support for traversable selections for dropdownList, radioList and checkboxList in `yii\\helpers\\Html` (sammousa)\n- Enh #10954: `yii\\db\\QueryBuilder` now accepts `Traversable` objects for `in` condition (SamMousa, silverfire)\n- Enh #10967: Simplified Javascript on the exception debug page (SamMousa)\n- Enh #10976: `yii\\helpers\\Inflector::transliterate()` now uses `strtr` instead of `str_replace` (DrDeath72)\n- Enh #11002: `yii\\behaviors\\AttributeBehavior::$skipUpdateOnClean` which determines whether to skip a behavior when the behavior owner has not been modified (Faryshta)\n- Enh #11056: Allow setting a custom logger configuration for `yii\\log\\Dispatcher` in configuration (bionoren, cebe)\n- Enh #11058: `yii\\web\\User::loginRequired()` now does not set return URL when request method is not GET (dawei101, silverfire)\n- Enh #11110: Added migrations for DB session (mdmunir)\n- Enh #11137: Added weak ETag support to `yii\\filters\\HttpCache`. It could be turned on via setting `$weakEtag` to `true` (particleflux)\n- Enh #11139: `yii\\validators\\EachValidator` injects specific attribute value in error message parameters (silverfire)\n- Enh #11166: migrate command new option `useTablePrefix` (Faryshta)\n- Enh #11187: migrate command now generates PHPDoc for table migrations (Faryshta)\n- Enh #11207: migrate command can create foreign keys. (Faryshta)\n- Enh #11254: Added ability to attach RBAC rule using class name (mdmunir)\n- Enh #11285: `yii\\base\\Security` enhancements (tom--, samdark)\n  - Avoid reading more bytes than needed from `/dev/urandom` and `/dev/random`.\n  - Pefer `/dev/random` to `/dev/urandom` when running on FreeBSD.\n  - Better RNG performance.\n- Enh #11336: Allow resettting `$hostInfo`, `$scriptUrl`, and `$pathInfo` in `yii\\web\\Request` and `$baseUrl`, and `$hostInfo` in `yii\\web\\UrlManager` to `null`, to make Yii determine the value again (cebe)\n- Enh: Added `yii\\helpers\\StringHelper::countWords()` that given a string returns number of words in it (samdark)\n- Chg #9854: Added `ActiveRecordInterface::populateRelation()` to respect the methods called by the implementation (SamMousa)\n- Chg #10726: Added `yii\\rbac\\ManagerInterface::canAddChild()` (dkhlystov, samdark)\n- Chg #10921: Inverts responsibility of database specific column schema builder classes (df2)\n- Chg #11071: `yii\\helpers\\BaseArrayHelper::isIn()` and `isTraversable()` since now throw `yii\\base\\InvalidParamException` instead of `InvalidArgumentException` (nukkumatti)\n- Chg #11283: `yii\\db\\ActiveRecord::unlink()` is not setting FK to `null` before deleting itself anymore (samdark)\n- Chg: HTMLPurifier dependency updated to `~4.6` (samdark)\n- New #8920: Added `yii\\mutex\\PgsqlMutex` which implements mutex \"lock\" mechanism via PgSQL locks (nineinchnick, CSharpRU)\n\n\n2.0.7 February 14, 2016\n-----------------------\n\n- Bug #6351: Find MySQL FK constraints from `information_schema` tables instead of `SHOW CREATE TABLE` to improve reliability (nineinchnick)\n- Bug #6363, #8301, #8582, #9566: Fixed data methods and PJAX issues when used together (derekisbusy)\n- Bug #6876: Fixed RBAC migration MSSQL cascade problem (thejahweh)\n- Bug #7627: Fixed `yii\\widgets\\ActiveField` to handle inputs validation with changed ID properly (dynasource, cebe)\n- Bug #7806: Fixed `yii\\grid\\CheckboxColumn` fixed `_all` checkbox column name generation (cebe, silverfire)\n- Bug #7964: Fixed i18n message sources to load fallback messages in a smarter way (silverfire)\n- Bug #8348: Fixed `yii\\helpers\\BaseArrayHelper` fixed PHP Fatal Error: Nesting level too deep - recursive dependency? (andrewnester)\n- Bug #8466: Fixed `yii\\validators\\FileValidator` to display error for `tooBig` and `tooSmall` with formatted unit (silverfire)\n- Bug #8573: Fixed incorrect data type mapping for NUMBER to INTEGER or DECIMAL in Oracle (vbelogai)\n- Bug #8723: Fixed `yii\\helpers\\VarDumper::export()` unable to export circle referenced objects with `Closure` (klimov-paul)\n- Bug #9061: Fixed `yii.activeForm.js`: input onBlur event forces field validation (githubjeka)\n- Bug #9108: Negative number resulted in no formatting when using `yii\\i18n\\Formatter::asSize()` or `yii\\i18n\\Formatter::asShortSize()` (nxnx, cebe)\n- Bug #9288: Fixed `yii\\helpers\\FileHelper::createDirectory()` directory creation to be concurrency friendly (dynasource)\n- Bug #9314: Fixed `yii\\rbac\\DbManager::getPermissionsByUser()` not returning permissions directly assigned to a user (hesna)\n- Bug #9323: Fixed `yii\\console\\controllers\\MessageController` not using database connection specified in config (raccoon69, samdark)\n- Bug #9333: Fixed `yii\\web\\AssetManager` to publish bundles using symlink with nested directories in `hash` (silverfire)\n- Bug #9415: Fixed regression in 2.0.6 where on Oracle DB `PDO::ATTR_CASE = PDO::CASE_LOWER` did not work anymore (cebe)\n- Bug #9442: Fixed `yii\\db\\Migration::renameTable()` caused fatal error when using SQLite driver (fetus-hina)\n- Bug #9452: Fixed `yii\\db\\Query::where()` does not add params from directly passed `yii\\db\\Expression` (klimov-paul)\n- Bug #9454: Fixed MSSQL MARS wasn't working with transactions (daliran)\n- Bug #9583: Server response on invalid JSON request included a wrong message about \"Internal Server Error\" with status 500 (cebe)\n- Bug #9591: Fixed `yii.validation.js` code so it is compressable by YUICompressor (samdark, hofrob)\n- Bug #9596: Fixed `yii\\web\\UrlManager::createAbsoluteUrl(['site/index', '#' => 'testHash'])` losing hash (alchimik, samdark)\n- Bug #9670: Fixed PJAX redirect in IE. `yii\\web\\Response::redirect()` - added check for `X-Ie-Redirect-Compatibility` header (silverfire)\n- Bug #9678: `yii\\i18n\\I18N::format()` wasn't able to handle named placeholder in \"selectordinal\" (samdark)\n- Bug #9681: `yii\\helpers\\Json::encode()` was erroring under CYGWIN (samdark)\n- Bug #9689: Hidden input on `Html::activeFileInput()` had the wrong name if a name was explicitly given (graphcon, cebe)\n- Bug #9707: Fixed Memcache duration which exceeds 30 days (vernik91)\n- Bug #9714: Fixed `yii\\rbac\\PhpManager::updateItem()` unable to save users assignments (rezident1307)\n- Bug #9754: Fixed `yii\\web\\Request` error when path info is empty (dynasource)\n- Bug #9790: Fixed `yii\\db\\sqlite\\QueryBuilder` to generate proper SQL for UNION (romeOz, samdark)\n- Bug #9791: Fixed endless loop on file creation for non-existing device letters on windows (lukos, cebe)\n- Bug #9874: Fixed outputting exception stacktrace in non-debug mode when `Response::FORMAT_RAW` is used (nainoon)\n- Bug #9883: Passing a single `yii\\db\\Expression` to `Query::select()` or `::addSelect()` was not handled correctly in all cases (cebe)\n- Bug #9911: Fixed `yii\\helpers\\BaseStringHelper::explode()` code so it doesn't remove items equal to 0 when `skip_empty` is true (silverfire, kidol)\n- Bug #9924: Fixed `yii.js` handleAction corrupted parameter values containing quote (\") character (silverfire)\n- Bug #9984: Fixed wrong captcha color in case Imagick is used (DrDeath72)\n- Bug #9999: Fixed `yii\\web\\UrlRule` to allow route parameter names with `-`, `_`, `.`characters (silverfire)\n- Bug #10029: Fixed `yii\\widgets\\MaskedInput` not working with PJAX (martrix78, samdark)\n- Bug #10052: Fixed `yii\\i18n\\Formatter` to work with huge numbers on 32-bit arch (necrox87, silverfire)\n- Bug #10101: Fixed assignments saving on role removing in `yii\\rbac\\PhpManager` (rezident1307)\n- Bug #10142: Fixed `yii\\validators\\EmailValidator` to check the length of email properly (silverfire)\n- Bug #10218: Fixed Flash messages not showing after logging out a user (andrewnester)\n- Bug #10263: Fixed `yii\\validators\\UniqueValidator` to work properly when model is not instance of `targetClass` (bupy7, githubjeka, silverfire)\n- Bug #10278: Fixed `yii\\helpers\\BaseJson` support \\SimpleXMLElement data (SilverFire, LAV45)\n- Bug #10302: Fixed JS function `yii.getQueryParams`, which parsed array variables incorrectly (servocoder, silverfire)\n- Bug #10363: Fixed fallback float and integer formatting (AnatolyRugalev, silverfire)\n- Bug #10385: Fixed `yii\\validators\\CaptchaValidator` passed incorrect hashKey to JS validator when `captchaAction` begins with `/` (silverfire)\n- Bug #10467: Fixed `yii\\di\\Instance::ensure()` to work with minimum settings (LAV45)\n- Bug #10541: Fixed division by zero issue in `Console` helper progress bar (youmad)\n- Bug #10580: Fixed `yii\\grid\\GridView::guessColumns()` to work with numeric column names (silverfire)\n- Bug #10625: Fixed `activeForm.js` - when submit doesn't reload page, submit button value simulation with hidden input did not work (andrewnester)\n- Bug #10629: Fixed `yii\\helpers\\BaseStringHelper` - BaseStringHelper::truncateHtml adds suffix regardless of the string length (andrewnester)\n- Bug #10692: Fixed default value extraction in PostgreSQL Schema for null values (wallysalami, gabrielhomsi)\n- Bug #10739: Fixed `yii\\web\\UrlManager::parseRequest()` to treat request URL with more than one slash at the end as invalid (andrewnester)\n- Bug #10751: Fixed `yii\\validators\\UrlValidator` pattern to improve matching (silverfire)\n- Bug #10760: `yii\\widgets\\DetailView::normalizeAttributes()` fixed for arrayable models (boehsermoe)\n- Bug #10825: Fixed `yii\\validators\\EachValidator` does not respect `skipOnEmpty` rule parameter (klimov-paul)\n- Bug: Fixed generation of canonical URLs for `ViewAction` pages (samdark)\n- Bug: Fixed `mb_*` functions calls to use `UTF-8` or `Yii::$app->charset` (silverfire)\n- Enh #2377: Allow specifying a table alias when joining relations via `joinWith()` (cebe, nainoon)\n- Enh #3506: Added `yii\\validators\\IpValidator` to perform validation of IP addresses and subnets (SilverFire, samdark)\n- Enh #4972: Added `yii\\db\\ActiveQuery::alias()` to allow specifying a table alias for the model table without having to know the name (cebe, stepanselyuk)\n- Enh #5146: Added `yii\\i18n\\Formatter::asDuration()` method (nineinchnick, SilverFire)\n- Enh #5902: `yii\\widgets\\Pjax::options` now support special option `tag` to specify tag of container (Alex-Code)\n- Enh #6162, #9198: Added parameter visibleButtons for `yii\\grid\\ActionColumn` (fornit1917, silverfire)\n- Enh #7341: Client validation now skips disabled inputs (SamMousa)\n- Enh #7405: Added `yii\\filters\\auth\\AuthMethod::optional` for optional authentification in all child classes (SilverFire)\n- Enh #7566: Improved `yii\\validators\\CompareValidator` default messages (slinstj)\n- Enh #7581: Added ability to specify range using anonymous function in `RangeValidator` (RomeroMsk)\n- Enh #7674: Added `yii\\db\\Connection::commandClass` to configure a command class that will be used by the connection (sammousa, silverfire, cebe)\n- Enh #8284: Added `yii\\captcha\\CaptchaAction::$imageLibrary` property allowing to set image rendering library (AnatolyRugalev)\n- Enh #8329: Added support of options for `message` console command (vchenin)\n- Enh #8613: `yii\\widgets\\FragmentCache` will not store empty content anymore which fixes some problems related to `yii\\filters\\PageCache` (kidol)\n- Enh #8649: Added total applied migrations to final report (vernik91)\n- Enh #8687: Added support for non-gregorian calendars, e.g. persian, taiwan, islamic to `yii\\i18n\\Formatter` (cebe, z-avanes, hooman-pro)\n- Enh #8824: Allow passing a `yii\\db\\Expression` to `Query::groupBy()` (cebe)\n- Enh #8995: `yii\\validators\\FileValidator::maxFiles` can be set to `0` to allow unlimited count of files (PowerGamer1, silverfire)\n- Enh #9282: Improved JSON error handling to support PHP 5.5 error codes (freezy-sk)\n- Enh #9337: Added `yii\\db\\ColumnSchemaBuilder::defaultExpression()` to support DB Expression as default value (kotchuprik)\n- Enh #9412: `yii\\web\\Response::sendHeaders()` does now set the status header last which negates certain magic PHP behavior regarding the `header()` function (nd4c, kidol)\n- Enh #9443: Added `unsigned()` to `ColumnSchemaBuilder` (samdark)\n- Enh #9465: ./yii migrate/create now generates code based on migration name and --fields (pana1990)\n- Enh #9573: Added `yii\\rbac\\ManagerInterface::getUserIdsByRole()` and implementations (samdark)\n- Enh #9635: Added default CSS class for `yii\\grid\\ActionColumn` header (arogachev, dynasource)\n- Enh #9643: Added migrations for DB cache (mdmunir)\n- Enh #9711: Added `yii\\widgets\\LinkPager::$pageCssClass` that allows to set default page class (ShNURoK42)\n- Enh #9733: Added Unprocessable Entity HTTP Exception (janfrs)\n- Enh #9762: Added `yii\\web\\JsonResponseFormatter::$encodeOptions` and `::$prettyPrint` for better JSON output formatting (cebe)\n- Enh #9783: jQuery inputmask dependency updated to `~3.2.2` (samdark)\n- Enh #9785: Added ability to invoke callback with dependency resolution to DI container (mdmunir, SamMousa)\n- Enh #9869: Allow path alias for SQLite database files in DSN config (ASlatius)\n- Enh #9901: Default `Cache.SerializerPermissions` configuration option for `HTMLPurifier` is set to `0775` (klimov-paul)\n- Enh #10056: Allowed any callable to be passed to `yii\\grid\\ActionColumn::$urlCreator` (freezy-sk)\n- Enh #10061: `yii\\helpers\\BaseInflector::transliterate()` is now public. Introduced different levels of transliteration strictness (silverfire)\n- Enh #10078: Added `csrf` option to `Html::beginForm()` to allow disabling the hidden csrf field generation (machour)\n- Enh #10086: `yii\\base\\Controller::viewPath` is now configurable (Sibilino)\n- Enh #10098: Changed `yii.confirm` context to the event's target DOM element which is triggered by clickable or changeable elements (lichunqiang)\n- Enh #10108: Added support for events in interfaces (omnilight)\n- Enh #10118: Allow easy extension of slug generation in `yii\\behaviors\\SluggableBehavior` (cebe, hesna, silverfire)\n- Enh #10149: Made `yii\\db\\Connection` serializable (Sam Mousa)\n- Enh #10154: Implemented support of traversable objects in `RangeValidator::ranges`, added `ArrayHelper::isIn()` and `ArrayHelper::isSubset()` (Sam Mousa)\n- Enh #10158: Added the possibility to specify CSS and Javascript options per file in `yii\\web\\AssetBundle` (machour)\n- Enh #10170: `Yii::powered()` now uses `Yii::t()` (SamMousa)\n- Enh #10217: Support for selecting multiple filter values with the same name was added to `yii.gridView.js` (omnilight, silverfire)\n- Enh #10255: Added Yii warning to session initialization if session was already started (AnatolyRugalev)\n- Enh #10264: Generation of HTML tags in Yii's JavaScript now uses jQuery style (silverfire)\n- Enh #10267: `yii.js` - added original event passing to `pjaxOptions` for links with `data-method` and `data-pjax` (servocoder, silverfire)\n- Enh #10319: `yii\\helpers\\VarDumper::dump()` now respects PHP magic method `__debugInfo()` (klimov-paul)\n- Enh #10359: Support wildcard category name in `yii/console/controllers/MessageController` (rmrevin)\n- Enh #10390: Added ability to disable outer tag for `yii\\helpers\\BaseHtml::radiolist()`, `::checkboxList()` (TianJinRong, githubjeka, silverfire)\n- Enh #10535: Allow passing a `yii\\db\\Expression` to `yii\\db\\Query::orderBy()` and `yii\\db\\Query::groupBy()` (andrewnester, cebe)\n- Enh #10545: `yii\\web\\XMLResponseFormatter` changed to format models in a proper way (andrewnester)\n- Enh #10783: Added migration and unit-tests for `yii\\i18n\\DbMessageSource` (silverfire)\n- Enh #10797: Cleaned up requirements checker CSS (muhammadcahya)\n- Enh: Added last resort measure for `yii\\helpers\\FileHelper::removeDirectory()` fail to unlink symlinks under Windows (samdark)\n- Enh: `yii\\behaviors\\AttributeBehavior::getValue()` now respects the callable in array format (silverfire)\n- Chg #6419: Added `yii\\web\\ErrorHandler::displayVars` make list of displayed vars customizable. `$_ENV` and `$_SERVER` are not displayed by default anymore (silverfire)\n- Chg #9369: `Yii::$app->user->can()` now returns `false` instead of erroring in case `authManager` component is not configured (creocoder)\n- Chg #9411: `DetailView` now automatically sets container tag ID in case it's not specified (samdark)\n- Chg #9528: `Traversable` objects are now formatted as arrays in `yii\\web\\XmlResponseFormatter` to support SPL objects and Generators (MaXL-ru)\n- Chg #9878, #9879, #9880: Make `yii\\base\\Security` use `random_bytes()`, LibreSSL, mcrypt, limit OpenSSL to Windows, and to prefer `password_hash()` over `crypt()` (tom--)\n- Chg #9953: `yii\\behaviors\\TimestampBehavior::getValue()` changed to make value processing consistent with `AttributeBehavior::getValue()` (silverfire)\n- Chg #10296: Methods mset, mget and madd of `yii\\caching\\Cache` have been marked as deprecated (trejder, githubjeka)\n- Chg: ApcCache is now able to handle PHP 7 APCu (samdark)\n- Chg: `yii\\behaviors\\BlameableBehavior::getValue()` changed to make value processing consistent with `yii\\behaviors\\AttributeBehavior::getValue()` (silverfire)\n- New #10083: Added wrapper for PHP webserver (samdark)\n- New: Added new requirement: ICU Data version >= 49.1 (SilverFire)\n\n\n2.0.6 August 05, 2015\n---------------------\n\n- Bug #4763: Fixed display issue with overlapping call stack item on exception display page (cebe)\n- Bug #7305: Logging of Exception objects resulted in failure of the logger i.e. no logs being written (cebe)\n- Bug #7374: Use proper INSERT syntax with default values when no values are specified (nineinchnick)\n- Bug #7707: Client-side `trim` validator now passes the trimmed value to subsequent validators (nkovacs)\n- Bug #7764: `yii\\helpers\\ArrayHelper::toArray()` wasn't passing `$recursive` to `yii\\base\\Arrayable::toArray()` (brandonkelly)\n- Bug #8161: Fixed active form `data-method` submit bug when client validation is used (vbelogai)\n- Bug #8322: `yii\\behaviors\\TimestampBehavior::touch()` now throws an exception if owner is new record (klimov-paul)\n- Bug #8451: `yii\\i18n\\Formatter` did not allow negative unix timestamps as input for date formatting (cebe)\n- Bug #8483: Sequence name in `Schema::getLastInsertId()` was not properly quoted (nineinchnick)\n- Bug #8506: Cleaning of output buffer in `Widget::run()` conflicts with `Pjax` widget which did the cleanup itself (cebe, joester89)\n- Bug #8544: Fixed `yii\\db\\ActiveRecord` does not update attribute specified at `optimisticLock()` after save (klimov-paul)\n- Bug #8549: Fixed `yii\\caching\\FileCache` doesn't lock cache files when reading (iworker)\n- Bug #8551: `yii\\pgsql\\QueryBuilder::batchInsert()` may cause \"undefined index\" error (arkhamvm)\n- Bug #8585: Fixed `yii\\helpers\\Html::activeTextarea()` does not allow value overriding via options (klimov-paul)\n- Bug #8592: Fixed `yii\\db\\Command::getRawSql()` unable to parse params specified without colon (':') (klimov-paul)\n- Bug #8593: Fixed `yii\\db\\ActiveQuery` produces incorrect SQL for aggregations, when `sql` field is set (klimov-paul)\n- Bug #8595: Fixed `yii\\rbac\\DbManager::checkAccessFromCache()` to check against auth items loaded in cache recursively (achretien, qiangxue)\n- Bug #8606: Fixed `yii\\web\\Response::xSendFile()` does not reset format (vyants)\n- Bug #8627: Fixed `yii\\db\\Migration` produces incorrect results due to table schema caching (klimov-paul)\n- Bug #8661: Fixed `yii.activeForm.js` scrolling to top (nkovacs)\n- Bug #8684: Formatter ignored explicit decimal number settings when a default value is configured (leandrogehlen, cebe)\n- Bug #8772: `yii\\db\\ActiveQuery` failed removing duplicate records after join when the resultset did not contain the pk values e.g. after grouping (cebe)\n- Bug #8844: Added a workaround for an oracle bug when fetching information about table constraints and filtering by `CONSTRAINT_TYPE` (nidgetgod)\n- Bug #8900: Fixed determining active menu item with url-alias in route `yii\\widgets\\Menu::isItemActive()` (demi)\n- Bug #9006: Fixed bit column always returning true using certain version of PDO MySQL (stratoss, RusAlex, mj4444ru, samdark)\n- Bug #9046: Fixed problem with endless error loop when an error occurred after sending a stream or file download response to the user (cebe)\n- Bug #9059: Fixed PHP Notice in error handler view (dynasource, andrewnester, samdark)\n- Bug #9063: Workaround for MySQL losing table case when adding index (sebathi)\n- Bug #9076: Fixed `yii\\filters\\PageCache` not using the configured duration and dependency when caching the response data (kidol)\n- Bug #9091: `yii\\web\\UrlManager::createUrl()` did not create correct url when defaults were used, internal cache is now skipped in certain situations (cebe)\n- Bug #9127, #9128: Fixed MSSQL `yii\\helpers\\mssql\\QueryBuilder::renameColumn()` and `yii\\helpers\\mssql\\QueryBuilder::renameTable()` escaping (sitawit)\n- Bug #9161: Fixed `yii\\web\\Request` ignore `queryParams` when resolve request (zetamen)\n- Bug: Fixed string comparison in `yii\\db\\BaseActiveRecord::unlink()` which may result in wrong comparison result for hash valued primary keys starting with `0e` (cebe)\n- Bug: Pass correct action name to `yii\\console\\Controller::options()` when default action was requested (cebe)\n- Bug: Automatic garbage collection in `yii\\caching\\FileCache` was not triggered (kidol)\n- Bug: Fixed missing stacktrace items on PHP syntax errors of \"unexpected end of file\" type (samdark)\n- Enh #3335: Implemented `yii\\db\\ColumnSchemaBuilder` (pana1990, vaseninm, samdark, cebe)\n- Enh #5991: Added `updateMessages()` to `yii.activeForm.js` to support manually updating ActiveForm messages (nkovacs)\n- Enh #6043: Specification for 'class' and 'style' in array format added to `yii\\helpers\\Html` (klimov-paul)\n- Enh #6853: Console application will now register PHP constants for `STDIN`, `STDOUT`, and `STDERR` itself if they are not defined (cebe)\n- Enh #7169: `yii\\widgets\\ActiveField` now uses corresponding methods for default parts rendering (klimov-paul)\n- Enh #7259: Added `errorAttributes` parameter to ActiveForm `afterValidate` event. Made scrolling to first error optional (nkovacs)\n- Enh #8070: `yii\\console\\controllers\\MessageController` now sorts created messages, even if there is no new one, while saving to PHP file (klimov-paul)\n- Enh #8286: `yii\\console\\controllers\\MessageController` improved allowing extraction of nested translator calls (klimov-paul)\n- Enh #8373: Check also `post_max_size` parameter in `yii\\validators\\FileValidator::getSizeLimit()` (maxxer)\n- Enh #8415: `yii\\helpers\\Html` allows correct rendering of conditional comments containing `!IE` (salaros, klimov-paul)\n- Enh #8444: Added `yii\\widgets\\LinkPager::$linkOptions` to allow configuring HTML attributes of the `a` tags (zinzinday)\n- Enh #8486: Added support to automatically set the `maxlength` attribute for `Html::activeTextArea()` and `Html::activePassword()` (klimov-paul)\n- Enh #8566: Added support for 'only' and 'except' options for `yii\\web\\AssetManager::publish()` (klimov-paul)\n- Enh #8574: Added `yii\\console\\controllers\\MessageController` support .pot file creation (pgaultier)\n- Enh #8625: Added `markUnused` option to `yii\\console\\controllers\\MessageController` (marius7383)\n- Enh #8670: Added support for saving extra fields in session table for `yii\\web\\DbSession` (klimov-paul)\n- Enh #8671: Extracted `yii\\helpers\\Html::escapeJsRegularExpression()` method from `yii\\validators\\RegularExpressionValidator` (silverfire, klimov-paul, samdark, qiangxue)\n- Enh #8903: PostgreSQL `yii\\db\\pgsql\\QueryBuilder::createIndex()` can now specify the index method to use (LAV45)\n- Enh #8933: Yii is now able to properly handle HHVM fatal errors (dieend, samdark)\n- Enh #9011: Allow `yii\\widgets\\MaskedInput` to produce an input tag of a custom type (TriAnMan)\n- Enh #9038: Write warning to log in case `FileCache` fails to write into file (foccy)\n- Enh #9072: `yii\\web\\ErrorAction` displays 404 error instead of blank page on direct access (klimov-paul)\n- Enh #9149: Print directory migrationPath in a `yii migrate` command error. (RusAlex)\n- Enh #9177: Added password hash cost setting to Security component (freezy-sk)\n- Enh #9239: Better handling of `Json` errors (grzegorzkurtyka, samdark)\n- Enh #9246: Added `yii\\web\\UrlRule::getParamRules()` (df2)\n- Enh #9249: Added `hashCallback` in `yii\\web\\AssetManager` to allow custom hash generation for asset directory (petrabarus)\n- Enh #9263: Avoid extra DB query in RBAC DbManager in case auth item name is empty (samdark)\n- Enh #9268: Improved display of boolean parameters in logged SQL queries (arkhamvm, samdark)\n- Enh: Improved Console helper progress bar ETA time estimation, updated only once per second to avoid flapping (cebe)\n- Chg #6354: `yii\\base\\ErrorHandler::logException()` will now log the whole exception object instead of only its string representation (cebe)\n- Chg #8556: Extracted `yii\\web\\User::getAuthManager()` method (samdark)\n- Chg #9181: `yii\\helpers\\BaseStringHelper::truncateHtml()` is now using `runtime` directory for `HTMLPurifier` cache (webdevsega)\n\n\n2.0.5 July 11, 2015\n-------------------\n\n- Bug #9070 (CVE-2015-5467): Fixed `ViewAction::resolveViewName()` not to accept `/../` and `/./` (thejahweh, samdark)\n\n\n2.0.4 May 10, 2015\n------------------\n\n- Bug #5042: Use `RETURNING` for inserts for pgsql and oci to support PKs with a custom default value expression (nineinchnick, klimov-paul)\n- Bug #6234: Fixed wrong table schema information for MSSQL when using multiple schemas (nineinchnick)\n- Bug #6642: Fixed the bug that using confirmation dialog via `data-confirm` in an `yii\\widgets\\ActiveForm` may cause the dialog to appear twice (pana1990, qiangxue)\n- Bug #6871: Fixed the bug that using defaults and hostnames in URL rules may cause an out-of-range index issue (qiangxue)\n- Bug #7036: Fixed `yii\\helpers\\Html::dropDownList()` overrides label specified at 'groups' option (aktec, klimov-paul)\n- Bug #7473: Fixed `yii\\console\\controllers\\AssetController` does not create missing folders for the target bundles (schmunk42, klimov-paul)\n- Bug #7894: Fixed incorrect URL config processing at `yii\\web\\Application::handleRequest()` and `yii\\widgets\\Menu::items` if route element is not a first one (nkovacs, klimov-paul)\n- Bug #7529: Fixed `yii\\web\\Response::sendContentAsFile()` that was broken in 2.0.3 (samdark)\n- Bug #7603: Fixed escape characters in `FormatConverter` to work with unicode characters (maddoger, cebe)\n- Bug #7656: Fixed `yii\\rbac\\DbManager::getRolesByUser()` and `yii\\rbac\\PhpManager::getRolesByUser()` to return roles only (samdark)\n- Bug #7757: Fix fetching tables schema for oci and mysql when `PDO::ATTR_CASE` is set (nineinchnick)\n- Bug #7761: Fixed formatting one digit month in date formatter using ICU format `L` (nkovacs)\n- Bug #7775: Added more strict check on controller IDs when they are being used to create controller instances on Windows (Bhoft, qiangxue)\n- Bug #7831: Add order when fetching database table names and constraints (nineinchnick)\n- Bug #7846: Fixed `yii\\base\\Model` does not recognize scenario declared by rules using 'except' (klimov-paul)\n- Bug #7847: `yii\\db\\ColumnSchema` was typecasting numerics to strings with incorrect decimal separator for some locales (nineinchnick)\n- Bug #7861: Fixed `yii\\helpers\\VarDumper::export()` fails to export object containing `Closure` (klimov-paul)\n- Bug #7867: Fixed `findUniqueIndexes()` not to perform any processing on unique index on function for pgsql (nineinchnick)\n- Bug #7868: Fixed fetching columns definition and composite foreign keys for oci (nineinchnick)\n- Bug #7868: Removed column's autoIncrement detection from oci (nineinchnick)\n- Bug #7868: Fixed creating raw sql (for logging) by skipping object and resource params (nineinchnick)\n- Bug #7868: Fixed `yii\\db\\Schema::getLastInsertID()`` by quoting sequence name (nineinchnick)\n- Bug #7957: Removed extra `parseFloat()` call for the `compare` js validator (CthulhuDen)\n- Bug #8012: Fixed fetching multiple relations between two tables for pgsql (nineinchnick)\n- Bug #8014: Fixed setting incorrect form \"action\" property after submitting a form using a link with \"data-method\" and containing \"action\" among \"data-params\" (samdark)\n- Bug #8032: `yii\\rbac\\PhpManager::updateItem()` was unable to rename item updated (ChristopheBrun, samdark)\n- Bug #8036: Fixed `yii\\log\\Logger` unable to export session id (klimov-paul)\n- Bug #8068: Fixed `yii\\db\\Query::count()` fails for query containing 'having' without 'group by' (klimov-paul)\n- Bug #8073: Fixed `yii\\data\\ArrayDataProvider::getKeys()` return wrong when `yii\\data\\ArrayDataProvider::$allModels` contain integer key (mdmunir, klimov-paul)\n- Bug #8082: Fixed `yii\\db\\BaseActiveRecord::getAttributeLabel()` return wrong label for related attribute, if several relations in chain share same name (klimov-paul)\n- Bug #8149: Fixed `yii\\db\\BaseActiveRecord::updateCounters()` fails for new record saved with counter attribute not set (klimov-paul)\n- Bug #8158: Avoid exception when detecting console screen size fails on windows (EliasZ)\n- Bug #8165: Fixed `yii\\db\\ActiveRelationTrait::populateRelation()` fails when `link` refers to string convertable object attribute, like `MongoId` (klimov-paul)\n- Bug #8231: Configuration of GridView and DetailView where not preserved when used multiple times (cebe, idMolotov)\n- Bug #8273: Fixed `yii\\widgets\\FragmentCache` when `enabled` is false (nkovacs)\n- Bug #8291: Fixed numeric keys in `$_GET` transformed to 0-based, if 'pretty URL' enabled (quantum13, klimov-paul)\n- Bug #5053: DateValidator is now more robust against different timezone settings (cebe)\n- Bug (CVE-2015-3397): Added `yii\\helpers\\Json::htmlEncode()` to support safer JSON data encoding in HTML code (samdark, Wojciech Janusz, Tomasz Tokarski)\n- Enh #1468: Added ability to specify hints for model attributes via `attributeHints()` method (klimov-paul)\n- Enh #3376: Added `yii\\validators\\EachValidator`, which allows validation of the array attributes (klimov-paul)\n- Enh #5053: Added possibility to specify a format and time zone for the `timestampAttribute` of date validator making it fully usable for validating complete timestamps (cebe)\n- Enh #6442: Improved error message on `yii\\helpers\\FileHelper::createDirectory()` to include the path name of the directory (cebe)\n- Enh #6895: Added `ignoreCategories` config option for message command to ignore categories specified (samdark)\n- Enh #6975: Pressing arrows while focused in inputs of Active Form with `validateOnType` enabled no longer triggers validation (slinstj)\n- Enh #7409: Allow `yii\\filters\\auth\\CompositeAuth::authMethods` to take authentication objects (fernandezekiel, qiangxue)\n- Enh #7443: Allow specification of the `$key` as an array at `yii\\helpers\\ArrayHelper::getValue()` (Alex-Code)\n- Enh #7488: Added `yii\\helpers\\StringHelper::explode()` to perform explode with trimming and skipping of empty elements (SilverFire, nineinchnick, creocoder, samdark)\n- Enh #7514: Added min/max validation to `yii\\validators\\DateValidator` (nkovacs)\n- Enh #7515: Added support to use `indexBy()` together with `column()` in query builder (qiangxue)\n- Enh #7530: Improved default values for `yii\\data\\Sort` link labels in a `ListView` when used with an `ActiveDataProvider` (cebe)\n- Enh #7539: `yii\\console\\controllers\\AssetController` provides dependency trace in case bundle circular dependency detected (klimov-paul)\n- Enh #7562: `yii help` now lists all sub-commands by default (callmez)\n- Enh #7571: HTTP status 500 and \"An internal server error occurred.\" are now returned in case there was an exception in layout and `YII_DEBUG` is false (samdark)\n- Enh #7636: `yii\\web\\Session::getHasSessionId()` uses a more lenient way to check if session ID is provided in URL (robsch)\n- Enh #7637: Allow `yii\\web\\Request::validateCsrfToken()` to validate a manually provided token (miraage, qiangxue)\n- Enh #7808: Adjusted Masked input to correctly generate the hash variable to store the plugin options (wbraganca)\n- Enh #7833: Support (materialized) views and foreign tables along normal tables when fetching table schema (nineinchnick)\n- Enh #7850: Added `yii\\filters\\PageCache::cacheCookies` and `cacheHeaders` to allow selectively caching cookies and HTTP headers (qiangxue)\n- Enh #7867: Implemented findUniqueIndexes for oci and mssql (nineinchnick)\n- Enh #7912: Added `aria-label` to ActionColumn buttons (LAV45, samdark)\n- Enh #7915: Added `yii\\i18n\\Formatter::$numberFormatterSymbols` to allow setting custom symbols for the internally used IntlNumberFormatter, e.g. currency signs (cebe)\n- Enh #7918: `yii\\widgets\\Pjax` got ability to avoid registering link/form handler via setting `false` to `$linkSelector`/`$formSelector` (usualdesigner, Alex-Code, samdark)\n- Enh #7973: Added `yii\\db\\Schema::getSchemaNames()` method (nineinchnick)\n- Enh #8027: Added support for using sub queries in simple Query WHERE conditions (cebe)\n- Enh #8055: `yii\\rest\\UrlRule::extraPatterns` should take precedence over `patterns` (Agrumas)\n- Enh #8064: Added ability to remove containing menu tag by setting `yii\\widgets\\Menu::$options['tag']` to `false` (kirsenn, samdark)\n- Enh #8078: 'links' and 'meta' envelope names are now configurable at `yii\\rest\\Serializer` (arturf)\n- Enh #8171: Allow the user to enforce the fileSize to allow sending files which are not seekable. Needed when using S3 Stream Wrapper (pgaultier)\n- Enh #8179: Added parameter to define whether the comparison of `yii\\db\\BaseActiveRecord::isAttributeChanged()` method will be made as identical (thiagotalma)\n- Enh #8194: Caching of the matched rules added to `yii\\web\\UrlManager::createUrl()` (laszlovl, klimov-paul)\n- Enh #8268: Allow `yii\\db\\QueryBuilder` to recognize more variations of `limit` and `offset` values (tino415, qiangxue)\n- Enh: `yii\\i18n\\Formatter` now shows more information about errors which occured when formatting values (cebe)\n- Enh: Added `yii\\helper\\Console::wrapText()` method to wrap indented text by console window width and used it in `yii help` command (cebe)\n- Enh: Implement batchInsert for oci (nineinchnick)\n- Enh: Detecting `yii\\db\\IntegrityException` for oci (nineinchnick)\n- Enh: `yii\\widgets\\LinkPager::$firstPageLabel` and `yii\\widgets\\LinkPager::$lastPageLabel` now could be set to true in order to use page number as label (samdark)\n- Chg #7924: Migrations in history are now ordered by time applied allowing to roll back in reverse order no matter how these were applied (samdark)\n- Chg: Updated dependency to `cebe/markdown` to version `1.1.x` (cebe)\n\n\n2.0.3 March 01, 2015\n--------------------\n\n- Bug #5457: `yii\\web\\Cors` should handle `Access-Control-Request-Headers` in a case-insensitive manner (qiangxue)\n- Bug #6553: `yii\\validators\\DateValidator` returned valid for date \"2012-12-12foo\" with intl extension enabled (gajahlemu)\n- Bug #6919: Fixed wrong namespaces under advanced application's `TestCase` classes (ivokund)\n- Bug #6940: `yii\\web\\Response::sendContentAsFile()` may not send correct `content-length` header (sadgnome)\n- Bug #6969: `yii\\helpers\\ArrayHelper::htmlEncode()` and `htmlDecode()` should not remove non-string data (qiangxue)\n- Bug #7037: `yii\\console\\controllers\\AssetController` now correctly handles relative image URLs if source and target CSS are under same directory (klimov-paul)\n- Bug #7055: composite IN condition was not generated correctly for certain DBMS (nineinchnick)\n- Bug #7074: `yii\\data\\ArrayDataProvider` did not correctly handle the case `Pagination::pageSize = 0` (kirsenn, qiangxue)\n- Bug #7172: Fixed problem with EmailValidator which did not extract domain correctly for DNS check (nbogol)\n- Bug #7209: `yii\\helpers\\Html::getInputId()`` now also replaces `.` with `-` to ensure a valid ID is generated (omnilight)\n- Bug #7211: Query caching should properly deal with the case when query result is false (qiangxue)\n- Bug #7218: `yii\\captcha\\CaptchaAction` should send response in JSON format (InteLigent, qiangxue)\n- Bug #7226: `yii\\web\\Request::getEtag()` should strip off `-gzip` which may be added by Apache (mcd-php)\n- Bug #7227: Query builder should respect column alias setting when `yii\\db\\Expression` is being selected (mdmunir, qiangxue)\n- Bug #7271: `yii\\db\\ActiveRecord::populateRecord()` should be called in late binding approach (jlorente)\n- Bug #7258: Response was sending HTML content type when formatter was set to JSON or XML, nulls were handled wrong (slavcodev, samdark)\n- Bug #7358: Fix trimming PHPDoc prefix with TAB indent in `yii\\console\\Controller::parseDocCommentSummary()` (gugglegum)\n- Bug #7384: Fix precision loss in log timestamps when using `yii\\log\\DBTarget` (samdark)\n- Bug #7425: `yii\\widgets\\ActiveField::radio()` should not generate the label twice (justinvoelker)\n- Enh #3168: Improved the performance of `yii\\rbac\\DbManager::checkAccess()` by caching mechanism (qiangxue)\n- Enh #3723: `yii\\filters\\PageCache` now supports caching response headers as well as non-HTML response content (qiangxue)\n- Enh #4710: Added `yii\\web\\AssetManager::appendTimestamp` to support cache busting for assets  (qiangxue)\n- Enh #5663: Added support for using `data-params` to specify additional form data to be submitted via the `data-method` approach (usualdesigner, qiangxue)\n- Enh #5681: Allow customization of Menu::submenuTemplate in menu items (RobertBoes, otsec)\n- Enh #6106: Added ability to specify `encode` for each item of `yii\\widgets\\Breadcrumbs` (samdark, aleksanderd)\n- Enh #6361: Added `validateAttribute()` to `yii.activeForm.js` to support manually triggering data validation of an input (Alex-Code, qiang)\n- Enh #6493: Added support for the `Access-Control-Expose-Headers` header by `yii\\filters\\Cors` (usualdesigner)\n- Enh #6697: Added `yii\\helpers\\Url::current()` method that allows adding or removing parameters from current URL (samdark, callmez)\n- Enh #6852: Added `yii\\helpers\\BaseHtmlPurifier::helpers()` in order to be able to configure `HtmlPurifier` helper globally via subclassing (Alex-Code)\n- Enh #6882: Added `yii\\web\\ErrorHandler::getTypeUrl()` in order to allow providing custom types/classes/methods URLs for subclasses (brandonkelly)\n- Enh #6883: `yii\\base\\ErrorHandler::logException()` is now public (samdark)\n- Enh #6896: Added `yii\\log\\FileTarget::$enableRotation` to allow disabling log rotation when external tools are configured for this (cebe)\n- Enh #7008: Removed extra white space in GridView filter cell (uran1980)\n- Enh #7051: Added support for preventing swapping values between different cookies (pavimus, qiangxue)\n- Enh #7150: FormatConverter for date formats now supports single quote escaping (brandonkelly)\n- Enh #7255: Added support to allow widgets that use text input to specify input types (qiangxue)\n- Enh #7269: `yii\\console\\controllers\\BaseMigrateController` now throws exception if directory specified doesn't exist and action isn't `create` (lynicidn, samdark)\n- Enh #7301: Added checking for ICU version in requirements warning about plural problems when it is lower than 49 (sidtj)\n- Enh #7332: Added ability to remove `yii\\widgets\\Menu` container tag by setting `options['tag']` to `false` (dynasource, samdark)\n- Enh #7350: Added `yii\\helpers\\Html::$dataAttributes` to support customizing data attributes (Faryshta, qiangxue)\n- Enh #7357: Refactored `yii\\db\\ColumnSchema` by adding `typecast()` method to decouple `phpTypecast()` from `dbTypecast()` (mcd-php, qiangxue)\n- Enh #7361: The `trim` validator now works on the client side too (qiangxue)\n- Enh #7440: Added support to automatically set the `maxlength` attribute for `Html::activeTextInput()` (llfm)\n- Enh #7446: Added `Schema::TYPE_DOUBLE` to represent ANSI SQL Double Precision type (samdark)\n- Enh #7449: Added `encode` option to allow not encoding select options for `Html::dropDownList()` and `Html::listBox()` (yapi68, qiangxue)\n- Enh: Added support to `yii\\di\\Container` to instantiate and configure an object that implements `yii\\base\\Configurable` (qiangxue)\n- Chg #5690: adjusted paths in message config generated by `yii message/config` to reflect directory structure better (mikehaertl, samdark)\n- Chg #6661: Hyperlinks that are enclosed within an exist form will use the same form for submission if they specify both of the `href` and `data-method` attributes (qiangxue)\n- Chg #7094: Console confirmation must be answered correctly. To return `true`: `y` or `yes`. To return `false`: `n` or `no`. Any other input the question will be asked again (thiagotalma)\n- Chg #7130: Changed the signature of `ActiveRecord::findByCondition()` to simplify the implementation and usage (Faryshta)\n- Chg #7215: Uses OpenSSL crypto lib instead of Mcrypt. Added testing of encrypted data compatibility, both backward and forward (tom--)\n\n\n### Apidoc Extension (yii2-apidoc)\n\n- no changes in this release.\n\n\n### Authclient Extension (yii2-authclient)\n\n- Enh #6892: Default value of `yii\\authclient\\clients\\Twitter::$authUrl` changed to 'authenticate', allowing usage of previous logged user without request an access (kotchuprik)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- no changes in this release.\n\n\n### Codeception Extension (yii2-codeception)\n\n- Bug #6978: DI Container is not reset when destroying application in functional tests (ivokund)\n\n\n### Composer Extension (yii2-composer)\n\n- no changes in this release.\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #6903: Fixed display issue with phpinfo() table (kalayda, cebe)\n- Bug #7222: Debug toolbar wasn't displayed properly in rtl pages (mohammadhosain, johonunu, samdark)\n- Enh #6890: Added ability to filter by query type (pana1990)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- no changes in this release.\n\n\n### Faker Extension (yii2-faker)\n\n- no changes in this release.\n\n\n### Gii Extension (yii2-gii)\n\n- Chg #7328: Changed the way CRUD generator translates \"Create X\". Now it's a whole string because of translation difficulties (samdark)\n\n\n### Imagine Extension (yii2-imagine)\n\n- no changes in this release.\n\n\n### Jui Extension (yii2-jui)\n\n- Enh #7127: `name` or `model` and `attribute` are no longer required properties of `yii\\jui\\InputWidget` (nirvana-msu, cebe)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #7010: Fixed `yii\\mongodb\\Query::select` now allows excluding fields (Sammaye, klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- no changes in this release.\n\n\n### Smarty Extension (yii2-smarty)\n\n- Bug #6845: Fixed incorrect implementation of `{registerCssFile` and `{registerJsFile` (TomassunGitHub, samdark)\n- Bug #6991: Fixed exception when using `{use class='yii\\bootstrap\\Nav' type='function'}` (ivanlemeshev)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #7198: `yii\\sphinx\\Query` no longer attempts to call snippets for the empty query result set (Hrumpa)\n\n\n### Swiftmailer Extension (yii2-swiftmailer)\n\n- no changes in this release.\n\n\n### Twig Extension (yii2-twig)\n\n- no changes in this release.\n\n\n2.0.2 January 11, 2015\n----------------------\n\n- Bug #5577: formatting date and time values for years >=2038 or <=1901 on 32bit systems will not use intl extension but fall back to the PHP implementation (cebe)\n- Bug #6080: Oracle DB schema did not load column types correctly (wenbin1989)\n- Bug #6404: advanced project template `Alert` widget was generating duplicate IDs in case of multiple flashes (SDKiller)\n- Bug #6557: Link URLs generated by `yii\\widgets\\Menu` are not encoded (qiangxue)\n- Bug #6632: `yii\\di\\Container::get()` did not handle config parameter correctly when it is passed as a constructor parameter (qiangxue)\n- Bug #6648: Added explicit type casting to avoid dblib issues on SQL Server 2014 (o-rey)\n- Bug #6691: Fixed console help description parsing with UTF8 characters (cebe)\n- Bug #6717: Fixed issue with UrlManager not matching a route on url creation when it was prefixed with `/` and pattern was empty (cebe)\n- Bug #6736: Removed `Content-Transfer-Encoding` from the list of default download headers (DaSourcerer)\n- Enh #4502: Added alias support to URL route when calling `yii\\helpers\\Url::toRoute()` and `yii\\helpers\\Url::to()` (qiangxue, lynicidn)\n- Enh #5194: `yii\\console\\controllers\\AssetController` now handles bundle files from external resources properly (klimov-paul)\n- Enh #6247: Logger and error handler are now using slightly less memory (stepanselyuk, samdark)\n- Enh #6398: Added support for specifying dependent component in terms of a configuration array for classes such as `DbCache` (qiangxue)\n- Enh #6434: Added `yii\\behaviors\\SluggableBehavior::immutable` to support keeping the generated slug unchanged (trntv)\n- Enh #6467: `yii\\widgets\\ActiveForm` will scroll to the nearest visible element when the first error input is hidden (newartix)\n- Enh #6488: Support changing `yii\\base\\Theme::basePath` during runtime (qiangxue)\n- Enh #6618: Added Model::addErrors() (slavcodev, pana1990)\n- Enh #6739: Log `Target` now works also when there is no `Yii::$app` instance available, no message prefix will be added in this case (schmunk42)\n- Enh #6748: Improved HTML to Text converter in BaseMailer to generate more readable and correct text version of emails (cebe)\n- Chg #6427: In case of invalid route web application now throws exception with \"Page not found\" instead of \"Invalid Route\" (cebe, samdark)\n- Chg #6641: removed zero padding from ETag strings (DaSourcerer)\n- Chg #6678: `yii\\behaviors\\SluggableBehavior` will generate a new slug only when the slug attribute is empty or the source attribute is changed (qiangxue)\n\n\n### Authclient Extension (yii2-authclient)\n\n- Bug #6502: Fixed `yii\\authclient\\OAuth2::refreshAccessToken()` does not save fetched token (sebathi)\n- Bug #6510: Fixed infinite redirect loop using default `yii\\authclient\\AuthAction::cancelUrl` (klimov-paul)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- Bug #6672: `yii\\bootstrap\\Dropdown` should register client event handlers (qiangxue)\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #4820: Fixed reading incomplete debug index data in case of high request concurrency (martingeorg, samdark)\n- Chg #6572: Allow panels to stay even if they do not receive any debug data (qiangxue)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- Enh: Added `ActiveFixture` class for testing fixture support for elasticsearch (cebe, viilveer)\n\n\n### Gii Extension (yii2-gii)\n\n- Bug #6463: The Gii controller generator generates incorrect controller namespace (pana1990)\n- Enh #3665: Better default behavior for ModelSearch generated by the crud generator (qiangxue, mdmunir)\n\n\n### Jui Extension (yii2-jui)\n\n- Enh #6570: Datepicker now uses fallback to find language files, e.g. application language is `de-DE` and the translation files does not exists, it will use `de` instead (cebe)\n- Enh #6471: Datepicker will now show an empty field when value is an empty string (cebe)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #6376: Fixed lazy load of relations to `yii\\mongodb\\file\\ActiveRecord` (klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- Bug #6547: Fixed redis connection to deal with large data in combination with `mget()` (pyurin)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #6621: Creating sub query at `yii\\sphinx\\Query::queryScalar()` fixed (klimov-paul)\n\n\n### Twig Extension (yii2-twig)\n\n- Bug #6464: `path` and `url` weren't resolving aliases (samdark, lynicidn)\n\n\n2.0.1 December 07, 2014\n-----------------------\n\n- Bug #4471: `yii\\caching\\ApcCache::getValues()` now returns array in case of APC is installed but not enabled in CLI mode (samdark, cebe)\n- Bug #4823: `yii message` accuracy and error handling were improved (samdark)\n- Bug #4889: Application was getting into redirect loop when user wasn't allowed accessing login page. Now shows 403 (samdark)\n- Bug #5070: Gii controller generator should use controller class name instead of controller ID to specify new controller (qiangxue)\n- Bug #5402: Debugger was not loading when there were closures in asset classes (samdark)\n- Bug #5448: Date formatter was doing timezone conversion on date only values resulting in different date displayed than provided (cebe)\n- Bug #5452: Errors occurring after the response is sent are not displayed (qiangxue)\n- Bug #5521: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs, which start from '/' (klimov-paul)\n- Bug #5570: `yii\\bootstrap\\Tabs` would throw an exception if `content` is not set for one of its `items` (RomeroMsk)\n- Bug #5584: `yii\\rbac\\DbRbacManager` should not delete items when deleting a rule on a database not supporting cascade update (mdmunir)\n- Bug #5601: Simple conditions in Query::where() and ActiveQuery::where() did not allow `yii\\db\\Expression` to be used as the value (cebe, stevekr)\n- Bug #5619: `yii\\log\\Target` should not attempt to start session when there is none (klimov-paul, qiangxue)\n- Bug #5657: `yii\\caching\\ApcCache::mset()` and `madd()` may cause warning in some APC setup (LAV45)\n- Bug #5665: The `currentPage` meta data in the RESTful result should be 1-based, similar to that in HTTP headers (qiangxue)\n- Bug #5682: The `asset` command would incorrectly combine CSS files when `yii\\web\\AssetManager::linkAssets` is true (dmvslv)\n- Bug #5702: Parenthesis should be automatically added to `yii\\validators\\Validator::whenClient` to avoid js error (mdmunir, qiangxue)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Bug #5748: Smarty `{path` was generating absolute URLs instead of relative ones (samdark, motzel)\n- Bug #5768: When setting `data-confirm` attribute to a submit button, clicking on the button would not trigger form submission (qiangxue)\n- Bug #5780: `QueryBuilder::batchInsert()` may cause \"undefined index\" error (qiangxue)\n- Bug #5833: The `message` command fails with a FK constraint error when trying to update messages (qiangxue)\n- Bug #5863: Selecting all individual `yii\\grid\\CheckboxColumn` checkboxes in grid view wasn't resulting in \"all\" checkbox selected (samdark)\n- Bug #5893: `yii\\helpers\\ArrayHelper::toArray()` now applies `$properties` parameter for converting descending objects in recursive calls (otsec)\n- Bug #5925: `yii\\helpers\\ArrayHelper::htmlEncode()` does not work properly when the value being encoded is a nested array (tebazil)\n- Bug #5962: DateValidator was throwing a warning on invalid dates using the ICU format on Windows, Yii now works around this [PHP Bug](https://bugs.php.net/bug.php?id=68528) (cebe)\n- Bug #5997: The same message may be exported twice to log targets (klimov-paul)\n- Bug #6018: When setting the `encode` option via `yii\\widgets\\ActiveRecord::errorOptions`, it works the other way around (stanishevsky, qiangxue)\n- Bug #6049: `yii\\db\\Connection::getSchema()` for Oracle should return false when the table does not exist. Oracle does not support `ON UPDATE` clause. (wenbin1989)\n- Bug #6081: `yii\\rbac\\DbManager::getChildren()` was not quoting column name properly (wenbin1989)\n- Bug #6107: `yii message` was emptying existing translations in .po in case of multiple categories (samdark)\n- Bug #6112: `yii message` was incorrectly writing not yet translated strings in .po in case of multiple categories (samdark)\n- Bug #6172: `yii\\rbac\\DbManager` should properly quote table and column names (qiangxue)\n- Bug #6164: Added missing support for `yii\\db\\Expression` to `yii\\db\\QueryBuilder` `BETWEEN` and `LIKE` conditions (cebe)\n- Bug #6236: No JS scripts should be registered when `yii\\widgets\\ActiveForm::enableClientScript` is false (qiangxue)\n- Bug #6150: `yii\\bootstrap\\Tabs` dropdown IDs were generated incorrectly (samdark)\n- Bug #6266: Clicking on reset button does not hide error summary when using ` (InteLigent, qiangxue)\n- Bug #6271: Query caching returns the same data when running the same SQL with `yii\\widgets\\ActiveForm` different fetch modes (grachov)\n- Bug #6279: `yii\\db\\Schema::getLastInsertID()` was passing wrong default schema name to PDO (samdark)\n- Bug #6305: `yii\\i18n\\Formatter::asParagraphs()` was not unicode-aware (samdark)\n- Bug #6311: Optimistic lock for ActiveRecord does not work as expected (qiangxue)\n- Bug #6367: Added `yii\\gii\\generators\\crud\\Generator` to support customizing view path for the generated CRUD controller (qiangxue)\n- Bug #6381: Client-side file validation should be disabled if the browser does not support it (Skysplit)\n- Bug: Gii console command help information does not contain global options (qiangxue)\n- Bug: `yii\\web\\UrlRule` was unable to create URLs for rules containing unicode characters (samdark)\n- Bug: `yii\\web\\AssetManager` should not publish disabled asset bundles (qiangxue)\n- Enh #608: Added `yii\\web\\AssetConverter::$forceConvert` (klimov-paul)\n- Enh #4146: Added `yii\\bootstrap\\ButtonDropdown::$containerOptions` (samdark)\n- Enh #4181: Added `yii\\bootstrap\\Modal::$headerOptions` and `yii\\bootstrap\\Modal::$footerOptions` (tuxoff, samdark)\n- Enh #4263: Added migration and SQL schema files for `yii\\log\\DbTarget` (samdark)\n- Enh #4395: Added `$checkAjax` parameter to `yii\\web\\Response::redirect()` to support default redirection behavior for AJAX/PJAX requests (qiangxue)\n- Enh #4450: Added `yii\\bootstrap\\Nav::renderDropdown()` (qiangxue)\n- Enh #4457: Added support for using noscript for css files registered through asset bundles and Html helper (samdark)\n- Enh #4492: Support PostgreSQL-specific syntax for `yii\\db\\QueryBuilder::alterColumn()` (qiangxue)\n- Enh #4643: Extra options specified in `yii\\widgets\\Breadcrumbs::links` will be treated as HTML attributes for the generated hyperlinks (qiangxue)\n- Enh #4739: Better display of exceptions when the response format is set as \"raw\" format (qiangxue)\n- Enh #4791: Added console output support and more colors for console commands (6pblcb, samdark, klimov-paul, Ragazzo)\n- Enh #5005: Added support to suppress loading the same CSS files in AJAX responses (tof06, qiangxue)\n- Enh #5223: Query builder now supports selecting sub-queries as columns (qiangxue)\n- Enh #5367: Added `yii\\grid\\DataColumn::encodeLabel` (SDKiller)\n- Enh #5480: Added defensive code to `yii\\web\\User::getIdentity()` to avoid potential infinite recursion (qiangxue)\n- Enh #5494: Added support for specifying a menu header as a configuration array in `yii\\bootstrap\\Dropdown` (hiltonjanfield, qiangxue)\n- Enh #5503: Added support for `DateTimeImmutable` to `yii\\i18n\\Formatter` (olegtsvetkov, cebe)\n- Enh #5587: `json_encode` is now used with `JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE` where it makes sense, also\n  it is now default for `yii\\helpers\\Json::encode()` (samdark)\n- Enh #5600: Allow configuring debug panels in `yii\\debug\\Module::panels` as panel class name strings (qiangxue)\n- Enh #5613: Added `--overwrite` option to Gii console command to support overwriting all files (motin, qiangxue)\n- Enh #5627: Added `yii cache/flush-schema` console command to flush DB schema cache of a given database connection (6pblcb, samdark)\n- Enh #5646: Call `yii\\base\\ErrorHandler::unregister()` instead of `restore_*_handlers` directly (aivus)\n- Enh #5683: Added `yii\\i18n\\Formatter::defaultTimeZone` for specifying the default time zone to use for datetime values stored in the database (cebe)\n- Enh #5688: Added optional `$formName` to `Model::loadMultiple()` to support customizing form name directly (qiangxue)\n- Enh #5735: Added `yii\\bootstrap\\Tabs::renderTabContent` to support manually rendering tab contents (RomeroMsk)\n- Enh #5770: Added more PHP error names for `ErrorException` (mongosoft)\n- Enh #5799: `yii\\bootstrap\\ButtonGroup::buttons` can take all options that are supported by `yii\\bootstrap\\Button` (aleksanderd)\n- Enh #5806: Allow `Html::encode()` to be used when the application is not started (qiangxue)\n- Enh #5954: `yii message` command now shows user friendly error if it's not able to parse source file (samdark)\n- Enh #5983: Added `yii\\helpers\\Inflector::sentence()` (pana1990, qiangxue)\n- Enh #6113: Improved debugger configuration and request UI (schmunk42)\n- Enh #6207: Added support for truncating HTML strings using `StringHelper::truncate()` and `StringHelper::truncateWords()` (Alex-Code)\n- Enh #6318: Made widgets more error-tolerant and user-friendly when certain option values are null (qiangxue)\n- Enh: `Console::confirm()` now uses `Console::stdout()` instead of `echo` to be consistent with all other functions (cebe)\n- Enh: `yii\\rbac\\DbManager` migration now uses database component specified in component settings instead of always using default `db` (samdark)\n- Enh: Added `yii\\base\\Controller::renderContent()` (qiangxue)\n- Enh: `yii fixture` command now offers help if no arguments are provided instead of crashing (samdark)\n- Chg #3630: `yii\\db\\Command::queryInternal()` is now protected (samdark)\n- Chg #4277: `yii\\grid\\GridView` is no longer throwing an exception when results are empty and `columns` aren't defined (samdark)\n- Chg #5508: Dropped the support for the `--append` option for the `fixture` command (qiangxue)\n- Chg #5874: Upgraded Twitter Bootstrap to 3.3.x (samdark)\n\n\n### Apidoc Extension (yii2-apidoc)\n\n- Bug #5623: Fixed crash when a class contains a setter that has no arguments e.g. `setXyz()` (cebe)\n- Bug #5899: Incorrect class listed as `definedBy` reference for properties (cebe)\n- Bug: Guide and API renderer now work with relative paths/URLs (cebe)\n- Enh: Guide generator now skips `images` directory if it does not exist instead of throwing an error (cebe)\n- Enh: Made `--guidePrefix` option available as a command line option (cebe)\n\n\n### Authclient Extension (yii2-authclient)\n\n- Bug #6000: Fixed CCS for `yii\\authclient\\widgets\\AuthChoice` does not loaded if `popupMode` disabled (klimov-paul)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- Bug #5570: `yii\\bootstrap\\Tabs` would throw an exception if `content` is not set for one of its `items` (RomeroMsk)\n- Bug #6150: `yii\\bootstrap\\Tabs` dropdown IDs were generated incorrectly (samdark)\n- Enh #4146: Added `yii\\bootstrap\\ButtonDropdown::$containerOptions` (samdark)\n- Enh #4181: Added `yii\\bootstrap\\Modal::$headerOptions` and `yii\\bootstrap\\Modal::$footerOptions` (tuxoff, samdark)\n- Enh #4450: Added `yii\\bootstrap\\Nav::renderDropdown()` (qiangxue)\n- Enh #5494: Added support for specifying a menu header as a configuration array in `yii\\bootstrap\\Dropdown` (hiltonjanfield, qiangxue)\n- Enh #5735: Added `yii\\bootstrap\\Tabs::renderTabContent` to support manually rendering tab contents (RomeroMsk)\n- Enh #5799: `yii\\bootstrap\\ButtonGroup::buttons` can take all options that are supported by `yii\\bootstrap\\Button` (aleksanderd)\n- Chg #5874: Upgraded Twitter Bootstrap to 3.3.x (samdark)\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #5402: Debugger was not loading when there were closures in asset classes (samdark)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Enh #5600: Allow configuring debug panels in `yii\\debug\\Module::panels` as panel class name strings (qiangxue)\n- Enh #6113: Improved configuration and request UI (schmunk42)\n- Enh: Made `DefaultController::getManifest()` more robust against corrupt files (cebe)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- Bug #5662: Elasticsearch AR updateCounters() now uses explicitly `groovy` script for updating making it compatible with ES >1.3.0 (cebe)\n- Bug #6065: `ActiveRecord::unlink()` was failing in some situations when working with relations via array valued attributes (cebe)\n- Enh #5758: Allow passing custom options to `ActiveRecord::update()` and `::delete()` including support for routing needed for updating records with parent relation (cebe)\n- Enh: Add support for optimistic locking (cebe)\n\n\n### Gii Extension (yii2-gii)\n\n- Bug #5070: Gii controller generator should use controller class name instead of controller ID to specify new controller (qiangxue)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Bug #6367: Added `yii\\gii\\generators\\crud\\Generator` to support customizing view path for the generated CRUD controller (qiangxue)\n- Bug: Gii console command help information does not contain global options (qiangxue)\n- Enh #5613: Added `--overwrite` option to Gii console command to support overwriting all files (motin, qiangxue)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #6026: Fixed `yii\\mongodb\\ActiveRecord` saves `null` as `_id`, if attributes are empty (klimov-paul)\n- Enh #3855: Added debug toolbar panel for MongoDB (klimov-paul)\n- Enh #5592: Added support for 'findAndModify' operation at `yii\\mongodb\\Query` and `yii\\mongodb\\ActiveQuery` (klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- Bug #4745: value of simple string returns was ignored by redis client and `true` is returned instead, now only `OK` will result in a `true` while all other values are returned as is (cebe)\n- Enh #3714: Added support for connecting to redis server using a unix socket (savvot, robregonm)\n\n\n### Smarty Extension (yii2-smarty)\n\n- Bug #5748: `{path` was generating absolute URLs instead of relative ones (samdark, motzel)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #5601: Simple conditions in `yii\\sphinx\\Query::where()`` and `yii\\sphinx\\ActiveQuery::where()` did not allow `yii\\db\\Expression` to be used as the value (cebe, stevekr)\n- Bug #5634: Fixed `yii\\sphinx\\QueryBuilder` does not support comparison operators (>,<,>= etc) in where specification (klimov-paul)\n- Bug #6164: Added missing support for `yii\\db\\Exression` to QueryBuilder `LIKE` conditions (cebe)\n- Enh #5223: Query builder now supports selecting sub-queries as columns (qiangxue)\n\n\n2.0.0 October 12, 2014\n----------------------\n\n- Bug #4881: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs on Windows (klimov-paul)\n- Bug #5171: Fixed the bug that ActiveForm + Pjax submit event is only triggered once (qiangxue)\n- Bug #5242: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs in case target file localed at `yii\\web\\AssetManager::basePath` root (klimov-paul)\n- Bug #5252: Null values are not properly handled by `RangeValidator` (githubjeka, qiangxue)\n- Bug #5260: `yii\\i18n\\Formatter::decimalSeparator` and `yii\\i18n\\Formatter::thousandSeparator` where not configurable when intl is not installed (execut, cebe)\n- Bug #5314: Fixed typo in the implementation of `yii\\web\\Session::getHasSessionId()` (qiangxue)\n- Bug #5323: Nested dropdown does not work for `yii\\bootstrap\\DropDown` (aryraditya)\n- Bug #5336: `yii\\bootstrap\\DropDown` should register bootstrap plugin asset (zelenin)\n- Bug #5379: `yii\\base\\Module::afterAction()` was called even when `beforeAction()` returned false (cebe)\n- Bug #5408: Gii console command incorrectly reports errors when there is actually no error (qiangxue)\n- Bug #5423: `yii\\behaviors\\Cors` causes \"undefined index\" error when its `cors` is configured (qiangxue)\n- Bug #5424: `yii\\helpers\\Html::addCssStyle()` wasn't correctly setting style passed in array (kartik-v, samdark)\n- Bug #5435: Added extra checks to `yii\\rbac\\DbManager` to prevent database exceptions when `$userId` is empty (samdark)\n- Bug #5484: Fixed potential string suffix detection failure on 5.5.11 (qiangxue)\n- Bug: Date and time formatting now assumes UTC as the timezone for input dates unless a timezone is explicitly given (cebe)\n- Enh #4040: Added `$viewFile` and `$params` to the `EVENT_BEFORE_RENDER` and `EVENT_AFTER_RENDER` events for `View` (qiangxue)\n- Enh #4275: Added `removeChildren()` to `yii\\rbac\\ManagerInterface` and implementations (samdark)\n- Enh: Added `yii\\base\\Application::loadedModules` (qiangxue)\n- Enh #5316: Added `startsWith()` and `endsWith()` to `yii\\helpers\\StringHelper`. Methods are binary-safe, multibyte-safe and optionally case-insensitive (armab)\n- Enh #5467: Added ability to pass HTML tag options to `asEmail()`, `asImage()` and `asUrl()` methods of `yii\\i18n\\Formatter` (alxkolm, samdark)\n- Chg #2037: Dropped the support for using `yii\\base\\Module` as concrete module classes (qiangxue)\n- Chg: Updated cebe/markdown to 1.0.0 which includes breaking changes in its internal API (cebe)\n- Chg: If you are using CUBRID DBMS, make sure to use at least version 9.3.0 because quoting is broken in prior versions and Yii has no reliable way to work around this issue (cebe)\n\n\n2.0.0-rc September 27, 2014\n---------------------------\n\n- Bug #1263: Fixed the issue that Gii and Debug modules might be affected by incompatible asset manager configuration (qiangxue)\n- Bug #2314: Gii model generator does not generate correct relation type in some special case (qiangxue)\n- Bug #2563: Theming is not working if the path map of the theme contains \"..\" or \".\" in the paths (qiangxue)\n- Bug #2801: Fixed the issue that GridView gets footer content before data cells content (ElisDN)\n- Bug #2821: Console help command incorrectly lists non-console controllers as available commands (qiangxue)\n- Bug #2853: ActiveRecord did not handle resource-typed columns well (chris68, qiangxue)\n- Bug #3042: `yii\\widgets\\Pjax` should end application right after it finishes responding to a pjax request (qiangxue)\n- Bug #3066: `yii\\db\\mssql\\Schema::getTableSchema()` should return null when the table does not exist (qiangxue)\n- Bug #3091: Fixed inconsistent treatment of `Widget::run()` when a widget is used as a container and as a self-contained object (qiangxue)\n- Bug #3118: Ensure client validation has the same behavior as server side validation for number validator (cebe)\n- Bug #3121: `yii\\base\\Application::bootstrap` may fail to load some components if they are specified as class names (qiangxue)\n- Bug #3125: `yii\\console\\controllers\\AssetController` now respects data URL resources (klimov-paul)\n- Bug #3128: Fixed the bug that `defaultRoles` set in RBAC manager was not working as specified (qiangxue)\n- Bug #3153: Fixed the bug that using \"between\" operator to build a SQL query will cause a PHP notice (gonimar)\n- Bug #3184: Fixed the bug that client validation for string length comparison did not set error message correctly (Sergeygithub)\n- Bug #3194: Date formatter works only for timestamps in the year range 1970 to 2038 (kartik-v)\n- Bug #3197: Using `yii\\db\\ActiveQuery::indexBy()` may cause relational AR queries to generate incorrect relational results (qiangxue)\n- Bug #3204: `yii\\di\\Container` did not handle the `$config` parameter well in case when it does not have a default value (qiangxue)\n- Bug #3216: Fixed the bug that `yii.activeForm.destroy()` did not remove `submit` event handlers (qiangxue)\n- Bug #3233: Ensure consistent behavior in `yii\\db\\ActiveRecord::afterSave()`` (cebe, qiangxue)\n- Bug #3236: Return value for `DateTime->format('U')`` casted to double to allow correct date formatting (pgaultier)\n- Bug #3268: Fixed the bug that the schema name in a table name was not respected by `yii\\db\\mysql\\Schema` (terazoid, qiangxue)\n- Bug #3311: Fixed the bug that `yii\\di\\Container::has()` did not return correct value (mgrechanik, qiangxue)\n- Bug #3327: Fixed \"Unable to find debug data\" when logging objects with circular references (jarekkozak, samdark)\n- Bug #3368: Fix for comparing numeric attributes in JavaScript (technixp)\n- Bug #3393: Fix `yii\\helpers\\FileHelper::copyDirectory()` pattern not working (klimov-paul)\n- Bug #3431: Allow using extended `yii\\base\\ErrorHandler` class from the app namespace (cebe)\n- Bug #3436: Fixed the issue that `yii\\di\\ServiceLocator` still returns the old component after calling `set()` with a new definition (qiangxue)\n- Bug #3458: Fixed the bug that the image rendered by `CaptchaAction` was using a wrong content type (MDMunir, qiangxue)\n- Bug #3473: Allow postgreSQL to specify timestamp precision via abstract types in `yii\\db\\QueryBuilder` (cebe)\n- Bug #3478: Fixed `yii\\console\\Controller::select()` accept empty input as '0' value (lynicidn)\n- Bug #3522: Fixed `yii\\helpers\\FileHelper::normalizePath()` to allow a (.) for the current path. (skotos)\n- Bug #3548: Fixed the bug that X-Rate-Limit-Remaining header is always zero when using RateLimiter (qiangxue)\n- Bug #3559: Use native support for batchInsert in SQLite versions >= 3.7.11 and avoid limitations of the fallback (cebe)\n- Bug #3564: Fixed the bug that primary key columns should not take default values from schema (qiangxue)\n- Bug #3567: Fixed the bug that smallint was treated as string for PostgreSQL (qiangxue)\n- Bug #3568: When the primary query sets `asArray`, it is not respected by the `via` relational query (qiangxue)\n- Bug #3578: Fixed postgreSQL column type detection, added missing types (MDMunir, cebe)\n- Bug #3583: Added typecast to auto value of primary key on insert of sql active record (cebe)\n- Bug #3591: Fixed incomplete obsolete filling in i18n `MessageController::saveMessagesToDb()` (advsm)\n- Bug #3601: Fixed the bug that the refresh URL was not generated correctly by `Captcha` (qiangxue, klevron)\n- Bug #3638: `yii\\filters\\HttpCache` does not work as expected when session is started before the filter (qiangxue)\n- Bug #3681: Fixed problem with AR::findOne() when a default scope joins another table so that PK name becomes ambigous (cebe)\n- Bug #3715: Fixed the bug that using a custom pager/sorter with `GridView` may generate two different pagers/sorters if the layout configures two pagers/sorters (qiangxue)\n- Bug #3716: `yii\\base\\DynamicModel::validateData()` does not call `validate()` if the `$rules` parameter is empty (qiangxue)\n- Bug #3725: Fixed the bug that the filtering condition used in relation definition was ignored when calling `ActiveRecord::unlinkAll()`. (qiangxue, cebe)\n- Bug #3738: `yii\\widgets\\ActiveField` custom error selector not functioning (qiangxue)\n- Bug #3751: Fixed postgreSQL schema data for enum values, do not add values if there are none (makroxyz)\n- Bug #3752: `QueryBuilder::batchInsert()` does not typecast input values (qiangxue)\n- Bug #3756: Fix number formatting error for `yii\\base\\Formatter` by converting strings to float (kartik-v)\n- Bug #3772: Behaviors adding validation rules do not work as expected (qiangxue)\n- Bug #3817: `yii\\rbac\\PhpManager::getChildren()` returns null instead of expected empty array (qiangxue)\n- Bug #3843: Fixed Menu bug when using `template` with `encodeLabel` => false (creocoder, umneeq)\n- Bug #3863: Fixed incorrect js selector for `yii\\widgets\\ActiveForm::errorSummaryCssClass` when it contains multiple classes (creocoder, umneeq)\n- Bug #3893: Headers did not overwrite default setting by webserver (cebe)\n- Bug #3909: `yii\\helpers\\Html::to()` should not prefix base URL to URLs that already contain scheme (qiangxue)\n- Bug #3920: Fixed issue with loading default values of PostgreSQL boolean columns (cebe)\n- Bug #3934: `yii.handleAction()` in `yii.js` does not correctly detect if a hyperlink contains useful URL or not (joni-jones, qiangxue)\n- Bug #3968: Messages logged in shutdown functions are not handled (qiangxue)\n- Bug #3989: Fixed `yii\\log\\FileTarget::rotateByCopy` to avoid any rename (cebe)\n- Bug #3996: Traversing `Yii::$app->session` may cause a PHP error (qiangxue)\n- Bug #4020: OCI column detection did not work so gii and other things failed (Sanya1991)\n- Bug #4105: `yii\\helpers\\Html::dropDownlist()` options encodeSpaces was not applied to subgroups (MDMunir)\n- Bug #4123: Trace level in logger had no effect in Targets, traces where not logged (cebe)\n- Bug #4127: `yii\\captcha\\CaptchaValidator` clientside error message wasn't formed properly (samdark)\n- Bug #4162: Fixed bug where schema name was not used in `SHOW CREATE TABLE` query in `yii\\db\\mysql\\Schema` (stevekr)\n- Bug #4241: `yii\\widgets\\Pjax` was incorrectly setting container id (mitalcoi)\n- Bug #4254: `SqlDataProvider` does not work with Oracle and SQL Server (qiangxue, miramir)\n- Bug #4276: Added check for UPLOAD_ERR_NO_FILE in `yii\\web\\UploadedFile` and return null if no file was uploaded (OmgDef)\n- Bug #4342: mssql (dblib) driver does not support getting attributes (tof06)\n- Bug #4371: Active form client validation wasn't working in case of two models having same named fields (abrahamy)\n- Bug #4409: Upper case letters in subdirectory prefixes of controller IDs were not properly handled (qiangxue)\n- Bug #4412: Formatter used SI Prefixes for base 1024, now uses binary prefixes (kmindi)\n- Bug #4427: Formatter could do one division too much (kmindi)\n- Bug #4453: `yii message/extract` wasn't properly writing to po files in case of multiple categories (samdark)\n- Bug #4469: Make `yii\\base\\Security::compareString()` timing depend only on length of `$actual` input and add unit test. (tom--)\n- Bug #4470: Avoid endless loop when exporting logs with low values of flushInterval and eportInterval (cebe)\n- Bug #4497: Fixed `yii\\helpers\\StringHelper::byteSubstr()`` returning empty string on null $length param (mbman)\n- Bug #4514: Fixed Request class crashing when empty CSRF token value is sent in cookie (cebe)\n- Bug #4519: `yii\\base\\Model::isAttributeRequired()` should check if the `when` option of the validator is set (thiagotalma)\n- Bug #4592: Fixed `yii help` command was listing incorrect action names for methods like `actionSayNO` (samdark)\n- Bug #4654: Fixed issue with PostgreSQL and inserting boolean values with batch insert (cebe)\n- Bug #4672: Fixed issue with PostgreSQL handling of boolean values in queries, dropped support for using boolean value for integer columns (cebe)\n- Bug #4727: Fixed wrong Stylus definition in `yii\\web\\AssetConverter` (samdark)\n- Bug #4755: `yii\\test\\BaseActiveFixture::unload()` does not clean up the internal cached data (qiangxue)\n- Bug #4813: Fixed MSSQL schema that was getting incorrect info about constraints (samdark, SerjRamone, o-rey)\n- Bug #4880: Return value of yii\\web\\Request::getPrefferedLanguage() was a normalized value instead of a valid language value from the input array (cebe)\n- Bug #4905: ActiveForm::$validationDelay doesn't delay after keyrelease when $validateOnType=true (qiangxue)\n- Bug #4920: `yii\\filters\\auth\\CompositeAuth` should not trigger error as long as one of the methods succeeds (qiangxue)\n- Bug #4926: Fixed `yii\\console\\controllers\\MessageController` handles category name containing dot incorrectly (klimov-paul)\n- Bug #4938: When `yii\\db\\ActiveQuery` is used to build sub-queries, its WHERE clause is not correctly generated (qiangxue)\n- Bug #4954: MSSQL column comments are not retrieved correctly (SerjRamone)\n- Bug #4970: `joinWith()` called by a relation was ignored by `yii\\db\\ActiveQuery` (stepanselyuk)\n- Bug #5001: `yii\\rest\\CreateAction`, `yii\\rest\\UpdateAction` and `yii\\rest\\DeleteAction` should throw 500 error if the model operation returns false without validation errors (qiangxue)\n- Bug #5039: `UniqueValidator` and `ExistValidator` did not respect query conditions added by default scope (qiangxue)\n- Bug #5049: `yii\\widgets\\ActiveForm::validationDelay` should be applied to user types only (qiangxue)\n- Bug #5055: Fixed `yii\\console\\controllers\\CacheController` does not check if cache component instance of 'yii\\caching\\Cache' (klimov-paul)\n- Bug #5126: Fixed text body and charset not being set for multipart mail (nkovacs)\n- Bug: Fixed inconsistent return of `yii\\console\\Application::runAction()` (samdark)\n- Bug: URL encoding for the route parameter added to `yii\\web\\UrlManager` (klimov-paul)\n- Bug: Fixed the bug that requesting protected or private action methods would cause 500 error instead of 404 (qiangxue)\n- Bug: Fixed Object of class Imagick could not be converted to string in `yii\\captcha\\CaptchaAction` (eXprojects, cebe)\n- Bug: Fixed wrong behavior of `yii\\helpers\\StringHelper::byteSubstr()` in some edge cases (cebe)\n- Enh #87: Helper `yii\\helpers\\Security` converted into application component, cryptographic strength improved (klimov-paul)\n- Enh #422: Added Support for BIT(M) data type default values in Schema (cebe)\n- Enh #1160: Added $strict parameter to `yii\\helpers\\Inflector::camel2id()` to handle consecutive uppercase chars (schmunk)\n- Enh #1249: Added support for Active Record relation via array attributes (klimov-paul, cebe)\n- Enh #1388: Added mapping from physical types to abstract types for OCI DB driver (qiangxue)\n- Enh #1452: Added `yii\\base\\Module::getInstance()` to allow accessing the module instance from anywhere within the module (qiangxue)\n- Enh #2264: `yii\\web\\CookieCollection::has()` will return false for expired or removed cookies (qiangxue)\n- Enh #2315: Any operator now could be used with `yii\\db\\Query::where()` operand format (samdark)\n- Ehn #2380: Added `yii\\widgets\\ActiveForm::enableClientScript` to support turning on and off client side script generation (qiangxue)\n- Enh #2435: `yii\\db\\IntegrityException` is now thrown on database integrity errors instead of general `yii\\db\\Exception` (samdark)\n- Enh #2558: Enhanced support for memcached by adding `yii\\caching\\MemCache::persistentId` and `yii\\caching\\MemCache::options` (qiangxue)\n- Enh #2837: Error page now shows arguments in stack trace method calls (samdark)\n- Enh #2906: Added support for using conditional comments for js and css files registered through asset bundles and `yii\\helpers\\Html` helper (exromany, qiangxue)\n- Enh #2942: Added truncate and truncateWord methods (Alex-Code, samdark)\n- Enh #3008: Added `yii\\helpers\\Html::errorSummary()` (qiangxue)\n- Enh #3088: The debug and gii modules will manage their own URL rules now (hiltonjanfield, qiangxue)\n- Enh #3101: Improved handling of log target failures. It will now skip target and log reason instead of going into infinite cycle (samdark)\n- Enh #3103: debugger panel is now not displayed when printing a page (githubjeka)\n- Enh #3108: Added `yii\\debug\\Module::enableDebugLogs` to disable logging debug logs by default (qiangxue)\n- Enh #3132: `yii\\rbac\\PhpManager` now supports more compact data file format (qiangxue)\n- Enh #3154: Added validation error display for `GridView` filters (ivan-kolmychek)\n- Enh #3177: `yii\\filters\\auth\\CompositeAuth` will send out challenges from all auth methods (qiangxue)\n- Enh #3196: Masked input upgraded to use jquery.inputmask plugin with more features. (kartik-v)\n- Enh #3220: Added support for setting transaction isolation levels (cebe)\n- Enh #3221: Added events for DB transaction commit/rollback (drcypher, qiangxue)\n- Enh #3222: Added `useTablePrefix` option to the model generator for Gii (horizons2)\n- Enh #3230: Added `yii\\filters\\AccessControl::user` to support access control with different actors (qiangxue)\n- Enh #3232: Added `export()` and `exportAsString()` methods to `yii\\helpers\\BaseVarDumper` (klimov-paul)\n- Enh #3240: Added support for assigning an anonymous function to `yii\\widgets\\ActiveForm::fieldConfig` (qiangxue)\n- Enh #3244: Allow logging complex data such as arrays and object via the log system (cebe)\n- Enh #3252: Added support for case insensitive matching using ILIKE to PostgreSQL QueryBuilder (cebe)\n- Enh #3280: Support dynamically attaching anonymous behaviors (qiangxue)\n- Enh #3283: Added `$checkAjax` to `yii\\web\\User::loginRequired()` (qiangxue)\n- Enh #3284: Added support for checking multiple ETags by `yii\\filters\\HttpCache` (qiangxue)\n- Enh #3298: Supported configuring `View::theme` using a class name (netyum, qiangxue)\n- Enh #3328: `yii\\mail\\BaseMailer` generates better text body from html body (armab)\n- Enh #3380: Allow `value` in `defaultValueValidator` to be a closure (Alex-Code)\n- Enh #3384: Added callback-style transactions (leandrogehlen, Ragazzo, samdark)\n- Enh #3399, #3241: Added support for MS SQL Server older than 2012 (fourteenmeister, samdark)\n- Enh #3410: `yii.activeForm.js` now supports adding/removing fields dynamically (qiangxue)\n- Enh #3459: Added logging of errors, which may occur at `yii\\caching\\FileCache::gc()` (klimov-paul)\n- Enh #3472: Added configurable option to encode spaces in dropDownLists and listBoxes (kartik-v)\n- Enh #3518: `yii\\helpers\\Html::encode()` now replaces invalid code sequences with \"\ufffd\" (DaSourcerer)\n- Enh #3520: Added `unlinkAll()` method to active record to remove all records of a model relation (NmDimas, samdark, cebe)\n- Enh #3521: Added `yii\\filters\\HttpCache::sessionCacheLimiter` (qiangxue)\n- Enh #3542: Removed requirement to specify `extensions` in application config (samdark)\n- Enh #3562: Adding rotateByCopy to `yii\\log\\FileTarget` (pawzar)\n- Enh #3574: Add integrity check support for SQLite (zeeke)\n- Enh #3581: Added `yii\\validators\\CompareValidator::type` to support type conversion before comparing values (qiangxue)\n- Enh #3597: Nested array support for HTML5 custom `data-*` attributes (armab)\n- Enh #3607: Added support for limit in migrations actions: history, new, redo (Ragazzo)\n- Enh #3631: Added property `currencyCode` to `yii\\i18n\\Formatter` (leandrogehlen)\n- Enh #3636: Hide menu container tag with empty items in `yii\\widgets\\Menu` (arturf)\n- Enh #3643: Improved Mime-Type detection by using the `mime.types` file from apache http project to dected mime types by file extension (cebe, pavel-voronin, trejder)\n- Enh #3765: Added `yii\\web\\User::enableSession` to support authentication without using session (qiangxue)\n- Enh #3708: Added database replication and automatic read-write splitting support for `yii\\db\\Connection` (qiangxue)\n- Enh #3773: Added `yii\\validators\\FileValidator::mimeTypes` to support validating MIME types of files (Ragazzo)\n- Enh #3774: Added `yii\\validators\\FileValidator::checkExtensionByMimeType` to support validating file types against file mime-types (Ragazzo)\n- Enh #3801: Base migration controller `yii\\console\\controllers\\BaseMigrateController` extracted (klimov-paul)\n- Enh #3811: Now Gii model generator makes autocomplete for model class field (mitalcoi)\n- Enh #3926: `yii\\widgets\\Breadcrumbs::$links`. Allows individual link to have its own `template` (creocoder, umneeq)\n- Enh #3939: `yii\\helpers\\Inflector::slug()` improvements (samdark)\n    - Added protected `yii\\helpers\\Inflector::transliterate()` that could be replaced with custom translit implementation.\n    - Added proper tests for both intl-based slug and PHP fallback.\n    - Removed character maps for non-latin languages.\n    - Improved overall slug results.\n    - Added note about the fact that intl is required for non-latin languages to requirements checker.\n- Enh #3957: Added more straightforward configurable properties to `yii\\behaviors\\BlameableBehavior`, `yii\\behaviors\\SluggableBehavior` and `yii\\behaviors\\TimestampBehavior` (creocoder)\n- Enh #3992: In mail layouts you can now access the message object via `$message` variable (qiangxue)\n- Enh #4028: Added ability to `yii\\widgets\\Menu` to encode each item's label separately (creocoder, umneeq)\n- Enh #4048: Added `init` event to `yii\\bd\\ActiveQuery` classes (qiangxue)\n- Enh #4072: `yii\\rbac\\PhpManager` adjustments (samdark)\n    - Data is now stored in three separate files for items, assignments and rules. File format is simpler.\n    - Removed `authFile`. Added `itemFile`, `assignmentFile` and `ruleFile`.\n    - `createdAt` and `updatedAt` are now properly filled with corresponding file modification time.\n    - `save()` and `load()` are now protected instead of public.\n    - Added unit test for saving and loading data.\n- Enh #4080: Added proper handling and support of the symlinked directories in `yii\\helpers\\FileHelper`, added $options parameter in `yii\\helpers\\FileHelper::removeDirectory()` (resurtm)\n- Enh #4086: `changedAttributes` of `afterSave` Event now contain old values (dizews)\n- Enh #4114: Added `yii\\helpers\\Security::generateRandomBytes()`, improved tests (samdark)\n- Enh #4122: `yii\\helpers\\Html::error()` and `yii\\helpers\\Html::errorSummary()` are now accepting `encode` option. If set to false it prevents encoding of error messages (samdark)\n- Enh #4131: Security adjustments (tom--)\n     - Added HKDF to `yii\\base\\Security`.\n     - Reverted auto fallback to PHP PBKDF2.\n     - Fixed PBKDF2 key truncation.\n     - Adjusted API.\n- Enh #4209: Added `beforeCopy`, `afterCopy`, `forceCopy` properties to `yii\\web\\AssetManager` (cebe)\n- Enh #4225: Added `yii\\widgets\\ActiveForm::validateOnBlur` and `yii\\widgets\\ActiveField::validateOnBlur` (qiangxue)\n- Enh #4297: Added check for DOM extension to requirements (samdark)\n- Enh #4317: Added `absoluteAuthTimeout` to `yii\\web\\User` (ivokund, nkovacs)\n- Enh #4360: Added client validation support for file validator (Skysplit)\n- Enh #4372: `yii\\filters\\HttpCache` failed to comply to RFC 7232 (DaSourcerer)\n- Enh #4424: Added `inline` parameter to `yii\\web\\Response::xSendFile()` (klimov-paul)\n- Enh #4436: Added callback functions to AJAX-based form validation (thiagotalma)\n- Enh #4485: Added support for deferred validation in `yii\\widgets\\ActiveForm` (Alex-Code)\n- Enh #4520: Added sasl support to `yii\\caching\\MemCache` (xjflyttp)\n- Enh #4566: Added client validation support for image validator (Skysplit, qiangxue)\n- Enh #4581: Added ability to disable url encoding in `yii\\web\\UrlRule` (tadaszelvys)\n- Enh #4602: Added $key param in `yii\\grid\\ActionColumn` buttons Closure call (disem)\n- Enh #4607: AR model will throw an exception if it does not have a primary key to avoid updating/deleting data massively (qiangxue)\n- Enh #4630: Added automatic generating of unique slug value to `yii\\behaviors\\Sluggable` (klimov-paul)\n- Enh #4636: Added `yii\\web\\Response::setDownloadHeaders()` (pawzar)\n- Enh #4644: Added `yii\\db\\Schema::createColumnSchema()` to be able to customize column schema used (mcd-php)\n- Enh #4656: HtmlPurifier helper config can now be a closure to change the purifier config object after it was created (Alex-Code)\n- Enh #4062: Added 'caseSensitive' option to `yii\\helpers\\BaseFileHelper::findFiles()` (klimov-paul)\n- Enh #4691: Encoding on `yii\\widgets\\ActiveForm` and `yii\\widgets\\ActiveField` validation errors is now configurable (Alex-Code)\n- Enh #4740: Added `yii\\web\\Session::addFlash()` (restyler)\n- Enh #4897: Added `yii\\helpers\\FileHelper::mimeMagicFile` (qiangxue)\n- Enh #5058: Added `$pageSize` parameter to `yii\\data\\Pagination::createUrl()` to allow creating URLs with arbitrary page sizes (cdcchen, qiangxue)\n- Enh #5089: Added asset debugger panel (arturf, qiangxue)\n- Enh #5117: Added `beforeFilter` and `afterFilter` JS events to `GridView` (kartik-v)\n- Enh #5124: Added support to prevent duplicated form submission when using `yii\\widgets\\ActiveForm` (qiangxue)\n- Enh #5131: Added `$autoRenew` parameter to `yii\\web\\User::getIdentity()` (qiangxue)\n- Enh #5164: Added `yii\\helpers\\Inlfector::$transliterator` that can be used to customize intl transliteration (zinzinday)\n- Enh: Added support for using sub-queries when building a DB query with `IN` condition (qiangxue)\n- Enh: Supported adding a new response formatter without the need to reconfigure existing formatters (qiangxue)\n- Enh: Added `yii\\web\\UrlManager::addRules()` to simplify adding new URL rules (qiangxue)\n- Enh: Added support to insert an event handler at the beginning of class-level event handler queue (qiangxue)\n- Enh: Added `yii\\console\\Controller::EXIT_CODE_NORMAL` and `yii\\console\\Controller::EXIT_CODE_ERROR` constants (samdark)\n- Enh: `yii\\console\\MigrateController` now returns `yii\\console\\Controller::EXIT_CODE_ERROR` in case of failed migration (samdark)\n- Enh: Added method `yii\\base\\ErrorHandler::unregister()`` for unregistering the ErrorHandler (cebe)\n- Enh: Added `all` option to `yii\\console\\controllers\\MigrateController::actionDown()` action (creocoder, umneeq)\n- Enh: Added support for array attributes in `exist` validator (creocoder)\n- Enh: Added support for using path alias with `FileDependency::fileName` (qiangxue)\n- Enh: Added param `hideOnSinglePage` to `yii\\widgets\\LinkPager` (arturf)\n- Enh: Added support for array attributes in `in` validator (creocoder)\n- Enh: Improved `yii\\helpers\\Inflector::slug()` to support more cases for Russian, Hebrew and special characters (samdark)\n- Enh: ListView now uses the widget ID in the base tag, consistent to gridview (cebe)\n- Enh: Added `yii\\web\\Response::enableCsrfCookie` to support storing CSRF tokens in session (qiangxue)\n- Chg #2287: Split `yii\\db\\ColumnSchema::typecast()` into two methods `phpTypecast()` and `dbTypecast()` to allow specifying PDO type explicitly (cebe)\n- Chg #2359: Refactored formatter class. One class with or without intl extension and PHP format pattern as standard (Erik_r, cebe)\n   - `yii\\base\\Formatter` functionality has been merged into `yii\\i18n\\Formatter`\n   - removed the `yii\\base\\Formatter` class\n- Chg #1551: Refactored `yii\\validators\\DateValidator `to support ICU date format and use the format defined in `yii\\i18n\\Formatter` by default (cebe)\n- Chg #2898: `yii\\console\\controllers\\AssetController` is now using hashes instead of timestamps (samdark)\n- Chg #2913: RBAC `yii\\rbac\\DbManager` is now initialized via migration (samdark)\n- Chg #2914: `yii\\widgets\\ActiveForm::fieldConfig` will be merged recursively with the `$options` parameter in `yii\\widgets\\ActiveForm::field()` (qiangxue)\n- Chg #3036: Upgraded Twitter Bootstrap to 3.1.x (qiangxue)\n- Chg #3175: `yii\\base\\InvalidCallException`, `yii\\base\\InvalidParamException`, `yii\\base\\UnknownMethodException` are now extended from SPL `BadMethodCallException` (samdark)\n- Chg #3358: Removed automatic CSRF meta tag generation by `View`. Added `yii\\helpers\\Html::csrfMetaTags()` and its call to main layout files (qiangxue)\n- Chg #3383: Added `$type` parameter to `IdentityInterface::findIdentityByAccessToken()` (qiangxue)\n- Chg #3511: Dropped `yii.allowAction()` and modified `yii.confirm()` in `yii.js` to support callbacks (tanakahisateru)\n- Chg #3531: `yii\\grid\\GridView` now allows any character (except \":\") in the attribute part of the shorthand syntax for columns (rawtaz)\n- Chg #3544: Added `$key` as a parameter to the callable specified via `yii\\grid\\DataColumn::value` (mdmunir)\n- Chg #3611: Query caching is refactored. (qiangxue)\n    - `yii\\db\\Connection::beginCache()` and `endCache()` are removed.\n    - Added `yii\\db\\Connection::cache()` and `noCache()`.\n    - Added `Command::cache()` and `noCache()`.\n    - `yii\\db\\Connection::queryCacheDuration` is now used as a default cache duration parameter.\n- Chg #3640: All cookies are now httpOnly by default in order to increase overall security (samdark)\n- Chg #3687: Default `sourceLanguage` and `language` are now `en-US` in order for i18n formatter to work correctly (samdark)\n- Chg #3804: Added `fileinfo` PHP extension to the basic requirement of Yii (Ragazzo)\n- Chg #3866: The `yii\\validators\\FileValidator::types` property is renamed to `yii\\validators\\FileValidator::extensions` (Ragazzo)\n- Chg #3897: Raised visibility of `yii\\web\\View::registerAssetFiles()` to protected (samdark)\n- Chg #3899: Moved `MailEvent` class to `yii\\mail` namespace (cebe)\n- Chg #3910: Removed the `container` option from `yii\\helpers\\Html::checkbox()` and `yii\\helpers\\Html::radio()` (creocoder)\n- Chg #3956: Flash messages set via `Yii::$app->session->setFlash()` will be removed only if they are accessed (qiangxue)\n- Chg #3989: The default value for `yii\\log\\FileTarget::$rotateByCopy` now defaults to true to work on windows by default (cebe)\n- Chg #4051: Renamed `yii\\caching\\GroupDependency` to `TagDependency` and added support for associating multiple tags to a single cached data item (qiangxue)\n- Chg #4071: `mail` component renamed to `mailer`, `yii\\log\\EmailTarget::$mail` renamed to `yii\\log\\EmailTarget::$mailer` (samdark)\n- Chg #4147: `yii\\mail\\BaseMailer::compose()` will not overwrite the `message` parameter if it is explicitly provided (qiangxue)\n- Chg #4188: API exceptions are now exposing less data when YII_DEBUG is false (samdark)\n- Chg #4201: change default value of `SyslogTarget::facility` from `LOG_SYSLOG` to `LOG_USER` (dizews)\n- Chg #4211: `yii\\db\\BaseActiveRecord::populateRecord()` now silently hide selected columns that are not defined in AR instead of failing with an error (miramir)\n- Chg #4227: `yii\\widgets\\LinkPager::hideOnSinglePage` is now `true` by default (samdark)\n- Chg #4310: Removed `$data` from signature of `yii\\rbac\\ManagerInterface` (samdark)\n- Chg #4318: `yii\\helpers\\Html::ul()` and `ol()` will return an empty list tag if an empty item array is given (qiangxue)\n- Chg #4331: `yii\\helpers\\Url` now uses `UrlManager` to determine base URL when generating URLs (qiangxue)\n- Chg #4424: Added `inline` and `mimeType` options to all file downloading methods provided in `yii\\web\\Response` (qiangxue)\n- Chg #4454: Improved asset bundle managed and used composer-asset-plugin to manage the dependencies on 3rd-party JS libraries (qiangxue)\n- Chg #4501: Renamed the constant `YII_PATH` to `YII2_PATH` (qiangxue)\n- Chg #4586: Signed bigint and unsigned int will be converted into integers when they are loaded from DB by AR (qiangxue)\n- Chg #4591: `yii\\helpers\\Url::to()` will no longer prefix relative URLs with the base URL (qiangxue)\n- Chg #4595: `yii\\widgets\\LinkPager`'s `nextPageLabel`, `prevPageLabel`, `firstPageLabel`, `lastPageLabel` are now taking `false` instead of `null` for \"no label\" (samdark)\n- Chg #4911: Changed callback signature used in `yii\\base\\ArrayableTrait::fields()` from `function ($field, $model) {` to `function ($model, $field) {` (samdark)\n- Chg #4955: Replaced callbacks with events for `yii\\widgets\\ActiveForm` (qiangxue)\n    - Removed `beforeValidate()`, `beforeValidateAll()`, `afterValidate()`, `afterValidateAll()`, `ajaxBeforeSend()` and `ajaxComplete()` from `yii\\widgets\\ActiveForm`.\n    - Added `beforeValidate`, `afterValidate`, `beforeValidateAttribute`, `afterValidateAttribute`, `beforeSubmit`, `ajaxBeforeSend` and `ajaxComplete` events to `yii.activeForm` jQuery plugin.\n- Chg #5176: `ActiveFixture` will reset table in its `load()` method instead of `unload()` (qiangxue)\n- Chg: Replaced `clearAll()` and `clearAllAssignments()` in `yii\\rbac\\ManagerInterface` with `removeAll()`, `removeAllRoles()`, `removeAllPermissions()`, `removeAllRules()` and `removeAllAssignments()` (qiangxue)\n- Chg: Added `$user` as the first parameter of `yii\\rbac\\Rule::execute()` (qiangxue)\n- Chg: `yii\\grid\\DataColumn::getDataCellValue()` visibility is now `public` to allow accessing the value from a GridView directly (cebe)\n- Chg: `yii\\data\\ActiveDataProvider::$query` will not be modified directly with pagination and sorting anymore so it will be reuseable (cebe)\n- Chg: Removed `yii\\rest\\ActiveController::$transactional` property and connected functionality (samdark)\n- Chg: Changed the default value of the `keyPrefix` property of cache components to be null (qiangxue)\n- Chg: Added `prefix` column to `yii\\log\\DbTarget` to have the same amount of information logged as in files and emails (cebe)\n- Chg: Use `limit(null)` instead of `limit(-1)` in migration controller to be compatible to more backends (cebe)\n- Chg: `yii\\web\\Request::cookieValidationKey` must be explicitly specified for each application that wants to use cookie validation (qiangxue)\n- Chg: Added `yii\\composer\\Installer::postCreateProject()` and modified the syntax of calling installer methods in composer.json (qiangxue)\n- Chg: When an ID is found to be in both `Application::controllerMap` and `Application::modules`, the former will take precedence (qiangxue)\n- Chg: `yii\\helpers\\Html::activeCheckbox()` and `activeRadio()` will generate labels by default using the corresponding attribute labels (qiangxue)\n- New #1280: Gii can now be run from command line (schmunk42, cebe, qiangxue)\n- New #3911: Added `yii\\behaviors\\SluggableBehavior` that fills the specified model attribute with the transliterated and adjusted version to use in URLs (creocoder)\n- New #4193: Added `yii\\filters\\Cors` CORS filter to allow Cross Origin Resource Sharing (pgaultier)\n- New #4945: Added `yii\\test\\ArrayFixture` (Ragazzo)\n- New: Added `yii\\base\\InvalidValueException` (qiangxue)\n- New: Added `yii\\caching\\ArrayCache` (cebe)\n\n\n2.0.0-beta April 13, 2014\n-------------------------\n\n- Bug #1265: `yii\\console\\controllers\\AssetController` does not override 'js' and 'css' for compressed bundles (klimov-paul)\n- Bug #1326: The `visible` setting for `yii\\widgets\\DetailView` doesn't work as expected (qiangxue)\n- Bug #1412: `yii\\validators\\FileValidator` and `yii\\validators\\ImageValidator` still trigger `uploadRequired` error in some case when `skipOnEmpty` is true and no upload is provided (qiangxue)\n- Bug #1446: Logging while logs are processed causes infinite loop (qiangxue)\n- Bug #1497: Localized view files are not correctly returned (mintao)\n- Bug #1500: Log messages exported to files are not separated by newlines (omnilight, qiangxue)\n- Bug #1504: Debug toolbar isn't loaded successfully in some environments when xdebug is enabled (qiangxue)\n- Bug #1509: The SQL for creating Postgres RBAC tables is incorrect (qiangxue)\n- Bug #1545: It was not possible to execute db Query twice, params where missing (cebe)\n- Bug #1550: fixed the issue that JUI input widgets did not property input IDs.\n- Bug #1654: Fixed the issue that a new message source object is generated for every new message being translated (qiangxue)\n- Bug #1582: Error messages shown via client-side validation should not be double encoded (qiangxue)\n- Bug #1591: `yii\\validators\\StringValidator` is accessing undefined property (qiangxue)\n- Bug #1597: Added `enableAutoLogin` to basic and advanced project templates so \"remember me\" now works properly (samdark)\n- Bug #1631: Charset is now explicitly set to UTF-8 when serving JSON (samdark)\n- Bug #1635: `yii\\jui\\SliderInput` wasn't properly initialized (samdark)\n- Bug #1659: MSSQL doesn't support limit (Ana1oliy)\n- Bug #1686: `yii\\widgets\\ActiveForm` is creating duplicated messages in error summary (qiangxue)\n- Bug #1704: Incorrect regexp is used in `yii\\helpers\\Inflector::camelize()` (qiangxue)\n- Bug #1710: OpenId auth client does not request required attributes correctly (klimov-paul)\n- Bug #1798: Fixed label attributes for array fields (zhuravljov)\n- Bug #1800: Better check for `$_SERVER['HTTPS']` in `yii\\web\\Request::getIsSecureConnection()` (ginus, samdark)\n- Bug #1812: Hide potential warning message due to race condition occurring to `Session::regenerateID()` call (qiangxue)\n- Bug #1827: Debugger toolbar is loaded twice if an action is calling `run()` to execute another action (qiangxue)\n- Bug #1868: Added ability to exclude tables from `yii\\console\\controllers\\FixtureController` apply/clear actions. (Ragazzo)\n- Bug #1869: Fixed tables clearing. `TRUNCATE` changed to `DELETE` to avoid postgresql tables checks (and truncating all tables) (Ragazzo)\n- Bug #1870: Validation errors weren't properly translated when using clientside validation (samdark)\n- Bug #1930: Fixed domain based URL matching for website root (samdark)\n- Bug #1937: Fixed wrong behavior or advanced app's `init --env` when called without parameter actually specified (samdark)\n- Bug #1959: `yii\\helpers\\Html::activeCheckbox()` wasn't respecting custom values for checked/unchecked state (klevron, samdark)\n- Bug #1965: `yii\\base\\Controller::findLayoutFile()` returns incorrect file path when layout name starts with a slash (qiangxue)\n- Bug #1992: In module scenario that use 'site/captcha' will get wrong refreshUrl (callmez)\n- Bug #1993: afterFind event in AR is now called after relations have been populated (cebe, creocoder)\n- Bug #1998: Unchecked required checkbox never pass client validation (klevron)\n- Bug #2084: AssetController adjusting CSS URLs declared at same line fixed (klimov-paul)\n- Bug #2091: `yii\\db\\QueryBuilder::buildInCondition()` fails to handle array not starting with index 0 (qiangxue)\n- Bug #2160: SphinxQL does not support OFFSET (qiangxue, romeo7)\n- Bug #2209: When I18N message translation is missing source language is now used for formatting (samdark)\n- Bug #2212: `yii\\gridview\\DataColumn` generates incorrect labels when used with nosql DB and there is no data (qiangxue)\n- Bug #2298: Fixed the bug that Gii controller generator did not allow digit in the controller ID (qiangxue)\n- Bug #2303: Fixed the bug that `yii\\base\\Theme::pathMap` did not support dynamic update with path aliases (qiangxue)\n- Bug #2324: Fixed QueryBuilder bug when building a query with \"query\" option (mintao)\n- Bug #2399: Fixed the bug that AssetBundle did not handle relative URLs correctly (qiangxue)\n- Bug #2502: Unclear error message when `$_SERVER['DOCUMENT_ROOT']` is empty (samdark)\n- Bug #2519: MessageSource removed translation messages when event handler was bound to `missingTranslation`-event (cebe)\n- Bug #2527: Source language for `app` message category was always `en` no matter which application `sourceLanguage` was used (samdark)\n- Bug #2559: Going back on browser history breaks `yii\\widgets\\GridView` filtering with `Pjax` (tonydspaniard)\n- Bug #2571: Fixed the bug that batchInsert will fail for SQLite if the values contain null or boolean false (qiangxue)\n- Bug #2607: `yii message` tool wasn't updating `message` table (mitalcoi)\n- Bug #2624: `yii\\helpers\\Html::textArea()`` should respect `name` option. (qiangxue)\n- Bug #2653: Fixed the bug that unsetting an unpopulated AR relation would trigger exception (qiangxue)\n- Bug #2681: Fixed the bug of php build-in server `https://bugs.php.net/bug.php?id=66606` (dizews)\n- Bug #2683: Fixed the bug that batchInsert will fail for MySQL if the values contain boolean false (qiangxue)\n- Bug #2695: Fixed the issue that `yii\\validators\\FileValidator::isEmpty()` always returns true for validate multiple files (ZhandosKz)\n- Bug #2739: Fixed the issue that `yii\\rest\\CreateAction::run()` was using obsolete `yii\\web\\Controller::createAbsoluteUrl()` method (tonydspaniard)\n- Bug #2740: Fixed the issue that `yii\\captcha\\CaptchaAction::run()` was using obsolete `yii\\web\\Controller::createUrl()` method (tonydspaniard)\n- Bug #2760: Fixed `yii\\grid\\GridView` `filterUrl` parameters (qiangxue, AlexGx)\n- Bug #2834: When overriding i18n translation sources from config using `app*` or `yii*` default `app` and `yii` sources were not removed (samdark)\n- Bug #2848: Individual queries should be enclosed within parenthesis in a UNION query (qiangxue)\n- Bug #2862: Using `yii\\cache\\DbCache` while enabling schema caching may cause infinite loops (qiangxue)\n- Bug #3052: Fixed the issue that cache dependency data is not reused when `reusable` is set true (qiangxue)\n- Bug #3443: Fixed `yii\\bootstrap\\Nav` and `yii\\bootstrap\\Dropdown` were generating wrong ids for submenus (arturf)\n- Bug #3691: Fixed the issue that `yii\\web\\CookieCollection::has()` always returns false for cookies from browser (sonicgd)\n- Bug #4212: MSSQL query builder should not generate the `ORDER BY` clause when it is not needed (qiangxue)\n- Bug #4232: `yii\\db\\TableSchema::sequenceName` for PostgreSQL should remove the enclosing quotes (katzz0, qiangxue)\n- Bug #4697: MSSQL query builder does not work for newer MSSQL versions when LIMIT is used without ORDER BY (qiangxue)\n- Bug: Fixed `Call to a member function `registerAssetFiles()` on a non-object` in case of wrong `sourcePath` for an asset bundle (samdark)\n- Bug: Fixed incorrect event name for `yii\\jui\\Spinner` (samdark)\n- Bug: `yii\\helpers\\Json::encode()`` did not handle objects that implement `JsonSerializable` interface correctly (cebe)\n- Bug: Fixed issue with tabular input on `yii\\widgets\\ActiveField::radio()` and `yii\\widgets\\ActiveField::checkbox()` (jom)\n- Bug: Fixed the issue that query cache returns the same data for the same SQL but different query methods (qiangxue)\n- Bug: Fixed URL parsing so it's now properly giving 404 for URLs like `http://example.com//////site/about` (samdark)\n- Bug: Fixed `yii\\console\\controllers\\HelpController::getModuleCommands()` issue where it attempts to scan a module's controller directory when it doesn't exist (jom)\n- Bug: Fixed an issue with FileHelper and not accessible directories which resulted in endless loop (cebe)\n- Bug: Fixed `yii\\base\\Model::load()` returned `true` if `$data` and `formName` were empty (samdark)\n- Bug: Fixed issue with `yii\\db\\ActiveRelationTrait` preventing `yii\\db\\ActiveQuery` from clearing events and behaviors on clone (jom)\n- Bug: `yii\\db\\Query::queryScalar()` wasn't making `SELECT DISTINCT` queries subqueries (jom)\n- Bug: Fixed use `$files` instead of `self::$_files[$key]` to allow inheritance (pgaultier)\n- Enh #46: Added Image extension based on [Imagine library](http://imagine.readthedocs.org) (tonydspaniard)\n- Enh #364: Improve `yii\\helpers\\Inflector::slug()` with `intl` transliteration. Improved transliteration char map. (tonydspaniard)\n- Enh #497: Removed `yii\\log\\Target::logUser` and added `yii\\log\\Target::prefix` to support customizing message prefix (qiangxue)\n- Enh #499: Decoupled `Rule` from RBAC `Item` (samdark, qiangxue)\n- Enh #797: Added support for validating multiple columns by `yii\\validators\\UniqueValidator` and `yii\\validators\\ExistValidator` (qiangxue)\n- Enh #802: Added support for retrieving sub-array element or child object property through `ArrayHelper::getValue()` (qiangxue, cebe)\n- Enh #938: Added `yii\\web\\View::renderAjax()` and `yii\\web\\Controller::renderAjax()` (qiangxue)\n- Enh #1293: Replaced `yii\\helpers\\Console::showProgress()` with a better approach. See `yii\\helpers\\Console::startProgress()` for details (cebe)\n- Enh #1406: DB Schema support for Oracle Database (p0larbeer, qiangxue)\n- Enh #1437: Added `yii\\widgets\\ListView::viewParams` (qiangxue)\n- Enh #1467: Added support for organizing controllers in subdirectories (qiangxue)\n- Enh #1469: yii\\db\\ActiveRecord::find()` now works with default conditions (default scope) applied by createQuery (cebe)\n- Enh #1476: Add `yii\\web\\Session::handler` property (nineinchnick)\n- Enh #1499: Added `yii\\grid\\ActionColumn::controller` property to support customizing the controller for handling GridView actions (qiangxue)\n- Enh #1523: Query conditions now allow to use the NOT operator (cebe)\n- Enh #1535: Improved `yii\\web\\User` to start session only when needed. Also prepared it for use without session. (qiangxue)\n- Enh #1562: Added `yii\\bootstrap\\Tabs::linkOptions` (kartik-v)\n- Enh #1572: Added `yii\\web\\Controller::createAbsoluteUrl()` (samdark)\n- Enh #1579: throw exception when the given AR relation name does not match in a case sensitive manner (qiangxue)\n- Enh #1581: Added `yii\\db\\ActiveQuery::joinWith()` and `yii\\db\\ActiveQuery::innerJoinWith()` to support joining with relations (qiangxue)\n- Enh #1585: added schema parameter to `createAbsoluteUrl()`` to force 'http' or 'https' (cebe)\n- Enh #1601: Added support for tagName and encodeLabel parameters in ButtonDropdown (omnilight)\n- Enh #1611: Added `yii\\db\\BaseActiveRecord::markAttributeDirty()` (qiangxue)\n- Enh #1633: Advanced project template now works with MongoDB by default (samdark)\n- Enh #1634: Use masked CSRF tokens to prevent BREACH exploits (qiangxue)\n- Enh #1641: Added `BaseActiveRecord::updateAttributes()` (qiangxue)\n- Enh #1646: Added postgresql `yii\\db\\QueryBuilder::checkIntegrity()` and `yii\\db\\QueryBuilder::resetSequence()` (Ragazzo)\n- Enh #1645: Added `yii\\db\\Connection::$pdoClass` property (Ragazzo)\n- Enh #1645: Added support for nested DB transactions (qiangxue)\n- Enh #1681: Added support for automatically adjusting the \"for\" attribute of label generated by `yii\\widgets\\ActiveField::label()` (qiangxue)\n- Enh #1706: Added support for registering a single JS/CSS file with dependency (qiangxue)\n- Enh #1773: keyPrefix property of Cache is not restricted to alnum characters anymore, however it is still recommended (cebe)\n- Enh #1809: Added support for building \"EXISTS\" and \"NOT EXISTS\" query conditions (abdrasulov)\n- Enh #1839: Added support for getting file extension and basename from uploaded file (anfrantic)\n- Enh #1852: `yii\\db\\ActiveRecord::tableName()` now returns table name using `yii\\db\\Connection::tablePrefix` (creocoder)\n- Enh #1881: Improved `yii\\bootstrap\\NavBar` with `containerOptions`, `innerContainerOptions` and `renderInnerContainer` (creocoder)\n- Enh #1894: The path aliases `@webroot` and `@web` are now available right after the application is initialized (qiangxue)\n- Enh #1921: Grid view `yii\\grid\\ActionColumn` now allow to name buttons like `{controller/action}` (creocoder)\n- Enh #1973: `yii message/extract` is now able to generate `.po` files (SergeiKutanov, samdark)\n- Enh #1984: `yii\\base\\ActionFilter` will now mark event as handled when action run is aborted (cebe)\n- Enh #2002: Added `filterWhere()` method to yii\\db\\Query to allow easy addition of search filter conditions by ignoring empty search fields (samdark, cebe)\n- Enh #2003: Added `filter` property to `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` to support adding additional filtering conditions (qiangxue)\n- Enh #2008: `yii message/extract` is now able to save translation strings to database (kate-kate, samdark)\n- Enh #2043: Added support for custom request body parsers (danschmidt5189, cebe)\n- Enh #2051: Do not save null data into database when using RBAC (qiangxue)\n- Enh #2054: Added support for using custom application configuration with the console command runner (qiangxue)\n- Enh #2079:\n    - i18n now falls back to `en` from `en-US` if message translation isn't found (samdark)\n    - View now falls back to `en` from `en-US` if file not found (samdark)\n    - Default `sourceLanguage` and `language` are now `en` (samdark)\n- Enh #2101: Gii is now using model labels when generating search (thiagotalma)\n- Enh #2102: `yii\\widgets\\DetailView` now allow use `category.name` as attribute name (creocoder)\n- Enh #2102: `yii\\widgets\\DetailView` now allow use custom label in string format like `name:format:label` (creocoder)\n- Enh #2103: Renamed `yii\\web\\AccessDeniedHttpException` to `yii\\web\\ForbiddenHttpException`, added new commonly used HTTP exception classes (danschmidt5189)\n- Enh #2124: Added support for UNION ALL queries (Ivan Pomortsev, iworker)\n- Enh #2132: Allow url of CSS and JS files registered in yii\\web\\View to be url alias (cebe)\n- Enh #2144: `Html` helper now supports rendering \"data\" attributes (qiangxue)\n- Enh #2156: `yii migrate` now automatically creates `migrations` directory if it does not exist (samdark)\n- Enh #2211: Added typecast database types into php types (dizews)\n- Enh #2240: Improved `yii\\web\\AssetManager::publish()`, `yii\\web\\AssetManager::getPublishedPath()` and `yii\\web\\AssetManager::getPublishedUrl()` to support aliases (vova07)\n- Enh #2325: Adding support for the `X-HTTP-Method-Override` header in `yii\\web\\Request::getMethod()` (pawzar)\n- Enh #2364: Take into account current error reporting level in error handler (gureedo)\n- Enh #2387: Added support for fetching data from database in batches (nineinchnick, qiangxue)\n- Enh #2392: Added `addCssStyle()`, `removeCssStyle()`, `cssStyleFromArray()` and `cssStyleToArray()` to `yii\\helpers\\Html` (qiangxue, kartik-v, Alex-Code)\n- Enh #2406: Added support for conditional validation (drenty, cebe, qiangxue)\n- Enh #2411: Added Gii extension generator (schmunk42)\n- Enh #2415: Added support for inverse relations (qiangxue)\n- Enh #2417: Added possibility to set `dataType` for `$.ajax` call in yii.activeForm.js (Borales)\n- Enh #2436: Label of the attribute, which looks like `relatedModel.attribute`, will be received from the related model if it available (djagya)\n- Enh #2490: `yii\\db\\Query::count()` and other query scalar methods now properly handle queries with GROUP BY clause (qiangxue)\n- Enh #2491: Added support for using the same base class name of search model and data model in Gii (qiangxue)\n- Enh #2499: Added ability to downgrade migrations by their absolute apply time (resurtm, gorcer)\n- Enh #2525: Added support for formatting file sizes with `yii\\base\\Formatter` (VinceG)\n- Enh #2526: Allow for null values in batchInsert (skotos)\n- Enh #2646: Added support for specifying hostinfo in the pattern of a URL rule (qiangxue)\n- Enh #2661: Added boolean column type support for SQLite (qiangxue)\n- Enh #2670: Changed `yii\\console\\Controller::globalOptions()` to `options($actionID)` to (make it possible to) differentiate options per action (hqx)\n- Enh #2714: Added support for formatting time intervals relative to the current time with `yii\\base\\Formatter` (drenty)\n- Enh #2726: Added `yii\\db\\ActiveRecord::loadDefaultValues()` that fills default values from DB schema (samdark)\n- Enh #2729: Added `yii\\validators\\FilterValidator::skipOnArray` so that filters like `trim` will not fail for array inputs (qiangxue)\n- Enh #2735: Added support for `DateTimeInterface` in `yii\\i18n\\Formatter` (ivokund)\n- Enh #2756: Added support for injecting custom `isEmpty` check for all validators (qiangxue)\n- Enh #2775: Added `yii\\base\\Application::bootstrap` and `yii\\base\\BootstrapInterface` to support running bootstrap classes when starting an application (qiangxue)\n- Enh #2892: ActiveRecord dirty attributes are now reset after call to `afterSave()` so information about changed attributes is available in `afterSave`-event (cebe)\n- Enh #2910: Added `yii\\base\\Application::end()` (qiangxue)\n- Enh: Added support for using arrays as option values for console commands (qiangxue)\n- Enh: Added `favicon.ico` and `robots.txt` to default project templates (samdark)\n- Enh: Added `yii\\base\\Widget::autoIdPrefix` to support prefixing automatically generated widget IDs (qiangxue)\n- Enh: Support for file aliases in console command 'message' (omnilight)\n- Enh: Sort and Pagination can now create absolute URLs (cebe)\n- Enh: Added support for using array-typed arguments for console commands (qiangxue)\n- Enh: Added support for installing packages conforming to PSR-4 standard (qiangxue)\n- Enh: Better exception message when class cannot be loaded (samdark)\n- Enh: `init` of advanced application now allows to specify answer for overwriting files via `init --overwrite=n` (samdark)\n- Enh: Added `yii\\db\\TableSchema::fullName` property (qiangxue)\n- Enh: `yii\\codeception\\TestCase` now supports loading and using fixtures via Yii fixture framework (qiangxue)\n- Enh: Added ability to get incoming headers (dizews)\n- Enh: Added `beforeRun()` and `afterRun()` to `yii\\base\\Action` (qiangxue)\n- Enh: Added support for using timeZone with `yii\\base\\Formatter` (dizews)\n- Enh: Added `yii\\web\\View::POS_LOAD` (qiangxue)\n- Enh: Added `yii\\web\\Response::clearOutputBuffers()` (qiangxue)\n- Enh: Improved `yii\\db\\QueryBuilder::buildLimit()` to support big numbers (qiangxue)\n- Enh: Added support for building SQLs with sub-queries (qiangxue)\n- Enh: Added `yii\\data\\Pagination::getLinks()` (qiangxue)\n- Enh: Added support for reading page size from query parameters by `yii\\data\\Pagination` (qiangxue)\n- Enh: LinkPager can now register relational link tags in the html header for prev, next, first and last page (cebe)\n- Enh: Added `yii\\web\\UrlRuleInterface` and `yii\\web\\CompositeUrlRule` (qiangxue)\n- Enh: Added `yii\\web\\Request::getAuthUser()` and `getAuthPassword()` (qiangxue)\n- Enh: Added summaryOptions and emptyTextOptions to `yii\\widgets\\BaseListView` (johonunu)\n- Enh: Implemented Oracle column comment reading from another schema (gureedo, samdark)\n- Enh: Added support to allow an event handler to be inserted at the beginning of the existing event handler list (qiangxue)\n- Enh: Improved action filter and action execution flow by supporting installing action filters at controller, module and application levels (qiangxue)\n- Enh: Added `isAssociative()` and `isIndexed()` to `yii\\helpers\\ArrayHelper` (qiangxue)\n- Enh: Added `addSelect` to `yii\\db\\Query` (Alex-Code)\n- Enh: Added ODBC support in `yii\\db\\Connection` (nineinchnick, resurtm)\n- Chg #47: Changed Markdown library to cebe/markdown and adjusted Markdown helper API (cebe)\n- Chg #735: Added back `yii\\widgets\\ActiveField::hiddenInput()` (qiangxue)\n- Chg #1186: Changed `Sort` to use comma to separate multiple sort fields and use negative sign to indicate descending sort (qiangxue)\n- Chg #1519: `yii\\web\\User::loginRequired()` now returns the `Response` object instead of exiting the application (qiangxue)\n- Chg #1564: Removed `yii\\web\\Session::autoStart` and added `hasSessionId`. Session will be automatically started when accessing session data (qiangxue)\n- Chg #1586: `yii\\db\\QueryBuilder::buildLikeCondition()` will now escape special characters and use percentage characters by default (qiangxue)\n- Chg #1610: `yii\\helpers\\Html::activeCheckboxList()` and `Html::activeRadioList()` will submit an empty string if no checkbox/radio is selected (qiangxue)\n- Chg #1643: Added default value for `yii\\captcha\\Captcha::options` (qiangxue)\n- Chg #1796: Removed `yii\\base\\Controller::getActionParams()` (samdark)\n- Chg #1835: `yii\\grid\\CheckboxColumn` now renders checkboxes whose values are the corresponding data key values (qiangxue)\n- Chg #1821: Changed default values for yii\\db\\Connection username and password to null (cebe)\n- Chg #1844: `yii\\web\\Response::sendFile()` and other file sending methods will not send the response (qiangxue)\n- Chg #1852: `yii\\db\\Connection::tablePrefix` default value now `tbl_` (creocoder)\n- Chg #1958: `beforeSubmit` in `yii.activeform` is now executed after validation and before form submission (6pblcb)\n- Chg #2025: Removed ability to declare scopes in ActiveRecord (samdark)\n- Chg #2043:\n    - Renamed `yii\\web\\Request::acceptedLanguages` to `acceptableLanguages` (qiangxue)\n    - Removed `yii\\web\\Request::getPost()`, `getPut()`, `getDelete()`, `getPatch()` in favor of `getBodyParam()` (cebe)\n    - Renamed `yii\\web\\Request::get()` to `getQueryParams()` and `getRestParams()` to `getBodyParams()` (cebe)\n    - Added `yii\\web\\Request::get($name = null, $defaultValue = null)` and `yii\\web\\Request::post($name = null, $defaultValue = null)` (samdark)\n- Chg #2059: Implemented git-flavored file excluding/filtering for `yii\\helpers\\FileHelper` (nineinchnick)\n- Chg #2063: Removed `yii\\web\\Request::acceptTypes` and renamed `yii\\web\\Request::acceptedContentTypes` to `acceptableContentTypes` (qiangxue)\n- Chg #2103: Renamed `yii\\web\\AccessDeniedHttpException` to `yii\\web\\ForbiddenHttpException` (danschmidt5189)\n- Chg #2146: Removed `yii\\db\\ActiveRelation` class and `yii\\db\\ActiveRelationInterface`, moved the functionality to `yii\\db\\ActiveQuery`.\n             All relational queries are now directly served by `ActiveQuery` allowing to use custom scopes in relations\n             and also to declare arbitrary queries as relations.\n             Also removed `yii\\db\\ActiveRecordInterface::createActiveRelation()` (cebe)\n- Chg #2157: The `*` category pattern will match all categories that do not match any other patterns listed in `yii\\i18n\\I18N::translations` (qiangxue, Ragazzo)\n- Chg #2161: Added ability to use `return` in `Widget::run` (samdark)\n- Chg #2173: Removed `yii\\helpers\\StringHelper::diff()`, Moved `phpspec/php-diff` dependency from `yiisoft/yii2` to `yiisoft/yii2-gii` (samdark)\n- Chg #2175: `yii\\db\\QueryBuilder` will now append UNION statements at the end of the primary SQL (qiangxue)\n- Chg #2210: Mysql driver will now treat `tinyint(1)` as integer instead of boolean (qiangxue)\n- Chg #2248: Renamed `yii\\base\\Model::DEFAULT_SCENARIO` to `yii\\base\\Model::SCENARIO_DEFAULT` (samdark)\n- Chg #2281: Renamed `yii\\db\\ActiveRecord::create()` to `populateRecord()` and changed signature. This method will not call instantiate() anymore (cebe)\n- Chg #2405: The CSS class of `yii\\widgets\\MaskedInput` now defaults to `form-control` (qiangxue)\n- Chg #2426: Changed URL creation method signatures to be consistent (samdark)\n- Chg #2516: Moved error handling from application to ErrorHandler class and fixed problems with HTTP Exception response code (cebe)\n    - `Yii::$app->exception` has now moved to `Yii::$app->errorHandler->exception`\n    - `yii\\base\\ErrorHandler` was split into `yii\\web\\ErrorHandler` and `yii\\console\\ErrorHandler`\n- Chg #2544: Changed `yii\\widgets\\DetailView`'s `name:format:label` to `attribute:format:label` to match `GridView` (samdark)\n- Chg #2603: `yii\\base\\ErrorException` now extends `\\ErrorException` (samdark)\n- Chg #2629: `yii\\base\\Module::controllerPath` is now read only, and all controller classes must be namespaced under `Module::controllerNamespace`. (qiangxue)\n- Chg #2630: API changes for URLs generation (samdark, qiangxue, cebe)\n    - Added `yii\\helpers\\Url`.\n    - Removed `yii\\helpers\\Html::url()`, use `yii\\helpers\\Url::to()` instead.\n    - Removed `yii\\web\\Controller::createUrl()` and `yii\\web\\Controller::createAbsoluteUrl()`, use `yii\\helpers\\Url::toRoute()` instead.\n    - Removed `yii\\web\\Controller::getCanonicalUrl()`, use `yii\\helpers\\Url::canonical()` instead.\n- Chg #2691: Null parameters will not be included in the generated URLs by `UrlManager` (gonimar, qiangxue)\n- Chg #2734: `FileCache::keyPrefix` defaults to empty string now (qiangxue)\n- Chg #2796: Removed `Application::preload` in favor of `Application::bootstrap` (qiangxue)\n- Chg #2816: Changed default date and time format of `yii\\base\\Formatter` to `Y-m-d` and `H:i:s` (qiangxue)\n- Chg #2911: Removed `tbl_` default for table prefix (samdark)\n- Chg #2912: Relative view files will be looked for under the directory containing the view currently being rendered (qiangxue)\n- Chg #2955: Changed the signature of ActiveQuery constructors and replaced `yii\\db\\ActiveRecord::createQuery()` with `find()` to simplify customizing `yii\\db\\ActiveQuery` classes (qiangxue)\n- Chg #2999: Added `findOne()` and `findAll()` to replace the usage of `yii\\db\\ActiveRecord::find($condition)`. (samdark, qiangxue)\n- Chg #4204: `yii\\web\\Request::getUserIP()` will return null if it cannot detect user IP address (qiangxue)\n- Chg #4622: Simplified the way of creating a Faker fixture template file (qiangxue)\n- Chg: Renamed `yii\\jui\\Widget::clientEventsMap` to `clientEventMap` (qiangxue)\n- Chg: Renamed `ActiveRecord::getPopulatedRelations()` to `getRelatedRecords()` (qiangxue)\n- Chg: Renamed `attributeName` and `className` to `targetAttribute` and `targetClass` for `UniqueValidator` and `ExistValidator` (qiangxue)\n- Chg: Added `yii\\widgets\\InputWidget::options` (qiangxue)\n- Chg: Changed the signature of `urlCreator` and button creators for `yii\\gridview\\ActionColumn` (qiangxue)\n- Chg: Updated HTMLPurified dependency to `4.6.*`.\n- Chg: Changed Yii autoloader to support loading PSR-4 classes only (i.e. PEAR-styled classes not supported anymore) (qiangxue)\n- Chg: Changed the directory structure according to PSR-4. You have to update your application `index.php`,\n       `index-test.php` and `yii` files to point to the new location of `Yii.php` (qiangxue, cebe)\n- Chg: Advanced app template: moved database connection DSN, login and password to `-local` config not to expose it to VCS (samdark)\n- Chg: Renamed `yii\\web\\Request::acceptedLanguages` to `acceptableLanguages` (qiangxue)\n- Chg: Removed implementation of `yii\\base\\Arrayable` from `yii\\base\\Object` (qiangxue)\n- Chg: The scripts in asset bundles are now registered in `View` at the end of `endBody()`. It was done in `endPage()` previously (qiangxue)\n- Chg: Renamed `csrf-var` to `csrf-param` for CSRF header name (Dilip)\n- Chg: The directory holding email templates is renamed from `mails` to `mail` (qiangxue)\n- Chg: Renamed properties `fooVar` to `fooParam` for various classes (qiangxue)\n    - Renamed `yii\\widgets\\ActiveForm::ajaxVar` to `ajaxParam`\n    - Renamed `yii\\data\\Pagination::pageVar` to `pageParam`\n    - Renamed `yii\\data\\Sort::sortVar` to `sortParam`\n    - Renamed `yii\\web\\Request::csrfVar` to `csrfParam`\n    - Renamed `yii\\web\\Request::methodVar` to `methodParam`\n    - Renamed `yii\\web\\UrlManager::routeVar` to `routeParam`\n    - Renamed `yii\\web\\Session::flashVar` to `flashParam`\n    - Renamed `yii\\web\\User::idVar` to `idParam`\n    - Renamed `yii\\web\\User::authTimeoutVar` to `authTimeoutParam`\n    - Renamed `yii\\web\\User::returnUrlVar` to `returnUrlParam`\n- Chg: Added `yii\\base\\View::viewFile` and removed `yii\\base\\ViewEvent::viewFile` (qiangxue)\n- Chg: Changed `yii\\base\\Controller::afterAction()`, `yii\\base\\Module::afterAction()` and `yii\\base\\ActionFilter::afterAction()` to pass `$result` by value instead of reference (qiangxue)\n- Chg: `yii\\base\\Extension::init()` is renamed to `bootstrap()` (qiangxue)\n- Chg: `getComponent()` and `setComponent()` in `yii\\base\\Application` and `yii\\base\\Module` are renamed to `get()` and `set()` respectively. (qiangxue)\n- Chg: The signature of `Yii::createObject()` is changed. Constructor parameters must be passed as the second parameter. (qiangxue)\n- Chg: `Yii::$objectConfig` is removed. You should use `Yii::$container->set()` to configure default settings of classes. (qiangxue)\n- Chg: Removed `yii\\grid\\Column::getDataCellContent()` and renamed `yii\\grid\\DataColumn::getDataCellContent()` to `yii\\grid\\DataColumn::getDataCellValue()` (cebe)\n- Chg: `yii\\log\\Logger` is split into `yii\\log\\Logger` and `yii\\log\\Dispatcher`. (qiangxue)\n- Chg: Moved all filter classes to namespace `yii\\filters` (qiangxue)\n- Chg: Re-implemented RBAC by following more closely to the original NIST RBAC model. Dropped `yii\\rbac\\PhpManager`. (qiangxue)\n- Chg: Renamed `yii\\web\\User::checkAccess()` to `yii\\web\\User::can()` (qiangxue)\n- New #66: [Auth client library](https://github.com/yiisoft/yii2-authclient) OpenId, OAuth1, OAuth2 clients (klimov-paul)\n- New #303: Added built-in support for REST API (qiangxue)\n- New #503: Added `yii\\di\\Container` and `yii\\di\\ServiceLocator` (qiangxue)\n- New #706: Added `yii\\widgets\\Pjax` and enhanced `yii\\grid\\GridView` to work with `Pjax` to support AJAX-update (qiangxue)\n- New #1393: [Codeception testing framework integration](https://github.com/yiisoft/yii2-codeception) (Ragazzo)\n- New #1438: [MongoDB integration](https://github.com/yiisoft/yii2-mongodb) ActiveRecord and Query (klimov-paul)\n- New #1956: Implemented test fixture framework (qiangxue)\n- New #2034: Added `yii\\filters\\ContentNegotiator` to support response format and language negotiation (qiangxue)\n- New #2149: Added `yii\\base\\DynamicModel` to support ad-hoc data validation (qiangxue)\n- New #2360: Added `AttributeBehavior` and `BlameableBehavior`, and renamed `AutoTimestamp` to `TimestampBehavior` (lucianobaraglia, qiangxue)\n- New #2932: Added `yii\\web\\ViewAction` that allow you to render views based on GET parameter (samdark)\n- New #2998: Added `yii\\log\\SyslogTarget` that is able to write log to syslog (miramir, samdark)\n- New #3029: Added `yii\\bootstrap\\ActiveForm` and `yii\\bootstrap\\ActiveField` (mikehaertl)\n- New #4640: Added `yii\\widgets\\ActiveForm::beginField()` and `endField()` (qiangxue)\n- New: Yii framework now comes with core messages translated into 26 languages, many thanks to all our translators!\n- New: Added `yii\\codeception\\DbTestCase` (qiangxue)\n- New: Added `yii\\web\\GroupUrlRule` (qiangxue)\n- New: Added `yii\\filters\\RateLimiter` (qiangxue)\n- New: Added various authentication methods, including `HttpBasicAuth`, `HttpBearerAuth`, `QueryParamAuth`, and `CompositeAuth` (qiangxue)\n- New: Added `yii\\web\\HtmlResponseFormatter` and `yii\\web\\JsonResponseFormatter` (qiangxue)\n\n\n2.0.0-alpha December 1, 2013\n-----------------------------\n\n- Initial release.\n- Official extensions released in this version:\n  - [Twitter bootstrap 3.0](https://github.com/yiisoft/yii2-bootstrap)\n  - [Jquery UI](https://github.com/yiisoft/yii2-jui)\n\n  - [Debug Toolbar](https://github.com/yiisoft/yii2-debug)\n  - [Gii code generator](https://github.com/yiisoft/yii2-gii)\n\n  - [Elasticsearch integration](https://github.com/yiisoft/yii2-elasticsearch): ActiveRecord and Query\n  - [Redis integration](https://github.com/yiisoft/yii2-redis): ActiveRecord, Cache and Session\n  - [Sphinx integration](https://github.com/yiisoft/yii2-sphinx): ActiveRecord and Query\n\n  - [Swiftmailer](https://github.com/yiisoft/yii2-swiftmailer)\n\n  - [Smarty View Renderer](https://github.com/yiisoft/yii2-smarty)\n  - [Twig View Renderer](https://github.com/yiisoft/yii2-twig)\n", "<?php\n/**\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n */\n\nnamespace yii\\web;\n\nuse Yii;\nuse yii\\base\\Component;\nuse yii\\base\\InvalidConfigException;\nuse yii\\base\\InvalidValueException;\nuse yii\\rbac\\CheckAccessInterface;\n\n/**\n * User is the class for the `user` application component that manages the user authentication status.\n *\n * You may use [[isGuest]] to determine whether the current user is a guest or not.\n * If the user is a guest, the [[identity]] property would return `null`. Otherwise, it would\n * be an instance of [[IdentityInterface]].\n *\n * You may call various methods to change the user authentication status:\n *\n * - [[login()]]: sets the specified identity and remembers the authentication status in session and cookie;\n * - [[logout()]]: marks the user as a guest and clears the relevant information from session and cookie;\n * - [[setIdentity()]]: changes the user identity without touching session or cookie\n *   (this is best used in stateless RESTful API implementation).\n *\n * Note that User only maintains the user authentication status. It does NOT handle how to authenticate\n * a user. The logic of how to authenticate a user should be done in the class implementing [[IdentityInterface]].\n * You are also required to set [[identityClass]] with the name of this class.\n *\n * User is configured as an application component in [[\\yii\\web\\Application]] by default.\n * You can access that instance via `Yii::$app->user`.\n *\n * You can modify its configuration by adding an array to your application config under `components`\n * as it is shown in the following example:\n *\n * ```php\n * 'user' => [\n *     'identityClass' => 'app\\models\\User', // User must implement the IdentityInterface\n *     'enableAutoLogin' => true,\n *     // 'loginUrl' => ['user/login'],\n *     // ...\n * ]\n * ```\n *\n * @property string|int $id The unique identifier for the user. If `null`, it means the user is a guest. This\n * property is read-only.\n * @property IdentityInterface|null $identity The identity object associated with the currently logged-in\n * user. `null` is returned if the user is not logged in (not authenticated).\n * @property bool $isGuest Whether the current user is a guest. This property is read-only.\n * @property string $returnUrl The URL that the user should be redirected to after login. Note that the type\n * of this property differs in getter and setter. See [[getReturnUrl()]] and [[setReturnUrl()]] for details.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\nclass User extends Component\n{\n    const EVENT_BEFORE_LOGIN = 'beforeLogin';\n    const EVENT_AFTER_LOGIN = 'afterLogin';\n    const EVENT_BEFORE_LOGOUT = 'beforeLogout';\n    const EVENT_AFTER_LOGOUT = 'afterLogout';\n\n    /**\n     * @var string the class name of the [[identity]] object.\n     */\n    public $identityClass;\n    /**\n     * @var bool whether to enable cookie-based login. Defaults to `false`.\n     * Note that this property will be ignored if [[enableSession]] is `false`.\n     */\n    public $enableAutoLogin = false;\n    /**\n     * @var bool whether to use session to persist authentication status across multiple requests.\n     * You set this property to be `false` if your application is stateless, which is often the case\n     * for RESTful APIs.\n     */\n    public $enableSession = true;\n    /**\n     * @var string|array the URL for login when [[loginRequired()]] is called.\n     * If an array is given, [[UrlManager::createUrl()]] will be called to create the corresponding URL.\n     * The first element of the array should be the route to the login action, and the rest of\n     * the name-value pairs are GET parameters used to construct the login URL. For example,\n     *\n     * ```php\n     * ['site/login', 'ref' => 1]\n     * ```\n     *\n     * If this property is `null`, a 403 HTTP exception will be raised when [[loginRequired()]] is called.\n     */\n    public $loginUrl = ['site/login'];\n    /**\n     * @var array the configuration of the identity cookie. This property is used only when [[enableAutoLogin]] is `true`.\n     * @see Cookie\n     */\n    public $identityCookie = ['name' => '_identity', 'httpOnly' => true];\n    /**\n     * @var int the number of seconds in which the user will be logged out automatically if he\n     * remains inactive. If this property is not set, the user will be logged out after\n     * the current session expires (c.f. [[Session::timeout]]).\n     * Note that this will not work if [[enableAutoLogin]] is `true`.\n     */\n    public $authTimeout;\n    /**\n     * @var CheckAccessInterface The access checker to use for checking access.\n     * If not set the application auth manager will be used.\n     * @since 2.0.9\n     */\n    public $accessChecker;\n    /**\n     * @var int the number of seconds in which the user will be logged out automatically\n     * regardless of activity.\n     * Note that this will not work if [[enableAutoLogin]] is `true`.\n     */\n    public $absoluteAuthTimeout;\n    /**\n     * @var bool whether to automatically renew the identity cookie each time a page is requested.\n     * This property is effective only when [[enableAutoLogin]] is `true`.\n     * When this is `false`, the identity cookie will expire after the specified duration since the user\n     * is initially logged in. When this is `true`, the identity cookie will expire after the specified duration\n     * since the user visits the site the last time.\n     * @see enableAutoLogin\n     */\n    public $autoRenewCookie = true;\n    /**\n     * @var string the session variable name used to store the value of [[id]].\n     */\n    public $idParam = '__id';\n    /**\n     * @var string the session variable name used to store the value of expiration timestamp of the authenticated state.\n     * This is used when [[authTimeout]] is set.\n     */\n    public $authTimeoutParam = '__expire';\n    /**\n     * @var string the session variable name used to store the value of absolute expiration timestamp of the authenticated state.\n     * This is used when [[absoluteAuthTimeout]] is set.\n     */\n    public $absoluteAuthTimeoutParam = '__absoluteExpire';\n    /**\n     * @var string the session variable name used to store the value of [[returnUrl]].\n     */\n    public $returnUrlParam = '__returnUrl';\n    /**\n     * @var array MIME types for which this component should redirect to the [[loginUrl]].\n     * @since 2.0.8\n     */\n    public $acceptableRedirectTypes = ['text/html', 'application/xhtml+xml'];\n\n    private $_access = [];\n\n\n    /**\n     * Initializes the application component.\n     */\n    public function init()\n    {\n        parent::init();\n\n        if ($this->identityClass === null) {\n            throw new InvalidConfigException('User::identityClass must be set.');\n        }\n        if ($this->enableAutoLogin && !isset($this->identityCookie['name'])) {\n            throw new InvalidConfigException('User::identityCookie must contain the \"name\" element.');\n        }\n        if (!empty($this->accessChecker) && is_string($this->accessChecker)) {\n            $this->accessChecker = Yii::createObject($this->accessChecker);\n        }\n    }\n\n    private $_identity = false;\n\n    /**\n     * Returns the identity object associated with the currently logged-in user.\n     * When [[enableSession]] is true, this method may attempt to read the user's authentication data\n     * stored in session and reconstruct the corresponding identity object, if it has not done so before.\n     * @param bool $autoRenew whether to automatically renew authentication status if it has not been done so before.\n     * This is only useful when [[enableSession]] is true.\n     * @return IdentityInterface|null the identity object associated with the currently logged-in user.\n     * `null` is returned if the user is not logged in (not authenticated).\n     * @see login()\n     * @see logout()\n     */\n    public function getIdentity($autoRenew = true)\n    {\n        if ($this->_identity === false) {\n            if ($this->enableSession && $autoRenew) {\n                $this->_identity = null;\n                $this->renewAuthStatus();\n            } else {\n                return null;\n            }\n        }\n\n        return $this->_identity;\n    }\n\n    /**\n     * Sets the user identity object.\n     *\n     * Note that this method does not deal with session or cookie. You should usually use [[switchIdentity()]]\n     * to change the identity of the current user.\n     *\n     * @param IdentityInterface|null $identity the identity object associated with the currently logged user.\n     * If null, it means the current user will be a guest without any associated identity.\n     * @throws InvalidValueException if `$identity` object does not implement [[IdentityInterface]].\n     */\n    public function setIdentity($identity)\n    {\n        if ($identity instanceof IdentityInterface) {\n            $this->_identity = $identity;\n            $this->_access = [];\n        } elseif ($identity === null) {\n            $this->_identity = null;\n        } else {\n            throw new InvalidValueException('The identity object must implement IdentityInterface.');\n        }\n    }\n\n    /**\n     * Logs in a user.\n     *\n     * After logging in a user:\n     * - the user's identity information is obtainable from the [[identity]] property\n     *\n     * If [[enableSession]] is `true`:\n     * - the identity information will be stored in session and be available in the next requests\n     * - in case of `$duration == 0`: as long as the session remains active or till the user closes the browser\n     * - in case of `$duration > 0`: as long as the session remains active or as long as the cookie\n     *   remains valid by it's `$duration` in seconds when [[enableAutoLogin]] is set `true`.\n     *\n     * If [[enableSession]] is `false`:\n     * - the `$duration` parameter will be ignored\n     *\n     * @param IdentityInterface $identity the user identity (which should already be authenticated)\n     * @param int $duration number of seconds that the user can remain in logged-in status, defaults to `0`\n     * @return bool whether the user is logged in\n     */\n    public function login(IdentityInterface $identity, $duration = 0)\n    {\n        if ($this->beforeLogin($identity, false, $duration)) {\n            $this->switchIdentity($identity, $duration);\n            $id = $identity->getId();\n            $ip = Yii::$app->getRequest()->getUserIP();\n            if ($this->enableSession) {\n                $log = \"User '$id' logged in from $ip with duration $duration.\";\n            } else {\n                $log = \"User '$id' logged in from $ip. Session not enabled.\";\n            }\n            Yii::info($log, __METHOD__);\n            $this->afterLogin($identity, false, $duration);\n        }\n\n        return !$this->getIsGuest();\n    }\n\n    /**\n     * Logs in a user by the given access token.\n     * This method will first authenticate the user by calling [[IdentityInterface::findIdentityByAccessToken()]]\n     * with the provided access token. If successful, it will call [[login()]] to log in the authenticated user.\n     * If authentication fails or [[login()]] is unsuccessful, it will return null.\n     * @param string $token the access token\n     * @param mixed $type the type of the token. The value of this parameter depends on the implementation.\n     * For example, [[\\yii\\filters\\auth\\HttpBearerAuth]] will set this parameter to be `yii\\filters\\auth\\HttpBearerAuth`.\n     * @return IdentityInterface|null the identity associated with the given access token. Null is returned if\n     * the access token is invalid or [[login()]] is unsuccessful.\n     */\n    public function loginByAccessToken($token, $type = null)\n    {\n        /* @var $class IdentityInterface */\n        $class = $this->identityClass;\n        $identity = $class::findIdentityByAccessToken($token, $type);\n        if ($identity && $this->login($identity)) {\n            return $identity;\n        }\n\n        return null;\n    }\n\n    /**\n     * Logs in a user by cookie.\n     *\n     * This method attempts to log in a user using the ID and authKey information\n     * provided by the [[identityCookie|identity cookie]].\n     */\n    protected function loginByCookie()\n    {\n        $data = $this->getIdentityAndDurationFromCookie();\n        if (isset($data['identity'], $data['duration'])) {\n            $identity = $data['identity'];\n            $duration = $data['duration'];\n            if ($this->beforeLogin($identity, true, $duration)) {\n                $this->switchIdentity($identity, $this->autoRenewCookie ? $duration : 0);\n                $id = $identity->getId();\n                $ip = Yii::$app->getRequest()->getUserIP();\n                Yii::info(\"User '$id' logged in from $ip via cookie.\", __METHOD__);\n                $this->afterLogin($identity, true, $duration);\n            }\n        }\n    }\n\n    /**\n     * Logs out the current user.\n     * This will remove authentication-related session data.\n     * If `$destroySession` is true, all session data will be removed.\n     * @param bool $destroySession whether to destroy the whole session. Defaults to true.\n     * This parameter is ignored if [[enableSession]] is false.\n     * @return bool whether the user is logged out\n     */\n    public function logout($destroySession = true)\n    {\n        $identity = $this->getIdentity();\n        if ($identity !== null && $this->beforeLogout($identity)) {\n            $this->switchIdentity(null);\n            $id = $identity->getId();\n            $ip = Yii::$app->getRequest()->getUserIP();\n            Yii::info(\"User '$id' logged out from $ip.\", __METHOD__);\n            if ($destroySession && $this->enableSession) {\n                Yii::$app->getSession()->destroy();\n            }\n            $this->afterLogout($identity);\n        }\n\n        return $this->getIsGuest();\n    }\n\n    /**\n     * Returns a value indicating whether the user is a guest (not authenticated).\n     * @return bool whether the current user is a guest.\n     * @see getIdentity()\n     */\n    public function getIsGuest()\n    {\n        return $this->getIdentity() === null;\n    }\n\n    /**\n     * Returns a value that uniquely represents the user.\n     * @return string|int the unique identifier for the user. If `null`, it means the user is a guest.\n     * @see getIdentity()\n     */\n    public function getId()\n    {\n        $identity = $this->getIdentity();\n\n        return $identity !== null ? $identity->getId() : null;\n    }\n\n    /**\n     * Returns the URL that the browser should be redirected to after successful login.\n     *\n     * This method reads the return URL from the session. It is usually used by the login action which\n     * may call this method to redirect the browser to where it goes after successful authentication.\n     *\n     * @param string|array $defaultUrl the default return URL in case it was not set previously.\n     * If this is null and the return URL was not set previously, [[Application::homeUrl]] will be redirected to.\n     * Please refer to [[setReturnUrl()]] on accepted format of the URL.\n     * @return string the URL that the user should be redirected to after login.\n     * @see loginRequired()\n     */\n    public function getReturnUrl($defaultUrl = null)\n    {\n        $url = Yii::$app->getSession()->get($this->returnUrlParam, $defaultUrl);\n        if (is_array($url)) {\n            if (isset($url[0])) {\n                return Yii::$app->getUrlManager()->createUrl($url);\n            }\n\n            $url = null;\n        }\n\n        return $url === null ? Yii::$app->getHomeUrl() : $url;\n    }\n\n    /**\n     * Remembers the URL in the session so that it can be retrieved back later by [[getReturnUrl()]].\n     * @param string|array $url the URL that the user should be redirected to after login.\n     * If an array is given, [[UrlManager::createUrl()]] will be called to create the corresponding URL.\n     * The first element of the array should be the route, and the rest of\n     * the name-value pairs are GET parameters used to construct the URL. For example,\n     *\n     * ```php\n     * ['admin/index', 'ref' => 1]\n     * ```\n     */\n    public function setReturnUrl($url)\n    {\n        Yii::$app->getSession()->set($this->returnUrlParam, $url);\n    }\n\n    /**\n     * Redirects the user browser to the login page.\n     *\n     * Before the redirection, the current URL (if it's not an AJAX url) will be kept as [[returnUrl]] so that\n     * the user browser may be redirected back to the current page after successful login.\n     *\n     * Make sure you set [[loginUrl]] so that the user browser can be redirected to the specified login URL after\n     * calling this method.\n     *\n     * Note that when [[loginUrl]] is set, calling this method will NOT terminate the application execution.\n     *\n     * @param bool $checkAjax whether to check if the request is an AJAX request. When this is true and the request\n     * is an AJAX request, the current URL (for AJAX request) will NOT be set as the return URL.\n     * @param bool $checkAcceptHeader whether to check if the request accepts HTML responses. Defaults to `true`. When this is true and\n     * the request does not accept HTML responses the current URL will not be SET as the return URL. Also instead of\n     * redirecting the user an ForbiddenHttpException is thrown. This parameter is available since version 2.0.8.\n     * @return Response the redirection response if [[loginUrl]] is set\n     * @throws ForbiddenHttpException the \"Access Denied\" HTTP exception if [[loginUrl]] is not set or a redirect is\n     * not applicable.\n     */\n    public function loginRequired($checkAjax = true, $checkAcceptHeader = true)\n    {\n        $request = Yii::$app->getRequest();\n        $canRedirect = !$checkAcceptHeader || $this->checkRedirectAcceptable();\n        if ($this->enableSession\n            && $request->getIsGet()\n            && (!$checkAjax || !$request->getIsAjax())\n            && $canRedirect\n        ) {\n            $this->setReturnUrl($request->getUrl());\n        }\n        if ($this->loginUrl !== null && $canRedirect) {\n            $loginUrl = (array) $this->loginUrl;\n            if ($loginUrl[0] !== Yii::$app->requestedRoute) {\n                return Yii::$app->getResponse()->redirect($this->loginUrl);\n            }\n        }\n        throw new ForbiddenHttpException(Yii::t('yii', 'Login Required'));\n    }\n\n    /**\n     * This method is called before logging in a user.\n     * The default implementation will trigger the [[EVENT_BEFORE_LOGIN]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @param bool $cookieBased whether the login is cookie-based\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * If 0, it means login till the user closes the browser or the session is manually destroyed.\n     * @return bool whether the user should continue to be logged in\n     */\n    protected function beforeLogin($identity, $cookieBased, $duration)\n    {\n        $event = new UserEvent([\n            'identity' => $identity,\n            'cookieBased' => $cookieBased,\n            'duration' => $duration,\n        ]);\n        $this->trigger(self::EVENT_BEFORE_LOGIN, $event);\n\n        return $event->isValid;\n    }\n\n    /**\n     * This method is called after the user is successfully logged in.\n     * The default implementation will trigger the [[EVENT_AFTER_LOGIN]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @param bool $cookieBased whether the login is cookie-based\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * If 0, it means login till the user closes the browser or the session is manually destroyed.\n     */\n    protected function afterLogin($identity, $cookieBased, $duration)\n    {\n        $this->trigger(self::EVENT_AFTER_LOGIN, new UserEvent([\n            'identity' => $identity,\n            'cookieBased' => $cookieBased,\n            'duration' => $duration,\n        ]));\n    }\n\n    /**\n     * This method is invoked when calling [[logout()]] to log out a user.\n     * The default implementation will trigger the [[EVENT_BEFORE_LOGOUT]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @return bool whether the user should continue to be logged out\n     */\n    protected function beforeLogout($identity)\n    {\n        $event = new UserEvent([\n            'identity' => $identity,\n        ]);\n        $this->trigger(self::EVENT_BEFORE_LOGOUT, $event);\n\n        return $event->isValid;\n    }\n\n    /**\n     * This method is invoked right after a user is logged out via [[logout()]].\n     * The default implementation will trigger the [[EVENT_AFTER_LOGOUT]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     */\n    protected function afterLogout($identity)\n    {\n        $this->trigger(self::EVENT_AFTER_LOGOUT, new UserEvent([\n            'identity' => $identity,\n        ]));\n    }\n\n    /**\n     * Renews the identity cookie.\n     * This method will set the expiration time of the identity cookie to be the current time\n     * plus the originally specified cookie duration.\n     */\n    protected function renewIdentityCookie()\n    {\n        $name = $this->identityCookie['name'];\n        $value = Yii::$app->getRequest()->getCookies()->getValue($name);\n        if ($value !== null) {\n            $data = json_decode($value, true);\n            if (is_array($data) && isset($data[2])) {\n                $cookie = Yii::createObject(array_merge($this->identityCookie, [\n                    'class' => 'yii\\web\\Cookie',\n                    'value' => $value,\n                    'expire' => time() + (int) $data[2],\n                ]));\n                Yii::$app->getResponse()->getCookies()->add($cookie);\n            }\n        }\n    }\n\n    /**\n     * Sends an identity cookie.\n     * This method is used when [[enableAutoLogin]] is true.\n     * It saves [[id]], [[IdentityInterface::getAuthKey()|auth key]], and the duration of cookie-based login\n     * information in the cookie.\n     * @param IdentityInterface $identity\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * @see loginByCookie()\n     */\n    protected function sendIdentityCookie($identity, $duration)\n    {\n        $cookie = Yii::createObject(array_merge($this->identityCookie, [\n            'class' => 'yii\\web\\Cookie',\n            'value' => json_encode([\n                $identity->getId(),\n                $identity->getAuthKey(),\n                $duration,\n            ], JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE),\n            'expire' => time() + $duration,\n        ]));\n        Yii::$app->getResponse()->getCookies()->add($cookie);\n    }\n\n    /**\n     * Determines if an identity cookie has a valid format and contains a valid auth key.\n     * This method is used when [[enableAutoLogin]] is true.\n     * This method attempts to authenticate a user using the information in the identity cookie.\n     * @return array|null Returns an array of 'identity' and 'duration' if valid, otherwise null.\n     * @see loginByCookie()\n     * @since 2.0.9\n     */\n    protected function getIdentityAndDurationFromCookie()\n    {\n        $value = Yii::$app->getRequest()->getCookies()->getValue($this->identityCookie['name']);\n        if ($value === null) {\n            return null;\n        }\n        $data = json_decode($value, true);\n        if (is_array($data) && count($data) == 3) {\n            list($id, $authKey, $duration) = $data;\n            /* @var $class IdentityInterface */\n            $class = $this->identityClass;\n            $identity = $class::findIdentity($id);\n            if ($identity !== null) {\n                if (!$identity instanceof IdentityInterface) {\n                    throw new InvalidValueException(\"$class::findIdentity() must return an object implementing IdentityInterface.\");\n                } elseif (!$identity->validateAuthKey($authKey)) {\n                    Yii::warning(\"Invalid auth key attempted for user '$id': $authKey\", __METHOD__);\n                } else {\n                    return ['identity' => $identity, 'duration' => $duration];\n                }\n            }\n        }\n        $this->removeIdentityCookie();\n        return null;\n    }\n\n    /**\n     * Removes the identity cookie.\n     * This method is used when [[enableAutoLogin]] is true.\n     * @since 2.0.9\n     */\n    protected function removeIdentityCookie()\n    {\n        Yii::$app->getResponse()->getCookies()->remove(Yii::createObject(array_merge($this->identityCookie, [\n            'class' => 'yii\\web\\Cookie',\n        ])));\n    }\n\n    /**\n     * Switches to a new identity for the current user.\n     *\n     * When [[enableSession]] is true, this method may use session and/or cookie to store the user identity information,\n     * according to the value of `$duration`. Please refer to [[login()]] for more details.\n     *\n     * This method is mainly called by [[login()]], [[logout()]] and [[loginByCookie()]]\n     * when the current user needs to be associated with the corresponding identity information.\n     *\n     * @param IdentityInterface|null $identity the identity information to be associated with the current user.\n     * If null, it means switching the current user to be a guest.\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * This parameter is used only when `$identity` is not null.\n     */\n    public function switchIdentity($identity, $duration = 0)\n    {\n        $this->setIdentity($identity);\n\n        if (!$this->enableSession) {\n            return;\n        }\n\n        /* Ensure any existing identity cookies are removed. */\n        if ($this->enableAutoLogin && ($this->autoRenewCookie || $identity === null)) {\n            $this->removeIdentityCookie();\n        }\n\n        $session = Yii::$app->getSession();\n        if (!YII_ENV_TEST) {\n            $session->regenerateID(true);\n        }\n        $session->remove($this->idParam);\n        $session->remove($this->authTimeoutParam);\n\n        if ($identity) {\n            $session->set($this->idParam, $identity->getId());\n            if ($this->authTimeout !== null) {\n                $session->set($this->authTimeoutParam, time() + $this->authTimeout);\n            }\n            if ($this->absoluteAuthTimeout !== null) {\n                $session->set($this->absoluteAuthTimeoutParam, time() + $this->absoluteAuthTimeout);\n            }\n            if ($this->enableAutoLogin && $duration > 0) {\n                $this->sendIdentityCookie($identity, $duration);\n            }\n        }\n    }\n\n    /**\n     * Updates the authentication status using the information from session and cookie.\n     *\n     * This method will try to determine the user identity using the [[idParam]] session variable.\n     *\n     * If [[authTimeout]] is set, this method will refresh the timer.\n     *\n     * If the user identity cannot be determined by session, this method will try to [[loginByCookie()|login by cookie]]\n     * if [[enableAutoLogin]] is true.\n     */\n    protected function renewAuthStatus()\n    {\n        $session = Yii::$app->getSession();\n        $id = $session->getHasSessionId() || $session->getIsActive() ? $session->get($this->idParam) : null;\n\n        if ($id === null) {\n            $identity = null;\n        } else {\n            /* @var $class IdentityInterface */\n            $class = $this->identityClass;\n            $identity = $class::findIdentity($id);\n        }\n\n        $this->setIdentity($identity);\n\n        if ($identity !== null && ($this->authTimeout !== null || $this->absoluteAuthTimeout !== null)) {\n            $expire = $this->authTimeout !== null ? $session->get($this->authTimeoutParam) : null;\n            $expireAbsolute = $this->absoluteAuthTimeout !== null ? $session->get($this->absoluteAuthTimeoutParam) : null;\n            if ($expire !== null && $expire < time() || $expireAbsolute !== null && $expireAbsolute < time()) {\n                $this->logout(false);\n            } elseif ($this->authTimeout !== null) {\n                $session->set($this->authTimeoutParam, time() + $this->authTimeout);\n            }\n        }\n\n        if ($this->enableAutoLogin) {\n            if ($this->getIsGuest()) {\n                $this->loginByCookie();\n            } elseif ($this->autoRenewCookie) {\n                $this->renewIdentityCookie();\n            }\n        }\n    }\n\n    /**\n     * Checks if the user can perform the operation as specified by the given permission.\n     *\n     * Note that you must configure \"authManager\" application component in order to use this method.\n     * Otherwise it will always return false.\n     *\n     * @param string $permissionName the name of the permission (e.g. \"edit post\") that needs access check.\n     * @param array $params name-value pairs that would be passed to the rules associated\n     * with the roles and permissions assigned to the user.\n     * @param bool $allowCaching whether to allow caching the result of access check.\n     * When this parameter is true (default), if the access check of an operation was performed\n     * before, its result will be directly returned when calling this method to check the same\n     * operation. If this parameter is false, this method will always call\n     * [[\\yii\\rbac\\CheckAccessInterface::checkAccess()]] to obtain the up-to-date access result. Note that this\n     * caching is effective only within the same request and only works when `$params = []`.\n     * @return bool whether the user can perform the operation as specified by the given permission.\n     */\n    public function can($permissionName, $params = [], $allowCaching = true)\n    {\n        if ($allowCaching && empty($params) && isset($this->_access[$permissionName])) {\n            return $this->_access[$permissionName];\n        }\n        if (($accessChecker = $this->getAccessChecker()) === null) {\n            return false;\n        }\n        $access = $accessChecker->checkAccess($this->getId(), $permissionName, $params);\n        if ($allowCaching && empty($params)) {\n            $this->_access[$permissionName] = $access;\n        }\n\n        return $access;\n    }\n\n    /**\n     * Checks if the `Accept` header contains a content type that allows redirection to the login page.\n     * The login page is assumed to serve `text/html` or `application/xhtml+xml` by default. You can change acceptable\n     * content types by modifying [[acceptableRedirectTypes]] property.\n     * @return bool whether this request may be redirected to the login page.\n     * @see acceptableRedirectTypes\n     * @since 2.0.8\n     */\n    protected function checkRedirectAcceptable()\n    {\n        $acceptableTypes = Yii::$app->getRequest()->getAcceptableContentTypes();\n        if (empty($acceptableTypes) || count($acceptableTypes) === 1 && array_keys($acceptableTypes)[0] === '*/*') {\n            return true;\n        }\n\n        foreach ($acceptableTypes as $type => $params) {\n            if (in_array($type, $this->acceptableRedirectTypes, true)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns auth manager associated with the user component.\n     *\n     * By default this is the `authManager` application component.\n     * You may override this method to return a different auth manager instance if needed.\n     * @return \\yii\\rbac\\ManagerInterface\n     * @since 2.0.6\n     * @deprecated since version 2.0.9, to be removed in 2.1. Use [[getAccessChecker()]] instead.\n     */\n    protected function getAuthManager()\n    {\n        return Yii::$app->getAuthManager();\n    }\n\n    /**\n     * Returns the access checker used for checking access.\n     * @return CheckAccessInterface\n     * @since 2.0.9\n     */\n    protected function getAccessChecker()\n    {\n        return $this->accessChecker !== null ? $this->accessChecker : $this->getAuthManager();\n    }\n}\n", "<?php\n/**\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n */\n\nnamespace yiiunit\\framework\\helpers;\n\nuse Yii;\nuse yii\\base\\Action;\nuse yii\\base\\Module;\nuse yii\\helpers\\Url;\nuse yii\\web\\Controller;\nuse yii\\widgets\\Menu;\nuse yiiunit\\framework\\filters\\stubs\\UserIdentity;\nuse yiiunit\\TestCase;\n\n/**\n * UrlTest.\n * @group helpers\n */\nclass UrlTest extends TestCase\n{\n    protected function setUp()\n    {\n        parent::setUp();\n        $this->mockApplication([\n            'components' => [\n                'request' => [\n                    'class' => 'yii\\web\\Request',\n                    'scriptUrl' => '/base/index.php',\n                    'hostInfo' => 'http://example.com/',\n                    'url' => '/base/index.php&r=site%2Fcurrent&id=42',\n                ],\n                'urlManager' => [\n                    'class' => 'yii\\web\\UrlManager',\n                    'baseUrl' => '/base',\n                    'scriptUrl' => '/base/index.php',\n                    'hostInfo' => 'http://example.com/',\n                ],\n                'user' => [\n                    'identityClass' => UserIdentity::className(),\n                ],\n            ],\n        ], '\\yii\\web\\Application');\n    }\n\n    protected function tearDown()\n    {\n        Yii::$app->getSession()->removeAll();\n        parent::tearDown();\n    }\n\n    /**\n     * Mocks controller action with parameters.\n     *\n     * @param string $controllerId\n     * @param string $actionID\n     * @param string $moduleID\n     * @param array  $params\n     */\n    protected function mockAction($controllerId, $actionID, $moduleID = null, $params = [])\n    {\n        \\Yii::$app->controller = $controller = new Controller($controllerId, \\Yii::$app);\n        $controller->actionParams = $params;\n        $controller->action = new Action($actionID, $controller);\n\n        if ($moduleID !== null) {\n            $controller->module = new Module($moduleID);\n        }\n    }\n\n    protected function removeMockedAction()\n    {\n        \\Yii::$app->controller = null;\n    }\n\n    public function testToRoute()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n\n        // If the route is an empty string, the current route will be used;\n        $this->assertEquals('/base/index.php?r=page%2Fview', Url::toRoute(''));\n        // a slash will be an absolute route representing the default route\n        $this->assertEquals('/base/index.php?r=', Url::toRoute('/'));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview', Url::toRoute('', true));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fview', Url::toRoute('', 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=page%2Fview', Url::toRoute('', ''));\n\n        // If the route contains no slashes at all, it is considered to be an action ID of the current controller and\n        // will be prepended with uniqueId;\n        $this->assertEquals('/base/index.php?r=page%2Fedit', Url::toRoute('edit'));\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20]));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], true));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], ''));\n\n        // If the route has no leading slash, it is considered to be a route relative\n        // to the current module and will be prepended with the module's uniqueId.\n        $this->mockAction('default', 'index', 'stats');\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview', Url::toRoute('user/view'));\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42]));\n        $this->assertEquals('http://example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], true));\n        $this->assertEquals('https://example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], ''));\n\n        // alias support\n        \\Yii::setAlias('@userView', 'user/view');\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview', Url::toRoute('@userView'));\n        \\Yii::setAlias('@userView', null);\n\n        // In case there is no controller, an exception should be thrown for relative route\n        $this->removeMockedAction();\n\n        $this->expectException('yii\\base\\InvalidParamException');\n        Url::toRoute('site/view');\n    }\n\n    public function testCurrent()\n    {\n        $this->mockAction('page', 'view', null, []);\n        Yii::$app->request->setQueryParams(['id' => 10, 'name' => 'test', 10 => 0]);\n        $uri = '/base/index.php?r=page%2Fview';\n\n        $this->assertEquals($uri . '&id=10&name=test&10=0', Url::current());\n        $this->assertEquals($uri . '&id=20&name=test&10=0', Url::current(['id' => 20]));\n        $this->assertEquals($uri . '&name=test&10=0', Url::current(['id' => null]));\n        $this->assertEquals($uri . '&name=test&10=0&1=yes', Url::current(['id' => [], 1 => 'yes']));\n        $this->assertEquals($uri . '&name=test&10=0', Url::current(['id' => []]));\n        $this->assertEquals($uri . '&name=test', Url::current(['id' => null, 10 => null]));\n        $this->assertEquals($uri . '&name=test&1=yes', Url::current(['id' => null, 10 => null, 1 => 'yes']));\n\n        $params = ['arr' => ['attr_one' => 1, 'attr_two' => 2]];\n        Yii::$app->request->setQueryParams($params);\n\n        $this->assertEquals($uri . '&arr%5Battr_one%5D=1&arr%5Battr_two%5D=2', Url::current());\n        $this->assertEquals($uri, Url::current(['arr' => null]));\n        $this->assertEquals($uri . '&arr%5Battr_two%5D=2', Url::current(['arr' => ['attr_one' => null]]));\n        $this->assertEquals($uri . '&arr%5Battr_one%5D=1&arr%5Battr_two%5D=two', Url::current(['arr' => ['attr_two' => 'two']]));\n    }\n\n    public function testPrevious()\n    {\n        Yii::$app->getUser()->login(UserIdentity::findIdentity('user1'));\n\n        $this->assertNull(Url::previous('notExistedPage'));\n\n        $this->assertNull(Url::previous(Yii::$app->getUser()->returnUrlParam));\n\n        $this->assertEquals('/base/index.php', Url::previous());\n    }\n\n    public function testTo()\n    {\n        // is an array: the first array element is considered a route, while the rest of the name-value\n        // pairs are treated as the parameters to be used for URL creation using Url::toRoute.\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20]));\n        $this->assertEquals('/base/index.php?r=page%2Fedit', Url::to(['edit']));\n        $this->assertEquals('/base/index.php?r=page%2Fview', Url::to(['']));\n\n        // alias support\n        \\Yii::setAlias('@pageEdit', 'edit');\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::to(['@pageEdit', 'id' => 20]));\n        \\Yii::setAlias('@pageEdit', null);\n\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20], true));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit', Url::to(['edit'], true));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview', Url::to([''], true));\n\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20], 'https'));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit', Url::to(['edit'], 'https'));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fview', Url::to([''], 'https'));\n\n        // is an empty string: the currently requested URL will be returned;\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base/index.php&r=site%2Fcurrent&id=42', Url::to(''));\n        $this->assertEquals('http://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('', true));\n        $this->assertEquals('https://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('', 'https'));\n\n        // is a non-empty string: it will first be processed by [[Yii::getAlias()]]. If the result\n        // is an absolute URL, it will be returned either without any change or, if schema was specified, with schema\n        // replaced; Otherwise, the result will be prefixed with [[\\yii\\web\\Request::baseUrl]] and returned.\n        \\Yii::setAlias('@web1', 'http://test.example.com/test/me1');\n        \\Yii::setAlias('@web2', 'test/me2');\n        \\Yii::setAlias('@web3', '');\n        \\Yii::setAlias('@web4', '/test');\n        \\Yii::setAlias('@web5', '#test');\n\n        $this->assertEquals('test/me1', Url::to('test/me1'));\n        $this->assertEquals('javascript:test/me1', Url::to('javascript:test/me1'));\n        $this->assertEquals('java/script:test/me1', Url::to('java/script:test/me1'));\n        $this->assertEquals('#test/me1', Url::to('#test/me1'));\n        $this->assertEquals('.test/me1', Url::to('.test/me1'));\n        $this->assertEquals('http://example.com/test/me1', Url::to('test/me1', true));\n        $this->assertEquals('https://example.com/test/me1', Url::to('test/me1', 'https'));\n        $this->assertEquals('https://example.com/test/test/me1', Url::to('@web4/test/me1', 'https'));\n\n        $this->assertEquals('/test/me1', Url::to('/test/me1'));\n        $this->assertEquals('http://example.com/test/me1', Url::to('/test/me1', true));\n        $this->assertEquals('https://example.com/test/me1', Url::to('/test/me1', 'https'));\n        $this->assertEquals('./test/me1', Url::to('./test/me1'));\n\n        $this->assertEquals('http://test.example.com/test/me1', Url::to('@web1'));\n        $this->assertEquals('http://test.example.com/test/me1', Url::to('@web1', true));\n        $this->assertEquals('https://test.example.com/test/me1', Url::to('@web1', 'https'));\n\n        $this->assertEquals('test/me2', Url::to('@web2'));\n        $this->assertEquals('http://example.com/test/me2', Url::to('@web2', true));\n        $this->assertEquals('https://example.com/test/me2', Url::to('@web2', 'https'));\n\n        $this->assertEquals('/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3'));\n        $this->assertEquals('http://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3', true));\n        $this->assertEquals('https://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3', 'https'));\n\n        $this->assertEquals('/test', Url::to('@web4'));\n        $this->assertEquals('http://example.com/test', Url::to('@web4', true));\n        $this->assertEquals('https://example.com/test', Url::to('@web4', 'https'));\n\n        $this->assertEquals('#test', Url::to('@web5'));\n        $this->assertEquals('http://example.com/#test', Url::to('@web5', true));\n        $this->assertEquals('https://example.com/#test', Url::to('@web5', 'https'));\n        $this->assertEquals('//example.com/#test', Url::to('@web5', ''));\n\n        // @see https://github.com/yiisoft/yii2/issues/13156\n        \\Yii::setAlias('@cdn', '//cdn.example.com');\n        $this->assertEquals('http://cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', 'http'));\n        $this->assertEquals('//cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', ''));\n        $this->assertEquals('https://cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', 'https'));\n        \\Yii::setAlias('@cdn', null);\n\n        //In case there is no controller, throw an exception\n        $this->removeMockedAction();\n\n        $this->expectException('yii\\base\\InvalidParamException');\n        Url::to(['site/view']);\n    }\n\n    /**\n     * @see https://github.com/yiisoft/yii2/issues/11925\n     */\n    public function testToWithSuffix()\n    {\n        Yii::$app->set('urlManager', [\n            'class' => 'yii\\web\\UrlManager',\n            'enablePrettyUrl' => true,\n            'showScriptName' => false,\n            'cache' => null,\n            'rules' => [\n                '<controller:\\w+>/<id:\\d+>' => '<controller>/view',\n                '<controller:\\w+>/<action:\\w+>/<id:\\d+>' => '<controller>/<action>',\n                '<controller:\\w+>/<action:\\w+>' => '<controller>/<action>',\n            ],\n            'baseUrl' => '/',\n            'scriptUrl' => '/index.php',\n            'suffix' => '.html',\n        ]);\n        $url = Yii::$app->urlManager->createUrl(['/site/page', 'view' => 'about']);\n        $this->assertEquals('/site/page.html?view=about', $url);\n\n        $url = Url::to(['/site/page', 'view' => 'about']);\n        $this->assertEquals('/site/page.html?view=about', $url);\n\n        $output = Menu::widget([\n            'items' => [\n                ['label' => 'Test', 'url' => ['/site/page', 'view' => 'about']],\n            ],\n        ]);\n        $this->assertRegExp('~<a href=\"/site/page.html\\?view=about\">~', $output);\n    }\n\n    public function testBase()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base', Url::base());\n        $this->assertEquals('http://example.com/base', Url::base(true));\n        $this->assertEquals('https://example.com/base', Url::base('https'));\n        $this->assertEquals('//example.com/base', Url::base(''));\n    }\n\n    public function testHome()\n    {\n        $this->assertEquals('/base/index.php', Url::home());\n        $this->assertEquals('http://example.com/base/index.php', Url::home(true));\n        $this->assertEquals('https://example.com/base/index.php', Url::home('https'));\n        $this->assertEquals('//example.com/base/index.php', Url::home(''));\n    }\n\n    public function testCanonical()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview&id=10', Url::canonical());\n        $this->removeMockedAction();\n    }\n\n    public function testIsRelative()\n    {\n        $this->assertTrue(Url::isRelative('/test/index.php'));\n        $this->assertTrue(Url::isRelative('index.php'));\n        $this->assertFalse(Url::isRelative('//example.com/'));\n        $this->assertFalse(Url::isRelative('http://example.com/'));\n        $this->assertFalse(Url::isRelative('https://example.com/'));\n    }\n}\n"], "fixing_code": ["Yii Framework 2 Change Log\n==========================\n\n2.0.14 under development\n------------------------\n\n- Enh #15496: CSRF token is now regenerated on changing identity (samdark, rhertogh)\n- Enh #15417: Added `yii\\validators\\FileValidator::$minFiles` (vladis84)\n- Bug #8983: Only truncate the original log file for rotation (matthewyang, developeruz)\n- Bug #14157: Add support for loading default value `CURRENT_TIMESTAMP` of MySQL `datetime` field (rossoneri)\n- Bug #14276: Fixed I18N format with dotted parameters (developeruz)\n- Bug #14484: Fixed `yii\\validators\\UniqueValidator` for target classes with a default scope (laszlovl, developeruz)\n- Bug #14604: Fixed `yii\\validators\\CompareValidator` `compareAttribute` does not work if `compareAttribute` form ID has been changed (mikk150)\n- Bug #14903: Fixed route with extra dashes is executed controller while it should not (developeruz)\n- Bug #15046: Throw an `yii\\web\\HeadersAlreadySentException` if headers were sent before web response (dmirogin)\n- Bug #15142: Fixed array params replacing in `yii\\helpers\\BaseUrl::current()` (IceJOKER)\n- Bug #15169: Fixed translating a string when NULL parameter is passed (developeruz)\n- Bug #15194: Fixed `yii\\db\\QueryBuilder::insert()` to preserve passed params when building a `INSERT INTO ... SELECT` query for MSSQL, PostgreSQL and SQLite (sergeymakinen)\n- Bug #15229: Fixed `yii\\console\\widgets\\Table` default value for `getScreenWidth()`, when `Console::getScreenSize()` can't determine screen size (webleaf)\n- Bug #15234: Fixed `\\yii\\widgets\\LinkPager` removed `tag` from `disabledListItemSubTagOptions` (SDKiller)\n- Bug #15249: Controllers in subdirectories were not visible in commands list (IceJOKER)\n- Bug #15270: Resolved potential race conditions when writing generated php-files (kalessil)\n- Bug #15301: Fixed `ArrayHelper::filter()` to work properly with `0` in values (hhniao)\n- Bug #15302: Fixed `yii\\caching\\DbCache` so that `getValues` now behaves the same as `getValue` with regards to streams (edwards-sj)\n- Bug #15317: Regenerate CSRF token if an empty value is given (sammousa)\n- Bug #15320: Fixed special role checks in `yii\\filters\\AccessRule::matchRole()` (Izumi-kun)\n- Bug #15322: Fixed PHP 7.2 compatibility of `FileHelper::getExtensionsByMimeType()` (samdark)\n- Bug #15355: Fixed `yii\\db\\Query::from()` does not work with `yii\\db\\Expression` (vladis84, silverfire, samdark)\n- Bug #15356: Fixed multiple bugs in `yii\\db\\Query::getTablesUsedInFrom()` (vladis84, samdark)\n- Bug #15380: `FormatConverter::convertDateIcuToPhp()` now converts `a` ICU symbols to `A` (brandonkelly)\n- Bug #15407: Fixed rendering rows with associative arrays in `yii\\console\\widgets\\Table` (dmrogin)\n- Bug #15432: Fixed wrong value being set in `yii\\filters\\RateLimiter::checkRateLimit()` resulting in wrong `X-Rate-Limit-Reset` header value (bizley)\n- Bug #15440: Fixed `yii\\behaviors\\AttributeTypecastBehavior::$attributeTypes` auto-detection fails for rule, which specify attribute with '!' prefix (klimov-paul)\n- Bug #15462: Fixed `accessChecker` configuration error (developeruz)\n- Enh #3087: Added `yii\\helpers\\BaseHtml::error()` \"errorSource\" option to be able to customize errors display (yanggs07, developeruz, silverfire)\n- Enh #3250: Added support for events partial wildcard matching (klimov-paul)\n- Enh #5515: Added default value for `yii\\behaviors\\BlameableBehavior` for cases when the user is guest (dmirogin)\n- Enh #7988: Added `\\yii\\helpers\\Console::errorSummary()` and `\\yii\\helpers\\Json::errorSummary()` (developeruz)\n- Enh #7996: Short syntax for verb in GroupUrlRule (schojniak, developeruz)\n- Enh #8752: Allow specify `$attributeNames` as a string for `yii\\base\\Model` `validate()` method (developeruz)\n- Enh #9137: Added `Access-Control-Allow-Method` header for the OPTIONS request (developeruz)\n- Enh #9253: Allow `variations` to be a string for `yii\\filters\\PageCache` and `yii\\widgets\\FragmentCache` (schojniak, developeruz)\n- Enh #12623: Added `yii\\helpers\\StringHelper::matchWildcard()` replacing usage of `fnmatch()`, which may be unreliable (klimov-paul)\n- Enh #14043: Added `yii\\helpers\\IpHelper` (silverfire, cebe)\n- Enh #14355: Added ability to pass an empty array as a parameter in console command (developeruz)\n- Enh #14568: Refactored migration templates to use `safeUp()` and `safeDown()` methods (Kolyunya)\n- Enh #14662: Added support for custom `Content-Type` specification to `yii\\web\\JsonResponseFormatter` (Kolyunya)\n- Enh #15024: `yii\\web\\Pjax` widget does not prevent CSS files from sending anymore because they are handled by client-side plugin correctly (onmotion)\n- Enh #15135: Automatic completion for help in bash and zsh (Valkeru)\n- Enh #15219: Added `yii\\filters\\auth\\HttpHeaderAuth` (bboure)\n- Enh #15221: Added support for specifying `--camelCase` console options in `--kebab-case` (brandonkelly)\n- Enh #15221: Added support for the `--<option> <value>` console option syntax (brandonkelly)\n- Enh #15221: Improved the `help/list-action-options` console command output for command options without a description (brandonkelly)\n- Enh #15226: Auto generate placeholder from fields (vladis84)\n- Enh #15332: Always check for availability of `openssl_pseudo_random_bytes`, even if LibreSSL is available (sammousa)\n- Enh #15335: Added `FileHelper::unlink()` that works well under all OSes (samdark)\n- Enh #15340: Test CHANGELOG.md for valid format (sammousa)\n- Enh #15347: Add `Instance` support for object property in DI container (kojit2009)\n- Enh #15357: Added multi statement support for `yii\\db\\sqlite\\Command` (sergeymakinen)\n- Enh #15360: Refactored `BaseConsole::updateProgress()` (developeruz)\n- Enh #15415: Added transaction/retry support for `yii\\db\\Command` (sergeymakinen)\n- Enh #15422: Added default roles dynamic definition support via closure for `yii\\rbac\\BaseManager` (deltacube)\n- Enh: Added check to `yii\\base\\Model::formName()` to prevent source path disclosure when form is represented by an anonymous class (silverfire)\n- Chg #15420: Handle OPTIONS request in `yii\\filter\\Cors` so the preflight check isn't passed trough authentication filters (michaelarnauts, leandrogehlen)\n\n\n2.0.13.1 November 14, 2017\n--------------------------\n\n- Bug #15081: Fixed \"Undefined offset: 1\" in log Target (ischenko)\n- Bug #15086: Fixed jQuery onLoad event handling (alexantr)\n- Bug #15108: Fixed `yii\\db\\Schema::getSchemaNames()` for MSSQL and added tests for all DBMSes (sergeymakinen)\n- Bug #15117: Fixed DB schema cache did not honor table prefixes (sergeymakinen)\n\n\n2.0.13 November 03, 2017\n------------------------\n\n- Bug #6226: Fix fatal symlink error during assets publishing in multi threaded environment (dynasource)\n- Bug #6526: Fixed `yii\\db\\Command::batchInsert()` casting of double values correctly independent of the locale (cebe, leammas)\n- Bug #6588: Fixed changing array keys after validation of multiple files in `yii\\validators\\FileValidator` (developeruz)\n- Bug #7890: Allow `migrate/mark` to mark history at the point of the base migration (cebe)\n- Bug #11242: Fixed excess escaping in `yii\\db\\Command::batchInsert()` (silverfire)\n- Bug #11825: User can login by cookie only once when `autoRenewCookie` is set to false (shirase, silverfire)\n- Bug #12860: Fixed possible race conditions in `yii\\mutex\\FileMutex` (kidol)\n- Bug #13258: Fixed `yii\\mutex\\FileMutex::$autoRelease` having no effect due to missing base class initialization (kidol)\n- Bug #13436: Fixed migration for MSSQL DbSession (silverfire)\n- Bug #13564: Fixed `yii\\web\\Request::getAuthUser()`, `getAuthPassword()` to respect `HTTP_AUTHORIZATION` request header (silverfire)\n- Bug #13720: Improve `yii\\helpers\\FormatConverter::convertDatePhpToIcu()` to handle escaped chars correctly (rob006)\n- Bug #13757: Fixed ambiguous column error in `BaseActiveRecord::refresh()` when the query adds a JOIN by default (cebe, ivankff)\n- Bug #13779: Fixed `yii\\db\\ActiveRecord::joinWith()` unable to use relation defined via attached behavior (ElisDN, klimov-paul)\n- Bug #13859: Fixed ambiguous column error in `Query::column()` when `$indexBy` is used with a JOIN (cebe)\n- Bug #13969: Fixed a bug in a `yii\\console\\controllers\\CacheController` when caches defined via a closure were not detected (Kolyunya)\n- Bug #14016: Fixed empty messages marked as unused in PHP and PO sources when extracted with message command when `markUnused` is `false` (samdark)\n- Bug #14129: Fixed console help to properly work with tricky camelcased controller names (samdark, silverfire)\n- Bug #14134: Fixed multiple `validateAttribute()` calls when `scenarios()` returns duplicate attributes (krukru)\n- Bug #14165: Set `_slave` of `Connection` to `false` instead of `null` in `close` method (rossoneri)\n- Bug #14186: Forced validation in `yiiActiveForm` do not trigger `afterValidate` event (arogachev)\n- Bug #14192: Fixed wrong default null value for TIMESTAMP when using PostgreSQL (Tigrov)\n- Bug #14202: Fixed current time in (UTC) `\\Yii::$app->formatter` if time not set (bscheshirwork)\n- Bug #14206: `MySqlMutex`, `PgsqlMutex` and `OracleMutex` now use `useMaster()` to ensure lock is aquired on the same DB server (cebe, ryusoft)\n- Bug #14248: `yii\\console\\controllers\\MessageController` no longer outputs colorized filenames when console does not support text colorization (PowerGamer1)\n- Bug #14264: Fixed a bug where `yii\\log\\Logger::calculateTimings()` was not accepting messages with array tokens (bizley)\n- Bug #14269: Fixed broken error page when calling an undefined method (cebe)\n- Bug #14304: Fixed `yii\\validators\\UniqueValidator` and `yii\\validators\\ExistValidator` to skip prefixes in case expressions are used (samdark)\n- Bug #14307: Fixed PHP warning when `yii\\console\\UnknownCommandException` is thrown for empty command (rob006)\n- Bug #14318: Trigger `yiiActiveForm.events.afterValidateAttribute` after updating attribute  (dmirogin)\n- Bug #14334: Fixed `\\yii\\db\\QueryBuilder::buildNotCondition` loses params when operand is `\\yii\\db\\Expression` (Ni-san)\n- Bug #14341: Fixed regression in error handling introduced by fixing #14264 (samdark)\n- Bug #14370: Fixed creating built-in validator in model with same function name (dmirogin)\n- Bug #14406: Fixed caching rules in `yii\\web\\UrlManager` with different ruleConfig configuration (dmirogin)\n- Bug #14423: Fixed `ArrayHelper::merge` behavior with null values for integer-keyed elements (dmirogin)\n- Bug #14449: Fix PHP 7.2 compatibility bugs and add explicit closure support in `yii\\base\\Application` (dynasource)\n- Bug #14471: `ContentNegotiator` will always set one of the configured server response formats even if the client does not accept any of them (PowerGamer1)\n- Bug #14492: Fixed error handler not escaping error info in debug mode, see CVE-2017-11516 (samdark)\n- Bug #14493: Fixed getting permissions in `yii\\rbac\\Dbmanger::getPermissionsByUser` by user with id equals 0 (dmirogin)\n- Bug #14510: The state of a form is always \"not validated\" when using forced validation in `yiiActiveForm` (arogachev)\n- Bug #14523: Added `yii\\web\\MultipartFormDataParser::$force` option allowing to enforce parsing even on 'POST' request (klimov-paul)\n- Bug #14525: Fixed 2.0.12 regression of loading of global fixtures trough `yii fixture/load` (michaelarnauts)\n- Bug #14533: Fixed `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` throw exception in case they are set for `yii\\db\\ActiveRecord` with `$targetClass` pointing to NOSQL ActiveRecord (klimov-paul)\n- Bug #14542: Ensured only ASCII characters are in CSRF cookie value since binary data causes issues with ModSecurity and some browsers (samdark)\n- Bug #14543: Throw exception when trying to create migration longer than 180 symbols (dmirogin, cebe)\n- Bug #14596: Fix event call on init in `yii\\widgets\\BaseListView` (panchenkodv)\n- Bug #14697: Fixed `console\\widgets\\Table` rendering when there's no data supplied (bscheshirwork)\n- Bug #14723: Fixed serialization of `yii\\db\\Connection` instance closes database connection (klimov-paul)\n- Bug #14773: Fixed `yii\\widgets\\ActiveField::$options` does not support 'class' option in array format (klimov-paul)\n- Bug #14902: Fixed PHP notice in `yii\\web\\MultipartFormDataParser` (olimsaidov)\n- Bug #14921: Fixed bug with replacing numeric keys in `yii\\helpers\\Url::current()` (rob006)\n- Enh #4479: Implemented REST filters (klimov-paul)\n- Enh #4495:  Added closure support in `yii\\i18n\\Formatter` (developeruz)\n- Enh #5786: Allowed to use custom constructors in ActiveRecord-based classes (ElisDN, klimov-paul)\n- Enh #6644: Added `yii\\helpers\\ArrayHelper::setValue()` (LAV45)\n- Enh #7823: Added `yii\\filters\\AjaxFilter` filter (dmirogin)\n- Enh #9438: `yii\\web\\DbSession` now relies on error handler to display errors (samdark)\n- Enh #9703, #9709: Added `yii\\i18n\\Formatter::asWeight()` and `::asLength()` formatters (nineinchnick, silverfire)\n- Enh #11415: Added `yii\\console\\widgets\\Table` to draw tables in console apps (pana1990, rob006, samdark, tonykor)\n- Enh #13254: Made `yii\\helpers\\StringHelper` and `yii\\validators\\StringValidator` independent of `Yii::$app` instance (cebe)\n- Enh #13378: Added `yii\\behaviors\\SluggableBehaviour::skipOnEmpty` option (andrewnester)\n- Enh #13403: Added 'permissions' additionally to 'roles' in `yii\\filters\\AccessRule` in order to be able to specify these separately (thyseus)\n- Enh #13486: Use DI container to instantiate cookies in order to be able to set defaults (samdark)\n- Enh #13586: Added `$preserveNonEmptyValues` property to the `yii\\behaviors\\AttributeBehavior` (Kolyunya)\n- Enh #13780: Added support for trusted proxies in `yii\\web\\Request` (sammousa, cebe, silverfire)\n- Enh #13787: Added `yii\\db\\Migration::$maxSqlOutputLength` that allows limiting number of characters for outputting SQL (thiagotalma)\n- Enh #13824: Support extracting concatenated strings in `yii message` (developeruz)\n- Enh #13835: Added `yii\\web\\Request::getOrigin()` method that returns `HTTP_ORIGIN` of current CORS request (yyxx9988)\n- Enh #13853: Added `yii\\db\\Migration::$compact` as well as `yii\\console\\controllers\\BaseMigrateController::$compact` to allow making the migration console output more compact (francislavoie)\n- Enh #14022: `yii\\web\\UrlManager::setBaseUrl()` now supports aliases (dmirogin)\n- Enh #14061: Added request scope assignments cache to `yii\\rbac\\DbManager::checkAccess()` to avoid duplicate queries for user assignments (leandrogehlen, cebe, nineinchnick, ryusoft)\n- Enh #14081: Added `yii\\caching\\CacheInterface` to make custom cache extensions adoption easier (silverfire)\n- Enh #14087: Added `yii\\web\\View::registerCsrfMetaTags()` method that registers CSRF tags dynamically ensuring that caching doesn't interfere (RobinKamps)\n- Enh #14089: Added tests for `yii\\base\\Theme` (vladis84)\n- Enh #14105: Implemented a solution for retrieving DBMS constraints in `yii\\db\\Schema` (sergeymakinen)\n- Enh #14126: Added variadic parameters support to DI container (SamMousa)\n- Enh #14151: Added `yii\\behaviors\\AttributesBehavior` that assigns values specified to one or multiple attributes of an AR object when certain events happen (bscheshirwork)\n- Enh #14184: Module service locator now falls back to its parent module service locator in case component isn't found (SamMousa)\n- Enh #14188: Add constants and function for sysexits(3) to `ConsoleHelper` (tom--, samdark, cebe)\n- Enh #14273: `yii\\log\\Target::$enabled` now supports callable value (dmirogin)\n- Enh #14294: Added `InputWidget::renderInput()` to move behavior described in `InputWidget` class docs to the class itself (cebe)\n- Enh #14298: The default response formatter configs defined by `yii\\web\\Response::defaultFormatters()` now use the array syntax (brandonkelly)\n- Enh #14363: Added `yii\\widgets\\LinkPager::$linkContainerOptions` and possibility to override tag in `yii\\widgets\\LinkPager::$options` (dmirogin)\n- Enh #14389: Optimize `Validator::validateAttributes()` by calling `attributeNames()` only once (nicdnep)\n- Enh #14417: Added configuration for headers in PHP files generated by `message/extract` command (rob006)\n- Enh #14431: Moved `ActiveQuery::getTablesUsedInFrom()` to `Query` to make the functionality available on the lower layer (cebe)\n- Enh #14620: Updated `yii.activeForm.js` and `yii\\web\\View` to jQuery 3.0 compatible API (silverfire)\n- Enh #14633: Add miliseconds to log time in `\\yii\\log\\Target` (Ni-san)\n- Enh #14664: Add migrate/fresh command to truncate database and apply migrations again (thyseus)\n- Enh #14765: RBAC: add index on `user_id` column in `auth_assignment` table for performance reasons (bicf)\n- Enh #14864: Ability to use dependencies in constructor of migrations (vtvz)\n- Enh #14877: Disabled profiling on connection opening when profiling is disabled (njasm)\n- Enh #14913: Assset hashing now takes asset linking into account to improve cache busting (schmunk42)\n- Enh #14929: Ensure trailing `;` on combining files with `asset` command to fix compiler failures (tanakahisateru)\n- Enh #14958: Added options to copy stacktrace and search for error message to the exception page (cebe)\n- Enh #14967: Added Armenian Translations (gevorgmansuryan)\n- Enh #15015: Added `StringHelper::floatToString()` to safely cast float values independent of the locale, also fixes some places in the framework that use it now (cebe)\n- Chg #7936: Deprecate `yii\\base\\Object` in favor of `yii\\base\\BaseObject` for compatibility with PHP 7.2 (rob006, cebe, klimov-paul)\n- Chg #14201: `yii\\console\\controllers\\MessageController::extractMessagesFromTokens()` is now protected (faenir)\n- Chg #14286: Used primary inputmask package name instead of an alias (samdark)\n- Chg #14321: `yii\\widgets\\MaskedInput` is now registering its JavaScript `clientOptions` initialization code in head section (DaveFerger)\n- Chg #14487: Changed i18n message error to warning (dmirogin)\n\n2.0.12 June 05, 2017\n--------------------\n\n- Bug #4408: Add support for unicode word characters and `+` character in attribute names (sammousa, kmindi)\n- Bug #5442: Fixed problem on load fixture dependencies with database related tests (leandrogehlen)\n- Bug #7946: Fixed a bug when the `form` attribute was not propagated to the hidden input of the checkbox (Kolyunya)\n- Bug #8120: Fixes LIKE special characters escaping for Cubrid/MSSQL/Oracle/SQLite in `yii\\db\\QueryBuilder` (sergeymakinen)\n- Bug #9669: AssetManager and `FileHelper::copyDirectory()` were copying empty directories when using `only` or `except` options. Added an option to disable this (cebe)\n- Bug #10305: Oracle SQL queries with `IN` condition and more than 1000 parameters are working now (silverfire)\n- Bug #10346: Fixed \"DOMException: Invalid Character Error\" in `yii\\web\\XmlResponseFormatter::buildXml()` (sasha-ch)\n- Bug #10372: Fixed console controller including complex typed arguments in help (sammousa)\n- Bug #11230: Include `defaultRoles` in `yii\\rbac\\DbManager->getRolesByUser()` results (developeruz)\n- Bug #11404: `yii\\base\\Model::loadMultiple()` returns true even if `yii\\base\\Model::load()` returns false (zvook)\n- Bug #11719: Fixed `yii\\db\\Connection::$enableQueryCache` caused infinite loop when the same connection was used for `yii\\caching\\DbCache` (michaelarnauts)\n- Bug #12715: Exception `SAVEPOINT LEVEL1 does not exist` instead of deadlock exception (Vovan-VE)\n- Bug #13058: Fixed caught exception thrown during view file rendering produces wrong output (klimov-paul)\n- Bug #13086, #13656: Fixed bug with optional parameters at the beginning of pattern in `yii\\web\\UrlRule` (rob006)\n- Bug #13087: Fixed getting active validators for safe attribute (developeruz, klimov-paul)\n- Bug #13306: Wildcard in `reloadableScripts` in `yii.js` allows 0 characters (arogachev)\n- Bug #13340: Fixed `yii\\db\\Connection::useMaster()` - exception within callback completely disables slaves (Vovan-VE)\n- Bug #13343: Fixed `yii\\i18n\\Formatter::asTime()` to process time-only values without time zone conversion (bizley)\n- Bug #13350: Fixed bug with incorrect caching of `yii\\web\\UrlRule::createUrl()` results in `yii\\web\\UrlManager` (rob006)\n- Bug #13362: Fixed return value of `yii\\caching\\MemCache::setValues()`  (masterklavi)\n- Bug #13379: Fixed `applyFilter()` function in `yii.gridView.js` to work correctly when params in `filterUrl` are indexed (SilverFire, arogachev)\n- Bug #13418: Fixed `QueryBuilder::batchInsert()` if `$rows` is `\\Generator` (lav45)\n- Bug #13494: Fixed `yii\\console\\controllers\\MessageConstroller::saveMessagesToDb()` to work on different DBMS correctly (silverfire)\n- Bug #13513: Fixed RBAC migration to work correctly on Oracle DBMS (silverfire)\n- Bug #13537: Fixed `yii\\web\\CacheSession::destroySession()` to work correctly when session is not written yet (silverfire, papalapa)\n- Bug #13538: Fixed `yii\\db\\BaseActiveRecord::deleteAll()` changes method signature declared by `yii\\db\\ActiveRecordInterface::deleteAll()` (klimov-paul)\n- Bug #13551: Fixed `FixtureController` to load fixtures from subdirectories (d1rtyf1ng3rs, silverfire)\n- Bug #13571: Fix `yii\\db\\mssql\\QueryBuilder::checkIntegrity` for all tables (boboldehampsink)\n- Bug #13577: `yii\\db\\QueryBuilder::truncateTable` should work consistent over all databases (boboldehampsink)\n- Bug #13582: PK column in `yii\\db\\pgsql\\QueryBuilder::resetSequence()` was not quoted properly (boboldehampsink)\n- Bug #13592: Fixes `yii\\db\\oci\\Schema::setTransactionIsolationLevel()` in Oracle (sergeymakinen)\n- Bug #13594: Fixes insufficient quoting in `yii\\db\\QueryBuilder::prepareInsertSelectSubQuery()` (sergeymakinen)\n- Bug #13649: Fixes issue where `['uncheck' => false]` and `['label' => false]` options for `ActiveRadio` and `ActiveCheckbox` were ignored (Alex-Code)\n- Bug #13657: Fixed `yii\\helpers\\StringHelper::truncateHtml()` skip extra tags at the end (sam002)\n- Bug #13670: Fixed alias option from console when it includes `-` or `_` in option name (pana1990)\n- Bug #13671: Fixed error handler trace to work correctly with XDebug (samdark)\n- Bug #13689: Fixed handling of errors in closures (mikehaertl)\n- Bug #13694: `yii\\widgets\\Pjax` now sends `X-Pjax-Url` header with response to fix redirect (wleona3, Faryshta)\n- Bug #13704: Fixed `yii\\validators\\UniqueValidator` to prefix attribute name with model's database table name (vladis84)\n- Bug #13707: Fixed `yii\\web\\ErrorHandler` and `yii\\web\\ErrorAction` not setting correct response code to response object before rendering error view (samdark)\n- Bug #13728: Fixed the bug when `yii\\behaviors\\SluggableBehavior` wasn't preserving immutable slug values (Kolyunya)\n- Bug #13738: Fixed `getQueryParams()` method in `yii.js` to correctly parse URL with question mark and no query parameters (vladdnepr)\n- Bug #13776: Fixed setting precision and scale for decimal columns in MSSQL (arturf)\n- Bug #13790: Fixed error in `\\yii\\widgets\\MaskedInput` JavaScript by raising version required (samdark)\n- Bug #13807: Fixed `yii\\db\\QueryBuilder` to inherit subquery params when building a `INSERT INTO ... SELECT` query (sergeymakinen)\n- Bug #13842: Fixed ambiguous table SQL error while using `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` (vladis84, samdark)\n- Bug #13846: Fixed `Query::count()` issue with `orderBy` (Alex-Code)\n- Bug #13848: `yii\\di\\Instance::ensure()` wasn't throwing an exception when `$type` is specified and `$reference` object isn't instance of `$type` (c-jonua)\n- Bug #13890: `yii\\log\\DbTarget` log messages where not written when a database transaction was rolled back, added support for cloning a `yii\\db\\Connection` (shirase, cebe)\n- Bug #13901: Fixed passing unused parameter to `formatMessage()` call in `\\yii\\validators\\IpValidator` (Kolyunya)\n- Bug #13961: Fixed `unserialize()` error during RBAC rule retrieving from PostgreSQL DBMS (vsguts, nanodesu88, cebe)\n- Bug #14012: `yii\\db\\pgsql\\Schema::findViewNames()` was skipping materialized views (insolita)\n- Bug #14033: Fixed `yii\\filters\\AccessRule::matchIp()` erroring in case IP is not defined under HHVM (Kolyunya)\n- Bug #14042: Fixed ambiguous column name in SELECT in UniqueValidator (cebe)\n- Bug #14052: Fixed processing parse errors on PHP 7 since these are instances of `\\ParseError` (samdark)\n- Bug #14072: Fixed a bug where `\\yii\\db\\Command::createTable()`, `addForeignKey()`, `dropForeignKey()`, `addCommentOnColumn()`, and `dropCommentFromColumn()` weren't refreshing the table cache on `yii\\db\\Schema` (brandonkelly)\n- Bug #14074: Fixed default value of `yii\\console\\controllers\\FixtureController::$globalFixtures` to contain valid class name (lynicidn)\n- Bug #14094: Fixed bug when single `yii\\web\\UrlManager::createUrl()` call my result multiple calls of `yii\\web\\UrlRule::createUrl()` for the same rule (rossoneri)\n- Bug #14133: Fixed bug when calculating timings with mixed nested profile begin and end in `yii\\log\\Logger::calculateTimings()` (bizley)\n- Enh #4793: `yii\\filters\\AccessControl` now can be used without `user` component (bizley)\n- Enh #4999: Added support for wildcards at `yii\\filters\\AccessRule::$controllers` (klimov-paul)\n- Enh #5108: `yii\\validators\\DateValidator` now resets `$timestampAttribute` value on empty validated attribute value (klimov-paul)\n- Enh #8426: `yii\\filters\\AccessRule` now allows passing parameters to the role checking function (fsateler, cebe, Faryshta)\n- Enh #8641: Enhanced `yii\\console\\Request::resolve()` to prevent passing parameters, that begin from digits (silverfire)\n- Enh #11288: Added support for caching of `yii\\web\\UrlRule::createUrl()` results in `yii\\web\\UrlManager` for rules with defaults (rob006)\n- Enh #12528: Added option to disable query logging and profiling in DB command (cebe)\n- Enh #13144: Refactored `yii\\db\\Query::queryScalar()` (Alex-Code)\n- Enh #13179: Added `yii\\data\\Sort::parseSortParam` allowing to customize sort param in descendant class (leandrogehlen)\n- Enh #13221: Make `\\yii\\db\\QueryTrait::limit()` and `\\yii\\db\\QueryTrait::offset()` methods work with `\\yii\\db\\Expression` (Ni-san)\n- Enh #13226: `yii cache` command now warns about the fact that it's not able to flush APC cache from console (samdark)\n- Enh #13240: Client scripts registration in `yii\\widgets\\ActiverForm` was moved to the separate `registerClientScript()` method (uaoleg, silverfire)\n- Enh #13243: Added support for unicode attribute names in `yii\\widgets\\DetailView` (arogachev)\n- Enh #13254: Core validators no longer require `Yii::$app` to be set (sammousa)\n- Enh #13260: Added support for sorting by expression to `\\yii\\data\\Sort` (LAV45, klimov-paul)\n- Enh #13278: `yii\\caching\\DbQueryDependency` created allowing specification of the cache dependency via `yii\\db\\QueryInterface` (klimov-paul)\n- Enh #13352: Added option to not render empty row in `yii\\grid\\GridView` when data is empty and `emptyText` set to `false` (arogachev)\n- Enh #13356: Support multiple paths in `MigrateController::$migrationPath` to load non-namespaced migrations for BC with existing applications and extensions (schmunk42, cebe)\n- Enh #13360: Added Dockerized test setup for the framework tests (schmunk42)\n- Enh #13369: Added ability to render current `yii\\widgets\\LinkPager` page disabled (aquy)\n- Enh #13376: Data provider now automatically sets an ID so there is no need to set it manually in case multiple data providers are used with pagination (SamMousa)\n- Enh #13407: Added URL-safe base64 encode/decode methods to `StringHelper` (andrewnester)\n- Enh #13467: `yii\\data\\ActiveDataProvider` no longer queries models if models count is zero (kLkA, Kolyunya)\n- Enh #13523: Fixed pluralization and singularization for words `pasta`, `currency` (developeruz, silverfire)\n- Enh #13550: Refactored `unset()` call order in `yii\\di\\ServiceLocator::set()` (Lanrik)\n- Enh #13560: Refactored `\\yii\\widgets\\FragmentCache::getCachedContent()`, added tests (Kolyunya)\n- Enh #13576: Added support of `srcset` to `yii\\helpers\\Html::img()` (Kolyunya)\n- Enh #13577: Implemented `yii\\db\\mssql\\QueryBuilder::resetSequence()` (boboldehampsink)\n- Enh #13582: Added tests for all `yii\\db\\QueryBuilder::resetSequence()` implementations, fixed SQLite implementation (boboldehampsink)\n- Enh #13642: Allow overriding the function for creating related queries in ActiveRecord by adding `createRelationQuery()` (leandrogehlen)\n- Enh #13650: Improved `yii\\base\\Security::hkdf()` to take advantage of native `hash_hkdf()` implementation in PHP >= 7.1.2  (charlesportwoodii)\n- Enh #13695: `yii\\web\\Response::setStatusCode()` method now returns the Response object itself (kyle-mccarthy)\n- Enh #13698: `yii\\grid\\DataColumn` filter is automatically generated as dropdown list in case of `format` set to `boolean` (bizley)\n- Enh #13770: Added support for `yii\\widgets\\Menu` item classes definition in the form of an array (Kolyunya)\n- Enh #13820: Add new HTTP status code 451 (yyxx9988)\n- Enh #13823: Refactored migrations template (Kolyunya)\n- Enh #13837: Refactored masking of CSRF tokens (sammousa)\n- Enh #13845: `mt_rand()` is used instead of `rand()` in `yii\\captcha\\CaptchaAction` (kalessil)\n- Enh #13883: `yii\\data\\SqlDataProvider` now provides automatic fallback for the case when `totalCount` is not specified (SamMousa)\n- Enh #13911: Significantly enhanced MSSQL schema reading performance (paulzi, WebdevMerlion)\n- Enh #13945: Removed Courier New from error page fonts list since it looks bad on Linux (samdark)\n- Enh #13963: Added tests for `yii\\behaviors\\TimestampBehavior` (vladis84)\n- Enh #13976: Disabled IPv6 check on `\\yii\\validators\\IpValidator` as it turns out it is not needed for `inet_*` methods to work (mikk150)\n- Enh #13981: `yii\\caching\\Cache::getOrSet()` now supports both `Closure` and `callable` (silverfire)\n- Enh #13994: Refactored `yii\\filters\\RateLimiter`. Added tests (vladis84)\n- Enh #14059: Removed unused AR instantiating for calling of static methods (ElisDN)\n- Enh #14067: `yii\\web\\View::clear()` sets populated arrays to empty arrays instead of null, also changed default values to empty array (craiglondon)\n- Enh #14098: `yii\\helpers\\BaseFileHelper::normalizeOptions()` is now protected (brandonkelly)\n- Enh: Added `yii\\di\\Instance::__set_state()` method to restore object after serialization using `var_export()` function (silvefire)\n\n\n2.0.11.2 February 08, 2017\n--------------------------\n\n- Bug #13501: Fixed `yii\\rbac\\DbManager::getRule()` and `yii\\rbac\\DbManager::getRules()` to properly handle resource data came from Rule table when using PostgreSQL (StalkAlex)\n- Bug #13508: Fixed duplicate attachment of behavior BC break (cebe)\n- Bug #13522: Issue with UrlRule, which created duplicate slashes when a default value was used (cebe)\n- Bug #13533: Fixed BC break in `yii\\validators\\ExistValidator::$targetAttribute` (developeruz)\n\n\n2.0.11.1 February 02, 2017\n------------------------\n\n- Bug #11502: Fixed `yii\\console\\controllers\\MessageController` to properly populate missing languages in case of extraction with \"db\" format (bizley)\n- Bug #13489: Fixed button names in ActionColumn to contain proper `Yii::t()` tags and restored missing translations for `el`, `fa`, `ja`, `ru`, and `sk` (cebe, softark)\n\n\n2.0.11 February 01, 2017\n------------------------\n\n- Bug #4113: Error page stacktrace was generating links to private methods which are not part of the API docs (samdark)\n- Bug #7727: Fixed `yii\\helpers\\StringHelper::truncateHtml()` leaving extra tags (developeruz)\n- Bug #9305: Fixed MSSQL `Schema::TYPE_TIMESTAMP` to be 'datetime' instead of 'timestamp', which is just an incremental number (nkovacs)\n- Bug #9616: Fixed mysql\\Schema::loadColumnSchema to set enumValues attribute correctly if enum definition contains commas (fphammerle)\n- Bug #9796: Initialization of not existing `yii\\grid\\ActionColumn` default buttons (arogachev)\n- Bug #10488: Fixed incorrect behavior of `yii\\validation\\NumberValidator` when used with locales where decimal separator is comma (quantum13, samdark, rob006)\n- Bug #11122: Fixed can not use `orderBy` with aggregate functions like `count` (Ni-san)\n- Bug #11771: Fixed semantics of `yii\\di\\ServiceLocator::__isset()` to match the behavior of `__get()` which fixes inconsistent behavior on newer PHP versions (cebe)\n- Bug #12133: Fixed `getDbTargets()` function in `yii\\log\\migrations\\m141106_185632_log_init` that would create a log table correctly (bumstik)\n- Bug #12213: Fixed `yii\\db\\ActiveRecord::unlinkAll()` to respect `onCondition()` of the relational query (silverfire)\n- Bug #12345: Fixed `Formatter::asCurrency()` for proper decimal formatting (Oxyaction)\n- Bug #12599: Fixed MSSQL fail to work with `nvarbinary`. Enhanced SQL scripts compatibility with older versions (samdark)\n- Bug #12681: Changed `data` column type from `text` to `blob` to handle null-byte (`\\0`) in serialized RBAC rule properly (silverfire)\n- Bug #12703: Fixed `StringHelper::truncateHtml()` non functional when dom PHP extension is disabled (samdark)\n- Bug #12713: Fixed `yii\\caching\\FileDependency` to clear stat cache before reading filemtime (SG5)\n- Bug #12714: Fixed `yii\\validation\\EmailValidator` to prevent false-positives checks when property `checkDns` is set to `true` (silverfire)\n- Bug #12735: Fixed `yii\\console\\controllers\\MigrateController` creating multiple primary keys for field `bigPrimaryKey:unsigned` (SG5)\n- Bug #12791: Fixed `yii\\behaviors\\AttributeTypecastBehavior` unable to automatically detect `attributeTypes`, triggering PHP Fatal Error (klimov-paul)\n- Bug #12795: Fixed inconsistency, `Yii::$app->controller` is available after handling the request since 2.0.10, this is now also the case for `Yii::$app->controller->action` (cebe)\n- Bug #12803, #12921: Fixed BC break in `yii.activeForm.js` introduced in #11999. Reverted commit 3ba72da (silverfire)\n- Bug #12810: Fixed `yii\\rbac\\DbManager::getChildRoles()` and `yii\\rbac\\PhpManager::getChildRoles()` throws an exception when role has no child roles (mysterydragon)\n- Bug #12822: Fixed `yii\\i18n\\Formatter::asTimestamp()` to process timestamp with miliseconds correctly (h311ion)\n- Bug #12824: Enabled usage of `yii\\mutex\\FileMutex` on Windows systems (davidsonalencar)\n- Bug #12828: Fixed handling of nested arrays, objects in `\\yii\\grid\\GridView::guessColumns` (githubjeka)\n- Bug #12836: Fixed `yii\\widgets\\GridView::filterUrl` to not ignore `#` part of filter URL (cebe, arogachev)\n- Bug #12856: Fixed `yii\\web\\XmlResponseFormatter` to use `true` and `false` to represent booleans (samdark)\n- Bug #12879: Console progress bar was not working properly in Windows terminals (samdark, kids-return)\n- Bug #12880: Fixed `yii\\behaviors\\AttributeTypecastBehavior` marks attributes with `null` value as 'dirty' (klimov-paul)\n- Bug #12904: Fixed lowercase table name in migrations (zlakomanoff)\n- Bug #12939: Hard coded table names for MSSQL in RBAC migration (arogachev)\n- Bug #12969: Improved unique ID generation for `yii\\widgets\\Pjax` widgets (dynasource, samdark, rob006)\n- Bug #12974: Fixed incorrect order of migrations history in case `yii\\console\\controllers\\MigrateController::$migrationNamespaces` is in use (evgen-d, klimov-paul)\n- Bug #13071: Help option for commands was not working in modules (arogachev, haimanman)\n- Bug #13089: Fixed `yii\\console\\controllers\\AssetController::adjustCssUrl()` breaks URL reference specification (`url(#id)`) (vitalyzhakov)\n- Bug #13105: Fixed `validate()` method in `yii.activeForm.js` to prevent unexpected form submit when `forceValidate` set to `true` (silverfire)\n- Bug #13108: Fix execute command with negative integer parameter (pana1990, uaoleg)\n- Bug #13118: Fixed `handleAction()` function in `yii.js` to handle attribute `data-pjax=0` as disabled PJAX (silverfire, arisk)\n- Bug #13128: Fixed incorrect position of {pos} string in ColumnSchemaBuilder `__toString` (df2)\n- Bug #13159: Fixed `destroy` method in `yii.captcha.js` which did not work as expected (arogachev)\n- Bug #13198: Fixed order of checks in `yii\\validators\\IpValidator` that sometimes caused wrong error message (silverfire)\n- Bug #13200: Creating URLs for routes specified in `yii\\rest\\UrlRule::$extraPatterns` did not work if no HTTP verb was specified (cebe)\n- Bug #13212: Fixed `DbSession::regenerateID()` failure when `session_regenerate_id()` fails (andrewnester)\n- Bug #13229: Fix fetching schema information for `pgsql` when `PDO::ATTR_CASE` is set (klimov-paul)\n- Bug #13231: Fixed `destroy` method in `yii.gridView.js` which did not work as expected (arogachev)\n- Bug #13232: Event handlers were not detached with changed selector in `yii.gridView.js` (arogachev)\n- Bug #13277: Fixed invalid parsing of `--` (\"End of Options\" special argument) in CLI (rugabarbo)\n- Bug #13287: Fixed translating \"and\" separator in `UniqueValidator` error message (jetexe)\n- Bug #13300: Allow pjax with \"data-pjax\" with no value in `yii.js` (arogachev)\n- Bug #13307: Preventing of race conditions in script filter in `yii.js` works incorrectly (arogachev)\n- Bug #13309: Fixes incorrect console width/height detecting with using Stty on Mac (nowm)\n- Bug #13310: Handle relative and absolute URLs coincidence in CSS filter in `yii.js` (arogachev)\n- Bug #13312: `skipOuterContainers` option was incorrectly passed to pjax in `handleAction` in `yii.js` (arogachev)\n- Bug #13326: Fixed wrong background color generation in `BaseConsole::renderColoredString()` (nowm, silverfire)\n- Bug #13401: Fixed lack of escaping of request dump at exception screens (samdark)\n- Bug #13416: Fixed `yii\\web\\MultipartFormDataParser` adds an extra newline to every value (klimov-paul)\n- Enh #475: Added Bash and Zsh completion support for the `./yii` command (cebe, silverfire)\n- Enh #6242: Access to validator in inline validation (arogachev)\n- Enh #6373: Introduce `yii\\db\\Query::emulateExecution()` to force returning an empty result for a query (klimov-paul)\n- Enh #6809: Added `yii\\caching\\Cache::$defaultDuration` property, allowing to set custom default cache duration (sdkiller)\n- Enh #7333: Improved error message for `yii\\di\\Instance::ensure()` when a component does not exist (cebe)\n- Enh #7420: Attributes for prompt generated with `renderSelectOptions` of `\\yii\\helpers\\Html` helper (arogachev)\n- Enh #7435: Added `EVENT_BEFORE_RUN`, `EVENT_AFTER_RUN` and corresponding methods to `yii\\base\\Widget` (petrabarus)\n- Enh #7820: Add `or` relation for `targetAttribute` in `yii\\validators\\UniqueValidator` (developeruz)\n- Enh #8293: `yii\\db\\Query` can be passed to `insert` method in `yii\\db\\QueryBuilder` (voroks)\n- Enh #9053: Added`yii\\grid\\RadioButtonColumn` (darwinisgod)\n- Enh #9162: Added support of closures in `value` for attributes in `yii\\widgets\\DetailView` (arogachev)\n- Enh #10970: Allow omit specifying empty default params on URL creation (rob006)\n- Enh #11037: `yii.js` and `yii.validation.js` use `Regexp.test()` instead of `String.match()` (arogachev, nkovacs)\n- Enh #11163: Added separate method for client-side validation options `yii\\validators\\Validator::getClientOptions()` (arogachev)\n- Enh #11464: Populate foreign key names from schema (joaoppereira)\n- Enh #11697: Added `filterHaving()`, `andFilterHaving()` and `orFilterHaving()` to `yii\\db\\Query` (nicdnepr, samdark)\n- Enh #11756: Added type mapping for `varbinary` data type in MySQL DBMS (silverfire)\n- Enh #11758: Implemented Dependency Injection Container configuration using Application configuration array (silverfire)\n- Enh #11929: Changed `type` column type from `int` to `smallInt` in RBAC migrations (silverfire)\n- Enh #11959: Added `yii\\caching\\Cache::getOrSet()` method (silverfire)\n- Enh #12000: Added EVENT_INIT to widget (user57376)\n- Enh #12015: Changed visibility `yii\\db\\ActiveQueryTrait::createModels()` from private to protected (ArekX, dynasource)\n- Enh #12145: Added `beforeCacheResponse` and `afterRestoreResponse` to `yii\\filters\\PageCache` to be more easily extendable (sergeymakinen)\n- Enh #12390: Avoid creating queries with false where condition (`0=1`) when fetching relational data (klimov-paul)\n- Enh #12399: Added `ActiveField::addAriaAttributes` property for `aria-required` and `aria-invalid` attributes rendering (Oxyaction, samdark)\n- Enh #12419: Added ability to remove root tag and object tags for `yii\\web\\XmlResponseFormatter` (mhthnz, samdark)\n- Enh #12612: Query conditions added with `yii\\db\\Query::andWhere()` now get appended to the existing conditions if they were already being joined with the `and` operator (brandonkelly)\n- Enh #12619: Added catch `Throwable` in `yii\\base\\ErrorHandler::handleException()`, transactions and simlar places where consistency must be kept after exception (rob006, cebe)\n- Enh #12659: Suggest alternatives when console command was not found (mdmunir, cebe)\n- Enh #12691: Added support for protocol-relative URLs in `yii\\web\\UrlRule::$pattern` (erickskrauch)\n- Enh #12710: Added `beforeItem` and `afterItem` to `yii\\widgets\\ListView` (mdmunir, silverfire)\n- Enh #12725: Enhanced `yii\\widgets\\Menu` to allow item option `active` be a Closure (voskobovich, silverfire)\n- Enh #12726: `yii\\base\\Application::$version` converted to `yii\\base\\Module::$version` virtual property, allowing to specify version as a PHP callback (klimov-paul)\n- Enh #12732: Added `is_dir()` validation to `yii\\helpers\\BaseFileHelper::findFiles()` method (zalatov, silverfire)\n- Enh #12738: Added support for creating protocol-relative URLs in `UrlManager::createAbsoluteUrl()` and `Url` helper methods (rob006)\n- Enh #12748: Migration generator now tries to fetch reference column name for foreignKey from schema if it's not set explicitly (MKiselev)\n- Enh #12750: `yii\\widgets\\ListView::itemOptions` can be a closure now (webdevsega, silverfire)\n- Enh #12758: Added the ability to use instances of `\\yii\\db\\Query` class as values in the `\\yii\\db\\QueryBuilder::insert()` method (PowerGamer1)\n- Enh #12771: Skip \\yii\\rbac\\PhpManager::checkAccessRecursive and \\yii\\rbac\\DbManager::checkAccessRecursive if role assignments are empty (Ni-san)\n- Enh #12790: Added `scrollToErrorOffset` option for `yii\\widgets\\ActiveForm` which adds ability to specify offset in pixels when scrolling to error (mg-code)\n- Enh #12798: Changed `yii\\cache\\Dependency::getHasChanged()` (deprecated, to be removed in 2.1) to `yii\\cache\\Dependency::isChanged()` (dynasource)\n- Enh #12807: Added console controller checks for `yii\\console\\controllers\\HelpController` (schmunk42)\n- Enh #12816: Added `columnSchemaClass` option for `yii\\db\\Schema` which adds ability to specify custom `yii\\db\\ColumnSchema` class (nanodesu88)\n- Enh #12854: Added `RangeNotSatisfiableHttpException` to cover HTTP error 416 file request exceptions (zalatov)\n- Enh #12881: Added `removeValue` method to `yii\\helpers\\BaseArrayHelper` (nilsburg)\n- Enh #12901: Added `getDefaultHelpHeader` method to the `yii\\console\\controllers\\HelpController` class to be able to override default help header in a class heir (diezztsk)\n- Enh #12988: Changed `textarea` method within the `yii\\helpers\\BaseHtml` class to allow users to control whether HTML entities found within `$value` will be double-encoded or not (cyphix333)\n- Enh #13020: Added `disabledListItemSubTagOptions` attribute for `yii\\widgets\\LinkPager` in order to customize the disabled list item sub tag element (nadar)\n- Enh #13035: Use ArrayHelper::getValue() in SluggableBehavior::getValue() (thyseus)\n- Enh #13036: Added shortcut methods `asJson()` and `asXml()` for returning JSON and XML data in web controller actions (cebe)\n- Enh #13050: Added `yii\\filters\\HostControl` allowing protection against 'host header' attacks (klimov-paul, rob006)\n- Enh #13074: Improved `yii\\log\\SyslogTarget` with `$options` to be able to change the default `openlog` options (timbeks)\n- Enh #13122: Optimized query for information about foreign keys in `yii\\db\\oci` (zlakomanoff)\n- Enh #13134: Added logging URL rules (bashkarev)\n- Enh #13202: Refactor validateAttribute method in UniqueValidator (developeruz)\n- Enh #13219: Enhancements for `yii\\db\\Connection` (Vovan-VE)\n  - Added `shuffleMasters` option which adds ability to disable shuffling of masters connections.\n  - Added `getMaster()` getter and `master` property for getting currently active master connection.\n  - Extracted `openFromPoolSequentially()` protected method from `openFromPool()` protected method.\n- Enh #13264: Added `yii\\widgets\\InputWidget::$field` field, allowing access to the related `yii\\widget\\ActiveField` instance (klimov-paul)\n- Enh #13266: Added `yii\\validators\\EachValidator::$stopOnFirstError` allowing addition of more than one error (klimov-paul)\n- Enh #13268: Added logging of memory usage (bashkarev)\n- Enh #13417: Allow customizing `yii\\data\\ActiveDataProvider` in `yii\\rest\\IndexAction` (leandrogehlen)\n- Enh #13453: Select only primary key when counting records in UniqueValidator (developeruz)\n- Enh: Added constants for specifying `yii\\validators\\CompareValidator::$type` (cebe)\n- Enh: Refactored `yii\\web\\ErrorAction` to make it reusable (silverfire)\n- Enh: Added support for field `yii\\console\\controllers\\BaseMigrateController::$migrationNamespaces` setup from CLI (schmunk42)\n- Chg #11906: Updated `yii\\widgets\\MaskedInput` inputmask dependency to `~3.3.3` (samdark)\n\n2.0.10 October 20, 2016\n-----------------------\n\n- Bug #7670: Added `yii\\web\\UrlNormalizer` for normalizing requests with and without trailing slashes (rob006, cronfy, klimov-paul)\n- Bug #7670: Added `UrlNormalizer` for normalizing requests with and without trailing slashes (rob006, cronfy, klimov-paul)\n- Bug #9027: Fixed descendant class of `yii\\web\\UploadedFile` returns parent instances in case invoked after it (andrewnester)\n- Bug #9277: Fixed `yii\\console\\controllers\\AssetController` looses custom options of 'target' bundles (petrabarus, klimov-paul)\n- Bug #9561: Fixed `canGetProperty()` and `canSetProperty()` returns `false` for `yii\\db\\BaseActiveRecord` attributes (klimov-paul, Ni-san)\n- Bug #10358: Fixed race condition in `yii.js` AJAX prefilter (silverfire)\n- Bug #10563: Fixed forming `Content-Disposition` header for file downloads (samdark)\n- Bug #10567: Fixed `yii\\console\\controllers\\AssetController` looses bundle override configuration, which makes it external one (klimov-paul)\n- Bug #10587: Latest used controller instance was not available in `Response::EVENT_AFTER_SEND` handler (samdark, andrewnester)\n- Bug #10681: Reverted fix of beforeValidate event calling in `yii.activeForm.js` (silverfire)\n- Bug #11347: Fixed `yii\\widgets\\Pjax::registerClientScript()` to pass custom `container` to the PJAX JS plugin (silverfire)\n- Bug #11352: Fixed `updateInputs()` method in `yii.activeForm.js` to prevent reading property of undefined (silverfire)\n- Bug #11461: Fixed migration tool error when create migrate with comma in `defaultValue` (pana1990, s-o-f)\n- Bug #11541: Fixed default MySQL integer display width for unsigned primary key (h311ion, rob006, cebe)\n- Bug #11715: Fixed JS validation when the same model's attribute file input is listed more than once on the same page (uaoleg)\n- Bug #11726: `yii\\web\\DbSession` was echoing database errors in production mode (samdark, pastuhov, deadkrolik)\n- Bug #11907: Fixed `yii\\helpers\\Console::getScreenSize()` on Windows was giving out width and height swapped (Spell6inder, samdark, cebe)\n- Bug #11912: Fixed PostgreSQL Schema to support negative default values for integer/float/decimal columns (nsknewbie)\n- Bug #11921: Fixed URL decoding in `yii.getQueryParams()` to handle `+` (plus) character properly (silverfire)\n- Bug #11922: Fixed `yii\\log\\FileTarget` does not apply `fileMode` for rotated via copy files (klimov-paul)\n- Bug #11947: Fixed `gridData` initialization in `yii.gridView.js` (pavlm)\n- Bug #11949: Fixed `yii\\widgets\\ActiveField::end()` generates close tag when it's `option['tag']` is `null` (egorio)\n- Bug #11977: Fixed `yii\\rest\\Serializer::serialize()` serializes DataProvider incorrectly, if models keys do not compose integer sequence (dcb9, klimov-paul)\n- Bug #11990: Fixed `yii\\db\\BaseActiveRecord::refresh()` may set incorrect `oldAttributes` values at some cases (only-victor)\n- Bug #12009: Do not render `for` field label attribute for active form `RadioList` and `CheckboxList` (shevchik87, samdark)\n- Bug #12030: Fixed `yii\\base\\Model::offsetExists()` throws an exception on un-existing field (klimov-paul)\n- Bug #12037: Fixed 2.0.7 regression in memcahe/memcached cache backend (samdark)\n- Bug #12043: Fixed `yii\\helpers\\Json::encode()` encodes empty array returned by `JsonSerializable::jsonSerialize()` as object (klimov-paul)\n- Bug #12053: `./yii migrate/create` was generating wrong code when using `bigPrimaryKey` (VojtechH, samdark)\n- Bug #12068: Added missing `LEVEL_PROFILE` for the syslog target (Mak-Di)\n- Bug #12100: Fixed `yii\\filters\\HttpCache` was sending an empty Pragma header (sergeymakinen)\n- Bug #12107: Fixed REST Serializer to validate input for 'expand' and 'fields' parameter, which crashed on array input (njspok, cebe)\n- Bug #12143: Fixed `yii\\db\\BaseActiveRecord::updateAttributes()` change `isNewRecord` state for the new model (klimov-paul)\n- Bug #12152: Fixed BC break for `yii\\validators\\UniqueValidator` custom message when validating multiple attributes (rob006)\n- Bug #12293: Fixed MSSQL `yii\\db\\mssql\\Schema::resolveTableNames()` when using linked database tables (hAppywAy)\n- Bug #12331: Fixed bug with incorrect currency formatter output, when `$thousandSeparator` was explicitly set (cebe)\n- Bug #12423: Fixed migration tool problem of creating fields with brackets in comment (pana1990)\n- Bug #12428: Fixed `yii\\db\\mysql\\QueryBuilder` causes warning when insert default rows into a table without primary key (DrmagicE)\n- Bug #12431: Fix bug when lock file was not removed after `yii\\mutex\\FileMutex::release()` (rob006)\n- Bug #12446: Disable slaves when execute migrations to resolve master-slave replication no-sync (lichunqiang)\n- Bug #12463: Fixed `yii\\web\\Request::getBodyParams()` does not pass full 'content-type' value to `yii\\web\\RequestParserInterface::parse()` (klimov-paul)\n- Bug #12537: Fixes issues with spaces in `StringHelper:truncateHtml` (Alex-Code)\n- Bug #12554: Fixed `yii\\validators\\UniqueValidator` error of getting first model indexed by field (DrDeath72)\n- Bug #12599: Fixed casting of `binary()` type for MSSQL (silverfire)\n- Bug #12605: Make 'safe' validator work on write-only properties (arthibald, CeBe)\n- Bug #12629: Fixed `yii\\widgets\\ActiveField::widget()` to call `adjustLabelFor()` for `InputWidget` descendants (coderlex)\n- Bug #12649: Fixed consistency of `indexBy` handling for `yii\\db\\Query::column()` (silverfire)\n- Enh #384: Added ability to run migration from several locations via `yii\\console\\controllers\\BaseMigrateController::$migrationNamespaces` (klimov-paul)\n- Enh #6996: Added `yii\\web\\MultipartFormDataParser`, which allows proper processing of 'multipart/form-data' encoded non POST requests (klimov-paul)\n- Enh #8719: Add support for HTML5 attributes on submitbutton (formaction/formmethod...) for ActiveForm (VirtualRJ)\n- Enh #9469: Added support for namespaced migrations via `yii\\console\\controllers\\BaseMigrateController::migrationNamespaces` (klimov-paul)\n- Enh #9708: Added `yii\\console\\controllers\\AssetController::deleteSource` option allowing deletion of the source asset files after compression (pana1990, klimov-paul)\n- Enh #9989: ActiveForm now respects formtarget, formmethod and formenctype attributes of submit button (AnatolyRugalev)\n- Enh #10243: Added `yii\\data\\Sort::setAttributeOrders()` method allowing manual setup of current sort (klimov-paul)\n- Enh #10583: Do not silence session errors in debug mode (samdark)\n- Enh #11096: Added support for PSR-2 style migration naming for namespaced migrations (klimov-paul)\n- Enh #11245: Added `yii\\rbac\\ManagerInterface::getChildRoles()` method, allowing finding child roles for the given one (githubjeka)\n- Enh #11275: Added possibility of unset or force replace former value in `yii\\helpers\\ArrayHelper::merge()` (mdmunir, rob006)\n- Enh #11309: Added `yii\\web\\Request::getHostName()` method that returns hostname of current request (rob006)\n- Enh #11494: `yii.reloadableScripts` now support wildcards with `*` character (silverfire)\n- Enh #11658: Added argument to `yii\\grid\\ActionColumn::urlCreator` callback, which holds reference to the column instance (klimov-paul)\n- Enh #11804: Added `yii\\behaviors\\AttributeTypecastBehavior` for maintaining of strict ActiveRecord attribute types (klimov-paul)\n- Enh #11835: Fixed `\\yii\\db\\mssql\\QueryBuilder::$typeMap[TYPE_TEXT]` - `NTEXT` data type was deprecated in MSSQL (githubjeka)\n- Enh #11844: Added the ability to customize HTML attributes of label and value tags in `\\yii\\widgets\\DetailView` (githubjeka)\n- Enh #11950: Improve `yii\\helpers\\BaseArrayHelper::keyExists()` speed (egorio)\n- Enh #11979: Added `yii\\mutex\\OracleMutex` which implements mutex \"lock\" mechanism via Oracle locks (zlakomanoff)\n- Enh #12028: Add -h|--help option to console command to display help information (pana1990)\n- Enh #12038: Introduced `yii\\base\\ViewNotFoundException` which is thrown when views file doesn't exists, used it in `ViewAction` (samdark)\n- Enh #12048: Improved message extraction command performance (samdark)\n- Enh #12073: Added the ability to suppress the generation of input hint when it is specified through `yii\\base\\Model::attributeHints()` (PowerGamer1)\n- Enh #12082: Used `jQuery.on(` instead of event method to ensure forwards compatibility (newerton)\n- Enh #12099: `yii\\filters\\HttpCache` no longer returns 304 HTTP code when callbacks return null (sergeymakinen)\n- Enh #12193: Added the ability to suppress the generation of duplicate error messages in `yii\\helpers\\Html::errorSummary()`. Added the ability to display error messages beyond the first error for each model attribute (PowerGamer1)\n- Enh #12198: Added `time` and `datetime` validator short names (nkovacs)\n- Enh #12230: Allows BaseHtml::activeListInput to override the field value (RangelReale)\n- Enh #12296: Added value validation to `yii\\log\\Target::setLevels()` (Mak-Di)\n- Enh #12376: Added parameter to `yii.activeForm.js` `validate()` method to be able to force validation (DrDeath72)\n- Enh #12382: Changed `yii\\widgets\\MaskedInput` to use `jQuery` instead of `$` to prevent conflicts (samdark)\n- Enh #12440: Added `yii\\base\\Event::offAll()` method allowing clear all registered class-level event handlers (klimov-paul)\n- Enh #12499: When AJAX validation in enabled, `yii.activeForm.js` will run it forcefully on form submit to display all possible errors (silverfire)\n- Enh #12580: Make `yii.js` comply with strict and non-strict javascript mode to allow concatenation with external code (mikehaertl)\n- Enh #12664: Added support for wildcards for `optional` at `yii\\filters\\auth\\AuthMethod` (mg-code)\n- Enh #12744: Added `afterInit` event to `yii.activeForm.js` (werew01f)\n- Enh: Method `yii\\console\\controllers\\AssetController::getAssetManager()` automatically enables `yii\\web\\AssetManager::forceCopy` in case it is not explicitly specified (pana1990, klimov-paul)\n\n\n2.0.9 July 11, 2016\n-------------------\n\n- Bug #6347: `inverseOf()` not working for dynamic relational queries (laszlovl)\n- Bug #8644: Fixed trying to ENABLE/DISABLE TRIGGER ALL on a view in PostgreSQL (ricpelo)\n- Bug #9950: Updated `yii\\grid\\DataColumn::getHeaderCellLabel()` to extract attribute label from the `filterModel` of Grid (silverfire)\n- Bug #10613: Fixed PostgreSQL Schema to return correct column names for unique indexes that have mixed case column names (cebe)\n- Bug #10681: Fixed active form `beforeValidate` wasn't triggered in some cases (lynicidn)\n- Bug #11252: Use strict comparison on `ActiveRecord::hasAttribute()` to avoid cases where it returns true when a number is passed to it (Faryshta)\n- Bug #11322: Fixed incorrect error message in `yii\\validators\\UniqueValidator` for composite `targetAttribute` (PowerGamer1, silverfire, cebe)\n- Bug #11429: Fixed `yii\\i18n\\PhpMessageSource::loadFallbackMessages()` not to log error when source and language is same, but locales are different (silverfire)\n- Bug #11459: Fixed flash messages not destroyed when `session.auto_start = 1` set in php.ini (cartmanchen)\n- Bug #11498: Fixed inability to save serialized object into PostgreSQL binary column (klimov-paul)\n- Bug #11507: Fixed `yii\\validators\\EachValidator::validateAttribute()` does not respect `skipOnEmpty` rule parameter (webdevsega)\n- Bug #11523: Fixed `yii\\web\\User::checkRedirectAcceptable()` to treat acceptable content type `*/*` as `*` (silverfire)\n- Bug #11527: Fixed `bigPrimaryKey()` for SQLite (dynasource)\n- Bug #11528: Fixed `yii\\i18n\\MessageFormatter` construction exception caught for PHP 7 compatibility (subdee, cebe)\n- Bug #11532: Fixed casting of empty char value to `null` resulting in integrity constraint violation for not null columns (samdark)\n- Bug #11536: Fixed regression introduced in 2.0.8, where scalar value was not allowed in `QueryBuilder` `IN` condition anymore (cebe)\n- Bug #11549: Fixed `yii\\helpers\\ArrayHelper::getValue()` to work properly with float keys (zsounder, AnikanovD)\n- Bug #11561: Fixed DI container throwing exceptions for optional dependencies (SamMousa)\n- Bug #11571: Fixed `yii\\db\\ColumnSchemaBuilder` to work with custom column types (andrey-mokhov, silverfire)\n- Bug #11662: Fixed `schema-oci.sql` for RBAC (jonny7)\n- Bug #11672: Fixed `yii\\validators\\NumberValidator` erroring when value is an object without `__toString()` method (SamMousa)\n- Bug #11686: `yii\\helpers\\ArrayHelper::isIn()` comparison did not work in strict mode (taobig)\n- Bug #11693: Handle `yii\\db\\QueryBuilder::batchInsert()` calls with no data to insert (rob006)\n- Bug #11723: Fixed PHP 7 + XDebug error handling displaying \"Expected array for frame 0\" (tanakahisateru)\n- Bug #11735: Fixed `yii\\web\\UploadedFile` to return `null` when there's no file uploaded (brummm)\n- Bug #11739: Fixed `yii\\helpers\\ArrayHelper::index()` losing precision for float keys (AnikanovD)\n- Bug #11774: Fixed incorrect recusuive symlinks check in `yii\\helpers\\FileHelper` (AnikanovD)\n- Bug #11822: Fixed exception on non-string value provided as CSRF token (cebe)\n- Bug #11847: Fixed `yii\\widgets\\Pjax` to properly respond with partials when custom selector is used for container (pigochu, samdark)\n- Bug #11863: Fixed usage of `mb_substr()` with PHP < 5.4.8 where length of NULL was treated the same as 0 (samdark)\n- Bug #11865: Fixed setting `selected` for dropdown list using options (samdark)\n- Bug #11878: Fixed i18n gettext fallback language message loading (stevekr)\n- Bug #11896: Fix for DROP TRIGGER in migrations from RBAC. (barradas-alberto)\n- Enh #8795: Refactored `yii\\web\\User::loginByCookie()` in order to make it easier to override (maine-mike, silverfire)\n- Enh #9574: Implicit run `yii\\db\\ColumnSchemaBuilder::null()` when default value is set to `null`. (rob006)\n- Enh #9948: `yii\\rbac\\PhpManager` now invalidates script file cache performed by 'OPCache' or 'APC' on file saving (klimov-paul)\n- Enh #10422: Added `null` method on `yii\\db\\ColumnSchemaBuilder` to explicitly set column nullability (nevermnd)\n- Enh #11168: `yii\\helpers\\BaseHtml` now uses abstracted `booleanInput()` and `activeBooleanInput()` methods to render `radio()`, `checkbox()`, `activeRadio()` and `activeCheckbox()` (cesarnicola)\n- Enh #11195: Added ability to append custom string to schema builder column definition (df2, samdark)\n- Enh #11212: Added headers to PO file in `yii\\i18n\\GettextPoFile::save()` (stevekr)\n- Enh #11414: Files specified as `null` in `yii\\web\\AssetBundle` won't be registered (Razzwan)\n- Enh #11428: Speedup SQL query in `yii\\db\\oci\\Schema::findColumns()` (SSiwek)\n- Enh #11432: Added HTTP status 421 \"Misdirected Request\" to list of statuses in `yii\\web\\Response` (dasmfm)\n- Enh #11438: Configurable `yii\\helpers\\Markdown` default flavor (mdmunir)\n- Enh #11462: Added support of filtering rules to `yii\\log\\Target::logVar` (HaruAtari)\n- Enh #11462: Added `yii\\helpers\\BaseArrayHelper::filter()` method (HaruAtari)\n- Enh #11484: Speed up `yii\\db\\oci\\Schema::loadTableSchema()` for Oracle DBMS (SSiwek)\n- Enh #11490: Added `yii\\data\\ArrayDataProvider::$modelClass` property to specify a model used to provide column labels even when data array is empty (PowerGamer1)\n- Enh #11591: Added support for wildcards for `only` and `except` at `yii\\base\\ActionFilter` (klimov-paul)\n- Enh #11679: Extracted `yii\\rbac\\CheckAccessInterface` from `yii\\rbac\\ManagerInterface` (SamMousa, samdark, mdomba)\n- Enh #11725: Added indexes on message tables (OndrejVasicek)\n- Enh #11729: Added `yii\\grid\\CheckboxColumn::$cssClass` property to specify a class added to checkbox input (thiagotalma)\n- Enh #11808: `_table` and `_column` suffixes are now required when generating migration (rob006)\n- Enh #11850: Introduced `yii\\widgets\\Pjax::$submitEvent` to be able to customize event triggering PJAX form submit (Bvanleeuwen)\n- Enh #11857: `yii\\filters\\AccessRule::$verbs` can now be configured in upper and lowercase (DrDeath72, samdark)\n- Chg #11364: Updated jQuery dependency to include versions `1.12.*` (cebe)\n- Chg #11683: Fixed fixture command to work with short syntax. `yii fixture \"*, -User\"` should be used instead of `yii fixture \"*\" -User` (Faryshta, samdark)\n\n\n2.0.8 April 28, 2016\n--------------------\n\n- Bug #7627: Fixed `yii\\widgets\\ActiveField` to handle inputs AJAX validation with changed ID properly (dizeee)\n- Bug #7717: Fixed the bug that `$properties` parameter in `ArrayHelper::toArray()` was not passed to recursive calls (quantum13)\n- Bug #9074: Fixed JS call `$('#grid').yiiGridView('getSelectedRows')` when `GridView::$showHeader` is set to false (NekitoSP, silverfire)\n- Bug #9851: Fixed partial commit / rollback in nested transactions (sammousa)\n- Bug #9935: Fixed `yii\\validators\\EachValidator` does not invoke `validateAttribute()` method of the embedded validator (klimov-paul)\n- Bug #10201: Fixed bug in ActiveRecord, where relational data could not be fetched in case with composite key and join with IN condition (PaulVanSchayck, airmoi, joe-meyer, cebe)\n- Bug #10235: Fixed `yii\\console\\Application::runAction()` to not to corrupt response object (hiqsol)\n- Bug #10480: Fixed removing old identity cookie when loggin in as another user without logging out first (maine-mike)\n- Bug #10617: Fixed `yii\\web\\Request::getBodyParams()` returned `null` instead of empty array if request body is empty and content type is application/json (samdark)\n- Bug #10784: Fixed `yii\\grid\\CheckboxColumn` to set correct value when `yii\\grid\\CheckboxColumn::$checkboxOptions` closure is used (nukkumatti)\n- Bug #10850: Fixed unable to use 'definitions' and 'aliases' at `yii\\widgets\\MaskedInput` (rahimov, klimov-paul)\n- Bug #10884: Fixed `yii\\i18n\\MessageFormatter` for formatting messages when not all parameters are given (laxity7, cebe)\n- Bug #10935: Fixed cache key collision in `yii\\web\\UrlManager::createUrl()` (sammousa)\n- Bug #10946: Fixed parameters binding to the SQL query in `yii\\db\\mysqlSchema::findConstraints()` (silverfire)\n- Bug #10969: Fixed generator migration tool with decimal params in column (pana1990)\n- Bug #10974: `yii.js` - fixed error in ajaxPrefilter event handler, caused by blocked frame (maximal)\n- Bug #11012: Fixed `yii\\web\\UploadedFile::getBaseName()` to work with UTF-8 file names (hiscaler, silverfire)\n- Bug #11026: Fixed `yii\\helpers\\StringHelper::truncateWords()` to count words properly for non-English text (samdark, tol17)\n- Bug #11038: Fixed handling of intervals of 0 seconds in `yii\\i18n\\Formatter::asDuration()` (VirtualRJ)\n- Bug #11040: Check parameter 'recursive' and disable recursive copying with option 'recursive' => false in method BaseFileHelper::copyDirectory (Ni-san)\n- Bug #11052: Fixed `HtmlPurifier` configuration sequence (samdark)\n- Bug #11066: `yii.js` - fixed `getQueryParams()` function to handle URLs with anchors correctly (DrDeath72)\n- Bug #11088: Fixed bug with column name not being quoted correctly, when a quoted table name or a table name in prefix syntax was used (cebe, edgardmessias, Ni-san)\n- Bug #11093: Fixed `yii\\db\\QueryBuilder::buildAndCondition()` to add query params passed directly by `yii\\db\\Expression` (CedricYii, silverfire)\n- Bug #11125: Fixed `JSON_ERROR_SYNTAX` for `json_decode(null)` in PHP 7 (fps01)\n- Bug #11132: Fixed `yii\\widgets\\FragmentCache` not handling empty content correctly in all cases (kidol)\n- Bug #11188: Fixed wrong index usage in `CaptchaAction` when calling `imagefilledrectangle` (alsopub)\n- Bug #11196: Fixed VarDumper throws PHP Fatal when dumping `__PHP_Incomplete_Class` (DamianZ)\n- Bug #11220: NumberValidator now handles objects properly (samdark)\n- Bug #11221: Boolean validator generates incorrect error message (azaikin, githubjeka)\n- Bug #11223: Fixed returning an empty array when DbManager::getRolesByUser() was called on a user with user id 0 (VirtualRJ)\n- Bug #11228: `yii.activeForm.js` - AJAX validation will not be triggered if client side validation failed (silverfire)\n- Bug #11262: Enabled use of yii2 inside of PHAR packaged console applications (hiqsol)\n- Bug #11270: Fixed `yii\\db\\BaseActiveRecord::link()` method in order to support closure in `indexBy` for relations declaration (iushev)\n- Bug #11280: Descendants of `yii\\console\\controllers\\BaseMigrateController`, like the one for MongoDB, unable to create new migration (klimov-paul)\n- Bug #11333: Avoid serializing PHP 7 errors (zuozp8)\n- Bug #11425: Fixed namespace conflict with Markdown helper and Console helper (cebe, mdmunir)\n- Bug: SQlite querybuilder did not create primary key with bigint for `TYPE_BIGPK` (cebe)\n- Enh #5469: Add mimetype validation by mask in FileValidator (kirsenn, samdark, silverfire)\n- Enh #7177, #10165: Added support for validating datetime and time values using intl short format to `DateValidator` (VirtualRJ, cebe)\n- Enh #8145, #8139, #10234 #11153: `yii\\validators\\Validator::$attributes` property now supports `!attribute` notation to validate attribute, but do not mark it as safe (mdmunir)\n- Enh #8148: Implemented ability to add comment on table and column in migration (vaseninm, silverfire)\n- Enh #8505: `yii\\db\\Query` now contains a andFilterCompare() method that allows filtering using operators in the query value (lennartvdd)\n- Enh #8602: `yii\\validators\\DateValidator` skip validation for `timestampAttribute`, if it is already in correct format (klimov-paul)\n- Enh #8639: Improve ActiveRecord to not create new instances of classes when objects are available (cebe)\n- Enh #8779: Automatically set `enctype` form option when using file input field (pana1990, arogachev)\n- Enh #9340: Adds `after()` and `first()` column schema builder modifiers (df2)\n- Enh #9425: `yii\\db\\Query::exists()` now uses SQL standard `EXISTS()` query via new `yii\\db\\QueryBuilder::selectExists()` method to improving performance in some cases (PowerGamer1)\n- Enh #9562: Adds `char` datatype to framework (df2)\n- Enh #9604: `yii\\db\\BaseActiveRecord` now triggers event `EVENT_AFTER_REFRESH` after a record is refreshed (raoul2000)\n- Enh #9893: `yii.js` handleAction enhanced to support for data-form attribute, so links can trigger specific forms (SamMousa)\n- Enh #10309: Extracted `yii\\web\\UrlManager` rule cache key into `$cacheKey` protected property (lordthorzonus)\n- Enh #10322: ActiveForm now respects `formtarget` attribute of submit button (AnatolyRugalev)\n- Enh #10451: Check of existence of `$_SERVER` in `yii\\web\\Request` before using it (quantum13)\n- Enh #10475: Extracted `getUrlFromCache()` and `setRuleToCache()` protected methods from `yii\\web\\UrlManager::createUrl()` (dmdark)\n- Enh #10487: `yii\\helpers\\BaseArrayHelper::index()` got a third parameter `$groupBy` to group the input array by the key in one or more dimensions (quantum13, silverfire, samdark)\n- Enh #10610: Added `BaseUrl::$urlManager` to be able to set URL manager used for creating URLs (samdark)\n- Enh #10631: Split getting label and rendering cell in `yii\\grid\\DataColumn::renderHeaderCellContent()` to make code simpler (t-kanstantsin, samdark)\n- Enh #10710: `yii\\helpers\\FileHelper::copyDirectory()` is now throwing exception when trying to copy a directory to itself or a subdirectory (wallysalami, cebe, samdark)\n- Enh #10764: `yii\\helpers\\Html::tag()` and `::beginTag()` return content without any HTML when the `$tag` attribute is `false` or `null` (pana1990)\n- Enh #10840: Added `yii\\console\\Controller::optionAliases()` method to support aliases for commands (pana1990)\n- Enh #10889: Allows unsigned primary key column definitions (df2)\n- Enh #10908: Added Dependency Injection for Closure configuration (SamMousa)\n- Enh #10910: Fixed Captcha client side validation after image refresh, when controller is under module (silverfire)\n- Enh #10921: `__toString()` of column schema builder now adapts to column types (df2)\n- Enh #10931: Removed hard dependency of `yii\\di\\Container` on `Yii::$app` (SamMousa)\n- Enh #10937: `yii\\web\\User` will now confirm the request accepts an HTML response before redirecting to the login page. Added optional `$checkAcceptHeader` to `yii\\web\\User::loginRequired()` (sammousa)\n- Enh #10941: Added `yii\\helpers\\ArrayHelper::isTraversable()`, added support for traversable selections for dropdownList, radioList and checkboxList in `yii\\helpers\\Html` (sammousa)\n- Enh #10954: `yii\\db\\QueryBuilder` now accepts `Traversable` objects for `in` condition (SamMousa, silverfire)\n- Enh #10967: Simplified Javascript on the exception debug page (SamMousa)\n- Enh #10976: `yii\\helpers\\Inflector::transliterate()` now uses `strtr` instead of `str_replace` (DrDeath72)\n- Enh #11002: `yii\\behaviors\\AttributeBehavior::$skipUpdateOnClean` which determines whether to skip a behavior when the behavior owner has not been modified (Faryshta)\n- Enh #11056: Allow setting a custom logger configuration for `yii\\log\\Dispatcher` in configuration (bionoren, cebe)\n- Enh #11058: `yii\\web\\User::loginRequired()` now does not set return URL when request method is not GET (dawei101, silverfire)\n- Enh #11110: Added migrations for DB session (mdmunir)\n- Enh #11137: Added weak ETag support to `yii\\filters\\HttpCache`. It could be turned on via setting `$weakEtag` to `true` (particleflux)\n- Enh #11139: `yii\\validators\\EachValidator` injects specific attribute value in error message parameters (silverfire)\n- Enh #11166: migrate command new option `useTablePrefix` (Faryshta)\n- Enh #11187: migrate command now generates PHPDoc for table migrations (Faryshta)\n- Enh #11207: migrate command can create foreign keys. (Faryshta)\n- Enh #11254: Added ability to attach RBAC rule using class name (mdmunir)\n- Enh #11285: `yii\\base\\Security` enhancements (tom--, samdark)\n  - Avoid reading more bytes than needed from `/dev/urandom` and `/dev/random`.\n  - Pefer `/dev/random` to `/dev/urandom` when running on FreeBSD.\n  - Better RNG performance.\n- Enh #11336: Allow resettting `$hostInfo`, `$scriptUrl`, and `$pathInfo` in `yii\\web\\Request` and `$baseUrl`, and `$hostInfo` in `yii\\web\\UrlManager` to `null`, to make Yii determine the value again (cebe)\n- Enh: Added `yii\\helpers\\StringHelper::countWords()` that given a string returns number of words in it (samdark)\n- Chg #9854: Added `ActiveRecordInterface::populateRelation()` to respect the methods called by the implementation (SamMousa)\n- Chg #10726: Added `yii\\rbac\\ManagerInterface::canAddChild()` (dkhlystov, samdark)\n- Chg #10921: Inverts responsibility of database specific column schema builder classes (df2)\n- Chg #11071: `yii\\helpers\\BaseArrayHelper::isIn()` and `isTraversable()` since now throw `yii\\base\\InvalidParamException` instead of `InvalidArgumentException` (nukkumatti)\n- Chg #11283: `yii\\db\\ActiveRecord::unlink()` is not setting FK to `null` before deleting itself anymore (samdark)\n- Chg: HTMLPurifier dependency updated to `~4.6` (samdark)\n- New #8920: Added `yii\\mutex\\PgsqlMutex` which implements mutex \"lock\" mechanism via PgSQL locks (nineinchnick, CSharpRU)\n\n\n2.0.7 February 14, 2016\n-----------------------\n\n- Bug #6351: Find MySQL FK constraints from `information_schema` tables instead of `SHOW CREATE TABLE` to improve reliability (nineinchnick)\n- Bug #6363, #8301, #8582, #9566: Fixed data methods and PJAX issues when used together (derekisbusy)\n- Bug #6876: Fixed RBAC migration MSSQL cascade problem (thejahweh)\n- Bug #7627: Fixed `yii\\widgets\\ActiveField` to handle inputs validation with changed ID properly (dynasource, cebe)\n- Bug #7806: Fixed `yii\\grid\\CheckboxColumn` fixed `_all` checkbox column name generation (cebe, silverfire)\n- Bug #7964: Fixed i18n message sources to load fallback messages in a smarter way (silverfire)\n- Bug #8348: Fixed `yii\\helpers\\BaseArrayHelper` fixed PHP Fatal Error: Nesting level too deep - recursive dependency? (andrewnester)\n- Bug #8466: Fixed `yii\\validators\\FileValidator` to display error for `tooBig` and `tooSmall` with formatted unit (silverfire)\n- Bug #8573: Fixed incorrect data type mapping for NUMBER to INTEGER or DECIMAL in Oracle (vbelogai)\n- Bug #8723: Fixed `yii\\helpers\\VarDumper::export()` unable to export circle referenced objects with `Closure` (klimov-paul)\n- Bug #9061: Fixed `yii.activeForm.js`: input onBlur event forces field validation (githubjeka)\n- Bug #9108: Negative number resulted in no formatting when using `yii\\i18n\\Formatter::asSize()` or `yii\\i18n\\Formatter::asShortSize()` (nxnx, cebe)\n- Bug #9288: Fixed `yii\\helpers\\FileHelper::createDirectory()` directory creation to be concurrency friendly (dynasource)\n- Bug #9314: Fixed `yii\\rbac\\DbManager::getPermissionsByUser()` not returning permissions directly assigned to a user (hesna)\n- Bug #9323: Fixed `yii\\console\\controllers\\MessageController` not using database connection specified in config (raccoon69, samdark)\n- Bug #9333: Fixed `yii\\web\\AssetManager` to publish bundles using symlink with nested directories in `hash` (silverfire)\n- Bug #9415: Fixed regression in 2.0.6 where on Oracle DB `PDO::ATTR_CASE = PDO::CASE_LOWER` did not work anymore (cebe)\n- Bug #9442: Fixed `yii\\db\\Migration::renameTable()` caused fatal error when using SQLite driver (fetus-hina)\n- Bug #9452: Fixed `yii\\db\\Query::where()` does not add params from directly passed `yii\\db\\Expression` (klimov-paul)\n- Bug #9454: Fixed MSSQL MARS wasn't working with transactions (daliran)\n- Bug #9583: Server response on invalid JSON request included a wrong message about \"Internal Server Error\" with status 500 (cebe)\n- Bug #9591: Fixed `yii.validation.js` code so it is compressable by YUICompressor (samdark, hofrob)\n- Bug #9596: Fixed `yii\\web\\UrlManager::createAbsoluteUrl(['site/index', '#' => 'testHash'])` losing hash (alchimik, samdark)\n- Bug #9670: Fixed PJAX redirect in IE. `yii\\web\\Response::redirect()` - added check for `X-Ie-Redirect-Compatibility` header (silverfire)\n- Bug #9678: `yii\\i18n\\I18N::format()` wasn't able to handle named placeholder in \"selectordinal\" (samdark)\n- Bug #9681: `yii\\helpers\\Json::encode()` was erroring under CYGWIN (samdark)\n- Bug #9689: Hidden input on `Html::activeFileInput()` had the wrong name if a name was explicitly given (graphcon, cebe)\n- Bug #9707: Fixed Memcache duration which exceeds 30 days (vernik91)\n- Bug #9714: Fixed `yii\\rbac\\PhpManager::updateItem()` unable to save users assignments (rezident1307)\n- Bug #9754: Fixed `yii\\web\\Request` error when path info is empty (dynasource)\n- Bug #9790: Fixed `yii\\db\\sqlite\\QueryBuilder` to generate proper SQL for UNION (romeOz, samdark)\n- Bug #9791: Fixed endless loop on file creation for non-existing device letters on windows (lukos, cebe)\n- Bug #9874: Fixed outputting exception stacktrace in non-debug mode when `Response::FORMAT_RAW` is used (nainoon)\n- Bug #9883: Passing a single `yii\\db\\Expression` to `Query::select()` or `::addSelect()` was not handled correctly in all cases (cebe)\n- Bug #9911: Fixed `yii\\helpers\\BaseStringHelper::explode()` code so it doesn't remove items equal to 0 when `skip_empty` is true (silverfire, kidol)\n- Bug #9924: Fixed `yii.js` handleAction corrupted parameter values containing quote (\") character (silverfire)\n- Bug #9984: Fixed wrong captcha color in case Imagick is used (DrDeath72)\n- Bug #9999: Fixed `yii\\web\\UrlRule` to allow route parameter names with `-`, `_`, `.`characters (silverfire)\n- Bug #10029: Fixed `yii\\widgets\\MaskedInput` not working with PJAX (martrix78, samdark)\n- Bug #10052: Fixed `yii\\i18n\\Formatter` to work with huge numbers on 32-bit arch (necrox87, silverfire)\n- Bug #10101: Fixed assignments saving on role removing in `yii\\rbac\\PhpManager` (rezident1307)\n- Bug #10142: Fixed `yii\\validators\\EmailValidator` to check the length of email properly (silverfire)\n- Bug #10218: Fixed Flash messages not showing after logging out a user (andrewnester)\n- Bug #10263: Fixed `yii\\validators\\UniqueValidator` to work properly when model is not instance of `targetClass` (bupy7, githubjeka, silverfire)\n- Bug #10278: Fixed `yii\\helpers\\BaseJson` support \\SimpleXMLElement data (SilverFire, LAV45)\n- Bug #10302: Fixed JS function `yii.getQueryParams`, which parsed array variables incorrectly (servocoder, silverfire)\n- Bug #10363: Fixed fallback float and integer formatting (AnatolyRugalev, silverfire)\n- Bug #10385: Fixed `yii\\validators\\CaptchaValidator` passed incorrect hashKey to JS validator when `captchaAction` begins with `/` (silverfire)\n- Bug #10467: Fixed `yii\\di\\Instance::ensure()` to work with minimum settings (LAV45)\n- Bug #10541: Fixed division by zero issue in `Console` helper progress bar (youmad)\n- Bug #10580: Fixed `yii\\grid\\GridView::guessColumns()` to work with numeric column names (silverfire)\n- Bug #10625: Fixed `activeForm.js` - when submit doesn't reload page, submit button value simulation with hidden input did not work (andrewnester)\n- Bug #10629: Fixed `yii\\helpers\\BaseStringHelper` - BaseStringHelper::truncateHtml adds suffix regardless of the string length (andrewnester)\n- Bug #10692: Fixed default value extraction in PostgreSQL Schema for null values (wallysalami, gabrielhomsi)\n- Bug #10739: Fixed `yii\\web\\UrlManager::parseRequest()` to treat request URL with more than one slash at the end as invalid (andrewnester)\n- Bug #10751: Fixed `yii\\validators\\UrlValidator` pattern to improve matching (silverfire)\n- Bug #10760: `yii\\widgets\\DetailView::normalizeAttributes()` fixed for arrayable models (boehsermoe)\n- Bug #10825: Fixed `yii\\validators\\EachValidator` does not respect `skipOnEmpty` rule parameter (klimov-paul)\n- Bug: Fixed generation of canonical URLs for `ViewAction` pages (samdark)\n- Bug: Fixed `mb_*` functions calls to use `UTF-8` or `Yii::$app->charset` (silverfire)\n- Enh #2377: Allow specifying a table alias when joining relations via `joinWith()` (cebe, nainoon)\n- Enh #3506: Added `yii\\validators\\IpValidator` to perform validation of IP addresses and subnets (SilverFire, samdark)\n- Enh #4972: Added `yii\\db\\ActiveQuery::alias()` to allow specifying a table alias for the model table without having to know the name (cebe, stepanselyuk)\n- Enh #5146: Added `yii\\i18n\\Formatter::asDuration()` method (nineinchnick, SilverFire)\n- Enh #5902: `yii\\widgets\\Pjax::options` now support special option `tag` to specify tag of container (Alex-Code)\n- Enh #6162, #9198: Added parameter visibleButtons for `yii\\grid\\ActionColumn` (fornit1917, silverfire)\n- Enh #7341: Client validation now skips disabled inputs (SamMousa)\n- Enh #7405: Added `yii\\filters\\auth\\AuthMethod::optional` for optional authentification in all child classes (SilverFire)\n- Enh #7566: Improved `yii\\validators\\CompareValidator` default messages (slinstj)\n- Enh #7581: Added ability to specify range using anonymous function in `RangeValidator` (RomeroMsk)\n- Enh #7674: Added `yii\\db\\Connection::commandClass` to configure a command class that will be used by the connection (sammousa, silverfire, cebe)\n- Enh #8284: Added `yii\\captcha\\CaptchaAction::$imageLibrary` property allowing to set image rendering library (AnatolyRugalev)\n- Enh #8329: Added support of options for `message` console command (vchenin)\n- Enh #8613: `yii\\widgets\\FragmentCache` will not store empty content anymore which fixes some problems related to `yii\\filters\\PageCache` (kidol)\n- Enh #8649: Added total applied migrations to final report (vernik91)\n- Enh #8687: Added support for non-gregorian calendars, e.g. persian, taiwan, islamic to `yii\\i18n\\Formatter` (cebe, z-avanes, hooman-pro)\n- Enh #8824: Allow passing a `yii\\db\\Expression` to `Query::groupBy()` (cebe)\n- Enh #8995: `yii\\validators\\FileValidator::maxFiles` can be set to `0` to allow unlimited count of files (PowerGamer1, silverfire)\n- Enh #9282: Improved JSON error handling to support PHP 5.5 error codes (freezy-sk)\n- Enh #9337: Added `yii\\db\\ColumnSchemaBuilder::defaultExpression()` to support DB Expression as default value (kotchuprik)\n- Enh #9412: `yii\\web\\Response::sendHeaders()` does now set the status header last which negates certain magic PHP behavior regarding the `header()` function (nd4c, kidol)\n- Enh #9443: Added `unsigned()` to `ColumnSchemaBuilder` (samdark)\n- Enh #9465: ./yii migrate/create now generates code based on migration name and --fields (pana1990)\n- Enh #9573: Added `yii\\rbac\\ManagerInterface::getUserIdsByRole()` and implementations (samdark)\n- Enh #9635: Added default CSS class for `yii\\grid\\ActionColumn` header (arogachev, dynasource)\n- Enh #9643: Added migrations for DB cache (mdmunir)\n- Enh #9711: Added `yii\\widgets\\LinkPager::$pageCssClass` that allows to set default page class (ShNURoK42)\n- Enh #9733: Added Unprocessable Entity HTTP Exception (janfrs)\n- Enh #9762: Added `yii\\web\\JsonResponseFormatter::$encodeOptions` and `::$prettyPrint` for better JSON output formatting (cebe)\n- Enh #9783: jQuery inputmask dependency updated to `~3.2.2` (samdark)\n- Enh #9785: Added ability to invoke callback with dependency resolution to DI container (mdmunir, SamMousa)\n- Enh #9869: Allow path alias for SQLite database files in DSN config (ASlatius)\n- Enh #9901: Default `Cache.SerializerPermissions` configuration option for `HTMLPurifier` is set to `0775` (klimov-paul)\n- Enh #10056: Allowed any callable to be passed to `yii\\grid\\ActionColumn::$urlCreator` (freezy-sk)\n- Enh #10061: `yii\\helpers\\BaseInflector::transliterate()` is now public. Introduced different levels of transliteration strictness (silverfire)\n- Enh #10078: Added `csrf` option to `Html::beginForm()` to allow disabling the hidden csrf field generation (machour)\n- Enh #10086: `yii\\base\\Controller::viewPath` is now configurable (Sibilino)\n- Enh #10098: Changed `yii.confirm` context to the event's target DOM element which is triggered by clickable or changeable elements (lichunqiang)\n- Enh #10108: Added support for events in interfaces (omnilight)\n- Enh #10118: Allow easy extension of slug generation in `yii\\behaviors\\SluggableBehavior` (cebe, hesna, silverfire)\n- Enh #10149: Made `yii\\db\\Connection` serializable (Sam Mousa)\n- Enh #10154: Implemented support of traversable objects in `RangeValidator::ranges`, added `ArrayHelper::isIn()` and `ArrayHelper::isSubset()` (Sam Mousa)\n- Enh #10158: Added the possibility to specify CSS and Javascript options per file in `yii\\web\\AssetBundle` (machour)\n- Enh #10170: `Yii::powered()` now uses `Yii::t()` (SamMousa)\n- Enh #10217: Support for selecting multiple filter values with the same name was added to `yii.gridView.js` (omnilight, silverfire)\n- Enh #10255: Added Yii warning to session initialization if session was already started (AnatolyRugalev)\n- Enh #10264: Generation of HTML tags in Yii's JavaScript now uses jQuery style (silverfire)\n- Enh #10267: `yii.js` - added original event passing to `pjaxOptions` for links with `data-method` and `data-pjax` (servocoder, silverfire)\n- Enh #10319: `yii\\helpers\\VarDumper::dump()` now respects PHP magic method `__debugInfo()` (klimov-paul)\n- Enh #10359: Support wildcard category name in `yii/console/controllers/MessageController` (rmrevin)\n- Enh #10390: Added ability to disable outer tag for `yii\\helpers\\BaseHtml::radiolist()`, `::checkboxList()` (TianJinRong, githubjeka, silverfire)\n- Enh #10535: Allow passing a `yii\\db\\Expression` to `yii\\db\\Query::orderBy()` and `yii\\db\\Query::groupBy()` (andrewnester, cebe)\n- Enh #10545: `yii\\web\\XMLResponseFormatter` changed to format models in a proper way (andrewnester)\n- Enh #10783: Added migration and unit-tests for `yii\\i18n\\DbMessageSource` (silverfire)\n- Enh #10797: Cleaned up requirements checker CSS (muhammadcahya)\n- Enh: Added last resort measure for `yii\\helpers\\FileHelper::removeDirectory()` fail to unlink symlinks under Windows (samdark)\n- Enh: `yii\\behaviors\\AttributeBehavior::getValue()` now respects the callable in array format (silverfire)\n- Chg #6419: Added `yii\\web\\ErrorHandler::displayVars` make list of displayed vars customizable. `$_ENV` and `$_SERVER` are not displayed by default anymore (silverfire)\n- Chg #9369: `Yii::$app->user->can()` now returns `false` instead of erroring in case `authManager` component is not configured (creocoder)\n- Chg #9411: `DetailView` now automatically sets container tag ID in case it's not specified (samdark)\n- Chg #9528: `Traversable` objects are now formatted as arrays in `yii\\web\\XmlResponseFormatter` to support SPL objects and Generators (MaXL-ru)\n- Chg #9878, #9879, #9880: Make `yii\\base\\Security` use `random_bytes()`, LibreSSL, mcrypt, limit OpenSSL to Windows, and to prefer `password_hash()` over `crypt()` (tom--)\n- Chg #9953: `yii\\behaviors\\TimestampBehavior::getValue()` changed to make value processing consistent with `AttributeBehavior::getValue()` (silverfire)\n- Chg #10296: Methods mset, mget and madd of `yii\\caching\\Cache` have been marked as deprecated (trejder, githubjeka)\n- Chg: ApcCache is now able to handle PHP 7 APCu (samdark)\n- Chg: `yii\\behaviors\\BlameableBehavior::getValue()` changed to make value processing consistent with `yii\\behaviors\\AttributeBehavior::getValue()` (silverfire)\n- New #10083: Added wrapper for PHP webserver (samdark)\n- New: Added new requirement: ICU Data version >= 49.1 (SilverFire)\n\n\n2.0.6 August 05, 2015\n---------------------\n\n- Bug #4763: Fixed display issue with overlapping call stack item on exception display page (cebe)\n- Bug #7305: Logging of Exception objects resulted in failure of the logger i.e. no logs being written (cebe)\n- Bug #7374: Use proper INSERT syntax with default values when no values are specified (nineinchnick)\n- Bug #7707: Client-side `trim` validator now passes the trimmed value to subsequent validators (nkovacs)\n- Bug #7764: `yii\\helpers\\ArrayHelper::toArray()` wasn't passing `$recursive` to `yii\\base\\Arrayable::toArray()` (brandonkelly)\n- Bug #8161: Fixed active form `data-method` submit bug when client validation is used (vbelogai)\n- Bug #8322: `yii\\behaviors\\TimestampBehavior::touch()` now throws an exception if owner is new record (klimov-paul)\n- Bug #8451: `yii\\i18n\\Formatter` did not allow negative unix timestamps as input for date formatting (cebe)\n- Bug #8483: Sequence name in `Schema::getLastInsertId()` was not properly quoted (nineinchnick)\n- Bug #8506: Cleaning of output buffer in `Widget::run()` conflicts with `Pjax` widget which did the cleanup itself (cebe, joester89)\n- Bug #8544: Fixed `yii\\db\\ActiveRecord` does not update attribute specified at `optimisticLock()` after save (klimov-paul)\n- Bug #8549: Fixed `yii\\caching\\FileCache` doesn't lock cache files when reading (iworker)\n- Bug #8551: `yii\\pgsql\\QueryBuilder::batchInsert()` may cause \"undefined index\" error (arkhamvm)\n- Bug #8585: Fixed `yii\\helpers\\Html::activeTextarea()` does not allow value overriding via options (klimov-paul)\n- Bug #8592: Fixed `yii\\db\\Command::getRawSql()` unable to parse params specified without colon (':') (klimov-paul)\n- Bug #8593: Fixed `yii\\db\\ActiveQuery` produces incorrect SQL for aggregations, when `sql` field is set (klimov-paul)\n- Bug #8595: Fixed `yii\\rbac\\DbManager::checkAccessFromCache()` to check against auth items loaded in cache recursively (achretien, qiangxue)\n- Bug #8606: Fixed `yii\\web\\Response::xSendFile()` does not reset format (vyants)\n- Bug #8627: Fixed `yii\\db\\Migration` produces incorrect results due to table schema caching (klimov-paul)\n- Bug #8661: Fixed `yii.activeForm.js` scrolling to top (nkovacs)\n- Bug #8684: Formatter ignored explicit decimal number settings when a default value is configured (leandrogehlen, cebe)\n- Bug #8772: `yii\\db\\ActiveQuery` failed removing duplicate records after join when the resultset did not contain the pk values e.g. after grouping (cebe)\n- Bug #8844: Added a workaround for an oracle bug when fetching information about table constraints and filtering by `CONSTRAINT_TYPE` (nidgetgod)\n- Bug #8900: Fixed determining active menu item with url-alias in route `yii\\widgets\\Menu::isItemActive()` (demi)\n- Bug #9006: Fixed bit column always returning true using certain version of PDO MySQL (stratoss, RusAlex, mj4444ru, samdark)\n- Bug #9046: Fixed problem with endless error loop when an error occurred after sending a stream or file download response to the user (cebe)\n- Bug #9059: Fixed PHP Notice in error handler view (dynasource, andrewnester, samdark)\n- Bug #9063: Workaround for MySQL losing table case when adding index (sebathi)\n- Bug #9076: Fixed `yii\\filters\\PageCache` not using the configured duration and dependency when caching the response data (kidol)\n- Bug #9091: `yii\\web\\UrlManager::createUrl()` did not create correct url when defaults were used, internal cache is now skipped in certain situations (cebe)\n- Bug #9127, #9128: Fixed MSSQL `yii\\helpers\\mssql\\QueryBuilder::renameColumn()` and `yii\\helpers\\mssql\\QueryBuilder::renameTable()` escaping (sitawit)\n- Bug #9161: Fixed `yii\\web\\Request` ignore `queryParams` when resolve request (zetamen)\n- Bug: Fixed string comparison in `yii\\db\\BaseActiveRecord::unlink()` which may result in wrong comparison result for hash valued primary keys starting with `0e` (cebe)\n- Bug: Pass correct action name to `yii\\console\\Controller::options()` when default action was requested (cebe)\n- Bug: Automatic garbage collection in `yii\\caching\\FileCache` was not triggered (kidol)\n- Bug: Fixed missing stacktrace items on PHP syntax errors of \"unexpected end of file\" type (samdark)\n- Enh #3335: Implemented `yii\\db\\ColumnSchemaBuilder` (pana1990, vaseninm, samdark, cebe)\n- Enh #5991: Added `updateMessages()` to `yii.activeForm.js` to support manually updating ActiveForm messages (nkovacs)\n- Enh #6043: Specification for 'class' and 'style' in array format added to `yii\\helpers\\Html` (klimov-paul)\n- Enh #6853: Console application will now register PHP constants for `STDIN`, `STDOUT`, and `STDERR` itself if they are not defined (cebe)\n- Enh #7169: `yii\\widgets\\ActiveField` now uses corresponding methods for default parts rendering (klimov-paul)\n- Enh #7259: Added `errorAttributes` parameter to ActiveForm `afterValidate` event. Made scrolling to first error optional (nkovacs)\n- Enh #8070: `yii\\console\\controllers\\MessageController` now sorts created messages, even if there is no new one, while saving to PHP file (klimov-paul)\n- Enh #8286: `yii\\console\\controllers\\MessageController` improved allowing extraction of nested translator calls (klimov-paul)\n- Enh #8373: Check also `post_max_size` parameter in `yii\\validators\\FileValidator::getSizeLimit()` (maxxer)\n- Enh #8415: `yii\\helpers\\Html` allows correct rendering of conditional comments containing `!IE` (salaros, klimov-paul)\n- Enh #8444: Added `yii\\widgets\\LinkPager::$linkOptions` to allow configuring HTML attributes of the `a` tags (zinzinday)\n- Enh #8486: Added support to automatically set the `maxlength` attribute for `Html::activeTextArea()` and `Html::activePassword()` (klimov-paul)\n- Enh #8566: Added support for 'only' and 'except' options for `yii\\web\\AssetManager::publish()` (klimov-paul)\n- Enh #8574: Added `yii\\console\\controllers\\MessageController` support .pot file creation (pgaultier)\n- Enh #8625: Added `markUnused` option to `yii\\console\\controllers\\MessageController` (marius7383)\n- Enh #8670: Added support for saving extra fields in session table for `yii\\web\\DbSession` (klimov-paul)\n- Enh #8671: Extracted `yii\\helpers\\Html::escapeJsRegularExpression()` method from `yii\\validators\\RegularExpressionValidator` (silverfire, klimov-paul, samdark, qiangxue)\n- Enh #8903: PostgreSQL `yii\\db\\pgsql\\QueryBuilder::createIndex()` can now specify the index method to use (LAV45)\n- Enh #8933: Yii is now able to properly handle HHVM fatal errors (dieend, samdark)\n- Enh #9011: Allow `yii\\widgets\\MaskedInput` to produce an input tag of a custom type (TriAnMan)\n- Enh #9038: Write warning to log in case `FileCache` fails to write into file (foccy)\n- Enh #9072: `yii\\web\\ErrorAction` displays 404 error instead of blank page on direct access (klimov-paul)\n- Enh #9149: Print directory migrationPath in a `yii migrate` command error. (RusAlex)\n- Enh #9177: Added password hash cost setting to Security component (freezy-sk)\n- Enh #9239: Better handling of `Json` errors (grzegorzkurtyka, samdark)\n- Enh #9246: Added `yii\\web\\UrlRule::getParamRules()` (df2)\n- Enh #9249: Added `hashCallback` in `yii\\web\\AssetManager` to allow custom hash generation for asset directory (petrabarus)\n- Enh #9263: Avoid extra DB query in RBAC DbManager in case auth item name is empty (samdark)\n- Enh #9268: Improved display of boolean parameters in logged SQL queries (arkhamvm, samdark)\n- Enh: Improved Console helper progress bar ETA time estimation, updated only once per second to avoid flapping (cebe)\n- Chg #6354: `yii\\base\\ErrorHandler::logException()` will now log the whole exception object instead of only its string representation (cebe)\n- Chg #8556: Extracted `yii\\web\\User::getAuthManager()` method (samdark)\n- Chg #9181: `yii\\helpers\\BaseStringHelper::truncateHtml()` is now using `runtime` directory for `HTMLPurifier` cache (webdevsega)\n\n\n2.0.5 July 11, 2015\n-------------------\n\n- Bug #9070 (CVE-2015-5467): Fixed `ViewAction::resolveViewName()` not to accept `/../` and `/./` (thejahweh, samdark)\n\n\n2.0.4 May 10, 2015\n------------------\n\n- Bug #5042: Use `RETURNING` for inserts for pgsql and oci to support PKs with a custom default value expression (nineinchnick, klimov-paul)\n- Bug #6234: Fixed wrong table schema information for MSSQL when using multiple schemas (nineinchnick)\n- Bug #6642: Fixed the bug that using confirmation dialog via `data-confirm` in an `yii\\widgets\\ActiveForm` may cause the dialog to appear twice (pana1990, qiangxue)\n- Bug #6871: Fixed the bug that using defaults and hostnames in URL rules may cause an out-of-range index issue (qiangxue)\n- Bug #7036: Fixed `yii\\helpers\\Html::dropDownList()` overrides label specified at 'groups' option (aktec, klimov-paul)\n- Bug #7473: Fixed `yii\\console\\controllers\\AssetController` does not create missing folders for the target bundles (schmunk42, klimov-paul)\n- Bug #7894: Fixed incorrect URL config processing at `yii\\web\\Application::handleRequest()` and `yii\\widgets\\Menu::items` if route element is not a first one (nkovacs, klimov-paul)\n- Bug #7529: Fixed `yii\\web\\Response::sendContentAsFile()` that was broken in 2.0.3 (samdark)\n- Bug #7603: Fixed escape characters in `FormatConverter` to work with unicode characters (maddoger, cebe)\n- Bug #7656: Fixed `yii\\rbac\\DbManager::getRolesByUser()` and `yii\\rbac\\PhpManager::getRolesByUser()` to return roles only (samdark)\n- Bug #7757: Fix fetching tables schema for oci and mysql when `PDO::ATTR_CASE` is set (nineinchnick)\n- Bug #7761: Fixed formatting one digit month in date formatter using ICU format `L` (nkovacs)\n- Bug #7775: Added more strict check on controller IDs when they are being used to create controller instances on Windows (Bhoft, qiangxue)\n- Bug #7831: Add order when fetching database table names and constraints (nineinchnick)\n- Bug #7846: Fixed `yii\\base\\Model` does not recognize scenario declared by rules using 'except' (klimov-paul)\n- Bug #7847: `yii\\db\\ColumnSchema` was typecasting numerics to strings with incorrect decimal separator for some locales (nineinchnick)\n- Bug #7861: Fixed `yii\\helpers\\VarDumper::export()` fails to export object containing `Closure` (klimov-paul)\n- Bug #7867: Fixed `findUniqueIndexes()` not to perform any processing on unique index on function for pgsql (nineinchnick)\n- Bug #7868: Fixed fetching columns definition and composite foreign keys for oci (nineinchnick)\n- Bug #7868: Removed column's autoIncrement detection from oci (nineinchnick)\n- Bug #7868: Fixed creating raw sql (for logging) by skipping object and resource params (nineinchnick)\n- Bug #7868: Fixed `yii\\db\\Schema::getLastInsertID()`` by quoting sequence name (nineinchnick)\n- Bug #7957: Removed extra `parseFloat()` call for the `compare` js validator (CthulhuDen)\n- Bug #8012: Fixed fetching multiple relations between two tables for pgsql (nineinchnick)\n- Bug #8014: Fixed setting incorrect form \"action\" property after submitting a form using a link with \"data-method\" and containing \"action\" among \"data-params\" (samdark)\n- Bug #8032: `yii\\rbac\\PhpManager::updateItem()` was unable to rename item updated (ChristopheBrun, samdark)\n- Bug #8036: Fixed `yii\\log\\Logger` unable to export session id (klimov-paul)\n- Bug #8068: Fixed `yii\\db\\Query::count()` fails for query containing 'having' without 'group by' (klimov-paul)\n- Bug #8073: Fixed `yii\\data\\ArrayDataProvider::getKeys()` return wrong when `yii\\data\\ArrayDataProvider::$allModels` contain integer key (mdmunir, klimov-paul)\n- Bug #8082: Fixed `yii\\db\\BaseActiveRecord::getAttributeLabel()` return wrong label for related attribute, if several relations in chain share same name (klimov-paul)\n- Bug #8149: Fixed `yii\\db\\BaseActiveRecord::updateCounters()` fails for new record saved with counter attribute not set (klimov-paul)\n- Bug #8158: Avoid exception when detecting console screen size fails on windows (EliasZ)\n- Bug #8165: Fixed `yii\\db\\ActiveRelationTrait::populateRelation()` fails when `link` refers to string convertable object attribute, like `MongoId` (klimov-paul)\n- Bug #8231: Configuration of GridView and DetailView where not preserved when used multiple times (cebe, idMolotov)\n- Bug #8273: Fixed `yii\\widgets\\FragmentCache` when `enabled` is false (nkovacs)\n- Bug #8291: Fixed numeric keys in `$_GET` transformed to 0-based, if 'pretty URL' enabled (quantum13, klimov-paul)\n- Bug #5053: DateValidator is now more robust against different timezone settings (cebe)\n- Bug (CVE-2015-3397): Added `yii\\helpers\\Json::htmlEncode()` to support safer JSON data encoding in HTML code (samdark, Wojciech Janusz, Tomasz Tokarski)\n- Enh #1468: Added ability to specify hints for model attributes via `attributeHints()` method (klimov-paul)\n- Enh #3376: Added `yii\\validators\\EachValidator`, which allows validation of the array attributes (klimov-paul)\n- Enh #5053: Added possibility to specify a format and time zone for the `timestampAttribute` of date validator making it fully usable for validating complete timestamps (cebe)\n- Enh #6442: Improved error message on `yii\\helpers\\FileHelper::createDirectory()` to include the path name of the directory (cebe)\n- Enh #6895: Added `ignoreCategories` config option for message command to ignore categories specified (samdark)\n- Enh #6975: Pressing arrows while focused in inputs of Active Form with `validateOnType` enabled no longer triggers validation (slinstj)\n- Enh #7409: Allow `yii\\filters\\auth\\CompositeAuth::authMethods` to take authentication objects (fernandezekiel, qiangxue)\n- Enh #7443: Allow specification of the `$key` as an array at `yii\\helpers\\ArrayHelper::getValue()` (Alex-Code)\n- Enh #7488: Added `yii\\helpers\\StringHelper::explode()` to perform explode with trimming and skipping of empty elements (SilverFire, nineinchnick, creocoder, samdark)\n- Enh #7514: Added min/max validation to `yii\\validators\\DateValidator` (nkovacs)\n- Enh #7515: Added support to use `indexBy()` together with `column()` in query builder (qiangxue)\n- Enh #7530: Improved default values for `yii\\data\\Sort` link labels in a `ListView` when used with an `ActiveDataProvider` (cebe)\n- Enh #7539: `yii\\console\\controllers\\AssetController` provides dependency trace in case bundle circular dependency detected (klimov-paul)\n- Enh #7562: `yii help` now lists all sub-commands by default (callmez)\n- Enh #7571: HTTP status 500 and \"An internal server error occurred.\" are now returned in case there was an exception in layout and `YII_DEBUG` is false (samdark)\n- Enh #7636: `yii\\web\\Session::getHasSessionId()` uses a more lenient way to check if session ID is provided in URL (robsch)\n- Enh #7637: Allow `yii\\web\\Request::validateCsrfToken()` to validate a manually provided token (miraage, qiangxue)\n- Enh #7808: Adjusted Masked input to correctly generate the hash variable to store the plugin options (wbraganca)\n- Enh #7833: Support (materialized) views and foreign tables along normal tables when fetching table schema (nineinchnick)\n- Enh #7850: Added `yii\\filters\\PageCache::cacheCookies` and `cacheHeaders` to allow selectively caching cookies and HTTP headers (qiangxue)\n- Enh #7867: Implemented findUniqueIndexes for oci and mssql (nineinchnick)\n- Enh #7912: Added `aria-label` to ActionColumn buttons (LAV45, samdark)\n- Enh #7915: Added `yii\\i18n\\Formatter::$numberFormatterSymbols` to allow setting custom symbols for the internally used IntlNumberFormatter, e.g. currency signs (cebe)\n- Enh #7918: `yii\\widgets\\Pjax` got ability to avoid registering link/form handler via setting `false` to `$linkSelector`/`$formSelector` (usualdesigner, Alex-Code, samdark)\n- Enh #7973: Added `yii\\db\\Schema::getSchemaNames()` method (nineinchnick)\n- Enh #8027: Added support for using sub queries in simple Query WHERE conditions (cebe)\n- Enh #8055: `yii\\rest\\UrlRule::extraPatterns` should take precedence over `patterns` (Agrumas)\n- Enh #8064: Added ability to remove containing menu tag by setting `yii\\widgets\\Menu::$options['tag']` to `false` (kirsenn, samdark)\n- Enh #8078: 'links' and 'meta' envelope names are now configurable at `yii\\rest\\Serializer` (arturf)\n- Enh #8171: Allow the user to enforce the fileSize to allow sending files which are not seekable. Needed when using S3 Stream Wrapper (pgaultier)\n- Enh #8179: Added parameter to define whether the comparison of `yii\\db\\BaseActiveRecord::isAttributeChanged()` method will be made as identical (thiagotalma)\n- Enh #8194: Caching of the matched rules added to `yii\\web\\UrlManager::createUrl()` (laszlovl, klimov-paul)\n- Enh #8268: Allow `yii\\db\\QueryBuilder` to recognize more variations of `limit` and `offset` values (tino415, qiangxue)\n- Enh: `yii\\i18n\\Formatter` now shows more information about errors which occured when formatting values (cebe)\n- Enh: Added `yii\\helper\\Console::wrapText()` method to wrap indented text by console window width and used it in `yii help` command (cebe)\n- Enh: Implement batchInsert for oci (nineinchnick)\n- Enh: Detecting `yii\\db\\IntegrityException` for oci (nineinchnick)\n- Enh: `yii\\widgets\\LinkPager::$firstPageLabel` and `yii\\widgets\\LinkPager::$lastPageLabel` now could be set to true in order to use page number as label (samdark)\n- Chg #7924: Migrations in history are now ordered by time applied allowing to roll back in reverse order no matter how these were applied (samdark)\n- Chg: Updated dependency to `cebe/markdown` to version `1.1.x` (cebe)\n\n\n2.0.3 March 01, 2015\n--------------------\n\n- Bug #5457: `yii\\web\\Cors` should handle `Access-Control-Request-Headers` in a case-insensitive manner (qiangxue)\n- Bug #6553: `yii\\validators\\DateValidator` returned valid for date \"2012-12-12foo\" with intl extension enabled (gajahlemu)\n- Bug #6919: Fixed wrong namespaces under advanced application's `TestCase` classes (ivokund)\n- Bug #6940: `yii\\web\\Response::sendContentAsFile()` may not send correct `content-length` header (sadgnome)\n- Bug #6969: `yii\\helpers\\ArrayHelper::htmlEncode()` and `htmlDecode()` should not remove non-string data (qiangxue)\n- Bug #7037: `yii\\console\\controllers\\AssetController` now correctly handles relative image URLs if source and target CSS are under same directory (klimov-paul)\n- Bug #7055: composite IN condition was not generated correctly for certain DBMS (nineinchnick)\n- Bug #7074: `yii\\data\\ArrayDataProvider` did not correctly handle the case `Pagination::pageSize = 0` (kirsenn, qiangxue)\n- Bug #7172: Fixed problem with EmailValidator which did not extract domain correctly for DNS check (nbogol)\n- Bug #7209: `yii\\helpers\\Html::getInputId()`` now also replaces `.` with `-` to ensure a valid ID is generated (omnilight)\n- Bug #7211: Query caching should properly deal with the case when query result is false (qiangxue)\n- Bug #7218: `yii\\captcha\\CaptchaAction` should send response in JSON format (InteLigent, qiangxue)\n- Bug #7226: `yii\\web\\Request::getEtag()` should strip off `-gzip` which may be added by Apache (mcd-php)\n- Bug #7227: Query builder should respect column alias setting when `yii\\db\\Expression` is being selected (mdmunir, qiangxue)\n- Bug #7271: `yii\\db\\ActiveRecord::populateRecord()` should be called in late binding approach (jlorente)\n- Bug #7258: Response was sending HTML content type when formatter was set to JSON or XML, nulls were handled wrong (slavcodev, samdark)\n- Bug #7358: Fix trimming PHPDoc prefix with TAB indent in `yii\\console\\Controller::parseDocCommentSummary()` (gugglegum)\n- Bug #7384: Fix precision loss in log timestamps when using `yii\\log\\DBTarget` (samdark)\n- Bug #7425: `yii\\widgets\\ActiveField::radio()` should not generate the label twice (justinvoelker)\n- Enh #3168: Improved the performance of `yii\\rbac\\DbManager::checkAccess()` by caching mechanism (qiangxue)\n- Enh #3723: `yii\\filters\\PageCache` now supports caching response headers as well as non-HTML response content (qiangxue)\n- Enh #4710: Added `yii\\web\\AssetManager::appendTimestamp` to support cache busting for assets  (qiangxue)\n- Enh #5663: Added support for using `data-params` to specify additional form data to be submitted via the `data-method` approach (usualdesigner, qiangxue)\n- Enh #5681: Allow customization of Menu::submenuTemplate in menu items (RobertBoes, otsec)\n- Enh #6106: Added ability to specify `encode` for each item of `yii\\widgets\\Breadcrumbs` (samdark, aleksanderd)\n- Enh #6361: Added `validateAttribute()` to `yii.activeForm.js` to support manually triggering data validation of an input (Alex-Code, qiang)\n- Enh #6493: Added support for the `Access-Control-Expose-Headers` header by `yii\\filters\\Cors` (usualdesigner)\n- Enh #6697: Added `yii\\helpers\\Url::current()` method that allows adding or removing parameters from current URL (samdark, callmez)\n- Enh #6852: Added `yii\\helpers\\BaseHtmlPurifier::helpers()` in order to be able to configure `HtmlPurifier` helper globally via subclassing (Alex-Code)\n- Enh #6882: Added `yii\\web\\ErrorHandler::getTypeUrl()` in order to allow providing custom types/classes/methods URLs for subclasses (brandonkelly)\n- Enh #6883: `yii\\base\\ErrorHandler::logException()` is now public (samdark)\n- Enh #6896: Added `yii\\log\\FileTarget::$enableRotation` to allow disabling log rotation when external tools are configured for this (cebe)\n- Enh #7008: Removed extra white space in GridView filter cell (uran1980)\n- Enh #7051: Added support for preventing swapping values between different cookies (pavimus, qiangxue)\n- Enh #7150: FormatConverter for date formats now supports single quote escaping (brandonkelly)\n- Enh #7255: Added support to allow widgets that use text input to specify input types (qiangxue)\n- Enh #7269: `yii\\console\\controllers\\BaseMigrateController` now throws exception if directory specified doesn't exist and action isn't `create` (lynicidn, samdark)\n- Enh #7301: Added checking for ICU version in requirements warning about plural problems when it is lower than 49 (sidtj)\n- Enh #7332: Added ability to remove `yii\\widgets\\Menu` container tag by setting `options['tag']` to `false` (dynasource, samdark)\n- Enh #7350: Added `yii\\helpers\\Html::$dataAttributes` to support customizing data attributes (Faryshta, qiangxue)\n- Enh #7357: Refactored `yii\\db\\ColumnSchema` by adding `typecast()` method to decouple `phpTypecast()` from `dbTypecast()` (mcd-php, qiangxue)\n- Enh #7361: The `trim` validator now works on the client side too (qiangxue)\n- Enh #7440: Added support to automatically set the `maxlength` attribute for `Html::activeTextInput()` (llfm)\n- Enh #7446: Added `Schema::TYPE_DOUBLE` to represent ANSI SQL Double Precision type (samdark)\n- Enh #7449: Added `encode` option to allow not encoding select options for `Html::dropDownList()` and `Html::listBox()` (yapi68, qiangxue)\n- Enh: Added support to `yii\\di\\Container` to instantiate and configure an object that implements `yii\\base\\Configurable` (qiangxue)\n- Chg #5690: adjusted paths in message config generated by `yii message/config` to reflect directory structure better (mikehaertl, samdark)\n- Chg #6661: Hyperlinks that are enclosed within an exist form will use the same form for submission if they specify both of the `href` and `data-method` attributes (qiangxue)\n- Chg #7094: Console confirmation must be answered correctly. To return `true`: `y` or `yes`. To return `false`: `n` or `no`. Any other input the question will be asked again (thiagotalma)\n- Chg #7130: Changed the signature of `ActiveRecord::findByCondition()` to simplify the implementation and usage (Faryshta)\n- Chg #7215: Uses OpenSSL crypto lib instead of Mcrypt. Added testing of encrypted data compatibility, both backward and forward (tom--)\n\n\n### Apidoc Extension (yii2-apidoc)\n\n- no changes in this release.\n\n\n### Authclient Extension (yii2-authclient)\n\n- Enh #6892: Default value of `yii\\authclient\\clients\\Twitter::$authUrl` changed to 'authenticate', allowing usage of previous logged user without request an access (kotchuprik)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- no changes in this release.\n\n\n### Codeception Extension (yii2-codeception)\n\n- Bug #6978: DI Container is not reset when destroying application in functional tests (ivokund)\n\n\n### Composer Extension (yii2-composer)\n\n- no changes in this release.\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #6903: Fixed display issue with phpinfo() table (kalayda, cebe)\n- Bug #7222: Debug toolbar wasn't displayed properly in rtl pages (mohammadhosain, johonunu, samdark)\n- Enh #6890: Added ability to filter by query type (pana1990)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- no changes in this release.\n\n\n### Faker Extension (yii2-faker)\n\n- no changes in this release.\n\n\n### Gii Extension (yii2-gii)\n\n- Chg #7328: Changed the way CRUD generator translates \"Create X\". Now it's a whole string because of translation difficulties (samdark)\n\n\n### Imagine Extension (yii2-imagine)\n\n- no changes in this release.\n\n\n### Jui Extension (yii2-jui)\n\n- Enh #7127: `name` or `model` and `attribute` are no longer required properties of `yii\\jui\\InputWidget` (nirvana-msu, cebe)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #7010: Fixed `yii\\mongodb\\Query::select` now allows excluding fields (Sammaye, klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- no changes in this release.\n\n\n### Smarty Extension (yii2-smarty)\n\n- Bug #6845: Fixed incorrect implementation of `{registerCssFile` and `{registerJsFile` (TomassunGitHub, samdark)\n- Bug #6991: Fixed exception when using `{use class='yii\\bootstrap\\Nav' type='function'}` (ivanlemeshev)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #7198: `yii\\sphinx\\Query` no longer attempts to call snippets for the empty query result set (Hrumpa)\n\n\n### Swiftmailer Extension (yii2-swiftmailer)\n\n- no changes in this release.\n\n\n### Twig Extension (yii2-twig)\n\n- no changes in this release.\n\n\n2.0.2 January 11, 2015\n----------------------\n\n- Bug #5577: formatting date and time values for years >=2038 or <=1901 on 32bit systems will not use intl extension but fall back to the PHP implementation (cebe)\n- Bug #6080: Oracle DB schema did not load column types correctly (wenbin1989)\n- Bug #6404: advanced project template `Alert` widget was generating duplicate IDs in case of multiple flashes (SDKiller)\n- Bug #6557: Link URLs generated by `yii\\widgets\\Menu` are not encoded (qiangxue)\n- Bug #6632: `yii\\di\\Container::get()` did not handle config parameter correctly when it is passed as a constructor parameter (qiangxue)\n- Bug #6648: Added explicit type casting to avoid dblib issues on SQL Server 2014 (o-rey)\n- Bug #6691: Fixed console help description parsing with UTF8 characters (cebe)\n- Bug #6717: Fixed issue with UrlManager not matching a route on url creation when it was prefixed with `/` and pattern was empty (cebe)\n- Bug #6736: Removed `Content-Transfer-Encoding` from the list of default download headers (DaSourcerer)\n- Enh #4502: Added alias support to URL route when calling `yii\\helpers\\Url::toRoute()` and `yii\\helpers\\Url::to()` (qiangxue, lynicidn)\n- Enh #5194: `yii\\console\\controllers\\AssetController` now handles bundle files from external resources properly (klimov-paul)\n- Enh #6247: Logger and error handler are now using slightly less memory (stepanselyuk, samdark)\n- Enh #6398: Added support for specifying dependent component in terms of a configuration array for classes such as `DbCache` (qiangxue)\n- Enh #6434: Added `yii\\behaviors\\SluggableBehavior::immutable` to support keeping the generated slug unchanged (trntv)\n- Enh #6467: `yii\\widgets\\ActiveForm` will scroll to the nearest visible element when the first error input is hidden (newartix)\n- Enh #6488: Support changing `yii\\base\\Theme::basePath` during runtime (qiangxue)\n- Enh #6618: Added Model::addErrors() (slavcodev, pana1990)\n- Enh #6739: Log `Target` now works also when there is no `Yii::$app` instance available, no message prefix will be added in this case (schmunk42)\n- Enh #6748: Improved HTML to Text converter in BaseMailer to generate more readable and correct text version of emails (cebe)\n- Chg #6427: In case of invalid route web application now throws exception with \"Page not found\" instead of \"Invalid Route\" (cebe, samdark)\n- Chg #6641: removed zero padding from ETag strings (DaSourcerer)\n- Chg #6678: `yii\\behaviors\\SluggableBehavior` will generate a new slug only when the slug attribute is empty or the source attribute is changed (qiangxue)\n\n\n### Authclient Extension (yii2-authclient)\n\n- Bug #6502: Fixed `yii\\authclient\\OAuth2::refreshAccessToken()` does not save fetched token (sebathi)\n- Bug #6510: Fixed infinite redirect loop using default `yii\\authclient\\AuthAction::cancelUrl` (klimov-paul)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- Bug #6672: `yii\\bootstrap\\Dropdown` should register client event handlers (qiangxue)\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #4820: Fixed reading incomplete debug index data in case of high request concurrency (martingeorg, samdark)\n- Chg #6572: Allow panels to stay even if they do not receive any debug data (qiangxue)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- Enh: Added `ActiveFixture` class for testing fixture support for elasticsearch (cebe, viilveer)\n\n\n### Gii Extension (yii2-gii)\n\n- Bug #6463: The Gii controller generator generates incorrect controller namespace (pana1990)\n- Enh #3665: Better default behavior for ModelSearch generated by the crud generator (qiangxue, mdmunir)\n\n\n### Jui Extension (yii2-jui)\n\n- Enh #6570: Datepicker now uses fallback to find language files, e.g. application language is `de-DE` and the translation files does not exists, it will use `de` instead (cebe)\n- Enh #6471: Datepicker will now show an empty field when value is an empty string (cebe)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #6376: Fixed lazy load of relations to `yii\\mongodb\\file\\ActiveRecord` (klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- Bug #6547: Fixed redis connection to deal with large data in combination with `mget()` (pyurin)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #6621: Creating sub query at `yii\\sphinx\\Query::queryScalar()` fixed (klimov-paul)\n\n\n### Twig Extension (yii2-twig)\n\n- Bug #6464: `path` and `url` weren't resolving aliases (samdark, lynicidn)\n\n\n2.0.1 December 07, 2014\n-----------------------\n\n- Bug #4471: `yii\\caching\\ApcCache::getValues()` now returns array in case of APC is installed but not enabled in CLI mode (samdark, cebe)\n- Bug #4823: `yii message` accuracy and error handling were improved (samdark)\n- Bug #4889: Application was getting into redirect loop when user wasn't allowed accessing login page. Now shows 403 (samdark)\n- Bug #5070: Gii controller generator should use controller class name instead of controller ID to specify new controller (qiangxue)\n- Bug #5402: Debugger was not loading when there were closures in asset classes (samdark)\n- Bug #5448: Date formatter was doing timezone conversion on date only values resulting in different date displayed than provided (cebe)\n- Bug #5452: Errors occurring after the response is sent are not displayed (qiangxue)\n- Bug #5521: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs, which start from '/' (klimov-paul)\n- Bug #5570: `yii\\bootstrap\\Tabs` would throw an exception if `content` is not set for one of its `items` (RomeroMsk)\n- Bug #5584: `yii\\rbac\\DbRbacManager` should not delete items when deleting a rule on a database not supporting cascade update (mdmunir)\n- Bug #5601: Simple conditions in Query::where() and ActiveQuery::where() did not allow `yii\\db\\Expression` to be used as the value (cebe, stevekr)\n- Bug #5619: `yii\\log\\Target` should not attempt to start session when there is none (klimov-paul, qiangxue)\n- Bug #5657: `yii\\caching\\ApcCache::mset()` and `madd()` may cause warning in some APC setup (LAV45)\n- Bug #5665: The `currentPage` meta data in the RESTful result should be 1-based, similar to that in HTTP headers (qiangxue)\n- Bug #5682: The `asset` command would incorrectly combine CSS files when `yii\\web\\AssetManager::linkAssets` is true (dmvslv)\n- Bug #5702: Parenthesis should be automatically added to `yii\\validators\\Validator::whenClient` to avoid js error (mdmunir, qiangxue)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Bug #5748: Smarty `{path` was generating absolute URLs instead of relative ones (samdark, motzel)\n- Bug #5768: When setting `data-confirm` attribute to a submit button, clicking on the button would not trigger form submission (qiangxue)\n- Bug #5780: `QueryBuilder::batchInsert()` may cause \"undefined index\" error (qiangxue)\n- Bug #5833: The `message` command fails with a FK constraint error when trying to update messages (qiangxue)\n- Bug #5863: Selecting all individual `yii\\grid\\CheckboxColumn` checkboxes in grid view wasn't resulting in \"all\" checkbox selected (samdark)\n- Bug #5893: `yii\\helpers\\ArrayHelper::toArray()` now applies `$properties` parameter for converting descending objects in recursive calls (otsec)\n- Bug #5925: `yii\\helpers\\ArrayHelper::htmlEncode()` does not work properly when the value being encoded is a nested array (tebazil)\n- Bug #5962: DateValidator was throwing a warning on invalid dates using the ICU format on Windows, Yii now works around this [PHP Bug](https://bugs.php.net/bug.php?id=68528) (cebe)\n- Bug #5997: The same message may be exported twice to log targets (klimov-paul)\n- Bug #6018: When setting the `encode` option via `yii\\widgets\\ActiveRecord::errorOptions`, it works the other way around (stanishevsky, qiangxue)\n- Bug #6049: `yii\\db\\Connection::getSchema()` for Oracle should return false when the table does not exist. Oracle does not support `ON UPDATE` clause. (wenbin1989)\n- Bug #6081: `yii\\rbac\\DbManager::getChildren()` was not quoting column name properly (wenbin1989)\n- Bug #6107: `yii message` was emptying existing translations in .po in case of multiple categories (samdark)\n- Bug #6112: `yii message` was incorrectly writing not yet translated strings in .po in case of multiple categories (samdark)\n- Bug #6172: `yii\\rbac\\DbManager` should properly quote table and column names (qiangxue)\n- Bug #6164: Added missing support for `yii\\db\\Expression` to `yii\\db\\QueryBuilder` `BETWEEN` and `LIKE` conditions (cebe)\n- Bug #6236: No JS scripts should be registered when `yii\\widgets\\ActiveForm::enableClientScript` is false (qiangxue)\n- Bug #6150: `yii\\bootstrap\\Tabs` dropdown IDs were generated incorrectly (samdark)\n- Bug #6266: Clicking on reset button does not hide error summary when using ` (InteLigent, qiangxue)\n- Bug #6271: Query caching returns the same data when running the same SQL with `yii\\widgets\\ActiveForm` different fetch modes (grachov)\n- Bug #6279: `yii\\db\\Schema::getLastInsertID()` was passing wrong default schema name to PDO (samdark)\n- Bug #6305: `yii\\i18n\\Formatter::asParagraphs()` was not unicode-aware (samdark)\n- Bug #6311: Optimistic lock for ActiveRecord does not work as expected (qiangxue)\n- Bug #6367: Added `yii\\gii\\generators\\crud\\Generator` to support customizing view path for the generated CRUD controller (qiangxue)\n- Bug #6381: Client-side file validation should be disabled if the browser does not support it (Skysplit)\n- Bug: Gii console command help information does not contain global options (qiangxue)\n- Bug: `yii\\web\\UrlRule` was unable to create URLs for rules containing unicode characters (samdark)\n- Bug: `yii\\web\\AssetManager` should not publish disabled asset bundles (qiangxue)\n- Enh #608: Added `yii\\web\\AssetConverter::$forceConvert` (klimov-paul)\n- Enh #4146: Added `yii\\bootstrap\\ButtonDropdown::$containerOptions` (samdark)\n- Enh #4181: Added `yii\\bootstrap\\Modal::$headerOptions` and `yii\\bootstrap\\Modal::$footerOptions` (tuxoff, samdark)\n- Enh #4263: Added migration and SQL schema files for `yii\\log\\DbTarget` (samdark)\n- Enh #4395: Added `$checkAjax` parameter to `yii\\web\\Response::redirect()` to support default redirection behavior for AJAX/PJAX requests (qiangxue)\n- Enh #4450: Added `yii\\bootstrap\\Nav::renderDropdown()` (qiangxue)\n- Enh #4457: Added support for using noscript for css files registered through asset bundles and Html helper (samdark)\n- Enh #4492: Support PostgreSQL-specific syntax for `yii\\db\\QueryBuilder::alterColumn()` (qiangxue)\n- Enh #4643: Extra options specified in `yii\\widgets\\Breadcrumbs::links` will be treated as HTML attributes for the generated hyperlinks (qiangxue)\n- Enh #4739: Better display of exceptions when the response format is set as \"raw\" format (qiangxue)\n- Enh #4791: Added console output support and more colors for console commands (6pblcb, samdark, klimov-paul, Ragazzo)\n- Enh #5005: Added support to suppress loading the same CSS files in AJAX responses (tof06, qiangxue)\n- Enh #5223: Query builder now supports selecting sub-queries as columns (qiangxue)\n- Enh #5367: Added `yii\\grid\\DataColumn::encodeLabel` (SDKiller)\n- Enh #5480: Added defensive code to `yii\\web\\User::getIdentity()` to avoid potential infinite recursion (qiangxue)\n- Enh #5494: Added support for specifying a menu header as a configuration array in `yii\\bootstrap\\Dropdown` (hiltonjanfield, qiangxue)\n- Enh #5503: Added support for `DateTimeImmutable` to `yii\\i18n\\Formatter` (olegtsvetkov, cebe)\n- Enh #5587: `json_encode` is now used with `JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE` where it makes sense, also\n  it is now default for `yii\\helpers\\Json::encode()` (samdark)\n- Enh #5600: Allow configuring debug panels in `yii\\debug\\Module::panels` as panel class name strings (qiangxue)\n- Enh #5613: Added `--overwrite` option to Gii console command to support overwriting all files (motin, qiangxue)\n- Enh #5627: Added `yii cache/flush-schema` console command to flush DB schema cache of a given database connection (6pblcb, samdark)\n- Enh #5646: Call `yii\\base\\ErrorHandler::unregister()` instead of `restore_*_handlers` directly (aivus)\n- Enh #5683: Added `yii\\i18n\\Formatter::defaultTimeZone` for specifying the default time zone to use for datetime values stored in the database (cebe)\n- Enh #5688: Added optional `$formName` to `Model::loadMultiple()` to support customizing form name directly (qiangxue)\n- Enh #5735: Added `yii\\bootstrap\\Tabs::renderTabContent` to support manually rendering tab contents (RomeroMsk)\n- Enh #5770: Added more PHP error names for `ErrorException` (mongosoft)\n- Enh #5799: `yii\\bootstrap\\ButtonGroup::buttons` can take all options that are supported by `yii\\bootstrap\\Button` (aleksanderd)\n- Enh #5806: Allow `Html::encode()` to be used when the application is not started (qiangxue)\n- Enh #5954: `yii message` command now shows user friendly error if it's not able to parse source file (samdark)\n- Enh #5983: Added `yii\\helpers\\Inflector::sentence()` (pana1990, qiangxue)\n- Enh #6113: Improved debugger configuration and request UI (schmunk42)\n- Enh #6207: Added support for truncating HTML strings using `StringHelper::truncate()` and `StringHelper::truncateWords()` (Alex-Code)\n- Enh #6318: Made widgets more error-tolerant and user-friendly when certain option values are null (qiangxue)\n- Enh: `Console::confirm()` now uses `Console::stdout()` instead of `echo` to be consistent with all other functions (cebe)\n- Enh: `yii\\rbac\\DbManager` migration now uses database component specified in component settings instead of always using default `db` (samdark)\n- Enh: Added `yii\\base\\Controller::renderContent()` (qiangxue)\n- Enh: `yii fixture` command now offers help if no arguments are provided instead of crashing (samdark)\n- Chg #3630: `yii\\db\\Command::queryInternal()` is now protected (samdark)\n- Chg #4277: `yii\\grid\\GridView` is no longer throwing an exception when results are empty and `columns` aren't defined (samdark)\n- Chg #5508: Dropped the support for the `--append` option for the `fixture` command (qiangxue)\n- Chg #5874: Upgraded Twitter Bootstrap to 3.3.x (samdark)\n\n\n### Apidoc Extension (yii2-apidoc)\n\n- Bug #5623: Fixed crash when a class contains a setter that has no arguments e.g. `setXyz()` (cebe)\n- Bug #5899: Incorrect class listed as `definedBy` reference for properties (cebe)\n- Bug: Guide and API renderer now work with relative paths/URLs (cebe)\n- Enh: Guide generator now skips `images` directory if it does not exist instead of throwing an error (cebe)\n- Enh: Made `--guidePrefix` option available as a command line option (cebe)\n\n\n### Authclient Extension (yii2-authclient)\n\n- Bug #6000: Fixed CCS for `yii\\authclient\\widgets\\AuthChoice` does not loaded if `popupMode` disabled (klimov-paul)\n\n\n### Bootstrap Extension (yii2-bootstrap)\n\n- Bug #5570: `yii\\bootstrap\\Tabs` would throw an exception if `content` is not set for one of its `items` (RomeroMsk)\n- Bug #6150: `yii\\bootstrap\\Tabs` dropdown IDs were generated incorrectly (samdark)\n- Enh #4146: Added `yii\\bootstrap\\ButtonDropdown::$containerOptions` (samdark)\n- Enh #4181: Added `yii\\bootstrap\\Modal::$headerOptions` and `yii\\bootstrap\\Modal::$footerOptions` (tuxoff, samdark)\n- Enh #4450: Added `yii\\bootstrap\\Nav::renderDropdown()` (qiangxue)\n- Enh #5494: Added support for specifying a menu header as a configuration array in `yii\\bootstrap\\Dropdown` (hiltonjanfield, qiangxue)\n- Enh #5735: Added `yii\\bootstrap\\Tabs::renderTabContent` to support manually rendering tab contents (RomeroMsk)\n- Enh #5799: `yii\\bootstrap\\ButtonGroup::buttons` can take all options that are supported by `yii\\bootstrap\\Button` (aleksanderd)\n- Chg #5874: Upgraded Twitter Bootstrap to 3.3.x (samdark)\n\n\n### Debug Extension (yii2-debug)\n\n- Bug #5402: Debugger was not loading when there were closures in asset classes (samdark)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Enh #5600: Allow configuring debug panels in `yii\\debug\\Module::panels` as panel class name strings (qiangxue)\n- Enh #6113: Improved configuration and request UI (schmunk42)\n- Enh: Made `DefaultController::getManifest()` more robust against corrupt files (cebe)\n\n\n### Elasticsearch Extension (yii2-elasticsearch)\n\n- Bug #5662: Elasticsearch AR updateCounters() now uses explicitly `groovy` script for updating making it compatible with ES >1.3.0 (cebe)\n- Bug #6065: `ActiveRecord::unlink()` was failing in some situations when working with relations via array valued attributes (cebe)\n- Enh #5758: Allow passing custom options to `ActiveRecord::update()` and `::delete()` including support for routing needed for updating records with parent relation (cebe)\n- Enh: Add support for optimistic locking (cebe)\n\n\n### Gii Extension (yii2-gii)\n\n- Bug #5070: Gii controller generator should use controller class name instead of controller ID to specify new controller (qiangxue)\n- Bug #5745: Gii and debug modules may cause 404 exception when the route contains dashes (qiangxue)\n- Bug #6367: Added `yii\\gii\\generators\\crud\\Generator` to support customizing view path for the generated CRUD controller (qiangxue)\n- Bug: Gii console command help information does not contain global options (qiangxue)\n- Enh #5613: Added `--overwrite` option to Gii console command to support overwriting all files (motin, qiangxue)\n\n\n### Mongodb Extension (yii2-mongodb)\n\n- Bug #6026: Fixed `yii\\mongodb\\ActiveRecord` saves `null` as `_id`, if attributes are empty (klimov-paul)\n- Enh #3855: Added debug toolbar panel for MongoDB (klimov-paul)\n- Enh #5592: Added support for 'findAndModify' operation at `yii\\mongodb\\Query` and `yii\\mongodb\\ActiveQuery` (klimov-paul)\n\n\n### Redis Extension (yii2-redis)\n\n- Bug #4745: value of simple string returns was ignored by redis client and `true` is returned instead, now only `OK` will result in a `true` while all other values are returned as is (cebe)\n- Enh #3714: Added support for connecting to redis server using a unix socket (savvot, robregonm)\n\n\n### Smarty Extension (yii2-smarty)\n\n- Bug #5748: `{path` was generating absolute URLs instead of relative ones (samdark, motzel)\n\n\n### Sphinx Extension (yii2-sphinx)\n\n- Bug #5601: Simple conditions in `yii\\sphinx\\Query::where()`` and `yii\\sphinx\\ActiveQuery::where()` did not allow `yii\\db\\Expression` to be used as the value (cebe, stevekr)\n- Bug #5634: Fixed `yii\\sphinx\\QueryBuilder` does not support comparison operators (>,<,>= etc) in where specification (klimov-paul)\n- Bug #6164: Added missing support for `yii\\db\\Exression` to QueryBuilder `LIKE` conditions (cebe)\n- Enh #5223: Query builder now supports selecting sub-queries as columns (qiangxue)\n\n\n2.0.0 October 12, 2014\n----------------------\n\n- Bug #4881: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs on Windows (klimov-paul)\n- Bug #5171: Fixed the bug that ActiveForm + Pjax submit event is only triggered once (qiangxue)\n- Bug #5242: Fixed `yii\\console\\controllers\\AssetController` breaks CSS URLs in case target file localed at `yii\\web\\AssetManager::basePath` root (klimov-paul)\n- Bug #5252: Null values are not properly handled by `RangeValidator` (githubjeka, qiangxue)\n- Bug #5260: `yii\\i18n\\Formatter::decimalSeparator` and `yii\\i18n\\Formatter::thousandSeparator` where not configurable when intl is not installed (execut, cebe)\n- Bug #5314: Fixed typo in the implementation of `yii\\web\\Session::getHasSessionId()` (qiangxue)\n- Bug #5323: Nested dropdown does not work for `yii\\bootstrap\\DropDown` (aryraditya)\n- Bug #5336: `yii\\bootstrap\\DropDown` should register bootstrap plugin asset (zelenin)\n- Bug #5379: `yii\\base\\Module::afterAction()` was called even when `beforeAction()` returned false (cebe)\n- Bug #5408: Gii console command incorrectly reports errors when there is actually no error (qiangxue)\n- Bug #5423: `yii\\behaviors\\Cors` causes \"undefined index\" error when its `cors` is configured (qiangxue)\n- Bug #5424: `yii\\helpers\\Html::addCssStyle()` wasn't correctly setting style passed in array (kartik-v, samdark)\n- Bug #5435: Added extra checks to `yii\\rbac\\DbManager` to prevent database exceptions when `$userId` is empty (samdark)\n- Bug #5484: Fixed potential string suffix detection failure on 5.5.11 (qiangxue)\n- Bug: Date and time formatting now assumes UTC as the timezone for input dates unless a timezone is explicitly given (cebe)\n- Enh #4040: Added `$viewFile` and `$params` to the `EVENT_BEFORE_RENDER` and `EVENT_AFTER_RENDER` events for `View` (qiangxue)\n- Enh #4275: Added `removeChildren()` to `yii\\rbac\\ManagerInterface` and implementations (samdark)\n- Enh: Added `yii\\base\\Application::loadedModules` (qiangxue)\n- Enh #5316: Added `startsWith()` and `endsWith()` to `yii\\helpers\\StringHelper`. Methods are binary-safe, multibyte-safe and optionally case-insensitive (armab)\n- Enh #5467: Added ability to pass HTML tag options to `asEmail()`, `asImage()` and `asUrl()` methods of `yii\\i18n\\Formatter` (alxkolm, samdark)\n- Chg #2037: Dropped the support for using `yii\\base\\Module` as concrete module classes (qiangxue)\n- Chg: Updated cebe/markdown to 1.0.0 which includes breaking changes in its internal API (cebe)\n- Chg: If you are using CUBRID DBMS, make sure to use at least version 9.3.0 because quoting is broken in prior versions and Yii has no reliable way to work around this issue (cebe)\n\n\n2.0.0-rc September 27, 2014\n---------------------------\n\n- Bug #1263: Fixed the issue that Gii and Debug modules might be affected by incompatible asset manager configuration (qiangxue)\n- Bug #2314: Gii model generator does not generate correct relation type in some special case (qiangxue)\n- Bug #2563: Theming is not working if the path map of the theme contains \"..\" or \".\" in the paths (qiangxue)\n- Bug #2801: Fixed the issue that GridView gets footer content before data cells content (ElisDN)\n- Bug #2821: Console help command incorrectly lists non-console controllers as available commands (qiangxue)\n- Bug #2853: ActiveRecord did not handle resource-typed columns well (chris68, qiangxue)\n- Bug #3042: `yii\\widgets\\Pjax` should end application right after it finishes responding to a pjax request (qiangxue)\n- Bug #3066: `yii\\db\\mssql\\Schema::getTableSchema()` should return null when the table does not exist (qiangxue)\n- Bug #3091: Fixed inconsistent treatment of `Widget::run()` when a widget is used as a container and as a self-contained object (qiangxue)\n- Bug #3118: Ensure client validation has the same behavior as server side validation for number validator (cebe)\n- Bug #3121: `yii\\base\\Application::bootstrap` may fail to load some components if they are specified as class names (qiangxue)\n- Bug #3125: `yii\\console\\controllers\\AssetController` now respects data URL resources (klimov-paul)\n- Bug #3128: Fixed the bug that `defaultRoles` set in RBAC manager was not working as specified (qiangxue)\n- Bug #3153: Fixed the bug that using \"between\" operator to build a SQL query will cause a PHP notice (gonimar)\n- Bug #3184: Fixed the bug that client validation for string length comparison did not set error message correctly (Sergeygithub)\n- Bug #3194: Date formatter works only for timestamps in the year range 1970 to 2038 (kartik-v)\n- Bug #3197: Using `yii\\db\\ActiveQuery::indexBy()` may cause relational AR queries to generate incorrect relational results (qiangxue)\n- Bug #3204: `yii\\di\\Container` did not handle the `$config` parameter well in case when it does not have a default value (qiangxue)\n- Bug #3216: Fixed the bug that `yii.activeForm.destroy()` did not remove `submit` event handlers (qiangxue)\n- Bug #3233: Ensure consistent behavior in `yii\\db\\ActiveRecord::afterSave()`` (cebe, qiangxue)\n- Bug #3236: Return value for `DateTime->format('U')`` casted to double to allow correct date formatting (pgaultier)\n- Bug #3268: Fixed the bug that the schema name in a table name was not respected by `yii\\db\\mysql\\Schema` (terazoid, qiangxue)\n- Bug #3311: Fixed the bug that `yii\\di\\Container::has()` did not return correct value (mgrechanik, qiangxue)\n- Bug #3327: Fixed \"Unable to find debug data\" when logging objects with circular references (jarekkozak, samdark)\n- Bug #3368: Fix for comparing numeric attributes in JavaScript (technixp)\n- Bug #3393: Fix `yii\\helpers\\FileHelper::copyDirectory()` pattern not working (klimov-paul)\n- Bug #3431: Allow using extended `yii\\base\\ErrorHandler` class from the app namespace (cebe)\n- Bug #3436: Fixed the issue that `yii\\di\\ServiceLocator` still returns the old component after calling `set()` with a new definition (qiangxue)\n- Bug #3458: Fixed the bug that the image rendered by `CaptchaAction` was using a wrong content type (MDMunir, qiangxue)\n- Bug #3473: Allow postgreSQL to specify timestamp precision via abstract types in `yii\\db\\QueryBuilder` (cebe)\n- Bug #3478: Fixed `yii\\console\\Controller::select()` accept empty input as '0' value (lynicidn)\n- Bug #3522: Fixed `yii\\helpers\\FileHelper::normalizePath()` to allow a (.) for the current path. (skotos)\n- Bug #3548: Fixed the bug that X-Rate-Limit-Remaining header is always zero when using RateLimiter (qiangxue)\n- Bug #3559: Use native support for batchInsert in SQLite versions >= 3.7.11 and avoid limitations of the fallback (cebe)\n- Bug #3564: Fixed the bug that primary key columns should not take default values from schema (qiangxue)\n- Bug #3567: Fixed the bug that smallint was treated as string for PostgreSQL (qiangxue)\n- Bug #3568: When the primary query sets `asArray`, it is not respected by the `via` relational query (qiangxue)\n- Bug #3578: Fixed postgreSQL column type detection, added missing types (MDMunir, cebe)\n- Bug #3583: Added typecast to auto value of primary key on insert of sql active record (cebe)\n- Bug #3591: Fixed incomplete obsolete filling in i18n `MessageController::saveMessagesToDb()` (advsm)\n- Bug #3601: Fixed the bug that the refresh URL was not generated correctly by `Captcha` (qiangxue, klevron)\n- Bug #3638: `yii\\filters\\HttpCache` does not work as expected when session is started before the filter (qiangxue)\n- Bug #3681: Fixed problem with AR::findOne() when a default scope joins another table so that PK name becomes ambigous (cebe)\n- Bug #3715: Fixed the bug that using a custom pager/sorter with `GridView` may generate two different pagers/sorters if the layout configures two pagers/sorters (qiangxue)\n- Bug #3716: `yii\\base\\DynamicModel::validateData()` does not call `validate()` if the `$rules` parameter is empty (qiangxue)\n- Bug #3725: Fixed the bug that the filtering condition used in relation definition was ignored when calling `ActiveRecord::unlinkAll()`. (qiangxue, cebe)\n- Bug #3738: `yii\\widgets\\ActiveField` custom error selector not functioning (qiangxue)\n- Bug #3751: Fixed postgreSQL schema data for enum values, do not add values if there are none (makroxyz)\n- Bug #3752: `QueryBuilder::batchInsert()` does not typecast input values (qiangxue)\n- Bug #3756: Fix number formatting error for `yii\\base\\Formatter` by converting strings to float (kartik-v)\n- Bug #3772: Behaviors adding validation rules do not work as expected (qiangxue)\n- Bug #3817: `yii\\rbac\\PhpManager::getChildren()` returns null instead of expected empty array (qiangxue)\n- Bug #3843: Fixed Menu bug when using `template` with `encodeLabel` => false (creocoder, umneeq)\n- Bug #3863: Fixed incorrect js selector for `yii\\widgets\\ActiveForm::errorSummaryCssClass` when it contains multiple classes (creocoder, umneeq)\n- Bug #3893: Headers did not overwrite default setting by webserver (cebe)\n- Bug #3909: `yii\\helpers\\Html::to()` should not prefix base URL to URLs that already contain scheme (qiangxue)\n- Bug #3920: Fixed issue with loading default values of PostgreSQL boolean columns (cebe)\n- Bug #3934: `yii.handleAction()` in `yii.js` does not correctly detect if a hyperlink contains useful URL or not (joni-jones, qiangxue)\n- Bug #3968: Messages logged in shutdown functions are not handled (qiangxue)\n- Bug #3989: Fixed `yii\\log\\FileTarget::rotateByCopy` to avoid any rename (cebe)\n- Bug #3996: Traversing `Yii::$app->session` may cause a PHP error (qiangxue)\n- Bug #4020: OCI column detection did not work so gii and other things failed (Sanya1991)\n- Bug #4105: `yii\\helpers\\Html::dropDownlist()` options encodeSpaces was not applied to subgroups (MDMunir)\n- Bug #4123: Trace level in logger had no effect in Targets, traces where not logged (cebe)\n- Bug #4127: `yii\\captcha\\CaptchaValidator` clientside error message wasn't formed properly (samdark)\n- Bug #4162: Fixed bug where schema name was not used in `SHOW CREATE TABLE` query in `yii\\db\\mysql\\Schema` (stevekr)\n- Bug #4241: `yii\\widgets\\Pjax` was incorrectly setting container id (mitalcoi)\n- Bug #4254: `SqlDataProvider` does not work with Oracle and SQL Server (qiangxue, miramir)\n- Bug #4276: Added check for UPLOAD_ERR_NO_FILE in `yii\\web\\UploadedFile` and return null if no file was uploaded (OmgDef)\n- Bug #4342: mssql (dblib) driver does not support getting attributes (tof06)\n- Bug #4371: Active form client validation wasn't working in case of two models having same named fields (abrahamy)\n- Bug #4409: Upper case letters in subdirectory prefixes of controller IDs were not properly handled (qiangxue)\n- Bug #4412: Formatter used SI Prefixes for base 1024, now uses binary prefixes (kmindi)\n- Bug #4427: Formatter could do one division too much (kmindi)\n- Bug #4453: `yii message/extract` wasn't properly writing to po files in case of multiple categories (samdark)\n- Bug #4469: Make `yii\\base\\Security::compareString()` timing depend only on length of `$actual` input and add unit test. (tom--)\n- Bug #4470: Avoid endless loop when exporting logs with low values of flushInterval and eportInterval (cebe)\n- Bug #4497: Fixed `yii\\helpers\\StringHelper::byteSubstr()`` returning empty string on null $length param (mbman)\n- Bug #4514: Fixed Request class crashing when empty CSRF token value is sent in cookie (cebe)\n- Bug #4519: `yii\\base\\Model::isAttributeRequired()` should check if the `when` option of the validator is set (thiagotalma)\n- Bug #4592: Fixed `yii help` command was listing incorrect action names for methods like `actionSayNO` (samdark)\n- Bug #4654: Fixed issue with PostgreSQL and inserting boolean values with batch insert (cebe)\n- Bug #4672: Fixed issue with PostgreSQL handling of boolean values in queries, dropped support for using boolean value for integer columns (cebe)\n- Bug #4727: Fixed wrong Stylus definition in `yii\\web\\AssetConverter` (samdark)\n- Bug #4755: `yii\\test\\BaseActiveFixture::unload()` does not clean up the internal cached data (qiangxue)\n- Bug #4813: Fixed MSSQL schema that was getting incorrect info about constraints (samdark, SerjRamone, o-rey)\n- Bug #4880: Return value of yii\\web\\Request::getPrefferedLanguage() was a normalized value instead of a valid language value from the input array (cebe)\n- Bug #4905: ActiveForm::$validationDelay doesn't delay after keyrelease when $validateOnType=true (qiangxue)\n- Bug #4920: `yii\\filters\\auth\\CompositeAuth` should not trigger error as long as one of the methods succeeds (qiangxue)\n- Bug #4926: Fixed `yii\\console\\controllers\\MessageController` handles category name containing dot incorrectly (klimov-paul)\n- Bug #4938: When `yii\\db\\ActiveQuery` is used to build sub-queries, its WHERE clause is not correctly generated (qiangxue)\n- Bug #4954: MSSQL column comments are not retrieved correctly (SerjRamone)\n- Bug #4970: `joinWith()` called by a relation was ignored by `yii\\db\\ActiveQuery` (stepanselyuk)\n- Bug #5001: `yii\\rest\\CreateAction`, `yii\\rest\\UpdateAction` and `yii\\rest\\DeleteAction` should throw 500 error if the model operation returns false without validation errors (qiangxue)\n- Bug #5039: `UniqueValidator` and `ExistValidator` did not respect query conditions added by default scope (qiangxue)\n- Bug #5049: `yii\\widgets\\ActiveForm::validationDelay` should be applied to user types only (qiangxue)\n- Bug #5055: Fixed `yii\\console\\controllers\\CacheController` does not check if cache component instance of 'yii\\caching\\Cache' (klimov-paul)\n- Bug #5126: Fixed text body and charset not being set for multipart mail (nkovacs)\n- Bug: Fixed inconsistent return of `yii\\console\\Application::runAction()` (samdark)\n- Bug: URL encoding for the route parameter added to `yii\\web\\UrlManager` (klimov-paul)\n- Bug: Fixed the bug that requesting protected or private action methods would cause 500 error instead of 404 (qiangxue)\n- Bug: Fixed Object of class Imagick could not be converted to string in `yii\\captcha\\CaptchaAction` (eXprojects, cebe)\n- Bug: Fixed wrong behavior of `yii\\helpers\\StringHelper::byteSubstr()` in some edge cases (cebe)\n- Enh #87: Helper `yii\\helpers\\Security` converted into application component, cryptographic strength improved (klimov-paul)\n- Enh #422: Added Support for BIT(M) data type default values in Schema (cebe)\n- Enh #1160: Added $strict parameter to `yii\\helpers\\Inflector::camel2id()` to handle consecutive uppercase chars (schmunk)\n- Enh #1249: Added support for Active Record relation via array attributes (klimov-paul, cebe)\n- Enh #1388: Added mapping from physical types to abstract types for OCI DB driver (qiangxue)\n- Enh #1452: Added `yii\\base\\Module::getInstance()` to allow accessing the module instance from anywhere within the module (qiangxue)\n- Enh #2264: `yii\\web\\CookieCollection::has()` will return false for expired or removed cookies (qiangxue)\n- Enh #2315: Any operator now could be used with `yii\\db\\Query::where()` operand format (samdark)\n- Ehn #2380: Added `yii\\widgets\\ActiveForm::enableClientScript` to support turning on and off client side script generation (qiangxue)\n- Enh #2435: `yii\\db\\IntegrityException` is now thrown on database integrity errors instead of general `yii\\db\\Exception` (samdark)\n- Enh #2558: Enhanced support for memcached by adding `yii\\caching\\MemCache::persistentId` and `yii\\caching\\MemCache::options` (qiangxue)\n- Enh #2837: Error page now shows arguments in stack trace method calls (samdark)\n- Enh #2906: Added support for using conditional comments for js and css files registered through asset bundles and `yii\\helpers\\Html` helper (exromany, qiangxue)\n- Enh #2942: Added truncate and truncateWord methods (Alex-Code, samdark)\n- Enh #3008: Added `yii\\helpers\\Html::errorSummary()` (qiangxue)\n- Enh #3088: The debug and gii modules will manage their own URL rules now (hiltonjanfield, qiangxue)\n- Enh #3101: Improved handling of log target failures. It will now skip target and log reason instead of going into infinite cycle (samdark)\n- Enh #3103: debugger panel is now not displayed when printing a page (githubjeka)\n- Enh #3108: Added `yii\\debug\\Module::enableDebugLogs` to disable logging debug logs by default (qiangxue)\n- Enh #3132: `yii\\rbac\\PhpManager` now supports more compact data file format (qiangxue)\n- Enh #3154: Added validation error display for `GridView` filters (ivan-kolmychek)\n- Enh #3177: `yii\\filters\\auth\\CompositeAuth` will send out challenges from all auth methods (qiangxue)\n- Enh #3196: Masked input upgraded to use jquery.inputmask plugin with more features. (kartik-v)\n- Enh #3220: Added support for setting transaction isolation levels (cebe)\n- Enh #3221: Added events for DB transaction commit/rollback (drcypher, qiangxue)\n- Enh #3222: Added `useTablePrefix` option to the model generator for Gii (horizons2)\n- Enh #3230: Added `yii\\filters\\AccessControl::user` to support access control with different actors (qiangxue)\n- Enh #3232: Added `export()` and `exportAsString()` methods to `yii\\helpers\\BaseVarDumper` (klimov-paul)\n- Enh #3240: Added support for assigning an anonymous function to `yii\\widgets\\ActiveForm::fieldConfig` (qiangxue)\n- Enh #3244: Allow logging complex data such as arrays and object via the log system (cebe)\n- Enh #3252: Added support for case insensitive matching using ILIKE to PostgreSQL QueryBuilder (cebe)\n- Enh #3280: Support dynamically attaching anonymous behaviors (qiangxue)\n- Enh #3283: Added `$checkAjax` to `yii\\web\\User::loginRequired()` (qiangxue)\n- Enh #3284: Added support for checking multiple ETags by `yii\\filters\\HttpCache` (qiangxue)\n- Enh #3298: Supported configuring `View::theme` using a class name (netyum, qiangxue)\n- Enh #3328: `yii\\mail\\BaseMailer` generates better text body from html body (armab)\n- Enh #3380: Allow `value` in `defaultValueValidator` to be a closure (Alex-Code)\n- Enh #3384: Added callback-style transactions (leandrogehlen, Ragazzo, samdark)\n- Enh #3399, #3241: Added support for MS SQL Server older than 2012 (fourteenmeister, samdark)\n- Enh #3410: `yii.activeForm.js` now supports adding/removing fields dynamically (qiangxue)\n- Enh #3459: Added logging of errors, which may occur at `yii\\caching\\FileCache::gc()` (klimov-paul)\n- Enh #3472: Added configurable option to encode spaces in dropDownLists and listBoxes (kartik-v)\n- Enh #3518: `yii\\helpers\\Html::encode()` now replaces invalid code sequences with \"\ufffd\" (DaSourcerer)\n- Enh #3520: Added `unlinkAll()` method to active record to remove all records of a model relation (NmDimas, samdark, cebe)\n- Enh #3521: Added `yii\\filters\\HttpCache::sessionCacheLimiter` (qiangxue)\n- Enh #3542: Removed requirement to specify `extensions` in application config (samdark)\n- Enh #3562: Adding rotateByCopy to `yii\\log\\FileTarget` (pawzar)\n- Enh #3574: Add integrity check support for SQLite (zeeke)\n- Enh #3581: Added `yii\\validators\\CompareValidator::type` to support type conversion before comparing values (qiangxue)\n- Enh #3597: Nested array support for HTML5 custom `data-*` attributes (armab)\n- Enh #3607: Added support for limit in migrations actions: history, new, redo (Ragazzo)\n- Enh #3631: Added property `currencyCode` to `yii\\i18n\\Formatter` (leandrogehlen)\n- Enh #3636: Hide menu container tag with empty items in `yii\\widgets\\Menu` (arturf)\n- Enh #3643: Improved Mime-Type detection by using the `mime.types` file from apache http project to dected mime types by file extension (cebe, pavel-voronin, trejder)\n- Enh #3765: Added `yii\\web\\User::enableSession` to support authentication without using session (qiangxue)\n- Enh #3708: Added database replication and automatic read-write splitting support for `yii\\db\\Connection` (qiangxue)\n- Enh #3773: Added `yii\\validators\\FileValidator::mimeTypes` to support validating MIME types of files (Ragazzo)\n- Enh #3774: Added `yii\\validators\\FileValidator::checkExtensionByMimeType` to support validating file types against file mime-types (Ragazzo)\n- Enh #3801: Base migration controller `yii\\console\\controllers\\BaseMigrateController` extracted (klimov-paul)\n- Enh #3811: Now Gii model generator makes autocomplete for model class field (mitalcoi)\n- Enh #3926: `yii\\widgets\\Breadcrumbs::$links`. Allows individual link to have its own `template` (creocoder, umneeq)\n- Enh #3939: `yii\\helpers\\Inflector::slug()` improvements (samdark)\n    - Added protected `yii\\helpers\\Inflector::transliterate()` that could be replaced with custom translit implementation.\n    - Added proper tests for both intl-based slug and PHP fallback.\n    - Removed character maps for non-latin languages.\n    - Improved overall slug results.\n    - Added note about the fact that intl is required for non-latin languages to requirements checker.\n- Enh #3957: Added more straightforward configurable properties to `yii\\behaviors\\BlameableBehavior`, `yii\\behaviors\\SluggableBehavior` and `yii\\behaviors\\TimestampBehavior` (creocoder)\n- Enh #3992: In mail layouts you can now access the message object via `$message` variable (qiangxue)\n- Enh #4028: Added ability to `yii\\widgets\\Menu` to encode each item's label separately (creocoder, umneeq)\n- Enh #4048: Added `init` event to `yii\\bd\\ActiveQuery` classes (qiangxue)\n- Enh #4072: `yii\\rbac\\PhpManager` adjustments (samdark)\n    - Data is now stored in three separate files for items, assignments and rules. File format is simpler.\n    - Removed `authFile`. Added `itemFile`, `assignmentFile` and `ruleFile`.\n    - `createdAt` and `updatedAt` are now properly filled with corresponding file modification time.\n    - `save()` and `load()` are now protected instead of public.\n    - Added unit test for saving and loading data.\n- Enh #4080: Added proper handling and support of the symlinked directories in `yii\\helpers\\FileHelper`, added $options parameter in `yii\\helpers\\FileHelper::removeDirectory()` (resurtm)\n- Enh #4086: `changedAttributes` of `afterSave` Event now contain old values (dizews)\n- Enh #4114: Added `yii\\helpers\\Security::generateRandomBytes()`, improved tests (samdark)\n- Enh #4122: `yii\\helpers\\Html::error()` and `yii\\helpers\\Html::errorSummary()` are now accepting `encode` option. If set to false it prevents encoding of error messages (samdark)\n- Enh #4131: Security adjustments (tom--)\n     - Added HKDF to `yii\\base\\Security`.\n     - Reverted auto fallback to PHP PBKDF2.\n     - Fixed PBKDF2 key truncation.\n     - Adjusted API.\n- Enh #4209: Added `beforeCopy`, `afterCopy`, `forceCopy` properties to `yii\\web\\AssetManager` (cebe)\n- Enh #4225: Added `yii\\widgets\\ActiveForm::validateOnBlur` and `yii\\widgets\\ActiveField::validateOnBlur` (qiangxue)\n- Enh #4297: Added check for DOM extension to requirements (samdark)\n- Enh #4317: Added `absoluteAuthTimeout` to `yii\\web\\User` (ivokund, nkovacs)\n- Enh #4360: Added client validation support for file validator (Skysplit)\n- Enh #4372: `yii\\filters\\HttpCache` failed to comply to RFC 7232 (DaSourcerer)\n- Enh #4424: Added `inline` parameter to `yii\\web\\Response::xSendFile()` (klimov-paul)\n- Enh #4436: Added callback functions to AJAX-based form validation (thiagotalma)\n- Enh #4485: Added support for deferred validation in `yii\\widgets\\ActiveForm` (Alex-Code)\n- Enh #4520: Added sasl support to `yii\\caching\\MemCache` (xjflyttp)\n- Enh #4566: Added client validation support for image validator (Skysplit, qiangxue)\n- Enh #4581: Added ability to disable url encoding in `yii\\web\\UrlRule` (tadaszelvys)\n- Enh #4602: Added $key param in `yii\\grid\\ActionColumn` buttons Closure call (disem)\n- Enh #4607: AR model will throw an exception if it does not have a primary key to avoid updating/deleting data massively (qiangxue)\n- Enh #4630: Added automatic generating of unique slug value to `yii\\behaviors\\Sluggable` (klimov-paul)\n- Enh #4636: Added `yii\\web\\Response::setDownloadHeaders()` (pawzar)\n- Enh #4644: Added `yii\\db\\Schema::createColumnSchema()` to be able to customize column schema used (mcd-php)\n- Enh #4656: HtmlPurifier helper config can now be a closure to change the purifier config object after it was created (Alex-Code)\n- Enh #4062: Added 'caseSensitive' option to `yii\\helpers\\BaseFileHelper::findFiles()` (klimov-paul)\n- Enh #4691: Encoding on `yii\\widgets\\ActiveForm` and `yii\\widgets\\ActiveField` validation errors is now configurable (Alex-Code)\n- Enh #4740: Added `yii\\web\\Session::addFlash()` (restyler)\n- Enh #4897: Added `yii\\helpers\\FileHelper::mimeMagicFile` (qiangxue)\n- Enh #5058: Added `$pageSize` parameter to `yii\\data\\Pagination::createUrl()` to allow creating URLs with arbitrary page sizes (cdcchen, qiangxue)\n- Enh #5089: Added asset debugger panel (arturf, qiangxue)\n- Enh #5117: Added `beforeFilter` and `afterFilter` JS events to `GridView` (kartik-v)\n- Enh #5124: Added support to prevent duplicated form submission when using `yii\\widgets\\ActiveForm` (qiangxue)\n- Enh #5131: Added `$autoRenew` parameter to `yii\\web\\User::getIdentity()` (qiangxue)\n- Enh #5164: Added `yii\\helpers\\Inlfector::$transliterator` that can be used to customize intl transliteration (zinzinday)\n- Enh: Added support for using sub-queries when building a DB query with `IN` condition (qiangxue)\n- Enh: Supported adding a new response formatter without the need to reconfigure existing formatters (qiangxue)\n- Enh: Added `yii\\web\\UrlManager::addRules()` to simplify adding new URL rules (qiangxue)\n- Enh: Added support to insert an event handler at the beginning of class-level event handler queue (qiangxue)\n- Enh: Added `yii\\console\\Controller::EXIT_CODE_NORMAL` and `yii\\console\\Controller::EXIT_CODE_ERROR` constants (samdark)\n- Enh: `yii\\console\\MigrateController` now returns `yii\\console\\Controller::EXIT_CODE_ERROR` in case of failed migration (samdark)\n- Enh: Added method `yii\\base\\ErrorHandler::unregister()`` for unregistering the ErrorHandler (cebe)\n- Enh: Added `all` option to `yii\\console\\controllers\\MigrateController::actionDown()` action (creocoder, umneeq)\n- Enh: Added support for array attributes in `exist` validator (creocoder)\n- Enh: Added support for using path alias with `FileDependency::fileName` (qiangxue)\n- Enh: Added param `hideOnSinglePage` to `yii\\widgets\\LinkPager` (arturf)\n- Enh: Added support for array attributes in `in` validator (creocoder)\n- Enh: Improved `yii\\helpers\\Inflector::slug()` to support more cases for Russian, Hebrew and special characters (samdark)\n- Enh: ListView now uses the widget ID in the base tag, consistent to gridview (cebe)\n- Enh: Added `yii\\web\\Response::enableCsrfCookie` to support storing CSRF tokens in session (qiangxue)\n- Chg #2287: Split `yii\\db\\ColumnSchema::typecast()` into two methods `phpTypecast()` and `dbTypecast()` to allow specifying PDO type explicitly (cebe)\n- Chg #2359: Refactored formatter class. One class with or without intl extension and PHP format pattern as standard (Erik_r, cebe)\n   - `yii\\base\\Formatter` functionality has been merged into `yii\\i18n\\Formatter`\n   - removed the `yii\\base\\Formatter` class\n- Chg #1551: Refactored `yii\\validators\\DateValidator `to support ICU date format and use the format defined in `yii\\i18n\\Formatter` by default (cebe)\n- Chg #2898: `yii\\console\\controllers\\AssetController` is now using hashes instead of timestamps (samdark)\n- Chg #2913: RBAC `yii\\rbac\\DbManager` is now initialized via migration (samdark)\n- Chg #2914: `yii\\widgets\\ActiveForm::fieldConfig` will be merged recursively with the `$options` parameter in `yii\\widgets\\ActiveForm::field()` (qiangxue)\n- Chg #3036: Upgraded Twitter Bootstrap to 3.1.x (qiangxue)\n- Chg #3175: `yii\\base\\InvalidCallException`, `yii\\base\\InvalidParamException`, `yii\\base\\UnknownMethodException` are now extended from SPL `BadMethodCallException` (samdark)\n- Chg #3358: Removed automatic CSRF meta tag generation by `View`. Added `yii\\helpers\\Html::csrfMetaTags()` and its call to main layout files (qiangxue)\n- Chg #3383: Added `$type` parameter to `IdentityInterface::findIdentityByAccessToken()` (qiangxue)\n- Chg #3511: Dropped `yii.allowAction()` and modified `yii.confirm()` in `yii.js` to support callbacks (tanakahisateru)\n- Chg #3531: `yii\\grid\\GridView` now allows any character (except \":\") in the attribute part of the shorthand syntax for columns (rawtaz)\n- Chg #3544: Added `$key` as a parameter to the callable specified via `yii\\grid\\DataColumn::value` (mdmunir)\n- Chg #3611: Query caching is refactored. (qiangxue)\n    - `yii\\db\\Connection::beginCache()` and `endCache()` are removed.\n    - Added `yii\\db\\Connection::cache()` and `noCache()`.\n    - Added `Command::cache()` and `noCache()`.\n    - `yii\\db\\Connection::queryCacheDuration` is now used as a default cache duration parameter.\n- Chg #3640: All cookies are now httpOnly by default in order to increase overall security (samdark)\n- Chg #3687: Default `sourceLanguage` and `language` are now `en-US` in order for i18n formatter to work correctly (samdark)\n- Chg #3804: Added `fileinfo` PHP extension to the basic requirement of Yii (Ragazzo)\n- Chg #3866: The `yii\\validators\\FileValidator::types` property is renamed to `yii\\validators\\FileValidator::extensions` (Ragazzo)\n- Chg #3897: Raised visibility of `yii\\web\\View::registerAssetFiles()` to protected (samdark)\n- Chg #3899: Moved `MailEvent` class to `yii\\mail` namespace (cebe)\n- Chg #3910: Removed the `container` option from `yii\\helpers\\Html::checkbox()` and `yii\\helpers\\Html::radio()` (creocoder)\n- Chg #3956: Flash messages set via `Yii::$app->session->setFlash()` will be removed only if they are accessed (qiangxue)\n- Chg #3989: The default value for `yii\\log\\FileTarget::$rotateByCopy` now defaults to true to work on windows by default (cebe)\n- Chg #4051: Renamed `yii\\caching\\GroupDependency` to `TagDependency` and added support for associating multiple tags to a single cached data item (qiangxue)\n- Chg #4071: `mail` component renamed to `mailer`, `yii\\log\\EmailTarget::$mail` renamed to `yii\\log\\EmailTarget::$mailer` (samdark)\n- Chg #4147: `yii\\mail\\BaseMailer::compose()` will not overwrite the `message` parameter if it is explicitly provided (qiangxue)\n- Chg #4188: API exceptions are now exposing less data when YII_DEBUG is false (samdark)\n- Chg #4201: change default value of `SyslogTarget::facility` from `LOG_SYSLOG` to `LOG_USER` (dizews)\n- Chg #4211: `yii\\db\\BaseActiveRecord::populateRecord()` now silently hide selected columns that are not defined in AR instead of failing with an error (miramir)\n- Chg #4227: `yii\\widgets\\LinkPager::hideOnSinglePage` is now `true` by default (samdark)\n- Chg #4310: Removed `$data` from signature of `yii\\rbac\\ManagerInterface` (samdark)\n- Chg #4318: `yii\\helpers\\Html::ul()` and `ol()` will return an empty list tag if an empty item array is given (qiangxue)\n- Chg #4331: `yii\\helpers\\Url` now uses `UrlManager` to determine base URL when generating URLs (qiangxue)\n- Chg #4424: Added `inline` and `mimeType` options to all file downloading methods provided in `yii\\web\\Response` (qiangxue)\n- Chg #4454: Improved asset bundle managed and used composer-asset-plugin to manage the dependencies on 3rd-party JS libraries (qiangxue)\n- Chg #4501: Renamed the constant `YII_PATH` to `YII2_PATH` (qiangxue)\n- Chg #4586: Signed bigint and unsigned int will be converted into integers when they are loaded from DB by AR (qiangxue)\n- Chg #4591: `yii\\helpers\\Url::to()` will no longer prefix relative URLs with the base URL (qiangxue)\n- Chg #4595: `yii\\widgets\\LinkPager`'s `nextPageLabel`, `prevPageLabel`, `firstPageLabel`, `lastPageLabel` are now taking `false` instead of `null` for \"no label\" (samdark)\n- Chg #4911: Changed callback signature used in `yii\\base\\ArrayableTrait::fields()` from `function ($field, $model) {` to `function ($model, $field) {` (samdark)\n- Chg #4955: Replaced callbacks with events for `yii\\widgets\\ActiveForm` (qiangxue)\n    - Removed `beforeValidate()`, `beforeValidateAll()`, `afterValidate()`, `afterValidateAll()`, `ajaxBeforeSend()` and `ajaxComplete()` from `yii\\widgets\\ActiveForm`.\n    - Added `beforeValidate`, `afterValidate`, `beforeValidateAttribute`, `afterValidateAttribute`, `beforeSubmit`, `ajaxBeforeSend` and `ajaxComplete` events to `yii.activeForm` jQuery plugin.\n- Chg #5176: `ActiveFixture` will reset table in its `load()` method instead of `unload()` (qiangxue)\n- Chg: Replaced `clearAll()` and `clearAllAssignments()` in `yii\\rbac\\ManagerInterface` with `removeAll()`, `removeAllRoles()`, `removeAllPermissions()`, `removeAllRules()` and `removeAllAssignments()` (qiangxue)\n- Chg: Added `$user` as the first parameter of `yii\\rbac\\Rule::execute()` (qiangxue)\n- Chg: `yii\\grid\\DataColumn::getDataCellValue()` visibility is now `public` to allow accessing the value from a GridView directly (cebe)\n- Chg: `yii\\data\\ActiveDataProvider::$query` will not be modified directly with pagination and sorting anymore so it will be reuseable (cebe)\n- Chg: Removed `yii\\rest\\ActiveController::$transactional` property and connected functionality (samdark)\n- Chg: Changed the default value of the `keyPrefix` property of cache components to be null (qiangxue)\n- Chg: Added `prefix` column to `yii\\log\\DbTarget` to have the same amount of information logged as in files and emails (cebe)\n- Chg: Use `limit(null)` instead of `limit(-1)` in migration controller to be compatible to more backends (cebe)\n- Chg: `yii\\web\\Request::cookieValidationKey` must be explicitly specified for each application that wants to use cookie validation (qiangxue)\n- Chg: Added `yii\\composer\\Installer::postCreateProject()` and modified the syntax of calling installer methods in composer.json (qiangxue)\n- Chg: When an ID is found to be in both `Application::controllerMap` and `Application::modules`, the former will take precedence (qiangxue)\n- Chg: `yii\\helpers\\Html::activeCheckbox()` and `activeRadio()` will generate labels by default using the corresponding attribute labels (qiangxue)\n- New #1280: Gii can now be run from command line (schmunk42, cebe, qiangxue)\n- New #3911: Added `yii\\behaviors\\SluggableBehavior` that fills the specified model attribute with the transliterated and adjusted version to use in URLs (creocoder)\n- New #4193: Added `yii\\filters\\Cors` CORS filter to allow Cross Origin Resource Sharing (pgaultier)\n- New #4945: Added `yii\\test\\ArrayFixture` (Ragazzo)\n- New: Added `yii\\base\\InvalidValueException` (qiangxue)\n- New: Added `yii\\caching\\ArrayCache` (cebe)\n\n\n2.0.0-beta April 13, 2014\n-------------------------\n\n- Bug #1265: `yii\\console\\controllers\\AssetController` does not override 'js' and 'css' for compressed bundles (klimov-paul)\n- Bug #1326: The `visible` setting for `yii\\widgets\\DetailView` doesn't work as expected (qiangxue)\n- Bug #1412: `yii\\validators\\FileValidator` and `yii\\validators\\ImageValidator` still trigger `uploadRequired` error in some case when `skipOnEmpty` is true and no upload is provided (qiangxue)\n- Bug #1446: Logging while logs are processed causes infinite loop (qiangxue)\n- Bug #1497: Localized view files are not correctly returned (mintao)\n- Bug #1500: Log messages exported to files are not separated by newlines (omnilight, qiangxue)\n- Bug #1504: Debug toolbar isn't loaded successfully in some environments when xdebug is enabled (qiangxue)\n- Bug #1509: The SQL for creating Postgres RBAC tables is incorrect (qiangxue)\n- Bug #1545: It was not possible to execute db Query twice, params where missing (cebe)\n- Bug #1550: fixed the issue that JUI input widgets did not property input IDs.\n- Bug #1654: Fixed the issue that a new message source object is generated for every new message being translated (qiangxue)\n- Bug #1582: Error messages shown via client-side validation should not be double encoded (qiangxue)\n- Bug #1591: `yii\\validators\\StringValidator` is accessing undefined property (qiangxue)\n- Bug #1597: Added `enableAutoLogin` to basic and advanced project templates so \"remember me\" now works properly (samdark)\n- Bug #1631: Charset is now explicitly set to UTF-8 when serving JSON (samdark)\n- Bug #1635: `yii\\jui\\SliderInput` wasn't properly initialized (samdark)\n- Bug #1659: MSSQL doesn't support limit (Ana1oliy)\n- Bug #1686: `yii\\widgets\\ActiveForm` is creating duplicated messages in error summary (qiangxue)\n- Bug #1704: Incorrect regexp is used in `yii\\helpers\\Inflector::camelize()` (qiangxue)\n- Bug #1710: OpenId auth client does not request required attributes correctly (klimov-paul)\n- Bug #1798: Fixed label attributes for array fields (zhuravljov)\n- Bug #1800: Better check for `$_SERVER['HTTPS']` in `yii\\web\\Request::getIsSecureConnection()` (ginus, samdark)\n- Bug #1812: Hide potential warning message due to race condition occurring to `Session::regenerateID()` call (qiangxue)\n- Bug #1827: Debugger toolbar is loaded twice if an action is calling `run()` to execute another action (qiangxue)\n- Bug #1868: Added ability to exclude tables from `yii\\console\\controllers\\FixtureController` apply/clear actions. (Ragazzo)\n- Bug #1869: Fixed tables clearing. `TRUNCATE` changed to `DELETE` to avoid postgresql tables checks (and truncating all tables) (Ragazzo)\n- Bug #1870: Validation errors weren't properly translated when using clientside validation (samdark)\n- Bug #1930: Fixed domain based URL matching for website root (samdark)\n- Bug #1937: Fixed wrong behavior or advanced app's `init --env` when called without parameter actually specified (samdark)\n- Bug #1959: `yii\\helpers\\Html::activeCheckbox()` wasn't respecting custom values for checked/unchecked state (klevron, samdark)\n- Bug #1965: `yii\\base\\Controller::findLayoutFile()` returns incorrect file path when layout name starts with a slash (qiangxue)\n- Bug #1992: In module scenario that use 'site/captcha' will get wrong refreshUrl (callmez)\n- Bug #1993: afterFind event in AR is now called after relations have been populated (cebe, creocoder)\n- Bug #1998: Unchecked required checkbox never pass client validation (klevron)\n- Bug #2084: AssetController adjusting CSS URLs declared at same line fixed (klimov-paul)\n- Bug #2091: `yii\\db\\QueryBuilder::buildInCondition()` fails to handle array not starting with index 0 (qiangxue)\n- Bug #2160: SphinxQL does not support OFFSET (qiangxue, romeo7)\n- Bug #2209: When I18N message translation is missing source language is now used for formatting (samdark)\n- Bug #2212: `yii\\gridview\\DataColumn` generates incorrect labels when used with nosql DB and there is no data (qiangxue)\n- Bug #2298: Fixed the bug that Gii controller generator did not allow digit in the controller ID (qiangxue)\n- Bug #2303: Fixed the bug that `yii\\base\\Theme::pathMap` did not support dynamic update with path aliases (qiangxue)\n- Bug #2324: Fixed QueryBuilder bug when building a query with \"query\" option (mintao)\n- Bug #2399: Fixed the bug that AssetBundle did not handle relative URLs correctly (qiangxue)\n- Bug #2502: Unclear error message when `$_SERVER['DOCUMENT_ROOT']` is empty (samdark)\n- Bug #2519: MessageSource removed translation messages when event handler was bound to `missingTranslation`-event (cebe)\n- Bug #2527: Source language for `app` message category was always `en` no matter which application `sourceLanguage` was used (samdark)\n- Bug #2559: Going back on browser history breaks `yii\\widgets\\GridView` filtering with `Pjax` (tonydspaniard)\n- Bug #2571: Fixed the bug that batchInsert will fail for SQLite if the values contain null or boolean false (qiangxue)\n- Bug #2607: `yii message` tool wasn't updating `message` table (mitalcoi)\n- Bug #2624: `yii\\helpers\\Html::textArea()`` should respect `name` option. (qiangxue)\n- Bug #2653: Fixed the bug that unsetting an unpopulated AR relation would trigger exception (qiangxue)\n- Bug #2681: Fixed the bug of php build-in server `https://bugs.php.net/bug.php?id=66606` (dizews)\n- Bug #2683: Fixed the bug that batchInsert will fail for MySQL if the values contain boolean false (qiangxue)\n- Bug #2695: Fixed the issue that `yii\\validators\\FileValidator::isEmpty()` always returns true for validate multiple files (ZhandosKz)\n- Bug #2739: Fixed the issue that `yii\\rest\\CreateAction::run()` was using obsolete `yii\\web\\Controller::createAbsoluteUrl()` method (tonydspaniard)\n- Bug #2740: Fixed the issue that `yii\\captcha\\CaptchaAction::run()` was using obsolete `yii\\web\\Controller::createUrl()` method (tonydspaniard)\n- Bug #2760: Fixed `yii\\grid\\GridView` `filterUrl` parameters (qiangxue, AlexGx)\n- Bug #2834: When overriding i18n translation sources from config using `app*` or `yii*` default `app` and `yii` sources were not removed (samdark)\n- Bug #2848: Individual queries should be enclosed within parenthesis in a UNION query (qiangxue)\n- Bug #2862: Using `yii\\cache\\DbCache` while enabling schema caching may cause infinite loops (qiangxue)\n- Bug #3052: Fixed the issue that cache dependency data is not reused when `reusable` is set true (qiangxue)\n- Bug #3443: Fixed `yii\\bootstrap\\Nav` and `yii\\bootstrap\\Dropdown` were generating wrong ids for submenus (arturf)\n- Bug #3691: Fixed the issue that `yii\\web\\CookieCollection::has()` always returns false for cookies from browser (sonicgd)\n- Bug #4212: MSSQL query builder should not generate the `ORDER BY` clause when it is not needed (qiangxue)\n- Bug #4232: `yii\\db\\TableSchema::sequenceName` for PostgreSQL should remove the enclosing quotes (katzz0, qiangxue)\n- Bug #4697: MSSQL query builder does not work for newer MSSQL versions when LIMIT is used without ORDER BY (qiangxue)\n- Bug: Fixed `Call to a member function `registerAssetFiles()` on a non-object` in case of wrong `sourcePath` for an asset bundle (samdark)\n- Bug: Fixed incorrect event name for `yii\\jui\\Spinner` (samdark)\n- Bug: `yii\\helpers\\Json::encode()`` did not handle objects that implement `JsonSerializable` interface correctly (cebe)\n- Bug: Fixed issue with tabular input on `yii\\widgets\\ActiveField::radio()` and `yii\\widgets\\ActiveField::checkbox()` (jom)\n- Bug: Fixed the issue that query cache returns the same data for the same SQL but different query methods (qiangxue)\n- Bug: Fixed URL parsing so it's now properly giving 404 for URLs like `http://example.com//////site/about` (samdark)\n- Bug: Fixed `yii\\console\\controllers\\HelpController::getModuleCommands()` issue where it attempts to scan a module's controller directory when it doesn't exist (jom)\n- Bug: Fixed an issue with FileHelper and not accessible directories which resulted in endless loop (cebe)\n- Bug: Fixed `yii\\base\\Model::load()` returned `true` if `$data` and `formName` were empty (samdark)\n- Bug: Fixed issue with `yii\\db\\ActiveRelationTrait` preventing `yii\\db\\ActiveQuery` from clearing events and behaviors on clone (jom)\n- Bug: `yii\\db\\Query::queryScalar()` wasn't making `SELECT DISTINCT` queries subqueries (jom)\n- Bug: Fixed use `$files` instead of `self::$_files[$key]` to allow inheritance (pgaultier)\n- Enh #46: Added Image extension based on [Imagine library](http://imagine.readthedocs.org) (tonydspaniard)\n- Enh #364: Improve `yii\\helpers\\Inflector::slug()` with `intl` transliteration. Improved transliteration char map. (tonydspaniard)\n- Enh #497: Removed `yii\\log\\Target::logUser` and added `yii\\log\\Target::prefix` to support customizing message prefix (qiangxue)\n- Enh #499: Decoupled `Rule` from RBAC `Item` (samdark, qiangxue)\n- Enh #797: Added support for validating multiple columns by `yii\\validators\\UniqueValidator` and `yii\\validators\\ExistValidator` (qiangxue)\n- Enh #802: Added support for retrieving sub-array element or child object property through `ArrayHelper::getValue()` (qiangxue, cebe)\n- Enh #938: Added `yii\\web\\View::renderAjax()` and `yii\\web\\Controller::renderAjax()` (qiangxue)\n- Enh #1293: Replaced `yii\\helpers\\Console::showProgress()` with a better approach. See `yii\\helpers\\Console::startProgress()` for details (cebe)\n- Enh #1406: DB Schema support for Oracle Database (p0larbeer, qiangxue)\n- Enh #1437: Added `yii\\widgets\\ListView::viewParams` (qiangxue)\n- Enh #1467: Added support for organizing controllers in subdirectories (qiangxue)\n- Enh #1469: yii\\db\\ActiveRecord::find()` now works with default conditions (default scope) applied by createQuery (cebe)\n- Enh #1476: Add `yii\\web\\Session::handler` property (nineinchnick)\n- Enh #1499: Added `yii\\grid\\ActionColumn::controller` property to support customizing the controller for handling GridView actions (qiangxue)\n- Enh #1523: Query conditions now allow to use the NOT operator (cebe)\n- Enh #1535: Improved `yii\\web\\User` to start session only when needed. Also prepared it for use without session. (qiangxue)\n- Enh #1562: Added `yii\\bootstrap\\Tabs::linkOptions` (kartik-v)\n- Enh #1572: Added `yii\\web\\Controller::createAbsoluteUrl()` (samdark)\n- Enh #1579: throw exception when the given AR relation name does not match in a case sensitive manner (qiangxue)\n- Enh #1581: Added `yii\\db\\ActiveQuery::joinWith()` and `yii\\db\\ActiveQuery::innerJoinWith()` to support joining with relations (qiangxue)\n- Enh #1585: added schema parameter to `createAbsoluteUrl()`` to force 'http' or 'https' (cebe)\n- Enh #1601: Added support for tagName and encodeLabel parameters in ButtonDropdown (omnilight)\n- Enh #1611: Added `yii\\db\\BaseActiveRecord::markAttributeDirty()` (qiangxue)\n- Enh #1633: Advanced project template now works with MongoDB by default (samdark)\n- Enh #1634: Use masked CSRF tokens to prevent BREACH exploits (qiangxue)\n- Enh #1641: Added `BaseActiveRecord::updateAttributes()` (qiangxue)\n- Enh #1646: Added postgresql `yii\\db\\QueryBuilder::checkIntegrity()` and `yii\\db\\QueryBuilder::resetSequence()` (Ragazzo)\n- Enh #1645: Added `yii\\db\\Connection::$pdoClass` property (Ragazzo)\n- Enh #1645: Added support for nested DB transactions (qiangxue)\n- Enh #1681: Added support for automatically adjusting the \"for\" attribute of label generated by `yii\\widgets\\ActiveField::label()` (qiangxue)\n- Enh #1706: Added support for registering a single JS/CSS file with dependency (qiangxue)\n- Enh #1773: keyPrefix property of Cache is not restricted to alnum characters anymore, however it is still recommended (cebe)\n- Enh #1809: Added support for building \"EXISTS\" and \"NOT EXISTS\" query conditions (abdrasulov)\n- Enh #1839: Added support for getting file extension and basename from uploaded file (anfrantic)\n- Enh #1852: `yii\\db\\ActiveRecord::tableName()` now returns table name using `yii\\db\\Connection::tablePrefix` (creocoder)\n- Enh #1881: Improved `yii\\bootstrap\\NavBar` with `containerOptions`, `innerContainerOptions` and `renderInnerContainer` (creocoder)\n- Enh #1894: The path aliases `@webroot` and `@web` are now available right after the application is initialized (qiangxue)\n- Enh #1921: Grid view `yii\\grid\\ActionColumn` now allow to name buttons like `{controller/action}` (creocoder)\n- Enh #1973: `yii message/extract` is now able to generate `.po` files (SergeiKutanov, samdark)\n- Enh #1984: `yii\\base\\ActionFilter` will now mark event as handled when action run is aborted (cebe)\n- Enh #2002: Added `filterWhere()` method to yii\\db\\Query to allow easy addition of search filter conditions by ignoring empty search fields (samdark, cebe)\n- Enh #2003: Added `filter` property to `yii\\validators\\ExistValidator` and `yii\\validators\\UniqueValidator` to support adding additional filtering conditions (qiangxue)\n- Enh #2008: `yii message/extract` is now able to save translation strings to database (kate-kate, samdark)\n- Enh #2043: Added support for custom request body parsers (danschmidt5189, cebe)\n- Enh #2051: Do not save null data into database when using RBAC (qiangxue)\n- Enh #2054: Added support for using custom application configuration with the console command runner (qiangxue)\n- Enh #2079:\n    - i18n now falls back to `en` from `en-US` if message translation isn't found (samdark)\n    - View now falls back to `en` from `en-US` if file not found (samdark)\n    - Default `sourceLanguage` and `language` are now `en` (samdark)\n- Enh #2101: Gii is now using model labels when generating search (thiagotalma)\n- Enh #2102: `yii\\widgets\\DetailView` now allow use `category.name` as attribute name (creocoder)\n- Enh #2102: `yii\\widgets\\DetailView` now allow use custom label in string format like `name:format:label` (creocoder)\n- Enh #2103: Renamed `yii\\web\\AccessDeniedHttpException` to `yii\\web\\ForbiddenHttpException`, added new commonly used HTTP exception classes (danschmidt5189)\n- Enh #2124: Added support for UNION ALL queries (Ivan Pomortsev, iworker)\n- Enh #2132: Allow url of CSS and JS files registered in yii\\web\\View to be url alias (cebe)\n- Enh #2144: `Html` helper now supports rendering \"data\" attributes (qiangxue)\n- Enh #2156: `yii migrate` now automatically creates `migrations` directory if it does not exist (samdark)\n- Enh #2211: Added typecast database types into php types (dizews)\n- Enh #2240: Improved `yii\\web\\AssetManager::publish()`, `yii\\web\\AssetManager::getPublishedPath()` and `yii\\web\\AssetManager::getPublishedUrl()` to support aliases (vova07)\n- Enh #2325: Adding support for the `X-HTTP-Method-Override` header in `yii\\web\\Request::getMethod()` (pawzar)\n- Enh #2364: Take into account current error reporting level in error handler (gureedo)\n- Enh #2387: Added support for fetching data from database in batches (nineinchnick, qiangxue)\n- Enh #2392: Added `addCssStyle()`, `removeCssStyle()`, `cssStyleFromArray()` and `cssStyleToArray()` to `yii\\helpers\\Html` (qiangxue, kartik-v, Alex-Code)\n- Enh #2406: Added support for conditional validation (drenty, cebe, qiangxue)\n- Enh #2411: Added Gii extension generator (schmunk42)\n- Enh #2415: Added support for inverse relations (qiangxue)\n- Enh #2417: Added possibility to set `dataType` for `$.ajax` call in yii.activeForm.js (Borales)\n- Enh #2436: Label of the attribute, which looks like `relatedModel.attribute`, will be received from the related model if it available (djagya)\n- Enh #2490: `yii\\db\\Query::count()` and other query scalar methods now properly handle queries with GROUP BY clause (qiangxue)\n- Enh #2491: Added support for using the same base class name of search model and data model in Gii (qiangxue)\n- Enh #2499: Added ability to downgrade migrations by their absolute apply time (resurtm, gorcer)\n- Enh #2525: Added support for formatting file sizes with `yii\\base\\Formatter` (VinceG)\n- Enh #2526: Allow for null values in batchInsert (skotos)\n- Enh #2646: Added support for specifying hostinfo in the pattern of a URL rule (qiangxue)\n- Enh #2661: Added boolean column type support for SQLite (qiangxue)\n- Enh #2670: Changed `yii\\console\\Controller::globalOptions()` to `options($actionID)` to (make it possible to) differentiate options per action (hqx)\n- Enh #2714: Added support for formatting time intervals relative to the current time with `yii\\base\\Formatter` (drenty)\n- Enh #2726: Added `yii\\db\\ActiveRecord::loadDefaultValues()` that fills default values from DB schema (samdark)\n- Enh #2729: Added `yii\\validators\\FilterValidator::skipOnArray` so that filters like `trim` will not fail for array inputs (qiangxue)\n- Enh #2735: Added support for `DateTimeInterface` in `yii\\i18n\\Formatter` (ivokund)\n- Enh #2756: Added support for injecting custom `isEmpty` check for all validators (qiangxue)\n- Enh #2775: Added `yii\\base\\Application::bootstrap` and `yii\\base\\BootstrapInterface` to support running bootstrap classes when starting an application (qiangxue)\n- Enh #2892: ActiveRecord dirty attributes are now reset after call to `afterSave()` so information about changed attributes is available in `afterSave`-event (cebe)\n- Enh #2910: Added `yii\\base\\Application::end()` (qiangxue)\n- Enh: Added support for using arrays as option values for console commands (qiangxue)\n- Enh: Added `favicon.ico` and `robots.txt` to default project templates (samdark)\n- Enh: Added `yii\\base\\Widget::autoIdPrefix` to support prefixing automatically generated widget IDs (qiangxue)\n- Enh: Support for file aliases in console command 'message' (omnilight)\n- Enh: Sort and Pagination can now create absolute URLs (cebe)\n- Enh: Added support for using array-typed arguments for console commands (qiangxue)\n- Enh: Added support for installing packages conforming to PSR-4 standard (qiangxue)\n- Enh: Better exception message when class cannot be loaded (samdark)\n- Enh: `init` of advanced application now allows to specify answer for overwriting files via `init --overwrite=n` (samdark)\n- Enh: Added `yii\\db\\TableSchema::fullName` property (qiangxue)\n- Enh: `yii\\codeception\\TestCase` now supports loading and using fixtures via Yii fixture framework (qiangxue)\n- Enh: Added ability to get incoming headers (dizews)\n- Enh: Added `beforeRun()` and `afterRun()` to `yii\\base\\Action` (qiangxue)\n- Enh: Added support for using timeZone with `yii\\base\\Formatter` (dizews)\n- Enh: Added `yii\\web\\View::POS_LOAD` (qiangxue)\n- Enh: Added `yii\\web\\Response::clearOutputBuffers()` (qiangxue)\n- Enh: Improved `yii\\db\\QueryBuilder::buildLimit()` to support big numbers (qiangxue)\n- Enh: Added support for building SQLs with sub-queries (qiangxue)\n- Enh: Added `yii\\data\\Pagination::getLinks()` (qiangxue)\n- Enh: Added support for reading page size from query parameters by `yii\\data\\Pagination` (qiangxue)\n- Enh: LinkPager can now register relational link tags in the html header for prev, next, first and last page (cebe)\n- Enh: Added `yii\\web\\UrlRuleInterface` and `yii\\web\\CompositeUrlRule` (qiangxue)\n- Enh: Added `yii\\web\\Request::getAuthUser()` and `getAuthPassword()` (qiangxue)\n- Enh: Added summaryOptions and emptyTextOptions to `yii\\widgets\\BaseListView` (johonunu)\n- Enh: Implemented Oracle column comment reading from another schema (gureedo, samdark)\n- Enh: Added support to allow an event handler to be inserted at the beginning of the existing event handler list (qiangxue)\n- Enh: Improved action filter and action execution flow by supporting installing action filters at controller, module and application levels (qiangxue)\n- Enh: Added `isAssociative()` and `isIndexed()` to `yii\\helpers\\ArrayHelper` (qiangxue)\n- Enh: Added `addSelect` to `yii\\db\\Query` (Alex-Code)\n- Enh: Added ODBC support in `yii\\db\\Connection` (nineinchnick, resurtm)\n- Chg #47: Changed Markdown library to cebe/markdown and adjusted Markdown helper API (cebe)\n- Chg #735: Added back `yii\\widgets\\ActiveField::hiddenInput()` (qiangxue)\n- Chg #1186: Changed `Sort` to use comma to separate multiple sort fields and use negative sign to indicate descending sort (qiangxue)\n- Chg #1519: `yii\\web\\User::loginRequired()` now returns the `Response` object instead of exiting the application (qiangxue)\n- Chg #1564: Removed `yii\\web\\Session::autoStart` and added `hasSessionId`. Session will be automatically started when accessing session data (qiangxue)\n- Chg #1586: `yii\\db\\QueryBuilder::buildLikeCondition()` will now escape special characters and use percentage characters by default (qiangxue)\n- Chg #1610: `yii\\helpers\\Html::activeCheckboxList()` and `Html::activeRadioList()` will submit an empty string if no checkbox/radio is selected (qiangxue)\n- Chg #1643: Added default value for `yii\\captcha\\Captcha::options` (qiangxue)\n- Chg #1796: Removed `yii\\base\\Controller::getActionParams()` (samdark)\n- Chg #1835: `yii\\grid\\CheckboxColumn` now renders checkboxes whose values are the corresponding data key values (qiangxue)\n- Chg #1821: Changed default values for yii\\db\\Connection username and password to null (cebe)\n- Chg #1844: `yii\\web\\Response::sendFile()` and other file sending methods will not send the response (qiangxue)\n- Chg #1852: `yii\\db\\Connection::tablePrefix` default value now `tbl_` (creocoder)\n- Chg #1958: `beforeSubmit` in `yii.activeform` is now executed after validation and before form submission (6pblcb)\n- Chg #2025: Removed ability to declare scopes in ActiveRecord (samdark)\n- Chg #2043:\n    - Renamed `yii\\web\\Request::acceptedLanguages` to `acceptableLanguages` (qiangxue)\n    - Removed `yii\\web\\Request::getPost()`, `getPut()`, `getDelete()`, `getPatch()` in favor of `getBodyParam()` (cebe)\n    - Renamed `yii\\web\\Request::get()` to `getQueryParams()` and `getRestParams()` to `getBodyParams()` (cebe)\n    - Added `yii\\web\\Request::get($name = null, $defaultValue = null)` and `yii\\web\\Request::post($name = null, $defaultValue = null)` (samdark)\n- Chg #2059: Implemented git-flavored file excluding/filtering for `yii\\helpers\\FileHelper` (nineinchnick)\n- Chg #2063: Removed `yii\\web\\Request::acceptTypes` and renamed `yii\\web\\Request::acceptedContentTypes` to `acceptableContentTypes` (qiangxue)\n- Chg #2103: Renamed `yii\\web\\AccessDeniedHttpException` to `yii\\web\\ForbiddenHttpException` (danschmidt5189)\n- Chg #2146: Removed `yii\\db\\ActiveRelation` class and `yii\\db\\ActiveRelationInterface`, moved the functionality to `yii\\db\\ActiveQuery`.\n             All relational queries are now directly served by `ActiveQuery` allowing to use custom scopes in relations\n             and also to declare arbitrary queries as relations.\n             Also removed `yii\\db\\ActiveRecordInterface::createActiveRelation()` (cebe)\n- Chg #2157: The `*` category pattern will match all categories that do not match any other patterns listed in `yii\\i18n\\I18N::translations` (qiangxue, Ragazzo)\n- Chg #2161: Added ability to use `return` in `Widget::run` (samdark)\n- Chg #2173: Removed `yii\\helpers\\StringHelper::diff()`, Moved `phpspec/php-diff` dependency from `yiisoft/yii2` to `yiisoft/yii2-gii` (samdark)\n- Chg #2175: `yii\\db\\QueryBuilder` will now append UNION statements at the end of the primary SQL (qiangxue)\n- Chg #2210: Mysql driver will now treat `tinyint(1)` as integer instead of boolean (qiangxue)\n- Chg #2248: Renamed `yii\\base\\Model::DEFAULT_SCENARIO` to `yii\\base\\Model::SCENARIO_DEFAULT` (samdark)\n- Chg #2281: Renamed `yii\\db\\ActiveRecord::create()` to `populateRecord()` and changed signature. This method will not call instantiate() anymore (cebe)\n- Chg #2405: The CSS class of `yii\\widgets\\MaskedInput` now defaults to `form-control` (qiangxue)\n- Chg #2426: Changed URL creation method signatures to be consistent (samdark)\n- Chg #2516: Moved error handling from application to ErrorHandler class and fixed problems with HTTP Exception response code (cebe)\n    - `Yii::$app->exception` has now moved to `Yii::$app->errorHandler->exception`\n    - `yii\\base\\ErrorHandler` was split into `yii\\web\\ErrorHandler` and `yii\\console\\ErrorHandler`\n- Chg #2544: Changed `yii\\widgets\\DetailView`'s `name:format:label` to `attribute:format:label` to match `GridView` (samdark)\n- Chg #2603: `yii\\base\\ErrorException` now extends `\\ErrorException` (samdark)\n- Chg #2629: `yii\\base\\Module::controllerPath` is now read only, and all controller classes must be namespaced under `Module::controllerNamespace`. (qiangxue)\n- Chg #2630: API changes for URLs generation (samdark, qiangxue, cebe)\n    - Added `yii\\helpers\\Url`.\n    - Removed `yii\\helpers\\Html::url()`, use `yii\\helpers\\Url::to()` instead.\n    - Removed `yii\\web\\Controller::createUrl()` and `yii\\web\\Controller::createAbsoluteUrl()`, use `yii\\helpers\\Url::toRoute()` instead.\n    - Removed `yii\\web\\Controller::getCanonicalUrl()`, use `yii\\helpers\\Url::canonical()` instead.\n- Chg #2691: Null parameters will not be included in the generated URLs by `UrlManager` (gonimar, qiangxue)\n- Chg #2734: `FileCache::keyPrefix` defaults to empty string now (qiangxue)\n- Chg #2796: Removed `Application::preload` in favor of `Application::bootstrap` (qiangxue)\n- Chg #2816: Changed default date and time format of `yii\\base\\Formatter` to `Y-m-d` and `H:i:s` (qiangxue)\n- Chg #2911: Removed `tbl_` default for table prefix (samdark)\n- Chg #2912: Relative view files will be looked for under the directory containing the view currently being rendered (qiangxue)\n- Chg #2955: Changed the signature of ActiveQuery constructors and replaced `yii\\db\\ActiveRecord::createQuery()` with `find()` to simplify customizing `yii\\db\\ActiveQuery` classes (qiangxue)\n- Chg #2999: Added `findOne()` and `findAll()` to replace the usage of `yii\\db\\ActiveRecord::find($condition)`. (samdark, qiangxue)\n- Chg #4204: `yii\\web\\Request::getUserIP()` will return null if it cannot detect user IP address (qiangxue)\n- Chg #4622: Simplified the way of creating a Faker fixture template file (qiangxue)\n- Chg: Renamed `yii\\jui\\Widget::clientEventsMap` to `clientEventMap` (qiangxue)\n- Chg: Renamed `ActiveRecord::getPopulatedRelations()` to `getRelatedRecords()` (qiangxue)\n- Chg: Renamed `attributeName` and `className` to `targetAttribute` and `targetClass` for `UniqueValidator` and `ExistValidator` (qiangxue)\n- Chg: Added `yii\\widgets\\InputWidget::options` (qiangxue)\n- Chg: Changed the signature of `urlCreator` and button creators for `yii\\gridview\\ActionColumn` (qiangxue)\n- Chg: Updated HTMLPurified dependency to `4.6.*`.\n- Chg: Changed Yii autoloader to support loading PSR-4 classes only (i.e. PEAR-styled classes not supported anymore) (qiangxue)\n- Chg: Changed the directory structure according to PSR-4. You have to update your application `index.php`,\n       `index-test.php` and `yii` files to point to the new location of `Yii.php` (qiangxue, cebe)\n- Chg: Advanced app template: moved database connection DSN, login and password to `-local` config not to expose it to VCS (samdark)\n- Chg: Renamed `yii\\web\\Request::acceptedLanguages` to `acceptableLanguages` (qiangxue)\n- Chg: Removed implementation of `yii\\base\\Arrayable` from `yii\\base\\Object` (qiangxue)\n- Chg: The scripts in asset bundles are now registered in `View` at the end of `endBody()`. It was done in `endPage()` previously (qiangxue)\n- Chg: Renamed `csrf-var` to `csrf-param` for CSRF header name (Dilip)\n- Chg: The directory holding email templates is renamed from `mails` to `mail` (qiangxue)\n- Chg: Renamed properties `fooVar` to `fooParam` for various classes (qiangxue)\n    - Renamed `yii\\widgets\\ActiveForm::ajaxVar` to `ajaxParam`\n    - Renamed `yii\\data\\Pagination::pageVar` to `pageParam`\n    - Renamed `yii\\data\\Sort::sortVar` to `sortParam`\n    - Renamed `yii\\web\\Request::csrfVar` to `csrfParam`\n    - Renamed `yii\\web\\Request::methodVar` to `methodParam`\n    - Renamed `yii\\web\\UrlManager::routeVar` to `routeParam`\n    - Renamed `yii\\web\\Session::flashVar` to `flashParam`\n    - Renamed `yii\\web\\User::idVar` to `idParam`\n    - Renamed `yii\\web\\User::authTimeoutVar` to `authTimeoutParam`\n    - Renamed `yii\\web\\User::returnUrlVar` to `returnUrlParam`\n- Chg: Added `yii\\base\\View::viewFile` and removed `yii\\base\\ViewEvent::viewFile` (qiangxue)\n- Chg: Changed `yii\\base\\Controller::afterAction()`, `yii\\base\\Module::afterAction()` and `yii\\base\\ActionFilter::afterAction()` to pass `$result` by value instead of reference (qiangxue)\n- Chg: `yii\\base\\Extension::init()` is renamed to `bootstrap()` (qiangxue)\n- Chg: `getComponent()` and `setComponent()` in `yii\\base\\Application` and `yii\\base\\Module` are renamed to `get()` and `set()` respectively. (qiangxue)\n- Chg: The signature of `Yii::createObject()` is changed. Constructor parameters must be passed as the second parameter. (qiangxue)\n- Chg: `Yii::$objectConfig` is removed. You should use `Yii::$container->set()` to configure default settings of classes. (qiangxue)\n- Chg: Removed `yii\\grid\\Column::getDataCellContent()` and renamed `yii\\grid\\DataColumn::getDataCellContent()` to `yii\\grid\\DataColumn::getDataCellValue()` (cebe)\n- Chg: `yii\\log\\Logger` is split into `yii\\log\\Logger` and `yii\\log\\Dispatcher`. (qiangxue)\n- Chg: Moved all filter classes to namespace `yii\\filters` (qiangxue)\n- Chg: Re-implemented RBAC by following more closely to the original NIST RBAC model. Dropped `yii\\rbac\\PhpManager`. (qiangxue)\n- Chg: Renamed `yii\\web\\User::checkAccess()` to `yii\\web\\User::can()` (qiangxue)\n- New #66: [Auth client library](https://github.com/yiisoft/yii2-authclient) OpenId, OAuth1, OAuth2 clients (klimov-paul)\n- New #303: Added built-in support for REST API (qiangxue)\n- New #503: Added `yii\\di\\Container` and `yii\\di\\ServiceLocator` (qiangxue)\n- New #706: Added `yii\\widgets\\Pjax` and enhanced `yii\\grid\\GridView` to work with `Pjax` to support AJAX-update (qiangxue)\n- New #1393: [Codeception testing framework integration](https://github.com/yiisoft/yii2-codeception) (Ragazzo)\n- New #1438: [MongoDB integration](https://github.com/yiisoft/yii2-mongodb) ActiveRecord and Query (klimov-paul)\n- New #1956: Implemented test fixture framework (qiangxue)\n- New #2034: Added `yii\\filters\\ContentNegotiator` to support response format and language negotiation (qiangxue)\n- New #2149: Added `yii\\base\\DynamicModel` to support ad-hoc data validation (qiangxue)\n- New #2360: Added `AttributeBehavior` and `BlameableBehavior`, and renamed `AutoTimestamp` to `TimestampBehavior` (lucianobaraglia, qiangxue)\n- New #2932: Added `yii\\web\\ViewAction` that allow you to render views based on GET parameter (samdark)\n- New #2998: Added `yii\\log\\SyslogTarget` that is able to write log to syslog (miramir, samdark)\n- New #3029: Added `yii\\bootstrap\\ActiveForm` and `yii\\bootstrap\\ActiveField` (mikehaertl)\n- New #4640: Added `yii\\widgets\\ActiveForm::beginField()` and `endField()` (qiangxue)\n- New: Yii framework now comes with core messages translated into 26 languages, many thanks to all our translators!\n- New: Added `yii\\codeception\\DbTestCase` (qiangxue)\n- New: Added `yii\\web\\GroupUrlRule` (qiangxue)\n- New: Added `yii\\filters\\RateLimiter` (qiangxue)\n- New: Added various authentication methods, including `HttpBasicAuth`, `HttpBearerAuth`, `QueryParamAuth`, and `CompositeAuth` (qiangxue)\n- New: Added `yii\\web\\HtmlResponseFormatter` and `yii\\web\\JsonResponseFormatter` (qiangxue)\n\n\n2.0.0-alpha December 1, 2013\n-----------------------------\n\n- Initial release.\n- Official extensions released in this version:\n  - [Twitter bootstrap 3.0](https://github.com/yiisoft/yii2-bootstrap)\n  - [Jquery UI](https://github.com/yiisoft/yii2-jui)\n\n  - [Debug Toolbar](https://github.com/yiisoft/yii2-debug)\n  - [Gii code generator](https://github.com/yiisoft/yii2-gii)\n\n  - [Elasticsearch integration](https://github.com/yiisoft/yii2-elasticsearch): ActiveRecord and Query\n  - [Redis integration](https://github.com/yiisoft/yii2-redis): ActiveRecord, Cache and Session\n  - [Sphinx integration](https://github.com/yiisoft/yii2-sphinx): ActiveRecord and Query\n\n  - [Swiftmailer](https://github.com/yiisoft/yii2-swiftmailer)\n\n  - [Smarty View Renderer](https://github.com/yiisoft/yii2-smarty)\n  - [Twig View Renderer](https://github.com/yiisoft/yii2-twig)\n", "<?php\n/**\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n */\n\nnamespace yii\\web;\n\nuse Yii;\nuse yii\\base\\Component;\nuse yii\\base\\InvalidConfigException;\nuse yii\\base\\InvalidValueException;\nuse yii\\rbac\\CheckAccessInterface;\n\n/**\n * User is the class for the `user` application component that manages the user authentication status.\n *\n * You may use [[isGuest]] to determine whether the current user is a guest or not.\n * If the user is a guest, the [[identity]] property would return `null`. Otherwise, it would\n * be an instance of [[IdentityInterface]].\n *\n * You may call various methods to change the user authentication status:\n *\n * - [[login()]]: sets the specified identity and remembers the authentication status in session and cookie;\n * - [[logout()]]: marks the user as a guest and clears the relevant information from session and cookie;\n * - [[setIdentity()]]: changes the user identity without touching session or cookie\n *   (this is best used in stateless RESTful API implementation).\n *\n * Note that User only maintains the user authentication status. It does NOT handle how to authenticate\n * a user. The logic of how to authenticate a user should be done in the class implementing [[IdentityInterface]].\n * You are also required to set [[identityClass]] with the name of this class.\n *\n * User is configured as an application component in [[\\yii\\web\\Application]] by default.\n * You can access that instance via `Yii::$app->user`.\n *\n * You can modify its configuration by adding an array to your application config under `components`\n * as it is shown in the following example:\n *\n * ```php\n * 'user' => [\n *     'identityClass' => 'app\\models\\User', // User must implement the IdentityInterface\n *     'enableAutoLogin' => true,\n *     // 'loginUrl' => ['user/login'],\n *     // ...\n * ]\n * ```\n *\n * @property string|int $id The unique identifier for the user. If `null`, it means the user is a guest. This\n * property is read-only.\n * @property IdentityInterface|null $identity The identity object associated with the currently logged-in\n * user. `null` is returned if the user is not logged in (not authenticated).\n * @property bool $isGuest Whether the current user is a guest. This property is read-only.\n * @property string $returnUrl The URL that the user should be redirected to after login. Note that the type\n * of this property differs in getter and setter. See [[getReturnUrl()]] and [[setReturnUrl()]] for details.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\nclass User extends Component\n{\n    const EVENT_BEFORE_LOGIN = 'beforeLogin';\n    const EVENT_AFTER_LOGIN = 'afterLogin';\n    const EVENT_BEFORE_LOGOUT = 'beforeLogout';\n    const EVENT_AFTER_LOGOUT = 'afterLogout';\n\n    /**\n     * @var string the class name of the [[identity]] object.\n     */\n    public $identityClass;\n    /**\n     * @var bool whether to enable cookie-based login. Defaults to `false`.\n     * Note that this property will be ignored if [[enableSession]] is `false`.\n     */\n    public $enableAutoLogin = false;\n    /**\n     * @var bool whether to use session to persist authentication status across multiple requests.\n     * You set this property to be `false` if your application is stateless, which is often the case\n     * for RESTful APIs.\n     */\n    public $enableSession = true;\n    /**\n     * @var string|array the URL for login when [[loginRequired()]] is called.\n     * If an array is given, [[UrlManager::createUrl()]] will be called to create the corresponding URL.\n     * The first element of the array should be the route to the login action, and the rest of\n     * the name-value pairs are GET parameters used to construct the login URL. For example,\n     *\n     * ```php\n     * ['site/login', 'ref' => 1]\n     * ```\n     *\n     * If this property is `null`, a 403 HTTP exception will be raised when [[loginRequired()]] is called.\n     */\n    public $loginUrl = ['site/login'];\n    /**\n     * @var array the configuration of the identity cookie. This property is used only when [[enableAutoLogin]] is `true`.\n     * @see Cookie\n     */\n    public $identityCookie = ['name' => '_identity', 'httpOnly' => true];\n    /**\n     * @var int the number of seconds in which the user will be logged out automatically if he\n     * remains inactive. If this property is not set, the user will be logged out after\n     * the current session expires (c.f. [[Session::timeout]]).\n     * Note that this will not work if [[enableAutoLogin]] is `true`.\n     */\n    public $authTimeout;\n    /**\n     * @var CheckAccessInterface The access checker to use for checking access.\n     * If not set the application auth manager will be used.\n     * @since 2.0.9\n     */\n    public $accessChecker;\n    /**\n     * @var int the number of seconds in which the user will be logged out automatically\n     * regardless of activity.\n     * Note that this will not work if [[enableAutoLogin]] is `true`.\n     */\n    public $absoluteAuthTimeout;\n    /**\n     * @var bool whether to automatically renew the identity cookie each time a page is requested.\n     * This property is effective only when [[enableAutoLogin]] is `true`.\n     * When this is `false`, the identity cookie will expire after the specified duration since the user\n     * is initially logged in. When this is `true`, the identity cookie will expire after the specified duration\n     * since the user visits the site the last time.\n     * @see enableAutoLogin\n     */\n    public $autoRenewCookie = true;\n    /**\n     * @var string the session variable name used to store the value of [[id]].\n     */\n    public $idParam = '__id';\n    /**\n     * @var string the session variable name used to store the value of expiration timestamp of the authenticated state.\n     * This is used when [[authTimeout]] is set.\n     */\n    public $authTimeoutParam = '__expire';\n    /**\n     * @var string the session variable name used to store the value of absolute expiration timestamp of the authenticated state.\n     * This is used when [[absoluteAuthTimeout]] is set.\n     */\n    public $absoluteAuthTimeoutParam = '__absoluteExpire';\n    /**\n     * @var string the session variable name used to store the value of [[returnUrl]].\n     */\n    public $returnUrlParam = '__returnUrl';\n    /**\n     * @var array MIME types for which this component should redirect to the [[loginUrl]].\n     * @since 2.0.8\n     */\n    public $acceptableRedirectTypes = ['text/html', 'application/xhtml+xml'];\n\n    private $_access = [];\n\n\n    /**\n     * Initializes the application component.\n     */\n    public function init()\n    {\n        parent::init();\n\n        if ($this->identityClass === null) {\n            throw new InvalidConfigException('User::identityClass must be set.');\n        }\n        if ($this->enableAutoLogin && !isset($this->identityCookie['name'])) {\n            throw new InvalidConfigException('User::identityCookie must contain the \"name\" element.');\n        }\n        if (!empty($this->accessChecker) && is_string($this->accessChecker)) {\n            $this->accessChecker = Yii::createObject($this->accessChecker);\n        }\n    }\n\n    private $_identity = false;\n\n    /**\n     * Returns the identity object associated with the currently logged-in user.\n     * When [[enableSession]] is true, this method may attempt to read the user's authentication data\n     * stored in session and reconstruct the corresponding identity object, if it has not done so before.\n     * @param bool $autoRenew whether to automatically renew authentication status if it has not been done so before.\n     * This is only useful when [[enableSession]] is true.\n     * @return IdentityInterface|null the identity object associated with the currently logged-in user.\n     * `null` is returned if the user is not logged in (not authenticated).\n     * @see login()\n     * @see logout()\n     */\n    public function getIdentity($autoRenew = true)\n    {\n        if ($this->_identity === false) {\n            if ($this->enableSession && $autoRenew) {\n                $this->_identity = null;\n                $this->renewAuthStatus();\n            } else {\n                return null;\n            }\n        }\n\n        return $this->_identity;\n    }\n\n    /**\n     * Sets the user identity object.\n     *\n     * Note that this method does not deal with session or cookie. You should usually use [[switchIdentity()]]\n     * to change the identity of the current user.\n     *\n     * @param IdentityInterface|null $identity the identity object associated with the currently logged user.\n     * If null, it means the current user will be a guest without any associated identity.\n     * @throws InvalidValueException if `$identity` object does not implement [[IdentityInterface]].\n     */\n    public function setIdentity($identity)\n    {\n        if ($identity instanceof IdentityInterface) {\n            $this->_identity = $identity;\n            $this->_access = [];\n        } elseif ($identity === null) {\n            $this->_identity = null;\n        } else {\n            throw new InvalidValueException('The identity object must implement IdentityInterface.');\n        }\n    }\n\n    /**\n     * Logs in a user.\n     *\n     * After logging in a user:\n     * - the user's identity information is obtainable from the [[identity]] property\n     *\n     * If [[enableSession]] is `true`:\n     * - the identity information will be stored in session and be available in the next requests\n     * - in case of `$duration == 0`: as long as the session remains active or till the user closes the browser\n     * - in case of `$duration > 0`: as long as the session remains active or as long as the cookie\n     *   remains valid by it's `$duration` in seconds when [[enableAutoLogin]] is set `true`.\n     *\n     * If [[enableSession]] is `false`:\n     * - the `$duration` parameter will be ignored\n     *\n     * @param IdentityInterface $identity the user identity (which should already be authenticated)\n     * @param int $duration number of seconds that the user can remain in logged-in status, defaults to `0`\n     * @return bool whether the user is logged in\n     */\n    public function login(IdentityInterface $identity, $duration = 0)\n    {\n        if ($this->beforeLogin($identity, false, $duration)) {\n            $this->switchIdentity($identity, $duration);\n            $id = $identity->getId();\n            $ip = Yii::$app->getRequest()->getUserIP();\n            if ($this->enableSession) {\n                $log = \"User '$id' logged in from $ip with duration $duration.\";\n            } else {\n                $log = \"User '$id' logged in from $ip. Session not enabled.\";\n            }\n            Yii::info($log, __METHOD__);\n            $this->afterLogin($identity, false, $duration);\n        }\n\n        return !$this->getIsGuest();\n    }\n\n    /**\n     * Logs in a user by the given access token.\n     * This method will first authenticate the user by calling [[IdentityInterface::findIdentityByAccessToken()]]\n     * with the provided access token. If successful, it will call [[login()]] to log in the authenticated user.\n     * If authentication fails or [[login()]] is unsuccessful, it will return null.\n     * @param string $token the access token\n     * @param mixed $type the type of the token. The value of this parameter depends on the implementation.\n     * For example, [[\\yii\\filters\\auth\\HttpBearerAuth]] will set this parameter to be `yii\\filters\\auth\\HttpBearerAuth`.\n     * @return IdentityInterface|null the identity associated with the given access token. Null is returned if\n     * the access token is invalid or [[login()]] is unsuccessful.\n     */\n    public function loginByAccessToken($token, $type = null)\n    {\n        /* @var $class IdentityInterface */\n        $class = $this->identityClass;\n        $identity = $class::findIdentityByAccessToken($token, $type);\n        if ($identity && $this->login($identity)) {\n            return $identity;\n        }\n\n        return null;\n    }\n\n    /**\n     * Logs in a user by cookie.\n     *\n     * This method attempts to log in a user using the ID and authKey information\n     * provided by the [[identityCookie|identity cookie]].\n     */\n    protected function loginByCookie()\n    {\n        $data = $this->getIdentityAndDurationFromCookie();\n        if (isset($data['identity'], $data['duration'])) {\n            $identity = $data['identity'];\n            $duration = $data['duration'];\n            if ($this->beforeLogin($identity, true, $duration)) {\n                $this->switchIdentity($identity, $this->autoRenewCookie ? $duration : 0);\n                $id = $identity->getId();\n                $ip = Yii::$app->getRequest()->getUserIP();\n                Yii::info(\"User '$id' logged in from $ip via cookie.\", __METHOD__);\n                $this->afterLogin($identity, true, $duration);\n            }\n        }\n    }\n\n    /**\n     * Logs out the current user.\n     * This will remove authentication-related session data.\n     * If `$destroySession` is true, all session data will be removed.\n     * @param bool $destroySession whether to destroy the whole session. Defaults to true.\n     * This parameter is ignored if [[enableSession]] is false.\n     * @return bool whether the user is logged out\n     */\n    public function logout($destroySession = true)\n    {\n        $identity = $this->getIdentity();\n        if ($identity !== null && $this->beforeLogout($identity)) {\n            $this->switchIdentity(null);\n            $id = $identity->getId();\n            $ip = Yii::$app->getRequest()->getUserIP();\n            Yii::info(\"User '$id' logged out from $ip.\", __METHOD__);\n            if ($destroySession && $this->enableSession) {\n                Yii::$app->getSession()->destroy();\n            }\n            $this->afterLogout($identity);\n        }\n\n        return $this->getIsGuest();\n    }\n\n    /**\n     * Returns a value indicating whether the user is a guest (not authenticated).\n     * @return bool whether the current user is a guest.\n     * @see getIdentity()\n     */\n    public function getIsGuest()\n    {\n        return $this->getIdentity() === null;\n    }\n\n    /**\n     * Returns a value that uniquely represents the user.\n     * @return string|int the unique identifier for the user. If `null`, it means the user is a guest.\n     * @see getIdentity()\n     */\n    public function getId()\n    {\n        $identity = $this->getIdentity();\n\n        return $identity !== null ? $identity->getId() : null;\n    }\n\n    /**\n     * Returns the URL that the browser should be redirected to after successful login.\n     *\n     * This method reads the return URL from the session. It is usually used by the login action which\n     * may call this method to redirect the browser to where it goes after successful authentication.\n     *\n     * @param string|array $defaultUrl the default return URL in case it was not set previously.\n     * If this is null and the return URL was not set previously, [[Application::homeUrl]] will be redirected to.\n     * Please refer to [[setReturnUrl()]] on accepted format of the URL.\n     * @return string the URL that the user should be redirected to after login.\n     * @see loginRequired()\n     */\n    public function getReturnUrl($defaultUrl = null)\n    {\n        $url = Yii::$app->getSession()->get($this->returnUrlParam, $defaultUrl);\n        if (is_array($url)) {\n            if (isset($url[0])) {\n                return Yii::$app->getUrlManager()->createUrl($url);\n            }\n\n            $url = null;\n        }\n\n        return $url === null ? Yii::$app->getHomeUrl() : $url;\n    }\n\n    /**\n     * Remembers the URL in the session so that it can be retrieved back later by [[getReturnUrl()]].\n     * @param string|array $url the URL that the user should be redirected to after login.\n     * If an array is given, [[UrlManager::createUrl()]] will be called to create the corresponding URL.\n     * The first element of the array should be the route, and the rest of\n     * the name-value pairs are GET parameters used to construct the URL. For example,\n     *\n     * ```php\n     * ['admin/index', 'ref' => 1]\n     * ```\n     */\n    public function setReturnUrl($url)\n    {\n        Yii::$app->getSession()->set($this->returnUrlParam, $url);\n    }\n\n    /**\n     * Redirects the user browser to the login page.\n     *\n     * Before the redirection, the current URL (if it's not an AJAX url) will be kept as [[returnUrl]] so that\n     * the user browser may be redirected back to the current page after successful login.\n     *\n     * Make sure you set [[loginUrl]] so that the user browser can be redirected to the specified login URL after\n     * calling this method.\n     *\n     * Note that when [[loginUrl]] is set, calling this method will NOT terminate the application execution.\n     *\n     * @param bool $checkAjax whether to check if the request is an AJAX request. When this is true and the request\n     * is an AJAX request, the current URL (for AJAX request) will NOT be set as the return URL.\n     * @param bool $checkAcceptHeader whether to check if the request accepts HTML responses. Defaults to `true`. When this is true and\n     * the request does not accept HTML responses the current URL will not be SET as the return URL. Also instead of\n     * redirecting the user an ForbiddenHttpException is thrown. This parameter is available since version 2.0.8.\n     * @return Response the redirection response if [[loginUrl]] is set\n     * @throws ForbiddenHttpException the \"Access Denied\" HTTP exception if [[loginUrl]] is not set or a redirect is\n     * not applicable.\n     */\n    public function loginRequired($checkAjax = true, $checkAcceptHeader = true)\n    {\n        $request = Yii::$app->getRequest();\n        $canRedirect = !$checkAcceptHeader || $this->checkRedirectAcceptable();\n        if ($this->enableSession\n            && $request->getIsGet()\n            && (!$checkAjax || !$request->getIsAjax())\n            && $canRedirect\n        ) {\n            $this->setReturnUrl($request->getUrl());\n        }\n        if ($this->loginUrl !== null && $canRedirect) {\n            $loginUrl = (array) $this->loginUrl;\n            if ($loginUrl[0] !== Yii::$app->requestedRoute) {\n                return Yii::$app->getResponse()->redirect($this->loginUrl);\n            }\n        }\n        throw new ForbiddenHttpException(Yii::t('yii', 'Login Required'));\n    }\n\n    /**\n     * This method is called before logging in a user.\n     * The default implementation will trigger the [[EVENT_BEFORE_LOGIN]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @param bool $cookieBased whether the login is cookie-based\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * If 0, it means login till the user closes the browser or the session is manually destroyed.\n     * @return bool whether the user should continue to be logged in\n     */\n    protected function beforeLogin($identity, $cookieBased, $duration)\n    {\n        $event = new UserEvent([\n            'identity' => $identity,\n            'cookieBased' => $cookieBased,\n            'duration' => $duration,\n        ]);\n        $this->trigger(self::EVENT_BEFORE_LOGIN, $event);\n\n        return $event->isValid;\n    }\n\n    /**\n     * This method is called after the user is successfully logged in.\n     * The default implementation will trigger the [[EVENT_AFTER_LOGIN]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @param bool $cookieBased whether the login is cookie-based\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * If 0, it means login till the user closes the browser or the session is manually destroyed.\n     */\n    protected function afterLogin($identity, $cookieBased, $duration)\n    {\n        $this->trigger(self::EVENT_AFTER_LOGIN, new UserEvent([\n            'identity' => $identity,\n            'cookieBased' => $cookieBased,\n            'duration' => $duration,\n        ]));\n    }\n\n    /**\n     * This method is invoked when calling [[logout()]] to log out a user.\n     * The default implementation will trigger the [[EVENT_BEFORE_LOGOUT]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     * @return bool whether the user should continue to be logged out\n     */\n    protected function beforeLogout($identity)\n    {\n        $event = new UserEvent([\n            'identity' => $identity,\n        ]);\n        $this->trigger(self::EVENT_BEFORE_LOGOUT, $event);\n\n        return $event->isValid;\n    }\n\n    /**\n     * This method is invoked right after a user is logged out via [[logout()]].\n     * The default implementation will trigger the [[EVENT_AFTER_LOGOUT]] event.\n     * If you override this method, make sure you call the parent implementation\n     * so that the event is triggered.\n     * @param IdentityInterface $identity the user identity information\n     */\n    protected function afterLogout($identity)\n    {\n        $this->trigger(self::EVENT_AFTER_LOGOUT, new UserEvent([\n            'identity' => $identity,\n        ]));\n    }\n\n    /**\n     * Renews the identity cookie.\n     * This method will set the expiration time of the identity cookie to be the current time\n     * plus the originally specified cookie duration.\n     */\n    protected function renewIdentityCookie()\n    {\n        $name = $this->identityCookie['name'];\n        $value = Yii::$app->getRequest()->getCookies()->getValue($name);\n        if ($value !== null) {\n            $data = json_decode($value, true);\n            if (is_array($data) && isset($data[2])) {\n                $cookie = Yii::createObject(array_merge($this->identityCookie, [\n                    'class' => 'yii\\web\\Cookie',\n                    'value' => $value,\n                    'expire' => time() + (int) $data[2],\n                ]));\n                Yii::$app->getResponse()->getCookies()->add($cookie);\n            }\n        }\n    }\n\n    /**\n     * Sends an identity cookie.\n     * This method is used when [[enableAutoLogin]] is true.\n     * It saves [[id]], [[IdentityInterface::getAuthKey()|auth key]], and the duration of cookie-based login\n     * information in the cookie.\n     * @param IdentityInterface $identity\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * @see loginByCookie()\n     */\n    protected function sendIdentityCookie($identity, $duration)\n    {\n        $cookie = Yii::createObject(array_merge($this->identityCookie, [\n            'class' => 'yii\\web\\Cookie',\n            'value' => json_encode([\n                $identity->getId(),\n                $identity->getAuthKey(),\n                $duration,\n            ], JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE),\n            'expire' => time() + $duration,\n        ]));\n        Yii::$app->getResponse()->getCookies()->add($cookie);\n    }\n\n    /**\n     * Determines if an identity cookie has a valid format and contains a valid auth key.\n     * This method is used when [[enableAutoLogin]] is true.\n     * This method attempts to authenticate a user using the information in the identity cookie.\n     * @return array|null Returns an array of 'identity' and 'duration' if valid, otherwise null.\n     * @see loginByCookie()\n     * @since 2.0.9\n     */\n    protected function getIdentityAndDurationFromCookie()\n    {\n        $value = Yii::$app->getRequest()->getCookies()->getValue($this->identityCookie['name']);\n        if ($value === null) {\n            return null;\n        }\n        $data = json_decode($value, true);\n        if (is_array($data) && count($data) == 3) {\n            list($id, $authKey, $duration) = $data;\n            /* @var $class IdentityInterface */\n            $class = $this->identityClass;\n            $identity = $class::findIdentity($id);\n            if ($identity !== null) {\n                if (!$identity instanceof IdentityInterface) {\n                    throw new InvalidValueException(\"$class::findIdentity() must return an object implementing IdentityInterface.\");\n                } elseif (!$identity->validateAuthKey($authKey)) {\n                    Yii::warning(\"Invalid auth key attempted for user '$id': $authKey\", __METHOD__);\n                } else {\n                    return ['identity' => $identity, 'duration' => $duration];\n                }\n            }\n        }\n        $this->removeIdentityCookie();\n        return null;\n    }\n\n    /**\n     * Removes the identity cookie.\n     * This method is used when [[enableAutoLogin]] is true.\n     * @since 2.0.9\n     */\n    protected function removeIdentityCookie()\n    {\n        Yii::$app->getResponse()->getCookies()->remove(Yii::createObject(array_merge($this->identityCookie, [\n            'class' => 'yii\\web\\Cookie',\n        ])));\n    }\n\n    /**\n     * Switches to a new identity for the current user.\n     *\n     * When [[enableSession]] is true, this method may use session and/or cookie to store the user identity information,\n     * according to the value of `$duration`. Please refer to [[login()]] for more details.\n     *\n     * This method is mainly called by [[login()]], [[logout()]] and [[loginByCookie()]]\n     * when the current user needs to be associated with the corresponding identity information.\n     *\n     * @param IdentityInterface|null $identity the identity information to be associated with the current user.\n     * If null, it means switching the current user to be a guest.\n     * @param int $duration number of seconds that the user can remain in logged-in status.\n     * This parameter is used only when `$identity` is not null.\n     */\n    public function switchIdentity($identity, $duration = 0)\n    {\n        $this->setIdentity($identity);\n\n        if (!$this->enableSession) {\n            return;\n        }\n\n        /* Ensure any existing identity cookies are removed. */\n        if ($this->enableAutoLogin && ($this->autoRenewCookie || $identity === null)) {\n            $this->removeIdentityCookie();\n        }\n\n        $session = Yii::$app->getSession();\n        if (!YII_ENV_TEST) {\n            $session->regenerateID(true);\n        }\n        $session->remove($this->idParam);\n        $session->remove($this->authTimeoutParam);\n\n        if ($identity) {\n            $session->set($this->idParam, $identity->getId());\n            if ($this->authTimeout !== null) {\n                $session->set($this->authTimeoutParam, time() + $this->authTimeout);\n            }\n            if ($this->absoluteAuthTimeout !== null) {\n                $session->set($this->absoluteAuthTimeoutParam, time() + $this->absoluteAuthTimeout);\n            }\n            if ($this->enableAutoLogin && $duration > 0) {\n                $this->sendIdentityCookie($identity, $duration);\n            }\n        }\n\n        // regenerate CSRF token\n        Yii::$app->getRequest()->getCsrfToken(true);\n    }\n\n    /**\n     * Updates the authentication status using the information from session and cookie.\n     *\n     * This method will try to determine the user identity using the [[idParam]] session variable.\n     *\n     * If [[authTimeout]] is set, this method will refresh the timer.\n     *\n     * If the user identity cannot be determined by session, this method will try to [[loginByCookie()|login by cookie]]\n     * if [[enableAutoLogin]] is true.\n     */\n    protected function renewAuthStatus()\n    {\n        $session = Yii::$app->getSession();\n        $id = $session->getHasSessionId() || $session->getIsActive() ? $session->get($this->idParam) : null;\n\n        if ($id === null) {\n            $identity = null;\n        } else {\n            /* @var $class IdentityInterface */\n            $class = $this->identityClass;\n            $identity = $class::findIdentity($id);\n        }\n\n        $this->setIdentity($identity);\n\n        if ($identity !== null && ($this->authTimeout !== null || $this->absoluteAuthTimeout !== null)) {\n            $expire = $this->authTimeout !== null ? $session->get($this->authTimeoutParam) : null;\n            $expireAbsolute = $this->absoluteAuthTimeout !== null ? $session->get($this->absoluteAuthTimeoutParam) : null;\n            if ($expire !== null && $expire < time() || $expireAbsolute !== null && $expireAbsolute < time()) {\n                $this->logout(false);\n            } elseif ($this->authTimeout !== null) {\n                $session->set($this->authTimeoutParam, time() + $this->authTimeout);\n            }\n        }\n\n        if ($this->enableAutoLogin) {\n            if ($this->getIsGuest()) {\n                $this->loginByCookie();\n            } elseif ($this->autoRenewCookie) {\n                $this->renewIdentityCookie();\n            }\n        }\n    }\n\n    /**\n     * Checks if the user can perform the operation as specified by the given permission.\n     *\n     * Note that you must configure \"authManager\" application component in order to use this method.\n     * Otherwise it will always return false.\n     *\n     * @param string $permissionName the name of the permission (e.g. \"edit post\") that needs access check.\n     * @param array $params name-value pairs that would be passed to the rules associated\n     * with the roles and permissions assigned to the user.\n     * @param bool $allowCaching whether to allow caching the result of access check.\n     * When this parameter is true (default), if the access check of an operation was performed\n     * before, its result will be directly returned when calling this method to check the same\n     * operation. If this parameter is false, this method will always call\n     * [[\\yii\\rbac\\CheckAccessInterface::checkAccess()]] to obtain the up-to-date access result. Note that this\n     * caching is effective only within the same request and only works when `$params = []`.\n     * @return bool whether the user can perform the operation as specified by the given permission.\n     */\n    public function can($permissionName, $params = [], $allowCaching = true)\n    {\n        if ($allowCaching && empty($params) && isset($this->_access[$permissionName])) {\n            return $this->_access[$permissionName];\n        }\n        if (($accessChecker = $this->getAccessChecker()) === null) {\n            return false;\n        }\n        $access = $accessChecker->checkAccess($this->getId(), $permissionName, $params);\n        if ($allowCaching && empty($params)) {\n            $this->_access[$permissionName] = $access;\n        }\n\n        return $access;\n    }\n\n    /**\n     * Checks if the `Accept` header contains a content type that allows redirection to the login page.\n     * The login page is assumed to serve `text/html` or `application/xhtml+xml` by default. You can change acceptable\n     * content types by modifying [[acceptableRedirectTypes]] property.\n     * @return bool whether this request may be redirected to the login page.\n     * @see acceptableRedirectTypes\n     * @since 2.0.8\n     */\n    protected function checkRedirectAcceptable()\n    {\n        $acceptableTypes = Yii::$app->getRequest()->getAcceptableContentTypes();\n        if (empty($acceptableTypes) || count($acceptableTypes) === 1 && array_keys($acceptableTypes)[0] === '*/*') {\n            return true;\n        }\n\n        foreach ($acceptableTypes as $type => $params) {\n            if (in_array($type, $this->acceptableRedirectTypes, true)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns auth manager associated with the user component.\n     *\n     * By default this is the `authManager` application component.\n     * You may override this method to return a different auth manager instance if needed.\n     * @return \\yii\\rbac\\ManagerInterface\n     * @since 2.0.6\n     * @deprecated since version 2.0.9, to be removed in 2.1. Use [[getAccessChecker()]] instead.\n     */\n    protected function getAuthManager()\n    {\n        return Yii::$app->getAuthManager();\n    }\n\n    /**\n     * Returns the access checker used for checking access.\n     * @return CheckAccessInterface\n     * @since 2.0.9\n     */\n    protected function getAccessChecker()\n    {\n        return $this->accessChecker !== null ? $this->accessChecker : $this->getAuthManager();\n    }\n}\n", "<?php\n/**\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n */\n\nnamespace yiiunit\\framework\\helpers;\n\nuse Yii;\nuse yii\\base\\Action;\nuse yii\\base\\Module;\nuse yii\\helpers\\Url;\nuse yii\\web\\Controller;\nuse yii\\widgets\\Menu;\nuse yiiunit\\framework\\filters\\stubs\\UserIdentity;\nuse yiiunit\\TestCase;\n\n/**\n * UrlTest.\n * @group helpers\n */\nclass UrlTest extends TestCase\n{\n    protected function setUp()\n    {\n        parent::setUp();\n        $this->mockApplication([\n            'components' => [\n                'request' => [\n                    'class' => 'yii\\web\\Request',\n                    'cookieValidationKey' => '123',\n                    'scriptUrl' => '/base/index.php',\n                    'hostInfo' => 'http://example.com/',\n                    'url' => '/base/index.php&r=site%2Fcurrent&id=42',\n                ],\n                'urlManager' => [\n                    'class' => 'yii\\web\\UrlManager',\n                    'baseUrl' => '/base',\n                    'scriptUrl' => '/base/index.php',\n                    'hostInfo' => 'http://example.com/',\n                ],\n                'user' => [\n                    'identityClass' => UserIdentity::className(),\n                ],\n            ],\n        ], '\\yii\\web\\Application');\n    }\n\n    protected function tearDown()\n    {\n        Yii::$app->getSession()->removeAll();\n        parent::tearDown();\n    }\n\n    /**\n     * Mocks controller action with parameters.\n     *\n     * @param string $controllerId\n     * @param string $actionID\n     * @param string $moduleID\n     * @param array  $params\n     */\n    protected function mockAction($controllerId, $actionID, $moduleID = null, $params = [])\n    {\n        \\Yii::$app->controller = $controller = new Controller($controllerId, \\Yii::$app);\n        $controller->actionParams = $params;\n        $controller->action = new Action($actionID, $controller);\n\n        if ($moduleID !== null) {\n            $controller->module = new Module($moduleID);\n        }\n    }\n\n    protected function removeMockedAction()\n    {\n        \\Yii::$app->controller = null;\n    }\n\n    public function testToRoute()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n\n        // If the route is an empty string, the current route will be used;\n        $this->assertEquals('/base/index.php?r=page%2Fview', Url::toRoute(''));\n        // a slash will be an absolute route representing the default route\n        $this->assertEquals('/base/index.php?r=', Url::toRoute('/'));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview', Url::toRoute('', true));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fview', Url::toRoute('', 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=page%2Fview', Url::toRoute('', ''));\n\n        // If the route contains no slashes at all, it is considered to be an action ID of the current controller and\n        // will be prepended with uniqueId;\n        $this->assertEquals('/base/index.php?r=page%2Fedit', Url::toRoute('edit'));\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20]));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], true));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=page%2Fedit&id=20', Url::toRoute(['edit', 'id' => 20], ''));\n\n        // If the route has no leading slash, it is considered to be a route relative\n        // to the current module and will be prepended with the module's uniqueId.\n        $this->mockAction('default', 'index', 'stats');\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview', Url::toRoute('user/view'));\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42]));\n        $this->assertEquals('http://example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], true));\n        $this->assertEquals('https://example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], 'https'));\n        $this->assertEquals('//example.com/base/index.php?r=stats%2Fuser%2Fview&id=42', Url::toRoute(['user/view', 'id' => 42], ''));\n\n        // alias support\n        \\Yii::setAlias('@userView', 'user/view');\n        $this->assertEquals('/base/index.php?r=stats%2Fuser%2Fview', Url::toRoute('@userView'));\n        \\Yii::setAlias('@userView', null);\n\n        // In case there is no controller, an exception should be thrown for relative route\n        $this->removeMockedAction();\n\n        $this->expectException('yii\\base\\InvalidParamException');\n        Url::toRoute('site/view');\n    }\n\n    public function testCurrent()\n    {\n        $this->mockAction('page', 'view', null, []);\n        Yii::$app->request->setQueryParams(['id' => 10, 'name' => 'test', 10 => 0]);\n        $uri = '/base/index.php?r=page%2Fview';\n\n        $this->assertEquals($uri . '&id=10&name=test&10=0', Url::current());\n        $this->assertEquals($uri . '&id=20&name=test&10=0', Url::current(['id' => 20]));\n        $this->assertEquals($uri . '&name=test&10=0', Url::current(['id' => null]));\n        $this->assertEquals($uri . '&name=test&10=0&1=yes', Url::current(['id' => [], 1 => 'yes']));\n        $this->assertEquals($uri . '&name=test&10=0', Url::current(['id' => []]));\n        $this->assertEquals($uri . '&name=test', Url::current(['id' => null, 10 => null]));\n        $this->assertEquals($uri . '&name=test&1=yes', Url::current(['id' => null, 10 => null, 1 => 'yes']));\n\n        $params = ['arr' => ['attr_one' => 1, 'attr_two' => 2]];\n        Yii::$app->request->setQueryParams($params);\n\n        $this->assertEquals($uri . '&arr%5Battr_one%5D=1&arr%5Battr_two%5D=2', Url::current());\n        $this->assertEquals($uri, Url::current(['arr' => null]));\n        $this->assertEquals($uri . '&arr%5Battr_two%5D=2', Url::current(['arr' => ['attr_one' => null]]));\n        $this->assertEquals($uri . '&arr%5Battr_one%5D=1&arr%5Battr_two%5D=two', Url::current(['arr' => ['attr_two' => 'two']]));\n    }\n\n    public function testPrevious()\n    {\n        Yii::$app->getUser()->login(UserIdentity::findIdentity('user1'));\n\n        $this->assertNull(Url::previous('notExistedPage'));\n\n        $this->assertNull(Url::previous(Yii::$app->getUser()->returnUrlParam));\n\n        $this->assertEquals('/base/index.php', Url::previous());\n    }\n\n    public function testTo()\n    {\n        // is an array: the first array element is considered a route, while the rest of the name-value\n        // pairs are treated as the parameters to be used for URL creation using Url::toRoute.\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20]));\n        $this->assertEquals('/base/index.php?r=page%2Fedit', Url::to(['edit']));\n        $this->assertEquals('/base/index.php?r=page%2Fview', Url::to(['']));\n\n        // alias support\n        \\Yii::setAlias('@pageEdit', 'edit');\n        $this->assertEquals('/base/index.php?r=page%2Fedit&id=20', Url::to(['@pageEdit', 'id' => 20]));\n        \\Yii::setAlias('@pageEdit', null);\n\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20], true));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fedit', Url::to(['edit'], true));\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview', Url::to([''], true));\n\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit&id=20', Url::to(['edit', 'id' => 20], 'https'));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fedit', Url::to(['edit'], 'https'));\n        $this->assertEquals('https://example.com/base/index.php?r=page%2Fview', Url::to([''], 'https'));\n\n        // is an empty string: the currently requested URL will be returned;\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base/index.php&r=site%2Fcurrent&id=42', Url::to(''));\n        $this->assertEquals('http://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('', true));\n        $this->assertEquals('https://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('', 'https'));\n\n        // is a non-empty string: it will first be processed by [[Yii::getAlias()]]. If the result\n        // is an absolute URL, it will be returned either without any change or, if schema was specified, with schema\n        // replaced; Otherwise, the result will be prefixed with [[\\yii\\web\\Request::baseUrl]] and returned.\n        \\Yii::setAlias('@web1', 'http://test.example.com/test/me1');\n        \\Yii::setAlias('@web2', 'test/me2');\n        \\Yii::setAlias('@web3', '');\n        \\Yii::setAlias('@web4', '/test');\n        \\Yii::setAlias('@web5', '#test');\n\n        $this->assertEquals('test/me1', Url::to('test/me1'));\n        $this->assertEquals('javascript:test/me1', Url::to('javascript:test/me1'));\n        $this->assertEquals('java/script:test/me1', Url::to('java/script:test/me1'));\n        $this->assertEquals('#test/me1', Url::to('#test/me1'));\n        $this->assertEquals('.test/me1', Url::to('.test/me1'));\n        $this->assertEquals('http://example.com/test/me1', Url::to('test/me1', true));\n        $this->assertEquals('https://example.com/test/me1', Url::to('test/me1', 'https'));\n        $this->assertEquals('https://example.com/test/test/me1', Url::to('@web4/test/me1', 'https'));\n\n        $this->assertEquals('/test/me1', Url::to('/test/me1'));\n        $this->assertEquals('http://example.com/test/me1', Url::to('/test/me1', true));\n        $this->assertEquals('https://example.com/test/me1', Url::to('/test/me1', 'https'));\n        $this->assertEquals('./test/me1', Url::to('./test/me1'));\n\n        $this->assertEquals('http://test.example.com/test/me1', Url::to('@web1'));\n        $this->assertEquals('http://test.example.com/test/me1', Url::to('@web1', true));\n        $this->assertEquals('https://test.example.com/test/me1', Url::to('@web1', 'https'));\n\n        $this->assertEquals('test/me2', Url::to('@web2'));\n        $this->assertEquals('http://example.com/test/me2', Url::to('@web2', true));\n        $this->assertEquals('https://example.com/test/me2', Url::to('@web2', 'https'));\n\n        $this->assertEquals('/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3'));\n        $this->assertEquals('http://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3', true));\n        $this->assertEquals('https://example.com/base/index.php&r=site%2Fcurrent&id=42', Url::to('@web3', 'https'));\n\n        $this->assertEquals('/test', Url::to('@web4'));\n        $this->assertEquals('http://example.com/test', Url::to('@web4', true));\n        $this->assertEquals('https://example.com/test', Url::to('@web4', 'https'));\n\n        $this->assertEquals('#test', Url::to('@web5'));\n        $this->assertEquals('http://example.com/#test', Url::to('@web5', true));\n        $this->assertEquals('https://example.com/#test', Url::to('@web5', 'https'));\n        $this->assertEquals('//example.com/#test', Url::to('@web5', ''));\n\n        // @see https://github.com/yiisoft/yii2/issues/13156\n        \\Yii::setAlias('@cdn', '//cdn.example.com');\n        $this->assertEquals('http://cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', 'http'));\n        $this->assertEquals('//cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', ''));\n        $this->assertEquals('https://cdn.example.com/images/logo.gif', Url::to('@cdn/images/logo.gif', 'https'));\n        \\Yii::setAlias('@cdn', null);\n\n        //In case there is no controller, throw an exception\n        $this->removeMockedAction();\n\n        $this->expectException('yii\\base\\InvalidParamException');\n        Url::to(['site/view']);\n    }\n\n    /**\n     * @see https://github.com/yiisoft/yii2/issues/11925\n     */\n    public function testToWithSuffix()\n    {\n        Yii::$app->set('urlManager', [\n            'class' => 'yii\\web\\UrlManager',\n            'enablePrettyUrl' => true,\n            'showScriptName' => false,\n            'cache' => null,\n            'rules' => [\n                '<controller:\\w+>/<id:\\d+>' => '<controller>/view',\n                '<controller:\\w+>/<action:\\w+>/<id:\\d+>' => '<controller>/<action>',\n                '<controller:\\w+>/<action:\\w+>' => '<controller>/<action>',\n            ],\n            'baseUrl' => '/',\n            'scriptUrl' => '/index.php',\n            'suffix' => '.html',\n        ]);\n        $url = Yii::$app->urlManager->createUrl(['/site/page', 'view' => 'about']);\n        $this->assertEquals('/site/page.html?view=about', $url);\n\n        $url = Url::to(['/site/page', 'view' => 'about']);\n        $this->assertEquals('/site/page.html?view=about', $url);\n\n        $output = Menu::widget([\n            'items' => [\n                ['label' => 'Test', 'url' => ['/site/page', 'view' => 'about']],\n            ],\n        ]);\n        $this->assertRegExp('~<a href=\"/site/page.html\\?view=about\">~', $output);\n    }\n\n    public function testBase()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('/base', Url::base());\n        $this->assertEquals('http://example.com/base', Url::base(true));\n        $this->assertEquals('https://example.com/base', Url::base('https'));\n        $this->assertEquals('//example.com/base', Url::base(''));\n    }\n\n    public function testHome()\n    {\n        $this->assertEquals('/base/index.php', Url::home());\n        $this->assertEquals('http://example.com/base/index.php', Url::home(true));\n        $this->assertEquals('https://example.com/base/index.php', Url::home('https'));\n        $this->assertEquals('//example.com/base/index.php', Url::home(''));\n    }\n\n    public function testCanonical()\n    {\n        $this->mockAction('page', 'view', null, ['id' => 10]);\n        $this->assertEquals('http://example.com/base/index.php?r=page%2Fview&id=10', Url::canonical());\n        $this->removeMockedAction();\n    }\n\n    public function testIsRelative()\n    {\n        $this->assertTrue(Url::isRelative('/test/index.php'));\n        $this->assertTrue(Url::isRelative('index.php'));\n        $this->assertFalse(Url::isRelative('//example.com/'));\n        $this->assertFalse(Url::isRelative('http://example.com/'));\n        $this->assertFalse(Url::isRelative('https://example.com/'));\n    }\n}\n"], "filenames": ["framework/CHANGELOG.md", "framework/web/User.php", "tests/framework/helpers/UrlTest.php"], "buggy_code_start_loc": [5, 643, 31], "buggy_code_end_loc": [5, 643, 31], "fixing_code_start_loc": [6, 644, 32], "fixing_code_end_loc": [8, 647, 33], "type": "CWE-352", "message": "In Yii Framework 2.x before 2.0.14, the switchIdentity function in web/User.php did not regenerate the CSRF token upon a change of identity.", "other": {"cve": {"id": "CVE-2018-6009", "sourceIdentifier": "cve@mitre.org", "published": "2018-01-22T22:29:00.207", "lastModified": "2018-02-09T20:16:55.610", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "In Yii Framework 2.x before 2.0.14, the switchIdentity function in web/User.php did not regenerate the CSRF token upon a change of identity."}, {"lang": "es", "value": "En Yii Framework 2.x en versiones anteriores a la 2.0.14, la funci\u00f3n switchIdentity en web/User.php no regener\u00f3 el token CSRF tras un cambio de identidad."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 8.8, "baseSeverity": "HIGH"}, "exploitabilityScore": 2.8, "impactScore": 5.9}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:P/I:P/A:P", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "PARTIAL", "integrityImpact": "PARTIAL", "availabilityImpact": "PARTIAL", "baseScore": 6.8}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 6.4, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-352"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.0:*:*:*:*:*:*:*", "matchCriteriaId": "0E54B667-316C-4443-AD6C-5CDB0BB2B7AD"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.0:alpha:*:*:*:*:*:*", "matchCriteriaId": "4DC37B5E-CA70-46F5-BD57-B2960E56E02A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.0:beta:*:*:*:*:*:*", "matchCriteriaId": "3EFF01B0-E13F-4B2A-A1A8-312C5FAB2D4D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.0:rc:*:*:*:*:*:*", "matchCriteriaId": "C714F1E1-C752-47DF-B525-9F93E37E49F2"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.1:*:*:*:*:*:*:*", "matchCriteriaId": "F8EA5B61-014C-4F92-A6C1-5D77BD662EDD"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.2:*:*:*:*:*:*:*", "matchCriteriaId": "AAD2A68A-8308-4D13-A495-AEFD793861E3"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.3:*:*:*:*:*:*:*", "matchCriteriaId": "0B9F0C33-E986-4E3F-8048-2C7FFB167E27"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.4:*:*:*:*:*:*:*", "matchCriteriaId": "38E2AF50-03AA-440B-8F36-4E3FA52A237F"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.5:*:*:*:*:*:*:*", "matchCriteriaId": "88F14CC3-9A9C-48F5-BC06-17AE8E76A8BD"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.6:*:*:*:*:*:*:*", "matchCriteriaId": "8BDED07C-2135-40D5-A6AA-4DC45646250D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.7:*:*:*:*:*:*:*", "matchCriteriaId": "374488D0-6418-41E9-9061-DFBB1819A350"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.8:*:*:*:*:*:*:*", "matchCriteriaId": "5DE87E89-2E27-49A7-82DC-4A2EAD4FDF06"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.9:*:*:*:*:*:*:*", "matchCriteriaId": "12AD2289-7B39-4E8E-9B9F-3D19AD2941B8"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.10:*:*:*:*:*:*:*", "matchCriteriaId": "2200E2A0-B436-499A-A72A-B23115AE4FF0"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.11:*:*:*:*:*:*:*", "matchCriteriaId": "A68A5D75-444D-47BF-B49D-08E81CE956B6"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.11.1:*:*:*:*:*:*:*", "matchCriteriaId": "1225414E-4CB3-4A3C-94BD-FA9AA75B778A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.11.2:*:*:*:*:*:*:*", "matchCriteriaId": "EA7F265C-1EAB-4F9A-8D11-9F5CDE9D8F06"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.12:*:*:*:*:*:*:*", "matchCriteriaId": "7E720459-C4D8-47E6-85C0-A8A1D90D40D9"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.13:*:*:*:*:*:*:*", "matchCriteriaId": "6EDA0FFC-93DB-494D-B49A-0F2EA5DF7262"}, {"vulnerable": true, "criteria": "cpe:2.3:a:yiiframework:yiiframework:2.0.13.1:*:*:*:*:*:*:*", "matchCriteriaId": "64C06D97-C4E3-4614-96A9-C5404B27B4EA"}]}]}], "references": [{"url": "https://github.com/yiisoft/yii2/commit/6c0540aa2d6e0fe0fa89e4fd35bba4be5d6cece7", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/yiisoft/yii2/commit/6c0540aa2d6e0fe0fa89e4fd35bba4be5d6cece7"}}