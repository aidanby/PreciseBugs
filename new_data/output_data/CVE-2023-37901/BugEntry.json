{"buggy_code": ["Changelog\n=========\n\n\nVersion 3.2.6\n-------------\n\n*Unreleased*\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Czech\n\nImprovements\n^^^^^^^^^^^^\n\n- Show which files were added or modified on each editing timeline revision (:pr:`5802`)\n- Support rendering Japanese, Chinese & Korean letters in PDFs (:issue:`3120`, :pr:`5842`,\n  thanks :user:`adamjenkins`)\n- Add button to adapt columns widths on the reviewing area's abstracts list (:pr:`5837`)\n- Allow cloning category-level badge/poster templates into another category (:pr:`5775`,\n  thanks :user:`SegiNyn`)\n- Allow using a custom link text in the ``{event_link}`` email placeholder, using the\n  ``{event_link:something-else-here}`` syntax (:issue:`5858`, :pr:`5860`)\n- Add option to add \"event cancelled\" semantics for event labels, which will disable\n  reminders for events having this label (:issue:`5285`, :pr:`5861`)\n\nBugfixes\n^^^^^^^^\n\n- Use correct name formatting in person link fields (:pr:`5835`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Support Python 3.11\n\n\nVersion 3.2.5\n-------------\n\n*Released on June 26, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix an XSS vulnerability in the LaTeX ``\\href`` macro when rendering it client-side.\n  Previously, it was possible to embed arbitrary JavaScript there using the ``javascript:``\n  protocol. The underlying MathJax library has now been updated to version 3 which allows\n  blacklisting certain protocols, thus allowing only ``http``, ``https`` and ``mailto``\n  links in ``\\href`` macros (:pr:`5818`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Show actual recipient data in the email preview instead of the that of the event creator\n  (:pr:`5794`)\n- Add an option to set a maximum number of choices in a multi-choice field (:pr:`5800`)\n\nBugfixes\n^^^^^^^^\n\n- Fix width of time column in PDF timetable when using 12-hour time format (:pr:`5788`)\n- Fix wrong date in email subject for room booking occurrence cancellations (:pr:`5790`)\n- Fix excessive queries being sent in meetings that have registration form with limited\n  places and many registrants (:pr:`5799`)\n- Fix extremely slow query when retrieving list of registration forms in conferences with\n  many registrants while not logged in (:pr:`5799`)\n- Fix title of session conveners being always empty in HTTP API with XML serialization\n  (:pr:`5813`)\n- Fix editable filters not working simultaneously with editable search (:pr:`5796`)\n- Fix missing icons in Abstract Markdown editor (:pr:`5815`)\n- Fix text overflow in event manage button (:pr:`5816`)\n- Fix undone revisions being used instead of the latest valid one when downloading\n  revision files as a ZIP archive (:pr:`5820`)\n- Fix custom actions not showing on revisions if the latest revision has been undone\n  (:pr:`5820`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Some basic but useful docs for the Registration Form model classes\n\n\nVersion 3.2.4\n-------------\n\n*Released on May 26, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Set ``Vary: Cookie`` header when session data is present and used. This ensures\n  that data linked to a (logged-in) session cannot leak between requests even in case\n  of a poorly-configured caching proxy in front of Indico (:pr:`5753`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Use the revision's timestamp when downloading its files as a ZIP archive (:pr:`5686`)\n- Use more consistent colors on the editing judgment button (:issue:`5687`, :pr:`5697`)\n- Keep history when undoing judgments on editables (:pr:`5630`)\n- Add search field to the abstracts list for reviewers (:issue:`5698`, :pr:`5703`)\n- Align status box colors with judgment dropdown (:issue:`5699`, :pr:`5706`)\n- Use a gender-neutral chairperson icon (:pr:`5710`)\n- Add option to set the abstracts' primary authors as the default submitters for the\n  corresponding contributions (:pr:`5711`)\n- Allow commenting on accepted/rejected editables (:issue:`5712`, :pr:`5722`)\n- Hide deleted sections and fields from registration summary (:pr:`5716`)\n- Add support for authorized submitters in Call for Papers (:pr:`5728`)\n- Display abstract submission comment in the list of abstracts (:pr:`5733`)\n- Allow searching for contributions by author in the management area (:pr:`5742`)\n- Include start/end dates of the whole booking in the timeline tooltip of recurring\n  room bookings (:issue:`5730`, :pr:`5740`)\n- Add day of the week to room booking details modal and timeline (:issue:`5718`,\n  :pr:`5743`)\n- Allow acceptance and rejection of editables in the editable list (:pr:`5721`)\n- Email verification attempts during signup now trigger rate limiting to prevent\n  spamming large amounts of confirmation emails (:pr:`5727`)\n- Allow bulk-commenting editables in the editable list (:pr:`5747`)\n- Allow emailing contribution persons that have not yet made any submissions to a\n  given editable type (:pr:`5755`)\n- Show only \"ready to review\" editables on the \"get next editable\" list (:pr:`5765`)\n- Disallow uploading empty files (:pr:`5767`)\n- Include non-speaker authors in the timetable export API (:issue:`5412`, :pr:`5738`)\n- Add setting to force track selection when accepting abstracts (:pr:`5771`)\n- Log detailed changes when editing contributions (:pr:`5777`)\n- Allow managers to ignore required field restrictions in registration forms\n  (:issue:`5644`, :pr:`5682`, thanks :user:`kewisch`)\n- Allow selecting the global noreply address as the sender for event reminders\n  (:pr:`5784`)\n- Allow admins to change the password of local accounts (:pr:`5789`, thanks\n  :user:`omegak`)\n\nBugfixes\n^^^^^^^^\n\n- Fix creating invited abstracts (:pr:`5696`)\n- Fix error on contribution page when there is no paper but the peer reviewing module\n  is enabled and configured to hide accepted papers\n- Clone all protection settings (in particular submitter privileges) when cloning events\n  (:pr:`5702`)\n- Fix searching in single-choice dropdown fields in registration forms (:pr:`5709`)\n- Fix uploading files in registration forms where the user only has access through the\n  registration's token (:pr:`5719`)\n- Fix being unable to set the \"speakers and authors\" as the default contribution\n  submitter type (:pr:`5711`)\n- Check server-side if Call for Papers is open when submitting a paper (:pr:`5725`)\n- Fix room notification email list showing up empty when editing it (:issue:`5729`,\n  :pr:`5731`)\n- Fix performance issues in paper assignment list (:pr:`5736`)\n- Fix performance issues in event export API with large events when including\n  contributions (:pr:`5736`)\n- Fix error when a search query matches content from unlisted events (:issue:`5759`,\n  :pr:`5761`)\n- Fix ToS and Privacy Policy links in room booking module not working when using an\n  external URL (:pr:`5774`)\n- Do not apply default values to new registration form fields when editing an existing\n  registration (:pr:`5781`)\n- Allow ``0`` for a required registration form numbe field (unless a higher minimum\n  value is set) (:pr:`5781`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Update Python & JavaScript dependencies (:pr:`5726`, :pr:`5752`)\n- Add support for the watchfiles live reloader (:pr:`5732`)\n- Add an endpoint to allow resetting the state of an accepted editable to \"ready to\n  review\" (:pr:`5758`)\n- Add RESTful endpoints for custom contribution fields (:pr:`5768`)\n\n\nVersion 3.2.3\n-------------\n\n*Released on February 23, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Sanitize HTML in global announcement messages\n- Update `cryptography <https://pypi.org/project/cryptography/>`_ library due to\n  vulnerabilities in OpenSSL (:cve:`CVE-2023-0286`)\n- Update `werkzeug <https://pypi.org/project/werkzeug/>`_ library due to a potential\n  Denial of Service vulnerability (:cve:`CVE-2023-25577`)\n\n.. note::\n\n    The risk of malicious HTML (e.g. scripts) in the global announcement is minimal\n    as only Indico administrators can set such an announcement anyway. However, in the\n    unlikely case that an administrator becomes malicious or is compromised, they would\n    have been be able to perform XSS against their Indico instance.\n\nImprovements\n^^^^^^^^^^^^\n\n- Include co-authors in abstract list columns and spreadsheet exports (:pr:`5605`)\n- Include speakers in abstract list columns and spreadsheet exports (:pr:`5615`)\n- Add an option to export all events in a series to ical at once (:issue:`5617`, :pr:`5620`)\n- Make it possible to load more events in series management (:pr:`5629`)\n- Check manually entered email addresses of speakers/authors/chairpersons\n  to avoid collisions and inconsistencies (:pr:`5478`)\n- Add option to use review track as accepted track when bulk-accepting abstracts\n  (:pr:`5608`)\n- Add setting to only allow managers to upload attachments to events and\n  contributions (:pr:`5597`)\n- Support Markdown when writing global announcement and apply standard HTML\n  sanitization to the message (:pr:`5640`)\n- Add BCC field on contribution email dialogs (:pr:`5637`)\n- Allow filtering by location in room booking (:issue:`4291`, :pr:`5622`,\n  thanks :user:`mindouro`)\n- Add button to adapt column widths in paper & contribution lists (:pr:`5642`)\n- Add event language settings to set default and additional languages (:issue:`5606`,\n  :pr:`5607`, thanks :user:`vasantvohra`)\n- Fail nicely when trying to import an event from another Indico instance (:issue:`5619`,\n  :pr:`5653`)\n- Add option to send reminders to invited registrants who have not yet responded\n  (:issue:`5579`, :pr:`5654`)\n- Hide the top box with the latest files of an editable until it has been accepted\n  and published (:issue:`5660`, :pr:`5665`)\n- Allow uploading files when requesting changes on the editing timeline (:pr:`5612`)\n- Add ``locked_fields`` to the identity provider settings in ``indico.conf`` to\n  prevent non-admin users from turning off their profile's personal data\n  synchronization (:pr:`5648`)\n- Add an option to sync event persons with users (:pr:`5677`)\n- Disallow repeated filenames in editing revisions (:pr:`5681`)\n- Add setting to hide peer-reviewed papers from participants even after they have\n  been accepted (:issue:`5666`, :pr:`5671`)\n- Prevent concurrent assignment of editors to editables (:pr:`5684`)\n- Add color labels to the filter dropdown (:issue:`5675`, :pr:`5680`)\n\nBugfixes\n^^^^^^^^\n\n- Correctly show contribution authors in participant roles list (:pr:`5603`)\n- Disable Sentry trace propagation to outgoing HTTP requests (:pr:`5604`)\n- Include token in notification emails for private surveys (:pr:`5618`)\n- Fix some API calls not working with personal access tokens (:pr:`5627`)\n- Correctly handle paragraphs and linebreaks in plaintext conversion (:pr:`5623`)\n- Send manager notifications and email participant if they withdraw from an event\n  (:issue:`5633`, :pr:`5638`, thanks :user:`kewisch`)\n- Do not break registrations with purged accommodation fields (:issue:`5641`,\n  :pr:`5643`)\n- Do not show blocked rooms as available on the very last day of the blocking\n  (:pr:`5663`)\n- Do not show blocked rooms as available for admins unles they have admin override\n  mode enabled (:pr:`5663`)\n- Fix roles resetting to the default ones when editing person data in an abstract\n  or contribution (:pr:`5664`)\n- Correctly show paragraphs in CKEditor fields (:issue:`5624`, :pr:`5656`, thanks\n  :user:`kewisch`)\n- Fix empty iCal file being attached when registering for a protected event\n  (:pr:`5688`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``rh.before-check-access`` signal (:pr:`5639`, thanks :user:`omegak`)\n- Add ``indico celery --watchman ...`` to run Celery with the Watchman reloader\n  (:pr:`5667`)\n- Allow overriding the cache TTL for remote group membership checks (:pr:`5672`)\n- Allow a custom editing workflow service to mark new editables as ready-for-review\n  without creating a new replacement revision (:pr:`5668`)\n- Update Python dependencies (:pr:`5689`)\n\n\nVersion 3.2.2\n-------------\n\n*Released on December 09, 2022*\n\nImprovements\n^^^^^^^^^^^^\n\n- Display program codes in 'My contributions' (:pr:`5573`)\n- Warn when a user cannot create an event in the current category (:pr:`5572`)\n- Display all contributions in 'My contributions' and not just those with\n  submitter privileges (:pr:`5575`)\n- Apply stronger sanitization on rich-text content pasted into CKEditor\n  (:issue:`5560`, :pr:`5571`)\n- Allow raw HTML snippets when editing custom conference pages and event\n  descriptions (:issue:`5584`, :pr:`5587`)\n- Warn more clearly that link attachments are just a link and do not copy\n  the file (:issue:`5551`, :pr:`5593`)\n- Add option to email people with specific roles about their contributions\n  or abstracts (:pr:`5598`)\n- Add setting to allow submitters to edit custom fields in their contributions\n  (:pr:`5599`)\n\nBugfixes\n^^^^^^^^\n\n- Fix broken links in some notification emails (:pr:`5567`)\n- Fix always-disabled submit button when submitting an agreement response\n  on someone's behalf (:pr:`5574`)\n- Disallow nonsensical retention periods and visibility durations (:pr:`5576`)\n- Fix sorting by program code in editable list (:pr:`5582`)\n- Do not strip custom CSS classes from HTML in CKEditor (:issue:`5584`, :pr:`5585`)\n- Use the instance's default locale instead of \"no locale\" (US-English) in places\n  where no better information is known for email recipients (:pr:`5586`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Refactor email-sending dialog using React (:pr:`5547`)\n\n\nVersion 3.2.1\n-------------\n\n*Released on November 10, 2022*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `cryptography <https://pypi.org/project/cryptography/>`_ library due to\n  vulnerabilities in OpenSSL (:cve:`CVE-2022-3602`, :cve:`CVE-2022-3786`)\n\n.. note::\n\n    We do not think that Indico is affected by those vulnerabilities as it does\n    not use the *cryptography* library itself, and the dependency that uses it\n    is only used during SSO (OAuth) logins and most likely in a way that is not\n    vulnerable. It is nonetheless recommended to update as soon as possible.\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- Make email templates translatable (:issue:`5263`, :pr:`5488`, thanks :user:`Leats`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Enable better image linking UI in CKEditor (:pr:`5492`)\n- Restore the \"fullscreen view\" option in CKEditor (:pr:`5505`)\n- Display & enforce judging deadline (:pr:`5506`)\n- Add a setting to disable entering persons in person link fields manually (:pr:`5499`)\n- Allow taking minutes in markdown (:issue:`3386`, :pr:`5500`, thanks :user:`Leats`)\n- Add setting to preselect \"Include users with no Indico account\" when adding\n  authors/speakers (:pr:`5553`)\n- Include event label in email reminders (:issue:`5554`, :pr:`5556`,\n  thanks :user:`omegak`)\n- Include emails of submitters, speakers and authors in abstract/contribution\n  Excel/CSV exports (:pr:`5565`)\n\nBugfixes\n^^^^^^^^\n\n- Fix meeting minutes being shown when they are expected to be hidden (:pr:`5475`)\n- Force default locale when generating Book of Abstracts (:pr:`5477`)\n- Fix width and height calculation when printing badges (:pr:`5479`)\n- Parse escaped quotes (``&quot;``) in ckeditor output correctly (:pr:`5487`)\n- Fix entering room name if room booking is enabled but has no locations (:pr:`5495`)\n- Fix privacy information dropdown not opening on Safari (:pr:`5507`)\n- Only let explicitly assigned reviewers review papers (:pr:`5527`)\n- Never count participants from a registration forms with a fully hidden participant\n  list for the total count on the participant page (:pr:`5532`)\n- Fix \"Session Legend\" not working in all-days timetable view (:pr:`5539`)\n- Fix exporting unlisted events via API (:pr:`5555`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Require at least Postgres 13 during new installations. This check can be\n  forced on older Postgres versions (11+ should work), but we make no guarantees\n  that nothing is broken (the latest version we test with is 12) (:pr:`5503`)\n- Refactor service request email generation so plugins can override sender and\n  reply-to addresses for these emails (:pr:`5501`)\n- Deleting a session no longer leaves orphaned session blocks (:pr:`5533`,\n  thanks :user:`omegak`)\n- Indicate in the ``registration_deleted`` signal whether it's a permanent deletion\n  from the database or just a soft-deletion (:pr:`5559`)\n\n\nVersion 3.2\n-----------\n\n*Released on August 25, 2022*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- The registration form frontend has been completely rewritten using modern web\n  technology.\n- Registrations can now have a retention period for the whole registration and\n  individual fields, after which their data is permanently deleted.\n- The participant list of an event can now use consent to determine whether a\n  participant should be displayed, and its visibility can be different for the\n  general public and other registered participants.\n- An event can now have one or more privacy notices and it's possible to set the\n  name and contact information of the \"Data controller\" (useful where GDPR or\n  similar legislation applies).\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: German\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a new event management permission that grants access only to the abstracts\n  module (:pr:`5212`)\n- Add a link to quickly view the current stylesheet on the conference layout\n  customization page (:issue:`5239`, :pr:`5259`)\n- Add more powerful filters to \"get next editable\" and the list of editables\n  (:issue:`5188`, :pr:`5224`, :pr:`5241`)\n- Add the ability to create speaker-only menu entries for conferences (:issue:`5261`,\n  :pr:`5268`)\n- Highlight changed fields in notification emails about modified registrations\n  (:issue:`5265`, :pr:`5269`)\n- Add an option to send notifications of new abstract comments (:issue:`5266`, :pr:`5284`)\n- Badge/poster templates can have additional images besides the background image\n  (:pr:`5273`, thanks :user:`SegiNyn`)\n- Add ability to add alerts to iCal exports (:issue:`5318`, :pr:`5320`, thanks\n  :user:`PerilousApricot`)\n- Show affiliations of submitters and authors in abstract/contribution lists and\n  add an extra column with this information to Excel/CSV exports (:pr:`5330`)\n- Add option to delete persons from the event if they have no roles or other ties\n  to the event anymore (:issue:`5294`, :pr:`5313`)\n- Allow events to be favorited (:issue:`1662`, :pr:`5338`, thanks :user:`Leats`)\n- Include abstract content in CSV/Excel export if enabled in the abstract list\n  (:issue:`5356`, :pr:`5372`, thanks :user:`rppt`)\n- Add the ability to include an optional static javascript file when defining\n  custom conference themes from within a plugin (:pr:`5414`, thanks :user:`brittyazel`)\n- Add option to make the 'Affiliation' and 'Comment' fields mandatory in the account\n  request form (:issue:`4819`, :pr:`5389`, thanks :user:`elsbethe`)\n- Include tags in registrant API (:pr:`5441`)\n- Subcontribution speakers can now be granted submission privileges in the event's\n  protection settings (:issue:`2363`, :pr:`5444`)\n- Registration forms can now require a CAPTCHA when the user is not logged in\n  (:issue:`4698`, :pr:`5400`)\n- Account creation now requires a CAPTCHA by default to prevent spam account creation\n  (:issue:`4698`, :pr:`5446`)\n- Add contribution's program code to revision's \"Download ZIP\" filename (:pr:`5449`)\n- Add UI to manage series of events (:issue:`4048`, :pr:`5436`, thanks :user:`Leats`)\n- Event series can now specify a title pattern to use when cloning an event in the\n  series (:pr:`5456`)\n- Insert new categories into the correct position if the list is already sorted (:pr:`5455`)\n- Images can now be uploaded by pasting or dropping them into the editor for minutes\n  or the event description (:pr:`5458`)\n- Add JSON export for contribution details (:pr:`5460`)\n\nBugfixes\n^^^^^^^^\n\n- Fix selected state filters not showing up as selected in abstract list customization\n  (:pr:`5363`)\n- Do not propose an impossible date/time in the Room Booking module when accessing it\n  shortly before midnight (:pr:`5371`)\n- Do not fail when viewing an abstract that has been reviewed in a track which has\n  been deleted in the meantime (:pr:`5386`)\n- Fix error when editing a room's nonbookable periods (:pr:`5390`)\n- Fix incorrect access check when directly accessing a registration form (:pr:`5406`)\n- Fix error in rate limiter when using Redis with a UNIX socket connection (:issue:`5391`)\n- Ensure that submitters with contribution edit privileges can only edit basic fields\n  (:pr:`5425`)\n- Do not return the whole contribution list when editing a contribution from elsewhere\n  (:pr:`5425`)\n- Fix session blocks not being sorted properly in a timetable PDF export when they\n  have the same start time (:pr:`5426`)\n- Fix printing badges containing text elements with malformed HTML (:pr:`5437`,\n  thanks :user:`omegak`)\n- Fix misleading start and end times for Poster contributions in the timetable HTTP API\n  and the contributions placeholder in emails (:pr:`5443`)\n- Do not mark persons as registered if the registration form has been deleted (:pr:`5448`)\n- Fix error when a room owner who is not an admin edits their room (:pr:`5457`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- When upgrading an existing instance, Postgres 11 or newer is required. The upgrade will\n  fail on Postgres 9.6 (or 10).\n- Add new ``regform-container-attrs`` template hook to pass additional (data-)attributes\n  to the React registration form containers (:pr:`5271`)\n- Add support for JavaScript plugin hooks to register objects or react components for use\n  by JS code that's in the core (:pr:`5271`)\n- Plugins can now define custom registration form fields (:pr:`5282`)\n- Add :data:`EMAIL_BACKEND` configuration variable to support different email sending\n  backends e.g. during development (:issue:`5375`, :pr:`5376`, thanks :user:`Moist-Cat`)\n- Make model attrs to clone interceptable by plugins (:pr:`5403`, thanks :user:`omegak`)\n- Add ``signal_query`` method in the ``IndicoBaseQuery`` class and the ``db_query``\n  signal, allowing to intercept and modify queries by signal handlers (:pr:`4981`,\n  thanks :user:`omegak`).\n- Update WYSIWYG editor to CKEditor 5, resulting in a slightly different look for the\n  editor controls and removal of some uncommon format options (:pr:`5345`)\n\n\n----\n\n\nVersion 3.1.2\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- Prevent access to a badge design of a deleted category or an event (:issue:`5329`,\n  :pr:`5334`, thanks :user:`vasantvohra`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Let payment plugins ignore pending transactions if they are expired (:pr:`5357`)\n\n\nVersion 3.1.1\n-------------\n\n*Released on April 27, 2022*\n\nImprovements\n^^^^^^^^^^^^\n\n- Prompt before leaving the event protection page without saving changes (:pr:`5222`)\n- Add the ability to clone abstracts (:pr:`5217`)\n- Add setting to allow submitters to edit their own contributions (:pr:`5213`)\n- Update the editing state color scheme (:pr:`5236`)\n- Include program codes in export API (:pr:`5246`)\n- Add abstract rating scores grouped by track (:pr:`5298`)\n- Allow uploading revisions when an editor hasn't been assigned (:pr:`5289`)\n\nBugfixes\n^^^^^^^^\n\n- Fix published editable files only being visible to users with access to the editing\n  timeline (:pr:`5218`)\n- Fix incorrect date in multi-day meeting date selector dropdown in certain timezones\n  (:pr:`5223`)\n- Remove excessive padding around category titles (:pr:`5225`)\n- Fix error when exporting registrations to PDFs that contained certain invalid HTML-like\n  sequences (:pr:`5233`)\n- Restore logical order of registration list columns (:pr:`5240`)\n- Fix a performance issue in the HTTP API when exporting events from a specific category\n  while specifying a limit (only affected large databases) (:pr:`5260`)\n- Correctly specify charset in iCalendar files attached to emails (:issue:`5228`,\n  :pr:`5258`, thanks :user:`imranyusuff`)\n- Fix very long map URLs breaking out of the event management settings box (:pr:`5275`)\n- Fix missing abstract withdrawal notification (:pr:`5281`)\n- Fix downloading files from editables without a published revision (:pr:`5290`)\n- Do not mark participants with deleted/inactive registrations as registered in\n  participant roles list (:pr:`5308`)\n- Do not enforce personal token name uniqueness across different users (:pr:`5317`)\n- Fix last modification date not updating when an abstract is edited (:pr:`5325`)\n- Fix a bug with poster and badge printing in unlisted events (:pr:`5322`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``category-sidebar`` template hook and blocks around category sidebar\n  sections (:pr:`5237`, thanks :user:`omegak`)\n- Add ``event.reminder.before_reminder_make_email`` signal (:pr:`5242`, thanks\n  :user:`vasantvohra`)\n- Add ``plugin.interceptable_function`` signal to intercept selected function\n  calls (:pr:`5254`)\n\n\nVersion 3.1\n-----------\n\n*Released on January 11, 2022*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Category managers now see a log of all changes made to their category in a\n  category log (similar to the event log). This log includes information about\n  all events being created, deleted or moved in the category (:issue:`2809`,\n  :pr:`5029`)\n- Besides letting everyone create events in a category or restricting it to\n  specific users, categories now also support a moderation workflow which allows\n  event managers to request moving an event to a category. Only once a category\n  manager approves this request, the event is actually moved (:issue:`2057`, :pr:`5013`)\n- Admins now have the option to enable \"Unlisted events\", which are events that\n  are not (yet) assigned to a category. Such events are only accessible to its\n  creator and other users who have been granted access explicitly, and do not\n  show up in any category's event listing (:issue:`4294`, :issue:`5055`, :pr:`5023`,\n  :pr:`5095`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Send event reminders as individual emails with the recipient in the To field\n  instead of using BCC (:issue:`2318`, :pr:`5088`)\n- Let event managers assign custom tags to registrations and filter the list\n  of registrations by the presence or absence of specific tags (:issue:`4948`,\n  :pr:`5091`)\n- Allow importing registration invitations from a CSV file (:issue:`3673`, :pr:`5108`)\n- Show event label on category overviews and in iCal event titles (:issue:`5140`,\n  :pr:`5143`)\n- Let event managers view the final timetable even while in draft mode (:issue:`5141`,\n  :pr:`5145`)\n- Add option to export role members as CSV (:issue:`5147`, :pr:`5156`)\n- Include attachment checksums in API responses (:issue:`5084`, :pr:`5169`, thanks\n  :user:`avivace`)\n- iCalendar invites now render nicely in Outlook (:pr:`5178`)\n- Envelope senders for emails can now be restricted to specific addresses/domains\n  using the :data:`SMTP_ALLOWED_SENDERS` and :data:`SMTP_SENDER_FALLBACK` config\n  settings (:issue:`4837`, :issue:`2224`, :issue:`1877`, :pr:`5179`)\n- Allow filtering the contribution list based on whether any person (speaker or author)\n  has registered for the event or not (:issue:`5192`, :pr:`5193`)\n- Add background color option and layer order to badge/poster designer items (:pr:`5139`,\n  thanks :user:`SegiNyn`)\n- Allow external users in event/category ACLs (:pr:`5146`)\n\nBugfixes\n^^^^^^^^\n\n- Fix :data:`CUSTOM_COUNTRIES` not overriding names of existing countries (:pr:`5183`)\n- Fix error dialog when submitting an invited abstract without being logger in (:pr:`5200`)\n- Fix category picker search displaying deleted categories (:issue:`5197`, :pr:`5203`)\n- Fix editing service API calls using the service token (:pr:`5170`)\n- Fix excessive retries for Celery tasks with a retry wait time longer\n  than 1 hour (:pr:`5172`)\n\n\n----\n\n\nVersion 3.0.4\n-------------\n\n*Unreleased*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow external users in event/category ACLs (:pr:`5146`)\n\nBugfixes\n^^^^^^^^\n\n- Fix editing service API calls using the service token (:pr:`5170`)\n- Fix excessive retries for Celery tasks with a retry wait time longer\n  than 1 hour (:pr:`5172`)\n\n\nVersion 3.0.3\n-------------\n\n*Released on October 28, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Protect authentication endpoints against CSRF login attacks (:pr:`5099`,\n  thanks :user:`omegak`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Support TLS certificates for SMTP authentication (:pr:`5100`, thanks :user:`dweinholz`)\n- Add CSV/Excel contribution list exports containing affiliations (:issue:`5114`, :pr:`5118`)\n- Include program codes in contribution PDFs and spreadsheets (:pr:`5126`)\n- Add an API for bulk-assigning contribution program codes programmatically (:issue:`5115`,\n  :pr:`5120`)\n- Add layout setting to show videoconferences on the main conference page (:pr:`5124`)\n\nBugfixes\n^^^^^^^^\n\n- Fix certain registration list filters (checkin status & state) being combined\n  with OR instead of AND (:pr:`5101`)\n- Fix translations not being taken into account in some places (:issue:`5073`, :pr:`5105`)\n- Use correct/consistent field order for personal data fields in newly created\n  registration forms\n- Remove deleted registration forms from ACLs (:issue:`5130`, :pr:`5131`, thanks\n  :user:`jbtwist`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Truncate file names to 150 characters to avoid hitting file system path limits\n  (:pr:`5116`, thanks :user:`vasantvohra`)\n\n\nVersion 3.0.2\n-------------\n\n*Released on September 09, 2021*\n\nBugfixes\n^^^^^^^^\n\n- Fix JavaScript errors on the login page which caused problems when using multiple\n  form-based login methods (e.g. LDAP and local Indico accounts)\n\n\nVersion 3.0.1\n-------------\n\n*Released on September 08, 2021*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow filtering abstracts by custom fields having no value (:issue:`5033`, :pr:`5034`)\n- Add support for syncing email addresses when logging in using external accounts\n  (:pr:`5035`)\n- Use more space-efficient QR code version in registration tickets (:pr:`5052`)\n- Improve user experience when accessing an event restricted to registered participants\n  while not logged in (:pr:`5053`)\n- When searching external users, prefer results with a name in case of multiple matches\n  with the same email address (:pr:`5066`)\n- Show program codes in additional places (:pr:`5075`)\n- Display localized country names (:issue:`5070`, :pr:`5076`)\n\nBugfixes\n^^^^^^^^\n\n- Show correct placeholders in date picker fields (:pr:`5022`)\n- Correctly preselect the default currency when creating a registration form\n- Do not notify registrants when a payment transaction is created in \"pending\" state\n- Keep the order of multi-choice options in registration summary (:issue:`5020`, :pr:`5032`)\n- Correctly handle relative URLs in PDF generation (:issue:`5042`, :pr:`5044`)\n- Render markdown in track descriptions in PDF generation (:issue:`5043`, :pr:`5044`)\n- Fix error when importing chairpersons from an existing event (:pr:`5047`)\n- Fix broken timetable entry permalinks when query string args are present (:pr:`5049`)\n- Do not show \"Payments\" event management menu entry for registration managers\n  (:issue:`5072`)\n- Replace some hardcoded date formats with locale-aware ones (:issue:`5059`, :pr:`5071`)\n- Clone the scientific program description together with tracks (:pr:`5077`)\n- Fix database error when importing registrations to an event that already contains a\n  deleted registration form with registrations (:pr:`5078`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``event.before_check_registration_email`` signal (:pr:`5021`, thanks :user:`omegak`)\n- Do not strip image maps in places where HTML is allowed (:pr:`5026`, thanks\n  :user:`bpedersen2`)\n- Add ``event.registration.after_registration_form_clone`` signal (:pr:`5037`, thanks\n  :user:`vasantvohra`)\n- Add ``registration-invite-options`` template hook (:pr:`5045`, thanks :user:`vasantvohra`)\n- Fix Typeahead widget not working with extra validators (:issue:`5048`, :pr:`5050`,\n  thanks :user:`jbtwist`)\n\n\nVersion 3.0\n-----------\n\n*Released on July 16, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add system notices which inform administrators about important things such as security\n  problems or outdated Python/Postgres versions. These notices are retrieved once a day\n  without sending any data related to the Indico instance, but if necessary, this feature\n  can be disabled by setting :data:`SYSTEM_NOTICES_URL` to ``None`` in ``indico.conf``\n  (:pr:`5004`)\n- It is now possible to use :ref:`SAML SSO <saml>` for authentication without the need for\n  Shibboleth and Apache (:pr:`5014`)\n\nBugfixes\n^^^^^^^^\n\n- Fix formatting and datetime localization in various PDF exports and timetable tab headers\n  (:pr:`5009`)\n- Show lecture speakers as speakers instead of chairpersons on the participant roles page\n  (:pr:`5008`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Signals previously exposed directly via ``signals.foo`` now need to be accessed using their\n  explicit name, i.e. ``signals.core.foo`` (:pr:`5007`)\n- Add ``category.extra_events`` signal (:pr:`5005`, thanks :user:`omegak`)\n\n\nVersion 3.0rc2\n--------------\n\n*Released on July 09, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add support for personal tokens. These tokens act like OAuth tokens, but are\n  associated with a specific user and generated manually without the need of\n  doing the OAuth flow. They can be used like API keys but with better granularity\n  using the same scopes OAuth applications have, and a single user can have multiple\n  tokens using various scopes. By default any user can create such tokens, but admins\n  can restrict their creation.\n  (:issue:`1934`, :pr:`4976`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Add abstract content to the abstract list customization options (:pr:`4968`)\n- Add CLI option to create a series (:pr:`4969`)\n- Users cannot submit multiple anonymous surveys anymore by logging out and in again\n  (:issue:`4693`, :pr:`4970`)\n- Improve reviewing state display for paper reviewers (:issue:`4979`, :pr:`4984`)\n- Make it clearer if the contributions/timetable of a conference are still in draft mode\n  (:issue:`4977`, :pr:`4986`)\n- Add \"send to speakers\" option in event reminders (:issue:`4958`, :pr:`4966`, thanks\n  :user:`Naveenaidu`)\n- Allow displaying all events descending from a category (:issue:`4982`,\n  :pr:`4983`, thanks :user:`omegak` and :user:`openprojects`).\n- Add an option to allow non-judge conveners to update an abstract track (:pr:`4989`)\n\nBugfixes\n^^^^^^^^\n\n- Fix errors when importing events containing abstracts or event roles from a YAML dump\n  (:pr:`4995`)\n- Fix sorting abstract notification rules (:pr:`4998`)\n- No longer silently fall back to the first event contact email address when sending\n  registration emails where no explicit sender address has been configured (:issue:`4992`,\n  :pr:`4996`, thanks :user:`vasantvohra`)\n- Do not check for event access when using a registration link with a registration token\n  (:issue:`4991`, :pr:`4997`, thanks :user:`vasantvohra`)\n\n\nVersion 3.0rc1\n--------------\n\n*Released on June 25, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- There is a new built-in search module which provides basic search functionality out\n  of the box, and for more advanced needs (such as full text search in uploaded files)\n  plugins can provide their own search functionality (e.g. using ElasticSearch).\n  (:pr:`4841`)\n- Categories may now contain both events and subcategories at the same time. During the\n  upgrade to 3.0 event creation is automatically set to restricted in all categories\n  containing subcategories in order to avoid any negative surprises which would suddenly\n  allow random Indico users to create events in places where they couldn't do so previously.\n  (:issue:`4679`, :pr:`4725`, :pr:`4757`)\n- The OAuth provider module has been re-implemented based on a more modern\n  library (authlib). Support for the somewhat insecure *implicit flow* has been\n  removed in favor of the code-with-PKCE flow. Tokens are now stored more securely\n  as a hash instead of plaintext. For a given user/app/scope combination, only a\n  certain amount of tokens are stored; once the limit has been reached older tokens\n  will be discarded. The OAuth provider now exposes its metadata via a well-known\n  URI (RFC 8414) and also has endpoints to introspect or revoke a token. (:issue:`4685`,\n  :pr:`4798`)\n- User profile pictures (avatars) are now shown in many more places throughout Indico,\n  such as user search results, meeting participant lists and reviewing timelines.\n  (:issue:`4625`, :pr:`4747`, :pr:`4939`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New locale: English (United States)\n- New translation: Turkish\n\nImprovements\n^^^^^^^^^^^^\n\n- Use a more modern search dialog when searching for users (:issue:`4674`, :pr:`4743`)\n- Add an option to refresh event person data from the underlying user when cloning an\n  event (:issue:`4750`, :pr:`4760`)\n- Add options for attaching iCal files to complete registration and event reminder\n  emails (:issue:`1158`, :pr:`4780`)\n- Use the new token-based URLs instead of API keys for persistent ical links and replace\n  the calendar link widgets in category, event, session and contribution views with the\n  more modern ones used in dashboard (:issue:`4776`, :pr:`4801`)\n- Add an option to export editables to JSON (:issue:`4767`, :pr:`4810`)\n- Add an option to export paper peer reviewing data to JSON (:issue:`4767`, :pr:`4818`)\n- Passwords are now checked against a list of breached passwords (\"Have I Been Pwned\")\n  in a secure and anonymous way that does not disclose any data. If a user logs in with\n  an insecure password, they are forced to change it before they can continue using Indico\n  (:pr:`4817`)\n- Failed login attempts now trigger rate limiting to prevent brute-force attacks\n  (:issue:`1550`, :pr:`4817`)\n- Allow filtering the \"Participant Roles\" page by users who have not registered for the event\n  (:issue:`4763`, :pr:`4822`)\n- iCalendar exports now include contact data, event logo URL and, when exporting\n  sessions/contributions, the UID of the related event. Also, only non-empty fields\n  are exported. (:issue:`4785`, :issue:`4586`, :issue:`4587`, :issue:`4791`,\n  :pr:`4820`)\n- Allow adding groups/roles as \"authorized abstract submitters\" (:pr:`4834`)\n- Direct links to (sub-)contributions in meetings using the URLs usually meant for\n  conferences now redirect to the meeting view page (:pr:`4847`)\n- Use a more compact setup QR code for the mobile *Indico check-in* app; the latest version of\n  the app is now required. (:pr:`4844`)\n- Contribution duration fields now use a widget similar to the time picker that makes selecting\n  durations easier. (:issue:`2462`, :pr:`4873`)\n- Add new meeting themes that show sequential numbers instead of start times for contributions\n  (:pr:`4899`)\n- Remove the very outdated \"Compact style\" theme (it's still available via the ``themes_legacy``\n  plugin) (:issue:`4900`, :pr:`4899`)\n- Support cloning surveys when cloning events (:issue:`2045`, :pr:`4910`)\n- Show external contribution references in conferences (:issue:`4928`, :pr:`4933`)\n- Allow changing the rating scale in abstract/paper reviewing even after reviewing started (:pr:`4942`)\n- Allow blacklisting email addresses for user registrations (:issue:`4644`, :pr:`4946`)\n\nBugfixes\n^^^^^^^^\n\n- Take registrations of users who are only members of a custom event role into account on the\n  \"Participant Roles\" page (:pr:`4822`)\n- Fail gracefully during registration import when two rows have different emails that belong\n  to the same user (:pr:`4823`)\n- Restore the ability to see who's inheriting access from a parent object (:pr:`4833`)\n- Fix misleading message when cancelling a booking that already started and has past\n  occurrences that won't be cancelled (:issue:`4719`, :pr:`4861`)\n- Correctly count line breaks in length-limited abstracts (:pr:`4918`)\n- Fix error when trying to access subcontributions while event is in draft mode\n- Update the user link in registrations when merging two users (:pr:`4936`)\n- Fix error when exporting a conference timetable PDF with the option \"Print abstract content of all\n  contributions\" and one of the abstracts is too big to fit in a page (:issue:`4881`, :pr:`4955`)\n- Emails sent via the Editing module are now logged to the event log (:pr:`4960`)\n- Fix error when importing event notes from another event while the target event already\n  has a deleted note (:pr:`4959`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Require Python 3.9 - older Python versions (especially Python 2.7) are **no longer supported**\n- ``confId`` has been changed to ``event_id`` and the corresponding URL path segments\n  now enforce numeric data (and thus pass the id as a number instead of string)\n- ``CACHE_BACKEND`` has been removed; Indico now always uses Redis for caching\n- The integration with flower (celery monitoring tool) has been removed as it was not widely used,\n  did not provide much benefit, and it is no longer compatible with the latest Celery version\n- ``session.user`` now returns the user related to the current request, regardless of whether\n  it's coming from OAuth, a signed url or the actual session (:pr:`4803`)\n- Add a new ``check_password_secure`` signal that can be used to implement additional password\n  security checks (:pr:`4817`)\n- Add an endpoint to let external applications stage the creation of an event with some data to be\n  pre-filled when the user then opens the link returned by that endpoint (:pr:`4628`, thanks\n  :user:`adl1995`)\n\n\n----\n\n\nVersion 2.3.6\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- None so far :)\n\n\nVersion 2.3.5\n-------------\n\n*Released on May 11, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix XSS vulnerabilities in the category picker (via category titles), location widget (via room and\n  venue names defined by an Indico administrator) and the \"Indico Weeks View\" timetable theme (via\n  contribution/break titles defined by an event organizer). As neither of these objects can be created\n  by untrusted users (on a properly configured instance) we consider the severity of this vulnerability\n  \"minor\" (:pr:`4897`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Polish\n- New translation: Mongolian\n\nImprovements\n^^^^^^^^^^^^\n\n- Add an option to not disclose the names of editors and commenters to submitters in the\n  Paper Editing module (:issue:`4829`, :pr:`4865`)\n\nBugfixes\n^^^^^^^^\n\n- Do not show soft-deleted long-lasting events in category calendar (:pr:`4824`)\n- Do not show management-related links in editing hybrid view unless the user has\n  access to them (:pr:`4830`)\n- Fix error when assigning paper reviewer roles with notifications enabled and one\n  of the reviewing types disabled (:pr:`4838`)\n- Fix viewing timetable entries if you cannot access the event but a specific session\n  inside it (:pr:`4857`)\n- Fix viewing contributions if you cannot access the event but have explicit access to\n  the contribution (:pr:`4860`)\n- Hide registration menu item if you cannot access the event and registrations are not\n  exempt from event access checks (:pr:`4860`)\n- Fix inadvertently deleting a file uploaded during the \"make changes\" Editing action,\n  resulting in the revision sometimes still referencing the file even though it has been\n  deleted from storage (:pr:`4866`)\n- Fix sorting abstracts by date (:pr:`4877`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``before_notification_send`` signal (:pr:`4874`, thanks :user:`omegak`)\n\n\nVersion 2.3.4\n-------------\n\n*Released on March 11, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix some open redirects which could help making harmful URLs look more trustworthy by linking\n  to Indico and having it redirect the user to a malicious site (:issue:`4814`, :pr:`4815`)\n- The :data:`BASE_URL` is now always enforced and requests whose Host header does not match\n  are rejected. This prevents malicious actors from tricking Indico into sending e.g. a\n  password reset link to a user that points to a host controlled by the attacker instead of\n  the actual Indico host (:pr:`4815`)\n\n.. note::\n\n    If the webserver is already configured to enforce a canonical host name and redirects or\n    rejects such requests, this cannot be exploited. Additionally, exploiting this problem requires\n    user interaction: they would need to click on a password reset link which they never requested,\n    and which points to a domain that does not match the one where Indico is running.\n\nImprovements\n^^^^^^^^^^^^\n\n- Fail more gracefully is a user has an invalid locale set and fall back to the default\n  locale or English in case the default locale is invalid as well\n- Log an error if the configured default locale does not exist\n- Add ID-1 page size for badge printing (:pr:`4774`, thanks :user:`omegak`)\n- Allow managers to specify a reason when rejecting registrants and add a new placeholder\n  for the rejection reason when emailing registrants (:pr:`4769`, thanks :user:`vasantvohra`)\n\nBugfixes\n^^^^^^^^\n\n- Fix the \"Videoconference Rooms\" page in conference events when there are any VC rooms\n  attached but the corresponding plugin is no longer installed\n- Fix deleting events which have a videoconference room attached which has its VC plugin\n  no longer installed\n- Do not auto-redirect to SSO when an MS office user agent is detected (:issue:`4720`,\n  :pr:`4731`)\n- Allow Editing team to view editables of unpublished contributions (:issue:`4811`, :pr:`4812`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Also trigger the ``ical-export`` metadata signal when exporting events for a whole category\n- Add ``primary_email_changed`` signal (:pr:`4802`, thanks :user:`openprojects`)\n\n\nVersion 2.3.3\n-------------\n\n*Released on January 25, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- JSON locale data for invalid locales is no longer cached on disk; instead a 404 error is\n  triggered. This avoids creating small files in the cache folder for each invalid locale\n  that is requested. (:pr:`4766`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Ukrainian\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a new \"Until approved\" option for a registration form's \"Modification allowed\"\n  setting (:pr:`4740`, thanks :user:`vasantvohra`)\n- Show last login time in dashboard (:pr:`4735`, thanks :user:`vasantvohra`)\n- Allow Markdown in the \"Message for complete registrations\" option of a registration\n  form (:pr:`4741`)\n- Improve video conference linking dropdown for contributions/sessions (hide unscheduled,\n  show start time) (:pr:`4753`)\n- Show timetable filter button in conferences with a meeting-like timetable\n\nBugfixes\n^^^^^^^^\n\n- Fix error when converting malformed HTML links to LaTeX\n- Hide inactive contribution/abstract fields in submit/edit forms (:pr:`4755`)\n- Fix adding registrants to a session ACL\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Videoconference plugins may now display a custom message for the prompt when deleting\n  a videoconference room (:pr:`4733`)\n- Videoconference plugins may now override the behavior when cloning an event with\n  attached videoconference rooms (:pr:`4732`)\n\n\nVersion 2.3.2\n-------------\n\n*Released on November 30, 2020*\n\nImprovements\n^^^^^^^^^^^^\n\n- Disable title field by default in new registration forms (:issue:`4688`, :pr:`4692`)\n- Add gender-neutral \"Mx\" title (:issue:`4688`, :pr:`4692`)\n- Add contributions placeholder for emails (:pr:`4716`, thanks :user:`bpedersen2`)\n- Show program codes in contribution list (:pr:`4713`)\n- Display the target URL of link materials if the user can access them (:issue:`2599`,\n  :pr:`4718`)\n- Show the revision number for all revisions in the Editing timeline (:pr:`4708`)\n\nBugfixes\n^^^^^^^^\n\n- Only consider actual speakers in the \"has registered speakers\" contribution list filter\n  (:pr:`4712`, thanks :user:`bpedersen2`)\n- Correctly filter events in \"Sync with your calendar\" links (this fix only applies to newly\n  generated links) (:pr:`4717`)\n- Correctly grant access to attachments inside public sessions/contribs even if the event\n  is more restricted (:pr:`4721`)\n- Fix missing filename pattern check when suggesting files from Paper Peer Reviewing to submit\n  for Editing (:pr:`4715`)\n- Fix filename pattern check in Editing when a filename contains dots (:pr:`4715`)\n- Require explicit admin override (or being whitelisted) to override blockings (:pr:`4706`)\n- Clone custom abstract/contribution fields when cloning abstract settings (:pr:`4724`,\n  thanks :user:`bpedersen2`)\n- Fix error when rescheduling a survey that already has submissions (:issue:`4730`)\n\n\nVersion 2.3.1\n-------------\n\n*Released on October 27, 2020*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n- Fix potential data leakage between OAuth-authenticated and unauthenticated HTTP API requests\n  for the same resource (:pr:`4663`)\n\n.. note::\n\n    Due to OAuth access to the HTTP API having been broken until this version, we do not\n    believe this was actually exploitable on any Indico instance. In addition, only Indico\n    administrators can create OAuth applications, so regardless of the bug there is no risk\n    for any instance which does not have OAuth applications with the ``read:legacy_api``\n    scope.\n\nImprovements\n^^^^^^^^^^^^\n\n- Generate material packages in a background task to avoid timeouts or using excessive\n  amounts of disk space in case of people submitting several times (:pr:`4630`)\n- Add new :data:`EXPERIMENTAL_EDITING_SERVICE` setting to enable extending an event's Editing\n  workflow through an `OpenReferee server <https://github.com/indico/openreferee/>`_ (:pr:`4659`)\n\nBugfixes\n^^^^^^^^\n\n- Only show the warning about draft mode in a conference if it actually has any\n  contributions or timetable entries\n- Do not show incorrect modification deadline in abstract management area if no\n  such deadline has been set (:pr:`4650`)\n- Fix layout problem when minutes contain overly large embedded images (:issue:`4653`,\n  :pr:`4654`)\n- Prevent pending registrations from being marked as checked-in (:pr:`4646`, thanks\n  :user:`omegak`)\n- Fix OAuth access to HTTP API (:pr:`4663`)\n- Fix ICS export of events with draft timetable and contribution detail level\n  (:pr:`4666`)\n- Fix paper revision submission field being displayed for judges/reviewers (:pr:`4667`)\n- Fix managers not being able to submit paper revisions on behalf of the user (:pr:`4667`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``registration_form_wtform_created`` signal and send form data in\n  ``registration_created`` and ``registration_updated`` signals (:pr:`4642`,\n  thanks :user:`omegak`)\n- Add ``logged_in`` signal\n\n\nVersion 2.3\n-----------\n\n*Released on September 14, 2020*\n\n.. note::\n\n    We also published a `blog post <https://getindico.io/indico/update/release/milestone/2020/07/22/indico-2-3-news.html>`_\n    summarizing the most relevant changes for end users.\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add category roles, which are similar to local groups but within the\n  scope of a category and its subcategories. They can be used for assigning\n  permissions in any of these categories and events within such categories.\n- Events marked as \"Invisible\" are now hidden from the category's event list\n  for everyone except managers (:issue:`4419`, thanks :user:`openprojects`)\n- Introduce profile picture, which is for now only visible on the user dashboard\n  (:issue:`4431`, thanks :user:`omegak`)\n- Registrants can now be added to event ACLs. This can be used to easily restrict\n  parts of an event to registered participants. If registration is open and a registration\n  form is in the ACL, people will be able to access the registration form even if they\n  would otherwise not have access to the event itself. It is also possible to restrict\n  individual event materials and custom page/link menu items to registered participants.\n  (:issue:`4477`, :issue:`4528`, :issue:`4505`, :issue:`4507`)\n- Add a new Editing module for papers, slides and posters which provides a workflow\n  for having a team review the layout/formatting of such proceedings and then publish\n  the final version on the page of the corresponding contribution. The Editing module\n  can also be connected to an external microservice to handle more advanced workflows\n  beyond what is supported natively by Indico.\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Chinese (Simplified)\n\nImprovements\n^^^^^^^^^^^^\n\n- Sort survey list by title (:issue:`3802`)\n- Hide \"External IDs\" field if none are defined (:issue:`3857`)\n- Add LaTeX source export for book of abstracts (:issue:`4035`,\n  thanks :user:`bpedersen2`)\n- Tracks can now be categorized in track groups (:issue:`4052`)\n- Program codes for sessions, session blocks, contributions and\n  subcontributions can now be auto-generated (:issue:`4026`)\n- Add draft mode for the contribution list of conference events\n  which hides pages like the contribution list and timetable until\n  the event organizers publish the contribution list. (:issue:`4095`)\n- Add ICS export for information in the user dashboard (:issue:`4057`)\n- Allow data syncing with multipass providers which do not support\n  refreshing identity information\n- Show more verbose error when email validation fails during event\n  registration (:issue:`4177`)\n- Add link to external map in room details view (:issue:`4146`)\n- Allow up to 9 digits (instead of 6) before the decimal point in\n  registration fees\n- Add button to booking details modal to copy direct link (:issue:`4230`)\n- Do not require new room manager approval when simply shortening a booking\n  (:issue:`4214`)\n- Make root category description/title customizable using the normal\n  category settings form (:issue:`4231`)\n- Added new :data:`LOCAL_GROUPS` setting that can be used to fully disable\n  local groups (:issue:`4260`)\n- Log bulk event category changes in the event log (:issue:`4241`)\n- Add CLI commands to block and unblock users (:issue:`3845`)\n- Show warning when trying to merge a blocked user (:issue:`3845`)\n- Allow importing event role members from a CSV file (:issue:`4301`)\n- Allow optional comment when accepting a pre-booking (:issue:`4086`)\n- Log event restores in event log (:issue:`4309`)\n- Warn about cancelling/rejecting whole recurring bookings instead of just\n  specific occurrences (:issue:`4092`)\n- Add \"quick cancel\" link to room booking reminder emails (:issue:`4324`)\n- Add visual information and filtering options for participants'\n  registration status to the contribution list (:issue:`4318`)\n- Add warning when accepting a pre-booking in case there are\n  concurrent bookings (:issue:`4129`)\n- Add event logging to opening/closing registration forms, approval/rejection of\n  registrations, and updates to event layout (:issue:`4360`,\n  thanks :user:`giusedb` & :user:`omegak`)\n- Add category navigation dialog on category display page (:issue:`4282`,\n  thanks :user:`omegak`)\n- Add UI for admins to block/unblock users (:issue:`3243`)\n- Show labels indicating whether a user is an admin, blocked or soft-deleted\n  (:issue:`4363`)\n- Add map URL to events, allowing also to override room map URL (:issue:`4402`,\n  thanks :user:`omegak`)\n- Use custom time picker for time input fields taking into account the 12h/24h\n  format of the user's locale (:issue:`4399`)\n- Refactor the room edit modal to a tabbed layout and improve error\n  handling (:issue:`4408`)\n- Preserve non-ascii characters in file names (:issue:`4465`)\n- Allow resetting moderation state from registration management view\n  (:issue:`4498`, thanks :user:`omegak`)\n- Allow filtering event log by related entries (:issue:`4503`, thanks\n  :user:`omegak`)\n- Do not automatically show the browser's print dialog in a meeting's print\n  view (:issue:`4513`)\n- Add \"Add myself\" button to person list fields (e.g. for abstract authors)\n  (:issue:`4411`, thanks :user:`jgrigera`)\n- Subcontributions can now be managed from the meeting display view (:issue:`2679`,\n  :pr:`4520`)\n- Add CfA setting to control whether authors can edit abstracts (:issue:`3431`)\n- Add CfA setting to control whether only speakers or also authors should\n  get submission rights once the abstract gets accepted (:issue:`3431`)\n- Show the Indico version in the footer again (:issue:`4558`)\n- Event managers can upload a custom Book of Abstract PDF (:issue:`3039`,\n  :pr:`4577`)\n- Display each news item on a separate page instead of together with all the\n  other news items (:pr:`4587`)\n- Allow registrants to withdraw their application (:issue:`2715`, :pr:`4585`,\n  thanks :user:`brabemi` & :user:`omegak`)\n- Allow choosing a default badge in categories (:pr:`4574`, thanks\n  :user:`omegak`)\n- Display event labels on the user's dashboard as well (:pr:`4592`)\n- Event modules can now be imported from another event (:issue:`4518`, thanks :user:`meluru`)\n- Event modules can now be imported from another event (:issue:`4518`, :pr:`4533`,\n  thanks :user:`meluru`)\n- Include the event keywords in the event API data (:issue:`4598`, :pr:`4599`,\n  thanks :user:`chernals`)\n- Allow registrants to check details for non-active registrations and prevent\n  them from registering twice with the same registration form (:issue:`4594`,\n  :pr:`4595`, thanks :user:`omegak`)\n- Add a new :data:`CUSTOM_LANGUAGES` setting to ``indico.conf`` to override the\n  name/territory of a language or disable it altogether (:pr:`4620`)\n\nBugfixes\n^^^^^^^^\n\n- Hide Book of Abstracts menu item if LaTeX is disabled and no custom Book\n  of Abstracts has been uploaded\n- Use a more consistent order when cloning the timetable (:issue:`4227`)\n- Do not show unrelated rooms with similar names when booking room from an\n  event (:issue:`4089`)\n- Stop icons from overlapping in the datetime widget (:issue:`4342`)\n- Fix alignment of materials in events (:issue:`4344`)\n- Fix misleading wording in protection info message (:issue:`4410`)\n- Allow guests to access public notes (:issue:`4436`)\n- Allow width of weekly event overview table to adjust to window\n  size (:issue:`4429`)\n- Fix whitespace before punctuation in Book of Abstracts (:pr:`4604`)\n- Fix empty entries in corresponding authors (:pr:`4604`)\n- Actually prevent users from editing registrations if modification is\n  disabled\n- Handle LaTeX images with broken redirects (:pr:`4623`, thanks :user:`bcc`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Make React and SemanticUI usable everywhere (:issue:`3955`)\n- Add ``before-regform`` template hook (:issue:`4171`, thanks :user:`giusedb`)\n- Add ``registrations`` kwarg to the ``event.designer.print_badge_template``\n  signal (:issue:`4297`, thanks :user:`giusedb`)\n- Add ``registration_form_edited`` signal (:issue:`4421`, thanks :user:`omegak`)\n- Make PyIntEnum freeze enums in Alembic revisions (:issue:`4425`, thanks\n  :user:`omegak`)\n- Add ``before-registration-summary`` template hook (:issue:`4495`, thanks\n  :user:`omegak`)\n- Add ``extra-registration-actions`` template hook (:issue:`4500`, thanks\n  :user:`omegak`)\n- Add ``event-management-after-title`` template hook (:issue:`4504`, thanks\n  :user:`meluru`)\n- Save registration id in related event log entries (:issue:`4503`, thanks\n  :user:`omegak`)\n- Add ``before-registration-actions`` template hook (:issue:`4524`, thanks\n  :user:`omegak`)\n- Add ``LinkedDate`` and ``DateRange`` form field validators (:issue:`4535`,\n  thanks :user:`omegak`)\n- Add ``extra-regform-settings`` template hook (:issue:`4553`, thanks\n  :user:`meluru`)\n- Add ``filter_selectable_badges`` signal (:issue:`4557`, thanks :user:`omegak`)\n- Add user ID in every log record logged in a request context (:issue:`4570`,\n  thanks :user:`omegak`)\n- Add ``extra-registration-settings`` template hook (:pr:`4596`, thanks\n  :user:`meluru`)\n- Allow extending polymorphic models in plugins (:pr:`4608`, thanks\n  :user:`omegak`)\n- Wrap registration form AngularJS directive in jinja block for more easily\n  overriding arguments passed to the app in plugins (:pr:`4624`, thanks\n  :user:`omegak`)\n\n\n----\n\n\nVersion 2.2.9\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- Fix error when building LaTeX PDFs if the temporary event logo path contained\n  an underscore (:issue:`4521`)\n- Disallow storing invalid timezones in user settings and reduce risk of sending\n  wrong timezone names when people automatically translate their UI (:issue:`4529`)\n\n\nVersion 2.2.8\n-------------\n\n*Released on April 08, 2020*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `bleach <https://github.com/mozilla/bleach>`_ to fix a regular expression\n  denial of service vulnerability\n- Update `Pillow <https://github.com/python-pillow/Pillow>`_ to fix a buffer overflow\n  vulnerability\n\n\nVersion 2.2.7\n-------------\n\n*Released on March 23, 2020*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add support for event labels to indicate e.g. postponed or cancelled\n  events (:issue:`3199`)\n\nBugfixes\n^^^^^^^^\n\n- Allow slashes in roomName export API\n- Show names instead of IDs of local groups in ACLs (:issue:`3700`)\n\n\nVersion 2.2.6\n-------------\n\n*Released on February 27, 2020*\n\nBugfixes\n^^^^^^^^\n\n- Fix some email fields (error report contact, agreement cc address) being\n  required even though they should be optional\n- Avoid browsers prefilling stored passwords in togglable password fields\n  such as the event access key\n- Make sure that tickets are not attached to emails sent to registrants for whom\n  tickets are blocked (:issue:`4242`)\n- Fix event access key prompt not showing when accessing an attachment link\n  (:issue:`4255`)\n- Include event title in OpenGraph metadata (:issue:`4288`)\n- Fix error when viewing abstract with reviews that have no scores\n- Update requests and pin idna to avoid installing incompatible dependency versions\n  (:issue:`4327`)\n\n\nVersion 2.2.5\n-------------\n\n*Released on December 06, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Sort posters in timetable PDF export by board number (:issue:`4147`, thanks\n  :user:`bpedersen2`)\n- Use lat/lng field order instead of lng/lat when editing rooms (:issue:`4150`,\n  thanks :user:`bpedersen2`)\n- Add additional fields to the contribution csv/xlsx export (authors and board\n  number) (:issue:`4148`, thanks :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Update the Pillow library to 6.2.1. This fixes an issue where some malformed images\n  could result in high memory usage or slow processing.\n- Truncate long speaker names in the timetable instead of hiding them (:issue:`4110`)\n- Fix an issue causing errors when using translations for languages with no plural\n  forms (like Chinese).\n- Fix creating rooms without touching the longitude/latitude fields (:issue:`4115`)\n- Fix error in HTTP API when Basic auth headers are present (:issue:`4123`,\n  thanks :user:`uxmaster`)\n- Fix incorrect font size in some room booking dropdowns (:issue:`4156`)\n- Add missing email validation in some places (:issue:`4158`)\n- Reject requests containing NUL bytes in the POST data (:issue:`4159`)\n- Fix truncated timetable PDF when using \"Print each session on a separate page\" in\n  an event where the last timetable entry of the day is a top-level contribution\n  or break (:issue:`4134`, thanks :user:`bpedersen2`)\n- Only show public contribution fields in PDF exports (:issue:`4165`)\n- Allow single arrival/departure date in accommodation field (:issue:`4164`,\n  thanks :user:`bpedersen2`)\n\n\nVersion 2.2.4\n-------------\n\n*Released on October 16, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix more places where LaTeX input was not correctly sanitized. While the biggest\n  security impact (reading local files) has already been mitigated when fixing the\n  initial vulnerability in the previous release, it is still strongly recommended\n  to update.\n\n\nVersion 2.2.3\n-------------\n\n*Released on October 08, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Strip ``@``, ``+``, ``-`` and ``=`` from the beginning of strings when exporting\n  CSV files to avoid `security issues <https://www.owasp.org/index.php/CSV_Injection>`_\n  when opening the CSV file in Excel\n- Use 027 instead of 000 umask when temporarily changing it to get the current umask\n- Fix LaTeX sanitization to prevent malicious users from running unsafe LaTeX commands\n  through specially crafted abstracts or contribution descriptions, which could lead to\n  the disclosure of local file contents\n\nImprovements\n^^^^^^^^^^^^\n\n- Improve room booking interface on small-screen devices (:issue:`4013`)\n- Add user preference for room owners/manager to select if they want to\n  receive notification emails for their rooms (:issue:`4096`, :issue:`4098`)\n- Show family name field first in user search dialog (:issue:`4099`)\n- Make date headers clickable in room booking calendar (:issue:`4099`)\n- Show times in room booking log entries (:issue:`4099`)\n- Support disabling server-side LaTeX altogether and hide anything that\n  requires it (such as contribution PDF export or the Book of Abstracts).\n  **LaTeX is now disabled by default, unless the** :data:`XELATEX_PATH`\n  **is explicitly set in** ``indico.conf``.\n\n\nBugfixes\n^^^^^^^^\n\n- Remove 30s timeout from dropzone file uploads\n- Fix bug affecting room booking from an event in another timezone (:issue:`4072`)\n- Fix error when commenting on papers (:issue:`4081`)\n- Fix performance issue in conferences with public registration count and a\n  high amount of registrations\n- Fix confirmation prompt when disabling conference menu customizations\n  (:issue:`4085`)\n- Fix incorrect days shown as weekend in room booking for some locales\n- Fix ACL entries referencing event roles from the old event when cloning an\n  event with event roles in the ACL. Run ``indico maint fix-event-role-acls``\n  after updating to fix any affected ACLs (:issue:`4090`)\n- Fix validation issues in coordinates fields when editing rooms (:issue:`4103`)\n\n\nVersion 2.2.2\n-------------\n\n*Released on August 23, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Remove dependency on ``pyatom``, which has vanished from PyPI\n\n\nVersion 2.2.1\n-------------\n\n*Released on August 16, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Make list of event room bookings sortable (:issue:`4022`)\n- Log when a booking is split during editing (:issue:`4031`)\n- Improve \"Book\" button in multi-day events (:issue:`4021`)\n\nBugfixes\n^^^^^^^^\n\n- Add missing slash to the ``template_prefix`` of the ``designer`` module\n- Always use HH:MM time format in book-from-event link\n- Fix timetable theme when set to \"indico weeks view\" before 2.2 (:issue:`4027`)\n- Avoid flickering of booking edit details tooltip\n- Fix outdated browser check on iOS (:issue:`4033`)\n\n\nVersion 2.2\n-----------\n\n*Released on August 06, 2019*\n\nMajor Changes\n^^^^^^^^^^^^^\n\n- \u26a0\ufe0f **Drop support for Internet Explorer 11 and other outdated or\n  discontinued browser versions.** Indico shows a warning message\n  when accessed using such a browser. The latest list of supported\n  browsers can be found `in the README on GitHub <https://github.com/indico/indico#browser-support>`_,\n  but generally Indico now supports the last two versions of each major\n  browser (determined at release time), plus the current Firefox ESR.\n- Rewrite the room booking frontend to be more straightforward and\n  user-friendly. Check `our blog for details <https://getindico.io/indico/update/release/milestone/2019/02/22/indico-2-2-news.html>`_.\n\nImprovements\n^^^^^^^^^^^^\n\n- Rework the event log viewer to be more responsive and not freeze the\n  whole browser when there are thousands of log entries\n- Add shortcut to next upcoming event in a category (:issue:`3388`)\n- Make registration period display less confusing (:issue:`3359`)\n- Add edit button to custom conference pages (:issue:`3284`)\n- Support markdown in survey questions (:issue:`3366`)\n- Improve event list in case of long event titles (:issue:`3607`,\n  thanks :user:`nop33`)\n- Include event page title in the page's ``<title>`` (:issue:`3285`,\n  thanks :user:`bpedersen2`)\n- Add option to include subcategories in upcoming events (:issue:`3449`)\n- Allow event managers to override the name format used in the event\n  (:issue:`2455`)\n- Add option to not clone venue/room of an event\n- Show territory/country next to the language name (:issue:`3968`)\n- Add more sorting options to book of abstracts (:issue:`3429`, thanks\n  :user:`bpedersen2`)\n- Add more formatting options to book of abstracts (:issue:`3335`, thanks\n  :user:`bpedersen2`)\n- Improve message when the call for abstracts is scheduled to open but\n  hasn't started yet\n- Make link color handling for LaTeX pdfs configurable (:issue:`3283`,\n  thanks :user:`bpedersen2`)\n- Preserve displayed order in contribution exports that do not apply\n  any specific sorting (:issue:`4005`)\n- Add author list button to list of papers (:issue:`3978`)\n\nBugfixes\n^^^^^^^^\n\n- Fix incorrect order of session blocks inside timetable (:issue:`2999`)\n- Add missing email validation to contribution CSV import (:issue:`3568`,\n  thanks :user:`Kush22`)\n- Do not show border after last item in badge designer toolbar\n  (:issue:`3607`, thanks :user:`nop33`)\n- Correctly align centered footer links (:issue:`3599`, thanks :user:`nop33`)\n- Fix top/right alignment of session bar in event display view (:issue:`3599`,\n  thanks :user:`nop33`)\n- Fix error when trying to create a user with a mixed-case email\n  address in the admin area\n- Fix event import if a user in the exported data has multiple email\n  addresses and they match different users\n- Fix paper reviewers getting notifications even if their type of reviewing\n  has been disabled (:issue:`3852`)\n- Correctly handle merging users in the paper reviewing module (:issue:`3895`)\n- Show correct number of registrations in management area (:issue:`3935`)\n- Fix sorting book of abstracts by board number (:issue:`3429`, thanks\n  :user:`bpedersen2`)\n- Enforce survey submission limit (:issue:`3256`)\n- Do not show \"Mark as paid\" button and checkout link while a transaction\n  is pending (:issue:`3361`, thanks :user:`driehle`)\n- Fix 404 error on custom conference pages that do not have any ascii chars\n  in the title (:issue:`3998`)\n- Do not show pending registrants in public participant lists (:issue:`4017`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Use webpack to build static assets\n- Add React+Redux for new frontend modules\n- Enable modern ES201x features\n\n\n----\n\n\nVersion 2.1.11\n--------------\n\n*Released on October 16, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix more places where LaTeX input was not correctly sanitized. While the biggest\n  security impact (reading local files) has already been mitigated when fixing the\n  initial vulnerability in the previous release, it is still strongly recommended\n  to update.\n\n\nVersion 2.1.10\n--------------\n\n*Released on October 08, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Strip ``@``, ``+``, ``-`` and ``=`` from the beginning of strings when exporting\n  CSV files to avoid `security issues <https://www.owasp.org/index.php/CSV_Injection>`_\n  when opening the CSV file in Excel\n- Use 027 instead of 000 umask when temporarily changing it to get the current umask\n- Fix LaTeX sanitization to prevent malicious users from running unsafe LaTeX commands\n  through specially crafted abstracts or contribution descriptions, which could lead to\n  the disclosure of local file contents\n\n\nVersion 2.1.9\n-------------\n\n*Released on August 26, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Fix bug in calendar view, due to timezones (:issue:`3903`)\n- Remove dependency on ``pyatom``, which has vanished from PyPI (:issue:`4045`)\n\n\nVersion 2.1.8\n-------------\n\n*Released on March 12, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add A6 to page size options (:issue:`3793`)\n\nBugfixes\n^^^^^^^^\n\n- Fix celery/redis dependency issue (:issue:`3809`)\n\n\nVersion 2.1.7\n-------------\n\n*Released on January 24, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add setting for the default contribution duration of an event\n  (:issue:`3446`)\n- Add option to copy abstract attachments to contributions when\n  accepting them (:issue:`3732`)\n\nBugfixes\n^^^^^^^^\n\n- Really fix the oauthlib conflict (was still breaking in some cases)\n\n\nVersion 2.1.6\n-------------\n\n*Released on January 15, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Allow adding external users as speakers/chairpersons (:issue:`3562`)\n- Allow adding external users to event ACLs (:issue:`3562`)\n- Pin requests-oauthlib version to avoid dependency conflict\n\n\nVersion 2.1.5\n-------------\n\n*Released on December 06, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Render the reviewing state of papers in the same way as abstracts\n  (:issue:`3665`)\n\nBugfixes\n^^^^^^^^\n\n- Use correct speaker name when exporting contributions to spreadsheets\n- Use friendly IDs in abstract attachment package folder names\n- Fix typo in material package subcontribution folder names\n- Fix check on whether registering for an event is possible\n- Show static text while editing registrations (:issue:`3682`)\n\n\nVersion 2.1.4\n-------------\n\n*Released on September 25, 2018*\n\nBugfixes\n^^^^^^^^\n\n- Let managers download tickets for registrants even if all public ticket\n  downloads are disabled (:issue:`3493`)\n- Do not count deleted registrations when printing tickets from the badge\n  designer page\n- Hide \"Save answers\" in surveys while not logged in\n- Fix importing event archives containing registrations with attachments\n- Fix display issue in participants table after editing data (:issue:`3511`)\n- Fix errors when booking rooms via API\n\n\nVersion 2.1.3\n-------------\n\n*Released on August 09, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Only return timetable entries for the current session when updating a\n  session through the timetable (:issue:`3474`, thanks :user:`glunardi`\n  for reporting)\n- Prevent session managers/coordinators from modifying certain timetable\n  entries or scheduling contributions not assigned to their session\n- Restrict access to timetable entry details to users who are authorized\n  to see them\n\nImprovements\n^^^^^^^^^^^^\n\n- Improve survey result display (:issue:`3486`)\n- Improve email validation for registrations (:issue:`3471`)\n\nBugfixes\n^^^^^^^^\n\n- Point to correct day in \"edit session timetable\" link (:issue:`3419`)\n- Fix error when exporting abstracts with review questions to JSON\n- Point the timetable to correct day in the session details\n- Fix massive performance issue on the material package page in big events\n- Fix error when using the checkin app to mark someone as checked in\n  (:issue:`3473`, thanks :user:`femtobit`)\n- Fix error when a session coordinator tries changing the color of a break\n  using the color picker in the balloon's tooltip\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n- Add some new signals and template hooks to the registration module\n\n\nVersion 2.1.2\n-------------\n\n*Released on June 11, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Show email address for non-anonymous survey submissions\n  (:issue:`3258`)\n\nBugfixes\n^^^^^^^^\n\n- Show question description in survey results (:issue:`3383`)\n- Allow paper managers to submit paper revisions\n- Fix error when not providing a URL for privacy policy or terms\n- Use consistent order for privacy/terms links in the footer\n- Fix cloning of locked events\n\n\nVersion 2.1.1\n-------------\n\n*Released on May 31, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a privacy policy page linked from the footer (:issue:`1415`)\n- Terms & Conditions can now link to an external URL\n- Show a warning to all admins if Celery is not running or outdated\n- Add registration ID placeholder for badges (:issue:`3370`, thanks\n  :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Fix alignment issue in the \"Indico Weeks View\" timetable theme\n  (:issue:`3367`)\n- Reset visibility when cloning an event to a different category\n  (:issue:`3372`)\n\n\nVersion 2.1\n-----------\n\n*Released on May 16, 2018*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add event roles, which are similar to local groups but within the\n  scope of an event. They can be used both for assigning permissions\n  within the event and also for quickly seeing which user has which\n  role (such as \"Program Committee\" in the event\n- Add new *Participant Roles* (previously called *Roles*) which\n  now shows each person's custom event roles and whether they have\n  registered for the event in addition to the the default roles\n  (speaker, chairperson, etc.)\n- Add visibility options to custom abstract/contribution fields\n  so they can be restricted to be editable/visible only for event\n  managers or authors/submitters instad of anyone who can see the\n  abstract/contribution\n- Provide new interface to import registations/contributions from a CSV\n  file (:issue:`3144`)\n- Rework how access/permissions are managed. Now all access and management\n  privileges can be assigned from a single place on the protection\n  management page.\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow specifying a default session for a track which will then be\n  used by default when accepting an abstract in that track (:issue:`3069`)\n- Allow marking contribution types as private so they cannot be selected\n  by users submitting an abstract (:issue:`3138`)\n- Add support for boolean (yes/no) and freetext questions in abstract\n  reviewing (:issue:`3175`)\n- Support event cloning with monthly recurrence on the last day of the\n  month (:issue:`1580`)\n- Add support for custom session types (:issue:`3189`)\n- Move poster session flag from session settings to session type settings\n- Add contribution cloning within an event (:issue:`3207`)\n- Add option to include the event description in reminder emails\n  (:issue:`3157`, thanks :user:`bpedersen2`)\n- Pin default themes to the top for event managers (:issue:`3166`)\n- Add user setting whether to show future events or not by default in a\n  category. Also keep the per-category status in the session (:issue:`3233`,\n  thanks :user:`bpedersen2`)\n- Keep page titles in sync with conference menu item titles (:issue:`3236`)\n- Add option to hide an attachment folder in the display areas of an event\n  (:issue:`3181`, thanks :user:`bpedersen2`)\n- Improve flower redirect URI generation (:issue:`3187`, thanks\n  :user:`bpedersen2`)\n- When blocking a user account, the user will be forcefully logged out in\n  addition to being prevented from logging in\n- Show track-related columns in abstract list only if there are tracks\n  defined for the event (:issue:`2813`)\n- Show warning box to inform that reviewer roles do not apply when an event\n  has no tracks (:issue:`2919`)\n- Allow specifying min/max length for registration form text fields\n  (:issue:`3193`, thanks :user:`bpedersen2`)\n- Add settings to configure the scale of 'rating' questions in paper\n  reviewing\n- Show a nicer error message when entering an excessively high base\n  registration fee (:issue:`3260`)\n- Use proper British English for person titles (:issue:`3279`)\n- Add event keywords in meta tags (:issue:`3262`, thanks :user:`bpedersen2`)\n- Improve sorting by date fields in the registrant list\n- Use the user's preferred name format in more places\n- Add \"back to conference\" link when viewing a conference timetable using\n  a meeting theme (:issue:`3297`, thanks :user:`bpedersen2`)\n- Allow definition lists in places where Markdown or HTML is accepted\n  (:issue:`3325`)\n- Include event date/time in registration emails (:issue:`3337`)\n- Allow div/span/pre with classes when writing raw HTML in CKEditor\n  (:issue:`3332`, thanks :user:`bpedersen2`)\n- Sort abstract authors/speakers by last name (:issue:`3340`)\n- Improve machine-readable metadata for events and categories\n  (:issue:`3287`, thanks :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Fix selecting a person's title in a different language than English\n- Fix display issue in \"now happening\" (:issue:`3278`)\n- Fix error when displaying the value of an accommodation field in the\n  registrant list and someone has the \"no accomodation\" option selected\n  (:issue:`3272`, thanks :user:`bpedersen2`)\n- Use the 'Reviewing' realm when logging actions from the abstract/paper\n  reviewing modules\n- Fix error when printing badges/posters with empty static text fields\n  (:issue:`3290`)\n- Fix error when generating a PDF timetable including contribution\n  abstracts (:issue:`3289`)\n- Do not require management access to a category to select a badge\n  template from it as a backside.\n- Fix breadcrumb metadata (:issue:`3321`, thanks :user:`bpedersen2`)\n- Fix error when accessing certain registration pages without an active\n  registration\n- Use event timezone when displaying event log entries (:issue:`3354`)\n- Correctly render most markdown elements when generating a programme PDF\n  (:issue:`3351`)\n- Do not send any emails when trying to approve/reject a registration\n  that is not pending (:issue:`3358`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Rename *Roles* in ACL entries to *Permissions*.  This especially affects\n  the ``can_manage`` method whose ``role`` argument has been renamed to\n  ``permission`` (:issue:`3057`)\n- Add new ``registration_checkin_updated`` signal that can be used by\n  plugins to perform an action when the checkin state of a registration\n  changes (:issue:`3161`, thanks :user:`bpedersen2`)\n- Add new signals that allow plugins to run custom code at the various\n  stages of the ``RH`` execution and replace/modify the final response\n  (:issue:`3227`)\n- Add support for building plugin wheels with date/commit-suffixed\n  version numbers (:issue:`3232`, thanks :user:`driehle`)\n\n\n----\n\n\nVersion 2.0.3\n-------------\n\n*Released on March 15, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Do not show contribution information (metadata including title, speakers\n  and a partial description) in the contribution list unless the user has\n  access to a contribution\n\nImprovements\n^^^^^^^^^^^^\n\n- Show more suitable message when a service request is auto-accepted\n  (:issue:`3264`)\n\n\nVersion 2.0.2\n-------------\n\n*Released on March 07, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `bleach <https://github.com/mozilla/bleach>`_ to fix an XSS vulnerability\n\nImprovements\n^^^^^^^^^^^^\n\n- Warn when editing a speaker/author would result in duplicate emails\n\nBugfixes\n^^^^^^^^\n\n- Take 'center' orientation of badge/poster backgrounds into account\n  (:issue:`3238`, thanks :user:`bpedersen2`)\n- Fail nicely when trying to register a local account with an already-used\n  email confirmation link (:issue:`3250`)\n\n\nVersion 2.0.1\n-------------\n\n*Released on February 6, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add support for admin-only designer placeholders. Such placeholders\n  can be provided by custom plugins and only be used in the designer\n  by Indico admins (:issue:`3210`)\n- Sort contribution types alphabetically\n- Add folding indicators when printing foldable badges (:issue:`3216`)\n\nBugfixes\n^^^^^^^^\n\n- Fix LaTeX rendering issue when consecutive lines starting with ``[``\n  were present (:issue:`3203`)\n- Do not allow managers to retrieve tickets for registrants for whom\n  ticket access is blocked by a plugin (:issue:`3208`)\n- Log a warning instead of an exception if the Indico version check\n  fails (:issue:`3209`)\n- Wrap long lines in event log entries instead of truncating them\n- Properly show message about empty agenda in reminders that have\n  \"Include agenda\" enabled but an empty timetable\n- Fix overly long contribution type names pushing edit/delete buttons\n  outside the visible area (:issue:`3215`)\n- Only apply plugin-imposed ticket download restrictions for tickets,\n  not for normal badges.\n- Fix switching between badge sides in IE11 (:issue:`3214`)\n- Do not show poster templates as possible backsides for badges\n- Convert alpha-channel transparency to white in PDF backgrounds\n- Make number inputs big enough to show 5 digits in chrome\n- Sort chairperson list on lecture pages\n- Remove whitespace before commas in speaker lists\n- Hide author UI for subcontribution speakers (:issue:`3222`)\n\n\nVersion 2.0\n-----------\n\n*Released on January 12, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add ``author_type`` and ``is_speaker`` fields for persons in the JSON\n  abstract export\n- Add legacy redirect for ``conferenceTimeTable.py``\n\nBugfixes\n^^^^^^^^\n\n- Fix unicode error when searching external users from the \"Search\n  Users\" dialog\n- Fix missing event management menu/layout when creating a material\n  package from the event management area\n- Fix error when viewing a contribution with co-authors\n- Fix sorting of registration form items not working anymore after\n  moving/disabling some items\n- Fix error after updating from 2.0rc1 if there are cached Mako\n  templates\n- Fix error when retrieving an image referenced in an abstract fails\n- Fix rendering of time pickers in recent Firefox versions (:issue:`3194`)\n- Fix error when trying to use the html serializer with the timetable API\n- Fix error when receiving invalid payment events that should be ignored\n- Fix last occurrence not being created when cloning events (:issue:`3192`)\n- Fix multiple links in the same line being replaced with the first one\n  when converting abstracts/contributions to PDF (:issue:`2816`)\n- Fix PDF generation when there are links with ``&`` in the URL\n- Fix incorrect spacing in abstract author/speaker lists (:issue:`3205`)\n\n\nVersion 2.0rc2\n--------------\n\n*Released on December 8, 2017*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow changing the reloader used by the dev server (:issue:`3150`)\n\nBugfixes\n^^^^^^^^\n\n- Do not show borders above/below the message in registration emails\n  unless both the header and body blocks are used (:issue:`3151`)\n- Roll-back the database transaction when an error occurs.\n- Fix rendering of the LaTeX error box (:issue:`3163`)\n- Fix \"N/A\" being displayed in a survey result if 0 is entered in\n  a number field\n- Fix \"N/A\" not being displayed in a survey result if nothing is\n  selected in a multi-choice select field\n- Fix error when using ``target_*`` placeholders in abstract\n  notification emails for actions other than \"Merged\" (:issue:`3171`)\n- Show full track title in tooltips on abstract pages\n- Show correct review indicators when a reviewer still has to review\n  an abstract in a different track\n- Fix unicode error when searching external users in an LDAP backend\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Remove ``SCSS_DEBUG_INFO`` config option.\n\n\nVersion 2.0rc1\n--------------\n\n*Released on November 10, 2017*\n\nImprovements\n^^^^^^^^^^^^\n\n- Hide category field in event creation dialog if there are no\n  subcategories (:issue:`3112`)\n- Remove length limit from registration form field captions (:issue:`3119`)\n- Use semicolons instead of commas as separator when exporting list\n  values (such as multi-select registration form fields) to CSV or\n  Excel (:issue:`3060`)\n- Use custom site title in page title (:issue:`3018`)\n- Allow manually entering dates in datetime fields (:issue:`3136`)\n- Send emails through a celery task. This ensures users do not get\n  an error if the mail server is temporarily unavailable. Sending an\n  email is also retried for a while in case of failure. In case of a\n  persistent failure the email is dumped to the temp directory and\n  can be re-sent manually using the new ``indico resend_email``\n  command (:issue:`3121`)\n- Reject requests containing NUL bytes in the query string (:issue:`3142`)\n\nBugfixes\n^^^^^^^^\n\n- Do not intercept HTTP exceptions containing a custom response.\n  When raising such exceptions we do not want the default handling\n  but rather send the custom response to the client.\n- Do not apply margin for empty root category sidebar (:issue:`3116`,\n  thanks :user:`nop33`)\n- Fix alignment of info-grid items on main conference page (:issue:`3126`)\n- Properly align the label of the attachment folder title field\n- Fix some rare unicode errors during exception handling/logging\n- Clarify messages in session block rescheduling dialogs (:issue:`3080`)\n- Fix event header bar in IE11 (:issue:`3135`)\n- Fix footer on login page (:issue:`3132`)\n- Use correct module name for abstract notification emails in the event log\n- Remove linebreaks from email subject in paper review notifications\n- Fix extra padding in the CFA roles dialog (:issue:`3129`)\n- Do not show an extra day in timetable management if an event begins\n  before a DST change\n- Disable caching when retrieving the list of unscheduled contributions\n- Process placeholders in the subject when emailing registrants\n- Fix Shibboleth login with non-ascii names (:issue:`3143`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add new ``is_ticket_blocked`` signal that can be used by plugins to\n  disable ticket downloads for a registration.\n\n\nVersion 2.0a1\n-------------\n\n*Released on October 20, 2017*\n\nThis is the first release of the 2.0 series, which is an almost complete\nrewrite of Indico based on a modern software stack and PostgreSQL.\n", "{% macro get_attachment_icon(attachment) -%}\n    {%- if attachment.type.name == 'link' -%}\n        icon-link\n    {%- else -%}\n        {{ icon_from_mimetype(attachment.file.content_type, 'icon-file-filled') }}\n    {%- endif -%}\n{%- endmacro %}\n\n{% macro render_attachment(attachment, has_label=false, classes='') %}\n    {% set previewable = (attachment.file.is_previewable and not g.static_site) or false %}\n    {% set visible_link = attachment.type.name == 'link' and (not attachment.is_protected or attachment.can_access(session.user)) %}\n    <a class=\"attachment {{ get_attachment_icon(attachment) }} {% if attachment.is_self_protected %}is-protected{% endif %} {% if has_label %}has-label{% endif %} {%- if previewable %} js-preview-dialog{% endif %} {{ classes }}\"\n       data-previewable=\"{{ previewable|tojson }}\"\n       data-attachment-id=\"{{ attachment.id }}\"\n       href=\"{{ attachment.link_url if visible_link else attachment.download_url }}\" target=\"_blank\"\n       rel=\"noopener noreferrer\"\n       title=\"{{ attachment.description or attachment.title }}\n              {%- if attachment.is_self_protected %} ({% trans %}Protected{% endtrans %}){% endif %}\">\n        {%- if not has_label -%}\n            <span class=\"title\">{{ attachment.title }}</span>\n        {%- endif -%}\n    </a>\n{% endmacro %}\n\n{% macro _attachment_row(attachment, management=true) %}\n    <tr>\n        <td>\n            {{ render_attachment(attachment) }}\n            {%- if attachment.is_self_protected %}\n                <i class=\"icon-lock-center custom-protection\"\n                   title=\"{% trans %}The access to this material is restricted, regardless of the protection scheme of\n                          the parent.{% endtrans %}\"></i>\n            {% endif %}\n        </td>\n        {% if management -%}\n            <td class=\"actions hide-if-locked\">\n                <a class=\"icon-edit js-dialog-action\"\n                   data-href=\"{{ url_for('attachments.modify_attachment', attachment) }}\"\n                   data-title=\"\n                    {%- if attachment.type.name == 'file' -%}\n                        {% trans name=attachment.title %}Edit file &quot;{{ name }}&quot;{% endtrans %}\n                    {% else %}\n                        {% trans name=attachment.title %}Edit link &quot;{{ name }}&quot;{% endtrans %}\n                    {% endif -%}\"\n                   title=\"\n                    {%- if attachment.type.name == 'file' -%}\n                        {% trans %}Edit file{% endtrans %}\n                    {% else %}\n                        {% trans %}Edit link{% endtrans %}\n                    {% endif -%}\"></a>\n                <a href=\"#\" class=\"icon-remove js-delete\"\n                   data-method=\"DELETE\"\n                   data-href=\"{{ url_for('attachments.delete_attachment', attachment) }}\"\n                   data-title=\"{% trans name=attachment.title %}Remove {{ name }}?{% endtrans %}\"\n                   title=\"{% trans %}Remove{% endtrans %}\"\n                   data-confirm=\"{% trans name=attachment.title -%}\n                       Are you sure you want to remove &quot;{{ name }}&quot;?<br>\n                       This will remove the attachment permanently.\n                       {%- endtrans %}\">\n                </a>\n            </td>\n            <td class=\"date\">{{ attachment.modified_dt|format_datetime('short') }}</td>\n        {%- endif %}\n    </tr>\n{% endmacro %}\n\n{% macro _folder_row(folder, management=true) -%}\n    <tr class=\"expandable {%- if not folder.attachments %} collapsed{% endif %}\">\n        <td>\n            <span>{{ folder.title }}</span>\n            {%- if folder.is_self_protected %}\n                <i class=\"icon-lock-center custom-protection\"\n                   title=\"{% trans %}The access to this folder is restricted, regardless of the protection scheme of\n                          the parent.{% endtrans %}\"></i>\n            {% endif %}\n            {% if folder.is_hidden and management %}\n                <i class=\"icon-eye-blocked\"\n                   title=\"{% trans %}This folder is always hidden in the frontend.{% endtrans %}\"></i>\n            {% endif %}\n            {% if folder.is_always_visible and management %}\n                <i class=\"icon-eye\"\n                   title=\"{% trans %}This folder is always visible in the frontend.{% endtrans %}\"></i>\n            {% endif %}\n        </td>\n        {% if management -%}\n            <td class=\"actions hide-if-locked\">\n                <a class=\"icon-edit js-dialog-action\"\n                           data-href=\"{{ url_for('attachments.edit_folder', folder) }}\"\n                           data-title=\"{% trans name=folder.title %}Edit folder: {{ name }}{% endtrans %}\"\n                           title=\"{% trans %}Edit folder{% endtrans %}\"></a>\n                <a href=\"#\" class=\"icon-remove js-delete\"\n                   data-method=\"DELETE\"\n                   data-href=\"{{ url_for('attachments.delete_folder', folder) }}\"\n                   data-title=\"{% trans name=folder.title %}Remove {{ name }}?{% endtrans %}\"\n                   title=\"{% trans %}Remove{% endtrans %}\"\n                   data-confirm=\"{% trans name=folder.title -%}\n                       Are you sure you want to remove &quot;{{ name }}&quot;?<br>\n                       This will remove the folder and its contents permanently.\n                   {%- endtrans %}\">\n                </a>\n            </td>\n            <td class=\"date\"></td>\n        {%- endif %}\n    </tr>\n    <tr class=\"sub-tree\">\n        <td {%- if management %} colspan=\"3\"{% endif %}>\n            {# Div to have a smooth slide up and down of the sub-tree #}\n            <div {%- if not folder.attachments %} style=\"display: none;\"{% endif %}>\n                <table class=\"tree\">\n                {{- _render_tree(folder.attachments, false, management=management) -}}\n                </table>\n            </div>\n        </td>\n    </tr>\n{%- endmacro %}\n\n{% macro _render_tree(nodes, is_folder, management=true) -%}\n    {%- for sub_node in nodes -%}\n        {% if is_folder %}\n            {{ _folder_row(sub_node, management=management) }}\n        {% else %}\n            {{ _attachment_row(sub_node, management=management) }}\n        {% endif %}\n    {%- else -%}\n        <tr class=\"empty\">\n            <td {%- if management %} colspan=\"3\"{% endif %}> {% trans %}empty folder{% endtrans %}</td>\n        </tr>\n    {%- endfor -%}\n{%- endmacro %}\n\n{% macro render_attachments(attachments, linked_object=None, management=true) -%}\n    {%- if attachments -%}\n        <table class=\"tree\">\n            {%- if attachments.files -%}\n                {{ _render_tree(attachments.files, false, management=management) }}\n            {%- endif -%}\n            {%- if attachments.folders -%}\n                {{ _render_tree(attachments.folders, true, management=management) }}\n            {%- endif -%}\n        </table>\n    {%- else -%}\n        <span class=\"empty\">{% trans %}There are no materials yet.{% endtrans %}</span>\n    {%- endif -%}\n    {% if management %}\n        <div class=\"i-box-footer text-right js-attachment-actions hide-if-locked\">\n            <button class=\"i-button icon-folder-plus js-dialog-action\"\n                    data-href=\"{{ url_for('attachments.create_folder', linked_object) }}\"\n                    data-title=\"{% trans %}Create a new folder{% endtrans %}\">\n                {% trans %}New folder{% endtrans -%}\n            </button>\n        </div>\n    {% endif %}\n{%- endmacro %}\n\n{% macro attachments_page(linked_object, linked_object_type, attachments) %}\n    <div class=\"flashed-messages\"></div>\n\n    <div class=\"attachment-editor\">\n        <div class=\"action-box fixed-width hide-if-locked\">\n            <div class=\"section\">\n                <span class=\"icon icon-upload\"></span>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% if linked_object_type == 'category' %}\n                            {% trans %}Add materials to the category.{% endtrans %}\n                        {% elif linked_object_type == 'event' %}\n                            {% trans %}Add materials to the event.{% endtrans %}\n                        {% elif linked_object_type == 'session' %}\n                            {% trans %}Add materials to the session.{% endtrans %}\n                        {% elif linked_object_type == 'contribution' %}\n                            {% trans %}Add materials to the contribution.{% endtrans %}\n                        {% elif linked_object_type == 'subcontribution' %}\n                            {% trans %}Add materials to the subcontribution.{% endtrans %}\n                        {% endif %}\n                    </div>\n                    <div>{% trans %}You can attach files or links using the buttons on the right.{% endtrans %}</div>\n                </div>\n                <div class=\"toolbar\">\n                    <div class=\"group\">\n                        <button class=\"i-button icon-file js-dialog-action\"\n                                data-href=\"{{ url_for('attachments.upload', linked_object) }}\"\n                                data-title=\"{%- trans %}Upload files{% endtrans -%}\">\n                            {%- trans %}Upload files{% endtrans -%}\n                        </button>\n                        <button class=\"i-button icon-link js-dialog-action\"\n                                data-href=\"{{ url_for('attachments.add_link', linked_object) }}\"\n                                data-title=\"{%- trans %}Add link{% endtrans -%}\">\n                            {%- trans %}Add link{% endtrans -%}\n                        </button>\n                        {{ template_hook('attachment-sources', linked_object=linked_object) }}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        {% if linked_object_type == 'event' and not request.is_xhr and linked_object.can_manage(session.user) %}\n            <div class=\"action-box fixed-width\">\n                <div class=\"section\">\n                    <span class=\"icon icon-package-download\"></span>\n                    <div class=\"text\">\n                        <div class=\"label\">\n                            {% trans %}Generate a material package.{% endtrans %}\n                        </div>\n                        <div>{% trans %}You can generate a ZIP file containing materials from the event.{% endtrans %}</div>\n                    </div>\n                    <div class=\"toolbar\">\n                        <a href=\"{{ url_for('attachments.package_management', linked_object) }}\" class=\"i-button icon-package-download\">\n                            {%- trans %}Material Package{% endtrans -%}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        {% endif %}\n\n        <div class=\"i-box fixed-width attachments-container\" id=\"attachments-container\">\n            {{ render_attachments(attachments, linked_object) }}\n        </div>\n    </div>\n    <script>\n        setupAttachmentEditor();\n    </script>\n{% endmacro  %}\n", "{% extends 'layout/management_page.html' %}\n\n{% macro delete_category_button(category, classes=\"i-button\") %}\n    {% set confirmation_message -%}\n        {% trans category=category.title %}Do you really want to delete the category \"{{ category }}\"?{% endtrans %}\n    {%- endset %}\n    {% if category.is_empty %}\n        {% set tooltip -%}\n            {% trans %}Delete category{% endtrans %}\n        {%- endset %}\n    {% else %}\n        {% set classes = classes + \" disabled\" %}\n        {% set tooltip -%}\n            {% trans %}This category cannot be deleted because it is not empty.{% endtrans %}\n        {%- endset %}\n    {% endif %}\n    <a class=\"{{ classes }} icon-remove js-delete-category\"\n       title=\"{{ tooltip|forceescape }}\"\n       data-confirm=\"{{ confirmation_message|forceescape }}\"\n       data-title=\"{% trans %}Delete category{% endtrans %}\"\n       data-href=\"{{ url_for('categories.delete', category) }}\"\n       data-method=\"POST\"></a>\n{% endmacro %}\n\n{% macro move_category_button(category, classes=\"i-button\") %}\n    <a class=\"{{ classes }} icon-transmission js-move-category\"\n       title=\"{% trans %}Move to another category{% endtrans %}\"\n       data-href=\"{{ url_for('categories.move', category) }}\"\n       data-category-id=\"{{ category.id }}\"></a>\n{% endmacro %}\n\n{% block banner_title %}\n    {{ category.title }}\n{% endblock %}\n\n{% block banner_actions %}\n    <div class=\"toolbar\">\n        <div class=\"group\">\n            {% if not category.is_root %}\n                {{ move_category_button(category, classes=\"i-button borderless\") }}\n                {{ delete_category_button(category, classes=\"i-button borderless\") }}\n            {% endif %}\n            {{ template_hook('category-management-after-banner-actions', category=category) }}\n        </div>\n    </div>\n    {% if not category.is_root %}\n        <script>\n            setupCategoryMoveButton({{ category.parent.id }});\n        </script>\n    {% endif %}\n{% endblock %}\n\n{% block side_menu %}\n    {{ render_sidemenu('category-management-sidemenu', category=category, active_item=active_menu_item) }}\n{% endblock %}\n\n{% block display_view_button %}\n    <div class=\"group\">\n        <a href=\"{{ category.url }}\"\n           class=\"icon-switchon highlight i-button\"\n           title=\"{% trans %}See the display page of the category{% endtrans %}\">\n            <span>{%- trans %}Switch to display view{% endtrans -%}</span>\n        </a>\n    </div>\n{% endblock %}\n", "{% from 'events/abstracts/reviewing/_common.html' import render_tracks, render_track %}\n{% from 'events/reviews/_common.html' import render_edited_hint, render_user_avatar, render_summary_state %}\n{% from 'events/_affiliation.html' import render_affiliation %}\n\n\n{% macro render_abstract_info(abstract) %}\n    <div class=\"submission-title flexrow\">\n        <h3 class=\"f-self-stretch js-mathjax\">\n            {{ abstract.title }}\n            <span class=\"submission-id\">\n                #{{ abstract.friendly_id }}\n            </span>\n        </h3>\n        <div class=\"toolbar thin\">\n            {% set can_manage = abstract.event.can_manage(session.user, permission='abstracts') %}\n            {% if abstract.submitter == session.user or can_manage %}\n                <div class=\"group\">\n                    {% if abstract.can_withdraw(session.user, check_state=true) %}\n                        {% set message %}\n                            {% trans %}Do you really want to withdraw this abstract?{% endtrans %}\n                            {% if abstract.contribution %}\n                                <br>\n                                {%- trans -%}\n                                    Withdrawing this abstract will permanently delete its corresponding contribution.\n                                {%- endtrans -%}\n                            {% elif not can_manage %}\n                                <br>\n                                {% trans %}This operation is irreversible.{% endtrans %}\n                            {% endif %}\n                        {% endset %}\n                        <button class=\"i-button text-color color-on-hover danger hide-if-locked\"\n                                title=\"{% trans %}Withdraw abstract{% endtrans %}\"\n                                data-title=\"{% trans %}Withdraw Abstract{% endtrans %}\"\n                                data-confirm=\"{{ message }}\"\n                                data-href=\"{{ url_for('.withdraw_abstract', abstract) }}\"\n                                data-method=\"POST\"\n                                data-update=\"#reviewing-page\"\n                                data-replace-update>\n                            {% trans %}Withdraw{% endtrans %}\n                        </button>\n                    {% elif abstract.state.name == 'accepted' %}\n                        {% set message %}\n                            {% trans -%}\n                                You cannot withdraw this abstract as it has already been accepted.\n                                Please contact the event organizers if you want to withdraw the abstract anyway.\n                            {%- endtrans %}\n                        {% endset %}\n                        <button class=\"i-button disabled\"\n                                title=\"{{ message }}\">\n                            {% trans %}Withdraw{% endtrans %}\n                        </button>\n                    {% elif abstract.state.name == 'withdrawn' and can_manage %}\n                        <button class=\"i-button accept icon-lamp hide-if-locked\"\n                                title=\"{% trans %}This abstract has been withdrawn but can be restored.{% endtrans %}\"\n                                data-title=\"{% trans %}Restore Abstract{% endtrans %}\"\n                                data-confirm=\"{% trans %}Do you really want to restore this abstract?{% endtrans %}\"\n                                data-href=\"{{ url_for('.reset_abstract_state', abstract) }}\"\n                                data-method=\"POST\"\n                                data-update=\"#reviewing-page\"\n                                data-replace-update>\n                            {% trans %}Restore{% endtrans %}\n                        </button>\n                    {% endif %}\n                </div>\n            {% endif %}\n            {% if can_manage or abstract.user_owns(session.user) %}\n                <div class=\"group\">\n                    {% if abstract.can_edit(session.user) %}\n                        <button class=\"i-button icon-edit hide-if-locked\"\n                                title=\"{% trans %}Edit abstract{% endtrans %}\"\n                                data-href=\"{{ url_for('.edit_abstract', abstract) }}\"\n                                data-title=\"{% trans %}Edit abstract{% endtrans %}\"\n                                data-ajax-dialog\n                                data-reload-after>\n                        </button>\n                    {% elif abstract.public_state.name == 'withdrawn' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it was withdrawn{% endtrans %}\">\n                        </button>\n                    {% elif abstract.public_state.name == 'under_review' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it is already under review{% endtrans %}\">\n                        </button>\n                    {% elif abstract.public_state.name != 'awaiting' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it has already been processed{% endtrans %}\">\n                        </button>\n                    {% elif abstract.modification_ended %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because the modification deadline has passed{% endtrans %}\">\n                        </button>\n                    {% else %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}You are not authorized to edit this abstract{% endtrans %}\">\n                        </button>\n                    {% endif %}\n                </div>\n            {% endif %}\n            {% if indico_config.LATEX_ENABLED and abstract.can_see_reviews(session.user) %}\n                <div class=\"group\">\n                    <button class=\"i-button arrow icon-file-pdf js-dropdown\" data-toggle=\"dropdown\"></button>\n                    <ul class=\"i-dropdown\">\n                        <li>\n                            <a href=\"{{ url_for('.display_abstract_pdf_export', abstract) }}\">PDF</a>\n                        </li>\n                        <li>\n                            <a href=\"{{ url_for('.manage_abstract_pdf_export', abstract) }}\">\n                                {%- trans %}PDF with reviews{% endtrans -%}\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            {% elif indico_config.LATEX_ENABLED %}\n                <div class=\"group\">\n                    <a href=\"{{ url_for('.display_abstract_pdf_export', abstract) }}\"\n                       class=\"i-button icon-file-pdf\"\n                       title=\"{% trans %}Download abstract submission in PDF{% endtrans %}\"></a>\n                </div>\n            {% endif %}\n        </div>\n    </div>\n\n    <div id=\"abstract-public\">\n        {{ _render_abstract_summary(abstract) }}\n        {% if abstract.state.name != 'invited' or abstract.description %}\n            <div class=\"review-item-content abstract-content js-mathjax\">\n                <div class=\"abstract-authorship-block flexrow f-j-center\">\n                    <div class=\"abstract-authorship-label\">\n                        {% trans count=abstract.primary_authors|length -%}\n                            Author:\n                        {%- pluralize -%}\n                            Authors:\n                        {%- endtrans %}\n                    </div>\n                    <div class=\"abstract-authorship-list\">\n                        {{ abstract.primary_authors|map(attribute='name')|join(', ') }}\n                    </div>\n                </div>\n                {% if abstract.secondary_authors %}\n                    <div class=\"abstract-authorship-block flexrow f-j-center\">\n                        <div class=\"abstract-authorship-label\">\n                            {% trans count=abstract.secondary_authors|length -%}\n                                Co-author:\n                            {%- pluralize -%}\n                                Co-authors:\n                            {%- endtrans %}\n                        </div>\n                        <div class=\"abstract-authorship-list\">\n                            {{ abstract.secondary_authors|map(attribute='name')|join(', ') }}\n                        </div>\n                    </div>\n                {% endif %}\n                {{ abstract.description }}\n            </div>\n        {% endif %}\n    </div>\n{% endmacro %}\n\n\n{% macro render_submission_info(abstract, field_values) %}\n    <div class=\"i-timeline\">\n        <div class=\"i-timeline-item\">\n            {{ render_user_avatar(abstract.submitter) }}\n            <div class=\"i-timeline-item-box header-indicator-left\">\n                <div class=\"i-box-header\">\n                    <div class=\"f-self-stretch\">\n                        {% if abstract.state.name == 'invited' %}\n                            {% trans name=abstract.submitter.name -%}\n                                <strong>{{ name }}</strong> was invited to submit an abstract\n                            {%- endtrans %}\n                        {% else %}\n                            {% trans name=abstract.submitter.name -%}\n                                <strong>{{ name }}</strong> submitted this abstract\n                            {%- endtrans %}\n                        {% endif %}\n                        <time datetime=\"{{ abstract.submitted_dt.isoformat() }}\">\n                            {{- abstract.submitted_dt|format_human_date -}}\n                        </time>\n                        {% if abstract.modified_dt %}\n                            {{ render_edited_hint(abstract.modified_dt, abstract.modified_by) }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"i-box-content submission-info\">\n                    {{ _render_submission_info(abstract, field_values) }}\n                    {% if abstract.event.cfa.allow_attachments %}\n                        <div class=\"attachment-list\">\n                            {{ _render_attachments(abstract) }}\n                        </div>\n                    {% endif %}\n                </div>\n            </div>\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro render_abstract_judgment(abstract) %}\n    <div class=\"i-timeline-item\">\n        {{ render_user_avatar(abstract.judge) }}\n        <div class=\"i-timeline-item-box header-indicator-left\">\n            <div class=\"i-box-header flexrow\">\n                <div class=\"f-self-stretch\">\n                    {{ _render_abstract_judgment_action(abstract) }}\n                    <time datetime=\"{{ abstract.judgment_dt.isoformat() }}\">\n                        {{- abstract.judgment_dt|format_human_date -}}\n                    </time>\n                </div>\n                {% if abstract.event.can_manage(session.user, permission='abstracts') %}\n                    <div class=\"hide-if-locked\">\n                        <a title=\"{% trans %}Reset judgment{% endtrans %}\"\n                           data-href=\"{{ url_for('.reset_abstract_state', abstract) }}\"\n                           data-method=\"POST\"\n                           data-update=\"#reviewing-page\"\n                           data-replace-update\n                           data-title=\"{% trans %}Reset judgment{% endtrans %}\"\n                           data-confirm=\"{% trans %}Do you really want to reset the judgment? This operation is irreversible.{% endtrans %}\">\n                            <i class=\"red link icon undo\"></i>\n                        </a>\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                {% if abstract.state.name == 'accepted' %}\n                    {% if abstract.contribution %}\n                        {% set link_start = '<a href=\"%s\">'|safe|format(url_for('contributions.display_contribution', abstract.contribution)) %}\n                        {% set link_end = '</a>'|safe %}\n                    {% else %}\n                        {% set link_start = '' %}\n                        {% set link_end = '' %}\n                    {% endif %}\n                    {% if abstract.accepted_contrib_type and abstract.accepted_track %}\n                        {% trans type=abstract.accepted_contrib_type.name, track=render_track(abstract.accepted_track, full_title=true) -%}\n                            The abstract was accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>\n                            for track {{ track }} and a {{ link_start }}contribution{{ link_end }} was\n                            created in the event.\n                        {%- endtrans %}\n                    {% elif abstract.accepted_contrib_type %}\n                        {% trans type=abstract.accepted_contrib_type.name -%}\n                            The abstract was accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>\n                            and a {{ link_start }}contribution{{ link_end }} was created in the event.\n                        {%- endtrans %}\n                    {% elif abstract.accepted_track %}\n                        {% trans track=render_track(abstract.accepted_track, full_title=true)  -%}\n                            The abstract was accepted\n                            for track {{ track }} and a {{ link_start }}contribution{{ link_end }}\n                            was created in the event.\n                        {%- endtrans %}\n                    {% else %}\n                        {% trans -%}\n                            The abstract was accepted and a {{ link_start }}contribution{{ link_end }} was created in the event.\n                        {%- endtrans %}\n                    {% endif %}\n                {% elif abstract.state.name == 'rejected' %}\n                    {% trans %}The abstract was rejected.{% endtrans %}\n                {% elif abstract.state.name == 'merged' %}\n                    {% set link_start = '<a href=\"%s\">'|safe|format(url_for('.display_abstract', abstract.merged_into)) %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans other=abstract.merged_into.title -%}\n                        The abstract was merged into {{ link_start }}{{ other }}{{ link_end }}.\n                    {%- endtrans %}\n                {% elif abstract.state.name == 'duplicate' %}\n                    {% set link_start = '<a href=\"%s\">'|safe|format(url_for('.display_abstract', abstract.duplicate_of)) %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans other=abstract.duplicate_of.title -%}\n                        The abstract was marked as a duplicate of {{ link_start }}{{ other }}{{ link_end }}\n                    {%- endtrans %}\n                {% endif %}\n                {% if abstract.judgment_comment %}\n                    <div class=\"titled-rule\">\n                        {% trans %}Comment{% endtrans %}\n                    </div>\n                    {{ abstract.judgment_comment }}\n                {% endif %}\n            </div>\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro _render_submission_info(abstract, field_values) %}\n    {% if abstract.submitted_contrib_type %}\n        <div class=\"info-line\">\n            <label>\n                {% trans %}As contribution type:{% endtrans %}\n            </label>\n            {{ abstract.submitted_contrib_type.name }}\n        </div>\n    {% endif %}\n    {% if abstract.submitted_for_tracks %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.submitted_for_tracks|length -%}\n                    For track:\n                {%- pluralize -%}\n                    For tracks:\n                {%- endtrans -%}\n            </label>\n            {{ render_tracks(abstract.submitted_for_tracks, full_title=true) }}\n        </div>\n    {% endif %}\n    {% if abstract.primary_authors %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.primary_authors|length -%}\n                    Author:\n                {%- pluralize -%}\n                    Authors:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.primary_authors -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if abstract.secondary_authors %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.secondary_authors|length -%}\n                    Co-author:\n                {%- pluralize -%}\n                    Co-authors:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.secondary_authors -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if abstract.speakers %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.speakers|length -%}\n                    Speaker:\n                {%- pluralize -%}\n                    Speakers:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.speakers -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if field_values %}\n        <div class=\"titled-rule\">\n            {%- trans %}More information{% endtrans -%}\n        </div>\n        <dl class=\"custom-field-values\">\n            {% for value in field_values|sort(attribute='contribution_field.position') %}\n                {{ _render_field_value(value) }}\n            {% endfor %}\n        </dl>\n    {% endif %}\n    {% if abstract.submission_comment %}\n        <div class=\"titled-rule\">\n            {% trans %}Comment{% endtrans %}\n        </div>\n        <div class=\"text-not-important\">\n            {{- abstract.submission_comment -}}\n        </div>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_abstract_summary(abstract) %}\n    <div class=\"review-summary flexrow f-a-baseline\">\n        <div class=\"review-summary-badge\">\n            {{ render_summary_state(abstract.state) }}\n        </div>\n        <div class=\"review-summary-content f-self-stretch\">\n            {% if abstract.state.name in ('submitted', 'withdrawn', 'rejected') %}\n                <div>\n                    {% if abstract.submitted_contrib_type %}\n                        {% trans name=abstract.submitter.name, type=abstract.submitted_contrib_type.name|lower -%}\n                            <strong>{{ name }}</strong> submitted this <span class=\"abstract-contribution-type\">{{ type }}</span>\n                        {%- endtrans %}\n                    {% else %}\n                        {% trans name=abstract.submitter.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract\n                        {%- endtrans %}\n                    {% endif %}\n                </div>\n                {% if abstract.submitted_for_tracks %}\n                    <div>\n                        {% trans count=abstract.submitted_for_tracks|length -%}\n                            For track:\n                        {%- pluralize -%}\n                            For tracks:\n                        {%- endtrans %}\n                        {{ render_tracks(abstract.submitted_for_tracks) }}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'accepted' %}\n                <div>\n                    {% if abstract.accepted_contrib_type and abstract.accepted_track %}\n                        {% trans name=abstract.submitter.name,\n                            type=abstract.accepted_contrib_type.name,\n                            track=render_track(abstract.accepted_track, full_title=true) -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            for track {{ track }}\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>.\n                        {% endtrans %}\n                    {% elif abstract.accepted_contrib_type %}\n                        {% trans name=abstract.submitter.name,\n                            type=abstract.accepted_contrib_type.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>.\n                        {% endtrans %}\n                    {% elif abstract.accepted_track %}\n                        {% trans name=abstract.submitter.name,\n                            track=render_track(abstract.accepted_track, full_title=true) -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            for track {{ track }}.\n                        {% endtrans %}\n                    {% else %}\n                        {% trans name=abstract.submitter.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted.\n                        {%- endtrans %}\n                    {% endif %}\n                </div>\n                <div>\n                    {% if abstract.contribution %}\n                        <a href=\"{{ url_for('contributions.display_contribution', abstract.contribution) }}\">\n                            {% trans %}Go to contribution{%- endtrans %}\n                        </a>\n                    {% endif %}\n                </div>\n            {% elif abstract.state.name == 'merged' %}\n                <div>\n                    {% trans name=abstract.submitter.name -%}\n                        <strong>{{ name }}</strong> submitted this abstract but it was merged into another.\n                    {%- endtrans %}\n                </div>\n                {% if abstract.merged_into.can_access(session.user) %}\n                    <div>\n                        {% trans url=url_for('.display_abstract', abstract.merged_into) %}\n                            <a href=\"{{ url }}\">Go to abstract</a>\n                        {% endtrans %}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'duplicate' %}\n                {% trans name=abstract.submitter.name -%}\n                    <strong>{{ name }}</strong> submitted this abstract but it was marked as duplicate of another.\n                {%- endtrans %}\n                {% if abstract.duplicate_of.can_access(session.user) %}\n                    <div>\n                        {% trans url=url_for('.display_abstract', abstract.duplicate_of) %}\n                            <a href=\"{{ url }}\">Go to abstract</a>\n                        {% endtrans %}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'invited' %}\n                {% trans name=abstract.submitter.name -%}\n                    <strong>{{ name }}</strong> was invited to submit this abstract\n                {%- endtrans %}\n            {% endif %}\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro _render_attachments(abstract) %}\n    {% if abstract.files %}\n        <div class=\"files field-separator\">\n            <table class=\"tree\">\n                {% for file in abstract.files %}\n                    <tr>\n                        <td>\n                            <span class=\"{{ icon_from_mimetype(file.content_type, 'icon-file-filled') }}\">\n                                <a href=\"{{ url_for('.download_attachment', file) }}\" target=\"_blank\">\n                                    {{ file.filename }}\n                                </a>\n                            </span>\n                        </td>\n                    </tr>\n                {% endfor %}\n            </table>\n        </div>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_field_value(value) %}\n        <div class=\"field-value {{ 'single-choice 'if value.contribution_field.field_type == 'single_choice' else ''}}\">\n            <label>{{ value.contribution_field.title }}:</label>\n            {% if value.friendly_data %}\n                <span class=\"value\">{{ value.friendly_data }}</span>\n            {% else %}\n                <span class=\"value empty\">{% trans %}No answer{% endtrans %}</span>\n            {% endif %}\n        </div>\n{% endmacro %}\n\n\n{% macro _render_abstract_judgment_action(abstract) %}\n    {% set action = abstract.state.name %}\n    {% if action == 'withdrawn' %}\n        {% trans name=abstract.submitter.name -%}\n            <strong>{{ name }}</strong> withdrew this abstract\n        {%- endtrans %}\n    {% elif abstract.can_judge(session.user) %}\n        {% if action == 'accepted' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> accepted this abstract\n            {%- endtrans %}\n        {% elif action == 'rejected' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> rejected this abstract\n            {%- endtrans %}\n        {% elif action == 'merged' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> merged this abstract into another\n            {%- endtrans %}\n        {% elif action == 'duplicate' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> marked this abstract as duplicate of another\n            {%- endtrans %}\n        {% endif %}\n    {% else %}\n        {% if action == 'accepted' %}\n            {% trans %}This abstract was accepted{% endtrans %}\n        {% elif action == 'rejected' %}\n            {% trans %}This abstract was rejected{% endtrans %}\n        {% elif action == 'merged' %}\n            {% trans %}This abstract was merged{% endtrans %}\n        {% elif action == 'duplicate' %}\n            {% trans %}This abstract was marked as duplicate{% endtrans %}\n        {% endif %}\n    {% endif %}\n{% endmacro %}\n", "{% macro menu_entry(entry) -%}\n    {% set event_locked = entry.event.is_locked %}\n    <div class=\"menu-entry {%- if entry.is_root and entry.children %} with-children{% endif %}\"\n         data-position=\"{{ entry.position }}\"\n         data-position-url=\"{{ url_for('.menu_entry_position', entry) }}\"\n         data-entry-id=\"{{ entry.id }}\">\n        <div class=\"i-label {{ 'drag-handle' if not event_locked }}\n            {%- if entry.type.name == 'separator' %} disabled\n            {%- elif entry.type.name in ('user_link', 'page') %} highlight{% endif -%}\n            {%- if not entry.is_enabled %} striped{% endif %}\">\n            <i class=\"entry-{{ entry.type.name }}\"></i>\n            <span class=\"title\">\n                {% if config.DEBUG %}<span class=\"position\">{{ entry.position + 1}}</span>{% endif %}\n                {{ entry.localized_title }}\n            </span>\n            <span class=\"actions hide-if-locked\">\n                {% if entry.type.name == 'page' %}\n                    <a class=\"{% if not entry.page.is_default %}not-{% endif %}default\" href=\"#\"\n                       data-href=\"{{ url_for('.menu_entry_toggle_default', entry) }}\"\n                       data-method=\"POST\"\n                       title=\"{% trans %}Toggle default event homepage{% endtrans %}\"\n                    ></a>\n                {% endif %}\n                <a class=\"{% if not entry.is_enabled %}not-{% endif %}enabled\" href=\"#\"\n                   title=\"{% trans %}Toggle visibility{% endtrans %}\"\n                   data-href=\"{{ url_for('.menu_entry_toggle_enabled', entry) }}\"\n                   data-method=\"POST\"\n                ></a>\n                {% if not entry.is_separator %}\n                    <a href=\"#\" title=\"{% trans %}Edit entry{% endtrans %}\" data-href=\"{{ url_for('.menu_entry_edit', entry) }}\" class=\"edit-entry\"></a>\n                {% endif %}\n                {% if entry.type.name in ('user_link', 'page', 'separator') %}\n                    <a href=\"#\" class=\"delete-entry\"\n                         data-method=\"DELETE\"\n                         data-href=\"{{ url_for('.menu_delete_entry', entry) }}\"\n                         data-title=\"{% trans %}Remove the menu entry?{% endtrans %}\"\n                         title=\"{% trans %}Remove the menu entry{% endtrans %}\"\n                         data-confirm=\"\n                            {%- if not entry.is_separator -%}\n                                {%- trans name='&quot;%s&quot;'|format(entry.localized_title) -%}\n                                    Are you sure you want to remove {{ name }}?\n                                {%- endtrans -%}\n                            {% else %}\n                                {%- trans %}Are you sure you want to remove this spacer?{% endtrans -%}\n                            {% endif %}\">\n                    </a>\n                {% endif %}\n            </span>\n        </div>\n        {% if entry.is_root and entry.children %}\n            {{ menu_entries(entry.children, connect_menu=entry.type.name in ('user_link', 'page')) }}\n        {% elif entry.type.name in ('user_link', 'page') %}\n            {{ menu_entries([], connect_menu=true) }}\n        {% endif %}\n    </div>\n{%- endmacro %}\n\n{% macro menu_entries(entries, connect_menu=False) -%}\n    {# empty class as the :empty pseudo selector fails if there are white spaces, \\t or \\n between the <ul> tags #}\n    <ul class=\"menu-entries {%- if connect_menu %} connect-menu{% endif %}{% if not entries %} empty {% endif %}\"\n        data-empty-text=\"{% trans %}Drop here to create a nested entry.{% endtrans %}\">\n        {%- for entry in entries if not entry.is_orphaned %}\n            <li {% if entry.type.name in ('user_link', 'page') -%}\n                    class=\"{% if entry.is_root -%}\n                        allow-nested {%- if not entry.children %} nestable{% endif -%}\n                    {%- else -%}\n                        nestable\n                    {%- endif -%}\"\n                {%- endif %}>\n                {{- menu_entry(entry) -}}\n            </li>\n        {% endfor -%}\n    </ul>\n{%- endmacro %}\n\n\n{% macro menu_entry_display(entry, root_entry=true, active_entry_id=none) %}\n    {%- if entry.is_separator -%}\n        <li class=\"spacer\"></li>\n    {%- else -%}\n        {% set menu_class = 'menuConfTitle' if root_entry else 'menuConfMiddleCell' %}\n        <li class=\"{{ menu_class }}\n            {%- if entry.id == active_entry_id %} selected menuConfSelected\n                    {%- if not root_entry %} sublink{% endif -%}\n            {%- endif %}\">\n            <a {% if entry.url %}href=\"{{ entry.url }}\"{% else %}class=\"no-link\"{% endif %}\n               {% if entry.new_tab %}target=\"_blank\"{% endif %}>\n                {{- entry.localized_title -}}\n            </a>\n            {%- if root_entry and entry.children -%}\n                <ul class=\"inner\">\n                    {%- for child in entry.children if child.is_visible -%}\n                        {{ menu_entry_display(child, root_entry=False, active_entry_id=active_entry_id) }}\n                    {%- endfor -%}\n                </ul>\n            {%- endif -%}\n    {%- endif -%}\n{% endmacro %}\n", "{% macro _change_type_confirmation(type) %}\n    {% trans -%}\n        Changing the event type to <strong>{{ type }}</strong> will change the look of the event page\n        and may disable some features not available for the new event type.\n    {%- endtrans %}\n{% endmacro %}\n\n\n{% macro _render_change_event_type(event, event_types) %}\n    <button class=\"i-button borderless icon-wrench arrow js-dropdown hide-if-locked\" data-toggle=\"dropdown\">\n        {%- trans %}Change type{% endtrans -%}\n    </button>\n    <ul class=\"i-dropdown\">\n        {% for type, title in event_types %}\n            <li>\n                {% if type == event.type_.name %}\n                    <a class=\"disabled\" title=\"{% trans %}This is the event's current type.{% endtrans %}\">\n                        {{ title }}\n                    </a>\n                {% else %}\n                    <a data-href=\"{{ url_for('event_management.change_type', event) }}\"\n                       data-method=\"POST\"\n                       data-params=\"{{ {'type': type} | tojson | forceescape }}\"\n                       data-title=\"{% trans %}Confirm type change{% endtrans %}\"\n                       data-confirm=\"{{ _change_type_confirmation(title) }}\"\n                       data-ajax>\n                        {{ title }}\n                    </a>\n                {% endif %}\n            </li>\n        {% endfor %}\n    </ul>\n{% endmacro %}\n\n\n{% macro _render_lock_event(event) %}\n    {% if not event.can_lock(session.user) %}\n        {% if event.is_locked %}\n            <button class=\"i-button borderless icon-lock-center disabled\"\n                    title=\"{% trans %}Only the event creator and category managers may unlock an event.{% endtrans %}\">\n                {%- trans %}Unlock{% endtrans -%}\n            </button>\n        {% else %}\n            <button class=\"i-button borderless icon-lock-center disabled\"\n                    title=\"{% trans %}Only the event creator and category managers may lock an event.{% endtrans %}\">\n                {%- trans %}Lock{% endtrans -%}\n            </button>\n        {% endif %}\n    {% else %}\n        {% if event.is_locked %}\n            <button class=\"i-button borderless icon-lock-center warning\"\n                    title=\"{% trans %}Unlock event{% endtrans %}\"\n                    data-qtip-style=\"warning\"\n                    data-href=\"{{ url_for('event_management.unlock', event) }}\"\n                    data-method=\"POST\"\n                    data-reload-after\n                    data-ajax>\n                {%- trans %}Unlock{% endtrans -%}\n            </button>\n        {% else %}\n            <button class=\"i-button borderless icon-lock-center warning\"\n                    title=\"{% trans %}Lock event{% endtrans %}\"\n                    data-qtip-style=\"warning\"\n                    data-href=\"{{ url_for('event_management.lock', event) }}\"\n                    data-reload-after\n                    data-ajax-dialog>\n                {%- trans %}Lock{% endtrans -%}\n            </button>\n        {% endif %}\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_manage_series(event) %}\n    <span id=\"event-action-manage-series-container\"\n          data-event-id=\"{{ event.id }}\"\n          data-category-id=\"{{ event.category_id }}\"\n          data-timezone=\"{{ event.timezone }}\"\n          {% if event.series %}data-series-id=\"{{ event.series.id }}\"{% endif %}></span>\n{% endmacro %}\n\n\n{% macro _render_move_event(event) %}\n    {% if not event.is_unlisted %}\n        <span class=\"hide-if-locked\"\n              id=\"event-action-move-container\"\n              data-event-id=\"{{ event.id }}\"\n              data-category-id=\"{{ event.category.id }}\"\n              {{ 'data-pending-request' if event.pending_move_request }}></span>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_delete_event(event) %}\n    <button class=\"i-button borderless icon-remove danger hide-if-locked\"\n            title=\"{% trans %}Delete event{% endtrans %}\"\n            data-qtip-style=\"danger\"\n            data-href=\"{{ url_for('event_management.delete', event) }}\"\n            data-ajax-dialog>\n        {%- trans %}Delete{% endtrans -%}\n    </button>\n{% endmacro %}\n\n\n{% macro _render_import_event(event) %}\n    <button class=\"i-button borderless icon-import hide-if-locked\"\n            title=\"{% trans %}Import from event{% endtrans %}\"\n            data-title=\"{% trans %}Import from other event{% endtrans %}\"\n            data-href=\"{{ url_for('event_management.import', event) }}\"\n            data-ajax-dialog>\n        {%- trans %}Import{% endtrans -%}\n    </button>\n{% endmacro %}\n\n\n{% macro render_action_menu(event, event_types) %}\n    {% set clones = event.clones|rejectattr('is_deleted')|list %}\n\n    <div class=\"action-menu\">\n        <div class=\"toolbar\">\n            {% if event.can_manage(session.user) %}\n                {% if event.is_unlisted %}\n                    <span class=\"hide-if-locked group\"\n                          id=\"event-action-publish-container\"\n                          data-event-id=\"{{ event.id }}\"\n                          {{ 'data-pending-request' if event.pending_move_request }}></span>\n                   </a>\n                {% endif %}\n\n                <div class=\"group\">\n                    <button class=\"i-button icon-copy\" title=\"{% trans %}Clone event{% endtrans %}\"\n                       data-href=\"{{ url_for('event_management.clone', event) }}\"\n                       data-title=\"{% trans %}Clone Event{% endtrans %}\"\n                       data-ajax-dialog>\n                        {% trans %}Clone{% endtrans %}\n                    </button>\n                    {% if clones %}\n                        <a id=\"event-action-menu-clones-target\" class=\"i-button label clickable arrow\">\n                            {{- clones|length -}}\n                        </a>\n                    {% endif %}\n                </div>\n\n                <button id=\"event-action-menu-actions-target\" class=\"i-button icon-settings i-button arrow\"\n                   title=\"{% trans %}Event actions{% endtrans %}\"></button>\n\n                <div id=\"event-action-menu-actions\">\n                    <div class=\"action-menu-buttons {{ 'event-locked' if event.is_locked }}\">\n                        {{ _render_move_event(event) }}\n                        {{ _render_import_event(event) }}\n                        {% if not event.is_unlisted %}{{ _render_manage_series(event) }}{% endif %}\n                        {{ _render_lock_event(event) }}\n                        {{ _render_delete_event(event) }}\n                        {{ _render_change_event_type(event, event_types) }}\n                    </div>\n                </div>\n\n                <div id=\"event-action-menu-clones\">\n                    {% trans %}Events cloned from the current event:{% endtrans %}\n                    <ul>\n                        {% for clone in clones %}\n                            <li>\n                                <a href=\"{{ url_for('event_management.settings', clone) }}\"\n                                   title=\"{{ clone.title }}\" data-qtip-position=\"left\">\n                                    {{ clone.start_dt | format_date(timezone=clone.tzinfo) }}\n                                </a>\n                            </li>\n                        {% endfor %}\n                    </ul>\n                </div>\n            {% endif %}\n        </div>\n    </div>\n\n    <script>\n        setupEventManagementActionMenu();\n    </script>\n{% endmacro %}\n", "{% extends 'events/management/base.html' %}\n\n{% block title %}{% trans %}Offline Copy{% endtrans %}{% endblock %}\n\n{% block content %}\n    <div class=\"i-box-group vert fixed-width static-sites\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">{%- trans %}New Offline Copy{% endtrans -%}</div>\n                <button class=\"i-button icon-wrench right\" type=\"button\"\n                        data-method=\"post\"\n                        data-href=\"{{ url_for('static_site.build', event) }}\"\n                        data-title=\"{% trans %}Build an offline copy{% endtrans %}\"\n                        data-confirm=\"{% trans %}Are you sure you want to build an offline copy of this event?<br>Beware that it is a heavy operation, especially for large events, and it might take some time to finish.{% endtrans %}\">\n                    {%- trans %}Build offline copy{% endtrans -%}\n                </button>\n            </div>\n            <div class=\"i-box-content\">\n                {% trans %}This will build an offline copy of the event. This is useful if you want to make it available where no Internet connection is available.{% endtrans %}\n            </div>\n        </div>\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">{%- trans %}Existing Offline Copies{% endtrans -%}</div>\n            </div>\n            <div class=\"{% if static_sites %}i-box-table-widget{% else %}i-box-content{% endif %}\">\n                {% if static_sites %}\n                    {% set label_mapping = {\n                        'success': 'accept',\n                        'failed': 'danger',\n                        'expired': 'warning',\n                        'running': 'highlight'\n                    } %}\n                    {% set has_downloads = static_sites|selectattr('state.name', 'equalto', 'success')|any %}\n                    <table class=\"i-table-widget\">\n                        <thead>\n                            <tr>\n                                <th>{% trans %}Requested by{% endtrans %}</th>\n                                <th>{% trans %}Requested on{% endtrans %}</th>\n                                <th>{% trans %}Status{% endtrans %}</th>\n                                {% if has_downloads %}\n                                    <th>{% trans %}Download{% endtrans %}</th>\n                                {% endif %}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for site in static_sites %}\n                                <tr>\n                                    <td>{{ site.creator.full_name }}</td>\n                                    <td>{{ site.requested_dt|format_datetime(timezone=site.event.tzinfo) }}</td>\n                                    <td>\n                                        <span class=\"i-label {{ label_mapping.get(site.state.name, 'disabled') }}\">\n                                            {{ site.state.title }}\n                                        </span>\n                                    </td>\n                                    {% if has_downloads %}\n                                        <td>\n                                            {% if site.state.name == 'success' %}\n                                                <a href=\"{{ url_for('static_site.download', site, _external=True) }}\"\n                                                   class=\"i-button icon-file-download\">\n                                                    {%- trans %}Download{% endtrans -%}\n                                                </a>\n                                            {% endif %}\n                                        </td>\n                                    {% endif %}\n                                </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                {% else %}\n                    <span class=\"empty\">{% trans %}There are no offline copies of this event.{% endtrans %}</span>\n                {% endif %}\n            </div>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'events/surveys/management/_survey_base.html' %}\n\n{% set has_users = submitted_surveys|rejectattr('is_anonymous')|any %}\n\n{% block content %}\n    {% if survey.private and survey.state.name in ('active_and_clean', 'active_and_answered') %}\n        <div class=\"action-box highlight\">\n            <div class=\"section\">\n                <div class=\"icon icon-lock\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {%- trans %}The survey is private{% endtrans -%}\n                    </div>\n                    {% set link_start %}\n                        <a href=\"{{ url_for('.display_survey_form', survey, survey.locator.token, _external=True) }}\"\n                           class=\"js-copy-to-clipboard\"\n                           title=\"{% trans %}Copy link to clipboard{% endtrans %}\"\n                           data-clipboard-text=\"{{ url_for('.display_survey_form', survey, survey.locator.token, _external=True) }}\"\n                           data-clipboard-action=\"copy\">\n                    {% endset %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans -%}\n                        The survey is accessible only by people with this {{ link_start }}link{{ link_end }}\n                    {%- endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <button class=\"i-button icon-mail right highlight js-requires-selected-row send-mails-btn\"\n                            data-href=\"{{ url_for('surveys.send_links', survey) }}\"\n                            data-title=\"{% trans %}Send survey links{% endtrans %}\"\n                            data-method=\"POST\"\n                            data-ajax-dialog>\n                        {%- trans %}Send links{% endtrans -%}\n                    </button>\n                </div>\n            </div>\n        </div>\n    {% endif %}\n\n    {% if survey.state.name == 'not_ready' %}\n        {% include 'events/surveys/management/survey_actions/not_ready.html' %}\n    {% elif survey.state.name == 'ready_to_open' %}\n        {% include 'events/surveys/management/survey_actions/ready_to_open.html' %}\n    {% elif survey.state.name in ('active_and_clean', 'active_and_answered') %}\n        {% include 'events/surveys/management/survey_actions/active.html' %}\n    {% elif survey.state.name == 'finished' %}\n        {% include 'events/surveys/management/survey_actions/finished.html' %}\n    {% elif survey.state.name == 'limit_reached' %}\n        {% include 'events/surveys/management/survey_actions/limit_reached.html' %}\n    {% endif %}\n\n    <div class=\"action-box\">\n        {% if not survey.event.is_locked %}\n            <div class=\"section\">\n                <div class=\"icon icon-settings\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% trans %}General settings{% endtrans %}\n                    </div>\n                    {% trans %}Edit settings for this survey.{% endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <button class=\"i-button icon-edit\"\n                            data-href=\"{{ url_for('.edit_survey', survey) }}\"\n                            data-title=\"{% trans %}Edit survey{% endtrans %}\"\n                            data-ajax-dialog\n                            data-reload-after>\n                        {% trans %}Edit{% endtrans %}\n                    </button>\n                </div>\n            </div>\n        {% endif %}\n\n        {% if survey.state.name != 'not_ready' %}\n            <div class=\"section\">\n                <div class=\"icon icon-clipboard\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% trans %}Questionnaire{% endtrans %}\n                    </div>\n                    {% trans %}Add, remove or modify questions.{% endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <a href=\"{{ url_for('.manage_questionnaire', survey) }}\" class=\"i-button icon-settings\">\n                        {% trans %}Manage{% endtrans %}\n                    </a>\n                </div>\n            </div>\n        {% endif %}\n    </div>\n\n    <h2>\n        {% trans %}Submissions{% endtrans %}\n    </h2>\n\n    {% if submitted_surveys %}\n        <div class=\"toolbars space-after\">\n            <div class=\"toolbar\">\n                <button class=\"i-button icon-checkbox-checked arrow js-dropdown\"  data-toggle=\"dropdown\"></button>\n                <ul class=\"i-dropdown\">\n                    <li><a href=\"#\" id=\"select-all\">\n                        {% trans %}All{% endtrans %}\n                    </a></li>\n                    <li><a href=\"#\" id=\"select-none\">\n                        {% trans %}None{% endtrans %}\n                    </a></li>\n                </ul>\n            </div>\n            <div class=\"toolbar\">\n                <a href=\"{{ url_for('.survey_results', survey) }}\" class=\"i-button icon-chart\">\n                    {% trans %}Results{% endtrans %}\n                </a>\n                <button class=\"i-button arrow js-dropdown\"\n                        data-toggle=\"dropdown\">\n                    {%- trans %}Export{% endtrans -%}\n                </button>\n                <ul class=\"i-dropdown\">\n                    <li>\n                        <a href=\"#\" data-href=\"{{ url_for('.export_submissions_csv', survey) }}\"\n                           class=\"icon-file-spreadsheet js-submission-action js-export-submissions\">\n                            {% trans %}CSV{% endtrans %}\n                        </a>\n                    </li>\n                    <li>\n                        <a href=\"#\" data-href=\"{{ url_for('.export_submissions_excel', survey) }}\"\n                           class=\"icon-file-excel js-submission-action js-export-submissions\">\n                            {% trans %}XLSX (Excel){% endtrans %}\n                        </a>\n                    </li>\n                </ul>\n                <button id=\"delete-submissions\"\n                        class=\"i-button icon-remove text-color color-on-hover danger hide-if-locked\"\n                        data-href=\"{{ url_for('.delete_submissions', survey) }}\"\n                        data-title=\"{% trans %}Remove all selected submissions?{% endtrans %}\"\n                        data-confirm=\"{% trans %}Are you sure you want to remove all selected submissions?{% endtrans %}\"\n                        data-method=\"DELETE\"\n                        disabled>\n                    {% trans %}Delete{% endtrans %}\n                </button>\n            </div>\n        </div>\n\n        <table id=\"submission-list\" class=\"i-table-widget fixed-width\">\n            <thead>\n                <tr>\n                    <th></th>\n                    <th>{% trans %}ID{% endtrans %}</th>\n                    <th>{% trans %}Submitted{% endtrans %}</th>\n                    <th>{% trans %}User{% endtrans %}</th>\n                    {% if has_users %}\n                        <th>{% trans %}Email{% endtrans %}</th>\n                    {% endif %}\n                    <th></th>\n                </tr>\n            </thead>\n            <tbody>\n                {% for submission in submitted_surveys|sort(attribute='submitted_dt') %}\n                    {{ _render_submission_row(submission) }}\n                {% endfor %}\n            </tbody>\n        </table>\n    {% else %}\n        <div class=\"info-message-box\">\n            <div class=\"message-text\">\n                {% trans %}There are no submissions yet.{% endtrans %}\n            </div>\n        </div>\n    {% endif %}\n{% endblock %}\n\n{% macro _render_submission_row(submission) %}\n    <tr class=\"submission-row\">\n        <td>\n            <input type=\"checkbox\" class=\"inline-vcentered submission-ids\" value=\"{{ submission.id }}\">\n        </td>\n        <td>\n            <a href=\"{{ url_for('.display_submission', submission) }}\">#{{ submission.friendly_id }}</a>\n        </td>\n        <td>{{ submission.submitted_dt|format_datetime(timezone=submission.survey.event.tzinfo) }}</td>\n        <td>\n            {% if not submission.is_anonymous %}\n                {{ submission.user.full_name }}\n            {% else %}\n                <em>{% trans %}Anonymous{% endtrans %}</em>\n            {% endif %}\n        </td>\n        {% if has_users %}\n            <td>\n                {% if not submission.is_anonymous %}\n                    {{ submission.user.email }}\n                {% endif %}\n            </td>\n        {% endif %}\n        <td>\n            {% set data_confirm %}\n                {% trans %}Are you sure you want to remove this submission?{% endtrans %}\n                {% if submission.is_anonymous %}\n                    <br><br>\n                    {% trans %}Note: Authenticated users will not be able to submit an anonymous survey again even if you delete their submission.{% endtrans %}\n                {% endif %}\n            {% endset %}\n            <a href=\"#\" class=\"icon-remove right js-delete-submission hide-if-locked\"\n               data-href=\"{{ url_for('.delete_submissions', survey) }}\"\n               data-method=\"DELETE\"\n               data-title\n               title=\"{% trans %}Remove submission{% endtrans %}\"\n               data-confirm=\"{{ data_confirm }}\"\n               data-submission-id=\"{{ submission.id }}\"></a>\n        </td>\n    </tr>\n{% endmacro %}\n", "{% extends 'users/base.html' %}\n{% from '_switch.html' import switch %}\n\n{% block user_content %}\n    <div class=\"i-box\">\n        <div class=\"i-box-header\">\n            <div class=\"i-box-title\">\n                {%- trans %}Authorized applications{% endtrans -%}\n            </div>\n        </div>\n        <div class=\"i-box-content\">\n            <p>{% trans %}This is the list of applications you authorized to access your Indico data.{% endtrans %}</p>\n            <ul class=\"group-list with-buttons\">\n                {% if not authorizations %}\n                    <li class=\"italic\">\n                        {%- trans %}No third party applications have been authorized.{% endtrans -%}\n                    </li>\n                {% endif %}\n                {% for auth, last_use in authorizations %}\n                    <li class=\"flexrow f-a-center\">\n                        <span class=\"list-item-title\"\n                              title=\"{% trans %}Authorized scopes:{% endtrans %} {{ auth.scopes|join(', ') }}\">\n                            {{- auth.application.name -}}\n                        </span>\n                        <span class=\"right\">\n                            <span class=\"list-item-info\">\n                                <span class=\"label\">{% trans %}Last used:{% endtrans %}</span>\n                                <span class=\"content\">\n                                    {% if last_use %}\n                                        {{ last_use | format_datetime('short') }}\n                                    {% else %}\n                                        {% trans %}Never{% endtrans %}\n                                    {% endif %}\n                                </span>\n                            </span>\n                            <button class=\"ui negative small button\"\n                                    data-href=\"{{ url_for('.user_app_revoke', auth.application) }}\"\n                                    data-method=\"POST\"\n                                    data-confirm=\"{% trans app_name=auth.application.name %}{{ app_name }} will no longer have access to your Indico data.<br>\n                                    Are you sure you want to revoke its access?{% endtrans %}\">\n                                {%- trans %}Revoke{% endtrans -%}\n                            </button>\n                        </span>\n                    </li>\n                {% endfor %}\n            </ul>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'users/base.html' %}\n{% from 'message_box.html' import message_box %}\n\n{% block user_content %}\n    <div class=\"i-box-group vert\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">\n                    {%- trans %}API tokens{% endtrans -%}\n                </div>\n                {% if can_manage %}\n                    <div class=\"i-box-buttons toolbar\">\n                        <div class=\"group\">\n                            <button type=\"button\"\n                                    class=\"ui primary small button\"\n                                    data-href=\"{{ url_for('.user_token_new') }}\"\n                                    data-title=\"{% trans %}Create new token{% endtrans %}\"\n                                    data-ajax-dialog\n                                    data-reload-after>\n                                <i aria-hidden=\"true\" class=\"icon plus\"></i>\n                                {%- trans %}Create new token{% endtrans -%}\n                            </button>\n                        </div>\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                <p>{% trans %}Tokens you generated to access the Indico APIs.{% endtrans %}</p>\n                {% if created_token %}\n                    {% call message_box('warning') %}\n                        {% trans -%}\n                            Make sure to copy your API token now.\n                            You won't be able to see it again!\n                        {%- endtrans %}\n                    {% endcall %}\n                {% endif %}\n                <ul class=\"group-list with-buttons\">\n                    {% if not tokens %}\n                        <li class=\"italic\">\n                            {%- trans %}No tokens have been generated.{% endtrans -%}\n                        </li>\n                    {% endif %}\n                    {% for token in tokens %}\n                        {% set new_token = created_token[1] if created_token and created_token[0] == token.id else none %}\n                        <li class=\"flexrow f-a-center\">\n                            <span class=\"list-item-title\"\n                                {% if not new_token %}\n                                    title=\"{% trans %}Authorized scopes:{% endtrans %} {{ token.scopes|join(', ') }}\"\n                                {% endif %}>\n                                {% if new_token %}\n                                    <code class=\"semantic-text success\">{{ new_token }}</code>\n                                    <span class=\"icon-clipboard js-copy-to-clipboard\"\n                                          title=\"{% trans %}Copy to clipboard{% endtrans %}\"\n                                          style=\"cursor: pointer\"\n                                          data-clipboard-text=\"{{ new_token }}\"\n                                          data-clipboard-action=\"copy\"></span>\n                                {% elif can_manage %}\n                                    <a href=\"#\"\n                                       data-href=\"{{ url_for('.user_token_edit', token) }}\"\n                                       data-title=\"{% trans token_name=token.name %}Edit token '{{ token_name }}'{% endtrans %}\"\n                                       data-ajax-dialog\n                                       data-reload-after>\n                                        {{- token.name -}}\n                                    </a>\n                                {% else %}\n                                    {{- token.name -}}\n                                {% endif %}\n                            </span>\n                            <span class=\"right\">\n                                {% if not new_token or token.last_used_dt %}\n                                    <span class=\"list-item-info\">\n                                        <span class=\"label\">{% trans %}Last used:{% endtrans %}</span>\n                                        <span class=\"content\">\n                                            {% if token.last_used_dt %}\n                                                <span title=\"{% trans ip=token.last_used_ip, count=token.use_count %}\n                                                    Last used from {{ ip }}\n                                                    Total uses: {{ count }}\n                                                    {% endtrans %}\">\n                                                    {{- token.last_used_dt | format_datetime('short') -}}\n                                                </span>\n                                            {% else %}\n                                                {% trans %}Never{% endtrans %}\n                                            {% endif %}\n                                        </span>\n                                    </span>\n                                {% endif %}\n                                <div class=\"ui icon buttons small\">\n                                    <button class=\"ui orange button ui-qtip\"\n                                            title=\"{% trans %}Regenerate token{% endtrans %}\"\n                                            data-href=\"{{ url_for('.user_token_reset', token) }}\"\n                                            data-method=\"POST\"\n                                            data-title=\"{% trans token_name=token.name %}Regenerate token '{{ token_name }}'{% endtrans %}\"\n                                            data-confirm=\"{% trans token_name=token.name %}\n                                            If you've lost/forgotten this token, you can regenerate it, but be aware\n                                            that any applications or scripts using this token will need to be updated.\n                                            You cannot undo this action.\n                                            {% endtrans %}\"\n                                            {{ 'disabled' if new_token }}>\n                                        <i aria-hidden=\"true\" class=\"refresh icon\"></i>\n                                    </button>\n                                    <button class=\"ui red button ui-qtip\"\n                                            title=\"{% trans %}Revoke token{% endtrans %}\"\n                                            data-href=\"{{ url_for('.user_token_revoke', token) }}\"\n                                            data-method=\"POST\"\n                                            data-title=\"{% trans token_name=token.name %}Revoke token '{{ token_name }}'{% endtrans %}\"\n                                            data-confirm=\"{% trans token_name=token.name %}\n                                            Any applications or scripts using this token will no longer be able to access\n                                            the Indico API.\n                                            You cannot undo this action.\n                                            {% endtrans %}\n                                            {% if not can_manage %}\n                                                <br><br>\n                                                <strong>\n                                                {% trans %}\n                                                Warning: You will not be able to create a new API token since only Indico\n                                                admins can create API tokens.\n                                                {% endtrans %}\n                                                </strong>\n                                            {% endif %}\n                                            \">\n                                        <i aria-hidden=\"true\" class=\"trash icon\"></i>\n                                    </button>\n                                </div>\n                            </span>\n                        </li>\n                    {% endfor %}\n                </ul>\n            </div>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'users/base.html' %}\n\n{% block user_content %}\n    <div class=\"i-box-group vert\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">\n                    {%- trans %}Details{% endtrans -%}\n                </div>\n                {% if session.user.is_admin %}\n                    <div class=\"i-box-buttons\">\n                        {% if not user.is_blocked %}\n                            <div {%- if user == session.user %} title=\"{% trans %}You cannot block yourself{% endtrans %}\"{% endif %}>\n                                <button class=\"ui negative small button\"\n                                        data-href=\"{{ url_for('.user_block') }}\"\n                                        data-method=\"PUT\"\n                                        data-confirm=\"{% trans %}This user will no longer have access to Indico.<br>\n                                        Are you sure you want to revoke their access?{% endtrans %}\"\n                                        data-reload-after\n                                        {% if user == session.user %}disabled{% endif %}>\n                                    {% trans %}Block User{% endtrans %}\n                                </button>\n                            </div>\n                        {% else %}\n                            <button class=\"ui small button\"\n                                    data-href=\"{{ url_for('.user_block') }}\"\n                                    data-method=\"DELETE\"\n                                    data-confirm=\"{% trans %}This user will regain access to Indico.<br>\n                                    Are you sure you want to restore their access?{% endtrans %}\"\n                                    data-reload-after>\n                                {% trans %}Unblock User{% endtrans %}\n                            </button>\n                        {% endif %}\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                <div id=\"personal-details-form-container\"></div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        setupPersonalDataForm(\n            {{ (user.id if user != session.user else none) | tojson }},\n            {{ user_values | tojson }},\n            {{ current_affiliation | tojson }},\n            {{ titles | tojson }},\n            {{ user.synced_values | tojson }},\n            {{ locked_fields | tojson }},\n            {{ locked_field_message | tojson }},\n            {{ has_predefined_affiliations | tojson }}\n        );\n    </script>\n{% endblock %}\n", "// This file is part of Indico.\n// Copyright (C) 2002 - 2023 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global ConfirmPopup:false, SpecialRemovePopup:false, AlertPopup:false */\n\nimport Palette from '../../utils/palette';\n\n(function(global) {\n  global.confirmPrompt = function confirmPrompt(message, title) {\n    var dfd = $.Deferred();\n    message = $('<div>', {width: 400, html: message});\n    new ConfirmPopup(title || $T('Please confirm'), message, function(confirmed) {\n      if (confirmed) {\n        dfd.resolve();\n      } else {\n        dfd.reject();\n      }\n    }).open();\n    return dfd.promise();\n  };\n\n  global.choiceConfirmPrompt = function choiceConfirmPrompt(message, title, choice1, choice2) {\n    var dfd = $.Deferred();\n    message = $('<div>', {width: 400, html: message});\n    new SpecialRemovePopup(\n      title || $T('Please confirm'),\n      message,\n      function(action) {\n        if (action === 0) {\n          dfd.reject();\n        } else {\n          dfd.resolve(action);\n        }\n      },\n      choice1,\n      choice2\n    ).open();\n    return dfd.promise();\n  };\n\n  global.alertPopup = function alertPopup(message, title) {\n    var dfd = $.Deferred();\n    new AlertPopup(title, message, function() {\n      dfd.resolve();\n    }).open();\n    return dfd;\n  };\n\n  global.handleFlashes = function handleFlashes(data, clear, element) {\n    var container;\n    if (!element || !element.length) {\n      container = $('#flashed-messages');\n    } else if (element.hasClass('flashed-messages')) {\n      container = element;\n    } else {\n      container = element.closest('.ui-dialog-content').find('.flashed-messages');\n      if (!container.length) {\n        container = element.closest('.page-content').find('.flashed-messages');\n      }\n    }\n    if (!container.length) {\n      container = $('#flashed-messages');\n    }\n    if (clear === undefined || clear) {\n      container.empty();\n    }\n    if (data.flashed_messages) {\n      var flashed = $(data.flashed_messages.trim()).children();\n      container.append(flashed);\n    }\n  };\n\n  global.handleNotifications = function handleNotifications(data) {\n    if (data && data.flashed_messages) {\n      handleFlashes(data);\n    }\n    if (data && data.notifications) {\n      _.each(data.notifications, function(notification) {\n        cornerMessage({\n          message: notification,\n          duration: 10000,\n          class: 'highlight',\n          actionLabel: $T.gettext('Close'),\n        });\n      });\n    }\n  };\n\n  global.cornerMessage = function cornerMessage(options) {\n    // Create nice message in bottom right corner\n\n    options = $.extend(\n      {\n        actionLabel: null, // the text of the action label\n        actionCallback: null, // the callback that will be invoked\n        message: '', // the message that will be displayed\n        progressMessage: $T.gettext('Executing operation...'), // the message that will be displayed while executing\n        // the action\n        feedbackMessage: $T.gettext('Operation done!'), // the message that will be displayed once the action has\n        // been successfully executed\n        duration: 0, // the lifetime of the message (without being clicked, 0 = forever)\n        feedbackDuration: 4000, // the lifetime of the feedback message (0 = forever)\n        class: '', // a class that will be added to the message box (warning, error, success or highlight)\n      },\n      options\n    );\n\n    var box;\n\n    function _disappear(when) {\n      return setTimeout(function() {\n        box.fadeOut(function() {\n          box.remove();\n        });\n      }, when);\n    }\n\n    var container = $('#corner-message-container');\n    var disappearHandler = options.duration ? _disappear(options.duration) : null;\n\n    if (!container.length) {\n      container = $('<div id=\"corner-message-container\">').appendTo('body');\n    }\n\n    box = $('<div class=\"corner-message\">').prependTo(container);\n    $('<div class=\"corner-message-text\">')\n      .text(options.message)\n      .appendTo(box);\n\n    if (options.class) {\n      box.addClass(options.class);\n    }\n\n    if (options.actionLabel) {\n      var text = $('<a class=\"corner-message-action\" href=\"#\">')\n        .text(options.actionLabel)\n        .appendTo(box);\n\n      text.on('click', function(evt) {\n        evt.preventDefault();\n\n        if (disappearHandler) {\n          clearTimeout(disappearHandler);\n        }\n        if (options.actionCallback) {\n          var promise = options.actionCallback() || $.Deferred();\n\n          box\n            .addClass('progress')\n            .find('.corner-message-text')\n            .text(options.progressMessage);\n          text.remove();\n\n          promise\n            .then(\n              function() {\n                box.find('.corner-message-text').text(options.feedbackMessage);\n                box\n                  .removeClass(options.class)\n                  .addClass('success')\n                  .removeClass('progress');\n              },\n              function() {\n                box.text($T.gettext('Operation failed!'));\n                box.removeClass('progress success warning highlight').addClass('error');\n              }\n            )\n            .always(function() {\n              if (options.feedbackDuration) {\n                _disappear(options.feedbackDuration);\n              }\n            });\n        } else {\n          _disappear(0);\n        }\n      });\n    }\n  };\n\n  global.uniqueId = function uniqueId() {\n    return '' + Math.round(new Date().getTime() + Math.random() * 100);\n  };\n\n  global.countWords = function countWords(value) {\n    value = value.trim();\n    return value ? value.split(/\\s+/).length : 0;\n  };\n\n  function _doUpdateHtml(target, html, replace, highlight) {\n    var $target = $(target);\n    if (replace) {\n      var $html = $($.parseHTML(html, document, true));\n      $target.replaceWith($html);\n      $target = $html;\n    } else {\n      $target.html($.parseHTML(html, document, true));\n    }\n    $target.trigger('indico:htmlUpdated');\n    if (highlight) {\n      $target.effect('highlight', {color: Palette.highlight});\n    }\n  }\n\n  global.updateHtml = function updateHtml(target, data, replace, highlight) {\n    if ($.isPlainObject(target)) {\n      for (var key in target) {\n        if (!(key in data)) {\n          console.error('Invalid key: ' + key); // eslint-disable-line no-console\n        } else {\n          _doUpdateHtml(target[key], data[key], replace, highlight);\n        }\n      }\n    } else {\n      _doUpdateHtml(target, data.html, replace, highlight);\n    }\n  };\n})(window);\n"], "fixing_code": ["Changelog\n=========\n\n\nVersion 3.2.6\n-------------\n\n*Unreleased*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix an XSS vulnerability in various confirmation prompts commonly used when deleting\n  things. Exploitation requires someone with at least submission privileges (such as a\n  speaker) and then rely on someone else to attempt to delete this content. However,\n  considering that event organizers may indeed delete suspicious-looking content when\n  encountering it, there is a non-negligible risk of such an attack to succeed. Because\n  of this it is strongly recommended to upgrade as soon as possible (:pr:`5862`,\n  :cve:`CVE-2023-37901`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Czech\n\nImprovements\n^^^^^^^^^^^^\n\n- Show which files were added or modified on each editing timeline revision (:pr:`5802`)\n- Support rendering Japanese, Chinese & Korean letters in PDFs (:issue:`3120`, :pr:`5842`,\n  thanks :user:`adamjenkins`)\n- Add button to adapt columns widths on the reviewing area's abstracts list (:pr:`5837`)\n- Allow cloning category-level badge/poster templates into another category (:pr:`5775`,\n  thanks :user:`SegiNyn`)\n- Allow using a custom link text in the ``{event_link}`` email placeholder, using the\n  ``{event_link:something-else-here}`` syntax (:issue:`5858`, :pr:`5860`)\n- Add option to add \"event cancelled\" semantics for event labels, which will disable\n  reminders for events having this label (:issue:`5285`, :pr:`5861`)\n\nBugfixes\n^^^^^^^^\n\n- Use correct name formatting in person link fields (:pr:`5835`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Support Python 3.11\n\n\nVersion 3.2.5\n-------------\n\n*Released on June 26, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix an XSS vulnerability in the LaTeX ``\\href`` macro when rendering it client-side.\n  Previously, it was possible to embed arbitrary JavaScript there using the ``javascript:``\n  protocol. The underlying MathJax library has now been updated to version 3 which allows\n  blacklisting certain protocols, thus allowing only ``http``, ``https`` and ``mailto``\n  links in ``\\href`` macros (:pr:`5818`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Show actual recipient data in the email preview instead of the that of the event creator\n  (:pr:`5794`)\n- Add an option to set a maximum number of choices in a multi-choice field (:pr:`5800`)\n\nBugfixes\n^^^^^^^^\n\n- Fix width of time column in PDF timetable when using 12-hour time format (:pr:`5788`)\n- Fix wrong date in email subject for room booking occurrence cancellations (:pr:`5790`)\n- Fix excessive queries being sent in meetings that have registration form with limited\n  places and many registrants (:pr:`5799`)\n- Fix extremely slow query when retrieving list of registration forms in conferences with\n  many registrants while not logged in (:pr:`5799`)\n- Fix title of session conveners being always empty in HTTP API with XML serialization\n  (:pr:`5813`)\n- Fix editable filters not working simultaneously with editable search (:pr:`5796`)\n- Fix missing icons in Abstract Markdown editor (:pr:`5815`)\n- Fix text overflow in event manage button (:pr:`5816`)\n- Fix undone revisions being used instead of the latest valid one when downloading\n  revision files as a ZIP archive (:pr:`5820`)\n- Fix custom actions not showing on revisions if the latest revision has been undone\n  (:pr:`5820`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Some basic but useful docs for the Registration Form model classes\n\n\nVersion 3.2.4\n-------------\n\n*Released on May 26, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Set ``Vary: Cookie`` header when session data is present and used. This ensures\n  that data linked to a (logged-in) session cannot leak between requests even in case\n  of a poorly-configured caching proxy in front of Indico (:pr:`5753`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Use the revision's timestamp when downloading its files as a ZIP archive (:pr:`5686`)\n- Use more consistent colors on the editing judgment button (:issue:`5687`, :pr:`5697`)\n- Keep history when undoing judgments on editables (:pr:`5630`)\n- Add search field to the abstracts list for reviewers (:issue:`5698`, :pr:`5703`)\n- Align status box colors with judgment dropdown (:issue:`5699`, :pr:`5706`)\n- Use a gender-neutral chairperson icon (:pr:`5710`)\n- Add option to set the abstracts' primary authors as the default submitters for the\n  corresponding contributions (:pr:`5711`)\n- Allow commenting on accepted/rejected editables (:issue:`5712`, :pr:`5722`)\n- Hide deleted sections and fields from registration summary (:pr:`5716`)\n- Add support for authorized submitters in Call for Papers (:pr:`5728`)\n- Display abstract submission comment in the list of abstracts (:pr:`5733`)\n- Allow searching for contributions by author in the management area (:pr:`5742`)\n- Include start/end dates of the whole booking in the timeline tooltip of recurring\n  room bookings (:issue:`5730`, :pr:`5740`)\n- Add day of the week to room booking details modal and timeline (:issue:`5718`,\n  :pr:`5743`)\n- Allow acceptance and rejection of editables in the editable list (:pr:`5721`)\n- Email verification attempts during signup now trigger rate limiting to prevent\n  spamming large amounts of confirmation emails (:pr:`5727`)\n- Allow bulk-commenting editables in the editable list (:pr:`5747`)\n- Allow emailing contribution persons that have not yet made any submissions to a\n  given editable type (:pr:`5755`)\n- Show only \"ready to review\" editables on the \"get next editable\" list (:pr:`5765`)\n- Disallow uploading empty files (:pr:`5767`)\n- Include non-speaker authors in the timetable export API (:issue:`5412`, :pr:`5738`)\n- Add setting to force track selection when accepting abstracts (:pr:`5771`)\n- Log detailed changes when editing contributions (:pr:`5777`)\n- Allow managers to ignore required field restrictions in registration forms\n  (:issue:`5644`, :pr:`5682`, thanks :user:`kewisch`)\n- Allow selecting the global noreply address as the sender for event reminders\n  (:pr:`5784`)\n- Allow admins to change the password of local accounts (:pr:`5789`, thanks\n  :user:`omegak`)\n\nBugfixes\n^^^^^^^^\n\n- Fix creating invited abstracts (:pr:`5696`)\n- Fix error on contribution page when there is no paper but the peer reviewing module\n  is enabled and configured to hide accepted papers\n- Clone all protection settings (in particular submitter privileges) when cloning events\n  (:pr:`5702`)\n- Fix searching in single-choice dropdown fields in registration forms (:pr:`5709`)\n- Fix uploading files in registration forms where the user only has access through the\n  registration's token (:pr:`5719`)\n- Fix being unable to set the \"speakers and authors\" as the default contribution\n  submitter type (:pr:`5711`)\n- Check server-side if Call for Papers is open when submitting a paper (:pr:`5725`)\n- Fix room notification email list showing up empty when editing it (:issue:`5729`,\n  :pr:`5731`)\n- Fix performance issues in paper assignment list (:pr:`5736`)\n- Fix performance issues in event export API with large events when including\n  contributions (:pr:`5736`)\n- Fix error when a search query matches content from unlisted events (:issue:`5759`,\n  :pr:`5761`)\n- Fix ToS and Privacy Policy links in room booking module not working when using an\n  external URL (:pr:`5774`)\n- Do not apply default values to new registration form fields when editing an existing\n  registration (:pr:`5781`)\n- Allow ``0`` for a required registration form numbe field (unless a higher minimum\n  value is set) (:pr:`5781`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Update Python & JavaScript dependencies (:pr:`5726`, :pr:`5752`)\n- Add support for the watchfiles live reloader (:pr:`5732`)\n- Add an endpoint to allow resetting the state of an accepted editable to \"ready to\n  review\" (:pr:`5758`)\n- Add RESTful endpoints for custom contribution fields (:pr:`5768`)\n\n\nVersion 3.2.3\n-------------\n\n*Released on February 23, 2023*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Sanitize HTML in global announcement messages\n- Update `cryptography <https://pypi.org/project/cryptography/>`_ library due to\n  vulnerabilities in OpenSSL (:cve:`CVE-2023-0286`)\n- Update `werkzeug <https://pypi.org/project/werkzeug/>`_ library due to a potential\n  Denial of Service vulnerability (:cve:`CVE-2023-25577`)\n\n.. note::\n\n    The risk of malicious HTML (e.g. scripts) in the global announcement is minimal\n    as only Indico administrators can set such an announcement anyway. However, in the\n    unlikely case that an administrator becomes malicious or is compromised, they would\n    have been be able to perform XSS against their Indico instance.\n\nImprovements\n^^^^^^^^^^^^\n\n- Include co-authors in abstract list columns and spreadsheet exports (:pr:`5605`)\n- Include speakers in abstract list columns and spreadsheet exports (:pr:`5615`)\n- Add an option to export all events in a series to ical at once (:issue:`5617`, :pr:`5620`)\n- Make it possible to load more events in series management (:pr:`5629`)\n- Check manually entered email addresses of speakers/authors/chairpersons\n  to avoid collisions and inconsistencies (:pr:`5478`)\n- Add option to use review track as accepted track when bulk-accepting abstracts\n  (:pr:`5608`)\n- Add setting to only allow managers to upload attachments to events and\n  contributions (:pr:`5597`)\n- Support Markdown when writing global announcement and apply standard HTML\n  sanitization to the message (:pr:`5640`)\n- Add BCC field on contribution email dialogs (:pr:`5637`)\n- Allow filtering by location in room booking (:issue:`4291`, :pr:`5622`,\n  thanks :user:`mindouro`)\n- Add button to adapt column widths in paper & contribution lists (:pr:`5642`)\n- Add event language settings to set default and additional languages (:issue:`5606`,\n  :pr:`5607`, thanks :user:`vasantvohra`)\n- Fail nicely when trying to import an event from another Indico instance (:issue:`5619`,\n  :pr:`5653`)\n- Add option to send reminders to invited registrants who have not yet responded\n  (:issue:`5579`, :pr:`5654`)\n- Hide the top box with the latest files of an editable until it has been accepted\n  and published (:issue:`5660`, :pr:`5665`)\n- Allow uploading files when requesting changes on the editing timeline (:pr:`5612`)\n- Add ``locked_fields`` to the identity provider settings in ``indico.conf`` to\n  prevent non-admin users from turning off their profile's personal data\n  synchronization (:pr:`5648`)\n- Add an option to sync event persons with users (:pr:`5677`)\n- Disallow repeated filenames in editing revisions (:pr:`5681`)\n- Add setting to hide peer-reviewed papers from participants even after they have\n  been accepted (:issue:`5666`, :pr:`5671`)\n- Prevent concurrent assignment of editors to editables (:pr:`5684`)\n- Add color labels to the filter dropdown (:issue:`5675`, :pr:`5680`)\n\nBugfixes\n^^^^^^^^\n\n- Correctly show contribution authors in participant roles list (:pr:`5603`)\n- Disable Sentry trace propagation to outgoing HTTP requests (:pr:`5604`)\n- Include token in notification emails for private surveys (:pr:`5618`)\n- Fix some API calls not working with personal access tokens (:pr:`5627`)\n- Correctly handle paragraphs and linebreaks in plaintext conversion (:pr:`5623`)\n- Send manager notifications and email participant if they withdraw from an event\n  (:issue:`5633`, :pr:`5638`, thanks :user:`kewisch`)\n- Do not break registrations with purged accommodation fields (:issue:`5641`,\n  :pr:`5643`)\n- Do not show blocked rooms as available on the very last day of the blocking\n  (:pr:`5663`)\n- Do not show blocked rooms as available for admins unles they have admin override\n  mode enabled (:pr:`5663`)\n- Fix roles resetting to the default ones when editing person data in an abstract\n  or contribution (:pr:`5664`)\n- Correctly show paragraphs in CKEditor fields (:issue:`5624`, :pr:`5656`, thanks\n  :user:`kewisch`)\n- Fix empty iCal file being attached when registering for a protected event\n  (:pr:`5688`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``rh.before-check-access`` signal (:pr:`5639`, thanks :user:`omegak`)\n- Add ``indico celery --watchman ...`` to run Celery with the Watchman reloader\n  (:pr:`5667`)\n- Allow overriding the cache TTL for remote group membership checks (:pr:`5672`)\n- Allow a custom editing workflow service to mark new editables as ready-for-review\n  without creating a new replacement revision (:pr:`5668`)\n- Update Python dependencies (:pr:`5689`)\n\n\nVersion 3.2.2\n-------------\n\n*Released on December 09, 2022*\n\nImprovements\n^^^^^^^^^^^^\n\n- Display program codes in 'My contributions' (:pr:`5573`)\n- Warn when a user cannot create an event in the current category (:pr:`5572`)\n- Display all contributions in 'My contributions' and not just those with\n  submitter privileges (:pr:`5575`)\n- Apply stronger sanitization on rich-text content pasted into CKEditor\n  (:issue:`5560`, :pr:`5571`)\n- Allow raw HTML snippets when editing custom conference pages and event\n  descriptions (:issue:`5584`, :pr:`5587`)\n- Warn more clearly that link attachments are just a link and do not copy\n  the file (:issue:`5551`, :pr:`5593`)\n- Add option to email people with specific roles about their contributions\n  or abstracts (:pr:`5598`)\n- Add setting to allow submitters to edit custom fields in their contributions\n  (:pr:`5599`)\n\nBugfixes\n^^^^^^^^\n\n- Fix broken links in some notification emails (:pr:`5567`)\n- Fix always-disabled submit button when submitting an agreement response\n  on someone's behalf (:pr:`5574`)\n- Disallow nonsensical retention periods and visibility durations (:pr:`5576`)\n- Fix sorting by program code in editable list (:pr:`5582`)\n- Do not strip custom CSS classes from HTML in CKEditor (:issue:`5584`, :pr:`5585`)\n- Use the instance's default locale instead of \"no locale\" (US-English) in places\n  where no better information is known for email recipients (:pr:`5586`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Refactor email-sending dialog using React (:pr:`5547`)\n\n\nVersion 3.2.1\n-------------\n\n*Released on November 10, 2022*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `cryptography <https://pypi.org/project/cryptography/>`_ library due to\n  vulnerabilities in OpenSSL (:cve:`CVE-2022-3602`, :cve:`CVE-2022-3786`)\n\n.. note::\n\n    We do not think that Indico is affected by those vulnerabilities as it does\n    not use the *cryptography* library itself, and the dependency that uses it\n    is only used during SSO (OAuth) logins and most likely in a way that is not\n    vulnerable. It is nonetheless recommended to update as soon as possible.\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- Make email templates translatable (:issue:`5263`, :pr:`5488`, thanks :user:`Leats`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Enable better image linking UI in CKEditor (:pr:`5492`)\n- Restore the \"fullscreen view\" option in CKEditor (:pr:`5505`)\n- Display & enforce judging deadline (:pr:`5506`)\n- Add a setting to disable entering persons in person link fields manually (:pr:`5499`)\n- Allow taking minutes in markdown (:issue:`3386`, :pr:`5500`, thanks :user:`Leats`)\n- Add setting to preselect \"Include users with no Indico account\" when adding\n  authors/speakers (:pr:`5553`)\n- Include event label in email reminders (:issue:`5554`, :pr:`5556`,\n  thanks :user:`omegak`)\n- Include emails of submitters, speakers and authors in abstract/contribution\n  Excel/CSV exports (:pr:`5565`)\n\nBugfixes\n^^^^^^^^\n\n- Fix meeting minutes being shown when they are expected to be hidden (:pr:`5475`)\n- Force default locale when generating Book of Abstracts (:pr:`5477`)\n- Fix width and height calculation when printing badges (:pr:`5479`)\n- Parse escaped quotes (``&quot;``) in ckeditor output correctly (:pr:`5487`)\n- Fix entering room name if room booking is enabled but has no locations (:pr:`5495`)\n- Fix privacy information dropdown not opening on Safari (:pr:`5507`)\n- Only let explicitly assigned reviewers review papers (:pr:`5527`)\n- Never count participants from a registration forms with a fully hidden participant\n  list for the total count on the participant page (:pr:`5532`)\n- Fix \"Session Legend\" not working in all-days timetable view (:pr:`5539`)\n- Fix exporting unlisted events via API (:pr:`5555`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Require at least Postgres 13 during new installations. This check can be\n  forced on older Postgres versions (11+ should work), but we make no guarantees\n  that nothing is broken (the latest version we test with is 12) (:pr:`5503`)\n- Refactor service request email generation so plugins can override sender and\n  reply-to addresses for these emails (:pr:`5501`)\n- Deleting a session no longer leaves orphaned session blocks (:pr:`5533`,\n  thanks :user:`omegak`)\n- Indicate in the ``registration_deleted`` signal whether it's a permanent deletion\n  from the database or just a soft-deletion (:pr:`5559`)\n\n\nVersion 3.2\n-----------\n\n*Released on August 25, 2022*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- The registration form frontend has been completely rewritten using modern web\n  technology.\n- Registrations can now have a retention period for the whole registration and\n  individual fields, after which their data is permanently deleted.\n- The participant list of an event can now use consent to determine whether a\n  participant should be displayed, and its visibility can be different for the\n  general public and other registered participants.\n- An event can now have one or more privacy notices and it's possible to set the\n  name and contact information of the \"Data controller\" (useful where GDPR or\n  similar legislation applies).\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: German\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a new event management permission that grants access only to the abstracts\n  module (:pr:`5212`)\n- Add a link to quickly view the current stylesheet on the conference layout\n  customization page (:issue:`5239`, :pr:`5259`)\n- Add more powerful filters to \"get next editable\" and the list of editables\n  (:issue:`5188`, :pr:`5224`, :pr:`5241`)\n- Add the ability to create speaker-only menu entries for conferences (:issue:`5261`,\n  :pr:`5268`)\n- Highlight changed fields in notification emails about modified registrations\n  (:issue:`5265`, :pr:`5269`)\n- Add an option to send notifications of new abstract comments (:issue:`5266`, :pr:`5284`)\n- Badge/poster templates can have additional images besides the background image\n  (:pr:`5273`, thanks :user:`SegiNyn`)\n- Add ability to add alerts to iCal exports (:issue:`5318`, :pr:`5320`, thanks\n  :user:`PerilousApricot`)\n- Show affiliations of submitters and authors in abstract/contribution lists and\n  add an extra column with this information to Excel/CSV exports (:pr:`5330`)\n- Add option to delete persons from the event if they have no roles or other ties\n  to the event anymore (:issue:`5294`, :pr:`5313`)\n- Allow events to be favorited (:issue:`1662`, :pr:`5338`, thanks :user:`Leats`)\n- Include abstract content in CSV/Excel export if enabled in the abstract list\n  (:issue:`5356`, :pr:`5372`, thanks :user:`rppt`)\n- Add the ability to include an optional static javascript file when defining\n  custom conference themes from within a plugin (:pr:`5414`, thanks :user:`brittyazel`)\n- Add option to make the 'Affiliation' and 'Comment' fields mandatory in the account\n  request form (:issue:`4819`, :pr:`5389`, thanks :user:`elsbethe`)\n- Include tags in registrant API (:pr:`5441`)\n- Subcontribution speakers can now be granted submission privileges in the event's\n  protection settings (:issue:`2363`, :pr:`5444`)\n- Registration forms can now require a CAPTCHA when the user is not logged in\n  (:issue:`4698`, :pr:`5400`)\n- Account creation now requires a CAPTCHA by default to prevent spam account creation\n  (:issue:`4698`, :pr:`5446`)\n- Add contribution's program code to revision's \"Download ZIP\" filename (:pr:`5449`)\n- Add UI to manage series of events (:issue:`4048`, :pr:`5436`, thanks :user:`Leats`)\n- Event series can now specify a title pattern to use when cloning an event in the\n  series (:pr:`5456`)\n- Insert new categories into the correct position if the list is already sorted (:pr:`5455`)\n- Images can now be uploaded by pasting or dropping them into the editor for minutes\n  or the event description (:pr:`5458`)\n- Add JSON export for contribution details (:pr:`5460`)\n\nBugfixes\n^^^^^^^^\n\n- Fix selected state filters not showing up as selected in abstract list customization\n  (:pr:`5363`)\n- Do not propose an impossible date/time in the Room Booking module when accessing it\n  shortly before midnight (:pr:`5371`)\n- Do not fail when viewing an abstract that has been reviewed in a track which has\n  been deleted in the meantime (:pr:`5386`)\n- Fix error when editing a room's nonbookable periods (:pr:`5390`)\n- Fix incorrect access check when directly accessing a registration form (:pr:`5406`)\n- Fix error in rate limiter when using Redis with a UNIX socket connection (:issue:`5391`)\n- Ensure that submitters with contribution edit privileges can only edit basic fields\n  (:pr:`5425`)\n- Do not return the whole contribution list when editing a contribution from elsewhere\n  (:pr:`5425`)\n- Fix session blocks not being sorted properly in a timetable PDF export when they\n  have the same start time (:pr:`5426`)\n- Fix printing badges containing text elements with malformed HTML (:pr:`5437`,\n  thanks :user:`omegak`)\n- Fix misleading start and end times for Poster contributions in the timetable HTTP API\n  and the contributions placeholder in emails (:pr:`5443`)\n- Do not mark persons as registered if the registration form has been deleted (:pr:`5448`)\n- Fix error when a room owner who is not an admin edits their room (:pr:`5457`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- When upgrading an existing instance, Postgres 11 or newer is required. The upgrade will\n  fail on Postgres 9.6 (or 10).\n- Add new ``regform-container-attrs`` template hook to pass additional (data-)attributes\n  to the React registration form containers (:pr:`5271`)\n- Add support for JavaScript plugin hooks to register objects or react components for use\n  by JS code that's in the core (:pr:`5271`)\n- Plugins can now define custom registration form fields (:pr:`5282`)\n- Add :data:`EMAIL_BACKEND` configuration variable to support different email sending\n  backends e.g. during development (:issue:`5375`, :pr:`5376`, thanks :user:`Moist-Cat`)\n- Make model attrs to clone interceptable by plugins (:pr:`5403`, thanks :user:`omegak`)\n- Add ``signal_query`` method in the ``IndicoBaseQuery`` class and the ``db_query``\n  signal, allowing to intercept and modify queries by signal handlers (:pr:`4981`,\n  thanks :user:`omegak`).\n- Update WYSIWYG editor to CKEditor 5, resulting in a slightly different look for the\n  editor controls and removal of some uncommon format options (:pr:`5345`)\n\n\n----\n\n\nVersion 3.1.2\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- Prevent access to a badge design of a deleted category or an event (:issue:`5329`,\n  :pr:`5334`, thanks :user:`vasantvohra`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Let payment plugins ignore pending transactions if they are expired (:pr:`5357`)\n\n\nVersion 3.1.1\n-------------\n\n*Released on April 27, 2022*\n\nImprovements\n^^^^^^^^^^^^\n\n- Prompt before leaving the event protection page without saving changes (:pr:`5222`)\n- Add the ability to clone abstracts (:pr:`5217`)\n- Add setting to allow submitters to edit their own contributions (:pr:`5213`)\n- Update the editing state color scheme (:pr:`5236`)\n- Include program codes in export API (:pr:`5246`)\n- Add abstract rating scores grouped by track (:pr:`5298`)\n- Allow uploading revisions when an editor hasn't been assigned (:pr:`5289`)\n\nBugfixes\n^^^^^^^^\n\n- Fix published editable files only being visible to users with access to the editing\n  timeline (:pr:`5218`)\n- Fix incorrect date in multi-day meeting date selector dropdown in certain timezones\n  (:pr:`5223`)\n- Remove excessive padding around category titles (:pr:`5225`)\n- Fix error when exporting registrations to PDFs that contained certain invalid HTML-like\n  sequences (:pr:`5233`)\n- Restore logical order of registration list columns (:pr:`5240`)\n- Fix a performance issue in the HTTP API when exporting events from a specific category\n  while specifying a limit (only affected large databases) (:pr:`5260`)\n- Correctly specify charset in iCalendar files attached to emails (:issue:`5228`,\n  :pr:`5258`, thanks :user:`imranyusuff`)\n- Fix very long map URLs breaking out of the event management settings box (:pr:`5275`)\n- Fix missing abstract withdrawal notification (:pr:`5281`)\n- Fix downloading files from editables without a published revision (:pr:`5290`)\n- Do not mark participants with deleted/inactive registrations as registered in\n  participant roles list (:pr:`5308`)\n- Do not enforce personal token name uniqueness across different users (:pr:`5317`)\n- Fix last modification date not updating when an abstract is edited (:pr:`5325`)\n- Fix a bug with poster and badge printing in unlisted events (:pr:`5322`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``category-sidebar`` template hook and blocks around category sidebar\n  sections (:pr:`5237`, thanks :user:`omegak`)\n- Add ``event.reminder.before_reminder_make_email`` signal (:pr:`5242`, thanks\n  :user:`vasantvohra`)\n- Add ``plugin.interceptable_function`` signal to intercept selected function\n  calls (:pr:`5254`)\n\n\nVersion 3.1\n-----------\n\n*Released on January 11, 2022*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Category managers now see a log of all changes made to their category in a\n  category log (similar to the event log). This log includes information about\n  all events being created, deleted or moved in the category (:issue:`2809`,\n  :pr:`5029`)\n- Besides letting everyone create events in a category or restricting it to\n  specific users, categories now also support a moderation workflow which allows\n  event managers to request moving an event to a category. Only once a category\n  manager approves this request, the event is actually moved (:issue:`2057`, :pr:`5013`)\n- Admins now have the option to enable \"Unlisted events\", which are events that\n  are not (yet) assigned to a category. Such events are only accessible to its\n  creator and other users who have been granted access explicitly, and do not\n  show up in any category's event listing (:issue:`4294`, :issue:`5055`, :pr:`5023`,\n  :pr:`5095`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Send event reminders as individual emails with the recipient in the To field\n  instead of using BCC (:issue:`2318`, :pr:`5088`)\n- Let event managers assign custom tags to registrations and filter the list\n  of registrations by the presence or absence of specific tags (:issue:`4948`,\n  :pr:`5091`)\n- Allow importing registration invitations from a CSV file (:issue:`3673`, :pr:`5108`)\n- Show event label on category overviews and in iCal event titles (:issue:`5140`,\n  :pr:`5143`)\n- Let event managers view the final timetable even while in draft mode (:issue:`5141`,\n  :pr:`5145`)\n- Add option to export role members as CSV (:issue:`5147`, :pr:`5156`)\n- Include attachment checksums in API responses (:issue:`5084`, :pr:`5169`, thanks\n  :user:`avivace`)\n- iCalendar invites now render nicely in Outlook (:pr:`5178`)\n- Envelope senders for emails can now be restricted to specific addresses/domains\n  using the :data:`SMTP_ALLOWED_SENDERS` and :data:`SMTP_SENDER_FALLBACK` config\n  settings (:issue:`4837`, :issue:`2224`, :issue:`1877`, :pr:`5179`)\n- Allow filtering the contribution list based on whether any person (speaker or author)\n  has registered for the event or not (:issue:`5192`, :pr:`5193`)\n- Add background color option and layer order to badge/poster designer items (:pr:`5139`,\n  thanks :user:`SegiNyn`)\n- Allow external users in event/category ACLs (:pr:`5146`)\n\nBugfixes\n^^^^^^^^\n\n- Fix :data:`CUSTOM_COUNTRIES` not overriding names of existing countries (:pr:`5183`)\n- Fix error dialog when submitting an invited abstract without being logger in (:pr:`5200`)\n- Fix category picker search displaying deleted categories (:issue:`5197`, :pr:`5203`)\n- Fix editing service API calls using the service token (:pr:`5170`)\n- Fix excessive retries for Celery tasks with a retry wait time longer\n  than 1 hour (:pr:`5172`)\n\n\n----\n\n\nVersion 3.0.4\n-------------\n\n*Unreleased*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow external users in event/category ACLs (:pr:`5146`)\n\nBugfixes\n^^^^^^^^\n\n- Fix editing service API calls using the service token (:pr:`5170`)\n- Fix excessive retries for Celery tasks with a retry wait time longer\n  than 1 hour (:pr:`5172`)\n\n\nVersion 3.0.3\n-------------\n\n*Released on October 28, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Protect authentication endpoints against CSRF login attacks (:pr:`5099`,\n  thanks :user:`omegak`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Support TLS certificates for SMTP authentication (:pr:`5100`, thanks :user:`dweinholz`)\n- Add CSV/Excel contribution list exports containing affiliations (:issue:`5114`, :pr:`5118`)\n- Include program codes in contribution PDFs and spreadsheets (:pr:`5126`)\n- Add an API for bulk-assigning contribution program codes programmatically (:issue:`5115`,\n  :pr:`5120`)\n- Add layout setting to show videoconferences on the main conference page (:pr:`5124`)\n\nBugfixes\n^^^^^^^^\n\n- Fix certain registration list filters (checkin status & state) being combined\n  with OR instead of AND (:pr:`5101`)\n- Fix translations not being taken into account in some places (:issue:`5073`, :pr:`5105`)\n- Use correct/consistent field order for personal data fields in newly created\n  registration forms\n- Remove deleted registration forms from ACLs (:issue:`5130`, :pr:`5131`, thanks\n  :user:`jbtwist`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Truncate file names to 150 characters to avoid hitting file system path limits\n  (:pr:`5116`, thanks :user:`vasantvohra`)\n\n\nVersion 3.0.2\n-------------\n\n*Released on September 09, 2021*\n\nBugfixes\n^^^^^^^^\n\n- Fix JavaScript errors on the login page which caused problems when using multiple\n  form-based login methods (e.g. LDAP and local Indico accounts)\n\n\nVersion 3.0.1\n-------------\n\n*Released on September 08, 2021*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow filtering abstracts by custom fields having no value (:issue:`5033`, :pr:`5034`)\n- Add support for syncing email addresses when logging in using external accounts\n  (:pr:`5035`)\n- Use more space-efficient QR code version in registration tickets (:pr:`5052`)\n- Improve user experience when accessing an event restricted to registered participants\n  while not logged in (:pr:`5053`)\n- When searching external users, prefer results with a name in case of multiple matches\n  with the same email address (:pr:`5066`)\n- Show program codes in additional places (:pr:`5075`)\n- Display localized country names (:issue:`5070`, :pr:`5076`)\n\nBugfixes\n^^^^^^^^\n\n- Show correct placeholders in date picker fields (:pr:`5022`)\n- Correctly preselect the default currency when creating a registration form\n- Do not notify registrants when a payment transaction is created in \"pending\" state\n- Keep the order of multi-choice options in registration summary (:issue:`5020`, :pr:`5032`)\n- Correctly handle relative URLs in PDF generation (:issue:`5042`, :pr:`5044`)\n- Render markdown in track descriptions in PDF generation (:issue:`5043`, :pr:`5044`)\n- Fix error when importing chairpersons from an existing event (:pr:`5047`)\n- Fix broken timetable entry permalinks when query string args are present (:pr:`5049`)\n- Do not show \"Payments\" event management menu entry for registration managers\n  (:issue:`5072`)\n- Replace some hardcoded date formats with locale-aware ones (:issue:`5059`, :pr:`5071`)\n- Clone the scientific program description together with tracks (:pr:`5077`)\n- Fix database error when importing registrations to an event that already contains a\n  deleted registration form with registrations (:pr:`5078`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``event.before_check_registration_email`` signal (:pr:`5021`, thanks :user:`omegak`)\n- Do not strip image maps in places where HTML is allowed (:pr:`5026`, thanks\n  :user:`bpedersen2`)\n- Add ``event.registration.after_registration_form_clone`` signal (:pr:`5037`, thanks\n  :user:`vasantvohra`)\n- Add ``registration-invite-options`` template hook (:pr:`5045`, thanks :user:`vasantvohra`)\n- Fix Typeahead widget not working with extra validators (:issue:`5048`, :pr:`5050`,\n  thanks :user:`jbtwist`)\n\n\nVersion 3.0\n-----------\n\n*Released on July 16, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add system notices which inform administrators about important things such as security\n  problems or outdated Python/Postgres versions. These notices are retrieved once a day\n  without sending any data related to the Indico instance, but if necessary, this feature\n  can be disabled by setting :data:`SYSTEM_NOTICES_URL` to ``None`` in ``indico.conf``\n  (:pr:`5004`)\n- It is now possible to use :ref:`SAML SSO <saml>` for authentication without the need for\n  Shibboleth and Apache (:pr:`5014`)\n\nBugfixes\n^^^^^^^^\n\n- Fix formatting and datetime localization in various PDF exports and timetable tab headers\n  (:pr:`5009`)\n- Show lecture speakers as speakers instead of chairpersons on the participant roles page\n  (:pr:`5008`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Signals previously exposed directly via ``signals.foo`` now need to be accessed using their\n  explicit name, i.e. ``signals.core.foo`` (:pr:`5007`)\n- Add ``category.extra_events`` signal (:pr:`5005`, thanks :user:`omegak`)\n\n\nVersion 3.0rc2\n--------------\n\n*Released on July 09, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add support for personal tokens. These tokens act like OAuth tokens, but are\n  associated with a specific user and generated manually without the need of\n  doing the OAuth flow. They can be used like API keys but with better granularity\n  using the same scopes OAuth applications have, and a single user can have multiple\n  tokens using various scopes. By default any user can create such tokens, but admins\n  can restrict their creation.\n  (:issue:`1934`, :pr:`4976`)\n\nImprovements\n^^^^^^^^^^^^\n\n- Add abstract content to the abstract list customization options (:pr:`4968`)\n- Add CLI option to create a series (:pr:`4969`)\n- Users cannot submit multiple anonymous surveys anymore by logging out and in again\n  (:issue:`4693`, :pr:`4970`)\n- Improve reviewing state display for paper reviewers (:issue:`4979`, :pr:`4984`)\n- Make it clearer if the contributions/timetable of a conference are still in draft mode\n  (:issue:`4977`, :pr:`4986`)\n- Add \"send to speakers\" option in event reminders (:issue:`4958`, :pr:`4966`, thanks\n  :user:`Naveenaidu`)\n- Allow displaying all events descending from a category (:issue:`4982`,\n  :pr:`4983`, thanks :user:`omegak` and :user:`openprojects`).\n- Add an option to allow non-judge conveners to update an abstract track (:pr:`4989`)\n\nBugfixes\n^^^^^^^^\n\n- Fix errors when importing events containing abstracts or event roles from a YAML dump\n  (:pr:`4995`)\n- Fix sorting abstract notification rules (:pr:`4998`)\n- No longer silently fall back to the first event contact email address when sending\n  registration emails where no explicit sender address has been configured (:issue:`4992`,\n  :pr:`4996`, thanks :user:`vasantvohra`)\n- Do not check for event access when using a registration link with a registration token\n  (:issue:`4991`, :pr:`4997`, thanks :user:`vasantvohra`)\n\n\nVersion 3.0rc1\n--------------\n\n*Released on June 25, 2021*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- There is a new built-in search module which provides basic search functionality out\n  of the box, and for more advanced needs (such as full text search in uploaded files)\n  plugins can provide their own search functionality (e.g. using ElasticSearch).\n  (:pr:`4841`)\n- Categories may now contain both events and subcategories at the same time. During the\n  upgrade to 3.0 event creation is automatically set to restricted in all categories\n  containing subcategories in order to avoid any negative surprises which would suddenly\n  allow random Indico users to create events in places where they couldn't do so previously.\n  (:issue:`4679`, :pr:`4725`, :pr:`4757`)\n- The OAuth provider module has been re-implemented based on a more modern\n  library (authlib). Support for the somewhat insecure *implicit flow* has been\n  removed in favor of the code-with-PKCE flow. Tokens are now stored more securely\n  as a hash instead of plaintext. For a given user/app/scope combination, only a\n  certain amount of tokens are stored; once the limit has been reached older tokens\n  will be discarded. The OAuth provider now exposes its metadata via a well-known\n  URI (RFC 8414) and also has endpoints to introspect or revoke a token. (:issue:`4685`,\n  :pr:`4798`)\n- User profile pictures (avatars) are now shown in many more places throughout Indico,\n  such as user search results, meeting participant lists and reviewing timelines.\n  (:issue:`4625`, :pr:`4747`, :pr:`4939`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New locale: English (United States)\n- New translation: Turkish\n\nImprovements\n^^^^^^^^^^^^\n\n- Use a more modern search dialog when searching for users (:issue:`4674`, :pr:`4743`)\n- Add an option to refresh event person data from the underlying user when cloning an\n  event (:issue:`4750`, :pr:`4760`)\n- Add options for attaching iCal files to complete registration and event reminder\n  emails (:issue:`1158`, :pr:`4780`)\n- Use the new token-based URLs instead of API keys for persistent ical links and replace\n  the calendar link widgets in category, event, session and contribution views with the\n  more modern ones used in dashboard (:issue:`4776`, :pr:`4801`)\n- Add an option to export editables to JSON (:issue:`4767`, :pr:`4810`)\n- Add an option to export paper peer reviewing data to JSON (:issue:`4767`, :pr:`4818`)\n- Passwords are now checked against a list of breached passwords (\"Have I Been Pwned\")\n  in a secure and anonymous way that does not disclose any data. If a user logs in with\n  an insecure password, they are forced to change it before they can continue using Indico\n  (:pr:`4817`)\n- Failed login attempts now trigger rate limiting to prevent brute-force attacks\n  (:issue:`1550`, :pr:`4817`)\n- Allow filtering the \"Participant Roles\" page by users who have not registered for the event\n  (:issue:`4763`, :pr:`4822`)\n- iCalendar exports now include contact data, event logo URL and, when exporting\n  sessions/contributions, the UID of the related event. Also, only non-empty fields\n  are exported. (:issue:`4785`, :issue:`4586`, :issue:`4587`, :issue:`4791`,\n  :pr:`4820`)\n- Allow adding groups/roles as \"authorized abstract submitters\" (:pr:`4834`)\n- Direct links to (sub-)contributions in meetings using the URLs usually meant for\n  conferences now redirect to the meeting view page (:pr:`4847`)\n- Use a more compact setup QR code for the mobile *Indico check-in* app; the latest version of\n  the app is now required. (:pr:`4844`)\n- Contribution duration fields now use a widget similar to the time picker that makes selecting\n  durations easier. (:issue:`2462`, :pr:`4873`)\n- Add new meeting themes that show sequential numbers instead of start times for contributions\n  (:pr:`4899`)\n- Remove the very outdated \"Compact style\" theme (it's still available via the ``themes_legacy``\n  plugin) (:issue:`4900`, :pr:`4899`)\n- Support cloning surveys when cloning events (:issue:`2045`, :pr:`4910`)\n- Show external contribution references in conferences (:issue:`4928`, :pr:`4933`)\n- Allow changing the rating scale in abstract/paper reviewing even after reviewing started (:pr:`4942`)\n- Allow blacklisting email addresses for user registrations (:issue:`4644`, :pr:`4946`)\n\nBugfixes\n^^^^^^^^\n\n- Take registrations of users who are only members of a custom event role into account on the\n  \"Participant Roles\" page (:pr:`4822`)\n- Fail gracefully during registration import when two rows have different emails that belong\n  to the same user (:pr:`4823`)\n- Restore the ability to see who's inheriting access from a parent object (:pr:`4833`)\n- Fix misleading message when cancelling a booking that already started and has past\n  occurrences that won't be cancelled (:issue:`4719`, :pr:`4861`)\n- Correctly count line breaks in length-limited abstracts (:pr:`4918`)\n- Fix error when trying to access subcontributions while event is in draft mode\n- Update the user link in registrations when merging two users (:pr:`4936`)\n- Fix error when exporting a conference timetable PDF with the option \"Print abstract content of all\n  contributions\" and one of the abstracts is too big to fit in a page (:issue:`4881`, :pr:`4955`)\n- Emails sent via the Editing module are now logged to the event log (:pr:`4960`)\n- Fix error when importing event notes from another event while the target event already\n  has a deleted note (:pr:`4959`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Require Python 3.9 - older Python versions (especially Python 2.7) are **no longer supported**\n- ``confId`` has been changed to ``event_id`` and the corresponding URL path segments\n  now enforce numeric data (and thus pass the id as a number instead of string)\n- ``CACHE_BACKEND`` has been removed; Indico now always uses Redis for caching\n- The integration with flower (celery monitoring tool) has been removed as it was not widely used,\n  did not provide much benefit, and it is no longer compatible with the latest Celery version\n- ``session.user`` now returns the user related to the current request, regardless of whether\n  it's coming from OAuth, a signed url or the actual session (:pr:`4803`)\n- Add a new ``check_password_secure`` signal that can be used to implement additional password\n  security checks (:pr:`4817`)\n- Add an endpoint to let external applications stage the creation of an event with some data to be\n  pre-filled when the user then opens the link returned by that endpoint (:pr:`4628`, thanks\n  :user:`adl1995`)\n\n\n----\n\n\nVersion 2.3.6\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- None so far :)\n\n\nVersion 2.3.5\n-------------\n\n*Released on May 11, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix XSS vulnerabilities in the category picker (via category titles), location widget (via room and\n  venue names defined by an Indico administrator) and the \"Indico Weeks View\" timetable theme (via\n  contribution/break titles defined by an event organizer). As neither of these objects can be created\n  by untrusted users (on a properly configured instance) we consider the severity of this vulnerability\n  \"minor\" (:pr:`4897`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Polish\n- New translation: Mongolian\n\nImprovements\n^^^^^^^^^^^^\n\n- Add an option to not disclose the names of editors and commenters to submitters in the\n  Paper Editing module (:issue:`4829`, :pr:`4865`)\n\nBugfixes\n^^^^^^^^\n\n- Do not show soft-deleted long-lasting events in category calendar (:pr:`4824`)\n- Do not show management-related links in editing hybrid view unless the user has\n  access to them (:pr:`4830`)\n- Fix error when assigning paper reviewer roles with notifications enabled and one\n  of the reviewing types disabled (:pr:`4838`)\n- Fix viewing timetable entries if you cannot access the event but a specific session\n  inside it (:pr:`4857`)\n- Fix viewing contributions if you cannot access the event but have explicit access to\n  the contribution (:pr:`4860`)\n- Hide registration menu item if you cannot access the event and registrations are not\n  exempt from event access checks (:pr:`4860`)\n- Fix inadvertently deleting a file uploaded during the \"make changes\" Editing action,\n  resulting in the revision sometimes still referencing the file even though it has been\n  deleted from storage (:pr:`4866`)\n- Fix sorting abstracts by date (:pr:`4877`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``before_notification_send`` signal (:pr:`4874`, thanks :user:`omegak`)\n\n\nVersion 2.3.4\n-------------\n\n*Released on March 11, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix some open redirects which could help making harmful URLs look more trustworthy by linking\n  to Indico and having it redirect the user to a malicious site (:issue:`4814`, :pr:`4815`)\n- The :data:`BASE_URL` is now always enforced and requests whose Host header does not match\n  are rejected. This prevents malicious actors from tricking Indico into sending e.g. a\n  password reset link to a user that points to a host controlled by the attacker instead of\n  the actual Indico host (:pr:`4815`)\n\n.. note::\n\n    If the webserver is already configured to enforce a canonical host name and redirects or\n    rejects such requests, this cannot be exploited. Additionally, exploiting this problem requires\n    user interaction: they would need to click on a password reset link which they never requested,\n    and which points to a domain that does not match the one where Indico is running.\n\nImprovements\n^^^^^^^^^^^^\n\n- Fail more gracefully is a user has an invalid locale set and fall back to the default\n  locale or English in case the default locale is invalid as well\n- Log an error if the configured default locale does not exist\n- Add ID-1 page size for badge printing (:pr:`4774`, thanks :user:`omegak`)\n- Allow managers to specify a reason when rejecting registrants and add a new placeholder\n  for the rejection reason when emailing registrants (:pr:`4769`, thanks :user:`vasantvohra`)\n\nBugfixes\n^^^^^^^^\n\n- Fix the \"Videoconference Rooms\" page in conference events when there are any VC rooms\n  attached but the corresponding plugin is no longer installed\n- Fix deleting events which have a videoconference room attached which has its VC plugin\n  no longer installed\n- Do not auto-redirect to SSO when an MS office user agent is detected (:issue:`4720`,\n  :pr:`4731`)\n- Allow Editing team to view editables of unpublished contributions (:issue:`4811`, :pr:`4812`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Also trigger the ``ical-export`` metadata signal when exporting events for a whole category\n- Add ``primary_email_changed`` signal (:pr:`4802`, thanks :user:`openprojects`)\n\n\nVersion 2.3.3\n-------------\n\n*Released on January 25, 2021*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- JSON locale data for invalid locales is no longer cached on disk; instead a 404 error is\n  triggered. This avoids creating small files in the cache folder for each invalid locale\n  that is requested. (:pr:`4766`)\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Ukrainian\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a new \"Until approved\" option for a registration form's \"Modification allowed\"\n  setting (:pr:`4740`, thanks :user:`vasantvohra`)\n- Show last login time in dashboard (:pr:`4735`, thanks :user:`vasantvohra`)\n- Allow Markdown in the \"Message for complete registrations\" option of a registration\n  form (:pr:`4741`)\n- Improve video conference linking dropdown for contributions/sessions (hide unscheduled,\n  show start time) (:pr:`4753`)\n- Show timetable filter button in conferences with a meeting-like timetable\n\nBugfixes\n^^^^^^^^\n\n- Fix error when converting malformed HTML links to LaTeX\n- Hide inactive contribution/abstract fields in submit/edit forms (:pr:`4755`)\n- Fix adding registrants to a session ACL\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Videoconference plugins may now display a custom message for the prompt when deleting\n  a videoconference room (:pr:`4733`)\n- Videoconference plugins may now override the behavior when cloning an event with\n  attached videoconference rooms (:pr:`4732`)\n\n\nVersion 2.3.2\n-------------\n\n*Released on November 30, 2020*\n\nImprovements\n^^^^^^^^^^^^\n\n- Disable title field by default in new registration forms (:issue:`4688`, :pr:`4692`)\n- Add gender-neutral \"Mx\" title (:issue:`4688`, :pr:`4692`)\n- Add contributions placeholder for emails (:pr:`4716`, thanks :user:`bpedersen2`)\n- Show program codes in contribution list (:pr:`4713`)\n- Display the target URL of link materials if the user can access them (:issue:`2599`,\n  :pr:`4718`)\n- Show the revision number for all revisions in the Editing timeline (:pr:`4708`)\n\nBugfixes\n^^^^^^^^\n\n- Only consider actual speakers in the \"has registered speakers\" contribution list filter\n  (:pr:`4712`, thanks :user:`bpedersen2`)\n- Correctly filter events in \"Sync with your calendar\" links (this fix only applies to newly\n  generated links) (:pr:`4717`)\n- Correctly grant access to attachments inside public sessions/contribs even if the event\n  is more restricted (:pr:`4721`)\n- Fix missing filename pattern check when suggesting files from Paper Peer Reviewing to submit\n  for Editing (:pr:`4715`)\n- Fix filename pattern check in Editing when a filename contains dots (:pr:`4715`)\n- Require explicit admin override (or being whitelisted) to override blockings (:pr:`4706`)\n- Clone custom abstract/contribution fields when cloning abstract settings (:pr:`4724`,\n  thanks :user:`bpedersen2`)\n- Fix error when rescheduling a survey that already has submissions (:issue:`4730`)\n\n\nVersion 2.3.1\n-------------\n\n*Released on October 27, 2020*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n- Fix potential data leakage between OAuth-authenticated and unauthenticated HTTP API requests\n  for the same resource (:pr:`4663`)\n\n.. note::\n\n    Due to OAuth access to the HTTP API having been broken until this version, we do not\n    believe this was actually exploitable on any Indico instance. In addition, only Indico\n    administrators can create OAuth applications, so regardless of the bug there is no risk\n    for any instance which does not have OAuth applications with the ``read:legacy_api``\n    scope.\n\nImprovements\n^^^^^^^^^^^^\n\n- Generate material packages in a background task to avoid timeouts or using excessive\n  amounts of disk space in case of people submitting several times (:pr:`4630`)\n- Add new :data:`EXPERIMENTAL_EDITING_SERVICE` setting to enable extending an event's Editing\n  workflow through an `OpenReferee server <https://github.com/indico/openreferee/>`_ (:pr:`4659`)\n\nBugfixes\n^^^^^^^^\n\n- Only show the warning about draft mode in a conference if it actually has any\n  contributions or timetable entries\n- Do not show incorrect modification deadline in abstract management area if no\n  such deadline has been set (:pr:`4650`)\n- Fix layout problem when minutes contain overly large embedded images (:issue:`4653`,\n  :pr:`4654`)\n- Prevent pending registrations from being marked as checked-in (:pr:`4646`, thanks\n  :user:`omegak`)\n- Fix OAuth access to HTTP API (:pr:`4663`)\n- Fix ICS export of events with draft timetable and contribution detail level\n  (:pr:`4666`)\n- Fix paper revision submission field being displayed for judges/reviewers (:pr:`4667`)\n- Fix managers not being able to submit paper revisions on behalf of the user (:pr:`4667`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add ``registration_form_wtform_created`` signal and send form data in\n  ``registration_created`` and ``registration_updated`` signals (:pr:`4642`,\n  thanks :user:`omegak`)\n- Add ``logged_in`` signal\n\n\nVersion 2.3\n-----------\n\n*Released on September 14, 2020*\n\n.. note::\n\n    We also published a `blog post <https://getindico.io/indico/update/release/milestone/2020/07/22/indico-2-3-news.html>`_\n    summarizing the most relevant changes for end users.\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add category roles, which are similar to local groups but within the\n  scope of a category and its subcategories. They can be used for assigning\n  permissions in any of these categories and events within such categories.\n- Events marked as \"Invisible\" are now hidden from the category's event list\n  for everyone except managers (:issue:`4419`, thanks :user:`openprojects`)\n- Introduce profile picture, which is for now only visible on the user dashboard\n  (:issue:`4431`, thanks :user:`omegak`)\n- Registrants can now be added to event ACLs. This can be used to easily restrict\n  parts of an event to registered participants. If registration is open and a registration\n  form is in the ACL, people will be able to access the registration form even if they\n  would otherwise not have access to the event itself. It is also possible to restrict\n  individual event materials and custom page/link menu items to registered participants.\n  (:issue:`4477`, :issue:`4528`, :issue:`4505`, :issue:`4507`)\n- Add a new Editing module for papers, slides and posters which provides a workflow\n  for having a team review the layout/formatting of such proceedings and then publish\n  the final version on the page of the corresponding contribution. The Editing module\n  can also be connected to an external microservice to handle more advanced workflows\n  beyond what is supported natively by Indico.\n\nInternationalization\n^^^^^^^^^^^^^^^^^^^^\n\n- New translation: Chinese (Simplified)\n\nImprovements\n^^^^^^^^^^^^\n\n- Sort survey list by title (:issue:`3802`)\n- Hide \"External IDs\" field if none are defined (:issue:`3857`)\n- Add LaTeX source export for book of abstracts (:issue:`4035`,\n  thanks :user:`bpedersen2`)\n- Tracks can now be categorized in track groups (:issue:`4052`)\n- Program codes for sessions, session blocks, contributions and\n  subcontributions can now be auto-generated (:issue:`4026`)\n- Add draft mode for the contribution list of conference events\n  which hides pages like the contribution list and timetable until\n  the event organizers publish the contribution list. (:issue:`4095`)\n- Add ICS export for information in the user dashboard (:issue:`4057`)\n- Allow data syncing with multipass providers which do not support\n  refreshing identity information\n- Show more verbose error when email validation fails during event\n  registration (:issue:`4177`)\n- Add link to external map in room details view (:issue:`4146`)\n- Allow up to 9 digits (instead of 6) before the decimal point in\n  registration fees\n- Add button to booking details modal to copy direct link (:issue:`4230`)\n- Do not require new room manager approval when simply shortening a booking\n  (:issue:`4214`)\n- Make root category description/title customizable using the normal\n  category settings form (:issue:`4231`)\n- Added new :data:`LOCAL_GROUPS` setting that can be used to fully disable\n  local groups (:issue:`4260`)\n- Log bulk event category changes in the event log (:issue:`4241`)\n- Add CLI commands to block and unblock users (:issue:`3845`)\n- Show warning when trying to merge a blocked user (:issue:`3845`)\n- Allow importing event role members from a CSV file (:issue:`4301`)\n- Allow optional comment when accepting a pre-booking (:issue:`4086`)\n- Log event restores in event log (:issue:`4309`)\n- Warn about cancelling/rejecting whole recurring bookings instead of just\n  specific occurrences (:issue:`4092`)\n- Add \"quick cancel\" link to room booking reminder emails (:issue:`4324`)\n- Add visual information and filtering options for participants'\n  registration status to the contribution list (:issue:`4318`)\n- Add warning when accepting a pre-booking in case there are\n  concurrent bookings (:issue:`4129`)\n- Add event logging to opening/closing registration forms, approval/rejection of\n  registrations, and updates to event layout (:issue:`4360`,\n  thanks :user:`giusedb` & :user:`omegak`)\n- Add category navigation dialog on category display page (:issue:`4282`,\n  thanks :user:`omegak`)\n- Add UI for admins to block/unblock users (:issue:`3243`)\n- Show labels indicating whether a user is an admin, blocked or soft-deleted\n  (:issue:`4363`)\n- Add map URL to events, allowing also to override room map URL (:issue:`4402`,\n  thanks :user:`omegak`)\n- Use custom time picker for time input fields taking into account the 12h/24h\n  format of the user's locale (:issue:`4399`)\n- Refactor the room edit modal to a tabbed layout and improve error\n  handling (:issue:`4408`)\n- Preserve non-ascii characters in file names (:issue:`4465`)\n- Allow resetting moderation state from registration management view\n  (:issue:`4498`, thanks :user:`omegak`)\n- Allow filtering event log by related entries (:issue:`4503`, thanks\n  :user:`omegak`)\n- Do not automatically show the browser's print dialog in a meeting's print\n  view (:issue:`4513`)\n- Add \"Add myself\" button to person list fields (e.g. for abstract authors)\n  (:issue:`4411`, thanks :user:`jgrigera`)\n- Subcontributions can now be managed from the meeting display view (:issue:`2679`,\n  :pr:`4520`)\n- Add CfA setting to control whether authors can edit abstracts (:issue:`3431`)\n- Add CfA setting to control whether only speakers or also authors should\n  get submission rights once the abstract gets accepted (:issue:`3431`)\n- Show the Indico version in the footer again (:issue:`4558`)\n- Event managers can upload a custom Book of Abstract PDF (:issue:`3039`,\n  :pr:`4577`)\n- Display each news item on a separate page instead of together with all the\n  other news items (:pr:`4587`)\n- Allow registrants to withdraw their application (:issue:`2715`, :pr:`4585`,\n  thanks :user:`brabemi` & :user:`omegak`)\n- Allow choosing a default badge in categories (:pr:`4574`, thanks\n  :user:`omegak`)\n- Display event labels on the user's dashboard as well (:pr:`4592`)\n- Event modules can now be imported from another event (:issue:`4518`, thanks :user:`meluru`)\n- Event modules can now be imported from another event (:issue:`4518`, :pr:`4533`,\n  thanks :user:`meluru`)\n- Include the event keywords in the event API data (:issue:`4598`, :pr:`4599`,\n  thanks :user:`chernals`)\n- Allow registrants to check details for non-active registrations and prevent\n  them from registering twice with the same registration form (:issue:`4594`,\n  :pr:`4595`, thanks :user:`omegak`)\n- Add a new :data:`CUSTOM_LANGUAGES` setting to ``indico.conf`` to override the\n  name/territory of a language or disable it altogether (:pr:`4620`)\n\nBugfixes\n^^^^^^^^\n\n- Hide Book of Abstracts menu item if LaTeX is disabled and no custom Book\n  of Abstracts has been uploaded\n- Use a more consistent order when cloning the timetable (:issue:`4227`)\n- Do not show unrelated rooms with similar names when booking room from an\n  event (:issue:`4089`)\n- Stop icons from overlapping in the datetime widget (:issue:`4342`)\n- Fix alignment of materials in events (:issue:`4344`)\n- Fix misleading wording in protection info message (:issue:`4410`)\n- Allow guests to access public notes (:issue:`4436`)\n- Allow width of weekly event overview table to adjust to window\n  size (:issue:`4429`)\n- Fix whitespace before punctuation in Book of Abstracts (:pr:`4604`)\n- Fix empty entries in corresponding authors (:pr:`4604`)\n- Actually prevent users from editing registrations if modification is\n  disabled\n- Handle LaTeX images with broken redirects (:pr:`4623`, thanks :user:`bcc`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Make React and SemanticUI usable everywhere (:issue:`3955`)\n- Add ``before-regform`` template hook (:issue:`4171`, thanks :user:`giusedb`)\n- Add ``registrations`` kwarg to the ``event.designer.print_badge_template``\n  signal (:issue:`4297`, thanks :user:`giusedb`)\n- Add ``registration_form_edited`` signal (:issue:`4421`, thanks :user:`omegak`)\n- Make PyIntEnum freeze enums in Alembic revisions (:issue:`4425`, thanks\n  :user:`omegak`)\n- Add ``before-registration-summary`` template hook (:issue:`4495`, thanks\n  :user:`omegak`)\n- Add ``extra-registration-actions`` template hook (:issue:`4500`, thanks\n  :user:`omegak`)\n- Add ``event-management-after-title`` template hook (:issue:`4504`, thanks\n  :user:`meluru`)\n- Save registration id in related event log entries (:issue:`4503`, thanks\n  :user:`omegak`)\n- Add ``before-registration-actions`` template hook (:issue:`4524`, thanks\n  :user:`omegak`)\n- Add ``LinkedDate`` and ``DateRange`` form field validators (:issue:`4535`,\n  thanks :user:`omegak`)\n- Add ``extra-regform-settings`` template hook (:issue:`4553`, thanks\n  :user:`meluru`)\n- Add ``filter_selectable_badges`` signal (:issue:`4557`, thanks :user:`omegak`)\n- Add user ID in every log record logged in a request context (:issue:`4570`,\n  thanks :user:`omegak`)\n- Add ``extra-registration-settings`` template hook (:pr:`4596`, thanks\n  :user:`meluru`)\n- Allow extending polymorphic models in plugins (:pr:`4608`, thanks\n  :user:`omegak`)\n- Wrap registration form AngularJS directive in jinja block for more easily\n  overriding arguments passed to the app in plugins (:pr:`4624`, thanks\n  :user:`omegak`)\n\n\n----\n\n\nVersion 2.2.9\n-------------\n\n*Unreleased*\n\nBugfixes\n^^^^^^^^\n\n- Fix error when building LaTeX PDFs if the temporary event logo path contained\n  an underscore (:issue:`4521`)\n- Disallow storing invalid timezones in user settings and reduce risk of sending\n  wrong timezone names when people automatically translate their UI (:issue:`4529`)\n\n\nVersion 2.2.8\n-------------\n\n*Released on April 08, 2020*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `bleach <https://github.com/mozilla/bleach>`_ to fix a regular expression\n  denial of service vulnerability\n- Update `Pillow <https://github.com/python-pillow/Pillow>`_ to fix a buffer overflow\n  vulnerability\n\n\nVersion 2.2.7\n-------------\n\n*Released on March 23, 2020*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add support for event labels to indicate e.g. postponed or cancelled\n  events (:issue:`3199`)\n\nBugfixes\n^^^^^^^^\n\n- Allow slashes in roomName export API\n- Show names instead of IDs of local groups in ACLs (:issue:`3700`)\n\n\nVersion 2.2.6\n-------------\n\n*Released on February 27, 2020*\n\nBugfixes\n^^^^^^^^\n\n- Fix some email fields (error report contact, agreement cc address) being\n  required even though they should be optional\n- Avoid browsers prefilling stored passwords in togglable password fields\n  such as the event access key\n- Make sure that tickets are not attached to emails sent to registrants for whom\n  tickets are blocked (:issue:`4242`)\n- Fix event access key prompt not showing when accessing an attachment link\n  (:issue:`4255`)\n- Include event title in OpenGraph metadata (:issue:`4288`)\n- Fix error when viewing abstract with reviews that have no scores\n- Update requests and pin idna to avoid installing incompatible dependency versions\n  (:issue:`4327`)\n\n\nVersion 2.2.5\n-------------\n\n*Released on December 06, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Sort posters in timetable PDF export by board number (:issue:`4147`, thanks\n  :user:`bpedersen2`)\n- Use lat/lng field order instead of lng/lat when editing rooms (:issue:`4150`,\n  thanks :user:`bpedersen2`)\n- Add additional fields to the contribution csv/xlsx export (authors and board\n  number) (:issue:`4148`, thanks :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Update the Pillow library to 6.2.1. This fixes an issue where some malformed images\n  could result in high memory usage or slow processing.\n- Truncate long speaker names in the timetable instead of hiding them (:issue:`4110`)\n- Fix an issue causing errors when using translations for languages with no plural\n  forms (like Chinese).\n- Fix creating rooms without touching the longitude/latitude fields (:issue:`4115`)\n- Fix error in HTTP API when Basic auth headers are present (:issue:`4123`,\n  thanks :user:`uxmaster`)\n- Fix incorrect font size in some room booking dropdowns (:issue:`4156`)\n- Add missing email validation in some places (:issue:`4158`)\n- Reject requests containing NUL bytes in the POST data (:issue:`4159`)\n- Fix truncated timetable PDF when using \"Print each session on a separate page\" in\n  an event where the last timetable entry of the day is a top-level contribution\n  or break (:issue:`4134`, thanks :user:`bpedersen2`)\n- Only show public contribution fields in PDF exports (:issue:`4165`)\n- Allow single arrival/departure date in accommodation field (:issue:`4164`,\n  thanks :user:`bpedersen2`)\n\n\nVersion 2.2.4\n-------------\n\n*Released on October 16, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix more places where LaTeX input was not correctly sanitized. While the biggest\n  security impact (reading local files) has already been mitigated when fixing the\n  initial vulnerability in the previous release, it is still strongly recommended\n  to update.\n\n\nVersion 2.2.3\n-------------\n\n*Released on October 08, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Strip ``@``, ``+``, ``-`` and ``=`` from the beginning of strings when exporting\n  CSV files to avoid `security issues <https://www.owasp.org/index.php/CSV_Injection>`_\n  when opening the CSV file in Excel\n- Use 027 instead of 000 umask when temporarily changing it to get the current umask\n- Fix LaTeX sanitization to prevent malicious users from running unsafe LaTeX commands\n  through specially crafted abstracts or contribution descriptions, which could lead to\n  the disclosure of local file contents\n\nImprovements\n^^^^^^^^^^^^\n\n- Improve room booking interface on small-screen devices (:issue:`4013`)\n- Add user preference for room owners/manager to select if they want to\n  receive notification emails for their rooms (:issue:`4096`, :issue:`4098`)\n- Show family name field first in user search dialog (:issue:`4099`)\n- Make date headers clickable in room booking calendar (:issue:`4099`)\n- Show times in room booking log entries (:issue:`4099`)\n- Support disabling server-side LaTeX altogether and hide anything that\n  requires it (such as contribution PDF export or the Book of Abstracts).\n  **LaTeX is now disabled by default, unless the** :data:`XELATEX_PATH`\n  **is explicitly set in** ``indico.conf``.\n\n\nBugfixes\n^^^^^^^^\n\n- Remove 30s timeout from dropzone file uploads\n- Fix bug affecting room booking from an event in another timezone (:issue:`4072`)\n- Fix error when commenting on papers (:issue:`4081`)\n- Fix performance issue in conferences with public registration count and a\n  high amount of registrations\n- Fix confirmation prompt when disabling conference menu customizations\n  (:issue:`4085`)\n- Fix incorrect days shown as weekend in room booking for some locales\n- Fix ACL entries referencing event roles from the old event when cloning an\n  event with event roles in the ACL. Run ``indico maint fix-event-role-acls``\n  after updating to fix any affected ACLs (:issue:`4090`)\n- Fix validation issues in coordinates fields when editing rooms (:issue:`4103`)\n\n\nVersion 2.2.2\n-------------\n\n*Released on August 23, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Remove dependency on ``pyatom``, which has vanished from PyPI\n\n\nVersion 2.2.1\n-------------\n\n*Released on August 16, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Make list of event room bookings sortable (:issue:`4022`)\n- Log when a booking is split during editing (:issue:`4031`)\n- Improve \"Book\" button in multi-day events (:issue:`4021`)\n\nBugfixes\n^^^^^^^^\n\n- Add missing slash to the ``template_prefix`` of the ``designer`` module\n- Always use HH:MM time format in book-from-event link\n- Fix timetable theme when set to \"indico weeks view\" before 2.2 (:issue:`4027`)\n- Avoid flickering of booking edit details tooltip\n- Fix outdated browser check on iOS (:issue:`4033`)\n\n\nVersion 2.2\n-----------\n\n*Released on August 06, 2019*\n\nMajor Changes\n^^^^^^^^^^^^^\n\n- \u26a0\ufe0f **Drop support for Internet Explorer 11 and other outdated or\n  discontinued browser versions.** Indico shows a warning message\n  when accessed using such a browser. The latest list of supported\n  browsers can be found `in the README on GitHub <https://github.com/indico/indico#browser-support>`_,\n  but generally Indico now supports the last two versions of each major\n  browser (determined at release time), plus the current Firefox ESR.\n- Rewrite the room booking frontend to be more straightforward and\n  user-friendly. Check `our blog for details <https://getindico.io/indico/update/release/milestone/2019/02/22/indico-2-2-news.html>`_.\n\nImprovements\n^^^^^^^^^^^^\n\n- Rework the event log viewer to be more responsive and not freeze the\n  whole browser when there are thousands of log entries\n- Add shortcut to next upcoming event in a category (:issue:`3388`)\n- Make registration period display less confusing (:issue:`3359`)\n- Add edit button to custom conference pages (:issue:`3284`)\n- Support markdown in survey questions (:issue:`3366`)\n- Improve event list in case of long event titles (:issue:`3607`,\n  thanks :user:`nop33`)\n- Include event page title in the page's ``<title>`` (:issue:`3285`,\n  thanks :user:`bpedersen2`)\n- Add option to include subcategories in upcoming events (:issue:`3449`)\n- Allow event managers to override the name format used in the event\n  (:issue:`2455`)\n- Add option to not clone venue/room of an event\n- Show territory/country next to the language name (:issue:`3968`)\n- Add more sorting options to book of abstracts (:issue:`3429`, thanks\n  :user:`bpedersen2`)\n- Add more formatting options to book of abstracts (:issue:`3335`, thanks\n  :user:`bpedersen2`)\n- Improve message when the call for abstracts is scheduled to open but\n  hasn't started yet\n- Make link color handling for LaTeX pdfs configurable (:issue:`3283`,\n  thanks :user:`bpedersen2`)\n- Preserve displayed order in contribution exports that do not apply\n  any specific sorting (:issue:`4005`)\n- Add author list button to list of papers (:issue:`3978`)\n\nBugfixes\n^^^^^^^^\n\n- Fix incorrect order of session blocks inside timetable (:issue:`2999`)\n- Add missing email validation to contribution CSV import (:issue:`3568`,\n  thanks :user:`Kush22`)\n- Do not show border after last item in badge designer toolbar\n  (:issue:`3607`, thanks :user:`nop33`)\n- Correctly align centered footer links (:issue:`3599`, thanks :user:`nop33`)\n- Fix top/right alignment of session bar in event display view (:issue:`3599`,\n  thanks :user:`nop33`)\n- Fix error when trying to create a user with a mixed-case email\n  address in the admin area\n- Fix event import if a user in the exported data has multiple email\n  addresses and they match different users\n- Fix paper reviewers getting notifications even if their type of reviewing\n  has been disabled (:issue:`3852`)\n- Correctly handle merging users in the paper reviewing module (:issue:`3895`)\n- Show correct number of registrations in management area (:issue:`3935`)\n- Fix sorting book of abstracts by board number (:issue:`3429`, thanks\n  :user:`bpedersen2`)\n- Enforce survey submission limit (:issue:`3256`)\n- Do not show \"Mark as paid\" button and checkout link while a transaction\n  is pending (:issue:`3361`, thanks :user:`driehle`)\n- Fix 404 error on custom conference pages that do not have any ascii chars\n  in the title (:issue:`3998`)\n- Do not show pending registrants in public participant lists (:issue:`4017`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Use webpack to build static assets\n- Add React+Redux for new frontend modules\n- Enable modern ES201x features\n\n\n----\n\n\nVersion 2.1.11\n--------------\n\n*Released on October 16, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Fix more places where LaTeX input was not correctly sanitized. While the biggest\n  security impact (reading local files) has already been mitigated when fixing the\n  initial vulnerability in the previous release, it is still strongly recommended\n  to update.\n\n\nVersion 2.1.10\n--------------\n\n*Released on October 08, 2019*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Strip ``@``, ``+``, ``-`` and ``=`` from the beginning of strings when exporting\n  CSV files to avoid `security issues <https://www.owasp.org/index.php/CSV_Injection>`_\n  when opening the CSV file in Excel\n- Use 027 instead of 000 umask when temporarily changing it to get the current umask\n- Fix LaTeX sanitization to prevent malicious users from running unsafe LaTeX commands\n  through specially crafted abstracts or contribution descriptions, which could lead to\n  the disclosure of local file contents\n\n\nVersion 2.1.9\n-------------\n\n*Released on August 26, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Fix bug in calendar view, due to timezones (:issue:`3903`)\n- Remove dependency on ``pyatom``, which has vanished from PyPI (:issue:`4045`)\n\n\nVersion 2.1.8\n-------------\n\n*Released on March 12, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add A6 to page size options (:issue:`3793`)\n\nBugfixes\n^^^^^^^^\n\n- Fix celery/redis dependency issue (:issue:`3809`)\n\n\nVersion 2.1.7\n-------------\n\n*Released on January 24, 2019*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add setting for the default contribution duration of an event\n  (:issue:`3446`)\n- Add option to copy abstract attachments to contributions when\n  accepting them (:issue:`3732`)\n\nBugfixes\n^^^^^^^^\n\n- Really fix the oauthlib conflict (was still breaking in some cases)\n\n\nVersion 2.1.6\n-------------\n\n*Released on January 15, 2019*\n\nBugfixes\n^^^^^^^^\n\n- Allow adding external users as speakers/chairpersons (:issue:`3562`)\n- Allow adding external users to event ACLs (:issue:`3562`)\n- Pin requests-oauthlib version to avoid dependency conflict\n\n\nVersion 2.1.5\n-------------\n\n*Released on December 06, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Render the reviewing state of papers in the same way as abstracts\n  (:issue:`3665`)\n\nBugfixes\n^^^^^^^^\n\n- Use correct speaker name when exporting contributions to spreadsheets\n- Use friendly IDs in abstract attachment package folder names\n- Fix typo in material package subcontribution folder names\n- Fix check on whether registering for an event is possible\n- Show static text while editing registrations (:issue:`3682`)\n\n\nVersion 2.1.4\n-------------\n\n*Released on September 25, 2018*\n\nBugfixes\n^^^^^^^^\n\n- Let managers download tickets for registrants even if all public ticket\n  downloads are disabled (:issue:`3493`)\n- Do not count deleted registrations when printing tickets from the badge\n  designer page\n- Hide \"Save answers\" in surveys while not logged in\n- Fix importing event archives containing registrations with attachments\n- Fix display issue in participants table after editing data (:issue:`3511`)\n- Fix errors when booking rooms via API\n\n\nVersion 2.1.3\n-------------\n\n*Released on August 09, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Only return timetable entries for the current session when updating a\n  session through the timetable (:issue:`3474`, thanks :user:`glunardi`\n  for reporting)\n- Prevent session managers/coordinators from modifying certain timetable\n  entries or scheduling contributions not assigned to their session\n- Restrict access to timetable entry details to users who are authorized\n  to see them\n\nImprovements\n^^^^^^^^^^^^\n\n- Improve survey result display (:issue:`3486`)\n- Improve email validation for registrations (:issue:`3471`)\n\nBugfixes\n^^^^^^^^\n\n- Point to correct day in \"edit session timetable\" link (:issue:`3419`)\n- Fix error when exporting abstracts with review questions to JSON\n- Point the timetable to correct day in the session details\n- Fix massive performance issue on the material package page in big events\n- Fix error when using the checkin app to mark someone as checked in\n  (:issue:`3473`, thanks :user:`femtobit`)\n- Fix error when a session coordinator tries changing the color of a break\n  using the color picker in the balloon's tooltip\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n- Add some new signals and template hooks to the registration module\n\n\nVersion 2.1.2\n-------------\n\n*Released on June 11, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Show email address for non-anonymous survey submissions\n  (:issue:`3258`)\n\nBugfixes\n^^^^^^^^\n\n- Show question description in survey results (:issue:`3383`)\n- Allow paper managers to submit paper revisions\n- Fix error when not providing a URL for privacy policy or terms\n- Use consistent order for privacy/terms links in the footer\n- Fix cloning of locked events\n\n\nVersion 2.1.1\n-------------\n\n*Released on May 31, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add a privacy policy page linked from the footer (:issue:`1415`)\n- Terms & Conditions can now link to an external URL\n- Show a warning to all admins if Celery is not running or outdated\n- Add registration ID placeholder for badges (:issue:`3370`, thanks\n  :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Fix alignment issue in the \"Indico Weeks View\" timetable theme\n  (:issue:`3367`)\n- Reset visibility when cloning an event to a different category\n  (:issue:`3372`)\n\n\nVersion 2.1\n-----------\n\n*Released on May 16, 2018*\n\nMajor Features\n^^^^^^^^^^^^^^\n\n- Add event roles, which are similar to local groups but within the\n  scope of an event. They can be used both for assigning permissions\n  within the event and also for quickly seeing which user has which\n  role (such as \"Program Committee\" in the event\n- Add new *Participant Roles* (previously called *Roles*) which\n  now shows each person's custom event roles and whether they have\n  registered for the event in addition to the the default roles\n  (speaker, chairperson, etc.)\n- Add visibility options to custom abstract/contribution fields\n  so they can be restricted to be editable/visible only for event\n  managers or authors/submitters instad of anyone who can see the\n  abstract/contribution\n- Provide new interface to import registations/contributions from a CSV\n  file (:issue:`3144`)\n- Rework how access/permissions are managed. Now all access and management\n  privileges can be assigned from a single place on the protection\n  management page.\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow specifying a default session for a track which will then be\n  used by default when accepting an abstract in that track (:issue:`3069`)\n- Allow marking contribution types as private so they cannot be selected\n  by users submitting an abstract (:issue:`3138`)\n- Add support for boolean (yes/no) and freetext questions in abstract\n  reviewing (:issue:`3175`)\n- Support event cloning with monthly recurrence on the last day of the\n  month (:issue:`1580`)\n- Add support for custom session types (:issue:`3189`)\n- Move poster session flag from session settings to session type settings\n- Add contribution cloning within an event (:issue:`3207`)\n- Add option to include the event description in reminder emails\n  (:issue:`3157`, thanks :user:`bpedersen2`)\n- Pin default themes to the top for event managers (:issue:`3166`)\n- Add user setting whether to show future events or not by default in a\n  category. Also keep the per-category status in the session (:issue:`3233`,\n  thanks :user:`bpedersen2`)\n- Keep page titles in sync with conference menu item titles (:issue:`3236`)\n- Add option to hide an attachment folder in the display areas of an event\n  (:issue:`3181`, thanks :user:`bpedersen2`)\n- Improve flower redirect URI generation (:issue:`3187`, thanks\n  :user:`bpedersen2`)\n- When blocking a user account, the user will be forcefully logged out in\n  addition to being prevented from logging in\n- Show track-related columns in abstract list only if there are tracks\n  defined for the event (:issue:`2813`)\n- Show warning box to inform that reviewer roles do not apply when an event\n  has no tracks (:issue:`2919`)\n- Allow specifying min/max length for registration form text fields\n  (:issue:`3193`, thanks :user:`bpedersen2`)\n- Add settings to configure the scale of 'rating' questions in paper\n  reviewing\n- Show a nicer error message when entering an excessively high base\n  registration fee (:issue:`3260`)\n- Use proper British English for person titles (:issue:`3279`)\n- Add event keywords in meta tags (:issue:`3262`, thanks :user:`bpedersen2`)\n- Improve sorting by date fields in the registrant list\n- Use the user's preferred name format in more places\n- Add \"back to conference\" link when viewing a conference timetable using\n  a meeting theme (:issue:`3297`, thanks :user:`bpedersen2`)\n- Allow definition lists in places where Markdown or HTML is accepted\n  (:issue:`3325`)\n- Include event date/time in registration emails (:issue:`3337`)\n- Allow div/span/pre with classes when writing raw HTML in CKEditor\n  (:issue:`3332`, thanks :user:`bpedersen2`)\n- Sort abstract authors/speakers by last name (:issue:`3340`)\n- Improve machine-readable metadata for events and categories\n  (:issue:`3287`, thanks :user:`bpedersen2`)\n\nBugfixes\n^^^^^^^^\n\n- Fix selecting a person's title in a different language than English\n- Fix display issue in \"now happening\" (:issue:`3278`)\n- Fix error when displaying the value of an accommodation field in the\n  registrant list and someone has the \"no accomodation\" option selected\n  (:issue:`3272`, thanks :user:`bpedersen2`)\n- Use the 'Reviewing' realm when logging actions from the abstract/paper\n  reviewing modules\n- Fix error when printing badges/posters with empty static text fields\n  (:issue:`3290`)\n- Fix error when generating a PDF timetable including contribution\n  abstracts (:issue:`3289`)\n- Do not require management access to a category to select a badge\n  template from it as a backside.\n- Fix breadcrumb metadata (:issue:`3321`, thanks :user:`bpedersen2`)\n- Fix error when accessing certain registration pages without an active\n  registration\n- Use event timezone when displaying event log entries (:issue:`3354`)\n- Correctly render most markdown elements when generating a programme PDF\n  (:issue:`3351`)\n- Do not send any emails when trying to approve/reject a registration\n  that is not pending (:issue:`3358`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Rename *Roles* in ACL entries to *Permissions*.  This especially affects\n  the ``can_manage`` method whose ``role`` argument has been renamed to\n  ``permission`` (:issue:`3057`)\n- Add new ``registration_checkin_updated`` signal that can be used by\n  plugins to perform an action when the checkin state of a registration\n  changes (:issue:`3161`, thanks :user:`bpedersen2`)\n- Add new signals that allow plugins to run custom code at the various\n  stages of the ``RH`` execution and replace/modify the final response\n  (:issue:`3227`)\n- Add support for building plugin wheels with date/commit-suffixed\n  version numbers (:issue:`3232`, thanks :user:`driehle`)\n\n\n----\n\n\nVersion 2.0.3\n-------------\n\n*Released on March 15, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Do not show contribution information (metadata including title, speakers\n  and a partial description) in the contribution list unless the user has\n  access to a contribution\n\nImprovements\n^^^^^^^^^^^^\n\n- Show more suitable message when a service request is auto-accepted\n  (:issue:`3264`)\n\n\nVersion 2.0.2\n-------------\n\n*Released on March 07, 2018*\n\nSecurity fixes\n^^^^^^^^^^^^^^\n\n- Update `bleach <https://github.com/mozilla/bleach>`_ to fix an XSS vulnerability\n\nImprovements\n^^^^^^^^^^^^\n\n- Warn when editing a speaker/author would result in duplicate emails\n\nBugfixes\n^^^^^^^^\n\n- Take 'center' orientation of badge/poster backgrounds into account\n  (:issue:`3238`, thanks :user:`bpedersen2`)\n- Fail nicely when trying to register a local account with an already-used\n  email confirmation link (:issue:`3250`)\n\n\nVersion 2.0.1\n-------------\n\n*Released on February 6, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add support for admin-only designer placeholders. Such placeholders\n  can be provided by custom plugins and only be used in the designer\n  by Indico admins (:issue:`3210`)\n- Sort contribution types alphabetically\n- Add folding indicators when printing foldable badges (:issue:`3216`)\n\nBugfixes\n^^^^^^^^\n\n- Fix LaTeX rendering issue when consecutive lines starting with ``[``\n  were present (:issue:`3203`)\n- Do not allow managers to retrieve tickets for registrants for whom\n  ticket access is blocked by a plugin (:issue:`3208`)\n- Log a warning instead of an exception if the Indico version check\n  fails (:issue:`3209`)\n- Wrap long lines in event log entries instead of truncating them\n- Properly show message about empty agenda in reminders that have\n  \"Include agenda\" enabled but an empty timetable\n- Fix overly long contribution type names pushing edit/delete buttons\n  outside the visible area (:issue:`3215`)\n- Only apply plugin-imposed ticket download restrictions for tickets,\n  not for normal badges.\n- Fix switching between badge sides in IE11 (:issue:`3214`)\n- Do not show poster templates as possible backsides for badges\n- Convert alpha-channel transparency to white in PDF backgrounds\n- Make number inputs big enough to show 5 digits in chrome\n- Sort chairperson list on lecture pages\n- Remove whitespace before commas in speaker lists\n- Hide author UI for subcontribution speakers (:issue:`3222`)\n\n\nVersion 2.0\n-----------\n\n*Released on January 12, 2018*\n\nImprovements\n^^^^^^^^^^^^\n\n- Add ``author_type`` and ``is_speaker`` fields for persons in the JSON\n  abstract export\n- Add legacy redirect for ``conferenceTimeTable.py``\n\nBugfixes\n^^^^^^^^\n\n- Fix unicode error when searching external users from the \"Search\n  Users\" dialog\n- Fix missing event management menu/layout when creating a material\n  package from the event management area\n- Fix error when viewing a contribution with co-authors\n- Fix sorting of registration form items not working anymore after\n  moving/disabling some items\n- Fix error after updating from 2.0rc1 if there are cached Mako\n  templates\n- Fix error when retrieving an image referenced in an abstract fails\n- Fix rendering of time pickers in recent Firefox versions (:issue:`3194`)\n- Fix error when trying to use the html serializer with the timetable API\n- Fix error when receiving invalid payment events that should be ignored\n- Fix last occurrence not being created when cloning events (:issue:`3192`)\n- Fix multiple links in the same line being replaced with the first one\n  when converting abstracts/contributions to PDF (:issue:`2816`)\n- Fix PDF generation when there are links with ``&`` in the URL\n- Fix incorrect spacing in abstract author/speaker lists (:issue:`3205`)\n\n\nVersion 2.0rc2\n--------------\n\n*Released on December 8, 2017*\n\nImprovements\n^^^^^^^^^^^^\n\n- Allow changing the reloader used by the dev server (:issue:`3150`)\n\nBugfixes\n^^^^^^^^\n\n- Do not show borders above/below the message in registration emails\n  unless both the header and body blocks are used (:issue:`3151`)\n- Roll-back the database transaction when an error occurs.\n- Fix rendering of the LaTeX error box (:issue:`3163`)\n- Fix \"N/A\" being displayed in a survey result if 0 is entered in\n  a number field\n- Fix \"N/A\" not being displayed in a survey result if nothing is\n  selected in a multi-choice select field\n- Fix error when using ``target_*`` placeholders in abstract\n  notification emails for actions other than \"Merged\" (:issue:`3171`)\n- Show full track title in tooltips on abstract pages\n- Show correct review indicators when a reviewer still has to review\n  an abstract in a different track\n- Fix unicode error when searching external users in an LDAP backend\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Remove ``SCSS_DEBUG_INFO`` config option.\n\n\nVersion 2.0rc1\n--------------\n\n*Released on November 10, 2017*\n\nImprovements\n^^^^^^^^^^^^\n\n- Hide category field in event creation dialog if there are no\n  subcategories (:issue:`3112`)\n- Remove length limit from registration form field captions (:issue:`3119`)\n- Use semicolons instead of commas as separator when exporting list\n  values (such as multi-select registration form fields) to CSV or\n  Excel (:issue:`3060`)\n- Use custom site title in page title (:issue:`3018`)\n- Allow manually entering dates in datetime fields (:issue:`3136`)\n- Send emails through a celery task. This ensures users do not get\n  an error if the mail server is temporarily unavailable. Sending an\n  email is also retried for a while in case of failure. In case of a\n  persistent failure the email is dumped to the temp directory and\n  can be re-sent manually using the new ``indico resend_email``\n  command (:issue:`3121`)\n- Reject requests containing NUL bytes in the query string (:issue:`3142`)\n\nBugfixes\n^^^^^^^^\n\n- Do not intercept HTTP exceptions containing a custom response.\n  When raising such exceptions we do not want the default handling\n  but rather send the custom response to the client.\n- Do not apply margin for empty root category sidebar (:issue:`3116`,\n  thanks :user:`nop33`)\n- Fix alignment of info-grid items on main conference page (:issue:`3126`)\n- Properly align the label of the attachment folder title field\n- Fix some rare unicode errors during exception handling/logging\n- Clarify messages in session block rescheduling dialogs (:issue:`3080`)\n- Fix event header bar in IE11 (:issue:`3135`)\n- Fix footer on login page (:issue:`3132`)\n- Use correct module name for abstract notification emails in the event log\n- Remove linebreaks from email subject in paper review notifications\n- Fix extra padding in the CFA roles dialog (:issue:`3129`)\n- Do not show an extra day in timetable management if an event begins\n  before a DST change\n- Disable caching when retrieving the list of unscheduled contributions\n- Process placeholders in the subject when emailing registrants\n- Fix Shibboleth login with non-ascii names (:issue:`3143`)\n\nInternal Changes\n^^^^^^^^^^^^^^^^\n\n- Add new ``is_ticket_blocked`` signal that can be used by plugins to\n  disable ticket downloads for a registration.\n\n\nVersion 2.0a1\n-------------\n\n*Released on October 20, 2017*\n\nThis is the first release of the 2.0 series, which is an almost complete\nrewrite of Indico based on a modern software stack and PostgreSQL.\n", "{% macro get_attachment_icon(attachment) -%}\n    {%- if attachment.type.name == 'link' -%}\n        icon-link\n    {%- else -%}\n        {{ icon_from_mimetype(attachment.file.content_type, 'icon-file-filled') }}\n    {%- endif -%}\n{%- endmacro %}\n\n{% macro render_attachment(attachment, has_label=false, classes='') %}\n    {% set previewable = (attachment.file.is_previewable and not g.static_site) or false %}\n    {% set visible_link = attachment.type.name == 'link' and (not attachment.is_protected or attachment.can_access(session.user)) %}\n    <a class=\"attachment {{ get_attachment_icon(attachment) }} {% if attachment.is_self_protected %}is-protected{% endif %} {% if has_label %}has-label{% endif %} {%- if previewable %} js-preview-dialog{% endif %} {{ classes }}\"\n       data-previewable=\"{{ previewable|tojson }}\"\n       data-attachment-id=\"{{ attachment.id }}\"\n       href=\"{{ attachment.link_url if visible_link else attachment.download_url }}\" target=\"_blank\"\n       rel=\"noopener noreferrer\"\n       title=\"{{ attachment.description or attachment.title }}\n              {%- if attachment.is_self_protected %} ({% trans %}Protected{% endtrans %}){% endif %}\">\n        {%- if not has_label -%}\n            <span class=\"title\">{{ attachment.title }}</span>\n        {%- endif -%}\n    </a>\n{% endmacro %}\n\n{% macro _attachment_row(attachment, management=true) %}\n    <tr>\n        <td>\n            {{ render_attachment(attachment) }}\n            {%- if attachment.is_self_protected %}\n                <i class=\"icon-lock-center custom-protection\"\n                   title=\"{% trans %}The access to this material is restricted, regardless of the protection scheme of\n                          the parent.{% endtrans %}\"></i>\n            {% endif %}\n        </td>\n        {% if management -%}\n            <td class=\"actions hide-if-locked\">\n                <a class=\"icon-edit js-dialog-action\"\n                   data-href=\"{{ url_for('attachments.modify_attachment', attachment) }}\"\n                   data-title=\"\n                    {%- if attachment.type.name == 'file' -%}\n                        {% trans name=attachment.title %}Edit file &quot;{{ name }}&quot;{% endtrans %}\n                    {% else %}\n                        {% trans name=attachment.title %}Edit link &quot;{{ name }}&quot;{% endtrans %}\n                    {% endif -%}\"\n                   title=\"\n                    {%- if attachment.type.name == 'file' -%}\n                        {% trans %}Edit file{% endtrans %}\n                    {% else %}\n                        {% trans %}Edit link{% endtrans %}\n                    {% endif -%}\"></a>\n                <a href=\"#\" class=\"icon-remove js-delete\"\n                   data-method=\"DELETE\"\n                   data-href=\"{{ url_for('attachments.delete_attachment', attachment) }}\"\n                   data-title=\"{% trans name=attachment.title %}Remove {{ name }}?{% endtrans %}\"\n                   title=\"{% trans %}Remove{% endtrans %}\"\n                   data-confirm=\"{% trans name=attachment.title -%}\n                       Are you sure you want to remove &quot;{{ name }}&quot;?\n                       This will remove the attachment permanently.\n                       {%- endtrans %}\">\n                </a>\n            </td>\n            <td class=\"date\">{{ attachment.modified_dt|format_datetime('short') }}</td>\n        {%- endif %}\n    </tr>\n{% endmacro %}\n\n{% macro _folder_row(folder, management=true) -%}\n    <tr class=\"expandable {%- if not folder.attachments %} collapsed{% endif %}\">\n        <td>\n            <span>{{ folder.title }}</span>\n            {%- if folder.is_self_protected %}\n                <i class=\"icon-lock-center custom-protection\"\n                   title=\"{% trans %}The access to this folder is restricted, regardless of the protection scheme of\n                          the parent.{% endtrans %}\"></i>\n            {% endif %}\n            {% if folder.is_hidden and management %}\n                <i class=\"icon-eye-blocked\"\n                   title=\"{% trans %}This folder is always hidden in the frontend.{% endtrans %}\"></i>\n            {% endif %}\n            {% if folder.is_always_visible and management %}\n                <i class=\"icon-eye\"\n                   title=\"{% trans %}This folder is always visible in the frontend.{% endtrans %}\"></i>\n            {% endif %}\n        </td>\n        {% if management -%}\n            <td class=\"actions hide-if-locked\">\n                <a class=\"icon-edit js-dialog-action\"\n                           data-href=\"{{ url_for('attachments.edit_folder', folder) }}\"\n                           data-title=\"{% trans name=folder.title %}Edit folder: {{ name }}{% endtrans %}\"\n                           title=\"{% trans %}Edit folder{% endtrans %}\"></a>\n                <a href=\"#\" class=\"icon-remove js-delete\"\n                   data-method=\"DELETE\"\n                   data-href=\"{{ url_for('attachments.delete_folder', folder) }}\"\n                   data-title=\"{% trans name=folder.title %}Remove {{ name }}?{% endtrans %}\"\n                   title=\"{% trans %}Remove{% endtrans %}\"\n                   data-confirm=\"{% trans name=folder.title -%}\n                       Are you sure you want to remove &quot;{{ name }}&quot;?\n                       This will remove the folder and its contents permanently.\n                   {%- endtrans %}\">\n                </a>\n            </td>\n            <td class=\"date\"></td>\n        {%- endif %}\n    </tr>\n    <tr class=\"sub-tree\">\n        <td {%- if management %} colspan=\"3\"{% endif %}>\n            {# Div to have a smooth slide up and down of the sub-tree #}\n            <div {%- if not folder.attachments %} style=\"display: none;\"{% endif %}>\n                <table class=\"tree\">\n                {{- _render_tree(folder.attachments, false, management=management) -}}\n                </table>\n            </div>\n        </td>\n    </tr>\n{%- endmacro %}\n\n{% macro _render_tree(nodes, is_folder, management=true) -%}\n    {%- for sub_node in nodes -%}\n        {% if is_folder %}\n            {{ _folder_row(sub_node, management=management) }}\n        {% else %}\n            {{ _attachment_row(sub_node, management=management) }}\n        {% endif %}\n    {%- else -%}\n        <tr class=\"empty\">\n            <td {%- if management %} colspan=\"3\"{% endif %}> {% trans %}empty folder{% endtrans %}</td>\n        </tr>\n    {%- endfor -%}\n{%- endmacro %}\n\n{% macro render_attachments(attachments, linked_object=None, management=true) -%}\n    {%- if attachments -%}\n        <table class=\"tree\">\n            {%- if attachments.files -%}\n                {{ _render_tree(attachments.files, false, management=management) }}\n            {%- endif -%}\n            {%- if attachments.folders -%}\n                {{ _render_tree(attachments.folders, true, management=management) }}\n            {%- endif -%}\n        </table>\n    {%- else -%}\n        <span class=\"empty\">{% trans %}There are no materials yet.{% endtrans %}</span>\n    {%- endif -%}\n    {% if management %}\n        <div class=\"i-box-footer text-right js-attachment-actions hide-if-locked\">\n            <button class=\"i-button icon-folder-plus js-dialog-action\"\n                    data-href=\"{{ url_for('attachments.create_folder', linked_object) }}\"\n                    data-title=\"{% trans %}Create a new folder{% endtrans %}\">\n                {% trans %}New folder{% endtrans -%}\n            </button>\n        </div>\n    {% endif %}\n{%- endmacro %}\n\n{% macro attachments_page(linked_object, linked_object_type, attachments) %}\n    <div class=\"flashed-messages\"></div>\n\n    <div class=\"attachment-editor\">\n        <div class=\"action-box fixed-width hide-if-locked\">\n            <div class=\"section\">\n                <span class=\"icon icon-upload\"></span>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% if linked_object_type == 'category' %}\n                            {% trans %}Add materials to the category.{% endtrans %}\n                        {% elif linked_object_type == 'event' %}\n                            {% trans %}Add materials to the event.{% endtrans %}\n                        {% elif linked_object_type == 'session' %}\n                            {% trans %}Add materials to the session.{% endtrans %}\n                        {% elif linked_object_type == 'contribution' %}\n                            {% trans %}Add materials to the contribution.{% endtrans %}\n                        {% elif linked_object_type == 'subcontribution' %}\n                            {% trans %}Add materials to the subcontribution.{% endtrans %}\n                        {% endif %}\n                    </div>\n                    <div>{% trans %}You can attach files or links using the buttons on the right.{% endtrans %}</div>\n                </div>\n                <div class=\"toolbar\">\n                    <div class=\"group\">\n                        <button class=\"i-button icon-file js-dialog-action\"\n                                data-href=\"{{ url_for('attachments.upload', linked_object) }}\"\n                                data-title=\"{%- trans %}Upload files{% endtrans -%}\">\n                            {%- trans %}Upload files{% endtrans -%}\n                        </button>\n                        <button class=\"i-button icon-link js-dialog-action\"\n                                data-href=\"{{ url_for('attachments.add_link', linked_object) }}\"\n                                data-title=\"{%- trans %}Add link{% endtrans -%}\">\n                            {%- trans %}Add link{% endtrans -%}\n                        </button>\n                        {{ template_hook('attachment-sources', linked_object=linked_object) }}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        {% if linked_object_type == 'event' and not request.is_xhr and linked_object.can_manage(session.user) %}\n            <div class=\"action-box fixed-width\">\n                <div class=\"section\">\n                    <span class=\"icon icon-package-download\"></span>\n                    <div class=\"text\">\n                        <div class=\"label\">\n                            {% trans %}Generate a material package.{% endtrans %}\n                        </div>\n                        <div>{% trans %}You can generate a ZIP file containing materials from the event.{% endtrans %}</div>\n                    </div>\n                    <div class=\"toolbar\">\n                        <a href=\"{{ url_for('attachments.package_management', linked_object) }}\" class=\"i-button icon-package-download\">\n                            {%- trans %}Material Package{% endtrans -%}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        {% endif %}\n\n        <div class=\"i-box fixed-width attachments-container\" id=\"attachments-container\">\n            {{ render_attachments(attachments, linked_object) }}\n        </div>\n    </div>\n    <script>\n        setupAttachmentEditor();\n    </script>\n{% endmacro  %}\n", "{% extends 'layout/management_page.html' %}\n\n{% macro delete_category_button(category, classes=\"i-button\") %}\n    {% set confirmation_message -%}\n        {% trans category=category.title %}\n            Do you really want to delete the category &quot;{{ category }}&quot;?\n        {% endtrans %}\n    {%- endset %}\n    {% if category.is_empty %}\n        {% set tooltip -%}\n            {% trans %}Delete category{% endtrans %}\n        {%- endset %}\n    {% else %}\n        {% set classes = classes + \" disabled\" %}\n        {% set tooltip -%}\n            {% trans %}This category cannot be deleted because it is not empty.{% endtrans %}\n        {%- endset %}\n    {% endif %}\n    <a class=\"{{ classes }} icon-remove js-delete-category\"\n       title=\"{{ tooltip|forceescape }}\"\n       data-confirm=\"{{ confirmation_message }}\"\n       data-title=\"{% trans %}Delete category{% endtrans %}\"\n       data-href=\"{{ url_for('categories.delete', category) }}\"\n       data-method=\"POST\"></a>\n{% endmacro %}\n\n{% macro move_category_button(category, classes=\"i-button\") %}\n    <a class=\"{{ classes }} icon-transmission js-move-category\"\n       title=\"{% trans %}Move to another category{% endtrans %}\"\n       data-href=\"{{ url_for('categories.move', category) }}\"\n       data-category-id=\"{{ category.id }}\"></a>\n{% endmacro %}\n\n{% block banner_title %}\n    {{ category.title }}\n{% endblock %}\n\n{% block banner_actions %}\n    <div class=\"toolbar\">\n        <div class=\"group\">\n            {% if not category.is_root %}\n                {{ move_category_button(category, classes=\"i-button borderless\") }}\n                {{ delete_category_button(category, classes=\"i-button borderless\") }}\n            {% endif %}\n            {{ template_hook('category-management-after-banner-actions', category=category) }}\n        </div>\n    </div>\n    {% if not category.is_root %}\n        <script>\n            setupCategoryMoveButton({{ category.parent.id }});\n        </script>\n    {% endif %}\n{% endblock %}\n\n{% block side_menu %}\n    {{ render_sidemenu('category-management-sidemenu', category=category, active_item=active_menu_item) }}\n{% endblock %}\n\n{% block display_view_button %}\n    <div class=\"group\">\n        <a href=\"{{ category.url }}\"\n           class=\"icon-switchon highlight i-button\"\n           title=\"{% trans %}See the display page of the category{% endtrans %}\">\n            <span>{%- trans %}Switch to display view{% endtrans -%}</span>\n        </a>\n    </div>\n{% endblock %}\n", "{% from 'events/abstracts/reviewing/_common.html' import render_tracks, render_track %}\n{% from 'events/reviews/_common.html' import render_edited_hint, render_user_avatar, render_summary_state %}\n{% from 'events/_affiliation.html' import render_affiliation %}\n\n\n{% macro render_abstract_info(abstract) %}\n    <div class=\"submission-title flexrow\">\n        <h3 class=\"f-self-stretch js-mathjax\">\n            {{ abstract.title }}\n            <span class=\"submission-id\">\n                #{{ abstract.friendly_id }}\n            </span>\n        </h3>\n        <div class=\"toolbar thin\">\n            {% set can_manage = abstract.event.can_manage(session.user, permission='abstracts') %}\n            {% if abstract.submitter == session.user or can_manage %}\n                <div class=\"group\">\n                    {% if abstract.can_withdraw(session.user, check_state=true) %}\n                        {% set message %}\n                            {% trans %}Do you really want to withdraw this abstract?{% endtrans %}\n                            {% if abstract.contribution %}\n                                {%- trans -%}\n                                    Withdrawing this abstract will permanently delete its corresponding contribution.\n                                {%- endtrans -%}\n                            {% elif not can_manage %}\n                                {% trans %}This operation is irreversible.{% endtrans %}\n                            {% endif %}\n                        {% endset %}\n                        <button class=\"i-button text-color color-on-hover danger hide-if-locked\"\n                                title=\"{% trans %}Withdraw abstract{% endtrans %}\"\n                                data-title=\"{% trans %}Withdraw Abstract{% endtrans %}\"\n                                data-confirm=\"{{ message }}\"\n                                data-href=\"{{ url_for('.withdraw_abstract', abstract) }}\"\n                                data-method=\"POST\"\n                                data-update=\"#reviewing-page\"\n                                data-replace-update>\n                            {% trans %}Withdraw{% endtrans %}\n                        </button>\n                    {% elif abstract.state.name == 'accepted' %}\n                        {% set message %}\n                            {% trans -%}\n                                You cannot withdraw this abstract as it has already been accepted.\n                                Please contact the event organizers if you want to withdraw the abstract anyway.\n                            {%- endtrans %}\n                        {% endset %}\n                        <button class=\"i-button disabled\"\n                                title=\"{{ message }}\">\n                            {% trans %}Withdraw{% endtrans %}\n                        </button>\n                    {% elif abstract.state.name == 'withdrawn' and can_manage %}\n                        <button class=\"i-button accept icon-lamp hide-if-locked\"\n                                title=\"{% trans %}This abstract has been withdrawn but can be restored.{% endtrans %}\"\n                                data-title=\"{% trans %}Restore Abstract{% endtrans %}\"\n                                data-confirm=\"{% trans %}Do you really want to restore this abstract?{% endtrans %}\"\n                                data-href=\"{{ url_for('.reset_abstract_state', abstract) }}\"\n                                data-method=\"POST\"\n                                data-update=\"#reviewing-page\"\n                                data-replace-update>\n                            {% trans %}Restore{% endtrans %}\n                        </button>\n                    {% endif %}\n                </div>\n            {% endif %}\n            {% if can_manage or abstract.user_owns(session.user) %}\n                <div class=\"group\">\n                    {% if abstract.can_edit(session.user) %}\n                        <button class=\"i-button icon-edit hide-if-locked\"\n                                title=\"{% trans %}Edit abstract{% endtrans %}\"\n                                data-href=\"{{ url_for('.edit_abstract', abstract) }}\"\n                                data-title=\"{% trans %}Edit abstract{% endtrans %}\"\n                                data-ajax-dialog\n                                data-reload-after>\n                        </button>\n                    {% elif abstract.public_state.name == 'withdrawn' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it was withdrawn{% endtrans %}\">\n                        </button>\n                    {% elif abstract.public_state.name == 'under_review' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it is already under review{% endtrans %}\">\n                        </button>\n                    {% elif abstract.public_state.name != 'awaiting' %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because it has already been processed{% endtrans %}\">\n                        </button>\n                    {% elif abstract.modification_ended %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}The abstract cannot be edited because the modification deadline has passed{% endtrans %}\">\n                        </button>\n                    {% else %}\n                        <button class=\"i-button icon-edit disabled\"\n                                title=\"{% trans %}You are not authorized to edit this abstract{% endtrans %}\">\n                        </button>\n                    {% endif %}\n                </div>\n            {% endif %}\n            {% if indico_config.LATEX_ENABLED and abstract.can_see_reviews(session.user) %}\n                <div class=\"group\">\n                    <button class=\"i-button arrow icon-file-pdf js-dropdown\" data-toggle=\"dropdown\"></button>\n                    <ul class=\"i-dropdown\">\n                        <li>\n                            <a href=\"{{ url_for('.display_abstract_pdf_export', abstract) }}\">PDF</a>\n                        </li>\n                        <li>\n                            <a href=\"{{ url_for('.manage_abstract_pdf_export', abstract) }}\">\n                                {%- trans %}PDF with reviews{% endtrans -%}\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            {% elif indico_config.LATEX_ENABLED %}\n                <div class=\"group\">\n                    <a href=\"{{ url_for('.display_abstract_pdf_export', abstract) }}\"\n                       class=\"i-button icon-file-pdf\"\n                       title=\"{% trans %}Download abstract submission in PDF{% endtrans %}\"></a>\n                </div>\n            {% endif %}\n        </div>\n    </div>\n\n    <div id=\"abstract-public\">\n        {{ _render_abstract_summary(abstract) }}\n        {% if abstract.state.name != 'invited' or abstract.description %}\n            <div class=\"review-item-content abstract-content js-mathjax\">\n                <div class=\"abstract-authorship-block flexrow f-j-center\">\n                    <div class=\"abstract-authorship-label\">\n                        {% trans count=abstract.primary_authors|length -%}\n                            Author:\n                        {%- pluralize -%}\n                            Authors:\n                        {%- endtrans %}\n                    </div>\n                    <div class=\"abstract-authorship-list\">\n                        {{ abstract.primary_authors|map(attribute='name')|join(', ') }}\n                    </div>\n                </div>\n                {% if abstract.secondary_authors %}\n                    <div class=\"abstract-authorship-block flexrow f-j-center\">\n                        <div class=\"abstract-authorship-label\">\n                            {% trans count=abstract.secondary_authors|length -%}\n                                Co-author:\n                            {%- pluralize -%}\n                                Co-authors:\n                            {%- endtrans %}\n                        </div>\n                        <div class=\"abstract-authorship-list\">\n                            {{ abstract.secondary_authors|map(attribute='name')|join(', ') }}\n                        </div>\n                    </div>\n                {% endif %}\n                {{ abstract.description }}\n            </div>\n        {% endif %}\n    </div>\n{% endmacro %}\n\n\n{% macro render_submission_info(abstract, field_values) %}\n    <div class=\"i-timeline\">\n        <div class=\"i-timeline-item\">\n            {{ render_user_avatar(abstract.submitter) }}\n            <div class=\"i-timeline-item-box header-indicator-left\">\n                <div class=\"i-box-header\">\n                    <div class=\"f-self-stretch\">\n                        {% if abstract.state.name == 'invited' %}\n                            {% trans name=abstract.submitter.name -%}\n                                <strong>{{ name }}</strong> was invited to submit an abstract\n                            {%- endtrans %}\n                        {% else %}\n                            {% trans name=abstract.submitter.name -%}\n                                <strong>{{ name }}</strong> submitted this abstract\n                            {%- endtrans %}\n                        {% endif %}\n                        <time datetime=\"{{ abstract.submitted_dt.isoformat() }}\">\n                            {{- abstract.submitted_dt|format_human_date -}}\n                        </time>\n                        {% if abstract.modified_dt %}\n                            {{ render_edited_hint(abstract.modified_dt, abstract.modified_by) }}\n                        {% endif %}\n                    </div>\n                </div>\n                <div class=\"i-box-content submission-info\">\n                    {{ _render_submission_info(abstract, field_values) }}\n                    {% if abstract.event.cfa.allow_attachments %}\n                        <div class=\"attachment-list\">\n                            {{ _render_attachments(abstract) }}\n                        </div>\n                    {% endif %}\n                </div>\n            </div>\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro render_abstract_judgment(abstract) %}\n    <div class=\"i-timeline-item\">\n        {{ render_user_avatar(abstract.judge) }}\n        <div class=\"i-timeline-item-box header-indicator-left\">\n            <div class=\"i-box-header flexrow\">\n                <div class=\"f-self-stretch\">\n                    {{ _render_abstract_judgment_action(abstract) }}\n                    <time datetime=\"{{ abstract.judgment_dt.isoformat() }}\">\n                        {{- abstract.judgment_dt|format_human_date -}}\n                    </time>\n                </div>\n                {% if abstract.event.can_manage(session.user, permission='abstracts') %}\n                    <div class=\"hide-if-locked\">\n                        <a title=\"{% trans %}Reset judgment{% endtrans %}\"\n                           data-href=\"{{ url_for('.reset_abstract_state', abstract) }}\"\n                           data-method=\"POST\"\n                           data-update=\"#reviewing-page\"\n                           data-replace-update\n                           data-title=\"{% trans %}Reset judgment{% endtrans %}\"\n                           data-confirm=\"{% trans %}Do you really want to reset the judgment? This operation is irreversible.{% endtrans %}\">\n                            <i class=\"red link icon undo\"></i>\n                        </a>\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                {% if abstract.state.name == 'accepted' %}\n                    {% if abstract.contribution %}\n                        {% set link_start = '<a href=\"%s\">'|safe|format(url_for('contributions.display_contribution', abstract.contribution)) %}\n                        {% set link_end = '</a>'|safe %}\n                    {% else %}\n                        {% set link_start = '' %}\n                        {% set link_end = '' %}\n                    {% endif %}\n                    {% if abstract.accepted_contrib_type and abstract.accepted_track %}\n                        {% trans type=abstract.accepted_contrib_type.name, track=render_track(abstract.accepted_track, full_title=true) -%}\n                            The abstract was accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>\n                            for track {{ track }} and a {{ link_start }}contribution{{ link_end }} was\n                            created in the event.\n                        {%- endtrans %}\n                    {% elif abstract.accepted_contrib_type %}\n                        {% trans type=abstract.accepted_contrib_type.name -%}\n                            The abstract was accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>\n                            and a {{ link_start }}contribution{{ link_end }} was created in the event.\n                        {%- endtrans %}\n                    {% elif abstract.accepted_track %}\n                        {% trans track=render_track(abstract.accepted_track, full_title=true)  -%}\n                            The abstract was accepted\n                            for track {{ track }} and a {{ link_start }}contribution{{ link_end }}\n                            was created in the event.\n                        {%- endtrans %}\n                    {% else %}\n                        {% trans -%}\n                            The abstract was accepted and a {{ link_start }}contribution{{ link_end }} was created in the event.\n                        {%- endtrans %}\n                    {% endif %}\n                {% elif abstract.state.name == 'rejected' %}\n                    {% trans %}The abstract was rejected.{% endtrans %}\n                {% elif abstract.state.name == 'merged' %}\n                    {% set link_start = '<a href=\"%s\">'|safe|format(url_for('.display_abstract', abstract.merged_into)) %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans other=abstract.merged_into.title -%}\n                        The abstract was merged into {{ link_start }}{{ other }}{{ link_end }}.\n                    {%- endtrans %}\n                {% elif abstract.state.name == 'duplicate' %}\n                    {% set link_start = '<a href=\"%s\">'|safe|format(url_for('.display_abstract', abstract.duplicate_of)) %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans other=abstract.duplicate_of.title -%}\n                        The abstract was marked as a duplicate of {{ link_start }}{{ other }}{{ link_end }}\n                    {%- endtrans %}\n                {% endif %}\n                {% if abstract.judgment_comment %}\n                    <div class=\"titled-rule\">\n                        {% trans %}Comment{% endtrans %}\n                    </div>\n                    {{ abstract.judgment_comment }}\n                {% endif %}\n            </div>\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro _render_submission_info(abstract, field_values) %}\n    {% if abstract.submitted_contrib_type %}\n        <div class=\"info-line\">\n            <label>\n                {% trans %}As contribution type:{% endtrans %}\n            </label>\n            {{ abstract.submitted_contrib_type.name }}\n        </div>\n    {% endif %}\n    {% if abstract.submitted_for_tracks %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.submitted_for_tracks|length -%}\n                    For track:\n                {%- pluralize -%}\n                    For tracks:\n                {%- endtrans -%}\n            </label>\n            {{ render_tracks(abstract.submitted_for_tracks, full_title=true) }}\n        </div>\n    {% endif %}\n    {% if abstract.primary_authors %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.primary_authors|length -%}\n                    Author:\n                {%- pluralize -%}\n                    Authors:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.primary_authors -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if abstract.secondary_authors %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.secondary_authors|length -%}\n                    Co-author:\n                {%- pluralize -%}\n                    Co-authors:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.secondary_authors -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if abstract.speakers %}\n        <div class=\"info-line\">\n            <label>\n                {% trans count=abstract.speakers|length -%}\n                    Speaker:\n                {%- pluralize -%}\n                    Speakers:\n                {%- endtrans %}\n            </label>\n            <ul class=\"author-list\">\n                {% for user in abstract.speakers -%}\n                    <li class=\"event-user\">\n                        <span>\n                            {{ user.full_name }}\n                            {% if user.affiliation %}\n                                <span class=\"affiliation\">\n                                    <span class=\"text\">({{ render_affiliation(user) }})</span>\n                                </span>\n                            {% endif %}\n                        </span>\n                    </li>\n                {%- endfor %}\n            </ul>\n        </div>\n    {% endif %}\n    {% if field_values %}\n        <div class=\"titled-rule\">\n            {%- trans %}More information{% endtrans -%}\n        </div>\n        <dl class=\"custom-field-values\">\n            {% for value in field_values|sort(attribute='contribution_field.position') %}\n                {{ _render_field_value(value) }}\n            {% endfor %}\n        </dl>\n    {% endif %}\n    {% if abstract.submission_comment %}\n        <div class=\"titled-rule\">\n            {% trans %}Comment{% endtrans %}\n        </div>\n        <div class=\"text-not-important\">\n            {{- abstract.submission_comment -}}\n        </div>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_abstract_summary(abstract) %}\n    <div class=\"review-summary flexrow f-a-baseline\">\n        <div class=\"review-summary-badge\">\n            {{ render_summary_state(abstract.state) }}\n        </div>\n        <div class=\"review-summary-content f-self-stretch\">\n            {% if abstract.state.name in ('submitted', 'withdrawn', 'rejected') %}\n                <div>\n                    {% if abstract.submitted_contrib_type %}\n                        {% trans name=abstract.submitter.name, type=abstract.submitted_contrib_type.name|lower -%}\n                            <strong>{{ name }}</strong> submitted this <span class=\"abstract-contribution-type\">{{ type }}</span>\n                        {%- endtrans %}\n                    {% else %}\n                        {% trans name=abstract.submitter.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract\n                        {%- endtrans %}\n                    {% endif %}\n                </div>\n                {% if abstract.submitted_for_tracks %}\n                    <div>\n                        {% trans count=abstract.submitted_for_tracks|length -%}\n                            For track:\n                        {%- pluralize -%}\n                            For tracks:\n                        {%- endtrans %}\n                        {{ render_tracks(abstract.submitted_for_tracks) }}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'accepted' %}\n                <div>\n                    {% if abstract.accepted_contrib_type and abstract.accepted_track %}\n                        {% trans name=abstract.submitter.name,\n                            type=abstract.accepted_contrib_type.name,\n                            track=render_track(abstract.accepted_track, full_title=true) -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            for track {{ track }}\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>.\n                        {% endtrans %}\n                    {% elif abstract.accepted_contrib_type %}\n                        {% trans name=abstract.submitter.name,\n                            type=abstract.accepted_contrib_type.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            as <span class=\"abstract-contribution-type\">{{ type }}</span>.\n                        {% endtrans %}\n                    {% elif abstract.accepted_track %}\n                        {% trans name=abstract.submitter.name,\n                            track=render_track(abstract.accepted_track, full_title=true) -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted\n                            for track {{ track }}.\n                        {% endtrans %}\n                    {% else %}\n                        {% trans name=abstract.submitter.name -%}\n                            <strong>{{ name }}</strong> submitted this abstract and it was finally accepted.\n                        {%- endtrans %}\n                    {% endif %}\n                </div>\n                <div>\n                    {% if abstract.contribution %}\n                        <a href=\"{{ url_for('contributions.display_contribution', abstract.contribution) }}\">\n                            {% trans %}Go to contribution{%- endtrans %}\n                        </a>\n                    {% endif %}\n                </div>\n            {% elif abstract.state.name == 'merged' %}\n                <div>\n                    {% trans name=abstract.submitter.name -%}\n                        <strong>{{ name }}</strong> submitted this abstract but it was merged into another.\n                    {%- endtrans %}\n                </div>\n                {% if abstract.merged_into.can_access(session.user) %}\n                    <div>\n                        {% trans url=url_for('.display_abstract', abstract.merged_into) %}\n                            <a href=\"{{ url }}\">Go to abstract</a>\n                        {% endtrans %}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'duplicate' %}\n                {% trans name=abstract.submitter.name -%}\n                    <strong>{{ name }}</strong> submitted this abstract but it was marked as duplicate of another.\n                {%- endtrans %}\n                {% if abstract.duplicate_of.can_access(session.user) %}\n                    <div>\n                        {% trans url=url_for('.display_abstract', abstract.duplicate_of) %}\n                            <a href=\"{{ url }}\">Go to abstract</a>\n                        {% endtrans %}\n                    </div>\n                {% endif %}\n            {% elif abstract.state.name == 'invited' %}\n                {% trans name=abstract.submitter.name -%}\n                    <strong>{{ name }}</strong> was invited to submit this abstract\n                {%- endtrans %}\n            {% endif %}\n        </div>\n    </div>\n{% endmacro %}\n\n\n{% macro _render_attachments(abstract) %}\n    {% if abstract.files %}\n        <div class=\"files field-separator\">\n            <table class=\"tree\">\n                {% for file in abstract.files %}\n                    <tr>\n                        <td>\n                            <span class=\"{{ icon_from_mimetype(file.content_type, 'icon-file-filled') }}\">\n                                <a href=\"{{ url_for('.download_attachment', file) }}\" target=\"_blank\">\n                                    {{ file.filename }}\n                                </a>\n                            </span>\n                        </td>\n                    </tr>\n                {% endfor %}\n            </table>\n        </div>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_field_value(value) %}\n        <div class=\"field-value {{ 'single-choice 'if value.contribution_field.field_type == 'single_choice' else ''}}\">\n            <label>{{ value.contribution_field.title }}:</label>\n            {% if value.friendly_data %}\n                <span class=\"value\">{{ value.friendly_data }}</span>\n            {% else %}\n                <span class=\"value empty\">{% trans %}No answer{% endtrans %}</span>\n            {% endif %}\n        </div>\n{% endmacro %}\n\n\n{% macro _render_abstract_judgment_action(abstract) %}\n    {% set action = abstract.state.name %}\n    {% if action == 'withdrawn' %}\n        {% trans name=abstract.submitter.name -%}\n            <strong>{{ name }}</strong> withdrew this abstract\n        {%- endtrans %}\n    {% elif abstract.can_judge(session.user) %}\n        {% if action == 'accepted' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> accepted this abstract\n            {%- endtrans %}\n        {% elif action == 'rejected' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> rejected this abstract\n            {%- endtrans %}\n        {% elif action == 'merged' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> merged this abstract into another\n            {%- endtrans %}\n        {% elif action == 'duplicate' %}\n            {% trans name=abstract.judge.name -%}\n                <strong>{{ name }}</strong> marked this abstract as duplicate of another\n            {%- endtrans %}\n        {% endif %}\n    {% else %}\n        {% if action == 'accepted' %}\n            {% trans %}This abstract was accepted{% endtrans %}\n        {% elif action == 'rejected' %}\n            {% trans %}This abstract was rejected{% endtrans %}\n        {% elif action == 'merged' %}\n            {% trans %}This abstract was merged{% endtrans %}\n        {% elif action == 'duplicate' %}\n            {% trans %}This abstract was marked as duplicate{% endtrans %}\n        {% endif %}\n    {% endif %}\n{% endmacro %}\n", "{% macro menu_entry(entry) -%}\n    {% set event_locked = entry.event.is_locked %}\n    <div class=\"menu-entry {%- if entry.is_root and entry.children %} with-children{% endif %}\"\n         data-position=\"{{ entry.position }}\"\n         data-position-url=\"{{ url_for('.menu_entry_position', entry) }}\"\n         data-entry-id=\"{{ entry.id }}\">\n        <div class=\"i-label {{ 'drag-handle' if not event_locked }}\n            {%- if entry.type.name == 'separator' %} disabled\n            {%- elif entry.type.name in ('user_link', 'page') %} highlight{% endif -%}\n            {%- if not entry.is_enabled %} striped{% endif %}\">\n            <i class=\"entry-{{ entry.type.name }}\"></i>\n            <span class=\"title\">\n                {% if config.DEBUG %}<span class=\"position\">{{ entry.position + 1}}</span>{% endif %}\n                {{ entry.localized_title }}\n            </span>\n            <span class=\"actions hide-if-locked\">\n                {% if entry.type.name == 'page' %}\n                    <a class=\"{% if not entry.page.is_default %}not-{% endif %}default\" href=\"#\"\n                       data-href=\"{{ url_for('.menu_entry_toggle_default', entry) }}\"\n                       data-method=\"POST\"\n                       title=\"{% trans %}Toggle default event homepage{% endtrans %}\"\n                    ></a>\n                {% endif %}\n                <a class=\"{% if not entry.is_enabled %}not-{% endif %}enabled\" href=\"#\"\n                   title=\"{% trans %}Toggle visibility{% endtrans %}\"\n                   data-href=\"{{ url_for('.menu_entry_toggle_enabled', entry) }}\"\n                   data-method=\"POST\"\n                ></a>\n                {% if not entry.is_separator %}\n                    <a href=\"#\" title=\"{% trans %}Edit entry{% endtrans %}\" data-href=\"{{ url_for('.menu_entry_edit', entry) }}\" class=\"edit-entry\"></a>\n                {% endif %}\n                {% if entry.type.name in ('user_link', 'page', 'separator') %}\n                    <a href=\"#\" class=\"delete-entry\"\n                         data-method=\"DELETE\"\n                         data-href=\"{{ url_for('.menu_delete_entry', entry) }}\"\n                         data-title=\"{% trans %}Remove the menu entry?{% endtrans %}\"\n                         title=\"{% trans %}Remove the menu entry{% endtrans %}\"\n                         data-confirm=\"\n                            {%- if not entry.is_separator -%}\n                                {%- trans name='\"%s\"'|format(entry.localized_title) -%}\n                                    Are you sure you want to remove {{ name }}?\n                                {%- endtrans -%}\n                            {% else %}\n                                {%- trans %}Are you sure you want to remove this spacer?{% endtrans -%}\n                            {% endif %}\">\n                    </a>\n                {% endif %}\n            </span>\n        </div>\n        {% if entry.is_root and entry.children %}\n            {{ menu_entries(entry.children, connect_menu=entry.type.name in ('user_link', 'page')) }}\n        {% elif entry.type.name in ('user_link', 'page') %}\n            {{ menu_entries([], connect_menu=true) }}\n        {% endif %}\n    </div>\n{%- endmacro %}\n\n{% macro menu_entries(entries, connect_menu=False) -%}\n    {# empty class as the :empty pseudo selector fails if there are white spaces, \\t or \\n between the <ul> tags #}\n    <ul class=\"menu-entries {%- if connect_menu %} connect-menu{% endif %}{% if not entries %} empty {% endif %}\"\n        data-empty-text=\"{% trans %}Drop here to create a nested entry.{% endtrans %}\">\n        {%- for entry in entries if not entry.is_orphaned %}\n            <li {% if entry.type.name in ('user_link', 'page') -%}\n                    class=\"{% if entry.is_root -%}\n                        allow-nested {%- if not entry.children %} nestable{% endif -%}\n                    {%- else -%}\n                        nestable\n                    {%- endif -%}\"\n                {%- endif %}>\n                {{- menu_entry(entry) -}}\n            </li>\n        {% endfor -%}\n    </ul>\n{%- endmacro %}\n\n\n{% macro menu_entry_display(entry, root_entry=true, active_entry_id=none) %}\n    {%- if entry.is_separator -%}\n        <li class=\"spacer\"></li>\n    {%- else -%}\n        {% set menu_class = 'menuConfTitle' if root_entry else 'menuConfMiddleCell' %}\n        <li class=\"{{ menu_class }}\n            {%- if entry.id == active_entry_id %} selected menuConfSelected\n                    {%- if not root_entry %} sublink{% endif -%}\n            {%- endif %}\">\n            <a {% if entry.url %}href=\"{{ entry.url }}\"{% else %}class=\"no-link\"{% endif %}\n               {% if entry.new_tab %}target=\"_blank\"{% endif %}>\n                {{- entry.localized_title -}}\n            </a>\n            {%- if root_entry and entry.children -%}\n                <ul class=\"inner\">\n                    {%- for child in entry.children if child.is_visible -%}\n                        {{ menu_entry_display(child, root_entry=False, active_entry_id=active_entry_id) }}\n                    {%- endfor -%}\n                </ul>\n            {%- endif -%}\n    {%- endif -%}\n{% endmacro %}\n", "{% macro _change_type_confirmation(type) %}\n    {% trans -%}\n        Changing the event type to {{ type }} will change the look of the event page\n        and may disable some features not available for the new event type.\n    {%- endtrans %}\n{% endmacro %}\n\n\n{% macro _render_change_event_type(event, event_types) %}\n    <button class=\"i-button borderless icon-wrench arrow js-dropdown hide-if-locked\" data-toggle=\"dropdown\">\n        {%- trans %}Change type{% endtrans -%}\n    </button>\n    <ul class=\"i-dropdown\">\n        {% for type, title in event_types %}\n            <li>\n                {% if type == event.type_.name %}\n                    <a class=\"disabled\" title=\"{% trans %}This is the event's current type.{% endtrans %}\">\n                        {{ title }}\n                    </a>\n                {% else %}\n                    <a data-href=\"{{ url_for('event_management.change_type', event) }}\"\n                       data-method=\"POST\"\n                       data-params=\"{{ {'type': type} | tojson | forceescape }}\"\n                       data-title=\"{% trans %}Confirm type change{% endtrans %}\"\n                       data-confirm=\"{{ _change_type_confirmation(title) }}\"\n                       data-ajax>\n                        {{ title }}\n                    </a>\n                {% endif %}\n            </li>\n        {% endfor %}\n    </ul>\n{% endmacro %}\n\n\n{% macro _render_lock_event(event) %}\n    {% if not event.can_lock(session.user) %}\n        {% if event.is_locked %}\n            <button class=\"i-button borderless icon-lock-center disabled\"\n                    title=\"{% trans %}Only the event creator and category managers may unlock an event.{% endtrans %}\">\n                {%- trans %}Unlock{% endtrans -%}\n            </button>\n        {% else %}\n            <button class=\"i-button borderless icon-lock-center disabled\"\n                    title=\"{% trans %}Only the event creator and category managers may lock an event.{% endtrans %}\">\n                {%- trans %}Lock{% endtrans -%}\n            </button>\n        {% endif %}\n    {% else %}\n        {% if event.is_locked %}\n            <button class=\"i-button borderless icon-lock-center warning\"\n                    title=\"{% trans %}Unlock event{% endtrans %}\"\n                    data-qtip-style=\"warning\"\n                    data-href=\"{{ url_for('event_management.unlock', event) }}\"\n                    data-method=\"POST\"\n                    data-reload-after\n                    data-ajax>\n                {%- trans %}Unlock{% endtrans -%}\n            </button>\n        {% else %}\n            <button class=\"i-button borderless icon-lock-center warning\"\n                    title=\"{% trans %}Lock event{% endtrans %}\"\n                    data-qtip-style=\"warning\"\n                    data-href=\"{{ url_for('event_management.lock', event) }}\"\n                    data-reload-after\n                    data-ajax-dialog>\n                {%- trans %}Lock{% endtrans -%}\n            </button>\n        {% endif %}\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_manage_series(event) %}\n    <span id=\"event-action-manage-series-container\"\n          data-event-id=\"{{ event.id }}\"\n          data-category-id=\"{{ event.category_id }}\"\n          data-timezone=\"{{ event.timezone }}\"\n          {% if event.series %}data-series-id=\"{{ event.series.id }}\"{% endif %}></span>\n{% endmacro %}\n\n\n{% macro _render_move_event(event) %}\n    {% if not event.is_unlisted %}\n        <span class=\"hide-if-locked\"\n              id=\"event-action-move-container\"\n              data-event-id=\"{{ event.id }}\"\n              data-category-id=\"{{ event.category.id }}\"\n              {{ 'data-pending-request' if event.pending_move_request }}></span>\n    {% endif %}\n{% endmacro %}\n\n\n{% macro _render_delete_event(event) %}\n    <button class=\"i-button borderless icon-remove danger hide-if-locked\"\n            title=\"{% trans %}Delete event{% endtrans %}\"\n            data-qtip-style=\"danger\"\n            data-href=\"{{ url_for('event_management.delete', event) }}\"\n            data-ajax-dialog>\n        {%- trans %}Delete{% endtrans -%}\n    </button>\n{% endmacro %}\n\n\n{% macro _render_import_event(event) %}\n    <button class=\"i-button borderless icon-import hide-if-locked\"\n            title=\"{% trans %}Import from event{% endtrans %}\"\n            data-title=\"{% trans %}Import from other event{% endtrans %}\"\n            data-href=\"{{ url_for('event_management.import', event) }}\"\n            data-ajax-dialog>\n        {%- trans %}Import{% endtrans -%}\n    </button>\n{% endmacro %}\n\n\n{% macro render_action_menu(event, event_types) %}\n    {% set clones = event.clones|rejectattr('is_deleted')|list %}\n\n    <div class=\"action-menu\">\n        <div class=\"toolbar\">\n            {% if event.can_manage(session.user) %}\n                {% if event.is_unlisted %}\n                    <span class=\"hide-if-locked group\"\n                          id=\"event-action-publish-container\"\n                          data-event-id=\"{{ event.id }}\"\n                          {{ 'data-pending-request' if event.pending_move_request }}></span>\n                   </a>\n                {% endif %}\n\n                <div class=\"group\">\n                    <button class=\"i-button icon-copy\" title=\"{% trans %}Clone event{% endtrans %}\"\n                       data-href=\"{{ url_for('event_management.clone', event) }}\"\n                       data-title=\"{% trans %}Clone Event{% endtrans %}\"\n                       data-ajax-dialog>\n                        {% trans %}Clone{% endtrans %}\n                    </button>\n                    {% if clones %}\n                        <a id=\"event-action-menu-clones-target\" class=\"i-button label clickable arrow\">\n                            {{- clones|length -}}\n                        </a>\n                    {% endif %}\n                </div>\n\n                <button id=\"event-action-menu-actions-target\" class=\"i-button icon-settings i-button arrow\"\n                   title=\"{% trans %}Event actions{% endtrans %}\"></button>\n\n                <div id=\"event-action-menu-actions\">\n                    <div class=\"action-menu-buttons {{ 'event-locked' if event.is_locked }}\">\n                        {{ _render_move_event(event) }}\n                        {{ _render_import_event(event) }}\n                        {% if not event.is_unlisted %}{{ _render_manage_series(event) }}{% endif %}\n                        {{ _render_lock_event(event) }}\n                        {{ _render_delete_event(event) }}\n                        {{ _render_change_event_type(event, event_types) }}\n                    </div>\n                </div>\n\n                <div id=\"event-action-menu-clones\">\n                    {% trans %}Events cloned from the current event:{% endtrans %}\n                    <ul>\n                        {% for clone in clones %}\n                            <li>\n                                <a href=\"{{ url_for('event_management.settings', clone) }}\"\n                                   title=\"{{ clone.title }}\" data-qtip-position=\"left\">\n                                    {{ clone.start_dt | format_date(timezone=clone.tzinfo) }}\n                                </a>\n                            </li>\n                        {% endfor %}\n                    </ul>\n                </div>\n            {% endif %}\n        </div>\n    </div>\n\n    <script>\n        setupEventManagementActionMenu();\n    </script>\n{% endmacro %}\n", "{% extends 'events/management/base.html' %}\n\n{% block title %}{% trans %}Offline Copy{% endtrans %}{% endblock %}\n\n{% block content %}\n    <div class=\"i-box-group vert fixed-width static-sites\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">{%- trans %}New Offline Copy{% endtrans -%}</div>\n                <button class=\"i-button icon-wrench right\" type=\"button\"\n                        data-method=\"post\"\n                        data-href=\"{{ url_for('static_site.build', event) }}\"\n                        data-title=\"{% trans %}Build an offline copy{% endtrans %}\"\n                        data-confirm=\"{% trans %}Are you sure you want to build an offline copy of this event? Beware that it is a heavy operation, especially for large events, and it might take some time to finish.{% endtrans %}\">\n                    {%- trans %}Build offline copy{% endtrans -%}\n                </button>\n            </div>\n            <div class=\"i-box-content\">\n                {% trans %}This will build an offline copy of the event. This is useful if you want to make it available where no Internet connection is available.{% endtrans %}\n            </div>\n        </div>\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">{%- trans %}Existing Offline Copies{% endtrans -%}</div>\n            </div>\n            <div class=\"{% if static_sites %}i-box-table-widget{% else %}i-box-content{% endif %}\">\n                {% if static_sites %}\n                    {% set label_mapping = {\n                        'success': 'accept',\n                        'failed': 'danger',\n                        'expired': 'warning',\n                        'running': 'highlight'\n                    } %}\n                    {% set has_downloads = static_sites|selectattr('state.name', 'equalto', 'success')|any %}\n                    <table class=\"i-table-widget\">\n                        <thead>\n                            <tr>\n                                <th>{% trans %}Requested by{% endtrans %}</th>\n                                <th>{% trans %}Requested on{% endtrans %}</th>\n                                <th>{% trans %}Status{% endtrans %}</th>\n                                {% if has_downloads %}\n                                    <th>{% trans %}Download{% endtrans %}</th>\n                                {% endif %}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {% for site in static_sites %}\n                                <tr>\n                                    <td>{{ site.creator.full_name }}</td>\n                                    <td>{{ site.requested_dt|format_datetime(timezone=site.event.tzinfo) }}</td>\n                                    <td>\n                                        <span class=\"i-label {{ label_mapping.get(site.state.name, 'disabled') }}\">\n                                            {{ site.state.title }}\n                                        </span>\n                                    </td>\n                                    {% if has_downloads %}\n                                        <td>\n                                            {% if site.state.name == 'success' %}\n                                                <a href=\"{{ url_for('static_site.download', site, _external=True) }}\"\n                                                   class=\"i-button icon-file-download\">\n                                                    {%- trans %}Download{% endtrans -%}\n                                                </a>\n                                            {% endif %}\n                                        </td>\n                                    {% endif %}\n                                </tr>\n                            {% endfor %}\n                        </tbody>\n                    </table>\n                {% else %}\n                    <span class=\"empty\">{% trans %}There are no offline copies of this event.{% endtrans %}</span>\n                {% endif %}\n            </div>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'events/surveys/management/_survey_base.html' %}\n\n{% set has_users = submitted_surveys|rejectattr('is_anonymous')|any %}\n\n{% block content %}\n    {% if survey.private and survey.state.name in ('active_and_clean', 'active_and_answered') %}\n        <div class=\"action-box highlight\">\n            <div class=\"section\">\n                <div class=\"icon icon-lock\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {%- trans %}The survey is private{% endtrans -%}\n                    </div>\n                    {% set link_start %}\n                        <a href=\"{{ url_for('.display_survey_form', survey, survey.locator.token, _external=True) }}\"\n                           class=\"js-copy-to-clipboard\"\n                           title=\"{% trans %}Copy link to clipboard{% endtrans %}\"\n                           data-clipboard-text=\"{{ url_for('.display_survey_form', survey, survey.locator.token, _external=True) }}\"\n                           data-clipboard-action=\"copy\">\n                    {% endset %}\n                    {% set link_end = '</a>'|safe %}\n                    {% trans -%}\n                        The survey is accessible only by people with this {{ link_start }}link{{ link_end }}\n                    {%- endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <button class=\"i-button icon-mail right highlight js-requires-selected-row send-mails-btn\"\n                            data-href=\"{{ url_for('surveys.send_links', survey) }}\"\n                            data-title=\"{% trans %}Send survey links{% endtrans %}\"\n                            data-method=\"POST\"\n                            data-ajax-dialog>\n                        {%- trans %}Send links{% endtrans -%}\n                    </button>\n                </div>\n            </div>\n        </div>\n    {% endif %}\n\n    {% if survey.state.name == 'not_ready' %}\n        {% include 'events/surveys/management/survey_actions/not_ready.html' %}\n    {% elif survey.state.name == 'ready_to_open' %}\n        {% include 'events/surveys/management/survey_actions/ready_to_open.html' %}\n    {% elif survey.state.name in ('active_and_clean', 'active_and_answered') %}\n        {% include 'events/surveys/management/survey_actions/active.html' %}\n    {% elif survey.state.name == 'finished' %}\n        {% include 'events/surveys/management/survey_actions/finished.html' %}\n    {% elif survey.state.name == 'limit_reached' %}\n        {% include 'events/surveys/management/survey_actions/limit_reached.html' %}\n    {% endif %}\n\n    <div class=\"action-box\">\n        {% if not survey.event.is_locked %}\n            <div class=\"section\">\n                <div class=\"icon icon-settings\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% trans %}General settings{% endtrans %}\n                    </div>\n                    {% trans %}Edit settings for this survey.{% endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <button class=\"i-button icon-edit\"\n                            data-href=\"{{ url_for('.edit_survey', survey) }}\"\n                            data-title=\"{% trans %}Edit survey{% endtrans %}\"\n                            data-ajax-dialog\n                            data-reload-after>\n                        {% trans %}Edit{% endtrans %}\n                    </button>\n                </div>\n            </div>\n        {% endif %}\n\n        {% if survey.state.name != 'not_ready' %}\n            <div class=\"section\">\n                <div class=\"icon icon-clipboard\"></div>\n                <div class=\"text\">\n                    <div class=\"label\">\n                        {% trans %}Questionnaire{% endtrans %}\n                    </div>\n                    {% trans %}Add, remove or modify questions.{% endtrans %}\n                </div>\n                <div class=\"toolbar\">\n                    <a href=\"{{ url_for('.manage_questionnaire', survey) }}\" class=\"i-button icon-settings\">\n                        {% trans %}Manage{% endtrans %}\n                    </a>\n                </div>\n            </div>\n        {% endif %}\n    </div>\n\n    <h2>\n        {% trans %}Submissions{% endtrans %}\n    </h2>\n\n    {% if submitted_surveys %}\n        <div class=\"toolbars space-after\">\n            <div class=\"toolbar\">\n                <button class=\"i-button icon-checkbox-checked arrow js-dropdown\"  data-toggle=\"dropdown\"></button>\n                <ul class=\"i-dropdown\">\n                    <li><a href=\"#\" id=\"select-all\">\n                        {% trans %}All{% endtrans %}\n                    </a></li>\n                    <li><a href=\"#\" id=\"select-none\">\n                        {% trans %}None{% endtrans %}\n                    </a></li>\n                </ul>\n            </div>\n            <div class=\"toolbar\">\n                <a href=\"{{ url_for('.survey_results', survey) }}\" class=\"i-button icon-chart\">\n                    {% trans %}Results{% endtrans %}\n                </a>\n                <button class=\"i-button arrow js-dropdown\"\n                        data-toggle=\"dropdown\">\n                    {%- trans %}Export{% endtrans -%}\n                </button>\n                <ul class=\"i-dropdown\">\n                    <li>\n                        <a href=\"#\" data-href=\"{{ url_for('.export_submissions_csv', survey) }}\"\n                           class=\"icon-file-spreadsheet js-submission-action js-export-submissions\">\n                            {% trans %}CSV{% endtrans %}\n                        </a>\n                    </li>\n                    <li>\n                        <a href=\"#\" data-href=\"{{ url_for('.export_submissions_excel', survey) }}\"\n                           class=\"icon-file-excel js-submission-action js-export-submissions\">\n                            {% trans %}XLSX (Excel){% endtrans %}\n                        </a>\n                    </li>\n                </ul>\n                <button id=\"delete-submissions\"\n                        class=\"i-button icon-remove text-color color-on-hover danger hide-if-locked\"\n                        data-href=\"{{ url_for('.delete_submissions', survey) }}\"\n                        data-title=\"{% trans %}Remove all selected submissions?{% endtrans %}\"\n                        data-confirm=\"{% trans %}Are you sure you want to remove all selected submissions?{% endtrans %}\"\n                        data-method=\"DELETE\"\n                        disabled>\n                    {% trans %}Delete{% endtrans %}\n                </button>\n            </div>\n        </div>\n\n        <table id=\"submission-list\" class=\"i-table-widget fixed-width\">\n            <thead>\n                <tr>\n                    <th></th>\n                    <th>{% trans %}ID{% endtrans %}</th>\n                    <th>{% trans %}Submitted{% endtrans %}</th>\n                    <th>{% trans %}User{% endtrans %}</th>\n                    {% if has_users %}\n                        <th>{% trans %}Email{% endtrans %}</th>\n                    {% endif %}\n                    <th></th>\n                </tr>\n            </thead>\n            <tbody>\n                {% for submission in submitted_surveys|sort(attribute='submitted_dt') %}\n                    {{ _render_submission_row(submission) }}\n                {% endfor %}\n            </tbody>\n        </table>\n    {% else %}\n        <div class=\"info-message-box\">\n            <div class=\"message-text\">\n                {% trans %}There are no submissions yet.{% endtrans %}\n            </div>\n        </div>\n    {% endif %}\n{% endblock %}\n\n{% macro _render_submission_row(submission) %}\n    <tr class=\"submission-row\">\n        <td>\n            <input type=\"checkbox\" class=\"inline-vcentered submission-ids\" value=\"{{ submission.id }}\">\n        </td>\n        <td>\n            <a href=\"{{ url_for('.display_submission', submission) }}\">#{{ submission.friendly_id }}</a>\n        </td>\n        <td>{{ submission.submitted_dt|format_datetime(timezone=submission.survey.event.tzinfo) }}</td>\n        <td>\n            {% if not submission.is_anonymous %}\n                {{ submission.user.full_name }}\n            {% else %}\n                <em>{% trans %}Anonymous{% endtrans %}</em>\n            {% endif %}\n        </td>\n        {% if has_users %}\n            <td>\n                {% if not submission.is_anonymous %}\n                    {{ submission.user.email }}\n                {% endif %}\n            </td>\n        {% endif %}\n        <td>\n            {% set data_confirm %}\n                {% trans %}Are you sure you want to remove this submission?{% endtrans %}\n                {% if submission.is_anonymous %}\n                    {% trans %}\n                        Note: Authenticated users will not be able to submit an anonymous survey again\n                        even if you delete their submission.\n                    {% endtrans %}\n                {% endif %}\n            {% endset %}\n            <a href=\"#\" class=\"icon-remove right js-delete-submission hide-if-locked\"\n               data-href=\"{{ url_for('.delete_submissions', survey) }}\"\n               data-method=\"DELETE\"\n               data-title\n               title=\"{% trans %}Remove submission{% endtrans %}\"\n               data-confirm=\"{{ data_confirm }}\"\n               data-submission-id=\"{{ submission.id }}\"></a>\n        </td>\n    </tr>\n{% endmacro %}\n", "{% extends 'users/base.html' %}\n{% from '_switch.html' import switch %}\n\n{% block user_content %}\n    <div class=\"i-box\">\n        <div class=\"i-box-header\">\n            <div class=\"i-box-title\">\n                {%- trans %}Authorized applications{% endtrans -%}\n            </div>\n        </div>\n        <div class=\"i-box-content\">\n            <p>{% trans %}This is the list of applications you authorized to access your Indico data.{% endtrans %}</p>\n            <ul class=\"group-list with-buttons\">\n                {% if not authorizations %}\n                    <li class=\"italic\">\n                        {%- trans %}No third party applications have been authorized.{% endtrans -%}\n                    </li>\n                {% endif %}\n                {% for auth, last_use in authorizations %}\n                    <li class=\"flexrow f-a-center\">\n                        <span class=\"list-item-title\"\n                              title=\"{% trans %}Authorized scopes:{% endtrans %} {{ auth.scopes|join(', ') }}\">\n                            {{- auth.application.name -}}\n                        </span>\n                        <span class=\"right\">\n                            <span class=\"list-item-info\">\n                                <span class=\"label\">{% trans %}Last used:{% endtrans %}</span>\n                                <span class=\"content\">\n                                    {% if last_use %}\n                                        {{ last_use | format_datetime('short') }}\n                                    {% else %}\n                                        {% trans %}Never{% endtrans %}\n                                    {% endif %}\n                                </span>\n                            </span>\n                            <button class=\"ui negative small button\"\n                                    data-href=\"{{ url_for('.user_app_revoke', auth.application) }}\"\n                                    data-method=\"POST\"\n                                    data-confirm=\"{% trans app_name=auth.application.name %}{{ app_name }} will no longer have access to your Indico data.\n                                    Are you sure you want to revoke its access?{% endtrans %}\">\n                                {%- trans %}Revoke{% endtrans -%}\n                            </button>\n                        </span>\n                    </li>\n                {% endfor %}\n            </ul>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'users/base.html' %}\n{% from 'message_box.html' import message_box %}\n\n{% block user_content %}\n    <div class=\"i-box-group vert\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">\n                    {%- trans %}API tokens{% endtrans -%}\n                </div>\n                {% if can_manage %}\n                    <div class=\"i-box-buttons toolbar\">\n                        <div class=\"group\">\n                            <button type=\"button\"\n                                    class=\"ui primary small button\"\n                                    data-href=\"{{ url_for('.user_token_new') }}\"\n                                    data-title=\"{% trans %}Create new token{% endtrans %}\"\n                                    data-ajax-dialog\n                                    data-reload-after>\n                                <i aria-hidden=\"true\" class=\"icon plus\"></i>\n                                {%- trans %}Create new token{% endtrans -%}\n                            </button>\n                        </div>\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                <p>{% trans %}Tokens you generated to access the Indico APIs.{% endtrans %}</p>\n                {% if created_token %}\n                    {% call message_box('warning') %}\n                        {% trans -%}\n                            Make sure to copy your API token now.\n                            You won't be able to see it again!\n                        {%- endtrans %}\n                    {% endcall %}\n                {% endif %}\n                <ul class=\"group-list with-buttons\">\n                    {% if not tokens %}\n                        <li class=\"italic\">\n                            {%- trans %}No tokens have been generated.{% endtrans -%}\n                        </li>\n                    {% endif %}\n                    {% for token in tokens %}\n                        {% set new_token = created_token[1] if created_token and created_token[0] == token.id else none %}\n                        <li class=\"flexrow f-a-center\">\n                            <span class=\"list-item-title\"\n                                {% if not new_token %}\n                                    title=\"{% trans %}Authorized scopes:{% endtrans %} {{ token.scopes|join(', ') }}\"\n                                {% endif %}>\n                                {% if new_token %}\n                                    <code class=\"semantic-text success\">{{ new_token }}</code>\n                                    <span class=\"icon-clipboard js-copy-to-clipboard\"\n                                          title=\"{% trans %}Copy to clipboard{% endtrans %}\"\n                                          style=\"cursor: pointer\"\n                                          data-clipboard-text=\"{{ new_token }}\"\n                                          data-clipboard-action=\"copy\"></span>\n                                {% elif can_manage %}\n                                    <a href=\"#\"\n                                       data-href=\"{{ url_for('.user_token_edit', token) }}\"\n                                       data-title=\"{% trans token_name=token.name %}Edit token '{{ token_name }}'{% endtrans %}\"\n                                       data-ajax-dialog\n                                       data-reload-after>\n                                        {{- token.name -}}\n                                    </a>\n                                {% else %}\n                                    {{- token.name -}}\n                                {% endif %}\n                            </span>\n                            <span class=\"right\">\n                                {% if not new_token or token.last_used_dt %}\n                                    <span class=\"list-item-info\">\n                                        <span class=\"label\">{% trans %}Last used:{% endtrans %}</span>\n                                        <span class=\"content\">\n                                            {% if token.last_used_dt %}\n                                                <span title=\"{% trans ip=token.last_used_ip, count=token.use_count %}\n                                                    Last used from {{ ip }}\n                                                    Total uses: {{ count }}\n                                                    {% endtrans %}\">\n                                                    {{- token.last_used_dt | format_datetime('short') -}}\n                                                </span>\n                                            {% else %}\n                                                {% trans %}Never{% endtrans %}\n                                            {% endif %}\n                                        </span>\n                                    </span>\n                                {% endif %}\n                                <div class=\"ui icon buttons small\">\n                                    <button class=\"ui orange button ui-qtip\"\n                                            title=\"{% trans %}Regenerate token{% endtrans %}\"\n                                            data-href=\"{{ url_for('.user_token_reset', token) }}\"\n                                            data-method=\"POST\"\n                                            data-title=\"{% trans token_name=token.name %}Regenerate token '{{ token_name }}'{% endtrans %}\"\n                                            data-confirm=\"{% trans token_name=token.name %}\n                                            If you've lost/forgotten this token, you can regenerate it, but be aware\n                                            that any applications or scripts using this token will need to be updated.\n                                            You cannot undo this action.\n                                            {% endtrans %}\"\n                                            {{ 'disabled' if new_token }}>\n                                        <i aria-hidden=\"true\" class=\"refresh icon\"></i>\n                                    </button>\n                                    <button class=\"ui red button ui-qtip\"\n                                            title=\"{% trans %}Revoke token{% endtrans %}\"\n                                            data-href=\"{{ url_for('.user_token_revoke', token) }}\"\n                                            data-method=\"POST\"\n                                            data-title=\"{% trans token_name=token.name %}Revoke token '{{ token_name }}'{% endtrans %}\"\n                                            data-confirm=\"{% trans token_name=token.name %}\n                                            Any applications or scripts using this token will no longer be able to access\n                                            the Indico API.\n                                            You cannot undo this action.\n                                            {% endtrans %}\n                                            {% if not can_manage %}\n                                                {% trans %}\n                                                Warning: You will not be able to create a new API token since only Indico\n                                                admins can create API tokens.\n                                                {% endtrans %}\n                                            {% endif %}\n                                            \">\n                                        <i aria-hidden=\"true\" class=\"trash icon\"></i>\n                                    </button>\n                                </div>\n                            </span>\n                        </li>\n                    {% endfor %}\n                </ul>\n            </div>\n        </div>\n    </div>\n{% endblock %}\n", "{% extends 'users/base.html' %}\n\n{% block user_content %}\n    <div class=\"i-box-group vert\">\n        <div class=\"i-box\">\n            <div class=\"i-box-header\">\n                <div class=\"i-box-title\">\n                    {%- trans %}Details{% endtrans -%}\n                </div>\n                {% if session.user.is_admin %}\n                    <div class=\"i-box-buttons\">\n                        {% if not user.is_blocked %}\n                            <div {%- if user == session.user %} title=\"{% trans %}You cannot block yourself{% endtrans %}\"{% endif %}>\n                                <button class=\"ui negative small button\"\n                                        data-href=\"{{ url_for('.user_block') }}\"\n                                        data-method=\"PUT\"\n                                        data-confirm=\"{% trans %}This user will no longer have access to Indico.\n                                        Are you sure you want to revoke their access?{% endtrans %}\"\n                                        data-reload-after\n                                        {% if user == session.user %}disabled{% endif %}>\n                                    {% trans %}Block User{% endtrans %}\n                                </button>\n                            </div>\n                        {% else %}\n                            <button class=\"ui small button\"\n                                    data-href=\"{{ url_for('.user_block') }}\"\n                                    data-method=\"DELETE\"\n                                    data-confirm=\"{% trans %}This user will regain access to Indico.\n                                    Are you sure you want to restore their access?{% endtrans %}\"\n                                    data-reload-after>\n                                {% trans %}Unblock User{% endtrans %}\n                            </button>\n                        {% endif %}\n                    </div>\n                {% endif %}\n            </div>\n            <div class=\"i-box-content\">\n                <div id=\"personal-details-form-container\"></div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        setupPersonalDataForm(\n            {{ (user.id if user != session.user else none) | tojson }},\n            {{ user_values | tojson }},\n            {{ current_affiliation | tojson }},\n            {{ titles | tojson }},\n            {{ user.synced_values | tojson }},\n            {{ locked_fields | tojson }},\n            {{ locked_field_message | tojson }},\n            {{ has_predefined_affiliations | tojson }}\n        );\n    </script>\n{% endblock %}\n", "// This file is part of Indico.\n// Copyright (C) 2002 - 2023 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global ConfirmPopup:false, SpecialRemovePopup:false, AlertPopup:false */\n\nimport Palette from '../../utils/palette';\n\n(function(global) {\n  global.confirmPrompt = function confirmPrompt(message, title) {\n    var dfd = $.Deferred();\n    message = $('<div>', {width: 400, text: message});\n    new ConfirmPopup(title || $T('Please confirm'), message, function(confirmed) {\n      if (confirmed) {\n        dfd.resolve();\n      } else {\n        dfd.reject();\n      }\n    }).open();\n    return dfd.promise();\n  };\n\n  global.choiceConfirmPrompt = function choiceConfirmPrompt(message, title, choice1, choice2) {\n    var dfd = $.Deferred();\n    message = $('<div>', {width: 400, html: message});\n    new SpecialRemovePopup(\n      title || $T('Please confirm'),\n      message,\n      function(action) {\n        if (action === 0) {\n          dfd.reject();\n        } else {\n          dfd.resolve(action);\n        }\n      },\n      choice1,\n      choice2\n    ).open();\n    return dfd.promise();\n  };\n\n  global.alertPopup = function alertPopup(message, title) {\n    var dfd = $.Deferred();\n    new AlertPopup(title, message, function() {\n      dfd.resolve();\n    }).open();\n    return dfd;\n  };\n\n  global.handleFlashes = function handleFlashes(data, clear, element) {\n    var container;\n    if (!element || !element.length) {\n      container = $('#flashed-messages');\n    } else if (element.hasClass('flashed-messages')) {\n      container = element;\n    } else {\n      container = element.closest('.ui-dialog-content').find('.flashed-messages');\n      if (!container.length) {\n        container = element.closest('.page-content').find('.flashed-messages');\n      }\n    }\n    if (!container.length) {\n      container = $('#flashed-messages');\n    }\n    if (clear === undefined || clear) {\n      container.empty();\n    }\n    if (data.flashed_messages) {\n      var flashed = $(data.flashed_messages.trim()).children();\n      container.append(flashed);\n    }\n  };\n\n  global.handleNotifications = function handleNotifications(data) {\n    if (data && data.flashed_messages) {\n      handleFlashes(data);\n    }\n    if (data && data.notifications) {\n      _.each(data.notifications, function(notification) {\n        cornerMessage({\n          message: notification,\n          duration: 10000,\n          class: 'highlight',\n          actionLabel: $T.gettext('Close'),\n        });\n      });\n    }\n  };\n\n  global.cornerMessage = function cornerMessage(options) {\n    // Create nice message in bottom right corner\n\n    options = $.extend(\n      {\n        actionLabel: null, // the text of the action label\n        actionCallback: null, // the callback that will be invoked\n        message: '', // the message that will be displayed\n        progressMessage: $T.gettext('Executing operation...'), // the message that will be displayed while executing\n        // the action\n        feedbackMessage: $T.gettext('Operation done!'), // the message that will be displayed once the action has\n        // been successfully executed\n        duration: 0, // the lifetime of the message (without being clicked, 0 = forever)\n        feedbackDuration: 4000, // the lifetime of the feedback message (0 = forever)\n        class: '', // a class that will be added to the message box (warning, error, success or highlight)\n      },\n      options\n    );\n\n    var box;\n\n    function _disappear(when) {\n      return setTimeout(function() {\n        box.fadeOut(function() {\n          box.remove();\n        });\n      }, when);\n    }\n\n    var container = $('#corner-message-container');\n    var disappearHandler = options.duration ? _disappear(options.duration) : null;\n\n    if (!container.length) {\n      container = $('<div id=\"corner-message-container\">').appendTo('body');\n    }\n\n    box = $('<div class=\"corner-message\">').prependTo(container);\n    $('<div class=\"corner-message-text\">')\n      .text(options.message)\n      .appendTo(box);\n\n    if (options.class) {\n      box.addClass(options.class);\n    }\n\n    if (options.actionLabel) {\n      var text = $('<a class=\"corner-message-action\" href=\"#\">')\n        .text(options.actionLabel)\n        .appendTo(box);\n\n      text.on('click', function(evt) {\n        evt.preventDefault();\n\n        if (disappearHandler) {\n          clearTimeout(disappearHandler);\n        }\n        if (options.actionCallback) {\n          var promise = options.actionCallback() || $.Deferred();\n\n          box\n            .addClass('progress')\n            .find('.corner-message-text')\n            .text(options.progressMessage);\n          text.remove();\n\n          promise\n            .then(\n              function() {\n                box.find('.corner-message-text').text(options.feedbackMessage);\n                box\n                  .removeClass(options.class)\n                  .addClass('success')\n                  .removeClass('progress');\n              },\n              function() {\n                box.text($T.gettext('Operation failed!'));\n                box.removeClass('progress success warning highlight').addClass('error');\n              }\n            )\n            .always(function() {\n              if (options.feedbackDuration) {\n                _disappear(options.feedbackDuration);\n              }\n            });\n        } else {\n          _disappear(0);\n        }\n      });\n    }\n  };\n\n  global.uniqueId = function uniqueId() {\n    return '' + Math.round(new Date().getTime() + Math.random() * 100);\n  };\n\n  global.countWords = function countWords(value) {\n    value = value.trim();\n    return value ? value.split(/\\s+/).length : 0;\n  };\n\n  function _doUpdateHtml(target, html, replace, highlight) {\n    var $target = $(target);\n    if (replace) {\n      var $html = $($.parseHTML(html, document, true));\n      $target.replaceWith($html);\n      $target = $html;\n    } else {\n      $target.html($.parseHTML(html, document, true));\n    }\n    $target.trigger('indico:htmlUpdated');\n    if (highlight) {\n      $target.effect('highlight', {color: Palette.highlight});\n    }\n  }\n\n  global.updateHtml = function updateHtml(target, data, replace, highlight) {\n    if ($.isPlainObject(target)) {\n      for (var key in target) {\n        if (!(key in data)) {\n          console.error('Invalid key: ' + key); // eslint-disable-line no-console\n        } else {\n          _doUpdateHtml(target[key], data[key], replace, highlight);\n        }\n      }\n    } else {\n      _doUpdateHtml(target, data.html, replace, highlight);\n    }\n  };\n})(window);\n"], "filenames": ["CHANGES.rst", "indico/modules/attachments/templates/_attachments.html", "indico/modules/categories/templates/management/base.html", "indico/modules/events/abstracts/templates/reviewing/public.html", "indico/modules/events/layout/templates/_menu.html", "indico/modules/events/management/templates/_action_menu.html", "indico/modules/events/static/templates/static_sites.html", "indico/modules/events/surveys/templates/management/survey.html", "indico/modules/oauth/templates/user_apps.html", "indico/modules/oauth/templates/user_tokens.html", "indico/modules/users/templates/personal_data.html", "indico/web/client/js/jquery/utils/misc.js"], "buggy_code_start_loc": [8, 57, 5, 22, 40, 3, 14, 197, 39, 112, 17, 15], "buggy_code_end_loc": [8, 98, 20, 28, 41, 4, 15, 199, 40, 119, 29, 16], "fixing_code_start_loc": [9, 57, 5, 21, 40, 3, 14, 197, 39, 111, 17, 15], "fixing_code_end_loc": [20, 98, 22, 25, 41, 4, 15, 201, 40, 115, 29, 16], "type": "CWE-79", "message": "Indico is an open source a general-purpose, web based event management tool. There is a Cross-Site-Scripting vulnerability in confirmation prompts commonly used when deleting content from Indico. Exploitation requires someone with at least submission privileges (such as a speaker) and then someone else to attempt to delete this content. Considering that event organizers may want to delete suspicious-looking content when spotting it, there is a non-negligible risk of such an attack to succeed. The risk of this could be further increased when combined with some some social engineering pointing the victim towards this content. Users need to update to Indico 3.2.6 as soon as possible. See the docs for instructions on how to update. Users who cannot upgrade should only let trustworthy users manage categories, create events or upload materials (\"submission\" privileges on a contribution/event). This should already be the case in a properly-configured setup when it comes to category/event management. Note that a conference doing a Call for Abstracts actively invites external speakers (who the organizers may not know and thus cannot fully trust) to submit content, hence the need to update to a a fixed version ASAP in particular when using such workflows.", "other": {"cve": {"id": "CVE-2023-37901", "sourceIdentifier": "security-advisories@github.com", "published": "2023-07-21T19:15:10.360", "lastModified": "2023-07-31T18:30:05.300", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Indico is an open source a general-purpose, web based event management tool. There is a Cross-Site-Scripting vulnerability in confirmation prompts commonly used when deleting content from Indico. Exploitation requires someone with at least submission privileges (such as a speaker) and then someone else to attempt to delete this content. Considering that event organizers may want to delete suspicious-looking content when spotting it, there is a non-negligible risk of such an attack to succeed. The risk of this could be further increased when combined with some some social engineering pointing the victim towards this content. Users need to update to Indico 3.2.6 as soon as possible. See the docs for instructions on how to update. Users who cannot upgrade should only let trustworthy users manage categories, create events or upload materials (\"submission\" privileges on a contribution/event). This should already be the case in a properly-configured setup when it comes to category/event management. Note that a conference doing a Call for Abstracts actively invites external speakers (who the organizers may not know and thus cannot fully trust) to submit content, hence the need to update to a a fixed version ASAP in particular when using such workflows."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}]}, "weaknesses": [{"source": "security-advisories@github.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:cern:indico:*:*:*:*:*:*:*:*", "versionEndExcluding": "3.2.6", "matchCriteriaId": "03267261-A024-41E8-8A52-44C12E7028DF"}]}]}], "references": [{"url": "https://docs.getindico.io/en/stable/installation/upgrade/", "source": "security-advisories@github.com", "tags": ["Product"]}, {"url": "https://github.com/indico/indico/commit/2ee636d318653fb1ab193803dafbfe3e371d4130", "source": "security-advisories@github.com", "tags": ["Patch"]}, {"url": "https://github.com/indico/indico/releases/tag/v3.2.6", "source": "security-advisories@github.com", "tags": ["Release Notes"]}, {"url": "https://github.com/indico/indico/security/advisories/GHSA-fmqq-25x9-c6hm", "source": "security-advisories@github.com", "tags": ["Vendor Advisory"]}]}, "github_commit_url": "https://github.com/indico/indico/commit/2ee636d318653fb1ab193803dafbfe3e371d4130"}}