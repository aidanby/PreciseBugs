{"buggy_code": ["# The following fields are used for back-end\n\nbackend:\n  base:\n    success:\n      other: Success.\n    unknown:\n      other: Unknown error.\n    request_format_error:\n      other: Request format is not valid.\n    unauthorized_error:\n      other: Unauthorized.\n    database_error:\n      other: Data server error.\n  role:\n    name:\n      user:\n        other: User\n      admin:\n        other: Admin\n      moderator:\n        other: Moderator\n    description:\n      user:\n        other: Default with no special access.\n      admin:\n        other: Have the full power to access the site.\n      moderator:\n        other: Has access to all posts except admin settings.\n  email:\n    other: Email\n  password:\n    other: Password\n  email_or_password_wrong_error:\n    other: Email and password do not match.\n  error:\n    admin:\n      email_or_password_wrong:\n        other: Email and password do not match.\n    answer:\n      not_found:\n        other: Answer do not found.\n      cannot_deleted:\n        other: No permission to delete.\n      cannot_update:\n        other: No permission to update.\n    comment:\n      edit_without_permission:\n        other: Comment are not allowed to edit.\n      not_found:\n        other: Comment not found.\n      cannot_edit_after_deadline:\n        other: The comment time has been too long to modify.\n    email:\n      duplicate:\n        other: Email already exists.\n      need_to_be_verified:\n        other: Email should be verified.\n      verify_url_expired:\n        other: Email verified URL has expired, please resend the email.\n    lang:\n      not_found:\n        other: Language file not found.\n    object:\n      captcha_verification_failed:\n        other: Captcha wrong.\n      disallow_follow:\n        other: You are not allowed to follow.\n      disallow_vote:\n        other: You are not allowed to vote.\n      disallow_vote_your_self:\n        other: You can't vote for your own post.\n      not_found:\n        other: Object not found.\n      verification_failed:\n        other: Verification failed.\n      email_or_password_incorrect:\n        other: Email and password do not match.\n      old_password_verification_failed:\n        other: The old password verification failed\n      new_password_same_as_previous_setting:\n        other: The new password is the same as the previous one.\n    question:\n      not_found:\n        other: Question not found.\n      cannot_deleted:\n        other: No permission to delete.\n      cannot_close:\n        other: No permission to close.\n      cannot_update:\n        other: No permission to update.\n    rank:\n      fail_to_meet_the_condition:\n        other: Rank fail to meet the condition.\n    report:\n      handle_failed:\n        other: Report handle failed.\n      not_found:\n        other: Report not found.\n    tag:\n      not_found:\n        other: Tag not found.\n      recommend_tag_not_found:\n        other: Recommend Tag is not exist.\n      recommend_tag_enter:\n        other: Please enter at least one required tag.\n      not_contain_synonym_tags:\n        other: Should not contain synonym tags.\n      cannot_update:\n        other: No permission to update.\n      is_used_cannot_delete:\n        other: \"You cannot delete a tag that is in use\"\n      cannot_set_synonym_as_itself:\n        other: You cannot set the synonym of the current tag as itself.\n    smtp:\n      config_from_name_cannot_be_email:\n        other: The From Name cannot be a email address.\n    theme:\n      not_found:\n        other: Theme not found.\n    revision:\n      review_underway:\n        other: Can't edit currently, there is a version in the review queue.\n      no_permission:\n        other: No permission to Revision.\n    user:\n      email_or_password_wrong:\n        other:\n          other: Email and password do not match.\n      not_found:\n        other: User not found.\n      suspended:\n        other: User has been suspended.\n      username_invalid:\n        other: Username is invalid.\n      username_duplicate:\n        other: Username is already in use.\n      set_avatar:\n        other: Avatar set failed.\n      cannot_update_your_role:\n        other: You cannot modify your role.\n      not_allowed_registration:\n        other: Currently the site is not open for registration\n    config:\n      read_config_failed:\n        other: Read config failed\n    database:\n      connection_failed:\n        other: Database connection failed\n      create_table_failed:\n        other: Create table failed\n    install:\n      create_config_failed:\n        other: Can't create the config.yaml file.\n    upload:\n      unsupported_file_format:\n        other: Unsupported file format.\n  report:\n    spam:\n      name:\n        other: spam\n      desc:\n        other: This post is an advertisement, or vandalism. It is not useful or relevant\n          to the current topic.\n    rude:\n      name:\n        other: rude or abusive\n      desc:\n        other: A reasonable person would find this content inappropriate for respectful\n          discourse.\n    duplicate:\n      name:\n        other: a duplicate\n      desc:\n        other: This question has been asked before and already has an answer.\n    not_answer:\n      name:\n        other: not an answer\n      desc:\n        other: This was posted as an answer, but it does not attempt to answer the\n          question. It should possibly be an edit, a comment, another question,\n          or deleted altogether.\n    not_need:\n      name:\n        other: no longer needed\n      desc:\n        other: This comment is outdated, conversational or not relevant to this post.\n    other:\n      name:\n        other: something else\n      desc:\n        other: This post requires staff attention for another reason not listed above.\n  question:\n    close:\n      duplicate:\n        name:\n          other: spam\n        desc:\n          other: This question has been asked before and already has an answer.\n      guideline:\n        name:\n          other: a community-specific reason\n        desc:\n          other: This question doesn't meet a community guideline.\n      multiple:\n        name:\n          other: needs details or clarity\n        desc:\n          other: This question currently includes multiple questions in one. It should\n            focus on one problem only.\n      other:\n        name:\n          other: something else\n        desc:\n          other: This post requires another reason not listed above.\n    operation_type:\n      asked:\n        other: asked\n      answered:\n        other: answered\n      modified:\n        other: modified\n  notification:\n    action:\n      update_question:\n        other: updated question\n      answer_the_question:\n        other: answered question\n      update_answer:\n        other: updated answer\n      accept_answer:\n        other: accepted answer\n      comment_question:\n        other: commented question\n      comment_answer:\n        other: commented answer\n      reply_to_you:\n        other: replied to you\n      mention_you:\n        other: mentioned you\n      your_question_is_closed:\n        other: Your question has been closed\n      your_question_was_deleted:\n        other: Your question has been deleted\n      your_answer_was_deleted:\n        other: Your answer has been deleted\n      your_comment_was_deleted:\n        other: Your comment has been deleted\n\n# The following fields are used for interface presentation(Front-end)\nui:\n  how_to_format:\n    title: How to Format\n    desc: >-\n      <ul class=\"mb-0\"><li><p class=\"mb-2\">to make links</p><pre\n      class=\"mb-2\"><code>&lt;https://url.com&gt;<br/><br/>[Title](https://url.com)</code></pre></li><li><p\n      class=\"mb-2\">put returns between paragraphs</p></li><li><p\n      class=\"mb-2\"><em>_italic_</em> or **<strong>bold</strong>**</p></li><li><p\n      class=\"mb-2\">indent code by 4 spaces</p></li><li><p class=\"mb-2\">quote by\n      placing <code>&gt;</code> at start of line</p></li><li><p\n      class=\"mb-2\">backtick escapes <code>`like _this_`</code></p></li><li><p\n      class=\"mb-2\">create code fences with backticks <code>`</code></p><pre\n      class=\"mb-0\"><code>```<br/>code here<br/>```</code></pre></li></ul>\n  pagination:\n    prev: Prev\n    next: Next\n  page_title:\n    question: Question\n    questions: Questions\n    tag: Tag\n    tags: Tags\n    tag_wiki: tag wiki\n    edit_tag: Edit Tag\n    ask_a_question: Add Question\n    edit_question: Edit Question\n    edit_answer: Edit Answer\n    search: Search\n    posts_containing: Posts containing\n    settings: Settings\n    notifications: Notifications\n    login: Log In\n    sign_up: Sign Up\n    account_recovery: Account Recovery\n    account_activation: Account Activation\n    confirm_email: Confirm Email\n    account_suspended: Account Suspended\n    admin: Admin\n    change_email: Modify Email\n    install: Answer Installation\n    upgrade: Answer Upgrade\n    maintenance: Website Maintenance\n    users: Users\n  notifications:\n    title: Notifications\n    inbox: Inbox\n    achievement: Achievements\n    all_read: Mark all as read\n    show_more: Show more\n  suspended:\n    title: Your Account has been Suspended\n    until_time: \"Your account was suspended until {{ time }}.\"\n    forever: This user was suspended forever.\n    end: You don't meet a community guideline.\n  editor:\n    blockquote:\n      text: Blockquote\n    bold:\n      text: Strong\n    chart:\n      text: Chart\n      flow_chart: Flow chart\n      sequence_diagram: Sequence diagram\n      class_diagram: Class diagram\n      state_diagram: State diagram\n      entity_relationship_diagram: Entity relationship diagram\n      user_defined_diagram: User defined diagram\n      gantt_chart: Gantt chart\n      pie_chart: Pie chart\n    code:\n      text: Code Sample\n      add_code: Add code sample\n      form:\n        fields:\n          code:\n            label: Code\n            msg:\n              empty: Code cannot be empty.\n          language:\n            label: Language\n            placeholder: Automatic detection\n      btn_cancel: Cancel\n      btn_confirm: Add\n    formula:\n      text: Formula\n      options:\n        inline: Inline formula\n        block: Block formula\n    heading:\n      text: Heading\n      options:\n        h1: Heading 1\n        h2: Heading 2\n        h3: Heading 3\n        h4: Heading 4\n        h5: Heading 5\n        h6: Heading 6\n    help:\n      text: Help\n    hr:\n      text: Horizontal Rule\n    image:\n      text: Image\n      add_image: Add image\n      tab_image: Upload image\n      form_image:\n        fields:\n          file:\n            label: Image File\n            btn: Select image\n            msg:\n              empty: File cannot be empty.\n              only_image: Only image files are allowed.\n              max_size: File size cannot exceed 4MB.\n          desc:\n            label: Description\n      tab_url: Image URL\n      form_url:\n        fields:\n          url:\n            label: Image URL\n            msg:\n              empty: Image URL cannot be empty.\n          name:\n            label: Description\n      btn_cancel: Cancel\n      btn_confirm: Add\n      uploading: Uploading\n    indent:\n      text: Indent\n    outdent:\n      text: Outdent\n    italic:\n      text: Emphasis\n    link:\n      text: Hyperlink\n      add_link: Add hyperlink\n      form:\n        fields:\n          url:\n            label: URL\n            msg:\n              empty: URL cannot be empty.\n          name:\n            label: Description\n      btn_cancel: Cancel\n      btn_confirm: Add\n    ordered_list:\n      text: Numbered List\n    unordered_list:\n      text: Bulleted List\n    table:\n      text: Table\n      heading: Heading\n      cell: Cell\n  close_modal:\n    title: I am closing this post as...\n    btn_cancel: Cancel\n    btn_submit: Submit\n    remark:\n      empty: Cannot be empty.\n    msg:\n      empty: Please select a reason.\n  report_modal:\n    flag_title: I am flagging to report this post as...\n    close_title: I am closing this post as...\n    review_question_title: Review question\n    review_answer_title: Review answer\n    review_comment_title: Review comment\n    btn_cancel: Cancel\n    btn_submit: Submit\n    remark:\n      empty: Cannot be empty.\n    msg:\n      empty: Please select a reason.\n  tag_modal:\n    title: Create new tag\n    form:\n      fields:\n        display_name:\n          label: Display Name\n          msg:\n            empty: Display name cannot be empty.\n            range: Display name up to 35 characters.\n        slug_name:\n          label: URL Slug\n          desc: 'Must use the character set \"a-z\", \"0-9\", \"+ # - .\"'\n          msg:\n            empty: URL slug cannot be empty.\n            range: URL slug up to 35 characters.\n            character: URL slug contains unallowed character set.\n        desc:\n          label: Description\n    btn_cancel: Cancel\n    btn_submit: Submit\n  tag_info:\n    created_at: Created\n    edited_at: Edited\n    history: History\n    synonyms:\n      title: Synonyms\n      text: The following tags will be remapped to\n      empty: No synonyms found.\n      btn_add: Add a synonym\n      btn_edit: Edit\n      btn_save: Save\n    synonyms_text: The following tags will be remapped to\n    delete:\n      title: Delete this tag\n      tip_with_posts: >-\n        <p>We do not allowed <strong>deleting tag with posts</strong>.</p>\n        <p>Please remove this tag from the posts first.</p>\n      tip_with_synonyms: >-\n        <p>We do not allowed <strong>deleting tag with synonyms</strong>.</p>\n        <p>Please remove the synonyms from this tag first.</p>\n      tip: Are you sure you wish to delete?\n      close: Close\n  edit_tag:\n    title: Edit Tag\n    default_reason: Edit tag\n    form:\n      fields:\n        revision:\n          label: Revision\n        display_name:\n          label: Display Name\n        slug_name:\n          label: URL Slug\n          info: 'Must use the character set \"a-z\", \"0-9\", \"+ # - .\"'\n        desc:\n          label: Description\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n  dates:\n    long_date: MMM D\n    long_date_with_year: \"MMM D, YYYY\"\n    long_date_with_time: \"MMM D, YYYY [at] HH:mm\"\n    now: now\n    x_seconds_ago: \"{{count}}s ago\"\n    x_minutes_ago: \"{{count}}m ago\"\n    x_hours_ago: \"{{count}}h ago\"\n    hour: hour\n    day: day\n  comment:\n    btn_add_comment: Add comment\n    reply_to: Reply to\n    btn_reply: Reply\n    btn_edit: Edit\n    btn_delete: Delete\n    btn_flag: Flag\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n    show_more: Show more comments\n    tip_question: >-\n      Use comments to ask for more information or suggest improvements. Avoid\n      answering questions in comments.\n    tip_answer: >-\n      Use comments to reply to other users or notify them of changes. If you are\n      adding new information, edit your post instead of commenting.\n  edit_answer:\n    title: Edit Answer\n    default_reason: Edit answer\n    form:\n      fields:\n        revision:\n          label: Revision\n        answer:\n          label: Answer\n          feedback:\n            characters: content must be at least 6 characters in length.\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n  tags:\n    title: Tags\n    sort_buttons:\n      popular: Popular\n      name: Name\n      newest: newest\n    button_follow: Follow\n    button_following: Following\n    tag_label: questions\n    search_placeholder: Filter by tag name\n    no_desc: The tag has no description.\n    more: More\n  ask:\n    title: Add Question\n    edit_title: Edit Question\n    default_reason: Edit question\n    similar_questions: Similar questions\n    form:\n      fields:\n        revision:\n          label: Revision\n        title:\n          label: Title\n          placeholder: Be specific and imagine you're asking a question to another person\n          msg:\n            empty: Title cannot be empty.\n            range: Title up to 150 characters\n        body:\n          label: Body\n          msg:\n            empty: Body cannot be empty.\n        tags:\n          label: Tags\n          msg:\n            empty: Tags cannot be empty.\n        answer:\n          label: Answer\n          msg:\n            empty: Answer cannot be empty.\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_post_question: Post your question\n    btn_save_edits: Save edits\n    answer_question: Answer your own question\n    post_question&answer: Post your question and answer\n  tag_selector:\n    add_btn: Add tag\n    create_btn: Create new tag\n    search_tag: Search tag\n    hint: \"Describe what your question is about, at least one tag is required.\"\n    no_result: No tags matched\n    tag_required_text: Required tag (at least one)\n  header:\n    nav:\n      question: Questions\n      tag: Tags\n      user: Users\n      profile: Profile\n      setting: Settings\n      logout: Log out\n      admin: Admin\n      review: Review\n    search:\n      placeholder: Search\n  footer:\n    build_on: >-\n      Built on <1> Answer </1>- the open-source software that powers Q&A\n      communities.<br />Made with love \u00a9 {{cc}}.\n  upload_img:\n    name: Change\n    loading: loading...\n  pic_auth_code:\n    title: Captcha\n    placeholder: Type the text above\n    msg:\n      empty: Captcha cannot be empty.\n  inactive:\n    first: >-\n      You're almost done! We sent an activation mail to <bold>{{mail}}</bold>.\n      Please follow the instructions in the mail to activate your account.\n    info: \"If it doesn't arrive, check your spam folder.\"\n    another: >-\n      We sent another activation email to you at <bold>{{mail}}</bold>. It might\n      take a few minutes for it to arrive; be sure to check your spam folder.\n    btn_name: Resend activation email\n    change_btn_name: Change email\n    msg:\n      empty: Cannot be empty.\n  login:\n    page_title: Welcome to {{site_name}}\n    login_to_continue: Log in to continue\n    info_sign: Don't have an account? <1>Sign up</1>\n    info_login: Already have an account? <1>Log in</1>\n    agreements: By registering, you agree to the <1>privacy policy</1> and <3>terms of service</3>.\n    forgot_pass: Forgot password?\n    name:\n      label: Name\n      msg:\n        empty: Name cannot be empty.\n        range: Name up to 30 characters.\n    email:\n      label: Email\n      msg:\n        empty: Email cannot be empty.\n    password:\n      label: Password\n      msg:\n        empty: Password cannot be empty.\n        different: The passwords entered on both sides are inconsistent\n  account_forgot:\n    page_title: Forgot Your Password\n    btn_name: Send me recovery email\n    send_success: >-\n      If an account matches <strong>{{mail}}</strong>, you should receive an email\n      with instructions on how to reset your password shortly.\n    email:\n      label: Email\n      msg:\n        empty: Email cannot be empty.\n  change_email:\n    page_title: Welcome to {{site_name}}\n    btn_cancel: Cancel\n    btn_update: Update email address\n    send_success: >-\n      If an account matches <strong>{{mail}}</strong>, you should receive an email\n      with instructions on how to reset your password shortly.\n    email:\n      label: New Email\n      msg:\n        empty: Email cannot be empty.\n  password_reset:\n    page_title: Password Reset\n    btn_name: Reset my password\n    reset_success: >-\n      You successfully changed your password; you will be redirected to the log in\n      page.\n    link_invalid: >-\n      Sorry, this password reset link is no longer valid. Perhaps your password is\n      already reset?\n    to_login: Continue to log in page\n    password:\n      label: Password\n      msg:\n        empty: Password cannot be empty.\n        length: The length needs to be between 8 and 32\n        different: The passwords entered on both sides are inconsistent\n    password_confirm:\n      label: Confirm New Password\n  settings:\n    page_title: Settings\n    nav:\n      profile: Profile\n      notification: Notifications\n      account: Account\n      interface: Interface\n    profile:\n      heading: Profile\n      btn_name: Save\n      display_name:\n        label: Display Name\n        msg: Display name cannot be empty.\n        msg_range: Display name up to 30 characters.\n      username:\n        label: Username\n        caption: People can mention you as \"@username\".\n        msg: Username cannot be empty.\n        msg_range: Username up to 30 characters.\n        character: 'Must use the character set \"a-z\", \"0-9\", \" - . _\"'\n      avatar:\n        label: Profile Image\n        gravatar: Gravatar\n        gravatar_text: You can change image on <1>gravatar.com</1>\n        custom: Custom\n        btn_refresh: Refresh\n        custom_text: You can upload your image.\n        default: System\n        msg: Please upload an avatar\n      bio:\n        label: About Me\n      website:\n        label: Website\n        placeholder: \"https://example.com\"\n        msg: Website incorrect format\n      location:\n        label: Location\n        placeholder: \"City, Country\"\n    notification:\n      heading: Notifications\n      email:\n        label: Email Notifications\n        radio: \"Answers to your questions, comments, and more\"\n    account:\n      heading: Account\n      change_email_btn: Change email\n      change_pass_btn: Change password\n      change_email_info: >-\n        We've sent an email to that address. Please follow the confirmation\n        instructions.\n      email:\n        label: Email\n        msg: Email cannot be empty.\n      password_title: Password\n      current_pass:\n        label: Current Password\n        msg:\n          empty: Current Password cannot be empty.\n          length: The length needs to be between 8 and 32.\n          different: The two entered passwords do not match.\n      new_pass:\n        label: New Password\n      pass_confirm:\n        label: Confirm New Password\n    interface:\n      heading: Interface\n      lang:\n        label: Interface Language\n        text: User interface language. It will change when you refresh the page.\n  toast:\n    update: update success\n    update_password: Password changed successfully.\n    flag_success: Thanks for flagging.\n    forbidden_operate_self: Forbidden to operate on yourself\n    review: Your revision will show after review.\n  related_question:\n    title: Related Questions\n    btn: Add question\n    answers: answers\n  question_detail:\n    Asked: Asked\n    asked: asked\n    update: Modified\n    edit: edited\n    Views: Viewed\n    Follow: Follow\n    Following: Following\n    answered: answered\n    closed_in: Closed in\n    show_exist: Show existing question.\n    answers:\n      title: Answers\n      score: Score\n      newest: Newest\n      btn_accept: Accept\n      btn_accepted: Accepted\n    write_answer:\n      title: Your Answer\n      btn_name: Post your answer\n      add_another_answer: Add another answer\n      confirm_title: Continue to answer\n      continue: Continue\n      confirm_info: >-\n        <p>Are you sure you want to add another answer?</p><p>You could use the\n        edit link to refine and improve your existing answer, instead.</p>\n      empty: Answer cannot be empty.\n      characters: content must be at least 6 characters in length.\n    reopen:\n      title: Reopen this post\n      content: Are you sure you want to reopen?\n      success: This post has been reopened\n  delete:\n    title: Delete this post\n    question: >-\n      We do not recommend <strong>deleting questions with answers</strong> because\n      doing so deprives future readers of this knowledge.</p><p>Repeated deletion\n      of answered questions can result in your account being blocked from asking.\n      Are you sure you wish to delete?\n    answer_accepted: >-\n      <p>We do not recommend <strong>deleting accepted answer</strong> because\n      doing so deprives future readers of this knowledge. </p> Repeated deletion\n      of accepted answers can result in your account being blocked from answering.\n      Are you sure you wish to delete?\n    other: Are you sure you wish to delete?\n    tip_question_deleted: This post has been deleted\n    tip_answer_deleted: This answer has been deleted\n  btns:\n    confirm: Confirm\n    cancel: Cancel\n    save: Save\n    delete: Delete\n    login: Log in\n    signup: Sign up\n    logout: Log out\n    verify: Verify\n    add_question: Add question\n    approve: Approve\n    reject: Reject\n    skip: Skip\n  search:\n    title: Search Results\n    keywords: Keywords\n    options: Options\n    follow: Follow\n    following: Following\n    counts: \"{{count}} Results\"\n    more: More\n    sort_btns:\n      relevance: Relevance\n      newest: Newest\n      active: Active\n      score: Score\n      more: More\n    tips:\n      title: Advanced Search Tips\n      tag: \"<1>[tag]</1> search withing a tag\"\n      user: \"<1>user:username</1> search by author\"\n      answer: \"<1>answers:0</1> unanswered questions\"\n      score: \"<1>score:3</1> posts with a 3+ score\"\n      question: \"<1>is:question</1> search questions\"\n      is_answer: \"<1>is:answer</1> search answers\"\n    empty: We couldn't find anything. <br /> Try different or less specific keywords.\n  share:\n    name: Share\n    copy: Copy link\n    via: Share post via...\n    copied: Copied\n    facebook: Share to Facebook\n    twitter: Share to Twitter\n  cannot_vote_for_self: You can't vote for your own post\n  modal_confirm:\n    title: Error...\n  account_result:\n    page_title: Welcome to {{site_name}}\n    success: Your new account is confirmed; you will be redirected to the home page.\n    link: Continue to homepage\n    invalid: >-\n      Sorry, this account confirmation link is no longer valid. Perhaps your\n      account is already active?\n    confirm_new_email: Your email has been updated.\n    confirm_new_email_invalid: >-\n      Sorry, this confirmation link is no longer valid. Perhaps your email was\n      already changed?\n  unsubscribe:\n    page_title: Unsubscribe\n    success_title: Unsubscribe Successful\n    success_desc: You have been successfully removed from this subscriber list and won't receive any further emails from us.\n    link: Change settings\n  question:\n    following_tags: Following Tags\n    edit: Edit\n    save: Save\n    follow_tag_tip: Follow tags to curate your list of questions.\n    hot_questions: Hot Questions\n    all_questions: All Questions\n    x_questions: \"{{ count }} Questions\"\n    x_answers: \"{{ count }} answers\"\n    questions: Questions\n    answers: Answers\n    newest: Newest\n    active: Active\n    frequent: Frequent\n    score: Score\n    unanswered: Unanswered\n    modified: modified\n    answered: answered\n    asked: asked\n    closed: closed\n    follow_a_tag: Follow a tag\n    more: More\n  personal:\n    overview: Overview\n    answers: Answers\n    answer: answer\n    questions: Questions\n    question: question\n    bookmarks: Bookmarks\n    reputation: Reputation\n    comments: Comments\n    votes: Votes\n    newest: Newest\n    score: Score\n    edit_profile: Edit Profile\n    visited_x_days: \"Visited {{ count }} days\"\n    viewed: Viewed\n    joined: Joined\n    last_login: Seen\n    about_me: About Me\n    about_me_empty: \"// Hello, World !\"\n    top_answers: Top Answers\n    top_questions: Top Questions\n    stats: Stats\n    list_empty: No posts found.<br />Perhaps you'd like to select a different tab?\n    accepted: Accepted\n    answered: answered\n    asked: asked\n    upvote: upvote\n    downvote: downvote\n    mod_short: Mod\n    mod_long: Moderators\n    x_reputation: reputation\n    x_votes: votes received\n    x_answers: answers\n    x_questions: questions\n  install:\n    title: Answer\n    next: Next\n    done: Done\n    config_yaml_error: Can't create the config.yaml file.\n    lang:\n      label: Please Choose a Language\n    db_type:\n      label: Database Engine\n    db_username:\n      label: Username\n      placeholder: root\n      msg: Username cannot be empty.\n    db_password:\n      label: Password\n      placeholder: root\n      msg: Password cannot be empty.\n    db_host:\n      label: Database Host\n      placeholder: \"db:3306\"\n      msg: Database Host cannot be empty.\n    db_name:\n      label: Database Name\n      placeholder: answer\n      msg: Database Name cannot be empty.\n    db_file:\n      label: Database File\n      placeholder: /data/answer.db\n      msg: Database File cannot be empty.\n    config_yaml:\n      title: Create config.yaml\n      label: The config.yaml file created.\n      desc: >-\n        You can create the <1>config.yaml</1> file manually in the\n        <1>/var/wwww/xxx/</1> directory and paste the following text into it.\n      info: After you've done that, click \"Next\" button.\n    site_information: Site Information\n    admin_account: Admin Account\n    site_name:\n      label: Site Name\n      msg: Site Name cannot be empty.\n    site_url:\n      label: Site URL\n      text: The address of your site.\n      msg:\n        empty: Site URL cannot be empty.\n        incorrect: Site URL incorrect format.\n    contact_email:\n      label: Contact Email\n      text: Email address of key contact responsible for this site.\n      msg:\n        empty: Contact Email cannot be empty.\n        incorrect: Contact Email incorrect format.\n    admin_name:\n      label: Name\n      msg: Name cannot be empty.\n    admin_password:\n      label: Password\n      text: >-\n        You will need this password to log in. Please store it in a secure\n        location.\n      msg: Password cannot be empty.\n    admin_email:\n      label: Email\n      text: You will need this email to log in.\n      msg:\n        empty: Email cannot be empty.\n        incorrect: Email incorrect format.\n    ready_title: Your Answer is Ready!\n    ready_desc: >-\n      If you ever feel like changing more settings, visit <1>admin section</1>;\n      find it in the site menu.\n    good_luck: \"Have fun, and good luck!\"\n    warn_title: Warning\n    warn_desc: >-\n      The file <1>config.yaml</1> already exists. If you need to reset any of the\n      configuration items in this file, please delete it first.\n    install_now: You may try <1>installing now</1>.\n    installed: Already installed\n    installed_desc: >-\n      You appear to have already installed. To reinstall please clear your old\n      database tables first.\n    db_failed: Database connection failed\n    db_failed_desc: >-\n      This either means that the database information in your <1>config.yaml</1> file is incorrect or that contact with the database server could not be established. This could mean your host\u2019s database server is down.\n  counts:\n    views: views\n    votes: votes\n    answers: answers\n    accepted: Accepted\n  page_404:\n    desc: \"Unfortunately, this page doesn't exist.\"\n    back_home: Back to homepage\n  page_50X:\n    desc: The server encountered an error and could not complete your request.\n    back_home: Back to homepage\n  page_maintenance:\n    desc: \"We are under maintenance, we'll be back soon.\"\n  nav_menus:\n    dashboard: Dashboard\n    contents: Contents\n    questions: Questions\n    answers: Answers\n    users: Users\n    flags: Flags\n    settings: Settings\n    general: General\n    interface: Interface\n    smtp: SMTP\n    branding: Branding\n    legal: Legal\n    write: Write\n    tos: Terms of Service\n    privacy: Privacy\n    seo: SEO\n    customize: Customize\n    themes: Themes\n    css-html: CSS/HTML\n    login: Login\n  admin:\n    admin_header:\n      title: Admin\n    dashboard:\n      title: Dashboard\n      welcome: Welcome to Answer Admin!\n      site_statistics: Site Statistics\n      questions: \"Questions:\"\n      answers: \"Answers:\"\n      comments: \"Comments:\"\n      votes: \"Votes:\"\n      active_users: \"Active users:\"\n      flags: \"Flags:\"\n      site_health_status: Site Health Status\n      version: \"Version:\"\n      https: \"HTTPS:\"\n      uploading_files: \"Uploading files:\"\n      smtp: \"SMTP:\"\n      timezone: \"Timezone:\"\n      system_info: System Info\n      storage_used: \"Storage used:\"\n      uptime: \"Uptime:\"\n      answer_links: Answer Links\n      documents: Documents\n      feedback: Feedback\n      support: Support\n      review: Review\n      config: Config\n      update_to: Update to\n      latest: Latest\n      check_failed: Check failed\n      \"yes\": \"Yes\"\n      \"no\": \"No\"\n      not_allowed: Not allowed\n      allowed: Allowed\n      enabled: Enabled\n      disabled: Disabled\n    flags:\n      title: Flags\n      pending: Pending\n      completed: Completed\n      flagged: Flagged\n      created: Created\n      action: Action\n      review: Review\n    change_modal:\n      title: Change user status to...\n      btn_cancel: Cancel\n      btn_submit: Submit\n      normal_name: normal\n      normal_desc: A normal user can ask and answer questions.\n      suspended_name: suspended\n      suspended_desc: A suspended user can't log in.\n      deleted_name: deleted\n      deleted_desc: \"Delete profile, authentication associations.\"\n      inactive_name: inactive\n      inactive_desc: An inactive user must re-validate their email.\n      confirm_title: Delete this user\n      confirm_content: Are you sure you want to delete this user? This is permanent!\n      confirm_btn: Delete\n      msg:\n        empty: Please select a reason.\n    status_modal:\n      title: \"Change {{ type }} status to...\"\n      normal_name: normal\n      normal_desc: A normal post available to everyone.\n      closed_name: closed\n      closed_desc: \"A closed question can't answer, but still can edit, vote and comment.\"\n      deleted_name: deleted\n      deleted_desc: All reputation gained and lost will be restored.\n      btn_cancel: Cancel\n      btn_submit: Submit\n      btn_next: Next\n    user_role_modal:\n      title: Change user role to...\n      btn_cancel: Cancel\n      btn_submit: Submit\n    users:\n      title: Users\n      name: Name\n      email: Email\n      reputation: Reputation\n      created_at: Created Time\n      delete_at: Deleted Time\n      suspend_at: Suspended Time\n      status: Status\n      role: Role\n      action: Action\n      change: Change\n      all: All\n      staff: Staff\n      inactive: Inactive\n      suspended: Suspended\n      deleted: Deleted\n      normal: Normal\n      Moderator: Moderator\n      Admin: Admin\n      User: User\n      filter:\n        placeholder: \"Filter by name, user:id\"\n      set_new_password: Set new password\n      change_status: Change status\n      change_role: Change role\n      show_logs: Show logs\n      add_user: Add user\n      new_password_modal:\n        title: Set new password\n        form:\n          fields:\n            password:\n              label: Password\n              text: The user will be logged out and need to login again.\n              msg: Password must be at 8-32 characters in length.\n        btn_cancel: Cancel\n        btn_submit: Submit\n      user_modal:\n        title: Add new user\n        form:\n          fields:\n            display_name:\n              label: Display Name\n              msg: Display Name must be at 3-30 characters in length.\n            email:\n              label: Email\n              msg: Email is not valid.\n            password:\n              label: Password\n              msg: Password must be at 8-32 characters in length.\n\n        btn_cancel: Cancel\n        btn_submit: Submit\n\n    questions:\n      page_title: Questions\n      normal: Normal\n      closed: Closed\n      deleted: Deleted\n      post: Post\n      votes: Votes\n      answers: Answers\n      created: Created\n      status: Status\n      action: Action\n      change: Change\n      filter:\n        placeholder: \"Filter by title, question:id\"\n    answers:\n      page_title: Answers\n      normal: Normal\n      deleted: Deleted\n      post: Post\n      votes: Votes\n      created: Created\n      status: Status\n      action: Action\n      change: Change\n      filter:\n        placeholder: \"Filter by title, answer:id\"\n    general:\n      page_title: General\n      name:\n        label: Site Name\n        msg: Site name cannot be empty.\n        text: \"The name of this site, as used in the title tag.\"\n      site_url:\n        label: Site URL\n        msg: Site url cannot be empty.\n        validate: Please enter a valid URL.\n        text: The address of your site.\n      short_desc:\n        label: Short Site Description\n        msg: Short site description cannot be empty.\n        text: \"Short description, as used in the title tag on homepage.\"\n      desc:\n        label: Site Description\n        msg: Site description cannot be empty.\n        text: \"Describe this site in one sentence, as used in the meta description tag.\"\n      contact_email:\n        label: Contact Email\n        msg: Contact email cannot be empty.\n        validate: Contact email is not valid.\n        text: Email address of key contact responsible for this site.\n    interface:\n      page_title: Interface\n      language:\n        label: Interface Language\n        msg: Interface language cannot be empty.\n        text: User interface language. It will change when you refresh the page.\n      time_zone:\n        label: Timezone\n        msg: Timezone cannot be empty.\n        text: Choose a city in the same timezone as you.\n    smtp:\n      page_title: SMTP\n      from_email:\n        label: From Email\n        msg: From email cannot be empty.\n        text: The email address which emails are sent from.\n      from_name:\n        label: From Name\n        msg: From name cannot be empty.\n        text: The name which emails are sent from.\n      smtp_host:\n        label: SMTP Host\n        msg: SMTP host cannot be empty.\n        text: Your mail server.\n      encryption:\n        label: Encryption\n        msg: Encryption cannot be empty.\n        text: For most servers SSL is the recommended option.\n        ssl: SSL\n        none: None\n      smtp_port:\n        label: SMTP Port\n        msg: SMTP port must be number 1 ~ 65535.\n        text: The port to your mail server.\n      smtp_username:\n        label: SMTP Username\n        msg: SMTP username cannot be empty.\n      smtp_password:\n        label: SMTP Password\n        msg: SMTP password cannot be empty.\n      test_email_recipient:\n        label: Test Email Recipients\n        text: Provide email address that will receive test sends.\n        msg: Test email recipients is invalid\n      smtp_authentication:\n        label: Enable authentication\n        title: SMTP Authentication\n        msg: SMTP authentication cannot be empty.\n        \"yes\": \"Yes\"\n        \"no\": \"No\"\n    branding:\n      page_title: Branding\n      logo:\n        label: Logo\n        msg: Logo cannot be empty.\n        text: The logo image at the top left of your site. Use a wide rectangular image with a height of 56 and an aspect ratio greater than 3:1. If left blank, the site title text will be shown.\n      mobile_logo:\n        label: Mobile Logo\n        text: The logo used on mobile version of your site. Use a wide rectangular image with a height of 56. If left blank, the image from the \"logo\" setting will be used.\n      square_icon:\n        label: Square Icon\n        msg: Square icon cannot be empty.\n        text: Image used as the base for metadata icons. Should ideally be larger than 512x512.\n      favicon:\n        label: Favicon\n        text: A favicon for your site. To work correctly over a CDN it must be a png. Will be resized to 32x32. If left blank, \"square icon\" will be used.\n    legal:\n      page_title: Legal\n      terms_of_service:\n        label: Terms of Service\n        text: \"You can add terms of service content here. If you already have a document hosted elsewhere, provide the full URL here.\"\n      privacy_policy:\n        label: Privacy Policy\n        text: \"You can add privacy policy content here. If you already have a document hosted elsewhere, provide the full URL here.\"\n    write:\n      page_title: Write\n      recommend_tags:\n        label: Recommend Tags\n        text: \"Please input tag slug above, one tag per line.\"\n      required_tag:\n        title: Required Tag\n        label: Set recommend tag as required\n        text: \"Every new question must have at least one recommend tag.\"\n      reserved_tags:\n        label: Reserved Tags\n        text: \"Reserved tags can only be added to a post by moderator.\"\n    seo:\n      page_title: SEO\n      permalink:\n        label: Permalink\n        text: Custom URL structures can improve the usability, and forward-compatibility of your links.\n      robots:\n        label: robots.txt\n        text: This will permanently override any related site settings.\n    themes:\n      page_title: Themes\n      themes:\n        label: Themes\n        text: Select an existing theme.\n      navbar_style:\n        label: Navbar Style\n        text: Select an existing theme.\n      primary_color:\n        label: Primary Color\n        text: Modify the colors used by your themes\n    css_and_html:\n      page_title: CSS and HTML\n      custom_css:\n        label: Custom CSS\n        text: This will insert as <link>\n      head:\n        label: Head\n        text: This will insert before </head>\n      header:\n        label: Header\n        text: This will insert after <body>\n      footer:\n        label: Footer\n        text: This will insert before </html>.\n    login:\n      page_title: Login\n      membership:\n        title: Membership\n        label: Allow new registrations\n        text: Turn off to prevent anyone from creating a new account.\n      private:\n        title: Private\n        label: Login required\n        text: Only logged in users can access this community.\n\n  form:\n    optional: (optional)\n    empty: cannot be empty\n    invalid: is invalid\n    btn_submit: Save\n    not_found_props: \"Required property {{ key }} not found.\"\n  page_review:\n    review: Review\n    proposed: proposed\n    question_edit: Question edit\n    answer_edit: Answer edit\n    tag_edit: Tag edit\n    edit_summary: Edit summary\n    edit_question: Edit question\n    edit_answer: Edit answer\n    edit_tag: Edit tag\n    empty: No review tasks left.\n  timeline:\n    undeleted: undeleted\n    deleted: deleted\n    downvote: downvote\n    upvote: upvote\n    accept: accept\n    cancelled: cancelled\n    commented: commented\n    rollback: rollback\n    edited: edited\n    answered: answered\n    asked: asked\n    closed: closed\n    reopened: reopened\n    created: created\n    title: \"History for\"\n    tag_title: \"Timeline for\"\n    show_votes: \"Show votes\"\n    n_or_a: N/A\n    title_for_question: \"Timeline for\"\n    title_for_answer: \"Timeline for answer to {{ title }} by {{ author }}\"\n    title_for_tag: \"Timeline for tag\"\n    datetime: Datetime\n    type: Type\n    by: By\n    comment: Comment\n    no_data: \"We couldn't find anything.\"\n  users:\n    title: Users\n    users_with_the_most_reputation: Users with the highest reputation scores\n    users_with_the_most_vote: Users who voted the most\n    staffs: Our community staff\n    reputation: reputation\n    votes: votes\n  prompt:\n    leave_page: \"Are you sure you want to leave the page?\"\n    changes_not_save: \"Your changes may not be saved.\"\n\n", "package reason\n\nconst (\n\t// Success .\n\tSuccess = \"base.success\"\n\t// UnknownError unknown error\n\tUnknownError = \"base.unknown\"\n\t// RequestFormatError request format error\n\tRequestFormatError = \"base.request_format_error\"\n\t// UnauthorizedError unauthorized error\n\tUnauthorizedError = \"base.unauthorized_error\"\n\t// DatabaseError database error\n\tDatabaseError = \"base.database_error\"\n)\n\nconst (\n\tEmailOrPasswordWrong             = \"error.object.email_or_password_incorrect\"\n\tCommentNotFound                  = \"error.comment.not_found\"\n\tCommentCannotEditAfterDeadline   = \"error.comment.cannot_edit_after_deadline\"\n\tQuestionNotFound                 = \"error.question.not_found\"\n\tQuestionCannotDeleted            = \"error.question.cannot_deleted\"\n\tQuestionCannotClose              = \"error.question.cannot_close\"\n\tQuestionCannotUpdate             = \"error.question.cannot_update\"\n\tAnswerNotFound                   = \"error.answer.not_found\"\n\tAnswerCannotDeleted              = \"error.answer.cannot_deleted\"\n\tAnswerCannotUpdate               = \"error.answer.cannot_update\"\n\tCommentEditWithoutPermission     = \"error.comment.edit_without_permission\"\n\tDisallowVote                     = \"error.object.disallow_vote\"\n\tDisallowFollow                   = \"error.object.disallow_follow\"\n\tDisallowVoteYourSelf             = \"error.object.disallow_vote_your_self\"\n\tCaptchaVerificationFailed        = \"error.object.captcha_verification_failed\"\n\tOldPasswordVerificationFailed    = \"error.object.old_password_verification_failed\"\n\tNewPasswordSameAsPreviousSetting = \"error.object.new_password_same_as_previous_setting\"\n\tUserNotFound                     = \"error.user.not_found\"\n\tUsernameInvalid                  = \"error.user.username_invalid\"\n\tUsernameDuplicate                = \"error.user.username_duplicate\"\n\tUserSetAvatar                    = \"error.user.set_avatar\"\n\tEmailDuplicate                   = \"error.email.duplicate\"\n\tEmailVerifyURLExpired            = \"error.email.verify_url_expired\"\n\tEmailNeedToBeVerified            = \"error.email.need_to_be_verified\"\n\tUserSuspended                    = \"error.user.suspended\"\n\tObjectNotFound                   = \"error.object.not_found\"\n\tTagNotFound                      = \"error.tag.not_found\"\n\tTagNotContainSynonym             = \"error.tag.not_contain_synonym_tags\"\n\tTagCannotUpdate                  = \"error.tag.cannot_update\"\n\tTagIsUsedCannotDelete            = \"error.tag.is_used_cannot_delete\"\n\tRankFailToMeetTheCondition       = \"error.rank.fail_to_meet_the_condition\"\n\tThemeNotFound                    = \"error.theme.not_found\"\n\tLangNotFound                     = \"error.lang.not_found\"\n\tReportHandleFailed               = \"error.report.handle_failed\"\n\tReportNotFound                   = \"error.report.not_found\"\n\tReadConfigFailed                 = \"error.config.read_config_failed\"\n\tDatabaseConnectionFailed         = \"error.database.connection_failed\"\n\tInstallCreateTableFailed         = \"error.database.create_table_failed\"\n\tInstallConfigFailed              = \"error.install.create_config_failed\"\n\tSiteInfoNotFound                 = \"error.site_info.not_found\"\n\tUploadFileSourceUnsupported      = \"error.upload.source_unsupported\"\n\tUploadFileUnsupportedFileFormat  = \"error.upload.unsupported_file_format\"\n\tRecommendTagNotExist             = \"error.tag.recommend_tag_not_found\"\n\tRecommendTagEnter                = \"error.tag.recommend_tag_enter\"\n\tRevisionReviewUnderway           = \"error.revision.review_underway\"\n\tRevisionNoPermission             = \"error.revision.no_permission\"\n\tUserCannotUpdateYourRole         = \"error.user.cannot_update_your_role\"\n\tTagCannotSetSynonymAsItself      = \"error.tag.cannot_set_synonym_as_itself\"\n\tNotAllowedRegistration           = \"error.user.not_allowed_registration\"\n\tSMTPConfigFromNameCannotBeEmail  = \"error.smtp.config_from_name_cannot_be_email\"\n)\n", "package user_admin\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"net/mail\"\n\t\"strings\"\n\t\"time\"\n\t\"unicode\"\n\n\t\"github.com/answerdev/answer/internal/base/pager\"\n\t\"github.com/answerdev/answer/internal/base/reason\"\n\t\"github.com/answerdev/answer/internal/entity\"\n\t\"github.com/answerdev/answer/internal/schema\"\n\t\"github.com/answerdev/answer/internal/service/activity\"\n\t\"github.com/answerdev/answer/internal/service/auth\"\n\t\"github.com/answerdev/answer/internal/service/role\"\n\tusercommon \"github.com/answerdev/answer/internal/service/user_common\"\n\t\"github.com/jinzhu/copier\"\n\t\"github.com/segmentfault/pacman/errors\"\n\t\"github.com/segmentfault/pacman/log\"\n\t\"golang.org/x/crypto/bcrypt\"\n)\n\n// UserAdminRepo user repository\ntype UserAdminRepo interface {\n\tUpdateUserStatus(ctx context.Context, userID string, userStatus, mailStatus int, email string) (err error)\n\tGetUserInfo(ctx context.Context, userID string) (user *entity.User, exist bool, err error)\n\tGetUserInfoByEmail(ctx context.Context, email string) (user *entity.User, exist bool, err error)\n\tGetUserPage(ctx context.Context, page, pageSize int, user *entity.User,\n\t\tusernameOrDisplayName string, isStaff bool) (users []*entity.User, total int64, err error)\n\tAddUser(ctx context.Context, user *entity.User) (err error)\n\tUpdateUserPassword(ctx context.Context, userID string, password string) (err error)\n}\n\n// UserAdminService user service\ntype UserAdminService struct {\n\tuserRepo           UserAdminRepo\n\tuserRoleRelService *role.UserRoleRelService\n\tauthService        *auth.AuthService\n\tuserCommonService  *usercommon.UserCommon\n\tuserActivity       activity.UserActiveActivityRepo\n}\n\n// NewUserAdminService new user admin service\nfunc NewUserAdminService(\n\tuserRepo UserAdminRepo,\n\tuserRoleRelService *role.UserRoleRelService,\n\tauthService *auth.AuthService,\n\tuserCommonService *usercommon.UserCommon,\n\tuserActivity activity.UserActiveActivityRepo,\n) *UserAdminService {\n\treturn &UserAdminService{\n\t\tuserRepo:           userRepo,\n\t\tuserRoleRelService: userRoleRelService,\n\t\tauthService:        authService,\n\t\tuserCommonService:  userCommonService,\n\t\tuserActivity:       userActivity,\n\t}\n}\n\n// UpdateUserStatus update user\nfunc (us *UserAdminService) UpdateUserStatus(ctx context.Context, req *schema.UpdateUserStatusReq) (err error) {\n\tuserInfo, exist, err := us.userRepo.GetUserInfo(ctx, req.UserID)\n\tif err != nil {\n\t\treturn\n\t}\n\tif !exist {\n\t\treturn errors.BadRequest(reason.UserNotFound)\n\t}\n\t// if user status is deleted\n\tif userInfo.Status == entity.UserStatusDeleted {\n\t\treturn nil\n\t}\n\n\tif req.IsInactive() {\n\t\tuserInfo.MailStatus = entity.EmailStatusToBeVerified\n\t}\n\tif req.IsDeleted() {\n\t\tuserInfo.Status = entity.UserStatusDeleted\n\t\tuserInfo.EMail = fmt.Sprintf(\"%s.%d\", userInfo.EMail, time.Now().UnixNano())\n\t}\n\tif req.IsSuspended() {\n\t\tuserInfo.Status = entity.UserStatusSuspended\n\t}\n\tif req.IsNormal() {\n\t\tuserInfo.Status = entity.UserStatusAvailable\n\t\tuserInfo.MailStatus = entity.EmailStatusAvailable\n\t}\n\n\terr = us.userRepo.UpdateUserStatus(ctx, userInfo.ID, userInfo.Status, userInfo.MailStatus, userInfo.EMail)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// if user reputation is zero means this user is inactive, so try to activate this user.\n\tif req.IsNormal() && userInfo.Rank == 0 {\n\t\treturn us.userActivity.UserActive(ctx, userInfo.ID)\n\t}\n\treturn nil\n}\n\n// UpdateUserRole update user role\nfunc (us *UserAdminService) UpdateUserRole(ctx context.Context, req *schema.UpdateUserRoleReq) (err error) {\n\t// Users cannot modify their roles\n\tif req.UserID == req.LoginUserID {\n\t\treturn errors.BadRequest(reason.UserCannotUpdateYourRole)\n\t}\n\n\terr = us.userRoleRelService.SaveUserRole(ctx, req.UserID, req.RoleID)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tus.authService.RemoveAllUserTokens(ctx, req.UserID)\n\treturn\n}\n\n// AddUser add user\nfunc (us *UserAdminService) AddUser(ctx context.Context, req *schema.AddUserReq) (err error) {\n\t_, has, err := us.userRepo.GetUserInfoByEmail(ctx, req.Email)\n\tif err != nil {\n\t\treturn err\n\t}\n\tif has {\n\t\treturn errors.BadRequest(reason.EmailDuplicate)\n\t}\n\n\thashPwd, err := bcrypt.GenerateFromPassword([]byte(req.Password), bcrypt.DefaultCost)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tuserInfo := &entity.User{}\n\tuserInfo.EMail = req.Email\n\tuserInfo.DisplayName = req.DisplayName\n\tuserInfo.Pass = string(hashPwd)\n\n\tuserInfo.Username, err = us.userCommonService.MakeUsername(ctx, userInfo.DisplayName)\n\tif err != nil {\n\t\treturn err\n\t}\n\tuserInfo.MailStatus = entity.EmailStatusAvailable\n\tuserInfo.Status = entity.UserStatusAvailable\n\tuserInfo.Rank = 1\n\n\terr = us.userRepo.AddUser(ctx, userInfo)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn\n}\n\n// UpdateUserPassword update user password\nfunc (us *UserAdminService) UpdateUserPassword(ctx context.Context, req *schema.UpdateUserPasswordReq) (err error) {\n\tuserInfo, exist, err := us.userRepo.GetUserInfo(ctx, req.UserID)\n\tif err != nil {\n\t\treturn err\n\t}\n\tif !exist {\n\t\treturn errors.BadRequest(reason.UserNotFound)\n\t}\n\n\thashPwd, err := bcrypt.GenerateFromPassword([]byte(req.Password), bcrypt.DefaultCost)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\terr = us.userRepo.UpdateUserPassword(ctx, userInfo.ID, string(hashPwd))\n\tif err != nil {\n\t\treturn err\n\t}\n\t// logout this user\n\tus.authService.RemoveAllUserTokens(ctx, req.UserID)\n\treturn\n}\n\n// GetUserInfo get user one\nfunc (us *UserAdminService) GetUserInfo(ctx context.Context, userID string) (resp *schema.GetUserInfoResp, err error) {\n\tuser, exist, err := us.userRepo.GetUserInfo(ctx, userID)\n\tif err != nil {\n\t\treturn\n\t}\n\tif !exist {\n\t\treturn nil, errors.BadRequest(reason.UserNotFound)\n\t}\n\n\tresp = &schema.GetUserInfoResp{}\n\t_ = copier.Copy(resp, user)\n\treturn resp, nil\n}\n\n// GetUserPage get user list page\nfunc (us *UserAdminService) GetUserPage(ctx context.Context, req *schema.GetUserPageReq) (pageModel *pager.PageModel, err error) {\n\tuser := &entity.User{}\n\t_ = copier.Copy(user, req)\n\n\tif req.IsInactive() {\n\t\tuser.MailStatus = entity.EmailStatusToBeVerified\n\t\tuser.Status = entity.UserStatusAvailable\n\t} else if req.IsSuspended() {\n\t\tuser.Status = entity.UserStatusSuspended\n\t} else if req.IsDeleted() {\n\t\tuser.Status = entity.UserStatusDeleted\n\t}\n\n\tif len(req.Query) > 0 {\n\t\tif email, e := mail.ParseAddress(req.Query); e == nil {\n\t\t\tuser.EMail = email.Address\n\t\t\treq.Query = \"\"\n\t\t} else if strings.HasPrefix(req.Query, \"user:\") {\n\t\t\tid := strings.TrimSpace(strings.TrimPrefix(req.Query, \"user:\"))\n\t\t\tidSearch := true\n\t\t\tfor _, r := range id {\n\t\t\t\tif !unicode.IsDigit(r) {\n\t\t\t\t\tidSearch = false\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif idSearch {\n\t\t\t\tuser.ID = id\n\t\t\t\treq.Query = \"\"\n\t\t\t} else {\n\t\t\t\treq.Query = id\n\t\t\t}\n\t\t}\n\t}\n\n\tusers, total, err := us.userRepo.GetUserPage(ctx, req.Page, req.PageSize, user, req.Query, req.Staff)\n\tif err != nil {\n\t\treturn\n\t}\n\n\tresp := make([]*schema.GetUserPageResp, 0)\n\tfor _, u := range users {\n\t\tavatar := schema.FormatAvatarInfo(u.Avatar)\n\t\tt := &schema.GetUserPageResp{\n\t\t\tUserID:      u.ID,\n\t\t\tCreatedAt:   u.CreatedAt.Unix(),\n\t\t\tUsername:    u.Username,\n\t\t\tEMail:       u.EMail,\n\t\t\tRank:        u.Rank,\n\t\t\tDisplayName: u.DisplayName,\n\t\t\tAvatar:      avatar,\n\t\t}\n\t\tif u.Status == entity.UserStatusDeleted {\n\t\t\tt.Status = schema.UserDeleted\n\t\t\tt.DeletedAt = u.DeletedAt.Unix()\n\t\t} else if u.Status == entity.UserStatusSuspended {\n\t\t\tt.Status = schema.UserSuspended\n\t\t\tt.SuspendedAt = u.SuspendedAt.Unix()\n\t\t} else if u.MailStatus == entity.EmailStatusToBeVerified {\n\t\t\tt.Status = schema.UserInactive\n\t\t} else {\n\t\t\tt.Status = schema.UserNormal\n\t\t}\n\t\tresp = append(resp, t)\n\t}\n\tus.setUserRoleInfo(ctx, resp)\n\treturn pager.NewPageModel(total, resp), nil\n}\n\nfunc (us *UserAdminService) setUserRoleInfo(ctx context.Context, resp []*schema.GetUserPageResp) {\n\tvar userIDs []string\n\tfor _, u := range resp {\n\t\tuserIDs = append(userIDs, u.UserID)\n\t}\n\n\tuserRoleMapping, err := us.userRoleRelService.GetUserRoleMapping(ctx, userIDs)\n\tif err != nil {\n\t\tlog.Error(err)\n\t\treturn\n\t}\n\n\tfor _, u := range resp {\n\t\tr := userRoleMapping[u.UserID]\n\t\tif r == nil {\n\t\t\tcontinue\n\t\t}\n\t\tu.RoleID = r.ID\n\t\tu.RoleName = r.Name\n\t}\n}\n"], "fixing_code": ["# The following fields are used for back-end\n\nbackend:\n  base:\n    success:\n      other: Success.\n    unknown:\n      other: Unknown error.\n    request_format_error:\n      other: Request format is not valid.\n    unauthorized_error:\n      other: Unauthorized.\n    database_error:\n      other: Data server error.\n  role:\n    name:\n      user:\n        other: User\n      admin:\n        other: Admin\n      moderator:\n        other: Moderator\n    description:\n      user:\n        other: Default with no special access.\n      admin:\n        other: Have the full power to access the site.\n      moderator:\n        other: Has access to all posts except admin settings.\n  email:\n    other: Email\n  password:\n    other: Password\n  email_or_password_wrong_error:\n    other: Email and password do not match.\n  error:\n    admin:\n      cannot_update_their_password:\n        other: You cannot modify your password.\n      email_or_password_wrong:\n        other: Email and password do not match.\n    answer:\n      not_found:\n        other: Answer do not found.\n      cannot_deleted:\n        other: No permission to delete.\n      cannot_update:\n        other: No permission to update.\n    comment:\n      edit_without_permission:\n        other: Comment are not allowed to edit.\n      not_found:\n        other: Comment not found.\n      cannot_edit_after_deadline:\n        other: The comment time has been too long to modify.\n    email:\n      duplicate:\n        other: Email already exists.\n      need_to_be_verified:\n        other: Email should be verified.\n      verify_url_expired:\n        other: Email verified URL has expired, please resend the email.\n    lang:\n      not_found:\n        other: Language file not found.\n    object:\n      captcha_verification_failed:\n        other: Captcha wrong.\n      disallow_follow:\n        other: You are not allowed to follow.\n      disallow_vote:\n        other: You are not allowed to vote.\n      disallow_vote_your_self:\n        other: You can't vote for your own post.\n      not_found:\n        other: Object not found.\n      verification_failed:\n        other: Verification failed.\n      email_or_password_incorrect:\n        other: Email and password do not match.\n      old_password_verification_failed:\n        other: The old password verification failed\n      new_password_same_as_previous_setting:\n        other: The new password is the same as the previous one.\n    question:\n      not_found:\n        other: Question not found.\n      cannot_deleted:\n        other: No permission to delete.\n      cannot_close:\n        other: No permission to close.\n      cannot_update:\n        other: No permission to update.\n    rank:\n      fail_to_meet_the_condition:\n        other: Rank fail to meet the condition.\n    report:\n      handle_failed:\n        other: Report handle failed.\n      not_found:\n        other: Report not found.\n    tag:\n      not_found:\n        other: Tag not found.\n      recommend_tag_not_found:\n        other: Recommend Tag is not exist.\n      recommend_tag_enter:\n        other: Please enter at least one required tag.\n      not_contain_synonym_tags:\n        other: Should not contain synonym tags.\n      cannot_update:\n        other: No permission to update.\n      is_used_cannot_delete:\n        other: \"You cannot delete a tag that is in use\"\n      cannot_set_synonym_as_itself:\n        other: You cannot set the synonym of the current tag as itself.\n    smtp:\n      config_from_name_cannot_be_email:\n        other: The From Name cannot be a email address.\n    theme:\n      not_found:\n        other: Theme not found.\n    revision:\n      review_underway:\n        other: Can't edit currently, there is a version in the review queue.\n      no_permission:\n        other: No permission to Revision.\n    user:\n      email_or_password_wrong:\n        other:\n          other: Email and password do not match.\n      not_found:\n        other: User not found.\n      suspended:\n        other: User has been suspended.\n      username_invalid:\n        other: Username is invalid.\n      username_duplicate:\n        other: Username is already in use.\n      set_avatar:\n        other: Avatar set failed.\n      cannot_update_your_role:\n        other: You cannot modify your role.\n      not_allowed_registration:\n        other: Currently the site is not open for registration\n    config:\n      read_config_failed:\n        other: Read config failed\n    database:\n      connection_failed:\n        other: Database connection failed\n      create_table_failed:\n        other: Create table failed\n    install:\n      create_config_failed:\n        other: Can't create the config.yaml file.\n    upload:\n      unsupported_file_format:\n        other: Unsupported file format.\n  report:\n    spam:\n      name:\n        other: spam\n      desc:\n        other: This post is an advertisement, or vandalism. It is not useful or relevant\n          to the current topic.\n    rude:\n      name:\n        other: rude or abusive\n      desc:\n        other: A reasonable person would find this content inappropriate for respectful\n          discourse.\n    duplicate:\n      name:\n        other: a duplicate\n      desc:\n        other: This question has been asked before and already has an answer.\n    not_answer:\n      name:\n        other: not an answer\n      desc:\n        other: This was posted as an answer, but it does not attempt to answer the\n          question. It should possibly be an edit, a comment, another question,\n          or deleted altogether.\n    not_need:\n      name:\n        other: no longer needed\n      desc:\n        other: This comment is outdated, conversational or not relevant to this post.\n    other:\n      name:\n        other: something else\n      desc:\n        other: This post requires staff attention for another reason not listed above.\n  question:\n    close:\n      duplicate:\n        name:\n          other: spam\n        desc:\n          other: This question has been asked before and already has an answer.\n      guideline:\n        name:\n          other: a community-specific reason\n        desc:\n          other: This question doesn't meet a community guideline.\n      multiple:\n        name:\n          other: needs details or clarity\n        desc:\n          other: This question currently includes multiple questions in one. It should\n            focus on one problem only.\n      other:\n        name:\n          other: something else\n        desc:\n          other: This post requires another reason not listed above.\n    operation_type:\n      asked:\n        other: asked\n      answered:\n        other: answered\n      modified:\n        other: modified\n  notification:\n    action:\n      update_question:\n        other: updated question\n      answer_the_question:\n        other: answered question\n      update_answer:\n        other: updated answer\n      accept_answer:\n        other: accepted answer\n      comment_question:\n        other: commented question\n      comment_answer:\n        other: commented answer\n      reply_to_you:\n        other: replied to you\n      mention_you:\n        other: mentioned you\n      your_question_is_closed:\n        other: Your question has been closed\n      your_question_was_deleted:\n        other: Your question has been deleted\n      your_answer_was_deleted:\n        other: Your answer has been deleted\n      your_comment_was_deleted:\n        other: Your comment has been deleted\n\n# The following fields are used for interface presentation(Front-end)\nui:\n  how_to_format:\n    title: How to Format\n    desc: >-\n      <ul class=\"mb-0\"><li><p class=\"mb-2\">to make links</p><pre\n      class=\"mb-2\"><code>&lt;https://url.com&gt;<br/><br/>[Title](https://url.com)</code></pre></li><li><p\n      class=\"mb-2\">put returns between paragraphs</p></li><li><p\n      class=\"mb-2\"><em>_italic_</em> or **<strong>bold</strong>**</p></li><li><p\n      class=\"mb-2\">indent code by 4 spaces</p></li><li><p class=\"mb-2\">quote by\n      placing <code>&gt;</code> at start of line</p></li><li><p\n      class=\"mb-2\">backtick escapes <code>`like _this_`</code></p></li><li><p\n      class=\"mb-2\">create code fences with backticks <code>`</code></p><pre\n      class=\"mb-0\"><code>```<br/>code here<br/>```</code></pre></li></ul>\n  pagination:\n    prev: Prev\n    next: Next\n  page_title:\n    question: Question\n    questions: Questions\n    tag: Tag\n    tags: Tags\n    tag_wiki: tag wiki\n    edit_tag: Edit Tag\n    ask_a_question: Add Question\n    edit_question: Edit Question\n    edit_answer: Edit Answer\n    search: Search\n    posts_containing: Posts containing\n    settings: Settings\n    notifications: Notifications\n    login: Log In\n    sign_up: Sign Up\n    account_recovery: Account Recovery\n    account_activation: Account Activation\n    confirm_email: Confirm Email\n    account_suspended: Account Suspended\n    admin: Admin\n    change_email: Modify Email\n    install: Answer Installation\n    upgrade: Answer Upgrade\n    maintenance: Website Maintenance\n    users: Users\n  notifications:\n    title: Notifications\n    inbox: Inbox\n    achievement: Achievements\n    all_read: Mark all as read\n    show_more: Show more\n  suspended:\n    title: Your Account has been Suspended\n    until_time: \"Your account was suspended until {{ time }}.\"\n    forever: This user was suspended forever.\n    end: You don't meet a community guideline.\n  editor:\n    blockquote:\n      text: Blockquote\n    bold:\n      text: Strong\n    chart:\n      text: Chart\n      flow_chart: Flow chart\n      sequence_diagram: Sequence diagram\n      class_diagram: Class diagram\n      state_diagram: State diagram\n      entity_relationship_diagram: Entity relationship diagram\n      user_defined_diagram: User defined diagram\n      gantt_chart: Gantt chart\n      pie_chart: Pie chart\n    code:\n      text: Code Sample\n      add_code: Add code sample\n      form:\n        fields:\n          code:\n            label: Code\n            msg:\n              empty: Code cannot be empty.\n          language:\n            label: Language\n            placeholder: Automatic detection\n      btn_cancel: Cancel\n      btn_confirm: Add\n    formula:\n      text: Formula\n      options:\n        inline: Inline formula\n        block: Block formula\n    heading:\n      text: Heading\n      options:\n        h1: Heading 1\n        h2: Heading 2\n        h3: Heading 3\n        h4: Heading 4\n        h5: Heading 5\n        h6: Heading 6\n    help:\n      text: Help\n    hr:\n      text: Horizontal Rule\n    image:\n      text: Image\n      add_image: Add image\n      tab_image: Upload image\n      form_image:\n        fields:\n          file:\n            label: Image File\n            btn: Select image\n            msg:\n              empty: File cannot be empty.\n              only_image: Only image files are allowed.\n              max_size: File size cannot exceed 4MB.\n          desc:\n            label: Description\n      tab_url: Image URL\n      form_url:\n        fields:\n          url:\n            label: Image URL\n            msg:\n              empty: Image URL cannot be empty.\n          name:\n            label: Description\n      btn_cancel: Cancel\n      btn_confirm: Add\n      uploading: Uploading\n    indent:\n      text: Indent\n    outdent:\n      text: Outdent\n    italic:\n      text: Emphasis\n    link:\n      text: Hyperlink\n      add_link: Add hyperlink\n      form:\n        fields:\n          url:\n            label: URL\n            msg:\n              empty: URL cannot be empty.\n          name:\n            label: Description\n      btn_cancel: Cancel\n      btn_confirm: Add\n    ordered_list:\n      text: Numbered List\n    unordered_list:\n      text: Bulleted List\n    table:\n      text: Table\n      heading: Heading\n      cell: Cell\n  close_modal:\n    title: I am closing this post as...\n    btn_cancel: Cancel\n    btn_submit: Submit\n    remark:\n      empty: Cannot be empty.\n    msg:\n      empty: Please select a reason.\n  report_modal:\n    flag_title: I am flagging to report this post as...\n    close_title: I am closing this post as...\n    review_question_title: Review question\n    review_answer_title: Review answer\n    review_comment_title: Review comment\n    btn_cancel: Cancel\n    btn_submit: Submit\n    remark:\n      empty: Cannot be empty.\n    msg:\n      empty: Please select a reason.\n  tag_modal:\n    title: Create new tag\n    form:\n      fields:\n        display_name:\n          label: Display Name\n          msg:\n            empty: Display name cannot be empty.\n            range: Display name up to 35 characters.\n        slug_name:\n          label: URL Slug\n          desc: 'Must use the character set \"a-z\", \"0-9\", \"+ # - .\"'\n          msg:\n            empty: URL slug cannot be empty.\n            range: URL slug up to 35 characters.\n            character: URL slug contains unallowed character set.\n        desc:\n          label: Description\n    btn_cancel: Cancel\n    btn_submit: Submit\n  tag_info:\n    created_at: Created\n    edited_at: Edited\n    history: History\n    synonyms:\n      title: Synonyms\n      text: The following tags will be remapped to\n      empty: No synonyms found.\n      btn_add: Add a synonym\n      btn_edit: Edit\n      btn_save: Save\n    synonyms_text: The following tags will be remapped to\n    delete:\n      title: Delete this tag\n      tip_with_posts: >-\n        <p>We do not allowed <strong>deleting tag with posts</strong>.</p>\n        <p>Please remove this tag from the posts first.</p>\n      tip_with_synonyms: >-\n        <p>We do not allowed <strong>deleting tag with synonyms</strong>.</p>\n        <p>Please remove the synonyms from this tag first.</p>\n      tip: Are you sure you wish to delete?\n      close: Close\n  edit_tag:\n    title: Edit Tag\n    default_reason: Edit tag\n    form:\n      fields:\n        revision:\n          label: Revision\n        display_name:\n          label: Display Name\n        slug_name:\n          label: URL Slug\n          info: 'Must use the character set \"a-z\", \"0-9\", \"+ # - .\"'\n        desc:\n          label: Description\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n  dates:\n    long_date: MMM D\n    long_date_with_year: \"MMM D, YYYY\"\n    long_date_with_time: \"MMM D, YYYY [at] HH:mm\"\n    now: now\n    x_seconds_ago: \"{{count}}s ago\"\n    x_minutes_ago: \"{{count}}m ago\"\n    x_hours_ago: \"{{count}}h ago\"\n    hour: hour\n    day: day\n  comment:\n    btn_add_comment: Add comment\n    reply_to: Reply to\n    btn_reply: Reply\n    btn_edit: Edit\n    btn_delete: Delete\n    btn_flag: Flag\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n    show_more: Show more comments\n    tip_question: >-\n      Use comments to ask for more information or suggest improvements. Avoid\n      answering questions in comments.\n    tip_answer: >-\n      Use comments to reply to other users or notify them of changes. If you are\n      adding new information, edit your post instead of commenting.\n  edit_answer:\n    title: Edit Answer\n    default_reason: Edit answer\n    form:\n      fields:\n        revision:\n          label: Revision\n        answer:\n          label: Answer\n          feedback:\n            characters: content must be at least 6 characters in length.\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_save_edits: Save edits\n    btn_cancel: Cancel\n  tags:\n    title: Tags\n    sort_buttons:\n      popular: Popular\n      name: Name\n      newest: newest\n    button_follow: Follow\n    button_following: Following\n    tag_label: questions\n    search_placeholder: Filter by tag name\n    no_desc: The tag has no description.\n    more: More\n  ask:\n    title: Add Question\n    edit_title: Edit Question\n    default_reason: Edit question\n    similar_questions: Similar questions\n    form:\n      fields:\n        revision:\n          label: Revision\n        title:\n          label: Title\n          placeholder: Be specific and imagine you're asking a question to another person\n          msg:\n            empty: Title cannot be empty.\n            range: Title up to 150 characters\n        body:\n          label: Body\n          msg:\n            empty: Body cannot be empty.\n        tags:\n          label: Tags\n          msg:\n            empty: Tags cannot be empty.\n        answer:\n          label: Answer\n          msg:\n            empty: Answer cannot be empty.\n        edit_summary:\n          label: Edit Summary\n          placeholder: >-\n            Briefly explain your changes (corrected spelling, fixed grammar,\n            improved formatting)\n    btn_post_question: Post your question\n    btn_save_edits: Save edits\n    answer_question: Answer your own question\n    post_question&answer: Post your question and answer\n  tag_selector:\n    add_btn: Add tag\n    create_btn: Create new tag\n    search_tag: Search tag\n    hint: \"Describe what your question is about, at least one tag is required.\"\n    no_result: No tags matched\n    tag_required_text: Required tag (at least one)\n  header:\n    nav:\n      question: Questions\n      tag: Tags\n      user: Users\n      profile: Profile\n      setting: Settings\n      logout: Log out\n      admin: Admin\n      review: Review\n    search:\n      placeholder: Search\n  footer:\n    build_on: >-\n      Built on <1> Answer </1>- the open-source software that powers Q&A\n      communities.<br />Made with love \u00a9 {{cc}}.\n  upload_img:\n    name: Change\n    loading: loading...\n  pic_auth_code:\n    title: Captcha\n    placeholder: Type the text above\n    msg:\n      empty: Captcha cannot be empty.\n  inactive:\n    first: >-\n      You're almost done! We sent an activation mail to <bold>{{mail}}</bold>.\n      Please follow the instructions in the mail to activate your account.\n    info: \"If it doesn't arrive, check your spam folder.\"\n    another: >-\n      We sent another activation email to you at <bold>{{mail}}</bold>. It might\n      take a few minutes for it to arrive; be sure to check your spam folder.\n    btn_name: Resend activation email\n    change_btn_name: Change email\n    msg:\n      empty: Cannot be empty.\n  login:\n    page_title: Welcome to {{site_name}}\n    login_to_continue: Log in to continue\n    info_sign: Don't have an account? <1>Sign up</1>\n    info_login: Already have an account? <1>Log in</1>\n    agreements: By registering, you agree to the <1>privacy policy</1> and <3>terms of service</3>.\n    forgot_pass: Forgot password?\n    name:\n      label: Name\n      msg:\n        empty: Name cannot be empty.\n        range: Name up to 30 characters.\n    email:\n      label: Email\n      msg:\n        empty: Email cannot be empty.\n    password:\n      label: Password\n      msg:\n        empty: Password cannot be empty.\n        different: The passwords entered on both sides are inconsistent\n  account_forgot:\n    page_title: Forgot Your Password\n    btn_name: Send me recovery email\n    send_success: >-\n      If an account matches <strong>{{mail}}</strong>, you should receive an email\n      with instructions on how to reset your password shortly.\n    email:\n      label: Email\n      msg:\n        empty: Email cannot be empty.\n  change_email:\n    page_title: Welcome to {{site_name}}\n    btn_cancel: Cancel\n    btn_update: Update email address\n    send_success: >-\n      If an account matches <strong>{{mail}}</strong>, you should receive an email\n      with instructions on how to reset your password shortly.\n    email:\n      label: New Email\n      msg:\n        empty: Email cannot be empty.\n  password_reset:\n    page_title: Password Reset\n    btn_name: Reset my password\n    reset_success: >-\n      You successfully changed your password; you will be redirected to the log in\n      page.\n    link_invalid: >-\n      Sorry, this password reset link is no longer valid. Perhaps your password is\n      already reset?\n    to_login: Continue to log in page\n    password:\n      label: Password\n      msg:\n        empty: Password cannot be empty.\n        length: The length needs to be between 8 and 32\n        different: The passwords entered on both sides are inconsistent\n    password_confirm:\n      label: Confirm New Password\n  settings:\n    page_title: Settings\n    nav:\n      profile: Profile\n      notification: Notifications\n      account: Account\n      interface: Interface\n    profile:\n      heading: Profile\n      btn_name: Save\n      display_name:\n        label: Display Name\n        msg: Display name cannot be empty.\n        msg_range: Display name up to 30 characters.\n      username:\n        label: Username\n        caption: People can mention you as \"@username\".\n        msg: Username cannot be empty.\n        msg_range: Username up to 30 characters.\n        character: 'Must use the character set \"a-z\", \"0-9\", \" - . _\"'\n      avatar:\n        label: Profile Image\n        gravatar: Gravatar\n        gravatar_text: You can change image on <1>gravatar.com</1>\n        custom: Custom\n        btn_refresh: Refresh\n        custom_text: You can upload your image.\n        default: System\n        msg: Please upload an avatar\n      bio:\n        label: About Me\n      website:\n        label: Website\n        placeholder: \"https://example.com\"\n        msg: Website incorrect format\n      location:\n        label: Location\n        placeholder: \"City, Country\"\n    notification:\n      heading: Notifications\n      email:\n        label: Email Notifications\n        radio: \"Answers to your questions, comments, and more\"\n    account:\n      heading: Account\n      change_email_btn: Change email\n      change_pass_btn: Change password\n      change_email_info: >-\n        We've sent an email to that address. Please follow the confirmation\n        instructions.\n      email:\n        label: Email\n        msg: Email cannot be empty.\n      password_title: Password\n      current_pass:\n        label: Current Password\n        msg:\n          empty: Current Password cannot be empty.\n          length: The length needs to be between 8 and 32.\n          different: The two entered passwords do not match.\n      new_pass:\n        label: New Password\n      pass_confirm:\n        label: Confirm New Password\n    interface:\n      heading: Interface\n      lang:\n        label: Interface Language\n        text: User interface language. It will change when you refresh the page.\n  toast:\n    update: update success\n    update_password: Password changed successfully.\n    flag_success: Thanks for flagging.\n    forbidden_operate_self: Forbidden to operate on yourself\n    review: Your revision will show after review.\n  related_question:\n    title: Related Questions\n    btn: Add question\n    answers: answers\n  question_detail:\n    Asked: Asked\n    asked: asked\n    update: Modified\n    edit: edited\n    Views: Viewed\n    Follow: Follow\n    Following: Following\n    answered: answered\n    closed_in: Closed in\n    show_exist: Show existing question.\n    answers:\n      title: Answers\n      score: Score\n      newest: Newest\n      btn_accept: Accept\n      btn_accepted: Accepted\n    write_answer:\n      title: Your Answer\n      btn_name: Post your answer\n      add_another_answer: Add another answer\n      confirm_title: Continue to answer\n      continue: Continue\n      confirm_info: >-\n        <p>Are you sure you want to add another answer?</p><p>You could use the\n        edit link to refine and improve your existing answer, instead.</p>\n      empty: Answer cannot be empty.\n      characters: content must be at least 6 characters in length.\n    reopen:\n      title: Reopen this post\n      content: Are you sure you want to reopen?\n      success: This post has been reopened\n  delete:\n    title: Delete this post\n    question: >-\n      We do not recommend <strong>deleting questions with answers</strong> because\n      doing so deprives future readers of this knowledge.</p><p>Repeated deletion\n      of answered questions can result in your account being blocked from asking.\n      Are you sure you wish to delete?\n    answer_accepted: >-\n      <p>We do not recommend <strong>deleting accepted answer</strong> because\n      doing so deprives future readers of this knowledge. </p> Repeated deletion\n      of accepted answers can result in your account being blocked from answering.\n      Are you sure you wish to delete?\n    other: Are you sure you wish to delete?\n    tip_question_deleted: This post has been deleted\n    tip_answer_deleted: This answer has been deleted\n  btns:\n    confirm: Confirm\n    cancel: Cancel\n    save: Save\n    delete: Delete\n    login: Log in\n    signup: Sign up\n    logout: Log out\n    verify: Verify\n    add_question: Add question\n    approve: Approve\n    reject: Reject\n    skip: Skip\n  search:\n    title: Search Results\n    keywords: Keywords\n    options: Options\n    follow: Follow\n    following: Following\n    counts: \"{{count}} Results\"\n    more: More\n    sort_btns:\n      relevance: Relevance\n      newest: Newest\n      active: Active\n      score: Score\n      more: More\n    tips:\n      title: Advanced Search Tips\n      tag: \"<1>[tag]</1> search withing a tag\"\n      user: \"<1>user:username</1> search by author\"\n      answer: \"<1>answers:0</1> unanswered questions\"\n      score: \"<1>score:3</1> posts with a 3+ score\"\n      question: \"<1>is:question</1> search questions\"\n      is_answer: \"<1>is:answer</1> search answers\"\n    empty: We couldn't find anything. <br /> Try different or less specific keywords.\n  share:\n    name: Share\n    copy: Copy link\n    via: Share post via...\n    copied: Copied\n    facebook: Share to Facebook\n    twitter: Share to Twitter\n  cannot_vote_for_self: You can't vote for your own post\n  modal_confirm:\n    title: Error...\n  account_result:\n    page_title: Welcome to {{site_name}}\n    success: Your new account is confirmed; you will be redirected to the home page.\n    link: Continue to homepage\n    invalid: >-\n      Sorry, this account confirmation link is no longer valid. Perhaps your\n      account is already active?\n    confirm_new_email: Your email has been updated.\n    confirm_new_email_invalid: >-\n      Sorry, this confirmation link is no longer valid. Perhaps your email was\n      already changed?\n  unsubscribe:\n    page_title: Unsubscribe\n    success_title: Unsubscribe Successful\n    success_desc: You have been successfully removed from this subscriber list and won't receive any further emails from us.\n    link: Change settings\n  question:\n    following_tags: Following Tags\n    edit: Edit\n    save: Save\n    follow_tag_tip: Follow tags to curate your list of questions.\n    hot_questions: Hot Questions\n    all_questions: All Questions\n    x_questions: \"{{ count }} Questions\"\n    x_answers: \"{{ count }} answers\"\n    questions: Questions\n    answers: Answers\n    newest: Newest\n    active: Active\n    frequent: Frequent\n    score: Score\n    unanswered: Unanswered\n    modified: modified\n    answered: answered\n    asked: asked\n    closed: closed\n    follow_a_tag: Follow a tag\n    more: More\n  personal:\n    overview: Overview\n    answers: Answers\n    answer: answer\n    questions: Questions\n    question: question\n    bookmarks: Bookmarks\n    reputation: Reputation\n    comments: Comments\n    votes: Votes\n    newest: Newest\n    score: Score\n    edit_profile: Edit Profile\n    visited_x_days: \"Visited {{ count }} days\"\n    viewed: Viewed\n    joined: Joined\n    last_login: Seen\n    about_me: About Me\n    about_me_empty: \"// Hello, World !\"\n    top_answers: Top Answers\n    top_questions: Top Questions\n    stats: Stats\n    list_empty: No posts found.<br />Perhaps you'd like to select a different tab?\n    accepted: Accepted\n    answered: answered\n    asked: asked\n    upvote: upvote\n    downvote: downvote\n    mod_short: Mod\n    mod_long: Moderators\n    x_reputation: reputation\n    x_votes: votes received\n    x_answers: answers\n    x_questions: questions\n  install:\n    title: Answer\n    next: Next\n    done: Done\n    config_yaml_error: Can't create the config.yaml file.\n    lang:\n      label: Please Choose a Language\n    db_type:\n      label: Database Engine\n    db_username:\n      label: Username\n      placeholder: root\n      msg: Username cannot be empty.\n    db_password:\n      label: Password\n      placeholder: root\n      msg: Password cannot be empty.\n    db_host:\n      label: Database Host\n      placeholder: \"db:3306\"\n      msg: Database Host cannot be empty.\n    db_name:\n      label: Database Name\n      placeholder: answer\n      msg: Database Name cannot be empty.\n    db_file:\n      label: Database File\n      placeholder: /data/answer.db\n      msg: Database File cannot be empty.\n    config_yaml:\n      title: Create config.yaml\n      label: The config.yaml file created.\n      desc: >-\n        You can create the <1>config.yaml</1> file manually in the\n        <1>/var/wwww/xxx/</1> directory and paste the following text into it.\n      info: After you've done that, click \"Next\" button.\n    site_information: Site Information\n    admin_account: Admin Account\n    site_name:\n      label: Site Name\n      msg: Site Name cannot be empty.\n    site_url:\n      label: Site URL\n      text: The address of your site.\n      msg:\n        empty: Site URL cannot be empty.\n        incorrect: Site URL incorrect format.\n    contact_email:\n      label: Contact Email\n      text: Email address of key contact responsible for this site.\n      msg:\n        empty: Contact Email cannot be empty.\n        incorrect: Contact Email incorrect format.\n    admin_name:\n      label: Name\n      msg: Name cannot be empty.\n    admin_password:\n      label: Password\n      text: >-\n        You will need this password to log in. Please store it in a secure\n        location.\n      msg: Password cannot be empty.\n    admin_email:\n      label: Email\n      text: You will need this email to log in.\n      msg:\n        empty: Email cannot be empty.\n        incorrect: Email incorrect format.\n    ready_title: Your Answer is Ready!\n    ready_desc: >-\n      If you ever feel like changing more settings, visit <1>admin section</1>;\n      find it in the site menu.\n    good_luck: \"Have fun, and good luck!\"\n    warn_title: Warning\n    warn_desc: >-\n      The file <1>config.yaml</1> already exists. If you need to reset any of the\n      configuration items in this file, please delete it first.\n    install_now: You may try <1>installing now</1>.\n    installed: Already installed\n    installed_desc: >-\n      You appear to have already installed. To reinstall please clear your old\n      database tables first.\n    db_failed: Database connection failed\n    db_failed_desc: >-\n      This either means that the database information in your <1>config.yaml</1> file is incorrect or that contact with the database server could not be established. This could mean your host\u2019s database server is down.\n  counts:\n    views: views\n    votes: votes\n    answers: answers\n    accepted: Accepted\n  page_404:\n    desc: \"Unfortunately, this page doesn't exist.\"\n    back_home: Back to homepage\n  page_50X:\n    desc: The server encountered an error and could not complete your request.\n    back_home: Back to homepage\n  page_maintenance:\n    desc: \"We are under maintenance, we'll be back soon.\"\n  nav_menus:\n    dashboard: Dashboard\n    contents: Contents\n    questions: Questions\n    answers: Answers\n    users: Users\n    flags: Flags\n    settings: Settings\n    general: General\n    interface: Interface\n    smtp: SMTP\n    branding: Branding\n    legal: Legal\n    write: Write\n    tos: Terms of Service\n    privacy: Privacy\n    seo: SEO\n    customize: Customize\n    themes: Themes\n    css-html: CSS/HTML\n    login: Login\n  admin:\n    admin_header:\n      title: Admin\n    dashboard:\n      title: Dashboard\n      welcome: Welcome to Answer Admin!\n      site_statistics: Site Statistics\n      questions: \"Questions:\"\n      answers: \"Answers:\"\n      comments: \"Comments:\"\n      votes: \"Votes:\"\n      active_users: \"Active users:\"\n      flags: \"Flags:\"\n      site_health_status: Site Health Status\n      version: \"Version:\"\n      https: \"HTTPS:\"\n      uploading_files: \"Uploading files:\"\n      smtp: \"SMTP:\"\n      timezone: \"Timezone:\"\n      system_info: System Info\n      storage_used: \"Storage used:\"\n      uptime: \"Uptime:\"\n      answer_links: Answer Links\n      documents: Documents\n      feedback: Feedback\n      support: Support\n      review: Review\n      config: Config\n      update_to: Update to\n      latest: Latest\n      check_failed: Check failed\n      \"yes\": \"Yes\"\n      \"no\": \"No\"\n      not_allowed: Not allowed\n      allowed: Allowed\n      enabled: Enabled\n      disabled: Disabled\n    flags:\n      title: Flags\n      pending: Pending\n      completed: Completed\n      flagged: Flagged\n      created: Created\n      action: Action\n      review: Review\n    change_modal:\n      title: Change user status to...\n      btn_cancel: Cancel\n      btn_submit: Submit\n      normal_name: normal\n      normal_desc: A normal user can ask and answer questions.\n      suspended_name: suspended\n      suspended_desc: A suspended user can't log in.\n      deleted_name: deleted\n      deleted_desc: \"Delete profile, authentication associations.\"\n      inactive_name: inactive\n      inactive_desc: An inactive user must re-validate their email.\n      confirm_title: Delete this user\n      confirm_content: Are you sure you want to delete this user? This is permanent!\n      confirm_btn: Delete\n      msg:\n        empty: Please select a reason.\n    status_modal:\n      title: \"Change {{ type }} status to...\"\n      normal_name: normal\n      normal_desc: A normal post available to everyone.\n      closed_name: closed\n      closed_desc: \"A closed question can't answer, but still can edit, vote and comment.\"\n      deleted_name: deleted\n      deleted_desc: All reputation gained and lost will be restored.\n      btn_cancel: Cancel\n      btn_submit: Submit\n      btn_next: Next\n    user_role_modal:\n      title: Change user role to...\n      btn_cancel: Cancel\n      btn_submit: Submit\n    users:\n      title: Users\n      name: Name\n      email: Email\n      reputation: Reputation\n      created_at: Created Time\n      delete_at: Deleted Time\n      suspend_at: Suspended Time\n      status: Status\n      role: Role\n      action: Action\n      change: Change\n      all: All\n      staff: Staff\n      inactive: Inactive\n      suspended: Suspended\n      deleted: Deleted\n      normal: Normal\n      Moderator: Moderator\n      Admin: Admin\n      User: User\n      filter:\n        placeholder: \"Filter by name, user:id\"\n      set_new_password: Set new password\n      change_status: Change status\n      change_role: Change role\n      show_logs: Show logs\n      add_user: Add user\n      new_password_modal:\n        title: Set new password\n        form:\n          fields:\n            password:\n              label: Password\n              text: The user will be logged out and need to login again.\n              msg: Password must be at 8-32 characters in length.\n        btn_cancel: Cancel\n        btn_submit: Submit\n      user_modal:\n        title: Add new user\n        form:\n          fields:\n            display_name:\n              label: Display Name\n              msg: Display Name must be at 3-30 characters in length.\n            email:\n              label: Email\n              msg: Email is not valid.\n            password:\n              label: Password\n              msg: Password must be at 8-32 characters in length.\n\n        btn_cancel: Cancel\n        btn_submit: Submit\n\n    questions:\n      page_title: Questions\n      normal: Normal\n      closed: Closed\n      deleted: Deleted\n      post: Post\n      votes: Votes\n      answers: Answers\n      created: Created\n      status: Status\n      action: Action\n      change: Change\n      filter:\n        placeholder: \"Filter by title, question:id\"\n    answers:\n      page_title: Answers\n      normal: Normal\n      deleted: Deleted\n      post: Post\n      votes: Votes\n      created: Created\n      status: Status\n      action: Action\n      change: Change\n      filter:\n        placeholder: \"Filter by title, answer:id\"\n    general:\n      page_title: General\n      name:\n        label: Site Name\n        msg: Site name cannot be empty.\n        text: \"The name of this site, as used in the title tag.\"\n      site_url:\n        label: Site URL\n        msg: Site url cannot be empty.\n        validate: Please enter a valid URL.\n        text: The address of your site.\n      short_desc:\n        label: Short Site Description\n        msg: Short site description cannot be empty.\n        text: \"Short description, as used in the title tag on homepage.\"\n      desc:\n        label: Site Description\n        msg: Site description cannot be empty.\n        text: \"Describe this site in one sentence, as used in the meta description tag.\"\n      contact_email:\n        label: Contact Email\n        msg: Contact email cannot be empty.\n        validate: Contact email is not valid.\n        text: Email address of key contact responsible for this site.\n    interface:\n      page_title: Interface\n      language:\n        label: Interface Language\n        msg: Interface language cannot be empty.\n        text: User interface language. It will change when you refresh the page.\n      time_zone:\n        label: Timezone\n        msg: Timezone cannot be empty.\n        text: Choose a city in the same timezone as you.\n    smtp:\n      page_title: SMTP\n      from_email:\n        label: From Email\n        msg: From email cannot be empty.\n        text: The email address which emails are sent from.\n      from_name:\n        label: From Name\n        msg: From name cannot be empty.\n        text: The name which emails are sent from.\n      smtp_host:\n        label: SMTP Host\n        msg: SMTP host cannot be empty.\n        text: Your mail server.\n      encryption:\n        label: Encryption\n        msg: Encryption cannot be empty.\n        text: For most servers SSL is the recommended option.\n        ssl: SSL\n        none: None\n      smtp_port:\n        label: SMTP Port\n        msg: SMTP port must be number 1 ~ 65535.\n        text: The port to your mail server.\n      smtp_username:\n        label: SMTP Username\n        msg: SMTP username cannot be empty.\n      smtp_password:\n        label: SMTP Password\n        msg: SMTP password cannot be empty.\n      test_email_recipient:\n        label: Test Email Recipients\n        text: Provide email address that will receive test sends.\n        msg: Test email recipients is invalid\n      smtp_authentication:\n        label: Enable authentication\n        title: SMTP Authentication\n        msg: SMTP authentication cannot be empty.\n        \"yes\": \"Yes\"\n        \"no\": \"No\"\n    branding:\n      page_title: Branding\n      logo:\n        label: Logo\n        msg: Logo cannot be empty.\n        text: The logo image at the top left of your site. Use a wide rectangular image with a height of 56 and an aspect ratio greater than 3:1. If left blank, the site title text will be shown.\n      mobile_logo:\n        label: Mobile Logo\n        text: The logo used on mobile version of your site. Use a wide rectangular image with a height of 56. If left blank, the image from the \"logo\" setting will be used.\n      square_icon:\n        label: Square Icon\n        msg: Square icon cannot be empty.\n        text: Image used as the base for metadata icons. Should ideally be larger than 512x512.\n      favicon:\n        label: Favicon\n        text: A favicon for your site. To work correctly over a CDN it must be a png. Will be resized to 32x32. If left blank, \"square icon\" will be used.\n    legal:\n      page_title: Legal\n      terms_of_service:\n        label: Terms of Service\n        text: \"You can add terms of service content here. If you already have a document hosted elsewhere, provide the full URL here.\"\n      privacy_policy:\n        label: Privacy Policy\n        text: \"You can add privacy policy content here. If you already have a document hosted elsewhere, provide the full URL here.\"\n    write:\n      page_title: Write\n      recommend_tags:\n        label: Recommend Tags\n        text: \"Please input tag slug above, one tag per line.\"\n      required_tag:\n        title: Required Tag\n        label: Set recommend tag as required\n        text: \"Every new question must have at least one recommend tag.\"\n      reserved_tags:\n        label: Reserved Tags\n        text: \"Reserved tags can only be added to a post by moderator.\"\n    seo:\n      page_title: SEO\n      permalink:\n        label: Permalink\n        text: Custom URL structures can improve the usability, and forward-compatibility of your links.\n      robots:\n        label: robots.txt\n        text: This will permanently override any related site settings.\n    themes:\n      page_title: Themes\n      themes:\n        label: Themes\n        text: Select an existing theme.\n      navbar_style:\n        label: Navbar Style\n        text: Select an existing theme.\n      primary_color:\n        label: Primary Color\n        text: Modify the colors used by your themes\n    css_and_html:\n      page_title: CSS and HTML\n      custom_css:\n        label: Custom CSS\n        text: This will insert as <link>\n      head:\n        label: Head\n        text: This will insert before </head>\n      header:\n        label: Header\n        text: This will insert after <body>\n      footer:\n        label: Footer\n        text: This will insert before </html>.\n    login:\n      page_title: Login\n      membership:\n        title: Membership\n        label: Allow new registrations\n        text: Turn off to prevent anyone from creating a new account.\n      private:\n        title: Private\n        label: Login required\n        text: Only logged in users can access this community.\n\n  form:\n    optional: (optional)\n    empty: cannot be empty\n    invalid: is invalid\n    btn_submit: Save\n    not_found_props: \"Required property {{ key }} not found.\"\n  page_review:\n    review: Review\n    proposed: proposed\n    question_edit: Question edit\n    answer_edit: Answer edit\n    tag_edit: Tag edit\n    edit_summary: Edit summary\n    edit_question: Edit question\n    edit_answer: Edit answer\n    edit_tag: Edit tag\n    empty: No review tasks left.\n  timeline:\n    undeleted: undeleted\n    deleted: deleted\n    downvote: downvote\n    upvote: upvote\n    accept: accept\n    cancelled: cancelled\n    commented: commented\n    rollback: rollback\n    edited: edited\n    answered: answered\n    asked: asked\n    closed: closed\n    reopened: reopened\n    created: created\n    title: \"History for\"\n    tag_title: \"Timeline for\"\n    show_votes: \"Show votes\"\n    n_or_a: N/A\n    title_for_question: \"Timeline for\"\n    title_for_answer: \"Timeline for answer to {{ title }} by {{ author }}\"\n    title_for_tag: \"Timeline for tag\"\n    datetime: Datetime\n    type: Type\n    by: By\n    comment: Comment\n    no_data: \"We couldn't find anything.\"\n  users:\n    title: Users\n    users_with_the_most_reputation: Users with the highest reputation scores\n    users_with_the_most_vote: Users who voted the most\n    staffs: Our community staff\n    reputation: reputation\n    votes: votes\n  prompt:\n    leave_page: \"Are you sure you want to leave the page?\"\n    changes_not_save: \"Your changes may not be saved.\"\n\n", "package reason\n\nconst (\n\t// Success .\n\tSuccess = \"base.success\"\n\t// UnknownError unknown error\n\tUnknownError = \"base.unknown\"\n\t// RequestFormatError request format error\n\tRequestFormatError = \"base.request_format_error\"\n\t// UnauthorizedError unauthorized error\n\tUnauthorizedError = \"base.unauthorized_error\"\n\t// DatabaseError database error\n\tDatabaseError = \"base.database_error\"\n)\n\nconst (\n\tEmailOrPasswordWrong             = \"error.object.email_or_password_incorrect\"\n\tCommentNotFound                  = \"error.comment.not_found\"\n\tCommentCannotEditAfterDeadline   = \"error.comment.cannot_edit_after_deadline\"\n\tQuestionNotFound                 = \"error.question.not_found\"\n\tQuestionCannotDeleted            = \"error.question.cannot_deleted\"\n\tQuestionCannotClose              = \"error.question.cannot_close\"\n\tQuestionCannotUpdate             = \"error.question.cannot_update\"\n\tAnswerNotFound                   = \"error.answer.not_found\"\n\tAnswerCannotDeleted              = \"error.answer.cannot_deleted\"\n\tAnswerCannotUpdate               = \"error.answer.cannot_update\"\n\tCommentEditWithoutPermission     = \"error.comment.edit_without_permission\"\n\tDisallowVote                     = \"error.object.disallow_vote\"\n\tDisallowFollow                   = \"error.object.disallow_follow\"\n\tDisallowVoteYourSelf             = \"error.object.disallow_vote_your_self\"\n\tCaptchaVerificationFailed        = \"error.object.captcha_verification_failed\"\n\tOldPasswordVerificationFailed    = \"error.object.old_password_verification_failed\"\n\tNewPasswordSameAsPreviousSetting = \"error.object.new_password_same_as_previous_setting\"\n\tUserNotFound                     = \"error.user.not_found\"\n\tUsernameInvalid                  = \"error.user.username_invalid\"\n\tUsernameDuplicate                = \"error.user.username_duplicate\"\n\tUserSetAvatar                    = \"error.user.set_avatar\"\n\tEmailDuplicate                   = \"error.email.duplicate\"\n\tEmailVerifyURLExpired            = \"error.email.verify_url_expired\"\n\tEmailNeedToBeVerified            = \"error.email.need_to_be_verified\"\n\tUserSuspended                    = \"error.user.suspended\"\n\tObjectNotFound                   = \"error.object.not_found\"\n\tTagNotFound                      = \"error.tag.not_found\"\n\tTagNotContainSynonym             = \"error.tag.not_contain_synonym_tags\"\n\tTagCannotUpdate                  = \"error.tag.cannot_update\"\n\tTagIsUsedCannotDelete            = \"error.tag.is_used_cannot_delete\"\n\tRankFailToMeetTheCondition       = \"error.rank.fail_to_meet_the_condition\"\n\tThemeNotFound                    = \"error.theme.not_found\"\n\tLangNotFound                     = \"error.lang.not_found\"\n\tReportHandleFailed               = \"error.report.handle_failed\"\n\tReportNotFound                   = \"error.report.not_found\"\n\tReadConfigFailed                 = \"error.config.read_config_failed\"\n\tDatabaseConnectionFailed         = \"error.database.connection_failed\"\n\tInstallCreateTableFailed         = \"error.database.create_table_failed\"\n\tInstallConfigFailed              = \"error.install.create_config_failed\"\n\tSiteInfoNotFound                 = \"error.site_info.not_found\"\n\tUploadFileSourceUnsupported      = \"error.upload.source_unsupported\"\n\tUploadFileUnsupportedFileFormat  = \"error.upload.unsupported_file_format\"\n\tRecommendTagNotExist             = \"error.tag.recommend_tag_not_found\"\n\tRecommendTagEnter                = \"error.tag.recommend_tag_enter\"\n\tRevisionReviewUnderway           = \"error.revision.review_underway\"\n\tRevisionNoPermission             = \"error.revision.no_permission\"\n\tUserCannotUpdateYourRole         = \"error.user.cannot_update_your_role\"\n\tTagCannotSetSynonymAsItself      = \"error.tag.cannot_set_synonym_as_itself\"\n\tNotAllowedRegistration           = \"error.user.not_allowed_registration\"\n\tSMTPConfigFromNameCannotBeEmail  = \"error.smtp.config_from_name_cannot_be_email\"\n\tAdminCannotUpdateTheirPassword   = \"error.admin.cannot_update_their_password\"\n)\n", "package user_admin\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"net/mail\"\n\t\"strings\"\n\t\"time\"\n\t\"unicode\"\n\n\t\"github.com/answerdev/answer/internal/base/pager\"\n\t\"github.com/answerdev/answer/internal/base/reason\"\n\t\"github.com/answerdev/answer/internal/entity\"\n\t\"github.com/answerdev/answer/internal/schema\"\n\t\"github.com/answerdev/answer/internal/service/activity\"\n\t\"github.com/answerdev/answer/internal/service/auth\"\n\t\"github.com/answerdev/answer/internal/service/role\"\n\tusercommon \"github.com/answerdev/answer/internal/service/user_common\"\n\t\"github.com/jinzhu/copier\"\n\t\"github.com/segmentfault/pacman/errors\"\n\t\"github.com/segmentfault/pacman/log\"\n\t\"golang.org/x/crypto/bcrypt\"\n)\n\n// UserAdminRepo user repository\ntype UserAdminRepo interface {\n\tUpdateUserStatus(ctx context.Context, userID string, userStatus, mailStatus int, email string) (err error)\n\tGetUserInfo(ctx context.Context, userID string) (user *entity.User, exist bool, err error)\n\tGetUserInfoByEmail(ctx context.Context, email string) (user *entity.User, exist bool, err error)\n\tGetUserPage(ctx context.Context, page, pageSize int, user *entity.User,\n\t\tusernameOrDisplayName string, isStaff bool) (users []*entity.User, total int64, err error)\n\tAddUser(ctx context.Context, user *entity.User) (err error)\n\tUpdateUserPassword(ctx context.Context, userID string, password string) (err error)\n}\n\n// UserAdminService user service\ntype UserAdminService struct {\n\tuserRepo           UserAdminRepo\n\tuserRoleRelService *role.UserRoleRelService\n\tauthService        *auth.AuthService\n\tuserCommonService  *usercommon.UserCommon\n\tuserActivity       activity.UserActiveActivityRepo\n}\n\n// NewUserAdminService new user admin service\nfunc NewUserAdminService(\n\tuserRepo UserAdminRepo,\n\tuserRoleRelService *role.UserRoleRelService,\n\tauthService *auth.AuthService,\n\tuserCommonService *usercommon.UserCommon,\n\tuserActivity activity.UserActiveActivityRepo,\n) *UserAdminService {\n\treturn &UserAdminService{\n\t\tuserRepo:           userRepo,\n\t\tuserRoleRelService: userRoleRelService,\n\t\tauthService:        authService,\n\t\tuserCommonService:  userCommonService,\n\t\tuserActivity:       userActivity,\n\t}\n}\n\n// UpdateUserStatus update user\nfunc (us *UserAdminService) UpdateUserStatus(ctx context.Context, req *schema.UpdateUserStatusReq) (err error) {\n\tuserInfo, exist, err := us.userRepo.GetUserInfo(ctx, req.UserID)\n\tif err != nil {\n\t\treturn\n\t}\n\tif !exist {\n\t\treturn errors.BadRequest(reason.UserNotFound)\n\t}\n\t// if user status is deleted\n\tif userInfo.Status == entity.UserStatusDeleted {\n\t\treturn nil\n\t}\n\n\tif req.IsInactive() {\n\t\tuserInfo.MailStatus = entity.EmailStatusToBeVerified\n\t}\n\tif req.IsDeleted() {\n\t\tuserInfo.Status = entity.UserStatusDeleted\n\t\tuserInfo.EMail = fmt.Sprintf(\"%s.%d\", userInfo.EMail, time.Now().UnixNano())\n\t}\n\tif req.IsSuspended() {\n\t\tuserInfo.Status = entity.UserStatusSuspended\n\t}\n\tif req.IsNormal() {\n\t\tuserInfo.Status = entity.UserStatusAvailable\n\t\tuserInfo.MailStatus = entity.EmailStatusAvailable\n\t}\n\n\terr = us.userRepo.UpdateUserStatus(ctx, userInfo.ID, userInfo.Status, userInfo.MailStatus, userInfo.EMail)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// if user reputation is zero means this user is inactive, so try to activate this user.\n\tif req.IsNormal() && userInfo.Rank == 0 {\n\t\treturn us.userActivity.UserActive(ctx, userInfo.ID)\n\t}\n\treturn nil\n}\n\n// UpdateUserRole update user role\nfunc (us *UserAdminService) UpdateUserRole(ctx context.Context, req *schema.UpdateUserRoleReq) (err error) {\n\t// Users cannot modify their roles\n\tif req.UserID == req.LoginUserID {\n\t\treturn errors.BadRequest(reason.UserCannotUpdateYourRole)\n\t}\n\n\terr = us.userRoleRelService.SaveUserRole(ctx, req.UserID, req.RoleID)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tus.authService.RemoveAllUserTokens(ctx, req.UserID)\n\treturn\n}\n\n// AddUser add user\nfunc (us *UserAdminService) AddUser(ctx context.Context, req *schema.AddUserReq) (err error) {\n\t_, has, err := us.userRepo.GetUserInfoByEmail(ctx, req.Email)\n\tif err != nil {\n\t\treturn err\n\t}\n\tif has {\n\t\treturn errors.BadRequest(reason.EmailDuplicate)\n\t}\n\n\thashPwd, err := bcrypt.GenerateFromPassword([]byte(req.Password), bcrypt.DefaultCost)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tuserInfo := &entity.User{}\n\tuserInfo.EMail = req.Email\n\tuserInfo.DisplayName = req.DisplayName\n\tuserInfo.Pass = string(hashPwd)\n\n\tuserInfo.Username, err = us.userCommonService.MakeUsername(ctx, userInfo.DisplayName)\n\tif err != nil {\n\t\treturn err\n\t}\n\tuserInfo.MailStatus = entity.EmailStatusAvailable\n\tuserInfo.Status = entity.UserStatusAvailable\n\tuserInfo.Rank = 1\n\n\terr = us.userRepo.AddUser(ctx, userInfo)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn\n}\n\n// UpdateUserPassword update user password\nfunc (us *UserAdminService) UpdateUserPassword(ctx context.Context, req *schema.UpdateUserPasswordReq) (err error) {\n\t// Users cannot modify their password\n\tif req.UserID == req.LoginUserID {\n\t\treturn errors.BadRequest(reason.AdminCannotUpdateTheirPassword)\n\t}\n\tuserInfo, exist, err := us.userRepo.GetUserInfo(ctx, req.UserID)\n\tif err != nil {\n\t\treturn err\n\t}\n\tif !exist {\n\t\treturn errors.BadRequest(reason.UserNotFound)\n\t}\n\n\thashPwd, err := bcrypt.GenerateFromPassword([]byte(req.Password), bcrypt.DefaultCost)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\terr = us.userRepo.UpdateUserPassword(ctx, userInfo.ID, string(hashPwd))\n\tif err != nil {\n\t\treturn err\n\t}\n\t// logout this user\n\tus.authService.RemoveAllUserTokens(ctx, req.UserID)\n\treturn\n}\n\n// GetUserInfo get user one\nfunc (us *UserAdminService) GetUserInfo(ctx context.Context, userID string) (resp *schema.GetUserInfoResp, err error) {\n\tuser, exist, err := us.userRepo.GetUserInfo(ctx, userID)\n\tif err != nil {\n\t\treturn\n\t}\n\tif !exist {\n\t\treturn nil, errors.BadRequest(reason.UserNotFound)\n\t}\n\n\tresp = &schema.GetUserInfoResp{}\n\t_ = copier.Copy(resp, user)\n\treturn resp, nil\n}\n\n// GetUserPage get user list page\nfunc (us *UserAdminService) GetUserPage(ctx context.Context, req *schema.GetUserPageReq) (pageModel *pager.PageModel, err error) {\n\tuser := &entity.User{}\n\t_ = copier.Copy(user, req)\n\n\tif req.IsInactive() {\n\t\tuser.MailStatus = entity.EmailStatusToBeVerified\n\t\tuser.Status = entity.UserStatusAvailable\n\t} else if req.IsSuspended() {\n\t\tuser.Status = entity.UserStatusSuspended\n\t} else if req.IsDeleted() {\n\t\tuser.Status = entity.UserStatusDeleted\n\t}\n\n\tif len(req.Query) > 0 {\n\t\tif email, e := mail.ParseAddress(req.Query); e == nil {\n\t\t\tuser.EMail = email.Address\n\t\t\treq.Query = \"\"\n\t\t} else if strings.HasPrefix(req.Query, \"user:\") {\n\t\t\tid := strings.TrimSpace(strings.TrimPrefix(req.Query, \"user:\"))\n\t\t\tidSearch := true\n\t\t\tfor _, r := range id {\n\t\t\t\tif !unicode.IsDigit(r) {\n\t\t\t\t\tidSearch = false\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif idSearch {\n\t\t\t\tuser.ID = id\n\t\t\t\treq.Query = \"\"\n\t\t\t} else {\n\t\t\t\treq.Query = id\n\t\t\t}\n\t\t}\n\t}\n\n\tusers, total, err := us.userRepo.GetUserPage(ctx, req.Page, req.PageSize, user, req.Query, req.Staff)\n\tif err != nil {\n\t\treturn\n\t}\n\n\tresp := make([]*schema.GetUserPageResp, 0)\n\tfor _, u := range users {\n\t\tavatar := schema.FormatAvatarInfo(u.Avatar)\n\t\tt := &schema.GetUserPageResp{\n\t\t\tUserID:      u.ID,\n\t\t\tCreatedAt:   u.CreatedAt.Unix(),\n\t\t\tUsername:    u.Username,\n\t\t\tEMail:       u.EMail,\n\t\t\tRank:        u.Rank,\n\t\t\tDisplayName: u.DisplayName,\n\t\t\tAvatar:      avatar,\n\t\t}\n\t\tif u.Status == entity.UserStatusDeleted {\n\t\t\tt.Status = schema.UserDeleted\n\t\t\tt.DeletedAt = u.DeletedAt.Unix()\n\t\t} else if u.Status == entity.UserStatusSuspended {\n\t\t\tt.Status = schema.UserSuspended\n\t\t\tt.SuspendedAt = u.SuspendedAt.Unix()\n\t\t} else if u.MailStatus == entity.EmailStatusToBeVerified {\n\t\t\tt.Status = schema.UserInactive\n\t\t} else {\n\t\t\tt.Status = schema.UserNormal\n\t\t}\n\t\tresp = append(resp, t)\n\t}\n\tus.setUserRoleInfo(ctx, resp)\n\treturn pager.NewPageModel(total, resp), nil\n}\n\nfunc (us *UserAdminService) setUserRoleInfo(ctx context.Context, resp []*schema.GetUserPageResp) {\n\tvar userIDs []string\n\tfor _, u := range resp {\n\t\tuserIDs = append(userIDs, u.UserID)\n\t}\n\n\tuserRoleMapping, err := us.userRoleRelService.GetUserRoleMapping(ctx, userIDs)\n\tif err != nil {\n\t\tlog.Error(err)\n\t\treturn\n\t}\n\n\tfor _, u := range resp {\n\t\tr := userRoleMapping[u.UserID]\n\t\tif r == nil {\n\t\t\tcontinue\n\t\t}\n\t\tu.RoleID = r.ID\n\t\tu.RoleName = r.Name\n\t}\n}\n"], "filenames": ["i18n/en_US.yaml", "internal/base/reason/reason.go", "internal/service/user_admin/user_backyard.go"], "buggy_code_start_loc": [37, 66, 155], "buggy_code_end_loc": [37, 66, 155], "fixing_code_start_loc": [38, 67, 156], "fixing_code_end_loc": [40, 68, 160], "type": "NVD-CWE-noinfo", "message": "Business Logic Errors in GitHub repository answerdev/answer prior to 1.0.6.", "other": {"cve": {"id": "CVE-2023-1541", "sourceIdentifier": "security@huntr.dev", "published": "2023-03-21T05:15:10.077", "lastModified": "2023-03-27T15:21:03.887", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Business Logic Errors in GitHub repository answerdev/answer prior to 1.0.6."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:H/UI:N/S:U/C:N/I:L/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "HIGH", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "LOW", "baseScore": 3.8, "baseSeverity": "LOW"}, "exploitabilityScore": 1.2, "impactScore": 2.5}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:H/UI:N/S:U/C:L/I:L/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "HIGH", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "HIGH", "baseScore": 6.0, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 1.2, "impactScore": 4.7}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "NVD-CWE-noinfo"}]}, {"source": "security@huntr.dev", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-840"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:answer:answer:*:*:*:*:*:*:*:*", "versionEndExcluding": "1.0.6", "matchCriteriaId": "BC30C65B-0A27-4181-94A2-75BDAD7D7145"}]}]}], "references": [{"url": "https://github.com/answerdev/answer/commit/15390adbfcd5fd37af4661f992f8873ae5a6b840", "source": "security@huntr.dev", "tags": ["Patch"]}, {"url": "https://huntr.dev/bounties/8fd891c6-b04e-4dac-818f-9ea30861cd92", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/answerdev/answer/commit/15390adbfcd5fd37af4661f992f8873ae5a6b840"}}