{"buggy_code": ["<?php\n/*\n* Function for displaying BestWebSoft menu\n* Version: 1.3.6\n*/\n\nif ( ! function_exists( 'bws_add_menu_render' ) ) {\n\tfunction bws_add_menu_render() {\n\t\tglobal $wpdb, $wpmu, $wp_version, $bws_plugin_info;\n\t\t$error = $message = $bwsmn_form_email = '';\n\t\t$bws_donate_link = 'https://www.2checkout.com/checkout/purchase?sid=1430388&quantity=1&product_id=94';\n\n\t\tif ( ! function_exists( 'is_plugin_active_for_network' ) )\n\t\t\trequire_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\n\t\t$bws_plugins = array(\n\t\t\t'captcha/captcha.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Captcha',\n\t\t\t\t'description'\t=> 'Plugin intended to prove that the visitor is a human being and not a spam robot.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/captcha-plugin/?k=d678516c0990e781edfb6a6c874f0b8a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/captcha-plugin/?k=d678516c0990e781edfb6a6c874f0b8a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Captcha+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=captcha.php',\n\t\t\t\t'pro_version'\t=> 'captcha-pro/captcha_pro.php'\n\t\t\t),\n\t\t\t'contact-form-plugin/contact_form.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form',\n\t\t\t\t'description'\t=> 'Add Contact Form to your WordPress website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form/?k=012327ef413e5b527883e031d43b088b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form/?k=012327ef413e5b527883e031d43b088b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Contact+Form+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=contact_form.php',\n\t\t\t\t'pro_version'\t=> 'contact-form-pro/contact_form_pro.php'\n\t\t\t), \n\t\t\t'facebook-button-plugin/facebook-button-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Facebook Like Button',\n\t\t\t\t'description'\t=> 'Allows you to add the Follow and Like buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-plugin/?k=05ec4f12327f55848335802581467d55&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-plugin/?k=05ec4f12327f55848335802581467d55&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Facebook+Like+Button+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=facebook-button-plugin.php',\n\t\t\t\t'pro_version'\t=> 'facebook-button-pro/facebook-button-pro.php'\n\t\t\t),\n\t\t\t'twitter-plugin/twitter.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Twitter',\n\t\t\t\t'description'\t=> 'Allows you to add the Twitter \"Follow\" and \"Like\" buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/twitter-plugin/?k=f8cb514e25bd7ec4974d64435c5eb333&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/twitter-plugin/?k=f8cb514e25bd7ec4974d64435c5eb333&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Twitter+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=twitter.php',\n\t\t\t\t'pro_version'\t=> 'twitter-pro/twitter-pro.php'\n\t\t\t), \n\t\t\t'portfolio/portfolio.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Portfolio',\n\t\t\t\t'description'\t=> 'Allows you to create a page with the information about your past projects.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/portfolio-plugin/?k=1249a890c5b7bba6bda3f528a94f768b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/portfolio-plugin/?k=1249a890c5b7bba6bda3f528a94f768b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Portfolio+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=portfolio.php'\n\t\t\t),\n\t\t\t'gallery-plugin/gallery-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Gallery',\n\t\t\t\t'description'\t=> 'Allows you to implement a Gallery page into your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/gallery-plugin/?k=2da21c0a64eec7ebf16337fa134c5f78&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/gallery-plugin/?k=2da21c0a64eec7ebf16337fa134c5f78&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Gallery+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gallery-plugin.php',\n\t\t\t\t'pro_version'\t=> 'gallery-plugin-pro/gallery-plugin-pro.php'\n\t\t\t),\n\t\t\t'adsense-plugin/adsense-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google AdSense',\n\t\t\t\t'description'\t=> 'Allows Google AdSense implementation to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-adsense-plugin/?k=60e3979921e354feb0347e88e7d7b73d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-adsense-plugin/?k=60e3979921e354feb0347e88e7d7b73d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Adsense+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=adsense-plugin.php'\n\t\t\t),\n\t\t\t'custom-search-plugin/custom-search-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Custom Search',\n\t\t\t\t'description'\t=> 'Allows to extend your website search functionality by adding a custom post type.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/custom-search-plugin/?k=933be8f3a8b8719d95d1079d15443e29&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/custom-search-plugin/?k=933be8f3a8b8719d95d1079d15443e29&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Search+plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=custom_search.php'\n\t\t\t),\n\t\t\t'quotes-and-tips/quotes-and-tips.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Quotes and Tips',\n\t\t\t\t'description'\t=> 'Allows you to implement quotes & tips block into your web site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/quotes-and-tips/?k=5738a4e85a798c4a5162240c6515098d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/quotes-and-tips/?k=5738a4e85a798c4a5162240c6515098d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Quotes+and+Tips+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=quotes-and-tips.php'\n\t\t\t),\n\t\t\t'google-sitemap-plugin/google-sitemap-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google Sitemap',\n\t\t\t\t'description'\t=> 'Allows you to add sitemap file to Google Webmaster Tools.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-plugin/?k=5202b2f5ce2cf85daee5e5f79a51d806&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-plugin/?k=5202b2f5ce2cf85daee5e5f79a51d806&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Google+sitemap+plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-sitemap-plugin.php',\n\t\t\t\t'pro_version'\t=> 'google-sitemap-pro/google-sitemap-pro.php'\n\t\t\t),\n\t\t\t'updater/updater.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Updater',\n\t\t\t\t'description'\t=> 'Allows you to update plugins and WP core.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/updater-plugin/?k=66f3ecd4c1912009d395c4bb30f779d1&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/updater-plugin/?k=66f3ecd4c1912009d395c4bb30f779d1&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=updater+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=updater-options',\n\t\t\t\t'pro_version'\t=> 'updater-pro/updater_pro.php'\n\t\t\t),\n\t\t\t'custom-fields-search/custom-fields-search.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Custom Fields Search',\n\t\t\t\t'description'\t=> 'Allows you to add website search any existing custom fields.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/custom-fields-search/?k=f3f8285bb069250c42c6ffac95ed3284&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/custom-fields-search/?k=f3f8285bb069250c42c6ffac95ed3284&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Fields+Search+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=custom_fields_search.php'\n\t\t\t),\n\t\t\t'google-one/google-plus-one.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google +1',\n\t\t\t\t'description'\t=> 'Allows you to see how many times your page has been liked on Google Search Engine as well as who has liked the article.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one/?k=ce7a88837f0a857b3a2bb142f470853c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one/?k=ce7a88837f0a857b3a2bb142f470853c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Google+%2B1+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-plus-one.php',\n\t\t\t\t'pro_version'\t=> 'google-one-pro/google-plus-one-pro.php'\n\t\t\t),\n\t\t\t'relevant/related-posts-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Relevant - Related Posts',\n\t\t\t\t'description'\t=> 'Allows you to display related posts with similar words in category, tags, title or by adding special meta key for posts.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/related-posts-plugin/?k=73fb737037f7141e66415ec259f7e426&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/related-posts-plugin/?k=73fb737037f7141e66415ec259f7e426&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Related+Posts+Plugin+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=related-posts-plugin.php'\n\t\t\t),\n\t\t\t'contact-form-to-db/contact_form_to_db.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form To DB',\n\t\t\t\t'description'\t=> 'Allows you to manage the messages that have been sent from your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db/?k=ba3747d317c2692e4136ca096a8989d6&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db/?k=ba3747d317c2692e4136ca096a8989d6&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Contact+Form+to+DB+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=cntctfrmtdb_settings',\n\t\t\t\t'pro_version'\t=> 'contact-form-to-db-pro/contact_form_to_db_pro.php'\n\t\t\t),\n\t\t\t'pdf-print/pdf-print.php' => array(\n\t\t\t\t'name'\t\t\t=> 'PDF & Print',\n\t\t\t\t'description'\t=> 'Allows you to create PDF and Print page with adding appropriate buttons to the content.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/pdf-print/?k=bfefdfb522a4c0ff0141daa3f271840c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/pdf-print/?k=bfefdfb522a4c0ff0141daa3f271840c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=PDF+Print+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=pdf-print.php',\n\t\t\t\t'pro_version'\t=> 'pdf-print-pro/pdf-print-pro.php'\n\t\t\t),\n\t\t\t'donate-button/donate.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Donate',\n\t\t\t\t'description'\t=> 'Makes it possible to place donation buttons of various payment systems on your web page.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/donate/?k=a8b2e2a56914fb1765dd20297c26401b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/donate/?k=a8b2e2a56914fb1765dd20297c26401b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Donate+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=donate.php'\n\t\t\t),\n\t\t\t'post-to-csv/post-to-csv.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Post To CSV',\n\t\t\t\t'description'\t=> 'The plugin allows to export posts of any types to a csv file.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/post-to-csv/?k=653aa55518ae17409293a7a894268b8f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/post-to-csv/?k=653aa55518ae17409293a7a894268b8f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Post+To+CSV+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=post-to-csv.php'\n\t\t\t),\n\t\t\t'google-shortlink/google-shortlink.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google Shortlink',\n\t\t\t\t'description'\t=> 'Allows you to get short links from goo.gl servise without leaving your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-shortlink/?k=afcf3eaed021bbbbeea1090e16bc22db&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-shortlink/?k=afcf3eaed021bbbbeea1090e16bc22db&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Google+Shortlink+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gglshrtlnk_options'\n\t\t\t),\n\t\t\t'htaccess/htaccess.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Htaccess',\n\t\t\t\t'description'\t=> 'Allows controlling access to your website using the directives Allow and Deny.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/htaccess/?k=2b865fcd56a935d22c5c4f1bba52ed46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/htaccess/?k=2b865fcd56a935d22c5c4f1bba52ed46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Htaccess+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=htaccess.php'\n\t\t\t),\n\t\t\t'google-captcha/google-captcha.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google Captcha (reCAPTCHA)',\n\t\t\t\t'description'\t=> 'Plugin intended to prove that the visitor is a human being and not a spam robot.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-captcha/?k=7b59fbe542acf950b29f3e020d5ad735&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-captcha/?k=7b59fbe542acf950b29f3e020d5ad735&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Google+Captcha+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-captcha.php'\n\t\t\t),\n\t\t\t'sender/sender.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Sender',\n\t\t\t\t'description'\t=> 'You can send mails to all users or to certain categories of users.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/sender/?k=89c297d14ba85a8417a0f2fc05e089c7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/sender/?k=89c297d14ba85a8417a0f2fc05e089c7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Sender+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sndr_settings',\n\t\t\t\t'pro_version'\t=> 'sender-pro/sender-pro.php'\n\t\t\t),\n\t\t\t'subscriber/subscriber.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Subscriber',\n\t\t\t\t'description'\t=> 'This plugin allows you to subscribe users for newsletters from your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/subscriber/?k=a4ecc1b7800bae7329fbe8b4b04e9c88&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/subscriber/?k=a4ecc1b7800bae7329fbe8b4b04e9c88&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Subscriber+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sbscrbr_settings_page'\n\t\t\t),\n\t\t\t'contact-form-multi/contact-form-multi.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form Multi',\n\t\t\t\t'description'\t=> 'This plugin allows you to subscribe users for newsletters from your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi/?k=83cdd9e72a9f4061122ad28a67293c72&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi/?k=83cdd9e72a9f4061122ad28a67293c72&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Contact+Form+Multi+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> '',\n\t\t\t\t'pro_version'\t=> 'contact-form-multi-pro/contact-form-multi-pro.php'\n\t\t\t),\n\t\t\t'bws-google-maps/bws-google-maps.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Maps',\n\t\t\t\t'description'\t=> 'Easy to set up and insert Google Maps to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps/?k=d8fac412d7359ebaa4ff53b46572f9f7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps/?k=d8fac412d7359ebaa4ff53b46572f9f7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=BestWebSoft+Google+Maps&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=bws-google-maps.php',\n\t\t\t\t'pro_version'\t=> 'bws-google-maps-pro/bws-google-maps-pro.php'\n\t\t\t),\n\t\t\t'bws-google-analytics/bws-google-analytics.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Analytics',\n\t\t\t\t'description'\t=> 'Allows you to retrieve basic stats from Google Analytics account and add the tracking code to your blog.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-analytics/?k=261c74cad753fb279cdf5a5db63fbd43&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/bws-google-analytics/?k=261c74cad753fb279cdf5a5db63fbd43&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=BestWebSoft+Google+Analytics&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=bws-google-analytics.php'\n\t\t\t),\n\t\t\t'db-manager/db-manager.php' => array(\n\t\t\t\t'name'\t\t\t=> 'DB manager',\n\t\t\t\t'description'\t=> 'Allows you to download the latest version of PhpMyadmin and Dumper and manage your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=db-manager.php'\n\t\t\t),\n\t\t\t'user-role/user-role.php' => array(\n\t\t\t\t'name'\t\t\t=> 'User Role',\n\t\t\t\t'description'\t=> 'Allows to change wordpress user role capabilities.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/user-role/?k=dfe2244835c6fbf601523964b3f34ccc&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/user-role/?k=dfe2244835c6fbf601523964b3f34ccc&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=User+Role+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=user-role.php',\n\t\t\t\t'pro_version'\t=> 'user-role-pro/user-role-pro.php'\n\t\t\t),\n\t\t\t'email-queue/email-queue.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Email Queue',\n\t\t\t\t'description'\t=> 'Allows to manage email massages sent by BestWebSoft plugins.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/email-queue/?k=e345e1b6623f0dca119bc2d9433b130b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/email-queue/?k=e345e1b6623f0dca119bc2d9433b130b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Email+Queue+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=mlq_settings'\n\t\t\t),\n\t\t\t'limit-attempts/limit-attempts.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Limit Attempts',\n\t\t\t\t'description'\t=> 'Allows you to limit rate of login attempts by the ip, and create whitelist and blacklist.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts/?k=b14e1697ee4d008abcd4bd34d492573a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts/?k=b14e1697ee4d008abcd4bd34d492573a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Limit+Attempts+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=limit-attempts.php',\n\t\t\t\t'pro_version'\t=> 'limit-attempts-pro/limit-attempts-pro.php'\n\t\t\t),\n\t\t\t'job-board/job-board.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Job board',\n\t\t\t\t'description'\t=> 'Allows to create a job-board page on your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/job-board/?k=b0c504c9ce6edd6692e04222af3fed6f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/job-board/?k=b0c504c9ce6edd6692e04222af3fed6f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Job+board+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=job-board.php'\n\t\t\t)\n\t\t);\n\t\t$bws_plugins_pro\t= array(\n\t\t\t'gallery-plugin-pro/gallery-plugin-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Gallery Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement as many galleries as you want into your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/gallery-pro/?k=382e5ce7c96a6391f5ffa5e116b37fe0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/gallery-pro/?k=382e5ce7c96a6391f5ffa5e116b37fe0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gallery-plugin-pro.php'\n\t\t\t),\n\t\t\t'contact-form-pro/contact_form_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement a feedback form to a web-page or a post in no time.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-pro/?k=773dc97bb3551975db0e32edca1a6d71&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-pro/?k=773dc97bb3551975db0e32edca1a6d71&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=contact_form_pro.php'\n\t\t\t),\n\t\t\t'captcha-pro/captcha_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Captcha Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement a super security captcha form into web forms.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/captcha-pro/?k=ff7d65e55e5e7f98f219be9ed711094e&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/captcha-pro/?k=ff7d65e55e5e7f98f219be9ed711094e&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=captcha_pro.php'\n\t\t\t),\n\t\t\t'updater-pro/updater_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Updater Pro',\n\t\t\t\t'description'\t=> 'Allows you to update plugins and WordPress core on your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/updater-pro/?k=cf633acbefbdff78545347fe08a3aecb&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/updater-pro?k=cf633acbefbdff78545347fe08a3aecb&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=updater-pro-options'\n\t\t\t),\n\t\t\t'contact-form-to-db-pro/contact_form_to_db_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form to DB Pro',\n\t\t\t\t'description'\t=> 'The plugin provides a unique opportunity to manage messages sent from your site via the contact form.',\n\t\t\t\t'link' \t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db-pro/?k=6ce5f4a9006ec906e4db643669246c6a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db-pro/?k=6ce5f4a9006ec906e4db643669246c6a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=cntctfrmtdbpr_settings'\n\t\t\t),\n\t\t\t'google-sitemap-pro/google-sitemap-pro.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google Sitemap Pro',\n\t\t\t\t'description'\t=> 'Allows you to add sitemap file to Google Webmaster Tools.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-pro/?k=7ea384a5cc36cb4c22741caa20dcd56d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-pro/?k=7ea384a5cc36cb4c22741caa20dcd56d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-sitemap-pro.php'\n\t\t\t),\n\t\t\t'twitter-pro/twitter-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Twitter Pro',\n\t\t\t\t'description'\t=> 'Allows you to add the Twitter \"Follow\" and \"Like\" buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/twitter-pro/?k=63ecbf0cc9cebf060b5a3c9362299700&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/twitter-pro?k=63ecbf0cc9cebf060b5a3c9362299700&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=twitter-pro.php'\n\t\t\t),\n\t\t\t'google-one-pro/google-plus-one-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google +1 Pro',\n\t\t\t\t'description'\t=> 'Allows you to see how many times your page has been liked on Google Search Engine as well as who has liked the article.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one-pro/?k=f4b0a62d155c9df9601a0531ad5bd832&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/google-plus-one-pro?k=f4b0a62d155c9df9601a0531ad5bd832&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=google-plus-one-pro.php'\n\t\t\t),\n\t\t\t'facebook-button-pro/facebook-button-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Facebook Like Button Pro',\n\t\t\t\t'description'\t=> 'Allows you to add the Follow and Like buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-pro/?k=8da168e60a831cfb3525417c333ad275&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-pro?k=8da168e60a831cfb3525417c333ad275&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=facebook-button-pro.php'\n\t\t\t),\n\t\t\t'pdf-print-pro/pdf-print-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'PDF & Print Pro',\n\t\t\t\t'description'\t=> 'Allows you to create PDF and Print page with adding appropriate buttons to the content.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/pdf-print-pro/?k=fd43a0e659ddc170a9060027cbfdcc3a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/pdf-print-pro?k=fd43a0e659ddc170a9060027cbfdcc3a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=pdf-print-pro.php'\n\t\t\t),\n\t\t\t'bws-google-maps-pro/bws-google-maps-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Maps Pro',\n\t\t\t\t'description'\t=> 'Easy to set up and insert Google Maps to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps-pro/?k=117c3f9fc17f2c83ef430a8a9dc06f56&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps-pro/?k=117c3f9fc17f2c83ef430a8a9dc06f56&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=bws-google-maps-pro.php'\n\t\t\t),\n\t\t\t'contact-form-multi-pro/contact-form-multi-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form Multi Pro',\n\t\t\t\t'description'\t=> 'This plugin is an exclusive add-on to the Contact Form Pro. Allows to create multiple contact forms.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi-pro/?k=fde3a18581c143654f060c398b07e8ac&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi-pro/?k=fde3a18581c143654f060c398b07e8ac&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> ''\n\t\t\t),\n\t\t\t'user-role-pro/user-role-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'User Role Pro',\n\t\t\t\t'description'\t=> 'Allows to change wordpress user role capabilities.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/user-role-pro/?k=cfa9cea6613fb3d7c0a3622fa2faaf46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/user-role-pro/?k=cfa9cea6613fb3d7c0a3622fa2faaf46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=user-role-pro.php'\n\t\t\t),\n\t\t\t'sender-pro/sender-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Sender Pro',\n\t\t\t\t'description'\t=> 'You can send mails to all users or to certain categories of users.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/sender-pro/?k=dc5d1a87bdc8aeab2de40ffb99b38054&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/sender-pro/?k=dc5d1a87bdc8aeab2de40ffb99b38054&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sndrpr_settings'\n\t\t\t),\n\t\t\t'limit-attempts-pro/limit-attempts-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Limit Attempts Pro',\n\t\t\t\t'description'\t=> 'Allows you to limit rate of login attempts by the ip, and create whitelist and blacklist.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts-pro/?k=9d42cdf22c7fce2c4b6b447e6a2856e0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/limit-attempts-pro/?k=9d42cdf22c7fce2c4b6b447e6a2856e0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=limit-attempts-pro.php',\n\t\t\t)\n\t\t);\n\t\t\n\t\t$all_plugins = get_plugins();\n\t\t$active_plugins = get_option( 'active_plugins' );\n\n\t\t$recommend_plugins = array_diff_key( $bws_plugins, $all_plugins );\n\n\t\tforeach ( $bws_plugins as $key_plugin => $value_plugin ) {\n\t\t\tif ( ! isset( $all_plugins[ $key_plugin ] ) && isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $all_plugins[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) {\t\t\t\t\n\t\t\t\tunset( $recommend_plugins[ $key_plugin ] );\n\t\t\t}\n\t\t}\n\n\t\tforeach ( $all_plugins as $key_plugin => $value_plugin ) {\n\t\t\tif ( ! isset( $bws_plugins[ $key_plugin ] ) && ! isset( $bws_plugins_pro[ $key_plugin ] ) )\n\t\t\t\tunset( $all_plugins[ $key_plugin ] );\n\n\t\t\tif ( isset( $bws_plugins[ $key_plugin ] ) && isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $all_plugins[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) {\t\t\t\t\n\t\t\t\tunset( $all_plugins[ $key_plugin ] );\n\t\t\t}\n\t\t}\n\n\t\tif ( isset( $_GET['action'] ) && 'system_status' == $_GET['action'] ) {\n\t\t\t$all_plugins = get_plugins();\n\t\t\t$active_plugins = get_option( 'active_plugins' );\n\t\t\t$sql_version = $wpdb->get_var( \"SELECT VERSION() AS version\" );\n\t\t    $mysql_info = $wpdb->get_results( \"SHOW VARIABLES LIKE 'sql_mode'\" );\n\t\t    if ( is_array( $mysql_info) )\n\t\t    \t$sql_mode = $mysql_info[0]->Value;\n\t\t    if ( empty( $sql_mode ) )\n\t\t    \t$sql_mode = __( 'Not set', 'bestwebsoft' );\n\t\t    if ( ini_get( 'safe_mode' ) )\n\t\t    \t$safe_mode = __( 'On', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$safe_mode = __( 'Off', 'bestwebsoft' );\n\t\t    if ( ini_get( 'allow_url_fopen' ) )\n\t\t    \t$allow_url_fopen = __( 'On', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$allow_url_fopen = __( 'Off', 'bestwebsoft' );\n\t\t    if ( ini_get( 'upload_max_filesize' ) )\n\t\t    \t$upload_max_filesize = ini_get( 'upload_max_filesize' );\n\t\t    else\n\t\t    \t$upload_max_filesize = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get('post_max_size') )\n\t\t    \t$post_max_size = ini_get('post_max_size');\n\t\t    else\n\t\t    \t$post_max_size = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get( 'max_execution_time' ) )\n\t\t    \t$max_execution_time = ini_get( 'max_execution_time' );\n\t\t    else\n\t\t    \t$max_execution_time = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get( 'memory_limit' ) )\n\t\t    \t$memory_limit = ini_get( 'memory_limit' );\n\t\t    else\n\t\t    \t$memory_limit = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( function_exists( 'memory_get_usage' ) )\n\t\t    \t$memory_usage = round( memory_get_usage() / 1024 / 1024, 2 ) . __( ' Mb', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$memory_usage = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( is_callable( 'exif_read_data' ) )\n\t\t    \t$exif_read_data = __( 'Yes', 'bestwebsoft' ) . \" ( V\" . substr( phpversion( 'exif' ), 0,4 ) . \")\" ;\n\t\t    else\n\t\t    \t$exif_read_data = __( 'No', 'bestwebsoft' );\n\t\t    if ( is_callable( 'iptcparse' ) )\n\t\t    \t$iptcparse = __( 'Yes', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$iptcparse = __( 'No', 'bestwebsoft' );\n\t\t    if ( is_callable( 'xml_parser_create' ) )\n\t\t    \t$xml_parser_create = __( 'Yes', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$xml_parser_create = __( 'No', 'bestwebsoft' );\n\n\t\t\tif ( function_exists( 'wp_get_theme' ) )\n\t\t\t\t$theme = wp_get_theme();\n\t\t\telse\n\t\t\t\t$theme = get_theme( get_current_theme() );\n\n\t\t\tif ( function_exists( 'is_multisite' ) ) {\n\t\t\t\tif ( is_multisite() ) {\n\t\t\t\t\t$multisite = __( 'Yes', 'bestwebsoft' );\n\t\t\t\t} else {\n\t\t\t\t\t$multisite = __( 'No', 'bestwebsoft' );\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\t$multisite = __( 'N/A', 'bestwebsoft' );\n\n\t\t\t$site_url = get_option( 'siteurl' );\n\t\t\t$home_url = get_option( 'home' );\n\t\t\t$db_version = get_option( 'db_version' );\n\t\t\t$system_info = array(\n\t\t\t\t'system_info'\t\t=> '',\n\t\t\t\t'active_plugins'\t=> '',\n\t\t\t\t'inactive_plugins'\t=> ''\n\t\t\t);\n\t\t\t$system_info['system_info'] = array(\n\t\t        __( 'Operating System', 'bestwebsoft' )\t\t\t\t=> PHP_OS,\n\t\t        __( 'Server', 'bestwebsoft' )\t\t\t\t\t\t=> $_SERVER[\"SERVER_SOFTWARE\"],\n\t\t        __( 'Memory usage', 'bestwebsoft' )\t\t\t\t\t=> $memory_usage,\n\t\t        __( 'MYSQL Version', 'bestwebsoft' )\t\t\t\t=> $sql_version,\n\t\t        __( 'SQL Mode', 'bestwebsoft' )\t\t\t\t\t\t=> $sql_mode,\n\t\t        __( 'PHP Version', 'bestwebsoft' )\t\t\t\t\t=> PHP_VERSION,\n\t\t        __( 'PHP Safe Mode', 'bestwebsoft' )\t\t\t\t=> $safe_mode,\n\t\t        __( 'PHP Allow URL fopen', 'bestwebsoft' )\t\t\t=> $allow_url_fopen,\n\t\t        __( 'PHP Memory Limit', 'bestwebsoft' )\t\t\t\t=> $memory_limit,\n\t\t        __( 'PHP Max Upload Size', 'bestwebsoft' )\t\t\t=> $upload_max_filesize,\n\t\t        __( 'PHP Max Post Size', 'bestwebsoft' )\t\t\t=> $post_max_size,\n\t\t        __( 'PHP Max Script Execute Time', 'bestwebsoft' )\t=> $max_execution_time,\n\t\t        __( 'PHP Exif support', 'bestwebsoft' )\t\t\t\t=> $exif_read_data,\n\t\t        __( 'PHP IPTC support', 'bestwebsoft' )\t\t\t\t=> $iptcparse,\n\t\t        __( 'PHP XML support', 'bestwebsoft' )\t\t\t\t=> $xml_parser_create,\n\t\t\t\t__( 'Site URL', 'bestwebsoft' )\t\t\t\t\t\t=> $site_url,\n\t\t\t\t__( 'Home URL', 'bestwebsoft' )\t\t\t\t\t\t=> $home_url,\n\t\t\t\t'$_SERVER[HTTP_HOST]'\t\t\t\t\t\t\t\t=> $_SERVER['HTTP_HOST'],\n\t\t\t\t'$_SERVER[SERVER_NAME]'\t\t\t\t\t\t\t\t=> $_SERVER['SERVER_NAME'],\n\t\t\t\t__( 'WordPress Version', 'bestwebsoft' )\t\t\t=> $wp_version,\n\t\t\t\t__( 'WordPress DB Version', 'bestwebsoft' )\t\t\t=> $db_version,\n\t\t\t\t__( 'Multisite', 'bestwebsoft' )\t\t\t\t\t=> $multisite,\n\t\t\t\t__( 'Active Theme', 'bestwebsoft' )\t\t\t\t\t=> $theme['Name'] . ' ' . $theme['Version']\n\t\t\t);\n\t\t\tforeach ( $all_plugins as $path => $plugin ) {\n\t\t\t\tif ( is_plugin_active( $path ) ) {\n\t\t\t\t\t$system_info['active_plugins'][ $plugin['Name'] ] = $plugin['Version'];\n\t\t\t\t} else {\n\t\t\t\t\t$system_info['inactive_plugins'][ $plugin['Name'] ] = $plugin['Version'];\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\n\t\tif ( ( isset( $_REQUEST['bwsmn_form_submit'] ) && check_admin_referer( plugin_basename(__FILE__), 'bwsmn_nonce_submit' ) ) ||\n\t\t\t ( isset( $_REQUEST['bwsmn_form_submit_custom_email'] ) && check_admin_referer( plugin_basename(__FILE__), 'bwsmn_nonce_submit_custom_email' ) ) ) {\n\t\t\tif ( isset( $_REQUEST['bwsmn_form_email'] ) ) {\n\t\t\t\t$bwsmn_form_email = trim( $_REQUEST['bwsmn_form_email'] );\n\t\t\t\tif ( $bwsmn_form_email == \"\" || !preg_match( \"/^((?:[a-z0-9']+(?:[a-z0-9\\-_\\.']+)?@[a-z0-9]+(?:[a-z0-9\\-\\.]+)?\\.[a-z]{2,5})[, ]*)+$/i\", $bwsmn_form_email ) ) {\n\t\t\t\t\t$error = __( \"Please enter a valid email address.\", 'bestwebsoft' );\n\t\t\t\t} else {\n\t\t\t\t\t$email = $bwsmn_form_email;\n\t\t\t\t\t$bwsmn_form_email = '';\n\t\t\t\t\t$message = __( 'Email with system info is sent to ', 'bestwebsoft' ) . $email;\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$email = 'plugin_system_status@bestwebsoft.com';\n\t\t\t\t$message = __( 'Thank you for contacting us.', 'bestwebsoft' );\n\t\t\t}\n\n\t\t\tif ( $error == '' ) {\n\t\t\t\t$headers  = 'MIME-Version: 1.0' . \"\\n\";\n\t\t\t\t$headers .= 'Content-type: text/html; charset=utf-8' . \"\\n\";\n\t\t\t\t$headers .= 'From: ' . get_option( 'admin_email' );\n\t\t\t\t$message_text = '<html><head><title>System Info From ' . $home_url . '</title></head><body>\n\t\t\t\t<h4>Environment</h4>\n\t\t\t\t<table>';\n\t\t\t\tforeach ( $system_info['system_info'] as $key => $value ) {\n\t\t\t\t\t$message_text .= '<tr><td>'. $key .'</td><td>'. $value .'</td></tr>';\t\n\t\t\t\t}\n\t\t\t\t$message_text .= '</table>\n\t\t\t\t<h4>Active Plugins</h4>\n\t\t\t\t<table>';\n\t\t\t\tforeach ( $system_info['active_plugins'] as $key => $value ) {\t\n\t\t\t\t\t$message_text .= '<tr><td scope=\"row\">'. $key .'</td><td scope=\"row\">'. $value .'</td></tr>';\t\n\t\t\t\t}\n\t\t\t\t$message_text .= '</table>\n\t\t\t\t<h4>Inactive Plugins</h4>\n\t\t\t\t<table>';\n\t\t\t\tforeach ( $system_info['inactive_plugins'] as $key => $value ) {\n\t\t\t\t\t$message_text .= '<tr><td scope=\"row\">'. $key .'</td><td scope=\"row\">'. $value .'</td></tr>';\n\t\t\t\t}\n\t\t\t\t$message_text .= '</table></body></html>';\n\t\t\t\t$result = wp_mail( $email, 'System Info From ' . $home_url, $message_text, $headers );\n\t\t\t\tif ( $result != true )\n\t\t\t\t\t$error = __( \"Sorry, email message could not be delivered.\", 'bestwebsoft' );\n\t\t\t}\n\t\t} ?>\n\t\t<div class=\"wrap\">\n\t\t\t<div class=\"icon32 icon32-bws\" id=\"icon-options-general\"></div>\n\t\t\t<h2>BestWebSoft</h2>\t\t\t\n\t\t\t<h2 class=\"nav-tab-wrapper\">\n\t\t\t\t<a class=\"nav-tab<?php if ( !isset( $_GET['action'] ) ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins\"><?php _e( 'Plugins', 'bestwebsoft' ); ?></a>\n\t\t\t\t<?php if ( $wp_version >= '3.4' ) { ?>\n\t\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['action'] ) && 'themes' == $_GET['action'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins&amp;action=themes\"><?php _e( 'Themes', 'bestwebsoft' ); ?></a>\n\t\t\t\t<?php } ?>\n\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['action'] ) && 'system_status' == $_GET['action'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins&amp;action=system_status\"><?php _e( 'System status', 'bestwebsoft' ); ?></a>\n\t\t\t</h2>\t\t\t\n\t\t\t<?php if ( !isset( $_GET['action'] ) ) { ?>\t\t\t\t\n\t\t\t\t<ul class=\"subsubsub\">\n\t\t\t\t\t<li><a <?php if ( !isset( $_GET['sub'] ) ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins\"><?php _e( 'All', 'bestwebsoft' ); ?></a></li> |\n\t\t\t\t\t<li><a <?php if ( isset( $_GET['sub'] ) && 'installed' == $_GET['sub'] ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins&amp;sub=installed\"><?php _e( 'Installed', 'bestwebsoft' ); ?></a></li> |\n\t\t\t\t\t<li><a <?php if ( isset( $_GET['sub'] ) && 'recommended' == $_GET['sub'] ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins&amp;sub=recommended\"><?php _e( 'Recommended', 'bestwebsoft' ); ?></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t<?php if ( ( isset( $_GET['sub'] ) && 'installed' == $_GET['sub'] ) || !isset( $_GET['sub'] ) ) { ?>\t\n\t\t\t\t\t<h4 class=\"bws_installed\"><?php _e( 'Installed plugins', 'bestwebsoft' ); ?></h4>\n\t\t\t\t\t<?php foreach ( $all_plugins as $key_plugin => $value_plugin ) {\n\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin-pro/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '-pro/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} elseif ( isset( $bws_plugins[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( in_array( $key_plugin, $active_plugins ) || is_plugin_active_for_network( $key_plugin ) ) { ?>\n\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins_pro[ $key_plugin ] ) ) { ?>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_exist_overlay\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $value_plugin[\"Description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php if ( '' != $bws_plugins_pro[ $key_plugin ][\"settings\"] ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"settings\"]; ?>\" target=\"_blank\"><?php _e( \"Settings\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php } elseif ( isset( $bws_plugins[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_free\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"purchase\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong><?php _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php if ( '' != $bws_plugins[ $key_plugin ][\"settings\"] ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"settings\"]; ?>\" target=\"_blank\"><?php _e( \"Settings\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_deactivated\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins_pro[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t<a class=\"bws_activate\" href=\"plugins.php\" title=\"<?php _e( \"Activate this plugin\", 'bestwebsoft' ); ?>\" target=\"_blank\"><?php _e( \"Activate\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php } elseif ( isset( $bws_plugins[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_deactivated bws_product_free\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"purchase\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong><?php _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t<a class=\"bws_activate\" href=\"plugins.php\" title=\"<?php _e( \"Activate this plugin\", 'bestwebsoft' ); ?>\" target=\"_blank\"><?php _e( \"Activate\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ?>\n\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t<?php if ( ( isset( $_GET['sub'] ) && 'recommended' == $_GET['sub'] ) || !isset( $_GET['sub'] ) ) { ?>\n\t\t\t\t\t<h4 class=\"bws_recommended\"><?php _e( 'Recommended plugins', 'bestwebsoft' ); ?></h4>\n\t\t\t\t\t<?php foreach ( $recommend_plugins as $key_plugin => $value_plugin ) {\n\n\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin-pro/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '-pro/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} elseif ( isset( $bws_plugins[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t<div class=\"bws_product_box\">\n\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"name\"]; ?></div>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"link\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<?php echo _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t</a> \n\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<strong><?php echo _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t<div class=\"bws_product_links\">\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php echo __( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"wp_install\"]; ?>\" target=\"_blank\"><?php echo __( \"Install now\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php }\t\t\t\t\t\t\n\t\t\t\t} ?>\t\n\t\t\t<?php } elseif ( 'themes' == $_GET['action'] ) { ?>\t\n\t\t\t\t<div id=\"availablethemes\">\n\t\t\t\t\t<?php global $tabs, $tab, $paged, $type, $theme_field_defaults;\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/theme-install.php' );\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/class-wp-themes-list-table.php' );\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/class-wp-theme-install-list-table.php' );\n\n\t\t\t\t\t$theme_class = new WP_Theme_Install_List_Table();\n\t\t\t\t\t$paged = $theme_class->get_pagenum();\n\t\t\t\t\t$per_page = 36;\n\t\t\t\t\t$args = array( 'page' => $paged, 'per_page' => $per_page, 'fields' => $theme_field_defaults );\n\t\t\t\t\t$args['author'] = 'bestwebsoft';\n\t\t\t\t\t$args = apply_filters( 'install_themes_table_api_args_search', $args );\n\t\t\t\t\t$api = themes_api( 'query_themes', $args );\n\n\t\t\t\t\tif ( is_wp_error( $api ) )\n\t\t\t\t\t\twp_die( $api->get_error_message() . '</p> <p><a href=\"#\" onclick=\"document.location.reload(); return false;\">' . __( 'Try again' ) . '</a>' );\n\n\t\t\t\t\t$theme_class->items = $api->themes;\n\t\t\t\t\t$theme_class->set_pagination_args( array(\n\t\t\t\t\t\t'total_items' => $api->info['results'],\n\t\t\t\t\t\t'per_page' => $per_page,\n\t\t\t\t\t\t'infinite_scroll' => true,\n\t\t\t\t\t) );\n\t\t\t\t\t$themes = $theme_class->items;\n\t\t\t\t\tif ( $wp_version < '3.9' ) {\n\t\t\t\t\t\tforeach ( $themes as $theme ) { ?>\n\t\t\t\t\t\t\t<div class=\"available-theme installable-theme\"><?php\n\t\t\t\t\t\t\t\tglobal $themes_allowedtags;\n\t\t\t\t\t\t\t\tif ( empty( $theme ) )\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t$name   = wp_kses( $theme->name,   $themes_allowedtags );\n\t\t\t\t\t\t\t\t$author = wp_kses( $theme->author, $themes_allowedtags );\n\t\t\t\t\t\t\t\t$preview_title = sprintf( __('Preview &#8220;%s&#8221;'), $name );\n\t\t\t\t\t\t\t\t$preview_url   = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'tab'   => 'theme-information',\n\t\t\t\t\t\t\t\t\t'theme' => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'theme-install.php' ) );\n\n\t\t\t\t\t\t\t\t$actions = array();\n\n\t\t\t\t\t\t\t\t$install_url = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'action' => 'install-theme',\n\t\t\t\t\t\t\t\t\t'theme'  => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'update.php' ) );\n\n\t\t\t\t\t\t\t\t$update_url = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'action' => 'upgrade-theme',\n\t\t\t\t\t\t\t\t\t'theme'  => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'update.php' ) );\n\n\t\t\t\t\t\t\t\t$status = 'install';\n\t\t\t\t\t\t\t\t$installed_theme = wp_get_theme( $theme->slug );\n\t\t\t\t\t\t\t\tif ( $installed_theme->exists() ) {\n\t\t\t\t\t\t\t\t\tif ( version_compare( $installed_theme->get('Version'), $theme->version, '=' ) )\n\t\t\t\t\t\t\t\t\t\t$status = 'latest_installed';\n\t\t\t\t\t\t\t\t\telseif ( version_compare( $installed_theme->get('Version'), $theme->version, '>' ) )\n\t\t\t\t\t\t\t\t\t\t$status = 'newer_installed';\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t$status = 'update_available';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch ( $status ) {\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tcase 'install':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-now\" href=\"' . esc_url( wp_nonce_url( $install_url, 'install-theme_' . $theme->slug ) ) . '\" title=\"' . esc_attr( sprintf( __( 'Install %s' ), $name ) ) . '\">' . __( 'Install Now' ) . '</a>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'update_available':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-now\" href=\"' . esc_url( wp_nonce_url( $update_url, 'upgrade-theme_' . $theme->slug ) ) . '\" title=\"' . esc_attr( sprintf( __( 'Update to version %s' ), $theme->version ) ) . '\">' . __( 'Update' ) . '</a>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'newer_installed':\n\t\t\t\t\t\t\t\t\tcase 'latest_installed':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<span class=\"install-now\" title=\"' . esc_attr__( 'This theme is already installed and is up to date' ) . '\">' . _x( 'Installed', 'theme' ) . '</span>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-theme-preview\" href=\"' . esc_url( $preview_url ) . '\" title=\"' . esc_attr( sprintf( __( 'Preview %s' ), $name ) ) . '\">' . __( 'Preview' ) . '</a>';\n\t\t\t\t\t\t\t\t$actions = apply_filters( 'theme_install_actions', $actions, $theme ); ?>\n\t\t\t\t\t\t\t\t<a class=\"screenshot install-theme-preview\" href=\"<?php echo esc_url( $preview_url ); ?>\" title=\"<?php echo esc_attr( $preview_title ); ?>\">\n\t\t\t\t\t\t\t\t\t<img src='<?php echo esc_url( $theme->screenshot_url ); ?>' width='150' />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<h3><?php echo $name; ?></h3>\n\t\t\t\t\t\t\t\t<div class=\"theme-author\"><?php printf( __( 'By %s' ), $author ); ?></div>\n\t\t\t\t\t\t\t\t<div class=\"action-links\">\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<?php foreach ( $actions as $action ): ?>\n\t\t\t\t\t\t\t\t\t\t\t<li><?php echo $action; ?></li>\n\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t\t\t\t<li class=\"hide-if-no-js\"><a href=\"#\" class=\"theme-detail\"><?php _e('Details') ?></a></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php $theme_class->install_theme_info( $theme ); ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t// end foreach $theme_names\n\t\t\t\t\t\t$theme_class->theme_installer();\n\t\t\t\t\t} else { ?>\n\t\t\t\t\t\t<div class=\"theme-browser\">\n\t\t\t\t\t\t\t<div class=\"themes\">\n\t\t\t\t\t\t<?php foreach ( $themes as $key => $theme ) {\n\t\t\t\t\t\t\t$installed_theme = wp_get_theme( $theme->slug );\n\t\t\t\t\t\t\tif ( $installed_theme->exists() )\n\t\t\t\t\t\t\t\t$theme->installed = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$theme->installed = false;\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<div class=\"theme\" tabindex=\"0\">\n\t\t\t\t\t\t\t\t<?php if ( $theme->screenshot_url ) { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-screenshot\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo $theme->screenshot_url; ?>\" alt=\"\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-screenshot blank\"></div>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t<div class=\"theme-author\"><?php printf( __( 'By %s' ), $theme->author ); ?></div>\n\t\t\t\t\t\t\t\t<h3 class=\"theme-name\"><?php echo $theme->name; ?></h3>\n\t\t\t\t\t\t\t\t<div class=\"theme-actions\">\n\t\t\t\t\t\t\t\t\t<a class=\"button button-secondary preview install-theme-preview\" href=\"theme-install.php?theme=<?php echo $theme->slug ?>\"><?php esc_html_e( 'Learn More' ); ?></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php if ( $theme->installed ) { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-installed\"><?php _e( 'Already Installed' ); ?></div>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t<br class=\"clear\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"theme-overlay\"></div>\n\t\t\t\t\t<?php } ?>\n\t\t\t\t</div>\n\t\t\t<?php } elseif ( 'system_status' == $_GET['action'] ) {\t?>\n\t\t\t\t<div class=\"updated fade\" <?php if ( ! ( isset( $_REQUEST['bwsmn_form_submit'] ) || isset( $_REQUEST['bwsmn_form_submit_custom_email'] ) ) || $error != \"\" ) echo \"style=\\\"display:none\\\"\"; ?>><p><strong><?php echo $message; ?></strong></p></div>\n\t\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><strong><?php echo $error; ?></strong></p></div>\n\t\t\t\t<h3><?php _e( 'System status', 'bestwebsoft' ); ?></h3>\n\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Environment', 'bestwebsoft' ); ?></th><td></td></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php foreach ( $system_info['system_info'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Active Plugins', 'bestwebsoft' ); ?></th><th></th></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php foreach ( $system_info['active_plugins'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Inactive Plugins', 'bestwebsoft' ); ?></th><th></th></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php if ( ! empty( $system_info['inactive_plugins'] ) ) {\n\t\t\t\t\t\t\tforeach ( $system_info['inactive_plugins'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t<?php } \n\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<div class=\"clear\"></div>\t\t\t\t\t\t\n\t\t\t\t\t<form method=\"post\" action=\"admin.php?page=bws_plugins&amp;action=system_status\">\n\t\t\t\t\t\t<p>\t\t\t\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"bwsmn_form_submit\" value=\"submit\" />\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Send to support', 'bestwebsoft' ) ?>\" />\n\t\t\t\t\t\t\t<?php wp_nonce_field( plugin_basename(__FILE__), 'bwsmn_nonce_submit' ); ?>\t\t\n\t\t\t\t\t\t</p>\t\t\n\t\t\t\t\t</form>\t\t\t\t\n\t\t\t\t\t<form method=\"post\" action=\"admin.php?page=bws_plugins&amp;action=system_status\">\t\n\t\t\t\t\t\t<p>\t\t\t\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"bwsmn_form_submit_custom_email\" value=\"submit\" />\t\t\t\t\t\t\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"button\" value=\"<?php _e( 'Send to custom email &#187;', 'bestwebsoft' ) ?>\" />\n\t\t\t\t\t\t\t<input type=\"text\" value=\"<?php echo $bwsmn_form_email; ?>\" name=\"bwsmn_form_email\" />\n\t\t\t\t\t\t\t<?php wp_nonce_field( plugin_basename(__FILE__), 'bwsmn_nonce_submit_custom_email' ); ?>\n\t\t\t\t\t\t</p>\t\t\t\t\n\t\t\t\t\t</form>\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<?php } ?>\n\t\t</div>\n\t<?php }\n}\n\nif ( ! function_exists ( 'bws_plugin_init' ) ) {\n\tfunction bws_plugin_init() {\n\t\t// Internationalization, first(!)\n\t\tload_plugin_textdomain( 'bestwebsoft', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' ); \n\t}\n}\n\nif ( ! function_exists ( 'bws_admin_enqueue_scripts' ) ) {\n\tfunction bws_admin_enqueue_scripts() {\n\t\tglobal $wp_version;\n\t\tif ( $wp_version < 3.8 )\n\t\t\twp_enqueue_style( 'bws-admin-stylesheet', plugins_url( 'css/general_style_wp_before_3.8.css', __FILE__ ) );\t\n\t\telse\n\t\t\twp_enqueue_style( 'bws-admin-stylesheet', plugins_url( 'css/general_style.css', __FILE__ ) );\n\n\t\tif ( isset( $_GET['page'] ) && $_GET['page'] == \"bws_plugins\" ) {\n\t\t\twp_enqueue_style( 'bws_menu_style', plugins_url( 'css/style.css', __FILE__ ) );\n\t\t\twp_enqueue_script( 'bws_menu_script', plugins_url( 'js/bws_menu.js' , __FILE__ ) );\t\t\t\n\t\t\tif ( $wp_version >= '3.8' )\n\t\t\t\twp_enqueue_script( 'theme-install' );\n\t\t\telseif ( $wp_version >= '3.4' )\n\t\t\t\twp_enqueue_script( 'theme' );\n\t\t}\n\t}\n}\n\nif ( ! function_exists ( 'bws_admin_head' ) ) {\n\tfunction bws_admin_head() {\n\t\tif ( isset( $_GET['page'] ) && $_GET['page'] == \"bws_plugins\" ) { ?>\n\t\t\t<noscript>\n\t\t\t\t<style type=\"text/css\">\n\t\t\t\t\t.bws_product_button {\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</noscript>\n\t\t<?php }\n\t}\n}\n\nadd_action( 'admin_init', 'bws_plugin_init' );\nadd_action( 'admin_enqueue_scripts', 'bws_admin_enqueue_scripts' );\nadd_action( 'admin_head', 'bws_admin_head' );\n?>", "<?php\n/*\nPlugin Name: Job board\nPlugin URI: http://bestwebsoft.com/plugin/\nDescription: Plugin for adding to site possibility to create job offers page with custom search, send CV and subscribing for similar jobs.\nAuthor: BestWebSoft\nVersion: 1.0.0\nAuthor URI: http://bestwebsoft.com/\nLicense: GPLv3 or later\n*/\n\n/*\n\t@ Copyright 2014  BestWebSoft  ( http://support.bestwebsoft.com )\n\n\tThis program is free software; you can redistribute it and/or modify\n\tit under the terms of the GNU General Public License, version 2, as\n\tpublished by the Free Software Foundation.\n\n\tThis program is distributed in the hope that it will be useful,\n\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\n\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\tGNU General Public License for more details.\n\n\tYou should have received a copy of the GNU General Public License\n\talong with this program; if not, write to the Free Software\n\tFoundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n*/\n\n/**\n * Add Wordpress page 'bws_plugins' and sub-page of this plugin to admin-panel.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_admin_menu' ) ) {\n\tfunction jbbrd_add_admin_menu() {\n\t\tglobal $bstwbsftwppdtplgns_options, $wpmu, $bstwbsftwppdtplgns_added_menu;\n\t\t$bws_menu_info = get_plugin_data( plugin_dir_path( __FILE__ ) . \"bws_menu/bws_menu.php\" );\n\t\t$bws_menu_version = $bws_menu_info[\"Version\"];\n\t\t$base = plugin_basename( __FILE__ );\n\n\t\tif ( ! isset( $bstwbsftwppdtplgns_options ) ) {\n\t\t\tif ( 1 == $wpmu ) {\n\t\t\t\tif ( ! get_site_option( 'bstwbsftwppdtplgns_options' ) ) {\n\t\t\t\t\tadd_site_option( 'bstwbsftwppdtplgns_options', array(), '', 'yes' );\n\t\t\t\t}\n\t\t\t\t$bstwbsftwppdtplgns_options = get_site_option( 'bstwbsftwppdtplgns_options' );\n\t\t\t} else {\n\t\t\t\tif ( ! get_option( 'bstwbsftwppdtplgns_options' ) ) {\n\t\t\t\t\tadd_option( 'bstwbsftwppdtplgns_options', array(), '', 'yes' );\n\t\t\t\t}\n\t\t\t\t$bstwbsftwppdtplgns_options = get_option( 'bstwbsftwppdtplgns_options' );\n\t\t\t}\n\t\t}\n\t\tif ( isset( $bstwbsftwppdtplgns_options['bws_menu_version'] ) ) {\n\t\t\t$bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] = $bws_menu_version;\n\t\t\tunset( $bstwbsftwppdtplgns_options['bws_menu_version'] );\n\t\t\tupdate_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options, '', 'yes' );\n\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t} else if ( ! isset( $bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] ) || $bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] < $bws_menu_version ) {\n\t\t\t$bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] = $bws_menu_version;\n\t\t\tupdate_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options, '', 'yes' );\n\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t} else if ( ! isset( $bstwbsftwppdtplgns_added_menu ) ) {\n\t\t\t$plugin_with_newer_menu = $base;\n\t\t\tforeach ( $bstwbsftwppdtplgns_options['bws_menu']['version'] as $key => $value ) {\n\t\t\t\tif ( $bws_menu_version < $value && is_plugin_active( $base ) ) {\n\t\t\t\t\t$plugin_with_newer_menu = $key;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$plugin_with_newer_menu = explode( '/', $plugin_with_newer_menu );\n\t\t\t$wp_content_dir = defined( 'WP_CONTENT_DIR' ) ? basename( WP_CONTENT_DIR ) : 'wp-content';\n\t\t\tif ( file_exists( ABSPATH . $wp_content_dir . '/plugins/' . $plugin_with_newer_menu[0] . '/bws_menu/bws_menu.php' ) ) {\n\t\t\t\trequire_once( ABSPATH . $wp_content_dir . '/plugins/' . $plugin_with_newer_menu[0] . '/bws_menu/bws_menu.php' );\n\t\t\t} else {\n\t\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t\t}\n\t\t\t$bstwbsftwppdtplgns_added_menu = TRUE;\n\t\t}\n\t\tadd_menu_page( 'BWS Plugins', 'BWS Plugins', 'manage_options', 'bws_plugins', 'bws_add_menu_render', plugins_url( \"images/px.png\", __FILE__ ), 1001 );\n\t\tadd_submenu_page( 'bws_plugins', 'Job board', 'Job board', 'manage_options', \"job-board.php\", 'jbbrd_settings_page' );\t\n\t\t/* Add custom list page to candidate profile menu. */\n\t\t$hook = add_users_page( 'New job offers', 'New job offers', 'job_candidate', 'job_candidate', 'jbbrd_candidate_category_custom_search_page' );\n\t\tadd_action( \"load-$hook\", 'jbbrd_screen_options' );\n\t}\n}\n\n/**\n * Install plugin.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_plugin_install' ) ) {\n\tfunction jbbrd_plugin_install() {\n\t\t/* Set admins capabilities. */\n\t\tjbbrd_set_administrators_capabilities();\n\t\t/* Create employer & job candidate roles. */\n\t\tjbbrd_roles_create();\n\t}\n}\n\n/**\n * Initialize plugin.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_init' ) ) {\n\tfunction jbbrd_init() {\n\t\t/* Internationalization. */\n\t\tload_plugin_textdomain( 'jbbrd', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' );\n\t\t/* Session start. */\n\t\tjbbrd_session_open();\n\t\t/* Register Vacancy post type. */\n\t\tjbbrd_post_type_vacancy();\n\t\t/* Register taxonomy for vacancy. */\n\t\tjbbrd_taxonomy_vacancy();\n\t\t/* Register terms for archive. */\n\t\tjbbrd_taxonomy_vacancy_terms();\n\t\t/* Register terms for employment. */\n\t\tjbbrd_taxonomy_employment_terms();\n\t\t/* Hide logo image when search results displayed. */\n\t\tjbbrd_logo_search_hide();\n\t\t/* Call register settings function. */\n\t\tjbbrd_settings();\n\t}\n}\n\n/**\n * Initialize admins part of plugin.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_admin_init' ) ) {\n\tfunction jbbrd_admin_init() {\n\t\t/* Admin interface init. */\n\t\tjbbrd_admin_part_init();\n\t\t/* WP version check. */\n\t\tjbbrd_version_check();\n\t\t/* Removes the permalinks display on the vacancy post type. */\n\t\tjbbrd_remove_permalink_line();\n\t}\n}\n\n/**\n * Admin interface init.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_admin_part_init' ) ) {\n\tfunction jbbrd_admin_part_init() {\n\t\tglobal $bws_plugin_info, $jbbrd_plugin_info;\n\t\t/* Add variable for bws_menu */\n\t\t$jbbrd_plugin_info = get_plugin_data( __FILE__ );\n\t\tif ( ! isset( $bws_plugin_info ) || empty( $bws_plugin_info ) ) {\n\t\t\t$bws_plugin_info = array( 'id' => '139', 'version' => $jbbrd_plugin_info[\"Version\"] );\n\t\t}\n\t\t/* Custom meta boxes for the edit job screen. */\n\t\tadd_meta_box( \"list-pers-meta\", __( 'Job Information', 'jbbrd' ), \"jbbrd_meta_personal\", \"vacancy\", \"normal\", \"low\" );\n\t\t/* Check for sender plugin. */\n\t\tjbbrd_check_sender();\n\t\t/* Show error message on edit.php screen when shortcode error. */\n\t\tjbbrd_add_error_to_vacancy_CPT_edit();\n\t}\n}\n\n/**\n * WP version check.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_version_check' ) ) {\n\tfunction jbbrd_version_check() {\n\t\tglobal $wp_version, $jbbrd_plugin_info;\n\t\t$require_wp = \"3.5\"; /* Wordpress at least requires version */\n\t\t$plugin = plugin_basename( __FILE__ );\n\t\tif ( version_compare( $wp_version, $require_wp, \"<\" ) ) {\n\t\t\tif ( is_plugin_active( $plugin ) ) {\n\t\t\t\tdeactivate_plugins( $plugin );\n\t\t\t\twp_die( \"<strong>\" . $jbbrd_plugin_info['Name'] . \" </strong> \" . __( 'requires', 'jbbrd' ) . \" <strong>WordPress \" . $require_wp . \"</strong> \" . __( 'or higher, that is why it has been deactivated! Please upgrade WordPress and try again.', 'jbbrd') . \"<br /><br />\" . __( 'Back to the WordPress', 'jbbrd') . \" <a href='\" . get_admin_url( null, 'plugins.php' ) . \"'>\" . __( 'Plugins page', 'jbbrd') . \"</a>.\" );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Session start.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_session_open' ) ) {\n\tfunction jbbrd_session_open() {\n\t    if ( ! @session_id() ) {\n    \t    @session_start();\n    \t}\n\t}\n}\n\n/**\n * Register \"vacancy\" custom post type function. Set global array $jbbrd_options.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_post_type_vacancy' ) ) {\n\tfunction jbbrd_post_type_vacancy() {\n\t\t/* Register \"vacancy\" CPT. */ \n\t\tregister_post_type( 'vacancy', array(\n\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Jobs', 'jbbrd' ), \n\t\t\t\t'singular_name' \t\t\t=> __( 'Job', 'jbbrd' ),\n\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job', 'jbbrd' ),\n\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job', 'jbbrd' ),\n\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit', 'jbbrd' ),\n\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job', 'jbbrd' ),\n\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job', 'jbbrd' ),\n\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View jobs', 'jbbrd' ),\n\t\t\t\t'view_item' \t\t\t\t=> __( 'View job', 'jbbrd' ),\n\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job', 'jbbrd' ),\n\t\t\t\t'not_found' \t\t\t\t=> __( 'No jobs found', 'jbbrd' ),\n\t\t\t\t'not_found_in_trash' \t\t=> __( 'No jobs found in Trash', 'jbbrd' ),\n\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job', 'jbbrd' ),\n\t\t\t),\n\t\t\t'singular_label' \t=> __( 'Job', 'jbbrd' ),\n\t\t\t'public' \t\t\t=> TRUE,\n\t\t\t'show_ui' \t\t\t=> TRUE, /* UI in admin panel. */\n\t\t\t'_builtin' \t\t\t=> FALSE, /* It's a custom post type, not built in. */\n\t\t\t'_edit_link' \t\t=> 'post.php?post=%d',\n\t\t\t'capability_type'\t=> 'vacancy',\n\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t/* Admins capabilities. */\n\t\t\t\t'edit_posts'\t\t\t\t=> 'edit_vacancies',\n\t\t\t\t'edit_others_posts'\t\t\t=> 'edit_others_vacancies',\n\t\t\t\t'delete_posts'\t\t\t\t=> 'delete_vacancies',\n\t\t\t\t'delete_others_posts'\t\t=> 'delete_others_vacancies',\n\t\t\t\t'delete_private_posts'\t\t=> 'delete_private_vacancies',\n\t\t\t\t'edit_private_posts'\t\t=> 'edit_private_vacancies',\n\t\t\t\t'read_private_posts'\t\t=> 'read_private_vacancies',\n\t\t\t\t/* Employer capabilities. */\n\t\t\t\t'edit_published_posts'\t\t=> 'edit_published_vacancies',\n\t\t\t\t'upload_files'\t\t\t\t=> 'upload_files',\n\t\t\t\t'publish_posts'\t\t\t\t=> 'publish_vacancies',\n\t\t\t\t'delete_published_posts' \t=> 'delete_published_vacancies',\n\t\t\t\t'edit_post' \t\t\t\t=> 'edit_vacancy',\n\t\t\t\t'delete_post' \t\t\t\t=> 'delete_vacancy',\n\t\t\t\t'read_post' \t\t\t\t=> 'read_vacancy',\n\t\t\t),\n\t\t\t'hierarchical' \t\t=> FALSE,\n\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t'menu_position' \t=> 5, /* Position in admin menu. */\n\t\t\t'rewrite' \t\t\t=> array( \"slug\" => \"vacancies\" ), /* Permalinks. */\n\t\t\t'query_var' \t\t=> 'vacancy', /* This goes to the WP_Query schema. */\n\t\t\t'supports' \t\t\t=> array( \n\t\t\t\t'title', \n\t\t\t\t'editor', \n\t\t\t\t'jbbrd_businesses',\n\t\t\t\t'jbbrd_employment',\n\t\t\t\t'thumbnail', /* Displays a box for featured image. */\n\t\t\t)\n\t\t));\n\t}\n}\n\n/**\n * Set \"vacancy\" custom taxonomies function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_vacancy' ) ) {\n\tfunction jbbrd_taxonomy_vacancy() {\n\t\t/* Register jbbrd_businesses taxonomy. */\n\t\tregister_taxonomy( \n\t\t\t'jbbrd_businesses', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray(\n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Job categories', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Job category', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job category', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job category', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit job categories', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job category', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job category', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View job categories', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View job category', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job category', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No job categories found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No job categories found in Trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job category', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> TRUE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t\t'sort'\t\t\t\t=> TRUE,\n\t\t\t\t'orderby' \t\t\t=> 'term_order',\n\t\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t\t'manage_terms' \t\t=> 'manage_jbbrd_businesses_tags',\n\t\t\t\t\t'edit_terms' \t\t=> 'edit_jbbrd_businesses_tags',\n\t\t\t\t\t'delete_terms' \t\t=> 'delete_jbbrd_businesses_tags',\n\t\t\t\t\t'assign_terms' \t\t=> 'assign_jbbrd_businesses_tags',\n\t\t\t\t),\n\t\t\t)\n\t\t);\n\t\t/* Register archive taxonomy. */\n\t\tregister_taxonomy(\n\t\t\t'archive', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray( \n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Job archive categories', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Job archive category', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job archive category', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job archive category', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit job archive categories', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job archive category', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job archive category', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View job archive categories', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View job archive category', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job category', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No job archive categories found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No job archive categories found in Trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job archive category', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> FALSE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t\t/* Register jbbrd_employment taxonomy. */\n\t\tregister_taxonomy( \n\t\t\t'jbbrd_employment', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray( \n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Employment', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Employment type', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add employment types', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add employment type', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit employment types', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit employment type', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New employment type', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View employment types', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View employment type', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search employment types', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No employment types found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No employment types found in trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent employment type', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> TRUE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t\t'sort'\t\t\t\t=> TRUE,\n\t\t\t\t'orderby' \t\t\t=> 'term_order',\n\t\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t\t'manage_terms' \t\t=> 'manage_jbbrd_employment_tags',\n\t\t\t\t\t'edit_terms' \t\t=> 'edit_jbbrd_employment_tags',\n\t\t\t\t\t'delete_terms' \t\t=> 'delete_jbbrd_employment_tags',\n\t\t\t\t\t'assign_terms' \t\t=> 'assign_jbbrd_employment_tags',\n\t\t\t\t),\n\t\t\t)\n\t\t);\n\t}\n}\n\n/**\n * Set custom terms for 'archive' taxonomy.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_vacancy_terms' ) ) {\n\tfunction jbbrd_taxonomy_vacancy_terms() {\n\t\tif ( ! term_exists( 'archived', 'archive' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Archived', 'jbbrd' ), /* the term. */ \n\t\t\t\t'archive', /* the taxonomy. */\n\t\t\t\tarray(\n\t\t\t\t\t'description'\t=> __( 'This job is in archive', 'jbbrd' ),\n\t\t\t\t\t'slug' \t\t\t=> 'archived',\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'posted', 'archive' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Posted', 'jbbrd' ), /* the term. */\n\t\t\t\t'archive', /* the taxonomy. */\n\t\t\t\tarray(\n\t\t\t\t\t'description'\t=> __( 'This job is posted', 'jbbrd' ),\n\t\t\t\t\t'slug' \t\t\t=> 'posted',\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Set custom terms for 'jbbrd_employment' taxonomy.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_employment_terms' ) ) {\n\tfunction jbbrd_taxonomy_employment_terms() {\n\t\tif ( ! term_exists( 'freelance', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Freelance', 'jbbrd' ), /* the term. */ \n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'freelance', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'full-time', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Full Time', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'full-time',\t\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'internship', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Internship', 'jbbrd' ), /* the term. */ \n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'internship', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'part-time', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Part Time', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'part-time', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'temporary', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Temporary', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'temporary', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Removes the wrong permalinks & buttons on the vacancy post type editor\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_permalink_line' ) ) {\n\tfunction jbbrd_remove_permalink_line() {\n\t\tif ( isset( $_GET['post'] ) ) {\n\t\t\t$post_type = get_post_type( $_GET['post'] );\n\t\t\tif ( $post_type == 'vacancy' && $_GET['action'] == 'edit' ) {\n\t\t\t\t/* Hide permalink line menu. */\n\t\t\t\techo '<style>#edit-slug-box{display:none;}</style>';\n\t\t\t\t/* Hide preview button. */\n\t\t\t\techo '<style>#minor-publishing-actions{display:none;}</style>';\n\t\t\t\t/* Hide \"Add media\" button. */\n\t\t\t\techo '<style>#wp-content-media-buttons{display:none;}</style>';\n\t\t\t}\n\t\t}\n\t\t/* If new vacancy create, hide them too. */\n\t\tif ( isset( $_GET['post_type'] ) && ( 'vacancy' == $_GET['post_type'] ) ) {\n\t\t\t/* Hide preview button. */\n\t\t\techo '<style>#preview-action{display:none;}</style>';\n\t\t\t/* Hide permalink line menu. */\n\t\t\techo '<style>#edit-slug-box{display:none;}</style>';\n\t\t\t/* Hide \"Add media\" button. */\n\t\t\techo '<style>#wp-content-media-buttons{display:none;}</style>';\n\t\t}\n\t}\n}\n\n/**\n * Register settings function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_settings' ) ) {\n\tfunction jbbrd_settings() {\n\t\tglobal $wpmu, $wpdb, $jbbrd_options, $jbbrd_option_defaults, $jbbrd_plugin_info;\n\t\t/* Set defaults array. */\n\t\t$jbbrd_option_defaults = array(\n\t\t\t'plugin_option_version' \t\t\t=> $jbbrd_plugin_info[\"Version\"],\n\t\t\t'post_per_page'\t\t\t\t\t\t=> 5,\n\t\t\t'custom_time_hours'\t\t\t\t\t=> 0,\n\t\t\t'custom_time_min'\t\t\t\t\t=> 0,\n\t\t\t'money'\t\t\t\t\t\t\t\t=> array( 'AUD', 'BGN', 'CAD', 'CHF', 'CNY', 'CYP', 'CZK', 'DKK', \n\t\t\t\t'EEK', 'EUR', 'GBP', 'HKD', 'HRK', 'HUF', 'IDR', 'ISK', 'JPY', 'KPW', 'LTL', 'LVL', 'MTL', 'MYR',\n\t\t\t\t'NOK', 'NZD', 'PHP', 'PLN', 'RON', 'RUR', 'SEK', 'SGD', 'SIT', 'SKK', 'THB', 'TRY', 'USD', 'ZAR',\n\t\t\t),\n\t\t\t'money_choose'\t\t\t\t\t\t=> 'USD',\n\t\t\t'time_period'\t\t\t\t\t\t=> array( \n\t\t\t\t__( 'year', 'jbbrd' ), \n\t\t\t\t__( 'month', 'jbbrd' ), \n\t\t\t\t__( 'week', 'jbbrd' ), \n\t\t\t\t__( 'day', 'jbbrd' ), \n\t\t\t\t__( 'hour', 'jbbrd' ),\n\t\t\t),\n\t\t\t'time_period_choose'\t\t\t\t=> __( 'month', 'jbbrd' ),\n\t\t\t'logo_position'\t\t\t\t\t\t=> 'left',\n\t\t\t'frontend_form'\t\t\t\t\t\t=> 1,\n\t\t\t'location_select'\t\t\t\t\t=> 0,\n\t\t\t'vacancy_reply_text'\t\t\t\t=> __( 'You replied to job offer.', 'jbbrd' ),\n\t\t\t'archieving_period'\t\t\t\t\t=> 30,\n\t\t);\n\t\t/* Install the option defaults. */\n\t\tif ( 1 == $wpmu ) {\n\t\t\tif ( ! get_site_option( 'jbbrd_options' ) )\n\t\t\t\tadd_site_option( 'jbbrd_options', $jbbrd_option_defaults, '', 'yes' );\n\t\t} else {\n\t\t\tif ( ! get_option( 'jbbrd_options' ) )\n\t\t\t\tadd_option( 'jbbrd_options', $jbbrd_option_defaults, '', 'yes' );\n\t\t}\n\t\t/* Get options from the database. */\n\t\t$jbbrd_options = ( 1 == $wpmu ) ? get_site_option( 'jbbrd_options' ) : get_option( 'jbbrd_options' );\n\n\t\t/* Array merge incase this version has added new options */\n\t\tif ( ! isset( $jbbrd_options['plugin_option_version'] ) || $jbbrd_options['plugin_option_version'] != $jbbrd_plugin_info[\"Version\"] ) {\n\t\t\t$jbbrd_options = array_merge( $jbbrd_option_defaults, $jbbrd_options );\n\t\t\t$jbbrd_options['plugin_option_version'] = $jbbrd_plugin_info[\"Version\"];\n\t\t\tupdate_option( 'jbbrd_options', $jbbrd_options );\n\t\t}\t\n\t}\n}\n\n/**\n * \u0421hecking for the existence of Sender Plugin or Sender Pro Plugin.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_check_sender' ) ) {\n\tfunction jbbrd_check_sender() {\n\t\tglobal $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t$all_plugins = get_plugins();\n\t\tif ( ! function_exists( 'is_plugin_active_for_network' ) )\n\t\t\trequire_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\n\t\tif ( ! ( array_key_exists( 'sender/sender.php', $all_plugins ) || array_key_exists( 'sender-pro/sender-pro.php', $all_plugins ) ) ) {\n\t\t\t$jbbrd_sender_not_found = sprintf( __( '%sSender Plugin%s is not found.%s', 'jbbrd' ), ( '<a target=\"_blank\" href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\">' ),'</a>', '<br />' );\n\t\t\t$jbbrd_sender_not_found .= sprintf( __( 'If you want to give send CV possibility to Job candidates, you need install and activate Sender plugin.%s', 'jbbrd' ), '</br>' );\n\t\t\t$jbbrd_sender_not_found .= __( 'You can download Sender Plugin from', 'jbbrd' ) . ' <a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\" title=\"' . __( 'Developers website', 'jbbrd' ). '\"target=\"_blank\">' . __( 'website of plugin Authors', 'jbbrd' ) . ' </a>';\n\t\t\t$jbbrd_sender_not_found .= __( 'or', 'jbbrd' ) . ' <a href=\"' . esc_url( 'http://wordpress.org/plugins/sender/' ) .'\" title=\"Wordpress\" target=\"_blank\">'. __( 'Wordpress.', 'jbbrd' ) . '</a>';\n\t\t} else {\n\t\t\tif ( ! ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender/sender.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) ) {\n\t\t\t\t$jbbrd_sender_not_active = sprintf( __( '%sSender Plugin%s is not active.%sIf you want to give send CV possibility to Job candidates, you need %sactivate Sender plugin.%s', 'jbbrd' ), ( '<a target=\"_blank\" href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\">' ),'</a>', '<br />', ( '<a href=\"' . esc_url( 'plugins.php' ) . '\">' ), '</a>' );\n\t\t\t}\n\t\t\t/* Old version. */\n\t\t\tif ( ( ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active_for_network( 'sender/sender.php' ) ) && isset( $all_plugins['sender/sender.php']['Version'] ) && $all_plugins['sender/sender.php']['Version'] < '0.5' ) || \n\t\t\t\t( ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) && isset( $all_plugins['sender-pro/sender-pro.php']['Version'] ) && $all_plugins['sender-pro/sender-pro.php']['Version'] < '0' ) ) {\n\t\t\t\t$jbbrd_sender_not_found = __( 'Sender Plugin has old version.', 'jbbrd' ) . '</br>' . __( 'You need update this plugin for sendmail function correct work.', 'jbbrd' );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Find permalink page.\n * @return $jbbrd_shortcode_page_permalink string page with shortcode links\n */\nif ( ! function_exists( 'jbbrd_find_shortcode_page' ) ) {\n\tfunction jbbrd_find_shortcode_page() {\n\t\tglobal $wpdb;\n\t\t$jbbrd_vacancy = like_escape( '[jbbrd_vacancy]' );\n\t\t$jbbrd_vacancy = esc_sql( $jbbrd_vacancy );\n\t\t$jbbrd_vacancy = '%' . $jbbrd_vacancy . '%';\n\t\t$jbbrd_shortcode_page_permalink = $wpdb->get_var( \"\n\t\t\tSELECT `guid` \n\t\t\tFROM `\" . $wpdb->prefix . \"posts` \n\t\t\tWHERE `post_content` LIKE '\" . $jbbrd_vacancy . \"' \n\t\t\tAND `post_status` = 'publish'\"\n\t\t);\n\t\treturn $jbbrd_shortcode_page_permalink;\n\t}\n}\n\n/**\n * Function for display job-board settings page in the admin area.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_settings_page' ) ) {\n\tfunction jbbrd_settings_page() {\n\t\tglobal $wpdb, $jbbrd_options, $jbbrd_option_defaults, $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t$error = \"\";\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t/* Save data for settings page. */\n\t\tif ( isset( $_POST['jbbrd_form_submit'] ) && check_admin_referer( plugin_basename(__FILE__), 'jbbrd_nonce_name' ) ) {\n\t\t\t/* Check if start shedule time changed. */\n\t\t\tif ( ( $_POST['custom_time_hours'] != $jbbrd_options['custom_time_hours'] ) || ( $_POST['custom_time_min'] != $jbbrd_options['custom_time_min'] ) ) \n\t\t\t\t$jbbrd_reset_shedule_time = true;\n\t\t\telse\n\t\t\t\t$jbbrd_reset_shedule_time = false;\n\t\t\t\n\t\t\tif ( ( isset( $_POST['post_per_page'] ) ) && ( '' != $_POST['post_per_page'] ) && ( 0 < $_POST['post_per_page'] ) && ( is_numeric( $_POST['post_per_page'] ) ) ) {\n\t\t\t\t$jbbrd_options['post_per_page'] = esc_html( floor( $_POST['post_per_page'] ) );\n\t\t\t} elseif ( '-1' == $_POST['post_per_page'] ) {\n\t\t\t\t$jbbrd_options['post_per_page'] = '-1';\n\t\t\t}\n\t\t\t/* Set salary monetary unit. */\n\t\t\tif ( ( isset( $_POST['money_choose'] ) ) && ( '' != $_POST['money_choose'] ) )\n\t\t\t\t$jbbrd_options['money_choose'] = esc_html( $_POST['money_choose'] );\n\n\t\t\t/* Set time period unit. */\n\t\t\tif ( ( isset( $_POST['time_period_choose'] ) ) && ( '' != $_POST['time_period_choose'] ) )\n\t\t\t\t$jbbrd_options['time_period_choose'] = esc_html( $_POST['time_period_choose'] );\n\n\t\t\t/* Set logo position. */\n\t\t\tif ( ( isset( $_POST['logo_position'] ) ) && ( '' != $_POST['logo_position'] ) )\n\t\t\t\t$jbbrd_options['logo_position'] = esc_html( $_POST['logo_position'] );\n\n\t\t\t/* Frontend filter form show. */\n\t\t\tif ( ( isset( $_POST['frontend_form'] ) ) && ( '' != $_POST['frontend_form'] ) )\n\t\t\t\t$jbbrd_options['frontend_form'] = esc_html( $_POST['frontend_form'] );\n\t\t\telse\n\t\t\t\t$jbbrd_options['frontend_form'] = 0;\n\n\t\t\t/* Backend vacancy edit location metafield select show. */\n\t\t\tif ( ( isset( $_POST['location_select'] ) ) && ( '' != $_POST['location_select'] ) )\n\t\t\t\t$jbbrd_options['location_select'] = esc_html( $_POST['location_select'] );\n\t\t\telse\n\t\t\t\t$jbbrd_options['location_select'] = 0;\n\n\t\t\t/* Set time period unit. */\n\t\t\tif ( ( isset( $_POST['vacancy_reply_text'] ) ) && ( '' != $_POST['vacancy_reply_text'] ) )\n\t\t\t\t$jbbrd_options['vacancy_reply_text'] = $_POST['vacancy_reply_text'];\n\n\t\t\t/* Set archieving period. */\n\t\t\tif ( ( isset( $_POST['archieving_period'] ) ) && ( '' != $_POST['archieving_period'] ) && ( is_numeric( $_POST['archieving_period'] ) ) )\n\t\t\t\t$jbbrd_options['archieving_period'] = esc_html( floor( $_POST['archieving_period'] ) );\n\n\t\t\t/* Set custom time to start move to archive shedule. */\n\t\t\tif ( ( isset( $_POST['custom_time_hours'] ) ) && ( '' != $_POST['custom_time_hours'] ) && ( is_numeric( $_POST['custom_time_hours'] ) ) ) {\n\t\t\t\tif ( 23 < floor( $_POST['custom_time_hours'] ) )\n\t\t\t\t\t$jbbrd_options['custom_time_hours'] = 23;\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_options['custom_time_hours'] = esc_html( floor( $_POST['custom_time_hours'] ) );\n\t\t\t}\n\t\t\tif ( ( isset( $_POST['custom_time_min'] ) ) && ( '' != $_POST['custom_time_min'] ) && ( is_numeric( $_POST['custom_time_min'] ) ) ) {\n\t\t\t\tif ( 59 < floor( $_POST['custom_time_min'] ) )\n\t\t\t\t\t$jbbrd_options['custom_time_min'] = 59;\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_options['custom_time_min'] = esc_html( floor( $_POST['custom_time_min'] ) );\n\t\t\t}\n\t\t\t/* Set shortcode permalink to options. */\n\t\t\t$jbbrd_options['jbbrd_shortcode_permalink'] = $jbbrd_shortcode_permalink;\n\t\t\t/* Update options in the database. */\n\t\t\tupdate_option( 'jbbrd_options', $jbbrd_options, '', 'yes' );\n\t\t\t/* Set new time for sendmail shedule, if time is changed. */\n\t\t\tif ( true == $jbbrd_reset_shedule_time ) {\n\t\t\t\t/* Set GMT timezone. */ \n\t\t\t\t$jbbrd_GMT = $get_option('gmt_offset');\n\t\t\t\t/* Set new time. */\n\t\t\t\t$jbbrd_shedule_time = ( $jbbrd_options['custom_time_hours'] * 3600 ) + ( $jbbrd_GMT * 3600 ) + ( $jbbrd_options['custom_time_min'] * 60 );\n\t\t\t\t/* Clear old schedule hook time set. */\n\t\t\t\twp_clear_scheduled_hook( 'jbbrd_move_vacancies_to_archive_dayly_function' );\n\t\t\t\t/* Set new schedule hook. */\n\t\t\t\tjbbrd_move_to_archive_schedule( $jbbrd_shedule_time );\n\t\t\t}\n\t\t\t$message = __( \"Settings saved.\", 'jbbrd' );\n\t\t}\n\t\t/* Warning if not found shortcode. */\n\t\tif ( '' == $jbbrd_shortcode_permalink ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Shortcode is not found.', 'jbbrd' ) . '&nbsp;<br />' . __( 'Please place shortcode', 'jbbrd' ) . '&nbsp;<strong>[jbbrd_vacancy]</strong>&nbsp;' . __( 'to page or post and press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;.<br />';\n\t\t} else {\n\t\t\tif ( ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Please press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button for shortcode new place settings.', 'jbbrd' ) . '<br />';\n\t\t\t}\n\t\t}\n\t\t/* Warning if not found sender plugin. */\n\t\tif ( isset( $jbbrd_sender_not_found ) ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_sender_not_found . '<br />';\n\t\t}\n\t\tif ( ( isset( $jbbrd_sender_not_active ) ) || ( '' != $jbbrd_sender_not_active ) ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_sender_not_active . '<br />';\n\t\t} ?>\n\t\t<div class=\"wrap\">\n\t\t\t<div class=\"icon32 icon32-bws\" id=\"icon-options-general\"></div>\n\t\t\t<h2><?php _e( 'Job board settings', 'jbbrd' ); ?></h2>\n\t\t\t<h2 class=\"nav-tab-wrapper\">\n\t\t\t\t<a class=\"nav-tab<?php if ( ! isset( $_GET['tab'] ) ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=job-board.php\"><?php _e( 'Settings', 'jbbrd' ); ?></a>\n\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['tab'] ) && 'faq' == $_GET['tab'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=job-board.php&amp;tab=faq\"><?php _e( 'FAQ', 'jbbrd' ); ?></a>\n\t\t\t</h2>\n\t\t\t<div class=\"updated fade\" <?php if ( ! isset( $_POST['jbbrd_form_submit'] ) ) echo 'style=\"display:none;\"'; ?> >\n\t\t\t\t<p><strong><?php if ( isset( $message ) ) echo $message; ?></strong></p>\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_settings_notice\" class=\"updated fade\" style=\"display:none\">\n\t\t\t\t<p>\n\t\t\t\t\t<strong><?php _e( \"Notice:\", 'jbbrd' ); ?></strong>\n\t\t\t\t\t<?php printf( __( \"The plugin's settings have been changed. In order to save them please don't forget to click the %sSave Changes%s button.\", 'jbbrd' ), '&laquo;', '&raquo;' ); ?>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><?php echo $error; ?></p></div>\t\t\t\n\t\t\t<?php if ( ! isset( $_GET['tab'] ) ) { /* Showing settings tab */?>\n\t\t\t\t<p><?php print( __( 'Place shortcode', 'jbbrd' ) . '&nbsp;<span style=\"font-weight:bold;font-size:1.2em;\">[jbbrd_vacancy]</span>&nbsp;' . __( 'to your job page to display frontend content and', 'jbbrd' ) . '&nbsp;<span style=\"font-weight:bold;font-size:1.2em;\">[jbbrd_registration]</span>&nbsp;' . __( 'to display registration form.', 'jbbrd' ) ); ?><br />\n\t\t\t\t<strong><?php print( __( 'Notice:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'you must save changes when replace shortcodes.', 'jbbrd' ) ); ?></p>\n\t\t\t\t<form id=\"jbbrd_settings_form\" method=\"post\" action=\"admin.php?page=job-board.php\">\n\t\t\t\t\t<table class=\"form-table\">\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Number of jobs on page', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td><input maxlength=\"2\" type=\"text\" name=\"post_per_page\" value=\"<?php if ( isset( $jbbrd_options['post_per_page'] ) ) echo stripslashes( $jbbrd_options['post_per_page'] ); else echo stripslashes( $jbbrd_option_defaults['post_per_page'] ); ?>\"/>\n\t\t\t\t\t\t\t<?php _e( 'per page', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( '(You can set -1 to to show all jobs).' , 'jbbrd' ) . '</slan>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Salary monetary unit', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<select name=\"money_choose\">\n\t\t\t\t\t\t\t\t\t<?php foreach ( $jbbrd_options['money'] as $key => $money_unit ) {\n\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\techo '<option value=\"' . $money_unit . '\"';\n\t\t\t\t\t\t\t\t\t\t\tif ( $money_unit == $jbbrd_options['money_choose'] ) echo ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\techo '\">' . $money_unit . '</option>';\n\t\t\t\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Salary period unit', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<select name=\"time_period_choose\">\n\t\t\t\t\t\t\t\t\t<?php foreach ( $jbbrd_options['time_period'] as $key => $money_unit ) {\n\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\techo '<option value=\"' . $money_unit . '\"';\n\t\t\t\t\t\t\t\t\t\t\tif ( $money_unit == $jbbrd_options['time_period_choose'] ) echo ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\techo '\">' . $money_unit . '</option>';\n\t\t\t\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( '( Time period for current salary ).' , 'jbbrd' ) . '</slan>' ); ?></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Frontend logo position', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"logo_position\" value=\"left\" <?php if ( 'left' == $jbbrd_options['logo_position'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php _e( 'Left', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"logo_position\" value=\"right\" <?php if ( 'right' == $jbbrd_options['logo_position'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php _e( 'Right', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Show frontend form', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"frontend_form\" value=\"1\" <?php if ( 1 == $jbbrd_options['frontend_form'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( 'Show/hide frontend form for filtering jobs.' , 'jbbrd' ) . '</span>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Location field type', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"location_select\" value=\"1\" <?php if ( 1 == $jbbrd_options['location_select'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( 'Change location field in frontens sorting form to select box of all locations which already add to jobs base.' , 'jbbrd' ) . '</span>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Template text for CV sending', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<textarea name=\"vacancy_reply_text\"><?php if ( isset( $jbbrd_options['vacancy_reply_text'] ) ) echo stripslashes( $jbbrd_options['vacancy_reply_text'] ); else echo stripslashes( $jbbrd_option_defaults['vacancy_reply_text'] ); ?></textarea>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Job offers default expiry time', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input maxlength=\"3\" size=\"2\" type=\"text\" name=\"archieving_period\" value=\"<?php if ( isset( $jbbrd_options['archieving_period'] ) ) echo stripslashes( $jbbrd_options['archieving_period'] ); else echo stripslashes( $jbbrd_option_defaults['archieving_period'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'days', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Daily archiving time', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input maxlength=\"2\" size=\"2\" type=\"text\" name=\"custom_time_hours\" value=\"<?php if ( isset( $jbbrd_options['custom_time_hours'] ) ) echo stripslashes( $jbbrd_options['custom_time_hours'] ); else echo stripslashes( $jbbrd_option_defaults['custom_time_hours'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'hours', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t\t<input maxlength=\"2\" size=\"2\" type=\"text\" name=\"custom_time_min\" value=\"<?php if ( isset( $jbbrd_options['custom_time_min'] ) ) echo stripslashes( $jbbrd_options['custom_time_min'] ); else echo stripslashes( $jbbrd_option_defaults['custom_time_min'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'min', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_form_submit\" value=\"submit\" />\n\t\t\t\t\t<p class=\"submit_div\">\n\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Save Changes', 'jbbrd' ); ?>\" />\n\t\t\t\t\t</p>\n\t\t\t\t\t<?php wp_nonce_field( plugin_basename( __FILE__ ), 'jbbrd_nonce_name' ); ?>\n\t\t\t\t</form>\n\t\t\t<?php } elseif ( 'faq' == $_GET['tab'] ) { \n\t\t\t\t/* Get FAQ part of readme.txt */\n\t\t\t\t$jbbrd_file_handle = fopen( plugin_dir_path( __FILE__ ) . 'readme.txt' , 'r' );\n\t\t\t\t/* Set start, finish strings. */\n\t\t\t\t$jbbrd_text_start = '== Frequently Asked Questions ==';\n\t\t\t\t$jbbrd_text_finish = '== Screenshots ==';\n\t\t\t\t$jbbrd_output_start = 0;\n\t\t\t\t$jbbrd_pattern = '/^=/';\n\t\t\t\t$jbbrd_header_pattern = '/^={2,}/';\n\t\t\t\t/* Output to page. */\n\t\t\t\tif ( $jbbrd_file_handle ) {\n\t\t\t\t\t?><div id=\"jbbrd_faq\"><?\n\t\t\t\t\twhile ( ! feof( $jbbrd_file_handle ) ) {\n\t\t\t\t\t\t$jbbrd_line = fgets( $jbbrd_file_handle );\n\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_start ) ) {\n\t\t\t\t\t\t\t$jbbrd_output_start = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_finish ) ) {\n\t\t\t\t\t\t\t$jbbrd_output_start = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( 1 == $jbbrd_output_start ) {\n\t\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_start ) ) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( preg_match( $jbbrd_pattern , $jbbrd_line ) ) {\n\t\t\t\t\t\t\t\t\techo '<p><strong>' . $jbbrd_line . '</strong></p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\techo '<p>' . $jbbrd_line . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twp_nonce_field( plugin_basename( __FILE__ ), 'jbbrd_nonce_name' );\n\t\t\t\t\t?></div><?php\n\t\t\t\t}\n\t\t\t\tfclose( $jbbrd_file_handle );\n\t\t\t} ?>\n\t\t\t<div class=\"bws-plugin-reviews\">\n\t\t\t\t<div class=\"bws-plugin-reviews-rate\">\n\t\t\t\t\t<?php _e( 'If you enjoy our plugin, please give it 5 stars on WordPress', 'jbbrd' ); ?>:\n\t\t\t\t\t<a href=\"http://wordpress.org/support/view/plugin-reviews/job-board/\" target=\"_blank\" title=\"Job board\"><?php _e( 'Rate the plugin', 'jbbrd' ); ?></a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bws-plugin-reviews-support\">\n\t\t\t\t\t<?php _e( 'If there is something wrong about it, please contact us', 'jbbrd' ); ?>:\n\t\t\t\t\t<a href=\"http://support.bestwebsoft.com\">http://support.bestwebsoft.com</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<?php } \n}\n\n/**\n * Add Job board JS.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_load_scripts' ) ) {\n\tfunction jbbrd_load_scripts() {\n\t\tglobal $wp_version;\n\t\t/* Add main styles. */\n\t\tif ( 3.8 > $wp_version )\n\t\t\twp_enqueue_style( 'jbbrd_stylesheet', plugins_url( 'css/style_wp_before_3.8.css', __FILE__ ) );\n\t\telse\n\t\t\twp_enqueue_style( 'jbbrd_stylesheet', plugins_url( 'css/style.css', __FILE__ ) );\n\n\t\twp_enqueue_script( 'jbbrd_script', plugins_url( 'js/script.js', __FILE__ ), array( 'jquery', 'jquery-ui-slider' ) );\n\t\t/* Add datepicker script. */\n\t\tif ( $wp_version > 3.7 ) {\n\t\t\twp_enqueue_script( 'jquery-ui-datepicker' );\n\t\t}\n\t}\n}\n\n/**\n * Job update messages.\n * @param array $messages Existing post update messages.\n * @return array Amended post update messages with new CPT update messages.\n */\nif ( ! function_exists( 'jbbrd_vacancy_updated_messages' ) ) {\n\tfunction jbbrd_vacancy_updated_messages( $messages ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\n\t\t$post             = get_post();\n\t\t$post_type        = get_post_type( $post );\n\t\t$post_type_object = get_post_type_object( $post_type );\n\n\t\t$messages['vacancy'] = array(\n\t\t\t0  => '', /* Unused. Messages start at index 1. */\n\t\t\t1  => __( 'Job updated.', 'jbbrd' ),\n\t\t\t2  => __( 'Custom field updated.', 'jbbrd' ),\n\t\t\t3  => __( 'Custom field deleted.', 'jbbrd' ),\n\t\t\t4  => __( 'Job updated.', 'jbbrd' ),\n\t\t\t5  => isset( $_GET['revision'] ) ? ( __( 'Job restored to revision from', 'jbbrd' ) . '&nbsp;' . wp_post_revision_title( (int) $_GET['revision'], false ) ) : false,\n\t\t\t6  => __( 'Job published.', 'jbbrd' ),\n\t\t\t7  => __( 'Job saved.', 'jbbrd' ),\n\t\t\t8  => __( 'Job submitted.', 'jbbrd' ),\n\t\t\t9  => __( 'Job scheduled for:', 'jbbrd' ) . '&nbsp;<strong>' . date_i18n( 'M j, Y @ G:i', strtotime( $post->post_date ) ) . '</strong>.',\n\t\t\t10 => __( 'Job draft updated.', 'jbbrd' )\n\t\t);\n\n\t\tif ( ( $post_type_object->publicly_queryable ) && ( get_post_type() === 'vacancy' ) ) {\n\t\t\t$permalink = get_permalink( $post->ID );\n\t\t\t/* Create link to current job, if shortcode worked right. */\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) \n\t\t\t\t|| ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) \n\t\t\t\t|| ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$view_link = '';\n\t\t\t} else {\n\t\t\t\t$view_link = sprintf( ' <a href=\"%s\">%s</a>', $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(), __( 'View job', 'jbbrd' ) );\n\t\t\t}\n\t\t\t$messages[ $post_type ][1] .= $view_link;\n\t\t\t$messages[ $post_type ][6] .= $view_link;\n\t\t\t$messages[ $post_type ][9] .= $view_link;\n\t\t\t$preview_permalink = add_query_arg( 'preview', 'true', $permalink );\n\t\t\t/* Create link to current job, if shortcode worked right. */\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) \n\t\t\t\t|| ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) \n\t\t\t\t|| ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$preview_link = '';\n\t\t\t} else {\n\t\t\t\t$preview_link = sprintf( ' <a target=\"_blank\" href=\"%s\">%s</a>', $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(), __( 'View job', 'jbbrd' ) );\n\t\t\t}\n\t\t\t$messages[ $post_type ][8]  .= $preview_link;\n\t\t\t$messages[ $post_type ][10] .= $preview_link;\n\t\t}\n\t\treturn $messages;\n\t}\n}\n\n/**\n * Add capabilities for administrators.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_set_administrators_capabilities' ) ) {\n\tfunction jbbrd_set_administrators_capabilities() {\n\t\t/* Get the role object. */\n\t\t$administrator = get_role( 'administrator' );\n\t\t/* A list of capabilities to add to administrators. */\n\t\t$caps = array(\n\t\t\t'edit_vacancies',\n\t\t\t'edit_others_vacancies',\n\t\t\t'delete_vacancies',\n\t\t\t'delete_others_vacancies',\n\t\t\t'delete_private_vacancies',\n\t\t\t'edit_private_vacancies',\n\t\t\t'read_private_vacancies',\n\t\t\t'edit_published_vacancies',\n\t\t\t'publish_vacancies',\n\t\t\t'delete_published_vacancies',\n\t\t\t'edit_vacancy',\n\t\t\t'delete_vacancy',\n\t\t\t'read_vacancy',\n\t\t\t/* Set capabilities to 'jbbrd_businesses' custom taxonomy. */\n\t\t\t'manage_jbbrd_businesses_tags',\n\t\t\t'edit_jbbrd_businesses_tags',\n\t\t\t'delete_jbbrd_businesses_tags',\n\t\t\t'assign_jbbrd_businesses_tags',\n\t\t\t/* Set capabilities to 'jbbrd_employment' custom taxonomy. */\n\t\t\t'manage_jbbrd_employment_tags',\n\t\t\t'edit_jbbrd_employment_tags',\n\t\t\t'delete_jbbrd_employment_tags',\n\t\t\t'assign_jbbrd_employment_tags',\n\t\t);\n\t\tforeach ( $caps as $cap ) {\n\t\t\t/* Add the capability. */\n\t\t\t$administrator->add_cap( $cap );\n\t\t}\n\t}\n}\n\n/**\n * Remove capabilities from administrators.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_administrators_capabilities' ) ) {\n\tfunction jbbrd_remove_administrators_capabilities() {\n\t\t/* Get the role object. */\n\t\t$administrator = get_role( 'administrator' );\n\t\t/* A list of capabilities to remove from administrators. */\n\t\t$caps = array(\n\t\t\t'edit_vacancies',\n\t\t\t'edit_others_vacancies',\n\t\t\t'delete_vacancies',\n\t\t\t'delete_others_vacancies',\n\t\t\t'delete_private_vacancies',\n\t\t\t'edit_private_vacancies',\n\t\t\t'read_private_vacancies',\n\t\t\t'edit_published_vacancies',\n\t\t\t'publish_vacancies',\n\t\t\t'delete_published_vacancies',\n\t\t\t'edit_vacancy',\n\t\t\t'delete_vacancy',\n\t\t\t'read_vacancy',\n\t\t\t/* Unset capabilities to 'jbbrd_businesses' custom taxonomy. */\n\t\t\t'manage_jbbrd_businesses_tags',\n\t\t\t'edit_jbbrd_businesses_tags',\n\t\t\t'delete_jbbrd_businesses_tags',\n\t\t\t'assign_jbbrd_businesses_tags',\n\t\t\t/* Unset capabilities to 'jbbrd_employment' custom taxonomy. */\n\t\t\t'manage_jbbrd_employment_tags',\n\t\t\t'edit_jbbrd_employment_tags',\n\t\t\t'delete_jbbrd_employment_tags',\n\t\t\t'assign_jbbrd_employment_tags',\n\t\t);\n\t\tforeach ( $caps as $cap ) {\n\t\t\t/* Remove the capability. */\n\t\t\t$administrator->remove_cap( $cap );\n\t\t}\n\t}\n}\n\n/**\n  * Create employer and job candidate role.\n  * @return void\n  */\nif ( ! function_exists( 'jbbrd_roles_create' ) ) {\n\tfunction jbbrd_roles_create() {\n\t\t/* Create employer role. */\n\t\t$employer_add = add_role(\n\t\t\t'employer', 'Employer',\n\t\t\tarray(\n\t\t\t\t'edit_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'edit_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'read_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'edit_published_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'publish_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_published_vacancies'\t\t=> TRUE,\n\t\t\t\t'edit_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_vacancy'\t\t\t\t\t=> TRUE,\n\t\t\t\t'read_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'read'\t\t\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'assign_jbbrd_businesses_tags'\t\t=> TRUE,\n\t\t\t\t'assign_jbbrd_employment_tags' \t\t=> TRUE,\n\t\t\t\t'upload_files'\t\t\t\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t\t/* Create job_candidate role. */\n\t\t$job_candidate_add = add_role(\n\t\t\t'job_candidate', 'Job Candidate',\n\t\t\tarray(\n\t\t\t\t'read_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'read_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'read'\t\t\t\t\t\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t}\n}\n\n/**\n * Add view action to title row on vacancy posts view.\n * @param array $actions Existing post update actions.\n * @return array Amended post update actions with new CPT update actions.\n */\nif ( ! function_exists( 'jbbrd_change_title_row_actions' ) ) {\n\tfunction jbbrd_change_title_row_actions( $actions ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t\t$actions['view'] = __( 'Link is not found!', 'jbbrd' );\n\t\t\t}\n\t\t\treturn $actions;\n\t\t} else {\n\t\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t\t$actions['view'] = '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id() . '\" title=\"' . esc_attr( __( 'View this offer', 'jbbrd' ) ) . '\">' . __( 'View', 'jbbrd' ) . '</a>';\n\t\t\t}\n\t\t\treturn $actions;\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $wp_admin_bar array() of nodes\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_relative_view' ) ) {\n\tfunction jbbrd_add_relative_view( $wp_admin_bar ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$args = array(\n\t\t\t\t\t'id'    => 'link_not_found',\n\t\t\t\t\t'title' => 'Shortcode not found!',\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t$args = array(\n\t\t\t\t\t'id'    => 'view_vacancy',\n\t\t\t\t\t'title' => __( 'View Job', 'jbbrd' ),\n\t\t\t\t\t'href'  => $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(),\n\t\t\t\t);\n\t\t\t}\n\t\t\t$wp_admin_bar->add_node( $args );\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $wp_admin_bar array() of nodes\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_view' ) ) {\n\tfunction jbbrd_remove_view( $wp_admin_bar ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t$wp_admin_bar->remove_node( 'view' );\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $column string vacancy column\n * @return void\n */\nif ( ! function_exists( 'jbbrd_custom_columns' ) ) {\n\tfunction jbbrd_custom_columns( $column ) {\n\t\tglobal $post, $jbbrd_options, $jbbrd_option_defaults;\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tswitch ( $column ) {\n\t\t\tcase \"jbbrd_title\":\n\t\t\t\techo '<a href=\"#\">' . get_the_title() . '</a>';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_location\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"jbbrd_location\"][0] ) )\n\t\t\t\t\techo $jbbrd_custom[\"jbbrd_location\"][0] . \"<br />\";\n\t\t\t\telse echo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_organization\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"jbbrd_organization\"][0] ) )\n\t\t\t\t\techo $jbbrd_custom[\"jbbrd_organization\"][0] . \"<br />\";\n\t\t\t\telse echo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_employment-categorie\":\n\t\t\t\t$jbbrd_employment_categories = get_the_terms( 0, \"jbbrd_employment\" );\n\t\t\t\t$jbbrd_employment_categories_html = array();\n\t\t\t\tif ( is_array( $jbbrd_employment_categories ) ) {\n\t\t\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\tforeach ( $jbbrd_employment_categories as $jbbrd_employment_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_employment_categories_html, $jbbrd_employment_categorie->name );\n\t\t\t\t\t\techo implode( $jbbrd_employment_categories_html, \", \" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tforeach ( $jbbrd_employment_categories as $jbbrd_employment_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_employment_categories_html, '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&employment_category=' . $jbbrd_employment_categorie->slug . '\">' . $jbbrd_employment_categorie->name . '</a>' );\n\t\t\t\t\t\techo implode( $jbbrd_employment_categories_html, \", \" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_vacancy-categorie\":\n\t\t\t\t$jbbrd_categories = get_the_terms( 0, \"jbbrd_businesses\" );\n\t\t\t\t$jbbrd_categories_html = array();\n\t\t\t\tif ( is_array( $jbbrd_categories ) ) {\n\t\t\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\tforeach ( $jbbrd_categories as $jbbrd_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_categories_html, $jbbrd_categorie->name );\n\t\t\t\t\t\techo implode( $jbbrd_categories_html, \", \" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tforeach ( $jbbrd_categories as $jbbrd_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_categories_html, '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&category=' . $jbbrd_categorie->slug . '\">' . $jbbrd_categorie->name . '</a>' );\n\t\t\t\t\t\techo implode( $jbbrd_categories_html, \", \" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_salary\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"salary\"][0] ) ) {\n\t\t\t\t\techo $jbbrd_custom[\"salary\"][0] . '&nbsp;';\n\t\t\t\t\tif ( isset( $jbbrd_options['money_choose'] ) ) {\n\t\t\t\t\t\techo $jbbrd_options['money_choose'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo $jbbrd_option_defaults['money_choose'];\n\t\t\t\t\t}\n\t\t\t\t\techo '/';\n\t\t\t\t\tif ( isset( $jbbrd_options['time_period_choose'] ) ) {\n\t\t\t\t\t\techo $jbbrd_options['time_period_choose'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo $jbbrd_option_defaults['time_period_choose'];\n\t\t\t\t\t}\n\t\t\t\t\techo \"<br />\";\n\t\t\t\t} else\n\t\t\t\t\techo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_archive\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"archive\"][0] ) ) {\n\t\t\t\t\techo 'archived';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\n/**\n * Set vacancy custom post column names.\n * @param array $columns Existing post update columns.\n * @return array post update columns with new CPT update columns.\n */\nif ( ! function_exists( 'jbbrd_edit_columns' ) ) {\n\tfunction jbbrd_edit_columns( $columns ) {\n\t\t$columns = array(\n\t\t\t\"cb\" \t\t\t\t\t\t\t=> \"<input type=\\\"checkbox\\\" />\",\n\t\t\t\"title\" \t\t\t\t\t\t=> __( \"Job offer\", 'jbbrd' ),\n\t\t\t\"jbbrd_location\" \t\t\t\t=> __( \"Location\", 'jbbrd' ),\n\t\t\t\"jbbrd_organization\" \t\t\t=> __( \"Organization\", 'jbbrd' ),\n\t\t\t\"jbbrd_employment-categorie\" \t=> __( \"Employment\", 'jbbrd' ),\n\t\t\t\"jbbrd_vacancy-categorie\"\t\t=> __( \"Categories\", 'jbbrd' ),\n\t\t\t\"jbbrd_salary\" \t\t\t\t\t=> __( \"Salary\", 'jbbrd' ),\n\t\t\t\"jbbrd_archive\" \t\t\t\t=> __( \"Archive\", 'jbbrd' ),\n\t\t\t\"date\"\t\t\t\t\t\t\t=> __( \"Date\", 'jbbrd' ),\n\t\t);\n\t\treturn $columns;\n\t}\n}\n\n/**\n * Making content columns.\n * @param array $columns Existing post update columns.\n * @return array post update columns with new CPT update columns.\n */\nif ( ! function_exists( 'jbbrd_sortable_columns' ) ) {\n\tfunction jbbrd_sortable_columns( $columns ) {\n\t\t$columns['jbbrd_location']\t\t= \"jbbrd_location\";\n\t\t$columns['jbbrd_organization']\t= \"jbbrd_organization\";\n\t\t$columns['jbbrd_salary']\t\t= \"salary\";\n\t\t$columns['jbbrd_date']\t\t\t= \"date\";\n\t\treturn $columns;\n\t}\n}/* End of making content columns. */\n\n/**\n * Making content columns sortable.\n * @param $query array() query array\n * @return void\n */\nif ( ! function_exists( 'jbbrd_sortable_columns_orderby' ) ) {\n\tfunction jbbrd_sortable_columns_orderby( $query ) {\n\t\tif ( ! is_admin() ) {\n\t\t\treturn;\n\t\t}\n\t\t$orderby = $query->get( 'orderby' );\n\t\tif ( 'jbbrd_location' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'jbbrd_location' );\n\t\t}\n\t\tif ( 'jbbrd_organization' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'jbbrd_organization' );\n\t\t}\n\t\tif ( 'salary' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'salary' );\n\t\t\t$query->set( 'orderby', 'meta_value_num' );\n\t\t}\n\t}\n}\n\n/**\n * Add selectbox of vacancy Categories to filter.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_restrict_manage_posts' ) ) {\n\tfunction jbbrd_restrict_manage_posts() {\n\t\t/* Only display these taxonomy filters on desired custom post_type listings. */\n\t\tglobal $typenow;\n\t\tif ( $typenow == 'vacancy' ) {\n\t\t\t/* Set \"Job categories\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'jbbrd_businesses';\n\t\t\tprint( '<div id=\"jbbrd_businesses_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Job categories:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' id=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t\t/* Set \"Archive status\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'archive';\n\t\t\tprint( '<div id=\"jbbrd_archive_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Archived jobs:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t\t/* Set \"Archive status\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'jbbrd_employment';\n\t\t\tprint( '<div id=\"jbbrd_employment_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Employment type:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t}\n\t}\n}\n\n/**\n * Set post custom metafields values.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_meta_personal' ) ) {\n\tfunction jbbrd_meta_personal() {\n\t\tglobal $post, $jbbrd_options, $error;\n\t\t$jbbrd_custom = get_post_custom( $post->ID );\n\t\t/* Set values. */\n\t\tif ( isset( $jbbrd_custom[\"demands\"][0] ) ) {\n\t\t\t$demands = $jbbrd_custom[\"demands\"][0];\n\t\t} else {\n\t\t\t$demands = '';\n\t\t}\n\t\tif ( isset( $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t$jbbrd_location = $jbbrd_custom[\"jbbrd_location\"][0];\n\t\t} else {\n\t\t\t$jbbrd_location = '';\n\t\t}\n\t\tif ( isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t$jbbrd_organization = $jbbrd_custom[\"jbbrd_organization\"][0];\n\t\t} else {\n\t\t\t$jbbrd_organization = '';\n\t\t}\n\t\t/* If ('salary') not numeric = 'salary' = '0' */\n\t\tif ( ( isset( $jbbrd_custom[\"salary\"][0] ) ) && ( 0 < $jbbrd_custom[\"salary\"][0] ) && ( is_numeric( $jbbrd_custom[\"salary\"][0] ) ) ) {\n\t\t\t$salary = $jbbrd_custom[\"salary\"][0];\n\t\t} else {\n\t\t\t$salary = '0';\n\t\t}\n\t\t/* Expiry date. */\n\t\tif ( isset( $jbbrd_custom[\"expiry_date\"][0] ) ) {\n\t\t\t$format \t\t= 'm/d/Y';\n\t\t\t$value\t\t\t= date( $format, strtotime( $jbbrd_custom[\"expiry_date\"][0] ) );\n\t\t\t$expiry_date \t= $value;\n\t\t} else {\n\t\t\t$expiry_date \t= '';\n\t\t}\n\t\t/* Archive status. */\n\t\tif ( isset( $jbbrd_custom[\"archive\"][0] ) ) {\n\t\t\t$archive = $jbbrd_custom[\"archive\"][0];\n\t\t\twp_set_object_terms( $post->ID, 'archived', 'archive', FALSE );\n\t\t} else {\n\t\t\t$archive = '';\n\t\t\twp_set_object_terms( $post->ID, 'posted', 'archive', FALSE );\n\t\t}\n\t\t/* Use nonce for verification. */\n\t\twp_nonce_field( plugin_basename(__FILE__), 'jbbrd_noncename' );\n\t\techo '<span style=\"color:red;\">' . $error . '</span>'; ?>\n\t\t<div class=\"personal\">\n\t\t\t<div id=\"jbbrd_requirements\">\n\t\t\t\t<table border=\"0\" class=\"jbbrd_table_inside\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_demand_field\"><label><?php _e( 'Requirements', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_demand_input\"><textarea name=\"demands\"><?php echo $demands; ?></textarea></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table><!-- .table_inside -->\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_metaboxes\">\n\t\t\t\t<table border=\"0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_location_input_label\" for=\"jbbrd_location_input\"><?php _e( 'Location', 'jbbrd' ); ?></label><?php if ( '' == $jbbrd_location ) { ?><span style=\"color:red\">*</span><?php } ?></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_location_input\" required=\"required\" name=\"jbbrd_location\" value=\"<?php echo $jbbrd_location; ?>\" placeholder=\"<?php _e( 'Location', 'jbbrd' ); ?>\" /></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_organization_input_label\" for=\"jbbrd_organization_input\"><?php _e( 'Organization', 'jbbrd' ); ?></label><?php if ( '' == $jbbrd_organization ) { ?><span style=\"color:red\">*</span><?php } ?></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_organization_input\" required=\"required\" name=\"jbbrd_organization\" value=\"<?php echo $jbbrd_organization; ?>\" placeholder=\"<?php _e( 'Organization name', 'jbbrd' ); ?>\" /></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_salary_input_label\" for=\"jbbrd_salary_input\"><?php _e( 'Salary', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_salary_input\" name=\"salary\" value=\"<?php echo $salary; ?>\" placeholder=\"0\" /><span class=\"jbbrd_personal_field\"><?php echo $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose']; ?></span></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_expiry_date_label\" for=\"jbbrd_expiry_date\"><?php _e( 'Expiry date', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\">\n\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_expiry_date\" name=\"expiry_date\" value=\"<?php echo $expiry_date; ?>\" placeholder=\"MM/DD/YYYY\" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\">\n\t\t\t\t\t\t\t<!-- <label class=\"jbbrd_personal_field\" for=\"jbbrd_archive_checkbox\"><?php _e( 'Move to archive', 'jbbrd' ); ?></label> -->\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_archive_checkbox\" name=\"archive\" style=\"display:none;\" value=\"1\" <?php if ( '' != $archive ) echo 'checked=\"checked\"'; ?> />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_requirements_metaboxes_clear\"></div>\n\t\t</div><!-- .personal -->\n\t<?php }\n}/* End of set post custom metafields values. */\n\n/**\n * Move to archive expiried jobs.\n * @return array() of location metabox fields\n */\nif ( ! function_exists( 'jbbrd_find_location_metabox_fields' ) ) {\n\tfunction jbbrd_find_location_metabox_fields() {\n\t\tglobal $wpdb;\n\t\t$jbbrd_location_metabox_fields_modified = array();\n\t\t/* Set tables names. */\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t/* Set query. */\n\t\t$sql_query = \"\n\t\t\tSELECT DISTINCT pm.`meta_value`\n\t\t\tFROM `\" . $postmeta_table . \"` AS pm\n\t\t\tWHERE pm.`meta_key` = 'jbbrd_location'\n\t\t\";\n\t\t/* Set order. */\n\t\t$jbbrd_location_metabox_fields = $wpdb->get_results( $sql_query, ARRAY_A ); \n\t\tif ( is_array( $jbbrd_location_metabox_fields ) ) {\n\t\t\tforeach ( $jbbrd_location_metabox_fields as $key => $value ) {\n\t\t\t\tforeach ( $value as $key_id => $value_id ) {\n\t\t\t\t\t$jbbrd_location_metabox_fields_modified[] = $value_id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn $jbbrd_location_metabox_fields_modified;\n\t}\n}\n\n/**\n * Move to archive expiried jobs.\n * @return array() of ID`s of expiried jobs\n */\nif ( ! function_exists( 'jbbrd_find_expiry_vacancies' ) ) {\n\tfunction jbbrd_find_expiry_vacancies() {\n\t\tglobal $wpdb;\n\t\t/* Set tables names. */\n\t\t$posts_table\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t/* Set query. */\n\t\t$sql_query = \"\n\t\t\tSELECT DISTINCT wpp.`ID`\n\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\tAND ttt.`taxonomy` = 'archive')\n\t\t\tJOIN `\" . $terms_table . \"` AS tt ON (ttt.`term_id` = tt.`term_id`\n\t\t\t\tAND tt.`slug` = 'posted' )\n\t\t\tJOIN `\" . $postmeta_table . \"` AS pm ON (wpp.`ID` = pm.`post_id`\n\t\t\t\tAND pm.`meta_key` = 'expiry_date'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) > UNIX_TIMESTAMP(pm.`meta_value`))\n\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\";\n\t\t/* Set order. */\n\t\t$expiry_date_vacancies = $wpdb->get_results( $sql_query, ARRAY_A );\n\t\treturn $expiry_date_vacancies;\n\t}\n}\n\n/**\n * Move to archive expiried jobs.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_set_archive_status_function' ) ) {\n\tfunction jbbrd_set_archive_status_function() {\n\t\t$expiry_date_vacancies = jbbrd_find_expiry_vacancies();\n\t\tif ( is_array( $expiry_date_vacancies ) ) {\n\t\t\tforeach ( $expiry_date_vacancies as $key => $value ) {\n\t\t\t\tforeach ( $value as $key_id => $value_id ) {\n\t\t\t\t\tupdate_post_meta( $value_id, \"archive\", 1 );\n\t\t\t\t\twp_set_object_terms( $value_id, 'archived', 'archive', FALSE );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Set schedule for daily moving to archive for expirie jobs.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_move_to_archive_schedule' ) ) {\n\tfunction jbbrd_move_to_archive_schedule( $jbbrd_custom_time ) {\n\t\tif ( ! wp_next_scheduled( 'jbbrd_move_vacancies_to_archive_dayly_function' ) ) {\n\t\t\t$jbbrd_absolut_time = floor( time() / 86400 ) * 86400;\n\t\t\twp_schedule_event( $jbbrd_absolut_time + $jbbrd_custom_time, 'daily', 'jbbrd_move_vacancies_to_archive_dayly_function' );\n\t\t}\n\t}\n}\n\n/**\n * Set admin error message on custom metafields error.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_metafields_error_admin_notice' ) ) {\n\tfunction jbbrd_metafields_error_admin_notice() {\n\t\t/* Print the message. */\n\t\tglobal $post;\n\t\t$notice = get_option( 'jbbrd_custom_metafield_error_notice' );\n\t\tif ( empty( $notice ) ) {\n\t\t\treturn '';\n\t\t}\n\t\tforeach( $notice as $id => $message ) {\n\t\t\tprint_r( '<div class=\"error\"><p>' . $message . '</p></div>' );\n\t\t\t/* Remove notice after its displayed. */\n\t\t\tunset( $notice[ $id ] );\n\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n/**\n * Insert post function.\n * @param $post_id string current post ID\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_post' ) ) {\n\tfunction jbbrd_save_post( $post_id, $post = NULL ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Set custom meta fields. */\n\t\t$jbbrd_meta_fields = array(\n\t\t\t\"demands\",\n\t\t\t\"jbbrd_location\",\n\t\t\t\"jbbrd_organization\",\n\t\t\t\"salary\",\n\t\t\t\"resume-field\",\n\t\t\t\"archive\",\n\t\t\t\"expiry_date\"\n\t\t);\n\t\t/* Verify this came from the our screen and with proper authorization. */\n\t\tif ( ! isset( $_POST['jbbrd_noncename'] ) ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\tif ( ! wp_verify_nonce( $_POST['jbbrd_noncename'], plugin_basename(__FILE__) ) ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Verify if this is an auto save. */ \n\t\tif ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Check metafields. */\n\t\tif ( ( ! isset( $_POST['jbbrd_location'] ) ) || ( empty( $_POST['jbbrd_location'] ) ) || ( ! isset( $_POST['jbbrd_organization'] ) ) || ( empty( $_POST['jbbrd_organization'] ) ) ) {\n\t\t\t$notice = get_option('jbbrd_custom_metafield_error_notice');\n\t\t\t$notice[ $post_id ] = '';\n\t\t\tif ( ! isset( $_POST['jbbrd_location'] ) || empty( $_POST['jbbrd_location'] )  ) {\n\t\t\t\t$notice[ $post_id ] .=  '<strong>' . __( 'Error:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'location field should not be empty', 'jbbrd' ) . '&nbsp;<strong>' . '(Job ID: ' . $post_id . ')' . '</strong>.<br />';\n\t\t\t}\n\t\t\tif ( ! isset( $_POST['jbbrd_organization'] ) || empty( $_POST['jbbrd_organization'] ) ) {\n\t\t\t\t$notice[ $post_id ] .=  '<strong>' . __( 'Error:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'organization field should not be empty.', 'jbbrd' ) . '<br />';\n\t\t\t}\n\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Add values to metafields table. */\n\t\tif ( $post->post_type == \"vacancy\" ) {\n\t\t\t/* Loop through the POST data. */\n\t\t\tforeach ( $jbbrd_meta_fields as $key ) {\n\t\t\t\tif ( isset( $_POST[ $key ] ) ) {\n\t\t\t\t\t/* Change date format if fild is 'expiry_date'. */\n\t\t\t\t\tif ( $key == 'expiry_date' ) {\n\t\t\t\t\t\t$date_compl = $_POST[ $key ];\n\t\t\t\t\t\t/* Set 30 days period if date field is empty. */\n\t\t\t\t\t\tif ( '' == $date_compl ) {\n\t\t\t\t\t\t\t$jbbrd_default_time = $jbbrd_options['archieving_period'];\n\t\t\t\t\t\t\t//$jbbrd_default_time = 30;\n\t\t\t\t\t\t\t$date_compl \t\t= get_the_date( 'U' );\n\t\t\t\t\t\t\t$format \t\t\t= 'Y-m-d 23:59:59';\n\t\t\t\t\t\t\t$value\t\t\t\t= date( $format, $date_compl + ( 60 * 60 * 24 * $jbbrd_default_time ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$date_compl\t\t\t= explode( \"/\", $date_compl );\n\t\t\t\t\t\t\t$format \t\t\t= 'Y-m-d 23:59:59';\n\t\t\t\t\t\t\t$value\t\t\t\t= date( $format, strtotime( $date_compl[1] . \"-\" . $date_compl[0] . '-' . $date_compl[2] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$value =  $_POST[ $key ];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$value = '';\n\t\t\t\t}\n\t\t\t\t/* Delete meta if empty. */\n\t\t\t\tif ( '' == $value ) {\n\t\t\t\t\tdelete_post_meta( $post_id, $key );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t/* Update meta. */\n\t\t\t\tupdate_post_meta( $post_id, $key, $value );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Create class jbbrd_Manager to display list of messages.\n */\nif ( ! class_exists( 'WP_List_Table' ) ) {\n\trequire_once( ABSPATH . 'wp-admin/includes/class-wp-list-table.php' );\n}\n\nif ( ! class_exists( 'jbbrd_Backend_Manager' ) ) {\n\tclass jbbrd_Backend_Manager extends WP_List_Table {\n\n\t\t/**\n\t\t * Constructor of class \n\t\t */\n\t\tfunction __construct() {\n\t\t\tglobal $status, $page;\n\t\t\tparent::__construct( array(\n\t\t\t\t'singular'  => __( 'vacancy', 'jbbrd' ),\n\t\t\t\t'plural'    => __( 'vacancies', 'jbbrd' ),\n\t\t\t\t'ajax'      => false,\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Function to prepare data before display \n\t\t * @return void\n\t\t */\n\t\tfunction prepare_items() {\n\t\t\tglobal $wpdb;\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$search\t\t= isset( $_POST['s'] ) ? htmlspecialchars( stripslashes( $_POST['s'] ) ) : \"\";\n\t\t\t\t$search\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $search ) ) );\n\t\t\t}\n\t\t\t$columns\t\t\t\t= $this->get_columns();\n\t\t\t$hidden\t\t\t\t\t= array();\n\t\t\t$sortable\t\t\t\t= $this->get_sortable_columns();\n\t\t\t$this->_column_headers\t= array( $columns, $hidden, $sortable );\n\t\t\t$per_page\t\t\t\t= $this->get_items_per_page( 'vacancies_per_page', 30);\n\t\t\t$current_page\t\t\t= $this->get_pagenum();\n\t\t\t$total_items\t\t\t= $this->items_count();;\n\t\t\t$this->found_data\t\t= array_slice( $this->job_list(), ( ( $current_page - 1 ) * $per_page ), $per_page );\n\t\t\t$this->set_pagination_args( array(\n\t\t\t\t'total_items' => $total_items,\n\t\t\t\t'per_page'    => $per_page,\n\t\t\t) );\n\t\t\t$this->items\t\t\t= $this->found_data;\n\t\t}\n\n\t\t/**\n\t\t * Function to show message if no jobs found\n\t\t * @return void\n\t\t */\n\t\tfunction no_items() { ?>\n\t\t\t<p style=\"color:red;\"><?php _e( 'No jobs found', 'jbbrd' ); ?></p>\n\t\t<?php }\n\n\t\t/**\n\t\t * Get a list of columns.\n\t\t * @return array list of columns and titles\n\t\t */\n\t\tfunction get_columns(){\n\t\t\t$columns = array(\n\t\t\t\t'title'\t\t=> __( 'Job offer', 'jbbrd' ),\n\t\t\t\t'author'\t=> __( 'Salary', 'jbbrd' ),\n\t\t\t\t'date'\t\t=> __( 'Date', 'jbbrd' ),\n\t\t\t);\n\t\t\treturn $columns;\n\t\t}\n\n\t\t/**\n\t\t * Get a list of sortable columns.\n\t\t * @return array list of sortable columns\n\t\t */\n\t\tfunction get_sortable_columns() {\n\t\t\t$sortable_columns = array(\n\t\t\t\t'title'\t\t=> array( 'title', FALSE ),\n\t\t\t\t'author'\t=> array( 'author', FALSE ),\n\t\t\t\t'date'\t\t=> array( 'date', FALSE ),\n\t\t\t);\n\t\t\treturn $sortable_columns;\n\t\t}\n\n\t\t/**\n\t\t * Fires when the default column output is displayed for a single row.\n\t\t * @param string $column_name      The custom column's name.\n\t\t * @param int    $item->comment_ID The custom column's unique ID number.\n\t\t * @return void\n\t\t */\n\t\tfunction column_default( $item, $column_name ) {\n\t\t\tswitch( $column_name ) {\n\t\t\t\tcase 'title':\n\t\t\t\tcase 'author':\n\t\t\t\tcase 'date':\n\t\t\t\t\treturn $item[ $column_name ];\n\t\t\t\tdefault:\n\t\t\t\t\treturn print_r( $item, TRUE ) ; /* Print all array. */\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function to get report list\n\t\t * @return array() list of jobs\n\t\t */\n\t\tfunction job_list() {\n\t\t\tglobal $wpdb, $jbbrd_options;\n\t\t\t$i = 0;\n\t\t\t$job_list       = array();  \n\t\t\t$jbbrd_search_category = get_user_meta( get_current_user_id(), 'jbbrd_job_candidate_category_choose', TRUE ); \n\t\t\t$jbbrd_term_id = term_exists( $jbbrd_search_category, 'jbbrd_businesses' );\n\t\t\t$jbbrd_term_id = $jbbrd_term_id['term_id'];\n\t\t\t/* Add search. */\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$search\t\t= isset( $_POST['s'] ) ? htmlspecialchars( stripslashes( $_POST['s'] ) ) : \"\";\n\t\t\t\t$search\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $search ) ) );\n\t\t\t}\n\t\t\t/* Set tables names. */\n\t\t\t$posts_table\t\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t\t$term_relationships_table\t\t= $wpdb->prefix . \"term_relationships\";\n\t\t\t$term_taxonomy_table \t\t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t\t$postmeta_table \t\t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t\t$terms_table \t\t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t\t/* Set ordering. */\n\t\t\tif ( ( isset( $_GET['orderby'] ) ) && ( in_array( $_GET['orderby'], array( \"title\", \"author\", \"date\" ) ) ) ) {\n\t\t\t\tif ( \"title\" == $_GET['orderby'] )\n\t\t\t\t\t$jbbrd_orderby = \"post_title\";\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_orderby = \"post_modified\";\n\t\t\t} else\n\t\t\t\t$jbbrd_orderby = 'post_title';\n\n\t\t\tif ( ( isset( $_GET['order'] ) ) && ( in_array( $_GET['order'], array( \"asc\", \"desc\" ) ) ) )\n\t\t\t\t$jbbrd_order = $_GET['order'];\n\t\t\telse\n\t\t\t\t$jbbrd_order = 'desc';\n\n\t\t\t/* Prepare sql_query. */\n\t\t\t$sql_query = \"\n\t\t\t\tSELECT DISTINCT wpp.`ID`, wpp.`post_title`, wpp.`post_modified`, pm.`meta_value` \n\t\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\t\tAND ttt.`term_id` = '\" . $jbbrd_term_id . \"'\n\t\t\t\t\tAND ttt.`taxonomy` = 'jbbrd_businesses')\n\t\t\t\tJOIN `\" . $postmeta_table . \"` AS pm ON (wpp.`ID` = pm.`post_id`\n\t\t\t\t\tAND pm.`meta_key` = 'salary')\n\t\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(`post_modified`) < '86400'\n\t\t\t\";\n\t\t\t/* Set search order. */\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$sql_query .= \"AND wpp.`post_title` LIKE '%\" . $search . \"%'\";\n\t\t\t}\n\t\t\t/* Set output ordering. */\n\t\t\t$sql_query .= \"\n\t\t\t\tORDER BY wpp.`\" . $jbbrd_orderby . \"` \" . $jbbrd_order . \"\n\t\t\t\";\n\t\t\t$job_data = $wpdb->get_results( $sql_query, ARRAY_A );\n\t\t\tforeach ( $job_data as $job ) {\n\t\t\t\t$job_list[$i]\t\t\t= array();\n\t\t\t\t$job_list[$i]['id']\t\t= $job['ID'];\n\t\t\t\t$job_list[$i]['title']\t= $job['post_title'];\n\t\t\t\t$job_list[$i]['author']\t= $job['meta_value'];\n\t\t\t\t$job_list[$i]['author'] .= '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'];\n\t\t\t\t$job_list[$i]['date']\t= $job['post_modified'];\n\t\t\t\t$i ++;\n\t\t\t}\n\t\t\treturn( $job_list );\n\t\t}\n\n\t\t/**\n\t\t * Function to get number of all matched jobs\n\t\t * @return sting reports number\n\t\t */\n\t\tpublic function items_count() {\n\t\t\tglobal $wpdb;\n\t\t\t$jbbrd_search_category = get_user_meta( get_current_user_id(), 'jbbrd_job_candidate_category_choose', TRUE ); \n\t\t\t$jbbrd_term_id = term_exists( $jbbrd_search_category, 'jbbrd_businesses' );\n\t\t\t$jbbrd_term_id = $jbbrd_term_id['term_id'];\n\t\t\t/* Set tables names. */\n\t\t\t$posts_table\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t\t/* Prepare sql_query. */\n\t\t\t$sql_query = \"\n\t\t\t\tSELECT COUNT(wpp.`id`) \n\t\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\t\tAND ttt.`term_id` = '\" . $jbbrd_term_id . \"'\n\t\t\t\t\tAND ttt.`taxonomy` = 'jbbrd_businesses')\n\t\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(`post_modified`) < '86400'\n\t\t\t\";\n\t\t\t$items_count  = $wpdb->get_var( $sql_query );\n\t\t\treturn $items_count;\n\t\t}\n\n\t\t/**\n\t\t * Add link to vacancy below vacansy title.\n\t\t * @param sting current item\n\t\t * @return sting link to vacancy\n\t\t */\n\t\tfunction column_title( $item ) {\n\t\t\tglobal $jbbrd_options;\n\t\t\t/* Find page with plugins shortcode. */\n\t\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$actions['view'] = __( 'Link is not found!', 'jbbrd' );\n\t\t\t\treturn sprintf('%1$s %2$s', $item['title'], $this->row_actions( $actions ) );\n\t\t\t} else {\n\t\t\t\t$actions = array(\n\t\t\t\t\t'view'\t\t=> sprintf( '<a href=\"' . '%1$s' . '&vacancy_id=' . '%2$s' . '\">View</a>', $jbbrd_options['jbbrd_shortcode_permalink'], $item['id'] ),\n\t\t\t\t);\n\t\t\t\treturn sprintf('%1$s %2$s', $item['title'], $this->row_actions( $actions ) );\n\t\t\t}\n\t\t}\n\t}\n}/* End of class jbbrd_Manager to display list of messages. */\n\n/**\n * Add screen options of class jbbrd_Backend_Manager\n * @return void \n */\nif ( ! function_exists( 'jbbrd_screen_options' ) ) {\n\tfunction jbbrd_screen_options() {\n\t\tglobal $sndr_reports_list;\n\t\t$option = 'per_page';\n\t\t$args = array(\n\t\t\t'label'\t\t=> __( 'Jobs per page', 'jbbrd' ),\n\t\t\t'default'\t=> 30,\n\t\t\t'option'\t=> 'vacancies_per_page'\n\t\t);\n\t\tadd_screen_option( $option, $args );\n\t}\n}\n\n/**\n * Function to save and load settings from screen options\n * @return void \n */\nif ( ! function_exists( 'jbbrd_candidate_table_set_option' ) ) {\n\tfunction jbbrd_candidate_table_set_option( $status, $option, $value ) {\n\t\treturn $value;\n\t}\n}\n\n/**\n * Create new obect.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_candidate_category_custom_search_page' ) ) {\n\tfunction jbbrd_candidate_category_custom_search_page() {\n\t\t$jbbrd_manager = new jbbrd_Backend_Manager(); ?>\n\t\t<div class=\"wrap\"><h2><?php _e( 'Job offers for choosen category by last day', 'jbbrd' ); ?></h2>\n\t\t\t<form method=\"post\">\n\t\t\t\t<input type=\"hidden\" name=\"page\" value=\"job_candidate\" />\n\t\t\t\t<?php if ( isset( $_POST['s'] ) && $_POST['s'] ) {\n\t\t\t\t\tprint( '<span class=\"subtitle\">' . __( 'Search results for', 'jbbrd' ) . '&nbsp;&#8220;' . wp_html_excerpt( esc_html( stripslashes( $_POST['s'] ) ), 50 ) . '&#8221;</span>' );\n\t\t\t\t}\n\t\t\t\t$jbbrd_manager->prepare_items();\n\t\t\t\t$jbbrd_manager->search_box( __( 'Search', 'jbbrd' ), 'search_id');\n\t\t\t\t$jbbrd_manager->display(); ?>\n\t\t\t</form>\n\t\t</div>\n\t<?php }\n}\n\n/**\n * Add custom upload CV, search categories and saved search capabilities for job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_cv_load_field' ) ) {\n\tfunction jbbrd_add_cv_load_field( $user ) { \n\t\t/* Set variables for choosing job  category. */\n\t\tglobal $jbbrd_choose_term_id, $jbbrd_options;\n\t\t$tax_slug \t= 'jbbrd_businesses';\n\t\t$tax_obj \t= get_taxonomy( $tax_slug );\n\t\t$tax_name \t= $tax_obj->labels->name;\n\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t$terms \t\t= get_terms( $tax_slug );\n\t\t/* Upload CV form. */\n\t\t$jbbrd_cv = get_user_meta( $user->ID, 'jbbrd_user_cv', TRUE ); \n\t\tif ( ( TRUE === jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) { ?>\n\t\t\t<!-- Job candidate CV. -->\n\t\t\t<h3><?php _e(\"Job candidate options\", \"jbbrd\"); ?></h3>\n\t\t\t<?php if ( is_admin() && ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) ) ) { ?>\n\t\t\t\t<table class=\"form-table\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope=\"row\"><label for=\"user_meta_cv\"><?php _e( 'Upload your CV file', 'jbbrd' ); ?></label></th>\n\t\t\t\t\t\t<td><input id=\"user_meta_cv\" type=\"file\" name=\"jbbrd_user_cv\" value=\"\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span class=\"description\"><?php _e( 'You can upload only DOC/DOCX, PDF or TXT document.', 'jbbrd' ); ?></span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<?php if ( isset( $jbbrd_cv['url'] ) ) {\n\t\t\t\t\t\t\t\techo '<a href=' . $jbbrd_cv['url'] . '>' . pathinfo( $jbbrd_cv['file'], PATHINFO_BASENAME ) . '</a>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( isset( $jbbrd_cv['url'] ) ) { ?>\n\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_archive_checkbox\" name=\"jbbrd_cv_clear\" />\n\t\t\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_archive_checkbox\"><?php _e( 'Delete current CV', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t<?php } ?>\n\t\t\t<!-- Job candidate Search Category. -->\n\t\t\t<table class=\"form-table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"row\"><?php _e( 'Set job search category', 'jbbrd' ); ?></th>\n\t\t\t\t\t<td><?php \n\t\t\t\t\t\t/* Retrieve the current object. */\n\t\t\t\t\t\t$jbbrd_current_user_meta = get_user_meta( $user->ID );\n\t\t\t\t\t\tif ( isset( $jbbrd_current_user_meta['jbbrd_job_candidate_category_choose'] ) )\n\t\t\t\t\t\t\t$jbbrd_current_user_meta_value = $jbbrd_current_user_meta['jbbrd_job_candidate_category_choose'][0];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$jbbrd_current_user_meta_value = '';\n\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\tprint( '<select name=\"jbbrd_job_candidate_category_choose\" id=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\t\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\t\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\t\t\t\tif ( $term->slug == $jbbrd_current_user_meta_value ) {\n\t\t\t\t\t\t\t\techo ' selected=\"selected\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\techo '>' . $term->name . '</option>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprint_r( '</select><br />\n\t\t\t\t\t\t<span class=\"description\">' . __( 'Choose job search category', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\tif ( '' != $jbbrd_current_user_meta_value ) { ?>\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_candidate_category_clear_checkbox\" name=\"jbbrd_candidate_category_clear\" />\n\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_candidate_category_clear_checkbox\"><?php _e( 'Clear current category search', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<!-- Job candidate Saved Search. -->\n\t\t\t<table class=\"form-table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"row\"><?php _e( 'Candidate saved search', 'jbbrd' ); ?></th>\n\t\t\t\t\t<td><?php \n\t\t\t\t\t\t/* Retrieve the current object. */\n\t\t\t\t\t\tif ( ( isset( $jbbrd_current_user_meta['job_candidate_saved_search'] ) ) && ( '' != ( $jbbrd_current_user_meta['job_candidate_saved_search'][0] ) ) ) {\n\t\t\t\t\t\t\t$jbbrd_current_user_saved_search = $jbbrd_current_user_meta['job_candidate_saved_search'][0];\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search = array();\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search = unserialize( $jbbrd_current_user_saved_search );\n\t\t\t\t\t\t\tunset( $jbbrd_candidate_saved_search[0] );\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_transformed = array(); \n\t\t\t\t\t\t\tforeach ( $jbbrd_candidate_saved_search as $key => $value ) {\n\t\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_transformed[] = $key . '=' . $value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_string = implode( '&', $jbbrd_candidate_saved_search_transformed );\n\t\t\t\t\t\t\tif ( isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t\tprint_r( '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&' . $jbbrd_candidate_saved_search_string . '\">' . __( 'View saved search results', 'jbbrd' ) . '</a>' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprint_r( '<br /><span class=\"description\">' . __( 'Your saved search', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$jbbrd_current_user_saved_search = '';\n\t\t\t\t\t\t\tprint_r( '<span class=\"description\">' . __( 'Saved search not found', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* Checkbox to remove search. */\n\t\t\t\t\t\tif ( '' != $jbbrd_current_user_saved_search ) { ?>\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_candidate_saved_search_clear_checkbox\" name=\"jbbrd_candidate_saved_search_clear\" />\n\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_candidate_saved_search_clear_checkbox\"><?php _e( 'Clear current saved search', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t<?php }\n\t}\n}\n\n/**\n * Saving custom upload CV field to job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_cv_load_field' ) ) {\n\tfunction jbbrd_save_cv_load_field( $user_id ) {\n\t\tif ( ! current_user_can( 'edit_user', $user_id ) || ( FALSE == jbbrd_vacansy_response() ) ) {\n\t\t\treturn FALSE;\n\t\t}\n\t\t$_POST['action'] = 'wp_handle_upload';\n\t\t/* Set array of extention. */\n\t\t$jbbrd_cv_extention_array = array( 'txt', 'doc', 'docx', 'pdf' );\n\t\tif ( $_FILES['jbbrd_user_cv']['error'] === UPLOAD_ERR_OK ) {\n\t\t\t$jbbrd_cv = wp_handle_upload( $_FILES['jbbrd_user_cv'] );\n\t\t\tif ( $jbbrd_cv['error'] == '' ) {\n\t\t\t\tif ( in_array( pathinfo( $jbbrd_cv['file'], PATHINFO_EXTENSION ), $jbbrd_cv_extention_array ) ) {\n\t\t\t\t\tupdate_user_meta( $user_id, 'jbbrd_user_cv', $jbbrd_cv );\n\t\t\t\t} else {\n\t\t\t\t\t$notice[ $post_id ] .=  __( 'Failed to load CV: wrong file type. You can upload only DOC/DOCX, PDF or TXT document.', 'jbbrd' ) . '<br />';\n\t\t\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$notice[ $post_id ] .=  $jbbrd_cv['error'] . '<br />';\n\t\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\t}\n\t\t}\n\t\t/* Add category for search. */\n\t\t$jbbrd_job_category = $_POST['jbbrd_job_candidate_category_choose'];\n\t\tif ( ! isset( $_POST['jbbrd_candidate_category_clear'] ) ) {\n\t\t\tif ( isset( $jbbrd_job_category ) ) {\n\t\t\t\tupdate_user_meta( $user_id, 'jbbrd_job_candidate_category_choose', $jbbrd_job_category );\n\t\t\t}\n\t\t} else {\n\t\t\tupdate_user_meta( $user_id, 'jbbrd_job_candidate_category_choose', '' );\n\t\t}\n\t\t/* Clear CV if checkbox is checked. */\n\t\tif ( isset( $_POST['jbbrd_cv_clear'] ) && ( '' != $_POST['jbbrd_cv_clear'] ) ) {\n\t\t\t$jbbrd_cv = wp_handle_upload( $_FILES['jbbrd_user_cv'] );\n\t\t\tupdate_user_meta( $user_id, 'jbbrd_user_cv', $jbbrd_cv, get_user_meta( $user_id, 'jbbrd_user_cv', TRUE ) );\n\t\t}\n\t\t/* Clear candidate saved search if checkbox is checked. */\n\t\tif ( isset( $_POST['jbbrd_candidate_saved_search_clear'] ) && ( '' != $_POST['jbbrd_candidate_saved_search_clear'] ) ) {\n\t\t\tupdate_user_meta( $user_id, 'job_candidate_saved_search', '' );\n\t\t}\n\t}\n}\n\n/**\n * Saving custom upload CV field to job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_form_accept_uploads' ) ) {\n\tfunction jbbrd_form_accept_uploads() {\n\t\techo ' enctype=\"multipart/form-data\"';\n\t}\n}\n\n/**\n * Insert message to Sender database function.\n * @param $employer_id string owner of current vacancy ID\n * @param $subject string letter subject to send\n * @param $body string letter body to send\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_letter_to_sender_db' ) ) {\n\tfunction jbbrd_save_letter_to_sender_db( $employer_id, $subject, $body ) {\n\t\tglobal $wpdb;\n\t\t/* Prepare data. */\n\t\t// $subject\t \t= htmlspecialchars( stripslashes( $subject ) );\n\t\t// $subject \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $subject ) ) );\n\t\t// $body\t \t\t= htmlspecialchars( stripslashes( $body ) );\n\t\t// $body \t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $body ) ) );\n\t\t// $employer_id\t= htmlspecialchars( stripslashes( $employer_id ) );\n\t\t// $employer_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $employer_id ) ) );\n\t\t/* Save mail into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mail_send', \n\t\t\tarray( \n\t\t\t\t'subject'\t\t=> $subject, \n\t\t\t\t'body'\t\t\t=> $body,\n\t\t\t\t'date_create'\t=> time(),\n\t\t\t\t//'date_create'\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t)\n\t\t);\n\t\t$last_id = $wpdb->insert_id; /* Get last ID. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_users', \n\t\t\tarray( \n\t\t\t\t'id_user'\t\t=> $employer_id, \n\t\t\t\t'id_mail'\t\t=> $last_id,\n\t\t\t)\n\t\t);\n\t\t/*Activation Sendmail cron hook. */\n\t\tadd_filter( 'cron_schedules', 'sndr_more_reccurences' );\n\t\tif ( ! wp_next_scheduled( 'sndr_mail_hook' ) ) {\n\t\t\t$check = wp_schedule_event( time(), 'my_period', 'sndr_mail_hook' );\n\t\t}\n\t}\n}\n\n/**\n * Insert message to Sender-pro database function.\n * @param $employer_id string owner of current vacancy ID\n * @param $subject string letter subject to send\n * @param $body string letter body to send\n * @param $candidate_id string of current user ID\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_letter_to_sender_pro_db' ) ) {\n\tfunction jbbrd_save_letter_to_sender_pro_db( $employer_id, $subject, $body, $candidate_id ) {\n\t\tglobal $wpdb;\n\t\t/* Prepare data. */\n\t\t$subject\t \t= htmlspecialchars( stripslashes( $subject ) );\n\t\t$subject \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $subject ) ) );\n\t\t$body\t \t\t= htmlspecialchars( stripslashes( $body ) );\n\t\t$body \t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $body ) ) );\n\t\t$employer_id\t= htmlspecialchars( stripslashes( $employer_id ) );\n\t\t$employer_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $employer_id ) ) );\n\t\t$candidate_id\t= htmlspecialchars( stripslashes( $candidate_id ) );\n\t\t$candidate_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $candidate_id ) ) );\n\t\t/* Save mail into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mail_send', \n\t\t\tarray( \n\t\t\t\t'subject'\t\t\t=> $subject, \n\t\t\t\t'body'\t\t\t\t=> $body,\n\t\t\t\t'date_create'\t\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t\t'secret_key'\t\t=> MD5(RAND()),\n\t\t\t)\n\t\t);\n\t\t/* Get last ID. */\n\t\t$mail_id = $wpdb->insert_id; \n\t\t/* Get user into database. */\n\t\t$user_id = $employer_id; \n\t\t/* Save user into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mailout', \n\t\t\tarray( \n\t\t\t\t'mail_id'\t\t\t=> $mail_id,\n\t\t\t\t'from_name'\t\t\t=> get_userdata( $candidate_id )->user_login, \n\t\t\t\t'from_email'\t\t=> get_userdata( $candidate_id )->user_email,\n\t\t\t\t'mailout_create'\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t\t'mailout_start'\t\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t)\n\t\t);\n\t\t/* Get last ID. */\n\t\t$mailout_id = $wpdb->insert_id;\n\t\t/* Save user into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_users', \n\t\t\tarray( \n\t\t\t\t'id_user'\t\t\t=> $user_id,\n\t\t\t\t'id_mail'\t\t\t=> $mail_id,\n\t\t\t\t'id_mailout'\t\t=> $mailout_id,\n\t\t\t)\n\t\t);\n\t\t/*Activation Sendmail cron hook. */\n\t\tadd_filter( 'cron_schedules', 'sndrpr_more_reccurences' );\n\t\tif ( ! wp_next_scheduled( 'sndrpr_mail_hook' ) ) {\n\t\t\t$check = wp_schedule_event( time(), 'my_period', 'sndrpr_mail_hook' );\n\t\t}\n\t}\n}\n\n/**\n * Display an array of category taxonomy slugs you want to filter in frontend.\n * @return $terms array() objects jbbrd_businesses per taxonomy.\n */\nif ( ! function_exists( 'jbbrd_restrict_manage_posts_frontend' ) ) {\n\tfunction jbbrd_restrict_manage_posts_frontend() { \n\t\t$filters = array( 'jbbrd_businesses' );\n\t\tforeach ( $filters as $tax_slug ) {\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\treturn $terms;\n\t\t}\n\t}\n}\n\n/**\n * Display an array of employment category taxonomy slugs you want to filter in frontend.\n * @return $terms array() objects jbbrd_employment per taxonomy.\n */\nif ( ! function_exists( 'jbbrd_employment_restrict_manage_posts_frontend' ) ) {\n\tfunction jbbrd_employment_restrict_manage_posts_frontend() { \n\t\t$filters = array( 'jbbrd_employment' );\n\t\tforeach ( $filters as $tax_slug ) {\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\treturn $terms;\n\t\t}\n\t}\n}\n\n\n/**\n * Action plugin links function.\n * @param $links string\n * @param $file string\n * @return list of links\n */\nif ( ! function_exists( 'jbbrd_plugin_action_links' ) ) {\n\tfunction jbbrd_plugin_action_links( $links, $file ) {\n\t\t/* Static so we don't call plugin_basename on every plugin row. */\n\t\tstatic $this_plugin;\n\t\tif ( ! $this_plugin )\n\t\t\t$this_plugin = plugin_basename(__FILE__);\n\n\t\tif ( $file == $this_plugin ) {\n\t\t\t$settings_link = '<a href=\"admin.php?page=job-board.php\">' . __( 'Settings', 'jbbrd' ) . '</a>';\n\t\t\tarray_unshift( $links, $settings_link );\n\t\t}\n\t\treturn $links;\n\t}\n}\n\n/**\n * Register plugin links function.\n * @return $links array().\n */\nif ( ! function_exists( 'jbbrd_register_plugin_links' ) ) {\n\tfunction jbbrd_register_plugin_links( $links, $file ) {\n\t\t$base = plugin_basename( __FILE__ );\n\t\tif ( $file == $base ) {\n\t\t\t$links[]\t=\t'<a href=\"admin.php?page=job-board.php\">' . __( 'Settings', 'jbbrd' ) . '</a>';\n\t\t\t$links[]\t=\t'<a href=\"http://wordpress.org/plugins/job-board/faq/\" target=\"_blank\">' . __( 'FAQ', 'jbbrd' ) . '</a>';\n\t\t\t$links[]\t=\t'<a href=\"http://support.bestwebsoft.com\">' . __( 'Support', 'jbbrd' ) . '</a>';\n\t\t}\n\t\treturn $links;\n\t}\n}\n\n/**\n * Function to check is current user are 'job_candidate'.\n * @return bool\n */\nif ( ! function_exists( 'jbbrd_vacansy_response' ) ) {\n\tfunction jbbrd_vacansy_response() { \n\t\tglobal $wpdb;\n\t\t$user = get_current_user_id();\n\t\t$job_candidate = like_escape( 'job_candidate' );\n\t\t$job_candidate = esc_sql( $job_candidate );\n\t\t$job_candidate = '%' . $job_candidate . '%';\n\t\t/* Get subscribers list. */\n\t\t$jbbrd_user_id_find = $wpdb->get_results( \"\n\t\t\tSELECT umt.`user_id`\n\t\t\tFROM `\" . $wpdb->prefix . \"usermeta` as umt\n\t\t\tWHERE umt.`meta_key` = 'wp_capabilities'\n\t\t\tAND umt.`meta_value` LIKE '%job_candidate%'\n\t\t\", ARRAY_N);\n\t\t/* If current user is 'job_candidate' return TRUE */\n\t\tforeach ( $jbbrd_user_id_find as $key => $value ) {\n\t\t\tif ( ( $user == $value[0] ) || is_admin() ) {\n\t\t\t\treturn TRUE;\n\t\t\t}\n\t\t}\n\t\treturn FALSE;\n\t}\n}\n\n/**\n * Get salary array.\n * @return $jbbrd_salary_find_modified array() salary array.\n */\nif ( ! function_exists( 'jbbrd_salary_find' ) ) {\n\tfunction jbbrd_salary_find() { \n\t\tglobal $wpdb;\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\" ;\n\t\t$post_table \t\t\t\t= $wpdb->prefix . \"posts\" ;\n\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t/* Get subscribers list. */\n\t\t$jbbrd_salary_find = $wpdb->get_results( \"\n\t\t\tSELECT DISTINCT `meta_value`\n\t\t\tFROM `\" . $postmeta_table . \"` as pmt\n\t\t\tJOIN `\" . $post_table . \"` AS pt ON (pmt.`post_id` = pt.`ID`\n\t\t\t\tAND pt.`post_type` = 'vacancy'\n\t\t\t\tAND pt.`post_status` = 'publish')\n\t\t\tJOIN `\" . $term_relationships_table . \"` AS trt ON pt.`ID` = trt.`object_id`\n\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON trt.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\tJOIN `\" . $terms_table . \"` AS tt ON (ttt.`term_id` = tt.`term_id`\n\t\t\t\tAND tt.`slug` = 'posted' )\n\t\t\tAND pmt.`meta_key` = 'salary'\n\t\t\", ARRAY_A);\n\t\t$jbbrd_salary_find_modified = array();\n\t\tforeach ( $jbbrd_salary_find as $array_key => $array_value ) {\n\t\t\tforeach ( $array_value as $key => $value ) {\n\t\t\t\t$jbbrd_salary_find_modified[] = $value;\n\t\t\t}\n\t\t}\n\t\treturn $jbbrd_salary_find_modified;\n\t}\n}\n\n/**\n * Change vacancy CPT link returned by CPTsearch BWS Plugin.\n * @return $url string modified url.\n */\nfunction jbbrd_append_vacancy_permalink( $url, $post ) {\n\tglobal $jbbrd_options;\n\tif ( ! ( is_admin() ) && ( 'vacancy' == get_post_type( $post ) ) ) {\n\t\t$jbbrd_link = esc_url( $jbbrd_options['jbbrd_shortcode_permalink'] );\n\t\t$url = $jbbrd_link . '&vacancy_id=' . get_the_ID();\n\t}\n\treturn $url;\n}\n\n/**\n * Hide logo image when search results displayed.\n * @return void\n */\nfunction jbbrd_logo_search_hide() {\n\tglobal $jbbrd_options;\n\tif ( ! ( is_admin() ) && ( isset( $_GET['s'] ) ) ) { ?>\n\t\t<style type=\"text/css\">\n\t\t\t.vacancy img { /* Set custom header background */\n\t\t\t\tdisplay: none !important; \n\t\t\t}\n\t\t</style>\n\t<?php }\n}\n\n/**\n * Function get salary from mixed string.\n * @param mixed salary string\n * @return string maximum digit in salary\n */\nif ( ! function_exists( 'jbbrd_get_salary' ) ) {\n\tfunction jbbrd_get_salary( $jbbrd_salary_string ) { \n\t\t$jbbrd_salary_string = esc_html( $jbbrd_salary_string );\n\t\t$pattern = '[\\D+]';\n\t\t$jbbrd_nums_array = preg_split( $pattern , $jbbrd_salary_string );\n\t\treturn max( $jbbrd_nums_array );\n\t}\n}\n\nif ( ! function_exists( 'jbbrd_sendmail_session_check' ) ) {\n\tfunction jbbrd_sendmail_session_check() { \n\t\tif ( isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t$_SESSION['jbbrd_send_cv'] = 1;\n\t\t\treturn 1;\n\t\t} else {\n\t\t\t$_SESSION['jbbrd_send_cv'] = 0;\n\t\t\treturn 0;\n\t\t}\n\t}\n}\n\n/**\n * Function to display frontend by shortcode [jbbrd_vacancy].\n * @return shortcode frontend content string\n */\nif ( ! function_exists( 'jbbrd_vacancy_shortcode' ) ) {\n\tfunction jbbrd_vacancy_shortcode() { \n\t\tglobal $wp_query, $jbbrd_options, $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t/* Get sender-pro plugin options. */\n\t\t$sndrpr_options = get_option( 'sndrpr_options' );\n\t\tinclude_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\t\t$jbbrd_location_array = jbbrd_find_location_metabox_fields();\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t/* Find maximum and minimum salary. */\n\t\t$jbbrd_salary_array = jbbrd_salary_find();\n\t\tif ( isset( $jbbrd_salary_array[0] ) ) {\n\t\t\t$jbbrd_salary_min = min( jbbrd_salary_find() );\n\t\t\t$jbbrd_salary_max = max( jbbrd_salary_find() );\n\t\t} else {\n\t\t\t$jbbrd_salary_min = $jbbrd_salary_max = 0;\n\t\t}\n\t\t/* Clear posible vulnerabilities of variable input. */\n\t\t$jbbrd_get_search_period \t\t= isset( $_GET['search_period'] ) ? htmlspecialchars( stripslashes( $_GET['search_period'] ) ) : \"\";\n\t\t$jbbrd_get_category \t\t\t= isset( $_GET['category'] ) ? htmlspecialchars( stripslashes( $_GET['category'] ) ) : \"\";\n\t\t$jbbrd_get_employment_category \t= isset( $_GET['employment_category'] ) ? htmlspecialchars( stripslashes( $_GET['employment_category'] ) ) : \"\";\n\t\t$jbbrd_get_location\t \t\t\t= isset( $_GET['jbbrd_location'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_location'] ) ) : \"\";\n\t\t$jbbrd_get_organization\t \t\t= isset( $_GET['jbbrd_organization'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_organization'] ) ) : \"\";\n\t\t$jbbrd_get_salary_from\t \t\t= isset( $_GET['jbbrd_salary_from'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_salary_from'] ) ) : \"\";\n\t\t$jbbrd_get_salary_to\t \t\t= isset( $_GET['jbbrd_salary_to'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_salary_to'] ) ) : \"\";\n\t\t$jbbrd_get_vacancy_id\t \t\t= isset( $_GET['vacancy_id'] ) ? htmlspecialchars( stripslashes( $_GET['vacancy_id'] ) ) : \"\";\n\n\t\t$jbbrd_get_search_period \t\t= $_GET['search_period'] \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_search_period ) ) );\n\t\t$jbbrd_get_category \t\t\t= $_GET['category']\t\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_category ) ) );\n\t\t$jbbrd_get_employment_category\t= $_GET['employment_category'] \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_employment_category ) ) );\n\t\t$jbbrd_get_location\t\t\t\t= $_GET['jbbrd_location'] \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_location ) ) );\n\t\t$jbbrd_get_organization\t\t\t= $_GET['jbbrd_organization']\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_organization ) ) );\n\t\t$jbbrd_get_salary_from\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_salary_from ) ) );\n\t\t$jbbrd_get_salary_to\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_salary_to ) ) );\n\t\t$jbbrd_get_vacancy_id\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_vacancy_id ) ) );\n\t\t/* Set array of search time select. */\n\t\t$jbbrd_vacancy_search_period = array( \n\t\t\t3\t\t=> __( 'Last 3 days', 'jbbrd' ),\n\t\t\t7 \t\t=> __( 'Last week', 'jbbrd' ),\n\t\t\t30\t\t=> __( 'Last month', 'jbbrd' ),\n\t\t);\n\t\t/* If time period exist set time period query. */\n\t\tif ( isset( $jbbrd_get_search_period ) && ( '' != $jbbrd_get_search_period ) ) {\n\t\t\t$jbbrd_search_period_cond = array(\n\t\t\t\t'column' => 'post_modified_gmt',\n\t\t\t\t'after'  => $jbbrd_get_search_period . ' day ago',\n\t\t\t);\t\n\t\t} else {\n\t\t\t$jbbrd_search_period_cond = '';\n\t\t}\n\t\t/* If category exist set search by this category. */\n\t\tif ( isset( $jbbrd_get_category ) && ( '' != $jbbrd_get_category ) ) {\n\t\t\t$jbbrd_businesses_search_categories = array(\n\t\t\t\t'taxonomy'\t=> 'jbbrd_businesses',\n\t\t\t\t'field'\t\t=> 'slug',\n\t\t\t\t'terms'\t\t=> $jbbrd_get_category,\n\t\t\t);\n\t\t} else {\n\t\t\t$jbbrd_businesses_search_categories = '';\n\t\t}\n\t\t/* If employment category exist set search by this category. */\n\t\tif ( isset( $jbbrd_get_employment_category ) && ( '' != $jbbrd_get_employment_category ) ) {\n\t\t\t$jbbrd_employment_search_categories = array(\n\t\t\t\t'taxonomy'\t=> 'jbbrd_employment',\n\t\t\t\t'field'\t\t=> 'slug',\n\t\t\t\t'terms'\t\t=> $jbbrd_get_employment_category,\n\t\t\t);\n\t\t} else\n\t\t\t$jbbrd_employment_search_categories = '';\n\t\t\n\t\t$jbbrd_search_categories = array(\n\t\t\t$jbbrd_businesses_search_categories,\n\t\t\t$jbbrd_employment_search_categories,\n\t\t);\n\t\t/* Set wp_query conditions for frontend form search. */\n\t\tif ( isset( $jbbrd_get_location ) && ( '' != $jbbrd_get_location ) ) \n\t\t\t$jbbrd_location_cond = array( \n\t\t\t\t'key'\t\t=> 'jbbrd_location', \n\t\t\t\t'value'\t\t=> $jbbrd_get_location, \n\t\t\t\t'compare'\t=> 'LIKE', \n\t\t\t);\n\t\telse\n\t\t\t$jbbrd_location_cond = '';\n\t\t\n\t\tif ( isset( $jbbrd_get_organization ) && ( '' != $jbbrd_get_organization ) ) \n\t\t\t$jbbrd_organization_cond = array( \n\t\t\t\t'key'\t\t=> 'jbbrd_organization', \n\t\t\t\t'value'\t\t=> $jbbrd_get_organization,\n\t\t\t\t'compare'\t=> 'LIKE', \n\t\t\t);\n\t\telse\n\t\t\t$jbbrd_organization_cond = '';\n\t\t\n\t\tif ( isset( $jbbrd_get_salary_from ) && ( '' != $jbbrd_get_salary_from ) ) \n\t\t\t$jbbrd_salary_from_cond = array( \n\t\t\t\t'key' \t\t=> 'salary', \n\t\t\t\t'value' \t=> jbbrd_get_salary( $jbbrd_get_salary_from ),\n\t\t\t\t'compare' \t=> '>=', \n\t\t\t\t'type' \t\t=> 'numeric',);\n\t\telse\n\t\t\t$jbbrd_salary_from_cond = '';\n\n\t\tif ( isset( $jbbrd_get_salary_to ) && ( '' != $jbbrd_get_salary_to ) ) \n\t\t\t$jbbrd_salary_to_cond = array( \n\t\t\t\t'key' \t\t=> 'salary', \n\t\t\t\t'value' \t=> jbbrd_get_salary( $jbbrd_get_salary_to ), \n\t\t\t\t'compare' \t=> '<=', \n\t\t\t\t'type' \t\t=> 'numeric',);\n\t\telse\n\t\t\t$jbbrd_salary_to_cond = '';\n\n\t\t/* If get ID - set id search condition. */\n\t\tif ( isset( $jbbrd_get_vacancy_id ) && ( '' != $jbbrd_get_vacancy_id ) ) \n\t\t\t$jbbrd_title_search_cond = $jbbrd_get_vacancy_id;\n\t\telse\n\t\t\t$jbbrd_title_search_cond = '';\n\t\t/* Add parameters for output posts. */\t\t\n\t\t$args = array(\n\t\t\t'post_type'\t\t\t\t=> 'vacancy',\n\t\t\t'p'\t\t\t\t\t\t=> $jbbrd_title_search_cond,\t\t\n\t\t\t'tax_query' \t\t\t=> $jbbrd_search_categories,\n\t\t\t'ignore_sticky_posts'\t=> TRUE,\n\t\t\t'paged' \t\t\t\t=> get_query_var( 'paged' ), \n\t\t\t'posts_per_page'\t\t=> $jbbrd_options['post_per_page'],\n\t\t\t'archive' \t\t\t\t=> 'Posted',\n\t\t\t'orderby'\t\t\t\t=> 'post_date',\n\t\t\t'order'\t\t\t\t\t=> 'DESC',\n\t\t\t/* Forming meta querry. */\n\t\t\t'meta_query'\t\t\t=>\tarray(\n\t\t\t\t'relation' \t=> 'AND', \n\t\t\t\t$jbbrd_location_cond,\n\t\t\t\t$jbbrd_organization_cond,\n\t\t\t\t$jbbrd_salary_from_cond,\n\t\t\t\t$jbbrd_salary_to_cond,\n\t\t\t),\n\t\t\t'date_query' => array(\n\t\t\t\t$jbbrd_search_period_cond,\n\t\t\t),\n\t\t);\n\t\t$wp_query = new WP_Query( $args );\n\t\t$jbbrd_content = '';\n\t\t/* Print form fo sorting jobs in frontend if user logged. */\n\t\tif ( is_user_logged_in() && ( current_user_can( 'read_private_vacancies', get_current_user_id() ) ) ) { \n\t\t\t/* Add to table of response if submit. */\n\t\t\tif ( isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t\t/* Move mail from job candidate to Sender plugin DB. */\n\t\t\t\t$jbbrd_sendmail_error = '';\n\t\t\t\t$jbbrd_current_employer_id \t\t= esc_html( $_POST['jbbrd_frontend_submit_post_email'] );\n\t\t\t\tif ( empty( $jbbrd_current_employer_id ) ) {\n\t\t\t\t\t$jbbrd_sendmail_error = __( 'Error: Vacancy author not found. The message has not been sent.', 'jbbrd' );\n\t\t\t\t}\n\t\t\t\tif ( '' == $jbbrd_sendmail_error ) {\n\t\t\t\t\t$jbbrd_current_employer_email \t= get_userdata( $jbbrd_current_employer_id );\n\t\t\t\t\t$jbbrd_current_employer_email \t= $jbbrd_current_employer_email->user_email; \n\t\t\t\t\t$jbbrd_current_vacancy_id\t\t= esc_html( $_POST['jbbrd_frontend_submit_post_id'] );\n\t\t\t\t\t$jbbrd_current_candidate \t\t= get_current_user_id();\n\t\t\t\t\t$jbbrd_current_candidate_cv \t= get_user_meta( $jbbrd_current_candidate, 'jbbrd_user_cv', TRUE ); \n\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv['url'] ) ) {\n\t\t\t\t\t\t$jbbrd_current_candidate_cv = $jbbrd_current_candidate_cv['url'];\n\t\t\t\t\t} \n\t\t\t\t\t/* Forming message. */\n\t\t\t\t\tif ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) {\n\t\t\t\t\t\tif ( ( isset( $sndrpr_options['html_email'] ) ) && ( 1 == $sndrpr_options['html_email'] ) ) {\n\t\t\t\t\t\t\t$jbbrd_message = '<div style=\"width:600px;padding:20px 30px;border:1px solid #e0e0e0;background:#fff;\"><h2 style=\"color:#6495ED;line-height:11px;\">' . __( 'Hello,', 'jbbrd' ) . '&nbsp;' . get_userdata( $jbbrd_current_employer_id )->user_login . '</h2>'; \n\t\t\t\t\t\t\t$jbbrd_message .= '<h4 style=\"font-weight:normal;\">' . __( 'You receive message for your job offer:', 'jbbrd' ) . '&nbsp;<strong>' . get_the_title( $jbbrd_current_vacancy_id ) . '</strong><br />';\n\t\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . '&nbsp;<strong>' . get_userdata( $jbbrd_current_candidate )->user_login . '</strong></h4>';\n\t\t\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv ) && ( '' != $jbbrd_current_candidate_cv ) ) {\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = pathinfo( $jbbrd_current_candidate_cv );\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = $jbbrd_current_candidate_cv_filename['basename'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_message .= sprintf( '<h4 style=\"font-weight:normal;\">' . __( 'Candidate CV:', 'jbbrd' ) . '&nbsp;' . ( ( '' != $jbbrd_current_candidate_cv ) ? '<a style=\"color:#6495ED;text-decoration:none;line-height:11px;\" href=\"' . $jbbrd_current_candidate_cv . '\">' . $jbbrd_current_candidate_cv_filename . '</a>' : __( '...sorry, CV not found.', 'jbbrd' ) ) . '</h4>');\n\t\t\t\t\t\t\t$jbbrd_message .= '<hr style=\"border-width:0;border-bottom:solid 1px #e0e0e0;\" />';\n\t\t\t\t\t\t\t$jbbrd_message .= sprintf( __( 'This mail was sent by %sJob board%s plugin by %sBestWebSoft%s from', 'jbbrd' ) . '&nbsp;<a  href=\"' . esc_url( get_bloginfo( 'url' ) ) . '\">' . get_bloginfo( 'name' ) . '</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/job-board/' ) . '\">' ),'</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/' ) . '\">' ),'</a>' );\n\t\t\t\t\t\t\t$jbbrd_message .= '</div>';\n\t\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$jbbrd_message = __( 'Hello,', 'jbbrd' ) . ' ' . get_userdata( $jbbrd_current_employer_id )->user_login . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'You receive message for your job offer:', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . ' ' . get_userdata( $jbbrd_current_candidate )->user_login . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'Candidate CV:', 'jbbrd' ) . ' ' . $jbbrd_current_candidate_cv . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'This mail was sent by Job board plugin by BestWebSoft from', 'jbbrd' ) . ' ' . get_bloginfo( 'name' ) . '.';\n\t\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$jbbrd_message = '<div style=\"width:600px;padding:20px 30px;border:1px solid #e0e0e0;background:#fff;\"><h2 style=\"color:#6495ED;line-height:11px;\">' . __( 'Hello,', 'jbbrd' ) . '&nbsp;' . get_userdata( $jbbrd_current_employer_id )->user_login . '</h2>'; \n\t\t\t\t\t\t$jbbrd_message .= '<h4 style=\"font-weight:normal;\">' . __( 'You receive message for your job offer:', 'jbbrd' ) . '&nbsp;<strong>' . get_the_title( $jbbrd_current_vacancy_id ) . '</strong><br />';\n\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . '&nbsp;<strong>' . get_userdata( $jbbrd_current_candidate )->user_login . '</strong></h4>';\n\t\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv ) && ( '' != $jbbrd_current_candidate_cv ) ) {\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = pathinfo( $jbbrd_current_candidate_cv );\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = $jbbrd_current_candidate_cv_filename['basename'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$jbbrd_message .= sprintf( '<h4 style=\"font-weight:normal;\">' . __( 'Candidate CV:', 'jbbrd' ) . '&nbsp;' . ( ( '' != $jbbrd_current_candidate_cv ) ? '<a style=\"color:#6495ED;text-decoration:none;line-height:11px;\" href=\"' . $jbbrd_current_candidate_cv . '\">' . $jbbrd_current_candidate_cv_filename . '</a>' : __( '...sorry, CV not found.', 'jbbrd' ) ) . '</h4>');\n\t\t\t\t\t\t$jbbrd_message .= '<hr style=\"border-width:0;border-bottom:solid 1px #e0e0e0;\" />';\n\t\t\t\t\t\t$jbbrd_message .= sprintf( __( 'This mail was sent by %sJob board%s plugin by %sBestWebSoft%s from', 'jbbrd' ) . '&nbsp;<a  href=\"' . esc_url( get_bloginfo( 'url' ) ) . '\">' . get_bloginfo( 'name' ) . '</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/job-board/' ) . '\">' ),'</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/' ) . '\">' ),'</a>' );\n\t\t\t\t\t\t$jbbrd_message .= '</div>';\n\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t}\n\t\t\t\t\t/* Sendmail by Email-query if active. Else use sendmail function due Sender. */\n\t\t\t\t\tif ( 0 == $_SESSION['jbbrd_send_cv'] ) {\n\t\t\t\t\t\t/* Set session var for submit only once. */\n\t\t\t\t\t\t$_SESSION['jbbrd_send_cv'] = 1;\n\t\t\t\t\t\tif ( is_plugin_active( 'email-queue/email-queue.php' ) ) {\n\t\t\t\t\t\t\tmlq_add_extra_plugin_to_mail_queue( array(\n\t\t\t\t\t\t\t\t'plugin_name'\t\t\t=> 'Job board', \n\t\t\t\t\t\t\t\t'plugin_slug' \t\t\t=> 'job-board',\n\t\t\t\t\t\t\t\t'plugin_link'\t\t\t=> plugin_basename( __FILE__ ),\n\t\t\t\t\t\t\t\t'install_link'\t\t\t=> '/wp-admin/plugin-install.php?tab=search&s=Job+Board+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t\t\t\t) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( is_plugin_active( 'email-queue/email-queue.php' ) && mlq_if_mail_plugin_is_in_queue( plugin_basename( __FILE__ ) ) ) {\n\t\t\t\t\t\t\tmlq_get_mail_data_for_email_queue_and_save( plugin_basename( __FILE__ ), $jbbrd_current_employer_email, $jbbrd_subject, $jbbrd_message );\n\t\t\t\t\t\t} \n\t\t\t\t\t\telseif ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) {\n\t\t\t\t\t\t\tjbbrd_save_letter_to_sender_pro_db( $jbbrd_current_employer_id, $jbbrd_subject, $jbbrd_message, $jbbrd_current_candidate );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjbbrd_save_letter_to_sender_db( $jbbrd_current_employer_id, $jbbrd_subject, $jbbrd_message );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . stripslashes( $jbbrd_options['vacancy_reply_text'] ) . '</h3>';\n\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_form_back\" value=\"submit\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_sendmail_form_back\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Back to jobs', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . $jbbrd_sendmail_error . '</h3>';\n\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_form_back\" value=\"submit\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_sendmail_form_back\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Back to jobs', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Check $_SESSION status. */\n\t\t\t$_SESSION['jbbrd_send_cv'] = jbbrd_sendmail_session_check();\n\t\t\t/* If no send CV button. */\n\t\t\tif ( ! isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t\tif ( ( ! isset( $_GET['vacancy_id'] ) ) || ( isset( $_GET['vacancy_id'] ) && ( ! ( $wp_query->have_posts() ) ) )    ) {\n\t\t\t\t/* Print form fo sorting jobs in frontend. */\n\t\t\t\t\t/* Frontend sorting form. */\n\t\t\t\t\tif ( isset( $jbbrd_options['frontend_form'] ) && ( 1 == $jbbrd_options['frontend_form'] ) ) { \n\t\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . __( 'Add parameters to sorting jobs', 'jbbrd' ) . '</h3>';\n\t\t\t\t\t}\n\t\t\t\t\t/* Save query search results form button. */\n\t\t\t\t\tif ( ( isset( $_GET['jbbrd_frontend_form'] ) ) && is_user_logged_in() && ( ( FALSE != jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<form id=\"jbbrd_frontend_save_query_results\" method=\"post\" action=\"\">\n\t\t\t\t\t\t\t<table id=\"jbbrd_frontend_table_savesearch_box\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>';\n\t\t\t\t\t\t\t\t\t\tif ( isset( $_POST['jbbrd_frontend_save_query_results'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<h4>' . __( 'Search results saved.', 'jbbrd' ) . '</h4>';\n\t\t\t\t\t\t\t\t\t\t\t/* Save query results to candidate profile. */\n\t\t\t\t\t\t\t\t\t\t\t$user_id = get_current_user_id();\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_search_args_array = $_GET;\n\t\t\t\t\t\t\t\t\t\t\tupdate_user_meta( $user_id, 'job_candidate_saved_search', $jbbrd_search_args_array );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_save_query_results\" value=\"submit\" />\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"float:left;margin:0 5px 0 0;\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Save search results', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</td>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</form>';\n\t\t\t\t\t}\n\t\t\t\t\t/* Frontend sorting form. */\n\t\t\t\t\tif ( isset( $jbbrd_options['frontend_form'] ) && ( 1 == $jbbrd_options['frontend_form'] ) ) { \n\t\t\t\t\t\t$jbbrd_content .= '<form id=\"jbbrd_frontend_form\" method=\"get\" action=\"';\n\t\t\t\t\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$jbbrd_content .= '\">\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"page_id\" value=\"' . get_the_ID() . '\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Location:', 'jbbrd' ) . '</label>';\n\t\t\t\t\t\t\t\t\t\t\t\tif ( 1 == $jbbrd_options['location_select'] ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"jbbrd_location\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all locations', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( $jbbrd_location_array as $key => $current_location ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"' . $current_location . '\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_location ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( $current_location == $jbbrd_get_location ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\">' . $current_location . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>';\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .=\t'<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_location\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_location ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_location; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />';\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Select category:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"category\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all categories', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( jbbrd_restrict_manage_posts_frontend() as $term ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_POST to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $term->slug;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_category ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_category == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $term->name . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Employment:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"employment_category\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all employments', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( jbbrd_employment_restrict_manage_posts_frontend() as $term ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $term->slug;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_employment_category ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_employment_category == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $term->name . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Searching period:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for time period for modified vacancy date dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"search_period\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'All time', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( $jbbrd_vacancy_search_period as $key => $value ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $key;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['search_period'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $_GET['search_period'] == $key ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $value . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\n\t\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\n\t\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Organization:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_organization\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_organization ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_organization;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Salary:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"jbbrd_frontend_salary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_frontend_input_salary_from\" class=\"jbbrd_frontend_input\" name=\"jbbrd_salary_from\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_salary_min ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"position:relative;top:10px;\">' . __( 'to', 'jbbrd' ) . '</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_frontend_input_salary_to\" class=\"jbbrd_frontend_input\" name=\"jbbrd_salary_to\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_salary_max ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"clear\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( $jbbrd_salary_min != $jbbrd_salary_max ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"jbbrd_slider\" class=\"ui-corner-all\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"#jbbrd_slider\").slider({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: ';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax: ';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues: [';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trange: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstop: function(event, ui) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_from\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",0));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_to\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",1));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslide: function(event, ui){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_from\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",0));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_to\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",1));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</td><!-- .jbbrd_frontend_field -->\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\" style=\"padding-top:20px;\">\n\t\t\t\t\t\t\t\t\t\t\t</td><!-- .jbbrd_frontend_field -->\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t\t\t\t\t</div><!-- -->\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_form\" value=\"submit\" />\n\t\t\t\t\t\t\t<div style=\"\">\n\t\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t<input type=\"reset\" value=\"' . __( 'Reset', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Search', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form><!-- #jbbrd_frontend_form -->';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Print alert if no posts found. */\n\t\t\tif ( ! ( $wp_query->have_posts() ) ) {\n\t\t\t\t$jbbrd_content .= '<br /><h3>' . __( 'Nothing found.', 'jbbrd' ) . '</h3>';\n\t\t\t}\n\t\t}\n\t\tif ( ( $wp_query->have_posts() ) && ( ! isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) ) : /* check for existing posts with specified parameters*/ \n\t\t\twhile ( $wp_query->have_posts() ) : $wp_query->the_post(); \n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\t/* Common vacation page view.  */\n\t\t\t\t$jbbrd_content .= '\n\t\t\t\t<div class=\"jbbrd_vacancy\">\n\t\t\t\t\t<hr style=\"margin:15px 0 15px 0;\" />';\n\t\t\t\t\t/* Logo on left side. */\n\t\t\t\t\tif ( 'left' == $jbbrd_options['logo_position'] ) {\n\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t<h2 style=\"margin-bottom:0px;\">\n\t\t\t\t\t\t\t<a style=\"\" href=\"';\n\t\t\t\t\t\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_content .= '&vacancy_id=' . get_the_ID() . '\">';\n\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_title() . '\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<span style=\"font-size:0.8em;margin-top:0;margin-bottom:0;\"><strong>' . __( 'Posted:', 'jbbrd' ) . '</strong>&nbsp;' . get_the_date( 'j F, Y' ) . '</span>\n\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;width:100%;\">\n\t\t\t\t\t\t\t<div style=\"padding:0;\">';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && ( has_post_thumbnail() ) ) $jbbrd_content .= '<div style=\"margin:5px 10px 10px 0;float:left;\">' . get_the_post_thumbnail() . '</div>';\n\t\t\t\t\t\t\t\t$jbbrd_content .= '</div>\n\t\t\t\t\t\t\t<div style=\"padding:0;\">';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Organization:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_organization\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_location\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Location:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_location\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"salary\"][0] ) && ( '' != $jbbrd_custom[\"salary\"][0] ) ) { \n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Salary:', 'jbbrd') . '</strong>&nbsp;' . $jbbrd_custom[\"salary\"][0] . '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$jbbrd_content .= '</div>\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t}\n\t\t\t\t\t/* Logo on right side. */\n\t\t\t\t\tif ( 'right' == $jbbrd_options['logo_position'] ) { \n\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;width:100%;\">\n\t\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;\">\n\t\t\t\t\t\t\t\t<h2 style=\"margin-bottom:0px;\">\n\t\t\t\t\t\t\t\t\t<a style=\"\" href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_ID() . '\">';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_title()  . '\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<p style=\"font-size:0.8em;margin-top:0;margin-bottom:0;\"><strong>' . __( 'Posted:', 'jbbrd' ) . '</strong>&nbsp;' . get_the_date( 'j F, Y' ) . '</p>';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Organization:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_organization\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_location\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Location:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_location\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"salary\"][0] ) && ( '' != $jbbrd_custom[\"salary\"][0] ) ) { \n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Salary:', 'jbbrd') . '</strong>&nbsp;' . $jbbrd_custom[\"salary\"][0] . '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'] . '</p>'; \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && ( has_post_thumbnail() ) ) $jbbrd_content .= '<div style=\"margin:5px 0 10px 10px;float:right;\">' . get_the_post_thumbnail() . '</div>';\n\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t}\n\t\t\t\t\t/* Common vacation page view.  */\n\t\t\t\t\t$jbbrd_content .= '<div id=\"jbbrd_custom_post_' . get_the_ID() . '\" class=\"jbbrd_content\">';\n\t\t\t\t\t/* Show vacancy content if get vacancy ID, else show exerpts. */\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) ) \n\t\t\t\t\t\t$jbbrd_content .= '<p>' . get_the_content() . '</p>';\n\t\t\t\t\telse { \n\t\t\t\t\t\t/* Replaces the excerpt \"more\" text by a link. */\n\t\t\t\t\t\tadd_filter( 'excerpt_more', 'jbbrd_excerpt_more_link' );\n\t\t\t\t\t\t$jbbrd_content .= '<p>' . get_the_excerpt() . '</p>';\n\t\t\t\t\t} \n\t\t\t\t\t$jbbrd_content .= '</div><!-- .jbbrd_content -->';\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"employment\"][0] ) && ( '' != $jbbrd_custom[\"employment\"][0] ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Employment:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"employment\"][0] . '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"demands\"][0] ) && ( '' != $jbbrd_custom[\"demands\"][0] ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Requirements:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"demands\"][0] . '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tif ( is_user_logged_in() && ( ( FALSE != jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) && ( is_plugin_active( 'email-query/email_query.php' ) || is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) ) ) { \n\t\t\t\t\t\tif ( ( '' != $jbbrd_shortcode_permalink ) && ( isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) && ( $jbbrd_options['jbbrd_shortcode_permalink'] == $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_submit\" value=\"submit\" />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p style=\"margin:10px 0;\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"send\" value=\"' . __( 'Send CV', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_submit_post_email\" value=\"';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_id = 'ID';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_author_meta( $jbbrd_id );\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_submit_post_id\" value=\"' . get_the_ID() . '\" />\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/* Get link to edit vacancy if current user is admin or vacancy author (employer). */\n\t\t\t\t\tif ( ( is_user_logged_in() ) && ( current_user_can( 'activate_plugins', get_current_user_id() ) || ( get_the_author_meta('ID') == get_current_user_id() ) ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<a href=\"' . get_edit_post_link( get_the_ID() ) . '\">' . __( 'Edit job', 'jbbrd' ) . '</a>';\n\t\t\t\t\t}\n\t\t\t\t\t$jbbrd_content .= '</div><!-- .jbbrd_vacancy -->';\n\t\t\tendwhile;\n\t\t\twp_link_pages(); \n\t\t\t/* Add pagination. */\n\t\t\t$jbbrd_content .= jbbrd_vacancy_page_pagination();\n\t\tendif;\n\t\twp_reset_postdata();\n\t\twp_reset_query();\n\t\treturn $jbbrd_content;\n\t}\n}\n\n/* TEST */\nif ( ! function_exists( 'jbbrd_test' ) ) {\n\tfunction jbbrd_test() {\n\t\t$cntctfrm_result = isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ? true : false;\n\t\treturn $cntctfrm_result;\n\t}\n}\n\n/**\n * Function to display frontend by shortcode [jbbrd_registration].\n * @return shortcode login/registration form content string\n */\nif ( ! function_exists( 'jbbrd_registration_shortcode' ) ) {\n\tfunction jbbrd_registration_shortcode() {\n\t\tglobal $wpdb, $jbbrd_options;\n\t\t$jbbrd_register_form_content = $jbbrd_register_error = '';\n\t\t/* If user not logged or not admin/employer/job_candidate show login form */\n\t\tif ( ! is_user_logged_in() ) {\n\t\t\tif ( ! isset( $_POST['jbbrd_registration_request'] ) ) {\n\t\t\t\t/* Arguments for login form. */\n\t\t\t\t$args = array(\n\t\t\t\t\t'echo'\t\t\t\t=> FALSE,\n\t\t\t\t\t'redirect'\t\t\t=> site_url( $_SERVER['REQUEST_URI'] ), \n\t\t\t\t\t'form_id'\t\t\t=> 'jbbrd_loginform',\n\t\t\t\t\t'label_username'\t=> __( 'Username', 'jbbrd' ),\n\t\t\t\t\t'label_password'\t=> __( 'Password', 'jbbrd' ),\n\t\t\t\t\t'label_remember'\t=> __( 'Remember Me', 'jbbrd' ),\n\t\t\t\t\t'label_log_in'\t\t=> __( 'Log In', 'jbbrd' ),\n\t\t\t\t\t'id_username' \t\t=> 'user_login',\n\t\t\t\t\t'id_password'\t\t=> 'user_pass',\n\t\t\t\t\t'id_remember'\t\t=> 'rememberme',\n\t\t\t\t\t'id_submit'\t\t\t=> 'wp-submit',\n\t\t\t\t\t'remember'\t\t\t=> TRUE,\n\t\t\t\t\t'value_username'\t=> NULL,\n\t\t\t\t\t'value_remember'\t=> FALSE\n\t\t\t\t);\n\t\t\t\t$jbbrd_register_form_content .= wp_login_form( $args );\n\t\t\t\t$jbbrd_register_form_content .= \n\t\t\t\t'<form id=\"jbbrd_registration_request\" method=\"POST\">\n\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_registration_request\" value=\"submit\" />\n\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Registration', 'jbbrd' ) . '\" />\n\t\t\t\t</form>';\n\t\t\t} else {\n\t\t\t\tif ( ! isset( $_POST['jbbrd_frontend_registration_form'] ) ) {\n\t\t\t\t\t$jbbrd_register_form_content .= '<form id=\"jbbrd_registration_form\" method=\"POST\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Name:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_user_login\" value=\"\" />\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'E-mail:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_user_email\" value=\"\" />\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\" style=\"min-width:200px;\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'User role:', 'jbbrd' ) . '</label><br />';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"jbbrd_user_role\" value=\"employer\"';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '/>' . __( 'Employer', 'jbbrd' ) . '<br />\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"jbbrd_user_role\" value=\"job_candidate\"';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '/>' . __( 'Job candidate', 'jbbrd' ) . '\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t\t\t\t</div><!-- -->\n\t\t\t\t\t\t<div style=\"\">\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_registration_form\" value=\"submit\" />\n\t\t\t\t\t\t\t\t<input type=\"button\" onclick=\"clear_frontend_input()\" value=\"' . __( 'Clear', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Register', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_registration_request\" value=\"1\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t} else {\n\t\t\t\t\t/* Preparing user name and user email fields. */\n\t\t\t\t\t$user_name\t \t= isset( $_POST['jbbrd_user_login'] ) ? htmlspecialchars( stripslashes( trim( $_POST['jbbrd_user_login'] ) ) ) : \"\";\n\t\t\t\t\t$user_email \t= isset( $_POST['jbbrd_user_email'] ) ? trim( $_POST['jbbrd_user_email'] ) : \"\";\n\t\t\t\t\t$user_role\t \t= isset( $_POST['jbbrd_user_role'] ) ? htmlspecialchars( stripslashes( trim( $_POST['jbbrd_user_role'] ) ) ) : \"\";\n\n\t\t\t\t\t$user_name \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $user_name ) ) );\n\t\t\t\t\t$user_email\t \t= ( is_email( $user_email ) ) ? $user_email : \"\";\n\t\t\t\t\t$user_role \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $user_role ) ) );\n\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_name ) ? __( 'Wrong user name.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_email ) ? __( 'Wrong e-mail adress.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_role ) ? __( 'Role was not selected.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t/* Set errors if conditions are wrong. */\n\t\t\t\t\tif ( ( ! $jbbrd_register_error ) || ( '' == $jbbrd_register_error ) ) {\n\t\t\t\t\t\tif ( ( FALSE == username_exists( $user_name ) ) && ( FALSE == email_exists( $user_email ) ) ) {\n\t\t\t\t\t\t\t$random_password = wp_generate_password( $length = 12, $include_standard_special_chars = FALSE );\n\t\t\t\t\t\t\t/* Registered user args. */\n\t\t\t\t\t\t\t$userdata = array(\n\t\t\t\t\t\t\t\t'user_login'\t=> $user_name,\n\t\t\t\t\t\t\t\t'user_email'\t=> $user_email,\n\t\t\t\t\t\t\t\t'user_pass'\t\t=> $random_password, // When creating an user, `user_pass` is expected.\n\t\t\t\t\t\t\t\t'role'\t\t\t=> $user_role,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$user_id = wp_insert_user( $userdata );\n\t\t\t\t\t\t\t/* Send mail notification. */\n\t\t\t\t\t\t\twp_new_user_notification( $user_id, $random_password );\n\t\t\t\t\t\t\t$jbbrd_register_form_content .= __( \"Thank you for registering. Please check your email for password.\", 'jbbrd' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$jbbrd_register_form_content .= __( 'User already exists.  Password inherited.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$jbbrd_register_form_content .= $jbbrd_register_error . __( 'New user registration failed...', 'jbbrd' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( ! current_user_can( 'read_private_vacancies', get_current_user_id() ) ) {\n\t\t\t\t$jbbrd_register_form_content .= sprintf( __( 'Please %slogout%s and register/login as Employer or Job candidate for possibility to sort jobs and sending CV.', 'jbbrd' ), '<a href=\"' . wp_logout_url( get_permalink() ) . '\" title=\"' . __( 'Logout', 'jbbrd' ) . '\">', '</a>' );\n\t\t\t} else {\n\t\t\t\t$current_user = wp_get_current_user();\n\t\t\t\t$jbbrd_register_form_content .= sprintf( __( 'You are logged as %s.', 'jbbrd' ), '<strong>' . $current_user->user_login . '</strong>' );\n\t\t\t}\n\t\t}\n\treturn $jbbrd_register_form_content;\n\t}\n}\n\n/**\n * Replaces the excerpt \"more\" text by a link function.\n * @param $more string\n * @return string link to current vacancy post\n */\nif ( ! function_exists( 'jbbrd_excerpt_more_link' ) ) {\n\tfunction jbbrd_excerpt_more_link( $more ) {\n\t\tglobal $jbbrd_options;\n\t\t$jbbrd_exerpt_more = '...&nbsp;' . '<a style=\"\" href=\"';\n\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t$jbbrd_exerpt_more .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t}\n\t\t$jbbrd_exerpt_more .= '&vacancy_id=' . get_the_ID() . '\">' . __( 'Read more...', 'jbbrd' ) . '</a>'; \n\t\treturn $jbbrd_exerpt_more;\n\t}\n}\n\n/**\n * Set pagination on vacancy page function.\n * @return string of pagination links\n */\nif ( ! function_exists( 'jbbrd_vacancy_page_pagination' ) ) {\n\tfunction jbbrd_vacancy_page_pagination() {\n\t\tglobal $wp_query;\n\t\t$max = $wp_query->max_num_pages;\n\t\tif ( ! $pagecurrent = get_query_var( 'paged' ) )\n\t\t\t$pagecurrent = 1;\n\t\t$pages_array = array(\n\t\t\t'base' \t\t=> str_replace( 999999, '%#%', get_pagenum_link( 999999 ) ),\n\t\t\t'total' \t=> $max,\n\t\t\t'current' \t=> $pagecurrent,\n\t\t\t/* How many pages before and after current page. */\n\t\t\t'mid_size' \t=> 2,\n\t\t\t/* How many pages at start and at the end. */\n\t\t\t'end_size' \t=> 0, \n\t\t\t'prev_text' => '&laquo;', \n\t\t\t'next_text' => '&raquo;',\n\t\t);\n\t\tif ( $max > 1 )\n\t\t\treturn '<div style=\"margin:20px 0 -20px 0;\" class=\"page-navigation\">' . paginate_links( $pages_array ) . '</div>';\n\t}\n}\n\n/**\n * Print alert to edit.php page when shortcode error\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_error_to_vacancy_CPT_edit' ) ) {\n\tfunction jbbrd_add_error_to_vacancy_CPT_edit() {\n\t\tglobal $pagenow, $jbbrd_options;\n\t\t$error = \"\";\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( ( 'edit.php' == $pagenow ) && ( isset( $_GET['post_type'] ) ) && ( 'vacancy' == $_GET['post_type'] ) ) {\n\t\t\tif ( '' == $jbbrd_shortcode_permalink ) {\n\t\t\t\t$error .= '<strong>' . __( 'WARNING:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Shortcode is not found.', 'jbbrd' ) . '&nbsp;<br />' . __( 'Please place shortcode', 'jbbrd' ) . '&nbsp;<strong>[jbbrd_vacancy]</strong>&nbsp;' . __( 'to page or post and press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button on', 'jbbrd' ) . '&nbsp;' . '<a href=\"admin.php?page=job-board.php' . '\">' . __( 'settings page.', 'jbbrd' ) . '</a><br />';\n\t\t\t} else {\n\t\t\t\tif ( ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$error .= '<strong>' . __( 'WARNING:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Please press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button on', 'jbbrd' ) . '&nbsp;' . '<a href=\"admin.php?page=job-board.php' . '\">' . __( 'settings page', 'jbbrd' ) . '</a>&nbsp;' . __( 'for shortcode new place settings.', 'jbbrd' ) . '<br />';\n\t\t\t\t}\n\t\t\t} ?>\n\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><?php echo $error; ?></p></div>\n\t\t<?php }\n\t}\n}\n\n/**\n * Uninstall the Vacancy post type function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_plugin_uninstall' ) ) {\n\tfunction jbbrd_plugin_uninstall() {\n\t\tglobal $wpdb;\n\t\t$wpdb->delete( $wpdb->prefix . \"posts\", array( 'post_type' => 'vacancy' ) );\n\t\tdelete_option( 'jbbrd_options' );\n\t\tdelete_site_option( 'jbbrd_options' );\n\t\t/* Removing plugin roles. */\n\t\tremove_role( 'employer' );\n\t\tremove_role( 'job_candidate' );\n\t\t/* Remove Vacancy CPT admins capabilities. */\n\t\tjbbrd_remove_administrators_capabilities();\n\t}\n}\n\n/* Activate plugin. */\nregister_activation_hook( __FILE__, 'jbbrd_plugin_install' );\n/* Activate Job board settings page in admin menu. */\nadd_action( 'admin_menu', 'jbbrd_add_admin_menu' );\n/* Initiate the Vacancy post type. */\nadd_action( 'init', 'jbbrd_init' );\n/* Admin interface init. */\nadd_action( 'admin_init', 'jbbrd_admin_init' );\n/* Set admin error message on custom metafields error. */\nadd_action( 'admin_notices', 'jbbrd_metafields_error_admin_notice', 0 );\n/* Set JS scripts. */\nadd_action( 'admin_enqueue_scripts', 'jbbrd_load_scripts' );\nadd_action( 'wp_enqueue_scripts', 'jbbrd_load_scripts' );\n/* Update messages for vacancy CPT. */\nadd_filter( 'post_updated_messages', 'jbbrd_vacancy_updated_messages' );\n/* Set custom columns to \"vacancy\" custom post editor menu. */\nadd_action( 'manage_posts_custom_column', 'jbbrd_custom_columns' );\nadd_filter( 'manage_edit-vacancy_columns', 'jbbrd_edit_columns' );\n/* Making content columns. */\nadd_filter( 'manage_edit-vacancy_sortable_columns',  'jbbrd_sortable_columns' );\n/* Making content columns sortable. */\nadd_action( 'pre_get_posts', 'jbbrd_sortable_columns_orderby' );\n/* Add view action to title row on vacancy posts view. */\nadd_filter( 'post_row_actions', 'jbbrd_change_title_row_actions', 10, 1 );\n/* Add relative \"View\" node to admin menu. */\nadd_action( 'admin_bar_menu', 'jbbrd_add_relative_view', 999 );\n/* Remove standart \"View\" node from admin menu. */\nadd_action( 'admin_bar_menu', 'jbbrd_remove_view', 999 );\n/* Add filter for vacancy categories. */\nadd_action( 'restrict_manage_posts', 'jbbrd_restrict_manage_posts' );\n/* Add filter to enable job_candidate vacancy list in profile screen option */\nadd_filter( 'set-screen-option', 'jbbrd_candidate_table_set_option', 10, 3 );\n/* Add custom upload CV field to job_candidate profile page. */\nadd_action( 'show_user_profile', 'jbbrd_add_cv_load_field' );\nadd_action( 'edit_user_profile', 'jbbrd_add_cv_load_field' );\n/* Saving custom upload CV field to job_candidate profile page. */\nadd_action( 'personal_options_update', 'jbbrd_save_cv_load_field' );\nadd_action( 'edit_user_profile_update', 'jbbrd_save_cv_load_field' );\n/* Saving custom upload CV field to job_candidate profile page. */\nadd_action( 'user_edit_form_tag', 'jbbrd_form_accept_uploads' );\n/* Add shortcode for print vacancy posts. */\nadd_shortcode( 'jbbrd_vacancy', 'jbbrd_vacancy_shortcode' );\n/* Add shortcode for registration form. */\nadd_shortcode( 'jbbrd_registration', 'jbbrd_registration_shortcode' );\n/* Add filter for shortcode in text widget. */\nadd_filter( 'widget_text', 'do_shortcode' );\n/* Insert post hook. */\nadd_action( 'save_post', 'jbbrd_save_post', 10, 2);\n/* Set schedule hook for move to archieve function */\nadd_action( 'jbbrd_move_vacancies_to_archive_dayly_function', 'jbbrd_set_archive_status_function' );\n/* Add filter to vacancy CPT links. */\nadd_filter( 'post_type_link', 'jbbrd_append_vacancy_permalink', 10, 2 );\n/* Additional links on the plugin page. */\nadd_filter( 'plugin_action_links', 'jbbrd_plugin_action_links', 10, 2 );\nadd_filter( 'plugin_row_meta', 'jbbrd_register_plugin_links', 10, 2 );\n/* Uninstall plugin. Drop tables, delete options. */\nregister_uninstall_hook( __FILE__, 'jbbrd_plugin_uninstall' ); \n", "=== Job board ===\nContributors: bestwebsoft\nDonate link: https://www.2checkout.com/checkout/purchase?sid=1430388&quantity=1&product_id=94\nTags: plugin, wordpress, jobs, vacancy, job-manager, job-board, job, job offer, job bord, djob board, dgob bord, CV, upload CV, add job offer, apply for a job, vacancy application, job candidate role, manage vacancies, job offer list, save search conditions, job offer categories, search by job category, search by salary, search by organization, post job offer, vacancy archive.  \nRequires at least: 3.5\nTested up to: 3.9.1\nStable tag: 1.0.0\nLicense: GPLv3 or later\nLicense URI: http://www.gnu.org/licenses/gpl-3.0.html\n\nThe plugin allows to create a job-board page on your site.\n\n== Description ==\n\nThe plugin allows to create and post job-board posts as well as to change, sort and archive them. After inserting the short-code into the page, you will see all vacancies from a search form by categories, organizations, salary etc. The search form is available only after the user has been authorized as a candidate. The candidate is allowed to upload and submit a CV, select a category by which the list of vacant positions is formed for the last 24 hours and save the current search conditions to be used as a search template in future.\n\n<a href=\"http://wordpress.org/plugins/job-board/faq/\" target=\"_blank\">FAQ</a>\n<a href=\"http://support.bestwebsoft.com\" target=\"_blank\">Support</a>\n\n= Features =\n\n* Actions: Allows to add, edit, delete and categorize the vacancies.\n* Actions: Sorts and filters vacant positions - both in the admin panel and in the front-end.\n* Actions: Allows to apply for the vacancy (after registration).\n* Actions: Allows to save the search as a template for future use.\n* Actions: Allow the applicant to select a category and browse the vacancies in this category using in the admin panel.\n* Actions: Sends letters when you get an application for the vacancy.\n* Actions: Automatically places the vacancy to the archive after the expiration of the period which was set either by the administrator or by the author.\n* Actions: Allows the administrator to manage of how the vacancies page as well as vacancies in the front-end are displayed. \n* Actions: Allows to place the login/registration form to add users with Employer and Job candidate roles. \n\n= Translation =\n\n* Russian (ru_RU)\n* Ukrainian (uk)\n\nIf you would like to create your own language pack or update the existing one, you can send <a href=\"http://codex.wordpress.org/Translating_WordPress\" target=\"_blank\">the text of PO and MO files</a> for <a href=\"http://support.bestwebsoft.com\" target=\"_blank\">BestWebSoft</a> and we'll add it to the plugin. You can download the latest version of the program for work with PO and MO files <a href=\"http://www.poedit.net/download.php\" target=\"_blank\">Poedit</a>.\n\n= Technical support =\nDear users, our plugins are available for free download. If you have any questions or recommendations regarding the functionality of our plugins (existing options, new options, current issues), please feel free to contact us. Please note that we accept requests in English only. All messages in another languages won't be accepted.\nIf you notice any bugs in the plugin's work, you can notify us about it and we'll investigate and fix the issue then. Your request should contain URL of the website, issues description and WordPress admin panel credentials.\nMoreover we can customize the plugin according to your requirements. It's a paid service (as a rule it costs $40, but the price can vary depending on the amount of the necessary changes and their complexity). Please note that we could also include this or that feature (developed for you) in the next release and share with the other users then.\nWe can fix some things for free for the users who provide translation of our plugin into their native language (this should be a new translation of a certain plugin, you can check available translations on the official plugin page).\n\n== Installation == \n\n1. Upload the `job-board` folder to the `/wp-content/plugins/` directory.\n2. Activate the plugin using the 'Plugins' menu in your WordPress admin panel.\n3. You can adjust the necessary settings using your WordPress admin panel in \"BWS Plugins\" > \"Job board\".\n4. Create a page or a post and insert the short-code [jbbrd_vacancy] into the text.\n\n== Frequently Asked Questions ==\n\n= How can I create a vacancies page on my site? =\n\nJust insert the short-code [jbbrd_vacancy] into your page or post and save the settings on the settings page of the plugin.\nAttention: In order to avoid incorrect formatting of the text, the short-code should be placed in text mode.\n\n= How can I place the login / registration form to add users with Employer and Job candidate roles =\n\nInsert the short-code [jbbrd_registration] into your page or post.\nYou can also add the login / registration form into widget. To do it, just create a text widget and put the short-code into the widget field.\nTo prevent the login / registration errors, do not place more than one registration form short-code on your website.\n\n= How can I add a category of vacancies? =\n\nTo create or edit an existing category of vacancies, click on \"Vacancies\" on the admin panel, then click on the \"Vacancy categories\". Fill in the fields \"Name\", \"Slug\", \"Description\". Then add a new category by clicking on the \"Add new vacancy category\".\n\n= How can I add a job offer on the vacancy page? =\n\nOnly administrator and the users with the role \"employer\" can manage job offers. Users with the role \"employer\" can view and sort all vacancies, as well as to create and edit their own. Roles are assigned by the administrator. The administrator can create, browse, sort, edit and delete any vacancies, CV, saved searches and search categories.\nLog in to your profile. Click \"Vacancies\" on the Panel, then click \"Add vacancies\". Fill in the fields, select the job category if it already exists, or create a new one. Fields marked with \"*\" are mandatory. Publish this vacancy by clicking on \"Publish\".\n\n= How can I add my company`s logo to a job offer? =\n\nCreate a new vacancy, or press the \"Edit\" in existing one. Select \"Featured Image / Set featured image\". Upload an image and save the post. Recommended logo images for download are 150px by 100px. \n\n= Why I cannot see the CV sort and send form? =\n\nMake sure that you have Sender plugin installed and activated.\nRegister as a Job candidate to get the possibility to use a filter of vacancies and send CV.\n\n= How can I send CV? =\n\nLog in to your profile. In the user profile file, add CV (Doc, Docx, Pdf, Txt only).  Click \"Send CV\" under the vacancy. The employer will receive an email with your details and a link to your CV attached file.\n\n= Why I cannot find a vacancy using a standard search form? =\n\nUnlike standard posts, vacancies are custom post type and they are not included in the standard search form. To add a vacancy custom post type into your search, please install the plugin <a href=\"/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Search+plugin+bestwebsoft&plugin-search-input=Search+Plugins\">\"Custom search\"</a>\n\n= What is the \"archive of vacancies\"? How to extract a vacancy from the archive of vacancies?? =\n\nVacancies` validity is specified when entering a date in the \"Expiry date\" field. After reaching the specified date, vacancies are been automatically placed in the archive. Archive vacancies are not displayed in the front-end of the vacancies page, but they are preserved and always available for editing. You can remove the job from the archive. To do this, enter a new date in the \"Expiry date\" and click \"Restore from archive\". If you specify wrong (already past) date in the \"Expiry date\", the vacancy will be available till the next archivation. You can set the time of daily archivation using the settings page of the plugin. If the field \"Expiry date\" is empty, the vacancy is considered to be constant.\n\n= I have some problems with the plugin's work. What Information should I provide to receive proper support? =\n\nPlease make sure that the problem hasn't been discussed yet on our forum (<a href=\"http://support.bestwebsoft.com\" target=\"_blank\">http://support.bestwebsoft.com</a>). If no, please provide the following data along with your problem's description:\n1. the link to the page where the problem occurs\n2. the name of the plugin and its version. If you are using a pro version - your order number.\n3. the version of your WordPress installation\n4. copy and paste into the message your system status report. Please read more here: <a href=\"https://docs.google.com/document//1Wi2X8RdRGXk9kMszQy1xItJrpN0ncXgioH935MaBKtc/edit\" target=\"_blank\">Instruction on System Status</a>\n\n== Screenshots ==\n\n1. Job board display.\n2. Adding new vacancy display with additional fields.\n3. Adding new vacancies category display with additional fields.\n4. Adding new employment type display.\n5. Plugin settings in WordPress admin panel with additional fields.\n6. Vacancies page in front-end display with sorting form fields.\n7. Single job offer page view.\n8. Job candidate settings on profile page.\n9. Job candidate chosen category offers by last day on profile page screen.\n10. Registration form in widget area.\n\n== Changelog ==\n\n= V1.0.0 - 18.07.2014 = \n* Bugfix : Login/registration form bugs were fixed.\n* Bugfix : Session bugs were fixed.\n\n== Upgrade Notice ==\n\n= V1.0.0 =\nLogin/registration form bugs were fixed. Session bugs were fixed."], "fixing_code": ["<?php\n/*\n* Function for displaying BestWebSoft menu\n* Version: 1.3.7\n*/\n\nif ( ! function_exists( 'bws_add_menu_render' ) ) {\n\tfunction bws_add_menu_render() {\n\t\tglobal $wpdb, $wpmu, $wp_version, $bws_plugin_info;\n\t\t$error = $message = $bwsmn_form_email = '';\n\t\t$bws_donate_link = 'https://www.2checkout.com/checkout/purchase?sid=1430388&quantity=1&product_id=94';\n\n\t\tif ( ! function_exists( 'is_plugin_active_for_network' ) )\n\t\t\trequire_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\n\t\t$bws_plugins = array(\n\t\t\t'captcha/captcha.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Captcha',\n\t\t\t\t'description'\t=> 'Plugin intended to prove that the visitor is a human being and not a spam robot.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/captcha-plugin/?k=d678516c0990e781edfb6a6c874f0b8a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/captcha-plugin/?k=d678516c0990e781edfb6a6c874f0b8a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Captcha+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=captcha.php',\n\t\t\t\t'pro_version'\t=> 'captcha-pro/captcha_pro.php'\n\t\t\t),\n\t\t\t'contact-form-plugin/contact_form.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form',\n\t\t\t\t'description'\t=> 'Add Contact Form to your WordPress website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form/?k=012327ef413e5b527883e031d43b088b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form/?k=012327ef413e5b527883e031d43b088b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Contact+Form+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=contact_form.php',\n\t\t\t\t'pro_version'\t=> 'contact-form-pro/contact_form_pro.php'\n\t\t\t), \n\t\t\t'facebook-button-plugin/facebook-button-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Facebook Like Button',\n\t\t\t\t'description'\t=> 'Allows you to add the Follow and Like buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-plugin/?k=05ec4f12327f55848335802581467d55&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-plugin/?k=05ec4f12327f55848335802581467d55&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Facebook+Like+Button+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=facebook-button-plugin.php',\n\t\t\t\t'pro_version'\t=> 'facebook-button-pro/facebook-button-pro.php'\n\t\t\t),\n\t\t\t'twitter-plugin/twitter.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Twitter',\n\t\t\t\t'description'\t=> 'Allows you to add the Twitter \"Follow\" and \"Like\" buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/twitter-plugin/?k=f8cb514e25bd7ec4974d64435c5eb333&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/twitter-plugin/?k=f8cb514e25bd7ec4974d64435c5eb333&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Twitter+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=twitter.php',\n\t\t\t\t'pro_version'\t=> 'twitter-pro/twitter-pro.php'\n\t\t\t), \n\t\t\t'portfolio/portfolio.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Portfolio',\n\t\t\t\t'description'\t=> 'Allows you to create a page with the information about your past projects.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/portfolio-plugin/?k=1249a890c5b7bba6bda3f528a94f768b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/portfolio-plugin/?k=1249a890c5b7bba6bda3f528a94f768b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Portfolio+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=portfolio.php'\n\t\t\t),\n\t\t\t'gallery-plugin/gallery-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Gallery',\n\t\t\t\t'description'\t=> 'Allows you to implement a Gallery page into your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/gallery-plugin/?k=2da21c0a64eec7ebf16337fa134c5f78&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/gallery-plugin/?k=2da21c0a64eec7ebf16337fa134c5f78&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Gallery+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gallery-plugin.php',\n\t\t\t\t'pro_version'\t=> 'gallery-plugin-pro/gallery-plugin-pro.php'\n\t\t\t),\n\t\t\t'adsense-plugin/adsense-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google AdSense',\n\t\t\t\t'description'\t=> 'Allows Google AdSense implementation to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-adsense-plugin/?k=60e3979921e354feb0347e88e7d7b73d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-adsense-plugin/?k=60e3979921e354feb0347e88e7d7b73d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Adsense+Plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=adsense-plugin.php'\n\t\t\t),\n\t\t\t'custom-search-plugin/custom-search-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Custom Search',\n\t\t\t\t'description'\t=> 'Allows to extend your website search functionality by adding a custom post type.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/custom-search-plugin/?k=933be8f3a8b8719d95d1079d15443e29&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/custom-search-plugin/?k=933be8f3a8b8719d95d1079d15443e29&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Search+plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=custom_search.php'\n\t\t\t),\n\t\t\t'quotes-and-tips/quotes-and-tips.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Quotes and Tips',\n\t\t\t\t'description'\t=> 'Allows you to implement quotes & tips block into your web site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/quotes-and-tips/?k=5738a4e85a798c4a5162240c6515098d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/quotes-and-tips/?k=5738a4e85a798c4a5162240c6515098d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Quotes+and+Tips+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=quotes-and-tips.php'\n\t\t\t),\n\t\t\t'google-sitemap-plugin/google-sitemap-plugin.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google Sitemap',\n\t\t\t\t'description'\t=> 'Allows you to add sitemap file to Google Webmaster Tools.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-plugin/?k=5202b2f5ce2cf85daee5e5f79a51d806&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-plugin/?k=5202b2f5ce2cf85daee5e5f79a51d806&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Google+sitemap+plugin+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-sitemap-plugin.php',\n\t\t\t\t'pro_version'\t=> 'google-sitemap-pro/google-sitemap-pro.php'\n\t\t\t),\n\t\t\t'updater/updater.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Updater',\n\t\t\t\t'description'\t=> 'Allows you to update plugins and WP core.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/updater-plugin/?k=66f3ecd4c1912009d395c4bb30f779d1&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/updater-plugin/?k=66f3ecd4c1912009d395c4bb30f779d1&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=updater+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=updater-options',\n\t\t\t\t'pro_version'\t=> 'updater-pro/updater_pro.php'\n\t\t\t),\n\t\t\t'custom-fields-search/custom-fields-search.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Custom Fields Search',\n\t\t\t\t'description'\t=> 'Allows you to add website search any existing custom fields.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/custom-fields-search/?k=f3f8285bb069250c42c6ffac95ed3284&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/custom-fields-search/?k=f3f8285bb069250c42c6ffac95ed3284&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Fields+Search+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=custom_fields_search.php'\n\t\t\t),\n\t\t\t'google-one/google-plus-one.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google +1',\n\t\t\t\t'description'\t=> 'Allows you to see how many times your page has been liked on Google Search Engine as well as who has liked the article.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one/?k=ce7a88837f0a857b3a2bb142f470853c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one/?k=ce7a88837f0a857b3a2bb142f470853c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Google+%2B1+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-plus-one.php',\n\t\t\t\t'pro_version'\t=> 'google-one-pro/google-plus-one-pro.php'\n\t\t\t),\n\t\t\t'relevant/related-posts-plugin.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Relevant - Related Posts',\n\t\t\t\t'description'\t=> 'Allows you to display related posts with similar words in category, tags, title or by adding special meta key for posts.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/related-posts-plugin/?k=73fb737037f7141e66415ec259f7e426&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/related-posts-plugin/?k=73fb737037f7141e66415ec259f7e426&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Related+Posts+Plugin+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=related-posts-plugin.php'\n\t\t\t),\n\t\t\t'contact-form-to-db/contact_form_to_db.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form To DB',\n\t\t\t\t'description'\t=> 'Allows you to manage the messages that have been sent from your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db/?k=ba3747d317c2692e4136ca096a8989d6&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db/?k=ba3747d317c2692e4136ca096a8989d6&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Contact+Form+to+DB+bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=cntctfrmtdb_settings',\n\t\t\t\t'pro_version'\t=> 'contact-form-to-db-pro/contact_form_to_db_pro.php'\n\t\t\t),\n\t\t\t'pdf-print/pdf-print.php' => array(\n\t\t\t\t'name'\t\t\t=> 'PDF & Print',\n\t\t\t\t'description'\t=> 'Allows you to create PDF and Print page with adding appropriate buttons to the content.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/pdf-print/?k=bfefdfb522a4c0ff0141daa3f271840c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/pdf-print/?k=bfefdfb522a4c0ff0141daa3f271840c&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=PDF+Print+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=pdf-print.php',\n\t\t\t\t'pro_version'\t=> 'pdf-print-pro/pdf-print-pro.php'\n\t\t\t),\n\t\t\t'donate-button/donate.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Donate',\n\t\t\t\t'description'\t=> 'Makes it possible to place donation buttons of various payment systems on your web page.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/donate/?k=a8b2e2a56914fb1765dd20297c26401b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/donate/?k=a8b2e2a56914fb1765dd20297c26401b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Donate+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=donate.php'\n\t\t\t),\n\t\t\t'post-to-csv/post-to-csv.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Post To CSV',\n\t\t\t\t'description'\t=> 'The plugin allows to export posts of any types to a csv file.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/post-to-csv/?k=653aa55518ae17409293a7a894268b8f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/post-to-csv/?k=653aa55518ae17409293a7a894268b8f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Post+To+CSV+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=post-to-csv.php'\n\t\t\t),\n\t\t\t'google-shortlink/google-shortlink.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google Shortlink',\n\t\t\t\t'description'\t=> 'Allows you to get short links from goo.gl servise without leaving your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-shortlink/?k=afcf3eaed021bbbbeea1090e16bc22db&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-shortlink/?k=afcf3eaed021bbbbeea1090e16bc22db&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Google+Shortlink+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gglshrtlnk_options'\n\t\t\t),\n\t\t\t'htaccess/htaccess.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Htaccess',\n\t\t\t\t'description'\t=> 'Allows controlling access to your website using the directives Allow and Deny.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/htaccess/?k=2b865fcd56a935d22c5c4f1bba52ed46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/htaccess/?k=2b865fcd56a935d22c5c4f1bba52ed46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Htaccess+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=htaccess.php'\n\t\t\t),\n\t\t\t'google-captcha/google-captcha.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google Captcha (reCAPTCHA)',\n\t\t\t\t'description'\t=> 'Plugin intended to prove that the visitor is a human being and not a spam robot.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-captcha/?k=7b59fbe542acf950b29f3e020d5ad735&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/google-captcha/?k=7b59fbe542acf950b29f3e020d5ad735&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Google+Captcha+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-captcha.php'\n\t\t\t),\n\t\t\t'sender/sender.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Sender',\n\t\t\t\t'description'\t=> 'You can send mails to all users or to certain categories of users.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/sender/?k=89c297d14ba85a8417a0f2fc05e089c7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/sender/?k=89c297d14ba85a8417a0f2fc05e089c7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Sender+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sndr_settings',\n\t\t\t\t'pro_version'\t=> 'sender-pro/sender-pro.php'\n\t\t\t),\n\t\t\t'subscriber/subscriber.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Subscriber',\n\t\t\t\t'description'\t=> 'This plugin allows you to subscribe users for newsletters from your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/subscriber/?k=a4ecc1b7800bae7329fbe8b4b04e9c88&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/subscriber/?k=a4ecc1b7800bae7329fbe8b4b04e9c88&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Subscriber+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sbscrbr_settings_page'\n\t\t\t),\n\t\t\t'contact-form-multi/contact-form-multi.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form Multi',\n\t\t\t\t'description'\t=> 'This plugin allows you to subscribe users for newsletters from your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi/?k=83cdd9e72a9f4061122ad28a67293c72&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi/?k=83cdd9e72a9f4061122ad28a67293c72&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Contact+Form+Multi+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> '',\n\t\t\t\t'pro_version'\t=> 'contact-form-multi-pro/contact-form-multi-pro.php'\n\t\t\t),\n\t\t\t'bws-google-maps/bws-google-maps.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Maps',\n\t\t\t\t'description'\t=> 'Easy to set up and insert Google Maps to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps/?k=d8fac412d7359ebaa4ff53b46572f9f7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps/?k=d8fac412d7359ebaa4ff53b46572f9f7&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=BestWebSoft+Google+Maps&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=bws-google-maps.php',\n\t\t\t\t'pro_version'\t=> 'bws-google-maps-pro/bws-google-maps-pro.php'\n\t\t\t),\n\t\t\t'bws-google-analytics/bws-google-analytics.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Analytics',\n\t\t\t\t'description'\t=> 'Allows you to retrieve basic stats from Google Analytics account and add the tracking code to your blog.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-analytics/?k=261c74cad753fb279cdf5a5db63fbd43&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/bws-google-analytics/?k=261c74cad753fb279cdf5a5db63fbd43&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=BestWebSoft+Google+Analytics&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=bws-google-analytics.php'\n\t\t\t),\n\t\t\t'db-manager/db-manager.php' => array(\n\t\t\t\t'name'\t\t\t=> 'DB manager',\n\t\t\t\t'description'\t=> 'Allows you to download the latest version of PhpMyadmin and Dumper and manage your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> 'http://bestwebsoft.com/plugin/db-manager/?k=01ed9731780d87f85f5901064b7d76d8&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=db-manager.php'\n\t\t\t),\n\t\t\t'user-role/user-role.php' => array(\n\t\t\t\t'name'\t\t\t=> 'User Role',\n\t\t\t\t'description'\t=> 'Allows to change wordpress user role capabilities.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/user-role/?k=dfe2244835c6fbf601523964b3f34ccc&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/user-role/?k=dfe2244835c6fbf601523964b3f34ccc&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=User+Role+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=user-role.php',\n\t\t\t\t'pro_version'\t=> 'user-role-pro/user-role-pro.php'\n\t\t\t),\n\t\t\t'email-queue/email-queue.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Email Queue',\n\t\t\t\t'description'\t=> 'Allows to manage email massages sent by BestWebSoft plugins.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/email-queue/?k=e345e1b6623f0dca119bc2d9433b130b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/email-queue/?k=e345e1b6623f0dca119bc2d9433b130b&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Email+Queue+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=mlq_settings'\n\t\t\t),\n\t\t\t'limit-attempts/limit-attempts.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Limit Attempts',\n\t\t\t\t'description'\t=> 'Allows you to limit rate of login attempts by the ip, and create whitelist and blacklist.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts/?k=b14e1697ee4d008abcd4bd34d492573a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts/?k=b14e1697ee4d008abcd4bd34d492573a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&s=Limit+Attempts+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=limit-attempts.php',\n\t\t\t\t'pro_version'\t=> 'limit-attempts-pro/limit-attempts-pro.php'\n\t\t\t),\n\t\t\t'job-board/job-board.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Job board',\n\t\t\t\t'description'\t=> 'Allows to create a job-board page on your site.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/job-board/?k=b0c504c9ce6edd6692e04222af3fed6f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'download'\t\t=> 'http://bestwebsoft.com/plugin/job-board/?k=b0c504c9ce6edd6692e04222af3fed6f&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#download',\n\t\t\t\t'wp_install'\t=> '/wp-admin/plugin-install.php?tab=search&type=term&s=Job+board+BestWebSoft&plugin-search-input=Search+Plugins',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=job-board.php'\n\t\t\t)\n\t\t);\n\t\t$bws_plugins_pro\t= array(\n\t\t\t'gallery-plugin-pro/gallery-plugin-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Gallery Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement as many galleries as you want into your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/gallery-pro/?k=382e5ce7c96a6391f5ffa5e116b37fe0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/gallery-pro/?k=382e5ce7c96a6391f5ffa5e116b37fe0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=gallery-plugin-pro.php'\n\t\t\t),\n\t\t\t'contact-form-pro/contact_form_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement a feedback form to a web-page or a post in no time.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-pro/?k=773dc97bb3551975db0e32edca1a6d71&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/contact-form-pro/?k=773dc97bb3551975db0e32edca1a6d71&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=contact_form_pro.php'\n\t\t\t),\n\t\t\t'captcha-pro/captcha_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Captcha Pro',\n\t\t\t\t'description'\t=> 'Allows you to implement a super security captcha form into web forms.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/captcha-pro/?k=ff7d65e55e5e7f98f219be9ed711094e&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/captcha-pro/?k=ff7d65e55e5e7f98f219be9ed711094e&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=captcha_pro.php'\n\t\t\t),\n\t\t\t'updater-pro/updater_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Updater Pro',\n\t\t\t\t'description'\t=> 'Allows you to update plugins and WordPress core on your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/updater-pro/?k=cf633acbefbdff78545347fe08a3aecb&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/updater-pro?k=cf633acbefbdff78545347fe08a3aecb&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=updater-pro-options'\n\t\t\t),\n\t\t\t'contact-form-to-db-pro/contact_form_to_db_pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact form to DB Pro',\n\t\t\t\t'description'\t=> 'The plugin provides a unique opportunity to manage messages sent from your site via the contact form.',\n\t\t\t\t'link' \t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db-pro/?k=6ce5f4a9006ec906e4db643669246c6a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/contact-form-to-db-pro/?k=6ce5f4a9006ec906e4db643669246c6a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=cntctfrmtdbpr_settings'\n\t\t\t),\n\t\t\t'google-sitemap-pro/google-sitemap-pro.php'=> array(\n\t\t\t\t'name'\t\t\t=> 'Google Sitemap Pro',\n\t\t\t\t'description'\t=> 'Allows you to add sitemap file to Google Webmaster Tools.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-pro/?k=7ea384a5cc36cb4c22741caa20dcd56d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase'\t\t=> 'http://bestwebsoft.com/plugin/google-sitemap-pro/?k=7ea384a5cc36cb4c22741caa20dcd56d&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=google-sitemap-pro.php'\n\t\t\t),\n\t\t\t'twitter-pro/twitter-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Twitter Pro',\n\t\t\t\t'description'\t=> 'Allows you to add the Twitter \"Follow\" and \"Like\" buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/twitter-pro/?k=63ecbf0cc9cebf060b5a3c9362299700&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/twitter-pro?k=63ecbf0cc9cebf060b5a3c9362299700&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=twitter-pro.php'\n\t\t\t),\n\t\t\t'google-one-pro/google-plus-one-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Google +1 Pro',\n\t\t\t\t'description'\t=> 'Allows you to see how many times your page has been liked on Google Search Engine as well as who has liked the article.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/google-plus-one-pro/?k=f4b0a62d155c9df9601a0531ad5bd832&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/google-plus-one-pro?k=f4b0a62d155c9df9601a0531ad5bd832&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=google-plus-one-pro.php'\n\t\t\t),\n\t\t\t'facebook-button-pro/facebook-button-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Facebook Like Button Pro',\n\t\t\t\t'description'\t=> 'Allows you to add the Follow and Like buttons the easiest way.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-pro/?k=8da168e60a831cfb3525417c333ad275&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/facebook-like-button-pro?k=8da168e60a831cfb3525417c333ad275&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=facebook-button-pro.php'\n\t\t\t),\n\t\t\t'pdf-print-pro/pdf-print-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'PDF & Print Pro',\n\t\t\t\t'description'\t=> 'Allows you to create PDF and Print page with adding appropriate buttons to the content.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/pdf-print-pro/?k=fd43a0e659ddc170a9060027cbfdcc3a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/pdf-print-pro?k=fd43a0e659ddc170a9060027cbfdcc3a&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=pdf-print-pro.php'\n\t\t\t),\n\t\t\t'bws-google-maps-pro/bws-google-maps-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'BestWebSoft Google Maps Pro',\n\t\t\t\t'description'\t=> 'Easy to set up and insert Google Maps to your website.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps-pro/?k=117c3f9fc17f2c83ef430a8a9dc06f56&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/bws-google-maps-pro/?k=117c3f9fc17f2c83ef430a8a9dc06f56&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=bws-google-maps-pro.php'\n\t\t\t),\n\t\t\t'contact-form-multi-pro/contact-form-multi-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Contact Form Multi Pro',\n\t\t\t\t'description'\t=> 'This plugin is an exclusive add-on to the Contact Form Pro. Allows to create multiple contact forms.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi-pro/?k=fde3a18581c143654f060c398b07e8ac&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/contact-form-multi-pro/?k=fde3a18581c143654f060c398b07e8ac&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> ''\n\t\t\t),\n\t\t\t'user-role-pro/user-role-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'User Role Pro',\n\t\t\t\t'description'\t=> 'Allows to change wordpress user role capabilities.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/user-role-pro/?k=cfa9cea6613fb3d7c0a3622fa2faaf46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/user-role-pro/?k=cfa9cea6613fb3d7c0a3622fa2faaf46&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings' \t\t=> 'admin.php?page=user-role-pro.php'\n\t\t\t),\n\t\t\t'sender-pro/sender-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Sender Pro',\n\t\t\t\t'description'\t=> 'You can send mails to all users or to certain categories of users.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/sender-pro/?k=dc5d1a87bdc8aeab2de40ffb99b38054&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/sender-pro/?k=dc5d1a87bdc8aeab2de40ffb99b38054&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=sndrpr_settings'\n\t\t\t),\n\t\t\t'limit-attempts-pro/limit-attempts-pro.php' => array(\n\t\t\t\t'name'\t\t\t=> 'Limit Attempts Pro',\n\t\t\t\t'description'\t=> 'Allows you to limit rate of login attempts by the ip, and create whitelist and blacklist.',\n\t\t\t\t'link'\t\t\t=> 'http://bestwebsoft.com/plugin/limit-attempts-pro/?k=9d42cdf22c7fce2c4b6b447e6a2856e0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version,\n\t\t\t\t'purchase' \t\t=> 'http://bestwebsoft.com/plugin/limit-attempts-pro/?k=9d42cdf22c7fce2c4b6b447e6a2856e0&pn=' . $bws_plugin_info[\"id\"] . '&v=' . $bws_plugin_info[\"version\"] . '&wp_v=' . $wp_version . '#purchase',\n\t\t\t\t'settings'\t\t=> 'admin.php?page=limit-attempts-pro.php',\n\t\t\t)\n\t\t);\n\t\t\n\t\t$all_plugins = get_plugins();\n\t\t$active_plugins = get_option( 'active_plugins' );\n\n\t\t$recommend_plugins = array_diff_key( $bws_plugins, $all_plugins );\n\n\t\tforeach ( $bws_plugins as $key_plugin => $value_plugin ) {\n\t\t\tif ( ! isset( $all_plugins[ $key_plugin ] ) && isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $all_plugins[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) {\t\t\t\t\n\t\t\t\tunset( $recommend_plugins[ $key_plugin ] );\n\t\t\t}\n\t\t}\n\n\t\tforeach ( $all_plugins as $key_plugin => $value_plugin ) {\n\t\t\tif ( ! isset( $bws_plugins[ $key_plugin ] ) && ! isset( $bws_plugins_pro[ $key_plugin ] ) )\n\t\t\t\tunset( $all_plugins[ $key_plugin ] );\n\n\t\t\tif ( isset( $bws_plugins[ $key_plugin ] ) && isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $all_plugins[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) {\t\t\t\t\n\t\t\t\tunset( $all_plugins[ $key_plugin ] );\n\t\t\t}\n\t\t}\n\n\t\tif ( isset( $_GET['action'] ) && 'system_status' == $_GET['action'] ) {\n\t\t\t$all_plugins = get_plugins();\n\t\t\t$active_plugins = get_option( 'active_plugins' );\n\t\t\t$sql_version = $wpdb->get_var( \"SELECT VERSION() AS version\" );\n\t\t    $mysql_info = $wpdb->get_results( \"SHOW VARIABLES LIKE 'sql_mode'\" );\n\t\t    if ( is_array( $mysql_info) )\n\t\t    \t$sql_mode = $mysql_info[0]->Value;\n\t\t    if ( empty( $sql_mode ) )\n\t\t    \t$sql_mode = __( 'Not set', 'bestwebsoft' );\n\t\t    if ( ini_get( 'safe_mode' ) )\n\t\t    \t$safe_mode = __( 'On', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$safe_mode = __( 'Off', 'bestwebsoft' );\n\t\t    if ( ini_get( 'allow_url_fopen' ) )\n\t\t    \t$allow_url_fopen = __( 'On', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$allow_url_fopen = __( 'Off', 'bestwebsoft' );\n\t\t    if ( ini_get( 'upload_max_filesize' ) )\n\t\t    \t$upload_max_filesize = ini_get( 'upload_max_filesize' );\n\t\t    else\n\t\t    \t$upload_max_filesize = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get('post_max_size') )\n\t\t    \t$post_max_size = ini_get('post_max_size');\n\t\t    else\n\t\t    \t$post_max_size = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get( 'max_execution_time' ) )\n\t\t    \t$max_execution_time = ini_get( 'max_execution_time' );\n\t\t    else\n\t\t    \t$max_execution_time = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( ini_get( 'memory_limit' ) )\n\t\t    \t$memory_limit = ini_get( 'memory_limit' );\n\t\t    else\n\t\t    \t$memory_limit = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( function_exists( 'memory_get_usage' ) )\n\t\t    \t$memory_usage = round( memory_get_usage() / 1024 / 1024, 2 ) . __( ' Mb', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$memory_usage = __( 'N/A', 'bestwebsoft' );\n\t\t    if ( is_callable( 'exif_read_data' ) )\n\t\t    \t$exif_read_data = __( 'Yes', 'bestwebsoft' ) . \" ( V\" . substr( phpversion( 'exif' ), 0,4 ) . \")\" ;\n\t\t    else\n\t\t    \t$exif_read_data = __( 'No', 'bestwebsoft' );\n\t\t    if ( is_callable( 'iptcparse' ) )\n\t\t    \t$iptcparse = __( 'Yes', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$iptcparse = __( 'No', 'bestwebsoft' );\n\t\t    if ( is_callable( 'xml_parser_create' ) )\n\t\t    \t$xml_parser_create = __( 'Yes', 'bestwebsoft' );\n\t\t    else\n\t\t    \t$xml_parser_create = __( 'No', 'bestwebsoft' );\n\n\t\t\tif ( function_exists( 'wp_get_theme' ) )\n\t\t\t\t$theme = wp_get_theme();\n\t\t\telse\n\t\t\t\t$theme = get_theme( get_current_theme() );\n\n\t\t\tif ( function_exists( 'is_multisite' ) ) {\n\t\t\t\tif ( is_multisite() ) {\n\t\t\t\t\t$multisite = __( 'Yes', 'bestwebsoft' );\n\t\t\t\t} else {\n\t\t\t\t\t$multisite = __( 'No', 'bestwebsoft' );\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\t$multisite = __( 'N/A', 'bestwebsoft' );\n\n\t\t\t$site_url = get_option( 'siteurl' );\n\t\t\t$home_url = get_option( 'home' );\n\t\t\t$db_version = get_option( 'db_version' );\n\t\t\t$system_info = array(\n\t\t\t\t'system_info'\t\t=> '',\n\t\t\t\t'active_plugins'\t=> '',\n\t\t\t\t'inactive_plugins'\t=> ''\n\t\t\t);\n\t\t\t$system_info['system_info'] = array(\n\t\t        __( 'Operating System', 'bestwebsoft' )\t\t\t\t=> PHP_OS,\n\t\t        __( 'Server', 'bestwebsoft' )\t\t\t\t\t\t=> $_SERVER[\"SERVER_SOFTWARE\"],\n\t\t        __( 'Memory usage', 'bestwebsoft' )\t\t\t\t\t=> $memory_usage,\n\t\t        __( 'MYSQL Version', 'bestwebsoft' )\t\t\t\t=> $sql_version,\n\t\t        __( 'SQL Mode', 'bestwebsoft' )\t\t\t\t\t\t=> $sql_mode,\n\t\t        __( 'PHP Version', 'bestwebsoft' )\t\t\t\t\t=> PHP_VERSION,\n\t\t        __( 'PHP Safe Mode', 'bestwebsoft' )\t\t\t\t=> $safe_mode,\n\t\t        __( 'PHP Allow URL fopen', 'bestwebsoft' )\t\t\t=> $allow_url_fopen,\n\t\t        __( 'PHP Memory Limit', 'bestwebsoft' )\t\t\t\t=> $memory_limit,\n\t\t        __( 'PHP Max Upload Size', 'bestwebsoft' )\t\t\t=> $upload_max_filesize,\n\t\t        __( 'PHP Max Post Size', 'bestwebsoft' )\t\t\t=> $post_max_size,\n\t\t        __( 'PHP Max Script Execute Time', 'bestwebsoft' )\t=> $max_execution_time,\n\t\t        __( 'PHP Exif support', 'bestwebsoft' )\t\t\t\t=> $exif_read_data,\n\t\t        __( 'PHP IPTC support', 'bestwebsoft' )\t\t\t\t=> $iptcparse,\n\t\t        __( 'PHP XML support', 'bestwebsoft' )\t\t\t\t=> $xml_parser_create,\n\t\t\t\t__( 'Site URL', 'bestwebsoft' )\t\t\t\t\t\t=> $site_url,\n\t\t\t\t__( 'Home URL', 'bestwebsoft' )\t\t\t\t\t\t=> $home_url,\n\t\t\t\t'$_SERVER[HTTP_HOST]'\t\t\t\t\t\t\t\t=> $_SERVER['HTTP_HOST'],\n\t\t\t\t'$_SERVER[SERVER_NAME]'\t\t\t\t\t\t\t\t=> $_SERVER['SERVER_NAME'],\n\t\t\t\t__( 'WordPress Version', 'bestwebsoft' )\t\t\t=> $wp_version,\n\t\t\t\t__( 'WordPress DB Version', 'bestwebsoft' )\t\t\t=> $db_version,\n\t\t\t\t__( 'Multisite', 'bestwebsoft' )\t\t\t\t\t=> $multisite,\n\t\t\t\t__( 'Active Theme', 'bestwebsoft' )\t\t\t\t\t=> $theme['Name'] . ' ' . $theme['Version']\n\t\t\t);\n\t\t\tforeach ( $all_plugins as $path => $plugin ) {\n\t\t\t\tif ( is_plugin_active( $path ) ) {\n\t\t\t\t\t$system_info['active_plugins'][ $plugin['Name'] ] = $plugin['Version'];\n\t\t\t\t} else {\n\t\t\t\t\t$system_info['inactive_plugins'][ $plugin['Name'] ] = $plugin['Version'];\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\n\t\tif ( ( isset( $_REQUEST['bwsmn_form_submit'] ) && check_admin_referer( plugin_basename(__FILE__), 'bwsmn_nonce_submit' ) ) ||\n\t\t\t ( isset( $_REQUEST['bwsmn_form_submit_custom_email'] ) && check_admin_referer( plugin_basename(__FILE__), 'bwsmn_nonce_submit_custom_email' ) ) ) {\n\t\t\tif ( isset( $_REQUEST['bwsmn_form_email'] ) ) {\n\t\t\t\t$bwsmn_form_email = esc_html( trim( $_REQUEST['bwsmn_form_email'] ) );\n\t\t\t\tif ( $bwsmn_form_email == \"\" || ! is_email( $bwsmn_form_email ) ) {\n\t\t\t\t\t$error = __( \"Please enter a valid email address.\", 'bestwebsoft' );\n\t\t\t\t} else {\n\t\t\t\t\t$email = $bwsmn_form_email;\n\t\t\t\t\t$bwsmn_form_email = '';\n\t\t\t\t\t$message = __( 'Email with system info is sent to ', 'bestwebsoft' ) . $email;\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$email = 'plugin_system_status@bestwebsoft.com';\n\t\t\t\t$message = __( 'Thank you for contacting us.', 'bestwebsoft' );\n\t\t\t}\n\n\t\t\tif ( $error == '' ) {\n\t\t\t\t$headers  = 'MIME-Version: 1.0' . \"\\n\";\n\t\t\t\t$headers .= 'Content-type: text/html; charset=utf-8' . \"\\n\";\n\t\t\t\t$headers .= 'From: ' . get_option( 'admin_email' );\n\t\t\t\t$message_text = '<html><head><title>System Info From ' . $home_url . '</title></head><body>\n\t\t\t\t<h4>Environment</h4>\n\t\t\t\t<table>';\n\t\t\t\tforeach ( $system_info['system_info'] as $key => $value ) {\n\t\t\t\t\t$message_text .= '<tr><td>'. $key .'</td><td>'. $value .'</td></tr>';\t\n\t\t\t\t}\n\t\t\t\t$message_text .= '</table>';\n\t\t\t\tif ( ! empty( $system_info['active_plugins'] ) ) {\n\t\t\t\t\t$message_text .= '<h4>Active Plugins</h4>\n\t\t\t\t\t<table>';\n\t\t\t\t\tforeach ( $system_info['active_plugins'] as $key => $value ) {\t\n\t\t\t\t\t\t$message_text .= '<tr><td scope=\"row\">'. $key .'</td><td scope=\"row\">'. $value .'</td></tr>';\t\n\t\t\t\t\t}\n\t\t\t\t\t$message_text .= '</table>';\n\t\t\t\t}\n\t\t\t\tif ( ! empty( $system_info['inactive_plugins'] ) ) {\n\t\t\t\t\t$message_text .= '<h4>Inactive Plugins</h4>\n\t\t\t\t\t<table>';\n\t\t\t\t\tforeach ( $system_info['inactive_plugins'] as $key => $value ) {\n\t\t\t\t\t\t$message_text .= '<tr><td scope=\"row\">'. $key .'</td><td scope=\"row\">'. $value .'</td></tr>';\n\t\t\t\t\t}\n\t\t\t\t\t$message_text .= '</table>';\n\t\t\t\t}\n\t\t\t\t$message_text .= '</body></html>';\n\t\t\t\t$result = wp_mail( $email, 'System Info From ' . $home_url, $message_text, $headers );\n\t\t\t\tif ( $result != true )\n\t\t\t\t\t$error = __( \"Sorry, email message could not be delivered.\", 'bestwebsoft' );\n\t\t\t}\n\t\t} ?>\n\t\t<div class=\"wrap\">\n\t\t\t<div class=\"icon32 icon32-bws\" id=\"icon-options-general\"></div>\n\t\t\t<h2>BestWebSoft</h2>\t\t\t\n\t\t\t<h2 class=\"nav-tab-wrapper\">\n\t\t\t\t<a class=\"nav-tab<?php if ( !isset( $_GET['action'] ) ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins\"><?php _e( 'Plugins', 'bestwebsoft' ); ?></a>\n\t\t\t\t<?php if ( $wp_version >= '3.4' ) { ?>\n\t\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['action'] ) && 'themes' == $_GET['action'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins&amp;action=themes\"><?php _e( 'Themes', 'bestwebsoft' ); ?></a>\n\t\t\t\t<?php } ?>\n\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['action'] ) && 'system_status' == $_GET['action'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=bws_plugins&amp;action=system_status\"><?php _e( 'System status', 'bestwebsoft' ); ?></a>\n\t\t\t</h2>\t\t\t\n\t\t\t<?php if ( !isset( $_GET['action'] ) ) { ?>\t\t\t\t\n\t\t\t\t<ul class=\"subsubsub\">\n\t\t\t\t\t<li><a <?php if ( !isset( $_GET['sub'] ) ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins\"><?php _e( 'All', 'bestwebsoft' ); ?></a></li> |\n\t\t\t\t\t<li><a <?php if ( isset( $_GET['sub'] ) && 'installed' == $_GET['sub'] ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins&amp;sub=installed\"><?php _e( 'Installed', 'bestwebsoft' ); ?></a></li> |\n\t\t\t\t\t<li><a <?php if ( isset( $_GET['sub'] ) && 'recommended' == $_GET['sub'] ) echo 'class=\"current\" '; ?>href=\"admin.php?page=bws_plugins&amp;sub=recommended\"><?php _e( 'Recommended', 'bestwebsoft' ); ?></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t<?php if ( ( isset( $_GET['sub'] ) && 'installed' == $_GET['sub'] ) || !isset( $_GET['sub'] ) ) { ?>\t\n\t\t\t\t\t<h4 class=\"bws_installed\"><?php _e( 'Installed plugins', 'bestwebsoft' ); ?></h4>\n\t\t\t\t\t<?php foreach ( $all_plugins as $key_plugin => $value_plugin ) {\n\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin-pro/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '-pro/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} elseif ( isset( $bws_plugins[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( in_array( $key_plugin, $active_plugins ) || is_plugin_active_for_network( $key_plugin ) ) { ?>\n\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins_pro[ $key_plugin ] ) ) { ?>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_exist_overlay\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $value_plugin[\"Description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php if ( '' != $bws_plugins_pro[ $key_plugin ][\"settings\"] ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"settings\"]; ?>\" target=\"_blank\"><?php _e( \"Settings\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php } elseif ( isset( $bws_plugins[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_free\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"purchase\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong><?php _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php if ( '' != $bws_plugins[ $key_plugin ][\"settings\"] ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"settings\"]; ?>\" target=\"_blank\"><?php _e( \"Settings\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_deactivated\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins_pro[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins_pro[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t<a class=\"bws_activate\" href=\"plugins.php\" title=\"<?php _e( \"Activate this plugin\", 'bestwebsoft' ); ?>\" target=\"_blank\"><?php _e( \"Activate\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php } elseif ( isset( $bws_plugins[ $key_plugin ] ) ) { ?>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_box bws_product_deactivated bws_product_free\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"Name\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"purchase\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t\t<strong><?php _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_links\">\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php _e( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t\t\t<a class=\"bws_activate\" href=\"plugins.php\" title=\"<?php _e( \"Activate this plugin\", 'bestwebsoft' ); ?>\" target=\"_blank\"><?php _e( \"Activate\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ?>\n\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t<?php if ( ( isset( $_GET['sub'] ) && 'recommended' == $_GET['sub'] ) || !isset( $_GET['sub'] ) ) { ?>\n\t\t\t\t\t<h4 class=\"bws_recommended\"><?php _e( 'Recommended plugins', 'bestwebsoft' ); ?></h4>\n\t\t\t\t\t<?php foreach ( $recommend_plugins as $key_plugin => $value_plugin ) {\n\n\t\t\t\t\t\tif ( isset( $bws_plugins_pro[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin-pro/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '-pro/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} elseif ( isset( $bws_plugins[ $key_plugin ] ) ) {\n\t\t\t\t\t\t\t$key_plugin_explode = explode( '-plugin/', $key_plugin );\n\t\t\t\t\t\t\tif ( isset( $key_plugin_explode[1] ) )\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$key_plugin_explode = explode( '/', $key_plugin );\n\t\t\t\t\t\t\t\t$icon = $key_plugin_explode[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t<div class=\"bws_product_box\">\n\t\t\t\t\t\t\t<div class=\"bws_product\">\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"bws_product_title\"><?php echo $value_plugin[\"name\"]; ?></div>\n\t\t\t\t\t\t\t\t<div class=\"bws_product_content\">\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon\">\n\t\t\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"bws_product_icon_pro\">PRO</div>\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo plugins_url( \"icons/\" , __FILE__ ) . $icon . '.png'; ?>\"/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bws_product_description\"><?php echo $bws_plugins[ $key_plugin ][\"description\"]; ?></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php if ( isset( $bws_plugins[ $key_plugin ]['pro_version'] ) && isset( $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ] ) ) { ?>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button\" href=\"<?php echo $bws_plugins_pro[ $bws_plugins[ $key_plugin ]['pro_version'] ][\"link\"]; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<?php echo _e( 'Go', 'bestwebsoft' );?> <strong>PRO</strong>\n\t\t\t\t\t\t\t\t\t</a> \n\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t<a class=\"bws_product_button bws_donate_button\" href=\"<?php echo $bws_donate_link; ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<strong><?php echo _e( 'DONATE', 'bestwebsoft' );?></strong>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t<div class=\"bws_product_links\">\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"link\"]; ?>\" target=\"_blank\"><?php echo __( \"Learn more\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t\t<span> | </span>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo $bws_plugins[ $key_plugin ][\"wp_install\"]; ?>\" target=\"_blank\"><?php echo __( \"Install now\", 'bestwebsoft' ); ?></a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php }\t\t\t\t\t\t\n\t\t\t\t} ?>\t\n\t\t\t<?php } elseif ( 'themes' == $_GET['action'] ) { ?>\t\n\t\t\t\t<div id=\"availablethemes\">\n\t\t\t\t\t<?php global $tabs, $tab, $paged, $type, $theme_field_defaults;\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/theme-install.php' );\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/class-wp-themes-list-table.php' );\n\t\t\t\t\tinclude( ABSPATH . 'wp-admin/includes/class-wp-theme-install-list-table.php' );\n\n\t\t\t\t\t$theme_class = new WP_Theme_Install_List_Table();\n\t\t\t\t\t$paged = $theme_class->get_pagenum();\n\t\t\t\t\t$per_page = 36;\n\t\t\t\t\t$args = array( 'page' => $paged, 'per_page' => $per_page, 'fields' => $theme_field_defaults );\n\t\t\t\t\t$args['author'] = 'bestwebsoft';\n\t\t\t\t\t$args = apply_filters( 'install_themes_table_api_args_search', $args );\n\t\t\t\t\t$api = themes_api( 'query_themes', $args );\n\n\t\t\t\t\tif ( is_wp_error( $api ) )\n\t\t\t\t\t\twp_die( $api->get_error_message() . '</p> <p><a href=\"#\" onclick=\"document.location.reload(); return false;\">' . __( 'Try again' ) . '</a>' );\n\n\t\t\t\t\t$theme_class->items = $api->themes;\n\t\t\t\t\t$theme_class->set_pagination_args( array(\n\t\t\t\t\t\t'total_items' => $api->info['results'],\n\t\t\t\t\t\t'per_page' => $per_page,\n\t\t\t\t\t\t'infinite_scroll' => true,\n\t\t\t\t\t) );\n\t\t\t\t\t$themes = $theme_class->items;\n\t\t\t\t\tif ( $wp_version < '3.9' ) {\n\t\t\t\t\t\tforeach ( $themes as $theme ) { ?>\n\t\t\t\t\t\t\t<div class=\"available-theme installable-theme\"><?php\n\t\t\t\t\t\t\t\tglobal $themes_allowedtags;\n\t\t\t\t\t\t\t\tif ( empty( $theme ) )\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t$name   = wp_kses( $theme->name,   $themes_allowedtags );\n\t\t\t\t\t\t\t\t$author = wp_kses( $theme->author, $themes_allowedtags );\n\t\t\t\t\t\t\t\t$preview_title = sprintf( __('Preview &#8220;%s&#8221;'), $name );\n\t\t\t\t\t\t\t\t$preview_url   = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'tab'   => 'theme-information',\n\t\t\t\t\t\t\t\t\t'theme' => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'theme-install.php' ) );\n\n\t\t\t\t\t\t\t\t$actions = array();\n\n\t\t\t\t\t\t\t\t$install_url = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'action' => 'install-theme',\n\t\t\t\t\t\t\t\t\t'theme'  => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'update.php' ) );\n\n\t\t\t\t\t\t\t\t$update_url = add_query_arg( array(\n\t\t\t\t\t\t\t\t\t'action' => 'upgrade-theme',\n\t\t\t\t\t\t\t\t\t'theme'  => $theme->slug,\n\t\t\t\t\t\t\t\t), self_admin_url( 'update.php' ) );\n\n\t\t\t\t\t\t\t\t$status = 'install';\n\t\t\t\t\t\t\t\t$installed_theme = wp_get_theme( $theme->slug );\n\t\t\t\t\t\t\t\tif ( $installed_theme->exists() ) {\n\t\t\t\t\t\t\t\t\tif ( version_compare( $installed_theme->get('Version'), $theme->version, '=' ) )\n\t\t\t\t\t\t\t\t\t\t$status = 'latest_installed';\n\t\t\t\t\t\t\t\t\telseif ( version_compare( $installed_theme->get('Version'), $theme->version, '>' ) )\n\t\t\t\t\t\t\t\t\t\t$status = 'newer_installed';\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t$status = 'update_available';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch ( $status ) {\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tcase 'install':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-now\" href=\"' . esc_url( wp_nonce_url( $install_url, 'install-theme_' . $theme->slug ) ) . '\" title=\"' . esc_attr( sprintf( __( 'Install %s' ), $name ) ) . '\">' . __( 'Install Now' ) . '</a>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'update_available':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-now\" href=\"' . esc_url( wp_nonce_url( $update_url, 'upgrade-theme_' . $theme->slug ) ) . '\" title=\"' . esc_attr( sprintf( __( 'Update to version %s' ), $theme->version ) ) . '\">' . __( 'Update' ) . '</a>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'newer_installed':\n\t\t\t\t\t\t\t\t\tcase 'latest_installed':\n\t\t\t\t\t\t\t\t\t\t$actions[] = '<span class=\"install-now\" title=\"' . esc_attr__( 'This theme is already installed and is up to date' ) . '\">' . _x( 'Installed', 'theme' ) . '</span>';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$actions[] = '<a class=\"install-theme-preview\" href=\"' . esc_url( $preview_url ) . '\" title=\"' . esc_attr( sprintf( __( 'Preview %s' ), $name ) ) . '\">' . __( 'Preview' ) . '</a>';\n\t\t\t\t\t\t\t\t$actions = apply_filters( 'theme_install_actions', $actions, $theme ); ?>\n\t\t\t\t\t\t\t\t<a class=\"screenshot install-theme-preview\" href=\"<?php echo esc_url( $preview_url ); ?>\" title=\"<?php echo esc_attr( $preview_title ); ?>\">\n\t\t\t\t\t\t\t\t\t<img src='<?php echo esc_url( $theme->screenshot_url ); ?>' width='150' />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<h3><?php echo $name; ?></h3>\n\t\t\t\t\t\t\t\t<div class=\"theme-author\"><?php printf( __( 'By %s' ), $author ); ?></div>\n\t\t\t\t\t\t\t\t<div class=\"action-links\">\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<?php foreach ( $actions as $action ): ?>\n\t\t\t\t\t\t\t\t\t\t\t<li><?php echo $action; ?></li>\n\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t\t\t\t<li class=\"hide-if-no-js\"><a href=\"#\" class=\"theme-detail\"><?php _e('Details') ?></a></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php $theme_class->install_theme_info( $theme ); ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t// end foreach $theme_names\n\t\t\t\t\t\t$theme_class->theme_installer();\n\t\t\t\t\t} else { ?>\n\t\t\t\t\t\t<div class=\"theme-browser\">\n\t\t\t\t\t\t\t<div class=\"themes\">\n\t\t\t\t\t\t<?php foreach ( $themes as $key => $theme ) {\n\t\t\t\t\t\t\t$installed_theme = wp_get_theme( $theme->slug );\n\t\t\t\t\t\t\tif ( $installed_theme->exists() )\n\t\t\t\t\t\t\t\t$theme->installed = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t$theme->installed = false;\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<div class=\"theme\" tabindex=\"0\">\n\t\t\t\t\t\t\t\t<?php if ( $theme->screenshot_url ) { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-screenshot\">\n\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo $theme->screenshot_url; ?>\" alt=\"\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php } else { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-screenshot blank\"></div>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t\t<div class=\"theme-author\"><?php printf( __( 'By %s' ), $theme->author ); ?></div>\n\t\t\t\t\t\t\t\t<h3 class=\"theme-name\"><?php echo $theme->name; ?></h3>\n\t\t\t\t\t\t\t\t<div class=\"theme-actions\">\n\t\t\t\t\t\t\t\t\t<a class=\"button button-secondary preview install-theme-preview\" href=\"theme-install.php?theme=<?php echo $theme->slug ?>\"><?php esc_html_e( 'Learn More' ); ?></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<?php if ( $theme->installed ) { ?>\n\t\t\t\t\t\t\t\t\t<div class=\"theme-installed\"><?php _e( 'Already Installed' ); ?></div>\n\t\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t\t<br class=\"clear\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"theme-overlay\"></div>\n\t\t\t\t\t<?php } ?>\n\t\t\t\t</div>\n\t\t\t<?php } elseif ( 'system_status' == $_GET['action'] ) {\t?>\n\t\t\t\t<div class=\"updated fade\" <?php if ( ! ( isset( $_REQUEST['bwsmn_form_submit'] ) || isset( $_REQUEST['bwsmn_form_submit_custom_email'] ) ) || $error != \"\" ) echo \"style=\\\"display:none\\\"\"; ?>><p><strong><?php echo $message; ?></strong></p></div>\n\t\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><strong><?php echo $error; ?></strong></p></div>\n\t\t\t\t<h3><?php _e( 'System status', 'bestwebsoft' ); ?></h3>\n\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Environment', 'bestwebsoft' ); ?></th><td></td></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php foreach ( $system_info['system_info'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Active Plugins', 'bestwebsoft' ); ?></th><th></th></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php if ( ! empty( $system_info['active_plugins'] ) ) {\n\t\t\t\t\t\t\tforeach ( $system_info['active_plugins'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t<?php }\n\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"bws_system_info\">\n\t\t\t\t\t\t<thead><tr><th><?php _e( 'Inactive Plugins', 'bestwebsoft' ); ?></th><th></th></tr></thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<?php if ( ! empty( $system_info['inactive_plugins'] ) ) {\n\t\t\t\t\t\t\tforeach ( $system_info['inactive_plugins'] as $key => $value ) { ?>\t\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $key; ?></td>\n\t\t\t\t\t\t\t\t\t<td scope=\"row\"><?php echo $value; ?></td>\n\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t<?php } \n\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<div class=\"clear\"></div>\t\t\t\t\t\t\n\t\t\t\t\t<form method=\"post\" action=\"admin.php?page=bws_plugins&amp;action=system_status\">\n\t\t\t\t\t\t<p>\t\t\t\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"bwsmn_form_submit\" value=\"submit\" />\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Send to support', 'bestwebsoft' ) ?>\" />\n\t\t\t\t\t\t\t<?php wp_nonce_field( plugin_basename(__FILE__), 'bwsmn_nonce_submit' ); ?>\t\t\n\t\t\t\t\t\t</p>\t\t\n\t\t\t\t\t</form>\t\t\t\t\n\t\t\t\t\t<form method=\"post\" action=\"admin.php?page=bws_plugins&amp;action=system_status\">\t\n\t\t\t\t\t\t<p>\t\t\t\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"bwsmn_form_submit_custom_email\" value=\"submit\" />\t\t\t\t\t\t\n\t\t\t\t\t\t\t<input type=\"submit\" class=\"button\" value=\"<?php _e( 'Send to custom email &#187;', 'bestwebsoft' ) ?>\" />\n\t\t\t\t\t\t\t<input type=\"text\" value=\"<?php echo $bwsmn_form_email; ?>\" name=\"bwsmn_form_email\" />\n\t\t\t\t\t\t\t<?php wp_nonce_field( plugin_basename(__FILE__), 'bwsmn_nonce_submit_custom_email' ); ?>\n\t\t\t\t\t\t</p>\t\t\t\t\n\t\t\t\t\t</form>\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t<?php } ?>\n\t\t</div>\n\t<?php }\n}\n\nif ( ! function_exists ( 'bws_plugin_init' ) ) {\n\tfunction bws_plugin_init() {\n\t\t// Internationalization, first(!)\n\t\tload_plugin_textdomain( 'bestwebsoft', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' ); \n\t}\n}\n\nif ( ! function_exists ( 'bws_admin_enqueue_scripts' ) ) {\n\tfunction bws_admin_enqueue_scripts() {\n\t\tglobal $wp_version;\n\t\tif ( $wp_version < 3.8 )\n\t\t\twp_enqueue_style( 'bws-admin-stylesheet', plugins_url( 'css/general_style_wp_before_3.8.css', __FILE__ ) );\t\n\t\telse\n\t\t\twp_enqueue_style( 'bws-admin-stylesheet', plugins_url( 'css/general_style.css', __FILE__ ) );\n\n\t\tif ( isset( $_GET['page'] ) && $_GET['page'] == \"bws_plugins\" ) {\n\t\t\twp_enqueue_style( 'bws_menu_style', plugins_url( 'css/style.css', __FILE__ ) );\n\t\t\twp_enqueue_script( 'bws_menu_script', plugins_url( 'js/bws_menu.js' , __FILE__ ) );\t\t\t\n\t\t\tif ( $wp_version >= '3.8' )\n\t\t\t\twp_enqueue_script( 'theme-install' );\n\t\t\telseif ( $wp_version >= '3.4' )\n\t\t\t\twp_enqueue_script( 'theme' );\n\t\t}\n\t}\n}\n\nif ( ! function_exists ( 'bws_admin_head' ) ) {\n\tfunction bws_admin_head() {\n\t\tif ( isset( $_GET['page'] ) && $_GET['page'] == \"bws_plugins\" ) { ?>\n\t\t\t<noscript>\n\t\t\t\t<style type=\"text/css\">\n\t\t\t\t\t.bws_product_button {\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</noscript>\n\t\t<?php }\n\t}\n}\n\nadd_action( 'admin_init', 'bws_plugin_init' );\nadd_action( 'admin_enqueue_scripts', 'bws_admin_enqueue_scripts' );\nadd_action( 'admin_head', 'bws_admin_head' );\n?>", "<?php\n/*\nPlugin Name: Job board\nPlugin URI: http://bestwebsoft.com/plugin/\nDescription: Plugin for adding to site possibility to create job offers page with custom search, send CV and subscribing for similar jobs.\nAuthor: BestWebSoft\nVersion: 1.0.1\nAuthor URI: http://bestwebsoft.com/\nLicense: GPLv3 or later\n*/\n\n/*\n\t@ Copyright 2014  BestWebSoft  ( http://support.bestwebsoft.com )\n\n\tThis program is free software; you can redistribute it and/or modify\n\tit under the terms of the GNU General Public License, version 2, as\n\tpublished by the Free Software Foundation.\n\n\tThis program is distributed in the hope that it will be useful,\n\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\n\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\tGNU General Public License for more details.\n\n\tYou should have received a copy of the GNU General Public License\n\talong with this program; if not, write to the Free Software\n\tFoundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n*/\n\n/**\n * Add Wordpress page 'bws_plugins' and sub-page of this plugin to admin-panel.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_admin_menu' ) ) {\n\tfunction jbbrd_add_admin_menu() {\n\t\tglobal $bstwbsftwppdtplgns_options, $wpmu, $bstwbsftwppdtplgns_added_menu;\n\t\t$bws_menu_info = get_plugin_data( plugin_dir_path( __FILE__ ) . \"bws_menu/bws_menu.php\" );\n\t\t$bws_menu_version = $bws_menu_info[\"Version\"];\n\t\t$base = plugin_basename( __FILE__ );\n\n\t\tif ( ! isset( $bstwbsftwppdtplgns_options ) ) {\n\t\t\tif ( 1 == $wpmu ) {\n\t\t\t\tif ( ! get_site_option( 'bstwbsftwppdtplgns_options' ) ) {\n\t\t\t\t\tadd_site_option( 'bstwbsftwppdtplgns_options', array(), '', 'yes' );\n\t\t\t\t}\n\t\t\t\t$bstwbsftwppdtplgns_options = get_site_option( 'bstwbsftwppdtplgns_options' );\n\t\t\t} else {\n\t\t\t\tif ( ! get_option( 'bstwbsftwppdtplgns_options' ) ) {\n\t\t\t\t\tadd_option( 'bstwbsftwppdtplgns_options', array(), '', 'yes' );\n\t\t\t\t}\n\t\t\t\t$bstwbsftwppdtplgns_options = get_option( 'bstwbsftwppdtplgns_options' );\n\t\t\t}\n\t\t}\n\t\tif ( isset( $bstwbsftwppdtplgns_options['bws_menu_version'] ) ) {\n\t\t\t$bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] = $bws_menu_version;\n\t\t\tunset( $bstwbsftwppdtplgns_options['bws_menu_version'] );\n\t\t\tupdate_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options, '', 'yes' );\n\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t} else if ( ! isset( $bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] ) || $bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] < $bws_menu_version ) {\n\t\t\t$bstwbsftwppdtplgns_options['bws_menu']['version'][ $base ] = $bws_menu_version;\n\t\t\tupdate_option( 'bstwbsftwppdtplgns_options', $bstwbsftwppdtplgns_options, '', 'yes' );\n\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t} else if ( ! isset( $bstwbsftwppdtplgns_added_menu ) ) {\n\t\t\t$plugin_with_newer_menu = $base;\n\t\t\tforeach ( $bstwbsftwppdtplgns_options['bws_menu']['version'] as $key => $value ) {\n\t\t\t\tif ( $bws_menu_version < $value && is_plugin_active( $base ) ) {\n\t\t\t\t\t$plugin_with_newer_menu = $key;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$plugin_with_newer_menu = explode( '/', $plugin_with_newer_menu );\n\t\t\t$wp_content_dir = defined( 'WP_CONTENT_DIR' ) ? basename( WP_CONTENT_DIR ) : 'wp-content';\n\t\t\tif ( file_exists( ABSPATH . $wp_content_dir . '/plugins/' . $plugin_with_newer_menu[0] . '/bws_menu/bws_menu.php' ) ) {\n\t\t\t\trequire_once( ABSPATH . $wp_content_dir . '/plugins/' . $plugin_with_newer_menu[0] . '/bws_menu/bws_menu.php' );\n\t\t\t} else {\n\t\t\t\trequire_once( dirname( __FILE__ ) . '/bws_menu/bws_menu.php' );\n\t\t\t}\n\t\t\t$bstwbsftwppdtplgns_added_menu = TRUE;\n\t\t}\n\t\tadd_menu_page( 'BWS Plugins', 'BWS Plugins', 'manage_options', 'bws_plugins', 'bws_add_menu_render', plugins_url( \"images/px.png\", __FILE__ ), 1001 );\n\t\tadd_submenu_page( 'bws_plugins', 'Job board', 'Job board', 'manage_options', \"job-board.php\", 'jbbrd_settings_page' );\t\n\t\t/* Add custom list page to candidate profile menu. */\n\t\t$hook = add_users_page( 'New job offers', 'New job offers', 'job_candidate', 'job_candidate', 'jbbrd_candidate_category_custom_search_page' );\n\t\tadd_action( \"load-$hook\", 'jbbrd_screen_options' );\n\t}\n}\n\n/**\n * Install plugin.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_plugin_install' ) ) {\n\tfunction jbbrd_plugin_install() {\n\t\t/* Set admins capabilities. */\n\t\tjbbrd_set_administrators_capabilities();\n\t\t/* Create employer & job candidate roles. */\n\t\tjbbrd_roles_create();\n\t}\n}\n\n/**\n * Initialize plugin.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_init' ) ) {\n\tfunction jbbrd_init() {\n\t\t/* Internationalization. */\n\t\tload_plugin_textdomain( 'jbbrd', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' );\n\t\t/* Session start. */\n\t\tjbbrd_session_open();\n\t\t/* Register Vacancy post type. */\n\t\tjbbrd_post_type_vacancy();\n\t\t/* Register taxonomy for vacancy. */\n\t\tjbbrd_taxonomy_vacancy();\n\t\t/* Register terms for archive. */\n\t\tjbbrd_taxonomy_vacancy_terms();\n\t\t/* Register terms for employment. */\n\t\tjbbrd_taxonomy_employment_terms();\n\t\t/* Hide logo image when search results displayed. */\n\t\tjbbrd_logo_search_hide();\n\t\t/* Call register settings function. */\n\t\tjbbrd_settings();\n\t}\n}\n\n/**\n * Initialize admins part of plugin.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_admin_init' ) ) {\n\tfunction jbbrd_admin_init() {\n\t\t/* Admin interface init. */\n\t\tjbbrd_admin_part_init();\n\t\t/* WP version check. */\n\t\tjbbrd_version_check();\n\t\t/* Removes the permalinks display on the vacancy post type. */\n\t\tjbbrd_remove_permalink_line();\n\t}\n}\n\n/**\n * Admin interface init.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_admin_part_init' ) ) {\n\tfunction jbbrd_admin_part_init() {\n\t\tglobal $bws_plugin_info, $jbbrd_plugin_info;\n\t\t/* Add variable for bws_menu */\n\t\t$jbbrd_plugin_info = get_plugin_data( __FILE__ );\n\t\tif ( ! isset( $bws_plugin_info ) || empty( $bws_plugin_info ) ) {\n\t\t\t$bws_plugin_info = array( 'id' => '139', 'version' => $jbbrd_plugin_info[\"Version\"] );\n\t\t}\n\t\t/* Custom meta boxes for the edit job screen. */\n\t\tadd_meta_box( \"list-pers-meta\", __( 'Job Information', 'jbbrd' ), \"jbbrd_meta_personal\", \"vacancy\", \"normal\", \"low\" );\n\t\t/* Check for sender plugin. */\n\t\tjbbrd_check_sender();\n\t\t/* Show error message on edit.php screen when shortcode error. */\n\t\tjbbrd_add_error_to_vacancy_CPT_edit();\n\t}\n}\n\n/**\n * WP version check.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_version_check' ) ) {\n\tfunction jbbrd_version_check() {\n\t\tglobal $wp_version, $jbbrd_plugin_info;\n\t\t$require_wp = \"3.5\"; /* Wordpress at least requires version */\n\t\t$plugin = plugin_basename( __FILE__ );\n\t\tif ( version_compare( $wp_version, $require_wp, \"<\" ) ) {\n\t\t\tif ( is_plugin_active( $plugin ) ) {\n\t\t\t\tdeactivate_plugins( $plugin );\n\t\t\t\twp_die( \"<strong>\" . $jbbrd_plugin_info['Name'] . \" </strong> \" . __( 'requires', 'jbbrd' ) . \" <strong>WordPress \" . $require_wp . \"</strong> \" . __( 'or higher, that is why it has been deactivated! Please upgrade WordPress and try again.', 'jbbrd') . \"<br /><br />\" . __( 'Back to the WordPress', 'jbbrd') . \" <a href='\" . get_admin_url( null, 'plugins.php' ) . \"'>\" . __( 'Plugins page', 'jbbrd') . \"</a>.\" );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Session start.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_session_open' ) ) {\n\tfunction jbbrd_session_open() {\n\t    if ( ! @session_id() ) {\n    \t    @session_start();\n    \t}\n\t}\n}\n\n/**\n * Register \"vacancy\" custom post type function. Set global array $jbbrd_options.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_post_type_vacancy' ) ) {\n\tfunction jbbrd_post_type_vacancy() {\n\t\t/* Register \"vacancy\" CPT. */ \n\t\tregister_post_type( 'vacancy', array(\n\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Jobs', 'jbbrd' ), \n\t\t\t\t'singular_name' \t\t\t=> __( 'Job', 'jbbrd' ),\n\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job', 'jbbrd' ),\n\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job', 'jbbrd' ),\n\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit', 'jbbrd' ),\n\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job', 'jbbrd' ),\n\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job', 'jbbrd' ),\n\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View jobs', 'jbbrd' ),\n\t\t\t\t'view_item' \t\t\t\t=> __( 'View job', 'jbbrd' ),\n\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job', 'jbbrd' ),\n\t\t\t\t'not_found' \t\t\t\t=> __( 'No jobs found', 'jbbrd' ),\n\t\t\t\t'not_found_in_trash' \t\t=> __( 'No jobs found in Trash', 'jbbrd' ),\n\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job', 'jbbrd' ),\n\t\t\t),\n\t\t\t'singular_label' \t=> __( 'Job', 'jbbrd' ),\n\t\t\t'public' \t\t\t=> TRUE,\n\t\t\t'show_ui' \t\t\t=> TRUE, /* UI in admin panel. */\n\t\t\t'_builtin' \t\t\t=> FALSE, /* It's a custom post type, not built in. */\n\t\t\t'_edit_link' \t\t=> 'post.php?post=%d',\n\t\t\t'capability_type'\t=> 'vacancy',\n\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t/* Admins capabilities. */\n\t\t\t\t'edit_posts'\t\t\t\t=> 'edit_vacancies',\n\t\t\t\t'edit_others_posts'\t\t\t=> 'edit_others_vacancies',\n\t\t\t\t'delete_posts'\t\t\t\t=> 'delete_vacancies',\n\t\t\t\t'delete_others_posts'\t\t=> 'delete_others_vacancies',\n\t\t\t\t'delete_private_posts'\t\t=> 'delete_private_vacancies',\n\t\t\t\t'edit_private_posts'\t\t=> 'edit_private_vacancies',\n\t\t\t\t'read_private_posts'\t\t=> 'read_private_vacancies',\n\t\t\t\t/* Employer capabilities. */\n\t\t\t\t'edit_published_posts'\t\t=> 'edit_published_vacancies',\n\t\t\t\t'upload_files'\t\t\t\t=> 'upload_files',\n\t\t\t\t'publish_posts'\t\t\t\t=> 'publish_vacancies',\n\t\t\t\t'delete_published_posts' \t=> 'delete_published_vacancies',\n\t\t\t\t'edit_post' \t\t\t\t=> 'edit_vacancy',\n\t\t\t\t'delete_post' \t\t\t\t=> 'delete_vacancy',\n\t\t\t\t'read_post' \t\t\t\t=> 'read_vacancy',\n\t\t\t),\n\t\t\t'hierarchical' \t\t=> FALSE,\n\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t'menu_position' \t=> 5, /* Position in admin menu. */\n\t\t\t'rewrite' \t\t\t=> array( \"slug\" => \"vacancies\" ), /* Permalinks. */\n\t\t\t'query_var' \t\t=> 'vacancy', /* This goes to the WP_Query schema. */\n\t\t\t'supports' \t\t\t=> array( \n\t\t\t\t'title', \n\t\t\t\t'editor', \n\t\t\t\t'jbbrd_businesses',\n\t\t\t\t'jbbrd_employment',\n\t\t\t\t'thumbnail', /* Displays a box for featured image. */\n\t\t\t)\n\t\t));\n\t}\n}\n\n/**\n * Set \"vacancy\" custom taxonomies function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_vacancy' ) ) {\n\tfunction jbbrd_taxonomy_vacancy() {\n\t\t/* Register jbbrd_businesses taxonomy. */\n\t\tregister_taxonomy( \n\t\t\t'jbbrd_businesses', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray(\n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Job categories', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Job category', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job category', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job category', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit job categories', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job category', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job category', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View job categories', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View job category', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job category', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No job categories found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No job categories found in Trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job category', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> TRUE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t\t'sort'\t\t\t\t=> TRUE,\n\t\t\t\t'orderby' \t\t\t=> 'term_order',\n\t\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t\t'manage_terms' \t\t=> 'manage_jbbrd_businesses_tags',\n\t\t\t\t\t'edit_terms' \t\t=> 'edit_jbbrd_businesses_tags',\n\t\t\t\t\t'delete_terms' \t\t=> 'delete_jbbrd_businesses_tags',\n\t\t\t\t\t'assign_terms' \t\t=> 'assign_jbbrd_businesses_tags',\n\t\t\t\t),\n\t\t\t)\n\t\t);\n\t\t/* Register archive taxonomy. */\n\t\tregister_taxonomy(\n\t\t\t'archive', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray( \n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Job archive categories', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Job archive category', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add job archive category', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add new job archive category', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit job archive categories', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit job archive category', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New job archive category', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View job archive categories', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View job archive category', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search job category', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No job archive categories found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No job archive categories found in Trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent job archive category', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> FALSE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t\t/* Register jbbrd_employment taxonomy. */\n\t\tregister_taxonomy( \n\t\t\t'jbbrd_employment', \n\t\t\tarray( 'vacancy' ), \n\t\t\tarray( \n\t\t\t\t'hierarchical' \t\t=> TRUE, \n\t\t\t\t'labels'\t\t\t=> array(\n\t\t\t\t\t'name' \t\t\t\t\t\t=> __( 'Employment', 'jbbrd' ), \n\t\t\t\t\t'singular_name' \t\t\t=> __( 'Employment type', 'jbbrd' ),\n\t\t\t\t\t'add_new' \t\t\t\t\t=> __( 'Add employment types', 'jbbrd' ),\n\t\t\t\t\t'add_new_item'\t\t\t\t=> __( 'Add employment type', 'jbbrd' ),\n\t\t\t\t\t'edit' \t\t\t\t\t\t=> __( 'Edit employment types', 'jbbrd' ),\n\t\t\t\t\t'edit_item' \t\t\t\t=> __( 'Edit employment type', 'jbbrd' ),\n\t\t\t\t\t'new_item' \t\t\t\t\t=> __( 'New employment type', 'jbbrd' ),\n\t\t\t\t\t'view' \t\t\t\t\t\t=> __( 'View employment types', 'jbbrd' ),\n\t\t\t\t\t'view_item' \t\t\t\t=> __( 'View employment type', 'jbbrd' ),\n\t\t\t\t\t'search_items'\t \t\t\t=> __( 'Search employment types', 'jbbrd' ),\n\t\t\t\t\t'not_found' \t\t\t\t=> __( 'No employment types found', 'jbbrd' ),\n\t\t\t\t\t'not_found_in_trash' \t\t=> __( 'No employment types found in trash', 'jbbrd' ),\n\t\t\t\t\t'parent' \t\t\t\t\t=> __( 'Parent employment type', 'jbbrd' ),\n\t\t\t\t),\n\t\t\t\t'rewrite' \t\t\t=> TRUE,\n\t\t\t\t'show_ui'\t\t\t=> TRUE, /* Show to user. */\n\t\t\t\t'query_var'\t\t\t=> TRUE,\n\t\t\t\t'sort'\t\t\t\t=> TRUE,\n\t\t\t\t'orderby' \t\t\t=> 'term_order',\n\t\t\t\t'map_meta_cap'    \t=> TRUE,\n\t\t\t\t'capabilities' \t\t=> array(\n\t\t\t\t\t'manage_terms' \t\t=> 'manage_jbbrd_employment_tags',\n\t\t\t\t\t'edit_terms' \t\t=> 'edit_jbbrd_employment_tags',\n\t\t\t\t\t'delete_terms' \t\t=> 'delete_jbbrd_employment_tags',\n\t\t\t\t\t'assign_terms' \t\t=> 'assign_jbbrd_employment_tags',\n\t\t\t\t),\n\t\t\t)\n\t\t);\n\t}\n}\n\n/**\n * Set custom terms for 'archive' taxonomy.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_vacancy_terms' ) ) {\n\tfunction jbbrd_taxonomy_vacancy_terms() {\n\t\tif ( ! term_exists( 'archived', 'archive' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Archived', 'jbbrd' ), /* the term. */ \n\t\t\t\t'archive', /* the taxonomy. */\n\t\t\t\tarray(\n\t\t\t\t\t'description'\t=> __( 'This job is in archive', 'jbbrd' ),\n\t\t\t\t\t'slug' \t\t\t=> 'archived',\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'posted', 'archive' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Posted', 'jbbrd' ), /* the term. */\n\t\t\t\t'archive', /* the taxonomy. */\n\t\t\t\tarray(\n\t\t\t\t\t'description'\t=> __( 'This job is posted', 'jbbrd' ),\n\t\t\t\t\t'slug' \t\t\t=> 'posted',\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Set custom terms for 'jbbrd_employment' taxonomy.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_taxonomy_employment_terms' ) ) {\n\tfunction jbbrd_taxonomy_employment_terms() {\n\t\tif ( ! term_exists( 'freelance', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Freelance', 'jbbrd' ), /* the term. */ \n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'freelance', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'full-time', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Full Time', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'full-time',\t\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'internship', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Internship', 'jbbrd' ), /* the term. */ \n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'internship', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'part-time', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Part Time', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'part-time', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif ( ! term_exists( 'temporary', 'jbbrd_employment' ) ) {\n\t\t\twp_insert_term(\n\t\t\t\t__( 'Temporary', 'jbbrd' ), /* the term. */\n\t\t\t\t'jbbrd_employment', /* the taxonomy. */\n\t\t\t\tarray( \n\t\t\t\t\t'description'\t=> '',\n\t\t\t\t\t'slug' \t\t\t=> 'temporary', \n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Removes the wrong permalinks & buttons on the vacancy post type editor\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_permalink_line' ) ) {\n\tfunction jbbrd_remove_permalink_line() {\n\t\tif ( isset( $_GET['post'] ) ) {\n\t\t\t$post_type = get_post_type( $_GET['post'] );\n\t\t\tif ( $post_type == 'vacancy' && $_GET['action'] == 'edit' ) {\n\t\t\t\t/* Hide permalink line menu. */\n\t\t\t\techo '<style>#edit-slug-box{display:none;}</style>';\n\t\t\t\t/* Hide preview button. */\n\t\t\t\techo '<style>#minor-publishing-actions{display:none;}</style>';\n\t\t\t\t/* Hide \"Add media\" button. */\n\t\t\t\techo '<style>#wp-content-media-buttons{display:none;}</style>';\n\t\t\t}\n\t\t}\n\t\t/* If new vacancy create, hide them too. */\n\t\tif ( isset( $_GET['post_type'] ) && ( 'vacancy' == $_GET['post_type'] ) ) {\n\t\t\t/* Hide preview button. */\n\t\t\techo '<style>#preview-action{display:none;}</style>';\n\t\t\t/* Hide permalink line menu. */\n\t\t\techo '<style>#edit-slug-box{display:none;}</style>';\n\t\t\t/* Hide \"Add media\" button. */\n\t\t\techo '<style>#wp-content-media-buttons{display:none;}</style>';\n\t\t}\n\t}\n}\n\n/**\n * Register settings function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_settings' ) ) {\n\tfunction jbbrd_settings() {\n\t\tglobal $wpmu, $wpdb, $jbbrd_options, $jbbrd_option_defaults, $jbbrd_plugin_info;\n\t\t/* Set defaults array. */\n\t\t$jbbrd_option_defaults = array(\n\t\t\t'plugin_option_version' \t\t\t=> $jbbrd_plugin_info[\"Version\"],\n\t\t\t'post_per_page'\t\t\t\t\t\t=> 5,\n\t\t\t'custom_time_hours'\t\t\t\t\t=> 0,\n\t\t\t'custom_time_min'\t\t\t\t\t=> 0,\n\t\t\t'money'\t\t\t\t\t\t\t\t=> array( 'AUD', 'BGN', 'CAD', 'CHF', 'CNY', 'CYP', 'CZK', 'DKK', \n\t\t\t\t'EEK', 'EUR', 'GBP', 'HKD', 'HRK', 'HUF', 'IDR', 'ISK', 'JPY', 'KPW', 'LTL', 'LVL', 'MTL', 'MYR',\n\t\t\t\t'NOK', 'NZD', 'PHP', 'PLN', 'RON', 'RUR', 'SEK', 'SGD', 'SIT', 'SKK', 'THB', 'TRY', 'USD', 'ZAR',\n\t\t\t),\n\t\t\t'money_choose'\t\t\t\t\t\t=> 'USD',\n\t\t\t'time_period'\t\t\t\t\t\t=> array( \n\t\t\t\t__( 'year', 'jbbrd' ), \n\t\t\t\t__( 'month', 'jbbrd' ), \n\t\t\t\t__( 'week', 'jbbrd' ), \n\t\t\t\t__( 'day', 'jbbrd' ), \n\t\t\t\t__( 'hour', 'jbbrd' ),\n\t\t\t),\n\t\t\t'time_period_choose'\t\t\t\t=> __( 'month', 'jbbrd' ),\n\t\t\t'logo_position'\t\t\t\t\t\t=> 'left',\n\t\t\t'frontend_form'\t\t\t\t\t\t=> 1,\n\t\t\t'location_select'\t\t\t\t\t=> 0,\n\t\t\t'vacancy_reply_text'\t\t\t\t=> __( 'You replied to job offer.', 'jbbrd' ),\n\t\t\t'archieving_period'\t\t\t\t\t=> 30,\n\t\t);\n\t\t/* Install the option defaults. */\n\t\tif ( 1 == $wpmu ) {\n\t\t\tif ( ! get_site_option( 'jbbrd_options' ) )\n\t\t\t\tadd_site_option( 'jbbrd_options', $jbbrd_option_defaults, '', 'yes' );\n\t\t} else {\n\t\t\tif ( ! get_option( 'jbbrd_options' ) )\n\t\t\t\tadd_option( 'jbbrd_options', $jbbrd_option_defaults, '', 'yes' );\n\t\t}\n\t\t/* Get options from the database. */\n\t\t$jbbrd_options = ( 1 == $wpmu ) ? get_site_option( 'jbbrd_options' ) : get_option( 'jbbrd_options' );\n\n\t\t/* Array merge incase this version has added new options */\n\t\tif ( ! isset( $jbbrd_options['plugin_option_version'] ) || $jbbrd_options['plugin_option_version'] != $jbbrd_plugin_info[\"Version\"] ) {\n\t\t\t$jbbrd_options = array_merge( $jbbrd_option_defaults, $jbbrd_options );\n\t\t\t$jbbrd_options['plugin_option_version'] = $jbbrd_plugin_info[\"Version\"];\n\t\t\tupdate_option( 'jbbrd_options', $jbbrd_options );\n\t\t}\t\n\t}\n}\n\n/**\n * \u0421hecking for the existence of Sender Plugin or Sender Pro Plugin.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_check_sender' ) ) {\n\tfunction jbbrd_check_sender() {\n\t\tglobal $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t$all_plugins = get_plugins();\n\t\tif ( ! function_exists( 'is_plugin_active_for_network' ) )\n\t\t\trequire_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\n\t\tif ( ! ( array_key_exists( 'sender/sender.php', $all_plugins ) || array_key_exists( 'sender-pro/sender-pro.php', $all_plugins ) ) ) {\n\t\t\t$jbbrd_sender_not_found = sprintf( __( '%sSender Plugin%s is not found.%s', 'jbbrd' ), ( '<a target=\"_blank\" href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\">' ),'</a>', '<br />' );\n\t\t\t$jbbrd_sender_not_found .= sprintf( __( 'If you want to give send CV possibility to Job candidates, you need install and activate Sender plugin.%s', 'jbbrd' ), '</br>' );\n\t\t\t$jbbrd_sender_not_found .= __( 'You can download Sender Plugin from', 'jbbrd' ) . ' <a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\" title=\"' . __( 'Developers website', 'jbbrd' ). '\"target=\"_blank\">' . __( 'website of plugin Authors', 'jbbrd' ) . ' </a>';\n\t\t\t$jbbrd_sender_not_found .= __( 'or', 'jbbrd' ) . ' <a href=\"' . esc_url( 'http://wordpress.org/plugins/sender/' ) .'\" title=\"Wordpress\" target=\"_blank\">'. __( 'Wordpress.', 'jbbrd' ) . '</a>';\n\t\t} else {\n\t\t\tif ( ! ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender/sender.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) ) {\n\t\t\t\t$jbbrd_sender_not_active = sprintf( __( '%sSender Plugin%s is not active.%sIf you want to give send CV possibility to Job candidates, you need %sactivate Sender plugin.%s', 'jbbrd' ), ( '<a target=\"_blank\" href=\"' . esc_url( 'http://bestwebsoft.com/plugin/sender/' ) . '\">' ),'</a>', '<br />', ( '<a href=\"' . esc_url( 'plugins.php' ) . '\">' ), '</a>' );\n\t\t\t}\n\t\t\t/* Old version. */\n\t\t\tif ( ( ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active_for_network( 'sender/sender.php' ) ) && isset( $all_plugins['sender/sender.php']['Version'] ) && $all_plugins['sender/sender.php']['Version'] < '0.5' ) || \n\t\t\t\t( ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) && isset( $all_plugins['sender-pro/sender-pro.php']['Version'] ) && $all_plugins['sender-pro/sender-pro.php']['Version'] < '0' ) ) {\n\t\t\t\t$jbbrd_sender_not_found = __( 'Sender Plugin has old version.', 'jbbrd' ) . '</br>' . __( 'You need update this plugin for sendmail function correct work.', 'jbbrd' );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Find permalink page.\n * @return $jbbrd_shortcode_page_permalink string page with shortcode links\n */\nif ( ! function_exists( 'jbbrd_find_shortcode_page' ) ) {\n\tfunction jbbrd_find_shortcode_page() {\n\t\tglobal $wpdb;\n\t\t$jbbrd_vacancy = like_escape( '[jbbrd_vacancy]' );\n\t\t$jbbrd_vacancy = esc_sql( $jbbrd_vacancy );\n\t\t$jbbrd_vacancy = '%' . $jbbrd_vacancy . '%';\n\t\t$jbbrd_shortcode_page_permalink = $wpdb->get_var( \"\n\t\t\tSELECT `guid` \n\t\t\tFROM `\" . $wpdb->prefix . \"posts` \n\t\t\tWHERE `post_content` LIKE '\" . $jbbrd_vacancy . \"' \n\t\t\tAND `post_status` = 'publish'\"\n\t\t);\n\t\treturn $jbbrd_shortcode_page_permalink;\n\t}\n}\n\n/**\n * Function for display job-board settings page in the admin area.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_settings_page' ) ) {\n\tfunction jbbrd_settings_page() {\n\t\tglobal $wpdb, $jbbrd_options, $jbbrd_option_defaults, $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t$error = \"\";\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t/* Save data for settings page. */\n\t\tif ( isset( $_POST['jbbrd_form_submit'] ) && check_admin_referer( plugin_basename(__FILE__), 'jbbrd_nonce_name' ) ) {\n\t\t\t/* Check if start shedule time changed. */\n\t\t\tif ( ( $_POST['custom_time_hours'] != $jbbrd_options['custom_time_hours'] ) || ( $_POST['custom_time_min'] != $jbbrd_options['custom_time_min'] ) ) \n\t\t\t\t$jbbrd_reset_shedule_time = true;\n\t\t\telse\n\t\t\t\t$jbbrd_reset_shedule_time = false;\n\t\t\t\n\t\t\tif ( ( isset( $_POST['post_per_page'] ) ) && ( '' != $_POST['post_per_page'] ) && ( 0 < $_POST['post_per_page'] ) && ( is_numeric( $_POST['post_per_page'] ) ) ) {\n\t\t\t\t$jbbrd_options['post_per_page'] = esc_html( floor( $_POST['post_per_page'] ) );\n\t\t\t} elseif ( '-1' == $_POST['post_per_page'] ) {\n\t\t\t\t$jbbrd_options['post_per_page'] = '-1';\n\t\t\t}\n\t\t\t/* Set salary monetary unit. */\n\t\t\tif ( ( isset( $_POST['money_choose'] ) ) && ( '' != $_POST['money_choose'] ) )\n\t\t\t\t$jbbrd_options['money_choose'] = esc_html( $_POST['money_choose'] );\n\n\t\t\t/* Set time period unit. */\n\t\t\tif ( ( isset( $_POST['time_period_choose'] ) ) && ( '' != $_POST['time_period_choose'] ) )\n\t\t\t\t$jbbrd_options['time_period_choose'] = esc_html( $_POST['time_period_choose'] );\n\n\t\t\t/* Set logo position. */\n\t\t\tif ( ( isset( $_POST['logo_position'] ) ) && ( '' != $_POST['logo_position'] ) )\n\t\t\t\t$jbbrd_options['logo_position'] = esc_html( $_POST['logo_position'] );\n\n\t\t\t/* Frontend filter form show. */\n\t\t\tif ( ( isset( $_POST['frontend_form'] ) ) && ( '' != $_POST['frontend_form'] ) )\n\t\t\t\t$jbbrd_options['frontend_form'] = esc_html( $_POST['frontend_form'] );\n\t\t\telse\n\t\t\t\t$jbbrd_options['frontend_form'] = 0;\n\n\t\t\t/* Backend vacancy edit location metafield select show. */\n\t\t\tif ( ( isset( $_POST['location_select'] ) ) && ( '' != $_POST['location_select'] ) )\n\t\t\t\t$jbbrd_options['location_select'] = esc_html( $_POST['location_select'] );\n\t\t\telse\n\t\t\t\t$jbbrd_options['location_select'] = 0;\n\n\t\t\t/* Set time period unit. */\n\t\t\tif ( ( isset( $_POST['vacancy_reply_text'] ) ) && ( '' != $_POST['vacancy_reply_text'] ) )\n\t\t\t\t$jbbrd_options['vacancy_reply_text'] = stripslashes( esc_html( $_POST['vacancy_reply_text'] ) );\n\n\t\t\t/* Set archieving period. */\n\t\t\tif ( ( isset( $_POST['archieving_period'] ) ) && ( '' != $_POST['archieving_period'] ) && ( is_numeric( $_POST['archieving_period'] ) ) )\n\t\t\t\t$jbbrd_options['archieving_period'] = esc_html( floor( $_POST['archieving_period'] ) );\n\n\t\t\t/* Set custom time to start move to archive shedule. */\n\t\t\tif ( ( isset( $_POST['custom_time_hours'] ) ) && ( '' != $_POST['custom_time_hours'] ) && ( is_numeric( $_POST['custom_time_hours'] ) ) ) {\n\t\t\t\tif ( 23 < floor( $_POST['custom_time_hours'] ) )\n\t\t\t\t\t$jbbrd_options['custom_time_hours'] = 23;\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_options['custom_time_hours'] = esc_html( floor( $_POST['custom_time_hours'] ) );\n\t\t\t}\n\t\t\tif ( ( isset( $_POST['custom_time_min'] ) ) && ( '' != $_POST['custom_time_min'] ) && ( is_numeric( $_POST['custom_time_min'] ) ) ) {\n\t\t\t\tif ( 59 < floor( $_POST['custom_time_min'] ) )\n\t\t\t\t\t$jbbrd_options['custom_time_min'] = 59;\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_options['custom_time_min'] = esc_html( floor( $_POST['custom_time_min'] ) );\n\t\t\t}\n\t\t\t/* Set shortcode permalink to options. */\n\t\t\t$jbbrd_options['jbbrd_shortcode_permalink'] = $jbbrd_shortcode_permalink;\n\t\t\t/* Update options in the database. */\n\t\t\tupdate_option( 'jbbrd_options', $jbbrd_options, '', 'yes' );\n\t\t\t/* Set new time for sendmail shedule, if time is changed. */\n\t\t\tif ( true == $jbbrd_reset_shedule_time ) {\n\t\t\t\t/* Set GMT timezone. */ \n\t\t\t\t$jbbrd_GMT = $get_option('gmt_offset');\n\t\t\t\t/* Set new time. */\n\t\t\t\t$jbbrd_shedule_time = ( $jbbrd_options['custom_time_hours'] * 3600 ) + ( $jbbrd_GMT * 3600 ) + ( $jbbrd_options['custom_time_min'] * 60 );\n\t\t\t\t/* Clear old schedule hook time set. */\n\t\t\t\twp_clear_scheduled_hook( 'jbbrd_move_vacancies_to_archive_dayly_function' );\n\t\t\t\t/* Set new schedule hook. */\n\t\t\t\tjbbrd_move_to_archive_schedule( $jbbrd_shedule_time );\n\t\t\t}\n\t\t\t$message = __( \"Settings saved.\", 'jbbrd' );\n\t\t}\n\t\t/* Warning if not found shortcode. */\n\t\tif ( '' == $jbbrd_shortcode_permalink ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Shortcode is not found.', 'jbbrd' ) . '&nbsp;<br />' . __( 'Please place shortcode', 'jbbrd' ) . '&nbsp;<strong>[jbbrd_vacancy]</strong>&nbsp;' . __( 'to page or post and press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;.<br />';\n\t\t} else {\n\t\t\tif ( ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Please press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button for shortcode new place settings.', 'jbbrd' ) . '<br />';\n\t\t\t}\n\t\t}\n\t\t/* Warning if not found sender plugin. */\n\t\tif ( isset( $jbbrd_sender_not_found ) ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_sender_not_found . '<br />';\n\t\t}\n\t\tif ( ( isset( $jbbrd_sender_not_active ) ) || ( '' != $jbbrd_sender_not_active ) ) {\n\t\t\t$error .= '<strong>' . __( 'Notice:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_sender_not_active . '<br />';\n\t\t} ?>\n\t\t<div class=\"wrap\">\n\t\t\t<div class=\"icon32 icon32-bws\" id=\"icon-options-general\"></div>\n\t\t\t<h2><?php _e( 'Job board settings', 'jbbrd' ); ?></h2>\n\t\t\t<h2 class=\"nav-tab-wrapper\">\n\t\t\t\t<a class=\"nav-tab<?php if ( ! isset( $_GET['tab'] ) ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=job-board.php\"><?php _e( 'Settings', 'jbbrd' ); ?></a>\n\t\t\t\t<a class=\"nav-tab<?php if ( isset( $_GET['tab'] ) && 'faq' == $_GET['tab'] ) echo ' nav-tab-active'; ?>\" href=\"admin.php?page=job-board.php&amp;tab=faq\"><?php _e( 'FAQ', 'jbbrd' ); ?></a>\n\t\t\t</h2>\n\t\t\t<div class=\"updated fade\" <?php if ( ! isset( $_POST['jbbrd_form_submit'] ) ) echo 'style=\"display:none;\"'; ?> >\n\t\t\t\t<p><strong><?php if ( isset( $message ) ) echo $message; ?></strong></p>\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_settings_notice\" class=\"updated fade\" style=\"display:none\">\n\t\t\t\t<p>\n\t\t\t\t\t<strong><?php _e( \"Notice:\", 'jbbrd' ); ?></strong>\n\t\t\t\t\t<?php printf( __( \"The plugin's settings have been changed. In order to save them please don't forget to click the %sSave Changes%s button.\", 'jbbrd' ), '&laquo;', '&raquo;' ); ?>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><?php echo $error; ?></p></div>\t\t\t\n\t\t\t<?php if ( ! isset( $_GET['tab'] ) ) { /* Showing settings tab */?>\n\t\t\t\t<p><?php print( __( 'Place shortcode', 'jbbrd' ) . '&nbsp;<span style=\"font-weight:bold;font-size:1.2em;\">[jbbrd_vacancy]</span>&nbsp;' . __( 'to your job page to display frontend content and', 'jbbrd' ) . '&nbsp;<span style=\"font-weight:bold;font-size:1.2em;\">[jbbrd_registration]</span>&nbsp;' . __( 'to display registration form.', 'jbbrd' ) ); ?><br />\n\t\t\t\t<strong><?php print( __( 'Notice:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'you must save changes when replace shortcodes.', 'jbbrd' ) ); ?></p>\n\t\t\t\t<form id=\"jbbrd_settings_form\" method=\"post\" action=\"admin.php?page=job-board.php\">\n\t\t\t\t\t<table class=\"form-table\">\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Number of jobs on page', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td><input maxlength=\"2\" type=\"text\" name=\"post_per_page\" value=\"<?php if ( isset( $jbbrd_options['post_per_page'] ) ) echo stripslashes( $jbbrd_options['post_per_page'] ); else echo stripslashes( $jbbrd_option_defaults['post_per_page'] ); ?>\"/>\n\t\t\t\t\t\t\t<?php _e( 'per page', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( '(You can set -1 to to show all jobs).' , 'jbbrd' ) . '</slan>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Salary monetary unit', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<select name=\"money_choose\">\n\t\t\t\t\t\t\t\t\t<?php foreach ( $jbbrd_options['money'] as $key => $money_unit ) {\n\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\techo '<option value=\"' . $money_unit . '\"';\n\t\t\t\t\t\t\t\t\t\t\tif ( $money_unit == $jbbrd_options['money_choose'] ) echo ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\techo '\">' . $money_unit . '</option>';\n\t\t\t\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Salary period unit', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<select name=\"time_period_choose\">\n\t\t\t\t\t\t\t\t\t<?php foreach ( $jbbrd_options['time_period'] as $key => $money_unit ) {\n\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\techo '<option value=\"' . $money_unit . '\"';\n\t\t\t\t\t\t\t\t\t\t\tif ( $money_unit == $jbbrd_options['time_period_choose'] ) echo ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\techo '\">' . $money_unit . '</option>';\n\t\t\t\t\t\t\t\t\t} ?>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( '( Time period for current salary ).' , 'jbbrd' ) . '</slan>' ); ?></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Frontend logo position', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"logo_position\" value=\"left\" <?php if ( 'left' == $jbbrd_options['logo_position'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php _e( 'Left', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"logo_position\" value=\"right\" <?php if ( 'right' == $jbbrd_options['logo_position'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php _e( 'Right', 'jbbrd' ); ?><br />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Show frontend form', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"frontend_form\" value=\"1\" <?php if ( 1 == $jbbrd_options['frontend_form'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( 'Show/hide frontend form for filtering jobs.' , 'jbbrd' ) . '</span>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Location field type', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"location_select\" value=\"1\" <?php if ( 1 == $jbbrd_options['location_select'] ) echo ' checked=\"checked\"'; ?> />\n\t\t\t\t\t\t\t\t<?php print( '<span class=\"jbbrd_admin_options_notice\">' . __( 'Change location field in frontens sorting form to select box of all locations which already add to jobs base.' , 'jbbrd' ) . '</span>' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Template text for CV sending', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<textarea name=\"vacancy_reply_text\"><?php if ( isset( $jbbrd_options['vacancy_reply_text'] ) ) echo stripslashes( $jbbrd_options['vacancy_reply_text'] ); else echo stripslashes( $jbbrd_option_defaults['vacancy_reply_text'] ); ?></textarea>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Job offers default expiry time', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input maxlength=\"3\" size=\"2\" type=\"text\" name=\"archieving_period\" value=\"<?php if ( isset( $jbbrd_options['archieving_period'] ) ) echo stripslashes( $jbbrd_options['archieving_period'] ); else echo stripslashes( $jbbrd_option_defaults['archieving_period'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'days', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr valign=\"top\">\n\t\t\t\t\t\t\t<th><?php _e( 'Daily archiving time', 'jbbrd' ); ?></th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input maxlength=\"2\" size=\"2\" type=\"text\" name=\"custom_time_hours\" value=\"<?php if ( isset( $jbbrd_options['custom_time_hours'] ) ) echo stripslashes( $jbbrd_options['custom_time_hours'] ); else echo stripslashes( $jbbrd_option_defaults['custom_time_hours'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'hours', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t\t<input maxlength=\"2\" size=\"2\" type=\"text\" name=\"custom_time_min\" value=\"<?php if ( isset( $jbbrd_options['custom_time_min'] ) ) echo stripslashes( $jbbrd_options['custom_time_min'] ); else echo stripslashes( $jbbrd_option_defaults['custom_time_min'] ); ?>\"/>\n\t\t\t\t\t\t\t\t<?php _e( 'min', 'jbbrd' ); ?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_form_submit\" value=\"submit\" />\n\t\t\t\t\t<p class=\"submit_div\">\n\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"<?php _e( 'Save Changes', 'jbbrd' ); ?>\" />\n\t\t\t\t\t</p>\n\t\t\t\t\t<?php wp_nonce_field( plugin_basename( __FILE__ ), 'jbbrd_nonce_name' ); ?>\n\t\t\t\t</form>\n\t\t\t<?php } elseif ( 'faq' == $_GET['tab'] ) { \n\t\t\t\t/* Get FAQ part of readme.txt */\n\t\t\t\t$jbbrd_file_handle = fopen( plugin_dir_path( __FILE__ ) . 'readme.txt' , 'r' );\n\t\t\t\t/* Set start, finish strings. */\n\t\t\t\t$jbbrd_text_start = '== Frequently Asked Questions ==';\n\t\t\t\t$jbbrd_text_finish = '== Screenshots ==';\n\t\t\t\t$jbbrd_output_start = 0;\n\t\t\t\t$jbbrd_pattern = '/^=/';\n\t\t\t\t$jbbrd_header_pattern = '/^={2,}/';\n\t\t\t\t/* Output to page. */\n\t\t\t\tif ( $jbbrd_file_handle ) {\n\t\t\t\t\t?><div id=\"jbbrd_faq\"><?\n\t\t\t\t\twhile ( ! feof( $jbbrd_file_handle ) ) {\n\t\t\t\t\t\t$jbbrd_line = fgets( $jbbrd_file_handle );\n\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_start ) ) {\n\t\t\t\t\t\t\t$jbbrd_output_start = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_finish ) ) {\n\t\t\t\t\t\t\t$jbbrd_output_start = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( 1 == $jbbrd_output_start ) {\n\t\t\t\t\t\t\tif ( stristr( $jbbrd_line , $jbbrd_text_start ) ) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( preg_match( $jbbrd_pattern , $jbbrd_line ) ) {\n\t\t\t\t\t\t\t\t\techo '<p><strong>' . $jbbrd_line . '</strong></p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\techo '<p>' . $jbbrd_line . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twp_nonce_field( plugin_basename( __FILE__ ), 'jbbrd_nonce_name' );\n\t\t\t\t\t?></div><?php\n\t\t\t\t}\n\t\t\t\tfclose( $jbbrd_file_handle );\n\t\t\t} ?>\n\t\t\t<div class=\"bws-plugin-reviews\">\n\t\t\t\t<div class=\"bws-plugin-reviews-rate\">\n\t\t\t\t\t<?php _e( 'If you enjoy our plugin, please give it 5 stars on WordPress', 'jbbrd' ); ?>:\n\t\t\t\t\t<a href=\"http://wordpress.org/support/view/plugin-reviews/job-board/\" target=\"_blank\" title=\"Job board\"><?php _e( 'Rate the plugin', 'jbbrd' ); ?></a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bws-plugin-reviews-support\">\n\t\t\t\t\t<?php _e( 'If there is something wrong about it, please contact us', 'jbbrd' ); ?>:\n\t\t\t\t\t<a href=\"http://support.bestwebsoft.com\">http://support.bestwebsoft.com</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<?php } \n}\n\n/**\n * Add Job board JS.\n * @return void\n */\nif ( ! function_exists ( 'jbbrd_load_scripts' ) ) {\n\tfunction jbbrd_load_scripts() {\n\t\tglobal $wp_version;\n\t\t/* Add main styles. */\n\t\tif ( 3.8 > $wp_version )\n\t\t\twp_enqueue_style( 'jbbrd_stylesheet', plugins_url( 'css/style_wp_before_3.8.css', __FILE__ ) );\n\t\telse\n\t\t\twp_enqueue_style( 'jbbrd_stylesheet', plugins_url( 'css/style.css', __FILE__ ) );\n\n\t\twp_enqueue_script( 'jbbrd_script', plugins_url( 'js/script.js', __FILE__ ), array( 'jquery', 'jquery-ui-slider' ) );\n\t\t/* Add datepicker script. */\n\t\tif ( $wp_version > 3.7 ) {\n\t\t\twp_enqueue_script( 'jquery-ui-datepicker' );\n\t\t}\n\t}\n}\n\n/**\n * Job update messages.\n * @param array $messages Existing post update messages.\n * @return array Amended post update messages with new CPT update messages.\n */\nif ( ! function_exists( 'jbbrd_vacancy_updated_messages' ) ) {\n\tfunction jbbrd_vacancy_updated_messages( $messages ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\n\t\t$post             = get_post();\n\t\t$post_type        = get_post_type( $post );\n\t\t$post_type_object = get_post_type_object( $post_type );\n\n\t\t$messages['vacancy'] = array(\n\t\t\t0  => '', /* Unused. Messages start at index 1. */\n\t\t\t1  => __( 'Job updated.', 'jbbrd' ),\n\t\t\t2  => __( 'Custom field updated.', 'jbbrd' ),\n\t\t\t3  => __( 'Custom field deleted.', 'jbbrd' ),\n\t\t\t4  => __( 'Job updated.', 'jbbrd' ),\n\t\t\t5  => isset( $_GET['revision'] ) ? ( __( 'Job restored to revision from', 'jbbrd' ) . '&nbsp;' . wp_post_revision_title( (int) $_GET['revision'], false ) ) : false,\n\t\t\t6  => __( 'Job published.', 'jbbrd' ),\n\t\t\t7  => __( 'Job saved.', 'jbbrd' ),\n\t\t\t8  => __( 'Job submitted.', 'jbbrd' ),\n\t\t\t9  => __( 'Job scheduled for:', 'jbbrd' ) . '&nbsp;<strong>' . date_i18n( 'M j, Y @ G:i', strtotime( $post->post_date ) ) . '</strong>.',\n\t\t\t10 => __( 'Job draft updated.', 'jbbrd' )\n\t\t);\n\n\t\tif ( ( $post_type_object->publicly_queryable ) && ( get_post_type() === 'vacancy' ) ) {\n\t\t\t$permalink = get_permalink( $post->ID );\n\t\t\t/* Create link to current job, if shortcode worked right. */\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) \n\t\t\t\t|| ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) \n\t\t\t\t|| ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$view_link = '';\n\t\t\t} else {\n\t\t\t\t$view_link = sprintf( ' <a href=\"%s\">%s</a>', $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(), __( 'View job', 'jbbrd' ) );\n\t\t\t}\n\t\t\t$messages[ $post_type ][1] .= $view_link;\n\t\t\t$messages[ $post_type ][6] .= $view_link;\n\t\t\t$messages[ $post_type ][9] .= $view_link;\n\t\t\t$preview_permalink = add_query_arg( 'preview', 'true', $permalink );\n\t\t\t/* Create link to current job, if shortcode worked right. */\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) \n\t\t\t\t|| ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) \n\t\t\t\t|| ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$preview_link = '';\n\t\t\t} else {\n\t\t\t\t$preview_link = sprintf( ' <a target=\"_blank\" href=\"%s\">%s</a>', $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(), __( 'View job', 'jbbrd' ) );\n\t\t\t}\n\t\t\t$messages[ $post_type ][8]  .= $preview_link;\n\t\t\t$messages[ $post_type ][10] .= $preview_link;\n\t\t}\n\t\treturn $messages;\n\t}\n}\n\n/**\n * Add capabilities for administrators.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_set_administrators_capabilities' ) ) {\n\tfunction jbbrd_set_administrators_capabilities() {\n\t\t/* Get the role object. */\n\t\t$administrator = get_role( 'administrator' );\n\t\t/* A list of capabilities to add to administrators. */\n\t\t$caps = array(\n\t\t\t'edit_vacancies',\n\t\t\t'edit_others_vacancies',\n\t\t\t'delete_vacancies',\n\t\t\t'delete_others_vacancies',\n\t\t\t'delete_private_vacancies',\n\t\t\t'edit_private_vacancies',\n\t\t\t'read_private_vacancies',\n\t\t\t'edit_published_vacancies',\n\t\t\t'publish_vacancies',\n\t\t\t'delete_published_vacancies',\n\t\t\t'edit_vacancy',\n\t\t\t'delete_vacancy',\n\t\t\t'read_vacancy',\n\t\t\t/* Set capabilities to 'jbbrd_businesses' custom taxonomy. */\n\t\t\t'manage_jbbrd_businesses_tags',\n\t\t\t'edit_jbbrd_businesses_tags',\n\t\t\t'delete_jbbrd_businesses_tags',\n\t\t\t'assign_jbbrd_businesses_tags',\n\t\t\t/* Set capabilities to 'jbbrd_employment' custom taxonomy. */\n\t\t\t'manage_jbbrd_employment_tags',\n\t\t\t'edit_jbbrd_employment_tags',\n\t\t\t'delete_jbbrd_employment_tags',\n\t\t\t'assign_jbbrd_employment_tags',\n\t\t);\n\t\tforeach ( $caps as $cap ) {\n\t\t\t/* Add the capability. */\n\t\t\t$administrator->add_cap( $cap );\n\t\t}\n\t}\n}\n\n/**\n * Remove capabilities from administrators.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_administrators_capabilities' ) ) {\n\tfunction jbbrd_remove_administrators_capabilities() {\n\t\t/* Get the role object. */\n\t\t$administrator = get_role( 'administrator' );\n\t\t/* A list of capabilities to remove from administrators. */\n\t\t$caps = array(\n\t\t\t'edit_vacancies',\n\t\t\t'edit_others_vacancies',\n\t\t\t'delete_vacancies',\n\t\t\t'delete_others_vacancies',\n\t\t\t'delete_private_vacancies',\n\t\t\t'edit_private_vacancies',\n\t\t\t'read_private_vacancies',\n\t\t\t'edit_published_vacancies',\n\t\t\t'publish_vacancies',\n\t\t\t'delete_published_vacancies',\n\t\t\t'edit_vacancy',\n\t\t\t'delete_vacancy',\n\t\t\t'read_vacancy',\n\t\t\t/* Unset capabilities to 'jbbrd_businesses' custom taxonomy. */\n\t\t\t'manage_jbbrd_businesses_tags',\n\t\t\t'edit_jbbrd_businesses_tags',\n\t\t\t'delete_jbbrd_businesses_tags',\n\t\t\t'assign_jbbrd_businesses_tags',\n\t\t\t/* Unset capabilities to 'jbbrd_employment' custom taxonomy. */\n\t\t\t'manage_jbbrd_employment_tags',\n\t\t\t'edit_jbbrd_employment_tags',\n\t\t\t'delete_jbbrd_employment_tags',\n\t\t\t'assign_jbbrd_employment_tags',\n\t\t);\n\t\tforeach ( $caps as $cap ) {\n\t\t\t/* Remove the capability. */\n\t\t\t$administrator->remove_cap( $cap );\n\t\t}\n\t}\n}\n\n/**\n  * Create employer and job candidate role.\n  * @return void\n  */\nif ( ! function_exists( 'jbbrd_roles_create' ) ) {\n\tfunction jbbrd_roles_create() {\n\t\t/* Create employer role. */\n\t\t$employer_add = add_role(\n\t\t\t'employer', 'Employer',\n\t\t\tarray(\n\t\t\t\t'edit_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'edit_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'read_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'edit_published_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'publish_vacancies'\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_published_vacancies'\t\t=> TRUE,\n\t\t\t\t'edit_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'delete_vacancy'\t\t\t\t\t=> TRUE,\n\t\t\t\t'read_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'read'\t\t\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'assign_jbbrd_businesses_tags'\t\t=> TRUE,\n\t\t\t\t'assign_jbbrd_employment_tags' \t\t=> TRUE,\n\t\t\t\t'upload_files'\t\t\t\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t\t/* Create job_candidate role. */\n\t\t$job_candidate_add = add_role(\n\t\t\t'job_candidate', 'Job Candidate',\n\t\t\tarray(\n\t\t\t\t'read_private_vacancies'\t\t\t=> TRUE,\n\t\t\t\t'read_vacancy'\t\t\t\t\t\t=> TRUE,\n\t\t\t\t'read'\t\t\t\t\t\t\t\t=> TRUE,\n\t\t\t)\n\t\t);\n\t}\n}\n\n/**\n * Add view action to title row on vacancy posts view.\n * @param array $actions Existing post update actions.\n * @return array Amended post update actions with new CPT update actions.\n */\nif ( ! function_exists( 'jbbrd_change_title_row_actions' ) ) {\n\tfunction jbbrd_change_title_row_actions( $actions ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t\t$actions['view'] = __( 'Link is not found!', 'jbbrd' );\n\t\t\t}\n\t\t\treturn $actions;\n\t\t} else {\n\t\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t\t$actions['view'] = '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id() . '\" title=\"' . esc_attr( __( 'View this offer', 'jbbrd' ) ) . '\">' . __( 'View', 'jbbrd' ) . '</a>';\n\t\t\t}\n\t\t\treturn $actions;\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $wp_admin_bar array() of nodes\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_relative_view' ) ) {\n\tfunction jbbrd_add_relative_view( $wp_admin_bar ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$args = array(\n\t\t\t\t\t'id'    => 'link_not_found',\n\t\t\t\t\t'title' => 'Shortcode not found!',\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t$args = array(\n\t\t\t\t\t'id'    => 'view_vacancy',\n\t\t\t\t\t'title' => __( 'View Job', 'jbbrd' ),\n\t\t\t\t\t'href'  => $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_id(),\n\t\t\t\t);\n\t\t\t}\n\t\t\t$wp_admin_bar->add_node( $args );\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $wp_admin_bar array() of nodes\n * @return void\n */\nif ( ! function_exists( 'jbbrd_remove_view' ) ) {\n\tfunction jbbrd_remove_view( $wp_admin_bar ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Find page with plugins shortcode.  */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( get_post_type() === 'vacancy' ) {\n\t\t\t$wp_admin_bar->remove_node( 'view' );\n\t\t}\n\t}\n}\n\n/**\n * Set custom columns to \"vacancy\" custom post editor menu.\n * @param $column string vacancy column\n * @return void\n */\nif ( ! function_exists( 'jbbrd_custom_columns' ) ) {\n\tfunction jbbrd_custom_columns( $column ) {\n\t\tglobal $post, $jbbrd_options, $jbbrd_option_defaults;\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tswitch ( $column ) {\n\t\t\tcase \"jbbrd_title\":\n\t\t\t\techo '<a href=\"#\">' . get_the_title() . '</a>';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_location\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"jbbrd_location\"][0] ) )\n\t\t\t\t\techo $jbbrd_custom[\"jbbrd_location\"][0] . \"<br />\";\n\t\t\t\telse echo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_organization\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"jbbrd_organization\"][0] ) )\n\t\t\t\t\techo $jbbrd_custom[\"jbbrd_organization\"][0] . \"<br />\";\n\t\t\t\telse echo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_employment-categorie\":\n\t\t\t\t$jbbrd_employment_categories = get_the_terms( 0, \"jbbrd_employment\" );\n\t\t\t\t$jbbrd_employment_categories_html = array();\n\t\t\t\tif ( is_array( $jbbrd_employment_categories ) ) {\n\t\t\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\tforeach ( $jbbrd_employment_categories as $jbbrd_employment_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_employment_categories_html, $jbbrd_employment_categorie->name );\n\t\t\t\t\t\techo implode( $jbbrd_employment_categories_html, \", \" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tforeach ( $jbbrd_employment_categories as $jbbrd_employment_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_employment_categories_html, '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&employment_category=' . $jbbrd_employment_categorie->slug . '\">' . $jbbrd_employment_categorie->name . '</a>' );\n\t\t\t\t\t\techo implode( $jbbrd_employment_categories_html, \", \" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_vacancy-categorie\":\n\t\t\t\t$jbbrd_categories = get_the_terms( 0, \"jbbrd_businesses\" );\n\t\t\t\t$jbbrd_categories_html = array();\n\t\t\t\tif ( is_array( $jbbrd_categories ) ) {\n\t\t\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\tforeach ( $jbbrd_categories as $jbbrd_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_categories_html, $jbbrd_categorie->name );\n\t\t\t\t\t\techo implode( $jbbrd_categories_html, \", \" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tforeach ( $jbbrd_categories as $jbbrd_categorie )\n\t\t\t\t\t\t\tarray_push( $jbbrd_categories_html, '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&category=' . $jbbrd_categorie->slug . '\">' . $jbbrd_categorie->name . '</a>' );\n\t\t\t\t\t\techo implode( $jbbrd_categories_html, \", \" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_salary\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"salary\"][0] ) ) {\n\t\t\t\t\techo $jbbrd_custom[\"salary\"][0] . '&nbsp;';\n\t\t\t\t\tif ( isset( $jbbrd_options['money_choose'] ) ) {\n\t\t\t\t\t\techo $jbbrd_options['money_choose'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo $jbbrd_option_defaults['money_choose'];\n\t\t\t\t\t}\n\t\t\t\t\techo '/';\n\t\t\t\t\tif ( isset( $jbbrd_options['time_period_choose'] ) ) {\n\t\t\t\t\t\techo $jbbrd_options['time_period_choose'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\techo $jbbrd_option_defaults['time_period_choose'];\n\t\t\t\t\t}\n\t\t\t\t\techo \"<br />\";\n\t\t\t\t} else\n\t\t\t\t\techo 'n/a';\n\t\t\t\tbreak;\n\t\t\tcase \"jbbrd_archive\":\n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\tif ( isset ( $jbbrd_custom[\"archive\"][0] ) ) {\n\t\t\t\t\techo 'archived';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\n/**\n * Set vacancy custom post column names.\n * @param array $columns Existing post update columns.\n * @return array post update columns with new CPT update columns.\n */\nif ( ! function_exists( 'jbbrd_edit_columns' ) ) {\n\tfunction jbbrd_edit_columns( $columns ) {\n\t\t$columns = array(\n\t\t\t\"cb\" \t\t\t\t\t\t\t=> \"<input type=\\\"checkbox\\\" />\",\n\t\t\t\"title\" \t\t\t\t\t\t=> __( \"Job offer\", 'jbbrd' ),\n\t\t\t\"jbbrd_location\" \t\t\t\t=> __( \"Location\", 'jbbrd' ),\n\t\t\t\"jbbrd_organization\" \t\t\t=> __( \"Organization\", 'jbbrd' ),\n\t\t\t\"jbbrd_employment-categorie\" \t=> __( \"Employment\", 'jbbrd' ),\n\t\t\t\"jbbrd_vacancy-categorie\"\t\t=> __( \"Categories\", 'jbbrd' ),\n\t\t\t\"jbbrd_salary\" \t\t\t\t\t=> __( \"Salary\", 'jbbrd' ),\n\t\t\t\"jbbrd_archive\" \t\t\t\t=> __( \"Archive\", 'jbbrd' ),\n\t\t\t\"date\"\t\t\t\t\t\t\t=> __( \"Date\", 'jbbrd' ),\n\t\t);\n\t\treturn $columns;\n\t}\n}\n\n/**\n * Making content columns.\n * @param array $columns Existing post update columns.\n * @return array post update columns with new CPT update columns.\n */\nif ( ! function_exists( 'jbbrd_sortable_columns' ) ) {\n\tfunction jbbrd_sortable_columns( $columns ) {\n\t\t$columns['jbbrd_location']\t\t= \"jbbrd_location\";\n\t\t$columns['jbbrd_organization']\t= \"jbbrd_organization\";\n\t\t$columns['jbbrd_salary']\t\t= \"salary\";\n\t\t$columns['jbbrd_date']\t\t\t= \"date\";\n\t\treturn $columns;\n\t}\n}/* End of making content columns. */\n\n/**\n * Making content columns sortable.\n * @param $query array() query array\n * @return void\n */\nif ( ! function_exists( 'jbbrd_sortable_columns_orderby' ) ) {\n\tfunction jbbrd_sortable_columns_orderby( $query ) {\n\t\tif ( ! is_admin() ) {\n\t\t\treturn;\n\t\t}\n\t\t$orderby = $query->get( 'orderby' );\n\t\tif ( 'jbbrd_location' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'jbbrd_location' );\n\t\t}\n\t\tif ( 'jbbrd_organization' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'jbbrd_organization' );\n\t\t}\n\t\tif ( 'salary' == $orderby ) {\n\t\t\t$query->set( 'meta_key', 'salary' );\n\t\t\t$query->set( 'orderby', 'meta_value_num' );\n\t\t}\n\t}\n}\n\n/**\n * Add selectbox of vacancy Categories to filter.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_restrict_manage_posts' ) ) {\n\tfunction jbbrd_restrict_manage_posts() {\n\t\t/* Only display these taxonomy filters on desired custom post_type listings. */\n\t\tglobal $typenow;\n\t\tif ( $typenow == 'vacancy' ) {\n\t\t\t/* Set \"Job categories\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'jbbrd_businesses';\n\t\t\tprint( '<div id=\"jbbrd_businesses_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Job categories:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' id=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t\t/* Set \"Archive status\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'archive';\n\t\t\tprint( '<div id=\"jbbrd_archive_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Archived jobs:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t\t/* Set \"Archive status\" taxonomy slugs you want to filter by. */\n\t\t\t$tax_slug = 'jbbrd_employment';\n\t\t\tprint( '<div id=\"jbbrd_employment_header\" style=\"float:left; padding:6px 5px 0 5px;\">' . __( 'Employment type:', 'jbbrd' ) . '</div>' );\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\tprint( '<select name=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\tif ( isset( $_GET[ $tax_slug ] ) ) {\n\t\t\t\t\techo $_GET[ $tax_slug ] == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t}\n\t\t\t\techo '>' . $term->name . ' (' . $term->count . ')</option>';\n\t\t\t}\n\t\t\techo \"</select>\";\n\t\t}\n\t}\n}\n\n/**\n * Set post custom metafields values.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_meta_personal' ) ) {\n\tfunction jbbrd_meta_personal() {\n\t\tglobal $post, $jbbrd_options, $error;\n\t\t$jbbrd_custom = get_post_custom( $post->ID );\n\t\t/* Set values. */\n\t\tif ( isset( $jbbrd_custom[\"demands\"][0] ) ) {\n\t\t\t$demands = $jbbrd_custom[\"demands\"][0];\n\t\t} else {\n\t\t\t$demands = '';\n\t\t}\n\t\tif ( isset( $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t$jbbrd_location = $jbbrd_custom[\"jbbrd_location\"][0];\n\t\t} else {\n\t\t\t$jbbrd_location = '';\n\t\t}\n\t\tif ( isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t$jbbrd_organization = $jbbrd_custom[\"jbbrd_organization\"][0];\n\t\t} else {\n\t\t\t$jbbrd_organization = '';\n\t\t}\n\t\t/* If ('salary') not numeric = 'salary' = '0' */\n\t\tif ( ( isset( $jbbrd_custom[\"salary\"][0] ) ) && ( 0 < $jbbrd_custom[\"salary\"][0] ) && ( is_numeric( $jbbrd_custom[\"salary\"][0] ) ) ) {\n\t\t\t$salary = $jbbrd_custom[\"salary\"][0];\n\t\t} else {\n\t\t\t$salary = '0';\n\t\t}\n\t\t/* Expiry date. */\n\t\tif ( isset( $jbbrd_custom[\"expiry_date\"][0] ) ) {\n\t\t\t$format \t\t= 'm/d/Y';\n\t\t\t$value\t\t\t= date( $format, strtotime( $jbbrd_custom[\"expiry_date\"][0] ) );\n\t\t\t$expiry_date \t= $value;\n\t\t} else {\n\t\t\t$expiry_date \t= '';\n\t\t}\n\t\t/* Archive status. */\n\t\tif ( isset( $jbbrd_custom[\"archive\"][0] ) ) {\n\t\t\t$archive = $jbbrd_custom[\"archive\"][0];\n\t\t\twp_set_object_terms( $post->ID, 'archived', 'archive', FALSE );\n\t\t} else {\n\t\t\t$archive = '';\n\t\t\twp_set_object_terms( $post->ID, 'posted', 'archive', FALSE );\n\t\t}\n\t\t/* Use nonce for verification. */\n\t\twp_nonce_field( plugin_basename(__FILE__), 'jbbrd_noncename' );\n\t\techo '<span style=\"color:red;\">' . $error . '</span>'; ?>\n\t\t<div class=\"personal\">\n\t\t\t<div id=\"jbbrd_requirements\">\n\t\t\t\t<table border=\"0\" class=\"jbbrd_table_inside\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_demand_field\"><label><?php _e( 'Requirements', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_demand_input\"><textarea name=\"demands\"><?php echo $demands; ?></textarea></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table><!-- .table_inside -->\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_metaboxes\">\n\t\t\t\t<table border=\"0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_location_input_label\" for=\"jbbrd_location_input\"><?php _e( 'Location', 'jbbrd' ); ?></label><?php if ( '' == $jbbrd_location ) { ?><span style=\"color:red\">*</span><?php } ?></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_location_input\" required=\"required\" name=\"jbbrd_location\" value=\"<?php echo $jbbrd_location; ?>\" placeholder=\"<?php _e( 'Location', 'jbbrd' ); ?>\" /></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_organization_input_label\" for=\"jbbrd_organization_input\"><?php _e( 'Organization', 'jbbrd' ); ?></label><?php if ( '' == $jbbrd_organization ) { ?><span style=\"color:red\">*</span><?php } ?></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_organization_input\" required=\"required\" name=\"jbbrd_organization\" value=\"<?php echo $jbbrd_organization; ?>\" placeholder=\"<?php _e( 'Organization name', 'jbbrd' ); ?>\" /></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_salary_input_label\" for=\"jbbrd_salary_input\"><?php _e( 'Salary', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\"><input type=\"text\" id=\"jbbrd_salary_input\" name=\"salary\" value=\"<?php echo $salary; ?>\" placeholder=\"0\" /><span class=\"jbbrd_personal_field\"><?php echo $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose']; ?></span></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"><label id=\"jbbrd_expiry_date_label\" for=\"jbbrd_expiry_date\"><?php _e( 'Expiry date', 'jbbrd' ); ?></label></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\">\n\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_expiry_date\" name=\"expiry_date\" value=\"<?php echo $expiry_date; ?>\" placeholder=\"MM/DD/YYYY\" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_field\"></td>\n\t\t\t\t\t\t<td class=\"jbbrd_personal_input\">\n\t\t\t\t\t\t\t<!-- <label class=\"jbbrd_personal_field\" for=\"jbbrd_archive_checkbox\"><?php _e( 'Move to archive', 'jbbrd' ); ?></label> -->\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_archive_checkbox\" name=\"archive\" style=\"display:none;\" value=\"1\" <?php if ( '' != $archive ) echo 'checked=\"checked\"'; ?> />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div id=\"jbbrd_requirements_metaboxes_clear\"></div>\n\t\t</div><!-- .personal -->\n\t<?php }\n}/* End of set post custom metafields values. */\n\n/**\n * Move to archive expiried jobs.\n * @return array() of location metabox fields\n */\nif ( ! function_exists( 'jbbrd_find_location_metabox_fields' ) ) {\n\tfunction jbbrd_find_location_metabox_fields() {\n\t\tglobal $wpdb;\n\t\t$jbbrd_location_metabox_fields_modified = array();\n\t\t/* Set tables names. */\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t/* Set query. */\n\t\t$sql_query = \"\n\t\t\tSELECT DISTINCT pm.`meta_value`\n\t\t\tFROM `\" . $postmeta_table . \"` AS pm\n\t\t\tWHERE pm.`meta_key` = 'jbbrd_location'\n\t\t\";\n\t\t/* Set order. */\n\t\t$jbbrd_location_metabox_fields = $wpdb->get_results( $sql_query, ARRAY_A ); \n\t\tif ( is_array( $jbbrd_location_metabox_fields ) ) {\n\t\t\tforeach ( $jbbrd_location_metabox_fields as $key => $value ) {\n\t\t\t\tforeach ( $value as $key_id => $value_id ) {\n\t\t\t\t\t$jbbrd_location_metabox_fields_modified[] = $value_id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn $jbbrd_location_metabox_fields_modified;\n\t}\n}\n\n/**\n * Move to archive expiried jobs.\n * @return array() of ID`s of expiried jobs\n */\nif ( ! function_exists( 'jbbrd_find_expiry_vacancies' ) ) {\n\tfunction jbbrd_find_expiry_vacancies() {\n\t\tglobal $wpdb;\n\t\t/* Set tables names. */\n\t\t$posts_table\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t/* Set query. */\n\t\t$sql_query = \"\n\t\t\tSELECT DISTINCT wpp.`ID`\n\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\tAND ttt.`taxonomy` = 'archive')\n\t\t\tJOIN `\" . $terms_table . \"` AS tt ON (ttt.`term_id` = tt.`term_id`\n\t\t\t\tAND tt.`slug` = 'posted' )\n\t\t\tJOIN `\" . $postmeta_table . \"` AS pm ON (wpp.`ID` = pm.`post_id`\n\t\t\t\tAND pm.`meta_key` = 'expiry_date'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) > UNIX_TIMESTAMP(pm.`meta_value`))\n\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\";\n\t\t/* Set order. */\n\t\t$expiry_date_vacancies = $wpdb->get_results( $sql_query, ARRAY_A );\n\t\treturn $expiry_date_vacancies;\n\t}\n}\n\n/**\n * Move to archive expiried jobs.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_set_archive_status_function' ) ) {\n\tfunction jbbrd_set_archive_status_function() {\n\t\t$expiry_date_vacancies = jbbrd_find_expiry_vacancies();\n\t\tif ( is_array( $expiry_date_vacancies ) ) {\n\t\t\tforeach ( $expiry_date_vacancies as $key => $value ) {\n\t\t\t\tforeach ( $value as $key_id => $value_id ) {\n\t\t\t\t\tupdate_post_meta( $value_id, \"archive\", 1 );\n\t\t\t\t\twp_set_object_terms( $value_id, 'archived', 'archive', FALSE );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Set schedule for daily moving to archive for expirie jobs.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_move_to_archive_schedule' ) ) {\n\tfunction jbbrd_move_to_archive_schedule( $jbbrd_custom_time ) {\n\t\tif ( ! wp_next_scheduled( 'jbbrd_move_vacancies_to_archive_dayly_function' ) ) {\n\t\t\t$jbbrd_absolut_time = floor( time() / 86400 ) * 86400;\n\t\t\twp_schedule_event( $jbbrd_absolut_time + $jbbrd_custom_time, 'daily', 'jbbrd_move_vacancies_to_archive_dayly_function' );\n\t\t}\n\t}\n}\n\n/**\n * Set admin error message on custom metafields error.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_metafields_error_admin_notice' ) ) {\n\tfunction jbbrd_metafields_error_admin_notice() {\n\t\t/* Print the message. */\n\t\tglobal $post;\n\t\t$notice = get_option( 'jbbrd_custom_metafield_error_notice' );\n\t\tif ( empty( $notice ) ) {\n\t\t\treturn '';\n\t\t}\n\t\tforeach( $notice as $id => $message ) {\n\t\t\tprint_r( '<div class=\"error\"><p>' . $message . '</p></div>' );\n\t\t\t/* Remove notice after its displayed. */\n\t\t\tunset( $notice[ $id ] );\n\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n/**\n * Insert post function.\n * @param $post_id string current post ID\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_post' ) ) {\n\tfunction jbbrd_save_post( $post_id, $post = NULL ) {\n\t\tglobal $jbbrd_options;\n\t\t/* Set custom meta fields. */\n\t\t$jbbrd_meta_fields = array(\n\t\t\t\"demands\",\n\t\t\t\"jbbrd_location\",\n\t\t\t\"jbbrd_organization\",\n\t\t\t\"salary\",\n\t\t\t\"resume-field\",\n\t\t\t\"archive\",\n\t\t\t\"expiry_date\"\n\t\t);\n\t\t/* Verify this came from the our screen and with proper authorization. */\n\t\tif ( ! isset( $_POST['jbbrd_noncename'] ) ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\tif ( ! wp_verify_nonce( $_POST['jbbrd_noncename'], plugin_basename(__FILE__) ) ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Verify if this is an auto save. */ \n\t\tif ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) {\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Check metafields. */\n\t\tif ( ( ! isset( $_POST['jbbrd_location'] ) ) || ( empty( $_POST['jbbrd_location'] ) ) || ( ! isset( $_POST['jbbrd_organization'] ) ) || ( empty( $_POST['jbbrd_organization'] ) ) ) {\n\t\t\t$notice = get_option('jbbrd_custom_metafield_error_notice');\n\t\t\t$notice[ $post_id ] = '';\n\t\t\tif ( ! isset( $_POST['jbbrd_location'] ) || empty( $_POST['jbbrd_location'] )  ) {\n\t\t\t\t$notice[ $post_id ] .=  '<strong>' . __( 'Error:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'location field should not be empty', 'jbbrd' ) . '&nbsp;<strong>' . '(Job ID: ' . $post_id . ')' . '</strong>.<br />';\n\t\t\t}\n\t\t\tif ( ! isset( $_POST['jbbrd_organization'] ) || empty( $_POST['jbbrd_organization'] ) ) {\n\t\t\t\t$notice[ $post_id ] .=  '<strong>' . __( 'Error:', 'jbbrd' ) . '</strong>' . '&nbsp;' . __( 'organization field should not be empty.', 'jbbrd' ) . '<br />';\n\t\t\t}\n\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\treturn $post_id;\n\t\t}\n\t\t/* Add values to metafields table. */\n\t\tif ( $post->post_type == \"vacancy\" ) {\n\t\t\t/* Loop through the POST data. */\n\t\t\tforeach ( $jbbrd_meta_fields as $key ) {\n\t\t\t\tif ( isset( $_POST[ $key ] ) ) {\n\t\t\t\t\t/* Change date format if fild is 'expiry_date'. */\n\t\t\t\t\tif ( $key == 'expiry_date' ) {\n\t\t\t\t\t\t$date_compl = stripslashes( esc_html( $_POST[ $key ] ) );\n\t\t\t\t\t\t/* Set 30 days period if date field is empty. */\n\t\t\t\t\t\tif ( '' == $date_compl ) {\n\t\t\t\t\t\t\t$jbbrd_default_time = $jbbrd_options['archieving_period'];\n\t\t\t\t\t\t\t//$jbbrd_default_time = 30;\n\t\t\t\t\t\t\t$date_compl \t\t= get_the_date( 'U' );\n\t\t\t\t\t\t\t$format \t\t\t= 'Y-m-d 23:59:59';\n\t\t\t\t\t\t\t$value\t\t\t\t= date( $format, $date_compl + ( 60 * 60 * 24 * $jbbrd_default_time ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$date_compl\t\t\t= explode( \"/\", $date_compl );\n\t\t\t\t\t\t\t$format \t\t\t= 'Y-m-d 23:59:59';\n\t\t\t\t\t\t\t$value\t\t\t\t= date( $format, strtotime( $date_compl[1] . \"-\" . $date_compl[0] . '-' . $date_compl[2] ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$value =  stripslashes( esc_html( $_POST[ $key ] ) );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$value = '';\n\t\t\t\t}\n\t\t\t\t/* Delete meta if empty. */\n\t\t\t\tif ( '' == $value ) {\n\t\t\t\t\tdelete_post_meta( $post_id, $key );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t/* Update meta. */\n\t\t\t\tupdate_post_meta( $post_id, $key, $value );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Create class jbbrd_Manager to display list of messages.\n */\nif ( ! class_exists( 'WP_List_Table' ) ) {\n\trequire_once( ABSPATH . 'wp-admin/includes/class-wp-list-table.php' );\n}\n\nif ( ! class_exists( 'jbbrd_Backend_Manager' ) ) {\n\tclass jbbrd_Backend_Manager extends WP_List_Table {\n\n\t\t/**\n\t\t * Constructor of class \n\t\t */\n\t\tfunction __construct() {\n\t\t\tglobal $status, $page;\n\t\t\tparent::__construct( array(\n\t\t\t\t'singular'  => __( 'vacancy', 'jbbrd' ),\n\t\t\t\t'plural'    => __( 'vacancies', 'jbbrd' ),\n\t\t\t\t'ajax'      => false,\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Function to prepare data before display \n\t\t * @return void\n\t\t */\n\t\tfunction prepare_items() {\n\t\t\tglobal $wpdb;\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$search\t\t= isset( $_POST['s'] ) ? htmlspecialchars( stripslashes( $_POST['s'] ) ) : \"\";\n\t\t\t\t$search\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $search ) ) );\n\t\t\t}\n\t\t\t$columns\t\t\t\t= $this->get_columns();\n\t\t\t$hidden\t\t\t\t\t= array();\n\t\t\t$sortable\t\t\t\t= $this->get_sortable_columns();\n\t\t\t$this->_column_headers\t= array( $columns, $hidden, $sortable );\n\t\t\t$per_page\t\t\t\t= $this->get_items_per_page( 'vacancies_per_page', 30);\n\t\t\t$current_page\t\t\t= $this->get_pagenum();\n\t\t\t$total_items\t\t\t= $this->items_count();;\n\t\t\t$this->found_data\t\t= array_slice( $this->job_list(), ( ( $current_page - 1 ) * $per_page ), $per_page );\n\t\t\t$this->set_pagination_args( array(\n\t\t\t\t'total_items' => $total_items,\n\t\t\t\t'per_page'    => $per_page,\n\t\t\t) );\n\t\t\t$this->items\t\t\t= $this->found_data;\n\t\t}\n\n\t\t/**\n\t\t * Function to show message if no jobs found\n\t\t * @return void\n\t\t */\n\t\tfunction no_items() { ?>\n\t\t\t<p style=\"color:red;\"><?php _e( 'No jobs found', 'jbbrd' ); ?></p>\n\t\t<?php }\n\n\t\t/**\n\t\t * Get a list of columns.\n\t\t * @return array list of columns and titles\n\t\t */\n\t\tfunction get_columns(){\n\t\t\t$columns = array(\n\t\t\t\t'title'\t\t=> __( 'Job offer', 'jbbrd' ),\n\t\t\t\t'author'\t=> __( 'Salary', 'jbbrd' ),\n\t\t\t\t'date'\t\t=> __( 'Date', 'jbbrd' ),\n\t\t\t);\n\t\t\treturn $columns;\n\t\t}\n\n\t\t/**\n\t\t * Get a list of sortable columns.\n\t\t * @return array list of sortable columns\n\t\t */\n\t\tfunction get_sortable_columns() {\n\t\t\t$sortable_columns = array(\n\t\t\t\t'title'\t\t=> array( 'title', FALSE ),\n\t\t\t\t'author'\t=> array( 'author', FALSE ),\n\t\t\t\t'date'\t\t=> array( 'date', FALSE ),\n\t\t\t);\n\t\t\treturn $sortable_columns;\n\t\t}\n\n\t\t/**\n\t\t * Fires when the default column output is displayed for a single row.\n\t\t * @param string $column_name      The custom column's name.\n\t\t * @param int    $item->comment_ID The custom column's unique ID number.\n\t\t * @return void\n\t\t */\n\t\tfunction column_default( $item, $column_name ) {\n\t\t\tswitch( $column_name ) {\n\t\t\t\tcase 'title':\n\t\t\t\tcase 'author':\n\t\t\t\tcase 'date':\n\t\t\t\t\treturn $item[ $column_name ];\n\t\t\t\tdefault:\n\t\t\t\t\treturn print_r( $item, TRUE ) ; /* Print all array. */\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function to get report list\n\t\t * @return array() list of jobs\n\t\t */\n\t\tfunction job_list() {\n\t\t\tglobal $wpdb, $jbbrd_options;\n\t\t\t$i = 0;\n\t\t\t$job_list       = array();  \n\t\t\t$jbbrd_search_category = get_user_meta( get_current_user_id(), 'jbbrd_job_candidate_category_choose', TRUE ); \n\t\t\t$jbbrd_term_id = term_exists( $jbbrd_search_category, 'jbbrd_businesses' );\n\t\t\t$jbbrd_term_id = $jbbrd_term_id['term_id'];\n\t\t\t/* Add search. */\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$search\t\t= isset( $_POST['s'] ) ? htmlspecialchars( stripslashes( $_POST['s'] ) ) : \"\";\n\t\t\t\t$search\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $search ) ) );\n\t\t\t}\n\t\t\t/* Set tables names. */\n\t\t\t$posts_table\t\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t\t$term_relationships_table\t\t= $wpdb->prefix . \"term_relationships\";\n\t\t\t$term_taxonomy_table \t\t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t\t$postmeta_table \t\t\t\t= $wpdb->prefix . \"postmeta\";\n\t\t\t$terms_table \t\t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t\t/* Set ordering. */\n\t\t\tif ( ( isset( $_GET['orderby'] ) ) && ( in_array( $_GET['orderby'], array( \"title\", \"author\", \"date\" ) ) ) ) {\n\t\t\t\tif ( \"title\" == $_GET['orderby'] )\n\t\t\t\t\t$jbbrd_orderby = \"post_title\";\n\t\t\t\telse\n\t\t\t\t\t$jbbrd_orderby = \"post_modified\";\n\t\t\t} else\n\t\t\t\t$jbbrd_orderby = 'post_title';\n\n\t\t\tif ( ( isset( $_GET['order'] ) ) && ( in_array( $_GET['order'], array( \"asc\", \"desc\" ) ) ) )\n\t\t\t\t$jbbrd_order = $_GET['order'];\n\t\t\telse\n\t\t\t\t$jbbrd_order = 'desc';\n\n\t\t\t/* Prepare sql_query. */\n\t\t\t$sql_query = \"\n\t\t\t\tSELECT DISTINCT wpp.`ID`, wpp.`post_title`, wpp.`post_modified`, pm.`meta_value` \n\t\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\t\tAND ttt.`term_id` = '\" . $jbbrd_term_id . \"'\n\t\t\t\t\tAND ttt.`taxonomy` = 'jbbrd_businesses')\n\t\t\t\tJOIN `\" . $postmeta_table . \"` AS pm ON (wpp.`ID` = pm.`post_id`\n\t\t\t\t\tAND pm.`meta_key` = 'salary')\n\t\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(`post_modified`) < '86400'\n\t\t\t\";\n\t\t\t/* Set search order. */\n\t\t\tif ( isset( $_POST['s'] ) ) {\n\t\t\t\t$sql_query .= \"AND wpp.`post_title` LIKE '%\" . $search . \"%'\";\n\t\t\t}\n\t\t\t/* Set output ordering. */\n\t\t\t$sql_query .= \"\n\t\t\t\tORDER BY wpp.`\" . $jbbrd_orderby . \"` \" . $jbbrd_order . \"\n\t\t\t\";\n\t\t\t$job_data = $wpdb->get_results( $sql_query, ARRAY_A );\n\t\t\tforeach ( $job_data as $job ) {\n\t\t\t\t$job_list[$i]\t\t\t= array();\n\t\t\t\t$job_list[$i]['id']\t\t= $job['ID'];\n\t\t\t\t$job_list[$i]['title']\t= $job['post_title'];\n\t\t\t\t$job_list[$i]['author']\t= $job['meta_value'];\n\t\t\t\t$job_list[$i]['author'] .= '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'];\n\t\t\t\t$job_list[$i]['date']\t= $job['post_modified'];\n\t\t\t\t$i ++;\n\t\t\t}\n\t\t\treturn( $job_list );\n\t\t}\n\n\t\t/**\n\t\t * Function to get number of all matched jobs\n\t\t * @return sting reports number\n\t\t */\n\t\tpublic function items_count() {\n\t\t\tglobal $wpdb;\n\t\t\t$jbbrd_search_category = get_user_meta( get_current_user_id(), 'jbbrd_job_candidate_category_choose', TRUE ); \n\t\t\t$jbbrd_term_id = term_exists( $jbbrd_search_category, 'jbbrd_businesses' );\n\t\t\t$jbbrd_term_id = $jbbrd_term_id['term_id'];\n\t\t\t/* Set tables names. */\n\t\t\t$posts_table\t\t\t\t= $wpdb->prefix . \"posts\";\n\t\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t\t/* Prepare sql_query. */\n\t\t\t$sql_query = \"\n\t\t\t\tSELECT COUNT(wpp.`id`) \n\t\t\t\tFROM `\" . $posts_table . \"` AS wpp\n\t\t\t\tJOIN `\" . $term_relationships_table . \"` AS tr ON wpp.`ID` = tr.`object_id`\n\t\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON (tr.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\t\t\tAND ttt.`term_id` = '\" . $jbbrd_term_id . \"'\n\t\t\t\t\tAND ttt.`taxonomy` = 'jbbrd_businesses')\n\t\t\t\tAND wpp.`post_status` = 'publish'\n\t\t\t\tAND wpp.`post_type` = 'vacancy'\n\t\t\t\tAND UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(`post_modified`) < '86400'\n\t\t\t\";\n\t\t\t$items_count  = $wpdb->get_var( $sql_query );\n\t\t\treturn $items_count;\n\t\t}\n\n\t\t/**\n\t\t * Add link to vacancy below vacansy title.\n\t\t * @param sting current item\n\t\t * @return sting link to vacancy\n\t\t */\n\t\tfunction column_title( $item ) {\n\t\t\tglobal $jbbrd_options;\n\t\t\t/* Find page with plugins shortcode. */\n\t\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t\tif ( ( '' == $jbbrd_shortcode_permalink ) || ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t$actions['view'] = __( 'Link is not found!', 'jbbrd' );\n\t\t\t\treturn sprintf('%1$s %2$s', $item['title'], $this->row_actions( $actions ) );\n\t\t\t} else {\n\t\t\t\t$actions = array(\n\t\t\t\t\t'view'\t\t=> sprintf( '<a href=\"' . '%1$s' . '&vacancy_id=' . '%2$s' . '\">View</a>', $jbbrd_options['jbbrd_shortcode_permalink'], $item['id'] ),\n\t\t\t\t);\n\t\t\t\treturn sprintf('%1$s %2$s', $item['title'], $this->row_actions( $actions ) );\n\t\t\t}\n\t\t}\n\t}\n}/* End of class jbbrd_Manager to display list of messages. */\n\n/**\n * Add screen options of class jbbrd_Backend_Manager\n * @return void \n */\nif ( ! function_exists( 'jbbrd_screen_options' ) ) {\n\tfunction jbbrd_screen_options() {\n\t\tglobal $sndr_reports_list;\n\t\t$option = 'per_page';\n\t\t$args = array(\n\t\t\t'label'\t\t=> __( 'Jobs per page', 'jbbrd' ),\n\t\t\t'default'\t=> 30,\n\t\t\t'option'\t=> 'vacancies_per_page'\n\t\t);\n\t\tadd_screen_option( $option, $args );\n\t}\n}\n\n/**\n * Function to save and load settings from screen options\n * @return void \n */\nif ( ! function_exists( 'jbbrd_candidate_table_set_option' ) ) {\n\tfunction jbbrd_candidate_table_set_option( $status, $option, $value ) {\n\t\treturn $value;\n\t}\n}\n\n/**\n * Create new obect.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_candidate_category_custom_search_page' ) ) {\n\tfunction jbbrd_candidate_category_custom_search_page() {\n\t\t$jbbrd_manager = new jbbrd_Backend_Manager(); ?>\n\t\t<div class=\"wrap\"><h2><?php _e( 'Job offers for choosen category by last day', 'jbbrd' ); ?></h2>\n\t\t\t<form method=\"post\">\n\t\t\t\t<input type=\"hidden\" name=\"page\" value=\"job_candidate\" />\n\t\t\t\t<?php if ( isset( $_POST['s'] ) && $_POST['s'] ) {\n\t\t\t\t\tprint( '<span class=\"subtitle\">' . __( 'Search results for', 'jbbrd' ) . '&nbsp;&#8220;' . wp_html_excerpt( esc_html( stripslashes( $_POST['s'] ) ), 50 ) . '&#8221;</span>' );\n\t\t\t\t}\n\t\t\t\t$jbbrd_manager->prepare_items();\n\t\t\t\t$jbbrd_manager->search_box( __( 'Search', 'jbbrd' ), 'search_id');\n\t\t\t\t$jbbrd_manager->display(); ?>\n\t\t\t</form>\n\t\t</div>\n\t<?php }\n}\n\n/**\n * Add custom upload CV, search categories and saved search capabilities for job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_cv_load_field' ) ) {\n\tfunction jbbrd_add_cv_load_field( $user ) { \n\t\t/* Set variables for choosing job  category. */\n\t\tglobal $jbbrd_choose_term_id, $jbbrd_options;\n\t\t$tax_slug \t= 'jbbrd_businesses';\n\t\t$tax_obj \t= get_taxonomy( $tax_slug );\n\t\t$tax_name \t= $tax_obj->labels->name;\n\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t$terms \t\t= get_terms( $tax_slug );\n\t\t/* Upload CV form. */\n\t\t$jbbrd_cv = get_user_meta( $user->ID, 'jbbrd_user_cv', TRUE ); \n\t\tif ( ( TRUE === jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) { ?>\n\t\t\t<!-- Job candidate CV. -->\n\t\t\t<h3><?php _e(\"Job candidate options\", \"jbbrd\"); ?></h3>\n\t\t\t<?php if ( is_admin() && ( is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) ) ) { ?>\n\t\t\t\t<table class=\"form-table\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope=\"row\"><label for=\"user_meta_cv\"><?php _e( 'Upload your CV file', 'jbbrd' ); ?></label></th>\n\t\t\t\t\t\t<td><input id=\"user_meta_cv\" type=\"file\" name=\"jbbrd_user_cv\" value=\"\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<span class=\"description\"><?php _e( 'You can upload only DOC/DOCX, PDF or TXT document.', 'jbbrd' ); ?></span>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<?php if ( isset( $jbbrd_cv['url'] ) ) {\n\t\t\t\t\t\t\t\techo '<a href=' . $jbbrd_cv['url'] . '>' . pathinfo( $jbbrd_cv['file'], PATHINFO_BASENAME ) . '</a>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( isset( $jbbrd_cv['url'] ) ) { ?>\n\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_archive_checkbox\" name=\"jbbrd_cv_clear\" />\n\t\t\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_archive_checkbox\"><?php _e( 'Delete current CV', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t<?php } ?>\n\t\t\t<!-- Job candidate Search Category. -->\n\t\t\t<table class=\"form-table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"row\"><?php _e( 'Set job search category', 'jbbrd' ); ?></th>\n\t\t\t\t\t<td><?php \n\t\t\t\t\t\t/* Retrieve the current object. */\n\t\t\t\t\t\t$jbbrd_current_user_meta = get_user_meta( $user->ID );\n\t\t\t\t\t\tif ( isset( $jbbrd_current_user_meta['jbbrd_job_candidate_category_choose'] ) )\n\t\t\t\t\t\t\t$jbbrd_current_user_meta_value = $jbbrd_current_user_meta['jbbrd_job_candidate_category_choose'][0];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$jbbrd_current_user_meta_value = '';\n\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\tprint( '<select name=\"jbbrd_job_candidate_category_choose\" id=' . $tax_slug . ' class=\"jbbrd_postform\">' );\n\t\t\t\t\t\tprint( '<option value=\"\">' . __( 'Show all', 'jbbrd' ) . '</option>' );\n\t\t\t\t\t\tforeach ( $terms as $term ) {\n\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\techo '<option value='. $term->slug;\n\t\t\t\t\t\t\tif ( $term->slug == $jbbrd_current_user_meta_value ) {\n\t\t\t\t\t\t\t\techo ' selected=\"selected\"';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\techo '>' . $term->name . '</option>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprint_r( '</select><br />\n\t\t\t\t\t\t<span class=\"description\">' . __( 'Choose job search category', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\tif ( '' != $jbbrd_current_user_meta_value ) { ?>\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_candidate_category_clear_checkbox\" name=\"jbbrd_candidate_category_clear\" />\n\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_candidate_category_clear_checkbox\"><?php _e( 'Clear current category search', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<!-- Job candidate Saved Search. -->\n\t\t\t<table class=\"form-table\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"row\"><?php _e( 'Candidate saved search', 'jbbrd' ); ?></th>\n\t\t\t\t\t<td><?php \n\t\t\t\t\t\t/* Retrieve the current object. */\n\t\t\t\t\t\tif ( ( isset( $jbbrd_current_user_meta['job_candidate_saved_search'] ) ) && ( '' != ( $jbbrd_current_user_meta['job_candidate_saved_search'][0] ) ) ) {\n\t\t\t\t\t\t\t$jbbrd_current_user_saved_search = $jbbrd_current_user_meta['job_candidate_saved_search'][0];\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search = array();\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search = unserialize( $jbbrd_current_user_saved_search );\n\t\t\t\t\t\t\tunset( $jbbrd_candidate_saved_search[0] );\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_transformed = array(); \n\t\t\t\t\t\t\tforeach ( $jbbrd_candidate_saved_search as $key => $value ) {\n\t\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_transformed[] = $key . '=' . $value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_candidate_saved_search_string = implode( '&', $jbbrd_candidate_saved_search_transformed );\n\t\t\t\t\t\t\tif ( isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t\tprint_r( '<a href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&' . $jbbrd_candidate_saved_search_string . '\">' . __( 'View saved search results', 'jbbrd' ) . '</a>' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprint_r( '<br /><span class=\"description\">' . __( 'Your saved search', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$jbbrd_current_user_saved_search = '';\n\t\t\t\t\t\t\tprint_r( '<span class=\"description\">' . __( 'Saved search not found', 'jbbrd' ) . '</span><br /><br />' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* Checkbox to remove search. */\n\t\t\t\t\t\tif ( '' != $jbbrd_current_user_saved_search ) { ?>\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"jbbrd_candidate_saved_search_clear_checkbox\" name=\"jbbrd_candidate_saved_search_clear\" />\n\t\t\t\t\t\t<label class=\"description\" for=\"jbbrd_candidate_saved_search_clear_checkbox\"><?php _e( 'Clear current saved search', 'jbbrd' ); ?></label>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t<?php }\n\t}\n}\n\n/**\n * Saving custom upload CV field to job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_cv_load_field' ) ) {\n\tfunction jbbrd_save_cv_load_field( $user_id ) {\n\t\tif ( ! current_user_can( 'edit_user', $user_id ) || ( FALSE == jbbrd_vacansy_response() ) ) {\n\t\t\treturn FALSE;\n\t\t}\n\t\t$_POST['action'] = 'wp_handle_upload';\n\t\t/* Set array of extention. */\n\t\t$jbbrd_cv_extention_array = array( 'txt', 'doc', 'docx', 'pdf' );\n\t\tif ( $_FILES['jbbrd_user_cv']['error'] === UPLOAD_ERR_OK ) {\n\t\t\t$jbbrd_cv = wp_handle_upload( $_FILES['jbbrd_user_cv'] );\n\t\t\tif ( $jbbrd_cv['error'] == '' ) {\n\t\t\t\tif ( in_array( pathinfo( $jbbrd_cv['file'], PATHINFO_EXTENSION ), $jbbrd_cv_extention_array ) ) {\n\t\t\t\t\tupdate_user_meta( $user_id, 'jbbrd_user_cv', $jbbrd_cv );\n\t\t\t\t} else {\n\t\t\t\t\t$notice[ $post_id ] .=  __( 'Failed to load CV: wrong file type. You can upload only DOC/DOCX, PDF or TXT document.', 'jbbrd' ) . '<br />';\n\t\t\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$notice[ $post_id ] .=  $jbbrd_cv['error'] . '<br />';\n\t\t\t\tupdate_option( 'jbbrd_custom_metafield_error_notice', $notice );\n\t\t\t}\n\t\t}\n\t\t/* Add category for search. */\n\t\t$jbbrd_job_category = $_POST['jbbrd_job_candidate_category_choose'];\n\t\tif ( ! isset( $_POST['jbbrd_candidate_category_clear'] ) ) {\n\t\t\tif ( isset( $jbbrd_job_category ) ) {\n\t\t\t\tupdate_user_meta( $user_id, 'jbbrd_job_candidate_category_choose', $jbbrd_job_category );\n\t\t\t}\n\t\t} else {\n\t\t\tupdate_user_meta( $user_id, 'jbbrd_job_candidate_category_choose', '' );\n\t\t}\n\t\t/* Clear CV if checkbox is checked. */\n\t\tif ( isset( $_POST['jbbrd_cv_clear'] ) && ( '' != $_POST['jbbrd_cv_clear'] ) ) {\n\t\t\t$jbbrd_cv = wp_handle_upload( $_FILES['jbbrd_user_cv'] );\n\t\t\tupdate_user_meta( $user_id, 'jbbrd_user_cv', $jbbrd_cv, get_user_meta( $user_id, 'jbbrd_user_cv', TRUE ) );\n\t\t}\n\t\t/* Clear candidate saved search if checkbox is checked. */\n\t\tif ( isset( $_POST['jbbrd_candidate_saved_search_clear'] ) && ( '' != $_POST['jbbrd_candidate_saved_search_clear'] ) ) {\n\t\t\tupdate_user_meta( $user_id, 'job_candidate_saved_search', '' );\n\t\t}\n\t}\n}\n\n/**\n * Saving custom upload CV field to job_candidate profile page.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_form_accept_uploads' ) ) {\n\tfunction jbbrd_form_accept_uploads() {\n\t\techo ' enctype=\"multipart/form-data\"';\n\t}\n}\n\n/**\n * Insert message to Sender database function.\n * @param $employer_id string owner of current vacancy ID\n * @param $subject string letter subject to send\n * @param $body string letter body to send\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_letter_to_sender_db' ) ) {\n\tfunction jbbrd_save_letter_to_sender_db( $employer_id, $subject, $body ) {\n\t\tglobal $wpdb;\n\t\t/* Prepare data. */\n\t\t// $subject\t \t= htmlspecialchars( stripslashes( $subject ) );\n\t\t// $subject \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $subject ) ) );\n\t\t// $body\t \t\t= htmlspecialchars( stripslashes( $body ) );\n\t\t// $body \t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $body ) ) );\n\t\t// $employer_id\t= htmlspecialchars( stripslashes( $employer_id ) );\n\t\t// $employer_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $employer_id ) ) );\n\t\t/* Save mail into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mail_send', \n\t\t\tarray( \n\t\t\t\t'subject'\t\t=> $subject, \n\t\t\t\t'body'\t\t\t=> $body,\n\t\t\t\t'date_create'\t=> time(),\n\t\t\t\t//'date_create'\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t)\n\t\t);\n\t\t$last_id = $wpdb->insert_id; /* Get last ID. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_users', \n\t\t\tarray( \n\t\t\t\t'id_user'\t\t=> $employer_id, \n\t\t\t\t'id_mail'\t\t=> $last_id,\n\t\t\t)\n\t\t);\n\t\t/*Activation Sendmail cron hook. */\n\t\tadd_filter( 'cron_schedules', 'sndr_more_reccurences' );\n\t\tif ( ! wp_next_scheduled( 'sndr_mail_hook' ) ) {\n\t\t\t$check = wp_schedule_event( time(), 'my_period', 'sndr_mail_hook' );\n\t\t}\n\t}\n}\n\n/**\n * Insert message to Sender-pro database function.\n * @param $employer_id string owner of current vacancy ID\n * @param $subject string letter subject to send\n * @param $body string letter body to send\n * @param $candidate_id string of current user ID\n * @return void\n */\nif ( ! function_exists( 'jbbrd_save_letter_to_sender_pro_db' ) ) {\n\tfunction jbbrd_save_letter_to_sender_pro_db( $employer_id, $subject, $body, $candidate_id ) {\n\t\tglobal $wpdb;\n\t\t/* Prepare data. */\n\t\t$subject\t \t= htmlspecialchars( stripslashes( $subject ) );\n\t\t$subject \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $subject ) ) );\n\t\t$body\t \t\t= htmlspecialchars( stripslashes( $body ) );\n\t\t$body \t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $body ) ) );\n\t\t$employer_id\t= htmlspecialchars( stripslashes( $employer_id ) );\n\t\t$employer_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $employer_id ) ) );\n\t\t$candidate_id\t= htmlspecialchars( stripslashes( $candidate_id ) );\n\t\t$candidate_id \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $candidate_id ) ) );\n\t\t/* Save mail into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mail_send', \n\t\t\tarray( \n\t\t\t\t'subject'\t\t\t=> $subject, \n\t\t\t\t'body'\t\t\t\t=> $body,\n\t\t\t\t'date_create'\t\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t\t'secret_key'\t\t=> MD5(RAND()),\n\t\t\t)\n\t\t);\n\t\t/* Get last ID. */\n\t\t$mail_id = $wpdb->insert_id; \n\t\t/* Get user into database. */\n\t\t$user_id = $employer_id; \n\t\t/* Save user into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_mailout', \n\t\t\tarray( \n\t\t\t\t'mail_id'\t\t\t=> $mail_id,\n\t\t\t\t'from_name'\t\t\t=> get_userdata( $candidate_id )->user_login, \n\t\t\t\t'from_email'\t\t=> get_userdata( $candidate_id )->user_email,\n\t\t\t\t'mailout_create'\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t\t'mailout_start'\t\t=> date( 'Y-m-d H:i:s', time() + get_option('gmt_offset') * 3600 ),\n\t\t\t)\n\t\t);\n\t\t/* Get last ID. */\n\t\t$mailout_id = $wpdb->insert_id;\n\t\t/* Save user into database. */\n\t\t$wpdb->insert( $wpdb->prefix . 'sndr_users', \n\t\t\tarray( \n\t\t\t\t'id_user'\t\t\t=> $user_id,\n\t\t\t\t'id_mail'\t\t\t=> $mail_id,\n\t\t\t\t'id_mailout'\t\t=> $mailout_id,\n\t\t\t)\n\t\t);\n\t\t/*Activation Sendmail cron hook. */\n\t\tadd_filter( 'cron_schedules', 'sndrpr_more_reccurences' );\n\t\tif ( ! wp_next_scheduled( 'sndrpr_mail_hook' ) ) {\n\t\t\t$check = wp_schedule_event( time(), 'my_period', 'sndrpr_mail_hook' );\n\t\t}\n\t}\n}\n\n/**\n * Display an array of category taxonomy slugs you want to filter in frontend.\n * @return $terms array() objects jbbrd_businesses per taxonomy.\n */\nif ( ! function_exists( 'jbbrd_restrict_manage_posts_frontend' ) ) {\n\tfunction jbbrd_restrict_manage_posts_frontend() { \n\t\t$filters = array( 'jbbrd_businesses' );\n\t\tforeach ( $filters as $tax_slug ) {\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\treturn $terms;\n\t\t}\n\t}\n}\n\n/**\n * Display an array of employment category taxonomy slugs you want to filter in frontend.\n * @return $terms array() objects jbbrd_employment per taxonomy.\n */\nif ( ! function_exists( 'jbbrd_employment_restrict_manage_posts_frontend' ) ) {\n\tfunction jbbrd_employment_restrict_manage_posts_frontend() { \n\t\t$filters = array( 'jbbrd_employment' );\n\t\tforeach ( $filters as $tax_slug ) {\n\t\t\t/* Retrieve the taxonomy object. */\n\t\t\t$tax_obj = get_taxonomy( $tax_slug );\n\t\t\t$tax_name = $tax_obj->labels->name;\n\t\t\t/* Retrieve array of term objects per taxonomy. */\n\t\t\t$terms = get_terms( $tax_slug );\n\t\t\treturn $terms;\n\t\t}\n\t}\n}\n\n\n/**\n * Action plugin links function.\n * @param $links string\n * @param $file string\n * @return list of links\n */\nif ( ! function_exists( 'jbbrd_plugin_action_links' ) ) {\n\tfunction jbbrd_plugin_action_links( $links, $file ) {\n\t\t/* Static so we don't call plugin_basename on every plugin row. */\n\t\tstatic $this_plugin;\n\t\tif ( ! $this_plugin )\n\t\t\t$this_plugin = plugin_basename(__FILE__);\n\n\t\tif ( $file == $this_plugin ) {\n\t\t\t$settings_link = '<a href=\"admin.php?page=job-board.php\">' . __( 'Settings', 'jbbrd' ) . '</a>';\n\t\t\tarray_unshift( $links, $settings_link );\n\t\t}\n\t\treturn $links;\n\t}\n}\n\n/**\n * Register plugin links function.\n * @return $links array().\n */\nif ( ! function_exists( 'jbbrd_register_plugin_links' ) ) {\n\tfunction jbbrd_register_plugin_links( $links, $file ) {\n\t\t$base = plugin_basename( __FILE__ );\n\t\tif ( $file == $base ) {\n\t\t\t$links[]\t=\t'<a href=\"admin.php?page=job-board.php\">' . __( 'Settings', 'jbbrd' ) . '</a>';\n\t\t\t$links[]\t=\t'<a href=\"http://wordpress.org/plugins/job-board/faq/\" target=\"_blank\">' . __( 'FAQ', 'jbbrd' ) . '</a>';\n\t\t\t$links[]\t=\t'<a href=\"http://support.bestwebsoft.com\">' . __( 'Support', 'jbbrd' ) . '</a>';\n\t\t}\n\t\treturn $links;\n\t}\n}\n\n/**\n * Function to check is current user are 'job_candidate'.\n * @return bool\n */\nif ( ! function_exists( 'jbbrd_vacansy_response' ) ) {\n\tfunction jbbrd_vacansy_response() { \n\t\tglobal $wpdb;\n\t\t$user = get_current_user_id();\n\t\t$job_candidate = like_escape( 'job_candidate' );\n\t\t$job_candidate = esc_sql( $job_candidate );\n\t\t$job_candidate = '%' . $job_candidate . '%';\n\t\t/* Get subscribers list. */\n\t\t$jbbrd_user_id_find = $wpdb->get_results( \"\n\t\t\tSELECT umt.`user_id`\n\t\t\tFROM `\" . $wpdb->prefix . \"usermeta` as umt\n\t\t\tWHERE umt.`meta_key` = 'wp_capabilities'\n\t\t\tAND umt.`meta_value` LIKE '%job_candidate%'\n\t\t\", ARRAY_N);\n\t\t/* If current user is 'job_candidate' return TRUE */\n\t\tforeach ( $jbbrd_user_id_find as $key => $value ) {\n\t\t\tif ( ( $user == $value[0] ) || is_admin() ) {\n\t\t\t\treturn TRUE;\n\t\t\t}\n\t\t}\n\t\treturn FALSE;\n\t}\n}\n\n/**\n * Get salary array.\n * @return $jbbrd_salary_find_modified array() salary array.\n */\nif ( ! function_exists( 'jbbrd_salary_find' ) ) {\n\tfunction jbbrd_salary_find() { \n\t\tglobal $wpdb;\n\t\t$postmeta_table \t\t\t= $wpdb->prefix . \"postmeta\" ;\n\t\t$post_table \t\t\t\t= $wpdb->prefix . \"posts\" ;\n\t\t$term_relationships_table\t= $wpdb->prefix . \"term_relationships\";\n\t\t$term_taxonomy_table \t\t= $wpdb->prefix . \"term_taxonomy\";\n\t\t$terms_table \t\t\t\t= $wpdb->prefix . \"terms\";\n\t\t/* Get subscribers list. */\n\t\t$jbbrd_salary_find = $wpdb->get_results( \"\n\t\t\tSELECT DISTINCT `meta_value`\n\t\t\tFROM `\" . $postmeta_table . \"` as pmt\n\t\t\tJOIN `\" . $post_table . \"` AS pt ON (pmt.`post_id` = pt.`ID`\n\t\t\t\tAND pt.`post_type` = 'vacancy'\n\t\t\t\tAND pt.`post_status` = 'publish')\n\t\t\tJOIN `\" . $term_relationships_table . \"` AS trt ON pt.`ID` = trt.`object_id`\n\t\t\tJOIN `\" . $term_taxonomy_table . \"` AS ttt ON trt.`term_taxonomy_id` = ttt.`term_taxonomy_id`\n\t\t\tJOIN `\" . $terms_table . \"` AS tt ON (ttt.`term_id` = tt.`term_id`\n\t\t\t\tAND tt.`slug` = 'posted' )\n\t\t\tAND pmt.`meta_key` = 'salary'\n\t\t\", ARRAY_A);\n\t\t$jbbrd_salary_find_modified = array();\n\t\tforeach ( $jbbrd_salary_find as $array_key => $array_value ) {\n\t\t\tforeach ( $array_value as $key => $value ) {\n\t\t\t\t$jbbrd_salary_find_modified[] = $value;\n\t\t\t}\n\t\t}\n\t\treturn $jbbrd_salary_find_modified;\n\t}\n}\n\n/**\n * Change vacancy CPT link returned by CPTsearch BWS Plugin.\n * @return $url string modified url.\n */\nfunction jbbrd_append_vacancy_permalink( $url, $post ) {\n\tglobal $jbbrd_options;\n\tif ( ! ( is_admin() ) && ( 'vacancy' == get_post_type( $post ) ) ) {\n\t\t$jbbrd_link = esc_url( $jbbrd_options['jbbrd_shortcode_permalink'] );\n\t\t$url = $jbbrd_link . '&vacancy_id=' . get_the_ID();\n\t}\n\treturn $url;\n}\n\n/**\n * Hide logo image when search results displayed.\n * @return void\n */\nfunction jbbrd_logo_search_hide() {\n\tglobal $jbbrd_options;\n\tif ( ! ( is_admin() ) && ( isset( $_GET['s'] ) ) ) { ?>\n\t\t<style type=\"text/css\">\n\t\t\t.vacancy img { /* Set custom header background */\n\t\t\t\tdisplay: none !important; \n\t\t\t}\n\t\t</style>\n\t<?php }\n}\n\n/**\n * Function get salary from mixed string.\n * @param mixed salary string\n * @return string maximum digit in salary\n */\nif ( ! function_exists( 'jbbrd_get_salary' ) ) {\n\tfunction jbbrd_get_salary( $jbbrd_salary_string ) { \n\t\t$jbbrd_salary_string = esc_html( $jbbrd_salary_string );\n\t\t$pattern = '[\\D+]';\n\t\t$jbbrd_nums_array = preg_split( $pattern , $jbbrd_salary_string );\n\t\treturn max( $jbbrd_nums_array );\n\t}\n}\n\nif ( ! function_exists( 'jbbrd_sendmail_session_check' ) ) {\n\tfunction jbbrd_sendmail_session_check() { \n\t\tif ( isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t$_SESSION['jbbrd_send_cv'] = 1;\n\t\t\treturn 1;\n\t\t} else {\n\t\t\t$_SESSION['jbbrd_send_cv'] = 0;\n\t\t\treturn 0;\n\t\t}\n\t}\n}\n\n/**\n * Function to display frontend by shortcode [jbbrd_vacancy].\n * @return shortcode frontend content string\n */\nif ( ! function_exists( 'jbbrd_vacancy_shortcode' ) ) {\n\tfunction jbbrd_vacancy_shortcode() { \n\t\tglobal $wp_query, $jbbrd_options, $jbbrd_sender_not_found, $jbbrd_sender_not_active;\n\t\t/* Get sender-pro plugin options. */\n\t\t$sndrpr_options = get_option( 'sndrpr_options' );\n\t\tinclude_once( ABSPATH . 'wp-admin/includes/plugin.php' );\n\t\t$jbbrd_location_array = jbbrd_find_location_metabox_fields();\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\t/* Find maximum and minimum salary. */\n\t\t$jbbrd_salary_array = jbbrd_salary_find();\n\t\tif ( isset( $jbbrd_salary_array[0] ) ) {\n\t\t\t$jbbrd_salary_min = min( jbbrd_salary_find() );\n\t\t\t$jbbrd_salary_max = max( jbbrd_salary_find() );\n\t\t} else {\n\t\t\t$jbbrd_salary_min = $jbbrd_salary_max = 0;\n\t\t}\n\t\t/* Clear posible vulnerabilities of variable input. */\n\t\t$jbbrd_get_search_period \t\t= isset( $_GET['search_period'] ) ? htmlspecialchars( stripslashes( $_GET['search_period'] ) ) : \"\";\n\t\t$jbbrd_get_category \t\t\t= isset( $_GET['category'] ) ? htmlspecialchars( stripslashes( $_GET['category'] ) ) : \"\";\n\t\t$jbbrd_get_employment_category \t= isset( $_GET['employment_category'] ) ? htmlspecialchars( stripslashes( $_GET['employment_category'] ) ) : \"\";\n\t\t$jbbrd_get_location\t \t\t\t= isset( $_GET['jbbrd_location'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_location'] ) ) : \"\";\n\t\t$jbbrd_get_organization\t \t\t= isset( $_GET['jbbrd_organization'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_organization'] ) ) : \"\";\n\t\t$jbbrd_get_salary_from\t \t\t= isset( $_GET['jbbrd_salary_from'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_salary_from'] ) ) : \"\";\n\t\t$jbbrd_get_salary_to\t \t\t= isset( $_GET['jbbrd_salary_to'] ) ? htmlspecialchars( stripslashes( $_GET['jbbrd_salary_to'] ) ) : \"\";\n\t\t$jbbrd_get_vacancy_id\t \t\t= isset( $_GET['vacancy_id'] ) ? htmlspecialchars( stripslashes( $_GET['vacancy_id'] ) ) : \"\";\n\n\t\t$jbbrd_get_search_period \t\t= $_GET['search_period'] \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_search_period ) ) );\n\t\t$jbbrd_get_category \t\t\t= $_GET['category']\t\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_category ) ) );\n\t\t$jbbrd_get_employment_category\t= $_GET['employment_category'] \t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_employment_category ) ) );\n\t\t$jbbrd_get_location\t\t\t\t= $_GET['jbbrd_location'] \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_location ) ) );\n\t\t$jbbrd_get_organization\t\t\t= $_GET['jbbrd_organization']\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_organization ) ) );\n\t\t$jbbrd_get_salary_from\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_salary_from ) ) );\n\t\t$jbbrd_get_salary_to\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_salary_to ) ) );\n\t\t$jbbrd_get_vacancy_id\t\t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $jbbrd_get_vacancy_id ) ) );\n\t\t/* Set array of search time select. */\n\t\t$jbbrd_vacancy_search_period = array( \n\t\t\t3\t\t=> __( 'Last 3 days', 'jbbrd' ),\n\t\t\t7 \t\t=> __( 'Last week', 'jbbrd' ),\n\t\t\t30\t\t=> __( 'Last month', 'jbbrd' ),\n\t\t);\n\t\t/* If time period exist set time period query. */\n\t\tif ( isset( $jbbrd_get_search_period ) && ( '' != $jbbrd_get_search_period ) ) {\n\t\t\t$jbbrd_search_period_cond = array(\n\t\t\t\t'column' => 'post_modified_gmt',\n\t\t\t\t'after'  => $jbbrd_get_search_period . ' day ago',\n\t\t\t);\t\n\t\t} else {\n\t\t\t$jbbrd_search_period_cond = '';\n\t\t}\n\t\t/* If category exist set search by this category. */\n\t\tif ( isset( $jbbrd_get_category ) && ( '' != $jbbrd_get_category ) ) {\n\t\t\t$jbbrd_businesses_search_categories = array(\n\t\t\t\t'taxonomy'\t=> 'jbbrd_businesses',\n\t\t\t\t'field'\t\t=> 'slug',\n\t\t\t\t'terms'\t\t=> $jbbrd_get_category,\n\t\t\t);\n\t\t} else {\n\t\t\t$jbbrd_businesses_search_categories = '';\n\t\t}\n\t\t/* If employment category exist set search by this category. */\n\t\tif ( isset( $jbbrd_get_employment_category ) && ( '' != $jbbrd_get_employment_category ) ) {\n\t\t\t$jbbrd_employment_search_categories = array(\n\t\t\t\t'taxonomy'\t=> 'jbbrd_employment',\n\t\t\t\t'field'\t\t=> 'slug',\n\t\t\t\t'terms'\t\t=> $jbbrd_get_employment_category,\n\t\t\t);\n\t\t} else\n\t\t\t$jbbrd_employment_search_categories = '';\n\t\t\n\t\t$jbbrd_search_categories = array(\n\t\t\t$jbbrd_businesses_search_categories,\n\t\t\t$jbbrd_employment_search_categories,\n\t\t);\n\t\t/* Set wp_query conditions for frontend form search. */\n\t\tif ( isset( $jbbrd_get_location ) && ( '' != $jbbrd_get_location ) ) \n\t\t\t$jbbrd_location_cond = array( \n\t\t\t\t'key'\t\t=> 'jbbrd_location', \n\t\t\t\t'value'\t\t=> $jbbrd_get_location, \n\t\t\t\t'compare'\t=> 'LIKE', \n\t\t\t);\n\t\telse\n\t\t\t$jbbrd_location_cond = '';\n\t\t\n\t\tif ( isset( $jbbrd_get_organization ) && ( '' != $jbbrd_get_organization ) ) \n\t\t\t$jbbrd_organization_cond = array( \n\t\t\t\t'key'\t\t=> 'jbbrd_organization', \n\t\t\t\t'value'\t\t=> $jbbrd_get_organization,\n\t\t\t\t'compare'\t=> 'LIKE', \n\t\t\t);\n\t\telse\n\t\t\t$jbbrd_organization_cond = '';\n\t\t\n\t\tif ( isset( $jbbrd_get_salary_from ) && ( '' != $jbbrd_get_salary_from ) ) \n\t\t\t$jbbrd_salary_from_cond = array( \n\t\t\t\t'key' \t\t=> 'salary', \n\t\t\t\t'value' \t=> jbbrd_get_salary( $jbbrd_get_salary_from ),\n\t\t\t\t'compare' \t=> '>=', \n\t\t\t\t'type' \t\t=> 'numeric',);\n\t\telse\n\t\t\t$jbbrd_salary_from_cond = '';\n\n\t\tif ( isset( $jbbrd_get_salary_to ) && ( '' != $jbbrd_get_salary_to ) ) \n\t\t\t$jbbrd_salary_to_cond = array( \n\t\t\t\t'key' \t\t=> 'salary', \n\t\t\t\t'value' \t=> jbbrd_get_salary( $jbbrd_get_salary_to ), \n\t\t\t\t'compare' \t=> '<=', \n\t\t\t\t'type' \t\t=> 'numeric',);\n\t\telse\n\t\t\t$jbbrd_salary_to_cond = '';\n\n\t\t/* If get ID - set id search condition. */\n\t\tif ( isset( $jbbrd_get_vacancy_id ) && ( '' != $jbbrd_get_vacancy_id ) ) \n\t\t\t$jbbrd_title_search_cond = $jbbrd_get_vacancy_id;\n\t\telse\n\t\t\t$jbbrd_title_search_cond = '';\n\t\t/* Add parameters for output posts. */\t\t\n\t\t$args = array(\n\t\t\t'post_type'\t\t\t\t=> 'vacancy',\n\t\t\t'p'\t\t\t\t\t\t=> $jbbrd_title_search_cond,\t\t\n\t\t\t'tax_query' \t\t\t=> $jbbrd_search_categories,\n\t\t\t'ignore_sticky_posts'\t=> TRUE,\n\t\t\t'paged' \t\t\t\t=> get_query_var( 'paged' ), \n\t\t\t'posts_per_page'\t\t=> $jbbrd_options['post_per_page'],\n\t\t\t'archive' \t\t\t\t=> 'Posted',\n\t\t\t'orderby'\t\t\t\t=> 'post_date',\n\t\t\t'order'\t\t\t\t\t=> 'DESC',\n\t\t\t/* Forming meta querry. */\n\t\t\t'meta_query'\t\t\t=>\tarray(\n\t\t\t\t'relation' \t=> 'AND', \n\t\t\t\t$jbbrd_location_cond,\n\t\t\t\t$jbbrd_organization_cond,\n\t\t\t\t$jbbrd_salary_from_cond,\n\t\t\t\t$jbbrd_salary_to_cond,\n\t\t\t),\n\t\t\t'date_query' => array(\n\t\t\t\t$jbbrd_search_period_cond,\n\t\t\t),\n\t\t);\n\t\t$wp_query = new WP_Query( $args );\n\t\t$jbbrd_content = '';\n\t\t/* Print form fo sorting jobs in frontend if user logged. */\n\t\tif ( is_user_logged_in() && ( current_user_can( 'read_private_vacancies', get_current_user_id() ) ) ) { \n\t\t\t/* Add to table of response if submit. */\n\t\t\tif ( isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t\t/* Move mail from job candidate to Sender plugin DB. */\n\t\t\t\t$jbbrd_sendmail_error = '';\n\t\t\t\t$jbbrd_current_employer_id \t\t= esc_html( $_POST['jbbrd_frontend_submit_post_email'] );\n\t\t\t\tif ( empty( $jbbrd_current_employer_id ) ) {\n\t\t\t\t\t$jbbrd_sendmail_error = __( 'Error: Vacancy author not found. The message has not been sent.', 'jbbrd' );\n\t\t\t\t}\n\t\t\t\tif ( '' == $jbbrd_sendmail_error ) {\n\t\t\t\t\t$jbbrd_current_employer_email \t= get_userdata( $jbbrd_current_employer_id );\n\t\t\t\t\t$jbbrd_current_employer_email \t= $jbbrd_current_employer_email->user_email; \n\t\t\t\t\t$jbbrd_current_vacancy_id\t\t= esc_html( $_POST['jbbrd_frontend_submit_post_id'] );\n\t\t\t\t\t$jbbrd_current_candidate \t\t= get_current_user_id();\n\t\t\t\t\t$jbbrd_current_candidate_cv \t= get_user_meta( $jbbrd_current_candidate, 'jbbrd_user_cv', TRUE ); \n\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv['url'] ) ) {\n\t\t\t\t\t\t$jbbrd_current_candidate_cv = $jbbrd_current_candidate_cv['url'];\n\t\t\t\t\t} \n\t\t\t\t\t/* Forming message. */\n\t\t\t\t\tif ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) {\n\t\t\t\t\t\tif ( ( isset( $sndrpr_options['html_email'] ) ) && ( 1 == $sndrpr_options['html_email'] ) ) {\n\t\t\t\t\t\t\t$jbbrd_message = '<div style=\"width:600px;padding:20px 30px;border:1px solid #e0e0e0;background:#fff;\"><h2 style=\"color:#6495ED;line-height:11px;\">' . __( 'Hello,', 'jbbrd' ) . '&nbsp;' . get_userdata( $jbbrd_current_employer_id )->user_login . '</h2>'; \n\t\t\t\t\t\t\t$jbbrd_message .= '<h4 style=\"font-weight:normal;\">' . __( 'You receive message for your job offer:', 'jbbrd' ) . '&nbsp;<strong>' . get_the_title( $jbbrd_current_vacancy_id ) . '</strong><br />';\n\t\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . '&nbsp;<strong>' . get_userdata( $jbbrd_current_candidate )->user_login . '</strong></h4>';\n\t\t\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv ) && ( '' != $jbbrd_current_candidate_cv ) ) {\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = pathinfo( $jbbrd_current_candidate_cv );\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = $jbbrd_current_candidate_cv_filename['basename'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t$jbbrd_current_candidate_cv = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_message .= sprintf( '<h4 style=\"font-weight:normal;\">' . __( 'Candidate CV:', 'jbbrd' ) . '&nbsp;' . ( ( '' != $jbbrd_current_candidate_cv ) ? '<a style=\"color:#6495ED;text-decoration:none;line-height:11px;\" href=\"' . $jbbrd_current_candidate_cv . '\">' . $jbbrd_current_candidate_cv_filename . '</a>' : __( '...sorry, CV not found.', 'jbbrd' ) ) . '</h4>');\n\t\t\t\t\t\t\t$jbbrd_message .= '<hr style=\"border-width:0;border-bottom:solid 1px #e0e0e0;\" />';\n\t\t\t\t\t\t\t$jbbrd_message .= sprintf( __( 'This mail was sent by %sJob board%s plugin by %sBestWebSoft%s from', 'jbbrd' ) . '&nbsp;<a  href=\"' . esc_url( get_bloginfo( 'url' ) ) . '\">' . get_bloginfo( 'name' ) . '</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/job-board/' ) . '\">' ),'</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/' ) . '\">' ),'</a>' );\n\t\t\t\t\t\t\t$jbbrd_message .= '</div>';\n\t\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$jbbrd_message = __( 'Hello,', 'jbbrd' ) . ' ' . get_userdata( $jbbrd_current_employer_id )->user_login . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'You receive message for your job offer:', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . ' ' . get_userdata( $jbbrd_current_candidate )->user_login . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'Candidate CV:', 'jbbrd' ) . ' ' . $jbbrd_current_candidate_cv . \"\\n\";\n\t\t\t\t\t\t\t$jbbrd_message .= __( 'This mail was sent by Job board plugin by BestWebSoft from', 'jbbrd' ) . ' ' . get_bloginfo( 'name' ) . '.';\n\t\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$jbbrd_message = '<div style=\"width:600px;padding:20px 30px;border:1px solid #e0e0e0;background:#fff;\"><h2 style=\"color:#6495ED;line-height:11px;\">' . __( 'Hello,', 'jbbrd' ) . '&nbsp;' . get_userdata( $jbbrd_current_employer_id )->user_login . '</h2>'; \n\t\t\t\t\t\t$jbbrd_message .= '<h4 style=\"font-weight:normal;\">' . __( 'You receive message for your job offer:', 'jbbrd' ) . '&nbsp;<strong>' . get_the_title( $jbbrd_current_vacancy_id ) . '</strong><br />';\n\t\t\t\t\t\t$jbbrd_message .= __ ( 'from candidate:', 'jbbrd' ) . '&nbsp;<strong>' . get_userdata( $jbbrd_current_candidate )->user_login . '</strong></h4>';\n\t\t\t\t\t\tif ( isset( $jbbrd_current_candidate_cv ) && ( '' != $jbbrd_current_candidate_cv ) ) {\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = pathinfo( $jbbrd_current_candidate_cv );\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv_filename = $jbbrd_current_candidate_cv_filename['basename'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t$jbbrd_current_candidate_cv = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$jbbrd_message .= sprintf( '<h4 style=\"font-weight:normal;\">' . __( 'Candidate CV:', 'jbbrd' ) . '&nbsp;' . ( ( '' != $jbbrd_current_candidate_cv ) ? '<a style=\"color:#6495ED;text-decoration:none;line-height:11px;\" href=\"' . $jbbrd_current_candidate_cv . '\">' . $jbbrd_current_candidate_cv_filename . '</a>' : __( '...sorry, CV not found.', 'jbbrd' ) ) . '</h4>');\n\t\t\t\t\t\t$jbbrd_message .= '<hr style=\"border-width:0;border-bottom:solid 1px #e0e0e0;\" />';\n\t\t\t\t\t\t$jbbrd_message .= sprintf( __( 'This mail was sent by %sJob board%s plugin by %sBestWebSoft%s from', 'jbbrd' ) . '&nbsp;<a  href=\"' . esc_url( get_bloginfo( 'url' ) ) . '\">' . get_bloginfo( 'name' ) . '</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/plugin/job-board/' ) . '\">' ),'</a>', ( '<a href=\"' . esc_url( 'http://bestwebsoft.com/' ) . '\">' ),'</a>' );\n\t\t\t\t\t\t$jbbrd_message .= '</div>';\n\t\t\t\t\t\t$jbbrd_subject = __( 'Reply for', 'jbbrd' ) . ' ' . get_the_title( $jbbrd_current_vacancy_id ) . ' ' . __( 'job offer.', 'jbbrd' );\n\t\t\t\t\t}\n\t\t\t\t\t/* Sendmail by Email-query if active. Else use sendmail function due Sender. */\n\t\t\t\t\tif ( 0 == $_SESSION['jbbrd_send_cv'] ) {\n\t\t\t\t\t\t/* Set session var for submit only once. */\n\t\t\t\t\t\t$_SESSION['jbbrd_send_cv'] = 1;\n\t\t\t\t\t\tif ( is_plugin_active( 'email-queue/email-queue.php' ) ) {\n\t\t\t\t\t\t\tmlq_add_extra_plugin_to_mail_queue( array(\n\t\t\t\t\t\t\t\t'plugin_name'\t\t\t=> 'Job board', \n\t\t\t\t\t\t\t\t'plugin_slug' \t\t\t=> 'job-board',\n\t\t\t\t\t\t\t\t'plugin_link'\t\t\t=> plugin_basename( __FILE__ ),\n\t\t\t\t\t\t\t\t'install_link'\t\t\t=> '/wp-admin/plugin-install.php?tab=search&s=Job+Board+Bestwebsoft&plugin-search-input=Search+Plugins',\n\t\t\t\t\t\t\t) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( is_plugin_active( 'email-queue/email-queue.php' ) && mlq_if_mail_plugin_is_in_queue( plugin_basename( __FILE__ ) ) ) {\n\t\t\t\t\t\t\tmlq_get_mail_data_for_email_queue_and_save( plugin_basename( __FILE__ ), $jbbrd_current_employer_email, $jbbrd_subject, $jbbrd_message );\n\t\t\t\t\t\t} \n\t\t\t\t\t\telseif ( is_plugin_active( 'sender-pro/sender-pro.php' ) || is_plugin_active_for_network( 'sender-pro/sender-pro.php' ) ) {\n\t\t\t\t\t\t\tjbbrd_save_letter_to_sender_pro_db( $jbbrd_current_employer_id, $jbbrd_subject, $jbbrd_message, $jbbrd_current_candidate );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjbbrd_save_letter_to_sender_db( $jbbrd_current_employer_id, $jbbrd_subject, $jbbrd_message );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . stripslashes( $jbbrd_options['vacancy_reply_text'] ) . '</h3>';\n\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_form_back\" value=\"submit\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_sendmail_form_back\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Back to jobs', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . $jbbrd_sendmail_error . '</h3>';\n\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_form_back\" value=\"submit\" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_sendmail_form_back\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Back to jobs', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Check $_SESSION status. */\n\t\t\t$_SESSION['jbbrd_send_cv'] = jbbrd_sendmail_session_check();\n\t\t\t/* If no send CV button. */\n\t\t\tif ( ! isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) {\n\t\t\t\tif ( ( ! isset( $_GET['vacancy_id'] ) ) || ( isset( $_GET['vacancy_id'] ) && ( ! ( $wp_query->have_posts() ) ) )    ) {\n\t\t\t\t/* Print form fo sorting jobs in frontend. */\n\t\t\t\t\t/* Frontend sorting form. */\n\t\t\t\t\tif ( isset( $jbbrd_options['frontend_form'] ) && ( 1 == $jbbrd_options['frontend_form'] ) ) { \n\t\t\t\t\t\t$jbbrd_content .= '<hr />\n\t\t\t\t\t\t<h3>' . __( 'Add parameters to sorting jobs', 'jbbrd' ) . '</h3>';\n\t\t\t\t\t}\n\t\t\t\t\t/* Save query search results form button. */\n\t\t\t\t\tif ( ( isset( $_GET['jbbrd_frontend_form'] ) ) && is_user_logged_in() && ( ( FALSE != jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<form id=\"jbbrd_frontend_save_query_results\" method=\"post\" action=\"\">\n\t\t\t\t\t\t\t<table id=\"jbbrd_frontend_table_savesearch_box\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>';\n\t\t\t\t\t\t\t\t\t\tif ( isset( $_POST['jbbrd_frontend_save_query_results'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<h4>' . __( 'Search results saved.', 'jbbrd' ) . '</h4>';\n\t\t\t\t\t\t\t\t\t\t\t/* Save query results to candidate profile. */\n\t\t\t\t\t\t\t\t\t\t\t$user_id = get_current_user_id();\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_search_args_array = $_GET;\n\t\t\t\t\t\t\t\t\t\t\tupdate_user_meta( $user_id, 'job_candidate_saved_search', $jbbrd_search_args_array );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_save_query_results\" value=\"submit\" />\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"float:left;margin:0 5px 0 0;\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Save search results', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</td>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</form>';\n\t\t\t\t\t}\n\t\t\t\t\t/* Frontend sorting form. */\n\t\t\t\t\tif ( isset( $jbbrd_options['frontend_form'] ) && ( 1 == $jbbrd_options['frontend_form'] ) ) { \n\t\t\t\t\t\t$jbbrd_content .= '<form id=\"jbbrd_frontend_form\" method=\"get\" action=\"';\n\t\t\t\t\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$jbbrd_content .= '\">\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"page_id\" value=\"' . get_the_ID() . '\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Location:', 'jbbrd' ) . '</label>';\n\t\t\t\t\t\t\t\t\t\t\t\tif ( 1 == $jbbrd_options['location_select'] ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"jbbrd_location\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all locations', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( $jbbrd_location_array as $key => $current_location ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"' . $current_location . '\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_location ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( $current_location == $jbbrd_get_location ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ' selected=\"selected\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\">' . $current_location . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>';\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .=\t'<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_location\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_location ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_location; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />';\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Select category:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"category\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all categories', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( jbbrd_restrict_manage_posts_frontend() as $term ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_POST to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $term->slug;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_category ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_category == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $term->name . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Employment:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for taxonomy dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"employment_category\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'Show all employments', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( jbbrd_employment_restrict_manage_posts_frontend() as $term ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $term->slug;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_employment_category ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_employment_category == $term->slug ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $term->name . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Searching period:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output html for time period for modified vacancy date dropdown filter. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<select name=\"search_period\" class=\"jbbrd_frontend_input\">';\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option value=\"\">' . __( 'All time', 'jbbrd' ) . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ( $jbbrd_vacancy_search_period as $key => $value ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/* Output each select option line, check against the last $_GET to show the current option selected. */\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<option class=\"jbbrd_frontend_input\" value='. $key;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['search_period'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $_GET['search_period'] == $key ? ' selected=\"selected\"' : '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '>' . $value . '</option>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '</select>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\n\t\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\n\t\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Organization:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_organization\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_get_organization ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_get_organization;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Salary:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"jbbrd_frontend_salary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_frontend_input_salary_from\" class=\"jbbrd_frontend_input\" name=\"jbbrd_salary_from\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_salary_min ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"position:relative;top:10px;\">' . __( 'to', 'jbbrd' ) . '</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"left\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"jbbrd_frontend_input_salary_to\" class=\"jbbrd_frontend_input\" name=\"jbbrd_salary_to\" value=\"';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $jbbrd_salary_max ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"clear\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>';\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( $jbbrd_salary_min != $jbbrd_salary_max ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"jbbrd_slider\" class=\"ui-corner-all\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"#jbbrd_slider\").slider({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: ';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax: ';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues: [';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_from'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_from );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_min;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= ',';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( isset( $_GET['jbbrd_salary_to'] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= jbbrd_get_salary( $jbbrd_get_salary_to );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_salary_max;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trange: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstop: function(event, ui) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_from\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",0));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_to\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",1));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslide: function(event, ui){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_from\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",0));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tjQuery(\"input#jbbrd_frontend_input_salary_to\").val(jQuery(\"#jbbrd_slider\").slider(\"values\",1));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</td><!-- .jbbrd_frontend_field -->\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\" style=\"padding-top:20px;\">\n\t\t\t\t\t\t\t\t\t\t\t</td><!-- .jbbrd_frontend_field -->\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t\t\t\t\t</div><!-- -->\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_form\" value=\"submit\" />\n\t\t\t\t\t\t\t<div style=\"\">\n\t\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t<input type=\"reset\" value=\"' . __( 'Reset', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Search', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form><!-- #jbbrd_frontend_form -->';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Print alert if no posts found. */\n\t\t\tif ( ! ( $wp_query->have_posts() ) ) {\n\t\t\t\t$jbbrd_content .= '<br /><h3>' . __( 'Nothing found.', 'jbbrd' ) . '</h3>';\n\t\t\t}\n\t\t}\n\t\tif ( ( $wp_query->have_posts() ) && ( ! isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ) ) : /* check for existing posts with specified parameters*/ \n\t\t\twhile ( $wp_query->have_posts() ) : $wp_query->the_post(); \n\t\t\t\t$jbbrd_custom = get_post_custom();\n\t\t\t\t/* Common vacation page view.  */\n\t\t\t\t$jbbrd_content .= '\n\t\t\t\t<div class=\"jbbrd_vacancy\">\n\t\t\t\t\t<hr style=\"margin:15px 0 15px 0;\" />';\n\t\t\t\t\t/* Logo on left side. */\n\t\t\t\t\tif ( 'left' == $jbbrd_options['logo_position'] ) {\n\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t<h2 style=\"margin-bottom:0px;\">\n\t\t\t\t\t\t\t<a style=\"\" href=\"';\n\t\t\t\t\t\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t\t\t\t\t\t$jbbrd_content .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$jbbrd_content .= '&vacancy_id=' . get_the_ID() . '\">';\n\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_title() . '\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<span style=\"font-size:0.8em;margin-top:0;margin-bottom:0;\"><strong>' . __( 'Posted:', 'jbbrd' ) . '</strong>&nbsp;' . get_the_date( 'j F, Y' ) . '</span>\n\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;width:100%;\">\n\t\t\t\t\t\t\t<div style=\"padding:0;\">';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && ( has_post_thumbnail() ) ) $jbbrd_content .= '<div style=\"margin:5px 10px 10px 0;float:left;\">' . get_the_post_thumbnail() . '</div>';\n\t\t\t\t\t\t\t\t$jbbrd_content .= '</div>\n\t\t\t\t\t\t\t<div style=\"padding:0;\">';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Organization:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_organization\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_location\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Location:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_location\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"salary\"][0] ) && ( '' != $jbbrd_custom[\"salary\"][0] ) ) { \n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Salary:', 'jbbrd') . '</strong>&nbsp;' . $jbbrd_custom[\"salary\"][0] . '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$jbbrd_content .= '</div>\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t}\n\t\t\t\t\t/* Logo on right side. */\n\t\t\t\t\tif ( 'right' == $jbbrd_options['logo_position'] ) { \n\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;width:100%;\">\n\t\t\t\t\t\t\t<div class=\"jbbrd_logo\" style=\"float:left;\">\n\t\t\t\t\t\t\t\t<h2 style=\"margin-bottom:0px;\">\n\t\t\t\t\t\t\t\t\t<a style=\"\" href=\"' . $jbbrd_options['jbbrd_shortcode_permalink'] . '&vacancy_id=' . get_the_ID() . '\">';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_title()  . '\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<p style=\"font-size:0.8em;margin-top:0;margin-bottom:0;\"><strong>' . __( 'Posted:', 'jbbrd' ) . '</strong>&nbsp;' . get_the_date( 'j F, Y' ) . '</p>';\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_organization\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_organization\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Organization:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_organization\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"jbbrd_location\"][0] ) && ( '' != $jbbrd_custom[\"jbbrd_location\"][0] ) ) {\n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Location:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"jbbrd_location\"][0] . '</p>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"salary\"][0] ) && ( '' != $jbbrd_custom[\"salary\"][0] ) ) { \n\t\t\t\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Salary:', 'jbbrd') . '</strong>&nbsp;' . $jbbrd_custom[\"salary\"][0] . '&nbsp;' . $jbbrd_options['money_choose'] . '/' . $jbbrd_options['time_period_choose'] . '</p>'; \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && ( has_post_thumbnail() ) ) $jbbrd_content .= '<div style=\"margin:5px 0 10px 10px;float:right;\">' . get_the_post_thumbnail() . '</div>';\n\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t</div><!-- .jbbrd_logo -->';\n\t\t\t\t\t}\n\t\t\t\t\t/* Common vacation page view.  */\n\t\t\t\t\t$jbbrd_content .= '<div id=\"jbbrd_custom_post_' . get_the_ID() . '\" class=\"jbbrd_content\">';\n\t\t\t\t\t/* Show vacancy content if get vacancy ID, else show exerpts. */\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) ) \n\t\t\t\t\t\t$jbbrd_content .= '<p>' . get_the_content() . '</p>';\n\t\t\t\t\telse { \n\t\t\t\t\t\t/* Replaces the excerpt \"more\" text by a link. */\n\t\t\t\t\t\tadd_filter( 'excerpt_more', 'jbbrd_excerpt_more_link' );\n\t\t\t\t\t\t$jbbrd_content .= '<p>' . get_the_excerpt() . '</p>';\n\t\t\t\t\t} \n\t\t\t\t\t$jbbrd_content .= '</div><!-- .jbbrd_content -->';\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"employment\"][0] ) && ( '' != $jbbrd_custom[\"employment\"][0] ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Employment:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"employment\"][0] . '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tif ( isset( $_GET['vacancy_id'] ) && isset( $jbbrd_custom[\"demands\"][0] ) && ( '' != $jbbrd_custom[\"demands\"][0] ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<p style=\"margin-top:0;margin-bottom:0;\"><strong>' . __( 'Requirements:', 'jbbrd' ) . '</strong>&nbsp;' . $jbbrd_custom[\"demands\"][0] . '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tif ( is_user_logged_in() && ( ( FALSE != jbbrd_vacansy_response() ) || ( current_user_can( 'activate_plugins', get_current_user_id() ) ) ) && ( is_plugin_active( 'email-query/email_query.php' ) || is_plugin_active( 'sender/sender.php' ) || is_plugin_active( 'sender-pro/sender-pro.php' ) ) ) { \n\t\t\t\t\t\tif ( ( '' != $jbbrd_shortcode_permalink ) && ( isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) && ( $jbbrd_options['jbbrd_shortcode_permalink'] == $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t\t\t$jbbrd_content .= '\n\t\t\t\t\t\t\t<form method=\"post\" action=\"\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_sendmail_submit\" value=\"submit\" />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p style=\"margin:10px 0;\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"send\" value=\"' . __( 'Send CV', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_submit_post_email\" value=\"';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_id = 'ID';\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= get_the_author_meta( $jbbrd_id );\n\t\t\t\t\t\t\t\t\t\t$jbbrd_content .= '\" />\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_submit_post_id\" value=\"' . get_the_ID() . '\" />\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/* Get link to edit vacancy if current user is admin or vacancy author (employer). */\n\t\t\t\t\tif ( ( is_user_logged_in() ) && ( current_user_can( 'activate_plugins', get_current_user_id() ) || ( get_the_author_meta('ID') == get_current_user_id() ) ) ) {\n\t\t\t\t\t\t$jbbrd_content .= '<a href=\"' . get_edit_post_link( get_the_ID() ) . '\">' . __( 'Edit job', 'jbbrd' ) . '</a>';\n\t\t\t\t\t}\n\t\t\t\t\t$jbbrd_content .= '</div><!-- .jbbrd_vacancy -->';\n\t\t\tendwhile;\n\t\t\twp_link_pages(); \n\t\t\t/* Add pagination. */\n\t\t\t$jbbrd_content .= jbbrd_vacancy_page_pagination();\n\t\tendif;\n\t\twp_reset_postdata();\n\t\twp_reset_query();\n\t\treturn $jbbrd_content;\n\t}\n}\n\n/* TEST */\nif ( ! function_exists( 'jbbrd_test' ) ) {\n\tfunction jbbrd_test() {\n\t\t$cntctfrm_result = isset( $_POST['jbbrd_frontend_sendmail_submit'] ) ? true : false;\n\t\treturn $cntctfrm_result;\n\t}\n}\n\n/**\n * Function to display frontend by shortcode [jbbrd_registration].\n * @return shortcode login/registration form content string\n */\nif ( ! function_exists( 'jbbrd_registration_shortcode' ) ) {\n\tfunction jbbrd_registration_shortcode() {\n\t\tglobal $wpdb, $jbbrd_options;\n\t\t$jbbrd_register_form_content = $jbbrd_register_error = '';\n\t\t/* If user not logged or not admin/employer/job_candidate show login form */\n\t\tif ( ! is_user_logged_in() ) {\n\t\t\tif ( ! isset( $_POST['jbbrd_registration_request'] ) ) {\n\t\t\t\t/* Arguments for login form. */\n\t\t\t\t$args = array(\n\t\t\t\t\t'echo'\t\t\t\t=> FALSE,\n\t\t\t\t\t'redirect'\t\t\t=> site_url( $_SERVER['REQUEST_URI'] ), \n\t\t\t\t\t'form_id'\t\t\t=> 'jbbrd_loginform',\n\t\t\t\t\t'label_username'\t=> __( 'Username', 'jbbrd' ),\n\t\t\t\t\t'label_password'\t=> __( 'Password', 'jbbrd' ),\n\t\t\t\t\t'label_remember'\t=> __( 'Remember Me', 'jbbrd' ),\n\t\t\t\t\t'label_log_in'\t\t=> __( 'Log In', 'jbbrd' ),\n\t\t\t\t\t'id_username' \t\t=> 'user_login',\n\t\t\t\t\t'id_password'\t\t=> 'user_pass',\n\t\t\t\t\t'id_remember'\t\t=> 'rememberme',\n\t\t\t\t\t'id_submit'\t\t\t=> 'wp-submit',\n\t\t\t\t\t'remember'\t\t\t=> TRUE,\n\t\t\t\t\t'value_username'\t=> NULL,\n\t\t\t\t\t'value_remember'\t=> FALSE\n\t\t\t\t);\n\t\t\t\t$jbbrd_register_form_content .= wp_login_form( $args );\n\t\t\t\t$jbbrd_register_form_content .= \n\t\t\t\t'<form id=\"jbbrd_registration_request\" method=\"POST\">\n\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_registration_request\" value=\"submit\" />\n\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Registration', 'jbbrd' ) . '\" />\n\t\t\t\t</form>';\n\t\t\t} else {\n\t\t\t\tif ( ! isset( $_POST['jbbrd_frontend_registration_form'] ) ) {\n\t\t\t\t\t$jbbrd_register_form_content .= '<form id=\"jbbrd_registration_form\" method=\"POST\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'Name:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_user_login\" value=\"\" />\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'E-mail:', 'jbbrd' ) . '</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"jbbrd_frontend_input\" name=\"jbbrd_user_email\" value=\"\" />\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t<div class=\"jbbrd_frontend_table_div\">\n\t\t\t\t\t\t\t\t<table class=\"jbbrd_frontend_table_sendmail\">\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"jbbrd_frontend_field\" style=\"min-width:200px;\">\n\t\t\t\t\t\t\t\t\t\t\t<label>' . __( 'User role:', 'jbbrd' ) . '</label><br />';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"jbbrd_user_role\" value=\"employer\"';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '/>' . __( 'Employer', 'jbbrd' ) . '<br />\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"jbbrd_user_role\" value=\"job_candidate\"';\n\t\t\t\t\t\t\t\t\t\t\t$jbbrd_register_form_content .= '/>' . __( 'Job candidate', 'jbbrd' ) . '\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table><!-- #jbbrd_frontend_table -->\n\t\t\t\t\t\t\t</div><!-- .jbbrd_frontend_table_div -->\n\t\t\t\t\t\t\t<div style=\"clear:both;\"></div>\n\t\t\t\t\t\t</div><!-- -->\n\t\t\t\t\t\t<div style=\"\">\n\t\t\t\t\t\t\t<p id=\"jbbrd_frontend_submit\" class=\"submit_div\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_frontend_registration_form\" value=\"submit\" />\n\t\t\t\t\t\t\t\t<input type=\"button\" onclick=\"clear_frontend_input()\" value=\"' . __( 'Clear', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"button-primary\" value=\"' . __( 'Register', 'jbbrd' ) . '\" />\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"jbbrd_registration_request\" value=\"1\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>';\n\t\t\t\t} else {\n\t\t\t\t\t/* Preparing user name and user email fields. */\n\t\t\t\t\t$user_name\t \t= isset( $_POST['jbbrd_user_login'] ) ? htmlspecialchars( stripslashes( trim( $_POST['jbbrd_user_login'] ) ) ) : \"\";\n\t\t\t\t\t$user_email \t= isset( $_POST['jbbrd_user_email'] ) ? trim( $_POST['jbbrd_user_email'] ) : \"\";\n\t\t\t\t\t$user_role\t \t= isset( $_POST['jbbrd_user_role'] ) ? htmlspecialchars( stripslashes( trim( $_POST['jbbrd_user_role'] ) ) ) : \"\";\n\n\t\t\t\t\t$user_name \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $user_name ) ) );\n\t\t\t\t\t$user_email\t \t= ( is_email( $user_email ) ) ? $user_email : \"\";\n\t\t\t\t\t$user_role \t\t= strip_tags( preg_replace( '/<[^>]*>/', '', preg_replace( '/<script.*<\\/[^>]*>/', '', $user_role ) ) );\n\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_name ) ? __( 'Wrong user name.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_email ) ? __( 'Wrong e-mail adress.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t$jbbrd_register_error .= ( '' == $user_role ) ? __( 'Role was not selected.', 'jbbrd' ) . '&nbsp;' : '';\n\t\t\t\t\t/* Set errors if conditions are wrong. */\n\t\t\t\t\tif ( ( ! $jbbrd_register_error ) || ( '' == $jbbrd_register_error ) ) {\n\t\t\t\t\t\tif ( ( FALSE == username_exists( $user_name ) ) && ( FALSE == email_exists( $user_email ) ) ) {\n\t\t\t\t\t\t\t$random_password = wp_generate_password( $length = 12, $include_standard_special_chars = FALSE );\n\t\t\t\t\t\t\t/* Registered user args. */\n\t\t\t\t\t\t\t$userdata = array(\n\t\t\t\t\t\t\t\t'user_login'\t=> $user_name,\n\t\t\t\t\t\t\t\t'user_email'\t=> $user_email,\n\t\t\t\t\t\t\t\t'user_pass'\t\t=> $random_password, // When creating an user, `user_pass` is expected.\n\t\t\t\t\t\t\t\t'role'\t\t\t=> $user_role,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$user_id = wp_insert_user( $userdata );\n\t\t\t\t\t\t\t/* Send mail notification. */\n\t\t\t\t\t\t\twp_new_user_notification( $user_id, $random_password );\n\t\t\t\t\t\t\t$jbbrd_register_form_content .= __( \"Thank you for registering. Please check your email for password.\", 'jbbrd' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$jbbrd_register_form_content .= __( 'User already exists.  Password inherited.', 'jbbrd' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$jbbrd_register_form_content .= $jbbrd_register_error . __( 'New user registration failed...', 'jbbrd' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( ! current_user_can( 'read_private_vacancies', get_current_user_id() ) ) {\n\t\t\t\t$jbbrd_register_form_content .= sprintf( __( 'Please %slogout%s and register/login as Employer or Job candidate for possibility to sort jobs and sending CV.', 'jbbrd' ), '<a href=\"' . wp_logout_url( get_permalink() ) . '\" title=\"' . __( 'Logout', 'jbbrd' ) . '\">', '</a>' );\n\t\t\t} else {\n\t\t\t\t$current_user = wp_get_current_user();\n\t\t\t\t$jbbrd_register_form_content .= sprintf( __( 'You are logged as %s.', 'jbbrd' ), '<strong>' . $current_user->user_login . '</strong>' );\n\t\t\t}\n\t\t}\n\treturn $jbbrd_register_form_content;\n\t}\n}\n\n/**\n * Replaces the excerpt \"more\" text by a link function.\n * @param $more string\n * @return string link to current vacancy post\n */\nif ( ! function_exists( 'jbbrd_excerpt_more_link' ) ) {\n\tfunction jbbrd_excerpt_more_link( $more ) {\n\t\tglobal $jbbrd_options;\n\t\t$jbbrd_exerpt_more = '...&nbsp;' . '<a style=\"\" href=\"';\n\t\tif ( isset(\t$jbbrd_options['jbbrd_shortcode_permalink'] ) ) {\n\t\t\t$jbbrd_exerpt_more .= $jbbrd_options['jbbrd_shortcode_permalink'];\n\t\t}\n\t\t$jbbrd_exerpt_more .= '&vacancy_id=' . get_the_ID() . '\">' . __( 'Read more...', 'jbbrd' ) . '</a>'; \n\t\treturn $jbbrd_exerpt_more;\n\t}\n}\n\n/**\n * Set pagination on vacancy page function.\n * @return string of pagination links\n */\nif ( ! function_exists( 'jbbrd_vacancy_page_pagination' ) ) {\n\tfunction jbbrd_vacancy_page_pagination() {\n\t\tglobal $wp_query;\n\t\t$max = $wp_query->max_num_pages;\n\t\tif ( ! $pagecurrent = get_query_var( 'paged' ) )\n\t\t\t$pagecurrent = 1;\n\t\t$pages_array = array(\n\t\t\t'base' \t\t=> str_replace( 999999, '%#%', get_pagenum_link( 999999 ) ),\n\t\t\t'total' \t=> $max,\n\t\t\t'current' \t=> $pagecurrent,\n\t\t\t/* How many pages before and after current page. */\n\t\t\t'mid_size' \t=> 2,\n\t\t\t/* How many pages at start and at the end. */\n\t\t\t'end_size' \t=> 0, \n\t\t\t'prev_text' => '&laquo;', \n\t\t\t'next_text' => '&raquo;',\n\t\t);\n\t\tif ( $max > 1 )\n\t\t\treturn '<div style=\"margin:20px 0 -20px 0;\" class=\"page-navigation\">' . paginate_links( $pages_array ) . '</div>';\n\t}\n}\n\n/**\n * Print alert to edit.php page when shortcode error\n * @return void\n */\nif ( ! function_exists( 'jbbrd_add_error_to_vacancy_CPT_edit' ) ) {\n\tfunction jbbrd_add_error_to_vacancy_CPT_edit() {\n\t\tglobal $pagenow, $jbbrd_options;\n\t\t$error = \"\";\n\t\t/* Find page with plugins shortcode. */\n\t\t$jbbrd_shortcode_permalink = jbbrd_find_shortcode_page();\n\t\tif ( ( 'edit.php' == $pagenow ) && ( isset( $_GET['post_type'] ) ) && ( 'vacancy' == $_GET['post_type'] ) ) {\n\t\t\tif ( '' == $jbbrd_shortcode_permalink ) {\n\t\t\t\t$error .= '<strong>' . __( 'WARNING:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Shortcode is not found.', 'jbbrd' ) . '&nbsp;<br />' . __( 'Please place shortcode', 'jbbrd' ) . '&nbsp;<strong>[jbbrd_vacancy]</strong>&nbsp;' . __( 'to page or post and press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button on', 'jbbrd' ) . '&nbsp;' . '<a href=\"admin.php?page=job-board.php' . '\">' . __( 'settings page.', 'jbbrd' ) . '</a><br />';\n\t\t\t} else {\n\t\t\t\tif ( ( ! isset( $jbbrd_options['jbbrd_shortcode_permalink'] ) ) || ( $jbbrd_options['jbbrd_shortcode_permalink'] != $jbbrd_shortcode_permalink ) ) {\n\t\t\t\t\t$error .= '<strong>' . __( 'WARNING:', 'jbbrd' ) . '</strong>&nbsp;' . __( 'Please press', 'jbbrd' ) . '&nbsp;&laquo;' . __( 'Save changes', 'jbbrd' ) . '&raquo;&nbsp;' . __( 'button on', 'jbbrd' ) . '&nbsp;' . '<a href=\"admin.php?page=job-board.php' . '\">' . __( 'settings page', 'jbbrd' ) . '</a>&nbsp;' . __( 'for shortcode new place settings.', 'jbbrd' ) . '<br />';\n\t\t\t\t}\n\t\t\t} ?>\n\t\t\t<div class=\"error\" <?php if ( \"\" == $error ) echo \"style=\\\"display:none\\\"\"; ?>><p><?php echo $error; ?></p></div>\n\t\t<?php }\n\t}\n}\n\n/**\n * Uninstall the Vacancy post type function.\n * @return void\n */\nif ( ! function_exists( 'jbbrd_plugin_uninstall' ) ) {\n\tfunction jbbrd_plugin_uninstall() {\n\t\tglobal $wpdb;\n\t\t$wpdb->delete( $wpdb->prefix . \"posts\", array( 'post_type' => 'vacancy' ) );\n\t\tdelete_option( 'jbbrd_options' );\n\t\tdelete_site_option( 'jbbrd_options' );\n\t\t/* Removing plugin roles. */\n\t\tremove_role( 'employer' );\n\t\tremove_role( 'job_candidate' );\n\t\t/* Remove Vacancy CPT admins capabilities. */\n\t\tjbbrd_remove_administrators_capabilities();\n\t}\n}\n\n/* Activate plugin. */\nregister_activation_hook( __FILE__, 'jbbrd_plugin_install' );\n/* Activate Job board settings page in admin menu. */\nadd_action( 'admin_menu', 'jbbrd_add_admin_menu' );\n/* Initiate the Vacancy post type. */\nadd_action( 'init', 'jbbrd_init' );\n/* Admin interface init. */\nadd_action( 'admin_init', 'jbbrd_admin_init' );\n/* Set admin error message on custom metafields error. */\nadd_action( 'admin_notices', 'jbbrd_metafields_error_admin_notice', 0 );\n/* Set JS scripts. */\nadd_action( 'admin_enqueue_scripts', 'jbbrd_load_scripts' );\nadd_action( 'wp_enqueue_scripts', 'jbbrd_load_scripts' );\n/* Update messages for vacancy CPT. */\nadd_filter( 'post_updated_messages', 'jbbrd_vacancy_updated_messages' );\n/* Set custom columns to \"vacancy\" custom post editor menu. */\nadd_action( 'manage_posts_custom_column', 'jbbrd_custom_columns' );\nadd_filter( 'manage_edit-vacancy_columns', 'jbbrd_edit_columns' );\n/* Making content columns. */\nadd_filter( 'manage_edit-vacancy_sortable_columns',  'jbbrd_sortable_columns' );\n/* Making content columns sortable. */\nadd_action( 'pre_get_posts', 'jbbrd_sortable_columns_orderby' );\n/* Add view action to title row on vacancy posts view. */\nadd_filter( 'post_row_actions', 'jbbrd_change_title_row_actions', 10, 1 );\n/* Add relative \"View\" node to admin menu. */\nadd_action( 'admin_bar_menu', 'jbbrd_add_relative_view', 999 );\n/* Remove standart \"View\" node from admin menu. */\nadd_action( 'admin_bar_menu', 'jbbrd_remove_view', 999 );\n/* Add filter for vacancy categories. */\nadd_action( 'restrict_manage_posts', 'jbbrd_restrict_manage_posts' );\n/* Add filter to enable job_candidate vacancy list in profile screen option */\nadd_filter( 'set-screen-option', 'jbbrd_candidate_table_set_option', 10, 3 );\n/* Add custom upload CV field to job_candidate profile page. */\nadd_action( 'show_user_profile', 'jbbrd_add_cv_load_field' );\nadd_action( 'edit_user_profile', 'jbbrd_add_cv_load_field' );\n/* Saving custom upload CV field to job_candidate profile page. */\nadd_action( 'personal_options_update', 'jbbrd_save_cv_load_field' );\nadd_action( 'edit_user_profile_update', 'jbbrd_save_cv_load_field' );\n/* Saving custom upload CV field to job_candidate profile page. */\nadd_action( 'user_edit_form_tag', 'jbbrd_form_accept_uploads' );\n/* Add shortcode for print vacancy posts. */\nadd_shortcode( 'jbbrd_vacancy', 'jbbrd_vacancy_shortcode' );\n/* Add shortcode for registration form. */\nadd_shortcode( 'jbbrd_registration', 'jbbrd_registration_shortcode' );\n/* Add filter for shortcode in text widget. */\nadd_filter( 'widget_text', 'do_shortcode' );\n/* Insert post hook. */\nadd_action( 'save_post', 'jbbrd_save_post', 10, 2);\n/* Set schedule hook for move to archieve function */\nadd_action( 'jbbrd_move_vacancies_to_archive_dayly_function', 'jbbrd_set_archive_status_function' );\n/* Add filter to vacancy CPT links. */\nadd_filter( 'post_type_link', 'jbbrd_append_vacancy_permalink', 10, 2 );\n/* Additional links on the plugin page. */\nadd_filter( 'plugin_action_links', 'jbbrd_plugin_action_links', 10, 2 );\nadd_filter( 'plugin_row_meta', 'jbbrd_register_plugin_links', 10, 2 );\n/* Uninstall plugin. Drop tables, delete options. */\nregister_uninstall_hook( __FILE__, 'jbbrd_plugin_uninstall' ); \n", "=== Job board ===\nContributors: bestwebsoft\nDonate link: https://www.2checkout.com/checkout/purchase?sid=1430388&quantity=1&product_id=94\nTags: plugin, wordpress, jobs, vacancy, job-manager, job-board, job, job offer, job bord, djob board, dgob bord, CV, upload CV, add job offer, apply for a job, vacancy application, job candidate role, manage vacancies, job offer list, save search conditions, job offer categories, search by job category, search by salary, search by organization, post job offer, vacancy archive.  \nRequires at least: 3.5\nTested up to: 3.9.2\nStable tag: 1.0.1\nLicense: GPLv3 or later\nLicense URI: http://www.gnu.org/licenses/gpl-3.0.html\n\nThe plugin allows to create a job-board page on your site.\n\n== Description ==\n\nThe plugin allows to create and post job-board posts as well as to change, sort and archive them. After inserting the short-code into the page, you will see all vacancies from a search form by categories, organizations, salary etc. The search form is available only after the user has been authorized as a candidate. The candidate is allowed to upload and submit a CV, select a category by which the list of vacant positions is formed for the last 24 hours and save the current search conditions to be used as a search template in future.\n\n<a href=\"http://wordpress.org/plugins/job-board/faq/\" target=\"_blank\">FAQ</a>\n<a href=\"http://support.bestwebsoft.com\" target=\"_blank\">Support</a>\n\n= Features =\n\n* Actions: Allows to add, edit, delete and categorize the vacancies.\n* Actions: Sorts and filters vacant positions - both in the admin panel and in the front-end.\n* Actions: Allows to apply for the vacancy (after registration).\n* Actions: Allows to save the search as a template for future use.\n* Actions: Allow the applicant to select a category and browse the vacancies in this category using in the admin panel.\n* Actions: Sends letters when you get an application for the vacancy.\n* Actions: Automatically places the vacancy to the archive after the expiration of the period which was set either by the administrator or by the author.\n* Actions: Allows the administrator to manage of how the vacancies page as well as vacancies in the front-end are displayed. \n* Actions: Allows to place the login/registration form to add users with Employer and Job candidate roles. \n\n= Translation =\n\n* Russian (ru_RU)\n* Ukrainian (uk)\n\nIf you would like to create your own language pack or update the existing one, you can send <a href=\"http://codex.wordpress.org/Translating_WordPress\" target=\"_blank\">the text of PO and MO files</a> for <a href=\"http://support.bestwebsoft.com\" target=\"_blank\">BestWebSoft</a> and we'll add it to the plugin. You can download the latest version of the program for work with PO and MO files <a href=\"http://www.poedit.net/download.php\" target=\"_blank\">Poedit</a>.\n\n= Technical support =\nDear users, our plugins are available for free download. If you have any questions or recommendations regarding the functionality of our plugins (existing options, new options, current issues), please feel free to contact us. Please note that we accept requests in English only. All messages in another languages won't be accepted.\nIf you notice any bugs in the plugin's work, you can notify us about it and we'll investigate and fix the issue then. Your request should contain URL of the website, issues description and WordPress admin panel credentials.\nMoreover we can customize the plugin according to your requirements. It's a paid service (as a rule it costs $40, but the price can vary depending on the amount of the necessary changes and their complexity). Please note that we could also include this or that feature (developed for you) in the next release and share with the other users then.\nWe can fix some things for free for the users who provide translation of our plugin into their native language (this should be a new translation of a certain plugin, you can check available translations on the official plugin page).\n\n== Installation == \n\n1. Upload the `job-board` folder to the `/wp-content/plugins/` directory.\n2. Activate the plugin using the 'Plugins' menu in your WordPress admin panel.\n3. You can adjust the necessary settings using your WordPress admin panel in \"BWS Plugins\" > \"Job board\".\n4. Create a page or a post and insert the short-code [jbbrd_vacancy] into the text.\n\n== Frequently Asked Questions ==\n\n= How can I create a vacancies page on my site? =\n\nJust insert the short-code [jbbrd_vacancy] into your page or post and save the settings on the settings page of the plugin.\nAttention: In order to avoid incorrect formatting of the text, the short-code should be placed in text mode.\n\n= How can I place the login / registration form to add users with Employer and Job candidate roles =\n\nInsert the short-code [jbbrd_registration] into your page or post.\nYou can also add the login / registration form into widget. To do it, just create a text widget and put the short-code into the widget field.\nTo prevent the login / registration errors, do not place more than one registration form short-code on your website.\n\n= How can I add a category of vacancies? =\n\nTo create or edit an existing category of vacancies, click on \"Vacancies\" on the admin panel, then click on the \"Vacancy categories\". Fill in the fields \"Name\", \"Slug\", \"Description\". Then add a new category by clicking on the \"Add new vacancy category\".\n\n= How can I add a job offer on the vacancy page? =\n\nOnly administrator and the users with the role \"employer\" can manage job offers. Users with the role \"employer\" can view and sort all vacancies, as well as to create and edit their own. Roles are assigned by the administrator. The administrator can create, browse, sort, edit and delete any vacancies, CV, saved searches and search categories.\nLog in to your profile. Click \"Vacancies\" on the Panel, then click \"Add vacancies\". Fill in the fields, select the job category if it already exists, or create a new one. Fields marked with \"*\" are mandatory. Publish this vacancy by clicking on \"Publish\".\n\n= How can I add my company`s logo to a job offer? =\n\nCreate a new vacancy, or press the \"Edit\" in existing one. Select \"Featured Image / Set featured image\". Upload an image and save the post. Recommended logo images for download are 150px by 100px. \n\n= Why I cannot see the CV sort and send form? =\n\nMake sure that you have Sender plugin installed and activated.\nRegister as a Job candidate to get the possibility to use a filter of vacancies and send CV.\n\n= How can I send CV? =\n\nLog in to your profile. In the user profile file, add CV (Doc, Docx, Pdf, Txt only).  Click \"Send CV\" under the vacancy. The employer will receive an email with your details and a link to your CV attached file.\n\n= Why I cannot find a vacancy using a standard search form? =\n\nUnlike standard posts, vacancies are custom post type and they are not included in the standard search form. To add a vacancy custom post type into your search, please install the plugin <a href=\"/wp-admin/plugin-install.php?tab=search&type=term&s=Custom+Search+plugin+bestwebsoft&plugin-search-input=Search+Plugins\">\"Custom search\"</a>\n\n= What is the \"archive of vacancies\"? How to extract a vacancy from the archive of vacancies?? =\n\nVacancies` validity is specified when entering a date in the \"Expiry date\" field. After reaching the specified date, vacancies are been automatically placed in the archive. Archive vacancies are not displayed in the front-end of the vacancies page, but they are preserved and always available for editing. You can remove the job from the archive. To do this, enter a new date in the \"Expiry date\" and click \"Restore from archive\". If you specify wrong (already past) date in the \"Expiry date\", the vacancy will be available till the next archivation. You can set the time of daily archivation using the settings page of the plugin. If the field \"Expiry date\" is empty, the vacancy is considered to be constant.\n\n= I have some problems with the plugin's work. What Information should I provide to receive proper support? =\n\nPlease make sure that the problem hasn't been discussed yet on our forum (<a href=\"http://support.bestwebsoft.com\" target=\"_blank\">http://support.bestwebsoft.com</a>). If no, please provide the following data along with your problem's description:\n1. the link to the page where the problem occurs\n2. the name of the plugin and its version. If you are using a pro version - your order number.\n3. the version of your WordPress installation\n4. copy and paste into the message your system status report. Please read more here: <a href=\"https://docs.google.com/document//1Wi2X8RdRGXk9kMszQy1xItJrpN0ncXgioH935MaBKtc/edit\" target=\"_blank\">Instruction on System Status</a>\n\n== Screenshots ==\n\n1. Job board display.\n2. Adding new vacancy display with additional fields.\n3. Adding new vacancies category display with additional fields.\n4. Adding new employment type display.\n5. Plugin settings in WordPress admin panel with additional fields.\n6. Vacancies page in front-end display with sorting form fields.\n7. Single job offer page view.\n8. Job candidate settings on profile page.\n9. Job candidate chosen category offers by last day on profile page screen.\n10. Registration form in widget area.\n\n== Changelog ==\n\n= V1.0.1 - 08.08.2014 =\n* Bugfix : Security Exploit was fixed.\n\n= V1.0.0 - 18.07.2014 = \n* Bugfix : Login/registration form bugs were fixed.\n* Bugfix : Session bugs were fixed.\n\n== Upgrade Notice ==\n\n= V1.0.1 =\nSecurity Exploit was fixed.\n\n= V1.0.0 =\nLogin/registration form bugs were fixed. Session bugs were fixed.\n"], "filenames": ["bws_menu/bws_menu.php", "job-board.php", "readme.txt"], "buggy_code_start_loc": [4, 7, 6], "buggy_code_end_loc": [907, 1595, 126], "fixing_code_start_loc": [4, 7, 6], "fixing_code_end_loc": [914, 1595, 132], "type": "CWE-79", "message": "A vulnerability classified as problematic was found in BestWebSoft Job Board Plugin 1.0.0 on WordPress. This vulnerability affects unknown code. The manipulation leads to cross site scripting. The attack can be initiated remotely. Upgrading to version 1.0.1 is able to address this issue. The name of the patch is dbb71deee071422ce3e663fbcdce3ad24886f940. It is recommended to upgrade the affected component. The identifier of this vulnerability is VDB-227764.", "other": {"cve": {"id": "CVE-2014-125100", "sourceIdentifier": "cna@vuldb.com", "published": "2023-05-02T02:15:27.423", "lastModified": "2023-05-08T17:18:52.400", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability classified as problematic was found in BestWebSoft Job Board Plugin 1.0.0 on WordPress. This vulnerability affects unknown code. The manipulation leads to cross site scripting. The attack can be initiated remotely. Upgrading to version 1.0.1 is able to address this issue. The name of the patch is dbb71deee071422ce3e663fbcdce3ad24886f940. It is recommended to upgrade the affected component. The identifier of this vulnerability is VDB-227764."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 3.5, "baseSeverity": "LOW"}, "exploitabilityScore": 2.1, "impactScore": 1.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:bestwebsoft:job_board:1.0.0:*:*:*:*:wordpress:*:*", "matchCriteriaId": "F0D65044-F8BB-4D31-9938-C5C5BA97CAFE"}]}]}], "references": [{"url": "https://github.com/wp-plugins/job-board/commit/dbb71deee071422ce3e663fbcdce3ad24886f940", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://vuldb.com/?ctiid.227764", "source": "cna@vuldb.com", "tags": ["Permissions Required"]}, {"url": "https://vuldb.com/?id.227764", "source": "cna@vuldb.com", "tags": ["Permissions Required"]}]}, "github_commit_url": "https://github.com/wp-plugins/job-board/commit/dbb71deee071422ce3e663fbcdce3ad24886f940"}}