{"buggy_code": ["<?php\n/**\n * @property \\modelBackendWidgets $model_backend_widgets\n */\nclass actionAdminWidgets extends cmsAction {\n\n    private $is_dynamic_scheme = false;\n    private $rows_titles_pos   = 'left';\n\n    public function run($do = false) {\n\n        // \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e, \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u044d\u043a\u0448\u0435\u043d\u0443\n        if ($do) {\n            $this->runExternalAction('widgets_' . $do, array_slice($this->params, 1));\n            return;\n        }\n\n        cmsCore::loadAllControllersLanguages();\n\n        $controllers = $this->model_backend_widgets->getPagesControllers();\n\n        $widgets_list = $this->model_backend_widgets->getAvailableWidgets();\n\n        $tpls = cmsCore::getTemplates();\n\n        $scroll_to     = strip_tags($this->request->get('scroll_to', ''));\n        $template_name = $this->request->get('template_name', '');\n\n        if (!$template_name || !in_array($template_name, $tpls)) {\n            $template_name = cmsConfig::get('template');\n        }\n\n        cmsCore::loadTemplateLanguage($template_name);\n\n        // \u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432\n        $templates = [];\n        // \u0428\u0430\u0431\u043b\u043e\u043d\u044b, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0445\u0435\u043c\u0430\n        $templates_dynamic_scheme = [];\n\n        foreach ($tpls as $tpl) {\n            $template_path = $this->cms_config->root_path . cmsTemplate::TEMPLATE_BASE_PATH . $tpl;\n            $manifest      = cmsTemplate::getTemplateManifest($template_path);\n            if ($manifest !== null) {\n                if (!empty($manifest['properties']['is_frontend'])) {\n                    $templates[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n                if (!empty($manifest['properties']['is_dynamic_layout'])) {\n                    $templates_dynamic_scheme[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n                continue;\n            }\n            if (file_exists($template_path . '/main.tpl.php')) {\n                $templates[$tpl] = $tpl;\n            }\n        }\n\n        $this->rows_titles_pos = cmsUser::getCookie('rows_titles_pos');\n        if (!$this->rows_titles_pos) {\n            $this->rows_titles_pos = 'left';\n        }\n\n        $scheme_html = $this->getSchemeHTML($template_name);\n\n        // \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c\n        $intro_lang = cmsCore::loadLanguage('templates/' . $this->cms_template->name . '/admin/intro/widgets/widgets');\n\n        return $this->cms_template->render('widgets', [\n            'is_dynamic_scheme'        => $this->is_dynamic_scheme,\n            'rows_titles_pos'          => $this->rows_titles_pos,\n            'intro_lang'               => $intro_lang,\n            'controllers'              => $controllers,\n            'template_name'            => $template_name,\n            'templates'                => $templates,\n            'templates_dynamic_scheme' => $templates_dynamic_scheme,\n            'widgets_list'             => $widgets_list,\n            'scroll_to'                => $scroll_to,\n            'scheme_html'              => $scheme_html\n        ]);\n    }\n\n    public function getSchemeHTML($name = '') {\n\n        $template = new cmsTemplate($name);\n\n        $template->setContext($this);\n\n        $scheme_html = $template->getSchemeHTML();\n        if (!$scheme_html) {\n            $scheme_html = $this->getDynamicSchemeHTML($template);\n            if (!$scheme_html) {\n                return false;\n            }\n\n            $this->is_dynamic_scheme = true;\n        }\n\n        preg_match_all('/{(.+)}/ui', $scheme_html, $matches);\n\n        if (!empty($matches[1])) {\n            foreach ($matches[1] as $block) {\n\n                list($type, $value) = explode(':', $block);\n\n                if ($type == 'position') {\n                    $replace_html = '<ul class=\"position\" rel=\"' . $value . '\" id=\"pos-' . $value . '\"></ul>';\n                }\n\n                if ($type == 'block') {\n                    if (mb_strpos($value, 'LANG_') === 0) {\n                        $value = constant($value);\n                    }\n                    $replace_html = '<div class=\"block\"><span>' . $value . '</span></div>';\n                }\n\n                if ($type == 'cell') {\n                    if (mb_strpos($value, 'LANG_') === 0) {\n                        $value = constant($value);\n                    }\n                    $replace_html = '<div class=\"cell\"><span>' . $value . '</span></div>';\n                }\n\n                $scheme_html = str_replace(\"{{$block}}\", $replace_html, $scheme_html);\n            }\n        }\n\n        return $scheme_html;\n    }\n\n    private function getDynamicSchemeHTML($template) {\n\n        $this->cms_template->addTplJSName('admin-scheme');\n\n        $rows = $this->model_backend_widgets->getLayoutRows($template->getName());\n\n        return $template->getRenderedChild('widgets_scheme', [\n            'rows_titles_pos' => $this->rows_titles_pos,\n            'rows'            => $rows\n        ]);\n    }\n\n}\n", "<?php\nclass formAdminCtypesBasic extends cmsForm {\n\n    public function init($do, $ctype) {\n\n        $template = new cmsTemplate(cmsConfig::get('template'));\n\n        $meta_ctype_fields = [\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $meta_item_fields = [\n            'title'             => LANG_TITLE,\n            'description'       => LANG_DESCRIPTION,\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $item_fields = [\n            'category'   => LANG_CATEGORY,\n            'hits_count' => LANG_HITS,\n            'comments'   => LANG_COMMENTS,\n            'rating'     => LANG_RATING,\n            'tags'       => LANG_TAGS\n        ];\n\n        if (!empty($ctype['name'])) {\n\n            $_item_fields = cmsCore::getModel('content')->orderBy('ordering')->getContentFields($ctype['name']);\n\n            foreach ($_item_fields as $field) {\n                $item_fields[$field['name']] = $field['title'];\n            }\n        }\n\n        $this->setData('meta_item_fields', $meta_item_fields);\n        $this->setData('meta_ctype_fields', $meta_ctype_fields);\n        $this->setData('item_fields', $item_fields);\n\n        return [\n            'titles' => [\n                'title' => LANG_BASIC_OPTIONS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('name', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'hint' => LANG_CP_SYSTEM_NAME_HINT,\n                        'options' => [\n                            'max_length' => 32,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required'],\n                            ['sysname'],\n                            $do == 'add' ? ['unique', 'content_types', 'name'] : false\n                        ]\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ]\n                    ]),\n                ]\n            ],\n            'pub' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_PUBLICATION,\n                'childs' => [\n                    new fieldCheckbox('is_date_range', [\n                        'title' => LANG_CP_IS_PUB_CONTROL,\n                        'hint' => LANG_CP_IS_PUB_CONTROL_HINT\n                    ]),\n                    new fieldList('options:is_date_range_process', [\n                        'title' => LANG_CP_IS_PUB_CONTROL_PROCESS,\n                        'default' => 'hide',\n                        'items' => [\n                            'hide'      => LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE,\n                            'delete'    => LANG_CP_IS_PUB_CONTROL_PROCESS_DEL,\n                            'in_basket' => LANG_BASKET_DELETE\n                        ],\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldNumber('options:notify_end_date_days', [\n                        'title' => LANG_CP_NOTIFY_END_DATE_DAYS,\n                        'units' => LANG_DAYS,\n                        'default' => 1,\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldString('options:notify_end_date_notice', [\n                        'title' => LANG_MESSAGE,\n                        'multilanguage' => true,\n                        'is_clean_disable' => true,\n                        'default' => '\u0427\u0435\u0440\u0435\u0437 %s \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 <a href=\"%s\">%s</a> \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0449\u0435\u043d\u0430.',\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:disable_drafts', [\n                        'title' => LANG_CP_DISABLE_DRAFTS\n                    ])\n                ]\n            ],\n            'categories' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CATEGORIES,\n                'childs' => [\n                    new fieldCheckbox('is_cats', [\n                        'title' => LANG_CP_CATEGORIES_ON\n                    ]),\n                    new fieldCheckbox('is_cats_recursive', [\n                        'title' => LANG_CP_CATEGORIES_RECURSIVE,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_empty_root', [\n                        'title' => LANG_CP_CATEGORIES_EMPTY_ROOT,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_multi', [\n                        'title' => LANG_CP_CATEGORIES_MULTI,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_change', [\n                        'title' => LANG_CP_CATEGORIES_CHANGE,\n                        'default' => true,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_open_root', [\n                        'title' => LANG_CP_CATEGORIES_OPEN_ROOT,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_only_last', [\n                        'title' => LANG_CP_CATEGORIES_ONLY_LAST,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_show_cats', [\n                        'title' => LANG_CP_CATEGORIES_SHOW,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldListMultiple('options:cover_sizes', [\n                        'title' => LANG_CP_CAT_COVER_SIZES,\n                        'default' => [],\n                        'generator' => function () {\n                            $presets = cmsCore::getModel('images')->getPresetsList();\n                            $presets['original'] = LANG_PARSER_IMAGE_SIZE_ORIGINAL;\n                            return $presets;\n                        },\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldList('options:context_list_cover_sizes', [\n                        'title'        => LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        },\n                        'values_generator' => function () {\n                            $presets = cmsCore::getModel('images')->getPresetsList();\n                            $presets['original'] = LANG_PARSER_IMAGE_SIZE_ORIGINAL;\n                            return $presets;\n                        },\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ])\n                ]\n            ],\n            'folders' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_FOLDERS,\n                'childs' => [\n                    new fieldCheckbox('is_folders', [\n                        'title' => LANG_CP_FOLDERS_ON,\n                        'hint' => LANG_CP_FOLDERS_HINT\n                    ])\n                ]\n            ],\n            'listview' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_LISTVIEW_OPTIONS,\n                'childs' => [\n                    new fieldCheckbox('options:list_off_breadcrumb', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB\n                    ]),\n                    new fieldCheckbox('options:list_off_breadcrumb_ctype', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB_CTYPE,\n                        'visible_depend' => ['options:list_off_breadcrumb' => ['show' => ['0']]]\n                    ]),\n                    new fieldCheckbox('options:list_on', [\n                        'title' => LANG_CP_LISTVIEW_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:list_off_index', [\n                        'title' => LANG_CP_LISTVIEW_OFF_INDEX,\n                        'hint'  => LANG_CP_LISTVIEW_OFF_INDEX_HINT,\n                        'default' => false,\n                        'visible_depend' => ['options:list_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:profile_on', [\n                        'title' => LANG_CP_PROFILELIST_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:list_show_filter', [\n                        'title' => LANG_CP_LISTVIEW_FILTER\n                    ]),\n                    new fieldCheckbox('options:list_expand_filter', [\n                        'title' => LANG_CP_LISTVIEW_FILTER_EXPAND,\n                        'visible_depend' => ['options:list_show_filter' => ['show' => ['1']]]\n                    ]),\n                    new fieldList('options:privacy_type', [\n                        'title'   => LANG_CP_PRIVACY_TYPE,\n                        'default' => 'hide',\n                        'items'   => [\n                            'hide'       => LANG_CP_PRIVACY_TYPE_HIDE,\n                            'show_title' => LANG_CP_PRIVACY_TYPE_SHOW_TITLE,\n                            'show_all'   => LANG_CP_PRIVACY_TYPE_SHOW_ALL\n                        ]\n                    ]),\n                    new fieldNumber('options:limit', [\n                        'title' => LANG_LIST_LIMIT,\n                        'default' => 15,\n                        'rules' => [\n                            ['required'],\n                            ['min', 1]\n                        ]\n                    ]),\n                    new fieldList('options:list_style', [\n                        'title' => LANG_CP_LISTVIEW_STYLE,\n                        'is_chosen_multiple' => true,\n                        'hint' => sprintf(LANG_CP_LISTVIEW_STYLE_HINT, $template->getName()),\n                        'generator' => function () use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:list_style_options', [\n                        'title'        => LANG_CP_LIST_STYLE_OPTIONS,\n                        'hint'         => LANG_CP_LIST_STYLE_OPTIONS_HINT,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'multiple_keys' => [\n                            'name' => 'field', 'value' => 'field_value'\n                        ],\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:list_style_names', [\n                        'title'        => LANG_CP_LIST_STYLE_NAMES,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'multiple_keys' => [\n                            'name' => 'field', 'value' => 'field_value'\n                        ],\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:context_list_style', [\n                        'title'        => LANG_CP_CONTEXT_LIST_STYLE,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'generator' => function ($item) use ($do, $ctype) {\n\n                            $lists = cmsEventsManager::hookAll('ctype_lists_context', 'template' . ($do != 'add' ? ':' . $ctype['name'] : ''));\n\n                            $items = [];\n\n                            if ($lists) {\n                                foreach ($lists as $list) {\n                                    $items = array_merge($items, $list);\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'values_generator' => function () use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ])\n                ]\n            ],\n            'itemview' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_ITEMVIEW_OPTIONS,\n                'childs' => [\n                    new fieldCheckbox('options:item_off_breadcrumb', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB\n                    ]),\n                    new fieldCheckbox('options:item_on', [\n                        'title' => LANG_CP_ITEMVIEW_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:is_show_fields_group', [\n                        'title' => LANG_CP_ITEMVIEW_FIELDS_GROUP,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:hits_on', [\n                        'title' => LANG_CP_ITEMVIEW_HITS_ON,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldListGroups('options:hits_groups_view', [\n                        'title' => LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW,\n                        'show_all' => true,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:disable_info_block', [\n                        'title' => LANG_CP_ITEMVIEW_OFF_INFO_BLOCK,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldText('options:share_code', [\n                        'title' => LANG_CP_ITEMVIEW_SHARE_CODE,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldText('item_append_html', [\n                        'title' => LANG_CP_ITEMVIEW_APPEND_HTML,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'hint' => LANG_CP_ITEMVIEW_APPEND_HTML_HINT,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                ]\n            ],\n            'seo-items' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA,\n                'childs' => [\n                    new fieldCheckbox('options:is_manual_title', [\n                        'title' => LANG_CP_SEOMETA_MANUAL_TITLE,\n                    ]),\n                    new fieldCheckbox('is_auto_keys', [\n                        'title' => LANG_CP_SEOMETA_AUTO_KEYS,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_auto_desc', [\n                        'title' => LANG_CP_SEOMETA_AUTO_DESC,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_auto_url', [\n                        'title' => LANG_CP_AUTO_URL,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_fixed_url', [\n                        'title' => LANG_CP_FIXED_URL\n                    ]),\n                    new fieldString('url_pattern', [\n                        'title' => LANG_CP_URL_PATTERN,\n                        'prefix' => '/' . (!empty($ctype['name']) ? $ctype['name'] : '') . '/',\n                        'suffix' => '.html',\n                        'default' => '{id}-{title}',\n                        'options' => [\n                            'max_length' => 255,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldString('options:seo_title_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_keys_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'default' => '{content|string_get_meta_keywords}',\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_desc_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'default' => '{content|string_get_meta_description}',\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ])\n                ]\n            ],\n            'seo-cats' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA_CATS,\n                'childs' => [\n                    new fieldCheckbox('options:is_cats_title', [\n                        'title' => LANG_CP_SEOMETA_CATS_TITLE\n                    ]),\n                    new fieldCheckbox('options:is_cats_h1', [\n                        'title' => LANG_CP_SEOMETA_CATS_H1\n                    ]),\n                    new fieldCheckbox('options:is_cats_keys', [\n                        'title' => LANG_CP_SEOMETA_CATS_KEYS\n                    ]),\n                    new fieldCheckbox('options:is_cats_desc', [\n                        'title' => LANG_CP_SEOMETA_CATS_DESC\n                    ]),\n                    new fieldCheckbox('options:is_cats_auto_url', [\n                        'title' => LANG_CP_CATS_AUTO_URL,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:is_cats_first_level_slug', [\n                        'title' => LANG_CP_CATS_FIRST_LEVEL_SLUG,\n                        'default' => false\n                    ]),\n                    new fieldString('options:seo_cat_h1_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_title_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_keys_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_desc_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ])\n                ]\n            ],\n            'seo' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA_DEFAULT,\n                'childs' => [\n                    new fieldString('options:seo_ctype_h1_pattern', [\n                        'can_multilanguage' => true,\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'is_strip_tags' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ],\n            'collapsed' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_IS_COLLAPSED,\n                'childs' => [\n                    new fieldListMultiple('options:is_collapsed', [\n                        'generator' => function ($item) use ($do, $ctype) {\n\n                            $items = [\n                                'folder' => LANG_CP_FOLDERS,\n                                'group_wrap' => LANG_CP_CT_GROUPS\n                            ];\n\n                            if ($do !== 'add') {\n\n                                $model = cmsCore::getModel('content');\n\n                                $fieldset_titles = $model->orderBy('ordering')->getContentFieldsets($ctype['id']);\n\n                                if ($fieldset_titles) {\n                                    foreach ($fieldset_titles as $fieldset) {\n                                        $items[md5($fieldset)] = $fieldset;\n                                    }\n                                }\n                            }\n\n                            return $items + [\n                                'tags_wrap'    => LANG_TAGS,\n                                'privacy_wrap' => LANG_CP_FIELD_PRIVACY,\n                                'is_comment'   => LANG_CP_COMMENTS,\n                                'seo_wrap'     => LANG_SEO,\n                                'pub_wrap'     => LANG_CP_PUBLICATION,\n                            ];\n                        }\n                    ])\n                ]\n            ]\n        ];\n    }\n}\n", "<?php\n\nclass formAdminCtypesDataset extends cmsForm {\n\n    public function init($do, $ctype, $cats_list, $fields_list, $dataset = []) {\n\n        $ctype_id = (!empty($ctype['id']) ? $ctype['id'] : $ctype['name']);\n\n        $lists = cmsEventsManager::hookAll('ctype_lists_context', 'dataset:' . $ctype['name']);\n\n        $ds_lists = [];\n\n        if ($lists) {\n            foreach ($lists as $list) {\n                $ds_lists = array_merge($ds_lists, $list);\n            }\n        }\n\n        $name_rules = [['required'], ['sysname']];\n        if ($do == 'add') {\n            $name_rules[] = ['unique_ctype_dataset', $ctype_id, false];\n        } else {\n            $name_rules[] = ['unique_ctype_dataset', $ctype_id, $dataset['id']];\n        }\n\n        // \u0417\u043d\u0430\u0447\u0438\u0442 \u043d\u0435 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430\n        if (!is_numeric($ctype_id)) {\n\n            $name_rules[] = ['unique', $ctype_id, 'slug'];\n\n            $meta_item_fields = [];\n        } else {\n\n            $meta_item_fields = [\n                'title'             => LANG_TITLE,\n                'description'       => LANG_DESCRIPTION,\n                'ds_title'          => LANG_CP_DATASET . ': ' . LANG_TITLE,\n                'ds_description'    => LANG_CP_DATASET . ': ' . LANG_DESCRIPTION,\n                'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n                'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n                'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n                'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n                'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n                'filter_string'     => LANG_FILTERS\n            ];\n        }\n\n        $form = [\n            'basic' => [\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('name', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'rules' => $name_rules\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_CP_DATASET_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'rules' => [\n                            ['required'],\n                            ['max_length', 100]\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ]\n                    ]),\n                    new fieldNumber('max_count', [\n                        'title' => LANG_LIST_LIMIT,\n                        'default' => 0,\n                        'rules' => [\n                            ['max', 65535]\n                        ]\n                    ]),\n                    new fieldCheckbox('is_visible', [\n                        'title' => LANG_CP_DATASET_IS_VISIBLE,\n                        'default' => true\n                    ])\n                ]\n            ],\n            'sorting' => [\n                'title'  => LANG_SORTING,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('sorting', [\n                        'add_title'    => LANG_SORTING_ADD,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_SORTING_FIELD,\n                        'multiple_keys' => [\n                            'by' => 'field', 'to' => 'field_select'\n                        ],\n                        'generator' => function () use ($fields_list) {\n\n                            $items = [];\n\n                            if ($fields_list) {\n                                foreach ($fields_list as $field) {\n                                    $items[$field['value']] = $field['title'];\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'value_items' => [\n                            'asc'  => LANG_SORTING_ASC,\n                            'desc' => LANG_SORTING_DESC\n                        ]\n                    ])\n                ]\n            ],\n            'filter' => [\n                'title'  => LANG_FILTERS,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('filters', [\n                        'add_title'    => LANG_FILTER_ADD,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'single_select' => 0,\n                        'select_title' => LANG_FILTER_FIELD,\n                        'multiple_keys' => [\n                            'field' => 'field', 'condition' => 'field_select', 'value' => 'field_value'\n                        ],\n                        'generator' => function () use ($fields_list) {\n\n                            $items = [];\n\n                            if ($fields_list) {\n                                foreach ($fields_list as $field) {\n                                    $items[$field['value']] = [\n                                        'title' => $field['title'],\n                                        'data'  => [\n                                            'ns' => $field['type']\n                                        ]\n                                    ];\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'value_items' => [\n                            'int'  => [\n                                'eq' => '=',\n                                'gt' => '&gt;',\n                                'lt' => '&lt;',\n                                'ge' => '&ge;',\n                                'le' => '&le;',\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ],\n                            'str'  => [\n                                'eq' => '=',\n                                'lk' => LANG_FILTER_LIKE,\n                                'ln' => LANG_FILTER_NOT_LIKE,\n                                'lb' => LANG_FILTER_LIKE_BEGIN,\n                                'lf' => LANG_FILTER_LIKE_END,\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ],\n                            'date'  => [\n                                'eq' => '=',\n                                'gt' => '&gt;',\n                                'lt' => '&lt;',\n                                'ge' => '&ge;',\n                                'le' => '&le;',\n                                'dy' => LANG_FILTER_DATE_YOUNGER,\n                                'do' => LANG_FILTER_DATE_OLDER,\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ]\n                        ]\n                    ])\n                ]\n            ],\n            'seo' => [\n                'title' => LANG_SEO,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('seo_h1', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_h1_pattern']) ? $ctype['options']['seo_cat_h1_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_title_pattern']) ? $ctype['options']['seo_cat_title_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_keys_pattern']) ? $ctype['options']['seo_cat_keys_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_desc_pattern']) ? $ctype['options']['seo_cat_desc_pattern'] : null),\n                        'is_strip_tags' => true,\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ],\n            'gv' => [\n                'title' => LANG_SHOW_TO_GROUPS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldListGroups('groups_view', [\n                        'show_all' => true,\n                        'show_guests' => true\n                    ])\n                ]\n            ],\n            'gh' => [\n                'title' => LANG_HIDE_FOR_GROUPS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldListGroups('groups_hide', [\n                        'show_all' => false,\n                        'show_guests' => true\n                    ])\n                ]\n            ],\n            'list_show' => [\n                'title' => LANG_CP_FIELD_IN_LIST_CONTEXT,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('list:show', [\n                        'is_chosen_multiple' => true,\n                        'items' => $ds_lists\n                    ]),\n                ]\n            ],\n            'list_hide' => [\n                'title' => LANG_CP_FIELD_NOT_IN_LIST_CONTEXT,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('list:hide', [\n                        'is_chosen_multiple' => true,\n                        'items' => $ds_lists\n                    ]),\n                ]\n            ]\n        ];\n\n        if (!empty($ctype['is_cats']) && $cats_list) {\n            $form['cv'] = [\n                'title' => LANG_CP_CATS_VIEW,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('cats_view', [\n                        'is_chosen_multiple' => true,\n                        'items' => $cats_list\n                    ]),\n                ]\n            ];\n            $form['ch'] = [\n                'title' => LANG_CP_CATS_HIDE,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('cats_hide', [\n                        'is_chosen_multiple' => true,\n                        'items' => $cats_list\n                    ])\n                ]\n            ];\n        }\n\n        return $form;\n    }\n}\n", "<?php\n\nclass formAdminCtypesFilter extends cmsForm {\n\n    public function init($do, $ctype, $fields, $props_fields, $table_name, $filter) {\n\n        $meta_item_fields = [\n            'title'             => LANG_TITLE,\n            'description'       => LANG_DESCRIPTION,\n            'f_title'           => LANG_FILTER . ': ' . LANG_TITLE,\n            'f_description'     => LANG_FILTER . ': ' . LANG_DESCRIPTION,\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $slug_field_rules = [\n            ['required'],\n            ['slug']\n        ];\n\n        if ($do == 'add') {\n            $slug_field_rules[] = ['unique', $table_name, 'slug'];\n        } else {\n            $slug_field_rules[] = ['unique_exclude', $table_name, 'slug', $filter['id']];\n        }\n\n        $filters = $filters_props = [];\n\n        foreach ($fields as $_field) {\n\n            if ((!$_field['handler']->allow_index || $_field['handler']->filter_type === false) && $_field['type'] != 'parent') {\n                continue;\n            }\n\n            $field = $_field['handler'];\n\n            $field->setName('filters:' . $field->getName());\n\n            $field->display_input = 'getFilterInput';\n            $field->show_filter_input_title = true;\n            $field->is_denormalization = false;\n\n            $field->setContext('filter')->setItem(['ctype_name' => $ctype['name'], 'id' => null]);\n\n            $required_key = array_search(['required'], $field->getRules());\n            if ($required_key !== false) {\n                unset($field->rules[$required_key]);\n            }\n\n            $filters[] = $field;\n        }\n\n        if (!empty($props_fields)) {\n\n            $props_bind = $this->getContentPropsBind($ctype['name']);\n\n            foreach ($props_fields as $id => $props_field) {\n\n                if ((!$props_field->allow_index || $props_field->filter_type === false)) {\n                    continue;\n                }\n\n                $props_field->setName('filters:p' . $id);\n\n                $props_field->display_input = 'getFilterInput';\n                $props_field->show_filter_input_title = true;\n\n                if (isset($props_bind[$id])) {\n                    $props_field->visible_depend = ['filters:category_id' => ['show' => $props_bind[$id]]];\n                }\n\n                $props_field->setContext('filter')->setItem(['ctype_name' => $ctype['name'], 'id' => null]);\n\n                $required_key = array_search(['required'], $props_field->rules);\n                if ($required_key !== false) {\n                    unset($props_field->rules[$required_key]);\n                }\n\n                $filters_props[] = $props_field;\n            }\n\n            if ($filters_props) {\n                $filters_props = [\n                    new fieldList(\n                        'filters:category_id',\n                        [\n                            'title' => LANG_CATEGORY,\n                            'items' => $this->getFormCategories($ctype)\n                        ]\n                    )\n                ] + $filters_props;\n            }\n        }\n\n        return [\n            'basic' => [\n                'type' => 'fieldset',\n                'title'  => LANG_CP_BASIC,\n                'childs' => [\n                    new fieldString('slug', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'prefix' => href_to(((cmsConfig::get('ctype_default') && in_array($ctype['name'], cmsConfig::get('ctype_default'))) ? '' : $ctype['name'])),\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => $slug_field_rules\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'hint' => LANG_CP_FILTER_DESC_HINT,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ]\n                    ])\n                ]\n            ],\n            'filter' => [\n                'title'  => LANG_CP_FILTER_FIELDS,\n                'type'   => 'fieldset',\n                'childs' => $filters\n            ],\n            'filter_props' => [\n                'title'  => LANG_CP_FILTER_PROPS,\n                'type'   => 'fieldset',\n                'childs' => $filters_props\n            ],\n            'cats' => [\n                'title'  => LANG_CP_FILTER_CATS,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldListMultiple('cats', [\n                        'show_all'  => true,\n                        'generator' => function ($prop) use ($ctype) {\n                            $model = cmsCore::getModel('content');\n                            $tree = $model->limit(0)->getCategoriesTree($ctype['name']);\n                            foreach ($tree as $c) {\n                                $items[$c['id']] = $c['title'];\n                            }\n                            return $items;\n                        }\n                    ])\n                ]\n            ],\n            'seo' => [\n                'title' => LANG_SEO,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('seo_h1', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_h1_pattern']) ? $ctype['options']['seo_cat_h1_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_title_pattern']) ? $ctype['options']['seo_cat_title_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_keys_pattern']) ? $ctype['options']['seo_cat_keys_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_desc_pattern']) ? $ctype['options']['seo_cat_desc_pattern'] : null),\n                        'is_strip_tags' => true,\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ]\n        ];\n    }\n\n    private function getFormCategories($ctype) {\n\n        $level_offset   = 0;\n        $last_header_id = false;\n        $items          = ['' => ''];\n\n        $tree = cmsCore::getModel('content')->limit(0)->getCategoriesTree($ctype['name']);\n        if (!$tree) {\n            return $items;\n        }\n\n        foreach ($tree as $c) {\n\n            if ($ctype['options']['is_cats_only_last']) {\n\n                $dash_pad = $c['ns_level'] - 1 >= 0 ? str_repeat('-', $c['ns_level'] - 1) . ' ' : '';\n\n                if ($c['ns_right'] - $c['ns_left'] == 1) {\n                    if ($last_header_id !== false && $last_header_id != $c['parent_id']) {\n                        $items['opt' . $c['id']] = [str_repeat('-', $c['ns_level'] - 1) . ' ' . $c['title']];\n                    }\n                    $items[$c['id']] = $dash_pad . $c['title'];\n                } else if ($c['parent_id'] > 0) {\n                    $items['opt' . $c['id']] = [$dash_pad . $c['title']];\n                    $last_header_id = $c['id'];\n                }\n\n                continue;\n            }\n\n            if (!$ctype['options']['is_cats_only_last']) {\n\n                if ($c['parent_id'] == 0 && !$ctype['options']['is_cats_open_root']) {\n                    $level_offset = 1;\n                    continue;\n                }\n\n                $items[$c['id']] = str_repeat('-- ', $c['ns_level'] - $level_offset) . ' ' . $c['title'];\n\n                continue;\n            }\n        }\n\n        return $items;\n    }\n\n    private function getContentPropsBind($ctype_name) {\n\n        $model = cmsCore::getModel('content');\n\n        $bind_table_name = $model->table_prefix . $ctype_name . '_props_bind';\n\n        $items = $model->get($bind_table_name);\n\n        $result = [];\n\n        if ($items) {\n            foreach ($items as $item) {\n                $result[$item['prop_id']][] = $item['cat_id'];\n            }\n        }\n\n        return $result;\n    }\n}\n", "<?php\nclass formAdminWidgetsCols extends cmsForm {\n\n    public function init($do, $col_id, $row) {\n\n        return array(\n            'basic' => array(\n                'type' => 'fieldset',\n                'childs' => array(\n                    new fieldHidden('row_id'),\n                    new fieldString('title', array(\n                        'title' => LANG_TITLE,\n                        'rules' => array(\n                            array('required'),\n                            array('max_length', 255)\n                        )\n                    )),\n                    new fieldString('name', array(\n                        'title' => LANG_CP_WIDGETS_COL_NAME,\n                        'hint' => LANG_CP_WIDGETS_COL_NAME_HINT,\n                        'rules' => array(\n                            array('max_length', 50),\n                            array(function($controller, $data, $value) use($do, $col_id, $row){\n\n                                if (empty($value)) { return true; }\n                                if (!in_array(gettype($value), array('integer','string','double'))) { return ERR_VALIDATE_INVALID; }\n\n                                $model = new cmsModel();\n\n                                $model->filterEqual('name', $value);\n                                $model->filterEqual('r.template', $row['template']);\n\n                                if($col_id){\n                                    $model->filterNotEqual('id', $col_id);\n                                }\n                                $model->joinInner('layout_rows', 'r', 'r.id = i.row_id');\n                                $count = $model->getCount('layout_cols');\n\n                                if ($count) { return ERR_VALIDATE_UNIQUE; }\n                                return true;\n                            })\n                        )\n                    )),\n                    new fieldList('type', array(\n                        'title' => LANG_CP_WIDGETS_COL_TYPE,\n                        'default' => 'typical',\n                        'items' => array(\n                            'typical' => LANG_CP_WIDGETS_COL_TYPE1,\n                            'custom'  => LANG_CP_WIDGETS_COL_TYPE2\n                        )\n                    )),\n                    new fieldHtml('wrapper', array(\n                        'title' => LANG_CP_WIDGETS_COL_WRAPPER,\n                        'hint'  => LANG_CP_WIDGETS_COL_WRAPPER_H,\n                        'options' => array(\n                            'editor' => 'ace'\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('typical')))\n                    )),\n                    new fieldList('tag', array(\n                        'title' => LANG_CP_WIDGETS_COL_TAG,\n                        'default' => 'div',\n                        'items' => array(\n                            'div'     => '<div>',\n                            'article' => '<article>',\n                            'aside'   => '<aside>',\n                            'main'    => '<main>',\n                            'footer'  => '<footer>',\n                            'header'  => '<header>',\n                            'nav'     => '<nav>',\n                            'section' => '<section>'\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('custom')))\n                    )),\n                    new fieldString('class', array(\n                        'title' => LANG_CP_WIDGETS_COL_CLASS,\n                        'rules' => array(\n                            array('max_length', 100)\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('custom')))\n                    ))\n                )\n            )\n        );\n\n    }\n\n}\n", "<?php\n\nclass formAdminWidgetsImportScheme extends cmsForm {\n\n    public function init($to_template_name) {\n\n        $templates_dynamic_scheme = [];\n\n        $tpls = cmsCore::getTemplates();\n\n        if ($tpls) {\n            foreach ($tpls as $tpl) {\n\n                if($to_template_name == $tpl){\n                    continue;\n                }\n\n                $template_path = cmsConfig::get('root_path') . cmsTemplate::TEMPLATE_BASE_PATH. $tpl;\n\n                $manifest = cmsTemplate::getTemplateManifest($template_path);\n\n                if($manifest === null){\n                    continue;\n                }\n\n                if (!empty($manifest['properties']['is_dynamic_layout'])) {\n                    $templates_dynamic_scheme[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n            }\n        }\n\n        if(!$templates_dynamic_scheme){\n            return [\n                'basic' => [\n                    'type'   => 'fieldset',\n                    'childs' => [\n                        new fieldFile('yaml_file', [\n                            'title' => LANG_CP_WIDGETS_LFILE,\n                            'hint'  => LANG_CP_WIDGETS_LFILE_HINT,\n                            'options' => [\n                                'extensions' => 'yaml'\n                            ]\n                        ])\n                    ]\n                ]\n            ];\n        }\n\n        return [\n            'basic' => [\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('import_type', [\n                        'title' => LANG_CP_WIDGETS_IMPORT_TYPE,\n                        'items' => [\n                            'file' => LANG_PARSER_FILE,\n                            'template' => LANG_CP_WIDGETS_IMPORT_TYPE_EX\n                        ]\n                    ]),\n                    new fieldList('from_template', [\n                        'title' => LANG_CP_WIDGETS_FROM_TEMPLATE,\n                        'items' => $templates_dynamic_scheme,\n                        'visible_depend' => ['import_type' => ['show' => ['template']]]\n                    ]),\n                    new fieldCheckbox('copy_widgets', array(\n                        'title' => LANG_CP_WIDGETS_COPY_WIDGETS,\n                        'visible_depend' => ['import_type' => ['show' => ['template']]]\n                    )),\n                    new fieldFile('yaml_file', [\n                        'title' => LANG_CP_WIDGETS_LFILE,\n                        'hint'  => LANG_CP_WIDGETS_LFILE_HINT,\n                        'options' => [\n                            'extensions' => 'yaml'\n                        ],\n                        'visible_depend' => ['import_type' => ['show' => ['file']]]\n                    ])\n                ]\n            ]\n        ];\n    }\n\n}\n", "<?php\n\nclass modelMenu extends cmsModel {\n\n    private static $all_menus = null;\n    private static $rendered_menus = [];\n\n    private static function loadAllMenus() {\n        if(self::$all_menus === null){\n\n            $model = new self();\n\n            self::$all_menus = $model->filterEqual('is_enabled', 1)->getAllMenuItemsTree();\n        }\n    }\n\n    public static function getMenuItemsByName($menu_name) {\n\n        self::loadAllMenus();\n\n        if(!empty(self::$all_menus[$menu_name])){\n\n            if(!in_array($menu_name, self::$rendered_menus)){\n\n                self::$rendered_menus[] = $menu_name;\n\n                self::$all_menus[$menu_name] = self::buildMenu(self::$all_menus[$menu_name]);\n            }\n\n            return self::$all_menus[$menu_name];\n        }\n\n        return [];\n    }\n\n    public function addMenu($item){\n\n        $id = $this->insert('menu', $item);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $id;\n\n    }\n\n    public function updateMenu($id, $item){\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $this->update('menu', $id, $item);\n\n    }\n\n    public function deleteMenu($id){\n\n        $this->delete('menu', $id);\n\n        $this->filterEqual('menu_id', $id)->deleteFiltered('menu_items');\n\n        cmsCache::getInstance()->clean('menu.items');\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenus(){\n\n        $items = array();\n\n        $sql = \"SELECT *\n                FROM {#}menu\n                ORDER BY id ASC\";\n\n        $result = $this->db->query($sql);\n\n        // \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u0435\u0440\u043d\u0443\u043b, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u043b\u043e\u0436\u044c\n        if (!$this->db->numRows($result)){ return false; }\n\n        // \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u0435\u0440\u043d\u0443\u0432\u0448\u0438\u0435\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u0438\n        while($item = $this->db->fetchAssoc($result)){\n\n            // \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n            $items[$item['id']] = $item;\n\n        }\n\n        // \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0438\n        return $items;\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenu($id, $by_field = 'id'){\n\n        $this->useCache('menu.menus');\n\n        return $this->getItemByField('menu', $by_field, $id);\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenuItems($menu_id = false, $parent_id = false){\n\n        $this->select('COUNT(childs.id)', 'childs_count');\n\n        $this->joinLeft('menu_items', 'childs', 'childs.parent_id = i.id AND childs.is_enabled = 1');\n\n        if($menu_id !== false){\n            $this->filterEqual('menu_id', $menu_id);\n        }\n\n        if ($parent_id !== false){\n            $this->filterEqual('parent_id', $parent_id);\n        }\n\n        $this->groupBy('id');\n\n        $this->orderBy('ordering', 'asc');\n\n        $this->useCache('menu.items');\n\n        return $this->get('menu_items', function($item, $model){\n            if ($item['options']){\n                $item['options'] = cmsModel::yamlToArray($item['options']);\n            } else {\n                $item['options'] = array();\n            }\n            $item['groups_view'] = cmsModel::yamlToArray($item['groups_view']);\n            $item['groups_hide'] = cmsModel::yamlToArray($item['groups_hide']);\n            return $item;\n        });\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getAllMenuItemsTree() {\n\n        $menus = $this->select('menu.name', 'menu_name')->joinLeft('menu', 'menu', 'menu.id = i.menu_id')->getMenuItems();\n\n        $result = array();\n\n        if($menus){\n            $menus = cmsEventsManager::hook('menu_before_list', $menus);\n            foreach ($menus as $menu) {\n                $result[$menu['menu_name']][$menu['id']] = $menu;\n            }\n        }\n\n        return $result;\n\n    }\n\n    public static function buildMenu($menus, $parse_hooks = true) {\n\n        $items = [];\n        $delta = [];\n\n        $user = cmsUser::getInstance();\n\n        // \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u0435\u0440\u043d\u0443\u0432\u0448\u0438\u0435\u0441\u044f \u043f\u0443\u043d\u043a\u0442\u044b \u043c\u0435\u043d\u044e\n        foreach ($menus as $item) {\n\n            $is_root_added = false;\n\n            if (($item['groups_view'] && !$user->isInGroups($item['groups_view'])) ||\n                    ($item['groups_hide'] && $user->isInGroups($item['groups_hide']))) {\n\n                if ($item['parent_id']) {\n                    if (!isset($delta[$item['parent_id']])) {\n                        $delta[$item['parent_id']] = 1;\n                    } else {\n                        $delta[$item['parent_id']] += 1;\n                    }\n                }\n\n                continue;\n            }\n\n            $hook_result = ['items' => []];\n\n            if ($item['title'] && $parse_hooks) {\n                if (strpos($item['title'], '{user.') !== false) {\n                    $item['title'] = string_replace_user_properties($item['title']);\n                }\n            }\n\n            if ($item['url'] && $parse_hooks) {\n\n                $matches = [];\n\n                // \u0435\u0441\u043b\u0438 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n                if (strpos($item['url'], '{user.') !== false) {\n                    $item['url'] = string_replace_user_properties($item['url']);\n                } else\n\n                // \u0435\u0441\u043b\u0438 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0448\u0430\u0431\u043b\u043e\u043d {controller:action}\n                if (preg_match('/^{([a-z0-9]+):*([a-z0-9_]*)}$/i', $item['url'], $matches)) {\n\n                    // \u0442\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u0445\u0443\u043a menu \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430\n                    $controller = $matches[1];\n                    $action     = $matches[2];\n\n                    $hook_result = cmsEventsManager::hook('menu_' . $controller, [\n                        'action'        => $action,\n                        'menu_item_id'  => $item['id'],\n                        'menu_item_url' => $item['url'],\n                        'menu_item'     => $item\n                    ], false);\n\n                    // \u0435\u0441\u043b\u0438 \u0445\u0443\u043a \u0432\u0435\u0440\u043d\u0443\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n                    if ($hook_result) {\n\n                        // \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0439 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e\n                        $item['url'] = isset($hook_result['url']) ? $hook_result['url'] : '';\n\n                        if (isset($hook_result['counter'])) {\n                            $item['counter'] = $hook_result['counter'];\n                        }\n\n                        if (isset($hook_result['title'])) {\n                            $item['title'] = $hook_result['title'];\n                        }\n\n                        if (!empty($hook_result['items'])) {\n                            $item['childs_count'] = count($hook_result['items']);\n                        }\n\n                        $is_root_added = true;\n                    } else {\n                        continue;\n                    }\n                }\n\n                $is_external = mb_strpos($item['url'], '://') !== false;\n\n                if (!$is_root_added && !$is_external) {\n                    $item['url'] = href_to($item['url']);\n                }\n            }\n\n            // \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n            $items[$item['id']] = $item;\n\n            // \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u043c\u0435\u043d\u044e\n            if (!empty($hook_result['items'])) {\n                foreach ($hook_result['items'] as $i) {\n                    $i['menu_id']    = $item['menu_id'];\n                    $i['options']    = isset($i['options']) ? $i['options'] : [];\n                    $i['options']    = array_merge($item['options'], $i['options']);\n                    $items[$i['id']] = $i;\n                }\n            }\n        }\n\n        if ($delta) {\n            foreach ($delta as $item_id => $d) {\n                if (isset($items[$item_id])) {\n                    $items[$item_id]['childs_count'] -= $d;\n                }\n            }\n        }\n\n        $tree = [];\n\n        cmsModel::buildTreeRecursive($items, $tree);\n\n        // \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0434\u0435\u0440\u0435\u0432\u043e\n        return $tree;\n    }\n\n    public function getMenuItemsTree($menu_id, $parse_hooks = true){\n\n        $result = $this->getMenuItems($menu_id);\n\n        if (!$result){ return false; }\n\n        return self::buildMenu($result, $parse_hooks);\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenuItem($id){\n\n        return $this->getItemById('menu_items', $id, function($item, $model){\n            if ($item['options']){\n                $item['options'] = cmsModel::yamlToArray($item['options']);\n            } else {\n                $item['options'] = array();\n            }\n            $item['groups_view'] = cmsModel::yamlToArray($item['groups_view']);\n            $item['groups_hide'] = cmsModel::yamlToArray($item['groups_hide']);\n            return $item;\n        });\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function addMenuItem($item){\n\n        $this->filterEqual('parent_id', $item['parent_id']);\n\n        $item['ordering'] = $this->getNextOrdering('menu_items');\n\n        $id = $this->insert('menu_items', $item);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $id;\n\n    }\n\n    public function updateMenuItem($id, $item){\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $this->update('menu_items', $id, $item);\n\n    }\n\n    public function deleteMenuItem($id){\n\n        $item = $this->getMenuItem($id);\n\n        $tree = $this->getMenuItemsTree($item['menu_id'], false);\n\n        $level      = false;\n        $node_start = false;\n        $to_delete  = array($id);\n        $to_reorder = array();\n\n        foreach($tree as $item){\n\n            if ($item['id']==$id){\n                $node_start = true;\n                $level = $item['level'];\n                continue;\n            }\n\n            if ($node_start){\n                if ($item['level'] > $level) {\n                    $to_delete[] = $item['id'];\n                    continue;\n                } else {\n                    $node_start = false;\n                }\n            }\n\n            $to_reorder[] = $item['id'];\n\n        }\n\n        foreach($to_delete as $item_id){\n            $this->delete('menu_items', $item_id);\n        }\n\n        $this->reorderByList('menu_items', $to_reorder);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return true;\n\n    }\n\n}\n", "<?php\n\nclass cmsUploader {\n\n    private $allow_remote = false;\n    private $file_name = '';\n    private $user_id = 0;\n    private $site_cfg = null;\n\n    private $last_error = null;\n    private $upload_errors = [];\n\n    private $allowed_mime = false;\n    private $allowed_mime_ext = [];\n    private $mime_types = [];\n\n    public function __construct($user_id = null) {\n\n        $this->mime_types = (new cmsConfigs('mimetypes.php'))->getAll();\n\n        $this->upload_errors = [\n            UPLOAD_ERR_OK         => LANG_UPLOAD_ERR_OK,\n            UPLOAD_ERR_INI_SIZE   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, $this->getMaxUploadSize()),\n            UPLOAD_ERR_FORM_SIZE  => LANG_UPLOAD_ERR_FORM_SIZE,\n            UPLOAD_ERR_PARTIAL    => LANG_UPLOAD_ERR_PARTIAL,\n            UPLOAD_ERR_NO_FILE    => LANG_UPLOAD_ERR_NO_FILE,\n            UPLOAD_ERR_NO_TMP_DIR => LANG_UPLOAD_ERR_NO_TMP_DIR,\n            UPLOAD_ERR_CANT_WRITE => LANG_UPLOAD_ERR_CANT_WRITE,\n            UPLOAD_ERR_EXTENSION  => LANG_UPLOAD_ERR_EXTENSION\n        ];\n\n        $this->user_id  = $user_id ?? cmsUser::getInstance()->id;\n        $this->site_cfg = cmsConfig::getInstance();\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432\n     *\n     * @param array $types\n     * @return $this\n     */\n    public function setAllowedMime($types) {\n\n        $this->allowed_mime = $types;\n\n        foreach ($this->allowed_mime as $mime) {\n            if (isset($this->mime_types[$mime])) {\n                $this->allowed_mime_ext[] = $this->mime_types[$mime];\n            }\n        }\n\n        return $this;\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u043e \u0438\u0445 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044e\n     *\n     * @param array|string $allowed_ext\n     * @return $this\n     */\n    private function setAllowedMimeByExt($allowed_ext) {\n\n        // \u0415\u0441\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0440\u0430\u043d\u0435\u0435, \u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c\n        if ($this->allowed_mime) {\n            return $this;\n        }\n\n        $this->allowed_mime = [];\n\n        if (!is_array($allowed_ext)) {\n            $allowed_ext = explode(',', (string) $allowed_ext);\n        }\n\n        foreach ($allowed_ext as $aext) {\n\n            $aext = mb_strtolower(trim(trim((string) $aext, '., ')));\n\n            if (empty($aext)) {\n                continue;\n            }\n\n            $mime_key = array_search($aext, $this->mime_types, true);\n\n            if(!$mime_key){\n                continue;\n            }\n\n            $this->allowed_mime[] = $mime_key;\n\n            $this->allowed_mime_ext[] = $aext;\n        }\n\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     *\n     * @param string $name\n     * @return $this\n     */\n    public function setFileName($name) {\n\n        $this->file_name = mb_substr(trim($name), 0, 64);\n\n        return $this;\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 id \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n     *\n     * @param int $id\n     * @return $this\n     */\n    public function setUserId($id) {\n\n        $this->user_id = $id;\n\n        return $this;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043e\u0448\u0438\u0431\u043a\u0443\n     *\n     * @return ?string\n     */\n    public function getLastError() {\n        return $this->last_error;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432,\n     * \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c \u0432 php.ini\n     *\n     * @return string\n     */\n    public function getMaxUploadSize() {\n\n        // \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043f\u043e \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u043c\u0435\u043d\u044c\u0448\u0435, \u0442.\u043a. \u0435\u0441\u043b\u0438 post_max_size \u043c\u0435\u043d\u044c\u0448\u0435 upload_max_filesize,\n        // \u0442\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c post_max_size\n        $max_size = min(files_convert_bytes(@ini_get('upload_max_filesize')), files_convert_bytes(@ini_get('post_max_size')));\n\n        return files_format_bytes($max_size);\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043b\u0438 \u0444\u0430\u0439\u043b \u043d\u0430\u043b\u0438\u0447\u0438\u0435\u043c \u0435\u0433\u043e \u0432 $_FILES\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_FILES\n     * @return boolean\n     */\n    public function isUploaded($name) {\n\n        if (!isset($_FILES[$name])) {\n            return false;\n        }\n\n        if (empty($_FILES[$name]['size'])) {\n\n            if (isset($_FILES[$name]['error'])) {\n                if (isset($this->upload_errors[$_FILES[$name]['error']]) && $this->upload_errors[$_FILES[$name]['error']] !== UPLOAD_ERR_OK) {\n                    $this->last_error = $this->upload_errors[$_FILES[$name]['error']];\n                }\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043b\u0438 \u0444\u0430\u0439\u043b \u0447\u0435\u0440\u0435\u0437 XHR\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_GET\n     * @return boolean\n     */\n    public function isUploadedXHR($name) {\n        return !empty($_GET['qqfile']);\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u043d\u0430\u0434\u043e \u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_POST\n     * @return boolean\n     */\n    public function isUploadedFromLink($name) {\n        return $this->allow_remote && !empty($_POST[$name]);\n    }\n\n    /**\n     * \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @return $this\n     */\n    public function enableRemoteUpload() {\n\n        $this->allow_remote = true;\n\n        return $this;\n    }\n\n    /**\n     * \u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @return $this\n     */\n    public function disableRemoteUpload() {\n\n        $this->allow_remote = false;\n\n        return $this;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0441 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c\n     * \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044f \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043e\u0434\u043d\u043e\u0438\u043c\u0451\u043d\u043d\u043e\u0433\u043e\n     *\n     * @param string $path \u041f\u0443\u0442\u044c \u043a \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430\n     * @param string $file_ext \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430\n     * @param ?string $file_name \u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     * @return string\n     */\n    private function getFileName($path, $file_ext, $file_name = null) {\n\n        if (!$file_name) {\n            if ($this->file_name) {\n                $file_name = str_replace('.' . $file_ext, '', files_sanitize_name($this->file_name . '.' . $file_ext));\n            } else {\n                $file_name = substr(md5(microtime(true)), 0, 8);\n            }\n        }\n\n        if (file_exists($path . $file_name . '.' . $file_ext)) {\n            return $this->getFileName($path, $file_ext, $file_name . '_' . md5(microtime(true)));\n        }\n\n        return $file_name . '.' . $file_ext;\n    }\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c\n     * @param string $allowed_ext \u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439 (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)\n     * @param string $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function upload($filename, $allowed_ext = false, $allowed_size = 0, $destination = false) {\n\n        // \u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f\n        if ($allowed_ext) {\n            $this->setAllowedMimeByExt($allowed_ext);\n        }\n\n        if ($this->isUploadedFromLink($filename)) {\n            return $this->uploadFromLink($filename, $allowed_size, $destination);\n        }\n\n        if ($this->isUploadedXHR($filename)) {\n            return $this->uploadXHR($filename, $allowed_size, $destination);\n        }\n\n        if ($this->isUploaded($filename)) {\n            return $this->uploadForm($filename, $allowed_size, $destination);\n        }\n\n        $last_error = $this->getLastError();\n\n        return [\n            'success' => false,\n            'error'   => ($last_error ? $last_error : LANG_UPLOAD_ERR_NO_FILE)\n        ];\n    }\n\n//============================================================================//\n//============================================================================//\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0447\u0435\u0440\u0435\u0437 input \u0442\u0438\u043f\u0430 file\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_FILES\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadForm($filename, $allowed_size = 0, $destination = false) {\n\n        $source     = $_FILES[$filename]['tmp_name'];\n        $error_code = $_FILES[$filename]['error'];\n        $dest_size  = (int) $_FILES[$filename]['size'];\n        $dest_name  = files_sanitize_name($_FILES[$filename]['name']);\n\n        $file = new cmsUploadfile($source, $this->allowed_mime);\n\n        if (!$file->isAllowed()) {\n            return [\n                'error'   => LANG_UPLOAD_ERR_MIME . '. ' . sprintf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', $this->allowed_mime_ext)),\n                'success' => false,\n                'name'    => $dest_name\n            ];\n        }\n\n        if ($allowed_size) {\n            if ($dest_size > $allowed_size) {\n                return [\n                    'error'   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, files_format_bytes($allowed_size)),\n                    'success' => false,\n                    'name'    => $dest_name\n                ];\n            }\n        }\n\n        $dest_ext = $file->getExt();\n\n        if (!$destination) {\n            $destination = $this->getUploadDestinationDirectory();\n        } else {\n            $destination = $this->site_cfg->upload_path . $destination . '/';\n        }\n\n        if (!$this->file_name) {\n            $this->file_name = pathinfo($dest_name, PATHINFO_FILENAME);\n        }\n\n        $destination .= $this->getFileName($destination, $dest_ext);\n\n        return $this->moveUploadedFile($source, $destination, $error_code, $dest_name, $dest_size);\n    }\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @param string $post_filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_POST\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadFromLink($post_filename, $allowed_size = 0, $destination = false) {\n\n        $link = $file_name = trim($_POST[$post_filename]);\n\n\n        if (\n            // \u0412\u0430\u043b\u0438\u0434\u043d\u044b\u0439 URL \u0441 PATH\n            filter_var($link, FILTER_VALIDATE_URL, FILTER_FLAG_PATH_REQUIRED) !== $link ||\n            // \u041f\u043e IP \u0430\u0434\u0440\u0435\u0441\u0443 \u043d\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u043c\n            preg_match('#^(?:(?:https?):\\/\\/)([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}).*#ui', $link)\n            ) {\n\n            return [\n                'success' => false,\n                'error'   => 'Not allowed',\n                'name'    => '',\n                'path'    => ''\n            ];\n        }\n\n        // \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0440\u0435\u0434\u0438\u0440\u0435\u043a\u0442 \u0438 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n        $curl = curl_init();\n        curl_setopt($curl, CURLOPT_PROTOCOLS, CURLPROTO_HTTPS | CURLPROTO_HTTP);\n        curl_setopt($curl, CURLOPT_URL, $link);\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n        curl_setopt($curl, CURLOPT_HEADER, true);\n        curl_setopt($curl, CURLOPT_NOBODY, true);\n        curl_setopt($curl, CURLOPT_TIMEOUT, 5);\n        $headers = curl_exec($curl);\n        curl_close($curl);\n\n        $matches = [];\n        if (preg_match(\"/(?:Location:|URI:)([^\\n]+)*/is\", $headers, $matches)) {\n\n            $url = trim($matches[1]);\n\n            if (strpos($url, 'http') !== 0) {\n                $url_data = parse_url($link);\n                $link     = $url_data['scheme'] . '://' . $url_data['host'] . $url;\n            } else {\n                $link = $url;\n            }\n\n            $_POST[$post_filename] = $link;\n\n            return $this->uploadFromLink($post_filename, $allowed_size, $destination);\n        }\n\n        if (preg_match('#filename=\"([^\"]+)#uis', $headers, $matches)) {\n            $file_name = trim($matches[1]);\n        }\n\n        $dest_name = files_sanitize_name($file_name);\n\n        $file_bin = file_get_contents_from_url($link);\n\n        if (!$file_bin) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_NO_FILE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return $this->saveFileFromString($file_bin, $allowed_size, $destination, $dest_name);\n    }\n\n    /**\n     * \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 php://input \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e  \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_GET\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadXHR($filename, $allowed_size = 0, $destination = false) {\n\n        $dest_name = files_sanitize_name($_GET['qqfile']);\n\n        $file_bin = file_get_contents('php://input');\n\n        if (!$file_bin) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_NO_FILE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return $this->saveFileFromString($file_bin, $allowed_size, $destination, $dest_name);\n    }\n\n    /**\n     * \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n     *\n     * @param string $file_bin\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @param string $dest_name \u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     * @return array\n     */\n    private function saveFileFromString($file_bin, $allowed_size, $destination, $dest_name) {\n\n        $file = new cmsUploadfile($file_bin, $this->allowed_mime);\n\n        if (!$file->isAllowed()) {\n            return [\n                'error'   => LANG_UPLOAD_ERR_MIME . '. ' . sprintf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', $this->allowed_mime_ext)),\n                'success' => false,\n                'name'    => $dest_name\n            ];\n        }\n\n        $dest_ext = $file->getExt();\n\n        $file_size = strlen($file_bin);\n\n        if ($allowed_size) {\n            if ($file_size > $allowed_size) {\n                return [\n                    'error'   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, files_format_bytes($allowed_size)),\n                    'success' => false,\n                    'name'    => $dest_name\n                ];\n            }\n        }\n\n        if (!$destination) {\n            $destination = $this->getUploadDestinationDirectory();\n        } else {\n            $destination = $this->site_cfg->upload_path . $destination . '/';\n        }\n\n        $destination .= $this->getFileName($destination, $dest_ext);\n\n        if (!is_writable(dirname($destination))) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        if(file_put_contents($destination, $file_bin) === false){\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return [\n            'success' => true,\n            'path'    => $destination,\n            'url'     => str_replace($this->site_cfg->upload_path, '', $destination),\n            'name'    => basename($destination),\n            'size'    => $file_size\n        ];\n    }\n\n    /**\n     * \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438\n     *\n     * @param string $source\n     * @param string $destination\n     * @param int $errorCode\n     * @return array\n     */\n    private function moveUploadedFile($source, $destination, $errorCode, $orig_name = '', $orig_size = 0) {\n\n        if ($errorCode !== UPLOAD_ERR_OK && isset($this->upload_errors[$errorCode])) {\n\n            return [\n                'success' => false,\n                'error'   => $this->upload_errors[$errorCode],\n                'name'    => $orig_name,\n                'path'    => ''\n            ];\n        }\n\n        $upload_dir = dirname($destination);\n        if (!is_writable($upload_dir)) {\n            @chmod($upload_dir, 0777);\n        }\n\n        if (!is_writable($upload_dir)) {\n\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $orig_name,\n                'path'    => ''\n            ];\n        }\n\n        return [\n            'success' => @move_uploaded_file($source, $destination),\n            'path'    => $destination,\n            'url'     => str_replace($this->site_cfg->upload_path, '', $destination),\n            'name'    => basename($destination),\n            'size'    => $orig_size,\n            'error'   => $this->upload_errors[$errorCode]\n        ];\n    }\n\n    /**\n     * \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0444\u0430\u0439\u043b\n     * @param string $file_path\n     * @return boolean\n     */\n    public function remove($file_path) {\n        return files_delete_file($file_path, 2);\n    }\n\n    /**\n     * \u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0434\u0435\u0440\u0435\u0432\u043e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430\n     * @return string\n     */\n    public function getUploadDestinationDirectory() {\n        return files_get_upload_dir($this->user_id);\n    }\n\n}\n", "<?php\n\nclass cmsUploadfile {\n\n    private $file_mime;\n    private $mime_types;\n    private $allowed_mime;\n\n    public function __construct($file_path, $allowed_mime = null) {\n\n        $this->allowed_mime = $allowed_mime;\n\n        $this->mime_types = (new cmsConfigs('mimetypes.php'))->getAll();\n\n        $finfo = finfo_open(FILEINFO_MIME_TYPE);\n\n        if(strpos($file_path, DIRECTORY_SEPARATOR) === 0){\n\n            $this->file_mime = finfo_file($finfo, $file_path);\n\n        } else {\n\n            $this->file_mime = finfo_buffer($finfo, $file_path);\n        }\n\n        finfo_close($finfo);\n    }\n\n    public function getMime() {\n        return $this->file_mime;\n    }\n\n    public function getExt() {\n\n        if ($this->file_mime && isset($this->mime_types[$this->file_mime])) {\n\n            return $this->mime_types[$this->file_mime];\n        }\n\n        return 'bin';\n    }\n\n    public function isAllowed() {\n\n        // \u041f\u0443\u0441\u043a\u0430\u0435\u043c \u043b\u044e\u0431\u044b\u0435, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e\n        if ($this->allowed_mime === null) {\n            return true;\n        }\n\n        if ($this->file_mime === false) {\n            return false;\n        }\n\n        return in_array($this->file_mime, $this->allowed_mime, true);\n    }\n\n}\n", "<?php\n\nclass fieldHtml extends cmsFormField {\n\n    public $title       = LANG_PARSER_HTML;\n    public $sql         = 'mediumtext';\n    public $filter_type = 'str';\n    public $allow_index = false;\n    public $var_type    = 'string';\n\n    public function getOptions(){\n        return [\n            new fieldList('editor', [\n                'title'     => LANG_PARSER_HTML_EDITOR,\n                'default'   => cmsConfig::get('default_editor'),\n                'generator' => function ($item) {\n                    $items   = [];\n                    $editors = cmsCore::getWysiwygs();\n                    foreach ($editors as $editor) {\n                        $items[$editor] = ucfirst($editor);\n                    }\n                    $ps = cmsCore::getModel('wysiwygs')->getPresetsList();\n                    if ($ps) {\n                        foreach ($ps as $key => $value) {\n                            $items[$key] = $value;\n                        }\n                    }\n                    return $items;\n                }\n            ]),\n            new fieldList('editor_presets', [\n                'title'         => LANG_PARSER_HTML_EDITOR_GR,\n                'is_multiple'   => true,\n                'dynamic_list'  => true,\n                'select_title'  => LANG_SELECT,\n                'multiple_keys' => [\n                    'group_id'  => 'field', 'preset_id' => 'field_select'\n                ],\n                'generator'     => function ($item) {\n                    $users_model = cmsCore::getModel('users');\n\n                    $items = [];\n\n                    $groups = $users_model->getGroups(false);\n\n                    foreach ($groups as $group) {\n                        $items[$group['id']] = $group['title'];\n                    }\n\n                    return $items;\n                },\n                'values_generator' => function () {\n                    $items   = [];\n                    $editors = cmsCore::getWysiwygs();\n                    foreach ($editors as $editor) {\n                        $items[$editor] = ucfirst($editor);\n                    }\n                    $ps = cmsCore::getModel('wysiwygs')->getPresetsList();\n                    if ($ps) {\n                        foreach ($ps as $key => $value) {\n                            $items[$key] = $value;\n                        }\n                    }\n                    return $items;\n                }\n            ]),\n            new fieldCheckbox('is_html_filter', [\n                'title'           => LANG_PARSER_HTML_FILTERING,\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('parse_patterns', [\n                'title' => LANG_PARSER_PARSE_PATTERNS,\n                'hint'  => LANG_PARSER_PARSE_PATTERNS_HINT\n            ]),\n            new fieldCheckbox('build_redirect_link', [\n                'title'      => LANG_PARSER_BUILD_REDIRECT_LINK,\n                'is_visible' => cmsController::enabled('redirect')\n            ]),\n            new fieldNumber('teaser_len', [\n                'title'           => LANG_PARSER_HTML_TEASER_LEN,\n                'hint'            => LANG_PARSER_HTML_TEASER_LEN_HINT,\n                'extended_option' => true\n            ]),\n            new fieldString('teaser_postfix', [\n                'title'           => LANG_PARSER_HTML_TEASER_POSTFIX,\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'default'         => '',\n                'extended_option' => true\n            ]),\n            new fieldList('teaser_type', [\n                'title'           => LANG_PARSER_HTML_TEASER_TYPE,\n                'items'           => [\n                    ''  => LANG_PARSER_HTML_TEASER_TYPE_NULL,\n                    's' => LANG_PARSER_HTML_TEASER_TYPE_S,\n                    'w' => LANG_PARSER_HTML_TEASER_TYPE_W\n                ],\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('show_show_more', [\n                'title'           => LANG_PARSER_SHOW_SHOW_MORE,\n                'default'         => false,\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('in_fulltext_search', [\n                'title'   => LANG_PARSER_IN_FULLTEXT_SEARCH,\n                'hint'    => LANG_PARSER_IN_FULLTEXT_SEARCH_HINT,\n                'default' => false\n            ])\n        ];\n    }\n\n    public function getFilterInput($value) {\n        return ($this->show_filter_input_title ? '<label for=\"'.$this->id.'\">'.$this->title.'</label>' : '') . html_input('text', $this->name, $value);\n    }\n\n    public function getStringValue($value){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('parse_patterns') && !empty($this->item)){\n            $value = string_replace_keys_values_extended($value, $this->item);\n        }\n\n        return trim(strip_tags($value));\n    }\n\n    public function afterParse($value, $item){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('parse_patterns')){\n            $value = string_replace_keys_values_extended($value, $item);\n        }\n\n        return $value;\n    }\n\n    public function parse($value){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('is_html_filter')){\n            $value = cmsEventsManager::hook('html_filter', [\n                'text'                => $value,\n                'is_auto_br'          => $this->getOption('editor') === 'markitup',\n                'build_smiles'        => $this->getOption('editor') === 'markitup', // \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u043a\n                'build_redirect_link' => (bool)$this->getOption('build_redirect_link')\n            ]);\n            $value = string_replace_svg_icons($value);\n        }\n\n        return $value;\n    }\n\n    public function parseTeaser($value) {\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if (!empty($this->item['is_private_item'])) {\n            return '<p class=\"private_field_hint text-muted\">'.$this->item['private_item_hint'].'</p>';\n        }\n\n        $max_len = $this->getOption('teaser_len', 0);\n\n        if ($max_len){\n\n            $teaser_postfix = $this->getOption('teaser_postfix', '');\n            $teaser_type = $this->getOption('teaser_type', 's');\n\n            $value = string_short($value, $max_len, $teaser_postfix, $teaser_type);\n\n            if($this->getOption('show_show_more') && !empty($this->item['ctype']['name']) && !empty($this->item['slug'])){\n                $value .= '<span class=\"d-block mt-2\"><a class=\"read-more btn btn-outline-info btn-sm\" href=\"'.href_to($this->item['ctype']['name'], $this->item['slug'].'.html').'\">'.LANG_MORE.'</a></span>';\n            }\n\n        } else if ($this->getOption('is_html_filter')){\n            $value = cmsEventsManager::hook('html_filter', [\n                'text'                => $value,\n                'is_auto_br'          => false,\n                'build_smiles'        => $this->getOption('editor') === 'markitup', // \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u043a\n                'build_redirect_link' => (bool)$this->getOption('build_redirect_link')\n            ]);\n        }\n\n        if ($this->getOption('parse_patterns') && !empty($this->item)){\n            $value = string_replace_keys_values_extended($value, $this->item);\n        }\n\n        return $value;\n    }\n\n    public function applyFilter($model, $value) {\n        return $model->filterLike($this->name, \"%{$value}%\");\n    }\n\n    public function afterStore($item, $model, $action) {\n\n        if ($action === 'add' && !empty($item[$this->name])) {\n\n            $paths = string_html_get_images_path($item[$this->name]);\n\n            if ($paths) {\n                foreach ($paths as $path) {\n\n                    $model->filterEqual('path', $path)->filterIsNull('target_id');\n                    $model->updateFiltered('uploaded_files', ['target_id' => $item['id']], true);\n                }\n            }\n        }\n\n        return;\n    }\n\n    public function delete($value) {\n\n        if (is_empty_value($value)) {\n            return true;\n        }\n\n        $paths = string_html_get_images_path($value);\n\n        if ($paths) {\n\n            $files_model = cmsCore::getModel('files');\n\n            foreach ($paths as $path) {\n\n                $file = $files_model->getFileByPath($path);\n                if (!$file) {\n                    continue;\n                }\n\n                $files_model->deleteFile($file);\n            }\n        }\n\n        return true;\n    }\n\n    public function getInput($value) {\n\n        $this->data = cmsCore::getController('wysiwygs')->getEditorParams([\n            'editor'  => $this->getOption('editor'),\n            'options' => $this->getOption('editor_options', []),\n            'presets' => $this->getOption('editor_presets', [])\n        ]);\n\n        if (empty($this->data['options']['id'])) {\n            $this->data['options']['id'] = $this->id;\n        }\n\n        $this->id = $this->data['options']['id'];\n\n        return parent::getInput($value);\n    }\n\n}\n", "<?php\n\n    define('LANG_ADMIN_CONTROLLER',     'Control Panel');\n    define('LANG_CP_NEVER',                      'Never');\n    define('LANG_CP_INSTALL_FOLDER_EXISTS',     'Attention! The installation directory <b>/install</b> has not been deleted.');\n    define('LANG_CP_TOOLTIP_HELP',              'Useful documentation for the section');\n    define('LANG_CP_TOOLTIP_HELP_HINT',         'Disable animations can be in the template settings');\n    define('LANG_CP_DASHBOARD_STATS',           'Site Stats');\n    define('LANG_CP_DASHBOARD_SYSINFO',         'System Info');\n    define('LANG_CP_DASHBOARD_RESOURCES',       'Useful Resources');\n    define('LANG_CP_DASHBOARD_NEWS',            'InstantCMS news');\n    define('LANG_CP_DASHBOARD_NEWS_O',          'Official');\n    define('LANG_CP_DASHBOARD_NEWS_A',          'Blogs');\n    define('LANG_CP_PAGE_OPTIONS',              'Customize this page');\n    define('LANG_CP_SU',                        'System utilization');\n    define('LANG_CP_SU_DISK',                   'Disk space');\n    define('LANG_CP_SU_CPU',                    'Load average');\n    define('LANG_CP_CACHE',                     'Caching');\n    define('LANG_CP_WO_AUTO_GROUP',             'Automatically detect group\\'s page');\n    define('LANG_CP_WO_AUTO_GROUP_HINT',        'On group page widget displays the group\\'s items');\n    define('LANG_CP_DASHBOARD_SI_ICMS',         'InstantCMS version');\n    define('LANG_CP_DASHBOARD_SI_PHP',          'PHP version');\n    define('LANG_CP_DASHBOARD_SI_WS',           'Web server');\n    define('LANG_CP_DASHBOARD_SQL_SERVER',      'MYSQL server');\n    define('LANG_CP_DASHBOARD_APACHE_NGINX',    'a two-tier configuration, Nginx version is %s');\n    define('LANG_CP_DASHBOARD_SI_ML',           'Memory limit');\n    define('LANG_CP_DASHBOARD_SI_IP',           'Server IP');\n    define('LANG_CP_DASHBOARD_SI_ROOT',         'Root folder');\n    define('LANG_CP_DASHBOARD_SI_SESSION_TYPE', 'Session save handler');\n    define('LANG_CP_DASHBOARD_SI_SESSION',      'Session folder');\n    define('LANG_CP_DASHBOARD_SI_MAX',          'Max. file upload size');\n    define('LANG_CP_DASHBOARD_SI_ION',          'IonCube Loader installed');\n    define('LANG_CP_DASHBOARD_SI_ZEND',         'Zend OPcache installed');\n    define('LANG_CP_DASHBOARD_SI_ZENDG',        'Zend Guard Loader installed');\n    define('LANG_CP_DASHBOARD_LEAD_SPONSOR',    'General sponsor');\n    define('LANG_CP_DASHBOARD_LINKS_SITE',      'Official Site');\n    define('LANG_CP_DASHBOARD_LINKS_DOCS',      'Documentation');\n    define('LANG_CP_DASHBOARD_LINKS_ADDONS',    'Extensions');\n    define('LANG_CP_DASHBOARD_LINKS_FORUMS',    'Community Forum');\n    define('LANG_CP_DASHBOARD_LINKS_DONATE',    'Donate');\n    define('LANG_CP_DASHBOARD_LINKS_SPONSORS',  'Become a Sponsor');\n    define('LANG_CP_DASHBOARD_PREMIUM',         'Premium components');\n    define('LANG_CP_DASHBOARD_BILLING',         'Billing');\n    define('LANG_CP_DASHBOARD_BILLING_HINT',    'Monetize your site');\n    define('LANG_CP_DASHBOARD_INVIDEO_HINT',    'Professional video catalog');\n    define('LANG_CP_DASHBOARD_INMAPS_HINT',     'Object catalog on the map');\n    define('LANG_CP_SECTION_INDEX',             'Index');\n    define('LANG_CP_SECTION_CTYPES',            'Content Types');\n    define('LANG_CP_SECTION_CONTENT',           'Content');\n    define('LANG_CP_SECTION_USERS',             'Users');\n    define('LANG_CP_SECTION_GROUPS',            'Groups');\n    define('LANG_CP_SECTION_MENU',              'Menu');\n    define('LANG_CP_SECTION_WIDGETS',           'Widgets and pages');\n    define('LANG_CP_SECTION_CONTROLLERS',       'Components');\n    define('LANG_CP_SECTION_SETTINGS',          'Settings');\n    define('LANG_CP_SECTION_UPDATE',            'Updates');\n    define('LANG_CP_SELECTED_EDIT',             'Edit');\n    define('LANG_CP_SELECTED_DELETE',           'Delete');\n    define('LANG_CP_CTYPES_ADD',                'Add Content Type');\n    define('LANG_CP_CTYPES_EDIT',               'Edit Content Type');\n    define('LANG_CP_CTYPE_CREATED',             'Content type &laquo;%s&raquo; created');\n    define('LANG_CP_CTYPE_DELETE_CONFIRM',      'Delete content type \"{title}\"?');\n    define('LANG_CP_CTYPE_ERROR_NAME',          'It should not be called the name of an existing component');\n    define('LANG_CP_CTYPE_TO_LIST',             'To the content types list');\n    define('LANG_CP_CTYPE_NOT_SET',             'No content type set');\n    define('LANG_CP_CTYPE_SETTINGS',            'Settings');\n    define('LANG_CP_CTYPE_LABELS',              'Labels');\n    define('LANG_CP_CTYPE_FIELDS',              'Fields');\n    define('LANG_CP_CTYPE_PROPS',               'Properties');\n    define('LANG_CP_CTYPE_PERMISSIONS',         'Permissions');\n    define('LANG_CP_CTYPE_DATASETS',            'Datasets');\n    define('LANG_CP_CTYPE_FILTERS',             'Filters');\n    define('LANG_CP_CTYPE_DATASET',             'Dataset');\n    define('LANG_CP_GRID_COLYMNS_SYSTEM',       'System');\n    define('LANG_CP_GRID_COLYMNS_USER',         'User');\n    define('LANG_CP_GRID_COLYMNS_FILTER',       'Filter');\n    define('LANG_CP_GRID_COLYMNS_DISPLAY',      'Display');\n    define('LANG_CP_GRID_COLYMNS_EXACT',        'Exact match');\n    define('LANG_CP_GRID_COLYMNS_LIKE',         'Like in string');\n    define('LANG_CP_GRID_COLYMNS_DATE',         'Date');\n    define('LANG_CP_GRID_COLYMNS_SELECT',       'Select');\n    define('LANG_CP_GRID_COLYMNS_FLAG',         'Switch');\n    define('LANG_CP_GRID_COLYMNS_CUT_TEXT',     'First 100 symbols');\n    define('LANG_CP_GRID_COLYMNS_IMAGES_NMB',   'Number of images');\n    define('LANG_CP_GRID_COLYMNS_PREVIEW',      'Preview');\n    define('LANG_CP_GRID_COLYMNS_TO_FILTER',    'Put in filter');\n    define('LANG_CP_SYSTEM_NAME_HINT',          'Used in URLs and database table names<br>Cannot be changed later!');\n    define('LANG_CP_CONTENT_ITEM_ADD',          'Add Entry');\n    define('LANG_CP_CONTENT_ITEM_ADD_CP',       'Add from adminpanel');\n    define('LANG_CP_CONTENT_ITEMS_EDIT',        'Change entries');\n    define('LANG_CP_CONTENT_FIELDS_IS_ADD',     'Add Values to Existing');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S1',     'Select the fields you want to change');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S2',     'These values will replace the fields of the selected items');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_ADD_HINT', '<span class=\"text-danger\">The value will be added to an existing</span>');\n    define('LANG_CP_CONTENT_CATS_ADD',          'Add Category');\n    define('LANG_CP_CONTENT_CATS_EDIT',         'Edit Category');\n    define('LANG_CP_CONTENT_CATS_ORDER',        'Reorder');\n    define('LANG_CP_CONTENT_CATS_ORDER_DRAG',   'Drag categories to reorder and click \"Save\"');\n    define('LANG_CP_CONTENT_CATS_NONE',         'This content has no categories');\n    define('LANG_CP_TRASH',                     'Trash');\n    define('LANG_CP_SHOW_ONLY_IN_TRASH',        'Show only deleted items');\n    define('LANG_CP_CONTENT_ITEM_RESTORE_CONFIRM',  'Restore \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_BASKET_DELETE_CONFIRM',  'Move the \"{title}\" page to trash?');\n    define('LANG_CP_CONTENT_ITEM_DELETE_CONFIRM',  'Delete \"{title}\"?');\n    define('LANG_CP_CONTENT_CATS_TITLES',       'Category title or categories tree');\n    define('LANG_CP_CONTENT_CATS_TITLES_HINT',  'Enter one item per line to create multiple categories<br>Add a hyphen before the title to make a nested category<br><a href=\"https://docs.instantcms.ru/en/manual/content/cats\" target=\"_blank\">Detailed Manual</a>');\n    define('LANG_CP_CONTENT_CATS_BIND',         'Bind parent category properties');\n    define('LANG_CP_BASIC',                     'Basic settings');\n    define('LANG_CP_IS_COLLAPSED',              'Collapsible blocks in the add/edit item form');\n    define('LANG_CP_PUBLICATION',               'Publication');\n    define('LANG_CP_IS_PUB_CONTROL',            'Custom publication date');\n    define('LANG_CP_DISABLE_DRAFTS',            'Disable drafts');\n    define('LANG_CP_IS_PUB_CONTROL_HINT',\t\t'Users with the corresponding permission configured on the \"Permissions\" tab can specify the custom date and publication period for each entry');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS',    'Expired entry action');\n    define('LANG_CP_NOTIFY_END_DATE_DAYS',      'How many days before the end of the publication notify users');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE','Hide');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_DEL','Delete');\n    define('LANG_CP_CATEGORIES_ON',             'Enable categories');\n    define('LANG_CP_CATEGORIES_RECURSIVE',      'Show entries from child categories in parent category');\n    define('LANG_CP_CATEGORIES_EMPTY_ROOT',\t\t'Do not show entries in the root category');\n    define('LANG_CP_CATEGORIES_MULTI',\t\t\t'Allow multiple categories for a single entry');\n    define('LANG_CP_CATEGORIES_CHANGE',         'Allow to change the category of an already existing entry');\n    define('LANG_CP_CATEGORIES_OPEN_ROOT',      'Allow to add entries to the root category');\n    define('LANG_CP_CATEGORIES_ONLY_LAST',      'Allow to add entries only to the last level of nested categories');\n    define('LANG_CP_CATEGORIES_SHOW',           'Show categories list above entries list');\n    define('LANG_CP_CTYPE_CATEGORIES_OFF',      'Categories for this content type were disabled in the <a href=\"%s\">Settings</a>. Categories will not be shown on the site');\n    define('LANG_CP_FOLDERS',                   'Private folders');\n    define('LANG_CP_FOLDERS_ON',                'Private folders enabled');\n    define('LANG_CP_FOLDERS_HINT',              'Users will be able to organize the content in the private folders shown in their profiles');\n    define('LANG_CP_CT_GROUPS',                 'Groups');\n    define('LANG_CP_CT_GROUPS_ALLOW',           'Create in groups');\n    define('LANG_CP_CT_GROUPS_ALLOW_ONLY',      'Create in groups only');\n    define('LANG_CP_COMMENTS',                  'Comments');\n    define('LANG_CP_COMMENTS_REPLACE_LABEL',    'Replacing the phrase for ');\n    define('LANG_CP_COMMENTS_TITLE_PATTERN',    'Comment Block Header Pattern');\n    define('LANG_CP_COMMENTS_TEMPLATE',         'Comments template');\n    define('LANG_CP_COMMENTS_ON',               'Enable comments');\n    define('LANG_CP_RATING',                    'Rating');\n    define('LANG_CP_RATING_ON',                 'Enable rating');\n    define('LANG_CP_TAGS_ON',                   'Enable tags');\n    define('LANG_CP_TAGS_IN_LIST',              'Show tags in list view');\n    define('LANG_CP_TAGS_IN_ITEM',              'Show tags in entry view');\n    define('LANG_CP_PHOTOS',                    'Images');\n    define('LANG_CP_PHOTOS_ON',                 'Main image');\n    define('LANG_CP_PHOTOS_MULTI',              'Additional images');\n    define('LANG_CP_SEOMETA_DEFAULT',           'SEO: Default');\n    define('LANG_CP_SEOMETA',                   'SEO: Entries');\n    define('LANG_CP_SEOMETA_MANUAL_TITLE',      'Custom entry title');\n    define('LANG_CP_SEOMETA_AUTO_KEYS',         'Autogenerate keywords');\n    define('LANG_CP_SEOMETA_AUTO_DESC',         'Autogenerate META-descriptions');\n    define('LANG_CP_SEOMETA_ITEM_TITLE',        'META-title pattern');\n    define('LANG_CP_SEOMETA_ITEM_KEYS',         'META-keys pattern');\n    define('LANG_CP_SEOMETA_ITEM_DESC',         'META-descriptions pattern');\n    define('LANG_CP_SEOMETA_ITEM_H1',           'h1 tag pattern');\n    // deprecated\n    define('LANG_CP_SEOMETA_FIELDS',            ' <span class=\"pattern_fields_panel_hint\">Click on the field to see the available fields.</span><span class=\"pattern_fields_panel\">Available expressions: <b class=\"pattern_fields\">%s</b> More details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>.<span>');\n    define('LANG_CP_SEOMETA_ITEM_DS',           'Overrides the pattern specified for content type categories.'.LANG_CP_SEOMETA_FIELDS);\n    define('LANG_CP_SEOMETA_ITEM_HINT',         'Use the field, inserting their names in braces. For example: <strong>{title}</strong>. You can use the processing of values, more details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>');\n    //\n    define('LANG_CP_SEOMETA_DS_HINT',           'Overrides the pattern specified for content type categories.');\n    define('LANG_CP_SEOMETA_HINT_PANEL',        'Click on the field to see the available fields.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN_DOC',  'More details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN',      'Available expressions: <b class=\"pattern_fields\">%s</b> ');\n    define('LANG_CP_AUTO_URL',                  'Autogenerate URL');\n    define('LANG_CP_FIXED_URL',                 'Keep URL after editing');\n    define('LANG_CP_URL_PATTERN',               'URL pattern');\n    define('LANG_CP_SEOMETA_CATS',              'SEO: Categories');\n    define('LANG_CP_CAT_COVER_SIZES',           'Category Cover Presets');\n    define('LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES', 'List Cover Preset');\n    define('LANG_CP_SEOMETA_CATS_H1',           'Allow custom H1 tag for category pages');\n    define('LANG_CP_SEOMETA_CATS_TITLE',        'Allow custom titles for category pages');\n    define('LANG_CP_SEOMETA_CATS_KEYS',         'Allow custom keywords for categories');\n    define('LANG_CP_SEOMETA_CATS_DESC',         'Allow custom META descriptions for categories');\n    define('LANG_CP_CATS_AUTO_URL',             'Generate URL from category title');\n    define('LANG_CP_CATS_FIRST_LEVEL_SLUG',     'Category URLs are always first level regardless of nesting');\n    define('LANG_CP_LISTVIEW_OPTIONS',          'List view options');\n    define('LANG_CP_PROFILELIST_ON',            'List view in user profiles enabled');\n    define('LANG_CP_LISTVIEW_ON',               'List view enabled');\n    define('LANG_CP_LISTVIEW_OFF_INDEX',        'Disable the list view of the main page of the content type');\n    define('LANG_CP_LISTVIEW_OFF_INDEX_HINT',   'The list will only be available in categories');\n    define('LANG_CP_LIST_OFF_BREADCRUMB',       'Do not show breadcrumbs');\n    define('LANG_CP_LIST_OFF_BREADCRUMB_CTYPE', 'Do not show ctype name in breadcrumbs');\n    define('LANG_CP_LISTVIEW_FILTER',           'Show filter');\n    define('LANG_CP_LISTVIEW_FILTER_EXPAND',    'Expand filter panel');\n    define('LANG_CP_LISTVIEW_STYLE',            'Default list style');\n    define('LANG_CP_LIST_STYLE_NAMES',          'Names for list styles');\n    define('LANG_CP_LIST_STYLE_OPTIONS',        'List styles options');\n    define('LANG_CP_LIST_STYLE_OPTIONS_HINT',   'If the list template supports. In JSON format. An example of the default options in the template source file.');\n    define('LANG_CP_CONTEXT_LIST_STYLE',        'Styles for other lists');\n    define('LANG_CP_CONTEXT_SELECT_LIST',       'Select a list');\n    define('LANG_CP_LISTVIEW_STYLE_SLIDER',     'Slider');\n    define('LANG_CP_LISTVIEW_STYLE_BASIC',      'Basic list');\n    define('LANG_CP_LISTVIEW_STYLE_MASONRY',    'Masonry');\n    define('LANG_CP_LISTVIEW_STYLE_FEATURED',   'Featured list');\n    define('LANG_CP_LISTVIEW_STYLE_TILES',      'Tiles');\n    define('LANG_CP_LISTVIEW_STYLE_TABLE',      'Table');\n    define('LANG_CP_LISTVIEW_STYLE_HINT',       'Templates from the <b>/'.cmsTemplate::TEMPLATE_BASE_PATH.'%s/content</b> folder. You can specify multiple templates. A switch appears in the list.');\n    define('LANG_CP_ITEMVIEW_OPTIONS',          'Entry view options');\n    define('LANG_CP_ITEMVIEW_ON',               'Entry view enabled');\n    define('LANG_CP_ITEMVIEW_FIELDS_GROUP',     'Group the fields');\n\tdefine('LANG_CP_ITEMVIEW_HITS_ON',\t\t\t'Count views (hits)');\n    define('LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW', 'Show view counter');\n    define('LANG_CP_ITEMVIEW_OFF_INFO_BLOCK',\t'Do not show info block');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML',      'Append HTML');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML_HINT', 'Appended HTML code will be shown under each entry');\n    define('LANG_CP_ITEMVIEW_SHARE_CODE',       'Social buttons HTML code');\n    define('LANG_CP_PRIVACY_TYPE',              'How to show private entries in list');\n    define('LANG_CP_PRIVACY_TYPE_HIDE',         'Hide');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_TITLE',   'Show only title');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_ALL',     'Show full');\n    define('LANG_CP_NUMERALS_LABELS',           'Plurals');\n    define('LANG_CP_NUMERALS_1_LABEL',          'One (...)');\n    define('LANG_CP_NUMERALS_2_LABEL',          'Two (...)');\n    define('LANG_CP_NUMERALS_10_LABEL',         'Many (...)');\n    define('LANG_CP_NUMERALS_1_ALABEL',         'One (Accusative)');\n    define('LANG_CP_NUMERALS_2_ALABEL',         'Two (Accusative)');\n    define('LANG_CP_NUMERALS_10_ALABEL',        'Many (Accusative)');\n    define('LANG_CP_NUMERALS_1_GLABEL',         'One (Genitive)');\n    define('LANG_CP_NUMERALS_2_GLABEL',         'Two (Genitive)');\n    define('LANG_CP_NUMERALS_10_GLABEL',        'Many (Genitive)');\n    define('LANG_CP_ACTIONS_LABELS',            'Actions');\n    define('LANG_CP_ACTION_ADD_LABEL',          'Add (...)');\n    define('LANG_CP_LIST_LABELS',               'Headings');\n    define('LANG_CP_LIST_LABEL',                'List heading');\n    define('LANG_CP_PROFILE_LABEL',             'List heading in profile');\n    define('LANG_CP_LIST_LABELS_HINT',          'If not specified, the content type title will be used');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE',    'Relation tab title');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE_HINT', 'If this content type is a parent');\n    define('LANG_CP_TAB',                       'Tab');\n    define('LANG_CP_TAB_TITLE',                 'Tab title');\n    define('LANG_CP_TAB_IS_ACTIVE',             'Tab is enabled');\n    define('LANG_CP_TAB_SHOW_ONLY_OWNER',       'Show tab to the profile owner only');\n    define('LANG_CP_FIELD',                     'Field');\n    define('LANG_CP_FIELD_FORMAT',              'Field validation');\n    define('LANG_CP_FIELD_REGEX',               'Regular expression');\n    define('LANG_CP_FIELD_REGEX_TEXT',          'Enter a regular expression');\n    define('LANG_CP_FIELD_REGEX_TEXT_HINT',     'The specified regular expression must match the value of the field.');\n    define('LANG_CP_FIELD_TYPE',                'Field type');\n    define('LANG_CP_FIELD_TYPE_HINT',           'Attention! Existing data in this field can be deleted!');\n    define('LANG_CP_FIELD_TYPE_OPTS',           'Field options');\n    define('LANG_CP_FIELD_VALUES',              'Default value (or a list of entries)');\n    define('LANG_CP_FIELD_PROFILE_VALUE',       'Get value from the user profile field');\n    define('LANG_CP_FIELD_PROFILE_VALUE_HINT',  'The field can get a default value from the current user profile<br/>Only text boxes and lists');\n    define('LANG_CP_FIELD_TITLE',               'Field title');\n    define('LANG_CP_FIELD_FIELDSET',            'Field group');\n    define('LANG_CP_FIELD_FIELDSET_SELECT',     'Select group');\n    define('LANG_CP_FIELD_FIELDSET_ADD',        'Create new group');\n    define('LANG_CP_FIELD_FIELDSET_ADD_HINT',   'For the current site language');\n    define('LANG_CP_FIELD_HINT',                'Field hint');\n    define('LANG_CP_FIELD_ADD',                 'Add Field');\n    define('LANG_CP_FIELD_CREATED',             'Field &laquo;%s&raquo; has been created');\n    define('LANG_CP_FIELD_DELETE_CONFIRM',      'Delete field \"{title}\"?');\n    define('LANG_CP_FIELD_VISIBILITY',          'Field visibility');\n    define('LANG_CP_FIELD_LABELS',              'Label position');\n    define('LANG_CP_FIELD_LABELS_IN_LIST',      'In list view');\n    define('LANG_CP_FIELD_LABELS_IN_ITEM',      'In entry view');\n    define('LANG_CP_FIELD_LABELS_IN_FORM',      'In form');\n    define('LANG_CP_FIELD_LABEL_NONE',          'Hide');\n    define('LANG_CP_FIELD_LABEL_LEFT',          'Left');\n    define('LANG_CP_FIELD_LABEL_TOP',           'Top');\n    define('LANG_CP_FIELD_IN_LIST',             'Show in list view');\n    define('LANG_CP_FIELD_IN_LIST_CONTEXT',     'For which lists should this be shown');\n    define('LANG_CP_FIELD_NOT_IN_LIST_CONTEXT', 'For which lists do not show');\n    define('LANG_CP_FIELD_IN_ITEM',             'Show in entry view');\n    define('LANG_CP_FIELD_IN_ITEM_POS',         'Field position');\n    define('LANG_CP_FIELD_IN_ITEM_POS_HINT',    'If you select a special widget, set the entry page in the right place widget \"Content Fields\" and configure it.');\n    define('LANG_CP_FIELD_IN_ITEM_POS0',       'In the body of the entry');\n    define('LANG_CP_FIELD_IN_ITEM_POS1',       'On a position in a special widget');\n    define('LANG_CP_FIELD_IN_PROFILE',          'Show in profile');\n    define('LANG_CP_FIELD_IN_LIST_SHORT',       'In list');\n    define('LANG_CP_FIELD_IN_ITEM_SHORT',       'In entry');\n    define('LANG_CP_FIELD_IN_FILTER',           'Show in filter');\n    define('LANG_CP_FIELD_IN_RELATION',         'Show only when parent relation is used');\n    define('LANG_CP_FIELD_PRIVACY',             'Privacy');\n    define('LANG_CP_FIELD_PRIVATE',             'Show the field only to the entry author');\n    define('LANG_CP_FIELD_GROUPS_READ',         'Read access');\n    define('LANG_CP_FIELD_GROUPS_EDIT',         'Write access');\n    define('LANG_CP_FIELD_GROUPS_ADD',          'Add access');\n    define('LANG_CP_FIELD_WRAP',                'Flow and CSS');\n    define('LANG_CP_FIELD_WRAP_TYPE',           'Type');\n    define('LANG_CP_FIELD_WRAP_LTYPE',          'The next field to the right of the current');\n    define('LANG_CP_FIELD_WRAP_RTYPE',          'The next field to the left of the current');\n    define('LANG_CP_FIELD_WRAP_NTYPE',          'Flow none');\n    define('LANG_CP_FIELD_WRAP_ATYPE',          'Auto');\n    define('LANG_CP_FIELD_WRAP_WIDTH',          'Field width');\n    define('LANG_CP_FIELD_WRAP_WIDTH_HINT',     'Not Set - automatic width. Used in conjunction with the unit of measurement, such as 200px, 60%, etc.');\n    define('LANG_CP_FIELD_WRAP_STYLE',          'CSS field wrapper class');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND',      'Dependence to show the field in the form');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HINT', 'The values can be specified separated by commas.');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_F',    'The field depends on');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_SHOW', 'Show the current field if the selected one is equal to');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HIDE', 'Hide the current field if the value of the selected one is equal to');\n    define('LANG_CP_PROPS_NO_CATS',             'Content type &laquo;%s&raquo; has no categories.');\n    define('LANG_CP_PROPS_NO_CATS_ADD',         '<a href=\"%s\">Create Categories</a> to add properties.');\n    define('LANG_CP_PROPS_ADD',                 'Create Property');\n    define('LANG_CP_PROPS_DELETE_CONFIRM',      'Delete the \"{title}\" property?\\n The property will be removed from all categories');\n    define('LANG_CP_PROPS_UNBIND_CONFIRM',      'Unbind property \"{title}\" from current category?');\n    define('LANG_CP_PROPS_BIND',                'Bind property');\n    define('LANG_CP_PROPS_BIND_SC',             'Property successfully bound');\n    define('LANG_CP_PROPS_BIND_RECURSIVE',      'including nested categories');\n    define('LANG_CP_PROPS_UNBIND',              'Unbind property');\n    define('LANG_CP_PROPS_UNBIND_SC',           'Property successfully unbinded');\n    define('LANG_CP_PROP_TITLE',                'Property title');\n    define('LANG_CP_PROP_IS_ACTIVE',            'Show property on the site');\n    define('LANG_CP_PROP_VALUES',               'List items');\n    define('LANG_CP_PROP_VALUES_HINT',          'One item per line');\n    define('LANG_CP_PROP_CATS',                 'Bind property to categories');\n    define('LANG_CP_PROP_UNITS',                'Units');\n    define('LANG_CP_FILTER_ADD',                'Add filter');\n    define('LANG_CP_FILTER_NO_TABLE',           'Filters is disabled, <a href=\"%s\">enable it</a>.');\n    define('LANG_CP_FILTER_TABLE_SUCCESS',      'Filter engine successfully enabled');\n    define('LANG_CP_FILTER_DELETE_CONFIRM',     'Delete filter \"{title}\"?');\n    define('LANG_CP_FILTER_ERROR_SLUG',         'A category with the same URI already exists, specify another');\n    define('LANG_CP_FILTER_DESC_HINT',          'Additional description of the category');\n    define('LANG_CP_FILTER_FIELDS',             'Fields filters');\n    define('LANG_CP_FILTER_PROPS',              'Props filters');\n    define('LANG_CP_FILTER_CATS',               'Categories where the filter will be available');\n    define('LANG_CP_DATASET',                   'Dataset');\n    define('LANG_CP_DATASET_ADD',               'Add Dataset');\n    define('LANG_CP_DATASET_TITLE',             'Dataset title');\n    define('LANG_CP_DATASET_CREATED',           'Dataset &laquo;%s&raquo; has been created');\n    define('LANG_CP_DATASET_DELETE_CONFIRM',    'Delete dataset \"{title}\"?');\n    define('LANG_CP_DATASET_IS_VISIBLE',        'Show dataset on the site');\n    define('LANG_CP_CATS_VIEW',        'Show in categories');\n    define('LANG_CP_CATS_HIDE',        'Do not show in categories');\n    define('LANG_CP_CTYPE_RELATIONS',           'Relations');\n    define('LANG_CP_RELATION',                  'Relation');\n    define('LANG_CP_RELATION_ADD',              'Add Relation');\n    define('LANG_CP_RELATION_TITLE',            'Relation Name');\n    define('LANG_CP_RELATION_DELETE_CONFIRM',   'Delete the Relation?');\n    define('LANG_CP_RELATION_LAYOUT',           'Layout');\n    define('LANG_CP_RELATION_LAYOUT_TYPE',      'Layout Type');\n    define('LANG_CP_RELATION_LAYOUT_LIST',      'List');\n    define('LANG_CP_RELATION_LAYOUT_TAB',       'Tab');\n    define('LANG_CP_RELATION_LAYOUT_HIDDEN',    'None (hidden)');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_EMPTY','Hide when empty');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_TITLE','Hide list title');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_FILTER','Hide filter');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT',     'Records per page');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT_HINT','Leave blank to use Content default');\n    define('LANG_CP_RELATION_CREATED',          'Relation has been created');\n    define('LANG_CP_RELATION_FIELD_CREATED',    'Parent relation field has been created in the \"%s\" Content Type');\n    define('LANG_CP_CONTR_RELATION_FIELD_CREATED', 'Parent relation field has been created in the \"%s\" Component');\n    define('LANG_CP_RELATION_CHILD',            'Child Content');\n    define('LANG_CP_RELATION_TAB_OPTS',         'Tab Options');\n    define('LANG_CP_RELATION_TAB_SEO_HINT',     'Use curly braces to insert parent item\\'s field. Example: <strong>{title}</strong>');\n    define('LANG_CP_RELATION_TAB_SEO_TITLE',    'Tab Title');\n    define('LANG_CP_RELATION_TAB_SEO_KEYS',     'Tab Meta-keywords');\n    define('LANG_CP_RELATION_TAB_SEO_DESC',     'Tab Meta-description');\n    define('LANG_CP_RELATION_ERROR_LEN',        'Are too long names are linkable system types. The name length should not be more than 30 characters.');\n    define('LANG_CP_RELATION_LAYOUT_LIST_ERROR', 'You can create only a single relation with \"List\" type');\n    define('LANG_CP_MENU',                      'Menu');\n    define('LANG_CP_MENU_ADD',                  'Add Menu');\n    define('LANG_CP_MENU_EDIT',                 'Menu Settings');\n    define('LANG_CP_MENU_CREATED',              'Menu &laquo;%s&raquo; has been created');\n    define('LANG_CP_MENU_DELETE',               'Delete Menu');\n    define('LANG_CP_MENU_DELETE_CONFIRM',       'Delete current menu?');\n    define('LANG_CP_MENU_ITEM',                 'Menu Item');\n    define('LANG_CP_MENU_ITEM_PARENT',          'Parent item');\n    define('LANG_CP_MENU_ITEM_CREATED',         'Menu item &laquo;%s&raquo; has been created');\n    define('LANG_CP_MENU_ITEM_TITLE',           'Menu item title');\n    define('LANG_CP_MENU_ITEM_URL',             'URL');\n    define('LANG_CP_MENU_ITEM_ADD',             'Add Menu Item');\n    define('LANG_CP_MENU_ITEM_DELETE_CONFIRM',  'Delete item \"{title}\"?');\n    define('LANG_CP_MENU_ITEM_ACTION',          'Menu item action');\n    define('LANG_CP_MENU_ITEM_ACTION_URL',      'Open URL');\n    define('LANG_CP_MENU_ITEM_ACTION_URL_HINT', 'Internal links should come without a leading slash<br/>External links should start with http://<br/>You can enter <a href=\"https://docs.instantcms.ru/en/manual/menu/special\" target=\"_blank\">Special Links</a>');\n    define('LANG_CP_MENU_ITEM_HIDE_TITLE',      'Show icon only, without title');\n    define('LANG_CP_ICON_SELECT',               'Select an icon');\n    define('LANG_CP_MENU_ITEM_ICON',            'Icon name');\n    define('LANG_CP_MENU_ITEM_ACTION_TARGET',   'Open link in');\n    define('LANG_CP_MENU_ITEM_TARGET_SELF',     'Current window');\n    define('LANG_CP_MENU_ITEM_TARGET_BLANK',    'New window');\n    define('LANG_CP_MENU_ITEM_TARGET_PARENT',   'Parent window');\n    define('LANG_CP_MENU_ITEM_TARGET_TOP',      'On top of all frames');\n    define('LANG_CP_MENU_IS_FIXED',             'This menu cannot be deleted');\n    define('LANG_CP_WIDGETS_SHOW_ALL',          'Show all widgets');\n    define('LANG_CP_WIDGETS_SKIP_IMPORT',       '&laquo;%s&raquo; widget was not imported because not installed');\n    define('LANG_CP_WIDGETS_ROW_NONE',          'You have not created a single row');\n    define('LANG_CP_WIDGETS_COL_VA',           'Vertical Column Alignment');\n    define('LANG_CP_WIDGETS_COL_VA1',          'Top');\n    define('LANG_CP_WIDGETS_COL_VA2',          'Middle');\n    define('LANG_CP_WIDGETS_COL_VA3',          'Bottom');\n    define('LANG_CP_WIDGETS_COL_HA',           'Horizontal column alignment');\n    define('LANG_CP_WIDGETS_COL_HA1',          'Left to right');\n    define('LANG_CP_WIDGETS_COL_HA3',          'Right to Left');\n    define('LANG_CP_WIDGETS_COL_HA4',          'Space Around');\n    define('LANG_CP_WIDGETS_COL_HA5',          'Space Between');\n    define('LANG_CP_WIDGETS_COL_CLASS',         'Extra CSS Column Class');\n    define('LANG_CP_WIDGETS_ROW_CLASS',         'Extra CSS Row Class');\n    define('LANG_CP_WIDGETS_COL_ORDER',         'Visual order column for %s resolutions');\n    define('LANG_CP_WIDGETS_COL_D_ORDER',       'Default visual column order');\n    define('LANG_CP_WIDGETS_COL_CUT_BEFORE',    'Insert line separator before this column');\n    define('LANG_CP_WIDGETS_COL_WIDTH_D',       'Default width');\n    define('LANG_CP_WIDGETS_COL_WIDTH',         'Width for %s resolutions');\n    define('LANG_CP_WIDGETS_COL_WIDTH_ALL',     'Width for all resolutions');\n    define('LANG_CP_WIDGETS_COL_AUTO',          'Variable width content');\n    define('LANG_CP_WIDGETS_ADD_COL',           'Add col');\n    define('LANG_CP_WIDGETS_ROWS_TITLE',        'Row Headers');\n    define('LANG_CP_WIDGETS_ADD_ROW',           'Add row');\n    define('LANG_CP_WIDGETS_IMPORT_SCHEME',     'Import schema');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE',       'Where import?');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE_EX',    'Existing template');\n    define('LANG_CP_WIDGETS_LFILE',             'Schema file');\n    define('LANG_CP_WIDGETS_LFILE_HINT',        'If the schema already exists, it will be replaced with the imported one. Make a backup if necessary.');\n    define('LANG_CP_WIDGETS_EXPORT_SCHEME',     'Export schema');\n    define('LANG_CP_WIDGETS_FROM_TEMPLATE',     'Template from which to import scheme');\n    define('LANG_CP_WIDGETS_SAVE_WIDGETS',      'Export widgets');\n    define('LANG_CP_WIDGETS_COPY_WIDGETS',      'Transfer widgets');\n    define('LANG_CP_WIDGETS_EMPTY_LAYOUT',      'The selected template is no scheme');\n    define('LANG_CP_WIDGETS_LAYOUT_ISUCCESS',   'Schema imported successfully');\n    define('LANG_CP_WIDGETS_ADD_ROW_P',         'Add nested row');\n    define('LANG_CP_WIDGETS_ROW_NO_GUTTERS',    'No gutters');\n    define('LANG_CP_WIDGETS_ROW_CONT',          'Row container');\n    define('LANG_CP_WIDGETS_ROW_CONT_TAG',      'Row container tag');\n    define('LANG_CP_WIDGETS_ROW_CONT_CSS',      'Row container CSS class');\n    define('LANG_CP_WIDGETS_ROW_TAG',           'Row Tag');\n    define('LANG_CP_WIDGETS_COL_TAG',           'Column Tag');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG',   'Parent row Tag');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG_C', 'Parent row Tag CSS class');\n    define('LANG_CP_WIDGETS_ROW_CONT_NO',       'Without container');\n    define('LANG_CP_WIDGETS_ROW_DEL_CONFIRM',   'Delete row?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_COL_DEL_CONFIRM',   'Delete col?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_COL_COUNT',         'Columns count');\n    define('LANG_CP_WIDGETS_COL_NAME',          'Position name');\n    define('LANG_CP_WIDGETS_COL_NAME_HINT',     'Not specified, will be generated automatically. Must be unique.');\n    define('LANG_CP_WIDGETS_COL_TYPE',          'Which column?');\n    define('LANG_CP_WIDGETS_COL_TYPE1',         'Typical');\n    define('LANG_CP_WIDGETS_COL_TYPE2',         'Custom Template');\n    define('LANG_CP_WIDGETS_COL_WRAPPER',       'Column Template');\n    define('LANG_CP_WIDGETS_COL_WRAPPER_H',     'Write the HTML column template. Use the expression {position} at the output location of the widgets.');\n    define('LANG_CP_WIDGETS_PAGE',              'Page');\n    define('LANG_CP_WIDGETS_PAGES',             'Pages');\n    define('LANG_CP_WIDGETS_ALL',               'All widgets');\n    define('LANG_CP_WIDGETS_ADD',               'Add Widget');\n    define('LANG_CP_WIDGETS_ADD_PAGE',          'Add Page');\n    define('LANG_CP_WIDGETS_EDIT_PAGE',         'Edit');\n    define('LANG_CP_WIDGETS_DELETE_PAGE',       'Delete');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS', 'Unbind All Widgets');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS_CONFIRM', 'Unbind all widgets from their positions?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_MISC',              'Miscellaneous');\n    define('LANG_CP_WIDGET_COPY_CONFIRM',       'Copy the widget, duplicating it at the same position?');\n    define('LANG_CP_WIDGET_DELETE_CONFIRM',     'Delete widget?');\n    define('LANG_CP_WIDGET_REMOVE_CONFIRM',     'Are you sure you want to permanently remove the widget from the system?');\n    define('LANG_CP_WIDGET_REMOVE_SUCCESS',     'Widget successfully deleted');\n    define('LANG_CP_WIDGET_PAGE_CREATED',       'Page &laquo;%s&raquo; has been created');\n    define('LANG_CP_WIDGET_PAGE_URLS',          'URL binding');\n    define('LANG_CP_WIDGET_PAGE_BODY_CSS',      'CSS classes for page body tag');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK',      'Positive masks');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK_NOT',  'Negative masks');\n    define('LANG_CP_WIDGETS_UNUSED',            'Unused Widgets');\n    define('LANG_CP_WIDGETS_UNUSED_HINT',       'Here you can place the widgets that have to be temporarily hidden or moved to another page without losing their settings');\n    define('LANG_CP_WIDGETS_BINDED',            'Binded widgets');\n    define('LANG_CP_WIDGETS_BINDED_HINT',       'Drag the widget here to bind it with common settings unlimited number of times');\n    define('LANG_CP_WIDGETS_TEMPLATE',          'Widgets for template');\n    define('LANG_CP_WIDGETS_FA',                'Quick selection of URLs for masks');\n    define('LANG_CP_WIDGETS_FA_TYPE',           'Type');\n    define('LANG_CP_WIDGETS_FA_ITEMS',          'Items');\n    define('LANG_CP_WIDGETS_FA_CATS',           'Categories');\n    define('LANG_CP_WIDGETS_FA_TITLE_OR_URL',   'Title or URL');\n    define('LANG_CP_WIDGETS_FA_ADD_TO',         'Add to the');\n    define('LANG_CP_WIDGETS_FA_TO_POS',         'To positive');\n    define('LANG_CP_WIDGETS_FA_TO_NOT',         'To negative');\n    define('LANG_CP_WIDGETS_FA_ADD',            'Add');\n    define('LANG_CP_WIDGETS_DSCH_ERROR',        'The current admin panel template does not support dynamic widget scheme. <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/widgets\">More details...</a>');\n    define('LANG_CP_WIDGETS_STYLE',             'Style');\n    define('LANG_CP_NOT_SET_ALL',               'If nothing is selected, shown to everyone');\n    define('LANG_CP_USER_PMAILING',             'Create pm messages');\n    define('LANG_CP_USER_ADD',                  'Add user');\n    define('LANG_CP_USER_CREATED',              'User &laquo;%s&raquo; is created');\n    define('LANG_CP_USER_DELETE_CONFIRM',       'Delete a user {nickname}?\\nAll his content and all his uploaded files will be also deleted');\n    define('LANG_CP_USER_DELETED',              'User %s has been deleted');\n    define('LANG_CP_USER_GROUP_ADD',            'Add group');\n    define('LANG_CP_USER_GROUP_EDIT',           'Edit group');\n    define('LANG_CP_USER_GROUP_PERMS',          'Group Permissions');\n    define('LANG_CP_USER_GROUP_DELETE',         'Delete Group');\n    define('LANG_CP_USER_GROUP_DELETE_CONFIRM', 'Delete selected group?\\nUsers will no be deleted');\n    define('LANG_CP_USER_GROUP_CREATED',        'Group &laquo;%s&raquo; has been created');\n    define('LANG_CP_USER_GROUP_IS_PUBLIC',      'Allow to join this group after sign up');\n    define('LANG_CP_USER_GROUP_IS_FILTER',      'Show in user filter');\n    define('LANG_CP_USER_GROUP_ERR_DELETE',     'You can not delete the last group');\n    define('LANG_CP_USER_LOCKING',              'Blocking');\n    define('LANG_CP_USER_LOCKED',               'Blocked');\n    define('LANG_CP_USER_IS_LOCKED',            'Block user');\n    define('LANG_CP_USER_LOCK_UNTIL',           'Block until');\n    define('LANG_CP_USER_LOCK_REASON',          'Blocking reason');\n    define('LANG_CP_USER_NOT_FOUND',            'User %s not found');\n    define('LANG_CP_USER_FIND_BYIP',            'Find all by this IP');\n    define('LANG_CP_USER_RIPE_SEARCH',          'Find in RIPE database');\n    define('LANG_CP_USER_SEARCH_NOT_FOUND',     'No users by specified criteria');\n    define('LANG_CP_USERS_ONLINE',              'Online now');\n    define('LANG_CP_USERS_UNCONFIRMED',         'Unverified Accounts');\n    define('LANG_CP_USERS_ALL',                 'Total Users');\n    define('LANG_CP_USERS_ISDELETED',           'Deleted');\n    define('LANG_CP_USERS_LOCKED',              'Blocked');\n    define('LANG_CP_TOTAL',       'Total');\n    define('LANG_CP_ONMODERATE',  'Moderation');\n    define('LANG_CP_NOTPUB',      'Unpublished');\n    define('LANG_CP_CONTROLLERS_OPTIONS',       'Component options');\n    define('LANG_CP_CONTROLLERS_ADD',           'Install Component');\n    define('LANG_CP_ERR_BACKEND_NOT_FOUND',     'The &laquo;%s&raquo; component has no settings');\n    define('LANG_CP_SETTINGS_SITE',             'Site');\n    define('LANG_CP_SETTINGS_GUI',              'Interface');\n    define('LANG_CP_SETTINGS_FRONTPAGE',        'Homepage');\n    define('LANG_CP_SETTINGS_DATE',             'Dates');\n    define('LANG_CP_SETTINGS_MAIL',             'Mail');\n    define('LANG_CP_SETTINGS_CACHE',            'Cache');\n    define('LANG_CP_SETTINGS_DEBUG',            'Debugging');\n    define('LANG_CP_SETTINGS_DB',               'Database');\n    define('LANG_CP_SETTINGS_DB_CLEAR_SQL_MODE', 'Enable empty sql_mode for MySQL');\n    define('LANG_CP_SETTINGS_DB_CHARSET',       'Charset');\n    define('LANG_CP_SETTINGS_DB_CHARSET_HINT',  'Changing the charset may take a long time');\n    define('LANG_CP_SETTINGS_MISC',             'Misc');\n    define('LANG_CP_SETTINGS_SECURITY',         'Security');\n    define('LANG_CP_SETTINGS_SESSIONS',         'Sessions');\n    define('LANG_CP_SETTINGS_SESSION_MAXLIFETIME', 'Sessions maxlifetime');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_HANDLER', 'Sessions save handler');\n    define('LANG_CP_SETTINGS_SESSION_NAME', 'Session name');\n    define('LANG_CP_SETTINGS_SESSION_NAME_HINT', 'Must be the same for all sites with a single authorization');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH', 'Sessions save path');\n    define('LANG_CP_SETTINGS_SESSIONS_BASEDIR', ', which must enter one of the paths ');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH_HINT', 'For files, the full path must be specified%s. For Memcache \"tcp://\" prefixed must be specified, for example, <b>tcp://localhost:11211</b>. For Memcached must be without the \"tcp://\" prefix, for example, <b>localhost: 11211</b>.');\n    define('LANG_CP_CHECK_SPOOFING_TYPE', 'Control of changing the IP address when entering the admin area');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT1', 'By changing the subnet');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT2', 'Strictly for ip address');\n    define('LANG_CP_SETTINGS_USER_CHANGE_LANG', 'Allow change language by user (substitution prefix in the URL)');\n    define('LANG_CP_SETTINGS_BROWSER_AUTO_LANG', 'Automatically detect language by browser locale');\n    define('LANG_CP_SETTINGS_ALLOW_IPS',        'IP addresses allowed to access the control panel');\n    define('LANG_CP_SETTINGS_ALLOW_IPS_HINT',   'One address per line. Allowed to all if not specified. Current ip address: %s');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY',    'How to detect a visitor\\'s IP');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY_HINT', 'The $_SERVER array key that contains a real user IP address. Do not change this value if you are not sure. The default value fits most needs. For example, enter HTTP_CF_CONNECTING_IP (without quotes) for CloudFlare.');\n    define('LANG_CP_SETTINGS_SITE_ONLY_TO_USERS', 'Site is available only to the authorized users');\n    define('LANG_CP_SETTINGS_SITE_ENABLED',     'Site is online');\n    define('LANG_CP_SETTINGS_SITE_REASON',      'Reason why site is offline');\n    define('LANG_CP_SETTINGS_CHECK_UPDATES',    'Automatically check for InstantCMS updates when admin logs in');\n    define('LANG_CP_SETTINGS_SITENAME',         'Site name');\n    define('LANG_CP_SETTINGS_HOMETITLE',        'Homepage title');\n    define('LANG_CP_SETTINGS_METAKEYS',         'Site keywords (meta keywords)');\n    define('LANG_CP_SETTINGS_METADESC',         'Site description (meta description)');\n    define('LANG_CP_SETTINGS_DISABLE_METAKEYS', 'Disable meta keywords tag');\n    define('LANG_CP_SETTINGS_META_NO_DEFAULT',  'Apply the above-specified words and description to the homepage only');\n    define('LANG_CP_SETTINGS_META_NO_DEFAULT_HINT',  'If disabled, these words will be displayed on pages with no specified parameters.');\n    define('LANG_CP_SETTINGS_PAGE_NUM_IN_TITLE',  'Add page numbers in the title and meta description tags when pagination');\n    define('LANG_CP_SETTINGS_IS_SITENAME_IN_TITLE',  'Add site name to the page title tag');\n    define('LANG_CP_SETTINGS_SET_HEAD_PRELOAD',  'Build HTTP Preload headers');\n    define('LANG_CP_SETTINGS_LANGUAGE',         'Language');\n    define('LANG_CP_SETTINGS_TEMPLATE',         'Default theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_ADMIN',   'Control panel theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_MOBILE',  'Mobile theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_TABLET',  'Tablet theme');\n    define('LANG_CP_SUBMIT_COMPILE',            'Save and compile %s');\n    define('LANG_CP_SETTINGS_TEMPLATE_OPTIONS', 'Theme Settings');\n    define('LANG_CP_SETTINGS_TEMPLATE_INTH',    'Create your own theme');\n    define('LANG_CP_SETTINGS_EDITOR',           'Default HTML editor');\n    define('LANG_CP_SETTINGS_SHOW_BREADCRUMBS', 'Show breadcrumbs?');\n    define('LANG_CP_SETTINGS_HTML_MINIFY',      'Minify HTML');\n    define('LANG_CP_SETTINGS_MERGE_CSS',        'Merge CSS files');\n    define('LANG_CP_SETTINGS_MERGE_JS',         'Merge JS files');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_MERGED',  '&mdash; <a href=\"%s\">Clear cache</a>');\n    define('LANG_CP_SETTINGS_MERGED_CLEANED',   'Folder <b>%s</b> is succesfully cleared');\n    define('LANG_CP_SETTINGS_MERGED_CLEAN_FAIL','Unable to clear the folder <b>%s</b>. Check permissions or clean it manually');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_SUCCESS', 'The cache is successfully cleared');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_FAIL', 'Error clearing cache');\n    define('LANG_CP_SETTINGS_CTYPE_DEF',        'Default content types');\n    define('LANG_CP_SETTINGS_CTYPE_DEF_HINT',\t'Page URLs of this content types will not contain the content type\\'s system name');\n    define('LANG_CP_SETTINGS_FP_SHOW',          'Show on the homepage');\n    define('LANG_CP_SETTINGS_FP_SHOW_NONE',     'Only widgets');\n    define('LANG_CP_SETTINGS_FP_SHOW_PROFILE',  'User profile or authorization form');\n    define('LANG_CP_SETTINGS_FP_SHOW_CONTENT',  'Content: %s');\n    define('LANG_CP_SETTINGS_TIMEZONE',         'Time zone');\n    define('LANG_CP_SETTINGS_ALLOW_USERS_TIMEZONE', 'Allow users to choose their time zone');\n    define('LANG_CP_SETTINGS_DATE_FORMAT',      'PHP date format');\n    define('LANG_CP_SETTINGS_DATE_FORMAT_JS',   'JavaScript date format');\n    define('LANG_CP_SETTINGS_MAIL_TRANSPORT',   'Mail transport');\n    define('LANG_CP_SETTINGS_MAIL_FROM',        'Sender address');\n    define('LANG_CP_SETTINGS_MAIL_FROM_NAME',   'Sender name');\n    define('LANG_CP_SETTINGS_MAIL_SMTP',        'SMTP settings');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_HOST',   'SMTP server');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PORT',   'SMTP port');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_AUTH',   'SMTP authorization required');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_USER',   'SMTP user');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PASS',   'SMTP password');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC',    'SMTP encryption');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_NO', 'Without encryption');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_SSL','SSL');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_TLS','TLS');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME',  'Abstract Counter');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME_HINT',  'Used in the parameters when connecting js and css. Increase after the changes to reset the cache of visitors.');\n    define('LANG_CP_SETTINGS_CACHE_ENABLED',    'Enable caching');\n    define('LANG_CP_SETTINGS_CACHE_METHOD',     'Caching engine');\n    define('LANG_CP_SETTINGS_CACHE_METHOD_NO',  'not available');\n    define('LANG_CP_SETTINGS_CACHE_TTL',        'Cache TTL, sec');\n    define('LANG_CP_SETTINGS_CACHE_HOST',       'Memcached server');\n    define('LANG_CP_SETTINGS_CACHE_PORT',       'Memcached port');\n    define('LANG_CP_SETTINGS_CACHE_MIN_HTML',   'Minify HTML');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN',    'Cookie Domain');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN_HINT', 'Your site\\'s cookies will be distributed to the specified domain and all of its subdomains. End-to-end authentication will be available. If not specified, the cookie will be valid within the current domain.');\n    define('LANG_CP_SETTINGS_CURRENT_DOMAIN',   'Current domain: ');\n    define('LANG_CP_MEMCACHE_NOT_AVAILABLE',    'Memcached module not found');\n    define('LANG_CP_MEMCACHE_CONNECT_ERROR',    'Cannot connect to Memcached - check server and port');\n    define('LANG_CP_FILE_NOT_WRITABLE',         'Cannot overwrite file \"%s\". Set write permissions for it.');\n    define('LANG_CP_SETTINGS_NOT_WRITABLE',     'Configuration file is not writable!');\n    define('LANG_CP_SETTINGS_TPL_NOT_WRITABLE', 'Template configuration file is not writable!');\n    define('LANG_CP_SAVE_SUCCESS',              'Settings saved successfully');\n    define('LANG_CP_ORDER_SUCCESS',             'The order was successfully saved');\n    define('LANG_CP_PERMISSIONS_SUCCESS',       'The access rules saved successfully');\n    define('LANG_CP_SETTINGS_DEBUG_MODE',       'Debug mode enabled');\n    define('LANG_CP_SETTINGS_EMULATE_LAG',      'Emulate network lag');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN',      'Clear cache');\n    define('LANG_CP_ADDONS_DATA_ERROR',         'Error getting data, try again later.');\n    define('LANG_CP_ADDONS_CURL_ERROR',         'Browse the add-ons catalog failed, because CURL is not available on the server. You can select addons from a <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">official add-ons catalog</a>.');\n    define('LANG_CP_INSTALL_PACKAGE_LINK_HINT', 'For example, by copying a download link from the <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">official add-ons catalog</a>');\n    define('LANG_CP_INSTALL_BY_LINK',           'Install from URL');\n    define('LANG_CP_OFICIAL_ADDONS',            'Add-ons catalog');\n    define('LANG_CP_INSTALL_PACKAGE',           'Install Extension Package');\n    define('LANG_CP_DO_INSTALL',                'Install');\n    define('LANG_CP_DO_UPDATE',                 'Update');\n    define('LANG_CP_LAST_UPDATE',               'Last update');\n    define('LANG_CP_INSTALL_COMPATIBILITY_YES', 'Compatible with your InstantCMS version');\n    define('LANG_CP_INSTALL_COMPATIBILITY_NO',  'Not tested with your InstantCMS version');\n    define('LANG_CP_NO_ADDONS',                 'No add-ons for your request');\n    define('LANG_CP_FIND_ADDON_TITLE',          'Search by name of the add-on');\n    define('LANG_CP_FIND_ADDON_FREE',           'Only free');\n    define('LANG_CP_FIND_ADDON_BUY',            'Only paid');\n    define('LANG_CP_FIND_FOUND',                'Total on request');\n    define('LANG_CP_PACKAGE_VIDEO',             'Video');\n    define('LANG_CP_PACKAGE_VIDEO_TITLE',       'Video review');\n    define('LANG_CP_PACKAGE_DEMO',              'Demo');\n    define('LANG_CP_PACKAGE_BUY',               'Buy for %s');\n    define('LANG_CP_PACKAGE_BUY_UPDATE',        'Update available');\n    define('LANG_CP_PACKAGE_INSTALLEDT',        'Installed');\n    define('LANG_CP_PACKAGE_INSTALLED_HINT',    '%s installed');\n    define('LANG_CP_ADDDONS_DS_INSTALLED',      'Installed');\n    define('LANG_CP_PACKAGE_DELETE_CONTROLLERS', 'Deleting a \u00ab%s\u00bb component files');\n    define('LANG_CP_PACKAGE_DELETE_WIDGETS',     'Deleting a \u00ab%s\u00bb widget files');\n    define('LANG_CP_PACKAGE_DELETE_HINT',       'We strongly recommend that you manually delete all the files listed below, they are no longer used. InstantCMS does not have permission to delete (and should not).');\n    define('LANG_CP_INSTALL_PACKAGE_DONE',      'Installation completed');\n    define('LANG_CP_INSTALL_PACKAGE_DONE_INFO', 'Extension package has been successfully installed');\n    define('LANG_CP_INSTALL_PACKAGE_NOT_CLEARED', 'The <b>%s</b> folder has not been cleared due to lack of permissions, clear it manually');\n    define('LANG_CP_INSTALL_PACKAGE_INFO',      'Package Info');\n    define('LANG_CP_INSTALL_PACKAGE_FILE',      'Package file');\n    define('LANG_CP_INSTALL_PACKAGE_FILE_HINT', 'File with the <b>.zip</b> extension');\n    define('LANG_CP_INSTALL_ERR_HINT',          'Result');\n    define('LANG_CP_INSTALL_ERR_FIX',           'Solution');\n    define('LANG_CP_INSTALL_ERR_WA',            'Workaround');\n    define('LANG_CP_INSTALL_NOT_WRITABLE',      'Folder <b>%s</b> is not writable');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_CUSTOM', 'Click \"Continue\" if you unzipped the package manually into a directory <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_HINT', 'Automatic upload is impossible');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_FIX',  'Make this folder writable and reload this page');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_WA',   'Change the file extension to <b>.zip</b>, unpack and upload its contents to the <b>%s</b> folder');\n    define('LANG_CP_INSTALL_NOT_ZIP',           'Server does not support automatic ZIP-archive extraction');\n    define('LANG_CP_INSTALL_NOT_ZIP_HINT',      'Automatic extraction is impossible');\n    define('LANG_CP_INSTALL_NOT_ZIP_FIX',       'Request your hoster to install the <b>ZipArchive</b> class for PHP on your server');\n    define('LANG_CP_INSTALL_NOT_ZIP_WA',        'Change file extension to <b>.zip</b>, unpack and upload its contents to the <b>%s</b> folder');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE', 'Server does not support the function parse_ini_file');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_HINT', 'Installing add-ons is not possible');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_FIX', 'Please contact the hoster to enable the <b>parse_ini_file</b> function for PHP on your server');\n    define('LANG_CP_INSTALL_ERROR',             'Package installation error');\n    define('LANG_CP_INSTALL_PERM_ERROR',        'The \"%s\" file is not readable');\n    define('LANG_CP_INSTALL_ZIP_ERROR',         'Package extraction error');\n    define('LANG_CP_INSTALL_FTP_NOTICE',        'To install the package you must provide the details of an FTP-user that has permissions to create folders and files.');\n    define('LANG_CP_INSTALL_FTP_PRIVACY',       'The details are not stored or transferred anywhere');\n    define('LANG_CP_PACKAGE_DEPENDENT_TYPE',      'Requires installed %s - <a href=\"%s\" target=\"_blank\">%s</a>');\n    define('LANG_CP_PACKAGE_DEPENDENT_COMPONENT', 'component');\n    define('LANG_CP_PACKAGE_DEPENDENT_WIDGET',    'widget');\n    define('LANG_CP_INSTALLED',     'installed');\n    define('LANG_CP_NOT_INSTALLED', 'not installed');\n    define('LANG_CP_PACKAGE_AUTHOR',            'Package author');\n    define('LANG_CP_PACKAGE_DESCRIPTION',       'Package description');\n    define('LANG_CP_PACKAGE_CONTENTS',          'Package contents');\n    define('LANG_CP_PACKAGE_DEPENDS',           'Package dependencies');\n    define('LANG_CP_PACKAGE_DEPENDS_CORE',      'Required core version');\n    define('LANG_CP_PACKAGE_DEPENDS_PACKAGE',   'Required installed package version');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_INSTALL', 'Component installation package');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_UPDATE', 'Component service pack');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_INSTALL', 'Widget installation package');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_UPDATE', 'Widget service pack');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_UPDATE', 'InstantCMS service pack');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_INSTALL', 'InstantCMS service pack');\n    define('LANG_CP_PACKAGE_DUBLE_INSTALL', 'Package version %s is already installed. If you want to update it, select the corresponding service pack. If you want to re-install the package, remove the installed version first.');\n    define('LANG_CP_PACKAGE_UPDATE_ERROR', '%s \"%s\" has version <b>%s</b>. You have version <b>%s</b> installed. Select the package with a larger version number to update.');\n    define('LANG_CP_PACKAGE_UPDATE_IS_UPDATED', 'The same version of the package is already installed. No update required');\n    define('LANG_CP_PACKAGE_TYPE', 'Package type');\n    define('LANG_CP_PACKAGE_NONAME', 'Unknown author');\n    define('LANG_CP_PACKAGE_UPDATE_NOINSTALL', 'Unable to install the update package because the extension that is being updated is not installed');\n    define('LANG_CP_COMPONENT_IS_DELETED',      'Component \"%s\" has been successfully removed');\n    define('LANG_CP_DELETE_COMPONENT_CONFIRM',  'Delete component \"{title}\"?');\n    define('LANG_CP_FTP_ACCOUNT',               'FTP account');\n    define('LANG_CP_FTP_HOST',                  'Server');\n    define('LANG_CP_FTP_PORT',                  'Port');\n    define('LANG_CP_FTP_USER',                  'Username');\n    define('LANG_CP_FTP_PASS',                  'Password');\n    define('LANG_CP_FTP_PATH',                  'Site root path');\n    define('LANG_CP_FTP_PATH_HINT',             '<a href=\"https://docs.instantcms.ru/en/manual/addons/ftppath\" target=\"_blank\">How to specify correct path?</a>');\n    define('LANG_CP_CHECK',                     'Check');\n    define('LANG_CP_FTP_IS_PASV',               'Passive transfer mode');\n    define('LANG_CP_FTP_CONNECT_FAILED',        'Connection failed. Verify that the host and port are correct');\n    define('LANG_CP_FTP_AUTH_FAILED',           'Connection failed. Verify the username and password are correct');\n    define('LANG_CP_FTP_UPLOAD_FAILED',         'File copy error. Make sure the path and permissions are correct');\n    define('LANG_CP_FTP_MKDIR_FAILED',          'Failed to create the folder. Make sure the path and permissions are correct');\n    define('LANG_CP_FTP_NO_ROOT',\t\t\t\t'Error: the %s folder not found on the server');\n    define('LANG_CP_FTP_BAD_ROOT',\t\t\t\t'Bad root path: InstantCMS 2 not found in <strong>%s</strong>');\n    define('LANG_CP_FTP_CHECK',\t\t\t\t    'Checking the FTP connection');\n    define('LANG_CP_FTP_CONNECTION_INFO',       'Connection to %s');\n    define('LANG_CP_FTP_NO_ERRORS',             'The connection is established and configured correctly.');\n    define('LANG_CP_FTP_ROOT_LIST_TITLE',       'List of connection files and directories');\n    define('LANG_CP_FTP_SAVE_TO_SESSION',   'Remember FTP details for the current session');\n    define('LANG_CP_FTP_SAVE_TO_SESSION_HINT', 'Not safe if the extension is not from a trusted author');\n    define('LANG_CP_FTP_SKIP',\t\t\t\t'Skip this step');\n    define('LANG_CP_FTP_SKIP_HINT',\t\t\t'Skip this step if automatic FTP upload is impossible and you follow the manual installation method described in the <a href=\"https://docs.instantcms.ru/en/manual/addons\">Manual</a>');\n    define('ERR_VALIDATE_UNIQUE_FIELD',         'Field already exists');\n    define('LANG_CP_BACK_TO_SITE',              'Back to Site');\n    define('LANG_CP_3RDPARTY_CREDITS',          'Third-party credits');\n    define('LANG_MODERATOR_ADD',             'Add moderator');\n    define('LANG_MODERATOR_ADD_HINT',        'Enter the email of a user whom you want to assign as a moderator');\n    define('LANG_MODERATOR_APPROVED_COUNT',  'Approved');\n    define('LANG_MODERATOR_DELETED_COUNT',   'Deleted');\n    define('LANG_MODERATOR_IDLE_COUNT',      'Idle');\n    define('LANG_MODERATOR_ASSIGNED_DATE',   'Assigned');\n    define('LANG_MODERATOR_TRASH_LEFT_TIME', 'Trash items lifetime');\n    define('LANG_MODERATOR_ALREADY',         'User %s is already a moderator');\n    define('LANG_MODERATORATION_OPTIONS',    'Moderation options');\n    define('LANG_MODERATION_TRASH_NO_REMOVE', 'Evermore');\n    define('LANG_MODERATION_NOT_NEEDED',      'Not needed');\n    define('LANG_MODERATION_IN_TRASH',        'In the trash');\n    define('LANG_MODERATION_IN_TRASH_TIME',   'Is in the trash, will be deleted through %s');\n    define('LANG_MODERATION_LOGS',            'Moderation logs');\n    define('LANG_CP_CHECK_NESTED',                  'Checking ns trees');\n    define('LANG_CP_NS_NO_TABLES',                  'There are no tables available to check');\n    define('LANG_CP_NS_SUCCESSFUL',                 'Successful checks');\n    define('LANG_CP_NS_UNSUCCESSFUL',               'Errors found');\n    define('LANG_CP_NS_FIX',                        'Fix');\n    define('LANG_CP_NS_FIX_SUCCESS',                'Nested sets for %s table is restored');\n    define('LANG_CP_NS_FIX_ERROR',                  'Failed to restore nested sets for %s table');\n    define('LANG_CP_SCHEDULER',                     'Scheduler');\n    define('LANG_CP_SCHEDULER_TASK',                'Task');\n    define('LANG_CP_SCHEDULER_TASK_ADD',            'Add Task');\n    define('LANG_CP_SCHEDULER_TASK_EDIT',           'Edit Task');\n    define('LANG_CP_SCHEDULER_TASK_CONTROLLER',     'Component');\n    define('LANG_CP_SCHEDULER_TASK_HOOK',           'Hook');\n    define('LANG_CP_SCHEDULER_TASK_PERIOD',         'Interval, minutes');\n    define('LANG_CP_SCHEDULER_IS_STRICT_PERIOD',    'Strict adherence to the period');\n    define('LANG_CP_SCHEDULER_TASK_LAST_RUN',       'Last run');\n    define('LANG_CP_SCHEDULER_TASK_DELETE_CONFIRM', 'Delete task?');\n    define('LANG_CP_SCHEDULER_TASK_CREATED',        'The task has been created');\n    define('LANG_CP_SCHEDULER_TASK_IS_ACTIVE',      'Task is active');\n    define('LANG_CP_SCHEDULER_TASK_RUN',            'Run now');\n    define('LANG_CP_SCHEDULER_TASK_RAN',            'Task &laquo;%s&raquo; was executed %s');\n    define('LANG_CP_SCHEDULER_TASK_RUN_FAIL',       'Failed to execute task &laquo;%s&raquo;');\n    define('LANG_CP_UPDATE_CHECK',                  'Check for InstantCMS updates');\n    define('LANG_CP_UPDATE_DATE',                   'Release date');\n    define('LANG_CP_UPDATE_DOWNLOAD',               'Download package');\n    define('LANG_CP_UPDATE_DOWNLOAD_FAIL',          'Unable to download the update package');\n    define('LANG_CP_UPDATE_INSTALL',                'Install Update');\n    define('LANG_CP_UPDATE_AVAILABLE',              '%s is available for update');\n    define('LANG_CP_UPDATE_NOT_AVAILABLE',          'No updates. You are using the latest version %s of %s.');\n    define('LANG_CP_UPDATE_CHECK_FAIL',             'Unable to check for updates');\n    define('LANG_CP_UPDATE_MANUAL_1',               'Automatic download failed because CURL is not available on the server.');\n    define('LANG_CP_UPDATE_MANUAL_2',               'Download the update archive manually and <a href=\"'.href_to('admin', 'install').'\">Install</a> it');\n    define('LANG_HELP_URL_CONTENT',                 'https://docs.instantcms.ru/en/manual/content');\n    define('LANG_HELP_URL_CONTENT_CATS',            'https://docs.instantcms.ru/en/manual/content/cats');\n    define('LANG_HELP_URL_CTYPES',                  'https://docs.instantcms.ru/en/manual/ctypes');\n    define('LANG_HELP_URL_CTYPES_BASIC',            'https://docs.instantcms.ru/en/manual/ctypes/add');\n    define('LANG_HELP_URL_CTYPES_LABELS',           'https://docs.instantcms.ru/en/manual/ctypes/labels');\n    define('LANG_HELP_URL_CTYPES_FIELDS',           'https://docs.instantcms.ru/en/manual/ctypes/fields');\n    define('LANG_HELP_URL_CTYPES_FIELD',            'https://docs.instantcms.ru/en/manual/ctypes/fields/add');\n    define('LANG_HELP_URL_CTYPES_PROPS',            'https://docs.instantcms.ru/en/manual/ctypes/props');\n    define('LANG_HELP_URL_CTYPES_PROP',             'https://docs.instantcms.ru/en/manual/ctypes/props/add');\n    define('LANG_HELP_URL_CTYPES_FILTERS',          'https://docs.instantcms.ru/en/manual/ctypes/filters');\n    define('LANG_HELP_URL_CTYPES_FILTERS_ADD',      'https://docs.instantcms.ru/en/manual/ctypes/filters/add');\n    define('LANG_HELP_URL_CTYPES_DATASETS',         'https://docs.instantcms.ru/en/manual/ctypes/datasets');\n    define('LANG_HELP_URL_CTYPES_DATASET',          'https://docs.instantcms.ru/en/manual/ctypes/datasets/add');\n    define('LANG_HELP_URL_CTYPES_RELATIONS',        'https://docs.instantcms.ru/en/manual/ctypes/relations');\n    define('LANG_HELP_URL_CTYPES_PERMS',            'https://docs.instantcms.ru/en/manual/ctypes/permissions');\n    define('LANG_HELP_URL_CTYPES_MODERATORS',       'https://docs.instantcms.ru/en/manual/ctypes/moderators');\n    define('LANG_HELP_URL_MENU',                    'https://docs.instantcms.ru/en/manual/menu');\n    define('LANG_HELP_URL_WIDGETS',                 'https://docs.instantcms.ru/en/manual/widgets');\n    define('LANG_HELP_URL_WIDGETS_CFG',             'https://docs.instantcms.ru/en/manual/widgets/config');\n    define('LANG_HELP_URL_WIDGETS_PAGES',           'https://docs.instantcms.ru/en/manual/widgets/pages');\n    define('LANG_HELP_URL_COMPONENTS',              'https://docs.instantcms.ru/en/manual/components');\n    define('LANG_HELP_URL_INSTALL',                 'https://docs.instantcms.ru/en/manual/addons');\n    define('LANG_HELP_URL_COM_FORMS',               'https://docs.instantcms.ru/en/manual/components/forms');\n    define('LANG_HELP_URL_COM_REDIRECT',            'https://docs.instantcms.ru/en/manual/components/redirect');\n    define('LANG_HELP_URL_COM_AUTH',                'https://docs.instantcms.ru/en/manual/components/auth');\n    define('LANG_HELP_URL_COM_ACTIVITY',            'https://docs.instantcms.ru/en/manual/components/activity');\n    define('LANG_HELP_URL_COM_GROUPS',              'https://docs.instantcms.ru/en/manual/components/groups');\n    define('LANG_HELP_URL_COM_RECAPTCHA',           'https://docs.instantcms.ru/en/manual/components/recaptcha');\n    define('LANG_HELP_URL_COM_COMMENTS',            'https://docs.instantcms.ru/en/manual/components/comments');\n    define('LANG_HELP_URL_COM_IMAGES',\t\t\t\t'https://docs.instantcms.ru/en/manual/components/images');\n    define('LANG_HELP_URL_COM_SUBSCRIPTIONS',\t\t'https://docs.instantcms.ru/en/manual/components/subscriptions');\n    define('LANG_HELP_URL_COM_USERS',               'https://docs.instantcms.ru/en/manual/components/users');\n    define('LANG_HELP_URL_COM_MODERATION',          'https://docs.instantcms.ru/en/manual/components/moderation');\n    define('LANG_HELP_URL_COM_USERS_MIGRATON',      'https://docs.instantcms.ru/en/manual/components/users/migrations');\n    define('LANG_HELP_URL_COM_MARKITUP',            'https://docs.instantcms.ru/en/manual/components/markitup');\n    define('LANG_HELP_URL_COM_RATING',              'https://docs.instantcms.ru/en/manual/components/rating');\n    define('LANG_HELP_URL_COM_SEARCH',              'https://docs.instantcms.ru/en/manual/components/search');\n    define('LANG_HELP_URL_COM_TAGS',                'https://docs.instantcms.ru/en/manual/components/tags');\n    define('LANG_HELP_URL_COM_RSS',                 'https://docs.instantcms.ru/en/manual/components/rss');\n    define('LANG_HELP_URL_COM_SITEMAP',             'https://docs.instantcms.ru/en/manual/components/sitemap');\n    define('LANG_HELP_URL_COM_PHOTOS',\t\t\t\t'https://docs.instantcms.ru/en/manual/components/photos');\n    define('LANG_HELP_URL_USERS',                   'https://docs.instantcms.ru/en/manual/users');\n    define('LANG_HELP_URL_USERS_USER',              'https://docs.instantcms.ru/en/manual/users/user');\n    define('LANG_HELP_URL_USERS_GROUP',             'https://docs.instantcms.ru/en/manual/users/group');\n    define('LANG_HELP_URL_SETTINGS',                'https://docs.instantcms.ru/en/manual/settings');\n    define('LANG_HELP_URL_SETTINGS_GLOBAL',         'https://docs.instantcms.ru/en/manual/settings/global');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER',      'https://docs.instantcms.ru/en/manual/settings/scheduler');\n    define('LANG_HELP_URL_CHECK_NESTED',            'https://docs.instantcms.ru/en/manual/settings/check_nested');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER_TASK', 'https://docs.instantcms.ru/en/manual/settings/scheduler/task');\n    define('LANG_HELP_URL_EVENTS',                  'https://docs.instantcms.ru/en/manual/settings/events');\n    define('LANG_HELP_URL_COM_MESSAGES',                'https://docs.instantcms.ru/en/manual/components/messages');\n    define('LANG_ZIP_ERROR_10', 'File already exists');\n    define('LANG_ZIP_ERROR_21', 'Inconsistent ZIP-archive');\n    define('LANG_ZIP_ERROR_18', 'Invalid argument');\n    define('LANG_ZIP_ERROR_14', 'Malloc failure');\n    define('LANG_ZIP_ERROR_9', 'No such file');\n    define('LANG_ZIP_ERROR_19', 'Not a zip archive');\n    define('LANG_ZIP_ERROR_11', 'Unable to open the file');\n    define('LANG_ZIP_ERROR_5', 'Read error');\n    define('LANG_ZIP_ERROR_4', 'Seek error');\n    define('LANG_INSTALL_NOTICE_SYSTEM_FILE', 'Attention! Package replaces some CMS system files. It is not recommended to continue the installation package if you are unsure of the developer.');\n    define('LANG_ADMIN_NOTICES', 'Notifications');\n    define('LANG_ADMIN_ACCESS_DENIED_BY_IP', 'Access from your ip address is restricted');\n    define('LANG_MAILCHECK_ERROR', 'When sending a letter error occurred: <br><b>%s</b>');\n    define('LANG_MAILCHECK_SUCCESS', 'A letter has been sent successfully');\n    define('LANG_MAILCHECK_MENU', 'Check mail settings');\n    define('LANG_CP_DB_CHARSET_HINT', 'Attention! Before changing this option, please backup your database!');\n    define('LANG_MAILCHECK_TO', 'Send message to');\n    define('LANG_MAILCHECK_SUBJECT', 'Message subject');\n    define('LANG_MAILCHECK_BODY', 'Message contents');\n    define('LANG_EVENTS_MANAGEMENT', 'Events management');\n    define('LANG_EVENTS_MANAGEMENT_HINT', 'Attention! This section is for advanced users. Use only if you know exactly what you are doing.');\n    define('LANG_EVENTS_REFRESH',    'Update events in the database');\n    define('LANG_EVENTS_DELETED',    'These events are no longer available');\n    define('LANG_EVENTS_LISTENER',   'Component');\n    define('LANG_EVENTS_EVENT_NAME', 'Event');\n    define('LANG_EVENTS_ALLOW_NEW',  'Available new events');\n    define('LANG_EVENTS_SUCCESS',  'Events in the database are updated');\n    define('LANG_CONFIRM_LOGIN',  'Security Check');\n    define('LANG_CONFIRM_LOGIN_HINT',  'You are trying to log in under the name of \"%s\" from an unusual location');\n    define('LANG_CONFIRM_LOGIN_HINT1',  'In order to confirm ownership of the accaunt, we ask you to enter the password');\n    define('LANG_ADMIN_IS_DELETED', 'Deleted?');\n    define('LANG_ADMIN_CONTROLLER_SLUG', 'Controller Url');\n    define('LANG_CP_QUEUE', 'Queue');\n    define('LANG_CP_QUEUE_TITLE', '%s queue');\n    define('LANG_CP_QUEUE_DATE_CREATED', 'Date Created');\n    define('LANG_CP_QUEUE_DATE_STARTED', 'Run Date');\n    define('LANG_CP_QUEUE_STATUS', 'Status');\n    define('LANG_CP_QUEUE_QUEUE_RESTART', 'Error corrected, returned to the queue');\n    define('LANG_CP_QUEUE_STATUS1', 'In progress');\n    define('LANG_CP_QUEUE_STATUS2', 'Blocked with error');\n    define('LANG_CP_QUEUE_STATUS3', 'Pending');\n    define('LANG_CP_QUEUE_STATUS4', 'Waiting for 2nd time');\n    define('LANG_CP_SUBJECT', 'Subject');\n    define('LANG_CP_FIELD_AUTHOR_ACCESS', 'Author or owner access');\n    define('LANG_CP_FIELD_READING',       'Reading');\n    define('LANG_CP_FIELD_EDITING',       'Editing');\n    define('LANG_WD_CONTENT_FILTER_DETECT', 'Autodetect');\n    define('LANG_CP_TEMPLATE_NO_ICONS_SELECT', 'The template does not support icon selection.');\n    define('LANG_CP_TEMPLATE_ICONS_PHP', 'Copy as PHP code');\n    define('LANG_CP_TEMPLATE_ICONS', 'List of template icons');\n    define('LANG_CP_COMPILE_TIME', 'Compile time %s sec.');\n    define('LANG_CP_FORMAT', 'Format');\n", "<?php\n\n    define('LANG_ADMIN_CONTROLLER',     '\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_NEVER',                      '\u041d\u0438\u043a\u043e\u0433\u0434\u0430');\n    define('LANG_CP_INSTALL_FOLDER_EXISTS',     '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 <b>/install</b> \u043d\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0430.');\n    define('LANG_CP_TOOLTIP_HELP',              '\u041f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043a \u0440\u0430\u0437\u0434\u0435\u043b\u0443');\n    define('LANG_CP_TOOLTIP_HELP_HINT',         '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_DASHBOARD_STATS',           '\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430');\n    define('LANG_CP_DASHBOARD_SYSINFO',         '\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0435');\n    define('LANG_CP_DASHBOARD_RESOURCES',       '\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b');\n    define('LANG_CP_DASHBOARD_NEWS',            '\u041d\u043e\u0432\u043e\u0441\u0442\u0438 InstantCMS');\n    define('LANG_CP_DASHBOARD_NEWS_O',          '\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_DASHBOARD_NEWS_A',          '\u0411\u043b\u043e\u0433\u0438');\n    define('LANG_CP_PAGE_OPTIONS',              '\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_SU',                        '\u0421\u0438\u0441\u0442\u0435\u043c\u0430');\n    define('LANG_CP_SU_DISK',                   '\u041c\u0435\u0441\u0442\u043e \u043d\u0430 \u0434\u0438\u0441\u043a\u0435');\n    define('LANG_CP_SU_CPU',                    '\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430');\n    define('LANG_CP_CACHE',                     '\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_WO_AUTO_GROUP',             '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_WO_AUTO_GROUP_HINT',        '\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0445 \u0433\u0440\u0443\u043f\u043f \u0432\u0438\u0434\u0436\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0433\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_DASHBOARD_SI_ICMS',         '\u0412\u0435\u0440\u0441\u0438\u044f InstantCMS');\n    define('LANG_CP_DASHBOARD_SI_WS',           '\u0412\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_DASHBOARD_SQL_SERVER',      'Mysql \u0441\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_DASHBOARD_APACHE_NGINX',    '\u0434\u0432\u0443\u0445\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f, \u0432\u0435\u0440\u0441\u0438\u044f Nginx - %s');\n    define('LANG_CP_DASHBOARD_SI_PHP',          '\u0412\u0435\u0440\u0441\u0438\u044f PHP');\n    define('LANG_CP_DASHBOARD_SI_ML',           '\u041b\u0438\u043c\u0438\u0442 \u043f\u0430\u043c\u044f\u0442\u0438');\n    define('LANG_CP_DASHBOARD_SI_IP',           'IP \u0430\u0434\u0440\u0435\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430');\n    define('LANG_CP_DASHBOARD_SI_ROOT',         '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_DASHBOARD_SI_SESSION_TYPE', '\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_DASHBOARD_SI_SESSION',      '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_DASHBOARD_SI_MAX',          '\u041c\u0430\u043a\u0441. \u0440\u0430\u0437\u043c\u0435\u0440 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438');\n    define('LANG_CP_DASHBOARD_SI_ION',          '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d IonCube Loader');\n    define('LANG_CP_DASHBOARD_SI_ZEND',         '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d Zend OPcache');\n    define('LANG_CP_DASHBOARD_SI_ZENDG',        '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d Zend Guard Loader');\n\n    define('LANG_CP_DASHBOARD_LEAD_SPONSOR',    '\u0413\u0435\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u043e\u043d\u0441\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430');\n\n    define('LANG_CP_DASHBOARD_LINKS_SITE',      '\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430');\n    define('LANG_CP_DASHBOARD_LINKS_DOCS',      '\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f');\n    define('LANG_CP_DASHBOARD_LINKS_ADDONS',    '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_DASHBOARD_LINKS_FORUMS',    '\u0424\u043e\u0440\u0443\u043c\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430');\n\n    define('LANG_CP_DASHBOARD_PREMIUM',         '\u041f\u0440\u0435\u043c\u0438\u0443\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b');\n    define('LANG_CP_DASHBOARD_BILLING',         '\u0411\u0438\u043b\u043b\u0438\u043d\u0433');\n    define('LANG_CP_DASHBOARD_BILLING_HINT',    '\u0417\u0430\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_DASHBOARD_INVIDEO_HINT',    '\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434\u0435\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_DASHBOARD_INMAPS_HINT',     '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435');\n\n    define('LANG_CP_DASHBOARD_LINKS_DONATE',    '\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442');\n    define('LANG_CP_DASHBOARD_LINKS_SPONSORS',  '\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0441\u043f\u043e\u043d\u0441\u043e\u0440\u043e\u0432');\n\n    define('LANG_CP_SECTION_INDEX',             '\u0413\u043b\u0430\u0432\u043d\u0430\u044f');\n    define('LANG_CP_SECTION_CTYPES',            '\u0422\u0438\u043f\u044b \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_SECTION_CONTENT',           '\u041a\u043e\u043d\u0442\u0435\u043d\u0442');\n    define('LANG_CP_SECTION_USERS',             '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438');\n    define('LANG_CP_SECTION_GROUPS',            '\u0413\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_SECTION_MENU',              '\u041c\u0435\u043d\u044e');\n    define('LANG_CP_SECTION_WIDGETS',           '\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_SECTION_CONTROLLERS',       '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b');\n    define('LANG_CP_SECTION_SETTINGS',          '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_SECTION_UPDATE',            '\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f');\n\n    define('LANG_CP_SELECTED_EDIT',             '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c');\n    define('LANG_CP_SELECTED_DELETE',           '\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n\n    define('LANG_CP_CTYPES_ADD',                '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPES_EDIT',               '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_CREATED',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_CTYPE_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \"{title}\"?');\n    define('LANG_CP_CTYPE_ERROR_NAME',          '\u041d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u043c\u0435\u043d\u0435\u043c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_TO_LIST',             '\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_NOT_SET',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d');\n\n    define('LANG_CP_CTYPE_SETTINGS',            '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_CTYPE_LABELS',              '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438');\n    define('LANG_CP_CTYPE_FIELDS',              '\u041f\u043e\u043b\u044f');\n    define('LANG_CP_CTYPE_PROPS',               '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430');\n    define('LANG_CP_CTYPE_PERMISSIONS',         '\u0414\u043e\u0441\u0442\u0443\u043f');\n    define('LANG_CP_CTYPE_DATASETS',            '\u041d\u0430\u0431\u043e\u0440\u044b');\n    define('LANG_CP_CTYPE_FILTERS',             '\u0424\u0438\u043b\u044c\u0442\u0440\u044b');\n    define('LANG_CP_CTYPE_DATASET',             '\u041d\u0430\u0431\u043e\u0440');\n\n    define('LANG_CP_GRID_COLYMNS_SYSTEM',       '\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435');\n    define('LANG_CP_GRID_COLYMNS_USER',         '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_FILTER',       '\u0424\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_GRID_COLYMNS_DISPLAY',      '\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_EXACT',        '\u0422\u043e\u0447\u043d\u043e\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_LIKE',         '\u0412\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0432 \u0441\u0442\u0440\u043e\u043a\u0443');\n    define('LANG_CP_GRID_COLYMNS_DATE',         '\u0414\u0430\u0442\u0430');\n    define('LANG_CP_GRID_COLYMNS_SELECT',       '\u0421\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_GRID_COLYMNS_FLAG',         '\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u044c');\n    define('LANG_CP_GRID_COLYMNS_CUT_TEXT',     '\u041f\u0435\u0440\u0432\u044b\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432');\n    define('LANG_CP_GRID_COLYMNS_IMAGES_NMB',   '\u041a\u043e\u043b-\u0432\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439');\n    define('LANG_CP_GRID_COLYMNS_PREVIEW',      '\u041f\u0440\u0435\u0432\u044c\u044e');\n    define('LANG_CP_GRID_COLYMNS_TO_FILTER',    '\u041f\u043e\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440');\n\n    define('LANG_CP_SYSTEM_NAME_HINT',          '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 URL \u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445<br>\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f!');\n\n    define('LANG_CP_CONTENT_ITEM_ADD',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c');\n    define('LANG_CP_CONTENT_ITEM_ADD_CP',       '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u0430\u0434\u043c\u0438\u043d\u043a\u0438');\n    define('LANG_CP_CONTENT_ITEMS_EDIT',        '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CONTENT_FIELDS_IS_ADD',     '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S1',     '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S2',     '\u042d\u0442\u0438\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u043e\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_ADD_HINT', '<span class=\"text-danger\">\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u043a\u043e\u043d\u0435\u0446 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e</span>');\n    define('LANG_CP_CONTENT_CATS_ADD',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CONTENT_CATS_EDIT',         '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e');\n    define('LANG_CP_CONTENT_CATS_ORDER',        '\u041f\u043e\u0440\u044f\u0434\u043e\u043a');\n    define('LANG_CP_CONTENT_CATS_ORDER_DRAG',   '\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043c\u044b\u0448\u044c\u044e \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\"');\n    define('LANG_CP_CONTENT_CATS_NONE',         '\u0414\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_TRASH',                     '\u041a\u043e\u0440\u0437\u0438\u043d\u0430');\n    define('LANG_CP_SHOW_ONLY_IN_TRASH',        '\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b');\n    define('LANG_CP_CONTENT_ITEM_RESTORE_CONFIRM',  '\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_DELETE_CONFIRM',  '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_BASKET_DELETE_CONFIRM',  '\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\" \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443?');\n    define('LANG_CP_CONTENT_CATS_TITLES',       '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0438\u043b\u0438 \u0434\u0435\u0440\u0435\u0432\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CONTENT_CATS_TITLES_HINT',  '\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0440\u0430\u0437\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043a\u0430\u0436\u0434\u0430\u044f \u0438\u0437 \u043d\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0430 \u043d\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435.<br>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0435\u0442\u0441\u044f \u0437\u043d\u0430\u043a\u043e\u043c \u0434\u0435\u0444\u0438\u0441 \u043f\u0435\u0440\u0435\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438<br><a href=\"https://docs.instantcms.ru/manual/content/cats\" target=\"_blank\">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f</a>');\n    define('LANG_CP_CONTENT_CATS_BIND',         '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n\n    define('LANG_CP_BASIC',                     '\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_IS_COLLAPSED',              '\u0421\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u0432 \u0444\u043e\u0440\u043c\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f/\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_PUBLICATION',               '\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f');\n    define('LANG_CP_IS_PUB_CONTROL',            '\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0440\u043e\u043a\u043e\u043c \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438');\n    define('LANG_CP_DISABLE_DRAFTS',            '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0438');\n    define('LANG_CP_IS_PUB_CONTROL_HINT',\t\t'\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443 \u0438 \u0441\u0440\u043e\u043a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u044d\u0442\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \"\u0414\u043e\u0441\u0442\u0443\u043f\"');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS',    '\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0441\u0440\u043e\u043a\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438');\n    define('LANG_CP_NOTIFY_END_DATE_DAYS',      '\u0417\u0430 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439 \u0434\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE','\u0421\u043a\u0440\u044b\u0442\u044c');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_DEL','\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n    define('LANG_CP_CATEGORIES_ON',             '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATEGORIES_RECURSIVE',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0432\u043d\u0443\u0442\u0440\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n\tdefine('LANG_CP_CATEGORIES_EMPTY_ROOT',\t\t'\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATEGORIES_MULTI',\t\t\t'\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CATEGORIES_CHANGE',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CATEGORIES_OPEN_ROOT',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e');\n    define('LANG_CP_CATEGORIES_ONLY_LAST',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CP_CATEGORIES_SHOW',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0430\u0434 \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_CTYPE_CATEGORIES_OFF',      '\u0414\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043f\u043e\u043a\u0430\u0437 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d \u0432 <a href=\"%s\">\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445</a>. \u041e\u043d\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_FOLDERS',                   '\u041b\u0438\u0447\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438');\n    define('LANG_CP_FOLDERS_ON',                '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438');\n    define('LANG_CP_FOLDERS_HINT',              '\u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043f\u043e \u043b\u0438\u0447\u043d\u044b\u043c \u043f\u0430\u043f\u043a\u0430\u043c, \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u043c \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_CT_GROUPS',                 '\u0421\u0432\u044f\u0437\u044c \u0441 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438');\n    define('LANG_CP_CT_GROUPS_ALLOW',           '\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445');\n    define('LANG_CP_CT_GROUPS_ALLOW_ONLY',      '\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445');\n    define('LANG_CP_COMMENTS',                  '\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438');\n    define('LANG_CP_COMMENTS_REPLACE_LABEL',    '\u0417\u0430\u043c\u0435\u043d\u0430 \u0444\u0440\u0430\u0437\u044b \u0434\u043b\u044f ');\n    define('LANG_CP_COMMENTS_TITLE_PATTERN',    '\u041f\u0430\u0442\u0442\u0435\u0440\u043d \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0431\u043b\u043e\u043a\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432');\n    define('LANG_CP_COMMENTS_TEMPLATE',         '\u0428\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432');\n    define('LANG_CP_COMMENTS_ON',               '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438');\n    define('LANG_CP_RATING',                    '\u0420\u0435\u0439\u0442\u0438\u043d\u0433');\n    define('LANG_CP_RATING_ON',                 '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433');\n    define('LANG_CP_TAGS_ON',                   '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u0433\u0438');\n    define('LANG_CP_TAGS_IN_LIST',              '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u0433\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_TAGS_IN_ITEM',              '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u0433\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_PHOTOS',                    '\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f');\n    define('LANG_CP_PHOTOS_ON',                 '\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_PHOTOS_MULTI',              '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f');\n    define('LANG_CP_SEOMETA_DEFAULT',           'SEO \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SEOMETA',                   'SEO \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_SEOMETA_MANUAL_TITLE',      '\u0412\u0440\u0443\u0447\u043d\u0443\u044e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u0439\u0442\u043b \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_SEOMETA_AUTO_KEYS',         '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432');\n    define('LANG_CP_SEOMETA_AUTO_DESC',         '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439');\n    define('LANG_CP_SEOMETA_ITEM_TITLE',        '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u0430\u0439\u0442\u043b\u043e\u0432 \u0441\u0442\u0440\u0430\u043d\u0438\u0446');\n    define('LANG_CP_SEOMETA_ITEM_KEYS',         '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432');\n    define('LANG_CP_SEOMETA_ITEM_DESC',         '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439');\n    define('LANG_CP_SEOMETA_ITEM_H1',           '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u0433\u0430 h1');\n    // deprecated\n    define('LANG_CP_SEOMETA_FIELDS',            ' <span class=\"pattern_fields_panel_hint\">\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u043b\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.</span><span class=\"pattern_fields_panel\">\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f: <b class=\"pattern_fields\">%s</b> \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>.</span>');\n    define('LANG_CP_SEOMETA_ITEM_DS',           '\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430.'.LANG_CP_SEOMETA_FIELDS);\n    define('LANG_CP_SEOMETA_ITEM_HINT',         '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u043e\u043b\u044f, \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0438\u0445 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0438\u0433\u0443\u0440\u043d\u044b\u0445 \u0441\u043a\u043e\u0431\u043a\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430: <strong>{title}</strong>, <strong>{category}</strong> (\u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430) \u0438 \u0442.\u043f. \u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439, \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>');\n    //\n    define('LANG_CP_SEOMETA_DS_HINT',           '\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430.');\n    define('LANG_CP_SEOMETA_HINT_PANEL',        '\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u043b\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN_DOC',  '\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN',      '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f: <b class=\"pattern_fields\">%s</b> ');\n    define('LANG_CP_AUTO_URL',                  '\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c URL \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438');\n    define('LANG_CP_CAT_COVER_SIZES',           '\u041f\u0440\u0435\u0441\u0435\u0442\u044b \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES', '\u041f\u0440\u0435\u0441\u0435\u0442 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u0434\u043b\u044f \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_FIXED_URL',                 '\u041d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c URL \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_URL_PATTERN',               '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 URL');\n    define('LANG_CP_SEOMETA_CATS',              'SEO \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_H1',           '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u0442\u0435\u0433\u0430 H1 \u0434\u043b\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_TITLE',        '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u0442\u0430\u0439\u0442\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_KEYS',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_DESC',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CATS_AUTO_URL',             '\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c URL \u0438\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATS_FIRST_LEVEL_SLUG',     'URL \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CP_LISTVIEW_OPTIONS',          '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_PROFILELIST_ON',            '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044f\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_LISTVIEW_ON',               '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_LISTVIEW_OFF_INDEX',        '\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LISTVIEW_OFF_INDEX_HINT',   '\u0421\u043f\u0438\u0441\u043e\u043a \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n    define('LANG_CP_LIST_OFF_BREADCRUMB',       '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0445\u043b\u0435\u0431\u043d\u044b\u0435 \u043a\u0440\u043e\u0448\u043a\u0438');\n    define('LANG_CP_LIST_OFF_BREADCRUMB_CTYPE', '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0445\u043b\u0435\u0431\u043d\u044b\u0445 \u043a\u0440\u043e\u0448\u043a\u0430\u0445 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LISTVIEW_FILTER',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_LISTVIEW_FILTER_EXPAND',    '\u0420\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430');\n    define('LANG_CP_LISTVIEW_STYLE',            '\u0421\u0442\u0438\u043b\u044c \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_LIST_STYLE_NAMES',          '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0441\u0442\u0438\u043b\u0435\u0439 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_LIST_STYLE_OPTIONS',        '\u041e\u043f\u0446\u0438\u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_LIST_STYLE_OPTIONS_HINT',   '\u0415\u0441\u043b\u0438 \u0448\u0430\u0431\u043b\u043e\u043d \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442. \u0412 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JSON. \u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043f\u0446\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430.');\n    define('LANG_CP_CONTEXT_LIST_STYLE',        '\u0421\u0442\u0438\u043b\u0438 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_CONTEXT_SELECT_LIST',       '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_LISTVIEW_STYLE_HINT',       '\u041f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u044b \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0438\u0437 \u043f\u0430\u043f\u043a\u0438 <b>/'.cmsTemplate::TEMPLATE_BASE_PATH.'%s/content</b>. \u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c.');\n    define('LANG_CP_LISTVIEW_STYLE_SLIDER',     '\u0421\u043b\u0430\u0439\u0434\u0435\u0440');\n    define('LANG_CP_LISTVIEW_STYLE_BASIC',      '\u041e\u0431\u044b\u0447\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_MASONRY',    '\u041a\u0438\u0440\u043f\u0438\u0447\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_FEATURED',   '\u0416\u0443\u0440\u043d\u0430\u043b\u044c\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_TILES',      '\u041f\u043b\u0438\u0442\u043a\u0430');\n    define('LANG_CP_LISTVIEW_STYLE_TABLE',      '\u0422\u0430\u0431\u043b\u0438\u0446\u0430');\n    define('LANG_CP_PRIVACY_TYPE',              '\u041a\u0430\u043a \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_PRIVACY_TYPE_HIDE',         '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_TITLE',   '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_ALL',     '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e');\n\n    define('LANG_CP_ITEMVIEW_OPTIONS',          '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_ITEMVIEW_ON',               '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_ITEMVIEW_FIELDS_GROUP',     '\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f');\n    define('LANG_CP_ITEMVIEW_HITS_ON',\t\t\t'\u0421\u0447\u0438\u0442\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432');\n    define('LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW', '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432');\n    define('LANG_CP_ITEMVIEW_OFF_INFO_BLOCK',\t'\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e-\u0431\u043b\u043e\u043a');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML',      '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c HTML \u0432 \u043a\u043e\u043d\u0446\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML_HINT', '\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u0437\u0434\u0435\u0441\u044c HTML \u043a\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u044c\u044e');\n    define('LANG_CP_ITEMVIEW_SHARE_CODE',       'HTML \u043a\u043e\u0434 \u0434\u043b\u044f \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a');\n\n    define('LANG_CP_NUMERALS_LABELS',           '\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_NUMERALS_1_LABEL',          '\u041e\u0434\u0438\u043d / \u043e\u0434\u043d\u0430 / \u043e\u0434\u043d\u043e (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_LABEL',          '\u0414\u0432\u0430 / \u0434\u0432\u0435 (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_LABEL',         '\u041c\u043d\u043e\u0433\u043e (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_1_ALABEL',         '\u041e\u0434\u043d\u043e\u0433\u043e / \u043e\u0434\u043d\u0443 / \u043e\u0434\u043d\u043e (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_ALABEL',         '\u0414\u0432\u0430 / \u0434\u0432\u0435 (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_ALABEL',        '\u041c\u043d\u043e\u0433\u043e (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_1_GLABEL',         '\u041e\u0434\u043d\u043e\u0433\u043e / \u043e\u0434\u043d\u043e\u0439 (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_GLABEL',         '\u0414\u0432\u0443\u0445 / \u0434\u0432\u043e\u0438\u0445 (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_GLABEL',        '\u041c\u043d\u043e\u0433\u043e (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_ACTIONS_LABELS',            '\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_ACTION_ADD_LABEL',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c (...)');\n    define('LANG_CP_LIST_LABELS',               '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_LIST_LABEL',                '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_PROFILE_LABEL',             '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_LIST_LABELS_HINT',          '\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE',    '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u0432\u044f\u0437\u0435\u0439');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE_HINT', '\u0415\u0441\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c');\n\n    define('LANG_CP_TAB',                       '\u0412\u043a\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_TAB_TITLE',                 '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_TAB_IS_ACTIVE',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443');\n    define('LANG_CP_TAB_SHOW_ONLY_OWNER',       '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043f\u0440\u043e\u0444\u0438\u043b\u044f');\n\n    define('LANG_CP_FIELD',                     '\u041f\u043e\u043b\u0435');\n    define('LANG_CP_FIELD_FORMAT',              '\u0424\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_REGEX',               '\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_REGEX_TEXT',          '\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_REGEX_TEXT_HINT',     '\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u043c\u0443 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044e \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f.');\n    define('LANG_CP_FIELD_TYPE',                '\u0422\u0438\u043f \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_TYPE_HINT',           '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b!');\n    define('LANG_CP_FIELD_TYPE_OPTS',           '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_VALUES',              '\u041f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_PROFILE_VALUE',       '\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_FIELD_PROFILE_VALUE_HINT',  '\u041f\u043e\u043b\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f<br/>\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439 \u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_FIELD_TITLE',               '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_FIELDSET',            '\u0413\u0440\u0443\u043f\u043f\u0430');\n    define('LANG_CP_FIELD_FIELDSET_SELECT',     '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_FIELD_FIELDSET_ADD',        '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_FIELD_FIELDSET_ADD_HINT',   '\u0414\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u044f\u0437\u044b\u043a\u0430 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_FIELD_HINT',                '\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430 \u0434\u043b\u044f \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_ADD',                 '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u0435');\n    define('LANG_CP_FIELD_CREATED',             '\u041f\u043e\u043b\u0435 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u043e');\n    define('LANG_CP_FIELD_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u0435 \"{title}\"?');\n    define('LANG_CP_FIELD_VISIBILITY',          '\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_LABELS',              '\u041f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432');\n    define('LANG_CP_FIELD_LABELS_IN_LIST',      '\u041f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_FIELD_LABELS_IN_ITEM',      '\u041f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_LABELS_IN_FORM',      '\u0412 \u0444\u043e\u0440\u043c\u0435');\n    define('LANG_CP_FIELD_LABEL_NONE',          '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_LABEL_LEFT',          '\u0421\u043b\u0435\u0432\u0430');\n    define('LANG_CP_FIELD_LABEL_TOP',           '\u0421\u0432\u0435\u0440\u0445\u0443');\n    define('LANG_CP_FIELD_IN_LIST',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_FIELD_IN_LIST_CONTEXT',     '\u0414\u043b\u044f \u043a\u0430\u043a\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_NOT_IN_LIST_CONTEXT', '\u0414\u043b\u044f \u043a\u0430\u043a\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_IN_ITEM',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS',         '\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0432 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS_HINT',    '\u0415\u0441\u043b\u0438 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u044f \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0436\u0435\u0442\u0435, \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0432\u0438\u0434\u0436\u0435\u0442 \"\u041f\u043e\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430\" \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0435\u0433\u043e.');\n    define('LANG_CP_FIELD_IN_ITEM_POS0',        '\u0412 \u0442\u0435\u043b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS1',        '\u041d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0436\u0435\u0442\u0435');\n    define('LANG_CP_FIELD_IN_PROFILE',          '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_FIELD_IN_LIST_SHORT',       '\u0412 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_FIELD_IN_ITEM_SHORT',       '\u0412 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_FILTER',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435');\n    define('LANG_CP_FIELD_IN_RELATION',         '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0441\u0432\u044f\u0437\u0438');\n    define('LANG_CP_FIELD_PRIVACY',             '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c');\n    define('LANG_CP_FIELD_PRIVATE',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0443 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_GROUPS_READ',         '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_GROUPS_EDIT',         '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_GROUPS_ADD',          '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_WRAP',               '\u041e\u0431\u0442\u0435\u043a\u0430\u043d\u0438\u0435 \u0438 CSS');\n    define('LANG_CP_FIELD_WRAP_TYPE',          '\u0422\u0438\u043f');\n    define('LANG_CP_FIELD_WRAP_LTYPE',         '\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0441\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e');\n    define('LANG_CP_FIELD_WRAP_RTYPE',         '\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0441\u043b\u0435\u0432\u0430 \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e');\n    define('LANG_CP_FIELD_WRAP_NTYPE',         '\u041d\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043e\u0431\u0442\u0435\u043a\u0430\u043d\u0438\u0438');\n    define('LANG_CP_FIELD_WRAP_ATYPE',         '\u0410\u0432\u0442\u043e');\n    define('LANG_CP_FIELD_WRAP_WIDTH',         '\u0428\u0438\u0440\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_WRAP_WIDTH_HINT',    '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e - \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0448\u0438\u0440\u0438\u043d\u0430. \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0435\u0434\u0438\u043d\u0438\u0446\u0435\u0439 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 200px, 60% \u0438 \u0442.\u043f.');\n    define('LANG_CP_FIELD_WRAP_STYLE',         'CSS \u043a\u043b\u0430\u0441\u0441 \u043e\u0431\u0451\u0440\u0442\u043a\u0438 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND',      '\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430 \u043f\u043e\u043b\u044f \u0432 \u0444\u043e\u0440\u043c\u0435');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HINT', '\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e.');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_F',    '\u041f\u043e\u043b\u0435, \u043e\u0442 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u0442');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_SHOW', '\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0435\u0441\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HIDE', '\u0421\u043a\u0440\u044b\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0435\u0441\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e');\n    define('LANG_CP_PROPS_NO_CATS',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 &laquo;%s&raquo; \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439.');\n    define('LANG_CP_PROPS_NO_CATS_ADD',         '<a href=\"%s\">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438</a> \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430.');\n    define('LANG_CP_PROPS_ADD',                 '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \"{title}\"?\\n\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0438\u0437 \u0432\u0441\u0435\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_PROPS_UNBIND_CONFIRM',      '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \"{title}\" \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438?');\n    define('LANG_CP_PROPS_BIND',                '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_BIND_SC',             '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043e');\n    define('LANG_CP_PROPS_BIND_RECURSIVE',      '\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_PROPS_UNBIND',              '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_UNBIND_SC',           '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0432\u044f\u0437\u0430\u043d\u043e');\n    define('LANG_CP_PROP_TITLE',                '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430');\n    define('LANG_CP_PROP_IS_ACTIVE',            '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_PROP_VALUES',               '\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_PROP_VALUES_HINT',          '\u041e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435');\n    define('LANG_CP_PROP_CATS',                 '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c');\n    define('LANG_CP_PROP_UNITS',                '\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FILTER_ADD',                '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_FILTER_NO_TABLE',           '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b, <a href=\"%s\">\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0438\u0445</a>.');\n    define('LANG_CP_FILTER_TABLE_SUCCESS',      '\u041c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_FILTER_DELETE_CONFIRM',     '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \"{title}\"?');\n    define('LANG_CP_FILTER_ERROR_SLUG',         '\u0415\u0441\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u0436\u0435 URI, \u0437\u0430\u0434\u0430\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0435');\n    define('LANG_CP_FILTER_DESC_HINT',          '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_FILTER_FIELDS',             '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043f\u043e\u043b\u0435\u0439');\n    define('LANG_CP_FILTER_PROPS',              '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0441\u0432\u043e\u0439\u0441\u0442\u0432');\n    define('LANG_CP_FILTER_CATS',               '\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438, \u0433\u0434\u0435 \u0444\u0438\u043b\u044c\u0442\u0440 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d');\n\n    define('LANG_CP_DATASET',                   '\u041d\u0430\u0431\u043e\u0440');\n    define('LANG_CP_DATASET_ADD',               '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0430\u0431\u043e\u0440');\n    define('LANG_CP_DATASET_TITLE',             '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0431\u043e\u0440\u0430');\n    define('LANG_CP_DATASET_CREATED',           '\u041d\u0430\u0431\u043e\u0440 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_DATASET_DELETE_CONFIRM',    '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0431\u043e\u0440 \"{title}\"?');\n    define('LANG_CP_DATASET_IS_VISIBLE',        '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0431\u043e\u0440 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n\n    define('LANG_CP_CATS_VIEW',        '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n    define('LANG_CP_CATS_HIDE',        '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n\n    define('LANG_CP_CTYPE_RELATIONS',           '\u0421\u0432\u044f\u0437\u0438');\n    define('LANG_CP_RELATION',                  '\u0421\u0432\u044f\u0437\u044c');\n    define('LANG_CP_RELATION_ADD',              '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c');\n    define('LANG_CP_RELATION_TITLE',            '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u044f\u0437\u0438');\n    define('LANG_CP_RELATION_DELETE_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c?');\n    define('LANG_CP_RELATION_LAYOUT',           '\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0432\u0438\u0434');\n    define('LANG_CP_RELATION_LAYOUT_TYPE',      '\u0422\u0438\u043f \u0432\u044b\u0432\u043e\u0434\u0430');\n    define('LANG_CP_RELATION_LAYOUT_LIST',      '\u0421\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_RELATION_LAYOUT_TAB',       '\u0412\u043a\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_RELATION_LAYOUT_HIDDEN',    '\u041d\u0435\u0442 (\u0441\u043a\u0440\u044b\u0442\u044c)');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_EMPTY','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0435\u0441\u043b\u0438 \u043d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_TITLE','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_FILTER','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT',     '\u0417\u0430\u043f\u0438\u0441\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT_HINT','\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_RELATION_CREATED',          '\u0421\u0432\u044f\u0437\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_RELATION_FIELD_CREATED',    '\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432 \u0442\u0438\u043f\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \"%s\"');\n    define('LANG_CP_CONTR_RELATION_FIELD_CREATED', '\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435 \"%s\"');\n    define('LANG_CP_RELATION_CHILD',            '\u0414\u043e\u0447\u0435\u0440\u043d\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442');\n    define('LANG_CP_RELATION_TAB_OPTS',         '\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_HINT',     '\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438, \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0438\u0445 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0438\u0433\u0443\u0440\u043d\u044b\u0445 \u0441\u043a\u043e\u0431\u043a\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <strong>{title}</strong>');\n    define('LANG_CP_RELATION_TAB_SEO_TITLE',    '\u0422\u0430\u0439\u0442\u043b \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_KEYS',     '\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_DESC',     '\u041c\u0435\u0442\u0430-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_ERROR_LEN',        '\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0443 \u0441\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0442\u0438\u043f\u043e\u0432. \u0421\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043c\u0451\u043d \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.');\n    define('LANG_CP_RELATION_LAYOUT_LIST_ERROR', '\u041c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0443 \u0441\u0432\u044f\u0437\u044c \u0441 \u0442\u0438\u043f\u043e\u043c \u0432\u044b\u0432\u043e\u0434\u0430 \"\u0421\u043f\u0438\u0441\u043e\u043a\"');\n\n    define('LANG_CP_MENU',                      '\u041c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ADD',                  '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_EDIT',                 '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_CREATED',              '\u041c\u0435\u043d\u044e &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u043e');\n    define('LANG_CP_MENU_DELETE',               '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_DELETE_CONFIRM',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e?');\n    define('LANG_CP_MENU_ITEM',                 '\u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ITEM_PARENT',          '\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043f\u0443\u043d\u043a\u0442');\n    define('LANG_CP_MENU_ITEM_CREATED',         '\u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_MENU_ITEM_TITLE',           '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430');\n    define('LANG_CP_MENU_ITEM_URL',             '\u0421\u0441\u044b\u043b\u043a\u0430');\n    define('LANG_CP_MENU_ITEM_ADD',             '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u043d\u043a\u0442');\n    define('LANG_CP_MENU_ITEM_DELETE_CONFIRM',  '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e \"{title}\"?');\n    define('LANG_CP_MENU_ITEM_ACTION',          '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ITEM_ACTION_URL',      '\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_ACTION_URL_HINT', '\u0414\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u044d\u0448 \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f<br/>\u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 http://<br/>\u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c <a href=\"https://docs.instantcms.ru/manual/menu/special\" target=\"_blank\">\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438</a>');\n    define('LANG_CP_MENU_ITEM_HIDE_TITLE',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u043a\u043e\u043d\u043a\u0443, \u0431\u0435\u0437 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430');\n    define('LANG_CP_MENU_ITEM_ICON',            '\u0418\u043c\u044f \u0438\u043a\u043e\u043d\u043a\u0438');\n    define('LANG_CP_ICON_SELECT',               '\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u043a\u043e\u043d\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_ACTION_TARGET',   '\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_TARGET_SELF',     '\u0412 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_BLANK',    '\u0412 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_PARENT',   '\u0412 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_TOP',      '\u041f\u043e\u0432\u0435\u0440\u0445 \u0432\u0441\u0435\u0445 \u0444\u0440\u0435\u0439\u043c\u043e\u0432');\n    define('LANG_CP_MENU_IS_FIXED',             '\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0435 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_WIDGETS_SHOW_ALL',          '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_SKIP_IMPORT',       '\u0412\u0438\u0434\u0436\u0435\u0442 &laquo;%s&raquo; \u043d\u0435 \u0431\u044b\u043b \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d, \u0442.\u043a. \u043e\u043d \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0443 \u0432\u0430\u0441');\n    define('LANG_CP_WIDGETS_ROW_NONE',          '\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_VA',            '\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_VA1',           '\u041f\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u043c\u0443 \u043a\u0440\u0430\u044e');\n    define('LANG_CP_WIDGETS_COL_VA2',           '\u041f\u043e\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435');\n    define('LANG_CP_WIDGETS_COL_VA3',           '\u041f\u043e \u043d\u0438\u0436\u043d\u0435\u043c\u0443 \u043a\u0440\u0430\u044e');\n    define('LANG_CP_WIDGETS_COL_HA',            '\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_HA1',           '\u0421\u043b\u0435\u0432\u0430 \u043d\u0430\u043f\u0440\u0430\u0432\u043e');\n    define('LANG_CP_WIDGETS_COL_HA3',           '\u0421\u043f\u0440\u0430\u0432\u0430 \u043d\u0430\u043b\u0435\u0432\u043e');\n    define('LANG_CP_WIDGETS_COL_HA4',           '\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u0432\u043e\u043a\u0440\u0443\u0433');\n    define('LANG_CP_WIDGETS_COL_HA5',           '\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u043c\u0435\u0436\u0434\u0443');\n    define('LANG_CP_WIDGETS_COL_CLASS',         '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 CSS \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_ROW_CLASS',         '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 CSS \u043a\u043b\u0430\u0441\u0441 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_ORDER',         '\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439 %s');\n    define('LANG_CP_WIDGETS_COL_D_ORDER',       '\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_WIDGETS_COL_CUT_BEFORE',    '\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u0441\u0442\u0440\u043e\u043a \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u043e\u0439 \u043a\u043e\u043b\u043e\u043d\u043a\u043e\u0439');\n    define('LANG_CP_WIDGETS_COL_WIDTH_D',       '\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_WIDGETS_COL_WIDTH',         '\u0428\u0438\u0440\u0438\u043d\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439 %s');\n    define('LANG_CP_WIDGETS_COL_WIDTH_ALL',     '\u0428\u0438\u0440\u0438\u043d\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439');\n    define('LANG_CP_WIDGETS_COL_AUTO',          '\u041f\u043e \u0448\u0438\u0440\u0438\u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e');\n    define('LANG_CP_WIDGETS_ADD_COL',           '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0443');\n    define('LANG_CP_WIDGETS_ROWS_TITLE',        '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0440\u044f\u0434\u043e\u0432');\n    define('LANG_CP_WIDGETS_ADD_ROW',           '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u044f\u0434');\n    define('LANG_CP_WIDGETS_IMPORT_SCHEME',     '\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE',       '\u041e\u0442\u043a\u0443\u0434\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c?');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE_EX',    '\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0431\u043b\u043e\u043d');\n    define('LANG_CP_WIDGETS_LFILE',             '\u0424\u0430\u0439\u043b \u0441\u0445\u0435\u043c\u044b');\n    define('LANG_CP_WIDGETS_LFILE_HINT',        '\u0415\u0441\u043b\u0438 \u0441\u0445\u0435\u043c\u0430 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e. \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0443\u044e \u043a\u043e\u043f\u0438\u044e.');\n    define('LANG_CP_WIDGETS_EXPORT_SCHEME',     '\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_FROM_TEMPLATE',     '\u0428\u0430\u0431\u043b\u043e\u043d, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_COPY_WIDGETS',      '\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_SAVE_WIDGETS',      '\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_EMPTY_LAYOUT',      '\u0412 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0448\u0430\u0431\u043b\u043e\u043d\u0435 \u043d\u0435\u0442 \u0441\u0445\u0435\u043c\u044b');\n    define('LANG_CP_WIDGETS_LAYOUT_ISUCCESS',   '\u0421\u0445\u0435\u043c\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430');\n    define('LANG_CP_WIDGETS_ADD_ROW_P',         '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 \u0440\u044f\u0434');\n    define('LANG_CP_WIDGETS_ROW_NO_GUTTERS',    '\u0411\u0435\u0437 \u043e\u0442\u0441\u0442\u0443\u043f\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043b\u043e\u043d\u043a\u0430\u043c\u0438');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION', '\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0432\u044b\u0432\u043e\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION1', '\u0412 \u043d\u0430\u0447\u0430\u043b\u0435');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION2', '\u0412 \u043a\u043e\u043d\u0446\u0435');\n    define('LANG_CP_WIDGETS_ROW_CONT',          '\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_TAG',      '\u0422\u0435\u0433 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_CSS',      'CSS \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_TAG',           '\u0422\u0435\u0433 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_TAG',           '\u0422\u0435\u0433 \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG',   '\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0442\u0435\u0433 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG_C', 'CSS \u043a\u043b\u0430\u0441\u0441 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0442\u0435\u0433\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_NO',       '\u0411\u0435\u0437 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430');\n    define('LANG_CP_WIDGETS_ROW_DEL_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u044f\u0434?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_COL_DEL_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0443 (\u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u043a\u0436\u0435 \u0443\u0434\u0430\u043b\u044f\u0442\u0441\u044f)?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_COL_COUNT',         '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_NAME',          '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438');\n    define('LANG_CP_WIDGETS_COL_NAME_HINT',     '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0431\u0443\u0434\u0435\u0442 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438. \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u043c.');\n    define('LANG_CP_WIDGETS_COL_TYPE',          '\u041a\u0430\u043a\u0430\u044f \u043a\u043e\u043b\u043e\u043d\u043a\u0430?');\n    define('LANG_CP_WIDGETS_COL_TYPE1',         '\u0422\u0438\u043f\u043e\u0432\u0430\u044f');\n    define('LANG_CP_WIDGETS_COL_TYPE2',         '\u0421\u0432\u043e\u0439 \u0448\u0430\u0431\u043b\u043e\u043d');\n    define('LANG_CP_WIDGETS_COL_WRAPPER',       '\u0428\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_COL_WRAPPER_H',     '\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 HTML \u0448\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043b\u043e\u043d\u043a\u0438. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {position} \u0432 \u043c\u0435\u0441\u0442\u0435 \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432 \u044d\u0442\u043e\u0439 \u043f\u043e\u0437\u0438\u0446\u0438\u0438.');\n    define('LANG_CP_WIDGETS_PAGE',              '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430');\n    define('LANG_CP_WIDGETS_PAGES',             '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_WIDGETS_ALL',               '\u0412\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_ADD',               '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442');\n    define('LANG_CP_WIDGETS_ADD_PAGE',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_WIDGETS_EDIT_PAGE',         '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c');\n    define('LANG_CP_WIDGETS_DELETE_PAGE',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS', '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS_CONFIRM', '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b \u0441 \u043f\u043e\u0437\u0438\u0446\u0438\u0439 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0430?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_MISC',              '\u041e\u0431\u0449\u0438\u0435');\n    define('LANG_CP_WIDGET_COPY_CONFIRM',       '\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442, \u0434\u0443\u0431\u043b\u0438\u0440\u0443\u044f \u0435\u0433\u043e \u043d\u0430 \u044d\u0442\u043e\u0439 \u0436\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438?');\n    define('LANG_CP_WIDGET_DELETE_CONFIRM',     '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442?');\n    define('LANG_CP_WIDGET_REMOVE_CONFIRM',     '\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b?');\n    define('LANG_CP_WIDGET_REMOVE_SUCCESS',     '\u0412\u0438\u0434\u0436\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d');\n    define('LANG_CP_WIDGET_PAGE_CREATED',       '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_WIDGET_PAGE_URLS',          '\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f URL');\n    define('LANG_CP_WIDGET_PAGE_BODY_CSS',      'CSS \u043a\u043b\u0430\u0441\u0441\u044b \u0434\u043b\u044f \u0442\u0435\u0433\u0430 body \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK',      '\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0441\u043a\u0438');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK_NOT',  '\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0441\u043a\u0438');\n    define('LANG_CP_WIDGETS_UNUSED',            '\u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_UNUSED_HINT',       '\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0441\u043a\u0440\u044b\u0442\u044c \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a');\n    define('LANG_CP_WIDGETS_BINDED',            '\u041f\u0440\u0438\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_BINDED_HINT',       '\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0435\u0433\u043e \u0441 \u043e\u0431\u0449\u0438\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0440\u0430\u0437');\n    define('LANG_CP_WIDGETS_TEMPLATE',          '\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u0434\u043b\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_WIDGETS_FA',                '\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u043f\u043e\u0434\u0431\u043e\u0440 \u043c\u0430\u0441\u043e\u043a');\n    define('LANG_CP_WIDGETS_FA_TYPE',           '\u0422\u0438\u043f');\n    define('LANG_CP_WIDGETS_FA_ITEMS',          '\u0417\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_WIDGETS_FA_CATS',           '\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_WIDGETS_FA_TITLE_OR_URL',   '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 URL');\n    define('LANG_CP_WIDGETS_FA_ADD_TO',         '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432');\n    define('LANG_CP_WIDGETS_FA_TO_POS',         '\u0412 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_WIDGETS_FA_TO_NOT',         '\u0412 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_WIDGETS_FA_ADD',            '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c');\n    define('LANG_CP_WIDGETS_DSCH_ERROR',        '\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0448\u0430\u0431\u043b\u043e\u043d \u0430\u0434\u043c\u0438\u043d\u043f\u0430\u043d\u0435\u043b\u0438 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0445\u0435\u043c\u044b \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432. <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/widgets\">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435...</a>');\n    define('LANG_CP_WIDGETS_STYLE',             '\u0421\u0442\u0438\u043b\u044c');\n    define('LANG_CP_NOT_SET_ALL',               '\u0415\u0441\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e, \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445');\n\n    define('LANG_CP_USER_PMAILING',             '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_USER_ADD',                  '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_USER_CREATED',              '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_USER_DELETE_CONFIRM',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f {nickname}?\\n\u0411\u0443\u0434\u0435\u0442 \u0442\u0430\u043a\u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d \u0432\u0435\u0441\u044c \u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0438 \u0432\u0441\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0438\u043c \u0444\u0430\u0439\u043b\u044b!');\n    define('LANG_CP_USER_DELETED',              '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u0443\u0434\u0430\u043b\u0435\u043d');\n    define('LANG_CP_USER_GROUP_ADD',            '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_EDIT',           '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_PERMS',          '\u041f\u0440\u0430\u0432\u0430 \u0433\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_USER_GROUP_DELETE',         '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_DELETE_CONFIRM', '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443?\\n\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b');\n    define('LANG_CP_USER_GROUP_CREATED',        '\u0413\u0440\u0443\u043f\u043f\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_USER_GROUP_ERR_DELETE',     '\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_IS_PUBLIC',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_USER_GROUP_IS_FILTER',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_USER_LOCKING',              '\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430');\n    define('LANG_CP_USER_LOCKED',               '\u0411\u043b\u043e\u043a');\n    define('LANG_CP_USER_IS_LOCKED',            '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_USER_LOCK_UNTIL',           '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e');\n    define('LANG_CP_USER_LOCK_REASON',          '\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438');\n    define('LANG_CP_USER_NOT_FOUND',            '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d');\n    define('LANG_CP_USER_FIND_BYIP',            '\u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441 \u0442\u0430\u043a\u0438\u043c ip');\n    define('LANG_CP_USER_RIPE_SEARCH',          '\u041d\u0430\u0439\u0442\u0438 \u0432 \u0431\u0430\u0437\u0435 RIPE');\n    define('LANG_CP_USER_SEARCH_NOT_FOUND',     '\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c');\n    define('LANG_CP_USERS_ONLINE',              '\u0421\u0435\u0439\u0447\u0430\u0441 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_USERS_UNCONFIRMED',         '\u041d\u0435\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b');\n    define('LANG_CP_USERS_ALL',                 '\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_USERS_ISDELETED',           '\u0423\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435');\n    define('LANG_CP_USERS_LOCKED',              '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435');\n\n    define('LANG_CP_TOTAL',       '\u0412\u0441\u0435\u0433\u043e');\n    define('LANG_CP_ONMODERATE',  '\u041d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_NOTPUB',      '\u041d\u0435\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0445');\n\n    define('LANG_CP_CONTROLLERS_OPTIONS',       '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CONTROLLERS_ADD',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_ERR_BACKEND_NOT_FOUND',     '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 &laquo;%s&raquo; \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a');\n\n    define('LANG_CP_SETTINGS_SITE',             '\u0421\u0430\u0439\u0442');\n    define('LANG_CP_SETTINGS_GUI',              '\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441');\n    define('LANG_CP_SETTINGS_FRONTPAGE',        '\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430');\n    define('LANG_CP_SETTINGS_DATE',             '\u0414\u0430\u0442\u044b');\n    define('LANG_CP_SETTINGS_MAIL',             '\u041f\u043e\u0447\u0442\u0430');\n    define('LANG_CP_SETTINGS_CACHE',            '\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_SETTINGS_DEBUG',            '\u041e\u0442\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_SETTINGS_DB',               '\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445');\n    define('LANG_CP_SETTINGS_DB_CLEAR_SQL_MODE', '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043f\u0443\u0441\u0442\u043e\u0433\u043e sql_mode \u0434\u043b\u044f MySQL');\n    define('LANG_CP_SETTINGS_DB_CHARSET',       '\u041a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0430');\n    define('LANG_CP_SETTINGS_DB_CHARSET_HINT',  '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f');\n    define('LANG_CP_SETTINGS_MISC',             '\u041f\u0440\u043e\u0447\u0438\u0435');\n    define('LANG_CP_SETTINGS_SECURITY',         '\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c');\n\n    define('LANG_CP_SETTINGS_SESSIONS',         '\u0421\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_SETTINGS_SESSION_MAXLIFETIME', '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_HANDLER', '\u041c\u0435\u0442\u043e\u0434 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSION_NAME', '\u0418\u043c\u044f \u0441\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_SETTINGS_SESSION_NAME_HINT', '\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0441\u0430\u0439\u0442\u043e\u0432 \u0441 \u0435\u0434\u0438\u043d\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0435\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH', '\u041f\u0443\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_BASEDIR', ', \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043e\u0434\u0438\u043d \u0438\u0437 \u043f\u0443\u0442\u0435\u0439 ');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH_HINT', '\u0414\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b\u043d\u044b\u0439 \u043f\u0443\u0442\u044c%s. <br />\u0414\u043b\u044f Memcache \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c \"tcp://\", \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <b>tcp://localhost:11211</b>. \u0414\u043b\u044f Memcached \u0431\u0435\u0437 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \"tcp://\", \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <b>localhost:11211</b>.');\n\n    define('LANG_CP_CHECK_SPOOFING_TYPE', '\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f IP \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0443');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT1', '\u041f\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044e \u043f\u043e\u0434\u0441\u0435\u0442\u0438');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT2', '\u0421\u0442\u0440\u043e\u0433\u043e \u043f\u043e ip \u0430\u0434\u0440\u0435\u0441\u0443');\n    define('LANG_CP_SETTINGS_USER_CHANGE_LANG', '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0441\u043c\u0435\u043d\u0443 \u044f\u0437\u044b\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 (\u043f\u043e\u0434\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0432 URL)');\n    define('LANG_CP_SETTINGS_BROWSER_AUTO_LANG', '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u044f\u0437\u044b\u043a \u043f\u043e \u043b\u043e\u043a\u0430\u043b\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430');\n    define('LANG_CP_SETTINGS_ALLOW_IPS',        '\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0435 ip \u0430\u0434\u0440\u0435\u0441\u0430 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0443');\n    define('LANG_CP_SETTINGS_ALLOW_IPS_HINT',   '\u041a\u0430\u0436\u0434\u044b\u0439 \u0441 \u043d\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438. \u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e - \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0432\u0441\u0435\u043c. \u0422\u0435\u043a\u0443\u0449\u0438\u0439 ip \u0430\u0434\u0440\u0435\u0441: %s');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY',    '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c ip \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY_HINT', '\u041a\u043b\u044e\u0447 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $_SERVER, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 ip \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f. \u041d\u0435 \u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0432\u0435\u0440\u0435\u043d\u044b. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430. \u041d\u043e, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f CloudFlare \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c HTTP_CF_CONNECTING_IP');\n    define('LANG_CP_SETTINGS_SITE_ONLY_TO_USERS', '\u0421\u0430\u0439\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c');\n    define('LANG_CP_SETTINGS_SITE_ENABLED',     '\u0421\u0430\u0439\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_SETTINGS_SITE_REASON',      '\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_SETTINGS_CHECK_UPDATES',    '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 InstantCMS \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430');\n    define('LANG_CP_SETTINGS_SITENAME',         '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_SETTINGS_HOMETITLE',        '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b (title)');\n    define('LANG_CP_SETTINGS_METAKEYS',         '\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 (meta keywords)');\n    define('LANG_CP_SETTINGS_METADESC',         '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430 (meta description)');\n    define('LANG_CP_SETTINGS_DISABLE_METAKEYS', '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u0433 meta keywords');\n\tdefine('LANG_CP_SETTINGS_META_NO_DEFAULT',  '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0448\u0435 \u0441\u043b\u043e\u0432\u0430 \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n\tdefine('LANG_CP_SETTINGS_META_NO_DEFAULT_HINT',  '\u0415\u0441\u043b\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e, \u044d\u0442\u0438 \u0441\u043b\u043e\u0432\u0430 \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0445 \u0441 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438');\n\tdefine('LANG_CP_SETTINGS_PAGE_NUM_IN_TITLE',  '\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u0432 \u0442\u0435\u0433 title \u0438 meta description \u043f\u0440\u0438 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0438');\n\tdefine('LANG_CP_SETTINGS_IS_SITENAME_IN_TITLE',  '\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0442\u0435\u0433 title \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430');\n\tdefine('LANG_CP_SETTINGS_SET_HEAD_PRELOAD',  '\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 HTTP Preload');\n    define('LANG_CP_SETTINGS_LANGUAGE',         '\u041b\u043e\u043a\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SUBMIT_COMPILE',            '\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c %s');\n    define('LANG_CP_SETTINGS_TEMPLATE',         '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_TEMPLATE_ADMIN',   '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u0430\u043d\u0435\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_TEMPLATE_MOBILE',  '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432');\n    define('LANG_CP_SETTINGS_TEMPLATE_TABLET',  '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u043b\u0430\u043d\u0448\u0435\u0442\u043e\u0432');\n    define('LANG_CP_SETTINGS_TEMPLATE_OPTIONS', '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0442\u0435\u043c\u044b');\n    define('LANG_CP_SETTINGS_TEMPLATE_INTH',    '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u044e \u0442\u0435\u043c\u0443');\n    define('LANG_CP_SETTINGS_EDITOR',           'HTML \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_SHOW_BREADCRUMBS', '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u043e\u043c\u0435\u0440?');\n    define('LANG_CP_SETTINGS_HTML_MINIFY',      '\u0421\u0436\u0438\u043c\u0430\u0442\u044c HTML');\n    define('LANG_CP_SETTINGS_MERGE_CSS',        '\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c CSS-\u0444\u0430\u0439\u043b\u044b');\n    define('LANG_CP_SETTINGS_MERGE_JS',         '\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c JS-\u0444\u0430\u0439\u043b\u044b');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_MERGED',  '&mdash; <a href=\"%s\">\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0435\u0448</a>');\n    define('LANG_CP_SETTINGS_MERGED_CLEANED',   '\u041f\u0430\u043f\u043a\u0430 <b>%s</b> \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u0430');\n    define('LANG_CP_SETTINGS_MERGED_CLEAN_FAIL','\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443 <b>%s</b>. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0435\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_SUCCESS', '\u041a\u0435\u0448 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0447\u0438\u0449\u0435\u043d');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_FAIL', '\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u0435\u0448\u0430');\n    define('LANG_CP_SETTINGS_CTYPE_DEF',        '\u0422\u0438\u043f\u044b \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_CTYPE_DEF_HINT',\t'\u0412 URL \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0435 \u0438\u043c\u044f');\n    define('LANG_CP_SETTINGS_FP_SHOW',          '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435');\n    define('LANG_CP_SETTINGS_FP_SHOW_NONE',     '\u0422\u043e\u043b\u044c\u043a\u043e \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_SETTINGS_FP_SHOW_PROFILE',  '\u041f\u0440\u043e\u0444\u0438\u043b\u044c / \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SETTINGS_FP_SHOW_CONTENT',  '\u041a\u043e\u043d\u0442\u0435\u043d\u0442: %s');\n    define('LANG_CP_SETTINGS_TIMEZONE',         '\u0427\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441');\n    define('LANG_CP_SETTINGS_ALLOW_USERS_TIMEZONE', '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441');\n    define('LANG_CP_SETTINGS_DATE_FORMAT',      '\u0424\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b PHP');\n    define('LANG_CP_SETTINGS_DATE_FORMAT_JS',   '\u0424\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b JavaScript');\n    define('LANG_CP_SETTINGS_MAIL_TRANSPORT',   '\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_MAIL_FROM',        '\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_MAIL_FROM_NAME',   '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP',        '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 SMTP');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_HOST',   'SMTP \u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PORT',   'SMTP \u041f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_AUTH',   'SMTP \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_USER',   'SMTP \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PASS',   'SMTP \u041f\u0430\u0440\u043e\u043b\u044c');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC',    'SMTP \u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_NO', '\u0411\u0435\u0437 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_SSL','SSL');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_TLS','TLS');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME',  '\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0441\u0447\u0451\u0442\u0447\u0438\u043a');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME_HINT',  '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 js \u0438 css. \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439, \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043a\u044d\u0448 \u0443 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0435\u0439.');\n    define('LANG_CP_SETTINGS_CACHE_ENABLED',    '\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e');\n    define('LANG_CP_SETTINGS_CACHE_METHOD',     '\u041c\u0435\u0442\u043e\u0434 \u043a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_CACHE_METHOD_NO',  '\u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e');\n    define('LANG_CP_SETTINGS_CACHE_TTL',        '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u043a\u0435\u0448\u0430, \u0441\u0435\u043a');\n    define('LANG_CP_SETTINGS_CACHE_HOST',       'Memcached \u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_SETTINGS_CACHE_PORT',       'Memcached \u041f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_CACHE_MIN_HTML',   '\u041c\u0438\u043d\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c HTML');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN',    '\u0414\u043e\u043c\u0435\u043d cookie');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN_HINT', 'Cookie \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0434\u043e\u043c\u0435\u043d \u0438 \u0432\u0441\u0435 \u0435\u0433\u043e \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u044b. \u0411\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441\u043a\u0432\u043e\u0437\u043d\u0430\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0442\u043e cookie \u0431\u0443\u0434\u0443\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.');\n    define('LANG_CP_SETTINGS_CURRENT_DOMAIN',   '\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u043c\u0435\u043d: ');\n\n    define('LANG_CP_MEMCACHE_NOT_AVAILABLE',    '\u041c\u043e\u0434\u0443\u043b\u044c Memcached \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d');\n    define('LANG_CP_MEMCACHE_CONNECT_ERROR',    '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a Memcached - \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u043f\u043e\u0440\u0442');\n\n    define('LANG_CP_FILE_NOT_WRITABLE',         '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0444\u0430\u0439\u043b \"%s\". \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c.');\n    define('LANG_CP_SETTINGS_NOT_WRITABLE',     '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0438 \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_SETTINGS_TPL_NOT_WRITABLE', '\u0424\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u043c\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_SAVE_SUCCESS',              '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b');\n    define('LANG_CP_ORDER_SUCCESS',             '\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d');\n    define('LANG_CP_PERMISSIONS_SUCCESS',       '\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b');\n\n    define('LANG_CP_SETTINGS_DEBUG_MODE',       '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043e\u0442\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_SETTINGS_EMULATE_LAG',      '\u0418\u043c\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438');\n\n    define('LANG_CP_SETTINGS_CACHE_CLEAN',      '\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0435\u0448');\n\n    define('LANG_CP_ADDONS_DATA_ERROR',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0437\u0436\u0435.');\n    define('LANG_CP_ADDONS_CURL_ERROR',         '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 CURL. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438\u0437 <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430</a>.');\n    define('LANG_CP_INSTALL_PACKAGE_LINK_HINT', '\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0432 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439</a>');\n    define('LANG_CP_INSTALL_BY_LINK',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0441 URL-\u0430\u0434\u0440\u0435\u0441\u0430');\n    define('LANG_CP_OFICIAL_ADDONS',            '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_INSTALL_PACKAGE',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_DO_INSTALL',                '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c');\n    define('LANG_CP_DO_UPDATE',                 '\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c');\n    define('LANG_CP_LAST_UPDATE',               '\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_INSTALL_COMPATIBILITY_YES', '\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e \u0441 \u0432\u0430\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 InstantCMS');\n    define('LANG_CP_INSTALL_COMPATIBILITY_NO',  '\u041d\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f \u0441 \u0432\u0430\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 InstantCMS');\n    define('LANG_CP_NO_ADDONS',                 '\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_FIND_ADDON_TITLE',          '\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIND_ADDON_FREE',           '\u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435');\n    define('LANG_CP_FIND_ADDON_BUY',            '\u0422\u043e\u043b\u044c\u043a\u043e \u043f\u043b\u0430\u0442\u043d\u044b\u0435');\n    define('LANG_CP_FIND_FOUND',                '\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443');\n    define('LANG_CP_PACKAGE_VIDEO',             '\u0412\u0438\u0434\u0435\u043e');\n    define('LANG_CP_PACKAGE_VIDEO_TITLE',       '\u0412\u0438\u0434\u0435\u043e \u043e\u0431\u0437\u043e\u0440');\n    define('LANG_CP_PACKAGE_DEMO',              '\u0414\u0435\u043c\u043e');\n    define('LANG_CP_PACKAGE_BUY',               '\u041a\u0443\u043f\u0438\u0442\u044c \u0437\u0430 %s');\n    define('LANG_CP_PACKAGE_BUY_UPDATE',        '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_PACKAGE_INSTALLEDT',        '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e');\n    define('LANG_CP_PACKAGE_INSTALLED_HINT',    '%s \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_PACKAGE_DELETE_CONTROLLERS', '\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u00ab%s\u00bb');\n    define('LANG_CP_PACKAGE_DELETE_WIDGETS',     '\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u0432\u0438\u0436\u0435\u0442\u0430 \u00ab%s\u00bb');\n    define('LANG_CP_PACKAGE_DELETE_HINT',       '\u041d\u0430\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435, \u043e\u043d\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f. \u0423 InstantCMS \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f (\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c).');\n    define('LANG_CP_ADDDONS_DS_INSTALLED',      '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435');\n    define('LANG_CP_INSTALL_PACKAGE_DONE',      '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430');\n    define('LANG_CP_INSTALL_PACKAGE_DONE_INFO', '\u041f\u0430\u043a\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_INSTALL_PACKAGE_NOT_CLEARED', '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f <b>%s</b> \u043d\u0435 \u0431\u044b\u043b\u0430 \u043e\u0447\u0438\u0449\u0435\u043d\u0430 \u0438\u0437-\u0437\u0430 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0438 \u043f\u0440\u0430\u0432, \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u044d\u0442\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e');\n    define('LANG_CP_INSTALL_PACKAGE_INFO',      '\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0430\u043a\u0435\u0442\u0435');\n    define('LANG_CP_INSTALL_PACKAGE_FILE',      '\u0424\u0430\u0439\u043b \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_PACKAGE_FILE_HINT', '\u0424\u0430\u0439\u043b \u0441 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c <b>.zip</b>');\n    define('LANG_CP_INSTALL_ERR_HINT',          '\u0421\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u0435');\n    define('LANG_CP_INSTALL_ERR_FIX',           '\u0420\u0435\u0448\u0435\u043d\u0438\u0435');\n    define('LANG_CP_INSTALL_ERR_WA',            '\u041e\u0431\u0445\u043e\u0434 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b');\n    define('LANG_CP_INSTALL_NOT_WRITABLE',      '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f <b>%s</b> \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_HINT', '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_FIX',  '\u0412\u044b\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 777 \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_WA',   '\u0421\u043c\u0435\u043d\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0430 <b>.zip</b>, \u0440\u0430\u0441\u043f\u0430\u043a\u0443\u0439\u0442\u0435 \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_CUSTOM', '\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\", \u0435\u0441\u043b\u0438 \u0432\u044b \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u043b\u0438 \u043f\u0430\u043a\u0435\u0442 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE', '\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e parse_ini_file');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_HINT', '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_FIX', '\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0445\u043e\u0441\u0442\u0435\u0440\u0443 \u0441 \u043f\u0440\u043e\u0441\u044c\u0431\u043e\u0439 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <b>parse_ini_file</b> \u0434\u043b\u044f PHP \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n    define('LANG_CP_INSTALL_NOT_ZIP',           '\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0443 ZIP-\u0430\u0440\u0445\u0438\u0432\u043e\u0432');\n    define('LANG_CP_INSTALL_NOT_ZIP_HINT',      '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0430\u0440\u0445\u0438\u0432\u0430 \u043d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_ZIP_FIX',       '\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0445\u043e\u0441\u0442\u0435\u0440\u0443 \u0441 \u043f\u0440\u043e\u0441\u044c\u0431\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u043a\u043b\u0430\u0441\u0441\u0430 <b>ZipArchive</b> \u0434\u043b\u044f PHP \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n    define('LANG_CP_INSTALL_NOT_ZIP_WA',        '\u0421\u043c\u0435\u043d\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0430 <b>.zip</b>, \u0440\u0430\u0441\u043f\u0430\u043a\u0443\u0439\u0442\u0435 \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_ERROR',             '\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_PERM_ERROR',        '\u0424\u0430\u0439\u043b %s \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_CP_INSTALL_ZIP_ERROR',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_FTP_NOTICE',        '\u0414\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430 \u0432 \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438 \u0441\u0430\u0439\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b FTP-\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0438\u043c\u0435\u044e\u0449\u0435\u0433\u043e \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043e\u043a \u0438 \u0444\u0430\u0439\u043b\u043e\u0432.');\n    define('LANG_CP_INSTALL_FTP_PRIVACY',       '\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0438 \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u0435\u0441\u0441\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043e \u043a\u043e\u043d\u0446\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u0435\u0430\u043d\u0441\u0430');\n    define('LANG_CP_PACKAGE_AUTHOR',            '\u0410\u0432\u0442\u043e\u0440 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DESCRIPTION',       '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_CONTENTS',          '\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DEPENDS',           '\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DEPENDS_CORE',      '\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u044f\u0434\u0440\u0430');\n    define('LANG_CP_PACKAGE_DEPENDENT_TYPE',      '\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 %s <a href=\"%s\" target=\"_blank\">%s</a>');\n    define('LANG_CP_PACKAGE_DEPENDENT_COMPONENT', '\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_PACKAGE_DEPENDENT_WIDGET',    '\u0432\u0438\u0434\u0436\u0435\u0442');\n    define('LANG_CP_INSTALLED',     '\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_NOT_INSTALLED', '\u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_PACKAGE_DEPENDS_PACKAGE',   '\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0436\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_PACKAGE_DUBLE_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u0438 %s \u0443\u0436\u0435 \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d. \u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442, \u0442\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0435\u0433\u043e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435.');\n    define('LANG_CP_PACKAGE_UPDATE_ERROR', '%s \"%s\" \u0438\u043c\u0435\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0435\u0440\u0441\u0438\u0438 <b>%s</b>. \u0423 \u0432\u0430\u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0432\u0435\u0440\u0441\u0438\u044f <b>%s</b>. \u0414\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0430\u043a\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.');\n    define('LANG_CP_PACKAGE_UPDATE_IS_UPDATED', '\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439. \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f.');\n    define('LANG_CP_PACKAGE_TYPE', '\u0422\u0438\u043f \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_NONAME', '\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0440');\n    define('LANG_CP_PACKAGE_UPDATE_NOINSTALL', '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u043e\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e');\n\n    define('LANG_CP_COMPONENT_IS_DELETED',      '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \"%s\" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d');\n    define('LANG_CP_DELETE_COMPONENT_CONFIRM',  '\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \"{title}\"?');\n\n    define('LANG_CP_FTP_ACCOUNT',               '\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b FTP');\n    define('LANG_CP_FTP_HOST',                  '\u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_FTP_PORT',                  '\u041f\u043e\u0440\u0442');\n    define('LANG_CP_FTP_USER',                  '\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_FTP_PASS',                  '\u041f\u0430\u0440\u043e\u043b\u044c');\n    define('LANG_CP_FTP_PATH',                  '\u041f\u0443\u0442\u044c \u043f\u0430\u043f\u043a\u0438 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_FTP_PATH_HINT',             '<a href=\"https://docs.instantcms.ru/manual/addons/ftppath\" target=\"_blank\">\u041a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0443\u0442\u044c?</a>');\n    define('LANG_CP_CHECK',                     '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c');\n    define('LANG_CP_FTP_IS_PASV',               '\u041f\u0430\u0441\u0441\u0438\u0432\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438');\n    define('LANG_CP_FTP_CONNECT_FAILED',        '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0445\u043e\u0441\u0442\u0430 \u0438 \u043f\u043e\u0440\u0442\u0430');\n    define('LANG_CP_FTP_AUTH_FAILED',           '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044f');\n    define('LANG_CP_FTP_UPLOAD_FAILED',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u0443\u0442\u0438 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0430\u0432');\n    define('LANG_CP_FTP_MKDIR_FAILED',          '\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u0443\u0442\u0438 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0430\u0432');\n\tdefine('LANG_CP_FTP_NO_ROOT',\t\t\t\t'\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u0430\u043f\u043a\u0430 %s \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n\tdefine('LANG_CP_FTP_BAD_ROOT',\t\t\t\t'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0443\u0442\u0438: InstantCMS 2 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0432 <strong>%s</strong>');\n\tdefine('LANG_CP_FTP_CHECK',\t\t\t\t    '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 FTP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f');\n\tdefine('LANG_CP_FTP_CONNECTION_INFO',       '\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 %s');\n\tdefine('LANG_CP_FTP_NO_ERRORS',             '\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u043e.');\n\tdefine('LANG_CP_FTP_ROOT_LIST_TITLE',       '\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f');\n\n    define('LANG_CP_FTP_SAVE_TO_SESSION',   '\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b ftp \u0432 \u0441\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_FTP_SAVE_TO_SESSION_HINT', '\u042d\u0442\u043e \u043d\u0435\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0435\u0441\u043b\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u043e\u0442 \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0433\u043e \u0430\u0432\u0442\u043e\u0440\u0430');\n    define('LANG_CP_FTP_SKIP',\t\t\t\t'\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0448\u0430\u0433');\n    define('LANG_CP_FTP_SKIP_HINT',\t\t\t'\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0448\u0430\u0433, \u0435\u0441\u043b\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043d\u0430 FTP \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0440\u0443\u0447\u043d\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432 <a href=\"https://docs.instantcms.ru/manual/addons\">\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438</a>');\n\n    define('ERR_VALIDATE_UNIQUE_FIELD',         '\u041f\u043e\u043b\u0435 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442');\n    define('LANG_CP_BACK_TO_SITE',              '\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442');\n    define('LANG_CP_3RDPARTY_CREDITS',          '\u041f\u0440\u0438 \u0443\u0447\u0430\u0441\u0442\u0438\u0438');\n\n    define('LANG_MODERATOR_ADD',             '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430');\n    define('LANG_MODERATOR_ADD_HINT',        '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c');\n    define('LANG_MODERATOR_APPROVED_COUNT',  '\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e');\n    define('LANG_MODERATOR_DELETED_COUNT',   '\u0423\u0434\u0430\u043b\u0435\u043d\u043e');\n    define('LANG_MODERATOR_IDLE_COUNT',      '\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435');\n    define('LANG_MODERATOR_ASSIGNED_DATE',   '\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d');\n    define('LANG_MODERATOR_TRASH_LEFT_TIME', '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435');\n    define('LANG_MODERATOR_ALREADY',         '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u0443\u0436\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c');\n    define('LANG_MODERATORATION_OPTIONS',    '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_MODERATION_TRASH_NO_REMOVE', '\u0411\u0435\u0441\u0441\u0440\u043e\u0447\u043d\u043e');\n    define('LANG_MODERATION_NOT_NEEDED',      '\u041d\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043b\u0430\u0441\u044c');\n    define('LANG_MODERATION_IN_TRASH',        '\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435');\n    define('LANG_MODERATION_IN_TRASH_TIME',   '\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435, \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d \u0447\u0435\u0440\u0435\u0437 %s');\n    define('LANG_MODERATION_LOGS',            '\u041b\u043e\u0433 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0439');\n\n    define('LANG_CP_CHECK_NESTED',                  '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u044c\u0435\u0432');\n    define('LANG_CP_NS_NO_TABLES',                  '\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438');\n    define('LANG_CP_NS_SUCCESSFUL',                 '\u0423\u0441\u043f\u0435\u0448\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438');\n    define('LANG_CP_NS_UNSUCCESSFUL',               '\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438');\n    define('LANG_CP_NS_FIX',                        '\u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c');\n    define('LANG_CP_NS_FIX_SUCCESS',                '\u0412\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b %s \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b');\n    define('LANG_CP_NS_FIX_ERROR',                  '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b %s');\n    define('LANG_CP_SCHEDULER',                     '\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a');\n    define('LANG_CP_SCHEDULER_TASK',                '\u0417\u0430\u0434\u0430\u0447\u0430');\n    define('LANG_CP_SCHEDULER_TASK_ADD',            '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443');\n    define('LANG_CP_SCHEDULER_TASK_EDIT',           '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443');\n    define('LANG_CP_SCHEDULER_TASK_CONTROLLER',     '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_SCHEDULER_TASK_HOOK',           '\u0425\u0443\u043a');\n    define('LANG_CP_SCHEDULER_TASK_PERIOD',         '\u041f\u0435\u0440\u0438\u043e\u0434, \u043c\u0438\u043d.');\n    define('LANG_CP_SCHEDULER_IS_STRICT_PERIOD',    '\u0421\u0442\u0440\u043e\u0433\u043e\u0435 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0438\u043e\u0434\u0443');\n    define('LANG_CP_SCHEDULER_TASK_LAST_RUN',       '\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043f\u0443\u0441\u043a');\n    define('LANG_CP_SCHEDULER_TASK_DELETE_CONFIRM', '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443?');\n    define('LANG_CP_SCHEDULER_TASK_CREATED',        '\u0417\u0430\u0434\u0430\u0447\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_SCHEDULER_TASK_IS_ACTIVE',      '\u0417\u0430\u0434\u0430\u0447\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430');\n    define('LANG_CP_SCHEDULER_TASK_RUN',            '\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441');\n    define('LANG_CP_SCHEDULER_TASK_RAN',            '\u0417\u0430\u0434\u0430\u0447\u0430 &laquo;%s&raquo; \u0431\u044b\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 %s');\n    define('LANG_CP_SCHEDULER_TASK_RUN_FAIL',       '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 &laquo;%s&raquo;');\n\n    define('LANG_CP_UPDATE_CHECK',                  '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_UPDATE_DATE',                   '\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430');\n    define('LANG_CP_UPDATE_DOWNLOAD',               '\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_UPDATE_DOWNLOAD_FAIL',          '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_UPDATE_INSTALL',                '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_UPDATE_AVAILABLE',              '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 %s');\n    define('LANG_CP_UPDATE_NOT_AVAILABLE',          '\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439. \u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e %s \u043e\u0442 %s.');\n    define('LANG_CP_UPDATE_CHECK_FAIL',             '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439');\n    define('LANG_CP_UPDATE_MANUAL_1',               '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 CURL.');\n    define('LANG_CP_UPDATE_MANUAL_2',               '\u0421\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u0430\u0440\u0445\u0438\u0432 \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 <a href=\"'.href_to('admin', 'install').'\">\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439</a>');\n\n    define('LANG_HELP_URL_CONTENT',                 'https://docs.instantcms.ru/manual/content');\n    define('LANG_HELP_URL_CONTENT_CATS',            'https://docs.instantcms.ru/manual/content/cats');\n    define('LANG_HELP_URL_CTYPES',                  'https://docs.instantcms.ru/manual/ctypes');\n    define('LANG_HELP_URL_CTYPES_BASIC',            'https://docs.instantcms.ru/manual/ctypes/add');\n    define('LANG_HELP_URL_CTYPES_LABELS',           'https://docs.instantcms.ru/manual/ctypes/labels');\n    define('LANG_HELP_URL_CTYPES_FIELDS',           'https://docs.instantcms.ru/manual/ctypes/fields');\n    define('LANG_HELP_URL_CTYPES_FIELD',            'https://docs.instantcms.ru/manual/ctypes/fields/add');\n    define('LANG_HELP_URL_CTYPES_PROPS',            'https://docs.instantcms.ru/manual/ctypes/props');\n    define('LANG_HELP_URL_CTYPES_PROP',             'https://docs.instantcms.ru/manual/ctypes/props/add');\n    define('LANG_HELP_URL_CTYPES_FILTERS',          'https://docs.instantcms.ru/manual/ctypes/filters');\n    define('LANG_HELP_URL_CTYPES_FILTERS_ADD',      'https://docs.instantcms.ru/manual/ctypes/filters/add');\n    define('LANG_HELP_URL_CTYPES_DATASETS',         'https://docs.instantcms.ru/manual/ctypes/datasets');\n    define('LANG_HELP_URL_CTYPES_DATASET',          'https://docs.instantcms.ru/manual/ctypes/datasets/add');\n    define('LANG_HELP_URL_CTYPES_RELATIONS',        'https://docs.instantcms.ru/manual/ctypes/relations');\n    define('LANG_HELP_URL_CTYPES_PERMS',            'https://docs.instantcms.ru/manual/ctypes/permissions');\n    define('LANG_HELP_URL_CTYPES_MODERATORS',       'https://docs.instantcms.ru/manual/ctypes/moderators');\n    define('LANG_HELP_URL_MENU',                    'https://docs.instantcms.ru/manual/menu');\n    define('LANG_HELP_URL_WIDGETS',                 'https://docs.instantcms.ru/manual/widgets');\n    define('LANG_HELP_URL_WIDGETS_CFG',             'https://docs.instantcms.ru/manual/widgets/config');\n    define('LANG_HELP_URL_WIDGETS_PAGES',           'https://docs.instantcms.ru/manual/widgets/pages');\n    define('LANG_HELP_URL_COMPONENTS',              'https://docs.instantcms.ru/manual/components');\n    define('LANG_HELP_URL_INSTALL',                 'https://docs.instantcms.ru/manual/addons');\n    define('LANG_HELP_URL_COM_FORMS',               'https://docs.instantcms.ru/manual/components/forms');\n    define('LANG_HELP_URL_COM_REDIRECT',            'https://docs.instantcms.ru/manual/components/redirect');\n    define('LANG_HELP_URL_COM_AUTH',                'https://docs.instantcms.ru/manual/components/auth');\n    define('LANG_HELP_URL_COM_MODERATION',          'https://docs.instantcms.ru/manual/components/moderation');\n    define('LANG_HELP_URL_COM_ACTIVITY',            'https://docs.instantcms.ru/manual/components/activity');\n    define('LANG_HELP_URL_COM_GROUPS',              'https://docs.instantcms.ru/manual/components/groups');\n    define('LANG_HELP_URL_COM_RECAPTCHA',           'https://docs.instantcms.ru/manual/components/recaptcha');\n    define('LANG_HELP_URL_COM_COMMENTS',            'https://docs.instantcms.ru/manual/components/comments');\n\tdefine('LANG_HELP_URL_COM_IMAGES',\t\t\t\t'https://docs.instantcms.ru/manual/components/images');\n\tdefine('LANG_HELP_URL_COM_SUBSCRIPTIONS',\t\t'https://docs.instantcms.ru/manual/components/subscriptions');\n    define('LANG_HELP_URL_COM_USERS',               'https://docs.instantcms.ru/manual/components/users');\n    define('LANG_HELP_URL_COM_USERS_MIGRATON',      'https://docs.instantcms.ru/manual/components/users/migrations');\n    define('LANG_HELP_URL_COM_MARKITUP',            'https://docs.instantcms.ru/manual/components/markitup');\n    define('LANG_HELP_URL_COM_RATING',              'https://docs.instantcms.ru/manual/components/rating');\n    define('LANG_HELP_URL_COM_SEARCH',              'https://docs.instantcms.ru/manual/components/search');\n    define('LANG_HELP_URL_COM_TAGS',                'https://docs.instantcms.ru/manual/components/tags');\n    define('LANG_HELP_URL_COM_RSS',                 'https://docs.instantcms.ru/manual/components/rss');\n    define('LANG_HELP_URL_COM_SITEMAP',             'https://docs.instantcms.ru/manual/components/sitemap');\n\tdefine('LANG_HELP_URL_COM_PHOTOS',\t\t\t\t'https://docs.instantcms.ru/manual/components/photos');\n    define('LANG_HELP_URL_USERS',                   'https://docs.instantcms.ru/manual/users');\n    define('LANG_HELP_URL_USERS_USER',              'https://docs.instantcms.ru/manual/users/user');\n    define('LANG_HELP_URL_USERS_GROUP',             'https://docs.instantcms.ru/manual/users/group');\n    define('LANG_HELP_URL_SETTINGS',                'https://docs.instantcms.ru/manual/settings');\n    define('LANG_HELP_URL_SETTINGS_GLOBAL',         'https://docs.instantcms.ru/manual/settings/global');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER',      'https://docs.instantcms.ru/manual/settings/scheduler');\n    define('LANG_HELP_URL_CHECK_NESTED',            'https://docs.instantcms.ru/manual/settings/check_nested');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER_TASK', 'https://docs.instantcms.ru/manual/settings/scheduler/task');\n    define('LANG_HELP_URL_EVENTS',                  'https://docs.instantcms.ru/manual/settings/events');\n    define('LANG_HELP_URL_COM_MESSAGES',                'https://docs.instantcms.ru/manual/components/messages');\n    define('LANG_ZIP_ERROR_10', '\u0424\u0430\u0439\u043b \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442');\n    define('LANG_ZIP_ERROR_21', '\u041d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b\u0439 ZIP-\u0430\u0440\u0445\u0438\u0432');\n    define('LANG_ZIP_ERROR_18', '\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442');\n    define('LANG_ZIP_ERROR_14', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438');\n    define('LANG_ZIP_ERROR_9', '\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430');\n    define('LANG_ZIP_ERROR_19', '\u0424\u0430\u0439\u043b \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f zip \u0430\u0440\u0445\u0438\u0432\u043e\u043c');\n    define('LANG_ZIP_ERROR_11', '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b');\n    define('LANG_ZIP_ERROR_5', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_ZIP_ERROR_4', '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430');\n    define('LANG_INSTALL_NOTICE_SYSTEM_FILE', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041f\u0430\u043a\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b CMS. \u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443, \u0435\u0441\u043b\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043f\u0430\u043a\u0435\u0442\u0430 \u0412\u0430\u043c \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d.');\n    define('LANG_ADMIN_NOTICES', '\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_ADMIN_ACCESS_DENIED_BY_IP', '\u0414\u043e\u0441\u0442\u0443\u043f \u0441 \u0432\u0430\u0448\u0435\u0433\u043e ip \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d');\n    define('LANG_MAILCHECK_ERROR', '\u041f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: <br><b>%s</b>');\n    define('LANG_MAILCHECK_SUCCESS', '\u041f\u0438\u0441\u044c\u043c\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e');\n    define('LANG_MAILCHECK_MENU', '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0447\u0442\u044b');\n    define('LANG_CP_DB_CHARSET_HINT', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041f\u0435\u0440\u0435\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u044d\u0442\u043e\u0439 \u043e\u043f\u0446\u0438\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0431\u044d\u043a\u0430\u043f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445!');\n    define('LANG_MAILCHECK_TO', '\u041a\u043e\u043c\u0443');\n    define('LANG_MAILCHECK_SUBJECT', '\u0422\u0435\u043c\u0430');\n    define('LANG_MAILCHECK_BODY', '\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435');\n    define('LANG_EVENTS_MANAGEMENT', '\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c\u0438');\n    define('LANG_EVENTS_MANAGEMENT_HINT', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e \u0440\u0430\u0437\u0434\u0435\u043b \u0434\u043b\u044f \u043e\u043f\u044b\u0442\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0435.');\n    define('LANG_EVENTS_REFRESH',    '\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445');\n    define('LANG_EVENTS_DELETED',    '\u042d\u0442\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0443\u0436\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b');\n    define('LANG_EVENTS_LISTENER',   '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_EVENTS_EVENT_NAME', '\u0421\u043e\u0431\u044b\u0442\u0438\u0435');\n    define('LANG_EVENTS_ALLOW_NEW',  '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u043e\u0432\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f');\n    define('LANG_EVENTS_SUCCESS',  '\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b');\n    define('LANG_CONFIRM_LOGIN',  '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CONFIRM_LOGIN_HINT',  '\u0412\u044b \u043f\u044b\u0442\u0430\u0435\u0442\u0435\u0441\u044c \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0434 \u0438\u043c\u0435\u043d\u0435\u043c \"%s\" \u0438\u0437 \u043d\u0435\u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430.');\n    define('LANG_CONFIRM_LOGIN_HINT1',  '\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c, \u0447\u0442\u043e \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0435\u0441\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c.');\n    define('LANG_ADMIN_IS_DELETED', '\u0423\u0434\u0430\u043b\u0451\u043d?');\n    define('LANG_ADMIN_CONTROLLER_SLUG', 'Url \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_QUEUE', '\u041e\u0447\u0435\u0440\u0435\u0434\u044c');\n    define('LANG_CP_QUEUE_TITLE', '\u041e\u0447\u0435\u0440\u0435\u0434\u044c %s');\n    define('LANG_CP_QUEUE_DATE_CREATED', '\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_DATE_STARTED', '\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_STATUS', '\u0421\u0442\u0430\u0442\u0443\u0441');\n    define('LANG_CP_QUEUE_QUEUE_RESTART', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430, \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c');\n    define('LANG_CP_QUEUE_STATUS1', '\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f');\n    define('LANG_CP_QUEUE_STATUS2', '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439');\n    define('LANG_CP_QUEUE_STATUS3', '\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_STATUS4', '\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f %s-\u0439 \u0440\u0430\u0437');\n    define('LANG_CP_SUBJECT', '\u0421\u0443\u0431\u044a\u0435\u043a\u0442');\n    define('LANG_CP_FIELD_AUTHOR_ACCESS', '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0430 \u0438\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430');\n    define('LANG_CP_FIELD_READING',       '\u0427\u0442\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_EDITING',       '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435');\n    define('LANG_WD_CONTENT_FILTER_DETECT', '\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438');\n    define('LANG_CP_TEMPLATE_NO_ICONS_SELECT', '\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u0431\u043e\u0440 \u0438\u043a\u043e\u043d\u043e\u043a.');\n    define('LANG_CP_TEMPLATE_ICONS_PHP', '\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a PHP \u043a\u043e\u0434');\n    define('LANG_CP_TEMPLATE_ICONS', '\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043a\u043e\u043d\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_COMPILE_TIME', '\u0412\u0440\u0435\u043c\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 %s \u0441\u0435\u043a.');\n    define('LANG_CP_FORMAT', '\u0424\u043e\u0440\u043c\u0430\u0442');\n", "<?php\n\n/**\n * \u0420\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044e, \u0437\u0430\u0442\u0435\u043c \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 CamelCase\n * \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \"my_own_string\" => \"MyOwnString\", \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \"_\"\n *\n * @param char $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\n * @param string $string \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430\n * @return string\n */\nfunction string_to_camel($delimiter, $string) {\n\n    $result = '';\n    $words  = explode($delimiter, mb_strtolower($string));\n\n    foreach ($words as $word) {\n        $result .= ucfirst($word);\n    }\n\n    return $result;\n}\n\n/**\n * \u0412\u044b\u0440\u0435\u0437\u0430\u0435\u0442 \u0442\u0435\u0433\u0438 <br> \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438\n * @param string $string\n * @return string\n */\nfunction string_strip_br($string) {\n    return str_replace('<br>', '', str_replace('<br/>', '', $string));\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b\n * \u0415\u0441\u043b\u0438 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0435\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\n *\n * \u041f\u0440\u0435\u0444\u0438\u043a\u0441 LANG_ \u0432 \u0438\u043c\u0435\u043d\u0438 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\n * \u0420\u0435\u0433\u0438\u0441\u0442\u0440 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\n *\n * @param string $constant \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b\n * @param string $default\n * @return string\n */\nfunction string_lang($constant, $default = false) {\n\n    $constant = strtoupper($constant);\n\n    if (!$default) { $default = $constant; }\n\n    if (strpos($constant, 'LANG_') === false) {\n        $constant = 'LANG_' . $constant;\n    }\n\n    if (defined($constant)) {\n        $string = constant($constant);\n    } else {\n        $string = $default;\n    }\n\n    return $string;\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043c\u0430\u0441\u043a\u043e\u0439 URL \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440:\n *      \"my*mask is %st place\" => \"my(.*)mask is ([0-9]+) place\"\n *\n * @param string $mask\n * @return string\n */\nfunction string_mask_to_regular($mask) {\n    return str_replace([\n        '%', '/', '*', '?', '{slug}'\n    ], [\n        '([0-9]+)', '\\/', '(.*)', '\\?', '([a-z0-9\\-]*)'\n    ], trim($mask));\n}\n\n/**\n * \u0420\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0438, \u0430 \u043a\u0430\u0436\u0434\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0430 ID \u0438 VALUE, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 |,\n * \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044f \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0438:\n *      \"id1 | value1 \\n id2 | value2\"\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430:\n *      array('id1' => 'value1', 'id2' => 'value2')\n *\n * @param string $string_list\n * @return array\n */\nfunction string_parse_list($string_list) {\n\n    if (!$string_list) { return []; }\n\n    $user = cmsUser::getInstance();\n\n    $rows = explode(\"\\n\", $string_list);\n\n    $list = [];\n\n    foreach ($rows as $row) {\n\n        if (!$row) { continue; }\n\n        $row = trim($row);\n\n        if (preg_match('/^{(.*)}$/i', $row, $matches)) {\n            if (!$user->is_logged) { continue; }\n            $row = trim($matches[1]);\n        }\n\n        if (!mb_strstr($row, '|')) {\n            $list[] = ['value' => trim($row)];\n        } else {\n            list($id, $value) = explode('|', $row);\n            $list[] = [\n                'id'    => trim($id),\n                'value' => trim($value)\n            ];\n        }\n    }\n\n    return $list;\n}\n\nfunction string_explode_list($string_list, $index_as_value = false) {\n\n    $items = [];\n    $rows  = explode(\"\\n\", trim($string_list));\n\n    if (is_array($rows)) {\n        foreach ($rows as $count => $row) {\n            if (mb_strpos($row, '|')) {\n                list($index, $value) = explode('|', trim($row));\n            } else {\n                $index = (string)($index_as_value ? $row : ($count + 1));\n                $value = $row;\n            }\n            $items[trim($index)] = trim($value);\n        }\n    }\n\n    return $items;\n}\n\n/**\n * \u041f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a\u043b\u044e\u0447\u0438 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u043a \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u043c\u0443 \u0442\u0438\u043f\u0443\n *\n * @param array $array \u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n * @return array\n */\nfunction array_keys_to_string_type($array) {\n\n    $keys        = array_keys($array);\n    $values      = array_values($array);\n    $string_keys = array_map('strval', $keys);\n\n    return array_combine($string_keys, $values);\n}\n\n/**\n * \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e string_parse_list() \u0438 \u0438\u0449\u0435\u0442 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0432 \u043d\u0435\u0433\u043e\n * \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438\n *\n * @param string $string\n * @param string $mask_list\n * @return boolean\n */\nfunction string_in_mask_list($string, $mask_list) {\n\n    if (!$mask_list) { return false; }\n\n    $mask_list = explode(\"\\n\", $mask_list);\n\n    foreach ($mask_list as $item) {\n\n        $regular = string_mask_to_regular($item);\n        $regular = \"/^{$regular}$/iu\";\n\n        if (preg_match($regular, $string)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u0443\u044e \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u0438\u043d\u044b\n *\n * @param integer $length \u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438\n * @param string $seed \u0421\u043e\u043b\u044c\n * @return string\n */\nfunction string_random($length = 32, $seed = '') {\n\n    $salt = bin2hex(random_bytes(128));\n\n    $string = md5(md5($salt . chr(random_int(0, 127)) . chr(random_int(0, 127))) . chr(random_int(0, 127)) . md5(md5($seed)));\n\n    if ($length < 32) {\n        $string = substr($string, 0, $length);\n    }\n\n    return $string;\n}\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u0430\u0442\u043e\u0439 \u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c\n * \u0432 \u0432\u0438\u0434\u0435 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043e \u0441\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f\u043c\u0438\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: \"2 \u0433\u043e\u0434\u0430 16 \u0434\u043d\u0435\u0439 5 \u0447\u0430\u0441\u043e\u0432 12 \u043c\u0438\u043d\u0443\u0442\"\n *\n * @param string $date\n * @param array $options \u041c\u0430\u0441\u0441\u0438\u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f: y, m, d, h, i, from_date\n * @param bool $is_add_back \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043b\u043e\u0432\u043e \"\u043d\u0430\u0437\u0430\u0434\"?\n * @return string\n */\nfunction string_date_age($date, $options, $is_add_back = false) {\n\n    if (!$date) { return ''; }\n\n    $date2 = !empty($options['from_date']) ? $options['from_date'] : false;\n\n    $diff = real_date_diff($date, $date2);\n\n    $diff_str = [];\n\n    if (in_array('y', $options) && $diff[0]) {\n        $diff_str[] = html_spellcount($diff[0], LANG_YEAR1, LANG_YEAR2, LANG_YEAR10);\n    }\n    if (in_array('m', $options) && $diff[1]) {\n        $diff_str[] = html_spellcount($diff[1], LANG_MONTH1, LANG_MONTH2, LANG_MONTH10);\n    }\n    if (in_array('d', $options) && $diff[2]) {\n        $diff_str[] = html_spellcount($diff[2], LANG_DAY1, LANG_DAY2, LANG_DAY10);\n    }\n    if (in_array('h', $options) && $diff[3]) {\n        $diff_str[] = html_spellcount($diff[3], LANG_HOUR1, LANG_HOUR2, LANG_HOUR10);\n    }\n    if (in_array('i', $options) && $diff[4]) {\n        $diff_str[] = html_spellcount($diff[4], LANG_MINUTE1, LANG_MINUTE2, LANG_MINUTE10);\n    }\n\n    if (!$diff_str) {\n        return LANG_SECONDS_AGO;\n    } else {\n        $diff_str = trim(implode(' ', $diff_str));\n        return $is_add_back ? sprintf(LANG_DATE_AGO, $diff_str) : $diff_str;\n    }\n}\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u0430\u0442\u043e\u0439 \u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c\n * \u0432 \u0432\u0438\u0434\u0435 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043e \u0441\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u0435\u043c\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: \"3 \u0434\u043d\u044f\"\n *\n * @param string | array $date \u0414\u0430\u0442\u0430 \u0438\u043b\u0438 \u043c\u0430\u0441\u0441\u0438\u0432 \u0434\u0432\u0443\u0445 \u0434\u0430\u0442\n * @param bool $is_add_back \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043b\u043e\u0432\u043e \"\u043d\u0430\u0437\u0430\u0434\"?\n * @return string\n */\nfunction string_date_age_max($date, $is_add_back = false) {\n\n    if (!$date) { return ''; }\n\n    if(is_array($date)){\n        $diff = real_date_diff($date[0], $date[1]);\n    } else {\n        $diff = real_date_diff($date);\n    }\n\n    $diff_str = '';\n\n    if ($diff[0]) {\n        $diff_str = html_spellcount($diff[0], LANG_YEAR1, LANG_YEAR2, LANG_YEAR10);\n    } else\n    if ($diff[1]) {\n        $diff_str = html_spellcount($diff[1], LANG_MONTH1, LANG_MONTH2, LANG_MONTH10);\n    } else\n    if ($diff[2]) {\n        $diff_str = html_spellcount($diff[2], LANG_DAY1, LANG_DAY2, LANG_DAY10);\n    } else\n    if ($diff[3]) {\n        $diff_str = html_spellcount($diff[3], LANG_HOUR1, LANG_HOUR2, LANG_HOUR10);\n    } else\n    if ($diff[4]) {\n        $diff_str = html_spellcount($diff[4], LANG_MINUTE_1, LANG_MINUTE2, LANG_MINUTE10);\n    }\n\n    if (!$diff_str) {\n        return LANG_JUST_NOW;\n    } else {\n        return $is_add_back ? sprintf(LANG_DATE_AGO, $diff_str) : $diff_str;\n    }\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u0434\u0430\u0442\u0430\u043c\u0438 \u0432 \u0432\u0438\u0434\u0435 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\n *\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b:\n *  0 => \u0447\u0438\u0441\u043b\u043e \u043b\u0435\u0442\n *  1 => \u0447\u0438\u0441\u043b\u043e \u043c\u0435\u0441\u044f\u0446\u0435\u0432\n *  2 => \u0447\u0438\u0441\u043b\u043e \u0434\u043d\u0435\u0439\n *  3 => \u0447\u0438\u0441\u043b\u043e \u0447\u0430\u0441\u043e\u0432\n *  4 => \u0447\u0438\u0441\u043b\u043e \u043c\u0438\u043d\u0443\u0442\n *  5 => \u0447\u0438\u0441\u043b\u043e \u0441\u0435\u043a\u0443\u043d\u0434\n *\n * @author \u041e\u043b\u0435\u0433 \u0421\u0430\u0432\u0432\u0430\u0442\u0435\u0435\u0432 @ http://savvateev.org\n *\n * @param string $date1\n * @param string $date2\n * @return array\n */\nfunction real_date_diff($date1, $date2 = null) {\n\n    $diff = [];\n\n    if (!is_string($date1)) { return false; }\n\n    //\u0415\u0441\u043b\u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u0434\u0430\u0442\u0430 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u0430 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u0435\u0435 \u043a\u0430\u043a \u0442\u0435\u043a\u0443\u0449\u0443\u044e\n    if (!$date2) {\n        $cd = getdate();\n    } else {\n        $cd = getdate(strtotime($date2));\n    }\n\n    $date2 = $cd['year'] . '-' . $cd['mon'] . '-' . $cd['mday'] . ' ' . $cd['hours'] . ':' . $cd['minutes'] . ':' . $cd['seconds'];\n\n    //\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u0434\u0430\u0442\u044b \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\n    $pattern = '/(\\d+)\\-(\\d+)\\-(\\d+)(\\s+(\\d+)\\:(\\d+)\\:(\\d+))?/';\n    preg_match($pattern, $date1, $matches);\n    $d1 = [intval($matches[1]), intval($matches[2]), intval($matches[3]), intval($matches[5]), intval($matches[6]), intval($matches[7])];\n    preg_match($pattern, $date2, $matches);\n    $d2 = [intval($matches[1]), intval($matches[2]), intval($matches[3]), intval($matches[5]), intval($matches[6]), intval($matches[7])];\n\n    //\u0415\u0441\u043b\u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u0434\u0430\u0442\u0430 \u043c\u0435\u043d\u044c\u0448\u0435 \u0447\u0435\u043c \u043f\u0435\u0440\u0432\u0430\u044f, \u043c\u0435\u043d\u044f\u0435\u043c \u0438\u0445 \u043c\u0435\u0441\u0442\u0430\u043c\u0438\n    for ($i = 0; $i < count($d2); $i++) {\n        if ($d2[$i] > $d1[$i]) {\n            break;\n        }\n        if ($d2[$i] < $d1[$i]) {\n            $t  = $d1;\n            $d1 = $d2;\n            $d2 = $t;\n            break;\n        }\n    }\n\n    //\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0434\u0430\u0442\u0430\u043c\u0438 (\u043a\u0430\u043a \u0432 \u0441\u0442\u043e\u043b\u0431\u0438\u043a)\n    $md1   = [31, $d1[0] % 4 || (!($d1[0] % 100) && $d1[0] % 400) ? 28 : 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    $md2   = [31, $d2[0] % 4 || (!($d2[0] % 100) && $d2[0] % 400) ? 28 : 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    $min_v = [NULL, 1, 1, 0, 0, 0];\n    $max_v = [NULL, 12, $d2[1] == 1 ? $md2[11] : $md2[$d2[1] - 2], 23, 59, 59];\n    for ($i = 5; $i >= 0; $i--) {\n        if ($d2[$i] < $min_v[$i]) {\n            $d2[$i - 1]--;\n            $d2[$i] = $max_v[$i];\n        }\n        $diff[$i] = $d2[$i] - $d1[$i];\n        if ($diff[$i] < 0) {\n            $d2[$i - 1]--;\n            $i == 2 ? $diff[$i] += $md1[$d1[1] - 1] : $diff[$i] += $max_v[$i] - $min_v[$i] + 1;\n        }\n    }\n\n    //\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n    return $diff;\n}\n\n/**\n * \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u0443\u0435\u0442 \u0434\u0430\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 \"\u0441\u0435\u0433\u043e\u0434\u043d\u044f\", \"\u0432\u0447\u0435\u0440\u0430\", \"1 \u044f\u043d\u0432\u0430\u0440\u044f 2017\"\n *\n * @param string $date \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0434\u0430\u0442\u0430. \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u043e\u0442\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435, \u0442\u0430\u043a \u0438 timestamp\n * @param boolean $is_time \u0414\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0447\u0430\u0441\u043e\u043c \u0438 \u043c\u0438\u043d\u0443\u0442\u0430\u043c\u0438\n * @return string\n */\nfunction string_date_format($date, $is_time = false) {\n\n    if (is_empty_value($date)) {\n        return '';\n    }\n\n    if (!is_numeric($date)) {\n        $timestamp = strtotime($date);\n    } else {\n        $timestamp = $date;\n    }\n\n    $item_date = date('j F Y', $timestamp);\n\n    $today_date     = date('j F Y');\n    $yesterday_date = date('j F Y', time() - 3600 * 24);\n\n    switch ($item_date) {\n        case $today_date:\n            $result = LANG_TODAY;\n            break;\n        case $yesterday_date:\n            $result = LANG_YESTERDAY;\n            break;\n        default:\n            $result = lang_date($item_date);\n    }\n\n    if ($is_time) {\n\n        $result .= ' ' . LANG_IN . ' ' . date('H:i', $timestamp);\n    }\n\n    return $result;\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {file_name%icon_name} \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 svg \u0438\u043a\u043e\u043d\u043a\u0443\n * \u0433\u0434\u0435 file_name - \u0438\u043c\u044f svg \u0444\u0430\u0439\u043b\u0430 \u043f\u043e \u043f\u0443\u0442\u0438 /templates/\u0448\u0430\u0431\u043b\u043e\u043d/images/icons/\n * icon_name - \u0438\u043c\u044f \u0438\u043a\u043e\u043d\u043a\u0438 svg \u0441\u043f\u0440\u0430\u0439\u0442\u0430\n *\n * @param string $string\n * @return string\n */\nfunction string_replace_svg_icons($string){\n\n    $matches_count = preg_match_all('/{([a-z0-9_\\-]+)%([a-z0-9_\\-]+)}/i', $string, $matches);\n\n    if ($matches_count){\n        for($i=0; $i<$matches_count; $i++){\n\n            $tag  = $matches[0][$i];\n            $file = $matches[1][$i];\n            $name = $matches[2][$i];\n\n            $string = str_replace($tag, html_svg_icon($file, $name, 16, false), $string);\n        }\n    }\n\n    return $string;\n}\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {user.property} \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 property\n * \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 cmsUser\n *\n * @param string $string\n * @return string\n */\nfunction string_replace_user_properties($string) {\n\n    $matches_count = preg_match_all('/{user.([a-z0-9_]+)}/i', $string, $matches);\n\n    if ($matches_count) {\n\n        $user = cmsUser::getInstance();\n\n        for ($i = 0; $i < $matches_count; $i++) {\n\n            $tag      = $matches[0][$i];\n            $property = $matches[1][$i];\n\n            if (isset($user->$property)) {\n                $string = str_replace($tag, $user->$property, $string);\n            }\n        }\n    }\n\n    return $string;\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 $string \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {key}, \u0433\u0434\u0435 key - \u044d\u0442\u043e \u043a\u043b\u044e\u0447\n * \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $data \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n *\n * @param string $string\n * @param array $data\n */\nfunction string_replace_keys_values($string, $data) {\n\n    if (!$string) {\n        return '';\n    }\n\n    if (strpos($string, '{') === false) { return $string; }\n\n    foreach ($data as $k => $v) {\n        if (is_array($v) || is_object($v)) {\n            unset($data[$k]);\n        }\n    }\n\n    $keys = array_map(function ($key) {\n        return '{' . $key . '}';\n    }, array_keys($data));\n\n    return str_replace($keys, array_values($data), $string);\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 $string \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {key}, \u0433\u0434\u0435 key - \u044d\u0442\u043e \u043a\u043b\u044e\u0447\n * \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $data \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n * \u043e\u0442\u043b\u0438\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u044b\u0448\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c\u0438\n * \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {age|html_spellcount:\u0433\u043e\u0434:\u0433\u043e\u0434\u0430:\u043b\u0435\u0442} \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0430\u043f\u0438\u0448\u0435\u0442 \"21 \u0433\u043e\u0434, 22 \u0433\u043e\u0434\u0430, 29 \u043b\u0435\u0442\"\n * \u043f\u0440\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0438 age 21, 22 \u0438 29 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\n * \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {nickname:\u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s \u0441\u0430\u043c\u044b\u0439 \u043b\u0443\u0447\u0448\u0438\u0439} \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \"\u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u0441\u0430\u043c\u044b\u0439 \u043b\u0443\u0447\u0448\u0438\u0439\"\n * \u043f\u0440\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044f nickname \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $data \"\u0412\u0430\u0441\u0438\u043b\u0438\u0439\"\n *\n * @param string $string\n * @param array $data\n */\nfunction string_replace_keys_values_extended($string, $data) {\n\n    if (!$string) {\n        return '';\n    }\n\n    $matches_count = preg_match_all('/{([\u0430-\u044f\u0451a-z]{1}[^}\\n]+)}/ui', $string, $matches);\n\n    if ($matches_count) {\n\n        for ($i = 0; $i < $matches_count; $i++) {\n\n            $tag      = $matches[0][$i];\n            $property = $matches[1][$i];\n\n            $func                 = false;\n            $func_params          = [];\n            $func_params_prop_key = 0;\n\n            // \u0435\u0441\u0442\u044c \u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439\n            if (strpos($property, '|') !== false) {\n                $params = explode('|', $property);\n                // \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u0444\u0443\u043d\u043a\u0446\u0438\u044f\n                $func   = $params[1];\n                if (function_exists($func) || strpos($func, ':') !== false) {\n\n                    // \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u043a\u0430\u043a $property\n                    $property = $params[0];\n                    // $property \u0441\u0442\u0430\u0432\u0438\u043c \u043a\u0430\u043a \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0444\u0443\u043d\u043a\u0446\u0438\u0438\n                    $func_params = [$property];\n                    // \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0435\u0441\u0442\u044c \u043b\u0438 \u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\n                    if (strpos($func, ':') !== false) {\n                        $par  = explode(':', $func);\n                        $func = $par[0];\n                        unset($par[0]);\n                        if (function_exists($func)) {\n                            foreach ($par as $k => $p) {\n                                // \u0435\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u043c\u0430\u0441\u0441\u0438\u0432\n                                if (strpos($p, '=') !== false) {\n                                    $out = [];\n                                    parse_str($p, $out);\n                                    $par[$k] = $out;\n                                }\n                            }\n                            $func_params = $func_params + $par;\n                        } else {\n                            $func = false;\n                        }\n                    }\n                } else {\n\n                    // \u0437\u043d\u0430\u0447\u0438\u0442 \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430\n                    $values = explode('|', $property);\n\n                    $string = str_replace($tag, $values[mt_rand(0, (count($values) - 1))], $string);\n\n                    continue;\n                }\n            } else\n            // \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0433\u043d\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 sprintf\n            if (strpos($property, ':') !== false) {\n                $params               = explode(':', $property);\n                $property             = $params[0];\n                $func                 = 'sprintf';\n                $func_params          = array_reverse($params);\n                $func_params_prop_key = 1;\n            }\n\n            // \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043c\u0430\u0441\u0441\u0438\u0432\u0430, \u0442.\u0435. \u043a\u043b\u044e\u0447\u0438 \u0432\u0438\u0434\u0430 {item.key}\n            if (strpos($property, '.') === false) {\n                $data_property = isset($data[$property]) ? $data[$property] : null;\n            } else {\n                $data_property = array_value_recursive($property, $data, '.');\n            }\n\n            if ($data_property !== null && !is_array($data_property) && !is_object($data_property)) {\n\n                if ($func && function_exists($func)) {\n\n                    $func_params[$func_params_prop_key] = $data_property;\n\n                    $data_property = call_user_func_array($func, $func_params);\n                }\n\n                $string = str_replace($tag, $data_property, $string);\n            } else {\n                $string = str_replace($tag, '', $string);\n            }\n        }\n    }\n\n    return $string;\n}\n\n/**\n * \u0414\u0435\u043b\u0430\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0433\u0438\u043f\u0435\u0440\u0441\u0441\u044b\u043b\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438\n *\n * @param string $string\n * @return string\n */\nfunction string_make_links($string){\n    return preg_replace('@(https?:\\/\\/([\\-\\w\\.]+[\\-\\w])+(:\\d+)?(\\/([\\w/_\\.#\\-]*(\\?\\S+)?[^\\.\\s])?)?)@', '<a href=\"$1\" class=\"auto-link\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>', $string);\n}\n\n//============================================================================//\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u043c \u0441\u0430\u043c\u044b\u0445 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445\n * \u0441\u043b\u043e\u0432 \u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430\n *\n * @param string $text\n * @param int $min_length \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430\n * @param int $limit \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0432 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0435\n * @return string\n */\nfunction string_get_meta_keywords($text, $min_length = 5, $limit = 10) {\n\n    if(!$text){ return ''; }\n\n    $stat = [];\n\n    $text = str_replace([\"\\n\", '<br>', '<br/>'], ' ', $text);\n    $text = strip_tags($text);\n    $text = mb_strtolower($text);\n\n    $stopwords = string_get_stopwords(cmsCore::getLanguageName());\n\n    $words = explode(' ', $text);\n\n    foreach ($words as $word) {\n\n        $word = trim($word);\n        $word = str_replace(['(', ')', '+', '-', '.', '!', ':', '{', '}', '|', '\"', ',', \"'\"], '', $word);\n        $word = preg_replace(\"/\\.,\\(\\)\\{\\}/ui\", '', $word);\n\n        if ($stopwords && in_array($word, $stopwords)) {\n            continue;\n        }\n\n        if (mb_strlen($word) >= $min_length) {\n            $stat[$word] = isset($stat[$word]) ? $stat[$word] + 1 : 1;\n        }\n    }\n\n    asort($stat);\n    $stat = array_reverse($stat, true);\n    $stat = array_slice($stat, 0, $limit, true);\n\n    return implode(', ', array_keys($stat));\n}\n\n/**\n * \u041f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0442\u0435\u0433\u0435 meta description\n *\n * @param string $text\n * @param int $limit \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\n * @return string\n */\nfunction string_get_meta_description($text, $limit = 250) {\n    return string_short($text, $limit);\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432 \u0441\u0442\u043e\u043f \u0441\u043b\u043e\u0432\n * @staticvar array $words\n * @param string $lang \u042f\u0437\u044b\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 ru, en\n * @return array\n */\nfunction string_get_stopwords($lang = 'ru') {\n    static $words = null;\n    if (isset($words[$lang])) {\n        return $words[$lang];\n    }\n    $file = PATH . '/system/languages/' . $lang . '/stopwords/stopwords.php';\n    if (file_exists($file)) {\n        $words[$lang] = include $file;\n    } else {\n        $words[$lang] = [];\n    }\n    return $words[$lang];\n}\n\n/**\n * \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u0438\u043d\u044b (\u0438\u043b\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f/\u0441\u043b\u043e\u0432\u0430),\n * \u0443\u0434\u0430\u043b\u044f\u044f HTML-\u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0443\n *\n * @param string $string\n * @param integer $length \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\n * @param string $postfix \u0421\u0442\u0440\u043e\u043a\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u0430\u044f \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443, \u0435\u0441\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u043d\u0443\u044e \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u043e\u0431\u0440\u0435\u0437\u0430\u0442\u044c\n * @param string $type \u0422\u0438\u043f \u043e\u0431\u0440\u0435\u0437\u043a\u0438:\n *              s (sentence) - \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044e\n *              w (word) - \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u0441\u043b\u043e\u0432\u0443\n *              \u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0438\u043c\u0432\u043e\u043b - \u043e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435\n * @param array $clean_tags \u041c\u0430\u0441\u0441\u0438\u0432 \u0442\u0435\u0433\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0434\u043e \u0432\u044b\u0440\u0435\u0437\u0430\u0442\u044c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c \u043f\u0435\u0440\u0435\u0434 \u043e\u0447\u0438\u0441\u0442\u043a\u043e\u0439\n * @return string\n */\nfunction string_short($string, $length = 0, $postfix = '', $type = 's', $clean_tags = []) {\n\n    if(!$string){ return ''; }\n\n    if ($clean_tags) {\n        $string = preg_replace('#<(' . implode('|', $clean_tags) . ')[^>]*?>.*</\\\\1>#sui', '', $string);\n    }\n\n    // \u0441\u0442\u0440\u043e\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432\n    // \u0438 \u043f\u043e\u0441\u043b\u0435 strip_tags \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u043b\u043e\u0432\u0430\u043c\u0438\n    $string = str_replace([\"\\n\", \"\\r\", '<br>', '<br/>', '</p>'], ' ', $string);\n    $string = strip_tags($string);\n    $string = preg_replace('#\\s\\s+#u', ' ', $string);\n\n    if (!$length || mb_strlen($string) <= $length) {\n        return $string;\n    }\n\n    $length -= min($length, mb_strlen($postfix));\n\n    switch (strtolower($type)) {\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044e\n        case 's':\n            $string = mb_substr($string, 0, $length);\n            preg_match('/^(.+)([\\.!?\u2026]+)(.*)$/u', $string, $matches);\n            if (!empty($matches[2])) {\n                $string = $matches[1] . $matches[2];\n            }\n            break;\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u0441\u043b\u043e\u0432\u0443\n        case 'w':\n            $string = mb_substr($string, 0, $length + 1);\n            preg_match('/^(.*)([\\W]+)(\\w*)$/uU', $string, $matches);\n            if (!empty($matches[1])) {\n                $string = $matches[1];\n            }\n            break;\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f\n        default:\n            $string = mb_substr($string, 0, $length);\n    }\n\n    return $string . $postfix;\n}\n\n/**\n * \u0412\u044b\u0440\u0435\u0437\u0430\u0435\u0442 \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438 CSS/JS-\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438, \u0442\u0430\u0431\u0443\u043b\u044f\u0446\u0438\u0438, \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u044b \u0441\u0442\u0440\u043e\u043a \u0438 \u043b\u0438\u0448\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u0435\u043b\u044b\n *\n * @param string $string\n * @return string\n */\nfunction string_compress($string) {\n\n    $string = preg_replace('!/\\*[^*]*\\*+([^/][^*]*\\*+)*/!', '', $string);\n    $string = preg_replace('/\\s{2,}/', '', $string);\n    $string = str_replace([\"\\r\\n\", \"\\r\", \"\\n\", \"\\t\"], '', $string);\n\n    return $string;\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0432\u0435\u0440\u0445\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\n * multi-bytes ucfirst\n *\n * @param string $string\n * @return string\n */\nfunction string_ucfirst($string) {\n    return mb_strtoupper(mb_substr($string, 0, 1)) . mb_substr($string, 1);\n}\n\n//============================================================================//\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438\n *\n * \u0410\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0438 array_column \u0438\u0437 PHP 5.5\n *\n * @param type $collection\n * @param type $key\n * @param type $value\n * @return type\n */\nfunction array_collection_to_list($collection, $key, $value = false) {\n\n    $value = $value ? $value : $key;\n\n    $list = [];\n\n    if (is_array($collection)) {\n        foreach ($collection as $item) {\n            $list[$item[$key]] = $item[$value];\n        }\n    }\n\n    return $list;\n}\n\n/**\n * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f array_filter\n * @param array $input\n * @return array\n */\nfunction array_filter_recursive($input) {\n    foreach ($input as &$value) {\n        if (is_array($value)) {\n            $value = array_filter_recursive($value);\n        }\n    }\n    return array_filter($input);\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\n * \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 $needle\n *\n * @param array|string $needle \u041f\u0443\u0442\u044c \u0434\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 key:subkey:subsubkey\n * @param array $haystack \u041c\u0430\u0441\u0441\u0438\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0438\u0449\u0435\u043c\n * @param string $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u044e\u0447\u0435\u0439 \u0432 \u043f\u0443\u0442\u0438, \u0435\u0441\u043b\u0438 $needle \u0441\u0442\u0440\u043e\u043a\u0430\n * @return mixed \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 null, \u0435\u0441\u043b\u0438 \u043a\u043b\u044e\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\n */\nfunction array_value_recursive($needle, $haystack, $delimiter = ':') {\n\n    if (!is_array($haystack)) { return null; }\n\n    $name_parts = !is_array($needle) ? explode($delimiter, $needle) : $needle;\n\n    foreach ($name_parts as $name) {\n        if (!is_array($haystack) || !array_key_exists($name, $haystack)) {\n            return null;\n        } else {\n            $haystack = $haystack[$name];\n            if ($haystack === null) {\n                $haystack = false;\n            }\n        }\n    }\n\n    return $haystack;\n}\n\n/**\n * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043c\u0430\u0441\u0441\u0438\u0432\n * \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0439 $path\n *\n * @param array|string $path \u041f\u0443\u0442\u044c \u0434\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 key:subkey:subsubkey\n * @param array $array \u0418\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n * @param mixed $value \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430\n * @param string $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u044e\u0447\u0435\u0439 \u0432 \u043f\u0443\u0442\u0438, \u0435\u0441\u043b\u0438 $path \u0441\u0442\u0440\u043e\u043a\u0430\n * @return mixed \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 $array\n */\nfunction set_array_value_recursive($path, $array, $value, $delimiter = ':') {\n\n    $name_parts = !is_array($path) ? explode($delimiter, $path) : $path;\n\n    $_array = &$array;\n\n    foreach ($name_parts as $name) {\n        $_array = &$_array[$name];\n    }\n\n    $_array = $value;\n\n    return $array;\n}\n\n/**\n * \u0421\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442 \u0434\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u043f\u043e \u043f\u043e\u043b\u044e (\u043f\u043e\u043b\u044f\u043c)\n *\n * $fields \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u043c\u044f \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438,\n * \u0442\u0430\u043a \u0438 \u043c\u0430\u0441\u0441\u0438\u0432 \u043f\u043e\u043b\u0435\u0439 \u0441 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043e\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\n * array(array('by' => 'ordering', 'to' => 'asc'), array('by' => 'title', 'to' => 'desc'))\n *\n * @param array &$array\n * @param string | array $fields\n * @param string $direction\n * @return boolean\n */\nfunction array_order_by(&$array, $fields, $direction = 'asc') {\n\n    if (!$array) { return false; }\n\n    if (is_string($fields)) {\n        $list = [[\n            'by' => $fields,\n            'to' => $direction\n        ]];\n    } else {\n        $list = $fields;\n    }\n\n    $args = [];\n\n    foreach ($array as $k => $item) {\n\n        $key = 0;\n\n        foreach ($list as $order) {\n            $args[$key][$k] = $item[$order['by']];\n            $key++;\n            $args[$key] = constant('SORT_' . strtoupper($order['to']));\n            $key++;\n        }\n    }\n\n    $args[] = &$array;\n\n    return call_user_func_array('array_multisort', $args);\n}\n\nfunction multi_array_unique($array) {\n\n    $result = array_map('unserialize', array_unique(array_map('serialize', $array)));\n\n    foreach ($result as $key => $value) {\n        if (is_array($value)) {\n            $result[$key] = multi_array_unique($value);\n        }\n    }\n\n    return $result;\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u044f\u0437\u044b\u043a\u0430\n *\n * @param string $field \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0431\u0435\u0437 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430\n * @param array $data \u041c\u0430\u0441\u0441\u0438\u0432 \u0434\u0430\u043d\u043d\u044b\u0445\n * @return mixed\n */\nfunction get_localized_value($field, $data) {\n\n    $lang = cmsCore::getLanguageHrefPrefix();\n\n    $field_lang = $field . ($lang ? '_' . $lang : '');\n\n    // \u0415\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0451\u043d\u043d\u043e\u0435\n    if (array_key_exists($field_lang, $data)) {\n        return $data[$field_lang];\n    }\n\n    // \u0415\u0441\u0442\u044c \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430\n    if (array_key_exists($field, $data)) {\n        return $data[$field];\n    }\n\n    return null;\n}\n\n/**\n * \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u0443\u0435\u0442 \u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439\n *\n * @param float $value \u0427\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439\n * @param integer $decimals \u041a\u043e\u043b-\u0432\u043e \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439\n * @param integer $thousands_sep \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u0442\u044b\u0441\u044f\u0447\u0435\u0439\n * @return string\n */\nfunction nf_amount($value, $decimals = 2, $thousands_sep = ' ') {\n\n    $value = number_format(floatval($value), $decimals, '.', $thousands_sep);\n\n    return rtrim(rtrim($value, '0'), '.');\n}\n\n/**\n * \u041f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439 \u043a \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0432\u0438\u0434\u0443\n *\n * @param float $value\n * @return string\n */\nfunction bc_format($value) {\n    return sprintf('%.'.BCMATHSCALE.'f', $value);\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 ipv4/ipv6 \u0430\u0434\u0440\u0435\u0441 \u0432\n * \u0443\u043f\u0430\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f\n *\n * @param string $ip\n * @return string\n */\nfunction string_iptobin($ip) {\n    if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4)) {\n        return current(unpack('A4', inet_pton($ip)));\n    } elseif (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV6)) {\n        return current(unpack('A16', inet_pton($ip)));\n    } else {\n        return null;\n    }\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u0443\u043f\u0430\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0439 ipv4/ipv6 \u0430\u0434\u0440\u0435\u0441 \u0432\n * \u0447\u0438\u0442\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442\n *\n * @param string $str\n * @return string\n */\nfunction string_bintoip($str) {\n    if(!$str){ return null; }\n    $len = strlen($str);\n    if($len < 4){ $len = 4; }\n    if ($len === 16 || $len === 4) {\n        return inet_ntop(pack('A' . $len, $str));\n    } else {\n        return null;\n    }\n}\n\n/**\n * \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043b\u043e\u043a\u0430\u0446\u0438\u044e \u043f\u043e ip \u0430\u0434\u0440\u0435\u0441\u0443\n *\n * @param string $ip\n * @param boolean $return_array\n * @return string|array\n */\nfunction string_ip_to_location($ip, $return_array = false) {\n\n    // \u0421\u0442\u0430\u0440\u0430\u044f \u0431\u0430\u0437\u0430\n    // \u0422\u0435\u043e\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c https://github.com/maxmind/GeoIP2-php\n    if(function_exists('geoip_record_by_name')){\n\n        $location  = [];\n\n        $data = geoip_record_by_name($ip);\n\n        if($return_array && !empty($data['country_code'])){\n            $location['code'] = $data['country_code'];\n        }\n\n        if(!empty($data['country_name'])){\n            $location['country'] = $data['country_name'];\n        }\n\n        if(!empty($data['city'])){\n            $location['city'] = $data['city'];\n        }\n\n        return $return_array ? $location : implode(', ', $location);\n    }\n\n    return $return_array ? [] : '';\n}\n\n/**\n * \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0438\u0437 HTML \u0442\u0435\u043a\u0441\u0442\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u0442\u0438\n * \u0438\u0437 \u0442\u0435\u0433\u043e\u0432 <img>\n *\n * @param string $text\n * @return array\n */\nfunction string_html_get_images_path($text) {\n\n    $upload_root = cmsConfig::get('upload_root');\n\n    $matches = $paths = [];\n\n    preg_match_all('#<img src=\"([^\"]+)\"#uis', $text, $matches, PREG_SET_ORDER);\n\n    if($matches){\n        foreach($matches as $match){\n\n            if(empty($match[1])){ continue; }\n            if(strpos($match[1], 'http') === 0){ continue; }\n\n            $path = $match[1];\n\n            if(strpos($path, $upload_root) === 0){\n                $path = str_replace($upload_root, '', $path);\n            }\n\n            $paths[] = $path;\n        }\n    }\n\n    return $paths;\n}\n\n/**\n * \u041a\u043e\u0434\u0438\u0440\u0443\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0447\u0430\u0441\u0442\u0438 URL\n *\n * @param string $str\n * @return string\n */\nfunction string_urlencode($str) {\n\n    $str = urlencode($str);\n\n    return str_replace(['%2F'], ['%252f'], $str);\n}\n\n/**\n * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435\n * @param mixed $value\n * @return boolean\n */\nfunction is_empty_value($value) {\n    return empty($value) && !is_numeric($value);\n}\n//============================================================================//\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e\n * \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438\n *\n * @param mixed $var\n * @param boolean $halt\n*/\nfunction dump($var, $halt = true) {\n    echo '<pre>';\n    print_r($var);\n    echo '</pre>';\n    if ($halt) { die(); }\n}\n", "<?php $this->addTplJSNameFromContext('files'); ?>\n<?php if ($field->title) { ?><label><?php echo $field->title; ?></label><?php } ?>\n\n<?php if ($value){ ?>\n    <?php $file = is_array($value) ? $value : cmsModel::yamlToArray($value); ?>\n    <div id=\"file_<?php echo $field->element_name; ?>\" class=\"value\">\n        <span class=\"name h5\">\n            <a href=\"<?php echo $field->getDownloadURL($file); ?>\"><?php echo $file['name']; ?></a>\n        </span>\n        <span class=\"size mx-2\"><?php echo files_format_bytes($file['size']); ?></span>\n        <a class=\"btn btn-sm btn-danger delete\" href=\"javascript:\" onclick=\"icms.files.remove('<?php echo $field->element_name; ?>')\" title=\"<?php echo LANG_DELETE; ?>\" data-toggle=\"tooltip\" data-placement=\"right\">\n            <?php html_svg_icon('solid', 'minus-circle'); ?>\n        </a>\n    </div>\n<?php } ?>\n\n<div id=\"file_<?php echo $field->element_name; ?>_upload\" <?php if ($value) { ?>style=\"display:none\"<?php } ?>>\n    <div class=\"input-group mb-1\">\n        <div class=\"custom-file\">\n            <?php echo html_file_input($field->element_name, $field->data['attributes']); ?>\n            <label class=\"custom-file-label\" for=\"<?php echo $field->id; ?>\" data-browse=\"<?php echo LANG_SELECT; ?>\"><?php echo LANG_PARSER_FILE; ?></label>\n        </div>\n    </div>\n    <?php echo html_input('hidden', $field->element_name, ''); ?>\n    <?php if($field->data['allowed_extensions']){ ?>\n        <div class=\"hint text-muted small\"><?php printf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', array_map(function($val) { return trim($val); }, explode(',', mb_strtoupper($field->data['allowed_extensions']))))); ?></div>\n    <?php } ?>\n    <?php if($field->data['max_size_mb']){ ?>\n        <div class=\"hint text-muted small\"><?php printf(LANG_PARSER_FILE_SIZE_FIELD_HINT, files_format_bytes($field->data['max_size_mb'])); ?></div>\n    <?php } ?>\n</div>", "<?php if(!$rows){ ?>\n<p class=\"alert alert-warning mt-4\" role=\"alert\"><?php echo LANG_CP_WIDGETS_ROW_NONE; ?></p>\n<?php } ?>\n<?php foreach ($rows as $row) { ?>\n<div class=\"row no-gutters widgets-layout-scheme align-items-center<?php if($row['parent_id']){ ?> disable-sortable<?php } ?>\" id=\"row-<?php echo $row['id']; ?>\" data-id=\"<?php echo $row['id']; ?>\">\n    <div class=\"layout-row-title <?php if(!$row['parent_id'] ){ ?>layout-row-parent<?php } ?> col-sm-12 <?php if(!$row['parent_id'] && $rows_titles_pos == 'left'){ ?> col-lg-2<?php } ?> filled p-2 <?php if($rows_titles_pos == 'hide'){ ?>d-none<?php } else { ?>d-flex<?php } ?> justify-content-between\">\n        {cell:<?php echo $row['title']; ?>}\n        <div class=\"layout-scheme-actions align-items-center\">\n            <a class=\"add mr-1 text-success text-decoration-none add-scheme-row ajax-modal\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['col_add', $row['id']]); ?>\" title=\"<?php echo LANG_CP_WIDGETS_ADD_COL; ?>\">\n                <i class=\"icon-plus icons\"></i>\n            </a>\n            <a class=\"edit mr-1 text-decoration-none edit-scheme-row ajax-modal\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['row_edit', $row['id']]); ?>\" title=\"<?php echo LANG_EDIT; ?>\">\n                <i class=\"icon-pencil icons\"></i>\n            </a>\n            <a class=\"delete text-danger text-decoration-none delete-scheme-row\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['row_delete', $row['id']]); ?>\" title=\"<?php echo LANG_DELETE; ?>\" onclick=\"return confirm('<?php echo LANG_CP_WIDGETS_ROW_DEL_CONFIRM; ?>')\">\n                <i class=\"icon-close icons\"></i>\n            </a>\n        </div>\n    </div>\n    <?php if(!$row['parent_id']){ ?>\n        <div class=\"w-100 d-md-none\"></div>\n    <?php } ?>\n    <div class=\"col-sm-12 layout-row-body <?php if(!$row['parent_id'] ){ ?>layout-row-parent<?php } ?> <?php if(!$row['parent_id'] && $rows_titles_pos == 'left'){ ?>col-lg-10<?php } ?> bg-white\">\n        <div class=\"row no-gutters widgets-layout-scheme-col-wrap <?php echo $row['options']['vertical_align']; ?> <?php echo $row['options']['horizontal_align']; ?>\">\n        <?php foreach ($row['cols'] as $col) { ?>\n            <?php if(!empty($col['options']['cut_before'])){ ?>\n                <div class=\"w-100\"></div>\n            <?php } ?>\n            <?php\n            $width_hint = LANG_AUTO; $col_class = 'col-sm'; $col_width_list = [];\n            foreach ($col['options'] as $key => $value) {\n                if(strpos($key, 'col_') === false){\n                    continue;\n                }\n                if(empty($col['options'][$key])){\n                    continue;\n                }\n                $col_type = preg_replace('#(col\\-[a-z]+\\-)#ui', '', $value);\n                if(is_numeric($col_type)){\n                    $width_hint = round((8.333333333*$col_type), 2).'%';\n                    $col_width_list[] = $width_hint;\n                } elseif($col_type === 'auto'){\n                    $width_hint = LANG_CP_WIDGETS_COL_AUTO;\n                }\n                $col_class = $value;\n            }\n            ?>\n            <div class=\"<?php echo $col_class; ?> p-1 bg-white widgets-layout-scheme-col\" id=\"col-<?php echo $col['id']; ?>\" data-id=\"<?php echo $col['id']; ?>\">\n                <?php if(!empty($col['rows']['before'])){ ?>\n                    <?php $this->renderChild('widgets_scheme', ['rows' => $col['rows']['before'], 'rows_titles_pos' => $rows_titles_pos]); ?>\n                <?php } ?>\n                <div class=\"layout-col-title d-flex justify-content-between\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"<?php echo $col['name'].($col_width_list ? ': '.implode(', ', $col_width_list) : ''); ?>\">\n                    <span><?php echo $col['title']; ?> (<?php echo $width_hint; ?>)</span>\n                    <div class=\"layout-scheme-actions d-flex align-items-center\">\n                        <?php if(!$row['parent_id']){ ?>\n                        <a class=\"add mr-2 text-white text-decoration-none add-scheme-col ajax-modal\" href=\"<?php echo $this->href_to('widgets', ['row_add_ns', $col['id']]); ?>\" title=\"<?php echo LANG_CP_WIDGETS_ADD_ROW_P; ?>\">\n                            <i class=\"icon-plus icons d-block\"></i>\n                        </a>\n                        <?php } ?>\n                        <a class=\"edit mr-2 text-white text-decoration-none edit-scheme-col ajax-modal\" href=\"<?php echo $this->href_to('widgets', ['col_edit', $col['id']]); ?>\" title=\"<?php echo LANG_EDIT; ?>\">\n                            <i class=\"icon-pencil icons d-block\"></i>\n                        </a>\n                        <a class=\"delete text-warning text-decoration-none delete-scheme-col\" href=\"<?php echo $this->href_to('widgets', ['col_delete', $col['id']]); ?>\" title=\"<?php echo LANG_DELETE; ?>\" onclick=\"return confirm('<?php echo LANG_CP_WIDGETS_COL_DEL_CONFIRM; ?>')\">\n                            <i class=\"icon-close icons d-block\"></i>\n                        </a>\n                    </div>\n                </div>\n                {position:<?php echo $col['name']; ?>}\n                <?php if(!empty($col['rows']['after'])){ ?>\n                    <?php $this->renderChild('widgets_scheme', ['rows' => $col['rows']['after'], 'rows_titles_pos' => $rows_titles_pos]); ?>\n                <?php } ?>\n            </div>\n        <?php } ?>\n        </div>\n    </div>\n</div>\n<?php } ?>", "var icms = icms || {};\n\nicms.files = (function ($) {\n\n    this.url_delete = '';\n\n    this.onDocumentReady = function(){\n        $('.custom-file-input').on('change',function(){\n            $(this).next('.custom-file-label').text($(this).val().replace('C:\\\\fakepath\\\\', ''));\n        });\n    };\n\n    this.remove = function(file_id){\n\n        $('#f_'+file_id+' #file_'+file_id).remove();\n        $('#f_'+file_id+' #file_'+file_id+'_upload').show();\n        $('#f_'+file_id+' input:hidden[name='+file_id+']').val('1');\n\n        icms.events.run('icms_files_remove', file_id);\n\n    };\n\n    this.deleteByPath = function(path){\n        $.post(this.url_delete, {path: path, csrf_token: icms.forms.getCsrfToken()}, function(result){\n            if (result.error){\n                alert(result.message);\n                return false;\n            }\n        }, 'json');\n    };\n\n\treturn this;\n\n}).call(icms.files || {},jQuery);", "/*! jQuery v3.7.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(ie,e){\"use strict\";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement(\"script\");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[i.call(e)]||\"object\":typeof e}var t=\"3.7.0\",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&\"length\"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:\"jQuery\"+(t+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==i.call(e))&&(!(t=r(e))||\"function\"==typeof(n=ue.call(t,\"constructor\")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)return e.textContent;if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=ce.text(t);return n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||\"HTML\")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),\"function\"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",ve=new RegExp(\"^\"+ge+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+ge+\"+$\",\"g\");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;function p(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e}ce.escapeSelector=function(e){return(e+\"\").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",t=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",p=\"\\\\[\"+ge+\"*(\"+t+\")(?:\"+ge+\"*([*^$|!~]?=)\"+ge+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+t+\"))|)\"+ge+\"*\\\\]\",g=\":(\"+t+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+p+\")*)|.*)\\\\)|)\",v=new RegExp(ge+\"+\",\"g\"),y=new RegExp(\"^\"+ge+\"*,\"+ge+\"*\"),m=new RegExp(\"^\"+ge+\"*([>+~]|\"+ge+\")\"+ge+\"*\"),x=new RegExp(ge+\"|>\"),j=new RegExp(g),A=new RegExp(\"^\"+t+\"$\"),D={ID:new RegExp(\"^#(\"+t+\")\"),CLASS:new RegExp(\"^\\\\.(\"+t+\")\"),TAG:new RegExp(\"^(\"+t+\"|[*])\"),ATTR:new RegExp(\"^\"+p),PSEUDO:new RegExp(\"^\"+g),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+ge+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+ge+\"*(?:([+-]|)\"+ge+\"*(\\\\d+)|))\"+ge+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+f+\")$\",\"i\"),needsContext:new RegExp(\"^\"+ge+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+ge+\"*((?:-\\\\d)?\\\\d*)\"+ge+\"*\\\\)|)(?=[^-]|$)\",\"i\")},N=/^(?:input|select|textarea|button)$/i,q=/^h\\d$/i,L=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,H=/[+~]/,O=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),P=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},R=function(){V()},M=J(function(e){return!0===e.disabled&&fe(e,\"fieldset\")},{dir:\"parentNode\",next:\"legend\"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+\" \"]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&z(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute(\"id\"))?s=ce.escapeSelector(s):e.setAttribute(\"id\",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+Q(l[o]);c=l.join(\",\")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return re(t.replace(ve,\"$1\"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,\"input\")&&e.type===t}}function _(t){return function(e){return(fe(e,\"input\")||fe(e,\"button\"))&&e.type===t}}function X(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&M(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function U(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function z(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener(\"unload\",R),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,\"*\")}),le.scope=$(function(){return T.querySelectorAll(\":scope\")}),le.cssHas=$(function(){try{return T.querySelector(\":has(*,:jqfake)\"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML=\"<a id='\"+S+\"' href='' disabled='disabled'></a><select id='\"+S+\"-\\r\\\\' disabled='disabled'><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||d.push(\"\\\\[\"+ge+\"*(?:value|\"+f+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||d.push(\"~=\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||d.push(\".#.+[+~]\"),e.querySelectorAll(\":checked\").length||d.push(\":checked\"),(t=T.createElement(\"input\")).setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&d.push(\":enabled\",\":disabled\"),(t=T.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||d.push(\"\\\\[\"+ge+\"*name\"+ge+\"*=\"+ge+\"*(?:''|\\\"\\\")\")}),le.cssHas||d.push(\":has\"),d=d.length&&new RegExp(d.join(\"|\")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+\" \"]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||\"\").replace(O,P),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+\" \"];return t||(t=new RegExp(\"(^|\"+ge+\")\"+e+\"(\"+ge+\"|$)\"))&&s(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(v,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(d,e,t,h,g){var v=\"nth\"!==d.slice(0,3),y=\"last\"!==d.slice(-4),m=\"of-type\"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?\"nextSibling\":\"previousSibling\",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u=\"only\"===d&&!s&&\"nextSibling\"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,\"$1\"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||\"\")||I.error(\"unsupported lang: \"+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:X(!1),disabled:X(!0),checked:function(e){return fe(e,\"input\")&&!!e.checked||fe(e,\"option\")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,\"input\")&&\"button\"===e.type||fe(e,\"button\")},text:function(e){var t;return fe(e,\"input\")&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:U(function(){return[0]}),last:U(function(e,t){return[t-1]}),eq:U(function(e,t,n){return[n<0?n+t:n]}),even:U(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:U(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:U(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:U(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve,\" \")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&\"parentNode\"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace(ve,\"$1\"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+\" \"];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&z(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&z(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split(\"\").sort(l).join(\"\")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement(\"fieldset\"))}),ce.find=I,ce.expr[\":\"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,\"string\"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,\"parentNode\")},parentsUntil:function(e,t,n){return d(e,\"parentNode\",n)},next:function(e){return A(e,\"nextSibling\")},prev:function(e){return A(e,\"previousSibling\")},nextAll:function(e){return d(e,\"nextSibling\")},prevAll:function(e){return d(e,\"previousSibling\")},nextUntil:function(e,t,n){return d(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return d(e,\"previousSibling\",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,\"template\")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\\x20\\t\\r\\n\\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",ce.Callbacks(\"memory\"),ce.Callbacks(\"memory\"),2],[\"resolve\",\"done\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener(\"DOMContentLoaded\",P),ie.removeEventListener(\"load\",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)[\"catch\"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,\"complete\"===C.readyState||\"loading\"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener(\"DOMContentLoaded\",P),ie.addEventListener(\"load\",P));var R=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===x(n))for(s in i=!0,n)R(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},M=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(M,\"ms-\").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,X=new B,U=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,z=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(z,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:U.test(i)?JSON.parse(i):i)}catch(e){}X.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return X.hasData(e)||_.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=X.get(o),1===o.nodeType&&!_.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){X.set(this,n)}):R(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=X.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){X.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks(\"once memory\").add(function(){_.remove(e,[t+\"queue\",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=_.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,Y=new RegExp(\"^(?:([+-])=|)(\"+G+\")([a-z%]*)$\",\"i\"),Q=[\"Top\",\"Right\",\"Bottom\",\"Left\"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&K(e)&&\"none\"===ce.css(e,\"display\")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,\"\")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(ce.cssNumber[t]||\"px\"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=_.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ne[s]=u)))):\"none\"!==n&&(l[c]=\"none\",_.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,Ce=/^$|^module$|\\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement(\"div\")),(be=C.createElement(\"input\")).setAttribute(\"type\",\"radio\"),be.setAttribute(\"checked\",\"checked\"),be.setAttribute(\"name\",\"t\"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML=\"<textarea>x</textarea>\",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML=\"<option></option>\",le.option=!!xe.lastChild;var ke={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function Se(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],\"globalEval\",!t||_.get(t[n],\"globalEval\"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var je=/<|&#?\\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(Te.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),\"script\"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||\"\")&&n.push(o)}return f}var De=/^([^.]*)(?:\\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(D)||[\"\"]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(D)||[\"\"]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,\"events\")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,\"input\")&&_.get(t,\"click\")||fe(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:\"focusin\",blur:\"focusout\"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,\"handle\"),n=ce.event.fix(e);n.type=\"focusin\"===e.type?\"focus\":\"blur\",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Re=/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$/g;function Me(e,t){return fe(e,\"table\")&&fe(11!==t.nodeType?t:t.firstChild,\"tr\")&&ce(e).children(\"tbody\")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function We(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);X.hasData(e)&&(o=X.access(e),a=ce.extend({},o),X.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&\"string\"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,\"script\"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||\"\")&&!_.access(u,\"globalEval\")&&ce.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):m(u.textContent.replace(Re,\"\"),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,\"script\")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,\"script\")).length&&Ee(a,!f&&Se(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return R(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return R(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp(\"^(\"+G+\")(?!px)[a-z%]+$\",\"i\"),Xe=/^--/,Ue=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},ze=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join(\"|\"),\"i\");function Ge(e,t,n){var r,i,o,a,s=Xe.test(t),u=e.style;return(n=n||Ue(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,\"$1\")||void 0),\"\"!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+\"\":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement(\"div\"),l=C.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",le.clearCloneStyle=\"content-box\"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement(\"table\"),t=C.createElement(\"tr\"),n=C.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=[\"Webkit\",\"Moz\",\"ms\"],Je=C.createElement(\"div\").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},nt={letterSpacing:\"0\",fontWeight:\"400\"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function it(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0,l=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?(\"content\"===n&&(u-=ce.css(e,\"padding\"+Q[a],!0,i)),\"margin\"!==n&&(u-=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i))):(u+=ce.css(e,\"padding\"+Q[a],!0,i),\"padding\"!==n?u+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i):s+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Ue(e),i=(!le.boxSizingReliable()||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,r),o=i,a=Ge(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a=\"auto\"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===ce.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===ce.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=Xe.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?\"\":\"px\")),le.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return Xe.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),\"normal\"===i&&t in nt&&(i=nt[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each([\"height\",\"width\"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):ze(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Ue(e),o=!le.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,\"border\",!1,i)-.5)),s&&(r=Y.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,\"marginLeft\"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),ce.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return R(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ue(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?\"\":\"px\")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=Q[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=[\"*\"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,\"fxshow\");for(r in n.queue||(null==(a=ce._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,\"display\")),\"none\"===(c=ce.css(e,\"display\"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,\"display\"),re([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===ce.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=_.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,\"fxshow\"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&\"object\"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=_.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt(\"show\"),slideUp:gt(\"hide\"),slideToggle:gt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement(\"input\"),ct=C.createElement(\"select\").appendChild(C.createElement(\"option\")),lt.type=\"checkbox\",le.checkOn=\"\"!==lt.value,le.optSelected=ct.selected,(lt=C.createElement(\"input\")).value=\"t\",lt.type=\"radio\",le.radioValue=\"t\"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return R(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&\"radio\"===t&&fe(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(\" \")}function Ct(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function kt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return R(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,\"tabindex\");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++)i=e[o],n.indexOf(\" \"+i+\" \")<0&&(n+=i+\" \");a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(\" \"+i+\" \"))n=n.replace(\" \"+i+\" \",\" \")}a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this:this.attr(\"class\",\"\")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s=\"string\"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):\"boolean\"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&\"boolean\"!==a||((r=Ct(this))&&_.set(this,\"__className__\",r),this.setAttribute&&this.setAttribute(\"class\",r||!1===t?\"\":_.get(this,\"__className__\")||\"\"))}))},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+Tt(Ct(n))+\" \").indexOf(t))return!0;return!1}});var St=/\\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?\"\":e+\"\"})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(St,\"\"):null==e?\"\":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,\"value\");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,\"optgroup\"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each([\"radio\",\"checkbox\"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\\?/;ce.parseXML=function(e){var t,n;if(!e||\"string\"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,\"text/xml\")}catch(e){}return n=t&&t.getElementsByTagName(\"parsererror\")[0],t&&!n||ce.error(\"Invalid XML: \"+(n?ce.map(n.childNodes,function(e){return e.textContent}).join(\"\\n\"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,\"type\")?e.type:e,h=ue.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[ce.expando]?e:new ce.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,\"events\")||Object.create(null))[e.type]&&_.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\\[\\]$/,Lt=/\\r?\\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==x(e))i(n,e);else for(t in e)Pt(n+\"[\"+t+\"]\",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join(\"&\")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,\"elements\");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(\":disabled\")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,\"\\r\\n\")}}):{name:t.name,value:n.replace(Lt,\"\\r\\n\")}}).get()}});var Rt=/%20/g,Mt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\\/\\//,Bt={},_t={},Xt=\"*/\".concat(\"*\"),Ut=C.createElement(\"a\");function zt(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Ut.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Xt,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:zt(Bt),ajaxTransport:zt(_t),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+\"\").replace($t,Et.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(D)||[\"\"],null==v.crossDomain){r=C.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Ut.protocol+\"//\"+Ut.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Mt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(Rt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(At.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,\"$1\"),o=(At.test(f)?\"&\":\"?\")+\"_=\"+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader(\"If-None-Match\",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+Xt+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray(\"script\",v.dataTypes)&&ce.inArray(\"json\",v.dataTypes)<0&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(ce.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--ce.active||ce.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,\"json\")},getScript:function(e,t){return ce.get(e,void 0,t,\"script\")}}),ce.each([\"get\",\"post\"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&\"withCredentials\"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),ce.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\\?(?=&|$)|\\?\\?/;ce.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Kt.pop()||ce.expando+\"_\"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Zt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||ce.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),\"script\"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&ce.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?ce(\"<div>\").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,\"position\"),c=ce(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=ce.css(e,\"top\"),u=ce.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===ce.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===ce.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,\"borderTopWidth\",!0),i.left+=ce.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-ce.css(r,\"marginTop\",!0),left:t.left-i.left-ce.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===ce.css(e,\"position\"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;ce.fn[t]=function(e){return R(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each([\"top\",\"left\"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+\"px\":t})}),ce.each({Height:\"height\",Width:\"width\"},function(a,s){ce.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return R(this,function(e,t,n){var r;return y(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ce.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?\"\":(e+\"\").replace(en,\"$1\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},\"undefined\"==typeof e&&(ie.jQuery=ie.$=ce),ce});", "!function(e){e([\"jquery\"],function(e){return function(){function t(e,t,n){return f({type:O.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),v=e(\"#\"+t.containerId),v.length?v:(n&&(v=c(t)),v)}function i(e,t,n){return f({type:O.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){w=e}function s(e,t,n){return f({type:O.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return f({type:O.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e){var t=g();v||n(t),l(e,t)||u(t)}function d(t){var i=g();return v||n(i),t&&0===e(\":focus\",t).length?void h(t):void(v.children().length&&v.remove())}function u(t){for(var n=v.children(),i=n.length-1;i>=0;i--)l(e(n[i]),t)}function l(t,n){return t&&0===e(\":focus\",t).length?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0):!1}function c(t){return v=e(\"<div/>\").attr(\"id\",t.containerId).addClass(t.positionClass).attr(\"aria-live\",\"polite\").attr(\"role\",\"alert\"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:\"toast\",containerId:\"toast-container\",debug:!1,showMethod:\"fadeIn\",showDuration:300,showEasing:\"swing\",onShown:void 0,hideMethod:\"fadeOut\",hideDuration:1e3,hideEasing:\"swing\",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:\"toast-error\",info:\"toast-info\",success:\"toast-success\",warning:\"toast-warning\"},iconClass:\"toast-info\",positionClass:\"toast-top-right\",timeOut:5e3,titleClass:\"toast-title\",messageClass:\"toast-message\",target:\"body\",closeHtml:'<button type=\"button\">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function m(e){w&&w(e)}function f(t){function i(t){return!e(\":focus\",l).length||t?(clearTimeout(O.intervalId),l[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:function(){h(l),r.onHidden&&\"hidden\"!==b.state&&r.onHidden(),b.state=\"hidden\",b.endTime=new Date,m(b)}})):void 0}function o(){(r.timeOut>0||r.extendedTimeOut>0)&&(u=setTimeout(i,r.extendedTimeOut),O.maxHideTime=parseFloat(r.extendedTimeOut),O.hideEta=(new Date).getTime()+O.maxHideTime)}function s(){clearTimeout(u),O.hideEta=0,l.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function a(){var e=(O.hideEta-(new Date).getTime())/O.maxHideTime*100;f.width(e+\"%\")}var r=g(),d=t.iconClass||r.iconClass;if(\"undefined\"!=typeof t.optionsOverride&&(r=e.extend(r,t.optionsOverride),d=t.optionsOverride.iconClass||d),r.preventDuplicates){if(t.message===C)return;C=t.message}T++,v=n(r,!0);var u=null,l=e(\"<div/>\"),c=e(\"<div/>\"),p=e(\"<div/>\"),f=e(\"<div/>\"),w=e(r.closeHtml),O={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:T,state:\"visible\",startTime:new Date,options:r,map:t};return t.iconClass&&l.addClass(r.toastClass).addClass(d),t.title&&(c.append(t.title).addClass(r.titleClass),l.append(c)),t.message&&(p.append(t.message).addClass(r.messageClass),l.append(p)),r.closeButton&&(w.addClass(\"toast-close-button\").attr(\"role\",\"button\"),l.prepend(w)),r.progressBar&&(f.addClass(\"toast-progress\"),l.prepend(f)),l.hide(),r.newestOnTop?v.prepend(l):v.append(l),l[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),r.timeOut>0&&(u=setTimeout(i,r.timeOut),O.maxHideTime=parseFloat(r.timeOut),O.hideEta=(new Date).getTime()+O.maxHideTime,r.progressBar&&(O.intervalId=setInterval(a,10))),l.hover(s,o),!r.onclick&&r.tapToDismiss&&l.click(i),r.closeButton&&w&&w.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),i(!0)}),r.onclick&&l.click(function(){r.onclick(),i()}),m(b),r.debug&&console&&console.log(b),l}function g(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(\":visible\")||(e.remove(),e=null,0===v.children().length&&(v.remove(),C=void 0))}var v,w,C,T=0,O={error:\"error\",info:\"info\",success:\"success\",warning:\"warning\"},b={clear:r,remove:d,error:t,getContainer:n,info:i,options:{},subscribe:o,success:s,version:\"2.1.0\",warning:a};return b}()})}(\"function\"==typeof define&&define.amd?define:function(e,t){\"undefined\"!=typeof module&&module.exports?module.exports=t(require(\"jquery\")):window.toastr=t(window.jQuery)});", "/*\n\tRedactor v9.2.6\n\tUpdated: Jul 19, 2014\n\thttp://imperavi.com/redactor/\n\tCopyright (c) 2009-2014, Imperavi LLC.\n\tLicense: http://imperavi.com/redactor/license/\n\tUsage: $('#content').redactor();\n*/\n(function($)\n{\n\tvar uuid = 0;\n\n\t\"use strict\";\n\n\tvar Range = function(range)\n\t{\n\t\tthis[0] = range.startOffset;\n\t\tthis[1] = range.endOffset;\n\n\t\tthis.range = range;\n\n\t\treturn this;\n\t};\n\n\tRange.prototype.equals = function()\n\t{\n\t\treturn this[0] === this[1];\n\t};\n\n\tvar reUrlYoutube = /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig;\n\tvar reUrlVimeo = /https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/;\n    var reUrlFacebook = /^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:facebook\\.com(?:\\/[^\\/]+\\/videos\\/|\\/video\\.php\\?v=))([0-9]+)(?:.+)?$/;\n\tvar reUrlRutube = /^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru\\/video\\/)([a-z0-9]+)(?:.+)?$/;\n\n\t$.fn.redactor = function(options)\n\t{\n\t\tvar val = [];\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof options === 'string')\n\t\t{\n\t\t\tthis.each(function()\n\t\t\t{\n\t\t\t\tvar instance = $.data(this, 'redactor');\n\t\t\t\tif (typeof instance !== 'undefined' && $.isFunction(instance[options]))\n\t\t\t\t{\n\t\t\t\t\tvar methodVal = instance[options].apply(instance, args);\n\t\t\t\t\tif (methodVal !== undefined && methodVal !== instance) val.push(methodVal);\n\t\t\t\t}\n\t\t\t\telse return $.error('No such method \"' + options + '\" for Redactor');\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.each(function()\n\t\t\t{\n\t\t\t\tif (!$.data(this, 'redactor')) $.data(this, 'redactor', Redactor(this, options));\n\t\t\t});\n\t\t}\n\n\t\tif (val.length === 0) return this;\n\t\telse if (val.length === 1) return val[0];\n\t\telse return val;\n\n\t};\n\n\tfunction Redactor(el, options)\n\t{\n\t\treturn new Redactor.prototype.init(el, options);\n\t}\n\n\t$.Redactor = Redactor;\n\t$.Redactor.VERSION = '9.2.6';\n\t$.Redactor.opts = {\n\n\t\t\trangy: false,\n\n\t\t\tiframe: false,\n\t\t\tfullpage: false,\n\t\t\tcss: false,\n\n\t\t\tlang: 'en',\n\t\t\tdirection: 'ltr',\n\n\t\t\tplaceholder: false,\n\n\t\t\ttypewriter: false,\n\t\t\twym: false,\n\t\t\tmobile: true,\n\t\t\tcleanup: true,\n\t\t\ttidyHtml: true,\n\t\t\tpastePlainText: false,\n\t\t\tremoveEmptyTags: true,\n\t\t\tcleanSpaces: true,\n\t\t\tcleanFontTag: true,\n\t\t\ttemplateVars: false,\n\t\t\txhtml: false,\n\n\t\t\tvisual: true,\n\t\t\tfocus: false,\n\t\t\ttabindex: false,\n\t\t\tautoresize: true,\n\t\t\tminHeight: false,\n\t\t\tmaxHeight: false,\n\t\t\tshortcuts: {\n\t\t\t\t'ctrl+m, meta+m': \"this.execCommand('removeFormat', false)\",\n\t\t\t\t'ctrl+b, meta+b': \"this.execCommand('bold', false)\",\n\t\t\t\t'ctrl+i, meta+i': \"this.execCommand('italic', false)\",\n\t\t\t\t'ctrl+h, meta+h': \"this.execCommand('superscript', false)\",\n\t\t\t\t'ctrl+l, meta+l': \"this.execCommand('subscript', false)\",\n\t\t\t\t'ctrl+k, meta+k': \"this.linkShow()\",\n\t\t\t\t'ctrl+shift+7': \"this.execCommand('insertorderedlist', false)\",\n\t\t\t\t'ctrl+shift+8': \"this.execCommand('insertunorderedlist', false)\"\n\t\t\t},\n\t\t\tshortcutsAdd: false,\n\n\t\t\tautosave: false,\n\t\t\tautosaveInterval: 60,\n\n\t\t\tplugins: false,\n\n\t\t\tlinkProtocol: 'http://',\n\t\t\tlinkNofollow: false,\n\t\t\tlinkSize: 50,\n\t\t\tpredefinedLinks: false,\n\n\t\t\timageFloatMargin: '10px',\n\t\t\timageGetJson: false,\n\n\t\t\tdragUpload: true,\n\t\t\timageTabLink: true,\n\t\t\timageUpload: false,\n\t\t\timageUploadParam: 'file',\n\t\t\timageResizable: true,\n\n\t\t\tfileUpload: false,\n\t\t\tfileUploadParam: 'file',\n\t\t\tclipboardUpload: true,\n\t\t\tclipboardUploadUrl: false,\n\n\t\t\tsmilesUrl: '',\n\n\t\t\tdnbImageTypes: ['image/png', 'image/jpeg', 'image/gif'],\n\n\t\t\ts3: false,\n\t\t\tuploadFields: false,\n\n\t\t\tobserveImages: true,\n\t\t\tobserveLinks: true,\n\n\t\t\tmodalOverlay: true,\n\n\t\t\ttabSpaces: false,\n\t\t\ttabFocus: true,\n\n\t\t\tair: false,\n\t\t\tairButtons: ['formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist', 'outdent', 'indent'],\n\n\t\t\ttoolbar: true,\n\t\t\ttoolbarFixed: false,\n\t\t\ttoolbarFixedTarget: document,\n\t\t\ttoolbarFixedTopOffset: 0,\n\t\t\ttoolbarFixedBox: false,\n\t\t\ttoolbarExternal: false,\n\t\t\ttoolbarOverflow: false,\n\t\t\tbuttonSource: true,\n\n\t\t\tbuttons: ['html', 'undo', 'redo', 'formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist',\n\t\t\t\t\t  'outdent', 'indent', 'image', 'video', 'file', 'table', 'link', 'alignment', '|',\n\t\t\t\t\t  'horizontalrule'], /**'underline', 'alignleft', 'aligncenter', 'alignright', 'justify'**/\n\t\t\tbuttonsHideOnMobile: [],\n\n\t\t\tactiveButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist',\n\t\t\t\t\t\t\t'alignleft', 'aligncenter', 'alignright', 'justify', 'table'],\n\t\t\tactiveButtonsStates: {\n\t\t\t\tb: 'bold',\n\t\t\t\tstrong: 'bold',\n\t\t\t\ti: 'italic',\n\t\t\t\tem: 'italic',\n\t\t\t\tdel: 'deleted',\n\t\t\t\tstrike: 'deleted',\n\t\t\t\tul: 'unorderedlist',\n\t\t\t\tol: 'orderedlist',\n\t\t\t\tu: 'underline',\n\t\t\t\ttr: 'table',\n\t\t\t\ttd: 'table',\n\t\t\t\ttable: 'table'\n\t\t\t},\n\n\t\t\tformattingTags: ['p', 'blockquote', 'code', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n\t\t\tlinebreaks: false,\n\t\t\tparagraphy: true,\n\t\t\tconvertDivs: true,\n\t\t\tconvertLinks: true,\n\t\t\tconvertImageLinks: false,\n\t\t\tconvertVideoLinks: false,\n\t\t\tformattingPre: false,\n\t\t\tphpTags: false,\n\n\t\t\tallowedTags: false,\n\t\t\tdeniedTags: ['html', 'head', 'link', 'body', 'meta', 'script', 'style', 'applet'],\n\n\t\t\tboldTag: 'strong',\n\t\t\titalicTag: 'em',\n\n\t\t\tindentValue: 20,\n\t\t\tbuffer: [],\n\t\t\trebuffer: [],\n\t\t\ttextareamode: false,\n\t\t\temptyHtml: '<p>&#x200b;</p>',\n\t\t\tinvisibleSpace: '&#x200b;',\n\t\t\trBlockTest: /^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,\n\t\t\talignmentTags: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'TD',\n\t\t\t\t\t\t\t\t'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'ADDRESS', 'SECTION',\n\t\t\t\t\t\t\t\t'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE'],\n\t\t\townLine: ['area', 'body', 'head', 'hr', 'i?frame', 'link', 'meta', 'noscript', 'style', 'script', 'table', 'tbody', 'thead', 'tfoot'],\n\t\t\tcontOwnLine: ['li', 'dt', 'dt', 'h[1-6]', 'option', 'script'],\n\t\t\tnewLevel: ['blockquote', 'div', 'dl', 'fieldset', 'form', 'frameset', 'map', 'ol', 'p', 'code', 'select', 'td', 'th', 'tr', 'ul'],\n\t\t\tblockLevelElements: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'LI',\n\t\t\t\t\t\t\t\t'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'CODE', 'ADDRESS', 'SECTION',\n\t\t\t\t\t\t\t\t'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE', 'TD'],\n\t\t\tlangs: {\n\t\t\t\ten: {\n\t\t\t\t\thtml: 'HTML',\n\t\t\t\t\tvideo: 'Insert Video',\n\t\t\t\t\timage: 'Insert Image',\n\t\t\t\t\ttable: 'Table',\n\t\t\t\t\tlink: 'Link',\n\t\t\t\t\tlink_insert: 'Insert link',\n\t\t\t\t\tlink_edit: 'Edit link',\n\t\t\t\t\tunlink: 'Unlink',\n\t\t\t\t\tformatting: 'Formatting',\n\t\t\t\t\tparagraph: 'Normal text',\n\t\t\t\t\tquote: 'Quote',\n\t\t\t\t\tcode: 'Code',\n\t\t\t\t\theader1: 'Header 1',\n\t\t\t\t\theader2: 'Header 2',\n\t\t\t\t\theader3: 'Header 3',\n\t\t\t\t\theader4: 'Header 4',\n\t\t\t\t\theader5: 'Header 5',\n\t\t\t\t\tbold: 'Bold',\n\t\t\t\t\titalic: 'Italic',\n\t\t\t\t\tfontcolor: 'Font Color',\n\t\t\t\t\tbackcolor: 'Back Color',\n\t\t\t\t\tunorderedlist: 'Unordered List',\n\t\t\t\t\torderedlist: 'Ordered List',\n\t\t\t\t\toutdent: 'Outdent',\n\t\t\t\t\tindent: 'Indent',\n\t\t\t\t\tcancel: 'Cancel',\n\t\t\t\t\tinsert: 'Insert',\n\t\t\t\t\tsave: 'Save',\n\t\t\t\t\t_delete: 'Delete',\n\t\t\t\t\tinsert_table: 'Insert Table',\n\t\t\t\t\tinsert_row_above: 'Add Row Above',\n\t\t\t\t\tinsert_row_below: 'Add Row Below',\n\t\t\t\t\tinsert_column_left: 'Add Column Left',\n\t\t\t\t\tinsert_column_right: 'Add Column Right',\n\t\t\t\t\tdelete_column: 'Delete Column',\n\t\t\t\t\tdelete_row: 'Delete Row',\n\t\t\t\t\tdelete_table: 'Delete Table',\n\t\t\t\t\trows: 'Rows',\n\t\t\t\t\tcolumns: 'Columns',\n\t\t\t\t\tadd_head: 'Add Head',\n\t\t\t\t\tdelete_head: 'Delete Head',\n\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\timage_position: 'Position',\n\t\t\t\t\tnone: 'None',\n\t\t\t\t\tleft: 'Left',\n\t\t\t\t\tright: 'Right',\n\t\t\t\t\tcenter: 'Center',\n\t\t\t\t\timage_web_link: 'Image Web Link',\n\t\t\t\t\ttext: 'Text',\n\t\t\t\t\tmailto: 'Email',\n\t\t\t\t\tweb: 'URL',\n\t\t\t\t\tvideo_html_code: 'Video Embed Code',\n\t\t\t\t\tfile: 'Insert File',\n\t\t\t\t\tupload: 'Upload',\n\t\t\t\t\tdownload: 'Download',\n\t\t\t\t\tchoose: 'Choose',\n\t\t\t\t\tempty_img_list: 'You have no images',\n\t\t\t\t\tor_choose: 'Or choose',\n\t\t\t\t\tdrop_file_here: 'Drop file here',\n\t\t\t\t\talign_left: 'Align text to the left',\n\t\t\t\t\talign_center: 'Center text',\n\t\t\t\t\talign_right: 'Align text to the right',\n\t\t\t\t\talign_justify: 'Justify text',\n\t\t\t\t\thorizontalrule: 'Insert Horizontal Rule',\n                    fullscreen: 'Full screen',\n                    fontsize: 'Font size',\n                    fontfamily: 'Font',\n                    remove_font: 'Clear Font',\n                    image_save_toserver: 'Save to the server?',\n\t\t\t\t\tdeleted: 'Deleted',\n\t\t\t\t\tanchor: 'Anchor',\n\t\t\t\t\tlink_new_tab: 'Open link in new tab',\n\t\t\t\t\tunderline: 'Underline',\n\t\t\t\t\talignment: 'Alignment',\n\t\t\t\t\tfilename: 'Name (optional)',\n\t\t\t\t\tedit: 'Edit',\n                    spoiler: 'Spoiler',\n                    spoiler_name: 'Spoiler name',\n                    spoiler_text: 'Spoiler text',\n                    smiles: 'Smiles',\n                    undo: 'Undo',\n                    redo: 'Redo',\n                    formalize: 'Formalize'\n\t\t\t\t}\n\t\t\t}\n\t};\n\n\tRedactor.fn = $.Redactor.prototype = {\n\n\t\tkeyCode: {\n\t\t\tBACKSPACE: 8,\n\t\t\tDELETE: 46,\n\t\t\tDOWN: 40,\n\t\t\tENTER: 13,\n\t\t\tESC: 27,\n\t\t\tTAB: 9,\n\t\t\tCTRL: 17,\n\t\t\tMETA: 91,\n\t\t\tLEFT: 37,\n\t\t\tLEFT_WIN: 91\n\t\t},\n\n\t\tinit: function(el, options)\n\t\t{\n\t\t\tthis.rtePaste = false;\n\t\t\tthis.$element = this.$source = $(el);\n\t\t\tthis.uuid = uuid++;\n\n\t\t\tvar opts = $.extend(true, {}, $.Redactor.opts);\n\n\t\t\tthis.opts = $.extend(\n\t\t\t\t{},\n\t\t\t\topts,\n\t\t\t\tthis.$element.data(),\n\t\t\t\toptions\n\t\t\t);\n\n\t\t\tthis.start = true;\n\t\t\tthis.dropdowns = [];\n\n\t\t\tthis.sourceHeight = this.$source.css('height');\n\t\t\tthis.sourceWidth = this.$source.css('width');\n\n\t\t\tif (this.opts.fullpage) this.opts.iframe = true;\n\t\t\tif (this.opts.linebreaks) this.opts.paragraphy = false;\n\t\t\tif (this.opts.paragraphy) this.opts.linebreaks = false;\n\t\t\tif (this.opts.toolbarFixedBox) this.opts.toolbarFixed = true;\n\n\t\t\tthis.document = document;\n\t\t\tthis.window = window;\n\n\t\t\tthis.savedSel = false;\n\n\t\t\tthis.cleanlineBefore = new RegExp('^<(/?' + this.opts.ownLine.join('|/?' ) + '|' + this.opts.contOwnLine.join('|') + ')[ >]');\n\t\t\tthis.cleanlineAfter = new RegExp('^<(br|/?' + this.opts.ownLine.join('|/?' ) + '|/' + this.opts.contOwnLine.join('|/') + ')[ >]');\n\t\t\tthis.cleannewLevel = new RegExp('^</?(' + this.opts.newLevel.join('|' ) + ')[ >]');\n\n\t\t\tthis.rTestBlock = new RegExp('^(' + this.opts.blockLevelElements.join('|' ) + ')$', 'i');\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tif (this.opts.allowedTags !== false)\n\t\t\t\t{\n\t\t\t\t\tvar arrSearch = ['strong', 'em', 'del'];\n\t\t\t\t\tvar arrAdd = ['b', 'i', 'strike'];\n\n\t\t\t\t\tif ($.inArray('p', this.opts.allowedTags) === '-1') this.opts.allowedTags.push('p');\n\n\t\t\t\t\tfor (i in arrSearch)\n\t\t\t\t\t{\n\t\t\t\t\t\tif ($.inArray(arrSearch[i], this.opts.allowedTags) != '-1') this.opts.allowedTags.push(arrAdd[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.opts.deniedTags !== false)\n\t\t\t\t{\n\t\t\t\t\tvar pos = $.inArray('p', this.opts.deniedTags);\n\t\t\t\t\tif (pos !== '-1') this.opts.deniedTags.splice(pos, pos);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.browser('msie') || this.browser('opera'))\n\t\t\t{\n\t\t\t\tthis.opts.buttons = this.removeFromArrayByValue(this.opts.buttons, 'horizontalrule');\n\t\t\t}\n\n\t\t\tthis.opts.curLang = this.opts.langs[this.opts.lang];\n\n\t\t\t$.extend(this.opts.shortcuts, this.opts.shortcutsAdd);\n\n\t\t\tthis.placeholderInit();\n\n\t\t\tthis.buildStart();\n\n\t\t},\n\t\ttoolbarInit: function(lang)\n\t\t{\n\t\t\treturn {\n\t\t\t\thtml:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.html,\n\t\t\t\t\tfunc: 'toggle'\n\t\t\t\t},\n\t\t\t\tundo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.undo,\n\t\t\t\t\tfunc: 'bufferUndo'\n\t\t\t\t},\n\t\t\t\tredo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.redo,\n\t\t\t\t\tfunc: 'bufferRedo'\n\t\t\t\t},\n\t\t\t\tformatting:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.formatting,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tp:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.paragraph,\n\t\t\t\t\t\t\tfunc: 'formatBlocks'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tblockquote:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.quote,\n\t\t\t\t\t\t\tfunc: 'formatQuote',\n\t\t\t\t\t\t\tclassName: 'redactor_format_blockquote'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcode:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.code,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_code'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th1:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header1,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h1'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th2:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header2,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h2'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th3:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header3,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h3'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th4:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header4,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h4'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th5:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header5,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h5'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbold:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.bold,\n\t\t\t\t\texec: 'bold'\n\t\t\t\t},\n\t\t\t\titalic:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.italic,\n\t\t\t\t\texec: 'italic'\n\t\t\t\t},\n\t\t\t\tdeleted:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.deleted,\n\t\t\t\t\texec: 'strikethrough'\n\t\t\t\t},\n\t\t\t\tunderline:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.underline,\n\t\t\t\t\texec: 'underline'\n\t\t\t\t},\n\t\t\t\tunorderedlist:\n\t\t\t\t{\n\t\t\t\t\ttitle: '&bull; ' + lang.unorderedlist,\n\t\t\t\t\texec: 'insertunorderedlist'\n\t\t\t\t},\n\t\t\t\torderedlist:\n\t\t\t\t{\n\t\t\t\t\ttitle: '1. ' + lang.orderedlist,\n\t\t\t\t\texec: 'insertorderedlist'\n\t\t\t\t},\n\t\t\t\toutdent:\n\t\t\t\t{\n\t\t\t\t\ttitle: '< ' + lang.outdent,\n\t\t\t\t\tfunc: 'indentingOutdent'\n\t\t\t\t},\n\t\t\t\tindent:\n\t\t\t\t{\n\t\t\t\t\ttitle: '> ' + lang.indent,\n\t\t\t\t\tfunc: 'indentingIndent'\n\t\t\t\t},\n\t\t\t\timage:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.image,\n\t\t\t\t\tfunc: 'imageShow'\n\t\t\t\t},\n\t\t\t\tvideo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.video,\n\t\t\t\t\tfunc: 'videoShow'\n\t\t\t\t},\n\t\t\t\tfile:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.file,\n\t\t\t\t\tfunc: 'fileShow'\n\t\t\t\t},\n\t\t\t\ttable:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.table,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tinsert_table:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_table,\n\t\t\t\t\t\t\tfunc: 'tableShow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop1:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_row_above:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_row_above,\n\t\t\t\t\t\t\tfunc: 'tableAddRowAbove'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_row_below:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_row_below,\n\t\t\t\t\t\t\tfunc: 'tableAddRowBelow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_column_left:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_column_left,\n\t\t\t\t\t\t\tfunc: 'tableAddColumnLeft'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_column_right:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_column_right,\n\t\t\t\t\t\t\tfunc: 'tableAddColumnRight'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop2:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadd_head:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.add_head,\n\t\t\t\t\t\t\tfunc: 'tableAddHead'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_head:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_head,\n\t\t\t\t\t\t\tfunc: 'tableDeleteHead'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop3:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_column:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_column,\n\t\t\t\t\t\t\tfunc: 'tableDeleteColumn'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_row:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_row,\n\t\t\t\t\t\t\tfunc: 'tableDeleteRow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_table:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_table,\n\t\t\t\t\t\t\tfunc: 'tableDeleteTable'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\ttitle: lang.link,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tlink:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.link_insert,\n\t\t\t\t\t\t\tfunc: 'linkShow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tunlink:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.unlink,\n\t\t\t\t\t\t\texec: 'unlink'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talignment:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.alignment,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\talignleft:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_left,\n\t\t\t\t\t\t\tfunc: 'alignmentLeft'\n\t\t\t\t\t\t},\n\t\t\t\t\t\taligncenter:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_center,\n\t\t\t\t\t\t\tfunc: 'alignmentCenter'\n\t\t\t\t\t\t},\n\t\t\t\t\t\talignright:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_right,\n\t\t\t\t\t\t\tfunc: 'alignmentRight'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tjustify:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_justify,\n\t\t\t\t\t\t\tfunc: 'alignmentJustify'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talignleft:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_left,\n\t\t\t\t\tfunc: 'alignmentLeft'\n\t\t\t\t},\n\t\t\t\taligncenter:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_center,\n\t\t\t\t\tfunc: 'alignmentCenter'\n\t\t\t\t},\n\t\t\t\talignright:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_right,\n\t\t\t\t\tfunc: 'alignmentRight'\n\t\t\t\t},\n\t\t\t\talignjustify:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_justify,\n\t\t\t\t\tfunc: 'alignmentJustify'\n\t\t\t\t},\n\t\t\t\thorizontalrule:\n\t\t\t\t{\n\t\t\t\t\texec: 'inserthorizontalrule',\n\t\t\t\t\ttitle: lang.horizontalrule\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tcallback: function(type, event, data)\n\t\t{\n\t\t\tvar callback = this.opts[ type + 'Callback' ];\n\t\t\tif ($.isFunction(callback))\n\t\t\t{\n\t\t\t\tif (event === false) return callback.call(this, data);\n\t\t\t\telse return callback.call(this, event, data);\n\t\t\t}\n\t\t\telse return data;\n\t\t},\n\n\t\tdestroy: function()\n\t\t{\n\t\t\tclearInterval(this.autosaveInterval);\n\n\t\t\t$(window).off('.redactor');\n\t\t\tthis.$source.off('redactor-textarea');\n\t\t\tthis.$element.off('.redactor').removeData('redactor');\n\n\t\t\tvar html = this.get();\n\n\t\t\tif (this.opts.textareamode)\n\t\t\t{\n\t\t\t\tthis.$box.after(this.$source);\n\t\t\t\tthis.$box.remove();\n\t\t\t\tthis.$source.val(html).show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar $elem = this.$editor;\n\t\t\t\tif (this.opts.iframe) $elem = this.$element;\n\n\t\t\t\tthis.$box.after($elem);\n\t\t\t\tthis.$box.remove();\n\n\t\t\t\t$elem.removeClass('redactor_editor').removeClass('redactor_editor_wym').removeAttr('contenteditable').html(html).show();\n\t\t\t}\n\n\t\t\tif (this.opts.toolbarExternal)\n\t\t\t{\n\t\t\t\t$(this.opts.toolbarExternal).html('');\n\t\t\t}\n\n\t\t\tif (this.opts.air)\n\t\t\t{\n\t\t\t\t$('#redactor_air_' + this.uuid).remove();\n\t\t\t}\n\t\t},\n\n\t\tgetObject: function()\n\t\t{\n\t\t\treturn $.extend({}, this);\n\t\t},\n\t\tgetEditor: function()\n\t\t{\n\t\t\treturn this.$editor;\n\t\t},\n\t\tgetBox: function()\n\t\t{\n\t\t\treturn this.$box;\n\t\t},\n\t\tgetIframe: function()\n\t\t{\n\t\t\treturn (this.opts.iframe) ? this.$frame : false;\n\t\t},\n\t\tgetToolbar: function()\n\t\t{\n\t\t\treturn (this.$toolbar) ? this.$toolbar : false;\n\t\t},\n\n\t\tget: function()\n\t\t{\n\t\t\treturn this.$source.val();\n\t\t},\n\t\tgetCodeIframe: function()\n\t\t{\n\t\t\tthis.$editor.removeAttr('contenteditable').removeAttr('dir');\n\t\t\tvar html = this.outerHtml(this.$frame.contents().children());\n\t\t\tthis.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\n\t\t\treturn html;\n\t\t},\n\t\tset: function(html, strip, placeholderRemove)\n\t\t{\n\t\t\thtml = html.toString();\n\t\t\thtml = html.replace(/\\$/g, '&#36;');\n\n\t\t\tif (this.opts.fullpage) this.setCodeIframe(html);\n\t\t\telse this.setEditor(html, strip);\n\n\t\t\tif (html == '') placeholderRemove = false;\n\t\t\tif (placeholderRemove !== false) this.placeholderRemoveFromEditor();\n\t\t},\n\t\tsetEditor: function(html, strip)\n\t\t{\n\n            html = this.sanitizeHTML(html);\n\n\t\t\tif (strip !== false)\n\t\t\t{\n\t\t\t\thtml = this.cleanSavePreCode(html);\n\n\t\t\t\thtml = this.cleanStripTags(html);\n\t\t\t\thtml = this.cleanConvertProtected(html);\n\t\t\t\thtml = this.cleanConvertInlineTags(html, true);\n\n\t\t\t\tif (this.opts.linebreaks === false)\thtml = this.cleanConverters(html);\n\t\t\t\telse html = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\n\t\t\thtml = html.replace(/&amp;#36;/g, '$');\n            html = this.cleanEmpty(html);\n\n\t\t\tthis.$editor.html(html);\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\n\t\t\tthis.sync();\n\t\t},\n        sanitizeHTML:  function(htmlStr)\n\t\t{\n            if(htmlStr.length === 0){\n                return htmlStr;\n            }\n            function stringToHTML () {\n                let parser = new DOMParser();\n                let doc = parser.parseFromString(htmlStr, 'text/html');\n                return doc.body;\n            }\n            function clean (html) {\n                let nodes = html.children;\n                for (let node of nodes) {\n                    removeAttributes(node);\n                    clean(node);\n                }\n            }\n            function removeAttributes (elem) {\n                let atts = elem.attributes;\n                for (let {name, value} of atts) {\n                    if (!isPossiblyDangerous(name, value)) { continue };\n                    elem.removeAttribute(name);\n                }\n\n            }\n            function isPossiblyDangerous (name, value) {\n                let val = value.replace(/\\s+/g, '').toLowerCase();\n                if (['src', 'href', 'xlink:href'].includes(name)) {\n                    if (val.includes('javascript:') || val.includes('data:text/html')) { return true; }\n                }\n                if (name.startsWith('on')) { return true; }\n            }\n            let html = stringToHTML();\n\n            clean(html);\n\n            return html.innerHTML;\n        },\n\t\tsetCodeIframe: function(html)\n\t\t{\n\t\t\tvar doc = this.iframePage();\n\t\t\tthis.$frame[0].src = \"about:blank\";\n\n\t\t\thtml = this.cleanConvertProtected(html);\n\t\t\thtml = this.cleanConvertInlineTags(html);\n\t\t\thtml = this.cleanRemoveSpaces(html);\n\n\t\t\tdoc.open();\n\t\t\tdoc.write(html);\n\t\t\tdoc.close();\n\n\t\t\tif (this.opts.fullpage)\n\t\t\t{\n\t\t\t\tthis.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\t}\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\t\t\tthis.sync();\n\n\t\t},\n\t\tsetFullpageOnInit: function(html)\n\t\t{\n            html = this.sanitizeHTML(html);\n\t\t\tthis.fullpageDoctype = html.match(/^<\\!doctype[^>]*>/i);\n\t\t\tif (this.fullpageDoctype && this.fullpageDoctype.length == 1)\n\t\t\t{\n\t\t\t\thtml = html.replace(/^<\\!doctype[^>]*>/i, '');\n\t\t\t}\n\n\t\t\thtml = this.cleanSavePreCode(html, true);\n\t\t\thtml = this.cleanConverters(html);\n\t\t\thtml = this.cleanEmpty(html);\n\n\t\t\tthis.$editor.html(html);\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\t\t\tthis.sync();\n\t\t},\n\t\tsetFullpageDoctype: function()\n\t\t{\n\t\t\tif (this.fullpageDoctype && this.fullpageDoctype.length == 1)\n\t\t\t{\n\t\t\t\tvar source = this.fullpageDoctype[0] + '\\n' + this.$source.val();\n\t\t\t\tthis.$source.val(source);\n\t\t\t}\n\t\t},\n\t\tsetSpansVerified: function()\n\t\t{\n\t\t\tvar spans = this.$editor.find('span');\n\t\t\tvar replacementTag = 'inline';\n\n\t\t\t$.each(spans, function() {\n\t\t\t\tvar outer = this.outerHTML;\n\n\t\t\t\tvar regex = new RegExp('<' + this.tagName, 'gi');\n\t\t\t\tvar newTag = outer.replace(regex, '<' + replacementTag);\n\n\t\t\t\tregex = new RegExp('</' + this.tagName, 'gi');\n\t\t\t\tnewTag = newTag.replace(regex, '</' + replacementTag);\n\n\t\t\t\t$(this).replaceWith(newTag);\n\t\t\t});\n\n\t\t},\n\t\tsetSpansVerifiedHtml: function(html)\n\t\t{\n\t\t\thtml = html.replace(/<span(.*?)>/, '<inline$1>');\n\t\t\treturn html.replace(/<\\/span>/, '</inline>');\n\t\t},\n\t\tsetNonEditable: function()\n\t\t{\n\t\t\tthis.$editor.find('.noneditable').attr('contenteditable', false);\n\t\t},\n\n\t\tsync: function(e)\n\t\t{\n\t\t\tvar html = '';\n\n\t\t\tthis.cleanUnverified();\n\n\t\t\tif (this.opts.fullpage) html = this.getCodeIframe();\n\t\t\telse html = this.$editor.html();\n\n\t\t\thtml = this.syncClean(html);\n\t\t\thtml = this.cleanRemoveEmptyTags(html);\n\n\t\t\tvar source = this.cleanRemoveSpaces(this.$source.val(), false);\n\t\t\tvar editor = this.cleanRemoveSpaces(html, false);\n\n\t\t\tif (source == editor)\n\t\t\t{\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\thtml = html.replace(/<\\/li><(ul|ol)>([\\w\\W]*?)<\\/(ul|ol)>/gi, '<$1>$2</$1></li>');\n\n\t\t\tif ($.trim(html) === '<br>') html = '';\n\t\t\tif (this.opts.xhtml)\n\t\t\t{\n\t\t\t\tvar xhtmlTags = ['br', 'hr', 'img', 'link', 'input', 'meta'];\n\t\t\t\t$.each(xhtmlTags, function(i,s)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?[^\\/$]?)>', 'gi'), '<' + s + '$1 />');\n\t\t\t\t});\n\n\t\t\t}\n\t\t\thtml = this.callback('syncBefore', false, html);\n\n\t\t\tthis.$source.val(html);\n\t\t\tthis.setFullpageDoctype();\n\t\t\tthis.callback('syncAfter', false, html);\n\n\t\t\tif (this.start === false)\n\t\t\t{\n\n\t\t\t\tif (typeof e != 'undefined')\n\t\t\t\t{\n\t\t\t\t\tswitch(e.which)\n\t\t\t\t\t{\n\t\t\t\t        case 37:\n\t\t\t\t        break;\n\t\t\t\t        case 38:\n\t\t\t\t        break;\n\t\t\t\t        case 39:\n\t\t\t\t        break;\n\t\t\t\t        case 40:\n\t\t\t\t        break;\n\n\t\t\t\t\t\tdefault: this.callback('change', false, html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.callback('change', false, html);\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tsyncClean: function(html)\n\t\t{\n\t\t\tif (!this.opts.fullpage) html = this.cleanStripTags(html);\n\t\t\thtml = $.trim(html);\n\t\t\thtml = this.placeholderRemoveFromCode(html);\n\t\t\thtml = html.replace(/&#x200b;/gi, '');\n\t\t\thtml = html.replace(/&#8203;/gi, '');\n\t\t\thtml = html.replace(/<\\/a>&nbsp;/gi, '<\\/a> ');\n\t\t\thtml = html.replace(/\\u200B/g, '');\n\n\t\t\tif (html == '<p></p>' || html == '<p> </p>' || html == '<p>&nbsp;</p>')\n\t\t\t{\n\t\t\t\thtml = '';\n\t\t\t}\n\t\t\tif (this.opts.linkNofollow)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<a(.*?)rel=\"nofollow\"(.*?)>/gi, '<a$1$2>');\n\t\t\t\thtml = html.replace(/<a(.*?)>/gi, '<a$1 rel=\"nofollow\">');\n\t\t\t}\n\t\t\thtml = html.replace('<!--?php', '<?php');\n\t\t\thtml = html.replace('?-->', '?>');\n\t\t\thtml = html.replace(/<(.*?)class=\"noeditable\"(.*?) contenteditable=\"false\"(.*?)>/gi, '<$1class=\"noeditable\"$2$3>');\n\n\t\t\thtml = html.replace(/ data-tagblock=\"\"/gi, '');\n\t\t\thtml = html.replace(/<br\\s?\\/?>\\n?<\\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi, '</$1>');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-box\"(.*?)>([\\w\\W]*?)<img(.*?)><\\/span>/gi, '$3<img$4>');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-resizer\"(.*?)>(.*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-editter\"(.*?)>(.*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<(ul|ol)>\\s*\\t*\\n*<\\/(ul|ol)>/gi, '');\n\t\t\tif (this.opts.cleanFontTag)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi, '$2');\n\t\t\t}\n\t\t\thtml = html.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi, '$2');\n\t\t\thtml = html.replace(/<inline>([\\w\\W]*?)<\\/inline>/gi, '$1');\n\t\t\thtml = html.replace(/<inline>/gi, '<span>');\n\t\t\thtml = html.replace(/<inline /gi, '<span ');\n\t\t\thtml = html.replace(/<\\/inline>/gi, '</span>');\n\n\t\t\tif (this.opts.removeEmptyTags)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<span>([\\w\\W]*?)<\\/span>/gi, '$1');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<span(.*?)class=\"redactor_placeholder\"(.*?)>([\\w\\W]*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<img(.*?)contenteditable=\"false\"(.*?)>/gi, '<img$1$2>');\n\t\t\thtml = html.replace(/&/gi, '&');\n\t\t\thtml = html.replace(/\\u2122/gi, '&trade;');\n\t\t\thtml = html.replace(/\\u00a9/gi, '&copy;');\n\t\t\thtml = html.replace(/\\u2026/gi, '&hellip;');\n\t\t\thtml = html.replace(/\\u2014/gi, '&mdash;');\n\t\t\thtml = html.replace(/\\u2010/gi, '&dash;');\n\n\t\t\thtml = this.cleanReConvertProtected(html);\n\n\t\t\treturn html;\n\t\t},\n\n\t\tbuildStart: function()\n\t\t{\n\n\t\t\tthis.content = '';\n\t\t\tthis.$box = $('<div class=\"redactor_box\" />');\n\t\t\tif (this.$source[0].tagName === 'TEXTAREA') this.opts.textareamode = true;\n\t\t\tif (this.opts.mobile === false && this.isMobile())\n\t\t\t{\n\t\t\t\tthis.buildMobile();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tthis.buildContent();\n\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\n\t\t\t\t\tthis.opts.autoresize = false;\n\t\t\t\t\tthis.iframeStart();\n\t\t\t\t}\n\t\t\t\telse if (this.opts.textareamode) this.buildFromTextarea();\n\t\t\t\telse this.buildFromElement();\n\t\t\t\tif (!this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\tthis.buildOptions();\n\t\t\t\t\tthis.buildAfter();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildMobile: function()\n\t\t{\n\t\t\tif (!this.opts.textareamode)\n\t\t\t{\n\t\t\t\tthis.$editor = this.$source;\n\t\t\t\tthis.$editor.hide();\n\t\t\t\tthis.$source = this.buildCodearea(this.$editor);\n\t\t\t\tthis.$source.val(this.content);\n\t\t\t}\n\n\t\t\tthis.$box.insertAfter(this.$source).append(this.$source);\n\t\t},\n\t\tbuildContent: function()\n\t\t{\n\t\t\tif (this.opts.textareamode) this.content = $.trim(this.$source.val());\n\t\t\telse this.content = $.trim(this.$source.html());\n\t\t},\n\t\tbuildFromTextarea: function()\n\t\t{\n\t\t\tthis.$editor = $('<div />');\n\t\t\tthis.$box.insertAfter(this.$source).append(this.$editor).append(this.$source);\n\t\t\tthis.buildAddClasses(this.$editor);\n\t\t\tthis.buildEnable();\n\t\t},\n\t\tbuildFromElement: function()\n\t\t{\n\t\t\tthis.$editor = this.$source;\n\t\t\tthis.$source = this.buildCodearea(this.$editor);\n\t\t\tthis.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source);\n\t\t\tthis.buildEnable();\n\t\t},\n\t\tbuildCodearea: function($source)\n\t\t{\n\t\t\treturn $('<textarea />').attr('name', $source.attr('id')).css('height', this.sourceHeight);\n\t\t},\n\t\tbuildAddClasses: function(el)\n\t\t{\n\n\t\t\t$.each(this.$source.get(0).className.split(/\\s+/), function(i,s)\n\t\t\t{\n\t\t\t\tel.addClass('redactor_' + s);\n\t\t\t});\n\t\t},\n\t\tbuildEnable: function()\n\t\t{\n\t\t\tthis.$editor.addClass('redactor_editor').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\tthis.$source.attr('dir', this.opts.direction).hide();\n\t\t\tthis.set(this.content, true, false);\n\t\t},\n\t\tbuildOptions: function()\n\t\t{\n\t\t\tvar $source = this.$editor;\n\t\t\tif (this.opts.iframe) $source = this.$frame;\n\t\t\tif (this.opts.tabindex) $source.attr('tabindex', this.opts.tabindex);\n\n\t\t\tif (this.opts.minHeight) $source.css('min-height', this.opts.minHeight + 'px');\n\n\t\t\telse if (this.browser('mozilla') && this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tthis.$editor.css('min-height', '45px');\n\t\t\t}\n\n\t\t\tif (this.browser('mozilla') && this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tthis.$editor.css('padding-bottom', '10px');\n\t\t\t}\n\t\t\tif (this.opts.maxHeight)\n\t\t\t{\n\t\t\t\tthis.opts.autoresize = false;\n\t\t\t\tthis.sourceHeight = this.opts.maxHeight;\n\t\t\t}\n\t\t\tif (this.opts.wym) this.$editor.addClass('redactor_editor_wym');\n\t\t\tif (this.opts.typewriter) this.$editor.addClass('redactor-editor-typewriter');\n\t\t\tif (!this.opts.autoresize) $source.css('height', this.sourceHeight);\n\n\t\t},\n\t\tbuildAfter: function()\n\t\t{\n\t\t\tthis.start = false;\n\t\t\tif (this.opts.toolbar)\n\t\t\t{\n\t\t\t\tthis.opts.toolbar = this.toolbarInit(this.opts.curLang);\n\t\t\t\tthis.toolbarBuild();\n\t\t\t}\n\t\t\tthis.modalTemplatesInit();\n\t\t\tthis.buildPlugins();\n\t\t\tthis.buildBindKeyboard();\n\t\t\tif (this.opts.autosave) this.autosave();\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 4);\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\ttry {\n\t\t\t\t\tthis.document.execCommand('enableObjectResizing', false, false);\n\t\t\t\t\tthis.document.execCommand('enableInlineTableEditing', false, false);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\tif (this.opts.focus) setTimeout($.proxy(this.focus, this), 100);\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.opts.visual = true;\n\t\t\t\t\tthis.toggle(false);\n\n\t\t\t\t}, this), 200);\n\t\t\t}\n\t\t\tthis.callback('init');\n\t\t},\n\t\tbuildBindKeyboard: function()\n\t\t{\n\t\t\tthis.dblEnter = 0;\n\n\t\t\tif (this.opts.dragUpload && (this.opts.imageUpload !== false || this.opts.s3 !== false))\n\t\t\t{\n\t\t\t\tthis.$editor.on('drop.redactor', $.proxy(this.buildEventDrop, this));\n\t\t\t}\n\n\t\t\tthis.$editor.on('click.redactor', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.selectall = false;\n\n\t\t\t}, this));\n\n\t\t\tthis.$editor.on('input.redactor', $.proxy(this.sync, this));\n\t\t\tthis.$editor.on('paste.redactor', $.proxy(this.buildEventPaste, this));\n\t\t\tthis.$editor.on('keydown.redactor', $.proxy(this.buildEventKeydown, this));\n\t\t\tthis.$editor.on('keyup.redactor', $.proxy(this.buildEventKeyup, this));\n\t\t\tif ($.isFunction(this.opts.textareaKeydownCallback))\n\t\t\t{\n\t\t\t\tthis.$source.on('keydown.redactor-textarea', $.proxy(this.opts.textareaKeydownCallback, this));\n\t\t\t}\n\t\t\tif ($.isFunction(this.opts.focusCallback))\n\t\t\t{\n\t\t\t\tthis.$editor.on('focus.redactor', $.proxy(this.opts.focusCallback, this));\n\t\t\t}\n\n\t\t\tvar clickedElement;\n\t\t\t$(document).mousedown(function(e) {\n\t\t\t\tclickedElement = $(e.target);\n\t\t\t});\n\t\t\tthis.$editor.on('blur.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (!$(clickedElement).hasClass('redactor_toolbar') && $(clickedElement).parents('.redactor_toolbar').length == 0)\n\t\t\t\t{\n\t\t\t\t\tthis.selectall = false;\n\t\t\t\t\tif ($.isFunction(this.opts.blurCallback)) this.callback('blur', e);\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t},\n\t\tbuildEventDrop: function(e)\n\t\t{\n\t\t\te = e.originalEvent || e;\n\n\t\t\tif (window.FormData === undefined || !e.dataTransfer) return true;\n\n\t\t    var length = e.dataTransfer.files.length;\n\t\t    if (length == 0) return true;\n\n\t\t    e.preventDefault();\n\n\t        var file = e.dataTransfer.files[0];\n\n\t        if (this.opts.dnbImageTypes !== false && this.opts.dnbImageTypes.indexOf(file.type) == -1)\n\t        {\n\t\t        return true;\n\t        }\n\n\t\t\tthis.bufferSet();\n\n\t\t\tthis.showProgressBar();\n\n\t\t\tif (this.opts.s3 === false)\n\t\t\t{\n\t\t\t\tthis.dragUploadAjax(this.opts.imageUpload, file, true, e, this.opts.imageUploadParam);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.s3uploadFile(file);\n\t\t\t}\n\t\t},\n\t\tbuildEventPaste: function(e)\n\t\t{\n\t\t\tvar oldsafari = false;\n\t\t\tif (this.browser('webkit') && navigator.userAgent.indexOf('Chrome') === -1)\n\t\t\t{\n\t\t\t\tvar arr = this.browser('version').split('.');\n\t\t\t\tif (arr[0] < 536) oldsafari = true;\n\t\t\t}\n\n\t\t\tif (oldsafari) return true;\n\t\t\tif (this.browser('opera')) return true;\n\t\t\tif (this.opts.clipboardUpload && this.buildEventClipboardUpload(e)) return true;\n\n\t\t\tif (this.opts.cleanup)\n\t\t\t{\n\t\t\t\tthis.rtePaste = true;\n\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tif (!this.selectall)\n\t\t\t\t{\n\t\t\t\t\tif (this.opts.autoresize === true && this.fullscreen !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$editor.height(this.$editor.height());\n\t\t\t\t\t\tthis.saveScroll = this.document.body.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveScroll = this.$editor.scrollTop();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar frag = this.extractContent();\n\n\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tvar pastedFrag = this.extractContent();\n\t\t\t\t\tthis.$editor.append(frag);\n\n\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\tvar html = this.getFragmentHtml(pastedFrag);\n\t\t\t\t\tthis.pasteClean(html);\n\n\t\t\t\t\tif (this.opts.autoresize === true && this.fullscreen !== true) this.$editor.css('height', 'auto');\n\n\t\t\t\t}, this), 1);\n\t\t\t}\n\t\t},\n\t\tbuildEventClipboardUpload: function(e)\n\t\t{\n\t\t\tvar event = e.originalEvent || e;\n\t\t\tthis.clipboardFilePaste = false;\n\t\t\tif (typeof(event.clipboardData) === 'undefined') { return false; }\n            var clipboard = event.clipboardData;\n\t\t\tif (clipboard.items)\n\t\t\t{\n\t\t\t\tvar file = event.clipboardData.items[0].getAsFile();\n\t\t\t\tif (file !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\tthis.clipboardFilePaste = true;\n\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = $.proxy(this.pasteClipboardUpload, this);\n\t\t\t        reader.readAsDataURL(file);\n\n\t\t\t        return true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\t\tbuildEventKeydown: function(e)\n\t\t{\n\t\t\tif (this.rtePaste) return false;\n\n\t\t\tvar key = e.which;\n\t\t\tvar ctrl = e.ctrlKey || e.metaKey;\n\t\t\tvar parent = this.getParent();\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar block = this.getBlock();\n\t\t\tvar pre = false;\n\n\t\t\tthis.callback('keydown', e);\n\n\t\t\t/*\n\t\t\t\tfirefox cmd+left/Cmd+right browser back/forward fix -\n\t\t\t\thttp://joshrhoderick.wordpress.com/2010/05/05/how-firefoxs-command-key-bug-kills-usability-on-the-mac/\n\t\t\t*/\n\t\t\tif (this.browser('mozilla') && \"modify\" in window.getSelection())\n\t\t\t{\n\t\t\t\tif ((ctrl) && (e.keyCode===37 || e.keyCode===39))\n\t\t\t\t{\n\t\t\t\t\tvar selection = this.getSelection();\n\t\t\t\t\tvar lineOrWord = (e.metaKey ? \"line\" : \"word\");\n\t\t\t\t\tif (e.keyCode===37)\n\t\t\t\t\t{\n\t\t\t\t\t\tselection.modify(\"extend\",\"left\",lineOrWord);\n\t\t\t\t\t\tif (!e.shiftKey)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselection.collapseToStart();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode===39)\n\t\t\t\t\t{\n\t\t\t\t\t\tselection.modify(\"extend\",\"right\",lineOrWord);\n\t\t\t\t\t\tif (!e.shiftKey)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselection.collapseToEnd();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.imageResizeHide(false);\n\t\t\tif ((parent && $(parent).get(0).tagName === 'CODE') || (current && $(current).get(0).tagName === 'CODE'))\n\t\t\t{\n\t\t\t\tpre = true;\n\t\t\t\tif (key === this.keyCode.DOWN) this.insertAfterLastElement(block);\n\t\t\t}\n\t\t\tif (key === this.keyCode.DOWN)\n\t\t\t{\n\t\t\t\tif (parent && $(parent)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(parent);\n\t\t\t\tif (current && $(current)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(current);\n\n\t\t\t\tif (parent && $(parent)[0].tagName === 'P' && $(parent).parent()[0].tagName == 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.insertAfterLastElement(parent, $(parent).parent()[0]);\n\t\t\t\t}\n\t\t\t\tif (current && $(current)[0].tagName === 'P' && parent && $(parent)[0].tagName == 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.insertAfterLastElement(current, parent);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.shortcuts(e, key);\n\t\t\tif (ctrl && key === 90 && !e.shiftKey && !e.altKey)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this.opts.buffer.length) this.bufferUndo();\n\t\t\t\telse this.document.execCommand('undo', false, false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telse if (ctrl && key === 90 && e.shiftKey && !e.altKey)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this.opts.rebuffer.length != 0) this.bufferRedo();\n\t\t\t\telse this.document.execCommand('redo', false, false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (key == 32)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t}\n\t\t\tif (ctrl && key === 65)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.selectall = true;\n\t\t\t}\n\t\t\telse if (key != this.keyCode.LEFT_WIN && !ctrl)\n\t\t\t{\n\t\t\t\tthis.selectall = false;\n\t\t\t}\n\t\t\tif (key == this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey)\n\t\t\t{\n\n\t\t\t\tvar range = this.getRange();\n\t\t\t\tif (range && range.collapsed === false)\n\t\t\t\t{\n\t\t\t\t\tsel = this.getSelection();\n\t\t\t\t\tif (sel.rangeCount)\n\t\t\t\t\t{\n\t\t\t\t\t\trange.deleteContents();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.browser('msie') && (parent.nodeType == 1 && (parent.tagName == 'TD' || parent.tagName == 'TH')))\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\tthis.insertNode(document.createElement('br'));\n\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (block && (block.tagName == 'BLOCKQUOTE' || $(block).parent()[0].tagName == 'BLOCKQUOTE'))\n\t\t\t\t{\n\t\t\t\t\tif (this.isEndOfElement())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.dblEnter == 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar element;\n\t\t\t\t\t\t\tvar last;\n\t\t\t\t\t\t\tif (block.tagName == 'BLOCKQUOTE')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlast = 'br';\n\t\t\t\t\t\t\t\telement = block;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlast = 'p';\n\t\t\t\t\t\t\t\telement = $(block).parent()[0];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tthis.insertingAfterLastElement(element);\n\t\t\t\t\t\t\tthis.dblEnter = 0;\n\n\t\t\t\t\t\t\tif (last == 'p')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(block).parent().find('p').last().remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar tmp = $.trim($(block).html());\n\t\t\t\t\t\t\t\t$(block).html(tmp.replace(/<br\\s?\\/?>$/i, ''));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse this.dblEnter++;\n\t\t\t\t\t}\n\t\t\t\t\telse this.dblEnter++;\n\t\t\t\t}\n\t\t\t\tif (pre === true)\n\t\t\t\t{\n\t\t\t\t\treturn this.buildEventKeydownPre(e, current);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (!this.opts.linebreaks)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif (block && block.tagName == 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar listCurrent = this.getBlock();\n\t\t\t\t\t\t\tif (listCurrent !== false || listCurrent.tagName === 'LI')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar listText = $.trim($(block).text());\n\t\t\t\t\t\t\t\tvar listCurrentText = $.trim($(listCurrent).text());\n\t\t\t\t\t\t\t\tif (listText == ''\n\t\t\t\t\t\t\t\t\t&& listCurrentText == ''\n\t\t\t\t\t\t\t\t\t&& $(listCurrent).next('li').length == 0\n\t\t\t\t\t\t\t\t\t&& $(listCurrent).parents('li').length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\t\t\tvar $list = $(listCurrent).closest('ol, ul');\n\t\t\t\t\t\t\t\t\t$(listCurrent).remove();\n\t\t\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\t\t\t$list.after(node);\n\t\t\t\t\t\t\t\t\tthis.selectionStart(node);\n\n\t\t\t\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (block && this.opts.rBlockTest.test(block.tagName))\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar blockElem = this.getBlock();\n\t\t\t\t\t\t\t\tif (blockElem.tagName === 'DIV' && !$(blockElem).hasClass('redactor_editor'))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\t\t\t$(blockElem).replaceWith(node);\n\t\t\t\t\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}, this), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (block === false)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\tthis.insertNode(node[0]);\n\t\t\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.opts.linebreaks)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif (block && this.opts.rBlockTest.test(block.tagName))\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar blockElem = this.getBlock();\n\t\t\t\t\t\t\t\tif ((blockElem.tagName === 'DIV' || blockElem.tagName === 'P') && !$(blockElem).hasClass('redactor_editor'))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.replaceLineBreak(blockElem);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}, this), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.buildEventKeydownInsertLineBreak(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (block.tagName == 'BLOCKQUOTE' || block.tagName == 'FIGCAPTION')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.buildEventKeydownInsertLineBreak(e);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.callback('enter', e);\n\t\t\t}\n\t\t\telse if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey))\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.insertLineBreak();\n\t\t\t}\n\t\t\tif ((key === this.keyCode.TAB || e.metaKey && key === 219) && this.opts.shortcuts)\n\t\t\t{\n\t\t\t\treturn this.buildEventKeydownTab(e, pre, key);\n\t\t\t}\n\t\t\tif (key === this.keyCode.BACKSPACE) this.buildEventKeydownBackspace(e, current, parent);\n\n\t\t},\n\t\tbuildEventKeydownPre: function(e, current)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tthis.bufferSet();\n\t\t\tvar html = $(current).parent().text();\n\t\t\tthis.insertNode(document.createTextNode('\\n'));\n\t\t\tif (html.search(/\\s$/) == -1)\n\t\t\t{\n\t\t\t\tthis.insertNode(document.createTextNode('\\n'));\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t\tthis.callback('enter', e);\n\t\t\treturn false;\n\t\t},\n\t\tbuildEventKeydownTab: function(e, pre, key)\n\t\t{\n\t\t\tif (!this.opts.tabFocus) return true;\n\t\t\tif (this.isEmpty(this.get()) && this.opts.tabSpaces === false) return true;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (pre === true && !e.shiftKey)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.insertNode(document.createTextNode('\\t'));\n\t\t\t\tthis.sync();\n\t\t\t\treturn false;\n\n\t\t\t}\n\t\t\telse if (this.opts.tabSpaces !== false)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.insertNode(document.createTextNode(Array(this.opts.tabSpaces + 1).join('\\u00a0')));\n\t\t\t\tthis.sync();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!e.shiftKey) this.indentingIndent();\n\t\t\t\telse this.indentingOutdent();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tbuildEventKeydownBackspace: function(e, current, parent)\n\t\t{\n\n\t\t\tif (parent && current && parent.parentNode.tagName == 'TD'\n\t\t\t\t&& parent.tagName == 'UL' && current.tagName == 'LI' && $(parent).children('li').length == 1)\n\t\t\t{\n\t\t\t\tvar text = $(current).text().replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n\t\t\t\tif (text == '')\n\t\t\t\t{\n\t\t\t\t\tvar node = parent.parentNode;\n\t\t\t\t\t$(parent).remove();\n\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\tthis.sync();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof current.tagName !== 'undefined' && /^(H[1-6])$/i.test(current.tagName))\n\t\t\t{\n\t\t\t\tvar node;\n\t\t\t\tif (this.opts.linebreaks === false) node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\telse node = $('<br>' + this.opts.invisibleSpace);\n\n\t\t\t\t$(current).replaceWith(node);\n\t\t\t\tthis.selectionStart(node);\n\t\t\t\tthis.sync();\n\t\t\t}\n\n\t\t\tif (typeof current.nodeValue !== 'undefined' && current.nodeValue !== null)\n\t\t\t{\n\t\t\t\tif (current.remove && current.nodeType === 3 && current.nodeValue.match(/[^\\u200B]/g) == null)\n\t\t\t\t{\n\t\t\t\t\t$(current).prev().remove();\n\t\t\t\t\tthis.sync();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildEventKeydownInsertLineBreak: function(e)\n\t\t{\n\t\t\tthis.bufferSet();\n\t\t\te.preventDefault();\n\t\t\tthis.insertLineBreak();\n\t\t\tthis.callback('enter', e);\n\t\t\treturn;\n\t\t},\n\t\tbuildEventKeyup: function(e)\n\t\t{\n\t\t\tif (this.rtePaste) return false;\n\n\t\t\tvar key = e.which;\n\t\t\tvar parent = this.getParent();\n\t\t\tvar current = this.getCurrent();\n\t\t\tif (!this.opts.linebreaks && current.nodeType == 3 && (parent == false || parent.tagName == 'BODY'))\n\t\t\t{\n\t\t\t\tvar node = $('<p>').append($(current).clone());\n\t\t\t\t$(current).replaceWith(node);\n\t\t\t\tvar next = $(node).next();\n\t\t\t\tif (typeof(next[0]) !== 'undefined' && next[0].tagName == 'BR')\n\t\t\t\t{\n\t\t\t\t\tnext.remove();\n\t\t\t\t}\n\n\t\t\t\tthis.selectionEnd(node);\n\t\t\t}\n\t\t\tif ((this.opts.convertLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && key === this.keyCode.ENTER)\n\t\t\t{\n\t\t\t\tthis.buildEventKeyupConverters();\n\t\t\t}\n\t\t\tif (key === this.keyCode.DELETE || key === this.keyCode.BACKSPACE)\n\t\t\t{\n\t\t\t\treturn this.formatEmpty(e);\n\t\t\t}\n\n\t\t\tthis.callback('keyup', e);\n\t\t\tthis.sync(e);\n\t\t},\n\t\tbuildEventKeyupConverters: function()\n\t\t{\n\t\t\tthis.formatLinkify(this.opts.linkProtocol, this.opts.convertLinks, this.opts.convertImageLinks, this.opts.convertVideoLinks, this.opts.linkSize);\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.convertImageLinks) this.observeImages();\n\t\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\t\t\t}, this), 5);\n\t\t},\n\t\tbuildPlugins: function()\n\t\t{\n\t\t\tif (!this.opts.plugins ) return;\n\n\t\t\t$.each(this.opts.plugins, $.proxy(function(i, s)\n\t\t\t{\n\t\t\t\tif (RedactorPlugins[s])\n\t\t\t\t{\n\t\t\t\t\t$.extend(this, RedactorPlugins[s]);\n\t\t\t\t\tif ($.isFunction( RedactorPlugins[ s ].init)) this.init();\n\t\t\t\t}\n\n\t\t\t}, this ));\n\t\t},\n\t\tiframeStart: function()\n\t\t{\n\t\t\tthis.iframeCreate();\n\n\t\t\tif (this.opts.textareamode) this.iframeAppend(this.$source);\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$sourceOld = this.$source.hide();\n\t\t\t\tthis.$source = this.buildCodearea(this.$sourceOld);\n\t\t\t\tthis.iframeAppend(this.$sourceOld);\n\t\t\t}\n\t\t},\n\t\tiframeAppend: function(el)\n\t\t{\n\t\t\tthis.$source.attr('dir', this.opts.direction).hide();\n\t\t\tthis.$box.insertAfter(el).append(this.$frame).append(this.$source);\n\t\t},\n\t\tiframeCreate: function()\n\t\t{\n\t\t\tthis.$frame = $('<iframe style=\"width: 100%;\" frameborder=\"0\" />').one('load', $.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.fullpage)\n\t\t\t\t{\n\t\t\t\t\tthis.iframePage();\n\n\t\t\t\t\tif (this.content === '') this.content = this.opts.invisibleSpace;\n\n\t\t\t\t\tthis.$frame.contents()[0].write(this.content);\n\t\t\t\t\tthis.$frame.contents()[0].close();\n\n\t\t\t\t\tvar timer = setInterval($.proxy(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.$frame.contents().find('body').html())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\t\t\tthis.iframeLoad();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this), 0);\n\t\t\t\t}\n\t\t\t\telse this.iframeLoad();\n\n\t\t\t}, this));\n\t\t},\n\t\tiframeDoc: function()\n\t\t{\n\t\t\treturn this.$frame[0].contentWindow.document;\n\t\t},\n\t\tiframePage: function()\n\t\t{\n\t\t\tvar doc = this.iframeDoc();\n\t\t\tif (doc.documentElement) doc.removeChild(doc.documentElement);\n\n\t\t\treturn doc;\n\t\t},\n\t\tiframeAddCss: function(css)\n\t\t{\n\t\t\tcss = css || this.opts.css;\n\n\t\t\tif (this.isString(css))\n\t\t\t{\n\t\t\t\tthis.$frame.contents().find('head').append('<link rel=\"stylesheet\" href=\"' + css + '\" />');\n\t\t\t}\n\n\t\t\tif ($.isArray(css))\n\t\t\t{\n\t\t\t\t$.each(css, $.proxy(function(i, url)\n\t\t\t\t{\n\t\t\t\t\tthis.iframeAddCss(url);\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t},\n\t\tiframeLoad: function()\n\t\t{\n\t\t\tthis.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\tif (this.$editor[0])\n\t\t\t{\n\t\t\t\tthis.document = this.$editor[0].ownerDocument;\n\t\t\t\tthis.window = this.document.defaultView || window;\n\t\t\t}\n\t\t\tthis.iframeAddCss();\n\n\t\t\tif (this.opts.fullpage)\n\t\t\t{\n\t\t\t\tthis.setFullpageOnInit(this.$source.val());\n\t\t\t}\n\t\t\telse this.set(this.content, true, false);\n\n\t\t\tthis.buildOptions();\n\t\t\tthis.buildAfter();\n\t\t},\n\t\tplaceholderInit: function()\n\t\t{\n\t\t\tif (this.opts.placeholder !== false)\n\t\t\t{\n\t\t\t\tthis.placeholderText = this.opts.placeholder;\n\t\t\t\tthis.opts.placeholder = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (typeof this.$element.attr('placeholder') == 'undefined' || this.$element.attr('placeholder') == '')\n\t\t\t\t{\n\t\t\t\t\tthis.opts.placeholder = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.placeholderText = this.$element.attr('placeholder');\n\t\t\t\t\tthis.opts.placeholder = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tplaceholderStart: function(html)\n\t\t{\n\t\t\tif (this.opts.placeholder === false)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.isEmpty(html))\n\t\t\t{\n\t\t\t\tthis.opts.focus = false;\n\t\t\t\tthis.placeholderOnFocus();\n\t\t\t\tthis.placeholderOnBlur();\n\n\t\t\t\treturn this.placeholderGet();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.placeholderOnBlur();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tplaceholderOnFocus: function()\n\t\t{\n\t\t\tthis.$editor.on('focus.redactor_placeholder', $.proxy(this.placeholderFocus, this));\n\t\t},\n\t\tplaceholderOnBlur: function()\n\t\t{\n\t\t\tthis.$editor.on('blur.redactor_placeholder', $.proxy(this.placeholderBlur, this));\n\t\t},\n\t\tplaceholderGet: function()\n\t\t{\n\t\t\tvar ph = $('<span class=\"redactor_placeholder\">').data('redactor', 'verified')\n\t\t\t.attr('contenteditable', false).text(this.placeholderText);\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\treturn $('<p>').append(ph);\n\t\t\t}\n\t\t\telse return ph;\n\t\t},\n\t\tplaceholderBlur: function()\n\t\t{\n\t\t\tvar html = this.get();\n\t\t\tif (this.isEmpty(html))\n\t\t\t{\n\t\t\t\tthis.placeholderOnFocus();\n\t\t\t\tthis.$editor.html(this.placeholderGet());\n\t\t\t}\n\t\t},\n\t\tplaceholderFocus: function()\n\t\t{\n\t\t\tthis.$editor.find('span.redactor_placeholder').remove();\n\n\t\t\tvar html = '';\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\thtml = this.opts.emptyHtml;\n\t\t\t}\n\n\t\t\tthis.$editor.off('focus.redactor_placeholder');\n\t\t\tthis.$editor.html(html);\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\n\t\t\t\tthis.selectionStart(this.$editor.children()[0]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tplaceholderRemoveFromEditor: function()\n\t\t{\n\t\t\tthis.$editor.find('span.redactor_placeholder').remove();\n\t\t\tthis.$editor.off('focus.redactor_placeholder');\n\t\t},\n\t\tplaceholderRemoveFromCode: function(html)\n\t\t{\n\t\t\treturn html.replace(/<span class=\"redactor_placeholder\"(.*?)>(.*?)<\\/span>/i, '');\n\t\t},\n\t\tshortcuts: function(e, key)\n\t\t{\n\t\t\tif (!this.opts.shortcuts)\n\t\t\t{\n\t\t\t\tif ((e.ctrlKey || e.metaKey) && (key === 66 || key === 73))\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$.each(this.opts.shortcuts, $.proxy(function(str, command)\n\t\t\t{\n\t\t\t\tvar keys = str.split(',');\n\t\t\t\tfor (var i in keys)\n\t\t\t\t{\n\t\t\t\t\tif (typeof keys[i] === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.shortcutsHandler(e, $.trim(keys[i]), $.proxy(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teval(command);\n\t\t\t\t\t\t}, this));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tshortcutsHandler: function(e, keys, origHandler)\n\t\t{\n\n\t\t\tvar hotkeysSpecialKeys =\n\t\t\t{\n\t\t\t\t8: \"backspace\", 9: \"tab\", 10: \"return\", 13: \"return\", 16: \"shift\", 17: \"ctrl\", 18: \"alt\", 19: \"pause\",\n\t\t\t\t20: \"capslock\", 27: \"esc\", 32: \"space\", 33: \"pageup\", 34: \"pagedown\", 35: \"end\", 36: \"home\",\n\t\t\t\t37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\", 45: \"insert\", 46: \"del\", 59: \";\", 61: \"=\",\n\t\t\t\t96: \"0\", 97: \"1\", 98: \"2\", 99: \"3\", 100: \"4\", 101: \"5\", 102: \"6\", 103: \"7\",\n\t\t\t\t104: \"8\", 105: \"9\", 106: \"*\", 107: \"+\", 109: \"-\", 110: \".\", 111 : \"/\",\n\t\t\t\t112: \"f1\", 113: \"f2\", 114: \"f3\", 115: \"f4\", 116: \"f5\", 117: \"f6\", 118: \"f7\", 119: \"f8\",\n\t\t\t\t120: \"f9\", 121: \"f10\", 122: \"f11\", 123: \"f12\", 144: \"numlock\", 145: \"scroll\", 173: \"-\", 186: \";\", 187: \"=\",\n\t\t\t\t188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\", 221: \"]\", 222: \"'\"\n\t\t\t};\n\t\t\tvar hotkeysShiftNums =\n\t\t\t{\n\t\t\t\t\"`\": \"~\", \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\",\n\t\t\t\t\"8\": \"*\", \"9\": \"(\", \"0\": \")\", \"-\": \"_\", \"=\": \"+\", \";\": \": \", \"'\": \"\\\"\", \",\": \"<\",\n\t\t\t\t\".\": \">\",  \"/\": \"?\",  \"\\\\\": \"|\"\n\t\t\t};\n\n\t\t\tkeys = keys.toLowerCase().split(\" \");\n\t\t\tvar special = hotkeysSpecialKeys[e.keyCode],\n\t\t\t\tcharacter = String.fromCharCode( e.which ).toLowerCase(),\n\t\t\t\tmodif = \"\", possible = {};\n\n\t\t\t$.each([ \"alt\", \"ctrl\", \"meta\", \"shift\"], function(index, specialKey)\n\t\t\t{\n\t\t\t\tif (e[specialKey + 'Key'] && special !== specialKey)\n\t\t\t\t{\n\t\t\t\t\tmodif += specialKey + '+';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (special)\n\t\t\t{\n\t\t\t\tpossible[modif + special] = true;\n\t\t\t}\n\n\t\t\tif (character)\n\t\t\t{\n\t\t\t\tpossible[modif + character] = true;\n\t\t\t\tpossible[modif + hotkeysShiftNums[character]] = true;\n\n\t\t\t\tif (modif === \"shift+\")\n\t\t\t\t{\n\t\t\t\t\tpossible[hotkeysShiftNums[character]] = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++)\n\t\t\t{\n\t\t\t\tif (possible[keys[i]])\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn origHandler.apply(this, arguments);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfocus: function()\n\t\t{\n\t\t\tif (!this.browser('opera'))\n\t\t\t{\n\t\t\t\tthis.window.setTimeout($.proxy(this.focusSet, this, true), 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\t\t},\n\t\tfocusWithSaveScroll: function()\n\t\t{\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tvar top = this.document.documentElement.scrollTop;\n\t\t\t}\n\n\t\t\tthis.$editor.focus();\n\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tthis.document.documentElement.scrollTop = top;\n\t\t\t}\n\t\t},\n\t\tfocusEnd: function()\n\t\t{\n\t\t\tif (!this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tthis.focusSet();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t{\n\t\t\t\t\tvar last = this.$editor.children().last();\n\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t\tthis.selectionEnd(last);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.focusSet();\n\t\t\t\t}\n\t\t\t}\n       \t},\n\t\tfocusSet: function(collapse, element)\n\t\t{\n\t\t\tthis.$editor.focus();\n\n\t\t\tif (typeof element == 'undefined')\n\t\t\t{\n\t\t\t\telement = this.$editor[0];\n\t\t\t}\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(element);\n\t\t\trange.collapse(collapse || false);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t},\n\t\ttoggle: function(direct)\n\t\t{\n\t\t\tif (this.opts.visual) this.toggleCode(direct);\n\t\t\telse this.toggleVisual();\n\t\t},\n\t\ttoggleVisual: function()\n\t\t{\n\t\t\tvar html = this.$source.hide().val();\n\t\t\tif (typeof this.modified !== 'undefined')\n\t\t\t{\n\t\t\t\tvar modified = this.modified.replace(/\\n/g, '');\n\n\t\t\t\tvar thtml = html.replace(/\\n/g, '');\n\t\t\t\tthtml = this.cleanRemoveSpaces(thtml, false);\n\n\t\t\t\tthis.modified = this.cleanRemoveSpaces(modified, false) !== thtml;\n\t\t\t}\n\n\t\t\tif (this.modified)\n\t\t\t{\n\n\t\t\t\tif (this.opts.fullpage && html === '')\n\t\t\t\t{\n\t\t\t\t\tthis.setFullpageOnInit(html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.set(html);\n\t\t\t\t\tif (this.opts.fullpage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.buildBindKeyboard();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.callback('change', false, html);\n\t\t\t}\n\n\t\t\tif (this.opts.iframe) this.$frame.show();\n\t\t\telse this.$editor.show();\n\n\t\t\tif (this.opts.fullpage) this.$editor.attr('contenteditable', true );\n\n\t\t\tthis.$source.off('keydown.redactor-textarea-indenting');\n\n\t\t\tthis.$editor.focus();\n\t\t\tthis.selectionRestore();\n\n\t\t\tthis.observeStart();\n\t\t\tthis.buttonActiveVisual();\n\t\t\tthis.buttonInactive('html');\n\t\t\tthis.opts.visual = true;\n\t\t},\n\t\ttoggleCode: function(direct)\n\t\t{\n\t\t\tif (direct !== false) this.selectionSave();\n\n\t\t\tvar height = null;\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\theight = this.$frame.height();\n\t\t\t\tif (this.opts.fullpage) this.$editor.removeAttr('contenteditable');\n\t\t\t\tthis.$frame.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\theight = this.$editor.innerHeight();\n\t\t\t\tthis.$editor.hide();\n\t\t\t}\n\n\t\t\tvar html = this.$source.val();\n\t\t\tif (html !== '' && this.opts.tidyHtml)\n\t\t\t{\n\t\t\t\tthis.$source.val(this.cleanHtml(html));\n\t\t\t}\n\n\t\t\tthis.modified = html;\n\n\t\t\tthis.$source.height(height).show().focus();\n\t\t\tthis.$source.on('keydown.redactor-textarea-indenting', this.textareaIndenting);\n\n\t\t\tthis.buttonInactiveVisual();\n\t\t\tthis.buttonActive('html');\n\t\t\tthis.opts.visual = false;\n\t\t},\n\t\ttextareaIndenting: function(e)\n\t\t{\n\t\t\tif (e.keyCode === 9)\n\t\t\t{\n\t\t\t\tvar $el = $(this);\n\t\t\t\tvar start = $el.get(0).selectionStart;\n\t\t\t\t$el.val($el.val().substring(0, start) + \"\\t\" + $el.val().substring($el.get(0).selectionEnd));\n\t\t\t\t$el.get(0).selectionStart = $el.get(0).selectionEnd = start + 1;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tautosave: function()\n\t\t{\n\t\t\tvar savedHtml = false;\n\t\t\tthis.autosaveInterval = setInterval($.proxy(function()\n\t\t\t{\n\t\t\t\tvar html = this.get();\n\t\t\t\tif (savedHtml !== html)\n\t\t\t\t{\n\t\t\t\t\tvar name = this.$source.attr('name');\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: this.opts.autosave,\n\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\tdata: 'name=' + name + '&' + name + '=' + escape(encodeURIComponent(html)),\n\t\t\t\t\t\tsuccess: $.proxy(function(data)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar json = $.parseJSON(data);\n\t\t\t\t\t\t\tif (typeof json.error == 'undefined')\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tthis.callback('autosave', false, json);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tthis.callback('autosaveError', false, json);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsavedHtml = html;\n\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this), this.opts.autosaveInterval*1000);\n\t\t},\n\t\ttoolbarBuild: function()\n\t\t{\n\n\t\t\tif (this.isMobile() && this.opts.buttonsHideOnMobile.length > 0)\n\t\t\t{\n\t\t\t\t$.each(this.opts.buttonsHideOnMobile, $.proxy(function(i, s)\n\t\t\t\t{\n\t\t\t\t\tvar index = this.opts.buttons.indexOf(s);\n\t\t\t\t\tthis.opts.buttons.splice(index, 1);\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif (this.opts.air)\n\t\t\t{\n\t\t\t\tthis.opts.buttons = this.opts.airButtons;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.buttonSource)\n\t\t\t\t{\n\t\t\t\t\tvar index = this.opts.buttons.indexOf('html');\n\t\t\t\t\tthis.opts.buttons.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.opts.toolbar)\n\t\t\t{\n\t\t\t\t$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function (i, s)\n\t\t\t\t{\n\t\t\t\t\tif ($.inArray(i, this.opts.formattingTags ) == '-1') delete this.opts.toolbar.formatting.dropdown[i];\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif (this.opts.buttons.length === 0) return false;\n\t\t\tthis.airEnable();\n\t\t\tthis.$toolbar = $('<ul>').addClass('redactor_toolbar').attr('id', 'redactor_toolbar_' + this.uuid);\n\n\t\t\tif (this.opts.typewriter)\n\t\t\t{\n\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-typewriter');\n\t\t\t}\n\n\t\t\tif (this.opts.toolbarOverflow && this.isMobile())\n\t\t\t{\n\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-overflow');\n\t\t\t}\n\n\t\t\tif (this.opts.air)\n\t\t\t{\n\n\t\t\t\tthis.$air = $('<div class=\"redactor_air\">').attr('id', 'redactor_air_' + this.uuid).hide();\n\t\t\t\tthis.$air.append(this.$toolbar);\n\t\t\t\t$('body').append(this.$air);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.opts.toolbarExternal)\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-external');\n\t\t\t\t\t$(this.opts.toolbarExternal).html(this.$toolbar);\n\t\t\t\t}\n\t\t\t\telse this.$box.prepend(this.$toolbar);\n\t\t\t}\n\n\t\t\t$.each(this.opts.buttons, $.proxy(function(i, btnName)\n\t\t\t{\n\t\t\t\tif (this.opts.toolbar[btnName])\n\t\t\t\t{\n\t\t\t\t\tvar btnObject = this.opts.toolbar[btnName];\n\t\t\t\t\tif (this.opts.fileUpload === false && btnName === 'file') return true;\n\t\t\t\t\tthis.$toolbar.append( $('<li>').append(this.buttonBuild(btnName, btnObject)));\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tthis.$toolbar.find('a').attr('tabindex', '-1');\n\t\t\tif (this.opts.toolbarFixed)\n\t\t\t{\n\t\t\t\tthis.toolbarObserveScroll();\n\t\t\t\t$(this.opts.toolbarFixedTarget).on('scroll.redactor', $.proxy(this.toolbarObserveScroll, this));\n\t\t\t}\n\t\t\tif (this.opts.activeButtons)\n\t\t\t{\n\t\t\t\tthis.$editor.on('mouseup.redactor keyup.redactor', $.proxy(this.buttonActiveObserver, this));\n\t\t\t}\n\t\t},\n\t\ttoolbarObserveScroll: function()\n\t\t{\n\t\t\tvar scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();\n\n\t\t\tvar boxTop = 0;\n\t\t\tvar left = 0;\n\t\t\tvar end = 0;\n\n\t\t\tif (this.opts.toolbarFixedTarget === document)\n\t\t\t{\n\t\t\t\tboxTop = this.$box.offset().top;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboxTop = 1;\n\t\t\t}\n\n\t\t\tend = boxTop + this.$box.height() + 40;\n\n\t\t\tif (scrollTop > boxTop)\n\t\t\t{\n\t\t\t\tvar width = '100%';\n\t\t\t\tif (this.opts.toolbarFixedBox)\n\t\t\t\t{\n\t\t\t\t\tleft = this.$box.offset().left;\n\t\t\t\t\twidth = this.$box.innerWidth();\n\t\t\t\t\tthis.$toolbar.addClass('toolbar_fixed_box');\n\t\t\t\t}\n\n\t\t\t\tthis.toolbarFixed = true;\n\n\t\t\t\tif (this.opts.toolbarFixedTarget === document)\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\tzIndex: 10005,\n\t\t\t\t\t\ttop: this.opts.toolbarFixedTopOffset + 'px',\n\t\t\t\t\t\tleft: left\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\tzIndex: 10005,\n\t\t\t\t\t\ttop: (this.opts.toolbarFixedTopOffset + scrollTop) + 'px',\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (scrollTop < end) this.$toolbar.css('visibility', 'visible');\n\t\t\t\telse this.$toolbar.css('visibility', 'hidden');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.toolbarFixed = false;\n\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: left\n\t\t\t\t});\n\n\t\t\t\tif (this.opts.toolbarFixedBox) this.$toolbar.removeClass('toolbar_fixed_box');\n\t\t\t}\n\t\t},\n\t\tairEnable: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tthis.$editor.on('mouseup.redactor keyup.redactor', this, $.proxy(function(e)\n\t\t\t{\n\t\t\t\tvar text = this.getSelectionText();\n\n\t\t\t\tif (e.type === 'mouseup' && text != '') this.airShow(e);\n\t\t\t\tif (e.type === 'keyup' && e.shiftKey && text != '')\n\t\t\t\t{\n\t\t\t\t\tvar $focusElem = $(this.getElement(this.getSelection().focusNode)), offset = $focusElem.offset();\n\t\t\t\t\toffset.height = $focusElem.height();\n\t\t\t\t\tthis.airShow(offset, true);\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tairShow: function (e, keyboard)\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar left, top;\n\t\t\t$('.redactor_air').hide();\n\n\t\t\tif (keyboard)\n\t\t\t{\n\t\t\t\tleft = e.left;\n\t\t\t\ttop = e.top + e.height + 14;\n\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\ttop += this.$box.position().top - $(this.document).scrollTop();\n\t\t\t\t\tleft += this.$box.position().left;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar width = this.$air.innerWidth();\n\n\t\t\t\tleft = e.clientX;\n\t\t\t\tif ($(this.document).width() < (left + width)) left -= width;\n\n\t\t\t\ttop = e.clientY + 14;\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\ttop += this.$box.position().top;\n\t\t\t\t\tleft += this.$box.position().left;\n\t\t\t\t}\n\t\t\t\telse top += $( this.document ).scrollTop();\n\t\t\t}\n\n\t\t\tthis.$air.css({\n\t\t\t\tleft: left + 'px',\n\t\t\t\ttop: top + 'px'\n\t\t\t}).show();\n\n\t\t\tthis.airBindHide();\n\t\t},\n\t\tairBindHide: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tvar hideHandler = $.proxy(function(doc)\n\t\t\t{\n\t\t\t\t$(doc).on('mousedown.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif ($( e.target ).closest(this.$toolbar).length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t\tthis.selectionRemove();\n\t\t\t\t\t\t$(doc).off(e);\n\t\t\t\t\t}\n\n\t\t\t\t}, this)).on('keydown.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif (e.which === this.keyCode.ESC)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getSelection().collapseToStart();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t$(doc).off(e);\n\n\t\t\t\t}, this));\n\t\t\t}, this);\n\t\t\thideHandler(document);\n\t\t\tif (this.opts.iframe) hideHandler(this.document);\n\t\t},\n\t\tairBindMousemoveHide: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tvar hideHandler = $.proxy(function(doc)\n\t\t\t{\n\t\t\t\t$(doc).on('mousemove.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif ($( e.target ).closest(this.$toolbar).length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t\t$(doc).off(e);\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t}, this);\n\t\t\thideHandler(document);\n\t\t\tif (this.opts.iframe) hideHandler(this.document);\n\t\t},\n\t\tdropdownBuild: function($dropdown, dropdownObject)\n\t\t{\n\t\t\t$.each(dropdownObject, $.proxy(function(btnName, btnObject)\n\t\t\t{\n\t\t\t\tif (!btnObject.className) btnObject.className = '';\n\n\t\t\t\tvar $item;\n\t\t\t\tif (btnObject.name === 'separator') $item = $('<a class=\"redactor_separator_drop\">');\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$item = $('<a href=\"#\" class=\"' + btnObject.className + ' redactor_dropdown_' + btnName + '\">' + btnObject.title + '</a>');\n\t\t\t\t\t$item.on('click', $.proxy(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.opts.air)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.selectionRestore();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\t\t\tif (this.browser('msie')) e.returnValue = false;\n\n\t\t\t\t\t\tif (btnObject.callback) btnObject.callback.call(this, btnName, $item, btnObject, e);\n\t\t\t\t\t\tif (btnObject.exec) this.execCommand(btnObject.exec, btnName);\n\t\t\t\t\t\tif (btnObject.func) this[btnObject.func](btnName);\n\n\t\t\t\t\t\tthis.buttonActiveObserver();\n\t\t\t\t\t\tif (this.opts.air) this.$air.fadeOut(100);\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\t$dropdown.append($item);\n\n\t\t\t}, this));\n\t\t},\n\t\tdropdownShow: function(e, key)\n\t\t{\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar $button = this.buttonGet(key);\n\t\t\tvar $dropdown  = $button.data('dropdown').appendTo(document.body);\n\n\t\t\tif ($button.hasClass('dropact')) this.dropdownHideAll();\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dropdownHideAll();\n\t\t\t\tthis.callback('dropdownShow', { dropdown: $dropdown, key: key, button: $button });\n\n\t\t\t\tthis.buttonActive(key);\n\t\t\t\t$button.addClass('dropact');\n\n\t\t\t\tvar keyPosition = $button.offset();\n\t\t\t\tvar dropdownWidth = $dropdown.width();\n\t\t\t\tif ((keyPosition.left + dropdownWidth) > $(document).width())\n\t\t\t\t{\n\t\t\t\t\tkeyPosition.left -= dropdownWidth;\n\t\t\t\t}\n\n\t\t\t\tvar left = keyPosition.left + 'px';\n\t\t\t\tvar btnHeight = $button.innerHeight();\n\n\t\t\t\tvar position = 'absolute';\n\t\t\t\tvar top = (btnHeight + this.opts.toolbarFixedTopOffset) + 'px';\n\n\t\t\t\tif (this.opts.toolbarFixed && this.toolbarFixed) position = 'fixed';\n\t\t\t\telse top = keyPosition.top + btnHeight + 'px';\n\n\t\t\t\t$dropdown.css({ position: position, left: left, top: top }).show();\n\t\t\t\tthis.callback('dropdownShown', { dropdown: $dropdown, key: key, button: $button });\n\t\t\t}\n\t\t\tvar hdlHideDropDown = $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.dropdownHide(e, $dropdown);\n\n\t\t\t}, this);\n\n\t\t\t$(document).one('click', hdlHideDropDown);\n\t\t\tthis.$editor.one('click', hdlHideDropDown);\n\t\t\tthis.$editor.one('touchstart', hdlHideDropDown);\n\t\t\te.stopPropagation();\n\t\t\tthis.focusWithSaveScroll();\n\t\t},\n\t\tdropdownHideAll: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.dropact').removeClass('redactor_act').removeClass('dropact');\n\t\t\t$('.redactor_dropdown').hide();\n\t\t\tthis.callback('dropdownHide');\n\t\t},\n\t\tdropdownHide: function (e, $dropdown)\n\t\t{\n\t\t\tif (!$(e.target).hasClass('dropact'))\n\t\t\t{\n\t\t\t\t$dropdown.removeClass('dropact');\n\t\t\t\tthis.dropdownHideAll();\n\t\t\t}\n\t\t},\n\t\tbuttonBuild: function(btnName, btnObject, buttonImage)\n\t\t{\n\t\t\tvar $button = $('<a href=\"javascript:;\" title=\"' + btnObject.title + '\" tabindex=\"-1\" class=\"re-icon re-' + btnName + '\"></a>');\n\n\t\t\tif (typeof buttonImage != 'undefined')\n\t\t\t{\n\t\t\t\t$button.addClass('redactor-btn-image');\n\t\t\t}\n\n\t\t\t$button.on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\tif (this.browser('msie')) e.returnValue = false;\n\n\t\t\t\tif ($button.hasClass('redactor_button_disabled')) return false;\n\n\t\t\t\tif (this.isFocused() === false && !btnObject.exec)\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t}\n\n\t\t\t\tif (btnObject.exec)\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\n\t\t\t\t\tthis.execCommand(btnObject.exec, btnName);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.func && btnObject.func !== 'show')\n\t\t\t\t{\n\t\t\t\t\tthis[btnObject.func](btnName);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.callback)\n\t\t\t\t{\n\t\t\t\t\tbtnObject.callback.call(this, btnName, $button, btnObject, e);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.dropdown)\n\t\t\t\t{\n\t\t\t\t\tthis.dropdownShow(e, btnName);\n\t\t\t\t}\n\n\t\t\t\tthis.buttonActiveObserver(false, btnName);\n\n\t\t\t}, this));\n\t\t\tif (btnObject.dropdown)\n\t\t\t{\n\t\t\t\tvar $dropdown = $('<div class=\"redactor_dropdown redactor_dropdown_box_' + btnName + '\" style=\"display: none;\">');\n\t\t\t\t$button.data('dropdown', $dropdown);\n\t\t\t\tthis.dropdownBuild($dropdown, btnObject.dropdown);\n\t\t\t}\n\n\t\t\treturn $button;\n\t\t},\n\t\tbuttonGet: function(key)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return false;\n\t\t\treturn $(this.$toolbar.find('a.re-' + key));\n\t\t},\n\t\tbuttonTagToActiveState: function(buttonName, tagName)\n\t\t{\n\t\t\tthis.opts.activeButtons.push(buttonName);\n\t\t\tthis.opts.activeButtonsStates[tagName] = buttonName;\n\t\t},\n\t\tbuttonActiveToggle: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\n\t\t\tif (btn.hasClass('redactor_act'))\n\t\t\t{\n\t\t\t\tthis.buttonInactive(key);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.buttonActive(key);\n\t\t\t}\n\t\t},\n\t\tbuttonActive: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\t\t\tbtn.addClass('redactor_act');\n\t\t},\n\t\tbuttonInactive: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\t\t\tbtn.removeClass('redactor_act');\n\t\t},\n\t\tbuttonInactiveAll: function(btnName)\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('.re-' + btnName).removeClass('redactor_act');\n\t\t},\n\t\tbuttonActiveVisual: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('a.re-html').removeClass('redactor_button_disabled');\n\t\t},\n\t\tbuttonInactiveVisual: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('a.re-html').addClass('redactor_button_disabled');\n\t\t},\n\t\tbuttonChangeIcon: function (key, classname)\n\t\t{\n\t\t\tthis.buttonGet(key).addClass('re-' + classname);\n\t\t},\n\t\tbuttonRemoveIcon: function(key, classname)\n\t\t{\n\t\t\tthis.buttonGet(key).removeClass('re-' + classname);\n\t\t},\n\t\tbuttonAwesome: function(key, name)\n\t\t{\n\t\t\tvar button = this.buttonGet(key);\n\t\t\tbutton.removeClass('redactor-btn-image');\n\t\t\tbutton.addClass('fa-redactor-btn');\n\t\t\tbutton.html('<i class=\"fa ' + name + '\"></i>');\n\t\t},\n\t\tbuttonAdd: function(key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\n\t\t\tthis.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonAddFirst: function(key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tthis.$toolbar.prepend($('<li>').append(btn));\n\t\t},\n\t\tbuttonAddAfter: function(afterkey, key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tvar $btn = this.buttonGet(afterkey);\n\n\t\t\tif ($btn.length !== 0) $btn.parent().after($('<li>').append(btn));\n\t\t\telse this.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonAddBefore: function(beforekey, key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tvar $btn = this.buttonGet(beforekey);\n\n\t\t\tif ($btn.length !== 0) $btn.parent().before($('<li>').append(btn));\n\t\t\telse this.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonRemove: function (key)\n\t\t{\n\t\t\tvar $btn = this.buttonGet(key);\n\t\t\t$btn.remove();\n\t\t},\n\t\tbuttonActiveObserver: function(e, btnName)\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tthis.buttonInactiveAll(btnName);\n\n\t\t\tif (e === false && btnName !== 'html')\n\t\t\t{\n\t\t\t\tif ($.inArray(btnName, this.opts.activeButtons) != -1)\n\t\t\t\t{\n\t\t\t\t\tthis.buttonActiveToggle(btnName);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (parent && parent.tagName === 'A') this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_edit);\n\t\t\telse this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_insert);\n\n\t\t\t$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)\n\t\t\t{\n\t\t\t\tif ($(parent).closest(key, this.$editor.get()[0]).length != 0)\n\t\t\t\t{\n\t\t\t\t\tthis.buttonActive(value);\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tvar $parent = $(parent).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\tif ($parent.length)\n\t\t\t{\n\t\t\t\tvar align = $parent.css('text-align');\n\t\t\t\tif (align == '')\n\t\t\t\t{\n\t\t\t\t\talign = 'left';\n\t\t\t\t}\n\n\t\t\t\tthis.buttonActive('align' + align);\n\t\t\t}\n\t\t},\n\t\texecPasteFrag: function(html)\n\t\t{\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar range = this.getRange();\n\t\t\t\trange.deleteContents();\n\n\t\t\t\tvar el = this.document.createElement(\"div\");\n\t\t\t\tel.innerHTML = html;\n\n\t\t\t\tvar frag = this.document.createDocumentFragment(), node, lastNode;\n\t\t\t\twhile ((node = el.firstChild))\n\t\t\t\t{\n\t\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t\t}\n\n\t\t\t\tvar firstNode = frag.firstChild;\n\t\t\t\trange.insertNode(frag);\n\n\t\t\t\tif (lastNode)\n\t\t\t\t{\n\t\t\t\t\trange = range.cloneRange();\n\t\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t}\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\t\t},\n\t\texec: function(cmd, param, sync)\n\t\t{\n\t\t\tif (cmd === 'formatblock' && this.browser('msie'))\n\t\t\t{\n\t\t\t\tparam = '<' + param + '>';\n\t\t\t}\n\n\t\t\tif (cmd === 'inserthtml' && this.browser('msie'))\n\t\t\t{\n\t\t\t\tif (!this.isIe11())\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t\tthis.document.selection.createRange().pasteHTML(param);\n\t\t\t\t}\n\t\t\t\telse this.execPasteFrag(param);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.document.execCommand(cmd, false, param);\n\t\t\t}\n\n\t\t\tif (sync !== false) this.sync();\n\t\t\tthis.callback('execCommand', cmd, param);\n\t\t},\n\t\texecCommand: function(cmd, param, sync)\n\t\t{\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\tthis.$source.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (   cmd === 'bold'\n\t\t\t\t|| cmd === 'italic'\n\t\t\t\t|| cmd === 'underline'\n\t\t\t\t|| cmd === 'strikethrough')\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t}\n\t\t\tif (cmd === 'superscript' || cmd === 'subscript')\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tif (parent.tagName === 'SUP' || parent.tagName === 'SUB')\n\t\t\t\t{\n\t\t\t\t\tthis.inlineRemoveFormatReplace(parent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cmd === 'inserthtml')\n\t\t\t{\n\t\t\t\tthis.insertHtml(param, sync);\n\t\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.currentOrParentIs('CODE') && !this.opts.formattingPre) return false;\n\t\t\tif (cmd === 'insertunorderedlist' || cmd === 'insertorderedlist') return this.execLists(cmd, param);\n\t\t\tif (cmd === 'unlink') return this.execUnlink(cmd, param);\n\t\t\tthis.exec(cmd, param, sync);\n\t\t\tif (cmd === 'inserthorizontalrule') this.$editor.find('hr').removeAttr('id');\n\n\t\t},\n\t\texecUnlink: function(cmd, param)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tvar link = this.currentOrParentIs('A');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\t$(link).replaceWith($(link).text());\n\n\t\t\t\tthis.sync();\n\t\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\texecLists: function(cmd, param)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $list = $(parent).closest('ol, ul');\n\n\t\t\tif (!this.isParentRedactor($list) && $list.length != 0)\n\t\t\t{\n\t\t\t\t$list = false;\n\t\t\t}\n\n\t\t\tvar remove = false;\n\n\t\t\tif ($list && $list.length)\n\t\t\t{\n\t\t\t\tremove = true;\n\t\t\t\tvar listTag = $list[0].tagName;\n\t\t\t \tif ((cmd === 'insertunorderedlist' && listTag === 'OL')\n\t\t\t \t|| (cmd === 'insertorderedlist' && listTag === 'UL'))\n\t\t\t \t{\n\t\t\t\t \tremove = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectionSave();\n\t\t\tif (remove)\n\t\t\t{\n\n\t\t\t\tvar nodes = this.getNodes();\n\t\t\t\tvar elems = this.getBlocks(nodes);\n\n\t\t\t\tif (typeof nodes[0] != 'undefined' && nodes.length > 1 && nodes[0].nodeType == 3)\n\t\t\t\t{\n\n\t\t\t\t\telems.unshift(this.getBlock());\n\t\t\t\t}\n\n\t\t\t\tvar data = '', replaced = '';\n\t\t\t\t$.each(elems, $.proxy(function(i,s)\n\t\t\t\t{\n\t\t\t\t\tif (s.tagName == 'LI')\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $s = $(s);\n\t\t\t\t\t\tvar cloned = $s.clone();\n\t\t\t\t\t\tcloned.find('ul', 'ol').remove();\n\n\t\t\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata += this.outerHtml($('<p>').append(cloned.contents()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar clonedHtml = cloned.html().replace(/<br\\s?\\/?>$/i, '');\n\t\t\t\t\t\t\tdata += clonedHtml + '<br>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (i == 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$s.addClass('redactor-replaced').empty();\n\t\t\t\t\t\t\treplaced = this.outerHtml($s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse $s.remove();\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t\thtml = this.$editor.html().replace(replaced, '</' + listTag + '>' + data + '<' + listTag + '>');\n\n\t\t\t\tthis.$editor.html(html);\n\t\t\t\tthis.$editor.find(listTag + ':empty').remove();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar firstParent = $(this.getParent()).closest('td');\n\n\t\t\t\tif (this.browser('msie') && !this.isIe11() && this.opts.linebreaks)\n\t\t\t\t{\n\t\t\t\t\tvar wrapper = this.selectionWrap('div');\n\t\t\t\t\tvar wrapperHtml = $(wrapper).html();\n\t\t\t\t\tvar tmpList = $('<ul>');\n\t\t\t\t\tif (cmd == 'insertorderedlist')\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpList = $('<ol>');\n\t\t\t\t\t}\n\n\t\t\t\t\tvar tmpLi = $('<li>');\n\n\t\t\t\t\tif ($.trim(wrapperHtml) == '')\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpLi.append(wrapperHtml + '<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t\ttmpList.append(tmpLi);\n\t\t\t\t\t\tthis.$editor.find('#selection-marker-1').replaceWith(tmpList);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpLi.append(wrapperHtml);\n\t\t\t\t\t\ttmpList.append(tmpLi);\n\t\t\t\t\t\t$(wrapper).replaceWith(tmpList);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.document.execCommand(cmd);\n\t\t\t\t}\n\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tvar $list = $(parent).closest('ol, ul');\n\n\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t{\n\t\t\t\t\tvar listText = $.trim($list.text());\n\t\t\t\t\tif (listText == '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$list.children('li').find('br').remove();\n\t\t\t\t\t\t$list.children('li').append('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (firstParent.length != 0)\n\t\t\t\t{\n\t\t\t\t\t$list.wrapAll('<td>');\n\t\t\t\t}\n\n\t\t\t\tif ($list.length)\n\t\t\t\t{\n\n\t\t\t\t\tvar $listParent = $list.parent();\n\t\t\t\t\tif (this.isParentRedactor($listParent) && $listParent[0].tagName != 'LI' && this.nodeTestBlocks($listParent[0]))\n\t\t\t\t\t{\n\t\t\t\t\t\t$listParent.replaceWith($listParent.contents());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.$editor.find('#selection-marker-1').removeAttr('id');\n\t\t\tthis.sync();\n\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\treturn;\n\t\t},\n\t\tindentingIndent: function()\n\t\t{\n\t\t\tthis.indentingStart('indent');\n\t\t},\n\t\tindentingOutdent: function()\n\t\t{\n\t\t\tthis.indentingStart('outdent');\n\t\t},\n\t\tindentingStart: function(cmd)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (cmd === 'indent')\n\t\t\t{\n\t\t\t\tvar block = this.getBlock();\n\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tif (block && block.tagName == 'LI')\n\t\t\t\t{\n\n\t\t\t\t\tvar parent = this.getParent();\n\n\t\t\t\t\tvar $list = $(parent).closest('ol, ul');\n\t\t\t\t\tvar listTag = $list[0].tagName;\n\n\t\t\t\t\tvar elems = this.getBlocks();\n\n\t\t\t\t\t$.each(elems, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName == 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar $prev = $(s).prev();\n\t\t\t\t\t\t\tif ($prev.length != 0 && $prev[0].tagName == 'LI')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar $childList = $prev.children('ul, ol');\n\t\t\t\t\t\t\t\tif ($childList.length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$prev.append($('<' + listTag + '>').append(s));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse $childList.append(s);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\telse if (block === false && this.opts.linebreaks === true)\n\t\t\t\t{\n\t\t\t\t\tthis.exec('formatBlock', 'blockquote');\n\t\t\t\t\tvar newblock = this.getBlock();\n\t\t\t\t\tvar block = $('<div data-tagblock=\"\">').html($(newblock).html());\n\t\t\t\t\t$(newblock).replaceWith(block);\n\n\t\t\t\t\tvar left = this.normalize($(block).css('margin-left')) + this.opts.indentValue;\n\t\t\t\t\t$(block).css('margin-left', left + 'px');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\t\tif (elem.tagName === 'TD') return;\n\n\t\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar left = this.normalize($el.css('margin-left')) + this.opts.indentValue;\n\t\t\t\t\t\t$el.css('margin-left', left + 'px');\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\tthis.selectionRestore();\n\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tvar block = this.getBlock();\n\t\t\t\tif (block && block.tagName == 'LI')\n\t\t\t\t{\n\n\t\t\t\t\tvar elems = this.getBlocks();\n\t\t\t\t\tvar index = 0;\n\n\t\t\t\t\tthis.insideOutdent(block, index, elems);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar left = this.normalize($el.css('margin-left')) - this.opts.indentValue;\n\t\t\t\t\t\tif (left <= 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (this.opts.linebreaks === true && typeof($el.data('tagblock')) !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$el.replaceWith($el.html() + '<br>');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$el.css('margin-left', '');\n\t\t\t\t\t\t\t\tthis.removeEmptyAttr($el, 'style');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el.css('margin-left', left + 'px');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\n\t\t\tthis.sync();\n\n\t\t},\n\t\tinsideOutdent: function (li, index, elems)\n\t\t{\n\t\t\tif (li && li.tagName == 'LI')\n\t\t\t{\n\t\t\t\tvar $parent = $(li).parent().parent();\n\t\t\t\tif ($parent.length != 0 && $parent[0].tagName == 'LI')\n\t\t\t\t{\n\t\t\t\t\t$parent.after(li);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (typeof elems[index] != 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tli = elems[index];\n\t\t\t\t\t\tindex++;\n\n\t\t\t\t\t\tthis.insideOutdent(li, index, elems);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.execCommand('insertunorderedlist');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\talignmentLeft: function()\n\t\t{\n\t\t\tthis.alignmentSet('', 'JustifyLeft');\n\t\t},\n\t\talignmentRight: function()\n\t\t{\n\t\t\tthis.alignmentSet('right', 'JustifyRight');\n\t\t},\n\t\talignmentCenter: function()\n\t\t{\n\t\t\tthis.alignmentSet('center', 'JustifyCenter');\n\t\t},\n\t\talignmentJustify: function()\n\t\t{\n\t\t\tthis.alignmentSet('justify', 'JustifyFull');\n\t\t},\n\t\talignmentSet: function(type, cmd)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (this.oldIE())\n\t\t\t{\n\t\t\t\tthis.document.execCommand(cmd, false, false);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar block = this.getBlock();\n\t\t\tif (!block && this.opts.linebreaks)\n\t\t\t{\n\n\t\t\t\tthis.exec('formatblock', 'div');\n\n\t\t\t\tvar newblock = this.getBlock();\n\t\t\t\tvar block = $('<div data-tagblock=\"\">').html($(newblock).html());\n\t\t\t\t$(newblock).replaceWith(block);\n\n\t\t\t\t$(block).css('text-align', type);\n\t\t\t\tthis.removeEmptyAttr(block, 'style');\n\n\t\t\t\tif (type == '' && typeof($(block).data('tagblock')) !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\t$(block).replaceWith($(block).html());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t{\n\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t{\n\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($el)\n\t\t\t\t\t{\n\t\t\t\t\t\t$el.css('text-align', type);\n\t\t\t\t\t\tthis.removeEmptyAttr($el, 'style');\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tcleanEmpty: function(html)\n\t\t{\n\t\t\tvar ph = this.placeholderStart(html);\n\t\t\tif (ph !== false) return ph;\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tif (html === '') html = this.opts.emptyHtml;\n\t\t\t\telse if (html.search(/^<hr\\s?\\/?>$/gi) !== -1) html = '<hr>' + this.opts.emptyHtml;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanConverters: function(html)\n\t\t{\n\n\t\t\tif (this.opts.convertDivs && !this.opts.gallery)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '<p$1>$2</p>');\n\t\t\t}\n\n\t\t\tif (this.opts.paragraphy) html = this.cleanParagraphy(html);\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanConvertProtected: function(html)\n\t\t{\n\t\t\tif (this.opts.templateVars)\n\t\t\t{\n\t\t\t\thtml = html.replace(/\\{\\{(.*?)\\}\\}/gi, '<!-- template double $1 -->');\n\t\t\t\thtml = html.replace(/\\{(.*?)\\}/gi, '<!-- template $1 -->');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<script(.*?)>([\\w\\W]*?)<\\/script>/gi, '<title type=\"text/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"$1>$2</title>');\n\t\t\thtml = html.replace(/<style(.*?)>([\\w\\W]*?)<\\/style>/gi, '<section$1 style=\"display: none;\" rel=\"redactor-style-tag\">$2</section>');\n\t\t\thtml = html.replace(/<form(.*?)>([\\w\\W]*?)<\\/form>/gi, '<section$1 rel=\"redactor-form-tag\">$2</section>');\n\t\t\tif (this.opts.phpTags) html = html.replace(/<\\?php([\\w\\W]*?)\\?>/gi, '<section style=\"display: none;\" rel=\"redactor-php-tag\">$1</section>');\n\t\t\telse html = html.replace(/<\\?php([\\w\\W]*?)\\?>/gi, '');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanReConvertProtected: function(html)\n\t\t{\n\t\t\tif (this.opts.templateVars)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<!-- template double (.*?) -->/gi, '{{$1}}');\n\t\t\t\thtml = html.replace(/<!-- template (.*?) -->/gi, '{$1}');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<title type=\"text\\/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"(.*?)>([\\w\\W]*?)<\\/title>/gi, '<script$1 type=\"text/javascript\">$2</script>');\n\t\t\thtml = html.replace(/<section(.*?) style=\"display: none;\" rel=\"redactor-style-tag\">([\\w\\W]*?)<\\/section>/gi, '<style$1>$2</style>');\n\t\t\thtml = html.replace(/<section(.*?)rel=\"redactor-form-tag\"(.*?)>([\\w\\W]*?)<\\/section>/gi, '<form$1$2>$3</form>');\n\t\t\tif (this.opts.phpTags) html = html.replace(/<section style=\"display: none;\" rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi, '<?php\\r\\n$1\\r\\n?>');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanRemoveSpaces: function(html, buffer)\n\t\t{\n\t\t\tif (buffer !== false)\n\t\t\t{\n\t\t\t\tvar buffer = []\n\t\t\t\tvar matches = html.match(/<(code|style|script|title)(.*?)>([\\w\\W]*?)<\\/(code|style|script|title)>/gi);\n\t\t\t\tif (matches === null) matches = [];\n\n\t\t\t\tif (this.opts.phpTags)\n\t\t\t\t{\n\t\t\t\t\tvar phpMatches = html.match(/<\\?php([\\w\\W]*?)\\?>/gi);\n\t\t\t\t\tif (phpMatches) matches = $.merge(matches, phpMatches);\n\t\t\t\t}\n\n\t\t\t\tif (matches)\n\t\t\t\t{\n\t\t\t\t\t$.each(matches, function(i, s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(s, 'buffer_' + i);\n\t\t\t\t\t\tbuffer.push(s);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml = html.replace(/\\n/g, ' ');\n\t\t\thtml = html.replace(/[\\t]*/g, '');\n\t\t\thtml = html.replace(/\\n\\s*\\n/g, \"\\n\");\n\t\t\thtml = html.replace(/^[\\s\\n]*/g, ' ');\n\t\t\thtml = html.replace(/[\\s\\n]*$/g, ' ');\n\t\t\thtml = html.replace( />\\s{2,}</g, '> <');\n\n\t\t\thtml = this.cleanReplacer(html, buffer);\n\n\t\t\thtml = html.replace(/\\n\\n/g, \"\\n\");\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanReplacer: function(html, buffer)\n\t\t{\n\t\t\tif (buffer === false) return html;\n\n\t\t\t$.each(buffer, function(i,s)\n\t\t\t{\n\t\t\t\thtml = html.replace('buffer_' + i, s);\n\t\t\t});\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanRemoveEmptyTags: function(html)\n\t\t{\n\n\t\t\thtml = html.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n\n\t\t\tvar etagsInline = [\"<b>\\\\s*</b>\", \"<b>&nbsp;</b>\", \"<em>\\\\s*</em>\"]\n\t\t\tvar etags = [\"<code></code>\", \"<blockquote>\\\\s*</blockquote>\", \"<dd></dd>\", \"<dt></dt>\", \"<ul></ul>\", \"<ol></ol>\", \"<li></li>\", \"<table></table>\", \"<tr></tr>\", \"<span>\\\\s*<span>\", \"<span>&nbsp;<span>\", \"<p>\\\\s*</p>\", \"<p></p>\", \"<p>&nbsp;</p>\",  \"<p>\\\\s*<br>\\\\s*</p>\", \"<div>\\\\s*</div>\", \"<div>\\\\s*<br>\\\\s*</div>\"];\n\n\t\t\tif (this.opts.removeEmptyTags)\n\t\t\t{\n\t\t\t\tetags = etags.concat(etagsInline);\n\t\t\t}\n\t\t\telse etags = etagsInline;\n\n\t\t\tvar len = etags.length;\n\t\t\tfor (var i = 0; i < len; ++i)\n\t\t\t{\n\t\t\t\thtml = html.replace(new RegExp(etags[i], 'gi'), \"\");\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanParagraphy: function(html)\n\t\t{\n\t\t\thtml = $.trim(html);\n\n\t\t\tif (this.opts.linebreaks === true) return html;\n\t\t\tif (html === '' || html === '<p></p>') return this.opts.emptyHtml;\n\n\t\t\thtml = html + \"\\n\";\n\n\t\t\tif (this.opts.removeEmptyTags === false)\n\t\t\t{\n\t\t\t\treturn html;\n\t\t\t}\n\n\t\t\tvar safes = [];\n\t\t\tvar matches = html.match(/<(table|div|code|object)(.*?)>([\\w\\W]*?)<\\/(table|div|code|object)>/gi);\n\t\t\tif (!matches) matches = [];\n\n\t\t\tvar commentsMatches = html.match(/<!--([\\w\\W]*?)-->/gi);\n\t\t\tif (commentsMatches) matches = $.merge(matches, commentsMatches);\n\n\t\t\tif (this.opts.phpTags)\n\t\t\t{\n\t\t\t\tvar phpMatches = html.match(/<section(.*?)rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi);\n\t\t\t\tif (phpMatches) matches = $.merge(matches, phpMatches);\n\t\t\t}\n\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\t$.each(matches, function(i,s)\n\t\t\t\t{\n\t\t\t\t\tsafes[i] = s;\n\t\t\t\t\thtml = html.replace(s, '{replace' + i + '}\\n');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thtml = html.replace(/<br \\/>\\s*<br \\/>/gi, \"\\n\\n\");\n\t\t\thtml = html.replace(/<br><br>/gi, \"\\n\\n\");\n\n\t\t\tfunction R(str, mod, r)\n\t\t\t{\n\t\t\t\treturn html.replace(new RegExp(str, mod), r);\n\t\t\t}\n\n\t\t\tvar blocks = '(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|code|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)';\n\n\t\t\thtml = R('(<' + blocks + '[^>]*>)', 'gi', \"\\n$1\");\n\t\t\thtml = R('(</' + blocks + '>)', 'gi', \"$1\\n\\n\");\n\t\t\thtml = R(\"\\r\\n\", 'g', \"\\n\");\n\t\t\thtml = R(\"\\r\", 'g', \"\\n\");\n\t\t\thtml = R(\"/\\n\\n+/\", 'g', \"\\n\\n\");\n\n\t\t\tvar htmls = html.split(new RegExp('\\n\\s*\\n', 'g'), -1);\n\n\t\t\thtml = '';\n\t\t\tfor (var i in htmls)\n\t\t\t{\n\t\t\t\tif (htmls.hasOwnProperty(i))\n                {\n\t\t\t\t\tif (htmls[i].search('{replace') == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\thtmls[i] = htmls[i].replace(/<p>\\n\\t?<\\/p>/gi, '');\n\t\t\t\t\t\thtmls[i] = htmls[i].replace(/<p><\\/p>/gi, '');\n\n\t\t\t\t\t\tif (htmls[i] != '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml += '<p>' +  htmls[i].replace(/^\\n+|\\n+$/g, \"\") + \"</p>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse html += htmls[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml = R('<p><p>', 'gi', '<p>');\n\t\t\thtml = R('</p></p>', 'gi', '</p>');\n\n\t\t\thtml = R('<p>\\s?</p>', 'gi', '');\n\n\t\t\thtml = R('<p>([^<]+)</(div|address|form)>', 'gi', \"<p>$1</p></$2>\");\n\n\t\t\thtml = R('<p>(</?' + blocks + '[^>]*>)</p>', 'gi', \"$1\");\n\t\t\thtml = R(\"<p>(<li.+?)</p>\", 'gi', \"$1\");\n\t\t\thtml = R('<p>\\s?(</?' + blocks + '[^>]*>)', 'gi', \"$1\");\n\n\t\t\thtml = R('(</?' + blocks + '[^>]*>)\\s?</p>', 'gi', \"$1\");\n\t\t\thtml = R('(</?' + blocks + '[^>]*>)\\s?<br />', 'gi', \"$1\");\n\t\t\thtml = R('<br />(\\s*</?(?:p|li|div|dl|dd|dt|th|code|td|ul|ol)[^>]*>)', 'gi', '$1');\n\t\t\thtml = R(\"\\n</p>\", 'gi', '</p>');\n\n\t\t\thtml = R('<li><p>', 'gi', '<li>');\n\t\t\thtml = R('</p></li>', 'gi', '</li>');\n\t\t\thtml = R('</li><p>', 'gi', '</li>');\n\t\t\thtml = R('<p>\\t?\\n?<p>', 'gi', '<p>');\n\t\t\thtml = R('</dt><p>', 'gi', '</dt>');\n\t\t\thtml = R('</dd><p>', 'gi', '</dd>');\n\t\t\thtml = R('<br></p></blockquote>', 'gi', '</blockquote>');\n\t\t\thtml = R('<p>\\t*</p>', 'gi', '');\n\t\t\t$.each(safes, function(i,s)\n\t\t\t{\n\t\t\t\thtml = html.replace('{replace' + i + '}', s);\n\t\t\t});\n\n\t\t\treturn $.trim(html);\n\t\t},\n\t\tcleanConvertInlineTags: function(html, set)\n\t\t{\n\t\t\tvar boldTag = 'strong';\n\t\t\tif (this.opts.boldTag === 'b') boldTag = 'b';\n\n\t\t\tvar italicTag = 'em';\n\t\t\tif (this.opts.italicTag === 'i') italicTag = 'i';\n\n\t\t\thtml = html.replace(/<span style=\"font-style: italic;\">([\\w\\W]*?)<\\/span>/gi, '<' + italicTag + '>$1</' + italicTag + '>');\n\t\t\thtml = html.replace(/<span style=\"font-weight: bold;\">([\\w\\W]*?)<\\/span>/gi, '<' + boldTag + '>$1</' + boldTag + '>');\n\t\t\tif (this.opts.boldTag === 'strong') html = html.replace(/<b>([\\w\\W]*?)<\\/b>/gi, '<strong>$1</strong>');\n\t\t\telse html = html.replace(/<strong>([\\w\\W]*?)<\\/strong>/gi, '<b>$1</b>');\n\n\t\t\tif (this.opts.italicTag === 'em') html = html.replace(/<i>([\\w\\W]*?)<\\/i>/gi, '<em>$1</em>');\n\t\t\telse html = html.replace(/<em>([\\w\\W]*?)<\\/em>/gi, '<i>$1</i>');\n\n\t\t\thtml = html.replace(/<span style=\"text-decoration: underline;\">([\\w\\W]*?)<\\/span>/gi, '<u>$1</u>');\n\n\t\t\tif (set !== true) html = html.replace(/<strike>([\\w\\W]*?)<\\/strike>/gi, '<del>$1</del>');\n\t\t\telse html = html.replace(/<del>([\\w\\W]*?)<\\/del>/gi, '<strike>$1</strike>');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanStripTags: function(html)\n\t\t{\n\t\t\tif (html == '' || typeof html == 'undefined') return html;\n\n\t\t\tvar allowed = false;\n\t\t\tif (this.opts.allowedTags !== false) allowed = true;\n\n\t\t\tvar arr = allowed === true ? this.opts.allowedTags : this.opts.deniedTags;\n\n\t\t\tvar tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n\t\t\thtml = html.replace(tags, function ($0, $1)\n\t\t\t{\n\t\t\t\tif (allowed === true) return $.inArray($1.toLowerCase(), arr) > '-1' ? $0 : '';\n\t\t\t\telse return $.inArray($1.toLowerCase(), arr) > '-1' ? '' : $0;\n\t\t\t});\n\n\t\t\thtml = this.cleanConvertInlineTags(html);\n\n\t\t\treturn html;\n\n\t\t},\n\t\tcleanSavePreCode: function(html, encode)\n\t\t{\n\t\t\tvar pre = html.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/gi);\n\t\t\tif (pre !== null)\n\t\t\t{\n\t\t\t\t$.each(pre, $.proxy(function(i,s)\n\t\t\t\t{\n\t\t\t\t\tvar arr = s.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/i);\n\n\t\t\t\t\tarr[3] = arr[3].replace(/&nbsp;/g, ' ');\n\n\t\t\t\t\tif (encode !== false) arr[3] = this.cleanEncodeEntities(arr[3]);\n\n\t\t\t\t\tarr[3] = arr[3].replace(/\\$/g, '&#36;');\n\n\t\t\t\t\thtml = html.replace(s, '<' + arr[1] + arr[2] + '>' + arr[3] + '</' + arr[1] + '>');\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanEncodeEntities: function(str)\n\t\t{\n\t\t\tstr = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"');\n\t\t\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t\t},\n\t\tcleanUnverified: function()\n\t\t{\n\n\t\t\tvar $elem = this.$editor.find('li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite');\n\n\t\t\t$elem.filter('[style*=\"background-color: transparent;\"][style*=\"line-height\"]')\n\t\t\t.css('background-color', '')\n\t\t\t.css('line-height', '');\n\n\t\t\t$elem.filter('[style*=\"background-color: transparent;\"]')\n\t\t\t.css('background-color', '');\n\n\t\t\t$elem.css('line-height', '');\n\n\t\t\t$.each($elem, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tthis.removeEmptyAttr(s, 'style');\n\t\t\t}, this));\n\n\t\t\tvar $elem2 = this.$editor.find('b, strong, i, em, u, strike, del');\n\t\t\t$elem2.css('font-size', '');\n\n\t\t\t$.each($elem2, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tthis.removeEmptyAttr(s, 'style');\n\t\t\t}, this));\n\t\t\tthis.$editor.find('div[style=\"text-align: -webkit-auto;\"]').contents().unwrap();\n\t\t\tthis.$editor.find('ul, ol, li').removeAttr('style');\n\t\t},\n\n\t\tcleanHtml: function(code)\n\t\t{\n\t\t\tvar i = 0,\n\t\t\tcodeLength = code.length,\n\t\t\tpoint = 0,\n\t\t\tstart = null,\n\t\t\tend = null,\n\t\t\ttag = '',\n\t\t\tout = '',\n\t\t\tcont = '';\n\n\t\t\tthis.cleanlevel = 0;\n\n\t\t\tfor (; i < codeLength; i++)\n\t\t\t{\n\t\t\t\tpoint = i;\n\t\t\t\tif (-1 == code.substr(i).indexOf( '<' ))\n\t\t\t\t{\n\t\t\t\t\tout += code.substr(i);\n\n\t\t\t\t\treturn this.cleanFinish(out);\n\t\t\t\t}\n\t\t\t\twhile (point < codeLength && code.charAt(point) != '<')\n\t\t\t\t{\n\t\t\t\t\tpoint++;\n\t\t\t\t}\n\n\t\t\t\tif (i != point)\n\t\t\t\t{\n\t\t\t\t\tcont = code.substr(i, point - i);\n\t\t\t\t\tif (!cont.match(/^\\s{2,}$/g))\n\t\t\t\t\t{\n\t\t\t\t\t\tif ('\\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();\n\t\t\t\t\t\telse if ('\\n' == cont.charAt(0))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tout += '\\n' + this.cleanGetTabs();\n\t\t\t\t\t\t\tcont = cont.replace(/^\\s+/, '');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tout += cont;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cont.match(/\\n/)) out += '\\n' + this.cleanGetTabs();\n\t\t\t\t}\n\n\t\t\t\tstart = point;\n\t\t\t\twhile (point < codeLength && '>' != code.charAt(point))\n\t\t\t\t{\n\t\t\t\t\tpoint++;\n\t\t\t\t}\n\n\t\t\t\ttag = code.substr(start, point - start);\n\t\t\t\ti = point;\n\n\t\t\t\tvar t;\n\n\t\t\t\tif ('!--' == tag.substr(1, 3))\n\t\t\t\t{\n\t\t\t\t\tif (!tag.match(/--$/))\n\t\t\t\t\t{\n\t\t\t\t\t\twhile ('-->' != code.substr(point, 3))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpoint++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpoint += 2;\n\t\t\t\t\t\ttag = code.substr(start, point - start);\n\t\t\t\t\t\ti = point;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('\\n' != out.charAt(out.length - 1)) out += '\\n';\n\n\t\t\t\t\tout += this.cleanGetTabs();\n\t\t\t\t\tout += tag + '>\\n';\n\t\t\t\t}\n\t\t\t\telse if ('!' == tag[1])\n\t\t\t\t{\n\t\t\t\t\tout = this.placeTag(tag + '>', out);\n\t\t\t\t}\n\t\t\t\telse if ('?' == tag[1])\n\t\t\t\t{\n\t\t\t\t\tout += tag + '>\\n';\n\t\t\t\t}\n\t\t\t\telse if (t = tag.match(/^<(script|style|pre|code)/i))\n\t\t\t\t{\n\t\t\t\t\tt[1] = t[1].toLowerCase();\n\t\t\t\t\ttag = this.cleanTag(tag);\n\t\t\t\t\tout = this.placeTag(tag, out);\n\t\t\t\t\tend = String(code.substr(i + 1)).toLowerCase().indexOf('</' + t[1]);\n\n\t\t\t\t\tif (end)\n\t\t\t\t\t{\n\t\t\t\t\t\tcont = code.substr(i + 1, end);\n\t\t\t\t\t\ti += end;\n\t\t\t\t\t\tout += cont;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttag = this.cleanTag(tag);\n\t\t\t\t\tout = this.placeTag(tag, out);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.cleanFinish(out);\n\t\t},\n\t\tcleanGetTabs: function()\n\t\t{\n\t\t\tvar s = '';\n\t\t\tfor ( var j = 0; j < this.cleanlevel; j++ )\n\t\t\t{\n\t\t\t\ts += '\\t';\n\t\t\t}\n\n\t\t\treturn s;\n\t\t},\n\t\tcleanFinish: function(code)\n\t\t{\n\t\t\tcode = code.replace(/\\n\\s*\\n/g, '\\n');\n\t\t\tcode = code.replace(/^[\\s\\n]*/, '');\n\t\t\tcode = code.replace(/[\\s\\n]*$/, '');\n\t\t\tcode = code.replace(/<script(.*?)>\\n<\\/script>/gi, '<script$1></script>');\n\n\t\t\tthis.cleanlevel = 0;\n\n\t\t\treturn code;\n\t\t},\n\t\tcleanTag: function (tag)\n\t\t{\n\t\t\tvar tagout = '';\n\t\t\ttag = tag.replace(/\\n/g, ' ');\n\t\t\ttag = tag.replace(/\\s{2,}/g, ' ');\n\t\t\ttag = tag.replace(/^\\s+|\\s+$/g, ' ');\n\n\t\t\tvar suffix = '';\n\t\t\tif (tag.match(/\\/$/))\n\t\t\t{\n\t\t\t\tsuffix = '/';\n\t\t\t\ttag = tag.replace(/\\/+$/, '');\n\t\t\t}\n\n\t\t\tvar m;\n\t\t\twhile (m = /\\s*([^= ]+)(?:=((['\"']).*?\\3|[^ ]+))?/.exec(tag))\n\t\t\t{\n\t\t\t\tif (m[2]) tagout += m[1].toLowerCase() + '=' + m[2];\n\t\t\t\telse if (m[1]) tagout += m[1].toLowerCase();\n\n\t\t\t\ttagout += ' ';\n\t\t\t\ttag = tag.substr(m[0].length);\n\t\t\t}\n\n\t\t\treturn tagout.replace(/\\s*$/, '') + suffix + '>';\n\t\t},\n\t\tplaceTag: function (tag, out)\n\t\t{\n\t\t\tvar nl = tag.match(this.cleannewLevel);\n\t\t\tif (tag.match(this.cleanlineBefore) || nl)\n\t\t\t{\n\t\t\t\tout = out.replace(/\\s*$/, '');\n\t\t\t\tout += '\\n';\n\t\t\t}\n\n\t\t\tif (nl && '/' == tag.charAt(1)) this.cleanlevel--;\n\t\t\tif ('\\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();\n\t\t\tif (nl && '/' != tag.charAt(1)) this.cleanlevel++;\n\n\t\t\tout += tag;\n\n\t\t\tif (tag.match(this.cleanlineAfter) || tag.match(this.cleannewLevel))\n\t\t\t{\n\t\t\t\tout = out.replace(/ *$/, '');\n\t\t\t\tout += '\\n';\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\t\tformatEmpty: function(e)\n\t\t{\n\t\t\tvar html = $.trim(this.$editor.html());\n\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tif (html == '')\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.$editor.html('');\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<br\\s?\\/?>/i, '');\n\t\t\t\tvar thtml = html.replace(/<p>\\s?<\\/p>/gi, '');\n\n\t\t\t\tif (html === '' || thtml === '')\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tvar node = $(this.opts.emptyHtml).get(0);\n\t\t\t\t\tthis.$editor.html(node);\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tformatBlocks: function(tag)\n\t\t{\n\t\t\tif (this.browser('mozilla') && this.isFocused())\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar nodes = this.getBlocks();\n\t\t\tthis.selectionSave();\n\n\t\t\t$.each(nodes, $.proxy(function(i, node)\n\t\t\t{\n\t\t\t\tif (node.tagName !== 'LI')\n\t\t\t\t{\n\t\t\t\t\tvar parent = $(node).parent();\n\n\t\t\t\t\tif (tag === 'p')\n\t\t\t\t\t{\n\t\t\t\t\t\tif ((node.tagName === 'P'\n\t\t\t\t\t\t&& parent.length != 0\n\t\t\t\t\t\t&& parent[0].tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t||\n\t\t\t\t\t\tnode.tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatQuote();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.opts.linebreaks)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (node && node.tagName.search(/H[1-6]/) == 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(node).replaceWith(node.innerHTML + '<br>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock(tag, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.formatBlock(tag, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tformatBlock: function(tag, block)\n\t\t{\n\t\t\tif (block === false) block = this.getBlock();\n\t\t\tif (block === false && this.opts.linebreaks === true)\n\t\t\t{\n\t\t\t\tthis.execCommand('formatblock', tag);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar contents = '';\n\t\t\tif (tag !== 'code')\n\t\t\t{\n\t\t\t\tcontents = $(block).contents();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tcontents = $(block).html();\n\t\t\t\tif ($.trim(contents) === '')\n\t\t\t\t{\n\t\t\t\t\tcontents = '<span id=\"selection-marker-1\"></span>';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (block.tagName === 'CODE') tag = 'p';\n\n\t\t\tif (this.opts.linebreaks === true && tag === 'p')\n\t\t\t{\n\t\t\t\t$(block).replaceWith($('<div>').append(contents).html() + '<br>');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\n\t\t\t\tvar node = $('<' + tag + '>').append(contents);\n\t\t\t\t$(block).replaceWith(node);\n\n\t\t\t\tif (parent && parent.tagName == 'TD')\n\t\t\t\t{\n\t\t\t\t\t$(node).wrapAll('<td>');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tformatChangeTag: function(fromElement, toTagName, save)\n\t\t{\n\t\t\tif (save !== false) this.selectionSave();\n\n\t\t\tvar newElement = $('<' + toTagName + '/>');\n\t\t\t$(fromElement).replaceWith(function() { return newElement.append($(this).contents()); });\n\n\t\t\tif (save !== false) this.selectionRestore();\n\n\t\t\treturn newElement;\n\t\t},\n\t\tformatQuote: function()\n\t\t{\n\t\t\tif (this.browser('mozilla') && this.isFocused())\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\n\t\t\tthis.bufferSet();\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tvar blocks = this.getBlocks();\n\n\t\t\t\tvar blockquote = false;\n\t\t\t\tvar blocksLen = blocks.length;\n\t\t\t\tif (blocks)\n\t\t\t\t{\n\t\t\t\t\tvar data = '';\n\t\t\t\t\tvar replaced = '';\n\t\t\t\t\tvar replace = false;\n\t\t\t\t\tvar paragraphsOnly = true;\n\n\t\t\t\t\t$.each(blocks, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName !== 'P') paragraphsOnly = false;\n\t\t\t\t\t});\n\n\t\t\t\t\t$.each(blocks, $.proxy(function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock('p', s, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (s.tagName === 'P')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblockquote = $(s).parent();\n\n\t\t\t\t\t\t\tif (blockquote[0].tagName == 'BLOCKQUOTE')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar count = $(blockquote).children('p').length;\n\t\t\t\t\t\t\t\tif (count == 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$(blockquote).replaceWith(s);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\telse if (count == blocksLen)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'blockquote';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'html';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\n\t\t\t\t\t\t\t\t\tif (i == 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(s).addClass('redactor-replaced').empty();\n\t\t\t\t\t\t\t\t\t\treplaced = this.outerHtml(s);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse $(s).remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (paragraphsOnly === false || blocks.length == 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.formatBlock('blockquote', s, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'paragraphs';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (s.tagName !== 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock('blockquote', s, false);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this));\n\n\t\t\t\t\tif (replace)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (replace == 'paragraphs')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$(blocks[0]).replaceWith('<blockquote>' + data + '</blockquote>');\n\t\t\t\t\t\t\t$(blocks).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (replace == 'blockquote')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$(blockquote).replaceWith(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (replace == 'html')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar html = this.$editor.html().replace(replaced, '</blockquote>' + data + '<blockquote>');\n\n\t\t\t\t\t\t\tthis.$editor.html(html);\n\t\t\t\t\t\t\tthis.$editor.find('blockquote').each(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif ($.trim($(this).html()) == '') $(this).remove();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar block = this.getBlock();\n\t\t\t\tif (block.tagName === 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.selectionSave();\n\n\t\t\t\t\tvar html = $.trim($(block).html());\n\t\t\t\t\tvar selection = $.trim(this.getSelectionHtml());\n\n\t\t\t\t\thtml = html.replace(/<span(.*?)id=\"selection-marker(.*?)<\\/span>/gi, '');\n\n\t\t\t\t\tif (html == selection)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(block).replaceWith($(block).html() + '<br>');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t\tthis.inlineFormat('tmp');\n\t\t\t\t\t\tvar tmp = this.$editor.find('tmp');\n\t\t\t\t\t\ttmp.empty();\n\n\t\t\t\t\t\tvar newhtml = this.$editor.html().replace('<tmp></tmp>', '</blockquote><span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>' + selection + '<blockquote>');\n\n\t\t\t\t\t\tthis.$editor.html(newhtml);\n\t\t\t\t\t\ttmp.remove();\n\t\t\t\t\t\tthis.$editor.find('blockquote').each(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif ($.trim($(this).html()) == '') $(this).remove();\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectionRestore();\n\t\t\t\t\tthis.$editor.find('span#selection-marker-1').attr('id', false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar wrapper = this.selectionWrap('blockquote');\n\t\t\t\t\tvar html = $(wrapper).html();\n\n\t\t\t\t\tvar blocksElemsRemove = ['ul', 'ol', 'table', 'tr', 'tbody', 'thead', 'tfoot', 'dl'];\n\t\t\t\t\t$.each(blocksElemsRemove, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '');\n\t\t\t\t\t});\n\n\t\t\t\t\tvar blocksElems = this.opts.blockLevelElements;\n\t\t\t\t\t$.each(blocksElems, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '<br>');\n\t\t\t\t\t});\n\n\t\t\t\t\t$(wrapper).html(html);\n\t\t\t\t\tthis.selectionElement(wrapper);\n\t\t\t\t\tvar next = $(wrapper).next();\n\t\t\t\t\tif (next.length != 0 && next[0].tagName === 'BR')\n\t\t\t\t\t{\n\t\t\t\t\t\tnext.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveAttr: function(attr, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).removeAttr(attr);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetAttr: function(attr, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).attr(attr, value);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveStyle: function(rule)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).css(rule, '');\n\t\t\tthis.removeEmptyAttr(nodes, 'style');\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetStyle: function (rule, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).css(rule, value);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveClass: function(className)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).removeClass(className);\n\t\t\tthis.removeEmptyAttr(nodes, 'class');\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetClass: function(className)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).addClass(className);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveClass: function(className)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.inlineEachNodes(function(node)\n\t\t\t{\n\t\t\t\t$(node).removeClass(className);\n\t\t\t\tthis.removeEmptyAttr(node, 'class');\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetClass: function(className)\n\t\t{\n\t\t\tvar current = this.getCurrent();\n\t\t\tif (!$(current).hasClass(className)) this.inlineMethods('addClass', className);\n\t\t},\n\t\tinlineRemoveStyle: function (rule)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.inlineEachNodes(function(node)\n\t\t\t{\n\t\t\t\t$(node).css(rule, '');\n\t\t\t\tthis.removeEmptyAttr(node, 'style');\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetStyle: function(rule, value)\n\t\t{\n\t\t\tthis.inlineMethods('css', rule, value);\n\t\t},\n\t\tinlineRemoveAttr: function (attr)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar range = this.getRange(), node = this.getElement(), nodes = this.getNodes();\n\n\t\t\tif (range.collapsed || range.startContainer === range.endContainer && node)\n\t\t\t{\n\t\t\t\tnodes = $( node );\n\t\t\t}\n\n\t\t\t$(nodes).removeAttr(attr);\n\n\t\t\tthis.inlineUnwrapSpan();\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetAttr: function(attr, value)\n\t\t{\n\t\t\tthis.inlineMethods('attr', attr, value );\n\t\t},\n\t\tinlineMethods: function(type, attr, value)\n\t\t{\n\t\t\tthis.bufferSet();\n\t\t\tthis.selectionSave();\n\n\t\t\tvar range = this.getRange()\n\t\t\tvar el = this.getElement();\n\n\t\t\tif ((range.collapsed || range.startContainer === range.endContainer) && el && !this.nodeTestBlocks(el))\n\t\t\t{\n\t\t\t\t$(el)[type](attr, value);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar cmd, arg = value;\n\t\t\t\tswitch (attr)\n\t\t\t\t{\n\t\t\t\t\tcase 'font-size':\n\t\t\t\t\t\tcmd = 'fontSize';\n\t\t\t\t\t\targ = 4;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'font-family':\n\t\t\t\t\t\tcmd = 'fontName';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'color':\n\t\t\t\t\t\tcmd = 'foreColor';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'background-color':\n\t\t\t\t\t\tcmd = 'backColor';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis.document.execCommand(cmd, false, arg);\n\n\t\t\t\tvar fonts = this.$editor.find('font');\n\t\t\t\t$.each(fonts, $.proxy(function(i, s)\n\t\t\t\t{\n\t\t\t\t\tthis.inlineSetMethods(type, s, attr, value);\n\n\t\t\t\t}, this));\n\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetMethods: function(type, s, attr, value)\n\t\t{\n\t\t\tvar parent = $(s).parent(), el;\n\n\t\t\tvar selectionHtml = this.getSelectionText();\n\t\t\tvar parentHtml = $(parent).text();\n\t\t\tvar selected = selectionHtml == parentHtml;\n\n\t\t\tif (selected && parent && parent[0].tagName === 'INLINE' && parent[0].attributes.length != 0)\n\t\t\t{\n\t\t\t\tel = parent;\n\t\t\t\t$(s).replaceWith($(s).html());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tel = $('<inline>').append($(s).contents());\n\t\t\t\t$(s).replaceWith(el);\n\t\t\t}\n\t\t\t$(el)[type](attr, value);\n\n\t\t\treturn el;\n\t\t},\n\n\t\tinlineEachNodes: function(callback)\n\t\t{\n\t\t\tvar range = this.getRange(),\n\t\t\t\tnode = this.getElement(),\n\t\t\t\tnodes = this.getNodes(),\n\t\t\t\tcollapsed;\n\n\t\t\tif (range.collapsed || range.startContainer === range.endContainer && node)\n\t\t\t{\n\t\t\t\tnodes = $(node);\n\t\t\t\tcollapsed = true;\n\t\t\t}\n\n\t\t\t$.each(nodes, $.proxy(function(i, node)\n\t\t\t{\n\t\t\t\tif (!collapsed && node.tagName !== 'INLINE')\n\t\t\t\t{\n\t\t\t\t\tvar selectionHtml = this.getSelectionText();\n\t\t\t\t\tvar parentHtml = $(node).parent().text();\n\t\t\t\t\tvar selected = selectionHtml == parentHtml;\n\n\t\t\t\t\tif (selected && node.parentNode.tagName === 'INLINE' && !$(node.parentNode).hasClass('redactor_editor'))\n\t\t\t\t\t{\n\t\t\t\t\t\tnode = node.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\telse return;\n\t\t\t\t}\n\t\t\t\tcallback.call(this, node);\n\n\t\t\t}, this ) );\n\t\t},\n\t\tinlineUnwrapSpan: function()\n\t\t{\n\t\t\tvar $spans = this.$editor.find('inline');\n\n\t\t\t$.each($spans, $.proxy(function(i, span)\n\t\t\t{\n\t\t\t\tvar $span = $(span);\n\n\t\t\t\tif ($span.attr('class') === undefined && $span.attr('style') === undefined)\n\t\t\t\t{\n\t\t\t\t\t$span.contents().unwrap();\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tinlineFormat: function(tag)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.document.execCommand('fontSize', false, 4 );\n\n\t\t\tvar fonts = this.$editor.find('font');\n\t\t\tvar last;\n\t\t\t$.each(fonts, function(i, s)\n\t\t\t{\n\t\t\t\tvar el = $('<' + tag + '/>').append($(s).contents());\n\t\t\t\t$(s).replaceWith(el);\n\t\t\t\tlast = el;\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveFormat: function(tag)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar utag = tag.toUpperCase();\n\t\t\tvar nodes = this.getNodes();\n\t\t\tvar parent = $(this.getParent()).parent();\n\n\t\t\t$.each(nodes, function(i, s)\n\t\t\t{\n\t\t\t\tif (s.tagName === utag) this.inlineRemoveFormatReplace(s);\n\t\t\t});\n\n\t\t\tif (parent && parent[0].tagName === utag) this.inlineRemoveFormatReplace(parent);\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveFormatReplace: function(el)\n\t\t{\n\t\t\t$(el).replaceWith($(el).contents());\n\t\t},\n\n\t\tinsertHtml: function (html, sync)\n\t\t{\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar parent = current.parentNode;\n\n\t\t\tthis.focusWithSaveScroll();\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $html = $('<div>').append($.parseHTML(html));\n\t\t\thtml = $html.html();\n\n\t\t\thtml = this.cleanRemoveEmptyTags(html);\n\t\t\t$html = $('<div>').append($.parseHTML(html));\n\t\t\tvar currBlock = this.getBlock();\n\n\t\t\tif ($html.contents().length == 1)\n\t\t\t{\n\t\t\t\tvar htmlTagName = $html.contents()[0].tagName;\n\t\t\t\tif (htmlTagName != 'P' && htmlTagName == currBlock.tagName || htmlTagName == 'CODE')\n\t\t\t\t{\n\n\t\t\t\t\t$html = $('<div>').append(html);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\t\t\tif (!this.opts.linebreaks && $html.contents().length == 1 && $html.contents()[0].nodeType == 3\n\t\t\t\t&& (this.getRangeSelectedNodes().length > 2 || (!current || current.tagName == 'BODY' && !parent || parent.tagName == 'HTML')))\n\t\t\t{\n\t\t\t\thtml = '<p>' + html + '</p>';\n\t\t\t}\n\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tif ($html.contents().length > 1 && currBlock\n\t\t\t|| $html.contents().is('p, :header, ul, ol, li, div, table, td, blockquote, code, address, section, header, footer, aside, article'))\n\t\t\t{\n\t\t\t\tif (this.browser('msie'))\n\t\t\t\t{\n\t\t\t\t\tif (!this.isIe11())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.document.selection.createRange().pasteHTML(html);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.execPasteFrag(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.document.execCommand('inserthtml', false, html);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse this.insertHtmlAdvanced(html, false);\n\n\t\t\tif (this.selectall)\n\t\t\t{\n\t\t\t\tthis.window.setTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tif (!this.opts.linebreaks) this.selectionEnd(this.$editor.contents().last());\n\t\t\t\t\telse this.focusEnd();\n\n\t\t\t\t}, this), 1);\n\t\t\t}\n\n\t\t\tthis.observeStart();\n\t\t\tthis.setNonEditable();\n\n\t\t\tif (sync !== false) this.sync();\n\t\t},\n\t\tinsertHtmlAdvanced: function(html, sync)\n\t\t{\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tvar sel = this.getSelection();\n\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar range = sel.getRangeAt(0);\n\t\t\t\trange.deleteContents();\n\n\t\t\t\tvar el = document.createElement('div');\n\t\t\t\tel.innerHTML = html;\n\t\t\t\tvar frag = document.createDocumentFragment(), node, lastNode;\n\t\t\t\twhile ((node = el.firstChild))\n\t\t\t\t{\n\t\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t\t}\n\n\t\t\t\trange.insertNode(frag);\n\n\t\t\t\tif (lastNode)\n\t\t\t\t{\n\t\t\t\t\trange = range.cloneRange();\n\t\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (sync !== false)\n\t\t\t{\n\t\t\t\tthis.sync();\n\t\t\t}\n\n\t\t},\n\t\tinsertBeforeCursor: function(html)\n\t\t{\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tvar node = $(html);\n\n\t\t\tvar space = document.createElement(\"span\");\n\t\t\tspace.innerHTML = \"\\u200B\";\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.insertNode(space);\n\t\t\trange.insertNode(node[0]);\n\t\t\trange.collapse(false);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinsertText: function(html)\n\t\t{\n\t\t\tvar $html = $($.parseHTML(html));\n\n\t\t\tif ($html.length) html = $html.text();\n\n\t\t\tthis.focusWithSaveScroll();\n\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tif (!this.isIe11())\n\t\t\t\t{\n\t\t\t\t\tthis.document.selection.createRange().pasteHTML(html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.execPasteFrag(html);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.document.execCommand('inserthtml', false, html);\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinsertNode: function(node)\n\t\t{\n\t\t\tnode = node[0] || node;\n\n\t\t\tif (node.tagName == 'SPAN')\n\t\t\t{\n\t\t\t\tvar replacementTag = 'inline';\n\n\t\t\t    var outer = node.outerHTML;\n\t\t\t    var regex = new RegExp('<' + node.tagName, 'i');\n\t\t\t    var newTag = outer.replace(regex, '<' + replacementTag);\n\t\t\t    regex = new RegExp('</' + node.tagName, 'i');\n\t\t\t    newTag = newTag.replace(regex, '</' + replacementTag);\n\t\t\t    node = $(newTag)[0];\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\n\t\t\t\trange = sel.getRangeAt(0);\n\t\t\t\trange.deleteContents();\n\t\t\t\trange.insertNode(node);\n\t\t\t\trange.setEndAfter(node);\n\t\t\t\trange.setStartAfter(node);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t},\n\t\tinsertNodeToCaretPositionFromPoint: function(e, node)\n\t\t{\n\t\t\tvar range;\n\t\t\tvar x = e.clientX, y = e.clientY;\n\t\t\tif (this.document.caretPositionFromPoint)\n\t\t\t{\n\t\t\t    var pos = this.document.caretPositionFromPoint(x, y);\n\t\t\t    range = this.getRange();\n\t\t\t    range.setStart(pos.offsetNode, pos.offset);\n\t\t\t    range.collapse(true);\n\t\t\t    range.insertNode(node);\n\t\t\t}\n\t\t\telse if (this.document.caretRangeFromPoint)\n\t\t\t{\n\t\t\t    range = this.document.caretRangeFromPoint(x, y);\n\t\t\t    range.insertNode(node);\n\t\t\t}\n\t\t\telse if (typeof document.body.createTextRange != \"undefined\")\n\t\t\t{\n\t\t        range = this.document.body.createTextRange();\n\t\t        range.moveToPoint(x, y);\n\t\t        var endRange = range.duplicate();\n\t\t        endRange.moveToPoint(x, y);\n\t\t        range.setEndPoint(\"EndToEnd\", endRange);\n\t\t        range.select();\n\t\t\t}\n\n\t\t},\n\t\tinsertAfterLastElement: function(element, parent)\n\t\t{\n\t\t\tif (typeof(parent) != 'undefined') element = parent;\n\n\t\t\tif (this.isEndOfElement())\n\t\t\t{\n\t\t\t\tif (this.opts.linebreaks)\n\t\t\t\t{\n\t\t\t\t\tvar contents = $('<div>').append($.trim(this.$editor.html())).contents();\n\t\t\t\t\tvar last = contents.last()[0];\n\t\t\t\t\tif (last.tagName == 'SPAN' && last.innerHTML == '')\n\t\t\t\t\t{\n\t\t\t\t\t\tlast = contents.prev()[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.outerHtml(last) != this.outerHtml(element))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.$editor.contents().last()[0] !== element)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.insertingAfterLastElement(element);\n\t\t\t}\n\t\t},\n\t\tinsertingAfterLastElement: function(element)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tvar node = $(this.opts.emptyHtml);\n\t\t\t\t$(element).after(node);\n\t\t\t\tthis.selectionStart(node);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar node = $('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\t\t$(element).after(node);\n\t\t\t\t$(node).after(this.opts.invisibleSpace);\n\t\t\t\tthis.selectionRestore();\n\t\t\t\tthis.$editor.find('span#selection-marker-1').removeAttr('id');\n\t\t\t}\n\t\t},\n\t\tinsertLineBreak: function(twice)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar br = '<br>';\n\t\t\tif (twice == true)\n\t\t\t{\n\t\t\t\tbr = '<br><br>';\n\t\t\t}\n\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tvar span = $('<span>').html(this.opts.invisibleSpace);\n\t\t\t\tthis.$editor.find('#selection-marker-1').before(br).before(span).before(this.opts.invisibleSpace);\n\n\t\t\t\tthis.setCaretAfter(span[0]);\n\t\t\t\tspan.remove();\n\n\t\t\t\tthis.selectionRemoveMarkers();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tif (parent && parent.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\tvar offset = this.getCaretOffset(parent);\n\n\t\t\t\t\tvar text = $.trim($(parent).text()).replace(/\\n\\r\\n/g, '');\n\t\t\t\t\tvar len = text.length;\n\n\t\t\t\t\tif (offset == len)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.selectionRemoveMarkers();\n\n\t\t\t\t\t\tvar node = $('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\t\t\t\t$(parent).after(node);\n\t\t\t\t\t\t$(node).before(br + (this.browser('webkit') ? this.opts.invisibleSpace : ''));\n\t\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.$editor.find('#selection-marker-1').before(br + (this.browser('webkit') ? this.opts.invisibleSpace : ''));\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\t\t},\n\t\tinsertDoubleLineBreak: function()\n\t\t{\n\t\t\tthis.insertLineBreak(true);\n\t\t},\n\t\treplaceLineBreak: function(element)\n\t\t{\n\t\t\tvar node = $('<br>' + this.opts.invisibleSpace);\n\t\t\t$(element).replaceWith(node);\n\t\t\tthis.selectionStart(node);\n\t\t},\n\t\tpasteClean: function(html)\n\t\t{\n\t\t\thtml = this.callback('pasteBefore', false, html);\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tvar tmp = $.trim(html);\n\t\t\t\tif (tmp.search(/^<a(.*?)>(.*?)<\\/a>$/i) == 0)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/^<a(.*?)>(.*?)<\\/a>$/i, \"$2\");\n\t\t\t\t}\n\t\t\t}\n            html = html.replace(/on([a-z]+)=|javascript\\:/gi, '');\n\t\t\tif (this.opts.pastePlainText)\n\t\t\t{\n\t\t\t\tvar tmp = this.document.createElement('div');\n\n\t\t\t\thtml = html.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi, '\\n');\n\n\t\t\t\ttmp.innerHTML = html;\n\t\t\t\thtml = tmp.textContent || tmp.innerText;\n\n\t\t\t\thtml = $.trim(html);\n\t\t\t\thtml = html.replace('\\n', '<br>');\n\t\t\t\thtml = this.cleanParagraphy(html);\n\n\t\t\t\tthis.pasteInsert(html);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar tablePaste = false;\n\t\t\tif (this.currentOrParentIs('TD'))\n\t\t\t{\n\t\t\t\ttablePaste = true;\n\t\t\t\tvar blocksElems = this.opts.blockLevelElements;\n\t\t\t\tblocksElems.push('tr');\n\t\t\t\tblocksElems.push('table');\n\t\t\t\t$.each(blocksElems, function(i,s)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '<br>');\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.currentOrParentIs('CODE'))\n\t\t\t{\n\t\t\t\thtml = this.pastePre(html);\n\t\t\t\tthis.pasteInsert(html);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\thtml = html.replace(/<img(.*?)v:shapes=(.*?)>/gi, '');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpFirst\"([\\w\\W]*?)<\\/p>/gi, '<ul><li$2</li>');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpMiddle\"([\\w\\W]*?)<\\/p>/gi, '<li$2</li>');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpLast\"([\\w\\W]*?)<\\/p>/gi, '<li$2</li></ul>');\n\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraph\"([\\w\\W]*?)<\\/p>/gi, '<ul><li$2</li></ul>');\n\n\t\t\thtml = html.replace(/\u00b7/g, '');\n\t\t\thtml = html.replace(/<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi, '');\n\t\t\tif (this.opts.cleanSpaces === true)\n\t\t\t{\n\t\t\t\thtml = html.replace(/(&nbsp;){2,}/gi, '&nbsp;');\n\t\t\t\thtml = html.replace(/&nbsp;/gi, ' ');\n\t\t\t}\n\t\t\thtml = html.replace(/<b\\sid=\"internal-source-marker(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$2\");\n\t\t\thtml = html.replace(/<b(.*?)id=\"docs-internal-guid(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$3\");\n\t \t\thtml = html.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi, '<span style=\"font-weight: bold;\"><span style=\"font-style: italic;\">');\n\t \t\thtml = html.replace(/<span[^>]*font-style: italic[^>]*>/gi, '<span style=\"font-style: italic;\">');\n\t\t\thtml = html.replace(/<span[^>]*font-weight: bold[^>]*>/gi, '<span style=\"font-weight: bold;\">');\n\t\t\thtml = html.replace(/<span[^>]*text-decoration: underline[^>]*>/gi, '<span style=\"text-decoration: underline;\">');\n\t\t\thtml = html.replace(/<td>\\u200b*<\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td>&nbsp;<\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td><br><\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td(.*?)colspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi, '[td colspan=\"$2\"]$4[/td]');\n\t\t\thtml = html.replace(/<td(.*?)rowspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi, '[td rowspan=\"$2\"]$4[/td]');\n\t\t\thtml = html.replace(/<a(.*?)href=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/a>/gi, '[a href=\"$2\"]$4[/a]');\n\t\t\thtml = html.replace(/<iframe(.*?)>([\\w\\W]*?)<\\/iframe>/gi, '[iframe$1]$2[/iframe]');\n\t\t\thtml = html.replace(/<video(.*?)>([\\w\\W]*?)<\\/video>/gi, '[video$1]$2[/video]');\n\t\t\thtml = html.replace(/<audio(.*?)>([\\w\\W]*?)<\\/audio>/gi, '[audio$1]$2[/audio]');\n\t\t\thtml = html.replace(/<embed(.*?)>([\\w\\W]*?)<\\/embed>/gi, '[embed$1]$2[/embed]');\n\t\t\thtml = html.replace(/<object(.*?)>([\\w\\W]*?)<\\/object>/gi, '[object$1]$2[/object]');\n\t\t\thtml = html.replace(/<param(.*?)>/gi, '[param$1]');\n\n\t\t\thtml = html.replace(/<img(.*?)>/gi, '[img$1]');\n\t\t\thtml = html.replace(/ class=\"(.*?)\"/gi, '');\n\t\t\thtml = html.replace(/<(\\w+)([\\w\\W]*?)>/gi, '<$1>');\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\n\t\t\t\thtml = html.replace(/<strong><\\/strong>/gi, '');\n\t\t\t\thtml = html.replace(/<u><\\/u>/gi, '');\n\n\t\t\t\tif (this.opts.cleanFontTag)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi, '$2');\n\t\t\t\t}\n\n\t\t\t\thtml = html.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi, '<br>');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi, '');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<div>\\s*?\\t*?\\n*?(<ul>|<ol>|<p>)/gi, '$1');\n\t\t\thtml = html.replace(/\\[td colspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi, '<td colspan=\"$1\">$2</td>');\n\t\t\thtml = html.replace(/\\[td rowspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi, '<td rowspan=\"$1\">$2</td>');\n\t\t\thtml = html.replace(/\\[td\\]/gi, '<td>&nbsp;</td>');\n\t\t\thtml = html.replace(/\\[a href=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/a\\]/gi, '<a href=\"$1\">$2</a>');\n\t\t\thtml = html.replace(/\\[iframe(.*?)\\]([\\w\\W]*?)\\[\\/iframe\\]/gi, '<iframe$1>$2</iframe>');\n\t\t\thtml = html.replace(/\\[video(.*?)\\]([\\w\\W]*?)\\[\\/video\\]/gi, '<video$1>$2</video>');\n\t\t\thtml = html.replace(/\\[audio(.*?)\\]([\\w\\W]*?)\\[\\/audio\\]/gi, '<audio$1>$2</audio>');\n\t\t\thtml = html.replace(/\\[embed(.*?)\\]([\\w\\W]*?)\\[\\/embed\\]/gi, '<embed$1>$2</embed>');\n\t\t\thtml = html.replace(/\\[object(.*?)\\]([\\w\\W]*?)\\[\\/object\\]/gi, '<object$1>$2</object>');\n\t\t\thtml = html.replace(/\\[param(.*?)\\]/gi, '<param$1>');\n\t\t\thtml = html.replace(/\\[img(.*?)\\]/gi, '<img$1>');\n\t\t\tif (this.opts.convertDivs)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '<p>$2</p>');\n\t\t\t\thtml = html.replace(/<\\/div><p>/gi, '<p>');\n\t\t\t\thtml = html.replace(/<\\/p><\\/div>/gi, '</p>');\n\t\t\t\thtml = html.replace(/<p><\\/p>/gi, '<br />');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div><\\/div>/gi, '<br />');\n\t\t\t}\n\t\t\thtml = this.cleanStripTags(html);\n\n\t\t\tif (this.currentOrParentIs('LI'))\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p>([\\w\\W]*?)<\\/p>/gi, '$1<br>');\n\t\t\t}\n\t\t\telse if (tablePaste === false)\n\t\t\t{\n\t\t\t\thtml = this.cleanParagraphy(html);\n\t\t\t}\n\t\t\thtml = html.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi, '$2');\n\t\t\thtml = html.replace(/<img>/gi, '');\n\t\t\thtml = html.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi, '');\n\n\t\t\thtml = html.replace(/\\n{3,}/gi, '\\n');\n\t\t\thtml = html.replace(/<p><p>/gi, '<p>');\n\t\t\thtml = html.replace(/<\\/p><\\/p>/gi, '</p>');\n\n\t\t\thtml = html.replace(/<li>(\\s*|\\t*|\\n*)<p>/gi, '<li>');\n\t\t\thtml = html.replace(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi, '</li>');\n\n\t\t\tif (this.opts.linebreaks === true)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\t\t\thtml = html.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi, '');\n\t\t\thtml = html.replace(/<img src=\"webkit-fake-url\\:\\/\\/(.*?)\"(.*?)>/gi, '');\n\t\t\thtml = html.replace(/<td(.*?)>(\\s*|\\t*|\\n*)<p>([\\w\\W]*?)<\\/p>(\\s*|\\t*|\\n*)<\\/td>/gi, '<td$1>$3</td>');\n\t\t\tif (this.opts.convertDivs)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '$2');\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '$2');\n\t\t\t}\n\t\t\tthis.pasteClipboardMozilla = false;\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tif (this.opts.clipboardUpload)\n\t\t\t\t{\n\t\t\t\t\tvar matches = html.match(/<img src=\"data:image(.*?)\"(.*?)>/gi);\n\t\t\t\t\tif (matches !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pasteClipboardMozilla = matches;\n\t\t\t\t\t\tfor (var k in matches)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar img = matches[k].replace('<img', '<img data-mozilla-paste-image=\"' + k + '\" ');\n\t\t\t\t\t\t\thtml = html.replace(matches[k], img);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (/<br>$/gi.test(html))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<br>$/gi, '');\n\t\t\t\t}\n\t\t\t}\n\t\t\thtml = html.replace(/<p>\u2022([\\w\\W]*?)<\\/p>/gi, '<li>$1</li>');\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\twhile (/<font>([\\w\\W]*?)<\\/font>/gi.test(html))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<font>([\\w\\W]*?)<\\/font>/gi, '$1');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (tablePaste === false)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$4</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$3</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$4</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$3</td>');\n\t\t\t}\n\t\t\thtml = html.replace(/\\n/g, ' ');\n\t\t\thtml = html.replace(/<p>\\n?<li>/gi, '<li>');\n\n\t\t\tthis.pasteInsert(html);\n\n\t\t},\n\t\tpastePre: function(s)\n\t\t{\n\t\t\ts = s.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi, '\\n');\n\n\t\t\tvar tmp = this.document.createElement('div');\n\t\t\ttmp.innerHTML = s;\n\t\t\treturn this.cleanEncodeEntities(tmp.textContent || tmp.innerText);\n\t\t},\n\t\tpasteInsert: function(html)\n\t\t{\n\t\t\thtml = this.callback('pasteAfter', false, html);\n\n\t\t\tif (this.selectall)\n\t\t\t{\n\t\t\t\tthis.$editor.html(html);\n\t\t\t\tthis.selectionRemove();\n\t\t\t\tthis.focusEnd();\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.insertHtml(html);\n\t\t\t}\n\n\t\t\tthis.selectall = false;\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tthis.rtePaste = false;\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.find('p:empty').remove();\n\t\t\t\t}\n\t\t\t\tif (this.pasteClipboardMozilla !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.pasteClipboardUploadMozilla();\n\t\t\t\t}\n\n\t\t\t}, this), 100);\n\n\t\t\tif (this.opts.autoresize && this.fullscreen !== true)\n\t\t\t{\n\t\t\t\t$(this.document.body).scrollTop(this.saveScroll);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$editor.scrollTop(this.saveScroll);\n\t\t\t}\n\t\t},\n\t\tpasteClipboardAppendFields: function(postData)\n\t\t{\n\n\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t{\n\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t{\n\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\t\t\t\t\tpostData[k] = v;\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\treturn postData;\n\t\t},\n\t\tpasteClipboardUploadMozilla: function()\n\t\t{\n\t\t\tvar imgs = this.$editor.find('img[data-mozilla-paste-image]');\n\t\t\t$.each(imgs, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tvar $s = $(s);\n\t\t\t\tvar arr = s.src.split(\",\");\n\t\t\t\tvar postData = {\n\t\t\t\t\t'contentType': arr[0].split(\";\")[0].split(\":\")[1],\n\t\t\t\t\t'data': arr[1]\n\t\t\t\t};\n\t\t\t\tpostData = this.pasteClipboardAppendFields(postData);\n\n\t\t\t\t$.post(this.opts.clipboardUploadUrl, postData,\n\t\t\t\t$.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\t\t        \t$s.attr('src', json.image.url);\n\t\t        \t$s.removeAttr('data-mozilla-paste-image');\n\n\t\t        \tthis.sync();\n\t\t\t\t\tthis.callback('imageUpload', $s, json);\n\n\t\t\t\t}, this));\n\n\t\t\t}, this));\n\t\t},\n\t\tpasteClipboardUpload: function(e)\n\t\t{\n\t        var result = e.target.result;\n\t\t\tvar arr = result.split(\",\");\n\t\t\tvar postData = {\n\t\t\t\t'contentType': arr[0].split(\";\")[0].split(\":\")[1],\n\t\t\t\t'data': arr[1]\n\t\t\t};\n\t\t\tif (this.opts.clipboardUpload)\n\t\t\t{\n\n\t\t\t\tpostData = this.pasteClipboardAppendFields(postData);\n\n\t\t\t\t$.post(this.opts.clipboardUploadUrl, postData,\n\t\t\t\t$.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\n\t\t\t\t\tvar html = '<img src=\"' + json.image.url + '\" id=\"clipboard-image-marker\" />';\n\t\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\t\tvar image = $(this.$editor.find('img#clipboard-image-marker'));\n\n\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\telse image = false;\n\n\t\t\t\t\tthis.sync();\n\t\t\t\t\tif (image)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.callback('imageUpload', image, json);\n\t\t\t\t\t}\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t        \tthis.insertHtml('<img src=\"' + result + '\" />');\n        \t}\n\t\t},\n\t\tbufferSet: function(selectionSave)\n\t\t{\n\t\t\tif (selectionSave !== false)\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\t\t\t}\n\n\t\t\tthis.opts.buffer.push(this.$editor.html());\n\n\t\t\tif (selectionSave !== false)\n\t\t\t{\n\t\t\t\tthis.selectionRemoveMarkers('buffer');\n\t\t\t}\n\n\t\t},\n\t\tbufferUndo: function()\n\t\t{\n\t\t\tif (this.opts.buffer.length === 0)\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.selectionSave();\n\t\t\tthis.opts.rebuffer.push(this.$editor.html());\n\t\t\tthis.selectionRestore(false, true);\n\n\t\t\tthis.$editor.html(this.opts.buffer.pop());\n\n\t\t\tthis.selectionRestore();\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 100);\n\t\t},\n\t\tbufferRedo: function()\n\t\t{\n\t\t\tif (this.opts.rebuffer.length === 0)\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.selectionSave();\n\t\t\tthis.opts.buffer.push(this.$editor.html());\n\t\t\tthis.selectionRestore(false, true);\n\n\t\t\tthis.$editor.html(this.opts.rebuffer.pop());\n\t\t\tthis.selectionRestore(true);\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 4);\n\t\t},\n\t\tobserveStart: function()\n\t\t{\n\t\t\tthis.observeImages();\n\n\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\t\t},\n\t\tobserveLinks: function()\n\t\t{\n\t\t\tthis.$editor.find('a').on('click', $.proxy(this.linkObserver, this));\n\n\t\t\tthis.$editor.on('click.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(e);\n\n\t\t\t}, this));\n\n\t\t\t$(document).on('click.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(e);\n\n\t\t\t}, this));\n\t\t},\n\t\tobserveImages: function()\n\t\t{\n\t\t\tif (this.opts.observeImages === false) return false;\n\n\t\t\tthis.$editor.find('img').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tif (this.browser('msie')) $(elem).attr('unselectable', 'on');\n\n\t\t\t\tvar parent = $(elem).parent();\n\t\t\t\tif (!parent.hasClass('royalSlider') && !parent.hasClass('fotorama'))\n\t\t\t\t{\n\t\t\t\t\tthis.imageResize(elem);\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t\tthis.$editor.find('.fotorama, .royalSlider').on('click', $.proxy(this.editGallery, this));\n\n\t\t},\n\t\tlinkObserver: function(e)\n\t\t{\n\t\t\tvar $link = $(e.target);\n\n\t\t\tvar parent = $(e.target).parent();\n\t\t\tif (parent.hasClass('royalSlider') || parent.hasClass('fotorama'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ($link.length == 0 || $link[0].tagName !== 'A') return;\n\n\t\t\tvar pos = $link.offset();\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\tvar posFrame = this.$frame.offset();\n\t\t\t\tpos.top = posFrame.top + (pos.top - $(this.document).scrollTop());\n\t\t\t\tpos.left += posFrame.left;\n\t\t\t}\n\n\t\t\tvar tooltip = $('<span class=\"redactor-link-tooltip\"></span>');\n\n\t\t\tvar href = $link.attr('href');\n\t\t\tif (href === undefined)\n\t\t\t{\n\t\t\t\thref = '';\n\t\t\t}\n\n\t\t\tif (href.length > 24) href = href.substring(0, 24) + '...';\n\n\t\t\tvar aLink = $('<a href=\"' + $link.attr('href') + '\" target=\"_blank\">' + href + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\t\t\t}, this));\n\n\t\t\tvar aEdit = $('<a href=\"#\">' + this.opts.curLang.edit + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.linkShow();\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\n\t\t\t}, this));\n\n\t\t\tvar aUnlink = $('<a href=\"#\">' + this.opts.curLang.unlink + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.execCommand('unlink');\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\n\t\t\t}, this));\n\t\t\ttooltip.append(aLink);\n\t\t\ttooltip.append(' | ');\n\t\t\ttooltip.append(aEdit);\n\t\t\ttooltip.append(' | ');\n\t\t\ttooltip.append(aUnlink);\n\t\t\ttooltip.css({\n\t\t\t\ttop: (pos.top + 20) + 'px',\n\t\t\t\tleft: pos.left + 'px'\n\t\t\t});\n\n\t\t\t$('.redactor-link-tooltip').remove();\n\t\t\t$('body').append(tooltip);\n\t\t},\n\t\tlinkObserverTooltipClose: function(e)\n\t\t{\n\t\t\tif (e !== false && e.target.tagName == 'A') return false;\n\t\t\t$('.redactor-link-tooltip').remove();\n\t\t},\n\t\tgetSelection: function()\n\t\t{\n\t\t\tif (!this.opts.rangy) return this.document.getSelection();\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.iframe) return rangy.getSelection();\n\t\t\t\telse return rangy.getSelection(this.$frame[0]);\n\t\t\t}\n\t\t},\n\t\tgetRange: function()\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tif (this.document.getSelection)\n\t\t\t\t{\n\t\t\t\t\tvar sel = this.getSelection();\n\t\t\t\t\tif (sel.getRangeAt && sel.rangeCount) return sel.getRangeAt(0);\n\t\t\t\t}\n\n\t\t\t\treturn this.document.createRange();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.iframe) return rangy.createRange();\n\t\t\t\telse return rangy.createRange(this.iframeDoc());\n\t\t\t}\n\t\t},\n\t\tselectionElement: function(node)\n\t\t{\n\t\t\tthis.setCaret(node);\n\t\t},\n\t\tselectionStart: function(node)\n\t\t{\n\t\t\tthis.selectionSet(node[0] || node, 0, null, 0);\n\t\t},\n\t\tselectionEnd: function(node)\n\t\t{\n\t\t\tthis.selectionSet(node[0] || node, 1, null, 1);\n\t\t},\n\t\tselectionSet: function(orgn, orgo, focn, foco)\n\t\t{\n\t\t\tif (focn == null) focn = orgn;\n\t\t\tif (foco == null) foco = orgo;\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (!sel) return;\n\n\t\t\tif (orgn.tagName == 'P' && orgn.innerHTML == '')\n\t\t\t{\n\t\t\t\torgn.innerHTML = this.opts.invisibleSpace;\n\t\t\t}\n\n\t\t\tif (orgn.tagName == 'BR' && this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tvar par = $(this.opts.emptyHtml)[0];\n\t\t\t\t$(orgn).replaceWith(par);\n\t\t\t\torgn = par;\n\t\t\t\tfocn = orgn;\n\t\t\t}\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.setStart(orgn, orgo);\n\t\t\trange.setEnd(focn, foco );\n\n\t\t\ttry {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t} catch (e) {}\n\n\t\t\tsel.addRange(range);\n\t\t},\n\t\tselectionWrap: function(tag)\n\t\t{\n\t\t\ttag = tag.toLowerCase();\n\n\t\t\tvar block = this.getBlock();\n\t\t\tif (block)\n\t\t\t{\n\t\t\t\tvar wrapper = this.formatChangeTag(block, tag);\n\t\t\t\tthis.sync();\n\t\t\t\treturn wrapper;\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tvar range = sel.getRangeAt(0);\n\t\t\tvar wrapper = document.createElement(tag);\n\t\t\twrapper.appendChild(range.extractContents());\n\t\t\trange.insertNode(wrapper);\n\n\t\t\tthis.selectionElement(wrapper);\n\n\t\t\treturn wrapper;\n\t\t},\n\t\tselectionAll: function()\n\t\t{\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(this.$editor[0]);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t},\n\t\tselectionRemove: function()\n\t\t{\n\t\t\tthis.getSelection().removeAllRanges();\n\t\t},\n\t\tgetCaretOffset: function (element)\n\t\t{\n\t\t\tvar caretOffset = 0;\n\n\t\t\tvar range = this.getRange();\n\t\t\tvar preCaretRange = range.cloneRange();\n\t\t\tpreCaretRange.selectNodeContents(element);\n\t\t\tpreCaretRange.setEnd(range.endContainer, range.endOffset);\n\t\t\tcaretOffset = $.trim(preCaretRange.toString()).length;\n\n\t\t\treturn caretOffset;\n\t\t},\n\t\tgetCaretOffsetRange: function()\n\t\t{\n\t\t\treturn new Range(this.getSelection().getRangeAt(0));\n\t\t},\n\t\tsetCaret: function (el, start, end)\n\t\t{\n\t\t\tif (typeof end === 'undefined') end = start;\n\t\t\tel = el[0] || el;\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(el);\n\n\t\t\tvar textNodes = this.getTextNodesIn(el);\n\t\t\tvar foundStart = false;\n\t\t\tvar charCount = 0, endCharCount;\n\n\t\t\tif (textNodes.length == 1 && start)\n\t\t\t{\n\t\t\t\trange.setStart(textNodes[0], start);\n\t\t\t\trange.setEnd(textNodes[0], end);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (var i = 0, textNode; textNode = textNodes[i++];)\n\t\t\t\t{\n\t\t\t\t\tendCharCount = charCount + textNode.length;\n\t\t\t\t\tif (!foundStart && start >= charCount && (start < endCharCount || (start == endCharCount && i < textNodes.length)))\n\t\t\t\t\t{\n\t\t\t\t\t\trange.setStart(textNode, start - charCount);\n\t\t\t\t\t\tfoundStart = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (foundStart && end <= endCharCount)\n\t\t\t\t\t{\n\t\t\t\t\t\trange.setEnd( textNode, end - charCount );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcharCount = endCharCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange( range );\n\t\t},\n\t\tsetCaretAfter: function(node)\n\t\t{\n\t\t\tthis.$editor.focus();\n\n\t\t\tnode = node[0] || node;\n\n\t\t\tvar range = this.document.createRange()\n\n\t\t\tvar start = 1;\n\t\t\tvar end = -1;\n\n\t\t\trange.setStart(node, start)\n\t\t\trange.setEnd(node, end + 2)\n\t\t\tvar selection = this.window.getSelection()\n\t\t\tvar cursorRange = this.document.createRange()\n\n\t\t\tvar emptyElement = this.document.createTextNode('\\u200B')\n\t\t\t$(node).after(emptyElement)\n\n\t\t\tcursorRange.setStartAfter(emptyElement)\n\n\t\t\tselection.removeAllRanges()\n\t\t\tselection.addRange(cursorRange)\n\t\t\t$(emptyElement).remove();\n\t\t},\n\t\tgetTextNodesIn: function (node)\n\t\t{\n\t\t\tvar textNodes = [];\n\n\t\t\tif (node.nodeType == 3) textNodes.push(node);\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar children = node.childNodes;\n\t\t\t\tfor (var i = 0, len = children.length; i < len; ++i)\n\t\t\t\t{\n\t\t\t\t\ttextNodes.push.apply(textNodes, this.getTextNodesIn(children[i]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn textNodes;\n\t\t},\n\t\tgetCurrent: function()\n\t\t{\n\t\t\tvar el = false;\n\t\t\tvar sel = this.getSelection();\n\n\t\t\tif (sel && sel.rangeCount > 0)\n\t\t\t{\n\t\t\t\tel = sel.getRangeAt(0).startContainer;\n\n\t\t\t}\n\n\t\t\treturn this.isParentRedactor(el);\n\t\t},\n\t\tgetParent: function(elem)\n\t\t{\n\t\t\telem = elem || this.getCurrent();\n\t\t\tif (elem) return this.isParentRedactor( $( elem ).parent()[0] );\n\t\t\telse return false;\n\t\t},\n\t\tgetBlock: function(node)\n\t\t{\n\t\t\tif (typeof node === 'undefined') node = this.getCurrent();\n\n\t\t\twhile (node)\n\t\t\t{\n\t\t\t\tif (this.nodeTestBlocks(node))\n\t\t\t\t{\n\t\t\t\t\tif ($(node).hasClass('redactor_editor')) return false;\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tgetBlocks: function(nodes)\n\t\t{\n\t\t\tvar newnodes = [];\n\t\t\tif (typeof nodes == 'undefined')\n\t\t\t{\n\t\t\t\tvar range = this.getRange();\n\t\t\t\tif (range && range.collapsed === true) return [this.getBlock()];\n\t\t\t\tvar nodes = this.getNodes(range);\n\t\t\t}\n\n\t\t\t$.each(nodes, $.proxy(function(i,node)\n\t\t\t{\n\t\t\t\tif (this.opts.iframe === false && $(node).parents('div.redactor_editor').length == 0) return false;\n\t\t\t\tif (this.nodeTestBlocks(node)) newnodes.push(node);\n\n\t\t\t}, this));\n\n\t\t\tif (newnodes.length === 0) newnodes = [this.getBlock()];\n\n\t\t\treturn newnodes;\n\t\t},\n\t\tisInlineNode: function(node)\n\t\t{\n\t\t\tif (node.nodeType != 1) return false;\n\n\t\t\treturn !this.rTestBlock.test(node.nodeName);\n\t\t},\n\t\tnodeTestBlocks: function(node)\n\t\t{\n\t\t\treturn node.nodeType == 1 && this.rTestBlock.test(node.nodeName);\n\t\t},\n\t\ttagTestBlock: function(tag)\n\t\t{\n\t\t\treturn this.rTestBlock.test(tag);\n\t\t},\n\t\tgetNodes: function(range, tag)\n\t\t{\n\t\t\tif (typeof range == 'undefined' || range == false) var range = this.getRange();\n\t\t\tif (range && range.collapsed === true)\n\t\t\t{\n\t\t\t\tif (typeof tag === 'undefined' && this.tagTestBlock(tag))\n\t\t\t\t{\n\t\t\t\t\tvar block = this.getBlock();\n\t\t\t\t\tif (block.tagName == tag) return [block];\n\t\t\t\t\telse return [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn [this.getCurrent()];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar nodes = [], finalnodes = [];\n\n\t\t\tvar sel = this.document.getSelection();\n\t\t\tif (!sel.isCollapsed) nodes = this.getRangeSelectedNodes(sel.getRangeAt(0));\n\n\t\t\t$.each(nodes, $.proxy(function(i,node)\n\t\t\t{\n\t\t\t\tif (this.opts.iframe === false && $(node).parents('div.redactor_editor').length == 0) return false;\n\n\t\t\t\tif (typeof tag === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tif ($.trim(node.textContent) != '')\n\t\t\t\t\t{\n\t\t\t\t\t\tfinalnodes.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (node.tagName == tag)\n\t\t\t\t{\n\t\t\t\t\tfinalnodes.push(node);\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tif (finalnodes.length == 0)\n\t\t\t{\n\t\t\t\tif (typeof tag === 'undefined' && this.tagTestBlock(tag))\n\t\t\t\t{\n\t\t\t\t\tvar block = this.getBlock();\n\t\t\t\t\tif (block.tagName == tag) return finalnodes.push(block);\n\t\t\t\t\telse return [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinalnodes.push(this.getCurrent());\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar last = finalnodes[finalnodes.length-1];\n\t\t\tif (this.nodeTestBlocks(last))\n\t\t\t{\n\t\t\t\tfinalnodes = finalnodes.slice(0, -1);\n\t\t\t}\n\n\t\t\treturn finalnodes;\n\t\t},\n\t\tgetElement: function(node)\n\t\t{\n\t\t\tif (!node) node = this.getCurrent();\n\t\t\twhile (node)\n\t\t\t{\n\t\t\t\tif (node.nodeType == 1)\n\t\t\t\t{\n\t\t\t\t\tif ($(node).hasClass('redactor_editor')) return false;\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tgetRangeSelectedNodes: function(range)\n\t\t{\n\t\t\trange = range || this.getRange();\n\t\t\tvar node = range.startContainer;\n\t\t\tvar endNode = range.endContainer;\n\n\t\t\tif (node == endNode) return [node];\n\n\t\t\tvar rangeNodes = [];\n\t\t\twhile (node && node != endNode)\n\t\t\t{\n\t\t\t\trangeNodes.push(node = this.nextNode(node));\n\t\t\t}\n\n\t\t\tnode = range.startContainer;\n\t\t\twhile (node && node != range.commonAncestorContainer)\n\t\t\t{\n\t\t\t\trangeNodes.unshift(node);\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn rangeNodes;\n\t\t},\n\t\tnextNode: function(node)\n\t\t{\n\t\t\tif (node.hasChildNodes()) return node.firstChild;\n\t\t\telse\n\t\t\t{\n\t\t\t\twhile (node && !node.nextSibling)\n\t\t\t\t{\n\t\t\t\t\tnode = node.parentNode;\n\t\t\t\t}\n\n\t\t\t\tif (!node) return null;\n\t\t\t\treturn node.nextSibling;\n\t\t\t}\n\t\t},\n\t\tgetSelectionText: function()\n\t\t{\n\t\t\treturn this.getSelection().toString();\n\t\t},\n\t\tgetSelectionHtml: function()\n\t\t{\n\t\t\tvar html = '';\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar container = this.document.createElement( \"div\" );\n\t\t\t\tvar len = sel.rangeCount;\n\t\t\t\tfor (var i = 0; i < len; ++i)\n\t\t\t\t{\n\t\t\t\t\tcontainer.appendChild(sel.getRangeAt(i).cloneContents());\n\t\t\t\t}\n\n\t\t\t\thtml = container.innerHTML;\n\t\t\t}\n\n\t\t\treturn this.syncClean(html);\n\t\t},\n\t\tselectionSave: function()\n\t\t{\n\t\t\tif (!this.isFocused())\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t}\n\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tthis.selectionCreateMarker(this.getRange());\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.savedSel = rangy.saveSelection();\n\t\t\t}\n\t\t},\n\t\tselectionCreateMarker: function(range, remove)\n\t\t{\n\t\t\tif (!range) return;\n\n\t\t\tvar node1 = $('<span id=\"selection-marker-1\" class=\"redactor-selection-marker\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\tvar node2 = $('<span id=\"selection-marker-2\" class=\"redactor-selection-marker\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\n\t\t\tif (range.collapsed === true)\n\t\t\t{\n\t\t\t\tthis.selectionSetMarker(range, node1, true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectionSetMarker(range, node1, true);\n\t\t\t\tthis.selectionSetMarker(range, node2, false);\n\t\t\t}\n\n\t\t\tthis.savedSel = this.$editor.html();\n\n\t\t\tthis.selectionRestore(false, false);\n\t\t},\n\t\tselectionSetMarker: function(range, node, type)\n\t\t{\n\t\t\tvar boundaryRange = range.cloneRange();\n\n\t\t\ttry {\n\t\t\t\tboundaryRange.collapse(type);\n\t\t\t\tboundaryRange.insertNode(node);\n\t\t\t\tboundaryRange.detach();\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tvar html = this.opts.emptyHtml;\n\t\t\t\tif (this.opts.linebreaks) html = '<br>';\n\n\t\t\t\tthis.$editor.prepend(html);\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t},\n\t\tselectionRestore: function(replace, remove)\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tif (replace === true && this.savedSel)\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.html(this.savedSel);\n\t\t\t\t}\n\n\t\t\t\tvar node1 = this.$editor.find('span#selection-marker-1');\n\t\t\t\tvar node2 = this.$editor.find('span#selection-marker-2');\n\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t}\n\t\t\t\telse if (!this.isFocused())\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t}\n\n\t\t\t\tif (node1.length != 0 && node2.length != 0)\n\t\t\t\t{\n\n\t\t\t\t\tthis.selectionSet(node1[0], 0, node2[0], 0);\n\t\t\t\t}\n\t\t\t\telse if (node1.length != 0)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionSet(node1[0], 0, null, 0);\n\t\t\t\t}\n\n\t\t\t\tif (remove !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionRemoveMarkers();\n\t\t\t\t\tthis.savedSel = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\trangy.restoreSelection(this.savedSel);\n\t\t\t}\n\t\t},\n\t\tselectionRemoveMarkers: function(type)\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\t$.each(this.$editor.find('span.redactor-selection-marker'), function()\n\t\t\t\t{\n\t\t\t\t\tvar html = $.trim($(this).html().replace(/[^\\u0000-\\u1C7F]/g, ''));\n\t\t\t\t\tif (html == '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).removeAttr('class').removeAttr('id');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\trangy.removeMarkers(this.savedSel);\n\t\t\t}\n\t\t},\n\t\ttableShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.modalInit(this.opts.curLang.table, this.opts.modal_table, 300, $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_insert_table_btn').on('click', $.proxy(this.tableInsert, this));\n\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_table_rows').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this));\n\t\t},\n\t\ttableInsert: function()\n\t\t{\n\t\t\tthis.bufferSet(false);\n\n\t\t\tvar rows = $('#redactor_table_rows').val(),\n\t\t\t\tcolumns = $('#redactor_table_columns').val(),\n\t\t\t\t$table_box = $('<div></div>'),\n\t\t\t\ttableId = Math.floor(Math.random() * 99999),\n\t\t\t\t$table = $('<table id=\"table' + tableId + '\"><tbody></tbody></table>'),\n\t\t\t\ti, $row, z, $column;\n\n\t\t\tfor (i = 0; i < rows; i++)\n\t\t\t{\n\t\t\t\t$row = $('<tr></tr>');\n\n\t\t\t\tfor (z = 0; z < columns; z++)\n\t\t\t\t{\n\t\t\t\t\t$column = $('<td>' + this.opts.invisibleSpace + '</td>');\n\t\t\t\t\tif (i === 0 && z === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$column.append('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t}\n\n\t\t\t\t\t$($row).append($column);\n\t\t\t\t}\n\n\t\t\t\t$table.append($row);\n\t\t\t}\n\n\t\t\t$table_box.append($table);\n\t\t\tvar html = $table_box.html();\n\n\t\t\tif (this.opts.linebreaks === false && this.browser('mozilla'))\n\t\t\t{\n\t\t\t\thtml += '<p>' + this.opts.invisibleSpace + '</p>';\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar current = this.getBlock() || this.getCurrent();\n\n\t\t\tif (current && current.tagName != 'BODY')\n\t\t\t{\n\t\t\t\tif (current.tagName == 'LI')\n\t\t\t\t{\n\t\t\t\t\tvar current = $(current).closest('ul, ol');\n\t\t\t\t}\n\n\t\t\t\t$(current).after(html)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tthis.insertHtmlAdvanced(html, false);\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar table = this.$editor.find('#table' + tableId);\n\t\t\tthis.buttonActiveObserver();\n\n\t\t\ttable.find('span#selection-marker-1, inline#selection-marker-1').remove();\n\t\t\ttable.removeAttr('id');\n\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteTable: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\t$table.remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteRow: function()\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_tr = $(parent).closest('tr');\n\t\t\tvar $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();\n\t\t\tif ($focus_tr.length)\n\t\t\t{\n\t\t\t\tvar $focus_td = $focus_tr.children('td' ).first();\n\t\t\t\tif ($focus_td.length)\n\t\t\t\t{\n\t\t\t\t\t$focus_td.prepend('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$current_tr.remove();\n\t\t\tthis.selectionRestore();\n\t\t\t$table.find('span#selection-marker-1').remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteColumn: function()\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_td = $(parent).closest('td');\n\t\t\tif (!($current_td.is('td')))\n\t\t\t{\n\t\t\t\t$current_td = $current_td.closest('td');\n\t\t\t}\n\n\t\t\tvar index = $current_td.get(0).cellIndex;\n\t\t\t$table.find('tr').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tvar focusIndex = index - 1 < 0 ? index + 1 : index - 1;\n\t\t\t\tif (i === 0)\n\t\t\t\t{\n\t\t\t\t\t$(elem).find('td').eq(focusIndex).prepend('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t}\n\n\t\t\t\t$(elem).find('td').eq(index).remove();\n\n\t\t\t}, this));\n\n\t\t\tthis.selectionRestore();\n\t\t\t$table.find('span#selection-marker-1').remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddHead: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tif ($table.find('thead').length !== 0) this.tableDeleteHead();\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar tr = $table.find('tr').first().clone();\n\t\t\t\ttr.find('td').replaceWith('<th></th>').html(this.opts.invisibleSpace);\n\t\t\t\t$thead = $('<thead></thead>');\n\t\t\t\t$thead.append(tr);\n\t\t\t\t$table.prepend($thead);\n\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t},\n\t\ttableDeleteHead: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tvar $thead = $table.find('thead');\n\n\t\t\tif ($thead.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\t$thead.remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddRowAbove: function()\n\t\t{\n\t\t\tthis.tableAddRow('before');\n\t\t},\n\t\ttableAddRowBelow: function()\n\t\t{\n\t\t\tthis.tableAddRow('after');\n\t\t},\n\t\ttableAddColumnLeft: function()\n\t\t{\n\t\t\tthis.tableAddColumn('before');\n\t\t},\n\t\ttableAddColumnRight: function()\n\t\t{\n\t\t\tthis.tableAddColumn('after');\n\t\t},\n\t\ttableAddRow: function(type)\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_tr = $(this.getParent()).closest('tr');\n\t\t\tvar new_tr = $current_tr.clone();\n\t\t\tnew_tr.find('td').html(this.opts.invisibleSpace);\n\n\t\t\tif (type === 'after') $current_tr.after(new_tr);\n\t\t\telse $current_tr.before(new_tr);\n\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddColumn: function (type)\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar index = 0;\n\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar $current_tr = $(current).closest('tr');\n\t\t\tvar $current_td =  $(current).closest('td');\n\n\t\t\t$current_tr.find('td').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tif ($(elem)[0] === $current_td[0]) index = i;\n\n\t\t\t}, this));\n\n\t\t\t$table.find('tr').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tvar $current = $(elem).find('td').eq(index);\n\n\t\t\t\tvar td = $current.clone();\n\t\t\t\ttd.html(this.opts.invisibleSpace);\n\n\t\t\t\ttype === 'after' ? $current.after(td) : $current.before(td);\n\n\t\t\t}, this));\n\n\t\t\tthis.sync();\n\t\t},\n\t\tvideoShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.modalInit(this.opts.curLang.video, this.opts.modal_video, 600, $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_insert_video_btn').on('click', $.proxy(this.videoInsert, this));\n\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_insert_video_area').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this));\n\t\t},\n\t\tvideoInsert: function ()\n\t\t{\n\t\t\tvar data = $('#redactor_insert_video_area').val();\n\t\t\tdata = this.cleanStripTags(data);\n\t\t\tvar iframeStart = '<iframe width=\"500\" height=\"281\" src=\"',\n\t\t\t\tiframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n\t\t\tif (data.match(reUrlYoutube))\n\t\t\t{\n\t\t\t\tdata = data.replace(reUrlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\n\t\t\t}\n\t\t\telse if (data.match(reUrlVimeo))\n\t\t\t{\n\t\t\t\tdata = data.replace(reUrlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\n\t\t\t}\n            else if (data.match(reUrlFacebook))\n            {\n                data = data.replace(reUrlFacebook, iframeStart + 'https://www.facebook.com/video/embed?video_id=$1' + iframeEnd);\n            }\n\t\t\telse if (data.match(reUrlRutube))\n            {\n                data = data.replace(reUrlRutube, iframeStart + '//rutube.ru/play/embed/$1' + iframeEnd);\n            }\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar current = this.getBlock() || this.getCurrent();\n\n\t\t\tif (current) $(current).after(data)\n\t\t\telse this.insertHtmlAdvanced(data, false);\n\n\t\t\tthis.sync();\n\t\t\tthis.modalClose();\n\t\t},\n\n\t\tlinkShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\n\t\t\t\tif (this.opts.predefinedLinks !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.predefinedLinksStorage = {};\n\t\t\t\t\tvar that = this;\n\t\t\t\t\t$.getJSON(this.opts.predefinedLinks, function(data)\n\t\t\t\t\t{\n                        if(Object.keys(data).length === 0){ return; }\n\t\t\t\t\t\tvar $select = $('#redactor-predefined-links');\n\t\t\t\t\t\t$select .html('');\n\t\t\t\t\t\t$.each(data, function(key, val)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthat.predefinedLinksStorage[key] = val;\n\t\t\t\t\t\t\t$select.append($('<option>').val(key).html(val.name));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$select.on('change', function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar key = $(this).val();\n\t\t\t\t\t\t\tvar name = '', url = '';\n\t\t\t\t\t\t\tif (key != 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname = that.predefinedLinksStorage[key].name;\n\t\t\t\t\t\t\t\turl = that.predefinedLinksStorage[key].url;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$('#redactor_link_url').val(url);\n                            if($('#redactor_link_url_text').data('is_selected_text') != 1){\n                                $('#redactor_link_url_text').val(name);\n                            }\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$select.show();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.insert_link_node = false;\n\n\t\t\t\tvar sel = this.getSelection();\n\t\t\t\tvar url = '', text = '', target = '';\n\n\t\t\t\tvar elem = this.getParent();\n\t\t\t\tvar par = $(elem).parent().get(0);\n\t\t\t\tif (par && par.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\telem = par;\n\t\t\t\t}\n\n\t\t\t\tif (elem && elem.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\turl = elem.href;\n\t\t\t\t\ttext = $(elem).text();\n\t\t\t\t\ttarget = elem.target;\n\n\t\t\t\t\tthis.insert_link_node = elem;\n\t\t\t\t}\n\t\t\t\telse text = sel.toString();\n\n\t\t\t\t$('#redactor_link_url_text').val(text);\n                if(text.length > 0){\n                    $('#redactor_link_url_text').data('is_selected_text', 1);\n                }\n\n\t\t\t\tvar thref = self.location.href.replace(/\\/$/i, '');\n\t\t\t\turl = url.replace(thref, '');\n\t\t\t\turl = url.replace(/^\\/#/, '#');\n\t\t\t\turl = url.replace('mailto:', '');\n\t\t\t\tif (this.opts.linkProtocol === false)\n\t\t\t\t{\n\t\t\t\t\tvar re = new RegExp('^(http|ftp|https)://' + self.location.host, 'i');\n\t\t\t\t\turl = url.replace(re, '');\n\t\t\t\t}\n\t\t\t\t$('#redactor_link_url').val(url);\n\n\t\t\t\tif (target === '_blank')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_link_blank').prop('checked', true);\n\t\t\t\t}\n\n\t\t\t\tthis.linkInsertPressed = false;\n\t\t\t\t$('#redactor_insert_link_btn').on('click', $.proxy(this.linkProcess, this));\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_link_url').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.link, this.opts.modal_link, 460, callback);\n\n\t\t},\n\t\tlinkProcess: function()\n\t\t{\n\t\t\tif (this.linkInsertPressed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.linkInsertPressed = true;\n\t\t\tvar target = '', targetBlank = '';\n\n\t\t\tvar link = $('#redactor_link_url').val();\n\t\t\tvar text = $('#redactor_link_url_text').val();\n\t\t\tif (link.search('@') != -1 && /(http|ftp|https):\\/\\//i.test(link) === false)\n\t\t\t{\n\t\t\t\tlink = 'mailto:' + link;\n\t\t\t}\n\n\t\t\telse if (link.search('#') != 0)\n\t\t\t{\n\t\t\t\tif ($('#redactor_link_blank').prop('checked'))\n\t\t\t\t{\n\t\t\t\t\ttarget = ' target=\"_blank\"';\n\t\t\t\t\ttargetBlank = '_blank';\n\t\t\t\t}\n\t\t\t\tvar pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';\n\t\t\t\tvar re = new RegExp('^(http|ftp|https)://' + pattern, 'i');\n\t\t\t\tvar re2 = new RegExp('^' + pattern, 'i');\n\n\t\t\t\tif (link.search(re) == -1 && link.search(re2) == 0 && this.opts.linkProtocol)\n\t\t\t\t{\n\t\t\t\t\tlink = this.opts.linkProtocol + link;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext = text.replace(/<|>/g, '');\n\t\t\tvar extra = '&nbsp;';\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\textra = '&nbsp;';\n\t\t\t}\n\n\t\t\tthis.linkInsert('<a href=\"' + link + '\"' + target + '>' + text + '</a>' + extra, $.trim(text), link, targetBlank);\n\n\t\t},\n\t\tlinkInsert: function (a, text, link, target)\n\t\t{\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (text !== '')\n\t\t\t{\n\t\t\t\tif (this.insert_link_node)\n\t\t\t\t{\n\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t$(this.insert_link_node).text(text).attr('href', link);\n\n\t\t\t\t\tif (target !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this.insert_link_node).attr('target', target);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this.insert_link_node).removeAttr('target');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar $a = $(a).addClass('redactor-added-link');\n\t\t\t\t\tthis.exec('inserthtml', this.outerHtml($a), false);\n\n\t\t\t\t\tvar link = this.$editor.find('a.redactor-added-link');\n\n\t\t\t\t\tlink.removeAttr('style').removeClass('redactor-added-link').each(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.className == '') $(this).removeAttr('class');\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\n\t\t\t}, this), 5);\n\n\t\t\tthis.modalClose();\n\t\t},\n\t\tfileShow: function ()\n\t\t{\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\t\t\t\tvar sel = this.getSelection();\n\n\t\t\t\tvar text = '';\n\t\t\t\tif (this.oldIE()) text = sel.text;\n\t\t\t\telse text = sel.toString();\n\n\t\t\t\t$('#redactor_filename').val(text);\n\t\t\t\tif (!this.isMobile() && !this.isIPad())\n\t\t\t\t{\n\t\t\t\t\tthis.draguploadInit('#redactor_file', {\n\t\t\t\t\t\turl: this.opts.fileUpload,\n\t\t\t\t\t\tuploadFields: this.opts.uploadFields,\n\t\t\t\t\t\tsuccess: $.proxy(this.fileCallback, this),\n\t\t\t\t\t\terror: $.proxy( function(obj, json)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.callback('fileUploadError', json);\n\n\t\t\t\t\t\t}, this),\n\t\t\t\t\t\tuploadParam: this.opts.fileUploadParam\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.uploadInit('redactor_file', {\n\t\t\t\t\tauto: true,\n\t\t\t\t\turl: this.opts.fileUpload,\n\t\t\t\t\tsuccess: $.proxy(this.fileCallback, this),\n\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.callback('fileUploadError', json);\n\n\t\t\t\t\t}, this)\n\t\t\t\t});\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.file, this.opts.modal_file, 500, callback);\n\t\t},\n\t\tfileCallback: function(json)\n\t\t{\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (json !== false)\n\t\t\t{\n\n\t\t\t\tvar text = $('#redactor_filename').val();\n\t\t\t\tif (text === '') text = json.filename;\n\n\t\t\t\tvar link = '<a href=\"' + json.filelink + '\" id=\"filelink-marker\">' + text + '</a>';\n\t\t\t\tif (this.browser('webkit') && !!this.window.chrome)\n\t\t\t\t{\n\t\t\t\t\tlink = link + '&nbsp;';\n\t\t\t\t}\n\n\t\t\t\tthis.execCommand('inserthtml', link, false);\n\n\t\t\t\tvar linkmarker = $(this.$editor.find('a#filelink-marker'));\n\t\t\t\tif (linkmarker.length != 0) linkmarker.removeAttr('id');\n\t\t\t\telse linkmarker = false;\n\n\t\t\t\tthis.sync();\n\t\t\t\tthis.callback('fileUpload', linkmarker, json);\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t},\n\t\timageShow: function()\n\t\t{\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\n\t\t\t\tif (this.opts.imageGetJson)\n\t\t\t\t{\n\n\t\t\t\t\t$.getJSON(this.opts.imageGetJson, $.proxy(function(data)\n\t\t\t\t\t{\n                        if(data.error){\n                            alert(data.message); return;\n                        }\n\t\t\t\t\t\tvar folders = {}, count = 0;\n\t\t\t\t\t\t$.each(data, $.proxy(function(key, val)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (typeof val.folder !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\tfolders[val.folder] = count;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}, this));\n\n                        $('#redactor_image_box .empty_list').show();\n\t\t\t\t\t\tvar folderclass = false;\n\t\t\t\t\t\t$.each(data, $.proxy(function(key, val)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tvar thumbtitle = '';\n\t\t\t\t\t\t\tif (typeof val.title !== 'undefined') thumbtitle = val.title;\n\n\t\t\t\t\t\t\tvar folderkey = 0;\n\t\t\t\t\t\t\tif (!$.isEmptyObject(folders) && typeof val.folder !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfolderkey = folders[val.folder];\n\t\t\t\t\t\t\t\tif (folderclass === false) folderclass = '.redactorfolder' + folderkey;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar img = $('<img src=\"' + val.thumb + '\" class=\"redactorfolder redactorfolder' + folderkey + '\" rel=\"' + val.image + '\" title=\"' + thumbtitle + '\" />');\n\t\t\t\t\t\t\t$('#redactor_image_box').append(img);\n\t\t\t\t\t\t\t$(img).on('click', $.proxy(this.imageThumbClick, this));\n                            $('#redactor_image_box .empty_list').hide();\n\t\t\t\t\t\t}, this));\n\t\t\t\t\t\tif (!$.isEmptyObject(folders))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('.redactorfolder').hide();\n\t\t\t\t\t\t\t$(folderclass).show();\n\n\t\t\t\t\t\t\tvar onchangeFunc = function(e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('.redactorfolder').hide();\n\t\t\t\t\t\t\t\t$('.redactorfolder' + $(e.target).val()).show();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tvar select = $('<select id=\"redactor_image_box_select\">');\n\t\t\t\t\t\t\t$.each( folders, function(k, v)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tselect.append( $('<option value=\"' + v + '\">' + k + '</option>'));\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$('#redactor_image_box').before(select);\n\t\t\t\t\t\t\tselect.change(onchangeFunc);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this));\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#redactor-tab-control-2').remove();\n\t\t\t\t}\n\n\t\t\t\tif (this.opts.imageUpload || this.opts.s3)\n\t\t\t\t{\n\n\t\t\t\t\tif (!this.isMobile()  && !this.isIPad() && this.opts.s3 === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif ($('#redactor_file' ).length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadInit('#redactor_file', {\n\t\t\t\t\t\t\t\turl: this.opts.imageUpload,\n\t\t\t\t\t\t\t\tuploadFields: this.opts.uploadFields,\n\t\t\t\t\t\t\t\tsuccess: $.proxy(this.imageCallback, this),\n\t\t\t\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.callback('imageUploadError', json);\n\n\t\t\t\t\t\t\t\t}, this),\n\t\t\t\t\t\t\t\tuploadParam: this.opts.imageUploadParam\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.opts.s3 === false)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tthis.uploadInit('redactor_file', {\n\t\t\t\t\t\t\tauto: true,\n\t\t\t\t\t\t\turl: this.opts.imageUpload,\n\t\t\t\t\t\t\tsuccess: $.proxy(this.imageCallback, this),\n\t\t\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.callback('imageUploadError', json);\n\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_file').on('change.redactor', $.proxy(this.s3handleFileSelect, this));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('.redactor_tab').hide();\n\t\t\t\t\tif (!this.opts.imageGetJson)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_tabs').remove();\n\t\t\t\t\t\t$('#redactor_tab3').show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor-tab-control-1').remove();\n\t\t\t\t\t\t$('#redactor-tab-control-2').addClass('redactor_tabs_act');\n\t\t\t\t\t\t$('#redactor_tab2').show();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!this.opts.imageTabLink && (this.opts.imageUpload || this.opts.imageGetJson))\n\t\t\t\t{\n\t\t\t\t\t$('#redactor-tab-control-3').hide();\n\t\t\t\t}\n\n\t\t\t\t$('#redactor_upload_btn').on('click', $.proxy(this.imageCallbackLink, this));\n\n\t\t\t\tif (!this.opts.imageUpload && !this.opts.imageGetJson)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(function()\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_file_link').focus();\n\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.image, this.opts.modal_image, 610, callback);\n\n\t\t},\n\t\timageEdit: function(image)\n\t\t{\n\t\t\tvar $el = image;\n\t\t\tvar parent = $el.parent().parent();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_file_alt').val($el.attr('alt'));\n\t\t\t\t$('#redactor_image_edit_src').attr('href', $el.attr('src'));\n\n\t\t\t\tif ($el.css('display') == 'block' && $el.css('float') == 'none')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_form_image_align').val('center');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_form_image_align').val($el.css('float'));\n\t\t\t\t}\n\n\t\t\t\tif ($(parent).get(0).tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_file_link').val($(parent).attr('href'));\n\n\t\t\t\t\tif ($(parent).attr('target') == '_blank')\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_link_blank').prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$('#redactor_image_delete_btn').on('click', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.imageRemove($el);\n\n\t\t\t\t}, this));\n\n\t\t\t\t$('#redactorSaveBtn').on('click', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.imageSave($el);\n\n\t\t\t\t}, this));\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.edit, this.opts.modal_image_edit, 380, callback);\n\n\t\t},\n\t\timageRemove: function(el)\n\t\t{\n\t\t\tvar parentLink = $(el).parent().parent();\n\t\t\tvar parent = $(el).parent();\n\t\t\tvar parentEl = false;\n\n\t\t\tif (parentLink.length && parentLink[0].tagName === 'A')\n\t\t\t{\n\t\t\t\tparentEl = true;\n\t\t\t\t$(parentLink).remove();\n\t\t\t}\n\t\t\telse if (parent.length && parent[0].tagName === 'A')\n\t\t\t{\n\t\t\t\tparentEl = true;\n\t\t\t\t$(parent).remove();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(el).remove();\n\t\t\t}\n\n\t\t\tif (parent.length && parent[0].tagName === 'P')\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\n\t\t\t\tif (parentEl === false) this.selectionStart(parent);\n\t\t\t}\n\t\t\tthis.callback('imageDelete', el);\n\n\t\t\tthis.modalClose();\n\t\t\tthis.sync();\n\t\t},\n\t\timageSave: function(el)\n\t\t{\n\t\t\tthis.imageResizeHide(false);\n\n\t\t\tvar $el = $(el);\n\t\t\tvar parent = $el.parent();\n\n\t\t\t$el.attr('alt', $('#redactor_file_alt').val());\n\n\t\t\tvar floating = $('#redactor_form_image_align').val();\n\t\t\tvar margin = '';\n\n\t\t\tif (floating === 'left')\n\t\t\t{\n\t\t\t\tmargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';\n\t\t\t\t$el.css({ 'float': 'left', 'margin': margin });\n\t\t\t}\n\t\t\telse if (floating === 'right')\n\t\t\t{\n\t\t\t\tmargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + '';\n\t\t\t\t$el.css({ 'float': 'right', 'margin': margin });\n\t\t\t}\n\t\t\telse if (floating === 'center')\n\t\t\t{\n\t\t\t\t$el.css({ 'float': '', 'display': 'block', 'margin': 'auto' });\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$el.css({ 'float': '', 'display': '', 'margin': '' });\n\t\t\t}\n\t\t\tvar link = $.trim($('#redactor_file_link').val());\n\t\t\tif (link !== '')\n\t\t\t{\n\t\t\t\tvar target = false;\n\t\t\t\tif ($('#redactor_link_blank').prop('checked'))\n\t\t\t\t{\n\t\t\t\t\ttarget = true;\n\t\t\t\t}\n\n\t\t\t\tif (parent.get(0).tagName !== 'A')\n\t\t\t\t{\n\t\t\t\t\tvar a = $('<a href=\"' + link + '\">' + this.outerHtml(el) + '</a>');\n\n\t\t\t\t\tif (target)\n\t\t\t\t\t{\n\t\t\t\t\t\ta.attr('target', '_blank');\n\t\t\t\t\t}\n\n\t\t\t\t\t$el.replaceWith(a);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparent.attr('href', link);\n\t\t\t\t\tif (target)\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.attr('target', '_blank');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.removeAttr('target');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (parent.get(0).tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\tparent.replaceWith(this.outerHtml(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.observeImages();\n\t\t\tthis.sync();\n\n\t\t},\n\t\timageResizeHide: function(e)\n\t\t{\n\t\t\tif (e !== false && $(e.target).parent().length != 0 && $(e.target).parent()[0].id === 'redactor-image-box')\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar imageBox = this.$editor.find('#redactor-image-box');\n\t\t\tif (imageBox.length == 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.$editor.find('#redactor-image-editter, #redactor-image-resizer').remove();\n\n\t\t\timageBox.find('img').css({\n\t\t\t\tmarginTop: imageBox[0].style.marginTop,\n\t\t\t\tmarginBottom: imageBox[0].style.marginBottom,\n\t\t\t\tmarginLeft: imageBox[0].style.marginLeft,\n\t\t\t\tmarginRight: imageBox[0].style.marginRight\n\t\t\t});\n\n\t\t\timageBox.css('margin', '');\n\t\t\timageBox.find('img').css('opacity', '');\n\t\t\timageBox.replaceWith(function()\n\t\t\t{\n\t\t\t\treturn $(this).contents();\n\t\t\t});\n\n\t\t\t$(document).off('click.redactor-image-resize-hide');\n\t\t\tthis.$editor.off('click.redactor-image-resize-hide');\n\t\t\tthis.$editor.off('keydown.redactor-image-delete');\n\n\t\t\tthis.sync()\n\n\t\t},\n\t\timageResize: function(image)\n\t\t{\n\t\t\tvar $image = $(image);\n\n\t\t\t$image.on('mousedown', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.imageResizeHide(false);\n\t\t\t}, this));\n\n\t\t\t$image.on('dragstart', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.$editor.on('drop.redactor-image-inside-drop', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.observeImages();\n\t\t\t\t\t\tthis.$editor.off('drop.redactor-image-inside-drop');\n\t\t\t\t\t\tthis.sync();\n\n\t\t\t\t\t}, this), 1);\n\n\t\t\t\t},this));\n\t\t\t}, this));\n\n\t\t\t$image.on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (this.$editor.find('#redactor-image-box').length != 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar clicked = false,\n\t\t\t\tstart_x,\n\t\t\t\tstart_y,\n\t\t\t\tratio = $image.width() / $image.height(),\n\t\t\t\tmin_w = 20,\n\t\t\t\tmin_h = 10;\n\n\t\t\t\tvar imageResizer = this.imageResizeControls($image);\n\t\t\t\tvar isResizing = false;\n\t\t\t\tif (imageResizer !== false)\n\t\t\t\t{\n\t\t\t\t\timageResizer.on('mousedown', function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tisResizing = true;\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tratio = $image.width() / $image.height();\n\n\t\t\t\t\t\tstart_x = Math.round(e.pageX - $image.eq(0).offset().left);\n\t\t\t\t\t\tstart_y = Math.round(e.pageY - $image.eq(0).offset().top);\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(this.document.body).on('mousemove', $.proxy(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isResizing)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar mouse_x = Math.round(e.pageX - $image.eq(0).offset().left) - start_x;\n\t\t\t\t\t\t\tvar mouse_y = Math.round(e.pageY - $image.eq(0).offset().top) - start_y;\n\n\t\t\t\t\t\t\tvar div_h = $image.height();\n\n\t\t\t\t\t\t\tvar new_h = parseInt(div_h, 10) + mouse_y;\n\t\t\t\t\t\t\tvar new_w = Math.round(new_h * ratio);\n\n\t\t\t\t\t\t\tif (new_w > min_w)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$image.width(new_w);\n\n\t\t\t\t\t\t\t\tif (new_w < 100)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.imageEditter.css({\n\t\t\t\t\t\t\t\t\t\tmarginTop: '-7px',\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '-13px',\n\t\t\t\t\t\t\t\t\t\tfontSize: '9px',\n\t\t\t\t\t\t\t\t\t\tpadding: '3px 5px'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.imageEditter.css({\n\t\t\t\t\t\t\t\t\t\tmarginTop: '-11px',\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '-18px',\n\t\t\t\t\t\t\t\t\t\tfontSize: '11px',\n\t\t\t\t\t\t\t\t\t\tpadding: '7px 10px'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstart_x = Math.round(e.pageX - $image.eq(0).offset().left);\n\t\t\t\t\t\t\tstart_y = Math.round(e.pageY - $image.eq(0).offset().top);\n\n\t\t\t\t\t\t\tthis.sync()\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)).on('mouseup', function()\n\t\t\t\t\t{\n\t\t\t\t\t\tisResizing = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.$editor.on('keydown.redactor-image-delete', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tvar key = e.which;\n\n\t\t\t\t\tif (this.keyCode.BACKSPACE == key || this.keyCode.DELETE == key)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.bufferSet(false);\n\t\t\t\t\t\tthis.imageResizeHide(false);\n\t\t\t\t\t\tthis.imageRemove($image);\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\n\t\t\t\t$(document).on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));\n\t\t\t\tthis.$editor.on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));\n\t\t\t}, this));\n\t\t},\n\t\timageResizeControls: function($image)\n\t\t{\n\t\t\tvar imageBox = $('<span id=\"redactor-image-box\" data-redactor=\"verified\">');\n\t\t\timageBox.css({\n\t\t\t\tposition: 'relative',\n\t\t\t\tdisplay: 'inline-block',\n\t\t\t\tlineHeight: 0,\n\t\t\t\toutline: '1px dashed rgba(0, 0, 0, .6)',\n\t\t\t\t'float': $image.css('float')\n\t\t\t});\n\t\t\timageBox.attr('contenteditable', false);\n\n\t\t\tif ($image[0].style.margin != 'auto')\n\t\t\t{\n\t\t\t\timageBox.css({\n\t\t\t\t\tmarginTop: $image[0].style.marginTop,\n\t\t\t\t\tmarginBottom: $image[0].style.marginBottom,\n\t\t\t\t\tmarginLeft: $image[0].style.marginLeft,\n\t\t\t\t\tmarginRight: $image[0].style.marginRight\n\t\t\t\t});\n\n\t\t\t\t$image.css('margin', '');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageBox.css({ 'display': 'block', 'margin': 'auto' });\n\t\t\t}\n\n\t\t\t$image.css('opacity', .5).after(imageBox);\n\t\t\tthis.imageEditter = $('<span id=\"redactor-image-editter\" data-redactor=\"verified\">' + this.opts.curLang.edit + '</span>');\n\t\t\tthis.imageEditter.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\tzIndex: 5,\n\t\t\t\ttop: '50%',\n\t\t\t\tleft: '50%',\n\t\t\t\tmarginTop: '-11px',\n\t\t\t\tmarginLeft: '-18px',\n\t\t\t\tlineHeight: 1,\n\t\t\t\tbackgroundColor: '#000',\n\t\t\t\tcolor: '#fff',\n\t\t\t\tfontSize: '11px',\n\t\t\t\tpadding: '7px 10px',\n\t\t\t\tcursor: 'pointer'\n\t\t\t});\n\t\t\tthis.imageEditter.attr('contenteditable', false);\n\t\t\tthis.imageEditter.on('click', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.imageEdit($image);\n\t\t\t}, this));\n\t\t\timageBox.append(this.imageEditter);\n\t\t\tif (this.opts.imageResizable)\n\t\t\t{\n\t\t\t\tvar imageResizer = $('<span id=\"redactor-image-resizer\" data-redactor=\"verified\"></span>');\n\t\t\t\timageResizer.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tzIndex: 2,\n\t\t\t\t\tlineHeight: 1,\n\t\t\t\t\tcursor: 'nw-resize',\n\t\t\t\t\tbottom: '-4px',\n\t\t\t\t\tright: '-5px',\n\t\t\t\t\tborder: '1px solid #fff',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\twidth: '8px',\n\t\t\t\t\theight: '8px'\n\t\t\t\t});\n\t\t\t\timageResizer.attr('contenteditable', false);\n\t\t\t\timageBox.append(imageResizer);\n\n\t\t\t\timageBox.append($image);\n\n\t\t\t\treturn imageResizer;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageBox.append($image);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\timageThumbClick: function(e)\n\t\t{\n\t\t\tvar img = '<img id=\"image-marker\" src=\"' + $(e.target).attr('rel') + '\" alt=\"' + $(e.target).attr('title') + '\" />';\n\n\t\t\tvar parent = this.getParent();\n\t\t\tif (this.opts.paragraphy && $(parent).closest('li').length == 0) img = '<p>' + img + '</p>';\n\n\t\t\tthis.imageInsert(img, true);\n\t\t},\n\t\timageCallbackLink: function()\n\t\t{\n\t\t\tvar val = $('#redactor_file_link').val();\n\n\t\t\tif (val !== '')\n\t\t\t{\n\t\t\t\tvar data = '<img id=\"image-marker\" src=\"' + val + '\" />';\n\t\t\t\tif (this.opts.linebreaks === false) data = '<p>' + data + '</p>';\n\n\t\t\t\tthis.imageInsert(data, true);\n\n\t\t\t}\n\t\t\telse this.modalClose();\n\t\t},\n\t\timageCallback: function(data)\n\t\t{\n\t\t\tthis.imageInsert(data);\n\t\t},\n\t\timageInsert: function(json, link)\n\t\t{\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (json !== false)\n\t\t\t{\n\t\t\t\tvar html = '';\n\t\t\t\tif (link !== true)\n\t\t\t\t{\n\t\t\t\t\thtml = '<img id=\"image-marker\" src=\"' + json.image.url + '\" />';\n\n\t\t\t\t\tvar parent = this.getParent();\n\t\t\t\t\tif (this.opts.paragraphy && $(parent).closest('li').length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = '<p>' + html + '</p>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thtml = json;\n\t\t\t\t}\n\n\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\tvar image = $(this.$editor.find('img#image-marker'));\n\n\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\telse image = false;\n\n\t\t\t\tthis.sync();\n\t\t\t\tlink !== true && this.callback('imageUpload', image, json);\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.observeImages();\n\t\t},\n\t\tbuildProgressBar: function()\n\t\t{\n\t\t\tif ($('#redactor-progress').length != 0) return;\n\n\t\t\tthis.$progressBar = $('<div id=\"redactor-progress\"><span></span></div>');\n\t\t\t$(document.body).append(this.$progressBar);\n\t\t},\n\t\tshowProgressBar: function()\n\t\t{\n\t\t\tthis.buildProgressBar();\n\t\t\t$('#redactor-progress').fadeIn();\n\t\t},\n\t\thideProgressBar: function()\n\t\t{\n\t\t\t$('#redactor-progress').fadeOut(1500);\n\t\t},\n\t\tmodalTemplatesInit: function()\n\t\t{\n\t\t\t$.extend( this.opts,\n\t\t\t{\n\t\t\t\tmodal_file: String()\n\t\t\t\t+ '<section id=\"redactor-modal-file-insert\">'\n\t\t\t\t\t+ '<form id=\"redactorUploadFileForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.filename + '</label>'\n\t\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_filename\" class=\"redactor_input\" />'\n\t\t\t\t\t\t+ '<div style=\"margin-top: 7px;\">'\n\t\t\t\t\t\t\t+ '<input type=\"file\" id=\"redactor_file\" name=\"' + this.opts.fileUploadParam + '\" />'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t+ '</section>',\n\n\t\t\t\tmodal_image_edit: String()\n\t\t\t\t+ '<section id=\"redactor-modal-image-edit\">'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.title + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_file_alt\" class=\"redactor_input\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.link + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_file_link\" class=\"redactor_input\" />'\n\t\t\t\t\t+ '<label><input type=\"checkbox\" id=\"redactor_link_blank\"> ' + this.opts.curLang.link_new_tab + '</label>'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.image_position + '</label>'\n\t\t\t\t\t+ '<select id=\"redactor_form_image_align\">'\n\t\t\t\t\t\t+ '<option value=\"none\">' + this.opts.curLang.none + '</option>'\n\t\t\t\t\t\t+ '<option value=\"left\">' + this.opts.curLang.left + '</option>'\n\t\t\t\t\t\t+ '<option value=\"center\">' + this.opts.curLang.center + '</option>'\n\t\t\t\t\t\t+ '<option value=\"right\">' + this.opts.curLang.right + '</option>'\n\t\t\t\t\t+ '</select>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button id=\"redactor_image_delete_btn\" class=\"redactor_modal_btn redactor_modal_delete_btn\">' + this.opts.curLang._delete + '</button>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactorSaveBtn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.save + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_image: String()\n\t\t\t\t+ '<section id=\"redactor-modal-image-insert\">'\n\t\t\t\t\t+ '<div id=\"redactor_tabs\">'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-1\" class=\"redactor_tabs_act\">' + this.opts.curLang.upload + '</a>'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-2\">' + this.opts.curLang.choose + '</a>'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-3\">' + this.opts.curLang.link + '</a>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '<form id=\"redactorInsertImageForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">'\n\t\t\t\t\t\t+ '<div id=\"redactor_tab1\" class=\"redactor_tab\">'\n\t\t\t\t\t\t\t+ '<input type=\"file\" id=\"redactor_file\" name=\"' + this.opts.imageUploadParam + '\" />'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t\t+ '<div id=\"redactor_tab2\" class=\"redactor_tab\" style=\"display: none;\">'\n\t\t\t\t\t\t\t+ '<div id=\"redactor_image_box\"><span class=\"empty_list\">' + this.opts.curLang.empty_img_list + '</span></div>'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t\t+ '<div id=\"redactor_tab3\" class=\"redactor_tab\" style=\"display: none;\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.image_web_link + '</label>'\n\t\t\t\t\t\t+ '<input type=\"text\" name=\"redactor_file_link\" id=\"redactor_file_link\" class=\"redactor_input\"  /><br><br>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_modal_action_btn\" id=\"redactor_upload_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_link: String()\n\t\t\t\t+ '<section id=\"redactor-modal-link-insert\">'\n\t\t\t\t\t+ '<select id=\"redactor-predefined-links\" style=\"width: 99.5%; display: none;\"></select>'\n\t\t\t\t\t+ '<label>URL</label>'\n\t\t\t\t\t+ '<input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.text + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url_text\" />'\n\t\t\t\t\t+ '<label><input type=\"checkbox\" id=\"redactor_link_blank\"> ' + this.opts.curLang.link_new_tab + '</label>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_link_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_table: String()\n\t\t\t\t+ '<section id=\"redactor-modal-table-insert\">'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.rows + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" size=\"5\" value=\"2\" id=\"redactor_table_rows\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.columns + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" size=\"5\" value=\"3\" id=\"redactor_table_columns\" />'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_table_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_video: String()\n\t\t\t\t+ '<section id=\"redactor-modal-video-insert\">'\n\t\t\t\t\t+ '<form id=\"redactorInsertVideoForm\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.video_html_code + '</label>'\n\t\t\t\t\t\t+ '<textarea id=\"redactor_insert_video_area\" style=\"width: 99%; height: 160px;\"></textarea>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_video_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>'\n\n\t\t\t});\n\t\t},\n\t\tmodalInit: function(title, content, width, callback)\n\t\t{\n\t\t\tthis.modalSetOverlay();\n\n\t\t\tthis.$redactorModalWidth = width;\n\t\t\tthis.$redactorModal = $('#redactor_modal');\n\n\t\t\tif (!this.$redactorModal.length)\n\t\t\t{\n\t\t\t\tthis.$redactorModal = $('<div id=\"redactor_modal\" style=\"display: none;\" />');\n\t\t\t\tthis.$redactorModal.append($('<div id=\"redactor_modal_close\">&times;</div>'));\n\t\t\t\tthis.$redactorModal.append($('<header id=\"redactor_modal_header\" />'));\n\t\t\t\tthis.$redactorModal.append($('<div id=\"redactor_modal_inner\" />'));\n\t\t\t\tthis.$redactorModal.appendTo(document.body);\n\t\t\t}\n\n\t\t\t$('#redactor_modal_close').on('click', $.proxy(this.modalClose, this));\n\t\t\t$(document).on('keyup', $.proxy(this.modalCloseHandler, this));\n\t\t\tthis.$editor.on('keyup', $.proxy(this.modalCloseHandler, this));\n\n\t\t\tthis.modalSetContent(content);\n\t\t\tthis.modalSetTitle(title);\n\t\t\tthis.modalSetDraggable();\n\t\t\tthis.modalLoadTabs();\n\t\t\tthis.modalOnCloseButton();\n\t\t\tthis.modalSetButtonsWidth();\n\n\t\t\tthis.saveModalScroll = this.document.body.scrollTop;\n\t\t\tif (this.opts.autoresize === false)\n\t\t\t{\n\t\t\t\tthis.saveModalScroll = this.$editor.scrollTop();\n\t\t\t}\n\n\t\t\tif (this.isMobile() === false) this.modalShowOnDesktop();\n\t\t\telse this.modalShowOnMobile();\n\t\t\tif (typeof callback === 'function')\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tthis.callback('modalOpened', this.$redactorModal);\n\n\t\t\t}, this), 11);\n\t\t\t$(document).off('focusin.modal');\n\t\t\tthis.$redactorModal.find('input[type=text]').on('keypress', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (e.which === 13)\n\t\t\t\t{\n\t\t\t\t\tthis.$redactorModal.find('.redactor_modal_action_btn').trigger('click');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\treturn this.$redactorModal;\n\n\t\t},\n\t\tmodalShowOnDesktop: function()\n\t\t{\n\t\t\tthis.$redactorModal.css({\n\t\t\t\tposition: 'fixed',\n\t\t\t\ttop: '-2000px',\n\t\t\t\tleft: '50%',\n\t\t\t\twidth: this.$redactorModalWidth + 'px',\n\t\t\t\tmarginLeft: '-' + (this.$redactorModalWidth / 2) + 'px'\n\t\t\t}).show();\n\n\t\t\tthis.modalSaveBodyOveflow = $(document.body).css('overflow');\n\t\t\t$(document.body).css('overflow', 'hidden');\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tvar height = this.$redactorModal.outerHeight();\n\t\t\t\tthis.$redactorModal.css({\n\t\t\t\t\ttop: '50%',\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\tminHeight: 'auto',\n\t\t\t\t\tmarginTop: '-' + (height + 10) / 2 + 'px'\n\t\t\t\t});\n\t\t\t}, this), 15);\n\t\t},\n\t\tmodalShowOnMobile: function()\n\t\t{\n\t\t\tthis.$redactorModal.css({\n\t\t\t\tposition: 'fixed',\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: '0',\n\t\t\t\tmargin: '0',\n\t\t\t\tminHeight: '300px'\n\t\t\t}).show();\n\t\t},\n\t\tmodalSetContent: function(content)\n\t\t{\n\t\t\tthis.modalcontent = false;\n\t\t\tif (content.indexOf('#') == 0)\n\t\t\t{\n\t\t\t\tthis.modalcontent = $(content);\n\t\t\t\t$('#redactor_modal_inner').empty().append(this.modalcontent.html());\n\t\t\t\tthis.modalcontent.html('');\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('#redactor_modal_inner').empty().append(content);\n\t\t\t}\n\t\t},\n\t\tmodalSetTitle: function(title)\n\t\t{\n\t\t\tthis.$redactorModal.find('#redactor_modal_header').html(title);\n\t\t},\n\t\tmodalSetButtonsWidth: function(){},\n\t\tmodalOnCloseButton: function()\n\t\t{\n\t\t\tthis.$redactorModal.find('.redactor_btn_modal_close').on('click', $.proxy(this.modalClose, this));\n\t\t},\n\t\tmodalSetOverlay: function()\n\t\t{\n\t\t\tif (this.opts.modalOverlay)\n\t\t\t{\n\t\t\t\tthis.$redactorModalOverlay = $('#redactor_modal_overlay');\n\t\t\t\tif (!this.$redactorModalOverlay.length)\n\t\t\t\t{\n\t\t\t\t\tthis.$redactorModalOverlay = $('<div id=\"redactor_modal_overlay\" style=\"display: none;\"></div>');\n\t\t\t\t\t$('body').prepend(this.$redactorModalOverlay);\n\t\t\t\t}\n\n\t\t\t\tthis.$redactorModalOverlay.show().on('click', $.proxy(this.modalClose, this));\n\t\t\t}\n\t\t},\n\t\tmodalSetDraggable: function()\n\t\t{\n\t\t\tif (typeof $.fn.draggable !== 'undefined')\n\t\t\t{\n\t\t\t\tthis.$redactorModal.draggable({ handle: '#redactor_modal_header' });\n\t\t\t\tthis.$redactorModal.find('#redactor_modal_header').css('cursor', 'move');\n\t\t\t}\n\t\t},\n\t\tmodalLoadTabs: function()\n\t\t{\n\t\t\tvar $redactor_tabs = $('#redactor_tabs');\n\t\t\tif (!$redactor_tabs.length) return false;\n\n\t\t\tvar that = this;\n\t\t\t$redactor_tabs.find('a').each(function(i, s)\n\t\t\t{\n\t\t\t\ti++;\n\t\t\t\t$(s).on('click', function(e)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t$redactor_tabs.find('a').removeClass('redactor_tabs_act');\n\t\t\t\t\t$(this).addClass('redactor_tabs_act');\n\t\t\t\t\t$('.redactor_tab').hide();\n\t\t\t\t\t$('#redactor_tab' + i ).show();\n\t\t\t\t\t$('#redactor_tab_selected').val(i);\n\n\t\t\t\t\tif (that.isMobile() === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar height = that.$redactorModal.outerHeight();\n\t\t\t\t\t\tthat.$redactorModal.css('margin-top', '-' + (height + 10) / 2 + 'px');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t},\n\t\tmodalCloseHandler: function(e)\n\t\t{\n\t\t\tif (e.keyCode === this.keyCode.ESC)\n\t\t\t{\n\t\t\t\tthis.modalClose();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tmodalClose: function()\n\t\t{\n\t\t\t$('#redactor_modal_close').off('click', this.modalClose);\n\t\t\t$('#redactor_modal').fadeOut('fast', $.proxy(function()\n\t\t\t{\n\t\t\t\tvar redactorModalInner = $('#redactor_modal_inner');\n\n\t\t\t\tif (this.modalcontent !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.modalcontent.html(redactorModalInner.html());\n\t\t\t\t\tthis.modalcontent = false;\n\t\t\t\t}\n\n\t\t\t\tredactorModalInner.html('');\n\n\t\t\t\tif (this.opts.modalOverlay)\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_modal_overlay').hide().off('click', this.modalClose);\n\t\t\t\t}\n\n\t\t\t\t$(document).off('keyup', this.modalCloseHandler);\n\t\t\t\tthis.$editor.off('keyup', this.modalCloseHandler);\n\n\t\t\t\tthis.selectionRestore();\n\t\t\t\tif (this.opts.autoresize && this.saveModalScroll)\n\t\t\t\t{\n\t\t\t\t\t$(this.document.body).scrollTop(this.saveModalScroll);\n\t\t\t\t}\n\t\t\t\telse if (this.opts.autoresize === false && this.saveModalScroll)\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.scrollTop(this.saveModalScroll);\n\t\t\t\t}\n\n\t\t\t\tthis.callback('modalClosed');\n\n\t\t\t}, this));\n\t\t\tif (this.isMobile() === false)\n\t\t\t{\n\t\t\t\t$(document.body).css('overflow', this.modalSaveBodyOveflow ? this.modalSaveBodyOveflow : 'visible');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tmodalSetTab: function(num)\n\t\t{\n\t\t\t$('.redactor_tab').hide();\n\t\t\t$('#redactor_tabs').find('a').removeClass('redactor_tabs_act').eq(num - 1).addClass('redactor_tabs_act');\n\t\t\t$('#redactor_tab' + num).show();\n\t\t},\n\t\ts3handleFileSelect: function(e)\n\t\t{\n\t\t\tvar files = e.target.files;\n\n\t\t\tfor (var i = 0, f; f = files[i]; i++)\n\t\t\t{\n\t\t\t\tthis.s3uploadFile(f);\n\t\t\t}\n\t\t},\n\t\ts3uploadFile: function(file)\n\t\t{\n\t\t\tthis.s3executeOnSignedUrl(file, $.proxy(function(signedURL)\n\t\t\t{\n\t\t\t\tthis.s3uploadToS3(file, signedURL);\n\t\t\t}, this));\n\t\t},\n\t\ts3executeOnSignedUrl: function(file, callback)\n\t\t{\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\tvar mark = '?';\n\t\t\tif (this.opts.s3.search(/\\?/) != '-1') mark = '&';\n\n\t\t\txhr.open('GET', this.opts.s3 + mark + 'name=' + file.name + '&type=' + file.type, true);\n\t\t\tif (xhr.overrideMimeType) xhr.overrideMimeType('text/plain; charset=x-user-defined');\n\n\t\t\tvar that = this;\n\t\t\txhr.onreadystatechange = function(e)\n\t\t\t{\n\t\t\t\tif (this.readyState == 4 && this.status == 200)\n\t\t\t\t{\n\t\t\t\t\tthat.showProgressBar();\n\t\t\t\t\tcallback(decodeURIComponent(this.responseText));\n\t\t\t\t}\n\t\t\t\telse if(this.readyState == 4 && this.status != 200)\n\t\t\t\t{\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.send();\n\t\t},\n\t\ts3createCORSRequest: function(method, url)\n\t\t{\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\tif (\"withCredentials\" in xhr)\n\t\t\t{\n\t\t\t\txhr.open(method, url, true);\n\t\t\t}\n\t\t\telse if (typeof XDomainRequest != \"undefined\")\n\t\t\t{\n\t\t\t\txhr = new XDomainRequest();\n\t\t\t\txhr.open(method, url);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\txhr = null;\n\t\t\t}\n\n\t\t\treturn xhr;\n\t\t},\n\t\ts3uploadToS3: function(file, url)\n\t\t{\n\t\t\tvar xhr = this.s3createCORSRequest('PUT', url);\n\t\t\tif (!xhr)\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\txhr.onload = $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tif (xhr.status == 200)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\t\t\tvar s3image = url.split('?');\n\n\t\t\t\t\t\tif (!s3image[0])\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t return false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\t\tvar html = '';\n\t\t\t\t\t\thtml = '<img id=\"image-marker\" src=\"' + s3image[0] + '\" />';\n\t\t\t\t\t\tif (this.opts.paragraphy) html = '<p>' + html + '</p>';\n\n\t\t\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\t\t\tvar image = $(this.$editor.find('img#image-marker'));\n\n\t\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\t\telse image = false;\n\n\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\tthis.callback('imageUpload', image, false);\n\n\t\t\t\t\t\tthis.modalClose();\n\t\t\t\t\t\tthis.observeImages();\n\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\txhr.onerror = function()\n\t\t\t\t{\n\n\t\t\t\t};\n\n\t\t\t\txhr.upload.onprogress = function(e)\n\t\t\t\t{\n\t\t\t\t\t/*\n\t\t\t\t\tif (e.lengthComputable)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar percentLoaded = Math.round((e.loaded / e.total) * 100);\n\t\t\t\t\t\tsetProgress(percentLoaded, percentLoaded == 100 ? 'Finalizing.' : 'Uploading.');\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t};\n\n\t\t\t\txhr.setRequestHeader('Content-Type', file.type);\n\t\t\t\txhr.setRequestHeader('x-amz-acl', 'public-read');\n\n\t\t\t\txhr.send(file);\n\t\t\t}\n\t\t},\n\t\tuploadInit: function(el, options)\n\t\t{\n\t\t\tthis.uploadOptions = {\n\t\t\t\turl: false,\n\t\t\t\tsuccess: false,\n\t\t\t\terror: false,\n\t\t\t\tstart: false,\n\t\t\t\ttrigger: false,\n\t\t\t\tauto: false,\n\t\t\t\tinput: false\n\t\t\t};\n\n\t\t\t$.extend(this.uploadOptions, options);\n\n\t\t\tvar $el = $('#' + el);\n\t\t\tif ($el.length && $el[0].tagName === 'INPUT')\n\t\t\t{\n\t\t\t\tthis.uploadOptions.input = $el;\n\t\t\t\tthis.el = $($el[0].form);\n\t\t\t}\n\t\t\telse this.el = $el;\n\n\t\t\tthis.element_action = this.el.attr('action');\n\t\t\tif (this.uploadOptions.auto)\n\t\t\t{\n\t\t\t\t$(this.uploadOptions.input).change($.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tthis.el.submit(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.uploadSubmit(e);\n\n\t\t\t\t}, this));\n\n\t\t\t}\n\t\t\telse if (this.uploadOptions.trigger)\n\t\t\t{\n\t\t\t\t$('#' + this.uploadOptions.trigger).on('click', $.proxy(this.uploadSubmit, this));\n\t\t\t}\n\t\t},\n\t\tuploadSubmit: function(e)\n\t\t{\n\t\t\tthis.showProgressBar();\n\t\t\tthis.uploadForm(this.element, this.uploadFrame());\n\t\t},\n\t\tuploadFrame: function()\n\t\t{\n\t\t\tthis.id = 'f' + Math.floor(Math.random() * 99999);\n\n\t\t\tvar d = this.document.createElement('div');\n\t\t\tvar iframe = '<iframe style=\"display:none\" id=\"' + this.id + '\" name=\"' + this.id + '\"></iframe>';\n\n\t\t\td.innerHTML = iframe;\n\t\t\t$(d).appendTo(\"body\");\n\t\t\tif (this.uploadOptions.start) this.uploadOptions.start();\n\n\t\t\t$( '#' + this.id ).one('load', $.proxy(this.uploadLoaded, this));\n\n\t\t\treturn this.id;\n\t\t},\n\t\tuploadForm: function(f, name)\n\t\t{\n\t\t\tif (this.uploadOptions.input)\n\t\t\t{\n\t\t\t\tvar formId = 'redactorUploadForm' + this.id,\n\t\t\t\t\tfileId = 'redactorUploadFile' + this.id;\n\n\t\t\t\tthis.form = $('<form  action=\"' + this.uploadOptions.url + '\" method=\"POST\" target=\"' + name + '\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\" />');\n\t\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t\t{\n\t\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\n\t\t\t\t\t\tvar hidden = $('<input/>', {\n\t\t\t\t\t\t\t'type': \"hidden\",\n\t\t\t\t\t\t\t'name': k,\n\t\t\t\t\t\t\t'value': v\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$(this.form).append(hidden);\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\tvar oldElement = this.uploadOptions.input;\n\t\t\t\tvar newElement = $(oldElement).clone();\n\n\t\t\t\t$(oldElement).attr('id', fileId).before(newElement).appendTo(this.form);\n\n\t\t\t\t$(this.form).css('position', 'absolute')\n\t\t\t\t\t\t.css('top', '-2000px')\n\t\t\t\t\t\t.css('left', '-2000px')\n\t\t\t\t\t\t.appendTo('body');\n\n\t\t\t\tthis.form.submit();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tf.attr('target', name)\n\t\t\t\t\t.attr('method', 'POST')\n\t\t\t\t\t.attr('enctype', 'multipart/form-data')\n\t\t\t\t\t.attr('action', this.uploadOptions.url);\n\n\t\t\t\tthis.element.submit();\n\t\t\t}\n\t\t},\n\t\tuploadLoaded: function()\n\t\t{\n\t\t\tvar i = $( '#' + this.id)[0], d;\n\n\t\t\tif (i.contentDocument) d = i.contentDocument;\n\t\t\telse if (i.contentWindow) d = i.contentWindow.document;\n\t\t\telse d = window.frames[this.id].document;\n\t\t\tif (this.uploadOptions.success)\n\t\t\t{\n\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\tif (typeof d !== 'undefined')\n\t\t\t\t{\n\n\t\t\t\t\tvar rawString = d.body.innerHTML;\n\t\t\t\t\tvar jsonString = rawString.match(/\\{(.|\\n)*\\}/)[0];\n\n\t\t\t\t\tjsonString = jsonString.replace(/^\\[/, '');\n\t\t\t\t\tjsonString = jsonString.replace(/\\]$/, '');\n\n\t\t\t\t\tvar json = $.parseJSON(jsonString);\n\n\t\t\t\t\tif (typeof json.error == 'undefined') { this.uploadOptions.success(json); }\n\t\t\t\t\telse\n\t\t\t\t\t{\n                        console.log(json);\n\t\t\t\t\t\tthis.uploadOptions.error(this, json);\n\t\t\t\t\t\tthis.modalClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.modalClose();\n\t\t\t\t\talert('Upload failed!');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.el.attr('action', this.element_action);\n\t\t\tthis.el.attr('target', '');\n\t\t},\n\t\tdraguploadInit: function (el, options)\n\t\t{\n\t\t\tthis.draguploadOptions = $.extend({\n\t\t\t\turl: false,\n\t\t\t\tsuccess: false,\n\t\t\t\terror: false,\n\t\t\t\tpreview: false,\n\t\t\t\tuploadFields: false,\n\t\t\t\ttext: this.opts.curLang.drop_file_here,\n\t\t\t\tatext: this.opts.curLang.or_choose,\n\t\t\t\tuploadParam: false\n\t\t\t}, options);\n\n\t\t\tif (window.FormData === undefined) return false;\n\n\t\t\tthis.droparea = $('<div class=\"redactor_droparea\"></div>');\n\t\t\tthis.dropareabox = $('<div class=\"redactor_dropareabox\">' + this.draguploadOptions.text + '</div>');\n\t\t\tthis.dropalternative = $('<div class=\"redactor_dropalternative\">' + this.draguploadOptions.atext + '</div>');\n\n\t\t\tthis.droparea.append(this.dropareabox);\n\n\t\t\t$(el).before(this.droparea);\n\t\t\t$(el).before(this.dropalternative);\n\t\t\tthis.dropareabox.on('dragover', $.proxy(function()\n\t\t\t{\n\t\t\t\treturn this.draguploadOndrag();\n\n\t\t\t}, this));\n\t\t\tthis.dropareabox.on('dragleave', $.proxy(function()\n\t\t\t{\n\t\t\t\treturn this.draguploadOndragleave();\n\n\t\t\t}, this));\n\t\t\tthis.dropareabox.get(0).ondrop = $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.dropareabox.removeClass('hover').addClass('drop');\n\t\t\t\tthis.showProgressBar();\n                                for(var nmb in e.dataTransfer.files){\n                                    if(!e.dataTransfer.files.hasOwnProperty(nmb))continue;\n                                    this.dragUploadAjax(this.draguploadOptions.url, e.dataTransfer.files[nmb], false, e, this.draguploadOptions.uploadParam);\n                                }\n\n\t\t\t}, this );\n\t\t},\n\t\tdragUploadAjax: function(url, file, directupload, e, uploadParam)\n\t\t{\n\t\t\tif (!directupload)\n\t\t\t{\n\t\t\t\tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\tif (xhr.upload)\n\t\t\t\t{\n\t\t\t\t\txhr.upload.addEventListener('progress', $.proxy(this.uploadProgress, this), false);\n\t\t\t\t}\n\n\t\t\t\t$.ajaxSetup({\n\t\t\t\t  xhr: function () { return xhr; }\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.callback('drop', e);\n\n\t\t\tvar fd = new FormData();\n\t\t\tif (uploadParam !== false)\n\t\t\t{\n\t\t\t\tfd.append(uploadParam, file);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfd.append('file', file);\n\t\t\t}\n\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t{\n\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t{\n\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\t\t\t\t\tfd.append(k, v);\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: url,\n\t\t\t\tdataType: 'html',\n                                async: false,\n\t\t\t\tdata: fd,\n\t\t\t\tcache: false,\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tsuccess: $.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tdata = data.replace(/^\\[/, '');\n\t\t\t\t\tdata = data.replace(/\\]$/, '');\n\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\n\t\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\t\tif (directupload)\n\t\t\t\t\t{\n\t\t\t\t\t    var $img = $('<img>');\n\t\t\t\t\t\t$img.attr('src', json.image.url).attr('id', 'drag-image-marker');\n\n\t\t\t\t\t\tthis.insertNodeToCaretPositionFromPoint(e, $img[0]);\n\n\t\t\t\t\t\tvar image = $(this.$editor.find('img#drag-image-marker'));\n\t\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\t\telse image = false;\n\n\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\tthis.observeImages();\n\t\t\t\t\t\tif (image) this.callback('imageUpload', image, json);\n\t\t\t\t\t\tif (typeof json.error !== 'undefined') this.callback('imageUploadError', json);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof json.error == 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadOptions.success(json);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadOptions.error(this, json);\n\t\t\t\t\t\t\tthis.draguploadOptions.success(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}, this)\n\t\t\t});\n\t\t},\n\t\tdraguploadOndrag: function()\n\t\t{\n\t\t\tthis.dropareabox.addClass('hover');\n\t\t\treturn false;\n\t\t},\n\t\tdraguploadOndragleave: function()\n\t\t{\n\t\t\tthis.dropareabox.removeClass('hover');\n\t\t\treturn false;\n\t\t},\n\t\tuploadProgress: function(e, text)\n\t\t{\n\t\t\tvar percent = e.loaded ? parseInt(e.loaded / e.total * 100, 10) : e;\n\t\t\tthis.dropareabox.text('Loading ' + percent + '% ' + (text || ''));\n\t\t},\n\t\tisMobile: function()\n\t\t{\n\t\t\treturn /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);\n\t\t},\n\t\tisIPad: function()\n\t\t{\n\t\t\treturn /iPad/.test(navigator.userAgent);\n\t\t},\n\t\tnormalize: function(str)\n\t\t{\n\t\t\tif (typeof(str) === 'undefined') return 0;\n\t\t\treturn parseInt(str.replace('px',''), 10);\n\t\t},\n\t\touterHtml: function(el)\n\t\t{\n\t\t\treturn $('<div>').append($(el).eq(0).clone()).html();\n\t\t},\n\t\tstripHtml: function(html)\n\t\t{\n\t\t\tvar tmp = document.createElement(\"DIV\");\n\t\t\ttmp.innerHTML = html;\n\t\t\treturn tmp.textContent || tmp.innerText || \"\";\n\t\t},\n\t\tisString: function(obj)\n\t\t{\n\t\t\treturn Object.prototype.toString.call(obj) == '[object String]';\n\t\t},\n\t\tisEmpty: function(html)\n\t\t{\n\t\t\thtml = html.replace(/&#x200b;|<br>|<br\\/>|&nbsp;/gi, '');\n\t\t\thtml = html.replace(/\\s/g, '');\n\t\t\thtml = html.replace(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i, '');\n\n\t\t\treturn html == '';\n\t\t},\n\t\tgetInternetExplorerVersion: function()\n\t\t{\n\t\t\tvar rv = false;\n\t\t\tif (navigator.appName == 'Microsoft Internet Explorer')\n\t\t\t{\n\t\t\t\tvar ua = navigator.userAgent;\n\t\t\t\tvar re  = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n\t\t\t\tif (re.exec(ua) != null)\n\t\t\t\t{\n\t\t\t\t\trv = parseFloat(RegExp.$1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn rv;\n\t\t},\n\t\tisIe11: function()\n\t\t{\n\t\t\treturn !!navigator.userAgent.match(/Trident\\/7\\./);\n\t\t},\n\t\tbrowser: function(browser)\n\t\t{\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\n\t\t\tvar match = /(opr)[\\/]([\\w.]+)/.exec( ua ) ||\n            /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(webkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(msie) ([\\w.]+)/.exec( ua ) ||\n            ua.indexOf(\"trident\") >= 0 && /(rv)(?::| )([\\w.]+)/.exec( ua ) ||\n            ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\n            [];\n\n\t\t\tif (browser == 'version') return match[2];\n\t\t\tif (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'webkit');\n\t\t\tif (match[1] == 'rv') return browser == 'msie';\n\t\t\tif (match[1] == 'opr') return browser == 'webkit';\n\n\t\t\treturn browser == match[1];\n\n\t\t},\n\t\toldIE: function()\n\t\t{\n\t\t\tif (this.browser('msie') && parseInt(this.browser('version'), 10) < 9) return true;\n\t\t\treturn false;\n\t\t},\n\t\tgetFragmentHtml: function (fragment)\n\t\t{\n\t\t\tvar cloned = fragment.cloneNode(true);\n\t\t\tvar div = this.document.createElement('div');\n\n\t\t\tdiv.appendChild(cloned);\n\t\t\treturn div.innerHTML;\n\t\t},\n\t\textractContent: function()\n\t\t{\n\t\t\tvar node = this.$editor[0];\n\t\t\tvar frag = this.document.createDocumentFragment();\n\t\t\tvar child;\n\n\t\t\twhile ((child = node.firstChild))\n\t\t\t{\n\t\t\t\tfrag.appendChild(child);\n\t\t\t}\n\n\t\t\treturn frag;\n\t\t},\n\t\tisParentRedactor: function(el)\n\t\t{\n\t\t\tif (!el) return false;\n\t\t\tif (this.opts.iframe) return el;\n\n\t\t\tif ($(el).parents('div.redactor_editor').length == 0 || $(el).hasClass('redactor_editor')) return false;\n\t\t\telse return el;\n\t\t},\n\t\tcurrentOrParentIs: function(tagName)\n\t\t{\n\t\t\tvar parent = this.getParent(), current = this.getCurrent();\n\t\t\treturn parent && parent.tagName === tagName ? parent : current && current.tagName === tagName ? current : false;\n\t\t},\n\t\tisEndOfElement: function()\n\t\t{\n\t\t\tvar current = this.getBlock();\n\t\t\tvar offset = this.getCaretOffset(current);\n\n\t\t\tvar text = $.trim($(current).text()).replace(/\\n\\r\\n/g, '');\n\n\t\t\tvar len = text.length;\n\n\t\t\tif (offset == len) return true;\n\t\t\telse return false;\n\t\t},\n\t\tisFocused: function()\n\t\t{\n\t\t\tvar el, sel = this.getSelection();\n\n\t\t\tif (sel && sel.rangeCount && sel.rangeCount > 0) el = sel.getRangeAt(0).startContainer;\n\t\t\tif (!el) return false;\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\tif (this.getCaretOffsetRange().equals()) return !this.$editor.is(el);\n\t\t\t\telse return true;\n\t\t\t}\n\n\t\t\treturn $(el).closest('div.redactor_editor').length != 0;\n\t\t},\n\t\tremoveEmptyAttr: function (el, attr)\n\t\t{\n\t\t\tif ($(el).attr(attr) == '') $(el).removeAttr(attr);\n\t\t},\n\t\tremoveFromArrayByValue: function(array, value)\n\t\t{\n\t\t\tvar index = null;\n\n\t\t\twhile ((index = array.indexOf(value)) !== -1)\n\t\t\t{\n\t\t\t\tarray.splice(index, 1);\n\t\t\t}\n\n\t\t\treturn array;\n\t\t}\n\n\t};\n\tRedactor.prototype.init.prototype = Redactor.prototype;\n\t$.Redactor.fn.formatLinkify = function(protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize)\n\t{\n\t\tvar url = /(((https?|ftps?):\\/\\/)|www[.][^\\s])(.+?\\..+?)([.),]?)(\\s|\\.\\s+|\\)|$)/gi,\n\t\t\trProtocol = /(https?|ftp):\\/\\//i,\n\t\t\turlImage = /(https?:\\/\\/.*\\.(?:png|jpg|jpeg|gif))/gi;\n\n\t\tvar childNodes = (this.$editor ? this.$editor.get(0) : this).childNodes, i = childNodes.length;\n\t\twhile (i--)\n\t\t{\n\t\t\tvar n = childNodes[i];\n\t\t\tif (n.nodeType === 3)\n\t\t\t{\n\t\t\t\tvar html = n.nodeValue;\n\t\t\t\tif (convertVideoLinks && html)\n\t\t\t\t{\n\t\t\t\t\tvar iframeStart = '<iframe width=\"500\" height=\"281\" src=\"',\n\t\t\t\t\t\tiframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n\t\t\t\t\tif (html.match(reUrlYoutube))\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(reUrlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\n\t\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t\t}\n\t\t\t\t\telse if (html.match(reUrlVimeo))\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(reUrlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\n\t\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (convertImageLinks && html && html.match(urlImage))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(urlImage, '<img src=\"$1\">');\n\n\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t}\n\t\t\t\tif (convertLinks && html && html.match(url))\n\t\t\t\t{\n\t\t\t\t\tvar matches = html.match(url);\n\n\t\t\t\t\tfor (var i in matches)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar href = matches[i];\n\t\t\t\t\t\tvar text = href;\n\n\t\t\t\t\t\tvar space = '';\n\t\t\t\t\t\tif (href.match(/\\s$/) !== null) space = ' ';\n\n\t\t\t\t\t\tvar addProtocol = protocol;\n\t\t\t\t\t\tif (href.match(rProtocol) !== null) addProtocol = '';\n\n\t\t\t\t\t\tif (text.length > linkSize) text = text.substring(0, linkSize) + '...';\n\n\t\t\t\t\t\ttext = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tTo handle URLs which may have $ characters in them, need to escape $ -> $$ to prevent $1 from getting treated as a backreference.\n\t\t\t\t\t\t\tSee http://gotofritz.net/blog/code-snippets/escaping-in-replace-strings-in-javascript/\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tvar escapedBackReferences = text.replace('$', '$$$');\n\n\t\t\t\t\t\thtml = html.replace(href, '<a href=\\\"' + addProtocol + $.trim(href) + '\\\">' + $.trim(escapedBackReferences) + '</a>' + space);\n\t\t\t\t\t}\n\n\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (n.nodeType === 1 && !/^(a|button|textarea)$/i.test(n.tagName))\n\t\t\t{\n\t\t\t\t$.Redactor.fn.formatLinkify.call(n, protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize);\n\t\t\t}\n\t\t}\n\t};\n\n})(jQuery);", "!function($){var uuid=0;\"use strict\";var Range=function(t){return this[0]=t.startOffset,this[1]=t.endOffset,this.range=t,this};Range.prototype.equals=function(){return this[0]===this[1]};var reUrlYoutube=/https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,reUrlVimeo=/https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/,reUrlFacebook=/^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:facebook\\.com(?:\\/[^\\/]+\\/videos\\/|\\/video\\.php\\?v=))([0-9]+)(?:.+)?$/,reUrlRutube=/^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru\\/video\\/)([a-z0-9]+)(?:.+)?$/;function Redactor(t,e){return new Redactor.prototype.init(t,e)}$.fn.redactor=function(t){var e=[],s=Array.prototype.slice.call(arguments,1);return(\"string\"==typeof t?this.each(function(){var o=$.data(this,\"redactor\");if(!(void 0!==o&&$.isFunction(o[t])))return $.error('No such method \"'+t+'\" for Redactor');var r=o[t].apply(o,s);void 0!==r&&r!==o&&e.push(r)}):this.each(function(){$.data(this,\"redactor\")||$.data(this,\"redactor\",Redactor(this,t))}),0===e.length)?this:1===e.length?e[0]:e},$.Redactor=Redactor,$.Redactor.VERSION=\"9.2.6\",$.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:\"en\",direction:\"ltr\",placeholder:!1,typewriter:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,cleanSpaces:!0,cleanFontTag:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:{\"ctrl+m, meta+m\":\"this.execCommand('removeFormat', false)\",\"ctrl+b, meta+b\":\"this.execCommand('bold', false)\",\"ctrl+i, meta+i\":\"this.execCommand('italic', false)\",\"ctrl+h, meta+h\":\"this.execCommand('superscript', false)\",\"ctrl+l, meta+l\":\"this.execCommand('subscript', false)\",\"ctrl+k, meta+k\":\"this.linkShow()\",\"ctrl+shift+7\":\"this.execCommand('insertorderedlist', false)\",\"ctrl+shift+8\":\"this.execCommand('insertunorderedlist', false)\"},shortcutsAdd:!1,autosave:!1,autosaveInterval:60,plugins:!1,linkProtocol:\"http://\",linkNofollow:!1,linkSize:50,predefinedLinks:!1,imageFloatMargin:\"10px\",imageGetJson:!1,dragUpload:!0,imageTabLink:!0,imageUpload:!1,imageUploadParam:\"file\",imageResizable:!0,fileUpload:!1,fileUploadParam:\"file\",clipboardUpload:!0,clipboardUploadUrl:!1,smilesUrl:\"\",dnbImageTypes:[\"image/png\",\"image/jpeg\",\"image/gif\"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:[\"formatting\",\"bold\",\"italic\",\"deleted\",\"unorderedlist\",\"orderedlist\",\"outdent\",\"indent\"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,toolbarOverflow:!1,buttonSource:!0,buttons:[\"html\",\"undo\",\"redo\",\"formatting\",\"bold\",\"italic\",\"deleted\",\"unorderedlist\",\"orderedlist\",\"outdent\",\"indent\",\"image\",\"video\",\"file\",\"table\",\"link\",\"alignment\",\"|\",\"horizontalrule\"],buttonsHideOnMobile:[],activeButtons:[\"deleted\",\"italic\",\"bold\",\"underline\",\"unorderedlist\",\"orderedlist\",\"alignleft\",\"aligncenter\",\"alignright\",\"justify\",\"table\"],activeButtonsStates:{b:\"bold\",strong:\"bold\",i:\"italic\",em:\"italic\",del:\"deleted\",strike:\"deleted\",ul:\"unorderedlist\",ol:\"orderedlist\",u:\"underline\",tr:\"table\",td:\"table\",table:\"table\"},formattingTags:[\"p\",\"blockquote\",\"code\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:[\"html\",\"head\",\"link\",\"body\",\"meta\",\"script\",\"style\",\"applet\"],boldTag:\"strong\",italicTag:\"em\",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:\"<p>&#x200b;</p>\",invisibleSpace:\"&#x200b;\",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:[\"P\",\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"DD\",\"DL\",\"DT\",\"DIV\",\"TD\",\"BLOCKQUOTE\",\"OUTPUT\",\"FIGCAPTION\",\"ADDRESS\",\"SECTION\",\"HEADER\",\"FOOTER\",\"ASIDE\",\"ARTICLE\"],ownLine:[\"area\",\"body\",\"head\",\"hr\",\"i?frame\",\"link\",\"meta\",\"noscript\",\"style\",\"script\",\"table\",\"tbody\",\"thead\",\"tfoot\"],contOwnLine:[\"li\",\"dt\",\"dt\",\"h[1-6]\",\"option\",\"script\"],newLevel:[\"blockquote\",\"div\",\"dl\",\"fieldset\",\"form\",\"frameset\",\"map\",\"ol\",\"p\",\"code\",\"select\",\"td\",\"th\",\"tr\",\"ul\"],blockLevelElements:[\"P\",\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"DD\",\"DL\",\"DT\",\"DIV\",\"LI\",\"BLOCKQUOTE\",\"OUTPUT\",\"FIGCAPTION\",\"CODE\",\"ADDRESS\",\"SECTION\",\"HEADER\",\"FOOTER\",\"ASIDE\",\"ARTICLE\",\"TD\"],langs:{en:{html:\"HTML\",video:\"Insert Video\",image:\"Insert Image\",table:\"Table\",link:\"Link\",link_insert:\"Insert link\",link_edit:\"Edit link\",unlink:\"Unlink\",formatting:\"Formatting\",paragraph:\"Normal text\",quote:\"Quote\",code:\"Code\",header1:\"Header 1\",header2:\"Header 2\",header3:\"Header 3\",header4:\"Header 4\",header5:\"Header 5\",bold:\"Bold\",italic:\"Italic\",fontcolor:\"Font Color\",backcolor:\"Back Color\",unorderedlist:\"Unordered List\",orderedlist:\"Ordered List\",outdent:\"Outdent\",indent:\"Indent\",cancel:\"Cancel\",insert:\"Insert\",save:\"Save\",_delete:\"Delete\",insert_table:\"Insert Table\",insert_row_above:\"Add Row Above\",insert_row_below:\"Add Row Below\",insert_column_left:\"Add Column Left\",insert_column_right:\"Add Column Right\",delete_column:\"Delete Column\",delete_row:\"Delete Row\",delete_table:\"Delete Table\",rows:\"Rows\",columns:\"Columns\",add_head:\"Add Head\",delete_head:\"Delete Head\",title:\"Title\",image_position:\"Position\",none:\"None\",left:\"Left\",right:\"Right\",center:\"Center\",image_web_link:\"Image Web Link\",text:\"Text\",mailto:\"Email\",web:\"URL\",video_html_code:\"Video Embed Code\",file:\"Insert File\",upload:\"Upload\",download:\"Download\",choose:\"Choose\",empty_img_list:\"You have no images\",or_choose:\"Or choose\",drop_file_here:\"Drop file here\",align_left:\"Align text to the left\",align_center:\"Center text\",align_right:\"Align text to the right\",align_justify:\"Justify text\",horizontalrule:\"Insert Horizontal Rule\",fullscreen:\"Full screen\",fontsize:\"Font size\",fontfamily:\"Font\",remove_font:\"Clear Font\",image_save_toserver:\"Save to the server?\",deleted:\"Deleted\",anchor:\"Anchor\",link_new_tab:\"Open link in new tab\",underline:\"Underline\",alignment:\"Alignment\",filename:\"Name (optional)\",edit:\"Edit\",spoiler:\"Spoiler\",spoiler_name:\"Spoiler name\",spoiler_text:\"Spoiler text\",smiles:\"Smiles\",undo:\"Undo\",redo:\"Redo\",formalize:\"Formalize\"}}},Redactor.fn=$.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(t,e){this.rtePaste=!1,this.$element=this.$source=$(t),this.uuid=uuid++;var s=$.extend(!0,{},$.Redactor.opts);if(this.opts=$.extend({},s,this.$element.data(),e),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css(\"height\"),this.sourceWidth=this.$source.css(\"width\"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=RegExp(\"^<(/?\"+this.opts.ownLine.join(\"|/?\")+\"|\"+this.opts.contOwnLine.join(\"|\")+\")[ >]\"),this.cleanlineAfter=RegExp(\"^<(br|/?\"+this.opts.ownLine.join(\"|/?\")+\"|/\"+this.opts.contOwnLine.join(\"|/\")+\")[ >]\"),this.cleannewLevel=RegExp(\"^</?(\"+this.opts.newLevel.join(\"|\")+\")[ >]\"),this.rTestBlock=RegExp(\"^(\"+this.opts.blockLevelElements.join(\"|\")+\")$\",\"i\"),!1===this.opts.linebreaks){if(!1!==this.opts.allowedTags){var o=[\"strong\",\"em\",\"del\"],r=[\"b\",\"i\",\"strike\"];for(i in\"-1\"===$.inArray(\"p\",this.opts.allowedTags)&&this.opts.allowedTags.push(\"p\"),o)\"-1\"!=$.inArray(o[i],this.opts.allowedTags)&&this.opts.allowedTags.push(r[i])}if(!1!==this.opts.deniedTags){var a=$.inArray(\"p\",this.opts.deniedTags);\"-1\"!==a&&this.opts.deniedTags.splice(a,a)}}(this.browser(\"msie\")||this.browser(\"opera\"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,\"horizontalrule\")),this.opts.curLang=this.opts.langs[this.opts.lang],$.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.placeholderInit(),this.buildStart()},toolbarInit:function(t){return{html:{title:t.html,func:\"toggle\"},undo:{title:t.undo,func:\"bufferUndo\"},redo:{title:t.redo,func:\"bufferRedo\"},formatting:{title:t.formatting,func:\"show\",dropdown:{p:{title:t.paragraph,func:\"formatBlocks\"},blockquote:{title:t.quote,func:\"formatQuote\",className:\"redactor_format_blockquote\"},code:{title:t.code,func:\"formatBlocks\",className:\"redactor_format_code\"},h1:{title:t.header1,func:\"formatBlocks\",className:\"redactor_format_h1\"},h2:{title:t.header2,func:\"formatBlocks\",className:\"redactor_format_h2\"},h3:{title:t.header3,func:\"formatBlocks\",className:\"redactor_format_h3\"},h4:{title:t.header4,func:\"formatBlocks\",className:\"redactor_format_h4\"},h5:{title:t.header5,func:\"formatBlocks\",className:\"redactor_format_h5\"}}},bold:{title:t.bold,exec:\"bold\"},italic:{title:t.italic,exec:\"italic\"},deleted:{title:t.deleted,exec:\"strikethrough\"},underline:{title:t.underline,exec:\"underline\"},unorderedlist:{title:\"&bull; \"+t.unorderedlist,exec:\"insertunorderedlist\"},orderedlist:{title:\"1. \"+t.orderedlist,exec:\"insertorderedlist\"},outdent:{title:\"< \"+t.outdent,func:\"indentingOutdent\"},indent:{title:\"> \"+t.indent,func:\"indentingIndent\"},image:{title:t.image,func:\"imageShow\"},video:{title:t.video,func:\"videoShow\"},file:{title:t.file,func:\"fileShow\"},table:{title:t.table,func:\"show\",dropdown:{insert_table:{title:t.insert_table,func:\"tableShow\"},separator_drop1:{name:\"separator\"},insert_row_above:{title:t.insert_row_above,func:\"tableAddRowAbove\"},insert_row_below:{title:t.insert_row_below,func:\"tableAddRowBelow\"},insert_column_left:{title:t.insert_column_left,func:\"tableAddColumnLeft\"},insert_column_right:{title:t.insert_column_right,func:\"tableAddColumnRight\"},separator_drop2:{name:\"separator\"},add_head:{title:t.add_head,func:\"tableAddHead\"},delete_head:{title:t.delete_head,func:\"tableDeleteHead\"},separator_drop3:{name:\"separator\"},delete_column:{title:t.delete_column,func:\"tableDeleteColumn\"},delete_row:{title:t.delete_row,func:\"tableDeleteRow\"},delete_table:{title:t.delete_table,func:\"tableDeleteTable\"}}},link:{title:t.link,func:\"show\",dropdown:{link:{title:t.link_insert,func:\"linkShow\"},unlink:{title:t.unlink,exec:\"unlink\"}}},alignment:{title:t.alignment,func:\"show\",dropdown:{alignleft:{title:t.align_left,func:\"alignmentLeft\"},aligncenter:{title:t.align_center,func:\"alignmentCenter\"},alignright:{title:t.align_right,func:\"alignmentRight\"},justify:{title:t.align_justify,func:\"alignmentJustify\"}}},alignleft:{title:t.align_left,func:\"alignmentLeft\"},aligncenter:{title:t.align_center,func:\"alignmentCenter\"},alignright:{title:t.align_right,func:\"alignmentRight\"},alignjustify:{title:t.align_justify,func:\"alignmentJustify\"},horizontalrule:{exec:\"inserthorizontalrule\",title:t.horizontalrule}}},callback:function(t,e,s){var o=this.opts[t+\"Callback\"];return $.isFunction(o)?!1===e?o.call(this,s):o.call(this,e,s):s},destroy:function(){clearInterval(this.autosaveInterval),$(window).off(\".redactor\"),this.$source.off(\"redactor-textarea\"),this.$element.off(\".redactor\").removeData(\"redactor\");var t=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(t).show();else{var e=this.$editor;this.opts.iframe&&(e=this.$element),this.$box.after(e),this.$box.remove(),e.removeClass(\"redactor_editor\").removeClass(\"redactor_editor_wym\").removeAttr(\"contenteditable\").html(t).show()}this.opts.toolbarExternal&&$(this.opts.toolbarExternal).html(\"\"),this.opts.air&&$(\"#redactor_air_\"+this.uuid).remove()},getObject:function(){return $.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return!!this.opts.iframe&&this.$frame},getToolbar:function(){return!!this.$toolbar&&this.$toolbar},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr(\"contenteditable\").removeAttr(\"dir\");var t=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),t},set:function(t,e,s){t=(t=t.toString()).replace(/\\$/g,\"&#36;\"),this.opts.fullpage?this.setCodeIframe(t):this.setEditor(t,e),\"\"==t&&(s=!1),!1!==s&&this.placeholderRemoveFromEditor()},setEditor:function(t,e){t=this.sanitizeHTML(t),!1!==e&&(t=this.cleanSavePreCode(t),t=this.cleanStripTags(t),t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t,!0),t=!1===this.opts.linebreaks?this.cleanConverters(t):t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),t=t.replace(/&amp;#36;/g,\"$\"),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},sanitizeHTML:function(t){if(0===t.length)return t;function e(){return new DOMParser().parseFromString(t,\"text/html\").body}function s(t){let e=t.children;for(let r of e)o(r),s(r)}function o(t){let e=t.attributes;for(let{name:s,value:o}of e)r(s,o)&&t.removeAttribute(s)}function r(t,e){let s=e.replace(/\\s+/g,\"\").toLowerCase();if([\"src\",\"href\",\"xlink:href\"].includes(t)&&(s.includes(\"javascript:\")||s.includes(\"data:text/html\"))||t.startsWith(\"on\"))return!0}let a=e();return s(a),a.innerHTML},setCodeIframe:function(t){var e=this.iframePage();this.$frame[0].src=\"about:blank\",t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t),t=this.cleanRemoveSpaces(t),e.open(),e.write(t),e.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find(\"body\").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(t){t=this.sanitizeHTML(t),this.fullpageDoctype=t.match(/^<\\!doctype[^>]*>/i),this.fullpageDoctype&&1==this.fullpageDoctype.length&&(t=t.replace(/^<\\!doctype[^>]*>/i,\"\")),t=this.cleanSavePreCode(t,!0),t=this.cleanConverters(t),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageDoctype:function(){if(this.fullpageDoctype&&1==this.fullpageDoctype.length){var t=this.fullpageDoctype[0]+\"\\n\"+this.$source.val();this.$source.val(t)}},setSpansVerified:function(){var t=this.$editor.find(\"span\"),e=\"inline\";$.each(t,function(){var t=this.outerHTML,s=RegExp(\"<\"+this.tagName,\"gi\"),o=t.replace(s,\"<\"+e);s=RegExp(\"</\"+this.tagName,\"gi\"),o=o.replace(s,\"</\"+e),$(this).replaceWith(o)})},setSpansVerifiedHtml:function(t){return(t=t.replace(/<span(.*?)>/,\"<inline$1>\")).replace(/<\\/span>/,\"</inline>\")},setNonEditable:function(){this.$editor.find(\".noneditable\").attr(\"contenteditable\",!1)},sync:function(t){var e,s=\"\";if(this.cleanUnverified(),s=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),s=this.syncClean(s),s=this.cleanRemoveEmptyTags(s),this.cleanRemoveSpaces(this.$source.val(),!1)==this.cleanRemoveSpaces(s,!1))return!1;if(s=s.replace(/<\\/li><(ul|ol)>([\\w\\W]*?)<\\/(ul|ol)>/gi,\"<$1>$2</$1></li>\"),\"<br>\"===$.trim(s)&&(s=\"\"),this.opts.xhtml){var o=[\"br\",\"hr\",\"img\",\"link\",\"input\",\"meta\"];$.each(o,function(t,e){s=s.replace(RegExp(\"<\"+e+\"(.*?[^/$]?)>\",\"gi\"),\"<\"+e+\"$1 />\")})}if(s=this.callback(\"syncBefore\",!1,s),this.$source.val(s),this.setFullpageDoctype(),this.callback(\"syncAfter\",!1,s),!1===this.start){if(void 0!==t)switch(t.which){case 37:case 38:case 39:case 40:break;default:this.callback(\"change\",!1,s)}else this.callback(\"change\",!1,s)}},syncClean:function(t){return this.opts.fullpage||(t=this.cleanStripTags(t)),t=$.trim(t),(\"<p></p>\"==(t=(t=(t=(t=(t=this.placeholderRemoveFromCode(t)).replace(/&#x200b;/gi,\"\")).replace(/&#8203;/gi,\"\")).replace(/<\\/a>&nbsp;/gi,\"</a> \")).replace(/\\u200B/g,\"\"))||\"<p> </p>\"==t||\"<p>&nbsp;</p>\"==t)&&(t=\"\"),this.opts.linkNofollow&&(t=(t=t.replace(/<a(.*?)rel=\"nofollow\"(.*?)>/gi,\"<a$1$2>\")).replace(/<a(.*?)>/gi,'<a$1 rel=\"nofollow\">')),t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(\"<!--?php\",\"<?php\")).replace(\"?-->\",\"?>\")).replace(/<(.*?)class=\"noeditable\"(.*?) contenteditable=\"false\"(.*?)>/gi,'<$1class=\"noeditable\"$2$3>')).replace(/ data-tagblock=\"\"/gi,\"\")).replace(/<br\\s?\\/?>\\n?<\\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,\"</$1>\")).replace(/<span(.*?)id=\"redactor-image-box\"(.*?)>([\\w\\W]*?)<img(.*?)><\\/span>/gi,\"$3<img$4>\")).replace(/<span(.*?)id=\"redactor-image-resizer\"(.*?)>(.*?)<\\/span>/gi,\"\")).replace(/<span(.*?)id=\"redactor-image-editter\"(.*?)>(.*?)<\\/span>/gi,\"\")).replace(/<(ul|ol)>\\s*\\t*\\n*<\\/(ul|ol)>/gi,\"\"),this.opts.cleanFontTag&&(t=t.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi,\"$2\")),t=(t=(t=(t=(t=t.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi,\"$2\")).replace(/<inline>([\\w\\W]*?)<\\/inline>/gi,\"$1\")).replace(/<inline>/gi,\"<span>\")).replace(/<inline /gi,\"<span \")).replace(/<\\/inline>/gi,\"</span>\"),this.opts.removeEmptyTags&&(t=t.replace(/<span>([\\w\\W]*?)<\\/span>/gi,\"$1\")),t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<span(.*?)class=\"redactor_placeholder\"(.*?)>([\\w\\W]*?)<\\/span>/gi,\"\")).replace(/<img(.*?)contenteditable=\"false\"(.*?)>/gi,\"<img$1$2>\")).replace(/&/gi,\"&\")).replace(/\\u2122/gi,\"&trade;\")).replace(/\\u00a9/gi,\"&copy;\")).replace(/\\u2026/gi,\"&hellip;\")).replace(/\\u2014/gi,\"&mdash;\")).replace(/\\u2010/gi,\"&dash;\"),t=this.cleanReConvertProtected(t)},buildStart:function(){this.content=\"\",this.$box=$('<div class=\"redactor_box\" />'),\"TEXTAREA\"===this.$source[0].tagName&&(this.opts.textareamode=!0),!1===this.opts.mobile&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.opts.textareamode?this.content=$.trim(this.$source.val()):this.content=$.trim(this.$source.html())},buildFromTextarea:function(){this.$editor=$(\"<div />\"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(t){return $(\"<textarea />\").attr(\"name\",t.attr(\"id\")).css(\"height\",this.sourceHeight)},buildAddClasses:function(t){$.each(this.$source.get(0).className.split(/\\s+/),function(e,s){t.addClass(\"redactor_\"+s)})},buildEnable:function(){this.$editor.addClass(\"redactor_editor\").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr(\"dir\",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var t=this.$editor;this.opts.iframe&&(t=this.$frame),this.opts.tabindex&&t.attr(\"tabindex\",this.opts.tabindex),this.opts.minHeight?t.css(\"min-height\",this.opts.minHeight+\"px\"):this.browser(\"mozilla\")&&this.opts.linebreaks&&this.$editor.css(\"min-height\",\"45px\"),this.browser(\"mozilla\")&&this.opts.linebreaks&&this.$editor.css(\"padding-bottom\",\"10px\"),this.opts.maxHeight&&(this.opts.autoresize=!1,this.sourceHeight=this.opts.maxHeight),this.opts.wym&&this.$editor.addClass(\"redactor_editor_wym\"),this.opts.typewriter&&this.$editor.addClass(\"redactor-editor-typewriter\"),this.opts.autoresize||t.css(\"height\",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout($.proxy(this.observeStart,this),4),this.browser(\"mozilla\"))try{this.document.execCommand(\"enableObjectResizing\",!1,!1),this.document.execCommand(\"enableInlineTableEditing\",!1,!1)}catch(t){}this.opts.focus&&setTimeout($.proxy(this.focus,this),100),this.opts.visual||setTimeout($.proxy(function(){this.opts.visual=!0,this.toggle(!1)},this),200),this.callback(\"init\")},buildBindKeyboard:function(){var t;this.dblEnter=0,this.opts.dragUpload&&(!1!==this.opts.imageUpload||!1!==this.opts.s3)&&this.$editor.on(\"drop.redactor\",$.proxy(this.buildEventDrop,this)),this.$editor.on(\"click.redactor\",$.proxy(function(){this.selectall=!1},this)),this.$editor.on(\"input.redactor\",$.proxy(this.sync,this)),this.$editor.on(\"paste.redactor\",$.proxy(this.buildEventPaste,this)),this.$editor.on(\"keydown.redactor\",$.proxy(this.buildEventKeydown,this)),this.$editor.on(\"keyup.redactor\",$.proxy(this.buildEventKeyup,this)),$.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on(\"keydown.redactor-textarea\",$.proxy(this.opts.textareaKeydownCallback,this)),$.isFunction(this.opts.focusCallback)&&this.$editor.on(\"focus.redactor\",$.proxy(this.opts.focusCallback,this)),$(document).mousedown(function(e){t=$(e.target)}),this.$editor.on(\"blur.redactor\",$.proxy(function(e){!$(t).hasClass(\"redactor_toolbar\")&&0==$(t).parents(\".redactor_toolbar\").length&&(this.selectall=!1,$.isFunction(this.opts.blurCallback)&&this.callback(\"blur\",e))},this))},buildEventDrop:function(t){if(t=t.originalEvent||t,void 0===window.FormData||!t.dataTransfer||0==t.dataTransfer.files.length)return!0;t.preventDefault();var e=t.dataTransfer.files[0];if(!1!==this.opts.dnbImageTypes&&-1==this.opts.dnbImageTypes.indexOf(e.type))return!0;this.bufferSet(),this.showProgressBar(),!1===this.opts.s3?this.dragUploadAjax(this.opts.imageUpload,e,!0,t,this.opts.imageUploadParam):this.s3uploadFile(e)},buildEventPaste:function(t){var e=!1;if(this.browser(\"webkit\")&&-1===navigator.userAgent.indexOf(\"Chrome\")&&this.browser(\"version\").split(\".\")[0]<536&&(e=!0),e||this.browser(\"opera\")||this.opts.clipboardUpload&&this.buildEventClipboardUpload(t))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(!0===this.opts.autoresize&&!0!==this.fullscreen?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var s=this.extractContent();setTimeout($.proxy(function(){var t=this.extractContent();this.$editor.append(s),this.selectionRestore();var e=this.getFragmentHtml(t);this.pasteClean(e),!0===this.opts.autoresize&&!0!==this.fullscreen&&this.$editor.css(\"height\",\"auto\")},this),1)}},buildEventClipboardUpload:function(t){var e=t.originalEvent||t;if(this.clipboardFilePaste=!1,void 0===e.clipboardData)return!1;if(e.clipboardData.items){var s=e.clipboardData.items[0].getAsFile();if(null!==s){this.bufferSet(),this.clipboardFilePaste=!0;var o=new FileReader;return o.onload=$.proxy(this.pasteClipboardUpload,this),o.readAsDataURL(s),!0}}return!1},buildEventKeydown:function(t){if(this.rtePaste)return!1;var e=t.which,s=t.ctrlKey||t.metaKey,o=this.getParent(),r=this.getCurrent(),a=this.getBlock(),n=!1;if(this.callback(\"keydown\",t),this.browser(\"mozilla\")&&\"modify\"in window.getSelection()&&s&&(37===t.keyCode||39===t.keyCode)){var l=this.getSelection(),c=t.metaKey?\"line\":\"word\";37!==t.keyCode||(l.modify(\"extend\",\"left\",c),t.shiftKey||l.collapseToStart()),39!==t.keyCode||(l.modify(\"extend\",\"right\",c),t.shiftKey||l.collapseToEnd()),t.preventDefault()}if(this.imageResizeHide(!1),(o&&\"CODE\"===$(o).get(0).tagName||r&&\"CODE\"===$(r).get(0).tagName)&&(n=!0,e===this.keyCode.DOWN&&this.insertAfterLastElement(a)),e===this.keyCode.DOWN&&(o&&\"BLOCKQUOTE\"===$(o)[0].tagName&&this.insertAfterLastElement(o),r&&\"BLOCKQUOTE\"===$(r)[0].tagName&&this.insertAfterLastElement(r),o&&\"P\"===$(o)[0].tagName&&\"BLOCKQUOTE\"==$(o).parent()[0].tagName&&this.insertAfterLastElement(o,$(o).parent()[0]),r&&\"P\"===$(r)[0].tagName&&o&&\"BLOCKQUOTE\"==$(o)[0].tagName&&this.insertAfterLastElement(r,o)),this.shortcuts(t,e),!s||90!==e||t.shiftKey||t.altKey){if(s&&90===e&&t.shiftKey&&!t.altKey){t.preventDefault(),0!=this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand(\"redo\",!1,!1);return}}else{t.preventDefault(),this.opts.buffer.length?this.bufferUndo():this.document.execCommand(\"undo\",!1,!1);return}if(32==e&&this.bufferSet(),s&&65===e?(this.bufferSet(),this.selectall=!0):e==this.keyCode.LEFT_WIN||s||(this.selectall=!1),e!=this.keyCode.ENTER||t.shiftKey||t.ctrlKey||t.metaKey)e===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey)&&(this.bufferSet(),t.preventDefault(),this.insertLineBreak());else{var h=this.getRange();if(h&&!1===h.collapsed&&(sel=this.getSelection()).rangeCount&&h.deleteContents(),this.browser(\"msie\")&&1==o.nodeType&&(\"TD\"==o.tagName||\"TH\"==o.tagName))return t.preventDefault(),this.bufferSet(),this.insertNode(document.createElement(\"br\")),this.callback(\"enter\",t),!1;if(a&&(\"BLOCKQUOTE\"==a.tagName||\"BLOCKQUOTE\"==$(a).parent()[0].tagName)){if(this.isEndOfElement()){if(1==this.dblEnter){if(\"BLOCKQUOTE\"==a.tagName?(p=\"br\",d=a):(p=\"p\",d=$(a).parent()[0]),t.preventDefault(),this.insertingAfterLastElement(d),this.dblEnter=0,\"p\"==p)$(a).parent().find(\"p\").last().remove();else{var d,p,u=$.trim($(a).html());$(a).html(u.replace(/<br\\s?\\/?>$/i,\"\"))}return}this.dblEnter++}else this.dblEnter++}if(!0===n)return this.buildEventKeydownPre(t,r);if(!this.opts.linebreaks){if(a&&\"LI\"==a.tagName){var f=this.getBlock();if(!1!==f||\"LI\"===f.tagName){var m=$.trim($(a).text()),g=$.trim($(f).text());if(\"\"==m&&\"\"==g&&0==$(f).next(\"li\").length&&0==$(f).parents(\"li\").length){this.bufferSet();var b=$(f).closest(\"ol, ul\");$(f).remove();var v=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");return b.after(v),this.selectionStart(v),this.sync(),this.callback(\"enter\",t),!1}}}if(a&&this.opts.rBlockTest.test(a.tagName))this.bufferSet(),setTimeout($.proxy(function(){var t=this.getBlock();if(\"DIV\"===t.tagName&&!$(t).hasClass(\"redactor_editor\")){var e=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");$(t).replaceWith(e),this.selectionStart(e)}},this),1);else if(!1===a){this.bufferSet();var v=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");return this.insertNode(v[0]),this.selectionStart(v),this.callback(\"enter\",t),!1}}if(this.opts.linebreaks){if(!(a&&this.opts.rBlockTest.test(a.tagName)))return this.buildEventKeydownInsertLineBreak(t);this.bufferSet(),setTimeout($.proxy(function(){var t=this.getBlock();\"DIV\"!==t.tagName&&\"P\"!==t.tagName||$(t).hasClass(\"redactor_editor\")||this.replaceLineBreak(t)},this),1)}if(\"BLOCKQUOTE\"==a.tagName||\"FIGCAPTION\"==a.tagName)return this.buildEventKeydownInsertLineBreak(t);this.callback(\"enter\",t)}if((e===this.keyCode.TAB||t.metaKey&&219===e)&&this.opts.shortcuts)return this.buildEventKeydownTab(t,n,e);e===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(t,r,o)},buildEventKeydownPre:function(t,e){t.preventDefault(),this.bufferSet();var s=$(e).parent().text();return this.insertNode(document.createTextNode(\"\\n\")),-1==s.search(/\\s$/)&&this.insertNode(document.createTextNode(\"\\n\")),this.sync(),this.callback(\"enter\",t),!1},buildEventKeydownTab:function(t,e,s){return!!(!this.opts.tabFocus||this.isEmpty(this.get())&&!1===this.opts.tabSpaces)||(t.preventDefault(),!0!==e||t.shiftKey?!1!==this.opts.tabSpaces?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join(\"\\xa0\"))),this.sync()):t.shiftKey?this.indentingOutdent():this.indentingIndent():(this.bufferSet(),this.insertNode(document.createTextNode(\"\t\")),this.sync()),!1)},buildEventKeydownBackspace:function(t,e,s){if(s&&e&&\"TD\"==s.parentNode.tagName&&\"UL\"==s.tagName&&\"LI\"==e.tagName&&1==$(s).children(\"li\").length){var o;if(\"\"==$(e).text().replace(/[\\u200B-\\u200D\\uFEFF]/g,\"\")){var o=s.parentNode;return $(s).remove(),this.selectionStart(o),this.sync(),!1}}void 0!==e.tagName&&/^(H[1-6])$/i.test(e.tagName)&&(o=!1===this.opts.linebreaks?$(\"<p>\"+this.opts.invisibleSpace+\"</p>\"):$(\"<br>\"+this.opts.invisibleSpace),$(e).replaceWith(o),this.selectionStart(o),this.sync()),void 0!==e.nodeValue&&null!==e.nodeValue&&e.remove&&3===e.nodeType&&null==e.nodeValue.match(/[^\\u200B]/g)&&($(e).prev().remove(),this.sync())},buildEventKeydownInsertLineBreak:function(t){this.bufferSet(),t.preventDefault(),this.insertLineBreak(),this.callback(\"enter\",t)},buildEventKeyup:function(t){if(this.rtePaste)return!1;var e=t.which,s=this.getParent(),o=this.getCurrent();if(!this.opts.linebreaks&&3==o.nodeType&&(!1==s||\"BODY\"==s.tagName)){var r=$(\"<p>\").append($(o).clone());$(o).replaceWith(r);var a=$(r).next();void 0!==a[0]&&\"BR\"==a[0].tagName&&a.remove(),this.selectionEnd(r)}if((this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&e===this.keyCode.ENTER&&this.buildEventKeyupConverters(),e===this.keyCode.DELETE||e===this.keyCode.BACKSPACE)return this.formatEmpty(t);this.callback(\"keyup\",t),this.sync(t)},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout($.proxy(function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()},this),5)},buildPlugins:function(){this.opts.plugins&&$.each(this.opts.plugins,$.proxy(function(t,e){RedactorPlugins[e]&&($.extend(this,RedactorPlugins[e]),$.isFunction(RedactorPlugins[e].init)&&this.init())},this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))},iframeAppend:function(t){this.$source.attr(\"dir\",this.opts.direction).hide(),this.$box.insertAfter(t).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=$('<iframe style=\"width: 100%;\" frameborder=\"0\" />').one(\"load\",$.proxy(function(){if(this.opts.fullpage){this.iframePage(),\"\"===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var t=setInterval($.proxy(function(){this.$frame.contents().find(\"body\").html()&&(clearInterval(t),this.iframeLoad())},this),0)}else this.iframeLoad()},this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var t=this.iframeDoc();return t.documentElement&&t.removeChild(t.documentElement),t},iframeAddCss:function(t){t=t||this.opts.css,this.isString(t)&&this.$frame.contents().find(\"head\").append('<link rel=\"stylesheet\" href=\"'+t+'\" />'),$.isArray(t)&&$.each(t,$.proxy(function(t,e){this.iframeAddCss(e)},this))},iframeLoad:function(){this.$editor=this.$frame.contents().find(\"body\").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$source.val()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderInit:function(){!1!==this.opts.placeholder?(this.placeholderText=this.opts.placeholder,this.opts.placeholder=!0):void 0===this.$element.attr(\"placeholder\")||\"\"==this.$element.attr(\"placeholder\")?this.opts.placeholder=!1:(this.placeholderText=this.$element.attr(\"placeholder\"),this.opts.placeholder=!0)},placeholderStart:function(t){return!1!==this.opts.placeholder&&(this.isEmpty(t)?(this.opts.focus=!1,this.placeholderOnFocus(),this.placeholderOnBlur(),this.placeholderGet()):(this.placeholderOnBlur(),!1))},placeholderOnFocus:function(){this.$editor.on(\"focus.redactor_placeholder\",$.proxy(this.placeholderFocus,this))},placeholderOnBlur:function(){this.$editor.on(\"blur.redactor_placeholder\",$.proxy(this.placeholderBlur,this))},placeholderGet:function(){var t=$('<span class=\"redactor_placeholder\">').data(\"redactor\",\"verified\").attr(\"contenteditable\",!1).text(this.placeholderText);return!1===this.opts.linebreaks?$(\"<p>\").append(t):t},placeholderBlur:function(){var t=this.get();this.isEmpty(t)&&(this.placeholderOnFocus(),this.$editor.html(this.placeholderGet()))},placeholderFocus:function(){this.$editor.find(\"span.redactor_placeholder\").remove();var t=\"\";!1===this.opts.linebreaks&&(t=this.opts.emptyHtml),this.$editor.off(\"focus.redactor_placeholder\"),this.$editor.html(t),!1===this.opts.linebreaks?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemoveFromEditor:function(){this.$editor.find(\"span.redactor_placeholder\").remove(),this.$editor.off(\"focus.redactor_placeholder\")},placeholderRemoveFromCode:function(t){return t.replace(/<span class=\"redactor_placeholder\"(.*?)>(.*?)<\\/span>/i,\"\")},shortcuts:function(e,key){if(!this.opts.shortcuts)return(e.ctrlKey||e.metaKey)&&(66===key||73===key)&&e.preventDefault(),!1;$.each(this.opts.shortcuts,$.proxy(function(str,command){var keys=str.split(\",\");for(var i in keys)\"string\"==typeof keys[i]&&this.shortcutsHandler(e,$.trim(keys[i]),$.proxy(function(){eval(command)},this))},this))},shortcutsHandler:function(t,e,s){var o={8:\"backspace\",9:\"tab\",10:\"return\",13:\"return\",16:\"shift\",17:\"ctrl\",18:\"alt\",19:\"pause\",20:\"capslock\",27:\"esc\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"insert\",46:\"del\",59:\";\",61:\"=\",96:\"0\",97:\"1\",98:\"2\",99:\"3\",100:\"4\",101:\"5\",102:\"6\",103:\"7\",104:\"8\",105:\"9\",106:\"*\",107:\"+\",109:\"-\",110:\".\",111:\"/\",112:\"f1\",113:\"f2\",114:\"f3\",115:\"f4\",116:\"f5\",117:\"f6\",118:\"f7\",119:\"f8\",120:\"f9\",121:\"f10\",122:\"f11\",123:\"f12\",144:\"numlock\",145:\"scroll\",173:\"-\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"},r={\"`\":\"~\",1:\"!\",2:\"@\",3:\"#\",4:\"$\",5:\"%\",6:\"^\",7:\"&\",8:\"*\",9:\"(\",0:\")\",\"-\":\"_\",\"=\":\"+\",\";\":\": \",\"'\":'\"',\",\":\"<\",\".\":\">\",\"/\":\"?\",\"\\\\\":\"|\"};e=e.toLowerCase().split(\" \");var a=o[t.keyCode],n=String.fromCharCode(t.which).toLowerCase(),l=\"\",c={};$.each([\"alt\",\"ctrl\",\"meta\",\"shift\"],function(e,s){t[s+\"Key\"]&&a!==s&&(l+=s+\"+\")}),a&&(c[l+a]=!0),n&&(c[l+n]=!0,c[l+r[n]]=!0,\"shift+\"===l&&(c[r[n]]=!0));for(var h=0,d=e.length;h<d;h++)if(c[e[h]])return t.preventDefault(),s.apply(this,arguments)},focus:function(){this.browser(\"opera\")?this.$editor.focus():this.window.setTimeout($.proxy(this.focusSet,this,!0),1)},focusWithSaveScroll:function(){if(this.browser(\"msie\"))var t=this.document.documentElement.scrollTop;this.$editor.focus(),this.browser(\"msie\")&&(this.document.documentElement.scrollTop=t)},focusEnd:function(){if(this.browser(\"mozilla\")){if(!1===this.opts.linebreaks){var t=this.$editor.children().last();this.$editor.focus(),this.selectionEnd(t)}else this.focusSet()}else this.focusSet()},focusSet:function(t,e){this.$editor.focus(),void 0===e&&(e=this.$editor[0]);var s=this.getRange();s.selectNodeContents(e),s.collapse(t||!1);var o=this.getSelection();o.removeAllRanges(),o.addRange(s)},toggle:function(t){this.opts.visual?this.toggleCode(t):this.toggleVisual()},toggleVisual:function(){var t=this.$source.hide().val();if(void 0!==this.modified){var e=this.modified.replace(/\\n/g,\"\"),s=t.replace(/\\n/g,\"\");s=this.cleanRemoveSpaces(s,!1),this.modified=this.cleanRemoveSpaces(e,!1)!==s}this.modified&&(this.opts.fullpage&&\"\"===t?this.setFullpageOnInit(t):(this.set(t),this.opts.fullpage&&this.buildBindKeyboard()),this.callback(\"change\",!1,t)),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr(\"contenteditable\",!0),this.$source.off(\"keydown.redactor-textarea-indenting\"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive(\"html\"),this.opts.visual=!0},toggleCode:function(t){!1!==t&&this.selectionSave();var e=null;this.opts.iframe?(e=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr(\"contenteditable\"),this.$frame.hide()):(e=this.$editor.innerHeight(),this.$editor.hide());var s=this.$source.val();\"\"!==s&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(s)),this.modified=s,this.$source.height(e).show().focus(),this.$source.on(\"keydown.redactor-textarea-indenting\",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive(\"html\"),this.opts.visual=!1},textareaIndenting:function(t){if(9===t.keyCode){var e=$(this),s=e.get(0).selectionStart;return e.val(e.val().substring(0,s)+\"\t\"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=s+1,!1}},autosave:function(){var t=!1;this.autosaveInterval=setInterval($.proxy(function(){var e=this.get();if(t!==e){var s=this.$source.attr(\"name\");$.ajax({url:this.opts.autosave,type:\"post\",data:\"name=\"+s+\"&\"+s+\"=\"+escape(encodeURIComponent(e)),success:$.proxy(function(s){var o=$.parseJSON(s);void 0===o.error?this.callback(\"autosave\",!1,o):this.callback(\"autosaveError\",!1,o),t=e},this)})}},this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.isMobile()&&this.opts.buttonsHideOnMobile.length>0&&$.each(this.opts.buttonsHideOnMobile,$.proxy(function(t,e){var s=this.opts.buttons.indexOf(e);this.opts.buttons.splice(s,1)},this)),this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var t=this.opts.buttons.indexOf(\"html\");this.opts.buttons.splice(t,1)}if(this.opts.toolbar&&$.each(this.opts.toolbar.formatting.dropdown,$.proxy(function(t,e){\"-1\"==$.inArray(t,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[t]},this)),0===this.opts.buttons.length)return!1;this.airEnable(),this.$toolbar=$(\"<ul>\").addClass(\"redactor_toolbar\").attr(\"id\",\"redactor_toolbar_\"+this.uuid),this.opts.typewriter&&this.$toolbar.addClass(\"redactor-toolbar-typewriter\"),this.opts.toolbarOverflow&&this.isMobile()&&this.$toolbar.addClass(\"redactor-toolbar-overflow\"),this.opts.air?(this.$air=$('<div class=\"redactor_air\">').attr(\"id\",\"redactor_air_\"+this.uuid).hide(),this.$air.append(this.$toolbar),$(\"body\").append(this.$air)):this.opts.toolbarExternal?(this.$toolbar.addClass(\"redactor-toolbar-external\"),$(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar),$.each(this.opts.buttons,$.proxy(function(t,e){if(this.opts.toolbar[e]){var s=this.opts.toolbar[e];if(!1===this.opts.fileUpload&&\"file\"===e)return!0;this.$toolbar.append($(\"<li>\").append(this.buttonBuild(e,s)))}},this)),this.$toolbar.find(\"a\").attr(\"tabindex\",\"-1\"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),$(this.opts.toolbarFixedTarget).on(\"scroll.redactor\",$.proxy(this.toolbarObserveScroll,this))),this.opts.activeButtons&&this.$editor.on(\"mouseup.redactor keyup.redactor\",$.proxy(this.buttonActiveObserver,this))},toolbarObserveScroll:function(){var t=$(this.opts.toolbarFixedTarget).scrollTop(),e=0,s=0,o=0;if(o=(e=this.opts.toolbarFixedTarget===document?this.$box.offset().top:1)+this.$box.height()+40,t>e){var r=\"100%\";this.opts.toolbarFixedBox&&(s=this.$box.offset().left,r=this.$box.innerWidth(),this.$toolbar.addClass(\"toolbar_fixed_box\")),this.toolbarFixed=!0,this.opts.toolbarFixedTarget===document?this.$toolbar.css({position:\"fixed\",width:r,zIndex:10005,top:this.opts.toolbarFixedTopOffset+\"px\",left:s}):this.$toolbar.css({position:\"absolute\",width:r,zIndex:10005,top:this.opts.toolbarFixedTopOffset+t+\"px\",left:0}),t<o?this.$toolbar.css(\"visibility\",\"visible\"):this.$toolbar.css(\"visibility\",\"hidden\")}else this.toolbarFixed=!1,this.$toolbar.css({position:\"relative\",width:\"auto\",top:0,left:s}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass(\"toolbar_fixed_box\")},airEnable:function(){this.opts.air&&this.$editor.on(\"mouseup.redactor keyup.redactor\",this,$.proxy(function(t){var e=this.getSelectionText();if(\"mouseup\"===t.type&&\"\"!=e&&this.airShow(t),\"keyup\"===t.type&&t.shiftKey&&\"\"!=e){var s=$(this.getElement(this.getSelection().focusNode)),o=s.offset();o.height=s.height(),this.airShow(o,!0)}},this))},airShow:function(t,e){if(this.opts.air){if(this.selectionSave(),$(\".redactor_air\").hide(),e)s=t.left,o=t.top+t.height+14,this.opts.iframe&&(o+=this.$box.position().top-$(this.document).scrollTop(),s+=this.$box.position().left);else{var s,o,r=this.$air.innerWidth();s=t.clientX,$(this.document).width()<s+r&&(s-=r),o=t.clientY+14,this.opts.iframe?(o+=this.$box.position().top,s+=this.$box.position().left):o+=$(this.document).scrollTop()}this.$air.css({left:s+\"px\",top:o+\"px\"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var t=$.proxy(function(t){$(t).on(\"mousedown.redactor\",$.proxy(function(e){0===$(e.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),$(t).off(e))},this)).on(\"keydown.redactor\",$.proxy(function(e){e.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),$(t).off(e)},this))},this);t(document),this.opts.iframe&&t(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var t=$.proxy(function(t){$(t).on(\"mousemove.redactor\",$.proxy(function(e){0===$(e.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),$(t).off(e))},this))},this);t(document),this.opts.iframe&&t(this.document)}},dropdownBuild:function(t,e){$.each(e,$.proxy(function(e,s){var o;s.className||(s.className=\"\"),\"separator\"===s.name?o=$('<a class=\"redactor_separator_drop\">'):(o=$('<a href=\"#\" class=\"'+s.className+\" redactor_dropdown_\"+e+'\">'+s.title+\"</a>\")).on(\"click\",$.proxy(function(t){this.opts.air&&this.selectionRestore(),t.preventDefault&&t.preventDefault(),this.browser(\"msie\")&&(t.returnValue=!1),s.callback&&s.callback.call(this,e,o,s,t),s.exec&&this.execCommand(s.exec,e),s.func&&this[s.func](e),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)},this)),t.append(o)},this))},dropdownShow:function(t,e){if(!this.opts.visual)return t.preventDefault(),!1;var s=this.buttonGet(e),o=s.data(\"dropdown\").appendTo(document.body);if(s.hasClass(\"dropact\"))this.dropdownHideAll();else{this.dropdownHideAll(),this.callback(\"dropdownShow\",{dropdown:o,key:e,button:s}),this.buttonActive(e),s.addClass(\"dropact\");var r=s.offset(),a=o.width();r.left+a>$(document).width()&&(r.left-=a);var n=r.left+\"px\",l=s.innerHeight(),c=\"absolute\",h=l+this.opts.toolbarFixedTopOffset+\"px\";this.opts.toolbarFixed&&this.toolbarFixed?c=\"fixed\":h=r.top+l+\"px\",o.css({position:c,left:n,top:h}).show(),this.callback(\"dropdownShown\",{dropdown:o,key:e,button:s})}var d=$.proxy(function(t){this.dropdownHide(t,o)},this);$(document).one(\"click\",d),this.$editor.one(\"click\",d),this.$editor.one(\"touchstart\",d),t.stopPropagation(),this.focusWithSaveScroll()},dropdownHideAll:function(){this.$toolbar.find(\"a.dropact\").removeClass(\"redactor_act\").removeClass(\"dropact\"),$(\".redactor_dropdown\").hide(),this.callback(\"dropdownHide\")},dropdownHide:function(t,e){$(t.target).hasClass(\"dropact\")||(e.removeClass(\"dropact\"),this.dropdownHideAll())},buttonBuild:function(t,e,s){var o=$('<a href=\"javascript:;\" title=\"'+e.title+'\" tabindex=\"-1\" class=\"re-icon re-'+t+'\"></a>');if(void 0!==s&&o.addClass(\"redactor-btn-image\"),o.on(\"click\",$.proxy(function(s){if(s.preventDefault&&s.preventDefault(),this.browser(\"msie\")&&(s.returnValue=!1),o.hasClass(\"redactor_button_disabled\"))return!1;!1!==this.isFocused()||e.exec||this.focusWithSaveScroll(),e.exec?(this.focusWithSaveScroll(),this.execCommand(e.exec,t),this.airBindMousemoveHide()):e.func&&\"show\"!==e.func?(this[e.func](t),this.airBindMousemoveHide()):e.callback?(e.callback.call(this,t,o,e,s),this.airBindMousemoveHide()):e.dropdown&&this.dropdownShow(s,t),this.buttonActiveObserver(!1,t)},this)),e.dropdown){var r=$('<div class=\"redactor_dropdown redactor_dropdown_box_'+t+'\" style=\"display: none;\">');o.data(\"dropdown\",r),this.dropdownBuild(r,e.dropdown)}return o},buttonGet:function(t){return!!this.opts.toolbar&&$(this.$toolbar.find(\"a.re-\"+t))},buttonTagToActiveState:function(t,e){this.opts.activeButtons.push(t),this.opts.activeButtonsStates[e]=t},buttonActiveToggle:function(t){this.buttonGet(t).hasClass(\"redactor_act\")?this.buttonInactive(t):this.buttonActive(t)},buttonActive:function(t){this.buttonGet(t).addClass(\"redactor_act\")},buttonInactive:function(t){this.buttonGet(t).removeClass(\"redactor_act\")},buttonInactiveAll:function(t){this.$toolbar.find(\"a.re-icon\").not(\".re-\"+t).removeClass(\"redactor_act\")},buttonActiveVisual:function(){this.$toolbar.find(\"a.re-icon\").not(\"a.re-html\").removeClass(\"redactor_button_disabled\")},buttonInactiveVisual:function(){this.$toolbar.find(\"a.re-icon\").not(\"a.re-html\").addClass(\"redactor_button_disabled\")},buttonChangeIcon:function(t,e){this.buttonGet(t).addClass(\"re-\"+e)},buttonRemoveIcon:function(t,e){this.buttonGet(t).removeClass(\"re-\"+e)},buttonAwesome:function(t,e){var s=this.buttonGet(t);s.removeClass(\"redactor-btn-image\"),s.addClass(\"fa-redactor-btn\"),s.html('<i class=\"fa '+e+'\"></i>')},buttonAdd:function(t,e,s,o){if(this.opts.toolbar){var r=this.buttonBuild(t,{title:e,callback:s,dropdown:o},!0);return this.$toolbar.append($(\"<li>\").append(r)),r}},buttonAddFirst:function(t,e,s,o){if(this.opts.toolbar){var r=this.buttonBuild(t,{title:e,callback:s,dropdown:o},!0);this.$toolbar.prepend($(\"<li>\").append(r))}},buttonAddAfter:function(t,e,s,o,r){if(this.opts.toolbar){var a=this.buttonBuild(e,{title:s,callback:o,dropdown:r},!0),n=this.buttonGet(t);return 0!==n.length?n.parent().after($(\"<li>\").append(a)):this.$toolbar.append($(\"<li>\").append(a)),a}},buttonAddBefore:function(t,e,s,o,r){if(this.opts.toolbar){var a=this.buttonBuild(e,{title:s,callback:o,dropdown:r},!0),n=this.buttonGet(t);return 0!==n.length?n.parent().before($(\"<li>\").append(a)):this.$toolbar.append($(\"<li>\").append(a)),a}},buttonRemove:function(t){this.buttonGet(t).remove()},buttonActiveObserver:function(t,e){var s=this.getParent();if(this.buttonInactiveAll(e),!1===t&&\"html\"!==e){-1!=$.inArray(e,this.opts.activeButtons)&&this.buttonActiveToggle(e);return}s&&\"A\"===s.tagName?this.$toolbar.find(\"a.redactor_dropdown_link\").text(this.opts.curLang.link_edit):this.$toolbar.find(\"a.redactor_dropdown_link\").text(this.opts.curLang.link_insert),$.each(this.opts.activeButtonsStates,$.proxy(function(t,e){0!=$(s).closest(t,this.$editor.get()[0]).length&&this.buttonActive(e)},this));var o=$(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(o.length){var r=o.css(\"text-align\");\"\"==r&&(r=\"left\"),this.buttonActive(\"align\"+r)}},execPasteFrag:function(t){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount){var s=this.getRange();s.deleteContents();var o=this.document.createElement(\"div\");o.innerHTML=t;for(var r,a,n=this.document.createDocumentFragment();r=o.firstChild;)a=n.appendChild(r);n.firstChild,s.insertNode(n),a&&((s=s.cloneRange()).setStartAfter(a),s.collapse(!0)),e.removeAllRanges(),e.addRange(s)}},exec:function(t,e,s){\"formatblock\"===t&&this.browser(\"msie\")&&(e=\"<\"+e+\">\"),\"inserthtml\"===t&&this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(e):(this.focusWithSaveScroll(),this.document.selection.createRange().pasteHTML(e)):this.document.execCommand(t,!1,e),!1!==s&&this.sync(),this.callback(\"execCommand\",t,e)},execCommand:function(t,e,s){if(!this.opts.visual)return this.$source.focus(),!1;if((\"bold\"===t||\"italic\"===t||\"underline\"===t||\"strikethrough\"===t)&&this.bufferSet(),\"superscript\"===t||\"subscript\"===t){var o=this.getParent();(\"SUP\"===o.tagName||\"SUB\"===o.tagName)&&this.inlineRemoveFormatReplace(o)}if(\"inserthtml\"===t){this.insertHtml(e,s),this.callback(\"execCommand\",t,e);return}return(!this.currentOrParentIs(\"CODE\")||!!this.opts.formattingPre)&&(\"insertunorderedlist\"===t||\"insertorderedlist\"===t?this.execLists(t,e):\"unlink\"===t?this.execUnlink(t,e):void(this.exec(t,e,s),\"inserthorizontalrule\"===t&&this.$editor.find(\"hr\").removeAttr(\"id\")))},execUnlink:function(t,e){this.bufferSet();var s=this.currentOrParentIs(\"A\");if(s){$(s).replaceWith($(s).text()),this.sync(),this.callback(\"execCommand\",t,e);return}},execLists:function(t,e){this.bufferSet();var s=this.getParent(),o=$(s).closest(\"ol, ul\");this.isParentRedactor(o)||0==o.length||(o=!1);var r=!1;if(o&&o.length){r=!0;var a=o[0].tagName;(\"insertunorderedlist\"===t&&\"OL\"===a||\"insertorderedlist\"===t&&\"UL\"===a)&&(r=!1)}if(this.selectionSave(),r){var n=this.getNodes(),l=this.getBlocks(n);void 0!==n[0]&&n.length>1&&3==n[0].nodeType&&l.unshift(this.getBlock());var c=\"\",h=\"\";$.each(l,$.proxy(function(t,e){if(\"LI\"==e.tagName){var s=$(e),o=s.clone();(o.find(\"ul\",\"ol\").remove(),!1===this.opts.linebreaks)?c+=this.outerHtml($(\"<p>\").append(o.contents())):c+=o.html().replace(/<br\\s?\\/?>$/i,\"\")+\"<br>\",0==t?(s.addClass(\"redactor-replaced\").empty(),h=this.outerHtml(s)):s.remove()}},this)),html=this.$editor.html().replace(h,\"</\"+a+\">\"+c+\"<\"+a+\">\"),this.$editor.html(html),this.$editor.find(a+\":empty\").remove()}else{var d=$(this.getParent()).closest(\"td\");if(this.browser(\"msie\")&&!this.isIe11()&&this.opts.linebreaks){var p=this.selectionWrap(\"div\"),u=$(p).html(),f=$(\"<ul>\");\"insertorderedlist\"==t&&(f=$(\"<ol>\"));var m=$(\"<li>\");\"\"==$.trim(u)?(m.append(u+'<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),f.append(m),this.$editor.find(\"#selection-marker-1\").replaceWith(f)):(m.append(u),f.append(m),$(p).replaceWith(f))}else this.document.execCommand(t);var s=this.getParent(),o=$(s).closest(\"ol, ul\");if(!1===this.opts.linebreaks&&\"\"==$.trim(o.text())&&(o.children(\"li\").find(\"br\").remove(),o.children(\"li\").append('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\")),0!=d.length&&o.wrapAll(\"<td>\"),o.length){var g=o.parent();this.isParentRedactor(g)&&\"LI\"!=g[0].tagName&&this.nodeTestBlocks(g[0])&&g.replaceWith(g.contents())}this.browser(\"mozilla\")&&this.$editor.focus()}this.selectionRestore(),this.$editor.find(\"#selection-marker-1\").removeAttr(\"id\"),this.sync(),this.callback(\"execCommand\",t,e)},indentingIndent:function(){this.indentingStart(\"indent\")},indentingOutdent:function(){this.indentingStart(\"outdent\")},indentingStart:function(t){if(this.bufferSet(),\"indent\"===t){var e=this.getBlock();if(this.selectionSave(),e&&\"LI\"==e.tagName){var s=$(this.getParent()).closest(\"ol, ul\")[0].tagName,o=this.getBlocks();$.each(o,function(t,e){if(\"LI\"==e.tagName){var o=$(e).prev();if(0!=o.length&&\"LI\"==o[0].tagName){var r=o.children(\"ul, ol\");0==r.length?o.append($(\"<\"+s+\">\").append(e)):r.append(e)}}})}else if(!1===e&&!0===this.opts.linebreaks){this.exec(\"formatBlock\",\"blockquote\");var r=this.getBlock(),e=$('<div data-tagblock=\"\">').html($(r).html());$(r).replaceWith(e);var a=this.normalize($(e).css(\"margin-left\"))+this.opts.indentValue;$(e).css(\"margin-left\",a+\"px\")}else{var n=this.getBlocks();$.each(n,$.proxy(function(t,e){var s=!1;if(\"TD\"!==e.tagName){s=-1!==$.inArray(e.tagName,this.opts.alignmentTags)?$(e):$(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var o=this.normalize(s.css(\"margin-left\"))+this.opts.indentValue;s.css(\"margin-left\",o+\"px\")}},this))}this.selectionRestore()}else{this.selectionSave();var e=this.getBlock();if(e&&\"LI\"==e.tagName){var o=this.getBlocks(),l=0;this.insideOutdent(e,l,o)}else{var n=this.getBlocks();$.each(n,$.proxy(function(t,e){var s=!1;s=-1!==$.inArray(e.tagName,this.opts.alignmentTags)?$(e):$(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var o=this.normalize(s.css(\"margin-left\"))-this.opts.indentValue;o<=0?!0===this.opts.linebreaks&&void 0!==s.data(\"tagblock\")?s.replaceWith(s.html()+\"<br>\"):(s.css(\"margin-left\",\"\"),this.removeEmptyAttr(s,\"style\")):s.css(\"margin-left\",o+\"px\")},this))}this.selectionRestore()}this.sync()},insideOutdent:function(t,e,s){if(t&&\"LI\"==t.tagName){var o=$(t).parent().parent();0!=o.length&&\"LI\"==o[0].tagName?o.after(t):void 0!==s[e]?(t=s[e],e++,this.insideOutdent(t,e,s)):this.execCommand(\"insertunorderedlist\")}},alignmentLeft:function(){this.alignmentSet(\"\",\"JustifyLeft\")},alignmentRight:function(){this.alignmentSet(\"right\",\"JustifyRight\")},alignmentCenter:function(){this.alignmentSet(\"center\",\"JustifyCenter\")},alignmentJustify:function(){this.alignmentSet(\"justify\",\"JustifyFull\")},alignmentSet:function(t,e){if(this.bufferSet(),this.oldIE())return this.document.execCommand(e,!1,!1),!0;this.selectionSave();var s=this.getBlock();if(!s&&this.opts.linebreaks){this.exec(\"formatblock\",\"div\");var o=this.getBlock(),s=$('<div data-tagblock=\"\">').html($(o).html());$(o).replaceWith(s),$(s).css(\"text-align\",t),this.removeEmptyAttr(s,\"style\"),\"\"==t&&void 0!==$(s).data(\"tagblock\")&&$(s).replaceWith($(s).html())}else{var r=this.getBlocks();$.each(r,$.proxy(function(e,s){var o=!1;(o=-1!==$.inArray(s.tagName,this.opts.alignmentTags)?$(s):$(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]))&&(o.css(\"text-align\",t),this.removeEmptyAttr(o,\"style\"))},this))}this.selectionRestore(),this.sync()},cleanEmpty:function(t){var e=this.placeholderStart(t);return!1!==e?e:(!1===this.opts.linebreaks&&(\"\"===t?t=this.opts.emptyHtml:-1!==t.search(/^<hr\\s?\\/?>$/gi)&&(t=\"<hr>\"+this.opts.emptyHtml)),t)},cleanConverters:function(t){return this.opts.convertDivs&&!this.opts.gallery&&(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"<p$1>$2</p>\")),this.opts.paragraphy&&(t=this.cleanParagraphy(t)),t},cleanConvertProtected:function(t){return this.opts.templateVars&&(t=(t=t.replace(/\\{\\{(.*?)\\}\\}/gi,\"<!-- template double $1 -->\")).replace(/\\{(.*?)\\}/gi,\"<!-- template $1 -->\")),t=(t=(t=t.replace(/<script(.*?)>([\\w\\W]*?)<\\/script>/gi,'<title type=\"text/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"$1>$2</title>')).replace(/<style(.*?)>([\\w\\W]*?)<\\/style>/gi,'<section$1 style=\"display: none;\" rel=\"redactor-style-tag\">$2</section>')).replace(/<form(.*?)>([\\w\\W]*?)<\\/form>/gi,'<section$1 rel=\"redactor-form-tag\">$2</section>'),t=this.opts.phpTags?t.replace(/<\\?php([\\w\\W]*?)\\?>/gi,'<section style=\"display: none;\" rel=\"redactor-php-tag\">$1</section>'):t.replace(/<\\?php([\\w\\W]*?)\\?>/gi,\"\")},cleanReConvertProtected:function(t){return this.opts.templateVars&&(t=(t=t.replace(/<!-- template double (.*?) -->/gi,\"{{$1}}\")).replace(/<!-- template (.*?) -->/gi,\"{$1}\")),t=(t=(t=t.replace(/<title type=\"text\\/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"(.*?)>([\\w\\W]*?)<\\/title>/gi,'<script$1 type=\"text/javascript\">$2</script>')).replace(/<section(.*?) style=\"display: none;\" rel=\"redactor-style-tag\">([\\w\\W]*?)<\\/section>/gi,\"<style$1>$2</style>\")).replace(/<section(.*?)rel=\"redactor-form-tag\"(.*?)>([\\w\\W]*?)<\\/section>/gi,\"<form$1$2>$3</form>\"),this.opts.phpTags&&(t=t.replace(/<section style=\"display: none;\" rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi,\"<?php\\r\\n$1\\r\\n?>\")),t},cleanRemoveSpaces:function(t,e){if(!1!==e){var e=[],s=t.match(/<(code|style|script|title)(.*?)>([\\w\\W]*?)<\\/(code|style|script|title)>/gi);if(null===s&&(s=[]),this.opts.phpTags){var o=t.match(/<\\?php([\\w\\W]*?)\\?>/gi);o&&(s=$.merge(s,o))}s&&$.each(s,function(s,o){t=t.replace(o,\"buffer_\"+s),e.push(o)})}return t=(t=(t=(t=(t=(t=t.replace(/\\n/g,\" \")).replace(/[\\t]*/g,\"\")).replace(/\\n\\s*\\n/g,\"\\n\")).replace(/^[\\s\\n]*/g,\" \")).replace(/[\\s\\n]*$/g,\" \")).replace(/>\\s{2,}</g,\"> <\"),t=(t=this.cleanReplacer(t,e)).replace(/\\n\\n/g,\"\\n\")},cleanReplacer:function(t,e){return!1===e||$.each(e,function(e,s){t=t.replace(\"buffer_\"+e,s)}),t},cleanRemoveEmptyTags:function(t){t=t.replace(/[\\u200B-\\u200D\\uFEFF]/g,\"\");for(var e=[\"<b>\\\\s*</b>\",\"<b>&nbsp;</b>\",\"<em>\\\\s*</em>\"],s=[\"<code></code>\",\"<blockquote>\\\\s*</blockquote>\",\"<dd></dd>\",\"<dt></dt>\",\"<ul></ul>\",\"<ol></ol>\",\"<li></li>\",\"<table></table>\",\"<tr></tr>\",\"<span>\\\\s*<span>\",\"<span>&nbsp;<span>\",\"<p>\\\\s*</p>\",\"<p></p>\",\"<p>&nbsp;</p>\",\"<p>\\\\s*<br>\\\\s*</p>\",\"<div>\\\\s*</div>\",\"<div>\\\\s*<br>\\\\s*</div>\"],o=(s=this.opts.removeEmptyTags?s.concat(e):e).length,r=0;r<o;++r)t=t.replace(RegExp(s[r],\"gi\"),\"\");return t},cleanParagraphy:function(t){if(t=$.trim(t),!0===this.opts.linebreaks)return t;if(\"\"===t||\"<p></p>\"===t)return this.opts.emptyHtml;if(t+=\"\\n\",!1===this.opts.removeEmptyTags)return t;var e=[],s=t.match(/<(table|div|code|object)(.*?)>([\\w\\W]*?)<\\/(table|div|code|object)>/gi);s||(s=[]);var o=t.match(/<!--([\\w\\W]*?)-->/gi);if(o&&(s=$.merge(s,o)),this.opts.phpTags){var r=t.match(/<section(.*?)rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi);r&&(s=$.merge(s,r))}function a(e,s,o){return t.replace(RegExp(e,s),o)}s&&$.each(s,function(s,o){e[s]=o,t=t.replace(o,\"{replace\"+s+\"}\\n\")}),t=(t=t.replace(/<br \\/>\\s*<br \\/>/gi,\"\\n\\n\")).replace(/<br><br>/gi,\"\\n\\n\");var n=\"(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|code|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)\";t=a(\"(<\"+n+\"[^>]*>)\",\"gi\",\"\\n$1\"),t=a(\"(</\"+n+\">)\",\"gi\",\"$1\\n\\n\"),t=a(\"\\r\\n\",\"g\",\"\\n\"),t=a(\"\\r\",\"g\",\"\\n\");var l=(t=a(\"/\\n\\n+/\",\"g\",\"\\n\\n\")).split(RegExp(\"\\ns*\\n\",\"g\"),-1);for(var c in t=\"\",l)l.hasOwnProperty(c)&&(-1==l[c].search(\"{replace\")?(l[c]=l[c].replace(/<p>\\n\\t?<\\/p>/gi,\"\"),l[c]=l[c].replace(/<p><\\/p>/gi,\"\"),\"\"!=l[c]&&(t+=\"<p>\"+l[c].replace(/^\\n+|\\n+$/g,\"\")+\"</p>\")):t+=l[c]);return t=a(\"<p><p>\",\"gi\",\"<p>\"),t=a(\"</p></p>\",\"gi\",\"</p>\"),t=a(\"<p>s?</p>\",\"gi\",\"\"),t=a(\"<p>([^<]+)</(div|address|form)>\",\"gi\",\"<p>$1</p></$2>\"),t=a(\"<p>(</?\"+n+\"[^>]*>)</p>\",\"gi\",\"$1\"),t=a(\"<p>(<li.+?)</p>\",\"gi\",\"$1\"),t=a(\"<p>s?(</?\"+n+\"[^>]*>)\",\"gi\",\"$1\"),t=a(\"(</?\"+n+\"[^>]*>)s?</p>\",\"gi\",\"$1\"),t=a(\"(</?\"+n+\"[^>]*>)s?<br />\",\"gi\",\"$1\"),t=a(\"<br />(s*</?(?:p|li|div|dl|dd|dt|th|code|td|ul|ol)[^>]*>)\",\"gi\",\"$1\"),t=a(\"\\n</p>\",\"gi\",\"</p>\"),t=a(\"<li><p>\",\"gi\",\"<li>\"),t=a(\"</p></li>\",\"gi\",\"</li>\"),t=a(\"</li><p>\",\"gi\",\"</li>\"),t=a(\"<p>\t?\\n?<p>\",\"gi\",\"<p>\"),t=a(\"</dt><p>\",\"gi\",\"</dt>\"),t=a(\"</dd><p>\",\"gi\",\"</dd>\"),t=a(\"<br></p></blockquote>\",\"gi\",\"</blockquote>\"),t=a(\"<p>\t*</p>\",\"gi\",\"\"),$.each(e,function(e,s){t=t.replace(\"{replace\"+e+\"}\",s)}),$.trim(t)},cleanConvertInlineTags:function(t,e){var s=\"strong\";\"b\"===this.opts.boldTag&&(s=\"b\");var o=\"em\";return\"i\"===this.opts.italicTag&&(o=\"i\"),t=(t=t.replace(/<span style=\"font-style: italic;\">([\\w\\W]*?)<\\/span>/gi,\"<\"+o+\">$1</\"+o+\">\")).replace(/<span style=\"font-weight: bold;\">([\\w\\W]*?)<\\/span>/gi,\"<\"+s+\">$1</\"+s+\">\"),t=\"strong\"===this.opts.boldTag?t.replace(/<b>([\\w\\W]*?)<\\/b>/gi,\"<strong>$1</strong>\"):t.replace(/<strong>([\\w\\W]*?)<\\/strong>/gi,\"<b>$1</b>\"),t=(t=\"em\"===this.opts.italicTag?t.replace(/<i>([\\w\\W]*?)<\\/i>/gi,\"<em>$1</em>\"):t.replace(/<em>([\\w\\W]*?)<\\/em>/gi,\"<i>$1</i>\")).replace(/<span style=\"text-decoration: underline;\">([\\w\\W]*?)<\\/span>/gi,\"<u>$1</u>\"),t=!0!==e?t.replace(/<strike>([\\w\\W]*?)<\\/strike>/gi,\"<del>$1</del>\"):t.replace(/<del>([\\w\\W]*?)<\\/del>/gi,\"<strike>$1</strike>\")},cleanStripTags:function(t){if(\"\"==t||void 0===t)return t;var e=!1;!1!==this.opts.allowedTags&&(e=!0);var s=!0===e?this.opts.allowedTags:this.opts.deniedTags,o=/<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;return t=t.replace(o,function(t,o){return!0===e?$.inArray(o.toLowerCase(),s)>\"-1\"?t:\"\":$.inArray(o.toLowerCase(),s)>\"-1\"?\"\":t}),t=this.cleanConvertInlineTags(t)},cleanSavePreCode:function(t,e){var s=t.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/gi);return null!==s&&$.each(s,$.proxy(function(s,o){var r=o.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/i);r[3]=r[3].replace(/&nbsp;/g,\" \"),!1!==e&&(r[3]=this.cleanEncodeEntities(r[3])),r[3]=r[3].replace(/\\$/g,\"&#36;\"),t=t.replace(o,\"<\"+r[1]+r[2]+\">\"+r[3]+\"</\"+r[1]+\">\")},this)),t},cleanEncodeEntities:function(t){return(t=String(t).replace(/&amp;/g,\"&\").replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&quot;/g,'\"')).replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},cleanUnverified:function(){var t=this.$editor.find(\"li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite\");t.filter('[style*=\"background-color: transparent;\"][style*=\"line-height\"]').css(\"background-color\",\"\").css(\"line-height\",\"\"),t.filter('[style*=\"background-color: transparent;\"]').css(\"background-color\",\"\"),t.css(\"line-height\",\"\"),$.each(t,$.proxy(function(t,e){this.removeEmptyAttr(e,\"style\")},this));var e=this.$editor.find(\"b, strong, i, em, u, strike, del\");e.css(\"font-size\",\"\"),$.each(e,$.proxy(function(t,e){this.removeEmptyAttr(e,\"style\")},this)),this.$editor.find('div[style=\"text-align: -webkit-auto;\"]').contents().unwrap(),this.$editor.find(\"ul, ol, li\").removeAttr(\"style\")},cleanHtml:function(t){var e,s=0,o=t.length,r=0,a=null,n=null,l=\"\",c=\"\",h=\"\";for(this.cleanlevel=0;s<o;s++){if(r=s,-1==t.substr(s).indexOf(\"<\")){c+=t.substr(s);break}for(;r<o&&\"<\"!=t.charAt(r);)r++;for(s!=r&&((h=t.substr(s,r-s)).match(/^\\s{2,}$/g)||(\"\\n\"==c.charAt(c.length-1)?c+=this.cleanGetTabs():\"\\n\"==h.charAt(0)&&(c+=\"\\n\"+this.cleanGetTabs(),h=h.replace(/^\\s+/,\"\")),c+=h),h.match(/\\n/)&&(c+=\"\\n\"+this.cleanGetTabs())),a=r;r<o&&\">\"!=t.charAt(r);)r++;if(l=t.substr(a,r-a),s=r,\"!--\"==l.substr(1,3)){if(!l.match(/--$/)){for(;\"-->\"!=t.substr(r,3);)r++;r+=2,l=t.substr(a,r-a),s=r}\"\\n\"!=c.charAt(c.length-1)&&(c+=\"\\n\"),c+=this.cleanGetTabs(),c+=l+\">\\n\"}else\"!\"==l[1]?c=this.placeTag(l+\">\",c):\"?\"==l[1]?c+=l+\">\\n\":(e=l.match(/^<(script|style|pre|code)/i))?(e[1]=e[1].toLowerCase(),l=this.cleanTag(l),c=this.placeTag(l,c),(n=String(t.substr(s+1)).toLowerCase().indexOf(\"</\"+e[1]))&&(h=t.substr(s+1,n),s+=n,c+=h)):(l=this.cleanTag(l),c=this.placeTag(l,c))}return this.cleanFinish(c)},cleanGetTabs:function(){for(var t=\"\",e=0;e<this.cleanlevel;e++)t+=\"\t\";return t},cleanFinish:function(t){return t=(t=(t=(t=t.replace(/\\n\\s*\\n/g,\"\\n\")).replace(/^[\\s\\n]*/,\"\")).replace(/[\\s\\n]*$/,\"\")).replace(/<script(.*?)>\\n<\\/script>/gi,\"<script$1></script>\"),this.cleanlevel=0,t},cleanTag:function(t){var e,s=\"\";t=(t=(t=t.replace(/\\n/g,\" \")).replace(/\\s{2,}/g,\" \")).replace(/^\\s+|\\s+$/g,\" \");var o=\"\";for(t.match(/\\/$/)&&(o=\"/\",t=t.replace(/\\/+$/,\"\"));e=/\\s*([^= ]+)(?:=((['\"']).*?\\3|[^ ]+))?/.exec(t);)e[2]?s+=e[1].toLowerCase()+\"=\"+e[2]:e[1]&&(s+=e[1].toLowerCase()),s+=\" \",t=t.substr(e[0].length);return s.replace(/\\s*$/,\"\")+o+\">\"},placeTag:function(t,e){var s=t.match(this.cleannewLevel);return(t.match(this.cleanlineBefore)||s)&&(e=e.replace(/\\s*$/,\"\"),e+=\"\\n\"),s&&\"/\"==t.charAt(1)&&this.cleanlevel--,\"\\n\"==e.charAt(e.length-1)&&(e+=this.cleanGetTabs()),s&&\"/\"!=t.charAt(1)&&this.cleanlevel++,e+=t,(t.match(this.cleanlineAfter)||t.match(this.cleannewLevel))&&(e=e.replace(/ *$/,\"\"),e+=\"\\n\"),e},formatEmpty:function(t){var e=$.trim(this.$editor.html());if(this.opts.linebreaks)\"\"==e&&(t.preventDefault(),this.$editor.html(\"\"),this.focus());else{var s=(e=e.replace(/<br\\s?\\/?>/i,\"\")).replace(/<p>\\s?<\\/p>/gi,\"\");if(\"\"===e||\"\"===s){t.preventDefault();var o=$(this.opts.emptyHtml).get(0);this.$editor.html(o),this.focus()}}this.sync()},formatBlocks:function(t){this.browser(\"mozilla\")&&this.isFocused()&&this.$editor.focus(),this.bufferSet();var e=this.getBlocks();this.selectionSave(),$.each(e,$.proxy(function(e,s){if(\"LI\"!==s.tagName){var o=$(s).parent();if(\"p\"===t){if(\"P\"===s.tagName&&0!=o.length&&\"BLOCKQUOTE\"===o[0].tagName||\"BLOCKQUOTE\"===s.tagName){this.formatQuote();return}if(this.opts.linebreaks){if(!s||0!=s.tagName.search(/H[1-6]/))return;$(s).replaceWith(s.innerHTML+\"<br>\")}else this.formatBlock(t,s)}else this.formatBlock(t,s)}},this)),this.selectionRestore(),this.sync()},formatBlock:function(t,e){if(!1===e&&(e=this.getBlock()),!1===e&&!0===this.opts.linebreaks)return this.execCommand(\"formatblock\",t),!0;var s=\"\";if(\"code\"!==t?s=$(e).contents():(s=$(e).html(),\"\"===$.trim(s)&&(s='<span id=\"selection-marker-1\"></span>')),\"CODE\"===e.tagName&&(t=\"p\"),!0===this.opts.linebreaks&&\"p\"===t)$(e).replaceWith($(\"<div>\").append(s).html()+\"<br>\");else{var o=this.getParent(),r=$(\"<\"+t+\">\").append(s);$(e).replaceWith(r),o&&\"TD\"==o.tagName&&$(r).wrapAll(\"<td>\")}},formatChangeTag:function(t,e,s){!1!==s&&this.selectionSave();var o=$(\"<\"+e+\"/>\");return $(t).replaceWith(function(){return o.append($(this).contents())}),!1!==s&&this.selectionRestore(),o},formatQuote:function(){if(this.browser(\"mozilla\")&&this.isFocused()&&this.$editor.focus(),this.bufferSet(),!1===this.opts.linebreaks){this.selectionSave();var t=this.getBlocks(),e=!1,s=t.length;if(t){var o=\"\",r=\"\",a=!1,n=!0;if($.each(t,function(t,e){\"P\"!==e.tagName&&(n=!1)}),$.each(t,$.proxy(function(l,c){if(\"BLOCKQUOTE\"===c.tagName)this.formatBlock(\"p\",c,!1);else if(\"P\"===c.tagName){if(\"BLOCKQUOTE\"==(e=$(c).parent())[0].tagName){var h=$(e).children(\"p\").length;1==h?$(e).replaceWith(c):h==s?(a=\"blockquote\",o+=this.outerHtml(c)):(a=\"html\",o+=this.outerHtml(c),0==l?($(c).addClass(\"redactor-replaced\").empty(),r=this.outerHtml(c)):$(c).remove())}else!1===n||1==t.length?this.formatBlock(\"blockquote\",c,!1):(a=\"paragraphs\",o+=this.outerHtml(c))}else\"LI\"!==c.tagName&&this.formatBlock(\"blockquote\",c,!1)},this)),a){if(\"paragraphs\"==a)$(t[0]).replaceWith(\"<blockquote>\"+o+\"</blockquote>\"),$(t).remove();else if(\"blockquote\"==a)$(e).replaceWith(o);else if(\"html\"==a){var l=this.$editor.html().replace(r,\"</blockquote>\"+o+\"<blockquote>\");this.$editor.html(l),this.$editor.find(\"blockquote\").each(function(){\"\"==$.trim($(this).html())&&$(this).remove()})}}}this.selectionRestore()}else{var c=this.getBlock();if(\"BLOCKQUOTE\"===c.tagName){this.selectionSave();var l=$.trim($(c).html()),h=$.trim(this.getSelectionHtml());if((l=l.replace(/<span(.*?)id=\"selection-marker(.*?)<\\/span>/gi,\"\"))==h)$(c).replaceWith($(c).html()+\"<br>\");else{this.inlineFormat(\"tmp\");var d=this.$editor.find(\"tmp\");d.empty();var p=this.$editor.html().replace(\"<tmp></tmp>\",'</blockquote><span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"+h+\"<blockquote>\");this.$editor.html(p),d.remove(),this.$editor.find(\"blockquote\").each(function(){\"\"==$.trim($(this).html())&&$(this).remove()})}this.selectionRestore(),this.$editor.find(\"span#selection-marker-1\").attr(\"id\",!1)}else{var u=this.selectionWrap(\"blockquote\"),l=$(u).html(),f=[\"ul\",\"ol\",\"table\",\"tr\",\"tbody\",\"thead\",\"tfoot\",\"dl\"];$.each(f,function(t,e){l=(l=l.replace(RegExp(\"<\"+e+\"(.*?)>\",\"gi\"),\"\")).replace(RegExp(\"</\"+e+\">\",\"gi\"),\"\")});var m=this.opts.blockLevelElements;$.each(m,function(t,e){l=(l=l.replace(RegExp(\"<\"+e+\"(.*?)>\",\"gi\"),\"\")).replace(RegExp(\"</\"+e+\">\",\"gi\"),\"<br>\")}),$(u).html(l),this.selectionElement(u);var g=$(u).next();0!=g.length&&\"BR\"===g[0].tagName&&g.remove()}}this.sync()},blockRemoveAttr:function(t,e){$(this.getBlocks()).removeAttr(t),this.sync()},blockSetAttr:function(t,e){$(this.getBlocks()).attr(t,e),this.sync()},blockRemoveStyle:function(t){var e=this.getBlocks();$(e).css(t,\"\"),this.removeEmptyAttr(e,\"style\"),this.sync()},blockSetStyle:function(t,e){$(this.getBlocks()).css(t,e),this.sync()},blockRemoveClass:function(t){var e=this.getBlocks();$(e).removeClass(t),this.removeEmptyAttr(e,\"class\"),this.sync()},blockSetClass:function(t){$(this.getBlocks()).addClass(t),this.sync()},inlineRemoveClass:function(t){this.selectionSave(),this.inlineEachNodes(function(e){$(e).removeClass(t),this.removeEmptyAttr(e,\"class\")}),this.selectionRestore(),this.sync()},inlineSetClass:function(t){$(this.getCurrent()).hasClass(t)||this.inlineMethods(\"addClass\",t)},inlineRemoveStyle:function(t){this.selectionSave(),this.inlineEachNodes(function(e){$(e).css(t,\"\"),this.removeEmptyAttr(e,\"style\")}),this.selectionRestore(),this.sync()},inlineSetStyle:function(t,e){this.inlineMethods(\"css\",t,e)},inlineRemoveAttr:function(t){this.selectionSave();var e=this.getRange(),s=this.getElement(),o=this.getNodes();(e.collapsed||e.startContainer===e.endContainer&&s)&&(o=$(s)),$(o).removeAttr(t),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(t,e){this.inlineMethods(\"attr\",t,e)},inlineMethods:function(t,e,s){this.bufferSet(),this.selectionSave();var o=this.getRange(),r=this.getElement();if((o.collapsed||o.startContainer===o.endContainer)&&r&&!this.nodeTestBlocks(r))$(r)[t](e,s);else{var a,n=s;switch(e){case\"font-size\":a=\"fontSize\",n=4;break;case\"font-family\":a=\"fontName\";break;case\"color\":a=\"foreColor\";break;case\"background-color\":a=\"backColor\"}this.document.execCommand(a,!1,n);var l=this.$editor.find(\"font\");$.each(l,$.proxy(function(o,r){this.inlineSetMethods(t,r,e,s)},this))}this.selectionRestore(),this.sync()},inlineSetMethods:function(t,e,s,o){var r,a=$(e).parent(),n=this.getSelectionText(),l=$(a).text();return n==l&&a&&\"INLINE\"===a[0].tagName&&0!=a[0].attributes.length?(r=a,$(e).replaceWith($(e).html())):(r=$(\"<inline>\").append($(e).contents()),$(e).replaceWith(r)),$(r)[t](s,o),r},inlineEachNodes:function(t){var e,s=this.getRange(),o=this.getElement(),r=this.getNodes();(s.collapsed||s.startContainer===s.endContainer&&o)&&(r=$(o),e=!0),$.each(r,$.proxy(function(s,o){if(!e&&\"INLINE\"!==o.tagName){var r=this.getSelectionText(),a=$(o).parent().text();if(r!=a||\"INLINE\"!==o.parentNode.tagName||$(o.parentNode).hasClass(\"redactor_editor\"))return;o=o.parentNode}t.call(this,o)},this))},inlineUnwrapSpan:function(){var t=this.$editor.find(\"inline\");$.each(t,$.proxy(function(t,e){var s=$(e);void 0===s.attr(\"class\")&&void 0===s.attr(\"style\")&&s.contents().unwrap()},this))},inlineFormat:function(t){this.selectionSave(),this.document.execCommand(\"fontSize\",!1,4);var e,s=this.$editor.find(\"font\");$.each(s,function(s,o){var r=$(\"<\"+t+\"/>\").append($(o).contents());$(o).replaceWith(r),e=r}),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(t){this.selectionSave();var e=t.toUpperCase(),s=this.getNodes(),o=$(this.getParent()).parent();$.each(s,function(t,s){s.tagName===e&&this.inlineRemoveFormatReplace(s)}),o&&o[0].tagName===e&&this.inlineRemoveFormatReplace(o),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(t){$(t).replaceWith($(t).contents())},insertHtml:function(t,e){var s=this.getCurrent(),o=s.parentNode;this.focusWithSaveScroll(),this.bufferSet();var r=$(\"<div>\").append($.parseHTML(t));t=r.html(),t=this.cleanRemoveEmptyTags(t),r=$(\"<div>\").append($.parseHTML(t));var a=this.getBlock();if(1==r.contents().length){var n=r.contents()[0].tagName;(\"P\"!=n&&n==a.tagName||\"CODE\"==n)&&(r=$(\"<div>\").append(t))}this.opts.linebreaks&&(t=t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),this.opts.linebreaks||1!=r.contents().length||3!=r.contents()[0].nodeType||!(this.getRangeSelectedNodes().length>2)&&s&&(\"BODY\"!=s.tagName||o)&&\"HTML\"!=o.tagName||(t=\"<p>\"+t+\"</p>\"),t=this.setSpansVerifiedHtml(t),r.contents().length>1&&a||r.contents().is(\"p, :header, ul, ol, li, div, table, td, blockquote, code, address, section, header, footer, aside, article\")?this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(t):this.document.selection.createRange().pasteHTML(t):this.document.execCommand(\"inserthtml\",!1,t):this.insertHtmlAdvanced(t,!1),this.selectall&&this.window.setTimeout($.proxy(function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())},this),1),this.observeStart(),this.setNonEditable(),!1!==e&&this.sync()},insertHtmlAdvanced:function(t,e){t=this.setSpansVerifiedHtml(t);var s=this.getSelection();if(s.getRangeAt&&s.rangeCount){var o=s.getRangeAt(0);o.deleteContents();var r=document.createElement(\"div\");r.innerHTML=t;for(var a,n,l=document.createDocumentFragment();a=r.firstChild;)n=l.appendChild(a);o.insertNode(l),n&&((o=o.cloneRange()).setStartAfter(n),o.collapse(!0),s.removeAllRanges(),s.addRange(o))}!1!==e&&this.sync()},insertBeforeCursor:function(t){t=this.setSpansVerifiedHtml(t);var e=$(t),s=document.createElement(\"span\");s.innerHTML=\"\u200b\";var o=this.getRange();o.insertNode(s),o.insertNode(e[0]),o.collapse(!1);var r=this.getSelection();r.removeAllRanges(),r.addRange(o),this.sync()},insertText:function(t){var e=$($.parseHTML(t));e.length&&(t=e.text()),this.focusWithSaveScroll(),this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(t):this.document.selection.createRange().pasteHTML(t):this.document.execCommand(\"inserthtml\",!1,t),this.sync()},insertNode:function(t){if(\"SPAN\"==(t=t[0]||t).tagName){var e=\"inline\",s=t.outerHTML,o=RegExp(\"<\"+t.tagName,\"i\"),r=s.replace(o,\"<\"+e);o=RegExp(\"</\"+t.tagName,\"i\"),r=r.replace(o,\"</\"+e),t=$(r)[0]}var a=this.getSelection();return a.getRangeAt&&a.rangeCount&&((range=a.getRangeAt(0)).deleteContents(),range.insertNode(t),range.setEndAfter(t),range.setStartAfter(t),a.removeAllRanges(),a.addRange(range)),t},insertNodeToCaretPositionFromPoint:function(t,e){var s,o=t.clientX,r=t.clientY;if(this.document.caretPositionFromPoint){var a=this.document.caretPositionFromPoint(o,r);(s=this.getRange()).setStart(a.offsetNode,a.offset),s.collapse(!0),s.insertNode(e)}else if(this.document.caretRangeFromPoint)(s=this.document.caretRangeFromPoint(o,r)).insertNode(e);else if(void 0!==document.body.createTextRange){(s=this.document.body.createTextRange()).moveToPoint(o,r);var n=s.duplicate();n.moveToPoint(o,r),s.setEndPoint(\"EndToEnd\",n),s.select()}},insertAfterLastElement:function(t,e){if(void 0!==e&&(t=e),this.isEndOfElement()){if(this.opts.linebreaks){var s=$(\"<div>\").append($.trim(this.$editor.html())).contents(),o=s.last()[0];if(\"SPAN\"==o.tagName&&\"\"==o.innerHTML&&(o=s.prev()[0]),this.outerHtml(o)!=this.outerHtml(t))return!1}else if(this.$editor.contents().last()[0]!==t)return!1;this.insertingAfterLastElement(t)}},insertingAfterLastElement:function(t){if(this.bufferSet(),!1===this.opts.linebreaks){var e=$(this.opts.emptyHtml);$(t).after(e),this.selectionStart(e)}else{var e=$('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];$(t).after(e),$(e).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find(\"span#selection-marker-1\").removeAttr(\"id\")}},insertLineBreak:function(t){this.selectionSave();var e=\"<br>\";if(!0==t&&(e=\"<br><br>\"),this.browser(\"mozilla\")){var s=$(\"<span>\").html(this.opts.invisibleSpace);this.$editor.find(\"#selection-marker-1\").before(e).before(s).before(this.opts.invisibleSpace),this.setCaretAfter(s[0]),s.remove(),this.selectionRemoveMarkers()}else{var o=this.getParent();if(o&&\"A\"===o.tagName){var r=this.getCaretOffset(o),a=$.trim($(o).text()).replace(/\\n\\r\\n/g,\"\").length;if(r==a){this.selectionRemoveMarkers();var n=$('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];return $(o).after(n),$(n).before(e+(this.browser(\"webkit\")?this.opts.invisibleSpace:\"\")),this.selectionRestore(),!0}}this.$editor.find(\"#selection-marker-1\").before(e+(this.browser(\"webkit\")?this.opts.invisibleSpace:\"\")),this.selectionRestore()}},insertDoubleLineBreak:function(){this.insertLineBreak(!0)},replaceLineBreak:function(t){var e=$(\"<br>\"+this.opts.invisibleSpace);$(t).replaceWith(e),this.selectionStart(e)},pasteClean:function(t){if(t=this.callback(\"pasteBefore\",!1,t),this.browser(\"msie\")){var e=$.trim(t);0==e.search(/^<a(.*?)>(.*?)<\\/a>$/i)&&(t=t.replace(/^<a(.*?)>(.*?)<\\/a>$/i,\"$2\"))}if(t=t.replace(/on([a-z]+)=|javascript\\:/gi,\"\"),this.opts.pastePlainText){var e=this.document.createElement(\"div\");return t=t.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi,\"\\n\"),e.innerHTML=t,t=e.textContent||e.innerText,t=(t=$.trim(t)).replace(\"\\n\",\"<br>\"),t=this.cleanParagraphy(t),this.pasteInsert(t),!1}var s=!1;if(this.currentOrParentIs(\"TD\")){s=!0;var o=this.opts.blockLevelElements;o.push(\"tr\"),o.push(\"table\"),$.each(o,function(e,s){t=(t=t.replace(RegExp(\"<\"+s+\"(.*?)>\",\"gi\"),\"\")).replace(RegExp(\"</\"+s+\">\",\"gi\"),\"<br>\")})}if(this.currentOrParentIs(\"CODE\"))return t=this.pastePre(t),this.pasteInsert(t),!0;if(t=(t=(t=(t=(t=(t=(t=t.replace(/<img(.*?)v:shapes=(.*?)>/gi,\"\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpFirst\"([\\w\\W]*?)<\\/p>/gi,\"<ul><li$2</li>\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpMiddle\"([\\w\\W]*?)<\\/p>/gi,\"<li$2</li>\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpLast\"([\\w\\W]*?)<\\/p>/gi,\"<li$2</li></ul>\")).replace(/<p(.*?)class=\"MsoListParagraph\"([\\w\\W]*?)<\\/p>/gi,\"<ul><li$2</li></ul>\")).replace(/\u00b7/g,\"\")).replace(/<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi,\"\"),!0===this.opts.cleanSpaces&&(t=(t=t.replace(/(&nbsp;){2,}/gi,\"&nbsp;\")).replace(/&nbsp;/gi,\" \")),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<b\\sid=\"internal-source-marker(.*?)\">([\\w\\W]*?)<\\/b>/gi,\"$2\")).replace(/<b(.*?)id=\"docs-internal-guid(.*?)\">([\\w\\W]*?)<\\/b>/gi,\"$3\")).replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style=\"font-weight: bold;\"><span style=\"font-style: italic;\">')).replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style=\"font-style: italic;\">')).replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style=\"font-weight: bold;\">')).replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style=\"text-decoration: underline;\">')).replace(/<td>\\u200b*<\\/td>/gi,\"[td]\")).replace(/<td>&nbsp;<\\/td>/gi,\"[td]\")).replace(/<td><br><\\/td>/gi,\"[td]\")).replace(/<td(.*?)colspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi,'[td colspan=\"$2\"]$4[/td]')).replace(/<td(.*?)rowspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi,'[td rowspan=\"$2\"]$4[/td]')).replace(/<a(.*?)href=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/a>/gi,'[a href=\"$2\"]$4[/a]')).replace(/<iframe(.*?)>([\\w\\W]*?)<\\/iframe>/gi,\"[iframe$1]$2[/iframe]\")).replace(/<video(.*?)>([\\w\\W]*?)<\\/video>/gi,\"[video$1]$2[/video]\")).replace(/<audio(.*?)>([\\w\\W]*?)<\\/audio>/gi,\"[audio$1]$2[/audio]\")).replace(/<embed(.*?)>([\\w\\W]*?)<\\/embed>/gi,\"[embed$1]$2[/embed]\")).replace(/<object(.*?)>([\\w\\W]*?)<\\/object>/gi,\"[object$1]$2[/object]\")).replace(/<param(.*?)>/gi,\"[param$1]\")).replace(/<img(.*?)>/gi,\"[img$1]\")).replace(/ class=\"(.*?)\"/gi,\"\")).replace(/<(\\w+)([\\w\\W]*?)>/gi,\"<$1>\"),this.opts.linebreaks?(t=(t=t.replace(/<strong><\\/strong>/gi,\"\")).replace(/<u><\\/u>/gi,\"\"),this.opts.cleanFontTag&&(t=t.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi,\"$2\")),t=t.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi,\"<br>\")):t=t.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi,\"\"),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<div>\\s*?\\t*?\\n*?(<ul>|<ol>|<p>)/gi,\"$1\")).replace(/\\[td colspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi,'<td colspan=\"$1\">$2</td>')).replace(/\\[td rowspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi,'<td rowspan=\"$1\">$2</td>')).replace(/\\[td\\]/gi,\"<td>&nbsp;</td>\")).replace(/\\[a href=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/a\\]/gi,'<a href=\"$1\">$2</a>')).replace(/\\[iframe(.*?)\\]([\\w\\W]*?)\\[\\/iframe\\]/gi,\"<iframe$1>$2</iframe>\")).replace(/\\[video(.*?)\\]([\\w\\W]*?)\\[\\/video\\]/gi,\"<video$1>$2</video>\")).replace(/\\[audio(.*?)\\]([\\w\\W]*?)\\[\\/audio\\]/gi,\"<audio$1>$2</audio>\")).replace(/\\[embed(.*?)\\]([\\w\\W]*?)\\[\\/embed\\]/gi,\"<embed$1>$2</embed>\")).replace(/\\[object(.*?)\\]([\\w\\W]*?)\\[\\/object\\]/gi,\"<object$1>$2</object>\")).replace(/\\[param(.*?)\\]/gi,\"<param$1>\")).replace(/\\[img(.*?)\\]/gi,\"<img$1>\"),t=this.opts.convertDivs?(t=(t=(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"<p>$2</p>\")).replace(/<\\/div><p>/gi,\"<p>\")).replace(/<\\/p><\\/div>/gi,\"</p>\")).replace(/<p><\\/p>/gi,\"<br />\"):t.replace(/<div><\\/div>/gi,\"<br />\"),t=this.cleanStripTags(t),this.currentOrParentIs(\"LI\")?t=t.replace(/<p>([\\w\\W]*?)<\\/p>/gi,\"$1<br>\"):!1===s&&(t=this.cleanParagraphy(t)),t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi,\"$2\")).replace(/<img>/gi,\"\")).replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi,\"\")).replace(/\\n{3,}/gi,\"\\n\")).replace(/<p><p>/gi,\"<p>\")).replace(/<\\/p><\\/p>/gi,\"</p>\")).replace(/<li>(\\s*|\\t*|\\n*)<p>/gi,\"<li>\")).replace(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi,\"</li>\"),!0===this.opts.linebreaks&&(t=t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),t=(t=(t=t.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi,\"\")).replace(/<img src=\"webkit-fake-url\\:\\/\\/(.*?)\"(.*?)>/gi,\"\")).replace(/<td(.*?)>(\\s*|\\t*|\\n*)<p>([\\w\\W]*?)<\\/p>(\\s*|\\t*|\\n*)<\\/td>/gi,\"<td$1>$3</td>\"),this.opts.convertDivs&&(t=(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"$2\")).replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"$2\")),this.pasteClipboardMozilla=!1,this.browser(\"mozilla\")){if(this.opts.clipboardUpload){var r=t.match(/<img src=\"data:image(.*?)\"(.*?)>/gi);if(null!==r)for(var a in this.pasteClipboardMozilla=r,r){var n=r[a].replace(\"<img\",'<img data-mozilla-paste-image=\"'+a+'\" ');t=t.replace(r[a],n)}}for(;/<br>$/gi.test(t);)t=t.replace(/<br>$/gi,\"\")}if(t=t.replace(/<p>\u2022([\\w\\W]*?)<\\/p>/gi,\"<li>$1</li>\"),this.browser(\"msie\"))for(;/<font>([\\w\\W]*?)<\\/font>/gi.test(t);)t=t.replace(/<font>([\\w\\W]*?)<\\/font>/gi,\"$1\");!1===s&&(t=(t=(t=(t=t.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$4</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$3</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$4</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$3</td>\")),t=(t=t.replace(/\\n/g,\" \")).replace(/<p>\\n?<li>/gi,\"<li>\"),this.pasteInsert(t)},pastePre:function(t){t=t.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi,\"\\n\");var e=this.document.createElement(\"div\");return e.innerHTML=t,this.cleanEncodeEntities(e.textContent||e.innerText)},pasteInsert:function(t){t=this.callback(\"pasteAfter\",!1,t),this.selectall?(this.$editor.html(t),this.selectionRemove(),this.focusEnd(),this.sync()):this.insertHtml(t),this.selectall=!1,setTimeout($.proxy(function(){this.rtePaste=!1,this.browser(\"mozilla\")&&this.$editor.find(\"p:empty\").remove(),!1!==this.pasteClipboardMozilla&&this.pasteClipboardUploadMozilla()},this),100),this.opts.autoresize&&!0!==this.fullscreen?$(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardAppendFields:function(t){return!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(e,s){null!=s&&0===s.toString().indexOf(\"#\")&&(s=$(s).val()),t[e]=s},this)),t},pasteClipboardUploadMozilla:function(){var t=this.$editor.find(\"img[data-mozilla-paste-image]\");$.each(t,$.proxy(function(t,e){var s=$(e),o=e.src.split(\",\"),r={contentType:o[0].split(\";\")[0].split(\":\")[1],data:o[1]};r=this.pasteClipboardAppendFields(r),$.post(this.opts.clipboardUploadUrl,r,$.proxy(function(t){var e=\"string\"==typeof t?$.parseJSON(t):t;s.attr(\"src\",e.image.url),s.removeAttr(\"data-mozilla-paste-image\"),this.sync(),this.callback(\"imageUpload\",s,e)},this))},this))},pasteClipboardUpload:function(t){var e=t.target.result,s=e.split(\",\"),o={contentType:s[0].split(\";\")[0].split(\":\")[1],data:s[1]};this.opts.clipboardUpload?(o=this.pasteClipboardAppendFields(o),$.post(this.opts.clipboardUploadUrl,o,$.proxy(function(t){var e=\"string\"==typeof t?$.parseJSON(t):t,s='<img src=\"'+e.image.url+'\" id=\"clipboard-image-marker\" />';this.execCommand(\"inserthtml\",s,!1);var o=$(this.$editor.find(\"img#clipboard-image-marker\"));o.length?o.removeAttr(\"id\"):o=!1,this.sync(),o&&this.callback(\"imageUpload\",o,e)},this))):this.insertHtml('<img src=\"'+e+'\" />')},bufferSet:function(t){!1!==t&&this.selectionSave(),this.opts.buffer.push(this.$editor.html()),!1!==t&&this.selectionRemoveMarkers(\"buffer\")},bufferUndo:function(){if(0===this.opts.buffer.length){this.focusWithSaveScroll();return}this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),setTimeout($.proxy(this.observeStart,this),100)},bufferRedo:function(){if(0===this.opts.rebuffer.length)return this.focusWithSaveScroll(),!1;this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),setTimeout($.proxy(this.observeStart,this),4)},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find(\"a\").on(\"click\",$.proxy(this.linkObserver,this)),this.$editor.on(\"click.redactor\",$.proxy(function(t){this.linkObserverTooltipClose(t)},this)),$(document).on(\"click.redactor\",$.proxy(function(t){this.linkObserverTooltipClose(t)},this))},observeImages:function(){if(!1===this.opts.observeImages)return!1;this.$editor.find(\"img\").each($.proxy(function(t,e){this.browser(\"msie\")&&$(e).attr(\"unselectable\",\"on\");var s=$(e).parent();s.hasClass(\"royalSlider\")||s.hasClass(\"fotorama\")||this.imageResize(e)},this)),this.$editor.find(\".fotorama, .royalSlider\").on(\"click\",$.proxy(this.editGallery,this))},linkObserver:function(t){var e=$(t.target),s=$(t.target).parent();if(!(s.hasClass(\"royalSlider\")||s.hasClass(\"fotorama\"))&&0!=e.length&&\"A\"===e[0].tagName){var o=e.offset();if(this.opts.iframe){var r=this.$frame.offset();o.top=r.top+(o.top-$(this.document).scrollTop()),o.left+=r.left}var a=$('<span class=\"redactor-link-tooltip\"></span>'),n=e.attr(\"href\");void 0===n&&(n=\"\"),n.length>24&&(n=n.substring(0,24)+\"...\");var l=$('<a href=\"'+e.attr(\"href\")+'\" target=\"_blank\">'+n+\"</a>\").on(\"click\",$.proxy(function(t){this.linkObserverTooltipClose(!1)},this)),c=$('<a href=\"#\">'+this.opts.curLang.edit+\"</a>\").on(\"click\",$.proxy(function(t){t.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)},this)),h=$('<a href=\"#\">'+this.opts.curLang.unlink+\"</a>\").on(\"click\",$.proxy(function(t){t.preventDefault(),this.execCommand(\"unlink\"),this.linkObserverTooltipClose(!1)},this));a.append(l),a.append(\" | \"),a.append(c),a.append(\" | \"),a.append(h),a.css({top:o.top+20+\"px\",left:o.left+\"px\"}),$(\".redactor-link-tooltip\").remove(),$(\"body\").append(a)}},linkObserverTooltipClose:function(t){if(!1!==t&&\"A\"==t.target.tagName)return!1;$(\".redactor-link-tooltip\").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return this.document.createRange()},selectionElement:function(t){this.setCaret(t)},selectionStart:function(t){this.selectionSet(t[0]||t,0,null,0)},selectionEnd:function(t){this.selectionSet(t[0]||t,1,null,1)},selectionSet:function(t,e,s,o){null==s&&(s=t),null==o&&(o=e);var r=this.getSelection();if(r){if(\"P\"==t.tagName&&\"\"==t.innerHTML&&(t.innerHTML=this.opts.invisibleSpace),\"BR\"==t.tagName&&!1===this.opts.linebreaks){var a=$(this.opts.emptyHtml)[0];$(t).replaceWith(a),s=t=a}var n=this.getRange();n.setStart(t,e),n.setEnd(s,o);try{r.removeAllRanges()}catch(l){}r.addRange(n)}},selectionWrap:function(t){t=t.toLowerCase();var e=this.getBlock();if(e){var s=this.formatChangeTag(e,t);return this.sync(),s}var o=this.getSelection().getRangeAt(0),s=document.createElement(t);return s.appendChild(o.extractContents()),o.insertNode(s),this.selectionElement(s),s},selectionAll:function(){var t=this.getRange();t.selectNodeContents(this.$editor[0]);var e=this.getSelection();e.removeAllRanges(),e.addRange(t)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(t){var e=0,s=this.getRange(),o=s.cloneRange();return o.selectNodeContents(t),o.setEnd(s.endContainer,s.endOffset),e=$.trim(o.toString()).length},getCaretOffsetRange:function(){return new Range(this.getSelection().getRangeAt(0))},setCaret:function(t,e,s){void 0===s&&(s=e),t=t[0]||t;var o=this.getRange();o.selectNodeContents(t);var r,a=this.getTextNodesIn(t),n=!1,l=0;if(1==a.length&&e)o.setStart(a[0],e),o.setEnd(a[0],s);else for(var c,h=0;c=a[h++];){if(r=l+c.length,!n&&e>=l&&(e<r||e==r&&h<a.length)&&(o.setStart(c,e-l),n=!0),n&&s<=r){o.setEnd(c,s-l);break}l=r}var d=this.getSelection();d.removeAllRanges(),d.addRange(o)},setCaretAfter:function(t){this.$editor.focus(),t=t[0]||t;var e=this.document.createRange(),s=1,o=-1;e.setStart(t,s),e.setEnd(t,o+2);var r=this.window.getSelection(),a=this.document.createRange(),n=this.document.createTextNode(\"\u200b\");$(t).after(n),a.setStartAfter(n),r.removeAllRanges(),r.addRange(a),$(n).remove()},getTextNodesIn:function(t){var e=[];if(3==t.nodeType)e.push(t);else for(var s=t.childNodes,o=0,r=s.length;o<r;++o)e.push.apply(e,this.getTextNodesIn(s[o]));return e},getCurrent:function(){var t=!1,e=this.getSelection();return e&&e.rangeCount>0&&(t=e.getRangeAt(0).startContainer),this.isParentRedactor(t)},getParent:function(t){return!!(t=t||this.getCurrent())&&this.isParentRedactor($(t).parent()[0])},getBlock:function(t){for(void 0===t&&(t=this.getCurrent());t;){if(this.nodeTestBlocks(t)){if($(t).hasClass(\"redactor_editor\"))return!1;return t}t=t.parentNode}return!1},getBlocks:function(t){var e=[];if(void 0===t){var s=this.getRange();if(s&&!0===s.collapsed)return[this.getBlock()];var t=this.getNodes(s)}return $.each(t,$.proxy(function(t,s){if(!1===this.opts.iframe&&0==$(s).parents(\"div.redactor_editor\").length)return!1;this.nodeTestBlocks(s)&&e.push(s)},this)),0===e.length&&(e=[this.getBlock()]),e},isInlineNode:function(t){return 1==t.nodeType&&!this.rTestBlock.test(t.nodeName)},nodeTestBlocks:function(t){return 1==t.nodeType&&this.rTestBlock.test(t.nodeName)},tagTestBlock:function(t){return this.rTestBlock.test(t)},getNodes:function(t,e){if(void 0===t||!1==t)var t=this.getRange();if(t&&!0===t.collapsed){if(!(void 0===e&&this.tagTestBlock(e)))return[this.getCurrent()];var s=this.getBlock();return s.tagName==e?[s]:[]}var o=[],r=[],a=this.document.getSelection();if(a.isCollapsed||(o=this.getRangeSelectedNodes(a.getRangeAt(0))),$.each(o,$.proxy(function(t,s){if(!1===this.opts.iframe&&0==$(s).parents(\"div.redactor_editor\").length)return!1;void 0===e?\"\"!=$.trim(s.textContent)&&r.push(s):s.tagName==e&&r.push(s)},this)),0==r.length){if(void 0===e&&this.tagTestBlock(e)){var s=this.getBlock();return s.tagName==e?r.push(s):[]}r.push(this.getCurrent())}var n=r[r.length-1];return this.nodeTestBlocks(n)&&(r=r.slice(0,-1)),r},getElement:function(t){for(t||(t=this.getCurrent());t;){if(1==t.nodeType){if($(t).hasClass(\"redactor_editor\"))return!1;return t}t=t.parentNode}return!1},getRangeSelectedNodes:function(t){var e=(t=t||this.getRange()).startContainer,s=t.endContainer;if(e==s)return[e];for(var o=[];e&&e!=s;)o.push(e=this.nextNode(e));for(e=t.startContainer;e&&e!=t.commonAncestorContainer;)o.unshift(e),e=e.parentNode;return o},nextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var t=\"\",e=this.getSelection();if(e.rangeCount){for(var s=this.document.createElement(\"div\"),o=e.rangeCount,r=0;r<o;++r)s.appendChild(e.getRangeAt(r).cloneContents());t=s.innerHTML}return this.syncClean(t)},selectionSave:function(){this.isFocused()||this.focusWithSaveScroll(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(t,e){if(t){var s=$('<span id=\"selection-marker-1\" class=\"redactor-selection-marker\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0],o=$('<span id=\"selection-marker-2\" class=\"redactor-selection-marker\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];!0===t.collapsed?this.selectionSetMarker(t,s,!0):(this.selectionSetMarker(t,s,!0),this.selectionSetMarker(t,o,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(t,e,s){var o=t.cloneRange();try{o.collapse(s),o.insertNode(e),o.detach()}catch(r){var a=this.opts.emptyHtml;this.opts.linebreaks&&(a=\"<br>\"),this.$editor.prepend(a),this.focus()}},selectionRestore:function(t,e){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{!0===t&&this.savedSel&&this.$editor.html(this.savedSel);var s=this.$editor.find(\"span#selection-marker-1\"),o=this.$editor.find(\"span#selection-marker-2\");this.browser(\"mozilla\")?this.$editor.focus():this.isFocused()||this.focusWithSaveScroll(),0!=s.length&&0!=o.length?this.selectionSet(s[0],0,o[0],0):0!=s.length&&this.selectionSet(s[0],0,null,0),!1!==e&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(t){this.opts.rangy?rangy.removeMarkers(this.savedSel):$.each(this.$editor.find(\"span.redactor-selection-marker\"),function(){\"\"==$.trim($(this).html().replace(/[^\\u0000-\\u1C7F]/g,\"\"))?$(this).remove():$(this).removeAttr(\"class\").removeAttr(\"id\")})},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,$.proxy(function(){$(\"#redactor_insert_table_btn\").on(\"click\",$.proxy(this.tableInsert,this)),setTimeout(function(){$(\"#redactor_table_rows\").focus()},200)},this))},tableInsert:function(){this.bufferSet(!1);var t,e,s,o,r=$(\"#redactor_table_rows\").val(),a=$(\"#redactor_table_columns\").val(),n=$(\"<div></div>\"),l=Math.floor(99999*Math.random()),c=$('<table id=\"table'+l+'\"><tbody></tbody></table>');for(t=0;t<r;t++){for(s=0,e=$(\"<tr></tr>\");s<a;s++)o=$(\"<td>\"+this.opts.invisibleSpace+\"</td>\"),0===t&&0===s&&o.append('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),$(e).append(o);c.append(e)}n.append(c);var h=n.html();!1===this.opts.linebreaks&&this.browser(\"mozilla\")&&(h+=\"<p>\"+this.opts.invisibleSpace+\"</p>\"),this.modalClose(),this.selectionRestore();var d=this.getBlock()||this.getCurrent();if(d&&\"BODY\"!=d.tagName){if(\"LI\"==d.tagName)var d=$(d).closest(\"ul, ol\");$(d).after(h)}else this.insertHtmlAdvanced(h,!1);this.selectionRestore();var p=this.$editor.find(\"#table\"+l);this.buttonActiveObserver(),p.find(\"span#selection-marker-1, inline#selection-marker-1\").remove(),p.removeAttr(\"id\"),this.sync()},tableDeleteTable:function(){var t=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(t)||0==t.length)return!1;this.bufferSet(),t.remove(),this.sync()},tableDeleteRow:function(){var t=this.getParent(),e=$(t).closest(\"table\");if(!this.isParentRedactor(e)||0==e.length)return!1;this.bufferSet();var s=$(t).closest(\"tr\"),o=s.prev().length?s.prev():s.next();if(o.length){var r=o.children(\"td\").first();r.length&&r.prepend('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\")}s.remove(),this.selectionRestore(),e.find(\"span#selection-marker-1\").remove(),this.sync()},tableDeleteColumn:function(){var t=this.getParent(),e=$(t).closest(\"table\");if(!this.isParentRedactor(e)||0==e.length)return!1;this.bufferSet();var s=$(t).closest(\"td\");s.is(\"td\")||(s=s.closest(\"td\"));var o=s.get(0).cellIndex;e.find(\"tr\").each($.proxy(function(t,e){var s=o-1<0?o+1:o-1;0===t&&$(e).find(\"td\").eq(s).prepend('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),$(e).find(\"td\").eq(o).remove()},this)),this.selectionRestore(),e.find(\"span#selection-marker-1\").remove(),this.sync()},tableAddHead:function(){var t=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(t)||0==t.length)return!1;if(this.bufferSet(),0!==t.find(\"thead\").length)this.tableDeleteHead();else{var e=t.find(\"tr\").first().clone();e.find(\"td\").replaceWith(\"<th></th>\").html(this.opts.invisibleSpace),($thead=$(\"<thead></thead>\")).append(e),t.prepend($thead),this.sync()}},tableDeleteHead:function(){var t=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(t))return!1;var e=t.find(\"thead\");if(0==e.length)return!1;this.bufferSet(),e.remove(),this.sync()},tableAddRowAbove:function(){this.tableAddRow(\"before\")},tableAddRowBelow:function(){this.tableAddRow(\"after\")},tableAddColumnLeft:function(){this.tableAddColumn(\"before\")},tableAddColumnRight:function(){this.tableAddColumn(\"after\")},tableAddRow:function(t){var e=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(e)||0==e.length)return!1;this.bufferSet();var s=$(this.getParent()).closest(\"tr\"),o=s.clone();o.find(\"td\").html(this.opts.invisibleSpace),\"after\"===t?s.after(o):s.before(o),this.sync()},tableAddColumn:function(t){var e=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(e)||0==e.length)return!1;this.bufferSet();var s=0,o=this.getCurrent(),r=$(o).closest(\"tr\"),a=$(o).closest(\"td\");r.find(\"td\").each($.proxy(function(t,e){$(e)[0]===a[0]&&(s=t)},this)),e.find(\"tr\").each($.proxy(function(e,o){var r=$(o).find(\"td\").eq(s),a=r.clone();a.html(this.opts.invisibleSpace),\"after\"===t?r.after(a):r.before(a)},this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,$.proxy(function(){$(\"#redactor_insert_video_btn\").on(\"click\",$.proxy(this.videoInsert,this)),setTimeout(function(){$(\"#redactor_insert_video_area\").focus()},200)},this))},videoInsert:function(){var t=$(\"#redactor_insert_video_area\").val();t=this.cleanStripTags(t);var e='<iframe width=\"500\" height=\"281\" src=\"',s='\" frameborder=\"0\" allowfullscreen></iframe>';t.match(reUrlYoutube)?t=t.replace(reUrlYoutube,e+\"//www.youtube.com/embed/$1\"+s):t.match(reUrlVimeo)?t=t.replace(reUrlVimeo,e+\"//player.vimeo.com/video/$2\"+s):t.match(reUrlFacebook)?t=t.replace(reUrlFacebook,e+\"https://www.facebook.com/video/embed?video_id=$1\"+s):t.match(reUrlRutube)&&(t=t.replace(reUrlRutube,e+\"//rutube.ru/play/embed/$1\"+s)),this.selectionRestore();var o=this.getBlock()||this.getCurrent();o?$(o).after(t):this.insertHtmlAdvanced(t,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var t=$.proxy(function(){if(!1!==this.opts.predefinedLinks){this.predefinedLinksStorage={};var t=this;$.getJSON(this.opts.predefinedLinks,function(e){if(0!==Object.keys(e).length){var s=$(\"#redactor-predefined-links\");s.html(\"\"),$.each(e,function(e,o){t.predefinedLinksStorage[e]=o,s.append($(\"<option>\").val(e).html(o.name))}),s.on(\"change\",function(){var e=$(this).val(),s=\"\",o=\"\";0!=e&&(s=t.predefinedLinksStorage[e].name,o=t.predefinedLinksStorage[e].url),$(\"#redactor_link_url\").val(o),1!=$(\"#redactor_link_url_text\").data(\"is_selected_text\")&&$(\"#redactor_link_url_text\").val(s)}),s.show()}})}this.insert_link_node=!1;var e=this.getSelection(),s=\"\",o=\"\",r=\"\",a=this.getParent(),n=$(a).parent().get(0);n&&\"A\"===n.tagName&&(a=n),a&&\"A\"===a.tagName?(s=a.href,o=$(a).text(),r=a.target,this.insert_link_node=a):o=e.toString(),$(\"#redactor_link_url_text\").val(o),o.length>0&&$(\"#redactor_link_url_text\").data(\"is_selected_text\",1);var l=self.location.href.replace(/\\/$/i,\"\");if(s=(s=(s=s.replace(l,\"\")).replace(/^\\/#/,\"#\")).replace(\"mailto:\",\"\"),!1===this.opts.linkProtocol){var c=RegExp(\"^(http|ftp|https)://\"+self.location.host,\"i\");s=s.replace(c,\"\")}$(\"#redactor_link_url\").val(s),\"_blank\"===r&&$(\"#redactor_link_blank\").prop(\"checked\",!0),this.linkInsertPressed=!1,$(\"#redactor_insert_link_btn\").on(\"click\",$.proxy(this.linkProcess,this)),setTimeout(function(){$(\"#redactor_link_url\").focus()},200)},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,t)},linkProcess:function(){if(!this.linkInsertPressed){this.linkInsertPressed=!0;var t=\"\",e=\"\",s=$(\"#redactor_link_url\").val(),o=$(\"#redactor_link_url_text\").val();if(-1!=s.search(\"@\")&&!1===/(http|ftp|https):\\/\\//i.test(s))s=\"mailto:\"+s;else if(0!=s.search(\"#\")){$(\"#redactor_link_blank\").prop(\"checked\")&&(t=' target=\"_blank\"',e=\"_blank\");var r=\"((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}\",a=RegExp(\"^(http|ftp|https)://\"+r,\"i\"),n=RegExp(\"^\"+r,\"i\");-1==s.search(a)&&0==s.search(n)&&this.opts.linkProtocol&&(s=this.opts.linkProtocol+s)}o=o.replace(/<|>/g,\"\");var l=\"&nbsp;\";this.browser(\"mozilla\")&&(l=\"&nbsp;\"),this.linkInsert('<a href=\"'+s+'\"'+t+\">\"+o+\"</a>\"+l,$.trim(o),s,e)}},linkInsert:function(t,e,s,o){if(this.selectionRestore(),\"\"!==e){if(this.insert_link_node)this.bufferSet(),$(this.insert_link_node).text(e).attr(\"href\",s),\"\"!==o?$(this.insert_link_node).attr(\"target\",o):$(this.insert_link_node).removeAttr(\"target\");else{var r=$(t).addClass(\"redactor-added-link\");this.exec(\"inserthtml\",this.outerHtml(r),!1);var s=this.$editor.find(\"a.redactor-added-link\");s.removeAttr(\"style\").removeClass(\"redactor-added-link\").each(function(){\"\"==this.className&&$(this).removeAttr(\"class\")})}this.sync()}setTimeout($.proxy(function(){this.opts.observeLinks&&this.observeLinks()},this),5),this.modalClose()},fileShow:function(){this.selectionSave();var t=$.proxy(function(){var t=this.getSelection(),e=\"\";e=this.oldIE()?t.text:t.toString(),$(\"#redactor_filename\").val(e),this.isMobile()||this.isIPad()||this.draguploadInit(\"#redactor_file\",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.fileCallback,this),error:$.proxy(function(t,e){this.callback(\"fileUploadError\",e)},this),uploadParam:this.opts.fileUploadParam}),this.uploadInit(\"redactor_file\",{auto:!0,url:this.opts.fileUpload,success:$.proxy(this.fileCallback,this),error:$.proxy(function(t,e){this.callback(\"fileUploadError\",e)},this)})},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,t)},fileCallback:function(t){if(this.selectionRestore(),!1!==t){var e=$(\"#redactor_filename\").val();\"\"===e&&(e=t.filename);var s='<a href=\"'+t.filelink+'\" id=\"filelink-marker\">'+e+\"</a>\";this.browser(\"webkit\")&&this.window.chrome&&(s+=\"&nbsp;\"),this.execCommand(\"inserthtml\",s,!1);var o=$(this.$editor.find(\"a#filelink-marker\"));0!=o.length?o.removeAttr(\"id\"):o=!1,this.sync(),this.callback(\"fileUpload\",o,t)}this.modalClose()},imageShow:function(){this.selectionSave();var t=$.proxy(function(){this.opts.imageGetJson?$.getJSON(this.opts.imageGetJson,$.proxy(function(t){if(t.error){alert(t.message);return}var e={},s=0;$.each(t,$.proxy(function(t,o){void 0!==o.folder&&(s++,e[o.folder]=s)},this)),$(\"#redactor_image_box .empty_list\").show();var o=!1;if($.each(t,$.proxy(function(t,s){var r=\"\";void 0!==s.title&&(r=s.title);var a=0;$.isEmptyObject(e)||void 0===s.folder||(a=e[s.folder],!1!==o||(o=\".redactorfolder\"+a));var n=$('<img src=\"'+s.thumb+'\" class=\"redactorfolder redactorfolder'+a+'\" rel=\"'+s.image+'\" title=\"'+r+'\" />');$(\"#redactor_image_box\").append(n),$(n).on(\"click\",$.proxy(this.imageThumbClick,this)),$(\"#redactor_image_box .empty_list\").hide()},this)),!$.isEmptyObject(e)){$(\".redactorfolder\").hide(),$(o).show();var r=function(t){$(\".redactorfolder\").hide(),$(\".redactorfolder\"+$(t.target).val()).show()},a=$('<select id=\"redactor_image_box_select\">');$.each(e,function(t,e){a.append($('<option value=\"'+e+'\">'+t+\"</option>\"))}),$(\"#redactor_image_box\").before(a),a.change(r)}},this)):$(\"#redactor-tab-control-2\").remove(),this.opts.imageUpload||this.opts.s3?(this.isMobile()||this.isIPad()||!1!==this.opts.s3||!$(\"#redactor_file\").length||this.draguploadInit(\"#redactor_file\",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.imageCallback,this),error:$.proxy(function(t,e){this.callback(\"imageUploadError\",e)},this),uploadParam:this.opts.imageUploadParam}),!1===this.opts.s3?this.uploadInit(\"redactor_file\",{auto:!0,url:this.opts.imageUpload,success:$.proxy(this.imageCallback,this),error:$.proxy(function(t,e){this.callback(\"imageUploadError\",e)},this)}):$(\"#redactor_file\").on(\"change.redactor\",$.proxy(this.s3handleFileSelect,this))):($(\".redactor_tab\").hide(),this.opts.imageGetJson?($(\"#redactor-tab-control-1\").remove(),$(\"#redactor-tab-control-2\").addClass(\"redactor_tabs_act\"),$(\"#redactor_tab2\").show()):($(\"#redactor_tabs\").remove(),$(\"#redactor_tab3\").show())),!this.opts.imageTabLink&&(this.opts.imageUpload||this.opts.imageGetJson)&&$(\"#redactor-tab-control-3\").hide(),$(\"#redactor_upload_btn\").on(\"click\",$.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout(function(){$(\"#redactor_file_link\").focus()},200)},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,t)},imageEdit:function(t){var e=t,s=e.parent().parent(),o=$.proxy(function(){$(\"#redactor_file_alt\").val(e.attr(\"alt\")),$(\"#redactor_image_edit_src\").attr(\"href\",e.attr(\"src\")),\"block\"==e.css(\"display\")&&\"none\"==e.css(\"float\")?$(\"#redactor_form_image_align\").val(\"center\"):$(\"#redactor_form_image_align\").val(e.css(\"float\")),\"A\"===$(s).get(0).tagName&&($(\"#redactor_file_link\").val($(s).attr(\"href\")),\"_blank\"==$(s).attr(\"target\")&&$(\"#redactor_link_blank\").prop(\"checked\",!0)),$(\"#redactor_image_delete_btn\").on(\"click\",$.proxy(function(){this.imageRemove(e)},this)),$(\"#redactorSaveBtn\").on(\"click\",$.proxy(function(){this.imageSave(e)},this))},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,o)},imageRemove:function(t){var e=$(t).parent().parent(),s=$(t).parent(),o=!1;e.length&&\"A\"===e[0].tagName?(o=!0,$(e).remove()):s.length&&\"A\"===s[0].tagName?(o=!0,$(s).remove()):$(t).remove(),s.length&&\"P\"===s[0].tagName&&(this.focusWithSaveScroll(),!1===o&&this.selectionStart(s)),this.callback(\"imageDelete\",t),this.modalClose(),this.sync()},imageSave:function(t){this.imageResizeHide(!1);var e=$(t),s=e.parent();e.attr(\"alt\",$(\"#redactor_file_alt\").val());var o=$(\"#redactor_form_image_align\").val(),r=\"\";\"left\"===o?(r=\"0 \"+this.opts.imageFloatMargin+\" \"+this.opts.imageFloatMargin+\" 0\",e.css({float:\"left\",margin:r})):\"right\"===o?(r=\"0 0 \"+this.opts.imageFloatMargin+\" \"+this.opts.imageFloatMargin,e.css({float:\"right\",margin:r})):\"center\"===o?e.css({float:\"\",display:\"block\",margin:\"auto\"}):e.css({float:\"\",display:\"\",margin:\"\"});var a=$.trim($(\"#redactor_file_link\").val());if(\"\"!==a){var n=!1;if($(\"#redactor_link_blank\").prop(\"checked\")&&(n=!0),\"A\"!==s.get(0).tagName){var l=$('<a href=\"'+a+'\">'+this.outerHtml(t)+\"</a>\");n&&l.attr(\"target\",\"_blank\"),e.replaceWith(l)}else s.attr(\"href\",a),n?s.attr(\"target\",\"_blank\"):s.removeAttr(\"target\")}else\"A\"===s.get(0).tagName&&s.replaceWith(this.outerHtml(t));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(t){if(!1!==t&&0!=$(t.target).parent().length&&\"redactor-image-box\"===$(t.target).parent()[0].id)return!1;var e=this.$editor.find(\"#redactor-image-box\");if(0==e.length)return!1;this.$editor.find(\"#redactor-image-editter, #redactor-image-resizer\").remove(),e.find(\"img\").css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css(\"margin\",\"\"),e.find(\"img\").css(\"opacity\",\"\"),e.replaceWith(function(){return $(this).contents()}),$(document).off(\"click.redactor-image-resize-hide\"),this.$editor.off(\"click.redactor-image-resize-hide\"),this.$editor.off(\"keydown.redactor-image-delete\"),this.sync()},imageResize:function(t){var e=$(t);e.on(\"mousedown\",$.proxy(function(){this.imageResizeHide(!1)},this)),e.on(\"dragstart\",$.proxy(function(){this.$editor.on(\"drop.redactor-image-inside-drop\",$.proxy(function(){setTimeout($.proxy(function(){this.observeImages(),this.$editor.off(\"drop.redactor-image-inside-drop\"),this.sync()},this),1)},this))},this)),e.on(\"click\",$.proxy(function(t){if(0!=this.$editor.find(\"#redactor-image-box\").length)return!1;var s,o,r=e.width()/e.height(),a=20,n=this.imageResizeControls(e),l=!1;!1!==n&&(n.on(\"mousedown\",function(t){l=!0,t.preventDefault(),r=e.width()/e.height(),s=Math.round(t.pageX-e.eq(0).offset().left),o=Math.round(t.pageY-e.eq(0).offset().top)}),$(this.document.body).on(\"mousemove\",$.proxy(function(t){if(l){t.pageX,e.eq(0).offset().left;var n=Math.round(t.pageY-e.eq(0).offset().top)-o,c=Math.round((parseInt(e.height(),10)+n)*r);c>a&&(e.width(c),c<100?this.imageEditter.css({marginTop:\"-7px\",marginLeft:\"-13px\",fontSize:\"9px\",padding:\"3px 5px\"}):this.imageEditter.css({marginTop:\"-11px\",marginLeft:\"-18px\",fontSize:\"11px\",padding:\"7px 10px\"})),s=Math.round(t.pageX-e.eq(0).offset().left),o=Math.round(t.pageY-e.eq(0).offset().top),this.sync()}},this)).on(\"mouseup\",function(){l=!1})),this.$editor.on(\"keydown.redactor-image-delete\",$.proxy(function(t){var s=t.which;(this.keyCode.BACKSPACE==s||this.keyCode.DELETE==s)&&(this.bufferSet(!1),this.imageResizeHide(!1),this.imageRemove(e))},this)),$(document).on(\"click.redactor-image-resize-hide\",$.proxy(this.imageResizeHide,this)),this.$editor.on(\"click.redactor-image-resize-hide\",$.proxy(this.imageResizeHide,this))},this))},imageResizeControls:function(t){var e=$('<span id=\"redactor-image-box\" data-redactor=\"verified\">');if(e.css({position:\"relative\",display:\"inline-block\",lineHeight:0,outline:\"1px dashed rgba(0, 0, 0, .6)\",float:t.css(\"float\")}),e.attr(\"contenteditable\",!1),\"auto\"!=t[0].style.margin?(e.css({marginTop:t[0].style.marginTop,marginBottom:t[0].style.marginBottom,marginLeft:t[0].style.marginLeft,marginRight:t[0].style.marginRight}),t.css(\"margin\",\"\")):e.css({display:\"block\",margin:\"auto\"}),t.css(\"opacity\",.5).after(e),this.imageEditter=$('<span id=\"redactor-image-editter\" data-redactor=\"verified\">'+this.opts.curLang.edit+\"</span>\"),this.imageEditter.css({position:\"absolute\",zIndex:5,top:\"50%\",left:\"50%\",marginTop:\"-11px\",marginLeft:\"-18px\",lineHeight:1,backgroundColor:\"#000\",color:\"#fff\",fontSize:\"11px\",padding:\"7px 10px\",cursor:\"pointer\"}),this.imageEditter.attr(\"contenteditable\",!1),this.imageEditter.on(\"click\",$.proxy(function(){this.imageEdit(t)},this)),e.append(this.imageEditter),!this.opts.imageResizable)return e.append(t),!1;var s=$('<span id=\"redactor-image-resizer\" data-redactor=\"verified\"></span>');return s.css({position:\"absolute\",zIndex:2,lineHeight:1,cursor:\"nw-resize\",bottom:\"-4px\",right:\"-5px\",border:\"1px solid #fff\",backgroundColor:\"#000\",width:\"8px\",height:\"8px\"}),s.attr(\"contenteditable\",!1),e.append(s),e.append(t),s},imageThumbClick:function(t){var e='<img id=\"image-marker\" src=\"'+$(t.target).attr(\"rel\")+'\" alt=\"'+$(t.target).attr(\"title\")+'\" />',s=this.getParent();this.opts.paragraphy&&0==$(s).closest(\"li\").length&&(e=\"<p>\"+e+\"</p>\"),this.imageInsert(e,!0)},imageCallbackLink:function(){var t=$(\"#redactor_file_link\").val();if(\"\"!==t){var e='<img id=\"image-marker\" src=\"'+t+'\" />';!1===this.opts.linebreaks&&(e=\"<p>\"+e+\"</p>\"),this.imageInsert(e,!0)}else this.modalClose()},imageCallback:function(t){this.imageInsert(t)},imageInsert:function(t,e){if(this.selectionRestore(),!1!==t){var s=\"\";if(!0!==e){s='<img id=\"image-marker\" src=\"'+t.image.url+'\" />';var o=this.getParent();this.opts.paragraphy&&0==$(o).closest(\"li\").length&&(s=\"<p>\"+s+\"</p>\")}else s=t;this.execCommand(\"inserthtml\",s,!1);var r=$(this.$editor.find(\"img#image-marker\"));r.length?r.removeAttr(\"id\"):r=!1,this.sync(),!0!==e&&this.callback(\"imageUpload\",r,t)}this.modalClose(),this.observeImages()},buildProgressBar:function(){0==$(\"#redactor-progress\").length&&(this.$progressBar=$('<div id=\"redactor-progress\"><span></span></div>'),$(document.body).append(this.$progressBar))},showProgressBar:function(){this.buildProgressBar(),$(\"#redactor-progress\").fadeIn()},hideProgressBar:function(){$(\"#redactor-progress\").fadeOut(1500)},modalTemplatesInit:function(){$.extend(this.opts,{modal_file:String()+'<section id=\"redactor-modal-file-insert\"><form id=\"redactorUploadFileForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\"><label>'+this.opts.curLang.filename+'</label><input type=\"text\" id=\"redactor_filename\" class=\"redactor_input\" /><div style=\"margin-top: 7px;\"><input type=\"file\" id=\"redactor_file\" name=\"'+this.opts.fileUploadParam+'\" /></div></form></section>',modal_image_edit:String()+'<section id=\"redactor-modal-image-edit\"><label>'+this.opts.curLang.title+'</label><input type=\"text\" id=\"redactor_file_alt\" class=\"redactor_input\" /><label>'+this.opts.curLang.link+'</label><input type=\"text\" id=\"redactor_file_link\" class=\"redactor_input\" /><label><input type=\"checkbox\" id=\"redactor_link_blank\"> '+this.opts.curLang.link_new_tab+\"</label><label>\"+this.opts.curLang.image_position+'</label><select id=\"redactor_form_image_align\"><option value=\"none\">'+this.opts.curLang.none+'</option><option value=\"left\">'+this.opts.curLang.left+'</option><option value=\"center\">'+this.opts.curLang.center+'</option><option value=\"right\">'+this.opts.curLang.right+'</option></select></section><footer><button id=\"redactor_image_delete_btn\" class=\"redactor_modal_btn redactor_modal_delete_btn\">'+this.opts.curLang._delete+'</button><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactorSaveBtn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.save+\"</button></footer>\",modal_image:String()+'<section id=\"redactor-modal-image-insert\"><div id=\"redactor_tabs\"><a href=\"#\" id=\"redactor-tab-control-1\" class=\"redactor_tabs_act\">'+this.opts.curLang.upload+'</a><a href=\"#\" id=\"redactor-tab-control-2\">'+this.opts.curLang.choose+'</a><a href=\"#\" id=\"redactor-tab-control-3\">'+this.opts.curLang.link+'</a></div><form id=\"redactorInsertImageForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\"><div id=\"redactor_tab1\" class=\"redactor_tab\"><input type=\"file\" id=\"redactor_file\" name=\"'+this.opts.imageUploadParam+'\" /></div><div id=\"redactor_tab2\" class=\"redactor_tab\" style=\"display: none;\"><div id=\"redactor_image_box\"><span class=\"empty_list\">'+this.opts.curLang.empty_img_list+'</span></div></div></form><div id=\"redactor_tab3\" class=\"redactor_tab\" style=\"display: none;\"><label>'+this.opts.curLang.image_web_link+'</label><input type=\"text\" name=\"redactor_file_link\" id=\"redactor_file_link\" class=\"redactor_input\"  /><br><br></div></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button class=\"redactor_modal_btn redactor_modal_action_btn\" id=\"redactor_upload_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_link:String()+'<section id=\"redactor-modal-link-insert\"><select id=\"redactor-predefined-links\" style=\"width: 99.5%; display: none;\"></select><label>URL</label><input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url\" /><label>'+this.opts.curLang.text+'</label><input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url_text\" /><label><input type=\"checkbox\" id=\"redactor_link_blank\"> '+this.opts.curLang.link_new_tab+'</label></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_link_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_table:String()+'<section id=\"redactor-modal-table-insert\"><label>'+this.opts.curLang.rows+'</label><input type=\"text\" size=\"5\" value=\"2\" id=\"redactor_table_rows\" /><label>'+this.opts.curLang.columns+'</label><input type=\"text\" size=\"5\" value=\"3\" id=\"redactor_table_columns\" /></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_table_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_video:String()+'<section id=\"redactor-modal-video-insert\"><form id=\"redactorInsertVideoForm\"><label>'+this.opts.curLang.video_html_code+'</label><textarea id=\"redactor_insert_video_area\" style=\"width: 99%; height: 160px;\"></textarea></form></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_video_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\"})},modalInit:function(t,e,s,o){return this.modalSetOverlay(),this.$redactorModalWidth=s,this.$redactorModal=$(\"#redactor_modal\"),this.$redactorModal.length||(this.$redactorModal=$('<div id=\"redactor_modal\" style=\"display: none;\" />'),this.$redactorModal.append($('<div id=\"redactor_modal_close\">&times;</div>')),this.$redactorModal.append($('<header id=\"redactor_modal_header\" />')),this.$redactorModal.append($('<div id=\"redactor_modal_inner\" />')),this.$redactorModal.appendTo(document.body)),$(\"#redactor_modal_close\").on(\"click\",$.proxy(this.modalClose,this)),$(document).on(\"keyup\",$.proxy(this.modalCloseHandler,this)),this.$editor.on(\"keyup\",$.proxy(this.modalCloseHandler,this)),this.modalSetContent(e),this.modalSetTitle(t),this.modalSetDraggable(),this.modalLoadTabs(),this.modalOnCloseButton(),this.modalSetButtonsWidth(),this.saveModalScroll=this.document.body.scrollTop,!1===this.opts.autoresize&&(this.saveModalScroll=this.$editor.scrollTop()),!1===this.isMobile()?this.modalShowOnDesktop():this.modalShowOnMobile(),\"function\"==typeof o&&o(),setTimeout($.proxy(function(){this.callback(\"modalOpened\",this.$redactorModal)},this),11),$(document).off(\"focusin.modal\"),this.$redactorModal.find(\"input[type=text]\").on(\"keypress\",$.proxy(function(t){13===t.which&&(this.$redactorModal.find(\".redactor_modal_action_btn\").trigger(\"click\"),t.preventDefault())},this)),this.$redactorModal},modalShowOnDesktop:function(){this.$redactorModal.css({position:\"fixed\",top:\"-2000px\",left:\"50%\",width:this.$redactorModalWidth+\"px\",marginLeft:\"-\"+this.$redactorModalWidth/2+\"px\"}).show(),this.modalSaveBodyOveflow=$(document.body).css(\"overflow\"),$(document.body).css(\"overflow\",\"hidden\"),setTimeout($.proxy(function(){var t=this.$redactorModal.outerHeight();this.$redactorModal.css({top:\"50%\",height:\"auto\",minHeight:\"auto\",marginTop:\"-\"+(t+10)/2+\"px\"})},this),15)},modalShowOnMobile:function(){this.$redactorModal.css({position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",left:\"0\",margin:\"0\",minHeight:\"300px\"}).show()},modalSetContent:function(t){this.modalcontent=!1,0==t.indexOf(\"#\")?(this.modalcontent=$(t),$(\"#redactor_modal_inner\").empty().append(this.modalcontent.html()),this.modalcontent.html(\"\")):$(\"#redactor_modal_inner\").empty().append(t)},modalSetTitle:function(t){this.$redactorModal.find(\"#redactor_modal_header\").html(t)},modalSetButtonsWidth:function(){},modalOnCloseButton:function(){this.$redactorModal.find(\".redactor_btn_modal_close\").on(\"click\",$.proxy(this.modalClose,this))},modalSetOverlay:function(){this.opts.modalOverlay&&(this.$redactorModalOverlay=$(\"#redactor_modal_overlay\"),this.$redactorModalOverlay.length||(this.$redactorModalOverlay=$('<div id=\"redactor_modal_overlay\" style=\"display: none;\"></div>'),$(\"body\").prepend(this.$redactorModalOverlay)),this.$redactorModalOverlay.show().on(\"click\",$.proxy(this.modalClose,this)))},modalSetDraggable:function(){void 0!==$.fn.draggable&&(this.$redactorModal.draggable({handle:\"#redactor_modal_header\"}),this.$redactorModal.find(\"#redactor_modal_header\").css(\"cursor\",\"move\"))},modalLoadTabs:function(){var t=$(\"#redactor_tabs\");if(!t.length)return!1;var e=this;t.find(\"a\").each(function(s,o){s++,$(o).on(\"click\",function(o){if(o.preventDefault(),t.find(\"a\").removeClass(\"redactor_tabs_act\"),$(this).addClass(\"redactor_tabs_act\"),$(\".redactor_tab\").hide(),$(\"#redactor_tab\"+s).show(),$(\"#redactor_tab_selected\").val(s),!1===e.isMobile()){var r=e.$redactorModal.outerHeight();e.$redactorModal.css(\"margin-top\",\"-\"+(r+10)/2+\"px\")}})})},modalCloseHandler:function(t){if(t.keyCode===this.keyCode.ESC)return this.modalClose(),!1},modalClose:function(){return $(\"#redactor_modal_close\").off(\"click\",this.modalClose),$(\"#redactor_modal\").fadeOut(\"fast\",$.proxy(function(){var t=$(\"#redactor_modal_inner\");!1!==this.modalcontent&&(this.modalcontent.html(t.html()),this.modalcontent=!1),t.html(\"\"),this.opts.modalOverlay&&$(\"#redactor_modal_overlay\").hide().off(\"click\",this.modalClose),$(document).off(\"keyup\",this.modalCloseHandler),this.$editor.off(\"keyup\",this.modalCloseHandler),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?$(this.document.body).scrollTop(this.saveModalScroll):!1===this.opts.autoresize&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll),this.callback(\"modalClosed\")},this)),!1===this.isMobile()&&$(document.body).css(\"overflow\",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:\"visible\"),!1},modalSetTab:function(t){$(\".redactor_tab\").hide(),$(\"#redactor_tabs\").find(\"a\").removeClass(\"redactor_tabs_act\").eq(t-1).addClass(\"redactor_tabs_act\"),$(\"#redactor_tab\"+t).show()},s3handleFileSelect:function(t){for(var e,s=t.target.files,o=0;e=s[o];o++)this.s3uploadFile(e)},s3uploadFile:function(t){this.s3executeOnSignedUrl(t,$.proxy(function(e){this.s3uploadToS3(t,e)},this))},s3executeOnSignedUrl:function(t,e){var s=new XMLHttpRequest,o=\"?\";\"-1\"!=this.opts.s3.search(/\\?/)&&(o=\"&\"),s.open(\"GET\",this.opts.s3+o+\"name=\"+t.name+\"&type=\"+t.type,!0),s.overrideMimeType&&s.overrideMimeType(\"text/plain; charset=x-user-defined\");var r=this;s.onreadystatechange=function(t){4==this.readyState&&200==this.status?(r.showProgressBar(),e(decodeURIComponent(this.responseText))):4==this.readyState&&this.status},s.send()},s3createCORSRequest:function(t,e){var s=new XMLHttpRequest;return\"withCredentials\"in s?s.open(t,e,!0):\"undefined\"!=typeof XDomainRequest?(s=new XDomainRequest).open(t,e):s=null,s},s3uploadToS3:function(t,e){var s=this.s3createCORSRequest(\"PUT\",e);s&&(s.onload=$.proxy(function(){if(200==s.status){this.hideProgressBar();var t=e.split(\"?\");if(!t[0])return!1;this.selectionRestore();var o=\"\";o='<img id=\"image-marker\" src=\"'+t[0]+'\" />',this.opts.paragraphy&&(o=\"<p>\"+o+\"</p>\"),this.execCommand(\"inserthtml\",o,!1);var r=$(this.$editor.find(\"img#image-marker\"));r.length?r.removeAttr(\"id\"):r=!1,this.sync(),this.callback(\"imageUpload\",r,!1),this.modalClose(),this.observeImages()}},this),s.onerror=function(){},s.upload.onprogress=function(t){},s.setRequestHeader(\"Content-Type\",t.type),s.setRequestHeader(\"x-amz-acl\",\"public-read\"),s.send(t))},uploadInit:function(t,e){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},$.extend(this.uploadOptions,e);var s=$(\"#\"+t);s.length&&\"INPUT\"===s[0].tagName?(this.uploadOptions.input=s,this.el=$(s[0].form)):this.el=s,this.element_action=this.el.attr(\"action\"),this.uploadOptions.auto?$(this.uploadOptions.input).change($.proxy(function(t){this.el.submit(function(t){return!1}),this.uploadSubmit(t)},this)):this.uploadOptions.trigger&&$(\"#\"+this.uploadOptions.trigger).on(\"click\",$.proxy(this.uploadSubmit,this))},uploadSubmit:function(t){this.showProgressBar(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id=\"f\"+Math.floor(99999*Math.random());var t=this.document.createElement(\"div\"),e='<iframe style=\"display:none\" id=\"'+this.id+'\" name=\"'+this.id+'\"></iframe>';return t.innerHTML=e,$(t).appendTo(\"body\"),this.uploadOptions.start&&this.uploadOptions.start(),$(\"#\"+this.id).one(\"load\",$.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(t,e){if(this.uploadOptions.input){var s=\"redactorUploadForm\"+this.id,o=\"redactorUploadFile\"+this.id;this.form=$('<form  action=\"'+this.uploadOptions.url+'\" method=\"POST\" target=\"'+e+'\" name=\"'+s+'\" id=\"'+s+'\" enctype=\"multipart/form-data\" />'),!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(t,e){null!=e&&0===e.toString().indexOf(\"#\")&&(e=$(e).val());var s=$(\"<input/>\",{type:\"hidden\",name:t,value:e});$(this.form).append(s)},this));var r=this.uploadOptions.input,a=$(r).clone();$(r).attr(\"id\",o).before(a).appendTo(this.form),$(this.form).css(\"position\",\"absolute\").css(\"top\",\"-2000px\").css(\"left\",\"-2000px\").appendTo(\"body\"),this.form.submit()}else t.attr(\"target\",e).attr(\"method\",\"POST\").attr(\"enctype\",\"multipart/form-data\").attr(\"action\",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var t,e=$(\"#\"+this.id)[0];if(t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success){if(this.hideProgressBar(),void 0!==t){var s=t.body.innerHTML.match(/\\{(.|\\n)*\\}/)[0];s=(s=s.replace(/^\\[/,\"\")).replace(/\\]$/,\"\");var o=$.parseJSON(s);void 0===o.error?this.uploadOptions.success(o):(console.log(o),this.uploadOptions.error(this,o),this.modalClose())}else this.modalClose(),alert(\"Upload failed!\")}this.el.attr(\"action\",this.element_action),this.el.attr(\"target\",\"\")},draguploadInit:function(t,e){if(this.draguploadOptions=$.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},e),void 0===window.FormData)return!1;this.droparea=$('<div class=\"redactor_droparea\"></div>'),this.dropareabox=$('<div class=\"redactor_dropareabox\">'+this.draguploadOptions.text+\"</div>\"),this.dropalternative=$('<div class=\"redactor_dropalternative\">'+this.draguploadOptions.atext+\"</div>\"),this.droparea.append(this.dropareabox),$(t).before(this.droparea),$(t).before(this.dropalternative),this.dropareabox.on(\"dragover\",$.proxy(function(){return this.draguploadOndrag()},this)),this.dropareabox.on(\"dragleave\",$.proxy(function(){return this.draguploadOndragleave()},this)),this.dropareabox.get(0).ondrop=$.proxy(function(t){for(var e in t.preventDefault(),this.dropareabox.removeClass(\"hover\").addClass(\"drop\"),this.showProgressBar(),t.dataTransfer.files)t.dataTransfer.files.hasOwnProperty(e)&&this.dragUploadAjax(this.draguploadOptions.url,t.dataTransfer.files[e],!1,t,this.draguploadOptions.uploadParam)},this)},dragUploadAjax:function(t,e,s,o,r){if(!s){var a=$.ajaxSettings.xhr();a.upload&&a.upload.addEventListener(\"progress\",$.proxy(this.uploadProgress,this),!1),$.ajaxSetup({xhr:function(){return a}})}this.callback(\"drop\",o);var n=new FormData;!1!==r?n.append(r,e):n.append(\"file\",e),!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy(function(t,e){null!=e&&0===e.toString().indexOf(\"#\")&&(e=$(e).val()),n.append(t,e)},this)),$.ajax({url:t,dataType:\"html\",async:!1,data:n,cache:!1,contentType:!1,processData:!1,type:\"POST\",success:$.proxy(function(t){var e=\"string\"==typeof(t=(t=t.replace(/^\\[/,\"\")).replace(/\\]$/,\"\"))?$.parseJSON(t):t;if(this.hideProgressBar(),s){var r=$(\"<img>\");r.attr(\"src\",e.image.url).attr(\"id\",\"drag-image-marker\"),this.insertNodeToCaretPositionFromPoint(o,r[0]);var a=$(this.$editor.find(\"img#drag-image-marker\"));a.length?a.removeAttr(\"id\"):a=!1,this.sync(),this.observeImages(),a&&this.callback(\"imageUpload\",a,e),void 0!==e.error&&this.callback(\"imageUploadError\",e)}else void 0===e.error?this.draguploadOptions.success(e):(this.draguploadOptions.error(this,e),this.draguploadOptions.success(!1))},this)})},draguploadOndrag:function(){return this.dropareabox.addClass(\"hover\"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass(\"hover\"),!1},uploadProgress:function(t,e){var s=t.loaded?parseInt(t.loaded/t.total*100,10):t;this.dropareabox.text(\"Loading \"+s+\"% \"+(e||\"\"))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isIPad:function(){return/iPad/.test(navigator.userAgent)},normalize:function(t){return void 0===t?0:parseInt(t.replace(\"px\",\"\"),10)},outerHtml:function(t){return $(\"<div>\").append($(t).eq(0).clone()).html()},stripHtml:function(t){var e=document.createElement(\"DIV\");return e.innerHTML=t,e.textContent||e.innerText||\"\"},isString:function(t){return\"[object String]\"==Object.prototype.toString.call(t)},isEmpty:function(t){return\"\"==(t=(t=(t=t.replace(/&#x200b;|<br>|<br\\/>|&nbsp;/gi,\"\")).replace(/\\s/g,\"\")).replace(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i,\"\"))},getInternetExplorerVersion:function(){var t=!1;if(\"Microsoft Internet Explorer\"==navigator.appName){var e=navigator.userAgent;null!=RegExp(\"MSIE ([0-9]{1,}[.0-9]{0,})\").exec(e)&&(t=parseFloat(RegExp.$1))}return t},isIe11:function(){return!!navigator.userAgent.match(/Trident\\/7\\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),s=/(opr)[\\/]([\\w.]+)/.exec(e)||/(chrome)[ \\/]([\\w.]+)/.exec(e)||/(webkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(e)||/(webkit)[ \\/]([\\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(e)||/(msie) ([\\w.]+)/.exec(e)||e.indexOf(\"trident\")>=0&&/(rv)(?::| )([\\w.]+)/.exec(e)||0>e.indexOf(\"compatible\")&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(e)||[];return\"version\"==t?s[2]:\"webkit\"==t?\"chrome\"==s[1]||\"webkit\"==s[1]:\"rv\"==s[1]?\"msie\"==t:\"opr\"==s[1]?\"webkit\"==t:t==s[1]},oldIE:function(){return!!(this.browser(\"msie\")&&9>parseInt(this.browser(\"version\"),10))},getFragmentHtml:function(t){var e=t.cloneNode(!0),s=this.document.createElement(\"div\");return s.appendChild(e),s.innerHTML},extractContent:function(){for(var t,e=this.$editor[0],s=this.document.createDocumentFragment();t=e.firstChild;)s.appendChild(t);return s},isParentRedactor:function(t){return!!t&&(this.opts.iframe?t:!(0==$(t).parents(\"div.redactor_editor\").length||$(t).hasClass(\"redactor_editor\"))&&t)},currentOrParentIs:function(t){var e=this.getParent(),s=this.getCurrent();return e&&e.tagName===t?e:!!s&&s.tagName===t&&s},isEndOfElement:function(){var t=this.getBlock(),e=this.getCaretOffset(t),s=$.trim($(t).text()).replace(/\\n\\r\\n/g,\"\").length;return e==s},isFocused:function(){var t,e=this.getSelection();return e&&e.rangeCount&&e.rangeCount>0&&(t=e.getRangeAt(0).startContainer),!!t&&(this.opts.iframe?!this.getCaretOffsetRange().equals()||!this.$editor.is(t):0!=$(t).closest(\"div.redactor_editor\").length)},removeEmptyAttr:function(t,e){\"\"==$(t).attr(e)&&$(t).removeAttr(e)},removeFromArrayByValue:function(t,e){for(var s=null;-1!==(s=t.indexOf(e));)t.splice(s,1);return t}},Redactor.prototype.init.prototype=Redactor.prototype,$.Redactor.fn.formatLinkify=function(t,e,s,o,r){for(var a=/(((https?|ftps?):\\/\\/)|www[.][^\\s])(.+?\\..+?)([.),]?)(\\s|\\.\\s+|\\)|$)/gi,n=/(https?|ftp):\\/\\//i,l=/(https?:\\/\\/.*\\.(?:png|jpg|jpeg|gif))/gi,c=(this.$editor?this.$editor.get(0):this).childNodes,h=c.length;h--;){var d=c[h];if(3===d.nodeType){var p=d.nodeValue;if(o&&p){var u='<iframe width=\"500\" height=\"281\" src=\"',f='\" frameborder=\"0\" allowfullscreen></iframe>';p.match(reUrlYoutube)?(p=p.replace(reUrlYoutube,u+\"//www.youtube.com/embed/$1\"+f),$(d).after(p).remove()):p.match(reUrlVimeo)&&(p=p.replace(reUrlVimeo,u+\"//player.vimeo.com/video/$2\"+f),$(d).after(p).remove())}if(s&&p&&p.match(l)&&(p=p.replace(l,'<img src=\"$1\">'),$(d).after(p).remove()),e&&p&&p.match(a)){var m=p.match(a);for(var h in m){var g=m[h],b=g,v=\"\";null!==g.match(/\\s$/)&&(v=\" \");var _=t;null!==g.match(n)&&(_=\"\"),b.length>r&&(b=b.substring(0,r)+\"...\");var y=(b=b.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")).replace(\"$\",\"$$$\");p=p.replace(g,'<a href=\"'+_+$.trim(g)+'\">'+$.trim(y)+\"</a>\"+v)}$(d).after(p).remove()}}else 1!==d.nodeType||/^(a|button|textarea)$/i.test(d.tagName)||$.Redactor.fn.formatLinkify.call(d,t,e,s,o,r)}}}(jQuery);", "<?php\nclass cmsWysiwygRedactor {\n\n    private static $redactor_loaded = false;\n\n    private $options = [\n        'minHeight' => 200,\n        'toolbarFixedBox' => false,\n        'plugins' => []\n    ];\n\n    private $lang = 'en';\n\n    public function __construct($config = []) {\n\n        $user = cmsUser::getInstance();\n        $core = cmsCore::getInstance();\n        $this->lang = cmsCore::getLanguageName();\n\n        if($this->lang !== 'en'){\n            $this->options['lang'] = $this->lang;\n        }\n\n        $this->options['smilesUrl'] = href_to('typograph', 'get_smiles');\n\n        if (!$user->is_admin) {\n            $this->options['buttonSource'] = false;\n        }\n\n        if ($core->request->isTypeModal()) {\n            $this->options['toolbarFixedTarget'] = '#icms_modal';\n        }\n\n        if ($user->is_logged) {\n\n            if(empty($config['upload_params'])){\n\n                $context = $core->getUriData();\n                $upload_params = [];\n\n                if($context['controller']){\n                    $upload_params['target_controller'] = $context['controller'];\n                }\n\n                if($context['action']){\n                    $upload_params['target_subject'] = mb_substr($context['action'], 0, 32);\n                }\n\n                if(strpos($core->uri, '/add/') === false && !empty($context['params'][1]) && is_numeric($context['params'][1])){\n                    $upload_params['target_id'] = $context['params'][1];\n                }\n            } else {\n\n                $upload_params = $config['upload_params'];\n\n                unset($config['upload_params']);\n            }\n\n            $upload_params_string = ($upload_params ? '?'.http_build_query($upload_params) : '');\n\n            $this->options['imageUpload'] = href_to('images', 'upload_with_preset', ['file', 'wysiwyg_redactor']).$upload_params_string;\n\n            $this->options['imageGetJson'] = href_to('files', 'files_list', ['image']).$upload_params_string;\n\n            if(!empty($upload_params['target_controller']) && !empty($upload_params['target_subject'])){\n                $this->options['predefinedLinks'] = href_to('wysiwygs', 'links_list').$upload_params_string;\n            }\n\n        }\n\n        $this->options = array_replace_recursive($this->options, $config);\n\n    }\n\n\tpublic function displayEditor($field_name, $content = '', $config = []){\n\n        $this->loadRedactor();\n\n        $dom_id = isset($this->options['id']) ? $this->options['id'] : 'wysiwyg-' . uniqid(); unset($this->options['id']);\n\n        if($field_name && $dom_id){\n            if(!empty($this->options['wysiwyg_toolbar'])){\n                echo '<div data-field_id=\"'.$dom_id.'\" id=\"wysiwyg_toolbar_'.$dom_id.'\" class=\"wysiwyg_toolbar_wrap\">'.$this->options['wysiwyg_toolbar'].'</div>';\n                unset($this->options['wysiwyg_toolbar']);\n            }\n            echo html_textarea($field_name, $content, ['id' => $dom_id, 'class' => 'imperavi_redactor']);\n        }\n\n        ob_start(); ?>\n\n        <script>\n            <?php if($dom_id){ ?>\n                redactor_global_options['field_<?php echo $dom_id; ?>'] = <?php echo json_encode($this->options); ?>;\n                $(function(){\n                    init_redactor('<?php echo $dom_id; ?>');\n                });\n            <?php } else { ?>\n                redactor_global_options['default'] = <?php echo json_encode($this->options); ?>;\n            <?php } ?>\n        </script>\n\n        <?php cmsTemplate::getInstance()->addBottom(ob_get_clean());\n\n\t}\n\n    private function loadRedactor() {\n\n        if(self::$redactor_loaded){ return false; }\n\n        $template = cmsTemplate::getInstance();\n\n        $template->addJSFromContext('wysiwyg/redactor/files/redactor.min.js');\n        $template->addTplJSNameFromContext('files');\n\n        $css_file = 'wysiwyg/redactor/files/redactor.css';\n        $tpl_css_file = $template->getTplFilePath('css/wysiwyg/redactor/styles.css', false);\n        if($tpl_css_file){\n            $css_file = $tpl_css_file;\n        }\n        $template->addCSSFromContext($css_file);\n\n        if(!empty($this->options['plugins'])){\n            foreach($this->options['plugins'] as $plugin){\n                $template->addJSFromContext('wysiwyg/redactor/files/plugins/'.$plugin.'/'.$plugin.'.js');\n            }\n\n            if (in_array('clips', $this->options['plugins'])){\n                $this->options['clipsUrl'] = href_to('wysiwyg/redactor/files/plugins/clips/index.html');\n            }\n        }\n\n        if($this->lang !== 'en'){\n            $template->addJSFromContext('wysiwyg/redactor/files/lang/'.$this->lang.'.js');\n        }\n\n        ob_start(); ?>\n\n        <script>\n            var redactor_global_options = {};\n            function init_redactor (dom_id){\n                var imperavi_options = {};\n                if(redactor_global_options.hasOwnProperty('field_'+dom_id)){\n                    imperavi_options = redactor_global_options['field_'+dom_id];\n                } else if(redactor_global_options.hasOwnProperty('default')) {\n                    imperavi_options = redactor_global_options.default;\n                }\n                icms.files.url_delete = '<?php echo href_to('files', 'delete'); ?>';\n                imperavi_options.imageDeleteCallback = function (element){\n                    if(confirm('<?php echo LANG_PARSER_IMAGE_DELETE; ?>')){\n                        icms.files.deleteByPath($(element).attr('src'));\n                    }\n                };\n                $('#'+dom_id).redactor(imperavi_options);\n                icms.forms.addWysiwygsInsertPool(dom_id, function(field_element, text){\n                    $('#'+field_element).redactor('set', text);\n                    $('#'+field_element).redactor('focus');\n                });\n                icms.forms.addWysiwygsAddPool(dom_id, function(field_element, text){\n                    $('#'+field_element).redactor('insertHtml', text);\n                });\n            }\n        </script>\n\n        <?php $template->addBottom(ob_get_clean());\n\n        self::$redactor_loaded = true;\n\n    }\n\n}\n"], "fixing_code": ["<?php\n/**\n * @property \\modelBackendWidgets $model_backend_widgets\n */\nclass actionAdminWidgets extends cmsAction {\n\n    private $is_dynamic_scheme = false;\n    private $rows_titles_pos   = 'left';\n\n    public function run($do = false) {\n\n        // \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e, \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u043c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u044d\u043a\u0448\u0435\u043d\u0443\n        if ($do) {\n            $this->runExternalAction('widgets_' . $do, array_slice($this->params, 1));\n            return;\n        }\n\n        cmsCore::loadAllControllersLanguages();\n\n        $controllers = $this->model_backend_widgets->getPagesControllers();\n\n        $widgets_list = $this->model_backend_widgets->getAvailableWidgets();\n\n        $tpls = cmsCore::getTemplates();\n\n        $scroll_to     = strip_tags($this->request->get('scroll_to', ''));\n        $template_name = $this->request->get('template_name', '');\n\n        if (!$template_name || !in_array($template_name, $tpls)) {\n            $template_name = cmsConfig::get('template');\n        }\n\n        cmsCore::loadTemplateLanguage($template_name);\n\n        // \u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432\n        $templates = [];\n        // \u0428\u0430\u0431\u043b\u043e\u043d\u044b, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0445\u0435\u043c\u0430\n        $templates_dynamic_scheme = [];\n\n        foreach ($tpls as $tpl) {\n            $template_path = $this->cms_config->root_path . cmsTemplate::TEMPLATE_BASE_PATH . $tpl;\n            $manifest      = cmsTemplate::getTemplateManifest($template_path);\n            if ($manifest !== null) {\n                if (!empty($manifest['properties']['is_frontend'])) {\n                    $templates[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n                if (!empty($manifest['properties']['is_dynamic_layout'])) {\n                    $templates_dynamic_scheme[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n                continue;\n            }\n            if (file_exists($template_path . '/main.tpl.php')) {\n                $templates[$tpl] = $tpl;\n            }\n        }\n\n        $this->rows_titles_pos = cmsUser::getCookie('rows_titles_pos');\n        if (!$this->rows_titles_pos) {\n            $this->rows_titles_pos = 'left';\n        }\n\n        $scheme_html = $this->getSchemeHTML($template_name);\n\n        // \u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c\n        $intro_lang = cmsCore::loadLanguage('templates/' . $this->cms_template->name . '/admin/intro/widgets/widgets');\n\n        return $this->cms_template->render('widgets', [\n            'is_dynamic_scheme'        => $this->is_dynamic_scheme,\n            'rows_titles_pos'          => $this->rows_titles_pos,\n            'intro_lang'               => $intro_lang,\n            'controllers'              => $controllers,\n            'template_name'            => $template_name,\n            'templates'                => $templates,\n            'templates_dynamic_scheme' => $templates_dynamic_scheme,\n            'widgets_list'             => $widgets_list,\n            'scroll_to'                => $scroll_to,\n            'scheme_html'              => $scheme_html\n        ]);\n    }\n\n    public function getSchemeHTML($name = '') {\n\n        $template = new cmsTemplate($name);\n\n        $template->setContext($this);\n\n        $scheme_html = $template->getSchemeHTML();\n        if (!$scheme_html) {\n            $scheme_html = $this->getDynamicSchemeHTML($template);\n            if (!$scheme_html) {\n                return false;\n            }\n\n            $this->is_dynamic_scheme = true;\n        }\n\n        preg_match_all('/{(.+)}/ui', $scheme_html, $matches);\n\n        if (!empty($matches[1])) {\n            foreach ($matches[1] as $block) {\n\n                list($type, $value) = explode(':', $block);\n\n                if ($type === 'position') {\n                    $replace_html = '<ul class=\"position\" rel=\"' . html($value, false) . '\" id=\"pos-' . html($value, false) . '\"></ul>';\n                }\n\n                if ($type === 'block') {\n                    if (mb_strpos($value, 'LANG_') === 0) {\n                        $value = constant($value);\n                    }\n                    $replace_html = '<div class=\"block\"><span>' . $value . '</span></div>';\n                }\n\n                if ($type === 'cell') {\n                    if (mb_strpos($value, 'LANG_') === 0) {\n                        $value = constant($value);\n                    }\n                    $replace_html = '<div class=\"cell\"><span>' . $value . '</span></div>';\n                }\n\n                $scheme_html = str_replace(\"{{$block}}\", $replace_html, $scheme_html);\n            }\n        }\n\n        return $scheme_html;\n    }\n\n    private function getDynamicSchemeHTML($template) {\n\n        $this->cms_template->addTplJSName('admin-scheme');\n\n        $rows = $this->model_backend_widgets->getLayoutRows($template->getName());\n\n        return $template->getRenderedChild('widgets_scheme', [\n            'rows_titles_pos' => $this->rows_titles_pos,\n            'rows'            => $rows\n        ]);\n    }\n\n}\n", "<?php\nclass formAdminCtypesBasic extends cmsForm {\n\n    public function init($do, $ctype) {\n\n        $template = new cmsTemplate(cmsConfig::get('template'));\n\n        $meta_ctype_fields = [\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $meta_item_fields = [\n            'title'             => LANG_TITLE,\n            'description'       => LANG_DESCRIPTION,\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $item_fields = [\n            'category'   => LANG_CATEGORY,\n            'hits_count' => LANG_HITS,\n            'comments'   => LANG_COMMENTS,\n            'rating'     => LANG_RATING,\n            'tags'       => LANG_TAGS\n        ];\n\n        if (!empty($ctype['name'])) {\n\n            $_item_fields = cmsCore::getModel('content')->orderBy('ordering')->getContentFields($ctype['name']);\n\n            foreach ($_item_fields as $field) {\n                $item_fields[$field['name']] = $field['title'];\n            }\n        }\n\n        $this->setData('meta_item_fields', $meta_item_fields);\n        $this->setData('meta_ctype_fields', $meta_ctype_fields);\n        $this->setData('item_fields', $item_fields);\n\n        return [\n            'titles' => [\n                'title' => LANG_BASIC_OPTIONS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('name', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'hint' => LANG_CP_SYSTEM_NAME_HINT,\n                        'options' => [\n                            'max_length' => 32,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required'],\n                            ['sysname'],\n                            $do == 'add' ? ['unique', 'content_types', 'name'] : false\n                        ]\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'can_multilanguage' => true,\n                        'store_via_html_filter' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ]\n                    ]),\n                ]\n            ],\n            'pub' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_PUBLICATION,\n                'childs' => [\n                    new fieldCheckbox('is_date_range', [\n                        'title' => LANG_CP_IS_PUB_CONTROL,\n                        'hint' => LANG_CP_IS_PUB_CONTROL_HINT\n                    ]),\n                    new fieldList('options:is_date_range_process', [\n                        'title' => LANG_CP_IS_PUB_CONTROL_PROCESS,\n                        'default' => 'hide',\n                        'items' => [\n                            'hide'      => LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE,\n                            'delete'    => LANG_CP_IS_PUB_CONTROL_PROCESS_DEL,\n                            'in_basket' => LANG_BASKET_DELETE\n                        ],\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldNumber('options:notify_end_date_days', [\n                        'title' => LANG_CP_NOTIFY_END_DATE_DAYS,\n                        'units' => LANG_DAYS,\n                        'default' => 1,\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldString('options:notify_end_date_notice', [\n                        'title' => LANG_MESSAGE,\n                        'multilanguage' => true,\n                        'is_clean_disable' => true,\n                        'default' => '\u0427\u0435\u0440\u0435\u0437 %s \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 <a href=\"%s\">%s</a> \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0449\u0435\u043d\u0430.',\n                        'visible_depend' => ['is_date_range' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:disable_drafts', [\n                        'title' => LANG_CP_DISABLE_DRAFTS\n                    ])\n                ]\n            ],\n            'categories' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CATEGORIES,\n                'childs' => [\n                    new fieldCheckbox('is_cats', [\n                        'title' => LANG_CP_CATEGORIES_ON\n                    ]),\n                    new fieldCheckbox('is_cats_recursive', [\n                        'title' => LANG_CP_CATEGORIES_RECURSIVE,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_empty_root', [\n                        'title' => LANG_CP_CATEGORIES_EMPTY_ROOT,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_multi', [\n                        'title' => LANG_CP_CATEGORIES_MULTI,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_change', [\n                        'title' => LANG_CP_CATEGORIES_CHANGE,\n                        'default' => true,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_open_root', [\n                        'title' => LANG_CP_CATEGORIES_OPEN_ROOT,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_cats_only_last', [\n                        'title' => LANG_CP_CATEGORIES_ONLY_LAST,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:is_show_cats', [\n                        'title' => LANG_CP_CATEGORIES_SHOW,\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldListMultiple('options:cover_sizes', [\n                        'title' => LANG_CP_CAT_COVER_SIZES,\n                        'default' => [],\n                        'generator' => function () {\n                            $presets = cmsCore::getModel('images')->getPresetsList();\n                            $presets['original'] = LANG_PARSER_IMAGE_SIZE_ORIGINAL;\n                            return $presets;\n                        },\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ]),\n                    new fieldList('options:context_list_cover_sizes', [\n                        'title'        => LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        },\n                        'values_generator' => function () {\n                            $presets = cmsCore::getModel('images')->getPresetsList();\n                            $presets['original'] = LANG_PARSER_IMAGE_SIZE_ORIGINAL;\n                            return $presets;\n                        },\n                        'visible_depend' => ['is_cats' => ['show' => ['1']]]\n                    ])\n                ]\n            ],\n            'folders' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_FOLDERS,\n                'childs' => [\n                    new fieldCheckbox('is_folders', [\n                        'title' => LANG_CP_FOLDERS_ON,\n                        'hint' => LANG_CP_FOLDERS_HINT\n                    ])\n                ]\n            ],\n            'listview' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_LISTVIEW_OPTIONS,\n                'childs' => [\n                    new fieldCheckbox('options:list_off_breadcrumb', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB\n                    ]),\n                    new fieldCheckbox('options:list_off_breadcrumb_ctype', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB_CTYPE,\n                        'visible_depend' => ['options:list_off_breadcrumb' => ['show' => ['0']]]\n                    ]),\n                    new fieldCheckbox('options:list_on', [\n                        'title' => LANG_CP_LISTVIEW_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:list_off_index', [\n                        'title' => LANG_CP_LISTVIEW_OFF_INDEX,\n                        'hint'  => LANG_CP_LISTVIEW_OFF_INDEX_HINT,\n                        'default' => false,\n                        'visible_depend' => ['options:list_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:profile_on', [\n                        'title' => LANG_CP_PROFILELIST_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:list_show_filter', [\n                        'title' => LANG_CP_LISTVIEW_FILTER\n                    ]),\n                    new fieldCheckbox('options:list_expand_filter', [\n                        'title' => LANG_CP_LISTVIEW_FILTER_EXPAND,\n                        'visible_depend' => ['options:list_show_filter' => ['show' => ['1']]]\n                    ]),\n                    new fieldList('options:privacy_type', [\n                        'title'   => LANG_CP_PRIVACY_TYPE,\n                        'default' => 'hide',\n                        'items'   => [\n                            'hide'       => LANG_CP_PRIVACY_TYPE_HIDE,\n                            'show_title' => LANG_CP_PRIVACY_TYPE_SHOW_TITLE,\n                            'show_all'   => LANG_CP_PRIVACY_TYPE_SHOW_ALL\n                        ]\n                    ]),\n                    new fieldNumber('options:limit', [\n                        'title' => LANG_LIST_LIMIT,\n                        'default' => 15,\n                        'rules' => [\n                            ['required'],\n                            ['min', 1]\n                        ]\n                    ]),\n                    new fieldList('options:list_style', [\n                        'title' => LANG_CP_LISTVIEW_STYLE,\n                        'is_chosen_multiple' => true,\n                        'hint' => sprintf(LANG_CP_LISTVIEW_STYLE_HINT, $template->getName()),\n                        'generator' => function () use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:list_style_options', [\n                        'title'        => LANG_CP_LIST_STYLE_OPTIONS,\n                        'hint'         => LANG_CP_LIST_STYLE_OPTIONS_HINT,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'multiple_keys' => [\n                            'name' => 'field', 'value' => 'field_value'\n                        ],\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:list_style_names', [\n                        'title'        => LANG_CP_LIST_STYLE_NAMES,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'multiple_keys' => [\n                            'name' => 'field', 'value' => 'field_value'\n                        ],\n                        'generator' => function ($ctype) use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ]),\n                    new fieldList('options:context_list_style', [\n                        'title'        => LANG_CP_CONTEXT_LIST_STYLE,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_CP_CONTEXT_SELECT_LIST,\n                        'generator' => function ($item) use ($do, $ctype) {\n\n                            $lists = cmsEventsManager::hookAll('ctype_lists_context', 'template' . ($do != 'add' ? ':' . $ctype['name'] : ''));\n\n                            $items = [];\n\n                            if ($lists) {\n                                foreach ($lists as $list) {\n                                    $items = array_merge($items, $list);\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'values_generator' => function () use ($template) {\n                            return $template->getAvailableContentListStyles();\n                        }\n                    ])\n                ]\n            ],\n            'itemview' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_ITEMVIEW_OPTIONS,\n                'childs' => [\n                    new fieldCheckbox('options:item_off_breadcrumb', [\n                        'title' => LANG_CP_LIST_OFF_BREADCRUMB\n                    ]),\n                    new fieldCheckbox('options:item_on', [\n                        'title' => LANG_CP_ITEMVIEW_ON,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:is_show_fields_group', [\n                        'title' => LANG_CP_ITEMVIEW_FIELDS_GROUP,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:hits_on', [\n                        'title' => LANG_CP_ITEMVIEW_HITS_ON,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldListGroups('options:hits_groups_view', [\n                        'title' => LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW,\n                        'show_all' => true,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldCheckbox('options:disable_info_block', [\n                        'title' => LANG_CP_ITEMVIEW_OFF_INFO_BLOCK,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldText('options:share_code', [\n                        'title' => LANG_CP_ITEMVIEW_SHARE_CODE,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                    new fieldText('item_append_html', [\n                        'title' => LANG_CP_ITEMVIEW_APPEND_HTML,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'hint' => LANG_CP_ITEMVIEW_APPEND_HTML_HINT,\n                        'visible_depend' => ['options:item_on' => ['show' => ['1']]]\n                    ]),\n                ]\n            ],\n            'seo-items' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA,\n                'childs' => [\n                    new fieldCheckbox('options:is_manual_title', [\n                        'title' => LANG_CP_SEOMETA_MANUAL_TITLE,\n                    ]),\n                    new fieldCheckbox('is_auto_keys', [\n                        'title' => LANG_CP_SEOMETA_AUTO_KEYS,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_auto_desc', [\n                        'title' => LANG_CP_SEOMETA_AUTO_DESC,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_auto_url', [\n                        'title' => LANG_CP_AUTO_URL,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('is_fixed_url', [\n                        'title' => LANG_CP_FIXED_URL\n                    ]),\n                    new fieldString('url_pattern', [\n                        'title' => LANG_CP_URL_PATTERN,\n                        'prefix' => '/' . (!empty($ctype['name']) ? $ctype['name'] : '') . '/',\n                        'suffix' => '.html',\n                        'default' => '{id}-{title}',\n                        'options' => [\n                            'max_length' => 255,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldString('options:seo_title_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_keys_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'default' => '{content|string_get_meta_keywords}',\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_desc_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'default' => '{content|string_get_meta_description}',\n                        'patterns_hint' => [\n                            'patterns' =>  $item_fields\n                        ]\n                    ])\n                ]\n            ],\n            'seo-cats' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA_CATS,\n                'childs' => [\n                    new fieldCheckbox('options:is_cats_title', [\n                        'title' => LANG_CP_SEOMETA_CATS_TITLE\n                    ]),\n                    new fieldCheckbox('options:is_cats_h1', [\n                        'title' => LANG_CP_SEOMETA_CATS_H1\n                    ]),\n                    new fieldCheckbox('options:is_cats_keys', [\n                        'title' => LANG_CP_SEOMETA_CATS_KEYS\n                    ]),\n                    new fieldCheckbox('options:is_cats_desc', [\n                        'title' => LANG_CP_SEOMETA_CATS_DESC\n                    ]),\n                    new fieldCheckbox('options:is_cats_auto_url', [\n                        'title' => LANG_CP_CATS_AUTO_URL,\n                        'default' => true\n                    ]),\n                    new fieldCheckbox('options:is_cats_first_level_slug', [\n                        'title' => LANG_CP_CATS_FIRST_LEVEL_SLUG,\n                        'default' => false\n                    ]),\n                    new fieldString('options:seo_cat_h1_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_title_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_keys_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ]),\n                    new fieldString('options:seo_cat_desc_pattern', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_item_fields\n                        ]\n                    ])\n                ]\n            ],\n            'seo' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_SEOMETA_DEFAULT,\n                'childs' => [\n                    new fieldString('options:seo_ctype_h1_pattern', [\n                        'can_multilanguage' => true,\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_types'\n                        ],\n                        'is_strip_tags' => true,\n                        'patterns_hint' => [\n                            'patterns' =>  $meta_ctype_fields\n                        ],\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ],\n            'collapsed' => [\n                'type' => 'fieldset',\n                'is_collapsed' => true,\n                'title' => LANG_CP_IS_COLLAPSED,\n                'childs' => [\n                    new fieldListMultiple('options:is_collapsed', [\n                        'generator' => function ($item) use ($do, $ctype) {\n\n                            $items = [\n                                'folder' => LANG_CP_FOLDERS,\n                                'group_wrap' => LANG_CP_CT_GROUPS\n                            ];\n\n                            if ($do !== 'add') {\n\n                                $model = cmsCore::getModel('content');\n\n                                $fieldset_titles = $model->orderBy('ordering')->getContentFieldsets($ctype['id']);\n\n                                if ($fieldset_titles) {\n                                    foreach ($fieldset_titles as $fieldset) {\n                                        $items[md5($fieldset)] = $fieldset;\n                                    }\n                                }\n                            }\n\n                            return $items + [\n                                'tags_wrap'    => LANG_TAGS,\n                                'privacy_wrap' => LANG_CP_FIELD_PRIVACY,\n                                'is_comment'   => LANG_CP_COMMENTS,\n                                'seo_wrap'     => LANG_SEO,\n                                'pub_wrap'     => LANG_CP_PUBLICATION,\n                            ];\n                        }\n                    ])\n                ]\n            ]\n        ];\n    }\n}\n", "<?php\n\nclass formAdminCtypesDataset extends cmsForm {\n\n    public function init($do, $ctype, $cats_list, $fields_list, $dataset = []) {\n\n        $ctype_id = (!empty($ctype['id']) ? $ctype['id'] : $ctype['name']);\n\n        $lists = cmsEventsManager::hookAll('ctype_lists_context', 'dataset:' . $ctype['name']);\n\n        $ds_lists = [];\n\n        if ($lists) {\n            foreach ($lists as $list) {\n                $ds_lists = array_merge($ds_lists, $list);\n            }\n        }\n\n        $name_rules = [['required'], ['sysname']];\n        if ($do == 'add') {\n            $name_rules[] = ['unique_ctype_dataset', $ctype_id, false];\n        } else {\n            $name_rules[] = ['unique_ctype_dataset', $ctype_id, $dataset['id']];\n        }\n\n        // \u0417\u043d\u0430\u0447\u0438\u0442 \u043d\u0435 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430\n        if (!is_numeric($ctype_id)) {\n\n            $name_rules[] = ['unique', $ctype_id, 'slug'];\n\n            $meta_item_fields = [];\n        } else {\n\n            $meta_item_fields = [\n                'title'             => LANG_TITLE,\n                'description'       => LANG_DESCRIPTION,\n                'ds_title'          => LANG_CP_DATASET . ': ' . LANG_TITLE,\n                'ds_description'    => LANG_CP_DATASET . ': ' . LANG_DESCRIPTION,\n                'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n                'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n                'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n                'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n                'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n                'filter_string'     => LANG_FILTERS\n            ];\n        }\n\n        $form = [\n            'basic' => [\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('name', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'rules' => $name_rules\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_CP_DATASET_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'rules' => [\n                            ['required'],\n                            ['max_length', 100]\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'store_via_html_filter' => true,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ]\n                    ]),\n                    new fieldNumber('max_count', [\n                        'title' => LANG_LIST_LIMIT,\n                        'default' => 0,\n                        'rules' => [\n                            ['max', 65535]\n                        ]\n                    ]),\n                    new fieldCheckbox('is_visible', [\n                        'title' => LANG_CP_DATASET_IS_VISIBLE,\n                        'default' => true\n                    ])\n                ]\n            ],\n            'sorting' => [\n                'title'  => LANG_SORTING,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('sorting', [\n                        'add_title'    => LANG_SORTING_ADD,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'select_title' => LANG_SORTING_FIELD,\n                        'multiple_keys' => [\n                            'by' => 'field', 'to' => 'field_select'\n                        ],\n                        'generator' => function () use ($fields_list) {\n\n                            $items = [];\n\n                            if ($fields_list) {\n                                foreach ($fields_list as $field) {\n                                    $items[$field['value']] = $field['title'];\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'value_items' => [\n                            'asc'  => LANG_SORTING_ASC,\n                            'desc' => LANG_SORTING_DESC\n                        ]\n                    ])\n                ]\n            ],\n            'filter' => [\n                'title'  => LANG_FILTERS,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('filters', [\n                        'add_title'    => LANG_FILTER_ADD,\n                        'is_multiple'  => true,\n                        'dynamic_list' => true,\n                        'single_select' => 0,\n                        'select_title' => LANG_FILTER_FIELD,\n                        'multiple_keys' => [\n                            'field' => 'field', 'condition' => 'field_select', 'value' => 'field_value'\n                        ],\n                        'generator' => function () use ($fields_list) {\n\n                            $items = [];\n\n                            if ($fields_list) {\n                                foreach ($fields_list as $field) {\n                                    $items[$field['value']] = [\n                                        'title' => $field['title'],\n                                        'data'  => [\n                                            'ns' => $field['type']\n                                        ]\n                                    ];\n                                }\n                            }\n\n                            return $items;\n                        },\n                        'value_items' => [\n                            'int'  => [\n                                'eq' => '=',\n                                'gt' => '&gt;',\n                                'lt' => '&lt;',\n                                'ge' => '&ge;',\n                                'le' => '&le;',\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ],\n                            'str'  => [\n                                'eq' => '=',\n                                'lk' => LANG_FILTER_LIKE,\n                                'ln' => LANG_FILTER_NOT_LIKE,\n                                'lb' => LANG_FILTER_LIKE_BEGIN,\n                                'lf' => LANG_FILTER_LIKE_END,\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ],\n                            'date'  => [\n                                'eq' => '=',\n                                'gt' => '&gt;',\n                                'lt' => '&lt;',\n                                'ge' => '&ge;',\n                                'le' => '&le;',\n                                'dy' => LANG_FILTER_DATE_YOUNGER,\n                                'do' => LANG_FILTER_DATE_OLDER,\n                                'nn' => LANG_FILTER_NOT_NULL,\n                                'ni' => LANG_FILTER_IS_NULL\n                            ]\n                        ]\n                    ])\n                ]\n            ],\n            'seo' => [\n                'title' => LANG_SEO,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('seo_h1', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_h1_pattern']) ? $ctype['options']['seo_cat_h1_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_title_pattern']) ? $ctype['options']['seo_cat_title_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_keys_pattern']) ? $ctype['options']['seo_cat_keys_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => 'content_datasets'\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_desc_pattern']) ? $ctype['options']['seo_cat_desc_pattern'] : null),\n                        'is_strip_tags' => true,\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ],\n            'gv' => [\n                'title' => LANG_SHOW_TO_GROUPS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldListGroups('groups_view', [\n                        'show_all' => true,\n                        'show_guests' => true\n                    ])\n                ]\n            ],\n            'gh' => [\n                'title' => LANG_HIDE_FOR_GROUPS,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldListGroups('groups_hide', [\n                        'show_all' => false,\n                        'show_guests' => true\n                    ])\n                ]\n            ],\n            'list_show' => [\n                'title' => LANG_CP_FIELD_IN_LIST_CONTEXT,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('list:show', [\n                        'is_chosen_multiple' => true,\n                        'items' => $ds_lists\n                    ]),\n                ]\n            ],\n            'list_hide' => [\n                'title' => LANG_CP_FIELD_NOT_IN_LIST_CONTEXT,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('list:hide', [\n                        'is_chosen_multiple' => true,\n                        'items' => $ds_lists\n                    ]),\n                ]\n            ]\n        ];\n\n        if (!empty($ctype['is_cats']) && $cats_list) {\n            $form['cv'] = [\n                'title' => LANG_CP_CATS_VIEW,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('cats_view', [\n                        'is_chosen_multiple' => true,\n                        'items' => $cats_list\n                    ]),\n                ]\n            ];\n            $form['ch'] = [\n                'title' => LANG_CP_CATS_HIDE,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldList('cats_hide', [\n                        'is_chosen_multiple' => true,\n                        'items' => $cats_list\n                    ])\n                ]\n            ];\n        }\n\n        return $form;\n    }\n}\n", "<?php\n\nclass formAdminCtypesFilter extends cmsForm {\n\n    public function init($do, $ctype, $fields, $props_fields, $table_name, $filter) {\n\n        $meta_item_fields = [\n            'title'             => LANG_TITLE,\n            'description'       => LANG_DESCRIPTION,\n            'f_title'           => LANG_FILTER . ': ' . LANG_TITLE,\n            'f_description'     => LANG_FILTER . ': ' . LANG_DESCRIPTION,\n            'ctype_title'       => LANG_CONTENT_TYPE . ': ' . LANG_TITLE,\n            'ctype_description' => LANG_CONTENT_TYPE . ': ' . LANG_DESCRIPTION,\n            'ctype_label1'      => LANG_CP_NUMERALS_1_LABEL,\n            'ctype_label2'      => LANG_CP_NUMERALS_2_LABEL,\n            'ctype_label10'     => LANG_CP_NUMERALS_10_LABEL,\n            'filter_string'     => LANG_FILTERS\n        ];\n\n        $slug_field_rules = [\n            ['required'],\n            ['slug']\n        ];\n\n        if ($do == 'add') {\n            $slug_field_rules[] = ['unique', $table_name, 'slug'];\n        } else {\n            $slug_field_rules[] = ['unique_exclude', $table_name, 'slug', $filter['id']];\n        }\n\n        $filters = $filters_props = [];\n\n        foreach ($fields as $_field) {\n\n            if ((!$_field['handler']->allow_index || $_field['handler']->filter_type === false) && $_field['type'] != 'parent') {\n                continue;\n            }\n\n            $field = $_field['handler'];\n\n            $field->setName('filters:' . $field->getName());\n\n            $field->display_input = 'getFilterInput';\n            $field->show_filter_input_title = true;\n            $field->is_denormalization = false;\n\n            $field->setContext('filter')->setItem(['ctype_name' => $ctype['name'], 'id' => null]);\n\n            $required_key = array_search(['required'], $field->getRules());\n            if ($required_key !== false) {\n                unset($field->rules[$required_key]);\n            }\n\n            $filters[] = $field;\n        }\n\n        if (!empty($props_fields)) {\n\n            $props_bind = $this->getContentPropsBind($ctype['name']);\n\n            foreach ($props_fields as $id => $props_field) {\n\n                if ((!$props_field->allow_index || $props_field->filter_type === false)) {\n                    continue;\n                }\n\n                $props_field->setName('filters:p' . $id);\n\n                $props_field->display_input = 'getFilterInput';\n                $props_field->show_filter_input_title = true;\n\n                if (isset($props_bind[$id])) {\n                    $props_field->visible_depend = ['filters:category_id' => ['show' => $props_bind[$id]]];\n                }\n\n                $props_field->setContext('filter')->setItem(['ctype_name' => $ctype['name'], 'id' => null]);\n\n                $required_key = array_search(['required'], $props_field->rules);\n                if ($required_key !== false) {\n                    unset($props_field->rules[$required_key]);\n                }\n\n                $filters_props[] = $props_field;\n            }\n\n            if ($filters_props) {\n                $filters_props = [\n                    new fieldList(\n                        'filters:category_id',\n                        [\n                            'title' => LANG_CATEGORY,\n                            'items' => $this->getFormCategories($ctype)\n                        ]\n                    )\n                ] + $filters_props;\n            }\n        }\n\n        return [\n            'basic' => [\n                'type' => 'fieldset',\n                'title'  => LANG_CP_BASIC,\n                'childs' => [\n                    new fieldString('slug', [\n                        'title' => LANG_SYSTEM_NAME,\n                        'prefix' => href_to(((cmsConfig::get('ctype_default') && in_array($ctype['name'], cmsConfig::get('ctype_default'))) ? '' : $ctype['name'])),\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => $slug_field_rules\n                    ]),\n                    new fieldString('title', [\n                        'title' => LANG_TITLE,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'options' => [\n                            'max_length' => 100,\n                            'show_symbol_count' => true\n                        ],\n                        'rules' => [\n                            ['required']\n                        ]\n                    ]),\n                    new fieldHtml('description', [\n                        'title' => LANG_DESCRIPTION,\n                        'hint' => LANG_CP_FILTER_DESC_HINT,\n                        'store_via_html_filter' => true,\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ]\n                    ])\n                ]\n            ],\n            'filter' => [\n                'title'  => LANG_CP_FILTER_FIELDS,\n                'type'   => 'fieldset',\n                'childs' => $filters\n            ],\n            'filter_props' => [\n                'title'  => LANG_CP_FILTER_PROPS,\n                'type'   => 'fieldset',\n                'childs' => $filters_props\n            ],\n            'cats' => [\n                'title'  => LANG_CP_FILTER_CATS,\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldListMultiple('cats', [\n                        'show_all'  => true,\n                        'generator' => function ($prop) use ($ctype) {\n                            $model = cmsCore::getModel('content');\n                            $tree = $model->limit(0)->getCategoriesTree($ctype['name']);\n                            foreach ($tree as $c) {\n                                $items[$c['id']] = $c['title'];\n                            }\n                            return $items;\n                        }\n                    ])\n                ]\n            ],\n            'seo' => [\n                'title' => LANG_SEO,\n                'type' => 'fieldset',\n                'childs' => [\n                    new fieldString('seo_h1', [\n                        'title' => LANG_CP_SEOMETA_ITEM_H1,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_h1_pattern']) ? $ctype['options']['seo_cat_h1_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_title', [\n                        'title' => LANG_CP_SEOMETA_ITEM_TITLE,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_title_pattern']) ? $ctype['options']['seo_cat_title_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldString('seo_keys', [\n                        'title' => LANG_CP_SEOMETA_ITEM_KEYS,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_keys_pattern']) ? $ctype['options']['seo_cat_keys_pattern'] : null),\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ]),\n                    new fieldText('seo_desc', [\n                        'title' => LANG_CP_SEOMETA_ITEM_DESC,\n                        'hint' => ($meta_item_fields ? LANG_CP_SEOMETA_DS_HINT : ''),\n                        'can_multilanguage' => true,\n                        'multilanguage_params' => [\n                            'is_table_field' => true,\n                            'table' => $table_name\n                        ],\n                        'patterns_hint' => ($meta_item_fields ? ['patterns' =>  $meta_item_fields] : ''),\n                        'default' => (!empty($ctype['options']['seo_cat_desc_pattern']) ? $ctype['options']['seo_cat_desc_pattern'] : null),\n                        'is_strip_tags' => true,\n                        'options' => [\n                            'max_length' => 256,\n                            'show_symbol_count' => true\n                        ]\n                    ])\n                ]\n            ]\n        ];\n    }\n\n    private function getFormCategories($ctype) {\n\n        $level_offset   = 0;\n        $last_header_id = false;\n        $items          = ['' => ''];\n\n        $tree = cmsCore::getModel('content')->limit(0)->getCategoriesTree($ctype['name']);\n        if (!$tree) {\n            return $items;\n        }\n\n        foreach ($tree as $c) {\n\n            if ($ctype['options']['is_cats_only_last']) {\n\n                $dash_pad = $c['ns_level'] - 1 >= 0 ? str_repeat('-', $c['ns_level'] - 1) . ' ' : '';\n\n                if ($c['ns_right'] - $c['ns_left'] == 1) {\n                    if ($last_header_id !== false && $last_header_id != $c['parent_id']) {\n                        $items['opt' . $c['id']] = [str_repeat('-', $c['ns_level'] - 1) . ' ' . $c['title']];\n                    }\n                    $items[$c['id']] = $dash_pad . $c['title'];\n                } else if ($c['parent_id'] > 0) {\n                    $items['opt' . $c['id']] = [$dash_pad . $c['title']];\n                    $last_header_id = $c['id'];\n                }\n\n                continue;\n            }\n\n            if (!$ctype['options']['is_cats_only_last']) {\n\n                if ($c['parent_id'] == 0 && !$ctype['options']['is_cats_open_root']) {\n                    $level_offset = 1;\n                    continue;\n                }\n\n                $items[$c['id']] = str_repeat('-- ', $c['ns_level'] - $level_offset) . ' ' . $c['title'];\n\n                continue;\n            }\n        }\n\n        return $items;\n    }\n\n    private function getContentPropsBind($ctype_name) {\n\n        $model = cmsCore::getModel('content');\n\n        $bind_table_name = $model->table_prefix . $ctype_name . '_props_bind';\n\n        $items = $model->get($bind_table_name);\n\n        $result = [];\n\n        if ($items) {\n            foreach ($items as $item) {\n                $result[$item['prop_id']][] = $item['cat_id'];\n            }\n        }\n\n        return $result;\n    }\n}\n", "<?php\nclass formAdminWidgetsCols extends cmsForm {\n\n    public function init($do, $col_id, $row) {\n\n        return array(\n            'basic' => array(\n                'type' => 'fieldset',\n                'childs' => array(\n                    new fieldHidden('row_id'),\n                    new fieldString('title', array(\n                        'title' => LANG_TITLE,\n                        'rules' => array(\n                            array('required'),\n                            array('max_length', 255)\n                        )\n                    )),\n                    new fieldString('name', array(\n                        'title' => LANG_CP_WIDGETS_COL_NAME,\n                        'hint' => LANG_CP_WIDGETS_COL_NAME_HINT,\n                        'rules' => array(\n                            array('max_length', 50),\n                            array('sysname'),\n                            array(function($controller, $data, $value) use($do, $col_id, $row){\n\n                                if (empty($value)) { return true; }\n                                if (!in_array(gettype($value), array('integer','string','double'))) { return ERR_VALIDATE_INVALID; }\n\n                                $model = new cmsModel();\n\n                                $model->filterEqual('name', $value);\n                                $model->filterEqual('r.template', $row['template']);\n\n                                if($col_id){\n                                    $model->filterNotEqual('id', $col_id);\n                                }\n                                $model->joinInner('layout_rows', 'r', 'r.id = i.row_id');\n                                $count = $model->getCount('layout_cols');\n\n                                if ($count) { return ERR_VALIDATE_UNIQUE; }\n                                return true;\n                            })\n                        )\n                    )),\n                    new fieldList('type', array(\n                        'title' => LANG_CP_WIDGETS_COL_TYPE,\n                        'default' => 'typical',\n                        'items' => array(\n                            'typical' => LANG_CP_WIDGETS_COL_TYPE1,\n                            'custom'  => LANG_CP_WIDGETS_COL_TYPE2\n                        )\n                    )),\n                    new fieldHtml('wrapper', array(\n                        'title' => LANG_CP_WIDGETS_COL_WRAPPER,\n                        'hint'  => LANG_CP_WIDGETS_COL_WRAPPER_H,\n                        'options' => array(\n                            'editor' => 'ace'\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('typical')))\n                    )),\n                    new fieldList('tag', array(\n                        'title' => LANG_CP_WIDGETS_COL_TAG,\n                        'default' => 'div',\n                        'items' => array(\n                            'div'     => '<div>',\n                            'article' => '<article>',\n                            'aside'   => '<aside>',\n                            'main'    => '<main>',\n                            'footer'  => '<footer>',\n                            'header'  => '<header>',\n                            'nav'     => '<nav>',\n                            'section' => '<section>'\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('custom')))\n                    )),\n                    new fieldString('class', array(\n                        'title' => LANG_CP_WIDGETS_COL_CLASS,\n                        'rules' => array(\n                            array('max_length', 100)\n                        ),\n                        'visible_depend' => array('type' => array('hide' => array('custom')))\n                    ))\n                )\n            )\n        );\n\n    }\n\n}\n", "<?php\n\nclass formAdminWidgetsImportScheme extends cmsForm {\n\n    public function init($to_template_name) {\n\n        $templates_dynamic_scheme = [];\n\n        $tpls = cmsCore::getTemplates();\n\n        if ($tpls) {\n            foreach ($tpls as $tpl) {\n\n                if($to_template_name == $tpl){\n                    continue;\n                }\n\n                $template_path = cmsConfig::get('root_path') . cmsTemplate::TEMPLATE_BASE_PATH. $tpl;\n\n                $manifest = cmsTemplate::getTemplateManifest($template_path);\n\n                if($manifest === null){\n                    continue;\n                }\n\n                if (!empty($manifest['properties']['is_dynamic_layout'])) {\n                    $templates_dynamic_scheme[$tpl] = !empty($manifest['title']) ? $manifest['title'] : $tpl;\n                }\n            }\n        }\n\n        if(!$templates_dynamic_scheme){\n            return [\n                'basic' => [\n                    'type'   => 'fieldset',\n                    'childs' => [\n                        new fieldFile('yaml_file', [\n                            'title' => LANG_CP_WIDGETS_LFILE,\n                            'hint'  => LANG_CP_WIDGETS_LFILE_HINT,\n                            'options' => [\n                                'extensions' => 'txt'\n                            ]\n                        ])\n                    ]\n                ]\n            ];\n        }\n\n        return [\n            'basic' => [\n                'type'   => 'fieldset',\n                'childs' => [\n                    new fieldList('import_type', [\n                        'title' => LANG_CP_WIDGETS_IMPORT_TYPE,\n                        'items' => [\n                            'file' => LANG_PARSER_FILE,\n                            'template' => LANG_CP_WIDGETS_IMPORT_TYPE_EX\n                        ]\n                    ]),\n                    new fieldList('from_template', [\n                        'title' => LANG_CP_WIDGETS_FROM_TEMPLATE,\n                        'items' => $templates_dynamic_scheme,\n                        'visible_depend' => ['import_type' => ['show' => ['template']]]\n                    ]),\n                    new fieldCheckbox('copy_widgets', array(\n                        'title' => LANG_CP_WIDGETS_COPY_WIDGETS,\n                        'visible_depend' => ['import_type' => ['show' => ['template']]]\n                    )),\n                    new fieldFile('yaml_file', [\n                        'title' => LANG_CP_WIDGETS_LFILE,\n                        'hint'  => LANG_CP_WIDGETS_LFILE_HINT,\n                        'options' => [\n                            'extensions' => 'yaml'\n                        ],\n                        'visible_depend' => ['import_type' => ['show' => ['file']]]\n                    ])\n                ]\n            ]\n        ];\n    }\n\n}\n", "<?php\n\nclass modelMenu extends cmsModel {\n\n    private static $all_menus = null;\n    private static $rendered_menus = [];\n\n    private static function loadAllMenus() {\n        if(self::$all_menus === null){\n\n            $model = new self();\n\n            self::$all_menus = $model->filterEqual('is_enabled', 1)->getAllMenuItemsTree();\n        }\n    }\n\n    public static function getMenuItemsByName($menu_name) {\n\n        self::loadAllMenus();\n\n        if(!empty(self::$all_menus[$menu_name])){\n\n            if(!in_array($menu_name, self::$rendered_menus)){\n\n                self::$rendered_menus[] = $menu_name;\n\n                self::$all_menus[$menu_name] = self::buildMenu(self::$all_menus[$menu_name]);\n            }\n\n            return self::$all_menus[$menu_name];\n        }\n\n        return [];\n    }\n\n    public function addMenu($item){\n\n        $id = $this->insert('menu', $item);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $id;\n\n    }\n\n    public function updateMenu($id, $item){\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $this->update('menu', $id, $item);\n\n    }\n\n    public function deleteMenu($id){\n\n        $this->delete('menu', $id);\n\n        $this->filterEqual('menu_id', $id)->deleteFiltered('menu_items');\n\n        cmsCache::getInstance()->clean('menu.items');\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenus(){\n\n        $items = array();\n\n        $sql = \"SELECT *\n                FROM {#}menu\n                ORDER BY id ASC\";\n\n        $result = $this->db->query($sql);\n\n        // \u0435\u0441\u043b\u0438 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u0435\u0440\u043d\u0443\u043b, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u043b\u043e\u0436\u044c\n        if (!$this->db->numRows($result)){ return false; }\n\n        // \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u0435\u0440\u043d\u0443\u0432\u0448\u0438\u0435\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u0438\n        while($item = $this->db->fetchAssoc($result)){\n\n            // \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n            $items[$item['id']] = $item;\n\n        }\n\n        // \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0438\n        return $items;\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenu($id, $by_field = 'id'){\n\n        $this->useCache('menu.menus');\n\n        return $this->getItemByField('menu', $by_field, $id);\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenuItems($menu_id = false, $parent_id = false){\n\n        $this->select('COUNT(childs.id)', 'childs_count');\n\n        $this->joinLeft('menu_items', 'childs', 'childs.parent_id = i.id AND childs.is_enabled = 1');\n\n        if($menu_id !== false){\n            $this->filterEqual('menu_id', $menu_id);\n        }\n\n        if ($parent_id !== false){\n            $this->filterEqual('parent_id', $parent_id);\n        }\n\n        $this->groupBy('id');\n\n        $this->orderBy('ordering', 'asc');\n\n        $this->useCache('menu.items');\n\n        return $this->get('menu_items', function($item, $model){\n            if ($item['options']){\n                $item['options'] = cmsModel::yamlToArray($item['options']);\n            } else {\n                $item['options'] = array();\n            }\n            $item['groups_view'] = cmsModel::yamlToArray($item['groups_view']);\n            $item['groups_hide'] = cmsModel::yamlToArray($item['groups_hide']);\n            return $item;\n        });\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getAllMenuItemsTree() {\n\n        $menus = $this->select('menu.name', 'menu_name')->joinLeft('menu', 'menu', 'menu.id = i.menu_id')->getMenuItems();\n\n        $result = array();\n\n        if($menus){\n            $menus = cmsEventsManager::hook('menu_before_list', $menus);\n            foreach ($menus as $menu) {\n                $result[$menu['menu_name']][$menu['id']] = $menu;\n            }\n        }\n\n        return $result;\n\n    }\n\n    public static function buildMenu($menus, $parse_hooks = true) {\n\n        $items = [];\n        $delta = [];\n\n        $user = cmsUser::getInstance();\n\n        // \u043f\u0435\u0440\u0435\u0431\u0438\u0440\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u0435\u0440\u043d\u0443\u0432\u0448\u0438\u0435\u0441\u044f \u043f\u0443\u043d\u043a\u0442\u044b \u043c\u0435\u043d\u044e\n        foreach ($menus as $item) {\n\n            $is_root_added = false;\n\n            if (($item['groups_view'] && !$user->isInGroups($item['groups_view'])) ||\n                    ($item['groups_hide'] && $user->isInGroups($item['groups_hide']))) {\n\n                if ($item['parent_id']) {\n                    if (!isset($delta[$item['parent_id']])) {\n                        $delta[$item['parent_id']] = 1;\n                    } else {\n                        $delta[$item['parent_id']] += 1;\n                    }\n                }\n\n                continue;\n            }\n\n            $hook_result = ['items' => []];\n\n            if ($item['title'] && $parse_hooks) {\n                if (strpos($item['title'], '{user.') !== false) {\n                    $item['title'] = string_replace_user_properties($item['title']);\n                }\n            }\n\n            if ($item['url'] && $parse_hooks) {\n\n                $matches = [];\n\n                // \u0435\u0441\u043b\u0438 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n                if (strpos($item['url'], '{user.') !== false) {\n                    $item['url'] = string_replace_user_properties($item['url']);\n                } else\n\n                // \u0435\u0441\u043b\u0438 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0448\u0430\u0431\u043b\u043e\u043d {controller:action}\n                if (preg_match('/^{([a-z0-9]+):*([a-z0-9_]*)}$/i', $item['url'], $matches)) {\n\n                    // \u0442\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u0445\u0443\u043a menu \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430\n                    $controller = $matches[1];\n                    $action     = $matches[2];\n\n                    $hook_result = cmsEventsManager::hook('menu_' . $controller, [\n                        'action'        => $action,\n                        'menu_item_id'  => $item['id'],\n                        'menu_item_url' => $item['url'],\n                        'menu_item'     => $item\n                    ], false);\n\n                    // \u0435\u0441\u043b\u0438 \u0445\u0443\u043a \u0432\u0435\u0440\u043d\u0443\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n                    if ($hook_result) {\n\n                        // \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0439 URL \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e\n                        $item['url'] = isset($hook_result['url']) ? $hook_result['url'] : '';\n\n                        if (isset($hook_result['counter'])) {\n                            $item['counter'] = $hook_result['counter'];\n                        }\n\n                        if (isset($hook_result['title'])) {\n                            $item['title'] = $hook_result['title'];\n                        }\n\n                        if (!empty($hook_result['items'])) {\n                            $item['childs_count'] = count($hook_result['items']);\n                        }\n\n                        $is_root_added = true;\n                    } else {\n                        continue;\n                    }\n                }\n\n                $is_external = mb_strpos($item['url'], '://') !== false;\n                $is_hash = mb_strpos($item['url'], '#') === 0;\n\n                if (!$is_root_added && !$is_external && !$is_hash) {\n                    $item['url'] = href_to($item['url']);\n                }\n            }\n\n            // \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n            $items[$item['id']] = $item;\n\n            // \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u043c\u0435\u043d\u044e\n            if (!empty($hook_result['items'])) {\n                foreach ($hook_result['items'] as $i) {\n                    $i['menu_id']    = $item['menu_id'];\n                    $i['options']    = isset($i['options']) ? $i['options'] : [];\n                    $i['options']    = array_merge($item['options'], $i['options']);\n                    $items[$i['id']] = $i;\n                }\n            }\n        }\n\n        if ($delta) {\n            foreach ($delta as $item_id => $d) {\n                if (isset($items[$item_id])) {\n                    $items[$item_id]['childs_count'] -= $d;\n                }\n            }\n        }\n\n        $tree = [];\n\n        cmsModel::buildTreeRecursive($items, $tree);\n\n        // \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0434\u0435\u0440\u0435\u0432\u043e\n        return $tree;\n    }\n\n    public function getMenuItemsTree($menu_id, $parse_hooks = true){\n\n        $result = $this->getMenuItems($menu_id);\n\n        if (!$result){ return false; }\n\n        return self::buildMenu($result, $parse_hooks);\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function getMenuItem($id){\n\n        return $this->getItemById('menu_items', $id, function($item, $model){\n            if ($item['options']){\n                $item['options'] = cmsModel::yamlToArray($item['options']);\n            } else {\n                $item['options'] = array();\n            }\n            $item['groups_view'] = cmsModel::yamlToArray($item['groups_view']);\n            $item['groups_hide'] = cmsModel::yamlToArray($item['groups_hide']);\n            return $item;\n        });\n\n    }\n\n//============================================================================//\n//============================================================================//\n\n    public function addMenuItem($item){\n\n        $this->filterEqual('parent_id', $item['parent_id']);\n\n        $item['ordering'] = $this->getNextOrdering('menu_items');\n\n        $id = $this->insert('menu_items', $item);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $id;\n\n    }\n\n    public function updateMenuItem($id, $item){\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return $this->update('menu_items', $id, $item);\n\n    }\n\n    public function deleteMenuItem($id){\n\n        $item = $this->getMenuItem($id);\n\n        $tree = $this->getMenuItemsTree($item['menu_id'], false);\n\n        $level      = false;\n        $node_start = false;\n        $to_delete  = array($id);\n        $to_reorder = array();\n\n        foreach($tree as $item){\n\n            if ($item['id']==$id){\n                $node_start = true;\n                $level = $item['level'];\n                continue;\n            }\n\n            if ($node_start){\n                if ($item['level'] > $level) {\n                    $to_delete[] = $item['id'];\n                    continue;\n                } else {\n                    $node_start = false;\n                }\n            }\n\n            $to_reorder[] = $item['id'];\n\n        }\n\n        foreach($to_delete as $item_id){\n            $this->delete('menu_items', $item_id);\n        }\n\n        $this->reorderByList('menu_items', $to_reorder);\n\n        cmsCache::getInstance()->clean('menu.items');\n\n        return true;\n\n    }\n\n}\n", "<?php\n\nclass cmsUploader {\n\n    private $allow_remote = false;\n    private $file_name = '';\n    private $user_id = 0;\n    private $site_cfg = null;\n\n    private $last_error = null;\n    private $upload_errors = [];\n\n    private $allowed_mime = false;\n    private $allowed_mime_ext = [];\n    private $mime_types = [];\n\n    public function __construct($user_id = null) {\n\n        $this->mime_types = (new cmsConfigs('mimetypes.php'))->getAll();\n\n        $this->upload_errors = [\n            UPLOAD_ERR_OK         => LANG_UPLOAD_ERR_OK,\n            UPLOAD_ERR_INI_SIZE   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, $this->getMaxUploadSize()),\n            UPLOAD_ERR_FORM_SIZE  => LANG_UPLOAD_ERR_FORM_SIZE,\n            UPLOAD_ERR_PARTIAL    => LANG_UPLOAD_ERR_PARTIAL,\n            UPLOAD_ERR_NO_FILE    => LANG_UPLOAD_ERR_NO_FILE,\n            UPLOAD_ERR_NO_TMP_DIR => LANG_UPLOAD_ERR_NO_TMP_DIR,\n            UPLOAD_ERR_CANT_WRITE => LANG_UPLOAD_ERR_CANT_WRITE,\n            UPLOAD_ERR_EXTENSION  => LANG_UPLOAD_ERR_EXTENSION\n        ];\n\n        $this->user_id  = $user_id ?? cmsUser::getInstance()->id;\n        $this->site_cfg = cmsConfig::getInstance();\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432\n     *\n     * @param array $types\n     * @return $this\n     */\n    public function setAllowedMime($types) {\n\n        $this->allowed_mime = $types;\n\n        foreach ($this->allowed_mime as $mime) {\n            if (isset($this->mime_types[$mime])) {\n                $this->allowed_mime_ext[] = $this->mime_types[$mime];\n            }\n        }\n\n        return $this;\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0451\u043d\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u043e \u0438\u0445 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044e\n     *\n     * @param array|string $allowed_ext\n     * @return $this\n     */\n    private function setAllowedMimeByExt($allowed_ext) {\n\n        // \u0415\u0441\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0440\u0430\u043d\u0435\u0435, \u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c\n        if ($this->allowed_mime) {\n            return $this;\n        }\n\n        $this->allowed_mime = [];\n\n        if (!is_array($allowed_ext)) {\n            $allowed_ext = explode(',', (string) $allowed_ext);\n        }\n\n        foreach ($allowed_ext as $aext) {\n\n            $aext = mb_strtolower(trim(trim((string) $aext, '., ')));\n\n            if (empty($aext)) {\n                continue;\n            }\n\n            $mime_key = array_search($aext, $this->mime_types, true);\n\n            if(!$mime_key){\n                continue;\n            }\n\n            $this->allowed_mime[] = $mime_key;\n\n            $this->allowed_mime_ext[] = $aext;\n        }\n\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     *\n     * @param string $name\n     * @return $this\n     */\n    public function setFileName($name) {\n\n        $this->file_name = mb_substr(trim($name), 0, 64);\n\n        return $this;\n    }\n\n    /**\n     * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 id \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n     *\n     * @param int $id\n     * @return $this\n     */\n    public function setUserId($id) {\n\n        $this->user_id = $id;\n\n        return $this;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043e\u0448\u0438\u0431\u043a\u0443\n     *\n     * @return ?string\n     */\n    public function getLastError() {\n        return $this->last_error;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432,\n     * \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u043c \u0432 php.ini\n     *\n     * @return string\n     */\n    public function getMaxUploadSize() {\n\n        // \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u043f\u043e \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u043c\u0435\u043d\u044c\u0448\u0435, \u0442.\u043a. \u0435\u0441\u043b\u0438 post_max_size \u043c\u0435\u043d\u044c\u0448\u0435 upload_max_filesize,\n        // \u0442\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c post_max_size\n        $max_size = min(files_convert_bytes(@ini_get('upload_max_filesize')), files_convert_bytes(@ini_get('post_max_size')));\n\n        return files_format_bytes($max_size);\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043b\u0438 \u0444\u0430\u0439\u043b \u043d\u0430\u043b\u0438\u0447\u0438\u0435\u043c \u0435\u0433\u043e \u0432 $_FILES\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_FILES\n     * @return boolean\n     */\n    public function isUploaded($name) {\n\n        if (!isset($_FILES[$name])) {\n            return false;\n        }\n\n        if (empty($_FILES[$name]['size'])) {\n\n            if (isset($_FILES[$name]['error'])) {\n                if (isset($this->upload_errors[$_FILES[$name]['error']]) && $this->upload_errors[$_FILES[$name]['error']] !== UPLOAD_ERR_OK) {\n                    $this->last_error = $this->upload_errors[$_FILES[$name]['error']];\n                }\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u043b\u0438 \u0444\u0430\u0439\u043b \u0447\u0435\u0440\u0435\u0437 XHR\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_GET\n     * @return boolean\n     */\n    public function isUploadedXHR($name) {\n        return !empty($_GET['qqfile']);\n    }\n\n    /**\n     * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u043d\u0430\u0434\u043e \u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @param string $name \u0418\u043c\u044f \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_POST\n     * @return boolean\n     */\n    public function isUploadedFromLink($name) {\n        return $this->allow_remote && !empty($_POST[$name]);\n    }\n\n    /**\n     * \u0420\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @return $this\n     */\n    public function enableRemoteUpload() {\n\n        $this->allow_remote = true;\n\n        return $this;\n    }\n\n    /**\n     * \u0417\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @return $this\n     */\n    public function disableRemoteUpload() {\n\n        $this->allow_remote = false;\n\n        return $this;\n    }\n\n    /**\n     * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0441 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c\n     * \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044f \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043e\u0434\u043d\u043e\u0438\u043c\u0451\u043d\u043d\u043e\u0433\u043e\n     *\n     * @param string $path \u041f\u0443\u0442\u044c \u043a \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430\n     * @param string $file_ext \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430\n     * @param ?string $file_name \u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     * @return string\n     */\n    private function getFileName($path, $file_ext, $file_name = null) {\n\n        if (!$file_name) {\n            if ($this->file_name) {\n                $file_name = str_replace('.' . $file_ext, '', files_sanitize_name($this->file_name . '.' . $file_ext));\n            } else {\n                $file_name = substr(md5(microtime(true)), 0, 8);\n            }\n        }\n\n        if (file_exists($path . $file_name . '.' . $file_ext)) {\n            return $this->getFileName($path, $file_ext, $file_name . '_' . md5(microtime(true)));\n        }\n\n        return $file_name . '.' . $file_ext;\n    }\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c\n     * @param string $allowed_ext \u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439 (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e)\n     * @param string $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function upload($filename, $allowed_ext = false, $allowed_size = 0, $destination = false) {\n\n        // \u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f\n        if ($allowed_ext) {\n            $this->setAllowedMimeByExt($allowed_ext);\n        }\n\n        if ($this->isUploadedFromLink($filename)) {\n            return $this->uploadFromLink($filename, $allowed_size, $destination);\n        }\n\n        if ($this->isUploadedXHR($filename)) {\n            return $this->uploadXHR($filename, $allowed_size, $destination);\n        }\n\n        if ($this->isUploaded($filename)) {\n            return $this->uploadForm($filename, $allowed_size, $destination);\n        }\n\n        $last_error = $this->getLastError();\n\n        return [\n            'success' => false,\n            'error'   => ($last_error ? $last_error : LANG_UPLOAD_ERR_NO_FILE)\n        ];\n    }\n\n//============================================================================//\n//============================================================================//\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0447\u0435\u0440\u0435\u0437 input \u0442\u0438\u043f\u0430 file\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_FILES\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadForm($filename, $allowed_size = 0, $destination = false) {\n\n        $source     = $_FILES[$filename]['tmp_name'];\n        $error_code = $_FILES[$filename]['error'];\n        $dest_size  = (int) $_FILES[$filename]['size'];\n        $dest_name  = files_sanitize_name($_FILES[$filename]['name']);\n\n        $file = cmsUploadfile::fromPath($source, $this->allowed_mime);\n\n        if (!$file->isAllowed()) {\n            return [\n                'error'   => LANG_UPLOAD_ERR_MIME . '. ' . sprintf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', $this->allowed_mime_ext)),\n                'success' => false,\n                'name'    => $dest_name\n            ];\n        }\n\n        if ($allowed_size) {\n            if ($dest_size > $allowed_size) {\n                return [\n                    'error'   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, files_format_bytes($allowed_size)),\n                    'success' => false,\n                    'name'    => $dest_name\n                ];\n            }\n        }\n\n        $dest_ext = $file->getExt();\n\n        if (!$destination) {\n            $destination = $this->getUploadDestinationDirectory();\n        } else {\n            $destination = $this->site_cfg->upload_path . $destination . '/';\n        }\n\n        if (!$this->file_name) {\n            $this->file_name = pathinfo($dest_name, PATHINFO_FILENAME);\n        }\n\n        $destination .= $this->getFileName($destination, $dest_ext);\n\n        return $this->moveUploadedFile($source, $destination, $error_code, $dest_name, $dest_size);\n    }\n\n    /**\n     * \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0444\u0430\u0439\u043b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435\n     *\n     * @param string $post_filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_POST\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadFromLink($post_filename, $allowed_size = 0, $destination = false) {\n\n        $link = $file_name = trim($_POST[$post_filename]);\n\n        $url_data = parse_url($link);\n\n        // \u0412\u0430\u043b\u0438\u0434\u043d\u044b\u0439 URL \u0441 PATH\n        if (\n            filter_var($link, FILTER_VALIDATE_URL, FILTER_FLAG_PATH_REQUIRED) !== $link ||\n            empty($url_data['host'])\n            ) {\n\n            return [\n                'success' => false,\n                'error'   => 'Not allowed',\n                'name'    => '',\n                'path'    => ''\n            ];\n        }\n\n        // \u0423\u0437\u043d\u0430\u0451\u043c ipv4 \u0430\u0434\u0440\u0435\u0441 \u0445\u043e\u0441\u0442\u0430, gethostbyname \u0443\u043c\u0435\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e ipv4\n        $host_ip = gethostbyname($url_data['host']);\n        // \u041d\u0435 \u0437\u0430\u0440\u0435\u0437\u043e\u043b\u044c\u0432\u0438\u043b\u0438\n        if ($host_ip === $url_data['host']) {\n            return [\n                'success' => false,\n                'error'   => 'Not allowed',\n                'name'    => '',\n                'path'    => ''\n            ];\n        }\n\n        // \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\n        if(filter_var(\n            $host_ip,\n            FILTER_VALIDATE_IP,\n            FILTER_FLAG_IPV4 | FILTER_FLAG_NO_PRIV_RANGE |  FILTER_FLAG_NO_RES_RANGE\n        ) !== $host_ip){\n            return [\n                'success' => false,\n                'error'   => 'Not allowed',\n                'name'    => '',\n                'path'    => ''\n            ];\n        }\n\n        // \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0440\u0435\u0434\u0438\u0440\u0435\u043a\u0442 \u0438 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n        $curl = curl_init();\n        curl_setopt($curl, CURLOPT_PROTOCOLS, CURLPROTO_HTTPS | CURLPROTO_HTTP);\n        curl_setopt($curl, CURLOPT_URL, $link);\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n        curl_setopt($curl, CURLOPT_HEADER, true);\n        curl_setopt($curl, CURLOPT_NOBODY, true);\n        curl_setopt($curl, CURLOPT_TIMEOUT, 5);\n        $headers = curl_exec($curl);\n        curl_close($curl);\n\n        $matches = [];\n        if (preg_match(\"/(?:Location:|URI:)([^\\n]+)*/is\", $headers, $matches)) {\n\n            $url = trim($matches[1]);\n\n            if (strpos($url, 'http') !== 0) {\n                $link = $url_data['scheme'] . '://' . $url_data['host'] . $url;\n            } else {\n                $link = $url;\n            }\n\n            $_POST[$post_filename] = $link;\n\n            return $this->uploadFromLink($post_filename, $allowed_size, $destination);\n        }\n\n        if (preg_match('#filename=\"([^\"]+)#uis', $headers, $matches)) {\n            $file_name = trim($matches[1]);\n        }\n\n        $dest_name = files_sanitize_name($file_name);\n\n        $file_bin = file_get_contents_from_url($link);\n\n        if (!$file_bin) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_NO_FILE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return $this->saveFileFromString($file_bin, $allowed_size, $destination, $dest_name);\n    }\n\n    /**\n     * \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 php://input \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e  \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438\n     *\n     * @param string $filename \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $_GET\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @return array\n     */\n    public function uploadXHR($filename, $allowed_size = 0, $destination = false) {\n\n        $dest_name = files_sanitize_name($_GET['qqfile']);\n\n        $file_bin = file_get_contents('php://input');\n\n        if (!$file_bin) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_NO_FILE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return $this->saveFileFromString($file_bin, $allowed_size, $destination, $dest_name);\n    }\n\n    /**\n     * \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n     *\n     * @param string $file_bin\n     * @param int $allowed_size \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 (\u0432 \u0431\u0430\u0439\u0442\u0430\u0445)\n     * @param string $destination \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u0443\u0442\u0438 upload)\n     * @param string $dest_name \u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n     * @return array\n     */\n    private function saveFileFromString($file_bin, $allowed_size, $destination, $dest_name) {\n\n        $file = cmsUploadfile::fromString($file_bin, $this->allowed_mime);\n\n        if (!$file->isAllowed()) {\n            return [\n                'error'   => LANG_UPLOAD_ERR_MIME . '. ' . sprintf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', $this->allowed_mime_ext)),\n                'success' => false,\n                'name'    => $dest_name\n            ];\n        }\n\n        $dest_ext = $file->getExt();\n\n        $file_size = strlen($file_bin);\n\n        if ($allowed_size) {\n            if ($file_size > $allowed_size) {\n                return [\n                    'error'   => sprintf(LANG_UPLOAD_ERR_INI_SIZE, files_format_bytes($allowed_size)),\n                    'success' => false,\n                    'name'    => $dest_name\n                ];\n            }\n        }\n\n        if (!$destination) {\n            $destination = $this->getUploadDestinationDirectory();\n        } else {\n            $destination = $this->site_cfg->upload_path . $destination . '/';\n        }\n\n        $destination .= $this->getFileName($destination, $dest_ext);\n\n        if (!is_writable(dirname($destination))) {\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        if(file_put_contents($destination, $file_bin) === false){\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $dest_name,\n                'path'    => ''\n            ];\n        }\n\n        return [\n            'success' => true,\n            'path'    => $destination,\n            'url'     => str_replace($this->site_cfg->upload_path, '', $destination),\n            'name'    => basename($destination),\n            'size'    => $file_size\n        ];\n    }\n\n    /**\n     * \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u0442 \u0444\u0430\u0439\u043b \u0438\u0437 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u0432 \u0446\u0435\u043b\u0435\u0432\u0443\u044e \u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438\n     *\n     * @param string $source\n     * @param string $destination\n     * @param int $errorCode\n     * @return array\n     */\n    private function moveUploadedFile($source, $destination, $errorCode, $orig_name = '', $orig_size = 0) {\n\n        if ($errorCode !== UPLOAD_ERR_OK && isset($this->upload_errors[$errorCode])) {\n\n            return [\n                'success' => false,\n                'error'   => $this->upload_errors[$errorCode],\n                'name'    => $orig_name,\n                'path'    => ''\n            ];\n        }\n\n        $upload_dir = dirname($destination);\n        if (!is_writable($upload_dir)) {\n            @chmod($upload_dir, 0777);\n        }\n\n        if (!is_writable($upload_dir)) {\n\n            return [\n                'success' => false,\n                'error'   => LANG_UPLOAD_ERR_CANT_WRITE,\n                'name'    => $orig_name,\n                'path'    => ''\n            ];\n        }\n\n        return [\n            'success' => @move_uploaded_file($source, $destination),\n            'path'    => $destination,\n            'url'     => str_replace($this->site_cfg->upload_path, '', $destination),\n            'name'    => basename($destination),\n            'size'    => $orig_size,\n            'error'   => $this->upload_errors[$errorCode]\n        ];\n    }\n\n    /**\n     * \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0444\u0430\u0439\u043b\n     * @param string $file_path\n     * @return boolean\n     */\n    public function remove($file_path) {\n        return files_delete_file($file_path, 2);\n    }\n\n    /**\n     * \u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0434\u0435\u0440\u0435\u0432\u043e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430\n     * @return string\n     */\n    public function getUploadDestinationDirectory() {\n        return files_get_upload_dir($this->user_id);\n    }\n\n}\n", "<?php\n\nclass cmsUploadfile {\n\n    private $file_mime;\n    private $mime_types;\n    private $allowed_mime;\n\n    public static function fromPath($file_path, $allowed_mime = null) {\n\n        $self = new self($allowed_mime);\n\n        $self->loadMimeFromPath($file_path);\n\n        return $self;\n    }\n\n    public static function fromString($file_str, $allowed_mime = null) {\n\n        $self = new self($allowed_mime);\n\n        $self->loadMimeFromString($file_str);\n\n        return $self;\n    }\n\n    public function __construct($allowed_mime = null) {\n\n        $this->allowed_mime = $allowed_mime;\n\n        $this->mime_types = (new cmsConfigs('mimetypes.php'))->getAll();\n    }\n\n    public function loadMimeFromPath($file_path) {\n\n        $finfo = finfo_open(FILEINFO_MIME_TYPE);\n\n        $this->file_mime = finfo_file($finfo, $file_path);\n\n        finfo_close($finfo);\n    }\n\n    public function loadMimeFromString($file_str) {\n\n        $finfo = finfo_open(FILEINFO_MIME_TYPE);\n\n        $this->file_mime = finfo_buffer($finfo, $file_str);\n\n        finfo_close($finfo);\n    }\n\n    public function getMime() {\n        return $this->file_mime;\n    }\n\n    public function getExt() {\n\n        if ($this->file_mime && isset($this->mime_types[$this->file_mime])) {\n\n            return $this->mime_types[$this->file_mime];\n        }\n\n        return 'bin';\n    }\n\n    public function isAllowed() {\n\n        // \u041f\u0443\u0441\u043a\u0430\u0435\u043c \u043b\u044e\u0431\u044b\u0435, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e\n        if ($this->allowed_mime === null) {\n            return true;\n        }\n\n        if ($this->file_mime === false) {\n            return false;\n        }\n\n        return in_array($this->file_mime, $this->allowed_mime, true);\n    }\n\n}\n", "<?php\n\nclass fieldHtml extends cmsFormField {\n\n    public $title       = LANG_PARSER_HTML;\n    public $sql         = 'mediumtext';\n    public $filter_type = 'str';\n    public $allow_index = false;\n    public $var_type    = 'string';\n\n    public function getOptions(){\n        return [\n            new fieldList('editor', [\n                'title'     => LANG_PARSER_HTML_EDITOR,\n                'default'   => cmsConfig::get('default_editor'),\n                'generator' => function ($item) {\n                    $items   = [];\n                    $editors = cmsCore::getWysiwygs();\n                    foreach ($editors as $editor) {\n                        $items[$editor] = ucfirst($editor);\n                    }\n                    $ps = cmsCore::getModel('wysiwygs')->getPresetsList();\n                    if ($ps) {\n                        foreach ($ps as $key => $value) {\n                            $items[$key] = $value;\n                        }\n                    }\n                    return $items;\n                }\n            ]),\n            new fieldList('editor_presets', [\n                'title'         => LANG_PARSER_HTML_EDITOR_GR,\n                'is_multiple'   => true,\n                'dynamic_list'  => true,\n                'select_title'  => LANG_SELECT,\n                'multiple_keys' => [\n                    'group_id'  => 'field', 'preset_id' => 'field_select'\n                ],\n                'generator'     => function ($item) {\n                    $users_model = cmsCore::getModel('users');\n\n                    $items = [];\n\n                    $groups = $users_model->getGroups(false);\n\n                    foreach ($groups as $group) {\n                        $items[$group['id']] = $group['title'];\n                    }\n\n                    return $items;\n                },\n                'values_generator' => function () {\n                    $items   = [];\n                    $editors = cmsCore::getWysiwygs();\n                    foreach ($editors as $editor) {\n                        $items[$editor] = ucfirst($editor);\n                    }\n                    $ps = cmsCore::getModel('wysiwygs')->getPresetsList();\n                    if ($ps) {\n                        foreach ($ps as $key => $value) {\n                            $items[$key] = $value;\n                        }\n                    }\n                    return $items;\n                }\n            ]),\n            new fieldCheckbox('is_html_filter', [\n                'title'           => LANG_PARSER_HTML_FILTERING,\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('parse_patterns', [\n                'title' => LANG_PARSER_PARSE_PATTERNS,\n                'hint'  => LANG_PARSER_PARSE_PATTERNS_HINT\n            ]),\n            new fieldCheckbox('build_redirect_link', [\n                'title'      => LANG_PARSER_BUILD_REDIRECT_LINK,\n                'is_visible' => cmsController::enabled('redirect')\n            ]),\n            new fieldNumber('teaser_len', [\n                'title'           => LANG_PARSER_HTML_TEASER_LEN,\n                'hint'            => LANG_PARSER_HTML_TEASER_LEN_HINT,\n                'extended_option' => true\n            ]),\n            new fieldString('teaser_postfix', [\n                'title'           => LANG_PARSER_HTML_TEASER_POSTFIX,\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'default'         => '',\n                'extended_option' => true\n            ]),\n            new fieldList('teaser_type', [\n                'title'           => LANG_PARSER_HTML_TEASER_TYPE,\n                'items'           => [\n                    ''  => LANG_PARSER_HTML_TEASER_TYPE_NULL,\n                    's' => LANG_PARSER_HTML_TEASER_TYPE_S,\n                    'w' => LANG_PARSER_HTML_TEASER_TYPE_W\n                ],\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('show_show_more', [\n                'title'           => LANG_PARSER_SHOW_SHOW_MORE,\n                'default'         => false,\n                'visible_depend'  => ['options:teaser_len' => ['hide' => ['']]],\n                'extended_option' => true\n            ]),\n            new fieldCheckbox('in_fulltext_search', [\n                'title'   => LANG_PARSER_IN_FULLTEXT_SEARCH,\n                'hint'    => LANG_PARSER_IN_FULLTEXT_SEARCH_HINT,\n                'default' => false\n            ])\n        ];\n    }\n\n    public function getFilterInput($value) {\n        return ($this->show_filter_input_title ? '<label for=\"'.$this->id.'\">'.$this->title.'</label>' : '') . html_input('text', $this->name, $value);\n    }\n\n    public function getStringValue($value){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('parse_patterns') && !empty($this->item)){\n            $value = string_replace_keys_values_extended($value, $this->item);\n        }\n\n        return trim(strip_tags($value));\n    }\n\n    public function afterParse($value, $item){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('parse_patterns')){\n            $value = string_replace_keys_values_extended($value, $item);\n        }\n\n        return $value;\n    }\n\n    public function parse($value){\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if ($this->getOption('is_html_filter')){\n            $value = cmsEventsManager::hook('html_filter', [\n                'text'                => $value,\n                'is_auto_br'          => $this->getOption('editor') === 'markitup',\n                'build_smiles'        => $this->getOption('editor') === 'markitup', // \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u043a\n                'build_redirect_link' => (bool)$this->getOption('build_redirect_link')\n            ]);\n            $value = string_replace_svg_icons($value);\n        }\n\n        return $value;\n    }\n\n    public function parseTeaser($value) {\n\n        if (is_empty_value($value)) {\n            return '';\n        }\n\n        if (!empty($this->item['is_private_item'])) {\n            return '<p class=\"private_field_hint text-muted\">'.$this->item['private_item_hint'].'</p>';\n        }\n\n        $max_len = $this->getOption('teaser_len', 0);\n\n        if ($max_len){\n\n            $teaser_postfix = $this->getOption('teaser_postfix', '');\n            $teaser_type = $this->getOption('teaser_type', 's');\n\n            $value = string_short($value, $max_len, $teaser_postfix, $teaser_type);\n\n            if($this->getOption('show_show_more') && !empty($this->item['ctype']['name']) && !empty($this->item['slug'])){\n                $value .= '<span class=\"d-block mt-2\"><a class=\"read-more btn btn-outline-info btn-sm\" href=\"'.href_to($this->item['ctype']['name'], $this->item['slug'].'.html').'\">'.LANG_MORE.'</a></span>';\n            }\n\n        } else if ($this->getOption('is_html_filter')){\n            $value = cmsEventsManager::hook('html_filter', [\n                'text'                => $value,\n                'is_auto_br'          => false,\n                'build_smiles'        => $this->getOption('editor') === 'markitup', // \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u043a\n                'build_redirect_link' => (bool)$this->getOption('build_redirect_link')\n            ]);\n        }\n\n        if ($this->getOption('parse_patterns') && !empty($this->item)){\n            $value = string_replace_keys_values_extended($value, $this->item);\n        }\n\n        return $value;\n    }\n\n    public function applyFilter($model, $value) {\n        return $model->filterLike($this->name, \"%{$value}%\");\n    }\n\n    public function store($value, $is_submitted, $old_value = null) {\n\n        if($this->getProperty('store_via_html_filter')){\n\n            $value = cmsEventsManager::hook('html_filter', [\n                'text'                => $value,\n                'is_auto_br'          => false,\n                'build_smiles'        => $this->getOption('editor') === 'markitup',\n                'build_redirect_link' => (bool)$this->getOption('build_redirect_link')\n            ]);\n        }\n\n        return $value;\n    }\n\n    public function afterStore($item, $model, $action) {\n\n        if ($action === 'add' && !empty($item[$this->name])) {\n\n            $paths = string_html_get_images_path($item[$this->name]);\n\n            if ($paths) {\n                foreach ($paths as $path) {\n\n                    $model->filterEqual('path', $path)->filterIsNull('target_id');\n                    $model->updateFiltered('uploaded_files', ['target_id' => $item['id']], true);\n                }\n            }\n        }\n\n        return;\n    }\n\n    public function delete($value) {\n\n        if (is_empty_value($value)) {\n            return true;\n        }\n\n        $paths = string_html_get_images_path($value);\n\n        if ($paths) {\n\n            $files_model = cmsCore::getModel('files');\n\n            foreach ($paths as $path) {\n\n                $file = $files_model->getFileByPath($path);\n                if (!$file) {\n                    continue;\n                }\n\n                $files_model->deleteFile($file);\n            }\n        }\n\n        return true;\n    }\n\n    public function getInput($value) {\n\n        $this->data = cmsCore::getController('wysiwygs')->getEditorParams([\n            'editor'  => $this->getOption('editor'),\n            'options' => $this->getOption('editor_options', []),\n            'presets' => $this->getOption('editor_presets', [])\n        ]);\n\n        if (empty($this->data['options']['id'])) {\n            $this->data['options']['id'] = $this->id;\n        }\n\n        $this->id = $this->data['options']['id'];\n\n        return parent::getInput($value);\n    }\n\n}\n", "<?php\n\n    define('LANG_ADMIN_CONTROLLER',     'Control Panel');\n    define('LANG_CP_NEVER',                      'Never');\n    define('LANG_CP_INSTALL_FOLDER_EXISTS',     'Attention! The installation directory <b>/install</b> has not been deleted.');\n    define('LANG_CP_TOOLTIP_HELP',              'Useful documentation for the section');\n    define('LANG_CP_TOOLTIP_HELP_HINT',         'Disable animations can be in the template settings');\n    define('LANG_CP_DASHBOARD_STATS',           'Site Stats');\n    define('LANG_CP_DASHBOARD_SYSINFO',         'System Info');\n    define('LANG_CP_DASHBOARD_RESOURCES',       'Useful Resources');\n    define('LANG_CP_DASHBOARD_NEWS',            'InstantCMS news');\n    define('LANG_CP_DASHBOARD_NEWS_O',          'Official');\n    define('LANG_CP_DASHBOARD_NEWS_A',          'Blogs');\n    define('LANG_CP_PAGE_OPTIONS',              'Customize this page');\n    define('LANG_CP_SU',                        'System utilization');\n    define('LANG_CP_SU_DISK',                   'Disk space');\n    define('LANG_CP_SU_CPU',                    'Load average');\n    define('LANG_CP_CACHE',                     'Caching');\n    define('LANG_CP_WO_AUTO_GROUP',             'Automatically detect group\\'s page');\n    define('LANG_CP_WO_AUTO_GROUP_HINT',        'On group page widget displays the group\\'s items');\n    define('LANG_CP_DASHBOARD_SI_ICMS',         'InstantCMS version');\n    define('LANG_CP_DASHBOARD_SI_PHP',          'PHP version');\n    define('LANG_CP_DASHBOARD_SI_WS',           'Web server');\n    define('LANG_CP_DASHBOARD_SQL_SERVER',      'MYSQL server');\n    define('LANG_CP_DASHBOARD_APACHE_NGINX',    'a two-tier configuration, Nginx version is %s');\n    define('LANG_CP_DASHBOARD_SI_ML',           'Memory limit');\n    define('LANG_CP_DASHBOARD_SI_IP',           'Server IP');\n    define('LANG_CP_DASHBOARD_SI_ROOT',         'Root folder');\n    define('LANG_CP_DASHBOARD_SI_SESSION_TYPE', 'Session save handler');\n    define('LANG_CP_DASHBOARD_SI_SESSION',      'Session folder');\n    define('LANG_CP_DASHBOARD_SI_MAX',          'Max. file upload size');\n    define('LANG_CP_DASHBOARD_SI_ION',          'IonCube Loader installed');\n    define('LANG_CP_DASHBOARD_SI_ZEND',         'Zend OPcache installed');\n    define('LANG_CP_DASHBOARD_SI_ZENDG',        'Zend Guard Loader installed');\n    define('LANG_CP_DASHBOARD_LEAD_SPONSOR',    'General sponsor');\n    define('LANG_CP_DASHBOARD_LINKS_SITE',      'Official Site');\n    define('LANG_CP_DASHBOARD_LINKS_DOCS',      'Documentation');\n    define('LANG_CP_DASHBOARD_LINKS_ADDONS',    'Extensions');\n    define('LANG_CP_DASHBOARD_LINKS_FORUMS',    'Community Forum');\n    define('LANG_CP_DASHBOARD_LINKS_DONATE',    'Donate');\n    define('LANG_CP_DASHBOARD_LINKS_SPONSORS',  'Become a Sponsor');\n    define('LANG_CP_DASHBOARD_PREMIUM',         'Premium components');\n    define('LANG_CP_DASHBOARD_BILLING',         'Billing');\n    define('LANG_CP_DASHBOARD_BILLING_HINT',    'Monetize your site');\n    define('LANG_CP_DASHBOARD_INVIDEO_HINT',    'Professional video catalog');\n    define('LANG_CP_DASHBOARD_INMAPS_HINT',     'Object catalog on the map');\n    define('LANG_CP_SECTION_INDEX',             'Index');\n    define('LANG_CP_SECTION_CTYPES',            'Content Types');\n    define('LANG_CP_SECTION_CONTENT',           'Content');\n    define('LANG_CP_SECTION_USERS',             'Users');\n    define('LANG_CP_SECTION_GROUPS',            'Groups');\n    define('LANG_CP_SECTION_MENU',              'Menu');\n    define('LANG_CP_SECTION_WIDGETS',           'Widgets and pages');\n    define('LANG_CP_SECTION_CONTROLLERS',       'Components');\n    define('LANG_CP_SECTION_SETTINGS',          'Settings');\n    define('LANG_CP_SECTION_UPDATE',            'Updates');\n    define('LANG_CP_SELECTED_EDIT',             'Edit');\n    define('LANG_CP_SELECTED_DELETE',           'Delete');\n    define('LANG_CP_CTYPES_ADD',                'Add Content Type');\n    define('LANG_CP_CTYPES_EDIT',               'Edit Content Type');\n    define('LANG_CP_CTYPE_CREATED',             'Content type &laquo;%s&raquo; created');\n    define('LANG_CP_CTYPE_DELETE_CONFIRM',      'Delete content type \"{title}\"?');\n    define('LANG_CP_CTYPE_ERROR_NAME',          'It should not be called the name of an existing component');\n    define('LANG_CP_CTYPE_TO_LIST',             'To the content types list');\n    define('LANG_CP_CTYPE_NOT_SET',             'No content type set');\n    define('LANG_CP_CTYPE_SETTINGS',            'Settings');\n    define('LANG_CP_CTYPE_LABELS',              'Labels');\n    define('LANG_CP_CTYPE_FIELDS',              'Fields');\n    define('LANG_CP_CTYPE_PROPS',               'Properties');\n    define('LANG_CP_CTYPE_PERMISSIONS',         'Permissions');\n    define('LANG_CP_CTYPE_DATASETS',            'Datasets');\n    define('LANG_CP_CTYPE_FILTERS',             'Filters');\n    define('LANG_CP_CTYPE_DATASET',             'Dataset');\n    define('LANG_CP_GRID_COLYMNS_SYSTEM',       'System');\n    define('LANG_CP_GRID_COLYMNS_USER',         'User');\n    define('LANG_CP_GRID_COLYMNS_FILTER',       'Filter');\n    define('LANG_CP_GRID_COLYMNS_DISPLAY',      'Display');\n    define('LANG_CP_GRID_COLYMNS_EXACT',        'Exact match');\n    define('LANG_CP_GRID_COLYMNS_LIKE',         'Like in string');\n    define('LANG_CP_GRID_COLYMNS_DATE',         'Date');\n    define('LANG_CP_GRID_COLYMNS_SELECT',       'Select');\n    define('LANG_CP_GRID_COLYMNS_FLAG',         'Switch');\n    define('LANG_CP_GRID_COLYMNS_CUT_TEXT',     'First 100 symbols');\n    define('LANG_CP_GRID_COLYMNS_IMAGES_NMB',   'Number of images');\n    define('LANG_CP_GRID_COLYMNS_PREVIEW',      'Preview');\n    define('LANG_CP_GRID_COLYMNS_TO_FILTER',    'Put in filter');\n    define('LANG_CP_SYSTEM_NAME_HINT',          'Used in URLs and database table names<br>Cannot be changed later!');\n    define('LANG_CP_CONTENT_ITEM_ADD',          'Add Entry');\n    define('LANG_CP_CONTENT_ITEM_ADD_CP',       'Add from adminpanel');\n    define('LANG_CP_CONTENT_ITEMS_EDIT',        'Change entries');\n    define('LANG_CP_CONTENT_FIELDS_IS_ADD',     'Add Values to Existing');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S1',     'Select the fields you want to change');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S2',     'These values will replace the fields of the selected items');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_ADD_HINT', '<span class=\"text-danger\">The value will be added to an existing</span>');\n    define('LANG_CP_CONTENT_CATS_ADD',          'Add Category');\n    define('LANG_CP_CONTENT_CATS_EDIT',         'Edit Category');\n    define('LANG_CP_CONTENT_CATS_ORDER',        'Reorder');\n    define('LANG_CP_CONTENT_CATS_ORDER_DRAG',   'Drag categories to reorder and click \"Save\"');\n    define('LANG_CP_CONTENT_CATS_NONE',         'This content has no categories');\n    define('LANG_CP_TRASH',                     'Trash');\n    define('LANG_CP_SHOW_ONLY_IN_TRASH',        'Show only deleted items');\n    define('LANG_CP_CONTENT_ITEM_RESTORE_CONFIRM',  'Restore \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_BASKET_DELETE_CONFIRM',  'Move the \"{title}\" page to trash?');\n    define('LANG_CP_CONTENT_ITEM_DELETE_CONFIRM',  'Delete \"{title}\"?');\n    define('LANG_CP_CONTENT_CATS_TITLES',       'Category title or categories tree');\n    define('LANG_CP_CONTENT_CATS_TITLES_HINT',  'Enter one item per line to create multiple categories<br>Add a hyphen before the title to make a nested category<br><a href=\"https://docs.instantcms.ru/en/manual/content/cats\" target=\"_blank\">Detailed Manual</a>');\n    define('LANG_CP_CONTENT_CATS_BIND',         'Bind parent category properties');\n    define('LANG_CP_BASIC',                     'Basic settings');\n    define('LANG_CP_IS_COLLAPSED',              'Collapsible blocks in the add/edit item form');\n    define('LANG_CP_PUBLICATION',               'Publication');\n    define('LANG_CP_IS_PUB_CONTROL',            'Custom publication date');\n    define('LANG_CP_DISABLE_DRAFTS',            'Disable drafts');\n    define('LANG_CP_IS_PUB_CONTROL_HINT',\t\t'Users with the corresponding permission configured on the \"Permissions\" tab can specify the custom date and publication period for each entry');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS',    'Expired entry action');\n    define('LANG_CP_NOTIFY_END_DATE_DAYS',      'How many days before the end of the publication notify users');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE','Hide');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_DEL','Delete');\n    define('LANG_CP_CATEGORIES_ON',             'Enable categories');\n    define('LANG_CP_CATEGORIES_RECURSIVE',      'Show entries from child categories in parent category');\n    define('LANG_CP_CATEGORIES_EMPTY_ROOT',\t\t'Do not show entries in the root category');\n    define('LANG_CP_CATEGORIES_MULTI',\t\t\t'Allow multiple categories for a single entry');\n    define('LANG_CP_CATEGORIES_CHANGE',         'Allow to change the category of an already existing entry');\n    define('LANG_CP_CATEGORIES_OPEN_ROOT',      'Allow to add entries to the root category');\n    define('LANG_CP_CATEGORIES_ONLY_LAST',      'Allow to add entries only to the last level of nested categories');\n    define('LANG_CP_CATEGORIES_SHOW',           'Show categories list above entries list');\n    define('LANG_CP_CTYPE_CATEGORIES_OFF',      'Categories for this content type were disabled in the <a href=\"%s\">Settings</a>. Categories will not be shown on the site');\n    define('LANG_CP_FOLDERS',                   'Private folders');\n    define('LANG_CP_FOLDERS_ON',                'Private folders enabled');\n    define('LANG_CP_FOLDERS_HINT',              'Users will be able to organize the content in the private folders shown in their profiles');\n    define('LANG_CP_CT_GROUPS',                 'Groups');\n    define('LANG_CP_CT_GROUPS_ALLOW',           'Create in groups');\n    define('LANG_CP_CT_GROUPS_ALLOW_ONLY',      'Create in groups only');\n    define('LANG_CP_COMMENTS',                  'Comments');\n    define('LANG_CP_COMMENTS_REPLACE_LABEL',    'Replacing the phrase for ');\n    define('LANG_CP_COMMENTS_TITLE_PATTERN',    'Comment Block Header Pattern');\n    define('LANG_CP_COMMENTS_TEMPLATE',         'Comments template');\n    define('LANG_CP_COMMENTS_ON',               'Enable comments');\n    define('LANG_CP_RATING',                    'Rating');\n    define('LANG_CP_RATING_ON',                 'Enable rating');\n    define('LANG_CP_TAGS_ON',                   'Enable tags');\n    define('LANG_CP_TAGS_IN_LIST',              'Show tags in list view');\n    define('LANG_CP_TAGS_IN_ITEM',              'Show tags in entry view');\n    define('LANG_CP_PHOTOS',                    'Images');\n    define('LANG_CP_PHOTOS_ON',                 'Main image');\n    define('LANG_CP_PHOTOS_MULTI',              'Additional images');\n    define('LANG_CP_SEOMETA_DEFAULT',           'SEO: Default');\n    define('LANG_CP_SEOMETA',                   'SEO: Entries');\n    define('LANG_CP_SEOMETA_MANUAL_TITLE',      'Custom entry title');\n    define('LANG_CP_SEOMETA_AUTO_KEYS',         'Autogenerate keywords');\n    define('LANG_CP_SEOMETA_AUTO_DESC',         'Autogenerate META-descriptions');\n    define('LANG_CP_SEOMETA_ITEM_TITLE',        'META-title pattern');\n    define('LANG_CP_SEOMETA_ITEM_KEYS',         'META-keys pattern');\n    define('LANG_CP_SEOMETA_ITEM_DESC',         'META-descriptions pattern');\n    define('LANG_CP_SEOMETA_ITEM_H1',           'h1 tag pattern');\n    // deprecated\n    define('LANG_CP_SEOMETA_FIELDS',            ' <span class=\"pattern_fields_panel_hint\">Click on the field to see the available fields.</span><span class=\"pattern_fields_panel\">Available expressions: <b class=\"pattern_fields\">%s</b> More details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>.<span>');\n    define('LANG_CP_SEOMETA_ITEM_DS',           'Overrides the pattern specified for content type categories.'.LANG_CP_SEOMETA_FIELDS);\n    define('LANG_CP_SEOMETA_ITEM_HINT',         'Use the field, inserting their names in braces. For example: <strong>{title}</strong>. You can use the processing of values, more details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>');\n    //\n    define('LANG_CP_SEOMETA_DS_HINT',           'Overrides the pattern specified for content type categories.');\n    define('LANG_CP_SEOMETA_HINT_PANEL',        'Click on the field to see the available fields.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN_DOC',  'More details in <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/settings/seo-patterns\">the documentation</a>.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN',      'Available expressions: <b class=\"pattern_fields\">%s</b> ');\n    define('LANG_CP_AUTO_URL',                  'Autogenerate URL');\n    define('LANG_CP_FIXED_URL',                 'Keep URL after editing');\n    define('LANG_CP_URL_PATTERN',               'URL pattern');\n    define('LANG_CP_SEOMETA_CATS',              'SEO: Categories');\n    define('LANG_CP_CAT_COVER_SIZES',           'Category Cover Presets');\n    define('LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES', 'List Cover Preset');\n    define('LANG_CP_SEOMETA_CATS_H1',           'Allow custom H1 tag for category pages');\n    define('LANG_CP_SEOMETA_CATS_TITLE',        'Allow custom titles for category pages');\n    define('LANG_CP_SEOMETA_CATS_KEYS',         'Allow custom keywords for categories');\n    define('LANG_CP_SEOMETA_CATS_DESC',         'Allow custom META descriptions for categories');\n    define('LANG_CP_CATS_AUTO_URL',             'Generate URL from category title');\n    define('LANG_CP_CATS_FIRST_LEVEL_SLUG',     'Category URLs are always first level regardless of nesting');\n    define('LANG_CP_LISTVIEW_OPTIONS',          'List view options');\n    define('LANG_CP_PROFILELIST_ON',            'List view in user profiles enabled');\n    define('LANG_CP_LISTVIEW_ON',               'List view enabled');\n    define('LANG_CP_LISTVIEW_OFF_INDEX',        'Disable the list view of the main page of the content type');\n    define('LANG_CP_LISTVIEW_OFF_INDEX_HINT',   'The list will only be available in categories');\n    define('LANG_CP_LIST_OFF_BREADCRUMB',       'Do not show breadcrumbs');\n    define('LANG_CP_LIST_OFF_BREADCRUMB_CTYPE', 'Do not show ctype name in breadcrumbs');\n    define('LANG_CP_LISTVIEW_FILTER',           'Show filter');\n    define('LANG_CP_LISTVIEW_FILTER_EXPAND',    'Expand filter panel');\n    define('LANG_CP_LISTVIEW_STYLE',            'Default list style');\n    define('LANG_CP_LIST_STYLE_NAMES',          'Names for list styles');\n    define('LANG_CP_LIST_STYLE_OPTIONS',        'List styles options');\n    define('LANG_CP_LIST_STYLE_OPTIONS_HINT',   'If the list template supports. In JSON format. An example of the default options in the template source file.');\n    define('LANG_CP_CONTEXT_LIST_STYLE',        'Styles for other lists');\n    define('LANG_CP_CONTEXT_SELECT_LIST',       'Select a list');\n    define('LANG_CP_LISTVIEW_STYLE_SLIDER',     'Slider');\n    define('LANG_CP_LISTVIEW_STYLE_BASIC',      'Basic list');\n    define('LANG_CP_LISTVIEW_STYLE_MASONRY',    'Masonry');\n    define('LANG_CP_LISTVIEW_STYLE_FEATURED',   'Featured list');\n    define('LANG_CP_LISTVIEW_STYLE_TILES',      'Tiles');\n    define('LANG_CP_LISTVIEW_STYLE_TABLE',      'Table');\n    define('LANG_CP_LISTVIEW_STYLE_HINT',       'Templates from the <b>/'.cmsTemplate::TEMPLATE_BASE_PATH.'%s/content</b> folder. You can specify multiple templates. A switch appears in the list.');\n    define('LANG_CP_ITEMVIEW_OPTIONS',          'Entry view options');\n    define('LANG_CP_ITEMVIEW_ON',               'Entry view enabled');\n    define('LANG_CP_ITEMVIEW_FIELDS_GROUP',     'Group the fields');\n\tdefine('LANG_CP_ITEMVIEW_HITS_ON',\t\t\t'Count views (hits)');\n    define('LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW', 'Show view counter');\n    define('LANG_CP_ITEMVIEW_OFF_INFO_BLOCK',\t'Do not show info block');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML',      'Append HTML');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML_HINT', 'Appended HTML code will be shown under each entry');\n    define('LANG_CP_ITEMVIEW_SHARE_CODE',       'Social buttons HTML code');\n    define('LANG_CP_PRIVACY_TYPE',              'How to show private entries in list');\n    define('LANG_CP_PRIVACY_TYPE_HIDE',         'Hide');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_TITLE',   'Show only title');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_ALL',     'Show full');\n    define('LANG_CP_NUMERALS_LABELS',           'Plurals');\n    define('LANG_CP_NUMERALS_1_LABEL',          'One (...)');\n    define('LANG_CP_NUMERALS_2_LABEL',          'Two (...)');\n    define('LANG_CP_NUMERALS_10_LABEL',         'Many (...)');\n    define('LANG_CP_NUMERALS_1_ALABEL',         'One (Accusative)');\n    define('LANG_CP_NUMERALS_2_ALABEL',         'Two (Accusative)');\n    define('LANG_CP_NUMERALS_10_ALABEL',        'Many (Accusative)');\n    define('LANG_CP_NUMERALS_1_GLABEL',         'One (Genitive)');\n    define('LANG_CP_NUMERALS_2_GLABEL',         'Two (Genitive)');\n    define('LANG_CP_NUMERALS_10_GLABEL',        'Many (Genitive)');\n    define('LANG_CP_ACTIONS_LABELS',            'Actions');\n    define('LANG_CP_ACTION_ADD_LABEL',          'Add (...)');\n    define('LANG_CP_LIST_LABELS',               'Headings');\n    define('LANG_CP_LIST_LABEL',                'List heading');\n    define('LANG_CP_PROFILE_LABEL',             'List heading in profile');\n    define('LANG_CP_LIST_LABELS_HINT',          'If not specified, the content type title will be used');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE',    'Relation tab title');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE_HINT', 'If this content type is a parent');\n    define('LANG_CP_TAB',                       'Tab');\n    define('LANG_CP_TAB_TITLE',                 'Tab title');\n    define('LANG_CP_TAB_IS_ACTIVE',             'Tab is enabled');\n    define('LANG_CP_TAB_SHOW_ONLY_OWNER',       'Show tab to the profile owner only');\n    define('LANG_CP_FIELD',                     'Field');\n    define('LANG_CP_FIELD_FORMAT',              'Field validation');\n    define('LANG_CP_FIELD_REGEX',               'Regular expression');\n    define('LANG_CP_FIELD_REGEX_TEXT',          'Enter a regular expression');\n    define('LANG_CP_FIELD_REGEX_TEXT_HINT',     'The specified regular expression must match the value of the field.');\n    define('LANG_CP_FIELD_TYPE',                'Field type');\n    define('LANG_CP_FIELD_TYPE_HINT',           'Attention! Existing data in this field can be deleted!');\n    define('LANG_CP_FIELD_TYPE_OPTS',           'Field options');\n    define('LANG_CP_FIELD_VALUES',              'Default value (or a list of entries)');\n    define('LANG_CP_FIELD_PROFILE_VALUE',       'Get value from the user profile field');\n    define('LANG_CP_FIELD_PROFILE_VALUE_HINT',  'The field can get a default value from the current user profile<br/>Only text boxes and lists');\n    define('LANG_CP_FIELD_TITLE',               'Field title');\n    define('LANG_CP_FIELD_FIELDSET',            'Field group');\n    define('LANG_CP_FIELD_FIELDSET_SELECT',     'Select group');\n    define('LANG_CP_FIELD_FIELDSET_ADD',        'Create new group');\n    define('LANG_CP_FIELD_FIELDSET_ADD_HINT',   'For the current site language');\n    define('LANG_CP_FIELD_HINT',                'Field hint');\n    define('LANG_CP_FIELD_ADD',                 'Add Field');\n    define('LANG_CP_FIELD_CREATED',             'Field &laquo;%s&raquo; has been created');\n    define('LANG_CP_FIELD_DELETE_CONFIRM',      'Delete field \"{title}\"?');\n    define('LANG_CP_FIELD_VISIBILITY',          'Field visibility');\n    define('LANG_CP_FIELD_LABELS',              'Label position');\n    define('LANG_CP_FIELD_LABELS_IN_LIST',      'In list view');\n    define('LANG_CP_FIELD_LABELS_IN_ITEM',      'In entry view');\n    define('LANG_CP_FIELD_LABELS_IN_FORM',      'In form');\n    define('LANG_CP_FIELD_LABEL_NONE',          'Hide');\n    define('LANG_CP_FIELD_LABEL_LEFT',          'Left');\n    define('LANG_CP_FIELD_LABEL_TOP',           'Top');\n    define('LANG_CP_FIELD_IN_LIST',             'Show in list view');\n    define('LANG_CP_FIELD_IN_LIST_CONTEXT',     'For which lists should this be shown');\n    define('LANG_CP_FIELD_NOT_IN_LIST_CONTEXT', 'For which lists do not show');\n    define('LANG_CP_FIELD_IN_ITEM',             'Show in entry view');\n    define('LANG_CP_FIELD_IN_ITEM_POS',         'Field position');\n    define('LANG_CP_FIELD_IN_ITEM_POS_HINT',    'If you select a special widget, set the entry page in the right place widget \"Content Fields\" and configure it.');\n    define('LANG_CP_FIELD_IN_ITEM_POS0',       'In the body of the entry');\n    define('LANG_CP_FIELD_IN_ITEM_POS1',       'On a position in a special widget');\n    define('LANG_CP_FIELD_IN_PROFILE',          'Show in profile');\n    define('LANG_CP_FIELD_IN_LIST_SHORT',       'In list');\n    define('LANG_CP_FIELD_IN_ITEM_SHORT',       'In entry');\n    define('LANG_CP_FIELD_IN_FILTER',           'Show in filter');\n    define('LANG_CP_FIELD_IN_RELATION',         'Show only when parent relation is used');\n    define('LANG_CP_FIELD_PRIVACY',             'Privacy');\n    define('LANG_CP_FIELD_PRIVATE',             'Show the field only to the entry author');\n    define('LANG_CP_FIELD_GROUPS_READ',         'Read access');\n    define('LANG_CP_FIELD_GROUPS_EDIT',         'Write access');\n    define('LANG_CP_FIELD_GROUPS_ADD',          'Add access');\n    define('LANG_CP_FIELD_WRAP',                'Flow and CSS');\n    define('LANG_CP_FIELD_WRAP_TYPE',           'Type');\n    define('LANG_CP_FIELD_WRAP_LTYPE',          'The next field to the right of the current');\n    define('LANG_CP_FIELD_WRAP_RTYPE',          'The next field to the left of the current');\n    define('LANG_CP_FIELD_WRAP_NTYPE',          'Flow none');\n    define('LANG_CP_FIELD_WRAP_ATYPE',          'Auto');\n    define('LANG_CP_FIELD_WRAP_WIDTH',          'Field width');\n    define('LANG_CP_FIELD_WRAP_WIDTH_HINT',     'Not Set - automatic width. Used in conjunction with the unit of measurement, such as 200px, 60%, etc.');\n    define('LANG_CP_FIELD_WRAP_STYLE',          'CSS field wrapper class');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND',      'Dependence to show the field in the form');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HINT', 'The values can be specified separated by commas.');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_F',    'The field depends on');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_SHOW', 'Show the current field if the selected one is equal to');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HIDE', 'Hide the current field if the value of the selected one is equal to');\n    define('LANG_CP_PROPS_NO_CATS',             'Content type &laquo;%s&raquo; has no categories.');\n    define('LANG_CP_PROPS_NO_CATS_ADD',         '<a href=\"%s\">Create Categories</a> to add properties.');\n    define('LANG_CP_PROPS_ADD',                 'Create Property');\n    define('LANG_CP_PROPS_DELETE_CONFIRM',      'Delete the \"{title}\" property?\\n The property will be removed from all categories');\n    define('LANG_CP_PROPS_UNBIND_CONFIRM',      'Unbind property \"{title}\" from current category?');\n    define('LANG_CP_PROPS_BIND',                'Bind property');\n    define('LANG_CP_PROPS_BIND_SC',             'Property successfully bound');\n    define('LANG_CP_PROPS_BIND_RECURSIVE',      'including nested categories');\n    define('LANG_CP_PROPS_UNBIND',              'Unbind property');\n    define('LANG_CP_PROPS_UNBIND_SC',           'Property successfully unbinded');\n    define('LANG_CP_PROP_TITLE',                'Property title');\n    define('LANG_CP_PROP_IS_ACTIVE',            'Show property on the site');\n    define('LANG_CP_PROP_VALUES',               'List items');\n    define('LANG_CP_PROP_VALUES_HINT',          'One item per line');\n    define('LANG_CP_PROP_CATS',                 'Bind property to categories');\n    define('LANG_CP_PROP_UNITS',                'Units');\n    define('LANG_CP_FILTER_ADD',                'Add filter');\n    define('LANG_CP_FILTER_NO_TABLE',           'Filters is disabled, <a href=\"%s\">enable it</a>.');\n    define('LANG_CP_FILTER_TABLE_SUCCESS',      'Filter engine successfully enabled');\n    define('LANG_CP_FILTER_DELETE_CONFIRM',     'Delete filter \"{title}\"?');\n    define('LANG_CP_FILTER_ERROR_SLUG',         'A category with the same URI already exists, specify another');\n    define('LANG_CP_FILTER_DESC_HINT',          'Additional description of the category');\n    define('LANG_CP_FILTER_FIELDS',             'Fields filters');\n    define('LANG_CP_FILTER_PROPS',              'Props filters');\n    define('LANG_CP_FILTER_CATS',               'Categories where the filter will be available');\n    define('LANG_CP_DATASET',                   'Dataset');\n    define('LANG_CP_DATASET_ADD',               'Add Dataset');\n    define('LANG_CP_DATASET_TITLE',             'Dataset title');\n    define('LANG_CP_DATASET_CREATED',           'Dataset &laquo;%s&raquo; has been created');\n    define('LANG_CP_DATASET_DELETE_CONFIRM',    'Delete dataset \"{title}\"?');\n    define('LANG_CP_DATASET_IS_VISIBLE',        'Show dataset on the site');\n    define('LANG_CP_CATS_VIEW',        'Show in categories');\n    define('LANG_CP_CATS_HIDE',        'Do not show in categories');\n    define('LANG_CP_CTYPE_RELATIONS',           'Relations');\n    define('LANG_CP_RELATION',                  'Relation');\n    define('LANG_CP_RELATION_ADD',              'Add Relation');\n    define('LANG_CP_RELATION_TITLE',            'Relation Name');\n    define('LANG_CP_RELATION_DELETE_CONFIRM',   'Delete the Relation?');\n    define('LANG_CP_RELATION_LAYOUT',           'Layout');\n    define('LANG_CP_RELATION_LAYOUT_TYPE',      'Layout Type');\n    define('LANG_CP_RELATION_LAYOUT_LIST',      'List');\n    define('LANG_CP_RELATION_LAYOUT_TAB',       'Tab');\n    define('LANG_CP_RELATION_LAYOUT_HIDDEN',    'None (hidden)');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_EMPTY','Hide when empty');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_TITLE','Hide list title');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_FILTER','Hide filter');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT',     'Records per page');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT_HINT','Leave blank to use Content default');\n    define('LANG_CP_RELATION_CREATED',          'Relation has been created');\n    define('LANG_CP_RELATION_FIELD_CREATED',    'Parent relation field has been created in the \"%s\" Content Type');\n    define('LANG_CP_CONTR_RELATION_FIELD_CREATED', 'Parent relation field has been created in the \"%s\" Component');\n    define('LANG_CP_RELATION_CHILD',            'Child Content');\n    define('LANG_CP_RELATION_TAB_OPTS',         'Tab Options');\n    define('LANG_CP_RELATION_TAB_SEO_HINT',     'Use curly braces to insert parent item\\'s field. Example: <strong>{title}</strong>');\n    define('LANG_CP_RELATION_TAB_SEO_TITLE',    'Tab Title');\n    define('LANG_CP_RELATION_TAB_SEO_KEYS',     'Tab Meta-keywords');\n    define('LANG_CP_RELATION_TAB_SEO_DESC',     'Tab Meta-description');\n    define('LANG_CP_RELATION_ERROR_LEN',        'Are too long names are linkable system types. The name length should not be more than 30 characters.');\n    define('LANG_CP_RELATION_LAYOUT_LIST_ERROR', 'You can create only a single relation with \"List\" type');\n    define('LANG_CP_MENU',                      'Menu');\n    define('LANG_CP_MENU_ADD',                  'Add Menu');\n    define('LANG_CP_MENU_EDIT',                 'Menu Settings');\n    define('LANG_CP_MENU_CREATED',              'Menu &laquo;%s&raquo; has been created');\n    define('LANG_CP_MENU_DELETE',               'Delete Menu');\n    define('LANG_CP_MENU_DELETE_CONFIRM',       'Delete current menu?');\n    define('LANG_CP_MENU_ITEM',                 'Menu Item');\n    define('LANG_CP_MENU_ITEM_PARENT',          'Parent item');\n    define('LANG_CP_MENU_ITEM_CREATED',         'Menu item &laquo;%s&raquo; has been created');\n    define('LANG_CP_MENU_ITEM_TITLE',           'Menu item title');\n    define('LANG_CP_MENU_ITEM_URL',             'URL');\n    define('LANG_CP_MENU_ITEM_ADD',             'Add Menu Item');\n    define('LANG_CP_MENU_ITEM_DELETE_CONFIRM',  'Delete item \"{title}\"?');\n    define('LANG_CP_MENU_ITEM_ACTION',          'Menu item action');\n    define('LANG_CP_MENU_ITEM_ACTION_URL',      'Open URL');\n    define('LANG_CP_MENU_ITEM_ACTION_URL_HINT', 'Internal links should come without a leading slash<br/>External links should start with http://<br/>You can enter <a href=\"https://docs.instantcms.ru/en/manual/menu/special\" target=\"_blank\">Special Links</a>');\n    define('LANG_CP_MENU_ITEM_HIDE_TITLE',      'Show icon only, without title');\n    define('LANG_CP_ICON_SELECT',               'Select an icon');\n    define('LANG_CP_MENU_ITEM_ICON',            'Icon name');\n    define('LANG_CP_MENU_ITEM_ACTION_TARGET',   'Open link in');\n    define('LANG_CP_MENU_ITEM_TARGET_SELF',     'Current window');\n    define('LANG_CP_MENU_ITEM_TARGET_BLANK',    'New window');\n    define('LANG_CP_MENU_ITEM_TARGET_PARENT',   'Parent window');\n    define('LANG_CP_MENU_ITEM_TARGET_TOP',      'On top of all frames');\n    define('LANG_CP_MENU_IS_FIXED',             'This menu cannot be deleted');\n    define('LANG_CP_WIDGETS_SHOW_ALL',          'Show all widgets');\n    define('LANG_CP_WIDGETS_SKIP_IMPORT',       '&laquo;%s&raquo; widget was not imported because not installed');\n    define('LANG_CP_WIDGETS_ROW_NONE',          'You have not created a single row');\n    define('LANG_CP_WIDGETS_COL_VA',           'Vertical Column Alignment');\n    define('LANG_CP_WIDGETS_COL_VA1',          'Top');\n    define('LANG_CP_WIDGETS_COL_VA2',          'Middle');\n    define('LANG_CP_WIDGETS_COL_VA3',          'Bottom');\n    define('LANG_CP_WIDGETS_COL_HA',           'Horizontal column alignment');\n    define('LANG_CP_WIDGETS_COL_HA1',          'Left to right');\n    define('LANG_CP_WIDGETS_COL_HA3',          'Right to Left');\n    define('LANG_CP_WIDGETS_COL_HA4',          'Space Around');\n    define('LANG_CP_WIDGETS_COL_HA5',          'Space Between');\n    define('LANG_CP_WIDGETS_COL_CLASS',         'Extra CSS Column Class');\n    define('LANG_CP_WIDGETS_ROW_CLASS',         'Extra CSS Row Class');\n    define('LANG_CP_WIDGETS_COL_ORDER',         'Visual order column for %s resolutions');\n    define('LANG_CP_WIDGETS_COL_D_ORDER',       'Default visual column order');\n    define('LANG_CP_WIDGETS_COL_CUT_BEFORE',    'Insert line separator before this column');\n    define('LANG_CP_WIDGETS_COL_WIDTH_D',       'Default width');\n    define('LANG_CP_WIDGETS_COL_WIDTH',         'Width for %s resolutions');\n    define('LANG_CP_WIDGETS_COL_WIDTH_ALL',     'Width for all resolutions');\n    define('LANG_CP_WIDGETS_COL_AUTO',          'Variable width content');\n    define('LANG_CP_WIDGETS_ADD_COL',           'Add col');\n    define('LANG_CP_WIDGETS_ROWS_TITLE',        'Row Headers');\n    define('LANG_CP_WIDGETS_ADD_ROW',           'Add row');\n    define('LANG_CP_WIDGETS_IMPORT_SCHEME',     'Import schema');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE',       'Where import?');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE_EX',    'Existing template');\n    define('LANG_CP_WIDGETS_LFILE',             'Scheme text file in YAML format');\n    define('LANG_CP_WIDGETS_LFILE_HINT',        'If the schema already exists, it will be replaced with the imported one. Make a backup if necessary.');\n    define('LANG_CP_WIDGETS_EXPORT_SCHEME',     'Export schema');\n    define('LANG_CP_WIDGETS_FROM_TEMPLATE',     'Template from which to import scheme');\n    define('LANG_CP_WIDGETS_SAVE_WIDGETS',      'Export widgets');\n    define('LANG_CP_WIDGETS_COPY_WIDGETS',      'Transfer widgets');\n    define('LANG_CP_WIDGETS_EMPTY_LAYOUT',      'The selected template is no scheme');\n    define('LANG_CP_WIDGETS_LAYOUT_ISUCCESS',   'Schema imported successfully');\n    define('LANG_CP_WIDGETS_ADD_ROW_P',         'Add nested row');\n    define('LANG_CP_WIDGETS_ROW_NO_GUTTERS',    'No gutters');\n    define('LANG_CP_WIDGETS_ROW_CONT',          'Row container');\n    define('LANG_CP_WIDGETS_ROW_CONT_TAG',      'Row container tag');\n    define('LANG_CP_WIDGETS_ROW_CONT_CSS',      'Row container CSS class');\n    define('LANG_CP_WIDGETS_ROW_TAG',           'Row Tag');\n    define('LANG_CP_WIDGETS_COL_TAG',           'Column Tag');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG',   'Parent row Tag');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG_C', 'Parent row Tag CSS class');\n    define('LANG_CP_WIDGETS_ROW_CONT_NO',       'Without container');\n    define('LANG_CP_WIDGETS_ROW_DEL_CONFIRM',   'Delete row?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_COL_DEL_CONFIRM',   'Delete col?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_COL_COUNT',         'Columns count');\n    define('LANG_CP_WIDGETS_COL_NAME',          'Position name');\n    define('LANG_CP_WIDGETS_COL_NAME_HINT',     'Not specified, will be generated automatically. Must be unique.');\n    define('LANG_CP_WIDGETS_COL_TYPE',          'Which column?');\n    define('LANG_CP_WIDGETS_COL_TYPE1',         'Typical');\n    define('LANG_CP_WIDGETS_COL_TYPE2',         'Custom Template');\n    define('LANG_CP_WIDGETS_COL_WRAPPER',       'Column Template');\n    define('LANG_CP_WIDGETS_COL_WRAPPER_H',     'Write the HTML column template. Use the expression {position} at the output location of the widgets.');\n    define('LANG_CP_WIDGETS_PAGE',              'Page');\n    define('LANG_CP_WIDGETS_PAGES',             'Pages');\n    define('LANG_CP_WIDGETS_ALL',               'All widgets');\n    define('LANG_CP_WIDGETS_ADD',               'Add Widget');\n    define('LANG_CP_WIDGETS_ADD_PAGE',          'Add Page');\n    define('LANG_CP_WIDGETS_EDIT_PAGE',         'Edit');\n    define('LANG_CP_WIDGETS_DELETE_PAGE',       'Delete');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS', 'Unbind All Widgets');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS_CONFIRM', 'Unbind all widgets from their positions?\\nThe widgets will be moved to the Unused Widgets section');\n    define('LANG_CP_WIDGETS_MISC',              'Miscellaneous');\n    define('LANG_CP_WIDGET_COPY_CONFIRM',       'Copy the widget, duplicating it at the same position?');\n    define('LANG_CP_WIDGET_DELETE_CONFIRM',     'Delete widget?');\n    define('LANG_CP_WIDGET_REMOVE_CONFIRM',     'Are you sure you want to permanently remove the widget from the system?');\n    define('LANG_CP_WIDGET_REMOVE_SUCCESS',     'Widget successfully deleted');\n    define('LANG_CP_WIDGET_PAGE_CREATED',       'Page &laquo;%s&raquo; has been created');\n    define('LANG_CP_WIDGET_PAGE_URLS',          'URL binding');\n    define('LANG_CP_WIDGET_PAGE_BODY_CSS',      'CSS classes for page body tag');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK',      'Positive masks');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK_NOT',  'Negative masks');\n    define('LANG_CP_WIDGETS_UNUSED',            'Unused Widgets');\n    define('LANG_CP_WIDGETS_UNUSED_HINT',       'Here you can place the widgets that have to be temporarily hidden or moved to another page without losing their settings');\n    define('LANG_CP_WIDGETS_BINDED',            'Binded widgets');\n    define('LANG_CP_WIDGETS_BINDED_HINT',       'Drag the widget here to bind it with common settings unlimited number of times');\n    define('LANG_CP_WIDGETS_TEMPLATE',          'Widgets for template');\n    define('LANG_CP_WIDGETS_FA',                'Quick selection of URLs for masks');\n    define('LANG_CP_WIDGETS_FA_TYPE',           'Type');\n    define('LANG_CP_WIDGETS_FA_ITEMS',          'Items');\n    define('LANG_CP_WIDGETS_FA_CATS',           'Categories');\n    define('LANG_CP_WIDGETS_FA_TITLE_OR_URL',   'Title or URL');\n    define('LANG_CP_WIDGETS_FA_ADD_TO',         'Add to the');\n    define('LANG_CP_WIDGETS_FA_TO_POS',         'To positive');\n    define('LANG_CP_WIDGETS_FA_TO_NOT',         'To negative');\n    define('LANG_CP_WIDGETS_FA_ADD',            'Add');\n    define('LANG_CP_WIDGETS_DSCH_ERROR',        'The current admin panel template does not support dynamic widget scheme. <a target=\"_blank\" href=\"https://docs.instantcms.ru/en/manual/widgets\">More details...</a>');\n    define('LANG_CP_WIDGETS_STYLE',             'Style');\n    define('LANG_CP_NOT_SET_ALL',               'If nothing is selected, shown to everyone');\n    define('LANG_CP_USER_PMAILING',             'Create pm messages');\n    define('LANG_CP_USER_ADD',                  'Add user');\n    define('LANG_CP_USER_CREATED',              'User &laquo;%s&raquo; is created');\n    define('LANG_CP_USER_DELETE_CONFIRM',       'Delete a user {nickname}?\\nAll his content and all his uploaded files will be also deleted');\n    define('LANG_CP_USER_DELETED',              'User %s has been deleted');\n    define('LANG_CP_USER_GROUP_ADD',            'Add group');\n    define('LANG_CP_USER_GROUP_EDIT',           'Edit group');\n    define('LANG_CP_USER_GROUP_PERMS',          'Group Permissions');\n    define('LANG_CP_USER_GROUP_DELETE',         'Delete Group');\n    define('LANG_CP_USER_GROUP_DELETE_CONFIRM', 'Delete selected group?\\nUsers will no be deleted');\n    define('LANG_CP_USER_GROUP_CREATED',        'Group &laquo;%s&raquo; has been created');\n    define('LANG_CP_USER_GROUP_IS_PUBLIC',      'Allow to join this group after sign up');\n    define('LANG_CP_USER_GROUP_IS_FILTER',      'Show in user filter');\n    define('LANG_CP_USER_GROUP_ERR_DELETE',     'You can not delete the last group');\n    define('LANG_CP_USER_LOCKING',              'Blocking');\n    define('LANG_CP_USER_LOCKED',               'Blocked');\n    define('LANG_CP_USER_IS_LOCKED',            'Block user');\n    define('LANG_CP_USER_LOCK_UNTIL',           'Block until');\n    define('LANG_CP_USER_LOCK_REASON',          'Blocking reason');\n    define('LANG_CP_USER_NOT_FOUND',            'User %s not found');\n    define('LANG_CP_USER_FIND_BYIP',            'Find all by this IP');\n    define('LANG_CP_USER_RIPE_SEARCH',          'Find in RIPE database');\n    define('LANG_CP_USER_SEARCH_NOT_FOUND',     'No users by specified criteria');\n    define('LANG_CP_USERS_ONLINE',              'Online now');\n    define('LANG_CP_USERS_UNCONFIRMED',         'Unverified Accounts');\n    define('LANG_CP_USERS_ALL',                 'Total Users');\n    define('LANG_CP_USERS_ISDELETED',           'Deleted');\n    define('LANG_CP_USERS_LOCKED',              'Blocked');\n    define('LANG_CP_TOTAL',       'Total');\n    define('LANG_CP_ONMODERATE',  'Moderation');\n    define('LANG_CP_NOTPUB',      'Unpublished');\n    define('LANG_CP_CONTROLLERS_OPTIONS',       'Component options');\n    define('LANG_CP_CONTROLLERS_ADD',           'Install Component');\n    define('LANG_CP_ERR_BACKEND_NOT_FOUND',     'The &laquo;%s&raquo; component has no settings');\n    define('LANG_CP_SETTINGS_SITE',             'Site');\n    define('LANG_CP_SETTINGS_GUI',              'Interface');\n    define('LANG_CP_SETTINGS_FRONTPAGE',        'Homepage');\n    define('LANG_CP_SETTINGS_DATE',             'Dates');\n    define('LANG_CP_SETTINGS_MAIL',             'Mail');\n    define('LANG_CP_SETTINGS_CACHE',            'Cache');\n    define('LANG_CP_SETTINGS_DEBUG',            'Debugging');\n    define('LANG_CP_SETTINGS_DB',               'Database');\n    define('LANG_CP_SETTINGS_DB_CLEAR_SQL_MODE', 'Enable empty sql_mode for MySQL');\n    define('LANG_CP_SETTINGS_DB_CHARSET',       'Charset');\n    define('LANG_CP_SETTINGS_DB_CHARSET_HINT',  'Changing the charset may take a long time');\n    define('LANG_CP_SETTINGS_MISC',             'Misc');\n    define('LANG_CP_SETTINGS_SECURITY',         'Security');\n    define('LANG_CP_SETTINGS_SESSIONS',         'Sessions');\n    define('LANG_CP_SETTINGS_SESSION_MAXLIFETIME', 'Sessions maxlifetime');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_HANDLER', 'Sessions save handler');\n    define('LANG_CP_SETTINGS_SESSION_NAME', 'Session name');\n    define('LANG_CP_SETTINGS_SESSION_NAME_HINT', 'Must be the same for all sites with a single authorization');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH', 'Sessions save path');\n    define('LANG_CP_SETTINGS_SESSIONS_BASEDIR', ', which must enter one of the paths ');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH_HINT', 'For files, the full path must be specified%s. For Memcache \"tcp://\" prefixed must be specified, for example, <b>tcp://localhost:11211</b>. For Memcached must be without the \"tcp://\" prefix, for example, <b>localhost: 11211</b>.');\n    define('LANG_CP_CHECK_SPOOFING_TYPE', 'Control of changing the IP address when entering the admin area');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT1', 'By changing the subnet');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT2', 'Strictly for ip address');\n    define('LANG_CP_SETTINGS_USER_CHANGE_LANG', 'Allow change language by user (substitution prefix in the URL)');\n    define('LANG_CP_SETTINGS_BROWSER_AUTO_LANG', 'Automatically detect language by browser locale');\n    define('LANG_CP_SETTINGS_ALLOW_IPS',        'IP addresses allowed to access the control panel');\n    define('LANG_CP_SETTINGS_ALLOW_IPS_HINT',   'One address per line. Allowed to all if not specified. Current ip address: %s');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY',    'How to detect a visitor\\'s IP');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY_HINT', 'The $_SERVER array key that contains a real user IP address. Do not change this value if you are not sure. The default value fits most needs. For example, enter HTTP_CF_CONNECTING_IP (without quotes) for CloudFlare.');\n    define('LANG_CP_SETTINGS_SITE_ONLY_TO_USERS', 'Site is available only to the authorized users');\n    define('LANG_CP_SETTINGS_SITE_ENABLED',     'Site is online');\n    define('LANG_CP_SETTINGS_SITE_REASON',      'Reason why site is offline');\n    define('LANG_CP_SETTINGS_CHECK_UPDATES',    'Automatically check for InstantCMS updates when admin logs in');\n    define('LANG_CP_SETTINGS_SITENAME',         'Site name');\n    define('LANG_CP_SETTINGS_HOMETITLE',        'Homepage title');\n    define('LANG_CP_SETTINGS_METAKEYS',         'Site keywords (meta keywords)');\n    define('LANG_CP_SETTINGS_METADESC',         'Site description (meta description)');\n    define('LANG_CP_SETTINGS_DISABLE_METAKEYS', 'Disable meta keywords tag');\n    define('LANG_CP_SETTINGS_META_NO_DEFAULT',  'Apply the above-specified words and description to the homepage only');\n    define('LANG_CP_SETTINGS_META_NO_DEFAULT_HINT',  'If disabled, these words will be displayed on pages with no specified parameters.');\n    define('LANG_CP_SETTINGS_PAGE_NUM_IN_TITLE',  'Add page numbers in the title and meta description tags when pagination');\n    define('LANG_CP_SETTINGS_IS_SITENAME_IN_TITLE',  'Add site name to the page title tag');\n    define('LANG_CP_SETTINGS_SET_HEAD_PRELOAD',  'Build HTTP Preload headers');\n    define('LANG_CP_SETTINGS_LANGUAGE',         'Language');\n    define('LANG_CP_SETTINGS_TEMPLATE',         'Default theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_ADMIN',   'Control panel theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_MOBILE',  'Mobile theme');\n    define('LANG_CP_SETTINGS_TEMPLATE_TABLET',  'Tablet theme');\n    define('LANG_CP_SUBMIT_COMPILE',            'Save and compile %s');\n    define('LANG_CP_SETTINGS_TEMPLATE_OPTIONS', 'Theme Settings');\n    define('LANG_CP_SETTINGS_TEMPLATE_INTH',    'Create your own theme');\n    define('LANG_CP_SETTINGS_EDITOR',           'Default HTML editor');\n    define('LANG_CP_SETTINGS_SHOW_BREADCRUMBS', 'Show breadcrumbs?');\n    define('LANG_CP_SETTINGS_HTML_MINIFY',      'Minify HTML');\n    define('LANG_CP_SETTINGS_MERGE_CSS',        'Merge CSS files');\n    define('LANG_CP_SETTINGS_MERGE_JS',         'Merge JS files');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_MERGED',  '&mdash; <a href=\"%s\">Clear cache</a>');\n    define('LANG_CP_SETTINGS_MERGED_CLEANED',   'Folder <b>%s</b> is succesfully cleared');\n    define('LANG_CP_SETTINGS_MERGED_CLEAN_FAIL','Unable to clear the folder <b>%s</b>. Check permissions or clean it manually');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_SUCCESS', 'The cache is successfully cleared');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_FAIL', 'Error clearing cache');\n    define('LANG_CP_SETTINGS_CTYPE_DEF',        'Default content types');\n    define('LANG_CP_SETTINGS_CTYPE_DEF_HINT',\t'Page URLs of this content types will not contain the content type\\'s system name');\n    define('LANG_CP_SETTINGS_FP_SHOW',          'Show on the homepage');\n    define('LANG_CP_SETTINGS_FP_SHOW_NONE',     'Only widgets');\n    define('LANG_CP_SETTINGS_FP_SHOW_PROFILE',  'User profile or authorization form');\n    define('LANG_CP_SETTINGS_FP_SHOW_CONTENT',  'Content: %s');\n    define('LANG_CP_SETTINGS_TIMEZONE',         'Time zone');\n    define('LANG_CP_SETTINGS_ALLOW_USERS_TIMEZONE', 'Allow users to choose their time zone');\n    define('LANG_CP_SETTINGS_DATE_FORMAT',      'PHP date format');\n    define('LANG_CP_SETTINGS_DATE_FORMAT_JS',   'JavaScript date format');\n    define('LANG_CP_SETTINGS_MAIL_TRANSPORT',   'Mail transport');\n    define('LANG_CP_SETTINGS_MAIL_FROM',        'Sender address');\n    define('LANG_CP_SETTINGS_MAIL_FROM_NAME',   'Sender name');\n    define('LANG_CP_SETTINGS_MAIL_SMTP',        'SMTP settings');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_HOST',   'SMTP server');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PORT',   'SMTP port');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_AUTH',   'SMTP authorization required');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_USER',   'SMTP user');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PASS',   'SMTP password');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC',    'SMTP encryption');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_NO', 'Without encryption');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_SSL','SSL');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_TLS','TLS');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME',  'Abstract Counter');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME_HINT',  'Used in the parameters when connecting js and css. Increase after the changes to reset the cache of visitors.');\n    define('LANG_CP_SETTINGS_CACHE_ENABLED',    'Enable caching');\n    define('LANG_CP_SETTINGS_CACHE_METHOD',     'Caching engine');\n    define('LANG_CP_SETTINGS_CACHE_METHOD_NO',  'not available');\n    define('LANG_CP_SETTINGS_CACHE_TTL',        'Cache TTL, sec');\n    define('LANG_CP_SETTINGS_CACHE_HOST',       'Memcached server');\n    define('LANG_CP_SETTINGS_CACHE_PORT',       'Memcached port');\n    define('LANG_CP_SETTINGS_CACHE_MIN_HTML',   'Minify HTML');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN',    'Cookie Domain');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN_HINT', 'Your site\\'s cookies will be distributed to the specified domain and all of its subdomains. End-to-end authentication will be available. If not specified, the cookie will be valid within the current domain.');\n    define('LANG_CP_SETTINGS_CURRENT_DOMAIN',   'Current domain: ');\n    define('LANG_CP_MEMCACHE_NOT_AVAILABLE',    'Memcached module not found');\n    define('LANG_CP_MEMCACHE_CONNECT_ERROR',    'Cannot connect to Memcached - check server and port');\n    define('LANG_CP_FILE_NOT_WRITABLE',         'Cannot overwrite file \"%s\". Set write permissions for it.');\n    define('LANG_CP_SETTINGS_NOT_WRITABLE',     'Configuration file is not writable!');\n    define('LANG_CP_SETTINGS_TPL_NOT_WRITABLE', 'Template configuration file is not writable!');\n    define('LANG_CP_SAVE_SUCCESS',              'Settings saved successfully');\n    define('LANG_CP_ORDER_SUCCESS',             'The order was successfully saved');\n    define('LANG_CP_PERMISSIONS_SUCCESS',       'The access rules saved successfully');\n    define('LANG_CP_SETTINGS_DEBUG_MODE',       'Debug mode enabled');\n    define('LANG_CP_SETTINGS_EMULATE_LAG',      'Emulate network lag');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN',      'Clear cache');\n    define('LANG_CP_ADDONS_DATA_ERROR',         'Error getting data, try again later.');\n    define('LANG_CP_ADDONS_CURL_ERROR',         'Browse the add-ons catalog failed, because CURL is not available on the server. You can select addons from a <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">official add-ons catalog</a>.');\n    define('LANG_CP_INSTALL_PACKAGE_LINK_HINT', 'For example, by copying a download link from the <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">official add-ons catalog</a>');\n    define('LANG_CP_INSTALL_BY_LINK',           'Install from URL');\n    define('LANG_CP_OFICIAL_ADDONS',            'Add-ons catalog');\n    define('LANG_CP_INSTALL_PACKAGE',           'Install Extension Package');\n    define('LANG_CP_DO_INSTALL',                'Install');\n    define('LANG_CP_DO_UPDATE',                 'Update');\n    define('LANG_CP_LAST_UPDATE',               'Last update');\n    define('LANG_CP_INSTALL_COMPATIBILITY_YES', 'Compatible with your InstantCMS version');\n    define('LANG_CP_INSTALL_COMPATIBILITY_NO',  'Not tested with your InstantCMS version');\n    define('LANG_CP_NO_ADDONS',                 'No add-ons for your request');\n    define('LANG_CP_FIND_ADDON_TITLE',          'Search by name of the add-on');\n    define('LANG_CP_FIND_ADDON_FREE',           'Only free');\n    define('LANG_CP_FIND_ADDON_BUY',            'Only paid');\n    define('LANG_CP_FIND_FOUND',                'Total on request');\n    define('LANG_CP_PACKAGE_VIDEO',             'Video');\n    define('LANG_CP_PACKAGE_VIDEO_TITLE',       'Video review');\n    define('LANG_CP_PACKAGE_DEMO',              'Demo');\n    define('LANG_CP_PACKAGE_BUY',               'Buy for %s');\n    define('LANG_CP_PACKAGE_BUY_UPDATE',        'Update available');\n    define('LANG_CP_PACKAGE_INSTALLEDT',        'Installed');\n    define('LANG_CP_PACKAGE_INSTALLED_HINT',    '%s installed');\n    define('LANG_CP_ADDDONS_DS_INSTALLED',      'Installed');\n    define('LANG_CP_PACKAGE_DELETE_CONTROLLERS', 'Deleting a \u00ab%s\u00bb component files');\n    define('LANG_CP_PACKAGE_DELETE_WIDGETS',     'Deleting a \u00ab%s\u00bb widget files');\n    define('LANG_CP_PACKAGE_DELETE_HINT',       'We strongly recommend that you manually delete all the files listed below, they are no longer used. InstantCMS does not have permission to delete (and should not).');\n    define('LANG_CP_INSTALL_PACKAGE_DONE',      'Installation completed');\n    define('LANG_CP_INSTALL_PACKAGE_DONE_INFO', 'Extension package has been successfully installed');\n    define('LANG_CP_INSTALL_PACKAGE_NOT_CLEARED', 'The <b>%s</b> folder has not been cleared due to lack of permissions, clear it manually');\n    define('LANG_CP_INSTALL_PACKAGE_INFO',      'Package Info');\n    define('LANG_CP_INSTALL_PACKAGE_FILE',      'Package file');\n    define('LANG_CP_INSTALL_PACKAGE_FILE_HINT', 'File with the <b>.zip</b> extension');\n    define('LANG_CP_INSTALL_ERR_HINT',          'Result');\n    define('LANG_CP_INSTALL_ERR_FIX',           'Solution');\n    define('LANG_CP_INSTALL_ERR_WA',            'Workaround');\n    define('LANG_CP_INSTALL_NOT_WRITABLE',      'Folder <b>%s</b> is not writable');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_CUSTOM', 'Click \"Continue\" if you unzipped the package manually into a directory <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_HINT', 'Automatic upload is impossible');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_FIX',  'Make this folder writable and reload this page');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_WA',   'Change the file extension to <b>.zip</b>, unpack and upload its contents to the <b>%s</b> folder');\n    define('LANG_CP_INSTALL_NOT_ZIP',           'Server does not support automatic ZIP-archive extraction');\n    define('LANG_CP_INSTALL_NOT_ZIP_HINT',      'Automatic extraction is impossible');\n    define('LANG_CP_INSTALL_NOT_ZIP_FIX',       'Request your hoster to install the <b>ZipArchive</b> class for PHP on your server');\n    define('LANG_CP_INSTALL_NOT_ZIP_WA',        'Change file extension to <b>.zip</b>, unpack and upload its contents to the <b>%s</b> folder');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE', 'Server does not support the function parse_ini_file');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_HINT', 'Installing add-ons is not possible');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_FIX', 'Please contact the hoster to enable the <b>parse_ini_file</b> function for PHP on your server');\n    define('LANG_CP_INSTALL_ERROR',             'Package installation error');\n    define('LANG_CP_INSTALL_PERM_ERROR',        'The \"%s\" file is not readable');\n    define('LANG_CP_INSTALL_ZIP_ERROR',         'Package extraction error');\n    define('LANG_CP_INSTALL_FTP_NOTICE',        'To install the package you must provide the details of an FTP-user that has permissions to create folders and files.');\n    define('LANG_CP_INSTALL_FTP_PRIVACY',       'The details are not stored or transferred anywhere');\n    define('LANG_CP_PACKAGE_DEPENDENT_TYPE',      'Requires installed %s - <a href=\"%s\" target=\"_blank\">%s</a>');\n    define('LANG_CP_PACKAGE_DEPENDENT_COMPONENT', 'component');\n    define('LANG_CP_PACKAGE_DEPENDENT_WIDGET',    'widget');\n    define('LANG_CP_INSTALLED',     'installed');\n    define('LANG_CP_NOT_INSTALLED', 'not installed');\n    define('LANG_CP_PACKAGE_AUTHOR',            'Package author');\n    define('LANG_CP_PACKAGE_DESCRIPTION',       'Package description');\n    define('LANG_CP_PACKAGE_CONTENTS',          'Package contents');\n    define('LANG_CP_PACKAGE_DEPENDS',           'Package dependencies');\n    define('LANG_CP_PACKAGE_DEPENDS_CORE',      'Required core version');\n    define('LANG_CP_PACKAGE_DEPENDS_PACKAGE',   'Required installed package version');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_INSTALL', 'Component installation package');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_UPDATE', 'Component service pack');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_INSTALL', 'Widget installation package');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_UPDATE', 'Widget service pack');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_UPDATE', 'InstantCMS service pack');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_INSTALL', 'InstantCMS service pack');\n    define('LANG_CP_PACKAGE_DUBLE_INSTALL', 'Package version %s is already installed. If you want to update it, select the corresponding service pack. If you want to re-install the package, remove the installed version first.');\n    define('LANG_CP_PACKAGE_UPDATE_ERROR', '%s \"%s\" has version <b>%s</b>. You have version <b>%s</b> installed. Select the package with a larger version number to update.');\n    define('LANG_CP_PACKAGE_UPDATE_IS_UPDATED', 'The same version of the package is already installed. No update required');\n    define('LANG_CP_PACKAGE_TYPE', 'Package type');\n    define('LANG_CP_PACKAGE_NONAME', 'Unknown author');\n    define('LANG_CP_PACKAGE_UPDATE_NOINSTALL', 'Unable to install the update package because the extension that is being updated is not installed');\n    define('LANG_CP_COMPONENT_IS_DELETED',      'Component \"%s\" has been successfully removed');\n    define('LANG_CP_DELETE_COMPONENT_CONFIRM',  'Delete component \"{title}\"?');\n    define('LANG_CP_FTP_ACCOUNT',               'FTP account');\n    define('LANG_CP_FTP_HOST',                  'Server');\n    define('LANG_CP_FTP_PORT',                  'Port');\n    define('LANG_CP_FTP_USER',                  'Username');\n    define('LANG_CP_FTP_PASS',                  'Password');\n    define('LANG_CP_FTP_PATH',                  'Site root path');\n    define('LANG_CP_FTP_PATH_HINT',             '<a href=\"https://docs.instantcms.ru/en/manual/addons/ftppath\" target=\"_blank\">How to specify correct path?</a>');\n    define('LANG_CP_CHECK',                     'Check');\n    define('LANG_CP_FTP_IS_PASV',               'Passive transfer mode');\n    define('LANG_CP_FTP_CONNECT_FAILED',        'Connection failed. Verify that the host and port are correct');\n    define('LANG_CP_FTP_AUTH_FAILED',           'Connection failed. Verify the username and password are correct');\n    define('LANG_CP_FTP_UPLOAD_FAILED',         'File copy error. Make sure the path and permissions are correct');\n    define('LANG_CP_FTP_MKDIR_FAILED',          'Failed to create the folder. Make sure the path and permissions are correct');\n    define('LANG_CP_FTP_NO_ROOT',\t\t\t\t'Error: the %s folder not found on the server');\n    define('LANG_CP_FTP_BAD_ROOT',\t\t\t\t'Bad root path: InstantCMS 2 not found in <strong>%s</strong>');\n    define('LANG_CP_FTP_CHECK',\t\t\t\t    'Checking the FTP connection');\n    define('LANG_CP_FTP_CONNECTION_INFO',       'Connection to %s');\n    define('LANG_CP_FTP_NO_ERRORS',             'The connection is established and configured correctly.');\n    define('LANG_CP_FTP_ROOT_LIST_TITLE',       'List of connection files and directories');\n    define('LANG_CP_FTP_SAVE_TO_SESSION',   'Remember FTP details for the current session');\n    define('LANG_CP_FTP_SAVE_TO_SESSION_HINT', 'Not safe if the extension is not from a trusted author');\n    define('LANG_CP_FTP_SKIP',\t\t\t\t'Skip this step');\n    define('LANG_CP_FTP_SKIP_HINT',\t\t\t'Skip this step if automatic FTP upload is impossible and you follow the manual installation method described in the <a href=\"https://docs.instantcms.ru/en/manual/addons\">Manual</a>');\n    define('ERR_VALIDATE_UNIQUE_FIELD',         'Field already exists');\n    define('LANG_CP_BACK_TO_SITE',              'Back to Site');\n    define('LANG_CP_3RDPARTY_CREDITS',          'Third-party credits');\n    define('LANG_MODERATOR_ADD',             'Add moderator');\n    define('LANG_MODERATOR_ADD_HINT',        'Enter the email of a user whom you want to assign as a moderator');\n    define('LANG_MODERATOR_APPROVED_COUNT',  'Approved');\n    define('LANG_MODERATOR_DELETED_COUNT',   'Deleted');\n    define('LANG_MODERATOR_IDLE_COUNT',      'Idle');\n    define('LANG_MODERATOR_ASSIGNED_DATE',   'Assigned');\n    define('LANG_MODERATOR_TRASH_LEFT_TIME', 'Trash items lifetime');\n    define('LANG_MODERATOR_ALREADY',         'User %s is already a moderator');\n    define('LANG_MODERATORATION_OPTIONS',    'Moderation options');\n    define('LANG_MODERATION_TRASH_NO_REMOVE', 'Evermore');\n    define('LANG_MODERATION_NOT_NEEDED',      'Not needed');\n    define('LANG_MODERATION_IN_TRASH',        'In the trash');\n    define('LANG_MODERATION_IN_TRASH_TIME',   'Is in the trash, will be deleted through %s');\n    define('LANG_MODERATION_LOGS',            'Moderation logs');\n    define('LANG_CP_CHECK_NESTED',                  'Checking ns trees');\n    define('LANG_CP_NS_NO_TABLES',                  'There are no tables available to check');\n    define('LANG_CP_NS_SUCCESSFUL',                 'Successful checks');\n    define('LANG_CP_NS_UNSUCCESSFUL',               'Errors found');\n    define('LANG_CP_NS_FIX',                        'Fix');\n    define('LANG_CP_NS_FIX_SUCCESS',                'Nested sets for %s table is restored');\n    define('LANG_CP_NS_FIX_ERROR',                  'Failed to restore nested sets for %s table');\n    define('LANG_CP_SCHEDULER',                     'Scheduler');\n    define('LANG_CP_SCHEDULER_TASK',                'Task');\n    define('LANG_CP_SCHEDULER_TASK_ADD',            'Add Task');\n    define('LANG_CP_SCHEDULER_TASK_EDIT',           'Edit Task');\n    define('LANG_CP_SCHEDULER_TASK_CONTROLLER',     'Component');\n    define('LANG_CP_SCHEDULER_TASK_HOOK',           'Hook');\n    define('LANG_CP_SCHEDULER_TASK_PERIOD',         'Interval, minutes');\n    define('LANG_CP_SCHEDULER_IS_STRICT_PERIOD',    'Strict adherence to the period');\n    define('LANG_CP_SCHEDULER_TASK_LAST_RUN',       'Last run');\n    define('LANG_CP_SCHEDULER_TASK_DELETE_CONFIRM', 'Delete task?');\n    define('LANG_CP_SCHEDULER_TASK_CREATED',        'The task has been created');\n    define('LANG_CP_SCHEDULER_TASK_IS_ACTIVE',      'Task is active');\n    define('LANG_CP_SCHEDULER_TASK_RUN',            'Run now');\n    define('LANG_CP_SCHEDULER_TASK_RAN',            'Task &laquo;%s&raquo; was executed %s');\n    define('LANG_CP_SCHEDULER_TASK_RUN_FAIL',       'Failed to execute task &laquo;%s&raquo;');\n    define('LANG_CP_UPDATE_CHECK',                  'Check for InstantCMS updates');\n    define('LANG_CP_UPDATE_DATE',                   'Release date');\n    define('LANG_CP_UPDATE_DOWNLOAD',               'Download package');\n    define('LANG_CP_UPDATE_DOWNLOAD_FAIL',          'Unable to download the update package');\n    define('LANG_CP_UPDATE_INSTALL',                'Install Update');\n    define('LANG_CP_UPDATE_AVAILABLE',              '%s is available for update');\n    define('LANG_CP_UPDATE_NOT_AVAILABLE',          'No updates. You are using the latest version %s of %s.');\n    define('LANG_CP_UPDATE_CHECK_FAIL',             'Unable to check for updates');\n    define('LANG_CP_UPDATE_MANUAL_1',               'Automatic download failed because CURL is not available on the server.');\n    define('LANG_CP_UPDATE_MANUAL_2',               'Download the update archive manually and <a href=\"'.href_to('admin', 'install').'\">Install</a> it');\n    define('LANG_HELP_URL_CONTENT',                 'https://docs.instantcms.ru/en/manual/content');\n    define('LANG_HELP_URL_CONTENT_CATS',            'https://docs.instantcms.ru/en/manual/content/cats');\n    define('LANG_HELP_URL_CTYPES',                  'https://docs.instantcms.ru/en/manual/ctypes');\n    define('LANG_HELP_URL_CTYPES_BASIC',            'https://docs.instantcms.ru/en/manual/ctypes/add');\n    define('LANG_HELP_URL_CTYPES_LABELS',           'https://docs.instantcms.ru/en/manual/ctypes/labels');\n    define('LANG_HELP_URL_CTYPES_FIELDS',           'https://docs.instantcms.ru/en/manual/ctypes/fields');\n    define('LANG_HELP_URL_CTYPES_FIELD',            'https://docs.instantcms.ru/en/manual/ctypes/fields/add');\n    define('LANG_HELP_URL_CTYPES_PROPS',            'https://docs.instantcms.ru/en/manual/ctypes/props');\n    define('LANG_HELP_URL_CTYPES_PROP',             'https://docs.instantcms.ru/en/manual/ctypes/props/add');\n    define('LANG_HELP_URL_CTYPES_FILTERS',          'https://docs.instantcms.ru/en/manual/ctypes/filters');\n    define('LANG_HELP_URL_CTYPES_FILTERS_ADD',      'https://docs.instantcms.ru/en/manual/ctypes/filters/add');\n    define('LANG_HELP_URL_CTYPES_DATASETS',         'https://docs.instantcms.ru/en/manual/ctypes/datasets');\n    define('LANG_HELP_URL_CTYPES_DATASET',          'https://docs.instantcms.ru/en/manual/ctypes/datasets/add');\n    define('LANG_HELP_URL_CTYPES_RELATIONS',        'https://docs.instantcms.ru/en/manual/ctypes/relations');\n    define('LANG_HELP_URL_CTYPES_PERMS',            'https://docs.instantcms.ru/en/manual/ctypes/permissions');\n    define('LANG_HELP_URL_CTYPES_MODERATORS',       'https://docs.instantcms.ru/en/manual/ctypes/moderators');\n    define('LANG_HELP_URL_MENU',                    'https://docs.instantcms.ru/en/manual/menu');\n    define('LANG_HELP_URL_WIDGETS',                 'https://docs.instantcms.ru/en/manual/widgets');\n    define('LANG_HELP_URL_WIDGETS_CFG',             'https://docs.instantcms.ru/en/manual/widgets/config');\n    define('LANG_HELP_URL_WIDGETS_PAGES',           'https://docs.instantcms.ru/en/manual/widgets/pages');\n    define('LANG_HELP_URL_COMPONENTS',              'https://docs.instantcms.ru/en/manual/components');\n    define('LANG_HELP_URL_INSTALL',                 'https://docs.instantcms.ru/en/manual/addons');\n    define('LANG_HELP_URL_COM_FORMS',               'https://docs.instantcms.ru/en/manual/components/forms');\n    define('LANG_HELP_URL_COM_REDIRECT',            'https://docs.instantcms.ru/en/manual/components/redirect');\n    define('LANG_HELP_URL_COM_AUTH',                'https://docs.instantcms.ru/en/manual/components/auth');\n    define('LANG_HELP_URL_COM_ACTIVITY',            'https://docs.instantcms.ru/en/manual/components/activity');\n    define('LANG_HELP_URL_COM_GROUPS',              'https://docs.instantcms.ru/en/manual/components/groups');\n    define('LANG_HELP_URL_COM_RECAPTCHA',           'https://docs.instantcms.ru/en/manual/components/recaptcha');\n    define('LANG_HELP_URL_COM_COMMENTS',            'https://docs.instantcms.ru/en/manual/components/comments');\n    define('LANG_HELP_URL_COM_IMAGES',\t\t\t\t'https://docs.instantcms.ru/en/manual/components/images');\n    define('LANG_HELP_URL_COM_SUBSCRIPTIONS',\t\t'https://docs.instantcms.ru/en/manual/components/subscriptions');\n    define('LANG_HELP_URL_COM_USERS',               'https://docs.instantcms.ru/en/manual/components/users');\n    define('LANG_HELP_URL_COM_MODERATION',          'https://docs.instantcms.ru/en/manual/components/moderation');\n    define('LANG_HELP_URL_COM_USERS_MIGRATON',      'https://docs.instantcms.ru/en/manual/components/users/migrations');\n    define('LANG_HELP_URL_COM_MARKITUP',            'https://docs.instantcms.ru/en/manual/components/markitup');\n    define('LANG_HELP_URL_COM_RATING',              'https://docs.instantcms.ru/en/manual/components/rating');\n    define('LANG_HELP_URL_COM_SEARCH',              'https://docs.instantcms.ru/en/manual/components/search');\n    define('LANG_HELP_URL_COM_TAGS',                'https://docs.instantcms.ru/en/manual/components/tags');\n    define('LANG_HELP_URL_COM_RSS',                 'https://docs.instantcms.ru/en/manual/components/rss');\n    define('LANG_HELP_URL_COM_SITEMAP',             'https://docs.instantcms.ru/en/manual/components/sitemap');\n    define('LANG_HELP_URL_COM_PHOTOS',\t\t\t\t'https://docs.instantcms.ru/en/manual/components/photos');\n    define('LANG_HELP_URL_USERS',                   'https://docs.instantcms.ru/en/manual/users');\n    define('LANG_HELP_URL_USERS_USER',              'https://docs.instantcms.ru/en/manual/users/user');\n    define('LANG_HELP_URL_USERS_GROUP',             'https://docs.instantcms.ru/en/manual/users/group');\n    define('LANG_HELP_URL_SETTINGS',                'https://docs.instantcms.ru/en/manual/settings');\n    define('LANG_HELP_URL_SETTINGS_GLOBAL',         'https://docs.instantcms.ru/en/manual/settings/global');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER',      'https://docs.instantcms.ru/en/manual/settings/scheduler');\n    define('LANG_HELP_URL_CHECK_NESTED',            'https://docs.instantcms.ru/en/manual/settings/check_nested');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER_TASK', 'https://docs.instantcms.ru/en/manual/settings/scheduler/task');\n    define('LANG_HELP_URL_EVENTS',                  'https://docs.instantcms.ru/en/manual/settings/events');\n    define('LANG_HELP_URL_COM_MESSAGES',                'https://docs.instantcms.ru/en/manual/components/messages');\n    define('LANG_ZIP_ERROR_10', 'File already exists');\n    define('LANG_ZIP_ERROR_21', 'Inconsistent ZIP-archive');\n    define('LANG_ZIP_ERROR_18', 'Invalid argument');\n    define('LANG_ZIP_ERROR_14', 'Malloc failure');\n    define('LANG_ZIP_ERROR_9', 'No such file');\n    define('LANG_ZIP_ERROR_19', 'Not a zip archive');\n    define('LANG_ZIP_ERROR_11', 'Unable to open the file');\n    define('LANG_ZIP_ERROR_5', 'Read error');\n    define('LANG_ZIP_ERROR_4', 'Seek error');\n    define('LANG_INSTALL_NOTICE_SYSTEM_FILE', 'Attention! Package replaces some CMS system files. It is not recommended to continue the installation package if you are unsure of the developer.');\n    define('LANG_ADMIN_NOTICES', 'Notifications');\n    define('LANG_ADMIN_ACCESS_DENIED_BY_IP', 'Access from your ip address is restricted');\n    define('LANG_MAILCHECK_ERROR', 'When sending a letter error occurred: <br><b>%s</b>');\n    define('LANG_MAILCHECK_SUCCESS', 'A letter has been sent successfully');\n    define('LANG_MAILCHECK_MENU', 'Check mail settings');\n    define('LANG_CP_DB_CHARSET_HINT', 'Attention! Before changing this option, please backup your database!');\n    define('LANG_MAILCHECK_TO', 'Send message to');\n    define('LANG_MAILCHECK_SUBJECT', 'Message subject');\n    define('LANG_MAILCHECK_BODY', 'Message contents');\n    define('LANG_EVENTS_MANAGEMENT', 'Events management');\n    define('LANG_EVENTS_MANAGEMENT_HINT', 'Attention! This section is for advanced users. Use only if you know exactly what you are doing.');\n    define('LANG_EVENTS_REFRESH',    'Update events in the database');\n    define('LANG_EVENTS_DELETED',    'These events are no longer available');\n    define('LANG_EVENTS_LISTENER',   'Component');\n    define('LANG_EVENTS_EVENT_NAME', 'Event');\n    define('LANG_EVENTS_ALLOW_NEW',  'Available new events');\n    define('LANG_EVENTS_SUCCESS',  'Events in the database are updated');\n    define('LANG_CONFIRM_LOGIN',  'Security Check');\n    define('LANG_CONFIRM_LOGIN_HINT',  'You are trying to log in under the name of \"%s\" from an unusual location');\n    define('LANG_CONFIRM_LOGIN_HINT1',  'In order to confirm ownership of the accaunt, we ask you to enter the password');\n    define('LANG_ADMIN_IS_DELETED', 'Deleted?');\n    define('LANG_ADMIN_CONTROLLER_SLUG', 'Controller Url');\n    define('LANG_CP_QUEUE', 'Queue');\n    define('LANG_CP_QUEUE_TITLE', '%s queue');\n    define('LANG_CP_QUEUE_DATE_CREATED', 'Date Created');\n    define('LANG_CP_QUEUE_DATE_STARTED', 'Run Date');\n    define('LANG_CP_QUEUE_STATUS', 'Status');\n    define('LANG_CP_QUEUE_QUEUE_RESTART', 'Error corrected, returned to the queue');\n    define('LANG_CP_QUEUE_STATUS1', 'In progress');\n    define('LANG_CP_QUEUE_STATUS2', 'Blocked with error');\n    define('LANG_CP_QUEUE_STATUS3', 'Pending');\n    define('LANG_CP_QUEUE_STATUS4', 'Waiting for 2nd time');\n    define('LANG_CP_SUBJECT', 'Subject');\n    define('LANG_CP_FIELD_AUTHOR_ACCESS', 'Author or owner access');\n    define('LANG_CP_FIELD_READING',       'Reading');\n    define('LANG_CP_FIELD_EDITING',       'Editing');\n    define('LANG_WD_CONTENT_FILTER_DETECT', 'Autodetect');\n    define('LANG_CP_TEMPLATE_NO_ICONS_SELECT', 'The template does not support icon selection.');\n    define('LANG_CP_TEMPLATE_ICONS_PHP', 'Copy as PHP code');\n    define('LANG_CP_TEMPLATE_ICONS', 'List of template icons');\n    define('LANG_CP_COMPILE_TIME', 'Compile time %s sec.');\n    define('LANG_CP_FORMAT', 'Format');\n", "<?php\n\n    define('LANG_ADMIN_CONTROLLER',     '\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_NEVER',                      '\u041d\u0438\u043a\u043e\u0433\u0434\u0430');\n    define('LANG_CP_INSTALL_FOLDER_EXISTS',     '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 <b>/install</b> \u043d\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0430.');\n    define('LANG_CP_TOOLTIP_HELP',              '\u041f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043a \u0440\u0430\u0437\u0434\u0435\u043b\u0443');\n    define('LANG_CP_TOOLTIP_HELP_HINT',         '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_DASHBOARD_STATS',           '\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430');\n    define('LANG_CP_DASHBOARD_SYSINFO',         '\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0435');\n    define('LANG_CP_DASHBOARD_RESOURCES',       '\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b');\n    define('LANG_CP_DASHBOARD_NEWS',            '\u041d\u043e\u0432\u043e\u0441\u0442\u0438 InstantCMS');\n    define('LANG_CP_DASHBOARD_NEWS_O',          '\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_DASHBOARD_NEWS_A',          '\u0411\u043b\u043e\u0433\u0438');\n    define('LANG_CP_PAGE_OPTIONS',              '\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_SU',                        '\u0421\u0438\u0441\u0442\u0435\u043c\u0430');\n    define('LANG_CP_SU_DISK',                   '\u041c\u0435\u0441\u0442\u043e \u043d\u0430 \u0434\u0438\u0441\u043a\u0435');\n    define('LANG_CP_SU_CPU',                    '\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430');\n    define('LANG_CP_CACHE',                     '\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_WO_AUTO_GROUP',             '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_WO_AUTO_GROUP_HINT',        '\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0445 \u0433\u0440\u0443\u043f\u043f \u0432\u0438\u0434\u0436\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0433\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_DASHBOARD_SI_ICMS',         '\u0412\u0435\u0440\u0441\u0438\u044f InstantCMS');\n    define('LANG_CP_DASHBOARD_SI_WS',           '\u0412\u0435\u0431 \u0441\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_DASHBOARD_SQL_SERVER',      'Mysql \u0441\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_DASHBOARD_APACHE_NGINX',    '\u0434\u0432\u0443\u0445\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f, \u0432\u0435\u0440\u0441\u0438\u044f Nginx - %s');\n    define('LANG_CP_DASHBOARD_SI_PHP',          '\u0412\u0435\u0440\u0441\u0438\u044f PHP');\n    define('LANG_CP_DASHBOARD_SI_ML',           '\u041b\u0438\u043c\u0438\u0442 \u043f\u0430\u043c\u044f\u0442\u0438');\n    define('LANG_CP_DASHBOARD_SI_IP',           'IP \u0430\u0434\u0440\u0435\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430');\n    define('LANG_CP_DASHBOARD_SI_ROOT',         '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_DASHBOARD_SI_SESSION_TYPE', '\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_DASHBOARD_SI_SESSION',      '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_DASHBOARD_SI_MAX',          '\u041c\u0430\u043a\u0441. \u0440\u0430\u0437\u043c\u0435\u0440 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438');\n    define('LANG_CP_DASHBOARD_SI_ION',          '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d IonCube Loader');\n    define('LANG_CP_DASHBOARD_SI_ZEND',         '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d Zend OPcache');\n    define('LANG_CP_DASHBOARD_SI_ZENDG',        '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d Zend Guard Loader');\n\n    define('LANG_CP_DASHBOARD_LEAD_SPONSOR',    '\u0413\u0435\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u043e\u043d\u0441\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430');\n\n    define('LANG_CP_DASHBOARD_LINKS_SITE',      '\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430');\n    define('LANG_CP_DASHBOARD_LINKS_DOCS',      '\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f');\n    define('LANG_CP_DASHBOARD_LINKS_ADDONS',    '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_DASHBOARD_LINKS_FORUMS',    '\u0424\u043e\u0440\u0443\u043c\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430');\n\n    define('LANG_CP_DASHBOARD_PREMIUM',         '\u041f\u0440\u0435\u043c\u0438\u0443\u043c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b');\n    define('LANG_CP_DASHBOARD_BILLING',         '\u0411\u0438\u043b\u043b\u0438\u043d\u0433');\n    define('LANG_CP_DASHBOARD_BILLING_HINT',    '\u0417\u0430\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_DASHBOARD_INVIDEO_HINT',    '\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434\u0435\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_DASHBOARD_INMAPS_HINT',     '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435');\n\n    define('LANG_CP_DASHBOARD_LINKS_DONATE',    '\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442');\n    define('LANG_CP_DASHBOARD_LINKS_SPONSORS',  '\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0441\u043f\u043e\u043d\u0441\u043e\u0440\u043e\u0432');\n\n    define('LANG_CP_SECTION_INDEX',             '\u0413\u043b\u0430\u0432\u043d\u0430\u044f');\n    define('LANG_CP_SECTION_CTYPES',            '\u0422\u0438\u043f\u044b \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_SECTION_CONTENT',           '\u041a\u043e\u043d\u0442\u0435\u043d\u0442');\n    define('LANG_CP_SECTION_USERS',             '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438');\n    define('LANG_CP_SECTION_GROUPS',            '\u0413\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_SECTION_MENU',              '\u041c\u0435\u043d\u044e');\n    define('LANG_CP_SECTION_WIDGETS',           '\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_SECTION_CONTROLLERS',       '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b');\n    define('LANG_CP_SECTION_SETTINGS',          '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_SECTION_UPDATE',            '\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f');\n\n    define('LANG_CP_SELECTED_EDIT',             '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c');\n    define('LANG_CP_SELECTED_DELETE',           '\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n\n    define('LANG_CP_CTYPES_ADD',                '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPES_EDIT',               '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_CREATED',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_CTYPE_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \"{title}\"?');\n    define('LANG_CP_CTYPE_ERROR_NAME',          '\u041d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u043c\u0435\u043d\u0435\u043c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_TO_LIST',             '\u041a \u0441\u043f\u0438\u0441\u043a\u0443 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CTYPE_NOT_SET',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d');\n\n    define('LANG_CP_CTYPE_SETTINGS',            '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_CTYPE_LABELS',              '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438');\n    define('LANG_CP_CTYPE_FIELDS',              '\u041f\u043e\u043b\u044f');\n    define('LANG_CP_CTYPE_PROPS',               '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430');\n    define('LANG_CP_CTYPE_PERMISSIONS',         '\u0414\u043e\u0441\u0442\u0443\u043f');\n    define('LANG_CP_CTYPE_DATASETS',            '\u041d\u0430\u0431\u043e\u0440\u044b');\n    define('LANG_CP_CTYPE_FILTERS',             '\u0424\u0438\u043b\u044c\u0442\u0440\u044b');\n    define('LANG_CP_CTYPE_DATASET',             '\u041d\u0430\u0431\u043e\u0440');\n\n    define('LANG_CP_GRID_COLYMNS_SYSTEM',       '\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435');\n    define('LANG_CP_GRID_COLYMNS_USER',         '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_FILTER',       '\u0424\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_GRID_COLYMNS_DISPLAY',      '\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_EXACT',        '\u0422\u043e\u0447\u043d\u043e\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435');\n    define('LANG_CP_GRID_COLYMNS_LIKE',         '\u0412\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0432 \u0441\u0442\u0440\u043e\u043a\u0443');\n    define('LANG_CP_GRID_COLYMNS_DATE',         '\u0414\u0430\u0442\u0430');\n    define('LANG_CP_GRID_COLYMNS_SELECT',       '\u0421\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_GRID_COLYMNS_FLAG',         '\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u044c');\n    define('LANG_CP_GRID_COLYMNS_CUT_TEXT',     '\u041f\u0435\u0440\u0432\u044b\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432');\n    define('LANG_CP_GRID_COLYMNS_IMAGES_NMB',   '\u041a\u043e\u043b-\u0432\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439');\n    define('LANG_CP_GRID_COLYMNS_PREVIEW',      '\u041f\u0440\u0435\u0432\u044c\u044e');\n    define('LANG_CP_GRID_COLYMNS_TO_FILTER',    '\u041f\u043e\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440');\n\n    define('LANG_CP_SYSTEM_NAME_HINT',          '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 URL \u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445<br>\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f!');\n\n    define('LANG_CP_CONTENT_ITEM_ADD',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c');\n    define('LANG_CP_CONTENT_ITEM_ADD_CP',       '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u0430\u0434\u043c\u0438\u043d\u043a\u0438');\n    define('LANG_CP_CONTENT_ITEMS_EDIT',        '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CONTENT_FIELDS_IS_ADD',     '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S1',     '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_S2',     '\u042d\u0442\u0438\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u044b \u043f\u043e\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_CONTENT_ITEMS_EDIT_ADD_HINT', '<span class=\"text-danger\">\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u043a\u043e\u043d\u0435\u0446 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e</span>');\n    define('LANG_CP_CONTENT_CATS_ADD',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CONTENT_CATS_EDIT',         '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e');\n    define('LANG_CP_CONTENT_CATS_ORDER',        '\u041f\u043e\u0440\u044f\u0434\u043e\u043a');\n    define('LANG_CP_CONTENT_CATS_ORDER_DRAG',   '\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043c\u044b\u0448\u044c\u044e \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\"');\n    define('LANG_CP_CONTENT_CATS_NONE',         '\u0414\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_TRASH',                     '\u041a\u043e\u0440\u0437\u0438\u043d\u0430');\n    define('LANG_CP_SHOW_ONLY_IN_TRASH',        '\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b');\n    define('LANG_CP_CONTENT_ITEM_RESTORE_CONFIRM',  '\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_DELETE_CONFIRM',  '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\"?');\n    define('LANG_CP_CONTENT_ITEM_BASKET_DELETE_CONFIRM',  '\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \"{title}\" \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443?');\n    define('LANG_CP_CONTENT_CATS_TITLES',       '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0438\u043b\u0438 \u0434\u0435\u0440\u0435\u0432\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CONTENT_CATS_TITLES_HINT',  '\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u0440\u0430\u0437\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043a\u0430\u0436\u0434\u0430\u044f \u0438\u0437 \u043d\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0430 \u043d\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435.<br>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0435\u0442\u0441\u044f \u0437\u043d\u0430\u043a\u043e\u043c \u0434\u0435\u0444\u0438\u0441 \u043f\u0435\u0440\u0435\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438<br><a href=\"https://docs.instantcms.ru/manual/content/cats\" target=\"_blank\">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f</a>');\n    define('LANG_CP_CONTENT_CATS_BIND',         '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n\n    define('LANG_CP_BASIC',                     '\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438');\n    define('LANG_CP_IS_COLLAPSED',              '\u0421\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u0432 \u0444\u043e\u0440\u043c\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f/\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_PUBLICATION',               '\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f');\n    define('LANG_CP_IS_PUB_CONTROL',            '\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0440\u043e\u043a\u043e\u043c \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438');\n    define('LANG_CP_DISABLE_DRAFTS',            '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0438');\n    define('LANG_CP_IS_PUB_CONTROL_HINT',\t\t'\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443 \u0438 \u0441\u0440\u043e\u043a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u044d\u0442\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \"\u0414\u043e\u0441\u0442\u0443\u043f\"');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS',    '\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0441\u0440\u043e\u043a\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438');\n    define('LANG_CP_NOTIFY_END_DATE_DAYS',      '\u0417\u0430 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439 \u0434\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_HIDE','\u0421\u043a\u0440\u044b\u0442\u044c');\n    define('LANG_CP_IS_PUB_CONTROL_PROCESS_DEL','\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n    define('LANG_CP_CATEGORIES_ON',             '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATEGORIES_RECURSIVE',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0432\u043d\u0443\u0442\u0440\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n\tdefine('LANG_CP_CATEGORIES_EMPTY_ROOT',\t\t'\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATEGORIES_MULTI',\t\t\t'\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CATEGORIES_CHANGE',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_CATEGORIES_OPEN_ROOT',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e');\n    define('LANG_CP_CATEGORIES_ONLY_LAST',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CP_CATEGORIES_SHOW',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0430\u0434 \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_CTYPE_CATEGORIES_OFF',      '\u0414\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043f\u043e\u043a\u0430\u0437 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d \u0432 <a href=\"%s\">\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445</a>. \u041e\u043d\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_FOLDERS',                   '\u041b\u0438\u0447\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438');\n    define('LANG_CP_FOLDERS_ON',                '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438');\n    define('LANG_CP_FOLDERS_HINT',              '\u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043f\u043e \u043b\u0438\u0447\u043d\u044b\u043c \u043f\u0430\u043f\u043a\u0430\u043c, \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u043c \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_CT_GROUPS',                 '\u0421\u0432\u044f\u0437\u044c \u0441 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438');\n    define('LANG_CP_CT_GROUPS_ALLOW',           '\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445');\n    define('LANG_CP_CT_GROUPS_ALLOW_ONLY',      '\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445');\n    define('LANG_CP_COMMENTS',                  '\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438');\n    define('LANG_CP_COMMENTS_REPLACE_LABEL',    '\u0417\u0430\u043c\u0435\u043d\u0430 \u0444\u0440\u0430\u0437\u044b \u0434\u043b\u044f ');\n    define('LANG_CP_COMMENTS_TITLE_PATTERN',    '\u041f\u0430\u0442\u0442\u0435\u0440\u043d \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0431\u043b\u043e\u043a\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432');\n    define('LANG_CP_COMMENTS_TEMPLATE',         '\u0428\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432');\n    define('LANG_CP_COMMENTS_ON',               '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438');\n    define('LANG_CP_RATING',                    '\u0420\u0435\u0439\u0442\u0438\u043d\u0433');\n    define('LANG_CP_RATING_ON',                 '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0439\u0442\u0438\u043d\u0433');\n    define('LANG_CP_TAGS_ON',                   '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u0433\u0438');\n    define('LANG_CP_TAGS_IN_LIST',              '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u0433\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_TAGS_IN_ITEM',              '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u0433\u0438 \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_PHOTOS',                    '\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f');\n    define('LANG_CP_PHOTOS_ON',                 '\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_PHOTOS_MULTI',              '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f');\n    define('LANG_CP_SEOMETA_DEFAULT',           'SEO \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SEOMETA',                   'SEO \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_SEOMETA_MANUAL_TITLE',      '\u0412\u0440\u0443\u0447\u043d\u0443\u044e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u0439\u0442\u043b \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_SEOMETA_AUTO_KEYS',         '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432');\n    define('LANG_CP_SEOMETA_AUTO_DESC',         '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439');\n    define('LANG_CP_SEOMETA_ITEM_TITLE',        '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u0430\u0439\u0442\u043b\u043e\u0432 \u0441\u0442\u0440\u0430\u043d\u0438\u0446');\n    define('LANG_CP_SEOMETA_ITEM_KEYS',         '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432');\n    define('LANG_CP_SEOMETA_ITEM_DESC',         '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439');\n    define('LANG_CP_SEOMETA_ITEM_H1',           '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u0433\u0430 h1');\n    // deprecated\n    define('LANG_CP_SEOMETA_FIELDS',            ' <span class=\"pattern_fields_panel_hint\">\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u043b\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.</span><span class=\"pattern_fields_panel\">\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f: <b class=\"pattern_fields\">%s</b> \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>.</span>');\n    define('LANG_CP_SEOMETA_ITEM_DS',           '\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430.'.LANG_CP_SEOMETA_FIELDS);\n    define('LANG_CP_SEOMETA_ITEM_HINT',         '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u043e\u043b\u044f, \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0438\u0445 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0438\u0433\u0443\u0440\u043d\u044b\u0445 \u0441\u043a\u043e\u0431\u043a\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430: <strong>{title}</strong>, <strong>{category}</strong> (\u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430) \u0438 \u0442.\u043f. \u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439, \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>');\n    //\n    define('LANG_CP_SEOMETA_DS_HINT',           '\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430.');\n    define('LANG_CP_SEOMETA_HINT_PANEL',        '\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u043b\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN_DOC',  '\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0432 <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/settings/seo-patterns\">\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438</a>.');\n    define('LANG_CP_SEOMETA_HINT_PATTERN',      '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f: <b class=\"pattern_fields\">%s</b> ');\n    define('LANG_CP_AUTO_URL',                  '\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c URL \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438');\n    define('LANG_CP_CAT_COVER_SIZES',           '\u041f\u0440\u0435\u0441\u0435\u0442\u044b \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CAT_CONTEXT_LIST_COVER_SIZES', '\u041f\u0440\u0435\u0441\u0435\u0442 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u0434\u043b\u044f \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_FIXED_URL',                 '\u041d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c URL \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_URL_PATTERN',               '\u0428\u0430\u0431\u043b\u043e\u043d \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 URL');\n    define('LANG_CP_SEOMETA_CATS',              'SEO \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_H1',           '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u0442\u0435\u0433\u0430 H1 \u0434\u043b\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_TITLE',        '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u0442\u0430\u0439\u0442\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_KEYS',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_SEOMETA_CATS_DESC',         '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0432\u043e\u0434 META-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_CATS_AUTO_URL',             '\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c URL \u0438\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_CATS_FIRST_LEVEL_SLUG',     'URL \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CP_LISTVIEW_OPTIONS',          '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_PROFILELIST_ON',            '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044f\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_LISTVIEW_ON',               '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_LISTVIEW_OFF_INDEX',        '\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LISTVIEW_OFF_INDEX_HINT',   '\u0421\u043f\u0438\u0441\u043e\u043a \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n    define('LANG_CP_LIST_OFF_BREADCRUMB',       '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0445\u043b\u0435\u0431\u043d\u044b\u0435 \u043a\u0440\u043e\u0448\u043a\u0438');\n    define('LANG_CP_LIST_OFF_BREADCRUMB_CTYPE', '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0445\u043b\u0435\u0431\u043d\u044b\u0445 \u043a\u0440\u043e\u0448\u043a\u0430\u0445 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LISTVIEW_FILTER',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_LISTVIEW_FILTER_EXPAND',    '\u0420\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430');\n    define('LANG_CP_LISTVIEW_STYLE',            '\u0421\u0442\u0438\u043b\u044c \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_LIST_STYLE_NAMES',          '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0441\u0442\u0438\u043b\u0435\u0439 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_LIST_STYLE_OPTIONS',        '\u041e\u043f\u0446\u0438\u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_LIST_STYLE_OPTIONS_HINT',   '\u0415\u0441\u043b\u0438 \u0448\u0430\u0431\u043b\u043e\u043d \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442. \u0412 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JSON. \u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043f\u0446\u0438\u0439 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430.');\n    define('LANG_CP_CONTEXT_LIST_STYLE',        '\u0421\u0442\u0438\u043b\u0438 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_CONTEXT_SELECT_LIST',       '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_LISTVIEW_STYLE_HINT',       '\u041f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u044b \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0438\u0437 \u043f\u0430\u043f\u043a\u0438 <b>/'.cmsTemplate::TEMPLATE_BASE_PATH.'%s/content</b>. \u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c.');\n    define('LANG_CP_LISTVIEW_STYLE_SLIDER',     '\u0421\u043b\u0430\u0439\u0434\u0435\u0440');\n    define('LANG_CP_LISTVIEW_STYLE_BASIC',      '\u041e\u0431\u044b\u0447\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_MASONRY',    '\u041a\u0438\u0440\u043f\u0438\u0447\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_FEATURED',   '\u0416\u0443\u0440\u043d\u0430\u043b\u044c\u043d\u044b\u0439');\n    define('LANG_CP_LISTVIEW_STYLE_TILES',      '\u041f\u043b\u0438\u0442\u043a\u0430');\n    define('LANG_CP_LISTVIEW_STYLE_TABLE',      '\u0422\u0430\u0431\u043b\u0438\u0446\u0430');\n    define('LANG_CP_PRIVACY_TYPE',              '\u041a\u0430\u043a \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_PRIVACY_TYPE_HIDE',         '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_TITLE',   '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_PRIVACY_TYPE_SHOW_ALL',     '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e');\n\n    define('LANG_CP_ITEMVIEW_OPTIONS',          '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_ITEMVIEW_ON',               '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_ITEMVIEW_FIELDS_GROUP',     '\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f');\n    define('LANG_CP_ITEMVIEW_HITS_ON',\t\t\t'\u0421\u0447\u0438\u0442\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432');\n    define('LANG_CP_ITEMVIEW_HITS_GROUPS_VIEW', '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432');\n    define('LANG_CP_ITEMVIEW_OFF_INFO_BLOCK',\t'\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e-\u0431\u043b\u043e\u043a');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML',      '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c HTML \u0432 \u043a\u043e\u043d\u0446\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_ITEMVIEW_APPEND_HTML_HINT', '\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u0437\u0434\u0435\u0441\u044c HTML \u043a\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u0434 \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u044c\u044e');\n    define('LANG_CP_ITEMVIEW_SHARE_CODE',       'HTML \u043a\u043e\u0434 \u0434\u043b\u044f \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a');\n\n    define('LANG_CP_NUMERALS_LABELS',           '\u0427\u0438\u0441\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_NUMERALS_1_LABEL',          '\u041e\u0434\u0438\u043d / \u043e\u0434\u043d\u0430 / \u043e\u0434\u043d\u043e (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_LABEL',          '\u0414\u0432\u0430 / \u0434\u0432\u0435 (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_LABEL',         '\u041c\u043d\u043e\u0433\u043e (\u0418\u043c\u0435\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_1_ALABEL',         '\u041e\u0434\u043d\u043e\u0433\u043e / \u043e\u0434\u043d\u0443 / \u043e\u0434\u043d\u043e (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_ALABEL',         '\u0414\u0432\u0430 / \u0434\u0432\u0435 (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_ALABEL',        '\u041c\u043d\u043e\u0433\u043e (\u0412\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_1_GLABEL',         '\u041e\u0434\u043d\u043e\u0433\u043e / \u043e\u0434\u043d\u043e\u0439 (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_2_GLABEL',         '\u0414\u0432\u0443\u0445 / \u0434\u0432\u043e\u0438\u0445 (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_NUMERALS_10_GLABEL',        '\u041c\u043d\u043e\u0433\u043e (\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439)');\n    define('LANG_CP_ACTIONS_LABELS',            '\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_ACTION_ADD_LABEL',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c (...)');\n    define('LANG_CP_LIST_LABELS',               '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_LIST_LABEL',                '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_PROFILE_LABEL',             '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_LIST_LABELS_HINT',          '\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE',    '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u0432\u044f\u0437\u0435\u0439');\n    define('LANG_CP_LIST_LABELS_RTAB_TITLE_HINT', '\u0415\u0441\u043b\u0438 \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c');\n\n    define('LANG_CP_TAB',                       '\u0412\u043a\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_TAB_TITLE',                 '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_TAB_IS_ACTIVE',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443');\n    define('LANG_CP_TAB_SHOW_ONLY_OWNER',       '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043f\u0440\u043e\u0444\u0438\u043b\u044f');\n\n    define('LANG_CP_FIELD',                     '\u041f\u043e\u043b\u0435');\n    define('LANG_CP_FIELD_FORMAT',              '\u0424\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_REGEX',               '\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_REGEX_TEXT',          '\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_REGEX_TEXT_HINT',     '\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u043c\u0443 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044e \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f.');\n    define('LANG_CP_FIELD_TYPE',                '\u0422\u0438\u043f \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_TYPE_HINT',           '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b!');\n    define('LANG_CP_FIELD_TYPE_OPTS',           '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_VALUES',              '\u041f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_PROFILE_VALUE',       '\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_FIELD_PROFILE_VALUE_HINT',  '\u041f\u043e\u043b\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f<br/>\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439 \u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u0432');\n    define('LANG_CP_FIELD_TITLE',               '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_FIELDSET',            '\u0413\u0440\u0443\u043f\u043f\u0430');\n    define('LANG_CP_FIELD_FIELDSET_SELECT',     '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_FIELD_FIELDSET_ADD',        '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_FIELD_FIELDSET_ADD_HINT',   '\u0414\u043b\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u044f\u0437\u044b\u043a\u0430 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_FIELD_HINT',                '\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430 \u0434\u043b\u044f \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_ADD',                 '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u0435');\n    define('LANG_CP_FIELD_CREATED',             '\u041f\u043e\u043b\u0435 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u043e');\n    define('LANG_CP_FIELD_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u0435 \"{title}\"?');\n    define('LANG_CP_FIELD_VISIBILITY',          '\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_LABELS',              '\u041f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432');\n    define('LANG_CP_FIELD_LABELS_IN_LIST',      '\u041f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_FIELD_LABELS_IN_ITEM',      '\u041f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_LABELS_IN_FORM',      '\u0412 \u0444\u043e\u0440\u043c\u0435');\n    define('LANG_CP_FIELD_LABEL_NONE',          '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_LABEL_LEFT',          '\u0421\u043b\u0435\u0432\u0430');\n    define('LANG_CP_FIELD_LABEL_TOP',           '\u0421\u0432\u0435\u0440\u0445\u0443');\n    define('LANG_CP_FIELD_IN_LIST',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_FIELD_IN_LIST_CONTEXT',     '\u0414\u043b\u044f \u043a\u0430\u043a\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_NOT_IN_LIST_CONTEXT', '\u0414\u043b\u044f \u043a\u0430\u043a\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c');\n    define('LANG_CP_FIELD_IN_ITEM',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS',         '\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0432 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS_HINT',    '\u0415\u0441\u043b\u0438 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u044f \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0436\u0435\u0442\u0435, \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0432\u0438\u0434\u0436\u0435\u0442 \"\u041f\u043e\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430\" \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0435\u0433\u043e.');\n    define('LANG_CP_FIELD_IN_ITEM_POS0',        '\u0412 \u0442\u0435\u043b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_ITEM_POS1',        '\u041d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0436\u0435\u0442\u0435');\n    define('LANG_CP_FIELD_IN_PROFILE',          '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435');\n    define('LANG_CP_FIELD_IN_LIST_SHORT',       '\u0412 \u0441\u043f\u0438\u0441\u043a\u0435');\n    define('LANG_CP_FIELD_IN_ITEM_SHORT',       '\u0412 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_IN_FILTER',           '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435');\n    define('LANG_CP_FIELD_IN_RELATION',         '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0441\u0432\u044f\u0437\u0438');\n    define('LANG_CP_FIELD_PRIVACY',             '\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c');\n    define('LANG_CP_FIELD_PRIVATE',             '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0443 \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_FIELD_GROUPS_READ',         '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_GROUPS_EDIT',         '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_GROUPS_ADD',          '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f');\n    define('LANG_CP_FIELD_WRAP',               '\u041e\u0431\u0442\u0435\u043a\u0430\u043d\u0438\u0435 \u0438 CSS');\n    define('LANG_CP_FIELD_WRAP_TYPE',          '\u0422\u0438\u043f');\n    define('LANG_CP_FIELD_WRAP_LTYPE',         '\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0441\u043f\u0440\u0430\u0432\u0430 \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e');\n    define('LANG_CP_FIELD_WRAP_RTYPE',         '\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0441\u043b\u0435\u0432\u0430 \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e');\n    define('LANG_CP_FIELD_WRAP_NTYPE',         '\u041d\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043e\u0431\u0442\u0435\u043a\u0430\u043d\u0438\u0438');\n    define('LANG_CP_FIELD_WRAP_ATYPE',         '\u0410\u0432\u0442\u043e');\n    define('LANG_CP_FIELD_WRAP_WIDTH',         '\u0428\u0438\u0440\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_WRAP_WIDTH_HINT',    '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e - \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0448\u0438\u0440\u0438\u043d\u0430. \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0435\u0434\u0438\u043d\u0438\u0446\u0435\u0439 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 200px, 60% \u0438 \u0442.\u043f.');\n    define('LANG_CP_FIELD_WRAP_STYLE',         'CSS \u043a\u043b\u0430\u0441\u0441 \u043e\u0431\u0451\u0440\u0442\u043a\u0438 \u043f\u043e\u043b\u044f');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND',      '\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430 \u043f\u043e\u043b\u044f \u0432 \u0444\u043e\u0440\u043c\u0435');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HINT', '\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e.');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_F',    '\u041f\u043e\u043b\u0435, \u043e\u0442 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u0442');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_SHOW', '\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0435\u0441\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e');\n    define('LANG_CP_FIELD_VISIBLE_DEPEND_HIDE', '\u0421\u043a\u0440\u044b\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043f\u043e\u043b\u0435 \u0435\u0441\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e');\n    define('LANG_CP_PROPS_NO_CATS',             '\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 &laquo;%s&raquo; \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439.');\n    define('LANG_CP_PROPS_NO_CATS_ADD',         '<a href=\"%s\">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438</a> \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430.');\n    define('LANG_CP_PROPS_ADD',                 '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_DELETE_CONFIRM',      '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \"{title}\"?\\n\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0438\u0437 \u0432\u0441\u0435\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439');\n    define('LANG_CP_PROPS_UNBIND_CONFIRM',      '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \"{title}\" \u043e\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438?');\n    define('LANG_CP_PROPS_BIND',                '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_BIND_SC',             '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043e');\n    define('LANG_CP_PROPS_BIND_RECURSIVE',      '\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_PROPS_UNBIND',              '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e');\n    define('LANG_CP_PROPS_UNBIND_SC',           '\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0432\u044f\u0437\u0430\u043d\u043e');\n    define('LANG_CP_PROP_TITLE',                '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430');\n    define('LANG_CP_PROP_IS_ACTIVE',            '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_PROP_VALUES',               '\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_PROP_VALUES_HINT',          '\u041e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435');\n    define('LANG_CP_PROP_CATS',                 '\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c');\n    define('LANG_CP_PROP_UNITS',                '\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FILTER_ADD',                '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_FILTER_NO_TABLE',           '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b, <a href=\"%s\">\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0438\u0445</a>.');\n    define('LANG_CP_FILTER_TABLE_SUCCESS',      '\u041c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_FILTER_DELETE_CONFIRM',     '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \"{title}\"?');\n    define('LANG_CP_FILTER_ERROR_SLUG',         '\u0415\u0441\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u0436\u0435 URI, \u0437\u0430\u0434\u0430\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0435');\n    define('LANG_CP_FILTER_DESC_HINT',          '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_FILTER_FIELDS',             '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043f\u043e\u043b\u0435\u0439');\n    define('LANG_CP_FILTER_PROPS',              '\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0441\u0432\u043e\u0439\u0441\u0442\u0432');\n    define('LANG_CP_FILTER_CATS',               '\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438, \u0433\u0434\u0435 \u0444\u0438\u043b\u044c\u0442\u0440 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d');\n\n    define('LANG_CP_DATASET',                   '\u041d\u0430\u0431\u043e\u0440');\n    define('LANG_CP_DATASET_ADD',               '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0430\u0431\u043e\u0440');\n    define('LANG_CP_DATASET_TITLE',             '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0431\u043e\u0440\u0430');\n    define('LANG_CP_DATASET_CREATED',           '\u041d\u0430\u0431\u043e\u0440 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_DATASET_DELETE_CONFIRM',    '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0431\u043e\u0440 \"{title}\"?');\n    define('LANG_CP_DATASET_IS_VISIBLE',        '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0431\u043e\u0440 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n\n    define('LANG_CP_CATS_VIEW',        '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n    define('LANG_CP_CATS_HIDE',        '\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445');\n\n    define('LANG_CP_CTYPE_RELATIONS',           '\u0421\u0432\u044f\u0437\u0438');\n    define('LANG_CP_RELATION',                  '\u0421\u0432\u044f\u0437\u044c');\n    define('LANG_CP_RELATION_ADD',              '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c');\n    define('LANG_CP_RELATION_TITLE',            '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0432\u044f\u0437\u0438');\n    define('LANG_CP_RELATION_DELETE_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c?');\n    define('LANG_CP_RELATION_LAYOUT',           '\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0432\u0438\u0434');\n    define('LANG_CP_RELATION_LAYOUT_TYPE',      '\u0422\u0438\u043f \u0432\u044b\u0432\u043e\u0434\u0430');\n    define('LANG_CP_RELATION_LAYOUT_LIST',      '\u0421\u043f\u0438\u0441\u043e\u043a');\n    define('LANG_CP_RELATION_LAYOUT_TAB',       '\u0412\u043a\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_RELATION_LAYOUT_HIDDEN',    '\u041d\u0435\u0442 (\u0441\u043a\u0440\u044b\u0442\u044c)');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_EMPTY','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0435\u0441\u043b\u0438 \u043d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_TITLE','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u0438\u0441\u043a\u0430');\n    define('LANG_CP_RELATION_LAYOUT_HIDE_FILTER','\u0421\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT',     '\u0417\u0430\u043f\u0438\u0441\u0435\u0439 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435');\n    define('LANG_CP_RELATION_LAYOUT_LIMIT_HINT','\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430');\n    define('LANG_CP_RELATION_CREATED',          '\u0421\u0432\u044f\u0437\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_RELATION_FIELD_CREATED',    '\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432 \u0442\u0438\u043f\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \"%s\"');\n    define('LANG_CP_CONTR_RELATION_FIELD_CREATED', '\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435 \"%s\"');\n    define('LANG_CP_RELATION_CHILD',            '\u0414\u043e\u0447\u0435\u0440\u043d\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442');\n    define('LANG_CP_RELATION_TAB_OPTS',         '\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_HINT',     '\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438, \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0438\u0445 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0432 \u0444\u0438\u0433\u0443\u0440\u043d\u044b\u0445 \u0441\u043a\u043e\u0431\u043a\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <strong>{title}</strong>');\n    define('LANG_CP_RELATION_TAB_SEO_TITLE',    '\u0422\u0430\u0439\u0442\u043b \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_KEYS',     '\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_TAB_SEO_DESC',     '\u041c\u0435\u0442\u0430-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_RELATION_ERROR_LEN',        '\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0443 \u0441\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0442\u0438\u043f\u043e\u0432. \u0421\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043c\u0451\u043d \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.');\n    define('LANG_CP_RELATION_LAYOUT_LIST_ERROR', '\u041c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0443 \u0441\u0432\u044f\u0437\u044c \u0441 \u0442\u0438\u043f\u043e\u043c \u0432\u044b\u0432\u043e\u0434\u0430 \"\u0421\u043f\u0438\u0441\u043e\u043a\"');\n\n    define('LANG_CP_MENU',                      '\u041c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ADD',                  '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_EDIT',                 '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_CREATED',              '\u041c\u0435\u043d\u044e &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u043e');\n    define('LANG_CP_MENU_DELETE',               '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_DELETE_CONFIRM',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e?');\n    define('LANG_CP_MENU_ITEM',                 '\u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ITEM_PARENT',          '\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043f\u0443\u043d\u043a\u0442');\n    define('LANG_CP_MENU_ITEM_CREATED',         '\u041f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_MENU_ITEM_TITLE',           '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430');\n    define('LANG_CP_MENU_ITEM_URL',             '\u0421\u0441\u044b\u043b\u043a\u0430');\n    define('LANG_CP_MENU_ITEM_ADD',             '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u043d\u043a\u0442');\n    define('LANG_CP_MENU_ITEM_DELETE_CONFIRM',  '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e \"{title}\"?');\n    define('LANG_CP_MENU_ITEM_ACTION',          '\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0443\u043d\u043a\u0442\u0430 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_MENU_ITEM_ACTION_URL',      '\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_ACTION_URL_HINT', '\u0414\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u044d\u0448 \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f<br/>\u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 http://<br/>\u041c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c <a href=\"https://docs.instantcms.ru/manual/menu/special\" target=\"_blank\">\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438</a>');\n    define('LANG_CP_MENU_ITEM_HIDE_TITLE',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u043a\u043e\u043d\u043a\u0443, \u0431\u0435\u0437 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430');\n    define('LANG_CP_MENU_ITEM_ICON',            '\u0418\u043c\u044f \u0438\u043a\u043e\u043d\u043a\u0438');\n    define('LANG_CP_ICON_SELECT',               '\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u043a\u043e\u043d\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_ACTION_TARGET',   '\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_MENU_ITEM_TARGET_SELF',     '\u0412 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_BLANK',    '\u0412 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_PARENT',   '\u0412 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c \u043e\u043a\u043d\u0435');\n    define('LANG_CP_MENU_ITEM_TARGET_TOP',      '\u041f\u043e\u0432\u0435\u0440\u0445 \u0432\u0441\u0435\u0445 \u0444\u0440\u0435\u0439\u043c\u043e\u0432');\n    define('LANG_CP_MENU_IS_FIXED',             '\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0435 \u043c\u0435\u043d\u044e');\n    define('LANG_CP_WIDGETS_SHOW_ALL',          '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_SKIP_IMPORT',       '\u0412\u0438\u0434\u0436\u0435\u0442 &laquo;%s&raquo; \u043d\u0435 \u0431\u044b\u043b \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d, \u0442.\u043a. \u043e\u043d \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0443 \u0432\u0430\u0441');\n    define('LANG_CP_WIDGETS_ROW_NONE',          '\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_VA',            '\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_VA1',           '\u041f\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u043c\u0443 \u043a\u0440\u0430\u044e');\n    define('LANG_CP_WIDGETS_COL_VA2',           '\u041f\u043e\u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435');\n    define('LANG_CP_WIDGETS_COL_VA3',           '\u041f\u043e \u043d\u0438\u0436\u043d\u0435\u043c\u0443 \u043a\u0440\u0430\u044e');\n    define('LANG_CP_WIDGETS_COL_HA',            '\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_HA1',           '\u0421\u043b\u0435\u0432\u0430 \u043d\u0430\u043f\u0440\u0430\u0432\u043e');\n    define('LANG_CP_WIDGETS_COL_HA3',           '\u0421\u043f\u0440\u0430\u0432\u0430 \u043d\u0430\u043b\u0435\u0432\u043e');\n    define('LANG_CP_WIDGETS_COL_HA4',           '\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u0432\u043e\u043a\u0440\u0443\u0433');\n    define('LANG_CP_WIDGETS_COL_HA5',           '\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e \u043c\u0435\u0436\u0434\u0443');\n    define('LANG_CP_WIDGETS_COL_CLASS',         '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 CSS \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_ROW_CLASS',         '\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 CSS \u043a\u043b\u0430\u0441\u0441 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_ORDER',         '\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439 %s');\n    define('LANG_CP_WIDGETS_COL_D_ORDER',       '\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_WIDGETS_COL_CUT_BEFORE',    '\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u0441\u0442\u0440\u043e\u043a \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u043e\u0439 \u043a\u043e\u043b\u043e\u043d\u043a\u043e\u0439');\n    define('LANG_CP_WIDGETS_COL_WIDTH_D',       '\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_WIDGETS_COL_WIDTH',         '\u0428\u0438\u0440\u0438\u043d\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439 %s');\n    define('LANG_CP_WIDGETS_COL_WIDTH_ALL',     '\u0428\u0438\u0440\u0438\u043d\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0439');\n    define('LANG_CP_WIDGETS_COL_AUTO',          '\u041f\u043e \u0448\u0438\u0440\u0438\u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e');\n    define('LANG_CP_WIDGETS_ADD_COL',           '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0443');\n    define('LANG_CP_WIDGETS_ROWS_TITLE',        '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0440\u044f\u0434\u043e\u0432');\n    define('LANG_CP_WIDGETS_ADD_ROW',           '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u044f\u0434');\n    define('LANG_CP_WIDGETS_IMPORT_SCHEME',     '\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE',       '\u041e\u0442\u043a\u0443\u0434\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c?');\n    define('LANG_CP_WIDGETS_IMPORT_TYPE_EX',    '\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0431\u043b\u043e\u043d');\n    define('LANG_CP_WIDGETS_LFILE',             '\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u0445\u0435\u043c\u044b \u0432 YAML \u0444\u043e\u0440\u043c\u0430\u0442\u0435');\n    define('LANG_CP_WIDGETS_LFILE_HINT',        '\u0415\u0441\u043b\u0438 \u0441\u0445\u0435\u043c\u0430 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e. \u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0443\u044e \u043a\u043e\u043f\u0438\u044e.');\n    define('LANG_CP_WIDGETS_EXPORT_SCHEME',     '\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_FROM_TEMPLATE',     '\u0428\u0430\u0431\u043b\u043e\u043d, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u0443');\n    define('LANG_CP_WIDGETS_COPY_WIDGETS',      '\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_SAVE_WIDGETS',      '\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_EMPTY_LAYOUT',      '\u0412 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0448\u0430\u0431\u043b\u043e\u043d\u0435 \u043d\u0435\u0442 \u0441\u0445\u0435\u043c\u044b');\n    define('LANG_CP_WIDGETS_LAYOUT_ISUCCESS',   '\u0421\u0445\u0435\u043c\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430');\n    define('LANG_CP_WIDGETS_ADD_ROW_P',         '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 \u0440\u044f\u0434');\n    define('LANG_CP_WIDGETS_ROW_NO_GUTTERS',    '\u0411\u0435\u0437 \u043e\u0442\u0441\u0442\u0443\u043f\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043b\u043e\u043d\u043a\u0430\u043c\u0438');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION', '\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u0432\u044b\u0432\u043e\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION1', '\u0412 \u043d\u0430\u0447\u0430\u043b\u0435');\n    define('LANG_CP_WIDGETS_ROW_NESTED_POSITION2', '\u0412 \u043a\u043e\u043d\u0446\u0435');\n    define('LANG_CP_WIDGETS_ROW_CONT',          '\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_TAG',      '\u0422\u0435\u0433 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_CSS',      'CSS \u043a\u043b\u0430\u0441\u0441 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_TAG',           '\u0422\u0435\u0433 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_COL_TAG',           '\u0422\u0435\u0433 \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG',   '\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0442\u0435\u0433 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_PARRENT_TAG_C', 'CSS \u043a\u043b\u0430\u0441\u0441 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0442\u0435\u0433\u0430 \u0440\u044f\u0434\u0430');\n    define('LANG_CP_WIDGETS_ROW_CONT_NO',       '\u0411\u0435\u0437 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430');\n    define('LANG_CP_WIDGETS_ROW_DEL_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u044f\u0434?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_COL_DEL_CONFIRM',   '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0443 (\u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u043a\u0436\u0435 \u0443\u0434\u0430\u043b\u044f\u0442\u0441\u044f)?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_COL_COUNT',         '\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u043e\u043d\u043e\u043a');\n    define('LANG_CP_WIDGETS_COL_NAME',          '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438');\n    define('LANG_CP_WIDGETS_COL_NAME_HINT',     '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0431\u0443\u0434\u0435\u0442 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438. \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u043c.');\n    define('LANG_CP_WIDGETS_COL_TYPE',          '\u041a\u0430\u043a\u0430\u044f \u043a\u043e\u043b\u043e\u043d\u043a\u0430?');\n    define('LANG_CP_WIDGETS_COL_TYPE1',         '\u0422\u0438\u043f\u043e\u0432\u0430\u044f');\n    define('LANG_CP_WIDGETS_COL_TYPE2',         '\u0421\u0432\u043e\u0439 \u0448\u0430\u0431\u043b\u043e\u043d');\n    define('LANG_CP_WIDGETS_COL_WRAPPER',       '\u0428\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043b\u043e\u043d\u043a\u0438');\n    define('LANG_CP_WIDGETS_COL_WRAPPER_H',     '\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 HTML \u0448\u0430\u0431\u043b\u043e\u043d \u043a\u043e\u043b\u043e\u043d\u043a\u0438. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {position} \u0432 \u043c\u0435\u0441\u0442\u0435 \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432 \u044d\u0442\u043e\u0439 \u043f\u043e\u0437\u0438\u0446\u0438\u0438.');\n    define('LANG_CP_WIDGETS_PAGE',              '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430');\n    define('LANG_CP_WIDGETS_PAGES',             '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_WIDGETS_ALL',               '\u0412\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_ADD',               '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442');\n    define('LANG_CP_WIDGETS_ADD_PAGE',          '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_WIDGETS_EDIT_PAGE',         '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c');\n    define('LANG_CP_WIDGETS_DELETE_PAGE',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS', '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_UNBIND_ALL_WIDGETS_CONFIRM', '\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b \u0441 \u043f\u043e\u0437\u0438\u0446\u0438\u0439 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0430?\\n\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u044f\u0442\u0441\u044f \u0432 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435');\n    define('LANG_CP_WIDGETS_MISC',              '\u041e\u0431\u0449\u0438\u0435');\n    define('LANG_CP_WIDGET_COPY_CONFIRM',       '\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442, \u0434\u0443\u0431\u043b\u0438\u0440\u0443\u044f \u0435\u0433\u043e \u043d\u0430 \u044d\u0442\u043e\u0439 \u0436\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438?');\n    define('LANG_CP_WIDGET_DELETE_CONFIRM',     '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442?');\n    define('LANG_CP_WIDGET_REMOVE_CONFIRM',     '\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b?');\n    define('LANG_CP_WIDGET_REMOVE_SUCCESS',     '\u0412\u0438\u0434\u0436\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d');\n    define('LANG_CP_WIDGET_PAGE_CREATED',       '\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_WIDGET_PAGE_URLS',          '\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f URL');\n    define('LANG_CP_WIDGET_PAGE_BODY_CSS',      'CSS \u043a\u043b\u0430\u0441\u0441\u044b \u0434\u043b\u044f \u0442\u0435\u0433\u0430 body \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK',      '\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0441\u043a\u0438');\n    define('LANG_CP_WIDGET_PAGE_URL_MASK_NOT',  '\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0441\u043a\u0438');\n    define('LANG_CP_WIDGETS_UNUSED',            '\u041d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_UNUSED_HINT',       '\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0441\u043a\u0440\u044b\u0442\u044c \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0431\u0435\u0437 \u043f\u043e\u0442\u0435\u0440\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a');\n    define('LANG_CP_WIDGETS_BINDED',            '\u041f\u0440\u0438\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_WIDGETS_BINDED_HINT',       '\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0432\u0438\u0434\u0436\u0435\u0442, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0435\u0433\u043e \u0441 \u043e\u0431\u0449\u0438\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043d\u0435\u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0440\u0430\u0437');\n    define('LANG_CP_WIDGETS_TEMPLATE',          '\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u0434\u043b\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_WIDGETS_FA',                '\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u043f\u043e\u0434\u0431\u043e\u0440 \u043c\u0430\u0441\u043e\u043a');\n    define('LANG_CP_WIDGETS_FA_TYPE',           '\u0422\u0438\u043f');\n    define('LANG_CP_WIDGETS_FA_ITEMS',          '\u0417\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_WIDGETS_FA_CATS',           '\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438');\n    define('LANG_CP_WIDGETS_FA_TITLE_OR_URL',   '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 URL');\n    define('LANG_CP_WIDGETS_FA_ADD_TO',         '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432');\n    define('LANG_CP_WIDGETS_FA_TO_POS',         '\u0412 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_WIDGETS_FA_TO_NOT',         '\u0412 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435');\n    define('LANG_CP_WIDGETS_FA_ADD',            '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c');\n    define('LANG_CP_WIDGETS_DSCH_ERROR',        '\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0448\u0430\u0431\u043b\u043e\u043d \u0430\u0434\u043c\u0438\u043d\u043f\u0430\u043d\u0435\u043b\u0438 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0445\u0435\u043c\u044b \u0432\u0438\u0434\u0436\u0435\u0442\u043e\u0432. <a target=\"_blank\" href=\"https://docs.instantcms.ru/manual/widgets\">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435...</a>');\n    define('LANG_CP_WIDGETS_STYLE',             '\u0421\u0442\u0438\u043b\u044c');\n    define('LANG_CP_NOT_SET_ALL',               '\u0415\u0441\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e, \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445');\n\n    define('LANG_CP_USER_PMAILING',             '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443');\n    define('LANG_CP_USER_ADD',                  '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_USER_CREATED',              '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d');\n    define('LANG_CP_USER_DELETE_CONFIRM',       '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f {nickname}?\\n\u0411\u0443\u0434\u0435\u0442 \u0442\u0430\u043a\u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d \u0432\u0435\u0441\u044c \u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0438 \u0432\u0441\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0438\u043c \u0444\u0430\u0439\u043b\u044b!');\n    define('LANG_CP_USER_DELETED',              '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u0443\u0434\u0430\u043b\u0435\u043d');\n    define('LANG_CP_USER_GROUP_ADD',            '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_EDIT',           '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_PERMS',          '\u041f\u0440\u0430\u0432\u0430 \u0433\u0440\u0443\u043f\u043f\u044b');\n    define('LANG_CP_USER_GROUP_DELETE',         '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_DELETE_CONFIRM', '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443?\\n\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b');\n    define('LANG_CP_USER_GROUP_CREATED',        '\u0413\u0440\u0443\u043f\u043f\u0430 &laquo;%s&raquo; \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_USER_GROUP_ERR_DELETE',     '\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0433\u0440\u0443\u043f\u043f\u0443');\n    define('LANG_CP_USER_GROUP_IS_PUBLIC',      '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_USER_GROUP_IS_FILTER',      '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_USER_LOCKING',              '\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430');\n    define('LANG_CP_USER_LOCKED',               '\u0411\u043b\u043e\u043a');\n    define('LANG_CP_USER_IS_LOCKED',            '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_USER_LOCK_UNTIL',           '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043e');\n    define('LANG_CP_USER_LOCK_REASON',          '\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438');\n    define('LANG_CP_USER_NOT_FOUND',            '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d');\n    define('LANG_CP_USER_FIND_BYIP',            '\u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0441 \u0442\u0430\u043a\u0438\u043c ip');\n    define('LANG_CP_USER_RIPE_SEARCH',          '\u041d\u0430\u0439\u0442\u0438 \u0432 \u0431\u0430\u0437\u0435 RIPE');\n    define('LANG_CP_USER_SEARCH_NOT_FOUND',     '\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c');\n    define('LANG_CP_USERS_ONLINE',              '\u0421\u0435\u0439\u0447\u0430\u0441 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435');\n    define('LANG_CP_USERS_UNCONFIRMED',         '\u041d\u0435\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b');\n    define('LANG_CP_USERS_ALL',                 '\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439');\n    define('LANG_CP_USERS_ISDELETED',           '\u0423\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435');\n    define('LANG_CP_USERS_LOCKED',              '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435');\n\n    define('LANG_CP_TOTAL',       '\u0412\u0441\u0435\u0433\u043e');\n    define('LANG_CP_ONMODERATE',  '\u041d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_NOTPUB',      '\u041d\u0435\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0445');\n\n    define('LANG_CP_CONTROLLERS_OPTIONS',       '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_CONTROLLERS_ADD',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_ERR_BACKEND_NOT_FOUND',     '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 &laquo;%s&raquo; \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a');\n\n    define('LANG_CP_SETTINGS_SITE',             '\u0421\u0430\u0439\u0442');\n    define('LANG_CP_SETTINGS_GUI',              '\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441');\n    define('LANG_CP_SETTINGS_FRONTPAGE',        '\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430');\n    define('LANG_CP_SETTINGS_DATE',             '\u0414\u0430\u0442\u044b');\n    define('LANG_CP_SETTINGS_MAIL',             '\u041f\u043e\u0447\u0442\u0430');\n    define('LANG_CP_SETTINGS_CACHE',            '\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_SETTINGS_DEBUG',            '\u041e\u0442\u043b\u0430\u0434\u043a\u0430');\n    define('LANG_CP_SETTINGS_DB',               '\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445');\n    define('LANG_CP_SETTINGS_DB_CLEAR_SQL_MODE', '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043f\u0443\u0441\u0442\u043e\u0433\u043e sql_mode \u0434\u043b\u044f MySQL');\n    define('LANG_CP_SETTINGS_DB_CHARSET',       '\u041a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0430');\n    define('LANG_CP_SETTINGS_DB_CHARSET_HINT',  '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f');\n    define('LANG_CP_SETTINGS_MISC',             '\u041f\u0440\u043e\u0447\u0438\u0435');\n    define('LANG_CP_SETTINGS_SECURITY',         '\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c');\n\n    define('LANG_CP_SETTINGS_SESSIONS',         '\u0421\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_SETTINGS_SESSION_MAXLIFETIME', '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_HANDLER', '\u041c\u0435\u0442\u043e\u0434 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSION_NAME', '\u0418\u043c\u044f \u0441\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_SETTINGS_SESSION_NAME_HINT', '\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0441\u0430\u0439\u0442\u043e\u0432 \u0441 \u0435\u0434\u0438\u043d\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0435\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH', '\u041f\u0443\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0439');\n    define('LANG_CP_SETTINGS_SESSIONS_BASEDIR', ', \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043e\u0434\u0438\u043d \u0438\u0437 \u043f\u0443\u0442\u0435\u0439 ');\n    define('LANG_CP_SETTINGS_SESSIONS_SAVE_PATH_HINT', '\u0414\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b\u043d\u044b\u0439 \u043f\u0443\u0442\u044c%s. <br />\u0414\u043b\u044f Memcache \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c \"tcp://\", \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <b>tcp://localhost:11211</b>. \u0414\u043b\u044f Memcached \u0431\u0435\u0437 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \"tcp://\", \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <b>localhost:11211</b>.');\n\n    define('LANG_CP_CHECK_SPOOFING_TYPE', '\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f IP \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0443');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT1', '\u041f\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044e \u043f\u043e\u0434\u0441\u0435\u0442\u0438');\n    define('LANG_CP_CHECK_SPOOFING_TYPE_OPT2', '\u0421\u0442\u0440\u043e\u0433\u043e \u043f\u043e ip \u0430\u0434\u0440\u0435\u0441\u0443');\n    define('LANG_CP_SETTINGS_USER_CHANGE_LANG', '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0441\u043c\u0435\u043d\u0443 \u044f\u0437\u044b\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 (\u043f\u043e\u0434\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u043e\u0439 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0432 URL)');\n    define('LANG_CP_SETTINGS_BROWSER_AUTO_LANG', '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u044f\u0437\u044b\u043a \u043f\u043e \u043b\u043e\u043a\u0430\u043b\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430');\n    define('LANG_CP_SETTINGS_ALLOW_IPS',        '\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0435 ip \u0430\u0434\u0440\u0435\u0441\u0430 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0443');\n    define('LANG_CP_SETTINGS_ALLOW_IPS_HINT',   '\u041a\u0430\u0436\u0434\u044b\u0439 \u0441 \u043d\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438. \u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e - \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u0432\u0441\u0435\u043c. \u0422\u0435\u043a\u0443\u0449\u0438\u0439 ip \u0430\u0434\u0440\u0435\u0441: %s');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY',    '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c ip \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_DETECT_IP_KEY_HINT', '\u041a\u043b\u044e\u0447 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $_SERVER, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 ip \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f. \u041d\u0435 \u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0432\u0435\u0440\u0435\u043d\u044b. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430. \u041d\u043e, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f CloudFlare \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c HTTP_CF_CONNECTING_IP');\n    define('LANG_CP_SETTINGS_SITE_ONLY_TO_USERS', '\u0421\u0430\u0439\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c');\n    define('LANG_CP_SETTINGS_SITE_ENABLED',     '\u0421\u0430\u0439\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d');\n    define('LANG_CP_SETTINGS_SITE_REASON',      '\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_SETTINGS_CHECK_UPDATES',    '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 InstantCMS \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430');\n    define('LANG_CP_SETTINGS_SITENAME',         '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_SETTINGS_HOMETITLE',        '\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b (title)');\n    define('LANG_CP_SETTINGS_METAKEYS',         '\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 (meta keywords)');\n    define('LANG_CP_SETTINGS_METADESC',         '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430 (meta description)');\n    define('LANG_CP_SETTINGS_DISABLE_METAKEYS', '\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u0433 meta keywords');\n\tdefine('LANG_CP_SETTINGS_META_NO_DEFAULT',  '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0448\u0435 \u0441\u043b\u043e\u0432\u0430 \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b');\n\tdefine('LANG_CP_SETTINGS_META_NO_DEFAULT_HINT',  '\u0415\u0441\u043b\u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e, \u044d\u0442\u0438 \u0441\u043b\u043e\u0432\u0430 \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0445 \u0441 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438');\n\tdefine('LANG_CP_SETTINGS_PAGE_NUM_IN_TITLE',  '\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u0432 \u0442\u0435\u0433 title \u0438 meta description \u043f\u0440\u0438 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0438');\n\tdefine('LANG_CP_SETTINGS_IS_SITENAME_IN_TITLE',  '\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0442\u0435\u0433 title \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0430\u0439\u0442\u0430');\n\tdefine('LANG_CP_SETTINGS_SET_HEAD_PRELOAD',  '\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 HTTP Preload');\n    define('LANG_CP_SETTINGS_LANGUAGE',         '\u041b\u043e\u043a\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SUBMIT_COMPILE',            '\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c %s');\n    define('LANG_CP_SETTINGS_TEMPLATE',         '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_TEMPLATE_ADMIN',   '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u0430\u043d\u0435\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_TEMPLATE_MOBILE',  '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432');\n    define('LANG_CP_SETTINGS_TEMPLATE_TABLET',  '\u0422\u0435\u043c\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u043b\u0430\u043d\u0448\u0435\u0442\u043e\u0432');\n    define('LANG_CP_SETTINGS_TEMPLATE_OPTIONS', '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0442\u0435\u043c\u044b');\n    define('LANG_CP_SETTINGS_TEMPLATE_INTH',    '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u044e \u0442\u0435\u043c\u0443');\n    define('LANG_CP_SETTINGS_EDITOR',           'HTML \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_SHOW_BREADCRUMBS', '\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u043e\u043c\u0435\u0440?');\n    define('LANG_CP_SETTINGS_HTML_MINIFY',      '\u0421\u0436\u0438\u043c\u0430\u0442\u044c HTML');\n    define('LANG_CP_SETTINGS_MERGE_CSS',        '\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c CSS-\u0444\u0430\u0439\u043b\u044b');\n    define('LANG_CP_SETTINGS_MERGE_JS',         '\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c JS-\u0444\u0430\u0439\u043b\u044b');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_MERGED',  '&mdash; <a href=\"%s\">\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0435\u0448</a>');\n    define('LANG_CP_SETTINGS_MERGED_CLEANED',   '\u041f\u0430\u043f\u043a\u0430 <b>%s</b> \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u0430');\n    define('LANG_CP_SETTINGS_MERGED_CLEAN_FAIL','\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443 <b>%s</b>. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0435\u0435 \u0432\u0440\u0443\u0447\u043d\u0443\u044e');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_SUCCESS', '\u041a\u0435\u0448 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0447\u0438\u0449\u0435\u043d');\n    define('LANG_CP_SETTINGS_CACHE_CLEAN_FAIL', '\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u0435\u0448\u0430');\n    define('LANG_CP_SETTINGS_CTYPE_DEF',        '\u0422\u0438\u043f\u044b \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e');\n    define('LANG_CP_SETTINGS_CTYPE_DEF_HINT',\t'\u0412 URL \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0435 \u0438\u043c\u044f');\n    define('LANG_CP_SETTINGS_FP_SHOW',          '\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435');\n    define('LANG_CP_SETTINGS_FP_SHOW_NONE',     '\u0422\u043e\u043b\u044c\u043a\u043e \u0432\u0438\u0434\u0436\u0435\u0442\u044b');\n    define('LANG_CP_SETTINGS_FP_SHOW_PROFILE',  '\u041f\u0440\u043e\u0444\u0438\u043b\u044c / \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SETTINGS_FP_SHOW_CONTENT',  '\u041a\u043e\u043d\u0442\u0435\u043d\u0442: %s');\n    define('LANG_CP_SETTINGS_TIMEZONE',         '\u0427\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441');\n    define('LANG_CP_SETTINGS_ALLOW_USERS_TIMEZONE', '\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441');\n    define('LANG_CP_SETTINGS_DATE_FORMAT',      '\u0424\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b PHP');\n    define('LANG_CP_SETTINGS_DATE_FORMAT_JS',   '\u0424\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b JavaScript');\n    define('LANG_CP_SETTINGS_MAIL_TRANSPORT',   '\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_MAIL_FROM',        '\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_MAIL_FROM_NAME',   '\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP',        '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 SMTP');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_HOST',   'SMTP \u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PORT',   'SMTP \u041f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_AUTH',   'SMTP \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_USER',   'SMTP \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_PASS',   'SMTP \u041f\u0430\u0440\u043e\u043b\u044c');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC',    'SMTP \u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_NO', '\u0411\u0435\u0437 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_SSL','SSL');\n    define('LANG_CP_SETTINGS_MAIL_SMTP_ENC_TLS','TLS');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME',  '\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0441\u0447\u0451\u0442\u0447\u0438\u043a');\n    define('LANG_CP_SETTINGS_PRODUCTION_TIME_HINT',  '\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u043f\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 js \u0438 css. \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439, \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043a\u044d\u0448 \u0443 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0435\u0439.');\n    define('LANG_CP_SETTINGS_CACHE_ENABLED',    '\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e');\n    define('LANG_CP_SETTINGS_CACHE_METHOD',     '\u041c\u0435\u0442\u043e\u0434 \u043a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f');\n    define('LANG_CP_SETTINGS_CACHE_METHOD_NO',  '\u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e');\n    define('LANG_CP_SETTINGS_CACHE_TTL',        '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u043a\u0435\u0448\u0430, \u0441\u0435\u043a');\n    define('LANG_CP_SETTINGS_CACHE_HOST',       'Memcached \u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_SETTINGS_CACHE_PORT',       'Memcached \u041f\u043e\u0440\u0442');\n    define('LANG_CP_SETTINGS_CACHE_MIN_HTML',   '\u041c\u0438\u043d\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c HTML');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN',    '\u0414\u043e\u043c\u0435\u043d cookie');\n    define('LANG_CP_SETTINGS_COOKIE_DOMAIN_HINT', 'Cookie \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0434\u043e\u043c\u0435\u043d \u0438 \u0432\u0441\u0435 \u0435\u0433\u043e \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u044b. \u0411\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441\u043a\u0432\u043e\u0437\u043d\u0430\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0442\u043e cookie \u0431\u0443\u0434\u0443\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430.');\n    define('LANG_CP_SETTINGS_CURRENT_DOMAIN',   '\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u043c\u0435\u043d: ');\n\n    define('LANG_CP_MEMCACHE_NOT_AVAILABLE',    '\u041c\u043e\u0434\u0443\u043b\u044c Memcached \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d');\n    define('LANG_CP_MEMCACHE_CONNECT_ERROR',    '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a Memcached - \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440 \u0438 \u043f\u043e\u0440\u0442');\n\n    define('LANG_CP_FILE_NOT_WRITABLE',         '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0444\u0430\u0439\u043b \"%s\". \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0434\u043b\u044f \u043d\u0435\u0433\u043e \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0437\u0430\u043f\u0438\u0441\u044c.');\n    define('LANG_CP_SETTINGS_NOT_WRITABLE',     '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0438 \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_CP_SETTINGS_TPL_NOT_WRITABLE', '\u0424\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u043c\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_SAVE_SUCCESS',              '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b');\n    define('LANG_CP_ORDER_SUCCESS',             '\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d');\n    define('LANG_CP_PERMISSIONS_SUCCESS',       '\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b');\n\n    define('LANG_CP_SETTINGS_DEBUG_MODE',       '\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0440\u0435\u0436\u0438\u043c \u043e\u0442\u043b\u0430\u0434\u043a\u0438');\n    define('LANG_CP_SETTINGS_EMULATE_LAG',      '\u0418\u043c\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0442\u0435\u0432\u044b\u0435 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438');\n\n    define('LANG_CP_SETTINGS_CACHE_CLEAN',      '\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0435\u0448');\n\n    define('LANG_CP_ADDONS_DATA_ERROR',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0437\u0436\u0435.');\n    define('LANG_CP_ADDONS_CURL_ERROR',         '\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 CURL. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438\u0437 <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430</a>.');\n    define('LANG_CP_INSTALL_PACKAGE_LINK_HINT', '\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0432 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 <a target=\"_blank\" href=\"https://addons.instantcms.ru/\">\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439</a>');\n    define('LANG_CP_INSTALL_BY_LINK',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0441 URL-\u0430\u0434\u0440\u0435\u0441\u0430');\n    define('LANG_CP_OFICIAL_ADDONS',            '\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_INSTALL_PACKAGE',           '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_DO_INSTALL',                '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c');\n    define('LANG_CP_DO_UPDATE',                 '\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c');\n    define('LANG_CP_LAST_UPDATE',               '\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_INSTALL_COMPATIBILITY_YES', '\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e \u0441 \u0432\u0430\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 InstantCMS');\n    define('LANG_CP_INSTALL_COMPATIBILITY_NO',  '\u041d\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f \u0441 \u0432\u0430\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 InstantCMS');\n    define('LANG_CP_NO_ADDONS',                 '\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439');\n    define('LANG_CP_FIND_ADDON_TITLE',          '\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_FIND_ADDON_FREE',           '\u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435');\n    define('LANG_CP_FIND_ADDON_BUY',            '\u0422\u043e\u043b\u044c\u043a\u043e \u043f\u043b\u0430\u0442\u043d\u044b\u0435');\n    define('LANG_CP_FIND_FOUND',                '\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443');\n    define('LANG_CP_PACKAGE_VIDEO',             '\u0412\u0438\u0434\u0435\u043e');\n    define('LANG_CP_PACKAGE_VIDEO_TITLE',       '\u0412\u0438\u0434\u0435\u043e \u043e\u0431\u0437\u043e\u0440');\n    define('LANG_CP_PACKAGE_DEMO',              '\u0414\u0435\u043c\u043e');\n    define('LANG_CP_PACKAGE_BUY',               '\u041a\u0443\u043f\u0438\u0442\u044c \u0437\u0430 %s');\n    define('LANG_CP_PACKAGE_BUY_UPDATE',        '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_PACKAGE_INSTALLEDT',        '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e');\n    define('LANG_CP_PACKAGE_INSTALLED_HINT',    '%s \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_PACKAGE_DELETE_CONTROLLERS', '\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u00ab%s\u00bb');\n    define('LANG_CP_PACKAGE_DELETE_WIDGETS',     '\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u0432\u0438\u0436\u0435\u0442\u0430 \u00ab%s\u00bb');\n    define('LANG_CP_PACKAGE_DELETE_HINT',       '\u041d\u0430\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u0436\u0435, \u043e\u043d\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f. \u0423 InstantCMS \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f (\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c).');\n    define('LANG_CP_ADDDONS_DS_INSTALLED',      '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435');\n    define('LANG_CP_INSTALL_PACKAGE_DONE',      '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430');\n    define('LANG_CP_INSTALL_PACKAGE_DONE_INFO', '\u041f\u0430\u043a\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_INSTALL_PACKAGE_NOT_CLEARED', '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f <b>%s</b> \u043d\u0435 \u0431\u044b\u043b\u0430 \u043e\u0447\u0438\u0449\u0435\u043d\u0430 \u0438\u0437-\u0437\u0430 \u043d\u0435\u0445\u0432\u0430\u0442\u043a\u0438 \u043f\u0440\u0430\u0432, \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u044d\u0442\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e');\n    define('LANG_CP_INSTALL_PACKAGE_INFO',      '\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0430\u043a\u0435\u0442\u0435');\n    define('LANG_CP_INSTALL_PACKAGE_FILE',      '\u0424\u0430\u0439\u043b \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_PACKAGE_FILE_HINT', '\u0424\u0430\u0439\u043b \u0441 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c <b>.zip</b>');\n    define('LANG_CP_INSTALL_ERR_HINT',          '\u0421\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u0435');\n    define('LANG_CP_INSTALL_ERR_FIX',           '\u0420\u0435\u0448\u0435\u043d\u0438\u0435');\n    define('LANG_CP_INSTALL_ERR_WA',            '\u041e\u0431\u0445\u043e\u0434 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b');\n    define('LANG_CP_INSTALL_NOT_WRITABLE',      '\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f <b>%s</b> \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_HINT', '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_FIX',  '\u0412\u044b\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 777 \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_WA',   '\u0421\u043c\u0435\u043d\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0430 <b>.zip</b>, \u0440\u0430\u0441\u043f\u0430\u043a\u0443\u0439\u0442\u0435 \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_WRITABLE_CUSTOM', '\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\", \u0435\u0441\u043b\u0438 \u0432\u044b \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u043b\u0438 \u043f\u0430\u043a\u0435\u0442 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE', '\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e parse_ini_file');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_HINT', '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_PARSE_INI_FILE_FIX', '\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0445\u043e\u0441\u0442\u0435\u0440\u0443 \u0441 \u043f\u0440\u043e\u0441\u044c\u0431\u043e\u0439 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <b>parse_ini_file</b> \u0434\u043b\u044f PHP \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n    define('LANG_CP_INSTALL_NOT_ZIP',           '\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0443 ZIP-\u0430\u0440\u0445\u0438\u0432\u043e\u0432');\n    define('LANG_CP_INSTALL_NOT_ZIP_HINT',      '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0430\u0440\u0445\u0438\u0432\u0430 \u043d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430');\n    define('LANG_CP_INSTALL_NOT_ZIP_FIX',       '\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0445\u043e\u0441\u0442\u0435\u0440\u0443 \u0441 \u043f\u0440\u043e\u0441\u044c\u0431\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u043a\u043b\u0430\u0441\u0441\u0430 <b>ZipArchive</b> \u0434\u043b\u044f PHP \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n    define('LANG_CP_INSTALL_NOT_ZIP_WA',        '\u0421\u043c\u0435\u043d\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430 \u043d\u0430 <b>.zip</b>, \u0440\u0430\u0441\u043f\u0430\u043a\u0443\u0439\u0442\u0435 \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <b>%s</b>');\n    define('LANG_CP_INSTALL_ERROR',             '\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_PERM_ERROR',        '\u0424\u0430\u0439\u043b %s \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_CP_INSTALL_ZIP_ERROR',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u043a\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_INSTALL_FTP_NOTICE',        '\u0414\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430 \u0432 \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438 \u0441\u0430\u0439\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b FTP-\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0438\u043c\u0435\u044e\u0449\u0435\u0433\u043e \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043e\u043a \u0438 \u0444\u0430\u0439\u043b\u043e\u0432.');\n    define('LANG_CP_INSTALL_FTP_PRIVACY',       '\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0438 \u043c\u043e\u0433\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u0435\u0441\u0441\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043e \u043a\u043e\u043d\u0446\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u0435\u0430\u043d\u0441\u0430');\n    define('LANG_CP_PACKAGE_AUTHOR',            '\u0410\u0432\u0442\u043e\u0440 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DESCRIPTION',       '\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_CONTENTS',          '\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DEPENDS',           '\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_DEPENDS_CORE',      '\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u044f\u0434\u0440\u0430');\n    define('LANG_CP_PACKAGE_DEPENDENT_TYPE',      '\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 %s <a href=\"%s\" target=\"_blank\">%s</a>');\n    define('LANG_CP_PACKAGE_DEPENDENT_COMPONENT', '\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_PACKAGE_DEPENDENT_WIDGET',    '\u0432\u0438\u0434\u0436\u0435\u0442');\n    define('LANG_CP_INSTALLED',     '\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_NOT_INSTALLED', '\u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d');\n    define('LANG_CP_PACKAGE_DEPENDS_PACKAGE',   '\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_COMPONENT_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_WIDGET_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0436\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_UPDATE', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_PACKAGE_TYPE_SYSTEM_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_PACKAGE_DUBLE_INSTALL', '\u041f\u0430\u043a\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u0438 %s \u0443\u0436\u0435 \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d. \u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442, \u0442\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0435\u0433\u043e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435.');\n    define('LANG_CP_PACKAGE_UPDATE_ERROR', '%s \"%s\" \u0438\u043c\u0435\u0435\u0442 \u043d\u043e\u043c\u0435\u0440 \u0432\u0435\u0440\u0441\u0438\u0438 <b>%s</b>. \u0423 \u0432\u0430\u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0432\u0435\u0440\u0441\u0438\u044f <b>%s</b>. \u0414\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0430\u043a\u0435\u0442 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438.');\n    define('LANG_CP_PACKAGE_UPDATE_IS_UPDATED', '\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u0430\u043a\u0435\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439. \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f.');\n    define('LANG_CP_PACKAGE_TYPE', '\u0422\u0438\u043f \u043f\u0430\u043a\u0435\u0442\u0430');\n    define('LANG_CP_PACKAGE_NONAME', '\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u0440');\n    define('LANG_CP_PACKAGE_UPDATE_NOINSTALL', '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u043e\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e');\n\n    define('LANG_CP_COMPONENT_IS_DELETED',      '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \"%s\" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d');\n    define('LANG_CP_DELETE_COMPONENT_CONFIRM',  '\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \"{title}\"?');\n\n    define('LANG_CP_FTP_ACCOUNT',               '\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b FTP');\n    define('LANG_CP_FTP_HOST',                  '\u0421\u0435\u0440\u0432\u0435\u0440');\n    define('LANG_CP_FTP_PORT',                  '\u041f\u043e\u0440\u0442');\n    define('LANG_CP_FTP_USER',                  '\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f');\n    define('LANG_CP_FTP_PASS',                  '\u041f\u0430\u0440\u043e\u043b\u044c');\n    define('LANG_CP_FTP_PATH',                  '\u041f\u0443\u0442\u044c \u043f\u0430\u043f\u043a\u0438 \u0441\u0430\u0439\u0442\u0430');\n    define('LANG_CP_FTP_PATH_HINT',             '<a href=\"https://docs.instantcms.ru/manual/addons/ftppath\" target=\"_blank\">\u041a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0443\u0442\u044c?</a>');\n    define('LANG_CP_CHECK',                     '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c');\n    define('LANG_CP_FTP_IS_PASV',               '\u041f\u0430\u0441\u0441\u0438\u0432\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438');\n    define('LANG_CP_FTP_CONNECT_FAILED',        '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0445\u043e\u0441\u0442\u0430 \u0438 \u043f\u043e\u0440\u0442\u0430');\n    define('LANG_CP_FTP_AUTH_FAILED',           '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044f');\n    define('LANG_CP_FTP_UPLOAD_FAILED',         '\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u0443\u0442\u0438 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0430\u0432');\n    define('LANG_CP_FTP_MKDIR_FAILED',          '\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u0443\u0442\u0438 \u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043f\u0440\u0430\u0432');\n\tdefine('LANG_CP_FTP_NO_ROOT',\t\t\t\t'\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u0430\u043f\u043a\u0430 %s \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435');\n\tdefine('LANG_CP_FTP_BAD_ROOT',\t\t\t\t'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0443\u0442\u0438: InstantCMS 2 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0432 <strong>%s</strong>');\n\tdefine('LANG_CP_FTP_CHECK',\t\t\t\t    '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 FTP \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f');\n\tdefine('LANG_CP_FTP_CONNECTION_INFO',       '\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 %s');\n\tdefine('LANG_CP_FTP_NO_ERRORS',             '\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043e \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u043e.');\n\tdefine('LANG_CP_FTP_ROOT_LIST_TITLE',       '\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f');\n\n    define('LANG_CP_FTP_SAVE_TO_SESSION',   '\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b ftp \u0432 \u0441\u0435\u0441\u0441\u0438\u0438');\n    define('LANG_CP_FTP_SAVE_TO_SESSION_HINT', '\u042d\u0442\u043e \u043d\u0435\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0435\u0441\u043b\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u043e\u0442 \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0433\u043e \u0430\u0432\u0442\u043e\u0440\u0430');\n    define('LANG_CP_FTP_SKIP',\t\t\t\t'\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0448\u0430\u0433');\n    define('LANG_CP_FTP_SKIP_HINT',\t\t\t'\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0448\u0430\u0433, \u0435\u0441\u043b\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043d\u0430 FTP \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0440\u0443\u0447\u043d\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432 <a href=\"https://docs.instantcms.ru/manual/addons\">\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438</a>');\n\n    define('ERR_VALIDATE_UNIQUE_FIELD',         '\u041f\u043e\u043b\u0435 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442');\n    define('LANG_CP_BACK_TO_SITE',              '\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442');\n    define('LANG_CP_3RDPARTY_CREDITS',          '\u041f\u0440\u0438 \u0443\u0447\u0430\u0441\u0442\u0438\u0438');\n\n    define('LANG_MODERATOR_ADD',             '\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430');\n    define('LANG_MODERATOR_ADD_HINT',        '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c');\n    define('LANG_MODERATOR_APPROVED_COUNT',  '\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e');\n    define('LANG_MODERATOR_DELETED_COUNT',   '\u0423\u0434\u0430\u043b\u0435\u043d\u043e');\n    define('LANG_MODERATOR_IDLE_COUNT',      '\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435');\n    define('LANG_MODERATOR_ASSIGNED_DATE',   '\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d');\n    define('LANG_MODERATOR_TRASH_LEFT_TIME', '\u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435');\n    define('LANG_MODERATOR_ALREADY',         '\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c %s \u0443\u0436\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c');\n    define('LANG_MODERATORATION_OPTIONS',    '\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438');\n    define('LANG_MODERATION_TRASH_NO_REMOVE', '\u0411\u0435\u0441\u0441\u0440\u043e\u0447\u043d\u043e');\n    define('LANG_MODERATION_NOT_NEEDED',      '\u041d\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043b\u0430\u0441\u044c');\n    define('LANG_MODERATION_IN_TRASH',        '\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435');\n    define('LANG_MODERATION_IN_TRASH_TIME',   '\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435, \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d \u0447\u0435\u0440\u0435\u0437 %s');\n    define('LANG_MODERATION_LOGS',            '\u041b\u043e\u0433 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0439');\n\n    define('LANG_CP_CHECK_NESTED',                  '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u044c\u0435\u0432');\n    define('LANG_CP_NS_NO_TABLES',                  '\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0442\u0430\u0431\u043b\u0438\u0446 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438');\n    define('LANG_CP_NS_SUCCESSFUL',                 '\u0423\u0441\u043f\u0435\u0448\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438');\n    define('LANG_CP_NS_UNSUCCESSFUL',               '\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438');\n    define('LANG_CP_NS_FIX',                        '\u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c');\n    define('LANG_CP_NS_FIX_SUCCESS',                '\u0412\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b %s \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b');\n    define('LANG_CP_NS_FIX_ERROR',                  '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b %s');\n    define('LANG_CP_SCHEDULER',                     '\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0449\u0438\u043a');\n    define('LANG_CP_SCHEDULER_TASK',                '\u0417\u0430\u0434\u0430\u0447\u0430');\n    define('LANG_CP_SCHEDULER_TASK_ADD',            '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443');\n    define('LANG_CP_SCHEDULER_TASK_EDIT',           '\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443');\n    define('LANG_CP_SCHEDULER_TASK_CONTROLLER',     '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_CP_SCHEDULER_TASK_HOOK',           '\u0425\u0443\u043a');\n    define('LANG_CP_SCHEDULER_TASK_PERIOD',         '\u041f\u0435\u0440\u0438\u043e\u0434, \u043c\u0438\u043d.');\n    define('LANG_CP_SCHEDULER_IS_STRICT_PERIOD',    '\u0421\u0442\u0440\u043e\u0433\u043e\u0435 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0438\u043e\u0434\u0443');\n    define('LANG_CP_SCHEDULER_TASK_LAST_RUN',       '\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043f\u0443\u0441\u043a');\n    define('LANG_CP_SCHEDULER_TASK_DELETE_CONFIRM', '\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443?');\n    define('LANG_CP_SCHEDULER_TASK_CREATED',        '\u0417\u0430\u0434\u0430\u0447\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430');\n    define('LANG_CP_SCHEDULER_TASK_IS_ACTIVE',      '\u0417\u0430\u0434\u0430\u0447\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430');\n    define('LANG_CP_SCHEDULER_TASK_RUN',            '\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441');\n    define('LANG_CP_SCHEDULER_TASK_RAN',            '\u0417\u0430\u0434\u0430\u0447\u0430 &laquo;%s&raquo; \u0431\u044b\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 %s');\n    define('LANG_CP_SCHEDULER_TASK_RUN_FAIL',       '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 &laquo;%s&raquo;');\n\n    define('LANG_CP_UPDATE_CHECK',                  '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f InstantCMS');\n    define('LANG_CP_UPDATE_DATE',                   '\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430');\n    define('LANG_CP_UPDATE_DOWNLOAD',               '\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_UPDATE_DOWNLOAD_FAIL',          '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_CP_UPDATE_INSTALL',                '\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435');\n    define('LANG_CP_UPDATE_AVAILABLE',              '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 %s');\n    define('LANG_CP_UPDATE_NOT_AVAILABLE',          '\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439. \u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e %s \u043e\u0442 %s.');\n    define('LANG_CP_UPDATE_CHECK_FAIL',             '\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439');\n    define('LANG_CP_UPDATE_MANUAL_1',               '\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 CURL.');\n    define('LANG_CP_UPDATE_MANUAL_2',               '\u0421\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u0430\u0440\u0445\u0438\u0432 \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 <a href=\"'.href_to('admin', 'install').'\">\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439</a>');\n\n    define('LANG_HELP_URL_CONTENT',                 'https://docs.instantcms.ru/manual/content');\n    define('LANG_HELP_URL_CONTENT_CATS',            'https://docs.instantcms.ru/manual/content/cats');\n    define('LANG_HELP_URL_CTYPES',                  'https://docs.instantcms.ru/manual/ctypes');\n    define('LANG_HELP_URL_CTYPES_BASIC',            'https://docs.instantcms.ru/manual/ctypes/add');\n    define('LANG_HELP_URL_CTYPES_LABELS',           'https://docs.instantcms.ru/manual/ctypes/labels');\n    define('LANG_HELP_URL_CTYPES_FIELDS',           'https://docs.instantcms.ru/manual/ctypes/fields');\n    define('LANG_HELP_URL_CTYPES_FIELD',            'https://docs.instantcms.ru/manual/ctypes/fields/add');\n    define('LANG_HELP_URL_CTYPES_PROPS',            'https://docs.instantcms.ru/manual/ctypes/props');\n    define('LANG_HELP_URL_CTYPES_PROP',             'https://docs.instantcms.ru/manual/ctypes/props/add');\n    define('LANG_HELP_URL_CTYPES_FILTERS',          'https://docs.instantcms.ru/manual/ctypes/filters');\n    define('LANG_HELP_URL_CTYPES_FILTERS_ADD',      'https://docs.instantcms.ru/manual/ctypes/filters/add');\n    define('LANG_HELP_URL_CTYPES_DATASETS',         'https://docs.instantcms.ru/manual/ctypes/datasets');\n    define('LANG_HELP_URL_CTYPES_DATASET',          'https://docs.instantcms.ru/manual/ctypes/datasets/add');\n    define('LANG_HELP_URL_CTYPES_RELATIONS',        'https://docs.instantcms.ru/manual/ctypes/relations');\n    define('LANG_HELP_URL_CTYPES_PERMS',            'https://docs.instantcms.ru/manual/ctypes/permissions');\n    define('LANG_HELP_URL_CTYPES_MODERATORS',       'https://docs.instantcms.ru/manual/ctypes/moderators');\n    define('LANG_HELP_URL_MENU',                    'https://docs.instantcms.ru/manual/menu');\n    define('LANG_HELP_URL_WIDGETS',                 'https://docs.instantcms.ru/manual/widgets');\n    define('LANG_HELP_URL_WIDGETS_CFG',             'https://docs.instantcms.ru/manual/widgets/config');\n    define('LANG_HELP_URL_WIDGETS_PAGES',           'https://docs.instantcms.ru/manual/widgets/pages');\n    define('LANG_HELP_URL_COMPONENTS',              'https://docs.instantcms.ru/manual/components');\n    define('LANG_HELP_URL_INSTALL',                 'https://docs.instantcms.ru/manual/addons');\n    define('LANG_HELP_URL_COM_FORMS',               'https://docs.instantcms.ru/manual/components/forms');\n    define('LANG_HELP_URL_COM_REDIRECT',            'https://docs.instantcms.ru/manual/components/redirect');\n    define('LANG_HELP_URL_COM_AUTH',                'https://docs.instantcms.ru/manual/components/auth');\n    define('LANG_HELP_URL_COM_MODERATION',          'https://docs.instantcms.ru/manual/components/moderation');\n    define('LANG_HELP_URL_COM_ACTIVITY',            'https://docs.instantcms.ru/manual/components/activity');\n    define('LANG_HELP_URL_COM_GROUPS',              'https://docs.instantcms.ru/manual/components/groups');\n    define('LANG_HELP_URL_COM_RECAPTCHA',           'https://docs.instantcms.ru/manual/components/recaptcha');\n    define('LANG_HELP_URL_COM_COMMENTS',            'https://docs.instantcms.ru/manual/components/comments');\n\tdefine('LANG_HELP_URL_COM_IMAGES',\t\t\t\t'https://docs.instantcms.ru/manual/components/images');\n\tdefine('LANG_HELP_URL_COM_SUBSCRIPTIONS',\t\t'https://docs.instantcms.ru/manual/components/subscriptions');\n    define('LANG_HELP_URL_COM_USERS',               'https://docs.instantcms.ru/manual/components/users');\n    define('LANG_HELP_URL_COM_USERS_MIGRATON',      'https://docs.instantcms.ru/manual/components/users/migrations');\n    define('LANG_HELP_URL_COM_MARKITUP',            'https://docs.instantcms.ru/manual/components/markitup');\n    define('LANG_HELP_URL_COM_RATING',              'https://docs.instantcms.ru/manual/components/rating');\n    define('LANG_HELP_URL_COM_SEARCH',              'https://docs.instantcms.ru/manual/components/search');\n    define('LANG_HELP_URL_COM_TAGS',                'https://docs.instantcms.ru/manual/components/tags');\n    define('LANG_HELP_URL_COM_RSS',                 'https://docs.instantcms.ru/manual/components/rss');\n    define('LANG_HELP_URL_COM_SITEMAP',             'https://docs.instantcms.ru/manual/components/sitemap');\n\tdefine('LANG_HELP_URL_COM_PHOTOS',\t\t\t\t'https://docs.instantcms.ru/manual/components/photos');\n    define('LANG_HELP_URL_USERS',                   'https://docs.instantcms.ru/manual/users');\n    define('LANG_HELP_URL_USERS_USER',              'https://docs.instantcms.ru/manual/users/user');\n    define('LANG_HELP_URL_USERS_GROUP',             'https://docs.instantcms.ru/manual/users/group');\n    define('LANG_HELP_URL_SETTINGS',                'https://docs.instantcms.ru/manual/settings');\n    define('LANG_HELP_URL_SETTINGS_GLOBAL',         'https://docs.instantcms.ru/manual/settings/global');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER',      'https://docs.instantcms.ru/manual/settings/scheduler');\n    define('LANG_HELP_URL_CHECK_NESTED',            'https://docs.instantcms.ru/manual/settings/check_nested');\n    define('LANG_HELP_URL_SETTINGS_SCHEDULER_TASK', 'https://docs.instantcms.ru/manual/settings/scheduler/task');\n    define('LANG_HELP_URL_EVENTS',                  'https://docs.instantcms.ru/manual/settings/events');\n    define('LANG_HELP_URL_COM_MESSAGES',                'https://docs.instantcms.ru/manual/components/messages');\n    define('LANG_ZIP_ERROR_10', '\u0424\u0430\u0439\u043b \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442');\n    define('LANG_ZIP_ERROR_21', '\u041d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b\u0439 ZIP-\u0430\u0440\u0445\u0438\u0432');\n    define('LANG_ZIP_ERROR_18', '\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442');\n    define('LANG_ZIP_ERROR_14', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438');\n    define('LANG_ZIP_ERROR_9', '\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430');\n    define('LANG_ZIP_ERROR_19', '\u0424\u0430\u0439\u043b \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f zip \u0430\u0440\u0445\u0438\u0432\u043e\u043c');\n    define('LANG_ZIP_ERROR_11', '\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b');\n    define('LANG_ZIP_ERROR_5', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0447\u0442\u0435\u043d\u0438\u044f');\n    define('LANG_ZIP_ERROR_4', '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430');\n    define('LANG_INSTALL_NOTICE_SYSTEM_FILE', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041f\u0430\u043a\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b CMS. \u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443, \u0435\u0441\u043b\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043f\u0430\u043a\u0435\u0442\u0430 \u0412\u0430\u043c \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d.');\n    define('LANG_ADMIN_NOTICES', '\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f');\n    define('LANG_ADMIN_ACCESS_DENIED_BY_IP', '\u0414\u043e\u0441\u0442\u0443\u043f \u0441 \u0432\u0430\u0448\u0435\u0433\u043e ip \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d');\n    define('LANG_MAILCHECK_ERROR', '\u041f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: <br><b>%s</b>');\n    define('LANG_MAILCHECK_SUCCESS', '\u041f\u0438\u0441\u044c\u043c\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e');\n    define('LANG_MAILCHECK_MENU', '\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0447\u0442\u044b');\n    define('LANG_CP_DB_CHARSET_HINT', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041f\u0435\u0440\u0435\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u044d\u0442\u043e\u0439 \u043e\u043f\u0446\u0438\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0431\u044d\u043a\u0430\u043f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445!');\n    define('LANG_MAILCHECK_TO', '\u041a\u043e\u043c\u0443');\n    define('LANG_MAILCHECK_SUBJECT', '\u0422\u0435\u043c\u0430');\n    define('LANG_MAILCHECK_BODY', '\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435');\n    define('LANG_EVENTS_MANAGEMENT', '\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c\u0438');\n    define('LANG_EVENTS_MANAGEMENT_HINT', '\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e \u0440\u0430\u0437\u0434\u0435\u043b \u0434\u043b\u044f \u043e\u043f\u044b\u0442\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442\u0435.');\n    define('LANG_EVENTS_REFRESH',    '\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445');\n    define('LANG_EVENTS_DELETED',    '\u042d\u0442\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0443\u0436\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b');\n    define('LANG_EVENTS_LISTENER',   '\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442');\n    define('LANG_EVENTS_EVENT_NAME', '\u0421\u043e\u0431\u044b\u0442\u0438\u0435');\n    define('LANG_EVENTS_ALLOW_NEW',  '\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u043e\u0432\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f');\n    define('LANG_EVENTS_SUCCESS',  '\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b');\n    define('LANG_CONFIRM_LOGIN',  '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438');\n    define('LANG_CONFIRM_LOGIN_HINT',  '\u0412\u044b \u043f\u044b\u0442\u0430\u0435\u0442\u0435\u0441\u044c \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0434 \u0438\u043c\u0435\u043d\u0435\u043c \"%s\" \u0438\u0437 \u043d\u0435\u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430.');\n    define('LANG_CONFIRM_LOGIN_HINT1',  '\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c, \u0447\u0442\u043e \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0435\u0441\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c.');\n    define('LANG_ADMIN_IS_DELETED', '\u0423\u0434\u0430\u043b\u0451\u043d?');\n    define('LANG_ADMIN_CONTROLLER_SLUG', 'Url \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430');\n    define('LANG_CP_QUEUE', '\u041e\u0447\u0435\u0440\u0435\u0434\u044c');\n    define('LANG_CP_QUEUE_TITLE', '\u041e\u0447\u0435\u0440\u0435\u0434\u044c %s');\n    define('LANG_CP_QUEUE_DATE_CREATED', '\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_DATE_STARTED', '\u0414\u0430\u0442\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_STATUS', '\u0421\u0442\u0430\u0442\u0443\u0441');\n    define('LANG_CP_QUEUE_QUEUE_RESTART', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430, \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c');\n    define('LANG_CP_QUEUE_STATUS1', '\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f');\n    define('LANG_CP_QUEUE_STATUS2', '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439');\n    define('LANG_CP_QUEUE_STATUS3', '\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f');\n    define('LANG_CP_QUEUE_STATUS4', '\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f %s-\u0439 \u0440\u0430\u0437');\n    define('LANG_CP_SUBJECT', '\u0421\u0443\u0431\u044a\u0435\u043a\u0442');\n    define('LANG_CP_FIELD_AUTHOR_ACCESS', '\u0414\u043e\u0441\u0442\u0443\u043f \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0430 \u0438\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430');\n    define('LANG_CP_FIELD_READING',       '\u0427\u0442\u0435\u043d\u0438\u0435');\n    define('LANG_CP_FIELD_EDITING',       '\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435');\n    define('LANG_WD_CONTENT_FILTER_DETECT', '\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438');\n    define('LANG_CP_TEMPLATE_NO_ICONS_SELECT', '\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u0431\u043e\u0440 \u0438\u043a\u043e\u043d\u043e\u043a.');\n    define('LANG_CP_TEMPLATE_ICONS_PHP', '\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a PHP \u043a\u043e\u0434');\n    define('LANG_CP_TEMPLATE_ICONS', '\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043a\u043e\u043d\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u0430');\n    define('LANG_CP_COMPILE_TIME', '\u0412\u0440\u0435\u043c\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 %s \u0441\u0435\u043a.');\n    define('LANG_CP_FORMAT', '\u0424\u043e\u0440\u043c\u0430\u0442');\n", "<?php\n\n/**\n * \u0420\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044e, \u0437\u0430\u0442\u0435\u043c \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 CamelCase\n * \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \"my_own_string\" => \"MyOwnString\", \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \"_\"\n *\n * @param char $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\n * @param string $string \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430\n * @return string\n */\nfunction string_to_camel($delimiter, $string) {\n\n    $result = '';\n    $words  = explode($delimiter, mb_strtolower($string));\n\n    foreach ($words as $word) {\n        $result .= ucfirst($word);\n    }\n\n    return $result;\n}\n\n/**\n * \u0412\u044b\u0440\u0435\u0437\u0430\u0435\u0442 \u0442\u0435\u0433\u0438 <br> \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438\n * @param string $string\n * @return string\n */\nfunction string_strip_br($string) {\n    return str_replace('<br>', '', str_replace('<br/>', '', $string));\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b\n * \u0415\u0441\u043b\u0438 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0435\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\n *\n * \u041f\u0440\u0435\u0444\u0438\u043a\u0441 LANG_ \u0432 \u0438\u043c\u0435\u043d\u0438 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\n * \u0420\u0435\u0433\u0438\u0441\u0442\u0440 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\n *\n * @param string $constant \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b\n * @param string $default\n * @return string\n */\nfunction string_lang($constant, $default = false) {\n\n    $constant = strtoupper($constant);\n\n    if (!$default) { $default = $constant; }\n\n    if (strpos($constant, 'LANG_') === false) {\n        $constant = 'LANG_' . $constant;\n    }\n\n    if (defined($constant)) {\n        $string = constant($constant);\n    } else {\n        $string = $default;\n    }\n\n    return $string;\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043c\u0430\u0441\u043a\u043e\u0439 URL \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440:\n *      \"my*mask is %st place\" => \"my(.*)mask is ([0-9]+) place\"\n *\n * @param string $mask\n * @return string\n */\nfunction string_mask_to_regular($mask) {\n    return str_replace([\n        '%', '/', '*', '?', '{slug}'\n    ], [\n        '([0-9]+)', '\\/', '(.*)', '\\?', '([a-z0-9\\-]*)'\n    ], trim($mask));\n}\n\n/**\n * \u0420\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0438, \u0430 \u043a\u0430\u0436\u0434\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0430 ID \u0438 VALUE, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 |,\n * \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044f \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0438:\n *      \"id1 | value1 \\n id2 | value2\"\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430:\n *      array('id1' => 'value1', 'id2' => 'value2')\n *\n * @param string $string_list\n * @return array\n */\nfunction string_parse_list($string_list) {\n\n    if (!$string_list) { return []; }\n\n    $user = cmsUser::getInstance();\n\n    $rows = explode(\"\\n\", $string_list);\n\n    $list = [];\n\n    foreach ($rows as $row) {\n\n        if (!$row) { continue; }\n\n        $row = trim($row);\n\n        if (preg_match('/^{(.*)}$/i', $row, $matches)) {\n            if (!$user->is_logged) { continue; }\n            $row = trim($matches[1]);\n        }\n\n        if (!mb_strstr($row, '|')) {\n            $list[] = ['value' => trim($row)];\n        } else {\n            list($id, $value) = explode('|', $row);\n            $list[] = [\n                'id'    => trim($id),\n                'value' => trim($value)\n            ];\n        }\n    }\n\n    return $list;\n}\n\nfunction string_explode_list($string_list, $index_as_value = false) {\n\n    $items = [];\n    $rows  = explode(\"\\n\", trim($string_list));\n\n    if (is_array($rows)) {\n        foreach ($rows as $count => $row) {\n            if (mb_strpos($row, '|')) {\n                list($index, $value) = explode('|', trim($row));\n            } else {\n                $index = (string)($index_as_value ? $row : ($count + 1));\n                $value = $row;\n            }\n            $items[trim($index)] = trim($value);\n        }\n    }\n\n    return $items;\n}\n\n/**\n * \u041f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a\u043b\u044e\u0447\u0438 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u043a \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u043c\u0443 \u0442\u0438\u043f\u0443\n *\n * @param array $array \u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n * @return array\n */\nfunction array_keys_to_string_type($array) {\n\n    $keys        = array_keys($array);\n    $values      = array_values($array);\n    $string_keys = array_map('strval', $keys);\n\n    return array_combine($string_keys, $values);\n}\n\n/**\n * \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e string_parse_list() \u0438 \u0438\u0449\u0435\u0442 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0432 \u043d\u0435\u0433\u043e\n * \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438\n *\n * @param string $string\n * @param string $mask_list\n * @return boolean\n */\nfunction string_in_mask_list($string, $mask_list) {\n\n    if (!$mask_list) { return false; }\n\n    $mask_list = explode(\"\\n\", $mask_list);\n\n    foreach ($mask_list as $item) {\n\n        $regular = string_mask_to_regular($item);\n        $regular = \"/^{$regular}$/iu\";\n\n        if (preg_match($regular, $string)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u0443\u044e \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u0438\u043d\u044b\n *\n * @param integer $length \u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438\n * @param string $seed \u0421\u043e\u043b\u044c\n * @return string\n */\nfunction string_random($length = 32, $seed = '') {\n\n    $salt = bin2hex(random_bytes(128));\n\n    $string = md5(md5($salt . chr(random_int(0, 127)) . chr(random_int(0, 127))) . chr(random_int(0, 127)) . md5(md5($seed)));\n\n    if ($length < 32) {\n        $string = substr($string, 0, $length);\n    }\n\n    return $string;\n}\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u0430\u0442\u043e\u0439 \u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c\n * \u0432 \u0432\u0438\u0434\u0435 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043e \u0441\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f\u043c\u0438\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: \"2 \u0433\u043e\u0434\u0430 16 \u0434\u043d\u0435\u0439 5 \u0447\u0430\u0441\u043e\u0432 12 \u043c\u0438\u043d\u0443\u0442\"\n *\n * @param string $date\n * @param array $options \u041c\u0430\u0441\u0441\u0438\u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f: y, m, d, h, i, from_date\n * @param bool $is_add_back \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043b\u043e\u0432\u043e \"\u043d\u0430\u0437\u0430\u0434\"?\n * @return string\n */\nfunction string_date_age($date, $options, $is_add_back = false) {\n\n    if (!$date) { return ''; }\n\n    $date2 = !empty($options['from_date']) ? $options['from_date'] : false;\n\n    $diff = real_date_diff($date, $date2);\n\n    $diff_str = [];\n\n    if (in_array('y', $options) && $diff[0]) {\n        $diff_str[] = html_spellcount($diff[0], LANG_YEAR1, LANG_YEAR2, LANG_YEAR10);\n    }\n    if (in_array('m', $options) && $diff[1]) {\n        $diff_str[] = html_spellcount($diff[1], LANG_MONTH1, LANG_MONTH2, LANG_MONTH10);\n    }\n    if (in_array('d', $options) && $diff[2]) {\n        $diff_str[] = html_spellcount($diff[2], LANG_DAY1, LANG_DAY2, LANG_DAY10);\n    }\n    if (in_array('h', $options) && $diff[3]) {\n        $diff_str[] = html_spellcount($diff[3], LANG_HOUR1, LANG_HOUR2, LANG_HOUR10);\n    }\n    if (in_array('i', $options) && $diff[4]) {\n        $diff_str[] = html_spellcount($diff[4], LANG_MINUTE1, LANG_MINUTE2, LANG_MINUTE10);\n    }\n\n    if (!$diff_str) {\n        return LANG_SECONDS_AGO;\n    } else {\n        $diff_str = trim(implode(' ', $diff_str));\n        return $is_add_back ? sprintf(LANG_DATE_AGO, $diff_str) : $diff_str;\n    }\n}\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0434\u0430\u0442\u043e\u0439 \u0438 \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c\n * \u0432 \u0432\u0438\u0434\u0435 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u043e \u0441\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u0435\u043c\n *\n * \u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430: \"3 \u0434\u043d\u044f\"\n *\n * @param string | array $date \u0414\u0430\u0442\u0430 \u0438\u043b\u0438 \u043c\u0430\u0441\u0441\u0438\u0432 \u0434\u0432\u0443\u0445 \u0434\u0430\u0442\n * @param bool $is_add_back \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043b\u043e\u0432\u043e \"\u043d\u0430\u0437\u0430\u0434\"?\n * @return string\n */\nfunction string_date_age_max($date, $is_add_back = false) {\n\n    if (!$date) { return ''; }\n\n    if(is_array($date)){\n        $diff = real_date_diff($date[0], $date[1]);\n    } else {\n        $diff = real_date_diff($date);\n    }\n\n    $diff_str = '';\n\n    if ($diff[0]) {\n        $diff_str = html_spellcount($diff[0], LANG_YEAR1, LANG_YEAR2, LANG_YEAR10);\n    } else\n    if ($diff[1]) {\n        $diff_str = html_spellcount($diff[1], LANG_MONTH1, LANG_MONTH2, LANG_MONTH10);\n    } else\n    if ($diff[2]) {\n        $diff_str = html_spellcount($diff[2], LANG_DAY1, LANG_DAY2, LANG_DAY10);\n    } else\n    if ($diff[3]) {\n        $diff_str = html_spellcount($diff[3], LANG_HOUR1, LANG_HOUR2, LANG_HOUR10);\n    } else\n    if ($diff[4]) {\n        $diff_str = html_spellcount($diff[4], LANG_MINUTE_1, LANG_MINUTE2, LANG_MINUTE10);\n    }\n\n    if (!$diff_str) {\n        return LANG_JUST_NOW;\n    } else {\n        return $is_add_back ? sprintf(LANG_DATE_AGO, $diff_str) : $diff_str;\n    }\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 \u0434\u0430\u0442\u0430\u043c\u0438 \u0432 \u0432\u0438\u0434\u0435 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\n *\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b:\n *  0 => \u0447\u0438\u0441\u043b\u043e \u043b\u0435\u0442\n *  1 => \u0447\u0438\u0441\u043b\u043e \u043c\u0435\u0441\u044f\u0446\u0435\u0432\n *  2 => \u0447\u0438\u0441\u043b\u043e \u0434\u043d\u0435\u0439\n *  3 => \u0447\u0438\u0441\u043b\u043e \u0447\u0430\u0441\u043e\u0432\n *  4 => \u0447\u0438\u0441\u043b\u043e \u043c\u0438\u043d\u0443\u0442\n *  5 => \u0447\u0438\u0441\u043b\u043e \u0441\u0435\u043a\u0443\u043d\u0434\n *\n * @author \u041e\u043b\u0435\u0433 \u0421\u0430\u0432\u0432\u0430\u0442\u0435\u0435\u0432 @ http://savvateev.org\n *\n * @param string $date1\n * @param string $date2\n * @return array\n */\nfunction real_date_diff($date1, $date2 = null) {\n\n    $diff = [];\n\n    if (!is_string($date1)) { return false; }\n\n    //\u0415\u0441\u043b\u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u0434\u0430\u0442\u0430 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u0430 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u0435\u0435 \u043a\u0430\u043a \u0442\u0435\u043a\u0443\u0449\u0443\u044e\n    if (!$date2) {\n        $cd = getdate();\n    } else {\n        $cd = getdate(strtotime($date2));\n    }\n\n    $date2 = $cd['year'] . '-' . $cd['mon'] . '-' . $cd['mday'] . ' ' . $cd['hours'] . ':' . $cd['minutes'] . ':' . $cd['seconds'];\n\n    //\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u0434\u0430\u0442\u044b \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\n    $pattern = '/(\\d+)\\-(\\d+)\\-(\\d+)(\\s+(\\d+)\\:(\\d+)\\:(\\d+))?/';\n    preg_match($pattern, $date1, $matches);\n    $d1 = [intval($matches[1]), intval($matches[2]), intval($matches[3]), intval($matches[5]), intval($matches[6]), intval($matches[7])];\n    preg_match($pattern, $date2, $matches);\n    $d2 = [intval($matches[1]), intval($matches[2]), intval($matches[3]), intval($matches[5]), intval($matches[6]), intval($matches[7])];\n\n    //\u0415\u0441\u043b\u0438 \u0432\u0442\u043e\u0440\u0430\u044f \u0434\u0430\u0442\u0430 \u043c\u0435\u043d\u044c\u0448\u0435 \u0447\u0435\u043c \u043f\u0435\u0440\u0432\u0430\u044f, \u043c\u0435\u043d\u044f\u0435\u043c \u0438\u0445 \u043c\u0435\u0441\u0442\u0430\u043c\u0438\n    for ($i = 0; $i < count($d2); $i++) {\n        if ($d2[$i] > $d1[$i]) {\n            break;\n        }\n        if ($d2[$i] < $d1[$i]) {\n            $t  = $d1;\n            $d1 = $d2;\n            $d2 = $t;\n            break;\n        }\n    }\n\n    //\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c \u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0436\u0434\u0443 \u0434\u0430\u0442\u0430\u043c\u0438 (\u043a\u0430\u043a \u0432 \u0441\u0442\u043e\u043b\u0431\u0438\u043a)\n    $md1   = [31, $d1[0] % 4 || (!($d1[0] % 100) && $d1[0] % 400) ? 28 : 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    $md2   = [31, $d2[0] % 4 || (!($d2[0] % 100) && $d2[0] % 400) ? 28 : 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    $min_v = [NULL, 1, 1, 0, 0, 0];\n    $max_v = [NULL, 12, $d2[1] == 1 ? $md2[11] : $md2[$d2[1] - 2], 23, 59, 59];\n    for ($i = 5; $i >= 0; $i--) {\n        if ($d2[$i] < $min_v[$i]) {\n            $d2[$i - 1]--;\n            $d2[$i] = $max_v[$i];\n        }\n        $diff[$i] = $d2[$i] - $d1[$i];\n        if ($diff[$i] < 0) {\n            $d2[$i - 1]--;\n            $i == 2 ? $diff[$i] += $md1[$d1[1] - 1] : $diff[$i] += $max_v[$i] - $min_v[$i] + 1;\n        }\n    }\n\n    //\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n    return $diff;\n}\n\n/**\n * \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u0443\u0435\u0442 \u0434\u0430\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 \"\u0441\u0435\u0433\u043e\u0434\u043d\u044f\", \"\u0432\u0447\u0435\u0440\u0430\", \"1 \u044f\u043d\u0432\u0430\u0440\u044f 2017\"\n *\n * @param string $date \u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0434\u0430\u0442\u0430. \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u043e\u0442\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435, \u0442\u0430\u043a \u0438 timestamp\n * @param boolean $is_time \u0414\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0447\u0430\u0441\u043e\u043c \u0438 \u043c\u0438\u043d\u0443\u0442\u0430\u043c\u0438\n * @return string\n */\nfunction string_date_format($date, $is_time = false) {\n\n    if (is_empty_value($date)) {\n        return '';\n    }\n\n    if (!is_numeric($date)) {\n        $timestamp = strtotime($date);\n    } else {\n        $timestamp = $date;\n    }\n\n    $item_date = date('j F Y', $timestamp);\n\n    $today_date     = date('j F Y');\n    $yesterday_date = date('j F Y', time() - 3600 * 24);\n\n    switch ($item_date) {\n        case $today_date:\n            $result = LANG_TODAY;\n            break;\n        case $yesterday_date:\n            $result = LANG_YESTERDAY;\n            break;\n        default:\n            $result = lang_date($item_date);\n    }\n\n    if ($is_time) {\n\n        $result .= ' ' . LANG_IN . ' ' . date('H:i', $timestamp);\n    }\n\n    return $result;\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {file_name%icon_name} \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 svg \u0438\u043a\u043e\u043d\u043a\u0443\n * \u0433\u0434\u0435 file_name - \u0438\u043c\u044f svg \u0444\u0430\u0439\u043b\u0430 \u043f\u043e \u043f\u0443\u0442\u0438 /templates/\u0448\u0430\u0431\u043b\u043e\u043d/images/icons/\n * icon_name - \u0438\u043c\u044f \u0438\u043a\u043e\u043d\u043a\u0438 svg \u0441\u043f\u0440\u0430\u0439\u0442\u0430\n *\n * @param string $string\n * @return string\n */\nfunction string_replace_svg_icons($string){\n\n    $matches_count = preg_match_all('/{([a-z0-9_\\-]+)%([a-z0-9_\\-]+)}/i', $string, $matches);\n\n    if ($matches_count){\n        for($i=0; $i<$matches_count; $i++){\n\n            $tag  = $matches[0][$i];\n            $file = $matches[1][$i];\n            $name = $matches[2][$i];\n\n            $string = str_replace($tag, html_svg_icon($file, $name, 16, false), $string);\n        }\n    }\n\n    return $string;\n}\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {user.property} \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 property\n * \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 cmsUser\n *\n * @param string $string\n * @return string\n */\nfunction string_replace_user_properties($string) {\n\n    $matches_count = preg_match_all('/{user.([a-z0-9_]+)}/i', $string, $matches);\n\n    if ($matches_count) {\n\n        $user = cmsUser::getInstance();\n\n        for ($i = 0; $i < $matches_count; $i++) {\n\n            $tag      = $matches[0][$i];\n            $property = $matches[1][$i];\n\n            if (isset($user->$property)) {\n                $string = str_replace($tag, $user->$property, $string);\n            }\n        }\n    }\n\n    return $string;\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 $string \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {key}, \u0433\u0434\u0435 key - \u044d\u0442\u043e \u043a\u043b\u044e\u0447\n * \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $data \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n *\n * @param string $string\n * @param array $data\n */\nfunction string_replace_keys_values($string, $data) {\n\n    if (!$string) {\n        return '';\n    }\n\n    if (strpos($string, '{') === false) { return $string; }\n\n    foreach ($data as $k => $v) {\n        if (is_array($v) || is_object($v)) {\n            unset($data[$k]);\n        }\n    }\n\n    $keys = array_map(function ($key) {\n        return '{' . $key . '}';\n    }, array_keys($data));\n\n    return str_replace($keys, array_values($data), $string);\n}\n\n/**\n * \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438 $string \u0432\u0441\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0430 {key}, \u0433\u0434\u0435 key - \u044d\u0442\u043e \u043a\u043b\u044e\u0447\n * \u043c\u0430\u0441\u0441\u0438\u0432\u0430 $data \u0438 \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u0442 \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n * \u043e\u0442\u043b\u0438\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432\u044b\u0448\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c\u0438\n * \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {age|html_spellcount:\u0433\u043e\u0434:\u0433\u043e\u0434\u0430:\u043b\u0435\u0442} \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0430\u043f\u0438\u0448\u0435\u0442 \"21 \u0433\u043e\u0434, 22 \u0433\u043e\u0434\u0430, 29 \u043b\u0435\u0442\"\n * \u043f\u0440\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0438 age 21, 22 \u0438 29 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\n * \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 {nickname:\u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s \u0441\u0430\u043c\u044b\u0439 \u043b\u0443\u0447\u0448\u0438\u0439} \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \"\u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0412\u0430\u0441\u0438\u043b\u0438\u0439 \u0441\u0430\u043c\u044b\u0439 \u043b\u0443\u0447\u0448\u0438\u0439\"\n * \u043f\u0440\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044f nickname \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 $data \"\u0412\u0430\u0441\u0438\u043b\u0438\u0439\"\n *\n * @param string $string\n * @param array $data\n */\nfunction string_replace_keys_values_extended($string, $data) {\n\n    if (!$string) {\n        return '';\n    }\n\n    $matches_count = preg_match_all('/{([\u0430-\u044f\u0451a-z]{1}[^}\\n]+)}/ui', $string, $matches);\n\n    if ($matches_count) {\n\n        for ($i = 0; $i < $matches_count; $i++) {\n\n            $tag      = $matches[0][$i];\n            $property = $matches[1][$i];\n\n            $func                 = false;\n            $func_params          = [];\n            $func_params_prop_key = 0;\n\n            // \u0435\u0441\u0442\u044c \u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439\n            if (strpos($property, '|') !== false) {\n                $params = explode('|', $property);\n                // \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u0444\u0443\u043d\u043a\u0446\u0438\u044f\n                $func   = $params[1];\n                if (function_exists($func) || strpos($func, ':') !== false) {\n\n                    // \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u043a\u0430\u043a $property\n                    $property = $params[0];\n                    // $property \u0441\u0442\u0430\u0432\u0438\u043c \u043a\u0430\u043a \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0444\u0443\u043d\u043a\u0446\u0438\u0438\n                    $func_params = [$property];\n                    // \u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0435\u0441\u0442\u044c \u043b\u0438 \u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\n                    if (strpos($func, ':') !== false) {\n                        $par  = explode(':', $func);\n                        $func = $par[0];\n                        unset($par[0]);\n                        if (function_exists($func)) {\n                            foreach ($par as $k => $p) {\n                                // \u0435\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u043c\u0430\u0441\u0441\u0438\u0432\n                                if (strpos($p, '=') !== false) {\n                                    $out = [];\n                                    parse_str($p, $out);\n                                    $par[$k] = $out;\n                                }\n                            }\n                            $func_params = $func_params + $par;\n                        } else {\n                            $func = false;\n                        }\n                    }\n                } else {\n\n                    // \u0437\u043d\u0430\u0447\u0438\u0442 \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430\n                    $values = explode('|', $property);\n\n                    $string = str_replace($tag, $values[mt_rand(0, (count($values) - 1))], $string);\n\n                    continue;\n                }\n            } else\n            // \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0433\u043d\u0430\u0442\u044c \u0447\u0435\u0440\u0435\u0437 sprintf\n            if (strpos($property, ':') !== false) {\n                $params               = explode(':', $property);\n                $property             = $params[0];\n                $func                 = 'sprintf';\n                $func_params          = array_reverse($params);\n                $func_params_prop_key = 1;\n            }\n\n            // \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043c\u0430\u0441\u0441\u0438\u0432\u0430, \u0442.\u0435. \u043a\u043b\u044e\u0447\u0438 \u0432\u0438\u0434\u0430 {item.key}\n            if (strpos($property, '.') === false) {\n                $data_property = isset($data[$property]) ? $data[$property] : null;\n            } else {\n                $data_property = array_value_recursive($property, $data, '.');\n            }\n\n            if ($data_property !== null && !is_array($data_property) && !is_object($data_property)) {\n\n                if ($func && function_exists($func)) {\n\n                    $func_params[$func_params_prop_key] = $data_property;\n\n                    $data_property = call_user_func_array($func, $func_params);\n                }\n\n                $string = str_replace($tag, $data_property, $string);\n            } else {\n                $string = str_replace($tag, '', $string);\n            }\n        }\n    }\n\n    return $string;\n}\n\n/**\n * \u0414\u0435\u043b\u0430\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0433\u0438\u043f\u0435\u0440\u0441\u0441\u044b\u043b\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0442\u0440\u043e\u043a\u0438\n *\n * @param string $string\n * @return string\n */\nfunction string_make_links($string){\n    return preg_replace('@(https?:\\/\\/([\\-\\w\\.]+[\\-\\w])+(:\\d+)?(\\/([\\w/_\\.#\\-]*(\\?\\S+)?[^\\.\\s])?)?)@', '<a href=\"$1\" class=\"auto-link\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>', $string);\n}\n\n//============================================================================//\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u043c \u0441\u0430\u043c\u044b\u0445 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445\n * \u0441\u043b\u043e\u0432 \u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430\n *\n * @param string $text\n * @param int $min_length \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043b\u043e\u0432\u0430\n * @param int $limit \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0432 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0438\u0440\u0443\u044e\u0449\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0435\n * @return string\n */\nfunction string_get_meta_keywords($text, $min_length = 5, $limit = 10) {\n\n    if(!$text){ return ''; }\n\n    $stat = [];\n\n    $text = str_replace([\"\\n\", '<br>', '<br/>'], ' ', $text);\n    $text = strip_tags($text);\n    $text = mb_strtolower($text);\n\n    $stopwords = string_get_stopwords(cmsCore::getLanguageName());\n\n    $words = explode(' ', $text);\n\n    foreach ($words as $word) {\n\n        $word = trim($word);\n        $word = str_replace(['(', ')', '+', '-', '.', '!', ':', '{', '}', '|', '\"', ',', \"'\"], '', $word);\n        $word = preg_replace(\"/\\.,\\(\\)\\{\\}/ui\", '', $word);\n\n        if ($stopwords && in_array($word, $stopwords)) {\n            continue;\n        }\n\n        if (mb_strlen($word) >= $min_length) {\n            $stat[$word] = isset($stat[$word]) ? $stat[$word] + 1 : 1;\n        }\n    }\n\n    asort($stat);\n    $stat = array_reverse($stat, true);\n    $stat = array_slice($stat, 0, $limit, true);\n\n    return implode(', ', array_keys($stat));\n}\n\n/**\n * \u041f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0442\u0435\u0433\u0435 meta description\n *\n * @param string $text\n * @param int $limit \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\n * @return string\n */\nfunction string_get_meta_description($text, $limit = 250) {\n    return string_short($text, $limit);\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432 \u0441\u0442\u043e\u043f \u0441\u043b\u043e\u0432\n * @staticvar array $words\n * @param string $lang \u042f\u0437\u044b\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 ru, en\n * @return array\n */\nfunction string_get_stopwords($lang = 'ru') {\n    static $words = null;\n    if (isset($words[$lang])) {\n        return $words[$lang];\n    }\n    $file = PATH . '/system/languages/' . $lang . '/stopwords/stopwords.php';\n    if (file_exists($file)) {\n        $words[$lang] = include $file;\n    } else {\n        $words[$lang] = [];\n    }\n    return $words[$lang];\n}\n\n/**\n * \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u0438\u043d\u044b (\u0438\u043b\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f/\u0441\u043b\u043e\u0432\u0430),\n * \u0443\u0434\u0430\u043b\u044f\u044f HTML-\u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0443\n *\n * @param string $string\n * @param integer $length \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\n * @param string $postfix \u0421\u0442\u0440\u043e\u043a\u0430, \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c\u0430\u044f \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443, \u0435\u0441\u043b\u0438 \u0438\u0441\u0445\u043e\u0434\u043d\u0443\u044e \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u043e\u0431\u0440\u0435\u0437\u0430\u0442\u044c\n * @param string $type \u0422\u0438\u043f \u043e\u0431\u0440\u0435\u0437\u043a\u0438:\n *              s (sentence) - \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044e\n *              w (word) - \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u0441\u043b\u043e\u0432\u0443\n *              \u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0438\u043c\u0432\u043e\u043b - \u043e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435\n * @param array $clean_tags \u041c\u0430\u0441\u0441\u0438\u0432 \u0442\u0435\u0433\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0434\u043e \u0432\u044b\u0440\u0435\u0437\u0430\u0442\u044c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c \u043f\u0435\u0440\u0435\u0434 \u043e\u0447\u0438\u0441\u0442\u043a\u043e\u0439\n * @return string\n */\nfunction string_short($string, $length = 0, $postfix = '', $type = 's', $clean_tags = []) {\n\n    if(!$string){ return ''; }\n\n    if ($clean_tags) {\n        $string = preg_replace('#<(' . implode('|', $clean_tags) . ')[^>]*?>.*</\\\\1>#sui', '', $string);\n    }\n\n    // \u0441\u0442\u0440\u043e\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432\n    // \u0438 \u043f\u043e\u0441\u043b\u0435 strip_tags \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u043b\u043e\u0432\u0430\u043c\u0438\n    $string = str_replace([\"\\n\", \"\\r\", '<br>', '<br/>', '</p>'], ' ', $string);\n    $string = strip_tags($string);\n    $string = preg_replace('#\\s\\s+#u', ' ', $string);\n\n    if (!$length || mb_strlen($string) <= $length) {\n        return $string;\n    }\n\n    $length -= min($length, mb_strlen($postfix));\n\n    switch (strtolower($type)) {\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044e\n        case 's':\n            $string = mb_substr($string, 0, $length);\n            preg_match('/^(.+)([\\.!?\u2026]+)(.*)$/u', $string, $matches);\n            if (!empty($matches[2])) {\n                $string = $matches[1] . $matches[2];\n            }\n            break;\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u0441\u043b\u043e\u0432\u0443\n        case 'w':\n            $string = mb_substr($string, 0, $length + 1);\n            preg_match('/^(.*)([\\W]+)(\\w*)$/uU', $string, $matches);\n            if (!empty($matches[1])) {\n                $string = $matches[1];\n            }\n            break;\n        // \u041e\u0431\u0440\u0435\u0437\u0430\u0435\u043c \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f\n        default:\n            $string = mb_substr($string, 0, $length);\n    }\n\n    return $string . $postfix;\n}\n\n/**\n * \u0412\u044b\u0440\u0435\u0437\u0430\u0435\u0442 \u0438\u0437 \u0441\u0442\u0440\u043e\u043a\u0438 CSS/JS-\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438, \u0442\u0430\u0431\u0443\u043b\u044f\u0446\u0438\u0438, \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u044b \u0441\u0442\u0440\u043e\u043a \u0438 \u043b\u0438\u0448\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u0435\u043b\u044b\n *\n * @param string $string\n * @return string\n */\nfunction string_compress($string) {\n\n    $string = preg_replace('!/\\*[^*]*\\*+([^/][^*]*\\*+)*/!', '', $string);\n    $string = preg_replace('/\\s{2,}/', '', $string);\n    $string = str_replace([\"\\r\\n\", \"\\r\", \"\\n\", \"\\t\"], '', $string);\n\n    return $string;\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0432\u0435\u0440\u0445\u043d\u0438\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\n * multi-bytes ucfirst\n *\n * @param string $string\n * @return string\n */\nfunction string_ucfirst($string) {\n    return mb_strtoupper(mb_substr($string, 0, 1)) . mb_substr($string, 1);\n}\n\n//============================================================================//\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438\n *\n * \u0410\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0438 array_column \u0438\u0437 PHP 5.5\n *\n * @param type $collection\n * @param type $key\n * @param type $value\n * @return type\n */\nfunction array_collection_to_list($collection, $key, $value = false) {\n\n    $value = $value ? $value : $key;\n\n    $list = [];\n\n    if (is_array($collection)) {\n        foreach ($collection as $item) {\n            $list[$item[$key]] = $item[$value];\n        }\n    }\n\n    return $list;\n}\n\n/**\n * \u0420\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f array_filter\n * @param array $input\n * @return array\n */\nfunction array_filter_recursive($input) {\n    foreach ($input as &$value) {\n        if (is_array($value)) {\n            $value = array_filter_recursive($value);\n        }\n    }\n    return array_filter($input);\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\n * \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 $needle\n *\n * @param array|string $needle \u041f\u0443\u0442\u044c \u0434\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 key:subkey:subsubkey\n * @param array $haystack \u041c\u0430\u0441\u0441\u0438\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0438\u0449\u0435\u043c\n * @param string $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u044e\u0447\u0435\u0439 \u0432 \u043f\u0443\u0442\u0438, \u0435\u0441\u043b\u0438 $needle \u0441\u0442\u0440\u043e\u043a\u0430\n * @return mixed \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 null, \u0435\u0441\u043b\u0438 \u043a\u043b\u044e\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\n */\nfunction array_value_recursive($needle, $haystack, $delimiter = ':') {\n\n    if (!is_array($haystack)) { return null; }\n\n    $name_parts = !is_array($needle) ? explode($delimiter, $needle) : $needle;\n\n    foreach ($name_parts as $name) {\n        if (!is_array($haystack) || !array_key_exists($name, $haystack)) {\n            return null;\n        } else {\n            $haystack = $haystack[$name];\n            if ($haystack === null) {\n                $haystack = false;\n            }\n        }\n    }\n\n    return $haystack;\n}\n\n/**\n * \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430 \u043c\u0430\u0441\u0441\u0438\u0432\n * \u043f\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0439 $path\n *\n * @param array|string $path \u041f\u0443\u0442\u044c \u0434\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 key:subkey:subsubkey\n * @param array $array \u0418\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432\n * @param mixed $value \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430\n * @param string $delimiter \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043a\u043b\u044e\u0447\u0435\u0439 \u0432 \u043f\u0443\u0442\u0438, \u0435\u0441\u043b\u0438 $path \u0441\u0442\u0440\u043e\u043a\u0430\n * @return mixed \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 $array\n */\nfunction set_array_value_recursive($path, $array, $value, $delimiter = ':') {\n\n    $name_parts = !is_array($path) ? explode($delimiter, $path) : $path;\n\n    $_array = &$array;\n\n    foreach ($name_parts as $name) {\n        $_array = &$_array[$name];\n    }\n\n    $_array = $value;\n\n    return $array;\n}\n\n/**\n * \u0421\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442 \u0434\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u043f\u043e \u043f\u043e\u043b\u044e (\u043f\u043e\u043b\u044f\u043c)\n *\n * $fields \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u043c\u044f \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438,\n * \u0442\u0430\u043a \u0438 \u043c\u0430\u0441\u0441\u0438\u0432 \u043f\u043e\u043b\u0435\u0439 \u0441 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043e\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\n * array(array('by' => 'ordering', 'to' => 'asc'), array('by' => 'title', 'to' => 'desc'))\n *\n * @param array &$array\n * @param string | array $fields\n * @param string $direction\n * @return boolean\n */\nfunction array_order_by(&$array, $fields, $direction = 'asc') {\n\n    if (!$array) { return false; }\n\n    if (is_string($fields)) {\n        $list = [[\n            'by' => $fields,\n            'to' => $direction\n        ]];\n    } else {\n        $list = $fields;\n    }\n\n    $args = [];\n\n    foreach ($array as $k => $item) {\n\n        $key = 0;\n\n        foreach ($list as $order) {\n            $args[$key][$k] = $item[$order['by']];\n            $key++;\n            $args[$key] = constant('SORT_' . strtoupper($order['to']));\n            $key++;\n        }\n    }\n\n    $args[] = &$array;\n\n    return call_user_func_array('array_multisort', $args);\n}\n\nfunction multi_array_unique($array) {\n\n    $result = array_map('unserialize', array_unique(array_map('serialize', $array)));\n\n    foreach ($result as $key => $value) {\n        if (is_array($value)) {\n            $result[$key] = multi_array_unique($value);\n        }\n    }\n\n    return $result;\n}\n\n/**\n * \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u044f\u0437\u044b\u043a\u0430\n *\n * @param string $field \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0431\u0435\u0437 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430\n * @param array $data \u041c\u0430\u0441\u0441\u0438\u0432 \u0434\u0430\u043d\u043d\u044b\u0445\n * @return mixed\n */\nfunction get_localized_value($field, $data) {\n\n    $lang = cmsCore::getLanguageHrefPrefix();\n\n    $field_lang = $field . ($lang ? '_' . $lang : '');\n\n    // \u0415\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0451\u043d\u043d\u043e\u0435\n    if (array_key_exists($field_lang, $data)) {\n        return $data[$field_lang];\n    }\n\n    // \u0415\u0441\u0442\u044c \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430\n    if (array_key_exists($field, $data)) {\n        return $data[$field];\n    }\n\n    return null;\n}\n\n/**\n * \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u0443\u0435\u0442 \u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439\n *\n * @param float $value \u0427\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439\n * @param integer $decimals \u041a\u043e\u043b-\u0432\u043e \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439\n * @param integer $thousands_sep \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u0442\u044b\u0441\u044f\u0447\u0435\u0439\n * @return string\n */\nfunction nf_amount($value, $decimals = 2, $thousands_sep = ' ') {\n\n    $value = number_format(floatval($value), $decimals, '.', $thousands_sep);\n\n    return strpos($value, '.') !== false ? rtrim(rtrim($value, '0'), '.') : $value;\n}\n\n/**\n * \u041f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u0447\u0438\u0441\u043b\u043e \u0441 \u043f\u043b\u0430\u0432\u0430\u044e\u0449\u0435\u0439 \u0442\u043e\u0447\u043a\u043e\u0439 \u043a \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0432\u0438\u0434\u0443\n *\n * @param float $value\n * @return string\n */\nfunction bc_format($value) {\n    return sprintf('%.'.BCMATHSCALE.'f', $value);\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 ipv4/ipv6 \u0430\u0434\u0440\u0435\u0441 \u0432\n * \u0443\u043f\u0430\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f\n *\n * @param string $ip\n * @return string\n */\nfunction string_iptobin($ip) {\n    if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4)) {\n        return current(unpack('A4', inet_pton($ip)));\n    } elseif (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV6)) {\n        return current(unpack('A16', inet_pton($ip)));\n    } else {\n        return null;\n    }\n}\n\n/**\n * \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u0443\u043f\u0430\u043a\u043e\u0432\u0430\u043d\u043d\u044b\u0439 ipv4/ipv6 \u0430\u0434\u0440\u0435\u0441 \u0432\n * \u0447\u0438\u0442\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442\n *\n * @param string $str\n * @return string\n */\nfunction string_bintoip($str) {\n    if(!$str){ return null; }\n    $len = strlen($str);\n    if($len < 4){ $len = 4; }\n    if ($len === 16 || $len === 4) {\n        return inet_ntop(pack('A' . $len, $str));\n    } else {\n        return null;\n    }\n}\n\n/**\n * \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043b\u043e\u043a\u0430\u0446\u0438\u044e \u043f\u043e ip \u0430\u0434\u0440\u0435\u0441\u0443\n *\n * @param string $ip\n * @param boolean $return_array\n * @return string|array\n */\nfunction string_ip_to_location($ip, $return_array = false) {\n\n    // \u0421\u0442\u0430\u0440\u0430\u044f \u0431\u0430\u0437\u0430\n    // \u0422\u0435\u043e\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c https://github.com/maxmind/GeoIP2-php\n    if(function_exists('geoip_record_by_name')){\n\n        $location  = [];\n\n        $data = geoip_record_by_name($ip);\n\n        if($return_array && !empty($data['country_code'])){\n            $location['code'] = $data['country_code'];\n        }\n\n        if(!empty($data['country_name'])){\n            $location['country'] = $data['country_name'];\n        }\n\n        if(!empty($data['city'])){\n            $location['city'] = $data['city'];\n        }\n\n        return $return_array ? $location : implode(', ', $location);\n    }\n\n    return $return_array ? [] : '';\n}\n\n/**\n * \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0438\u0437 HTML \u0442\u0435\u043a\u0441\u0442\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u0442\u0438\n * \u0438\u0437 \u0442\u0435\u0433\u043e\u0432 <img>\n *\n * @param string $text\n * @return array\n */\nfunction string_html_get_images_path($text) {\n\n    $upload_root = cmsConfig::get('upload_root');\n\n    $matches = $paths = [];\n\n    preg_match_all('#<img src=\"([^\"]+)\"#uis', $text, $matches, PREG_SET_ORDER);\n\n    if($matches){\n        foreach($matches as $match){\n\n            if(empty($match[1])){ continue; }\n            if(strpos($match[1], 'http') === 0){ continue; }\n\n            $path = $match[1];\n\n            if(strpos($path, $upload_root) === 0){\n                $path = str_replace($upload_root, '', $path);\n            }\n\n            $paths[] = $path;\n        }\n    }\n\n    return $paths;\n}\n\n/**\n * \u041a\u043e\u0434\u0438\u0440\u0443\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0447\u0430\u0441\u0442\u0438 URL\n *\n * @param string $str\n * @return string\n */\nfunction string_urlencode($str) {\n\n    $str = urlencode($str);\n\n    return str_replace(['%2F'], ['%252f'], $str);\n}\n\n/**\n * \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435\n * @param mixed $value\n * @return boolean\n */\nfunction is_empty_value($value) {\n    return empty($value) && !is_numeric($value);\n}\n//============================================================================//\n\n/**\n * \u0412\u044b\u0432\u043e\u0434\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0432\u043d\u043e\n * \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438\n *\n * @param mixed $var\n * @param boolean $halt\n*/\nfunction dump($var, $halt = true) {\n    echo '<pre>';\n    print_r($var);\n    echo '</pre>';\n    if ($halt) { die(); }\n}\n", "<?php $this->addTplJSNameFromContext('files'); ?>\n<?php if ($field->title) { ?><label><?php echo $field->title; ?></label><?php } ?>\n\n<?php if ($value){ ?>\n    <?php $file = is_array($value) ? $value : cmsModel::yamlToArray($value); ?>\n    <div id=\"file_<?php echo $field->element_name; ?>\" class=\"value\">\n        <span class=\"name h5\">\n            <a href=\"<?php echo $field->getDownloadURL($file); ?>\"><?php echo $file['name']; ?></a>\n        </span>\n        <span class=\"size mx-2\"><?php echo files_format_bytes($file['size']); ?></span>\n        <a class=\"btn btn-sm btn-danger delete\" href=\"javascript:\" onclick=\"icms.files.remove('<?php echo $field->element_name; ?>')\" title=\"<?php echo LANG_DELETE; ?>\" data-toggle=\"tooltip\" data-placement=\"right\">\n            <?php html_svg_icon('solid', 'minus-circle'); ?>\n        </a>\n    </div>\n<?php } ?>\n\n<div id=\"file_<?php echo $field->element_name; ?>_upload\" <?php if ($value) { ?>style=\"display:none\"<?php } ?>>\n    <div class=\"input-group mb-1\">\n        <div class=\"custom-file\">\n            <?php echo html_file_input($field->element_name, $field->data['attributes']); ?>\n            <label class=\"custom-file-label\" for=\"<?php echo $field->id; ?>\" data-browse=\"<?php echo LANG_SELECT; ?>\"><?php echo LANG_PARSER_FILE; ?></label>\n        </div>\n    </div>\n    <?php echo html_input('hidden', $field->element_name, ''); ?>\n    <?php if($field->data['allowed_extensions']){ ?>\n        <div class=\"hint text-muted small\"><?php printf(LANG_PARSER_FILE_EXTS_FIELD_HINT, implode(', ', array_map(function($val) { return trim($val); }, explode(',', mb_strtoupper($field->data['allowed_extensions']))))); ?></div>\n    <?php } ?>\n    <?php if($field->data['max_size_mb']){ ?>\n        <div class=\"hint text-muted small\"><?php printf(LANG_PARSER_FILE_SIZE_FIELD_HINT, files_format_bytes($field->data['max_size_mb'])); ?></div>\n    <?php } ?>\n</div>\n\n<?php ob_start(); ?>\n<script>\n    $(function(){\n        $('#<?php echo $field->id; ?>').on('change',function(){\n            $(this).next('.custom-file-label').text($(this).val().replace('C:\\\\fakepath\\\\', ''));\n        });\n    });\n</script>\n<?php $this->addBottom(ob_get_clean()); ?>", "<?php if(!$rows){ ?>\n<p class=\"alert alert-warning mt-4\" role=\"alert\"><?php echo LANG_CP_WIDGETS_ROW_NONE; ?></p>\n<?php } ?>\n<?php foreach ($rows as $row) { ?>\n<div class=\"row no-gutters widgets-layout-scheme align-items-center<?php if($row['parent_id']){ ?> disable-sortable<?php } ?>\" id=\"row-<?php echo $row['id']; ?>\" data-id=\"<?php echo $row['id']; ?>\">\n    <div class=\"layout-row-title <?php if(!$row['parent_id'] ){ ?>layout-row-parent<?php } ?> col-sm-12 <?php if(!$row['parent_id'] && $rows_titles_pos == 'left'){ ?> col-lg-2<?php } ?> filled p-2 <?php if($rows_titles_pos == 'hide'){ ?>d-none<?php } else { ?>d-flex<?php } ?> justify-content-between\">\n        {cell:<?php echo $row['title']; ?>}\n        <div class=\"layout-scheme-actions align-items-center\">\n            <a class=\"add mr-1 text-success text-decoration-none add-scheme-row ajax-modal\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['col_add', $row['id']]); ?>\" title=\"<?php echo LANG_CP_WIDGETS_ADD_COL; ?>\">\n                <i class=\"icon-plus icons\"></i>\n            </a>\n            <a class=\"edit mr-1 text-decoration-none edit-scheme-row ajax-modal\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['row_edit', $row['id']]); ?>\" title=\"<?php echo LANG_EDIT; ?>\">\n                <i class=\"icon-pencil icons\"></i>\n            </a>\n            <a class=\"delete text-danger text-decoration-none delete-scheme-row\" data-toggle=\"tooltip\" data-placement=\"top\" href=\"<?php echo $this->href_to('widgets', ['row_delete', $row['id']]); ?>\" title=\"<?php echo LANG_DELETE; ?>\" onclick=\"return confirm('<?php echo LANG_CP_WIDGETS_ROW_DEL_CONFIRM; ?>')\">\n                <i class=\"icon-close icons\"></i>\n            </a>\n        </div>\n    </div>\n    <?php if(!$row['parent_id']){ ?>\n        <div class=\"w-100 d-md-none\"></div>\n    <?php } ?>\n    <div class=\"col-sm-12 layout-row-body <?php if(!$row['parent_id'] ){ ?>layout-row-parent<?php } ?> <?php if(!$row['parent_id'] && $rows_titles_pos == 'left'){ ?>col-lg-10<?php } ?> bg-white\">\n        <div class=\"row no-gutters widgets-layout-scheme-col-wrap <?php html($row['options']['vertical_align']); ?> <?php html($row['options']['horizontal_align']); ?>\">\n        <?php foreach ($row['cols'] as $col) { ?>\n            <?php if(!empty($col['options']['cut_before'])){ ?>\n                <div class=\"w-100\"></div>\n            <?php } ?>\n            <?php\n            $width_hint = LANG_AUTO; $col_class = 'col-sm'; $col_width_list = [];\n            foreach ($col['options'] as $key => $value) {\n                if(strpos($key, 'col_') === false){\n                    continue;\n                }\n                if(empty($col['options'][$key])){\n                    continue;\n                }\n                $col_type = preg_replace('#(col\\-[a-z]+\\-)#ui', '', $value);\n                if(is_numeric($col_type)){\n                    $width_hint = round((8.333333333*$col_type), 2).'%';\n                    $col_width_list[] = $width_hint;\n                } elseif($col_type === 'auto'){\n                    $width_hint = LANG_CP_WIDGETS_COL_AUTO;\n                }\n                $col_class = $value;\n            }\n            ?>\n            <div class=\"<?php echo $col_class; ?> p-1 bg-white widgets-layout-scheme-col\" id=\"col-<?php echo $col['id']; ?>\" data-id=\"<?php echo $col['id']; ?>\">\n                <?php if(!empty($col['rows']['before'])){ ?>\n                    <?php $this->renderChild('widgets_scheme', ['rows' => $col['rows']['before'], 'rows_titles_pos' => $rows_titles_pos]); ?>\n                <?php } ?>\n                <div class=\"layout-col-title d-flex justify-content-between\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"<?php html($col['name'].($col_width_list ? ': '.implode(', ', $col_width_list) : '')); ?>\">\n                    <span><?php echo $col['title']; ?> (<?php echo $width_hint; ?>)</span>\n                    <div class=\"layout-scheme-actions d-flex align-items-center\">\n                        <?php if(!$row['parent_id']){ ?>\n                        <a class=\"add mr-2 text-white text-decoration-none add-scheme-col ajax-modal\" href=\"<?php echo $this->href_to('widgets', ['row_add_ns', $col['id']]); ?>\" title=\"<?php echo LANG_CP_WIDGETS_ADD_ROW_P; ?>\">\n                            <i class=\"icon-plus icons d-block\"></i>\n                        </a>\n                        <?php } ?>\n                        <a class=\"edit mr-2 text-white text-decoration-none edit-scheme-col ajax-modal\" href=\"<?php echo $this->href_to('widgets', ['col_edit', $col['id']]); ?>\" title=\"<?php echo LANG_EDIT; ?>\">\n                            <i class=\"icon-pencil icons d-block\"></i>\n                        </a>\n                        <a class=\"delete text-warning text-decoration-none delete-scheme-col\" href=\"<?php echo $this->href_to('widgets', ['col_delete', $col['id']]); ?>\" title=\"<?php echo LANG_DELETE; ?>\" onclick=\"return confirm('<?php echo LANG_CP_WIDGETS_COL_DEL_CONFIRM; ?>')\">\n                            <i class=\"icon-close icons d-block\"></i>\n                        </a>\n                    </div>\n                </div>\n                {position:<?php echo $col['name']; ?>}\n                <?php if(!empty($col['rows']['after'])){ ?>\n                    <?php $this->renderChild('widgets_scheme', ['rows' => $col['rows']['after'], 'rows_titles_pos' => $rows_titles_pos]); ?>\n                <?php } ?>\n            </div>\n        <?php } ?>\n        </div>\n    </div>\n</div>\n<?php } ?>", "var icms = icms || {};\n\nicms.files = (function ($) {\n\n    this.url_delete = '';\n\n    this.remove = function(file_id){\n\n        $('#f_'+file_id+' #file_'+file_id).remove();\n        $('#f_'+file_id+' #file_'+file_id+'_upload').show();\n        $('#f_'+file_id+' input:hidden[name='+file_id+']').val('1');\n\n        icms.events.run('icms_files_remove', file_id);\n\n    };\n\n    this.deleteByPath = function(path){\n        $.post(this.url_delete, {path: path, csrf_token: icms.forms.getCsrfToken()}, function(result){\n            if (result.error){\n                alert(result.message);\n                return false;\n            }\n        }, 'json');\n    };\n\n\treturn this;\n\n}).call(icms.files || {},jQuery);", "/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(ie,e){\"use strict\";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement(\"script\");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[i.call(e)]||\"object\":typeof e}var t=\"3.7.1\",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&\"length\"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:\"jQuery\"+(t+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==i.call(e))&&(!(t=r(e))||\"function\"==typeof(n=ue.call(t,\"constructor\")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n=\"\",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||\"HTML\")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),\"function\"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",ve=new RegExp(\"^\"+ge+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+ge+\"+$\",\"g\");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;function p(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e}ce.escapeSelector=function(e){return(e+\"\").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",t=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",p=\"\\\\[\"+ge+\"*(\"+t+\")(?:\"+ge+\"*([*^$|!~]?=)\"+ge+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+t+\"))|)\"+ge+\"*\\\\]\",g=\":(\"+t+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+p+\")*)|.*)\\\\)|)\",v=new RegExp(ge+\"+\",\"g\"),y=new RegExp(\"^\"+ge+\"*,\"+ge+\"*\"),m=new RegExp(\"^\"+ge+\"*([>+~]|\"+ge+\")\"+ge+\"*\"),x=new RegExp(ge+\"|>\"),j=new RegExp(g),A=new RegExp(\"^\"+t+\"$\"),D={ID:new RegExp(\"^#(\"+t+\")\"),CLASS:new RegExp(\"^\\\\.(\"+t+\")\"),TAG:new RegExp(\"^(\"+t+\"|[*])\"),ATTR:new RegExp(\"^\"+p),PSEUDO:new RegExp(\"^\"+g),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+ge+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+ge+\"*(?:([+-]|)\"+ge+\"*(\\\\d+)|))\"+ge+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+f+\")$\",\"i\"),needsContext:new RegExp(\"^\"+ge+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+ge+\"*((?:-\\\\d)?\\\\d*)\"+ge+\"*\\\\)|)(?=[^-]|$)\",\"i\")},N=/^(?:input|select|textarea|button)$/i,q=/^h\\d$/i,L=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,H=/[+~]/,O=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+ge+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),P=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,\"fieldset\")},{dir:\"parentNode\",next:\"legend\"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+\" \"]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute(\"id\"))?s=ce.escapeSelector(s):e.setAttribute(\"id\",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+Q(l[o]);c=l.join(\",\")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return re(t.replace(ve,\"$1\"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,\"input\")&&e.type===t}}function _(t){return function(e){return(fe(e,\"input\")||fe(e,\"button\"))&&e.type===t}}function z(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener(\"unload\",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,\"*\")}),le.scope=$(function(){return T.querySelectorAll(\":scope\")}),le.cssHas=$(function(){try{return T.querySelector(\":has(*,:jqfake)\"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML=\"<a id='\"+S+\"' href='' disabled='disabled'></a><select id='\"+S+\"-\\r\\\\' disabled='disabled'><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||d.push(\"\\\\[\"+ge+\"*(?:value|\"+f+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||d.push(\"~=\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||d.push(\".#.+[+~]\"),e.querySelectorAll(\":checked\").length||d.push(\":checked\"),(t=T.createElement(\"input\")).setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&d.push(\":enabled\",\":disabled\"),(t=T.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||d.push(\"\\\\[\"+ge+\"*name\"+ge+\"*=\"+ge+\"*(?:''|\\\"\\\")\")}),le.cssHas||d.push(\":has\"),d=d.length&&new RegExp(d.join(\"|\")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+\" \"]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||\"\").replace(O,P),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+\" \"];return t||(t=new RegExp(\"(^|\"+ge+\")\"+e+\"(\"+ge+\"|$)\"))&&s(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(v,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(d,e,t,h,g){var v=\"nth\"!==d.slice(0,3),y=\"last\"!==d.slice(-4),m=\"of-type\"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?\"nextSibling\":\"previousSibling\",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u=\"only\"===d&&!s&&\"nextSibling\"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,\"$1\"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||\"\")||I.error(\"unsupported lang: \"+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,\"input\")&&!!e.checked||fe(e,\"option\")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,\"input\")&&\"button\"===e.type||fe(e,\"button\")},text:function(e){var t;return fe(e,\"input\")&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve,\" \")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&\"parentNode\"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace(ve,\"$1\"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+\" \"];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split(\"\").sort(l).join(\"\")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement(\"fieldset\"))}),ce.find=I,ce.expr[\":\"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,\"string\"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,\"parentNode\")},parentsUntil:function(e,t,n){return d(e,\"parentNode\",n)},next:function(e){return A(e,\"nextSibling\")},prev:function(e){return A(e,\"previousSibling\")},nextAll:function(e){return d(e,\"nextSibling\")},prevAll:function(e){return d(e,\"previousSibling\")},nextUntil:function(e,t,n){return d(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return d(e,\"previousSibling\",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,\"template\")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\\x20\\t\\r\\n\\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",ce.Callbacks(\"memory\"),ce.Callbacks(\"memory\"),2],[\"resolve\",\"done\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",ce.Callbacks(\"once memory\"),ce.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener(\"DOMContentLoaded\",P),ie.removeEventListener(\"load\",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)[\"catch\"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,\"complete\"===C.readyState||\"loading\"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener(\"DOMContentLoaded\",P),ie.addEventListener(\"load\",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,\"ms-\").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(U,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks(\"once memory\").add(function(){_.remove(e,[t+\"queue\",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=_.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,Y=new RegExp(\"^(?:([+-])=|)(\"+G+\")([a-z%]*)$\",\"i\"),Q=[\"Top\",\"Right\",\"Bottom\",\"Left\"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&K(e)&&\"none\"===ce.css(e,\"display\")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,\"\")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(ce.cssNumber[t]||\"px\"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=_.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ne[s]=u)))):\"none\"!==n&&(l[c]=\"none\",_.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,Ce=/^$|^module$|\\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement(\"div\")),(be=C.createElement(\"input\")).setAttribute(\"type\",\"radio\"),be.setAttribute(\"checked\",\"checked\"),be.setAttribute(\"name\",\"t\"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML=\"<textarea>x</textarea>\",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML=\"<option></option>\",le.option=!!xe.lastChild;var ke={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function Se(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],\"globalEval\",!t||_.get(t[n],\"globalEval\"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var je=/<|&#?\\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(Te.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),\"script\"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||\"\")&&n.push(o)}return f}var De=/^([^.]*)(?:\\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(D)||[\"\"]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(D)||[\"\"]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,\"events\")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,\"input\")&&He(t,\"click\"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,\"input\")&&_.get(t,\"click\")||fe(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:\"focusin\",blur:\"focusout\"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,\"handle\"),n=ce.event.fix(e);n.type=\"focusin\"===e.type?\"focus\":\"blur\",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Me=/^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$/g;function Re(e,t){return fe(e,\"table\")&&fe(11!==t.nodeType?t:t.firstChild,\"tr\")&&ce(e).children(\"tbody\")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function We(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&\"string\"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,\"script\"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||\"\")&&!_.access(u,\"globalEval\")&&ce.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):m(u.textContent.replace(Me,\"\"),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,\"script\")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,\"script\")).length&&Ee(a,!f&&Se(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp(\"^(\"+G+\")(?!px)[a-z%]+$\",\"i\"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join(\"|\"),\"i\");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,\"$1\")||void 0),\"\"!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+\"\":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement(\"div\"),l=C.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",le.clearCloneStyle=\"content-box\"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement(\"table\"),t=C.createElement(\"tr\"),n=C.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"box-sizing:content-box;border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=[\"Webkit\",\"Moz\",\"ms\"],Je=C.createElement(\"div\").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},nt={letterSpacing:\"0\",fontWeight:\"400\"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function it(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0,l=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?(\"content\"===n&&(u-=ce.css(e,\"padding\"+Q[a],!0,i)),\"margin\"!==n&&(u-=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i))):(u+=ce.css(e,\"padding\"+Q[a],!0,i),\"padding\"!==n?u+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i):s+=ce.css(e,\"border\"+Q[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,r),o=i,a=Ge(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a=\"auto\"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===ce.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===ce.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?\"\":\"px\")),le.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),\"normal\"===i&&t in nt&&(i=nt[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each([\"height\",\"width\"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===ce.css(e,\"boxSizing\",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,\"border\",!1,i)-.5)),s&&(r=Y.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,\"marginLeft\"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),ce.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?\"\":\"px\")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=Q[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=[\"*\"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,\"fxshow\");for(r in n.queue||(null==(a=ce._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,\"display\")),\"none\"===(c=ce.css(e,\"display\"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,\"display\"),re([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===ce.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=_.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,\"fxshow\"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&\"object\"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=_.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt(\"show\"),slideUp:gt(\"hide\"),slideToggle:gt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement(\"input\"),ct=C.createElement(\"select\").appendChild(C.createElement(\"option\")),lt.type=\"checkbox\",le.checkOn=\"\"!==lt.value,le.optSelected=ct.selected,(lt=C.createElement(\"input\")).value=\"t\",lt.type=\"radio\",le.radioValue=\"t\"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&\"radio\"===t&&fe(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(\" \")}function Ct(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function kt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,\"tabindex\");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++)i=e[o],n.indexOf(\" \"+i+\" \")<0&&(n+=i+\" \");a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&\" \"+Tt(r)+\" \"){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(\" \"+i+\" \"))n=n.replace(\" \"+i+\" \",\" \")}a=Tt(n),r!==a&&this.setAttribute(\"class\",a)}}):this:this.attr(\"class\",\"\")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s=\"string\"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):\"boolean\"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&\"boolean\"!==a||((r=Ct(this))&&_.set(this,\"__className__\",r),this.setAttribute&&this.setAttribute(\"class\",r||!1===t?\"\":_.get(this,\"__className__\")||\"\"))}))},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+Tt(Ct(n))+\" \").indexOf(t))return!0;return!1}});var St=/\\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?\"\":e+\"\"})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(St,\"\"):null==e?\"\":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,\"value\");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,\"optgroup\"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each([\"radio\",\"checkbox\"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\\?/;ce.parseXML=function(e){var t,n;if(!e||\"string\"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,\"text/xml\")}catch(e){}return n=t&&t.getElementsByTagName(\"parsererror\")[0],t&&!n||ce.error(\"Invalid XML: \"+(n?ce.map(n.childNodes,function(e){return e.textContent}).join(\"\\n\"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,\"type\")?e.type:e,h=ue.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[ce.expando]?e:new ce.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,\"events\")||Object.create(null))[e.type]&&_.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\\[\\]$/,Lt=/\\r?\\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==x(e))i(n,e);else for(t in e)Pt(n+\"[\"+t+\"]\",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join(\"&\")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,\"elements\");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(\":disabled\")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,\"\\r\\n\")}}):{name:t.name,value:n.replace(Lt,\"\\r\\n\")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\\/\\//,Bt={},_t={},zt=\"*/\".concat(\"*\"),Xt=C.createElement(\"a\");function Ut(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":zt,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+\"\").replace($t,Et.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(D)||[\"\"],null==v.crossDomain){r=C.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+\"//\"+Xt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(Mt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(At.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,\"$1\"),o=(At.test(f)?\"&\":\"?\")+\"_=\"+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader(\"If-None-Match\",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+zt+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray(\"script\",v.dataTypes)&&ce.inArray(\"json\",v.dataTypes)<0&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(ce.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--ce.active||ce.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,\"json\")},getScript:function(e,t){return ce.get(e,void 0,t,\"script\")}}),ce.each([\"get\",\"post\"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&\"withCredentials\"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),ce.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\\?(?=&|$)|\\?\\?/;ce.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Kt.pop()||ce.expando+\"_\"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Zt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||ce.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),\"script\"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&ce.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?ce(\"<div>\").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,\"position\"),c=ce(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=ce.css(e,\"top\"),u=ce.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===ce.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===ce.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,\"borderTopWidth\",!0),i.left+=ce.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-ce.css(r,\"marginTop\",!0),left:t.left-i.left-ce.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===ce.css(e,\"position\"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each([\"top\",\"left\"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+\"px\":t})}),ce.each({Height:\"height\",Width:\"width\"},function(a,s){ce.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.on(\"mouseenter\",e).on(\"mouseleave\",t||e)}}),ce.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?\"\":(e+\"\").replace(en,\"$1\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},\"undefined\"==typeof e&&(ie.jQuery=ie.$=ce),ce});", "!function(e){e([\"jquery\"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e(\"#\"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function s(e){C=e}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o)}function c(t){var o=m();return v||n(o),t&&0===e(\":focus\",t).length?void h(t):void(v.children().length&&v.remove())}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(\":focus\",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0)}function d(t){return v=e(\"<div/>\").attr(\"id\",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:\"toast\",containerId:\"toast-container\",debug:!1,showMethod:\"fadeIn\",showDuration:300,showEasing:\"swing\",onShown:void 0,hideMethod:\"fadeOut\",hideDuration:1e3,hideEasing:\"swing\",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:\"toast-error\",info:\"toast-info\",success:\"toast-success\",warning:\"toast-warning\"},iconClass:\"toast-info\",positionClass:\"toast-top-right\",timeOut:5e3,titleClass:\"toast-title\",messageClass:\"toast-message\",escapeHtml:!1,target:\"body\",closeHtml:'<button type=\"button\">&times;</button>',closeClass:\"toast-close-button\",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:\"toast-progress\",rtl:!1}}function f(e){C&&C(e)}function g(t){function o(e){return null==e&&(e=\"\"),e.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#39;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function s(){c(),u(),d(),p(),g(),C(),l(),i()}function i(){var e=\"\";switch(t.iconClass){case\"toast-success\":case\"toast-info\":e=\"polite\";break;default:e=\"assertive\"}I.attr(\"aria-live\",e)}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0)}),E.onclick&&I.click(function(e){E.onclick(e),b()})}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)))}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y)}function l(){E.newestOnTop?v.prepend(I):v.append(I)}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M)}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B)}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr(\"role\",\"button\"),I.prepend(j))}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q))}function C(){E.rtl&&I.addClass(\"rtl\")}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message}return!1}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(\":focus\",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&\"hidden\"!==P.state&&E.onHidden(),P.state=\"hidden\",P.endTime=new Date,f(P)}})}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime)}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing})}function x(){var e=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;q.width(e+\"%\")}var E=m(),y=t.iconClass||E.iconClass;if(\"undefined\"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e(\"<div/>\"),M=e(\"<div/>\"),B=e(\"<div/>\"),q=e(\"<div/>\"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:\"visible\",startTime:new Date,options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(\":visible\")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0))}var v,C,w,T=0,O={error:\"error\",info:\"info\",success:\"success\",warning:\"warning\"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:\"2.1.4\",warning:a};return b}()})}(\"function\"==typeof define&&define.amd?define:function(e,t){\"undefined\"!=typeof module&&module.exports?module.exports=t(require(\"jquery\")):window.toastr=t(window.jQuery)});", "/*\n\tRedactor v9.2.6\n\tUpdated: Jul 19, 2014\n    Modified By InstantCMS Team\n\thttp://imperavi.com/redactor/\n\tCopyright (c) 2009-2014, Imperavi LLC.\n\tLicense: http://imperavi.com/redactor/license/\n\tUsage: $('#content').redactor();\n*/\n(function($)\n{\n\tvar uuid = 0;\n\n\t\"use strict\";\n\n\tvar Range = function(range)\n\t{\n\t\tthis[0] = range.startOffset;\n\t\tthis[1] = range.endOffset;\n\n\t\tthis.range = range;\n\n\t\treturn this;\n\t};\n\n\tRange.prototype.equals = function()\n\t{\n\t\treturn this[0] === this[1];\n\t};\n\n\tvar reUrlYoutube = /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig;\n\tvar reUrlVimeo = /https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/;\n    var reUrlFacebook = /^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:facebook\\.com(?:\\/[^\\/]+\\/videos\\/|\\/video\\.php\\?v=))([0-9]+)(?:.+)?$/;\n\tvar reUrlRutube = /^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru\\/video\\/)([a-z0-9]+)(?:.+)?$/;\n\n\t$.fn.redactor = function(options)\n\t{\n\t\tvar val = [];\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tif (typeof options === 'string')\n\t\t{\n\t\t\tthis.each(function()\n\t\t\t{\n\t\t\t\tvar instance = $.data(this, 'redactor');\n\t\t\t\tif (typeof instance !== 'undefined' && $.isFunction(instance[options]))\n\t\t\t\t{\n\t\t\t\t\tvar methodVal = instance[options].apply(instance, args);\n\t\t\t\t\tif (methodVal !== undefined && methodVal !== instance) val.push(methodVal);\n\t\t\t\t}\n\t\t\t\telse return $.error('No such method \"' + options + '\" for Redactor');\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.each(function()\n\t\t\t{\n\t\t\t\tif (!$.data(this, 'redactor')) $.data(this, 'redactor', Redactor(this, options));\n\t\t\t});\n\t\t}\n\n\t\tif (val.length === 0) return this;\n\t\telse if (val.length === 1) return val[0];\n\t\telse return val;\n\n\t};\n\n\tfunction Redactor(el, options)\n\t{\n\t\treturn new Redactor.prototype.init(el, options);\n\t}\n\n\t$.Redactor = Redactor;\n\t$.Redactor.VERSION = '9.2.6';\n\t$.Redactor.opts = {\n\n\t\t\trangy: false,\n\n\t\t\tiframe: false,\n\t\t\tfullpage: false,\n\t\t\tcss: false,\n\n\t\t\tlang: 'en',\n\t\t\tdirection: 'ltr',\n\n\t\t\tplaceholder: false,\n\n\t\t\ttypewriter: false,\n\t\t\twym: false,\n\t\t\tmobile: true,\n\t\t\tcleanup: true,\n\t\t\ttidyHtml: true,\n\t\t\tpastePlainText: false,\n\t\t\tremoveEmptyTags: true,\n\t\t\tcleanSpaces: true,\n\t\t\tcleanFontTag: true,\n\t\t\ttemplateVars: false,\n\t\t\txhtml: false,\n\n\t\t\tvisual: true,\n\t\t\tfocus: false,\n\t\t\ttabindex: false,\n\t\t\tautoresize: true,\n\t\t\tminHeight: false,\n\t\t\tmaxHeight: false,\n\t\t\tshortcuts: {\n\t\t\t\t'ctrl+m, meta+m': \"this.execCommand('removeFormat', false)\",\n\t\t\t\t'ctrl+b, meta+b': \"this.execCommand('bold', false)\",\n\t\t\t\t'ctrl+i, meta+i': \"this.execCommand('italic', false)\",\n\t\t\t\t'ctrl+h, meta+h': \"this.execCommand('superscript', false)\",\n\t\t\t\t'ctrl+l, meta+l': \"this.execCommand('subscript', false)\",\n\t\t\t\t'ctrl+k, meta+k': \"this.linkShow()\",\n\t\t\t\t'ctrl+shift+7': \"this.execCommand('insertorderedlist', false)\",\n\t\t\t\t'ctrl+shift+8': \"this.execCommand('insertunorderedlist', false)\"\n\t\t\t},\n\t\t\tshortcutsAdd: false,\n\n\t\t\tautosave: false,\n\t\t\tautosaveInterval: 60,\n\n\t\t\tplugins: false,\n\n\t\t\tlinkProtocol: 'http://',\n\t\t\tlinkNofollow: false,\n\t\t\tlinkSize: 50,\n\t\t\tpredefinedLinks: false,\n\n\t\t\timageFloatMargin: '10px',\n\t\t\timageGetJson: false,\n\n\t\t\tdragUpload: true,\n\t\t\timageTabLink: true,\n\t\t\timageUpload: false,\n\t\t\timageUploadParam: 'file',\n\t\t\timageResizable: true,\n\n\t\t\tfileUpload: false,\n\t\t\tfileUploadParam: 'file',\n\t\t\tclipboardUpload: true,\n\t\t\tclipboardUploadUrl: false,\n\n\t\t\tsmilesUrl: '',\n\n\t\t\tdnbImageTypes: ['image/png', 'image/jpeg', 'image/gif'],\n\n\t\t\ts3: false,\n\t\t\tuploadFields: false,\n\n\t\t\tobserveImages: true,\n\t\t\tobserveLinks: true,\n\n\t\t\tmodalOverlay: true,\n\n\t\t\ttabSpaces: false,\n\t\t\ttabFocus: true,\n\n\t\t\tair: false,\n\t\t\tairButtons: ['formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist', 'outdent', 'indent'],\n\n\t\t\ttoolbar: true,\n\t\t\ttoolbarFixed: false,\n\t\t\ttoolbarFixedTarget: document,\n\t\t\ttoolbarFixedTopOffset: 0,\n\t\t\ttoolbarFixedBox: false,\n\t\t\ttoolbarExternal: false,\n\t\t\ttoolbarOverflow: false,\n\t\t\tbuttonSource: true,\n\n\t\t\tbuttons: ['html', 'undo', 'redo', 'formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist',\n\t\t\t\t\t  'outdent', 'indent', 'image', 'video', 'file', 'table', 'link', 'alignment', '|',\n\t\t\t\t\t  'horizontalrule'], /**'underline', 'alignleft', 'aligncenter', 'alignright', 'justify'**/\n\t\t\tbuttonsHideOnMobile: [],\n\n\t\t\tactiveButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist',\n\t\t\t\t\t\t\t'alignleft', 'aligncenter', 'alignright', 'justify', 'table'],\n\t\t\tactiveButtonsStates: {\n\t\t\t\tb: 'bold',\n\t\t\t\tstrong: 'bold',\n\t\t\t\ti: 'italic',\n\t\t\t\tem: 'italic',\n\t\t\t\tdel: 'deleted',\n\t\t\t\tstrike: 'deleted',\n\t\t\t\tul: 'unorderedlist',\n\t\t\t\tol: 'orderedlist',\n\t\t\t\tu: 'underline',\n\t\t\t\ttr: 'table',\n\t\t\t\ttd: 'table',\n\t\t\t\ttable: 'table'\n\t\t\t},\n\n\t\t\tformattingTags: ['p', 'blockquote', 'code', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n\t\t\tlinebreaks: false,\n\t\t\tparagraphy: true,\n\t\t\tconvertDivs: true,\n\t\t\tconvertLinks: true,\n\t\t\tconvertImageLinks: false,\n\t\t\tconvertVideoLinks: false,\n\t\t\tformattingPre: false,\n\t\t\tphpTags: false,\n\n\t\t\tallowedTags: false,\n\t\t\tdeniedTags: ['html', 'head', 'link', 'body', 'meta', 'script', 'style', 'applet'],\n\n\t\t\tboldTag: 'strong',\n\t\t\titalicTag: 'em',\n\n\t\t\tindentValue: 20,\n\t\t\tbuffer: [],\n\t\t\trebuffer: [],\n\t\t\ttextareamode: false,\n\t\t\temptyHtml: '<p>&#x200b;</p>',\n\t\t\tinvisibleSpace: '&#x200b;',\n\t\t\trBlockTest: /^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,\n\t\t\talignmentTags: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'TD',\n\t\t\t\t\t\t\t\t'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'ADDRESS', 'SECTION',\n\t\t\t\t\t\t\t\t'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE'],\n\t\t\townLine: ['area', 'body', 'head', 'hr', 'i?frame', 'link', 'meta', 'noscript', 'style', 'script', 'table', 'tbody', 'thead', 'tfoot'],\n\t\t\tcontOwnLine: ['li', 'dt', 'dt', 'h[1-6]', 'option', 'script'],\n\t\t\tnewLevel: ['blockquote', 'div', 'dl', 'fieldset', 'form', 'frameset', 'map', 'ol', 'p', 'code', 'select', 'td', 'th', 'tr', 'ul'],\n\t\t\tblockLevelElements: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'LI',\n\t\t\t\t\t\t\t\t'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'CODE', 'ADDRESS', 'SECTION',\n\t\t\t\t\t\t\t\t'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE', 'TD'],\n\t\t\tlangs: {\n\t\t\t\ten: {\n\t\t\t\t\thtml: 'HTML',\n\t\t\t\t\tvideo: 'Insert Video',\n\t\t\t\t\timage: 'Insert Image',\n\t\t\t\t\ttable: 'Table',\n\t\t\t\t\tlink: 'Link',\n\t\t\t\t\tlink_insert: 'Insert link',\n\t\t\t\t\tlink_edit: 'Edit link',\n\t\t\t\t\tunlink: 'Unlink',\n\t\t\t\t\tformatting: 'Formatting',\n\t\t\t\t\tparagraph: 'Normal text',\n\t\t\t\t\tquote: 'Quote',\n\t\t\t\t\tcode: 'Code',\n\t\t\t\t\theader1: 'Header 1',\n\t\t\t\t\theader2: 'Header 2',\n\t\t\t\t\theader3: 'Header 3',\n\t\t\t\t\theader4: 'Header 4',\n\t\t\t\t\theader5: 'Header 5',\n\t\t\t\t\tbold: 'Bold',\n\t\t\t\t\titalic: 'Italic',\n\t\t\t\t\tfontcolor: 'Font Color',\n\t\t\t\t\tbackcolor: 'Back Color',\n\t\t\t\t\tunorderedlist: 'Unordered List',\n\t\t\t\t\torderedlist: 'Ordered List',\n\t\t\t\t\toutdent: 'Outdent',\n\t\t\t\t\tindent: 'Indent',\n\t\t\t\t\tcancel: 'Cancel',\n\t\t\t\t\tinsert: 'Insert',\n\t\t\t\t\tsave: 'Save',\n\t\t\t\t\t_delete: 'Delete',\n\t\t\t\t\tinsert_table: 'Insert Table',\n\t\t\t\t\tinsert_row_above: 'Add Row Above',\n\t\t\t\t\tinsert_row_below: 'Add Row Below',\n\t\t\t\t\tinsert_column_left: 'Add Column Left',\n\t\t\t\t\tinsert_column_right: 'Add Column Right',\n\t\t\t\t\tdelete_column: 'Delete Column',\n\t\t\t\t\tdelete_row: 'Delete Row',\n\t\t\t\t\tdelete_table: 'Delete Table',\n\t\t\t\t\trows: 'Rows',\n\t\t\t\t\tcolumns: 'Columns',\n\t\t\t\t\tadd_head: 'Add Head',\n\t\t\t\t\tdelete_head: 'Delete Head',\n\t\t\t\t\ttitle: 'Title',\n\t\t\t\t\timage_position: 'Position',\n\t\t\t\t\tnone: 'None',\n\t\t\t\t\tleft: 'Left',\n\t\t\t\t\tright: 'Right',\n\t\t\t\t\tcenter: 'Center',\n\t\t\t\t\timage_web_link: 'Image Web Link',\n\t\t\t\t\ttext: 'Text',\n\t\t\t\t\tmailto: 'Email',\n\t\t\t\t\tweb: 'URL',\n\t\t\t\t\tvideo_html_code: 'Video Embed Code',\n\t\t\t\t\tfile: 'Insert File',\n\t\t\t\t\tupload: 'Upload',\n\t\t\t\t\tdownload: 'Download',\n\t\t\t\t\tchoose: 'Choose',\n\t\t\t\t\tempty_img_list: 'You have no images',\n\t\t\t\t\tor_choose: 'Or choose',\n\t\t\t\t\tdrop_file_here: 'Drop file here',\n\t\t\t\t\talign_left: 'Align text to the left',\n\t\t\t\t\talign_center: 'Center text',\n\t\t\t\t\talign_right: 'Align text to the right',\n\t\t\t\t\talign_justify: 'Justify text',\n\t\t\t\t\thorizontalrule: 'Insert Horizontal Rule',\n                    fullscreen: 'Full screen',\n                    fontsize: 'Font size',\n                    fontfamily: 'Font',\n                    remove_font: 'Clear Font',\n                    image_save_toserver: 'Save to the server?',\n\t\t\t\t\tdeleted: 'Deleted',\n\t\t\t\t\tanchor: 'Anchor',\n\t\t\t\t\tlink_new_tab: 'Open link in new tab',\n\t\t\t\t\tunderline: 'Underline',\n\t\t\t\t\talignment: 'Alignment',\n\t\t\t\t\tfilename: 'Name (optional)',\n\t\t\t\t\tedit: 'Edit',\n                    spoiler: 'Spoiler',\n                    spoiler_name: 'Spoiler name',\n                    spoiler_text: 'Spoiler text',\n                    smiles: 'Smiles',\n                    undo: 'Undo',\n                    redo: 'Redo',\n                    formalize: 'Formalize'\n\t\t\t\t}\n\t\t\t}\n\t};\n\n\tRedactor.fn = $.Redactor.prototype = {\n\n\t\tkeyCode: {\n\t\t\tBACKSPACE: 8,\n\t\t\tDELETE: 46,\n\t\t\tDOWN: 40,\n\t\t\tENTER: 13,\n\t\t\tESC: 27,\n\t\t\tTAB: 9,\n\t\t\tCTRL: 17,\n\t\t\tMETA: 91,\n\t\t\tLEFT: 37,\n\t\t\tLEFT_WIN: 91\n\t\t},\n\n\t\tinit: function(el, options)\n\t\t{\n\t\t\tthis.rtePaste = false;\n\t\t\tthis.$element = this.$source = $(el);\n\t\t\tthis.uuid = uuid++;\n\n\t\t\tvar opts = $.extend(true, {}, $.Redactor.opts);\n\n\t\t\tthis.opts = $.extend(\n\t\t\t\t{},\n\t\t\t\topts,\n\t\t\t\tthis.$element.data(),\n\t\t\t\toptions\n\t\t\t);\n\n\t\t\tthis.start = true;\n\t\t\tthis.dropdowns = [];\n\n\t\t\tthis.sourceHeight = this.$source.css('height');\n\t\t\tthis.sourceWidth = this.$source.css('width');\n\n\t\t\tif (this.opts.fullpage) this.opts.iframe = true;\n\t\t\tif (this.opts.linebreaks) this.opts.paragraphy = false;\n\t\t\tif (this.opts.paragraphy) this.opts.linebreaks = false;\n\t\t\tif (this.opts.toolbarFixedBox) this.opts.toolbarFixed = true;\n\n\t\t\tthis.document = document;\n\t\t\tthis.window = window;\n\n\t\t\tthis.savedSel = false;\n\n\t\t\tthis.cleanlineBefore = new RegExp('^<(/?' + this.opts.ownLine.join('|/?' ) + '|' + this.opts.contOwnLine.join('|') + ')[ >]');\n\t\t\tthis.cleanlineAfter = new RegExp('^<(br|/?' + this.opts.ownLine.join('|/?' ) + '|/' + this.opts.contOwnLine.join('|/') + ')[ >]');\n\t\t\tthis.cleannewLevel = new RegExp('^</?(' + this.opts.newLevel.join('|' ) + ')[ >]');\n\n\t\t\tthis.rTestBlock = new RegExp('^(' + this.opts.blockLevelElements.join('|' ) + ')$', 'i');\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tif (this.opts.allowedTags !== false)\n\t\t\t\t{\n\t\t\t\t\tvar arrSearch = ['strong', 'em', 'del'];\n\t\t\t\t\tvar arrAdd = ['b', 'i', 'strike'];\n\n\t\t\t\t\tif ($.inArray('p', this.opts.allowedTags) === '-1') this.opts.allowedTags.push('p');\n\n\t\t\t\t\tfor (let i in arrSearch)\n\t\t\t\t\t{\n\t\t\t\t\t\tif ($.inArray(arrSearch[i], this.opts.allowedTags) != '-1')  { this.opts.allowedTags.push(arrAdd[i]); }\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.opts.deniedTags !== false)\n\t\t\t\t{\n\t\t\t\t\tvar pos = $.inArray('p', this.opts.deniedTags);\n\t\t\t\t\tif (pos !== '-1') this.opts.deniedTags.splice(pos, pos);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.browser('msie') || this.browser('opera'))\n\t\t\t{\n\t\t\t\tthis.opts.buttons = this.removeFromArrayByValue(this.opts.buttons, 'horizontalrule');\n\t\t\t}\n\n\t\t\tthis.opts.curLang = this.opts.langs[this.opts.lang];\n\n\t\t\t$.extend(this.opts.shortcuts, this.opts.shortcutsAdd);\n\n\t\t\tthis.placeholderInit();\n\n\t\t\tthis.buildStart();\n\n\t\t},\n\t\ttoolbarInit: function(lang)\n\t\t{\n\t\t\treturn {\n\t\t\t\thtml:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.html,\n\t\t\t\t\tfunc: 'toggle'\n\t\t\t\t},\n\t\t\t\tundo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.undo,\n\t\t\t\t\tfunc: 'bufferUndo'\n\t\t\t\t},\n\t\t\t\tredo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.redo,\n\t\t\t\t\tfunc: 'bufferRedo'\n\t\t\t\t},\n\t\t\t\tformatting:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.formatting,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tp:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.paragraph,\n\t\t\t\t\t\t\tfunc: 'formatBlocks'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tblockquote:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.quote,\n\t\t\t\t\t\t\tfunc: 'formatQuote',\n\t\t\t\t\t\t\tclassName: 'redactor_format_blockquote'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcode:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.code,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_code'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th1:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header1,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h1'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th2:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header2,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h2'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th3:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header3,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h3'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th4:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header4,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h4'\n\t\t\t\t\t\t},\n\t\t\t\t\t\th5:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.header5,\n\t\t\t\t\t\t\tfunc: 'formatBlocks',\n\t\t\t\t\t\t\tclassName: 'redactor_format_h5'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbold:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.bold,\n\t\t\t\t\texec: 'bold'\n\t\t\t\t},\n\t\t\t\titalic:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.italic,\n\t\t\t\t\texec: 'italic'\n\t\t\t\t},\n\t\t\t\tdeleted:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.deleted,\n\t\t\t\t\texec: 'strikethrough'\n\t\t\t\t},\n\t\t\t\tunderline:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.underline,\n\t\t\t\t\texec: 'underline'\n\t\t\t\t},\n\t\t\t\tunorderedlist:\n\t\t\t\t{\n\t\t\t\t\ttitle: '&bull; ' + lang.unorderedlist,\n\t\t\t\t\texec: 'insertunorderedlist'\n\t\t\t\t},\n\t\t\t\torderedlist:\n\t\t\t\t{\n\t\t\t\t\ttitle: '1. ' + lang.orderedlist,\n\t\t\t\t\texec: 'insertorderedlist'\n\t\t\t\t},\n\t\t\t\toutdent:\n\t\t\t\t{\n\t\t\t\t\ttitle: '< ' + lang.outdent,\n\t\t\t\t\tfunc: 'indentingOutdent'\n\t\t\t\t},\n\t\t\t\tindent:\n\t\t\t\t{\n\t\t\t\t\ttitle: '> ' + lang.indent,\n\t\t\t\t\tfunc: 'indentingIndent'\n\t\t\t\t},\n\t\t\t\timage:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.image,\n\t\t\t\t\tfunc: 'imageShow'\n\t\t\t\t},\n\t\t\t\tvideo:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.video,\n\t\t\t\t\tfunc: 'videoShow'\n\t\t\t\t},\n\t\t\t\tfile:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.file,\n\t\t\t\t\tfunc: 'fileShow'\n\t\t\t\t},\n\t\t\t\ttable:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.table,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tinsert_table:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_table,\n\t\t\t\t\t\t\tfunc: 'tableShow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop1:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_row_above:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_row_above,\n\t\t\t\t\t\t\tfunc: 'tableAddRowAbove'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_row_below:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_row_below,\n\t\t\t\t\t\t\tfunc: 'tableAddRowBelow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_column_left:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_column_left,\n\t\t\t\t\t\t\tfunc: 'tableAddColumnLeft'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinsert_column_right:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.insert_column_right,\n\t\t\t\t\t\t\tfunc: 'tableAddColumnRight'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop2:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadd_head:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.add_head,\n\t\t\t\t\t\t\tfunc: 'tableAddHead'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_head:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_head,\n\t\t\t\t\t\t\tfunc: 'tableDeleteHead'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparator_drop3:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'separator'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_column:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_column,\n\t\t\t\t\t\t\tfunc: 'tableDeleteColumn'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_row:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_row,\n\t\t\t\t\t\t\tfunc: 'tableDeleteRow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_table:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.delete_table,\n\t\t\t\t\t\t\tfunc: 'tableDeleteTable'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlink: {\n\t\t\t\t\ttitle: lang.link,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\tlink:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.link_insert,\n\t\t\t\t\t\t\tfunc: 'linkShow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tunlink:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.unlink,\n\t\t\t\t\t\t\texec: 'unlink'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talignment:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.alignment,\n\t\t\t\t\tfunc: 'show',\n\t\t\t\t\tdropdown:\n\t\t\t\t\t{\n\t\t\t\t\t\talignleft:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_left,\n\t\t\t\t\t\t\tfunc: 'alignmentLeft'\n\t\t\t\t\t\t},\n\t\t\t\t\t\taligncenter:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_center,\n\t\t\t\t\t\t\tfunc: 'alignmentCenter'\n\t\t\t\t\t\t},\n\t\t\t\t\t\talignright:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_right,\n\t\t\t\t\t\t\tfunc: 'alignmentRight'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tjustify:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: lang.align_justify,\n\t\t\t\t\t\t\tfunc: 'alignmentJustify'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\talignleft:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_left,\n\t\t\t\t\tfunc: 'alignmentLeft'\n\t\t\t\t},\n\t\t\t\taligncenter:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_center,\n\t\t\t\t\tfunc: 'alignmentCenter'\n\t\t\t\t},\n\t\t\t\talignright:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_right,\n\t\t\t\t\tfunc: 'alignmentRight'\n\t\t\t\t},\n\t\t\t\talignjustify:\n\t\t\t\t{\n\t\t\t\t\ttitle: lang.align_justify,\n\t\t\t\t\tfunc: 'alignmentJustify'\n\t\t\t\t},\n\t\t\t\thorizontalrule:\n\t\t\t\t{\n\t\t\t\t\texec: 'inserthorizontalrule',\n\t\t\t\t\ttitle: lang.horizontalrule\n\t\t\t\t}\n\n\t\t\t};\n\t\t},\n\n\t\tcallback: function(type, event, data)\n\t\t{\n\t\t\tvar callback = this.opts[ type + 'Callback' ];\n\t\t\tif ($.isFunction(callback))\n\t\t\t{\n\t\t\t\tif (event === false) return callback.call(this, data);\n\t\t\t\telse return callback.call(this, event, data);\n\t\t\t}\n\t\t\telse return data;\n\t\t},\n\n\t\tdestroy: function()\n\t\t{\n\t\t\tclearInterval(this.autosaveInterval);\n\n\t\t\t$(window).off('.redactor');\n\t\t\tthis.$source.off('redactor-textarea');\n\t\t\tthis.$element.off('.redactor').removeData('redactor');\n\n\t\t\tvar html = this.get();\n\n\t\t\tif (this.opts.textareamode)\n\t\t\t{\n\t\t\t\tthis.$box.after(this.$source);\n\t\t\t\tthis.$box.remove();\n\t\t\t\tthis.$source.val(html).show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar $elem = this.$editor;\n\t\t\t\tif (this.opts.iframe) $elem = this.$element;\n\n\t\t\t\tthis.$box.after($elem);\n\t\t\t\tthis.$box.remove();\n\n\t\t\t\t$elem.removeClass('redactor_editor').removeClass('redactor_editor_wym').removeAttr('contenteditable').html(html).show();\n\t\t\t}\n\n\t\t\tif (this.opts.toolbarExternal)\n\t\t\t{\n\t\t\t\t$(this.opts.toolbarExternal).html('');\n\t\t\t}\n\n\t\t\tif (this.opts.air)\n\t\t\t{\n\t\t\t\t$('#redactor_air_' + this.uuid).remove();\n\t\t\t}\n\t\t},\n\n\t\tgetObject: function()\n\t\t{\n\t\t\treturn $.extend({}, this);\n\t\t},\n\t\tgetEditor: function()\n\t\t{\n\t\t\treturn this.$editor;\n\t\t},\n\t\tgetBox: function()\n\t\t{\n\t\t\treturn this.$box;\n\t\t},\n\t\tgetIframe: function()\n\t\t{\n\t\t\treturn (this.opts.iframe) ? this.$frame : false;\n\t\t},\n\t\tgetToolbar: function()\n\t\t{\n\t\t\treturn (this.$toolbar) ? this.$toolbar : false;\n\t\t},\n\n\t\tget: function()\n\t\t{\n\t\t\treturn this.$source.val();\n\t\t},\n\t\tgetCodeIframe: function()\n\t\t{\n\t\t\tthis.$editor.removeAttr('contenteditable').removeAttr('dir');\n\t\t\tvar html = this.outerHtml(this.$frame.contents().children());\n\t\t\tthis.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\n\t\t\treturn html;\n\t\t},\n\t\tset: function(html, strip, placeholderRemove)\n\t\t{\n\t\t\thtml = html.toString();\n\t\t\thtml = html.replace(/\\$/g, '&#36;');\n\n\t\t\tif (this.opts.fullpage) this.setCodeIframe(html);\n\t\t\telse this.setEditor(html, strip);\n\n\t\t\tif (html == '') placeholderRemove = false;\n\t\t\tif (placeholderRemove !== false) this.placeholderRemoveFromEditor();\n\t\t},\n\t\tsetEditor: function(html, strip)\n\t\t{\n\n            html = this.sanitizeHTML(html);\n\n\t\t\tif (strip !== false)\n\t\t\t{\n\t\t\t\thtml = this.cleanSavePreCode(html);\n\n\t\t\t\thtml = this.cleanStripTags(html);\n\t\t\t\thtml = this.cleanConvertProtected(html);\n\t\t\t\thtml = this.cleanConvertInlineTags(html, true);\n\n\t\t\t\tif (this.opts.linebreaks === false)\thtml = this.cleanConverters(html);\n\t\t\t\telse html = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\n\t\t\thtml = html.replace(/&amp;#36;/g, '$');\n            html = this.cleanEmpty(html);\n\n\t\t\tthis.$editor.html(html);\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\n\t\t\tthis.sync();\n\t\t},\n        sanitizeHTML:  function(htmlStr)\n\t\t{\n            if(htmlStr.length === 0){\n                return htmlStr;\n            }\n            function stringToHTML () {\n                let parser = new DOMParser();\n                let doc = parser.parseFromString(htmlStr, 'text/html');\n                return doc.body;\n            }\n            function clean (html) {\n                let nodes = html.children;\n                for (let node of nodes) {\n                    removeAttributes(node);\n                    clean(node);\n                }\n            }\n            function removeAttributes (elem) {\n                let atts = elem.attributes;\n                for (let {name, value} of atts) {\n                    if (!isPossiblyDangerous(name, value)) { continue };\n                    elem.removeAttribute(name);\n                }\n\n            }\n            function isPossiblyDangerous (name, value) {\n                let val = value.replace(/\\s+/g, '').toLowerCase();\n                if (['src', 'href', 'xlink:href'].includes(name)) {\n                    if (val.includes('javascript:') || val.includes('data:text/html')) { return true; }\n                }\n                if (name.startsWith('on')) { return true; }\n            }\n            let html = stringToHTML();\n\n            clean(html);\n\n            return html.innerHTML;\n        },\n\t\tsetCodeIframe: function(html)\n\t\t{\n\t\t\tvar doc = this.iframePage();\n\t\t\tthis.$frame[0].src = \"about:blank\";\n\n\t\t\thtml = this.cleanConvertProtected(html);\n\t\t\thtml = this.cleanConvertInlineTags(html);\n\t\t\thtml = this.cleanRemoveSpaces(html);\n\n\t\t\tdoc.open();\n\t\t\tdoc.write(html);\n\t\t\tdoc.close();\n\n\t\t\tif (this.opts.fullpage)\n\t\t\t{\n\t\t\t\tthis.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\t}\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\t\t\tthis.sync();\n\n\t\t},\n\t\tsetFullpageOnInit: function(html)\n\t\t{\n            html = this.sanitizeHTML(html);\n\t\t\tthis.fullpageDoctype = html.match(/^<\\!doctype[^>]*>/i);\n\t\t\tif (this.fullpageDoctype && this.fullpageDoctype.length == 1)\n\t\t\t{\n\t\t\t\thtml = html.replace(/^<\\!doctype[^>]*>/i, '');\n\t\t\t}\n\n\t\t\thtml = this.cleanSavePreCode(html, true);\n\t\t\thtml = this.cleanConverters(html);\n\t\t\thtml = this.cleanEmpty(html);\n\n\t\t\tthis.$editor.html(html);\n\n\t\t\tthis.setNonEditable();\n\t\t\tthis.setSpansVerified();\n\t\t\tthis.sync();\n\t\t},\n\t\tsetFullpageDoctype: function()\n\t\t{\n\t\t\tif (this.fullpageDoctype && this.fullpageDoctype.length == 1)\n\t\t\t{\n\t\t\t\tvar source = this.fullpageDoctype[0] + '\\n' + this.$source.val();\n\t\t\t\tthis.$source.val(source);\n\t\t\t}\n\t\t},\n\t\tsetSpansVerified: function()\n\t\t{\n\t\t\tvar spans = this.$editor.find('span');\n\t\t\tvar replacementTag = 'inline';\n\n\t\t\t$.each(spans, function() {\n\t\t\t\tvar outer = this.outerHTML;\n\n\t\t\t\tvar regex = new RegExp('<' + this.tagName, 'gi');\n\t\t\t\tvar newTag = outer.replace(regex, '<' + replacementTag);\n\n\t\t\t\tregex = new RegExp('</' + this.tagName, 'gi');\n\t\t\t\tnewTag = newTag.replace(regex, '</' + replacementTag);\n\n\t\t\t\t$(this).replaceWith(newTag);\n\t\t\t});\n\n\t\t},\n\t\tsetSpansVerifiedHtml: function(html)\n\t\t{\n\t\t\thtml = html.replace(/<span(.*?)>/, '<inline$1>');\n\t\t\treturn html.replace(/<\\/span>/, '</inline>');\n\t\t},\n\t\tsetNonEditable: function()\n\t\t{\n\t\t\tthis.$editor.find('.noneditable').attr('contenteditable', false);\n\t\t},\n\n\t\tsync: function(e)\n\t\t{\n\t\t\tvar html = '';\n\n\t\t\tthis.cleanUnverified();\n\n\t\t\tif (this.opts.fullpage) html = this.getCodeIframe();\n\t\t\telse html = this.$editor.html();\n\n\t\t\thtml = this.syncClean(html);\n\t\t\thtml = this.cleanRemoveEmptyTags(html);\n\n\t\t\tvar source = this.cleanRemoveSpaces(this.$source.val(), false);\n\t\t\tvar editor = this.cleanRemoveSpaces(html, false);\n\n\t\t\tif (source == editor)\n\t\t\t{\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\thtml = html.replace(/<\\/li><(ul|ol)>([\\w\\W]*?)<\\/(ul|ol)>/gi, '<$1>$2</$1></li>');\n\n\t\t\tif ($.trim(html) === '<br>') html = '';\n\t\t\tif (this.opts.xhtml)\n\t\t\t{\n\t\t\t\tvar xhtmlTags = ['br', 'hr', 'img', 'link', 'input', 'meta'];\n\t\t\t\t$.each(xhtmlTags, function(i,s)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?[^\\/$]?)>', 'gi'), '<' + s + '$1 />');\n\t\t\t\t});\n\n\t\t\t}\n\t\t\thtml = this.callback('syncBefore', false, html);\n\n\t\t\tthis.$source.val(html);\n\t\t\tthis.setFullpageDoctype();\n\t\t\tthis.callback('syncAfter', false, html);\n\n\t\t\tif (this.start === false)\n\t\t\t{\n\n\t\t\t\tif (typeof e !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tswitch(e.which)\n\t\t\t\t\t{\n\t\t\t\t        case 37:\n\t\t\t\t        break;\n\t\t\t\t        case 38:\n\t\t\t\t        break;\n\t\t\t\t        case 39:\n\t\t\t\t        break;\n\t\t\t\t        case 40:\n\t\t\t\t        break;\n\n\t\t\t\t\t\tdefault: this.callback('change', false, html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.callback('change', false, html);\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tsyncClean: function(html)\n\t\t{\n\t\t\tif (!this.opts.fullpage) html = this.cleanStripTags(html);\n\t\t\thtml = $.trim(html);\n\t\t\thtml = this.placeholderRemoveFromCode(html);\n\t\t\thtml = html.replace(/&#x200b;/gi, '');\n\t\t\thtml = html.replace(/&#8203;/gi, '');\n\t\t\thtml = html.replace(/<\\/a>&nbsp;/gi, '<\\/a> ');\n\t\t\thtml = html.replace(/\\u200B/g, '');\n\n\t\t\tif (html === '<p></p>' || html === '<p> </p>' || html === '<p>&nbsp;</p>')\n\t\t\t{\n\t\t\t\thtml = '';\n\t\t\t}\n\t\t\tif (this.opts.linkNofollow)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<a(.*?)rel=\"nofollow\"(.*?)>/gi, '<a$1$2>');\n\t\t\t\thtml = html.replace(/<a(.*?)>/gi, '<a$1 rel=\"nofollow\">');\n\t\t\t}\n\t\t\thtml = html.replace('<!--?php', '<?php');\n\t\t\thtml = html.replace('?-->', '?>');\n\t\t\thtml = html.replace(/<(.*?)class=\"noeditable\"(.*?) contenteditable=\"false\"(.*?)>/gi, '<$1class=\"noeditable\"$2$3>');\n\n\t\t\thtml = html.replace(/ data-tagblock=\"\"/gi, '');\n\t\t\thtml = html.replace(/<br\\s?\\/?>\\n?<\\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi, '</$1>');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-box\"(.*?)>([\\w\\W]*?)<img(.*?)><\\/span>/gi, '$3<img$4>');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-resizer\"(.*?)>(.*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<span(.*?)id=\"redactor-image-editter\"(.*?)>(.*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<(ul|ol)>\\s*\\t*\\n*<\\/(ul|ol)>/gi, '');\n\t\t\tif (this.opts.cleanFontTag)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi, '$2');\n\t\t\t}\n\t\t\thtml = html.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi, '$2');\n\t\t\thtml = html.replace(/<inline>([\\w\\W]*?)<\\/inline>/gi, '$1');\n\t\t\thtml = html.replace(/<inline>/gi, '<span>');\n\t\t\thtml = html.replace(/<inline /gi, '<span ');\n\t\t\thtml = html.replace(/<\\/inline>/gi, '</span>');\n\n\t\t\tif (this.opts.removeEmptyTags)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<span>([\\w\\W]*?)<\\/span>/gi, '$1');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<span(.*?)class=\"redactor_placeholder\"(.*?)>([\\w\\W]*?)<\\/span>/gi, '');\n\t\t\thtml = html.replace(/<img(.*?)contenteditable=\"false\"(.*?)>/gi, '<img$1$2>');\n\t\t\thtml = html.replace(/&/gi, '&');\n\t\t\thtml = html.replace(/\\u2122/gi, '&trade;');\n\t\t\thtml = html.replace(/\\u00a9/gi, '&copy;');\n\t\t\thtml = html.replace(/\\u2026/gi, '&hellip;');\n\t\t\thtml = html.replace(/\\u2014/gi, '&mdash;');\n\t\t\thtml = html.replace(/\\u2010/gi, '&dash;');\n\n\t\t\thtml = this.cleanReConvertProtected(html);\n\n\t\t\treturn html;\n\t\t},\n\n\t\tbuildStart: function()\n\t\t{\n\n\t\t\tthis.content = '';\n\t\t\tthis.$box = $('<div class=\"redactor_box\" />');\n\t\t\tif (this.$source[0].tagName === 'TEXTAREA') this.opts.textareamode = true;\n\t\t\tif (this.opts.mobile === false && this.isMobile())\n\t\t\t{\n\t\t\t\tthis.buildMobile();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tthis.buildContent();\n\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\n\t\t\t\t\tthis.opts.autoresize = false;\n\t\t\t\t\tthis.iframeStart();\n\t\t\t\t}\n\t\t\t\telse if (this.opts.textareamode) this.buildFromTextarea();\n\t\t\t\telse this.buildFromElement();\n\t\t\t\tif (!this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\tthis.buildOptions();\n\t\t\t\t\tthis.buildAfter();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildMobile: function()\n\t\t{\n\t\t\tif (!this.opts.textareamode)\n\t\t\t{\n\t\t\t\tthis.$editor = this.$source;\n\t\t\t\tthis.$editor.hide();\n\t\t\t\tthis.$source = this.buildCodearea(this.$editor);\n\t\t\t\tthis.$source.val(this.content);\n\t\t\t}\n\n\t\t\tthis.$box.insertAfter(this.$source).append(this.$source);\n\t\t},\n\t\tbuildContent: function()\n\t\t{\n\t\t\tif (this.opts.textareamode) this.content = $.trim(this.$source.val());\n\t\t\telse this.content = $.trim(this.$source.html());\n\t\t},\n\t\tbuildFromTextarea: function()\n\t\t{\n\t\t\tthis.$editor = $('<div />');\n\t\t\tthis.$box.insertAfter(this.$source).append(this.$editor).append(this.$source);\n\t\t\tthis.buildAddClasses(this.$editor);\n\t\t\tthis.buildEnable();\n\t\t},\n\t\tbuildFromElement: function()\n\t\t{\n\t\t\tthis.$editor = this.$source;\n\t\t\tthis.$source = this.buildCodearea(this.$editor);\n\t\t\tthis.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source);\n\t\t\tthis.buildEnable();\n\t\t},\n\t\tbuildCodearea: function($source)\n\t\t{\n\t\t\treturn $('<textarea />').attr('name', $source.attr('id')).css('height', this.sourceHeight);\n\t\t},\n\t\tbuildAddClasses: function(el)\n\t\t{\n\n\t\t\t$.each(this.$source.get(0).className.split(/\\s+/), function(i,s)\n\t\t\t{\n\t\t\t\tel.addClass('redactor_' + s);\n\t\t\t});\n\t\t},\n\t\tbuildEnable: function()\n\t\t{\n\t\t\tthis.$editor.addClass('redactor_editor').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\tthis.$source.attr('dir', this.opts.direction).hide();\n\t\t\tthis.set(this.content, true, false);\n\t\t},\n\t\tbuildOptions: function()\n\t\t{\n\t\t\tvar $source = this.$editor;\n\t\t\tif (this.opts.iframe) $source = this.$frame;\n\t\t\tif (this.opts.tabindex) $source.attr('tabindex', this.opts.tabindex);\n\n\t\t\tif (this.opts.minHeight) $source.css('min-height', this.opts.minHeight + 'px');\n\n\t\t\telse if (this.browser('mozilla') && this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tthis.$editor.css('min-height', '45px');\n\t\t\t}\n\n\t\t\tif (this.browser('mozilla') && this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tthis.$editor.css('padding-bottom', '10px');\n\t\t\t}\n\t\t\tif (this.opts.maxHeight)\n\t\t\t{\n\t\t\t\tthis.opts.autoresize = false;\n\t\t\t\tthis.sourceHeight = this.opts.maxHeight;\n\t\t\t}\n\t\t\tif (this.opts.wym) this.$editor.addClass('redactor_editor_wym');\n\t\t\tif (this.opts.typewriter) this.$editor.addClass('redactor-editor-typewriter');\n\t\t\tif (!this.opts.autoresize) $source.css('height', this.sourceHeight);\n\n\t\t},\n\t\tbuildAfter: function()\n\t\t{\n\t\t\tthis.start = false;\n\t\t\tif (this.opts.toolbar)\n\t\t\t{\n\t\t\t\tthis.opts.toolbar = this.toolbarInit(this.opts.curLang);\n\t\t\t\tthis.toolbarBuild();\n\t\t\t}\n\t\t\tthis.modalTemplatesInit();\n\t\t\tthis.buildPlugins();\n\t\t\tthis.buildBindKeyboard();\n\t\t\tif (this.opts.autosave) this.autosave();\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 4);\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\ttry {\n\t\t\t\t\tthis.document.execCommand('enableObjectResizing', false, false);\n\t\t\t\t\tthis.document.execCommand('enableInlineTableEditing', false, false);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\tif (this.opts.focus) setTimeout($.proxy(this.focus, this), 100);\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.opts.visual = true;\n\t\t\t\t\tthis.toggle(false);\n\n\t\t\t\t}, this), 200);\n\t\t\t}\n\t\t\tthis.callback('init');\n\t\t},\n\t\tbuildBindKeyboard: function()\n\t\t{\n\t\t\tthis.dblEnter = 0;\n\n\t\t\tif (this.opts.dragUpload && (this.opts.imageUpload !== false || this.opts.s3 !== false))\n\t\t\t{\n\t\t\t\tthis.$editor.on('drop.redactor', $.proxy(this.buildEventDrop, this));\n\t\t\t}\n\n\t\t\tthis.$editor.on('click.redactor', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.selectall = false;\n\n\t\t\t}, this));\n\n\t\t\tthis.$editor.on('input.redactor', $.proxy(this.sync, this));\n\t\t\tthis.$editor.on('paste.redactor', $.proxy(this.buildEventPaste, this));\n\t\t\tthis.$editor.on('keydown.redactor', $.proxy(this.buildEventKeydown, this));\n\t\t\tthis.$editor.on('keyup.redactor', $.proxy(this.buildEventKeyup, this));\n\t\t\tif ($.isFunction(this.opts.textareaKeydownCallback))\n\t\t\t{\n\t\t\t\tthis.$source.on('keydown.redactor-textarea', $.proxy(this.opts.textareaKeydownCallback, this));\n\t\t\t}\n\t\t\tif ($.isFunction(this.opts.focusCallback))\n\t\t\t{\n\t\t\t\tthis.$editor.on('focus.redactor', $.proxy(this.opts.focusCallback, this));\n\t\t\t}\n\n\t\t\tvar clickedElement;\n\t\t\t$(document).mousedown(function(e) {\n\t\t\t\tclickedElement = $(e.target);\n\t\t\t});\n\t\t\tthis.$editor.on('blur.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (!$(clickedElement).hasClass('redactor_toolbar') && $(clickedElement).parents('.redactor_toolbar').length === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.selectall = false;\n\t\t\t\t\tif ($.isFunction(this.opts.blurCallback)) this.callback('blur', e);\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t},\n\t\tbuildEventDrop: function(e)\n\t\t{\n\t\t\te = e.originalEvent || e;\n\n\t\t\tif (window.FormData === undefined || !e.dataTransfer) return true;\n\n\t\t    var length = e.dataTransfer.files.length;\n\t\t    if (length === 0) return true;\n\n\t\t    e.preventDefault();\n\n\t        var file = e.dataTransfer.files[0];\n\n\t        if (this.opts.dnbImageTypes !== false && this.opts.dnbImageTypes.indexOf(file.type) === -1)\n\t        {\n\t\t        return true;\n\t        }\n\n\t\t\tthis.bufferSet();\n\n\t\t\tthis.showProgressBar();\n\n\t\t\tif (this.opts.s3 === false)\n\t\t\t{\n\t\t\t\tthis.dragUploadAjax(this.opts.imageUpload, file, true, e, this.opts.imageUploadParam);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.s3uploadFile(file);\n\t\t\t}\n\t\t},\n\t\tbuildEventPaste: function(e)\n\t\t{\n\t\t\tvar oldsafari = false;\n\t\t\tif (this.browser('webkit') && navigator.userAgent.indexOf('Chrome') === -1)\n\t\t\t{\n\t\t\t\tvar arr = this.browser('version').split('.');\n\t\t\t\tif (arr[0] < 536) oldsafari = true;\n\t\t\t}\n\n\t\t\tif (oldsafari) return true;\n\t\t\tif (this.browser('opera')) return true;\n\t\t\tif (this.opts.clipboardUpload && this.buildEventClipboardUpload(e)) return true;\n\n\t\t\tif (this.opts.cleanup)\n\t\t\t{\n\t\t\t\tthis.rtePaste = true;\n\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tif (!this.selectall)\n\t\t\t\t{\n\t\t\t\t\tif (this.opts.autoresize === true && this.fullscreen !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$editor.height(this.$editor.height());\n\t\t\t\t\t\tthis.saveScroll = this.document.body.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveScroll = this.$editor.scrollTop();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar frag = this.extractContent();\n\n\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tvar pastedFrag = this.extractContent();\n\t\t\t\t\tthis.$editor.append(frag);\n\n\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\tvar html = this.getFragmentHtml(pastedFrag);\n\t\t\t\t\tthis.pasteClean(html);\n\n\t\t\t\t\tif (this.opts.autoresize === true && this.fullscreen !== true) this.$editor.css('height', 'auto');\n\n\t\t\t\t}, this), 1);\n\t\t\t}\n\t\t},\n\t\tbuildEventClipboardUpload: function(e)\n\t\t{\n\t\t\tvar event = e.originalEvent || e;\n\t\t\tthis.clipboardFilePaste = false;\n\t\t\tif (typeof(event.clipboardData) === 'undefined') { return false; }\n            var clipboard = event.clipboardData;\n\t\t\tif (clipboard.items)\n\t\t\t{\n\t\t\t\tvar file = event.clipboardData.items[0].getAsFile();\n\t\t\t\tif (file !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\tthis.clipboardFilePaste = true;\n\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\treader.onload = $.proxy(this.pasteClipboardUpload, this);\n\t\t\t        reader.readAsDataURL(file);\n\n\t\t\t        return true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\t\tbuildEventKeydown: function(e)\n\t\t{\n\t\t\tif (this.rtePaste) return false;\n\n\t\t\tvar key = e.which;\n\t\t\tvar ctrl = e.ctrlKey || e.metaKey;\n\t\t\tvar parent = this.getParent();\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar block = this.getBlock();\n\t\t\tvar pre = false;\n\n\t\t\tthis.callback('keydown', e);\n\n\t\t\t/*\n\t\t\t\tfirefox cmd+left/Cmd+right browser back/forward fix -\n\t\t\t\thttp://joshrhoderick.wordpress.com/2010/05/05/how-firefoxs-command-key-bug-kills-usability-on-the-mac/\n\t\t\t*/\n\t\t\tif (this.browser('mozilla') && \"modify\" in window.getSelection())\n\t\t\t{\n\t\t\t\tif ((ctrl) && (e.keyCode===37 || e.keyCode===39))\n\t\t\t\t{\n\t\t\t\t\tvar selection = this.getSelection();\n\t\t\t\t\tvar lineOrWord = (e.metaKey ? \"line\" : \"word\");\n\t\t\t\t\tif (e.keyCode===37)\n\t\t\t\t\t{\n\t\t\t\t\t\tselection.modify(\"extend\",\"left\",lineOrWord);\n\t\t\t\t\t\tif (!e.shiftKey)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselection.collapseToStart();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode===39)\n\t\t\t\t\t{\n\t\t\t\t\t\tselection.modify(\"extend\",\"right\",lineOrWord);\n\t\t\t\t\t\tif (!e.shiftKey)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselection.collapseToEnd();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.imageResizeHide(false);\n\t\t\tif ((parent && $(parent).get(0).tagName === 'CODE') || (current && $(current).get(0).tagName === 'CODE'))\n\t\t\t{\n\t\t\t\tpre = true;\n\t\t\t\tif (key === this.keyCode.DOWN) this.insertAfterLastElement(block);\n\t\t\t}\n\t\t\tif (key === this.keyCode.DOWN)\n\t\t\t{\n\t\t\t\tif (parent && $(parent)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(parent);\n\t\t\t\tif (current && $(current)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(current);\n\n\t\t\t\tif (parent && $(parent)[0].tagName === 'P' && $(parent).parent()[0].tagName === 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.insertAfterLastElement(parent, $(parent).parent()[0]);\n\t\t\t\t}\n\t\t\t\tif (current && $(current)[0].tagName === 'P' && parent && $(parent)[0].tagName === 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.insertAfterLastElement(current, parent);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.shortcuts(e, key);\n\t\t\tif (ctrl && key === 90 && !e.shiftKey && !e.altKey)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this.opts.buffer.length) this.bufferUndo();\n\t\t\t\telse this.document.execCommand('undo', false, false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telse if (ctrl && key === 90 && e.shiftKey && !e.altKey)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this.opts.rebuffer.length !== 0) this.bufferRedo();\n\t\t\t\telse this.document.execCommand('redo', false, false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (key === 32)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t}\n\t\t\tif (ctrl && key === 65)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.selectall = true;\n\t\t\t}\n\t\t\telse if (key !== this.keyCode.LEFT_WIN && !ctrl)\n\t\t\t{\n\t\t\t\tthis.selectall = false;\n\t\t\t}\n\t\t\tif (key === this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey)\n\t\t\t{\n\n\t\t\t\tvar range = this.getRange();\n\t\t\t\tif (range && range.collapsed === false)\n\t\t\t\t{\n\t\t\t\t\tsel = this.getSelection();\n\t\t\t\t\tif (sel.rangeCount)\n\t\t\t\t\t{\n\t\t\t\t\t\trange.deleteContents();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.browser('msie') && (parent.nodeType == 1 && (parent.tagName === 'TD' || parent.tagName === 'TH')))\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\tthis.insertNode(document.createElement('br'));\n\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (block && (block.tagName === 'BLOCKQUOTE' || $(block).parent()[0].tagName === 'BLOCKQUOTE'))\n\t\t\t\t{\n\t\t\t\t\tif (this.isEndOfElement())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.dblEnter == 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar element;\n\t\t\t\t\t\t\tvar last;\n\t\t\t\t\t\t\tif (block.tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlast = 'br';\n\t\t\t\t\t\t\t\telement = block;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlast = 'p';\n\t\t\t\t\t\t\t\telement = $(block).parent()[0];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tthis.insertingAfterLastElement(element);\n\t\t\t\t\t\t\tthis.dblEnter = 0;\n\n\t\t\t\t\t\t\tif (last === 'p')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(block).parent().find('p').last().remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar tmp = $.trim($(block).html());\n\t\t\t\t\t\t\t\t$(block).html(tmp.replace(/<br\\s?\\/?>$/i, ''));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse this.dblEnter++;\n\t\t\t\t\t}\n\t\t\t\t\telse this.dblEnter++;\n\t\t\t\t}\n\t\t\t\tif (pre === true)\n\t\t\t\t{\n\t\t\t\t\treturn this.buildEventKeydownPre(e, current);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (!this.opts.linebreaks)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif (block && block.tagName === 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar listCurrent = this.getBlock();\n\t\t\t\t\t\t\tif (listCurrent !== false || listCurrent.tagName === 'LI')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar listText = $.trim($(block).text());\n\t\t\t\t\t\t\t\tvar listCurrentText = $.trim($(listCurrent).text());\n\t\t\t\t\t\t\t\tif (listText == ''\n\t\t\t\t\t\t\t\t\t&& listCurrentText == ''\n\t\t\t\t\t\t\t\t\t&& $(listCurrent).next('li').length === 0\n\t\t\t\t\t\t\t\t\t&& $(listCurrent).parents('li').length === 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\t\t\tvar $list = $(listCurrent).closest('ol, ul');\n\t\t\t\t\t\t\t\t\t$(listCurrent).remove();\n\t\t\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\t\t\t$list.after(node);\n\t\t\t\t\t\t\t\t\tthis.selectionStart(node);\n\n\t\t\t\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (block && this.opts.rBlockTest.test(block.tagName))\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar blockElem = this.getBlock();\n\t\t\t\t\t\t\t\tif (blockElem.tagName === 'DIV' && !$(blockElem).hasClass('redactor_editor'))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\t\t\t$(blockElem).replaceWith(node);\n\t\t\t\t\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}, this), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (block === false)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\t\t\t\t\t\t\tvar node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\t\t\t\tthis.insertNode(node[0]);\n\t\t\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\t\t\tthis.callback('enter', e);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.opts.linebreaks)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif (block && this.opts.rBlockTest.test(block.tagName))\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar blockElem = this.getBlock();\n\t\t\t\t\t\t\t\tif ((blockElem.tagName === 'DIV' || blockElem.tagName === 'P') && !$(blockElem).hasClass('redactor_editor'))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.replaceLineBreak(blockElem);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}, this), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.buildEventKeydownInsertLineBreak(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (block.tagName === 'BLOCKQUOTE' || block.tagName === 'FIGCAPTION')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.buildEventKeydownInsertLineBreak(e);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.callback('enter', e);\n\t\t\t}\n\t\t\telse if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey))\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.insertLineBreak();\n\t\t\t}\n\t\t\tif ((key === this.keyCode.TAB || e.metaKey && key === 219) && this.opts.shortcuts)\n\t\t\t{\n\t\t\t\treturn this.buildEventKeydownTab(e, pre, key);\n\t\t\t}\n\t\t\tif (key === this.keyCode.BACKSPACE) this.buildEventKeydownBackspace(e, current, parent);\n\n\t\t},\n\t\tbuildEventKeydownPre: function(e, current)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tthis.bufferSet();\n\t\t\tvar html = $(current).parent().text();\n\t\t\tthis.insertNode(document.createTextNode('\\n'));\n\t\t\tif (html.search(/\\s$/) === -1)\n\t\t\t{\n\t\t\t\tthis.insertNode(document.createTextNode('\\n'));\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t\tthis.callback('enter', e);\n\t\t\treturn false;\n\t\t},\n\t\tbuildEventKeydownTab: function(e, pre, key)\n\t\t{\n\t\t\tif (!this.opts.tabFocus) return true;\n\t\t\tif (this.isEmpty(this.get()) && this.opts.tabSpaces === false) return true;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (pre === true && !e.shiftKey)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.insertNode(document.createTextNode('\\t'));\n\t\t\t\tthis.sync();\n\t\t\t\treturn false;\n\n\t\t\t}\n\t\t\telse if (this.opts.tabSpaces !== false)\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t\tthis.insertNode(document.createTextNode(Array(this.opts.tabSpaces + 1).join('\\u00a0')));\n\t\t\t\tthis.sync();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!e.shiftKey) this.indentingIndent();\n\t\t\t\telse this.indentingOutdent();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tbuildEventKeydownBackspace: function(e, current, parent)\n\t\t{\n\n\t\t\tif (parent && current && parent.parentNode.tagName === 'TD'\n\t\t\t\t&& parent.tagName === 'UL' && current.tagName === 'LI' && $(parent).children('li').length === 1)\n\t\t\t{\n\t\t\t\tvar text = $(current).text().replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n\t\t\t\tif (text == '')\n\t\t\t\t{\n\t\t\t\t\tvar node = parent.parentNode;\n\t\t\t\t\t$(parent).remove();\n\t\t\t\t\tthis.selectionStart(node);\n\t\t\t\t\tthis.sync();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof current.tagName !== 'undefined' && /^(H[1-6])$/i.test(current.tagName))\n\t\t\t{\n\t\t\t\tvar node;\n\t\t\t\tif (this.opts.linebreaks === false) node = $('<p>' + this.opts.invisibleSpace + '</p>');\n\t\t\t\telse node = $('<br>' + this.opts.invisibleSpace);\n\n\t\t\t\t$(current).replaceWith(node);\n\t\t\t\tthis.selectionStart(node);\n\t\t\t\tthis.sync();\n\t\t\t}\n\n\t\t\tif (typeof current.nodeValue !== 'undefined' && current.nodeValue !== null)\n\t\t\t{\n\t\t\t\tif (current.remove && current.nodeType === 3 && current.nodeValue.match(/[^\\u200B]/g) == null)\n\t\t\t\t{\n\t\t\t\t\t$(current).prev().remove();\n\t\t\t\t\tthis.sync();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildEventKeydownInsertLineBreak: function(e)\n\t\t{\n\t\t\tthis.bufferSet();\n\t\t\te.preventDefault();\n\t\t\tthis.insertLineBreak();\n\t\t\tthis.callback('enter', e);\n\t\t\treturn;\n\t\t},\n\t\tbuildEventKeyup: function(e)\n\t\t{\n\t\t\tif (this.rtePaste) return false;\n\n\t\t\tvar key = e.which;\n\t\t\tvar parent = this.getParent();\n\t\t\tvar current = this.getCurrent();\n\t\t\tif (!this.opts.linebreaks && current.nodeType == 3 && (parent == false || parent.tagName === 'BODY'))\n\t\t\t{\n\t\t\t\tvar node = $('<p>').append($(current).clone());\n\t\t\t\t$(current).replaceWith(node);\n\t\t\t\tvar next = $(node).next();\n\t\t\t\tif (typeof(next[0]) !== 'undefined' && next[0].tagName === 'BR')\n\t\t\t\t{\n\t\t\t\t\tnext.remove();\n\t\t\t\t}\n\n\t\t\t\tthis.selectionEnd(node);\n\t\t\t}\n\t\t\tif ((this.opts.convertLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && key === this.keyCode.ENTER)\n\t\t\t{\n\t\t\t\tthis.buildEventKeyupConverters();\n\t\t\t}\n\t\t\tif (key === this.keyCode.DELETE || key === this.keyCode.BACKSPACE)\n\t\t\t{\n\t\t\t\treturn this.formatEmpty(e);\n\t\t\t}\n\n\t\t\tthis.callback('keyup', e);\n\t\t\tthis.sync(e);\n\t\t},\n\t\tbuildEventKeyupConverters: function()\n\t\t{\n\t\t\tthis.formatLinkify(this.opts.linkProtocol, this.opts.convertLinks, this.opts.convertImageLinks, this.opts.convertVideoLinks, this.opts.linkSize);\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.convertImageLinks) this.observeImages();\n\t\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\t\t\t}, this), 5);\n\t\t},\n\t\tbuildPlugins: function()\n\t\t{\n\t\t\tif (!this.opts.plugins ) return;\n\n\t\t\t$.each(this.opts.plugins, $.proxy(function(i, s)\n\t\t\t{\n\t\t\t\tif (RedactorPlugins[s])\n\t\t\t\t{\n\t\t\t\t\t$.extend(this, RedactorPlugins[s]);\n\t\t\t\t\tif ($.isFunction( RedactorPlugins[ s ].init)) this.init();\n\t\t\t\t}\n\n\t\t\t}, this ));\n\t\t},\n\t\tiframeStart: function()\n\t\t{\n\t\t\tthis.iframeCreate();\n\n\t\t\tif (this.opts.textareamode) this.iframeAppend(this.$source);\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$sourceOld = this.$source.hide();\n\t\t\t\tthis.$source = this.buildCodearea(this.$sourceOld);\n\t\t\t\tthis.iframeAppend(this.$sourceOld);\n\t\t\t}\n\t\t},\n\t\tiframeAppend: function(el)\n\t\t{\n\t\t\tthis.$source.attr('dir', this.opts.direction).hide();\n\t\t\tthis.$box.insertAfter(el).append(this.$frame).append(this.$source);\n\t\t},\n\t\tiframeCreate: function()\n\t\t{\n\t\t\tthis.$frame = $('<iframe style=\"width: 100%;\" frameborder=\"0\" />').one('load', $.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.fullpage)\n\t\t\t\t{\n\t\t\t\t\tthis.iframePage();\n\n\t\t\t\t\tif (this.content === '') this.content = this.opts.invisibleSpace;\n\n\t\t\t\t\tthis.$frame.contents()[0].write(this.content);\n\t\t\t\t\tthis.$frame.contents()[0].close();\n\n\t\t\t\t\tvar timer = setInterval($.proxy(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.$frame.contents().find('body').html())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\t\t\tthis.iframeLoad();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this), 0);\n\t\t\t\t}\n\t\t\t\telse this.iframeLoad();\n\n\t\t\t}, this));\n\t\t},\n\t\tiframeDoc: function()\n\t\t{\n\t\t\treturn this.$frame[0].contentWindow.document;\n\t\t},\n\t\tiframePage: function()\n\t\t{\n\t\t\tvar doc = this.iframeDoc();\n\t\t\tif (doc.documentElement) doc.removeChild(doc.documentElement);\n\n\t\t\treturn doc;\n\t\t},\n\t\tiframeAddCss: function(css)\n\t\t{\n\t\t\tcss = css || this.opts.css;\n\n\t\t\tif (this.isString(css))\n\t\t\t{\n\t\t\t\tthis.$frame.contents().find('head').append('<link rel=\"stylesheet\" href=\"' + css + '\" />');\n\t\t\t}\n\n\t\t\tif ($.isArray(css))\n\t\t\t{\n\t\t\t\t$.each(css, $.proxy(function(i, url)\n\t\t\t\t{\n\t\t\t\t\tthis.iframeAddCss(url);\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t},\n\t\tiframeLoad: function()\n\t\t{\n\t\t\tthis.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\t\t\tif (this.$editor[0])\n\t\t\t{\n\t\t\t\tthis.document = this.$editor[0].ownerDocument;\n\t\t\t\tthis.window = this.document.defaultView || window;\n\t\t\t}\n\t\t\tthis.iframeAddCss();\n\n\t\t\tif (this.opts.fullpage)\n\t\t\t{\n\t\t\t\tthis.setFullpageOnInit(this.$source.val());\n\t\t\t}\n\t\t\telse this.set(this.content, true, false);\n\n\t\t\tthis.buildOptions();\n\t\t\tthis.buildAfter();\n\t\t},\n\t\tplaceholderInit: function()\n\t\t{\n\t\t\tif (this.opts.placeholder !== false)\n\t\t\t{\n\t\t\t\tthis.placeholderText = this.opts.placeholder;\n\t\t\t\tthis.opts.placeholder = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (typeof this.$element.attr('placeholder') == 'undefined' || this.$element.attr('placeholder') == '')\n\t\t\t\t{\n\t\t\t\t\tthis.opts.placeholder = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.placeholderText = this.$element.attr('placeholder');\n\t\t\t\t\tthis.opts.placeholder = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tplaceholderStart: function(html)\n\t\t{\n\t\t\tif (this.opts.placeholder === false)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.isEmpty(html))\n\t\t\t{\n\t\t\t\tthis.opts.focus = false;\n\t\t\t\tthis.placeholderOnFocus();\n\t\t\t\tthis.placeholderOnBlur();\n\n\t\t\t\treturn this.placeholderGet();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.placeholderOnBlur();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tplaceholderOnFocus: function()\n\t\t{\n\t\t\tthis.$editor.on('focus.redactor_placeholder', $.proxy(this.placeholderFocus, this));\n\t\t},\n\t\tplaceholderOnBlur: function()\n\t\t{\n\t\t\tthis.$editor.on('blur.redactor_placeholder', $.proxy(this.placeholderBlur, this));\n\t\t},\n\t\tplaceholderGet: function()\n\t\t{\n\t\t\tvar ph = $('<span class=\"redactor_placeholder\">').data('redactor', 'verified')\n\t\t\t.attr('contenteditable', false).text(this.placeholderText);\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\treturn $('<p>').append(ph);\n\t\t\t}\n\t\t\telse return ph;\n\t\t},\n\t\tplaceholderBlur: function()\n\t\t{\n\t\t\tvar html = this.get();\n\t\t\tif (this.isEmpty(html))\n\t\t\t{\n\t\t\t\tthis.placeholderOnFocus();\n\t\t\t\tthis.$editor.html(this.placeholderGet());\n\t\t\t}\n\t\t},\n\t\tplaceholderFocus: function()\n\t\t{\n\t\t\tthis.$editor.find('span.redactor_placeholder').remove();\n\n\t\t\tvar html = '';\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\thtml = this.opts.emptyHtml;\n\t\t\t}\n\n\t\t\tthis.$editor.off('focus.redactor_placeholder');\n\t\t\tthis.$editor.html(html);\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\n\t\t\t\tthis.selectionStart(this.$editor.children()[0]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tplaceholderRemoveFromEditor: function()\n\t\t{\n\t\t\tthis.$editor.find('span.redactor_placeholder').remove();\n\t\t\tthis.$editor.off('focus.redactor_placeholder');\n\t\t},\n\t\tplaceholderRemoveFromCode: function(html)\n\t\t{\n\t\t\treturn html.replace(/<span class=\"redactor_placeholder\"(.*?)>(.*?)<\\/span>/i, '');\n\t\t},\n\t\tshortcuts: function(e, key)\n\t\t{\n\t\t\tif (!this.opts.shortcuts)\n\t\t\t{\n\t\t\t\tif ((e.ctrlKey || e.metaKey) && (key === 66 || key === 73))\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$.each(this.opts.shortcuts, $.proxy(function(str, command)\n\t\t\t{\n\t\t\t\tvar keys = str.split(',');\n\t\t\t\tfor (var i in keys)\n\t\t\t\t{\n\t\t\t\t\tif (typeof keys[i] === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.shortcutsHandler(e, $.trim(keys[i]), $.proxy(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teval(command);\n\t\t\t\t\t\t}, this));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tshortcutsHandler: function(e, keys, origHandler)\n\t\t{\n\n\t\t\tvar hotkeysSpecialKeys =\n\t\t\t{\n\t\t\t\t8: \"backspace\", 9: \"tab\", 10: \"return\", 13: \"return\", 16: \"shift\", 17: \"ctrl\", 18: \"alt\", 19: \"pause\",\n\t\t\t\t20: \"capslock\", 27: \"esc\", 32: \"space\", 33: \"pageup\", 34: \"pagedown\", 35: \"end\", 36: \"home\",\n\t\t\t\t37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\", 45: \"insert\", 46: \"del\", 59: \";\", 61: \"=\",\n\t\t\t\t96: \"0\", 97: \"1\", 98: \"2\", 99: \"3\", 100: \"4\", 101: \"5\", 102: \"6\", 103: \"7\",\n\t\t\t\t104: \"8\", 105: \"9\", 106: \"*\", 107: \"+\", 109: \"-\", 110: \".\", 111 : \"/\",\n\t\t\t\t112: \"f1\", 113: \"f2\", 114: \"f3\", 115: \"f4\", 116: \"f5\", 117: \"f6\", 118: \"f7\", 119: \"f8\",\n\t\t\t\t120: \"f9\", 121: \"f10\", 122: \"f11\", 123: \"f12\", 144: \"numlock\", 145: \"scroll\", 173: \"-\", 186: \";\", 187: \"=\",\n\t\t\t\t188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\", 221: \"]\", 222: \"'\"\n\t\t\t};\n\t\t\tvar hotkeysShiftNums =\n\t\t\t{\n\t\t\t\t\"`\": \"~\", \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\",\n\t\t\t\t\"8\": \"*\", \"9\": \"(\", \"0\": \")\", \"-\": \"_\", \"=\": \"+\", \";\": \": \", \"'\": \"\\\"\", \",\": \"<\",\n\t\t\t\t\".\": \">\",  \"/\": \"?\",  \"\\\\\": \"|\"\n\t\t\t};\n\n\t\t\tkeys = keys.toLowerCase().split(\" \");\n\t\t\tvar special = hotkeysSpecialKeys[e.keyCode],\n\t\t\t\tcharacter = String.fromCharCode( e.which ).toLowerCase(),\n\t\t\t\tmodif = \"\", possible = {};\n\n\t\t\t$.each([ \"alt\", \"ctrl\", \"meta\", \"shift\"], function(index, specialKey)\n\t\t\t{\n\t\t\t\tif (e[specialKey + 'Key'] && special !== specialKey)\n\t\t\t\t{\n\t\t\t\t\tmodif += specialKey + '+';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (special)\n\t\t\t{\n\t\t\t\tpossible[modif + special] = true;\n\t\t\t}\n\n\t\t\tif (character)\n\t\t\t{\n\t\t\t\tpossible[modif + character] = true;\n\t\t\t\tpossible[modif + hotkeysShiftNums[character]] = true;\n\n\t\t\t\tif (modif === \"shift+\")\n\t\t\t\t{\n\t\t\t\t\tpossible[hotkeysShiftNums[character]] = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++)\n\t\t\t{\n\t\t\t\tif (possible[keys[i]])\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn origHandler.apply(this, arguments);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfocus: function()\n\t\t{\n\t\t\tif (!this.browser('opera'))\n\t\t\t{\n\t\t\t\tthis.window.setTimeout($.proxy(this.focusSet, this, true), 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\t\t},\n\t\tfocusWithSaveScroll: function()\n\t\t{\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tvar top = this.document.documentElement.scrollTop;\n\t\t\t}\n\n\t\t\tthis.$editor.focus();\n\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tthis.document.documentElement.scrollTop = top;\n\t\t\t}\n\t\t},\n\t\tfocusEnd: function()\n\t\t{\n\t\t\tif (!this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tthis.focusSet();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t{\n\t\t\t\t\tvar last = this.$editor.children().last();\n\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t\tthis.selectionEnd(last);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.focusSet();\n\t\t\t\t}\n\t\t\t}\n       \t},\n\t\tfocusSet: function(collapse, element)\n\t\t{\n\t\t\tthis.$editor.focus();\n\n\t\t\tif (typeof element == 'undefined')\n\t\t\t{\n\t\t\t\telement = this.$editor[0];\n\t\t\t}\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(element);\n\t\t\trange.collapse(collapse || false);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t},\n\t\ttoggle: function(direct)\n\t\t{\n\t\t\tif (this.opts.visual) this.toggleCode(direct);\n\t\t\telse this.toggleVisual();\n\t\t},\n\t\ttoggleVisual: function()\n\t\t{\n\t\t\tvar html = this.$source.hide().val();\n\t\t\tif (typeof this.modified !== 'undefined')\n\t\t\t{\n\t\t\t\tvar modified = this.modified.replace(/\\n/g, '');\n\n\t\t\t\tvar thtml = html.replace(/\\n/g, '');\n\t\t\t\tthtml = this.cleanRemoveSpaces(thtml, false);\n\n\t\t\t\tthis.modified = this.cleanRemoveSpaces(modified, false) !== thtml;\n\t\t\t}\n\n\t\t\tif (this.modified)\n\t\t\t{\n\n\t\t\t\tif (this.opts.fullpage && html === '')\n\t\t\t\t{\n\t\t\t\t\tthis.setFullpageOnInit(html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.set(html);\n\t\t\t\t\tif (this.opts.fullpage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.buildBindKeyboard();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.callback('change', false, html);\n\t\t\t}\n\n\t\t\tif (this.opts.iframe) this.$frame.show();\n\t\t\telse this.$editor.show();\n\n\t\t\tif (this.opts.fullpage) this.$editor.attr('contenteditable', true );\n\n\t\t\tthis.$source.off('keydown.redactor-textarea-indenting');\n\n\t\t\tthis.$editor.focus();\n\t\t\tthis.selectionRestore();\n\n\t\t\tthis.observeStart();\n\t\t\tthis.buttonActiveVisual();\n\t\t\tthis.buttonInactive('html');\n\t\t\tthis.opts.visual = true;\n\t\t},\n\t\ttoggleCode: function(direct)\n\t\t{\n\t\t\tif (direct !== false) this.selectionSave();\n\n\t\t\tvar height = null;\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\theight = this.$frame.height();\n\t\t\t\tif (this.opts.fullpage) this.$editor.removeAttr('contenteditable');\n\t\t\t\tthis.$frame.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\theight = this.$editor.innerHeight();\n\t\t\t\tthis.$editor.hide();\n\t\t\t}\n\n\t\t\tvar html = this.$source.val();\n\t\t\tif (html !== '' && this.opts.tidyHtml)\n\t\t\t{\n\t\t\t\tthis.$source.val(this.cleanHtml(html));\n\t\t\t}\n\n\t\t\tthis.modified = html;\n\n\t\t\tthis.$source.height(height).show().focus();\n\t\t\tthis.$source.on('keydown.redactor-textarea-indenting', this.textareaIndenting);\n\n\t\t\tthis.buttonInactiveVisual();\n\t\t\tthis.buttonActive('html');\n\t\t\tthis.opts.visual = false;\n\t\t},\n\t\ttextareaIndenting: function(e)\n\t\t{\n\t\t\tif (e.keyCode === 9)\n\t\t\t{\n\t\t\t\tvar $el = $(this);\n\t\t\t\tvar start = $el.get(0).selectionStart;\n\t\t\t\t$el.val($el.val().substring(0, start) + \"\\t\" + $el.val().substring($el.get(0).selectionEnd));\n\t\t\t\t$el.get(0).selectionStart = $el.get(0).selectionEnd = start + 1;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tautosave: function()\n\t\t{\n\t\t\tvar savedHtml = false;\n\t\t\tthis.autosaveInterval = setInterval($.proxy(function()\n\t\t\t{\n\t\t\t\tvar html = this.get();\n\t\t\t\tif (savedHtml !== html)\n\t\t\t\t{\n\t\t\t\t\tvar name = this.$source.attr('name');\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: this.opts.autosave,\n\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\tdata: 'name=' + name + '&' + name + '=' + escape(encodeURIComponent(html)),\n\t\t\t\t\t\tsuccess: $.proxy(function(data)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar json = $.parseJSON(data);\n\t\t\t\t\t\t\tif (typeof json.error == 'undefined')\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tthis.callback('autosave', false, json);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tthis.callback('autosaveError', false, json);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsavedHtml = html;\n\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this), this.opts.autosaveInterval*1000);\n\t\t},\n\t\ttoolbarBuild: function()\n\t\t{\n\n\t\t\tif (this.isMobile() && this.opts.buttonsHideOnMobile.length > 0)\n\t\t\t{\n\t\t\t\t$.each(this.opts.buttonsHideOnMobile, $.proxy(function(i, s)\n\t\t\t\t{\n\t\t\t\t\tvar index = this.opts.buttons.indexOf(s);\n\t\t\t\t\tthis.opts.buttons.splice(index, 1);\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif (this.opts.air)\n\t\t\t{\n\t\t\t\tthis.opts.buttons = this.opts.airButtons;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.buttonSource)\n\t\t\t\t{\n\t\t\t\t\tvar index = this.opts.buttons.indexOf('html');\n\t\t\t\t\tthis.opts.buttons.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.opts.toolbar)\n\t\t\t{\n\t\t\t\t$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function (i, s)\n\t\t\t\t{\n\t\t\t\t\tif ($.inArray(i, this.opts.formattingTags ) == '-1') delete this.opts.toolbar.formatting.dropdown[i];\n\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\tif (this.opts.buttons.length === 0) return false;\n\t\t\tthis.airEnable();\n\t\t\tthis.$toolbar = $('<ul>').addClass('redactor_toolbar').attr('id', 'redactor_toolbar_' + this.uuid);\n\n\t\t\tif (this.opts.typewriter)\n\t\t\t{\n\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-typewriter');\n\t\t\t}\n\n\t\t\tif (this.opts.toolbarOverflow && this.isMobile())\n\t\t\t{\n\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-overflow');\n\t\t\t}\n\n\t\t\tif (this.opts.air)\n\t\t\t{\n\n\t\t\t\tthis.$air = $('<div class=\"redactor_air\">').attr('id', 'redactor_air_' + this.uuid).hide();\n\t\t\t\tthis.$air.append(this.$toolbar);\n\t\t\t\t$('body').append(this.$air);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.opts.toolbarExternal)\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.addClass('redactor-toolbar-external');\n\t\t\t\t\t$(this.opts.toolbarExternal).html(this.$toolbar);\n\t\t\t\t}\n\t\t\t\telse this.$box.prepend(this.$toolbar);\n\t\t\t}\n\n\t\t\t$.each(this.opts.buttons, $.proxy(function(i, btnName)\n\t\t\t{\n\t\t\t\tif (this.opts.toolbar[btnName])\n\t\t\t\t{\n\t\t\t\t\tvar btnObject = this.opts.toolbar[btnName];\n\t\t\t\t\tif (this.opts.fileUpload === false && btnName === 'file') return true;\n\t\t\t\t\tthis.$toolbar.append( $('<li>').append(this.buttonBuild(btnName, btnObject)));\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tthis.$toolbar.find('a').attr('tabindex', '-1');\n\t\t\tif (this.opts.toolbarFixed)\n\t\t\t{\n\t\t\t\tthis.toolbarObserveScroll();\n\t\t\t\t$(this.opts.toolbarFixedTarget).on('scroll.redactor', $.proxy(this.toolbarObserveScroll, this));\n\t\t\t}\n\t\t\tif (this.opts.activeButtons)\n\t\t\t{\n\t\t\t\tthis.$editor.on('mouseup.redactor keyup.redactor', $.proxy(this.buttonActiveObserver, this));\n\t\t\t}\n\t\t},\n\t\ttoolbarObserveScroll: function()\n\t\t{\n\t\t\tvar scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();\n\n\t\t\tvar boxTop = 0;\n\t\t\tvar left = 0;\n\t\t\tvar end = 0;\n\n\t\t\tif (this.opts.toolbarFixedTarget === document)\n\t\t\t{\n\t\t\t\tboxTop = this.$box.offset().top;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboxTop = 1;\n\t\t\t}\n\n\t\t\tend = boxTop + this.$box.height() + 40;\n\n\t\t\tif (scrollTop > boxTop)\n\t\t\t{\n\t\t\t\tvar width = '100%';\n\t\t\t\tif (this.opts.toolbarFixedBox)\n\t\t\t\t{\n\t\t\t\t\tleft = this.$box.offset().left;\n\t\t\t\t\twidth = this.$box.innerWidth();\n\t\t\t\t\tthis.$toolbar.addClass('toolbar_fixed_box');\n\t\t\t\t}\n\n\t\t\t\tthis.toolbarFixed = true;\n\n\t\t\t\tif (this.opts.toolbarFixedTarget === document)\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\tzIndex: 10005,\n\t\t\t\t\t\ttop: this.opts.toolbarFixedTopOffset + 'px',\n\t\t\t\t\t\tleft: left\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\tzIndex: 10005,\n\t\t\t\t\t\ttop: (this.opts.toolbarFixedTopOffset + scrollTop) + 'px',\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (scrollTop < end) this.$toolbar.css('visibility', 'visible');\n\t\t\t\telse this.$toolbar.css('visibility', 'hidden');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.toolbarFixed = false;\n\t\t\t\tthis.$toolbar.css({\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\twidth: 'auto',\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: left\n\t\t\t\t});\n\n\t\t\t\tif (this.opts.toolbarFixedBox) this.$toolbar.removeClass('toolbar_fixed_box');\n\t\t\t}\n\t\t},\n\t\tairEnable: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tthis.$editor.on('mouseup.redactor keyup.redactor', this, $.proxy(function(e)\n\t\t\t{\n\t\t\t\tvar text = this.getSelectionText();\n\n\t\t\t\tif (e.type === 'mouseup' && text != '') this.airShow(e);\n\t\t\t\tif (e.type === 'keyup' && e.shiftKey && text != '')\n\t\t\t\t{\n\t\t\t\t\tvar $focusElem = $(this.getElement(this.getSelection().focusNode)), offset = $focusElem.offset();\n\t\t\t\t\toffset.height = $focusElem.height();\n\t\t\t\t\tthis.airShow(offset, true);\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tairShow: function (e, keyboard)\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar left, top;\n\t\t\t$('.redactor_air').hide();\n\n\t\t\tif (keyboard)\n\t\t\t{\n\t\t\t\tleft = e.left;\n\t\t\t\ttop = e.top + e.height + 14;\n\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\ttop += this.$box.position().top - $(this.document).scrollTop();\n\t\t\t\t\tleft += this.$box.position().left;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar width = this.$air.innerWidth();\n\n\t\t\t\tleft = e.clientX;\n\t\t\t\tif ($(this.document).width() < (left + width)) left -= width;\n\n\t\t\t\ttop = e.clientY + 14;\n\t\t\t\tif (this.opts.iframe)\n\t\t\t\t{\n\t\t\t\t\ttop += this.$box.position().top;\n\t\t\t\t\tleft += this.$box.position().left;\n\t\t\t\t}\n\t\t\t\telse top += $( this.document ).scrollTop();\n\t\t\t}\n\n\t\t\tthis.$air.css({\n\t\t\t\tleft: left + 'px',\n\t\t\t\ttop: top + 'px'\n\t\t\t}).show();\n\n\t\t\tthis.airBindHide();\n\t\t},\n\t\tairBindHide: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tvar hideHandler = $.proxy(function(doc)\n\t\t\t{\n\t\t\t\t$(doc).on('mousedown.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif ($( e.target ).closest(this.$toolbar).length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t\tthis.selectionRemove();\n\t\t\t\t\t\t$(doc).off(e);\n\t\t\t\t\t}\n\n\t\t\t\t}, this)).on('keydown.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif (e.which === this.keyCode.ESC)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getSelection().collapseToStart();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t$(doc).off(e);\n\n\t\t\t\t}, this));\n\t\t\t}, this);\n\t\t\thideHandler(document);\n\t\t\tif (this.opts.iframe) hideHandler(this.document);\n\t\t},\n\t\tairBindMousemoveHide: function()\n\t\t{\n\t\t\tif (!this.opts.air) return;\n\n\t\t\tvar hideHandler = $.proxy(function(doc)\n\t\t\t{\n\t\t\t\t$(doc).on('mousemove.redactor', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tif ($( e.target ).closest(this.$toolbar).length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$air.fadeOut(100);\n\t\t\t\t\t\t$(doc).off(e);\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t}, this);\n\t\t\thideHandler(document);\n\t\t\tif (this.opts.iframe) hideHandler(this.document);\n\t\t},\n\t\tdropdownBuild: function($dropdown, dropdownObject)\n\t\t{\n\t\t\t$.each(dropdownObject, $.proxy(function(btnName, btnObject)\n\t\t\t{\n\t\t\t\tif (!btnObject.className) btnObject.className = '';\n\n\t\t\t\tvar $item;\n\t\t\t\tif (btnObject.name === 'separator') $item = $('<a class=\"redactor_separator_drop\">');\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$item = $('<a href=\"#\" class=\"' + btnObject.className + ' redactor_dropdown_' + btnName + '\">' + btnObject.title + '</a>');\n\t\t\t\t\t$item.on('click', $.proxy(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.opts.air)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.selectionRestore();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\t\t\tif (this.browser('msie')) e.returnValue = false;\n\n\t\t\t\t\t\tif (btnObject.callback) btnObject.callback.call(this, btnName, $item, btnObject, e);\n\t\t\t\t\t\tif (btnObject.exec) this.execCommand(btnObject.exec, btnName);\n\t\t\t\t\t\tif (btnObject.func) this[btnObject.func](btnName);\n\n\t\t\t\t\t\tthis.buttonActiveObserver();\n\t\t\t\t\t\tif (this.opts.air) this.$air.fadeOut(100);\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\t$dropdown.append($item);\n\n\t\t\t}, this));\n\t\t},\n\t\tdropdownShow: function(e, key)\n\t\t{\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar $button = this.buttonGet(key);\n\t\t\tvar $dropdown  = $button.data('dropdown').appendTo(document.body);\n\n\t\t\tif ($button.hasClass('dropact')) this.dropdownHideAll();\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dropdownHideAll();\n\t\t\t\tthis.callback('dropdownShow', { dropdown: $dropdown, key: key, button: $button });\n\n\t\t\t\tthis.buttonActive(key);\n\t\t\t\t$button.addClass('dropact');\n\n\t\t\t\tvar keyPosition = $button.offset();\n\t\t\t\tvar dropdownWidth = $dropdown.width();\n\t\t\t\tif ((keyPosition.left + dropdownWidth) > $(document).width())\n\t\t\t\t{\n\t\t\t\t\tkeyPosition.left -= dropdownWidth;\n\t\t\t\t}\n\n\t\t\t\tvar left = keyPosition.left + 'px';\n\t\t\t\tvar btnHeight = $button.innerHeight();\n\n\t\t\t\tvar position = 'absolute';\n\t\t\t\tvar top = (btnHeight + this.opts.toolbarFixedTopOffset) + 'px';\n\n\t\t\t\tif (this.opts.toolbarFixed && this.toolbarFixed) position = 'fixed';\n\t\t\t\telse top = keyPosition.top + btnHeight + 'px';\n\n\t\t\t\t$dropdown.css({ position: position, left: left, top: top }).show();\n\t\t\t\tthis.callback('dropdownShown', { dropdown: $dropdown, key: key, button: $button });\n\t\t\t}\n\t\t\tvar hdlHideDropDown = $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.dropdownHide(e, $dropdown);\n\n\t\t\t}, this);\n\n\t\t\t$(document).one('click', hdlHideDropDown);\n\t\t\tthis.$editor.one('click', hdlHideDropDown);\n\t\t\tthis.$editor.one('touchstart', hdlHideDropDown);\n\t\t\te.stopPropagation();\n\t\t\tthis.focusWithSaveScroll();\n\t\t},\n\t\tdropdownHideAll: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.dropact').removeClass('redactor_act').removeClass('dropact');\n\t\t\t$('.redactor_dropdown').hide();\n\t\t\tthis.callback('dropdownHide');\n\t\t},\n\t\tdropdownHide: function (e, $dropdown)\n\t\t{\n\t\t\tif (!$(e.target).hasClass('dropact'))\n\t\t\t{\n\t\t\t\t$dropdown.removeClass('dropact');\n\t\t\t\tthis.dropdownHideAll();\n\t\t\t}\n\t\t},\n\t\tbuttonBuild: function(btnName, btnObject, buttonImage)\n\t\t{\n\t\t\tvar $button = $('<a href=\"javascript:;\" title=\"' + btnObject.title + '\" tabindex=\"-1\" class=\"re-icon re-' + btnName + '\"></a>');\n\n\t\t\tif (typeof buttonImage != 'undefined')\n\t\t\t{\n\t\t\t\t$button.addClass('redactor-btn-image');\n\t\t\t}\n\n\t\t\t$button.on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\tif (this.browser('msie')) e.returnValue = false;\n\n\t\t\t\tif ($button.hasClass('redactor_button_disabled')) return false;\n\n\t\t\t\tif (this.isFocused() === false && !btnObject.exec)\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t}\n\n\t\t\t\tif (btnObject.exec)\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\n\t\t\t\t\tthis.execCommand(btnObject.exec, btnName);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.func && btnObject.func !== 'show')\n\t\t\t\t{\n\t\t\t\t\tthis[btnObject.func](btnName);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.callback)\n\t\t\t\t{\n\t\t\t\t\tbtnObject.callback.call(this, btnName, $button, btnObject, e);\n\t\t\t\t\tthis.airBindMousemoveHide();\n\n\t\t\t\t}\n\t\t\t\telse if (btnObject.dropdown)\n\t\t\t\t{\n\t\t\t\t\tthis.dropdownShow(e, btnName);\n\t\t\t\t}\n\n\t\t\t\tthis.buttonActiveObserver(false, btnName);\n\n\t\t\t}, this));\n\t\t\tif (btnObject.dropdown)\n\t\t\t{\n\t\t\t\tvar $dropdown = $('<div class=\"redactor_dropdown redactor_dropdown_box_' + btnName + '\" style=\"display: none;\">');\n\t\t\t\t$button.data('dropdown', $dropdown);\n\t\t\t\tthis.dropdownBuild($dropdown, btnObject.dropdown);\n\t\t\t}\n\n\t\t\treturn $button;\n\t\t},\n\t\tbuttonGet: function(key)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return false;\n\t\t\treturn $(this.$toolbar.find('a.re-' + key));\n\t\t},\n\t\tbuttonTagToActiveState: function(buttonName, tagName)\n\t\t{\n\t\t\tthis.opts.activeButtons.push(buttonName);\n\t\t\tthis.opts.activeButtonsStates[tagName] = buttonName;\n\t\t},\n\t\tbuttonActiveToggle: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\n\t\t\tif (btn.hasClass('redactor_act'))\n\t\t\t{\n\t\t\t\tthis.buttonInactive(key);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.buttonActive(key);\n\t\t\t}\n\t\t},\n\t\tbuttonActive: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\t\t\tbtn.addClass('redactor_act');\n\t\t},\n\t\tbuttonInactive: function(key)\n\t\t{\n\t\t\tvar btn = this.buttonGet(key);\n\t\t\tbtn.removeClass('redactor_act');\n\t\t},\n\t\tbuttonInactiveAll: function(btnName)\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('.re-' + btnName).removeClass('redactor_act');\n\t\t},\n\t\tbuttonActiveVisual: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('a.re-html').removeClass('redactor_button_disabled');\n\t\t},\n\t\tbuttonInactiveVisual: function()\n\t\t{\n\t\t\tthis.$toolbar.find('a.re-icon').not('a.re-html').addClass('redactor_button_disabled');\n\t\t},\n\t\tbuttonChangeIcon: function (key, classname)\n\t\t{\n\t\t\tthis.buttonGet(key).addClass('re-' + classname);\n\t\t},\n\t\tbuttonRemoveIcon: function(key, classname)\n\t\t{\n\t\t\tthis.buttonGet(key).removeClass('re-' + classname);\n\t\t},\n\t\tbuttonAwesome: function(key, name)\n\t\t{\n\t\t\tvar button = this.buttonGet(key);\n\t\t\tbutton.removeClass('redactor-btn-image');\n\t\t\tbutton.addClass('fa-redactor-btn');\n\t\t\tbutton.html('<i class=\"fa ' + name + '\"></i>');\n\t\t},\n\t\tbuttonAdd: function(key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\n\t\t\tthis.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonAddFirst: function(key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tthis.$toolbar.prepend($('<li>').append(btn));\n\t\t},\n\t\tbuttonAddAfter: function(afterkey, key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tvar $btn = this.buttonGet(afterkey);\n\n\t\t\tif ($btn.length !== 0) $btn.parent().after($('<li>').append(btn));\n\t\t\telse this.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonAddBefore: function(beforekey, key, title, callback, dropdown)\n\t\t{\n\t\t\tif (!this.opts.toolbar) return;\n\t\t\tvar btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown }, true);\n\t\t\tvar $btn = this.buttonGet(beforekey);\n\n\t\t\tif ($btn.length !== 0) $btn.parent().before($('<li>').append(btn));\n\t\t\telse this.$toolbar.append($('<li>').append(btn));\n\n\t\t\treturn btn;\n\t\t},\n\t\tbuttonRemove: function (key)\n\t\t{\n\t\t\tvar $btn = this.buttonGet(key);\n\t\t\t$btn.remove();\n\t\t},\n\t\tbuttonActiveObserver: function(e, btnName)\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tthis.buttonInactiveAll(btnName);\n\n\t\t\tif (e === false && btnName !== 'html')\n\t\t\t{\n\t\t\t\tif ($.inArray(btnName, this.opts.activeButtons) != -1)\n\t\t\t\t{\n\t\t\t\t\tthis.buttonActiveToggle(btnName);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (parent && parent.tagName === 'A') this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_edit);\n\t\t\telse this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_insert);\n\n\t\t\t$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)\n\t\t\t{\n\t\t\t\tif ($(parent).closest(key, this.$editor.get()[0]).length != 0)\n\t\t\t\t{\n\t\t\t\t\tthis.buttonActive(value);\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tvar $parent = $(parent).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\tif ($parent.length)\n\t\t\t{\n\t\t\t\tvar align = $parent.css('text-align');\n\t\t\t\tif (align == '')\n\t\t\t\t{\n\t\t\t\t\talign = 'left';\n\t\t\t\t}\n\n\t\t\t\tthis.buttonActive('align' + align);\n\t\t\t}\n\t\t},\n\t\texecPasteFrag: function(html)\n\t\t{\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar range = this.getRange();\n\t\t\t\trange.deleteContents();\n\n\t\t\t\tvar el = this.document.createElement(\"div\");\n\t\t\t\tel.innerHTML = html;\n\n\t\t\t\tvar frag = this.document.createDocumentFragment(), node, lastNode;\n\t\t\t\twhile ((node = el.firstChild))\n\t\t\t\t{\n\t\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t\t}\n\n\t\t\t\tvar firstNode = frag.firstChild;\n\t\t\t\trange.insertNode(frag);\n\n\t\t\t\tif (lastNode)\n\t\t\t\t{\n\t\t\t\t\trange = range.cloneRange();\n\t\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t}\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\t\t},\n\t\texec: function(cmd, param, sync)\n\t\t{\n\t\t\tif (cmd === 'formatblock' && this.browser('msie'))\n\t\t\t{\n\t\t\t\tparam = '<' + param + '>';\n\t\t\t}\n\n\t\t\tif (cmd === 'inserthtml' && this.browser('msie'))\n\t\t\t{\n\t\t\t\tif (!this.isIe11())\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t\tthis.document.selection.createRange().pasteHTML(param);\n\t\t\t\t}\n\t\t\t\telse this.execPasteFrag(param);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.document.execCommand(cmd, false, param);\n\t\t\t}\n\n\t\t\tif (sync !== false) this.sync();\n\t\t\tthis.callback('execCommand', cmd, param);\n\t\t},\n\t\texecCommand: function(cmd, param, sync)\n\t\t{\n\t\t\tif (!this.opts.visual)\n\t\t\t{\n\t\t\t\tthis.$source.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (   cmd === 'bold'\n\t\t\t\t|| cmd === 'italic'\n\t\t\t\t|| cmd === 'underline'\n\t\t\t\t|| cmd === 'strikethrough')\n\t\t\t{\n\t\t\t\tthis.bufferSet();\n\t\t\t}\n\t\t\tif (cmd === 'superscript' || cmd === 'subscript')\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tif (parent.tagName === 'SUP' || parent.tagName === 'SUB')\n\t\t\t\t{\n\t\t\t\t\tthis.inlineRemoveFormatReplace(parent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cmd === 'inserthtml')\n\t\t\t{\n\t\t\t\tthis.insertHtml(param, sync);\n\t\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.currentOrParentIs('CODE') && !this.opts.formattingPre) return false;\n\t\t\tif (cmd === 'insertunorderedlist' || cmd === 'insertorderedlist') return this.execLists(cmd, param);\n\t\t\tif (cmd === 'unlink') return this.execUnlink(cmd, param);\n\t\t\tthis.exec(cmd, param, sync);\n\t\t\tif (cmd === 'inserthorizontalrule') this.$editor.find('hr').removeAttr('id');\n\n\t\t},\n\t\texecUnlink: function(cmd, param)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tvar link = this.currentOrParentIs('A');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\t$(link).replaceWith($(link).text());\n\n\t\t\t\tthis.sync();\n\t\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\texecLists: function(cmd, param)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $list = $(parent).closest('ol, ul');\n\n\t\t\tif (!this.isParentRedactor($list) && $list.length != 0)\n\t\t\t{\n\t\t\t\t$list = false;\n\t\t\t}\n\n\t\t\tvar remove = false;\n\n\t\t\tif ($list && $list.length)\n\t\t\t{\n\t\t\t\tremove = true;\n\t\t\t\tvar listTag = $list[0].tagName;\n\t\t\t \tif ((cmd === 'insertunorderedlist' && listTag === 'OL')\n\t\t\t \t|| (cmd === 'insertorderedlist' && listTag === 'UL'))\n\t\t\t \t{\n\t\t\t\t \tremove = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectionSave();\n\t\t\tif (remove)\n\t\t\t{\n\n\t\t\t\tvar nodes = this.getNodes();\n\t\t\t\tvar elems = this.getBlocks(nodes);\n\n\t\t\t\tif (typeof nodes[0] != 'undefined' && nodes.length > 1 && nodes[0].nodeType == 3)\n\t\t\t\t{\n\n\t\t\t\t\telems.unshift(this.getBlock());\n\t\t\t\t}\n\n\t\t\t\tvar data = '', replaced = '';\n\t\t\t\t$.each(elems, $.proxy(function(i,s)\n\t\t\t\t{\n\t\t\t\t\tif (s.tagName == 'LI')\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $s = $(s);\n\t\t\t\t\t\tvar cloned = $s.clone();\n\t\t\t\t\t\tcloned.find('ul', 'ol').remove();\n\n\t\t\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata += this.outerHtml($('<p>').append(cloned.contents()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar clonedHtml = cloned.html().replace(/<br\\s?\\/?>$/i, '');\n\t\t\t\t\t\t\tdata += clonedHtml + '<br>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (i == 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$s.addClass('redactor-replaced').empty();\n\t\t\t\t\t\t\treplaced = this.outerHtml($s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse $s.remove();\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t\thtml = this.$editor.html().replace(replaced, '</' + listTag + '>' + data + '<' + listTag + '>');\n\n\t\t\t\tthis.$editor.html(html);\n\t\t\t\tthis.$editor.find(listTag + ':empty').remove();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar firstParent = $(this.getParent()).closest('td');\n\n\t\t\t\tif (this.browser('msie') && !this.isIe11() && this.opts.linebreaks)\n\t\t\t\t{\n\t\t\t\t\tvar wrapper = this.selectionWrap('div');\n\t\t\t\t\tvar wrapperHtml = $(wrapper).html();\n\t\t\t\t\tvar tmpList = $('<ul>');\n\t\t\t\t\tif (cmd == 'insertorderedlist')\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpList = $('<ol>');\n\t\t\t\t\t}\n\n\t\t\t\t\tvar tmpLi = $('<li>');\n\n\t\t\t\t\tif ($.trim(wrapperHtml) == '')\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpLi.append(wrapperHtml + '<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t\ttmpList.append(tmpLi);\n\t\t\t\t\t\tthis.$editor.find('#selection-marker-1').replaceWith(tmpList);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttmpLi.append(wrapperHtml);\n\t\t\t\t\t\ttmpList.append(tmpLi);\n\t\t\t\t\t\t$(wrapper).replaceWith(tmpList);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.document.execCommand(cmd);\n\t\t\t\t}\n\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tvar $list = $(parent).closest('ol, ul');\n\n\t\t\t\tif (this.opts.linebreaks === false)\n\t\t\t\t{\n\t\t\t\t\tvar listText = $.trim($list.text());\n\t\t\t\t\tif (listText == '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$list.children('li').find('br').remove();\n\t\t\t\t\t\t$list.children('li').append('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (firstParent.length != 0)\n\t\t\t\t{\n\t\t\t\t\t$list.wrapAll('<td>');\n\t\t\t\t}\n\n\t\t\t\tif ($list.length)\n\t\t\t\t{\n\n\t\t\t\t\tvar $listParent = $list.parent();\n\t\t\t\t\tif (this.isParentRedactor($listParent) && $listParent[0].tagName != 'LI' && this.nodeTestBlocks($listParent[0]))\n\t\t\t\t\t{\n\t\t\t\t\t\t$listParent.replaceWith($listParent.contents());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.$editor.find('#selection-marker-1').removeAttr('id');\n\t\t\tthis.sync();\n\t\t\tthis.callback('execCommand', cmd, param);\n\t\t\treturn;\n\t\t},\n\t\tindentingIndent: function()\n\t\t{\n\t\t\tthis.indentingStart('indent');\n\t\t},\n\t\tindentingOutdent: function()\n\t\t{\n\t\t\tthis.indentingStart('outdent');\n\t\t},\n\t\tindentingStart: function(cmd)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (cmd === 'indent')\n\t\t\t{\n\t\t\t\tvar block = this.getBlock();\n\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tif (block && block.tagName == 'LI')\n\t\t\t\t{\n\n\t\t\t\t\tvar parent = this.getParent();\n\n\t\t\t\t\tvar $list = $(parent).closest('ol, ul');\n\t\t\t\t\tvar listTag = $list[0].tagName;\n\n\t\t\t\t\tvar elems = this.getBlocks();\n\n\t\t\t\t\t$.each(elems, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName == 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar $prev = $(s).prev();\n\t\t\t\t\t\t\tif ($prev.length != 0 && $prev[0].tagName == 'LI')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar $childList = $prev.children('ul, ol');\n\t\t\t\t\t\t\t\tif ($childList.length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$prev.append($('<' + listTag + '>').append(s));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse $childList.append(s);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\telse if (block === false && this.opts.linebreaks === true)\n\t\t\t\t{\n\t\t\t\t\tthis.exec('formatBlock', 'blockquote');\n\t\t\t\t\tvar newblock = this.getBlock();\n\t\t\t\t\tvar block = $('<div data-tagblock=\"\">').html($(newblock).html());\n\t\t\t\t\t$(newblock).replaceWith(block);\n\n\t\t\t\t\tvar left = this.normalize($(block).css('margin-left')) + this.opts.indentValue;\n\t\t\t\t\t$(block).css('margin-left', left + 'px');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\t\tif (elem.tagName === 'TD') return;\n\n\t\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar left = this.normalize($el.css('margin-left')) + this.opts.indentValue;\n\t\t\t\t\t\t$el.css('margin-left', left + 'px');\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\tthis.selectionRestore();\n\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tvar block = this.getBlock();\n\t\t\t\tif (block && block.tagName == 'LI')\n\t\t\t\t{\n\n\t\t\t\t\tvar elems = this.getBlocks();\n\t\t\t\t\tvar index = 0;\n\n\t\t\t\t\tthis.insideOutdent(block, index, elems);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar left = this.normalize($el.css('margin-left')) - this.opts.indentValue;\n\t\t\t\t\t\tif (left <= 0)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tif (this.opts.linebreaks === true && typeof($el.data('tagblock')) !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$el.replaceWith($el.html() + '<br>');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$el.css('margin-left', '');\n\t\t\t\t\t\t\t\tthis.removeEmptyAttr($el, 'style');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$el.css('margin-left', left + 'px');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\n\t\t\tthis.sync();\n\n\t\t},\n\t\tinsideOutdent: function (li, index, elems)\n\t\t{\n\t\t\tif (li && li.tagName == 'LI')\n\t\t\t{\n\t\t\t\tvar $parent = $(li).parent().parent();\n\t\t\t\tif ($parent.length != 0 && $parent[0].tagName == 'LI')\n\t\t\t\t{\n\t\t\t\t\t$parent.after(li);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (typeof elems[index] != 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tli = elems[index];\n\t\t\t\t\t\tindex++;\n\n\t\t\t\t\t\tthis.insideOutdent(li, index, elems);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.execCommand('insertunorderedlist');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\talignmentLeft: function()\n\t\t{\n\t\t\tthis.alignmentSet('', 'JustifyLeft');\n\t\t},\n\t\talignmentRight: function()\n\t\t{\n\t\t\tthis.alignmentSet('right', 'JustifyRight');\n\t\t},\n\t\talignmentCenter: function()\n\t\t{\n\t\t\tthis.alignmentSet('center', 'JustifyCenter');\n\t\t},\n\t\talignmentJustify: function()\n\t\t{\n\t\t\tthis.alignmentSet('justify', 'JustifyFull');\n\t\t},\n\t\talignmentSet: function(type, cmd)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (this.oldIE())\n\t\t\t{\n\t\t\t\tthis.document.execCommand(cmd, false, false);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar block = this.getBlock();\n\t\t\tif (!block && this.opts.linebreaks)\n\t\t\t{\n\n\t\t\t\tthis.exec('formatblock', 'div');\n\n\t\t\t\tvar newblock = this.getBlock();\n\t\t\t\tvar block = $('<div data-tagblock=\"\">').html($(newblock).html());\n\t\t\t\t$(newblock).replaceWith(block);\n\n\t\t\t\t$(block).css('text-align', type);\n\t\t\t\tthis.removeEmptyAttr(block, 'style');\n\n\t\t\t\tif (type == '' && typeof($(block).data('tagblock')) !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\t$(block).replaceWith($(block).html());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar elements = this.getBlocks();\n\t\t\t\t$.each(elements, $.proxy(function(i, elem)\n\t\t\t\t{\n\t\t\t\t\tvar $el = false;\n\n\t\t\t\t\tif ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)\n\t\t\t\t\t{\n\t\t\t\t\t\t$el = $(elem);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($el)\n\t\t\t\t\t{\n\t\t\t\t\t\t$el.css('text-align', type);\n\t\t\t\t\t\tthis.removeEmptyAttr($el, 'style');\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tcleanEmpty: function(html)\n\t\t{\n\t\t\tvar ph = this.placeholderStart(html);\n\t\t\tif (ph !== false) return ph;\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tif (html === '') html = this.opts.emptyHtml;\n\t\t\t\telse if (html.search(/^<hr\\s?\\/?>$/gi) !== -1) html = '<hr>' + this.opts.emptyHtml;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanConverters: function(html)\n\t\t{\n\n\t\t\tif (this.opts.convertDivs && !this.opts.gallery)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '<p$1>$2</p>');\n\t\t\t}\n\n\t\t\tif (this.opts.paragraphy) html = this.cleanParagraphy(html);\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanConvertProtected: function(html)\n\t\t{\n\t\t\tif (this.opts.templateVars)\n\t\t\t{\n\t\t\t\thtml = html.replace(/\\{\\{(.*?)\\}\\}/gi, '<!-- template double $1 -->');\n\t\t\t\thtml = html.replace(/\\{(.*?)\\}/gi, '<!-- template $1 -->');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<script(.*?)>([\\w\\W]*?)<\\/script>/gi, '<title type=\"text/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"$1>$2</title>');\n\t\t\thtml = html.replace(/<style(.*?)>([\\w\\W]*?)<\\/style>/gi, '<section$1 style=\"display: none;\" rel=\"redactor-style-tag\">$2</section>');\n\t\t\thtml = html.replace(/<form(.*?)>([\\w\\W]*?)<\\/form>/gi, '<section$1 rel=\"redactor-form-tag\">$2</section>');\n\t\t\tif (this.opts.phpTags) html = html.replace(/<\\?php([\\w\\W]*?)\\?>/gi, '<section style=\"display: none;\" rel=\"redactor-php-tag\">$1</section>');\n\t\t\telse html = html.replace(/<\\?php([\\w\\W]*?)\\?>/gi, '');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanReConvertProtected: function(html)\n\t\t{\n\t\t\tif (this.opts.templateVars)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<!-- template double (.*?) -->/gi, '{{$1}}');\n\t\t\t\thtml = html.replace(/<!-- template (.*?) -->/gi, '{$1}');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<title type=\"text\\/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"(.*?)>([\\w\\W]*?)<\\/title>/gi, '<script$1 type=\"text/javascript\">$2</script>');\n\t\t\thtml = html.replace(/<section(.*?) style=\"display: none;\" rel=\"redactor-style-tag\">([\\w\\W]*?)<\\/section>/gi, '<style$1>$2</style>');\n\t\t\thtml = html.replace(/<section(.*?)rel=\"redactor-form-tag\"(.*?)>([\\w\\W]*?)<\\/section>/gi, '<form$1$2>$3</form>');\n\t\t\tif (this.opts.phpTags) html = html.replace(/<section style=\"display: none;\" rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi, '<?php\\r\\n$1\\r\\n?>');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanRemoveSpaces: function(html, buffer)\n\t\t{\n\t\t\tif (buffer !== false)\n\t\t\t{\n\t\t\t\tvar buffer = []\n\t\t\t\tvar matches = html.match(/<(code|style|script|title)(.*?)>([\\w\\W]*?)<\\/(code|style|script|title)>/gi);\n\t\t\t\tif (matches === null) matches = [];\n\n\t\t\t\tif (this.opts.phpTags)\n\t\t\t\t{\n\t\t\t\t\tvar phpMatches = html.match(/<\\?php([\\w\\W]*?)\\?>/gi);\n\t\t\t\t\tif (phpMatches) matches = $.merge(matches, phpMatches);\n\t\t\t\t}\n\n\t\t\t\tif (matches)\n\t\t\t\t{\n\t\t\t\t\t$.each(matches, function(i, s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(s, 'buffer_' + i);\n\t\t\t\t\t\tbuffer.push(s);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml = html.replace(/\\n/g, ' ');\n\t\t\thtml = html.replace(/[\\t]*/g, '');\n\t\t\thtml = html.replace(/\\n\\s*\\n/g, \"\\n\");\n\t\t\thtml = html.replace(/^[\\s\\n]*/g, ' ');\n\t\t\thtml = html.replace(/[\\s\\n]*$/g, ' ');\n\t\t\thtml = html.replace( />\\s{2,}</g, '> <');\n\n\t\t\thtml = this.cleanReplacer(html, buffer);\n\n\t\t\thtml = html.replace(/\\n\\n/g, \"\\n\");\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanReplacer: function(html, buffer)\n\t\t{\n\t\t\tif (buffer === false) return html;\n\n\t\t\t$.each(buffer, function(i,s)\n\t\t\t{\n\t\t\t\thtml = html.replace('buffer_' + i, s);\n\t\t\t});\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanRemoveEmptyTags: function(html)\n\t\t{\n\n\t\t\thtml = html.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\n\n\t\t\tvar etagsInline = [\"<b>\\\\s*</b>\", \"<b>&nbsp;</b>\", \"<em>\\\\s*</em>\"]\n\t\t\tvar etags = [\"<code></code>\", \"<blockquote>\\\\s*</blockquote>\", \"<dd></dd>\", \"<dt></dt>\", \"<ul></ul>\", \"<ol></ol>\", \"<li></li>\", \"<table></table>\", \"<tr></tr>\", \"<span>\\\\s*<span>\", \"<span>&nbsp;<span>\", \"<p>\\\\s*</p>\", \"<p></p>\", \"<p>&nbsp;</p>\",  \"<p>\\\\s*<br>\\\\s*</p>\", \"<div>\\\\s*</div>\", \"<div>\\\\s*<br>\\\\s*</div>\"];\n\n\t\t\tif (this.opts.removeEmptyTags)\n\t\t\t{\n\t\t\t\tetags = etags.concat(etagsInline);\n\t\t\t}\n\t\t\telse etags = etagsInline;\n\n\t\t\tvar len = etags.length;\n\t\t\tfor (var i = 0; i < len; ++i)\n\t\t\t{\n\t\t\t\thtml = html.replace(new RegExp(etags[i], 'gi'), \"\");\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanParagraphy: function(html)\n\t\t{\n\t\t\thtml = $.trim(html);\n\n\t\t\tif (this.opts.linebreaks === true) return html;\n\t\t\tif (html === '' || html === '<p></p>') return this.opts.emptyHtml;\n\n\t\t\thtml = html + \"\\n\";\n\n\t\t\tif (this.opts.removeEmptyTags === false)\n\t\t\t{\n\t\t\t\treturn html;\n\t\t\t}\n\n\t\t\tvar safes = [];\n\t\t\tvar matches = html.match(/<(table|div|code|object)(.*?)>([\\w\\W]*?)<\\/(table|div|code|object)>/gi);\n\t\t\tif (!matches) matches = [];\n\n\t\t\tvar commentsMatches = html.match(/<!--([\\w\\W]*?)-->/gi);\n\t\t\tif (commentsMatches) matches = $.merge(matches, commentsMatches);\n\n\t\t\tif (this.opts.phpTags)\n\t\t\t{\n\t\t\t\tvar phpMatches = html.match(/<section(.*?)rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi);\n\t\t\t\tif (phpMatches) matches = $.merge(matches, phpMatches);\n\t\t\t}\n\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\t$.each(matches, function(i,s)\n\t\t\t\t{\n\t\t\t\t\tsafes[i] = s;\n\t\t\t\t\thtml = html.replace(s, '{replace' + i + '}\\n');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thtml = html.replace(/<br \\/>\\s*<br \\/>/gi, \"\\n\\n\");\n\t\t\thtml = html.replace(/<br><br>/gi, \"\\n\\n\");\n\n\t\t\tfunction R(str, mod, r)\n\t\t\t{\n\t\t\t\treturn html.replace(new RegExp(str, mod), r);\n\t\t\t}\n\n\t\t\tvar blocks = '(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|code|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)';\n\n\t\t\thtml = R('(<' + blocks + '[^>]*>)', 'gi', \"\\n$1\");\n\t\t\thtml = R('(</' + blocks + '>)', 'gi', \"$1\\n\\n\");\n\t\t\thtml = R(\"\\r\\n\", 'g', \"\\n\");\n\t\t\thtml = R(\"\\r\", 'g', \"\\n\");\n\t\t\thtml = R(\"/\\n\\n+/\", 'g', \"\\n\\n\");\n\n\t\t\tvar htmls = html.split(new RegExp('\\n\\s*\\n', 'g'), -1);\n\n\t\t\thtml = '';\n\t\t\tfor (var i in htmls)\n\t\t\t{\n\t\t\t\tif (htmls.hasOwnProperty(i))\n                {\n\t\t\t\t\tif (htmls[i].search('{replace') == -1)\n\t\t\t\t\t{\n\t\t\t\t\t\thtmls[i] = htmls[i].replace(/<p>\\n\\t?<\\/p>/gi, '');\n\t\t\t\t\t\thtmls[i] = htmls[i].replace(/<p><\\/p>/gi, '');\n\n\t\t\t\t\t\tif (htmls[i] != '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml += '<p>' +  htmls[i].replace(/^\\n+|\\n+$/g, \"\") + \"</p>\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse html += htmls[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml = R('<p><p>', 'gi', '<p>');\n\t\t\thtml = R('</p></p>', 'gi', '</p>');\n\n\t\t\thtml = R('<p>\\s?</p>', 'gi', '');\n\n\t\t\thtml = R('<p>([^<]+)</(div|address|form)>', 'gi', \"<p>$1</p></$2>\");\n\n\t\t\thtml = R('<p>(</?' + blocks + '[^>]*>)</p>', 'gi', \"$1\");\n\t\t\thtml = R(\"<p>(<li.+?)</p>\", 'gi', \"$1\");\n\t\t\thtml = R('<p>\\s?(</?' + blocks + '[^>]*>)', 'gi', \"$1\");\n\n\t\t\thtml = R('(</?' + blocks + '[^>]*>)\\s?</p>', 'gi', \"$1\");\n\t\t\thtml = R('(</?' + blocks + '[^>]*>)\\s?<br />', 'gi', \"$1\");\n\t\t\thtml = R('<br />(\\s*</?(?:p|li|div|dl|dd|dt|th|code|td|ul|ol)[^>]*>)', 'gi', '$1');\n\t\t\thtml = R(\"\\n</p>\", 'gi', '</p>');\n\n\t\t\thtml = R('<li><p>', 'gi', '<li>');\n\t\t\thtml = R('</p></li>', 'gi', '</li>');\n\t\t\thtml = R('</li><p>', 'gi', '</li>');\n\t\t\thtml = R('<p>\\t?\\n?<p>', 'gi', '<p>');\n\t\t\thtml = R('</dt><p>', 'gi', '</dt>');\n\t\t\thtml = R('</dd><p>', 'gi', '</dd>');\n\t\t\thtml = R('<br></p></blockquote>', 'gi', '</blockquote>');\n\t\t\thtml = R('<p>\\t*</p>', 'gi', '');\n\t\t\t$.each(safes, function(i,s)\n\t\t\t{\n\t\t\t\thtml = html.replace('{replace' + i + '}', s);\n\t\t\t});\n\n\t\t\treturn $.trim(html);\n\t\t},\n\t\tcleanConvertInlineTags: function(html, set)\n\t\t{\n\t\t\tvar boldTag = 'strong';\n\t\t\tif (this.opts.boldTag === 'b') boldTag = 'b';\n\n\t\t\tvar italicTag = 'em';\n\t\t\tif (this.opts.italicTag === 'i') italicTag = 'i';\n\n\t\t\thtml = html.replace(/<span style=\"font-style: italic;\">([\\w\\W]*?)<\\/span>/gi, '<' + italicTag + '>$1</' + italicTag + '>');\n\t\t\thtml = html.replace(/<span style=\"font-weight: bold;\">([\\w\\W]*?)<\\/span>/gi, '<' + boldTag + '>$1</' + boldTag + '>');\n\t\t\tif (this.opts.boldTag === 'strong') html = html.replace(/<b>([\\w\\W]*?)<\\/b>/gi, '<strong>$1</strong>');\n\t\t\telse html = html.replace(/<strong>([\\w\\W]*?)<\\/strong>/gi, '<b>$1</b>');\n\n\t\t\tif (this.opts.italicTag === 'em') html = html.replace(/<i>([\\w\\W]*?)<\\/i>/gi, '<em>$1</em>');\n\t\t\telse html = html.replace(/<em>([\\w\\W]*?)<\\/em>/gi, '<i>$1</i>');\n\n\t\t\thtml = html.replace(/<span style=\"text-decoration: underline;\">([\\w\\W]*?)<\\/span>/gi, '<u>$1</u>');\n\n\t\t\tif (set !== true) html = html.replace(/<strike>([\\w\\W]*?)<\\/strike>/gi, '<del>$1</del>');\n\t\t\telse html = html.replace(/<del>([\\w\\W]*?)<\\/del>/gi, '<strike>$1</strike>');\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanStripTags: function(html)\n\t\t{\n\t\t\tif (html == '' || typeof html == 'undefined') return html;\n\n\t\t\tvar allowed = false;\n\t\t\tif (this.opts.allowedTags !== false) allowed = true;\n\n\t\t\tvar arr = allowed === true ? this.opts.allowedTags : this.opts.deniedTags;\n\n\t\t\tvar tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n\t\t\thtml = html.replace(tags, function ($0, $1)\n\t\t\t{\n\t\t\t\tif (allowed === true) return $.inArray($1.toLowerCase(), arr) > '-1' ? $0 : '';\n\t\t\t\telse return $.inArray($1.toLowerCase(), arr) > '-1' ? '' : $0;\n\t\t\t});\n\n\t\t\thtml = this.cleanConvertInlineTags(html);\n\n\t\t\treturn html;\n\n\t\t},\n\t\tcleanSavePreCode: function(html, encode)\n\t\t{\n\t\t\tvar pre = html.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/gi);\n\t\t\tif (pre !== null)\n\t\t\t{\n\t\t\t\t$.each(pre, $.proxy(function(i,s)\n\t\t\t\t{\n\t\t\t\t\tvar arr = s.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/i);\n\n\t\t\t\t\tarr[3] = arr[3].replace(/&nbsp;/g, ' ');\n\n\t\t\t\t\tif (encode !== false) arr[3] = this.cleanEncodeEntities(arr[3]);\n\n\t\t\t\t\tarr[3] = arr[3].replace(/\\$/g, '&#36;');\n\n\t\t\t\t\thtml = html.replace(s, '<' + arr[1] + arr[2] + '>' + arr[3] + '</' + arr[1] + '>');\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\treturn html;\n\t\t},\n\t\tcleanEncodeEntities: function(str)\n\t\t{\n\t\t\tstr = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"');\n\t\t\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t\t},\n\t\tcleanUnverified: function()\n\t\t{\n\n\t\t\tvar $elem = this.$editor.find('li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite');\n\n\t\t\t$elem.filter('[style*=\"background-color: transparent;\"][style*=\"line-height\"]')\n\t\t\t.css('background-color', '')\n\t\t\t.css('line-height', '');\n\n\t\t\t$elem.filter('[style*=\"background-color: transparent;\"]')\n\t\t\t.css('background-color', '');\n\n\t\t\t$elem.css('line-height', '');\n\n\t\t\t$.each($elem, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tthis.removeEmptyAttr(s, 'style');\n\t\t\t}, this));\n\n\t\t\tvar $elem2 = this.$editor.find('b, strong, i, em, u, strike, del');\n\t\t\t$elem2.css('font-size', '');\n\n\t\t\t$.each($elem2, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tthis.removeEmptyAttr(s, 'style');\n\t\t\t}, this));\n\t\t\tthis.$editor.find('div[style=\"text-align: -webkit-auto;\"]').contents().unwrap();\n\t\t\tthis.$editor.find('ul, ol, li').removeAttr('style');\n\t\t},\n\n\t\tcleanHtml: function(code)\n\t\t{\n\t\t\tvar i = 0,\n\t\t\tcodeLength = code.length,\n\t\t\tpoint = 0,\n\t\t\tstart = null,\n\t\t\tend = null,\n\t\t\ttag = '',\n\t\t\tout = '',\n\t\t\tcont = '';\n\n\t\t\tthis.cleanlevel = 0;\n\n\t\t\tfor (; i < codeLength; i++)\n\t\t\t{\n\t\t\t\tpoint = i;\n\t\t\t\tif (-1 == code.substr(i).indexOf( '<' ))\n\t\t\t\t{\n\t\t\t\t\tout += code.substr(i);\n\n\t\t\t\t\treturn this.cleanFinish(out);\n\t\t\t\t}\n\t\t\t\twhile (point < codeLength && code.charAt(point) != '<')\n\t\t\t\t{\n\t\t\t\t\tpoint++;\n\t\t\t\t}\n\n\t\t\t\tif (i != point)\n\t\t\t\t{\n\t\t\t\t\tcont = code.substr(i, point - i);\n\t\t\t\t\tif (!cont.match(/^\\s{2,}$/g))\n\t\t\t\t\t{\n\t\t\t\t\t\tif ('\\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();\n\t\t\t\t\t\telse if ('\\n' == cont.charAt(0))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tout += '\\n' + this.cleanGetTabs();\n\t\t\t\t\t\t\tcont = cont.replace(/^\\s+/, '');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tout += cont;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cont.match(/\\n/)) out += '\\n' + this.cleanGetTabs();\n\t\t\t\t}\n\n\t\t\t\tstart = point;\n\t\t\t\twhile (point < codeLength && '>' != code.charAt(point))\n\t\t\t\t{\n\t\t\t\t\tpoint++;\n\t\t\t\t}\n\n\t\t\t\ttag = code.substr(start, point - start);\n\t\t\t\ti = point;\n\n\t\t\t\tvar t;\n\n\t\t\t\tif ('!--' == tag.substr(1, 3))\n\t\t\t\t{\n\t\t\t\t\tif (!tag.match(/--$/))\n\t\t\t\t\t{\n\t\t\t\t\t\twhile ('-->' != code.substr(point, 3))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpoint++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpoint += 2;\n\t\t\t\t\t\ttag = code.substr(start, point - start);\n\t\t\t\t\t\ti = point;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('\\n' != out.charAt(out.length - 1)) out += '\\n';\n\n\t\t\t\t\tout += this.cleanGetTabs();\n\t\t\t\t\tout += tag + '>\\n';\n\t\t\t\t}\n\t\t\t\telse if ('!' == tag[1])\n\t\t\t\t{\n\t\t\t\t\tout = this.placeTag(tag + '>', out);\n\t\t\t\t}\n\t\t\t\telse if ('?' == tag[1])\n\t\t\t\t{\n\t\t\t\t\tout += tag + '>\\n';\n\t\t\t\t}\n\t\t\t\telse if (t = tag.match(/^<(script|style|pre|code)/i))\n\t\t\t\t{\n\t\t\t\t\tt[1] = t[1].toLowerCase();\n\t\t\t\t\ttag = this.cleanTag(tag);\n\t\t\t\t\tout = this.placeTag(tag, out);\n\t\t\t\t\tend = String(code.substr(i + 1)).toLowerCase().indexOf('</' + t[1]);\n\n\t\t\t\t\tif (end)\n\t\t\t\t\t{\n\t\t\t\t\t\tcont = code.substr(i + 1, end);\n\t\t\t\t\t\ti += end;\n\t\t\t\t\t\tout += cont;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttag = this.cleanTag(tag);\n\t\t\t\t\tout = this.placeTag(tag, out);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.cleanFinish(out);\n\t\t},\n\t\tcleanGetTabs: function()\n\t\t{\n\t\t\tvar s = '';\n\t\t\tfor ( var j = 0; j < this.cleanlevel; j++ )\n\t\t\t{\n\t\t\t\ts += '\\t';\n\t\t\t}\n\n\t\t\treturn s;\n\t\t},\n\t\tcleanFinish: function(code)\n\t\t{\n\t\t\tcode = code.replace(/\\n\\s*\\n/g, '\\n');\n\t\t\tcode = code.replace(/^[\\s\\n]*/, '');\n\t\t\tcode = code.replace(/[\\s\\n]*$/, '');\n\t\t\tcode = code.replace(/<script(.*?)>\\n<\\/script>/gi, '<script$1></script>');\n\n\t\t\tthis.cleanlevel = 0;\n\n\t\t\treturn code;\n\t\t},\n\t\tcleanTag: function (tag)\n\t\t{\n\t\t\tvar tagout = '';\n\t\t\ttag = tag.replace(/\\n/g, ' ');\n\t\t\ttag = tag.replace(/\\s{2,}/g, ' ');\n\t\t\ttag = tag.replace(/^\\s+|\\s+$/g, ' ');\n\n\t\t\tvar suffix = '';\n\t\t\tif (tag.match(/\\/$/))\n\t\t\t{\n\t\t\t\tsuffix = '/';\n\t\t\t\ttag = tag.replace(/\\/+$/, '');\n\t\t\t}\n\n\t\t\tvar m;\n\t\t\twhile (m = /\\s*([^= ]+)(?:=((['\"']).*?\\3|[^ ]+))?/.exec(tag))\n\t\t\t{\n\t\t\t\tif (m[2]) tagout += m[1].toLowerCase() + '=' + m[2];\n\t\t\t\telse if (m[1]) tagout += m[1].toLowerCase();\n\n\t\t\t\ttagout += ' ';\n\t\t\t\ttag = tag.substr(m[0].length);\n\t\t\t}\n\n\t\t\treturn tagout.replace(/\\s*$/, '') + suffix + '>';\n\t\t},\n\t\tplaceTag: function (tag, out)\n\t\t{\n\t\t\tvar nl = tag.match(this.cleannewLevel);\n\t\t\tif (tag.match(this.cleanlineBefore) || nl)\n\t\t\t{\n\t\t\t\tout = out.replace(/\\s*$/, '');\n\t\t\t\tout += '\\n';\n\t\t\t}\n\n\t\t\tif (nl && '/' == tag.charAt(1)) this.cleanlevel--;\n\t\t\tif ('\\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();\n\t\t\tif (nl && '/' != tag.charAt(1)) this.cleanlevel++;\n\n\t\t\tout += tag;\n\n\t\t\tif (tag.match(this.cleanlineAfter) || tag.match(this.cleannewLevel))\n\t\t\t{\n\t\t\t\tout = out.replace(/ *$/, '');\n\t\t\t\tout += '\\n';\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\t\tformatEmpty: function(e)\n\t\t{\n\t\t\tvar html = $.trim(this.$editor.html());\n\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\t\t\t\tif (html == '')\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.$editor.html('');\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<br\\s?\\/?>/i, '');\n\t\t\t\tvar thtml = html.replace(/<p>\\s?<\\/p>/gi, '');\n\n\t\t\t\tif (html === '' || thtml === '')\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tvar node = $(this.opts.emptyHtml).get(0);\n\t\t\t\t\tthis.$editor.html(node);\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tformatBlocks: function(tag)\n\t\t{\n\t\t\tif (this.browser('mozilla') && this.isFocused())\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar nodes = this.getBlocks();\n\t\t\tthis.selectionSave();\n\n\t\t\t$.each(nodes, $.proxy(function(i, node)\n\t\t\t{\n\t\t\t\tif (node.tagName !== 'LI')\n\t\t\t\t{\n\t\t\t\t\tvar parent = $(node).parent();\n\n\t\t\t\t\tif (tag === 'p')\n\t\t\t\t\t{\n\t\t\t\t\t\tif ((node.tagName === 'P'\n\t\t\t\t\t\t&& parent.length != 0\n\t\t\t\t\t\t&& parent[0].tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t||\n\t\t\t\t\t\tnode.tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatQuote();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.opts.linebreaks)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (node && node.tagName.search(/H[1-6]/) == 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$(node).replaceWith(node.innerHTML + '<br>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock(tag, node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.formatBlock(tag, node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tformatBlock: function(tag, block)\n\t\t{\n\t\t\tif (block === false) block = this.getBlock();\n\t\t\tif (block === false && this.opts.linebreaks === true)\n\t\t\t{\n\t\t\t\tthis.execCommand('formatblock', tag);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar contents = '';\n\t\t\tif (tag !== 'code')\n\t\t\t{\n\t\t\t\tcontents = $(block).contents();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tcontents = $(block).html();\n\t\t\t\tif ($.trim(contents) === '')\n\t\t\t\t{\n\t\t\t\t\tcontents = '<span id=\"selection-marker-1\"></span>';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (block.tagName === 'CODE') tag = 'p';\n\n\t\t\tif (this.opts.linebreaks === true && tag === 'p')\n\t\t\t{\n\t\t\t\t$(block).replaceWith($('<div>').append(contents).html() + '<br>');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\n\t\t\t\tvar node = $('<' + tag + '>').append(contents);\n\t\t\t\t$(block).replaceWith(node);\n\n\t\t\t\tif (parent && parent.tagName == 'TD')\n\t\t\t\t{\n\t\t\t\t\t$(node).wrapAll('<td>');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tformatChangeTag: function(fromElement, toTagName, save)\n\t\t{\n\t\t\tif (save !== false) this.selectionSave();\n\n\t\t\tvar newElement = $('<' + toTagName + '/>');\n\t\t\t$(fromElement).replaceWith(function() { return newElement.append($(this).contents()); });\n\n\t\t\tif (save !== false) this.selectionRestore();\n\n\t\t\treturn newElement;\n\t\t},\n\t\tformatQuote: function()\n\t\t{\n\t\t\tif (this.browser('mozilla') && this.isFocused())\n\t\t\t{\n\t\t\t\tthis.$editor.focus();\n\t\t\t}\n\n\t\t\tthis.bufferSet();\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\n\t\t\t\tvar blocks = this.getBlocks();\n\n\t\t\t\tvar blockquote = false;\n\t\t\t\tvar blocksLen = blocks.length;\n\t\t\t\tif (blocks)\n\t\t\t\t{\n\t\t\t\t\tvar data = '';\n\t\t\t\t\tvar replaced = '';\n\t\t\t\t\tvar replace = false;\n\t\t\t\t\tvar paragraphsOnly = true;\n\n\t\t\t\t\t$.each(blocks, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName !== 'P') paragraphsOnly = false;\n\t\t\t\t\t});\n\n\t\t\t\t\t$.each(blocks, $.proxy(function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (s.tagName === 'BLOCKQUOTE')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock('p', s, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (s.tagName === 'P')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblockquote = $(s).parent();\n\n\t\t\t\t\t\t\tif (blockquote[0].tagName == 'BLOCKQUOTE')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar count = $(blockquote).children('p').length;\n\t\t\t\t\t\t\t\tif (count == 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$(blockquote).replaceWith(s);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\telse if (count == blocksLen)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'blockquote';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'html';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\n\t\t\t\t\t\t\t\t\tif (i == 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(s).addClass('redactor-replaced').empty();\n\t\t\t\t\t\t\t\t\t\treplaced = this.outerHtml(s);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse $(s).remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (paragraphsOnly === false || blocks.length == 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.formatBlock('blockquote', s, false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treplace = 'paragraphs';\n\t\t\t\t\t\t\t\t\tdata += this.outerHtml(s);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (s.tagName !== 'LI')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.formatBlock('blockquote', s, false);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, this));\n\n\t\t\t\t\tif (replace)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (replace == 'paragraphs')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$(blocks[0]).replaceWith('<blockquote>' + data + '</blockquote>');\n\t\t\t\t\t\t\t$(blocks).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (replace == 'blockquote')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$(blockquote).replaceWith(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (replace == 'html')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar html = this.$editor.html().replace(replaced, '</blockquote>' + data + '<blockquote>');\n\n\t\t\t\t\t\t\tthis.$editor.html(html);\n\t\t\t\t\t\t\tthis.$editor.find('blockquote').each(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif ($.trim($(this).html()) == '') $(this).remove();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar block = this.getBlock();\n\t\t\t\tif (block.tagName === 'BLOCKQUOTE')\n\t\t\t\t{\n\t\t\t\t\tthis.selectionSave();\n\n\t\t\t\t\tvar html = $.trim($(block).html());\n\t\t\t\t\tvar selection = $.trim(this.getSelectionHtml());\n\n\t\t\t\t\thtml = html.replace(/<span(.*?)id=\"selection-marker(.*?)<\\/span>/gi, '');\n\n\t\t\t\t\tif (html == selection)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(block).replaceWith($(block).html() + '<br>');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t\tthis.inlineFormat('tmp');\n\t\t\t\t\t\tvar tmp = this.$editor.find('tmp');\n\t\t\t\t\t\ttmp.empty();\n\n\t\t\t\t\t\tvar newhtml = this.$editor.html().replace('<tmp></tmp>', '</blockquote><span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>' + selection + '<blockquote>');\n\n\t\t\t\t\t\tthis.$editor.html(newhtml);\n\t\t\t\t\t\ttmp.remove();\n\t\t\t\t\t\tthis.$editor.find('blockquote').each(function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif ($.trim($(this).html()) == '') $(this).remove();\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectionRestore();\n\t\t\t\t\tthis.$editor.find('span#selection-marker-1').attr('id', false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar wrapper = this.selectionWrap('blockquote');\n\t\t\t\t\tvar html = $(wrapper).html();\n\n\t\t\t\t\tvar blocksElemsRemove = ['ul', 'ol', 'table', 'tr', 'tbody', 'thead', 'tfoot', 'dl'];\n\t\t\t\t\t$.each(blocksElemsRemove, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '');\n\t\t\t\t\t});\n\n\t\t\t\t\tvar blocksElems = this.opts.blockLevelElements;\n\t\t\t\t\t$.each(blocksElems, function(i,s)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '<br>');\n\t\t\t\t\t});\n\n\t\t\t\t\t$(wrapper).html(html);\n\t\t\t\t\tthis.selectionElement(wrapper);\n\t\t\t\t\tvar next = $(wrapper).next();\n\t\t\t\t\tif (next.length != 0 && next[0].tagName === 'BR')\n\t\t\t\t\t{\n\t\t\t\t\t\tnext.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveAttr: function(attr, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).removeAttr(attr);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetAttr: function(attr, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).attr(attr, value);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveStyle: function(rule)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).css(rule, '');\n\t\t\tthis.removeEmptyAttr(nodes, 'style');\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetStyle: function (rule, value)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).css(rule, value);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockRemoveClass: function(className)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).removeClass(className);\n\t\t\tthis.removeEmptyAttr(nodes, 'class');\n\n\t\t\tthis.sync();\n\t\t},\n\t\tblockSetClass: function(className)\n\t\t{\n\t\t\tvar nodes = this.getBlocks();\n\t\t\t$(nodes).addClass(className);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveClass: function(className)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.inlineEachNodes(function(node)\n\t\t\t{\n\t\t\t\t$(node).removeClass(className);\n\t\t\t\tthis.removeEmptyAttr(node, 'class');\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetClass: function(className)\n\t\t{\n\t\t\tvar current = this.getCurrent();\n\t\t\tif (!$(current).hasClass(className)) this.inlineMethods('addClass', className);\n\t\t},\n\t\tinlineRemoveStyle: function (rule)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.inlineEachNodes(function(node)\n\t\t\t{\n\t\t\t\t$(node).css(rule, '');\n\t\t\t\tthis.removeEmptyAttr(node, 'style');\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetStyle: function(rule, value)\n\t\t{\n\t\t\tthis.inlineMethods('css', rule, value);\n\t\t},\n\t\tinlineRemoveAttr: function (attr)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar range = this.getRange(), node = this.getElement(), nodes = this.getNodes();\n\n\t\t\tif (range.collapsed || range.startContainer === range.endContainer && node)\n\t\t\t{\n\t\t\t\tnodes = $( node );\n\t\t\t}\n\n\t\t\t$(nodes).removeAttr(attr);\n\n\t\t\tthis.inlineUnwrapSpan();\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetAttr: function(attr, value)\n\t\t{\n\t\t\tthis.inlineMethods('attr', attr, value );\n\t\t},\n\t\tinlineMethods: function(type, attr, value)\n\t\t{\n\t\t\tthis.bufferSet();\n\t\t\tthis.selectionSave();\n\n\t\t\tvar range = this.getRange()\n\t\t\tvar el = this.getElement();\n\n\t\t\tif ((range.collapsed || range.startContainer === range.endContainer) && el && !this.nodeTestBlocks(el))\n\t\t\t{\n\t\t\t\t$(el)[type](attr, value);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar cmd, arg = value;\n\t\t\t\tswitch (attr)\n\t\t\t\t{\n\t\t\t\t\tcase 'font-size':\n\t\t\t\t\t\tcmd = 'fontSize';\n\t\t\t\t\t\targ = 4;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'font-family':\n\t\t\t\t\t\tcmd = 'fontName';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'color':\n\t\t\t\t\t\tcmd = 'foreColor';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'background-color':\n\t\t\t\t\t\tcmd = 'backColor';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis.document.execCommand(cmd, false, arg);\n\n\t\t\t\tvar fonts = this.$editor.find('font');\n\t\t\t\t$.each(fonts, $.proxy(function(i, s)\n\t\t\t\t{\n\t\t\t\t\tthis.inlineSetMethods(type, s, attr, value);\n\n\t\t\t\t}, this));\n\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineSetMethods: function(type, s, attr, value)\n\t\t{\n\t\t\tvar parent = $(s).parent(), el;\n\n\t\t\tvar selectionHtml = this.getSelectionText();\n\t\t\tvar parentHtml = $(parent).text();\n\t\t\tvar selected = selectionHtml == parentHtml;\n\n\t\t\tif (selected && parent && parent[0].tagName === 'INLINE' && parent[0].attributes.length != 0)\n\t\t\t{\n\t\t\t\tel = parent;\n\t\t\t\t$(s).replaceWith($(s).html());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tel = $('<inline>').append($(s).contents());\n\t\t\t\t$(s).replaceWith(el);\n\t\t\t}\n\t\t\t$(el)[type](attr, value);\n\n\t\t\treturn el;\n\t\t},\n\n\t\tinlineEachNodes: function(callback)\n\t\t{\n\t\t\tvar range = this.getRange(),\n\t\t\t\tnode = this.getElement(),\n\t\t\t\tnodes = this.getNodes(),\n\t\t\t\tcollapsed;\n\n\t\t\tif (range.collapsed || range.startContainer === range.endContainer && node)\n\t\t\t{\n\t\t\t\tnodes = $(node);\n\t\t\t\tcollapsed = true;\n\t\t\t}\n\n\t\t\t$.each(nodes, $.proxy(function(i, node)\n\t\t\t{\n\t\t\t\tif (!collapsed && node.tagName !== 'INLINE')\n\t\t\t\t{\n\t\t\t\t\tvar selectionHtml = this.getSelectionText();\n\t\t\t\t\tvar parentHtml = $(node).parent().text();\n\t\t\t\t\tvar selected = selectionHtml == parentHtml;\n\n\t\t\t\t\tif (selected && node.parentNode.tagName === 'INLINE' && !$(node.parentNode).hasClass('redactor_editor'))\n\t\t\t\t\t{\n\t\t\t\t\t\tnode = node.parentNode;\n\t\t\t\t\t}\n\t\t\t\t\telse return;\n\t\t\t\t}\n\t\t\t\tcallback.call(this, node);\n\n\t\t\t}, this ) );\n\t\t},\n\t\tinlineUnwrapSpan: function()\n\t\t{\n\t\t\tvar $spans = this.$editor.find('inline');\n\n\t\t\t$.each($spans, $.proxy(function(i, span)\n\t\t\t{\n\t\t\t\tvar $span = $(span);\n\n\t\t\t\tif ($span.attr('class') === undefined && $span.attr('style') === undefined)\n\t\t\t\t{\n\t\t\t\t\t$span.contents().unwrap();\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t},\n\t\tinlineFormat: function(tag)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.document.execCommand('fontSize', false, 4 );\n\n\t\t\tvar fonts = this.$editor.find('font');\n\t\t\tvar last;\n\t\t\t$.each(fonts, function(i, s)\n\t\t\t{\n\t\t\t\tvar el = $('<' + tag + '/>').append($(s).contents());\n\t\t\t\t$(s).replaceWith(el);\n\t\t\t\tlast = el;\n\t\t\t});\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveFormat: function(tag)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar utag = tag.toUpperCase();\n\t\t\tvar nodes = this.getNodes();\n\t\t\tvar parent = $(this.getParent()).parent();\n\n\t\t\t$.each(nodes, function(i, s)\n\t\t\t{\n\t\t\t\tif (s.tagName === utag) this.inlineRemoveFormatReplace(s);\n\t\t\t});\n\n\t\t\tif (parent && parent[0].tagName === utag) this.inlineRemoveFormatReplace(parent);\n\n\t\t\tthis.selectionRestore();\n\t\t\tthis.sync();\n\t\t},\n\t\tinlineRemoveFormatReplace: function(el)\n\t\t{\n\t\t\t$(el).replaceWith($(el).contents());\n\t\t},\n\n\t\tinsertHtml: function (html, sync)\n\t\t{\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar parent = current.parentNode;\n\n\t\t\tthis.focusWithSaveScroll();\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $html = $('<div>').append($.parseHTML(html));\n\t\t\thtml = $html.html();\n\n\t\t\thtml = this.cleanRemoveEmptyTags(html);\n\t\t\t$html = $('<div>').append($.parseHTML(html));\n\t\t\tvar currBlock = this.getBlock();\n\n\t\t\tif ($html.contents().length == 1)\n\t\t\t{\n\t\t\t\tvar htmlTagName = $html.contents()[0].tagName;\n\t\t\t\tif (htmlTagName != 'P' && htmlTagName == currBlock.tagName || htmlTagName == 'CODE')\n\t\t\t\t{\n\n\t\t\t\t\t$html = $('<div>').append(html);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\t\t\tif (!this.opts.linebreaks && $html.contents().length == 1 && $html.contents()[0].nodeType == 3\n\t\t\t\t&& (this.getRangeSelectedNodes().length > 2 || (!current || current.tagName == 'BODY' && !parent || parent.tagName == 'HTML')))\n\t\t\t{\n\t\t\t\thtml = '<p>' + html + '</p>';\n\t\t\t}\n\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tif ($html.contents().length > 1 && currBlock\n\t\t\t|| $html.contents().is('p, :header, ul, ol, li, div, table, td, blockquote, code, address, section, header, footer, aside, article'))\n\t\t\t{\n\t\t\t\tif (this.browser('msie'))\n\t\t\t\t{\n\t\t\t\t\tif (!this.isIe11())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.document.selection.createRange().pasteHTML(html);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.execPasteFrag(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.document.execCommand('inserthtml', false, html);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse this.insertHtmlAdvanced(html, false);\n\n\t\t\tif (this.selectall)\n\t\t\t{\n\t\t\t\tthis.window.setTimeout($.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tif (!this.opts.linebreaks) this.selectionEnd(this.$editor.contents().last());\n\t\t\t\t\telse this.focusEnd();\n\n\t\t\t\t}, this), 1);\n\t\t\t}\n\n\t\t\tthis.observeStart();\n\t\t\tthis.setNonEditable();\n\n\t\t\tif (sync !== false) this.sync();\n\t\t},\n\t\tinsertHtmlAdvanced: function(html, sync)\n\t\t{\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tvar sel = this.getSelection();\n\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar range = sel.getRangeAt(0);\n\t\t\t\trange.deleteContents();\n\n\t\t\t\tvar el = document.createElement('div');\n\t\t\t\tel.innerHTML = html;\n\t\t\t\tvar frag = document.createDocumentFragment(), node, lastNode;\n\t\t\t\twhile ((node = el.firstChild))\n\t\t\t\t{\n\t\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t\t}\n\n\t\t\t\trange.insertNode(frag);\n\n\t\t\t\tif (lastNode)\n\t\t\t\t{\n\t\t\t\t\trange = range.cloneRange();\n\t\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\tsel.addRange(range);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (sync !== false)\n\t\t\t{\n\t\t\t\tthis.sync();\n\t\t\t}\n\n\t\t},\n\t\tinsertBeforeCursor: function(html)\n\t\t{\n\t\t\thtml = this.setSpansVerifiedHtml(html);\n\n\t\t\tvar node = $(html);\n\n\t\t\tvar space = document.createElement(\"span\");\n\t\t\tspace.innerHTML = \"\\u200B\";\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.insertNode(space);\n\t\t\trange.insertNode(node[0]);\n\t\t\trange.collapse(false);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinsertText: function(html)\n\t\t{\n\t\t\tvar $html = $($.parseHTML(html));\n\n\t\t\tif ($html.length) html = $html.text();\n\n\t\t\tthis.focusWithSaveScroll();\n\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tif (!this.isIe11())\n\t\t\t\t{\n\t\t\t\t\tthis.document.selection.createRange().pasteHTML(html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.execPasteFrag(html);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.document.execCommand('inserthtml', false, html);\n\t\t\t}\n\n\t\t\tthis.sync();\n\t\t},\n\t\tinsertNode: function(node)\n\t\t{\n\t\t\tnode = node[0] || node;\n\n\t\t\tif (node.tagName == 'SPAN')\n\t\t\t{\n\t\t\t\tvar replacementTag = 'inline';\n\n\t\t\t    var outer = node.outerHTML;\n\t\t\t    var regex = new RegExp('<' + node.tagName, 'i');\n\t\t\t    var newTag = outer.replace(regex, '<' + replacementTag);\n\t\t\t    regex = new RegExp('</' + node.tagName, 'i');\n\t\t\t    newTag = newTag.replace(regex, '</' + replacementTag);\n\t\t\t    node = $(newTag)[0];\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount)\n\t\t\t{\n\n\t\t\t\trange = sel.getRangeAt(0);\n\t\t\t\trange.deleteContents();\n\t\t\t\trange.insertNode(node);\n\t\t\t\trange.setEndAfter(node);\n\t\t\t\trange.setStartAfter(node);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t},\n\t\tinsertNodeToCaretPositionFromPoint: function(e, node)\n\t\t{\n\t\t\tvar range;\n\t\t\tvar x = e.clientX, y = e.clientY;\n\t\t\tif (this.document.caretPositionFromPoint)\n\t\t\t{\n\t\t\t    var pos = this.document.caretPositionFromPoint(x, y);\n\t\t\t    range = this.getRange();\n\t\t\t    range.setStart(pos.offsetNode, pos.offset);\n\t\t\t    range.collapse(true);\n\t\t\t    range.insertNode(node);\n\t\t\t}\n\t\t\telse if (this.document.caretRangeFromPoint)\n\t\t\t{\n\t\t\t    range = this.document.caretRangeFromPoint(x, y);\n\t\t\t    range.insertNode(node);\n\t\t\t}\n\t\t\telse if (typeof document.body.createTextRange != \"undefined\")\n\t\t\t{\n\t\t        range = this.document.body.createTextRange();\n\t\t        range.moveToPoint(x, y);\n\t\t        var endRange = range.duplicate();\n\t\t        endRange.moveToPoint(x, y);\n\t\t        range.setEndPoint(\"EndToEnd\", endRange);\n\t\t        range.select();\n\t\t\t}\n\n\t\t},\n\t\tinsertAfterLastElement: function(element, parent)\n\t\t{\n\t\t\tif (typeof(parent) != 'undefined') element = parent;\n\n\t\t\tif (this.isEndOfElement())\n\t\t\t{\n\t\t\t\tif (this.opts.linebreaks)\n\t\t\t\t{\n\t\t\t\t\tvar contents = $('<div>').append($.trim(this.$editor.html())).contents();\n\t\t\t\t\tvar last = contents.last()[0];\n\t\t\t\t\tif (last.tagName == 'SPAN' && last.innerHTML == '')\n\t\t\t\t\t{\n\t\t\t\t\t\tlast = contents.prev()[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.outerHtml(last) != this.outerHtml(element))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.$editor.contents().last()[0] !== element)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.insertingAfterLastElement(element);\n\t\t\t}\n\t\t},\n\t\tinsertingAfterLastElement: function(element)\n\t\t{\n\t\t\tthis.bufferSet();\n\n\t\t\tif (this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tvar node = $(this.opts.emptyHtml);\n\t\t\t\t$(element).after(node);\n\t\t\t\tthis.selectionStart(node);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar node = $('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\t\t$(element).after(node);\n\t\t\t\t$(node).after(this.opts.invisibleSpace);\n\t\t\t\tthis.selectionRestore();\n\t\t\t\tthis.$editor.find('span#selection-marker-1').removeAttr('id');\n\t\t\t}\n\t\t},\n\t\tinsertLineBreak: function(twice)\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar br = '<br>';\n\t\t\tif (twice == true)\n\t\t\t{\n\t\t\t\tbr = '<br><br>';\n\t\t\t}\n\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tvar span = $('<span>').html(this.opts.invisibleSpace);\n\t\t\t\tthis.$editor.find('#selection-marker-1').before(br).before(span).before(this.opts.invisibleSpace);\n\n\t\t\t\tthis.setCaretAfter(span[0]);\n\t\t\t\tspan.remove();\n\n\t\t\t\tthis.selectionRemoveMarkers();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar parent = this.getParent();\n\t\t\t\tif (parent && parent.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\tvar offset = this.getCaretOffset(parent);\n\n\t\t\t\t\tvar text = $.trim($(parent).text()).replace(/\\n\\r\\n/g, '');\n\t\t\t\t\tvar len = text.length;\n\n\t\t\t\t\tif (offset == len)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.selectionRemoveMarkers();\n\n\t\t\t\t\t\tvar node = $('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\t\t\t\t$(parent).after(node);\n\t\t\t\t\t\t$(node).before(br + (this.browser('webkit') ? this.opts.invisibleSpace : ''));\n\t\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.$editor.find('#selection-marker-1').before(br + (this.browser('webkit') ? this.opts.invisibleSpace : ''));\n\t\t\t\tthis.selectionRestore();\n\t\t\t}\n\t\t},\n\t\tinsertDoubleLineBreak: function()\n\t\t{\n\t\t\tthis.insertLineBreak(true);\n\t\t},\n\t\treplaceLineBreak: function(element)\n\t\t{\n\t\t\tvar node = $('<br>' + this.opts.invisibleSpace);\n\t\t\t$(element).replaceWith(node);\n\t\t\tthis.selectionStart(node);\n\t\t},\n\t\tpasteClean: function(html)\n\t\t{\n\t\t\thtml = this.callback('pasteBefore', false, html);\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\tvar tmp = $.trim(html);\n\t\t\t\tif (tmp.search(/^<a(.*?)>(.*?)<\\/a>$/i) == 0)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/^<a(.*?)>(.*?)<\\/a>$/i, \"$2\");\n\t\t\t\t}\n\t\t\t}\n            html = html.replace(/on([a-z]+)=|javascript\\:/gi, '');\n\t\t\tif (this.opts.pastePlainText)\n\t\t\t{\n\t\t\t\tvar tmp = this.document.createElement('div');\n\n\t\t\t\thtml = html.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi, '\\n');\n\n\t\t\t\ttmp.innerHTML = html;\n\t\t\t\thtml = tmp.textContent || tmp.innerText;\n\n\t\t\t\thtml = $.trim(html);\n\t\t\t\thtml = html.replace('\\n', '<br>');\n\t\t\t\thtml = this.cleanParagraphy(html);\n\n\t\t\t\tthis.pasteInsert(html);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar tablePaste = false;\n\t\t\tif (this.currentOrParentIs('TD'))\n\t\t\t{\n\t\t\t\ttablePaste = true;\n\t\t\t\tvar blocksElems = this.opts.blockLevelElements;\n\t\t\t\tblocksElems.push('tr');\n\t\t\t\tblocksElems.push('table');\n\t\t\t\t$.each(blocksElems, function(i,s)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');\n\t\t\t\t\thtml = html.replace(new RegExp('</' + s + '>', 'gi'), '<br>');\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.currentOrParentIs('CODE'))\n\t\t\t{\n\t\t\t\thtml = this.pastePre(html);\n\t\t\t\tthis.pasteInsert(html);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\thtml = html.replace(/<img(.*?)v:shapes=(.*?)>/gi, '');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpFirst\"([\\w\\W]*?)<\\/p>/gi, '<ul><li$2</li>');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpMiddle\"([\\w\\W]*?)<\\/p>/gi, '<li$2</li>');\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraphCxSpLast\"([\\w\\W]*?)<\\/p>/gi, '<li$2</li></ul>');\n\n\t\t\thtml = html.replace(/<p(.*?)class=\"MsoListParagraph\"([\\w\\W]*?)<\\/p>/gi, '<ul><li$2</li></ul>');\n\n\t\t\thtml = html.replace(/\u00b7/g, '');\n\t\t\thtml = html.replace(/<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi, '');\n\t\t\tif (this.opts.cleanSpaces === true)\n\t\t\t{\n\t\t\t\thtml = html.replace(/(&nbsp;){2,}/gi, '&nbsp;');\n\t\t\t\thtml = html.replace(/&nbsp;/gi, ' ');\n\t\t\t}\n\t\t\thtml = html.replace(/<b\\sid=\"internal-source-marker(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$2\");\n\t\t\thtml = html.replace(/<b(.*?)id=\"docs-internal-guid(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$3\");\n\t \t\thtml = html.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi, '<span style=\"font-weight: bold;\"><span style=\"font-style: italic;\">');\n\t \t\thtml = html.replace(/<span[^>]*font-style: italic[^>]*>/gi, '<span style=\"font-style: italic;\">');\n\t\t\thtml = html.replace(/<span[^>]*font-weight: bold[^>]*>/gi, '<span style=\"font-weight: bold;\">');\n\t\t\thtml = html.replace(/<span[^>]*text-decoration: underline[^>]*>/gi, '<span style=\"text-decoration: underline;\">');\n\t\t\thtml = html.replace(/<td>\\u200b*<\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td>&nbsp;<\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td><br><\\/td>/gi, '[td]');\n\t\t\thtml = html.replace(/<td(.*?)colspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi, '[td colspan=\"$2\"]$4[/td]');\n\t\t\thtml = html.replace(/<td(.*?)rowspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi, '[td rowspan=\"$2\"]$4[/td]');\n\t\t\thtml = html.replace(/<a(.*?)href=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/a>/gi, '[a href=\"$2\"]$4[/a]');\n\t\t\thtml = html.replace(/<iframe(.*?)>([\\w\\W]*?)<\\/iframe>/gi, '[iframe$1]$2[/iframe]');\n\t\t\thtml = html.replace(/<video(.*?)>([\\w\\W]*?)<\\/video>/gi, '[video$1]$2[/video]');\n\t\t\thtml = html.replace(/<audio(.*?)>([\\w\\W]*?)<\\/audio>/gi, '[audio$1]$2[/audio]');\n\t\t\thtml = html.replace(/<embed(.*?)>([\\w\\W]*?)<\\/embed>/gi, '[embed$1]$2[/embed]');\n\t\t\thtml = html.replace(/<object(.*?)>([\\w\\W]*?)<\\/object>/gi, '[object$1]$2[/object]');\n\t\t\thtml = html.replace(/<param(.*?)>/gi, '[param$1]');\n\n\t\t\thtml = html.replace(/<img(.*?)>/gi, '[img$1]');\n\t\t\thtml = html.replace(/ class=\"(.*?)\"/gi, '');\n\t\t\thtml = html.replace(/<(\\w+)([\\w\\W]*?)>/gi, '<$1>');\n\t\t\tif (this.opts.linebreaks)\n\t\t\t{\n\n\t\t\t\thtml = html.replace(/<strong><\\/strong>/gi, '');\n\t\t\t\thtml = html.replace(/<u><\\/u>/gi, '');\n\n\t\t\t\tif (this.opts.cleanFontTag)\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi, '$2');\n\t\t\t\t}\n\n\t\t\t\thtml = html.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi, '<br>');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi, '');\n\t\t\t}\n\n\t\t\thtml = html.replace(/<div>\\s*?\\t*?\\n*?(<ul>|<ol>|<p>)/gi, '$1');\n\t\t\thtml = html.replace(/\\[td colspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi, '<td colspan=\"$1\">$2</td>');\n\t\t\thtml = html.replace(/\\[td rowspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi, '<td rowspan=\"$1\">$2</td>');\n\t\t\thtml = html.replace(/\\[td\\]/gi, '<td>&nbsp;</td>');\n\t\t\thtml = html.replace(/\\[a href=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/a\\]/gi, '<a href=\"$1\">$2</a>');\n\t\t\thtml = html.replace(/\\[iframe(.*?)\\]([\\w\\W]*?)\\[\\/iframe\\]/gi, '<iframe$1>$2</iframe>');\n\t\t\thtml = html.replace(/\\[video(.*?)\\]([\\w\\W]*?)\\[\\/video\\]/gi, '<video$1>$2</video>');\n\t\t\thtml = html.replace(/\\[audio(.*?)\\]([\\w\\W]*?)\\[\\/audio\\]/gi, '<audio$1>$2</audio>');\n\t\t\thtml = html.replace(/\\[embed(.*?)\\]([\\w\\W]*?)\\[\\/embed\\]/gi, '<embed$1>$2</embed>');\n\t\t\thtml = html.replace(/\\[object(.*?)\\]([\\w\\W]*?)\\[\\/object\\]/gi, '<object$1>$2</object>');\n\t\t\thtml = html.replace(/\\[param(.*?)\\]/gi, '<param$1>');\n\t\t\thtml = html.replace(/\\[img(.*?)\\]/gi, '<img$1>');\n\t\t\tif (this.opts.convertDivs)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '<p>$2</p>');\n\t\t\t\thtml = html.replace(/<\\/div><p>/gi, '<p>');\n\t\t\t\thtml = html.replace(/<\\/p><\\/div>/gi, '</p>');\n\t\t\t\thtml = html.replace(/<p><\\/p>/gi, '<br />');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div><\\/div>/gi, '<br />');\n\t\t\t}\n\t\t\thtml = this.cleanStripTags(html);\n\n\t\t\tif (this.currentOrParentIs('LI'))\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p>([\\w\\W]*?)<\\/p>/gi, '$1<br>');\n\t\t\t}\n\t\t\telse if (tablePaste === false)\n\t\t\t{\n\t\t\t\thtml = this.cleanParagraphy(html);\n\t\t\t}\n\t\t\thtml = html.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi, '$2');\n\t\t\thtml = html.replace(/<img>/gi, '');\n\t\t\thtml = html.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi, '');\n\n\t\t\thtml = html.replace(/\\n{3,}/gi, '\\n');\n\t\t\thtml = html.replace(/<p><p>/gi, '<p>');\n\t\t\thtml = html.replace(/<\\/p><\\/p>/gi, '</p>');\n\n\t\t\thtml = html.replace(/<li>(\\s*|\\t*|\\n*)<p>/gi, '<li>');\n\t\t\thtml = html.replace(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi, '</li>');\n\n\t\t\tif (this.opts.linebreaks === true)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi, '$2<br>');\n\t\t\t}\n\t\t\thtml = html.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi, '');\n\t\t\thtml = html.replace(/<img src=\"webkit-fake-url\\:\\/\\/(.*?)\"(.*?)>/gi, '');\n\t\t\thtml = html.replace(/<td(.*?)>(\\s*|\\t*|\\n*)<p>([\\w\\W]*?)<\\/p>(\\s*|\\t*|\\n*)<\\/td>/gi, '<td$1>$3</td>');\n\t\t\tif (this.opts.convertDivs)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '$2');\n\t\t\t\thtml = html.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi, '$2');\n\t\t\t}\n\t\t\tthis.pasteClipboardMozilla = false;\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\tif (this.opts.clipboardUpload)\n\t\t\t\t{\n\t\t\t\t\tvar matches = html.match(/<img src=\"data:image(.*?)\"(.*?)>/gi);\n\t\t\t\t\tif (matches !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pasteClipboardMozilla = matches;\n\t\t\t\t\t\tfor (var k in matches)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar img = matches[k].replace('<img', '<img data-mozilla-paste-image=\"' + k + '\" ');\n\t\t\t\t\t\t\thtml = html.replace(matches[k], img);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (/<br>$/gi.test(html))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<br>$/gi, '');\n\t\t\t\t}\n\t\t\t}\n\t\t\thtml = html.replace(/<p>\u2022([\\w\\W]*?)<\\/p>/gi, '<li>$1</li>');\n\t\t\tif (this.browser('msie'))\n\t\t\t{\n\t\t\t\twhile (/<font>([\\w\\W]*?)<\\/font>/gi.test(html))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(/<font>([\\w\\W]*?)<\\/font>/gi, '$1');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (tablePaste === false)\n\t\t\t{\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$4</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$3</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$4</td>');\n\t\t\t\thtml = html.replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi, '<td$1>$2$3</td>');\n\t\t\t}\n\t\t\thtml = html.replace(/\\n/g, ' ');\n\t\t\thtml = html.replace(/<p>\\n?<li>/gi, '<li>');\n\n\t\t\tthis.pasteInsert(html);\n\n\t\t},\n\t\tpastePre: function(s)\n\t\t{\n\t\t\ts = s.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi, '\\n');\n\n\t\t\tvar tmp = this.document.createElement('div');\n\t\t\ttmp.innerHTML = s;\n\t\t\treturn this.cleanEncodeEntities(tmp.textContent || tmp.innerText);\n\t\t},\n\t\tpasteInsert: function(html)\n\t\t{\n\t\t\thtml = this.callback('pasteAfter', false, html);\n\n\t\t\tif (this.selectall)\n\t\t\t{\n\t\t\t\tthis.$editor.html(html);\n\t\t\t\tthis.selectionRemove();\n\t\t\t\tthis.focusEnd();\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.insertHtml(html);\n\t\t\t}\n\n\t\t\tthis.selectall = false;\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tthis.rtePaste = false;\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.find('p:empty').remove();\n\t\t\t\t}\n\t\t\t\tif (this.pasteClipboardMozilla !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.pasteClipboardUploadMozilla();\n\t\t\t\t}\n\n\t\t\t}, this), 100);\n\n\t\t\tif (this.opts.autoresize && this.fullscreen !== true)\n\t\t\t{\n\t\t\t\t$(this.document.body).scrollTop(this.saveScroll);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$editor.scrollTop(this.saveScroll);\n\t\t\t}\n\t\t},\n\t\tpasteClipboardAppendFields: function(postData)\n\t\t{\n\n\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t{\n\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t{\n\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\t\t\t\t\tpostData[k] = v;\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\treturn postData;\n\t\t},\n\t\tpasteClipboardUploadMozilla: function()\n\t\t{\n\t\t\tvar imgs = this.$editor.find('img[data-mozilla-paste-image]');\n\t\t\t$.each(imgs, $.proxy(function(i,s)\n\t\t\t{\n\t\t\t\tvar $s = $(s);\n\t\t\t\tvar arr = s.src.split(\",\");\n\t\t\t\tvar postData = {\n\t\t\t\t\t'contentType': arr[0].split(\";\")[0].split(\":\")[1],\n\t\t\t\t\t'data': arr[1]\n\t\t\t\t};\n\t\t\t\tpostData = this.pasteClipboardAppendFields(postData);\n\n\t\t\t\t$.post(this.opts.clipboardUploadUrl, postData,\n\t\t\t\t$.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\t\t        \t$s.attr('src', json.image.url);\n\t\t        \t$s.removeAttr('data-mozilla-paste-image');\n\n\t\t        \tthis.sync();\n\t\t\t\t\tthis.callback('imageUpload', $s, json);\n\n\t\t\t\t}, this));\n\n\t\t\t}, this));\n\t\t},\n\t\tpasteClipboardUpload: function(e)\n\t\t{\n\t        var result = e.target.result;\n\t\t\tvar arr = result.split(\",\");\n\t\t\tvar postData = {\n\t\t\t\t'contentType': arr[0].split(\";\")[0].split(\":\")[1],\n\t\t\t\t'data': arr[1]\n\t\t\t};\n\t\t\tif (this.opts.clipboardUpload)\n\t\t\t{\n\n\t\t\t\tpostData = this.pasteClipboardAppendFields(postData);\n\n\t\t\t\t$.post(this.opts.clipboardUploadUrl, postData,\n\t\t\t\t$.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\n\t\t\t\t\tvar html = '<img src=\"' + json.image.url + '\" id=\"clipboard-image-marker\" />';\n\t\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\t\tvar image = $(this.$editor.find('img#clipboard-image-marker'));\n\n\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\telse image = false;\n\n\t\t\t\t\tthis.sync();\n\t\t\t\t\tif (image)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.callback('imageUpload', image, json);\n\t\t\t\t\t}\n\t\t\t\t}, this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t        \tthis.insertHtml('<img src=\"' + result + '\" />');\n        \t}\n\t\t},\n\t\tbufferSet: function(selectionSave)\n\t\t{\n\t\t\tif (selectionSave !== false)\n\t\t\t{\n\t\t\t\tthis.selectionSave();\n\t\t\t}\n\n\t\t\tthis.opts.buffer.push(this.$editor.html());\n\n\t\t\tif (selectionSave !== false)\n\t\t\t{\n\t\t\t\tthis.selectionRemoveMarkers('buffer');\n\t\t\t}\n\n\t\t},\n\t\tbufferUndo: function()\n\t\t{\n\t\t\tif (this.opts.buffer.length === 0)\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.selectionSave();\n\t\t\tthis.opts.rebuffer.push(this.$editor.html());\n\t\t\tthis.selectionRestore(false, true);\n\n\t\t\tthis.$editor.html(this.opts.buffer.pop());\n\n\t\t\tthis.selectionRestore();\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 100);\n\t\t},\n\t\tbufferRedo: function()\n\t\t{\n\t\t\tif (this.opts.rebuffer.length === 0)\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.selectionSave();\n\t\t\tthis.opts.buffer.push(this.$editor.html());\n\t\t\tthis.selectionRestore(false, true);\n\n\t\t\tthis.$editor.html(this.opts.rebuffer.pop());\n\t\t\tthis.selectionRestore(true);\n\t\t\tsetTimeout($.proxy(this.observeStart, this), 4);\n\t\t},\n\t\tobserveStart: function()\n\t\t{\n\t\t\tthis.observeImages();\n\n\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\t\t},\n\t\tobserveLinks: function()\n\t\t{\n\t\t\tthis.$editor.find('a').on('click', $.proxy(this.linkObserver, this));\n\n\t\t\tthis.$editor.on('click.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(e);\n\n\t\t\t}, this));\n\n\t\t\t$(document).on('click.redactor', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(e);\n\n\t\t\t}, this));\n\t\t},\n\t\tobserveImages: function()\n\t\t{\n\t\t\tif (this.opts.observeImages === false) return false;\n\n\t\t\tthis.$editor.find('img').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tif (this.browser('msie')) $(elem).attr('unselectable', 'on');\n\n\t\t\t\tvar parent = $(elem).parent();\n\t\t\t\tif (!parent.hasClass('royalSlider') && !parent.hasClass('fotorama'))\n\t\t\t\t{\n\t\t\t\t\tthis.imageResize(elem);\n\t\t\t\t}\n\n\t\t\t}, this));\n\t\t\tthis.$editor.find('.fotorama, .royalSlider').on('click', $.proxy(this.editGallery, this));\n\n\t\t},\n\t\tlinkObserver: function(e)\n\t\t{\n\t\t\tvar $link = $(e.target);\n\n\t\t\tvar parent = $(e.target).parent();\n\t\t\tif (parent.hasClass('royalSlider') || parent.hasClass('fotorama'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ($link.length == 0 || $link[0].tagName !== 'A') return;\n\n\t\t\tvar pos = $link.offset();\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\tvar posFrame = this.$frame.offset();\n\t\t\t\tpos.top = posFrame.top + (pos.top - $(this.document).scrollTop());\n\t\t\t\tpos.left += posFrame.left;\n\t\t\t}\n\n\t\t\tvar tooltip = $('<span class=\"redactor-link-tooltip\"></span>');\n\n\t\t\tvar href = $link.attr('href');\n\t\t\tif (href === undefined)\n\t\t\t{\n\t\t\t\thref = '';\n\t\t\t}\n\n\t\t\tif (href.length > 24) href = href.substring(0, 24) + '...';\n\n\t\t\tvar aLink = $('<a href=\"' + $link.attr('href') + '\" target=\"_blank\">' + href + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\t\t\t}, this));\n\n\t\t\tvar aEdit = $('<a href=\"#\">' + this.opts.curLang.edit + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.linkShow();\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\n\t\t\t}, this));\n\n\t\t\tvar aUnlink = $('<a href=\"#\">' + this.opts.curLang.unlink + '</a>').on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.execCommand('unlink');\n\t\t\t\tthis.linkObserverTooltipClose(false);\n\n\t\t\t}, this));\n\t\t\ttooltip.append(aLink);\n\t\t\ttooltip.append(' | ');\n\t\t\ttooltip.append(aEdit);\n\t\t\ttooltip.append(' | ');\n\t\t\ttooltip.append(aUnlink);\n\t\t\ttooltip.css({\n\t\t\t\ttop: (pos.top + 20) + 'px',\n\t\t\t\tleft: pos.left + 'px'\n\t\t\t});\n\n\t\t\t$('.redactor-link-tooltip').remove();\n\t\t\t$('body').append(tooltip);\n\t\t},\n\t\tlinkObserverTooltipClose: function(e)\n\t\t{\n\t\t\tif (e !== false && e.target.tagName == 'A') return false;\n\t\t\t$('.redactor-link-tooltip').remove();\n\t\t},\n\t\tgetSelection: function()\n\t\t{\n\t\t\tif (!this.opts.rangy) return this.document.getSelection();\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.iframe) return rangy.getSelection();\n\t\t\t\telse return rangy.getSelection(this.$frame[0]);\n\t\t\t}\n\t\t},\n\t\tgetRange: function()\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tif (this.document.getSelection)\n\t\t\t\t{\n\t\t\t\t\tvar sel = this.getSelection();\n\t\t\t\t\tif (sel.getRangeAt && sel.rangeCount) return sel.getRangeAt(0);\n\t\t\t\t}\n\n\t\t\t\treturn this.document.createRange();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.opts.iframe) return rangy.createRange();\n\t\t\t\telse return rangy.createRange(this.iframeDoc());\n\t\t\t}\n\t\t},\n\t\tselectionElement: function(node)\n\t\t{\n\t\t\tthis.setCaret(node);\n\t\t},\n\t\tselectionStart: function(node)\n\t\t{\n\t\t\tthis.selectionSet(node[0] || node, 0, null, 0);\n\t\t},\n\t\tselectionEnd: function(node)\n\t\t{\n\t\t\tthis.selectionSet(node[0] || node, 1, null, 1);\n\t\t},\n\t\tselectionSet: function(orgn, orgo, focn, foco)\n\t\t{\n\t\t\tif (focn == null) focn = orgn;\n\t\t\tif (foco == null) foco = orgo;\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (!sel) return;\n\n\t\t\tif (orgn.tagName == 'P' && orgn.innerHTML == '')\n\t\t\t{\n\t\t\t\torgn.innerHTML = this.opts.invisibleSpace;\n\t\t\t}\n\n\t\t\tif (orgn.tagName == 'BR' && this.opts.linebreaks === false)\n\t\t\t{\n\t\t\t\tvar par = $(this.opts.emptyHtml)[0];\n\t\t\t\t$(orgn).replaceWith(par);\n\t\t\t\torgn = par;\n\t\t\t\tfocn = orgn;\n\t\t\t}\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.setStart(orgn, orgo);\n\t\t\trange.setEnd(focn, foco );\n\n\t\t\ttry {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t} catch (e) {}\n\n\t\t\tsel.addRange(range);\n\t\t},\n\t\tselectionWrap: function(tag)\n\t\t{\n\t\t\ttag = tag.toLowerCase();\n\n\t\t\tvar block = this.getBlock();\n\t\t\tif (block)\n\t\t\t{\n\t\t\t\tvar wrapper = this.formatChangeTag(block, tag);\n\t\t\t\tthis.sync();\n\t\t\t\treturn wrapper;\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tvar range = sel.getRangeAt(0);\n\t\t\tvar wrapper = document.createElement(tag);\n\t\t\twrapper.appendChild(range.extractContents());\n\t\t\trange.insertNode(wrapper);\n\n\t\t\tthis.selectionElement(wrapper);\n\n\t\t\treturn wrapper;\n\t\t},\n\t\tselectionAll: function()\n\t\t{\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(this.$editor[0]);\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t},\n\t\tselectionRemove: function()\n\t\t{\n\t\t\tthis.getSelection().removeAllRanges();\n\t\t},\n\t\tgetCaretOffset: function (element)\n\t\t{\n\t\t\tvar caretOffset = 0;\n\n\t\t\tvar range = this.getRange();\n\t\t\tvar preCaretRange = range.cloneRange();\n\t\t\tpreCaretRange.selectNodeContents(element);\n\t\t\tpreCaretRange.setEnd(range.endContainer, range.endOffset);\n\t\t\tcaretOffset = $.trim(preCaretRange.toString()).length;\n\n\t\t\treturn caretOffset;\n\t\t},\n\t\tgetCaretOffsetRange: function()\n\t\t{\n\t\t\treturn new Range(this.getSelection().getRangeAt(0));\n\t\t},\n\t\tsetCaret: function (el, start, end)\n\t\t{\n\t\t\tif (typeof end === 'undefined') end = start;\n\t\t\tel = el[0] || el;\n\n\t\t\tvar range = this.getRange();\n\t\t\trange.selectNodeContents(el);\n\n\t\t\tvar textNodes = this.getTextNodesIn(el);\n\t\t\tvar foundStart = false;\n\t\t\tvar charCount = 0, endCharCount;\n\n\t\t\tif (textNodes.length == 1 && start)\n\t\t\t{\n\t\t\t\trange.setStart(textNodes[0], start);\n\t\t\t\trange.setEnd(textNodes[0], end);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (var i = 0, textNode; textNode = textNodes[i++];)\n\t\t\t\t{\n\t\t\t\t\tendCharCount = charCount + textNode.length;\n\t\t\t\t\tif (!foundStart && start >= charCount && (start < endCharCount || (start == endCharCount && i < textNodes.length)))\n\t\t\t\t\t{\n\t\t\t\t\t\trange.setStart(textNode, start - charCount);\n\t\t\t\t\t\tfoundStart = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (foundStart && end <= endCharCount)\n\t\t\t\t\t{\n\t\t\t\t\t\trange.setEnd( textNode, end - charCount );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcharCount = endCharCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange( range );\n\t\t},\n\t\tsetCaretAfter: function(node)\n\t\t{\n\t\t\tthis.$editor.focus();\n\n\t\t\tnode = node[0] || node;\n\n\t\t\tvar range = this.document.createRange()\n\n\t\t\tvar start = 1;\n\t\t\tvar end = -1;\n\n\t\t\trange.setStart(node, start)\n\t\t\trange.setEnd(node, end + 2)\n\t\t\tvar selection = this.window.getSelection()\n\t\t\tvar cursorRange = this.document.createRange()\n\n\t\t\tvar emptyElement = this.document.createTextNode('\\u200B')\n\t\t\t$(node).after(emptyElement)\n\n\t\t\tcursorRange.setStartAfter(emptyElement)\n\n\t\t\tselection.removeAllRanges()\n\t\t\tselection.addRange(cursorRange)\n\t\t\t$(emptyElement).remove();\n\t\t},\n\t\tgetTextNodesIn: function (node)\n\t\t{\n\t\t\tvar textNodes = [];\n\n\t\t\tif (node.nodeType == 3) textNodes.push(node);\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar children = node.childNodes;\n\t\t\t\tfor (var i = 0, len = children.length; i < len; ++i)\n\t\t\t\t{\n\t\t\t\t\ttextNodes.push.apply(textNodes, this.getTextNodesIn(children[i]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn textNodes;\n\t\t},\n\t\tgetCurrent: function()\n\t\t{\n\t\t\tvar el = false;\n\t\t\tvar sel = this.getSelection();\n\n\t\t\tif (sel && sel.rangeCount > 0)\n\t\t\t{\n\t\t\t\tel = sel.getRangeAt(0).startContainer;\n\n\t\t\t}\n\n\t\t\treturn this.isParentRedactor(el);\n\t\t},\n\t\tgetParent: function(elem)\n\t\t{\n\t\t\telem = elem || this.getCurrent();\n\t\t\tif (elem) return this.isParentRedactor( $( elem ).parent()[0] );\n\t\t\telse return false;\n\t\t},\n\t\tgetBlock: function(node)\n\t\t{\n\t\t\tif (typeof node === 'undefined') node = this.getCurrent();\n\n\t\t\twhile (node)\n\t\t\t{\n\t\t\t\tif (this.nodeTestBlocks(node))\n\t\t\t\t{\n\t\t\t\t\tif ($(node).hasClass('redactor_editor')) return false;\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tgetBlocks: function(nodes)\n\t\t{\n\t\t\tvar newnodes = [];\n\t\t\tif (typeof nodes == 'undefined')\n\t\t\t{\n\t\t\t\tvar range = this.getRange();\n\t\t\t\tif (range && range.collapsed === true) return [this.getBlock()];\n\t\t\t\tvar nodes = this.getNodes(range);\n\t\t\t}\n\n\t\t\t$.each(nodes, $.proxy(function(i,node)\n\t\t\t{\n\t\t\t\tif (this.opts.iframe === false && $(node).parents('div.redactor_editor').length == 0) return false;\n\t\t\t\tif (this.nodeTestBlocks(node)) newnodes.push(node);\n\n\t\t\t}, this));\n\n\t\t\tif (newnodes.length === 0) newnodes = [this.getBlock()];\n\n\t\t\treturn newnodes;\n\t\t},\n\t\tisInlineNode: function(node)\n\t\t{\n\t\t\tif (node.nodeType != 1) return false;\n\n\t\t\treturn !this.rTestBlock.test(node.nodeName);\n\t\t},\n\t\tnodeTestBlocks: function(node)\n\t\t{\n\t\t\treturn node.nodeType == 1 && this.rTestBlock.test(node.nodeName);\n\t\t},\n\t\ttagTestBlock: function(tag)\n\t\t{\n\t\t\treturn this.rTestBlock.test(tag);\n\t\t},\n\t\tgetNodes: function(range, tag)\n\t\t{\n\t\t\tif (typeof range == 'undefined' || range == false) var range = this.getRange();\n\t\t\tif (range && range.collapsed === true)\n\t\t\t{\n\t\t\t\tif (typeof tag === 'undefined' && this.tagTestBlock(tag))\n\t\t\t\t{\n\t\t\t\t\tvar block = this.getBlock();\n\t\t\t\t\tif (block.tagName == tag) return [block];\n\t\t\t\t\telse return [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn [this.getCurrent()];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar nodes = [], finalnodes = [];\n\n\t\t\tvar sel = this.document.getSelection();\n\t\t\tif (!sel.isCollapsed) nodes = this.getRangeSelectedNodes(sel.getRangeAt(0));\n\n\t\t\t$.each(nodes, $.proxy(function(i,node)\n\t\t\t{\n\t\t\t\tif (this.opts.iframe === false && $(node).parents('div.redactor_editor').length == 0) return false;\n\n\t\t\t\tif (typeof tag === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tif ($.trim(node.textContent) != '')\n\t\t\t\t\t{\n\t\t\t\t\t\tfinalnodes.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (node.tagName == tag)\n\t\t\t\t{\n\t\t\t\t\tfinalnodes.push(node);\n\t\t\t\t}\n\n\t\t\t}, this));\n\n\t\t\tif (finalnodes.length == 0)\n\t\t\t{\n\t\t\t\tif (typeof tag === 'undefined' && this.tagTestBlock(tag))\n\t\t\t\t{\n\t\t\t\t\tvar block = this.getBlock();\n\t\t\t\t\tif (block.tagName == tag) return finalnodes.push(block);\n\t\t\t\t\telse return [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinalnodes.push(this.getCurrent());\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar last = finalnodes[finalnodes.length-1];\n\t\t\tif (this.nodeTestBlocks(last))\n\t\t\t{\n\t\t\t\tfinalnodes = finalnodes.slice(0, -1);\n\t\t\t}\n\n\t\t\treturn finalnodes;\n\t\t},\n\t\tgetElement: function(node)\n\t\t{\n\t\t\tif (!node) node = this.getCurrent();\n\t\t\twhile (node)\n\t\t\t{\n\t\t\t\tif (node.nodeType == 1)\n\t\t\t\t{\n\t\t\t\t\tif ($(node).hasClass('redactor_editor')) return false;\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tgetRangeSelectedNodes: function(range)\n\t\t{\n\t\t\trange = range || this.getRange();\n\t\t\tvar node = range.startContainer;\n\t\t\tvar endNode = range.endContainer;\n\n\t\t\tif (node == endNode) return [node];\n\n\t\t\tvar rangeNodes = [];\n\t\t\twhile (node && node != endNode)\n\t\t\t{\n\t\t\t\trangeNodes.push(node = this.nextNode(node));\n\t\t\t}\n\n\t\t\tnode = range.startContainer;\n\t\t\twhile (node && node != range.commonAncestorContainer)\n\t\t\t{\n\t\t\t\trangeNodes.unshift(node);\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn rangeNodes;\n\t\t},\n\t\tnextNode: function(node)\n\t\t{\n\t\t\tif (node.hasChildNodes()) return node.firstChild;\n\t\t\telse\n\t\t\t{\n\t\t\t\twhile (node && !node.nextSibling)\n\t\t\t\t{\n\t\t\t\t\tnode = node.parentNode;\n\t\t\t\t}\n\n\t\t\t\tif (!node) return null;\n\t\t\t\treturn node.nextSibling;\n\t\t\t}\n\t\t},\n\t\tgetSelectionText: function()\n\t\t{\n\t\t\treturn this.getSelection().toString();\n\t\t},\n\t\tgetSelectionHtml: function()\n\t\t{\n\t\t\tvar html = '';\n\n\t\t\tvar sel = this.getSelection();\n\t\t\tif (sel.rangeCount)\n\t\t\t{\n\t\t\t\tvar container = this.document.createElement( \"div\" );\n\t\t\t\tvar len = sel.rangeCount;\n\t\t\t\tfor (var i = 0; i < len; ++i)\n\t\t\t\t{\n\t\t\t\t\tcontainer.appendChild(sel.getRangeAt(i).cloneContents());\n\t\t\t\t}\n\n\t\t\t\thtml = container.innerHTML;\n\t\t\t}\n\n\t\t\treturn this.syncClean(html);\n\t\t},\n\t\tselectionSave: function()\n\t\t{\n\t\t\tif (!this.isFocused())\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t}\n\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tthis.selectionCreateMarker(this.getRange());\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.savedSel = rangy.saveSelection();\n\t\t\t}\n\t\t},\n\t\tselectionCreateMarker: function(range, remove)\n\t\t{\n\t\t\tif (!range) return;\n\n\t\t\tvar node1 = $('<span id=\"selection-marker-1\" class=\"redactor-selection-marker\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\t\t\tvar node2 = $('<span id=\"selection-marker-2\" class=\"redactor-selection-marker\">' + this.opts.invisibleSpace + '</span>', this.document)[0];\n\n\t\t\tif (range.collapsed === true)\n\t\t\t{\n\t\t\t\tthis.selectionSetMarker(range, node1, true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectionSetMarker(range, node1, true);\n\t\t\t\tthis.selectionSetMarker(range, node2, false);\n\t\t\t}\n\n\t\t\tthis.savedSel = this.$editor.html();\n\n\t\t\tthis.selectionRestore(false, false);\n\t\t},\n\t\tselectionSetMarker: function(range, node, type)\n\t\t{\n\t\t\tvar boundaryRange = range.cloneRange();\n\n\t\t\ttry {\n\t\t\t\tboundaryRange.collapse(type);\n\t\t\t\tboundaryRange.insertNode(node);\n\t\t\t\tboundaryRange.detach();\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tvar html = this.opts.emptyHtml;\n\t\t\t\tif (this.opts.linebreaks) html = '<br>';\n\n\t\t\t\tthis.$editor.prepend(html);\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t},\n\t\tselectionRestore: function(replace, remove)\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\tif (replace === true && this.savedSel)\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.html(this.savedSel);\n\t\t\t\t}\n\n\t\t\t\tvar node1 = this.$editor.find('span#selection-marker-1');\n\t\t\t\tvar node2 = this.$editor.find('span#selection-marker-2');\n\n\t\t\t\tif (this.browser('mozilla'))\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.focus();\n\t\t\t\t}\n\t\t\t\telse if (!this.isFocused())\n\t\t\t\t{\n\t\t\t\t\tthis.focusWithSaveScroll();\n\t\t\t\t}\n\n\t\t\t\tif (node1.length != 0 && node2.length != 0)\n\t\t\t\t{\n\n\t\t\t\t\tthis.selectionSet(node1[0], 0, node2[0], 0);\n\t\t\t\t}\n\t\t\t\telse if (node1.length != 0)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionSet(node1[0], 0, null, 0);\n\t\t\t\t}\n\n\t\t\t\tif (remove !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionRemoveMarkers();\n\t\t\t\t\tthis.savedSel = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\trangy.restoreSelection(this.savedSel);\n\t\t\t}\n\t\t},\n\t\tselectionRemoveMarkers: function(type)\n\t\t{\n\t\t\tif (!this.opts.rangy)\n\t\t\t{\n\t\t\t\t$.each(this.$editor.find('span.redactor-selection-marker'), function()\n\t\t\t\t{\n\t\t\t\t\tvar html = $.trim($(this).html().replace(/[^\\u0000-\\u1C7F]/g, ''));\n\t\t\t\t\tif (html == '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).removeAttr('class').removeAttr('id');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\trangy.removeMarkers(this.savedSel);\n\t\t\t}\n\t\t},\n\t\ttableShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.modalInit(this.opts.curLang.table, this.opts.modal_table, 300, $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_insert_table_btn').on('click', $.proxy(this.tableInsert, this));\n\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_table_rows').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this));\n\t\t},\n\t\ttableInsert: function()\n\t\t{\n\t\t\tthis.bufferSet(false);\n\n\t\t\tvar rows = $('#redactor_table_rows').val(),\n\t\t\t\tcolumns = $('#redactor_table_columns').val(),\n\t\t\t\t$table_box = $('<div></div>'),\n\t\t\t\ttableId = Math.floor(Math.random() * 99999),\n\t\t\t\t$table = $('<table id=\"table' + tableId + '\"><tbody></tbody></table>'),\n\t\t\t\ti, $row, z, $column;\n\n\t\t\tfor (i = 0; i < rows; i++)\n\t\t\t{\n\t\t\t\t$row = $('<tr></tr>');\n\n\t\t\t\tfor (z = 0; z < columns; z++)\n\t\t\t\t{\n\t\t\t\t\t$column = $('<td>' + this.opts.invisibleSpace + '</td>');\n\t\t\t\t\tif (i === 0 && z === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t$column.append('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t\t}\n\n\t\t\t\t\t$($row).append($column);\n\t\t\t\t}\n\n\t\t\t\t$table.append($row);\n\t\t\t}\n\n\t\t\t$table_box.append($table);\n\t\t\tvar html = $table_box.html();\n\n\t\t\tif (this.opts.linebreaks === false && this.browser('mozilla'))\n\t\t\t{\n\t\t\t\thtml += '<p>' + this.opts.invisibleSpace + '</p>';\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar current = this.getBlock() || this.getCurrent();\n\n\t\t\tif (current && current.tagName != 'BODY')\n\t\t\t{\n\t\t\t\tif (current.tagName == 'LI')\n\t\t\t\t{\n\t\t\t\t\tvar current = $(current).closest('ul, ol');\n\t\t\t\t}\n\n\t\t\t\t$(current).after(html)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t\tthis.insertHtmlAdvanced(html, false);\n\t\t\t}\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar table = this.$editor.find('#table' + tableId);\n\t\t\tthis.buttonActiveObserver();\n\n\t\t\ttable.find('span#selection-marker-1, inline#selection-marker-1').remove();\n\t\t\ttable.removeAttr('id');\n\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteTable: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\t$table.remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteRow: function()\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_tr = $(parent).closest('tr');\n\t\t\tvar $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();\n\t\t\tif ($focus_tr.length)\n\t\t\t{\n\t\t\t\tvar $focus_td = $focus_tr.children('td' ).first();\n\t\t\t\tif ($focus_td.length)\n\t\t\t\t{\n\t\t\t\t\t$focus_td.prepend('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$current_tr.remove();\n\t\t\tthis.selectionRestore();\n\t\t\t$table.find('span#selection-marker-1').remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableDeleteColumn: function()\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_td = $(parent).closest('td');\n\t\t\tif (!($current_td.is('td')))\n\t\t\t{\n\t\t\t\t$current_td = $current_td.closest('td');\n\t\t\t}\n\n\t\t\tvar index = $current_td.get(0).cellIndex;\n\t\t\t$table.find('tr').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tvar focusIndex = index - 1 < 0 ? index + 1 : index - 1;\n\t\t\t\tif (i === 0)\n\t\t\t\t{\n\t\t\t\t\t$(elem).find('td').eq(focusIndex).prepend('<span id=\"selection-marker-1\">' + this.opts.invisibleSpace + '</span>');\n\t\t\t\t}\n\n\t\t\t\t$(elem).find('td').eq(index).remove();\n\n\t\t\t}, this));\n\n\t\t\tthis.selectionRestore();\n\t\t\t$table.find('span#selection-marker-1').remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddHead: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tif ($table.find('thead').length !== 0) this.tableDeleteHead();\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar tr = $table.find('tr').first().clone();\n\t\t\t\ttr.find('td').replaceWith('<th></th>').html(this.opts.invisibleSpace);\n\t\t\t\t$thead = $('<thead></thead>');\n\t\t\t\t$thead.append(tr);\n\t\t\t\t$table.prepend($thead);\n\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t},\n\t\ttableDeleteHead: function()\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tvar $thead = $table.find('thead');\n\n\t\t\tif ($thead.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\t$thead.remove();\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddRowAbove: function()\n\t\t{\n\t\t\tthis.tableAddRow('before');\n\t\t},\n\t\ttableAddRowBelow: function()\n\t\t{\n\t\t\tthis.tableAddRow('after');\n\t\t},\n\t\ttableAddColumnLeft: function()\n\t\t{\n\t\t\tthis.tableAddColumn('before');\n\t\t},\n\t\ttableAddColumnRight: function()\n\t\t{\n\t\t\tthis.tableAddColumn('after');\n\t\t},\n\t\ttableAddRow: function(type)\n\t\t{\n\t\t\tvar $table = $(this.getParent()).closest('table');\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar $current_tr = $(this.getParent()).closest('tr');\n\t\t\tvar new_tr = $current_tr.clone();\n\t\t\tnew_tr.find('td').html(this.opts.invisibleSpace);\n\n\t\t\tif (type === 'after') $current_tr.after(new_tr);\n\t\t\telse $current_tr.before(new_tr);\n\n\t\t\tthis.sync();\n\t\t},\n\t\ttableAddColumn: function (type)\n\t\t{\n\t\t\tvar parent = this.getParent();\n\t\t\tvar $table = $(parent).closest('table');\n\n\t\t\tif (!this.isParentRedactor($table)) return false;\n\t\t\tif ($table.length == 0) return false;\n\n\t\t\tthis.bufferSet();\n\n\t\t\tvar index = 0;\n\n\t\t\tvar current = this.getCurrent();\n\t\t\tvar $current_tr = $(current).closest('tr');\n\t\t\tvar $current_td =  $(current).closest('td');\n\n\t\t\t$current_tr.find('td').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tif ($(elem)[0] === $current_td[0]) index = i;\n\n\t\t\t}, this));\n\n\t\t\t$table.find('tr').each($.proxy(function(i, elem)\n\t\t\t{\n\t\t\t\tvar $current = $(elem).find('td').eq(index);\n\n\t\t\t\tvar td = $current.clone();\n\t\t\t\ttd.html(this.opts.invisibleSpace);\n\n\t\t\t\ttype === 'after' ? $current.after(td) : $current.before(td);\n\n\t\t\t}, this));\n\n\t\t\tthis.sync();\n\t\t},\n\t\tvideoShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tthis.modalInit(this.opts.curLang.video, this.opts.modal_video, 600, $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_insert_video_btn').on('click', $.proxy(this.videoInsert, this));\n\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_insert_video_area').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this));\n\t\t},\n\t\tvideoInsert: function ()\n\t\t{\n\t\t\tvar data = $('#redactor_insert_video_area').val();\n\t\t\tdata = this.cleanStripTags(data);\n\t\t\tvar iframeStart = '<iframe width=\"500\" height=\"281\" src=\"',\n\t\t\t\tiframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n\t\t\tif (data.match(reUrlYoutube))\n\t\t\t{\n\t\t\t\tdata = data.replace(reUrlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\n\t\t\t}\n\t\t\telse if (data.match(reUrlVimeo))\n\t\t\t{\n\t\t\t\tdata = data.replace(reUrlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\n\t\t\t}\n            else if (data.match(reUrlFacebook))\n            {\n                data = data.replace(reUrlFacebook, iframeStart + 'https://www.facebook.com/video/embed?video_id=$1' + iframeEnd);\n            }\n\t\t\telse if (data.match(reUrlRutube))\n            {\n                data = data.replace(reUrlRutube, iframeStart + '//rutube.ru/play/embed/$1' + iframeEnd);\n            }\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tvar current = this.getBlock() || this.getCurrent();\n\n\t\t\tif (current) $(current).after(data)\n\t\t\telse this.insertHtmlAdvanced(data, false);\n\n\t\t\tthis.sync();\n\t\t\tthis.modalClose();\n\t\t},\n\n\t\tlinkShow: function()\n\t\t{\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\n\t\t\t\tif (this.opts.predefinedLinks !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.predefinedLinksStorage = {};\n\t\t\t\t\tvar that = this;\n\t\t\t\t\t$.getJSON(this.opts.predefinedLinks, function(data)\n\t\t\t\t\t{\n                        if(Object.keys(data).length === 0){ return; }\n\t\t\t\t\t\tvar $select = $('#redactor-predefined-links');\n\t\t\t\t\t\t$select .html('');\n\t\t\t\t\t\t$.each(data, function(key, val)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthat.predefinedLinksStorage[key] = val;\n\t\t\t\t\t\t\t$select.append($('<option>').val(key).html(val.name));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$select.on('change', function()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar key = $(this).val();\n\t\t\t\t\t\t\tvar name = '', url = '';\n\t\t\t\t\t\t\tif (key != 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname = that.predefinedLinksStorage[key].name;\n\t\t\t\t\t\t\t\turl = that.predefinedLinksStorage[key].url;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$('#redactor_link_url').val(url);\n                            if($('#redactor_link_url_text').data('is_selected_text') != 1){\n                                $('#redactor_link_url_text').val(name);\n                            }\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$select.show();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.insert_link_node = false;\n\n\t\t\t\tvar sel = this.getSelection();\n\t\t\t\tvar url = '', text = '', target = '';\n\n\t\t\t\tvar elem = this.getParent();\n\t\t\t\tvar par = $(elem).parent().get(0);\n\t\t\t\tif (par && par.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\telem = par;\n\t\t\t\t}\n\n\t\t\t\tif (elem && elem.tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\turl = elem.href;\n\t\t\t\t\ttext = $(elem).text();\n\t\t\t\t\ttarget = elem.target;\n\n\t\t\t\t\tthis.insert_link_node = elem;\n\t\t\t\t}\n\t\t\t\telse text = sel.toString();\n\n\t\t\t\t$('#redactor_link_url_text').val(text);\n                if(text.length > 0){\n                    $('#redactor_link_url_text').data('is_selected_text', 1);\n                }\n\n\t\t\t\tvar thref = self.location.href.replace(/\\/$/i, '');\n\t\t\t\turl = url.replace(thref, '');\n\t\t\t\turl = url.replace(/^\\/#/, '#');\n\t\t\t\turl = url.replace('mailto:', '');\n\t\t\t\tif (this.opts.linkProtocol === false)\n\t\t\t\t{\n\t\t\t\t\tvar re = new RegExp('^(http|ftp|https)://' + self.location.host, 'i');\n\t\t\t\t\turl = url.replace(re, '');\n\t\t\t\t}\n\t\t\t\t$('#redactor_link_url').val(url);\n\n\t\t\t\tif (target === '_blank')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_link_blank').prop('checked', true);\n\t\t\t\t}\n\n\t\t\t\tthis.linkInsertPressed = false;\n\t\t\t\t$('#redactor_insert_link_btn').on('click', $.proxy(this.linkProcess, this));\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_link_url').focus();\n\n\t\t\t\t}, 200);\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.link, this.opts.modal_link, 460, callback);\n\n\t\t},\n\t\tlinkProcess: function()\n\t\t{\n\t\t\tif (this.linkInsertPressed)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.linkInsertPressed = true;\n\t\t\tvar target = '', targetBlank = '';\n\n\t\t\tvar link = $('#redactor_link_url').val();\n\t\t\tvar text = $('#redactor_link_url_text').val();\n\t\t\tif (link.search('@') != -1 && /(http|ftp|https):\\/\\//i.test(link) === false)\n\t\t\t{\n\t\t\t\tlink = 'mailto:' + link;\n\t\t\t}\n\n\t\t\telse if (link.search('#') != 0)\n\t\t\t{\n\t\t\t\tif ($('#redactor_link_blank').prop('checked'))\n\t\t\t\t{\n\t\t\t\t\ttarget = ' target=\"_blank\"';\n\t\t\t\t\ttargetBlank = '_blank';\n\t\t\t\t}\n\t\t\t\tvar pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';\n\t\t\t\tvar re = new RegExp('^(http|ftp|https)://' + pattern, 'i');\n\t\t\t\tvar re2 = new RegExp('^' + pattern, 'i');\n\n\t\t\t\tif (link.search(re) == -1 && link.search(re2) == 0 && this.opts.linkProtocol)\n\t\t\t\t{\n\t\t\t\t\tlink = this.opts.linkProtocol + link;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext = text.replace(/<|>/g, '');\n\t\t\tvar extra = '&nbsp;';\n\t\t\tif (this.browser('mozilla'))\n\t\t\t{\n\t\t\t\textra = '&nbsp;';\n\t\t\t}\n\n\t\t\tthis.linkInsert('<a href=\"' + link + '\"' + target + '>' + text + '</a>' + extra, $.trim(text), link, targetBlank);\n\n\t\t},\n\t\tlinkInsert: function (a, text, link, target)\n\t\t{\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (text !== '')\n\t\t\t{\n\t\t\t\tif (this.insert_link_node)\n\t\t\t\t{\n\t\t\t\t\tthis.bufferSet();\n\n\t\t\t\t\t$(this.insert_link_node).text(text).attr('href', link);\n\n\t\t\t\t\tif (target !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this.insert_link_node).attr('target', target);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this.insert_link_node).removeAttr('target');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar $a = $(a).addClass('redactor-added-link');\n\t\t\t\t\tthis.exec('inserthtml', this.outerHtml($a), false);\n\n\t\t\t\t\tvar link = this.$editor.find('a.redactor-added-link');\n\n\t\t\t\t\tlink.removeAttr('style').removeClass('redactor-added-link').each(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.className == '') $(this).removeAttr('class');\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tthis.sync();\n\t\t\t}\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tif (this.opts.observeLinks) this.observeLinks();\n\n\t\t\t}, this), 5);\n\n\t\t\tthis.modalClose();\n\t\t},\n\t\tfileShow: function ()\n\t\t{\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\t\t\t\tvar sel = this.getSelection();\n\n\t\t\t\tvar text = '';\n\t\t\t\tif (this.oldIE()) text = sel.text;\n\t\t\t\telse text = sel.toString();\n\n\t\t\t\t$('#redactor_filename').val(text);\n\t\t\t\tif (!this.isMobile() && !this.isIPad())\n\t\t\t\t{\n\t\t\t\t\tthis.draguploadInit('#redactor_file', {\n\t\t\t\t\t\turl: this.opts.fileUpload,\n\t\t\t\t\t\tuploadFields: this.opts.uploadFields,\n\t\t\t\t\t\tsuccess: $.proxy(this.fileCallback, this),\n\t\t\t\t\t\terror: $.proxy( function(obj, json)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.callback('fileUploadError', json);\n\n\t\t\t\t\t\t}, this),\n\t\t\t\t\t\tuploadParam: this.opts.fileUploadParam\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.uploadInit('redactor_file', {\n\t\t\t\t\tauto: true,\n\t\t\t\t\turl: this.opts.fileUpload,\n\t\t\t\t\tsuccess: $.proxy(this.fileCallback, this),\n\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.callback('fileUploadError', json);\n\n\t\t\t\t\t}, this)\n\t\t\t\t});\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.file, this.opts.modal_file, 500, callback);\n\t\t},\n\t\tfileCallback: function(json)\n\t\t{\n\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (json !== false)\n\t\t\t{\n\n\t\t\t\tvar text = $('#redactor_filename').val();\n\t\t\t\tif (text === '') text = json.filename;\n\n\t\t\t\tvar link = '<a href=\"' + json.filelink + '\" id=\"filelink-marker\">' + text + '</a>';\n\t\t\t\tif (this.browser('webkit') && !!this.window.chrome)\n\t\t\t\t{\n\t\t\t\t\tlink = link + '&nbsp;';\n\t\t\t\t}\n\n\t\t\t\tthis.execCommand('inserthtml', link, false);\n\n\t\t\t\tvar linkmarker = $(this.$editor.find('a#filelink-marker'));\n\t\t\t\tif (linkmarker.length != 0) linkmarker.removeAttr('id');\n\t\t\t\telse linkmarker = false;\n\n\t\t\t\tthis.sync();\n\t\t\t\tthis.callback('fileUpload', linkmarker, json);\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t},\n\t\timageShow: function()\n\t\t{\n\n\t\t\tthis.selectionSave();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\n\t\t\t\tif (this.opts.imageGetJson)\n\t\t\t\t{\n\n\t\t\t\t\t$.getJSON(this.opts.imageGetJson, $.proxy(function(data)\n\t\t\t\t\t{\n                        if(data.error){\n                            alert(data.message); return;\n                        }\n\t\t\t\t\t\tvar folders = {}, count = 0;\n\t\t\t\t\t\t$.each(data, $.proxy(function(key, val)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (typeof val.folder !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\tfolders[val.folder] = count;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}, this));\n\n                        $('#redactor_image_box .empty_list').show();\n\t\t\t\t\t\tvar folderclass = false;\n\t\t\t\t\t\t$.each(data, $.proxy(function(key, val)\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tvar thumbtitle = '';\n\t\t\t\t\t\t\tif (typeof val.title !== 'undefined') thumbtitle = val.title;\n\n\t\t\t\t\t\t\tvar folderkey = 0;\n\t\t\t\t\t\t\tif (!$.isEmptyObject(folders) && typeof val.folder !== 'undefined')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfolderkey = folders[val.folder];\n\t\t\t\t\t\t\t\tif (folderclass === false) folderclass = '.redactorfolder' + folderkey;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar img = $('<img src=\"' + val.thumb + '\" class=\"redactorfolder redactorfolder' + folderkey + '\" rel=\"' + val.image + '\" title=\"' + thumbtitle + '\" />');\n\t\t\t\t\t\t\t$('#redactor_image_box').append(img);\n\t\t\t\t\t\t\t$(img).on('click', $.proxy(this.imageThumbClick, this));\n                            $('#redactor_image_box .empty_list').hide();\n\t\t\t\t\t\t}, this));\n\t\t\t\t\t\tif (!$.isEmptyObject(folders))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('.redactorfolder').hide();\n\t\t\t\t\t\t\t$(folderclass).show();\n\n\t\t\t\t\t\t\tvar onchangeFunc = function(e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('.redactorfolder').hide();\n\t\t\t\t\t\t\t\t$('.redactorfolder' + $(e.target).val()).show();\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tvar select = $('<select id=\"redactor_image_box_select\">');\n\t\t\t\t\t\t\t$.each( folders, function(k, v)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tselect.append( $('<option value=\"' + v + '\">' + k + '</option>'));\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$('#redactor_image_box').before(select);\n\t\t\t\t\t\t\tselect.change(onchangeFunc);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this));\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#redactor-tab-control-2').remove();\n\t\t\t\t}\n\n\t\t\t\tif (this.opts.imageUpload || this.opts.s3)\n\t\t\t\t{\n\n\t\t\t\t\tif (!this.isMobile()  && !this.isIPad() && this.opts.s3 === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif ($('#redactor_file' ).length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadInit('#redactor_file', {\n\t\t\t\t\t\t\t\turl: this.opts.imageUpload,\n\t\t\t\t\t\t\t\tuploadFields: this.opts.uploadFields,\n\t\t\t\t\t\t\t\tsuccess: $.proxy(this.imageCallback, this),\n\t\t\t\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.callback('imageUploadError', json);\n\n\t\t\t\t\t\t\t\t}, this),\n\t\t\t\t\t\t\t\tuploadParam: this.opts.imageUploadParam\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.opts.s3 === false)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tthis.uploadInit('redactor_file', {\n\t\t\t\t\t\t\tauto: true,\n\t\t\t\t\t\t\turl: this.opts.imageUpload,\n\t\t\t\t\t\t\tsuccess: $.proxy(this.imageCallback, this),\n\t\t\t\t\t\t\terror: $.proxy(function(obj, json)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.callback('imageUploadError', json);\n\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_file').on('change.redactor', $.proxy(this.s3handleFileSelect, this));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('.redactor_tab').hide();\n\t\t\t\t\tif (!this.opts.imageGetJson)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_tabs').remove();\n\t\t\t\t\t\t$('#redactor_tab3').show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor-tab-control-1').remove();\n\t\t\t\t\t\t$('#redactor-tab-control-2').addClass('redactor_tabs_act');\n\t\t\t\t\t\t$('#redactor_tab2').show();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!this.opts.imageTabLink && (this.opts.imageUpload || this.opts.imageGetJson))\n\t\t\t\t{\n\t\t\t\t\t$('#redactor-tab-control-3').hide();\n\t\t\t\t}\n\n\t\t\t\t$('#redactor_upload_btn').on('click', $.proxy(this.imageCallbackLink, this));\n\n\t\t\t\tif (!this.opts.imageUpload && !this.opts.imageGetJson)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(function()\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_file_link').focus();\n\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.image, this.opts.modal_image, 610, callback);\n\n\t\t},\n\t\timageEdit: function(image)\n\t\t{\n\t\t\tvar $el = image;\n\t\t\tvar parent = $el.parent().parent();\n\n\t\t\tvar callback = $.proxy(function()\n\t\t\t{\n\t\t\t\t$('#redactor_file_alt').val($el.attr('alt'));\n\t\t\t\t$('#redactor_image_edit_src').attr('href', $el.attr('src'));\n\n\t\t\t\tif ($el.css('display') == 'block' && $el.css('float') == 'none')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_form_image_align').val('center');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_form_image_align').val($el.css('float'));\n\t\t\t\t}\n\n\t\t\t\tif ($(parent).get(0).tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_file_link').val($(parent).attr('href'));\n\n\t\t\t\t\tif ($(parent).attr('target') == '_blank')\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#redactor_link_blank').prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$('#redactor_image_delete_btn').on('click', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.imageRemove($el);\n\n\t\t\t\t}, this));\n\n\t\t\t\t$('#redactorSaveBtn').on('click', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tthis.imageSave($el);\n\n\t\t\t\t}, this));\n\n\t\t\t}, this);\n\n\t\t\tthis.modalInit(this.opts.curLang.edit, this.opts.modal_image_edit, 380, callback);\n\n\t\t},\n\t\timageRemove: function(el)\n\t\t{\n\t\t\tvar parentLink = $(el).parent().parent();\n\t\t\tvar parent = $(el).parent();\n\t\t\tvar parentEl = false;\n\n\t\t\tif (parentLink.length && parentLink[0].tagName === 'A')\n\t\t\t{\n\t\t\t\tparentEl = true;\n\t\t\t\t$(parentLink).remove();\n\t\t\t}\n\t\t\telse if (parent.length && parent[0].tagName === 'A')\n\t\t\t{\n\t\t\t\tparentEl = true;\n\t\t\t\t$(parent).remove();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(el).remove();\n\t\t\t}\n\n\t\t\tif (parent.length && parent[0].tagName === 'P')\n\t\t\t{\n\t\t\t\tthis.focusWithSaveScroll();\n\n\t\t\t\tif (parentEl === false) this.selectionStart(parent);\n\t\t\t}\n\t\t\tthis.callback('imageDelete', el);\n\n\t\t\tthis.modalClose();\n\t\t\tthis.sync();\n\t\t},\n\t\timageSave: function(el)\n\t\t{\n\t\t\tthis.imageResizeHide(false);\n\n\t\t\tvar $el = $(el);\n\t\t\tvar parent = $el.parent();\n\n\t\t\t$el.attr('alt', $('#redactor_file_alt').val());\n\n\t\t\tvar floating = $('#redactor_form_image_align').val();\n\t\t\tvar margin = '';\n\n\t\t\tif (floating === 'left')\n\t\t\t{\n\t\t\t\tmargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';\n\t\t\t\t$el.css({ 'float': 'left', 'margin': margin });\n\t\t\t}\n\t\t\telse if (floating === 'right')\n\t\t\t{\n\t\t\t\tmargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + '';\n\t\t\t\t$el.css({ 'float': 'right', 'margin': margin });\n\t\t\t}\n\t\t\telse if (floating === 'center')\n\t\t\t{\n\t\t\t\t$el.css({ 'float': '', 'display': 'block', 'margin': 'auto' });\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$el.css({ 'float': '', 'display': '', 'margin': '' });\n\t\t\t}\n\t\t\tvar link = $.trim($('#redactor_file_link').val());\n\t\t\tif (link !== '')\n\t\t\t{\n\t\t\t\tvar target = false;\n\t\t\t\tif ($('#redactor_link_blank').prop('checked'))\n\t\t\t\t{\n\t\t\t\t\ttarget = true;\n\t\t\t\t}\n\n\t\t\t\tif (parent.get(0).tagName !== 'A')\n\t\t\t\t{\n\t\t\t\t\tvar a = $('<a href=\"' + link + '\">' + this.outerHtml(el) + '</a>');\n\n\t\t\t\t\tif (target)\n\t\t\t\t\t{\n\t\t\t\t\t\ta.attr('target', '_blank');\n\t\t\t\t\t}\n\n\t\t\t\t\t$el.replaceWith(a);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparent.attr('href', link);\n\t\t\t\t\tif (target)\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.attr('target', '_blank');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.removeAttr('target');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (parent.get(0).tagName === 'A')\n\t\t\t\t{\n\t\t\t\t\tparent.replaceWith(this.outerHtml(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.observeImages();\n\t\t\tthis.sync();\n\n\t\t},\n\t\timageResizeHide: function(e)\n\t\t{\n\t\t\tif (e !== false && $(e.target).parent().length != 0 && $(e.target).parent()[0].id === 'redactor-image-box')\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar imageBox = this.$editor.find('#redactor-image-box');\n\t\t\tif (imageBox.length == 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.$editor.find('#redactor-image-editter, #redactor-image-resizer').remove();\n\n\t\t\timageBox.find('img').css({\n\t\t\t\tmarginTop: imageBox[0].style.marginTop,\n\t\t\t\tmarginBottom: imageBox[0].style.marginBottom,\n\t\t\t\tmarginLeft: imageBox[0].style.marginLeft,\n\t\t\t\tmarginRight: imageBox[0].style.marginRight\n\t\t\t});\n\n\t\t\timageBox.css('margin', '');\n\t\t\timageBox.find('img').css('opacity', '');\n\t\t\timageBox.replaceWith(function()\n\t\t\t{\n\t\t\t\treturn $(this).contents();\n\t\t\t});\n\n\t\t\t$(document).off('click.redactor-image-resize-hide');\n\t\t\tthis.$editor.off('click.redactor-image-resize-hide');\n\t\t\tthis.$editor.off('keydown.redactor-image-delete');\n\n\t\t\tthis.sync()\n\n\t\t},\n\t\timageResize: function(image)\n\t\t{\n\t\t\tvar $image = $(image);\n\n\t\t\t$image.on('mousedown', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.imageResizeHide(false);\n\t\t\t}, this));\n\n\t\t\t$image.on('dragstart', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.$editor.on('drop.redactor-image-inside-drop', $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tsetTimeout($.proxy(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.observeImages();\n\t\t\t\t\t\tthis.$editor.off('drop.redactor-image-inside-drop');\n\t\t\t\t\t\tthis.sync();\n\n\t\t\t\t\t}, this), 1);\n\n\t\t\t\t},this));\n\t\t\t}, this));\n\n\t\t\t$image.on('click', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (this.$editor.find('#redactor-image-box').length != 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar clicked = false,\n\t\t\t\tstart_x,\n\t\t\t\tstart_y,\n\t\t\t\tratio = $image.width() / $image.height(),\n\t\t\t\tmin_w = 20,\n\t\t\t\tmin_h = 10;\n\n\t\t\t\tvar imageResizer = this.imageResizeControls($image);\n\t\t\t\tvar isResizing = false;\n\t\t\t\tif (imageResizer !== false)\n\t\t\t\t{\n\t\t\t\t\timageResizer.on('mousedown', function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tisResizing = true;\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tratio = $image.width() / $image.height();\n\n\t\t\t\t\t\tstart_x = Math.round(e.pageX - $image.eq(0).offset().left);\n\t\t\t\t\t\tstart_y = Math.round(e.pageY - $image.eq(0).offset().top);\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(this.document.body).on('mousemove', $.proxy(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isResizing)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar mouse_x = Math.round(e.pageX - $image.eq(0).offset().left) - start_x;\n\t\t\t\t\t\t\tvar mouse_y = Math.round(e.pageY - $image.eq(0).offset().top) - start_y;\n\n\t\t\t\t\t\t\tvar div_h = $image.height();\n\n\t\t\t\t\t\t\tvar new_h = parseInt(div_h, 10) + mouse_y;\n\t\t\t\t\t\t\tvar new_w = Math.round(new_h * ratio);\n\n\t\t\t\t\t\t\tif (new_w > min_w)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$image.width(new_w);\n\n\t\t\t\t\t\t\t\tif (new_w < 100)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.imageEditter.css({\n\t\t\t\t\t\t\t\t\t\tmarginTop: '-7px',\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '-13px',\n\t\t\t\t\t\t\t\t\t\tfontSize: '9px',\n\t\t\t\t\t\t\t\t\t\tpadding: '3px 5px'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.imageEditter.css({\n\t\t\t\t\t\t\t\t\t\tmarginTop: '-11px',\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '-18px',\n\t\t\t\t\t\t\t\t\t\tfontSize: '11px',\n\t\t\t\t\t\t\t\t\t\tpadding: '7px 10px'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstart_x = Math.round(e.pageX - $image.eq(0).offset().left);\n\t\t\t\t\t\t\tstart_y = Math.round(e.pageY - $image.eq(0).offset().top);\n\n\t\t\t\t\t\t\tthis.sync()\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)).on('mouseup', function()\n\t\t\t\t\t{\n\t\t\t\t\t\tisResizing = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.$editor.on('keydown.redactor-image-delete', $.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tvar key = e.which;\n\n\t\t\t\t\tif (this.keyCode.BACKSPACE == key || this.keyCode.DELETE == key)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.bufferSet(false);\n\t\t\t\t\t\tthis.imageResizeHide(false);\n\t\t\t\t\t\tthis.imageRemove($image);\n\t\t\t\t\t}\n\n\t\t\t\t}, this));\n\n\t\t\t\t$(document).on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));\n\t\t\t\tthis.$editor.on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));\n\t\t\t}, this));\n\t\t},\n\t\timageResizeControls: function($image)\n\t\t{\n\t\t\tvar imageBox = $('<span id=\"redactor-image-box\" data-redactor=\"verified\">');\n\t\t\timageBox.css({\n\t\t\t\tposition: 'relative',\n\t\t\t\tdisplay: 'inline-block',\n\t\t\t\tlineHeight: 0,\n\t\t\t\toutline: '1px dashed rgba(0, 0, 0, .6)',\n\t\t\t\t'float': $image.css('float')\n\t\t\t});\n\t\t\timageBox.attr('contenteditable', false);\n\n\t\t\tif ($image[0].style.margin != 'auto')\n\t\t\t{\n\t\t\t\timageBox.css({\n\t\t\t\t\tmarginTop: $image[0].style.marginTop,\n\t\t\t\t\tmarginBottom: $image[0].style.marginBottom,\n\t\t\t\t\tmarginLeft: $image[0].style.marginLeft,\n\t\t\t\t\tmarginRight: $image[0].style.marginRight\n\t\t\t\t});\n\n\t\t\t\t$image.css('margin', '');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageBox.css({ 'display': 'block', 'margin': 'auto' });\n\t\t\t}\n\n\t\t\t$image.css('opacity', .5).after(imageBox);\n\t\t\tthis.imageEditter = $('<span id=\"redactor-image-editter\" data-redactor=\"verified\">' + this.opts.curLang.edit + '</span>');\n\t\t\tthis.imageEditter.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\tzIndex: 5,\n\t\t\t\ttop: '50%',\n\t\t\t\tleft: '50%',\n\t\t\t\tmarginTop: '-11px',\n\t\t\t\tmarginLeft: '-18px',\n\t\t\t\tlineHeight: 1,\n\t\t\t\tbackgroundColor: '#000',\n\t\t\t\tcolor: '#fff',\n\t\t\t\tfontSize: '11px',\n\t\t\t\tpadding: '7px 10px',\n\t\t\t\tcursor: 'pointer'\n\t\t\t});\n\t\t\tthis.imageEditter.attr('contenteditable', false);\n\t\t\tthis.imageEditter.on('click', $.proxy(function()\n\t\t\t{\n\t\t\t\tthis.imageEdit($image);\n\t\t\t}, this));\n\t\t\timageBox.append(this.imageEditter);\n\t\t\tif (this.opts.imageResizable)\n\t\t\t{\n\t\t\t\tvar imageResizer = $('<span id=\"redactor-image-resizer\" data-redactor=\"verified\"></span>');\n\t\t\t\timageResizer.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tzIndex: 2,\n\t\t\t\t\tlineHeight: 1,\n\t\t\t\t\tcursor: 'nw-resize',\n\t\t\t\t\tbottom: '-4px',\n\t\t\t\t\tright: '-5px',\n\t\t\t\t\tborder: '1px solid #fff',\n\t\t\t\t\tbackgroundColor: '#000',\n\t\t\t\t\twidth: '8px',\n\t\t\t\t\theight: '8px'\n\t\t\t\t});\n\t\t\t\timageResizer.attr('contenteditable', false);\n\t\t\t\timageBox.append(imageResizer);\n\n\t\t\t\timageBox.append($image);\n\n\t\t\t\treturn imageResizer;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageBox.append($image);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\timageThumbClick: function(e)\n\t\t{\n\t\t\tvar img = '<img id=\"image-marker\" src=\"' + $(e.target).attr('rel') + '\" alt=\"' + $(e.target).attr('title') + '\" />';\n\n\t\t\tvar parent = this.getParent();\n\t\t\tif (this.opts.paragraphy && $(parent).closest('li').length == 0) img = '<p>' + img + '</p>';\n\n\t\t\tthis.imageInsert(img, true);\n\t\t},\n\t\timageCallbackLink: function()\n\t\t{\n\t\t\tvar val = $('#redactor_file_link').val();\n\n\t\t\tif (val !== '')\n\t\t\t{\n\t\t\t\tvar data = '<img id=\"image-marker\" src=\"' + val + '\" />';\n\t\t\t\tif (this.opts.linebreaks === false) data = '<p>' + data + '</p>';\n\n\t\t\t\tthis.imageInsert(data, true);\n\n\t\t\t}\n\t\t\telse this.modalClose();\n\t\t},\n\t\timageCallback: function(data)\n\t\t{\n\t\t\tthis.imageInsert(data);\n\t\t},\n\t\timageInsert: function(json, link)\n\t\t{\n\t\t\tthis.selectionRestore();\n\n\t\t\tif (json !== false)\n\t\t\t{\n\t\t\t\tvar html = '';\n\t\t\t\tif (link !== true)\n\t\t\t\t{\n\t\t\t\t\thtml = '<img id=\"image-marker\" src=\"' + json.image.url + '\" />';\n\n\t\t\t\t\tvar parent = this.getParent();\n\t\t\t\t\tif (this.opts.paragraphy && $(parent).closest('li').length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = '<p>' + html + '</p>';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thtml = json;\n\t\t\t\t}\n\n\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\tvar image = $(this.$editor.find('img#image-marker'));\n\n\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\telse image = false;\n\n\t\t\t\tthis.sync();\n\t\t\t\tlink !== true && this.callback('imageUpload', image, json);\n\t\t\t}\n\n\t\t\tthis.modalClose();\n\t\t\tthis.observeImages();\n\t\t},\n\t\tbuildProgressBar: function()\n\t\t{\n\t\t\tif ($('#redactor-progress').length != 0) return;\n\n\t\t\tthis.$progressBar = $('<div id=\"redactor-progress\"><span></span></div>');\n\t\t\t$(document.body).append(this.$progressBar);\n\t\t},\n\t\tshowProgressBar: function()\n\t\t{\n\t\t\tthis.buildProgressBar();\n\t\t\t$('#redactor-progress').fadeIn();\n\t\t},\n\t\thideProgressBar: function()\n\t\t{\n\t\t\t$('#redactor-progress').fadeOut(1500);\n\t\t},\n\t\tmodalTemplatesInit: function()\n\t\t{\n\t\t\t$.extend( this.opts,\n\t\t\t{\n\t\t\t\tmodal_file: String()\n\t\t\t\t+ '<section id=\"redactor-modal-file-insert\">'\n\t\t\t\t\t+ '<form id=\"redactorUploadFileForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.filename + '</label>'\n\t\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_filename\" class=\"redactor_input\" />'\n\t\t\t\t\t\t+ '<div style=\"margin-top: 7px;\">'\n\t\t\t\t\t\t\t+ '<input type=\"file\" id=\"redactor_file\" name=\"' + this.opts.fileUploadParam + '\" />'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t+ '</section>',\n\n\t\t\t\tmodal_image_edit: String()\n\t\t\t\t+ '<section id=\"redactor-modal-image-edit\">'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.title + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_file_alt\" class=\"redactor_input\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.link + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" id=\"redactor_file_link\" class=\"redactor_input\" />'\n\t\t\t\t\t+ '<label><input type=\"checkbox\" id=\"redactor_link_blank\"> ' + this.opts.curLang.link_new_tab + '</label>'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.image_position + '</label>'\n\t\t\t\t\t+ '<select id=\"redactor_form_image_align\">'\n\t\t\t\t\t\t+ '<option value=\"none\">' + this.opts.curLang.none + '</option>'\n\t\t\t\t\t\t+ '<option value=\"left\">' + this.opts.curLang.left + '</option>'\n\t\t\t\t\t\t+ '<option value=\"center\">' + this.opts.curLang.center + '</option>'\n\t\t\t\t\t\t+ '<option value=\"right\">' + this.opts.curLang.right + '</option>'\n\t\t\t\t\t+ '</select>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button id=\"redactor_image_delete_btn\" class=\"redactor_modal_btn redactor_modal_delete_btn\">' + this.opts.curLang._delete + '</button>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactorSaveBtn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.save + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_image: String()\n\t\t\t\t+ '<section id=\"redactor-modal-image-insert\">'\n\t\t\t\t\t+ '<div id=\"redactor_tabs\">'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-1\" class=\"redactor_tabs_act\">' + this.opts.curLang.upload + '</a>'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-2\">' + this.opts.curLang.choose + '</a>'\n\t\t\t\t\t\t+ '<a href=\"#\" id=\"redactor-tab-control-3\">' + this.opts.curLang.link + '</a>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '<form id=\"redactorInsertImageForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\">'\n\t\t\t\t\t\t+ '<div id=\"redactor_tab1\" class=\"redactor_tab\">'\n\t\t\t\t\t\t\t+ '<input type=\"file\" id=\"redactor_file\" name=\"' + this.opts.imageUploadParam + '\" />'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t\t+ '<div id=\"redactor_tab2\" class=\"redactor_tab\" style=\"display: none;\">'\n\t\t\t\t\t\t\t+ '<div id=\"redactor_image_box\"><span class=\"empty_list\">' + this.opts.curLang.empty_img_list + '</span></div>'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t\t+ '<div id=\"redactor_tab3\" class=\"redactor_tab\" style=\"display: none;\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.image_web_link + '</label>'\n\t\t\t\t\t\t+ '<input type=\"text\" name=\"redactor_file_link\" id=\"redactor_file_link\" class=\"redactor_input\"  /><br><br>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_modal_action_btn\" id=\"redactor_upload_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_link: String()\n\t\t\t\t+ '<section id=\"redactor-modal-link-insert\">'\n\t\t\t\t\t+ '<select id=\"redactor-predefined-links\" style=\"width: 99.5%; display: none;\"></select>'\n\t\t\t\t\t+ '<label>URL</label>'\n\t\t\t\t\t+ '<input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.text + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url_text\" />'\n\t\t\t\t\t+ '<label><input type=\"checkbox\" id=\"redactor_link_blank\"> ' + this.opts.curLang.link_new_tab + '</label>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_link_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_table: String()\n\t\t\t\t+ '<section id=\"redactor-modal-table-insert\">'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.rows + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" size=\"5\" value=\"2\" id=\"redactor_table_rows\" />'\n\t\t\t\t\t+ '<label>' + this.opts.curLang.columns + '</label>'\n\t\t\t\t\t+ '<input type=\"text\" size=\"5\" value=\"3\" id=\"redactor_table_columns\" />'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_table_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>',\n\n\t\t\t\tmodal_video: String()\n\t\t\t\t+ '<section id=\"redactor-modal-video-insert\">'\n\t\t\t\t\t+ '<form id=\"redactorInsertVideoForm\">'\n\t\t\t\t\t\t+ '<label>' + this.opts.curLang.video_html_code + '</label>'\n\t\t\t\t\t\t+ '<textarea id=\"redactor_insert_video_area\" style=\"width: 99%; height: 160px;\"></textarea>'\n\t\t\t\t\t+ '</form>'\n\t\t\t\t+ '</section>'\n\t\t\t\t+ '<footer>'\n\t\t\t\t\t+ '<button class=\"redactor_modal_btn redactor_btn_modal_close\">' + this.opts.curLang.cancel + '</button>'\n\t\t\t\t\t+ '<button id=\"redactor_insert_video_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">' + this.opts.curLang.insert + '</button>'\n\t\t\t\t+ '</footer>'\n\n\t\t\t});\n\t\t},\n\t\tmodalInit: function(title, content, width, callback)\n\t\t{\n\t\t\tthis.modalSetOverlay();\n\n\t\t\tthis.$redactorModalWidth = width;\n\t\t\tthis.$redactorModal = $('#redactor_modal');\n\n\t\t\tif (!this.$redactorModal.length)\n\t\t\t{\n\t\t\t\tthis.$redactorModal = $('<div id=\"redactor_modal\" style=\"display: none;\" />');\n\t\t\t\tthis.$redactorModal.append($('<div id=\"redactor_modal_close\">&times;</div>'));\n\t\t\t\tthis.$redactorModal.append($('<header id=\"redactor_modal_header\" />'));\n\t\t\t\tthis.$redactorModal.append($('<div id=\"redactor_modal_inner\" />'));\n\t\t\t\tthis.$redactorModal.appendTo(document.body);\n\t\t\t}\n\n\t\t\t$('#redactor_modal_close').on('click', $.proxy(this.modalClose, this));\n\t\t\t$(document).on('keyup', $.proxy(this.modalCloseHandler, this));\n\t\t\tthis.$editor.on('keyup', $.proxy(this.modalCloseHandler, this));\n\n\t\t\tthis.modalSetContent(content);\n\t\t\tthis.modalSetTitle(title);\n\t\t\tthis.modalSetDraggable();\n\t\t\tthis.modalLoadTabs();\n\t\t\tthis.modalOnCloseButton();\n\t\t\tthis.modalSetButtonsWidth();\n\n\t\t\tthis.saveModalScroll = this.document.body.scrollTop;\n\t\t\tif (this.opts.autoresize === false)\n\t\t\t{\n\t\t\t\tthis.saveModalScroll = this.$editor.scrollTop();\n\t\t\t}\n\n\t\t\tif (this.isMobile() === false) this.modalShowOnDesktop();\n\t\t\telse this.modalShowOnMobile();\n\t\t\tif (typeof callback === 'function')\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tthis.callback('modalOpened', this.$redactorModal);\n\n\t\t\t}, this), 11);\n\t\t\t$(document).off('focusin.modal');\n\t\t\tthis.$redactorModal.find('input[type=text]').on('keypress', $.proxy(function(e)\n\t\t\t{\n\t\t\t\tif (e.which === 13)\n\t\t\t\t{\n\t\t\t\t\tthis.$redactorModal.find('.redactor_modal_action_btn').trigger('click');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\treturn this.$redactorModal;\n\n\t\t},\n\t\tmodalShowOnDesktop: function()\n\t\t{\n\t\t\tthis.$redactorModal.css({\n\t\t\t\tposition: 'fixed',\n\t\t\t\ttop: '-2000px',\n\t\t\t\tleft: '50%',\n\t\t\t\twidth: this.$redactorModalWidth + 'px',\n\t\t\t\tmarginLeft: '-' + (this.$redactorModalWidth / 2) + 'px'\n\t\t\t}).show();\n\n\t\t\tthis.modalSaveBodyOveflow = $(document.body).css('overflow');\n\t\t\t$(document.body).css('overflow', 'hidden');\n\n\t\t\tsetTimeout($.proxy(function()\n\t\t\t{\n\t\t\t\tvar height = this.$redactorModal.outerHeight();\n\t\t\t\tthis.$redactorModal.css({\n\t\t\t\t\ttop: '50%',\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\tminHeight: 'auto',\n\t\t\t\t\tmarginTop: '-' + (height + 10) / 2 + 'px'\n\t\t\t\t});\n\t\t\t}, this), 15);\n\t\t},\n\t\tmodalShowOnMobile: function()\n\t\t{\n\t\t\tthis.$redactorModal.css({\n\t\t\t\tposition: 'fixed',\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: '0',\n\t\t\t\tmargin: '0',\n\t\t\t\tminHeight: '300px'\n\t\t\t}).show();\n\t\t},\n\t\tmodalSetContent: function(content)\n\t\t{\n\t\t\tthis.modalcontent = false;\n\t\t\tif (content.indexOf('#') == 0)\n\t\t\t{\n\t\t\t\tthis.modalcontent = $(content);\n\t\t\t\t$('#redactor_modal_inner').empty().append(this.modalcontent.html());\n\t\t\t\tthis.modalcontent.html('');\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('#redactor_modal_inner').empty().append(content);\n\t\t\t}\n\t\t},\n\t\tmodalSetTitle: function(title)\n\t\t{\n\t\t\tthis.$redactorModal.find('#redactor_modal_header').html(title);\n\t\t},\n\t\tmodalSetButtonsWidth: function(){},\n\t\tmodalOnCloseButton: function()\n\t\t{\n\t\t\tthis.$redactorModal.find('.redactor_btn_modal_close').on('click', $.proxy(this.modalClose, this));\n\t\t},\n\t\tmodalSetOverlay: function()\n\t\t{\n\t\t\tif (this.opts.modalOverlay)\n\t\t\t{\n\t\t\t\tthis.$redactorModalOverlay = $('#redactor_modal_overlay');\n\t\t\t\tif (!this.$redactorModalOverlay.length)\n\t\t\t\t{\n\t\t\t\t\tthis.$redactorModalOverlay = $('<div id=\"redactor_modal_overlay\" style=\"display: none;\"></div>');\n\t\t\t\t\t$('body').prepend(this.$redactorModalOverlay);\n\t\t\t\t}\n\n\t\t\t\tthis.$redactorModalOverlay.show().on('click', $.proxy(this.modalClose, this));\n\t\t\t}\n\t\t},\n\t\tmodalSetDraggable: function()\n\t\t{\n\t\t\tif (typeof $.fn.draggable !== 'undefined')\n\t\t\t{\n\t\t\t\tthis.$redactorModal.draggable({ handle: '#redactor_modal_header' });\n\t\t\t\tthis.$redactorModal.find('#redactor_modal_header').css('cursor', 'move');\n\t\t\t}\n\t\t},\n\t\tmodalLoadTabs: function()\n\t\t{\n\t\t\tvar $redactor_tabs = $('#redactor_tabs');\n\t\t\tif (!$redactor_tabs.length) return false;\n\n\t\t\tvar that = this;\n\t\t\t$redactor_tabs.find('a').each(function(i, s)\n\t\t\t{\n\t\t\t\ti++;\n\t\t\t\t$(s).on('click', function(e)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t$redactor_tabs.find('a').removeClass('redactor_tabs_act');\n\t\t\t\t\t$(this).addClass('redactor_tabs_act');\n\t\t\t\t\t$('.redactor_tab').hide();\n\t\t\t\t\t$('#redactor_tab' + i ).show();\n\t\t\t\t\t$('#redactor_tab_selected').val(i);\n\n\t\t\t\t\tif (that.isMobile() === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar height = that.$redactorModal.outerHeight();\n\t\t\t\t\t\tthat.$redactorModal.css('margin-top', '-' + (height + 10) / 2 + 'px');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t},\n\t\tmodalCloseHandler: function(e)\n\t\t{\n\t\t\tif (e.keyCode === this.keyCode.ESC)\n\t\t\t{\n\t\t\t\tthis.modalClose();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tmodalClose: function()\n\t\t{\n\t\t\t$('#redactor_modal_close').off('click', this.modalClose);\n\t\t\t$('#redactor_modal').fadeOut('fast', $.proxy(function()\n\t\t\t{\n\t\t\t\tvar redactorModalInner = $('#redactor_modal_inner');\n\n\t\t\t\tif (this.modalcontent !== false)\n\t\t\t\t{\n\t\t\t\t\tthis.modalcontent.html(redactorModalInner.html());\n\t\t\t\t\tthis.modalcontent = false;\n\t\t\t\t}\n\n\t\t\t\tredactorModalInner.html('');\n\n\t\t\t\tif (this.opts.modalOverlay)\n\t\t\t\t{\n\t\t\t\t\t$('#redactor_modal_overlay').hide().off('click', this.modalClose);\n\t\t\t\t}\n\n\t\t\t\t$(document).off('keyup', this.modalCloseHandler);\n\t\t\t\tthis.$editor.off('keyup', this.modalCloseHandler);\n\n\t\t\t\tthis.selectionRestore();\n\t\t\t\tif (this.opts.autoresize && this.saveModalScroll)\n\t\t\t\t{\n\t\t\t\t\t$(this.document.body).scrollTop(this.saveModalScroll);\n\t\t\t\t}\n\t\t\t\telse if (this.opts.autoresize === false && this.saveModalScroll)\n\t\t\t\t{\n\t\t\t\t\tthis.$editor.scrollTop(this.saveModalScroll);\n\t\t\t\t}\n\n\t\t\t\tthis.callback('modalClosed');\n\n\t\t\t}, this));\n\t\t\tif (this.isMobile() === false)\n\t\t\t{\n\t\t\t\t$(document.body).css('overflow', this.modalSaveBodyOveflow ? this.modalSaveBodyOveflow : 'visible');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tmodalSetTab: function(num)\n\t\t{\n\t\t\t$('.redactor_tab').hide();\n\t\t\t$('#redactor_tabs').find('a').removeClass('redactor_tabs_act').eq(num - 1).addClass('redactor_tabs_act');\n\t\t\t$('#redactor_tab' + num).show();\n\t\t},\n\t\ts3handleFileSelect: function(e)\n\t\t{\n\t\t\tvar files = e.target.files;\n\n\t\t\tfor (var i = 0, f; f = files[i]; i++)\n\t\t\t{\n\t\t\t\tthis.s3uploadFile(f);\n\t\t\t}\n\t\t},\n\t\ts3uploadFile: function(file)\n\t\t{\n\t\t\tthis.s3executeOnSignedUrl(file, $.proxy(function(signedURL)\n\t\t\t{\n\t\t\t\tthis.s3uploadToS3(file, signedURL);\n\t\t\t}, this));\n\t\t},\n\t\ts3executeOnSignedUrl: function(file, callback)\n\t\t{\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\tvar mark = '?';\n\t\t\tif (this.opts.s3.search(/\\?/) != '-1') mark = '&';\n\n\t\t\txhr.open('GET', this.opts.s3 + mark + 'name=' + file.name + '&type=' + file.type, true);\n\t\t\tif (xhr.overrideMimeType) xhr.overrideMimeType('text/plain; charset=x-user-defined');\n\n\t\t\tvar that = this;\n\t\t\txhr.onreadystatechange = function(e)\n\t\t\t{\n\t\t\t\tif (this.readyState == 4 && this.status == 200)\n\t\t\t\t{\n\t\t\t\t\tthat.showProgressBar();\n\t\t\t\t\tcallback(decodeURIComponent(this.responseText));\n\t\t\t\t}\n\t\t\t\telse if(this.readyState == 4 && this.status != 200)\n\t\t\t\t{\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.send();\n\t\t},\n\t\ts3createCORSRequest: function(method, url)\n\t\t{\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\tif (\"withCredentials\" in xhr)\n\t\t\t{\n\t\t\t\txhr.open(method, url, true);\n\t\t\t}\n\t\t\telse if (typeof XDomainRequest != \"undefined\")\n\t\t\t{\n\t\t\t\txhr = new XDomainRequest();\n\t\t\t\txhr.open(method, url);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\txhr = null;\n\t\t\t}\n\n\t\t\treturn xhr;\n\t\t},\n\t\ts3uploadToS3: function(file, url)\n\t\t{\n\t\t\tvar xhr = this.s3createCORSRequest('PUT', url);\n\t\t\tif (!xhr)\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\txhr.onload = $.proxy(function()\n\t\t\t\t{\n\t\t\t\t\tif (xhr.status == 200)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\t\t\tvar s3image = url.split('?');\n\n\t\t\t\t\t\tif (!s3image[0])\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t return false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.selectionRestore();\n\n\t\t\t\t\t\tvar html = '';\n\t\t\t\t\t\thtml = '<img id=\"image-marker\" src=\"' + s3image[0] + '\" />';\n\t\t\t\t\t\tif (this.opts.paragraphy) html = '<p>' + html + '</p>';\n\n\t\t\t\t\t\tthis.execCommand('inserthtml', html, false);\n\n\t\t\t\t\t\tvar image = $(this.$editor.find('img#image-marker'));\n\n\t\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\t\telse image = false;\n\n\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\tthis.callback('imageUpload', image, false);\n\n\t\t\t\t\t\tthis.modalClose();\n\t\t\t\t\t\tthis.observeImages();\n\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\txhr.onerror = function()\n\t\t\t\t{\n\n\t\t\t\t};\n\n\t\t\t\txhr.upload.onprogress = function(e)\n\t\t\t\t{\n\t\t\t\t\t/*\n\t\t\t\t\tif (e.lengthComputable)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar percentLoaded = Math.round((e.loaded / e.total) * 100);\n\t\t\t\t\t\tsetProgress(percentLoaded, percentLoaded == 100 ? 'Finalizing.' : 'Uploading.');\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t};\n\n\t\t\t\txhr.setRequestHeader('Content-Type', file.type);\n\t\t\t\txhr.setRequestHeader('x-amz-acl', 'public-read');\n\n\t\t\t\txhr.send(file);\n\t\t\t}\n\t\t},\n\t\tuploadInit: function(el, options)\n\t\t{\n\t\t\tthis.uploadOptions = {\n\t\t\t\turl: false,\n\t\t\t\tsuccess: false,\n\t\t\t\terror: false,\n\t\t\t\tstart: false,\n\t\t\t\ttrigger: false,\n\t\t\t\tauto: false,\n\t\t\t\tinput: false\n\t\t\t};\n\n\t\t\t$.extend(this.uploadOptions, options);\n\n\t\t\tvar $el = $('#' + el);\n\t\t\tif ($el.length && $el[0].tagName === 'INPUT')\n\t\t\t{\n\t\t\t\tthis.uploadOptions.input = $el;\n\t\t\t\tthis.el = $($el[0].form);\n\t\t\t}\n\t\t\telse this.el = $el;\n\n\t\t\tthis.element_action = this.el.attr('action');\n\t\t\tif (this.uploadOptions.auto)\n\t\t\t{\n\t\t\t\t$(this.uploadOptions.input).change($.proxy(function(e)\n\t\t\t\t{\n\t\t\t\t\tthis.el.submit(function(e)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.uploadSubmit(e);\n\n\t\t\t\t}, this));\n\n\t\t\t}\n\t\t\telse if (this.uploadOptions.trigger)\n\t\t\t{\n\t\t\t\t$('#' + this.uploadOptions.trigger).on('click', $.proxy(this.uploadSubmit, this));\n\t\t\t}\n\t\t},\n\t\tuploadSubmit: function(e)\n\t\t{\n\t\t\tthis.showProgressBar();\n\t\t\tthis.uploadForm(this.element, this.uploadFrame());\n\t\t},\n\t\tuploadFrame: function()\n\t\t{\n\t\t\tthis.id = 'f' + Math.floor(Math.random() * 99999);\n\n\t\t\tvar d = this.document.createElement('div');\n\t\t\tvar iframe = '<iframe style=\"display:none\" id=\"' + this.id + '\" name=\"' + this.id + '\"></iframe>';\n\n\t\t\td.innerHTML = iframe;\n\t\t\t$(d).appendTo(\"body\");\n\t\t\tif (this.uploadOptions.start) this.uploadOptions.start();\n\n\t\t\t$( '#' + this.id ).one('load', $.proxy(this.uploadLoaded, this));\n\n\t\t\treturn this.id;\n\t\t},\n\t\tuploadForm: function(f, name)\n\t\t{\n\t\t\tif (this.uploadOptions.input)\n\t\t\t{\n\t\t\t\tvar formId = 'redactorUploadForm' + this.id,\n\t\t\t\t\tfileId = 'redactorUploadFile' + this.id;\n\n\t\t\t\tthis.form = $('<form  action=\"' + this.uploadOptions.url + '\" method=\"POST\" target=\"' + name + '\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\" />');\n\t\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t\t{\n\t\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\n\t\t\t\t\t\tvar hidden = $('<input/>', {\n\t\t\t\t\t\t\t'type': \"hidden\",\n\t\t\t\t\t\t\t'name': k,\n\t\t\t\t\t\t\t'value': v\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$(this.form).append(hidden);\n\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\tvar oldElement = this.uploadOptions.input;\n\t\t\t\tvar newElement = $(oldElement).clone();\n\n\t\t\t\t$(oldElement).attr('id', fileId).before(newElement).appendTo(this.form);\n\n\t\t\t\t$(this.form).css('position', 'absolute')\n\t\t\t\t\t\t.css('top', '-2000px')\n\t\t\t\t\t\t.css('left', '-2000px')\n\t\t\t\t\t\t.appendTo('body');\n\n\t\t\t\tthis.form.submit();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tf.attr('target', name)\n\t\t\t\t\t.attr('method', 'POST')\n\t\t\t\t\t.attr('enctype', 'multipart/form-data')\n\t\t\t\t\t.attr('action', this.uploadOptions.url);\n\n\t\t\t\tthis.element.submit();\n\t\t\t}\n\t\t},\n\t\tuploadLoaded: function()\n\t\t{\n\t\t\tvar i = $( '#' + this.id)[0], d;\n\n\t\t\tif (i.contentDocument) d = i.contentDocument;\n\t\t\telse if (i.contentWindow) d = i.contentWindow.document;\n\t\t\telse d = window.frames[this.id].document;\n\t\t\tif (this.uploadOptions.success)\n\t\t\t{\n\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\tif (typeof d !== 'undefined')\n\t\t\t\t{\n\n\t\t\t\t\tvar rawString = d.body.innerHTML;\n\t\t\t\t\tvar jsonString = rawString.match(/\\{(.|\\n)*\\}/)[0];\n\n\t\t\t\t\tjsonString = jsonString.replace(/^\\[/, '');\n\t\t\t\t\tjsonString = jsonString.replace(/\\]$/, '');\n\n\t\t\t\t\tvar json = $.parseJSON(jsonString);\n\n\t\t\t\t\tif (typeof json.error == 'undefined') { this.uploadOptions.success(json); }\n\t\t\t\t\telse\n\t\t\t\t\t{\n                        console.log(json);\n\t\t\t\t\t\tthis.uploadOptions.error(this, json);\n\t\t\t\t\t\tthis.modalClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.modalClose();\n\t\t\t\t\talert('Upload failed!');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.el.attr('action', this.element_action);\n\t\t\tthis.el.attr('target', '');\n\t\t},\n\t\tdraguploadInit: function (el, options)\n\t\t{\n\t\t\tthis.draguploadOptions = $.extend({\n\t\t\t\turl: false,\n\t\t\t\tsuccess: false,\n\t\t\t\terror: false,\n\t\t\t\tpreview: false,\n\t\t\t\tuploadFields: false,\n\t\t\t\ttext: this.opts.curLang.drop_file_here,\n\t\t\t\tatext: this.opts.curLang.or_choose,\n\t\t\t\tuploadParam: false\n\t\t\t}, options);\n\n\t\t\tif (window.FormData === undefined) return false;\n\n\t\t\tthis.droparea = $('<div class=\"redactor_droparea\"></div>');\n\t\t\tthis.dropareabox = $('<div class=\"redactor_dropareabox\">' + this.draguploadOptions.text + '</div>');\n\t\t\tthis.dropalternative = $('<div class=\"redactor_dropalternative\">' + this.draguploadOptions.atext + '</div>');\n\n\t\t\tthis.droparea.append(this.dropareabox);\n\n\t\t\t$(el).before(this.droparea);\n\t\t\t$(el).before(this.dropalternative);\n\t\t\tthis.dropareabox.on('dragover', $.proxy(function()\n\t\t\t{\n\t\t\t\treturn this.draguploadOndrag();\n\n\t\t\t}, this));\n\t\t\tthis.dropareabox.on('dragleave', $.proxy(function()\n\t\t\t{\n\t\t\t\treturn this.draguploadOndragleave();\n\n\t\t\t}, this));\n\t\t\tthis.dropareabox.get(0).ondrop = $.proxy(function(e)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.dropareabox.removeClass('hover').addClass('drop');\n\t\t\t\tthis.showProgressBar();\n                                for(var nmb in e.dataTransfer.files){\n                                    if(!e.dataTransfer.files.hasOwnProperty(nmb))continue;\n                                    this.dragUploadAjax(this.draguploadOptions.url, e.dataTransfer.files[nmb], false, e, this.draguploadOptions.uploadParam);\n                                }\n\n\t\t\t}, this );\n\t\t},\n\t\tdragUploadAjax: function(url, file, directupload, e, uploadParam)\n\t\t{\n\t\t\tif (!directupload)\n\t\t\t{\n\t\t\t\tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\tif (xhr.upload)\n\t\t\t\t{\n\t\t\t\t\txhr.upload.addEventListener('progress', $.proxy(this.uploadProgress, this), false);\n\t\t\t\t}\n\n\t\t\t\t$.ajaxSetup({\n\t\t\t\t  xhr: function () { return xhr; }\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.callback('drop', e);\n\n\t\t\tvar fd = new FormData();\n\t\t\tif (uploadParam !== false)\n\t\t\t{\n\t\t\t\tfd.append(uploadParam, file);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfd.append('file', file);\n\t\t\t}\n\t\t\tif (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')\n\t\t\t{\n\t\t\t\t$.each(this.opts.uploadFields, $.proxy(function(k, v)\n\t\t\t\t{\n\t\t\t\t\tif (v != null && v.toString().indexOf('#') === 0) v = $(v).val();\n\t\t\t\t\tfd.append(k, v);\n\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: url,\n\t\t\t\tdataType: 'html',\n                                async: false,\n\t\t\t\tdata: fd,\n\t\t\t\tcache: false,\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tsuccess: $.proxy(function(data)\n\t\t\t\t{\n\t\t\t\t\tdata = data.replace(/^\\[/, '');\n\t\t\t\t\tdata = data.replace(/\\]$/, '');\n\n\t\t\t\t\tvar json = (typeof data === 'string' ? $.parseJSON(data) : data);\n\n\t\t\t\t\tthis.hideProgressBar();\n\n\t\t\t\t\tif (directupload)\n\t\t\t\t\t{\n\t\t\t\t\t    var $img = $('<img>');\n\t\t\t\t\t\t$img.attr('src', json.image.url).attr('id', 'drag-image-marker');\n\n\t\t\t\t\t\tthis.insertNodeToCaretPositionFromPoint(e, $img[0]);\n\n\t\t\t\t\t\tvar image = $(this.$editor.find('img#drag-image-marker'));\n\t\t\t\t\t\tif (image.length) image.removeAttr('id');\n\t\t\t\t\t\telse image = false;\n\n\t\t\t\t\t\tthis.sync();\n\t\t\t\t\t\tthis.observeImages();\n\t\t\t\t\t\tif (image) this.callback('imageUpload', image, json);\n\t\t\t\t\t\tif (typeof json.error !== 'undefined') this.callback('imageUploadError', json);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof json.error == 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadOptions.success(json);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.draguploadOptions.error(this, json);\n\t\t\t\t\t\t\tthis.draguploadOptions.success(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}, this)\n\t\t\t});\n\t\t},\n\t\tdraguploadOndrag: function()\n\t\t{\n\t\t\tthis.dropareabox.addClass('hover');\n\t\t\treturn false;\n\t\t},\n\t\tdraguploadOndragleave: function()\n\t\t{\n\t\t\tthis.dropareabox.removeClass('hover');\n\t\t\treturn false;\n\t\t},\n\t\tuploadProgress: function(e, text)\n\t\t{\n\t\t\tvar percent = e.loaded ? parseInt(e.loaded / e.total * 100, 10) : e;\n\t\t\tthis.dropareabox.text('Loading ' + percent + '% ' + (text || ''));\n\t\t},\n\t\tisMobile: function()\n\t\t{\n\t\t\treturn /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);\n\t\t},\n\t\tisIPad: function()\n\t\t{\n\t\t\treturn /iPad/.test(navigator.userAgent);\n\t\t},\n\t\tnormalize: function(str)\n\t\t{\n\t\t\tif (typeof(str) === 'undefined') return 0;\n\t\t\treturn parseInt(str.replace('px',''), 10);\n\t\t},\n\t\touterHtml: function(el)\n\t\t{\n\t\t\treturn $('<div>').append($(el).eq(0).clone()).html();\n\t\t},\n\t\tstripHtml: function(html)\n\t\t{\n\t\t\tvar tmp = document.createElement(\"DIV\");\n\t\t\ttmp.innerHTML = html;\n\t\t\treturn tmp.textContent || tmp.innerText || \"\";\n\t\t},\n\t\tisString: function(obj)\n\t\t{\n\t\t\treturn Object.prototype.toString.call(obj) == '[object String]';\n\t\t},\n\t\tisEmpty: function(html)\n\t\t{\n\t\t\thtml = html.replace(/&#x200b;|<br>|<br\\/>|&nbsp;/gi, '');\n\t\t\thtml = html.replace(/\\s/g, '');\n\t\t\thtml = html.replace(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i, '');\n\n\t\t\treturn html == '';\n\t\t},\n\t\tgetInternetExplorerVersion: function()\n\t\t{\n\t\t\tvar rv = false;\n\t\t\tif (navigator.appName == 'Microsoft Internet Explorer')\n\t\t\t{\n\t\t\t\tvar ua = navigator.userAgent;\n\t\t\t\tvar re  = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n\t\t\t\tif (re.exec(ua) != null)\n\t\t\t\t{\n\t\t\t\t\trv = parseFloat(RegExp.$1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn rv;\n\t\t},\n\t\tisIe11: function()\n\t\t{\n\t\t\treturn !!navigator.userAgent.match(/Trident\\/7\\./);\n\t\t},\n\t\tbrowser: function(browser)\n\t\t{\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\n\t\t\tvar match = /(opr)[\\/]([\\w.]+)/.exec( ua ) ||\n            /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(webkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\n            /(msie) ([\\w.]+)/.exec( ua ) ||\n            ua.indexOf(\"trident\") >= 0 && /(rv)(?::| )([\\w.]+)/.exec( ua ) ||\n            ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\n            [];\n\n\t\t\tif (browser == 'version') return match[2];\n\t\t\tif (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'webkit');\n\t\t\tif (match[1] == 'rv') return browser == 'msie';\n\t\t\tif (match[1] == 'opr') return browser == 'webkit';\n\n\t\t\treturn browser == match[1];\n\n\t\t},\n\t\toldIE: function()\n\t\t{\n\t\t\tif (this.browser('msie') && parseInt(this.browser('version'), 10) < 9) return true;\n\t\t\treturn false;\n\t\t},\n\t\tgetFragmentHtml: function (fragment)\n\t\t{\n\t\t\tvar cloned = fragment.cloneNode(true);\n\t\t\tvar div = this.document.createElement('div');\n\n\t\t\tdiv.appendChild(cloned);\n\t\t\treturn div.innerHTML;\n\t\t},\n\t\textractContent: function()\n\t\t{\n\t\t\tvar node = this.$editor[0];\n\t\t\tvar frag = this.document.createDocumentFragment();\n\t\t\tvar child;\n\n\t\t\twhile ((child = node.firstChild))\n\t\t\t{\n\t\t\t\tfrag.appendChild(child);\n\t\t\t}\n\n\t\t\treturn frag;\n\t\t},\n\t\tisParentRedactor: function(el)\n\t\t{\n\t\t\tif (!el) return false;\n\t\t\tif (this.opts.iframe) return el;\n\n\t\t\tif ($(el).parents('div.redactor_editor').length == 0 || $(el).hasClass('redactor_editor')) return false;\n\t\t\telse return el;\n\t\t},\n\t\tcurrentOrParentIs: function(tagName)\n\t\t{\n\t\t\tvar parent = this.getParent(), current = this.getCurrent();\n\t\t\treturn parent && parent.tagName === tagName ? parent : current && current.tagName === tagName ? current : false;\n\t\t},\n\t\tisEndOfElement: function()\n\t\t{\n\t\t\tvar current = this.getBlock();\n\t\t\tvar offset = this.getCaretOffset(current);\n\n\t\t\tvar text = $.trim($(current).text()).replace(/\\n\\r\\n/g, '');\n\n\t\t\tvar len = text.length;\n\n\t\t\tif (offset == len) return true;\n\t\t\telse return false;\n\t\t},\n\t\tisFocused: function()\n\t\t{\n\t\t\tvar el, sel = this.getSelection();\n\n\t\t\tif (sel && sel.rangeCount && sel.rangeCount > 0) el = sel.getRangeAt(0).startContainer;\n\t\t\tif (!el) return false;\n\t\t\tif (this.opts.iframe)\n\t\t\t{\n\t\t\t\tif (this.getCaretOffsetRange().equals()) return !this.$editor.is(el);\n\t\t\t\telse return true;\n\t\t\t}\n\n\t\t\treturn $(el).closest('div.redactor_editor').length != 0;\n\t\t},\n\t\tremoveEmptyAttr: function (el, attr)\n\t\t{\n\t\t\tif ($(el).attr(attr) == '') $(el).removeAttr(attr);\n\t\t},\n\t\tremoveFromArrayByValue: function(array, value)\n\t\t{\n\t\t\tvar index = null;\n\n\t\t\twhile ((index = array.indexOf(value)) !== -1)\n\t\t\t{\n\t\t\t\tarray.splice(index, 1);\n\t\t\t}\n\n\t\t\treturn array;\n\t\t}\n\n\t};\n\tRedactor.prototype.init.prototype = Redactor.prototype;\n\t$.Redactor.fn.formatLinkify = function(protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize)\n\t{\n\t\tvar url = /(((https?|ftps?):\\/\\/)|www[.][^\\s])(.+?\\..+?)([.),]?)(\\s|\\.\\s+|\\)|$)/gi,\n\t\t\trProtocol = /(https?|ftp):\\/\\//i,\n\t\t\turlImage = /(https?:\\/\\/.*\\.(?:png|jpg|jpeg|gif))/gi;\n\n\t\tvar childNodes = (this.$editor ? this.$editor.get(0) : this).childNodes, i = childNodes.length;\n\t\twhile (i--)\n\t\t{\n\t\t\tvar n = childNodes[i];\n\t\t\tif (n.nodeType === 3)\n\t\t\t{\n\t\t\t\tvar html = n.nodeValue;\n\t\t\t\tif (convertVideoLinks && html)\n\t\t\t\t{\n\t\t\t\t\tvar iframeStart = '<iframe width=\"500\" height=\"281\" src=\"',\n\t\t\t\t\t\tiframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n\t\t\t\t\tif (html.match(reUrlYoutube))\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(reUrlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\n\t\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t\t}\n\t\t\t\t\telse if (html.match(reUrlVimeo))\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = html.replace(reUrlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\n\t\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (convertImageLinks && html && html.match(urlImage))\n\t\t\t\t{\n\t\t\t\t\thtml = html.replace(urlImage, '<img src=\"$1\">');\n\n\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t}\n\t\t\t\tif (convertLinks && html && html.match(url))\n\t\t\t\t{\n\t\t\t\t\tvar matches = html.match(url);\n\n\t\t\t\t\tfor (var i in matches)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar href = matches[i];\n\t\t\t\t\t\tvar text = href;\n\n\t\t\t\t\t\tvar space = '';\n\t\t\t\t\t\tif (href.match(/\\s$/) !== null) space = ' ';\n\n\t\t\t\t\t\tvar addProtocol = protocol;\n\t\t\t\t\t\tif (href.match(rProtocol) !== null) addProtocol = '';\n\n\t\t\t\t\t\tif (text.length > linkSize) text = text.substring(0, linkSize) + '...';\n\n\t\t\t\t\t\ttext = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tTo handle URLs which may have $ characters in them, need to escape $ -> $$ to prevent $1 from getting treated as a backreference.\n\t\t\t\t\t\t\tSee http://gotofritz.net/blog/code-snippets/escaping-in-replace-strings-in-javascript/\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tvar escapedBackReferences = text.replace('$', '$$$');\n\n\t\t\t\t\t\thtml = html.replace(href, '<a href=\\\"' + addProtocol + $.trim(href) + '\\\">' + $.trim(escapedBackReferences) + '</a>' + space);\n\t\t\t\t\t}\n\n\t\t\t\t\t$(n).after(html).remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (n.nodeType === 1 && !/^(a|button|textarea)$/i.test(n.tagName))\n\t\t\t{\n\t\t\t\t$.Redactor.fn.formatLinkify.call(n, protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize);\n\t\t\t}\n\t\t}\n\t};\n\n})(jQuery);", "/* Redactor v9.2.7 */\n(function($){var uuid=0,Range=function(t){return this[0]=t.startOffset,this[1]=t.endOffset,this.range=t,this};Range.prototype.equals=function(){return this[0]===this[1]};var reUrlYoutube=/https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/gi,reUrlVimeo=/https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/,reUrlFacebook=/^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:facebook\\.com(?:\\/[^\\/]+\\/videos\\/|\\/video\\.php\\?v=))([0-9]+)(?:.+)?$/,reUrlRutube=/^(?:(?:https|http)?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru\\/video\\/)([a-z0-9]+)(?:.+)?$/;function Redactor(t,e){return new Redactor.prototype.init(t,e)}$.fn.redactor=function(t){var e=[],i=Array.prototype.slice.call(arguments,1);return\"string\"==typeof t?this.each((function(){var s=$.data(this,\"redactor\");if(void 0===s||!$.isFunction(s[t]))return $.error('No such method \"'+t+'\" for Redactor');var o=s[t].apply(s,i);void 0!==o&&o!==s&&e.push(o)})):this.each((function(){$.data(this,\"redactor\")||$.data(this,\"redactor\",Redactor(this,t))})),0===e.length?this:1===e.length?e[0]:e},$.Redactor=Redactor,$.Redactor.VERSION=\"9.2.6\",$.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:\"en\",direction:\"ltr\",placeholder:!1,typewriter:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,cleanSpaces:!0,cleanFontTag:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:{\"ctrl+m, meta+m\":\"this.execCommand('removeFormat', false)\",\"ctrl+b, meta+b\":\"this.execCommand('bold', false)\",\"ctrl+i, meta+i\":\"this.execCommand('italic', false)\",\"ctrl+h, meta+h\":\"this.execCommand('superscript', false)\",\"ctrl+l, meta+l\":\"this.execCommand('subscript', false)\",\"ctrl+k, meta+k\":\"this.linkShow()\",\"ctrl+shift+7\":\"this.execCommand('insertorderedlist', false)\",\"ctrl+shift+8\":\"this.execCommand('insertunorderedlist', false)\"},shortcutsAdd:!1,autosave:!1,autosaveInterval:60,plugins:!1,linkProtocol:\"http://\",linkNofollow:!1,linkSize:50,predefinedLinks:!1,imageFloatMargin:\"10px\",imageGetJson:!1,dragUpload:!0,imageTabLink:!0,imageUpload:!1,imageUploadParam:\"file\",imageResizable:!0,fileUpload:!1,fileUploadParam:\"file\",clipboardUpload:!0,clipboardUploadUrl:!1,smilesUrl:\"\",dnbImageTypes:[\"image/png\",\"image/jpeg\",\"image/gif\"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:[\"formatting\",\"bold\",\"italic\",\"deleted\",\"unorderedlist\",\"orderedlist\",\"outdent\",\"indent\"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,toolbarOverflow:!1,buttonSource:!0,buttons:[\"html\",\"undo\",\"redo\",\"formatting\",\"bold\",\"italic\",\"deleted\",\"unorderedlist\",\"orderedlist\",\"outdent\",\"indent\",\"image\",\"video\",\"file\",\"table\",\"link\",\"alignment\",\"|\",\"horizontalrule\"],buttonsHideOnMobile:[],activeButtons:[\"deleted\",\"italic\",\"bold\",\"underline\",\"unorderedlist\",\"orderedlist\",\"alignleft\",\"aligncenter\",\"alignright\",\"justify\",\"table\"],activeButtonsStates:{b:\"bold\",strong:\"bold\",i:\"italic\",em:\"italic\",del:\"deleted\",strike:\"deleted\",ul:\"unorderedlist\",ol:\"orderedlist\",u:\"underline\",tr:\"table\",td:\"table\",table:\"table\"},formattingTags:[\"p\",\"blockquote\",\"code\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:[\"html\",\"head\",\"link\",\"body\",\"meta\",\"script\",\"style\",\"applet\"],boldTag:\"strong\",italicTag:\"em\",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:\"<p>&#x200b;</p>\",invisibleSpace:\"&#x200b;\",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:[\"P\",\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"DD\",\"DL\",\"DT\",\"DIV\",\"TD\",\"BLOCKQUOTE\",\"OUTPUT\",\"FIGCAPTION\",\"ADDRESS\",\"SECTION\",\"HEADER\",\"FOOTER\",\"ASIDE\",\"ARTICLE\"],ownLine:[\"area\",\"body\",\"head\",\"hr\",\"i?frame\",\"link\",\"meta\",\"noscript\",\"style\",\"script\",\"table\",\"tbody\",\"thead\",\"tfoot\"],contOwnLine:[\"li\",\"dt\",\"dt\",\"h[1-6]\",\"option\",\"script\"],newLevel:[\"blockquote\",\"div\",\"dl\",\"fieldset\",\"form\",\"frameset\",\"map\",\"ol\",\"p\",\"code\",\"select\",\"td\",\"th\",\"tr\",\"ul\"],blockLevelElements:[\"P\",\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"DD\",\"DL\",\"DT\",\"DIV\",\"LI\",\"BLOCKQUOTE\",\"OUTPUT\",\"FIGCAPTION\",\"CODE\",\"ADDRESS\",\"SECTION\",\"HEADER\",\"FOOTER\",\"ASIDE\",\"ARTICLE\",\"TD\"],langs:{en:{html:\"HTML\",video:\"Insert Video\",image:\"Insert Image\",table:\"Table\",link:\"Link\",link_insert:\"Insert link\",link_edit:\"Edit link\",unlink:\"Unlink\",formatting:\"Formatting\",paragraph:\"Normal text\",quote:\"Quote\",code:\"Code\",header1:\"Header 1\",header2:\"Header 2\",header3:\"Header 3\",header4:\"Header 4\",header5:\"Header 5\",bold:\"Bold\",italic:\"Italic\",fontcolor:\"Font Color\",backcolor:\"Back Color\",unorderedlist:\"Unordered List\",orderedlist:\"Ordered List\",outdent:\"Outdent\",indent:\"Indent\",cancel:\"Cancel\",insert:\"Insert\",save:\"Save\",_delete:\"Delete\",insert_table:\"Insert Table\",insert_row_above:\"Add Row Above\",insert_row_below:\"Add Row Below\",insert_column_left:\"Add Column Left\",insert_column_right:\"Add Column Right\",delete_column:\"Delete Column\",delete_row:\"Delete Row\",delete_table:\"Delete Table\",rows:\"Rows\",columns:\"Columns\",add_head:\"Add Head\",delete_head:\"Delete Head\",title:\"Title\",image_position:\"Position\",none:\"None\",left:\"Left\",right:\"Right\",center:\"Center\",image_web_link:\"Image Web Link\",text:\"Text\",mailto:\"Email\",web:\"URL\",video_html_code:\"Video Embed Code\",file:\"Insert File\",upload:\"Upload\",download:\"Download\",choose:\"Choose\",empty_img_list:\"You have no images\",or_choose:\"Or choose\",drop_file_here:\"Drop file here\",align_left:\"Align text to the left\",align_center:\"Center text\",align_right:\"Align text to the right\",align_justify:\"Justify text\",horizontalrule:\"Insert Horizontal Rule\",fullscreen:\"Full screen\",fontsize:\"Font size\",fontfamily:\"Font\",remove_font:\"Clear Font\",image_save_toserver:\"Save to the server?\",deleted:\"Deleted\",anchor:\"Anchor\",link_new_tab:\"Open link in new tab\",underline:\"Underline\",alignment:\"Alignment\",filename:\"Name (optional)\",edit:\"Edit\",spoiler:\"Spoiler\",spoiler_name:\"Spoiler name\",spoiler_text:\"Spoiler text\",smiles:\"Smiles\",undo:\"Undo\",redo:\"Redo\",formalize:\"Formalize\"}}},Redactor.fn=$.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(t,e){this.rtePaste=!1,this.$element=this.$source=$(t),this.uuid=uuid++;var i=$.extend(!0,{},$.Redactor.opts);if(this.opts=$.extend({},i,this.$element.data(),e),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css(\"height\"),this.sourceWidth=this.$source.css(\"width\"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=new RegExp(\"^<(/?\"+this.opts.ownLine.join(\"|/?\")+\"|\"+this.opts.contOwnLine.join(\"|\")+\")[ >]\"),this.cleanlineAfter=new RegExp(\"^<(br|/?\"+this.opts.ownLine.join(\"|/?\")+\"|/\"+this.opts.contOwnLine.join(\"|/\")+\")[ >]\"),this.cleannewLevel=new RegExp(\"^</?(\"+this.opts.newLevel.join(\"|\")+\")[ >]\"),this.rTestBlock=new RegExp(\"^(\"+this.opts.blockLevelElements.join(\"|\")+\")$\",\"i\"),!1===this.opts.linebreaks){if(!1!==this.opts.allowedTags){var s=[\"strong\",\"em\",\"del\"],o=[\"b\",\"i\",\"strike\"];\"-1\"===$.inArray(\"p\",this.opts.allowedTags)&&this.opts.allowedTags.push(\"p\");for(let t in s)\"-1\"!=$.inArray(s[t],this.opts.allowedTags)&&this.opts.allowedTags.push(o[t])}if(!1!==this.opts.deniedTags){var r=$.inArray(\"p\",this.opts.deniedTags);\"-1\"!==r&&this.opts.deniedTags.splice(r,r)}}(this.browser(\"msie\")||this.browser(\"opera\"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,\"horizontalrule\")),this.opts.curLang=this.opts.langs[this.opts.lang],$.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.placeholderInit(),this.buildStart()},toolbarInit:function(t){return{html:{title:t.html,func:\"toggle\"},undo:{title:t.undo,func:\"bufferUndo\"},redo:{title:t.redo,func:\"bufferRedo\"},formatting:{title:t.formatting,func:\"show\",dropdown:{p:{title:t.paragraph,func:\"formatBlocks\"},blockquote:{title:t.quote,func:\"formatQuote\",className:\"redactor_format_blockquote\"},code:{title:t.code,func:\"formatBlocks\",className:\"redactor_format_code\"},h1:{title:t.header1,func:\"formatBlocks\",className:\"redactor_format_h1\"},h2:{title:t.header2,func:\"formatBlocks\",className:\"redactor_format_h2\"},h3:{title:t.header3,func:\"formatBlocks\",className:\"redactor_format_h3\"},h4:{title:t.header4,func:\"formatBlocks\",className:\"redactor_format_h4\"},h5:{title:t.header5,func:\"formatBlocks\",className:\"redactor_format_h5\"}}},bold:{title:t.bold,exec:\"bold\"},italic:{title:t.italic,exec:\"italic\"},deleted:{title:t.deleted,exec:\"strikethrough\"},underline:{title:t.underline,exec:\"underline\"},unorderedlist:{title:\"&bull; \"+t.unorderedlist,exec:\"insertunorderedlist\"},orderedlist:{title:\"1. \"+t.orderedlist,exec:\"insertorderedlist\"},outdent:{title:\"< \"+t.outdent,func:\"indentingOutdent\"},indent:{title:\"> \"+t.indent,func:\"indentingIndent\"},image:{title:t.image,func:\"imageShow\"},video:{title:t.video,func:\"videoShow\"},file:{title:t.file,func:\"fileShow\"},table:{title:t.table,func:\"show\",dropdown:{insert_table:{title:t.insert_table,func:\"tableShow\"},separator_drop1:{name:\"separator\"},insert_row_above:{title:t.insert_row_above,func:\"tableAddRowAbove\"},insert_row_below:{title:t.insert_row_below,func:\"tableAddRowBelow\"},insert_column_left:{title:t.insert_column_left,func:\"tableAddColumnLeft\"},insert_column_right:{title:t.insert_column_right,func:\"tableAddColumnRight\"},separator_drop2:{name:\"separator\"},add_head:{title:t.add_head,func:\"tableAddHead\"},delete_head:{title:t.delete_head,func:\"tableDeleteHead\"},separator_drop3:{name:\"separator\"},delete_column:{title:t.delete_column,func:\"tableDeleteColumn\"},delete_row:{title:t.delete_row,func:\"tableDeleteRow\"},delete_table:{title:t.delete_table,func:\"tableDeleteTable\"}}},link:{title:t.link,func:\"show\",dropdown:{link:{title:t.link_insert,func:\"linkShow\"},unlink:{title:t.unlink,exec:\"unlink\"}}},alignment:{title:t.alignment,func:\"show\",dropdown:{alignleft:{title:t.align_left,func:\"alignmentLeft\"},aligncenter:{title:t.align_center,func:\"alignmentCenter\"},alignright:{title:t.align_right,func:\"alignmentRight\"},justify:{title:t.align_justify,func:\"alignmentJustify\"}}},alignleft:{title:t.align_left,func:\"alignmentLeft\"},aligncenter:{title:t.align_center,func:\"alignmentCenter\"},alignright:{title:t.align_right,func:\"alignmentRight\"},alignjustify:{title:t.align_justify,func:\"alignmentJustify\"},horizontalrule:{exec:\"inserthorizontalrule\",title:t.horizontalrule}}},callback:function(t,e,i){var s=this.opts[t+\"Callback\"];return $.isFunction(s)?!1===e?s.call(this,i):s.call(this,e,i):i},destroy:function(){clearInterval(this.autosaveInterval),$(window).off(\".redactor\"),this.$source.off(\"redactor-textarea\"),this.$element.off(\".redactor\").removeData(\"redactor\");var t=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(t).show();else{var e=this.$editor;this.opts.iframe&&(e=this.$element),this.$box.after(e),this.$box.remove(),e.removeClass(\"redactor_editor\").removeClass(\"redactor_editor_wym\").removeAttr(\"contenteditable\").html(t).show()}this.opts.toolbarExternal&&$(this.opts.toolbarExternal).html(\"\"),this.opts.air&&$(\"#redactor_air_\"+this.uuid).remove()},getObject:function(){return $.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return!!this.opts.iframe&&this.$frame},getToolbar:function(){return!!this.$toolbar&&this.$toolbar},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr(\"contenteditable\").removeAttr(\"dir\");var t=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),t},set:function(t,e,i){t=(t=t.toString()).replace(/\\$/g,\"&#36;\"),this.opts.fullpage?this.setCodeIframe(t):this.setEditor(t,e),\"\"==t&&(i=!1),!1!==i&&this.placeholderRemoveFromEditor()},setEditor:function(t,e){t=this.sanitizeHTML(t),!1!==e&&(t=this.cleanSavePreCode(t),t=this.cleanStripTags(t),t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t,!0),t=!1===this.opts.linebreaks?this.cleanConverters(t):t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),t=t.replace(/&amp;#36;/g,\"$\"),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},sanitizeHTML:function(t){if(0===t.length)return t;function e(t){let e=t.attributes;for(let{name:s,value:o}of e)i(s,o)&&t.removeAttribute(s)}function i(t,e){let i=e.replace(/\\s+/g,\"\").toLowerCase();return!(![\"src\",\"href\",\"xlink:href\"].includes(t)||!i.includes(\"javascript:\")&&!i.includes(\"data:text/html\"))||(!!t.startsWith(\"on\")||void 0)}let s=(new DOMParser).parseFromString(t,\"text/html\").body;return function t(i){let s=i.children;for(let i of s)e(i),t(i)}(s),s.innerHTML},setCodeIframe:function(t){var e=this.iframePage();this.$frame[0].src=\"about:blank\",t=this.cleanConvertProtected(t),t=this.cleanConvertInlineTags(t),t=this.cleanRemoveSpaces(t),e.open(),e.write(t),e.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find(\"body\").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(t){t=this.sanitizeHTML(t),this.fullpageDoctype=t.match(/^<\\!doctype[^>]*>/i),this.fullpageDoctype&&1==this.fullpageDoctype.length&&(t=t.replace(/^<\\!doctype[^>]*>/i,\"\")),t=this.cleanSavePreCode(t,!0),t=this.cleanConverters(t),t=this.cleanEmpty(t),this.$editor.html(t),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageDoctype:function(){if(this.fullpageDoctype&&1==this.fullpageDoctype.length){var t=this.fullpageDoctype[0]+\"\\n\"+this.$source.val();this.$source.val(t)}},setSpansVerified:function(){var t=this.$editor.find(\"span\"),e=\"inline\";$.each(t,(function(){var t=this.outerHTML,i=new RegExp(\"<\"+this.tagName,\"gi\"),s=t.replace(i,\"<\"+e);i=new RegExp(\"</\"+this.tagName,\"gi\"),s=s.replace(i,\"</\"+e),$(this).replaceWith(s)}))},setSpansVerifiedHtml:function(t){return(t=t.replace(/<span(.*?)>/,\"<inline$1>\")).replace(/<\\/span>/,\"</inline>\")},setNonEditable:function(){this.$editor.find(\".noneditable\").attr(\"contenteditable\",!1)},sync:function(t){var e=\"\";if(this.cleanUnverified(),e=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),e=this.syncClean(e),e=this.cleanRemoveEmptyTags(e),this.cleanRemoveSpaces(this.$source.val(),!1)==this.cleanRemoveSpaces(e,!1))return!1;if(e=e.replace(/<\\/li><(ul|ol)>([\\w\\W]*?)<\\/(ul|ol)>/gi,\"<$1>$2</$1></li>\"),\"<br>\"===$.trim(e)&&(e=\"\"),this.opts.xhtml){$.each([\"br\",\"hr\",\"img\",\"link\",\"input\",\"meta\"],(function(t,i){e=e.replace(new RegExp(\"<\"+i+\"(.*?[^/$]?)>\",\"gi\"),\"<\"+i+\"$1 />\")}))}if(e=this.callback(\"syncBefore\",!1,e),this.$source.val(e),this.setFullpageDoctype(),this.callback(\"syncAfter\",!1,e),!1===this.start)if(void 0!==t)switch(t.which){case 37:case 38:case 39:case 40:break;default:this.callback(\"change\",!1,e)}else this.callback(\"change\",!1,e)},syncClean:function(t){return this.opts.fullpage||(t=this.cleanStripTags(t)),t=$.trim(t),\"<p></p>\"!==(t=(t=(t=(t=(t=this.placeholderRemoveFromCode(t)).replace(/&#x200b;/gi,\"\")).replace(/&#8203;/gi,\"\")).replace(/<\\/a>&nbsp;/gi,\"</a> \")).replace(/\\u200B/g,\"\"))&&\"<p> </p>\"!==t&&\"<p>&nbsp;</p>\"!==t||(t=\"\"),this.opts.linkNofollow&&(t=(t=t.replace(/<a(.*?)rel=\"nofollow\"(.*?)>/gi,\"<a$1$2>\")).replace(/<a(.*?)>/gi,'<a$1 rel=\"nofollow\">')),t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(\"\\x3c!--?php\",\"<?php\")).replace(\"?--\\x3e\",\"?>\")).replace(/<(.*?)class=\"noeditable\"(.*?) contenteditable=\"false\"(.*?)>/gi,'<$1class=\"noeditable\"$2$3>')).replace(/ data-tagblock=\"\"/gi,\"\")).replace(/<br\\s?\\/?>\\n?<\\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,\"</$1>\")).replace(/<span(.*?)id=\"redactor-image-box\"(.*?)>([\\w\\W]*?)<img(.*?)><\\/span>/gi,\"$3<img$4>\")).replace(/<span(.*?)id=\"redactor-image-resizer\"(.*?)>(.*?)<\\/span>/gi,\"\")).replace(/<span(.*?)id=\"redactor-image-editter\"(.*?)>(.*?)<\\/span>/gi,\"\")).replace(/<(ul|ol)>\\s*\\t*\\n*<\\/(ul|ol)>/gi,\"\"),this.opts.cleanFontTag&&(t=t.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi,\"$2\")),t=(t=(t=(t=(t=t.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi,\"$2\")).replace(/<inline>([\\w\\W]*?)<\\/inline>/gi,\"$1\")).replace(/<inline>/gi,\"<span>\")).replace(/<inline /gi,\"<span \")).replace(/<\\/inline>/gi,\"</span>\"),this.opts.removeEmptyTags&&(t=t.replace(/<span>([\\w\\W]*?)<\\/span>/gi,\"$1\")),t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<span(.*?)class=\"redactor_placeholder\"(.*?)>([\\w\\W]*?)<\\/span>/gi,\"\")).replace(/<img(.*?)contenteditable=\"false\"(.*?)>/gi,\"<img$1$2>\")).replace(/&/gi,\"&\")).replace(/\\u2122/gi,\"&trade;\")).replace(/\\u00a9/gi,\"&copy;\")).replace(/\\u2026/gi,\"&hellip;\")).replace(/\\u2014/gi,\"&mdash;\")).replace(/\\u2010/gi,\"&dash;\"),t=this.cleanReConvertProtected(t)},buildStart:function(){this.content=\"\",this.$box=$('<div class=\"redactor_box\" />'),\"TEXTAREA\"===this.$source[0].tagName&&(this.opts.textareamode=!0),!1===this.opts.mobile&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.opts.textareamode?this.content=$.trim(this.$source.val()):this.content=$.trim(this.$source.html())},buildFromTextarea:function(){this.$editor=$(\"<div />\"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(t){return $(\"<textarea />\").attr(\"name\",t.attr(\"id\")).css(\"height\",this.sourceHeight)},buildAddClasses:function(t){$.each(this.$source.get(0).className.split(/\\s+/),(function(e,i){t.addClass(\"redactor_\"+i)}))},buildEnable:function(){this.$editor.addClass(\"redactor_editor\").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr(\"dir\",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var t=this.$editor;this.opts.iframe&&(t=this.$frame),this.opts.tabindex&&t.attr(\"tabindex\",this.opts.tabindex),this.opts.minHeight?t.css(\"min-height\",this.opts.minHeight+\"px\"):this.browser(\"mozilla\")&&this.opts.linebreaks&&this.$editor.css(\"min-height\",\"45px\"),this.browser(\"mozilla\")&&this.opts.linebreaks&&this.$editor.css(\"padding-bottom\",\"10px\"),this.opts.maxHeight&&(this.opts.autoresize=!1,this.sourceHeight=this.opts.maxHeight),this.opts.wym&&this.$editor.addClass(\"redactor_editor_wym\"),this.opts.typewriter&&this.$editor.addClass(\"redactor-editor-typewriter\"),this.opts.autoresize||t.css(\"height\",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout($.proxy(this.observeStart,this),4),this.browser(\"mozilla\"))try{this.document.execCommand(\"enableObjectResizing\",!1,!1),this.document.execCommand(\"enableInlineTableEditing\",!1,!1)}catch(t){}this.opts.focus&&setTimeout($.proxy(this.focus,this),100),this.opts.visual||setTimeout($.proxy((function(){this.opts.visual=!0,this.toggle(!1)}),this),200),this.callback(\"init\")},buildBindKeyboard:function(){var t;this.dblEnter=0,!this.opts.dragUpload||!1===this.opts.imageUpload&&!1===this.opts.s3||this.$editor.on(\"drop.redactor\",$.proxy(this.buildEventDrop,this)),this.$editor.on(\"click.redactor\",$.proxy((function(){this.selectall=!1}),this)),this.$editor.on(\"input.redactor\",$.proxy(this.sync,this)),this.$editor.on(\"paste.redactor\",$.proxy(this.buildEventPaste,this)),this.$editor.on(\"keydown.redactor\",$.proxy(this.buildEventKeydown,this)),this.$editor.on(\"keyup.redactor\",$.proxy(this.buildEventKeyup,this)),$.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on(\"keydown.redactor-textarea\",$.proxy(this.opts.textareaKeydownCallback,this)),$.isFunction(this.opts.focusCallback)&&this.$editor.on(\"focus.redactor\",$.proxy(this.opts.focusCallback,this)),$(document).mousedown((function(e){t=$(e.target)})),this.$editor.on(\"blur.redactor\",$.proxy((function(e){$(t).hasClass(\"redactor_toolbar\")||0!==$(t).parents(\".redactor_toolbar\").length||(this.selectall=!1,$.isFunction(this.opts.blurCallback)&&this.callback(\"blur\",e))}),this))},buildEventDrop:function(t){if(t=t.originalEvent||t,void 0===window.FormData||!t.dataTransfer)return!0;if(0===t.dataTransfer.files.length)return!0;t.preventDefault();var e=t.dataTransfer.files[0];if(!1!==this.opts.dnbImageTypes&&-1===this.opts.dnbImageTypes.indexOf(e.type))return!0;this.bufferSet(),this.showProgressBar(),!1===this.opts.s3?this.dragUploadAjax(this.opts.imageUpload,e,!0,t,this.opts.imageUploadParam):this.s3uploadFile(e)},buildEventPaste:function(t){var e=!1;this.browser(\"webkit\")&&-1===navigator.userAgent.indexOf(\"Chrome\")&&(this.browser(\"version\").split(\".\")[0]<536&&(e=!0));if(e)return!0;if(this.browser(\"opera\"))return!0;if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(t))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(!0===this.opts.autoresize&&!0!==this.fullscreen?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var i=this.extractContent();setTimeout($.proxy((function(){var t=this.extractContent();this.$editor.append(i),this.selectionRestore();var e=this.getFragmentHtml(t);this.pasteClean(e),!0===this.opts.autoresize&&!0!==this.fullscreen&&this.$editor.css(\"height\",\"auto\")}),this),1)}},buildEventClipboardUpload:function(t){var e=t.originalEvent||t;if(this.clipboardFilePaste=!1,void 0===e.clipboardData)return!1;if(e.clipboardData.items){var i=e.clipboardData.items[0].getAsFile();if(null!==i){this.bufferSet(),this.clipboardFilePaste=!0;var s=new FileReader;return s.onload=$.proxy(this.pasteClipboardUpload,this),s.readAsDataURL(i),!0}}return!1},buildEventKeydown:function(t){if(this.rtePaste)return!1;var e=t.which,i=t.ctrlKey||t.metaKey,s=this.getParent(),o=this.getCurrent(),r=this.getBlock(),a=!1;if(this.callback(\"keydown\",t),this.browser(\"mozilla\")&&\"modify\"in window.getSelection()&&i&&(37===t.keyCode||39===t.keyCode)){var n=this.getSelection(),l=t.metaKey?\"line\":\"word\";37===t.keyCode&&(n.modify(\"extend\",\"left\",l),t.shiftKey||n.collapseToStart()),39===t.keyCode&&(n.modify(\"extend\",\"right\",l),t.shiftKey||n.collapseToEnd()),t.preventDefault()}if(this.imageResizeHide(!1),(s&&\"CODE\"===$(s).get(0).tagName||o&&\"CODE\"===$(o).get(0).tagName)&&(a=!0,e===this.keyCode.DOWN&&this.insertAfterLastElement(r)),e===this.keyCode.DOWN&&(s&&\"BLOCKQUOTE\"===$(s)[0].tagName&&this.insertAfterLastElement(s),o&&\"BLOCKQUOTE\"===$(o)[0].tagName&&this.insertAfterLastElement(o),s&&\"P\"===$(s)[0].tagName&&\"BLOCKQUOTE\"===$(s).parent()[0].tagName&&this.insertAfterLastElement(s,$(s).parent()[0]),o&&\"P\"===$(o)[0].tagName&&s&&\"BLOCKQUOTE\"===$(s)[0].tagName&&this.insertAfterLastElement(o,s)),this.shortcuts(t,e),i&&90===e&&!t.shiftKey&&!t.altKey)return t.preventDefault(),void(this.opts.buffer.length?this.bufferUndo():this.document.execCommand(\"undo\",!1,!1));if(i&&90===e&&t.shiftKey&&!t.altKey)return t.preventDefault(),void(0!==this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand(\"redo\",!1,!1));if(32===e&&this.bufferSet(),i&&65===e?(this.bufferSet(),this.selectall=!0):e===this.keyCode.LEFT_WIN||i||(this.selectall=!1),e!==this.keyCode.ENTER||t.shiftKey||t.ctrlKey||t.metaKey)e===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey)&&(this.bufferSet(),t.preventDefault(),this.insertLineBreak());else{var c=this.getRange();if(c&&!1===c.collapsed&&(sel=this.getSelection(),sel.rangeCount&&c.deleteContents()),this.browser(\"msie\")&&1==s.nodeType&&(\"TD\"===s.tagName||\"TH\"===s.tagName))return t.preventDefault(),this.bufferSet(),this.insertNode(document.createElement(\"br\")),this.callback(\"enter\",t),!1;if(r&&(\"BLOCKQUOTE\"===r.tagName||\"BLOCKQUOTE\"===$(r).parent()[0].tagName))if(this.isEndOfElement()){if(1==this.dblEnter){var d,h;if(\"BLOCKQUOTE\"===r.tagName?(h=\"br\",d=r):(h=\"p\",d=$(r).parent()[0]),t.preventDefault(),this.insertingAfterLastElement(d),this.dblEnter=0,\"p\"===h)$(r).parent().find(\"p\").last().remove();else{var p=$.trim($(r).html());$(r).html(p.replace(/<br\\s?\\/?>$/i,\"\"))}return}this.dblEnter++}else this.dblEnter++;if(!0===a)return this.buildEventKeydownPre(t,o);if(!this.opts.linebreaks){if(r&&\"LI\"===r.tagName){var u=this.getBlock();if(!1!==u||\"LI\"===u.tagName){var f=$.trim($(r).text()),m=$.trim($(u).text());if(\"\"==f&&\"\"==m&&0===$(u).next(\"li\").length&&0===$(u).parents(\"li\").length){this.bufferSet();var g=$(u).closest(\"ol, ul\");$(u).remove();var b=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");return g.after(b),this.selectionStart(b),this.sync(),this.callback(\"enter\",t),!1}}}if(r&&this.opts.rBlockTest.test(r.tagName))this.bufferSet(),setTimeout($.proxy((function(){var t=this.getBlock();if(\"DIV\"===t.tagName&&!$(t).hasClass(\"redactor_editor\")){var e=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");$(t).replaceWith(e),this.selectionStart(e)}}),this),1);else if(!1===r){this.bufferSet();b=$(\"<p>\"+this.opts.invisibleSpace+\"</p>\");return this.insertNode(b[0]),this.selectionStart(b),this.callback(\"enter\",t),!1}}if(this.opts.linebreaks){if(!r||!this.opts.rBlockTest.test(r.tagName))return this.buildEventKeydownInsertLineBreak(t);this.bufferSet(),setTimeout($.proxy((function(){var t=this.getBlock();\"DIV\"!==t.tagName&&\"P\"!==t.tagName||$(t).hasClass(\"redactor_editor\")||this.replaceLineBreak(t)}),this),1)}if(\"BLOCKQUOTE\"===r.tagName||\"FIGCAPTION\"===r.tagName)return this.buildEventKeydownInsertLineBreak(t);this.callback(\"enter\",t)}if((e===this.keyCode.TAB||t.metaKey&&219===e)&&this.opts.shortcuts)return this.buildEventKeydownTab(t,a,e);e===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(t,o,s)},buildEventKeydownPre:function(t,e){t.preventDefault(),this.bufferSet();var i=$(e).parent().text();return this.insertNode(document.createTextNode(\"\\n\")),-1===i.search(/\\s$/)&&this.insertNode(document.createTextNode(\"\\n\")),this.sync(),this.callback(\"enter\",t),!1},buildEventKeydownTab:function(t,e){return!this.opts.tabFocus||(!(!this.isEmpty(this.get())||!1!==this.opts.tabSpaces)||(t.preventDefault(),!0!==e||t.shiftKey?!1!==this.opts.tabSpaces?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join(\" \"))),this.sync(),!1):(t.shiftKey?this.indentingOutdent():this.indentingIndent(),!1):(this.bufferSet(),this.insertNode(document.createTextNode(\"\\t\")),this.sync(),!1)))},buildEventKeydownBackspace:function(t,e,i){if(i&&e&&\"TD\"===i.parentNode.tagName&&\"UL\"===i.tagName&&\"LI\"===e.tagName&&1===$(i).children(\"li\").length&&\"\"==$(e).text().replace(/[\\u200B-\\u200D\\uFEFF]/g,\"\")){var s=i.parentNode;return $(i).remove(),this.selectionStart(s),this.sync(),!1}void 0!==e.tagName&&/^(H[1-6])$/i.test(e.tagName)&&(s=!1===this.opts.linebreaks?$(\"<p>\"+this.opts.invisibleSpace+\"</p>\"):$(\"<br>\"+this.opts.invisibleSpace),$(e).replaceWith(s),this.selectionStart(s),this.sync());void 0!==e.nodeValue&&null!==e.nodeValue&&e.remove&&3===e.nodeType&&null==e.nodeValue.match(/[^\\u200B]/g)&&($(e).prev().remove(),this.sync())},buildEventKeydownInsertLineBreak:function(t){this.bufferSet(),t.preventDefault(),this.insertLineBreak(),this.callback(\"enter\",t)},buildEventKeyup:function(t){if(this.rtePaste)return!1;var e=t.which,i=this.getParent(),s=this.getCurrent();if(!this.opts.linebreaks&&3==s.nodeType&&(0==i||\"BODY\"===i.tagName)){var o=$(\"<p>\").append($(s).clone());$(s).replaceWith(o);var r=$(o).next();void 0!==r[0]&&\"BR\"===r[0].tagName&&r.remove(),this.selectionEnd(o)}if((this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&e===this.keyCode.ENTER&&this.buildEventKeyupConverters(),e===this.keyCode.DELETE||e===this.keyCode.BACKSPACE)return this.formatEmpty(t);this.callback(\"keyup\",t),this.sync(t)},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout($.proxy((function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()}),this),5)},buildPlugins:function(){this.opts.plugins&&$.each(this.opts.plugins,$.proxy((function(t,e){RedactorPlugins[e]&&($.extend(this,RedactorPlugins[e]),$.isFunction(RedactorPlugins[e].init)&&this.init())}),this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))},iframeAppend:function(t){this.$source.attr(\"dir\",this.opts.direction).hide(),this.$box.insertAfter(t).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=$('<iframe style=\"width: 100%;\" frameborder=\"0\" />').one(\"load\",$.proxy((function(){if(this.opts.fullpage){this.iframePage(),\"\"===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var t=setInterval($.proxy((function(){this.$frame.contents().find(\"body\").html()&&(clearInterval(t),this.iframeLoad())}),this),0)}else this.iframeLoad()}),this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var t=this.iframeDoc();return t.documentElement&&t.removeChild(t.documentElement),t},iframeAddCss:function(t){t=t||this.opts.css,this.isString(t)&&this.$frame.contents().find(\"head\").append('<link rel=\"stylesheet\" href=\"'+t+'\" />'),$.isArray(t)&&$.each(t,$.proxy((function(t,e){this.iframeAddCss(e)}),this))},iframeLoad:function(){this.$editor=this.$frame.contents().find(\"body\").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$source.val()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderInit:function(){!1!==this.opts.placeholder?(this.placeholderText=this.opts.placeholder,this.opts.placeholder=!0):void 0===this.$element.attr(\"placeholder\")||\"\"==this.$element.attr(\"placeholder\")?this.opts.placeholder=!1:(this.placeholderText=this.$element.attr(\"placeholder\"),this.opts.placeholder=!0)},placeholderStart:function(t){return!1!==this.opts.placeholder&&(this.isEmpty(t)?(this.opts.focus=!1,this.placeholderOnFocus(),this.placeholderOnBlur(),this.placeholderGet()):(this.placeholderOnBlur(),!1))},placeholderOnFocus:function(){this.$editor.on(\"focus.redactor_placeholder\",$.proxy(this.placeholderFocus,this))},placeholderOnBlur:function(){this.$editor.on(\"blur.redactor_placeholder\",$.proxy(this.placeholderBlur,this))},placeholderGet:function(){var t=$('<span class=\"redactor_placeholder\">').data(\"redactor\",\"verified\").attr(\"contenteditable\",!1).text(this.placeholderText);return!1===this.opts.linebreaks?$(\"<p>\").append(t):t},placeholderBlur:function(){var t=this.get();this.isEmpty(t)&&(this.placeholderOnFocus(),this.$editor.html(this.placeholderGet()))},placeholderFocus:function(){this.$editor.find(\"span.redactor_placeholder\").remove();var t=\"\";!1===this.opts.linebreaks&&(t=this.opts.emptyHtml),this.$editor.off(\"focus.redactor_placeholder\"),this.$editor.html(t),!1===this.opts.linebreaks?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemoveFromEditor:function(){this.$editor.find(\"span.redactor_placeholder\").remove(),this.$editor.off(\"focus.redactor_placeholder\")},placeholderRemoveFromCode:function(t){return t.replace(/<span class=\"redactor_placeholder\"(.*?)>(.*?)<\\/span>/i,\"\")},shortcuts:function(e,key){if(!this.opts.shortcuts)return!e.ctrlKey&&!e.metaKey||66!==key&&73!==key||e.preventDefault(),!1;$.each(this.opts.shortcuts,$.proxy((function(str,command){var keys=str.split(\",\");for(var i in keys)\"string\"==typeof keys[i]&&this.shortcutsHandler(e,$.trim(keys[i]),$.proxy((function(){eval(command)}),this))}),this))},shortcutsHandler:function(t,e,i){var s={\"`\":\"~\",1:\"!\",2:\"@\",3:\"#\",4:\"$\",5:\"%\",6:\"^\",7:\"&\",8:\"*\",9:\"(\",0:\")\",\"-\":\"_\",\"=\":\"+\",\";\":\": \",\"'\":'\"',\",\":\"<\",\".\":\">\",\"/\":\"?\",\"\\\\\":\"|\"};e=e.toLowerCase().split(\" \");var o={8:\"backspace\",9:\"tab\",10:\"return\",13:\"return\",16:\"shift\",17:\"ctrl\",18:\"alt\",19:\"pause\",20:\"capslock\",27:\"esc\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"insert\",46:\"del\",59:\";\",61:\"=\",96:\"0\",97:\"1\",98:\"2\",99:\"3\",100:\"4\",101:\"5\",102:\"6\",103:\"7\",104:\"8\",105:\"9\",106:\"*\",107:\"+\",109:\"-\",110:\".\",111:\"/\",112:\"f1\",113:\"f2\",114:\"f3\",115:\"f4\",116:\"f5\",117:\"f6\",118:\"f7\",119:\"f8\",120:\"f9\",121:\"f10\",122:\"f11\",123:\"f12\",144:\"numlock\",145:\"scroll\",173:\"-\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"}[t.keyCode],r=String.fromCharCode(t.which).toLowerCase(),a=\"\",n={};$.each([\"alt\",\"ctrl\",\"meta\",\"shift\"],(function(e,i){t[i+\"Key\"]&&o!==i&&(a+=i+\"+\")})),o&&(n[a+o]=!0),r&&(n[a+r]=!0,n[a+s[r]]=!0,\"shift+\"===a&&(n[s[r]]=!0));for(var l=0,c=e.length;l<c;l++)if(n[e[l]])return t.preventDefault(),i.apply(this,arguments)},focus:function(){this.browser(\"opera\")?this.$editor.focus():this.window.setTimeout($.proxy(this.focusSet,this,!0),1)},focusWithSaveScroll:function(){if(this.browser(\"msie\"))var t=this.document.documentElement.scrollTop;this.$editor.focus(),this.browser(\"msie\")&&(this.document.documentElement.scrollTop=t)},focusEnd:function(){if(this.browser(\"mozilla\"))if(!1===this.opts.linebreaks){var t=this.$editor.children().last();this.$editor.focus(),this.selectionEnd(t)}else this.focusSet();else this.focusSet()},focusSet:function(t,e){this.$editor.focus(),void 0===e&&(e=this.$editor[0]);var i=this.getRange();i.selectNodeContents(e),i.collapse(t||!1);var s=this.getSelection();s.removeAllRanges(),s.addRange(i)},toggle:function(t){this.opts.visual?this.toggleCode(t):this.toggleVisual()},toggleVisual:function(){var t=this.$source.hide().val();if(void 0!==this.modified){var e=this.modified.replace(/\\n/g,\"\"),i=t.replace(/\\n/g,\"\");i=this.cleanRemoveSpaces(i,!1),this.modified=this.cleanRemoveSpaces(e,!1)!==i}this.modified&&(this.opts.fullpage&&\"\"===t?this.setFullpageOnInit(t):(this.set(t),this.opts.fullpage&&this.buildBindKeyboard()),this.callback(\"change\",!1,t)),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr(\"contenteditable\",!0),this.$source.off(\"keydown.redactor-textarea-indenting\"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive(\"html\"),this.opts.visual=!0},toggleCode:function(t){!1!==t&&this.selectionSave();var e=null;this.opts.iframe?(e=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr(\"contenteditable\"),this.$frame.hide()):(e=this.$editor.innerHeight(),this.$editor.hide());var i=this.$source.val();\"\"!==i&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(i)),this.modified=i,this.$source.height(e).show().focus(),this.$source.on(\"keydown.redactor-textarea-indenting\",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive(\"html\"),this.opts.visual=!1},textareaIndenting:function(t){if(9===t.keyCode){var e=$(this),i=e.get(0).selectionStart;return e.val(e.val().substring(0,i)+\"\\t\"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=i+1,!1}},autosave:function(){var t=!1;this.autosaveInterval=setInterval($.proxy((function(){var e=this.get();if(t!==e){var i=this.$source.attr(\"name\");$.ajax({url:this.opts.autosave,type:\"post\",data:\"name=\"+i+\"&\"+i+\"=\"+escape(encodeURIComponent(e)),success:$.proxy((function(i){var s=$.parseJSON(i);void 0===s.error?this.callback(\"autosave\",!1,s):this.callback(\"autosaveError\",!1,s),t=e}),this)})}}),this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.isMobile()&&this.opts.buttonsHideOnMobile.length>0&&$.each(this.opts.buttonsHideOnMobile,$.proxy((function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)}),this)),this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var t=this.opts.buttons.indexOf(\"html\");this.opts.buttons.splice(t,1)}if(this.opts.toolbar&&$.each(this.opts.toolbar.formatting.dropdown,$.proxy((function(t){\"-1\"==$.inArray(t,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[t]}),this)),0===this.opts.buttons.length)return!1;this.airEnable(),this.$toolbar=$(\"<ul>\").addClass(\"redactor_toolbar\").attr(\"id\",\"redactor_toolbar_\"+this.uuid),this.opts.typewriter&&this.$toolbar.addClass(\"redactor-toolbar-typewriter\"),this.opts.toolbarOverflow&&this.isMobile()&&this.$toolbar.addClass(\"redactor-toolbar-overflow\"),this.opts.air?(this.$air=$('<div class=\"redactor_air\">').attr(\"id\",\"redactor_air_\"+this.uuid).hide(),this.$air.append(this.$toolbar),$(\"body\").append(this.$air)):this.opts.toolbarExternal?(this.$toolbar.addClass(\"redactor-toolbar-external\"),$(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar),$.each(this.opts.buttons,$.proxy((function(t,e){if(this.opts.toolbar[e]){var i=this.opts.toolbar[e];if(!1===this.opts.fileUpload&&\"file\"===e)return!0;this.$toolbar.append($(\"<li>\").append(this.buttonBuild(e,i)))}}),this)),this.$toolbar.find(\"a\").attr(\"tabindex\",\"-1\"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),$(this.opts.toolbarFixedTarget).on(\"scroll.redactor\",$.proxy(this.toolbarObserveScroll,this))),this.opts.activeButtons&&this.$editor.on(\"mouseup.redactor keyup.redactor\",$.proxy(this.buttonActiveObserver,this))},toolbarObserveScroll:function(){var t,e=$(this.opts.toolbarFixedTarget).scrollTop(),i=0,s=0;if(t=(i=this.opts.toolbarFixedTarget===document?this.$box.offset().top:1)+this.$box.height()+40,e>i){var o=\"100%\";this.opts.toolbarFixedBox&&(s=this.$box.offset().left,o=this.$box.innerWidth(),this.$toolbar.addClass(\"toolbar_fixed_box\")),this.toolbarFixed=!0,this.opts.toolbarFixedTarget===document?this.$toolbar.css({position:\"fixed\",width:o,zIndex:10005,top:this.opts.toolbarFixedTopOffset+\"px\",left:s}):this.$toolbar.css({position:\"absolute\",width:o,zIndex:10005,top:this.opts.toolbarFixedTopOffset+e+\"px\",left:0}),e<t?this.$toolbar.css(\"visibility\",\"visible\"):this.$toolbar.css(\"visibility\",\"hidden\")}else this.toolbarFixed=!1,this.$toolbar.css({position:\"relative\",width:\"auto\",top:0,left:s}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass(\"toolbar_fixed_box\")},airEnable:function(){this.opts.air&&this.$editor.on(\"mouseup.redactor keyup.redactor\",this,$.proxy((function(t){var e=this.getSelectionText();if(\"mouseup\"===t.type&&\"\"!=e&&this.airShow(t),\"keyup\"===t.type&&t.shiftKey&&\"\"!=e){var i=$(this.getElement(this.getSelection().focusNode)),s=i.offset();s.height=i.height(),this.airShow(s,!0)}}),this))},airShow:function(t,e){if(this.opts.air){var i,s;if(this.selectionSave(),$(\".redactor_air\").hide(),e)i=t.left,s=t.top+t.height+14,this.opts.iframe&&(s+=this.$box.position().top-$(this.document).scrollTop(),i+=this.$box.position().left);else{var o=this.$air.innerWidth();i=t.clientX,$(this.document).width()<i+o&&(i-=o),s=t.clientY+14,this.opts.iframe?(s+=this.$box.position().top,i+=this.$box.position().left):s+=$(this.document).scrollTop()}this.$air.css({left:i+\"px\",top:s+\"px\"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var t=$.proxy((function(t){$(t).on(\"mousedown.redactor\",$.proxy((function(e){0===$(e.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),$(t).off(e))}),this)).on(\"keydown.redactor\",$.proxy((function(e){e.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),$(t).off(e)}),this))}),this);t(document),this.opts.iframe&&t(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var t=$.proxy((function(t){$(t).on(\"mousemove.redactor\",$.proxy((function(e){0===$(e.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),$(t).off(e))}),this))}),this);t(document),this.opts.iframe&&t(this.document)}},dropdownBuild:function(t,e){$.each(e,$.proxy((function(e,i){var s;i.className||(i.className=\"\"),\"separator\"===i.name?s=$('<a class=\"redactor_separator_drop\">'):(s=$('<a href=\"#\" class=\"'+i.className+\" redactor_dropdown_\"+e+'\">'+i.title+\"</a>\")).on(\"click\",$.proxy((function(t){this.opts.air&&this.selectionRestore(),t.preventDefault&&t.preventDefault(),this.browser(\"msie\")&&(t.returnValue=!1),i.callback&&i.callback.call(this,e,s,i,t),i.exec&&this.execCommand(i.exec,e),i.func&&this[i.func](e),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)}),this)),t.append(s)}),this))},dropdownShow:function(t,e){if(!this.opts.visual)return t.preventDefault(),!1;var i=this.buttonGet(e),s=i.data(\"dropdown\").appendTo(document.body);if(i.hasClass(\"dropact\"))this.dropdownHideAll();else{this.dropdownHideAll(),this.callback(\"dropdownShow\",{dropdown:s,key:e,button:i}),this.buttonActive(e),i.addClass(\"dropact\");var o=i.offset(),r=s.width();o.left+r>$(document).width()&&(o.left-=r);var a=o.left+\"px\",n=i.innerHeight(),l=\"absolute\",c=n+this.opts.toolbarFixedTopOffset+\"px\";this.opts.toolbarFixed&&this.toolbarFixed?l=\"fixed\":c=o.top+n+\"px\",s.css({position:l,left:a,top:c}).show(),this.callback(\"dropdownShown\",{dropdown:s,key:e,button:i})}var d=$.proxy((function(t){this.dropdownHide(t,s)}),this);$(document).one(\"click\",d),this.$editor.one(\"click\",d),this.$editor.one(\"touchstart\",d),t.stopPropagation(),this.focusWithSaveScroll()},dropdownHideAll:function(){this.$toolbar.find(\"a.dropact\").removeClass(\"redactor_act\").removeClass(\"dropact\"),$(\".redactor_dropdown\").hide(),this.callback(\"dropdownHide\")},dropdownHide:function(t,e){$(t.target).hasClass(\"dropact\")||(e.removeClass(\"dropact\"),this.dropdownHideAll())},buttonBuild:function(t,e,i){var s=$('<a href=\"javascript:;\" title=\"'+e.title+'\" tabindex=\"-1\" class=\"re-icon re-'+t+'\"></a>');if(void 0!==i&&s.addClass(\"redactor-btn-image\"),s.on(\"click\",$.proxy((function(i){if(i.preventDefault&&i.preventDefault(),this.browser(\"msie\")&&(i.returnValue=!1),s.hasClass(\"redactor_button_disabled\"))return!1;!1!==this.isFocused()||e.exec||this.focusWithSaveScroll(),e.exec?(this.focusWithSaveScroll(),this.execCommand(e.exec,t),this.airBindMousemoveHide()):e.func&&\"show\"!==e.func?(this[e.func](t),this.airBindMousemoveHide()):e.callback?(e.callback.call(this,t,s,e,i),this.airBindMousemoveHide()):e.dropdown&&this.dropdownShow(i,t),this.buttonActiveObserver(!1,t)}),this)),e.dropdown){var o=$('<div class=\"redactor_dropdown redactor_dropdown_box_'+t+'\" style=\"display: none;\">');s.data(\"dropdown\",o),this.dropdownBuild(o,e.dropdown)}return s},buttonGet:function(t){return!!this.opts.toolbar&&$(this.$toolbar.find(\"a.re-\"+t))},buttonTagToActiveState:function(t,e){this.opts.activeButtons.push(t),this.opts.activeButtonsStates[e]=t},buttonActiveToggle:function(t){this.buttonGet(t).hasClass(\"redactor_act\")?this.buttonInactive(t):this.buttonActive(t)},buttonActive:function(t){this.buttonGet(t).addClass(\"redactor_act\")},buttonInactive:function(t){this.buttonGet(t).removeClass(\"redactor_act\")},buttonInactiveAll:function(t){this.$toolbar.find(\"a.re-icon\").not(\".re-\"+t).removeClass(\"redactor_act\")},buttonActiveVisual:function(){this.$toolbar.find(\"a.re-icon\").not(\"a.re-html\").removeClass(\"redactor_button_disabled\")},buttonInactiveVisual:function(){this.$toolbar.find(\"a.re-icon\").not(\"a.re-html\").addClass(\"redactor_button_disabled\")},buttonChangeIcon:function(t,e){this.buttonGet(t).addClass(\"re-\"+e)},buttonRemoveIcon:function(t,e){this.buttonGet(t).removeClass(\"re-\"+e)},buttonAwesome:function(t,e){var i=this.buttonGet(t);i.removeClass(\"redactor-btn-image\"),i.addClass(\"fa-redactor-btn\"),i.html('<i class=\"fa '+e+'\"></i>')},buttonAdd:function(t,e,i,s){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:e,callback:i,dropdown:s},!0);return this.$toolbar.append($(\"<li>\").append(o)),o}},buttonAddFirst:function(t,e,i,s){if(this.opts.toolbar){var o=this.buttonBuild(t,{title:e,callback:i,dropdown:s},!0);this.$toolbar.prepend($(\"<li>\").append(o))}},buttonAddAfter:function(t,e,i,s,o){if(this.opts.toolbar){var r=this.buttonBuild(e,{title:i,callback:s,dropdown:o},!0),a=this.buttonGet(t);return 0!==a.length?a.parent().after($(\"<li>\").append(r)):this.$toolbar.append($(\"<li>\").append(r)),r}},buttonAddBefore:function(t,e,i,s,o){if(this.opts.toolbar){var r=this.buttonBuild(e,{title:i,callback:s,dropdown:o},!0),a=this.buttonGet(t);return 0!==a.length?a.parent().before($(\"<li>\").append(r)):this.$toolbar.append($(\"<li>\").append(r)),r}},buttonRemove:function(t){this.buttonGet(t).remove()},buttonActiveObserver:function(t,e){var i=this.getParent();if(this.buttonInactiveAll(e),!1!==t||\"html\"===e){i&&\"A\"===i.tagName?this.$toolbar.find(\"a.redactor_dropdown_link\").text(this.opts.curLang.link_edit):this.$toolbar.find(\"a.redactor_dropdown_link\").text(this.opts.curLang.link_insert),$.each(this.opts.activeButtonsStates,$.proxy((function(t,e){0!=$(i).closest(t,this.$editor.get()[0]).length&&this.buttonActive(e)}),this));var s=$(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(s.length){var o=s.css(\"text-align\");\"\"==o&&(o=\"left\"),this.buttonActive(\"align\"+o)}}else-1!=$.inArray(e,this.opts.activeButtons)&&this.buttonActiveToggle(e)},execPasteFrag:function(t){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount){var i=this.getRange();i.deleteContents();var s=this.document.createElement(\"div\");s.innerHTML=t;for(var o,r,a=this.document.createDocumentFragment();o=s.firstChild;)r=a.appendChild(o);a.firstChild;i.insertNode(a),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!0)),e.removeAllRanges(),e.addRange(i)}},exec:function(t,e,i){\"formatblock\"===t&&this.browser(\"msie\")&&(e=\"<\"+e+\">\"),\"inserthtml\"===t&&this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(e):(this.focusWithSaveScroll(),this.document.selection.createRange().pasteHTML(e)):this.document.execCommand(t,!1,e),!1!==i&&this.sync(),this.callback(\"execCommand\",t,e)},execCommand:function(t,e,i){if(!this.opts.visual)return this.$source.focus(),!1;if(\"bold\"!==t&&\"italic\"!==t&&\"underline\"!==t&&\"strikethrough\"!==t||this.bufferSet(),\"superscript\"===t||\"subscript\"===t){var s=this.getParent();\"SUP\"!==s.tagName&&\"SUB\"!==s.tagName||this.inlineRemoveFormatReplace(s)}return\"inserthtml\"===t?(this.insertHtml(e,i),void this.callback(\"execCommand\",t,e)):!(this.currentOrParentIs(\"CODE\")&&!this.opts.formattingPre)&&(\"insertunorderedlist\"===t||\"insertorderedlist\"===t?this.execLists(t,e):\"unlink\"===t?this.execUnlink(t,e):(this.exec(t,e,i),void(\"inserthorizontalrule\"===t&&this.$editor.find(\"hr\").removeAttr(\"id\"))))},execUnlink:function(t,e){this.bufferSet();var i=this.currentOrParentIs(\"A\");if(i)return $(i).replaceWith($(i).text()),this.sync(),void this.callback(\"execCommand\",t,e)},execLists:function(t,e){this.bufferSet();var i=this.getParent(),s=$(i).closest(\"ol, ul\");this.isParentRedactor(s)||0==s.length||(s=!1);var o=!1;if(s&&s.length){o=!0;var r=s[0].tagName;(\"insertunorderedlist\"===t&&\"OL\"===r||\"insertorderedlist\"===t&&\"UL\"===r)&&(o=!1)}if(this.selectionSave(),o){var a=this.getNodes(),n=this.getBlocks(a);void 0!==a[0]&&a.length>1&&3==a[0].nodeType&&n.unshift(this.getBlock());var l=\"\",c=\"\";$.each(n,$.proxy((function(t,e){if(\"LI\"==e.tagName){var i=$(e),s=i.clone();if(s.find(\"ul\",\"ol\").remove(),!1===this.opts.linebreaks)l+=this.outerHtml($(\"<p>\").append(s.contents()));else{var o=s.html().replace(/<br\\s?\\/?>$/i,\"\");l+=o+\"<br>\"}0==t?(i.addClass(\"redactor-replaced\").empty(),c=this.outerHtml(i)):i.remove()}}),this)),html=this.$editor.html().replace(c,\"</\"+r+\">\"+l+\"<\"+r+\">\"),this.$editor.html(html),this.$editor.find(r+\":empty\").remove()}else{var d=$(this.getParent()).closest(\"td\");if(this.browser(\"msie\")&&!this.isIe11()&&this.opts.linebreaks){var h=this.selectionWrap(\"div\"),p=$(h).html(),u=$(\"<ul>\");\"insertorderedlist\"==t&&(u=$(\"<ol>\"));var f=$(\"<li>\");\"\"==$.trim(p)?(f.append(p+'<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),u.append(f),this.$editor.find(\"#selection-marker-1\").replaceWith(u)):(f.append(p),u.append(f),$(h).replaceWith(u))}else this.document.execCommand(t);i=this.getParent(),s=$(i).closest(\"ol, ul\");if(!1===this.opts.linebreaks)\"\"==$.trim(s.text())&&(s.children(\"li\").find(\"br\").remove(),s.children(\"li\").append('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"));if(0!=d.length&&s.wrapAll(\"<td>\"),s.length){var m=s.parent();this.isParentRedactor(m)&&\"LI\"!=m[0].tagName&&this.nodeTestBlocks(m[0])&&m.replaceWith(m.contents())}this.browser(\"mozilla\")&&this.$editor.focus()}this.selectionRestore(),this.$editor.find(\"#selection-marker-1\").removeAttr(\"id\"),this.sync(),this.callback(\"execCommand\",t,e)},indentingIndent:function(){this.indentingStart(\"indent\")},indentingOutdent:function(){this.indentingStart(\"outdent\")},indentingStart:function(t){if(this.bufferSet(),\"indent\"===t){var e=this.getBlock();if(this.selectionSave(),e&&\"LI\"==e.tagName){var i=this.getParent(),s=$(i).closest(\"ol, ul\")[0].tagName,o=this.getBlocks();$.each(o,(function(t,e){if(\"LI\"==e.tagName){var i=$(e).prev();if(0!=i.length&&\"LI\"==i[0].tagName){var o=i.children(\"ul, ol\");0==o.length?i.append($(\"<\"+s+\">\").append(e)):o.append(e)}}}))}else if(!1===e&&!0===this.opts.linebreaks){this.exec(\"formatBlock\",\"blockquote\");var r=this.getBlock();e=$('<div data-tagblock=\"\">').html($(r).html());$(r).replaceWith(e);var a=this.normalize($(e).css(\"margin-left\"))+this.opts.indentValue;$(e).css(\"margin-left\",a+\"px\")}else{var n=this.getBlocks();$.each(n,$.proxy((function(t,e){var i=!1;if(\"TD\"!==e.tagName){i=-1!==$.inArray(e.tagName,this.opts.alignmentTags)?$(e):$(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var s=this.normalize(i.css(\"margin-left\"))+this.opts.indentValue;i.css(\"margin-left\",s+\"px\")}}),this))}this.selectionRestore()}else{if(this.selectionSave(),(e=this.getBlock())&&\"LI\"==e.tagName){o=this.getBlocks();this.insideOutdent(e,0,o)}else{n=this.getBlocks();$.each(n,$.proxy((function(t,e){var i=!1;i=-1!==$.inArray(e.tagName,this.opts.alignmentTags)?$(e):$(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var s=this.normalize(i.css(\"margin-left\"))-this.opts.indentValue;s<=0?!0===this.opts.linebreaks&&void 0!==i.data(\"tagblock\")?i.replaceWith(i.html()+\"<br>\"):(i.css(\"margin-left\",\"\"),this.removeEmptyAttr(i,\"style\")):i.css(\"margin-left\",s+\"px\")}),this))}this.selectionRestore()}this.sync()},insideOutdent:function(t,e,i){if(t&&\"LI\"==t.tagName){var s=$(t).parent().parent();0!=s.length&&\"LI\"==s[0].tagName?s.after(t):void 0!==i[e]?(t=i[e],e++,this.insideOutdent(t,e,i)):this.execCommand(\"insertunorderedlist\")}},alignmentLeft:function(){this.alignmentSet(\"\",\"JustifyLeft\")},alignmentRight:function(){this.alignmentSet(\"right\",\"JustifyRight\")},alignmentCenter:function(){this.alignmentSet(\"center\",\"JustifyCenter\")},alignmentJustify:function(){this.alignmentSet(\"justify\",\"JustifyFull\")},alignmentSet:function(t,e){if(this.bufferSet(),this.oldIE())return this.document.execCommand(e,!1,!1),!0;if(this.selectionSave(),!(s=this.getBlock())&&this.opts.linebreaks){this.exec(\"formatblock\",\"div\");var i=this.getBlock(),s=$('<div data-tagblock=\"\">').html($(i).html());$(i).replaceWith(s),$(s).css(\"text-align\",t),this.removeEmptyAttr(s,\"style\"),\"\"==t&&void 0!==$(s).data(\"tagblock\")&&$(s).replaceWith($(s).html())}else{var o=this.getBlocks();$.each(o,$.proxy((function(e,i){var s=!1;(s=-1!==$.inArray(i.tagName,this.opts.alignmentTags)?$(i):$(i).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]))&&(s.css(\"text-align\",t),this.removeEmptyAttr(s,\"style\"))}),this))}this.selectionRestore(),this.sync()},cleanEmpty:function(t){var e=this.placeholderStart(t);return!1!==e?e:(!1===this.opts.linebreaks&&(\"\"===t?t=this.opts.emptyHtml:-1!==t.search(/^<hr\\s?\\/?>$/gi)&&(t=\"<hr>\"+this.opts.emptyHtml)),t)},cleanConverters:function(t){return this.opts.convertDivs&&!this.opts.gallery&&(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"<p$1>$2</p>\")),this.opts.paragraphy&&(t=this.cleanParagraphy(t)),t},cleanConvertProtected:function(t){return this.opts.templateVars&&(t=(t=t.replace(/\\{\\{(.*?)\\}\\}/gi,\"\\x3c!-- template double $1 --\\x3e\")).replace(/\\{(.*?)\\}/gi,\"\\x3c!-- template $1 --\\x3e\")),t=(t=(t=t.replace(/<script(.*?)>([\\w\\W]*?)<\\/script>/gi,'<title type=\"text/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"$1>$2</title>')).replace(/<style(.*?)>([\\w\\W]*?)<\\/style>/gi,'<section$1 style=\"display: none;\" rel=\"redactor-style-tag\">$2</section>')).replace(/<form(.*?)>([\\w\\W]*?)<\\/form>/gi,'<section$1 rel=\"redactor-form-tag\">$2</section>'),t=this.opts.phpTags?t.replace(/<\\?php([\\w\\W]*?)\\?>/gi,'<section style=\"display: none;\" rel=\"redactor-php-tag\">$1</section>'):t.replace(/<\\?php([\\w\\W]*?)\\?>/gi,\"\")},cleanReConvertProtected:function(t){return this.opts.templateVars&&(t=(t=t.replace(/<!-- template double (.*?) -->/gi,\"{{$1}}\")).replace(/<!-- template (.*?) -->/gi,\"{$1}\")),t=(t=(t=t.replace(/<title type=\"text\\/javascript\" style=\"display: none;\" class=\"redactor-script-tag\"(.*?)>([\\w\\W]*?)<\\/title>/gi,'<script$1 type=\"text/javascript\">$2<\\/script>')).replace(/<section(.*?) style=\"display: none;\" rel=\"redactor-style-tag\">([\\w\\W]*?)<\\/section>/gi,\"<style$1>$2</style>\")).replace(/<section(.*?)rel=\"redactor-form-tag\"(.*?)>([\\w\\W]*?)<\\/section>/gi,\"<form$1$2>$3</form>\"),this.opts.phpTags&&(t=t.replace(/<section style=\"display: none;\" rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi,\"<?php\\r\\n$1\\r\\n?>\")),t},cleanRemoveSpaces:function(t,e){if(!1!==e){e=[];var i=t.match(/<(code|style|script|title)(.*?)>([\\w\\W]*?)<\\/(code|style|script|title)>/gi);if(null===i&&(i=[]),this.opts.phpTags){var s=t.match(/<\\?php([\\w\\W]*?)\\?>/gi);s&&(i=$.merge(i,s))}i&&$.each(i,(function(i,s){t=t.replace(s,\"buffer_\"+i),e.push(s)}))}return t=(t=(t=(t=(t=(t=t.replace(/\\n/g,\" \")).replace(/[\\t]*/g,\"\")).replace(/\\n\\s*\\n/g,\"\\n\")).replace(/^[\\s\\n]*/g,\" \")).replace(/[\\s\\n]*$/g,\" \")).replace(/>\\s{2,}</g,\"> <\"),t=(t=this.cleanReplacer(t,e)).replace(/\\n\\n/g,\"\\n\")},cleanReplacer:function(t,e){return!1===e||$.each(e,(function(e,i){t=t.replace(\"buffer_\"+e,i)})),t},cleanRemoveEmptyTags:function(t){t=t.replace(/[\\u200B-\\u200D\\uFEFF]/g,\"\");for(var e=[\"<b>\\\\s*</b>\",\"<b>&nbsp;</b>\",\"<em>\\\\s*</em>\"],i=[\"<code></code>\",\"<blockquote>\\\\s*</blockquote>\",\"<dd></dd>\",\"<dt></dt>\",\"<ul></ul>\",\"<ol></ol>\",\"<li></li>\",\"<table></table>\",\"<tr></tr>\",\"<span>\\\\s*<span>\",\"<span>&nbsp;<span>\",\"<p>\\\\s*</p>\",\"<p></p>\",\"<p>&nbsp;</p>\",\"<p>\\\\s*<br>\\\\s*</p>\",\"<div>\\\\s*</div>\",\"<div>\\\\s*<br>\\\\s*</div>\"],s=(i=this.opts.removeEmptyTags?i.concat(e):e).length,o=0;o<s;++o)t=t.replace(new RegExp(i[o],\"gi\"),\"\");return t},cleanParagraphy:function(t){if(t=$.trim(t),!0===this.opts.linebreaks)return t;if(\"\"===t||\"<p></p>\"===t)return this.opts.emptyHtml;if(t+=\"\\n\",!1===this.opts.removeEmptyTags)return t;var e=[],i=t.match(/<(table|div|code|object)(.*?)>([\\w\\W]*?)<\\/(table|div|code|object)>/gi);i||(i=[]);var s=t.match(/<!--([\\w\\W]*?)-->/gi);if(s&&(i=$.merge(i,s)),this.opts.phpTags){var o=t.match(/<section(.*?)rel=\"redactor-php-tag\">([\\w\\W]*?)<\\/section>/gi);o&&(i=$.merge(i,o))}function r(e,i,s){return t.replace(new RegExp(e,i),s)}i&&$.each(i,(function(i,s){e[i]=s,t=t.replace(s,\"{replace\"+i+\"}\\n\")})),t=(t=t.replace(/<br \\/>\\s*<br \\/>/gi,\"\\n\\n\")).replace(/<br><br>/gi,\"\\n\\n\");var a=\"(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|code|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)\";t=r(\"(<\"+a+\"[^>]*>)\",\"gi\",\"\\n$1\"),t=r(\"(</\"+a+\">)\",\"gi\",\"$1\\n\\n\"),t=r(\"\\r\\n\",\"g\",\"\\n\"),t=r(\"\\r\",\"g\",\"\\n\");var n=(t=r(\"/\\n\\n+/\",\"g\",\"\\n\\n\")).split(new RegExp(\"\\ns*\\n\",\"g\"),-1);for(var l in t=\"\",n)n.hasOwnProperty(l)&&(-1==n[l].search(\"{replace\")?(n[l]=n[l].replace(/<p>\\n\\t?<\\/p>/gi,\"\"),n[l]=n[l].replace(/<p><\\/p>/gi,\"\"),\"\"!=n[l]&&(t+=\"<p>\"+n[l].replace(/^\\n+|\\n+$/g,\"\")+\"</p>\")):t+=n[l]);return t=r(\"<p><p>\",\"gi\",\"<p>\"),t=r(\"</p></p>\",\"gi\",\"</p>\"),t=r(\"<p>s?</p>\",\"gi\",\"\"),t=r(\"<p>([^<]+)</(div|address|form)>\",\"gi\",\"<p>$1</p></$2>\"),t=r(\"<p>(</?\"+a+\"[^>]*>)</p>\",\"gi\",\"$1\"),t=r(\"<p>(<li.+?)</p>\",\"gi\",\"$1\"),t=r(\"<p>s?(</?\"+a+\"[^>]*>)\",\"gi\",\"$1\"),t=r(\"(</?\"+a+\"[^>]*>)s?</p>\",\"gi\",\"$1\"),t=r(\"(</?\"+a+\"[^>]*>)s?<br />\",\"gi\",\"$1\"),t=r(\"<br />(s*</?(?:p|li|div|dl|dd|dt|th|code|td|ul|ol)[^>]*>)\",\"gi\",\"$1\"),t=r(\"\\n</p>\",\"gi\",\"</p>\"),t=r(\"<li><p>\",\"gi\",\"<li>\"),t=r(\"</p></li>\",\"gi\",\"</li>\"),t=r(\"</li><p>\",\"gi\",\"</li>\"),t=r(\"<p>\\t?\\n?<p>\",\"gi\",\"<p>\"),t=r(\"</dt><p>\",\"gi\",\"</dt>\"),t=r(\"</dd><p>\",\"gi\",\"</dd>\"),t=r(\"<br></p></blockquote>\",\"gi\",\"</blockquote>\"),t=r(\"<p>\\t*</p>\",\"gi\",\"\"),$.each(e,(function(e,i){t=t.replace(\"{replace\"+e+\"}\",i)})),$.trim(t)},cleanConvertInlineTags:function(t,e){var i=\"strong\";\"b\"===this.opts.boldTag&&(i=\"b\");var s=\"em\";return\"i\"===this.opts.italicTag&&(s=\"i\"),t=(t=t.replace(/<span style=\"font-style: italic;\">([\\w\\W]*?)<\\/span>/gi,\"<\"+s+\">$1</\"+s+\">\")).replace(/<span style=\"font-weight: bold;\">([\\w\\W]*?)<\\/span>/gi,\"<\"+i+\">$1</\"+i+\">\"),t=\"strong\"===this.opts.boldTag?t.replace(/<b>([\\w\\W]*?)<\\/b>/gi,\"<strong>$1</strong>\"):t.replace(/<strong>([\\w\\W]*?)<\\/strong>/gi,\"<b>$1</b>\"),t=(t=\"em\"===this.opts.italicTag?t.replace(/<i>([\\w\\W]*?)<\\/i>/gi,\"<em>$1</em>\"):t.replace(/<em>([\\w\\W]*?)<\\/em>/gi,\"<i>$1</i>\")).replace(/<span style=\"text-decoration: underline;\">([\\w\\W]*?)<\\/span>/gi,\"<u>$1</u>\"),t=!0!==e?t.replace(/<strike>([\\w\\W]*?)<\\/strike>/gi,\"<del>$1</del>\"):t.replace(/<del>([\\w\\W]*?)<\\/del>/gi,\"<strike>$1</strike>\")},cleanStripTags:function(t){if(\"\"==t||void 0===t)return t;var e=!1;!1!==this.opts.allowedTags&&(e=!0);var i=!0===e?this.opts.allowedTags:this.opts.deniedTags;return t=t.replace(/<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi,(function(t,s){return!0===e?$.inArray(s.toLowerCase(),i)>\"-1\"?t:\"\":$.inArray(s.toLowerCase(),i)>\"-1\"?\"\":t})),t=this.cleanConvertInlineTags(t)},cleanSavePreCode:function(t,e){var i=t.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/gi);return null!==i&&$.each(i,$.proxy((function(i,s){var o=s.match(/<(pre|code)(.*?)>([\\w\\W]*?)<\\/(pre|code)>/i);o[3]=o[3].replace(/&nbsp;/g,\" \"),!1!==e&&(o[3]=this.cleanEncodeEntities(o[3])),o[3]=o[3].replace(/\\$/g,\"&#36;\"),t=t.replace(s,\"<\"+o[1]+o[2]+\">\"+o[3]+\"</\"+o[1]+\">\")}),this)),t},cleanEncodeEntities:function(t){return(t=String(t).replace(/&amp;/g,\"&\").replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&quot;/g,'\"')).replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},cleanUnverified:function(){var t=this.$editor.find(\"li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite\");t.filter('[style*=\"background-color: transparent;\"][style*=\"line-height\"]').css(\"background-color\",\"\").css(\"line-height\",\"\"),t.filter('[style*=\"background-color: transparent;\"]').css(\"background-color\",\"\"),t.css(\"line-height\",\"\"),$.each(t,$.proxy((function(t,e){this.removeEmptyAttr(e,\"style\")}),this));var e=this.$editor.find(\"b, strong, i, em, u, strike, del\");e.css(\"font-size\",\"\"),$.each(e,$.proxy((function(t,e){this.removeEmptyAttr(e,\"style\")}),this)),this.$editor.find('div[style=\"text-align: -webkit-auto;\"]').contents().unwrap(),this.$editor.find(\"ul, ol, li\").removeAttr(\"style\")},cleanHtml:function(t){var e=0,i=t.length,s=0,o=null,r=null,a=\"\",n=\"\",l=\"\";for(this.cleanlevel=0;e<i;e++){if(s=e,-1==t.substr(e).indexOf(\"<\"))return n+=t.substr(e),this.cleanFinish(n);for(;s<i&&\"<\"!=t.charAt(s);)s++;for(e!=s&&((l=t.substr(e,s-e)).match(/^\\s{2,}$/g)||(\"\\n\"==n.charAt(n.length-1)?n+=this.cleanGetTabs():\"\\n\"==l.charAt(0)&&(n+=\"\\n\"+this.cleanGetTabs(),l=l.replace(/^\\s+/,\"\")),n+=l),l.match(/\\n/)&&(n+=\"\\n\"+this.cleanGetTabs())),o=s;s<i&&\">\"!=t.charAt(s);)s++;var c;if(e=s,\"!--\"==(a=t.substr(o,s-o)).substr(1,3)){if(!a.match(/--$/)){for(;\"--\\x3e\"!=t.substr(s,3);)s++;s+=2,a=t.substr(o,s-o),e=s}\"\\n\"!=n.charAt(n.length-1)&&(n+=\"\\n\"),n+=this.cleanGetTabs(),n+=a+\">\\n\"}else\"!\"==a[1]?n=this.placeTag(a+\">\",n):\"?\"==a[1]?n+=a+\">\\n\":(c=a.match(/^<(script|style|pre|code)/i))?(c[1]=c[1].toLowerCase(),a=this.cleanTag(a),n=this.placeTag(a,n),(r=String(t.substr(e+1)).toLowerCase().indexOf(\"</\"+c[1]))&&(l=t.substr(e+1,r),e+=r,n+=l)):(a=this.cleanTag(a),n=this.placeTag(a,n))}return this.cleanFinish(n)},cleanGetTabs:function(){for(var t=\"\",e=0;e<this.cleanlevel;e++)t+=\"\\t\";return t},cleanFinish:function(t){return t=(t=(t=(t=t.replace(/\\n\\s*\\n/g,\"\\n\")).replace(/^[\\s\\n]*/,\"\")).replace(/[\\s\\n]*$/,\"\")).replace(/<script(.*?)>\\n<\\/script>/gi,\"<script$1><\\/script>\"),this.cleanlevel=0,t},cleanTag:function(t){var e,i=\"\",s=\"\";for((t=(t=(t=t.replace(/\\n/g,\" \")).replace(/\\s{2,}/g,\" \")).replace(/^\\s+|\\s+$/g,\" \")).match(/\\/$/)&&(s=\"/\",t=t.replace(/\\/+$/,\"\"));e=/\\s*([^= ]+)(?:=((['\"']).*?\\3|[^ ]+))?/.exec(t);)e[2]?i+=e[1].toLowerCase()+\"=\"+e[2]:e[1]&&(i+=e[1].toLowerCase()),i+=\" \",t=t.substr(e[0].length);return i.replace(/\\s*$/,\"\")+s+\">\"},placeTag:function(t,e){var i=t.match(this.cleannewLevel);return(t.match(this.cleanlineBefore)||i)&&(e=e.replace(/\\s*$/,\"\"),e+=\"\\n\"),i&&\"/\"==t.charAt(1)&&this.cleanlevel--,\"\\n\"==e.charAt(e.length-1)&&(e+=this.cleanGetTabs()),i&&\"/\"!=t.charAt(1)&&this.cleanlevel++,e+=t,(t.match(this.cleanlineAfter)||t.match(this.cleannewLevel))&&(e=e.replace(/ *$/,\"\"),e+=\"\\n\"),e},formatEmpty:function(t){var e=$.trim(this.$editor.html());if(this.opts.linebreaks)\"\"==e&&(t.preventDefault(),this.$editor.html(\"\"),this.focus());else{var i=(e=e.replace(/<br\\s?\\/?>/i,\"\")).replace(/<p>\\s?<\\/p>/gi,\"\");if(\"\"===e||\"\"===i){t.preventDefault();var s=$(this.opts.emptyHtml).get(0);this.$editor.html(s),this.focus()}}this.sync()},formatBlocks:function(t){this.browser(\"mozilla\")&&this.isFocused()&&this.$editor.focus(),this.bufferSet();var e=this.getBlocks();this.selectionSave(),$.each(e,$.proxy((function(e,i){if(\"LI\"!==i.tagName){var s=$(i).parent();if(\"p\"===t){if(\"P\"===i.tagName&&0!=s.length&&\"BLOCKQUOTE\"===s[0].tagName||\"BLOCKQUOTE\"===i.tagName)return void this.formatQuote();if(this.opts.linebreaks){if(!i||0!=i.tagName.search(/H[1-6]/))return;$(i).replaceWith(i.innerHTML+\"<br>\")}else this.formatBlock(t,i)}else this.formatBlock(t,i)}}),this)),this.selectionRestore(),this.sync()},formatBlock:function(t,e){if(!1===e&&(e=this.getBlock()),!1===e&&!0===this.opts.linebreaks)return this.execCommand(\"formatblock\",t),!0;var i=\"\";if(\"code\"!==t?i=$(e).contents():(i=$(e).html(),\"\"===$.trim(i)&&(i='<span id=\"selection-marker-1\"></span>')),\"CODE\"===e.tagName&&(t=\"p\"),!0===this.opts.linebreaks&&\"p\"===t)$(e).replaceWith($(\"<div>\").append(i).html()+\"<br>\");else{var s=this.getParent(),o=$(\"<\"+t+\">\").append(i);$(e).replaceWith(o),s&&\"TD\"==s.tagName&&$(o).wrapAll(\"<td>\")}},formatChangeTag:function(t,e,i){!1!==i&&this.selectionSave();var s=$(\"<\"+e+\"/>\");return $(t).replaceWith((function(){return s.append($(this).contents())})),!1!==i&&this.selectionRestore(),s},formatQuote:function(){if(this.browser(\"mozilla\")&&this.isFocused()&&this.$editor.focus(),this.bufferSet(),!1===this.opts.linebreaks){this.selectionSave();var t=this.getBlocks(),e=!1,i=t.length;if(t){var s=\"\",o=\"\",r=!1,a=!0;if($.each(t,(function(t,e){\"P\"!==e.tagName&&(a=!1)})),$.each(t,$.proxy((function(n,l){if(\"BLOCKQUOTE\"===l.tagName)this.formatBlock(\"p\",l,!1);else if(\"P\"===l.tagName)if(\"BLOCKQUOTE\"==(e=$(l).parent())[0].tagName){var c=$(e).children(\"p\").length;1==c?$(e).replaceWith(l):c==i?(r=\"blockquote\",s+=this.outerHtml(l)):(r=\"html\",s+=this.outerHtml(l),0==n?($(l).addClass(\"redactor-replaced\").empty(),o=this.outerHtml(l)):$(l).remove())}else!1===a||1==t.length?this.formatBlock(\"blockquote\",l,!1):(r=\"paragraphs\",s+=this.outerHtml(l));else\"LI\"!==l.tagName&&this.formatBlock(\"blockquote\",l,!1)}),this)),r)if(\"paragraphs\"==r)$(t[0]).replaceWith(\"<blockquote>\"+s+\"</blockquote>\"),$(t).remove();else if(\"blockquote\"==r)$(e).replaceWith(s);else if(\"html\"==r){var n=this.$editor.html().replace(o,\"</blockquote>\"+s+\"<blockquote>\");this.$editor.html(n),this.$editor.find(\"blockquote\").each((function(){\"\"==$.trim($(this).html())&&$(this).remove()}))}}this.selectionRestore()}else{var l=this.getBlock();if(\"BLOCKQUOTE\"===l.tagName){this.selectionSave();n=$.trim($(l).html());var c=$.trim(this.getSelectionHtml());if((n=n.replace(/<span(.*?)id=\"selection-marker(.*?)<\\/span>/gi,\"\"))==c)$(l).replaceWith($(l).html()+\"<br>\");else{this.inlineFormat(\"tmp\");var d=this.$editor.find(\"tmp\");d.empty();var h=this.$editor.html().replace(\"<tmp></tmp>\",'</blockquote><span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"+c+\"<blockquote>\");this.$editor.html(h),d.remove(),this.$editor.find(\"blockquote\").each((function(){\"\"==$.trim($(this).html())&&$(this).remove()}))}this.selectionRestore(),this.$editor.find(\"span#selection-marker-1\").attr(\"id\",!1)}else{var p=this.selectionWrap(\"blockquote\");n=$(p).html();$.each([\"ul\",\"ol\",\"table\",\"tr\",\"tbody\",\"thead\",\"tfoot\",\"dl\"],(function(t,e){n=(n=n.replace(new RegExp(\"<\"+e+\"(.*?)>\",\"gi\"),\"\")).replace(new RegExp(\"</\"+e+\">\",\"gi\"),\"\")}));var u=this.opts.blockLevelElements;$.each(u,(function(t,e){n=(n=n.replace(new RegExp(\"<\"+e+\"(.*?)>\",\"gi\"),\"\")).replace(new RegExp(\"</\"+e+\">\",\"gi\"),\"<br>\")})),$(p).html(n),this.selectionElement(p);var f=$(p).next();0!=f.length&&\"BR\"===f[0].tagName&&f.remove()}}this.sync()},blockRemoveAttr:function(t){var e=this.getBlocks();$(e).removeAttr(t),this.sync()},blockSetAttr:function(t,e){var i=this.getBlocks();$(i).attr(t,e),this.sync()},blockRemoveStyle:function(t){var e=this.getBlocks();$(e).css(t,\"\"),this.removeEmptyAttr(e,\"style\"),this.sync()},blockSetStyle:function(t,e){var i=this.getBlocks();$(i).css(t,e),this.sync()},blockRemoveClass:function(t){var e=this.getBlocks();$(e).removeClass(t),this.removeEmptyAttr(e,\"class\"),this.sync()},blockSetClass:function(t){var e=this.getBlocks();$(e).addClass(t),this.sync()},inlineRemoveClass:function(t){this.selectionSave(),this.inlineEachNodes((function(e){$(e).removeClass(t),this.removeEmptyAttr(e,\"class\")})),this.selectionRestore(),this.sync()},inlineSetClass:function(t){var e=this.getCurrent();$(e).hasClass(t)||this.inlineMethods(\"addClass\",t)},inlineRemoveStyle:function(t){this.selectionSave(),this.inlineEachNodes((function(e){$(e).css(t,\"\"),this.removeEmptyAttr(e,\"style\")})),this.selectionRestore(),this.sync()},inlineSetStyle:function(t,e){this.inlineMethods(\"css\",t,e)},inlineRemoveAttr:function(t){this.selectionSave();var e=this.getRange(),i=this.getElement(),s=this.getNodes();(e.collapsed||e.startContainer===e.endContainer&&i)&&(s=$(i)),$(s).removeAttr(t),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(t,e){this.inlineMethods(\"attr\",t,e)},inlineMethods:function(t,e,i){this.bufferSet(),this.selectionSave();var s=this.getRange(),o=this.getElement();if(!s.collapsed&&s.startContainer!==s.endContainer||!o||this.nodeTestBlocks(o)){var r,a=i;switch(e){case\"font-size\":r=\"fontSize\",a=4;break;case\"font-family\":r=\"fontName\";break;case\"color\":r=\"foreColor\";break;case\"background-color\":r=\"backColor\"}this.document.execCommand(r,!1,a);var n=this.$editor.find(\"font\");$.each(n,$.proxy((function(s,o){this.inlineSetMethods(t,o,e,i)}),this))}else $(o)[t](e,i);this.selectionRestore(),this.sync()},inlineSetMethods:function(t,e,i,s){var o,r=$(e).parent();return this.getSelectionText()==$(r).text()&&r&&\"INLINE\"===r[0].tagName&&0!=r[0].attributes.length?(o=r,$(e).replaceWith($(e).html())):(o=$(\"<inline>\").append($(e).contents()),$(e).replaceWith(o)),$(o)[t](i,s),o},inlineEachNodes:function(t){var e,i=this.getRange(),s=this.getElement(),o=this.getNodes();(i.collapsed||i.startContainer===i.endContainer&&s)&&(o=$(s),e=!0),$.each(o,$.proxy((function(i,s){if(!e&&\"INLINE\"!==s.tagName){if(!(this.getSelectionText()==$(s).parent().text())||\"INLINE\"!==s.parentNode.tagName||$(s.parentNode).hasClass(\"redactor_editor\"))return;s=s.parentNode}t.call(this,s)}),this))},inlineUnwrapSpan:function(){var t=this.$editor.find(\"inline\");$.each(t,$.proxy((function(t,e){var i=$(e);void 0===i.attr(\"class\")&&void 0===i.attr(\"style\")&&i.contents().unwrap()}),this))},inlineFormat:function(t){this.selectionSave(),this.document.execCommand(\"fontSize\",!1,4);var e=this.$editor.find(\"font\");$.each(e,(function(e,i){var s=$(\"<\"+t+\"/>\").append($(i).contents());$(i).replaceWith(s),s})),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(t){this.selectionSave();var e=t.toUpperCase(),i=this.getNodes(),s=$(this.getParent()).parent();$.each(i,(function(t,i){i.tagName===e&&this.inlineRemoveFormatReplace(i)})),s&&s[0].tagName===e&&this.inlineRemoveFormatReplace(s),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(t){$(t).replaceWith($(t).contents())},insertHtml:function(t,e){var i=this.getCurrent(),s=i.parentNode;this.focusWithSaveScroll(),this.bufferSet();var o=$(\"<div>\").append($.parseHTML(t));t=o.html(),t=this.cleanRemoveEmptyTags(t),o=$(\"<div>\").append($.parseHTML(t));var r=this.getBlock();if(1==o.contents().length){var a=o.contents()[0].tagName;(\"P\"!=a&&a==r.tagName||\"CODE\"==a)&&(o=$(\"<div>\").append(t))}this.opts.linebreaks&&(t=t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),!this.opts.linebreaks&&1==o.contents().length&&3==o.contents()[0].nodeType&&(this.getRangeSelectedNodes().length>2||!i||\"BODY\"==i.tagName&&!s||\"HTML\"==s.tagName)&&(t=\"<p>\"+t+\"</p>\"),t=this.setSpansVerifiedHtml(t),o.contents().length>1&&r||o.contents().is(\"p, :header, ul, ol, li, div, table, td, blockquote, code, address, section, header, footer, aside, article\")?this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(t):this.document.selection.createRange().pasteHTML(t):this.document.execCommand(\"inserthtml\",!1,t):this.insertHtmlAdvanced(t,!1),this.selectall&&this.window.setTimeout($.proxy((function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())}),this),1),this.observeStart(),this.setNonEditable(),!1!==e&&this.sync()},insertHtmlAdvanced:function(t,e){t=this.setSpansVerifiedHtml(t);var i=this.getSelection();if(i.getRangeAt&&i.rangeCount){var s=i.getRangeAt(0);s.deleteContents();var o=document.createElement(\"div\");o.innerHTML=t;for(var r,a,n=document.createDocumentFragment();r=o.firstChild;)a=n.appendChild(r);s.insertNode(n),a&&((s=s.cloneRange()).setStartAfter(a),s.collapse(!0),i.removeAllRanges(),i.addRange(s))}!1!==e&&this.sync()},insertBeforeCursor:function(t){t=this.setSpansVerifiedHtml(t);var e=$(t),i=document.createElement(\"span\");i.innerHTML=\"\u200b\";var s=this.getRange();s.insertNode(i),s.insertNode(e[0]),s.collapse(!1);var o=this.getSelection();o.removeAllRanges(),o.addRange(s),this.sync()},insertText:function(t){var e=$($.parseHTML(t));e.length&&(t=e.text()),this.focusWithSaveScroll(),this.browser(\"msie\")?this.isIe11()?this.execPasteFrag(t):this.document.selection.createRange().pasteHTML(t):this.document.execCommand(\"inserthtml\",!1,t),this.sync()},insertNode:function(t){if(\"SPAN\"==(t=t[0]||t).tagName){var e=\"inline\",i=t.outerHTML,s=new RegExp(\"<\"+t.tagName,\"i\"),o=i.replace(s,\"<\"+e);s=new RegExp(\"</\"+t.tagName,\"i\"),o=o.replace(s,\"</\"+e),t=$(o)[0]}var r=this.getSelection();return r.getRangeAt&&r.rangeCount&&(range=r.getRangeAt(0),range.deleteContents(),range.insertNode(t),range.setEndAfter(t),range.setStartAfter(t),r.removeAllRanges(),r.addRange(range)),t},insertNodeToCaretPositionFromPoint:function(t,e){var i,s=t.clientX,o=t.clientY;if(this.document.caretPositionFromPoint){var r=this.document.caretPositionFromPoint(s,o);(i=this.getRange()).setStart(r.offsetNode,r.offset),i.collapse(!0),i.insertNode(e)}else if(this.document.caretRangeFromPoint)(i=this.document.caretRangeFromPoint(s,o)).insertNode(e);else if(void 0!==document.body.createTextRange){(i=this.document.body.createTextRange()).moveToPoint(s,o);var a=i.duplicate();a.moveToPoint(s,o),i.setEndPoint(\"EndToEnd\",a),i.select()}},insertAfterLastElement:function(t,e){if(void 0!==e&&(t=e),this.isEndOfElement()){if(this.opts.linebreaks){var i=$(\"<div>\").append($.trim(this.$editor.html())).contents(),s=i.last()[0];if(\"SPAN\"==s.tagName&&\"\"==s.innerHTML&&(s=i.prev()[0]),this.outerHtml(s)!=this.outerHtml(t))return!1}else if(this.$editor.contents().last()[0]!==t)return!1;this.insertingAfterLastElement(t)}},insertingAfterLastElement:function(t){if(this.bufferSet(),!1===this.opts.linebreaks){var e=$(this.opts.emptyHtml);$(t).after(e),this.selectionStart(e)}else{e=$('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];$(t).after(e),$(e).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find(\"span#selection-marker-1\").removeAttr(\"id\")}},insertLineBreak:function(t){this.selectionSave();var e=\"<br>\";if(1==t&&(e=\"<br><br>\"),this.browser(\"mozilla\")){var i=$(\"<span>\").html(this.opts.invisibleSpace);this.$editor.find(\"#selection-marker-1\").before(e).before(i).before(this.opts.invisibleSpace),this.setCaretAfter(i[0]),i.remove(),this.selectionRemoveMarkers()}else{var s=this.getParent();if(s&&\"A\"===s.tagName)if(this.getCaretOffset(s)==$.trim($(s).text()).replace(/\\n\\r\\n/g,\"\").length){this.selectionRemoveMarkers();var o=$('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];return $(s).after(o),$(o).before(e+(this.browser(\"webkit\")?this.opts.invisibleSpace:\"\")),this.selectionRestore(),!0}this.$editor.find(\"#selection-marker-1\").before(e+(this.browser(\"webkit\")?this.opts.invisibleSpace:\"\")),this.selectionRestore()}},insertDoubleLineBreak:function(){this.insertLineBreak(!0)},replaceLineBreak:function(t){var e=$(\"<br>\"+this.opts.invisibleSpace);$(t).replaceWith(e),this.selectionStart(e)},pasteClean:function(t){(t=this.callback(\"pasteBefore\",!1,t),this.browser(\"msie\"))&&(0==(e=$.trim(t)).search(/^<a(.*?)>(.*?)<\\/a>$/i)&&(t=t.replace(/^<a(.*?)>(.*?)<\\/a>$/i,\"$2\")));if(t=t.replace(/on([a-z]+)=|javascript\\:/gi,\"\"),this.opts.pastePlainText){var e=this.document.createElement(\"div\");return t=t.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi,\"\\n\"),e.innerHTML=t,t=e.textContent||e.innerText,t=(t=$.trim(t)).replace(\"\\n\",\"<br>\"),t=this.cleanParagraphy(t),this.pasteInsert(t),!1}var i=!1;if(this.currentOrParentIs(\"TD\")){i=!0;var s=this.opts.blockLevelElements;s.push(\"tr\"),s.push(\"table\"),$.each(s,(function(e,i){t=(t=t.replace(new RegExp(\"<\"+i+\"(.*?)>\",\"gi\"),\"\")).replace(new RegExp(\"</\"+i+\">\",\"gi\"),\"<br>\")}))}if(this.currentOrParentIs(\"CODE\"))return t=this.pastePre(t),this.pasteInsert(t),!0;if(t=(t=(t=(t=(t=(t=(t=t.replace(/<img(.*?)v:shapes=(.*?)>/gi,\"\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpFirst\"([\\w\\W]*?)<\\/p>/gi,\"<ul><li$2</li>\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpMiddle\"([\\w\\W]*?)<\\/p>/gi,\"<li$2</li>\")).replace(/<p(.*?)class=\"MsoListParagraphCxSpLast\"([\\w\\W]*?)<\\/p>/gi,\"<li$2</li></ul>\")).replace(/<p(.*?)class=\"MsoListParagraph\"([\\w\\W]*?)<\\/p>/gi,\"<ul><li$2</li></ul>\")).replace(/\u00b7/g,\"\")).replace(/<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi,\"\"),!0===this.opts.cleanSpaces&&(t=(t=t.replace(/(&nbsp;){2,}/gi,\"&nbsp;\")).replace(/&nbsp;/gi,\" \")),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<b\\sid=\"internal-source-marker(.*?)\">([\\w\\W]*?)<\\/b>/gi,\"$2\")).replace(/<b(.*?)id=\"docs-internal-guid(.*?)\">([\\w\\W]*?)<\\/b>/gi,\"$3\")).replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style=\"font-weight: bold;\"><span style=\"font-style: italic;\">')).replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style=\"font-style: italic;\">')).replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style=\"font-weight: bold;\">')).replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style=\"text-decoration: underline;\">')).replace(/<td>\\u200b*<\\/td>/gi,\"[td]\")).replace(/<td>&nbsp;<\\/td>/gi,\"[td]\")).replace(/<td><br><\\/td>/gi,\"[td]\")).replace(/<td(.*?)colspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi,'[td colspan=\"$2\"]$4[/td]')).replace(/<td(.*?)rowspan=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/td>/gi,'[td rowspan=\"$2\"]$4[/td]')).replace(/<a(.*?)href=\"(.*?)\"(.*?)>([\\w\\W]*?)<\\/a>/gi,'[a href=\"$2\"]$4[/a]')).replace(/<iframe(.*?)>([\\w\\W]*?)<\\/iframe>/gi,\"[iframe$1]$2[/iframe]\")).replace(/<video(.*?)>([\\w\\W]*?)<\\/video>/gi,\"[video$1]$2[/video]\")).replace(/<audio(.*?)>([\\w\\W]*?)<\\/audio>/gi,\"[audio$1]$2[/audio]\")).replace(/<embed(.*?)>([\\w\\W]*?)<\\/embed>/gi,\"[embed$1]$2[/embed]\")).replace(/<object(.*?)>([\\w\\W]*?)<\\/object>/gi,\"[object$1]$2[/object]\")).replace(/<param(.*?)>/gi,\"[param$1]\")).replace(/<img(.*?)>/gi,\"[img$1]\")).replace(/ class=\"(.*?)\"/gi,\"\")).replace(/<(\\w+)([\\w\\W]*?)>/gi,\"<$1>\"),this.opts.linebreaks?(t=(t=t.replace(/<strong><\\/strong>/gi,\"\")).replace(/<u><\\/u>/gi,\"\"),this.opts.cleanFontTag&&(t=t.replace(/<font(.*?)>([\\w\\W]*?)<\\/font>/gi,\"$2\")),t=t.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi,\"<br>\")):t=t.replace(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&nbsp;|<br>)<\\/[^>]+>/gi,\"\"),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<div>\\s*?\\t*?\\n*?(<ul>|<ol>|<p>)/gi,\"$1\")).replace(/\\[td colspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi,'<td colspan=\"$1\">$2</td>')).replace(/\\[td rowspan=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/td\\]/gi,'<td rowspan=\"$1\">$2</td>')).replace(/\\[td\\]/gi,\"<td>&nbsp;</td>\")).replace(/\\[a href=\"(.*?)\"\\]([\\w\\W]*?)\\[\\/a\\]/gi,'<a href=\"$1\">$2</a>')).replace(/\\[iframe(.*?)\\]([\\w\\W]*?)\\[\\/iframe\\]/gi,\"<iframe$1>$2</iframe>\")).replace(/\\[video(.*?)\\]([\\w\\W]*?)\\[\\/video\\]/gi,\"<video$1>$2</video>\")).replace(/\\[audio(.*?)\\]([\\w\\W]*?)\\[\\/audio\\]/gi,\"<audio$1>$2</audio>\")).replace(/\\[embed(.*?)\\]([\\w\\W]*?)\\[\\/embed\\]/gi,\"<embed$1>$2</embed>\")).replace(/\\[object(.*?)\\]([\\w\\W]*?)\\[\\/object\\]/gi,\"<object$1>$2</object>\")).replace(/\\[param(.*?)\\]/gi,\"<param$1>\")).replace(/\\[img(.*?)\\]/gi,\"<img$1>\"),t=this.opts.convertDivs?(t=(t=(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"<p>$2</p>\")).replace(/<\\/div><p>/gi,\"<p>\")).replace(/<\\/p><\\/div>/gi,\"</p>\")).replace(/<p><\\/p>/gi,\"<br />\"):t.replace(/<div><\\/div>/gi,\"<br />\"),t=this.cleanStripTags(t),this.currentOrParentIs(\"LI\")?t=t.replace(/<p>([\\w\\W]*?)<\\/p>/gi,\"$1<br>\"):!1===i&&(t=this.cleanParagraphy(t)),t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<span(.*?)>([\\w\\W]*?)<\\/span>/gi,\"$2\")).replace(/<img>/gi,\"\")).replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi,\"\")).replace(/\\n{3,}/gi,\"\\n\")).replace(/<p><p>/gi,\"<p>\")).replace(/<\\/p><\\/p>/gi,\"</p>\")).replace(/<li>(\\s*|\\t*|\\n*)<p>/gi,\"<li>\")).replace(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi,\"</li>\"),!0===this.opts.linebreaks&&(t=t.replace(/<p(.*?)>([\\w\\W]*?)<\\/p>/gi,\"$2<br>\")),t=(t=(t=t.replace(/<[^\\/>][^>][^img|param|source|td][^<]*>(\\s*|\\t*|\\n*| |<br>)<\\/[^>]+>/gi,\"\")).replace(/<img src=\"webkit-fake-url\\:\\/\\/(.*?)\"(.*?)>/gi,\"\")).replace(/<td(.*?)>(\\s*|\\t*|\\n*)<p>([\\w\\W]*?)<\\/p>(\\s*|\\t*|\\n*)<\\/td>/gi,\"<td$1>$3</td>\"),this.opts.convertDivs&&(t=(t=t.replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"$2\")).replace(/<div(.*?)>([\\w\\W]*?)<\\/div>/gi,\"$2\")),this.pasteClipboardMozilla=!1,this.browser(\"mozilla\")){if(this.opts.clipboardUpload){var o=t.match(/<img src=\"data:image(.*?)\"(.*?)>/gi);if(null!==o)for(var r in this.pasteClipboardMozilla=o,o){var a=o[r].replace(\"<img\",'<img data-mozilla-paste-image=\"'+r+'\" ');t=t.replace(o[r],a)}}for(;/<br>$/gi.test(t);)t=t.replace(/<br>$/gi,\"\")}if(t=t.replace(/<p>\u2022([\\w\\W]*?)<\\/p>/gi,\"<li>$1</li>\"),this.browser(\"msie\"))for(;/<font>([\\w\\W]*?)<\\/font>/gi.test(t);)t=t.replace(/<font>([\\w\\W]*?)<\\/font>/gi,\"$1\");!1===i&&(t=(t=(t=(t=t.replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$4</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$3</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<p(.*?)>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$4</td>\")).replace(/<td(.*?)>([\\w\\W]*?)<\\/p>([\\w\\W]*?)<\\/td>/gi,\"<td$1>$2$3</td>\")),t=(t=t.replace(/\\n/g,\" \")).replace(/<p>\\n?<li>/gi,\"<li>\"),this.pasteInsert(t)},pastePre:function(t){t=t.replace(/<br>|<\\/H[1-6]>|<\\/p>|<\\/div>/gi,\"\\n\");var e=this.document.createElement(\"div\");return e.innerHTML=t,this.cleanEncodeEntities(e.textContent||e.innerText)},pasteInsert:function(t){t=this.callback(\"pasteAfter\",!1,t),this.selectall?(this.$editor.html(t),this.selectionRemove(),this.focusEnd(),this.sync()):this.insertHtml(t),this.selectall=!1,setTimeout($.proxy((function(){this.rtePaste=!1,this.browser(\"mozilla\")&&this.$editor.find(\"p:empty\").remove(),!1!==this.pasteClipboardMozilla&&this.pasteClipboardUploadMozilla()}),this),100),this.opts.autoresize&&!0!==this.fullscreen?$(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardAppendFields:function(t){return!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy((function(e,i){null!=i&&0===i.toString().indexOf(\"#\")&&(i=$(i).val()),t[e]=i}),this)),t},pasteClipboardUploadMozilla:function(){var t=this.$editor.find(\"img[data-mozilla-paste-image]\");$.each(t,$.proxy((function(t,e){var i=$(e),s=e.src.split(\",\"),o={contentType:s[0].split(\";\")[0].split(\":\")[1],data:s[1]};o=this.pasteClipboardAppendFields(o),$.post(this.opts.clipboardUploadUrl,o,$.proxy((function(t){var e=\"string\"==typeof t?$.parseJSON(t):t;i.attr(\"src\",e.image.url),i.removeAttr(\"data-mozilla-paste-image\"),this.sync(),this.callback(\"imageUpload\",i,e)}),this))}),this))},pasteClipboardUpload:function(t){var e=t.target.result,i=e.split(\",\"),s={contentType:i[0].split(\";\")[0].split(\":\")[1],data:i[1]};this.opts.clipboardUpload?(s=this.pasteClipboardAppendFields(s),$.post(this.opts.clipboardUploadUrl,s,$.proxy((function(t){var e=\"string\"==typeof t?$.parseJSON(t):t,i='<img src=\"'+e.image.url+'\" id=\"clipboard-image-marker\" />';this.execCommand(\"inserthtml\",i,!1);var s=$(this.$editor.find(\"img#clipboard-image-marker\"));s.length?s.removeAttr(\"id\"):s=!1,this.sync(),s&&this.callback(\"imageUpload\",s,e)}),this))):this.insertHtml('<img src=\"'+e+'\" />')},bufferSet:function(t){!1!==t&&this.selectionSave(),this.opts.buffer.push(this.$editor.html()),!1!==t&&this.selectionRemoveMarkers(\"buffer\")},bufferUndo:function(){0!==this.opts.buffer.length?(this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),setTimeout($.proxy(this.observeStart,this),100)):this.focusWithSaveScroll()},bufferRedo:function(){if(0===this.opts.rebuffer.length)return this.focusWithSaveScroll(),!1;this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),setTimeout($.proxy(this.observeStart,this),4)},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find(\"a\").on(\"click\",$.proxy(this.linkObserver,this)),this.$editor.on(\"click.redactor\",$.proxy((function(t){this.linkObserverTooltipClose(t)}),this)),$(document).on(\"click.redactor\",$.proxy((function(t){this.linkObserverTooltipClose(t)}),this))},observeImages:function(){if(!1===this.opts.observeImages)return!1;this.$editor.find(\"img\").each($.proxy((function(t,e){this.browser(\"msie\")&&$(e).attr(\"unselectable\",\"on\");var i=$(e).parent();i.hasClass(\"royalSlider\")||i.hasClass(\"fotorama\")||this.imageResize(e)}),this)),this.$editor.find(\".fotorama, .royalSlider\").on(\"click\",$.proxy(this.editGallery,this))},linkObserver:function(t){var e=$(t.target),i=$(t.target).parent();if(!i.hasClass(\"royalSlider\")&&!i.hasClass(\"fotorama\")&&0!=e.length&&\"A\"===e[0].tagName){var s=e.offset();if(this.opts.iframe){var o=this.$frame.offset();s.top=o.top+(s.top-$(this.document).scrollTop()),s.left+=o.left}var r=$('<span class=\"redactor-link-tooltip\"></span>'),a=e.attr(\"href\");void 0===a&&(a=\"\"),a.length>24&&(a=a.substring(0,24)+\"...\");var n=$('<a href=\"'+e.attr(\"href\")+'\" target=\"_blank\">'+a+\"</a>\").on(\"click\",$.proxy((function(){this.linkObserverTooltipClose(!1)}),this)),l=$('<a href=\"#\">'+this.opts.curLang.edit+\"</a>\").on(\"click\",$.proxy((function(t){t.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)}),this)),c=$('<a href=\"#\">'+this.opts.curLang.unlink+\"</a>\").on(\"click\",$.proxy((function(t){t.preventDefault(),this.execCommand(\"unlink\"),this.linkObserverTooltipClose(!1)}),this));r.append(n),r.append(\" | \"),r.append(l),r.append(\" | \"),r.append(c),r.css({top:s.top+20+\"px\",left:s.left+\"px\"}),$(\".redactor-link-tooltip\").remove(),$(\"body\").append(r)}},linkObserverTooltipClose:function(t){if(!1!==t&&\"A\"==t.target.tagName)return!1;$(\".redactor-link-tooltip\").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return this.document.createRange()},selectionElement:function(t){this.setCaret(t)},selectionStart:function(t){this.selectionSet(t[0]||t,0,null,0)},selectionEnd:function(t){this.selectionSet(t[0]||t,1,null,1)},selectionSet:function(t,e,i,s){null==i&&(i=t),null==s&&(s=e);var o=this.getSelection();if(o){if(\"P\"==t.tagName&&\"\"==t.innerHTML&&(t.innerHTML=this.opts.invisibleSpace),\"BR\"==t.tagName&&!1===this.opts.linebreaks){var r=$(this.opts.emptyHtml)[0];$(t).replaceWith(r),i=t=r}var a=this.getRange();a.setStart(t,e),a.setEnd(i,s);try{o.removeAllRanges()}catch(t){}o.addRange(a)}},selectionWrap:function(t){t=t.toLowerCase();var e=this.getBlock();if(e){var i=this.formatChangeTag(e,t);return this.sync(),i}var s=this.getSelection().getRangeAt(0);return(i=document.createElement(t)).appendChild(s.extractContents()),s.insertNode(i),this.selectionElement(i),i},selectionAll:function(){var t=this.getRange();t.selectNodeContents(this.$editor[0]);var e=this.getSelection();e.removeAllRanges(),e.addRange(t)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(t){var e=this.getRange(),i=e.cloneRange();return i.selectNodeContents(t),i.setEnd(e.endContainer,e.endOffset),$.trim(i.toString()).length},getCaretOffsetRange:function(){return new Range(this.getSelection().getRangeAt(0))},setCaret:function(t,e,i){void 0===i&&(i=e),t=t[0]||t;var s=this.getRange();s.selectNodeContents(t);var o,r=this.getTextNodesIn(t),a=!1,n=0;if(1==r.length&&e)s.setStart(r[0],e),s.setEnd(r[0],i);else for(var l,c=0;l=r[c++];){if(o=n+l.length,!a&&e>=n&&(e<o||e==o&&c<r.length)&&(s.setStart(l,e-n),a=!0),a&&i<=o){s.setEnd(l,i-n);break}n=o}var d=this.getSelection();d.removeAllRanges(),d.addRange(s)},setCaretAfter:function(t){this.$editor.focus(),t=t[0]||t;var e=this.document.createRange();e.setStart(t,1),e.setEnd(t,1);var i=this.window.getSelection(),s=this.document.createRange(),o=this.document.createTextNode(\"\u200b\");$(t).after(o),s.setStartAfter(o),i.removeAllRanges(),i.addRange(s),$(o).remove()},getTextNodesIn:function(t){var e=[];if(3==t.nodeType)e.push(t);else for(var i=t.childNodes,s=0,o=i.length;s<o;++s)e.push.apply(e,this.getTextNodesIn(i[s]));return e},getCurrent:function(){var t=!1,e=this.getSelection();return e&&e.rangeCount>0&&(t=e.getRangeAt(0).startContainer),this.isParentRedactor(t)},getParent:function(t){return!!(t=t||this.getCurrent())&&this.isParentRedactor($(t).parent()[0])},getBlock:function(t){for(void 0===t&&(t=this.getCurrent());t;){if(this.nodeTestBlocks(t))return!$(t).hasClass(\"redactor_editor\")&&t;t=t.parentNode}return!1},getBlocks:function(t){var e=[];if(void 0===t){var i=this.getRange();if(i&&!0===i.collapsed)return[this.getBlock()];t=this.getNodes(i)}return $.each(t,$.proxy((function(t,i){if(!1===this.opts.iframe&&0==$(i).parents(\"div.redactor_editor\").length)return!1;this.nodeTestBlocks(i)&&e.push(i)}),this)),0===e.length&&(e=[this.getBlock()]),e},isInlineNode:function(t){return 1==t.nodeType&&!this.rTestBlock.test(t.nodeName)},nodeTestBlocks:function(t){return 1==t.nodeType&&this.rTestBlock.test(t.nodeName)},tagTestBlock:function(t){return this.rTestBlock.test(t)},getNodes:function(t,e){if(void 0===t||0==t)t=this.getRange();if(t&&!0===t.collapsed)return void 0===e&&this.tagTestBlock(e)?(r=this.getBlock()).tagName==e?[r]:[]:[this.getCurrent()];var i=[],s=[],o=this.document.getSelection();if(o.isCollapsed||(i=this.getRangeSelectedNodes(o.getRangeAt(0))),$.each(i,$.proxy((function(t,i){if(!1===this.opts.iframe&&0==$(i).parents(\"div.redactor_editor\").length)return!1;void 0===e?\"\"!=$.trim(i.textContent)&&s.push(i):i.tagName==e&&s.push(i)}),this)),0==s.length){var r;if(void 0===e&&this.tagTestBlock(e))return(r=this.getBlock()).tagName==e?s.push(r):[];s.push(this.getCurrent())}var a=s[s.length-1];return this.nodeTestBlocks(a)&&(s=s.slice(0,-1)),s},getElement:function(t){for(t||(t=this.getCurrent());t;){if(1==t.nodeType)return!$(t).hasClass(\"redactor_editor\")&&t;t=t.parentNode}return!1},getRangeSelectedNodes:function(t){var e=(t=t||this.getRange()).startContainer,i=t.endContainer;if(e==i)return[e];for(var s=[];e&&e!=i;)s.push(e=this.nextNode(e));for(e=t.startContainer;e&&e!=t.commonAncestorContainer;)s.unshift(e),e=e.parentNode;return s},nextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var t=\"\",e=this.getSelection();if(e.rangeCount){for(var i=this.document.createElement(\"div\"),s=e.rangeCount,o=0;o<s;++o)i.appendChild(e.getRangeAt(o).cloneContents());t=i.innerHTML}return this.syncClean(t)},selectionSave:function(){this.isFocused()||this.focusWithSaveScroll(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(t){if(t){var e=$('<span id=\"selection-marker-1\" class=\"redactor-selection-marker\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0],i=$('<span id=\"selection-marker-2\" class=\"redactor-selection-marker\">'+this.opts.invisibleSpace+\"</span>\",this.document)[0];!0===t.collapsed?this.selectionSetMarker(t,e,!0):(this.selectionSetMarker(t,e,!0),this.selectionSetMarker(t,i,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(t,e,i){var s=t.cloneRange();try{s.collapse(i),s.insertNode(e),s.detach()}catch(t){var o=this.opts.emptyHtml;this.opts.linebreaks&&(o=\"<br>\"),this.$editor.prepend(o),this.focus()}},selectionRestore:function(t,e){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{!0===t&&this.savedSel&&this.$editor.html(this.savedSel);var i=this.$editor.find(\"span#selection-marker-1\"),s=this.$editor.find(\"span#selection-marker-2\");this.browser(\"mozilla\")?this.$editor.focus():this.isFocused()||this.focusWithSaveScroll(),0!=i.length&&0!=s.length?this.selectionSet(i[0],0,s[0],0):0!=i.length&&this.selectionSet(i[0],0,null,0),!1!==e&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(){this.opts.rangy?rangy.removeMarkers(this.savedSel):$.each(this.$editor.find(\"span.redactor-selection-marker\"),(function(){\"\"==$.trim($(this).html().replace(/[^\\u0000-\\u1C7F]/g,\"\"))?$(this).remove():$(this).removeAttr(\"class\").removeAttr(\"id\")}))},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,$.proxy((function(){$(\"#redactor_insert_table_btn\").on(\"click\",$.proxy(this.tableInsert,this)),setTimeout((function(){$(\"#redactor_table_rows\").focus()}),200)}),this))},tableInsert:function(){this.bufferSet(!1);var t,e,i,s,o=$(\"#redactor_table_rows\").val(),r=$(\"#redactor_table_columns\").val(),a=$(\"<div></div>\"),n=Math.floor(99999*Math.random()),l=$('<table id=\"table'+n+'\"><tbody></tbody></table>');for(t=0;t<o;t++){for(e=$(\"<tr></tr>\"),i=0;i<r;i++)s=$(\"<td>\"+this.opts.invisibleSpace+\"</td>\"),0===t&&0===i&&s.append('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),$(e).append(s);l.append(e)}a.append(l);var c=a.html();if(!1===this.opts.linebreaks&&this.browser(\"mozilla\")&&(c+=\"<p>\"+this.opts.invisibleSpace+\"</p>\"),this.modalClose(),this.selectionRestore(),(d=this.getBlock()||this.getCurrent())&&\"BODY\"!=d.tagName){if(\"LI\"==d.tagName)var d=$(d).closest(\"ul, ol\");$(d).after(c)}else this.insertHtmlAdvanced(c,!1);this.selectionRestore();var h=this.$editor.find(\"#table\"+n);this.buttonActiveObserver(),h.find(\"span#selection-marker-1, inline#selection-marker-1\").remove(),h.removeAttr(\"id\"),this.sync()},tableDeleteTable:function(){var t=$(this.getParent()).closest(\"table\");return!!this.isParentRedactor(t)&&(0!=t.length&&(this.bufferSet(),t.remove(),void this.sync()))},tableDeleteRow:function(){var t=this.getParent(),e=$(t).closest(\"table\");if(!this.isParentRedactor(e))return!1;if(0==e.length)return!1;this.bufferSet();var i=$(t).closest(\"tr\"),s=i.prev().length?i.prev():i.next();if(s.length){var o=s.children(\"td\").first();o.length&&o.prepend('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\")}i.remove(),this.selectionRestore(),e.find(\"span#selection-marker-1\").remove(),this.sync()},tableDeleteColumn:function(){var t=this.getParent(),e=$(t).closest(\"table\");if(!this.isParentRedactor(e))return!1;if(0==e.length)return!1;this.bufferSet();var i=$(t).closest(\"td\");i.is(\"td\")||(i=i.closest(\"td\"));var s=i.get(0).cellIndex;e.find(\"tr\").each($.proxy((function(t,e){var i=s-1<0?s+1:s-1;0===t&&$(e).find(\"td\").eq(i).prepend('<span id=\"selection-marker-1\">'+this.opts.invisibleSpace+\"</span>\"),$(e).find(\"td\").eq(s).remove()}),this)),this.selectionRestore(),e.find(\"span#selection-marker-1\").remove(),this.sync()},tableAddHead:function(){var t=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(t))return!1;if(0==t.length)return!1;if(this.bufferSet(),0!==t.find(\"thead\").length)this.tableDeleteHead();else{var e=t.find(\"tr\").first().clone();e.find(\"td\").replaceWith(\"<th></th>\").html(this.opts.invisibleSpace),$thead=$(\"<thead></thead>\"),$thead.append(e),t.prepend($thead),this.sync()}},tableDeleteHead:function(){var t=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(t))return!1;var e=t.find(\"thead\");if(0==e.length)return!1;this.bufferSet(),e.remove(),this.sync()},tableAddRowAbove:function(){this.tableAddRow(\"before\")},tableAddRowBelow:function(){this.tableAddRow(\"after\")},tableAddColumnLeft:function(){this.tableAddColumn(\"before\")},tableAddColumnRight:function(){this.tableAddColumn(\"after\")},tableAddRow:function(t){var e=$(this.getParent()).closest(\"table\");if(!this.isParentRedactor(e))return!1;if(0==e.length)return!1;this.bufferSet();var i=$(this.getParent()).closest(\"tr\"),s=i.clone();s.find(\"td\").html(this.opts.invisibleSpace),\"after\"===t?i.after(s):i.before(s),this.sync()},tableAddColumn:function(t){var e=this.getParent(),i=$(e).closest(\"table\");if(!this.isParentRedactor(i))return!1;if(0==i.length)return!1;this.bufferSet();var s=0,o=this.getCurrent(),r=$(o).closest(\"tr\"),a=$(o).closest(\"td\");r.find(\"td\").each($.proxy((function(t,e){$(e)[0]===a[0]&&(s=t)}),this)),i.find(\"tr\").each($.proxy((function(e,i){var o=$(i).find(\"td\").eq(s),r=o.clone();r.html(this.opts.invisibleSpace),\"after\"===t?o.after(r):o.before(r)}),this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,$.proxy((function(){$(\"#redactor_insert_video_btn\").on(\"click\",$.proxy(this.videoInsert,this)),setTimeout((function(){$(\"#redactor_insert_video_area\").focus()}),200)}),this))},videoInsert:function(){var t=$(\"#redactor_insert_video_area\").val(),e='<iframe width=\"500\" height=\"281\" src=\"',i='\" frameborder=\"0\" allowfullscreen></iframe>';(t=this.cleanStripTags(t)).match(reUrlYoutube)?t=t.replace(reUrlYoutube,e+\"//www.youtube.com/embed/$1\"+i):t.match(reUrlVimeo)?t=t.replace(reUrlVimeo,e+\"//player.vimeo.com/video/$2\"+i):t.match(reUrlFacebook)?t=t.replace(reUrlFacebook,e+\"https://www.facebook.com/video/embed?video_id=$1\"+i):t.match(reUrlRutube)&&(t=t.replace(reUrlRutube,e+\"//rutube.ru/play/embed/$1\"+i)),this.selectionRestore();var s=this.getBlock()||this.getCurrent();s?$(s).after(t):this.insertHtmlAdvanced(t,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var t=$.proxy((function(){if(!1!==this.opts.predefinedLinks){this.predefinedLinksStorage={};var t=this;$.getJSON(this.opts.predefinedLinks,(function(e){if(0!==Object.keys(e).length){var i=$(\"#redactor-predefined-links\");i.html(\"\"),$.each(e,(function(e,s){t.predefinedLinksStorage[e]=s,i.append($(\"<option>\").val(e).html(s.name))})),i.on(\"change\",(function(){var e=$(this).val(),i=\"\",s=\"\";0!=e&&(i=t.predefinedLinksStorage[e].name,s=t.predefinedLinksStorage[e].url),$(\"#redactor_link_url\").val(s),1!=$(\"#redactor_link_url_text\").data(\"is_selected_text\")&&$(\"#redactor_link_url_text\").val(i)})),i.show()}}))}this.insert_link_node=!1;var e=this.getSelection(),i=\"\",s=\"\",o=\"\",r=this.getParent(),a=$(r).parent().get(0);a&&\"A\"===a.tagName&&(r=a),r&&\"A\"===r.tagName?(i=r.href,s=$(r).text(),o=r.target,this.insert_link_node=r):s=e.toString(),$(\"#redactor_link_url_text\").val(s),s.length>0&&$(\"#redactor_link_url_text\").data(\"is_selected_text\",1);var n=self.location.href.replace(/\\/$/i,\"\");if(i=(i=(i=i.replace(n,\"\")).replace(/^\\/#/,\"#\")).replace(\"mailto:\",\"\"),!1===this.opts.linkProtocol){var l=new RegExp(\"^(http|ftp|https)://\"+self.location.host,\"i\");i=i.replace(l,\"\")}$(\"#redactor_link_url\").val(i),\"_blank\"===o&&$(\"#redactor_link_blank\").prop(\"checked\",!0),this.linkInsertPressed=!1,$(\"#redactor_insert_link_btn\").on(\"click\",$.proxy(this.linkProcess,this)),setTimeout((function(){$(\"#redactor_link_url\").focus()}),200)}),this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,t)},linkProcess:function(){if(!this.linkInsertPressed){this.linkInsertPressed=!0;var t=\"\",e=\"\",i=$(\"#redactor_link_url\").val(),s=$(\"#redactor_link_url_text\").val();if(-1!=i.search(\"@\")&&!1===/(http|ftp|https):\\/\\//i.test(i))i=\"mailto:\"+i;else if(0!=i.search(\"#\")){$(\"#redactor_link_blank\").prop(\"checked\")&&(t=' target=\"_blank\"',e=\"_blank\");var o=\"((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}\",r=new RegExp(\"^(http|ftp|https)://\"+o,\"i\"),a=new RegExp(\"^\"+o,\"i\");-1==i.search(r)&&0==i.search(a)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+i)}s=s.replace(/<|>/g,\"\");var n=\"&nbsp;\";this.browser(\"mozilla\")&&(n=\"&nbsp;\"),this.linkInsert('<a href=\"'+i+'\"'+t+\">\"+s+\"</a>\"+n,$.trim(s),i,e)}},linkInsert:function(t,e,i,s){if(this.selectionRestore(),\"\"!==e){if(this.insert_link_node)this.bufferSet(),$(this.insert_link_node).text(e).attr(\"href\",i),\"\"!==s?$(this.insert_link_node).attr(\"target\",s):$(this.insert_link_node).removeAttr(\"target\");else{var o=$(t).addClass(\"redactor-added-link\");this.exec(\"inserthtml\",this.outerHtml(o),!1),(i=this.$editor.find(\"a.redactor-added-link\")).removeAttr(\"style\").removeClass(\"redactor-added-link\").each((function(){\"\"==this.className&&$(this).removeAttr(\"class\")}))}this.sync()}setTimeout($.proxy((function(){this.opts.observeLinks&&this.observeLinks()}),this),5),this.modalClose()},fileShow:function(){this.selectionSave();var t=$.proxy((function(){var t=this.getSelection(),e=\"\";e=this.oldIE()?t.text:t.toString(),$(\"#redactor_filename\").val(e),this.isMobile()||this.isIPad()||this.draguploadInit(\"#redactor_file\",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.fileCallback,this),error:$.proxy((function(t,e){this.callback(\"fileUploadError\",e)}),this),uploadParam:this.opts.fileUploadParam}),this.uploadInit(\"redactor_file\",{auto:!0,url:this.opts.fileUpload,success:$.proxy(this.fileCallback,this),error:$.proxy((function(t,e){this.callback(\"fileUploadError\",e)}),this)})}),this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,t)},fileCallback:function(t){if(this.selectionRestore(),!1!==t){var e=$(\"#redactor_filename\").val();\"\"===e&&(e=t.filename);var i='<a href=\"'+t.filelink+'\" id=\"filelink-marker\">'+e+\"</a>\";this.browser(\"webkit\")&&this.window.chrome&&(i+=\"&nbsp;\"),this.execCommand(\"inserthtml\",i,!1);var s=$(this.$editor.find(\"a#filelink-marker\"));0!=s.length?s.removeAttr(\"id\"):s=!1,this.sync(),this.callback(\"fileUpload\",s,t)}this.modalClose()},imageShow:function(){this.selectionSave();var t=$.proxy((function(){this.opts.imageGetJson?$.getJSON(this.opts.imageGetJson,$.proxy((function(t){if(t.error)alert(t.message);else{var e={},i=0;$.each(t,$.proxy((function(t,s){void 0!==s.folder&&(i++,e[s.folder]=i)}),this)),$(\"#redactor_image_box .empty_list\").show();var s=!1;if($.each(t,$.proxy((function(t,i){var o=\"\";void 0!==i.title&&(o=i.title);var r=0;$.isEmptyObject(e)||void 0===i.folder||(r=e[i.folder],!1===s&&(s=\".redactorfolder\"+r));var a=$('<img src=\"'+i.thumb+'\" class=\"redactorfolder redactorfolder'+r+'\" rel=\"'+i.image+'\" title=\"'+o+'\" />');$(\"#redactor_image_box\").append(a),$(a).on(\"click\",$.proxy(this.imageThumbClick,this)),$(\"#redactor_image_box .empty_list\").hide()}),this)),!$.isEmptyObject(e)){$(\".redactorfolder\").hide(),$(s).show();var o=$('<select id=\"redactor_image_box_select\">');$.each(e,(function(t,e){o.append($('<option value=\"'+e+'\">'+t+\"</option>\"))})),$(\"#redactor_image_box\").before(o),o.change((function(t){$(\".redactorfolder\").hide(),$(\".redactorfolder\"+$(t.target).val()).show()}))}}}),this)):$(\"#redactor-tab-control-2\").remove(),this.opts.imageUpload||this.opts.s3?(this.isMobile()||this.isIPad()||!1!==this.opts.s3||$(\"#redactor_file\").length&&this.draguploadInit(\"#redactor_file\",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:$.proxy(this.imageCallback,this),error:$.proxy((function(t,e){this.callback(\"imageUploadError\",e)}),this),uploadParam:this.opts.imageUploadParam}),!1===this.opts.s3?this.uploadInit(\"redactor_file\",{auto:!0,url:this.opts.imageUpload,success:$.proxy(this.imageCallback,this),error:$.proxy((function(t,e){this.callback(\"imageUploadError\",e)}),this)}):$(\"#redactor_file\").on(\"change.redactor\",$.proxy(this.s3handleFileSelect,this))):($(\".redactor_tab\").hide(),this.opts.imageGetJson?($(\"#redactor-tab-control-1\").remove(),$(\"#redactor-tab-control-2\").addClass(\"redactor_tabs_act\"),$(\"#redactor_tab2\").show()):($(\"#redactor_tabs\").remove(),$(\"#redactor_tab3\").show())),this.opts.imageTabLink||!this.opts.imageUpload&&!this.opts.imageGetJson||$(\"#redactor-tab-control-3\").hide(),$(\"#redactor_upload_btn\").on(\"click\",$.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout((function(){$(\"#redactor_file_link\").focus()}),200)}),this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,t)},imageEdit:function(t){var e=t,i=e.parent().parent(),s=$.proxy((function(){$(\"#redactor_file_alt\").val(e.attr(\"alt\")),$(\"#redactor_image_edit_src\").attr(\"href\",e.attr(\"src\")),\"block\"==e.css(\"display\")&&\"none\"==e.css(\"float\")?$(\"#redactor_form_image_align\").val(\"center\"):$(\"#redactor_form_image_align\").val(e.css(\"float\")),\"A\"===$(i).get(0).tagName&&($(\"#redactor_file_link\").val($(i).attr(\"href\")),\"_blank\"==$(i).attr(\"target\")&&$(\"#redactor_link_blank\").prop(\"checked\",!0)),$(\"#redactor_image_delete_btn\").on(\"click\",$.proxy((function(){this.imageRemove(e)}),this)),$(\"#redactorSaveBtn\").on(\"click\",$.proxy((function(){this.imageSave(e)}),this))}),this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,s)},imageRemove:function(t){var e=$(t).parent().parent(),i=$(t).parent(),s=!1;e.length&&\"A\"===e[0].tagName?(s=!0,$(e).remove()):i.length&&\"A\"===i[0].tagName?(s=!0,$(i).remove()):$(t).remove(),i.length&&\"P\"===i[0].tagName&&(this.focusWithSaveScroll(),!1===s&&this.selectionStart(i)),this.callback(\"imageDelete\",t),this.modalClose(),this.sync()},imageSave:function(t){this.imageResizeHide(!1);var e=$(t),i=e.parent();e.attr(\"alt\",$(\"#redactor_file_alt\").val());var s=$(\"#redactor_form_image_align\").val(),o=\"\";\"left\"===s?(o=\"0 \"+this.opts.imageFloatMargin+\" \"+this.opts.imageFloatMargin+\" 0\",e.css({float:\"left\",margin:o})):\"right\"===s?(o=\"0 0 \"+this.opts.imageFloatMargin+\" \"+this.opts.imageFloatMargin,e.css({float:\"right\",margin:o})):\"center\"===s?e.css({float:\"\",display:\"block\",margin:\"auto\"}):e.css({float:\"\",display:\"\",margin:\"\"});var r=$.trim($(\"#redactor_file_link\").val());if(\"\"!==r){var a=!1;if($(\"#redactor_link_blank\").prop(\"checked\")&&(a=!0),\"A\"!==i.get(0).tagName){var n=$('<a href=\"'+r+'\">'+this.outerHtml(t)+\"</a>\");a&&n.attr(\"target\",\"_blank\"),e.replaceWith(n)}else i.attr(\"href\",r),a?i.attr(\"target\",\"_blank\"):i.removeAttr(\"target\")}else\"A\"===i.get(0).tagName&&i.replaceWith(this.outerHtml(t));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(t){if(!1!==t&&0!=$(t.target).parent().length&&\"redactor-image-box\"===$(t.target).parent()[0].id)return!1;var e=this.$editor.find(\"#redactor-image-box\");if(0==e.length)return!1;this.$editor.find(\"#redactor-image-editter, #redactor-image-resizer\").remove(),e.find(\"img\").css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css(\"margin\",\"\"),e.find(\"img\").css(\"opacity\",\"\"),e.replaceWith((function(){return $(this).contents()})),$(document).off(\"click.redactor-image-resize-hide\"),this.$editor.off(\"click.redactor-image-resize-hide\"),this.$editor.off(\"keydown.redactor-image-delete\"),this.sync()},imageResize:function(t){var e=$(t);e.on(\"mousedown\",$.proxy((function(){this.imageResizeHide(!1)}),this)),e.on(\"dragstart\",$.proxy((function(){this.$editor.on(\"drop.redactor-image-inside-drop\",$.proxy((function(){setTimeout($.proxy((function(){this.observeImages(),this.$editor.off(\"drop.redactor-image-inside-drop\"),this.sync()}),this),1)}),this))}),this)),e.on(\"click\",$.proxy((function(){if(0!=this.$editor.find(\"#redactor-image-box\").length)return!1;var t,i=e.width()/e.height(),s=this.imageResizeControls(e),o=!1;!1!==s&&(s.on(\"mousedown\",(function(s){o=!0,s.preventDefault(),i=e.width()/e.height(),Math.round(s.pageX-e.eq(0).offset().left),t=Math.round(s.pageY-e.eq(0).offset().top)})),$(this.document.body).on(\"mousemove\",$.proxy((function(s){if(o){Math.round(s.pageX-e.eq(0).offset().left);var r=Math.round(s.pageY-e.eq(0).offset().top)-t,a=e.height(),n=parseInt(a,10)+r,l=Math.round(n*i);l>20&&(e.width(l),l<100?this.imageEditter.css({marginTop:\"-7px\",marginLeft:\"-13px\",fontSize:\"9px\",padding:\"3px 5px\"}):this.imageEditter.css({marginTop:\"-11px\",marginLeft:\"-18px\",fontSize:\"11px\",padding:\"7px 10px\"})),Math.round(s.pageX-e.eq(0).offset().left),t=Math.round(s.pageY-e.eq(0).offset().top),this.sync()}}),this)).on(\"mouseup\",(function(){o=!1}))),this.$editor.on(\"keydown.redactor-image-delete\",$.proxy((function(t){var i=t.which;this.keyCode.BACKSPACE!=i&&this.keyCode.DELETE!=i||(this.bufferSet(!1),this.imageResizeHide(!1),this.imageRemove(e))}),this)),$(document).on(\"click.redactor-image-resize-hide\",$.proxy(this.imageResizeHide,this)),this.$editor.on(\"click.redactor-image-resize-hide\",$.proxy(this.imageResizeHide,this))}),this))},imageResizeControls:function(t){var e=$('<span id=\"redactor-image-box\" data-redactor=\"verified\">');if(e.css({position:\"relative\",display:\"inline-block\",lineHeight:0,outline:\"1px dashed rgba(0, 0, 0, .6)\",float:t.css(\"float\")}),e.attr(\"contenteditable\",!1),\"auto\"!=t[0].style.margin?(e.css({marginTop:t[0].style.marginTop,marginBottom:t[0].style.marginBottom,marginLeft:t[0].style.marginLeft,marginRight:t[0].style.marginRight}),t.css(\"margin\",\"\")):e.css({display:\"block\",margin:\"auto\"}),t.css(\"opacity\",.5).after(e),this.imageEditter=$('<span id=\"redactor-image-editter\" data-redactor=\"verified\">'+this.opts.curLang.edit+\"</span>\"),this.imageEditter.css({position:\"absolute\",zIndex:5,top:\"50%\",left:\"50%\",marginTop:\"-11px\",marginLeft:\"-18px\",lineHeight:1,backgroundColor:\"#000\",color:\"#fff\",fontSize:\"11px\",padding:\"7px 10px\",cursor:\"pointer\"}),this.imageEditter.attr(\"contenteditable\",!1),this.imageEditter.on(\"click\",$.proxy((function(){this.imageEdit(t)}),this)),e.append(this.imageEditter),this.opts.imageResizable){var i=$('<span id=\"redactor-image-resizer\" data-redactor=\"verified\"></span>');return i.css({position:\"absolute\",zIndex:2,lineHeight:1,cursor:\"nw-resize\",bottom:\"-4px\",right:\"-5px\",border:\"1px solid #fff\",backgroundColor:\"#000\",width:\"8px\",height:\"8px\"}),i.attr(\"contenteditable\",!1),e.append(i),e.append(t),i}return e.append(t),!1},imageThumbClick:function(t){var e='<img id=\"image-marker\" src=\"'+$(t.target).attr(\"rel\")+'\" alt=\"'+$(t.target).attr(\"title\")+'\" />',i=this.getParent();this.opts.paragraphy&&0==$(i).closest(\"li\").length&&(e=\"<p>\"+e+\"</p>\"),this.imageInsert(e,!0)},imageCallbackLink:function(){var t=$(\"#redactor_file_link\").val();if(\"\"!==t){var e='<img id=\"image-marker\" src=\"'+t+'\" />';!1===this.opts.linebreaks&&(e=\"<p>\"+e+\"</p>\"),this.imageInsert(e,!0)}else this.modalClose()},imageCallback:function(t){this.imageInsert(t)},imageInsert:function(t,e){if(this.selectionRestore(),!1!==t){var i=\"\";if(!0!==e){i='<img id=\"image-marker\" src=\"'+t.image.url+'\" />';var s=this.getParent();this.opts.paragraphy&&0==$(s).closest(\"li\").length&&(i=\"<p>\"+i+\"</p>\")}else i=t;this.execCommand(\"inserthtml\",i,!1);var o=$(this.$editor.find(\"img#image-marker\"));o.length?o.removeAttr(\"id\"):o=!1,this.sync(),!0!==e&&this.callback(\"imageUpload\",o,t)}this.modalClose(),this.observeImages()},buildProgressBar:function(){0==$(\"#redactor-progress\").length&&(this.$progressBar=$('<div id=\"redactor-progress\"><span></span></div>'),$(document.body).append(this.$progressBar))},showProgressBar:function(){this.buildProgressBar(),$(\"#redactor-progress\").fadeIn()},hideProgressBar:function(){$(\"#redactor-progress\").fadeOut(1500)},modalTemplatesInit:function(){$.extend(this.opts,{modal_file:String()+'<section id=\"redactor-modal-file-insert\"><form id=\"redactorUploadFileForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\"><label>'+this.opts.curLang.filename+'</label><input type=\"text\" id=\"redactor_filename\" class=\"redactor_input\" /><div style=\"margin-top: 7px;\"><input type=\"file\" id=\"redactor_file\" name=\"'+this.opts.fileUploadParam+'\" /></div></form></section>',modal_image_edit:String()+'<section id=\"redactor-modal-image-edit\"><label>'+this.opts.curLang.title+'</label><input type=\"text\" id=\"redactor_file_alt\" class=\"redactor_input\" /><label>'+this.opts.curLang.link+'</label><input type=\"text\" id=\"redactor_file_link\" class=\"redactor_input\" /><label><input type=\"checkbox\" id=\"redactor_link_blank\"> '+this.opts.curLang.link_new_tab+\"</label><label>\"+this.opts.curLang.image_position+'</label><select id=\"redactor_form_image_align\"><option value=\"none\">'+this.opts.curLang.none+'</option><option value=\"left\">'+this.opts.curLang.left+'</option><option value=\"center\">'+this.opts.curLang.center+'</option><option value=\"right\">'+this.opts.curLang.right+'</option></select></section><footer><button id=\"redactor_image_delete_btn\" class=\"redactor_modal_btn redactor_modal_delete_btn\">'+this.opts.curLang._delete+'</button><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactorSaveBtn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.save+\"</button></footer>\",modal_image:String()+'<section id=\"redactor-modal-image-insert\"><div id=\"redactor_tabs\"><a href=\"#\" id=\"redactor-tab-control-1\" class=\"redactor_tabs_act\">'+this.opts.curLang.upload+'</a><a href=\"#\" id=\"redactor-tab-control-2\">'+this.opts.curLang.choose+'</a><a href=\"#\" id=\"redactor-tab-control-3\">'+this.opts.curLang.link+'</a></div><form id=\"redactorInsertImageForm\" method=\"post\" action=\"\" enctype=\"multipart/form-data\"><div id=\"redactor_tab1\" class=\"redactor_tab\"><input type=\"file\" id=\"redactor_file\" name=\"'+this.opts.imageUploadParam+'\" /></div><div id=\"redactor_tab2\" class=\"redactor_tab\" style=\"display: none;\"><div id=\"redactor_image_box\"><span class=\"empty_list\">'+this.opts.curLang.empty_img_list+'</span></div></div></form><div id=\"redactor_tab3\" class=\"redactor_tab\" style=\"display: none;\"><label>'+this.opts.curLang.image_web_link+'</label><input type=\"text\" name=\"redactor_file_link\" id=\"redactor_file_link\" class=\"redactor_input\"  /><br><br></div></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button class=\"redactor_modal_btn redactor_modal_action_btn\" id=\"redactor_upload_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_link:String()+'<section id=\"redactor-modal-link-insert\"><select id=\"redactor-predefined-links\" style=\"width: 99.5%; display: none;\"></select><label>URL</label><input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url\" /><label>'+this.opts.curLang.text+'</label><input type=\"text\" class=\"redactor_input\" id=\"redactor_link_url_text\" /><label><input type=\"checkbox\" id=\"redactor_link_blank\"> '+this.opts.curLang.link_new_tab+'</label></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_link_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_table:String()+'<section id=\"redactor-modal-table-insert\"><label>'+this.opts.curLang.rows+'</label><input type=\"text\" size=\"5\" value=\"2\" id=\"redactor_table_rows\" /><label>'+this.opts.curLang.columns+'</label><input type=\"text\" size=\"5\" value=\"3\" id=\"redactor_table_columns\" /></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_table_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\",modal_video:String()+'<section id=\"redactor-modal-video-insert\"><form id=\"redactorInsertVideoForm\"><label>'+this.opts.curLang.video_html_code+'</label><textarea id=\"redactor_insert_video_area\" style=\"width: 99%; height: 160px;\"></textarea></form></section><footer><button class=\"redactor_modal_btn redactor_btn_modal_close\">'+this.opts.curLang.cancel+'</button><button id=\"redactor_insert_video_btn\" class=\"redactor_modal_btn redactor_modal_action_btn\">'+this.opts.curLang.insert+\"</button></footer>\"})},modalInit:function(t,e,i,s){return this.modalSetOverlay(),this.$redactorModalWidth=i,this.$redactorModal=$(\"#redactor_modal\"),this.$redactorModal.length||(this.$redactorModal=$('<div id=\"redactor_modal\" style=\"display: none;\" />'),this.$redactorModal.append($('<div id=\"redactor_modal_close\">&times;</div>')),this.$redactorModal.append($('<header id=\"redactor_modal_header\" />')),this.$redactorModal.append($('<div id=\"redactor_modal_inner\" />')),this.$redactorModal.appendTo(document.body)),$(\"#redactor_modal_close\").on(\"click\",$.proxy(this.modalClose,this)),$(document).on(\"keyup\",$.proxy(this.modalCloseHandler,this)),this.$editor.on(\"keyup\",$.proxy(this.modalCloseHandler,this)),this.modalSetContent(e),this.modalSetTitle(t),this.modalSetDraggable(),this.modalLoadTabs(),this.modalOnCloseButton(),this.modalSetButtonsWidth(),this.saveModalScroll=this.document.body.scrollTop,!1===this.opts.autoresize&&(this.saveModalScroll=this.$editor.scrollTop()),!1===this.isMobile()?this.modalShowOnDesktop():this.modalShowOnMobile(),\"function\"==typeof s&&s(),setTimeout($.proxy((function(){this.callback(\"modalOpened\",this.$redactorModal)}),this),11),$(document).off(\"focusin.modal\"),this.$redactorModal.find(\"input[type=text]\").on(\"keypress\",$.proxy((function(t){13===t.which&&(this.$redactorModal.find(\".redactor_modal_action_btn\").trigger(\"click\"),t.preventDefault())}),this)),this.$redactorModal},modalShowOnDesktop:function(){this.$redactorModal.css({position:\"fixed\",top:\"-2000px\",left:\"50%\",width:this.$redactorModalWidth+\"px\",marginLeft:\"-\"+this.$redactorModalWidth/2+\"px\"}).show(),this.modalSaveBodyOveflow=$(document.body).css(\"overflow\"),$(document.body).css(\"overflow\",\"hidden\"),setTimeout($.proxy((function(){var t=this.$redactorModal.outerHeight();this.$redactorModal.css({top:\"50%\",height:\"auto\",minHeight:\"auto\",marginTop:\"-\"+(t+10)/2+\"px\"})}),this),15)},modalShowOnMobile:function(){this.$redactorModal.css({position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",left:\"0\",margin:\"0\",minHeight:\"300px\"}).show()},modalSetContent:function(t){this.modalcontent=!1,0==t.indexOf(\"#\")?(this.modalcontent=$(t),$(\"#redactor_modal_inner\").empty().append(this.modalcontent.html()),this.modalcontent.html(\"\")):$(\"#redactor_modal_inner\").empty().append(t)},modalSetTitle:function(t){this.$redactorModal.find(\"#redactor_modal_header\").html(t)},modalSetButtonsWidth:function(){},modalOnCloseButton:function(){this.$redactorModal.find(\".redactor_btn_modal_close\").on(\"click\",$.proxy(this.modalClose,this))},modalSetOverlay:function(){this.opts.modalOverlay&&(this.$redactorModalOverlay=$(\"#redactor_modal_overlay\"),this.$redactorModalOverlay.length||(this.$redactorModalOverlay=$('<div id=\"redactor_modal_overlay\" style=\"display: none;\"></div>'),$(\"body\").prepend(this.$redactorModalOverlay)),this.$redactorModalOverlay.show().on(\"click\",$.proxy(this.modalClose,this)))},modalSetDraggable:function(){void 0!==$.fn.draggable&&(this.$redactorModal.draggable({handle:\"#redactor_modal_header\"}),this.$redactorModal.find(\"#redactor_modal_header\").css(\"cursor\",\"move\"))},modalLoadTabs:function(){var t=$(\"#redactor_tabs\");if(!t.length)return!1;var e=this;t.find(\"a\").each((function(i,s){i++,$(s).on(\"click\",(function(s){if(s.preventDefault(),t.find(\"a\").removeClass(\"redactor_tabs_act\"),$(this).addClass(\"redactor_tabs_act\"),$(\".redactor_tab\").hide(),$(\"#redactor_tab\"+i).show(),$(\"#redactor_tab_selected\").val(i),!1===e.isMobile()){var o=e.$redactorModal.outerHeight();e.$redactorModal.css(\"margin-top\",\"-\"+(o+10)/2+\"px\")}}))}))},modalCloseHandler:function(t){if(t.keyCode===this.keyCode.ESC)return this.modalClose(),!1},modalClose:function(){return $(\"#redactor_modal_close\").off(\"click\",this.modalClose),$(\"#redactor_modal\").fadeOut(\"fast\",$.proxy((function(){var t=$(\"#redactor_modal_inner\");!1!==this.modalcontent&&(this.modalcontent.html(t.html()),this.modalcontent=!1),t.html(\"\"),this.opts.modalOverlay&&$(\"#redactor_modal_overlay\").hide().off(\"click\",this.modalClose),$(document).off(\"keyup\",this.modalCloseHandler),this.$editor.off(\"keyup\",this.modalCloseHandler),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?$(this.document.body).scrollTop(this.saveModalScroll):!1===this.opts.autoresize&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll),this.callback(\"modalClosed\")}),this)),!1===this.isMobile()&&$(document.body).css(\"overflow\",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:\"visible\"),!1},modalSetTab:function(t){$(\".redactor_tab\").hide(),$(\"#redactor_tabs\").find(\"a\").removeClass(\"redactor_tabs_act\").eq(t-1).addClass(\"redactor_tabs_act\"),$(\"#redactor_tab\"+t).show()},s3handleFileSelect:function(t){for(var e,i=t.target.files,s=0;e=i[s];s++)this.s3uploadFile(e)},s3uploadFile:function(t){this.s3executeOnSignedUrl(t,$.proxy((function(e){this.s3uploadToS3(t,e)}),this))},s3executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,s=\"?\";\"-1\"!=this.opts.s3.search(/\\?/)&&(s=\"&\"),i.open(\"GET\",this.opts.s3+s+\"name=\"+t.name+\"&type=\"+t.type,!0),i.overrideMimeType&&i.overrideMimeType(\"text/plain; charset=x-user-defined\");var o=this;i.onreadystatechange=function(){4==this.readyState&&200==this.status?(o.showProgressBar(),e(decodeURIComponent(this.responseText))):4==this.readyState&&this.status},i.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return\"withCredentials\"in i?i.open(t,e,!0):\"undefined\"!=typeof XDomainRequest?(i=new XDomainRequest).open(t,e):i=null,i},s3uploadToS3:function(t,e){var i=this.s3createCORSRequest(\"PUT\",e);i&&(i.onload=$.proxy((function(){if(200==i.status){this.hideProgressBar();var t=e.split(\"?\");if(!t[0])return!1;this.selectionRestore();var s=\"\";s='<img id=\"image-marker\" src=\"'+t[0]+'\" />',this.opts.paragraphy&&(s=\"<p>\"+s+\"</p>\"),this.execCommand(\"inserthtml\",s,!1);var o=$(this.$editor.find(\"img#image-marker\"));o.length?o.removeAttr(\"id\"):o=!1,this.sync(),this.callback(\"imageUpload\",o,!1),this.modalClose(),this.observeImages()}}),this),i.onerror=function(){},i.upload.onprogress=function(){},i.setRequestHeader(\"Content-Type\",t.type),i.setRequestHeader(\"x-amz-acl\",\"public-read\"),i.send(t))},uploadInit:function(t,e){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},$.extend(this.uploadOptions,e);var i=$(\"#\"+t);i.length&&\"INPUT\"===i[0].tagName?(this.uploadOptions.input=i,this.el=$(i[0].form)):this.el=i,this.element_action=this.el.attr(\"action\"),this.uploadOptions.auto?$(this.uploadOptions.input).change($.proxy((function(t){this.el.submit((function(){return!1})),this.uploadSubmit(t)}),this)):this.uploadOptions.trigger&&$(\"#\"+this.uploadOptions.trigger).on(\"click\",$.proxy(this.uploadSubmit,this))},uploadSubmit:function(){this.showProgressBar(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id=\"f\"+Math.floor(99999*Math.random());var t=this.document.createElement(\"div\"),e='<iframe style=\"display:none\" id=\"'+this.id+'\" name=\"'+this.id+'\"></iframe>';return t.innerHTML=e,$(t).appendTo(\"body\"),this.uploadOptions.start&&this.uploadOptions.start(),$(\"#\"+this.id).one(\"load\",$.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(t,e){if(this.uploadOptions.input){var i=\"redactorUploadForm\"+this.id,s=\"redactorUploadFile\"+this.id;this.form=$('<form  action=\"'+this.uploadOptions.url+'\" method=\"POST\" target=\"'+e+'\" name=\"'+i+'\" id=\"'+i+'\" enctype=\"multipart/form-data\" />'),!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy((function(t,e){null!=e&&0===e.toString().indexOf(\"#\")&&(e=$(e).val());var i=$(\"<input/>\",{type:\"hidden\",name:t,value:e});$(this.form).append(i)}),this));var o=this.uploadOptions.input,r=$(o).clone();$(o).attr(\"id\",s).before(r).appendTo(this.form),$(this.form).css(\"position\",\"absolute\").css(\"top\",\"-2000px\").css(\"left\",\"-2000px\").appendTo(\"body\"),this.form.submit()}else t.attr(\"target\",e).attr(\"method\",\"POST\").attr(\"enctype\",\"multipart/form-data\").attr(\"action\",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var t,e=$(\"#\"+this.id)[0];if(t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if(this.hideProgressBar(),void 0!==t){var i=t.body.innerHTML.match(/\\{(.|\\n)*\\}/)[0];i=(i=i.replace(/^\\[/,\"\")).replace(/\\]$/,\"\");var s=$.parseJSON(i);void 0===s.error?this.uploadOptions.success(s):(this.uploadOptions.error(this,s),this.modalClose())}else this.modalClose(),alert(\"Upload failed!\");this.el.attr(\"action\",this.element_action),this.el.attr(\"target\",\"\")},draguploadInit:function(t,e){if(this.draguploadOptions=$.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},e),void 0===window.FormData)return!1;this.droparea=$('<div class=\"redactor_droparea\"></div>'),this.dropareabox=$('<div class=\"redactor_dropareabox\">'+this.draguploadOptions.text+\"</div>\"),this.dropalternative=$('<div class=\"redactor_dropalternative\">'+this.draguploadOptions.atext+\"</div>\"),this.droparea.append(this.dropareabox),$(t).before(this.droparea),$(t).before(this.dropalternative),this.dropareabox.on(\"dragover\",$.proxy((function(){return this.draguploadOndrag()}),this)),this.dropareabox.on(\"dragleave\",$.proxy((function(){return this.draguploadOndragleave()}),this)),this.dropareabox.get(0).ondrop=$.proxy((function(t){for(var e in t.preventDefault(),this.dropareabox.removeClass(\"hover\").addClass(\"drop\"),this.showProgressBar(),t.dataTransfer.files)t.dataTransfer.files.hasOwnProperty(e)&&this.dragUploadAjax(this.draguploadOptions.url,t.dataTransfer.files[e],!1,t,this.draguploadOptions.uploadParam)}),this)},dragUploadAjax:function(t,e,i,s,o){if(!i){var r=$.ajaxSettings.xhr();r.upload&&r.upload.addEventListener(\"progress\",$.proxy(this.uploadProgress,this),!1),$.ajaxSetup({xhr:function(){return r}})}this.callback(\"drop\",s);var a=new FormData;!1!==o?a.append(o,e):a.append(\"file\",e),!1!==this.opts.uploadFields&&\"object\"==typeof this.opts.uploadFields&&$.each(this.opts.uploadFields,$.proxy((function(t,e){null!=e&&0===e.toString().indexOf(\"#\")&&(e=$(e).val()),a.append(t,e)}),this)),$.ajax({url:t,dataType:\"html\",async:!1,data:a,cache:!1,contentType:!1,processData:!1,type:\"POST\",success:$.proxy((function(t){var e=\"string\"==typeof(t=(t=t.replace(/^\\[/,\"\")).replace(/\\]$/,\"\"))?$.parseJSON(t):t;if(this.hideProgressBar(),i){var o=$(\"<img>\");o.attr(\"src\",e.image.url).attr(\"id\",\"drag-image-marker\"),this.insertNodeToCaretPositionFromPoint(s,o[0]);var r=$(this.$editor.find(\"img#drag-image-marker\"));r.length?r.removeAttr(\"id\"):r=!1,this.sync(),this.observeImages(),r&&this.callback(\"imageUpload\",r,e),void 0!==e.error&&this.callback(\"imageUploadError\",e)}else void 0===e.error?this.draguploadOptions.success(e):(this.draguploadOptions.error(this,e),this.draguploadOptions.success(!1))}),this)})},draguploadOndrag:function(){return this.dropareabox.addClass(\"hover\"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass(\"hover\"),!1},uploadProgress:function(t,e){var i=t.loaded?parseInt(t.loaded/t.total*100,10):t;this.dropareabox.text(\"Loading \"+i+\"% \"+(e||\"\"))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isIPad:function(){return/iPad/.test(navigator.userAgent)},normalize:function(t){return void 0===t?0:parseInt(t.replace(\"px\",\"\"),10)},outerHtml:function(t){return $(\"<div>\").append($(t).eq(0).clone()).html()},stripHtml:function(t){var e=document.createElement(\"DIV\");return e.innerHTML=t,e.textContent||e.innerText||\"\"},isString:function(t){return\"[object String]\"==Object.prototype.toString.call(t)},isEmpty:function(t){return\"\"==(t=(t=(t=t.replace(/&#x200b;|<br>|<br\\/>|&nbsp;/gi,\"\")).replace(/\\s/g,\"\")).replace(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i,\"\"))},getInternetExplorerVersion:function(){var t=!1;if(\"Microsoft Internet Explorer\"==navigator.appName){var e=navigator.userAgent;null!=new RegExp(\"MSIE ([0-9]{1,}[.0-9]{0,})\").exec(e)&&(t=parseFloat(RegExp.$1))}return t},isIe11:function(){return!!navigator.userAgent.match(/Trident\\/7\\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\\/]([\\w.]+)/.exec(e)||/(chrome)[ \\/]([\\w.]+)/.exec(e)||/(webkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(e)||/(webkit)[ \\/]([\\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(e)||/(msie) ([\\w.]+)/.exec(e)||e.indexOf(\"trident\")>=0&&/(rv)(?::| )([\\w.]+)/.exec(e)||e.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(e)||[];return\"version\"==t?i[2]:\"webkit\"==t?\"chrome\"==i[1]||\"webkit\"==i[1]:\"rv\"==i[1]?\"msie\"==t:\"opr\"==i[1]?\"webkit\"==t:t==i[1]},oldIE:function(){return!!(this.browser(\"msie\")&&parseInt(this.browser(\"version\"),10)<9)},getFragmentHtml:function(t){var e=t.cloneNode(!0),i=this.document.createElement(\"div\");return i.appendChild(e),i.innerHTML},extractContent:function(){for(var t,e=this.$editor[0],i=this.document.createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i},isParentRedactor:function(t){return!!t&&((this.opts.iframe||0!=$(t).parents(\"div.redactor_editor\").length&&!$(t).hasClass(\"redactor_editor\"))&&t)},currentOrParentIs:function(t){var e=this.getParent(),i=this.getCurrent();return e&&e.tagName===t?e:!(!i||i.tagName!==t)&&i},isEndOfElement:function(){var t=this.getBlock();return this.getCaretOffset(t)==$.trim($(t).text()).replace(/\\n\\r\\n/g,\"\").length},isFocused:function(){var t,e=this.getSelection();return e&&e.rangeCount&&e.rangeCount>0&&(t=e.getRangeAt(0).startContainer),!!t&&(this.opts.iframe?!this.getCaretOffsetRange().equals()||!this.$editor.is(t):0!=$(t).closest(\"div.redactor_editor\").length)},removeEmptyAttr:function(t,e){\"\"==$(t).attr(e)&&$(t).removeAttr(e)},removeFromArrayByValue:function(t,e){for(var i=null;-1!==(i=t.indexOf(e));)t.splice(i,1);return t}},Redactor.prototype.init.prototype=Redactor.prototype,$.Redactor.fn.formatLinkify=function(t,e,i,s,o){for(var r=/(((https?|ftps?):\\/\\/)|www[.][^\\s])(.+?\\..+?)([.),]?)(\\s|\\.\\s+|\\)|$)/gi,a=/(https?|ftp):\\/\\//i,n=/(https?:\\/\\/.*\\.(?:png|jpg|jpeg|gif))/gi,l=(this.$editor?this.$editor.get(0):this).childNodes,c=l.length;c--;){var d=l[c];if(3===d.nodeType){var h=d.nodeValue;if(s&&h){var p='<iframe width=\"500\" height=\"281\" src=\"',u='\" frameborder=\"0\" allowfullscreen></iframe>';h.match(reUrlYoutube)?(h=h.replace(reUrlYoutube,p+\"//www.youtube.com/embed/$1\"+u),$(d).after(h).remove()):h.match(reUrlVimeo)&&(h=h.replace(reUrlVimeo,p+\"//player.vimeo.com/video/$2\"+u),$(d).after(h).remove())}if(i&&h&&h.match(n)&&(h=h.replace(n,'<img src=\"$1\">'),$(d).after(h).remove()),e&&h&&h.match(r)){var f=h.match(r);for(var c in f){var m=f[c],g=m,b=\"\";null!==m.match(/\\s$/)&&(b=\" \");var v=t;null!==m.match(a)&&(v=\"\"),g.length>o&&(g=g.substring(0,o)+\"...\");var y=(g=g.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")).replace(\"$\",\"$$$\");h=h.replace(m,'<a href=\"'+v+$.trim(m)+'\">'+$.trim(y)+\"</a>\"+b)}$(d).after(h).remove()}}else 1!==d.nodeType||/^(a|button|textarea)$/i.test(d.tagName)||$.Redactor.fn.formatLinkify.call(d,t,e,i,s,o)}}})(jQuery);", "<?php\nclass cmsWysiwygRedactor {\n\n    private static $redactor_loaded = false;\n\n    private $options = [\n        'minHeight' => 200,\n        'toolbarFixedBox' => false,\n        'plugins' => []\n    ];\n\n    private $lang = 'en';\n\n    public function __construct($config = []) {\n\n        $user = cmsUser::getInstance();\n        $core = cmsCore::getInstance();\n        $this->lang = cmsCore::getLanguageName();\n\n        if($this->lang !== 'en'){\n            $this->options['lang'] = $this->lang;\n        }\n\n        $this->options['smilesUrl'] = href_to('typograph', 'get_smiles');\n\n        if (!$user->is_admin) {\n            $this->options['buttonSource'] = false;\n        }\n\n        if ($core->request->isTypeModal()) {\n            $this->options['toolbarFixedTarget'] = '#icms_modal';\n        }\n\n        if ($user->is_logged) {\n\n            if(empty($config['upload_params'])){\n\n                $context = $core->getUriData();\n                $upload_params = [];\n\n                if($context['controller']){\n                    $upload_params['target_controller'] = $context['controller'];\n                }\n\n                if($context['action']){\n                    $upload_params['target_subject'] = mb_substr($context['action'], 0, 32);\n                }\n\n                if(strpos($core->uri, '/add/') === false && !empty($context['params'][1]) && is_numeric($context['params'][1])){\n                    $upload_params['target_id'] = $context['params'][1];\n                }\n            } else {\n\n                $upload_params = $config['upload_params'];\n\n                unset($config['upload_params']);\n            }\n\n            $upload_params_string = ($upload_params ? '?'.http_build_query($upload_params) : '');\n\n            $this->options['imageUpload'] = href_to('images', 'upload_with_preset', ['file', 'wysiwyg_redactor']).$upload_params_string;\n\n            $this->options['imageGetJson'] = href_to('files', 'files_list', ['image']).$upload_params_string;\n\n            if(!empty($upload_params['target_controller']) && !empty($upload_params['target_subject'])){\n                $this->options['predefinedLinks'] = href_to('wysiwygs', 'links_list').$upload_params_string;\n            }\n\n        }\n\n        $this->options = array_replace_recursive($this->options, $config);\n\n    }\n\n\tpublic function displayEditor($field_name, $content = '', $config = []){\n\n        $this->loadRedactor();\n\n        $dom_id = isset($this->options['id']) ? $this->options['id'] : 'wysiwyg-' . uniqid(); unset($this->options['id']);\n\n        if($field_name && $dom_id){\n            if(!empty($this->options['wysiwyg_toolbar'])){\n                echo '<div data-field_id=\"'.$dom_id.'\" id=\"wysiwyg_toolbar_'.$dom_id.'\" class=\"wysiwyg_toolbar_wrap\">'.$this->options['wysiwyg_toolbar'].'</div>';\n                unset($this->options['wysiwyg_toolbar']);\n            }\n            echo html_textarea($field_name, $content, ['id' => $dom_id, 'class' => 'imperavi_redactor']);\n        }\n\n        ob_start(); ?>\n\n        <script>\n            <?php if($dom_id){ ?>\n                redactor_global_options['field_<?php echo $dom_id; ?>'] = <?php echo json_encode($this->options); ?>;\n                $(function(){\n                    init_redactor('<?php echo $dom_id; ?>');\n                });\n            <?php } else { ?>\n                redactor_global_options['default'] = <?php echo json_encode($this->options); ?>;\n            <?php } ?>\n        </script>\n\n        <?php cmsTemplate::getInstance()->addBottom(ob_get_clean());\n\n\t}\n\n    private function loadRedactor() {\n\n        $template = cmsTemplate::getInstance();\n\n        if (!empty($this->options['plugins'])) {\n\n            foreach ($this->options['plugins'] as $plugin) {\n                $template->addJSFromContext('wysiwyg/redactor/files/plugins/' . $plugin . '/' . $plugin . '.js');\n            }\n\n            if (in_array('clips', $this->options['plugins'])) {\n                $this->options['clipsUrl'] = href_to('wysiwyg/redactor/files/plugins/clips/index.html');\n            }\n        }\n\n        if (self::$redactor_loaded) {\n            return false;\n        }\n\n        $template->addJSFromContext('wysiwyg/redactor/files/redactor.min.js');\n        $template->addTplJSNameFromContext('files');\n\n        $css_file     = 'wysiwyg/redactor/files/redactor.css';\n        $tpl_css_file = $template->getTplFilePath('css/wysiwyg/redactor/styles.css', false);\n        if ($tpl_css_file) {\n            $css_file = $tpl_css_file;\n        }\n        $template->addCSSFromContext($css_file);\n\n        if ($this->lang !== 'en') {\n            $template->addJSFromContext('wysiwyg/redactor/files/lang/' . $this->lang . '.js');\n        }\n\n        ob_start();\n        ?>\n            <script>\n                var redactor_global_options = {};\n                function init_redactor (dom_id){\n                    var imperavi_options = {};\n                    if(redactor_global_options.hasOwnProperty('field_'+dom_id)){\n                        imperavi_options = redactor_global_options['field_'+dom_id];\n                    } else if(redactor_global_options.hasOwnProperty('default')) {\n                        imperavi_options = redactor_global_options.default;\n                    }\n                    icms.files.url_delete = '<?php echo href_to('files', 'delete'); ?>';\n                    imperavi_options.imageDeleteCallback = function (element){\n                        if(confirm('<?php echo LANG_PARSER_IMAGE_DELETE; ?>')){\n                            icms.files.deleteByPath($(element).attr('src'));\n                        }\n                    };\n                    $('#'+dom_id).redactor(imperavi_options);\n                    icms.forms.addWysiwygsInsertPool(dom_id, function(field_element, text){\n                        $('#'+field_element).redactor('set', text);\n                        $('#'+field_element).redactor('focus');\n                    });\n                    icms.forms.addWysiwygsAddPool(dom_id, function(field_element, text){\n                        $('#'+field_element).redactor('insertHtml', text);\n                    });\n                }\n            </script>\n        <?php\n\n        $template->addBottom(ob_get_clean());\n\n        self::$redactor_loaded = true;\n    }\n\n}\n"], "filenames": ["system/controllers/admin/actions/widgets.php", "system/controllers/admin/forms/form_ctypes_basic.php", "system/controllers/admin/forms/form_ctypes_dataset.php", "system/controllers/admin/forms/form_ctypes_filter.php", "system/controllers/admin/forms/form_widgets_cols.php", "system/controllers/admin/forms/form_widgets_import_scheme.php", "system/controllers/menu/model.php", "system/core/uploader.php", "system/core/uploadfile.php", "system/fields/html.php", "system/languages/en/controllers/admin/admin.php", "system/languages/ru/controllers/admin/admin.php", "system/libs/strings.helper.php", "templates/modern/assets/fields/file.tpl.php", "templates/modern/controllers/admin/widgets_scheme.tpl.php", "templates/modern/js/files.js", "templates/modern/js/jquery.js", "templates/modern/js/vendors/toastr/toastr.min.js", "wysiwyg/redactor/files/redactor.js", "wysiwyg/redactor/files/redactor.min.js", "wysiwyg/redactor/wysiwyg.class.php"], "buggy_code_start_loc": [104, 84, 69, 130, 22, 41, 242, 295, 9, 205, 404, 424, 966, 31, 24, 6, 1, 1, 3, 1, 108], "buggy_code_end_loc": [116, 84, 69, 130, 22, 42, 244, 446, 25, 205, 405, 425, 967, 32, 53, 12, 3, 2, 1682, 2, 168], "fixing_code_start_loc": [104, 85, 70, 131, 23, 41, 242, 295, 9, 206, 404, 424, 966, 31, 24, 5, 1, 1, 4, 1, 108], "fixing_code_end_loc": [116, 86, 71, 132, 24, 42, 245, 471, 48, 221, 405, 425, 967, 42, 53, 5, 3, 2, 1683, 3, 170], "type": "CWE-918", "message": "Server-Side Request Forgery (SSRF) in GitHub repository instantsoft/icms2 prior to 2.16.1-git.", "other": {"cve": {"id": "CVE-2023-4878", "sourceIdentifier": "security@huntr.dev", "published": "2023-09-10T18:15:07.537", "lastModified": "2023-09-19T01:16:52.127", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Server-Side Request Forgery (SSRF) in GitHub repository instantsoft/icms2 prior to 2.16.1-git."}, {"lang": "es", "value": "Se ha encontrado una vulnerabilidad de Server-Side Request Forgery (SSRF) en el repositorio de GitHub instantsoft/icms2 anterior a 2.16.1-git. "}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.5}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 4.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 1.4}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-918"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:instantcms:instantcms:*:*:*:*:*:*:*:*", "versionEndExcluding": "2.16.1", "matchCriteriaId": "56EF3F9B-6CDB-4568-AF80-EEF6D72B72F6"}]}]}], "references": [{"url": "https://github.com/instantsoft/icms2/commit/d0aeeaf5979fbdbf80dc3a3227d6c58442ab7487", "source": "security@huntr.dev", "tags": ["Patch"]}, {"url": "https://huntr.dev/bounties/655c4f77-04b2-4220-bfaf-a4d99fe86703", "source": "security@huntr.dev", "tags": ["Exploit", "Issue Tracking", "Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/instantsoft/icms2/commit/d0aeeaf5979fbdbf80dc3a3227d6c58442ab7487"}}