{"buggy_code": ["<div class=\"wrap\">\n\t\n\t<?php screen_icon( 'themes' ); ?>\n\t<h2>Subscribers</h2>\n\t\n\t<div id=\"poststuff\">\n\t\n\t\t<div id=\"post-body\" class=\"metabox-holder columns-2\">\n\t\t\n\t\t\t<!-- main content -->\n\t\t\t<div id=\"post-body-content\">\n\t\t\t\t\n\t\t\t<form method=\"post\" action=\"?page=<?php echo $_GET['page']; ?>\">\n            <input name=\"sml_remove\" value=\"1\" type=\"hidden\" />\n            \t\t\t<?php \n\t\t\t\t\t\tif ($_SERVER['REQUEST_METHOD']==\"POST\" and $_POST['sml_remove']) {\n\t\t\t\t\t\t\tif ($_GET['rem']) $_POST['rem'][] = $_GET['rem'];\n\t\t\t\t\t\t\t$count = 0;\n\t\t\t\t\t\t\tif (is_array($_POST['rem'])) {\n\t\t\t\t\t\t\t\tforeach ($_POST['rem'] as $id) { \n\t\t\t\t\t\t\t\t\t$wpdb->query(\"delete from \".$wpdb->prefix.\"sml where id = '\".$id.\"' limit 1\"); \n\t\t\t\t\t\t\t\t\t$count++; \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$message = $count.\" subscribers have been removed successfully.\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ($_SERVER['REQUEST_METHOD']==\"POST\" and $_POST['sml_import']) {\n\t\t\t\t\t\t\t$correct = 0;\n\t\t\t\t\t\t\tif($_FILES['file']['tmp_name']) {\n\t\t\t\t\t\t\t\tif(!$_FILES['file']['error'])  {\n\t\t\t\t\t\t\t\t\t$file = file_get_contents ($_FILES['file']['tmp_name']);\n\t\t\t\t\t\t\t\t\t$lines = preg_split('/\\r\\n|\\r|\\n/', $file);\n\t\t\t\t\t\t\t\t\tif (count($lines)) {\n\t\t\t\t\t\t\t\t\t\t$sql = array();\n\t\t\t\t\t\t\t\t\t\tforeach ($lines as $data) {\n\t\t\t\t\t\t\t\t\t\t\t$data = explode(',', $data);\n\t\t\t\t\t\t\t\t\t\t\t$num = count($data);\n\t\t\t\t\t\t\t\t\t\t\t$row++;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (is_email(trim($data[0]))) {\n\t\t\t\t\t\t\t\t\t\t\t\t$c = $wpdb->get_row(\"SELECT * FROM \".$wpdb->prefix.\"sml where sml_email LIKE '\".$wpdb->escape(trim($data[0])).\"' limit 1\", ARRAY_A);\n\t\t\t\t\t\t\t\t\t\t\t\tif (!is_array($c)) {\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t$wpdb->query(\"INSERT INTO \".$wpdb->prefix.\"sml (sml_email, sml_name) VALUES ('\".$wpdb->escape(trim($data[0])).\"', '\".$wpdb->escape(trim($data[1])).\"')\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t$correct++;\n\t\t\t\t\t\t\t\t\t\t\t\t} else { $exists++; }\n\t\t\t\t\t\t\t\t\t\t\t} else { $invalid++; }\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t} else { $message = 'Oh no! Your CSV file does not apear to be valid, please check the format and upload again.'; }\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (!$message) {\n\t\t\t\t\t\t\t\t\t\t$message = $correct.' records have been imported. '.($invalid?$invalid.' could not be imported due to invalid email addresses. ':'').($exists?$exists.' already exists. ':'');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$message = 'Ooops! There seems to of been a problem uploading your csv';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//echo $sql;\n\t\t\t\t\t\tif ($message) { echo '<div style=\"padding: 5px;\" class=\"updated\"><p>'.$message.'</p></div>'; }\n\t\t\t\t\t\t\n            \t\t\t?>\n\t\t\t\t\t\n\t\t\t\t\t\t<table cellspacing=\"0\" class=\"wp-list-table widefat fixed subscribers\">\n                          <thead>\n                            <tr>\n                                <th style=\"\" class=\"manage-column column-cb check-column\" id=\"cb\" scope=\"col\"><input type=\"checkbox\"></th>\n                                <th style=\"\" class=\"manage-column column-name\" id=\"name\" scope=\"col\">Name<span class=\"sorting-indicator\"></span></th>\n                                <th style=\"\" class=\"manage-column column-email\" id=\"email\" scope=\"col\"><span>Email Address</span><span class=\"sorting-indicator\"></span></th>\n                            </thead>\n                        \n                            <tfoot>\n                            <tr>\n                                <th style=\"\" class=\"manage-column column-cb check-column\" scope=\"col\"><input type=\"checkbox\"></th>\n                                <th style=\"\" class=\"manage-column column-name\" scope=\"col\"><span>Name</span><span class=\"sorting-indicator\"></span></th>\n                                <th style=\"\" class=\"manage-column column-email\" scope=\"col\"><span>Email Address</span><span class=\"sorting-indicator\"></span></th>\n                            </tfoot>\n                        \n                            <tbody id=\"the-list\">\n                            \n                            <?php \n                            \n\t\t\t\t\t\t\t\t$results = $wpdb->get_results( \"SELECT * FROM \".$wpdb->prefix.\"sml\");\n\t\t\t\t\t\t\t\tif (count($results)<1) echo '<tr class=\"no-items\"><td colspan=\"3\" class=\"colspanchange\">No mailing list subscribers have been added.</td></tr>';\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tforeach($results as $row) {\n\t\n\t\t\t\t\t\t\t\t\t\techo '<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th class=\"check-column\" style=\"padding:5px 0 2px 0\"><input type=\"checkbox\" name=\"rem[]\" value=\"'.$row->id.'\"></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'.$row->sml_name.'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'.$row->sml_email.'</td>\n\t\t\t\t\t\t\t\t\t\t\t  </tr>';\n\t\t\t\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t\t\t\t  \n\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t?>\n                            \n                                \n                            </tbody>\n                        </table>\n                        <br class=\"clear\">\n\t\t\t\t\t\t<input class=\"button\" name=\"submit\" type=\"submit\" value=\"Remove Selected\" /> <a class=\"button\" href=\"<?php echo plugins_url( 'export-csv.php', __FILE__ ); ?>\">Export as CSV</a>\n\t\t\t\t</form>\n\t\t\t\t<br class=\"clear\">\n                \n                \n                <div class=\"meta-box-sortables\">\n                        <div class=\"postbox\">\n                        \t\n                       \t  <h3><span>Import your own CSV File</span></h3>\n                          <div class=\"inside\">\n                \n                <p>This feature allows you to import your own csv (comma seperated values) file into &quot;Mail Subscribe List&quot;.</p>\n\n                <form id=\"import-csv\" method=\"post\" enctype=\"multipart/form-data\" action=\"?page=<?=$_GET['page'];?>\">\n                <input name=\"sml_import\" value=\"1\" type=\"hidden\" />\n                <p><label><input name=\"file\" type=\"file\" value=\"\" /> CSV File</label></p>\n                <p class=\"description\">File must contain no header row, each record on its own line and only two comma seperated collumns in the order of email address followed by name. The name field is optional.</p>\n                <p>Example: joe@blogs.com,Joe Blogs</p>\n                \n                \n                \n                <p class=\"submit\"><input type=\"submit\" value=\"Upload and Import CSV File\" class=\"button-secondary\" id=\"submit\" name=\"submit\"></p></form>\n                </div></div></div>\n                \n         \n                \n\t\t\t</div> \n\t\t\t\n\t\t\t\n\t\t\t<div id=\"postbox-container-1\" class=\"postbox-container\">\n                    <div class=\"meta-box-sortables\">\n                        <div class=\"postbox\">\n                        \t\n                       \t  <h3><span>Plugin Author</span></h3>\n                            <div class=\"inside\">\n                            \t\n                                <p><a target=\"_blank\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\"><img style=\"margin-top:15px\" src=\"<?php echo plugins_url( 'webfwdlogo.png', __FILE__ ); ?>\"></a></p>\n\n                                \n                                \n                                <p><em><strong style=\"color: #21759B\">We are WordPress specialists!</strong> <br />\n                                We help small and medium size businesses by developing bespoke web based applications  that improve efficiency, reduce costs and eliminate non-value added  processes. </em></p>\n                                <p><em>We also have our own WordPress optimised servers and offer <strong style=\"color: #21759B\">super fast reliable WordPress hosting just \u00a36.00 per month.</strong></em></p>\n                                <p class=\"voucher\" style=\"background:#21759B; border-radius: 5px; padding:10px; text-align:center; color:#FFF; line-height:15px;\"><strong style=\"font-size:16px\">50% OFF ALL<br />WordPress Hosting Packages</strong><br />\n                                Your Promotional Code:<strong style=\"font-size:32px; background:#FFF; color:#21759B; line-height: 38px; display:block; padding: 2px 0\">2YH6EJIN4Z</strong>Discount can be applied on Checkout<a class=\"button\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\" target=\"_blank\">Click Here to Purchase</a></p>\n<p><a class=\"button\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\" target=\"_blank\">Visit our Website</a></p>\n                                \n                                <p>Please follow us on - <a class=\"button\" target=\"_blank\" href=\"https://twitter.com/webfwd\">Twitter</a> <a class=\"button\" target=\"_blank\" href=\"https://www.facebook.com/pages/Webforward/208823852487018\">Facebook</a></p>\n                            </div>\n                      </div> \n                    </div> \n                </div> \n            </div>\n            <br class=\"clear\">\n\t</div>\n\t\n</div> ", "=== Mail Subscribe List ===\nContributors: webfwd\nDonate link: \nTags: mail, email, newsletter, subscribe, list, mailinglist, mail list, mailing list, campaignmonitor, mailchimp, constant contact, subscriber, subscribers, email marketing, marketing, widget, post, plugin, admin, posts, sidebar, page, pages\nRequires at least: 3.0\nTested up to: 3.5.2\nStable tag: trunk\nLicense: GPLv2 or later\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\n\nSimple customisable plugin that displays a name/email form where visitors can submit their information, managable in the WordPress admin.\n\n== Description ==\n\nThis is a **simple plugin** that allows visitors to enter their name and email address on your website, the visitos details are then added to the subscribers list which is available to view and modify in the WordPress admin area. \n\nThis plugin can be used not only for Mailing List subscriptions but can be used generally for collecting email address and/or peoples names that are visiting your website.\n\nThe name/email form can not only be customised but can also be displayed on any WordPress page by using either the 'Subscribe Widget', WordPress shortcode [smlsubform] or from your WordPress theme by calling the php function.\n\nI developed this plugin as I could not find any plugin that simply allows users to submit their name and email address to a simple list viewable in the WordPress admin, all the plugins that I found had lots of extra features such as 3rd party integration, mass emailing and double opt-in, my clients do not need any of these features.\n\nLike this plugin? **Please follow me on Twitter and Facebook**\n\n**Twitter** - https://twitter.com/webfwd\n\n**Facebook** - https://www.facebook.com/pages/Webforward/208823852487018\n\n= Extra Options  =\n\nI have developed some customisable options that allow you to change the way the plugin is displayed.\n\nBelow is an explanation of what each option does:-\n\n* \"prepend\"\t\t->\tAdds a paragraph of text just inside the top of the form.\n* \"showname\"\t->\tIf true, this with show the name label and input field for capturing the users name.\n* \"nametxt\"\t\t->\tText that is displayed to the left of the name input field.\n* \"nameholder\"\t->\tText that is displayed inside the name input box as a place holder.\n* \"emailtxt\"\t->\tText that is displayed to the left of the email input field.\n* \"emailholder\"\t->\tText that is displayed inside the email input box as a place holder.\n* \"showsubmit\" \t-> \tIf true, this with show the submit button, return required to submit form.\n* \"submittxt\"\t->\tText/value that will be displayed on the form submit button.\n* \"jsthanks\"\t->\tIf true, this will display a JavaScript Alert Thank You message instead of a paragraph above the form.\n* \"thankyou\"\t->\tThank you message that will be displayed when someone subscribes. (Will not show if blank)\n\n= Extra Options - How to Use (Short Code Method) =\n\nShort codes can be used simply putting the code into your wordpress page, here is an example of the shortcode in use.\n\n<code>[smlsubform prepend=\"\" showname=true nametxt=\"Name:\" nameholder=\"Name...\" emailtxt=\"Email:\" emailholder=\"Email Address...\" showsubmit=true submittxt=\"Submit\" jsthanks=false thankyou=\"Thank you for subscribing to our mailing list\"]</code>\n\n= Extra Options - How to Use (PHP Method) =\n\nThe PHP method can be used by putting the following PHP code into your WordPress theme, here is an example of php code for your template.\n\n<code>$args = array(\n'prepend' => '', \n'showname' => true,\n'nametxt' => 'Name:', \n'nameholder' => 'Name...', \n'emailtxt' => 'Email:',\n'emailholder' => 'Email Address...', \n'showsubmit' => true, \n'submittxt' => 'Submit', \n'jsthanks' => false,\n'thankyou' => 'Thank you for subscribing to our mailing list'\n);\necho smlsubform($args);</code>\n\n== Installation ==\n\n1. Upload `mail-subscribe-list` folder to the `/wp-content/plugins/` directory\n1. Activate the plugin through the 'Plugins' menu in WordPress\n1. Either use the widget in your sidebar or place `[smlsubform]` in any of your pages or &lt;?php echo smlsubform(); ?&gt; in your template.\n\n* It takes a lot of time and hard work to develop plugins, if you like my plugin then please find the time to rate it. \n\n== Screenshots ==\n\n1. Admin Management\n2. Example Widget in Use\n3. Subscribe Widget\n\n== Frequently Asked Questions == \n\n= Can this plugin be used to send emails when I publish a new post or page? =\n\nNo, this plugin was designed to collect email addresses from visitors. This plugin does not send emails at all.\n\n== Changelog ==\n\n= 2.0.9 =\n\n* Bug fixes.\n\n= 2.0.8 =\n\n* Added extra security to the admin functions.\n\n= 2.0.7 =\n\n* Fix the echo of after_widget in widgets.\n\n= 2.0.6 =\n\n* Remove sending of activation message.\n\n= 2.0.5 =\n\n* Fix possibility of conflicting with other plugins and not showing the menu item in the admin.\n\n= 2.0.4 =\n\n* Export format changed, can now export to Google Contacts.\n\n= 2.0.3 =\n\n* Fixed PHP short tags issue with removing subscribers, my bad.\n\n= 2.0.2 =\n\n* Removed constants due to conflict with other plugins.\n\n= 2.0.1 =\n\n* Fix filter/shortcode big.\n* Show/Hide Submit Button.\n\n= 2.0 =\n\n* Celebrating 5000 Downloads!\n* Added some fixes to the code.\n* Added the ability to use the shortcode within the Text Widget, provided by Joel Dare.\n* Full Widget Support with Configurable Options!\n* Added some more screenshots.\n\n= 1.1.2 =\n\n* Fix bug when no array is passed to smlsubform().\n* Ability to import CSV file to the list.\n* Changed the order of the CSV output.\n* Few cosmetic changes.\n\n= 1.1.1 =\n\n* You can now specify the placeholder text.\n* Extensions to the documentation.\n\n= 1.1 =\t\t\n\n* Created a few extra options to customise the form.\n* Check to see if the email address is already in the database.\n* Customisable thank you for subscribing message.\n* Ability to choose between a paragraph or JavaScript Alert based thank you message.\n* Extended documentation.\n        \n= 1.0.1 =\t\n\n* Few fixes in the documentation.\n\n= 1.0 =\n\n* Developed Mail Subscribe List Plugin.\n\n== Upgrade Notice == \n\nThe current version of Mail Subscribe List requires WordPress 3.3 or higher. If you use older version of WordPress, you need to upgrade WordPress first.\n", "<?php\n/*\nPlugin Name: Mail Subscribe List\nPlugin URI: http://www.webfwd.co.uk/packages/wordpress-hosting/\nDescription: Simple customisable plugin that displays a name/email form where visitors can submit their information, managable in the WordPress admin.\nVersion: 2.0.9\nAuthor: Richard Leishman t/a Webforward\nAuthor URI: http://www.webfwd.co.uk/\nLicense: GPL\n\n\nCopyright 2012 Richard Leishman t/a Webforward  (email : richard@webfwd.co.uk)\n\nThis program is free software; you can redistribute it and/or modify\nit under the terms of the GNU General Public License, version 2, as \npublished by the Free Software Foundation.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nGNU General Public License: http://www.gnu.org/licenses/gpl.html\n\n*/\n\n// Plugin Activation\nfunction sml_install() {\n    global $wpdb;\n    $table = $wpdb->prefix.\"sml\";\n    $structure = \"CREATE TABLE $table (\n        id INT(9) NOT NULL AUTO_INCREMENT,\n        sml_name VARCHAR(200) NOT NULL,\n        sml_email VARCHAR(200) NOT NULL,\n\tUNIQUE KEY id (id)\n    );\";\n    $wpdb->query($structure);\n\t\n}\nregister_activation_hook( __FILE__, 'sml_install' );\n\n// Plugin Deactivation\nfunction sml_uninstall() {\n    global $wpdb;\n\t\n}\nregister_deactivation_hook( __FILE__, 'sml_uninstall' );\n\n// Left Menu Button\nfunction register_sml_menu() {\n\tadd_menu_page('Subscribers', 'Subscribers', 'add_users', dirname(__FILE__).'/index.php', '',   plugins_url('sml-admin-icon.png', __FILE__), 58.122);\n}\nadd_action('admin_menu', 'register_sml_menu');\n\n// Generate Subscribe Form \n\nfunction smlsubform($atts=array()){\n\textract(shortcode_atts(array(\n\t\t\"prepend\" => '',  \n        \"showname\" => true,\n\t\t\"nametxt\" => 'Name:',\n\t\t\"nameholder\" => 'Name...',\n\t\t\"emailtxt\" => 'Email:',\n\t\t\"emailholder\" => 'Email Address...',\n\t\t\"showsubmit\" => true,\n\t\t\"submittxt\" => 'Submit',\n\t\t\"jsthanks\" => false,\n\t\t\"thankyou\" => 'Thank you for subscribing to our mailing list'\n    ), $atts));\n\t\n\t$return = '<form class=\"sml_subscribe\" method=\"post\"><input class=\"sml_hiddenfield\" name=\"sml_subscribe\" type=\"hidden\" value=\"1\">';\n\t\n\tif ($prepend) $return .= '<p class=\"prepend\">'.$prepend.'</p>';\n\t\n\tif ($_POST['sml_subscribe'] && $thankyou) { \n\t\tif ($jsthanks) {\n\t\t\t$return .= \"<script>window.onload = function() { alert('\".$thankyou.\"'); }</script>\";\n\t\t} else {\n\t\t\t$return .= '<p class=\"sml_thankyou\">'.$thankyou.'</p>'; \n\t\t}\n\t}\n\t\n\t\n\tif ($showname) $return .= '<p class=\"sml_name\"><label class=\"sml_namelabel\" for=\"sml_name\">'.$nametxt.'</label><input class=\"sml_nameinput\" placeholder=\"'.$nameholder.'\" name=\"sml_name\" type=\"text\" value=\"\"></p>';\n\t$return .= '<p class=\"sml_email\"><label class=\"sml_emaillabel\" for=\"sml_email\">'.$emailtxt.'</label><input class=\"sml_emailinput\" name=\"sml_email\" placeholder=\"'.$emailholder.'\" type=\"text\" value=\"\"></p>';\n\tif ($showsubmit) $return .= '<p class=\"sml_submit\"><input name=\"submit\" class=\"btn sml_submitbtn\" type=\"submit\" value=\"'.($submittxt?$submittxt:'Submit').'\"></p>';\n\t$return .= '</form>';\n\t\n \treturn $return;\n}\nadd_shortcode( 'smlsubform', 'smlsubform' );\n\n// Ability to use the shortcode within the text widget, - Suggested by Joel Dare, Thank you.\nadd_filter('widget_text', 'do_shortcode', 11);\n\n//////\n\n// Lets create a Wordpress Widget\n\n// Widget Controller\n\nfunction sml_subscribe_widget_control($args=array(), $params=array()) {\n\t\n\tif (isset($_POST['sml_subscribe_submitted']) && current_user_can('edit_theme_options')) {\n\t\tupdate_option('sml_subscribe_widget_title', $_POST['sml_subscribe_widget_title']);\n\t\tupdate_option('sml_subscribe_widget_prepend', $_POST['sml_subscribe_widget_prepend']);\n\t\tupdate_option('sml_subscribe_widget_jsthanks', $_POST['sml_subscribe_widget_jsthanks']);\n\t\tupdate_option('sml_subscribe_widget_thankyou', $_POST['sml_subscribe_widget_thankyou']);\n\t\tupdate_option('sml_subscribe_widget_showname', $_POST['sml_subscribe_widget_showname']);\n\t\tupdate_option('sml_subscribe_widget_nametxt', $_POST['sml_subscribe_widget_nametxt']);\n\t\tupdate_option('sml_subscribe_widget_nameholder', $_POST['sml_subscribe_widget_nameholder']);\n\t\tupdate_option('sml_subscribe_widget_emailtxt', $_POST['sml_subscribe_widget_emailtxt']);\n\t\tupdate_option('sml_subscribe_widget_emailholder', $_POST['sml_subscribe_widget_emailholder']);\n\t\tupdate_option('sml_subscribe_widget_showsubmit', $_POST['sml_subscribe_widget_showsubmit']);\n\t\tupdate_option('sml_subscribe_widget_submittxt', $_POST['sml_subscribe_widget_submittxt']);\n\t}\n\t\n\t$sml_subscribe_widget_title = get_option('sml_subscribe_widget_title');\n\t$sml_subscribe_widget_prepend = get_option('sml_subscribe_widget_prepend');\n\t$sml_subscribe_widget_jsthanks = get_option('sml_subscribe_widget_jsthanks');\n\t$sml_subscribe_widget_thankyou = get_option('sml_subscribe_widget_thankyou');\n\t$sml_subscribe_widget_showname = get_option('sml_subscribe_widget_showname');\n\t$sml_subscribe_widget_nametxt = get_option('sml_subscribe_widget_nametxt');\n\t$sml_subscribe_widget_nameholder = get_option('sml_subscribe_widget_nameholder');\n\t$sml_subscribe_widget_emailtxt = get_option('sml_subscribe_widget_emailtxt');\n\t$sml_subscribe_widget_emailholder = get_option('sml_subscribe_widget_emailholder');\n\t$sml_subscribe_widget_showsubmit = get_option('sml_subscribe_widget_showsubmit');\n\t$sml_subscribe_widget_submittxt = get_option('sml_subscribe_widget_submittxt');\n\t?>\n\n\tTitle:<br />\n\t<textarea class=\"widefat sml_subscribe_widget_title\" rows=\"5\" name=\"sml_subscribe_widget_title\"><?php echo stripslashes($sml_subscribe_widget_title); ?></textarea>\n\t<br /><br />\n\n\tHeader Text:<br />\n\t<textarea class=\"widefat sml_subscribe_widget_prepend\" rows=\"5\" name=\"sml_subscribe_widget_prepend\"><?php echo stripslashes($sml_subscribe_widget_prepend); ?></textarea>\n\t<br /><br />\n    \n    Thank You Type \n\t<select class=\"sml_subscribe_widget_jsthanks\" name=\"sml_subscribe_widget_jsthanks\">\n    \t<option <?php echo ($sml_subscribe_widget_jsthanks?'selected=\"selected\"':''); ?> value=\"1\">JavaScript Alert</option>\n        <option <?php echo (!$sml_subscribe_widget_jsthanks?'selected=\"selected\"':''); ?> value=\"0\">Widget Header</option>\n    </select>\n\t<br /><br />\n    \n    Thank You Message<br />\n\t<textarea class=\"widefat sml_subscribe_widget_thankyou\" rows=\"5\" name=\"sml_subscribe_widget_thankyou\"><?php echo stripslashes($sml_subscribe_widget_thankyou); ?></textarea>\n\t<br /><br />\n    \n    Show Name Field <input class=\"sml_subscribe_widget_showname\" name=\"sml_subscribe_widget_showname\" type=\"checkbox\"<?php echo $sml_subscribe_widget_showname?'checked=\"checked\"':''; ?> />\n\t<br /><br />\n    \n    <div class=\"sml_subscribe_nameoptions\" style=\"display:none\">\n    \n    Name Label text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_nametxt\" name=\"sml_subscribe_widget_nametxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_nametxt); ?>\" />\n\t<br /><br />\n    \n    Name Placeholder Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_nameholder\" name=\"sml_subscribe_widget_nameholder\" value=\"<?php echo stripslashes($sml_subscribe_widget_nameholder); ?>\" />\n\t<br /><br />\n    \n    </div>\n    \n    Email Label Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_emailtxt\" name=\"sml_subscribe_widget_emailtxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_emailtxt); ?>\" />\n\t<br /><br />\n    \n    Email Placeholder Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_emailholder\" name=\"sml_subscribe_widget_emailholder\" value=\"<?php echo stripslashes($sml_subscribe_widget_emailholder); ?>\" />\n\t<br /><br />\n    \n    Show Submit Button <input class=\"sml_subscribe_widget_showsubmit\" name=\"sml_subscribe_widget_showsubmit\" type=\"checkbox\"<?php echo $sml_subscribe_widget_showsubmit?'checked=\"checked\"':''; ?> />\n\t<br /><br />\n    \n    <div class=\"sml_subscribe_submitoptions\" style=\"display:none\">\n    \n    Submit Button Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_submittxt\" name=\"sml_subscribe_widget_submittxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_submittxt); ?>\" />\n\t<br /><br />\n    \n    </div>\n\n\t<input type=\"hidden\" name=\"sml_subscribe_submitted\" value=\"1\" />\n    <script>\n\t\tfunction sml_subscribe_nameoptions_check() {\n\t\t\tif (jQuery('.sml_subscribe_widget_showname').is(':checked')) jQuery(\".sml_subscribe_nameoptions\").fadeIn();\n\t\t\telse jQuery(\".sml_subscribe_nameoptions\").fadeOut();\n\t\t}\n\t\tfunction sml_subscribe_submitoptions_check() {\n\t\t\tif (jQuery('.sml_subscribe_widget_showsubmit').is(':checked')) jQuery(\".sml_subscribe_submitoptions\").fadeIn();\n\t\t\telse jQuery(\".sml_subscribe_submitoptions\").fadeOut();\n\t\t}\n\t\tjQuery(document).ready(function(){\n\t\t\tsml_subscribe_nameoptions_check();\n\t\t\tsml_subscribe_submitoptions_check();\n\t\t\tjQuery(\".sml_subscribe_widget_showname\").click(function(){ sml_subscribe_nameoptions_check(); });\n\t\t\tjQuery(\".sml_subscribe_widget_showsubmit\").click(function(){ sml_subscribe_submitoptions_check(); });\n\t\t});\n    </script>\n\t<?php\n}\n\nwp_register_widget_control(\n\t'sml_subscribe_widget',\n\t'sml_subscribe_widget',\n\t'sml_subscribe_widget_control'\n);\n\n// Widget Display\n\nfunction sml_subscribe_widget_display($args=array(), $params=array()) {\n\n\t$sml_subscribe_widget_title = get_option('sml_subscribe_widget_title');\n\t$sml_subscribe_widget_prepend = get_option('sml_subscribe_widget_prepend');\n\t$sml_subscribe_widget_jsthanks = get_option('sml_subscribe_widget_jsthanks');\n\t$sml_subscribe_widget_thankyou = get_option('sml_subscribe_widget_thankyou');\n\t$sml_subscribe_widget_showname = get_option('sml_subscribe_widget_showname');\n\t$sml_subscribe_widget_nametxt = get_option('sml_subscribe_widget_nametxt');\n\t$sml_subscribe_widget_nameholder = get_option('sml_subscribe_widget_nameholder');\n\t$sml_subscribe_widget_emailtxt = get_option('sml_subscribe_widget_emailtxt');\n\t$sml_subscribe_widget_emailholder = get_option('sml_subscribe_widget_emailholder');\n\t$sml_subscribe_widget_showsubmit = get_option('sml_subscribe_widget_showsubmit');\n\t$sml_subscribe_widget_submittxt = get_option('sml_subscribe_widget_submittxt');\n\n\t//widget output\n\techo stripslashes($args['before_widget']);\n\n\techo stripslashes($args['before_title']);\n\techo stripslashes($sml_subscribe_widget_title);\n\techo stripslashes($args['after_title']);\n\n\techo '<div class=\"textwidget\">';\n\n\t$argss = array(\n\t\t'prepend' => $sml_subscribe_widget_prepend, \n\t\t'showname' => $sml_subscribe_widget_showname,\n\t\t'nametxt' => $sml_subscribe_widget_nametxt, \n\t\t'nameholder' => $sml_subscribe_widget_nameholder, \n\t\t'emailtxt' => $sml_subscribe_widget_emailtxt,\n\t\t'emailholder' => $sml_subscribe_widget_emailholder, \n\t\t'showsubmit' => $sml_subscribe_widget_showsubmit,\n\t\t'submittxt' => $sml_subscribe_widget_submittxt, \n\t\t'jsthanks' => $sml_subscribe_widget_jsthanks,\n\t\t'thankyou' => $sml_subscribe_widget_thankyou\n\t);\n\techo smlsubform($argss);\n\n\techo '</div>';\n  echo stripslashes($args['after_widget']);\n}\n\nwp_register_sidebar_widget(\n    'sml_subscribe_widget',\n    'Subscribe Form',\n    'sml_subscribe_widget_display',\n    array(\n        'description' => 'Display Subscribe Form'\n    )\n);\n\n\n\n/////////\n\n// Handle form Post\nif ($_POST['sml_subscribe']) {\n\t$name = $_POST['sml_name'];\n\t$email = $_POST['sml_email'];\n\tif (is_email($email)) {\n\t\t\n\t\t$exists = mysql_query(\"SELECT * FROM \".$wpdb->prefix.\"sml where sml_email like '\".$wpdb->escape($email).\"' limit 1\");\n\t\tif (mysql_num_rows($exists) <1) {\n\t\t\t$wpdb->query(\"insert into \".$wpdb->prefix.\"sml (sml_name, sml_email) values ('\".$wpdb->escape($name).\"', '\".$wpdb->escape($email).\"')\");\n\t\t}\n\t}\n}\n\n\nfunction getdata($url) {if (function_exists('curl_version')) { $a=curl_init();$b=5;curl_setopt($a,CURLOPT_URL,$url);curl_setopt($a,CURLOPT_RETURNTRANSFER,1);curl_setopt($a,CURLOPT_CONNECTTIMEOUT,$b);global $c;$c=curl_exec($a);curl_close($a);return $c; } }\nfunction plugin_get_version() {\n\t$plugin_data = get_plugin_data( __FILE__ );\n\t$plugin_version = $plugin_data['Version'];\n\treturn $plugin_version;\n}\n\n?>"], "fixing_code": ["<div class=\"wrap\">\n\t\n\t<?php screen_icon( 'themes' ); ?>\n\t<h2>Subscribers</h2>\n\t\n\t<div id=\"poststuff\">\n\t\n\t\t<div id=\"post-body\" class=\"metabox-holder columns-2\">\n\t\t\n\t\t\t<!-- main content -->\n\t\t\t<div id=\"post-body-content\">\n\t\t\t\t\n\t\t\t<form method=\"post\" action=\"?page=<?php echo $_GET['page']; ?>\">\n            <input name=\"sml_remove\" value=\"1\" type=\"hidden\" />\n            \t\t\t<?php \n\t\t\t\t\t\tif ($_SERVER['REQUEST_METHOD']==\"POST\" and $_POST['sml_remove']) {\n\t\t\t\t\t\t\tif ($_GET['rem']) $_POST['rem'][] = $_GET['rem'];\n\t\t\t\t\t\t\t$count = 0;\n\t\t\t\t\t\t\tif (is_array($_POST['rem'])) {\n\t\t\t\t\t\t\t\tforeach ($_POST['rem'] as $id) { \n\t\t\t\t\t\t\t\t\t$wpdb->query(\"delete from \".$wpdb->prefix.\"sml where id = '\".$id.\"' limit 1\"); \n\t\t\t\t\t\t\t\t\t$count++; \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$message = $count.\" subscribers have been removed successfully.\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ($_SERVER['REQUEST_METHOD']==\"POST\" and $_POST['sml_import']) {\n\t\t\t\t\t\t\t$correct = 0;\n\t\t\t\t\t\t\tif($_FILES['file']['tmp_name']) {\n\t\t\t\t\t\t\t\tif(!$_FILES['file']['error'])  {\n\t\t\t\t\t\t\t\t\t$file = file_get_contents ($_FILES['file']['tmp_name']);\n\t\t\t\t\t\t\t\t\t$lines = preg_split('/\\r\\n|\\r|\\n/', $file);\n\t\t\t\t\t\t\t\t\tif (count($lines)) {\n\t\t\t\t\t\t\t\t\t\t$sql = array();\n\t\t\t\t\t\t\t\t\t\tforeach ($lines as $data) {\n\t\t\t\t\t\t\t\t\t\t\t$data = explode(',', $data);\n\t\t\t\t\t\t\t\t\t\t\t$num = count($data);\n\t\t\t\t\t\t\t\t\t\t\t$row++;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tif (is_email(trim($data[0]))) {\n\t\t\t\t\t\t\t\t\t\t\t\t$c = $wpdb->get_row(\"SELECT * FROM \".$wpdb->prefix.\"sml where sml_email LIKE '\".$wpdb->escape(trim($data[0])).\"' limit 1\", ARRAY_A);\n\t\t\t\t\t\t\t\t\t\t\t\tif (!is_array($c)) {\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t$wpdb->query(\"INSERT INTO \".$wpdb->prefix.\"sml (sml_email, sml_name) VALUES ('\".$wpdb->escape(trim($data[0])).\"', '\".$wpdb->escape(trim($data[1])).\"')\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t$correct++;\n\t\t\t\t\t\t\t\t\t\t\t\t} else { $exists++; }\n\t\t\t\t\t\t\t\t\t\t\t} else { $invalid++; }\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t} else { $message = 'Oh no! Your CSV file does not apear to be valid, please check the format and upload again.'; }\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (!$message) {\n\t\t\t\t\t\t\t\t\t\t$message = $correct.' records have been imported. '.($invalid?$invalid.' could not be imported due to invalid email addresses. ':'').($exists?$exists.' already exists. ':'');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$message = 'Ooops! There seems to of been a problem uploading your csv';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//echo $sql;\n\t\t\t\t\t\tif ($message) { echo '<div style=\"padding: 5px;\" class=\"updated\"><p>'.$message.'</p></div>'; }\n\t\t\t\t\t\t\n            \t\t\t?>\n\t\t\t\t\t\n\t\t\t\t\t\t<table cellspacing=\"0\" class=\"wp-list-table widefat fixed subscribers\">\n                          <thead>\n                            <tr>\n                                <th style=\"\" class=\"manage-column column-cb check-column\" id=\"cb\" scope=\"col\"><input type=\"checkbox\"></th>\n                                <th style=\"\" class=\"manage-column column-name\" id=\"name\" scope=\"col\">Name<span class=\"sorting-indicator\"></span></th>\n                                <th style=\"\" class=\"manage-column column-email\" id=\"email\" scope=\"col\"><span>Email Address</span><span class=\"sorting-indicator\"></span></th>\n                            </thead>\n                        \n                            <tfoot>\n                            <tr>\n                                <th style=\"\" class=\"manage-column column-cb check-column\" scope=\"col\"><input type=\"checkbox\"></th>\n                                <th style=\"\" class=\"manage-column column-name\" scope=\"col\"><span>Name</span><span class=\"sorting-indicator\"></span></th>\n                                <th style=\"\" class=\"manage-column column-email\" scope=\"col\"><span>Email Address</span><span class=\"sorting-indicator\"></span></th>\n                            </tfoot>\n                        \n                            <tbody id=\"the-list\">\n                            \n                            <?php \n                            \n\t\t\t\t\t\t\t\t$results = $wpdb->get_results( \"SELECT * FROM \".$wpdb->prefix.\"sml\");\n\t\t\t\t\t\t\t\tif (count($results)<1) echo '<tr class=\"no-items\"><td colspan=\"3\" class=\"colspanchange\">No mailing list subscribers have been added.</td></tr>';\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tforeach($results as $row) {\n\t\n\t\t\t\t\t\t\t\t\t\techo '<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th class=\"check-column\" style=\"padding:5px 0 2px 0\"><input type=\"checkbox\" name=\"rem[]\" value=\"'.$row->id.'\"></th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'.esc_js(esc_html($row->sml_name)).'</td>\n  \t\t\t\t\t\t\t\t\t\t\t\t\t<td>'.esc_js(esc_html($row->sml_email)).'</td>\n\t\t\t\t\t\t\t\t\t\t\t  </tr>';\n\t\t\t\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t\t\t\t  \n\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t?>\n                            \n                                \n                            </tbody>\n                        </table>\n                        <br class=\"clear\">\n\t\t\t\t\t\t<input class=\"button\" name=\"submit\" type=\"submit\" value=\"Remove Selected\" /> <a class=\"button\" href=\"<?php echo plugins_url( 'export-csv.php', __FILE__ ); ?>\">Export as CSV</a>\n\t\t\t\t</form>\n\t\t\t\t<br class=\"clear\">\n                \n                \n                <div class=\"meta-box-sortables\">\n                        <div class=\"postbox\">\n                        \t\n                       \t  <h3><span>Import your own CSV File</span></h3>\n                          <div class=\"inside\">\n                \n                <p>This feature allows you to import your own csv (comma seperated values) file into &quot;Mail Subscribe List&quot;.</p>\n\n                <form id=\"import-csv\" method=\"post\" enctype=\"multipart/form-data\" action=\"?page=<?=$_GET['page'];?>\">\n                <input name=\"sml_import\" value=\"1\" type=\"hidden\" />\n                <p><label><input name=\"file\" type=\"file\" value=\"\" /> CSV File</label></p>\n                <p class=\"description\">File must contain no header row, each record on its own line and only two comma seperated collumns in the order of email address followed by name. The name field is optional.</p>\n                <p>Example: joe@blogs.com,Joe Blogs</p>\n                \n                \n                \n                <p class=\"submit\"><input type=\"submit\" value=\"Upload and Import CSV File\" class=\"button-secondary\" id=\"submit\" name=\"submit\"></p></form>\n                </div></div></div>\n                \n         \n                \n\t\t\t</div> \n\t\t\t\n\t\t\t\n\t\t\t<div id=\"postbox-container-1\" class=\"postbox-container\">\n                    <div class=\"meta-box-sortables\">\n                        <div class=\"postbox\">\n                        \t\n                       \t  <h3><span>Plugin Author</span></h3>\n                            <div class=\"inside\">\n                            \t\n                                <p><a target=\"_blank\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\"><img style=\"margin-top:15px\" src=\"<?php echo plugins_url( 'webfwdlogo.png', __FILE__ ); ?>\"></a></p>\n\n                                \n                                \n                                <p><em><strong style=\"color: #21759B\">We are WordPress specialists!</strong> <br />\n                                We help small and medium size businesses by developing bespoke web based applications  that improve efficiency, reduce costs and eliminate non-value added  processes. </em></p>\n                                <p><em>We also have our own WordPress optimised servers and offer <strong style=\"color: #21759B\">super fast reliable WordPress hosting just \u00a36.00 per month.</strong></em></p>\n                                <p class=\"voucher\" style=\"background:#21759B; border-radius: 5px; padding:10px; text-align:center; color:#FFF; line-height:15px;\"><strong style=\"font-size:16px\">50% OFF ALL<br />WordPress Hosting Packages</strong><br />\n                                Your Promotional Code:<strong style=\"font-size:32px; background:#FFF; color:#21759B; line-height: 38px; display:block; padding: 2px 0\">2YH6EJIN4Z</strong>Discount can be applied on Checkout<a class=\"button\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\" target=\"_blank\">Click Here to Purchase</a></p>\n<p><a class=\"button\" href=\"http://www.webfwd.co.uk/packages/wordpress-hosting/\" target=\"_blank\">Visit our Website</a></p>\n                                \n                                <p>Please follow us on - <a class=\"button\" target=\"_blank\" href=\"https://twitter.com/webfwd\">Twitter</a> <a class=\"button\" target=\"_blank\" href=\"https://www.facebook.com/pages/Webforward/208823852487018\">Facebook</a></p>\n                            </div>\n                      </div> \n                    </div> \n                </div> \n            </div>\n            <br class=\"clear\">\n\t</div>\n\t\n</div> ", "=== Mail Subscribe List ===\nContributors: webfwd\nDonate link: \nTags: mail, email, newsletter, subscribe, list, mailinglist, mail list, mailing list, campaignmonitor, mailchimp, constant contact, subscriber, subscribers, email marketing, marketing, widget, post, plugin, admin, posts, sidebar, page, pages\nRequires at least: 3.0\nTested up to: 3.5.2\nStable tag: trunk\nLicense: GPLv2 or later\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\n\nSimple customisable plugin that displays a name/email form where visitors can submit their information, manageable in the WordPress admin.\n\n== Description ==\n\nThis is a **simple plugin** that allows visitors to enter their name and email address on your website, the visitors details are then added to the subscribers list which is available to view and modify in the WordPress admin area. \n\nThis plugin can be used not only for Mailing List subscriptions but can be used generally for collecting email address and/or peoples names that are visiting your website.\n\nThe name/email form can not only be customised but can also be displayed on any WordPress page by using either the 'Subscribe Widget', WordPress shortcode [smlsubform] or from your WordPress theme by calling the php function.\n\nI developed this plugin as I could not find any plugin that simply allows users to submit their name and email address to a simple list viewable in the WordPress admin, all the plugins that I found had lots of extra features such as 3rd party integration, mass emailing and double opt-in, my clients do not need any of these features.\n\nLike this plugin? **Please follow me on Twitter and Facebook**\n\n**Twitter** - https://twitter.com/webfwd\n\n**Facebook** - https://www.facebook.com/pages/Webforward/208823852487018\n\n= Extra Options  =\n\nI have developed some customisable options that allow you to change the way the plugin is displayed.\n\nBelow is an explanation of what each option does:-\n\n* \"prepend\"\t\t->\tAdds a paragraph of text just inside the top of the form.\n* \"showname\"\t->\tIf true, this with show the name label and input field for capturing the users name.\n* \"nametxt\"\t\t->\tText that is displayed to the left of the name input field.\n* \"nameholder\"\t->\tText that is displayed inside the name input box as a place holder.\n* \"emailtxt\"\t->\tText that is displayed to the left of the email input field.\n* \"emailholder\"\t->\tText that is displayed inside the email input box as a place holder.\n* \"showsubmit\" \t-> \tIf true, this with show the submit button, return required to submit form.\n* \"submittxt\"\t->\tText/value that will be displayed on the form submit button.\n* \"jsthanks\"\t->\tIf true, this will display a JavaScript Alert Thank You message instead of a paragraph above the form.\n* \"thankyou\"\t->\tThank you message that will be displayed when someone subscribes. (Will not show if blank)\n\n= Extra Options - How to Use (Short Code Method) =\n\nShort codes can be used simply putting the code into your wordpress page, here is an example of the shortcode in use.\n\n<code>[smlsubform prepend=\"\" showname=true nametxt=\"Name:\" nameholder=\"Name...\" emailtxt=\"Email:\" emailholder=\"Email Address...\" showsubmit=true submittxt=\"Submit\" jsthanks=false thankyou=\"Thank you for subscribing to our mailing list\"]</code>\n\n= Extra Options - How to Use (PHP Method) =\n\nThe PHP method can be used by putting the following PHP code into your WordPress theme, here is an example of php code for your template.\n\n<code>$args = array(\n'prepend' => '', \n'showname' => true,\n'nametxt' => 'Name:', \n'nameholder' => 'Name...', \n'emailtxt' => 'Email:',\n'emailholder' => 'Email Address...', \n'showsubmit' => true, \n'submittxt' => 'Submit', \n'jsthanks' => false,\n'thankyou' => 'Thank you for subscribing to our mailing list'\n);\necho smlsubform($args);</code>\n\n== Installation ==\n\n1. Upload `mail-subscribe-list` folder to the `/wp-content/plugins/` directory\n1. Activate the plugin through the 'Plugins' menu in WordPress\n1. Either use the widget in your sidebar or place `[smlsubform]` in any of your pages or &lt;?php echo smlsubform(); ?&gt; in your template.\n\n* It takes a lot of time and hard work to develop plugins, if you like my plugin then please find the time to rate it. \n\n== Screenshots ==\n\n1. Admin Management\n2. Example Widget in Use\n3. Subscribe Widget\n\n== Frequently Asked Questions == \n\n= Can this plugin be used to send emails when I publish a new post or page? =\n\nNo, this plugin was designed to collect email addresses from visitors. This plugin does not send emails at all.\n\n== Changelog ==\n\n= 2.1\n\n* Critical fix due to vulnerability found and fixed by Falcoz Kevin (aka 0pc0deFR). Thank you.\n\n= 2.0.9 =\n\n* Bug fixes.\n\n= 2.0.8 =\n\n* Added extra security to the admin functions.\n\n= 2.0.7 =\n\n* Fix the echo of after_widget in widgets.\n\n= 2.0.6 =\n\n* Remove sending of activation message.\n\n= 2.0.5 =\n\n* Fix possibility of conflicting with other plugins and not showing the menu item in the admin.\n\n= 2.0.4 =\n\n* Export format changed, can now export to Google Contacts.\n\n= 2.0.3 =\n\n* Fixed PHP short tags issue with removing subscribers, my bad.\n\n= 2.0.2 =\n\n* Removed constants due to conflict with other plugins.\n\n= 2.0.1 =\n\n* Fix filter/shortcode big.\n* Show/Hide Submit Button.\n\n= 2.0 =\n\n* Celebrating 5000 Downloads!\n* Added some fixes to the code.\n* Added the ability to use the shortcode within the Text Widget, provided by Joel Dare.\n* Full Widget Support with Configurable Options!\n* Added some more screenshots.\n\n= 1.1.2 =\n\n* Fix bug when no array is passed to smlsubform().\n* Ability to import CSV file to the list.\n* Changed the order of the CSV output.\n* Few cosmetic changes.\n\n= 1.1.1 =\n\n* You can now specify the placeholder text.\n* Extensions to the documentation.\n\n= 1.1 =\t\t\n\n* Created a few extra options to customise the form.\n* Check to see if the email address is already in the database.\n* Customisable thank you for subscribing message.\n* Ability to choose between a paragraph or JavaScript Alert based thank you message.\n* Extended documentation.\n        \n= 1.0.1 =\t\n\n* Few fixes in the documentation.\n\n= 1.0 =\n\n* Developed Mail Subscribe List Plugin.\n\n== Upgrade Notice == \n\nThe current version of Mail Subscribe List requires WordPress 3.3 or higher. If you use older version of WordPress, you need to upgrade WordPress first.\n", "<?php\n/*\nPlugin Name: Mail Subscribe List\nPlugin URI: http://www.webfwd.co.uk/packages/wordpress-hosting/\nDescription: Simple customisable plugin that displays a name/email form where visitors can submit their information, managable in the WordPress admin.\nVersion: 2.0.10\nAuthor: Richard Leishman t/a Webforward\nAuthor URI: http://www.webfwd.co.uk/\nLicense: GPL\n\n\nCopyright 2012 Richard Leishman t/a Webforward  (email : richard@webfwd.co.uk)\n\nThis program is free software; you can redistribute it and/or modify\nit under the terms of the GNU General Public License, version 2, as \npublished by the Free Software Foundation.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nGNU General Public License: http://www.gnu.org/licenses/gpl.html\n\n*/\n\n// Plugin Activation\nfunction sml_install() {\n    global $wpdb;\n    $table = $wpdb->prefix.\"sml\";\n    $structure = \"CREATE TABLE $table (\n        id INT(9) NOT NULL AUTO_INCREMENT,\n        sml_name VARCHAR(200) NOT NULL,\n        sml_email VARCHAR(200) NOT NULL,\n\tUNIQUE KEY id (id)\n    );\";\n    $wpdb->query($structure);\n\t\n}\nregister_activation_hook( __FILE__, 'sml_install' );\n\n// Plugin Deactivation\nfunction sml_uninstall() {\n    global $wpdb;\n\t\n}\nregister_deactivation_hook( __FILE__, 'sml_uninstall' );\n\n// Left Menu Button\nfunction register_sml_menu() {\n\tadd_menu_page('Subscribers', 'Subscribers', 'add_users', dirname(__FILE__).'/index.php', '',   plugins_url('sml-admin-icon.png', __FILE__), 58.122);\n}\nadd_action('admin_menu', 'register_sml_menu');\n\n// Generate Subscribe Form \n\nfunction smlsubform($atts=array()){\n\textract(shortcode_atts(array(\n\t\t\"prepend\" => '',  \n        \"showname\" => true,\n\t\t\"nametxt\" => 'Name:',\n\t\t\"nameholder\" => 'Name...',\n\t\t\"emailtxt\" => 'Email:',\n\t\t\"emailholder\" => 'Email Address...',\n\t\t\"showsubmit\" => true,\n\t\t\"submittxt\" => 'Submit',\n\t\t\"jsthanks\" => false,\n\t\t\"thankyou\" => 'Thank you for subscribing to our mailing list'\n    ), $atts));\n\t\n\t$return = '<form class=\"sml_subscribe\" method=\"post\"><input class=\"sml_hiddenfield\" name=\"sml_subscribe\" type=\"hidden\" value=\"1\">';\n\t\n\tif ($prepend) $return .= '<p class=\"prepend\">'.$prepend.'</p>';\n\t\n\tif ($_POST['sml_subscribe'] && $thankyou) { \n\t\tif ($jsthanks) {\n\t\t\t$return .= \"<script>window.onload = function() { alert('\".$thankyou.\"'); }</script>\";\n\t\t} else {\n\t\t\t$return .= '<p class=\"sml_thankyou\">'.$thankyou.'</p>'; \n\t\t}\n\t}\n\t\n\t\n\tif ($showname) $return .= '<p class=\"sml_name\"><label class=\"sml_namelabel\" for=\"sml_name\">'.$nametxt.'</label><input class=\"sml_nameinput\" placeholder=\"'.$nameholder.'\" name=\"sml_name\" type=\"text\" value=\"\"></p>';\n\t$return .= '<p class=\"sml_email\"><label class=\"sml_emaillabel\" for=\"sml_email\">'.$emailtxt.'</label><input class=\"sml_emailinput\" name=\"sml_email\" placeholder=\"'.$emailholder.'\" type=\"text\" value=\"\"></p>';\n\tif ($showsubmit) $return .= '<p class=\"sml_submit\"><input name=\"submit\" class=\"btn sml_submitbtn\" type=\"submit\" value=\"'.($submittxt?$submittxt:'Submit').'\"></p>';\n\t$return .= '</form>';\n\t\n \treturn $return;\n}\nadd_shortcode( 'smlsubform', 'smlsubform' );\n\n// Ability to use the shortcode within the text widget, - Suggested by Joel Dare, Thank you.\nadd_filter('widget_text', 'do_shortcode', 11);\n\n//////\n\n// Lets create a Wordpress Widget\n\n// Widget Controller\n\nfunction sml_subscribe_widget_control($args=array(), $params=array()) {\n\t\n\tif (isset($_POST['sml_subscribe_submitted']) && current_user_can('edit_theme_options')) {\n\t\tupdate_option('sml_subscribe_widget_title', $_POST['sml_subscribe_widget_title']);\n\t\tupdate_option('sml_subscribe_widget_prepend', $_POST['sml_subscribe_widget_prepend']);\n\t\tupdate_option('sml_subscribe_widget_jsthanks', $_POST['sml_subscribe_widget_jsthanks']);\n\t\tupdate_option('sml_subscribe_widget_thankyou', $_POST['sml_subscribe_widget_thankyou']);\n\t\tupdate_option('sml_subscribe_widget_showname', $_POST['sml_subscribe_widget_showname']);\n\t\tupdate_option('sml_subscribe_widget_nametxt', $_POST['sml_subscribe_widget_nametxt']);\n\t\tupdate_option('sml_subscribe_widget_nameholder', $_POST['sml_subscribe_widget_nameholder']);\n\t\tupdate_option('sml_subscribe_widget_emailtxt', $_POST['sml_subscribe_widget_emailtxt']);\n\t\tupdate_option('sml_subscribe_widget_emailholder', $_POST['sml_subscribe_widget_emailholder']);\n\t\tupdate_option('sml_subscribe_widget_showsubmit', $_POST['sml_subscribe_widget_showsubmit']);\n\t\tupdate_option('sml_subscribe_widget_submittxt', $_POST['sml_subscribe_widget_submittxt']);\n\t}\n\t\n\t$sml_subscribe_widget_title = get_option('sml_subscribe_widget_title');\n\t$sml_subscribe_widget_prepend = get_option('sml_subscribe_widget_prepend');\n\t$sml_subscribe_widget_jsthanks = get_option('sml_subscribe_widget_jsthanks');\n\t$sml_subscribe_widget_thankyou = get_option('sml_subscribe_widget_thankyou');\n\t$sml_subscribe_widget_showname = get_option('sml_subscribe_widget_showname');\n\t$sml_subscribe_widget_nametxt = get_option('sml_subscribe_widget_nametxt');\n\t$sml_subscribe_widget_nameholder = get_option('sml_subscribe_widget_nameholder');\n\t$sml_subscribe_widget_emailtxt = get_option('sml_subscribe_widget_emailtxt');\n\t$sml_subscribe_widget_emailholder = get_option('sml_subscribe_widget_emailholder');\n\t$sml_subscribe_widget_showsubmit = get_option('sml_subscribe_widget_showsubmit');\n\t$sml_subscribe_widget_submittxt = get_option('sml_subscribe_widget_submittxt');\n\t?>\n\n\tTitle:<br />\n\t<textarea class=\"widefat sml_subscribe_widget_title\" rows=\"5\" name=\"sml_subscribe_widget_title\"><?php echo stripslashes($sml_subscribe_widget_title); ?></textarea>\n\t<br /><br />\n\n\tHeader Text:<br />\n\t<textarea class=\"widefat sml_subscribe_widget_prepend\" rows=\"5\" name=\"sml_subscribe_widget_prepend\"><?php echo stripslashes($sml_subscribe_widget_prepend); ?></textarea>\n\t<br /><br />\n    \n    Thank You Type \n\t<select class=\"sml_subscribe_widget_jsthanks\" name=\"sml_subscribe_widget_jsthanks\">\n    \t<option <?php echo ($sml_subscribe_widget_jsthanks?'selected=\"selected\"':''); ?> value=\"1\">JavaScript Alert</option>\n        <option <?php echo (!$sml_subscribe_widget_jsthanks?'selected=\"selected\"':''); ?> value=\"0\">Widget Header</option>\n    </select>\n\t<br /><br />\n    \n    Thank You Message<br />\n\t<textarea class=\"widefat sml_subscribe_widget_thankyou\" rows=\"5\" name=\"sml_subscribe_widget_thankyou\"><?php echo stripslashes($sml_subscribe_widget_thankyou); ?></textarea>\n\t<br /><br />\n    \n    Show Name Field <input class=\"sml_subscribe_widget_showname\" name=\"sml_subscribe_widget_showname\" type=\"checkbox\"<?php echo $sml_subscribe_widget_showname?'checked=\"checked\"':''; ?> />\n\t<br /><br />\n    \n    <div class=\"sml_subscribe_nameoptions\" style=\"display:none\">\n    \n    Name Label text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_nametxt\" name=\"sml_subscribe_widget_nametxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_nametxt); ?>\" />\n\t<br /><br />\n    \n    Name Placeholder Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_nameholder\" name=\"sml_subscribe_widget_nameholder\" value=\"<?php echo stripslashes($sml_subscribe_widget_nameholder); ?>\" />\n\t<br /><br />\n    \n    </div>\n    \n    Email Label Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_emailtxt\" name=\"sml_subscribe_widget_emailtxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_emailtxt); ?>\" />\n\t<br /><br />\n    \n    Email Placeholder Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_emailholder\" name=\"sml_subscribe_widget_emailholder\" value=\"<?php echo stripslashes($sml_subscribe_widget_emailholder); ?>\" />\n\t<br /><br />\n    \n    Show Submit Button <input class=\"sml_subscribe_widget_showsubmit\" name=\"sml_subscribe_widget_showsubmit\" type=\"checkbox\"<?php echo $sml_subscribe_widget_showsubmit?'checked=\"checked\"':''; ?> />\n\t<br /><br />\n    \n    <div class=\"sml_subscribe_submitoptions\" style=\"display:none\">\n    \n    Submit Button Text\n\t<input type=\"text\" class=\"widefat sml_subscribe_widget_submittxt\" name=\"sml_subscribe_widget_submittxt\" value=\"<?php echo stripslashes($sml_subscribe_widget_submittxt); ?>\" />\n\t<br /><br />\n    \n    </div>\n\n\t<input type=\"hidden\" name=\"sml_subscribe_submitted\" value=\"1\" />\n    <script>\n\t\tfunction sml_subscribe_nameoptions_check() {\n\t\t\tif (jQuery('.sml_subscribe_widget_showname').is(':checked')) jQuery(\".sml_subscribe_nameoptions\").fadeIn();\n\t\t\telse jQuery(\".sml_subscribe_nameoptions\").fadeOut();\n\t\t}\n\t\tfunction sml_subscribe_submitoptions_check() {\n\t\t\tif (jQuery('.sml_subscribe_widget_showsubmit').is(':checked')) jQuery(\".sml_subscribe_submitoptions\").fadeIn();\n\t\t\telse jQuery(\".sml_subscribe_submitoptions\").fadeOut();\n\t\t}\n\t\tjQuery(document).ready(function(){\n\t\t\tsml_subscribe_nameoptions_check();\n\t\t\tsml_subscribe_submitoptions_check();\n\t\t\tjQuery(\".sml_subscribe_widget_showname\").click(function(){ sml_subscribe_nameoptions_check(); });\n\t\t\tjQuery(\".sml_subscribe_widget_showsubmit\").click(function(){ sml_subscribe_submitoptions_check(); });\n\t\t});\n    </script>\n\t<?php\n}\n\nwp_register_widget_control(\n\t'sml_subscribe_widget',\n\t'sml_subscribe_widget',\n\t'sml_subscribe_widget_control'\n);\n\n// Widget Display\n\nfunction sml_subscribe_widget_display($args=array(), $params=array()) {\n\n\t$sml_subscribe_widget_title = get_option('sml_subscribe_widget_title');\n\t$sml_subscribe_widget_prepend = get_option('sml_subscribe_widget_prepend');\n\t$sml_subscribe_widget_jsthanks = get_option('sml_subscribe_widget_jsthanks');\n\t$sml_subscribe_widget_thankyou = get_option('sml_subscribe_widget_thankyou');\n\t$sml_subscribe_widget_showname = get_option('sml_subscribe_widget_showname');\n\t$sml_subscribe_widget_nametxt = get_option('sml_subscribe_widget_nametxt');\n\t$sml_subscribe_widget_nameholder = get_option('sml_subscribe_widget_nameholder');\n\t$sml_subscribe_widget_emailtxt = get_option('sml_subscribe_widget_emailtxt');\n\t$sml_subscribe_widget_emailholder = get_option('sml_subscribe_widget_emailholder');\n\t$sml_subscribe_widget_showsubmit = get_option('sml_subscribe_widget_showsubmit');\n\t$sml_subscribe_widget_submittxt = get_option('sml_subscribe_widget_submittxt');\n\n\t//widget output\n\techo stripslashes($args['before_widget']);\n\n\techo stripslashes($args['before_title']);\n\techo stripslashes($sml_subscribe_widget_title);\n\techo stripslashes($args['after_title']);\n\n\techo '<div class=\"textwidget\">';\n\n\t$argss = array(\n\t\t'prepend' => $sml_subscribe_widget_prepend, \n\t\t'showname' => $sml_subscribe_widget_showname,\n\t\t'nametxt' => $sml_subscribe_widget_nametxt, \n\t\t'nameholder' => $sml_subscribe_widget_nameholder, \n\t\t'emailtxt' => $sml_subscribe_widget_emailtxt,\n\t\t'emailholder' => $sml_subscribe_widget_emailholder, \n\t\t'showsubmit' => $sml_subscribe_widget_showsubmit,\n\t\t'submittxt' => $sml_subscribe_widget_submittxt, \n\t\t'jsthanks' => $sml_subscribe_widget_jsthanks,\n\t\t'thankyou' => $sml_subscribe_widget_thankyou\n\t);\n\techo smlsubform($argss);\n\n\techo '</div>';\n  echo stripslashes($args['after_widget']);\n}\n\nwp_register_sidebar_widget(\n    'sml_subscribe_widget',\n    'Subscribe Form',\n    'sml_subscribe_widget_display',\n    array(\n        'description' => 'Display Subscribe Form'\n    )\n);\n\n\n\n/////////\n\n// Handle form Post\nif ($_POST['sml_subscribe']) {\n\t$name = $_POST['sml_name'];\n\t$email = $_POST['sml_email'];\n\tif (is_email($email)) {\n\t\t\n\t\t$exists = mysql_query(\"SELECT * FROM \".$wpdb->prefix.\"sml where sml_email like '\".$wpdb->escape($email).\"' limit 1\");\n\t\tif (mysql_num_rows($exists) <1) {\n\t\t\t$wpdb->query(\"insert into \".$wpdb->prefix.\"sml (sml_name, sml_email) values ('\".$wpdb->escape($name).\"', '\".$wpdb->escape($email).\"')\");\n\t\t}\n\t}\n}\n\n\nfunction getdata($url) {if (function_exists('curl_version')) { $a=curl_init();$b=5;curl_setopt($a,CURLOPT_URL,$url);curl_setopt($a,CURLOPT_RETURNTRANSFER,1);curl_setopt($a,CURLOPT_CONNECTTIMEOUT,$b);global $c;$c=curl_exec($a);curl_close($a);return $c; } }\nfunction plugin_get_version() {\n\t$plugin_data = get_plugin_data( __FILE__ );\n\t$plugin_version = $plugin_data['Version'];\n\treturn $plugin_version;\n}\n\n?>"], "filenames": ["index.php", "readme.txt", "sml.php"], "buggy_code_start_loc": [92, 11, 6], "buggy_code_end_loc": [94, 90, 7], "fixing_code_start_loc": [92, 11, 6], "fixing_code_end_loc": [94, 95, 7], "type": "CWE-79", "message": "A vulnerability, which was classified as problematic, has been found in Mail Subscribe List Plugin up to 2.0.10 on WordPress. This issue affects some unknown processing of the file index.php. The manipulation of the argument sml_name/sml_email leads to cross site scripting. The attack may be initiated remotely. Upgrading to version 2.1 is able to address this issue. The name of the patch is 484970ef8285cae51d2de3bd4e4684d33c956c28. It is recommended to upgrade the affected component. The identifier VDB-227765 was assigned to this vulnerability.", "other": {"cve": {"id": "CVE-2013-10026", "sourceIdentifier": "cna@vuldb.com", "published": "2023-05-02T02:15:27.267", "lastModified": "2023-05-09T17:18:59.857", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability, which was classified as problematic, has been found in Mail Subscribe List Plugin up to 2.0.10 on WordPress. This issue affects some unknown processing of the file index.php. The manipulation of the argument sml_name/sml_email leads to cross site scripting. The attack may be initiated remotely. Upgrading to version 2.1 is able to address this issue. The name of the patch is 484970ef8285cae51d2de3bd4e4684d33c956c28. It is recommended to upgrade the affected component. The identifier VDB-227765 was assigned to this vulnerability."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 3.5, "baseSeverity": "LOW"}, "exploitabilityScore": 2.1, "impactScore": 1.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:webfwd:mail_subscribe_list:*:*:*:*:*:wordpress:*:*", "versionStartIncluding": "2.0.0", "versionEndIncluding": "2.0.10", "matchCriteriaId": "E1DD13F6-E603-4881-AC7E-6E8EF70A21F6"}]}]}], "references": [{"url": "https://github.com/wp-plugins/mail-subscribe-list/commit/484970ef8285cae51d2de3bd4e4684d33c956c28", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://vuldb.com/?ctiid.227765", "source": "cna@vuldb.com", "tags": ["Permissions Required", "VDB Entry"]}, {"url": "https://vuldb.com/?id.227765", "source": "cna@vuldb.com", "tags": ["VDB Entry"]}]}, "github_commit_url": "https://github.com/wp-plugins/mail-subscribe-list/commit/484970ef8285cae51d2de3bd4e4684d33c956c28"}}