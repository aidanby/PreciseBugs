{"buggy_code": ["{**\n * templates/stats/publications.tpl\n *\n * Copyright (c) 2013-2021 Simon Fraser University\n * Copyright (c) 2003-2021 John Willinsky\n * Distributed under the GNU GPL v3. For full terms see the file docs/COPYING.\n *\n * The publications statistics page.\n *\n *}\n{extends file=\"layouts/backend.tpl\"}\n\n{block name=\"page\"}\n\n\t<div class=\"pkpStats\">\n\t\t<pkp-header>\n\t\t\t<h1>{translate key=\"common.publications\"}</h1>\n\t\t\t<spinner v-if=\"isLoadingTimeline\"></spinner>\n\t\t\t<template slot=\"actions\">\n\t\t\t\t<date-range\n\t\t\t\t\tunique-id=\"publication-stats-date-range\"\n\t\t\t\t\t:date-start=\"dateStart\"\n\t\t\t\t\t:date-start-min=\"dateStartMin\"\n\t\t\t\t\t:date-end=\"dateEnd\"\n\t\t\t\t\t:date-end-max=\"dateEndMax\"\n\t\t\t\t\t:options=\"dateRangeOptions\"\n\t\t\t\t\tdate-range-label=\"{translate key=\"stats.dateRange\"}\"\n\t\t\t\t\tdate-format-instructions-label=\"{translate key=\"stats.dateRange.instructions\"}\"\n\t\t\t\t\tchange-date-range-label=\"{translate key=\"stats.dateRange.change\"}\"\n\t\t\t\t\tsince-date-label=\"{translate key=\"stats.dateRange.sinceDate\"}\"\n\t\t\t\t\tuntil-date-label=\"{translate key=\"stats.dateRange.untilDate\"}\"\n\t\t\t\t\tall-dates-label=\"{translate key=\"stats.dateRange.allDates\"}\"\n\t\t\t\t\tcustom-range-label=\"{translate key=\"stats.dateRange.customRange\"}\"\n\t\t\t\t\tfrom-date-label=\"{translate key=\"stats.dateRange.from\"}\"\n\t\t\t\t\tto-date-label=\"{translate key=\"stats.dateRange.to\"}\"\n\t\t\t\t\tapply-label=\"{translate key=\"stats.dateRange.apply\"}\"\n\t\t\t\t\tinvalid-date-label=\"{translate key=\"stats.dateRange.invalidDate\"}\"\n\t\t\t\t\tdate-does-not-exist-label=\"{translate key=\"stats.dateRange.dateDoesNotExist\"}\"\n\t\t\t\t\tinvalid-date-range-label=\"{translate key=\"stats.dateRange.invalidDateRange\"}\"\n\t\t\t\t\tinvalid-end-date-max-label=\"{translate key=\"stats.dateRange.invalidEndDateMax\"}\"\n\t\t\t\t\tinvalid-start-date-min-label=\"{translate key=\"stats.dateRange.invalidStartDateMin\"}\"\n\t\t\t\t\t@set-range=\"setDateRange\"\n\t\t\t\t></date-range>\n\t\t\t\t<pkp-button\n\t\t\t\t\tv-if=\"filters.length\"\n\t\t\t\t\t:is-active=\"isSidebarVisible\"\n\t\t\t\t\t@click=\"toggleSidebar\"\n\t\t\t\t>\n\t\t\t\t\t<icon icon=\"filter\" :inline=\"true\"></icon>\n\t\t\t\t\t{translate key=\"common.filter\"}\n\t\t\t\t</pkp-button>\n\t\t\t</template>\n\t\t</pkp-header>\n\t\t<div class=\"pkpStats__container -pkpClearfix\">\n\t\t\t<!-- Filters in the sidebar -->\n\t\t\t<div\n\t\t\t\tv-if=\"filters.length\"\n\t\t\t\tref=\"sidebar\"\n\t\t\t\tclass=\"pkpStats__sidebar\"\n\t\t\t\t:class=\"sidebarClasses\"\n\t\t\t>\n\t\t\t\t<pkp-header\n\t\t\t\t\tclass=\"pkpStats__sidebarHeader\"\n\t\t\t\t\t:tabindex=\"isSidebarVisible ? 0 : -1\"\n\t\t\t\t>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\t<icon icon=\"filter\" :inline=\"true\"></icon>\n\t\t\t\t\t\t{translate key=\"common.filter\"}\n\t\t\t\t\t</h2>\n\t\t\t\t</pkp-header>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(filterSet, index) in filters\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tclass=\"pkpStats__filterSet\"\n\t\t\t\t>\n\t\t\t\t\t<pkp-header v-if=\"filterSet.heading\">\n\t\t\t\t\t\t<h3>{{ filterSet.heading }}</h3>\n\t\t\t\t\t</pkp-header>\n\t\t\t\t\t<pkp-filter\n\t\t\t\t\t\tv-for=\"filter in filterSet.filters\"\n\t\t\t\t\t\t:key=\"filter.param + filter.value\"\n\t\t\t\t\t\tv-bind=\"filter\"\n\t\t\t\t\t\t:is-filter-active=\"isFilterActive(filter.param, filter.value)\"\n\t\t\t\t\t\t@add-filter=\"addFilter\"\n\t\t\t\t\t\t@remove-filter=\"removeFilter\"\n\t\t\t\t\t></pkp-filter>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pkpStats__content\">\n\t\t\t\t<div v-if=\"chartData\" class=\"pkpStats__graph\">\n\t\t\t\t\t<div class=\"pkpStats__graphHeader\">\n\t\t\t\t\t\t<h2 class=\"pkpStats__graphTitle -screenReader\" id=\"publication-stats-graph-title\">\n\t\t\t\t\t\t\t{translate key=\"submission.views\"}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div class=\"pkpStats__graphSelectors\">\n\t\t\t\t\t\t\t<div class=\"pkpStats__graphSelector pkpStats__graphSelector--timelineType\">\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineType === 'abstract'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineType('abstract')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.publications.abstracts\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineType === 'galley'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineType('galley')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"submission.files\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pkpStats__graphSelector pkpStats__graphSelector--timelineInterval\">\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineInterval === 'day'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isDailyIntervalEnabled\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineInterval('day')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.daily\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineInterval === 'month'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isMonthlyIntervalEnabled\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineInterval('month')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.monthly\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table class=\"-screenReader\" role=\"region\" aria-live=\"polite\">\n\t\t\t\t\t\t<caption v-if=\"timelineType === 'galley'\">{translate key=\"stats.publications.totalGalleyViews.timelineInterval\"}</caption>\n\t\t\t\t\t\t<caption v-else>{translate key=\"stats.publications.totalAbstractViews.timelineInterval\"}</caption>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{translate key=\"common.date\"}</th>\n\t\t\t\t\t\t\t\t<th v-if=\"timelineType === 'galley'\" scope=\"col\">{translate key=\"stats.fileViews\"}</th>\n\t\t\t\t\t\t\t\t<th v-else scope=\"col\">{translate key=\"submission.abstractViews\"}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr\tv-for=\"segment in timeline\" :key=\"segment.date\">\n\t\t\t\t\t\t\t\t<th scope=\"row\">{{ segment.label }}</th>\n\t\t\t\t\t\t\t\t<td>{{ segment.value }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<line-chart :chart-data=\"chartData\" aria-hidden=\"true\"></line-chart>\n\t\t\t\t\t<span v-if=\"isLoadingTimeline\" class=\"pkpStats__loadingCover\">\n\t\t\t\t\t\t<spinner></spinner>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pkpStats__panel\" role=\"region\" aria-live=\"polite\">\n\t\t\t\t\t<pkp-header>\n\t\t\t\t\t\t<h2 id=\"publicationDetailTableLabel\">\n\t\t\t\t\t\t\t{translate key=\"stats.publications.details\"}\n\t\t\t\t\t\t\t<spinner v-if=\"isLoadingItems\"></spinner>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<template slot=\"actions\">\n\t\t\t\t\t\t\t<div class=\"pkpStats__itemsOfTotal\">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\treplaceLocaleParams(itemsOfTotalLabel, {\n\t\t\t\t\t\t\t\t\t\tcount: items.length,\n\t\t\t\t\t\t\t\t\t\ttotal: itemsMax\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tv-if=\"items.length < itemsMax\"\n\t\t\t\t\t\t\t\t\thref=\"#publicationDetailTablePagination\"\n\t\t\t\t\t\t\t\t\tclass=\"-screenReader\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"common.pagination.label\"}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</pkp-header>\n\t\t\t\t\t<pkp-table\n\t\t\t\t\t\tlabelled-by=\"publicationDetailTableLabel\"\n\t\t\t\t\t\t:class=\"tableClasses\"\n\t\t\t\t\t\t:columns=\"tableColumns\"\n\t\t\t\t\t\t:rows=\"items\"\n\t\t\t\t\t\t:order-by=\"orderBy\"\n\t\t\t\t\t\t:order-direction=\"orderDirection\"\n\t\t\t\t\t\t@order-by=\"setOrderBy\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<search\n\t\t\t\t\t\t\tslot=\"thead-title\"\n\t\t\t\t\t\t\tclass=\"pkpStats__titleSearch\"\n\t\t\t\t\t\t\t:search-phrase=\"searchPhrase\"\n\t\t\t\t\t\t\tsearch-label=\"{translate key=\"stats.searchSubmissionDescription\"}\"\n\t\t\t\t\t\t\t@search-phrase-changed=\"setSearchPhrase\"\n\t\t\t\t\t\t></search>\n\t\t\t\t\t\t<template slot-scope=\"{ row, rowIndex }\">\n\t\t\t\t\t\t\t<table-cell\n\t\t\t\t\t\t\t\tv-for=\"(column, columnIndex) in tableColumns\"\n\t\t\t\t\t\t\t\t:key=\"column.name\"\n\t\t\t\t\t\t\t\t:column=\"column\"\n\t\t\t\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t\t\t\t:tabindex=\"!rowIndex && !columnIndex ? 0 : -1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"column.name === 'title'\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t:href=\"row.publication.urlPublished\"\n\t\t\t\t\t\t\t\t\t\tclass=\"pkpStats__itemLink\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span class=\"pkpStats__itemAuthors\" v-html=\"row.publication.authorsStringShort\"></span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"pkpStats__itemTitle\" v-html=\"localize(row.publication.fullTitle)\"></span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</table-cell>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</pkp-table>\n\t\t\t\t\t<div v-if=\"!items.length\" class=\"pkpStats__noRecords\">\n\t\t\t\t\t\t<template v-if=\"isLoadingItems\">\n\t\t\t\t\t\t\t<spinner></spinner>\n\t\t\t\t\t\t\t{translate key=\"common.loading\"}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{translate key=\"stats.publications.none\"}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<pagination\n\t\t\t\t\t\tv-if=\"lastPage > 1\"\n\t\t\t\t\t\tid=\"publicationDetailTablePagination\"\n\t\t\t\t\t\t:current-page=\"currentPage\"\n\t\t\t\t\t\t:is-loading=\"isLoadingItems\"\n\t\t\t\t\t\t:last-page=\"lastPage\"\n\t\t\t\t\t\t@set-page=\"setPage\"\n\t\t\t\t\t></pagination>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/block}\n"], "fixing_code": ["{**\n * templates/stats/publications.tpl\n *\n * Copyright (c) 2013-2021 Simon Fraser University\n * Copyright (c) 2003-2021 John Willinsky\n * Distributed under the GNU GPL v3. For full terms see the file docs/COPYING.\n *\n * The publications statistics page.\n *\n *}\n{extends file=\"layouts/backend.tpl\"}\n\n{block name=\"page\"}\n\n\t<div class=\"pkpStats\">\n\t\t<pkp-header>\n\t\t\t<h1>{translate key=\"common.publications\"}</h1>\n\t\t\t<spinner v-if=\"isLoadingTimeline\"></spinner>\n\t\t\t<template slot=\"actions\">\n\t\t\t\t<date-range\n\t\t\t\t\tunique-id=\"publication-stats-date-range\"\n\t\t\t\t\t:date-start=\"dateStart\"\n\t\t\t\t\t:date-start-min=\"dateStartMin\"\n\t\t\t\t\t:date-end=\"dateEnd\"\n\t\t\t\t\t:date-end-max=\"dateEndMax\"\n\t\t\t\t\t:options=\"dateRangeOptions\"\n\t\t\t\t\tdate-range-label=\"{translate key=\"stats.dateRange\"}\"\n\t\t\t\t\tdate-format-instructions-label=\"{translate key=\"stats.dateRange.instructions\"}\"\n\t\t\t\t\tchange-date-range-label=\"{translate key=\"stats.dateRange.change\"}\"\n\t\t\t\t\tsince-date-label=\"{translate key=\"stats.dateRange.sinceDate\"}\"\n\t\t\t\t\tuntil-date-label=\"{translate key=\"stats.dateRange.untilDate\"}\"\n\t\t\t\t\tall-dates-label=\"{translate key=\"stats.dateRange.allDates\"}\"\n\t\t\t\t\tcustom-range-label=\"{translate key=\"stats.dateRange.customRange\"}\"\n\t\t\t\t\tfrom-date-label=\"{translate key=\"stats.dateRange.from\"}\"\n\t\t\t\t\tto-date-label=\"{translate key=\"stats.dateRange.to\"}\"\n\t\t\t\t\tapply-label=\"{translate key=\"stats.dateRange.apply\"}\"\n\t\t\t\t\tinvalid-date-label=\"{translate key=\"stats.dateRange.invalidDate\"}\"\n\t\t\t\t\tdate-does-not-exist-label=\"{translate key=\"stats.dateRange.dateDoesNotExist\"}\"\n\t\t\t\t\tinvalid-date-range-label=\"{translate key=\"stats.dateRange.invalidDateRange\"}\"\n\t\t\t\t\tinvalid-end-date-max-label=\"{translate key=\"stats.dateRange.invalidEndDateMax\"}\"\n\t\t\t\t\tinvalid-start-date-min-label=\"{translate key=\"stats.dateRange.invalidStartDateMin\"}\"\n\t\t\t\t\t@set-range=\"setDateRange\"\n\t\t\t\t></date-range>\n\t\t\t\t<pkp-button\n\t\t\t\t\tv-if=\"filters.length\"\n\t\t\t\t\t:is-active=\"isSidebarVisible\"\n\t\t\t\t\t@click=\"toggleSidebar\"\n\t\t\t\t>\n\t\t\t\t\t<icon icon=\"filter\" :inline=\"true\"></icon>\n\t\t\t\t\t{translate key=\"common.filter\"}\n\t\t\t\t</pkp-button>\n\t\t\t</template>\n\t\t</pkp-header>\n\t\t<div class=\"pkpStats__container -pkpClearfix\">\n\t\t\t<!-- Filters in the sidebar -->\n\t\t\t<div\n\t\t\t\tv-if=\"filters.length\"\n\t\t\t\tref=\"sidebar\"\n\t\t\t\tclass=\"pkpStats__sidebar\"\n\t\t\t\t:class=\"sidebarClasses\"\n\t\t\t>\n\t\t\t\t<pkp-header\n\t\t\t\t\tclass=\"pkpStats__sidebarHeader\"\n\t\t\t\t\t:tabindex=\"isSidebarVisible ? 0 : -1\"\n\t\t\t\t>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\t<icon icon=\"filter\" :inline=\"true\"></icon>\n\t\t\t\t\t\t{translate key=\"common.filter\"}\n\t\t\t\t\t</h2>\n\t\t\t\t</pkp-header>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(filterSet, index) in filters\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tclass=\"pkpStats__filterSet\"\n\t\t\t\t>\n\t\t\t\t\t<pkp-header v-if=\"filterSet.heading\">\n\t\t\t\t\t\t<h3>{{ filterSet.heading }}</h3>\n\t\t\t\t\t</pkp-header>\n\t\t\t\t\t<pkp-filter\n\t\t\t\t\t\tv-for=\"filter in filterSet.filters\"\n\t\t\t\t\t\t:key=\"filter.param + filter.value\"\n\t\t\t\t\t\tv-bind=\"filter\"\n\t\t\t\t\t\t:is-filter-active=\"isFilterActive(filter.param, filter.value)\"\n\t\t\t\t\t\t@add-filter=\"addFilter\"\n\t\t\t\t\t\t@remove-filter=\"removeFilter\"\n\t\t\t\t\t></pkp-filter>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pkpStats__content\">\n\t\t\t\t<div v-if=\"chartData\" class=\"pkpStats__graph\">\n\t\t\t\t\t<div class=\"pkpStats__graphHeader\">\n\t\t\t\t\t\t<h2 class=\"pkpStats__graphTitle -screenReader\" id=\"publication-stats-graph-title\">\n\t\t\t\t\t\t\t{translate key=\"submission.views\"}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div class=\"pkpStats__graphSelectors\">\n\t\t\t\t\t\t\t<div class=\"pkpStats__graphSelector pkpStats__graphSelector--timelineType\">\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineType === 'abstract'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineType('abstract')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.publications.abstracts\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineType === 'galley'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineType('galley')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"submission.files\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pkpStats__graphSelector pkpStats__graphSelector--timelineInterval\">\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineInterval === 'day'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isDailyIntervalEnabled\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineInterval('day')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.daily\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t\t<pkp-button\n\t\t\t\t\t\t\t\t\t:aria-pressed=\"timelineInterval === 'month'\"\n\t\t\t\t\t\t\t\t\taria-describedby=\"publication-stats-graph-title\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isMonthlyIntervalEnabled\"\n\t\t\t\t\t\t\t\t\t@click=\"setTimelineInterval('month')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"stats.monthly\"}\n\t\t\t\t\t\t\t\t</pkp-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table class=\"-screenReader\" role=\"region\" aria-live=\"polite\">\n\t\t\t\t\t\t<caption v-if=\"timelineType === 'galley'\">{translate key=\"stats.publications.totalGalleyViews.timelineInterval\"}</caption>\n\t\t\t\t\t\t<caption v-else>{translate key=\"stats.publications.totalAbstractViews.timelineInterval\"}</caption>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{translate key=\"common.date\"}</th>\n\t\t\t\t\t\t\t\t<th v-if=\"timelineType === 'galley'\" scope=\"col\">{translate key=\"stats.fileViews\"}</th>\n\t\t\t\t\t\t\t\t<th v-else scope=\"col\">{translate key=\"submission.abstractViews\"}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr\tv-for=\"segment in timeline\" :key=\"segment.date\">\n\t\t\t\t\t\t\t\t<th scope=\"row\">{{ segment.label }}</th>\n\t\t\t\t\t\t\t\t<td>{{ segment.value }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<line-chart :chart-data=\"chartData\" aria-hidden=\"true\"></line-chart>\n\t\t\t\t\t<span v-if=\"isLoadingTimeline\" class=\"pkpStats__loadingCover\">\n\t\t\t\t\t\t<spinner></spinner>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pkpStats__panel\" role=\"region\" aria-live=\"polite\">\n\t\t\t\t\t<pkp-header>\n\t\t\t\t\t\t<h2 id=\"publicationDetailTableLabel\">\n\t\t\t\t\t\t\t{translate key=\"stats.publications.details\"}\n\t\t\t\t\t\t\t<spinner v-if=\"isLoadingItems\"></spinner>\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<template slot=\"actions\">\n\t\t\t\t\t\t\t<div class=\"pkpStats__itemsOfTotal\">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\treplaceLocaleParams(itemsOfTotalLabel, {\n\t\t\t\t\t\t\t\t\t\tcount: items.length,\n\t\t\t\t\t\t\t\t\t\ttotal: itemsMax\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tv-if=\"items.length < itemsMax\"\n\t\t\t\t\t\t\t\t\thref=\"#publicationDetailTablePagination\"\n\t\t\t\t\t\t\t\t\tclass=\"-screenReader\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{translate key=\"common.pagination.label\"}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</pkp-header>\n\t\t\t\t\t<pkp-table\n\t\t\t\t\t\tlabelled-by=\"publicationDetailTableLabel\"\n\t\t\t\t\t\t:class=\"tableClasses\"\n\t\t\t\t\t\t:columns=\"tableColumns\"\n\t\t\t\t\t\t:rows=\"items\"\n\t\t\t\t\t\t:order-by=\"orderBy\"\n\t\t\t\t\t\t:order-direction=\"orderDirection\"\n\t\t\t\t\t\t@order-by=\"setOrderBy\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<search\n\t\t\t\t\t\t\tslot=\"thead-title\"\n\t\t\t\t\t\t\tclass=\"pkpStats__titleSearch\"\n\t\t\t\t\t\t\t:search-phrase=\"searchPhrase\"\n\t\t\t\t\t\t\tsearch-label=\"{translate key=\"stats.searchSubmissionDescription\"}\"\n\t\t\t\t\t\t\t@search-phrase-changed=\"setSearchPhrase\"\n\t\t\t\t\t\t></search>\n\t\t\t\t\t\t<template slot-scope=\"{ row, rowIndex }\">\n\t\t\t\t\t\t\t<table-cell\n\t\t\t\t\t\t\t\tv-for=\"(column, columnIndex) in tableColumns\"\n\t\t\t\t\t\t\t\t:key=\"column.name\"\n\t\t\t\t\t\t\t\t:column=\"column\"\n\t\t\t\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t\t\t\t:tabindex=\"!rowIndex && !columnIndex ? 0 : -1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"column.name === 'title'\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t:href=\"row.publication.urlPublished\"\n\t\t\t\t\t\t\t\t\t\tclass=\"pkpStats__itemLink\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span class=\"pkpStats__itemAuthors\">{{ row.publication.authorsStringShort }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"pkpStats__itemTitle\">{{ localize(row.publication.fullTitle }}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</table-cell>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</pkp-table>\n\t\t\t\t\t<div v-if=\"!items.length\" class=\"pkpStats__noRecords\">\n\t\t\t\t\t\t<template v-if=\"isLoadingItems\">\n\t\t\t\t\t\t\t<spinner></spinner>\n\t\t\t\t\t\t\t{translate key=\"common.loading\"}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{translate key=\"stats.publications.none\"}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<pagination\n\t\t\t\t\t\tv-if=\"lastPage > 1\"\n\t\t\t\t\t\tid=\"publicationDetailTablePagination\"\n\t\t\t\t\t\t:current-page=\"currentPage\"\n\t\t\t\t\t\t:is-loading=\"isLoadingItems\"\n\t\t\t\t\t\t:last-page=\"lastPage\"\n\t\t\t\t\t\t@set-page=\"setPage\"\n\t\t\t\t\t></pagination>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/block}\n"], "filenames": ["templates/stats/publications.tpl"], "buggy_code_start_loc": [208], "buggy_code_end_loc": [210], "fixing_code_start_loc": [208], "fixing_code_end_loc": [210], "type": "CWE-79", "message": "Cross-site Scripting (XSS) - Stored in GitHub repository pkp/pkp-lib prior to 3.3.0-16.", "other": {"cve": {"id": "CVE-2023-5904", "sourceIdentifier": "security@huntr.dev", "published": "2023-11-07T04:24:32.617", "lastModified": "2023-11-13T15:20:50.107", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-site Scripting (XSS) - Stored in GitHub repository pkp/pkp-lib prior to 3.3.0-16."}, {"lang": "es", "value": "Cross-Site Scripting (XSS) Almacenado en el repositorio de GitHub pkp/pkp-lib anterior a 3.3.0-16."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:H/UI:N/S:U/C:L/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "HIGH", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 2.7, "baseSeverity": "LOW"}, "exploitabilityScore": 1.2, "impactScore": 1.4}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:sfu:pkp_web_application_library:*:*:*:*:*:*:*:*", "versionEndIncluding": "3.3.0-15", "matchCriteriaId": "EFB5FA1A-644F-4BC0-8ADD-22F75D67F7E5"}]}]}], "references": [{"url": "https://github.com/pkp/pkp-lib/commit/aa5c6acb634fbe460765facb2dc26df4b0d7424b", "source": "security@huntr.dev", "tags": ["Patch"]}, {"url": "https://huntr.com/bounties/4df6bce6-dbe3-48e4-9830-e95cdc5138b6", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/pkp/pkp-lib/commit/aa5c6acb634fbe460765facb2dc26df4b0d7424b"}}