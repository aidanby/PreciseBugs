{"buggy_code": ["<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App;\n\n/**\n * Some \"very\" global constants for Kimai.\n */\nclass Constants\n{\n    /**\n     * The current release version\n     */\n    public const VERSION = '1.16.0';\n    /**\n     * The current release: major * 10000 + minor * 100 + patch\n     */\n    public const VERSION_ID = 11600;\n    /**\n     * The current release status, either \"stable\" or \"dev\"\n     */\n    public const STATUS = 'prod';\n    /**\n     * The software name\n     */\n    public const SOFTWARE = 'Kimai';\n    /**\n     * The release name, will only change for new major version\n     */\n    public const NAME = 'Ayumi';\n    /**\n     * Used in multiple views\n     */\n    public const GITHUB = 'https://github.com/kevinpapst/kimai2/';\n    /**\n     * Homepage, used in multiple views\n     */\n    public const HOMEPAGE = 'https://www.kimai.org';\n    /**\n     * Application wide default locale\n     */\n    public const DEFAULT_LOCALE = 'en';\n    /**\n     * Default color for Customer, Project and Activity entities\n     */\n    public const DEFAULT_COLOR = '#d2d6de';\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Configuration\\SystemConfiguration;\nuse App\\Entity\\Customer;\nuse App\\Entity\\MetaTableTypeInterface;\nuse App\\Entity\\Project;\nuse App\\Entity\\ProjectComment;\nuse App\\Entity\\ProjectRate;\nuse App\\Entity\\Rate;\nuse App\\Entity\\Team;\nuse App\\Event\\ProjectMetaDefinitionEvent;\nuse App\\Event\\ProjectMetaDisplayEvent;\nuse App\\Export\\Spreadsheet\\EntityWithMetaFieldsExporter;\nuse App\\Export\\Spreadsheet\\Writer\\BinaryFileResponseWriter;\nuse App\\Export\\Spreadsheet\\Writer\\XlsxWriter;\nuse App\\Form\\ProjectCommentForm;\nuse App\\Form\\ProjectEditForm;\nuse App\\Form\\ProjectRateForm;\nuse App\\Form\\ProjectTeamPermissionForm;\nuse App\\Form\\Toolbar\\ProjectToolbarForm;\nuse App\\Form\\Type\\ProjectType;\nuse App\\Project\\ProjectDuplicationService;\nuse App\\Project\\ProjectService;\nuse App\\Project\\ProjectStatisticService;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRateRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\ActivityQuery;\nuse App\\Repository\\Query\\ProjectQuery;\nuse App\\Repository\\TeamRepository;\nuse Pagerfanta\\Pagerfanta;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcherInterface;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\nuse Symfony\\Component\\Security\\Csrf\\CsrfToken;\nuse Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface;\n\n/**\n * Controller used to manage projects.\n *\n * @Route(path=\"/admin/project\")\n * @Security(\"is_granted('view_project') or is_granted('view_teamlead_project') or is_granted('view_team_project')\")\n */\nfinal class ProjectController extends AbstractController\n{\n    /**\n     * @var ProjectRepository\n     */\n    private $repository;\n    /**\n     * @var SystemConfiguration\n     */\n    private $configuration;\n    /**\n     * @var EventDispatcherInterface\n     */\n    private $dispatcher;\n    /**\n     * @var ProjectService\n     */\n    private $projectService;\n\n    public function __construct(ProjectRepository $repository, SystemConfiguration $configuration, EventDispatcherInterface $dispatcher, ProjectService $projectService)\n    {\n        $this->repository = $repository;\n        $this->configuration = $configuration;\n        $this->dispatcher = $dispatcher;\n        $this->projectService = $projectService;\n    }\n\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_project\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_project_paginated\", methods={\"GET\"})\n     */\n    public function indexAction($page, Request $request)\n    {\n        $query = new ProjectQuery();\n        $query->setCurrentUser($this->getUser());\n        $query->setPage($page);\n\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute('admin_project');\n        }\n\n        $entries = $this->repository->getPagerfantaForQuery($query);\n\n        return $this->render('project/index.html.twig', [\n            'entries' => $entries,\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n            'metaColumns' => $this->findMetaColumns($query),\n            'now' => $this->getDateTimeFactory()->createDateTime(),\n        ]);\n    }\n\n    /**\n     * @param ProjectQuery $query\n     * @return MetaTableTypeInterface[]\n     */\n    protected function findMetaColumns(ProjectQuery $query): array\n    {\n        $event = new ProjectMetaDisplayEvent($query, ProjectMetaDisplayEvent::PROJECT);\n        $this->dispatcher->dispatch($event);\n\n        return $event->getFields();\n    }\n\n    /**\n     * @Route(path=\"/{id}/permissions\", name=\"admin_project_permissions\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('permissions', project)\")\n     */\n    public function teamPermissions(Project $project, Request $request)\n    {\n        $form = $this->createForm(ProjectTeamPermissionForm::class, $project, [\n            'action' => $this->generateUrl('admin_project_permissions', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->projectService->updateProject($project);\n                $this->flashSuccess('action.update.success');\n\n                if ($this->isGranted('view', $project)) {\n                    return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n                }\n\n                return $this->redirectToRoute('admin_project');\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/permissions.html.twig', [\n            'project' => $project,\n            'form' => $form->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_project_create\", methods={\"GET\", \"POST\"})\n     * @Route(path=\"/create/{customer}\", name=\"admin_project_create_with_customer\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_project')\")\n     */\n    public function createAction(Request $request, ?Customer $customer = null)\n    {\n        $project = $this->projectService->createNewProject($customer);\n\n        $editForm = $this->createEditForm($project);\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->projectService->saveNewProject($project);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/edit.html.twig', [\n            'project' => $project,\n            'form' => $editForm->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_delete/{token}\", name=\"project_comment_delete\", methods={\"GET\"})\n     * @Security(\"is_granted('edit', comment.getProject()) and is_granted('comments', comment.getProject())\")\n     */\n    public function deleteCommentAction(ProjectComment $comment, string $token, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        $projectId = $comment->getProject()->getId();\n\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('project.delete_comment', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('project_details', ['id' => $projectId]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        try {\n            $this->repository->deleteComment($comment);\n        } catch (\\Exception $ex) {\n            $this->flashDeleteException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $projectId]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_add\", name=\"project_comment_add\", methods={\"POST\"})\n     * @Security(\"is_granted('comments_create', project)\")\n     */\n    public function addCommentAction(Project $project, Request $request)\n    {\n        $comment = new ProjectComment();\n        $form = $this->getCommentForm($project, $comment);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->repository->saveComment($comment);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_pin/{token}\", name=\"project_comment_pin\", methods={\"GET\"})\n     * @Security(\"is_granted('edit', comment.getProject()) and is_granted('comments', comment.getProject())\")\n     */\n    public function pinCommentAction(ProjectComment $comment, string $token, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        $projectId = $comment->getProject()->getId();\n\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('project.pin_comment', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('project_details', ['id' => $projectId]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        $comment->setPinned(!$comment->isPinned());\n        try {\n            $this->repository->saveComment($comment);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $projectId]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/create_team\", name=\"project_team_create\", methods={\"GET\"})\n     * @Security(\"is_granted('create_team') and is_granted('edit', project)\")\n     */\n    public function createDefaultTeamAction(Project $project, TeamRepository $teamRepository)\n    {\n        $defaultTeam = $teamRepository->findOneBy(['name' => $project->getName()]);\n        if (null !== $defaultTeam) {\n            $this->flashError('action.update.error', ['%reason%' => 'Team already existing']);\n\n            return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n        }\n\n        $defaultTeam = new Team();\n        $defaultTeam->setName($project->getName());\n        $defaultTeam->addTeamlead($this->getUser());\n        $defaultTeam->addProject($project);\n\n        try {\n            $teamRepository->saveTeam($defaultTeam);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/activities/{page}\", defaults={\"page\": 1}, name=\"project_activities\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('view', project)\")\n     */\n    public function activitiesAction(Project $project, int $page, ActivityRepository $activityRepository)\n    {\n        $query = new ActivityQuery();\n        $query->setCurrentUser($this->getUser());\n        $query->setPage($page);\n        $query->setPageSize(5);\n        $query->addProject($project);\n        $query->setExcludeGlobals(true);\n        $query->setShowBoth();\n        $query->addOrderGroup('visible', ActivityQuery::ORDER_DESC);\n        $query->addOrderGroup('name', ActivityQuery::ORDER_ASC);\n\n        /* @var $entries Pagerfanta */\n        $entries = $activityRepository->getPagerfantaForQuery($query);\n\n        return $this->render('project/embed_activities.html.twig', [\n            'project' => $project,\n            'activities' => $entries,\n            'page' => $page,\n            'now' => $this->getDateTimeFactory()->createDateTime(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/details\", name=\"project_details\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('view', project)\")\n     */\n    public function detailsAction(Project $project, TeamRepository $teamRepository, ProjectRateRepository $rateRepository, ProjectStatisticService $statisticService)\n    {\n        $event = new ProjectMetaDefinitionEvent($project);\n        $this->dispatcher->dispatch($event);\n\n        $stats = null;\n        $defaultTeam = null;\n        $commentForm = null;\n        $attachments = [];\n        $comments = null;\n        $teams = null;\n        $rates = [];\n        $now = $this->getDateTimeFactory()->createDateTime();\n\n        if ($this->isGranted('edit', $project)) {\n            if ($this->isGranted('create_team')) {\n                $defaultTeam = $teamRepository->findOneBy(['name' => $project->getName()]);\n            }\n            $rates = $rateRepository->getRatesForProject($project);\n        }\n\n        if ($this->isGranted('budget', $project)) {\n            $stats = $statisticService->getBudgetStatisticModel($project, $now);\n        }\n\n        if ($this->isGranted('comments', $project)) {\n            $comments = $this->repository->getComments($project);\n        }\n\n        if ($this->isGranted('comments_create', $project)) {\n            $commentForm = $this->getCommentForm($project, new ProjectComment())->createView();\n        }\n\n        if ($this->isGranted('permissions', $project) || $this->isGranted('details', $project) || $this->isGranted('view_team')) {\n            $teams = $project->getTeams();\n        }\n\n        return $this->render('project/details.html.twig', [\n            'project' => $project,\n            'comments' => $comments,\n            'commentForm' => $commentForm,\n            'attachments' => $attachments,\n            'stats' => $stats,\n            'team' => $defaultTeam,\n            'teams' => $teams,\n            'rates' => $rates,\n            'now' => $now,\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/rate\", name=\"admin_project_rate_add\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function addRateAction(Project $project, Request $request, ProjectRateRepository $repository)\n    {\n        $rate = new ProjectRate();\n        $rate->setProject($project);\n\n        $form = $this->createForm(ProjectRateForm::class, $rate, [\n            'action' => $this->generateUrl('admin_project_rate_add', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $repository->saveRate($rate);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/rates.html.twig', [\n            'project' => $project,\n            'form' => $form->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_project_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function editAction(Project $project, Request $request)\n    {\n        $editForm = $this->createEditForm($project);\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->projectService->updateProject($project);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/edit.html.twig', [\n            'project' => $project,\n            'form' => $editForm->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate\", name=\"admin_project_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function duplicateAction(Project $project, Request $request, ProjectDuplicationService $projectDuplicationService)\n    {\n        $newProject = $projectDuplicationService->duplicate($project, $project->getName() . ' [COPY]');\n\n        return $this->redirectToRoute('project_details', ['id' => $newProject->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/delete\", name=\"admin_project_delete\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('delete', project)\")\n     */\n    public function deleteAction(Project $project, Request $request, ProjectStatisticService $statisticService)\n    {\n        $stats = $statisticService->getProjectStatistics($project);\n\n        $deleteForm = $this->createFormBuilder(null, [\n                'attr' => [\n                    'data-form-event' => 'kimai.projectDelete',\n                    'data-msg-success' => 'action.delete.success',\n                    'data-msg-error' => 'action.delete.error',\n                ]\n            ])\n            ->add('project', ProjectType::class, [\n                'ignore_project' => $project,\n                'customers' => $project->getCustomer(),\n                'query_builder_for_user' => true,\n                'required' => false,\n            ])\n            ->setAction($this->generateUrl('admin_project_delete', ['id' => $project->getId()]))\n            ->setMethod('POST')\n            ->getForm();\n\n        $deleteForm->handleRequest($request);\n\n        if ($deleteForm->isSubmitted() && $deleteForm->isValid()) {\n            try {\n                $this->repository->deleteProject($project, $deleteForm->get('project')->getData());\n                $this->flashSuccess('action.delete.success');\n            } catch (\\Exception $ex) {\n                $this->flashDeleteException($ex);\n            }\n\n            return $this->redirectToRoute('admin_project');\n        }\n\n        return $this->render('project/delete.html.twig', [\n            'project' => $project,\n            'stats' => $stats,\n            'form' => $deleteForm->createView(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/export\", name=\"project_export\", methods={\"GET\"})\n     */\n    public function exportAction(Request $request, EntityWithMetaFieldsExporter $exporter)\n    {\n        $query = new ProjectQuery();\n        $query->setCurrentUser($this->getUser());\n\n        $form = $this->getToolbarForm($query);\n        $form->setData($query);\n        $form->submit($request->query->all(), false);\n\n        if (!$form->isValid()) {\n            $query->resetByFormError($form->getErrors());\n        }\n\n        $entries = $this->repository->getProjectsForQuery($query);\n\n        $spreadsheet = $exporter->export(\n            Project::class,\n            $entries,\n            new ProjectMetaDisplayEvent($query, ProjectMetaDisplayEvent::EXPORT)\n        );\n        $writer = new BinaryFileResponseWriter(new XlsxWriter(), 'kimai-projects');\n\n        return $writer->getFileResponse($spreadsheet);\n    }\n\n    protected function getToolbarForm(ProjectQuery $query): FormInterface\n    {\n        return $this->createForm(ProjectToolbarForm::class, $query, [\n            'action' => $this->generateUrl('admin_project', [\n                'page' => $query->getPage(),\n            ]),\n            'method' => 'GET',\n        ]);\n    }\n\n    private function getCommentForm(Project $project, ProjectComment $comment): FormInterface\n    {\n        if (null === $comment->getId()) {\n            $comment->setProject($project);\n            $comment->setCreatedBy($this->getUser());\n        }\n\n        return $this->createForm(ProjectCommentForm::class, $comment, [\n            'action' => $this->generateUrl('project_comment_add', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n    }\n\n    private function createEditForm(Project $project): FormInterface\n    {\n        $event = new ProjectMetaDefinitionEvent($project);\n        $this->dispatcher->dispatch($event);\n\n        $currency = $this->configuration->getCustomerDefaultCurrency();\n        $url = $this->generateUrl('admin_project_create');\n\n        if ($project->getId() !== null) {\n            $url = $this->generateUrl('admin_project_edit', ['id' => $project->getId()]);\n            $currency = $project->getCustomer()->getCurrency();\n        }\n\n        return $this->createForm(ProjectEditForm::class, $project, [\n            'action' => $url,\n            'method' => 'POST',\n            'currency' => $currency,\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'include_budget' => $this->isGranted('budget', $project),\n            'time_increment' => 15,\n        ]);\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Team;\nuse App\\Form\\TeamCustomerForm;\nuse App\\Form\\TeamEditForm;\nuse App\\Form\\TeamProjectForm;\nuse App\\Form\\Toolbar\\TeamToolbarForm;\nuse App\\Repository\\Query\\TeamQuery;\nuse App\\Repository\\TeamRepository;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\RedirectResponse;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\n\n/**\n * @Route(path=\"/admin/teams\")\n * @Security(\"is_granted('view_team')\")\n */\nfinal class TeamController extends AbstractController\n{\n    /**\n     * @var TeamRepository\n     */\n    private $repository;\n\n    public function __construct(TeamRepository $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_team\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_team_paginated\", methods={\"GET\"})\n     *\n     * @param TeamRepository $repository\n     * @param Request $request\n     * @param int $page\n     * @return Response\n     */\n    public function listTeams(TeamRepository $repository, Request $request, $page)\n    {\n        $query = new TeamQuery();\n        $query->setPage($page);\n        $query->setCurrentUser($this->getUser());\n\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute('admin_team');\n        }\n\n        $teams = $repository->getPagerfantaForQuery($query);\n\n        return $this->render('team/index.html.twig', [\n            'teams' => $teams,\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_team_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_team')\")\n     *\n     * @param Request $request\n     * @return RedirectResponse|Response\n     */\n    public function createTeam(Request $request)\n    {\n        return $this->renderEditScreen(new Team(), $request);\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate\", name=\"team_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team) and is_granted('create_team')\")\n     */\n    public function duplicateTeam(Team $team, Request $request)\n    {\n        $newTeam = clone $team;\n        $newTeam->setName($team->getName() . ' [COPY]');\n\n        try {\n            $this->repository->saveTeam($newTeam);\n            $this->flashSuccess('action.update.success');\n\n            return $this->redirectToRoute('admin_team_edit', ['id' => $newTeam->getId()]);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('admin_team');\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_team_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team)\")\n     */\n    public function editAction(Team $team, Request $request)\n    {\n        return $this->renderEditScreen($team, $request);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit_member\", name=\"admin_team_member\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team)\")\n     */\n    public function editMemberAction(Team $team, Request $request)\n    {\n        $editForm = $this->createForm(TeamEditForm::class, $team, [\n            'action' => $this->generateUrl('admin_team_member', ['id' => $team->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->repository->saveTeam($team);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('team/edit_member.html.twig', [\n            'team' => $team,\n            'form' => $editForm->createView(),\n        ]);\n    }\n\n    private function renderEditScreen(Team $team, Request $request): Response\n    {\n        $customerForm = null;\n        $projectForm = null;\n\n        if ($team->getId() === null) {\n            $url = $this->generateUrl('admin_team_create');\n        } else {\n            $url = $this->generateUrl('admin_team_edit', ['id' => $team->getId()]);\n        }\n\n        $editForm = $this->createForm(TeamEditForm::class, $team, [\n            'action' => $url,\n            'method' => 'POST',\n        ]);\n\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->repository->saveTeam($team);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        if (null !== $team->getId()) {\n            $customerForm = $this->createForm(TeamCustomerForm::class, $team, [\n                'method' => 'POST',\n            ]);\n            $customerForm->handleRequest($request);\n\n            if ($customerForm->isSubmitted() && $customerForm->isValid()) {\n                try {\n                    $this->repository->saveTeam($team);\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n\n            $projectForm = $this->createForm(TeamProjectForm::class, $team, [\n                'method' => 'POST',\n            ]);\n            $projectForm->handleRequest($request);\n\n            if ($projectForm->isSubmitted() && $projectForm->isValid()) {\n                try {\n                    $this->repository->saveTeam($team);\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n        }\n\n        return $this->render('team/edit.html.twig', [\n            'team' => $team,\n            'form' => $editForm->createView(),\n            'customerForm' => $customerForm ? $customerForm->createView() : null,\n            'projectForm' => $projectForm ? $projectForm->createView() : null,\n        ]);\n    }\n\n    private function getToolbarForm(TeamQuery $query): FormInterface\n    {\n        return $this->createForm(TeamToolbarForm::class, $query, [\n            'action' => $this->generateUrl('admin_team', [\n                'page' => $query->getPage(),\n            ]),\n            'method' => 'GET',\n        ]);\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Configuration\\SystemConfiguration;\nuse App\\Entity\\MetaTableTypeInterface;\nuse App\\Entity\\Tag;\nuse App\\Entity\\Timesheet;\nuse App\\Event\\TimesheetDuplicatePostEvent;\nuse App\\Event\\TimesheetDuplicatePreEvent;\nuse App\\Event\\TimesheetMetaDefinitionEvent;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\MultiUpdate\\MultiUpdateTable;\nuse App\\Form\\MultiUpdate\\MultiUpdateTableDTO;\nuse App\\Form\\MultiUpdate\\TimesheetMultiUpdate;\nuse App\\Form\\MultiUpdate\\TimesheetMultiUpdateDTO;\nuse App\\Form\\TimesheetEditForm;\nuse App\\Form\\Toolbar\\TimesheetExportToolbarForm;\nuse App\\Form\\Toolbar\\TimesheetToolbarForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\TimesheetQuery;\nuse App\\Repository\\TagRepository;\nuse App\\Repository\\TimesheetRepository;\nuse App\\Timesheet\\TimesheetService;\nuse App\\Timesheet\\TrackingMode\\TrackingModeInterface;\nuse Doctrine\\Common\\Collections\\ArrayCollection;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcherInterface;\nuse Symfony\\Component\\Form\\FormError;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\nabstract class TimesheetAbstractController extends AbstractController\n{\n    /**\n     * @var TimesheetRepository\n     */\n    protected $repository;\n    /**\n     * @var EventDispatcherInterface\n     */\n    protected $dispatcher;\n    /**\n     * @var TimesheetService\n     */\n    protected $service;\n    /**\n     * @var SystemConfiguration\n     */\n    protected $configuration;\n\n    public function __construct(\n        TimesheetRepository $repository,\n        EventDispatcherInterface $dispatcher,\n        TimesheetService $timesheetService,\n        SystemConfiguration $configuration\n    ) {\n        $this->repository = $repository;\n        $this->dispatcher = $dispatcher;\n        $this->service = $timesheetService;\n        $this->configuration = $configuration;\n    }\n\n    protected function getTrackingMode(): TrackingModeInterface\n    {\n        return $this->service->getActiveTrackingMode();\n    }\n\n    protected function index(TimesheetQuery $query, Request $request, string $route, string $renderTemplate, string $location): Response\n    {\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute($route);\n        }\n\n        $tags = $query->getTags(true);\n        if (!empty($tags)) {\n            /** @var TagRepository $tagRepo */\n            $tagRepo = $this->getDoctrine()->getRepository(Tag::class);\n            $query->setTags(\n                new ArrayCollection(\n                    $tagRepo->findIdsByTagNameList(implode(',', $tags))\n                )\n            );\n        }\n\n        $this->prepareQuery($query);\n\n        $pager = $this->repository->getPagerfantaForQuery($query);\n\n        return $this->render($renderTemplate, [\n            'entries' => $pager,\n            'page' => $query->getPage(),\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n            'multiUpdateForm' => $this->getMultiUpdateActionForm()->createView(),\n            'showSummary' => $this->includeSummary(),\n            'showStartEndTime' => $this->canSeeStartEndTime(),\n            'metaColumns' => $this->findMetaColumns($query, $location),\n        ]);\n    }\n\n    /**\n     * @param TimesheetQuery $query\n     * @param string $location\n     * @return MetaTableTypeInterface[]\n     */\n    protected function findMetaColumns(TimesheetQuery $query, string $location): array\n    {\n        $event = new TimesheetMetaDisplayEvent($query, $location);\n        $this->dispatcher->dispatch($event);\n\n        return $event->getFields();\n    }\n\n    protected function edit(Timesheet $entry, Request $request, string $renderTemplate): Response\n    {\n        $event = new TimesheetMetaDefinitionEvent($entry);\n        $this->dispatcher->dispatch($event);\n\n        $editForm = $this->getEditForm($entry, $request->get('page'));\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->service->updateTimesheet($entry);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute(), ['page' => $request->get('page', 1)]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $entry,\n            'form' => $editForm->createView(),\n        ]);\n    }\n\n    protected function getTags(TagRepository $tagRepository, $tagNames)\n    {\n        $tags = [];\n        if (!\\is_array($tagNames)) {\n            $tagNames = explode(',', $tagNames);\n        }\n        foreach ($tagNames as $tagName) {\n            $tag = $tagRepository->findTagByName($tagName);\n            if (!$tag) {\n                $tag = new Tag();\n                $tag->setName($tagName);\n            }\n            $tags[] = $tag;\n        }\n\n        return $tags;\n    }\n\n    protected function create(Request $request, string $renderTemplate, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        $entry = $this->service->createNewTimesheet($this->getUser());\n\n        if ($request->query->get('project')) {\n            $project = $projectRepository->find($request->query->get('project'));\n            $entry->setProject($project);\n        }\n\n        if ($request->query->get('activity')) {\n            $activity = $activityRepository->find($request->query->get('activity'));\n            $entry->setActivity($activity);\n        }\n\n        if ($request->query->get('description')) {\n            $description = $request->query->get('description');\n            $entry->setDescription($description);\n        }\n\n        if ($request->query->get('tags')) {\n            foreach ($this->getTags($tagRepository, $request->query->get('tags')) as $tag) {\n                $entry->addTag($tag);\n            }\n        }\n\n        $this->service->prepareNewTimesheet($entry, $request);\n        $createForm = $this->getCreateForm($entry);\n        $createForm->handleRequest($request);\n\n        if ($createForm->isSubmitted() && $createForm->isValid()) {\n            try {\n                $this->service->saveNewTimesheet($entry);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $entry,\n            'form' => $createForm->createView(),\n        ]);\n    }\n\n    protected function duplicate(Timesheet $timesheet, Request $request, string $renderTemplate): Response\n    {\n        $copyTimesheet = clone $timesheet;\n\n        $event = new TimesheetMetaDefinitionEvent($copyTimesheet);\n        $this->dispatcher->dispatch($event);\n\n        $form = $this->getDuplicateForm($copyTimesheet, $timesheet);\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->dispatcher->dispatch(new TimesheetDuplicatePreEvent($copyTimesheet, $timesheet));\n                $this->service->saveNewTimesheet($copyTimesheet);\n                $this->dispatcher->dispatch(new TimesheetDuplicatePostEvent($copyTimesheet, $timesheet));\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $copyTimesheet,\n            'form' => $form->createView(),\n        ]);\n    }\n\n    protected function export(Request $request, ServiceExport $serviceExport): Response\n    {\n        $query = $this->createDefaultQuery();\n\n        $form = $this->getExportForm($query);\n\n        if ($request->isMethod(Request::METHOD_POST)) {\n            $this->ignorePersistedSearch($request);\n        }\n\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute($this->getExportRoute());\n        }\n\n        $this->prepareQuery($query);\n\n        // make sure that we use the \"expected time range\"\n        if (null !== $query->getBegin()) {\n            $query->getBegin()->setTime(0, 0, 0);\n        }\n        if (null !== $query->getEnd()) {\n            $query->getEnd()->setTime(23, 59, 59);\n        }\n\n        $entries = $this->repository->getTimesheetResult($query);\n        $stats = $entries->getStatistic();\n\n        // perform the real export\n        if ($request->isMethod(Request::METHOD_POST)) {\n            $type = $request->request->get('exporter');\n            if (null !== $type) {\n                $exporter = $serviceExport->getTimesheetExporterById($type);\n\n                if (null === $exporter) {\n                    $form->addError(new FormError('Invalid timesheet exporter given'));\n                } else {\n                    return $exporter->render($entries->getResults(true), $query);\n                }\n            }\n        }\n\n        return $this->render('timesheet/layout-export.html.twig', [\n            'form' => $form->createView(),\n            'route_back' => $this->getTimesheetRoute(),\n            'exporter' => $serviceExport->getTimesheetExporter(),\n            'stats' => $stats,\n        ]);\n    }\n\n    protected function multiUpdate(Request $request, string $renderTemplate)\n    {\n        $dto = new TimesheetMultiUpdateDTO();\n\n        // initial request from the listing posts a different form\n        $form = $this->getMultiUpdateActionForm();\n        $form->handleRequest($request);\n        if ($form->isSubmitted() && $form->isValid()) {\n            $dto->setEntities($form->getData()->getEntities());\n        }\n\n        // using a new timesheet to make sure we ONLY use meta-fields which are registered via events\n        $fake = new Timesheet();\n        $event = new TimesheetMetaDefinitionEvent($fake);\n        $this->dispatcher->dispatch($event);\n\n        foreach ($fake->getMetaFields() as $field) {\n            $dto->setMetaField(clone $field);\n        }\n\n        $form = $this->getMultiUpdateForm($dto);\n        $form->handleRequest($request);\n\n        // remove all, which are not allowed to be edited\n        $timesheets = [];\n        $disallowed = 0;\n        /** @var Timesheet $timesheet */\n        foreach ($dto->getEntities() as $timesheet) {\n            if (!$this->isGranted('edit', $timesheet)) {\n                $disallowed++;\n                continue;\n            }\n            $timesheets[] = $timesheet;\n        }\n\n        if ($disallowed > 0) {\n            $this->flashWarning(sprintf('You are missing the permission to edit %s timesheets', $disallowed));\n        }\n\n        $dto->setEntities($timesheets);\n\n        if (\\count($dto->getEntities()) === 0) {\n            return $this->redirectToRoute($this->getTimesheetRoute());\n        }\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            /** @var Timesheet $timesheet */\n            $execute = false;\n            foreach ($dto->getEntities() as $timesheet) {\n                if ($dto->isReplaceTags()) {\n                    foreach ($timesheet->getTags() as $tag) {\n                        $timesheet->removeTag($tag);\n                    }\n                    $execute = true;\n                }\n                foreach ($dto->getTags() as $tag) {\n                    $timesheet->addTag($tag);\n                    $execute = true;\n                }\n                if (null !== $dto->getActivity()) {\n                    $timesheet->setActivity($dto->getActivity());\n                    $execute = true;\n                }\n                if (null !== $dto->getProject()) {\n                    $timesheet->setProject($dto->getProject());\n                    $execute = true;\n                }\n                if (null !== $dto->getUser()) {\n                    $timesheet->setUser($dto->getUser());\n                    $execute = true;\n                }\n                if (null !== $dto->isExported()) {\n                    $timesheet->setExported($dto->isExported());\n                    $execute = true;\n                }\n                if (null !== $dto->isBillable()) {\n                    $timesheet->setBillable($dto->isBillable());\n                    $execute = true;\n                }\n\n                if ($dto->isRecalculateRates()) {\n                    $timesheet->setFixedRate(null);\n                    $timesheet->setHourlyRate(null);\n                    $timesheet->setInternalRate(null);\n                    $execute = true;\n                } elseif (null !== $dto->getFixedRate()) {\n                    $timesheet->setFixedRate($dto->getFixedRate());\n                    $timesheet->setHourlyRate(null);\n                    $timesheet->setInternalRate(null);\n                    $execute = true;\n                } elseif (null !== $dto->getHourlyRate()) {\n                    $timesheet->setFixedRate(null);\n                    $timesheet->setInternalRate(null);\n                    $timesheet->setHourlyRate($dto->getHourlyRate());\n                    $execute = true;\n                }\n\n                foreach ($dto->getUpdateMeta() as $metaName) {\n                    if (null !== ($metaField = $dto->getMetaField($metaName))) {\n                        if (null !== ($timesheetMeta = $timesheet->getMetaField($metaName))) {\n                            $timesheetMeta->setValue($metaField->getValue());\n                        } else {\n                            $timesheet->setMetaField(clone $metaField);\n                        }\n                        $execute = true;\n                    }\n                }\n            }\n\n            if ($execute) {\n                try {\n                    $this->service->updateMultipleTimesheets($dto->getEntities());\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute($this->getTimesheetRoute());\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'form' => $form->createView(),\n            'dto' => $dto,\n        ]);\n    }\n\n    protected function multiDelete(Request $request)\n    {\n        $form = $this->getMultiUpdateActionForm();\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            $dto = $form->getData();\n            $timesheets = [];\n            /** @var Timesheet $timesheet */\n            foreach ($dto->getEntities() as $timesheet) {\n                if (!$this->isGranted('delete', $timesheet)) {\n                    continue;\n                }\n                $timesheets[] = $timesheet;\n            }\n            $dto->setEntities($timesheets);\n\n            try {\n                $this->service->deleteMultipleTimesheets($dto->getEntities());\n                $this->flashSuccess('action.delete.success');\n            } catch (\\Exception $ex) {\n                $this->flashDeleteException($ex);\n            }\n        }\n\n        return $this->redirectToRoute($this->getTimesheetRoute());\n    }\n\n    protected function prepareQuery(TimesheetQuery $query)\n    {\n        $query->setUser($this->getUser());\n    }\n\n    protected function getMultiUpdateForm(TimesheetMultiUpdateDTO $multiUpdate): FormInterface\n    {\n        return  $this->createForm(TimesheetMultiUpdate::class, $multiUpdate, [\n            'action' => $this->generateUrl($this->getMultiUpdateRoute(), []),\n            'method' => 'POST',\n            'include_exported' => $this->isGranted($this->getPermissionEditExport()),\n            'include_rate' => $this->isGranted($this->getPermissionEditRate()),\n            'include_user' => $this->includeUserInForms('multi'),\n        ]);\n    }\n\n    protected function getMultiUpdateActionForm(): FormInterface\n    {\n        $dto = new MultiUpdateTableDTO();\n\n        $dto->addUpdate($this->generateUrl($this->getMultiUpdateRoute()));\n        $dto->addDelete($this->generateUrl($this->getMultiDeleteRoute()));\n\n        return $this->createForm(MultiUpdateTable::class, $dto, [\n            'action' => $this->generateUrl($this->getTimesheetRoute()),\n            'repository' => $this->repository,\n            'method' => 'POST',\n        ]);\n    }\n\n    protected function generateCreateForm(Timesheet $entry, string $formClass, string $action): FormInterface\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm($formClass, $entry, [\n            'action' => $action,\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('create'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone(),\n            'customer' => true,\n        ]);\n    }\n\n    /**\n     * @param Timesheet $entry\n     * @param int $page\n     * @return FormInterface\n     */\n    protected function getEditForm(Timesheet $entry, $page)\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm($this->getEditFormClassName(), $entry, [\n            'action' => $this->generateUrl($this->getEditRoute(), [\n                'id' => $entry->getId(),\n                'page' => $page,\n            ]),\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('edit'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone(),\n            'customer' => true,\n        ]);\n    }\n\n    protected function getToolbarForm(TimesheetQuery $query): FormInterface\n    {\n        return $this->createForm(TimesheetToolbarForm::class, $query, [\n            'action' => $this->generateUrl($this->getTimesheetRoute(), [\n                'page' => $query->getPage(),\n            ]),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'method' => 'GET',\n            'include_user' => $this->includeUserInForms('toolbar'),\n        ]);\n    }\n\n    protected function getExportForm(TimesheetQuery $query): FormInterface\n    {\n        return $this->createForm(TimesheetExportToolbarForm::class, $query, [\n            'action' => $this->generateUrl($this->getExportRoute()),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'method' => Request::METHOD_POST,\n            'include_user' => $this->includeUserInForms('toolbar'),\n        ]);\n    }\n\n    protected function getPermissionEditExport(): string\n    {\n        return 'edit_export_own_timesheet';\n    }\n\n    protected function getPermissionEditRate(): string\n    {\n        return 'edit_rate_own_timesheet';\n    }\n\n    protected function getEditFormClassName(): string\n    {\n        return TimesheetEditForm::class;\n    }\n\n    protected function includeSummary(): bool\n    {\n        return (bool) $this->getUser()->getPreferenceValue('timesheet.daily_stats', false);\n    }\n\n    protected function includeUserInForms(string $formName): bool\n    {\n        return false;\n    }\n\n    protected function getTimesheetRoute(): string\n    {\n        return 'timesheet';\n    }\n\n    protected function getEditRoute(): string\n    {\n        return 'timesheet_edit';\n    }\n\n    protected function getMultiUpdateRoute(): string\n    {\n        return 'timesheet_multi_update';\n    }\n\n    protected function getMultiDeleteRoute(): string\n    {\n        return 'timesheet_multi_delete';\n    }\n\n    protected function getExportRoute(): string\n    {\n        return 'timesheet_export';\n    }\n\n    protected function canSeeStartEndTime(): bool\n    {\n        return $this->getTrackingMode()->canSeeBeginAndEndTimes();\n    }\n\n    protected function getQueryNamePrefix(): string\n    {\n        return 'MyTimes';\n    }\n\n    protected function createDefaultQuery(string $suffix = 'Listing'): TimesheetQuery\n    {\n        $query = new TimesheetQuery();\n        $query->setName($this->getQueryNamePrefix() . $suffix);\n\n        return $query;\n    }\n\n    abstract protected function getDuplicateForm(Timesheet $entry, Timesheet $original): FormInterface;\n\n    abstract protected function getCreateForm(Timesheet $entry): FormInterface;\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Timesheet;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\TimesheetEditForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\TagRepository;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\n\n/**\n * @Route(path=\"/timesheet\")\n * @Security(\"is_granted('view_own_timesheet')\")\n */\nclass TimesheetController extends TimesheetAbstractController\n{\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"timesheet\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"timesheet_paginated\", methods={\"GET\"})\n     * @Security(\"is_granted('view_own_timesheet')\")\n     */\n    public function indexAction(int $page, Request $request): Response\n    {\n        $query = $this->createDefaultQuery();\n        $query->setPage($page);\n\n        return $this->index($query, $request, 'timesheet', 'timesheet/index.html.twig', TimesheetMetaDisplayEvent::TIMESHEET);\n    }\n\n    /**\n     * @Route(path=\"/export/\", name=\"timesheet_export\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('export_own_timesheet')\")\n     */\n    public function exportAction(Request $request, ServiceExport $serviceExport): Response\n    {\n        return $this->export($request, $serviceExport);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"timesheet_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', entry)\")\n     */\n    public function editAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->edit($entry, $request, 'timesheet/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate\", name=\"timesheet_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('duplicate', entry)\")\n     */\n    public function duplicateAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->duplicate($entry, $request, 'timesheet/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/multi-update\", name=\"timesheet_multi_update\", methods={\"POST\"})\n     * @Security(\"is_granted('edit_own_timesheet')\")\n     */\n    public function multiUpdateAction(Request $request): Response\n    {\n        return $this->multiUpdate($request, 'timesheet/multi-update.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/multi-delete\", name=\"timesheet_multi_delete\", methods={\"POST\"})\n     * @Security(\"is_granted('delete_own_timesheet')\")\n     */\n    public function multiDeleteAction(Request $request): Response\n    {\n        return $this->multiDelete($request);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"timesheet_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_own_timesheet')\")\n     */\n    public function createAction(Request $request, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        return $this->create($request, 'timesheet/edit.html.twig', $projectRepository, $activityRepository, $tagRepository);\n    }\n\n    protected function getCreateForm(Timesheet $entry): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetEditForm::class, $this->generateUrl('timesheet_create'));\n    }\n\n    protected function getDuplicateForm(Timesheet $entry, Timesheet $original): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetEditForm::class, $this->generateUrl('timesheet_duplicate', ['id' => $original->getId()]));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Tag;\nuse App\\Entity\\Team;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\User;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\Model\\MultiUserTimesheet;\nuse App\\Form\\TimesheetAdminEditForm;\nuse App\\Form\\TimesheetMultiUserEditForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\TimesheetQuery;\nuse App\\Repository\\TagRepository;\nuse Doctrine\\Common\\Collections\\ArrayCollection;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\n\n/**\n * @Route(path=\"/team/timesheet\")\n * @Security(\"is_granted('view_other_timesheet')\")\n */\nclass TimesheetTeamController extends TimesheetAbstractController\n{\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_timesheet\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_timesheet_paginated\", methods={\"GET\"})\n     * @Security(\"is_granted('view_other_timesheet')\")\n     *\n     * @param int $page\n     * @param Request $request\n     * @return Response\n     */\n    public function indexAction(int $page, Request $request): Response\n    {\n        $query = $this->createDefaultQuery();\n        $query->setPage($page);\n\n        return $this->index($query, $request, 'admin_timesheet', 'timesheet-team/index.html.twig', TimesheetMetaDisplayEvent::TEAM_TIMESHEET);\n    }\n\n    /**\n     * @Route(path=\"/export/\", name=\"admin_timesheet_export\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('export_other_timesheet')\")\n     */\n    public function exportAction(Request $request, ServiceExport $serviceExport): Response\n    {\n        return $this->export($request, $serviceExport);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_timesheet_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', entry)\")\n     */\n    public function editAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->edit($entry, $request, 'timesheet-team/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate\", name=\"admin_timesheet_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('duplicate', entry)\")\n     */\n    public function duplicateAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->duplicate($entry, $request, 'timesheet-team/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_timesheet_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_other_timesheet')\")\n     */\n    public function createAction(Request $request, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        return $this->create($request, 'timesheet-team/edit.html.twig', $projectRepository, $activityRepository, $tagRepository);\n    }\n\n    /**\n     * @Route(path=\"/create_mu\", name=\"admin_timesheet_create_multiuser\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_other_timesheet')\")\n     */\n    public function createForMultiUserAction(Request $request): Response\n    {\n        $entry = new MultiUserTimesheet();\n        $entry->setUser($this->getUser());\n        $this->service->prepareNewTimesheet($entry, $request);\n\n        $createForm = $this->getMultiUserCreateForm($entry);\n        $createForm->handleRequest($request);\n\n        if ($createForm->isSubmitted() && $createForm->isValid()) {\n            try {\n                /** @var ArrayCollection<User> $users */\n                $users = $createForm->get('users')->getData();\n                /** @var ArrayCollection<Team> $teams */\n                $teams = $createForm->get('teams')->getData();\n\n                $allUsers = $users->toArray();\n                /** @var Team $team */\n                foreach ($teams as $team) {\n                    $allUsers = array_merge($allUsers, $team->getUsers());\n                }\n                $allUsers = array_unique($allUsers);\n\n                /** @var Tag[] $tags */\n                $tags = [];\n                /** @var Tag $tag */\n                foreach ($entry->getTags() as $tag) {\n                    $tag->removeTimesheet($entry);\n                    $tags[] = $tag;\n                }\n\n                foreach ($allUsers as $user) {\n                    $newTimesheet = $entry->createCopy();\n                    $newTimesheet->setUser($user);\n                    foreach ($tags as $tag) {\n                        $newTimesheet->addTag($tag);\n                    }\n                    $this->service->prepareNewTimesheet($newTimesheet, $request);\n                    $this->service->saveNewTimesheet($newTimesheet);\n                }\n\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('timesheet-team/edit.html.twig', [\n            'timesheet' => $entry,\n            'form' => $createForm->createView(),\n        ]);\n    }\n\n    protected function getMultiUserCreateForm(MultiUserTimesheet $entry): FormInterface\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm(TimesheetMultiUserEditForm::class, $entry, [\n            'action' => $this->generateUrl('admin_timesheet_create_multiuser'),\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('create'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'customer' => true,\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/multi-update\", name=\"admin_timesheet_multi_update\", methods={\"POST\"})\n     * @Security(\"is_granted('edit_other_timesheet')\")\n     */\n    public function multiUpdateAction(Request $request): Response\n    {\n        return $this->multiUpdate($request, 'timesheet-team/multi-update.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/multi-delete\", name=\"admin_timesheet_multi_delete\", methods={\"POST\"})\n     * @Security(\"is_granted('delete_other_timesheet')\")\n     */\n    public function multiDeleteAction(Request $request): Response\n    {\n        return $this->multiDelete($request);\n    }\n\n    protected function prepareQuery(TimesheetQuery $query)\n    {\n        $query->setCurrentUser($this->getUser());\n    }\n\n    protected function getCreateForm(Timesheet $entry): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetAdminEditForm::class, $this->generateUrl('admin_timesheet_create'));\n    }\n\n    protected function getDuplicateForm(Timesheet $entry, Timesheet $original): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetAdminEditForm::class, $this->generateUrl('admin_timesheet_duplicate', ['id' => $original->getId()]));\n    }\n\n    protected function getPermissionEditExport(): string\n    {\n        return 'edit_export_other_timesheet';\n    }\n\n    protected function getPermissionEditRate(): string\n    {\n        return 'edit_rate_other_timesheet';\n    }\n\n    protected function getEditFormClassName(): string\n    {\n        return TimesheetAdminEditForm::class;\n    }\n\n    protected function includeUserInForms(string $formName): bool\n    {\n        if ($formName === 'toolbar') {\n            return true;\n        }\n\n        return $this->isGranted('edit_other_timesheet');\n    }\n\n    protected function getTimesheetRoute(): string\n    {\n        return 'admin_timesheet';\n    }\n\n    protected function getEditRoute(): string\n    {\n        return 'admin_timesheet_edit';\n    }\n\n    protected function getExportRoute(): string\n    {\n        return 'admin_timesheet_export';\n    }\n\n    protected function getMultiUpdateRoute(): string\n    {\n        return 'admin_timesheet_multi_update';\n    }\n\n    protected function getMultiDeleteRoute(): string\n    {\n        return 'admin_timesheet_multi_delete';\n    }\n\n    protected function canSeeStartEndTime(): bool\n    {\n        return true;\n    }\n\n    protected function getQueryNamePrefix(): string\n    {\n        return 'TeamTimes';\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Timesheet;\nuse App\\Event\\PageActionsEvent;\n\n/**\n * @internal\n */\nabstract class AbstractTimesheetSubscriber extends AbstractActionsSubscriber\n{\n    protected function timesheetActions(PageActionsEvent $event, string $routeEdit, string $routeDuplicate): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Timesheet $timesheet */\n        $timesheet = $payload['timesheet'];\n        if ($timesheet->getId() !== null) {\n            if ($timesheet->isRunning() && $this->isGranted('stop', $timesheet)) {\n                $event->addAction('stop', ['url' => $this->path('stop_timesheet', ['id' => $timesheet->getId()]), 'class' => 'api-link', 'attr' => ['data-event' => 'kimai.timesheetStop kimai.timesheetUpdate', 'data-method' => 'PATCH', 'data-msg-error' => 'timesheet.stop.error', 'data-msg-success' => 'timesheet.stop.success']]);\n            }\n\n            if (!$timesheet->isRunning() && $this->isGranted('start', $timesheet)) {\n                $event->addAction('repeat', ['url' => $this->path('restart_timesheet', ['id' => $timesheet->getId()]), 'class' => 'api-link', 'attr' => ['data-payload' => '{\"copy\": \"all\"}', 'data-event' => 'kimai.timesheetStart kimai.timesheetUpdate', 'data-method' => 'PATCH', 'data-msg-error' => 'timesheet.start.error', 'data-msg-success' => 'timesheet.start.success']]);\n            }\n\n            if ($this->isGranted('edit', $timesheet)) {\n                $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n                $event->addAction('edit', ['url' => $this->path($routeEdit, ['id' => $timesheet->getId()]), 'class' => $class]);\n            }\n\n            if ($this->isGranted('duplicate', $timesheet)) {\n                $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n                $event->addAction('copy', ['url' => $this->path($routeDuplicate, ['id' => $timesheet->getId()]), 'class' => $class]);\n            }\n\n            if ($event->countActions() > 0) {\n                $event->addDivider();\n            }\n\n            if ($event->isIndexView() && $this->isGranted('delete', $timesheet)) {\n                $event->addAction('trash', [\n                    'url' => $this->path('delete_timesheet', ['id' => $timesheet->getId()]),\n                    'class' => 'api-link',\n                    'attr' => [\n                        'data-event' => 'kimai.timesheetDelete',\n                        'data-method' => 'DELETE',\n                        'data-question' => 'confirm.delete',\n                        'data-msg-error' => 'action.delete.error',\n                        'data-msg-success' => 'action.delete.success'\n                    ]\n                ]);\n            }\n        }\n\n        if (!$event->isIndexView()) {\n            $event->addHelp($this->documentationLink('timesheet.html'));\n        }\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Project;\nuse App\\Event\\PageActionsEvent;\n\nclass ProjectSubscriber extends AbstractActionsSubscriber\n{\n    public static function getActionName(): string\n    {\n        return 'project';\n    }\n\n    public function onActions(PageActionsEvent $event): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Project $project */\n        $project = $payload['project'];\n\n        if ($project->getId() === null) {\n            return;\n        }\n\n        if (!$event->isView('project_details') && $this->isGranted('view', $project)) {\n            $event->addAction('details', ['url' => $this->path('project_details', ['id' => $project->getId()])]);\n        }\n\n        if ($this->isGranted('edit', $project)) {\n            $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n            $event->addAction('edit', ['url' => $this->path('admin_project_edit', ['id' => $project->getId()]), 'class' => $class]);\n        }\n\n        if ($this->isGranted('permissions', $project)) {\n            $class = $event->isView('permissions') ? '' : 'modal-ajax-form';\n            $event->addAction('permissions', ['url' => $this->path('admin_project_permissions', ['id' => $project->getId()]), 'class' => $class]);\n        }\n\n        if ($event->countActions() > 0) {\n            $event->addDivider();\n        }\n\n        if ($this->isGranted('view_activity')) {\n            $event->addActionToSubmenu('filter', 'activity', ['title' => 'activity', 'translation_domain' => 'actions', 'url' => $this->path('admin_activity', ['customers[]' => $project->getCustomer()->getId(), 'projects[]' => $project->getId()])]);\n        }\n\n        if ($this->isGranted('view_other_timesheet')) {\n            $event->addActionToSubmenu('filter', 'timesheet', ['title' => 'timesheet', 'translation_domain' => 'actions', 'url' => $this->path('admin_timesheet', ['customers[]' => $project->getCustomer()->getId(), 'projects[]' => $project->getId()])]);\n        }\n\n        if ($event->hasSubmenu('filter')) {\n            $event->addDivider();\n        }\n\n        if (!$event->isView('project_details')) {\n            if ($project->isVisible() && $project->getCustomer()->isVisible() && $this->isGranted('create_activity')) {\n                $event->addAction('create-activity', [\n                    'icon' => 'create',\n                    'url' => $this->path('admin_activity_create_with_project', ['project' => $project->getId()]),\n                    'class' => 'modal-ajax-form'\n                ]);\n            }\n        }\n\n        if ($this->isGranted('edit', $project) && $this->isGranted('create_project')) {\n            $event->addAction(\n                'copy',\n                ['url' => $this->path('admin_project_duplicate', ['id' => $project->getId()])]\n            );\n        }\n\n        if (($event->isIndexView() || $event->isView('customer_details')) && $this->isGranted('delete', $project)) {\n            $event->addDelete($this->path('admin_project_delete', ['id' => $project->getId()]));\n        }\n\n        if ($project->isVisible() && $this->isGranted('view_reporting') && $this->isGranted('details', $project)) {\n            $event->addAction('report_project_details', ['url' => $this->path('report_project_details', ['project' => $project->getId()]), 'icon' => 'reporting', 'translation_domain' => 'reporting']);\n        }\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Team;\nuse App\\Event\\PageActionsEvent;\n\nclass TeamSubscriber extends AbstractActionsSubscriber\n{\n    public static function getActionName(): string\n    {\n        return 'team';\n    }\n\n    public function onActions(PageActionsEvent $event): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Team $team */\n        $team = $payload['team'];\n\n        if ($team->getId() === null) {\n            return;\n        }\n\n        if ($this->isGranted('edit', $team)) {\n            $event->addAction('edit', ['url' => $this->path('admin_team_edit', ['id' => $team->getId()])]);\n\n            if ($this->isGranted('create_team')) {\n                $event->addAction('copy', ['url' => $this->path('team_duplicate', ['id' => $team->getId()])]);\n            }\n        }\n\n        if ($event->isIndexView() && $this->isGranted('delete', $team)) {\n            $event->addAction('trash', [\n                'url' => $this->path('delete_team', ['id' => $team->getId()]),\n                'class' => 'api-link',\n                'attr' => [\n                    'data-event' => 'kimai.teamDelete kimai.teamUpdate',\n                    'data-method' => 'DELETE',\n                    'data-question' => 'confirm.delete',\n                    'data-msg-error' => 'action.delete.error',\n                    'data-msg-success' => 'action.delete.success'\n                ]\n            ]);\n        }\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Initial database structure of Kimai 2.\n * This file is mainly required for testing the migrations.\n */\nfinal class Version20180701120000 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $users = 'kimai2_users';\n        $userPreferences = 'kimai2_user_preferences';\n        $customers = 'kimai2_customers';\n        $projects = 'kimai2_projects';\n        $activities = 'kimai2_activities';\n        $timesheets = 'kimai2_timesheet';\n        $invoiceTemplates = 'kimai2_invoice_templates';\n\n        $this->addSql('CREATE TABLE ' . $users . ' (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(60) NOT NULL, mail VARCHAR(160) NOT NULL, password VARCHAR(254) DEFAULT NULL, alias VARCHAR(60) DEFAULT NULL, active TINYINT(1) NOT NULL, registration_date DATETIME DEFAULT NULL, title VARCHAR(50) DEFAULT NULL, avatar VARCHAR(255) DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', UNIQUE INDEX UNIQ_B9AC5BCE5E237E06 (name), UNIQUE INDEX UNIQ_B9AC5BCE5126AC48 (mail), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $userPreferences . ' (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, name VARCHAR(50) NOT NULL, value VARCHAR(255) DEFAULT NULL, INDEX IDX_8D08F631A76ED395 (user_id), UNIQUE INDEX UNIQ_8D08F631A76ED3955E237E06 (user_id, name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $customers . ' (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(150) NOT NULL, number VARCHAR(50) DEFAULT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, company VARCHAR(255) DEFAULT NULL, contact VARCHAR(255) DEFAULT NULL, address TEXT DEFAULT NULL, country VARCHAR(2) NOT NULL, currency VARCHAR(3) NOT NULL, phone VARCHAR(255) DEFAULT NULL, fax VARCHAR(255) DEFAULT NULL, mobile VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, homepage VARCHAR(255) DEFAULT NULL, timezone VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $projects . ' (id INT AUTO_INCREMENT NOT NULL, customer_id INT DEFAULT NULL, name VARCHAR(150) NOT NULL, order_number TINYTEXT DEFAULT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, budget NUMERIC(10, 2) NOT NULL, INDEX IDX_407F12069395C3F3 (customer_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $activities . ' (id INT AUTO_INCREMENT NOT NULL, project_id INT DEFAULT NULL, name VARCHAR(150) NOT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, INDEX IDX_8811FE1C166D1F9C (project_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $timesheets . ' (id INT AUTO_INCREMENT NOT NULL, user INT DEFAULT NULL, activity_id INT DEFAULT NULL, start_time DATETIME NOT NULL, end_time DATETIME DEFAULT NULL, duration INT DEFAULT NULL, description TEXT DEFAULT NULL, rate NUMERIC(10, 2) NOT NULL, INDEX IDX_4F60C6B18D93D649 (user), INDEX IDX_4F60C6B181C06096 (activity_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE ' . $invoiceTemplates . ' (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(60) NOT NULL, title VARCHAR(255) NOT NULL, company VARCHAR(255) NOT NULL, address TEXT DEFAULT NULL, due_days INT NOT NULL, vat INT DEFAULT NULL, calculator VARCHAR(20) NOT NULL, number_generator VARCHAR(20) NOT NULL, renderer VARCHAR(20) NOT NULL, payment_terms TEXT DEFAULT NULL, UNIQUE INDEX UNIQ_1626CFE95E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('ALTER TABLE ' . $userPreferences . ' ADD CONSTRAINT FK_8D08F631A76ED395 FOREIGN KEY (user_id) REFERENCES ' . $users . ' (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE ' . $projects . ' ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES ' . $customers . ' (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE ' . $activities . ' ADD CONSTRAINT FK_8811FE1C166D1F9C FOREIGN KEY (project_id) REFERENCES ' . $projects . ' (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE ' . $timesheets . ' ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES ' . $users . ' (id)');\n        $this->addSql('ALTER TABLE ' . $timesheets . ' ADD CONSTRAINT FK_4F60C6B181C06096 FOREIGN KEY (activity_id) REFERENCES ' . $activities . ' (id) ON DELETE CASCADE');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $schema->dropTable('kimai2_invoice_templates');\n        $schema->dropTable('kimai2_timesheet');\n        $schema->dropTable('kimai2_user_preferences');\n        $schema->dropTable('kimai2_users');\n        $schema->dropTable('kimai2_activities');\n        $schema->dropTable('kimai2_projects');\n        $schema->dropTable('kimai2_customers');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Index;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migration for FOSUserBundle\n *\n * Changes the table structure of \"users\" table and migrates from json_array type to serialized array,\n * probably also fixing the higher required MariaDB version.\n *\n * This was fixed in earlier migrations for new installations, but it is still in here for users migrating up from a lower version.\n */\nfinal class Version20180715160326 extends AbstractMigration\n{\n    /**\n     * @var Index[]\n     */\n    protected $indexesOld = [];\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     * @throws \\Doctrine\\DBAL\\Schema\\SchemaException\n     */\n    public function up(Schema $schema): void\n    {\n        $users = 'kimai2_users';\n\n        // delete all existing indexes\n        $indexesOld = $schema->getTable($users)->getIndexes();\n        foreach ($indexesOld as $index) {\n            if (\\in_array('name', $index->getColumns()) || \\in_array('mail', $index->getColumns())) {\n                $this->indexesOld[] = $index;\n                $this->addSql('DROP INDEX ' . $index->getName() . ' ON ' . $users);\n            }\n        }\n\n        $this->addSql('ALTER TABLE ' . $users . ' CHANGE name username VARCHAR(180) NOT NULL, ADD username_canonical VARCHAR(180) NOT NULL, CHANGE mail email VARCHAR(180) NOT NULL, ADD email_canonical VARCHAR(180) NOT NULL, ADD salt VARCHAR(255) DEFAULT NULL, ADD last_login DATETIME DEFAULT NULL, ADD confirmation_token VARCHAR(180) DEFAULT NULL, ADD password_requested_at DATETIME DEFAULT NULL, CHANGE password password VARCHAR(255) NOT NULL, CHANGE alias alias VARCHAR(60) DEFAULT NULL, CHANGE registration_date registration_date DATETIME DEFAULT NULL, CHANGE title title VARCHAR(50) DEFAULT NULL, CHANGE avatar avatar VARCHAR(255) DEFAULT NULL, CHANGE roles roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', CHANGE active enabled TINYINT(1) NOT NULL');\n        $this->addSql('UPDATE ' . $users . ' set username_canonical = username');\n        $this->addSql('UPDATE ' . $users . ' set email_canonical = email');\n\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'a:1:{i:0;s:16:\"ROLE_SUPER_ADMIN\";}\\' WHERE roles LIKE \\'%ROLE_SUPER_ADMIN%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'a:1:{i:0;s:10:\"ROLE_ADMIN\";}\\' WHERE roles LIKE \\'%ROLE_ADMIN%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'a:1:{i:0;s:13:\"ROLE_TEAMLEAD\";}\\' WHERE roles LIKE \\'%ROLE_TEAMLEAD%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'a:0:{}\\' WHERE roles LIKE \\'%ROLE_USER%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'a:1:{i:0;s:13:\"ROLE_CUSTOMER\";}\\' WHERE roles LIKE \\'%ROLE_CUSTOMER%\\'');\n\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE92FC23A8 ON ' . $users . ' (username_canonical)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEA0D96FBF ON ' . $users . ' (email_canonical)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEC05FB297 ON ' . $users . ' (confirmation_token)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEF85E0677 ON ' . $users . ' (username)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEE7927C74 ON ' . $users . ' (email)');\n    }\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     * @throws \\Doctrine\\DBAL\\Schema\\SchemaException\n     */\n    public function down(Schema $schema): void\n    {\n        $users = 'kimai2_users';\n\n        $indexToDelete = ['UNIQ_B9AC5BCE92FC23A8', 'UNIQ_B9AC5BCEA0D96FBF', 'UNIQ_B9AC5BCEC05FB297', 'UNIQ_B9AC5BCEF85E0677', 'UNIQ_B9AC5BCEE7927C74'];\n        foreach ($indexToDelete as $indexName) {\n            $this->addSql('DROP INDEX ' . $indexName . ' ON ' . $users);\n        }\n\n        $this->addSql('ALTER TABLE ' . $users . ' CHANGE username name VARCHAR(60) NOT NULL COLLATE utf8mb4_unicode_ci, CHANGE email mail VARCHAR(160) NOT NULL COLLATE utf8mb4_unicode_ci, DROP username_canonical, DROP email_canonical, DROP salt, DROP last_login, DROP confirmation_token, DROP password_requested_at, CHANGE password password VARCHAR(254) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE roles roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', CHANGE alias alias VARCHAR(60) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE registration_date registration_date DATETIME DEFAULT NULL, CHANGE title title VARCHAR(50) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE avatar avatar VARCHAR(255) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE enabled active TINYINT(1) NOT NULL');\n\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'[\"ROLE_SUPER_ADMIN\"]\\' WHERE roles LIKE \\'%ROLE_SUPER_ADMIN%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'[\"ROLE_ADMIN\"]\\' WHERE roles LIKE \\'%ROLE_ADMIN%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'[\"ROLE_TEAMLEAD\"]\\' WHERE roles LIKE \\'%ROLE_TEAMLEAD%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'[\"ROLE_USER\"]\\' WHERE roles LIKE \\'%ROLE_USER%\\'');\n        $this->addSql('UPDATE ' . $users . ' SET roles = \\'[\"ROLE_CUSTOMER\"]\\' WHERE roles LIKE \\'%ROLE_CUSTOMER%\\'');\n\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE5E237E06 ON ' . $users . ' (name)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE5126AC48 ON ' . $users . ' (mail)');\n\n        $usersTable = $schema->getTable($users);\n        foreach ($this->indexesOld as $index) {\n            $usersTable->addIndex($index->getColumns(), $index->getName(), $index->getFlags(), $index->getOptions());\n        }\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Index;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migrations fot the \"delete user\" feature.\n *\n * Adds constraints to the timesheet table, so all timesheet entries will be deleted when a user is deleted.\n */\nfinal class Version20180730044139 extends AbstractMigration\n{\n    /**\n     * @var Index[]\n     */\n    protected $indexesOld = [];\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     */\n    public function up(Schema $schema): void\n    {\n        $timesheet = 'kimai2_timesheet';\n        $user = 'kimai2_users';\n        $activity = 'kimai2_activities';\n\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES ' . $user . ' (id) ON DELETE CASCADE');\n    }\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     */\n    public function down(Schema $schema): void\n    {\n        $timesheet = 'kimai2_timesheet';\n        $user = 'kimai2_users';\n\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES ' . $user . ' (id)');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Changes the invoice templates table for:\n * - shorter template name and proper index name\n * - VAT supporting percentages\n */\nfinal class Version20180924111853 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $invoiceTemplates = 'kimai2_invoice_templates';\n\n        $this->addSql('UPDATE ' . $invoiceTemplates . ' SET name=SUBSTRING(name, 1, 60)');\n        $this->addSql('ALTER TABLE ' . $invoiceTemplates . ' CHANGE name name VARCHAR(60) NOT NULL, CHANGE vat vat DOUBLE PRECISION DEFAULT 0');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $invoiceTemplates = 'kimai2_invoice_templates';\n\n        $this->addSql('ALTER TABLE ' . $invoiceTemplates . ' CHANGE name name VARCHAR(255) NOT NULL COLLATE utf8mb4_unicode_ci, CHANGE vat vat INT DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migration that adds the project column to timesheets table, to allow global activities.\n * It also fixes foreign-key columns on timesheet and projects table, which are not allowed.\n */\nfinal class Version20181031220003 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $timesheet = 'kimai2_timesheet';\n        $projects = 'kimai2_projects';\n        $activities = 'kimai2_activities';\n        $users = 'kimai2_users';\n        $customers = 'kimai2_customers';\n\n        // project table\n        $this->addSql('ALTER TABLE ' . $projects . ' DROP FOREIGN KEY FK_407F12069395C3F3');\n        $this->addSql('ALTER TABLE ' . $projects . ' CHANGE customer_id customer_id INT NOT NULL');\n        $this->addSql('ALTER TABLE ' . $projects . ' ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES ' . $customers . ' (id) ON DELETE CASCADE');\n        // timesheet table\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD project_id INT DEFAULT NULL AFTER activity_id');\n        $this->addSql('CREATE INDEX IDX_4F60C6B1166D1F9C ON ' . $timesheet . ' (project_id)');\n\n        // update timesheet table and insert project_id from activity table\n        $this->addSql('UPDATE ' . $timesheet . ' SET project_id = (SELECT project_id FROM ' . $activities . ' WHERE id = activity_id)');\n\n        // now update the timesheet table and disallow null values for all required columns (that was a bug before)\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP FOREIGN KEY FK_4F60C6B181C06096');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' CHANGE project_id project_id INT NOT NULL, CHANGE user user INT NOT NULL, CHANGE activity_id activity_id INT NOT NULL');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD CONSTRAINT FK_4F60C6B1166D1F9C FOREIGN KEY (project_id) REFERENCES ' . $projects . ' (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES ' . $users . ' (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' ADD CONSTRAINT FK_4F60C6B181C06096 FOREIGN KEY (activity_id) REFERENCES ' . $activities . ' (id) ON DELETE CASCADE');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $timesheet = 'kimai2_timesheet';\n        $projects = 'kimai2_projects';\n        $customers = 'kimai2_customers';\n\n        // project table\n        $this->addSql('ALTER TABLE ' . $projects . ' DROP FOREIGN KEY FK_407F12069395C3F3');\n        $this->addSql('ALTER TABLE ' . $projects . ' CHANGE customer_id customer_id INT DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $projects . ' ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES ' . $customers . ' (id) ON DELETE CASCADE');\n        // timesheet table\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP FOREIGN KEY FK_4F60C6B1166D1F9C');\n        $this->addSql('DROP INDEX IDX_4F60C6B1166D1F9C ON ' . $timesheet);\n        $this->addSql('ALTER TABLE ' . $timesheet . ' DROP project_id, CHANGE user user INT DEFAULT NULL, CHANGE activity_id activity_id INT DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * - rename mail to email in customer table\n * - converts all decimal to float values, as decimals are treated as string in PHP:\n *   https://www.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#decimal\n *\n * @version 0.9\n */\nfinal class Version20190305152308 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $customers = 'kimai2_customers';\n        $projects = 'kimai2_projects';\n        $activities = 'kimai2_activities';\n        $timesheet = 'kimai2_timesheet';\n        $users = 'kimai2_users';\n\n        $this->addSql('ALTER TABLE ' . $activities . ' CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $customers . ' CHANGE mail email VARCHAR(255) DEFAULT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $projects . ' CHANGE budget budget DOUBLE PRECISION NOT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' CHANGE rate rate DOUBLE PRECISION NOT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $customers = 'kimai2_customers';\n        $projects = 'kimai2_projects';\n        $activities = 'kimai2_activities';\n        $timesheet = 'kimai2_timesheet';\n\n        $this->addSql('ALTER TABLE ' . $activities . ' CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $customers . ' CHANGE email mail VARCHAR(255) DEFAULT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $projects . ' CHANGE budget budget NUMERIC(10, 2) NOT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE ' . $timesheet . ' CHANGE rate rate NUMERIC(10, 2) NOT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * @version 1.15\n */\nfinal class Version20210802152814 extends AbstractMigration\n{\n    public function getDescription(): string\n    {\n        return 'Fills the new date column in the timesheet table';\n    }\n\n    public function up(Schema $schema): void\n    {\n        $fetch = $this->connection->prepare('SELECT id, start_time, timezone FROM kimai2_timesheet WHERE date_tz IS NULL');\n\n        $timezones = [];\n        foreach (\\DateTimeZone::listIdentifiers() as $tz) {\n            $timezones[$tz] = new \\DateTimeZone($tz);\n        }\n\n        foreach ($fetch->executeQuery()->iterateAssociative() as $row) {\n            if (!isset($timezones[$row['timezone']])) {\n                $timezones[$row['timezone']] = new \\DateTimeZone($row['timezone']);\n            }\n            $date = new \\DateTime($row['start_time'], $timezones['UTC']);\n            $date->setTimezone($timezones[$row['timezone']]);\n            $this->addSql('UPDATE kimai2_timesheet SET date_tz = ? WHERE id = ?', [$date->format('Y-m-d'), $row['id']]);\n        }\n\n        $fetch->free();\n\n        $this->preventEmptyMigrationWarning();\n    }\n\n    public function down(Schema $schema): void\n    {\n        $timesheet = $schema->getTable('kimai2_timesheet');\n        $timesheet->changeColumn('date_tz', ['notnull' => false]);\n\n        $this->preventEmptyMigrationWarning();\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * @version 1.16\n */\nfinal class Version20211008092010 extends AbstractMigration\n{\n    public function getDescription(): string\n    {\n        return 'Extend field orderNumber from 20 to 50 characters.';\n    }\n\n    public function up(Schema $schema): void\n    {\n        $projects = $schema->getTable('kimai2_projects');\n        $column = $projects->getColumn('order_number');\n        $column->setOptions(['length' => 50]);\n    }\n\n    public function down(Schema $schema): void\n    {\n        $projects = $schema->getTable('kimai2_projects');\n        $column = $projects->getColumn('order_number');\n        $column->setOptions(['length' => 20]);\n    }\n}\n", "{% extends \"@AdminLTE/layout/form-theme.html.twig\" %}\n\n{# Adds the help icon, including a link to the documentation #}\n{% block form_label %}\n    {% if form.vars.docu_chapter is defined and form.vars.docu_chapter is not empty %}\n        <a href=\"{{ form.vars.docu_chapter|docu_link }}\" target=\"_blank\"><i class=\"{{ 'help'|icon }}\"></i></a>\n    {% endif %}\n    {{ parent() }}\n{% endblock form_label %}\n\n{% block quick_entry_week_row %}\n    <tr{% with {attr: row_attr|merge({class: (row_attr.class|default('') ~ ' form-group qe-entry-week-row' ~ (not valid ? ' has-error'))|trim})} %}{{ block('attributes') }}{% endwith %}>\n        <td>\n            {{ form_row(form.project) }}\n        </td>\n        <td>\n            {{ form_row(form.activity) }}\n        </td>\n        {% for timesheet in form.timesheets %}\n            <td class=\"text-center{% if timesheet.vars.data.begin is weekend %} weekend{% endif %}{% if timesheet.vars.data.begin is today %} today{% endif %}\">\n                {{ form_row(timesheet) }}\n            </td>\n        {% endfor %}\n        <td class=\"text-nowrap text-center total qe-totals-row\"></td>\n    </tr>\n{% endblock %}\n\n{% block _team_edit_form_members_entry_user_widget %}\n    {#  this will convert the select box into a hidden field, which are exchangable from an HTML perspective #}\n    {%- set type = 'hidden' -%}\n    {{ block('form_widget_simple') }}\n{% endblock %}\n\n{% block team_member_widget %}\n    <div class=\"row\">\n        <div class=\"col-xs-7\">\n            <div class=\"checkbox\">\n            <button class=\"btn btn-default btn-xs\" onclick=\"jQuery(this).parent().parent().parent().remove();return false;\"><i class=\"{{ 'trash'|icon }}\"></i></button>\n            {% if form.vars.data is not null and form.vars.data.user is not null %}\n                {{ form.vars.data.user.displayName }}\n            {% else %}\n                __USERNAME__\n            {% endif %}\n            </div>\n            {{ form_widget(form.user) }}\n            {{ form_errors(form.user) }}\n        </div>\n        <div class=\"col-xs-5\">\n            {{ form_widget(form.teamlead) }}\n        </div>\n    </div>\n{% endblock team_member_widget %}\n\n{% block daterange_widget %}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <i class=\"far fa-calendar-alt\"></i>\n        </div>\n\n        {% set attr = attr|merge({'data-daterangepickerenable':'on'}) %}\n\n        {{ block('form_widget_simple') }}\n    </div>\n{% endblock daterange_widget %}\n\n{% block duration_widget %}\n    {% if (form.vars.duration_presets is defined and form.vars.duration_presets is not empty) and (form.vars.disabled is same as (false)) %}\n    <div class=\"input-group\">\n        {{ block('form_widget_simple') }}\n        <div class=\"input-group-btn\">\n            <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><span class=\"caret\"></span></button>\n            <ul class=\"dropdown-menu dropdown-menu-right pre-scrollable\">\n                {% for value in form.vars.duration_presets %}\n                    <li class=\"text-center\">\n                        <a href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ value }}').trigger('change');return false;\">{{ value }}</a>\n                    </li>\n                {% endfor %}\n            </ul>\n        </div>\n    </div>\n    {% else %}\n        {{ block('form_widget_simple') }}\n    {% endif %}\n{% endblock duration_widget %}\n\n{% block datetime_widget -%}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <a href=\"#\" onclick=\"if (!jQuery('#{{ id }}').is(':disabled')) { jQuery('#{{ id }}').val(moment().format('{{ attr['data-format'] }}')).change(); }return false;\"><i class=\"{{ 'calendar'|icon }}\"></i></a>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n{%- endblock datetime_widget %}\n\n{% block date_widget -%}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <a href=\"#\" onclick=\"if (!jQuery('#{{ id }}').is(':disabled')) { jQuery('#{{ id }}').val(moment().format('{{ attr['data-format'] }}')).change(); }return false;\"><i class=\"{{ 'calendar'|icon }}\"></i></a>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n{%- endblock date_widget %}\n\n{% block text_widget -%}\n    {% if icon is not empty %}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <i class=\"{{ icon|icon }}\"></i>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n    {% else %}\n        {{ block('form_widget_simple') }}\n    {% endif %}\n{%- endblock text_widget %}\n\n{% block yearpicker_widget -%}\n    <div class=\"btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousYear|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ previousYear|date_short }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_month_name\">\n                {% if show_range %}\n                    {{ year|date_short }} &ndash; {{ nextYear|date_short }}\n                {% else %}\n                    {{ year|date_format('Y') }}\n                {% endif %}\n            </span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextYear|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ nextYear|date_short }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock yearpicker_widget %}\n\n{% block monthpicker_widget -%}\n    <div class=\"btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousMonth|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ previousMonth|month_name(true) }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_month_name\">{{ month|month_name(true) }}</span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextMonth|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ nextMonth|month_name(true) }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock monthpicker_widget %}\n\n{% block weekpicker_widget -%}\n    <div class=\"btn-group week-picker-btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousWeek|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': previousWeek|date_format('W')}) }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_week_number\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': week|date_format('W')}) }}\">\n                {{ week|month_name(true) }}\n                {% if week|date_format('m') != nextWeek|date_format('m') %}\n                    &ndash;\n                    {{ nextWeek|month_name(true) }}\n                {% endif %}\n            </span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextWeek|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': nextWeek|date_format('W')}) }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock weekpicker_widget %}\n", "{% macro projects(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'projects', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro project(project, view, isTable) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'project', view, {'project': project}) %}\n    {% if view == 'index' or view == 'custom' or isTable is not null %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n", "{% macro teams(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'teams', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro team(team, view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'team', view, {'team': team}) %}\n    {% if view == 'index' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n", "{% macro timesheets_team(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_team', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro timesheet_team(timesheet, view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheet_team', view, {'timesheet': timesheet}) %}\n    {% if view == 'index' or view == 'custom' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n\n{% macro timesheets_team_multi_update(view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_team_multi_update', view) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n", "{% macro timesheets(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro timesheet(timesheet, view, options) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheet', view, {'timesheet': timesheet}) %}\n    {% if view == 'index' or view == 'custom' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n\n{% macro timesheets_multi_update(view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_multi_update', view) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\DataFixtures\\UserFixtures;\nuse App\\Entity\\Configuration;\nuse App\\Entity\\User;\nuse App\\Repository\\ConfigurationRepository;\nuse App\\Repository\\UserRepository;\nuse App\\Tests\\KernelTestTrait;\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\nuse Symfony\\Component\\HttpFoundation\\RedirectResponse;\nuse Symfony\\Component\\HttpFoundation\\Test\\Constraint as ResponseConstraint;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * ControllerBaseTest adds some useful functions for writing integration tests.\n */\nabstract class ControllerBaseTest extends WebTestCase\n{\n    use KernelTestTrait;\n\n    public const DEFAULT_LANGUAGE = 'en';\n\n    protected function tearDown(): void\n    {\n        $this->clearConfigCache();\n        parent::tearDown();\n    }\n\n    /**\n     * Using a special container, to access private services as well.\n     *\n     * @param string $service\n     * @return object|null\n     * @see https://symfony.com/blog/new-in-symfony-4-1-simpler-service-testing\n     */\n    protected function getPrivateService(string $service)\n    {\n        return self::$container->get($service);\n    }\n\n    protected function loadUserFromDatabase(string $username)\n    {\n        $container = self::$kernel->getContainer();\n        /** @var UserRepository $userRepository */\n        $userRepository = $container->get('doctrine')->getRepository(User::class);\n        $user = $userRepository->loadUserByUsername($username);\n        self::assertInstanceOf(User::class, $user);\n\n        return $user;\n    }\n\n    protected function setSystemConfiguration(string $name, $value): void\n    {\n        $repository = static::$kernel->getContainer()->get(ConfigurationRepository::class);\n\n        $entity = $repository->findOneBy(['name' => $name]);\n        if ($entity === null) {\n            $entity = new Configuration();\n            $entity->setName($name);\n        }\n        $entity->setValue($value);\n        $repository->saveConfiguration($entity);\n        $this->clearConfigCache();\n    }\n\n    protected function clearConfigCache()\n    {\n        /** @var ConfigurationRepository $repository */\n        $repository = static::$kernel->getContainer()->get(ConfigurationRepository::class);\n        $repository->clearCache();\n    }\n\n    protected function getClientForAuthenticatedUser(string $role = User::ROLE_USER): HttpKernelBrowser\n    {\n        switch ($role) {\n            case User::ROLE_SUPER_ADMIN:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_SUPER_ADMIN,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_ADMIN:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_ADMIN,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_TEAMLEAD:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_TEAMLEAD,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_USER:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_USER,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            default:\n                $client = null;\n                break;\n        }\n\n        return $client;\n    }\n\n    protected function createUrl(string $url): string\n    {\n        return '/' . self::DEFAULT_LANGUAGE . '/' . ltrim($url, '/');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     * @param string $method\n     * @param array $parameters\n     * @param string $content\n     * @return \\Symfony\\Component\\DomCrawler\\Crawler\n     */\n    protected function request(HttpKernelBrowser $client, string $url, $method = 'GET', array $parameters = [], string $content = null)\n    {\n        return $client->request($method, $this->createUrl($url), $parameters, [], [], $content);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertRequestIsSecured(HttpKernelBrowser $client, string $url, ?string $method = 'GET')\n    {\n        $this->request($client, $url, $method);\n\n        /** @var RedirectResponse $response */\n        $response = $client->getResponse();\n        self::assertInstanceOf(RedirectResponse::class, $response);\n\n        self::assertTrue(\n            $response->isRedirect(),\n            sprintf('The secure URL %s is not protected.', $url)\n        );\n\n        self::assertStringEndsWith(\n            '/login',\n            $response->getTargetUrl(),\n            sprintf('The secure URL %s does not redirect to the login form.', $url)\n        );\n    }\n\n    protected function assertSuccessResponse(HttpKernelBrowser $client, string $message = '')\n    {\n        $response = $client->getResponse();\n        self::assertThat($response, new ResponseConstraint\\ResponseIsSuccessful(), 'Response is not successful, got code: ' . $response->getStatusCode());\n    }\n\n    /**\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertUrlIsSecured(string $url, $method = 'GET')\n    {\n        $client = self::createClient();\n        $this->assertRequestIsSecured($client, $url, $method);\n    }\n\n    /**\n     * @param string $role\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertUrlIsSecuredForRole(string $role, string $url, string $method = 'GET')\n    {\n        $client = $this->getClientForAuthenticatedUser($role);\n        $client->request($method, $this->createUrl($url));\n        self::assertFalse(\n            $client->getResponse()->isSuccessful(),\n            sprintf('The secure URL %s is not protected for role %s', $url, $role)\n        );\n        $this->assertAccessDenied($client);\n    }\n\n    protected function assertAccessDenied(HttpKernelBrowser $client)\n    {\n        self::assertFalse(\n            $client->getResponse()->isSuccessful(),\n            'Access is not denied for URL: ' . $client->getRequest()->getUri()\n        );\n        self::assertStringContainsString(\n            'Symfony\\Component\\Security\\Core\\Exception\\AccessDeniedException',\n            $client->getResponse()->getContent(),\n            'Could not find AccessDeniedException in response'\n        );\n    }\n\n    protected function assertAccessIsGranted(HttpKernelBrowser $client, string $url, string $method = 'GET', array $parameters = [])\n    {\n        $this->request($client, $url, $method, $parameters);\n        self::assertTrue($client->getResponse()->isSuccessful());\n    }\n\n    protected function assertRouteNotFound(HttpKernelBrowser $client)\n    {\n        self::assertFalse($client->getResponse()->isSuccessful());\n        self::assertEquals(404, $client->getResponse()->getStatusCode());\n    }\n\n    protected function assertMainContentClass(HttpKernelBrowser $client, string $classname)\n    {\n        self::assertStringContainsString('<section class=\"content ' . $classname . '\">', $client->getResponse()->getContent());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected function assertHasDataTable(HttpKernelBrowser $client)\n    {\n        self::assertStringContainsString('<table class=\"table table-hover dataTable\" role=\"grid\" data-reload-event=\"', $client->getResponse()->getContent());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected static function assertHasProgressbar(HttpKernelBrowser $client)\n    {\n        $content = $client->getResponse()->getContent();\n        self::assertStringContainsString('<div class=\"progress-bar progress-bar-', $content);\n        self::assertStringContainsString('\" role=\"progressbar\" aria-valuenow=\"', $content);\n        self::assertStringContainsString('\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: ', $content);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $class\n     * @param int $count\n     */\n    protected function assertDataTableRowCount(HttpKernelBrowser $client, string $class, int $count)\n    {\n        $node = $client->getCrawler()->filter('section.content div.' . $class . ' table.dataTable tbody tr:not(.summary)');\n        self::assertEquals($count, $node->count());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param array $buttons\n     */\n    protected function assertPageActions(HttpKernelBrowser $client, array $buttons)\n    {\n        $node = $client->getCrawler()->filter('section.content-header div.breadcrumb div.box-tools div.btn-group a');\n\n        /** @var \\DOMElement $element */\n        foreach ($node->getIterator() as $element) {\n            $expectedClass = str_replace('btn btn-default btn-', '', $element->getAttribute('class'));\n            self::assertArrayHasKey($expectedClass, $buttons);\n            $expectedUrl = $buttons[$expectedClass];\n            self::assertEquals($expectedUrl, $element->getAttribute('href'));\n        }\n\n        self::assertEquals(\\count($buttons), $node->count(), 'Invalid amount of page actions');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client the client to use\n     * @param string $url the URL of the page displaying the initial form to submit\n     * @param string $formSelector a selector to find the form to test\n     * @param array $formData values to fill in the form\n     * @param array $fieldNames array of form-fields that should fail\n     * @param bool $disableValidation whether the form should validate before submitting or not\n     */\n    protected function assertHasValidationError(HttpKernelBrowser $client, $url, $formSelector, array $formData, array $fieldNames, $disableValidation = true)\n    {\n        $crawler = $client->request('GET', $this->createUrl($url));\n        $form = $crawler->filter($formSelector)->form();\n        if ($disableValidation) {\n            $form->disableValidation();\n        }\n        $result = $client->submit($form, $formData);\n\n        $submittedForm = $result->filter($formSelector);\n        $validationErrors = $submittedForm->filter('li.text-danger');\n\n        self::assertEquals(\n            \\count($fieldNames),\n            \\count($validationErrors),\n            sprintf('Expected %s validation errors, found %s', \\count($fieldNames), \\count($validationErrors))\n        );\n\n        foreach ($fieldNames as $name) {\n            $field = $submittedForm->filter($name);\n            self::assertNotNull($field, 'Could not find form field: ' . $name);\n            $list = $field->nextAll();\n            self::assertNotNull($list, 'Form field has no validation message: ' . $name);\n\n            $validation = $list->filter('li.text-danger');\n            if (\\count($validation) < 1) {\n                // decorated form fields with icon have a different html structure, see kimai-theme.html.twig\n                /** @var \\DOMElement $listMsg */\n                $listMsg = $field->parents()->getNode(1);\n                $classes = $listMsg->getAttribute('class');\n                self::assertStringContainsString('has-error', $classes, 'Form field has no validation message: ' . $name);\n            }\n        }\n    }\n\n    /**\n     * @param string $role the USER role to use for the request\n     * @param string $url the URL of the page displaying the initial form to submit\n     * @param string $formSelector a selector to find the form to test\n     * @param array $formData values to fill in the form\n     * @param array $fieldNames array of form-fields that should fail\n     * @param bool $disableValidation whether the form should validate before submitting or not\n     */\n    protected function assertFormHasValidationError($role, $url, $formSelector, array $formData, array $fieldNames, $disableValidation = true)\n    {\n        $client = $this->getClientForAuthenticatedUser($role);\n        $this->assertHasValidationError($client, $url, $formSelector, $formData, $fieldNames, $disableValidation);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected function assertHasNoEntriesWithFilter(HttpKernelBrowser $client)\n    {\n        $this->assertCalloutWidgetWithMessage($client, 'No entries were found based on your selected filters.');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $message\n     */\n    protected function assertCalloutWidgetWithMessage(HttpKernelBrowser $client, string $message)\n    {\n        $node = $client->getCrawler()->filter('div.callout.callout-warning.lead');\n        self::assertStringContainsString($message, $node->text(null, true));\n    }\n\n    protected function assertHasFlashDeleteSuccess(HttpKernelBrowser $client)\n    {\n        $this->assertHasFlashSuccess($client, 'Entry was deleted');\n    }\n\n    protected function assertHasFlashSaveSuccess(HttpKernelBrowser $client)\n    {\n        $this->assertHasFlashSuccess($client, 'Saved changes');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string|null $message\n     */\n    protected function assertHasFlashSuccess(HttpKernelBrowser $client, string $message = null)\n    {\n        $this->assertHasFlashMessage($client, 'success', $message);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string|null $message\n     */\n    protected function assertHasFlashError(HttpKernelBrowser $client, string $message = null)\n    {\n        $this->assertHasFlashMessage($client, 'error', $message);\n    }\n\n    private function assertHasFlashMessage(HttpKernelBrowser $client, string $type, string $message = null)\n    {\n        $content = $client->getResponse()->getContent();\n        self::assertStringContainsString('ALERT.' . $type . '(\\'', $content, 'Could not find flash ' . $type . ' message');\n        if (null !== $message) {\n            // this is a lazy workaround, the templates use the javascript escape filter: |e('js')\n            // if you ever want to test more complex strings, this logic has to be enhanced\n            $message = str_replace([' ', ':'], ['\\u0020', '\\u003A'], $message);\n            self::assertStringContainsString($message, $content);\n        }\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     */\n    protected function assertIsRedirect(HttpKernelBrowser $client, $url = null)\n    {\n        self::assertResponseRedirects();\n\n        if (null === $url) {\n            return;\n        }\n\n        $this->assertRedirectUrl($client, $url);\n    }\n\n    protected function assertRedirectUrl(HttpKernelBrowser $client, $url = null, $endsWith = true)\n    {\n        self::assertTrue($client->getResponse()->headers->has('Location'), 'Could not find \"Location\" header');\n        $location = $client->getResponse()->headers->get('Location');\n\n        if ($endsWith) {\n            self::assertStringEndsWith($url, $location, 'Redirect URL does not match');\n        } else {\n            self::assertStringContainsString($url, $location, 'Redirect URL does not match');\n        }\n    }\n\n    protected function assertExcelExportResponse(HttpKernelBrowser $client, string $prefix)\n    {\n        /** @var BinaryFileResponse $response */\n        $response = $client->getResponse();\n        self::assertInstanceOf(BinaryFileResponse::class, $response);\n\n        self::assertEquals('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', $response->headers->get('Content-Type'));\n        self::assertStringContainsString('attachment; filename=' . $prefix, $response->headers->get('Content-Disposition'));\n        self::assertStringContainsString('.xlsx', $response->headers->get('Content-Disposition'));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\User;\n\n/**\n * @group integration\n */\nclass DoctorControllerTest extends ControllerBaseTest\n{\n    public function testDoctorIsSecure()\n    {\n        $this->assertUrlIsSecured('/doctor');\n    }\n\n    public function testDoctorIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_ADMIN, '/doctor');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n        $this->assertAccessIsGranted($client, '/doctor');\n\n        $result = $client->getCrawler()->filter('.content .box-header');\n        self::assertCount(6, $result);\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Activity;\nuse App\\Entity\\ActivityMeta;\nuse App\\Entity\\ActivityRate;\nuse App\\Entity\\Project;\nuse App\\Entity\\ProjectComment;\nuse App\\Entity\\ProjectMeta;\nuse App\\Entity\\ProjectRate;\nuse App\\Entity\\Team;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\User;\nuse App\\Tests\\DataFixtures\\ActivityFixtures;\nuse App\\Tests\\DataFixtures\\ProjectFixtures;\nuse App\\Tests\\DataFixtures\\TeamFixtures;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Tests\\Mocks\\ProjectTestMetaFieldSubscriberMock;\nuse Doctrine\\ORM\\EntityManager;\nuse Symfony\\Component\\DomCrawler\\Field\\ChoiceFormField;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * @group integration\n */\nclass ProjectControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/admin/project/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/admin/project/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/admin/project/');\n        $this->assertHasDataTable($client);\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Project $project) {\n            $project->setVisible(true);\n            $project->setComment('I am a foobar with tralalalala some more content');\n            $project->setMetaField((new ProjectMeta())->setName('location')->setValue('homeoffice'));\n            $project->setMetaField((new ProjectMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'feature:timetracking foo',\n            'visibility' => 1,\n            'customers' => [1],\n            'pageSize' => 50,\n            'page' => 1,\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_project_admin', 5);\n    }\n\n    public function testExportIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/admin/project/export');\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/admin/project/export');\n        $this->assertExcelExportResponse($client, 'kimai-projects_');\n    }\n\n    public function testExportActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Project $project) {\n            $project->setVisible(true);\n            $project->setComment('I am a foobar with tralalalala some more content');\n            $project->setMetaField((new ProjectMeta())->setName('location')->setValue('homeoffice'));\n            $project->setMetaField((new ProjectMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $form->getFormNode()->setAttribute('action', $this->createUrl('/admin/project/export'));\n        $client->submit($form, [\n            'searchTerm' => 'feature:timetracking foo',\n            'visibility' => 1,\n            'customers' => [1],\n            'pageSize' => 50,\n            'page' => 1,\n        ]);\n\n        $this->assertExcelExportResponse($client, 'kimai-projects_');\n    }\n\n    public function testDetailsAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $project = $em->getRepository(Project::class)->find(1);\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setProjects([$project]);\n        $fixture->setUser($this->getUserByRole(User::ROLE_ADMIN));\n        $this->importFixture($fixture);\n\n        $project = $em->getRepository(Project::class)->find(1);\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(6); // to trigger a second page\n        $fixture->setProjects([$project]);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        self::assertHasProgressbar($client);\n\n        $node = $client->getCrawler()->filter('div.box#project_details_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#activity_list_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#time_budget_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#budget_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#team_listing_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#comments_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#team_listing_box a.btn.btn-default');\n        self::assertEquals(2, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n    }\n\n    public function testAddRateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAddRate($client, 123.45, 1);\n    }\n\n    protected function assertAddRate(HttpKernelBrowser $client, $rate, $projectId)\n    {\n        $this->assertAccessIsGranted($client, '/admin/project/' . $projectId . '/rate');\n        $form = $client->getCrawler()->filter('form[name=project_rate_form]')->form();\n        $client->submit($form, [\n            'project_rate_form' => [\n                'user' => null,\n                'rate' => $rate,\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/' . $projectId . '/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box table.dataTable tbody tr:not(.summary)');\n        self::assertEquals(1, $node->count());\n        self::assertStringContainsString($rate, $node->text(null, true));\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n        $project = $em->find(Project::class, 1);\n        $project->setMetaField((new ProjectMeta())->setName('foo')->setValue('bar'));\n        $project->setEnd(new \\DateTime());\n        $em->persist($project);\n        $team = new Team();\n        $team->addTeamlead($this->getUserByRole(User::ROLE_ADMIN));\n        $team->addProject($project);\n        $team->setName('project 1');\n        $em->persist($team);\n        $rate = new ProjectRate();\n        $rate->setProject($project);\n        $rate->setRate(123.45);\n        $em->persist($rate);\n        $activity = new Activity();\n        $activity->setName('blub');\n        $activity->setProject($project);\n        $activity->setMetaField((new ActivityMeta())->setName('blub')->setValue('blab'));\n        $em->persist($activity);\n        $rate = new ActivityRate();\n        $rate->setActivity($activity);\n        $rate->setRate(123.45);\n        $em->persist($rate);\n        $em->flush();\n\n        $this->request($client, '/admin/project/1/duplicate');\n        $this->assertIsRedirect($client, '/details');\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box table.dataTable tbody tr:not(.summary)');\n        self::assertEquals(1, $node->count());\n        self::assertStringContainsString('123.45', $node->text(null, true));\n    }\n\n    public function testAddCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'A beautiful and long comment **with some** markdown formatting',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('<p>A beautiful and long comment <strong>with some</strong> markdown formatting</p>', $node->html());\n    }\n\n    public function testDeleteCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'Foo bar blub',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('Foo bar blub', $node->html());\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.confirmation-link');\n\n        $comments = $this->getEntityManager()->getRepository(ProjectComment::class)->findAll();\n        $id = $comments[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('project.delete_comment');\n\n        self::assertEquals($this->createUrl('/admin/project/' . $id . '/comment_delete/' . $token), $node->attr('href'));\n        $this->request($client, '/admin/project/' . $id . '/comment_delete/' . $token);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body');\n        self::assertStringContainsString('There were no comments posted yet', $node->html());\n    }\n\n    public function testPinCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'Foo bar blub',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('Foo bar blub', $node->html());\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.btn.active');\n        self::assertEquals(0, $node->count());\n\n        $comments = $this->getEntityManager()->getRepository(ProjectComment::class)->findAll();\n        $id = $comments[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('project.pin_comment');\n\n        $this->request($client, '/admin/project/' . $id . '/comment_pin/' . $token);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.btn.active');\n        self::assertEquals(1, $node->count());\n        self::assertEquals($this->createUrl('/admin/project/' . $id . '/comment_pin/' . $token), $node->attr('href'));\n    }\n\n    public function testCreateDefaultTeamAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-body');\n        self::assertStringContainsString('Visible to everyone, as no team was assigned yet.', $node->text(null, true));\n\n        $this->request($client, '/admin/project/1/create_team');\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-title');\n        self::assertStringContainsString('Only visible to the following teams and all admins.', $node->text(null, true));\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-body table tbody tr');\n        self::assertEquals(1, $node->count());\n\n        // creating the default team a second time fails, as the name already exists\n        $this->request($client, '/admin/project/1/create_team');\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $this->assertHasFlashError($client, 'Changes could not be saved: Team already existing');\n    }\n\n    public function testActivitiesAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/activities/1');\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools ul.pagination li');\n        self::assertEquals(0, $node->count());\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools a.modal-ajax-form.open-edit');\n        self::assertEquals(1, $node->count());\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n        $project = $em->getRepository(Project::class)->find(1);\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(9); // to trigger a second page (every third activity is hidden)\n        $fixture->setProjects([$project]);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/activities/1');\n\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools ul.pagination li');\n        self::assertEquals(4, $node->count());\n\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-body table tbody tr');\n        self::assertEquals(5, $node->count());\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/create');\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $client->submit($form, [\n            'project_edit_form' => [\n                'name' => 'Test 2',\n                'customer' => 1,\n            ]\n        ]);\n        $this->assertIsRedirect($client, '/details');\n        $client->followRedirect();\n        $this->assertHasFlashSuccess($client);\n    }\n\n    public function testCreateActionShowsMetaFields()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        static::$kernel->getContainer()->get('event_dispatcher')->addSubscriber(new ProjectTestMetaFieldSubscriberMock());\n        $this->assertAccessIsGranted($client, '/admin/project/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertTrue($form->has('project_edit_form[metaFields][0][value]'));\n        $this->assertFalse($form->has('project_edit_form[metaFields][1][value]'));\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/edit');\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertEquals('Test', $form->get('project_edit_form[name]')->getValue());\n        $client->submit($form, [\n            'project_edit_form' => ['name' => 'Test 2']\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $this->request($client, '/admin/project/1/edit');\n        $editForm = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertEquals('Test 2', $editForm->get('project_edit_form[name]')->getValue());\n    }\n\n    public function testTeamPermissionAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n\n        /** @var Project $project */\n        $project = $em->getRepository(Project::class)->find(1);\n        self::assertEquals(0, $project->getTeams()->count());\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/permissions');\n        $form = $client->getCrawler()->filter('form[name=project_team_permission_form]')->form();\n        /** @var ChoiceFormField $team1 */\n        $team1 = $form->get('project_team_permission_form[teams][0]');\n        $team1->tick();\n        /** @var ChoiceFormField $team2 */\n        $team2 = $form->get('project_team_permission_form[teams][1]');\n        $team2->tick();\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n\n        /** @var Project $project */\n        $project = $em->getRepository(Project::class)->find(1);\n        self::assertEquals(2, $project->getTeams()->count());\n    }\n\n    public function testDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(1);\n        /** @var Project[] $projects */\n        $projects = $this->importFixture($fixture);\n        $id = $projects[0]->getId();\n\n        $this->request($client, '/admin/project/' . $id . '/edit');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->request($client, '/admin/project/' . $id . '/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/' . $id . '/delete'), $form->getUri());\n        $client->submit($form);\n\n        $client->followRedirect();\n        $this->assertHasDataTable($client);\n        $this->assertHasFlashSuccess($client);\n\n        $this->request($client, '/admin/project/' . $id . '/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    public function testDeleteActionWithTimesheetEntries()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setAmount(10);\n        $this->importFixture($fixture);\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals(1, $entry->getActivity()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/1/delete'), $form->getUri());\n        $client->submit($form);\n\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/'));\n        $client->followRedirect();\n        $this->assertHasFlashDeleteSuccess($client);\n        $this->assertHasNoEntriesWithFilter($client);\n\n        $em->clear();\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(0, \\count($timesheets));\n\n        $this->request($client, '/admin/project/1/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    public function testDeleteActionWithTimesheetEntriesAndReplacement()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setAmount(10);\n        $this->importFixture($fixture);\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(1)->setIsVisible(true);\n        $projects = $this->importFixture($fixture);\n        $id = $projects[0]->getId();\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals(1, $entry->getProject()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/1/delete'), $form->getUri());\n        $client->submit($form, [\n            'form' => [\n                'project' => $id\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/'));\n        $client->followRedirect();\n        $this->assertHasDataTable($client);\n        $this->assertHasFlashSuccess($client);\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals($id, $entry->getProject()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    /**\n     * @dataProvider getValidationTestData\n     */\n    public function testValidationForCreateAction(array $formData, array $validationFields)\n    {\n        $this->assertFormHasValidationError(\n            User::ROLE_ADMIN,\n            '/admin/project/create',\n            'form[name=project_edit_form]',\n            $formData,\n            $validationFields\n        );\n    }\n\n    public function getValidationTestData()\n    {\n        return [\n            [\n                [\n                    'project_edit_form' => [\n                        'name' => '',\n                        'customer' => 0,\n                    ]\n                ],\n                [\n                    '#project_edit_form_name',\n                    '#project_edit_form_customer',\n                ]\n            ],\n        ];\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Team;\nuse App\\Entity\\User;\nuse App\\Tests\\DataFixtures\\TeamFixtures;\nuse Doctrine\\ORM\\EntityManager;\nuse Symfony\\Component\\DomCrawler\\Field\\ChoiceFormField;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * @group integration\n */\nclass TeamControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/admin/teams/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_TEAMLEAD, '/admin/teams/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(5);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/');\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'create' => $this->createUrl('/admin/teams/create'),\n            'help' => 'https://www.kimai.org/documentation/teams.html'\n        ]);\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_admin_teams', 6);\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Team $team) {\n            $team->setName($team->getName() . '- fantastic team with foooo bar magic');\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'foo',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_admin_teams', 5);\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/teams/create');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n\n        $this->assertEquals('', $form->get('team_edit_form[name]')->getValue());\n\n        $values = $form->getPhpValues();\n        $values['team_edit_form']['name'] = 'Test Team' . uniqid();\n        $values['team_edit_form']['members'][0]['user'] = 5;\n        $values['team_edit_form']['members'][0]['teamlead'] = 1;\n        $client->request($form->getMethod(), $form->getUri(), $values, $form->getPhpFiles());\n\n        $this->assertIsRedirect($client, '/edit');\n        $client->followRedirect();\n        $this->assertHasFlashSuccess($client);\n        $this->assertHasCustomerAndProjectPermissionBoxes($client);\n    }\n\n    protected function assertHasCustomerAndProjectPermissionBoxes(HttpKernelBrowser $client)\n    {\n        $content = $client->getResponse()->getContent();\n        $this->assertStringContainsString('Grant access to customers', $content);\n        $this->assertStringContainsString('Grant access to projects', $content);\n        $this->assertEquals(1, $client->getCrawler()->filter('form[name=team_customer_form]')->count());\n        $this->assertEquals(1, $client->getCrawler()->filter('form[name=team_project_form]')->count());\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n\n        $client->submit($form, [\n            'team_edit_form' => [\n                'name' => 'Test Team 2'\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n        $client->followRedirect();\n        $editForm = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $this->assertEquals('Test Team 2', $editForm->get('team_edit_form[name]')->getValue());\n    }\n\n    public function testEditMemberAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit_member');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $client->submit($form, [\n            'team_edit_form' => [\n                'name' => 'Test Team 2'\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n        $client->followRedirect();\n        $editForm = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $this->assertEquals('Test Team 2', $editForm->get('team_edit_form[name]')->getValue());\n    }\n\n    public function testEditCustomerAccessAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(0, \\count($team->getCustomers()));\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_customer_form]')->form();\n\n        /** @var ChoiceFormField $customer */\n        $customer = $form->get('team_customer_form[customers][0]');\n        $customer->tick();\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(1, \\count($team->getCustomers()));\n    }\n\n    public function testEditProjectAccessAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(0, \\count($team->getProjects()));\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_project_form]')->form();\n\n        /** @var ChoiceFormField $customer */\n        $customer = $form->get('team_project_form[projects]');\n        $customer->select([1]);\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(1, \\count($team->getProjects()));\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/admin/teams/1/duplicate');\n        $this->assertIsRedirect($client, '/edit');\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('#team_edit_form_name');\n        self::assertEquals(1, $node->count());\n        self::assertEquals('Test team [COPY]', $node->attr('value'));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Activity;\nuse App\\Entity\\Configuration;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\TimesheetMeta;\nuse App\\Entity\\User;\nuse App\\Form\\Type\\DateRangeType;\nuse App\\Repository\\ConfigurationRepository;\nuse App\\Tests\\DataFixtures\\ActivityFixtures;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Tests\\Mocks\\TimesheetTestMetaFieldSubscriberMock;\nuse App\\Timesheet\\DateTimeFactory;\n\n/**\n * @group integration\n */\nclass TimesheetControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/timesheet/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        // there are no records by default in the test database\n        $this->assertHasNoEntriesWithFilter($client);\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'visibility' => '#',\n            'download toolbar-action modal-ajax-form' => $this->createUrl('/timesheet/export/'),\n            'create modal-ajax-form' => $this->createUrl('/timesheet/create'),\n            'help' => 'https://www.kimai.org/documentation/timesheet.html'\n        ]);\n    }\n\n    public function testIndexActionWithQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n        $start = new \\DateTime('first day of this month');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(2);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'state' => 1,\n            'pageSize' => 25,\n            'daterange' => $dateRange,\n            'customers' => [1],\n            'projects' => [1],\n            'activities' => [1],\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet', 7);\n\n        // make sure the recording css class exist on tr for targeting running record rows\n        $node = $client->getCrawler()->filter('section.content div.datatable_timesheet table.dataTable tbody tr.recording');\n        self::assertEquals(2, $node->count());\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n        $start = new \\DateTime('first day of this month');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('I am a foobar with tralalalala some more content');\n            $timesheet->setMetaField((new TimesheetMeta())->setName('location')->setValue('homeoffice'));\n            $timesheet->setMetaField((new TimesheetMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'location:homeoffice foobar',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet', 5);\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/export/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = (new \\DateTime('-10 days'))->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime())->format('Y-m-d');\n\n        $client->submitForm('export-btn-print', [\n            'export' => [\n                'state' => 1,\n                'daterange' => $dateRange,\n                'customers' => [],\n            ]\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $node = $client->getCrawler()->filter('body');\n        /** @var \\DOMElement $body */\n        $body = $node->getNode(0);\n        $this->assertEquals('invoice_print', $body->getAttribute('class'));\n\n        $result = $node->filter('section.invoice table.table tbody tr');\n        $this->assertEquals(5, \\count($result));\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'Testing is fun!',\n                // begin is always pre-filled with the current datetime\n                // 'begin' => null,\n                // end must be allowed to be null, to start a record\n                // there was a bug with end begin required, so we manually set this field to be empty\n                'end' => null,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertNull($timesheet->getEnd());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(0, $timesheet->getRate());\n        $this->assertNull($timesheet->getHourlyRate());\n        $this->assertNull($timesheet->getFixedRate());\n    }\n\n    /**\n     * @dataProvider getTestDataForDurationValues\n     */\n    public function testCreateActionWithDurationValues($begin, $end, $duration, $expectedDuration, $expectedEnd)\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'Testing is fun!',\n                'begin' => $begin,\n                'end' => $end,\n                'duration' => $duration,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals($expectedDuration, $timesheet->getDuration());\n        $this->assertEquals($expectedEnd, $timesheet->getEnd()->format('Y-m-d H:i:s'));\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n    }\n\n    public function getTestDataForDurationValues()\n    {\n        // duration is ignored, because end is set and the duration might come from a rounding rule (by default seconds are rounded down with 1)\n        yield ['2018-12-31 00:00:00', '2018-12-31 02:10:10', '01:00', 7800, '2018-12-31 02:10:00'];\n        yield ['2018-12-31 00:00:00', '2018-12-31 02:09:59', '01:00', 7740, '2018-12-31 02:09:00'];\n        // if seconds are given, they are first rounded up (default for duration rounding is 1)\n        yield ['2018-12-31 00:00:00', null, '01:00', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '01:00:10', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '1h', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1h10m', 4200, '2018-12-31 01:10:00'];\n        yield ['2018-12-31 00:00:00', null, '1h10s', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '60m', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '60M1s', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '3600s', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '59m60s', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1,0', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1.0', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1.5', 5400, '2018-12-31 01:30:00'];\n        yield ['2018-12-31 00:00:00', null, '1,25', 4500, '2018-12-31 01:15:00'];\n    }\n\n    public function testCreateActionShowsMetaFields()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        static::$kernel->getContainer()->get('event_dispatcher')->addSubscriber(new TimesheetTestMetaFieldSubscriberMock());\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $this->assertTrue($form->has('timesheet_edit_form[metaFields][0][value]'));\n        $this->assertFalse($form->has('timesheet_edit_form[metaFields][1][value]'));\n    }\n\n    public function testCreateActionDoesNotShowRateFieldsForUser()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $this->assertFalse($form->has('hourlyRate'));\n        $this->assertFalse($form->has('fixedRate'));\n    }\n\n    public function testCreateActionWithFromAndToValues()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A00%3A00&to=2018-08-02T20%3A30%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(50, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T20:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T20:30:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n    }\n\n    public function testCreateActionWithFromAndToValuesTwice()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A00%3A00&to=2018-08-02T20%3A30%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(50, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T20:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T20:30:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n\n        // create a second entry that is overlapping\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A02%3A00&to=2018-08-02T20%3A20%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n    }\n\n    public function testCreateActionWithFromAndToValuesTwiceFailsOnOverlappingRecord()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/system-config/');\n\n        $form = $client->getCrawler()->filter('form[name=system_configuration_form_timesheet]')->form();\n        $client->submit($form, [\n            'system_configuration_form_timesheet' => [\n                'configuration' => [\n                    ['name' => 'timesheet.mode', 'value' => 'default'],\n                    ['name' => 'timesheet.active_entries.default_begin', 'value' => '08:00'],\n                    ['name' => 'timesheet.rules.allow_future_times', 'value' => true],\n                    ['name' => 'timesheet.rules.allow_overlapping_records', 'value' => false],\n                    ['name' => 'timesheet.rules.allow_overbooking_budget', 'value' => true],\n                    ['name' => 'timesheet.active_entries.hard_limit', 'value' => 1],\n                ]\n            ]\n        ]);\n\n        $begin = new \\DateTime('2018-08-02T20:00:00');\n        $end = new \\DateTime('2018-08-02T20:30:00');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setCallback(function (Timesheet $timesheet) use ($begin, $end) {\n            $timesheet->setBegin($begin);\n            $timesheet->setEnd($end);\n        });\n        $fixture->setAmount(1);\n        $fixture->setUser($this->getUserByRole(User::ROLE_SUPER_ADMIN));\n        $this->importFixture($fixture);\n\n        // create a second entry that is overlapping - should fail due to the changed config above\n        $this->assertHasValidationError(\n            $client,\n            '/timesheet/create?from=2018-08-02T20%3A02%3A00&to=2018-08-02T20%3A20%3A00',\n            'form[name=timesheet_edit_form]',\n            [\n                'timesheet_edit_form' => [\n                    //'hourlyRate' => 100,\n                    'project' => 1,\n                    'activity' => 1,\n                ]\n            ],\n            ['#timesheet_edit_form_begin']\n        );\n    }\n\n    public function testCreateActionWithOverbookedActivity()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(1);\n        $fixture->setIsGlobal(true);\n        $fixture->setIsVisible(true);\n        $fixture->setCallback(function (Activity $activity) {\n            $activity->setBudget(1000);\n            $activity->setTimeBudget(3600);\n        });\n        $activities = $this->importFixture($fixture);\n        /** @var Activity $activity */\n        $activity = $activities[0];\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setActivities([$activity]);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        /** @var ConfigurationRepository $repository */\n        $repository = $this->getEntityManager()->getRepository(Configuration::class);\n        $config = new Configuration();\n        $config->setName('timesheet.rules.allow_overbooking_budget');\n        $config->setValue(false);\n        $repository->saveConfiguration($config);\n\n        $this->assertHasValidationError(\n            $client,\n            '/timesheet/' . $id . '/edit',\n            'form[name=timesheet_edit_form]',\n            [\n                'timesheet_edit_form' => [\n                    'hourlyRate' => 100,\n                    'begin' => '2020-02-18 01:00',\n                    'end' => '2020-02-18 02:10',\n                    'duration' => '01:10',\n                    'project' => 1,\n                    'activity' => $activity->getId(),\n                ]\n            ],\n            ['#timesheet_edit_form_activity']\n        );\n    }\n\n    public function testCreateActionWithBeginAndEndAndTagValues()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?begin=2018-08-02&end=2018-08-02&tags=one,two,three');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(800, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T10:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T18:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n\n        $this->assertEquals(['one', 'two', 'three'], $timesheet->getTagsAsArray());\n    }\n\n    public function testCreateActionWithDescription()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $this->request($client, '/timesheet/create?description=Lorem%20Ipsum');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertEquals('Lorem Ipsum', $timesheet->getDescription());\n    }\n\n    public function testCreateActionWithDescriptionHtmlInjection()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $this->request($client, '/timesheet/create?description=Some text\"><bold>HelloWorld<%2Fbold>');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertEquals('Some text\"><bold>HelloWorld</bold>', $timesheet->getDescription());\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setFixedStartDate(new \\DateTime('-2 hours'));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        $this->assertStringContainsString(\n            'href=\"https://www.kimai.org/documentation/timesheet.html\"',\n            $response->getContent(),\n            'Could not find link to documentation'\n        );\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'foo-bar',\n                'tags' => 'foo,bar, testing, hello world,,',\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSaveSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($id);\n        $this->assertEquals('foo-bar', $timesheet->getDescription());\n    }\n\n    public function testMultiDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/timesheet/multi-delete'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/timesheet/multi-delete'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n\n        $em->clear();\n        self::assertEquals(0, $em->getRepository(Timesheet::class)->count([]));\n    }\n\n    public function testMultiUpdate()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $user = $this->getUserByRole(User::ROLE_SUPER_ADMIN);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/timesheet/multi-update'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            self::assertEmpty($timesheet->getTags());\n            self::assertFalse($timesheet->isExported());\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/timesheet/multi-update'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_update]')->form();\n        $client->submit($form, [\n            'timesheet_multi_update' => [\n                'exported' => true,\n                'tags' => 'test, foo-bar',\n                'fixedRate' => 13,\n            ]\n        ]);\n\n        $em->clear();\n\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            self::assertCount(2, $timesheet->getTags());\n            self::assertTrue($timesheet->isExported());\n            self::assertEquals(13, $timesheet->getFixedRate());\n        }\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $this->request($client, '/timesheet/' . $newId . '/duplicate');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, $form->getPhpValues());\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($newId++);\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertEquals('Europe/London', $timesheet->getBegin()->getTimezone()->getName());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(2016, $timesheet->getRate());\n        $this->assertEquals(127, $timesheet->getHourlyRate());\n        $this->assertEquals(2016, $timesheet->getFixedRate());\n        $this->assertEquals(2016, $timesheet->getRate());\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\TimesheetMeta;\nuse App\\Entity\\User;\nuse App\\Form\\Type\\DateRangeType;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Timesheet\\DateTimeFactory;\nuse App\\Timesheet\\Util;\n\n/**\n * @group integration\n */\nclass TimesheetTeamControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/team/timesheet/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/team/timesheet/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        // there are no records by default in the test database\n        $this->assertHasNoEntriesWithFilter($client);\n\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'visibility' => '#',\n            'download toolbar-action modal-ajax-form' => $this->createUrl('/team/timesheet/export/'),\n            'create-ts modal-ajax-form' => $this->createUrl('/team/timesheet/create'),\n            'create-ts-mu modal-ajax-form' => $this->createUrl('/team/timesheet/create_mu'),\n            'help' => 'https://www.kimai.org/documentation/timesheet.html'\n        ]);\n    }\n\n    public function testIndexActionWithQuery()\n    {\n        // Switching the user is not allowed for TEAMLEADs but ONLLY for admin and super-admins\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $start = new \\DateTime('first day of this month');\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setAmountRunning(3);\n        $fixture->setUser($user);\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'state' => 1,\n            'users' => [$user->getId()],\n            'pageSize' => 25,\n            'daterange' => $dateRange,\n            'customers' => [],\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet_admin', 13);\n\n        // make sure the recording css class exist on tr for targeting running record rows\n        $node = $client->getCrawler()->filter('section.content div.datatable_timesheet_admin table.dataTable tbody tr.recording');\n        self::assertEquals(3, $node->count());\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $start = new \\DateTime('first day of this month');\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('I am a foobar with tralalalala some more content');\n            $timesheet->setMetaField((new TimesheetMeta())->setName('location')->setValue('homeoffice'));\n            $timesheet->setMetaField((new TimesheetMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'location:homeoffice foobar',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet_admin', 5);\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(7);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(3);\n        $fixture->setUser($this->getUserByRole(User::ROLE_TEAMLEAD));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/export/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = (new \\DateTime('-10 days'))->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime())->format('Y-m-d');\n\n        $client->submitForm('export-btn-print', [\n            'export' => [\n                'state' => 1,\n                'daterange' => $dateRange,\n                'customers' => [],\n            ]\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $node = $client->getCrawler()->filter('body');\n        /** @var \\DOMElement $body */\n        $body = $node->getNode(0);\n        $this->assertEquals('invoice_print', $body->getAttribute('class'));\n\n        $result = $node->filter('section.invoice table.table tbody tr');\n        $this->assertEquals(10, \\count($result));\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/team/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_admin_edit_form' => [\n                'description' => 'Testing is fun!',\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertNull($timesheet->getEnd());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(0, $timesheet->getRate());\n        $this->assertNull($timesheet->getHourlyRate());\n        $this->assertNull($timesheet->getFixedRate());\n    }\n\n    public function testCreateForMultipleUsersAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/team/timesheet/create_mu');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_user_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_multi_user_edit_form' => [\n                'description' => 'Testing is more fun!',\n                'project' => 1,\n                'activity' => 1,\n                'teams' => '1',\n                'tags' => 'test,1234,foo-bar',\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertCount(2, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n            $this->assertNull($timesheet->getEnd());\n            $this->assertEquals('Testing is more fun!', $timesheet->getDescription());\n            $this->assertEquals(0, $timesheet->getRate());\n            $this->assertNull($timesheet->getHourlyRate());\n            $this->assertNull($timesheet->getFixedRate());\n            $this->assertEquals(['test', '1234', 'foo-bar'], $timesheet->getTagsAsArray());\n        }\n    }\n\n    public function testCreateForMultipleUsersActionWithoutUserOrTeam()\n    {\n        $data = [\n            'timesheet_multi_user_edit_form' => [\n                'description' => 'Testing is more fun!',\n                'project' => 1,\n                'activity' => 1,\n                // make sure the default validation for timesheets is applied as well\n                'begin' => (new \\DateTime())->format('Y-m-d H:i'),\n                'end' => (new \\DateTime('-1 hour'))->format('Y-m-d H:i'),\n            ]\n        ];\n\n        $this->assertFormHasValidationError(\n            User::ROLE_ADMIN,\n            '/team/timesheet/create_mu',\n            'form[name=timesheet_multi_user_edit_form]',\n            $data,\n            ['#timesheet_multi_user_edit_form_users', '#timesheet_multi_user_edit_form_teams', '#timesheet_multi_user_edit_form_end']\n        );\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $teamlead = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $fixture->setFixedStartDate(new \\DateTime('-2 hours'));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/team/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        $this->assertStringContainsString(\n            'href=\"https://www.kimai.org/documentation/timesheet.html\"',\n            $response->getContent(),\n            'Could not find link to documentation'\n        );\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_admin_edit_form' => [\n                'description' => 'foo-bar',\n                'tags' => 'foo,bar, testing, hello world,,',\n                'user' => $teamlead->getId()\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSaveSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($id);\n        $this->assertEquals('foo-bar', $timesheet->getDescription());\n        $this->assertEquals($teamlead->getId(), $timesheet->getUser()->getId());\n    }\n\n    public function testMultiDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/team/timesheet/multi-delete'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/team/timesheet/multi-delete'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n\n        $em->clear();\n        self::assertEquals(0, $em->getRepository(Timesheet::class)->count([]));\n    }\n\n    public function testMultiUpdate()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/team/timesheet/multi-update'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            self::assertFalse($timesheet->isExported());\n            self::assertEquals($user->getId(), $timesheet->getUser()->getId());\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/team/timesheet/multi-update'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $newUser = $this->getUserByRole(User::ROLE_USER);\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_update]')->form();\n        $client->submit($form, [\n            'timesheet_multi_update' => [\n                'user' => $newUser->getId(),\n                'exported' => true,\n                'replaceTags' => true,\n                'tags' => 'test, foo-bar, tralalala',\n                'hourlyRate' => 13.78,\n            ]\n        ]);\n\n        $em->clear();\n\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            self::assertCount(3, $timesheet->getTags());\n            self::assertEquals($newUser->getId(), $timesheet->getUser()->getId());\n            self::assertTrue($timesheet->isExported());\n            self::assertEquals(Util::calculateRate(13.78, $timesheet->getDuration()), $timesheet->getRate());\n        }\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $this->request($client, '/team/timesheet/' . $newId . '/duplicate');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, $form->getPhpValues());\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($newId++);\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertEquals('Europe/London', $timesheet->getBegin()->getTimezone()->getName());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(2016, $timesheet->getRate());\n        $this->assertEquals(127, $timesheet->getHourlyRate());\n        $this->assertEquals(2016, $timesheet->getFixedRate());\n        $this->assertEquals(2016, $timesheet->getRate());\n    }\n}\n", "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"ja\" datatype=\"plaintext\" original=\"about.en.xlf\">\n    <body>\n      <trans-unit id=\"3Clo55j\" resname=\"about.title\">\n        <source>about.title</source>\n        <target>Kimai \u306b\u3064\u3044\u3066</target>\n      </trans-unit>\n      <trans-unit id=\"oYYDCG5\" resname=\"support\">\n        <source>support</source>\n        <target>\u30b5\u30dd\u30fc\u30c8</target>\n      </trans-unit>\n      <trans-unit id=\"dHqPOYO\" resname=\"website\">\n        <source>website</source>\n        <target>\u30db\u30fc\u30e0\u30da\u30fc\u30b8</target>\n      </trans-unit>\n      <trans-unit id=\"EGpYQvx\" resname=\"help\">\n        <source>help</source>\n        <target>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</target>\n      </trans-unit>\n      <trans-unit id=\"mz4ieCN\" resname=\"donate\">\n        <source>donate</source>\n        <target>Kimai \u306e\u767a\u5c55\u306e\u305f\u3081\u306b\u5bc4\u4ed8\u3092\u884c\u3046</target>\n      </trans-unit>\n      <trans-unit id=\"DwbowBh\" resname=\"published_under\">\n        <source>published_under</source>\n        <target>%kimai% \u306f\u6b21\u306e\u3082\u3068\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059</target>\n      </trans-unit>\n      <trans-unit id=\"A0nWoXZ\" resname=\"special_thanks\">\n        <source>special_thanks</source>\n        <target>Special thanks go to \u2026</target>\n      </trans-unit>\n      <trans-unit id=\"L7cff3Q\" resname=\"library_authors\">\n        <source>library_authors</source>\n        <target>\u2026 \u3053\u308c\u3089\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u304f\u3057\u3066 Kimai \u306f\u5b9f\u73fe\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u4f5c\u6210\u8005\u306e\u65b9\u3005\u306b\u611f\u8b1d\u3057\u307e\u3059 \ud83d\udc4d</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"el\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>\u03a0\u03c1\u03bf\u03b5\u03b9\u03b4\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03c3\u03c4\u03b1\u03bc\u03ac\u03c4\u03b7\u03c3\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03b4\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03c3\u03c4\u03b1\u03bc\u03b1\u03c4\u03ae\u03c3\u03b5\u03b9</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03be\u03b5\u03ba\u03af\u03bd\u03b7\u03c3\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03b4\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03be\u03b5\u03ba\u03b9\u03bd\u03ae\u03c3\u03b5\u03b9</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>\u0388\u03c7\u03b5\u03b9 \u03c3\u03c5\u03bc\u03c0\u03bb\u03b7\u03c1\u03c9\u03b8\u03b5\u03af \u03c4\u03bf \u03cc\u03c1\u03b9\u03bf \u03c4\u03c9\u03bd \u03b5\u03bd\u03b5\u03c1\u03b3\u03ce\u03bd \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ce\u03bd \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c4\u03b1\u03bc\u03b1\u03c4\u03ae\u03c3\u03c4\u03b5 \u03c4\u03bf\u03c5\u03bb\u03ac\u03c7\u03b9\u03c3\u03c4\u03bf\u03bd \u03bc\u03af\u03b1 \u03b5\u03ba\u03c4\u03b5\u03bb\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7 \u03bc\u03ad\u03c4\u03c1\u03b7\u03c3\u03b7 \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>\u0397 \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03ac\u03b6\u03b5\u03c3\u03c4\u03b5 \u03ad\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03b5\u03be\u03b1\u03c7\u03b8\u03b5\u03af</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u03b1\u03bb\u03bb\u03b1\u03b3\u03ad\u03c2</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03b1\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b1\u03bb\u03bb\u03b1\u03b3\u03ce\u03bd: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b7 \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c6\u03b7\u03ba\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b7 \u03b4\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03cc \u03bd\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03b5\u03af: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03c3\u03c4\u03b5 \u03c0\u03c1\u03ce\u03c4\u03b1 \u03ad\u03bd\u03b1 \u03c0\u03c1\u03cc\u03c4\u03c5\u03c0\u03bf \u03c4\u03b9\u03bc\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03bc\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03ae \u03b7 \u03b1\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03bf\u03c5 \u03b1\u03c1\u03c7\u03b5\u03af\u03bf\u03c5: %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"fr\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Avertissement</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>Le chronom\u00e8tre a \u00e9t\u00e9 arr\u00eat\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>Le chronom\u00e8tre ne peut pas \u00eatre arr\u00eat\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>Le chronom\u00e9trage a commenc\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>Le chronom\u00e9trage ne peut pas \u00eatre lanc\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>La limite d'enregistrement du temps d'activit\u00e9 a \u00e9t\u00e9 atteinte, veuillez arr\u00eater au moins un enregistrement.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Vous modifiez un enregistrement que vous avez export\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Modifications enregistr\u00e9es</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>Les modifications n'ont pas pu \u00eatres enregistr\u00e9es : %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>L'entr\u00e9e a \u00e9t\u00e9 supprim\u00e9e</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>L'entr\u00e9e n'a pas pu \u00eatre supprim\u00e9e : %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Vous devez cr\u00e9er votre premier mod\u00e8le de facture avant de continuer</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>Le fichier n'a pas pu \u00eatre mis en ligne ou enregistr\u00e9 : %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"he\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>\u05d0\u05d6\u05d4\u05e8\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>\u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df \u05e0\u05e2\u05e6\u05e8\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e2\u05e6\u05d5\u05e8 \u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>\u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df \u05d4\u05d7\u05dc\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>\u05d4\u05d2\u05e2\u05ea \u05dc\u05de\u05d2\u05d1\u05dc\u05ea \u05db\u05de\u05d5\u05ea \u05e8\u05e9\u05d5\u05de\u05d5\u05ea \u05d6\u05de\u05df \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea. \u05d0\u05e0\u05d0 \u05e2\u05e6\u05d5\u05e8 \u05dc\u05e4\u05d7\u05d5\u05ea \u05e8\u05e9\u05d5\u05de\u05ea \u05d6\u05de\u05df \u05d0\u05d7\u05ea.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>\u05d0\u05ea\u05d4 \u05e2\u05d5\u05e8\u05da \u05e8\u05e9\u05d5\u05de\u05d4 \u05e9\u05db\u05d1\u05e8 \u05d9\u05d5\u05e6\u05d0\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>\u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05e0\u05e9\u05de\u05e8\u05d5</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05de\u05d5\u05e8 \u05d0\u05ea \u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>\u05d4\u05e8\u05e9\u05d5\u05de\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e8\u05e9\u05d5\u05de\u05d4: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>\u05d0\u05e0\u05d0 \u05e6\u05d5\u05e8 \u05e7\u05d5\u05d3\u05dd \u05ea\u05d1\u05e0\u05d9\u05ea \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05d0\u05d5 \u05dc\u05e9\u05de\u05d5\u05e8 \u05d0\u05ea \u05d4\u05e7\u05d5\u05d1\u05e5: %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"pt\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Aviso</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>N\u00e3o foi poss\u00edvel interromper a grava\u00e7\u00e3o de tempo</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>N\u00e3o foi poss\u00edvel iniciar a grava\u00e7\u00e3o de tempo</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>Foi atingido o limite de registos de tempo ativos. Pare primeiro pelo menos uma medi\u00e7\u00e3o de tempo de execu\u00e7\u00e3o.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Est\u00e1 a editar um registo exportado</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Altera\u00e7\u00f5es guardadas com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>As altera\u00e7\u00f5es n\u00e3o puderam ser guardadas: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>A entrada foi eliminada</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>A entrada n\u00e3o pode ser eliminada: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Crie primeiro um modelo de fatura</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>N\u00e3o foi poss\u00edvel enviar ou guardar o ficheiro: %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"pt-BR\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Aviso</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>A grava\u00e7\u00e3o de tempo n\u00e3o p\u00f4de ser interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>A grava\u00e7\u00e3o de tempo n\u00e3o p\u00f4de ser iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>O limite de registros de tempo ativos foi atingido, por favor, pare pelo menos uma medi\u00e7\u00e3o de tempo de execu\u00e7\u00e3o primeiro.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Voc\u00ea est\u00e1 editando um registro exportado</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Altera\u00e7\u00f5es salvas com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>As altera\u00e7\u00f5es n\u00e3o puderam ser salvas: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>A entrada foi exclu\u00edda com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>A entrada n\u00e3o pode ser exclu\u00edda: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Voc\u00ea precisa criar sua primeira fatura modelo antes de prosseguir</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>O arquivo n\u00e3o p\u00f4de ser carregado ou salvo: %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"tr\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target state=\"translated\">Uyar\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target state=\"translated\">Zaman kayd\u0131 durduruldu</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target state=\"translated\">Zaman kayd\u0131 durdurulamad\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target state=\"translated\">Zaman kayd\u0131 ba\u015flat\u0131ld\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target state=\"translated\">Zaman kayd\u0131 ba\u015flat\u0131lamad\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target state=\"translated\">Etkin zaman kay\u0131tlar\u0131n\u0131n s\u0131n\u0131r\u0131na ula\u015f\u0131ld\u0131, l\u00fctfen \u00f6nce en az bir \u00e7al\u0131\u015fan zaman \u00f6l\u00e7\u00fcm\u00fcn\u00fc durdurun.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target state=\"translated\">D\u0131\u015fa aktar\u0131lan bir kayd\u0131 d\u00fczenliyorsunuz</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target state=\"translated\">De\u011fi\u015fiklikler kaydedildi</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target state=\"translated\">De\u011fi\u015fiklikler kaydedilemed\u0130: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target state=\"translated\">Kay\u0131t silindi</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target state=\"translated\">Kay\u0131t silinemedi: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target state=\"translated\">Devam edebilmek i\u00e7in fatura \u015fablonu olu\u015fturman\u0131z gereklidir</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>Dosya kar\u015f\u0131ya y\u00fcklenemedi veya kaydedilemedi: %reason%</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"de\" datatype=\"plaintext\" original=\"messages.en.xlf\">\n    <body>\n      <!--\n              Global template keys\n            -->\n      <trans-unit id=\"N7mikjJ\" resname=\"time_tracking\">\n        <source>time_tracking</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <trans-unit id=\"inmIkP6\" resname=\"yes\">\n        <source>yes</source>\n        <target>Ja</target>\n      </trans-unit>\n      <trans-unit id=\"k5Apjz_\" resname=\"no\">\n        <source>no</source>\n        <target>Nein</target>\n      </trans-unit>\n      <trans-unit id=\".3dyBTq\" resname=\"both\">\n        <source>both</source>\n        <target>Beides</target>\n      </trans-unit>\n      <trans-unit id=\"KLIuHvt\" resname=\"This is a mandatory field\">\n        <source>This is a mandatory field</source>\n        <target>Pflichtfeld</target>\n      </trans-unit>\n      <trans-unit id=\"_ohHsMM\" resname=\"create\">\n        <source>create</source>\n        <target>Erstellen</target>\n      </trans-unit>\n      <trans-unit id=\"DYHuW58\" resname=\"confirm.delete\">\n        <source>confirm.delete</source>\n        <target>Wollen Sie das wirklich l\u00f6schen?</target>\n      </trans-unit>\n      <trans-unit id=\"vDd3alC\" resname=\"admin_entity.delete_confirm\">\n        <source>admin_entity.delete_confirm</source>\n        <target>\n            Diese Daten werden ebenfalls mit gel\u00f6scht!\n            Alternativ k\u00f6nnen Sie einen Eintrag ausw\u00e4hlen, auf den alle existierenden Daten umgebucht werden:\n        </target>\n      </trans-unit>\n      <trans-unit id=\"COyxNde\" resname=\"delete.not_in_use\">\n        <source>delete.not_in_use</source>\n        <target>Dieses Element kann sicher gel\u00f6scht werden.</target>\n      </trans-unit>\n      <trans-unit id=\"I3TZF5S\" resname=\"cancel\">\n        <source>cancel</source>\n        <target>Abbrechen</target>\n      </trans-unit>\n      <trans-unit id=\"PyZ8KrQ\" resname=\"confirm\">\n        <source>confirm</source>\n        <target>Best\u00e4tigen</target>\n      </trans-unit>\n      <trans-unit id=\".0CFrRV\" resname=\"upload\">\n        <source>upload</source>\n        <target>Hochladen</target>\n      </trans-unit>\n      <trans-unit id=\"JBkykGe\" resname=\"search\">\n        <source>search</source>\n        <target>Suchen</target>\n      </trans-unit>\n      <trans-unit id=\"IolBPQD\" resname=\"label.searchTerm\">\n        <source>label.searchTerm</source>\n        <target>Suchbegriff</target>\n      </trans-unit>\n      <trans-unit id=\"BytPihM\" resname=\"label.set_as_default\">\n        <source>label.set_as_default</source>\n        <target>Einstellung als Suchfavorit speichern</target>\n      </trans-unit>\n      <trans-unit id=\"NNKq04n\" resname=\"label.remove_default\">\n        <source>label.remove_default</source>\n        <target>Suchfavorit l\u00f6schen</target>\n      </trans-unit>\n      <trans-unit id=\"31x84Dt\" resname=\"label.asc\">\n        <source>label.asc</source>\n        <target>Aufsteigend</target>\n      </trans-unit>\n      <trans-unit id=\"0D_zaYd\" resname=\"label.desc\">\n        <source>label.desc</source>\n        <target>Absteigend</target>\n      </trans-unit>\n      <trans-unit id=\"Z8Fxbvf\" resname=\"label.orderBy\">\n        <source>label.orderBy</source>\n        <target>Sortieren nach</target>\n      </trans-unit>\n      <trans-unit id=\"hBNESu6\" resname=\"my.profile\">\n        <source>my.profile</source>\n        <target>Mein Profil</target>\n      </trans-unit>\n      <trans-unit id=\"J258iS6\" resname=\"update_multiple\">\n        <source>update_multiple</source>\n        <target>%action% von %count% Eintr\u00e4gen?</target>\n      </trans-unit>\n      <trans-unit id=\"OTDmccn\" resname=\"attachments\">\n        <source>attachments</source>\n        <target>Dateien</target>\n      </trans-unit>\n      <trans-unit id=\"O5w1jzb\" resname=\"file\">\n        <source>file</source>\n        <target>Datei</target>\n      </trans-unit>\n      <trans-unit id=\"0M_Gylq\" resname=\"rates.empty\">\n        <source>rates.empty</source>\n        <target>Es wurden noch keine Stundens\u00e4tze hinterlegt.</target>\n      </trans-unit>\n      <trans-unit id=\"mflwMcX\" resname=\"rates.title\">\n        <source>rates.title</source>\n        <target>Geb\u00fchren</target>\n      </trans-unit>\n      <trans-unit id=\"zFfl7jw\" resname=\"sum.total\">\n        <source>sum.total</source>\n        <target>Gesamt</target>\n      </trans-unit>\n      <trans-unit id=\"XP5zkiN\" resname=\"modal.dirty\">\n        <source>modal.dirty</source>\n        <target>Das Formular wurde ge\u00e4ndert. Bitte klicken Sie \u201eSpeichern\u201c, um die \u00c4nderungen zu sichern oder \u201eSchlie\u00dfen\u201c, um abzubrechen.</target>\n      </trans-unit>\n      <!--\n              Login / Security\n            -->\n      <trans-unit id=\"9pvowqn\" resname=\"label.password\">\n        <source>label.password</source>\n        <target>Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"WxAnbP0\" resname=\"label.password_repeat\">\n        <source>label.password_repeat</source>\n        <target>Passwort wiederholen</target>\n      </trans-unit>\n      <trans-unit id=\"II4DGnv\" resname=\"label.logout\">\n        <source>label.logout</source>\n        <target>Abmelden</target>\n      </trans-unit>\n      <trans-unit id=\"hFFZGp_\" resname=\"label.user_profile\">\n        <source>label.user_profile</source>\n        <target>Mein Profil</target>\n      </trans-unit>\n      <trans-unit id=\"gXZR.hV\" resname=\"label.api_token\">\n        <source>label.api_token</source>\n        <target>API-Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"s_X2xpI\" resname=\"label.api_token_repeat\">\n        <source>label.api_token_repeat</source>\n        <target>API-Passwort wiederholen</target>\n      </trans-unit>\n      <trans-unit id=\".372.o7\" resname=\"login_required\">\n        <source>login_required</source>\n        <target>Fehlende Berechtigung. Zur Anmeldung wechseln?</target>\n      </trans-unit>\n      <trans-unit id=\".ndupSK\" resname=\"registration.check_email\">\n        <source>registration.check_email</source>\n        <target>Eine E-Mail wurde an %email% gesendet. Sie enth\u00e4lt einen Link, den Sie anklicken m\u00fcssen, um Ihr Benutzerkonto zu best\u00e4tigen.</target>\n      </trans-unit>\n      <trans-unit id=\"_cY.wHP\" resname=\"resetting.check_email\">\n        <source>resetting.check_email</source>\n        <target>\n          Eine E-Mail wurde verschickt. Sie beinhaltet einen Link zum Zur\u00fccksetzen des Passwortes.\n          Hinweis: Ein neues Passwort kann nur alle %tokenLifetime% Stunden beantragt werden.\n\n          Eventuell wurde diese E-Mail als Spam markiert, wenn sie nicht angekommen ist.\n        </target>\n      </trans-unit>\n      <!--\n              Menu / Navbar items\n            -->\n      <trans-unit id=\"UoOv6mx\" approved=\"yes\" resname=\"menu.homepage\">\n        <source>menu.homepage</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"wvvYSw_\" resname=\"menu.admin\">\n        <source>menu.admin</source>\n        <target>Administration</target>\n      </trans-unit>\n      <trans-unit id=\"6OKwCUB\" resname=\"menu.system\">\n        <source>menu.system</source>\n        <target>System</target>\n      </trans-unit>\n      <trans-unit id=\"wBTFKFR\" resname=\"menu.logout\">\n        <source>menu.logout</source>\n        <target>Abmelden</target>\n      </trans-unit>\n      <trans-unit id=\"C0W7_BT\" resname=\"menu.timesheet\">\n        <source>menu.timesheet</source>\n        <target>Meine Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"Ci9W8.K\" resname=\"menu.invoice\">\n        <source>menu.invoice</source>\n        <target>Rechnungen</target>\n      </trans-unit>\n      <trans-unit id=\"I.eil4u\" resname=\"menu.export\">\n        <source>menu.export</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"ypVQO7o\" resname=\"menu.reporting\">\n        <source>menu.reporting</source>\n        <target>Berichte</target>\n      </trans-unit>\n      <trans-unit id=\"WGIhZv1\" resname=\"menu.admin_timesheet\">\n        <source>menu.admin_timesheet</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <trans-unit id=\"Y_jAD36\" resname=\"menu.admin_customer\">\n        <source>menu.admin_customer</source>\n        <target>Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"oDLp9t3\" resname=\"menu.admin_project\">\n        <source>menu.admin_project</source>\n        <target>Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"wriHFwl\" resname=\"menu.admin_activity\">\n        <source>menu.admin_activity</source>\n        <target>T\u00e4tigkeiten</target>\n      </trans-unit>\n      <trans-unit id=\"oZo1BnZ\" resname=\"menu.admin_user\">\n        <source>menu.admin_user</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"pA.bYIk\" resname=\"menu.admin_team\">\n        <source>menu.admin_team</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"hOZxcaK\" resname=\"menu.plugin\">\n        <source>menu.plugin</source>\n        <target>Erweiterungen</target>\n      </trans-unit>\n      <trans-unit id=\"IXtkHRw\" resname=\"menu.system_configuration\">\n        <source>menu.system_configuration</source>\n        <target>Einstellungen</target>\n      </trans-unit>\n      <trans-unit id=\"yo4f8Kh\" resname=\"menu.tags\">\n        <source>menu.tags</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"1kHI0gb\" resname=\"menu.doctor\">\n        <source>menu.doctor</source>\n        <target>Doktor</target>\n      </trans-unit>\n      <!--\n              Error templates\n            -->\n      <trans-unit id=\"Vz3Igj3\" resname=\"error.no_entries_found\">\n        <source>error.no_entries_found</source>\n        <target>Anhand ihrer ausgew\u00e4hlten Filter wurden keine Eintr\u00e4ge gefunden.</target>\n      </trans-unit>\n      <trans-unit id=\"hlu4iX5\" resname=\"error.no_comments_found\">\n        <source>error.no_comments_found</source>\n        <target>Es wurden noch keine Kommentare abgegeben.</target>\n      </trans-unit>\n      <trans-unit id=\"XQ2.pq2\" resname=\"error.too_many_entries\">\n        <source>error.too_many_entries</source>\n        <target>Die Anfrage konnte nicht verarbeitet werden. Es wurden zu viele Ergebnisse gefunden.</target>\n      </trans-unit>\n      <!--\n              General labels\n            -->\n      <trans-unit id=\"H1qEi4d\" resname=\"label.date\">\n        <source>label.date</source>\n        <target>Datum</target>\n      </trans-unit>\n      <trans-unit id=\"eJPDE76\" resname=\"label.starttime\">\n        <source>label.starttime</source>\n        <target>Beginn</target>\n      </trans-unit>\n      <trans-unit id=\"uZlpDFh\" resname=\"label.endtime\">\n        <source>label.endtime</source>\n        <target>Ende</target>\n      </trans-unit>\n      <trans-unit id=\"cgpmY0I\" resname=\"label.duration\">\n        <source>label.duration</source>\n        <target>Dauer</target>\n      </trans-unit>\n      <trans-unit id=\"O2X4xZH\" resname=\"label.user\">\n        <source>label.user</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"LDhDPrF\" resname=\"label.username\">\n        <source>label.username</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"4cEApe1\" resname=\"label.description\">\n        <source>label.description</source>\n        <target>Beschreibung</target>\n      </trans-unit>\n      <trans-unit id=\"ysOvPSq\" resname=\"label.name\">\n        <source>label.name</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"WqTho4C\" resname=\"label.comment\">\n        <source>label.comment</source>\n        <target>Kommentar</target>\n      </trans-unit>\n      <trans-unit id=\"txRonia\" resname=\"label.id\">\n        <source>label.id</source>\n        <target>ID</target>\n      </trans-unit>\n      <trans-unit id=\"CYpZwBz\" resname=\"label.visible\">\n        <source>label.visible</source>\n        <target>Sichtbar</target>\n      </trans-unit>\n      <trans-unit id=\"2ktNwkr\" approved=\"yes\" resname=\"label.budget\">\n        <source>label.budget</source>\n        <target>Budget</target>\n      </trans-unit>\n      <trans-unit id=\"x8TrOec\" resname=\"label.timeBudget\">\n        <source>label.timeBudget</source>\n        <target>Zeit-Budget</target>\n      </trans-unit>\n      <trans-unit id=\"l1wiL0h\" resname=\"label.activity\">\n        <source>label.activity</source>\n        <target>T\u00e4tigkeit</target>\n      </trans-unit>\n      <trans-unit id=\"KtnqJcg\" resname=\"label.project\">\n        <source>label.project</source>\n        <target>Projekt</target>\n      </trans-unit>\n      <trans-unit id=\"VAbtieW\" resname=\"label.hourlyRate\">\n        <source>label.hourlyRate</source>\n        <target>Stundenlohn</target>\n      </trans-unit>\n      <trans-unit id=\"VNCQ7YU\" resname=\"label.tag\">\n        <source>label.tag</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"ijQyGRo\" resname=\"label.tags\">\n        <source>label.tags</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"IQ.tlua\" resname=\"label.hourly_rate\">\n        <source>label.hourly_rate</source>\n        <target>Stundenlohn</target>\n      </trans-unit>\n      <trans-unit id=\"dezCZWf\" resname=\"label.skin\">\n        <source>label.skin</source>\n        <target>Darstellung: Farben</target>\n      </trans-unit>\n      <trans-unit id=\"42BRM3Q\" resname=\"label.theme.layout\">\n        <source>label.theme.layout</source>\n        <target>Darstellung: Layout</target>\n      </trans-unit>\n      <trans-unit id=\"w8T34A6\" resname=\"label.hours\">\n        <source>label.hours</source>\n        <target>Stunden</target>\n      </trans-unit>\n      <trans-unit id=\"Ih3IFXj\" resname=\"label.rate\">\n        <source>label.rate</source>\n        <target>Lohn</target>\n      </trans-unit>\n      <trans-unit id=\"djL6LMC\" resname=\"help.rate\">\n        <source>help.rate</source>\n        <target>Zu berechnender Stundensatz</target>\n      </trans-unit>\n      <trans-unit id=\"QzvjNwg\" resname=\"label.rate_internal\">\n        <source>label.rate_internal</source>\n        <target>Interner Lohn</target>\n      </trans-unit>\n      <trans-unit id=\"uz4SmfP\" resname=\"help.rate_internal\">\n        <source>help.rate_internal</source>\n        <target>Interner Verrechnungswert (wenn dieser nicht angegeben ist, wird der normale Satz verwendet)</target>\n      </trans-unit>\n      <trans-unit id=\"v72sA1c\" resname=\"label.recalculate_rates\">\n        <source>label.recalculate_rates</source>\n        <target>Preise neu berechnen</target>\n      </trans-unit>\n      <trans-unit id=\"foM2o5T\" resname=\"label.language\">\n        <source>label.language</source>\n        <target>Sprache</target>\n      </trans-unit>\n      <trans-unit id=\"Z8a2kUf\" resname=\"label.customer\">\n        <source>label.customer</source>\n        <target>Kunde</target>\n      </trans-unit>\n      <trans-unit id=\"D2N6_cP\" resname=\"label.email\">\n        <source>label.email</source>\n        <target>E-Mail</target>\n      </trans-unit>\n      <trans-unit id=\"Ss2xe99\" resname=\"label.team\">\n        <source>label.team</source>\n        <target>Team</target>\n      </trans-unit>\n      <trans-unit id=\"Zpj9UB4\" resname=\"label.teamlead\">\n        <source>label.teamlead</source>\n        <target>Teamleiter</target>\n      </trans-unit>\n      <trans-unit id=\"hX.EQKy\" resname=\"label.create_more\">\n        <source>label.create_more</source>\n        <target>Weitere Eintr\u00e4ge erstellen</target>\n      </trans-unit>\n      <trans-unit id=\"LIOnolg\" resname=\"placeholder.type_message\">\n        <source>placeholder.type_message</source>\n        <target>Schreibe deine Nachricht\u00a0\u2026</target>\n      </trans-unit>\n      <trans-unit id=\"vkHr9AP\" resname=\"label.billable\">\n        <source>label.billable</source>\n        <target>Abrechenbar</target>\n      </trans-unit>\n      <!--\n              Buttons & Actions\n            -->\n      <trans-unit id=\"zldXQq6\" resname=\"label.actions\">\n        <source>label.actions</source>\n        <target>Aktionen</target>\n      </trans-unit>\n      <trans-unit id=\"ovKkXwU\" resname=\"action.edit\">\n        <source>action.edit</source>\n        <target>Bearbeiten</target>\n      </trans-unit>\n      <trans-unit id=\"jdbtx6z\" resname=\"action.add\">\n        <source>action.add</source>\n        <target>Hinzuf\u00fcgen</target>\n      </trans-unit>\n      <trans-unit id=\"hTKWQ6g\" resname=\"action.delete\">\n        <source>action.delete</source>\n        <target>L\u00f6schen</target>\n      </trans-unit>\n      <trans-unit id=\"HLtdhYw\" resname=\"action.save\">\n        <source>action.save</source>\n        <target>Speichern</target>\n      </trans-unit>\n      <trans-unit id=\"9hpJPiG\" resname=\"action.save_all\">\n        <source>action.save_all</source>\n        <target>Alle speichern</target>\n      </trans-unit>\n      <trans-unit id=\"tKZKI2Z\" resname=\"action.reset\">\n        <source>action.reset</source>\n        <target>Zur\u00fccksetzen</target>\n      </trans-unit>\n      <trans-unit id=\"Eb7Ygpo\" resname=\"action.back\">\n        <source>action.back</source>\n        <target>Zur\u00fcck</target>\n      </trans-unit>\n      <trans-unit id=\"wCazS.X\" resname=\"action.close\">\n        <source>action.close</source>\n        <target>Schlie\u00dfen</target>\n      </trans-unit>\n      <!--\n              Dashboard\n            -->\n      <trans-unit id=\"3bqLM8Q\" resname=\"dashboard.title\">\n        <source>dashboard.title</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"3PYadzb\" resname=\"dashboard.subtitle\">\n        <source>dashboard.subtitle</source>\n        <target>Willkommen!</target>\n      </trans-unit>\n      <trans-unit id=\"yEa1Yz3\" resname=\"dashboard.all\">\n        <source>dashboard.all</source>\n        <target>Alle Benutzer</target>\n      </trans-unit>\n      <!--\n              Widgets\n            -->\n      <trans-unit id=\"giznf_R\" resname=\"more.info.link\">\n        <source>more.info.link</source>\n        <target>Mehr Infos</target>\n      </trans-unit>\n      <trans-unit id=\"4iliLZT\" resname=\"label.toggle_dropdown\">\n        <source>label.toggle_dropdown</source>\n        <target>Men\u00fc anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"f3KMQJh\" resname=\"label.my_teams\">\n        <source>label.my_teams</source>\n        <target>Meine Teams</target>\n      </trans-unit>\n      <trans-unit id=\"jTiYRIu\" resname=\"label.my_team_projects\">\n        <source>label.my_team_projects</source>\n        <target>Meine Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"1PQHtXu\" resname=\"label.progress\">\n        <source>label.progress</source>\n        <target>Fortschritt</target>\n      </trans-unit>\n      <trans-unit id=\"vTY9SUk\" resname=\"label.plus_more\">\n        <source>label.plus_more</source>\n        <target>+%count% weitere</target>\n      </trans-unit>\n      <!--\n              Timesheet\n            -->\n      <trans-unit id=\"VXj0Y3h\" resname=\"timesheet.title\">\n        <source>timesheet.title</source>\n        <target>Meine Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"dwEVXUR\" resname=\"timesheet.edit\">\n        <source>timesheet.edit</source>\n        <target>Eintrag bearbeiten</target>\n      </trans-unit>\n      <trans-unit id=\"trDJK9W\" resname=\"label.begin\">\n        <source>label.begin</source>\n        <target>Von</target>\n      </trans-unit>\n      <trans-unit id=\"R9typUt\" resname=\"label.end\">\n        <source>label.end</source>\n        <target>Bis</target>\n      </trans-unit>\n      <trans-unit id=\"egaNXjp\" resname=\"label.daterange\">\n        <source>label.daterange</source>\n        <target>Zeitraum</target>\n      </trans-unit>\n      <trans-unit id=\"UbnqJLn\" resname=\"modal.columns.title\">\n        <source>modal.columns.title</source>\n        <target>\u00c4ndere Spalten-Sichtbarkeit</target>\n      </trans-unit>\n      <trans-unit id=\"EbfIoLp\" resname=\"modal.columns.description\">\n        <source>modal.columns.description</source>\n        <target>Beim Speichern werden die nicht ausgew\u00e4hlten Spalten ausgeblendet und diese Einstellungen in einem Browser Cookie hinterlegt. Sollten Sie Ihre Cookies l\u00f6schen, werden die Einstellungen r\u00fcckg\u00e4ngig gemacht.</target>\n      </trans-unit>\n      <trans-unit id=\"5gjqxgK\" resname=\"label.fixedRate\">\n        <source>label.fixedRate</source>\n        <target>Festbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"b43sCwO\" resname=\"help.fixedRate\">\n        <source>help.fixedRate</source>\n        <target>Jeder Zeiteintrag bekommt den gleichen Wert, unabh\u00e4ngig von seiner Dauer</target>\n      </trans-unit>\n      <trans-unit id=\"YTSS_Q1\" resname=\"label.color\">\n        <source>label.color</source>\n        <target>Farbe</target>\n      </trans-unit>\n      <trans-unit id=\"EoouxGX\" resname=\"label.replaceTags\">\n        <source>label.replaceTags</source>\n        <target>Schlagworte ersetzen</target>\n      </trans-unit>\n      <trans-unit id=\"BxkmaKz\" resname=\"label.appendTags\">\n        <source>label.appendTags</source>\n        <target>Schlagworte hinzuf\u00fcgen</target>\n      </trans-unit>\n      <!--\n              User profile\n            -->\n      <trans-unit id=\"1_wnK76\" resname=\"profile.title\">\n        <source>profile.title</source>\n        <target>Benutzerprofil</target>\n      </trans-unit>\n      <trans-unit id=\"HWKJZ0T\" resname=\"profile.about_me\">\n        <source>profile.about_me</source>\n        <target>\u00dcber mich</target>\n      </trans-unit>\n      <trans-unit id=\"Fm.kwVn\" resname=\"profile.first_entry\">\n        <source>profile.first_entry</source>\n        <target>Arbeitet seit</target>\n      </trans-unit>\n      <trans-unit id=\"1c0EQaz\" resname=\"profile.registration_date\">\n        <source>profile.registration_date</source>\n        <target>Registriert am</target>\n      </trans-unit>\n      <trans-unit id=\"xEYQXPy\" resname=\"profile.settings\">\n        <source>profile.settings</source>\n        <target>Profil</target>\n      </trans-unit>\n      <trans-unit id=\"A6TLLQa\" resname=\"profile.password\">\n        <source>profile.password</source>\n        <target>Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"Z34ZpjK\" resname=\"profile.api-token\">\n        <source>profile.api-token</source>\n        <target>API</target>\n      </trans-unit>\n      <trans-unit id=\"ygtTz8.\" resname=\"profile.roles\">\n        <source>profile.roles</source>\n        <target>Rollen</target>\n      </trans-unit>\n      <trans-unit id=\"DZ7XGML\" resname=\"profile.teams\">\n        <source>profile.teams</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"MQKiG33\" resname=\"profile.preferences\">\n        <source>profile.preferences</source>\n        <target>Einstellungen</target>\n      </trans-unit>\n      <trans-unit id=\"Eq78QrH\" resname=\"label.theme.collapsed_sidebar\">\n        <source>label.theme.collapsed_sidebar</source>\n        <target>Minimiert die linke Navigationsleiste</target>\n      </trans-unit>\n      <trans-unit id=\"0sgroZi\" resname=\"label.calendar.initial_view\">\n        <source>label.calendar.initial_view</source>\n        <target>Initiale Darstellung des Kalenders</target>\n      </trans-unit>\n      <trans-unit id=\"iqQsgIW\" resname=\"label.login.initial_view\">\n        <source>label.login.initial_view</source>\n        <target>Initiale Ansicht nach Anmeldung</target>\n      </trans-unit>\n      <trans-unit id=\"hO7mkmf\" resname=\"label.lastLogin\">\n        <source>label.lastLogin</source>\n        <target>Letzte Anmeldung</target>\n      </trans-unit>\n      <!-- Options for user-preference label.calendar.initial_view -->\n      <trans-unit id=\"pcfRcZ4\" resname=\"month\">\n        <source>month</source>\n        <target>Monat</target>\n      </trans-unit>\n      <trans-unit id=\"Irm6dfx\" resname=\"agendaWeek\">\n        <source>agendaWeek</source>\n        <target>Woche</target>\n      </trans-unit>\n      <trans-unit id=\"Q0Zip02\" resname=\"agendaDay\">\n        <source>agendaDay</source>\n        <target>Tag</target>\n      </trans-unit>\n      <trans-unit id=\"rYzHCFd\" resname=\"label.timesheet.daily_stats\">\n        <source>label.timesheet.daily_stats</source>\n        <target>T\u00e4gliche Statistiken im Timesheet anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"tSlqVK2\" resname=\"label.timesheet.export_decimal\">\n        <source>label.timesheet.export_decimal</source>\n        <target>Dezimal Format f\u00fcr Export nutzen</target>\n      </trans-unit>\n      <trans-unit id=\"5R.QsZ3\" resname=\"theme.update_browser_title\">\n        <source>theme.update_browser_title</source>\n        <target>Browser Titel aktualisieren</target>\n      </trans-unit>\n      <!--\n        User timesheet calendar\n      -->\n      <trans-unit id=\"HWiuMV6\" resname=\"calendar.title\">\n        <source>calendar.title</source>\n        <target>Kalender</target>\n      </trans-unit>\n      <trans-unit id=\"75kjTF9\" resname=\"calendar.drag_and_drop.delete\">\n        <source>calendar.drag_and_drop.delete</source>\n        <target>Wenn Sie einen Eintrag l\u00f6schen wollen, m\u00fcssen Sie ihn auf die Schaltfl\u00e4che ziehen.</target>\n      </trans-unit>\n      <!--\n        Admin: Timesheet\n      -->\n      <trans-unit id=\"bSDjzZL\" resname=\"admin_timesheet.title\">\n        <source>admin_timesheet.title</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <!--\n        Admin: Projects\n      -->\n      <trans-unit id=\"DFjFRGe\" resname=\"admin_project.title\">\n        <source>admin_project.title</source>\n        <target>Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"yLOqEX_\" resname=\"label.project_start\">\n        <source>label.project_start</source>\n        <target>Projekt Start</target>\n      </trans-unit>\n      <trans-unit id=\"4kQGReV\" resname=\"label.project_end\">\n        <source>label.project_end</source>\n        <target>Projekt Ende</target>\n      </trans-unit>\n      <!--\n        Admin: Activity\n      -->\n      <trans-unit id=\"auu8q0u\" resname=\"admin_activity.title\">\n        <source>admin_activity.title</source>\n        <target>T\u00e4tigkeiten</target>\n      </trans-unit>\n      <!--\n        Admin: Customer\n      -->\n      <trans-unit id=\"2TvKX9Z\" resname=\"admin_customer.title\">\n        <source>admin_customer.title</source>\n        <target>Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"39AtPxQ\" resname=\"label.number\">\n        <source>label.number</source>\n        <target>Kundennummer</target>\n      </trans-unit>\n      <trans-unit id=\"7jfRn_1\" resname=\"label.company\">\n        <source>label.company</source>\n        <target>Unternehmensbezeichnung</target>\n      </trans-unit>\n      <trans-unit id=\"GOStgLi\" resname=\"label.vat\">\n        <source>label.vat</source>\n        <target>Umsatzsteuer</target>\n      </trans-unit>\n      <trans-unit id=\"Dgmh_mv\" resname=\"label.vat_id\">\n        <source>label.vat_id</source>\n        <target>Umsatzsteuer-ID</target>\n      </trans-unit>\n      <trans-unit id=\"YNGNfGn\" resname=\"label.tax_rate\">\n        <source>label.tax_rate</source>\n        <target>Steuersatz</target>\n      </trans-unit>\n      <trans-unit id=\"0tkOMo1\" resname=\"label.contact\">\n        <source>label.contact</source>\n        <target>Kontakt</target>\n      </trans-unit>\n      <trans-unit id=\"c9W5AO4\" resname=\"label.address\">\n        <source>label.address</source>\n        <target>Adresse</target>\n      </trans-unit>\n      <trans-unit id=\"k7MJQ82\" resname=\"label.country\">\n        <source>label.country</source>\n        <target>Land</target>\n      </trans-unit>\n      <trans-unit id=\"g03c_vw\" resname=\"label.phone\">\n        <source>label.phone</source>\n        <target>Telefon</target>\n      </trans-unit>\n      <trans-unit id=\"eRyhERS\" resname=\"label.fax\">\n        <source>label.fax</source>\n        <target>Fax</target>\n      </trans-unit>\n      <trans-unit id=\"AawT9pW\" resname=\"label.mobile\">\n        <source>label.mobile</source>\n        <target>Mobiltelefon</target>\n      </trans-unit>\n      <trans-unit id=\"PS9IH_t\" approved=\"yes\" resname=\"label.homepage\">\n        <source>label.homepage</source>\n        <target>Homepage</target>\n      </trans-unit>\n      <trans-unit id=\"dmtPdwq\" resname=\"label.timezone\">\n        <source>label.timezone</source>\n        <target>Zeitzone</target>\n      </trans-unit>\n      <trans-unit id=\"otd2FZd\" resname=\"label.currency\">\n        <source>label.currency</source>\n        <target>W\u00e4hrung</target>\n      </trans-unit>\n      <!--\n              Admin: User\n            -->\n      <trans-unit id=\"t34EvnF\" resname=\"admin_user.title\">\n        <source>admin_user.title</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"TRDzmCV\" resname=\"label.alias\">\n        <source>label.alias</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"UrRn8xj\" resname=\"label.title\">\n        <source>label.title</source>\n        <target>Titel</target>\n      </trans-unit>\n      <trans-unit id=\"nWMH_Nr\" resname=\"label.avatar\">\n        <source>label.avatar</source>\n        <target>Profilbild (URL)</target>\n      </trans-unit>\n      <trans-unit id=\"KtTP.Sh\" resname=\"label.active\">\n        <source>label.active</source>\n        <target>Aktiv</target>\n      </trans-unit>\n      <trans-unit id=\"iD6CNOO\" resname=\"label.roles\">\n        <source>label.roles</source>\n        <target>Rolle</target>\n      </trans-unit>\n      <trans-unit id=\"ZlZ20pG\" resname=\"user_permissions.title\">\n        <source>user_permissions.title</source>\n        <target>Benutzer Berechtigungen</target>\n      </trans-unit>\n      <trans-unit id=\"G.GEdlk\" resname=\"user_role.title\">\n        <source>user_role.title</source>\n        <target>Benutzer Rolle</target>\n      </trans-unit>\n      <trans-unit id=\"E7G60OF\" resname=\"Allowed character: A-Z and _\">\n        <source>Allowed character: A-Z and _</source>\n        <target>Erlaubte Zeichen: A-Z und _</target>\n      </trans-unit>\n      <!--\n              Admin: Plugins\n            -->\n      <trans-unit id=\"d75KAlJ\" resname=\"label.version\">\n        <source>label.version</source>\n        <target>Version</target>\n      </trans-unit>\n      <trans-unit id=\"8Rfa01v\" resname=\"label.required_version\">\n        <source>label.required_version</source>\n        <target>Kompatibel mit</target>\n      </trans-unit>\n      <!--\n              ROLES\n            -->\n      <trans-unit id=\"WRuKTcz\" resname=\"ROLE_SUPER_ADMIN\">\n        <source>ROLE_SUPER_ADMIN</source>\n        <target>System-Admin</target>\n      </trans-unit>\n      <trans-unit id=\"718iPw6\" resname=\"ROLE_ADMIN\">\n        <source>ROLE_ADMIN</source>\n        <target>Administrator</target>\n      </trans-unit>\n      <trans-unit id=\"yttGLAB\" resname=\"ROLE_TEAMLEAD\">\n        <source>ROLE_TEAMLEAD</source>\n        <target>Teamleiter</target>\n      </trans-unit>\n      <trans-unit id=\"rvO5ZXf\" resname=\"ROLE_USER\">\n        <source>ROLE_USER</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <!--\n              Statistics data for Dashboard & Users profile\n            -->\n      <trans-unit id=\"lfSTZGe\" resname=\"stats.workingTimeToday\">\n        <source>stats.workingTimeToday</source>\n        <target>Heute, %day%</target>\n      </trans-unit>\n      <trans-unit id=\"XdYs3I8\" resname=\"stats.workingTimeWeek\">\n        <source>stats.workingTimeWeek</source>\n        <target>Kalenderwoche %week%</target>\n      </trans-unit>\n      <trans-unit id=\"JIKNAYP\" approved=\"yes\" resname=\"stats.workingTimeMonth\">\n        <source>stats.workingTimeMonth</source>\n        <target>%month% %year%</target>\n      </trans-unit>\n      <trans-unit id=\"JnUFsNi\" resname=\"stats.workingTimeYear\">\n        <source>stats.workingTimeYear</source>\n        <target>Gesamtes Jahr %year%</target>\n      </trans-unit>\n      <trans-unit id=\"HWB4OGJ\" resname=\"stats.workingTimeFinancialYear\">\n        <source>stats.workingTimeFinancialYear</source>\n        <target>Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"BXBFJP8\" resname=\"stats.workingTime\">\n        <source>stats.workingTime</source>\n        <target>Arbeitszeit</target>\n      </trans-unit>\n      <trans-unit id=\"pX_3dNm\" resname=\"stats.revenue\">\n        <source>stats.revenue</source>\n        <target>Einnahmen</target>\n      </trans-unit>\n      <trans-unit id=\"TdBJBAl\" resname=\"stats.durationToday\">\n        <source>stats.durationToday</source>\n        <target>Arbeitszeit heute</target>\n      </trans-unit>\n      <trans-unit id=\"XhKalZH\" resname=\"stats.durationWeek\">\n        <source>stats.durationWeek</source>\n        <target>Arbeitszeit diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"uaOwf_P\" resname=\"stats.durationMonth\">\n        <source>stats.durationMonth</source>\n        <target>Arbeitszeit diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"WqF84KR\" resname=\"stats.durationYear\">\n        <source>stats.durationYear</source>\n        <target>Arbeitszeit dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"xkugSAA\" resname=\"stats.durationFinancialYear\">\n        <source>stats.durationFinancialYear</source>\n        <target>Arbeitszeit dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"YtvPnl1\" resname=\"stats.durationTotal\">\n        <source>stats.durationTotal</source>\n        <target>Arbeitszeit total</target>\n      </trans-unit>\n      <trans-unit id=\"IFOLMgp\" resname=\"stats.yourWorkingHours\">\n        <source>stats.yourWorkingHours</source>\n        <target>Meine Arbeitszeiten</target>\n      </trans-unit>\n      <trans-unit id=\"023M9Ta\" resname=\"stats.amountToday\">\n        <source>stats.amountToday</source>\n        <target>Umsatz heute</target>\n      </trans-unit>\n      <trans-unit id=\"xnJvYAE\" resname=\"stats.amountWeek\">\n        <source>stats.amountWeek</source>\n        <target>Umsatz diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"ulr3reE\" resname=\"stats.amountMonth\">\n        <source>stats.amountMonth</source>\n        <target>Umsatz diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"bQZyZaO\" resname=\"stats.amountYear\">\n        <source>stats.amountYear</source>\n        <target>Umsatz dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"wuUWovn\" resname=\"stats.amountFinancialYear\">\n        <source>stats.amountFinancialYear</source>\n        <target>Umsatz dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"Z0fz23v\" resname=\"stats.amountTotal\">\n        <source>stats.amountTotal</source>\n        <target>Umsatz total</target>\n      </trans-unit>\n      <trans-unit id=\"xyiadv3\" resname=\"stats.userActiveToday\">\n        <source>stats.userActiveToday</source>\n        <target>Aktive Benutzer heute</target>\n      </trans-unit>\n      <trans-unit id=\"knMHaeO\" resname=\"stats.userActiveWeek\">\n        <source>stats.userActiveWeek</source>\n        <target>Aktive Benutzer diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"adzVDgb\" resname=\"stats.userActiveMonth\">\n        <source>stats.userActiveMonth</source>\n        <target>Aktive Benutzer diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"AswjFvh\" resname=\"stats.userActiveYear\">\n        <source>stats.userActiveYear</source>\n        <target>Aktive Benutzer dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"zMY6gkY\" resname=\"stats.userActiveFinancialYear\">\n        <source>stats.userActiveFinancialYear</source>\n        <target>Aktive Benutzer dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"dLTb1Po\" resname=\"stats.userActiveTotal\">\n        <source>stats.userActiveTotal</source>\n        <target>Aktive Benutzer jemals</target>\n      </trans-unit>\n      <trans-unit id=\"lEW82ex\" resname=\"stats.activeRecordings\">\n        <source>stats.activeRecordings</source>\n        <target>Aktive Zeitmessungen</target>\n      </trans-unit>\n      <trans-unit id=\"t5eIWp8\" resname=\"stats.userTotal\">\n        <source>stats.userTotal</source>\n        <target>Anzahl Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"Bor.76M\" resname=\"stats.activityTotal\">\n        <source>stats.activityTotal</source>\n        <target>Anzahl T\u00e4tigkeiten</target>\n      </trans-unit>\n      <trans-unit id=\"67uSaR3\" resname=\"stats.projectTotal\">\n        <source>stats.projectTotal</source>\n        <target>Anzahl Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"tnD6aPj\" resname=\"stats.customerTotal\">\n        <source>stats.customerTotal</source>\n        <target>Anzahl Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"unC5MXv\" resname=\"stats.percentUsed\">\n        <source>stats.percentUsed</source>\n        <target>%percent%% verwendet</target>\n      </trans-unit>\n      <trans-unit id=\"HkjvwLc\" resname=\"stats.percentUsedLeft\">\n        <source>stats.percentUsedLeft</source>\n        <target>%percent%% verwendet (noch %left% offen)</target>\n      </trans-unit>\n      <trans-unit id=\"xN7MfSA\" resname=\"stats.percentUsed_month\">\n        <source>stats.percentUsed_month</source>\n        <target>%percent%% verwendet diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"vWJPpYU\" resname=\"stats.percentUsedLeft_month\">\n        <source>stats.percentUsedLeft_month</source>\n        <target>%percent%% verwendet (noch %left% diesen Monat offen)</target>\n      </trans-unit>\n      <!--\n              Invoice\n            -->\n      <trans-unit id=\"Oq.KtC6\" resname=\"admin_invoice_template.title\">\n        <source>admin_invoice_template.title</source>\n        <target>Rechnungsvorlagen</target>\n      </trans-unit>\n      <trans-unit id=\"iERywrp\" resname=\"invoice.title\">\n        <source>invoice.title</source>\n        <target>Rechnungen</target>\n      </trans-unit>\n      <trans-unit id=\"ov4OQOh\" resname=\"invoice.filter\">\n        <source>invoice.filter</source>\n        <target>Rechnungsdaten filtern</target>\n      </trans-unit>\n      <trans-unit id=\"7H7P1mE\" resname=\"button.preview\">\n        <source>button.preview</source>\n        <target>Vorschau</target>\n      </trans-unit>\n      <trans-unit id=\"IQ9DUOW\" resname=\"button.preview_print\">\n        <source>button.preview_print</source>\n        <target>Druck Vorschau</target>\n      </trans-unit>\n      <trans-unit id=\"X70dwP8\" resname=\"button.print\">\n        <source>button.print</source>\n        <target>Drucken</target>\n      </trans-unit>\n      <trans-unit id=\"W_TXvSi\" resname=\"button.csv\">\n        <source>button.csv</source>\n        <target>CSV</target>\n      </trans-unit>\n      <trans-unit id=\"vC2IsaP\" resname=\"button.xlsx\">\n        <source>button.xlsx</source>\n        <target>Excel</target>\n      </trans-unit>\n      <trans-unit id=\"aAa5uRR\" resname=\"button.pdf\">\n        <source>button.pdf</source>\n        <target>PDF</target>\n      </trans-unit>\n      <trans-unit id=\"ulYFDIo\" resname=\"button.ods\">\n        <source>button.ods</source>\n        <target>ODS</target>\n      </trans-unit>\n      <trans-unit id=\"zPcx3O_\" resname=\"invoice_print\">\n        <source>invoice_print</source>\n        <target>Rechnung</target>\n      </trans-unit>\n      <trans-unit id=\"7J7G3Vr\" resname=\"label.mark_as_exported\">\n        <source>label.mark_as_exported</source>\n        <target>Als exportiert markieren</target>\n      </trans-unit>\n      <trans-unit id=\"p0IprAw\" resname=\"label.template\">\n        <source>label.template</source>\n        <target>Vorlage</target>\n      </trans-unit>\n      <trans-unit id=\"zfIRxJh\" resname=\"label.due_days\">\n        <source>label.due_days</source>\n        <target>Zahlungsziel in Tagen</target>\n      </trans-unit>\n      <trans-unit id=\"rAJrxSK\" resname=\"invoice.due_days\">\n        <source>invoice.due_days</source>\n        <target>Zahlungsziel</target>\n      </trans-unit>\n      <trans-unit id=\"Xij3oQl\" resname=\"invoice.payment_date\">\n        <source>invoice.payment_date</source>\n        <target>Zahlungsdatum</target>\n      </trans-unit>\n      <trans-unit id=\"4XKFnWh\" resname=\"invoice.from\">\n        <source>invoice.from</source>\n        <target>Von</target>\n      </trans-unit>\n      <trans-unit id=\"hx7vsMA\" resname=\"invoice.to\">\n        <source>invoice.to</source>\n        <target>An</target>\n      </trans-unit>\n      <trans-unit id=\"x_W5sV4\" resname=\"invoice.number\">\n        <source>invoice.number</source>\n        <target>Rechnungsnummer</target>\n      </trans-unit>\n      <trans-unit id=\"86KyrKO\" resname=\"invoice.subtotal\">\n        <source>invoice.subtotal</source>\n        <target>Rechnungsbetrag (netto)</target>\n      </trans-unit>\n      <trans-unit id=\"EO57yXg\" resname=\"invoice.tax\">\n        <source>invoice.tax</source>\n        <target>Umsatzsteuer</target>\n      </trans-unit>\n      <trans-unit id=\"N68vyvo\" resname=\"invoice.total\">\n        <source>invoice.total</source>\n        <target>Rechnungsendbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"TPzFWUs\" resname=\"invoice.service_date\">\n        <source>invoice.service_date</source>\n        <target>Leistungsdatum</target>\n      </trans-unit>\n      <trans-unit id=\"6x24VVR\" resname=\"label.amount\">\n        <source>label.amount</source>\n        <target>Anzahl</target>\n      </trans-unit>\n      <trans-unit id=\"g7EpaPY\" resname=\"label.total_rate\">\n        <source>label.total_rate</source>\n        <target>Gesamtpreis</target>\n      </trans-unit>\n      <trans-unit id=\"MF3MdTu\" resname=\"label.unit_price\">\n        <source>label.unit_price</source>\n        <target>Einzelbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"77aZC3r\" resname=\"label.payment_terms\">\n        <source>label.payment_terms</source>\n        <target>Zahlungsinformationen</target>\n      </trans-unit>\n      <trans-unit id=\"9p2KQag\" resname=\"invoice.signature_user\">\n        <source>invoice.signature_user</source>\n        <target>Leistungsbest\u00e4tigung: Datum / Name Berater / Unterschrift</target>\n      </trans-unit>\n      <trans-unit id=\"Q9ykNhO\" resname=\"invoice.signature_customer\">\n        <source>invoice.signature_customer</source>\n        <target>Leistungsbest\u00e4tigung: Datum / Name Kunde / Unterschrift</target>\n      </trans-unit>\n      <trans-unit id=\"c3d6p33\" resname=\"invoice.total_working_time\">\n        <source>invoice.total_working_time</source>\n        <target>Gesamtdauer</target>\n      </trans-unit>\n      <trans-unit id=\"BS00SS7\" resname=\"label.orderNumber\">\n        <source>label.orderNumber</source>\n        <target>Bestellnummer</target>\n      </trans-unit>\n      <trans-unit id=\"as948k9\" resname=\"label.orderDate\">\n        <source>label.orderDate</source>\n        <target>Bestelldatum</target>\n      </trans-unit>\n      <trans-unit id=\"RRj6PYN\" resname=\"label.invoice_tax_number\">\n        <source>label.invoice_tax_number</source>\n        <target>USt-IdNr.:</target>\n      </trans-unit>\n      <trans-unit id=\"uFZA7Uf\" resname=\"label.invoice_bank_account\">\n        <source>label.invoice_bank_account</source>\n        <target>Bankverbindung</target>\n      </trans-unit>\n      <trans-unit id=\"9VxfLLy\" resname=\"label.decimalDuration\">\n        <source>label.decimalDuration</source>\n        <target>Dauer als Dezimalzahl anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"hzhzbqw\" resname=\"label.status\">\n        <source>label.status</source>\n        <target>Status</target>\n      </trans-unit>\n      <trans-unit id=\"X_NRsed\" resname=\"status.new\">\n        <source>status.new</source>\n        <target>Neu</target>\n      </trans-unit>\n      <trans-unit id=\"Uvo1CbP\" resname=\"status.pending\">\n        <source>status.pending</source>\n        <target>Ausstehend</target>\n      </trans-unit>\n      <trans-unit id=\"PHJwR4w\" resname=\"status.paid\">\n        <source>status.paid</source>\n        <target>Bezahlt</target>\n      </trans-unit>\n      <trans-unit id=\"gT9W2pZ\" resname=\"status.canceled\">\n        <source>status.canceled</source>\n        <target>Storniert</target>\n      </trans-unit>\n      <trans-unit id=\"crrlEUA\" resname=\"preview.skipped_rows\">\n        <source>preview.skipped_rows</source>\n        <target>\u00dcberspringe Vorschau von %rows% weiteren Zeilen \u2026</target>\n      </trans-unit>\n      <!--\n              Export\n            -->\n      <trans-unit id=\"F6Jmro7\" resname=\"export.title\">\n        <source>export.title</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"iwWaUoa\" resname=\"export.filter\">\n        <source>export.filter</source>\n        <target>Daten f\u00fcr Export filtern</target>\n      </trans-unit>\n      <trans-unit id=\"vjmoQGo\" resname=\"export.period\">\n        <source>export.period</source>\n        <target>Zeitraum</target>\n      </trans-unit>\n      <trans-unit id=\"3CQ7A2m\" resname=\"export.document_title\">\n        <source>export.document_title</source>\n        <target>Export von Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"d5wyWRD\" resname=\"export.full_list\">\n        <source>export.full_list</source>\n        <target>Vollst\u00e4ndige Auflistung</target>\n      </trans-unit>\n      <trans-unit id=\"N778uJ6\" resname=\"export.summary\">\n        <source>export.summary</source>\n        <target>Zusammenfassung</target>\n      </trans-unit>\n      <trans-unit id=\"ElDyzrx\" resname=\"export.page_of\">\n        <source>export.page_of</source>\n        <target>Seite %page% von %pages%</target>\n      </trans-unit>\n      <trans-unit id=\"vKY0tof\" resname=\"export.date_copyright\">\n        <source>export.date_copyright</source>\n        <target>Erstellt %date% mit %kimai%</target>\n      </trans-unit>\n      <trans-unit id=\"W92QGbY\" resname=\"export.warn_result_amount\">\n        <source>export.warn_result_amount</source>\n        <target>Ihre Suche f\u00fchrt zu %count% Ergebnissen. Sollte der Export fehlschlagen, m\u00fcssen Sie die Suche weiter eingrenzen.</target>\n      </trans-unit>\n      <trans-unit id=\"pnGDFmf\" resname=\"label.type\">\n        <source>label.type</source>\n        <target>Typ</target>\n      </trans-unit>\n      <!--\n             Navbar - recent entries and activities\n            -->\n      <trans-unit id=\"OxdYMR3\" resname=\"active.entries\">\n        <source>active.entries</source>\n        <target>Ihre aktiven Zeitmessungen</target>\n      </trans-unit>\n      <trans-unit id=\"e7XS97t\" resname=\"timesheet.all\">\n        <source>timesheet.all</source>\n        <target>Alle Eintr\u00e4ge anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"WVU_S.A\" resname=\"recent.activities\">\n        <source>recent.activities</source>\n        <target>Eine ihrer letzten T\u00e4tigkeiten neustarten</target>\n      </trans-unit>\n      <trans-unit id=\"SLV47Uu\" resname=\"recent.activities.format\">\n        <source>recent.activities.format</source>\n        <target>%activity% in %project% f\u00fcr %customer%</target>\n      </trans-unit>\n      <trans-unit id=\"dTHY7Mw\" resname=\"timesheet.start\">\n        <source>timesheet.start</source>\n        <target>Neue Zeitmessung starten</target>\n      </trans-unit>\n      <!--\n              TOOLBARS\n            -->\n      <trans-unit id=\"MPimOps\" resname=\"label.pageSize\">\n        <source>label.pageSize</source>\n        <target>Ergebnisse</target>\n      </trans-unit>\n      <trans-unit id=\"KhyA_PW\" resname=\"label.entryState\">\n        <source>label.entryState</source>\n        <target>Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"X3JM9wj\" resname=\"label.exported\">\n        <source>label.exported</source>\n        <target>Exportiert</target>\n      </trans-unit>\n      <trans-unit id=\"_DDecAV\" resname=\"entryState.exported\">\n        <source>entryState.exported</source>\n        <target>Abgerechnet</target>\n      </trans-unit>\n      <trans-unit id=\"ccCiXyR\" resname=\"entryState.not_exported\">\n        <source>entryState.not_exported</source>\n        <target>Offen</target>\n      </trans-unit>\n      <trans-unit id=\"do7fP0q\" resname=\"entryState.all\">\n        <source>entryState.all</source>\n        <target>Alle</target>\n      </trans-unit>\n      <trans-unit id=\"xm7mqoK\" resname=\"entryState.running\">\n        <source>entryState.running</source>\n        <target>Laufende</target>\n      </trans-unit>\n      <trans-unit id=\"spHpd_I\" resname=\"entryState.stopped\">\n        <source>entryState.stopped</source>\n        <target>Beendete</target>\n      </trans-unit>\n      <trans-unit id=\"BhsaLxX\" resname=\"export.clear_all\">\n        <source>export.clear_all</source>\n        <target>Alle angezeigten Eintr\u00e4ge als offen markieren?</target>\n      </trans-unit>\n      <trans-unit id=\"qtjPKUT\" resname=\"export.mark_all\">\n        <source>export.mark_all</source>\n        <target>Alle angezeigten Eintr\u00e4ge als abgerechnet markieren?</target>\n      </trans-unit>\n      <trans-unit id=\"S0vT92U\" resname=\"label.globalsOnly\">\n        <source>label.globalsOnly</source>\n        <target>Nur globale</target>\n      </trans-unit>\n      <trans-unit id=\"2Ek7sXu\" resname=\"label.batch_meta_fields\">\n        <source>label.batch_meta_fields</source>\n        <target>Zus\u00e4tzliche Felder</target>\n      </trans-unit>\n      <trans-unit id=\"9Wt8Pp_\" resname=\"help.batch_meta_fields\">\n        <source>help.batch_meta_fields</source>\n        <target>Felder die aktualisiert werden sollen, m\u00fcssen zun\u00e4chst durch einen Klick auf die zugeh\u00f6rige Checkbox freigeschaltet werden.</target>\n      </trans-unit>\n      <trans-unit id=\"z_YHoZn\" resname=\"label.includeNoWork\">\n        <source>label.includeNoWork</source>\n        <target>Eintr\u00e4ge ohne Buchungen anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"B.Dbbob\" resname=\"label.includeNoBudget\">\n        <source>label.includeNoBudget</source>\n        <target>Eintr\u00e4ge ohne Budget anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"Wq.h4nD\" resname=\"label.includeBudgetType_month\">\n        <source>label.includeBudgetType_month</source>\n        <target>Eintr\u00e4ge mit \u201eMonats-Budget\u201c anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"nVulc7.\" resname=\"label.includeBudgetType_full\">\n        <source>label.includeBudgetType_full</source>\n        <target>Eintr\u00e4ge mit \u201eLebenszyklus\u201c-Budget anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"3zn5T5e\" resname=\"label.not_exported\">\n        <source>label.not_exported</source>\n        <target>Nicht exportiert</target>\n      </trans-unit>\n      <trans-unit id=\"csF1D35\" resname=\"label.not_invoiced\">\n        <source>label.not_invoiced</source>\n        <target>Nicht abgerechnet</target>\n      </trans-unit>\n      <trans-unit id=\"AJ6dwR.\" resname=\"label.last_record_before\">\n        <source>label.last_record_before</source>\n        <target>Keine Zeitbuchung mehr seit</target>\n      </trans-unit>\n      <trans-unit id=\"qDnURk7\" resname=\"label.last_record\">\n        <source>label.last_record</source>\n        <target>Letzter Eintrag</target>\n      </trans-unit>\n      <trans-unit id=\"LXdqaTH\" resname=\"label.account_number\">\n        <source>label.account_number</source>\n        <target>Personalnummer</target>\n      </trans-unit>\n      <trans-unit id=\"PoF7hD8\" resname=\"label.budgetType\">\n        <source>label.budgetType</source>\n        <target>Budget-Typ</target>\n      </trans-unit>\n      <trans-unit id=\"cHfLJtL\" resname=\"label.budgetType_month\">\n        <source>label.budgetType_month</source>\n        <target>Monatlich</target>\n      </trans-unit>\n      <trans-unit id=\"9Rhadz6\" resname=\"label.budgetType_full\">\n        <source>label.budgetType_full</source>\n        <target>Lebenszyklus</target>\n      </trans-unit>\n      <trans-unit id=\"tvV0NhL\" resname=\"delete_warning.short_stats\">\n        <source>delete_warning.short_stats</source>\n        <target>Momentan existieren insgesamt %records% Zeiteintr\u00e4ge, welche sich auf eine Gesamtdauer von %duration% belaufen.</target>\n      </trans-unit>\n      <trans-unit id=\"Zif614Q\" resname=\"add_user.label\">\n        <source>add_user.label</source>\n        <target>Benutzer hinzuf\u00fcgen</target>\n      </trans-unit>\n      <trans-unit id=\"tp.gIrE\" resname=\"team.add_user.help\">\n        <source>team.add_user.help</source>\n        <target>Durch Auswahl wird dem Team ein neuer Benutzer hinzugef\u00fcgt. Sie k\u00f6nnen im Anschluss festlegen, ob der Benutzer ein Teamleiter sein soll.</target>\n      </trans-unit>\n      <trans-unit id=\"yNWIi5U\" resname=\"default_value_new\">\n        <source>default_value_new</source>\n        <target>Standardwert f\u00fcr neue Eintr\u00e4ge</target>\n      </trans-unit>\n      <!--\n          QUICK ENTRIES\n      -->\n      <trans-unit id=\"f8oNzSP\" resname=\"quick_entry.title\">\n        <source>quick_entry.title</source>\n        <target>Wochen-Arbeitsstunden</target>\n      </trans-unit>\n      <trans-unit id=\"61p_ckr\" resname=\"label.hours_24\">\n        <source>label.hours_24</source>\n        <target>24 Stunden</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"en\" datatype=\"plaintext\" original=\"messages.en.xlf\">\n    <body>\n      <!--\n              Global template keys\n            -->\n      <trans-unit id=\"N7mikjJ\" resname=\"time_tracking\">\n        <source>time_tracking</source>\n        <target>Time Tracking</target>\n      </trans-unit>\n      <trans-unit id=\"inmIkP6\" resname=\"yes\">\n        <source>yes</source>\n        <target>Yes</target>\n      </trans-unit>\n      <trans-unit id=\"k5Apjz_\" resname=\"no\">\n        <source>no</source>\n        <target>No</target>\n      </trans-unit>\n      <trans-unit id=\".3dyBTq\" resname=\"both\">\n        <source>both</source>\n        <target>Both</target>\n      </trans-unit>\n      <trans-unit id=\"KLIuHvt\" resname=\"This is a mandatory field\">\n        <source>This is a mandatory field</source>\n        <target>Mandatory</target>\n      </trans-unit>\n      <trans-unit id=\"_ohHsMM\" resname=\"create\">\n        <source>create</source>\n        <target>Create</target>\n      </trans-unit>\n      <trans-unit id=\"DYHuW58\" resname=\"confirm.delete\">\n        <source>confirm.delete</source>\n        <target>Do you really want to delete it?</target>\n      </trans-unit>\n      <trans-unit id=\"vDd3alC\" resname=\"admin_entity.delete_confirm\">\n        <source>admin_entity.delete_confirm</source>\n        <target>\n                    This data will be deleted as well!\n                    Alternatively, you can select an entry to which all data will be transferred:\n                </target>\n      </trans-unit>\n      <trans-unit id=\"COyxNde\" resname=\"delete.not_in_use\">\n        <source>delete.not_in_use</source>\n        <target>This item can be safely deleted.</target>\n      </trans-unit>\n      <trans-unit id=\"I3TZF5S\" resname=\"cancel\">\n        <source>cancel</source>\n        <target>Cancel</target>\n      </trans-unit>\n      <trans-unit id=\"PyZ8KrQ\" resname=\"confirm\">\n        <source>confirm</source>\n        <target>Confirm</target>\n      </trans-unit>\n      <trans-unit id=\".0CFrRV\" resname=\"upload\">\n        <source>upload</source>\n        <target>Upload</target>\n      </trans-unit>\n      <trans-unit id=\"JBkykGe\" resname=\"search\">\n        <source>search</source>\n        <target>Search</target>\n      </trans-unit>\n      <trans-unit id=\"IolBPQD\" resname=\"label.searchTerm\">\n        <source>label.searchTerm</source>\n        <target>Search term</target>\n      </trans-unit>\n      <trans-unit id=\"BytPihM\" resname=\"label.set_as_default\">\n        <source>label.set_as_default</source>\n        <target>Save setting as search favourite</target>\n      </trans-unit>\n      <trans-unit id=\"NNKq04n\" resname=\"label.remove_default\">\n        <source>label.remove_default</source>\n        <target>Delete search favourite</target>\n      </trans-unit>\n      <trans-unit id=\"31x84Dt\" resname=\"label.asc\">\n        <source>label.asc</source>\n        <target>Ascending</target>\n      </trans-unit>\n      <trans-unit id=\"0D_zaYd\" resname=\"label.desc\">\n        <source>label.desc</source>\n        <target>Descending</target>\n      </trans-unit>\n      <trans-unit id=\"Z8Fxbvf\" resname=\"label.orderBy\">\n        <source>label.orderBy</source>\n        <target>Order by</target>\n      </trans-unit>\n      <trans-unit id=\"hBNESu6\" resname=\"my.profile\">\n        <source>my.profile</source>\n        <target>My profile</target>\n      </trans-unit>\n      <trans-unit id=\"J258iS6\" resname=\"update_multiple\">\n        <source>update_multiple</source>\n        <target>%action% %count% entries?</target>\n      </trans-unit>\n      <trans-unit id=\"OTDmccn\" resname=\"attachments\">\n        <source>attachments</source>\n        <target>Files</target>\n      </trans-unit>\n      <trans-unit id=\"O5w1jzb\" resname=\"file\">\n        <source>file</source>\n        <target>File</target>\n      </trans-unit>\n      <trans-unit id=\"0M_Gylq\" resname=\"rates.empty\">\n        <source>rates.empty</source>\n        <target>No hourly rates have yet been configured.</target>\n      </trans-unit>\n      <trans-unit id=\"mflwMcX\" resname=\"rates.title\">\n        <source>rates.title</source>\n        <target>Fees</target>\n      </trans-unit>\n      <trans-unit id=\"zFfl7jw\" resname=\"sum.total\">\n        <source>sum.total</source>\n        <target>Total</target>\n      </trans-unit>\n      <trans-unit id=\"XP5zkiN\" resname=\"modal.dirty\">\n        <source>modal.dirty</source>\n        <target>The form has changed. Please click \"Save\" to save the changes or \"Close\" to cancel.</target>\n      </trans-unit>\n      <!--\n              Login / Security\n            -->\n      <trans-unit id=\"9pvowqn\" resname=\"label.password\">\n        <source>label.password</source>\n        <target>Password</target>\n      </trans-unit>\n      <trans-unit id=\"WxAnbP0\" resname=\"label.password_repeat\">\n        <source>label.password_repeat</source>\n        <target>Repeat password</target>\n      </trans-unit>\n      <trans-unit id=\"II4DGnv\" resname=\"label.logout\">\n        <source>label.logout</source>\n        <target>Logout</target>\n      </trans-unit>\n      <trans-unit id=\"hFFZGp_\" resname=\"label.user_profile\">\n        <source>label.user_profile</source>\n        <target>My profile</target>\n      </trans-unit>\n      <trans-unit id=\"gXZR.hV\" resname=\"label.api_token\">\n        <source>label.api_token</source>\n        <target>API password</target>\n      </trans-unit>\n      <trans-unit id=\"s_X2xpI\" resname=\"label.api_token_repeat\">\n        <source>label.api_token_repeat</source>\n        <target>Repeat API password</target>\n      </trans-unit>\n      <trans-unit id=\".372.o7\" resname=\"login_required\">\n        <source>login_required</source>\n        <target>Missing permission. Redirect to login?</target>\n      </trans-unit>\n      <trans-unit id=\".ndupSK\" resname=\"registration.check_email\">\n        <source>registration.check_email</source>\n        <target>An email has been sent to %email%. It contains an activation link you must click to activate your account.</target>\n      </trans-unit>\n      <trans-unit id=\"_cY.wHP\" resname=\"resetting.check_email\">\n        <source>resetting.check_email</source>\n        <target>\n                    An email has been sent. It contains a link you must click to reset your password.\n                    Note: You can only request a new password once within %tokenLifetime% hours.\n\n                    If you don't get an email check your spam folder or try again.\n                </target>\n      </trans-unit>\n      <!--\n              Menu / Navbar items\n            -->\n      <trans-unit id=\"UoOv6mx\" resname=\"menu.homepage\">\n        <source>menu.homepage</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"wvvYSw_\" resname=\"menu.admin\">\n        <source>menu.admin</source>\n        <target>Administration</target>\n      </trans-unit>\n      <trans-unit id=\"6OKwCUB\" resname=\"menu.system\">\n        <source>menu.system</source>\n        <target>System</target>\n      </trans-unit>\n      <trans-unit id=\"wBTFKFR\" resname=\"menu.logout\">\n        <source>menu.logout</source>\n        <target>Logout</target>\n      </trans-unit>\n      <trans-unit id=\"C0W7_BT\" resname=\"menu.timesheet\">\n        <source>menu.timesheet</source>\n        <target>My times</target>\n      </trans-unit>\n      <trans-unit id=\"Ci9W8.K\" resname=\"menu.invoice\">\n        <source>menu.invoice</source>\n        <target>Invoices</target>\n      </trans-unit>\n      <trans-unit id=\"I.eil4u\" resname=\"menu.export\">\n        <source>menu.export</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"ypVQO7o\" resname=\"menu.reporting\">\n        <source>menu.reporting</source>\n        <target>Reporting</target>\n      </trans-unit>\n      <trans-unit id=\"WGIhZv1\" resname=\"menu.admin_timesheet\">\n        <source>menu.admin_timesheet</source>\n        <target>Timesheets</target>\n      </trans-unit>\n      <trans-unit id=\"Y_jAD36\" resname=\"menu.admin_customer\">\n        <source>menu.admin_customer</source>\n        <target>Customers</target>\n      </trans-unit>\n      <trans-unit id=\"oDLp9t3\" resname=\"menu.admin_project\">\n        <source>menu.admin_project</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"wriHFwl\" resname=\"menu.admin_activity\">\n        <source>menu.admin_activity</source>\n        <target>Activities</target>\n      </trans-unit>\n      <trans-unit id=\"oZo1BnZ\" resname=\"menu.admin_user\">\n        <source>menu.admin_user</source>\n        <target>Users</target>\n      </trans-unit>\n      <trans-unit id=\"pA.bYIk\" resname=\"menu.admin_team\">\n        <source>menu.admin_team</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"hOZxcaK\" resname=\"menu.plugin\">\n        <source>menu.plugin</source>\n        <target>Plugins</target>\n      </trans-unit>\n      <trans-unit id=\"IXtkHRw\" resname=\"menu.system_configuration\">\n        <source>menu.system_configuration</source>\n        <target>Settings</target>\n      </trans-unit>\n      <trans-unit id=\"yo4f8Kh\" resname=\"menu.tags\">\n        <source>menu.tags</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"1kHI0gb\" resname=\"menu.doctor\">\n        <source>menu.doctor</source>\n        <target>Doctor</target>\n      </trans-unit>\n      <!--\n              Error templates\n            -->\n      <trans-unit id=\"Vz3Igj3\" resname=\"error.no_entries_found\">\n        <source>error.no_entries_found</source>\n        <target>No entries were found based on your selected filters.</target>\n      </trans-unit>\n      <trans-unit id=\"hlu4iX5\" resname=\"error.no_comments_found\">\n        <source>error.no_comments_found</source>\n        <target>There were no comments posted yet.</target>\n      </trans-unit>\n      <trans-unit id=\"XQ2.pq2\" resname=\"error.too_many_entries\">\n        <source>error.too_many_entries</source>\n        <target>The request could not be processed. Too many results were found.</target>\n      </trans-unit>\n      <!--\n              General labels\n            -->\n      <trans-unit id=\"H1qEi4d\" resname=\"label.date\">\n        <source>label.date</source>\n        <target>Date</target>\n      </trans-unit>\n      <trans-unit id=\"eJPDE76\" resname=\"label.starttime\">\n        <source>label.starttime</source>\n        <target>Begin</target>\n      </trans-unit>\n      <trans-unit id=\"uZlpDFh\" resname=\"label.endtime\">\n        <source>label.endtime</source>\n        <target>End</target>\n      </trans-unit>\n      <trans-unit id=\"cgpmY0I\" resname=\"label.duration\">\n        <source>label.duration</source>\n        <target>Duration</target>\n      </trans-unit>\n      <trans-unit id=\"O2X4xZH\" resname=\"label.user\">\n        <source>label.user</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"LDhDPrF\" resname=\"label.username\">\n        <source>label.username</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"4cEApe1\" resname=\"label.description\">\n        <source>label.description</source>\n        <target>Description</target>\n      </trans-unit>\n      <trans-unit id=\"ysOvPSq\" resname=\"label.name\">\n        <source>label.name</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"WqTho4C\" resname=\"label.comment\">\n        <source>label.comment</source>\n        <target>Comment</target>\n      </trans-unit>\n      <trans-unit id=\"txRonia\" resname=\"label.id\">\n        <source>label.id</source>\n        <target>ID</target>\n      </trans-unit>\n      <trans-unit id=\"CYpZwBz\" resname=\"label.visible\">\n        <source>label.visible</source>\n        <target>Visible</target>\n      </trans-unit>\n      <trans-unit id=\"2ktNwkr\" resname=\"label.budget\">\n        <source>label.budget</source>\n        <target>Budget</target>\n      </trans-unit>\n      <trans-unit id=\"x8TrOec\" resname=\"label.timeBudget\">\n        <source>label.timeBudget</source>\n        <target>Time budget</target>\n      </trans-unit>\n      <trans-unit id=\"l1wiL0h\" resname=\"label.activity\">\n        <source>label.activity</source>\n        <target>Activity</target>\n      </trans-unit>\n      <trans-unit id=\"KtnqJcg\" resname=\"label.project\">\n        <source>label.project</source>\n        <target>Project</target>\n      </trans-unit>\n      <trans-unit id=\"VNCQ7YU\" resname=\"label.tag\">\n        <source>label.tag</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"ijQyGRo\" resname=\"label.tags\">\n        <source>label.tags</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"VAbtieW\" resname=\"label.hourlyRate\">\n        <source>label.hourlyRate</source>\n        <target>Hourly rate</target>\n      </trans-unit>\n      <trans-unit id=\"IQ.tlua\" resname=\"label.hourly_rate\">\n        <source>label.hourly_rate</source>\n        <target>Hourly rate</target>\n      </trans-unit>\n      <trans-unit id=\"dezCZWf\" resname=\"label.skin\">\n        <source>label.skin</source>\n        <target>Display: colors</target>\n      </trans-unit>\n      <trans-unit id=\"O40d_3K\" resname=\"theme.layout\">\n        <source>Display: layout</source>\n        <target state=\"needs-translation\">Display: layout</target>\n      </trans-unit>\n      <trans-unit id=\"w8T34A6\" resname=\"label.hours\">\n        <source>label.hours</source>\n        <target>Hours</target>\n      </trans-unit>\n      <trans-unit id=\"Ih3IFXj\" resname=\"label.rate\">\n        <source>label.rate</source>\n        <target>Rate</target>\n      </trans-unit>\n      <trans-unit id=\"djL6LMC\" resname=\"help.rate\">\n        <source>help.rate</source>\n        <target>Hourly rate to be charged</target>\n      </trans-unit>\n      <trans-unit id=\"QzvjNwg\" resname=\"label.rate_internal\">\n        <source>label.rate_internal</source>\n        <target>Internal rate</target>\n      </trans-unit>\n      <trans-unit id=\"uz4SmfP\" resname=\"help.rate_internal\">\n        <source>help.rate_internal</source>\n        <target>Internal costs (if this is not specified, the normal rate is used)</target>\n      </trans-unit>\n      <trans-unit id=\"v72sA1c\" resname=\"label.recalculate_rates\">\n        <source>label.recalculate_rates</source>\n        <target>Recalculate rates</target>\n      </trans-unit>\n      <trans-unit id=\"foM2o5T\" resname=\"label.language\">\n        <source>label.language</source>\n        <target>Language</target>\n      </trans-unit>\n      <trans-unit id=\"Z8a2kUf\" resname=\"label.customer\">\n        <source>label.customer</source>\n        <target>Customer</target>\n      </trans-unit>\n      <trans-unit id=\"D2N6_cP\" resname=\"label.email\">\n        <source>label.email</source>\n        <target>Email</target>\n      </trans-unit>\n      <trans-unit id=\"Ss2xe99\" resname=\"label.team\">\n        <source>label.team</source>\n        <target>Team</target>\n      </trans-unit>\n      <trans-unit id=\"Zpj9UB4\" resname=\"label.teamlead\">\n        <source>label.teamlead</source>\n        <target>Teamlead</target>\n      </trans-unit>\n      <trans-unit id=\"hX.EQKy\" resname=\"label.create_more\">\n        <source>label.create_more</source>\n        <target>Create further entries</target>\n      </trans-unit>\n      <trans-unit id=\"LIOnolg\" resname=\"placeholder.type_message\">\n        <source>placeholder.type_message</source>\n        <target>Type your message\u2026</target>\n      </trans-unit>\n      <trans-unit id=\"vkHr9AP\" resname=\"label.billable\">\n        <source>label.billable</source>\n        <target>Billable</target>\n      </trans-unit>\n      <!--\n              Buttons & Actions\n            -->\n      <trans-unit id=\"zldXQq6\" resname=\"label.actions\">\n        <source>label.actions</source>\n        <target>Actions</target>\n      </trans-unit>\n      <trans-unit id=\"ovKkXwU\" resname=\"action.edit\">\n        <source>action.edit</source>\n        <target>Edit</target>\n      </trans-unit>\n      <trans-unit id=\"jdbtx6z\" resname=\"action.add\">\n        <source>action.add</source>\n        <target>Add</target>\n      </trans-unit>\n      <trans-unit id=\"hTKWQ6g\" resname=\"action.delete\">\n        <source>action.delete</source>\n        <target>Delete</target>\n      </trans-unit>\n      <trans-unit id=\"HLtdhYw\" resname=\"action.save\">\n        <source>action.save</source>\n        <target>Save</target>\n      </trans-unit>\n      <trans-unit id=\"9hpJPiG\" resname=\"action.save_all\">\n        <source>action.save_all</source>\n        <target>Save all</target>\n      </trans-unit>\n      <trans-unit id=\"tKZKI2Z\" resname=\"action.reset\">\n        <source>action.reset</source>\n        <target>Reset</target>\n      </trans-unit>\n      <trans-unit id=\"Eb7Ygpo\" resname=\"action.back\">\n        <source>action.back</source>\n        <target>Back</target>\n      </trans-unit>\n      <trans-unit id=\"wCazS.X\" resname=\"action.close\">\n        <source>action.close</source>\n        <target>Close</target>\n      </trans-unit>\n      <!--\n              Dashboard\n            -->\n      <trans-unit id=\"3bqLM8Q\" resname=\"dashboard.title\">\n        <source>dashboard.title</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"3PYadzb\" resname=\"dashboard.subtitle\">\n        <source>dashboard.subtitle</source>\n        <target>Welcome!</target>\n      </trans-unit>\n      <trans-unit id=\"yEa1Yz3\" resname=\"dashboard.all\">\n        <source>dashboard.all</source>\n        <target>All users</target>\n      </trans-unit>\n      <!--\n              Widgets\n            -->\n      <trans-unit id=\"giznf_R\" resname=\"more.info.link\">\n        <source>more.info.link</source>\n        <target>More info</target>\n      </trans-unit>\n      <trans-unit id=\"4iliLZT\" resname=\"label.toggle_dropdown\">\n        <source>label.toggle_dropdown</source>\n        <target>Show menu</target>\n      </trans-unit>\n      <trans-unit id=\"f3KMQJh\" resname=\"label.my_teams\">\n        <source>label.my_teams</source>\n        <target>My teams</target>\n      </trans-unit>\n      <trans-unit id=\"jTiYRIu\" resname=\"label.my_team_projects\">\n        <source>label.my_team_projects</source>\n        <target>My projects</target>\n      </trans-unit>\n      <trans-unit id=\"1PQHtXu\" resname=\"label.progress\">\n        <source>label.progress</source>\n        <target>Progress</target>\n      </trans-unit>\n      <trans-unit id=\"vTY9SUk\" resname=\"label.plus_more\">\n        <source>label.plus_more</source>\n        <target>+%count% more</target>\n      </trans-unit>\n      <!--\n              Timesheet\n            -->\n      <trans-unit id=\"VXj0Y3h\" resname=\"timesheet.title\">\n        <source>timesheet.title</source>\n        <target>My times</target>\n      </trans-unit>\n      <trans-unit id=\"dwEVXUR\" resname=\"timesheet.edit\">\n        <source>timesheet.edit</source>\n        <target>Edit record</target>\n      </trans-unit>\n      <trans-unit id=\"trDJK9W\" resname=\"label.begin\">\n        <source>label.begin</source>\n        <target>From</target>\n      </trans-unit>\n      <trans-unit id=\"R9typUt\" resname=\"label.end\">\n        <source>label.end</source>\n        <target>To</target>\n      </trans-unit>\n      <trans-unit id=\"egaNXjp\" resname=\"label.daterange\">\n        <source>label.daterange</source>\n        <target>Time range</target>\n      </trans-unit>\n      <trans-unit id=\"UbnqJLn\" resname=\"modal.columns.title\">\n        <source>modal.columns.title</source>\n        <target>Change column visibility</target>\n      </trans-unit>\n      <trans-unit id=\"EbfIoLp\" resname=\"modal.columns.description\">\n        <source>modal.columns.description</source>\n        <target>Upon saving the un-checked columns will be hidden and this setting will be stored in a browser cookie. If you delete your cookies, the settings will be reversed.</target>\n      </trans-unit>\n      <trans-unit id=\"5gjqxgK\" resname=\"label.fixedRate\">\n        <source>label.fixedRate</source>\n        <target>Fixed rate</target>\n      </trans-unit>\n      <trans-unit id=\"b43sCwO\" resname=\"help.fixedRate\">\n        <source>help.fixedRate</source>\n        <target>Each time record gets the same value, regardless of its duration</target>\n      </trans-unit>\n      <trans-unit id=\"YTSS_Q1\" resname=\"label.color\">\n        <source>label.color</source>\n        <target>Color</target>\n      </trans-unit>\n      <trans-unit id=\"EoouxGX\" resname=\"label.replaceTags\">\n        <source>label.replaceTags</source>\n        <target>Replace tags</target>\n      </trans-unit>\n      <trans-unit id=\"BxkmaKz\" resname=\"label.appendTags\">\n        <source>label.appendTags</source>\n        <target>Append tags</target>\n      </trans-unit>\n      <!--\n              User profile\n            -->\n      <trans-unit id=\"1_wnK76\" resname=\"profile.title\">\n        <source>profile.title</source>\n        <target>User profile</target>\n      </trans-unit>\n      <trans-unit id=\"HWKJZ0T\" resname=\"profile.about_me\">\n        <source>profile.about_me</source>\n        <target>About me</target>\n      </trans-unit>\n      <trans-unit id=\"Fm.kwVn\" resname=\"profile.first_entry\">\n        <source>profile.first_entry</source>\n        <target>Working since</target>\n      </trans-unit>\n      <trans-unit id=\"1c0EQaz\" resname=\"profile.registration_date\">\n        <source>profile.registration_date</source>\n        <target>Registered at</target>\n      </trans-unit>\n      <trans-unit id=\"xEYQXPy\" resname=\"profile.settings\">\n        <source>profile.settings</source>\n        <target>Profile</target>\n      </trans-unit>\n      <trans-unit id=\"A6TLLQa\" resname=\"profile.password\">\n        <source>profile.password</source>\n        <target>Password</target>\n      </trans-unit>\n      <trans-unit id=\"Z34ZpjK\" resname=\"profile.api-token\">\n        <source>profile.api-token</source>\n        <target>API</target>\n      </trans-unit>\n      <trans-unit id=\"ygtTz8.\" resname=\"profile.roles\">\n        <source>profile.roles</source>\n        <target>Roles</target>\n      </trans-unit>\n      <trans-unit id=\"DZ7XGML\" resname=\"profile.teams\">\n        <source>profile.teams</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"MQKiG33\" resname=\"profile.preferences\">\n        <source>profile.preferences</source>\n        <target>Preferences</target>\n      </trans-unit>\n      <trans-unit id=\"Eq78QrH\" resname=\"label.theme.collapsed_sidebar\">\n        <source>label.theme.collapsed_sidebar</source>\n        <target>Minimize the left sidebar</target>\n      </trans-unit>\n      <trans-unit id=\"0sgroZi\" resname=\"label.calendar.initial_view\">\n        <source>label.calendar.initial_view</source>\n        <target>Initial calendar view</target>\n      </trans-unit>\n      <trans-unit id=\"iqQsgIW\" resname=\"label.login.initial_view\">\n        <source>label.login.initial_view</source>\n        <target>Initial view after login</target>\n      </trans-unit>\n      <trans-unit id=\"hO7mkmf\" resname=\"label.lastLogin\">\n        <source>label.lastLogin</source>\n        <target>Last login</target>\n      </trans-unit>\n      <!-- Options for user-preference label.calendar.initial_view -->\n      <trans-unit id=\"pcfRcZ4\" resname=\"month\">\n        <source>month</source>\n        <target>Month</target>\n      </trans-unit>\n      <trans-unit id=\"Irm6dfx\" resname=\"agendaWeek\">\n        <source>agendaWeek</source>\n        <target>Week</target>\n      </trans-unit>\n      <trans-unit id=\"Q0Zip02\" resname=\"agendaDay\">\n        <source>agendaDay</source>\n        <target>Day</target>\n      </trans-unit>\n      <trans-unit id=\"rYzHCFd\" resname=\"label.timesheet.daily_stats\">\n        <source>label.timesheet.daily_stats</source>\n        <target>Show daily stats in timesheet</target>\n      </trans-unit>\n      <trans-unit id=\"tSlqVK2\" resname=\"label.timesheet.export_decimal\">\n        <source>label.timesheet.export_decimal</source>\n        <target>Use decimal duration in export</target>\n      </trans-unit>\n      <trans-unit id=\"5R.QsZ3\" resname=\"theme.update_browser_title\">\n        <source>theme.update_browser_title</source>\n        <target>Update browser title</target>\n      </trans-unit>\n      <!--\n              User timesheet calendar\n            -->\n      <trans-unit id=\"HWiuMV6\" resname=\"calendar.title\">\n        <source>calendar.title</source>\n        <target>Calendar</target>\n      </trans-unit>\n      <trans-unit id=\"75kjTF9\" resname=\"calendar.drag_and_drop.delete\">\n        <source>calendar.drag_and_drop.delete</source>\n        <target>If you want to delete an entry, you must drag it onto the button.</target>\n      </trans-unit>\n      <!--\n              Admin: Timesheet\n            -->\n      <trans-unit id=\"bSDjzZL\" resname=\"admin_timesheet.title\">\n        <source>admin_timesheet.title</source>\n        <target>Timesheets</target>\n      </trans-unit>\n      <!--\n              Admin: Projects\n            -->\n      <trans-unit id=\"DFjFRGe\" resname=\"admin_project.title\">\n        <source>admin_project.title</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"yLOqEX_\" resname=\"label.project_start\">\n        <source>label.project_start</source>\n        <target>Project start</target>\n      </trans-unit>\n      <trans-unit id=\"4kQGReV\" resname=\"label.project_end\">\n        <source>label.project_end</source>\n        <target>Project end</target>\n      </trans-unit>\n      <!--\n              Admin: Activity\n            -->\n      <trans-unit id=\"auu8q0u\" resname=\"admin_activity.title\">\n        <source>admin_activity.title</source>\n        <target>Activities</target>\n      </trans-unit>\n      <!--\n              Admin: Customer\n            -->\n      <trans-unit id=\"2TvKX9Z\" resname=\"admin_customer.title\">\n        <source>admin_customer.title</source>\n        <target>Customer</target>\n      </trans-unit>\n      <trans-unit id=\"39AtPxQ\" resname=\"label.number\">\n        <source>label.number</source>\n        <target>Account</target>\n      </trans-unit>\n      <trans-unit id=\"7jfRn_1\" resname=\"label.company\">\n        <source>label.company</source>\n        <target>Company name</target>\n      </trans-unit>\n      <trans-unit id=\"GOStgLi\" resname=\"label.vat\">\n        <source>label.vat</source>\n        <target>Tax</target>\n      </trans-unit>\n      <trans-unit id=\"Dgmh_mv\" resname=\"label.vat_id\">\n        <source>label.vat_id</source>\n        <target>VAT-ID</target>\n      </trans-unit>\n      <trans-unit id=\"YNGNfGn\" resname=\"label.tax_rate\">\n        <source>label.tax_rate</source>\n        <target>Tax rate</target>\n      </trans-unit>\n      <trans-unit id=\"0tkOMo1\" resname=\"label.contact\">\n        <source>label.contact</source>\n        <target>Contact</target>\n      </trans-unit>\n      <trans-unit id=\"c9W5AO4\" resname=\"label.address\">\n        <source>label.address</source>\n        <target>Address</target>\n      </trans-unit>\n      <trans-unit id=\"k7MJQ82\" resname=\"label.country\">\n        <source>label.country</source>\n        <target>Country</target>\n      </trans-unit>\n      <trans-unit id=\"g03c_vw\" resname=\"label.phone\">\n        <source>label.phone</source>\n        <target>Phone</target>\n      </trans-unit>\n      <trans-unit id=\"eRyhERS\" resname=\"label.fax\">\n        <source>label.fax</source>\n        <target>Fax</target>\n      </trans-unit>\n      <trans-unit id=\"AawT9pW\" resname=\"label.mobile\">\n        <source>label.mobile</source>\n        <target>Mobile</target>\n      </trans-unit>\n      <trans-unit id=\"PS9IH_t\" resname=\"label.homepage\">\n        <source>label.homepage</source>\n        <target>Homepage</target>\n      </trans-unit>\n      <trans-unit id=\"dmtPdwq\" resname=\"label.timezone\">\n        <source>label.timezone</source>\n        <target>Timezone</target>\n      </trans-unit>\n      <trans-unit id=\"otd2FZd\" resname=\"label.currency\">\n        <source>label.currency</source>\n        <target>Currency</target>\n      </trans-unit>\n      <!--\n              Admin: Users\n            -->\n      <trans-unit id=\"t34EvnF\" resname=\"admin_user.title\">\n        <source>admin_user.title</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"TRDzmCV\" resname=\"label.alias\">\n        <source>label.alias</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"UrRn8xj\" resname=\"label.title\">\n        <source>label.title</source>\n        <target>Title</target>\n      </trans-unit>\n      <trans-unit id=\"nWMH_Nr\" resname=\"label.avatar\">\n        <source>label.avatar</source>\n        <target>Profile image (URL)</target>\n      </trans-unit>\n      <trans-unit id=\"KtTP.Sh\" resname=\"label.active\">\n        <source>label.active</source>\n        <target>Active</target>\n      </trans-unit>\n      <trans-unit id=\"iD6CNOO\" resname=\"label.roles\">\n        <source>label.roles</source>\n        <target>Role</target>\n      </trans-unit>\n      <trans-unit id=\"ZlZ20pG\" resname=\"user_permissions.title\">\n        <source>user_permissions.title</source>\n        <target>User permissions</target>\n      </trans-unit>\n      <trans-unit id=\"G.GEdlk\" resname=\"user_role.title\">\n        <source>user_role.title</source>\n        <target>User role</target>\n      </trans-unit>\n      <trans-unit id=\"E7G60OF\" resname=\"Allowed character: A-Z and _\">\n        <source>Allowed character: A-Z and _</source>\n        <target>Allowed character: A-Z and _</target>\n      </trans-unit>\n      <!--\n              Admin: Plugins\n            -->\n      <trans-unit id=\"d75KAlJ\" resname=\"label.version\">\n        <source>label.version</source>\n        <target>Version</target>\n      </trans-unit>\n      <trans-unit id=\"8Rfa01v\" resname=\"label.required_version\">\n        <source>label.required_version</source>\n        <target>Compatible with</target>\n      </trans-unit>\n      <!--\n              ROLES\n            -->\n      <trans-unit id=\"WRuKTcz\" resname=\"ROLE_SUPER_ADMIN\">\n        <source>ROLE_SUPER_ADMIN</source>\n        <target>System-Admin</target>\n      </trans-unit>\n      <trans-unit id=\"718iPw6\" resname=\"ROLE_ADMIN\">\n        <source>ROLE_ADMIN</source>\n        <target>Administrator</target>\n      </trans-unit>\n      <trans-unit id=\"yttGLAB\" resname=\"ROLE_TEAMLEAD\">\n        <source>ROLE_TEAMLEAD</source>\n        <target>Teamlead</target>\n      </trans-unit>\n      <trans-unit id=\"rvO5ZXf\" resname=\"ROLE_USER\">\n        <source>ROLE_USER</source>\n        <target>User</target>\n      </trans-unit>\n      <!--\n              Statistics data for Dashboard & Users profile\n            -->\n      <trans-unit id=\"lfSTZGe\" resname=\"stats.workingTimeToday\">\n        <source>stats.workingTimeToday</source>\n        <target>Today, %day%</target>\n      </trans-unit>\n      <trans-unit id=\"XdYs3I8\" resname=\"stats.workingTimeWeek\">\n        <source>stats.workingTimeWeek</source>\n        <target>Calendar week %week%</target>\n      </trans-unit>\n      <trans-unit id=\"JIKNAYP\" resname=\"stats.workingTimeMonth\">\n        <source>stats.workingTimeMonth</source>\n        <target>%month% %year%</target>\n      </trans-unit>\n      <trans-unit id=\"JnUFsNi\" resname=\"stats.workingTimeYear\">\n        <source>stats.workingTimeYear</source>\n        <target>Full year %year%</target>\n      </trans-unit>\n      <trans-unit id=\"HWB4OGJ\" resname=\"stats.workingTimeFinancialYear\">\n        <source>stats.workingTimeFinancialYear</source>\n        <target>Financial year</target>\n      </trans-unit>\n      <trans-unit id=\"BXBFJP8\" resname=\"stats.workingTime\">\n        <source>stats.workingTime</source>\n        <target>Working time</target>\n      </trans-unit>\n      <trans-unit id=\"pX_3dNm\" resname=\"stats.revenue\">\n        <source>stats.revenue</source>\n        <target>Revenues</target>\n      </trans-unit>\n      <trans-unit id=\"TdBJBAl\" resname=\"stats.durationToday\">\n        <source>stats.durationToday</source>\n        <target>Working hours today</target>\n      </trans-unit>\n      <trans-unit id=\"XhKalZH\" resname=\"stats.durationWeek\">\n        <source>stats.durationWeek</source>\n        <target>Working hours this week</target>\n      </trans-unit>\n      <trans-unit id=\"uaOwf_P\" resname=\"stats.durationMonth\">\n        <source>stats.durationMonth</source>\n        <target>Working hours this month</target>\n      </trans-unit>\n      <trans-unit id=\"WqF84KR\" resname=\"stats.durationYear\">\n        <source>stats.durationYear</source>\n        <target>Working hours this year</target>\n      </trans-unit>\n      <trans-unit id=\"xkugSAA\" resname=\"stats.durationFinancialYear\">\n        <source>stats.durationFinancialYear</source>\n        <target>Working hours this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"YtvPnl1\" resname=\"stats.durationTotal\">\n        <source>stats.durationTotal</source>\n        <target>Working hours total</target>\n      </trans-unit>\n      <trans-unit id=\"IFOLMgp\" resname=\"stats.yourWorkingHours\">\n        <source>stats.yourWorkingHours</source>\n        <target>My working hours</target>\n      </trans-unit>\n      <trans-unit id=\"023M9Ta\" resname=\"stats.amountToday\">\n        <source>stats.amountToday</source>\n        <target>Revenue today</target>\n      </trans-unit>\n      <trans-unit id=\"xnJvYAE\" resname=\"stats.amountWeek\">\n        <source>stats.amountWeek</source>\n        <target>Revenue this week</target>\n      </trans-unit>\n      <trans-unit id=\"ulr3reE\" resname=\"stats.amountMonth\">\n        <source>stats.amountMonth</source>\n        <target>Revenue this month</target>\n      </trans-unit>\n      <trans-unit id=\"bQZyZaO\" resname=\"stats.amountYear\">\n        <source>stats.amountYear</source>\n        <target>Revenue this year</target>\n      </trans-unit>\n      <trans-unit id=\"wuUWovn\" resname=\"stats.amountFinancialYear\">\n        <source>stats.amountFinancialYear</source>\n        <target>Revenue this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"Z0fz23v\" resname=\"stats.amountTotal\">\n        <source>stats.amountTotal</source>\n        <target>Total revenue</target>\n      </trans-unit>\n      <trans-unit id=\"xyiadv3\" resname=\"stats.userActiveToday\">\n        <source>stats.userActiveToday</source>\n        <target>Active users today</target>\n      </trans-unit>\n      <trans-unit id=\"knMHaeO\" resname=\"stats.userActiveWeek\">\n        <source>stats.userActiveWeek</source>\n        <target>Active users this week</target>\n      </trans-unit>\n      <trans-unit id=\"adzVDgb\" resname=\"stats.userActiveMonth\">\n        <source>stats.userActiveMonth</source>\n        <target>Active users this month</target>\n      </trans-unit>\n      <trans-unit id=\"AswjFvh\" resname=\"stats.userActiveYear\">\n        <source>stats.userActiveYear</source>\n        <target>Active users this year</target>\n      </trans-unit>\n      <trans-unit id=\"zMY6gkY\" resname=\"stats.userActiveFinancialYear\">\n        <source>stats.userActiveFinancialYear</source>\n        <target>Active users this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"dLTb1Po\" resname=\"stats.userActiveTotal\">\n        <source>stats.userActiveTotal</source>\n        <target>Active users ever</target>\n      </trans-unit>\n      <trans-unit id=\"lEW82ex\" resname=\"stats.activeRecordings\">\n        <source>stats.activeRecordings</source>\n        <target>Active records</target>\n      </trans-unit>\n      <trans-unit id=\"t5eIWp8\" resname=\"stats.userTotal\">\n        <source>stats.userTotal</source>\n        <target>Users</target>\n      </trans-unit>\n      <trans-unit id=\"Bor.76M\" resname=\"stats.activityTotal\">\n        <source>stats.activityTotal</source>\n        <target>Activities</target>\n      </trans-unit>\n      <trans-unit id=\"67uSaR3\" resname=\"stats.projectTotal\">\n        <source>stats.projectTotal</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"tnD6aPj\" resname=\"stats.customerTotal\">\n        <source>stats.customerTotal</source>\n        <target>Customers</target>\n      </trans-unit>\n      <trans-unit id=\"unC5MXv\" resname=\"stats.percentUsed\">\n        <source>stats.percentUsed</source>\n        <target>%percent%% used</target>\n      </trans-unit>\n      <trans-unit id=\"HkjvwLc\" resname=\"stats.percentUsedLeft\">\n        <source>stats.percentUsedLeft</source>\n        <target>%percent%% used (%left% are still open)</target>\n      </trans-unit>\n      <trans-unit id=\"xN7MfSA\" resname=\"stats.percentUsed_month\">\n        <source>stats.percentUsed_month</source>\n        <target>%percent%% used this month</target>\n      </trans-unit>\n      <trans-unit id=\"vWJPpYU\" resname=\"stats.percentUsedLeft_month\">\n        <source>stats.percentUsedLeft_month</source>\n        <target>%percent%% used (%left% are still open this month)</target>\n      </trans-unit>\n      <!--\n              Invoice\n            -->\n      <trans-unit id=\"Oq.KtC6\" resname=\"admin_invoice_template.title\">\n        <source>admin_invoice_template.title</source>\n        <target>Invoice template</target>\n      </trans-unit>\n      <trans-unit id=\"iERywrp\" resname=\"invoice.title\">\n        <source>invoice.title</source>\n        <target>Invoices</target>\n      </trans-unit>\n      <trans-unit id=\"ov4OQOh\" resname=\"invoice.filter\">\n        <source>invoice.filter</source>\n        <target>Filter invoice data</target>\n      </trans-unit>\n      <trans-unit id=\"7H7P1mE\" resname=\"button.preview\">\n        <source>button.preview</source>\n        <target>Preview</target>\n      </trans-unit>\n      <trans-unit id=\"IQ9DUOW\" resname=\"button.preview_print\">\n        <source>button.preview_print</source>\n        <target>Print preview</target>\n      </trans-unit>\n      <trans-unit id=\"X70dwP8\" resname=\"button.print\">\n        <source>button.print</source>\n        <target>Print</target>\n      </trans-unit>\n      <trans-unit id=\"W_TXvSi\" resname=\"button.csv\">\n        <source>button.csv</source>\n        <target>CSV</target>\n      </trans-unit>\n      <trans-unit id=\"vC2IsaP\" resname=\"button.xlsx\">\n        <source>button.xlsx</source>\n        <target>Excel</target>\n      </trans-unit>\n      <trans-unit id=\"aAa5uRR\" resname=\"button.pdf\">\n        <source>button.pdf</source>\n        <target>PDF</target>\n      </trans-unit>\n      <trans-unit id=\"ulYFDIo\" resname=\"button.ods\">\n        <source>button.ods</source>\n        <target>ODS</target>\n      </trans-unit>\n      <trans-unit id=\"zPcx3O_\" resname=\"invoice_print\">\n        <source>invoice_print</source>\n        <target>Invoice</target>\n      </trans-unit>\n      <trans-unit id=\"7J7G3Vr\" resname=\"label.mark_as_exported\">\n        <source>label.mark_as_exported</source>\n        <target>Mark as exported</target>\n      </trans-unit>\n      <trans-unit id=\"p0IprAw\" resname=\"label.template\">\n        <source>label.template</source>\n        <target>Template</target>\n      </trans-unit>\n      <trans-unit id=\"zfIRxJh\" resname=\"label.due_days\">\n        <source>label.due_days</source>\n        <target>Payment term in days</target>\n      </trans-unit>\n      <trans-unit id=\"rAJrxSK\" resname=\"invoice.due_days\">\n        <source>invoice.due_days</source>\n        <target>Payment target</target>\n      </trans-unit>\n      <trans-unit id=\"Xij3oQl\" resname=\"invoice.payment_date\">\n        <source>invoice.payment_date</source>\n        <target>Payment date</target>\n      </trans-unit>\n      <trans-unit id=\"4XKFnWh\" resname=\"invoice.from\">\n        <source>invoice.from</source>\n        <target>From</target>\n      </trans-unit>\n      <trans-unit id=\"hx7vsMA\" resname=\"invoice.to\">\n        <source>invoice.to</source>\n        <target>To</target>\n      </trans-unit>\n      <trans-unit id=\"x_W5sV4\" resname=\"invoice.number\">\n        <source>invoice.number</source>\n        <target>Invoice number</target>\n      </trans-unit>\n      <trans-unit id=\"86KyrKO\" resname=\"invoice.subtotal\">\n        <source>invoice.subtotal</source>\n        <target>Subtotal</target>\n      </trans-unit>\n      <trans-unit id=\"EO57yXg\" resname=\"invoice.tax\">\n        <source>invoice.tax</source>\n        <target>Tax</target>\n      </trans-unit>\n      <trans-unit id=\"N68vyvo\" resname=\"invoice.total\">\n        <source>invoice.total</source>\n        <target>Total</target>\n      </trans-unit>\n      <trans-unit id=\"TPzFWUs\" resname=\"invoice.service_date\">\n        <source>invoice.service_date</source>\n        <target>Service date</target>\n      </trans-unit>\n      <trans-unit id=\"6x24VVR\" resname=\"label.amount\">\n        <source>label.amount</source>\n        <target>Quantity</target>\n      </trans-unit>\n      <trans-unit id=\"g7EpaPY\" resname=\"label.total_rate\">\n        <source>label.total_rate</source>\n        <target>Total price</target>\n      </trans-unit>\n      <trans-unit id=\"MF3MdTu\" resname=\"label.unit_price\">\n        <source>label.unit_price</source>\n        <target>Unit price</target>\n      </trans-unit>\n      <trans-unit id=\"77aZC3r\" resname=\"label.payment_terms\">\n        <source>label.payment_terms</source>\n        <target>Terms of payment</target>\n      </trans-unit>\n      <trans-unit id=\"9p2KQag\" resname=\"invoice.signature_user\">\n        <source>invoice.signature_user</source>\n        <target>Confirmation: Date / Consultant's name / Signature</target>\n      </trans-unit>\n      <trans-unit id=\"Q9ykNhO\" resname=\"invoice.signature_customer\">\n        <source>invoice.signature_customer</source>\n        <target>Confirmation: Date / Customer's name / Signature</target>\n      </trans-unit>\n      <trans-unit id=\"c3d6p33\" resname=\"invoice.total_working_time\">\n        <source>invoice.total_working_time</source>\n        <target>Total duration</target>\n      </trans-unit>\n      <trans-unit id=\"BS00SS7\" resname=\"label.orderNumber\">\n        <source>label.orderNumber</source>\n        <target>Order number</target>\n      </trans-unit>\n      <trans-unit id=\"as948k9\" resname=\"label.orderDate\">\n        <source>label.orderDate</source>\n        <target>Order date</target>\n      </trans-unit>\n      <trans-unit id=\"RRj6PYN\" resname=\"label.invoice_tax_number\">\n        <source>label.invoice_tax_number</source>\n        <target>VAT no.:</target>\n      </trans-unit>\n      <trans-unit id=\"uFZA7Uf\" resname=\"label.invoice_bank_account\">\n        <source>label.invoice_bank_account</source>\n        <target>Bank account</target>\n      </trans-unit>\n      <trans-unit id=\"9VxfLLy\" resname=\"label.decimalDuration\">\n        <source>label.decimalDuration</source>\n        <target>Display duration as decimal number</target>\n      </trans-unit>\n      <trans-unit id=\"hzhzbqw\" resname=\"label.status\">\n        <source>label.status</source>\n        <target>Status</target>\n      </trans-unit>\n      <trans-unit id=\"X_NRsed\" resname=\"status.new\">\n        <source>status.new</source>\n        <target>New</target>\n      </trans-unit>\n      <trans-unit id=\"Uvo1CbP\" resname=\"status.pending\">\n        <source>status.pending</source>\n        <target>Pending</target>\n      </trans-unit>\n      <trans-unit id=\"PHJwR4w\" resname=\"status.paid\">\n        <source>status.paid</source>\n        <target>Paid</target>\n      </trans-unit>\n      <trans-unit id=\"gT9W2pZ\" resname=\"status.canceled\">\n        <source>status.canceled</source>\n        <target>Canceled</target>\n      </trans-unit>\n      <trans-unit id=\"crrlEUA\" resname=\"preview.skipped_rows\">\n        <source>preview.skipped_rows</source>\n        <target>Skipped preview of %rows% more rows \u2026</target>\n      </trans-unit>\n      <!--\n              Export\n            -->\n      <trans-unit id=\"F6Jmro7\" resname=\"export.title\">\n        <source>export.title</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"iwWaUoa\" resname=\"export.filter\">\n        <source>export.filter</source>\n        <target>Filter data for export</target>\n      </trans-unit>\n      <trans-unit id=\"vjmoQGo\" resname=\"export.period\">\n        <source>export.period</source>\n        <target>Period</target>\n      </trans-unit>\n      <trans-unit id=\"3CQ7A2m\" resname=\"export.document_title\">\n        <source>export.document_title</source>\n        <target>Export of timesheets</target>\n      </trans-unit>\n      <trans-unit id=\"d5wyWRD\" resname=\"export.full_list\">\n        <source>export.full_list</source>\n        <target>Full list</target>\n      </trans-unit>\n      <trans-unit id=\"N778uJ6\" resname=\"export.summary\">\n        <source>export.summary</source>\n        <target>Summary</target>\n      </trans-unit>\n      <trans-unit id=\"ElDyzrx\" resname=\"export.page_of\">\n        <source>export.page_of</source>\n        <target>Page %page% of %pages%</target>\n      </trans-unit>\n      <trans-unit id=\"vKY0tof\" resname=\"export.date_copyright\">\n        <source>export.date_copyright</source>\n        <target>Created %date% with %kimai%</target>\n      </trans-unit>\n      <trans-unit id=\"W92QGbY\" resname=\"export.warn_result_amount\">\n        <source>export.warn_result_amount</source>\n        <target>Your search leads to %count% results. If the export fails, you have to narrow down your search further.</target>\n      </trans-unit>\n      <trans-unit id=\"pnGDFmf\" resname=\"label.type\">\n        <source>label.type</source>\n        <target>Type</target>\n      </trans-unit>\n      <!--\n             Navbar - recent entries and activities\n            -->\n      <trans-unit id=\"OxdYMR3\" resname=\"active.entries\">\n        <source>active.entries</source>\n        <target>Your active time measurements</target>\n      </trans-unit>\n      <trans-unit id=\"e7XS97t\" resname=\"timesheet.all\">\n        <source>timesheet.all</source>\n        <target>Show all records</target>\n      </trans-unit>\n      <trans-unit id=\"WVU_S.A\" resname=\"recent.activities\">\n        <source>recent.activities</source>\n        <target>Restart one of your last activities</target>\n      </trans-unit>\n      <trans-unit id=\"SLV47Uu\" resname=\"recent.activities.format\">\n        <source>recent.activities.format</source>\n        <target>%activity% in %project% for %customer%</target>\n      </trans-unit>\n      <trans-unit id=\"dTHY7Mw\" resname=\"timesheet.start\">\n        <source>timesheet.start</source>\n        <target>Create new time-record</target>\n      </trans-unit>\n      <!--\n              TOOLBARS\n            -->\n      <trans-unit id=\"MPimOps\" resname=\"label.pageSize\">\n        <source>label.pageSize</source>\n        <target>Page size</target>\n      </trans-unit>\n      <trans-unit id=\"KhyA_PW\" resname=\"label.entryState\">\n        <source>label.entryState</source>\n        <target>Records</target>\n      </trans-unit>\n      <trans-unit id=\"X3JM9wj\" resname=\"label.exported\">\n        <source>label.exported</source>\n        <target>Exported</target>\n      </trans-unit>\n      <trans-unit id=\"_DDecAV\" resname=\"entryState.exported\">\n        <source>entryState.exported</source>\n        <target>Cleared</target>\n      </trans-unit>\n      <trans-unit id=\"ccCiXyR\" resname=\"entryState.not_exported\">\n        <source>entryState.not_exported</source>\n        <target>Open</target>\n      </trans-unit>\n      <trans-unit id=\"do7fP0q\" resname=\"entryState.all\">\n        <source>entryState.all</source>\n        <target>All</target>\n      </trans-unit>\n      <trans-unit id=\"xm7mqoK\" resname=\"entryState.running\">\n        <source>entryState.running</source>\n        <target>Active</target>\n      </trans-unit>\n      <trans-unit id=\"spHpd_I\" resname=\"entryState.stopped\">\n        <source>entryState.stopped</source>\n        <target>Stopped</target>\n      </trans-unit>\n      <trans-unit id=\"BhsaLxX\" resname=\"export.clear_all\">\n        <source>export.clear_all</source>\n        <target>Mark all shown records as open?</target>\n      </trans-unit>\n      <trans-unit id=\"qtjPKUT\" resname=\"export.mark_all\">\n        <source>export.mark_all</source>\n        <target>Mark all shown records as cleared?</target>\n      </trans-unit>\n      <trans-unit id=\"keE.KO.\" resname=\"Only global\">\n        <source>Only global</source>\n        <target state=\"needs-translation\">Only global</target>\n      </trans-unit>\n      <trans-unit id=\"2Ek7sXu\" resname=\"label.batch_meta_fields\">\n        <source>label.batch_meta_fields</source>\n        <target>Additional fields</target>\n      </trans-unit>\n      <trans-unit id=\"9Wt8Pp_\" resname=\"help.batch_meta_fields\">\n        <source>help.batch_meta_fields</source>\n        <target>Fields that are to be updated must first be activated by clicking on the associated checkbox.</target>\n      </trans-unit>\n      <trans-unit id=\"z_YHoZn\" resname=\"label.includeNoWork\">\n        <source>label.includeNoWork</source>\n        <target>Show entries without bookings</target>\n      </trans-unit>\n      <trans-unit id=\"B.Dbbob\" resname=\"label.includeNoBudget\">\n        <source>label.includeNoBudget</source>\n        <target>Show entries without budget</target>\n      </trans-unit>\n      <trans-unit id=\"Wq.h4nD\" resname=\"label.includeBudgetType_month\">\n        <source>label.includeBudgetType_month</source>\n        <target>Show entries with \"monthly\" budget</target>\n      </trans-unit>\n      <trans-unit id=\"nVulc7.\" resname=\"label.includeBudgetType_full\">\n        <source>label.includeBudgetType_full</source>\n        <target>Show entries with \"life cycle\" budget</target>\n      </trans-unit>\n      <trans-unit id=\"3zn5T5e\" resname=\"label.not_exported\">\n        <source>label.not_exported</source>\n        <target>Not exported</target>\n      </trans-unit>\n      <trans-unit id=\"csF1D35\" resname=\"label.not_invoiced\">\n        <source>label.not_invoiced</source>\n        <target>Not billed</target>\n      </trans-unit>\n      <trans-unit id=\"AJ6dwR.\" resname=\"label.last_record_before\">\n        <source>label.last_record_before</source>\n        <target>No time booking since</target>\n      </trans-unit>\n      <trans-unit id=\"qDnURk7\" resname=\"label.last_record\">\n        <source>label.last_record</source>\n        <target>Last entry</target>\n      </trans-unit>\n      <trans-unit id=\"LXdqaTH\" resname=\"label.account_number\">\n        <source>label.account_number</source>\n        <target>Staff number</target>\n      </trans-unit>\n      <trans-unit id=\"PoF7hD8\" resname=\"label.budgetType\">\n        <source>label.budgetType</source>\n        <target>Budget-Type</target>\n      </trans-unit>\n      <trans-unit id=\"cHfLJtL\" resname=\"label.budgetType_month\">\n        <source>label.budgetType_month</source>\n        <target>Monthly</target>\n      </trans-unit>\n      <trans-unit id=\"9Rhadz6\" resname=\"label.budgetType_full\">\n        <source>label.budgetType_full</source>\n        <target>Life cycle</target>\n      </trans-unit>\n      <trans-unit id=\"tvV0NhL\" resname=\"delete_warning.short_stats\">\n        <source>delete_warning.short_stats</source>\n        <target>Currently %records% time-records exists, which sum up to a total duration of %duration%.</target>\n      </trans-unit>\n      <trans-unit id=\"Zif614Q\" resname=\"add_user.label\">\n        <source>add_user.label</source>\n        <target>Add user</target>\n      </trans-unit>\n      <trans-unit id=\"tp.gIrE\" resname=\"team.add_user.help\">\n        <source>team.add_user.help</source>\n        <target>Add a new user to the team by selecting it from the list. Afterwards you can decide if the user should become a teamlead.</target>\n      </trans-unit>\n      <trans-unit id=\"yNWIi5U\" resname=\"default_value_new\">\n        <source>default_value_new</source>\n        <target>Default values for new entries</target>\n      </trans-unit>\n      <!--\n          QUICK ENTRIES\n      -->\n      <trans-unit id=\"f8oNzSP\" resname=\"quick_entry.title\">\n        <source>quick_entry.title</source>\n        <target>Weekly working hours</target>\n      </trans-unit>\n      <trans-unit id=\"61p_ckr\" resname=\"label.hours_24\">\n        <source>label.hours_24</source>\n        <target>24 hours</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n"], "fixing_code": ["<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App;\n\n/**\n * Some \"very\" global constants for Kimai.\n */\nclass Constants\n{\n    /**\n     * The current release version\n     */\n    public const VERSION = '1.16.2';\n    /**\n     * The current release: major * 10000 + minor * 100 + patch\n     */\n    public const VERSION_ID = 11602;\n    /**\n     * The current release status, either \"stable\" or \"dev\"\n     */\n    public const STATUS = 'prod';\n    /**\n     * The software name\n     */\n    public const SOFTWARE = 'Kimai';\n    /**\n     * The release name, will only change for new major version\n     */\n    public const NAME = 'Ayumi';\n    /**\n     * Used in multiple views\n     */\n    public const GITHUB = 'https://github.com/kevinpapst/kimai2/';\n    /**\n     * Homepage, used in multiple views\n     */\n    public const HOMEPAGE = 'https://www.kimai.org';\n    /**\n     * Application wide default locale\n     */\n    public const DEFAULT_LOCALE = 'en';\n    /**\n     * Default color for Customer, Project and Activity entities\n     */\n    public const DEFAULT_COLOR = '#d2d6de';\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Configuration\\SystemConfiguration;\nuse App\\Entity\\Customer;\nuse App\\Entity\\MetaTableTypeInterface;\nuse App\\Entity\\Project;\nuse App\\Entity\\ProjectComment;\nuse App\\Entity\\ProjectRate;\nuse App\\Entity\\Rate;\nuse App\\Entity\\Team;\nuse App\\Event\\ProjectMetaDefinitionEvent;\nuse App\\Event\\ProjectMetaDisplayEvent;\nuse App\\Export\\Spreadsheet\\EntityWithMetaFieldsExporter;\nuse App\\Export\\Spreadsheet\\Writer\\BinaryFileResponseWriter;\nuse App\\Export\\Spreadsheet\\Writer\\XlsxWriter;\nuse App\\Form\\ProjectCommentForm;\nuse App\\Form\\ProjectEditForm;\nuse App\\Form\\ProjectRateForm;\nuse App\\Form\\ProjectTeamPermissionForm;\nuse App\\Form\\Toolbar\\ProjectToolbarForm;\nuse App\\Form\\Type\\ProjectType;\nuse App\\Project\\ProjectDuplicationService;\nuse App\\Project\\ProjectService;\nuse App\\Project\\ProjectStatisticService;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRateRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\ActivityQuery;\nuse App\\Repository\\Query\\ProjectQuery;\nuse App\\Repository\\TeamRepository;\nuse Pagerfanta\\Pagerfanta;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcherInterface;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\nuse Symfony\\Component\\Security\\Csrf\\CsrfToken;\nuse Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface;\n\n/**\n * Controller used to manage projects.\n *\n * @Route(path=\"/admin/project\")\n * @Security(\"is_granted('view_project') or is_granted('view_teamlead_project') or is_granted('view_team_project')\")\n */\nfinal class ProjectController extends AbstractController\n{\n    /**\n     * @var ProjectRepository\n     */\n    private $repository;\n    /**\n     * @var SystemConfiguration\n     */\n    private $configuration;\n    /**\n     * @var EventDispatcherInterface\n     */\n    private $dispatcher;\n    /**\n     * @var ProjectService\n     */\n    private $projectService;\n\n    public function __construct(ProjectRepository $repository, SystemConfiguration $configuration, EventDispatcherInterface $dispatcher, ProjectService $projectService)\n    {\n        $this->repository = $repository;\n        $this->configuration = $configuration;\n        $this->dispatcher = $dispatcher;\n        $this->projectService = $projectService;\n    }\n\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_project\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_project_paginated\", methods={\"GET\"})\n     */\n    public function indexAction($page, Request $request)\n    {\n        $query = new ProjectQuery();\n        $query->setCurrentUser($this->getUser());\n        $query->setPage($page);\n\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute('admin_project');\n        }\n\n        $entries = $this->repository->getPagerfantaForQuery($query);\n\n        return $this->render('project/index.html.twig', [\n            'entries' => $entries,\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n            'metaColumns' => $this->findMetaColumns($query),\n            'now' => $this->getDateTimeFactory()->createDateTime(),\n        ]);\n    }\n\n    /**\n     * @param ProjectQuery $query\n     * @return MetaTableTypeInterface[]\n     */\n    protected function findMetaColumns(ProjectQuery $query): array\n    {\n        $event = new ProjectMetaDisplayEvent($query, ProjectMetaDisplayEvent::PROJECT);\n        $this->dispatcher->dispatch($event);\n\n        return $event->getFields();\n    }\n\n    /**\n     * @Route(path=\"/{id}/permissions\", name=\"admin_project_permissions\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('permissions', project)\")\n     */\n    public function teamPermissions(Project $project, Request $request)\n    {\n        $form = $this->createForm(ProjectTeamPermissionForm::class, $project, [\n            'action' => $this->generateUrl('admin_project_permissions', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->projectService->updateProject($project);\n                $this->flashSuccess('action.update.success');\n\n                if ($this->isGranted('view', $project)) {\n                    return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n                }\n\n                return $this->redirectToRoute('admin_project');\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/permissions.html.twig', [\n            'project' => $project,\n            'form' => $form->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_project_create\", methods={\"GET\", \"POST\"})\n     * @Route(path=\"/create/{customer}\", name=\"admin_project_create_with_customer\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_project')\")\n     */\n    public function createAction(Request $request, ?Customer $customer = null)\n    {\n        $project = $this->projectService->createNewProject($customer);\n\n        $editForm = $this->createEditForm($project);\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->projectService->saveNewProject($project);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/edit.html.twig', [\n            'project' => $project,\n            'form' => $editForm->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_delete/{token}\", name=\"project_comment_delete\", methods={\"GET\"})\n     * @Security(\"is_granted('edit', comment.getProject()) and is_granted('comments', comment.getProject())\")\n     */\n    public function deleteCommentAction(ProjectComment $comment, string $token, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        $projectId = $comment->getProject()->getId();\n\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('project.delete_comment', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('project_details', ['id' => $projectId]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        try {\n            $this->repository->deleteComment($comment);\n        } catch (\\Exception $ex) {\n            $this->flashDeleteException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $projectId]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_add\", name=\"project_comment_add\", methods={\"POST\"})\n     * @Security(\"is_granted('comments_create', project)\")\n     */\n    public function addCommentAction(Project $project, Request $request)\n    {\n        $comment = new ProjectComment();\n        $form = $this->getCommentForm($project, $comment);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->repository->saveComment($comment);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/comment_pin/{token}\", name=\"project_comment_pin\", methods={\"GET\"})\n     * @Security(\"is_granted('edit', comment.getProject()) and is_granted('comments', comment.getProject())\")\n     */\n    public function pinCommentAction(ProjectComment $comment, string $token, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        $projectId = $comment->getProject()->getId();\n\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('project.pin_comment', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('project_details', ['id' => $projectId]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        $comment->setPinned(!$comment->isPinned());\n        try {\n            $this->repository->saveComment($comment);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $projectId]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/create_team\", name=\"project_team_create\", methods={\"GET\"})\n     * @Security(\"is_granted('create_team') and is_granted('edit', project)\")\n     */\n    public function createDefaultTeamAction(Project $project, TeamRepository $teamRepository)\n    {\n        $defaultTeam = $teamRepository->findOneBy(['name' => $project->getName()]);\n        if (null !== $defaultTeam) {\n            $this->flashError('action.update.error', ['%reason%' => 'Team already existing']);\n\n            return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n        }\n\n        $defaultTeam = new Team();\n        $defaultTeam->setName($project->getName());\n        $defaultTeam->addTeamlead($this->getUser());\n        $defaultTeam->addProject($project);\n\n        try {\n            $teamRepository->saveTeam($defaultTeam);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/activities/{page}\", defaults={\"page\": 1}, name=\"project_activities\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('view', project)\")\n     */\n    public function activitiesAction(Project $project, int $page, ActivityRepository $activityRepository)\n    {\n        $query = new ActivityQuery();\n        $query->setCurrentUser($this->getUser());\n        $query->setPage($page);\n        $query->setPageSize(5);\n        $query->addProject($project);\n        $query->setExcludeGlobals(true);\n        $query->setShowBoth();\n        $query->addOrderGroup('visible', ActivityQuery::ORDER_DESC);\n        $query->addOrderGroup('name', ActivityQuery::ORDER_ASC);\n\n        /* @var $entries Pagerfanta */\n        $entries = $activityRepository->getPagerfantaForQuery($query);\n\n        return $this->render('project/embed_activities.html.twig', [\n            'project' => $project,\n            'activities' => $entries,\n            'page' => $page,\n            'now' => $this->getDateTimeFactory()->createDateTime(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/details\", name=\"project_details\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('view', project)\")\n     */\n    public function detailsAction(Project $project, TeamRepository $teamRepository, ProjectRateRepository $rateRepository, ProjectStatisticService $statisticService)\n    {\n        $event = new ProjectMetaDefinitionEvent($project);\n        $this->dispatcher->dispatch($event);\n\n        $stats = null;\n        $defaultTeam = null;\n        $commentForm = null;\n        $attachments = [];\n        $comments = null;\n        $teams = null;\n        $rates = [];\n        $now = $this->getDateTimeFactory()->createDateTime();\n\n        if ($this->isGranted('edit', $project)) {\n            if ($this->isGranted('create_team')) {\n                $defaultTeam = $teamRepository->findOneBy(['name' => $project->getName()]);\n            }\n            $rates = $rateRepository->getRatesForProject($project);\n        }\n\n        if ($this->isGranted('budget', $project)) {\n            $stats = $statisticService->getBudgetStatisticModel($project, $now);\n        }\n\n        if ($this->isGranted('comments', $project)) {\n            $comments = $this->repository->getComments($project);\n        }\n\n        if ($this->isGranted('comments_create', $project)) {\n            $commentForm = $this->getCommentForm($project, new ProjectComment())->createView();\n        }\n\n        if ($this->isGranted('permissions', $project) || $this->isGranted('details', $project) || $this->isGranted('view_team')) {\n            $teams = $project->getTeams();\n        }\n\n        return $this->render('project/details.html.twig', [\n            'project' => $project,\n            'comments' => $comments,\n            'commentForm' => $commentForm,\n            'attachments' => $attachments,\n            'stats' => $stats,\n            'team' => $defaultTeam,\n            'teams' => $teams,\n            'rates' => $rates,\n            'now' => $now,\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/rate\", name=\"admin_project_rate_add\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function addRateAction(Project $project, Request $request, ProjectRateRepository $repository)\n    {\n        $rate = new ProjectRate();\n        $rate->setProject($project);\n\n        $form = $this->createForm(ProjectRateForm::class, $rate, [\n            'action' => $this->generateUrl('admin_project_rate_add', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $repository->saveRate($rate);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/rates.html.twig', [\n            'project' => $project,\n            'form' => $form->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_project_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function editAction(Project $project, Request $request)\n    {\n        $editForm = $this->createEditForm($project);\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->projectService->updateProject($project);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('project/edit.html.twig', [\n            'project' => $project,\n            'form' => $editForm->createView()\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate/{token}\", name=\"admin_project_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', project)\")\n     */\n    public function duplicateAction(Project $project, string $token, ProjectDuplicationService $projectDuplicationService, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('project.duplicate', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('project_details', ['id' => $project->getId()]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        $newProject = $projectDuplicationService->duplicate($project, $project->getName() . ' [COPY]');\n\n        $this->flashSuccess('action.update.success');\n\n        return $this->redirectToRoute('project_details', ['id' => $newProject->getId()]);\n    }\n\n    /**\n     * @Route(path=\"/{id}/delete\", name=\"admin_project_delete\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('delete', project)\")\n     */\n    public function deleteAction(Project $project, Request $request, ProjectStatisticService $statisticService)\n    {\n        $stats = $statisticService->getProjectStatistics($project);\n\n        $deleteForm = $this->createFormBuilder(null, [\n                'attr' => [\n                    'data-form-event' => 'kimai.projectDelete',\n                    'data-msg-success' => 'action.delete.success',\n                    'data-msg-error' => 'action.delete.error',\n                ]\n            ])\n            ->add('project', ProjectType::class, [\n                'ignore_project' => $project,\n                'customers' => $project->getCustomer(),\n                'query_builder_for_user' => true,\n                'required' => false,\n            ])\n            ->setAction($this->generateUrl('admin_project_delete', ['id' => $project->getId()]))\n            ->setMethod('POST')\n            ->getForm();\n\n        $deleteForm->handleRequest($request);\n\n        if ($deleteForm->isSubmitted() && $deleteForm->isValid()) {\n            try {\n                $this->repository->deleteProject($project, $deleteForm->get('project')->getData());\n                $this->flashSuccess('action.delete.success');\n            } catch (\\Exception $ex) {\n                $this->flashDeleteException($ex);\n            }\n\n            return $this->redirectToRoute('admin_project');\n        }\n\n        return $this->render('project/delete.html.twig', [\n            'project' => $project,\n            'stats' => $stats,\n            'form' => $deleteForm->createView(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/export\", name=\"project_export\", methods={\"GET\"})\n     */\n    public function exportAction(Request $request, EntityWithMetaFieldsExporter $exporter)\n    {\n        $query = new ProjectQuery();\n        $query->setCurrentUser($this->getUser());\n\n        $form = $this->getToolbarForm($query);\n        $form->setData($query);\n        $form->submit($request->query->all(), false);\n\n        if (!$form->isValid()) {\n            $query->resetByFormError($form->getErrors());\n        }\n\n        $entries = $this->repository->getProjectsForQuery($query);\n\n        $spreadsheet = $exporter->export(\n            Project::class,\n            $entries,\n            new ProjectMetaDisplayEvent($query, ProjectMetaDisplayEvent::EXPORT)\n        );\n        $writer = new BinaryFileResponseWriter(new XlsxWriter(), 'kimai-projects');\n\n        return $writer->getFileResponse($spreadsheet);\n    }\n\n    protected function getToolbarForm(ProjectQuery $query): FormInterface\n    {\n        return $this->createForm(ProjectToolbarForm::class, $query, [\n            'action' => $this->generateUrl('admin_project', [\n                'page' => $query->getPage(),\n            ]),\n            'method' => 'GET',\n        ]);\n    }\n\n    private function getCommentForm(Project $project, ProjectComment $comment): FormInterface\n    {\n        if (null === $comment->getId()) {\n            $comment->setProject($project);\n            $comment->setCreatedBy($this->getUser());\n        }\n\n        return $this->createForm(ProjectCommentForm::class, $comment, [\n            'action' => $this->generateUrl('project_comment_add', ['id' => $project->getId()]),\n            'method' => 'POST',\n        ]);\n    }\n\n    private function createEditForm(Project $project): FormInterface\n    {\n        $event = new ProjectMetaDefinitionEvent($project);\n        $this->dispatcher->dispatch($event);\n\n        $currency = $this->configuration->getCustomerDefaultCurrency();\n        $url = $this->generateUrl('admin_project_create');\n\n        if ($project->getId() !== null) {\n            $url = $this->generateUrl('admin_project_edit', ['id' => $project->getId()]);\n            $currency = $project->getCustomer()->getCurrency();\n        }\n\n        return $this->createForm(ProjectEditForm::class, $project, [\n            'action' => $url,\n            'method' => 'POST',\n            'currency' => $currency,\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'include_budget' => $this->isGranted('budget', $project),\n            'time_increment' => 15,\n        ]);\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Team;\nuse App\\Form\\TeamCustomerForm;\nuse App\\Form\\TeamEditForm;\nuse App\\Form\\TeamProjectForm;\nuse App\\Form\\Toolbar\\TeamToolbarForm;\nuse App\\Repository\\Query\\TeamQuery;\nuse App\\Repository\\TeamRepository;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\RedirectResponse;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\nuse Symfony\\Component\\Security\\Csrf\\CsrfToken;\nuse Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface;\n\n/**\n * @Route(path=\"/admin/teams\")\n * @Security(\"is_granted('view_team')\")\n */\nfinal class TeamController extends AbstractController\n{\n    /**\n     * @var TeamRepository\n     */\n    private $repository;\n\n    public function __construct(TeamRepository $repository)\n    {\n        $this->repository = $repository;\n    }\n\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_team\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_team_paginated\", methods={\"GET\"})\n     *\n     * @param TeamRepository $repository\n     * @param Request $request\n     * @param int $page\n     * @return Response\n     */\n    public function listTeams(TeamRepository $repository, Request $request, $page)\n    {\n        $query = new TeamQuery();\n        $query->setPage($page);\n        $query->setCurrentUser($this->getUser());\n\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute('admin_team');\n        }\n\n        $teams = $repository->getPagerfantaForQuery($query);\n\n        return $this->render('team/index.html.twig', [\n            'teams' => $teams,\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_team_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_team')\")\n     *\n     * @param Request $request\n     * @return RedirectResponse|Response\n     */\n    public function createTeam(Request $request)\n    {\n        return $this->renderEditScreen(new Team(), $request);\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate/{token}\", name=\"team_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team) and is_granted('create_team')\")\n     */\n    public function duplicateTeam(Team $team, string $token, CsrfTokenManagerInterface $csrfTokenManager)\n    {\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('team.duplicate', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        $newTeam = clone $team;\n        $newTeam->setName($team->getName() . ' [COPY]');\n\n        try {\n            $this->repository->saveTeam($newTeam);\n            $this->flashSuccess('action.update.success');\n\n            return $this->redirectToRoute('admin_team_edit', ['id' => $newTeam->getId()]);\n        } catch (\\Exception $ex) {\n            $this->flashUpdateException($ex);\n        }\n\n        return $this->redirectToRoute('admin_team');\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_team_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team)\")\n     */\n    public function editAction(Team $team, Request $request)\n    {\n        return $this->renderEditScreen($team, $request);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit_member\", name=\"admin_team_member\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', team)\")\n     */\n    public function editMemberAction(Team $team, Request $request)\n    {\n        $editForm = $this->createForm(TeamEditForm::class, $team, [\n            'action' => $this->generateUrl('admin_team_member', ['id' => $team->getId()]),\n            'method' => 'POST',\n        ]);\n\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->repository->saveTeam($team);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('team/edit_member.html.twig', [\n            'team' => $team,\n            'form' => $editForm->createView(),\n        ]);\n    }\n\n    private function renderEditScreen(Team $team, Request $request): Response\n    {\n        $customerForm = null;\n        $projectForm = null;\n\n        if ($team->getId() === null) {\n            $url = $this->generateUrl('admin_team_create');\n        } else {\n            $url = $this->generateUrl('admin_team_edit', ['id' => $team->getId()]);\n        }\n\n        $editForm = $this->createForm(TeamEditForm::class, $team, [\n            'action' => $url,\n            'method' => 'POST',\n        ]);\n\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->repository->saveTeam($team);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        if (null !== $team->getId()) {\n            $customerForm = $this->createForm(TeamCustomerForm::class, $team, [\n                'method' => 'POST',\n            ]);\n            $customerForm->handleRequest($request);\n\n            if ($customerForm->isSubmitted() && $customerForm->isValid()) {\n                try {\n                    $this->repository->saveTeam($team);\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n\n            $projectForm = $this->createForm(TeamProjectForm::class, $team, [\n                'method' => 'POST',\n            ]);\n            $projectForm->handleRequest($request);\n\n            if ($projectForm->isSubmitted() && $projectForm->isValid()) {\n                try {\n                    $this->repository->saveTeam($team);\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute('admin_team_edit', ['id' => $team->getId()]);\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n        }\n\n        return $this->render('team/edit.html.twig', [\n            'team' => $team,\n            'form' => $editForm->createView(),\n            'customerForm' => $customerForm ? $customerForm->createView() : null,\n            'projectForm' => $projectForm ? $projectForm->createView() : null,\n        ]);\n    }\n\n    private function getToolbarForm(TeamQuery $query): FormInterface\n    {\n        return $this->createForm(TeamToolbarForm::class, $query, [\n            'action' => $this->generateUrl('admin_team', [\n                'page' => $query->getPage(),\n            ]),\n            'method' => 'GET',\n        ]);\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Configuration\\SystemConfiguration;\nuse App\\Entity\\MetaTableTypeInterface;\nuse App\\Entity\\Tag;\nuse App\\Entity\\Timesheet;\nuse App\\Event\\TimesheetDuplicatePostEvent;\nuse App\\Event\\TimesheetDuplicatePreEvent;\nuse App\\Event\\TimesheetMetaDefinitionEvent;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\MultiUpdate\\MultiUpdateTable;\nuse App\\Form\\MultiUpdate\\MultiUpdateTableDTO;\nuse App\\Form\\MultiUpdate\\TimesheetMultiUpdate;\nuse App\\Form\\MultiUpdate\\TimesheetMultiUpdateDTO;\nuse App\\Form\\TimesheetEditForm;\nuse App\\Form\\Toolbar\\TimesheetExportToolbarForm;\nuse App\\Form\\Toolbar\\TimesheetToolbarForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\TimesheetQuery;\nuse App\\Repository\\TagRepository;\nuse App\\Repository\\TimesheetRepository;\nuse App\\Timesheet\\TimesheetService;\nuse App\\Timesheet\\TrackingMode\\TrackingModeInterface;\nuse Doctrine\\Common\\Collections\\ArrayCollection;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcherInterface;\nuse Symfony\\Component\\Form\\FormError;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\nabstract class TimesheetAbstractController extends AbstractController\n{\n    /**\n     * @var TimesheetRepository\n     */\n    protected $repository;\n    /**\n     * @var EventDispatcherInterface\n     */\n    protected $dispatcher;\n    /**\n     * @var TimesheetService\n     */\n    protected $service;\n    /**\n     * @var SystemConfiguration\n     */\n    protected $configuration;\n\n    public function __construct(\n        TimesheetRepository $repository,\n        EventDispatcherInterface $dispatcher,\n        TimesheetService $timesheetService,\n        SystemConfiguration $configuration\n    ) {\n        $this->repository = $repository;\n        $this->dispatcher = $dispatcher;\n        $this->service = $timesheetService;\n        $this->configuration = $configuration;\n    }\n\n    protected function getTrackingMode(): TrackingModeInterface\n    {\n        return $this->service->getActiveTrackingMode();\n    }\n\n    protected function index(TimesheetQuery $query, Request $request, string $route, string $renderTemplate, string $location): Response\n    {\n        $form = $this->getToolbarForm($query);\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute($route);\n        }\n\n        $tags = $query->getTags(true);\n        if (!empty($tags)) {\n            /** @var TagRepository $tagRepo */\n            $tagRepo = $this->getDoctrine()->getRepository(Tag::class);\n            $query->setTags(\n                new ArrayCollection(\n                    $tagRepo->findIdsByTagNameList(implode(',', $tags))\n                )\n            );\n        }\n\n        $this->prepareQuery($query);\n\n        $pager = $this->repository->getPagerfantaForQuery($query);\n\n        return $this->render($renderTemplate, [\n            'entries' => $pager,\n            'page' => $query->getPage(),\n            'query' => $query,\n            'toolbarForm' => $form->createView(),\n            'multiUpdateForm' => $this->getMultiUpdateActionForm()->createView(),\n            'showSummary' => $this->includeSummary(),\n            'showStartEndTime' => $this->canSeeStartEndTime(),\n            'metaColumns' => $this->findMetaColumns($query, $location),\n        ]);\n    }\n\n    /**\n     * @param TimesheetQuery $query\n     * @param string $location\n     * @return MetaTableTypeInterface[]\n     */\n    protected function findMetaColumns(TimesheetQuery $query, string $location): array\n    {\n        $event = new TimesheetMetaDisplayEvent($query, $location);\n        $this->dispatcher->dispatch($event);\n\n        return $event->getFields();\n    }\n\n    protected function edit(Timesheet $entry, Request $request, string $renderTemplate): Response\n    {\n        $event = new TimesheetMetaDefinitionEvent($entry);\n        $this->dispatcher->dispatch($event);\n\n        $editForm = $this->getEditForm($entry, $request->get('page'));\n        $editForm->handleRequest($request);\n\n        if ($editForm->isSubmitted() && $editForm->isValid()) {\n            try {\n                $this->service->updateTimesheet($entry);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute(), ['page' => $request->get('page', 1)]);\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $entry,\n            'form' => $editForm->createView(),\n        ]);\n    }\n\n    protected function getTags(TagRepository $tagRepository, $tagNames)\n    {\n        $tags = [];\n        if (!\\is_array($tagNames)) {\n            $tagNames = explode(',', $tagNames);\n        }\n        foreach ($tagNames as $tagName) {\n            $tag = $tagRepository->findTagByName($tagName);\n            if (!$tag) {\n                $tag = new Tag();\n                $tag->setName($tagName);\n            }\n            $tags[] = $tag;\n        }\n\n        return $tags;\n    }\n\n    protected function create(Request $request, string $renderTemplate, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        $entry = $this->service->createNewTimesheet($this->getUser());\n\n        if ($request->query->get('project')) {\n            $project = $projectRepository->find($request->query->get('project'));\n            $entry->setProject($project);\n        }\n\n        if ($request->query->get('activity')) {\n            $activity = $activityRepository->find($request->query->get('activity'));\n            $entry->setActivity($activity);\n        }\n\n        if ($request->query->get('description')) {\n            $description = $request->query->get('description');\n            $entry->setDescription($description);\n        }\n\n        if ($request->query->get('tags')) {\n            foreach ($this->getTags($tagRepository, $request->query->get('tags')) as $tag) {\n                $entry->addTag($tag);\n            }\n        }\n\n        $this->service->prepareNewTimesheet($entry, $request);\n        $createForm = $this->getCreateForm($entry);\n        $createForm->handleRequest($request);\n\n        if ($createForm->isSubmitted() && $createForm->isValid()) {\n            try {\n                $this->service->saveNewTimesheet($entry);\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $entry,\n            'form' => $createForm->createView(),\n        ]);\n    }\n\n    protected function duplicate(Timesheet $timesheet, Request $request, string $renderTemplate, string $token): Response\n    {\n        $copyTimesheet = clone $timesheet;\n\n        $event = new TimesheetMetaDefinitionEvent($copyTimesheet);\n        $this->dispatcher->dispatch($event);\n\n        $form = $this->getDuplicateForm($copyTimesheet, $timesheet, $token);\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            try {\n                $this->dispatcher->dispatch(new TimesheetDuplicatePreEvent($copyTimesheet, $timesheet));\n                $this->service->saveNewTimesheet($copyTimesheet);\n                $this->dispatcher->dispatch(new TimesheetDuplicatePostEvent($copyTimesheet, $timesheet));\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'timesheet' => $copyTimesheet,\n            'form' => $form->createView(),\n        ]);\n    }\n\n    protected function export(Request $request, ServiceExport $serviceExport): Response\n    {\n        $query = $this->createDefaultQuery();\n\n        $form = $this->getExportForm($query);\n\n        if ($request->isMethod(Request::METHOD_POST)) {\n            $this->ignorePersistedSearch($request);\n        }\n\n        if ($this->handleSearch($form, $request)) {\n            return $this->redirectToRoute($this->getExportRoute());\n        }\n\n        $this->prepareQuery($query);\n\n        // make sure that we use the \"expected time range\"\n        if (null !== $query->getBegin()) {\n            $query->getBegin()->setTime(0, 0, 0);\n        }\n        if (null !== $query->getEnd()) {\n            $query->getEnd()->setTime(23, 59, 59);\n        }\n\n        $entries = $this->repository->getTimesheetResult($query);\n        $stats = $entries->getStatistic();\n\n        // perform the real export\n        if ($request->isMethod(Request::METHOD_POST)) {\n            $type = $request->request->get('exporter');\n            if (null !== $type) {\n                $exporter = $serviceExport->getTimesheetExporterById($type);\n\n                if (null === $exporter) {\n                    $form->addError(new FormError('Invalid timesheet exporter given'));\n                } else {\n                    return $exporter->render($entries->getResults(true), $query);\n                }\n            }\n        }\n\n        return $this->render('timesheet/layout-export.html.twig', [\n            'form' => $form->createView(),\n            'route_back' => $this->getTimesheetRoute(),\n            'exporter' => $serviceExport->getTimesheetExporter(),\n            'stats' => $stats,\n        ]);\n    }\n\n    protected function multiUpdate(Request $request, string $renderTemplate)\n    {\n        $dto = new TimesheetMultiUpdateDTO();\n\n        // initial request from the listing posts a different form\n        $form = $this->getMultiUpdateActionForm();\n        $form->handleRequest($request);\n        if ($form->isSubmitted() && $form->isValid()) {\n            $dto->setEntities($form->getData()->getEntities());\n        }\n\n        // using a new timesheet to make sure we ONLY use meta-fields which are registered via events\n        $fake = new Timesheet();\n        $event = new TimesheetMetaDefinitionEvent($fake);\n        $this->dispatcher->dispatch($event);\n\n        foreach ($fake->getMetaFields() as $field) {\n            $dto->setMetaField(clone $field);\n        }\n\n        $form = $this->getMultiUpdateForm($dto);\n        $form->handleRequest($request);\n\n        // remove all, which are not allowed to be edited\n        $timesheets = [];\n        $disallowed = 0;\n        /** @var Timesheet $timesheet */\n        foreach ($dto->getEntities() as $timesheet) {\n            if (!$this->isGranted('edit', $timesheet)) {\n                $disallowed++;\n                continue;\n            }\n            $timesheets[] = $timesheet;\n        }\n\n        if ($disallowed > 0) {\n            $this->flashWarning(sprintf('You are missing the permission to edit %s timesheets', $disallowed));\n        }\n\n        $dto->setEntities($timesheets);\n\n        if (\\count($dto->getEntities()) === 0) {\n            return $this->redirectToRoute($this->getTimesheetRoute());\n        }\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            /** @var Timesheet $timesheet */\n            $execute = false;\n            foreach ($dto->getEntities() as $timesheet) {\n                if ($dto->isReplaceTags()) {\n                    foreach ($timesheet->getTags() as $tag) {\n                        $timesheet->removeTag($tag);\n                    }\n                    $execute = true;\n                }\n                foreach ($dto->getTags() as $tag) {\n                    $timesheet->addTag($tag);\n                    $execute = true;\n                }\n                if (null !== $dto->getActivity()) {\n                    $timesheet->setActivity($dto->getActivity());\n                    $execute = true;\n                }\n                if (null !== $dto->getProject()) {\n                    $timesheet->setProject($dto->getProject());\n                    $execute = true;\n                }\n                if (null !== $dto->getUser()) {\n                    $timesheet->setUser($dto->getUser());\n                    $execute = true;\n                }\n                if (null !== $dto->isExported()) {\n                    $timesheet->setExported($dto->isExported());\n                    $execute = true;\n                }\n                if (null !== $dto->isBillable()) {\n                    $timesheet->setBillable($dto->isBillable());\n                    $execute = true;\n                }\n\n                if ($dto->isRecalculateRates()) {\n                    $timesheet->setFixedRate(null);\n                    $timesheet->setHourlyRate(null);\n                    $timesheet->setInternalRate(null);\n                    $execute = true;\n                } elseif (null !== $dto->getFixedRate()) {\n                    $timesheet->setFixedRate($dto->getFixedRate());\n                    $timesheet->setHourlyRate(null);\n                    $timesheet->setInternalRate(null);\n                    $execute = true;\n                } elseif (null !== $dto->getHourlyRate()) {\n                    $timesheet->setFixedRate(null);\n                    $timesheet->setInternalRate(null);\n                    $timesheet->setHourlyRate($dto->getHourlyRate());\n                    $execute = true;\n                }\n\n                foreach ($dto->getUpdateMeta() as $metaName) {\n                    if (null !== ($metaField = $dto->getMetaField($metaName))) {\n                        if (null !== ($timesheetMeta = $timesheet->getMetaField($metaName))) {\n                            $timesheetMeta->setValue($metaField->getValue());\n                        } else {\n                            $timesheet->setMetaField(clone $metaField);\n                        }\n                        $execute = true;\n                    }\n                }\n            }\n\n            if ($execute) {\n                try {\n                    $this->service->updateMultipleTimesheets($dto->getEntities());\n                    $this->flashSuccess('action.update.success');\n\n                    return $this->redirectToRoute($this->getTimesheetRoute());\n                } catch (\\Exception $ex) {\n                    $this->flashUpdateException($ex);\n                }\n            }\n        }\n\n        return $this->render($renderTemplate, [\n            'form' => $form->createView(),\n            'dto' => $dto,\n        ]);\n    }\n\n    protected function multiDelete(Request $request)\n    {\n        $form = $this->getMultiUpdateActionForm();\n        $form->handleRequest($request);\n\n        if ($form->isSubmitted() && $form->isValid()) {\n            $dto = $form->getData();\n            $timesheets = [];\n            /** @var Timesheet $timesheet */\n            foreach ($dto->getEntities() as $timesheet) {\n                if (!$this->isGranted('delete', $timesheet)) {\n                    continue;\n                }\n                $timesheets[] = $timesheet;\n            }\n            $dto->setEntities($timesheets);\n\n            try {\n                $this->service->deleteMultipleTimesheets($dto->getEntities());\n                $this->flashSuccess('action.delete.success');\n            } catch (\\Exception $ex) {\n                $this->flashDeleteException($ex);\n            }\n        }\n\n        return $this->redirectToRoute($this->getTimesheetRoute());\n    }\n\n    protected function prepareQuery(TimesheetQuery $query)\n    {\n        $query->setUser($this->getUser());\n    }\n\n    protected function getMultiUpdateForm(TimesheetMultiUpdateDTO $multiUpdate): FormInterface\n    {\n        return  $this->createForm(TimesheetMultiUpdate::class, $multiUpdate, [\n            'action' => $this->generateUrl($this->getMultiUpdateRoute(), []),\n            'method' => 'POST',\n            'include_exported' => $this->isGranted($this->getPermissionEditExport()),\n            'include_rate' => $this->isGranted($this->getPermissionEditRate()),\n            'include_user' => $this->includeUserInForms('multi'),\n        ]);\n    }\n\n    protected function getMultiUpdateActionForm(): FormInterface\n    {\n        $dto = new MultiUpdateTableDTO();\n\n        $dto->addUpdate($this->generateUrl($this->getMultiUpdateRoute()));\n        $dto->addDelete($this->generateUrl($this->getMultiDeleteRoute()));\n\n        return $this->createForm(MultiUpdateTable::class, $dto, [\n            'action' => $this->generateUrl($this->getTimesheetRoute()),\n            'repository' => $this->repository,\n            'method' => 'POST',\n        ]);\n    }\n\n    protected function generateCreateForm(Timesheet $entry, string $formClass, string $action): FormInterface\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm($formClass, $entry, [\n            'action' => $action,\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('create'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone(),\n            'customer' => true,\n        ]);\n    }\n\n    /**\n     * @param Timesheet $entry\n     * @param int $page\n     * @return FormInterface\n     */\n    protected function getEditForm(Timesheet $entry, $page)\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm($this->getEditFormClassName(), $entry, [\n            'action' => $this->generateUrl($this->getEditRoute(), [\n                'id' => $entry->getId(),\n                'page' => $page,\n            ]),\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('edit'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone(),\n            'customer' => true,\n        ]);\n    }\n\n    protected function getToolbarForm(TimesheetQuery $query): FormInterface\n    {\n        return $this->createForm(TimesheetToolbarForm::class, $query, [\n            'action' => $this->generateUrl($this->getTimesheetRoute(), [\n                'page' => $query->getPage(),\n            ]),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'method' => 'GET',\n            'include_user' => $this->includeUserInForms('toolbar'),\n        ]);\n    }\n\n    protected function getExportForm(TimesheetQuery $query): FormInterface\n    {\n        return $this->createForm(TimesheetExportToolbarForm::class, $query, [\n            'action' => $this->generateUrl($this->getExportRoute()),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'method' => Request::METHOD_POST,\n            'include_user' => $this->includeUserInForms('toolbar'),\n        ]);\n    }\n\n    protected function getPermissionEditExport(): string\n    {\n        return 'edit_export_own_timesheet';\n    }\n\n    protected function getPermissionEditRate(): string\n    {\n        return 'edit_rate_own_timesheet';\n    }\n\n    protected function getEditFormClassName(): string\n    {\n        return TimesheetEditForm::class;\n    }\n\n    protected function includeSummary(): bool\n    {\n        return (bool) $this->getUser()->getPreferenceValue('timesheet.daily_stats', false);\n    }\n\n    protected function includeUserInForms(string $formName): bool\n    {\n        return false;\n    }\n\n    protected function getTimesheetRoute(): string\n    {\n        return 'timesheet';\n    }\n\n    protected function getEditRoute(): string\n    {\n        return 'timesheet_edit';\n    }\n\n    protected function getMultiUpdateRoute(): string\n    {\n        return 'timesheet_multi_update';\n    }\n\n    protected function getMultiDeleteRoute(): string\n    {\n        return 'timesheet_multi_delete';\n    }\n\n    protected function getExportRoute(): string\n    {\n        return 'timesheet_export';\n    }\n\n    protected function canSeeStartEndTime(): bool\n    {\n        return $this->getTrackingMode()->canSeeBeginAndEndTimes();\n    }\n\n    protected function getQueryNamePrefix(): string\n    {\n        return 'MyTimes';\n    }\n\n    protected function createDefaultQuery(string $suffix = 'Listing'): TimesheetQuery\n    {\n        $query = new TimesheetQuery();\n        $query->setName($this->getQueryNamePrefix() . $suffix);\n\n        return $query;\n    }\n\n    abstract protected function getDuplicateForm(Timesheet $entry, Timesheet $original, string $token): FormInterface;\n\n    abstract protected function getCreateForm(Timesheet $entry): FormInterface;\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Timesheet;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\TimesheetEditForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\TagRepository;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\nuse Symfony\\Component\\Security\\Csrf\\CsrfToken;\nuse Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface;\n\n/**\n * @Route(path=\"/timesheet\")\n * @Security(\"is_granted('view_own_timesheet')\")\n */\nclass TimesheetController extends TimesheetAbstractController\n{\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"timesheet\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"timesheet_paginated\", methods={\"GET\"})\n     * @Security(\"is_granted('view_own_timesheet')\")\n     */\n    public function indexAction(int $page, Request $request): Response\n    {\n        $query = $this->createDefaultQuery();\n        $query->setPage($page);\n\n        return $this->index($query, $request, 'timesheet', 'timesheet/index.html.twig', TimesheetMetaDisplayEvent::TIMESHEET);\n    }\n\n    /**\n     * @Route(path=\"/export/\", name=\"timesheet_export\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('export_own_timesheet')\")\n     */\n    public function exportAction(Request $request, ServiceExport $serviceExport): Response\n    {\n        return $this->export($request, $serviceExport);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"timesheet_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', entry)\")\n     */\n    public function editAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->edit($entry, $request, 'timesheet/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate/{token}\", name=\"timesheet_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('duplicate', entry)\")\n     */\n    public function duplicateAction(Timesheet $entry, Request $request, string $token, CsrfTokenManagerInterface $csrfTokenManager): Response\n    {\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('timesheet.duplicate', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('timesheet');\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        return $this->duplicate($entry, $request, 'timesheet/edit.html.twig', $token);\n    }\n\n    /**\n     * @Route(path=\"/multi-update\", name=\"timesheet_multi_update\", methods={\"POST\"})\n     * @Security(\"is_granted('edit_own_timesheet')\")\n     */\n    public function multiUpdateAction(Request $request): Response\n    {\n        return $this->multiUpdate($request, 'timesheet/multi-update.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/multi-delete\", name=\"timesheet_multi_delete\", methods={\"POST\"})\n     * @Security(\"is_granted('delete_own_timesheet')\")\n     */\n    public function multiDeleteAction(Request $request): Response\n    {\n        return $this->multiDelete($request);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"timesheet_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_own_timesheet')\")\n     */\n    public function createAction(Request $request, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        return $this->create($request, 'timesheet/edit.html.twig', $projectRepository, $activityRepository, $tagRepository);\n    }\n\n    protected function getCreateForm(Timesheet $entry): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetEditForm::class, $this->generateUrl('timesheet_create'));\n    }\n\n    protected function getDuplicateForm(Timesheet $entry, Timesheet $original, string $token): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetEditForm::class, $this->generateUrl('timesheet_duplicate', ['id' => $original->getId(), 'token' => $token]));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Controller;\n\nuse App\\Entity\\Tag;\nuse App\\Entity\\Team;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\User;\nuse App\\Event\\TimesheetMetaDisplayEvent;\nuse App\\Export\\ServiceExport;\nuse App\\Form\\Model\\MultiUserTimesheet;\nuse App\\Form\\TimesheetAdminEditForm;\nuse App\\Form\\TimesheetMultiUserEditForm;\nuse App\\Repository\\ActivityRepository;\nuse App\\Repository\\ProjectRepository;\nuse App\\Repository\\Query\\TimesheetQuery;\nuse App\\Repository\\TagRepository;\nuse Doctrine\\Common\\Collections\\ArrayCollection;\nuse Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\Security;\nuse Symfony\\Component\\Form\\FormInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Annotation\\Route;\nuse Symfony\\Component\\Security\\Csrf\\CsrfToken;\nuse Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface;\n\n/**\n * @Route(path=\"/team/timesheet\")\n * @Security(\"is_granted('view_other_timesheet')\")\n */\nclass TimesheetTeamController extends TimesheetAbstractController\n{\n    /**\n     * @Route(path=\"/\", defaults={\"page\": 1}, name=\"admin_timesheet\", methods={\"GET\"})\n     * @Route(path=\"/page/{page}\", requirements={\"page\": \"[1-9]\\d*\"}, name=\"admin_timesheet_paginated\", methods={\"GET\"})\n     * @Security(\"is_granted('view_other_timesheet')\")\n     *\n     * @param int $page\n     * @param Request $request\n     * @return Response\n     */\n    public function indexAction(int $page, Request $request): Response\n    {\n        $query = $this->createDefaultQuery();\n        $query->setPage($page);\n\n        return $this->index($query, $request, 'admin_timesheet', 'timesheet-team/index.html.twig', TimesheetMetaDisplayEvent::TEAM_TIMESHEET);\n    }\n\n    /**\n     * @Route(path=\"/export/\", name=\"admin_timesheet_export\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('export_other_timesheet')\")\n     */\n    public function exportAction(Request $request, ServiceExport $serviceExport): Response\n    {\n        return $this->export($request, $serviceExport);\n    }\n\n    /**\n     * @Route(path=\"/{id}/edit\", name=\"admin_timesheet_edit\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('edit', entry)\")\n     */\n    public function editAction(Timesheet $entry, Request $request): Response\n    {\n        return $this->edit($entry, $request, 'timesheet-team/edit.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/{id}/duplicate/{token}\", name=\"admin_timesheet_duplicate\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('duplicate', entry)\")\n     */\n    public function duplicateAction(Timesheet $entry, Request $request, string $token, CsrfTokenManagerInterface $csrfTokenManager): Response\n    {\n        if (!$csrfTokenManager->isTokenValid(new CsrfToken('admin_timesheet.duplicate', $token))) {\n            $this->flashError('action.csrf.error');\n\n            return $this->redirectToRoute('admin_timesheet');\n        }\n\n        $csrfTokenManager->refreshToken($token);\n\n        return $this->duplicate($entry, $request, 'timesheet-team/edit.html.twig', $token);\n    }\n\n    /**\n     * @Route(path=\"/create\", name=\"admin_timesheet_create\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_other_timesheet')\")\n     */\n    public function createAction(Request $request, ProjectRepository $projectRepository, ActivityRepository $activityRepository, TagRepository $tagRepository): Response\n    {\n        return $this->create($request, 'timesheet-team/edit.html.twig', $projectRepository, $activityRepository, $tagRepository);\n    }\n\n    /**\n     * @Route(path=\"/create_mu\", name=\"admin_timesheet_create_multiuser\", methods={\"GET\", \"POST\"})\n     * @Security(\"is_granted('create_other_timesheet')\")\n     */\n    public function createForMultiUserAction(Request $request): Response\n    {\n        $entry = new MultiUserTimesheet();\n        $entry->setUser($this->getUser());\n        $this->service->prepareNewTimesheet($entry, $request);\n\n        $createForm = $this->getMultiUserCreateForm($entry);\n        $createForm->handleRequest($request);\n\n        if ($createForm->isSubmitted() && $createForm->isValid()) {\n            try {\n                /** @var ArrayCollection<User> $users */\n                $users = $createForm->get('users')->getData();\n                /** @var ArrayCollection<Team> $teams */\n                $teams = $createForm->get('teams')->getData();\n\n                $allUsers = $users->toArray();\n                /** @var Team $team */\n                foreach ($teams as $team) {\n                    $allUsers = array_merge($allUsers, $team->getUsers());\n                }\n                $allUsers = array_unique($allUsers);\n\n                /** @var Tag[] $tags */\n                $tags = [];\n                /** @var Tag $tag */\n                foreach ($entry->getTags() as $tag) {\n                    $tag->removeTimesheet($entry);\n                    $tags[] = $tag;\n                }\n\n                foreach ($allUsers as $user) {\n                    $newTimesheet = $entry->createCopy();\n                    $newTimesheet->setUser($user);\n                    foreach ($tags as $tag) {\n                        $newTimesheet->addTag($tag);\n                    }\n                    $this->service->prepareNewTimesheet($newTimesheet, $request);\n                    $this->service->saveNewTimesheet($newTimesheet);\n                }\n\n                $this->flashSuccess('action.update.success');\n\n                return $this->redirectToRoute($this->getTimesheetRoute());\n            } catch (\\Exception $ex) {\n                $this->flashUpdateException($ex);\n            }\n        }\n\n        return $this->render('timesheet-team/edit.html.twig', [\n            'timesheet' => $entry,\n            'form' => $createForm->createView(),\n        ]);\n    }\n\n    protected function getMultiUserCreateForm(MultiUserTimesheet $entry): FormInterface\n    {\n        $mode = $this->getTrackingMode();\n\n        return $this->createForm(TimesheetMultiUserEditForm::class, $entry, [\n            'action' => $this->generateUrl('admin_timesheet_create_multiuser'),\n            'include_rate' => $this->isGranted('edit_rate', $entry),\n            'include_exported' => $this->isGranted('edit_export', $entry),\n            'include_user' => $this->includeUserInForms('create'),\n            'allow_begin_datetime' => $mode->canEditBegin(),\n            'allow_end_datetime' => $mode->canEditEnd(),\n            'allow_duration' => $mode->canEditDuration(),\n            'duration_minutes' => $this->configuration->getTimesheetIncrementDuration(),\n            'begin_minutes' => $this->configuration->getTimesheetIncrementBegin(),\n            'end_minutes' => $this->configuration->getTimesheetIncrementEnd(),\n            'timezone' => $this->getDateTimeFactory()->getTimezone()->getName(),\n            'customer' => true,\n        ]);\n    }\n\n    /**\n     * @Route(path=\"/multi-update\", name=\"admin_timesheet_multi_update\", methods={\"POST\"})\n     * @Security(\"is_granted('edit_other_timesheet')\")\n     */\n    public function multiUpdateAction(Request $request): Response\n    {\n        return $this->multiUpdate($request, 'timesheet-team/multi-update.html.twig');\n    }\n\n    /**\n     * @Route(path=\"/multi-delete\", name=\"admin_timesheet_multi_delete\", methods={\"POST\"})\n     * @Security(\"is_granted('delete_other_timesheet')\")\n     */\n    public function multiDeleteAction(Request $request): Response\n    {\n        return $this->multiDelete($request);\n    }\n\n    protected function prepareQuery(TimesheetQuery $query)\n    {\n        $query->setCurrentUser($this->getUser());\n    }\n\n    protected function getCreateForm(Timesheet $entry): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetAdminEditForm::class, $this->generateUrl('admin_timesheet_create'));\n    }\n\n    protected function getDuplicateForm(Timesheet $entry, Timesheet $original, string $token): FormInterface\n    {\n        return $this->generateCreateForm($entry, TimesheetAdminEditForm::class, $this->generateUrl('admin_timesheet_duplicate', ['id' => $original->getId(), 'token' => $token]));\n    }\n\n    protected function getPermissionEditExport(): string\n    {\n        return 'edit_export_other_timesheet';\n    }\n\n    protected function getPermissionEditRate(): string\n    {\n        return 'edit_rate_other_timesheet';\n    }\n\n    protected function getEditFormClassName(): string\n    {\n        return TimesheetAdminEditForm::class;\n    }\n\n    protected function includeUserInForms(string $formName): bool\n    {\n        if ($formName === 'toolbar') {\n            return true;\n        }\n\n        return $this->isGranted('edit_other_timesheet');\n    }\n\n    protected function getTimesheetRoute(): string\n    {\n        return 'admin_timesheet';\n    }\n\n    protected function getEditRoute(): string\n    {\n        return 'admin_timesheet_edit';\n    }\n\n    protected function getExportRoute(): string\n    {\n        return 'admin_timesheet_export';\n    }\n\n    protected function getMultiUpdateRoute(): string\n    {\n        return 'admin_timesheet_multi_update';\n    }\n\n    protected function getMultiDeleteRoute(): string\n    {\n        return 'admin_timesheet_multi_delete';\n    }\n\n    protected function canSeeStartEndTime(): bool\n    {\n        return true;\n    }\n\n    protected function getQueryNamePrefix(): string\n    {\n        return 'TeamTimes';\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Timesheet;\nuse App\\Event\\PageActionsEvent;\n\n/**\n * @internal\n */\nabstract class AbstractTimesheetSubscriber extends AbstractActionsSubscriber\n{\n    protected function timesheetActions(PageActionsEvent $event, string $routeEdit, string $routeDuplicate): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Timesheet $timesheet */\n        $timesheet = $payload['timesheet'];\n        if ($timesheet->getId() !== null) {\n            if ($timesheet->isRunning() && $this->isGranted('stop', $timesheet)) {\n                $event->addAction('stop', ['url' => $this->path('stop_timesheet', ['id' => $timesheet->getId()]), 'class' => 'api-link', 'attr' => ['data-event' => 'kimai.timesheetStop kimai.timesheetUpdate', 'data-method' => 'PATCH', 'data-msg-error' => 'timesheet.stop.error', 'data-msg-success' => 'timesheet.stop.success']]);\n            }\n\n            if (!$timesheet->isRunning() && $this->isGranted('start', $timesheet)) {\n                $event->addAction('repeat', ['url' => $this->path('restart_timesheet', ['id' => $timesheet->getId()]), 'class' => 'api-link', 'attr' => ['data-payload' => '{\"copy\": \"all\"}', 'data-event' => 'kimai.timesheetStart kimai.timesheetUpdate', 'data-method' => 'PATCH', 'data-msg-error' => 'timesheet.start.error', 'data-msg-success' => 'timesheet.start.success']]);\n            }\n\n            if ($this->isGranted('edit', $timesheet)) {\n                $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n                $event->addAction('edit', ['url' => $this->path($routeEdit, ['id' => $timesheet->getId()]), 'class' => $class]);\n            }\n\n            if ($this->isGranted('duplicate', $timesheet)) {\n                $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n                $event->addAction('copy', ['url' => $this->path($routeDuplicate, ['id' => $timesheet->getId(), 'token' => $payload['token']]), 'class' => $class]);\n            }\n\n            if ($event->countActions() > 0) {\n                $event->addDivider();\n            }\n\n            if ($event->isIndexView() && $this->isGranted('delete', $timesheet)) {\n                $event->addAction('trash', [\n                    'url' => $this->path('delete_timesheet', ['id' => $timesheet->getId()]),\n                    'class' => 'api-link',\n                    'attr' => [\n                        'data-event' => 'kimai.timesheetDelete',\n                        'data-method' => 'DELETE',\n                        'data-question' => 'confirm.delete',\n                        'data-msg-error' => 'action.delete.error',\n                        'data-msg-success' => 'action.delete.success'\n                    ]\n                ]);\n            }\n        }\n\n        if (!$event->isIndexView()) {\n            $event->addHelp($this->documentationLink('timesheet.html'));\n        }\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Project;\nuse App\\Event\\PageActionsEvent;\n\nclass ProjectSubscriber extends AbstractActionsSubscriber\n{\n    public static function getActionName(): string\n    {\n        return 'project';\n    }\n\n    public function onActions(PageActionsEvent $event): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Project $project */\n        $project = $payload['project'];\n\n        if ($project->getId() === null) {\n            return;\n        }\n\n        if (!$event->isView('project_details') && $this->isGranted('view', $project)) {\n            $event->addAction('details', ['url' => $this->path('project_details', ['id' => $project->getId()])]);\n        }\n\n        if ($this->isGranted('edit', $project)) {\n            $class = $event->isView('edit') ? '' : 'modal-ajax-form';\n            $event->addAction('edit', ['url' => $this->path('admin_project_edit', ['id' => $project->getId()]), 'class' => $class]);\n        }\n\n        if ($this->isGranted('permissions', $project)) {\n            $class = $event->isView('permissions') ? '' : 'modal-ajax-form';\n            $event->addAction('permissions', ['url' => $this->path('admin_project_permissions', ['id' => $project->getId()]), 'class' => $class]);\n        }\n\n        if ($event->countActions() > 0) {\n            $event->addDivider();\n        }\n\n        if ($this->isGranted('view_activity')) {\n            $event->addActionToSubmenu('filter', 'activity', ['title' => 'activity', 'translation_domain' => 'actions', 'url' => $this->path('admin_activity', ['customers[]' => $project->getCustomer()->getId(), 'projects[]' => $project->getId()])]);\n        }\n\n        if ($this->isGranted('view_other_timesheet')) {\n            $event->addActionToSubmenu('filter', 'timesheet', ['title' => 'timesheet', 'translation_domain' => 'actions', 'url' => $this->path('admin_timesheet', ['customers[]' => $project->getCustomer()->getId(), 'projects[]' => $project->getId()])]);\n        }\n\n        if ($event->hasSubmenu('filter')) {\n            $event->addDivider();\n        }\n\n        if (!$event->isView('project_details')) {\n            if ($project->isVisible() && $project->getCustomer()->isVisible() && $this->isGranted('create_activity')) {\n                $event->addAction('create-activity', [\n                    'icon' => 'create',\n                    'url' => $this->path('admin_activity_create_with_project', ['project' => $project->getId()]),\n                    'class' => 'modal-ajax-form'\n                ]);\n            }\n        }\n\n        if ($this->isGranted('edit', $project) && $this->isGranted('create_project')) {\n            $event->addAction(\n                'copy',\n                ['url' => $this->path('admin_project_duplicate', ['id' => $project->getId(), 'token' => $payload['token']])]\n            );\n        }\n\n        if (($event->isIndexView() || $event->isView('customer_details')) && $this->isGranted('delete', $project)) {\n            $event->addDelete($this->path('admin_project_delete', ['id' => $project->getId()]));\n        }\n\n        if ($project->isVisible() && $this->isGranted('view_reporting') && $this->isGranted('details', $project)) {\n            $event->addAction('report_project_details', ['url' => $this->path('report_project_details', ['project' => $project->getId()]), 'icon' => 'reporting', 'translation_domain' => 'reporting']);\n        }\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\EventSubscriber\\Actions;\n\nuse App\\Entity\\Team;\nuse App\\Event\\PageActionsEvent;\n\nclass TeamSubscriber extends AbstractActionsSubscriber\n{\n    public static function getActionName(): string\n    {\n        return 'team';\n    }\n\n    public function onActions(PageActionsEvent $event): void\n    {\n        $payload = $event->getPayload();\n\n        /** @var Team $team */\n        $team = $payload['team'];\n\n        if ($team->getId() === null) {\n            return;\n        }\n\n        if ($this->isGranted('edit', $team)) {\n            $event->addAction('edit', ['url' => $this->path('admin_team_edit', ['id' => $team->getId()])]);\n\n            if ($this->isGranted('create_team')) {\n                $event->addAction('copy', ['url' => $this->path('team_duplicate', ['id' => $team->getId(), 'token' => $payload['token']])]);\n            }\n        }\n\n        if ($event->isIndexView() && $this->isGranted('delete', $team)) {\n            $event->addAction('trash', [\n                'url' => $this->path('delete_team', ['id' => $team->getId()]),\n                'class' => 'api-link',\n                'attr' => [\n                    'data-event' => 'kimai.teamDelete kimai.teamUpdate',\n                    'data-method' => 'DELETE',\n                    'data-question' => 'confirm.delete',\n                    'data-msg-error' => 'action.delete.error',\n                    'data-msg-success' => 'action.delete.success'\n                ]\n            ]);\n        }\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Initial database structure of Kimai 2.\n * This file is mainly required for testing the migrations.\n */\nfinal class Version20180701120000 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $this->addSql('CREATE TABLE kimai2_users (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(60) NOT NULL, mail VARCHAR(160) NOT NULL, password VARCHAR(254) DEFAULT NULL, alias VARCHAR(60) DEFAULT NULL, active TINYINT(1) NOT NULL, registration_date DATETIME DEFAULT NULL, title VARCHAR(50) DEFAULT NULL, avatar VARCHAR(255) DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', UNIQUE INDEX UNIQ_B9AC5BCE5E237E06 (name), UNIQUE INDEX UNIQ_B9AC5BCE5126AC48 (mail), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_user_preferences (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, name VARCHAR(50) NOT NULL, value VARCHAR(255) DEFAULT NULL, INDEX IDX_8D08F631A76ED395 (user_id), UNIQUE INDEX UNIQ_8D08F631A76ED3955E237E06 (user_id, name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_customers (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(150) NOT NULL, number VARCHAR(50) DEFAULT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, company VARCHAR(255) DEFAULT NULL, contact VARCHAR(255) DEFAULT NULL, address TEXT DEFAULT NULL, country VARCHAR(2) NOT NULL, currency VARCHAR(3) NOT NULL, phone VARCHAR(255) DEFAULT NULL, fax VARCHAR(255) DEFAULT NULL, mobile VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, homepage VARCHAR(255) DEFAULT NULL, timezone VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_projects (id INT AUTO_INCREMENT NOT NULL, customer_id INT DEFAULT NULL, name VARCHAR(150) NOT NULL, order_number TINYTEXT DEFAULT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, budget NUMERIC(10, 2) NOT NULL, INDEX IDX_407F12069395C3F3 (customer_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_activities (id INT AUTO_INCREMENT NOT NULL, project_id INT DEFAULT NULL, name VARCHAR(150) NOT NULL, comment TEXT DEFAULT NULL, visible TINYINT(1) NOT NULL, INDEX IDX_8811FE1C166D1F9C (project_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_timesheet (id INT AUTO_INCREMENT NOT NULL, user INT DEFAULT NULL, activity_id INT DEFAULT NULL, start_time DATETIME NOT NULL, end_time DATETIME DEFAULT NULL, duration INT DEFAULT NULL, description TEXT DEFAULT NULL, rate NUMERIC(10, 2) NOT NULL, INDEX IDX_4F60C6B18D93D649 (user), INDEX IDX_4F60C6B181C06096 (activity_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('CREATE TABLE kimai2_invoice_templates (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(60) NOT NULL, title VARCHAR(255) NOT NULL, company VARCHAR(255) NOT NULL, address TEXT DEFAULT NULL, due_days INT NOT NULL, vat INT DEFAULT NULL, calculator VARCHAR(20) NOT NULL, number_generator VARCHAR(20) NOT NULL, renderer VARCHAR(20) NOT NULL, payment_terms TEXT DEFAULT NULL, UNIQUE INDEX UNIQ_1626CFE95E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB');\n        $this->addSql('ALTER TABLE kimai2_user_preferences ADD CONSTRAINT FK_8D08F631A76ED395 FOREIGN KEY (user_id) REFERENCES kimai2_users (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE kimai2_projects ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES kimai2_customers (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE kimai2_activities ADD CONSTRAINT FK_8811FE1C166D1F9C FOREIGN KEY (project_id) REFERENCES kimai2_projects (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES kimai2_users (id)');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B181C06096 FOREIGN KEY (activity_id) REFERENCES kimai2_activities (id) ON DELETE CASCADE');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $schema->dropTable('kimai2_invoice_templates');\n        $schema->dropTable('kimai2_timesheet');\n        $schema->dropTable('kimai2_user_preferences');\n        $schema->dropTable('kimai2_users');\n        $schema->dropTable('kimai2_activities');\n        $schema->dropTable('kimai2_projects');\n        $schema->dropTable('kimai2_customers');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Index;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migration for FOSUserBundle\n *\n * Changes the table structure of \"users\" table and migrates from json_array type to serialized array,\n * probably also fixing the higher required MariaDB version.\n *\n * This was fixed in earlier migrations for new installations, but it is still in here for users migrating up from a lower version.\n */\nfinal class Version20180715160326 extends AbstractMigration\n{\n    /**\n     * @var Index[]\n     */\n    protected $indexesOld = [];\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     * @throws \\Doctrine\\DBAL\\Schema\\SchemaException\n     */\n    public function up(Schema $schema): void\n    {\n        // delete all existing indexes\n        $indexesOld = $schema->getTable('kimai2_users')->getIndexes();\n        foreach ($indexesOld as $index) {\n            if (\\in_array('name', $index->getColumns()) || \\in_array('mail', $index->getColumns())) {\n                $this->indexesOld[] = $index;\n                $this->addSql('DROP INDEX ' . $index->getName() . ' ON kimai2_users');\n            }\n        }\n\n        $this->addSql('ALTER TABLE kimai2_users CHANGE name username VARCHAR(180) NOT NULL, ADD username_canonical VARCHAR(180) NOT NULL, CHANGE mail email VARCHAR(180) NOT NULL, ADD email_canonical VARCHAR(180) NOT NULL, ADD salt VARCHAR(255) DEFAULT NULL, ADD last_login DATETIME DEFAULT NULL, ADD confirmation_token VARCHAR(180) DEFAULT NULL, ADD password_requested_at DATETIME DEFAULT NULL, CHANGE password password VARCHAR(255) NOT NULL, CHANGE alias alias VARCHAR(60) DEFAULT NULL, CHANGE registration_date registration_date DATETIME DEFAULT NULL, CHANGE title title VARCHAR(50) DEFAULT NULL, CHANGE avatar avatar VARCHAR(255) DEFAULT NULL, CHANGE roles roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', CHANGE active enabled TINYINT(1) NOT NULL');\n        $this->addSql('UPDATE kimai2_users set username_canonical = username');\n        $this->addSql('UPDATE kimai2_users set email_canonical = email');\n\n        $this->addSql('UPDATE kimai2_users SET roles = \\'a:1:{i:0;s:16:\"ROLE_SUPER_ADMIN\";}\\' WHERE roles LIKE \\'%ROLE_SUPER_ADMIN%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'a:1:{i:0;s:10:\"ROLE_ADMIN\";}\\' WHERE roles LIKE \\'%ROLE_ADMIN%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'a:1:{i:0;s:13:\"ROLE_TEAMLEAD\";}\\' WHERE roles LIKE \\'%ROLE_TEAMLEAD%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'a:0:{}\\' WHERE roles LIKE \\'%ROLE_USER%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'a:1:{i:0;s:13:\"ROLE_CUSTOMER\";}\\' WHERE roles LIKE \\'%ROLE_CUSTOMER%\\'');\n\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE92FC23A8 ON kimai2_users (username_canonical)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEA0D96FBF ON kimai2_users (email_canonical)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEC05FB297 ON kimai2_users (confirmation_token)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEF85E0677 ON kimai2_users (username)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCEE7927C74 ON kimai2_users (email)');\n    }\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     * @throws \\Doctrine\\DBAL\\Schema\\SchemaException\n     */\n    public function down(Schema $schema): void\n    {\n        $indexToDelete = ['UNIQ_B9AC5BCE92FC23A8', 'UNIQ_B9AC5BCEA0D96FBF', 'UNIQ_B9AC5BCEC05FB297', 'UNIQ_B9AC5BCEF85E0677', 'UNIQ_B9AC5BCEE7927C74'];\n        foreach ($indexToDelete as $indexName) {\n            $this->addSql('DROP INDEX ' . $indexName . ' ON kimai2_users');\n        }\n\n        $this->addSql('ALTER TABLE kimai2_users CHANGE username name VARCHAR(60) NOT NULL COLLATE utf8mb4_unicode_ci, CHANGE email mail VARCHAR(160) NOT NULL COLLATE utf8mb4_unicode_ci, DROP username_canonical, DROP email_canonical, DROP salt, DROP last_login, DROP confirmation_token, DROP password_requested_at, CHANGE password password VARCHAR(254) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE roles roles LONGTEXT NOT NULL COMMENT \\'(DC2Type:array)\\', CHANGE alias alias VARCHAR(60) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE registration_date registration_date DATETIME DEFAULT NULL, CHANGE title title VARCHAR(50) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE avatar avatar VARCHAR(255) DEFAULT NULL COLLATE utf8mb4_unicode_ci, CHANGE enabled active TINYINT(1) NOT NULL');\n\n        $this->addSql('UPDATE kimai2_users SET roles = \\'[\"ROLE_SUPER_ADMIN\"]\\' WHERE roles LIKE \\'%ROLE_SUPER_ADMIN%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'[\"ROLE_ADMIN\"]\\' WHERE roles LIKE \\'%ROLE_ADMIN%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'[\"ROLE_TEAMLEAD\"]\\' WHERE roles LIKE \\'%ROLE_TEAMLEAD%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'[\"ROLE_USER\"]\\' WHERE roles LIKE \\'%ROLE_USER%\\'');\n        $this->addSql('UPDATE kimai2_users SET roles = \\'[\"ROLE_CUSTOMER\"]\\' WHERE roles LIKE \\'%ROLE_CUSTOMER%\\'');\n\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE5E237E06 ON kimai2_users (name)');\n        $this->addSql('CREATE UNIQUE INDEX UNIQ_B9AC5BCE5126AC48 ON kimai2_users (mail)');\n\n        $usersTable = $schema->getTable('kimai2_users');\n        foreach ($this->indexesOld as $index) {\n            $usersTable->addIndex($index->getColumns(), $index->getName(), $index->getFlags(), $index->getOptions());\n        }\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Index;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migrations fot the \"delete user\" feature.\n *\n * Adds constraints to the timesheet table, so all timesheet entries will be deleted when a user is deleted.\n */\nfinal class Version20180730044139 extends AbstractMigration\n{\n    /**\n     * @var Index[]\n     */\n    protected $indexesOld = [];\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     */\n    public function up(Schema $schema): void\n    {\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES kimai2_users (id) ON DELETE CASCADE');\n    }\n\n    /**\n     * @param Schema $schema\n     * @throws \\Doctrine\\DBAL\\DBALException\n     */\n    public function down(Schema $schema): void\n    {\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES kimai2_users (id)');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Changes the invoice templates table for:\n * - shorter template name and proper index name\n * - VAT supporting percentages\n */\nfinal class Version20180924111853 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $this->addSql('UPDATE kimai2_invoice_templates SET name=SUBSTRING(name, 1, 60)');\n        $this->addSql('ALTER TABLE kimai2_invoice_templates CHANGE name name VARCHAR(60) NOT NULL, CHANGE vat vat DOUBLE PRECISION DEFAULT 0');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $this->addSql('ALTER TABLE kimai2_invoice_templates CHANGE name name VARCHAR(255) NOT NULL COLLATE utf8mb4_unicode_ci, CHANGE vat vat INT DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * Migration that adds the project column to timesheets table, to allow global activities.\n * It also fixes foreign-key columns on timesheet and projects table, which are not allowed.\n */\nfinal class Version20181031220003 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        // project table\n        $this->addSql('ALTER TABLE kimai2_projects DROP FOREIGN KEY FK_407F12069395C3F3');\n        $this->addSql('ALTER TABLE kimai2_projects CHANGE customer_id customer_id INT NOT NULL');\n        $this->addSql('ALTER TABLE kimai2_projects ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES kimai2_customers (id) ON DELETE CASCADE');\n        // timesheet table\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD project_id INT DEFAULT NULL AFTER activity_id');\n        $this->addSql('CREATE INDEX IDX_4F60C6B1166D1F9C ON kimai2_timesheet (project_id)');\n\n        // update timesheet table and insert project_id from activity table\n        $this->addSql('UPDATE kimai2_timesheet SET project_id = (SELECT project_id FROM kimai2_activities WHERE id = activity_id)');\n\n        // now update the timesheet table and disallow null values for all required columns (that was a bug before)\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP FOREIGN KEY FK_4F60C6B18D93D649');\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP FOREIGN KEY FK_4F60C6B181C06096');\n        $this->addSql('ALTER TABLE kimai2_timesheet CHANGE project_id project_id INT NOT NULL, CHANGE user user INT NOT NULL, CHANGE activity_id activity_id INT NOT NULL');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B1166D1F9C FOREIGN KEY (project_id) REFERENCES kimai2_projects (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B18D93D649 FOREIGN KEY (user) REFERENCES kimai2_users (id) ON DELETE CASCADE');\n        $this->addSql('ALTER TABLE kimai2_timesheet ADD CONSTRAINT FK_4F60C6B181C06096 FOREIGN KEY (activity_id) REFERENCES kimai2_activities (id) ON DELETE CASCADE');\n    }\n\n    public function down(Schema $schema): void\n    {\n        // project table\n        $this->addSql('ALTER TABLE kimai2_projects DROP FOREIGN KEY FK_407F12069395C3F3');\n        $this->addSql('ALTER TABLE kimai2_projects CHANGE customer_id customer_id INT DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_projects ADD CONSTRAINT FK_407F12069395C3F3 FOREIGN KEY (customer_id) REFERENCES kimai2_customers (id) ON DELETE CASCADE');\n        // timesheet table\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP FOREIGN KEY FK_4F60C6B1166D1F9C');\n        $this->addSql('DROP INDEX IDX_4F60C6B1166D1F9C ON kimai2_timesheet');\n        $this->addSql('ALTER TABLE kimai2_timesheet DROP project_id, CHANGE user user INT DEFAULT NULL, CHANGE activity_id activity_id INT DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * - rename mail to email in customer table\n * - converts all decimal to float values, as decimals are treated as string in PHP:\n *   https://www.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#decimal\n *\n * @version 0.9\n */\nfinal class Version20190305152308 extends AbstractMigration\n{\n    public function up(Schema $schema): void\n    {\n        $this->addSql('ALTER TABLE kimai2_activities CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_customers CHANGE mail email VARCHAR(255) DEFAULT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_projects CHANGE budget budget DOUBLE PRECISION NOT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_timesheet CHANGE rate rate DOUBLE PRECISION NOT NULL, CHANGE fixed_rate fixed_rate DOUBLE PRECISION DEFAULT NULL, CHANGE hourly_rate hourly_rate DOUBLE PRECISION DEFAULT NULL');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $this->addSql('ALTER TABLE kimai2_activities CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_customers CHANGE email mail VARCHAR(255) DEFAULT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_projects CHANGE budget budget NUMERIC(10, 2) NOT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n        $this->addSql('ALTER TABLE kimai2_timesheet CHANGE rate rate NUMERIC(10, 2) NOT NULL, CHANGE fixed_rate fixed_rate NUMERIC(10, 2) DEFAULT NULL, CHANGE hourly_rate hourly_rate NUMERIC(10, 2) DEFAULT NULL');\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * @version 1.15\n */\nfinal class Version20210802152814 extends AbstractMigration\n{\n    public function getDescription(): string\n    {\n        return 'Fills the new date column in the timesheet table';\n    }\n\n    public function up(Schema $schema): void\n    {\n        $fetch = $this->connection->prepare('SELECT id, start_time, timezone FROM kimai2_timesheet WHERE date_tz IS NULL');\n\n        $timezones = [];\n        foreach (\\DateTimeZone::listIdentifiers() as $tz) {\n            $timezones[$tz] = new \\DateTimeZone($tz);\n        }\n\n        foreach ($fetch->executeQuery()->iterateAssociative() as $row) {\n            if (!isset($timezones[$row['timezone']])) {\n                $timezones[$row['timezone']] = new \\DateTimeZone($row['timezone']);\n            }\n            $date = new \\DateTime($row['start_time'], $timezones['UTC']);\n            $date->setTimezone($timezones[$row['timezone']]);\n            $this->addSql('UPDATE kimai2_timesheet SET date_tz = ? WHERE id = ?', [$date->format('Y-m-d'), $row['id']]);\n        }\n\n        $fetch->free();\n\n        $this->addSql('ALTER TABLE kimai2_timesheet ALTER date_tz DROP DEFAULT');\n    }\n\n    public function down(Schema $schema): void\n    {\n        $timesheet = $schema->getTable('kimai2_timesheet');\n        $timesheet->changeColumn('date_tz', ['notnull' => false]);\n\n        $this->preventEmptyMigrationWarning();\n    }\n}\n", "<?php\n\ndeclare(strict_types=1);\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace DoctrineMigrations;\n\nuse App\\Doctrine\\AbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\n/**\n * @version 1.16\n */\nfinal class Version20211008092010 extends AbstractMigration\n{\n    public function getDescription(): string\n    {\n        return 'Extend field orderNumber from 20 to 50 characters.';\n    }\n\n    public function up(Schema $schema): void\n    {\n        $projects = $schema->getTable('kimai2_projects');\n        $column = $projects->getColumn('order_number');\n        $column->setOptions(['length' => 50]);\n\n        $this->preventEmptyMigrationWarning();\n    }\n\n    public function down(Schema $schema): void\n    {\n        $projects = $schema->getTable('kimai2_projects');\n        $column = $projects->getColumn('order_number');\n        $column->setOptions(['length' => 20]);\n    }\n}\n", "{% extends \"@AdminLTE/layout/form-theme.html.twig\" %}\n\n{# Adds the help icon, including a link to the documentation #}\n{% block form_label %}\n    {% if form.vars.docu_chapter is defined and form.vars.docu_chapter is not empty %}\n        <a href=\"{{ form.vars.docu_chapter|docu_link }}\" target=\"_blank\"><i class=\"{{ 'help'|icon }}\"></i></a>\n    {% endif %}\n    {{ parent() }}\n{% endblock form_label %}\n\n{% block quick_entry_week_row %}\n    <tr{% with {attr: row_attr|merge({class: (row_attr.class|default('') ~ ' form-group qe-entry-week-row' ~ (not valid ? ' has-error'))|trim})} %}{{ block('attributes') }}{% endwith %}>\n        <td>\n            {{ form_row(form.project) }}\n        </td>\n        <td>\n            {{ form_row(form.activity) }}\n        </td>\n        {% for timesheet in form.timesheets %}\n            <td class=\"text-center{% if timesheet.vars.data.begin is weekend %} weekend{% endif %}{% if timesheet.vars.data.begin is today %} today{% endif %}\">\n                {{ form_row(timesheet) }}\n            </td>\n        {% endfor %}\n        <td class=\"text-nowrap text-center total qe-totals-row\"></td>\n    </tr>\n{% endblock %}\n\n{% block _team_edit_form_members_entry_user_widget %}\n    {#  this will convert the select box into a hidden field, which are exchangable from an HTML perspective #}\n    {%- set type = 'hidden' -%}\n    {{ block('form_widget_simple') }}\n{% endblock %}\n\n{% block team_member_widget %}\n    <div class=\"row\">\n        <div class=\"col-xs-7\">\n            <div class=\"checkbox\">\n            <button class=\"btn btn-default btn-xs\" onclick=\"jQuery(this).parent().parent().parent().remove();return false;\"><i class=\"{{ 'trash'|icon }}\"></i></button>\n            {% if form.vars.data is not null and form.vars.data.user is not null %}\n                {{ form.vars.data.user.displayName }}\n            {% else %}\n                __USERNAME__\n            {% endif %}\n            </div>\n            {{ form_widget(form.user) }}\n            {{ form_errors(form.user) }}\n        </div>\n        <div class=\"col-xs-5\">\n            {{ form_widget(form.teamlead) }}\n        </div>\n    </div>\n{% endblock team_member_widget %}\n\n{% block daterange_widget %}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <i class=\"far fa-calendar-alt\"></i>\n        </div>\n\n        {% set attr = attr|merge({'data-daterangepickerenable':'on'}) %}\n\n        {{ block('form_widget_simple') }}\n    </div>\n{% endblock daterange_widget %}\n\n{% block duration_widget %}\n    {% if (form.vars.duration_presets is defined and form.vars.duration_presets is not empty) and (form.vars.disabled is same as (false)) %}\n    <div class=\"input-group\">\n        {{ block('form_widget_simple') }}\n        <div class=\"input-group-btn\">\n            <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><span class=\"caret\"></span></button>\n            <ul class=\"dropdown-menu dropdown-menu-right pre-scrollable\">\n                {% for value in form.vars.duration_presets %}\n                    <li class=\"text-center\">\n                        <a href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ value }}').trigger('change');return false;\">{{ value }}</a>\n                    </li>\n                {% endfor %}\n            </ul>\n        </div>\n    </div>\n    {% else %}\n        {{ block('form_widget_simple') }}\n    {% endif %}\n{% endblock duration_widget %}\n\n{% block datetime_widget -%}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <a href=\"#\" onclick=\"if (!jQuery('#{{ id }}').is(':disabled')) { jQuery('#{{ id }}').val(moment().format('{{ attr['data-format'] }}')).change(); }return false;\"><i class=\"{{ 'calendar'|icon }}\"></i></a>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n{%- endblock datetime_widget %}\n\n{% block date_widget -%}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <a href=\"#\" onclick=\"if (!jQuery('#{{ id }}').is(':disabled')) { jQuery('#{{ id }}').val(moment().format('{{ attr['data-format'] }}')).change(); }return false;\"><i class=\"{{ 'calendar'|icon }}\"></i></a>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n{%- endblock date_widget %}\n\n{% block text_widget -%}\n    {% if icon is not empty %}\n    <div class=\"input-group\">\n        <div class=\"input-group-addon\">\n            <i class=\"{{ icon|icon }}\"></i>\n        </div>\n        {{ block('form_widget_simple') }}\n    </div>\n    {% else %}\n        {{ block('form_widget_simple') }}\n    {% endif %}\n{%- endblock text_widget %}\n\n{% block yearpicker_widget -%}\n    <div class=\"btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousYear|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ previousYear|date_short }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_month_name\">\n                {% if show_range %}\n                    {{ year|date_short }} &ndash; {{ nextYear|date_short }}\n                {% else %}\n                    {{ year|date_format('Y') }}\n                {% endif %}\n            </span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextYear|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ nextYear|date_short }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock yearpicker_widget %}\n\n{% block monthpicker_widget -%}\n    <div class=\"btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousMonth|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ previousMonth|month_name(true) }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_month_name\">{{ month|month_name(true) }}</span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextMonth|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ nextMonth|month_name(true) }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock monthpicker_widget %}\n\n{% block weekpicker_widget -%}\n    <div class=\"btn-group week-picker-btn-group\">\n        <a class=\"btn btn-default btn-left\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ previousWeek|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': previousWeek|date_format('W')}) }}\">\n            <i class=\"{{ 'left'|icon }}\"></i>\n        </a>\n        <a class=\"btn btn-default\" href=\"#\" onclick=\"return false;\">\n            <span id=\"{{ form.vars.id }}_week_number\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': week|date_format('W')}) }}\">\n                {{ week|month_name(true) }}\n                &ndash;\n                {{ 'stats.workingTimeWeekShort'|trans({'%week%': week|date_format('W')}) }}\n            </span>\n        </a>\n        <a class=\"btn btn-default btn-right\" href=\"#\" onclick=\"jQuery('#{{ form.vars.id }}').val('{{ nextWeek|report_date }}').change()\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"{{ 'stats.workingTimeWeek'|trans({'%week%': nextWeek|date_format('W')}) }}\">\n            <i class=\"{{ 'right'|icon }}\"></i>\n        </a>\n    </div>\n    {{ block('hidden_widget') }}\n{%- endblock weekpicker_widget %}\n", "{% macro projects(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'projects', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro project(project, view, isTable) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'project', view, {'project': project, 'token': csrf_token('project.duplicate')}) %}\n    {% if view == 'index' or view == 'custom' or isTable is not null %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n", "{% macro teams(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'teams', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro team(team, view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'team', view, {'team': team, 'token': csrf_token('team.duplicate')}) %}\n    {% if view == 'index' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n", "{% macro timesheets_team(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_team', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro timesheet_team(timesheet, view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheet_team', view, {'timesheet': timesheet, 'token': csrf_token('admin_timesheet.duplicate')}) %}\n    {% if view == 'index' or view == 'custom' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n\n{% macro timesheets_team_multi_update(view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_team_multi_update', view) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n", "{% macro timesheets(view, query) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets', view, {'query': query}) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n\n{% macro timesheet(timesheet, view, options) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheet', view, {'timesheet': timesheet, 'token': csrf_token('timesheet.duplicate')}) %}\n    {% if view == 'index' or view == 'custom' %}\n        {{ widgets.table_actions(event.actions) }}\n    {% else %}\n        {{ widgets.page_actions(event.actions) }}\n    {% endif %}\n{% endmacro %}\n\n{% macro timesheets_multi_update(view) %}\n    {% import \"macros/widgets.html.twig\" as widgets %}\n    {% set event = actions(app.user, 'timesheets_multi_update', view) %}\n    {{ widgets.page_actions(event.actions) }}\n{% endmacro %}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\DataFixtures\\UserFixtures;\nuse App\\Entity\\Configuration;\nuse App\\Entity\\User;\nuse App\\Repository\\ConfigurationRepository;\nuse App\\Repository\\UserRepository;\nuse App\\Tests\\KernelTestTrait;\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;\nuse Symfony\\Component\\HttpFoundation\\BinaryFileResponse;\nuse Symfony\\Component\\HttpFoundation\\RedirectResponse;\nuse Symfony\\Component\\HttpFoundation\\Test\\Constraint as ResponseConstraint;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * ControllerBaseTest adds some useful functions for writing integration tests.\n */\nabstract class ControllerBaseTest extends WebTestCase\n{\n    use KernelTestTrait;\n\n    public const DEFAULT_LANGUAGE = 'en';\n\n    protected function tearDown(): void\n    {\n        $this->clearConfigCache();\n        parent::tearDown();\n    }\n\n    /**\n     * Using a special container, to access private services as well.\n     *\n     * @param string $service\n     * @return object|null\n     * @see https://symfony.com/blog/new-in-symfony-4-1-simpler-service-testing\n     */\n    protected function getPrivateService(string $service)\n    {\n        return self::$container->get($service);\n    }\n\n    protected function loadUserFromDatabase(string $username)\n    {\n        $container = self::$kernel->getContainer();\n        /** @var UserRepository $userRepository */\n        $userRepository = $container->get('doctrine')->getRepository(User::class);\n        $user = $userRepository->loadUserByUsername($username);\n        self::assertInstanceOf(User::class, $user);\n\n        return $user;\n    }\n\n    protected function setSystemConfiguration(string $name, $value): void\n    {\n        $repository = static::$kernel->getContainer()->get(ConfigurationRepository::class);\n\n        $entity = $repository->findOneBy(['name' => $name]);\n        if ($entity === null) {\n            $entity = new Configuration();\n            $entity->setName($name);\n        }\n        $entity->setValue($value);\n        $repository->saveConfiguration($entity);\n        $this->clearConfigCache();\n    }\n\n    protected function clearConfigCache()\n    {\n        /** @var ConfigurationRepository $repository */\n        $repository = static::$kernel->getContainer()->get(ConfigurationRepository::class);\n        $repository->clearCache();\n    }\n\n    protected function getClientForAuthenticatedUser(string $role = User::ROLE_USER): HttpKernelBrowser\n    {\n        switch ($role) {\n            case User::ROLE_SUPER_ADMIN:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_SUPER_ADMIN,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_ADMIN:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_ADMIN,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_TEAMLEAD:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_TEAMLEAD,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            case User::ROLE_USER:\n                $client = self::createClient([], [\n                    'PHP_AUTH_USER' => UserFixtures::USERNAME_USER,\n                    'PHP_AUTH_PW' => UserFixtures::DEFAULT_PASSWORD,\n                ]);\n                break;\n\n            default:\n                $client = null;\n                break;\n        }\n\n        return $client;\n    }\n\n    protected function createUrl(string $url): string\n    {\n        return '/' . self::DEFAULT_LANGUAGE . '/' . ltrim($url, '/');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     * @param string $method\n     * @param array $parameters\n     * @param string $content\n     * @return \\Symfony\\Component\\DomCrawler\\Crawler\n     */\n    protected function request(HttpKernelBrowser $client, string $url, $method = 'GET', array $parameters = [], string $content = null)\n    {\n        return $client->request($method, $this->createUrl($url), $parameters, [], [], $content);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertRequestIsSecured(HttpKernelBrowser $client, string $url, ?string $method = 'GET')\n    {\n        $this->request($client, $url, $method);\n\n        /** @var RedirectResponse $response */\n        $response = $client->getResponse();\n        self::assertInstanceOf(RedirectResponse::class, $response);\n\n        self::assertTrue(\n            $response->isRedirect(),\n            sprintf('The secure URL %s is not protected.', $url)\n        );\n\n        self::assertStringEndsWith(\n            '/login',\n            $response->getTargetUrl(),\n            sprintf('The secure URL %s does not redirect to the login form.', $url)\n        );\n    }\n\n    protected function assertSuccessResponse(HttpKernelBrowser $client, string $message = '')\n    {\n        $response = $client->getResponse();\n        self::assertThat($response, new ResponseConstraint\\ResponseIsSuccessful(), 'Response is not successful, got code: ' . $response->getStatusCode());\n    }\n\n    /**\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertUrlIsSecured(string $url, $method = 'GET')\n    {\n        $client = self::createClient();\n        $this->assertRequestIsSecured($client, $url, $method);\n    }\n\n    /**\n     * @param string $role\n     * @param string $url\n     * @param string $method\n     */\n    protected function assertUrlIsSecuredForRole(string $role, string $url, string $method = 'GET')\n    {\n        $client = $this->getClientForAuthenticatedUser($role);\n        $client->request($method, $this->createUrl($url));\n        self::assertFalse(\n            $client->getResponse()->isSuccessful(),\n            sprintf('The secure URL %s is not protected for role %s', $url, $role)\n        );\n        $this->assertAccessDenied($client);\n    }\n\n    protected function assertAccessDenied(HttpKernelBrowser $client)\n    {\n        self::assertFalse(\n            $client->getResponse()->isSuccessful(),\n            'Access is not denied for URL: ' . $client->getRequest()->getUri()\n        );\n        self::assertStringContainsString(\n            'Symfony\\Component\\Security\\Core\\Exception\\AccessDeniedException',\n            $client->getResponse()->getContent(),\n            'Could not find AccessDeniedException in response'\n        );\n    }\n\n    protected function assertAccessIsGranted(HttpKernelBrowser $client, string $url, string $method = 'GET', array $parameters = [])\n    {\n        $this->request($client, $url, $method, $parameters);\n        self::assertTrue($client->getResponse()->isSuccessful());\n    }\n\n    protected function assertRouteNotFound(HttpKernelBrowser $client)\n    {\n        self::assertFalse($client->getResponse()->isSuccessful());\n        self::assertEquals(404, $client->getResponse()->getStatusCode());\n    }\n\n    protected function assertMainContentClass(HttpKernelBrowser $client, string $classname)\n    {\n        self::assertStringContainsString('<section class=\"content ' . $classname . '\">', $client->getResponse()->getContent());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected function assertHasDataTable(HttpKernelBrowser $client)\n    {\n        self::assertStringContainsString('<table class=\"table table-hover dataTable\" role=\"grid\" data-reload-event=\"', $client->getResponse()->getContent());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected static function assertHasProgressbar(HttpKernelBrowser $client)\n    {\n        $content = $client->getResponse()->getContent();\n        self::assertStringContainsString('<div class=\"progress-bar progress-bar-', $content);\n        self::assertStringContainsString('\" role=\"progressbar\" aria-valuenow=\"', $content);\n        self::assertStringContainsString('\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: ', $content);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $class\n     * @param int $count\n     */\n    protected function assertDataTableRowCount(HttpKernelBrowser $client, string $class, int $count)\n    {\n        $node = $client->getCrawler()->filter('section.content div.' . $class . ' table.dataTable tbody tr:not(.summary)');\n        self::assertEquals($count, $node->count());\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param array $buttons\n     */\n    protected function assertPageActions(HttpKernelBrowser $client, array $buttons)\n    {\n        $node = $client->getCrawler()->filter('section.content-header div.breadcrumb div.box-tools div.btn-group a');\n\n        /** @var \\DOMElement $element */\n        foreach ($node->getIterator() as $element) {\n            $expectedClass = str_replace('btn btn-default btn-', '', $element->getAttribute('class'));\n            self::assertArrayHasKey($expectedClass, $buttons);\n            $expectedUrl = $buttons[$expectedClass];\n            self::assertEquals($expectedUrl, $element->getAttribute('href'));\n        }\n\n        self::assertEquals(\\count($buttons), $node->count(), 'Invalid amount of page actions');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client the client to use\n     * @param string $url the URL of the page displaying the initial form to submit\n     * @param string $formSelector a selector to find the form to test\n     * @param array $formData values to fill in the form\n     * @param array $fieldNames array of form-fields that should fail\n     * @param bool $disableValidation whether the form should validate before submitting or not\n     */\n    protected function assertHasValidationError(HttpKernelBrowser $client, $url, $formSelector, array $formData, array $fieldNames, $disableValidation = true)\n    {\n        $crawler = $client->request('GET', $this->createUrl($url));\n        $form = $crawler->filter($formSelector)->form();\n        if ($disableValidation) {\n            $form->disableValidation();\n        }\n        $result = $client->submit($form, $formData);\n\n        $submittedForm = $result->filter($formSelector);\n        $validationErrors = $submittedForm->filter('li.text-danger');\n\n        self::assertEquals(\n            \\count($fieldNames),\n            \\count($validationErrors),\n            sprintf('Expected %s validation errors, found %s', \\count($fieldNames), \\count($validationErrors))\n        );\n\n        foreach ($fieldNames as $name) {\n            $field = $submittedForm->filter($name);\n            self::assertNotNull($field, 'Could not find form field: ' . $name);\n            $list = $field->nextAll();\n            self::assertNotNull($list, 'Form field has no validation message: ' . $name);\n\n            $validation = $list->filter('li.text-danger');\n            if (\\count($validation) < 1) {\n                // decorated form fields with icon have a different html structure, see kimai-theme.html.twig\n                /** @var \\DOMElement $listMsg */\n                $listMsg = $field->parents()->getNode(1);\n                $classes = $listMsg->getAttribute('class');\n                self::assertStringContainsString('has-error', $classes, 'Form field has no validation message: ' . $name);\n            }\n        }\n    }\n\n    /**\n     * @param string $role the USER role to use for the request\n     * @param string $url the URL of the page displaying the initial form to submit\n     * @param string $formSelector a selector to find the form to test\n     * @param array $formData values to fill in the form\n     * @param array $fieldNames array of form-fields that should fail\n     * @param bool $disableValidation whether the form should validate before submitting or not\n     */\n    protected function assertFormHasValidationError($role, $url, $formSelector, array $formData, array $fieldNames, $disableValidation = true)\n    {\n        $client = $this->getClientForAuthenticatedUser($role);\n        $this->assertHasValidationError($client, $url, $formSelector, $formData, $fieldNames, $disableValidation);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     */\n    protected function assertHasNoEntriesWithFilter(HttpKernelBrowser $client)\n    {\n        $this->assertCalloutWidgetWithMessage($client, 'No entries were found based on your selected filters.');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $message\n     */\n    protected function assertCalloutWidgetWithMessage(HttpKernelBrowser $client, string $message)\n    {\n        $node = $client->getCrawler()->filter('div.callout.callout-warning.lead');\n        self::assertStringContainsString($message, $node->text(null, true));\n    }\n\n    protected function assertHasFlashDeleteSuccess(HttpKernelBrowser $client)\n    {\n        $this->assertHasFlashSuccess($client, 'Entry was deleted');\n    }\n\n    protected function assertHasFlashSaveSuccess(HttpKernelBrowser $client)\n    {\n        $this->assertHasFlashSuccess($client, 'Saved changes');\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string|null $message\n     */\n    protected function assertHasFlashSuccess(HttpKernelBrowser $client, string $message = null)\n    {\n        $this->assertHasFlashMessage($client, 'success', $message);\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string|null $message\n     */\n    protected function assertHasFlashError(HttpKernelBrowser $client, string $message = null)\n    {\n        $this->assertHasFlashMessage($client, 'error', $message);\n    }\n\n    private function assertHasFlashMessage(HttpKernelBrowser $client, string $type, string $message = null)\n    {\n        $content = $client->getResponse()->getContent();\n        self::assertStringContainsString('ALERT.' . $type . '(\\'', $content, 'Could not find flash ' . $type . ' message');\n        if (null !== $message) {\n            // this is a lazy workaround, the templates use the javascript escape filter: |e('js')\n            // if you ever want to test more complex strings, this logic has to be enhanced\n            $message = str_replace([' ', ':'], ['\\u0020', '\\u003A'], $message);\n            self::assertStringContainsString($message, $content);\n        }\n    }\n\n    /**\n     * @param HttpKernelBrowser $client\n     * @param string $url\n     */\n    protected function assertIsRedirect(HttpKernelBrowser $client, $url = null)\n    {\n        self::assertResponseRedirects();\n\n        if (null === $url) {\n            return;\n        }\n\n        $this->assertRedirectUrl($client, $url);\n    }\n\n    protected function assertRedirectUrl(HttpKernelBrowser $client, $url = null, $endsWith = true)\n    {\n        self::assertTrue($client->getResponse()->headers->has('Location'), 'Could not find \"Location\" header');\n        $location = $client->getResponse()->headers->get('Location');\n\n        if ($endsWith) {\n            self::assertStringEndsWith($url, $location, 'Redirect URL does not match');\n        } else {\n            self::assertStringContainsString($url, $location, 'Redirect URL does not match');\n        }\n    }\n\n    protected function assertExcelExportResponse(HttpKernelBrowser $client, string $prefix)\n    {\n        /** @var BinaryFileResponse $response */\n        $response = $client->getResponse();\n        self::assertInstanceOf(BinaryFileResponse::class, $response);\n\n        self::assertEquals('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', $response->headers->get('Content-Type'));\n        self::assertStringContainsString('attachment; filename=' . $prefix, $response->headers->get('Content-Disposition'));\n        self::assertStringContainsString('.xlsx', $response->headers->get('Content-Disposition'));\n    }\n\n    protected function assertInvalidCsrfToken(HttpKernelBrowser $client, string $url, string $expectedRedirect)\n    {\n        $this->request($client, $url);\n\n        $this->assertIsRedirect($client);\n        $this->assertRedirectUrl($client, $expectedRedirect);\n        $client->followRedirect();\n        $this->assertHasFlashError($client, 'The action could not be performed: invalid security token.');\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\User;\n\n/**\n * @group integration\n */\nclass DoctorControllerTest extends ControllerBaseTest\n{\n    public function testDoctorIsSecure()\n    {\n        $this->assertUrlIsSecured('/doctor');\n    }\n\n    public function testDoctorIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_ADMIN, '/doctor');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n        $this->assertAccessIsGranted($client, '/doctor');\n\n        $result = $client->getCrawler()->filter('.content .box-header');\n        self::assertCount(6, $result);\n    }\n\n    public function testFlushLogWithInvalidCsrf()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $this->assertInvalidCsrfToken($client, '/doctor/flush-log/rsetdzfukgli78t6r5uedtjfzkugl', $this->createUrl('/doctor'));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Activity;\nuse App\\Entity\\ActivityMeta;\nuse App\\Entity\\ActivityRate;\nuse App\\Entity\\Project;\nuse App\\Entity\\ProjectComment;\nuse App\\Entity\\ProjectMeta;\nuse App\\Entity\\ProjectRate;\nuse App\\Entity\\Team;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\User;\nuse App\\Tests\\DataFixtures\\ActivityFixtures;\nuse App\\Tests\\DataFixtures\\ProjectFixtures;\nuse App\\Tests\\DataFixtures\\TeamFixtures;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Tests\\Mocks\\ProjectTestMetaFieldSubscriberMock;\nuse Doctrine\\ORM\\EntityManager;\nuse Symfony\\Component\\DomCrawler\\Field\\ChoiceFormField;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * @group integration\n */\nclass ProjectControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/admin/project/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/admin/project/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/admin/project/');\n        $this->assertHasDataTable($client);\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Project $project) {\n            $project->setVisible(true);\n            $project->setComment('I am a foobar with tralalalala some more content');\n            $project->setMetaField((new ProjectMeta())->setName('location')->setValue('homeoffice'));\n            $project->setMetaField((new ProjectMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'feature:timetracking foo',\n            'visibility' => 1,\n            'customers' => [1],\n            'pageSize' => 50,\n            'page' => 1,\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_project_admin', 5);\n    }\n\n    public function testExportIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/admin/project/export');\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/admin/project/export');\n        $this->assertExcelExportResponse($client, 'kimai-projects_');\n    }\n\n    public function testExportActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Project $project) {\n            $project->setVisible(true);\n            $project->setComment('I am a foobar with tralalalala some more content');\n            $project->setMetaField((new ProjectMeta())->setName('location')->setValue('homeoffice'));\n            $project->setMetaField((new ProjectMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $form->getFormNode()->setAttribute('action', $this->createUrl('/admin/project/export'));\n        $client->submit($form, [\n            'searchTerm' => 'feature:timetracking foo',\n            'visibility' => 1,\n            'customers' => [1],\n            'pageSize' => 50,\n            'page' => 1,\n        ]);\n\n        $this->assertExcelExportResponse($client, 'kimai-projects_');\n    }\n\n    public function testDetailsAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $project = $em->getRepository(Project::class)->find(1);\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setProjects([$project]);\n        $fixture->setUser($this->getUserByRole(User::ROLE_ADMIN));\n        $this->importFixture($fixture);\n\n        $project = $em->getRepository(Project::class)->find(1);\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(6); // to trigger a second page\n        $fixture->setProjects([$project]);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        self::assertHasProgressbar($client);\n\n        $node = $client->getCrawler()->filter('div.box#project_details_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#activity_list_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#time_budget_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#budget_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#team_listing_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#comments_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#team_listing_box a.btn.btn-default');\n        self::assertEquals(2, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n    }\n\n    public function testAddRateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAddRate($client, 123.45, 1);\n    }\n\n    protected function assertAddRate(HttpKernelBrowser $client, $rate, $projectId)\n    {\n        $this->assertAccessIsGranted($client, '/admin/project/' . $projectId . '/rate');\n        $form = $client->getCrawler()->filter('form[name=project_rate_form]')->form();\n        $client->submit($form, [\n            'project_rate_form' => [\n                'user' => null,\n                'rate' => $rate,\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/' . $projectId . '/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box table.dataTable tbody tr:not(.summary)');\n        self::assertEquals(1, $node->count());\n        self::assertStringContainsString($rate, $node->text(null, true));\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n        $project = $em->find(Project::class, 1);\n        $project->setMetaField((new ProjectMeta())->setName('foo')->setValue('bar'));\n        $project->setEnd(new \\DateTime());\n        $em->persist($project);\n        $team = new Team();\n        $team->addTeamlead($this->getUserByRole(User::ROLE_ADMIN));\n        $team->addProject($project);\n        $team->setName('project 1');\n        $em->persist($team);\n        $rate = new ProjectRate();\n        $rate->setProject($project);\n        $rate->setRate(123.45);\n        $em->persist($rate);\n        $activity = new Activity();\n        $activity->setName('blub');\n        $activity->setProject($project);\n        $activity->setMetaField((new ActivityMeta())->setName('blub')->setValue('blab'));\n        $em->persist($activity);\n        $rate = new ActivityRate();\n        $rate->setActivity($activity);\n        $rate->setRate(123.45);\n        $em->persist($rate);\n        $em->flush();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('project.duplicate');\n\n        $this->request($client, '/admin/project/1/duplicate/' . $token);\n        $this->assertIsRedirect($client, '/details');\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#project_rates_box');\n        self::assertEquals(1, $node->count());\n        $node = $client->getCrawler()->filter('div.box#project_rates_box table.dataTable tbody tr:not(.summary)');\n        self::assertEquals(1, $node->count());\n        self::assertStringContainsString('123.45', $node->text(null, true));\n    }\n\n    public function testDuplicateActionWithInvalidCsrf()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n        $project = $em->find(Project::class, 1);\n        $project->setMetaField((new ProjectMeta())->setName('foo')->setValue('bar'));\n        $project->setEnd(new \\DateTime());\n        $em->persist($project);\n        $activity = new Activity();\n        $activity->setName('blub');\n        $activity->setProject($project);\n        $activity->setMetaField((new ActivityMeta())->setName('blub')->setValue('blab'));\n        $em->persist($activity);\n        $em->flush();\n\n        $this->assertInvalidCsrfToken($client, '/admin/project/1/duplicate/rsetdzfukgli78t6r5uedtjfzkugl', $this->createUrl('/admin/project/1/details'));\n    }\n\n    public function testAddCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'A beautiful and long comment **with some** markdown formatting',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('<p>A beautiful and long comment <strong>with some</strong> markdown formatting</p>', $node->html());\n    }\n\n    public function testDeleteCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'Foo bar blub',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('Foo bar blub', $node->html());\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.confirmation-link');\n\n        $comments = $this->getEntityManager()->getRepository(ProjectComment::class)->findAll();\n        $id = $comments[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('project.delete_comment');\n\n        self::assertEquals($this->createUrl('/admin/project/' . $id . '/comment_delete/' . $token), $node->attr('href'));\n        $this->request($client, '/admin/project/' . $id . '/comment_delete/' . $token);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body');\n        self::assertStringContainsString('There were no comments posted yet', $node->html());\n    }\n\n    public function testPinCommentAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $form = $client->getCrawler()->filter('form[name=project_comment_form]')->form();\n        $client->submit($form, [\n            'project_comment_form' => [\n                'message' => 'Foo bar blub',\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .direct-chat-text');\n        self::assertStringContainsString('Foo bar blub', $node->html());\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.btn.active');\n        self::assertEquals(0, $node->count());\n\n        $comments = $this->getEntityManager()->getRepository(ProjectComment::class)->findAll();\n        $id = $comments[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('project.pin_comment');\n\n        $this->request($client, '/admin/project/' . $id . '/comment_pin/' . $token);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#comments_box .box-body a.btn.active');\n        self::assertEquals(1, $node->count());\n        self::assertEquals($this->createUrl('/admin/project/' . $id . '/comment_pin/' . $token), $node->attr('href'));\n    }\n\n    public function testCreateDefaultTeamAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/details');\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-body');\n        self::assertStringContainsString('Visible to everyone, as no team was assigned yet.', $node->text(null, true));\n\n        $this->request($client, '/admin/project/1/create_team');\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-title');\n        self::assertStringContainsString('Only visible to the following teams and all admins.', $node->text(null, true));\n        $node = $client->getCrawler()->filter('div.box#team_listing_box .box-body table tbody tr');\n        self::assertEquals(1, $node->count());\n\n        // creating the default team a second time fails, as the name already exists\n        $this->request($client, '/admin/project/1/create_team');\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $this->assertHasFlashError($client, 'Changes could not be saved: Team already existing');\n    }\n\n    public function testActivitiesAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/activities/1');\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools ul.pagination li');\n        self::assertEquals(0, $node->count());\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools a.modal-ajax-form.open-edit');\n        self::assertEquals(1, $node->count());\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n        $project = $em->getRepository(Project::class)->find(1);\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(9); // to trigger a second page (every third activity is hidden)\n        $fixture->setProjects([$project]);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/activities/1');\n\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-tools ul.pagination li');\n        self::assertEquals(4, $node->count());\n\n        $node = $client->getCrawler()->filter('div.box#activity_list_box .box-body table tbody tr');\n        self::assertEquals(5, $node->count());\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/create');\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $client->submit($form, [\n            'project_edit_form' => [\n                'name' => 'Test 2',\n                'customer' => 1,\n            ]\n        ]);\n        $this->assertIsRedirect($client, '/details');\n        $client->followRedirect();\n        $this->assertHasFlashSuccess($client);\n    }\n\n    public function testCreateActionShowsMetaFields()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        static::$kernel->getContainer()->get('event_dispatcher')->addSubscriber(new ProjectTestMetaFieldSubscriberMock());\n        $this->assertAccessIsGranted($client, '/admin/project/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertTrue($form->has('project_edit_form[metaFields][0][value]'));\n        $this->assertFalse($form->has('project_edit_form[metaFields][1][value]'));\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/project/1/edit');\n        $form = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertEquals('Test', $form->get('project_edit_form[name]')->getValue());\n        $client->submit($form, [\n            'project_edit_form' => ['name' => 'Test 2']\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n        $client->followRedirect();\n        $this->request($client, '/admin/project/1/edit');\n        $editForm = $client->getCrawler()->filter('form[name=project_edit_form]')->form();\n        $this->assertEquals('Test 2', $editForm->get('project_edit_form[name]')->getValue());\n    }\n\n    public function testTeamPermissionAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n\n        /** @var Project $project */\n        $project = $em->getRepository(Project::class)->find(1);\n        self::assertEquals(0, $project->getTeams()->count());\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/project/1/permissions');\n        $form = $client->getCrawler()->filter('form[name=project_team_permission_form]')->form();\n        /** @var ChoiceFormField $team1 */\n        $team1 = $form->get('project_team_permission_form[teams][0]');\n        $team1->tick();\n        /** @var ChoiceFormField $team2 */\n        $team2 = $form->get('project_team_permission_form[teams][1]');\n        $team2->tick();\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/1/details'));\n\n        /** @var Project $project */\n        $project = $em->getRepository(Project::class)->find(1);\n        self::assertEquals(2, $project->getTeams()->count());\n    }\n\n    public function testDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(1);\n        /** @var Project[] $projects */\n        $projects = $this->importFixture($fixture);\n        $id = $projects[0]->getId();\n\n        $this->request($client, '/admin/project/' . $id . '/edit');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->request($client, '/admin/project/' . $id . '/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/' . $id . '/delete'), $form->getUri());\n        $client->submit($form);\n\n        $client->followRedirect();\n        $this->assertHasDataTable($client);\n        $this->assertHasFlashSuccess($client);\n\n        $this->request($client, '/admin/project/' . $id . '/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    public function testDeleteActionWithTimesheetEntries()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setAmount(10);\n        $this->importFixture($fixture);\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals(1, $entry->getActivity()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/1/delete'), $form->getUri());\n        $client->submit($form);\n\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/'));\n        $client->followRedirect();\n        $this->assertHasFlashDeleteSuccess($client);\n        $this->assertHasNoEntriesWithFilter($client);\n\n        $em->clear();\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(0, \\count($timesheets));\n\n        $this->request($client, '/admin/project/1/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    public function testDeleteActionWithTimesheetEntriesAndReplacement()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setAmount(10);\n        $this->importFixture($fixture);\n        $fixture = new ProjectFixtures();\n        $fixture->setAmount(1)->setIsVisible(true);\n        $projects = $this->importFixture($fixture);\n        $id = $projects[0]->getId();\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals(1, $entry->getProject()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/delete');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=form]')->form();\n        $this->assertStringEndsWith($this->createUrl('/admin/project/1/delete'), $form->getUri());\n        $client->submit($form, [\n            'form' => [\n                'project' => $id\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/admin/project/'));\n        $client->followRedirect();\n        $this->assertHasDataTable($client);\n        $this->assertHasFlashSuccess($client);\n\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertEquals(10, \\count($timesheets));\n\n        /** @var Timesheet $entry */\n        foreach ($timesheets as $entry) {\n            $this->assertEquals($id, $entry->getProject()->getId());\n        }\n\n        $this->request($client, '/admin/project/1/edit');\n        $this->assertFalse($client->getResponse()->isSuccessful());\n    }\n\n    /**\n     * @dataProvider getValidationTestData\n     */\n    public function testValidationForCreateAction(array $formData, array $validationFields)\n    {\n        $this->assertFormHasValidationError(\n            User::ROLE_ADMIN,\n            '/admin/project/create',\n            'form[name=project_edit_form]',\n            $formData,\n            $validationFields\n        );\n    }\n\n    public function getValidationTestData()\n    {\n        return [\n            [\n                [\n                    'project_edit_form' => [\n                        'name' => '',\n                        'customer' => 0,\n                    ]\n                ],\n                [\n                    '#project_edit_form_name',\n                    '#project_edit_form_customer',\n                ]\n            ],\n        ];\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Team;\nuse App\\Entity\\User;\nuse App\\Tests\\DataFixtures\\TeamFixtures;\nuse Doctrine\\ORM\\EntityManager;\nuse Symfony\\Component\\DomCrawler\\Field\\ChoiceFormField;\nuse Symfony\\Component\\HttpKernel\\HttpKernelBrowser;\n\n/**\n * @group integration\n */\nclass TeamControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/admin/teams/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_TEAMLEAD, '/admin/teams/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(5);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/');\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'create' => $this->createUrl('/admin/teams/create'),\n            'help' => 'https://www.kimai.org/documentation/teams.html'\n        ]);\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_admin_teams', 6);\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(5);\n        $fixture->setCallback(function (Team $team) {\n            $team->setName($team->getName() . '- fantastic team with foooo bar magic');\n        });\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'foo',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_admin_teams', 5);\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/teams/create');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n\n        $this->assertEquals('', $form->get('team_edit_form[name]')->getValue());\n\n        $values = $form->getPhpValues();\n        $values['team_edit_form']['name'] = 'Test Team' . uniqid();\n        $values['team_edit_form']['members'][0]['user'] = 5;\n        $values['team_edit_form']['members'][0]['teamlead'] = 1;\n        $client->request($form->getMethod(), $form->getUri(), $values, $form->getPhpFiles());\n\n        $this->assertIsRedirect($client, '/edit');\n        $client->followRedirect();\n        $this->assertHasFlashSuccess($client);\n        $this->assertHasCustomerAndProjectPermissionBoxes($client);\n    }\n\n    protected function assertHasCustomerAndProjectPermissionBoxes(HttpKernelBrowser $client)\n    {\n        $content = $client->getResponse()->getContent();\n        $this->assertStringContainsString('Grant access to customers', $content);\n        $this->assertStringContainsString('Grant access to projects', $content);\n        $this->assertEquals(1, $client->getCrawler()->filter('form[name=team_customer_form]')->count());\n        $this->assertEquals(1, $client->getCrawler()->filter('form[name=team_project_form]')->count());\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n\n        $client->submit($form, [\n            'team_edit_form' => [\n                'name' => 'Test Team 2'\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n        $client->followRedirect();\n        $editForm = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $this->assertEquals('Test Team 2', $editForm->get('team_edit_form[name]')->getValue());\n    }\n\n    public function testEditMemberAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit_member');\n        $form = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $client->submit($form, [\n            'team_edit_form' => [\n                'name' => 'Test Team 2'\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n        $client->followRedirect();\n        $editForm = $client->getCrawler()->filter('form[name=team_edit_form]')->form();\n        $this->assertEquals('Test Team 2', $editForm->get('team_edit_form[name]')->getValue());\n    }\n\n    public function testEditCustomerAccessAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(0, \\count($team->getCustomers()));\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_customer_form]')->form();\n\n        /** @var ChoiceFormField $customer */\n        $customer = $form->get('team_customer_form[customers][0]');\n        $customer->tick();\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(1, \\count($team->getCustomers()));\n    }\n\n    public function testEditProjectAccessAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        /** @var EntityManager $em */\n        $em = $this->getEntityManager();\n\n        $fixture = new TeamFixtures();\n        $fixture->setAmount(2);\n        $fixture->setAddCustomer(false);\n        $this->importFixture($fixture);\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(0, \\count($team->getProjects()));\n\n        $this->assertAccessIsGranted($client, '/admin/teams/1/edit');\n        $form = $client->getCrawler()->filter('form[name=team_project_form]')->form();\n\n        /** @var ChoiceFormField $customer */\n        $customer = $form->get('team_project_form[projects]');\n        $customer->select([1]);\n\n        $client->submit($form);\n        $this->assertIsRedirect($client, $this->createUrl('/admin/teams/1/edit'));\n\n        $team = $em->getRepository(Team::class)->find(1);\n        self::assertEquals(1, \\count($team->getProjects()));\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('team.duplicate');\n\n        $this->request($client, '/admin/teams/1/duplicate/' . $token);\n        $this->assertIsRedirect($client, '/edit');\n        $client->followRedirect();\n        $node = $client->getCrawler()->filter('#team_edit_form_name');\n        self::assertEquals(1, $node->count());\n        self::assertEquals('Test team [COPY]', $node->attr('value'));\n    }\n\n    public function testDuplicateActionWithInvalidCsrf()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->assertInvalidCsrfToken($client, '/admin/teams/1/duplicate/rsetdzfukgli78t6r5uedtjfzkugl', $this->createUrl('/admin/teams/1/edit'));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Activity;\nuse App\\Entity\\Configuration;\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\TimesheetMeta;\nuse App\\Entity\\User;\nuse App\\Form\\Type\\DateRangeType;\nuse App\\Repository\\ConfigurationRepository;\nuse App\\Tests\\DataFixtures\\ActivityFixtures;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Tests\\Mocks\\TimesheetTestMetaFieldSubscriberMock;\nuse App\\Timesheet\\DateTimeFactory;\n\n/**\n * @group integration\n */\nclass TimesheetControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/timesheet/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        // there are no records by default in the test database\n        $this->assertHasNoEntriesWithFilter($client);\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'visibility' => '#',\n            'download toolbar-action modal-ajax-form' => $this->createUrl('/timesheet/export/'),\n            'create modal-ajax-form' => $this->createUrl('/timesheet/create'),\n            'help' => 'https://www.kimai.org/documentation/timesheet.html'\n        ]);\n    }\n\n    public function testIndexActionWithQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n        $start = new \\DateTime('first day of this month');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(2);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'state' => 1,\n            'pageSize' => 25,\n            'daterange' => $dateRange,\n            'customers' => [1],\n            'projects' => [1],\n            'activities' => [1],\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet', 7);\n\n        // make sure the recording css class exist on tr for targeting running record rows\n        $node = $client->getCrawler()->filter('section.content div.datatable_timesheet table.dataTable tbody tr.recording');\n        self::assertEquals(2, $node->count());\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n        $start = new \\DateTime('first day of this month');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('I am a foobar with tralalalala some more content');\n            $timesheet->setMetaField((new TimesheetMeta())->setName('location')->setValue('homeoffice'));\n            $timesheet->setMetaField((new TimesheetMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'location:homeoffice foobar',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet', 5);\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n\n        $this->request($client, '/timesheet/export/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = (new \\DateTime('-10 days'))->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime())->format('Y-m-d');\n\n        $client->submitForm('export-btn-print', [\n            'export' => [\n                'state' => 1,\n                'daterange' => $dateRange,\n                'customers' => [],\n            ]\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $node = $client->getCrawler()->filter('body');\n        /** @var \\DOMElement $body */\n        $body = $node->getNode(0);\n        $this->assertEquals('invoice_print', $body->getAttribute('class'));\n\n        $result = $node->filter('section.invoice table.table tbody tr');\n        $this->assertEquals(5, \\count($result));\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'Testing is fun!',\n                // begin is always pre-filled with the current datetime\n                // 'begin' => null,\n                // end must be allowed to be null, to start a record\n                // there was a bug with end begin required, so we manually set this field to be empty\n                'end' => null,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertNull($timesheet->getEnd());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(0, $timesheet->getRate());\n        $this->assertNull($timesheet->getHourlyRate());\n        $this->assertNull($timesheet->getFixedRate());\n    }\n\n    /**\n     * @dataProvider getTestDataForDurationValues\n     */\n    public function testCreateActionWithDurationValues($begin, $end, $duration, $expectedDuration, $expectedEnd)\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'Testing is fun!',\n                'begin' => $begin,\n                'end' => $end,\n                'duration' => $duration,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals($expectedDuration, $timesheet->getDuration());\n        $this->assertEquals($expectedEnd, $timesheet->getEnd()->format('Y-m-d H:i:s'));\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n    }\n\n    public function getTestDataForDurationValues()\n    {\n        // duration is ignored, because end is set and the duration might come from a rounding rule (by default seconds are rounded down with 1)\n        yield ['2018-12-31 00:00:00', '2018-12-31 02:10:10', '01:00', 7800, '2018-12-31 02:10:00'];\n        yield ['2018-12-31 00:00:00', '2018-12-31 02:09:59', '01:00', 7740, '2018-12-31 02:09:00'];\n        // if seconds are given, they are first rounded up (default for duration rounding is 1)\n        yield ['2018-12-31 00:00:00', null, '01:00', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '01:00:10', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '1h', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1h10m', 4200, '2018-12-31 01:10:00'];\n        yield ['2018-12-31 00:00:00', null, '1h10s', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '60m', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '60M1s', 3660, '2018-12-31 01:01:00'];\n        yield ['2018-12-31 00:00:00', null, '3600s', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '59m60s', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1,0', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1.0', 3600, '2018-12-31 01:00:00'];\n        yield ['2018-12-31 00:00:00', null, '1.5', 5400, '2018-12-31 01:30:00'];\n        yield ['2018-12-31 00:00:00', null, '1,25', 4500, '2018-12-31 01:15:00'];\n    }\n\n    public function testCreateActionShowsMetaFields()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        static::$kernel->getContainer()->get('event_dispatcher')->addSubscriber(new TimesheetTestMetaFieldSubscriberMock());\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $this->assertTrue($form->has('timesheet_edit_form[metaFields][0][value]'));\n        $this->assertFalse($form->has('timesheet_edit_form[metaFields][1][value]'));\n    }\n\n    public function testCreateActionDoesNotShowRateFieldsForUser()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n        $this->request($client, '/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $this->assertFalse($form->has('hourlyRate'));\n        $this->assertFalse($form->has('fixedRate'));\n    }\n\n    public function testCreateActionWithFromAndToValues()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A00%3A00&to=2018-08-02T20%3A30%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(50, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T20:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T20:30:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n    }\n\n    public function testCreateActionWithFromAndToValuesTwice()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A00%3A00&to=2018-08-02T20%3A30%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(50, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T20:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T20:30:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n\n        // create a second entry that is overlapping\n        $this->request($client, '/timesheet/create?from=2018-08-02T20%3A02%3A00&to=2018-08-02T20%3A20%3A00');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n    }\n\n    public function testCreateActionWithFromAndToValuesTwiceFailsOnOverlappingRecord()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n        $this->assertAccessIsGranted($client, '/admin/system-config/');\n\n        $form = $client->getCrawler()->filter('form[name=system_configuration_form_timesheet]')->form();\n        $client->submit($form, [\n            'system_configuration_form_timesheet' => [\n                'configuration' => [\n                    ['name' => 'timesheet.mode', 'value' => 'default'],\n                    ['name' => 'timesheet.active_entries.default_begin', 'value' => '08:00'],\n                    ['name' => 'timesheet.rules.allow_future_times', 'value' => true],\n                    ['name' => 'timesheet.rules.allow_overlapping_records', 'value' => false],\n                    ['name' => 'timesheet.rules.allow_overbooking_budget', 'value' => true],\n                    ['name' => 'timesheet.active_entries.hard_limit', 'value' => 1],\n                ]\n            ]\n        ]);\n\n        $begin = new \\DateTime('2018-08-02T20:00:00');\n        $end = new \\DateTime('2018-08-02T20:30:00');\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setCallback(function (Timesheet $timesheet) use ($begin, $end) {\n            $timesheet->setBegin($begin);\n            $timesheet->setEnd($end);\n        });\n        $fixture->setAmount(1);\n        $fixture->setUser($this->getUserByRole(User::ROLE_SUPER_ADMIN));\n        $this->importFixture($fixture);\n\n        // create a second entry that is overlapping - should fail due to the changed config above\n        $this->assertHasValidationError(\n            $client,\n            '/timesheet/create?from=2018-08-02T20%3A02%3A00&to=2018-08-02T20%3A20%3A00',\n            'form[name=timesheet_edit_form]',\n            [\n                'timesheet_edit_form' => [\n                    //'hourlyRate' => 100,\n                    'project' => 1,\n                    'activity' => 1,\n                ]\n            ],\n            ['#timesheet_edit_form_begin']\n        );\n    }\n\n    public function testCreateActionWithOverbookedActivity()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $fixture = new ActivityFixtures();\n        $fixture->setAmount(1);\n        $fixture->setIsGlobal(true);\n        $fixture->setIsVisible(true);\n        $fixture->setCallback(function (Activity $activity) {\n            $activity->setBudget(1000);\n            $activity->setTimeBudget(3600);\n        });\n        $activities = $this->importFixture($fixture);\n        /** @var Activity $activity */\n        $activity = $activities[0];\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setActivities([$activity]);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        /** @var ConfigurationRepository $repository */\n        $repository = $this->getEntityManager()->getRepository(Configuration::class);\n        $config = new Configuration();\n        $config->setName('timesheet.rules.allow_overbooking_budget');\n        $config->setValue(false);\n        $repository->saveConfiguration($config);\n\n        $this->assertHasValidationError(\n            $client,\n            '/timesheet/' . $id . '/edit',\n            'form[name=timesheet_edit_form]',\n            [\n                'timesheet_edit_form' => [\n                    'hourlyRate' => 100,\n                    'begin' => '2020-02-18 01:00',\n                    'end' => '2020-02-18 02:10',\n                    'duration' => '01:10',\n                    'project' => 1,\n                    'activity' => $activity->getId(),\n                ]\n            ],\n            ['#timesheet_edit_form_activity']\n        );\n    }\n\n    public function testCreateActionWithBeginAndEndAndTagValues()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/timesheet/create?begin=2018-08-02&end=2018-08-02&tags=one,two,three');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getEnd());\n        $this->assertEquals(800, $timesheet->getRate());\n\n        $expected = new \\DateTime('2018-08-02T10:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getBegin()->format(\\DateTimeInterface::ATOM));\n\n        $expected = new \\DateTime('2018-08-02T18:00:00');\n        $this->assertEquals($expected->format(\\DateTimeInterface::ATOM), $timesheet->getEnd()->format(\\DateTimeInterface::ATOM));\n\n        $this->assertEquals(['one', 'two', 'three'], $timesheet->getTagsAsArray());\n    }\n\n    public function testCreateActionWithDescription()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $this->request($client, '/timesheet/create?description=Lorem%20Ipsum');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertEquals('Lorem Ipsum', $timesheet->getDescription());\n    }\n\n    public function testCreateActionWithDescriptionHtmlInjection()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $this->request($client, '/timesheet/create?description=Some text\"><bold>HelloWorld<%2Fbold>');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'hourlyRate' => 100,\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertEquals('Some text\"><bold>HelloWorld</bold>', $timesheet->getDescription());\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser();\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setFixedStartDate(new \\DateTime('-2 hours'));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        $this->assertStringContainsString(\n            'href=\"https://www.kimai.org/documentation/timesheet.html\"',\n            $response->getContent(),\n            'Could not find link to documentation'\n        );\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_edit_form' => [\n                'description' => 'foo-bar',\n                'tags' => 'foo,bar, testing, hello world,,',\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSaveSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($id);\n        $this->assertEquals('foo-bar', $timesheet->getDescription());\n    }\n\n    public function testMultiDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_USER);\n\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/timesheet/multi-delete'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/timesheet/multi-delete'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n\n        $em->clear();\n        self::assertEquals(0, $em->getRepository(Timesheet::class)->count([]));\n    }\n\n    public function testMultiUpdate()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $user = $this->getUserByRole(User::ROLE_SUPER_ADMIN);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/timesheet/multi-update'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            self::assertEmpty($timesheet->getTags());\n            self::assertFalse($timesheet->isExported());\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/timesheet/multi-update'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_update]')->form();\n        $client->submit($form, [\n            'timesheet_multi_update' => [\n                'exported' => true,\n                'tags' => 'test, foo-bar',\n                'fixedRate' => 13,\n            ]\n        ]);\n\n        $em->clear();\n\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            self::assertCount(2, $timesheet->getTags());\n            self::assertTrue($timesheet->isExported());\n            self::assertEquals(13, $timesheet->getFixedRate());\n        }\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('timesheet.duplicate');\n\n        $this->request($client, '/timesheet/' . $newId . '/duplicate/' . $token);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_edit_form]')->form();\n        $client->submit($form, $form->getPhpValues());\n\n        $this->assertIsRedirect($client, $this->createUrl('/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($newId++);\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertEquals('Europe/London', $timesheet->getBegin()->getTimezone()->getName());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(2016, $timesheet->getRate());\n        $this->assertEquals(127, $timesheet->getHourlyRate());\n        $this->assertEquals(2016, $timesheet->getFixedRate());\n        $this->assertEquals(2016, $timesheet->getRate());\n    }\n\n    public function testDuplicateActionWithInvalidCsrf()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $this->assertInvalidCsrfToken($client, '/timesheet/' . $newId . '/duplicate/dfghdfghdfghdfghdfgh', $this->createUrl('/timesheet/'));\n    }\n}\n", "<?php\n\n/*\n * This file is part of the Kimai time-tracking app.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nnamespace App\\Tests\\Controller;\n\nuse App\\Entity\\Timesheet;\nuse App\\Entity\\TimesheetMeta;\nuse App\\Entity\\User;\nuse App\\Form\\Type\\DateRangeType;\nuse App\\Tests\\DataFixtures\\TimesheetFixtures;\nuse App\\Timesheet\\DateTimeFactory;\nuse App\\Timesheet\\Util;\n\n/**\n * @group integration\n */\nclass TimesheetTeamControllerTest extends ControllerBaseTest\n{\n    public function testIsSecure()\n    {\n        $this->assertUrlIsSecured('/team/timesheet/');\n    }\n\n    public function testIsSecureForRole()\n    {\n        $this->assertUrlIsSecuredForRole(User::ROLE_USER, '/team/timesheet/');\n    }\n\n    public function testIndexAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        // there are no records by default in the test database\n        $this->assertHasNoEntriesWithFilter($client);\n\n        $this->assertPageActions($client, [\n            'search' => '#',\n            'visibility' => '#',\n            'download toolbar-action modal-ajax-form' => $this->createUrl('/team/timesheet/export/'),\n            'create-ts modal-ajax-form' => $this->createUrl('/team/timesheet/create'),\n            'create-ts-mu modal-ajax-form' => $this->createUrl('/team/timesheet/create_mu'),\n            'help' => 'https://www.kimai.org/documentation/timesheet.html'\n        ]);\n    }\n\n    public function testIndexActionWithQuery()\n    {\n        // Switching the user is not allowed for TEAMLEADs but ONLLY for admin and super-admins\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $start = new \\DateTime('first day of this month');\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setAmountRunning(3);\n        $fixture->setUser($user);\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'state' => 1,\n            'users' => [$user->getId()],\n            'pageSize' => 25,\n            'daterange' => $dateRange,\n            'customers' => [],\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet_admin', 13);\n\n        // make sure the recording css class exist on tr for targeting running record rows\n        $node = $client->getCrawler()->filter('section.content div.datatable_timesheet_admin table.dataTable tbody tr.recording');\n        self::assertEquals(3, $node->count());\n    }\n\n    public function testIndexActionWithSearchTermQuery()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $start = new \\DateTime('first day of this month');\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('I am a foobar with tralalalala some more content');\n            $timesheet->setMetaField((new TimesheetMeta())->setName('location')->setValue('homeoffice'));\n            $timesheet->setMetaField((new TimesheetMeta())->setName('feature')->setValue('timetracking'));\n        });\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(5);\n        $fixture->setAmountRunning(5);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($start);\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = ($start)->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime('last day of this month'))->format('Y-m-d');\n\n        $form = $client->getCrawler()->filter('form.searchform')->form();\n        $client->submit($form, [\n            'searchTerm' => 'location:homeoffice foobar',\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasDataTable($client);\n        $this->assertDataTableRowCount($client, 'datatable_timesheet_admin', 5);\n    }\n\n    public function testExportAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $em = $this->getEntityManager();\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(7);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(3);\n        $fixture->setUser($this->getUserByRole(User::ROLE_TEAMLEAD));\n        $fixture->setStartDate(new \\DateTime('-10 days'));\n        $this->importFixture($fixture);\n\n        $this->request($client, '/team/timesheet/export/');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $dateRange = (new \\DateTime('-10 days'))->format('Y-m-d') . DateRangeType::DATE_SPACER . (new \\DateTime())->format('Y-m-d');\n\n        $client->submitForm('export-btn-print', [\n            'export' => [\n                'state' => 1,\n                'daterange' => $dateRange,\n                'customers' => [],\n            ]\n        ]);\n\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $node = $client->getCrawler()->filter('body');\n        /** @var \\DOMElement $body */\n        $body = $node->getNode(0);\n        $this->assertEquals('invoice_print', $body->getAttribute('class'));\n\n        $result = $node->filter('section.invoice table.table tbody tr');\n        $this->assertEquals(10, \\count($result));\n    }\n\n    public function testCreateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/team/timesheet/create');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_admin_edit_form' => [\n                'description' => 'Testing is fun!',\n                'project' => 1,\n                'activity' => 1,\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->findAll()[0];\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertNull($timesheet->getEnd());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(0, $timesheet->getRate());\n        $this->assertNull($timesheet->getHourlyRate());\n        $this->assertNull($timesheet->getFixedRate());\n    }\n\n    public function testCreateForMultipleUsersAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $this->request($client, '/team/timesheet/create_mu');\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_user_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_multi_user_edit_form' => [\n                'description' => 'Testing is more fun!',\n                'project' => 1,\n                'activity' => 1,\n                'teams' => '1',\n                'tags' => 'test,1234,foo-bar',\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        $this->assertCount(2, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n            $this->assertNull($timesheet->getEnd());\n            $this->assertEquals('Testing is more fun!', $timesheet->getDescription());\n            $this->assertEquals(0, $timesheet->getRate());\n            $this->assertNull($timesheet->getHourlyRate());\n            $this->assertNull($timesheet->getFixedRate());\n            $this->assertEquals(['test', '1234', 'foo-bar'], $timesheet->getTagsAsArray());\n        }\n    }\n\n    public function testCreateForMultipleUsersActionWithoutUserOrTeam()\n    {\n        $data = [\n            'timesheet_multi_user_edit_form' => [\n                'description' => 'Testing is more fun!',\n                'project' => 1,\n                'activity' => 1,\n                // make sure the default validation for timesheets is applied as well\n                'begin' => (new \\DateTime())->format('Y-m-d H:i'),\n                'end' => (new \\DateTime('-1 hour'))->format('Y-m-d H:i'),\n            ]\n        ];\n\n        $this->assertFormHasValidationError(\n            User::ROLE_ADMIN,\n            '/team/timesheet/create_mu',\n            'form[name=timesheet_multi_user_edit_form]',\n            $data,\n            ['#timesheet_multi_user_edit_form_users', '#timesheet_multi_user_edit_form_teams', '#timesheet_multi_user_edit_form_end']\n        );\n    }\n\n    public function testEditAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n\n        $user = $this->getUserByRole(User::ROLE_USER);\n        $teamlead = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $fixture->setFixedStartDate(new \\DateTime('-2 hours'));\n        $timesheets = $this->importFixture($fixture);\n        $id = $timesheets[0]->getId();\n\n        $this->request($client, '/team/timesheet/' . $id . '/edit');\n\n        $response = $client->getResponse();\n        $this->assertTrue($response->isSuccessful());\n\n        $this->assertStringContainsString(\n            'href=\"https://www.kimai.org/documentation/timesheet.html\"',\n            $response->getContent(),\n            'Could not find link to documentation'\n        );\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, [\n            'timesheet_admin_edit_form' => [\n                'description' => 'foo-bar',\n                'tags' => 'foo,bar, testing, hello world,,',\n                'user' => $teamlead->getId()\n            ]\n        ]);\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSaveSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($id);\n        $this->assertEquals('foo-bar', $timesheet->getDescription());\n        $this->assertEquals($teamlead->getId(), $timesheet->getUser()->getId());\n    }\n\n    public function testMultiDeleteAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_TEAMLEAD);\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/team/timesheet/multi-delete'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/team/timesheet/multi-delete'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n\n        $em->clear();\n        self::assertEquals(0, $em->getRepository(Timesheet::class)->count([]));\n    }\n\n    public function testMultiUpdate()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_SUPER_ADMIN);\n\n        $em = $this->getEntityManager();\n        $user = $this->getUserByRole(User::ROLE_TEAMLEAD);\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(10);\n        $fixture->setUser($user);\n        $this->importFixture($fixture);\n\n        $this->assertAccessIsGranted($client, '/team/timesheet/');\n\n        $form = $client->getCrawler()->filter('form[name=multi_update_table]')->form();\n        $node = $form->getFormNode();\n        $node->setAttribute('action', $this->createUrl('/team/timesheet/multi-update'));\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        $ids = [];\n        foreach ($timesheets as $timesheet) {\n            self::assertFalse($timesheet->isExported());\n            self::assertEquals($user->getId(), $timesheet->getUser()->getId());\n            $ids[] = $timesheet->getId();\n        }\n\n        $client->submit($form, [\n            'multi_update_table' => [\n                'action' => $this->createUrl('/team/timesheet/multi-update'),\n                'entities' => implode(',', $ids)\n            ]\n        ]);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $newUser = $this->getUserByRole(User::ROLE_USER);\n        $form = $client->getCrawler()->filter('form[name=timesheet_multi_update]')->form();\n        $client->submit($form, [\n            'timesheet_multi_update' => [\n                'user' => $newUser->getId(),\n                'exported' => true,\n                'replaceTags' => true,\n                'tags' => 'test, foo-bar, tralalala',\n                'hourlyRate' => 13.78,\n            ]\n        ]);\n\n        $em->clear();\n\n        /** @var Timesheet[] $timesheets */\n        $timesheets = $em->getRepository(Timesheet::class)->findAll();\n        self::assertCount(10, $timesheets);\n        foreach ($timesheets as $timesheet) {\n            self::assertCount(3, $timesheet->getTags());\n            self::assertEquals($newUser->getId(), $timesheet->getUser()->getId());\n            self::assertTrue($timesheet->isExported());\n            self::assertEquals(Util::calculateRate(13.78, $timesheet->getDuration()), $timesheet->getRate());\n        }\n    }\n\n    public function testDuplicateAction()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $token = self::$container->get('security.csrf.token_manager')->getToken('admin_timesheet.duplicate');\n\n        $this->request($client, '/team/timesheet/' . $newId . '/duplicate/' . $token);\n        $this->assertTrue($client->getResponse()->isSuccessful());\n\n        $form = $client->getCrawler()->filter('form[name=timesheet_admin_edit_form]')->form();\n        $client->submit($form, $form->getPhpValues());\n\n        $this->assertIsRedirect($client, $this->createUrl('/team/timesheet/'));\n        $client->followRedirect();\n        $this->assertTrue($client->getResponse()->isSuccessful());\n        $this->assertHasFlashSuccess($client);\n\n        $em = $this->getEntityManager();\n        /** @var Timesheet $timesheet */\n        $timesheet = $em->getRepository(Timesheet::class)->find($newId++);\n        $this->assertInstanceOf(\\DateTime::class, $timesheet->getBegin());\n        $this->assertEquals('Europe/London', $timesheet->getBegin()->getTimezone()->getName());\n        $this->assertEquals('Testing is fun!', $timesheet->getDescription());\n        $this->assertEquals(2016, $timesheet->getRate());\n        $this->assertEquals(127, $timesheet->getHourlyRate());\n        $this->assertEquals(2016, $timesheet->getFixedRate());\n        $this->assertEquals(2016, $timesheet->getRate());\n    }\n\n    public function testDuplicateActionWithInvalidCsrf()\n    {\n        $client = $this->getClientForAuthenticatedUser(User::ROLE_ADMIN);\n        $dateTime = new DateTimeFactory(new \\DateTimeZone('Europe/London'));\n\n        $fixture = new TimesheetFixtures();\n        $fixture->setAmount(1);\n        $fixture->setAmountRunning(0);\n        $fixture->setUser($this->getUserByRole(User::ROLE_USER));\n        $fixture->setStartDate($dateTime->createDateTime());\n        $fixture->setCallback(function (Timesheet $timesheet) {\n            $timesheet->setDescription('Testing is fun!');\n            $begin = clone $timesheet->getBegin();\n            $begin->setTime(0, 0, 0);\n            $timesheet->setBegin($begin);\n            $end = clone $timesheet->getBegin();\n            $end->modify('+ 8 hours');\n            $timesheet->setEnd($end);\n            $timesheet->setFixedRate(2016);\n            $timesheet->setHourlyRate(127);\n        });\n\n        /** @var Timesheet[] $ids */\n        $ids = $this->importFixture($fixture);\n        $newId = $ids[0]->getId();\n\n        $this->assertInvalidCsrfToken($client, '/team/timesheet/' . $newId . '/duplicate/dfghdfghdfghdfghdfgh', $this->createUrl('/team/timesheet/'));\n    }\n}\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"ja\" datatype=\"plaintext\" original=\"about.en.xlf\">\n    <body>\n      <trans-unit id=\"3Clo55j\" resname=\"about.title\">\n        <source>about.title</source>\n        <target>Kimai \u306b\u3064\u3044\u3066</target>\n      </trans-unit>\n      <trans-unit id=\"oYYDCG5\" resname=\"support\">\n        <source>support</source>\n        <target>\u30b5\u30dd\u30fc\u30c8</target>\n      </trans-unit>\n      <trans-unit id=\"dHqPOYO\" resname=\"website\">\n        <source>website</source>\n        <target>\u30db\u30fc\u30e0\u30da\u30fc\u30b8</target>\n      </trans-unit>\n      <trans-unit id=\"EGpYQvx\" resname=\"help\">\n        <source>help</source>\n        <target>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</target>\n      </trans-unit>\n      <trans-unit id=\"mz4ieCN\" resname=\"donate\">\n        <source>donate</source>\n        <target>Kimai \u306e\u767a\u5c55\u306e\u305f\u3081\u306b\u5bc4\u4ed8\u3092\u884c\u3046</target>\n      </trans-unit>\n      <trans-unit id=\"DwbowBh\" resname=\"published_under\">\n        <source>published_under</source>\n        <target>%kimai% \u306f\u6b21\u306e\u3082\u3068\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059</target>\n      </trans-unit>\n      <trans-unit id=\"A0nWoXZ\" resname=\"special_thanks\">\n        <source>special_thanks</source>\n        <target>\u3053\u308c\u3089\u306e\u65b9\u3005\u306b\u7279\u306b\u611f\u8b1d\u3044\u305f\u3057\u307e\u3059\u3002</target>\n      </trans-unit>\n      <trans-unit id=\"L7cff3Q\" resname=\"library_authors\">\n        <source>library_authors</source>\n        <target>\u2026 \u3053\u308c\u3089\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u304f\u3057\u3066 Kimai \u306f\u5b9f\u73fe\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u4f5c\u6210\u8005\u306e\u65b9\u3005\u306b\u611f\u8b1d\u3057\u307e\u3059 \ud83d\udc4d</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"el\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>\u03a0\u03c1\u03bf\u03b5\u03b9\u03b4\u03bf\u03c0\u03bf\u03af\u03b7\u03c3\u03b7</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03c3\u03c4\u03b1\u03bc\u03ac\u03c4\u03b7\u03c3\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03b4\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03c3\u03c4\u03b1\u03bc\u03b1\u03c4\u03ae\u03c3\u03b5\u03b9</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03be\u03b5\u03ba\u03af\u03bd\u03b7\u03c3\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5 \u03b4\u03b5\u03bd \u03bc\u03c0\u03cc\u03c1\u03b5\u03c3\u03b5 \u03bd\u03b1 \u03be\u03b5\u03ba\u03b9\u03bd\u03ae\u03c3\u03b5\u03b9</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>\u0388\u03c7\u03b5\u03b9 \u03c3\u03c5\u03bc\u03c0\u03bb\u03b7\u03c1\u03c9\u03b8\u03b5\u03af \u03c4\u03bf \u03cc\u03c1\u03b9\u03bf \u03c4\u03c9\u03bd \u03b5\u03bd\u03b5\u03c1\u03b3\u03ce\u03bd \u03ba\u03b1\u03c4\u03b1\u03b3\u03c1\u03b1\u03c6\u03ce\u03bd \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5, \u03c0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03c3\u03c4\u03b1\u03bc\u03b1\u03c4\u03ae\u03c3\u03c4\u03b5 \u03c4\u03bf\u03c5\u03bb\u03ac\u03c7\u03b9\u03c3\u03c4\u03bf\u03bd \u03bc\u03af\u03b1 \u03b5\u03ba\u03c4\u03b5\u03bb\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7 \u03bc\u03ad\u03c4\u03c1\u03b7\u03c3\u03b7 \u03c9\u03c1\u03b1\u03c1\u03af\u03bf\u03c5.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>\u0397 \u03b5\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae \u03c0\u03bf\u03c5 \u03b5\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03ac\u03b6\u03b5\u03c3\u03c4\u03b5 \u03ad\u03c7\u03b5\u03b9 \u03ae\u03b4\u03b7 \u03b5\u03be\u03b1\u03c7\u03b8\u03b5\u03af</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u03b1\u03bb\u03bb\u03b1\u03b3\u03ad\u03c2</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03b1\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03c9\u03bd \u03b1\u03bb\u03bb\u03b1\u03b3\u03ce\u03bd: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b7 \u03b4\u03b9\u03b1\u03b3\u03c1\u03ac\u03c6\u03b7\u03ba\u03b5</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>\u0397 \u03ba\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b7 \u03b4\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03cc \u03bd\u03b1 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03b5\u03af: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>\u03a0\u03b1\u03c1\u03b1\u03ba\u03b1\u03bb\u03bf\u03cd\u03bc\u03b5 \u03b4\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03ae\u03c3\u03c4\u03b5 \u03c0\u03c1\u03ce\u03c4\u03b1 \u03ad\u03bd\u03b1 \u03c0\u03c1\u03cc\u03c4\u03c5\u03c0\u03bf \u03c4\u03b9\u03bc\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>\u0394\u03b5\u03bd \u03ae\u03c4\u03b1\u03bd \u03b4\u03c5\u03bd\u03b1\u03c4\u03ae \u03b7 \u03bc\u03b5\u03c4\u03b1\u03c6\u03cc\u03c1\u03c4\u03c9\u03c3\u03b7 \u03ae \u03b7 \u03b1\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03bf\u03c5 \u03b1\u03c1\u03c7\u03b5\u03af\u03bf\u03c5: %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>\u0391\u03c5\u03c4\u03ae \u03b7 \u03b5\u03bd\u03ad\u03c1\u03b3\u03b5\u03b9\u03b1 \u03b4\u03b5\u03bd \u03bc\u03c0\u03bf\u03c1\u03b5\u03af \u03bd\u03b1 \u03c0\u03c1\u03b1\u03b3\u03bc\u03b1\u03c4\u03bf\u03c0\u03bf\u03b9\u03b7\u03b8\u03b5\u03af: \u039c\u03b7 \u03ad\u03b3\u03ba\u03c5\u03c1\u03bf \u03c4\u03b5\u03ba\u03bc\u03ae\u03c1\u03b9\u03bf \u03b1\u03c3\u03c6\u03ac\u03bb\u03b5\u03b9\u03b1\u03c2.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"fr\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Avertissement</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>Le chronom\u00e8tre a \u00e9t\u00e9 arr\u00eat\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>Le chronom\u00e8tre ne peut pas \u00eatre arr\u00eat\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>Le chronom\u00e9trage a commenc\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>Le chronom\u00e9trage ne peut pas \u00eatre lanc\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>La limite d'enregistrement du temps d'activit\u00e9 a \u00e9t\u00e9 atteinte, veuillez arr\u00eater au moins un enregistrement.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Vous modifiez un enregistrement que vous avez export\u00e9</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Modifications enregistr\u00e9es</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>Les modifications n'ont pas pu \u00eatres enregistr\u00e9es : %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>L'entr\u00e9e a \u00e9t\u00e9 supprim\u00e9e</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>L'entr\u00e9e n'a pas pu \u00eatre supprim\u00e9e : %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Vous devez cr\u00e9er votre premier mod\u00e8le de facture avant de continuer</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>Le fichier n'a pas pu \u00eatre mis en ligne ou enregistr\u00e9 : %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>L'action n'a pas pu \u00eatre effectu\u00e9e\u00a0: jeton de s\u00e9curit\u00e9 invalide.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"he\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>\u05d0\u05d6\u05d4\u05e8\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>\u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df \u05e0\u05e2\u05e6\u05e8\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e2\u05e6\u05d5\u05e8 \u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>\u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df \u05d4\u05d7\u05dc\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05d4\u05e7\u05dc\u05d8\u05ea \u05d6\u05de\u05df</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>\u05d4\u05d2\u05e2\u05ea \u05dc\u05de\u05d2\u05d1\u05dc\u05ea \u05db\u05de\u05d5\u05ea \u05e8\u05e9\u05d5\u05de\u05d5\u05ea \u05d6\u05de\u05df \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea. \u05d0\u05e0\u05d0 \u05e2\u05e6\u05d5\u05e8 \u05dc\u05e4\u05d7\u05d5\u05ea \u05e8\u05e9\u05d5\u05de\u05ea \u05d6\u05de\u05df \u05d0\u05d7\u05ea.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>\u05d0\u05ea\u05d4 \u05e2\u05d5\u05e8\u05da \u05e8\u05e9\u05d5\u05de\u05d4 \u05e9\u05db\u05d1\u05e8 \u05d9\u05d5\u05e6\u05d0\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>\u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05e0\u05e9\u05de\u05e8\u05d5</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05de\u05d5\u05e8 \u05d0\u05ea \u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>\u05d4\u05e8\u05e9\u05d5\u05de\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e8\u05e9\u05d5\u05de\u05d4: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>\u05d0\u05e0\u05d0 \u05e6\u05d5\u05e8 \u05e7\u05d5\u05d3\u05dd \u05ea\u05d1\u05e0\u05d9\u05ea \u05d7\u05e9\u05d1\u05d5\u05e0\u05d9\u05ea</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05d0\u05d5 \u05dc\u05e9\u05de\u05d5\u05e8 \u05d0\u05ea \u05d4\u05e7\u05d5\u05d1\u05e5: %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>\u05d0\u05d9 \u05d0\u05e4\u05e9\u05e8 \u05dc\u05d1\u05e6\u05e2 \u05d0\u05ea \u05d4\u05e4\u05e2\u05d5\u05dc\u05d4: \u05d0\u05e1\u05d9\u05de\u05d5\u05df \u05d0\u05d1\u05d8\u05d7\u05d4 \u05e9\u05d2\u05d5\u05d9.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"pt\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Aviso</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>N\u00e3o foi poss\u00edvel interromper a grava\u00e7\u00e3o de tempo</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>N\u00e3o foi poss\u00edvel iniciar a grava\u00e7\u00e3o de tempo</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>Foi atingido o limite de registos de tempo ativos. Pare primeiro pelo menos uma medi\u00e7\u00e3o de tempo de execu\u00e7\u00e3o.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Est\u00e1 a editar um registo exportado</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Altera\u00e7\u00f5es guardadas com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>As altera\u00e7\u00f5es n\u00e3o puderam ser guardadas: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>A entrada foi eliminada</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>A entrada n\u00e3o pode ser eliminada: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Crie primeiro um modelo de fatura</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>N\u00e3o foi poss\u00edvel enviar ou guardar o ficheiro: %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>N\u00e3o foi poss\u00edvel realizar a a\u00e7\u00e3o: token de seguran\u00e7a inv\u00e1lido.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"pt-BR\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target>Aviso</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target>A grava\u00e7\u00e3o de tempo n\u00e3o p\u00f4de ser interrompida</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target>A grava\u00e7\u00e3o de tempo foi iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target>A grava\u00e7\u00e3o de tempo n\u00e3o p\u00f4de ser iniciada</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target>O limite de registros de tempo ativos foi atingido, por favor, pare pelo menos uma medi\u00e7\u00e3o de tempo de execu\u00e7\u00e3o primeiro.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target>Voc\u00ea est\u00e1 editando um registro exportado</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target>Altera\u00e7\u00f5es salvas com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target>As altera\u00e7\u00f5es n\u00e3o puderam ser salvas: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target>A entrada foi exclu\u00edda com sucesso</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target>A entrada n\u00e3o pode ser exclu\u00edda: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target>Voc\u00ea precisa criar sua primeira fatura modelo antes de prosseguir</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>O arquivo n\u00e3o p\u00f4de ser carregado ou salvo: %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>A a\u00e7\u00e3o n\u00e3o p\u00f4de ser realizada: token de seguran\u00e7a inv\u00e1lido.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"tr\" datatype=\"plaintext\" original=\"flashmessages.en.xlf\">\n    <body>\n      <trans-unit id=\"S9k1S7Z\" resname=\"warning\">\n        <source>warning</source>\n        <target state=\"translated\">Uyar\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"WmrEP_5\" resname=\"timesheet.stop.success\">\n        <source>timesheet.stop.success</source>\n        <target state=\"translated\">Zaman kayd\u0131 durduruldu</target>\n      </trans-unit>\n      <trans-unit id=\"NPBnpK_\" resname=\"timesheet.stop.error\">\n        <source>timesheet.stop.error</source>\n        <target state=\"translated\">Zaman kayd\u0131 durdurulamad\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"CCUoZga\" resname=\"timesheet.start.success\">\n        <source>timesheet.start.success</source>\n        <target state=\"translated\">Zaman kayd\u0131 ba\u015flat\u0131ld\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"3w9tuox\" resname=\"timesheet.start.error\">\n        <source>timesheet.start.error</source>\n        <target state=\"translated\">Zaman kayd\u0131 ba\u015flat\u0131lamad\u0131</target>\n      </trans-unit>\n      <trans-unit id=\"srhs0gp\" resname=\"timesheet.start.exceeded_limit\">\n        <source>timesheet.start.exceeded_limit</source>\n        <target state=\"translated\">Etkin zaman kay\u0131tlar\u0131n\u0131n s\u0131n\u0131r\u0131na ula\u015f\u0131ld\u0131, l\u00fctfen \u00f6nce en az bir \u00e7al\u0131\u015fan zaman \u00f6l\u00e7\u00fcm\u00fcn\u00fc durdurun.</target>\n      </trans-unit>\n      <trans-unit id=\"kPINWEK\" resname=\"timesheet.locked.warning\">\n        <source>timesheet.locked.warning</source>\n        <target state=\"translated\">D\u0131\u015fa aktar\u0131lan bir kayd\u0131 d\u00fczenliyorsunuz</target>\n      </trans-unit>\n      <trans-unit id=\"72Ih8zO\" resname=\"action.update.success\">\n        <source>action.update.success</source>\n        <target state=\"translated\">De\u011fi\u015fiklikler kaydedildi</target>\n      </trans-unit>\n      <trans-unit id=\"xeu1LSy\" resname=\"action.update.error\">\n        <source>action.update.error</source>\n        <target state=\"translated\">De\u011fi\u015fiklikler kaydedilemed\u0130: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"YV50HDB\" resname=\"action.delete.success\">\n        <source>action.delete.success</source>\n        <target state=\"translated\">Kay\u0131t silindi</target>\n      </trans-unit>\n      <trans-unit id=\"mW91Tmb\" resname=\"action.delete.error\">\n        <source>action.delete.error</source>\n        <target state=\"translated\">Kay\u0131t silinemedi: %reason%</target>\n      </trans-unit>\n      <trans-unit id=\"B_cz49z\" resname=\"invoice.first_template\">\n        <source>invoice.first_template</source>\n        <target state=\"translated\">Devam edebilmek i\u00e7in fatura \u015fablonu olu\u015fturman\u0131z gereklidir</target>\n      </trans-unit>\n      <trans-unit id=\"wejAEcR\" resname=\"action.upload.error\">\n        <source>action.upload.error</source>\n        <target>Dosya kar\u015f\u0131ya y\u00fcklenemedi veya kaydedilemedi: %reason%</target>\n      </trans-unit>\n      <trans-unit resname=\"action.csrf.error\" id=\"bOE_q5R\">\n        <source>action.csrf.error</source>\n        <target>Eylem ger\u00e7ekle\u015ftirilemedi: ge\u00e7ersiz g\u00fcvenlik belirteci.</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"de\" datatype=\"plaintext\" original=\"messages.en.xlf\">\n    <body>\n      <!--\n              Global template keys\n            -->\n      <trans-unit id=\"N7mikjJ\" resname=\"time_tracking\">\n        <source>time_tracking</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <trans-unit id=\"inmIkP6\" resname=\"yes\">\n        <source>yes</source>\n        <target>Ja</target>\n      </trans-unit>\n      <trans-unit id=\"k5Apjz_\" resname=\"no\">\n        <source>no</source>\n        <target>Nein</target>\n      </trans-unit>\n      <trans-unit id=\".3dyBTq\" resname=\"both\">\n        <source>both</source>\n        <target>Beides</target>\n      </trans-unit>\n      <trans-unit id=\"KLIuHvt\" resname=\"This is a mandatory field\">\n        <source>This is a mandatory field</source>\n        <target>Pflichtfeld</target>\n      </trans-unit>\n      <trans-unit id=\"_ohHsMM\" resname=\"create\">\n        <source>create</source>\n        <target>Erstellen</target>\n      </trans-unit>\n      <trans-unit id=\"DYHuW58\" resname=\"confirm.delete\">\n        <source>confirm.delete</source>\n        <target>Wollen Sie das wirklich l\u00f6schen?</target>\n      </trans-unit>\n      <trans-unit id=\"vDd3alC\" resname=\"admin_entity.delete_confirm\">\n        <source>admin_entity.delete_confirm</source>\n        <target>\n            Diese Daten werden ebenfalls mit gel\u00f6scht!\n            Alternativ k\u00f6nnen Sie einen Eintrag ausw\u00e4hlen, auf den alle existierenden Daten umgebucht werden:\n        </target>\n      </trans-unit>\n      <trans-unit id=\"COyxNde\" resname=\"delete.not_in_use\">\n        <source>delete.not_in_use</source>\n        <target>Dieses Element kann sicher gel\u00f6scht werden.</target>\n      </trans-unit>\n      <trans-unit id=\"I3TZF5S\" resname=\"cancel\">\n        <source>cancel</source>\n        <target>Abbrechen</target>\n      </trans-unit>\n      <trans-unit id=\"PyZ8KrQ\" resname=\"confirm\">\n        <source>confirm</source>\n        <target>Best\u00e4tigen</target>\n      </trans-unit>\n      <trans-unit id=\".0CFrRV\" resname=\"upload\">\n        <source>upload</source>\n        <target>Hochladen</target>\n      </trans-unit>\n      <trans-unit id=\"JBkykGe\" resname=\"search\">\n        <source>search</source>\n        <target>Suchen</target>\n      </trans-unit>\n      <trans-unit id=\"IolBPQD\" resname=\"label.searchTerm\">\n        <source>label.searchTerm</source>\n        <target>Suchbegriff</target>\n      </trans-unit>\n      <trans-unit id=\"BytPihM\" resname=\"label.set_as_default\">\n        <source>label.set_as_default</source>\n        <target>Einstellung als Suchfavorit speichern</target>\n      </trans-unit>\n      <trans-unit id=\"NNKq04n\" resname=\"label.remove_default\">\n        <source>label.remove_default</source>\n        <target>Suchfavorit l\u00f6schen</target>\n      </trans-unit>\n      <trans-unit id=\"31x84Dt\" resname=\"label.asc\">\n        <source>label.asc</source>\n        <target>Aufsteigend</target>\n      </trans-unit>\n      <trans-unit id=\"0D_zaYd\" resname=\"label.desc\">\n        <source>label.desc</source>\n        <target>Absteigend</target>\n      </trans-unit>\n      <trans-unit id=\"Z8Fxbvf\" resname=\"label.orderBy\">\n        <source>label.orderBy</source>\n        <target>Sortieren nach</target>\n      </trans-unit>\n      <trans-unit id=\"hBNESu6\" resname=\"my.profile\">\n        <source>my.profile</source>\n        <target>Mein Profil</target>\n      </trans-unit>\n      <trans-unit id=\"J258iS6\" resname=\"update_multiple\">\n        <source>update_multiple</source>\n        <target>%action% von %count% Eintr\u00e4gen?</target>\n      </trans-unit>\n      <trans-unit id=\"OTDmccn\" resname=\"attachments\">\n        <source>attachments</source>\n        <target>Dateien</target>\n      </trans-unit>\n      <trans-unit id=\"O5w1jzb\" resname=\"file\">\n        <source>file</source>\n        <target>Datei</target>\n      </trans-unit>\n      <trans-unit id=\"0M_Gylq\" resname=\"rates.empty\">\n        <source>rates.empty</source>\n        <target>Es wurden noch keine Stundens\u00e4tze hinterlegt.</target>\n      </trans-unit>\n      <trans-unit id=\"mflwMcX\" resname=\"rates.title\">\n        <source>rates.title</source>\n        <target>Geb\u00fchren</target>\n      </trans-unit>\n      <trans-unit id=\"zFfl7jw\" resname=\"sum.total\">\n        <source>sum.total</source>\n        <target>Gesamt</target>\n      </trans-unit>\n      <trans-unit id=\"XP5zkiN\" resname=\"modal.dirty\">\n        <source>modal.dirty</source>\n        <target>Das Formular wurde ge\u00e4ndert. Bitte klicken Sie \u201eSpeichern\u201c, um die \u00c4nderungen zu sichern oder \u201eSchlie\u00dfen\u201c, um abzubrechen.</target>\n      </trans-unit>\n      <!--\n              Login / Security\n            -->\n      <trans-unit id=\"9pvowqn\" resname=\"label.password\">\n        <source>label.password</source>\n        <target>Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"WxAnbP0\" resname=\"label.password_repeat\">\n        <source>label.password_repeat</source>\n        <target>Passwort wiederholen</target>\n      </trans-unit>\n      <trans-unit id=\"II4DGnv\" resname=\"label.logout\">\n        <source>label.logout</source>\n        <target>Abmelden</target>\n      </trans-unit>\n      <trans-unit id=\"hFFZGp_\" resname=\"label.user_profile\">\n        <source>label.user_profile</source>\n        <target>Mein Profil</target>\n      </trans-unit>\n      <trans-unit id=\"gXZR.hV\" resname=\"label.api_token\">\n        <source>label.api_token</source>\n        <target>API-Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"s_X2xpI\" resname=\"label.api_token_repeat\">\n        <source>label.api_token_repeat</source>\n        <target>API-Passwort wiederholen</target>\n      </trans-unit>\n      <trans-unit id=\".372.o7\" resname=\"login_required\">\n        <source>login_required</source>\n        <target>Fehlende Berechtigung. Zur Anmeldung wechseln?</target>\n      </trans-unit>\n      <trans-unit id=\".ndupSK\" resname=\"registration.check_email\">\n        <source>registration.check_email</source>\n        <target>Eine E-Mail wurde an %email% gesendet. Sie enth\u00e4lt einen Link, den Sie anklicken m\u00fcssen, um Ihr Benutzerkonto zu best\u00e4tigen.</target>\n      </trans-unit>\n      <trans-unit id=\"_cY.wHP\" resname=\"resetting.check_email\">\n        <source>resetting.check_email</source>\n        <target>\n          Eine E-Mail wurde verschickt. Sie beinhaltet einen Link zum Zur\u00fccksetzen des Passwortes.\n          Hinweis: Ein neues Passwort kann nur alle %tokenLifetime% Stunden beantragt werden.\n\n          Eventuell wurde diese E-Mail als Spam markiert, wenn sie nicht angekommen ist.\n        </target>\n      </trans-unit>\n      <!--\n              Menu / Navbar items\n            -->\n      <trans-unit id=\"UoOv6mx\" approved=\"yes\" resname=\"menu.homepage\">\n        <source>menu.homepage</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"wvvYSw_\" resname=\"menu.admin\">\n        <source>menu.admin</source>\n        <target>Administration</target>\n      </trans-unit>\n      <trans-unit id=\"6OKwCUB\" resname=\"menu.system\">\n        <source>menu.system</source>\n        <target>System</target>\n      </trans-unit>\n      <trans-unit id=\"wBTFKFR\" resname=\"menu.logout\">\n        <source>menu.logout</source>\n        <target>Abmelden</target>\n      </trans-unit>\n      <trans-unit id=\"C0W7_BT\" resname=\"menu.timesheet\">\n        <source>menu.timesheet</source>\n        <target>Meine Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"Ci9W8.K\" resname=\"menu.invoice\">\n        <source>menu.invoice</source>\n        <target>Rechnungen</target>\n      </trans-unit>\n      <trans-unit id=\"I.eil4u\" resname=\"menu.export\">\n        <source>menu.export</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"ypVQO7o\" resname=\"menu.reporting\">\n        <source>menu.reporting</source>\n        <target>Berichte</target>\n      </trans-unit>\n      <trans-unit id=\"WGIhZv1\" resname=\"menu.admin_timesheet\">\n        <source>menu.admin_timesheet</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <trans-unit id=\"Y_jAD36\" resname=\"menu.admin_customer\">\n        <source>menu.admin_customer</source>\n        <target>Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"oDLp9t3\" resname=\"menu.admin_project\">\n        <source>menu.admin_project</source>\n        <target>Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"wriHFwl\" resname=\"menu.admin_activity\">\n        <source>menu.admin_activity</source>\n        <target>T\u00e4tigkeiten</target>\n      </trans-unit>\n      <trans-unit id=\"oZo1BnZ\" resname=\"menu.admin_user\">\n        <source>menu.admin_user</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"pA.bYIk\" resname=\"menu.admin_team\">\n        <source>menu.admin_team</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"hOZxcaK\" resname=\"menu.plugin\">\n        <source>menu.plugin</source>\n        <target>Erweiterungen</target>\n      </trans-unit>\n      <trans-unit id=\"IXtkHRw\" resname=\"menu.system_configuration\">\n        <source>menu.system_configuration</source>\n        <target>Einstellungen</target>\n      </trans-unit>\n      <trans-unit id=\"yo4f8Kh\" resname=\"menu.tags\">\n        <source>menu.tags</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"1kHI0gb\" resname=\"menu.doctor\">\n        <source>menu.doctor</source>\n        <target>Doktor</target>\n      </trans-unit>\n      <!--\n              Error templates\n            -->\n      <trans-unit id=\"Vz3Igj3\" resname=\"error.no_entries_found\">\n        <source>error.no_entries_found</source>\n        <target>Anhand ihrer ausgew\u00e4hlten Filter wurden keine Eintr\u00e4ge gefunden.</target>\n      </trans-unit>\n      <trans-unit id=\"hlu4iX5\" resname=\"error.no_comments_found\">\n        <source>error.no_comments_found</source>\n        <target>Es wurden noch keine Kommentare abgegeben.</target>\n      </trans-unit>\n      <trans-unit id=\"XQ2.pq2\" resname=\"error.too_many_entries\">\n        <source>error.too_many_entries</source>\n        <target>Die Anfrage konnte nicht verarbeitet werden. Es wurden zu viele Ergebnisse gefunden.</target>\n      </trans-unit>\n      <!--\n              General labels\n            -->\n      <trans-unit id=\"H1qEi4d\" resname=\"label.date\">\n        <source>label.date</source>\n        <target>Datum</target>\n      </trans-unit>\n      <trans-unit id=\"eJPDE76\" resname=\"label.starttime\">\n        <source>label.starttime</source>\n        <target>Beginn</target>\n      </trans-unit>\n      <trans-unit id=\"uZlpDFh\" resname=\"label.endtime\">\n        <source>label.endtime</source>\n        <target>Ende</target>\n      </trans-unit>\n      <trans-unit id=\"cgpmY0I\" resname=\"label.duration\">\n        <source>label.duration</source>\n        <target>Dauer</target>\n      </trans-unit>\n      <trans-unit id=\"O2X4xZH\" resname=\"label.user\">\n        <source>label.user</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"LDhDPrF\" resname=\"label.username\">\n        <source>label.username</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"4cEApe1\" resname=\"label.description\">\n        <source>label.description</source>\n        <target>Beschreibung</target>\n      </trans-unit>\n      <trans-unit id=\"ysOvPSq\" resname=\"label.name\">\n        <source>label.name</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"WqTho4C\" resname=\"label.comment\">\n        <source>label.comment</source>\n        <target>Kommentar</target>\n      </trans-unit>\n      <trans-unit id=\"txRonia\" resname=\"label.id\">\n        <source>label.id</source>\n        <target>ID</target>\n      </trans-unit>\n      <trans-unit id=\"CYpZwBz\" resname=\"label.visible\">\n        <source>label.visible</source>\n        <target>Sichtbar</target>\n      </trans-unit>\n      <trans-unit id=\"2ktNwkr\" approved=\"yes\" resname=\"label.budget\">\n        <source>label.budget</source>\n        <target>Budget</target>\n      </trans-unit>\n      <trans-unit id=\"x8TrOec\" resname=\"label.timeBudget\">\n        <source>label.timeBudget</source>\n        <target>Zeit-Budget</target>\n      </trans-unit>\n      <trans-unit id=\"l1wiL0h\" resname=\"label.activity\">\n        <source>label.activity</source>\n        <target>T\u00e4tigkeit</target>\n      </trans-unit>\n      <trans-unit id=\"KtnqJcg\" resname=\"label.project\">\n        <source>label.project</source>\n        <target>Projekt</target>\n      </trans-unit>\n      <trans-unit id=\"VAbtieW\" resname=\"label.hourlyRate\">\n        <source>label.hourlyRate</source>\n        <target>Stundenlohn</target>\n      </trans-unit>\n      <trans-unit id=\"VNCQ7YU\" resname=\"label.tag\">\n        <source>label.tag</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"ijQyGRo\" resname=\"label.tags\">\n        <source>label.tags</source>\n        <target>Schlagworte</target>\n      </trans-unit>\n      <trans-unit id=\"IQ.tlua\" resname=\"label.hourly_rate\">\n        <source>label.hourly_rate</source>\n        <target>Stundenlohn</target>\n      </trans-unit>\n      <trans-unit id=\"dezCZWf\" resname=\"label.skin\">\n        <source>label.skin</source>\n        <target>Darstellung: Farben</target>\n      </trans-unit>\n      <trans-unit id=\"42BRM3Q\" resname=\"label.theme.layout\">\n        <source>label.theme.layout</source>\n        <target>Darstellung: Layout</target>\n      </trans-unit>\n      <trans-unit id=\"w8T34A6\" resname=\"label.hours\">\n        <source>label.hours</source>\n        <target>Stunden</target>\n      </trans-unit>\n      <trans-unit id=\"Ih3IFXj\" resname=\"label.rate\">\n        <source>label.rate</source>\n        <target>Lohn</target>\n      </trans-unit>\n      <trans-unit id=\"djL6LMC\" resname=\"help.rate\">\n        <source>help.rate</source>\n        <target>Zu berechnender Stundensatz</target>\n      </trans-unit>\n      <trans-unit id=\"QzvjNwg\" resname=\"label.rate_internal\">\n        <source>label.rate_internal</source>\n        <target>Interner Lohn</target>\n      </trans-unit>\n      <trans-unit id=\"uz4SmfP\" resname=\"help.rate_internal\">\n        <source>help.rate_internal</source>\n        <target>Interner Verrechnungswert (wenn dieser nicht angegeben ist, wird der normale Satz verwendet)</target>\n      </trans-unit>\n      <trans-unit id=\"v72sA1c\" resname=\"label.recalculate_rates\">\n        <source>label.recalculate_rates</source>\n        <target>Preise neu berechnen</target>\n      </trans-unit>\n      <trans-unit id=\"foM2o5T\" resname=\"label.language\">\n        <source>label.language</source>\n        <target>Sprache</target>\n      </trans-unit>\n      <trans-unit id=\"Z8a2kUf\" resname=\"label.customer\">\n        <source>label.customer</source>\n        <target>Kunde</target>\n      </trans-unit>\n      <trans-unit id=\"D2N6_cP\" resname=\"label.email\">\n        <source>label.email</source>\n        <target>E-Mail</target>\n      </trans-unit>\n      <trans-unit id=\"Ss2xe99\" resname=\"label.team\">\n        <source>label.team</source>\n        <target>Team</target>\n      </trans-unit>\n      <trans-unit id=\"Zpj9UB4\" resname=\"label.teamlead\">\n        <source>label.teamlead</source>\n        <target>Teamleiter</target>\n      </trans-unit>\n      <trans-unit id=\"hX.EQKy\" resname=\"label.create_more\">\n        <source>label.create_more</source>\n        <target>Weitere Eintr\u00e4ge erstellen</target>\n      </trans-unit>\n      <trans-unit id=\"LIOnolg\" resname=\"placeholder.type_message\">\n        <source>placeholder.type_message</source>\n        <target>Schreibe deine Nachricht\u00a0\u2026</target>\n      </trans-unit>\n      <trans-unit id=\"vkHr9AP\" resname=\"label.billable\">\n        <source>label.billable</source>\n        <target>Abrechenbar</target>\n      </trans-unit>\n      <!--\n              Buttons & Actions\n            -->\n      <trans-unit id=\"zldXQq6\" resname=\"label.actions\">\n        <source>label.actions</source>\n        <target>Aktionen</target>\n      </trans-unit>\n      <trans-unit id=\"ovKkXwU\" resname=\"action.edit\">\n        <source>action.edit</source>\n        <target>Bearbeiten</target>\n      </trans-unit>\n      <trans-unit id=\"jdbtx6z\" resname=\"action.add\">\n        <source>action.add</source>\n        <target>Hinzuf\u00fcgen</target>\n      </trans-unit>\n      <trans-unit id=\"hTKWQ6g\" resname=\"action.delete\">\n        <source>action.delete</source>\n        <target>L\u00f6schen</target>\n      </trans-unit>\n      <trans-unit id=\"HLtdhYw\" resname=\"action.save\">\n        <source>action.save</source>\n        <target>Speichern</target>\n      </trans-unit>\n      <trans-unit id=\"9hpJPiG\" resname=\"action.save_all\">\n        <source>action.save_all</source>\n        <target>Alle speichern</target>\n      </trans-unit>\n      <trans-unit id=\"tKZKI2Z\" resname=\"action.reset\">\n        <source>action.reset</source>\n        <target>Zur\u00fccksetzen</target>\n      </trans-unit>\n      <trans-unit id=\"Eb7Ygpo\" resname=\"action.back\">\n        <source>action.back</source>\n        <target>Zur\u00fcck</target>\n      </trans-unit>\n      <trans-unit id=\"wCazS.X\" resname=\"action.close\">\n        <source>action.close</source>\n        <target>Schlie\u00dfen</target>\n      </trans-unit>\n      <!--\n              Dashboard\n            -->\n      <trans-unit id=\"3bqLM8Q\" resname=\"dashboard.title\">\n        <source>dashboard.title</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"3PYadzb\" resname=\"dashboard.subtitle\">\n        <source>dashboard.subtitle</source>\n        <target>Willkommen!</target>\n      </trans-unit>\n      <trans-unit id=\"yEa1Yz3\" resname=\"dashboard.all\">\n        <source>dashboard.all</source>\n        <target>Alle Benutzer</target>\n      </trans-unit>\n      <!--\n              Widgets\n            -->\n      <trans-unit id=\"giznf_R\" resname=\"more.info.link\">\n        <source>more.info.link</source>\n        <target>Mehr Infos</target>\n      </trans-unit>\n      <trans-unit id=\"4iliLZT\" resname=\"label.toggle_dropdown\">\n        <source>label.toggle_dropdown</source>\n        <target>Men\u00fc anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"f3KMQJh\" resname=\"label.my_teams\">\n        <source>label.my_teams</source>\n        <target>Meine Teams</target>\n      </trans-unit>\n      <trans-unit id=\"jTiYRIu\" resname=\"label.my_team_projects\">\n        <source>label.my_team_projects</source>\n        <target>Meine Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"1PQHtXu\" resname=\"label.progress\">\n        <source>label.progress</source>\n        <target>Fortschritt</target>\n      </trans-unit>\n      <trans-unit id=\"vTY9SUk\" resname=\"label.plus_more\">\n        <source>label.plus_more</source>\n        <target>+%count% weitere</target>\n      </trans-unit>\n      <!--\n              Timesheet\n            -->\n      <trans-unit id=\"VXj0Y3h\" resname=\"timesheet.title\">\n        <source>timesheet.title</source>\n        <target>Meine Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"dwEVXUR\" resname=\"timesheet.edit\">\n        <source>timesheet.edit</source>\n        <target>Eintrag bearbeiten</target>\n      </trans-unit>\n      <trans-unit id=\"trDJK9W\" resname=\"label.begin\">\n        <source>label.begin</source>\n        <target>Von</target>\n      </trans-unit>\n      <trans-unit id=\"R9typUt\" resname=\"label.end\">\n        <source>label.end</source>\n        <target>Bis</target>\n      </trans-unit>\n      <trans-unit id=\"egaNXjp\" resname=\"label.daterange\">\n        <source>label.daterange</source>\n        <target>Zeitraum</target>\n      </trans-unit>\n      <trans-unit id=\"UbnqJLn\" resname=\"modal.columns.title\">\n        <source>modal.columns.title</source>\n        <target>\u00c4ndere Spalten-Sichtbarkeit</target>\n      </trans-unit>\n      <trans-unit id=\"EbfIoLp\" resname=\"modal.columns.description\">\n        <source>modal.columns.description</source>\n        <target>Beim Speichern werden die nicht ausgew\u00e4hlten Spalten ausgeblendet und diese Einstellungen in einem Browser Cookie hinterlegt. Sollten Sie Ihre Cookies l\u00f6schen, werden die Einstellungen r\u00fcckg\u00e4ngig gemacht.</target>\n      </trans-unit>\n      <trans-unit id=\"5gjqxgK\" resname=\"label.fixedRate\">\n        <source>label.fixedRate</source>\n        <target>Festbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"b43sCwO\" resname=\"help.fixedRate\">\n        <source>help.fixedRate</source>\n        <target>Jeder Zeiteintrag bekommt den gleichen Wert, unabh\u00e4ngig von seiner Dauer</target>\n      </trans-unit>\n      <trans-unit id=\"YTSS_Q1\" resname=\"label.color\">\n        <source>label.color</source>\n        <target>Farbe</target>\n      </trans-unit>\n      <trans-unit id=\"EoouxGX\" resname=\"label.replaceTags\">\n        <source>label.replaceTags</source>\n        <target>Schlagworte ersetzen</target>\n      </trans-unit>\n      <trans-unit id=\"BxkmaKz\" resname=\"label.appendTags\">\n        <source>label.appendTags</source>\n        <target>Schlagworte hinzuf\u00fcgen</target>\n      </trans-unit>\n      <!--\n              User profile\n            -->\n      <trans-unit id=\"1_wnK76\" resname=\"profile.title\">\n        <source>profile.title</source>\n        <target>Benutzerprofil</target>\n      </trans-unit>\n      <trans-unit id=\"HWKJZ0T\" resname=\"profile.about_me\">\n        <source>profile.about_me</source>\n        <target>\u00dcber mich</target>\n      </trans-unit>\n      <trans-unit id=\"Fm.kwVn\" resname=\"profile.first_entry\">\n        <source>profile.first_entry</source>\n        <target>Arbeitet seit</target>\n      </trans-unit>\n      <trans-unit id=\"1c0EQaz\" resname=\"profile.registration_date\">\n        <source>profile.registration_date</source>\n        <target>Registriert am</target>\n      </trans-unit>\n      <trans-unit id=\"xEYQXPy\" resname=\"profile.settings\">\n        <source>profile.settings</source>\n        <target>Profil</target>\n      </trans-unit>\n      <trans-unit id=\"A6TLLQa\" resname=\"profile.password\">\n        <source>profile.password</source>\n        <target>Passwort</target>\n      </trans-unit>\n      <trans-unit id=\"Z34ZpjK\" resname=\"profile.api-token\">\n        <source>profile.api-token</source>\n        <target>API</target>\n      </trans-unit>\n      <trans-unit id=\"ygtTz8.\" resname=\"profile.roles\">\n        <source>profile.roles</source>\n        <target>Rollen</target>\n      </trans-unit>\n      <trans-unit id=\"DZ7XGML\" resname=\"profile.teams\">\n        <source>profile.teams</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"MQKiG33\" resname=\"profile.preferences\">\n        <source>profile.preferences</source>\n        <target>Einstellungen</target>\n      </trans-unit>\n      <trans-unit id=\"Eq78QrH\" resname=\"label.theme.collapsed_sidebar\">\n        <source>label.theme.collapsed_sidebar</source>\n        <target>Minimiert die linke Navigationsleiste</target>\n      </trans-unit>\n      <trans-unit id=\"0sgroZi\" resname=\"label.calendar.initial_view\">\n        <source>label.calendar.initial_view</source>\n        <target>Initiale Darstellung des Kalenders</target>\n      </trans-unit>\n      <trans-unit id=\"iqQsgIW\" resname=\"label.login.initial_view\">\n        <source>label.login.initial_view</source>\n        <target>Initiale Ansicht nach Anmeldung</target>\n      </trans-unit>\n      <trans-unit id=\"hO7mkmf\" resname=\"label.lastLogin\">\n        <source>label.lastLogin</source>\n        <target>Letzte Anmeldung</target>\n      </trans-unit>\n      <!-- Options for user-preference label.calendar.initial_view -->\n      <trans-unit id=\"pcfRcZ4\" resname=\"month\">\n        <source>month</source>\n        <target>Monat</target>\n      </trans-unit>\n      <trans-unit id=\"Irm6dfx\" resname=\"agendaWeek\">\n        <source>agendaWeek</source>\n        <target>Woche</target>\n      </trans-unit>\n      <trans-unit id=\"Q0Zip02\" resname=\"agendaDay\">\n        <source>agendaDay</source>\n        <target>Tag</target>\n      </trans-unit>\n      <trans-unit id=\"rYzHCFd\" resname=\"label.timesheet.daily_stats\">\n        <source>label.timesheet.daily_stats</source>\n        <target>T\u00e4gliche Statistiken im Timesheet anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"tSlqVK2\" resname=\"label.timesheet.export_decimal\">\n        <source>label.timesheet.export_decimal</source>\n        <target>Dezimal Format f\u00fcr Export nutzen</target>\n      </trans-unit>\n      <trans-unit id=\"5R.QsZ3\" resname=\"theme.update_browser_title\">\n        <source>theme.update_browser_title</source>\n        <target>Browser Titel aktualisieren</target>\n      </trans-unit>\n      <!--\n        User timesheet calendar\n      -->\n      <trans-unit id=\"HWiuMV6\" resname=\"calendar.title\">\n        <source>calendar.title</source>\n        <target>Kalender</target>\n      </trans-unit>\n      <trans-unit id=\"75kjTF9\" resname=\"calendar.drag_and_drop.delete\">\n        <source>calendar.drag_and_drop.delete</source>\n        <target>Wenn Sie einen Eintrag l\u00f6schen wollen, m\u00fcssen Sie ihn auf die Schaltfl\u00e4che ziehen.</target>\n      </trans-unit>\n      <!--\n        Admin: Timesheet\n      -->\n      <trans-unit id=\"bSDjzZL\" resname=\"admin_timesheet.title\">\n        <source>admin_timesheet.title</source>\n        <target>Zeiterfassung</target>\n      </trans-unit>\n      <!--\n        Admin: Projects\n      -->\n      <trans-unit id=\"DFjFRGe\" resname=\"admin_project.title\">\n        <source>admin_project.title</source>\n        <target>Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"yLOqEX_\" resname=\"label.project_start\">\n        <source>label.project_start</source>\n        <target>Projekt Start</target>\n      </trans-unit>\n      <trans-unit id=\"4kQGReV\" resname=\"label.project_end\">\n        <source>label.project_end</source>\n        <target>Projekt Ende</target>\n      </trans-unit>\n      <!--\n        Admin: Activity\n      -->\n      <trans-unit id=\"auu8q0u\" resname=\"admin_activity.title\">\n        <source>admin_activity.title</source>\n        <target>T\u00e4tigkeiten</target>\n      </trans-unit>\n      <!--\n        Admin: Customer\n      -->\n      <trans-unit id=\"2TvKX9Z\" resname=\"admin_customer.title\">\n        <source>admin_customer.title</source>\n        <target>Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"39AtPxQ\" resname=\"label.number\">\n        <source>label.number</source>\n        <target>Kundennummer</target>\n      </trans-unit>\n      <trans-unit id=\"7jfRn_1\" resname=\"label.company\">\n        <source>label.company</source>\n        <target>Unternehmensbezeichnung</target>\n      </trans-unit>\n      <trans-unit id=\"GOStgLi\" resname=\"label.vat\">\n        <source>label.vat</source>\n        <target>Umsatzsteuer</target>\n      </trans-unit>\n      <trans-unit id=\"Dgmh_mv\" resname=\"label.vat_id\">\n        <source>label.vat_id</source>\n        <target>Umsatzsteuer-ID</target>\n      </trans-unit>\n      <trans-unit id=\"YNGNfGn\" resname=\"label.tax_rate\">\n        <source>label.tax_rate</source>\n        <target>Steuersatz</target>\n      </trans-unit>\n      <trans-unit id=\"0tkOMo1\" resname=\"label.contact\">\n        <source>label.contact</source>\n        <target>Kontakt</target>\n      </trans-unit>\n      <trans-unit id=\"c9W5AO4\" resname=\"label.address\">\n        <source>label.address</source>\n        <target>Adresse</target>\n      </trans-unit>\n      <trans-unit id=\"k7MJQ82\" resname=\"label.country\">\n        <source>label.country</source>\n        <target>Land</target>\n      </trans-unit>\n      <trans-unit id=\"g03c_vw\" resname=\"label.phone\">\n        <source>label.phone</source>\n        <target>Telefon</target>\n      </trans-unit>\n      <trans-unit id=\"eRyhERS\" resname=\"label.fax\">\n        <source>label.fax</source>\n        <target>Fax</target>\n      </trans-unit>\n      <trans-unit id=\"AawT9pW\" resname=\"label.mobile\">\n        <source>label.mobile</source>\n        <target>Mobiltelefon</target>\n      </trans-unit>\n      <trans-unit id=\"PS9IH_t\" approved=\"yes\" resname=\"label.homepage\">\n        <source>label.homepage</source>\n        <target>Homepage</target>\n      </trans-unit>\n      <trans-unit id=\"dmtPdwq\" resname=\"label.timezone\">\n        <source>label.timezone</source>\n        <target>Zeitzone</target>\n      </trans-unit>\n      <trans-unit id=\"otd2FZd\" resname=\"label.currency\">\n        <source>label.currency</source>\n        <target>W\u00e4hrung</target>\n      </trans-unit>\n      <!--\n              Admin: User\n            -->\n      <trans-unit id=\"t34EvnF\" resname=\"admin_user.title\">\n        <source>admin_user.title</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"TRDzmCV\" resname=\"label.alias\">\n        <source>label.alias</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"UrRn8xj\" resname=\"label.title\">\n        <source>label.title</source>\n        <target>Titel</target>\n      </trans-unit>\n      <trans-unit id=\"nWMH_Nr\" resname=\"label.avatar\">\n        <source>label.avatar</source>\n        <target>Profilbild (URL)</target>\n      </trans-unit>\n      <trans-unit id=\"KtTP.Sh\" resname=\"label.active\">\n        <source>label.active</source>\n        <target>Aktiv</target>\n      </trans-unit>\n      <trans-unit id=\"iD6CNOO\" resname=\"label.roles\">\n        <source>label.roles</source>\n        <target>Rolle</target>\n      </trans-unit>\n      <trans-unit id=\"ZlZ20pG\" resname=\"user_permissions.title\">\n        <source>user_permissions.title</source>\n        <target>Benutzer Berechtigungen</target>\n      </trans-unit>\n      <trans-unit id=\"G.GEdlk\" resname=\"user_role.title\">\n        <source>user_role.title</source>\n        <target>Benutzer Rolle</target>\n      </trans-unit>\n      <trans-unit id=\"E7G60OF\" resname=\"Allowed character: A-Z and _\">\n        <source>Allowed character: A-Z and _</source>\n        <target>Erlaubte Zeichen: A-Z und _</target>\n      </trans-unit>\n      <!--\n              Admin: Plugins\n            -->\n      <trans-unit id=\"d75KAlJ\" resname=\"label.version\">\n        <source>label.version</source>\n        <target>Version</target>\n      </trans-unit>\n      <trans-unit id=\"8Rfa01v\" resname=\"label.required_version\">\n        <source>label.required_version</source>\n        <target>Kompatibel mit</target>\n      </trans-unit>\n      <!--\n              ROLES\n            -->\n      <trans-unit id=\"WRuKTcz\" resname=\"ROLE_SUPER_ADMIN\">\n        <source>ROLE_SUPER_ADMIN</source>\n        <target>System-Admin</target>\n      </trans-unit>\n      <trans-unit id=\"718iPw6\" resname=\"ROLE_ADMIN\">\n        <source>ROLE_ADMIN</source>\n        <target>Administrator</target>\n      </trans-unit>\n      <trans-unit id=\"yttGLAB\" resname=\"ROLE_TEAMLEAD\">\n        <source>ROLE_TEAMLEAD</source>\n        <target>Teamleiter</target>\n      </trans-unit>\n      <trans-unit id=\"rvO5ZXf\" resname=\"ROLE_USER\">\n        <source>ROLE_USER</source>\n        <target>Benutzer</target>\n      </trans-unit>\n      <!--\n              Statistics data for Dashboard & Users profile\n            -->\n      <trans-unit id=\"lfSTZGe\" resname=\"stats.workingTimeToday\">\n        <source>stats.workingTimeToday</source>\n        <target>Heute, %day%</target>\n      </trans-unit>\n      <trans-unit id=\"XdYs3I8\" resname=\"stats.workingTimeWeek\">\n        <source>stats.workingTimeWeek</source>\n        <target>Kalenderwoche %week%</target>\n      </trans-unit>\n      <trans-unit id=\"HPhRbtc\" resname=\"stats.workingTimeWeekShort\">\n        <source>stats.workingTimeWeekShort</source>\n        <target>KW %week%</target>\n      </trans-unit>\n      <trans-unit id=\"JIKNAYP\" approved=\"yes\" resname=\"stats.workingTimeMonth\">\n        <source>stats.workingTimeMonth</source>\n        <target>%month% %year%</target>\n      </trans-unit>\n      <trans-unit id=\"JnUFsNi\" resname=\"stats.workingTimeYear\">\n        <source>stats.workingTimeYear</source>\n        <target>Gesamtes Jahr %year%</target>\n      </trans-unit>\n      <trans-unit id=\"HWB4OGJ\" resname=\"stats.workingTimeFinancialYear\">\n        <source>stats.workingTimeFinancialYear</source>\n        <target>Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"BXBFJP8\" resname=\"stats.workingTime\">\n        <source>stats.workingTime</source>\n        <target>Arbeitszeit</target>\n      </trans-unit>\n      <trans-unit id=\"pX_3dNm\" resname=\"stats.revenue\">\n        <source>stats.revenue</source>\n        <target>Einnahmen</target>\n      </trans-unit>\n      <trans-unit id=\"TdBJBAl\" resname=\"stats.durationToday\">\n        <source>stats.durationToday</source>\n        <target>Arbeitszeit heute</target>\n      </trans-unit>\n      <trans-unit id=\"XhKalZH\" resname=\"stats.durationWeek\">\n        <source>stats.durationWeek</source>\n        <target>Arbeitszeit diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"uaOwf_P\" resname=\"stats.durationMonth\">\n        <source>stats.durationMonth</source>\n        <target>Arbeitszeit diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"WqF84KR\" resname=\"stats.durationYear\">\n        <source>stats.durationYear</source>\n        <target>Arbeitszeit dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"xkugSAA\" resname=\"stats.durationFinancialYear\">\n        <source>stats.durationFinancialYear</source>\n        <target>Arbeitszeit dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"YtvPnl1\" resname=\"stats.durationTotal\">\n        <source>stats.durationTotal</source>\n        <target>Arbeitszeit total</target>\n      </trans-unit>\n      <trans-unit id=\"IFOLMgp\" resname=\"stats.yourWorkingHours\">\n        <source>stats.yourWorkingHours</source>\n        <target>Meine Arbeitszeiten</target>\n      </trans-unit>\n      <trans-unit id=\"023M9Ta\" resname=\"stats.amountToday\">\n        <source>stats.amountToday</source>\n        <target>Umsatz heute</target>\n      </trans-unit>\n      <trans-unit id=\"xnJvYAE\" resname=\"stats.amountWeek\">\n        <source>stats.amountWeek</source>\n        <target>Umsatz diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"ulr3reE\" resname=\"stats.amountMonth\">\n        <source>stats.amountMonth</source>\n        <target>Umsatz diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"bQZyZaO\" resname=\"stats.amountYear\">\n        <source>stats.amountYear</source>\n        <target>Umsatz dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"wuUWovn\" resname=\"stats.amountFinancialYear\">\n        <source>stats.amountFinancialYear</source>\n        <target>Umsatz dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"Z0fz23v\" resname=\"stats.amountTotal\">\n        <source>stats.amountTotal</source>\n        <target>Umsatz total</target>\n      </trans-unit>\n      <trans-unit id=\"xyiadv3\" resname=\"stats.userActiveToday\">\n        <source>stats.userActiveToday</source>\n        <target>Aktive Benutzer heute</target>\n      </trans-unit>\n      <trans-unit id=\"knMHaeO\" resname=\"stats.userActiveWeek\">\n        <source>stats.userActiveWeek</source>\n        <target>Aktive Benutzer diese Woche</target>\n      </trans-unit>\n      <trans-unit id=\"adzVDgb\" resname=\"stats.userActiveMonth\">\n        <source>stats.userActiveMonth</source>\n        <target>Aktive Benutzer diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"AswjFvh\" resname=\"stats.userActiveYear\">\n        <source>stats.userActiveYear</source>\n        <target>Aktive Benutzer dieses Jahr</target>\n      </trans-unit>\n      <trans-unit id=\"zMY6gkY\" resname=\"stats.userActiveFinancialYear\">\n        <source>stats.userActiveFinancialYear</source>\n        <target>Aktive Benutzer dieses Gesch\u00e4ftsjahr</target>\n      </trans-unit>\n      <trans-unit id=\"dLTb1Po\" resname=\"stats.userActiveTotal\">\n        <source>stats.userActiveTotal</source>\n        <target>Aktive Benutzer jemals</target>\n      </trans-unit>\n      <trans-unit id=\"lEW82ex\" resname=\"stats.activeRecordings\">\n        <source>stats.activeRecordings</source>\n        <target>Aktive Zeitmessungen</target>\n      </trans-unit>\n      <trans-unit id=\"t5eIWp8\" resname=\"stats.userTotal\">\n        <source>stats.userTotal</source>\n        <target>Anzahl Benutzer</target>\n      </trans-unit>\n      <trans-unit id=\"Bor.76M\" resname=\"stats.activityTotal\">\n        <source>stats.activityTotal</source>\n        <target>Anzahl T\u00e4tigkeiten</target>\n      </trans-unit>\n      <trans-unit id=\"67uSaR3\" resname=\"stats.projectTotal\">\n        <source>stats.projectTotal</source>\n        <target>Anzahl Projekte</target>\n      </trans-unit>\n      <trans-unit id=\"tnD6aPj\" resname=\"stats.customerTotal\">\n        <source>stats.customerTotal</source>\n        <target>Anzahl Kunden</target>\n      </trans-unit>\n      <trans-unit id=\"unC5MXv\" resname=\"stats.percentUsed\">\n        <source>stats.percentUsed</source>\n        <target>%percent%% verwendet</target>\n      </trans-unit>\n      <trans-unit id=\"HkjvwLc\" resname=\"stats.percentUsedLeft\">\n        <source>stats.percentUsedLeft</source>\n        <target>%percent%% verwendet (noch %left% offen)</target>\n      </trans-unit>\n      <trans-unit id=\"xN7MfSA\" resname=\"stats.percentUsed_month\">\n        <source>stats.percentUsed_month</source>\n        <target>%percent%% verwendet diesen Monat</target>\n      </trans-unit>\n      <trans-unit id=\"vWJPpYU\" resname=\"stats.percentUsedLeft_month\">\n        <source>stats.percentUsedLeft_month</source>\n        <target>%percent%% verwendet (noch %left% diesen Monat offen)</target>\n      </trans-unit>\n      <!--\n              Invoice\n            -->\n      <trans-unit id=\"Oq.KtC6\" resname=\"admin_invoice_template.title\">\n        <source>admin_invoice_template.title</source>\n        <target>Rechnungsvorlagen</target>\n      </trans-unit>\n      <trans-unit id=\"iERywrp\" resname=\"invoice.title\">\n        <source>invoice.title</source>\n        <target>Rechnungen</target>\n      </trans-unit>\n      <trans-unit id=\"ov4OQOh\" resname=\"invoice.filter\">\n        <source>invoice.filter</source>\n        <target>Rechnungsdaten filtern</target>\n      </trans-unit>\n      <trans-unit id=\"7H7P1mE\" resname=\"button.preview\">\n        <source>button.preview</source>\n        <target>Vorschau</target>\n      </trans-unit>\n      <trans-unit id=\"IQ9DUOW\" resname=\"button.preview_print\">\n        <source>button.preview_print</source>\n        <target>Druck Vorschau</target>\n      </trans-unit>\n      <trans-unit id=\"X70dwP8\" resname=\"button.print\">\n        <source>button.print</source>\n        <target>Drucken</target>\n      </trans-unit>\n      <trans-unit id=\"W_TXvSi\" resname=\"button.csv\">\n        <source>button.csv</source>\n        <target>CSV</target>\n      </trans-unit>\n      <trans-unit id=\"vC2IsaP\" resname=\"button.xlsx\">\n        <source>button.xlsx</source>\n        <target>Excel</target>\n      </trans-unit>\n      <trans-unit id=\"aAa5uRR\" resname=\"button.pdf\">\n        <source>button.pdf</source>\n        <target>PDF</target>\n      </trans-unit>\n      <trans-unit id=\"ulYFDIo\" resname=\"button.ods\">\n        <source>button.ods</source>\n        <target>ODS</target>\n      </trans-unit>\n      <trans-unit id=\"zPcx3O_\" resname=\"invoice_print\">\n        <source>invoice_print</source>\n        <target>Rechnung</target>\n      </trans-unit>\n      <trans-unit id=\"7J7G3Vr\" resname=\"label.mark_as_exported\">\n        <source>label.mark_as_exported</source>\n        <target>Als exportiert markieren</target>\n      </trans-unit>\n      <trans-unit id=\"p0IprAw\" resname=\"label.template\">\n        <source>label.template</source>\n        <target>Vorlage</target>\n      </trans-unit>\n      <trans-unit id=\"zfIRxJh\" resname=\"label.due_days\">\n        <source>label.due_days</source>\n        <target>Zahlungsziel in Tagen</target>\n      </trans-unit>\n      <trans-unit id=\"rAJrxSK\" resname=\"invoice.due_days\">\n        <source>invoice.due_days</source>\n        <target>Zahlungsziel</target>\n      </trans-unit>\n      <trans-unit id=\"Xij3oQl\" resname=\"invoice.payment_date\">\n        <source>invoice.payment_date</source>\n        <target>Zahlungsdatum</target>\n      </trans-unit>\n      <trans-unit id=\"4XKFnWh\" resname=\"invoice.from\">\n        <source>invoice.from</source>\n        <target>Von</target>\n      </trans-unit>\n      <trans-unit id=\"hx7vsMA\" resname=\"invoice.to\">\n        <source>invoice.to</source>\n        <target>An</target>\n      </trans-unit>\n      <trans-unit id=\"x_W5sV4\" resname=\"invoice.number\">\n        <source>invoice.number</source>\n        <target>Rechnungsnummer</target>\n      </trans-unit>\n      <trans-unit id=\"86KyrKO\" resname=\"invoice.subtotal\">\n        <source>invoice.subtotal</source>\n        <target>Rechnungsbetrag (netto)</target>\n      </trans-unit>\n      <trans-unit id=\"EO57yXg\" resname=\"invoice.tax\">\n        <source>invoice.tax</source>\n        <target>Umsatzsteuer</target>\n      </trans-unit>\n      <trans-unit id=\"N68vyvo\" resname=\"invoice.total\">\n        <source>invoice.total</source>\n        <target>Rechnungsendbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"TPzFWUs\" resname=\"invoice.service_date\">\n        <source>invoice.service_date</source>\n        <target>Leistungsdatum</target>\n      </trans-unit>\n      <trans-unit id=\"6x24VVR\" resname=\"label.amount\">\n        <source>label.amount</source>\n        <target>Anzahl</target>\n      </trans-unit>\n      <trans-unit id=\"g7EpaPY\" resname=\"label.total_rate\">\n        <source>label.total_rate</source>\n        <target>Gesamtpreis</target>\n      </trans-unit>\n      <trans-unit id=\"MF3MdTu\" resname=\"label.unit_price\">\n        <source>label.unit_price</source>\n        <target>Einzelbetrag</target>\n      </trans-unit>\n      <trans-unit id=\"77aZC3r\" resname=\"label.payment_terms\">\n        <source>label.payment_terms</source>\n        <target>Zahlungsinformationen</target>\n      </trans-unit>\n      <trans-unit id=\"9p2KQag\" resname=\"invoice.signature_user\">\n        <source>invoice.signature_user</source>\n        <target>Leistungsbest\u00e4tigung: Datum / Name Berater / Unterschrift</target>\n      </trans-unit>\n      <trans-unit id=\"Q9ykNhO\" resname=\"invoice.signature_customer\">\n        <source>invoice.signature_customer</source>\n        <target>Leistungsbest\u00e4tigung: Datum / Name Kunde / Unterschrift</target>\n      </trans-unit>\n      <trans-unit id=\"c3d6p33\" resname=\"invoice.total_working_time\">\n        <source>invoice.total_working_time</source>\n        <target>Gesamtdauer</target>\n      </trans-unit>\n      <trans-unit id=\"BS00SS7\" resname=\"label.orderNumber\">\n        <source>label.orderNumber</source>\n        <target>Bestellnummer</target>\n      </trans-unit>\n      <trans-unit id=\"as948k9\" resname=\"label.orderDate\">\n        <source>label.orderDate</source>\n        <target>Bestelldatum</target>\n      </trans-unit>\n      <trans-unit id=\"RRj6PYN\" resname=\"label.invoice_tax_number\">\n        <source>label.invoice_tax_number</source>\n        <target>USt-IdNr.:</target>\n      </trans-unit>\n      <trans-unit id=\"uFZA7Uf\" resname=\"label.invoice_bank_account\">\n        <source>label.invoice_bank_account</source>\n        <target>Bankverbindung</target>\n      </trans-unit>\n      <trans-unit id=\"9VxfLLy\" resname=\"label.decimalDuration\">\n        <source>label.decimalDuration</source>\n        <target>Dauer als Dezimalzahl anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"hzhzbqw\" resname=\"label.status\">\n        <source>label.status</source>\n        <target>Status</target>\n      </trans-unit>\n      <trans-unit id=\"X_NRsed\" resname=\"status.new\">\n        <source>status.new</source>\n        <target>Neu</target>\n      </trans-unit>\n      <trans-unit id=\"Uvo1CbP\" resname=\"status.pending\">\n        <source>status.pending</source>\n        <target>Ausstehend</target>\n      </trans-unit>\n      <trans-unit id=\"PHJwR4w\" resname=\"status.paid\">\n        <source>status.paid</source>\n        <target>Bezahlt</target>\n      </trans-unit>\n      <trans-unit id=\"gT9W2pZ\" resname=\"status.canceled\">\n        <source>status.canceled</source>\n        <target>Storniert</target>\n      </trans-unit>\n      <trans-unit id=\"crrlEUA\" resname=\"preview.skipped_rows\">\n        <source>preview.skipped_rows</source>\n        <target>\u00dcberspringe Vorschau von %rows% weiteren Zeilen \u2026</target>\n      </trans-unit>\n      <!--\n              Export\n            -->\n      <trans-unit id=\"F6Jmro7\" resname=\"export.title\">\n        <source>export.title</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"iwWaUoa\" resname=\"export.filter\">\n        <source>export.filter</source>\n        <target>Daten f\u00fcr Export filtern</target>\n      </trans-unit>\n      <trans-unit id=\"vjmoQGo\" resname=\"export.period\">\n        <source>export.period</source>\n        <target>Zeitraum</target>\n      </trans-unit>\n      <trans-unit id=\"3CQ7A2m\" resname=\"export.document_title\">\n        <source>export.document_title</source>\n        <target>Export von Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"d5wyWRD\" resname=\"export.full_list\">\n        <source>export.full_list</source>\n        <target>Vollst\u00e4ndige Auflistung</target>\n      </trans-unit>\n      <trans-unit id=\"N778uJ6\" resname=\"export.summary\">\n        <source>export.summary</source>\n        <target>Zusammenfassung</target>\n      </trans-unit>\n      <trans-unit id=\"ElDyzrx\" resname=\"export.page_of\">\n        <source>export.page_of</source>\n        <target>Seite %page% von %pages%</target>\n      </trans-unit>\n      <trans-unit id=\"vKY0tof\" resname=\"export.date_copyright\">\n        <source>export.date_copyright</source>\n        <target>Erstellt %date% mit %kimai%</target>\n      </trans-unit>\n      <trans-unit id=\"W92QGbY\" resname=\"export.warn_result_amount\">\n        <source>export.warn_result_amount</source>\n        <target>Ihre Suche f\u00fchrt zu %count% Ergebnissen. Sollte der Export fehlschlagen, m\u00fcssen Sie die Suche weiter eingrenzen.</target>\n      </trans-unit>\n      <trans-unit id=\"pnGDFmf\" resname=\"label.type\">\n        <source>label.type</source>\n        <target>Typ</target>\n      </trans-unit>\n      <!--\n             Navbar - recent entries and activities\n            -->\n      <trans-unit id=\"OxdYMR3\" resname=\"active.entries\">\n        <source>active.entries</source>\n        <target>Ihre aktiven Zeitmessungen</target>\n      </trans-unit>\n      <trans-unit id=\"e7XS97t\" resname=\"timesheet.all\">\n        <source>timesheet.all</source>\n        <target>Alle Eintr\u00e4ge anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"WVU_S.A\" resname=\"recent.activities\">\n        <source>recent.activities</source>\n        <target>Eine ihrer letzten T\u00e4tigkeiten neustarten</target>\n      </trans-unit>\n      <trans-unit id=\"SLV47Uu\" resname=\"recent.activities.format\">\n        <source>recent.activities.format</source>\n        <target>%activity% in %project% f\u00fcr %customer%</target>\n      </trans-unit>\n      <trans-unit id=\"dTHY7Mw\" resname=\"timesheet.start\">\n        <source>timesheet.start</source>\n        <target>Neue Zeitmessung starten</target>\n      </trans-unit>\n      <!--\n              TOOLBARS\n            -->\n      <trans-unit id=\"MPimOps\" resname=\"label.pageSize\">\n        <source>label.pageSize</source>\n        <target>Ergebnisse</target>\n      </trans-unit>\n      <trans-unit id=\"KhyA_PW\" resname=\"label.entryState\">\n        <source>label.entryState</source>\n        <target>Zeiten</target>\n      </trans-unit>\n      <trans-unit id=\"X3JM9wj\" resname=\"label.exported\">\n        <source>label.exported</source>\n        <target>Exportiert</target>\n      </trans-unit>\n      <trans-unit id=\"_DDecAV\" resname=\"entryState.exported\">\n        <source>entryState.exported</source>\n        <target>Abgerechnet</target>\n      </trans-unit>\n      <trans-unit id=\"ccCiXyR\" resname=\"entryState.not_exported\">\n        <source>entryState.not_exported</source>\n        <target>Offen</target>\n      </trans-unit>\n      <trans-unit id=\"do7fP0q\" resname=\"entryState.all\">\n        <source>entryState.all</source>\n        <target>Alle</target>\n      </trans-unit>\n      <trans-unit id=\"xm7mqoK\" resname=\"entryState.running\">\n        <source>entryState.running</source>\n        <target>Laufende</target>\n      </trans-unit>\n      <trans-unit id=\"spHpd_I\" resname=\"entryState.stopped\">\n        <source>entryState.stopped</source>\n        <target>Beendete</target>\n      </trans-unit>\n      <trans-unit id=\"BhsaLxX\" resname=\"export.clear_all\">\n        <source>export.clear_all</source>\n        <target>Alle angezeigten Eintr\u00e4ge als offen markieren?</target>\n      </trans-unit>\n      <trans-unit id=\"qtjPKUT\" resname=\"export.mark_all\">\n        <source>export.mark_all</source>\n        <target>Alle angezeigten Eintr\u00e4ge als abgerechnet markieren?</target>\n      </trans-unit>\n      <trans-unit id=\"S0vT92U\" resname=\"label.globalsOnly\">\n        <source>label.globalsOnly</source>\n        <target>Nur globale</target>\n      </trans-unit>\n      <trans-unit id=\"2Ek7sXu\" resname=\"label.batch_meta_fields\">\n        <source>label.batch_meta_fields</source>\n        <target>Zus\u00e4tzliche Felder</target>\n      </trans-unit>\n      <trans-unit id=\"9Wt8Pp_\" resname=\"help.batch_meta_fields\">\n        <source>help.batch_meta_fields</source>\n        <target>Felder die aktualisiert werden sollen, m\u00fcssen zun\u00e4chst durch einen Klick auf die zugeh\u00f6rige Checkbox freigeschaltet werden.</target>\n      </trans-unit>\n      <trans-unit id=\"z_YHoZn\" resname=\"label.includeNoWork\">\n        <source>label.includeNoWork</source>\n        <target>Eintr\u00e4ge ohne Buchungen anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"B.Dbbob\" resname=\"label.includeNoBudget\">\n        <source>label.includeNoBudget</source>\n        <target>Eintr\u00e4ge ohne Budget anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"Wq.h4nD\" resname=\"label.includeBudgetType_month\">\n        <source>label.includeBudgetType_month</source>\n        <target>Eintr\u00e4ge mit \u201eMonats-Budget\u201c anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"nVulc7.\" resname=\"label.includeBudgetType_full\">\n        <source>label.includeBudgetType_full</source>\n        <target>Eintr\u00e4ge mit \u201eLebenszyklus\u201c-Budget anzeigen</target>\n      </trans-unit>\n      <trans-unit id=\"3zn5T5e\" resname=\"label.not_exported\">\n        <source>label.not_exported</source>\n        <target>Nicht exportiert</target>\n      </trans-unit>\n      <trans-unit id=\"csF1D35\" resname=\"label.not_invoiced\">\n        <source>label.not_invoiced</source>\n        <target>Nicht abgerechnet</target>\n      </trans-unit>\n      <trans-unit id=\"AJ6dwR.\" resname=\"label.last_record_before\">\n        <source>label.last_record_before</source>\n        <target>Keine Zeitbuchung mehr seit</target>\n      </trans-unit>\n      <trans-unit id=\"qDnURk7\" resname=\"label.last_record\">\n        <source>label.last_record</source>\n        <target>Letzter Eintrag</target>\n      </trans-unit>\n      <trans-unit id=\"LXdqaTH\" resname=\"label.account_number\">\n        <source>label.account_number</source>\n        <target>Personalnummer</target>\n      </trans-unit>\n      <trans-unit id=\"PoF7hD8\" resname=\"label.budgetType\">\n        <source>label.budgetType</source>\n        <target>Budget-Typ</target>\n      </trans-unit>\n      <trans-unit id=\"cHfLJtL\" resname=\"label.budgetType_month\">\n        <source>label.budgetType_month</source>\n        <target>Monatlich</target>\n      </trans-unit>\n      <trans-unit id=\"9Rhadz6\" resname=\"label.budgetType_full\">\n        <source>label.budgetType_full</source>\n        <target>Lebenszyklus</target>\n      </trans-unit>\n      <trans-unit id=\"tvV0NhL\" resname=\"delete_warning.short_stats\">\n        <source>delete_warning.short_stats</source>\n        <target>Momentan existieren insgesamt %records% Zeiteintr\u00e4ge, welche sich auf eine Gesamtdauer von %duration% belaufen.</target>\n      </trans-unit>\n      <trans-unit id=\"Zif614Q\" resname=\"add_user.label\">\n        <source>add_user.label</source>\n        <target>Benutzer hinzuf\u00fcgen</target>\n      </trans-unit>\n      <trans-unit id=\"tp.gIrE\" resname=\"team.add_user.help\">\n        <source>team.add_user.help</source>\n        <target>Durch Auswahl wird dem Team ein neuer Benutzer hinzugef\u00fcgt. Sie k\u00f6nnen im Anschluss festlegen, ob der Benutzer ein Teamleiter sein soll.</target>\n      </trans-unit>\n      <trans-unit id=\"yNWIi5U\" resname=\"default_value_new\">\n        <source>default_value_new</source>\n        <target>Standardwert f\u00fcr neue Eintr\u00e4ge</target>\n      </trans-unit>\n      <!--\n          QUICK ENTRIES\n      -->\n      <trans-unit id=\"f8oNzSP\" resname=\"quick_entry.title\">\n        <source>quick_entry.title</source>\n        <target>Wochen-Arbeitsstunden</target>\n      </trans-unit>\n      <trans-unit id=\"61p_ckr\" resname=\"label.hours_24\">\n        <source>label.hours_24</source>\n        <target>24 Stunden</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n", "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xliff xmlns=\"urn:oasis:names:tc:xliff:document:1.2\" version=\"1.2\">\n  <file source-language=\"en\" target-language=\"en\" datatype=\"plaintext\" original=\"messages.en.xlf\">\n    <body>\n      <!--\n              Global template keys\n            -->\n      <trans-unit id=\"N7mikjJ\" resname=\"time_tracking\">\n        <source>time_tracking</source>\n        <target>Time Tracking</target>\n      </trans-unit>\n      <trans-unit id=\"inmIkP6\" resname=\"yes\">\n        <source>yes</source>\n        <target>Yes</target>\n      </trans-unit>\n      <trans-unit id=\"k5Apjz_\" resname=\"no\">\n        <source>no</source>\n        <target>No</target>\n      </trans-unit>\n      <trans-unit id=\".3dyBTq\" resname=\"both\">\n        <source>both</source>\n        <target>Both</target>\n      </trans-unit>\n      <trans-unit id=\"KLIuHvt\" resname=\"This is a mandatory field\">\n        <source>This is a mandatory field</source>\n        <target>Mandatory</target>\n      </trans-unit>\n      <trans-unit id=\"_ohHsMM\" resname=\"create\">\n        <source>create</source>\n        <target>Create</target>\n      </trans-unit>\n      <trans-unit id=\"DYHuW58\" resname=\"confirm.delete\">\n        <source>confirm.delete</source>\n        <target>Do you really want to delete it?</target>\n      </trans-unit>\n      <trans-unit id=\"vDd3alC\" resname=\"admin_entity.delete_confirm\">\n        <source>admin_entity.delete_confirm</source>\n        <target>\n                    This data will be deleted as well!\n                    Alternatively, you can select an entry to which all data will be transferred:\n                </target>\n      </trans-unit>\n      <trans-unit id=\"COyxNde\" resname=\"delete.not_in_use\">\n        <source>delete.not_in_use</source>\n        <target>This item can be safely deleted.</target>\n      </trans-unit>\n      <trans-unit id=\"I3TZF5S\" resname=\"cancel\">\n        <source>cancel</source>\n        <target>Cancel</target>\n      </trans-unit>\n      <trans-unit id=\"PyZ8KrQ\" resname=\"confirm\">\n        <source>confirm</source>\n        <target>Confirm</target>\n      </trans-unit>\n      <trans-unit id=\".0CFrRV\" resname=\"upload\">\n        <source>upload</source>\n        <target>Upload</target>\n      </trans-unit>\n      <trans-unit id=\"JBkykGe\" resname=\"search\">\n        <source>search</source>\n        <target>Search</target>\n      </trans-unit>\n      <trans-unit id=\"IolBPQD\" resname=\"label.searchTerm\">\n        <source>label.searchTerm</source>\n        <target>Search term</target>\n      </trans-unit>\n      <trans-unit id=\"BytPihM\" resname=\"label.set_as_default\">\n        <source>label.set_as_default</source>\n        <target>Save setting as search favourite</target>\n      </trans-unit>\n      <trans-unit id=\"NNKq04n\" resname=\"label.remove_default\">\n        <source>label.remove_default</source>\n        <target>Delete search favourite</target>\n      </trans-unit>\n      <trans-unit id=\"31x84Dt\" resname=\"label.asc\">\n        <source>label.asc</source>\n        <target>Ascending</target>\n      </trans-unit>\n      <trans-unit id=\"0D_zaYd\" resname=\"label.desc\">\n        <source>label.desc</source>\n        <target>Descending</target>\n      </trans-unit>\n      <trans-unit id=\"Z8Fxbvf\" resname=\"label.orderBy\">\n        <source>label.orderBy</source>\n        <target>Order by</target>\n      </trans-unit>\n      <trans-unit id=\"hBNESu6\" resname=\"my.profile\">\n        <source>my.profile</source>\n        <target>My profile</target>\n      </trans-unit>\n      <trans-unit id=\"J258iS6\" resname=\"update_multiple\">\n        <source>update_multiple</source>\n        <target>%action% %count% entries?</target>\n      </trans-unit>\n      <trans-unit id=\"OTDmccn\" resname=\"attachments\">\n        <source>attachments</source>\n        <target>Files</target>\n      </trans-unit>\n      <trans-unit id=\"O5w1jzb\" resname=\"file\">\n        <source>file</source>\n        <target>File</target>\n      </trans-unit>\n      <trans-unit id=\"0M_Gylq\" resname=\"rates.empty\">\n        <source>rates.empty</source>\n        <target>No hourly rates have yet been configured.</target>\n      </trans-unit>\n      <trans-unit id=\"mflwMcX\" resname=\"rates.title\">\n        <source>rates.title</source>\n        <target>Fees</target>\n      </trans-unit>\n      <trans-unit id=\"zFfl7jw\" resname=\"sum.total\">\n        <source>sum.total</source>\n        <target>Total</target>\n      </trans-unit>\n      <trans-unit id=\"XP5zkiN\" resname=\"modal.dirty\">\n        <source>modal.dirty</source>\n        <target>The form has changed. Please click \"Save\" to save the changes or \"Close\" to cancel.</target>\n      </trans-unit>\n      <!--\n              Login / Security\n            -->\n      <trans-unit id=\"9pvowqn\" resname=\"label.password\">\n        <source>label.password</source>\n        <target>Password</target>\n      </trans-unit>\n      <trans-unit id=\"WxAnbP0\" resname=\"label.password_repeat\">\n        <source>label.password_repeat</source>\n        <target>Repeat password</target>\n      </trans-unit>\n      <trans-unit id=\"II4DGnv\" resname=\"label.logout\">\n        <source>label.logout</source>\n        <target>Logout</target>\n      </trans-unit>\n      <trans-unit id=\"hFFZGp_\" resname=\"label.user_profile\">\n        <source>label.user_profile</source>\n        <target>My profile</target>\n      </trans-unit>\n      <trans-unit id=\"gXZR.hV\" resname=\"label.api_token\">\n        <source>label.api_token</source>\n        <target>API password</target>\n      </trans-unit>\n      <trans-unit id=\"s_X2xpI\" resname=\"label.api_token_repeat\">\n        <source>label.api_token_repeat</source>\n        <target>Repeat API password</target>\n      </trans-unit>\n      <trans-unit id=\".372.o7\" resname=\"login_required\">\n        <source>login_required</source>\n        <target>Missing permission. Redirect to login?</target>\n      </trans-unit>\n      <trans-unit id=\".ndupSK\" resname=\"registration.check_email\">\n        <source>registration.check_email</source>\n        <target>An email has been sent to %email%. It contains an activation link you must click to activate your account.</target>\n      </trans-unit>\n      <trans-unit id=\"_cY.wHP\" resname=\"resetting.check_email\">\n        <source>resetting.check_email</source>\n        <target>\n                    An email has been sent. It contains a link you must click to reset your password.\n                    Note: You can only request a new password once within %tokenLifetime% hours.\n\n                    If you don't get an email check your spam folder or try again.\n                </target>\n      </trans-unit>\n      <!--\n              Menu / Navbar items\n            -->\n      <trans-unit id=\"UoOv6mx\" resname=\"menu.homepage\">\n        <source>menu.homepage</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"wvvYSw_\" resname=\"menu.admin\">\n        <source>menu.admin</source>\n        <target>Administration</target>\n      </trans-unit>\n      <trans-unit id=\"6OKwCUB\" resname=\"menu.system\">\n        <source>menu.system</source>\n        <target>System</target>\n      </trans-unit>\n      <trans-unit id=\"wBTFKFR\" resname=\"menu.logout\">\n        <source>menu.logout</source>\n        <target>Logout</target>\n      </trans-unit>\n      <trans-unit id=\"C0W7_BT\" resname=\"menu.timesheet\">\n        <source>menu.timesheet</source>\n        <target>My times</target>\n      </trans-unit>\n      <trans-unit id=\"Ci9W8.K\" resname=\"menu.invoice\">\n        <source>menu.invoice</source>\n        <target>Invoices</target>\n      </trans-unit>\n      <trans-unit id=\"I.eil4u\" resname=\"menu.export\">\n        <source>menu.export</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"ypVQO7o\" resname=\"menu.reporting\">\n        <source>menu.reporting</source>\n        <target>Reporting</target>\n      </trans-unit>\n      <trans-unit id=\"WGIhZv1\" resname=\"menu.admin_timesheet\">\n        <source>menu.admin_timesheet</source>\n        <target>Timesheets</target>\n      </trans-unit>\n      <trans-unit id=\"Y_jAD36\" resname=\"menu.admin_customer\">\n        <source>menu.admin_customer</source>\n        <target>Customers</target>\n      </trans-unit>\n      <trans-unit id=\"oDLp9t3\" resname=\"menu.admin_project\">\n        <source>menu.admin_project</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"wriHFwl\" resname=\"menu.admin_activity\">\n        <source>menu.admin_activity</source>\n        <target>Activities</target>\n      </trans-unit>\n      <trans-unit id=\"oZo1BnZ\" resname=\"menu.admin_user\">\n        <source>menu.admin_user</source>\n        <target>Users</target>\n      </trans-unit>\n      <trans-unit id=\"pA.bYIk\" resname=\"menu.admin_team\">\n        <source>menu.admin_team</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"hOZxcaK\" resname=\"menu.plugin\">\n        <source>menu.plugin</source>\n        <target>Plugins</target>\n      </trans-unit>\n      <trans-unit id=\"IXtkHRw\" resname=\"menu.system_configuration\">\n        <source>menu.system_configuration</source>\n        <target>Settings</target>\n      </trans-unit>\n      <trans-unit id=\"yo4f8Kh\" resname=\"menu.tags\">\n        <source>menu.tags</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"1kHI0gb\" resname=\"menu.doctor\">\n        <source>menu.doctor</source>\n        <target>Doctor</target>\n      </trans-unit>\n      <!--\n              Error templates\n            -->\n      <trans-unit id=\"Vz3Igj3\" resname=\"error.no_entries_found\">\n        <source>error.no_entries_found</source>\n        <target>No entries were found based on your selected filters.</target>\n      </trans-unit>\n      <trans-unit id=\"hlu4iX5\" resname=\"error.no_comments_found\">\n        <source>error.no_comments_found</source>\n        <target>There were no comments posted yet.</target>\n      </trans-unit>\n      <trans-unit id=\"XQ2.pq2\" resname=\"error.too_many_entries\">\n        <source>error.too_many_entries</source>\n        <target>The request could not be processed. Too many results were found.</target>\n      </trans-unit>\n      <!--\n              General labels\n            -->\n      <trans-unit id=\"H1qEi4d\" resname=\"label.date\">\n        <source>label.date</source>\n        <target>Date</target>\n      </trans-unit>\n      <trans-unit id=\"eJPDE76\" resname=\"label.starttime\">\n        <source>label.starttime</source>\n        <target>Begin</target>\n      </trans-unit>\n      <trans-unit id=\"uZlpDFh\" resname=\"label.endtime\">\n        <source>label.endtime</source>\n        <target>End</target>\n      </trans-unit>\n      <trans-unit id=\"cgpmY0I\" resname=\"label.duration\">\n        <source>label.duration</source>\n        <target>Duration</target>\n      </trans-unit>\n      <trans-unit id=\"O2X4xZH\" resname=\"label.user\">\n        <source>label.user</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"LDhDPrF\" resname=\"label.username\">\n        <source>label.username</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"4cEApe1\" resname=\"label.description\">\n        <source>label.description</source>\n        <target>Description</target>\n      </trans-unit>\n      <trans-unit id=\"ysOvPSq\" resname=\"label.name\">\n        <source>label.name</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"WqTho4C\" resname=\"label.comment\">\n        <source>label.comment</source>\n        <target>Comment</target>\n      </trans-unit>\n      <trans-unit id=\"txRonia\" resname=\"label.id\">\n        <source>label.id</source>\n        <target>ID</target>\n      </trans-unit>\n      <trans-unit id=\"CYpZwBz\" resname=\"label.visible\">\n        <source>label.visible</source>\n        <target>Visible</target>\n      </trans-unit>\n      <trans-unit id=\"2ktNwkr\" resname=\"label.budget\">\n        <source>label.budget</source>\n        <target>Budget</target>\n      </trans-unit>\n      <trans-unit id=\"x8TrOec\" resname=\"label.timeBudget\">\n        <source>label.timeBudget</source>\n        <target>Time budget</target>\n      </trans-unit>\n      <trans-unit id=\"l1wiL0h\" resname=\"label.activity\">\n        <source>label.activity</source>\n        <target>Activity</target>\n      </trans-unit>\n      <trans-unit id=\"KtnqJcg\" resname=\"label.project\">\n        <source>label.project</source>\n        <target>Project</target>\n      </trans-unit>\n      <trans-unit id=\"VNCQ7YU\" resname=\"label.tag\">\n        <source>label.tag</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"ijQyGRo\" resname=\"label.tags\">\n        <source>label.tags</source>\n        <target>Tags</target>\n      </trans-unit>\n      <trans-unit id=\"VAbtieW\" resname=\"label.hourlyRate\">\n        <source>label.hourlyRate</source>\n        <target>Hourly rate</target>\n      </trans-unit>\n      <trans-unit id=\"IQ.tlua\" resname=\"label.hourly_rate\">\n        <source>label.hourly_rate</source>\n        <target>Hourly rate</target>\n      </trans-unit>\n      <trans-unit id=\"dezCZWf\" resname=\"label.skin\">\n        <source>label.skin</source>\n        <target>Display: colors</target>\n      </trans-unit>\n      <trans-unit id=\"O40d_3K\" resname=\"theme.layout\">\n        <source>Display: layout</source>\n        <target state=\"needs-translation\">Display: layout</target>\n      </trans-unit>\n      <trans-unit id=\"w8T34A6\" resname=\"label.hours\">\n        <source>label.hours</source>\n        <target>Hours</target>\n      </trans-unit>\n      <trans-unit id=\"Ih3IFXj\" resname=\"label.rate\">\n        <source>label.rate</source>\n        <target>Rate</target>\n      </trans-unit>\n      <trans-unit id=\"djL6LMC\" resname=\"help.rate\">\n        <source>help.rate</source>\n        <target>Hourly rate to be charged</target>\n      </trans-unit>\n      <trans-unit id=\"QzvjNwg\" resname=\"label.rate_internal\">\n        <source>label.rate_internal</source>\n        <target>Internal rate</target>\n      </trans-unit>\n      <trans-unit id=\"uz4SmfP\" resname=\"help.rate_internal\">\n        <source>help.rate_internal</source>\n        <target>Internal costs (if this is not specified, the normal rate is used)</target>\n      </trans-unit>\n      <trans-unit id=\"v72sA1c\" resname=\"label.recalculate_rates\">\n        <source>label.recalculate_rates</source>\n        <target>Recalculate rates</target>\n      </trans-unit>\n      <trans-unit id=\"foM2o5T\" resname=\"label.language\">\n        <source>label.language</source>\n        <target>Language</target>\n      </trans-unit>\n      <trans-unit id=\"Z8a2kUf\" resname=\"label.customer\">\n        <source>label.customer</source>\n        <target>Customer</target>\n      </trans-unit>\n      <trans-unit id=\"D2N6_cP\" resname=\"label.email\">\n        <source>label.email</source>\n        <target>Email</target>\n      </trans-unit>\n      <trans-unit id=\"Ss2xe99\" resname=\"label.team\">\n        <source>label.team</source>\n        <target>Team</target>\n      </trans-unit>\n      <trans-unit id=\"Zpj9UB4\" resname=\"label.teamlead\">\n        <source>label.teamlead</source>\n        <target>Teamlead</target>\n      </trans-unit>\n      <trans-unit id=\"hX.EQKy\" resname=\"label.create_more\">\n        <source>label.create_more</source>\n        <target>Create further entries</target>\n      </trans-unit>\n      <trans-unit id=\"LIOnolg\" resname=\"placeholder.type_message\">\n        <source>placeholder.type_message</source>\n        <target>Type your message\u2026</target>\n      </trans-unit>\n      <trans-unit id=\"vkHr9AP\" resname=\"label.billable\">\n        <source>label.billable</source>\n        <target>Billable</target>\n      </trans-unit>\n      <!--\n              Buttons & Actions\n            -->\n      <trans-unit id=\"zldXQq6\" resname=\"label.actions\">\n        <source>label.actions</source>\n        <target>Actions</target>\n      </trans-unit>\n      <trans-unit id=\"ovKkXwU\" resname=\"action.edit\">\n        <source>action.edit</source>\n        <target>Edit</target>\n      </trans-unit>\n      <trans-unit id=\"jdbtx6z\" resname=\"action.add\">\n        <source>action.add</source>\n        <target>Add</target>\n      </trans-unit>\n      <trans-unit id=\"hTKWQ6g\" resname=\"action.delete\">\n        <source>action.delete</source>\n        <target>Delete</target>\n      </trans-unit>\n      <trans-unit id=\"HLtdhYw\" resname=\"action.save\">\n        <source>action.save</source>\n        <target>Save</target>\n      </trans-unit>\n      <trans-unit id=\"9hpJPiG\" resname=\"action.save_all\">\n        <source>action.save_all</source>\n        <target>Save all</target>\n      </trans-unit>\n      <trans-unit id=\"tKZKI2Z\" resname=\"action.reset\">\n        <source>action.reset</source>\n        <target>Reset</target>\n      </trans-unit>\n      <trans-unit id=\"Eb7Ygpo\" resname=\"action.back\">\n        <source>action.back</source>\n        <target>Back</target>\n      </trans-unit>\n      <trans-unit id=\"wCazS.X\" resname=\"action.close\">\n        <source>action.close</source>\n        <target>Close</target>\n      </trans-unit>\n      <!--\n              Dashboard\n            -->\n      <trans-unit id=\"3bqLM8Q\" resname=\"dashboard.title\">\n        <source>dashboard.title</source>\n        <target>Dashboard</target>\n      </trans-unit>\n      <trans-unit id=\"3PYadzb\" resname=\"dashboard.subtitle\">\n        <source>dashboard.subtitle</source>\n        <target>Welcome!</target>\n      </trans-unit>\n      <trans-unit id=\"yEa1Yz3\" resname=\"dashboard.all\">\n        <source>dashboard.all</source>\n        <target>All users</target>\n      </trans-unit>\n      <!--\n              Widgets\n            -->\n      <trans-unit id=\"giznf_R\" resname=\"more.info.link\">\n        <source>more.info.link</source>\n        <target>More info</target>\n      </trans-unit>\n      <trans-unit id=\"4iliLZT\" resname=\"label.toggle_dropdown\">\n        <source>label.toggle_dropdown</source>\n        <target>Show menu</target>\n      </trans-unit>\n      <trans-unit id=\"f3KMQJh\" resname=\"label.my_teams\">\n        <source>label.my_teams</source>\n        <target>My teams</target>\n      </trans-unit>\n      <trans-unit id=\"jTiYRIu\" resname=\"label.my_team_projects\">\n        <source>label.my_team_projects</source>\n        <target>My projects</target>\n      </trans-unit>\n      <trans-unit id=\"1PQHtXu\" resname=\"label.progress\">\n        <source>label.progress</source>\n        <target>Progress</target>\n      </trans-unit>\n      <trans-unit id=\"vTY9SUk\" resname=\"label.plus_more\">\n        <source>label.plus_more</source>\n        <target>+%count% more</target>\n      </trans-unit>\n      <!--\n              Timesheet\n            -->\n      <trans-unit id=\"VXj0Y3h\" resname=\"timesheet.title\">\n        <source>timesheet.title</source>\n        <target>My times</target>\n      </trans-unit>\n      <trans-unit id=\"dwEVXUR\" resname=\"timesheet.edit\">\n        <source>timesheet.edit</source>\n        <target>Edit record</target>\n      </trans-unit>\n      <trans-unit id=\"trDJK9W\" resname=\"label.begin\">\n        <source>label.begin</source>\n        <target>From</target>\n      </trans-unit>\n      <trans-unit id=\"R9typUt\" resname=\"label.end\">\n        <source>label.end</source>\n        <target>To</target>\n      </trans-unit>\n      <trans-unit id=\"egaNXjp\" resname=\"label.daterange\">\n        <source>label.daterange</source>\n        <target>Time range</target>\n      </trans-unit>\n      <trans-unit id=\"UbnqJLn\" resname=\"modal.columns.title\">\n        <source>modal.columns.title</source>\n        <target>Change column visibility</target>\n      </trans-unit>\n      <trans-unit id=\"EbfIoLp\" resname=\"modal.columns.description\">\n        <source>modal.columns.description</source>\n        <target>Upon saving the un-checked columns will be hidden and this setting will be stored in a browser cookie. If you delete your cookies, the settings will be reversed.</target>\n      </trans-unit>\n      <trans-unit id=\"5gjqxgK\" resname=\"label.fixedRate\">\n        <source>label.fixedRate</source>\n        <target>Fixed rate</target>\n      </trans-unit>\n      <trans-unit id=\"b43sCwO\" resname=\"help.fixedRate\">\n        <source>help.fixedRate</source>\n        <target>Each time record gets the same value, regardless of its duration</target>\n      </trans-unit>\n      <trans-unit id=\"YTSS_Q1\" resname=\"label.color\">\n        <source>label.color</source>\n        <target>Color</target>\n      </trans-unit>\n      <trans-unit id=\"EoouxGX\" resname=\"label.replaceTags\">\n        <source>label.replaceTags</source>\n        <target>Replace tags</target>\n      </trans-unit>\n      <trans-unit id=\"BxkmaKz\" resname=\"label.appendTags\">\n        <source>label.appendTags</source>\n        <target>Append tags</target>\n      </trans-unit>\n      <!--\n              User profile\n            -->\n      <trans-unit id=\"1_wnK76\" resname=\"profile.title\">\n        <source>profile.title</source>\n        <target>User profile</target>\n      </trans-unit>\n      <trans-unit id=\"HWKJZ0T\" resname=\"profile.about_me\">\n        <source>profile.about_me</source>\n        <target>About me</target>\n      </trans-unit>\n      <trans-unit id=\"Fm.kwVn\" resname=\"profile.first_entry\">\n        <source>profile.first_entry</source>\n        <target>Working since</target>\n      </trans-unit>\n      <trans-unit id=\"1c0EQaz\" resname=\"profile.registration_date\">\n        <source>profile.registration_date</source>\n        <target>Registered at</target>\n      </trans-unit>\n      <trans-unit id=\"xEYQXPy\" resname=\"profile.settings\">\n        <source>profile.settings</source>\n        <target>Profile</target>\n      </trans-unit>\n      <trans-unit id=\"A6TLLQa\" resname=\"profile.password\">\n        <source>profile.password</source>\n        <target>Password</target>\n      </trans-unit>\n      <trans-unit id=\"Z34ZpjK\" resname=\"profile.api-token\">\n        <source>profile.api-token</source>\n        <target>API</target>\n      </trans-unit>\n      <trans-unit id=\"ygtTz8.\" resname=\"profile.roles\">\n        <source>profile.roles</source>\n        <target>Roles</target>\n      </trans-unit>\n      <trans-unit id=\"DZ7XGML\" resname=\"profile.teams\">\n        <source>profile.teams</source>\n        <target>Teams</target>\n      </trans-unit>\n      <trans-unit id=\"MQKiG33\" resname=\"profile.preferences\">\n        <source>profile.preferences</source>\n        <target>Preferences</target>\n      </trans-unit>\n      <trans-unit id=\"Eq78QrH\" resname=\"label.theme.collapsed_sidebar\">\n        <source>label.theme.collapsed_sidebar</source>\n        <target>Minimize the left sidebar</target>\n      </trans-unit>\n      <trans-unit id=\"0sgroZi\" resname=\"label.calendar.initial_view\">\n        <source>label.calendar.initial_view</source>\n        <target>Initial calendar view</target>\n      </trans-unit>\n      <trans-unit id=\"iqQsgIW\" resname=\"label.login.initial_view\">\n        <source>label.login.initial_view</source>\n        <target>Initial view after login</target>\n      </trans-unit>\n      <trans-unit id=\"hO7mkmf\" resname=\"label.lastLogin\">\n        <source>label.lastLogin</source>\n        <target>Last login</target>\n      </trans-unit>\n      <!-- Options for user-preference label.calendar.initial_view -->\n      <trans-unit id=\"pcfRcZ4\" resname=\"month\">\n        <source>month</source>\n        <target>Month</target>\n      </trans-unit>\n      <trans-unit id=\"Irm6dfx\" resname=\"agendaWeek\">\n        <source>agendaWeek</source>\n        <target>Week</target>\n      </trans-unit>\n      <trans-unit id=\"Q0Zip02\" resname=\"agendaDay\">\n        <source>agendaDay</source>\n        <target>Day</target>\n      </trans-unit>\n      <trans-unit id=\"rYzHCFd\" resname=\"label.timesheet.daily_stats\">\n        <source>label.timesheet.daily_stats</source>\n        <target>Show daily stats in timesheet</target>\n      </trans-unit>\n      <trans-unit id=\"tSlqVK2\" resname=\"label.timesheet.export_decimal\">\n        <source>label.timesheet.export_decimal</source>\n        <target>Use decimal duration in export</target>\n      </trans-unit>\n      <trans-unit id=\"5R.QsZ3\" resname=\"theme.update_browser_title\">\n        <source>theme.update_browser_title</source>\n        <target>Update browser title</target>\n      </trans-unit>\n      <!--\n              User timesheet calendar\n            -->\n      <trans-unit id=\"HWiuMV6\" resname=\"calendar.title\">\n        <source>calendar.title</source>\n        <target>Calendar</target>\n      </trans-unit>\n      <trans-unit id=\"75kjTF9\" resname=\"calendar.drag_and_drop.delete\">\n        <source>calendar.drag_and_drop.delete</source>\n        <target>If you want to delete an entry, you must drag it onto the button.</target>\n      </trans-unit>\n      <!--\n              Admin: Timesheet\n            -->\n      <trans-unit id=\"bSDjzZL\" resname=\"admin_timesheet.title\">\n        <source>admin_timesheet.title</source>\n        <target>Timesheets</target>\n      </trans-unit>\n      <!--\n              Admin: Projects\n            -->\n      <trans-unit id=\"DFjFRGe\" resname=\"admin_project.title\">\n        <source>admin_project.title</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"yLOqEX_\" resname=\"label.project_start\">\n        <source>label.project_start</source>\n        <target>Project start</target>\n      </trans-unit>\n      <trans-unit id=\"4kQGReV\" resname=\"label.project_end\">\n        <source>label.project_end</source>\n        <target>Project end</target>\n      </trans-unit>\n      <!--\n              Admin: Activity\n            -->\n      <trans-unit id=\"auu8q0u\" resname=\"admin_activity.title\">\n        <source>admin_activity.title</source>\n        <target>Activities</target>\n      </trans-unit>\n      <!--\n              Admin: Customer\n            -->\n      <trans-unit id=\"2TvKX9Z\" resname=\"admin_customer.title\">\n        <source>admin_customer.title</source>\n        <target>Customer</target>\n      </trans-unit>\n      <trans-unit id=\"39AtPxQ\" resname=\"label.number\">\n        <source>label.number</source>\n        <target>Account</target>\n      </trans-unit>\n      <trans-unit id=\"7jfRn_1\" resname=\"label.company\">\n        <source>label.company</source>\n        <target>Company name</target>\n      </trans-unit>\n      <trans-unit id=\"GOStgLi\" resname=\"label.vat\">\n        <source>label.vat</source>\n        <target>Tax</target>\n      </trans-unit>\n      <trans-unit id=\"Dgmh_mv\" resname=\"label.vat_id\">\n        <source>label.vat_id</source>\n        <target>VAT-ID</target>\n      </trans-unit>\n      <trans-unit id=\"YNGNfGn\" resname=\"label.tax_rate\">\n        <source>label.tax_rate</source>\n        <target>Tax rate</target>\n      </trans-unit>\n      <trans-unit id=\"0tkOMo1\" resname=\"label.contact\">\n        <source>label.contact</source>\n        <target>Contact</target>\n      </trans-unit>\n      <trans-unit id=\"c9W5AO4\" resname=\"label.address\">\n        <source>label.address</source>\n        <target>Address</target>\n      </trans-unit>\n      <trans-unit id=\"k7MJQ82\" resname=\"label.country\">\n        <source>label.country</source>\n        <target>Country</target>\n      </trans-unit>\n      <trans-unit id=\"g03c_vw\" resname=\"label.phone\">\n        <source>label.phone</source>\n        <target>Phone</target>\n      </trans-unit>\n      <trans-unit id=\"eRyhERS\" resname=\"label.fax\">\n        <source>label.fax</source>\n        <target>Fax</target>\n      </trans-unit>\n      <trans-unit id=\"AawT9pW\" resname=\"label.mobile\">\n        <source>label.mobile</source>\n        <target>Mobile</target>\n      </trans-unit>\n      <trans-unit id=\"PS9IH_t\" resname=\"label.homepage\">\n        <source>label.homepage</source>\n        <target>Homepage</target>\n      </trans-unit>\n      <trans-unit id=\"dmtPdwq\" resname=\"label.timezone\">\n        <source>label.timezone</source>\n        <target>Timezone</target>\n      </trans-unit>\n      <trans-unit id=\"otd2FZd\" resname=\"label.currency\">\n        <source>label.currency</source>\n        <target>Currency</target>\n      </trans-unit>\n      <!--\n              Admin: Users\n            -->\n      <trans-unit id=\"t34EvnF\" resname=\"admin_user.title\">\n        <source>admin_user.title</source>\n        <target>User</target>\n      </trans-unit>\n      <trans-unit id=\"TRDzmCV\" resname=\"label.alias\">\n        <source>label.alias</source>\n        <target>Name</target>\n      </trans-unit>\n      <trans-unit id=\"UrRn8xj\" resname=\"label.title\">\n        <source>label.title</source>\n        <target>Title</target>\n      </trans-unit>\n      <trans-unit id=\"nWMH_Nr\" resname=\"label.avatar\">\n        <source>label.avatar</source>\n        <target>Profile image (URL)</target>\n      </trans-unit>\n      <trans-unit id=\"KtTP.Sh\" resname=\"label.active\">\n        <source>label.active</source>\n        <target>Active</target>\n      </trans-unit>\n      <trans-unit id=\"iD6CNOO\" resname=\"label.roles\">\n        <source>label.roles</source>\n        <target>Role</target>\n      </trans-unit>\n      <trans-unit id=\"ZlZ20pG\" resname=\"user_permissions.title\">\n        <source>user_permissions.title</source>\n        <target>User permissions</target>\n      </trans-unit>\n      <trans-unit id=\"G.GEdlk\" resname=\"user_role.title\">\n        <source>user_role.title</source>\n        <target>User role</target>\n      </trans-unit>\n      <trans-unit id=\"E7G60OF\" resname=\"Allowed character: A-Z and _\">\n        <source>Allowed character: A-Z and _</source>\n        <target>Allowed character: A-Z and _</target>\n      </trans-unit>\n      <!--\n              Admin: Plugins\n            -->\n      <trans-unit id=\"d75KAlJ\" resname=\"label.version\">\n        <source>label.version</source>\n        <target>Version</target>\n      </trans-unit>\n      <trans-unit id=\"8Rfa01v\" resname=\"label.required_version\">\n        <source>label.required_version</source>\n        <target>Compatible with</target>\n      </trans-unit>\n      <!--\n              ROLES\n            -->\n      <trans-unit id=\"WRuKTcz\" resname=\"ROLE_SUPER_ADMIN\">\n        <source>ROLE_SUPER_ADMIN</source>\n        <target>System-Admin</target>\n      </trans-unit>\n      <trans-unit id=\"718iPw6\" resname=\"ROLE_ADMIN\">\n        <source>ROLE_ADMIN</source>\n        <target>Administrator</target>\n      </trans-unit>\n      <trans-unit id=\"yttGLAB\" resname=\"ROLE_TEAMLEAD\">\n        <source>ROLE_TEAMLEAD</source>\n        <target>Teamlead</target>\n      </trans-unit>\n      <trans-unit id=\"rvO5ZXf\" resname=\"ROLE_USER\">\n        <source>ROLE_USER</source>\n        <target>User</target>\n      </trans-unit>\n      <!--\n              Statistics data for Dashboard & Users profile\n            -->\n      <trans-unit id=\"lfSTZGe\" resname=\"stats.workingTimeToday\">\n        <source>stats.workingTimeToday</source>\n        <target>Today, %day%</target>\n      </trans-unit>\n      <trans-unit id=\"XdYs3I8\" resname=\"stats.workingTimeWeek\">\n        <source>stats.workingTimeWeek</source>\n        <target>Calendar week %week%</target>\n      </trans-unit>\n      <trans-unit id=\"HPhRbtc\" resname=\"stats.workingTimeWeekShort\">\n        <source>stats.workingTimeWeekShort</source>\n        <target>Week %week%</target>\n      </trans-unit>\n      <trans-unit id=\"JIKNAYP\" resname=\"stats.workingTimeMonth\">\n        <source>stats.workingTimeMonth</source>\n        <target>%month% %year%</target>\n      </trans-unit>\n      <trans-unit id=\"JnUFsNi\" resname=\"stats.workingTimeYear\">\n        <source>stats.workingTimeYear</source>\n        <target>Full year %year%</target>\n      </trans-unit>\n      <trans-unit id=\"HWB4OGJ\" resname=\"stats.workingTimeFinancialYear\">\n        <source>stats.workingTimeFinancialYear</source>\n        <target>Financial year</target>\n      </trans-unit>\n      <trans-unit id=\"BXBFJP8\" resname=\"stats.workingTime\">\n        <source>stats.workingTime</source>\n        <target>Working time</target>\n      </trans-unit>\n      <trans-unit id=\"pX_3dNm\" resname=\"stats.revenue\">\n        <source>stats.revenue</source>\n        <target>Revenues</target>\n      </trans-unit>\n      <trans-unit id=\"TdBJBAl\" resname=\"stats.durationToday\">\n        <source>stats.durationToday</source>\n        <target>Working hours today</target>\n      </trans-unit>\n      <trans-unit id=\"XhKalZH\" resname=\"stats.durationWeek\">\n        <source>stats.durationWeek</source>\n        <target>Working hours this week</target>\n      </trans-unit>\n      <trans-unit id=\"uaOwf_P\" resname=\"stats.durationMonth\">\n        <source>stats.durationMonth</source>\n        <target>Working hours this month</target>\n      </trans-unit>\n      <trans-unit id=\"WqF84KR\" resname=\"stats.durationYear\">\n        <source>stats.durationYear</source>\n        <target>Working hours this year</target>\n      </trans-unit>\n      <trans-unit id=\"xkugSAA\" resname=\"stats.durationFinancialYear\">\n        <source>stats.durationFinancialYear</source>\n        <target>Working hours this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"YtvPnl1\" resname=\"stats.durationTotal\">\n        <source>stats.durationTotal</source>\n        <target>Working hours total</target>\n      </trans-unit>\n      <trans-unit id=\"IFOLMgp\" resname=\"stats.yourWorkingHours\">\n        <source>stats.yourWorkingHours</source>\n        <target>My working hours</target>\n      </trans-unit>\n      <trans-unit id=\"023M9Ta\" resname=\"stats.amountToday\">\n        <source>stats.amountToday</source>\n        <target>Revenue today</target>\n      </trans-unit>\n      <trans-unit id=\"xnJvYAE\" resname=\"stats.amountWeek\">\n        <source>stats.amountWeek</source>\n        <target>Revenue this week</target>\n      </trans-unit>\n      <trans-unit id=\"ulr3reE\" resname=\"stats.amountMonth\">\n        <source>stats.amountMonth</source>\n        <target>Revenue this month</target>\n      </trans-unit>\n      <trans-unit id=\"bQZyZaO\" resname=\"stats.amountYear\">\n        <source>stats.amountYear</source>\n        <target>Revenue this year</target>\n      </trans-unit>\n      <trans-unit id=\"wuUWovn\" resname=\"stats.amountFinancialYear\">\n        <source>stats.amountFinancialYear</source>\n        <target>Revenue this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"Z0fz23v\" resname=\"stats.amountTotal\">\n        <source>stats.amountTotal</source>\n        <target>Total revenue</target>\n      </trans-unit>\n      <trans-unit id=\"xyiadv3\" resname=\"stats.userActiveToday\">\n        <source>stats.userActiveToday</source>\n        <target>Active users today</target>\n      </trans-unit>\n      <trans-unit id=\"knMHaeO\" resname=\"stats.userActiveWeek\">\n        <source>stats.userActiveWeek</source>\n        <target>Active users this week</target>\n      </trans-unit>\n      <trans-unit id=\"adzVDgb\" resname=\"stats.userActiveMonth\">\n        <source>stats.userActiveMonth</source>\n        <target>Active users this month</target>\n      </trans-unit>\n      <trans-unit id=\"AswjFvh\" resname=\"stats.userActiveYear\">\n        <source>stats.userActiveYear</source>\n        <target>Active users this year</target>\n      </trans-unit>\n      <trans-unit id=\"zMY6gkY\" resname=\"stats.userActiveFinancialYear\">\n        <source>stats.userActiveFinancialYear</source>\n        <target>Active users this financial year</target>\n      </trans-unit>\n      <trans-unit id=\"dLTb1Po\" resname=\"stats.userActiveTotal\">\n        <source>stats.userActiveTotal</source>\n        <target>Active users ever</target>\n      </trans-unit>\n      <trans-unit id=\"lEW82ex\" resname=\"stats.activeRecordings\">\n        <source>stats.activeRecordings</source>\n        <target>Active records</target>\n      </trans-unit>\n      <trans-unit id=\"t5eIWp8\" resname=\"stats.userTotal\">\n        <source>stats.userTotal</source>\n        <target>Users</target>\n      </trans-unit>\n      <trans-unit id=\"Bor.76M\" resname=\"stats.activityTotal\">\n        <source>stats.activityTotal</source>\n        <target>Activities</target>\n      </trans-unit>\n      <trans-unit id=\"67uSaR3\" resname=\"stats.projectTotal\">\n        <source>stats.projectTotal</source>\n        <target>Projects</target>\n      </trans-unit>\n      <trans-unit id=\"tnD6aPj\" resname=\"stats.customerTotal\">\n        <source>stats.customerTotal</source>\n        <target>Customers</target>\n      </trans-unit>\n      <trans-unit id=\"unC5MXv\" resname=\"stats.percentUsed\">\n        <source>stats.percentUsed</source>\n        <target>%percent%% used</target>\n      </trans-unit>\n      <trans-unit id=\"HkjvwLc\" resname=\"stats.percentUsedLeft\">\n        <source>stats.percentUsedLeft</source>\n        <target>%percent%% used (%left% are still open)</target>\n      </trans-unit>\n      <trans-unit id=\"xN7MfSA\" resname=\"stats.percentUsed_month\">\n        <source>stats.percentUsed_month</source>\n        <target>%percent%% used this month</target>\n      </trans-unit>\n      <trans-unit id=\"vWJPpYU\" resname=\"stats.percentUsedLeft_month\">\n        <source>stats.percentUsedLeft_month</source>\n        <target>%percent%% used (%left% are still open this month)</target>\n      </trans-unit>\n      <!--\n              Invoice\n            -->\n      <trans-unit id=\"Oq.KtC6\" resname=\"admin_invoice_template.title\">\n        <source>admin_invoice_template.title</source>\n        <target>Invoice template</target>\n      </trans-unit>\n      <trans-unit id=\"iERywrp\" resname=\"invoice.title\">\n        <source>invoice.title</source>\n        <target>Invoices</target>\n      </trans-unit>\n      <trans-unit id=\"ov4OQOh\" resname=\"invoice.filter\">\n        <source>invoice.filter</source>\n        <target>Filter invoice data</target>\n      </trans-unit>\n      <trans-unit id=\"7H7P1mE\" resname=\"button.preview\">\n        <source>button.preview</source>\n        <target>Preview</target>\n      </trans-unit>\n      <trans-unit id=\"IQ9DUOW\" resname=\"button.preview_print\">\n        <source>button.preview_print</source>\n        <target>Print preview</target>\n      </trans-unit>\n      <trans-unit id=\"X70dwP8\" resname=\"button.print\">\n        <source>button.print</source>\n        <target>Print</target>\n      </trans-unit>\n      <trans-unit id=\"W_TXvSi\" resname=\"button.csv\">\n        <source>button.csv</source>\n        <target>CSV</target>\n      </trans-unit>\n      <trans-unit id=\"vC2IsaP\" resname=\"button.xlsx\">\n        <source>button.xlsx</source>\n        <target>Excel</target>\n      </trans-unit>\n      <trans-unit id=\"aAa5uRR\" resname=\"button.pdf\">\n        <source>button.pdf</source>\n        <target>PDF</target>\n      </trans-unit>\n      <trans-unit id=\"ulYFDIo\" resname=\"button.ods\">\n        <source>button.ods</source>\n        <target>ODS</target>\n      </trans-unit>\n      <trans-unit id=\"zPcx3O_\" resname=\"invoice_print\">\n        <source>invoice_print</source>\n        <target>Invoice</target>\n      </trans-unit>\n      <trans-unit id=\"7J7G3Vr\" resname=\"label.mark_as_exported\">\n        <source>label.mark_as_exported</source>\n        <target>Mark as exported</target>\n      </trans-unit>\n      <trans-unit id=\"p0IprAw\" resname=\"label.template\">\n        <source>label.template</source>\n        <target>Template</target>\n      </trans-unit>\n      <trans-unit id=\"zfIRxJh\" resname=\"label.due_days\">\n        <source>label.due_days</source>\n        <target>Payment term in days</target>\n      </trans-unit>\n      <trans-unit id=\"rAJrxSK\" resname=\"invoice.due_days\">\n        <source>invoice.due_days</source>\n        <target>Payment target</target>\n      </trans-unit>\n      <trans-unit id=\"Xij3oQl\" resname=\"invoice.payment_date\">\n        <source>invoice.payment_date</source>\n        <target>Payment date</target>\n      </trans-unit>\n      <trans-unit id=\"4XKFnWh\" resname=\"invoice.from\">\n        <source>invoice.from</source>\n        <target>From</target>\n      </trans-unit>\n      <trans-unit id=\"hx7vsMA\" resname=\"invoice.to\">\n        <source>invoice.to</source>\n        <target>To</target>\n      </trans-unit>\n      <trans-unit id=\"x_W5sV4\" resname=\"invoice.number\">\n        <source>invoice.number</source>\n        <target>Invoice number</target>\n      </trans-unit>\n      <trans-unit id=\"86KyrKO\" resname=\"invoice.subtotal\">\n        <source>invoice.subtotal</source>\n        <target>Subtotal</target>\n      </trans-unit>\n      <trans-unit id=\"EO57yXg\" resname=\"invoice.tax\">\n        <source>invoice.tax</source>\n        <target>Tax</target>\n      </trans-unit>\n      <trans-unit id=\"N68vyvo\" resname=\"invoice.total\">\n        <source>invoice.total</source>\n        <target>Total</target>\n      </trans-unit>\n      <trans-unit id=\"TPzFWUs\" resname=\"invoice.service_date\">\n        <source>invoice.service_date</source>\n        <target>Service date</target>\n      </trans-unit>\n      <trans-unit id=\"6x24VVR\" resname=\"label.amount\">\n        <source>label.amount</source>\n        <target>Quantity</target>\n      </trans-unit>\n      <trans-unit id=\"g7EpaPY\" resname=\"label.total_rate\">\n        <source>label.total_rate</source>\n        <target>Total price</target>\n      </trans-unit>\n      <trans-unit id=\"MF3MdTu\" resname=\"label.unit_price\">\n        <source>label.unit_price</source>\n        <target>Unit price</target>\n      </trans-unit>\n      <trans-unit id=\"77aZC3r\" resname=\"label.payment_terms\">\n        <source>label.payment_terms</source>\n        <target>Terms of payment</target>\n      </trans-unit>\n      <trans-unit id=\"9p2KQag\" resname=\"invoice.signature_user\">\n        <source>invoice.signature_user</source>\n        <target>Confirmation: Date / Consultant's name / Signature</target>\n      </trans-unit>\n      <trans-unit id=\"Q9ykNhO\" resname=\"invoice.signature_customer\">\n        <source>invoice.signature_customer</source>\n        <target>Confirmation: Date / Customer's name / Signature</target>\n      </trans-unit>\n      <trans-unit id=\"c3d6p33\" resname=\"invoice.total_working_time\">\n        <source>invoice.total_working_time</source>\n        <target>Total duration</target>\n      </trans-unit>\n      <trans-unit id=\"BS00SS7\" resname=\"label.orderNumber\">\n        <source>label.orderNumber</source>\n        <target>Order number</target>\n      </trans-unit>\n      <trans-unit id=\"as948k9\" resname=\"label.orderDate\">\n        <source>label.orderDate</source>\n        <target>Order date</target>\n      </trans-unit>\n      <trans-unit id=\"RRj6PYN\" resname=\"label.invoice_tax_number\">\n        <source>label.invoice_tax_number</source>\n        <target>VAT no.:</target>\n      </trans-unit>\n      <trans-unit id=\"uFZA7Uf\" resname=\"label.invoice_bank_account\">\n        <source>label.invoice_bank_account</source>\n        <target>Bank account</target>\n      </trans-unit>\n      <trans-unit id=\"9VxfLLy\" resname=\"label.decimalDuration\">\n        <source>label.decimalDuration</source>\n        <target>Display duration as decimal number</target>\n      </trans-unit>\n      <trans-unit id=\"hzhzbqw\" resname=\"label.status\">\n        <source>label.status</source>\n        <target>Status</target>\n      </trans-unit>\n      <trans-unit id=\"X_NRsed\" resname=\"status.new\">\n        <source>status.new</source>\n        <target>New</target>\n      </trans-unit>\n      <trans-unit id=\"Uvo1CbP\" resname=\"status.pending\">\n        <source>status.pending</source>\n        <target>Pending</target>\n      </trans-unit>\n      <trans-unit id=\"PHJwR4w\" resname=\"status.paid\">\n        <source>status.paid</source>\n        <target>Paid</target>\n      </trans-unit>\n      <trans-unit id=\"gT9W2pZ\" resname=\"status.canceled\">\n        <source>status.canceled</source>\n        <target>Canceled</target>\n      </trans-unit>\n      <trans-unit id=\"crrlEUA\" resname=\"preview.skipped_rows\">\n        <source>preview.skipped_rows</source>\n        <target>Skipped preview of %rows% more rows \u2026</target>\n      </trans-unit>\n      <!--\n              Export\n            -->\n      <trans-unit id=\"F6Jmro7\" resname=\"export.title\">\n        <source>export.title</source>\n        <target>Export</target>\n      </trans-unit>\n      <trans-unit id=\"iwWaUoa\" resname=\"export.filter\">\n        <source>export.filter</source>\n        <target>Filter data for export</target>\n      </trans-unit>\n      <trans-unit id=\"vjmoQGo\" resname=\"export.period\">\n        <source>export.period</source>\n        <target>Period</target>\n      </trans-unit>\n      <trans-unit id=\"3CQ7A2m\" resname=\"export.document_title\">\n        <source>export.document_title</source>\n        <target>Export of timesheets</target>\n      </trans-unit>\n      <trans-unit id=\"d5wyWRD\" resname=\"export.full_list\">\n        <source>export.full_list</source>\n        <target>Full list</target>\n      </trans-unit>\n      <trans-unit id=\"N778uJ6\" resname=\"export.summary\">\n        <source>export.summary</source>\n        <target>Summary</target>\n      </trans-unit>\n      <trans-unit id=\"ElDyzrx\" resname=\"export.page_of\">\n        <source>export.page_of</source>\n        <target>Page %page% of %pages%</target>\n      </trans-unit>\n      <trans-unit id=\"vKY0tof\" resname=\"export.date_copyright\">\n        <source>export.date_copyright</source>\n        <target>Created %date% with %kimai%</target>\n      </trans-unit>\n      <trans-unit id=\"W92QGbY\" resname=\"export.warn_result_amount\">\n        <source>export.warn_result_amount</source>\n        <target>Your search leads to %count% results. If the export fails, you have to narrow down your search further.</target>\n      </trans-unit>\n      <trans-unit id=\"pnGDFmf\" resname=\"label.type\">\n        <source>label.type</source>\n        <target>Type</target>\n      </trans-unit>\n      <!--\n             Navbar - recent entries and activities\n            -->\n      <trans-unit id=\"OxdYMR3\" resname=\"active.entries\">\n        <source>active.entries</source>\n        <target>Your active time measurements</target>\n      </trans-unit>\n      <trans-unit id=\"e7XS97t\" resname=\"timesheet.all\">\n        <source>timesheet.all</source>\n        <target>Show all records</target>\n      </trans-unit>\n      <trans-unit id=\"WVU_S.A\" resname=\"recent.activities\">\n        <source>recent.activities</source>\n        <target>Restart one of your last activities</target>\n      </trans-unit>\n      <trans-unit id=\"SLV47Uu\" resname=\"recent.activities.format\">\n        <source>recent.activities.format</source>\n        <target>%activity% in %project% for %customer%</target>\n      </trans-unit>\n      <trans-unit id=\"dTHY7Mw\" resname=\"timesheet.start\">\n        <source>timesheet.start</source>\n        <target>Create new time-record</target>\n      </trans-unit>\n      <!--\n              TOOLBARS\n            -->\n      <trans-unit id=\"MPimOps\" resname=\"label.pageSize\">\n        <source>label.pageSize</source>\n        <target>Page size</target>\n      </trans-unit>\n      <trans-unit id=\"KhyA_PW\" resname=\"label.entryState\">\n        <source>label.entryState</source>\n        <target>Records</target>\n      </trans-unit>\n      <trans-unit id=\"X3JM9wj\" resname=\"label.exported\">\n        <source>label.exported</source>\n        <target>Exported</target>\n      </trans-unit>\n      <trans-unit id=\"_DDecAV\" resname=\"entryState.exported\">\n        <source>entryState.exported</source>\n        <target>Cleared</target>\n      </trans-unit>\n      <trans-unit id=\"ccCiXyR\" resname=\"entryState.not_exported\">\n        <source>entryState.not_exported</source>\n        <target>Open</target>\n      </trans-unit>\n      <trans-unit id=\"do7fP0q\" resname=\"entryState.all\">\n        <source>entryState.all</source>\n        <target>All</target>\n      </trans-unit>\n      <trans-unit id=\"xm7mqoK\" resname=\"entryState.running\">\n        <source>entryState.running</source>\n        <target>Active</target>\n      </trans-unit>\n      <trans-unit id=\"spHpd_I\" resname=\"entryState.stopped\">\n        <source>entryState.stopped</source>\n        <target>Stopped</target>\n      </trans-unit>\n      <trans-unit id=\"BhsaLxX\" resname=\"export.clear_all\">\n        <source>export.clear_all</source>\n        <target>Mark all shown records as open?</target>\n      </trans-unit>\n      <trans-unit id=\"qtjPKUT\" resname=\"export.mark_all\">\n        <source>export.mark_all</source>\n        <target>Mark all shown records as cleared?</target>\n      </trans-unit>\n      <trans-unit id=\"keE.KO.\" resname=\"Only global\">\n        <source>Only global</source>\n        <target state=\"needs-translation\">Only global</target>\n      </trans-unit>\n      <trans-unit id=\"2Ek7sXu\" resname=\"label.batch_meta_fields\">\n        <source>label.batch_meta_fields</source>\n        <target>Additional fields</target>\n      </trans-unit>\n      <trans-unit id=\"9Wt8Pp_\" resname=\"help.batch_meta_fields\">\n        <source>help.batch_meta_fields</source>\n        <target>Fields that are to be updated must first be activated by clicking on the associated checkbox.</target>\n      </trans-unit>\n      <trans-unit id=\"z_YHoZn\" resname=\"label.includeNoWork\">\n        <source>label.includeNoWork</source>\n        <target>Show entries without bookings</target>\n      </trans-unit>\n      <trans-unit id=\"B.Dbbob\" resname=\"label.includeNoBudget\">\n        <source>label.includeNoBudget</source>\n        <target>Show entries without budget</target>\n      </trans-unit>\n      <trans-unit id=\"Wq.h4nD\" resname=\"label.includeBudgetType_month\">\n        <source>label.includeBudgetType_month</source>\n        <target>Show entries with \"monthly\" budget</target>\n      </trans-unit>\n      <trans-unit id=\"nVulc7.\" resname=\"label.includeBudgetType_full\">\n        <source>label.includeBudgetType_full</source>\n        <target>Show entries with \"life cycle\" budget</target>\n      </trans-unit>\n      <trans-unit id=\"3zn5T5e\" resname=\"label.not_exported\">\n        <source>label.not_exported</source>\n        <target>Not exported</target>\n      </trans-unit>\n      <trans-unit id=\"csF1D35\" resname=\"label.not_invoiced\">\n        <source>label.not_invoiced</source>\n        <target>Not billed</target>\n      </trans-unit>\n      <trans-unit id=\"AJ6dwR.\" resname=\"label.last_record_before\">\n        <source>label.last_record_before</source>\n        <target>No time booking since</target>\n      </trans-unit>\n      <trans-unit id=\"qDnURk7\" resname=\"label.last_record\">\n        <source>label.last_record</source>\n        <target>Last entry</target>\n      </trans-unit>\n      <trans-unit id=\"LXdqaTH\" resname=\"label.account_number\">\n        <source>label.account_number</source>\n        <target>Staff number</target>\n      </trans-unit>\n      <trans-unit id=\"PoF7hD8\" resname=\"label.budgetType\">\n        <source>label.budgetType</source>\n        <target>Budget-Type</target>\n      </trans-unit>\n      <trans-unit id=\"cHfLJtL\" resname=\"label.budgetType_month\">\n        <source>label.budgetType_month</source>\n        <target>Monthly</target>\n      </trans-unit>\n      <trans-unit id=\"9Rhadz6\" resname=\"label.budgetType_full\">\n        <source>label.budgetType_full</source>\n        <target>Life cycle</target>\n      </trans-unit>\n      <trans-unit id=\"tvV0NhL\" resname=\"delete_warning.short_stats\">\n        <source>delete_warning.short_stats</source>\n        <target>Currently %records% time-records exists, which sum up to a total duration of %duration%.</target>\n      </trans-unit>\n      <trans-unit id=\"Zif614Q\" resname=\"add_user.label\">\n        <source>add_user.label</source>\n        <target>Add user</target>\n      </trans-unit>\n      <trans-unit id=\"tp.gIrE\" resname=\"team.add_user.help\">\n        <source>team.add_user.help</source>\n        <target>Add a new user to the team by selecting it from the list. Afterwards you can decide if the user should become a teamlead.</target>\n      </trans-unit>\n      <trans-unit id=\"yNWIi5U\" resname=\"default_value_new\">\n        <source>default_value_new</source>\n        <target>Default values for new entries</target>\n      </trans-unit>\n      <!--\n          QUICK ENTRIES\n      -->\n      <trans-unit id=\"f8oNzSP\" resname=\"quick_entry.title\">\n        <source>quick_entry.title</source>\n        <target>Weekly working hours</target>\n      </trans-unit>\n      <trans-unit id=\"61p_ckr\" resname=\"label.hours_24\">\n        <source>label.hours_24</source>\n        <target>24 hours</target>\n      </trans-unit>\n    </body>\n  </file>\n</xliff>\n"], "filenames": ["src/Constants.php", "src/Controller/ProjectController.php", "src/Controller/TeamController.php", "src/Controller/TimesheetAbstractController.php", "src/Controller/TimesheetController.php", "src/Controller/TimesheetTeamController.php", "src/EventSubscriber/Actions/AbstractTimesheetSubscriber.php", "src/EventSubscriber/Actions/ProjectSubscriber.php", "src/EventSubscriber/Actions/TeamSubscriber.php", "src/Migrations/Version20180701120000.php", "src/Migrations/Version20180715160326.php", "src/Migrations/Version20180730044139.php", "src/Migrations/Version20180924111853.php", "src/Migrations/Version20181031220003.php", "src/Migrations/Version20190305152308.php", "src/Migrations/Version20210802152814.php", "src/Migrations/Version20211008092010.php", "templates/form/kimai-theme.html.twig", "templates/project/actions.html.twig", "templates/team/actions.html.twig", "templates/timesheet-team/actions.html.twig", "templates/timesheet/actions.html.twig", "tests/Controller/ControllerBaseTest.php", "tests/Controller/DoctorControllerTest.php", "tests/Controller/ProjectControllerTest.php", "tests/Controller/TeamControllerTest.php", "tests/Controller/TimesheetControllerTest.php", "tests/Controller/TimesheetTeamControllerTest.php", "translations/about.ja.xlf", "translations/flashmessages.el.xlf", "translations/flashmessages.fr.xlf", "translations/flashmessages.he.xlf", "translations/flashmessages.pt.xlf", "translations/flashmessages.pt_BR.xlf", "translations/flashmessages.tr.xlf", "translations/messages.de.xlf", "translations/messages.en.xlf"], "buggy_code_start_loc": [20, 424, 24, 214, 23, 30, 42, 76, 37, 25, 40, 36, 26, 25, 28, 47, 31, 161, 9, 9, 9, 9, 427, 36, 219, 209, 711, 431, 1, 1, 56, 56, 56, 56, 56, 794, 794], "buggy_code_end_loc": [25, 429, 89, 616, 106, 201, 43, 77, 38, 45, 94, 55, 37, 65, 51, 48, 31, 165, 10, 10, 10, 10, 427, 36, 226, 215, 732, 452, 32, 56, 56, 56, 56, 56, 56, 794, 794], "fixing_code_start_loc": [20, 424, 25, 214, 24, 31, 42, 76, 37, 25, 39, 36, 26, 24, 28, 47, 32, 161, 9, 9, 9, 9, 428, 37, 219, 209, 711, 431, 1, 1, 57, 57, 57, 57, 57, 795, 795], "fixing_code_end_loc": [25, 440, 99, 616, 116, 211, 43, 77, 38, 37, 90, 48, 33, 55, 40, 48, 34, 163, 10, 10, 10, 10, 438, 44, 248, 225, 764, 484, 32, 61, 61, 61, 61, 61, 61, 799, 799], "type": "CWE-352", "message": "kimai2 is vulnerable to Cross-Site Request Forgery (CSRF)", "other": {"cve": {"id": "CVE-2021-3976", "sourceIdentifier": "security@huntr.dev", "published": "2021-11-19T11:15:07.880", "lastModified": "2021-11-23T17:25:49.577", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "kimai2 is vulnerable to Cross-Site Request Forgery (CSRF)"}, {"lang": "es", "value": "kimai2 es vulnerable a un ataque de tipo Cross-Site Request Forgery (CSRF)"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:H/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "HIGH", "availabilityImpact": "NONE", "baseScore": 6.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 3.6}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 4.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 1.4}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-352"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:kimai:kimai_2:*:*:*:*:*:*:*:*", "versionEndExcluding": "1.16.2", "matchCriteriaId": "18DE946F-C2DA-4605-B44E-49B5DC42961C"}]}]}], "references": [{"url": "https://github.com/kevinpapst/kimai2/commit/b28e9c120c87222e21a238f1b03a609d6a5d506e", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/0567048a-118c-42ec-9f94-b55533017406", "source": "security@huntr.dev", "tags": ["Exploit", "Issue Tracking", "Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/kevinpapst/kimai2/commit/b28e9c120c87222e21a238f1b03a609d6a5d506e"}}