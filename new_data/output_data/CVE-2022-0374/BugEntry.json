{"buggy_code": ["<?php \n\n$lastOperatorChanged = false;\n$lastOperatorId = false;\n\nforeach ($messages as $msg ) : if ($msg->user_id > -1 || $msg->user_id == -2) : \n\nif ($lastOperatorId !== false && $lastOperatorId != $msg->user_id) {\n    $lastOperatorChanged = true;\n} else {\n    $lastOperatorChanged = false;\n}\n\n$lastOperatorId = $msg->user_id;\n\nif ($msg->meta_msg != '') {\n    $metaMessageData = json_decode($msg->meta_msg, true); $messageId = $msg->id;\n} else if (isset($metaMessageData)) {\n    unset($metaMessageData);\n}\n\n?>\n<div class=\"message-row<?php echo $msg->user_id == 0 ? ' response' : ' message-admin'.($lastOperatorChanged == true ? ' operator-changes' : '')?>\" id=\"msg-<?php echo $msg->id?>\"><div class=\"msg-date\"><?php echo date(erLhcoreClassModule::$dateDateHourFormat,$msg->time);?></div><span class=\"usr-tit<?php echo $msg->user_id == 0 ? ' vis-tit' : ' op-tit'?>\"><?php echo $msg->user_id == 0 ? htmlspecialchars($chat->nick) : htmlspecialchars($msg->name_support) ?>:&nbsp;</span>\n\n    <?php $msgBody = $msg->msg; $paramsMessageRender = array('sender' => $msg->user_id);?>\n    <?php include(erLhcoreClassDesign::designtpl('lhchat/lists/msg_body.tpl.php'));?>\n\n    <?php if (isset($metaMessageData)) : ?>\n        <?php include(erLhcoreClassDesign::designtpl('lhgenericbot/message/meta_render.tpl.php'));?>\n    <?php endif; ?>\n</div>\n<?php endif; endforeach; ?>", "<?php \n\n$lastOperatorChanged = false;\n$lastOperatorId = false;\n$lastOperatorNick = '';\n\nforeach ($messages as $msg) : \n\nif ($lastOperatorId !== false && ($lastOperatorId != $msg->user_id || $lastOperatorNick != $msg->name_support)) {\n    $lastOperatorChanged = true;\n    $lastOperatorNick = $msg->name_support;\n} else {\n    $lastOperatorChanged = false;\n}\n\n$lastOperatorId = $msg->user_id;\n\n    if ($msg->meta_msg != '') {\n        $metaMessageData = json_decode($msg->meta_msg, true); $messageId = $msg->id;\n    } else if (isset($metaMessageData)) {\n        unset($metaMessageData);\n    }\n\n?>\n<?php if ($msg->user_id == -1) : ?>\n\t<div class=\"message-row system-response\" id=\"msg-<?php echo $msg->id?>\"><div class=\"msg-date\"><?php echo date(erLhcoreClassModule::$dateDateHourFormat,$msg->time);?></div><i><span class=\"usr-tit sys-tit\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmin','System assistant')?></span><?php echo erLhcoreClassBBCode::make_clickable(htmlspecialchars($msg->msg))?></i></div>\n<?php else : ?>\n    <?php if ($msg->msg != '' ||\n        isset($metaMessageData['content']['text_conditional']) ||\n        isset($metaMessageData['content']['chat_operation']) ||\n        isset($metaMessageData['content']['html']['content']) ||\n        isset($metaMessageData['content']['button_message'])\n    ) : ?>\n        <div class=\"message-row<?php echo $msg->user_id == 0 ? ' response' : ' message-admin'.($lastOperatorChanged == true ? ' operator-changes' : '')?>\" id=\"msg-<?php echo $msg->id?>\"><div class=\"msg-date\"><?php echo date(erLhcoreClassModule::$dateDateHourFormat,$msg->time);?></div><span class=\"usr-tit<?php echo $msg->user_id == 0 ? ' vis-tit' : ' op-tit'?>\"><?php if ($msg->user_id == 0) : ?><i class=\"material-icons\"><?php echo ($chat->device_type == 0 ? 'computer' : ($chat->device_type == 1 ? 'smartphone' : 'tablet'))?></i><?php endif;?><?php echo $msg->user_id == 0 ? htmlspecialchars($chat->nick) : htmlspecialchars($msg->name_support) ?></span>\n            <?php $msgBody = $msg->msg; $paramsMessageRender = array('sender' => $msg->user_id, 'html_as_text' => true);?>\n            <?php include(erLhcoreClassDesign::designtpl('lhchat/lists/msg_body.tpl.php'));?>\n\n            <?php if (isset($metaMessageData)) : ?>\n                <?php include(erLhcoreClassDesign::designtpl('lhgenericbot/message/meta_render_admin.tpl.php'));?>\n            <?php endif; ?>\n            \n        </div>\n    <?php endif;?>\n<?php endif;?>\n<?php endforeach;?>", "<?php foreach ($messages as $msg ) : ?><?php if (!isset($remove_meta) || $remove_meta == false ) :?>[<?php echo date(erLhcoreClassModule::$dateDateHourFormat,$msg->time);?>] [<?php echo $msg->user_id == 0 ? htmlspecialchars($chat->nick) : htmlspecialchars($msg->name_support) ?>] <?php endif;?><?php echo erLhcoreClassBBCodePlain::make_clickable($msg->msg, array('sender' => $msg->user_id)),\"\\n\"?><?php endforeach; ?>", "<h1><?php echo htmlspecialchars($form)?></h1>\r\n\r\n<div class=\"row pb-2\">\r\n\t<div class=\"col-6\"><a href=\"<?php echo erLhcoreClassDesign::baseurl('form/downloadcollected')?>/<?php echo $form->id?>\" class=\"btn btn-secondary\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Download XLS');?></a></div>\r\n\t<div class=\"col-6\">\r\n\t\r\n\t<div class=\"input-group\">\r\n        <div class=\"input-group-prepend\"><span class=\"input-group-text\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','URL');?></span></div>\r\n      <input type=\"text\" class=\"form-control\" value=\"<?php echo erLhcoreClassXMP::getBaseHost(). $_SERVER['HTTP_HOST']?><?php echo erLhcoreClassDesign::baseurldirect('form/fill')?>/<?php echo $form->id?>\">\r\n    </div>\r\n    \r\n\t</div>\r\n</div>\r\n\r\n<table class=\"table\" cellpadding=\"0\" cellspacing=\"0\">\r\n<thead>\r\n<tr>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Name');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Identifier');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Chat');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Intro');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Time');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','IP');?></th>\r\n    <th width=\"1%\">&nbsp;</th>\r\n    <th width=\"1%\">&nbsp;</th>\r\n</tr>\r\n</thead>\r\n<?php foreach ($items as $item) : ?>\r\n    <tr>\r\n    \t<td><?php echo htmlspecialchars($item->getAttrValue($form->name_attr))?></td>\r\n    \t<td>\r\n    \t<div class=\"page-url\"><span><?php echo htmlspecialchars($item->identifier)?></span></div>\r\n    \t</td>\r\n        <td>\r\n    \t<?php if ($item->chat_id > 0) : ?>\r\n            <a class=\"material-icons\" onclick=\"lhc.previewChat(<?php echo $item->chat_id?>)\">info_outline</a>\r\n        <?php else : ?>\r\n            <i class=\"material-icons\">remove_circle_outline</i>\r\n        <?php endif; ?>\r\n    \t</td>\r\n        <td><?php echo $form->intro_attr != '' ? htmlspecialchars($item->getAttrValue($form->intro_attr)) : ''?></td>\r\n        <td><?php echo $item->ctime_front?></td>\r\n        <td><?php echo htmlspecialchars($item->ip)?></td>\r\n        <td nowrap>\r\n\t        <div style=\"width:140px\">\r\n\t        \r\n\t        \t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\r\n\t            \t<a class=\"btn btn-secondary btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/viewcollected')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','View');?></a>\r\n\t            \t<a class=\"btn btn-secondary btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/downloaditem')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Download');?></a>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t        </div>\r\n        </td>\r\n        <td nowrap><a onclick=\"return confirm('<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('kernel/message','Are you sure?');?>')\" class=\"csfr-required btn btn-danger btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/collected')?>/<?php echo $form->id?>/(action)/delete/(id)/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Delete');?></a></td>\r\n    </tr>\r\n<?php endforeach; ?>\r\n</table>\r\n\r\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/secure_links.tpl.php')); ?>\r\n\r\n<?php if (isset($pages)) : ?>\r\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/paginator.tpl.php')); ?>\r\n<?php endif;?>", "<?php if ($theme->header_css != '') {\n    echo $theme->header_css;\n} ?>\n\n<?php if (isset($cssAttributes['main_background_color']) || isset($cssAttributes['default_tc'])) : ?>\nbody, #page-content-wrapper {\n    <?php if (isset($cssAttributes['main_background_color'])) : ?>background-color:#<?php echo $cssAttributes['main_background_color']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['default_tc'])) : ?>color:#<?php echo $cssAttributes['default_tc']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['link_tc'])) : ?>\na {\n    color:#<?php echo $cssAttributes['link_tc']?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['panel_background_color']) || isset($cssAttributes['panel_border_color'])) : ?>\n.card>.card-header{\n    <?php if (isset($cssAttributes['panel_background_color'])) : ?>background-color:#<?php echo $cssAttributes['panel_background_color']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['panel_border_color'])) : ?>border-color:#<?php echo $cssAttributes['panel_border_color']?>;<?php endif;?>\n}\n\n.card{\n    <?php if (isset($cssAttributes['panel_border_color'])) : ?>border-color:#<?php echo $cssAttributes['panel_border_color']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['panel_mbc'])) : ?>\n.card {\n    background-color:#<?php echo $cssAttributes['panel_mbc'];?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['mactive_bc']) || isset($cssAttributes['mactive_bc'])) : ?>\n.nav>li>a.nav-link:focus, .nav>li>a.nav-link:hover,.sidebar li.active > a.nav-link{\n    background-color:#<?php echo $cssAttributes['mactive_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['men_col'])) : ?>\n.sidebar .nav-second-level li a,.sidebar ul li a.nav-link {\n    color:#<?php echo $cssAttributes['men_col']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['tab_bc'])) : ?>\n.nav-pills>li>a.nav-link.active, .nav-pills>li>a.nav-link.active:focus, .nav-pills>li>a.nav-link.active:hover,\n.nav-pills>li>a.nav-link:hover,\n.nav-tabs>li>a.nav-link.active, .nav-tabs>li>a.nav-link.active:focus, .nav-tabs>li>a.nav-link.active:hover,.nav-tabs>li>a.nav-link:hover {\n    background-color:#<?php echo $cssAttributes['tab_bc'];?>\n}\n.navbar-default .navbar-nav>.open>a, .navbar-default .navbar-nav>.open>a:focus, .navbar-default .navbar-nav>.open>a:hover{\n    background-color:#<?php echo $cssAttributes['tab_bc']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_boc'])) : ?>\n.nav-pills>li>a,\n.nav-tabs>li>a.active, .nav-tabs>li>a.active:focus, .nav-tabs>li>a.active:hover{\n    border-color:#<?php echo $cssAttributes['tab_boc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_tc'])) : ?>\n.nav-pills>li>a,\n.nav-tabs>li>a{\n    color:#<?php echo $cssAttributes['tab_tc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_atc'])) : ?>\n.nav-pills>li>a.active, .nav-pills>li>a.active:focus, .nav-pills>li>a.active:hover,\n.nav-tabs>li>a.active, .nav-tabs>li>a.active:focus, .nav-tabs>li>a.active:hover{\n    color:#<?php echo $cssAttributes['tab_atc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['drpdown_bgc']) || isset($cssAttributes['drpdown_boc'])) : ?>\n.dropdown-menu {\n    <?php if (isset($cssAttributes['drpdown_bgc'])) : ?>background-color:#<?php echo $cssAttributes['drpdown_bgc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['drpdown_boc'])) : ?>border-color:#<?php echo $cssAttributes['drpdown_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['drpdown_hbgc'])) : ?>\n.dropdown-menu > a.dropdown-item:focus, .dropdown-menu>a.dropdown-item:hover{\n    background-color:#<?php echo $cssAttributes['drpdown_hbgc']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['nvbar_bc']) || isset($cssAttributes['nvbar_pbc'])) : ?>\n.navbar-light{\n    <?php if (isset($cssAttributes['nvbar_bc'])) : ?>background-color:#<?php echo $cssAttributes['nvbar_bc']?>!important;<?php endif;?>\n    <?php if (isset($cssAttributes['nvbar_pbc'])) : ?>border-color:#<?php echo $cssAttributes['nvbar_pbc']?>!important;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['bcrumb_bgc']) || isset($cssAttributes['bcrumb_boc'])) : ?>\n.breadcrumb{\n    <?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>background-color: #<?php echo $cssAttributes['bcrumb_bgc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['bcrumb_boc'])) : ?>border-bottom: 1px solid #<?php echo $cssAttributes['bcrumb_boc']?>!important;<?php endif;?>\n}\n\n<?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>\n.navbar-lhc-right {\n   <?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>background-color: #<?php echo $cssAttributes['bcrumb_bgc']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php endif;?>\n\n<?php if (isset($cssAttributes['chat_onl_bc']) || isset($cssAttributes['chat_onl_bc'])) : ?>\n.user-online-row td {\n    background-color:#<?php echo $cssAttributes['chat_onl_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['tbl_boc'])) : ?>\n.table>thead>tr>th{\n    border-bottom: 2px solid #<?php echo $cssAttributes['tbl_boc']?>;\n}\n.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {\n    border-top: 1px solid #<?php echo $cssAttributes['tbl_boc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_tgl_bgc'])) : ?>\n.navbar-light .navbar-toggler:focus, .navbar .navbar-toggler:hover {\n    background-color: #<?php echo $cssAttributes['nvb_tgl_bgc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_tgl_bc'])) : ?>\n.navbar-light .navbar-toggler{\n    border-color: #<?php echo $cssAttributes['nvb_tgl_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_li_clr'])) : ?>\n.navbar-light .navbar-nav>li>a.nav-link{\n    color: #<?php echo $cssAttributes['nvb_li_clr']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['nvb_lih_clr'])) : ?>\n.navbar-light .navbar-nav>li>a.nav-link:focus, .navbar-light .navbar-nav>li>a.nav-link:hover, .navbar-default .navbar-nav>li>a.nav-link:hover{\n    color: #<?php echo $cssAttributes['nvb_lih_clr']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnd_clr']) || isset($cssAttributes['btnd_bc']) || isset($cssAttributes['btnd_boc'])) : ?>\n.btn-secondary {\n    <?php if (isset($cssAttributes['btnd_clr'])) : ?>color: #<?php echo $cssAttributes['btnd_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnd_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnd_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnd_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnd_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnda_clr']) || isset($cssAttributes['btnda_bc']) || isset($cssAttributes['btnda_boc'])) : ?>\n.btn-secondary:hover,.btn-secondary.active.focus,.btn-secondary.active:focus,.btn-secondary.active:hover,.btn-secondary:active.focus,.btn-secondary:active:focus,.btn-secondary:active:hover{\n    <?php if (isset($cssAttributes['btnda_clr'])) : ?>color: #<?php echo $cssAttributes['btnda_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnda_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnda_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnda_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnda_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnp_clr']) || isset($cssAttributes['btnp_bc']) || isset($cssAttributes['btnp_boc'])) : ?>\n.btn-primary {\n    <?php if (isset($cssAttributes['btnp_clr'])) : ?>color: #<?php echo $cssAttributes['btnp_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnp_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnp_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnp_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnp_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnpa_clr']) || isset($cssAttributes['btnpa_bc']) || isset($cssAttributes['btnpa_boc'])) : ?>\n.btn-primary:hover,.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover{\n    <?php if (isset($cssAttributes['btnpa_clr'])) : ?>color: #<?php echo $cssAttributes['btnpa_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnpa_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnpa_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnpa_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnpa_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_background']) || isset($cssAttributes['buble_operator_text_color'])) : ?>\n    div.message-admin div.msg-body{\n        <?php if (isset($cssAttributes['buble_operator_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_operator_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_operator_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_operator_text_color'];?>;<?php endif; ?>\n    }\n\n    <?php if (isset($cssAttributes['buble_operator_text_color'])) : ?>\n    div.message-admin div.msg-body a.link{\n        color: #<?php echo $cssAttributes['buble_operator_text_color'];?>;\n    }\n    <?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_other_background']) || isset($cssAttributes['buble_operator_other_text_color'])) : ?>\ndiv.other-operator div.msg-body{\n    <?php if (isset($cssAttributes['buble_operator_other_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_operator_other_background'];?>;<?php endif;?>\n    <?php if (isset($cssAttributes['buble_operator_other_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_operator_other_text_color'];?>;<?php endif; ?>\n}\n\n<?php if (isset($cssAttributes['buble_operator_other_text_color'])) : ?>\ndiv.other-operator div.msg-body a.link{\n    color: #<?php echo $cssAttributes['buble_operator_other_text_color'];?>;\n}\n<?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_title_color'])) : ?>\n    .op-tit{\n        color: #<?php echo $cssAttributes['buble_operator_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_other_title_color'])) : ?>\n    div.other-operator .op-tit{\n        color: #<?php echo $cssAttributes['buble_operator_other_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_visitor_text_color']) || isset($cssAttributes['buble_visitor_background'])) : ?>\n    div.message-row.response div.msg-body{\n        <?php if (isset($cssAttributes['buble_visitor_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_visitor_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_visitor_text_color'];?>;<?php endif; ?>\n    }\n\n    <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>\n    div.message-row.response div.msg-body a.link{\n        <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_visitor_text_color'];?>;<?php endif; ?>\n    }\n    <?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_visitor_title_color'])) : ?>\n    .vis-tit{\n        color: #<?php echo $cssAttributes['buble_visitor_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['chat_bg'])) : ?>\n    .msgBlock-admin{\n        background-color: #<?php echo $cssAttributes['chat_bg'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['time_color'])) : ?>\n    .msg-date{\n        color: #<?php echo $cssAttributes['time_color'];?>\n    }\n<?php endif; ?>\n\n\n<?php if (isset($cssAttributes['buble_sys_background']) || isset($cssAttributes['buble_sys_title_color']) ) : ?>\n    .sys-tit{\n        <?php if (isset($cssAttributes['buble_sys_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_sys_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_sys_title_color'])) : ?>color: #<?php echo $cssAttributes['buble_sys_title_color'];?>;<?php endif; ?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_sys_text_color'])) : ?>\ndiv.system-response div.msg-body,\ndiv.system-response div.msg-body a.link{\n    color: #<?php echo $cssAttributes['buble_sys_text_color'];?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['newm_color']) && !empty($cssAttributes['newm_color'])) : ?>\n    .new-msg-holder{\n        border-color: #<?php echo $cssAttributes['newm_color'];?>!important;\n    }\n    .new-msg-holder > span.new-msg{\n        background-color: #<?php echo $cssAttributes['newm_color'];?>!important;\n    }\n<?php endif; ?>\n\n<?php /*\n<div class=\"msgBlock\" style=\"\" id=\"messagesBlock\">\n    <div class=\"message-row response\" id=\"msg-10459\" data-op-id=\"0\">\n        <div class=\"msg-date\">10:14:39</div>\n        <span style=\"color:#{{bactract_bg_color_buble_visitor_title_color}}\" class=\"usr-tit vis-tit\" role=\"button\"><i class=\"material-icons chat-operators mi-fs15 mr-0\">account_box</i>Operator</span>\n        <div class=\"msg-body\" style=\"background-color: #{{bactract_bg_color_buble_visitor_background}};color:#{{bactract_bg_color_buble_visitor_text_color}}\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>\n    </div>\n    <div class=\"message-row message-admin operator-changes\" id=\"msg-10463\" data-op-id=\"1\">\n        <div class=\"msg-date\">10:18:22</div>\n        <span style=\"color:#{{bactract_bg_color_buble_operator_title_color}}\" class=\"usr-tit op-tit\" ><i class=\"material-icons chat-operators mi-fs15 mr-0\">face</i>Visitor</span>\n        <div class=\"msg-body\" style=\"color:#{{bactract_bg_color_buble_operator_text_color}};background-color: #{{bactract_bg_color_buble_operator_background}};\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>\n    </div>\n</div>*/", "<div class=\"row\">\n    <div class=\"col-10\"><h1><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('admintheme/form','Edit theme');?> - <?php echo htmlspecialchars($form->name)?></h1></div>\n    <?php /*?><div class=\"col-2\">\n        <a class=\"btn btn-secondary\" href=\"?export=1\"><i class=\"material-icons mr-0\">file_download</i></a>\n    </div>*/ ?>\n</div>\n\n<form action=\"<?php echo erLhcoreClassDesign::baseurl('theme/adminthemeedit')?>/<?php echo $form->id?>\" method=\"post\" autocomplete=\"off\" enctype=\"multipart/form-data\">\n\n    <?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('admintheme/form','Updated'); ?>\n\t\t\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n\t<?php endif; ?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhtheme/admin/form.tpl.php'));?>\n\n\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"SaveAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"UpdateAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Update');?>\"/>\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"CancelAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n    </div>\n\n</form>"], "fixing_code": ["<?php\n$lastOperatorChanged = false;\n$lastOperatorId = false;\n$lastOperatorNick = '';\n\n$messagesStats = array(\n    'total_messages' => count($messages),\n    'counter_messages' => 0,\n);\n\nforeach ($messages as $msg) :\n    $msg = $msg->getState();\n    $messagesStats['counter_messages']++;\n\n    if ($lastOperatorId !== false && ($lastOperatorId != $msg['user_id'] || $msg['name_support'] != $lastOperatorNick)) {\n        $lastOperatorChanged = true;\n        $lastOperatorNick = $msg['name_support'];\n    } else {\n        $lastOperatorChanged = false;\n    }\n\n    $lastOperatorId = $msg['user_id'];\n    $lastOperatorNick = $msg['name_support'];\n\n\n    ?>\n    <?php include(erLhcoreClassDesign::designtpl('lhchat/lists/user_msg_row.tpl.php'));?>\n<?php endforeach; ?>\n\n", "<?php\n$messagesDefault = [];\nforeach ($messages as $msg) {\n    $messagesDefault[] = $msg->getState();\n}\n$messages = $messagesDefault;\n?>\n<?php include(erLhcoreClassDesign::designtpl('lhchat/syncadmin.tpl.php'));?>", "<?php foreach ($messages as $msg ) :\n\n    if (isset($msg->meta_msg) && $msg->meta_msg != '') {\n        $metaMessageData = json_decode($msg->meta_msg, true); $messageId = isset($triggerMessageId) ? $triggerMessageId : $msg->id;\n    } else if (isset($metaMessageData)) {\n        unset($metaMessageData);\n    }\n\n    if (isset($metaMessageData['content']['whisper']) || empty($msg->msg)) {\n        continue;\n    }\n\n    ?><?php if (!isset($remove_meta) || $remove_meta == false ) :?>[<?php echo date(erLhcoreClassModule::$dateDateHourFormat,$msg->time);?>] [<?php echo $msg->user_id == 0 ? htmlspecialchars($chat->nick) : htmlspecialchars($msg->name_support) ?>] <?php endif;?><?php echo erLhcoreClassBBCodePlain::make_clickable($msg->msg, array('sender' => $msg->user_id)),\"\\n\"?><?php endforeach; ?>", "<h1 ng-non-bindable><?php echo htmlspecialchars($form)?></h1>\r\n\r\n<div class=\"row pb-2\">\r\n\t<div class=\"col-6\"><a href=\"<?php echo erLhcoreClassDesign::baseurl('form/downloadcollected')?>/<?php echo $form->id?>\" class=\"btn btn-secondary\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Download XLS');?></a></div>\r\n\t<div class=\"col-6\">\r\n\t\r\n\t<div class=\"input-group\">\r\n        <div class=\"input-group-prepend\"><span class=\"input-group-text\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','URL');?></span></div>\r\n      <input type=\"text\" class=\"form-control\" value=\"<?php echo erLhcoreClassXMP::getBaseHost(). $_SERVER['HTTP_HOST']?><?php echo erLhcoreClassDesign::baseurldirect('form/fill')?>/<?php echo $form->id?>\">\r\n    </div>\r\n    \r\n\t</div>\r\n</div>\r\n\r\n<table class=\"table\" cellpadding=\"0\" cellspacing=\"0\" ng-non-bindable>\r\n<thead>\r\n<tr>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Name');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Identifier');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Chat');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Intro');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Time');?></th>\r\n    <th><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','IP');?></th>\r\n    <th width=\"1%\">&nbsp;</th>\r\n    <th width=\"1%\">&nbsp;</th>\r\n</tr>\r\n</thead>\r\n<?php foreach ($items as $item) : ?>\r\n    <tr>\r\n    \t<td><?php echo htmlspecialchars($item->getAttrValue($form->name_attr))?></td>\r\n    \t<td>\r\n    \t<div class=\"page-url\"><span><?php echo htmlspecialchars($item->identifier)?></span></div>\r\n    \t</td>\r\n        <td>\r\n    \t<?php if ($item->chat_id > 0) : ?>\r\n            <a class=\"material-icons\" onclick=\"lhc.previewChat(<?php echo $item->chat_id?>)\">info_outline</a>\r\n        <?php else : ?>\r\n            <i class=\"material-icons\">remove_circle_outline</i>\r\n        <?php endif; ?>\r\n    \t</td>\r\n        <td><?php echo $form->intro_attr != '' ? htmlspecialchars($item->getAttrValue($form->intro_attr)) : ''?></td>\r\n        <td><?php echo $item->ctime_front?></td>\r\n        <td><?php echo htmlspecialchars($item->ip)?></td>\r\n        <td nowrap>\r\n\t        <div style=\"width:140px\">\r\n\t        \r\n\t        \t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\r\n\t            \t<a class=\"btn btn-secondary btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/viewcollected')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','View');?></a>\r\n\t            \t<a class=\"btn btn-secondary btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/downloaditem')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Download');?></a>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t        </div>\r\n        </td>\r\n        <td nowrap><a onclick=\"return confirm('<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('kernel/message','Are you sure?');?>')\" class=\"csfr-required btn btn-danger btn-xs\" href=\"<?php echo erLhcoreClassDesign::baseurl('form/collected')?>/<?php echo $form->id?>/(action)/delete/(id)/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('form/collected','Delete');?></a></td>\r\n    </tr>\r\n<?php endforeach; ?>\r\n</table>\r\n\r\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/secure_links.tpl.php')); ?>\r\n\r\n<?php if (isset($pages)) : ?>\r\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/paginator.tpl.php')); ?>\r\n<?php endif;?>", "<?php if ($theme->header_css != '') {\n    echo $theme->header_css;\n} ?>\n\n<?php if (isset($cssAttributes['main_background_color']) || isset($cssAttributes['default_tc'])) : ?>\nbody, #page-content-wrapper {\n    <?php if (isset($cssAttributes['main_background_color'])) : ?>background-color:#<?php echo $cssAttributes['main_background_color']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['default_tc'])) : ?>color:#<?php echo $cssAttributes['default_tc']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['link_tc'])) : ?>\na {\n    color:#<?php echo $cssAttributes['link_tc']?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['panel_background_color']) || isset($cssAttributes['panel_border_color'])) : ?>\n.card>.card-header{\n    <?php if (isset($cssAttributes['panel_background_color'])) : ?>background-color:#<?php echo $cssAttributes['panel_background_color']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['panel_border_color'])) : ?>border-color:#<?php echo $cssAttributes['panel_border_color']?>;<?php endif;?>\n}\n\n.card{\n    <?php if (isset($cssAttributes['panel_border_color'])) : ?>border-color:#<?php echo $cssAttributes['panel_border_color']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['panel_mbc'])) : ?>\n.card {\n    background-color:#<?php echo $cssAttributes['panel_mbc'];?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['mactive_bc']) || isset($cssAttributes['mactive_bc'])) : ?>\n.nav>li>a.nav-link:focus, .nav>li>a.nav-link:hover,.sidebar li.active > a.nav-link{\n    background-color:#<?php echo $cssAttributes['mactive_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['men_col'])) : ?>\n.sidebar .nav-second-level li a,.sidebar ul li a.nav-link {\n    color:#<?php echo $cssAttributes['men_col']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['tab_bc'])) : ?>\n.nav-pills>li>a.nav-link.active, .nav-pills>li>a.nav-link.active:focus, .nav-pills>li>a.nav-link.active:hover,\n.nav-pills>li>a.nav-link:hover,\n.nav-tabs>li>a.nav-link.active, .nav-tabs>li>a.nav-link.active:focus, .nav-tabs>li>a.nav-link.active:hover,.nav-tabs>li>a.nav-link:hover {\n    background-color:#<?php echo $cssAttributes['tab_bc'];?>\n}\n.navbar-default .navbar-nav>.open>a, .navbar-default .navbar-nav>.open>a:focus, .navbar-default .navbar-nav>.open>a:hover{\n    background-color:#<?php echo $cssAttributes['tab_bc']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_boc'])) : ?>\n.nav-pills>li>a,\n.nav-tabs>li>a.active, .nav-tabs>li>a.active:focus, .nav-tabs>li>a.active:hover{\n    border-color:#<?php echo $cssAttributes['tab_boc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_tc'])) : ?>\n.nav-pills>li>a,\n.nav-tabs>li>a{\n    color:#<?php echo $cssAttributes['tab_tc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['tab_atc'])) : ?>\n.nav-pills>li>a.active, .nav-pills>li>a.active:focus, .nav-pills>li>a.active:hover,\n.nav-tabs>li>a.active, .nav-tabs>li>a.active:focus, .nav-tabs>li>a.active:hover{\n    color:#<?php echo $cssAttributes['tab_atc'];?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['drpdown_bgc']) || isset($cssAttributes['drpdown_boc'])) : ?>\n.dropdown-menu {\n    <?php if (isset($cssAttributes['drpdown_bgc'])) : ?>background-color:#<?php echo $cssAttributes['drpdown_bgc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['drpdown_boc'])) : ?>border-color:#<?php echo $cssAttributes['drpdown_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['drpdown_hbgc'])) : ?>\n.dropdown-menu > a.dropdown-item:focus, .dropdown-menu>a.dropdown-item:hover{\n    background-color:#<?php echo $cssAttributes['drpdown_hbgc']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['nvbar_bc']) || isset($cssAttributes['nvbar_pbc'])) : ?>\n.navbar-light{\n    <?php if (isset($cssAttributes['nvbar_bc'])) : ?>background-color:#<?php echo $cssAttributes['nvbar_bc']?>!important;<?php endif;?>\n    <?php if (isset($cssAttributes['nvbar_pbc'])) : ?>border-color:#<?php echo $cssAttributes['nvbar_pbc']?>!important;<?php endif;?>\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['bcrumb_bgc']) || isset($cssAttributes['bcrumb_boc'])) : ?>\n.breadcrumb{\n    <?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>background-color: #<?php echo $cssAttributes['bcrumb_bgc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['bcrumb_boc'])) : ?>border-bottom: 1px solid #<?php echo $cssAttributes['bcrumb_boc']?>!important;<?php endif;?>\n}\n\n<?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>\n.navbar-lhc-right {\n   <?php if (isset($cssAttributes['bcrumb_bgc'])) : ?>background-color: #<?php echo $cssAttributes['bcrumb_bgc']?>;<?php endif;?>\n}\n<?php endif;?>\n\n<?php endif;?>\n\n<?php if (isset($cssAttributes['chat_onl_bc']) || isset($cssAttributes['chat_onl_bc'])) : ?>\n.user-online-row td {\n    background-color:#<?php echo $cssAttributes['chat_onl_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['tbl_boc'])) : ?>\n.table>thead>tr>th{\n    border-bottom: 2px solid #<?php echo $cssAttributes['tbl_boc']?>;\n}\n.table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th {\n    border-top: 1px solid #<?php echo $cssAttributes['tbl_boc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_tgl_bgc'])) : ?>\n.navbar-light .navbar-toggler:focus, .navbar .navbar-toggler:hover {\n    background-color: #<?php echo $cssAttributes['nvb_tgl_bgc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_tgl_bc'])) : ?>\n.navbar-light .navbar-toggler{\n    border-color: #<?php echo $cssAttributes['nvb_tgl_bc']?>;\n}\n<?php endif;?>\n\n<?php if (isset($cssAttributes['nvb_li_clr'])) : ?>\n.navbar-light .navbar-nav>li>a.nav-link{\n    color: #<?php echo $cssAttributes['nvb_li_clr']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['nvb_lih_clr'])) : ?>\n.navbar-light .navbar-nav>li>a.nav-link:focus, .navbar-light .navbar-nav>li>a.nav-link:hover, .navbar-default .navbar-nav>li>a.nav-link:hover{\n    color: #<?php echo $cssAttributes['nvb_lih_clr']?>;\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnd_clr']) || isset($cssAttributes['btnd_bc']) || isset($cssAttributes['btnd_boc'])) : ?>\n.btn-secondary {\n    <?php if (isset($cssAttributes['btnd_clr'])) : ?>color: #<?php echo $cssAttributes['btnd_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnd_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnd_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnd_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnd_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnda_clr']) || isset($cssAttributes['btnda_bc']) || isset($cssAttributes['btnda_boc'])) : ?>\n.btn-secondary:hover,.btn-secondary.active.focus,.btn-secondary.active:focus,.btn-secondary.active:hover,.btn-secondary:active.focus,.btn-secondary:active:focus,.btn-secondary:active:hover{\n    <?php if (isset($cssAttributes['btnda_clr'])) : ?>color: #<?php echo $cssAttributes['btnda_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnda_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnda_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnda_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnda_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnp_clr']) || isset($cssAttributes['btnp_bc']) || isset($cssAttributes['btnp_boc'])) : ?>\n.btn-primary {\n    <?php if (isset($cssAttributes['btnp_clr'])) : ?>color: #<?php echo $cssAttributes['btnp_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnp_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnp_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnp_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnp_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['btnpa_clr']) || isset($cssAttributes['btnpa_bc']) || isset($cssAttributes['btnpa_boc'])) : ?>\n.btn-primary:hover,.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover{\n    <?php if (isset($cssAttributes['btnpa_clr'])) : ?>color: #<?php echo $cssAttributes['btnpa_clr']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnpa_bc'])) : ?>background-color: #<?php echo $cssAttributes['btnpa_bc']?>;<?php endif;?>\n    <?php if (isset($cssAttributes['btnpa_boc'])) : ?>border-color: #<?php echo $cssAttributes['btnpa_boc']?>;<?php endif;?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_background']) || isset($cssAttributes['buble_operator_text_color'])) : ?>\n    div.message-admin:not(.whisper-msg) div.msg-body{\n        <?php if (isset($cssAttributes['buble_operator_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_operator_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_operator_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_operator_text_color'];?>;<?php endif; ?>\n    }\n\n    <?php if (isset($cssAttributes['buble_operator_text_color'])) : ?>\n    div.message-admin div.msg-body a.link{\n        color: #<?php echo $cssAttributes['buble_operator_text_color'];?>;\n    }\n    <?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_other_background']) || isset($cssAttributes['buble_operator_other_text_color'])) : ?>\ndiv.other-operator div.msg-body{\n    <?php if (isset($cssAttributes['buble_operator_other_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_operator_other_background'];?>;<?php endif;?>\n    <?php if (isset($cssAttributes['buble_operator_other_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_operator_other_text_color'];?>;<?php endif; ?>\n}\n\n<?php if (isset($cssAttributes['buble_operator_other_text_color'])) : ?>\ndiv.other-operator div.msg-body a.link{\n    color: #<?php echo $cssAttributes['buble_operator_other_text_color'];?>;\n}\n<?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_title_color'])) : ?>\n    .op-tit{\n        color: #<?php echo $cssAttributes['buble_operator_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_operator_other_title_color'])) : ?>\n    div.other-operator .op-tit{\n        color: #<?php echo $cssAttributes['buble_operator_other_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_visitor_text_color']) || isset($cssAttributes['buble_visitor_background'])) : ?>\n    div.message-row.response div.msg-body{\n        <?php if (isset($cssAttributes['buble_visitor_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_visitor_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_visitor_text_color'];?>;<?php endif; ?>\n    }\n\n    <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>\n    div.message-row.response div.msg-body a.link{\n        <?php if (isset($cssAttributes['buble_visitor_text_color'])) : ?>color: #<?php echo $cssAttributes['buble_visitor_text_color'];?>;<?php endif; ?>\n    }\n    <?php endif; ?>\n\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_visitor_title_color'])) : ?>\n    .vis-tit{\n        color: #<?php echo $cssAttributes['buble_visitor_title_color'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['chat_bg'])) : ?>\n    .msgBlock-admin{\n        background-color: #<?php echo $cssAttributes['chat_bg'];?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['time_color'])) : ?>\n    .msg-date{\n        color: #<?php echo $cssAttributes['time_color'];?>\n    }\n<?php endif; ?>\n\n\n<?php if (isset($cssAttributes['buble_sys_background']) || isset($cssAttributes['buble_sys_title_color']) ) : ?>\n    .sys-tit{\n        <?php if (isset($cssAttributes['buble_sys_background'])) : ?>background-color: #<?php echo $cssAttributes['buble_sys_background'];?>;<?php endif; ?>\n        <?php if (isset($cssAttributes['buble_sys_title_color'])) : ?>color: #<?php echo $cssAttributes['buble_sys_title_color'];?>;<?php endif; ?>\n    }\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['buble_sys_text_color'])) : ?>\ndiv.system-response div.msg-body,\ndiv.system-response div.msg-body a.link{\n    color: #<?php echo $cssAttributes['buble_sys_text_color'];?>\n}\n<?php endif; ?>\n\n<?php if (isset($cssAttributes['newm_color']) && !empty($cssAttributes['newm_color'])) : ?>\n    .new-msg-holder{\n        border-color: #<?php echo $cssAttributes['newm_color'];?>!important;\n    }\n    .new-msg-holder > span.new-msg{\n        background-color: #<?php echo $cssAttributes['newm_color'];?>!important;\n    }\n<?php endif; ?>\n\n<?php /*\n<div class=\"msgBlock\" style=\"\" id=\"messagesBlock\">\n    <div class=\"message-row response\" id=\"msg-10459\" data-op-id=\"0\">\n        <div class=\"msg-date\">10:14:39</div>\n        <span style=\"color:#{{bactract_bg_color_buble_visitor_title_color}}\" class=\"usr-tit vis-tit\" role=\"button\"><i class=\"material-icons chat-operators mi-fs15 mr-0\">account_box</i>Operator</span>\n        <div class=\"msg-body\" style=\"background-color: #{{bactract_bg_color_buble_visitor_background}};color:#{{bactract_bg_color_buble_visitor_text_color}}\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>\n    </div>\n    <div class=\"message-row message-admin operator-changes\" id=\"msg-10463\" data-op-id=\"1\">\n        <div class=\"msg-date\">10:18:22</div>\n        <span style=\"color:#{{bactract_bg_color_buble_operator_title_color}}\" class=\"usr-tit op-tit\" ><i class=\"material-icons chat-operators mi-fs15 mr-0\">face</i>Visitor</span>\n        <div class=\"msg-body\" style=\"color:#{{bactract_bg_color_buble_operator_text_color}};background-color: #{{bactract_bg_color_buble_operator_background}};\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>\n    </div>\n</div>*/", "<div class=\"row\" ng-non-bindable>\n    <div class=\"col-10\"><h1><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('admintheme/form','Edit theme');?> - <?php echo htmlspecialchars($form->name)?></h1></div>\n</div>\n\n<form action=\"<?php echo erLhcoreClassDesign::baseurl('theme/adminthemeedit')?>/<?php echo $form->id?>\" method=\"post\" autocomplete=\"off\" enctype=\"multipart/form-data\">\n\n    <?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('admintheme/form','Updated'); ?>\n\t\t\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n\t<?php endif; ?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhtheme/admin/form.tpl.php'));?>\n\n\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"SaveAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"UpdateAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Update');?>\"/>\n      <input type=\"submit\" class=\"btn btn-secondary\" name=\"CancelAction\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n    </div>\n\n</form>"], "filenames": ["lhc_web/design/defaulttheme/tpl/lhchat/lists/msg_obj_list.tpl.php", "lhc_web/design/defaulttheme/tpl/lhchat/lists/msg_obj_list_admin.tpl.php", "lhc_web/design/defaulttheme/tpl/lhchat/messagelist/plain.tpl.php", "lhc_web/design/defaulttheme/tpl/lhform/collected.tpl.php", "lhc_web/design/defaulttheme/tpl/lhtheme/admincss.tpl.php", "lhc_web/design/defaulttheme/tpl/lhtheme/adminthemeedit.tpl.php"], "buggy_code_start_loc": [1, 1, 1, 1, 185, 1], "buggy_code_end_loc": [33, 46, 2, 16, 186, 6], "fixing_code_start_loc": [1, 1, 1, 1, 185, 1], "fixing_code_end_loc": [29, 9, 14, 16, 186, 2], "type": "CWE-79", "message": "Cross-site Scripting (XSS) - Stored in Packagist remdex/livehelperchat prior to 3.93v.", "other": {"cve": {"id": "CVE-2022-0374", "sourceIdentifier": "security@huntr.dev", "published": "2022-01-26T10:15:07.783", "lastModified": "2022-02-01T19:00:21.477", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-site Scripting (XSS) - Stored in Packagist remdex/livehelperchat prior to 3.93v."}, {"lang": "es", "value": "Una vulnerabilidad de tipo Cross-site Scripting (XSS) - Almacenado en Packagist remdex/livehelperchat versiones anteriores a 3.93v"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 6.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 3.6}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 3.5}, "baseSeverity": "LOW", "exploitabilityScore": 6.8, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:livehelperchat:live_helper_chat:*:*:*:*:*:*:*:*", "versionEndExcluding": "3.93", "matchCriteriaId": "5ECA9177-542F-418A-935D-AC3EDE0E1656"}]}]}], "references": [{"url": "https://github.com/livehelperchat/livehelperchat/commit/bbfaa26ce54a2a86ce1a42a16496038f5bdfc102", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/f8b560a6-aa19-4262-8ae4-cf88204310ef", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/livehelperchat/livehelperchat/commit/bbfaa26ce54a2a86ce1a42a16496038f5bdfc102"}}