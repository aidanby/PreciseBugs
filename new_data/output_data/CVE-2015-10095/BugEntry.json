{"buggy_code": ["=== woo-popup ===\nContributors: Guillaume Kanoufi\nDonate link: http://lostwebdesigns.com/\nTags: pop up, woocommerce, woopopup, modal window, display info after a product is added\nRequires at least: 3.5.1\nTested up to: 3.9\nStable tag: 1.2.2\nLicense: GPLv2 or later\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\n\nDisplay a pop up window after the chosen page is loaded.\n\n== Description ==\n\nA plugin to show a pop up window with any text, links, images, and even shortcodes when on the chosen page or all pages. Useful to present your customers with possible shipping delays if using woocommerce or anything else you can think about.\nYou can use it permanently or between 2 defined dates.\nWas made for woocommerce, late shipping or important info at the begining, but can be used on any wordpress installation.\n\n== Installation ==\n\n= Using The WordPress Dashboard =\n\n1. Navigate to the 'Add New' in the plugins dashboard\n2. Search for 'woo-popup'\n3. Click 'Install Now'\n4. Activate the plugin on the Plugin dashboard\n5. Customize the setting by clicking on the \"Woo Popup Settings\" menu tab\n\n= Uploading in WordPress Dashboard =\n\n1. Navigate to the 'Add New' in the plugins dashboard\n2. Navigate to the 'Upload' area\n3. Select `woo-popup.zip` from your computer\n4. Click 'Install Now'\n5. Activate the plugin in the Plugin dashboard\n\n= Using FTP =\n\n1. Download `woo-popup.zip`\n2. Extract the `woo-popup` directory to your computer\n3. Upload the `woo-popup` directory to the `/wp-content/plugins/` directory\n4. Activate the plugin in the Plugin dashboard\n\n\n== Frequently Asked Questions ==\n\n= A question that someone might have =\n\nAn answer to that question.\n\n= How to use woo-popup? =\n\nJust activate the plugin then go to the woo-popup menu and customize to your needs(text to show begining and end dates) and that's pretty much it.\n\n== Screenshots ==\n\n1. No screenshots yet\n\n== Changelog ==\n\n= 1.2.2 =\nFixed fatal error with is_shop\n\n= 1.2.1 =\nFix a fatal error due to timezone list\n\n= 1.2 =\nAdded option to display the popup permanently(no dates then need to be selected) and possibility to choose the timezone you are in.\nAlso possibility to display the popup on all pages.\n\n= 1.1 =\nAdded wpaoutop for formatting and possibility to add a class to the content.\n\n= 1.0 =\n* First Version of this plugin.\n\n\n== Updates ==\n\n= 1.2 =\nAdded option to display the popup permanently(no dates would then need to be selected) and possibility to choose the timezone you are in.\nAlso possibility to display the popup on all pages.\n\n= 1.1 =\nAdded wpaoutop for formatting and possibility to add a class to the content.\n", "<?php\n/**\n * woo-popup\n *\n * @package   WooPopupAdmin\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n\n/**\n * Plugin class. This class should ideally be used to work with the\n * administrative side of the WordPress site.\n *\n * If you're interested in introducing public-facing\n * functionality, then refer to `class-woo-popup.php`\n *\n * @package WooPopupAdmin\n * @author  Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n */\nclass WooPopupAdmin {\n\n\t/**\n\t * Instance of this class.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      object\n\t */\n\tprotected static $instance = null;\n\n\t/**\n\t * Slug of the plugin screen.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprotected $plugin_screen_hook_suffix = null;\n\n\t/**\n\t * Initialize the plugin by loading admin scripts & styles and adding a\n\t * settings page and menu.\n\t *\n\t * @since     1.0.0\n\t */\n\tprivate function __construct() {\n\n\n\t\t$plugin = WooPopup::get_instance();\n\t\t$this->plugin_slug = $plugin->get_plugin_slug();\n\t\t$this->options_slug = $plugin->get_plugin_options_slug();\n\t\t$this->options_data = $plugin->get_plugin_options_data();\n\n\t\t// Load admin style sheet and JavaScript.\n\t\tadd_action( 'admin_enqueue_scripts', array( $this, 'enqueue_admin_styles' ) );\n\t\tadd_action( 'admin_enqueue_scripts', array( $this, 'enqueue_admin_scripts' ) );\n\n\t\t// Add the options page and menu item.\n\t\tadd_action( 'admin_menu', array( $this, 'add_plugin_admin_menu' ) );\n\n\t\t// Add an action link pointing to the options page.\n\t\t$plugin_basename = plugin_basename( plugin_dir_path( __DIR__ ) . $this->plugin_slug . '.php' );\n\t\tadd_filter( 'plugin_action_links_' . $plugin_basename, array( $this, 'add_action_links' ) );\n\n\t\t// Add the options update action\n\t\tadd_action('admin_init', array($this, 'options_update'));\n\n\t}\n\n\t/**\n\t * Return an instance of this class.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    object    A single instance of this class.\n\t */\n\tpublic static function get_instance() {\n\n\t\t// If the single instance hasn't been set, set it now.\n\t\tif ( null == self::$instance ) {\n\t\t\tself::$instance = new self;\n\t\t}\n\n\t\treturn self::$instance;\n\t}\n\n\t/**\n\t * Register and enqueue admin-specific style sheet.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    null    Return early if no settings page is registered.\n\t */\n\tpublic function enqueue_admin_styles() {\n\n\t\tif ( ! isset( $this->plugin_screen_hook_suffix ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$screen = get_current_screen();\n\t\tif ( $this->plugin_screen_hook_suffix == $screen->id ) {\n\t\t\twp_enqueue_style( $this->plugin_slug .'-admin-styles', plugins_url( 'assets/css/admin.css', __FILE__ ), array(), WooPopup::VERSION );\n\t\t\twp_enqueue_style('jquery-ui-css', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css');\n\t\t}\n\n\t}\n\n\t/**\n\t * Register and enqueue admin-specific JavaScript.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    null    Return early if no settings page is registered.\n\t */\n\tpublic function enqueue_admin_scripts() {\n\n\t\tif ( ! isset( $this->plugin_screen_hook_suffix ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$screen = get_current_screen();\n\t\tif ( $this->plugin_screen_hook_suffix == $screen->id ) {\n\t\t\twp_enqueue_script( 'jquery-ui-datepicker' );\n\t\t\twp_enqueue_script( $this->plugin_slug . '-admin-script', plugins_url( 'assets/js/admin.js', __FILE__ ), array( 'jquery' ), WooPopup::VERSION );\n\t\t}\n\n\t}\n\n\t/**\n\t * Register the administration menu for this plugin into the WordPress Dashboard menu.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function add_plugin_admin_menu() {\n\n\t\t/*\n\t\t * Add a settings page for this plugin to the Settings menu.\n\t\t *\n\t\t * NOTE:  Alternative menu locations are available via WordPress administration menu functions.\n\t\t *\n\t\t *        Administration Menus: http://codex.wordpress.org/Administration_Menus\n\t\t *\n\t\t */\n\t\t$this->plugin_screen_hook_suffix = add_menu_page(\n\t\t\t__( 'Woo Pop Up', $this->plugin_slug ),\n\t\t\t__( 'Woo Pop Up Settings', $this->plugin_slug ),\n\t\t\t'manage_options',\n\t\t\t$this->options_slug,\n\t\t\tarray( $this, 'display_plugin_admin_page' )\n\t\t);\n\n\t}\n\n\t/**\n\t * Render the settings page for this plugin.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function display_plugin_admin_page() {\n\t\tinclude_once( 'views/admin.php' );\n\t}\n\n\t/**\n\t * Add settings action link to the plugins page.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function add_action_links( $links ) {\n\n\n\t\treturn array_merge(\n\t\t\tarray(\n\t\t\t\t'settings' => '<a href=\"' . admin_url( 'admin.php?page=' . $this->options_slug ) . '\">' . __( 'Settings', $this->plugin_slug ) . '</a>'\n\t\t\t),\n\t\t\t$links\n\t\t);\n\n\t}\n\n\t/**\n\t * \tSave the plugin options\n\t *\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function options_update() {\n\t\tregister_setting( $this->options_slug, $this->options_slug, array($this, 'validate') );\n\t}\n\n\tpublic function validate($input) {\n\t    $valid = array();\n\t    $valid['popup_content'] = wp_kses_post($input['popup_content']);\n\t    $valid['popup_page'] = sanitize_text_field($input['popup_page']);\n\t    $valid['popup_class'] = sanitize_text_field($input['popup_class']);\n\t    $valid['start_date'] = sanitize_text_field($input['start_date']);\n\t    $valid['end_date'] = sanitize_text_field($input['end_date']);\n\t    $valid['popup_timezone'] = sanitize_text_field($input['popup_timezone']);\n\n\t    if(isset($input['popup_permanent'])){\n\t    \t  $valid['popup_permanent'] = sanitize_text_field($input['popup_permanent']);\n\t    }else{\n\t    \t $valid['popup_permanent'] = '0';\n\t    }\n\n\n\t    if (strlen($valid['popup_content']) == 0) {\n\t        add_settings_error(\n\t                'popup_content',                     // Setting title\n\t                'popup_content_texterror',            // Error ID\n\t                'Please enter a text to show on the pop up',     // Error message\n\t                'error'                         // Type of message\n\t        );\n\n\t        // Set it to the default value\n\t        $valid['popup_content'] = $this->data['popup_content'];\n\t    }\n\n\t    if (strlen($valid['popup_page']) == 0) {\n\t        add_settings_error(\n\t                'popup_page',\n\t                'popup_page_texterror',\n\t                'Please choose a page to display the pop up to',\n\t                'error'\n\t        );\n\n\t        $valid['popup_page'] = $this->data['popup_page'];\n\t    }\n\t    if (strlen($valid['popup_class']) == 0) {\n\t        add_settings_error(\n\t                'popup_class',\n\t                'popup_class_texterror',\n\t                'Please choose a class to display the pop up to',\n\t                'error'\n\t        );\n\n\t        $valid['popup_class'] = $this->data['popup_class'];\n\t    }\n\n\n\t    if (strlen($valid['start_date']) == 0) {\n\t        add_settings_error(\n\t                'start_date',\n\t                'start_date_texterror',\n\t                'Please enter a beginning date',\n\t                'error'\n\t        );\n\n\t        $valid['start_date'] = $this->data['start_date'];\n\t    }\n\n\t    if (strlen($valid['end_date']) == 0) {\n\t        add_settings_error(\n\t                'end_date',\n\t                'end_date_texterror',\n\t                'Please enter a beginning date',\n\t                'error'\n\t        );\n\n\t        $valid['end_date'] = $this->data['end_date'];\n\t    }\n\n\t    return $valid;\n\t}\n\n}\n", "<?php\n/**\n * Represents the view for the administration dashboard.\n *\n * This includes the header, options, and other information that should provide\n * The User Interface to the end user.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://example.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n?>\n\n<div class=\"wrap\">\n\n\n\t<h2><?php echo esc_html( get_admin_page_title() ); ?></h2>\n\n\t<div class=\"wrap metabox-holder columns-2\">\n\t      <form method=\"post\" name=\"options\" action=\"options.php\">\n\t\t\t<?php\n\t\t\t\t$options = get_option($this->options_slug);\n\t\t\t\t/*\n\t\t\t\t* Grab all value if already set\n\t\t\t\t*\n\t\t\t\t*/\n\t\t\t\t$content = $options['popup_content'];\n\t\t\t\t$page = $options['popup_page'];\n\t\t\t\t$class = $options['popup_class'];\n\t\t\t\t$permanent = $options['popup_permanent'];\n\t\t\t\t$start_date = $options['start_date'];\n\t\t\t\t$end_date = $options['end_date'];\n\t\t\t\t$timezone = $options['popup_timezone'];\n\n\t\t\t\t/*\n\t\t\t\t* Set up hidden fields\n\t\t\t\t*\n\t\t\t\t*/\n\t\t\t\tsettings_fields($this->options_slug);\n\t\t\t?>\n\n\n\t\t\t<?php wp_editor( $content, $this->options_slug.'[popup_content]'); ?>\n\t            <table width=\"100%\" cellpadding=\"10\" class=\"form-table\">\n\t            \t<tr>\n\t            \t\t<th scope=\"row\">\n\t            \t\t\t<label><?php _e('Choose the page you want to display your popup window (default is cart page)', $this->plugin_slug);?>:</label>\n\t            \t\t</th>\n\t            \t\t<td>\n\t            \t\t\t<?php\n\t            \t\t\t\t$args = array(\n\t            \t\t\t\t\t'show_option_none' => 'All',\n\t            \t\t\t\t\t'option_none_value' => 'all',\n\t            \t\t\t\t\t'selected' => $page,\n\t            \t\t\t\t\t'name' => $this->options_slug.'[popup_page]',\n\t            \t\t\t\t);\n\t            \t\t\t\t$pages = wp_dropdown_pages($args);\n\t            \t\t\t?>\n\t            \t\t</td>\n\n\t            \t</tr>\n\t            \t<tr>\n\t            \t\t<th scope=\"row\">\n\t            \t\t\t<label><?php _e('If using woocommerce, you can choose from woocommerce-message classes (message, info or error) else it will add a custom class of woopopup-yourchoice (your choice being: message, info or error) so you will be able to style it in your css', $this->plugin_slug);?>:</label>\n\t            \t\t</th>\n\t            \t\t<td>\n\t            \t\t\t<select name=\"<?php echo $this->options_slug;?>[popup_class]\" >\n\t            \t\t\t\t<option value=\"notice\">Notice (default non woocommerce class)</option>\n\t\t\t\t\t\t\t<option value=\"message\" <?php if($class == 'message') echo 'selected';?>>Message</option>\n\t\t\t\t\t\t\t<option value=\"info\" <?php if($class == 'info') echo 'selected';?>>Info</option>\n\t\t\t\t\t\t\t<option value=\"error\" <?php if($class == 'error') echo 'selected';?>>Error</option>\n\t            \t\t\t</select>\n\t            \t\t</td>\n\n\t            \t</tr>\n\t            \t<tr>\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Make the popup permanent (no dates selections)', $this->plugin_slug);?>:</label>\n\t\t                </th>\n\t\t                <td>\n\t\t                    <input type=\"checkbox\" id=\"woo-popup_permanent\" name=\"<?php echo $this->options_slug;?>[popup_permanent]\" value=\"1\" <?php if($permanent == '1') echo 'checked';?>/>\n\t                    </td>\n\t                 </tr>\n\t                <tr class=\"woo-popup_dates\">\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Begining Date', $this->plugin_slug);?>:</label>\n\t\t                </th>\n\t\t                <td>\n\t\t                    <input type=\"text\" id=\"woo-popup-from\" class=\"wpopup_date\" name=\"<?php echo $this->options_slug;?>[start_date]\" value=\"<?php echo $start_date;?>\"/>\n\t                    </td>\n\t                 </tr>\n\t                 <tr class=\"woo-popup_dates\">\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('End Date', $this->plugin_slug);?>:</label>\n\t\t               </th>\n\t\t               <td>\n\t\t                    <input type=\"text\" id=\"woo-popup-to\" class=\"wpopup_date\" name=\"<?php echo $this->options_slug;?>[end_date]\" value=\"<?php echo $end_date;?>\"/>\n\t                    </td>\n\t                </tr>\n\t                <tr class=\"woo-popup_dates\">\n\t                \t\t<?php $tzl = DateTimeZone::listIdentifiers();?>\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Choose your Timezone', $this->plugin_slug);?>:</label>\n\t\t               </th>\n\t\t               <td>\n\t\t                    <select name=\"<?php echo $this->options_slug;?>[popup_timezone]\" >\n\t            \t\t\t\t<?php foreach ($tzl as $tz) :?>\n\t            \t\t\t\t\t<option value=\"<?php echo $tz;?>\" <?php if($timezone == $tz) echo 'selected';?>><?php echo $tz;?></option>\n\t            \t\t\t\t<?php endforeach;?>\n\t            \t\t\t</select>\n\t                    </td>\n\t                </tr>\n\t            </table>\n\n\t            <p class=\"submit\">\n\t                <input type=\"submit\" class=\"button-primary\" name=\"Submit\" value=\"Save Changes\" />\n\t            </p>\n            </form>\n\n      </div>\n</div>\n", ".clear{clear:both}.nobr{white-space:nowrap}@font-face{font-family:WooCommerce;src:url(../fonts/WooCommerce.eot);src:url(../fonts/WooCommerce.eot?#iefix) format('embedded-opentype'),url(../fonts/WooCommerce.woff) format('woff'),url(../fonts/WooCommerce.ttf) format('truetype'),url(../fonts/WooCommerce.svg#WooCommerce) format('svg');font-weight:400;font-style:normal}div.pp_woocommerce .pp_content_container{background:#fff;-webkit-border-radius:3px;border-radius:3px;box-shadow:0 1px 30px 0 rgba(0,0,0,.25);-webkit-box-shadow:0 1px 30px 0 rgba(0,0,0,.25);padding:20px 0;*zoom:1}div.pp_woocommerce .pp_content_container:after,div.pp_woocommerce .pp_content_container:before{content:\" \";display:table}div.pp_woocommerce .pp_content_container:after{clear:both}div.pp_woocommerce .pp_loaderIcon{background:url(../images/ajax-loader.gif) center no-repeat}div.pp_woocommerce div.ppt{color:#000}div.pp_woocommerce .pp_gallery ul li a{border:1px solid rgba(0,0,0,.5);background:#fff;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.2);-webkit-border-radius:2px;border-radius:2px;display:block}div.pp_woocommerce .pp_gallery ul li a:hover,div.pp_woocommerce .pp_gallery ul li.selected a{border-color:#000}div.pp_woocommerce .pp_next:before,div.pp_woocommerce .pp_previous:before{-webkit-border-radius:100%;border-radius:100%;height:1em;width:1em;text-shadow:0 1px 2px rgba(0,0,0,.5);background-color:#444;color:#fff!important;font-size:16px!important;line-height:1em;-webkit-transition:all ease-in-out .2s;-moz-transition:all ease-in-out .2s;-o-transition:all ease-in-out .2s;transition:all ease-in-out .2s;font-family:WooCommerce;content:\"\\e00b\";text-indent:0;display:none;position:absolute;top:50%;margin-top:-10px;text-align:center}div.pp_woocommerce .pp_next:before:hover,div.pp_woocommerce .pp_previous:before:hover{background-color:#000}div.pp_woocommerce .pp_next:hover:before,div.pp_woocommerce .pp_previous:hover:before{display:block}div.pp_woocommerce .pp_previous:before{left:1em}div.pp_woocommerce .pp_next:before{right:1em;font-family:WooCommerce;content:\"\\e008\"}div.pp_woocommerce .pp_details{margin:0;padding-top:1em}div.pp_woocommerce .pp_description,div.pp_woocommerce .pp_nav{font-size:14px}div.pp_woocommerce .pp_arrow_next,div.pp_woocommerce .pp_arrow_previous,div.pp_woocommerce .pp_nav,div.pp_woocommerce .pp_nav .pp_pause,div.pp_woocommerce .pp_nav p,div.pp_woocommerce .pp_play{margin:0}div.pp_woocommerce .pp_nav{margin-right:1em;position:relative}div.pp_woocommerce .pp_close{-webkit-border-radius:100%;border-radius:100%;height:1em;width:1em;text-shadow:0 1px 2px rgba(0,0,0,.5);background-color:#444;color:#fff!important;line-height:1em;-webkit-transition:all ease-in-out .2s;-moz-transition:all ease-in-out .2s;-o-transition:all ease-in-out .2s;transition:all ease-in-out .2s;top:-.5em;right:-.5em;font-size:1.618em!important}div.pp_woocommerce .pp_close:hover{background-color:#000}div.pp_woocommerce .pp_close:before{font-family:WooCommerce;content:\"\\e013\";display:block;position:absolute;top:0;left:0;right:0;bottom:0;text-align:center;text-indent:0}div.pp_woocommerce .pp_arrow_next,div.pp_woocommerce .pp_arrow_previous{-webkit-border-radius:100%;border-radius:100%;height:1em;width:1em;text-shadow:0 1px 2px rgba(0,0,0,.5);background-color:#444;color:#fff!important;font-size:16px!important;line-height:1em;-webkit-transition:all ease-in-out .2s;-moz-transition:all ease-in-out .2s;-o-transition:all ease-in-out .2s;transition:all ease-in-out .2s;position:relative;margin-top:-1px}div.pp_woocommerce .pp_arrow_next:hover,div.pp_woocommerce .pp_arrow_previous:hover{background-color:#000}div.pp_woocommerce .pp_arrow_next:before,div.pp_woocommerce .pp_arrow_previous:before{font-family:WooCommerce;content:\"\\e00b\";display:block;position:absolute;top:0;left:0;right:0;bottom:0;text-align:center;text-indent:0}div.pp_woocommerce .pp_arrow_previous{margin-right:.5em}div.pp_woocommerce .pp_arrow_next{margin-left:.5em}div.pp_woocommerce .pp_arrow_next:before{content:\"\\e008\"}div.pp_woocommerce a.pp_contract,div.pp_woocommerce a.pp_expand{-webkit-border-radius:100%;border-radius:100%;height:1em;width:1em;text-shadow:0 1px 2px rgba(0,0,0,.5);background-color:#444;color:#fff!important;line-height:1em;-webkit-transition:all ease-in-out .2s;-moz-transition:all ease-in-out .2s;-o-transition:all ease-in-out .2s;transition:all ease-in-out .2s;right:auto;left:-.5em;top:-.5em;font-size:1.618em!important}div.pp_woocommerce a.pp_contract:hover,div.pp_woocommerce a.pp_expand:hover{background-color:#000}div.pp_woocommerce a.pp_contract:before,div.pp_woocommerce a.pp_expand:before{font-family:WooCommerce;content:\"\\e005\";display:block;position:absolute;top:0;left:0;right:0;bottom:0;text-align:center;text-indent:0}div.pp_woocommerce a.pp_contract:before{content:\"\\e004\"}div.pp_woocommerce #respond{margin:0;width:100%;background:0 0;border:0;padding:0}div.pp_woocommerce #respond .form-submit{margin-top:0;float:none}div.pp_woocommerce .pp_inline{padding:0!important}@media only screen and (max-width:768px){div.pp_woocommerce{left:5%!important;right:5%!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:90%!important}div.pp_woocommerce .pp_contract,div.pp_woocommerce .pp_expand,div.pp_woocommerce .pp_gallery,div.pp_woocommerce .pp_next,div.pp_woocommerce .pp_previous{display:none!important}div.pp_woocommerce .pp_arrow_next,div.pp_woocommerce .pp_arrow_previous,div.pp_woocommerce .pp_close{height:44px;width:44px;font-size:44px;line-height:44px}div.pp_woocommerce .pp_arrow_next:before,div.pp_woocommerce .pp_arrow_previous:before,div.pp_woocommerce .pp_close:before{font-size:44px}div.pp_woocommerce .pp_description{display:none!important}.pp_content,div.pp_woocommerce .pp_details{width:100%!important}.pp_content img{width:100%!important;height:auto!important}.currentTextHolder{line-height:3}}div.pp_pic_holder a:focus{outline:0}div.pp_overlay{background:#000;display:none;left:0;position:absolute;top:0;width:100%;z-index:9999}div.pp_pic_holder{display:none;position:absolute;width:100px;z-index:10000}.pp_top{height:20px;position:relative}* html .pp_top{padding:0 20px}.pp_top .pp_left{height:20px;left:0;position:absolute;width:20px}.pp_top .pp_middle{height:20px;left:20px;position:absolute;right:20px}* html .pp_top .pp_middle{left:0;position:static}.pp_top .pp_right{height:20px;left:auto;position:absolute;right:0;top:0;width:20px}.pp_content{height:40px;min-width:40px}* html .pp_content{width:40px}.pp_fade{display:none}.pp_content_container{position:relative;text-align:left;width:100%}.pp_content_container .pp_left{padding-left:20px}.pp_content_container .pp_right{padding-right:20px}.pp_content_container .pp_details{float:left;margin:10px 0 2px}.pp_description{display:none;margin:0}.pp_social{float:left;margin:0}.pp_social .facebook{float:left;margin-left:5px;width:55px;overflow:hidden}.pp_social .twitter{float:left}.pp_nav{clear:right;float:left;margin:3px 10px 0 0}.pp_nav p{float:left;margin:2px 4px;white-space:nowrap}.pp_nav .pp_pause,.pp_nav .pp_play{float:left;margin-right:4px;text-indent:-10000px}a.pp_arrow_next,a.pp_arrow_previous{display:block;float:left;height:15px;margin-top:3px;text-indent:-100000px;width:14px}.pp_hoverContainer{position:absolute;top:0;width:100%;z-index:2000}.pp_gallery{display:none;left:50%;margin-top:-50px;position:absolute;z-index:10000}.pp_gallery div{float:left;overflow:hidden;position:relative}.pp_gallery ul{float:left;height:35px;margin:0 0 0 5px;padding:0;position:relative;white-space:nowrap}.pp_gallery ul a{border:1px #000 solid;border:1px rgba(0,0,0,.5) solid;display:block;float:left;height:33px;overflow:hidden}.pp_gallery li.selected a,.pp_gallery ul a:hover{border-color:#fff}.pp_gallery ul a img{border:0}.pp_gallery li{display:block;float:left;margin:0 5px 0 0;padding:0}.pp_gallery li.default a{display:block;height:33px;width:50px}.pp_gallery li.default a img{display:none}.pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous{margin-top:7px!important}a.pp_next{display:block;float:right;height:100%;text-indent:-10000px;width:49%}a.pp_previous{display:block;float:left;height:100%;text-indent:-10000px;width:49%}a.pp_contract,a.pp_expand{cursor:pointer;display:none;height:20px;position:absolute;right:30px;text-indent:-10000px;top:10px;width:20px;z-index:20000}a.pp_close{position:absolute;right:0;top:0;display:block;text-indent:-10000px}.pp_bottom{height:20px;position:relative}* html .pp_bottom{padding:0 20px}.pp_bottom .pp_left{height:20px;left:0;position:absolute;width:20px}.pp_bottom .pp_middle{height:20px;left:20px;position:absolute;right:20px}* html .pp_bottom .pp_middle{left:0;position:static}.pp_bottom .pp_right{height:20px;left:auto;position:absolute;right:0;top:0;width:20px}.pp_loaderIcon{display:block;height:24px;left:50%;margin:-12px 0 0 -12px;position:absolute;top:50%;width:24px}#pp_full_res .pp_inline{text-align:left}div.ppt{color:#fff!important;font-weight:700;display:none;font-size:17px;margin:0 0 5px 15px;z-index:9999}", "jQuery(document).ready(function ( ) {\n\t\"use strict\";\n\t//Append the inline content to the body\n\tjQuery(woo_popup['popup_content']).appendTo('body');\n\n\t//Open that content on load with prettyPhoto\n\tjQuery.prettyPhoto.open('#woopopup');\n\n});\n", "<?php\n/**\n * woo-popup\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n\n/**\n * Plugin class. This class should ideally be used to work with the\n * public-facing side of the WordPress site.\n *\n * If you're interested in introducing administrative or dashboard\n * functionality, then refer to `class-woo-popup-admin.php`\n *\n * @package WooPopup\n * @author  Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n */\nclass WooPopup {\n\n\t/**\n\t * Plugin version, used for cache-busting of style and script file references.\n\t *\n\t * @since   1.0.0\n\t *\n\t * @var     string\n\t */\n\tconst VERSION = '1.2.0';\n\n\t/**\n\t * Unique identifier for your plugin.\n\t *\n\t *\n\t * The variable name is used as the text domain when internationalizing strings\n\t * of text. Its value should match the Text Domain file header in the main\n\t * plugin file.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprotected $plugin_slug = 'woo-popup';\n\n\t/**\n\t * Unique identifier for your plugin options.\n\t *\n\t *\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprivate $options_slug = 'woo-popup_options';\n\n\n\t/**\n\t * Default Settings Values.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprivate $options_data = array(\n\t\t'popup_content' => 'This will be your pop up content',\n\t\t'popup_page' => ' ',\n\t\t'popup_class' => 'notice',\n\t\t'popup_permanent' => '0', //Default set to 0 so date are apparant\n\t\t'start_date' => '2014-02-02',  //Set up an old date so if default the pop up won't be fired\n\t\t'end_date' => '2014-02-04',  //Set up an old date so if default the pop up won't be fired\n\t\t'popup_timezone' => 'Europe/Paris'\n\t);\n\n\t/**\n\t * Instance of this class.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      object\n\t */\n\tprotected static $instance = null;\n\n\t/**\n\t * Initialize the plugin by setting localization and loading public scripts\n\t * and styles.\n\t *\n\t * @since     1.0.0\n\t */\n\tprivate function __construct() {\n\n\t\t// Load plugin text domain\n\t\tadd_action( 'init', array( $this, 'load_plugin_textdomain' ) );\n\n\t\t// Activate plugin when new blog is added\n\t\tadd_action( 'wpmu_new_blog', array( $this, 'activate_new_site' ) );\n\n\t\t// Load public-facing style sheet and JavaScript.\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'enqueue_styles' ) );\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'enqueue_scripts' ) );\n\n\t\t// Pass the php variable through wp_localize_script\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'pass_php_vars' ) );\n\n\t}\n\n\t/**\n\t * Return the plugin slug.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin slug variable.\n\t */\n\tpublic function get_plugin_slug() {\n\t\treturn $this->plugin_slug;\n\t}\n\n\t/**\n\t * Return the plugin options slug.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin slug variable.\n\t */\n\tpublic function get_plugin_options_slug() {\n\t\treturn $this->options_slug;\n\t}\n\n\n\t/**\n\t * Return the plugin options default data.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin options variable.\n\t */\n\tpublic function get_plugin_options_data() {\n\t\treturn $this->options_data;\n\t}\n\n\n\t/**\n\t * Return an instance of this class.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    object    A single instance of this class.\n\t */\n\tpublic static function get_instance() {\n\n\t\t// If the single instance hasn't been set, set it now.\n\t\tif ( null == self::$instance ) {\n\t\t\tself::$instance = new self;\n\t\t}\n\n\t\treturn self::$instance;\n\t}\n\n\t/**\n\t * Fired when the plugin is activated.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    boolean    $network_wide    True if WPMU superadmin uses\n\t *                                       \"Network Activate\" action, false if\n\t *                                       WPMU is disabled or plugin is\n\t *                                       activated on an individual blog.\n\t */\n\tpublic static function activate( $network_wide ) {\n\n\t\tif ( function_exists( 'is_multisite' ) && is_multisite() ) {\n\n\t\t\tif ( $network_wide  ) {\n\n\t\t\t\t// Get all blog ids\n\t\t\t\t$blog_ids = self::get_blog_ids();\n\n\t\t\t\tforeach ( $blog_ids as $blog_id ) {\n\n\t\t\t\t\tswitch_to_blog( $blog_id );\n\t\t\t\t\tself::single_activate();\n\t\t\t\t}\n\n\t\t\t\trestore_current_blog();\n\n\t\t\t} else {\n\t\t\t\tself::single_activate();\n\t\t\t}\n\n\t\t} else {\n\t\t\tself::single_activate();\n\t\t}\n\n\t}\n\n\t/**\n\t * Fired when the plugin is deactivated.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    boolean    $network_wide    True if WPMU superadmin uses\n\t *                                       \"Network Deactivate\" action, false if\n\t *                                       WPMU is disabled or plugin is\n\t *                                       deactivated on an individual blog.\n\t */\n\tpublic static function deactivate( $network_wide ) {\n\n\t\tif ( function_exists( 'is_multisite' ) && is_multisite() ) {\n\n\t\t\tif ( $network_wide ) {\n\n\t\t\t\t// Get all blog ids\n\t\t\t\t$blog_ids = self::get_blog_ids();\n\n\t\t\t\tforeach ( $blog_ids as $blog_id ) {\n\n\t\t\t\t\tswitch_to_blog( $blog_id );\n\t\t\t\t\tself::single_deactivate();\n\n\t\t\t\t}\n\n\t\t\t\trestore_current_blog();\n\n\t\t\t} else {\n\t\t\t\tself::single_deactivate();\n\t\t\t}\n\n\t\t} else {\n\t\t\tself::single_deactivate();\n\t\t}\n\n\t}\n\n\t/**\n\t * Fired when a new site is activated with a WPMU environment.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    int    $blog_id    ID of the new blog.\n\t */\n\tpublic function activate_new_site( $blog_id ) {\n\n\t\tif ( 1 !== did_action( 'wpmu_new_blog' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch_to_blog( $blog_id );\n\t\tself::single_activate();\n\t\trestore_current_blog();\n\n\t}\n\n\t/**\n\t * Get all blog ids of blogs in the current network that are:\n\t * - not archived\n\t * - not spam\n\t * - not deleted\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return   array|false    The blog ids, false if no matches.\n\t */\n\tprivate static function get_blog_ids() {\n\n\t\tglobal $wpdb;\n\n\t\t// get an array of blog ids\n\t\t$sql = \"SELECT blog_id FROM $wpdb->blogs\n\t\t\tWHERE archived = '0' AND spam = '0'\n\t\t\tAND deleted = '0'\";\n\n\t\treturn $wpdb->get_col( $sql );\n\n\t}\n\n\t/**\n\t * Fired for each blog when the plugin is activated.\n\t *\n\t * @since    1.0.0\n\t */\n\tprivate static function single_activate() {\n\t\tupdate_option('woo-popup_options', array( 'popup_content' => 'This will be your pop up content', 'popup_page' => ' ', 'popup_class' => 'notice', 'popup_permanent' => '0', 'start_date' => date('Y-m-d', time()), 'end_date' => date('Y-m-d', time()), 'popup_timezone' => 'Europe/Paris' ));\n\t}\n\n\t/**\n\t * Fired for each blog when the plugin is deactivated.\n\t *\n\t * @since    1.0.0\n\t */\n\tprivate static function single_deactivate() {\n\t\tdelete_option('woo-popup_options');\n\t}\n\n\t/**\n\t * Load the plugin text domain for translation.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function load_plugin_textdomain() {\n\n\t\t$domain = $this->plugin_slug;\n\t\t$locale = apply_filters( 'plugin_locale', get_locale(), $domain );\n\n\t\tload_textdomain( $domain, trailingslashit( WP_LANG_DIR ) . $domain . '/' . $domain . '-' . $locale . '.mo' );\n\t\tload_plugin_textdomain( $domain, FALSE, basename( plugin_dir_path( dirname( __FILE__ ) ) ) . '/languages/' );\n\n\t}\n\n\tpublic function trigger_plugin(){\n\t\tglobal $post;\n\t\t$options = get_option($this->options_slug);\n\t\t$tz = $options['popup_timezone'];\n\t\tdate_default_timezone_set($tz);\n\t\t$page = $options['popup_page'];\n\t\t$today = date('Y-m-d', time());\n\t\t$permanent = $options['popup_permanent'];\n\t\t$start_date = $options['start_date'];\n\t\t$end_date = $options['end_date'];\n\t\t$diff_start = strtotime($today) - strtotime($start_date);\n\t\t$diff_end = strtotime($end_date) - strtotime($today);\n\t\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins'  )  )  ) && is_shop()){\n\t\t\t$page_id = get_option( 'woocommerce_shop_page_id' );\n\t\t}else{\n\t\t\t$page_id = $post->ID;\n\t\t}\n\n\t\tif(($permanent == 1 || $diff_start >= 0 && $diff_end >= 0) && ($page == 'all' || $page_id == $page)){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic function activated_woocommerce(){\n\n\t\t$suffix = defined( 'SCRIPT_DEBUG' ) && SCRIPT_DEBUG ? '' : '.min';\n\t\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins' ) ) ) ) {\n\t\t\tglobal $woocommerce;\n\t\t\t$pp_dir['base'] = $woocommerce->plugin_url() . '/assets/js/prettyPhoto/jquery.prettyPhoto' . $suffix . '.js';\n\t\t\t$pp_dir['init'] = $woocommerce->plugin_url() . '/assets/js/prettyPhoto/jquery.prettyPhoto.init' . $suffix . '.js';\n\t\t\t$pp_dir['style'] = $woocommerce->plugin_url() . '/assets/css/prettyPhoto.css';\n\t\t\t$pp_dir['ver'] = $woocommerce->version;\n\t\t}else{\n\t\t\t$pp_dir['base'] = plugins_url( '/assets/js/prettyPhoto/jquery.prettyPhoto' . $suffix . '.js', __FILE__ );\n\t\t\t$pp_dir['init'] = plugins_url( '/assets/js/prettyPhoto/jquery.prettyPhoto.init' . $suffix . '.js', __FILE__ );\n\t\t\t$pp_dir['style'] = plugins_url( '/assets/css/prettyPhoto.css', __FILE__ );\n\t\t\t$pp_dir['ver'] = '';\n\t\t}\n\t\treturn $pp_dir;\n\t}\n\n\t/**\n\t * Register and enqueue public-facing style sheet.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function enqueue_styles() {\n\t\tif($this->trigger_plugin() == true){\n\t\t\t$pp_dir = $this->activated_woocommerce();\n\t\t\twp_enqueue_style( $this->plugin_slug . '-plugin-styles', plugins_url( 'assets/css/public.css', __FILE__ ), array(), self::VERSION );\n\t\t\twp_enqueue_style( 'woocommerce_prettyPhoto_css', $pp_dir['style'] );\n\t\t}\n\t}\n\n\t/**\n\t * Register and enqueues public-facing JavaScript files.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function enqueue_scripts() {\n\t\tif($this->trigger_plugin() == true){\n\t\t\tglobal $woocommerce;\n\t\t\t$pp_dir = $this->activated_woocommerce();\n\t\t\twp_enqueue_script( 'prettyPhoto', $pp_dir['base'] , array( 'jquery' ), $pp_dir['ver'], true );\n\t\t\twp_enqueue_script( 'prettyPhoto-init', $pp_dir['init'], array( 'jquery' ), $pp_dir['ver'], true );\n\n\t\t\twp_enqueue_script( $this->plugin_slug . '-plugin-script', plugins_url( 'assets/js/public.js', __FILE__ ), array( 'prettyPhoto-init' ), self::VERSION );\n\t\t}\n\t}\n\n\tpublic function pass_php_vars() {\n\t\tinclude_once( 'views/public.php' );\n\t}\n\n}\n", "<?php\n/**\n * Represents the view for the public-facing component of the plugin.\n *\n * This typically includes any information, if any, that is rendered to the\n * frontend of the theme when the plugin is activated.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://example.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n?>\n\n<!-- This file is used to markup the public facing aspect of the plugin. -->\n<?php\n\t$woo_popup_vars = get_option($this->options_slug);\n\t$popup_content = do_shortcode($woo_popup_vars['popup_content']);\n\t$formatted_popup = wpautop(stripslashes($popup_content));\n\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins' ) ) ) ){\n\t\t$class = 'woocommerce-'.$woo_popup_vars['popup_class'];\n\t}else{\n\t\t$class = 'woopopup-'.$woo_popup_vars['popup_class'];\n\t}\n\t$woo_popup_vars['popup_content'] = '<div id=\"woopopup\" style=\"display:none;\" aria-hidden=\"true\"><div class=\"'.$class.'\">'.$formatted_popup.'</div></div>';\n\twp_localize_script( $this->plugin_slug . '-plugin-script', 'woo_popup', $woo_popup_vars );\n", "<?php\n/**\n * The WordPress Plugin Boilerplate.\n *\n * A foundation off of which to build well-documented WordPress plugins that\n * also follow WordPress Coding Standards and PHP best practices.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n *\n * @wordpress-plugin\n * Plugin Name:       woo-popup\n * Plugin URI:        http://wordpress.org/plugins/woo-popup/\n * Description:       Display a pop up window on the page of your choice.\n * Version:           1.2.2\n * Author:            Guillaume Kanoufi\n * Author URI:        https://github.com/g-kanoufi\n * Text Domain:       woo-popup-locale\n * License:           GPL-2.0+\n * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt\n * Domain Path:       /languages\n * GitHub Plugin URI: https://github.com/<owner>/<repo>\n * WordPress-Plugin-Boilerplate: v2.6.1\n */\n\n// If this file is called directly, abort.\nif ( ! defined( 'WPINC' ) ) {\n\tdie;\n}\n\n/*----------------------------------------------------------------------------*\n * Public-Facing Functionality\n *----------------------------------------------------------------------------*/\n\nrequire_once( plugin_dir_path( __FILE__ ) . 'public/class-woo-popup.php' );\n\n/*\n * Register hooks that are fired when the plugin is activated or deactivated.\n * When the plugin is deleted, the uninstall.php file is loaded.\n */\nregister_activation_hook( __FILE__, array( 'WooPopup', 'activate' ) );\nregister_deactivation_hook( __FILE__, array( 'WooPopup', 'deactivate' ) );\n\n\nadd_action( 'plugins_loaded', array( 'WooPopup', 'get_instance' ) );\n\n/*----------------------------------------------------------------------------*\n * Dashboard and Administrative Functionality\n *----------------------------------------------------------------------------*/\n\nif ( is_admin() && ( ! defined( 'DOING_AJAX' ) || ! DOING_AJAX ) ) {\n\n\trequire_once( plugin_dir_path( __FILE__ ) . 'admin/class-woo-popup-admin.php' );\n\tadd_action( 'plugins_loaded', array( 'WooPopupAdmin', 'get_instance' ) );\n\n}\n"], "fixing_code": ["=== woo-popup ===\nContributors: Guillaume Kanoufi\nDonate link: http://lostwebdesigns.com/\nTags: pop up, woocommerce, woopopup, modal window, display info after a product is added\nRequires at least: 3.5.1\nTested up to: 4.2\nStable tag: 1.3.0\nLicense: GPLv2 or later\nLicense URI: http://www.gnu.org/licenses/gpl-2.0.html\n\nDisplay a pop up window after the chosen page is loaded.\n\n== Description ==\n\nA plugin to show a pop up window with any text, links, images, and even shortcodes when on the chosen page or all pages. Useful to present your customers with possible shipping delays if using woocommerce or anything else you can think about.\nYou can use it permanently or between 2 defined dates.\nWas made for woocommerce, late shipping or important info at the begining, but can be used on any wordpress installation.\n\n== Installation ==\n\n= Using The WordPress Dashboard =\n\n1. Navigate to the 'Add New' in the plugins dashboard\n2. Search for 'woo-popup'\n3. Click 'Install Now'\n4. Activate the plugin on the Plugin dashboard\n5. Customize the setting by clicking on the \"Woo Popup Settings\" menu tab\n\n= Uploading in WordPress Dashboard =\n\n1. Navigate to the 'Add New' in the plugins dashboard\n2. Navigate to the 'Upload' area\n3. Select `woo-popup.zip` from your computer\n4. Click 'Install Now'\n5. Activate the plugin in the Plugin dashboard\n\n= Using FTP =\n\n1. Download `woo-popup.zip`\n2. Extract the `woo-popup` directory to your computer\n3. Upload the `woo-popup` directory to the `/wp-content/plugins/` directory\n4. Activate the plugin in the Plugin dashboard\n\n\n== Frequently Asked Questions ==\n\n= A question that someone might have =\n\nAn answer to that question.\n\n= How to use woo-popup? =\n\nJust activate the plugin then go to the woo-popup menu and customize to your needs(text to show begining and end dates) and that's pretty much it.\n\n== Screenshots ==\n\n1. No screenshots yet\n\n== Changelog ==\n\n= 1.2.2 =\nFixed fatal error with is_shop\n\n= 1.2.1 =\nFix a fatal error due to timezone list\n\n= 1.2 =\nAdded option to display the popup permanently(no dates then need to be selected) and possibility to choose the timezone you are in.\nAlso possibility to display the popup on all pages.\n\n= 1.1 =\nAdded wpaoutop for formatting and possibility to add a class to the content.\n\n= 1.0 =\n* First Version of this plugin.\n\n\n== Updates ==\n\n= 1.2 =\nAdded option to display the popup permanently(no dates would then need to be selected) and possibility to choose the timezone you are in.\nAlso possibility to display the popup on all pages.\n\n= 1.1 =\nAdded wpaoutop for formatting and possibility to add a class to the content.\n", "<?php\n/**\n * woo-popup\n *\n * @package   WooPopupAdmin\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n\n/**\n * Plugin class. This class should ideally be used to work with the\n * administrative side of the WordPress site.\n *\n * If you're interested in introducing public-facing\n * functionality, then refer to `class-woo-popup.php`\n *\n * @package WooPopupAdmin\n * @author  Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n */\nclass WooPopupAdmin {\n\n\t/**\n\t * Instance of this class.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      object\n\t */\n\tprotected static $instance = null;\n\n\t/**\n\t * Slug of the plugin screen.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprotected $plugin_screen_hook_suffix = null;\n\n\t/**\n\t * Initialize the plugin by loading admin scripts & styles and adding a\n\t * settings page and menu.\n\t *\n\t * @since     1.0.0\n\t */\n\tprivate function __construct() {\n\n\n\t\t$plugin = WooPopup::get_instance();\n\t\t$this->plugin_slug = $plugin->get_plugin_slug();\n\t\t$this->options_slug = $plugin->get_plugin_options_slug();\n\t\t$this->options_data = $plugin->get_plugin_options_data();\n\n\t\t// Load admin style sheet and JavaScript.\n\t\tadd_action( 'admin_enqueue_scripts', array( $this, 'enqueue_admin_styles' ) );\n\t\tadd_action( 'admin_enqueue_scripts', array( $this, 'enqueue_admin_scripts' ) );\n\n\t\t// Add the options page and menu item.\n\t\tadd_action( 'admin_menu', array( $this, 'add_plugin_admin_menu' ) );\n\n\t\t// Add an action link pointing to the options page.\n\t\t$plugin_basename = plugin_basename( plugin_dir_path( __DIR__ ) . $this->plugin_slug . '.php' );\n\t\tadd_filter( 'plugin_action_links_' . $plugin_basename, array( $this, 'add_action_links' ) );\n\n\t\t// Add the options update action\n\t\tadd_action('admin_init', array($this, 'options_update'));\n\n\t}\n\n\t/**\n\t * Return an instance of this class.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    object    A single instance of this class.\n\t */\n\tpublic static function get_instance() {\n\n\t\t// If the single instance hasn't been set, set it now.\n\t\tif ( null == self::$instance ) {\n\t\t\tself::$instance = new self;\n\t\t}\n\n\t\treturn self::$instance;\n\t}\n\n\t/**\n\t * Register and enqueue admin-specific style sheet.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    null    Return early if no settings page is registered.\n\t */\n\tpublic function enqueue_admin_styles() {\n\n\t\tif ( ! isset( $this->plugin_screen_hook_suffix ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$screen = get_current_screen();\n\t\tif ( $this->plugin_screen_hook_suffix == $screen->id ) {\n\t\t\twp_enqueue_style( $this->plugin_slug .'-admin-styles', plugins_url( 'assets/css/admin.css', __FILE__ ), array(), WooPopup::VERSION );\n\t\t\twp_enqueue_style('jquery-ui-css', 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css');\n\t\t}\n\n\t}\n\n\t/**\n\t * Register and enqueue admin-specific JavaScript.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    null    Return early if no settings page is registered.\n\t */\n\tpublic function enqueue_admin_scripts() {\n\n\t\tif ( ! isset( $this->plugin_screen_hook_suffix ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$screen = get_current_screen();\n\t\tif ( $this->plugin_screen_hook_suffix == $screen->id ) {\n\t\t\twp_enqueue_script( 'jquery-ui-datepicker' );\n\t\t\twp_enqueue_script( $this->plugin_slug . '-admin-script', plugins_url( 'assets/js/admin.js', __FILE__ ), array( 'jquery' ), WooPopup::VERSION );\n\t\t}\n\n\t}\n\n\t/**\n\t * Register the administration menu for this plugin into the WordPress Dashboard menu.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function add_plugin_admin_menu() {\n\n\t\t/*\n\t\t * Add a settings page for this plugin to the Settings menu.\n\t\t *\n\t\t * NOTE:  Alternative menu locations are available via WordPress administration menu functions.\n\t\t *\n\t\t *        Administration Menus: http://codex.wordpress.org/Administration_Menus\n\t\t *\n\t\t */\n\t\t$this->plugin_screen_hook_suffix = add_menu_page(\n\t\t\t__( 'Woo Pop Up', $this->plugin_slug ),\n\t\t\t__( 'Woo Pop Up Settings', $this->plugin_slug ),\n\t\t\t'manage_options',\n\t\t\t$this->options_slug,\n\t\t\tarray( $this, 'display_plugin_admin_page' )\n\t\t);\n\n\t}\n\n\t/**\n\t * Render the settings page for this plugin.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function display_plugin_admin_page() {\n\t\tinclude_once( 'views/admin.php' );\n\t}\n\n\t/**\n\t * Add settings action link to the plugins page.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function add_action_links( $links ) {\n\n\n\t\treturn array_merge(\n\t\t\tarray(\n\t\t\t\t'settings' => '<a href=\"' . admin_url( 'admin.php?page=' . $this->options_slug ) . '\">' . __( 'Settings', $this->plugin_slug ) . '</a>'\n\t\t\t),\n\t\t\t$links\n\t\t);\n\n\t}\n\n\t/**\n\t * \tSave the plugin options\n\t *\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function options_update() {\n\t\tregister_setting( $this->options_slug, $this->options_slug, array($this, 'validate') );\n\t}\n\n\tpublic function validate($input) {\n\t    $valid = array();\n\t    $valid['popup_content'] = wp_kses_post($input['popup_content']);\n\t    $valid['popup_page'] = sanitize_text_field($input['popup_page']);\n\t    $valid['popup_class'] = sanitize_text_field($input['popup_class']);\n\t    $valid['popup_theme'] = sanitize_text_field($input['popup_theme']);\n\t    $valid['start_date'] = sanitize_text_field($input['start_date']);\n\t    $valid['end_date'] = sanitize_text_field($input['end_date']);\n\t    $valid['popup_timezone'] = sanitize_text_field($input['popup_timezone']);\n\n\t    if(isset($input['popup_permanent'])){\n\t    \t  $valid['popup_permanent'] = sanitize_text_field($input['popup_permanent']);\n\t    }else{\n\t    \t $valid['popup_permanent'] = '0';\n\t    }\n\n\n\t    if (strlen($valid['popup_content']) == 0) {\n\t        add_settings_error(\n\t                'popup_content',                     // Setting title\n\t                'popup_content_texterror',            // Error ID\n\t                'Please enter a text to show on the pop up',     // Error message\n\t                'error'                         // Type of message\n\t        );\n\n\t        // Set it to the default value\n\t        $valid['popup_content'] = $this->data['popup_content'];\n\t    }\n\n\t    if (strlen($valid['popup_page']) == 0) {\n\t        add_settings_error(\n\t                'popup_page',\n\t                'popup_page_texterror',\n\t                'Please choose a page to display the pop up to',\n\t                'error'\n\t        );\n\n\t        $valid['popup_page'] = $this->data['popup_page'];\n\t    }\n\t    if (strlen($valid['popup_class']) == 0) {\n\t        add_settings_error(\n\t                'popup_class',\n\t                'popup_class_texterror',\n\t                'Please choose a class to display the pop up to',\n\t                'error'\n\t        );\n\n\t        $valid['popup_class'] = $this->data['popup_class'];\n\t    }\n\t    if (strlen($valid['popup_theme']) == 0) {\n\t        add_settings_error(\n\t                'popup_theme',\n\t                'popup_theme_texterror',\n\t                'Please choose a theme to display the pop up to',\n\t                'error'\n\t        );\n\n\t        $valid['popup_class'] = $this->data['popup_class'];\n\t    }\n\t    if (strlen($valid['start_date']) == 0) {\n\t        add_settings_error(\n\t                'start_date',\n\t                'start_date_texterror',\n\t                'Please enter a beginning date',\n\t                'error'\n\t        );\n\n\t        $valid['start_date'] = $this->data['start_date'];\n\t    }\n\n\t    if (strlen($valid['end_date']) == 0) {\n\t        add_settings_error(\n\t                'end_date',\n\t                'end_date_texterror',\n\t                'Please enter a beginning date',\n\t                'error'\n\t        );\n\n\t        $valid['end_date'] = $this->data['end_date'];\n\t    }\n\n\t    return $valid;\n\t}\n\n}\n", "<?php\n/**\n * Represents the view for the administration dashboard.\n *\n * This includes the header, options, and other information that should provide\n * The User Interface to the end user.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://example.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n?>\n\n<div class=\"wrap\">\n\n\n\t<h2><?php echo esc_html( get_admin_page_title() ); ?></h2>\n\n\t<div class=\"wrap metabox-holder columns-2\">\n\t      <form method=\"post\" name=\"options\" action=\"options.php\">\n\t\t\t<?php\n\t\t\t\t$options = get_option($this->options_slug);\n\t\t\t\t/*\n\t\t\t\t* Grab all value if already set\n\t\t\t\t*\n\t\t\t\t*/\n\t\t\t\t$content = $options['popup_content'];\n\t\t\t\t$page = $options['popup_page'];\n\t\t\t\t$class = $options['popup_class'];\n\t\t\t\t$theme = $options['popup_theme'];\n\t\t\t\t// $use_button = $options['popup_use_button'];\n\t\t\t\t$permanent = $options['popup_permanent'];\n\t\t\t\t$start_date = $options['start_date'];\n\t\t\t\t$end_date = $options['end_date'];\n\t\t\t\t$timezone = $options['popup_timezone'];\n\n\t\t\t\t/*\n\t\t\t\t* Set up hidden fields\n\t\t\t\t*\n\t\t\t\t*/\n\t\t\t\tsettings_fields($this->options_slug);\n\t\t\t?>\n\n\n\t\t\t<?php\n\t\t\t// editor_id cannot have brackets and must be lowercase\n\t\t\t$editor_id = 'popup_content';\n\t\t\t// textarea_name in array can have brackets!\n\t\t\t$settings = array(\n\t\t\t\t'wpautop' => true, // use wpautop?\n\t\t\t\t'media_buttons' => true, // show insert/upload button(s)\n\t\t\t\t'textarea_name' => $this->options_slug.'[popup_content]', // set the textarea name to something different, square brackets [] can be used here\n\t\t\t\t'textarea_rows' => get_option('default_post_edit_rows', 10), // rows=\"...\"\n\t\t\t\t'tabindex' => '',\n\t\t\t\t'editor_css' => '', // intended for extra styles for both visual and HTML editors buttons, needs to include the <style> tags, can use \"scoped\".\n\t\t\t\t'editor_class' => '', // add extra class(es) to the editor textarea\n\t\t\t\t'teeny' => false, // output the minimal editor config used in Press This\n\t\t\t\t'dfw' => true, // replace the default fullscreen with DFW (supported on the front-end in WordPress 3.4)\n\t\t\t\t'tinymce' => true, // load TinyMCE, can be used to pass settings directly to TinyMCE using an array()\n\t\t\t\t'quicktags' => true\n\t\t\t);\n\t\t\twp_editor($content, $editor_id, $settings);?>\n\n\t            <table width=\"100%\" cellpadding=\"10\" class=\"form-table\">\n\t            \t<tr>\n\t            \t\t<th scope=\"row\">\n\t            \t\t\t<label><?php _e('Choose the page you want to display your popup window (default is cart page)', $this->plugin_slug);?>:</label>\n\t            \t\t</th>\n\t            \t\t<td>\n\t            \t\t\t<?php\n\t            \t\t\t\t$args = array(\n\t            \t\t\t\t\t'show_option_none' => 'All',\n\t            \t\t\t\t\t'option_none_value' => 'all',\n\t            \t\t\t\t\t'selected' => $page,\n\t            \t\t\t\t\t'name' => $this->options_slug.'[popup_page]',\n\t            \t\t\t\t);\n\t            \t\t\t\t$pages = wp_dropdown_pages($args);\n\t            \t\t\t?>\n\t            \t\t</td>\n\n\t            \t</tr>\n\t            \t<tr>\n\t            \t\t<th scope=\"row\">\n\t            \t\t\t<label><?php _e('Choose the prettyPhoto Modal theme color', $this->plugin_slug);?>:</label>\n\t            \t\t</th>\n\t            \t\t<td>\n\t            \t\t\t<select name=\"<?php echo $this->options_slug;?>[popup_theme]\" >\n\t            \t\t\t\tlight_rounded / dark_rounded / light_square / dark_square / facebook\n\t            \t\t\t\t<option value=\"pp_default\" <?php if($theme == 'pp_default') echo 'selected';?>>Default</option>\n\t\t\t\t\t\t<option value=\"light_rounded\" <?php if($theme == 'light_rounded') echo 'selected';?>>Light Rounded</option>\n\t\t\t\t\t\t<option value=\"dark_rounded\" <?php if($theme == 'dark_rounded') echo 'selected';?>>Dark Rounded</option>\n\t\t\t\t\t\t<option value=\"light_square\" <?php if($theme == 'light_square') echo 'selected';?>>Light Square</option>\n\t\t\t\t\t\t<option value=\"dark_square\" <?php if($theme == 'dark_square') echo 'selected';?>>Dark Square</option>\n\t\t\t\t\t\t<option value=\"facebook\" <?php if($theme == 'facebook') echo 'selected';?>>Facebook</option>\n\t            \t\t\t</select>\n\t            \t\t</td>\n\n\t            \t</tr>\n\t            \t<tr>\n\t            \t<tr>\n\t            \t\t<th scope=\"row\">\n\t            \t\t\t<label><?php _e('If using woocommerce, you can choose from woocommerce-message classes (message, info or error) else it will add a custom class of woopopup-yourchoice (your choice being: message, info or error) so you will be able to style it in your css', $this->plugin_slug);?>:</label>\n\t            \t\t</th>\n\t            \t\t<td>\n\t            \t\t\t<select name=\"<?php echo $this->options_slug;?>[popup_class]\" >\n\t            \t\t\t\t<option value=\"notice\" <?php if($class == 'notice') echo 'selected';?>>Notice (default non woocommerce class)</option>\n\t\t\t\t\t\t\t<option value=\"message\" <?php if($class == 'message') echo 'selected';?>>Message</option>\n\t\t\t\t\t\t\t<option value=\"info\" <?php if($class == 'info') echo 'selected';?>>Info</option>\n\t\t\t\t\t\t\t<option value=\"error\" <?php if($class == 'error') echo 'selected';?>>Error</option>\n\t            \t\t\t</select>\n\t            \t\t</td>\n\n\t            \t</tr>\n\t            \t<tr>\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Make the popup permanent (no dates selections)', $this->plugin_slug);?>:</label>\n\t\t                </th>\n\t\t                <td>\n\t\t                    <input type=\"checkbox\" id=\"woo-popup_permanent\" name=\"<?php echo $this->options_slug;?>[popup_permanent]\" value=\"1\" <?php if($permanent == '1') echo 'checked';?>/>\n\t                    </td>\n\t                 </tr>\n\t                <tr class=\"woo-popup_dates\">\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Begining Date', $this->plugin_slug);?>:</label>\n\t\t                </th>\n\t\t                <td>\n\t\t                    <input type=\"text\" id=\"woo-popup-from\" class=\"wpopup_date\" name=\"<?php echo $this->options_slug;?>[start_date]\" value=\"<?php echo $start_date;?>\"/>\n\t                    </td>\n\t                 </tr>\n\t                 <tr class=\"woo-popup_dates\">\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('End Date', $this->plugin_slug);?>:</label>\n\t\t               </th>\n\t\t               <td>\n\t\t                    <input type=\"text\" id=\"woo-popup-to\" class=\"wpopup_date\" name=\"<?php echo $this->options_slug;?>[end_date]\" value=\"<?php echo $end_date;?>\"/>\n\t                    </td>\n\t                </tr>\n\t                <tr class=\"woo-popup_dates\">\n\t                \t\t<?php $tzl = DateTimeZone::listIdentifiers();?>\n\t                    <th scope=\"row\">\n\t\t                    <label><?php _e('Choose your Timezone', $this->plugin_slug);?>:</label>\n\t\t               </th>\n\t\t               <td>\n\t\t                    <select name=\"<?php echo $this->options_slug;?>[popup_timezone]\" >\n\t            \t\t\t\t<?php foreach ($tzl as $tz) :?>\n\t            \t\t\t\t\t<option value=\"<?php echo $tz;?>\" <?php if($timezone == $tz) echo 'selected';?>><?php echo $tz;?></option>\n\t            \t\t\t\t<?php endforeach;?>\n\t            \t\t\t</select>\n\t                    </td>\n\t                </tr>\n\t            </table>\n\n\t            <p class=\"submit\">\n\t                <input type=\"submit\" class=\"button-primary\" name=\"Submit\" value=\"Save Changes\" />\n\t            </p>\n            </form>\n\n      </div>\n</div>\n", "div.pp_default .pp_top,div.pp_default .pp_top .pp_middle,div.pp_default .pp_top .pp_left,div.pp_default .pp_top .pp_right,div.pp_default .pp_bottom,div.pp_default .pp_bottom .pp_left,div.pp_default .pp_bottom .pp_middle,div.pp_default .pp_bottom .pp_right{height:13px}\ndiv.pp_default .pp_top .pp_left{background:url(../images/prettyPhoto/default/sprite.png) -78px -93px no-repeat}\ndiv.pp_default .pp_top .pp_middle{background:url(../images/prettyPhoto/default/sprite_x.png) top left repeat-x}\ndiv.pp_default .pp_top .pp_right{background:url(../images/prettyPhoto/default/sprite.png) -112px -93px no-repeat}\ndiv.pp_default .pp_content .ppt{color:#f8f8f8}\ndiv.pp_default .pp_content_container .pp_left{background:url(../images/prettyPhoto/default/sprite_y.png) -7px 0 repeat-y;padding-left:13px}\ndiv.pp_default .pp_content_container .pp_right{background:url(../images/prettyPhoto/default/sprite_y.png) top right repeat-y;padding-right:13px}\ndiv.pp_default .pp_next:hover{background:url(../images/prettyPhoto/default/sprite_next.png) center right no-repeat;cursor:pointer}\ndiv.pp_default .pp_previous:hover{background:url(../images/prettyPhoto/default/sprite_prev.png) center left no-repeat;cursor:pointer}\ndiv.pp_default .pp_expand{background:url(../images/prettyPhoto/default/sprite.png) 0 -29px no-repeat;cursor:pointer;width:28px;height:28px}\ndiv.pp_default .pp_expand:hover{background:url(../images/prettyPhoto/default/sprite.png) 0 -56px no-repeat;cursor:pointer}\ndiv.pp_default .pp_contract{background:url(../images/prettyPhoto/default/sprite.png) 0 -84px no-repeat;cursor:pointer;width:28px;height:28px}\ndiv.pp_default .pp_contract:hover{background:url(../images/prettyPhoto/default/sprite.png) 0 -113px no-repeat;cursor:pointer}\ndiv.pp_default .pp_close{width:30px;height:30px;background:url(../images/prettyPhoto/default/sprite.png) 2px 1px no-repeat;cursor:pointer}\ndiv.pp_default .pp_gallery ul li a{background:url(../images/prettyPhoto/default/default_thumb.png) center center #f8f8f8;border:1px solid #aaa}\ndiv.pp_default .pp_social{margin-top:7px}\ndiv.pp_default .pp_gallery a.pp_arrow_previous,div.pp_default .pp_gallery a.pp_arrow_next{position:static;left:auto}\ndiv.pp_default .pp_nav .pp_play,div.pp_default .pp_nav .pp_pause{background:url(../images/prettyPhoto/default/sprite.png) -51px 1px no-repeat;height:30px;width:30px}\ndiv.pp_default .pp_nav .pp_pause{background-position:-51px -29px}\ndiv.pp_default a.pp_arrow_previous,div.pp_default a.pp_arrow_next{background:url(../images/prettyPhoto/default/sprite.png) -31px -3px no-repeat;height:20px;width:20px;margin:4px 0 0}\ndiv.pp_default a.pp_arrow_next{left:52px;background-position:-82px -3px}\ndiv.pp_default .pp_content_container .pp_details{margin-top:5px}\ndiv.pp_default .pp_nav{clear:none;height:30px;width:110px;position:relative}\ndiv.pp_default .pp_nav .currentTextHolder{font-family:Georgia;font-style:italic;color:#999;font-size:11px;left:75px;line-height:25px;position:absolute;top:2px;margin:0;padding:0 0 0 10px}\ndiv.pp_default .pp_close:hover,div.pp_default .pp_nav .pp_play:hover,div.pp_default .pp_nav .pp_pause:hover,div.pp_default .pp_arrow_next:hover,div.pp_default .pp_arrow_previous:hover{opacity:0.7}\ndiv.pp_default .pp_description{font-size:11px;font-weight:700;line-height:14px;margin:5px 50px 5px 0}\ndiv.pp_default .pp_bottom .pp_left{background:url(../images/prettyPhoto/default/sprite.png) -78px -127px no-repeat}\ndiv.pp_default .pp_bottom .pp_middle{background:url(../images/prettyPhoto/default/sprite_x.png) bottom left repeat-x}\ndiv.pp_default .pp_bottom .pp_right{background:url(../images/prettyPhoto/default/sprite.png) -112px -127px no-repeat}\ndiv.pp_default .pp_loaderIcon{background:url(../images/prettyPhoto/default/loader.gif) center center no-repeat}\ndiv.light_rounded .pp_top .pp_left{background:url(../images/prettyPhoto/light_rounded/sprite.png) -88px -53px no-repeat}\ndiv.light_rounded .pp_top .pp_right{background:url(../images/prettyPhoto/light_rounded/sprite.png) -110px -53px no-repeat}\ndiv.light_rounded .pp_next:hover{background:url(../images/prettyPhoto/light_rounded/btnNext.png) center right no-repeat;cursor:pointer}\ndiv.light_rounded .pp_previous:hover{background:url(../images/prettyPhoto/light_rounded/btnPrevious.png) center left no-repeat;cursor:pointer}\ndiv.light_rounded .pp_expand{background:url(../images/prettyPhoto/light_rounded/sprite.png) -31px -26px no-repeat;cursor:pointer}\ndiv.light_rounded .pp_expand:hover{background:url(../images/prettyPhoto/light_rounded/sprite.png) -31px -47px no-repeat;cursor:pointer}\ndiv.light_rounded .pp_contract{background:url(../images/prettyPhoto/light_rounded/sprite.png) 0 -26px no-repeat;cursor:pointer}\ndiv.light_rounded .pp_contract:hover{background:url(../images/prettyPhoto/light_rounded/sprite.png) 0 -47px no-repeat;cursor:pointer}\ndiv.light_rounded .pp_close{width:75px;height:22px;background:url(../images/prettyPhoto/light_rounded/sprite.png) -1px -1px no-repeat;cursor:pointer}\ndiv.light_rounded .pp_nav .pp_play{background:url(../images/prettyPhoto/light_rounded/sprite.png) -1px -100px no-repeat;height:15px;width:14px}\ndiv.light_rounded .pp_nav .pp_pause{background:url(../images/prettyPhoto/light_rounded/sprite.png) -24px -100px no-repeat;height:15px;width:14px}\ndiv.light_rounded .pp_arrow_previous{background:url(../images/prettyPhoto/light_rounded/sprite.png) 0 -71px no-repeat}\ndiv.light_rounded .pp_arrow_next{background:url(../images/prettyPhoto/light_rounded/sprite.png) -22px -71px no-repeat}\ndiv.light_rounded .pp_bottom .pp_left{background:url(../images/prettyPhoto/light_rounded/sprite.png) -88px -80px no-repeat}\ndiv.light_rounded .pp_bottom .pp_right{background:url(../images/prettyPhoto/light_rounded/sprite.png) -110px -80px no-repeat}\ndiv.dark_rounded .pp_top .pp_left{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -88px -53px no-repeat}\ndiv.dark_rounded .pp_top .pp_right{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -110px -53px no-repeat}\ndiv.dark_rounded .pp_content_container .pp_left{background:url(../images/prettyPhoto/dark_rounded/contentPattern.png) top left repeat-y}\ndiv.dark_rounded .pp_content_container .pp_right{background:url(../images/prettyPhoto/dark_rounded/contentPattern.png) top right repeat-y}\ndiv.dark_rounded .pp_next:hover{background:url(../images/prettyPhoto/dark_rounded/btnNext.png) center right no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_previous:hover{background:url(../images/prettyPhoto/dark_rounded/btnPrevious.png) center left no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_expand{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -31px -26px no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_expand:hover{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -31px -47px no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_contract{background:url(../images/prettyPhoto/dark_rounded/sprite.png) 0 -26px no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_contract:hover{background:url(../images/prettyPhoto/dark_rounded/sprite.png) 0 -47px no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_close{width:75px;height:22px;background:url(../images/prettyPhoto/dark_rounded/sprite.png) -1px -1px no-repeat;cursor:pointer}\ndiv.dark_rounded .pp_description{margin-right:85px;color:#fff}\ndiv.dark_rounded .pp_nav .pp_play{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -1px -100px no-repeat;height:15px;width:14px}\ndiv.dark_rounded .pp_nav .pp_pause{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -24px -100px no-repeat;height:15px;width:14px}\ndiv.dark_rounded .pp_arrow_previous{background:url(../images/prettyPhoto/dark_rounded/sprite.png) 0 -71px no-repeat}\ndiv.dark_rounded .pp_arrow_next{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -22px -71px no-repeat}\ndiv.dark_rounded .pp_bottom .pp_left{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -88px -80px no-repeat}\ndiv.dark_rounded .pp_bottom .pp_right{background:url(../images/prettyPhoto/dark_rounded/sprite.png) -110px -80px no-repeat}\ndiv.dark_rounded .pp_loaderIcon{background:url(../images/prettyPhoto/dark_rounded/loader.gif) center center no-repeat}\ndiv.dark_square .pp_left,div.dark_square .pp_middle,div.dark_square .pp_right,div.dark_square .pp_content{background:#000}\ndiv.dark_square .pp_description{color:#fff;margin:0 85px 0 0}\ndiv.dark_square .pp_loaderIcon{background:url(../images/prettyPhoto/dark_square/loader.gif) center center no-repeat}\ndiv.dark_square .pp_expand{background:url(../images/prettyPhoto/dark_square/sprite.png) -31px -26px no-repeat;cursor:pointer}\ndiv.dark_square .pp_expand:hover{background:url(../images/prettyPhoto/dark_square/sprite.png) -31px -47px no-repeat;cursor:pointer}\ndiv.dark_square .pp_contract{background:url(../images/prettyPhoto/dark_square/sprite.png) 0 -26px no-repeat;cursor:pointer}\ndiv.dark_square .pp_contract:hover{background:url(../images/prettyPhoto/dark_square/sprite.png) 0 -47px no-repeat;cursor:pointer}\ndiv.dark_square .pp_close{width:75px;height:22px;background:url(../images/prettyPhoto/dark_square/sprite.png) -1px -1px no-repeat;cursor:pointer}\ndiv.dark_square .pp_nav{clear:none}\ndiv.dark_square .pp_nav .pp_play{background:url(../images/prettyPhoto/dark_square/sprite.png) -1px -100px no-repeat;height:15px;width:14px}\ndiv.dark_square .pp_nav .pp_pause{background:url(../images/prettyPhoto/dark_square/sprite.png) -24px -100px no-repeat;height:15px;width:14px}\ndiv.dark_square .pp_arrow_previous{background:url(../images/prettyPhoto/dark_square/sprite.png) 0 -71px no-repeat}\ndiv.dark_square .pp_arrow_next{background:url(../images/prettyPhoto/dark_square/sprite.png) -22px -71px no-repeat}\ndiv.dark_square .pp_next:hover{background:url(../images/prettyPhoto/dark_square/btnNext.png) center right no-repeat;cursor:pointer}\ndiv.dark_square .pp_previous:hover{background:url(../images/prettyPhoto/dark_square/btnPrevious.png) center left no-repeat;cursor:pointer}\ndiv.light_square .pp_expand{background:url(../images/prettyPhoto/light_square/sprite.png) -31px -26px no-repeat;cursor:pointer}\ndiv.light_square .pp_expand:hover{background:url(../images/prettyPhoto/light_square/sprite.png) -31px -47px no-repeat;cursor:pointer}\ndiv.light_square .pp_contract{background:url(../images/prettyPhoto/light_square/sprite.png) 0 -26px no-repeat;cursor:pointer}\ndiv.light_square .pp_contract:hover{background:url(../images/prettyPhoto/light_square/sprite.png) 0 -47px no-repeat;cursor:pointer}\ndiv.light_square .pp_close{width:75px;height:22px;background:url(../images/prettyPhoto/light_square/sprite.png) -1px -1px no-repeat;cursor:pointer}\ndiv.light_square .pp_nav .pp_play{background:url(../images/prettyPhoto/light_square/sprite.png) -1px -100px no-repeat;height:15px;width:14px}\ndiv.light_square .pp_nav .pp_pause{background:url(../images/prettyPhoto/light_square/sprite.png) -24px -100px no-repeat;height:15px;width:14px}\ndiv.light_square .pp_arrow_previous{background:url(../images/prettyPhoto/light_square/sprite.png) 0 -71px no-repeat}\ndiv.light_square .pp_arrow_next{background:url(../images/prettyPhoto/light_square/sprite.png) -22px -71px no-repeat}\ndiv.light_square .pp_next:hover{background:url(../images/prettyPhoto/light_square/btnNext.png) center right no-repeat;cursor:pointer}\ndiv.light_square .pp_previous:hover{background:url(../images/prettyPhoto/light_square/btnPrevious.png) center left no-repeat;cursor:pointer}\ndiv.facebook .pp_top .pp_left{background:url(../images/prettyPhoto/facebook/sprite.png) -88px -53px no-repeat}\ndiv.facebook .pp_top .pp_middle{background:url(../images/prettyPhoto/facebook/contentPatternTop.png) top left repeat-x}\ndiv.facebook .pp_top .pp_right{background:url(../images/prettyPhoto/facebook/sprite.png) -110px -53px no-repeat}\ndiv.facebook .pp_content_container .pp_left{background:url(../images/prettyPhoto/facebook/contentPatternLeft.png) top left repeat-y}\ndiv.facebook .pp_content_container .pp_right{background:url(../images/prettyPhoto/facebook/contentPatternRight.png) top right repeat-y}\ndiv.facebook .pp_expand{background:url(../images/prettyPhoto/facebook/sprite.png) -31px -26px no-repeat;cursor:pointer}\ndiv.facebook .pp_expand:hover{background:url(../images/prettyPhoto/facebook/sprite.png) -31px -47px no-repeat;cursor:pointer}\ndiv.facebook .pp_contract{background:url(../images/prettyPhoto/facebook/sprite.png) 0 -26px no-repeat;cursor:pointer}\ndiv.facebook .pp_contract:hover{background:url(../images/prettyPhoto/facebook/sprite.png) 0 -47px no-repeat;cursor:pointer}\ndiv.facebook .pp_close{width:22px;height:22px;background:url(../images/prettyPhoto/facebook/sprite.png) -1px -1px no-repeat;cursor:pointer}\ndiv.facebook .pp_description{margin:0 37px 0 0}\ndiv.facebook .pp_loaderIcon{background:url(../images/prettyPhoto/facebook/loader.gif) center center no-repeat}\ndiv.facebook .pp_arrow_previous{background:url(../images/prettyPhoto/facebook/sprite.png) 0 -71px no-repeat;height:22px;margin-top:0;width:22px}\ndiv.facebook .pp_arrow_previous.disabled{background-position:0 -96px;cursor:default}\ndiv.facebook .pp_arrow_next{background:url(../images/prettyPhoto/facebook/sprite.png) -32px -71px no-repeat;height:22px;margin-top:0;width:22px}\ndiv.facebook .pp_arrow_next.disabled{background-position:-32px -96px;cursor:default}\ndiv.facebook .pp_nav{margin-top:0}\ndiv.facebook .pp_nav p{font-size:15px;padding:0 3px 0 4px}\ndiv.facebook .pp_nav .pp_play{background:url(../images/prettyPhoto/facebook/sprite.png) -1px -123px no-repeat;height:22px;width:22px}\ndiv.facebook .pp_nav .pp_pause{background:url(../images/prettyPhoto/facebook/sprite.png) -32px -123px no-repeat;height:22px;width:22px}\ndiv.facebook .pp_next:hover{background:url(../images/prettyPhoto/facebook/btnNext.png) center right no-repeat;cursor:pointer}\ndiv.facebook .pp_previous:hover{background:url(../images/prettyPhoto/facebook/btnPrevious.png) center left no-repeat;cursor:pointer}\ndiv.facebook .pp_bottom .pp_left{background:url(../images/prettyPhoto/facebook/sprite.png) -88px -80px no-repeat}\ndiv.facebook .pp_bottom .pp_middle{background:url(../images/prettyPhoto/facebook/contentPatternBottom.png) top left repeat-x}\ndiv.facebook .pp_bottom .pp_right{background:url(../images/prettyPhoto/facebook/sprite.png) -110px -80px no-repeat}\ndiv.pp_pic_holder a:focus{outline:none}\ndiv.pp_overlay{background:#000;display:none;left:0;position:absolute;top:0;width:100%;z-index:9500}\ndiv.pp_pic_holder{display:none;position:absolute;width:100px;z-index:10000}\n.pp_content{height:40px;min-width:40px}\n* html .pp_content{width:40px}\n.pp_content_container{position:relative;text-align:left;width:100%}\n.pp_content_container .pp_left{padding-left:20px}\n.pp_content_container .pp_right{padding-right:20px}\n.pp_content_container .pp_details{float:left;margin:10px 0 2px}\n.pp_description{display:none;margin:0}\n.pp_social{float:left;margin:0}\n.pp_social .facebook{float:left;margin-left:5px;width:55px;overflow:hidden}\n.pp_social .twitter{float:left}\n.pp_nav{clear:right;float:left;margin:3px 10px 0 0}\n.pp_nav p{float:left;white-space:nowrap;margin:2px 4px}\n.pp_nav .pp_play,.pp_nav .pp_pause{float:left;margin-right:4px;text-indent:-10000px}\na.pp_arrow_previous,a.pp_arrow_next{display:block;float:left;height:15px;margin-top:3px;overflow:hidden;text-indent:-10000px;width:14px}\n.pp_hoverContainer{position:absolute;top:0;width:100%;z-index:2000}\n.pp_gallery{display:none;left:50%;margin-top:-50px;position:absolute;z-index:10000}\n.pp_gallery div{float:left;overflow:hidden;position:relative}\n.pp_gallery ul{float:left;height:35px;position:relative;white-space:nowrap;margin:0 0 0 5px;padding:0}\n.pp_gallery ul a{border:1px rgba(0,0,0,0.5) solid;display:block;float:left;height:33px;overflow:hidden}\n.pp_gallery ul a img{border:0}\n.pp_gallery li{display:block;float:left;margin:0 5px 0 0;padding:0}\n.pp_gallery li.default a{background:url(../images/prettyPhoto/facebook/default_thumbnail.gif) 0 0 no-repeat;display:block;height:33px;width:50px}\n.pp_gallery .pp_arrow_previous,.pp_gallery .pp_arrow_next{margin-top:7px!important}\na.pp_next{background:url(../images/prettyPhoto/light_rounded/btnNext.png) 10000px 10000px no-repeat;display:block;float:right;height:100%;text-indent:-10000px;width:49%}\na.pp_previous{background:url(../images/prettyPhoto/light_rounded/btnNext.png) 10000px 10000px no-repeat;display:block;float:left;height:100%;text-indent:-10000px;width:49%}\na.pp_expand,a.pp_contract{cursor:pointer;display:none;height:20px;position:absolute;right:30px;text-indent:-10000px;top:10px;width:20px;z-index:20000}\na.pp_close{position:absolute;right:0;top:0;display:block;line-height:22px;text-indent:-10000px}\n.pp_loaderIcon{display:block;height:24px;left:50%;position:absolute;top:50%;width:24px;margin:-12px 0 0 -12px}\n#pp_full_res{line-height:1!important}\n#pp_full_res .pp_inline{text-align:left}\n#pp_full_res .pp_inline p{margin:0 0 15px}\ndiv.ppt{color:#fff;display:none;font-size:17px;z-index:9999;margin:0 0 5px 15px}\ndiv.pp_default .pp_content,div.light_rounded .pp_content{background-color:#fff}\ndiv.pp_default #pp_full_res .pp_inline,div.light_rounded .pp_content .ppt,div.light_rounded #pp_full_res .pp_inline,div.light_square .pp_content .ppt,div.light_square #pp_full_res .pp_inline,div.facebook .pp_content .ppt,div.facebook #pp_full_res .pp_inline{color:#000}\ndiv.pp_default .pp_gallery ul li a:hover,div.pp_default .pp_gallery ul li.selected a,.pp_gallery ul a:hover,.pp_gallery li.selected a{border-color:#fff}\ndiv.pp_default .pp_details,div.light_rounded .pp_details,div.dark_rounded .pp_details,div.dark_square .pp_details,div.light_square .pp_details,div.facebook .pp_details{position:relative}\ndiv.light_rounded .pp_top .pp_middle,div.light_rounded .pp_content_container .pp_left,div.light_rounded .pp_content_container .pp_right,div.light_rounded .pp_bottom .pp_middle,div.light_square .pp_left,div.light_square .pp_middle,div.light_square .pp_right,div.light_square .pp_content,div.facebook .pp_content{background:#fff}\ndiv.light_rounded .pp_description,div.light_square .pp_description{margin-right:85px}\ndiv.light_rounded .pp_gallery a.pp_arrow_previous,div.light_rounded .pp_gallery a.pp_arrow_next,div.dark_rounded .pp_gallery a.pp_arrow_previous,div.dark_rounded .pp_gallery a.pp_arrow_next,div.dark_square .pp_gallery a.pp_arrow_previous,div.dark_square .pp_gallery a.pp_arrow_next,div.light_square .pp_gallery a.pp_arrow_previous,div.light_square .pp_gallery a.pp_arrow_next{margin-top:12px!important}\ndiv.light_rounded .pp_arrow_previous.disabled,div.dark_rounded .pp_arrow_previous.disabled,div.dark_square .pp_arrow_previous.disabled,div.light_square .pp_arrow_previous.disabled{background-position:0 -87px;cursor:default}\ndiv.light_rounded .pp_arrow_next.disabled,div.dark_rounded .pp_arrow_next.disabled,div.dark_square .pp_arrow_next.disabled,div.light_square .pp_arrow_next.disabled{background-position:-22px -87px;cursor:default}\ndiv.light_rounded .pp_loaderIcon,div.light_square .pp_loaderIcon{background:url(../images/prettyPhoto/light_rounded/loader.gif) center center no-repeat}\ndiv.dark_rounded .pp_top .pp_middle,div.dark_rounded .pp_content,div.dark_rounded .pp_bottom .pp_middle{background:url(../images/prettyPhoto/dark_rounded/contentPattern.png) top left repeat}\ndiv.dark_rounded .currentTextHolder,div.dark_square .currentTextHolder{color:#c4c4c4}\ndiv.dark_rounded #pp_full_res .pp_inline,div.dark_square #pp_full_res .pp_inline{color:#fff}\n.pp_top,.pp_bottom{height:20px;position:relative}\n* html .pp_top,* html .pp_bottom{padding:0 20px}\n.pp_top .pp_left,.pp_bottom .pp_left{height:20px;left:0;position:absolute;width:20px}\n.pp_top .pp_middle,.pp_bottom .pp_middle{height:20px;left:20px;position:absolute;right:20px}\n* html .pp_top .pp_middle,* html .pp_bottom .pp_middle{left:0;position:static}\n.pp_top .pp_right,.pp_bottom .pp_right{height:20px;left:auto;position:absolute;right:0;top:0;width:20px}\n.pp_fade,.pp_gallery li.default a img{display:none}\n", "(function($){\n\t$(function(){\n\t\t\"use strict\";\n\n\t\t//Append the inline content to the body\n\t\t$(woo_popup['popup_content']).appendTo('body');\n\n\t\tvar popupTheme = plugin_options_vars.theme;\n\n\t\t// Init Lightbox\n\t\t$().prettyPhoto({\n\t\t\topacity: 0.80, /* Value between 0 and 1 */\n\t\t\tshow_title: true, /* true/false */\n\t\t\tallow_resize: true, /* Resize the photos bigger than viewport. true/false */\n\t\t\ttheme: popupTheme, /* light_rounded / dark_rounded / light_square / dark_square / facebook */\n\t\t\thorizontal_padding: 20, /* The padding on each side of the picture */\n\t\t\tautoplay: true, /* Automatically start videos: True/False */\n\t\t\tmodal: false, /* If set to true, only the close button will close the window */\n\t\t\tdeeplinking: true, /* Allow prettyPhoto to update the url to enable deeplinking. */\n\t\t\tkeyboard_shortcuts: true, /* Set to false if you open forms inside prettyPhoto */\n\t\t\tcallback: function(){}, /* Called when prettyPhoto is closed */\n\t\t\tsocial_tools: '<div class=\"pp_social\"><div class=\"twitter\"><a href=\"http://twitter.com/share\" class=\"twitter-share-button\" data-count=\"none\">Tweet</a><script type=\"text/javascript\" src=\"http://platform.twitter.com/widgets.js\"></script></div><div class=\"facebook\"><iframe src=\"http://www.facebook.com/plugins/like.php?locale=en_US&href='+location.href+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:500px; height:23px;\" allowTransparency=\"true\"></iframe></div></div>' /* html or false to disable */\n\t\t});\n\n\t\t//Open that content on load with prettyPhoto\n\t\t$.prettyPhoto.open('#woopopup');\n\t});\n})(jQuery);\n\n", "<?php\n/**\n * woo-popup\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n\n/**\n * Plugin class. This class should ideally be used to work with the\n * public-facing side of the WordPress site.\n *\n * If you're interested in introducing administrative or dashboard\n * functionality, then refer to `class-woo-popup-admin.php`\n *\n * @package WooPopup\n * @author  Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n */\nclass WooPopup {\n\n\t/**\n\t * Plugin version, used for cache-busting of style and script file references.\n\t *\n\t * @since   1.0.0\n\t *\n\t * @var     string\n\t */\n\tconst VERSION = '1.3.0';\n\n\t/**\n\t * Unique identifier for your plugin.\n\t *\n\t *\n\t * The variable name is used as the text domain when internationalizing strings\n\t * of text. Its value should match the Text Domain file header in the main\n\t * plugin file.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprotected $plugin_slug = 'woo-popup';\n\n\t/**\n\t * Unique identifier for your plugin options.\n\t *\n\t *\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprivate $options_slug = 'woo-popup_options';\n\n\n\t/**\n\t * Default Settings Values.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      string\n\t */\n\tprivate $options_data = array(\n\t\t'popup_content' => 'This will be your pop up content',\n\t\t'popup_page' => ' ',\n\t\t'popup_class' => 'notice',\n\t\t'popup_permanent' => '0', //Default set to 0 so date are apparant\n\t\t'start_date' => '2014-02-02',  //Set up an old date so if default the pop up won't be fired\n\t\t'end_date' => '2014-02-04',  //Set up an old date so if default the pop up won't be fired\n\t\t'popup_timezone' => 'Europe/Paris'\n\t);\n\n\t/**\n\t * Instance of this class.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @var      object\n\t */\n\tprotected static $instance = null;\n\n\t/**\n\t * Initialize the plugin by setting localization and loading public scripts\n\t * and styles.\n\t *\n\t * @since     1.0.0\n\t */\n\tprivate function __construct() {\n\n\t\t// Load plugin text domain\n\t\tadd_action( 'init', array( $this, 'load_plugin_textdomain' ) );\n\n\t\t// Activate plugin when new blog is added\n\t\tadd_action( 'wpmu_new_blog', array( $this, 'activate_new_site' ) );\n\n\t\t// Load public-facing style sheet and JavaScript.\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'enqueue_styles' ) );\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'enqueue_scripts' ) );\n\n\t\t// Pass the php variable through wp_localize_script\n\t\tadd_action( 'wp_enqueue_scripts', array( $this, 'pass_php_vars' ) );\n\n\t}\n\n\t/**\n\t * Return the plugin slug.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin slug variable.\n\t */\n\tpublic function get_plugin_slug() {\n\t\treturn $this->plugin_slug;\n\t}\n\n\t/**\n\t * Return the plugin options slug.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin slug variable.\n\t */\n\tpublic function get_plugin_options_slug() {\n\t\treturn $this->options_slug;\n\t}\n\n\n\t/**\n\t * Return the plugin options default data.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return    Plugin options variable.\n\t */\n\tpublic function get_plugin_options_data() {\n\t\treturn $this->options_data;\n\t}\n\n\n\t/**\n\t * Return an instance of this class.\n\t *\n\t * @since     1.0.0\n\t *\n\t * @return    object    A single instance of this class.\n\t */\n\tpublic static function get_instance() {\n\n\t\t// If the single instance hasn't been set, set it now.\n\t\tif ( null == self::$instance ) {\n\t\t\tself::$instance = new self;\n\t\t}\n\n\t\treturn self::$instance;\n\t}\n\n\t/**\n\t * Fired when the plugin is activated.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    boolean    $network_wide    True if WPMU superadmin uses\n\t *                                       \"Network Activate\" action, false if\n\t *                                       WPMU is disabled or plugin is\n\t *                                       activated on an individual blog.\n\t */\n\tpublic static function activate( $network_wide ) {\n\n\t\tif ( function_exists( 'is_multisite' ) && is_multisite() ) {\n\n\t\t\tif ( $network_wide  ) {\n\n\t\t\t\t// Get all blog ids\n\t\t\t\t$blog_ids = self::get_blog_ids();\n\n\t\t\t\tforeach ( $blog_ids as $blog_id ) {\n\n\t\t\t\t\tswitch_to_blog( $blog_id );\n\t\t\t\t\tself::single_activate();\n\t\t\t\t}\n\n\t\t\t\trestore_current_blog();\n\n\t\t\t} else {\n\t\t\t\tself::single_activate();\n\t\t\t}\n\n\t\t} else {\n\t\t\tself::single_activate();\n\t\t}\n\n\t}\n\n\t/**\n\t * Fired when the plugin is deactivated.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    boolean    $network_wide    True if WPMU superadmin uses\n\t *                                       \"Network Deactivate\" action, false if\n\t *                                       WPMU is disabled or plugin is\n\t *                                       deactivated on an individual blog.\n\t */\n\tpublic static function deactivate( $network_wide ) {\n\n\t\tif ( function_exists( 'is_multisite' ) && is_multisite() ) {\n\n\t\t\tif ( $network_wide ) {\n\n\t\t\t\t// Get all blog ids\n\t\t\t\t$blog_ids = self::get_blog_ids();\n\n\t\t\t\tforeach ( $blog_ids as $blog_id ) {\n\n\t\t\t\t\tswitch_to_blog( $blog_id );\n\t\t\t\t\tself::single_deactivate();\n\n\t\t\t\t}\n\n\t\t\t\trestore_current_blog();\n\n\t\t\t} else {\n\t\t\t\tself::single_deactivate();\n\t\t\t}\n\n\t\t} else {\n\t\t\tself::single_deactivate();\n\t\t}\n\n\t}\n\n\t/**\n\t * Fired when a new site is activated with a WPMU environment.\n\t *\n\t * @since    1.0.0\n\t *\n\t * @param    int    $blog_id    ID of the new blog.\n\t */\n\tpublic function activate_new_site( $blog_id ) {\n\n\t\tif ( 1 !== did_action( 'wpmu_new_blog' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch_to_blog( $blog_id );\n\t\tself::single_activate();\n\t\trestore_current_blog();\n\n\t}\n\n\t/**\n\t * Get all blog ids of blogs in the current network that are:\n\t * - not archived\n\t * - not spam\n\t * - not deleted\n\t *\n\t * @since    1.0.0\n\t *\n\t * @return   array|false    The blog ids, false if no matches.\n\t */\n\tprivate static function get_blog_ids() {\n\n\t\tglobal $wpdb;\n\n\t\t// get an array of blog ids\n\t\t$sql = \"SELECT blog_id FROM $wpdb->blogs\n\t\t\tWHERE archived = '0' AND spam = '0'\n\t\t\tAND deleted = '0'\";\n\n\t\treturn $wpdb->get_col( $sql );\n\n\t}\n\n\t/**\n\t * Fired for each blog when the plugin is activated.\n\t *\n\t * @since    1.0.0\n\t */\n\tprivate static function single_activate() {\n\t\tupdate_option('woo-popup_options', array( 'popup_content' => 'This will be your pop up content', 'popup_page' => ' ', 'popup_class' => 'notice', 'popup_theme' => 'pp_default', 'popup_permanent' => '0', 'start_date' => date('Y-m-d', time()), 'end_date' => date('Y-m-d', time()), 'popup_timezone' => 'Europe/Paris' ));\n\t}\n\n\t/**\n\t * Fired for each blog when the plugin is deactivated.\n\t *\n\t * @since    1.0.0\n\t */\n\tprivate static function single_deactivate() {\n\t\tdelete_option('woo-popup_options');\n\t}\n\n\t/**\n\t * Load the plugin text domain for translation.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function load_plugin_textdomain() {\n\n\t\t$domain = $this->plugin_slug;\n\t\t$locale = apply_filters( 'plugin_locale', get_locale(), $domain );\n\n\t\tload_textdomain( $domain, trailingslashit( WP_LANG_DIR ) . $domain . '/' . $domain . '-' . $locale . '.mo' );\n\t\tload_plugin_textdomain( $domain, FALSE, basename( plugin_dir_path( dirname( __FILE__ ) ) ) . '/languages/' );\n\n\t}\n\n\tpublic function trigger_plugin(){\n\t\tglobal $post, $popup_theme;\n\t\t$options = get_option($this->options_slug);\n\t\t$tz = $options['popup_timezone'];\n\t\tdate_default_timezone_set($tz);\n\t\t$page = $options['popup_page'];\n\t\t$today = date('Y-m-d', time());\n\t\t$permanent = $options['popup_permanent'];\n\t\t$start_date = $options['start_date'];\n\t\t$end_date = $options['end_date'];\n\t\t$popup_theme = $options['popup_theme'];\n\t\t$diff_start = strtotime($today) - strtotime($start_date);\n\t\t$diff_end = strtotime($end_date) - strtotime($today);\n\t\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins'  )  )  ) && is_shop()){\n\t\t\t$page_id = get_option( 'woocommerce_shop_page_id' );\n\t\t}else{\n\t\t\t$page_id = $post->ID;\n\t\t}\n\n\t\tif(($permanent == 1 || $diff_start >= 0 && $diff_end >= 0) && ($page == 'all' || $page_id == $page)){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic function activated_woocommerce(){\n\n\t\t$suffix = defined( 'SCRIPT_DEBUG' ) && SCRIPT_DEBUG ? '' : '.min';\n\t\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins' ) ) ) ) {\n\t\t\tglobal $woocommerce;\n\t\t\t$pp_dir['base'] = $woocommerce->plugin_url() . '/assets/js/jquery.prettyPhoto.js';\n\t\t\t$pp_dir['style'] = $woocommerce->plugin_url() . '/assets/css/prettyPhoto.css';\n\t\t\t$pp_dir['ver'] = $woocommerce->version;\n\t\t}else{\n\t\t\t$pp_dir['base'] = plugins_url( '/assets/js/jquery.prettyPhoto.js', __FILE__ );\n\t\t\t$pp_dir['style'] = plugins_url( '/assets/css/prettyPhoto.css', __FILE__ );\n\t\t\t$pp_dir['ver'] = '';\n\t\t}\n\t\treturn $pp_dir;\n\t}\n\n\t/**\n\t * Register and enqueue public-facing style sheet.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function enqueue_styles() {\n\t\tif($this->trigger_plugin() == true){\n\t\t\t$pp_dir = $this->activated_woocommerce();\n\t\t\twp_enqueue_style( 'prettyPhoto_css', $pp_dir['style']);\n\t\t\twp_enqueue_style( $this->plugin_slug . '-plugin-styles', plugins_url( 'assets/css/public.css', __FILE__ ), array('prettyPhoto_css'), self::VERSION   );\n\t\t}\n\t}\n\n\t/**\n\t * Register and enqueues public-facing JavaScript files.\n\t *\n\t * @since    1.0.0\n\t */\n\tpublic function enqueue_scripts() {\n\t\tif($this->trigger_plugin() == true){\n\t\t\tglobal $woocommerce, $popup_theme;\n\t\t\t$pp_dir = $this->activated_woocommerce();\n\t\t\twp_enqueue_script( 'prettyPhoto', $pp_dir['base'] , array( 'jquery' ), $pp_dir['ver'] );\n\n\t\t\twp_enqueue_script( $this->plugin_slug . '-plugin-script', plugins_url( 'assets/js/public.js', __FILE__ ), array( 'prettyPhoto' ), self::VERSION, true );\n\n\n\t\t\t// Passing Plugin Options to js\n\t\t\t$plugin_data = array(\n\t\t\t    'theme' =>  $popup_theme,\n\t\t\t);\n\t\t\twp_localize_script( $this->plugin_slug . '-plugin-script', 'plugin_options_vars', $plugin_data );\n\t\t}\n\t}\n\n\tpublic function pass_php_vars() {\n\t\tinclude_once( 'views/public.php' );\n\t}\n\n}\n", "<?php\n/**\n * Represents the view for the public-facing component of the plugin.\n *\n * This typically includes any information, if any, that is rendered to the\n * frontend of the theme when the plugin is activated.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://example.com\n * @copyright 2014 woocommerce, popup, woopopup\n */\n?>\n\n<!-- This file is used to markup the public facing aspect of the plugin. -->\n<?php\n\t$woo_popup_vars = get_option($this->options_slug);\n\t// $popup_content = do_shortcode($woo_popup_vars['popupcontent']);\n\n\t// $formatted_popup = wpautop(stripslashes($popup_content));\n\t$formatted_popup = apply_filters( 'the_content', $woo_popup_vars['popup_content'] );\n\tif ( in_array( 'woocommerce/woocommerce.php', apply_filters( 'active_plugins', get_option( 'active_plugins' ) ) ) ){\n\t\t$class = 'woocommerce-'.$woo_popup_vars['popup_class'];\n\t}else{\n\t\t$class = 'woopopup-'.$woo_popup_vars['popup_class'];\n\t}\n\t$woo_popup_vars['popup_content'] = '<div id=\"woopopup\" style=\"display:none;\" aria-hidden=\"true\"><div class=\"'.$class.'\">'.$formatted_popup.'</div></div>';\n\twp_localize_script( $this->plugin_slug . '-plugin-script', 'woo_popup', $woo_popup_vars );\n", "<?php\n/**\n * The WordPress Plugin Boilerplate.\n *\n * A foundation off of which to build well-documented WordPress plugins that\n * also follow WordPress Coding Standards and PHP best practices.\n *\n * @package   WooPopup\n * @author    Guillaume Kanoufi <guillaume@lostwebdesigns.com>\n * @license   GPL-2.0+\n * @link      http://lostwebdesigns.com\n * @copyright 2014 woocommerce, popup, woopopup\n *\n * @wordpress-plugin\n * Plugin Name:       woo-popup\n * Plugin URI:        http://wordpress.org/plugins/woo-popup/\n * Description:       Display a pop up window on the page of your choice.\n * Version:           1.3.0\n * Author:            Guillaume Kanoufi\n * Author URI:        https://github.com/g-kanoufi\n * Text Domain:       woo-popup-locale\n * License:           GPL-2.0+\n * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt\n * Domain Path:       /languages\n * GitHub Plugin URI: https://github.com/<owner>/<repo>\n * WordPress-Plugin-Boilerplate: v2.6.1\n */\n\n// If this file is called directly, abort.\nif ( ! defined( 'WPINC' ) ) {\n\tdie;\n}\n\n/*----------------------------------------------------------------------------*\n * Public-Facing Functionality\n *----------------------------------------------------------------------------*/\n\nrequire_once( plugin_dir_path( __FILE__ ) . 'public/class-woo-popup.php' );\n\n/*\n * Register hooks that are fired when the plugin is activated or deactivated.\n * When the plugin is deleted, the uninstall.php file is loaded.\n */\nregister_activation_hook( __FILE__, array( 'WooPopup', 'activate' ) );\nregister_deactivation_hook( __FILE__, array( 'WooPopup', 'deactivate' ) );\n\n\nadd_action( 'plugins_loaded', array( 'WooPopup', 'get_instance' ) );\n\n/*----------------------------------------------------------------------------*\n * Dashboard and Administrative Functionality\n *----------------------------------------------------------------------------*/\n\nif ( is_admin() && ( ! defined( 'DOING_AJAX' ) || ! DOING_AJAX ) ) {\n\n\trequire_once( plugin_dir_path( __FILE__ ) . 'admin/class-woo-popup-admin.php' );\n\tadd_action( 'plugins_loaded', array( 'WooPopupAdmin', 'get_instance' ) );\n\n}\n"], "filenames": ["README.txt", "admin/class-woo-popup-admin.php", "admin/views/admin.php", "public/assets/css/prettyPhoto.css", "public/assets/js/public.js", "public/class-woo-popup.php", "public/views/public.php", "woo-popup.php"], "buggy_code_start_loc": [6, 196, 31, 1, 1, 31, 19, 18], "buggy_code_end_loc": [8, 242, 71, 2, 10, 379, 21, 19], "fixing_code_start_loc": [6, 197, 32, 1, 1, 31, 19, 18], "fixing_code_end_loc": [8, 251, 109, 171, 30, 384, 23, 19], "type": "CWE-79", "message": "A vulnerability classified as problematic has been found in woo-popup Plugin up to 1.2.2. This affects an unknown part of the file admin/class-woo-popup-admin.php. The manipulation leads to cross site scripting. It is possible to initiate the attack remotely. Upgrading to version 1.3.0 is able to address this issue. The name of the patch is 7c76ac78f3e16015991b612ff4fa616af4ce9292. It is recommended to upgrade the affected component. The associated identifier of this vulnerability is VDB-222327.", "other": {"cve": {"id": "CVE-2015-10095", "sourceIdentifier": "cna@vuldb.com", "published": "2023-03-06T21:15:10.150", "lastModified": "2023-03-13T15:18:44.873", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability classified as problematic has been found in woo-popup Plugin up to 1.2.2. This affects an unknown part of the file admin/class-woo-popup-admin.php. The manipulation leads to cross site scripting. It is possible to initiate the attack remotely. Upgrading to version 1.3.0 is able to address this issue. The name of the patch is 7c76ac78f3e16015991b612ff4fa616af4ce9292. It is recommended to upgrade the affected component. The associated identifier of this vulnerability is VDB-222327."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:U/C:N/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 3.5, "baseSeverity": "LOW"}, "exploitabilityScore": 2.1, "impactScore": 1.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:woo-popup_project:woo-popup:*:*:*:*:*:wordpress:*:*", "versionEndExcluding": "1.3.0", "matchCriteriaId": "FDF073CD-7548-4114-B554-A83685981B77"}]}]}], "references": [{"url": "https://github.com/wp-plugins/woo-popup/commit/7c76ac78f3e16015991b612ff4fa616af4ce9292", "source": "cna@vuldb.com", "tags": ["Patch"]}, {"url": "https://github.com/wp-plugins/woo-popup/releases/tag/1.3.0", "source": "cna@vuldb.com", "tags": ["Release Notes"]}, {"url": "https://vuldb.com/?ctiid.222327", "source": "cna@vuldb.com", "tags": ["Permissions Required", "Third Party Advisory", "VDB Entry"]}, {"url": "https://vuldb.com/?id.222327", "source": "cna@vuldb.com", "tags": ["Third Party Advisory", "VDB Entry"]}]}, "github_commit_url": "https://github.com/wp-plugins/woo-popup/commit/7c76ac78f3e16015991b612ff4fa616af4ce9292"}}