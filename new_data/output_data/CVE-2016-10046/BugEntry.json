{"buggy_code": ["2016-07-30  6.9.5-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-4, GIT revision 10973:a00fa93:20160729.\n\n2016-07-35  6.9.5-4 Cristy  <quetzlzacatenango@image...>\n  * Prevent buffer overflow (bug report from Ibrahim el-sayed).\n\n2016-07-15  6.9.5-3 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-3, GIT revision 18627:2b5ddbd:20160721.\n\n2016-07-13  6.9.5-3 Cristy  <quetzlzacatenango@image...>\n  * Fix MVG stroke-opacity (reference\n    https://github.com/ImageMagick/ImageMagick/issues/229).\n  * Prevent possible buffer overflow when reading TIFF images (bug report from\n    Shi Pu of MS509 Team).\n\n2016-07-11  6.9.5-2 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-2, GIT revision 18591:50debe5:20160710.\n\n2016-07-10  6.9.5-2 Cristy  <quetzlzacatenango@image...>\n  * To comply with the SVG standard, use stroke-opacity for transparent strokes.\n\n2016-07-09  6.9.5-1 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-1, GIT revision 18572:28560fc:20160709.\n\n2016-07-04  6.9.5-1 Cristy  <quetzlzacatenango@image...>\n  * The histogram coder now returns the correct extent.\n  * Use CopyMagickString() rather than CopyMagickMemory() for strings.\n\n2016-06-26  6.9.5-0 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-0, GIT revision 18514:a7b5b46:20160626.\n\n2016-06-23  6.9.5-0 Cristy  <quetzlzacatenango@image...>\n  * Correct for numerical instability (reference\n    https://github.com/ImageMagick/ImageMagick/issues/218).\n\n2016-06-21  6.9.4-10 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-10, GIT revision 10907:a08de63:20160622.\n\n2016-06-17  6.9.4-10 Dirk Lemstra <dirk@lem.....org>\n  * Added support for GROUP4 compression to the FAX coder.\n\n2016-06-17  6.9.4-10 Cristy  <quetzlzacatenango@image...>\n  * Don't return a zero bounding box for QueryMultilineFontMetrics() (reference\n    https://github.com/ImageMagick/ImageMagick/issues/222).\n\n2016-06-12  6.9.4-9 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-9, GIT revision 10884:f0e15e8:20160612.\n\n2016-06-09  6.9.4-9 Cristy  <quetzlzacatenango@image...>\n  * Backoff finite precision epsilon (reference\n    https://github.com/ImageMagick/ImageMagick/issues/215).\n  * Fix drawing glitch for stroke widths greater than 2 (reference\n    https://github.com/ImageMagick/ImageMagick/issues/218).\n\n2016-06-05  6.9.4-8 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-8, GIT revision 18406:ba4ad2d:20160607.\n\n2016-06-04  6.9.4-8 Cristy  <quetzlzacatenango@image...>\n  * RLE check for pixel offset less than 0 (heap overflow report from Craig\n    Young).\n  * Properly initialze PES blocks (reference\n    https://github.com/ImageMagick/ImageMagick/issues/213).\n\n2016-06-03  6.9.4-7 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-7, GIT revision 10847:339f803:20160602.\n\n2016-06-02  6.9.4-7 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak (patch provided by \u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0435\u0440\u043d\u044b\u0439).\n  * Coder path traversal is not authorized (bug report provided by\n    Masaaki Chida).\n  * Turn off alpha channel for the compare difference image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29828).\n\n2016-05-31  6.9.4-6 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-6, GIT revision 18334:97775b5:20160531.\n\n2016-05-31  6.9.4-6 Cristy  <quetzlzacatenango@image...>\n  * Support configure script --enable-pipes option to enable pipes (|) in\n    filenames.\n  * Support configure script --enable-indirect-reads option to enable\n    indirect reads (@) in filenames.\n\n2016-05-30  6.9.4-5 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-5, GIT revision 18321:5511ef5:20160530.\n\n2016-05-28  6.9.4-5 Dirk Lemstra <dirk@lem.....org>\n  * Most OpenCL operations are now executed asynchronous.\n\n2016-05-25  6.9.4-5 Cristy  <quetzlzacatenango@image...>\n  * Security improvements to TEXT coder broke it (reference\n  * Prevent possible shell command injection vulnerability through the\n    authenticate parameter of the PDF, PCL and XPS coders (report from\n    Erez Turjeman).\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29754).\n  * Fix stroke offset problem for -annotate (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29626).\n  * Add additional checks to DCM reader to prevent data-driven faults (bug\n    report from Hanno B\u00f6ck).\n\n2016-05-21  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-4, GIT revision 18241:d4f277c:20160521.\n\n2016-05-20  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed proper placement of text annotation for east / west gravity.\n\n2016-05-15  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-4, GIT revision 10789:f7c2e89:20160518.\n\n2016-05-15  6.9.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel cache on disk regression (reference\n    https://github.com/ImageMagick/ImageMagick/issues/202).\n\n2016-05-15  6.9.4-2 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-2, GIT revision 10778:52dae14:20160516.\n\n2016-05-10  6.9.4-2 Cristy  <quetzlzacatenango@image...>\n  * Quote passwords when passed to a delegate program.\n  * Can read geo-related EXIF metdata once-again (reference\n    https://github.com/ImageMagick/ImageMagick/issues/198).\n  * Sanitize all delegate emedded formatting characters.\n  * Don't sync pixel cache in AcquireAuthenticCacheView() (bug report from\n    Hanno B\u00f6ck).\n\n2016-05-09  6.9.4-1 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-1, GIT revision 10755:d540dda:20160509.\n\n2016-05-07  6.9.4-1 Cristy  <quetzlzacatenango@image...>\n  * Remove https delegate.\n\n2016-05-05  6.9.4-0 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-0, GIT revision 10741:5746147:20160507.\n\n2016-05-04  6.9.4-0 Cristy  <quetzlzacatenango@image...>\n  * Check for buffer overflow in magick/draw.c/DrawStrokePolygon().\n  * Replace show delegate title with image filename rather than label.\n  * Fix GetNextToken() off by one error.\n  * Remove support for internal ephemeral coder.\n\n2016-05-03  6.9.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-10, GIT revision 10723:9fc8a0c:20160503.\n\n2016-05-03  6.9.3-10 Cristy  <quetzlzacatenango@image...>\n  * Sanitize input filename for http / https delegates (improved patch).\n  * Fix for possible security vulnerabilities (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=4&t=29588).\n\n2016-04-30  6.9.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-9, GIT revision 10716:b527bce:20160430.\n\n2016-04-12  6.9.3-9 Cristy  <quetzlzacatenango@image...>\n  * Sanitize input filename for http / https delegates.\n  * Indirect filename must be authorized by policy.\n  * The txt coder now properly reports Lab colors (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=2944).\n\n2016-04-11  6.9.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-8, GIT revision 10690:d058a53:20160411\n\n2016-03-22  6.9.3-8 Cristy  <quetzlzacatenango@image...>\n  * Respect gravity when rendering text (e.g. convert -gravity center my.txt)\n  * Return empty string for %d property and no directory (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29365)\n  * Return filename for the %i property (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=29364).\n  * Fixed lost pixels in frequency space (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29374).\n\n2016-03-06  6.9.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-7, GIT revision 10628:810a9fe:20160306\n\n2016-03-05  6.9.3-7 Dirk Lemstra <dirk@lem.....org>\n  * -size can now be used the specify the maximum width/height for the\n    following vector formats:\n      * SVG (when librsvg and cairo are being used).\n      * EMF (did not work on Windows).\n\n2016-02-29  6.9.3-7 Cristy  <quetzlzacatenango@image...>\n  * Fixed text alignment issue for label: / coder: (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29223).\n\n2016-02-27  6.9.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-6, GIT revision 10597:83584a1:20160228.\n\n2016-02-25  6.9.3-6 Cristy  <quetzlzacatenango@image...>\n  * Ensure TXT: image format survives round-trip (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29206).\n\n2016-02-21  6.9.2-6 Dirk Lemstra <dirk@lem.....org>\n  * Added wavelet denoise.\n\n2016-02-20  6.9.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-5, GIT revision 10572:cb24a69:20160219.\n\n2016-02-16  6.9.3-5 Cristy  <quetzlzacatenango@image...>\n  * Too many bytes when writing raw image formats (reference\n    https://github.com/ImageMagick/ImageMagick/issues/132).\n\n2016-02-12  6.9.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-4, GIT revision 10560:09f5f5d:20160212.\n\n2016-02-12  6.9.3-4 Dirk Lemstra <dirk@lem.....org>\n  * Fixed memory leak when reading an SVG without width/height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=27&p=130197).\n\n2016-02-09  6.9.3-4 Cristy  <quetzlzacatenango@image...>\n  * Fix compiler error for complext text layout.\n\n2016-02-05  6.9.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-3, GIT revision 10540:6b4c918:20160206.\n\n2016-02-04  6.9.3-3 Cristy  <quetzlzacatenango@image...>\n  * Numerous bugs fixed from fuzzed images (reference\n    https://github.com/ImageMagick/ImageMagick/issues/123).\n  * The -bias option is no longer a noop (reference\n    https://github.com/ImageMagick/ImageMagick/issues/125).\n\n2016-01-25  6.9.3-3 Dirk Lemstra <dirk@lem.....org>\n  * Read XCF layer name (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=129638).\n\n2016-01-23  6.9.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-2, GIT revision 10496:315028c:20160122.\n\n2016-01-17  6.9.3-2 Cristy  <quetzlzacatenango@image...>\n  * Don't reuse lock after free (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29031).\n\n2016-01-21  6.9.3-2 Dirk Lemstra <dirk@lem.....org>\n  * Fixed writing DocClass in CALS coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=129478).\n\n2016-01-17  6.9.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-1, GIT revision 10488:e4f046e:20160116.\n\n2016-01-06  6.9.3-1 Cristy  <quetzlzacatenango@image...>\n  * Pair AcquireMagickResource with calls to RelinquishMagickResource when\n    resource limits are hit (reference\n    https://github.com/ImageMagick/ImageMagick/pull/75).\n  * Return non-zero for the -format %b option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28969).\n\n2016-01-01  6.9.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-0, GIT revision 10445:620328b:20160101.\n\n2015-12-31  6.9.3-0 Cristy  <quetzlzacatenango@image...>\n  * Don't break on euro-style numbers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28910).\n\n2015-12-22  6.9.3-0 Glenn Randers-Pehrson <glennrp@image...>\n  * 16-bit pnm images have a max value of 65535.\n\n2015-12-18  6.9.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-10, GIT revision 10415:e31c09d:20151219.\n\n2015-12-19  6.9.2-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed compile error when POSIX threads are not defined.\n\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28791).\n2015-12-18  6.9.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-9, GIT revision 10402:0027295:20151219\n\n2015-12-05  6.9.2-9 Dirk Lemstra <dirk@lem.....org>\n  * Fixed memory leak when reading incorrect PSD files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28791).\n\n2015-12-05  6.9.2-9 Cristy  <quetzlzacatenango@image...>\n  * Enhance PDF to properly handle unicode titles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28786).\n  * Fix memory leak in icon coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=28848).\n\n2015-12-05  6.9.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-8, GIT revision 10374:ac7d144:20151205.\n\n2015-12-04  6.9.2-8 Cristy  <quetzlzacatenango@image...>\n  * Gray artifacts in large gif when using -layers optimize (reference\n    https://github.com/ImageMagick/ImageMagick/issues/57).\n\n2015-11-26  6.9.2-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-7, GIT revision 10370:eeb7d4e:20151126.\n\n2015-11-24  6.9.2-7 Dirk Lemstra <dirk@lem.....org>\n  * The DICOM reader now handles the rescale intercept and slope.\n  * Added 'bmp3:alpha' option for including the alpha channel when writing\n    an image in the BMP3 format. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28733).\n  * Only one thread permitted when delegating to the Ghostscript library\n    under Windows.\n\n2015-11-14  6.9.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-6, GIT revision 10341:f408196:20151113.\n\n2015-11-08  6.9.2-6 Cristy  <quetzlzacatenango@image...>\n  * PixelColor off by one on i386 (reference\n    https://github.com/ImageMagick/ImageMagick/issues/54).\n  * Eliminate stack overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28658).\n\n2015-11-03  6.9.2-6 Dirk Lemstra <dirk@lem.....org>\n  * Added local contrast enhancement.\n  * Fixed bug in SetPixelCacheExtent that made images all black (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28514).\n  * Added support for reading DICOM images with implicit vr little-endian\n    transfer syntax.\n\n2015-11-02  6.9.2-6 Samuel Thibault <samuel.thibault@...org> \n  * Added 6dot variant for unicode and iso braille formats (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&p=127111).\n\n2015-10-31  6.9.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-5, GIT revision 10316:86a76b6:20151031.\n\n2015-10-15  6.9.2-5 Dirk Lemstra <dirk@lem.....org>\n  * Fixed alpha blending issue with semi-transparent pixels in the merged\n    image of PSD files. This can be disabled by setting the option\n    'psd:alpha-unblend' to 'off' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28169).\n  * Fixed issue in jpeg:extent that prevented it from working (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=126638).\n  * Fixed memory leak when reading Photoshop layers in a TIFF file.\n\n2015-10-12  6.9.2-5 Cristy  <quetzlzacatenango@image...>\n  * Support gradient:bounding-box, gradient:vector, gradient:center, and\n    gradient:radius to shape the gradient rendering.\n  * Recognize label:@- as stdin (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28501).\n  * Make commas optional for coordinates (e.g. 0,0 256,256).\n\n2015-10-10  6.9.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-4, GIT revision 10273:e00cf21:20151010\n\n2015-10-08  6.9.2-4 Dirk Lemstra <dirk@lem.....org>\n  * Fixed accessing subimage in a TIFF photoshop layer (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28469).\n  * Fixed out of bounds error in -splice (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28466).\n\n2015-09-25  6.9.2-4 Eric McConville <emcconville@emccon...>\n  * Created Manhattan Interpolate method for -sparse-color (reference\n    https://github.com/ImageMagick/ImageMagick/pull/36).\n\n2015-09-22  6.9.2-4 Cristy  <quetzlzacatenango@image...>\n  * Prevent null pointer access (reference\n    https://github.com/ImageMagick/ImageMagick/pull/34).\n  * Specify histogram code image format implictedly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28412).\n  * Don't round up for JPEG image resolution (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28422).\n  * Read the whole image @ image.jp2[0] or an individual tile @ image.jp2[1],\n    image.jp2[2].\n  * The -caption option no longer fails for filenames with @ prefix (reference\n    https://github.com/ImageMagick/ImageMagick/issues/43).\n  * Honor $XDG_CONFIG_HOME and $XDG_CACHE_HOME (reference\n    https://github.com/ImageMagick/ImageMagick/issues/44).\n\n2015-09-19  6.9.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-3, GIT revision 10235:c40ee57:20150919\n\n2015-09-17  6.9.2-2 Dirk Lemstra <dirk@lem.....org>\n  * Added extra checks to avoid out of bounds error when parsing the 8bim \n    profile (reference https://github.com/ImageMagick/ImageMagick/issues/31).\n  * Fixed size of memory allocation in RLE coder to avoid segfault (reference\n    https://github.com/ImageMagick/ImageMagick/issues/32).\n\n2015-09-16  6.9.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add Bootstrap MIT license to ImageMagick web CSS and JS.\n  * Use modern idiom for autoconf\n    Fix a forgotten dir when regenerating html doc (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28363).\n  * The -colorspace gray option no long leaves a ghostly shadow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28350).\n\n2015-09-14  6.9.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-1, GIT revision 10201:5879612:20150913.\n\n2015-09-13  6.9.2-1 Dirk Lemstra <dirk@lem.....org>\n  * Preserving image origin in TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28310).\n\n2015-08-15  6.9.2-1 Cristy  <quetzlzacatenango@image...>\n  * Support color compliance for TXT format (e.g. -define txt:compliance=css)\n    (bug report from Anthony).\n  * The first argument of a hsl() color is integer, not percentage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26072).\n  * Limit -fx recursive to avoid stack overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28200).\n  * Support inline images with data URLS.\n  * Report progress less often (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28299).\n  * Don't set image colorspace to gray for -alpha copy option.\n  * Fixed a possible memory leak associated with the -sampling-factor option.\n  * GetImageType() no longer has side-effects to match behavior of IMv7.\n\n2015-08-15  6.9.2-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-0, GIT revision 10143:3534f6d:20150815.\n\n2015-08-10  6.9.2-0 Cristy  <quetzlzacatenango@image...>\n  * Swap pixels for -spread command-line option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28043).\n  * fx logical operations short circuit (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28179).\n  * Type cast intensity variable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28182).\n  * Fix ModulusAdd & ModulusSubstract for HDRI compositing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28186).\n\n2015-07-25  6.9.2-0 Dirk Lemstra <dirk@lem.....org>\n  * Added \"-set colorspace:auto-grayscale false\" that will prevent automatic\n    conversion to grayscale inside coders that support grayscale.\n  * Fixed -list weight and the options for -weight.\n  * Added fontFamily, fontStyle, fontWeight and textUnderColor to the Image\n    class of Magick++.\n  * Fixed reading Photoshop layers of LSB TIFF files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28045).\n  * Fixed memory leak in font cache under Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=28191).\n\n2015-07-25  6.9.1-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-10, SVN revision 19269.\n\n2015-07-20  6.9.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/magick.c: added \"-define h:format=FMT\" and\n    \"-define magick:format=FMT\" options. FMT can be any output format\n    supported by ImageMagick except \"H\" or \"MAGICK\". If this define is\n    omitted, the encoder uses GIF by default for pseudoclass images and\n    PNM for directclass images, as previously.  Made \"MAGICK\" (read-write)\n    and \"H\" (write-only) visible in the format list.\n\n2015-07-18  6.9.1-10 Dirk lemstra <dirk@lem.....org>\n  * Removed incorrect EOF check in the DDS reader (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28065).\n\n2015-07-18  6.9.1-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed undefined behaviors (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28067).\n  * Return exception message for unknown image properties.\n  * Color shift removed when reading transparent gray images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28081)\n\n2015-07-18  6.9.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-9, SVN revision 19200.\n\n2015-07-12  6.9.1-9 Dirk Lemstra <dirk@lem.....org>\n  * Fixed issue with radial gradient in MVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27995).\n\n2015-07-11  6.9.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-8, SVN revision 19167.\n\n2015-06-25  6.9.1-8 Cristy  <quetzlzacatenango@image...>\n  * Correct install location of the Magick++ headers (reference\n    https://github.com/ImageMagick/ImageMagick/pull/17/commits).\n  * Different gif cropping behavior between versions (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28013).\n  * Cannot read properly simple psd file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28002).\n\n2015-07-04  6.9.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-7, SVN revision 19121.\n\n2015-06-27  6.9.1-7 Eric Dalquist\n  * Fixed and escaped output of the json coder. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=27894).\n\n2015-06-25  6.9.1-7 Cristy  <quetzlzacatenango@image...>\n  * Support BPG image format (respects -quality option).\n  * A bordered transparent image now remains transparent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=5&t=27937).\n  * The -update option behavior restored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=27939).\n\n2015-06-13  6.9.1-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-6, SVN revision 18945.\n\n2015-06-14  6.9.1-6 Cristy  <quetzlzacatenango@image...>\n  * Cache cloning on disk optimized with sendfile() (if available).\n  * Add an additional check for end-of-file for the RLE coder (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3&t=27870).\n  * Respect resource limits in AVS coder.\n\n2015-06-13  6.9.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Reverted change to 6.9.1-3 that skipped palette-building.\n\n2015-06-13  6.9.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-5, SVN revision 18882.\n\n2015-06-03  6.9.1-5 Cristy  <quetzlzacatenango@image...>\n  * Use correct scale when interpretting alpha (e.g. rgba(0,0,0,1)).\n  * DrawGetVectorGraphics() now returns proper XML (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27751).\n  * Support writing EXR files with different color types (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=27759).\n  * Prefer PKG_CHECK_MODULES() when searching for delegate libraries.\n  * Throw exception if frame option bevel exceeds to the image width / height.\n  * Resolve undefined behaviors (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27811).\n\n2015-06-01  6.9.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-4, SVN revision 18697.\n\n2015-06-01  6.9.1-4 Cristy  <quetzlzacatenango@image...>\n  * Support 'restrict' keyword under Windows.\n\n2015-05-25  6.9.1-4 Dirk Lemstra <dirk@lem.....org>\n  * Added support for reading a user supplied layer mask in PSD files.\n  * Added support for reading photoshop layers in TIFF files.\n\n2015-05-24  6.9.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-3, SVN revision 18623.\n\n2015-05-03  6.9.1-3 Dirk Lemstra <dirk@lem.....org>\n  * Fixed transparency issue with 16-bit tga files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27469).\n  * Fixed writing label and comment in tiff images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25516).\n  * Jpeg images no longer have pixels per inch as a default value for density\n    units when the density is not set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27589).\n  * Added support for setting the font color with -fill to the pango coder.\n\n2015-05-03  6.9.1-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with \"-define png:format=x\" in png.c, introduced in version\n    6.8.9-0, that caused the define to be ignored.\n  * Replaced some dead code in ReadJNGImage with an assert().\n  * Avoid palette-building when writing a grayscale PNG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27580).\n\n2015-04-20  6.9.1-3 Cristy  <quetzlzacatenango@image...>\n  * Support -define compose:clamp=false option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26946).\n  * Don't extend any user supplied image buffer in SeekBlob() (bug report\n    from a.chernij@corp...).\n  * Improved reproducible builds (reference\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=783933).\n  * Draw a rectangle of width & height of 1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24874).\n\n2015-04-19  6.9.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-2, SVN revision 18429.\n\n2015-04-09  6.9.1-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Avoid using a NULL alpha_image or color_image in the JNG decoder.\n\n2015-04-07  6.9.1-2 Cristy  <quetzlzacatenango@image...>\n  * Fix JPEG-2000 transparency on write (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27304).\n  * Identify now identifies PSD (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26948).\n  * Speed up writing to TGA (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27369).\n\n2015-04-06  6.9.1-2 Dirk Lemstra <dirk@lem.....org>\n  * Reduce draw epsilon to increase mathematical stability.\n  * Fixed UTF8 issue when determining the current working directory\n    on Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27295).\n\n2015-04-04  6.9.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-1, SVN revision 18308.\n\n2015-03-21  6.9.1-1 Cristy  <quetzlzacatenango@image...>\n  * Skip empty frames when comparing layers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27234).\n\n2015-03-21  6.9.1-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-0, SVN revision 18245.\n\n2015-03-17  6.9.1-0 Cristy  <quetzlzacatenango@image...>\n  * Grayscale DPX image files are no longer skewed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27209).\n\n2015-03-16  6.9.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix integer overflow when scaling a 1-bit sample to Q64 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27195).\n\n2015-03-01  6.9.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-10, SVN revision 18299.\n\n2015-03-03  6.9.0-10 Cristy  <quetzlzacatenango@image...>\n  * Account for differences in image size when comparing two images (bug\n    report from Dirk).\n  * Set an upper ceiling compression with -quality and jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=27071).\n\n2015-03-01  6.9.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-9, SVN revision 18179.\n\n2015-02-22  6.9.0-9 Cristy  <quetzlzacatenango@image...>\n  * Writing histograms / mpeg working again (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27089).\n  * The -linear-stretch option worked for Q16 but not Q32 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27112).\n\n2015-02-22  6.9.0-8 Cristy  <quetzlzacatenango@image...>\n  * Bogus release, withdrawn.\n\n2015-02-22  6.9.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-7, SVN revision 18067.\n\n2015-02-15  6.9.0-7 Cristy  <quetzlzacatenango@image...>\n  * Line strokes appeared too thin (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26927).\n  * Keep text in caption area (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22504).\n\n2015-02-14  6.9.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-6, SVN revision 18010.\n\n2015-02-12  6.9.0-6 Dirk Lemstra <dirk@lem.....org>\n  * Fixed command line execution in Windows for delegates that\n    move files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=27027).\n\n2015-02-10  6.9.0-6 Cristy  <quetzlzacatenango@image...>\n  * A transient bug for the write MSL element (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27022).\n\n2015-02-08  6.9.0-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Remove uninitialized, unused \"p++\" from coders/png.c, MNG reader.\n  * Initialize \"length\" in coders/png.c, WriteJNGImage().\n  * Fix signed/unsigned mismatch in coders/png.c, MNG reader.\n\n2015-02-08  6.9.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-5, SVN revision 17946.\n\n2015-01-30  6.9.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * In coders/gif.c, quiet two warnings.\n\n2015-01-24  6.9.0-5 Dirk Lemstra <dirk@lem.....org>\n  * Fixed iccColorProfile() in Magick++ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26910).\n  * Fixed infinite loop in HDR reader (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26929).\n\n2015-01-23  6.9.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Check lengths of certain MNG chunks before reading them.\n  * In the PNG codec, check status wherever a function returns it.\n\n2015-01-18  6.9.0-5 Cristy  <quetzlzacatenango@image...>\n  * Remove possible resource memory leak in a multi-threaded program (bug\n    report and patch from David Chapman <d...@acm.org>.\n  * Small optimization to pixel cache.\n  * More image sanity checks.\n  * Support writing base64-encoded images (e.g\n\t  convert logo: inline:jpeg:logo.txt).\n  * Repair small TIFF leak when pinging (patch provided by Andrey Cherniy).\n\n2015-01-16  6.9.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-4, SVN revision 17697.\n\n2015-01-07  6.9.0-4 Cristy  <quetzlzacatenango@image...>\n  * Additional coder sanity checks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26842,\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26682).\n\n2015-01-05  6.9.0-4 Dirk Lemstra <dirk@lem.....org>\n  * Report Ghostscript version when -verbose is used and when an exception\n    is raised.\n  * Fixed invalid path check in MagickCoreGenesis under Windows and disabled\n    ProvideDllMain by default (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=118875).\n\n2015-01-01  6.9.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-3, SVN revision 17537.\n\n2015-01-01  6.9.0-3 Cristy  <quetzlzacatenango@image...>\n  * ImageMagick builds when HDRI is enabled (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26803).\n\n2014-12-31  6.9.0-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't read beyond the end of a tEXt keyword when checking for Raw profile.\n\n2014-12-27  6.9.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-2, SVN revision 17468.\n\n2014-12-14  6.9.0-1 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading EXR files to the Windows distribution.\n  * Fixed enabling alpha in 32-bit BMP files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26662).\n  * Added support for writing 16-bit TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=26693).\n  * Improved performance of dds:cluster-fit when OpenMP is enabled.\n  * Added support for distributed pixel cache to the Windows distribution.\n\n2014-12-04  6.9.0-1 Alexey Dolgavin <dolgavin.alexey@gmail...>\n  * Fix ImageMagick crashes while read EXIF from TIFF.\n\n2014-11-20  6.9.0-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't handle a \"previous\" image in the PNG or JNG decoder.\n  * Don't override gamma with 1.0 when reading a grayscale PNG image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26576).\n  * Update progress monitor for every PNG row instead of every pass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=26589).\n  * Reject input PNG with dimensions larger than specified with -limit width\n    and -limit height.\n\n2014-11-20  6.9.0-1 Cristy  <quetzlzacatenango@image...>\n  * Fix double free / invalid read when converting jpg to pdb (thanks to\n    Hanno).\n  * Maximum XWD image size is 64Kx64K (thanks to Hanno).\n  * Maximum DPX number of elements is 8 (thanks to Hanno).\n  * Transient problem with SVG (reference\n      http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26587).\n  * Numerous buffer overflow fixes (thanks to Gynvael Coldwind and\n    Mateusz Jurczyk of the Google Security Team).\n  * Additional PNM sanity checks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26682).\n  * The SetImageBias() bias value is no longer ignored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25732).\n  * Area crop now returns the expected number of tiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26701).\n  * Respect TGA ColorMapIndex field (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26738).\n  * Clang does not support __alloc_size__, fix fabs() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26739).\n  * Support width and height resource limits.\n  * Don't read TIFF profiles when pinging (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26670).\n\n2014-11-16  6.9.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-0, SVN revision 17067.\n\n2014-11-03  6.9.0-0 Cristy  <quetzlzacatenango@image...>\n  * Check for zero-sized rendered SVG image (bug report from\n    Vladimir Davydov).\n\n2014-11-01  6.8.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-10, SVN revision 16910.\n\n2014-10-29  6.8.9-10 Cristy  <quetzlzacatenango@image...>\n  * EXIF directory offsets must be greater than 0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26456).\n  * Accept morphology kernels from files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26466).\n  * Don't optimize JPEG compression by default (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26482).\n\n2014-10-26  6.8.9-10 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading jpeg compressed YCCK tiff files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24412).\n  * Fixed reading DICOM files with big endian transfer syntax (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26448).\n\n2014-10-25  6.8.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-9, SVN revision 16819.\n\n2014-10-03  6.8.9-9 Dirk Lemstra <dirk@snakeware...>\n  * Added sixel coder created by Hayaki Saito (@kefir_).\n  * Fixed buffer overflow in PCX and DCM coder (bug report from Hanno B\u00f6ck).\n  * Added support for reading/writing the tIME chunk in the PNG coder.\n  * Added eps:fit-page option to the PS coder to set -dEPSFitPage.\n  * Improved reporting tiff:alpha and allowed setting tiff:alpha to\n    unspecified.\n\n2014-09-30  6.8.9-9 Cristy  <quetzlzacatenango@image...>\n  * Support xyY colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26324).\n  * Reduce noise while preserving edges with the -kuwahara option.\n  * Off-by-one count when parsing an 8BIM profile.\n  * Locale.c won't build if uselocale found but strtod_l isn't (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26362).\n  * OpenCL no longer benchmarks are run on every initialization (patch\n    submitted by Jan Steffens).\n  * Don't clone a 0x0 image (bug report from Hanno B\u00f6ck).\n\n2014-09-21  6.8.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-8, SVN revision 16502.\n\n2014-09-16  6.8.9-8 Cristy  <quetzlzacatenango@image...>\n  * JPEG library version >= 80 is thread safe (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25495).\n\n2014-08-31  6.8.9-8 Dirk Lemstra <dirk@snakeware...>\n  * Added support for some legacy dds formats (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26184).\n\n2014-08-16  6.8.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-7, SVN revision 16330.\n\n2014-08-14  6.8.9-7 Cristy  <quetzlzacatenango@image...>\n  * Fix off by one buglet when extracting profiles 8BIM (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26095).\n\n2014-07-31  6.8.9-7 Dirk Lemstra <dirk@snakeware...>\n  * Fixed bug when reading 1 bit PSD. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26015).\n\n2014-07-25  6.8.9-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Relocate initialization of \"image_colors\" in the PNG encoder, to avoid\n    a possible use of uninitialized variable.\n\n2014-07-25  6.8.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-6, SVN revision 16211.\n\n2014-07-24  6.8.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Use IsOptionMember() instead of LocaleNCompare() in coders/png.c to\n    parse the list of excluded and included PNG chunks.\n\n2014-07-19  6.8.9-6 Dirk Lemstra <dirk@snakeware...>\n  * Fixed fill-rule in SVG clip path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25882).\n\n2014-07-14  6.8.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed some dead code (testing image->matte) in PNG64 encoder.\n\n2014-07-07  6.8.9-6 Dirk Lemstra <dirk@snakeware...>\n  * Added support for R5G6B5, RGB5A1 and RGBA4 dds files.\n\n2014-07-01  6.8.9-6 Cristy  <quetzlzacatenango@image...>\n  * Write LAB pixels as percentages in the TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25830).\n  * Throw exception when image morphology differs when comparing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25927).\n  * Remove mogrify backup file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25683).\n  * Read WEBP images from STDIN (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25886).\n\n2014-07-01  6.8.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-5, SVN revision 16123.\n\n2014-06-28  6.8.9-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not let libpng16 check ICC/sRGB profiles in non-debug runs; we do\n    it ourselves anyway.  Avoids emitting \"known incorrect profile\" warnings.\n    For strict profile checking and warning, use \"-debug coder\".\n\n2014-06-27  6.8.9-5 Dirk Lemstra <dirk@snakeware...>\n  * Disabled OpenCL acceleration when image has a 'mask' or 'clip-mask'.\n\n2014-06-25  6.8.9-5 Cristy  <quetzlzacatenango@image...>\n  * Use -define profile:skip=icc, for example,  to skip color profiles on read.\n\n2014-06-23  6.8.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-4, SVN revision 16057.\n\n2014-06-15  6.8.9-4 Cristy  <quetzlzacatenango@image...>\n  * Support RMS argument for -evaluate-sequence and -statistic options.\n  * Fix lseek define for a successful compile under 64-bit MinGW.\n  * Pipe image to display program no longer reports an exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23532).\n  * Check that profile is non-NULL in coders/tiff.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25770).\n\n2014-06-08  6.8.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-3, SVN revision 15975.\n\n2014-06-07  6.8.9-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Quiet warning about unused variable \"skip_to_iend\" in coders/png.c.\n\n2014-06-07  6.8.9-3 Dirk Lemstra <dirk@snakeware...>\n  * Fixed creation of SVG from 8bim clip path. (reference \n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25594).\n\n2014-06-02  6.8.9-3 Cristy  <quetzlzacatenango@image...>\n  * The -version option returns 0 status (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25667).\n  * The inline coder can now read from standard input (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25641).\n  * Add '=' character to the sanitize whitelist.\n\n2014-05-30  6.8.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-2, SVN revision 15932.\n\n2014-05-18  6.8.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed some bugs in the PNG codec discovered by coverity analysis.\n\n2014-05-14  6.8.9-2 Cristy  <quetzlzacatenango@image...>\n  * The -fx equality operator returns a proper boolean result now (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25580).\n  * Permit spaces in the gradient color specification (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25614).\n  * Fix IdentifyImage() crash when image->magick member is null (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25615).\n  * The -format M and Y channels are no longer reversed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25633).\n  * Remove Makefile race condition where two targets attempt to install\n    magick-baseconfig.h (reference\n    http://git.buildroot.net/buildroot/commit/?id=7395ee9d3b88e45798143e05a28d6d4b51409130)\n  * Fix memory leak in BlobToStringInfo() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25639).\n  * In certain cases, -adaptive-sharpen failed to sharpen (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23211\n\n2014-05-12  6.8.9-2 Dirk Lemstra <dirk@snakeware...>\n  * Bump major Magick++ library version.\n  * Added support for writing RLE compressed TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12335).\n  * Improved performance of parsing the xmp profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25612).\n  * Fixed detecting transparency in PSD files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25634).\n\n2014-05-09  6.8.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-1, SVN revision 15697.\n\n2014-04-22  6.8.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with the PNG00 subformat when the original format was PNG32.\n  * The \"-strip\" option now only removes profiles and comments from PNG\n    output.  Previously the background, density, and other metadata were\n    also discarded.\n\n2014-04-22  6.8.9-1 Cristy  <quetzlzacatenango@image...>\n  * Support new -hough-lines option.\n  * Support new -mean-shift option.\n  * identify -units without argument no longer faults (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25542).\n  * Require OpenJP2 version 2.1.0 (opj_stream_set_user_data() method signature\n    change between 2.0.0 and 2.1.0).\n\n2014-04-20  6.8.9-1 Dirk Lemstra <dirk@snakeware...>\n  * Added image moments, canny edge and hough line to Magick++.\n  * The 8bim profile will be updated when the icc/iptc/xmp profile is changed.\n  * Fix for stack overflow in DestroyXMLTree in Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25457).\n  * Added new coder for VIPS image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25445).\n  * Moved detection of type to a separate method in Magick++. The type() method\n    no longer modifies the type of the image. Use determineType() instead.\n  * Improved error messages when a coder uses Ghostscript.\n\n2014-04-11  6.8.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-0, SVN revision 15441.\n\n2014-04-03  6.8.9-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with -strip failing to exclude PNG chunks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25353).\n\n2014-03-30  6.8.9-0 Dirk Lemstra <dirk@snakeware...>\n  * Added new coder to take a screen shot of a monitor in Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=25191).\n\n2014-03-24  6.8.9-0 Cristy  <quetzlzacatenango@image...>\n  * Don't transform sRGB compatible colorspaces to sRGB, doing so\n    inadvertently promotes colormapped images to DirectClass.\n  * Use temporary path rather then current working directory (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25313).\n  * Support -canny edge detection option.\n  * Use MAGICKCORE_LIBOPENJP2_DELEGATE instead of MAGICKCORE_JP2_DELEGATE\n    (reference www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25376).\n\n2014-03-28  6.8.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-9, SVN revision 15239.\n\n2014-03-23  6.8.8-10 Cristy  <quetzlzacatenango@image...>\n  * Although they are internal methods, deprecate InitializeModuleList(),\n    LoadMimeLists(), and RelinquishCommandQueue() (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25263).\n\n2014-03-20  6.8.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-9, SVN revision 15192.\n\n2014-03-16  6.8.8-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not block threads in the png codec when PNG_SETJMP_SUPPORTED is not\n    defined (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=25218).\n\n2014-03-15  6.8.8-9 Dirk Lemstra <dirk@snakeware...>\n  * Added tiff:ignore-tags to ignore specific tags.\n  * Added orderedDither, selectiveBlur, separate, sepiaTone, sketch,\n    smushImages, tint, uniqueColors and vignette to Magick++.\n\n2014-03-11  6.8.8-9 Cristy  <quetzlzacatenango@image...>\n  * The -define jpeg:extent option overrides the image quality (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25200). \n\n2014-03-09  6.8.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-8, SVN revision 15097.\n\n2014-03-04  6.8.8-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Reset colorspace to Grayscale when reading a gray PNG image with\n    gamma > 0.75 instead of when gamma==1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25136).\n\n2014-02-22  6.8.8-8 Dirk Lemstra <dirk@snakeware...>\n  * The PSD reader creates a merged image if the image does not contain one.\n  * Added option pdf:fit-page to scale a pdf to the specified size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25044).\n  * The ResolutionInfo in the 8BIM profile will be updated when an image is\n    written.\n  * Fixed UTF8 issues and added support for reading files with long path names\n    for the Windows distribution.\n\n2014-02-21  6.8.8-8 Cristy  <quetzlzacatenango@image...>\n  * Convert linear RGB to sRGB before writing the Targa image format.\n  * Make sure we use the secure C library functions when compiling ImageMagick\n    on Windows.\n  * Tweak color reduction optimization to return a full color palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25098).\n  * Patch configure.ac to support FlashPix under Debian (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25140).\n  * OpenCL support writes to $HOME/.config/ImageMagick, if the path does not\n    exist, two calls to mkdir() are required (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25080).\n  * Replace  MAGICKCORE_JP2_DELEGATE with MAGICKCORE_LIBOPENJP2_DELEGATE in\n    magick/static.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25153).\n  * Eliminate thread race condition (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25168).\n\n2014-02-18  6.8.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-7, SVN revision 14908.\n\n2014-02-16  6.8.8-7 Cristy  <quetzlzacatenango@image...>\n  * Prevent possible buffer overflow in messaging system.\n\n2014-02-16  6.8.8-7 Dirk Lemstra <dirk@snakeware...>\n  * Improved detection of JPEG 2000 code streams and .j2c support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24942).\n  * Added morphology to Magick++.\n\n2014-02-13  6.8.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-6, SVN revision 14868.\n\n2014-02-13  6.8.8-6 Cristy  <quetzlzacatenango@image...>\n  * identify -define identify:locate=maximum locates the position of the\n    maximum value (stopped working in 6.8.8-5).\n\n2014-02-03  6.8.8-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-5, SVN revision 14838.\n\n2014-01-31  6.8.8-5 Cristy  <quetzlzacatenango@image...>\n  * Fix case where an image moment might have a mass of 0 or a Hu moment might\n    be 0.\n  * Enhance the TXT coder to read RGB percent values, e.g. 10.008% (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24934).\n\n2014-01-30  6.8.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed new \"-define png:swap-bytes\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24818).\n\n2014-01-29  6.8.8-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-4, SVN revision 14676.\n\n2014-01-29  6.8.8-4 Cristy  <quetzlzacatenango@image...>\n  * Remove comma at end of enumerator list, magick/compare.h.\n\n2014-01-28  6.8.8-4 Dirk Lemstra <dirk@snakeware...>\n  * Added transpose and transverse to Magick++. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24884).\n\n2014-01-25  6.8.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-3, SVN revision 14651.\n\n2014-01-18  6.8.8-3 Dirk Lemstra <dirk@snakeware...>\n  * Added ResourceLimits class and text direction/gravity to Magick++.\n  * Added support for defining dimensions with icon:auto-resize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24796).\n\n2014-01-16  6.8.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define png:swap-bytes\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24818).\n  * Added image->duration to image.h, calculate duration in gif.c, and\n    report duration in identify.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23276).\n\n2014-01-15  6.8.8-3 Cristy  <quetzlzacatenango@image...>\n  * The -type truecolor option for a grayscale image returns RGB JPEG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24814).\n  * Support JSON coder (.e.g. convert image.jpg image.json).\n\n2014-01-10  6.8.8-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-2, SVN revision 14347.\n\n2014-01-09  6.8.8-2 Dirk Lemstra <dirk@snakeware...>\n  * Added option 'icon:auto-resize' to automatically store multiple sizes\n    in an ico image (requires 256x256 input image).\n  * Added text kerning/spacing to Magick++. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=24716).\n\n2013-12-30  6.8.8-2 Cristy  <quetzlzacatenango@image...>\n  * The -evaluate-sequence sum returns a proper alpha channel now (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24704).\n  * Support OpenJPEG for JPEG-2000 support.\n  * Support IsMagickWandInstantiated() method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=24724).\n  * LevelColorsImageChannel() returns proper status (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24751).\n  * Generate a proper SVG clipping path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24752).\n  * Return image moments with the identify -moments -verbose options.\n  * Perceptual hash metric for compare utility: -metric PHASH (algorithm\n    by Fred Wienhaus).\n\n2013-12-30  6.8.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-1, SVN revision 14087.\n\n2013-12-27  6.8.8-1 Cristy  <quetzlzacatenango@image...>\n  * Support points argument for draw MSL element.\n  * Fix misplaced closing parenthesis for strncmp() call in magick/xml-tree.c.\n  * The -page option now correctly sets the image page offset (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24701).\n\n2013-12-26  6.8.8-1 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading zip compressed PSD files. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24676).\n\n2013-12-25  6.8.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-0, SVN revision 14027.\n\n2013-12-23  6.8.8-0 Cristy  <quetzlzacatenango@image...>\n  * Blurring with transparency no longer returns a halo (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24665).\n  * Eliminate ICC profile memory leak for JP2 coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24679).\n\n2012-12-21  6.8.8-0 Dirk Lemstra <dirk@snakeware...>\n  * Made librsvg the default svg library for the windows distribution.\n\n2013-12-10  6.8.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-10, SVN revision 13965.\n\n2013-12-10  6.8.7-10  SiuChi Chan  <...>\n  * Fix crash when using -resize with GPU acceleration (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24603).\n\n2013-12-08  6.8.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-9, SVN revision 13950.\n\n2013-12-05  6.8.7-9  SiuChi Chan  <...>\n  * Silence warning related to GPU memory issues.\n  * Check if OpenCL is disabled in checkOpenCLEnvironment() method.\n  * Turn off OpenCL path for Intel OpenCL to avoid crash when not enough memory.\n  * Fixed a bug for OpenCL convolution.\n  * Reduce compiler warnings.\n\n2013-12-03  6.8.7-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug in coders/png.c that caused -define png:color-type=0 to\n    fail (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24568).\n\n2013-11-30  6.8.7-9 Dirk Lemstra <dirk@snakeware...>\n  * Fixed bug in automatic selection of OpenCL device (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24542).\n  * Fixed transparency for 32 bits BMP.\n\n2013-11-28  6.8.7-9 Cristy  <quetzlzacatenango@image...>\n  * The -type bilevel option sometimes returned an all white image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24444).\n  * Check blue channel threshold for -solarize option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24473).\n\n2013-11-27  6.8.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-8, SVN revision 13850.\n\n2013-11-27  6.8.7-8  SiuChi Chan  <...>\n  * Add an OpenCL-accelerated analog of AddNoiseImage().\n\n2013-11-23  6.8.7-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-7, SVN revision 13827.\n\n2013-11-23  6.8.7-7  SiuChi Chan  <...>\n  * Simplified interface to initialize the OpenCL environment.\n  * Automatic OpenCL device selection algorithm.\n  * Support ModulateImage() acceleration.\n  * Reduce the memory requirement for accelerated blur and unsharp mask.\n\n2013-11-16  6.8.7-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-6, SVN revision 13767.\n\n2013-11-14  6.8.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix possible memory corruption when writing PSD images (bug report from\n    Justin Grant).\n  * Constrain color reduction acceleration to positive integers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24459).\n  * fx:maxima.a now returns the alpha value rather than opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24461).\n\n2013-11-08  6.8.7-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-5, SVN revision 13682.\n\n2013-11-03  6.8.7-5 Cristy  <quetzlzacatenango@image...>\n  * The jpeg:extent option no longer returns double-free exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24366).\n  * Turn off arch-specific optimizations (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24353).\n  * The -type bilevel option no longer returns black image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24394).\n\n2013-11-03  6.8.7-5 Dirk Lemstra <dirk@snakeware...>\n  * Added support for pangocairo to the windows distribution.\n  * Added /OpenCL option to configure.exe to enable OpenCL.\n\n2013-10-31  6.8.7-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed cut-and-paste error in version.c that caused the \"png\" delegate\n    to be listed twice by the \"convert -version\" command.\n\n2013-10-30  6.8.7-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-4, SVN revision 13616.\n\n2013-10-26  6.8.7-4  Siu Chi Chan <...@amd.com>\n  * Major improvements to the OpenCL infrastructure.\n  * New OpenCL accelerated algorithms (function image, blur, radial blur,\n    unsharp mask, resize, contrast, equalize, despeckle).\n  * Added a new checkbox to enable OpenCL in the configure program.\n\n2013-10-24  6.8.7-4 Cristy  <quetzlzacatenango@image...>\n  * Color reduction acceleration from Yoya (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24324).\n  * -intensity rec709luma -colorspace gray returns gamma 1.0/2.2 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24330).\n  * Handle 16-bit JPEG-compressed TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24331).\n  * An image -compose ModulusAdd negate-image returns the original (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24337).\n  * Support %U escape character for resolution units (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24140).\n\n2013-10-23  6.8.7-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-3, SVN revision 13557.\n\n2013-10-23  6.8.7-3 Cristy  <quetzlzacatenango@image...>\n  * The -roll option is now working when the +x coordinate is +0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24314).\n\n2013-10-22  6.8.7-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-2, SVN revision 13534.\n\n2013-10-20  6.8.7-2 Cristy  <quetzlzacatenango@image...>\n  * Define cmsUInt32Number if LCMS version is < 2000.\n  * Set xc:gray() intensity to Rec709Luma (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24303).\n\n2013-10-20  6.8.7-2 Dirk Lemstra <dirk@snakeware...>\n  * GetImageDepth() no longer returns incorrect depth when HDRI enabled.\n\n2013-10-19  6.8.7-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-1, SVN revision 13486.\n\n2013-10-10  6.8.7-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -complex option, perform complex mathematics on an\n    image sequence.\n  * Sync pixel cache for -set colorspace cmyk option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24173).\n\n2013-09-27  6.8.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed problem with PNG8 reduction in coders/png.c (special case where\n    exactly 256 colors plus one transparent color are present).\n  * Set image->intensity = Rec709LuminancePixelIntensityMethod before\n    setting the colorspace to Gray while reading a gray PNG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24205).\n    This ensures that image->gamma will be set to 1.0 (linear).\n\n2013-09-26  6.8.7-1 Dirk Lemstra <dirk@snakeware...>\n  * Fixed incorrect size of DICOM image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24135).\n  * Fixed rounding in YUV coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24148).\n  * Fixed colorspace issue when combining images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24173).\n  * Replaced libjpeg with libjpeg-turbo in the windows distribution.\n  * Added support for liquid rescale to the windows distribution.\n  * Set image type after syncing the pixel cache.\n\n2013-09-25  6.8.7-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-0, SVN revision 13290.\n\n2013-09-23  6.8.7-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed comments about the -quality value in PNG coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24134).\n\n2013-09-19  6.8.7-0 Dirk Lemstra <dirk@snakeware...>\n  * Fixed issue with colormap when reading Viff image.\n  * Added support for opening https files under windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24121).\n  * Fixed incorrect format when reading EPT image from a blob (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24129).\n\n2013-09-18  6.8.6-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-10, SVN revision 13240.\n\n2013-09-07  6.8.6-10 Dirk Lemstra <dirk@snakeware...>\n  * Added support for writing DDS files.\n\n2013-08-29  6.8.6-10 Cristy  <quetzlzacatenango@image...>\n  * Call SVG / MSL xmlCleanupParser() / xmlInitParser() once (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23991).\n  * Support LEGO Mindstorms EV3 Robot Graphics File format (contributed\n    by bdwheele@ind.../\n  * Since glib-2.35.0 g_type_init() was removed (reference\n    https://bugs.gentoo.org/show_bug.cgi?id=481042).\n  * New identify define to output the location of the minimum, maximum, or\n    mean pixel of the image (e.g. identify -define identify:locate=maximum\n    -define identify:limit=7 rose).\n  * Column columns / rows no longer inverted for RGF image format (patch\n    from Brian Wheeler <bdwheele@india...>.\n  * 16bit PSD images might have a 65536 colormap (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24102).\n  * Ascii map is now declare as AsciiMap (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24106).\n  * Return label for identify -format \"%l\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24105).\n  * Add option to perform Fourier normalization in either the forward or\n    inverse transform (e.g -define fourier:normalize=inverse). The default\n    remains as it was in the forward transform (i.e. -define\n    fourier:normalize=forward)\n\n2013-08-26  6.8.6-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-9, SVN revision 13087.\n\n2013-08-16  6.8.6-9  SiuChi Chan  <...>\n  * Accelerate numerous image filters with OpenCL under AMD, Intel, and\n    NVidia.  Adapted from MulticoreWare OpenCL contribution.\n\n2013-08-10  6.8.6-9 Dirk Lemstra <dirk@snakeware..>\n  * Added the following command line options to configure.exe:\n      /x64, set 64 bit build\n      /mtd, set project type to: multi threaded dll\n      /sts, set project type to: single threaded static\n      /mts, set project type to: multi threaded static\n      /mtsd, set project type to: multi threaded static dll\n      /noWizard, skip the wizard and generate the project/solution files\n  * Fixed infinite loop with jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23314).\n  * Fixed performance issue when converting jpeg to png (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23922).\n\n2013-08-10  6.8.6.9 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define bmp:format=bmp2|bmp3|bmp4\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23875).\n\n2013-08-07  6.8.6-9 Cristy  <quetzlzacatenango@image...>\n  * Free disk resource if cache resources are exhausted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23877).\n  * Return proper EXIF:ISOSpeedRating property value for TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23913).\n  * Escape MIFF properties with null values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23931).\n  * Allow negative pixel values in TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23923).\n  * The -fx option no longer crashes for certain expressions (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23932).\n  * Add support for the -compare option (e.g. convert image.png reference.png\n    -metric RMSE -compare -format \"%[distortion]\" info:).\n  * The internal SVG renderer is now invariant for the \"fill\" and \"opacity\"\n    keywords.\n\n2013-08-06  6.8.6-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-8, SVN revision 12918.\n\n2013-08-04  6.8.6-8 Dirk Lemstra <dirk@snakeware...>\n  * Added support for WebP to the Windows distribution (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23856).\n\n2013-07-31  6.8.6-8 Cristy  <quetzlzacatenango@image...>\n  * Properly handle interlaced GIF images with less than 8 rows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23812).\n  * Ensure image colorspace is sRGB when writing WebP format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23841).\n  * Avoid deadlock with logging subsystem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23849).\n\n2013-07-25  6.8.6-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-7, SVN revision 12752.\n\n2013-07-24  6.8.6-7 Cristy  <quetzlzacatenango@image...>\n  * Missing case for HCLpColorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23811).\n\n2013-07-21  6.8.6.7 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not write \"jpeg:\" properties in a PNG output file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23794).\n\n2013-07-17  6.8.6-7 Dirk Lemstra <dirk@snakeware...>\n  * Fix memory leak in CloneImageArtifacts and CloneImageProfiles.\n  * Minor fix for the clipMask property in Magick++.\n\n2013-07-16  6.8.6-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-6, SVN revision 12718.\n\n2013-07-16  6.8.6-6 Cristy  <quetzlzacatenango@image...>\n  * JPEG ICC color profile requires null after ICC tag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23756).\n  * Don't sync channels for the -unsharp option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23740).\n  * Magick++ version so bump (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23752).\n\n2013-07-15  6.8.6-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-5, SVN revision 12684.\n\n2013-07-12  6.8.6-5 Dirk Lemstra <dirk@snakeware...>\n  * Fixed calculation of pixel area count limit flag ('@').\n  * Added option to enable OpenMP to configure.exe and improved creation\n    of x64 project file\n\n2013-07-10  6.8.6-5 Cristy  <quetzlzacatenango@image...>\n  * Compare exits with a non-zero exit code when no error (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23722).\n  * Correct calculation of quantization error (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=23734).\n  * Correct quantize tree walking mistake for RiemersmaDither (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23735).\n\n2013-07-10  6.8.6-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-4, SVN revision 12661.\n\n2013-07-09  6.8.6-4 Dirk Lemstra <dirk@snakeware...>\n  * Added combineImages, evaluateImages, mergeImageLayers, optimizeImageLayers\n    optimizePlusImageLayers and separateImages to STL.h (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23699).\n  * Added support for the fill area flag ('^') and the pixel area\n    count limit flag ('@') to the Geometry class of Magick++ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23704).\n  * Enabled automatic linking for static Magick++ in Visual Studio (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23558).\n\n2013-07-01  6.8.6-4 Cristy  <quetzlzacatenango@image...>\n  * Thumb property need Height, not height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23661).\n  * White pixels previously were written as black for the CIP format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23677).\n  * Rec709Luma is sRGB compatible (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23693).\n  * Colorspace RGB is linear, gamma is 1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23708).\n\n2013-07-01  6.8.6-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-3, SVN revision 12579.\n\n2013-06-26  6.8.6-3 Cristy  <quetzlzacatenango@image...>\n  * Improve HCL to RGB roundtrip (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22384).\n  * Prefer external log configuration file to built-in (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23640).\n  * Do not log in the IsLinkedListEmpty() method to prevent overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23640).\n  * Fix bug loading TGA image with 32-bit palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17889).\n  * Color profiles are no longer corrupted for the JPEG format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23651).\n  * Repair problem with -emboss / -equalize problem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23643).\n\n2013-06-24  6.8.6-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-2, SVN revision 12561.\n\n2013-06-21  6.8.6-2 Cristy  <quetzlzacatenango@image...>\n  * Fix memory corruption in the MorphologyApply() method.\n\n2013-06-20  6.8.6.2 Glenn Randers-Pehrson <glennrp@image...>\n  * Quiet two warnings about uninitialized variables in coders/png.c\n\n2013-06-20  6.8.6-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-1, SVN revision 12509.\n\n2013-06-16  6.8.6-1 Cristy  <quetzlzacatenango@image...>\n  * Don't decompand RGB for the -modulate option.\n  * Improve LCHab and LCHuv roundtrip to / from sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23596).\n\n2013-06-16  6.8.6-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-0, SVN revision 12475.\n\n2013-06-10  6.8.6-0 Cristy  <quetzlzacatenango@image...>\n  * Clone image->intensity in CloneImageProperties() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23569).\n  * Split test suite into smaller tests (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23577).\n  * Undercolor rectangle was off by one pixel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23574).\n  * Don't msync() for a read-only memory-mapped mode (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23531).\n  * BlurChannelImage() no longer faults for certain CMYK images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23581).\n  * Reduce memory requirements for large BMP images.\n\n2013-06-05  6.8.5-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-10, SVN revision 12419.\n\n2013-06-02  6.8.5-10 Cristy  <quetzlzacatenango@image...>\n  * Improve caption formatting (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23522).\n\n2013-06-01  6.8.5-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-9, SVN revision 12401.\n\n2013-05-30  6.8.5-9 Cristy  <quetzlzacatenango@image...>\n  * Caption no longer clips long words (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23504).\n  * The lightness intensity is (min(R',G',B')+max(R',G',B'))/2.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23517).\n\n2013-05-25  6.8.5-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-8, SVN revision 12362.\n\n2013-05-23  6.8.5-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Stopped a \"-fsanitize-address\" warning in the JNG coder.\n\n2013-05-20  6.8.5-8 Cristy  <quetzlzacatenango@image...>\n  * The -white-threshold option is symmetrical with -black-threshold (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23441);\n  * Fix multi-line PNM comments (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23442).\n  * The -format option should not automatically append a newline since the\n    user can specify a newline in the formatting expression.\n  * The -level option is no longer returning a darkened image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23479).\n  * Identify SVG image as \"SVG\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27654).\n\n2013-05-20  6.8.5-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-7, SVN revision 12310.\n\n2013-05-14  6.8.5-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize PNG iCCP chunks that contain the sRGB profile and replace\n    them with the PNG sRGB chunk.  Use \"-define png:preserve-iCCP\" to\n    get the previous behavior, of simply copying the iCCP chunk.\n\n2013-05-11  6.8.5-7 Cristy  <quetzlzacatenango@image...>\n  * Sometimes an sRGB image is masquerading as grayscale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23370).\n  * Labels no longer overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22964).\n  * If more then one exception, return the highest security exception.\n  * A grayscale image returns a color JPEG for -type TrueColor (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23421).\n  * Read PAM comment (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23442).\n\n2013-05-10  6.8.5-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-6, SVN revision 12257.\n\n2013-05-09  6.8.5-6 Cristy  <quetzlzacatenango@image...>\n  * The stream utility no longer faults when exporting float pixels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23394).\n\n2013-05-08  6.8.5-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-5, SVN revision 12227.\n\n2013-05-07  6.8.5-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Change the sample JPEG quantization table xml to something that works\n    really well with 2x2 Chroma subsampling around quality 75.\n\n2013-05-06  6.8.5-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminate whitespace from image properties that hold PNG chunk data.\n\n2013-05-05  6.8.5-5 Cristy  <quetzlzacatenango@image...>\n  * The -poly option treats the opacity channel as alpha (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23346).\n  * The -threshold 50% option returns a 50-50 black and white image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23354).\n  * Let user override the TIFF rows per strip  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23307).\n  * Fix transient bug in the -separate option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23335).\n\n2013-05-01  6.8.5-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-4, SVN revision 12089.\n\n2013-05-01  6.8.5-4 Cristy  <quetzlzacatenango@image...>\n  * Add DeleteImageArtifact() for jpeg:extent artifact (thanks to\n    Jimmy Xie @ Microsoft).\n  * Track morphology changes per thread to avoid a critical section.\n\n2013-04-28  6.8.5-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-3, SVN revision 12025.\n\n2013-04-29  6.8.5-3 Cristy  <quetzlzacatenango@image...>\n  * Add DeleteImageArtifact() for jpeg:extent artifact (thanks to\n    Jimmy Xie @ Microsoft).\n  * Add support for JXR / WDP image format.\n\n2013-04-28  6.8.5-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-2, SVN revision 12013.\n\n2013-04-28  6.8.5-2 Cristy  <quetzlzacatenango@image...>\n  * Use GetImageOption() for webp options (e.g. webp:lossless).\n\n2013-04-27  6.8.5-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-1, SVN revision 12000.\n\n2013-04-26  6.8.5-1 Cristy  <quetzlzacatenango@image...>\n  * Recognize xc:gray50 is non-linear.\n  * Loop over read() until requested bytes are consumed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=23268).\n  * Don't use gamma lookup map when HDRI is enabled.\n\n2013-04-24  6.8.5-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-0, SVN revision 11979.\n\n2013-04-16  6.8.5-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Handle benign errors as warnings in the PNG coder.\n\n2013-04-16  6.8.5-0 Cristy  <quetzlzacatenango@image...>\n  * Don't modify channel values for -separate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23193).\n  * The -adaptive-sharpen option is now sharpening properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23211).\n  * Sometimes an image says it's grayscale when it's not (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23217).\n  * Use malloc() to allocate X image data (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23221).\n  * If there are more components than quantization tables, the last table is\n    replicated.\n  * Removed the ICC profile from the logo: image definition in coders/magick.c;\n    libpng16 detected that it was a broken sRGB profile.\n  * Negatives raised to a non-integer power returns NaN's (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23234).\n\n2013-04-15  6.8.4-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-10, SVN revision 11851.\n\n2013-04-11  6.8.4-10 Cristy  <quetzlzacatenango@image...>\n  * Ensure -define jpeg:extent is restricted to at most 7 iterations (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23179).\n  * Move X11 font support from annotate.c source module to xwindow.c.\n\n2013-04-10  6.8.4-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-9, SVN revision 11818.\n\n2013-04-10  6.8.4-9 Bastien Roucaries  <roucaries.basti...>\n  * Respect --program-suffix configure script option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23143).\n  * Update to the newest AX_CHECK_PTHREAD macro from autoconf-archive.\n\n2013-04-10  6.8.4-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Save the calculated angle for \"deskew\" as the artifact \"deskew:angle\"\n\n2013-04-08  6.8.4-9 Cristy  <quetzlzacatenango@image...>\n  * Pass JP2 format type to decoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23038).\n  * Previously tinting a grayscale image returned dark results.\n  * The -page option only affects new images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23172).\n  * Revert 'Move binaries to lib subdirectory and link are created from binary\n    package' patch.  We're getting too many bug reports.\n\n2013-04-07  6.8.4-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-8, SVN revision 11743.\n\n2013-04-06  6.8.4-8 Cristy  <quetzlzacatenango@image...>\n  * Include intensity type in the MIFF metadata.\n\n2013-04-06  6.8.4-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-7, SVN revision 11720.\n\n2013-04-05  6.8.4-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix -sample sampling point to midpoints of sampling areas\n  * Add a \"sample:offset=\" define to allow users to adjust this\n    sampling point position in terms of percentage (default = 50x50)\n\n2013-04-02  6.8.4-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write a PNG gAMA or cHRM chunk when writing the iCCP or sRGB chunk.\n\n2013-04-02  6.8.4-7 Cristy  <quetzlzacatenango@image...>\n  * Return MagickWand for the library name for Wand.pc.\n  * The LCH colorspace makes the round-trip now.\n  * Revert the default upsampling algortithm for JPEG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23100).\n  * Prevent fault when temporary directory is not-writable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23117).\n\n2013-04-01  6.8.4-7 Bastien Roucaries  <roucaries.basti...>\n  * Prepare X11 support as a plugin.\n  * Fix compilation under HPUX of perlmagick\n\n2013-04-01  6.8.4-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-6, SVN revision 11640.\n\n2013-04-01  6.8.4-6 Cristy  <quetzlzacatenango@image...>\n  * The -clut option return a luma grayscale instead of the expected luminance.\n  * Add moduledir variable to MagickCore.pc to support the MagickFilter and\n    MagickCore kits.\n  * Caption fits the sized area (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23085).\n\n2013-03-31  6.8.4-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-5, SVN revision 11619.\n\n2013-03-30  6.8.4-5 Cristy  <quetzlzacatenango@image...>\n  * Fix transient bug when writing grayscale MIFF images.\n  * Adding noise to a gray image returns a gray image as expected.\n  * Image interlace no longer overwritten by proper cloning for GIF format.\n  * Extract the clipping path from an image file with clip:myimage.\n\n2013-03-29  6.8.4-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-4, SVN revision 11591.\n\n2013-03-29  6.8.4-4 Cristy  <quetzlzacatenango@image...>\n  * Update unit test signatures for Q8.\n  * Resolve send() / recv() socket problems under MinGW.\n\n2013-03-28  6.8.4-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-3, SVN revision 11581.\n\n2013-03-28  6.8.4-3 Cristy  <quetzlzacatenango@image...>\n  * Revert patch to ContrastStretchImage() to match results from 6.8.3-3.\n\n2013-03-27  6.8.4-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-2, SVN revision 11558.\n\n2013-03-27  6.8.4-2 Cristy  <quetzlzacatenango@image...>\n  * Use MorphologyApply() rather than MorphologyImage() for -sharpen / -blur.\n\n2013-03-27  6.8.4-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-1, SVN revision 11552.\n\n2013-03-26  6.8.4-1 Cristy  <quetzlzacatenango@image...>\n  * Sync 'intensity' option with current image.\n  * Normalize sharpen kernel to match that of 6.8.3-3.\n\n2013-03-26  6.8.4-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-0, SVN revision 11531.\n\n2013-03-20  6.8.4-0 Cristy  <quetzlzacatenango@image...>\n  * Do not write zero-length TIFF tags (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22957).\n  * Math library should be private for *.pc.in configuration files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22986).\n  * Do not split words for caption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17123).\n  * Modify the configure script check for the webp delegate library (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23025).\n  * The -blur, -gaussian-blur, and -sharpen are now convenience methods\n    for -morphology convolve.\n  * Fix infinite loop for 'display -window' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23028).\n  * Revert -auto-level patch to match the results of ImageMagick 6.8.3-4.\n  * Revert g_type_init() patch in svg.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23035).\n\n2013-03-18  6.8.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-10, SVN revision 11413.\n\n2013-03-15  6.8.3-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Added IM, libpng, and zlib version info to debug output.\n\n2013-03-10  6.8.3-10 Bastien Roucaries  <roucaries.basti...>\n  * Move PerlMagick arch independent part to 'default' folder.\n  * Move binaries to lib subdirectory and link are created from binary package.\n\n2013-03-10  6.8.3-10 Cristy  <quetzlzacatenango@image...>\n  * The TXT image format can now generate output compatible with the\n    -sparse-color option (e.g. convert image.png sparse-color:image.txt).\n  * Support -intensity option: method to generate an intensity value from a\n    pixel.\n  * Add -similarity-threshold option to the compare utility, the minimum\n    distortion for a (sub)image match.\n  * Avoid seq-fault in AcquireQuantumInfo() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22973).\n  * Comment resource initializers in magick/resource.c.\n\n2013-03-10  6.8.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-9, SVN revision 11294.\n\n2013-03-09  6.8.3-9 Cristy  <quetzlzacatenango@image...>\n  * Add a space after the LastPage option in coders/ps.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22940).\n\n2013-03-08  6.8.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-8, SVN revision 11283.\n\n2013-03-05  6.8.3-8 Cristy  <quetzlzacatenango@image...>\n  * GIF comments are no longer displaced by 1 for animated GIFs (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22901).\n  * A blur kernel with a zero sigma is unity.\n\n2013-03-03  6.8.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-7, SVN revision 11249.\n\n2013-03-02  6.8.3-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not replace gAMA found in input with 1/2.2\n  * Avoid a libpng16 warning about storing unknown chunks.\n\n2013-03-01  6.8.3-7 Cristy  <quetzlzacatenango@image...>\n  * Improve performance when rendering a caption.\n  * The compare 'map' image should not be transparent.\n  * Use only major version for decorating include path.\n\n2013-02-28  6.8.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-6, SVN revision 11210.\n\n2013-02-25  6.8.3-6 Cristy  <quetzlzacatenango@image...>\n  * Support built-in 1x1 and 2x1 threshold maps (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22861).\n  * Check for webp version (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22867).\n\n2013-02-25  6.8.3-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Relocated png_set_bKGD(), etc., after png_set_IHDR() because they\n    might depend on members of info_ptr that are set by png_set_IHDR().\n\n2013-02-25  6.8.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-5, SVN revision 11170.\n\n2013-02-23  6.8.3-5 Cristy  <quetzlzacatenango@image...>\n  * Read the WebP extended file format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n  * Add arch annotation to include path to distinquish ImageMagick versions\n    6 & 7.\n\n2013-02-22  6.8.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-4, SVN revision 11127.\n\n2013-02-22  6.8.3-4 Cristy  <quetzlzacatenango@image...>\n  * Reduce default memory resource limit under Windows.\n\n2013-02-19  6.8.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-3, SVN revision 11105.\n\n2013-02-19  6.8.3-3 Cristy  <quetzlzacatenango@image...>\n  * Set WEBP lossless / lossy property properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n\n2013-02-18  6.8.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-2, SVN revision 11087.\n\n2013-02-17  6.8.3-2 Cristy  <quetzlzacatenango@image...>\n  * Semaphore is now unlocked when an X11 annotation exception is thrown.\n  * WEBP coder enhancement and memory leak patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n\n2013-02-16  6.8.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-1, SVN revision 11060.\n\n2013-02-16  6.8.3-1 Cristy  <quetzlzacatenango@image...>\n  * Disable FORTIFY_SOURCE to fix a bug in LVVM / OpenMP support.\n\n2013-02-15  6.8.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-0, SVN revision 11045.\n\n2013-02-14  6.8.3-0 Cristy  <quetzlzacatenango@image...>\n  * Webp requires alpha, not opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22793).\n\n2013-02-12  6.8.3-0 Bastien Roucaries  <roucaries.basti...>\n  * Allow PerlMagick to be multi-quantum (e.g. Image::Magick::Q16).\n\n2013-02-11  6.8.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-10, SVN revision 11004.\n\n2013-02-11  6.8.2-10 Cristy  <quetzlzacatenango@image...>\n  * The XPM regression tests passes now.\n\n2013-02-09  6.8.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-9, SVN revision 10995.\n\n2013-02-09  6.8.2-9 Bastien Roucaries  <roucaries.basti...>\n  * Export versioning to automake in order to use it for library prefix.\n  * So bump was incomplete due to no changing map file.\n  * Change abi name by adding major version to lib name (will simplify\n    next imagemagick major version release work) and reset release version\n    to 1 (due to changing abi name).\n\n2013-02-09  6.8.2-9 Cristy  <quetzlzacatenango@image...>\n  * The DOT coders now compiles with GraphViz 2.30 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22767).\n\n2013-02-09  6.8.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-8, SVN revision 10986.\n\n2013-02-09  6.8.2-8 Cristy  <quetzlzacatenango@image...>\n  * MagickStatisticImage() method signature was corrected, SO bump required.\n\n2013-02-08  6.8.2-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-7, SVN revision 10965.\n\n2013-02-08  6.8.2-7 Cristy  <quetzlzacatenango@image...>\n  * Ensure MagickCore compiles with a C++ compiler.\n\n2013-02-07  6.8.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-6, SVN revision 10961.\n\n2013-02-07  6.8.2-6 Cristy  <quetzlzacatenango@image...>\n  * Don't destroy an image that's already destroyed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22747).\n  * Montage is now invariant to the font when no label image label exists.\n\n2013-02-06  6.8.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-5, SVN revision 10952.\n\n2013-02-05  6.8.2-5 Cristy  <quetzlzacatenango@image...>\n  * FITS now properly renders the 16 bit signed integer format.\n\n2013-02-04  6.8.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-4, SVN revision 10909.\n\n2013-02-02  6.8.2-4 Cristy  <quetzlzacatenango@image...>\n  * Do not subsample raw CMYK JPEG images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22731).\n\n2013-02-02  6.8.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-3, SVN revision 10894.\n\n2013-02-01  6.8.2-3 Cristy  <quetzlzacatenango@image...>\n  * Respect endian for FITS image format.\n  * Remove artifact when drawing a circle (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22724).\n\n2013-02-01  6.8.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Deleted some code added to the PNG decoder in SVN revision 10825; it\n    was failing to handle transparency in paletted images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22720).\n  * Compare alpha to \"QuantumRange-OpaqueOpacity\" not just \"OpaqueOpacity\"\n    when detecting transparency in the PNG encoder.\n\n2013-02-01  6.8.2-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-2, SVN revision 10883.\n\n2013-01-30  6.8.2-2 Cristy  <quetzlzacatenango@image...>\n  * Properly initialize new throttle resource limit.\n\n2013-01-29  6.8.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-1, SVN revision 10859.\n\n2013-01-28  6.8.2-1 Cristy  <quetzlzacatenango@image...>\n  * Fix 'format not a string literal' problem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22656).\n\n2013-01-28  6.8.2-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-0, SVN revision 10831.\n\n2013-01-21  6.8.2-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Impose a 32k limit on the number of text chunks that will be read.\n  * Implemented PNG00, PNG48 and PNG64 PNG subformats.\n  * Avoid reading back PNG pixel rows while reading a transparent PNG (\n    by using a local \"alpha\" value instead of GetPixelOpacity()).\n\n2013-01-21  6.8.2-0 Cristy  <quetzlzacatenango@image...>\n  * Avoid a rare thread lock for timeout event (e.g. MAGICK_TIME_LIMIT=30).\n  * Support a distributed pixel cache.\n  * Fix numerical stability problem for convolution.\n  * Increase segment stack size for -draw option.\n\n2013-01-18  6.8.1-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-10, SVN revision 10667.\n\n2013-01-08  6.8.1-10 Cristy  <quetzlzacatenango@image...>\n  * Add the same noise value to each channel of a grayscale image (+noise).\n  * Fix recursive descent within XGetWindowImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22550).\n  * Multi-plane MatLab images now render properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22586).\n\n2013-01-06  6.8.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed LBR01 (left-bit-replication) macro in coders/png.c; problem reported\n    by the clang compiler.\n  * Chromaticity values were read in the wrong order in the cHRM chunk\n    when it accompanied the sRGB chunk. Libpng applications built with\n    libpng16 and later will detect this and issue a warning (PNG files\n    previously written with the cHRM chunk are OK).  Removed the\n    troublesome redundant png_set_cHRM() and png_set_sRGB() calls.\n  * Look for libpng17 and libpng16 while configuring PNG support.\n\n2013-01-06  6.8.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-9, SVN revision 10518.\n\n2013-01-06  6.8.1-9 Cristy  <quetzlzacatenango@image...>\n  * Type correction in blob code.\n\n2013-01-02  6.8.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-8, SVN revision 10481.\n\n2013-01-02  6.8.1-8 Cristy  <quetzlzacatenango@image...>\n  * Check for a density of zero when rendering with Pango (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3).\n\n2013-01-01  6.8.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-7, SVN revision 10468.\n\n2013-01-01  6.8.1-7 Cristy  <quetzlzacatenango@image...>\n  * magick-baseconfig.h is architecture dependant;\n    make headers quantum depth neutral (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22509).\n\n2013-01-01  6.8.1-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-6, SVN revision 10461.\n\n2012-12-31  6.8.1-6 Cristy  <quetzlzacatenango@image...>\n  * Repair numerical stability issue with gradients (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22507).\n\n2012-12-30  6.8.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-5, SVN revision 10428.\n\n2012-12-29  6.8.1-5 Cristy  <quetzlzacatenango@image...>\n  * Correction to scientific notation for the -evaluate log option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22496).\n\n2012-12-29  6.8.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-4, SVN revision 10420.\n\n2012-12-28  6.8.1-4 Cristy  <quetzlzacatenango@image...>\n  * Support scientific notation for the -evaluate log option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22496).\n\n2012-12-25  6.8.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-3, SVN revision 10394.\n\n2012-12-25  6.8.1-3 Cristy  <quetzlzacatenango@image...>\n  * Remove pow() dependency from public header.\n\n2012-12-24  6.8.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-2, SVN revision 10385.\n\n2012-12-23  6.8.1-2 Cristy  <quetzlzacatenango@image...>\n  * Magickcore headers recently used pow() in the inline functions inside\n    public headers.  Thus in order to avoid library depends problem, put -lm\n    in library depends (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22483).\n  * Negative exponentiation bug fix (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22484).\n\n2012-12-23  6.8.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-1, SVN revision 10350.\n\n2012-12-23  6.8.1-1 Cristy  <quetzlzacatenango@image...>\n  * More large image performance tuning.\n\n2012-12-20  6.8.1-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-0, SVN revision 10327.\n\n2012-12-16  6.8.1-0 Cristy  <quetzlzacatenango@image...>\n  * Return non-zero exit status if two images differ for the compare utility.\n  * Large image performance tuning.\n\n2012-12-15  6.8.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-10, SVN revision 10236.\n\n2012-12-13  6.8.0-10 Cristy  <quetzlzacatenango@image...>\n  * Improve exception reporting when AcquireAuthenticCacheView() fails.\n\n2012-12-13  6.8.0-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Minor tweeks and commenting of Virtual Pixel shortcuts in\n    resampling filters.\n  * Added -define \"shepards:power\" to control the power setting (def=2)\n    for Shepards Method in -distort and  -sparse-color\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=22416\n\n2012-12-13  6.8.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-9, SVN revision 10182.\n\n2012-12-10  6.8.0-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Prepended \"Acquire\" and \"Relinquish\" to debugging log messages in\n    magick/resource.c that only showed the filename.\n  * Added temporary file-count diagnostics to tests/validate.c (this required\n    exporting GetPathTemplate() from magick/resource.c\n  * Eliminate file leak when writing the JNG image format.\n\n2012-12-09  6.8.0-9 Cristy  <quetzlzacatenango@image...>\n  * Further support for associating quantum depth with ABI (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * Check for negative square root when resampling (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22398).\n\n2012-12-07  6.8.0-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-8, SVN revision 10118.\n\n2012-11-28  6.8.0-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed problem with writing grayscale PNG, bug introduced in version\n    6.8.0-0 or 6.8.0-1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22355).\n\n2012-11-28  6.8.0-8 Cristy  <quetzlzacatenango@image...>\n  * Allow temporary-path policy to override temporary path environment\n    variables (e.g. MAGICK_TMPDIR).\n  * Implement symbol versioning (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * ABI is incompatible if quantum depth change. Add abi indication to library\n    name, thanks to Bastien Roucaries (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * The stream utility no longer returns a black image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22046).\n\n2012-11-26  6.8.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-7, SVN revision 10029.\n\n2012-11-25  6.8.0-7 Cristy  <quetzlzacatenango@image...>\n  * Width value is optional for label coder (e.g. -size x40 label:Magick).\n\n2012-11-20  6.8.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-6, SVN revision 10024.\n\n2012-11-21  6.8.0-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed an old bug in chromaticity decoding in coders/bmp.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22294).\n  * Fixed bug in coders/bmp.c that failed to read a paletted image\n    properly (fix by J. Summers, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22316).\n\n2012-11-21  6.8.0-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed bug in coders/bmp.c that failed to read transparency\n    properly (fix by J. Summers, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22312).\n\n2012-11-20  6.8.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-5, SVN revision 10001.\n\n2012-11-15  6.8.0-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added % escape prefixes %[artifact:..] and %[option:..]\n    Including glob search,  EG:  -print \"__Options__\\n%[option:*]\"\n    (backport from IMv7 changes)\n\n2012-11-10  6.8.0-5 Cristy  <quetzlzacatenango@image...>\n  * Revert HCL saturation strategy patch, it improperly clips white to black.\n  * Default to -dEPSCrop for Ghostscript unless eps:use-crop=false (reference\n    https://bugzilla.redhat.com/show_bug.cgi?id=832690#c2).\n  * Add support for -poly, build a polynomial from the image sequence and the\n    corresponding terms (coefficients and degree pairs).\n  * Support the OLE Macintosh image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22257).\n\n2012-11-08  6.8.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Implemented faster decoding of interlaced PNG images.\n\n2012-11-03  6.8.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Skip PNG palette-building when it is not needed.\n  * Let libpng expand sub-8-bit pixels while reading a PNG file.\n\n2012-11-01  6.8.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-4, SVN revision 9832.\n\n2012-10-31  6.8.0-4 Cristy  <quetzlzacatenango@image...>\n  * PFM images are grayscale, not sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22178).\n  * Keep YCbCR JPEG compressed TIFF images in the YCbCr colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22148).\n\n2012-10-27  6.7.9-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write sRGB chunk if image->gamma isn't close to (1/2.2), i.e.,\n    (0.45 <= gamma <= 0.46) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22139).\n\n2012-10-25  6.8.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-3, SVN revision 9783.\n\n2012-10-21  6.8.0-3 Cristy  <quetzlzacatenango@image...>\n  * TIFF positional information must be positive (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22106).\n  * Set the compression quality for the Webp image format.\n\n2012-10-21  6.8.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-2, SVN revision 9738.\n\n2012-10-20  6.8.0-2 Cristy  <quetzlzacatenango@image...>\n  * Wait for more bytes if the number of returned bytes is less than\n    requested in ReadBlob().\n  * Prefer fullname property for font, if it exists, otherwise family + style.\n\n2012-10-17  6.8.0-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added LanczosRadius filter, that blurs an EWA Lanczos to a integer\n    support size. Equivalent to Lanczos in tensor resize case.\n\n2012-10-16  6.8.0-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-1, SVN revision 9632.\n\n2012-10-12  6.8.0-1 Cristy  <quetzlzacatenango@image...>\n  * Fix color management for the -solarize option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22059).\n  * Some colormap unit tests failed for a quantum depth of 32 (problem\n    report from Glenn Randers-Pehrson).\n\n2012-10-12  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-0, SVN revision 9594.\n\n2012-10-07  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * Check -fx expression early to prevent fault.\n  * Performance boost for iOS / Android requires a SO major version increment.\n  * Corrupt PNG image could cause a memory leak (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22024).\n\n2012-10-06  6.7.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-10, SVN revision 9514.\n\n2012-10-01  6.7.9-10 Cristy  <quetzlzacatenango@image...>\n  * SVG specs says \"1pt\" equals \"1.25px\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21967).\n  * Support TIFF proprietary tag 34118.\n  * The define option is no longer \"lazy\" interpretation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22007).\n\n2012-10-01  6.7.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-9, SVN revision 9473.\n\n2012-09-27  6.7.9-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in JPEG decoder when reading a corrupt image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21948).\n  * Add exif:thumbnail namespace to distiguish orientation tag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21938).\n  * Respect DPX data offsets (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21960).\n\n2012-09-26  6.7.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-8, SVN revision 9437.\n\n2012-09-24  6.7.9-8 Cristy  <quetzlzacatenango@image...>\n  * Off-by-one error in DrawPolygonPrimitive().\n  * Fix memory leak in WebP decoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21943).\n  * Certain caption phrases were cut off (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21550).\n\n2012-09-22  6.7.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-7, SVN revision 9410.\n\n2012-09-20  6.7.9-7 Cristy  <quetzlzacatenango@image...>\n  * jpeg:sampling-factor might be an image property or an option (reference\nhttp://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21884).\n\n2012-09-15  6.7.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-6, SVN revision 9375.\n\n2012-09-14  6.7.9-6 Cristy  <quetzlzacatenango@image...>\n  * Don't compand the YCC colorspace, its already companded.\n\n2012-09-12  6.7.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-5, SVN revision 9358.\n\n2012-09-12  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Merge static inline Sigmoidal functions from IM7 to IM6.\n\n2012-09-12  6.7.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * All untapered windowing filters Welch and Cosine changed to use a 3 lobe\n    support (like Lanczos). These were not part of the original 'zoom' program.\n\n2012-09-11  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * sigmoidal-contrast: prevent out of range argument.\n\n2012-09-09  6.7.9-5 Cristy  <quetzlzacatenango@image...>\n  * The number of default OpenMP threads is 1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=21838).\n  * Only first image of raw grayscale image was set to GRAY (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21428).\n  * Change sigmoidal-contrast define to inline method to conform with ANSI-C\n    requirements.\n\n2012-09-10  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * enhance.c improvements:\n  * Add tanh/atanh clone of legacy sigmoidal map (faster & more accurate);\n  * Add final ClampToQuantum in sigmoidal colormap loop;\n  * Remove OpenMP for threads that do not loop over rows;\n  * Immediate no-op exit from sigmoidal-contrast if contrast<MagickEpsilon.\n\n2012-09-08  6.7.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-4, SVN revision 9282.\n\n2012-09-05  6.7.9-4 Cristy  <quetzlzacatenango@image...>\n  * Identify image files with embedded '%d' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21798).\n  * Don't include TIFF header for compress.c source module\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21800).\n\n2012-09-01  6.7.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-3, SVN revision 9202.\n\n2012-08-28  6.7.9-3 Cristy  <quetzlzacatenango@image...>\n  * Support -channel sync option for -equalize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21746).\n  * Don't remove color profile when setting the image colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21747).\n  * Recognize ICO format in URL (e.g. http://www.google.com/favicon.ico).\n  * Don't define HAVE_BOOLEAN for JPEG under MinGW (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=14071).\n\n2012-08-26  6.7.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-2, SVN revision 9120.\n\n2012-08-25  6.7.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug in Q32 builds that erroneously read grayscale 16-bit PNGs\n    as PseudoColor.\n\n2012-08-24  6.7.9-2 Cristy  <quetzlzacatenango@image...>\n  * Support -channel option for -solarize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21738).\n\n2012-08-23  6.7.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-1, SVN revision 9095.\n\n2012-08-22  6.7.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * The gAMA chunk with gamma==1.0 was ignored while deciding whether to set\n    the image colorspace to GRAY when reading grayscale PNG images.\n\n2012-08-16  6.7.9-1 Cristy  <quetzlzacatenango@image...>\n  * Adjust scaling for Luv colorspace conversion (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21664).\n  * Copy alpha channel of the -median option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21694).\n  * Don't add matte channel for -coalesce if input images don't have one.\n  * Prevent memory leak in ImageToBlob() if image write fails.\n  * In rare cases, label would not auto-size properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21716).\n  * Identify command now reports the image colorspace for non-verbose results.\n  * Account for stroke width when rendering a caption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21721).\n  * Don't colorize alpha channel if it is not active (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21547\n\n2012-08-15  6.7.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-0, SVN revision 8970.\n\n2012-08-14  6.7.9-0 Cristy  <quetzlzacatenango@image...>\n  * RGB -> HCL, return correct hue when g < b < r (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21646).\n  * Prefer inkscape for best SVG compliance.\n  * HCL -> RGB conversion enhancement (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21663).\n  * Utilize inkscape if it is in your execution path otherwise RSVG.  If\n    neither is available, revert to the internal SVG renderer.\n  * Initialize image->x_resolution and y_resolution to 0 in image.c\n    (previously they were initialized to DefaultResolution, which is 72.0).\n\n2012-08-12  6.7.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-10, SVN revision 8915.\n\n2012-08-10  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * Respect the image mask for option -selective-blur (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21631).\n  * Fix multiple issues with BMPv5 colorimetry (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21640).\n\n2012-08-10  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-9, SVN revision 8902.\n\n2012-08-07  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * Selective blur stopped working after version 6.7.4-10 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21604).\n  * Color reduction now handles transparent pixel properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18463).\n  * ClipImagePath() now returns a valid SVG XML for Windows x64 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21617).\n\n2012-08-05  6.7.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-8, SVN revision 8845.\n\n2012-08-03  6.7.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added 2d named convolution kernel Binomial (for Fred Wienhaus)\n\n2012-08-01  6.7.8-8 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Clean up sigmoidal-contrast.\n\n2012-07-31  6.7.8-8 Cristy  <quetzlzacatenango@image...>\n  * Use ConcatenateString() for multi-block GIF comments.\n  * Caption no longer chops off text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21558).\n  * Support LUV colorspace.\n  * Support HCL colorspace.\n  * Don't transform the composite image colorspace, set it instead.\n  * Interpret -border 5% as 5% of width and 5% of height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21537).\n  * Don't normalize zero-sum kernels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21584).\n  * Transform grayscale to linear RGB if fill color is non-gray (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21586).\n\n2012-07-30  6.7.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-7, SVN revision 8766.\n\n2012-07-28  6.7.8-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Update certain typecasts for libpng < and >= 1.4.0 to allow memory\n    allocation > 4GB and prevent a DOS.\n\n2012-07-28  6.7.8-7 Cristy  <quetzlzacatenango@image...>\n  * Set DICOM grayscale images to the gray colorspace.\n  * Missing grestore from ps3.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20445).\n  * Use GetMagickResourceLimit(ThreadResource) to set the # threads (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21543).\n\n2012-07-22  6.7.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Only report sRGB, iCCP, gAMA, cHRM chunks in \"identify\" output when\n    these chunks were actually present in input, and not when they were\n    inserted by the PNG decoder.\n\n2012-07-22  6.7.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-6, SVN revision 8720.\n\n2012-07-21  6.7.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Make sure \"intent\" is initialized in the PNG decoder.\n\n2012-07-21  6.7.8-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-5, SVN revision 8717.\n\n2012-07-20  6.7.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Corrected an error in the logic introduced in 6.7.8-3 to always write\n    a color PNG when image->colorspace is sRGB.\n\n2012-07-19  6.7.8-5 Cristy  <quetzlzacatenango@image...>\n  * Inverse YUV colorspace now produces pure red as expected.\n  * Support halted streams:\n    cat image.pnm | convert 'pnm:fd:0[0]' 'pnm:fd:0[0]' x:.\n\n2012-07-18  6.7.8-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-4, SVN revision 8697.\n\n2012-07-17  6.7.8-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Write ICON subimage as PNG32, only when its dimensions are 256x256\n    and image->compression is UndefinedCompression or ZipCompression.\n\n2012-07-16  6.7.8-4 Cristy  <quetzlzacatenango@image...>\n  * sRGB color gradients should be in a non-linear colorspace.\n  * Fix -fx to interpret scientific notation properly.\n  * The draw epsilon was too sensitive.\n\n2012-07-15  6.7.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-3, SVN revision 8675.\n\n2012-07-14  6.7.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Always write a color PNG when image->colorspace is sRGB.\n\n2012-07-08  6.7.8-3 Cristy  <quetzlzacatenango@image...>\n  * Attenuate random noise (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21387).\n  * Return linear grayscale for gradient:white-black.\n  * Promote linear grayscale to linear RGB when compositing.\n  * gradient:white-black is sRGB whereas gradient:'icc-color(rgb,255,255,255)-\n    icc-color(rgb,0,0,0)' is linear RGB whereas gradient:'gray(255)-gray(0)' is\n    linear grayscale.\n  * Revert sigmoidal contrast define (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=22&t=21415).\n\n2012-07-08  6.7.8-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-2, SVN revision 8621.\n\n2012-07-02  6.7.8-2 Cristy  <quetzlzacatenango@image...>\n  * Set the colorspace to linear gray when reading intensity values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21362).\n  * Don't overrun pixel buffer on inverse fourier for odd image widths.\n  * Change LAB encoding to permit blurring, resize, etc.\n    (signed A and B channel values now stored using a 50% bias)\n\n    Additional.. This removes a non-linear discontinuity from stored LAB space\n    values. As a result you can now Blur, Compose, Resize and Distort in LAB\n    colorspace, without problems that previously existed.\n\n2012-07-04  6.7.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-1, SVN revision 8595.\n\n2012-07-02  6.7.8-1 Cristy  <quetzlzacatenango@image...>\n  * A single argument -stereo option now works as documented (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21348).\n  * The -separate option returns channels as linear grayscale.\n  * Remove the sRGB color profile when converting to grayscale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21355).\n\n2012-06-29  6.7.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-0, SVN revision 8554.\n\n2012-06-28  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * Increase epsilon value, smallest difference between two points (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15870).\n\n2012-06-28  6.7.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-10, SVN revision 8534.\n\n2012-06-26  6.7.7-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't attempt to use Z_RLE compression strategy with old zlib (prior to\n    zlib-1.2.0) that does not support it.\n  * Increase PLTE chunk length to accommodate background color in indexed PNG\n    (reference www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21288).\n  * Added png:PLTE.number_colors to verbose output.\n\n2012-06-25  6.7.7-10 Cristy  <quetzlzacatenango@image...>\n  * Permit linear RGB for PNM and TIFF image formats.\n  * Fix conflicting types for 'GenerateDifferentialNoise' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21286).\n  * Fix cast to pointer from integer of different size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21286).\n  * Fix broken MSL profile tag (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=9).\n  * Better recognition of a CMYK PDF.\n\n2012-06-24  6.7.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-9, SVN revision 8460.\n\n2012-06-23  6.7.7-9 Cristy  <quetzlzacatenango@image...>\n  * Some options were incorrectly promoting linear gray to sRGB.\n\n2012-06-22  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-8, SVN revision 8432.\n\n2012-06-15  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * Support the -features option in convert / mogrify.\n  * Add support for the %[type] property.\n\n2012-06-15  6.7.7-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Geometry arguments accept multiple sign character for offsets\n    EG: \"-10-10\", \"-+10-+10\", or \"+-10+-10\" generate negative offsets\n    while \"+10+10\", \"++10++10\", or \"--10--10\" generate positive offsets,\n    that is, you can not only optionally have a sign in offset variable\n    substitutions, but can negate that substitution if you so desire.\n\n2012-06-12  6.7.7-8 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Refactor Catmull-Rom and Spline \"interpolation\" using\n    state-of-the-art unpublished formulas.\n  * Fix incorrect transparency handling of \"interpolative\" cubic\n    B-spline smoothing.\n\n2012-06-09  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * Initialize alpha channel when floodfill fill color is not opaque.\n  * XYZ and Lab colorspace conversion tweaked (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21161).\n\n2012-06-08  6.7.7-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-7, SVN revision 8219.\n\n2012-06-06  6.7.7-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Disabled the new libpng-1.5.10 test for invalid palette index when\n    reading a PNG or MNG (for speed), or when writing a MNG (because a\n    zero-length PLTE is valid in a MNG when the global PLTE is used).\n  * Display the PNG colortype as a string in \"identify -verbose\" output.\n\n2012-06-06  6.7.7-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Small refactor of Average Interpolators (save some multiplies)\n  * Added 'Spline' as a filter type as an alias to 'Cubic'. This brings both\n    Catrom and Spline -filter and -interpolate methods in line.  Cubic should\n    only be used when defining a general cubic using expert settings or\n    when listed in \"filter:verbose\" debugging output.\n\n2012-06-05  6.7.7-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-6, SVN revision 8164.\n\n2012-06-05  6.7.7-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Renamed 'Bicubic' interpolation the more precise definition 'Catrom'\n    Old name kept (but hidden) for backward compatibility in bit CLI and\n    API interfaces.\n\n2012-06-01  6.7.7-6 Cristy  <quetzlzacatenango@image...>\n  * The -set colorspace option sets the colorspace, it does not transform it.\n  * Assume grayscale images in the GIF format are linear.\n  * Add Nicolas Robidoux's bicubic interpolation method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21118).\n    This replaces the old 'bicubic' which was very extreme 'cardinal' cubic.\n  * Add DuPont & XFIG copyright to NOTICE.\n  * sRGB.icc has an unfriendly license, remove it.\n  * MinGW does not define KEY_WOW64_32KEY (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21155).\n  * -evaluate log properly handles negative pixel values.\n  * The display program displays the ImageMagick logo on EOF.\n\n2012-05-31  6.7.7-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-5, SVN revision 8099.\n\n2012-05-31  6.7.7-5 Cristy  <quetzlzacatenango@image...>\n  * Set terminal character for GIF comment.\n\n2012-05-30  6.7.7-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-4, SVN revision 8096.\n\n2012-05-30  6.7.7-4 Cristy  <quetzlzacatenango@image...>\n  * 'convert 1-bit.tif -rotate 90 ...' returns a 1-bit TIFF image as expected.\n\n2012-05-29  6.7.7-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Ignore APNG chunks even when libpng is built with the \"APNG patch\".\n\n2012-05-29  6.7.7-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-3, SVN revision 8089.\n\n2012-05-28  6.7.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix bug with stroke-dasharray (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21090).\n  * In rare cases, caption would not word-wrap properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21106).\n  * Don't set alpha pixels in SetImageVirtualPixelMethod() unless\n    image area is well defined (i.e. != 0) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=21110).\n\n2012-05-27  6.7.7-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Trialing the addition of new interpolation methods\n      Average16         average of 16 pixels around sampling point\n      Average9          9 pixels around nearest pixel\n      Average4          Average of 4 pixels around sampling point\n      Background        Background color (for resampling error checking)\n      Blend             Blend of closest 1, 2 or 4 pixel neighbors\n    NOTE: 'Average' is now equivalent to 'Average4',\n    previous to this version it was equivalent to 'Average16'.\n    The 'Background' method is for showing 'resample errors' be it\n    accidental, or on purpose.  See IM Examples, Cylindrical Filters.\n  * added -interpolative-resize added around this version\n\n2012-05-26  6.7.7-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-2, SVN revision 8066.\n\n2012-05-26  6.7.7-2 Cristy  <quetzlzacatenango@image...>\n  * MagickDelay() is in microseconds, not milliseconds.\n\n2012-05-25  6.7.7-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-1, SVN revision 8059.\n\n2012-05-20  6.7.7-1 Cristy  <quetzlzacatenango@image...>\n  * In rare cases, caption would not word-wrap properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21044).\n  * Set the JPEG image colorspace after the columns / rows are set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21059).\n  * Potential gray images are in either the gray or RGB colorspaces.\n  * Restore MagickSetImageEndian() method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=20425&p=81525).\n  * Respect resolution when rendering SVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21076).\n\n2012-05-20  6.7.7-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Delegates now 'spawn' faster (replaced 2 second sleep!) (for \"show:\")\n\n2012-05-17  6.7.7-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-0, SVN revision 7980.\n\n2012-05-17  6.7.7-0 Cristy  <quetzlzacatenango@image...>\n  * Group4-compressed TIFF / PDF image formats stopped working (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21039).\n  * Auto convert images in the grayscale colorspace to sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21031).\n\n2012-05-16  6.7.6-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-10, SVN revision 7952.\n\n2012-05-14  6.7.6-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Reset color info in grayscale PNG images to gamma=1.0, undefined\n    rendering_intent and chromaticity only when reading images that don't\n    have a gAMA, sRGB, or cHRM chunk.\n\n2012-05-14  6.7.6-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added a low level \"Cosine\" Windowing Filter -- Request by Nicholas Robidox\n  * Fixed Kaiser Window Filter (was producing all zeros!)\n  * Kaiser Window Function now uses the working value \"filter:kaiser-beta\"\n    (formerly \"filter:alpha\" in previous versions)\n  * Setting the expert option \"filter:kaiser-alpha\" will override this,\n    (after being multiplied by PI).\n  * Added resampling 'weight' sanity check in EWA resampling.\n  * Set default for histogram:unique-colors to be 'true' when undefined\n    Returning it to previous behavior.\n  * Refactor of InterpretImageProperties() (percent escape substitutions)\n  * Add \"gamma\" as a -set and % escape to access image gamma meta-data\n\n2012-05-05  6.7.6-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-9, SVN revision 7812.\n\n2012-05-05  6.7.6-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Allow braced single letter escapes, EG \"%[x]\" as equivalent to \"%x\"\n\n2012-05-04  6.7.6-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write an invalid PNG sRGB chunk when rendering intent is undefined.\n\n2012-05-01  6.7.6-9 Cristy  <quetzlzacatenango@image...>\n  * EXR images are in the linear RGB colorspace with a gamma of 1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20895).\n  * Correct annotation offset for right-to-left labels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20884).\n  * The -level 100x0% now produces the equivalent of -negate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20889).\n  * Virtual pixel transparent no longer cause fatal exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=20903).\n  * Promote gray image to sRGB when color is injected.\n\n2012-04-29  6.7.6-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-8, SVN revision 7705.\n\n2012-04-25  6.7.6-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Gaussian Filter Fixed.\n    For some strange reason it was half the width it should be with an\n    effective sigma of 0.25 (not 0.5).  This was the real reason \"variable\n    blur\" was not blurring enough.\n\n2012-04-24  6.7.6-8 Cristy  <quetzlzacatenango@image...>\n  * Colorspace round-trip unit tests now work for Q32.\n\n2012-04-23  6.7.6-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added the RobidouxSharp filter (originally defined Dec 2011)\n  * Fixed Variable Blur - bad blur area calculation\n    Also Gaussian is sampling properly. Substitute the faster Cubic for now.\n  * Convert no longer will do an implicit write to a single space image.\n\n2012-04-21  6.7.6-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-7, SVN revision 7587.\n\n2012-04-21  6.7.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Error when doing an implicit (final) write to a single space filename.\n    This is typically a failed line continuation and is very common.\n    Using an explicit \"-write\" will let you do this.\n\n2012-04-20  6.7.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Allow +-X+-Y as geometry arguments.\n\n2012-04-17  6.7.6-7 Cristy  <quetzlzacatenango@image...>\n  * Distinguish grayscale as sRGB not linear RGB.\n\n2012-04-16  6.7.6-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-6, SVN revision 7536.\n\n2012-04-11  6.7.6-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Always unlock the semaphore before returning from the png codec, either\n    by a \"return\" or png_error(); changed all Magick*Exception() calls\n    after setjmp() to png_error() to ensure proper cleanup (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16883).\n\n2012-04-10  6.7.6-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed log known alpha*kernel normalization bug in morphology convolve.\n\n    Convolve kernel weights have been separated from alpha blend handling.\n    Un-normalized kernels applied to images with active alpha will no longer\n    be auto-normalized due to the effect of alpha blending.  The bug causes\n    images using the default channel setting and having an alpha channel to\n    automatically 'normalize' the results of a convolve during the handling\n    of alpha blending.  This probably would cause severe effects when a\n    zero-summing kernel is being used on an image containing an active (though\n    likely fully-opaque) alpha channel, as division by near zero weights\n    would cause extreme color values in results.  This bug is not normally\n    seen as convolution, which is normally applied only to fully-opaque\n    images. And using a zero-summing kernel on an image with alpha also\n    results in a transparent image!  This is why it was not fixed up until now.\n\n2012-04-08  6.7.6-6 Cristy  <quetzlzacatenango@image...>\n  * Pixel allocation for Pango is stride*rows not stride*columns.\n  * Set the image resolution for Postscript files with an embedded Photoshop\n    profile.\n  * Ensure proper round trips to / from sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20751).\n\n2012-04-07  6.7.6-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-5, SVN revision 7483.\n\n2012-04-06  6.7.6-5 Cristy  <quetzlzacatenango@image...>\n  * Avoid fault in SetCacheAlphaChannel() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20681).\n  * Don't assume EXIF orientation tag is 2 bytes.\n\n2012-04-04  6.7.6-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-4, SVN revision 7356.\n\n2012-04-01  6.7.6-4 Cristy  <quetzlzacatenango@image...>\n  * Properly set the XCF alpha channel values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20642).\n  * Support 'orientation' property (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20650).\n  * The default RGB colorspace transform is now linear (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?p=82839#p82839).\n  * Prevent EXIF integer overflow (CVE-2012-1610).\n\n2012-03-30  6.7.6-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-3, SVN revision 7290.\n\n2012-03-29  6.7.6-3 Cristy  <quetzlzacatenango@image...>\n  * Don't copy invalid memory when reading TIFF EXIF IFD (CERT-FI case 634116,\n    CVE-2012-1798).\n  * Bail if we receive excessive JPEG warnings (CERT-FI case 634117,\n    CVE-2012-0260).\n  * Properly initialize EXIF buffers to prevent JPEG EXIF tag crash (CERT-FI\n    case 634118, CVE-2012-0259).\n\n2012-03-28  6.7.6-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-2, SVN revision 7245.\n\n2012-03-26  6.7.6-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added \"Nearest\" as a synonym for \"Nearest-Neighbor\" interpolate setting\n\n2012-03-21  6.7.6-2 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/png.c: stored \"file_gamma\" for later use by identify.\n\n2012-03-19  6.7.6-2 Cristy  <quetzlzacatenango@image...>\n  * Add full support for Pango markup.\n  * Pango namespace is 'pango:', not 'caption:'.\n  * Correct for EXR images with broken display windows.\n\n2012-03-18  6.7.6-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-1, SVN revision 7145.\n\n2012-03-16  6.7.6-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Reduce the scope of quantum_info in the PNG decoder to avoid a possible\n    memory leak (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20522).\n\n2012-03-13  6.7.6-1 Cristy  <quetzlzacatenango@image...>\n  * Use uint32 pointer for ReadStripMethod in coders/tiff.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20526).\n  * Ghostscript 32/64 bit detection patch (contributed by\n    axeld@pinc-...).\n  * Honor center gravity for caption: with Pango support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20517).\n  * Add support for pango: coder to render captions with Pango.\n\n2012-03-10  6.7.6-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-0, SVN revision 7090.\n\n2012-03-06  6.7.6-0 Cristy  <quetzlzacatenango@image...>\n  * Importing from the X11 root windows no longer leaks memory (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20470).\n  * Check to see if delegate file exists before copying.\n\n2012-03-05  6.7.5-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-10, SVN revision 7056.\n\n2012-03-05  6.7.5-10 Cristy  <quetzlzacatenango@image...>\n  * Fix too many arguments to AnnotateImage() (copy/paste bug).\n\n2012-03-02  6.7.5-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-9, SVN revision 7046.\n\n2012-02-29  6.7.5-9 Cristy  <quetzlzacatenango@image...>\n  * Caption no longer includes the prefix \"caption:\" in the rendered text.\n  * Auto scale pointsize for -size 100x100 caption:\n\n2012-03-02  6.7.5-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-8, SVN revision 7027.\n\n2012-03-02  6.7.5-8 Glenn Randers-Pehrson <glennrp@image...>\n  * non-verbose identify now reports DirectClass for transparent PNG images\n    to agree with the report by identify -verbose.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20448 and\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15482).\n\n2012-02-29  6.7.5-8 Cristy  <quetzlzacatenango@image...>\n  * Support infinite caption lengths.\n  * Permit custom JPEG quantization tables (e.g.\n    -define jpeg:q-table=quantization-table.xml).\n  * Missing grestore from ps2.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20445).\n\n2012-02-29  6.7.5-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Image list options (like \"-delete\" and \"-swap\") to \"montage\".\n\n2012-02-25  6.7.5-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-7, SVN revision 6965.\n\n2012-02-23  6.7.5-7 Cristy  <quetzlzacatenango@image...>\n  * Add support for the EMFPlus delegate program.\n\n2012-02-22  6.7.5-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Re-added the Iterative Distance function in morphology (as opposed to the\n    faster more direct 2-pass Distance Function that replaced it) so it can be\n    used in the special situation of Constrained Distance Morphology.\n    http://www.imagemagick.org/discourse-server/viewtopic.php??f=2&t=18032\n\n2012-02-13  6.7.5-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-6, SVN revision 6851.\n\n2012-02-13  6.7.5-6 Cristy  <quetzlzacatenango@image...>\n  * Only set PDF & PS page size when explicitly requested (e.g. -page).\n\n2012-02-12  6.7.5-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-5, SVN revision 6840.\n\n2012-02-12  6.7.5-5 Cristy  <quetzlzacatenango@image...>\n  * Only use the canvas size of the very first frame of a GIF image sequence.\n\n2012-02-11  6.7.5-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-4, SVN revision 6824.\n\n2012-02-08  6.7.5-4 Cristy  <quetzlzacatenango@image...>\n  * Set image alpha channel for -virtual-pixel background and transparent.\n  * Get tiff:fill-order as an image artifact, not an image option.\n\n2012-02-06  6.7.5-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-3, SVN revision 6732.\n\n2012-02-06  6.7.5-3 Cristy  <quetzlzacatenango@image...>\n  * TIFF no longer writes the incorrect fill order.\n\n2012-02-05  6.7.5-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-2, SVN revision 6718.\n\n2012-02-03  6.7.5-2 Cristy  <quetzlzacatenango@image...>\n  * Add SyncImagePixelCache() to ensure cache morphology is consistent.\n  * Patch so two -colorspace options return correct results for round-trip.\n\n2012-02-02  6.7.5-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-1, SVN revision 6684.\n\n2012-01-30  6.7.5-1 Cristy  <quetzlzacatenango@image...>\n  * Support the -alpha remove option (use it to remove transparency from PDF,\n    convert -density 200 apple.pdf -alpha remove x:).\n  * Use union instead of casting gzFile and BZFILE.\n  * Don't treat PSD user channel as alpha (patch from Dominic Benson).\n  * Prevent overflow when casting short int to size_t when parsing a\n    maliciously crafted image with an IFD whose all IOP tags' value offsets\n    point to the beginning of the IFD itself [CVE-2012-0247].\n  * Prevent DES when parsing a maliciously crafted image with an IFD whose\n    all IOP tags' value offsets point to the beginning of the IFD itself\n    [CVE-2012-0248].\n  * Caption with Pango support no longer return a blank canvas.\n  * Correct sRGB colorspace conversion equations.\n\n2012-01-30  6.7.5-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix bug in png coder (spurious warning, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20257).\n\n2012-01-28  6.7.5-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-0, SVN revision 6606.\n\n2012-01-25  6.7.5-0 Cristy  <quetzlzacatenango@image...>\n  * Zlib-1.2.5.2 requires gzFile cast (bug report from John Bowler).\n\n2012-01-25  6.7.4-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-10, SVN revision 6592.\n\n2012-01-25  6.7.4-10 Cristy  <quetzlzacatenango@image...>\n  * Update PerlMagick TIFF regression signatures to match endian order.\n\n2012-01-24  6.7.4-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-9, SVN revision 6589.\n\n2012-01-24  6.7.4-9 Cristy  <quetzlzacatenango@image...>\n  * Fix rare file link in the pixel cache.\n\n2012-01-20  6.7.4-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-8, SVN revision 6551.\n\n2012-01-19  6.7.4-8 Cristy  <quetzlzacatenango@image...>\n  * Although MagickRealType is a double, use double for KernelInfo values in\n    the rare event of problems with C++ name mangling.\n  * Get strokes with patterns (e.g. -stroke xc:red) working again.\n  * Revert KernelInfo values from MagickRealType to double.\n\n2012-01-17  6.7.4-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write ancillary chunks (except for tRNS and gAMA) in PNG-encoded\n    ICO files.\n\n2012-01-14  6.7.4-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-7, SVN revision 6471.\n\n2012-01-13  6.7.4-7 Cristy  <quetzlzacatenango@image...>\n  * Default to a lighter hinting algorithm for non-monochrome font rendering.\n\n2012-01-12  6.7.4-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-6, SVN revision 6434.\n\n2012-01-12  6.7.4-6 Cristy  <quetzlzacatenango@image...>\n  * Eliminate preprocessor exception for the HDRI build.\n\n2012-01-10  6.7.4-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-5, SVN revision 6422.\n\n2012-01-02  6.7.4-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed -black-threshold and -white-threshold so they work properly with\n    the -channels option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20096).\n\n2012-01-02  6.7.4-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed PNG_USE_CLONE cruft from the PNG encoder (see 2011-11-19 entry)\n  * Promote image depths 9-15 to 16 to avoid crashing in the PNG\n    encoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20098).\n\n2012-01-01  6.7.4-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-4, SVN revision 6318.\n\n2011-12-30  6.7.4-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix problems with JNG encoder \"quality\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20076).\n\n2011-12-30  6.7.4-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-3, SVN revision 6310.\n\n2011-12-28  6.7.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in JP2 coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20071).\n  * Use maximum bounds when rendering PDF (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20078).\n\n2011-12-25  6.7.4-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-2, SVN revision 6254.\n\n2011-12-24  6.7.4-2 Cristy  <quetzlzacatenango@image...>\n  * Export new Windows binaries.\n\n2011-12-21  6.7.4-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-1, SVN revision 6236.\n\n2011-12-12  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * Sped up -noise option when radius is 0.\n  * Read concatenated arcs correctly in a SVG path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19992).\n  * PDF's now convert properly with -define pdf:use-cropbox=true (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20033).\n\n2011-12-09  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-0, SVN revision 6162.\n\n2010-12-06  6.7.4-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated use of FARDATA in coders/png.c; it won't be supported in\n    libpng-1.6.0 and is not needed now.\n\n2011-11-29  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * Add GetQuantumFormat() method to return the quantum format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19961).\n  * Allow unspecified width/height in geometries with the aspect flag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19964).\n  * MagickGetImageDepth() no longer returns the depth setting but instead\n    computes the depth of the image.\n\n2011-12-02  6.7.4-0 Anthony  <quetzlzacatenango@image...>\n  * Fixed Equal-Area Cropping (size and minimum of delta increments)\n\n2011-12-01  6.7.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-10, SVN revision 6106.\n\n2011-11-29  6.7.3-10 Cristy  <quetzlzacatenango@image...>\n  * Delay reading TIFF EXIF properties to prevent premature exit.\n  * Remove duplicates from the configuration file search path under Windows.\n  * Use viewbox offset when setting affine transform translation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19943).\n  * Ensure equally sized tiles for -crop 11x2@ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18322).\n  * Recognize SI prefixes for jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19944).\n\n2011-11-27  6.7.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-9, SVN revision 6092\n\n2011-11-27  6.7.3-9 Cristy  <quetzlzacatenango@image...>\n  * Upgrade libtool / ltdl to version 2.4.7.\n\n2011-11-25  6.7.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-8, SVN revision 6084\n\n2011-11-20  6.7.3-8 Cristy  <quetzlzacatenango@image...>\n  * The exif:ExposureBiasValue property is a signed value.\n  * Prevent buffer underflow for 1-bit PSD images.\n  * Don't include alpha channel when computing range unless image->matte is\n    set.\n  * Set FILETYPE_REDUCEDIMAGE tag on pyramidal TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19892).\n  * Correct image geometry for Postscript for hi-res bounding box (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19807).\n\n2011-11-19  6.7.3-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with scaling Q16 background to PNG sub-8-bit bKGD and\n    again disabled PNG_USE_CLONE in coders/png.c.\n\n2011-11-18  6.7.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-7, SVN revision 6024\n\n2011-11-18  6.7.3-7 Cristy  <quetzlzacatenango@image...>\n  * Ensure embedded XML resource file is null terminated (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19856).\n\n2011-11-17  6.7.3-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added a -define filter:alpha to contol the 'alpha value' of the\n    Kaiser Windowing filter.  Default value is 6.5\n\n2010-11-15  6.7.3-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Reverted the change of 6.6.6-7 that creates an image clone for use\n    by the PNG encoder.  This was not useful and was somewhat wasteful.\n  * After finding out that writing the bKGD chunk in sub-8-bit PNG fails,\n    enabled PNG_USE_CLONE (to create an image clone again)\n\n2011-11-14  6.7.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-6, SVN revision 5972.\n\n2011-11-11  6.7.3-6 Cristy  <quetzlzacatenango@image...>\n  * Prefer the hires bounding box for Postscript rendering (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19807).\n  * Default configure.xml destination folder to /usr/lib/ImageMagick-ver/config.\n\n2011-11-09  6.7.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-5, SVN revision 5936\n\n2011-11-07  6.7.3-4 Cristy  <quetzlzacatenango@image...>\n  * Add ShearRotateImage() method.  RotateImage() now uses distorts rather\n    than shears.\n  * MagickCoreGenesis() path must be accessible to use (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19795).\n\n2011-11-06  6.7.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-4, SVN revision 5876\n\n2011-11-02  6.7.3-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Ensure that the GIF encoder writes a large enough logical screen (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19734).\n\n2011-11-02  6.7.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-3, SVN revision 5825\n\n2011-11-02  6.7.3-3 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in the TIFF coder.\n  * Support -debug accelerate option.\n  * Support -includearch-dir and -sharearch-dir configure option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19720).\n  * Use Pango to improve the caption coder.\n\n2011-11-01  6.7.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-2, SVN revision 5718\n\n2011-11-01  6.7.3-2 Cristy  <quetzlzacatenango@image...>\n  * Support Ghostscript under 64-bit Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19659).\n  * Correct affine translation for certain SVG files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19664).\n  * -evaluate-sequence multiply no longer hangs ereference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19549).\n\n2011-10-15  6.7.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-1.\n\n2011-10-15  6.7.3-1 Cristy  <quetzlzacatenango@image...>\n  * Read TIFF EXIF profile before reading the image data.\n  * Fix \"test: no: unexpected operator\" in the configure script (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19615).\n  * Off by one error when writing the JPEG XMP profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19616).\n  * Revert GetPathComponent() patch.\n\n2011-10-09  6.7.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-0.\n\n2011-10-09  6.7.3-0 Cristy  <quetzlzacatenango@image...>\n  * Generate output for caption:\"[!]\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19589.\n\n2011-10-05  6.7.3-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Add \"png:format\" property with possible values png8, png24, and png32,\n    for use when prepending the format type to the filename is not convenient\n    or is not possible, e.g., when embedding the PNG in a PNG-encoded ICO.\n\n2011-10-04  6.7.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-10.\n\n2011-10-04  6.7.2-10 Cristy  <quetzlzacatenango@image...>\n  * Remove most of the LLVM compiler warnings.\n  * Fix bug in -evaluate-sequence multiply (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19549).\n  * Upgrade to sRGB V4 ICC profile (reference\n    http://www.color.org/srgbprofiles.xalter).\n  * Distinguish embedded PNG vs BMP within the MicroSoft ICON image format.\n\n2011-09-30  6.7.2-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize the sRGB version 4 ICC profile and write PNG sRGB chunk instead.\n  * Use crc32 instead of \"sRGB\" string to recognize certain sRGB profiles.\n\n2011-09-26  6.7.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-9.\n\n2011-09-26  6.7.2-9 Cristy  <quetzlzacatenango@image...>\n  * Fix race condition on image rotate @ 90 degrees.\n\n2011-09-25  6.7.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-8.\n\n2011-09-20  6.7.2-8 Cristy  <quetzlzacatenango@image...>\n  * Prevent infinite loop when font is too large for specified width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19502).\n  * Fix LFS cross-compile detection (patch from Mike Frysinger).\n  * Add open_utf8(), fopen_utf8(), access_utf8(), etc. utility methods.\n\n2011-09-15  6.7.2-7 Cristy  <quetzlzacatenango@image...>\n  * Convert empty .htm / .html file no longer removes source file.\n  * -crop 11x2@ now returns 22 images as expected.\n  * Enable reading the EXIF profile in a TIFF image under Windows.\n  * Support drawing text with bitmap font.\n\n2011-09-13  6.7.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-6.\n\n2011-09-12  6.7.2-6 Cristy  <quetzlzacatenango@image...>\n  * Expand pixel range for 12 bit DCM images stored in 16-bit words.\n  * Gray images not displayed properly when saved as MIFF with sRGB\n    colorspace.\n  * OpenCL's clCreateContextFromType() no longer returns a system default.\n  * Use -enable-zero-configuration for zero configuration ImageMagick\n    (previously -enable-embeddable).\n\n2011-09-10  6.7.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-5.\n\n2011-09-10  6.7.2-5 Cristy  <quetzlzacatenango@image...>\n  * SO bump.\n\n2011-09-09  6.7.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-4.\n\n2011-09-05  6.7.2-4 Cristy  <quetzlzacatenango@image...>\n  * Fix cut-n-paste error when reading JPEG profiles.\n\n2011-09-07  6.7.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-3.\n\n2011-09-05  6.7.2-3 Cristy  <quetzlzacatenango@image...>\n  * A small memory overwrite when reading TIFF with 1-bit alpha (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19417).\n  * Remove a 2 byte memory leak when checking for environment variables.\n\n2011-09-05  6.7.2-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-2.\n\n2011-09-03  6.7.2-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize the sRGB ICC profile and write the PNG sRGB profile instead\n    of a full iCCP chunk.\n\n2011-08-31  6.7.2-2 Cristy  <quetzlzacatenango@image...>\n  * Write grayscale MIFF as a single gray pixel component, not RGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=19403).\n  * Bail gracefully for corrupt JPEG images.\n  * Bail gracefully for negative montage geometries (references\n    https://bugzilla.redhat.com/show_bug.cgi?id=735599).\n  * Account for DCm bits allocated 16 and significant bits 12 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19420).\n  * Fix bug when appending JPEG image profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19429).\n\n2011-08-29  6.7.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-1.\n\n2011-08-29  6.7.2-1 Cristy  <quetzlzacatenango@image...>\n  * The AllChannels defined changed to 0x7ffffff to avoid integer overflow.\n\n2011-08-26  6.7.2-0 Cristy  <quetzlzacatenango@image...>\n  * HDR format 32-bit_rle_xyze implies the XYZ colorspace.\n\n2011-08-22  6.7.1-10 Cristy  <quetzlzacatenango@image...>\n  * Revert FormatImageAttributeList(), FormatImagePropertyList() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19339).\n\n2011-08-21  6.7.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised configure.ac (and configure) to look for -lpng15, -lpng14, -lpng12,\n    and -lpng in that order instead of just -lpng.  This should help find\n    a consistent library and headers when users upgrade their libpng delegate\n    from one version to another, incompatible version.\n\n2011-08-20  6.7.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-9.\n\n2011-08-20  6.7.1-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in text annotation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19331).\n\n2011-08-18  6.7.1-9 Glenn Randers-Pehrson <glennrp@image...>\n  * The \"-strip\" option was excluding the PNG tRNS chunk (see 6.6.6-7, below);\n  revised the -strip option so it behaves as\n  if \"-define PNG:include-chunk=none,trns,gama\" had appeared on the commandline.\n  * When writing a PNG8 and more than one transparent color is present,\n  merge them into the image->background_color (Reference\n  http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19329),\n  finishing the implementation started in version 6.6.8-7.\n\n2011-08-18  6.7.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-8.\n\n2011-08-18  6.7.1-8 Cristy  <quetzlzacatenango@image...>\n  * Caption now wraps properly for Chinese text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19249).\n\n2011-08-18  6.7.1-8 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder would sometimes fail to respect the -define PNG:color-type\n    option when the incoming image was PseudoClass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19262).\n\n2011-08-15  6.7.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-7.\n\n2011-08-15  6.7.1-7 Cristy  <quetzlzacatenango@image...>\n  * Properly handled continued JPEG embedded profiles.\n\n2011-08-12  6.7.1-6 Cristy  <quetzlzacatenango@image...>\n  * Yet another attempt to read Japanese filenames under Windows.\n\n2011-08-10  6.7.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-5.\n\n2011-08-10  6.7.1-5 Cristy  <quetzlzacatenango@image...>\n  * Revert -colorspace sRGB option patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19256).\n  * Revert -type PaletteMatte option patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19263\n\n2011-08-09  6.7.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-4.\n\n2011-08-09  6.7.1-4 Cristy  <quetzlzacatenango@image...>\n  * Revert MultiByteToWideChar() for Windows patch.\n\n2011-08-05  6.7.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-3.\n\n2011-08-05  6.7.1-3 Cristy  <quetzlzacatenango@image...>\n  * Use MultiByteToWideChar() for Windows filenames (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19242).\n\n2011-08-03  6.7.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-2.\n\n2011-08-02  6.7.1-2 Cristy  <quetzlzacatenango@image...>\n  * Windows does not support acosh(), asinh(), or atanh().\n  * Accept filenames with time stamps and a sub-image specification (e.g.\n    test-18:37.jpg[0]).\n\n2011-08-01  6.7.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-1.\n\n2011-08-01  6.7.1-1 Cristy  <quetzlzacatenango@image...>\n  * Support MSL 'set gravity' element.\n  * Don't report HSB colors as RGB colornames (e.g. hsb(0%,0%,100%)).\n  * Support -fx acosh(), asinh(), and atanh().\n\n2011-07-21  6.7.1-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed a case that prevented rotations of rectangle kernels.\n\n2011-07-01  6.7.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Use zlib default compression strategy instead of Z_RLE and Z_FIXED\n    strategies when linking with zlib versions (prior to 1.2.0 and 1.2.2.2,\n    respectively) that don't support them.\n  * Exit test loop sooner in coders/png.c when a non-gray pixel is found.\n\n2011-06-30  6.7.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-10.\n\n2011-06-30  6.7.0-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define PNG:compression-level|strategy|filter=value\" options to\n    the PNG encoder.  If these options are used, they take precedence over\n    the -quality option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?&f=1&p=73548).\n\n2011-06-29  6.7.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Handle \"-quality 97\" properly in the png encoder, i.e., use intrapixel\n    filtering when writing a MNG file and no filtering when writing a PNG file.\n  * Added support for Z_RLE strategy in the png compressor, using\n    -quality 98 or 99.\n\n2011-06-28  6.7.0-10 Cristy  <quetzlzacatenango@image...>\n  * Properly allocate points when render text with large font size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18997).\n\n2011-06-25  6.7.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-9.\n\n2011-06-18  6.7.0-9 Cristy  <quetzlzacatenango@image...>\n  * Defend against corrupt PSD resource blocks.\n\n2011-06-15  6.7.0-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-8.\n\n2011-06-14  6.7.0-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Initial implementation of Cylinder to/from Plane 3D Distorts\n    Includes derivative (scaled lookup), and anti-aliased horizon (validity)\n    Currently can NOT handle extractions from full 360 cylinder panoramas.\n\n2011-06-13  6.7.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-7.\n\n2011-06-09  6.7.0-7 Cristy  <quetzlzacatenango@image...>\n  * Fixed \"conversion from unsigned __int64 to double not implemented\"\n    so IM can compile under VisualStudio 6.\n\n2011-06-08  6.7.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder would sometimes make black pixels transparent when some\n    other gray level was supposed to be the transparent color (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18900).\n    This occurred only with 1, 2, 4-bit grayscale images with Q16 or Q32\n    builds.\n\n2011-06-08  6.7.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-6.\n\n2011-06-08  6.7.0-6 Cristy  <quetzlzacatenango@image...>\n  * Fix transient error for composite 'Over' operator.\n\n2011-06-07  6.7.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-5.\n\n2011-06-07  6.7.0-5 Cristy  <quetzlzacatenango@image...>\n  * Fix one-off bug in option parser (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=609177).\n  * Transient bug with composite 'Over' in magick/composite-private.h.\n\n2011-06-06  6.7.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-4.\n\n2011-06-03  6.7.0-4 Cristy  <quetzlzacatenango@image...>\n  * Support -direction right-to-left for the label: and caption: coders.\n  * Blue / green reversed for JPEG-compressed TIFF images.\n\n2011-06-03  6.7.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-3.\n\n2011-06-02  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * Use memmove() instead of memcpy() in StripString().\n\n2011-05-27  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-2.\n\n2011-05-26  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * ImageMagick now compiles on Hurd (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=628020).\n  * Use vfprintf rather than fprintf in FormatLocaleFileList().\n\n2011-05-26  6.7.0-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-1.\n\n2011-05-25  6.7.0-1 Cristy  <quetzlzacatenango@image...>\n  * Not all Linux'es define locale_t (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18819).\n\n2011-05-22  6.7.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-0.\n\n2011-05-21  6.7.0-0 Cristy  <quetzlzacatenango@image...>\n  * Avoid fault on corrupt JPEG images.\n  * Avoid fault on certain DJVU images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18807).\n  * Fix -fx to interpret scientific notation properly.\n\n2011-05-20  6.6.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-10.\n\n2011-05-20  6.6.9-10 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder now respects the -depth setting, including 1, 2, 4.\n    Previously settings other than 8 and 16 were ignored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18412).\n\n2011-05-16  6.6.9-10 Cristy  <quetzlzacatenango@image...>\n  * Don't use comma as a separator for stroked text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18742).\n  * Use C locale when generating or interpreting SVG.\n  * Fix \"unterminated macro\" for Q32 build of coders/png.c.\n\n2011-05-15  6.6.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-9.\n\n2011-05-14  6.6.9-9 Cristy  <quetzlzacatenango@image...>\n  * The -scale option now considers the alpha channel when scaling.\n  * Fix transient bug for HSL to RGB and back.\n\n2011-05-12  6.6.9-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed PNG8 reduction to work with an image that reduces to 256 colors\n    plus transparency, by merging the two darkest red colors.\n\n2011-05-04  6.6.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-8.\n\n2011-05-02  6.6.9-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed some cut-and-paste errors in new png.c code that caused PNG8\n    reductions to fail.\n\n2011-05-02  6.6.9-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add various Option Flags, and fix option skip counts for plus forms\n    of simple operators where plus form is the same as minus form.\n    For example the incorrect counts produces a weird error, and possible\n    future segmentation fault in a command like  convert rose: +border show:\n\n2011-04-30  6.6.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-7.\n\n2011-04-30  6.6.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix FX default for interpolation to Bilinear.\n\n2011-04-27  6.6.9-7 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel interpolation for -draw 'image Over' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18612).\n\n2011-04-26  6.6.9-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Write the proper bKGD chunk value in grayscale PNG images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18624).\n\n2011-04-25  6.6.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Inverse method for Sparse Color Interpolation\n\n2011-04-24  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-6.\n\n2011-04-21  6.6.9-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Make filter:blur define a multiplicative adjustment of filter settings\n    rather than a complete override of those settings.\n  * Add Flags to CommandOptions parse table, removing the need for\n    ImageListOptions parsing table.  This is the start of development to\n    produce a \"convert\" replacement that can read options from both command\n    line and from files or pipelines, in \"Do it Immediately\" handling.\n  * Crop Bug Fix. Prevent infinite loop with \"+repage -crop 0x40\"\n\n2011-04-18  6.6.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"date\" to the things that can appear on the -define PNG:exclude-chunk\n    list.  This excludes the IM-generated Date:modify and Date:create\n    properties from PNG output text chunks without excluding the rest of the\n    text chunks.\n  * Added \"-define PNG:preserve-colormap\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18564).\n  * Simplified LosslessReduceDepthOK() function in coders/png.c\n\n2011-04-18  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * Add support for writing RGB FITS images as separate planes.\n\n2011-04-16  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support the HDR 32-bit_rle_xyze format.\n  * Fixed infinite loop for TARGA images with a V2 develop area.\n  * Add signal handler for SIGBUS.\n\n2011-04-15  6.6.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-5.\n\n2011-04-15  6.6.9-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"#define PNG_PTR_NORETURN\" because this macro does not work\n    on all platforms with libpng15, with failure to load png_longjmp() (ref\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18518).\n\n2011-04-14  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Layers Composition Bug Fix, animations attributes of first image not\n    transferred in a single destination, multi-source image composition.\n\n2011-04-09  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add a special 'Voronoi' Morphology Distance method that will fill in holes\n    using the nearest non-transparent edge pixel. It is experimental, and\n    hidden from normal morphology usage, as it may be interfaced with a\n    future hole-filling color 'Diffusion' method.\n\n2011-04-08  6.6.9-5 Cristy  <quetzlzacatenango@image...>\n  * MIFF keywords sometimes includes spaces.\n\n2011-04-07  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Major BUG FIX - wrong sign breaks most morphology methods in IM v6.6.9-4\n  * Fixed -region handling of transparency. Original images without\n    transparency will use 'Over' while images with transparency will\n    preserve transparency using 'Copy'. Before this only 'Over' was used\n    due to the testing of the wrong image.\n  * Added Compose methods  DarkenIntensity and LightenIntensity\n\n2011-04-06  6.6.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-4.\n\n2011-04-03  6.6.9-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add Octagon shape and Octagonal distance kernels for Morphology\n  * Fix minor Morphology kernel compose bug (cleanup after Src/Dst swap)\n  * Fix segmentation fault after error in a morphology 'named' kernel\n  * Added a range of kernels used for specialised thinning purposes\n    as defined in a research paper by Dan S. Bloomberg.\n  * Added Dan Bloomberg best thinning skeleton, \"Skeleton:3\"\n  * Removed origin pixel from many Hit-and-Miss kernels allowing kernels\n    to not only be used for thinning, but also thickening.\n  * Renamed \"ThinDiagonals\" kernel to just \"Diagonals\"\n  * Distance uses a fast two pass algorithm, and no longer needs 'iteration'\n\n2011-04-02  6.6.9-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Make the PNG encoder use depth==8 when incoming image->depth < 8\n    (the encoder later reduces the depth if it can), to avoid writing\n    an incorrect image.\n  * Remove any bogus colormap received by the PNG encoder with an image\n    that is not PseudoClass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18475).\n\n2011-04-02  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * Added -statistic Gradient\n\n2011-04-01  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-3.\n\n2011-04-01  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * Set the caption height correctly for missing row geometry (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18447).\n\n2011-03-31  6.6.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-2.\n\n2011-03-30  6.6.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the png decoder to store the PNG IHDR and other known PNG\n    chunk data as properties, for later retrieval and reporting by \"identify\",\n    so users can easily and reliably discover the color-type, bit-depth, etc\n    that were in the input PNG datastream.\n  * The PNG decoder sometimes set images with more than 256 different\n    gray-alpha pixels to storage_class=PseudoClass with an incorrect colormap.\n\n2011-03-30  6.6.9-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add a \"Resize\" distortion method (distort equivalent of -resize).\n  * Special CLI handling so -distort Resize takes a \"geometry\" argument.\n\n2011-03-29  6.6.9-2 Cristy  <quetzlzacatenango@image...>\n  * Expand PCL compressed pixel buffer to prevent delta compressed overrun.\n\n2011-03-29  6.6.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-1.\n\n2011-03-29  6.6.9-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix AdaptiveResizeImage() to use 'Mesh' Interpolation, and fix its\n    coordinate handling, as originally defined.\n\n2011-03-29  6.6.9-1 Cristy  <quetzlzacatenango@image...>\n  * Support -statistic standard-deviation option.\n  * Patch for coders/dcm.c so it compiled with HDRI enabled.\n\n2011-03-28  6.6.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-0.\n\n2011-03-28  6.6.9-0 Cristy  <quetzlzacatenango@image...>\n  * Optimize bilinear interpolation.\n  * Remove version from etc folder and instead use /etc/ImageMagick.\n\n2011-03-28  6.6.9-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Separated complex cropping function from TransformImage() as a new\n    function CropImageToTiles().  This new function returns either the\n    new cropped image, or a list of tiles, according to geometry, without\n    replacing the source image. The Source image may be part of a larger list\n    of images, without the function 'losing' the other images of the list.\n\n2011-03-27  6.6.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-10.\n\n2011-03-27  6.6.8-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Modified image handling in MogrifyImages() and MogrifyImage()\n    which improves overall handling, and allows correct %p, %n and the\n    %[fx:..] 't' and 'n' escape usage to work correctly.\n  * Added -duplicate as a multi-image sequence operator\n\n2011-03-26  6.6.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-9.\n\n2011-03-25  6.6.8-9 Cristy  <quetzlzacatenango@image...>\n  * Add InterpolateMagickPixelPacket() method.\n  * Add support for the %[opaque] property.\n\n2011-03-25  6.6.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-8.\n\n2011-03-25  6.6.8-8 Cristy  <quetzlzacatenango@image...>\n  * Fix memory access bug in CloneString() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=18382).\n  * Avoid infinite loop when no space is available in MagickFormatCaption().\n\n2011-03-25  6.6.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed the fix for %p and %n escapes, as it was not working right\n\n2011-03-24  6.6.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-7.\n\n2011-03-24  6.6.8-7 Cristy  <quetzlzacatenango@image...>\n  * Add support for 16-bit DCM short ints (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18371).\n\n2011-03-23 6.6.8-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Another fix for -sparse-color and unused color channels\n  * Finalize the -duplicate option created by Cristy\n  * Fix of segmentation fault for second image in %[fx:..] during info:\n    (Bug in AcquireFxInfo(), as given start image is not first image)\n\n2011-03-21  6.6.8-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the PNG8 encoder to use 50% threshold instead of 0% when\n    reducing transparency to binary.  Collapse all resulting fully transparent\n    colors into one (the background color), to reduce the compressed filesize.\n  * First try the 4-4-4-1 and 3-3-3-1 palettes instead of 3-3-2-1, to preserve\n    colors (especially gray) better, when reducing to PNG8.\n  * Force the PNG encoder to return image->matte==MagickTrue when the\n    format is RGBA or GA or if the tRNS chunk is present, even when the\n    image is fully opaque (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18349).\n\n2011-03-21  6.6.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-6.\n\n2011-03-21  6.6.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Re-enabled reduction of grayscale images (color-type 0) to 2 or 4 bits\n    when appropriate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18098).\n  * The \"-define PNG:color-type=4\" option did not always force the PNG\n    encoder to write an all-opaque alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18349).\n\n2011-03-14  6.6.8-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed memory leak for PDF and Bitmap PSD RLE support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18317).\n  * Support the -statistic option: replace each pixel with corresponding\n    statistic from the neighborhood.\n  * Add support for -duplicate option.\n  * Move configuration files from /usr/share and /usr/lib to /etc and /var.\n  * Do not cache the results of fx: otherwise -format\n    '%[fx:rand()] %[fx:rand()]' returns the same random numbers.\n\n2011-03-18 6.6.8-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced Minus and Divide Composition methods with Dst and Src\n    equivalents. Now users can decide how these non-commutative mathematical\n    operators are applied to the images being composited.\n  * Fix the percent escape values for  %p, %n  and  %[fx:t], %[fx:n] to\n    respectively mean the current images index and the total number of\n    images within the current image sequence.\n\n2011-03-17 6.6.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Backed out the patch for Variable Blur Composition that was added\n    2011-02-13 v6.6.7-7, until I can re-think the problem.\n    The existing fix was failing to do circular blurs correctly.\n\n2011-03-14  6.6.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed a rounding/truncation error while writing the pHYs chunk in the\n    png encoder.\n  * Don't write text-encoded profile when \"-define PNG:exclude-chunk=text,ztxt\"\n    is present (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17086 and\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18225).\n\n2011-03-14  6.6.8-5 Cristy  <quetzlzacatenango@image...>\n  * Add support for the WebP image format.\n\n2011-03-14  6.6.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Ensured that -sparse-color preserves unused channels when\n    channel limited.  Before this unused channels would be reset to black.\n\n2011-03-11  6.6.8-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't try to store a bKGD chunk in a PNG8 when there are already\n    256 colors in the palette and the background colors is not in that\n    palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18199);\n  * The \"-define PNG:exclude-chunk=bKGD\" option was also excluding\n    the text chunks. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18253).\n\n2011-03-10  6.6.8-4 Cristy  <quetzlzacatenango@image...>\n  * Fx is a mathematical function.  Do not treat transparency as black.\n  * No image scene suffix for filenames that include a single bracket (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18267).\n\n2011-03-10  6.6.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-3.\n\n2011-03-10  6.6.8-3 Cristy  <quetzlzacatenango@image...>\n  * Boost causes an ambiguity with ssize_t when building PythonMagick.  Add\n    patch from Arfrever@gento... to fix the build exception.\n\n2011-03-09  6.6.8-2 Cristy  <quetzlzacatenango@image...>\n  * Support the Radiance HDR image format.\n  * Update the offset in the black channel when sharpening to avoid incorrect\n    results.\n  * Do not use GenericReadMethod for TIFF images with 64-bits per sample.\n\n2011-03-06  6.6.8-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Throw error message when the requested color-type or bit-depth\n    cannot be written by the PNG encoder (error was being thrown\n    into the wrong image structure).  (Reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n  * Don't write a PNG text chunk with \"density\" keyword that overrides the\n    PNG pHYs chunk, if the pHYs chunk was not excluded (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18253).\n  * Ignore any PNG text chunk with a \"density\" keyword found by the PNG\n    decoder, if the PNG datastream also contains a pHYs chunk.\n\n2011-03-06  6.6.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-1.\n\n2011-03-05  6.6.8-1 Cristy  <quetzlzacatenango@image...>\n  * Support PSD files with one layer and one composite layer.\n  * We must cast a Quantum type when bit shifting and HDRI is enabled.\n\n2011-03-05  6.6.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-0.\n\n2011-02-27  6.6.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -mode option.\n\n2011-02-27  6.6.8-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix scaling of new color-reduction method in the PNG encoder (16-bit\n    images were scaled down to 0 or 1, or nearly black).\n  * Delay opening the PNG output blob until the PNG encoder is ready\n    to write the IHDR chunk, to avoid writing zero-length PNG files when\n    errors are found while building the palette.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n\n2011-02-25  6.6.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-10.\n\n2011-02-23  6.6.7-10 Cristy  <quetzlzacatenango@image...>\n  * Avoid seg fault in AppendImages() when one image is in the RGB colorspace\n    but the other is in the CMYK colorspace.\n  * Get rid of 'respect_parenthesis defined but not used' warnings (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=18173).\n\n2011-02-22  6.6.7-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Write sub-8-bit grayscale PNG images as palette-indexed PNG images.  This\n    usually makes smaller files anyhow.\n  * Eliminated a number of redundant tests for gray images in the PNG encoder.\n  * Removed now-unused IsMonochromeImage() function from coders/png.c\n  * Scan the colormap instead of all of the pixels, when possible, to\n    determine whether the image received by the PNG encoder is grayscale\n    or black-and-white.\n  * Avoid reading from the colormap in coders/png.c when it is NULL (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n  * Add a check whether the PNG \"cheap transparency\" criteria are met.  That\n    is, there is a single transparent color, no semitransparent colors, and\n    no opaque color that has the same RGB components as the transparent\n    color.  If those aren't met, a color that is transparent in one pixel\n    and opaque in another would always be rendered as transparent, so we\n    must write a PNG colortype that has an alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18167).\n\n2011-02-22  6.6.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-9.\n\n2011-02-22  6.6.7-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Disabled reduction of grayscale images (color-type 0) to less than 8 bits\n    when writing because this sometimes produced incorrect output (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18098).\n\n2011-02-21  6.6.7-9 Cristy  <quetzlzacatenango@image...>\n  * Check image has properties before accessing the splay tree (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18136).\n\n2011-02-15  6.6.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-8.\n\n2011-02-14  6.6.7-8 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder should ignore bogus q->opacity values when image->matte\n    is MagickFalse (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18067).\n\n2011-02-14  6.6.7-8 Cristy  <quetzlzacatenango@image...>\n  * Use implicit image format when explicit format is bogus (e.g.\n    02.13.11-18:43:58.png now writes as PNG).\n  * Fix problem with 4GB file seeks on a 32-bit OS.\n\n2011-02-13  6.6.7-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed Variable blur to handle small (< 1.0 sigma) blurs generated\n    by the blur map being used, rather than just 'cutoff' suddenly.\n\n2011-02-08  6.6.7-7 Cristy  <quetzlzacatenango@image...>\n  * Support 16-bit per pixel YUV image files.\n  * Fix off-by-one error in PosterizeImage().\n  * Posterize now distributes color uniformly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17623).\n  * Add -smush option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17953).\n  * Repair memory leak in the display program.\n\n2011-02-07  6.6.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix bug in carg() define when HAVE_COMPLEX is not defined (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18030).\n\n2011-02-06  6.6.7-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Default sigma for Gauusian resize filter is now 1/2 for both\n    orthogonal resize and cylindrical EWA distortions.\n\n2011-02-02  6.6.7-5 Cristy  <quetzlzacatenango@image...>\n  * Check if the font is null in RenderFreetype() to prevent fault (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17890).\n  * Eliminate fault when reading WMF image files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=17971).\n  * Support multi-page transparent Postscript and PDF image files.\n  * The compare fuzz metric now returns the same correct value for\n    'xc:white xc:blue -alpha off' and 'xc:white xc:blue -alpha on'.\n\n2011-01-29  6.6.7-4 Paul Heckbert  <ph@cs.cm...>\n  * Move coders/tiff.c conditional compile to define TIFF exception /\n    semaphore / key when TIFF delegate is disabled.\n\n2011-01-29  6.6.7-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Renamed variables, macros, and functions defined/declared in coders/png.c\n    that were in the libpng namespace (beginning with \"png_\" or \"PNG_\").\n\n2011-01-25  6.6.7-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed a call to GetNumberColors() from the PNG encoder that was\n    only there for debugging purposes and was consuming a huge amount\n    of CPU time. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=17799).\n  * Sometimes black was still written as transparent, when the PNG\n    encoder received an image with image->matte==true but no transparent\n    pixels were present. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17913);\n\n2011-01-24  6.6.7-3 Cristy  <quetzlzacatenango@image...>\n  * Remove memory leak from ThrowFileException() macro (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17908).\n  * Multiple blue error count by 'count' in ClassifyImageColors()\n  * Add support for the AAI image format.\n\n2011-01-22  6.6.7-2 Cristy  <quetzlzacatenango@image...>\n  * Accept quoted file paths in indirect file references (e.g. @myFiles.txt).\n\n2011-01-19  6.6.7-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the PNG encoder's \"transparent_color\" from a UShortPixelPacket\n    to LongPixelPacket and made the default (65537,65537,65537), which\n    can never occur in the PNG image data.  Previously the default was\n    (0,0,0) and black pixels would be rendered as as transparent when\n    no tRNS chunk was present in the input, which has caused problems\n    with some test cases since version 6.6.6-10.\n  * Improved the PNG_BUILD_PALETTE section to count opaque, transparent,\n    and semitransparent pixels separately.  Previously it wasn't always\n    possible to determine if there was a single fully-transparent color,\n    to decide whether to write an RGBA or Gray-Alpha image or an RGB or\n    Gray image with a tRNS chunk.\n\n2011-01-15  6.6.7-1 Cristy  <quetzlzacatenango@image...>\n  * Do not reset image next / previous when detach argument is false for\n    CloneImage().\n  * Inline cropping no longer fails for inline raw images (e.g.\n    -size 640x480 -depth 8 'gray:logo[100x100+200+200]').\n\n2011-01-14  6.6.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't let the PNG encoder try to sort the colormap when there are more\n    than 256 colors in the image. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17834).\n\n2011-01-10  6.6.7-1 Cristy  <quetzlzacatenango@image...>\n  * Accept escaped % in output filename (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17810).\n\n2011-01-08  6.6.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Quieted some inconsequential warnings in the PNG codec due to a\n    change in the type of the PNG iCCP profile from png_charp to png_bytep\n    in libpng-1.5.0.\n\n2011-01-03  6.6.7-0 Cristy  <quetzlzacatenango@image...>\n  * Handle negative heights for ICO images.\n\n2011-01-02  6.6.7-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Recent changes sometimes caused the PNG encoder to select colortype=2\n    (Truecolor) instead of 0 (Grayscale) for grayscale images.  This made\n    the filesize larger than necessary and caused some of the PerlMagick\n    tests to fail.\n\n2011-01-01  6.6.6-10 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG decoder now checks whether the image actually has any transparency\n    when the input file contains an alpha channel or a tRNS chunk.  (Reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17748)\n\n2010-12-26  6.6.6-8 Cristy  <quetzlzacatenango@image...>\n  * -posterize fails with more than 40 levels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17741).\n  * Add support for the MacPaint image format.\n  * Eliminate spurious 'invalid colormap index' exception for 16-bit SGI images\n    (bug report by steven.sittser@fligh...).\n  * Fix user data length for the CIN image format.\n\n2010-12-21  6.6.6-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Use a clone instead of the main image in coders/png.c, so the image\n    can still be used later on without being affected by changes made by\n    the PNG encoder.\n  * Added PNG:exclude-chunk and PNG:include-chunk defines.\n  * Revised the -strip option so it behaves as though\n    \"-define PNG:include-chunk=none,gama\" had appeared on the commandline.\n  * Avoid writing PNG ancillary chunks in the PNG/MNG/JNG encoder while\n    generating the alpha channel for a JNG image.\n\n2010-12-21  6.6.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed the forced interpolation setting in AcquireResampleFilterThreadSet\n    It prevented user defined interpolation settings for -clut, and possibly\n    other usage.\n\n2010-12-17  6.6.6-6 Chris Madison  <madisonblu@gmail...>\n  * Add LZMA compression support to ImageMagick.\n  * Eliminate seg-fault in MvgPrintf().\n\n2010-12-17  6.6.6-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated a redundant quantization step in the PNG encoder.\n  * Untangled a confusing but apparently harmless improper loop nesting\n    in the PNG encoder.\n  * Eliminated redundant \"IsGray()\" tests from the PNG encoder.\n\n2010-12-14  6.6.6-6 Cristy  <quetzlzacatenango@image...>\n  * -format \"%[fx:u.p{5,5}]\" no longer reports parse exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17678).\n\n2010-12-10  6.6.6-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Make the PNG encoder always rebuild the palette, to avoid losing\n    transparency when it is out of sync with the pixel data (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17655).\n  * Eliminated CompressColormapTransFirst() since the palette is already\n    compressed and sorted by opacity now when it's recreated.\n\n2010-12-10  6.6.6-5 Cristy  <quetzlzacatenango@image...>\n  * Account for virtual canvas for the -flip / -flop options (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17626).\n  * Also for -transpose and transverse options\n  * Support -metric fuzz option.\n\n2010-12-09  6.6.6-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replace IsMagickColorSimilar() which provides the Fuzz Factor threshold\n    function.  Note function does not calculate 'distance' in total but\n    short-circuits when threshold is reached for faster processing.\n  * Ordered Dithered handling of Alpha channel was incorrect - fixing\n    Bug was introduced v6.6.5-6\n\n2010-12-03  6.6.6-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed two more cases where the PNG encoder lost transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17516).\n\n2010-12-01  6.6.6-2 Cristy  <quetzlzacatenango@image...>\n  * Affine multiplication reversed when translating (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17570).\n\n2010-11-26  6.6.6-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the \"c7x7b\" and \"c7x7w\" ordered-dither maps to be complementary\n    to each other.\n\n2010-11-27  6.6.6-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for -evaluate-sequence median.\n\n2010-11-26  6.6.6-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed two more cases where the PNG encoder lost transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17516).\n\n2010-11-23  6.6.6-0 Cristy  <quetzlzacatenango@image...>\n  * The policy.xml sets not-to-exceed resource values (e.g. policy memory limit\n    1GB, -limit 2GB exceeds policy maximum so memory limit is 1GB).\n  * Support NCC (normalized cross correlation) compare metric.\n\n2010-11-21  6.6.5-10 Cristy  <quetzlzacatenango@image...>\n  * Fix PNG coder compile error when HDRI is enabled.\n\n2010-11-17  6.6.5-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Many of the problems with the PNG encoder have been fixed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16490).\n  * The \"-type Optimize\" option is now deprecated.  If present, it is treated\n    by the PNG encoder the same as if the type were undefined.  Optimization\n    is now always performed.  No other formats used the \"type Optimize\" option.\n  * Merged redundant code into LosslessReduceDepth() function in the PNG codec.\n\n2010-11-14  6.6.5-9 Cristy  <quetzlzacatenango@image...>\n  * The splice option no longer throws spurious \"pixels are not authentic\"\n    exceptions.\n  * Thread the -adaptive-resize option.\n  * Set XBM coder height to height not width.\n\n2010-11-14  6.6.5-9 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Lanczos2Sharp blur tweaked. New blur = 0.9549963639785485.\n\n2010-11-13  6.6.5-9 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * LanczosSharp blur tweaked to minimize worst case deviation from \"perfect\n    preservation of images which only vary horizontally (or vertically)\" under\n    no-op. New blur = 0.9812505644269356.\n\n2010-11-08  6.6.5-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Missing logical operator in tiff.c.\n\n2010-11-08  6.6.5-8 Cristy  <quetzlzacatenango@image...>\n  * Only save TIFF image with 1-bit depth if there is no alpha channel.\n  * Abandon PSD composite if layer is available.\n  * %[fx:mean] is the mean of the default channels (all but opacity) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17432).\n\n2010-10-29  6.6.5-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Added 5x5, 6x6, and 7x7 ordered-dither level maps.\n\n2010-10-30  6.6.5-5 Cristy  <quetzlzacatenango@image...>\n  * Do not read configure files in the current directory for the \"installed\"\n    version of ImageMagick.\n  * Allow numeric characters in the XPM basename (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17385).\n\n2010-10-29  6.6.5-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised PNG palette optimization\n  * Added some debug logging in coders/png.c.\n\n2010-10-28  6.6.5-3 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * More precise blur values for Lanczos2Sharp and LanczosSharp.\n  * Added location of first Mitchell crossing (=8/7) to the filters data\n    structure.\n\n2010-10-28  6.6.5-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Lanczos2D* filters now named Lanczos2*\n  * Reorganization of AcquireFilter() to make it work better\n\n2010-10-25  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Clearer EWA filters (LanczosSharp etc) comments.\n\n2010-10-25  6.6.5-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added LanczosSharp  (3-lobe Lanczos with sharpening)\n  * Filter sharpening factors are also always applied regardless of usage.\n\n2010-10-24  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * CubicBC filter formulas simplified by constant folding. In\n    particular, P1 coefficient (always zero) removed from coeff.\n\n2010-10-22  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Revert the Robidoux filter to a Keys cubic with C=(108 sqrt 2-29)/398\n    (as already specified in the documentation).\n\n2010-10-14  6.6.5-1 Cristy  <quetzlzacatenango@image...>\n  * Ignore PS bounding box offsets if -page is set.\n  * Use #pragma omp master for dumping single threaded debugging information\n    (single caused a fault).\n  * Add support for -evaluate exp.\n\n2010-10-12  6.6.5-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added \"filter:sigma\" expert setting defining the 'sigma' for the Gaussian\n    filter only.  This is similar in action to 'blur' but only for Gaussians,\n    and does not modify the filters support, allowing you to set a very small\n    sigma, without the function 'missing' all pixels.\n    (This will allow future adjustment of Gaussians for variable blur mapping)\n\n2010-10-10  6.6.5-0 Cristy  <quetzlzacatenango@image...>\n  * Patch for  DrawableRotation() and DrawableTranslation() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17246).\n  * The webp format requires the webpconv delegate program (experimental).\n\n2010-10-05  6.6.5-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced \"Robidoux\" with Cubic 'Keys' filter that is near equivalent to\n    the previous sharped \"Lanczos2D\" filter. (C=0.31089212245300069)\n    This also is very similar to a Mitchell filter but specifically designed\n    for EWA use and is the new default filter for Distorting Images.\n  * Original sharpened Lanczos2D filter now called \"Lanczos2Dsharp\"\n\n2010-10-08  6.6.4-10 Jerry Gay  <jerry.gay@gmail..>\n  * Autodetect file type support in Makefile.PL to prevent test failures\n\n2010-10-05  6.6.4-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added new filter 'Lanczos2D' a 2-lobe Lanczos as defined by\n    Andreas Gustafsson in his thesis  \"Interactive Image Warping\" (page 24)\n         http://www.gson.org/thesis/warping-thesis.pdf\n  * Added filter \"Robidoux\" which is a slightly sharpened version of the\n    \"Lanczos2D\" filter (blur=0.958033808) specifically designed to be less\n    'blurry' for horizontal and vertical lines in no-op distortions.\n\n2010-10-05  6.6.4-10 Cristy  <quetzlzacatenango@image...>\n  * Add support for \"pattern:vertical2\" and \"pattern:horizontal2\".\n  * Add support for \"pattern:vertical3\" and \"pattern:horizontal3\".\n  * Properly handle PSD layers with negative offsets.\n\n2010-10-03  6.6.4-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory assertion with --enable-embeddable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17201).\n  * Don't permit access to pixels when pinging an image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17194).\n\n2010-10-02  6.6.4-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added sqrt(2) blurring default for Gaussian Filter if used as\n    a Cylindrical EWA filter.  This resulted removing the last aliasing\n    issue that was present in tests for Gaussian EWA resampling. Of course\n    it is still a very blurry filter for default use in EWA.\n  * Adjusted Variable Mapping Blur Composition so user arguments actual\n    relate properly to the sigma of the blur for a maximum mapping value.\n  * Fix horizon anti-aliasing for output-scaled perspective distortions.\n  * 'Bessel' filter is now officially and more accurately named 'Jinc'\n    however 'Bessel' while not visible as a filter option can still be used\n    as an internal alias for 'Jinc'.\n\n2010-09-28  6.6.4-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Chantal Racette double checked the bounding parallelogram computation\n    in resample.c (and I tightened the comments).\n\n2010-09-28  6.6.4-8 Cristy  <quetzlzacatenango@image...>\n  * Temporary files not always deleted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15960).\n\n2010-09-28  6.6.4-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug fix for -filter point distorts (occasional generating black pixels)\n\n2010-09-27  6.6.4-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Simplified the ClampUpAxes code, the use of its outputs, its comments,\n    and credited Craig DeForest for the \"clamp singular values\" idea.\n  * No reason to have \"insane\" precision Sinc in resize.c: Use\n    the 1.2e-12 max. abs. relative error version for Q64 as well as Q32.\n\n2010-09-27  6.6.4-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replace the blurry \"High Quality EWA\" technique with a 'Clamped EWA'\n    for Distort Resampling.  This makes -distort a whole lot nicer\n    and allows for the use of better cylindrical filters.\n\n2010-09-26  6.6.4-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix Point filter for ResizeImage() caused by support limiting the\n    Box weighting function.\n\n2010-09-26  6.6.4-6 Cristy  <quetzlzacatenango@image...>\n  * Don't allow resize filter weights to go to zero (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17132).\n\n2010-09-24  6.6.4-6 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Now that MagickPIL is a MagickRealType, some casts are unneeded.\n\n2010-09-21  6.6.4-6 Cristy  <quetzlzacatenango@image...>\n  * Do not break words if caption size is absolute (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17123).\n  * Don't define HAVE_THREADS for --without-threads configure script option.\n\n2010-09-20  6.6.4-5 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Modified \"magick/resize.c\" so that MagickPIL is a MagickRealType number.\n    Some computations were needlessly done in long double precision because\n    PIL forced an automatic upcast wherever it appeared. Changed its name to\n    MagickREALTYPEPI. <- This was later reverted back to MagickPIL.\n  * Modified \"magick/resize.c\" so that Bohman uses one trig call + one sqrt\n    call instead of two trig calls.\n\n2010-09-20  6.6.4-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * modified \"magick/resample.c\" to allow use of either EWA or HQEWA (default)\n  * Removed LanczosFast from supported filters (SincFast*SincFast is faster)\n\n2010-09-19  6.6.4-5 Cristy  <quetzlzacatenango@image...>\n  * If IPTC profile is not embedded in an 8bim resource, declare it IPTC\n    rather than 8BIM.\n  * Support %[version] and %[copyright].\n  * Improve performance of the pixel cache.\n\n2010-09-18  6.6.4-4 Cristy  <quetzlzacatenango@image...>\n  * Automatically set the quantum depth to 16 for HDRI.\n\n2010-09-16  6.6.4-2 Cristy  <quetzlzacatenango@image...>\n  * IPTC profile not always wrapped properly inside an 8BIM profile.\n  * TIFF tile geometry must be divisible by 16.\n\n2010-09-15  6.6.4-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename of SincPolynomial to SincFast for easier user understanding\n  * Ditto for LanczosChebyshev to LanzcosFast\n\n2010-09-14  6.6.4-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Switch default resize filters to using the faster SincPolynomial\n    filter by default internally.  However 'Sinc' will still use the\n    Trigonometric function, and can be used to assign the trig version\n    of Sinc() to filters using the filter expert options.\n  * The default filter for 'distort' was found to be a very blurry inaccurate\n    filter function.  It was removed and replaced with a correct Gaussian\n    filter (as used by resize)\n  * Added a switch so that \"-interpolate filter\" will force the use of\n    a cylindrical filter for ALL pixels in distorted images.  That is you can\n    use that switch to use a cylindrical filter even for images that are\n    being enlarged by the distortion.  However EWA is still currently using\n    a fixed 2.0 sampling radius.  This switch complements the use of \"-filter\n    point\" which turns off EWA filters in favor of interpolation for all\n    pixels in a distorted image.  BOTH switches should not be used together.\n  * A bug in the support radius of the EWA resampling function was found,\n    now that correctly defined resize filters are being used. Suddenly Normal\n    Gaussian distortions are not so blurry, and tests with distortions of\n    the 'Rings' image show extremely good and clear results, with only minimal\n    blurring.  The filter 'blur' expert option can be used to adjust this\n    further.\n\n    The above represents a major improvement forward in the quality of the\n    image distortion operator. But near-unity distortions (no scaling) are\n    still overly blurry.\n\n2010-09-13  6.6.4-2 Cristy  <quetzlzacatenango@image...>\n  * Don't negate the geometry offset for the -extent option.\n\n2010-09-09  6.6.4-1 Cristy  <quetzlzacatenango@image...>\n  * The RGBO format is now listed as a supported format.\n\n2010-09-07  6.6.4-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added the Nicolas Robidoux and Chantal Racette  Lanczos resize filter\n    function as \"LanczosChebyshev\" as faster alternative to Lanczos.\n  * Re-code Nicolas Robidoux and Chantal Racette Polynomial Approximation of\n    the Sinc Trigonometric resize filter, as a proper filter to allow\n    direct comparison and speed testing of the filter.\n  * Expanded the \"-set option:filter:verbose 1\" output, so as to also include\n    the actual functions and other values that were used to create the filter.\n\n2010-09-02  6.6.4-0 el_supremo  <digipete@shaw...>\n  * Repair a few incorrect LocaleNCompare() calls (ttf.c, ps.c).\n\n2010-08-31  6.6.4-0 Cristy  <quetzlzacatenango@image...>\n  * Path no longer closed if join style is round (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16943).\n  * Add case for BGRQuantum to GetQuantumExtent().\n  * Support no compression on PCX write.\n\n2010-08-23  6.6.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed bug in the raw BGRA coders (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16880).\n  * Fix off-by-one error in the PSD coders.\n  * Nicolas Robidoux with the assistance of Chantal Racette contribute an\n    approximation of the sinc function over the interval [-3,3].\n  * Eliminate a small memory leak in LevelizeImageChannel() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16951).\n  * Recognize -fx logtwo (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16958).\n\n2010-08-15  6.6.3-7 Cristy  <quetzlzacatenango@image...>\n  * Throw exception if image size differs for the compare program but the\n    -subimage-search option is not specified.\n\n2010-08-13  6.6.3-6 Cristy  <quetzlzacatenango@image...>\n  * The AdobeRgb.tif TIFF image no longer faults under Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16838).\n  * Add -subimage-search option to the compare utility.\n\n2010-08-12  6.6.3-5 Cristy  <quetzlzacatenango@image...>\n  * The -fx 2e+6/1e+5 argument no longer returns the wrong results (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16833).\n\n2010-08-10  6.6.3-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Emit a warning if the PNG encoder can't satisfy the color type and\n    bit depth requested with a \"-define\" directive.\n\n2010-08-07  6.6.3-4 Cristy  <quetzlzacatenango@image...>\n  * The orient option sometimes improperly set \"undefined\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16795).\n  * Only list orientation options for the -list orientation option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16801).\n  * Return proper standard deviation for combined channels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16786).\n  * Handle transparency properly for the PSD image format.\n\n2010-08-05  6.6.3-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Properly map PNG intent to image->rendering_intent\n\n2010-08-01  6.6.3-3 Cristy  <quetzlzacatenango@image...>\n  * Eliminate bogus \"invalid colormap index\" when pinging ICO images.\n  * Support -set density / units.\n\n2010-07-31  6.6.3-2 Cristy  <quetzlzacatenango@image...>\n  * Only use the first alpha channel in PSD image.\n  * Only use XPM complying colors for XPM images (e.g. green is rgb(0,255,0)).\n\n2010-07-27  6.6.3-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminate useless message about assuming zero delay when writing\n    a single-frame MNG, and changed it from Error to Warning when\n    writing a multiple-frame MNG.\n\n2010-07-25  6.6.3-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't \"ping\" a PNG image if it is embedded in a MNG.  Otherwise the\n    reader tries to read MNG chunks from the interior of the embedded PNG,\n    resulting in an erroneous \"corrupted image\" message.\n\n2010-07-09  6.6.3-1 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in for corrupt BMP images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16600).\n  * Repair several issues when writing to stdout (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16620).\n  * A GIF image with the .bgr extension is still a GIF (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16662).\n\n2010-07-07  6.6.3-1 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG decoder failed to handle the tRNS chunk properly for grayscale\n    images where the PNG bit_depth was not the same as the quantum depth,\n    and the transparent color was not black.\n\n2010-07-01  6.6.3-0 Chris Madison  <madisonblu@gmail...>\n  * Pinging the DJVU image format no longer faults.\n  * Check for time-limit-exceeded in only one thread.\n  * Reading filenames from a file (e.g. @filenames) no longer includes the\n    utility name (side effect of StringToArgv() method).\n\n2010-06-28  6.6.2-10 Cristy  <quetzlzacatenango@image...>\n  * Support the tiff:fill-order define.\n  * Filters are case sensitive (e.g. reduce-Colors).\n  * Restore mogrify's -path option.\n  * The -list module option lists image coders and image filters.\n\n2010-06-27  6.6.2-9 Cristy  <quetzlzacatenango@image...>\n  * Add the ImageView API.\n  * Fix DJVU coder to read one page (e.g. 'image.djvu[2]').\n  * Support -define png:bit-depth=1 -define png:color-type=3 for PNG format.\n\n2010-06-22  6.6.2-8 Cristy  <quetzlzacatenango@image...>\n  * Skip byte when DDS bitcount is 32 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16487).\n  * Montage now uses final background setting (e.g. montage -background none ...\n    -background lightblue show:).\n  * Do not annotate directory paths in ListFiles().\n  * Reset the image matte for png:color-type=2.\n\n2010-06-17  6.6.2-7 Cristy  <quetzlzacatenango@image...>\n  * Support new label:pointsize property.\n  * Miscellany->Slide Show, in the display program, now cycles through the\n    image sequence.\n  * Recognize certain hex color values (e.g. #b9e1cc00) for the -fx argument.\n  * Reduce memory requirements when dithering on the iPhone.\n  * Command line operators no longer affected by settings that appear after\n    them (e.g. -splice 10x0+0+0 -gravity center).\n  * Compute the proper DPX user data field size.\n\n2010-06-15  6.6.2-6 Cristy  <quetzlzacatenango@image...>\n  * Fix some nits to keep the clang compiler happy.\n\n2010-06-14  6.6.2-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix transprancy handling for Morphology Convolve\n  * Adjustments of Hit And Miss and Edge Detection kernel definitions\n  * Added 'ThinDiagonals' Thinning Kernel + two sub-types\n  * Handling for Convolution of 1-D vertical kernels.\n    However this was removed (using #if-#endif) as I found it slower in tests!\n\n2010-06-12  6.6.2-5 Cristy  <quetzlzacatenango@image...>\n  * mogrify -format properly handles compressed image filename (e.g.\n    -format jpg logo.png.bz2).\n  * Respect +dither option when saving to the GIF image format.\n\n2010-06-08  6.6.2-4 Cristy  <quetzlzacatenango@image...>\n  * End of string sentinel is \\n not \\r.\n\n2010-06-06  6.6.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't decode pixels in coders/png.c when image->ping is set.\n\n2010-06-06  6.6.2-3 Cristy  <quetzlzacatenango@image...>\n  * Reset image filename when reading inline images.\n  * Don't clamp floating point values for HDRI-enabled ImageMagick.\n\n2010-05-25  6.6.2-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced '^' morphology kernel rotation with two variants '>' and '<'\n  * 'Skeleton' variant to thin down images as symmetrically as possible.\n  * Spelling correction:  Manhatten -> Manhattan\n\n2010-06-01  6.6.2-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Properly scale color components of the PNG bKGD chunk.\n  * Prevent MNG divide by zero in calculation of frame_timeout.  Set\n    both frame_delay and frame_timeout to infinite when ticks_per_second\n    is zero, as required by the MNG spec.\n\n2010-05-31  6.6.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add x:silent option to prevent beeps when reading the X image format.\n  * Recognize TTF for GetMagicInfo().\n  * Ensure the +set option deletes the image artifact.\n\n2010-05-28  6.6.2-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Prevent coders/png.c from attempting to write an empty tRNS chunk.\n\n2010-05-25  6.6.2-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix for Square Array Rotates (off center origin rotate)\n  * Added HitAndMiss kernel Ridges2 to find 2 pixel thick ridges\n  * Added FreiChen:0,{angle}  FreiChen:{angle} and FreiChen:-1 variations\n    to complete this kernels definition\n\n2010-05-24  6.6.2-1 Cristy  <quetzlzacatenango@image...>\n  * Respect density when rendering SVG images.\n  * Set AVI handler to the MPEG coder.\n  * Compute the proper DPX user data field size.\n  * Do not interpret a format specifier when enclosed in brackets (e.g.\n    rose_tile_%[filename:tile].gif.\n  * Use 64-bit types when compiling with the 64-bit Visual C++ compiler under\n    Windows.\n  * Prevent MNG divide by zero in calculation of frame_delay (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16320).\n\n2010-05-23  6.6.2-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Third Re-write of MorphologyApply() to better handle compound methods.\n  * Implemented  -set option:morphology:compose for merging results of\n    multiple kernels. \"None\" means re-iterate results with next kernel.\n    While \"Undefined\" means to use the internal default for a method.\n    Thinning, Thickening, HitAndMiss, Convolve, Correlate defaults to \"None\"\n    while HitAndMiss defaults to \"Lighten\" (union of all kernel results).\n    Other morphology methods defaults still to be decided.\n  * Added HitAndMiss Kernel: Ridges  (find ridges and pixel width lines)\n  * Rotation Expansion of single kernels '^' and '@' flags in arguments\n    EG: -set option:showkernel 1 -morphology Convolve 'Blur:0x2^'\n  * ExpandKernelInfo() (rotation expand) now groks symmetrical kernels.\n    So the above will only produce a list of 2 kernels, not 4 kernels\n\n2010-05-18  6.6.2-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Separation of internal function MorphologyApply() from\n    MorphologyImageChannel() to calls to convolve without user settings.\n  * Rewrite of MorphologyApply() to output better 'verbose' messages\n  * Better handling of Gaussian tyle filters (bug fixes)\n  * Bug fix and optimization of kernel size calculations in \"gem.c\"\n  * Allow '^' or '@' flags in 'user defined' kernel size arguments to\n    expand kernel into a rotated list.\n    EG: -set option:showkernel 1 -morphology Thinning  '3@: 0,1,0 0,1,0 0,0,0'\n  * Allow a scaled unity kernel to be added to kernel (EdgeDet->Sharpen)\n    EG: -set option:convolve:scale [kernel_scale][^!],[unity_scale][%]\n  * Addition of \"Laplacian of Gaussian\" (LOG), also known as Mexican Hat\n    EG: -morphology convolve LOG:0x1\n  * Added FreiChen, Kirsch  Convolution kernels\n  * Added Discrete 'Laplacian of Gaussian' kernels (Laplacian type 15 and 19)\n  * Added Edges HitAndMiss Kernel\n\n2010-05-17  6.6.2-0 Cristy  <quetzlzacatenango@image...>\n  * PSD images require a proper layer to support an alpha channel.\n  * Enable PFM endian support.\n  * Add context to -border for montage.  Inside the parenthesis it adds a border\n    to the image otherwise it sets the border for the layout manager.\n  * 24-bit BMP images are not colormapped even if header colors != 0.\n  * Set DPX user data like this: -set profile dpx:userdata.txt.\n  * Make sure Lab => RGB => Lab survives the round trip.\n\n2010-05-15  6.6.1-10 Cristy  <quetzlzacatenango@image...>\n  * Use ScaleCharToQuantum() in coders/src.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16229).\n  * Don't clamp HDRI EXR pixels.\n\n2010-05-14  6.6.1-9 Cristy  <quetzlzacatenango@image...>\n  * Increase the estimated # points for the path drawing primitive.\n  * Remove any prior resolution block from PSD before writing the new block.\n\n2010-05-14  6.6.1-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Addition of more Morphological/Convolution Kernels.\n    DOG (Difference of Gaussians) and DOB (Difference of Blurs),\n    EG:    -morphology convolve DOG:0x1,3\n           -morphology convolve DOB:0x1,3,90\n  * Added Prewitt, Roberts, Compass  Convolution Kernels\n  * Ring Symbol Kernel (subtraction of Disk from a Disk)\n\n2010-05-13  6.6.1-9 Cristy  <quetzlzacatenango@image...>\n  * The pixel buffer was underallocated for some image formats when streaming.\n\n2010-05-12  6.6.1-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Implementation of Pattern Matching Morphology methods\n    HitAndMiss, Thicken, Thinning\n  * Reporting of Kernel Strings that fail to parse (though not why)\n  * Parsing of Multiple Kernel Strings, generating a list of kernels\n  * Union of results from Multiple Kernels for HitAndMiss method\n  * Iterated Multiple Kernels for all other morphology methods\n  * Added many new kernels for HitAndMiss and Convolution\n    Sobel, Laplacian, Cross, Peaks, Corners, LineEnds, LineJunctions,\n    ConvexHull (for Thicken), Skeleton (for Thinning)\n\n2010-05-08  6.6.1-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Use proper background.index when writing indexed PNG, if the background\n    color is in the palette.\n\n2010-05-08  6.6.1-7 Cristy  <quetzlzacatenango@image...>\n  * Fix improper 'invalid colormap index' PNG bug.\n  * Fix PerlMagick compile exception.\n\n2010-05-07  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added % and ! modification flags to morphology distance kernel\n    scaling factor, for easier usage.\n  * Bug fix for compose math channel handling and morphology diff usage\n\n2010-05-06  6.6.1-6 Cristy  <quetzlzacatenango@image...>\n  * Do not claim gray colorspace if gray image includes a non-gray pixel.\n  * Initialize BMP alpha channel to opaque for RGB images.\n  * Fixed under allocation for round rectangles.\n  * The -list option returns a 0 status as expected.\n\n2010-05-06  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Made use of new no-'sync' channel enabled mathematical compose methods\n    for the difference morphology methods.  These should now work correctly\n    for specific channels, and more importantly for alpha shaped morphology.\n\n2010-05-05  6.6.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bugs with losing the opacity channel while writing some PNG images.\n    (bug reported by Anthony T.)\n\n2010-05-05  6.6.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Simplified and corrected rowbytes calculation in coders/png.c and\n    added more logging.\n\n2010-05-05  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename of \"Add\" and \"Subtract\" compositions to \"ModulusAdd\" and\n    \"ModulusSubtract\" for more clarity of there functions. Old names\n    will continue to work as expected.\n  * Fix \"Minus\", \"ModulusAdd\", and \"ModulusSubtract\" to follow\n    normal SVG 'Over' blending specifications, (see next for override)\n    Note that this does NOT include the \"Plus\" composition method which has\n    SVG definition for it to use a 'Plus' blending rather than 'Over' blending.\n  * By default mathematical compositions work as per SVG definition. That is\n    the results are synchronized with 'Over' alpha-blending (except \"Plus\"\n    which uses 'plus' alpha-blending).\n  * By removing the default 'sync' flag from the -channel setting however\n    Break this inter-channel synchronization and do the mathematical operations\n    only on the individual channels as specified by the -channel setting.\n    That is do 'channel' math rather than 'SVG' composition.\n  * With this change you can then use mathematical composition methods on\n    individual channels or even with the alpha channel of images.\n\n2010-04-28  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Special case handling in Barrel distortion (pixel at image center)\n  * Calculation of image for Barrel distortion (pixel vs image coords)\n  * Argument input (handling optional 'd' argument) for Barrel distortion\n\n2010-04-24  6.6.1-6 Cristy  <quetzlzacatenango@image...>\n  * Do not declare timestruct under MinGW.\n  * Respect -compose option for the montage utility (bug report by Anthony).\n  * A 256 column gradient produces a 256 color GIF image (bug report by\n    Anthony).\n  * Register / unregister CALS format in static.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=16103).\n  * Add SetImageColor() method.\n\n2010-04-17  6.6.1-5 Cristy  <quetzlzacatenango@image...>\n  * Only write one ICC profile to PSD image.\n  * Sync image colormap for PNG tRNS chunks.\n  * The -direction option now works with the -annotate and -draw options.\n  * For the histogram: format, if you have no need for the unique color list,\n    use <kbd>-define histogram:unique-colors=false</kbd> to forego this\n    expensive operation.\n  * Match on literal after backslash in glob expression (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16068).\n  * Enable JPEG-compression for grayscale TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16064).\n  * Don't write empty tile if tile geometry matches the image width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16064).\n  * Support -regard-warnings in the mogrify utility.\n  * Output the correct units for the identify utility (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16075).\n\n2010-04-15  6.6.1-4 Cristy  <quetzlzacatenango@image...>\n  * Do not set the resample virtual pixel method when undefined.\n  * Support writing grayscale PSD images.\n  * Revert Lab-to-XYZ colorspace transform patch.\n  * Clamp HDRI values for LevelImageChannel() method.\n\n2010-04-12  6.6.1-3 Cristy  <quetzlzacatenango@image...>\n  * For HSL to RGB, if color temperature is less than 0, set RGB to lightness.\n  * Do not flip BMP image with negative height when pinging.\n\n2010-04-08  6.6.1-2 Cristy  <quetzlzacatenango@image...>\n  * Improve support for device link profiles.\n\n2010-04-06  6.6.1-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug in -auto-level for special case when only one value is present\n    in some channel of the image. In this case no 'stretch is performed, just\n    as -normalize does.\n\n2010-04-05  6.6.1-1 Cristy  <quetzlzacatenango@image...>\n  * WMF support under Windows does not produce the same results as under\n    Linux.\n\n2010-03-31  6.6.1-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug in equal-size tile cropping, when image has a page offset.\n\n2010-03-31  6.6.1-0 Cristy  <quetzlzacatenango@image...>\n  * The -recolor 4x4 matrix is now interpreted properly (previously it\n    summed rather than attenuating the alpha channel).\n  * Support writing 1-bit PSD images.\n  * Support LCMS 2.0.\n  * Improved WMF support under Windows.\n\n2010-03-30  6.6.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * The new coders/png.c was failing to read a 1-bit paletted image properly.\n  * Finished eliminating the deprecated direct references to members of\n    the png_info structure. ImageMagick can now be built with libpng-1.5.\n\n2010-03-21  6.6.0-10 Cristy  <quetzlzacatenango@image...>\n  * Respect the -density option when rendering a Postscript or PDF image.\n  * Distort barrel no longer complains when 3 arguments are given (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15883).\n  * Support -direction left-to-right option for rendering text\n\n2010-03-24  6.6.0-9 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/png.c: Eliminated support of libpng versions older than 1.0.12.\n  * Relocated the new, misplaced png_get_rowbytes() call.\n  * Updated setjmp/longjmp/jmpbuf usage to work with libpng-1.5.\n\n2010-03-21  6.6.0-9 Cristy  <quetzlzacatenango@image...>\n  * Windows does not support complex.h (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=15808).\n  * Add support for monochrome PSD images.\n  * VignetteImage() no longer crashes when x and y arguments are both greater\n    than half the width (x) and height (y) of the image.\n\n2010-03-20  6.6.0-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated some of the deprecated direct references to members of\n    the png_info structure.  This must be finished before we can build\n    with libpng-1.5.\n\n2010-03-18  6.6.0-8 Cristy  <quetzlzacatenango@image...>\n  * The animate program no longer loops twice when -loop 1 is specified.\n  * The caption format would sometimes hang when the text was not UTF-8.\n  * Don't gamma correct log to linear color conversion unless the -gamma is\n    specified (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=15799).\n\n2010-03-17  6.6.0-7 Cristy  <quetzlzacatenango@image...>\n  * Detect CMYKProcessColor AI tag.\n  * Delete image from command line cache for -write option.\n\n2010-03-13  6.6.0-6 Cristy  <quetzlzacatenango@image...>\n  * Add support for the Adobe Large Document format.\n  * Recognize -remap option for the mogrify utility.\n  * The default Helvetica font is not always available, check for\n    Century Schoolbook too (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15780).\n\n2010-03-11  6.6.0-5 Cristy  <quetzlzacatenango@image...>\n  * Permit user to get virtual pixels with a region width of 0.\n  * Reformulate the jinc() function so that the main peak is of amplitude of 1.\n  * Resampling filter must respect the image virtual pixel method.\n\n2010-03-07  6.6.0-4 Cristy  <quetzlzacatenango@image...>\n  * The -evaluate-sequence option behaves like -evaluate except it operates\n    on a sequence of images.\n\n2010-03-05  6.6.0-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -maximum and -minimum options.\n\n2010-02-27  6.6.0-1 Cristy  <quetzlzacatenango@image...>\n  * Check to see if ICON image width /height exceeds that of the image canvas.\n  * Set the DPX descriptor to Luma only if the image type is not TrueColor.\n  * Add support for -fx airy(), j0(), j1(), jinc(), and sinc() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15685).\n    Anthony, review these for correctness.\n  * Don't embed an XMP profile in an EPS image for now.\n\n2010-02-21  6.6.0-0 Cristy  <quetzlzacatenango@image...>\n  * Insufficient image data in EPT is a warning rather than an error.\n  * Respect -type TrueColor when writing gray DPX images.\n  * Fix problem reading 10-bit grayscale DPX images when scanline length is\n    not a multiple of 3.\n  * BMP has an alpha channel, it was treated as an opacity channel.\n\n2010-02-20  6.5.9-10 Cristy  <quetzlzacatenango@image...>\n  * Write 10-bit grayscale DPX images properly.\n\n2010-02-18  6.5.9-8 Cristy  <quetzlzacatenango@image...>\n  * Detect PDF ICCBased colorspace.\n\n2010-02-18  6.5.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Finalized -set option:convolve:scale  kernel normalize/scale option\n\n2010-02-16  6.5.9-7 Cristy  <quetzlzacatenango@image...>\n  * TransformImage() resets the image blob when called in the PICT decoder;\n    use SetImageExtent() instead.\n\n2010-02-14  6.5.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support PSD RLE compression.\n\n2010-02-13  6.5.9-5 Cristy  <quetzlzacatenango@image...>\n  * The jpeg:extent define sometimes exceeded the specified limit.\n\n2010-02-09  6.5.9-4 Cristy  <quetzlzacatenango@image...>\n  * Resolve \"too many open files\"  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15546).\n\n2010-02-08  6.5.9-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Correlate method which does a Convolve without reflecting the kernel.\n\n2010-02-07  6.5.9-3 Cristy  <quetzlzacatenango@image...>\n  * Initialize grayscale colormap for PSD images.\n\n2010-02-07  6.5.9-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Final testing and fixing of basic morphology operators\n  * Addition Third-level Subtractive Morphology Methods:\n    EdgeIn, EdgeOut, Edge, TopHat, BottomHat\n  * Ensuring original kernels passed to morphology are cloned before being\n    modified for use by specific methods (EG: convolve scale/normalize)\n\n2010-02-03  6.5.9-2 Cristy  <quetzlzacatenango@image...>\n  * display -immutable to display transparent image without a checkboard.\n\n2010-01-27  6.5.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Make -define png:color-type less persnickety about what it will accept.\n\n2010-01-24  6.5.9-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * added use of -precision in 'showkernel' output of -morphology\n  * correct use of a 'reflected kernel' for 'Convolve' 'Dilate' and\n    'Distance' Morphology primitives. This does not have a performance hit,\n    though is only truely applicable when the kernel is asymmetric.  Note that\n    'Erode' does not use a 'reflected' kernel, so that 'Open' and 'Close'\n    operations work properly.  This 'reflected usage is defined by online\n    morphology lecture notes (Google for \"EECE Binary Morphology\")\n  * Added convolve kernel scaling setting \"-set option:convolve:scale N\"\n    If undefined morphology convolve does not do any scaling or normalization\n    of the convolution kernel.  A value of 0.0 causes normalization for both\n    zero and non-zero (added weights) kernel types.\n\n2010-01-15  6.5.9-1 Cristy  <quetzlzacatenango@image...>\n  * Speed up reading the PSD image format.\n  * Add the -precision option.  Use it to set the maximum number of significant\n    digits to be printed.\n  * Add -features option to the identify program to display channel features.\n  * Add -unique option to the identify program to display channel features.\n\n2010-01-01  6.5.9-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for compact floating point (i.e. -depth 16 -define\n    quantum:format=floating-point).\n  * Transparent images no longer flicker on certain system when using the\n    display program.\n  * Permit interactive resizing with the display program.\n  * Support heterogeneous distributed processing, see\n    http://www.imagemagick.org/script/architecture.php#distributed.\n  * Fix semaphore assertion when reading a corrupt image with Magick++.\n  * Add support for -brightness-contrast option.\n\n2010-01-05  6.5.9-0 Stephan Menzel  <stephan.menzel@gmail...>\n  * Add support for the BGRA raw image format.\n\n2010-01-04  6.5.9-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Kernel Generator to generate kernels from user strings, which\n    allows the generation in many built in kernels for both Convolution\n    and other Morphological methods.  New Kernels currently include..\n      Convolution: Gaussian, Blur, Comet\n      Morphological: Rectangle, Square, Diamond, Disk, Plus\n      Distance: Chebyshev, Manhatten, Knight, Euclidean\n    And both old and new (rectangular) user defined kernel specifications\n    including the use of 'nan' to represent elements which are not part\n    of the kernel definition.  List built-in kernel types use \"-list kernel\"\n  * Added -morphology {method}[:{iteration}] {kernel_string}\n    Initial methods includes no only the basic morphology methods: Dilate,\n    Erode, Open, Close; and a pixel color preserving 'Intensity' version, but\n    also the special methods: Convolve, and Distance.  Of course the\n    appropriate kernel should be provided for each specific method.\n\n2010-01-01  6.5.9-0 Cristy  <quetzlzacatenango@image...>\n  * Add OpenCL-enabled filter (e.g.  convert image.png -process\n    \"convolve '-1, -1, -1, -1, 9, -1, -1, -1, -1'\" image.jpg).\n  * Added StringTo...() processing functions\n\n2009-12-27  6.5.8-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added MxN tile cropping with overlapping and space handling.\n    See IM Examples, Cutting and Bordering, Cropping roughly Equal\n\n2009-12-23  6.5.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * angle bug fix in variable blur composition with vertical ellipses\n  * Added ability to have variable angles for ellipses in variable blur\n    composition.  See IM Examples, Composition, Variable Blur for details\n\n2009-12-20  6.5.8-8 Cristy  <quetzlzacatenango@image...>\n  * JPEG does not grok the HSL colorspace.\n\n2009-12-18  6.5.8-7 Cristy  <quetzlzacatenango@image...>\n  * Off by 1 error when allocating the dash-pattern array in PerlMagick.\n  * The -gaussian-blur over blurred the opacity channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15218).\n\n2009-12-13  6.5.8-6 Cristy  <quetzlzacatenango@image...>\n  * Declare InverseFourierTransformImage in Magick++/Include.h.\n\n2009-12-09  6.5.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG8 encoder would fail to write a 1-color image, due to\n    a bogus MagickFail return from CompressColormapTransFirst().\n\n2009-12-05  6.5.8-4 Cristy  <quetzlzacatenango@image...>\n  * SVG images are no longer double sized with the -density option.\n\n2009-12-04  6.5.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the one instance of PNG_COLOR_TYPE_RGBA to PNG_COLOR_TYPE_RGB_ALPHA\n    in coders/png.c\n\n2009-12-03  6.5.8-3 Cristy  <quetzlzacatenango@image...>\n  * It's interword-spacing, not interword_spacing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=1515).\n  * All JP2 depths (e.g. 4, 10, 12, 16) are now supported properly.\n\n2009-11-28  6.5.8-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the one remaining ping_info->trans to ping_info->trans_values\n    in coders/png.c\n\n2009-11-26  6.5.8-1 Chris Madison  <madisonblu@gmail...>\n  * Eliminate bogus 'skip to sync byte' exception for PCD image format.\n  * -threshold option: threshold to white if the computed intensity of the\n    color channels exceeds the threshold.\n  * Add -define jpeg:extent option to restrict the maximum JPEG image file size.\n\n2009-11-26  6.5.8-1 Dr. Ingo Bremer <bremer@wias-...>\n  * Escape single quote in when writing the UIL format.\n\n2009-11-25  6.5.8-1 Jee Teck  <jee.teck@cteca...>\n  * The mogrify program +opaque option now recognizes its required argument.\n\n2009-11-19  6.5.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add magick/morphlogy.{c,h} source templates.\n  * Sync image option when reading MPR images.\n  * Optimize ping for SVG images.\n  * SetLogFormat() no longer causes crash (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15091).\n  * Do not call MagickCoreTerminus() when memory allocation fails inside\n    the locale component.\n\n2009-11-18  6.5.7-9 Cristy  <quetzlzacatenango@image...>\n  * Read / write 32-bit SUN raster images with a odd width.\n  * Cairo format returns pixels with the alpha premultiplied (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15081).\n\n2009-11-12  6.5.7-8 Cristy  <quetzlzacatenango@image...>\n  * Thumb::URI file URI now has the correct number of forward slashes.\n\n2009-11-09  6.5.7-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Suppress libpng pedantic warnings and warn about using old libpng-1.4.0\n    beta versions.\n\n2009-11-09  6.5.7-7 Cristy  <quetzlzacatenango@image...>\n  * Bump library age.\n  * Restore -tile-offset functionality (bug report from Anthony).\n\n2009-11-06  6.5.7-6 Cristy  <quetzlzacatenango@image...>\n  * Animate command line options are no longer ignored.\n\n2009-11-04  6.5.7-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fix for Polynomial distortion. which is now working.\n\n2009-11-01  6.5.7-4 Cristy  <quetzlzacatenango@image...>\n  * Use -define delegate:bimodal=true to activate any bimodal delegates.\n  * Make sure MagickWand semaphore is acquired before locking it.\n\n2009-10-28  6.5.7-3 Cristy  <quetzlzacatenango@image...>\n  * Convert SVG clipping path points from unsigned to long.\n\n2009-10-26  6.5.7-2 Chris Madison  <madisonblu@gmail...>\n  * Only call InstantiateXComponent() if X11 support is included.\n  * Correct hue computation for the HSB colorspace.\n\n2009-10-23  6.5.7-1 Samuel Thibault  <samuel.thibault@ens-l...>\n  * Braille coder fix for DirectClass images\n\n2009-10-19  6.5.7-1 Wang Dataton <wang@datat...>\n  * Use fdopen() rather than MagickOpenStream() in coders/pict.c.\n\n2009-10-18  6.5.7-1 Cristy  <quetzlzacatenango@image...>\n  * Alpha blending is not required for ScaleImage().\n  * Gaussian noise operator is not longer discontinuous.\n\n2009-10-14  6.5.7-0 Pino Toscano  <pino@kde...>\n  * ImageMagick fails to build in GNU/HURD due to absence of PATH_MAX.\n\n2009-10-14  6.5.7-0 Cristy  <quetzlzacatenango@image...>\n  * Black channel is now set properly when resizing CMYKA images.\n\n2009-10-10  6.5.7-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fixes for degenerate 'affine' cases of BilinearForward distortion.\n\n2009-10-06  6.5.6-10 Cristy  <quetzlzacatenango@image...>\n  * Declare the  MagickCore method SpliceImage() in Magick++/Include.h.\n\n    QueueCacheViewAuthenticPixels() for the CopyComposite optimization.\n2009-10-04  6.5.6-9 Cristy  <quetzlzacatenango@image...>\n  * Use GetCacheViewAuthenticPixels() rather than\n  * QueueCacheViewAuthenticPixels() for the CopyComposite optimization.\n\n2009-10-03  6.5.6-8 Nick Wellnhofer <wellnhofer@aevum...>\n  * Add missing libraries to the LIBADD entries in coders/Makefile.am,\n    filters/Makefile.am and wand/Makefile.am.\n  * Use LIBS rather than LDFLAGS in configure.ac for the Freetype delegate\n    library.\n\n2009-10-01  6.5.6-7 Cristy  <quetzlzacatenango@image...>\n  * Don't use group4 compression if the image is truecolor.\n  * If image is gray, write grayscale DPX images.\n  * We no longer lose a scanline when reading multi-frame raw images\n    (Y, R, C, etc.).\n  * Properly update the EXIF orientation tag.\n\n2009-09-25  6.5.6-6 Cristy  <quetzlzacatenango@image...>\n  * Permit percentage of hue for HSL (e.g. hsl(12%,...)).\n\n2009-09-25  6.5.6-5 Cristy  <quetzlzacatenango@image...>\n  * Support -clamp option.\n  * Patch for IsMagickColorEqual() for HDRI.\n  * Permit non-percentage HSL colors (e.g. hsl(12.6316,134.58339,219.00012)).\n\n2009-09-25  6.5.6-5 Elf  <elf@ephem...>\n  * Patch to fix configure's framework's undefinedness (only if the gslib\n    tests are run).\n\n2009-09-22  6.5.6-4 Cristy  <quetzlzacatenango@image...>\n  * Don't compile Huffman2DEncodeImage() unless the TIFF delegate library\n    is enabled.\n  * Hue in hsl() format is 0-360 and does not use %.\n\n2009-09-21  6.5.6-3 Cristy  <quetzlzacatenango@image...>\n  * Deprecate LevelImageColors(), replace with LevelColorsImage().\n\n2009-09-17  6.5.6-2 Cristy  <quetzlzacatenango@image...>\n  * Optimize copy composite operator.\n\n2009-09-15  6.5.6-2 Cristy  <quetzlzacatenango@image...>\n  * Use -define jpeg:size to scale a JPEG image to the specified size.\n\n2009-09-13  6.5.6-0 Cristy  <quetzlzacatenango@image...>\n  * Fix ICON alpha mask scanline pad.\n\n2009-09-11  6.5.5-10 Cristy  <quetzlzacatenango@image...>\n  * Return the global maximum threads to avoid the rare cache view assertions.\n  * Throw an end-of-file exception for truncated raw gray images.\n\n2009-09-10  6.5.5-9 Cristy  <quetzlzacatenango@image...>\n  * Do not include last line of text in the interline spacing computation.\n\n2009-09-07  6.5.5-8 Cristy  <quetzlzacatenango@image...>\n  * Check that quantum_info is defined before destroying it in the PNG coder.\n  * Add -interline-spacing option to convert.\n\n2009-09-03  6.5.5-7 Cristy  <quetzlzacatenango@image...>\n  * Support multi-page transparent Postscript and PDF.\n\n2009-09-01  6.5.5-6 Cristy  <quetzlzacatenango@image...>\n  * A union is required when converting a thread ID to an unsigned long.\n\n2009-08-28  6.5.5-5 Cristy  <quetzlzacatenango@image...>\n  * Add support for TIFF 3.9.1.\n\n2009-08-27  6.5.5-4 Cristy  <quetzlzacatenango@image...>\n  * Validate with the netscape: reference image.\n\n2009-08-26  6.5.5-3 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak for threaded PerlMagick scripts.\n\n2009-08-24  6.5.5-2 Cristy  <quetzlzacatenango@image...>\n  * SVG compile error when if MAGICKCORE_CAIRO_DELEGATE is not defined.\n\n2009-08-23  6.5.5-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fix for transparency handling in Composite Variable Blur\n  * Addition of -auto-level and -auto-gamma  image enhancements\n    (under trial not yet final)\n  * Addition of a special -channel flag 'sync' which means that the specified\n    channels are to be modified together by the same amount.  The flag is\n    enabled by default.  This replaces the current 'channels not modified'\n    type handling thought IM.\n  * Modified -channel parsing to continue looking for words, after handling\n    any shorthand channel options.  For example:  -channel RGB,sync\n\n2009-08-10  6.5.5-0 Cristy  <quetzlzacatenango@image...>\n  * identify -format %c logo.png returns the image comment as expected.\n  * Clone ImageInfo members scene and number_scenes (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=14437).\n  * Fix memory leak with the -remote option of the animate program (bug report\n    from Anthony).\n  * If a grayscale TIFF image has a colormap write it as a colormapped image.\n  * MVG partial opacity not set properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14442).\n  * Black channel was not blurring properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14473).\n\n2009-08-06  6.5.4-10 Cristy  <quetzlzacatenango@image...>\n  * The display program honors -loop.\n  * (ab) of Lab colorspace was not offset correctly.\n  * Scale mag/phase and real/imaginary the same for HDRI and non-HDRI builds.\n  * SVG permits multiple arc paths with an omitted 'A' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14377).\n  * The 'skewY' MVG attribute produced incorrect angles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14144).\n\n2009-08-02  6.5.4-9 Cristy  <quetzlzacatenango@image...>\n  * Optimize GammaImage() method.\n\n2009-08-02  6.5.4-8 Cristy  <quetzlzacatenango@image...>\n  * OpenMP-enable GetSimilarityMetric().\n\n2009-07-30  6.5.4-7 Bernhard Rosenkraenzer <bero@arkli...>\n  * Structure trans_values was renamed to trans_color and trans was\n    renamed to trans_alpha in PNG version 1.4.\n\n2009-07-29  6.5.4-7 Cristy  <quetzlzacatenango@image...>\n  * Replace color blending in DrawGradientImage() to use Composite Blend.\n    this makes Gradients handle transparency correctly!\n\n2009-07-28  6.5.4-7 Cristy  <quetzlzacatenango@image...>\n  * The -thumbnail option no longer removes color profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=14312).\n  * Do not scale real / imaginary FFT / IFT.\n  * Check for localtime() NULL return.\n  * import --help requires an X server (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14323).\n  * Fails to load MS Windows icons with compressed PNG elements (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14324).\n\n2009-07-25  6.5.4-6 Cristy  <quetzlzacatenango@image...>\n  * Support the new JPEG version 7 delegate library.\n\n2009-07-24  6.5.4-6 Alexander E. Patrakov <patrakov@gmail...>\n  * Incorrect use of setjmp in coders/png.c.\n\n2009-07-23  6.5.4-5 Cristy  <quetzlzacatenango@image...>\n  * We broke -scene when we fixed the -dispose option.  Try again.\n\n2009-07-21  6.5.4-4 Cristy  <quetzlzacatenango@image...>\n  * Update autoconf support files.\n  * More than one -dispose setting overwrote previous settings (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=14252).\n  * Don't use JPEG's color reduction algorithm for less than 8 colors.\n\n2009-07-13  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Final testing and bug fixes for all mathematical compose methods\n    Including non-overlapping regions bugs found in in operators Divide,\n    ColorDodge,  VividLight.  And the handling of transparency to follow\n    standard 'Over' Blending in Divide.  Only math methods not looked at are\n    the addition methods Plus, Add, Minus, and Subtract, which do not follow\n    normal 'Over' alpha blending behavior, for the purposes of mask handling.\n\n2009-07-12  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Addition of user definable 'Mathematics' compose method\n      -compose Mathematics -set option:compose:args A,B,C,D -composite\n    Will implement the formula    f(Sc,Dc) = A*Sc*Dc + B*Sc + C*Dc + D\n    this lets you implement most smooth polynomial compose methods.\n    (requested by Fred WienHaus)\n\n2009-07-11  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Finished the recoding of Composite methods to allow easier debugging\n    and faster access.\n  * Added PegtopLight compose method as an alternative simpler Softlight\n    alternative.  See notes and comparison to SoftLight in...\n       http://www.pegtop.net/delphi/articles/blendmodes/softlight.htm\n  * From the notes on Photoshop blend modes at\n       http://www.simplefilter.de/en/basics/mixmods.html\n    Added extra composition modes:\n       VividLight, PinLight, LinearBurn, LinearDodge\n    NOTE: 'LinearBurn' the same as 'Plus' but with the normal 'Over' blending.\n\n2009-07-10  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Re-coding of Composite methods HardLight, SoftLight, Overlay, LinearLight,\n    ColorBurn, ColorDodge, Multiply, Screen  to make it more readable, easier\n    to debug, and directly comparable to SVG specifications.\n  * Specifications changed for  SoftLight, ColorBurn, ColorDodge\n    Though only SoftLight changed to significantly.\n  * However implementation errors were found for  ColorBurn, LinearLight\n\n2009-07-01  6.5.4-3 Cristy  <quetzlzacatenango@image...>\n  * Add -blue-shift option.\n  * Add compression flag for each channel of a PSD layer.\n  * Implement experimental forward and inverse Fourier transforms (contributed\n    by Sean Burke and Fred Weinhaus).  The -fft / -ifft option is not ready for\n    prime time just yet.\n  * Support -cdl (color decision list) option.\n  * Don't process directories as filenames when using wildcard paths\n    (i.e. logo[1]/png).\n\n2009-07-01  6.5.4-2 Cristy  <quetzlzacatenango@image...>\n  * Can't bit shift a float.\n\n2009-06-25  6.5.4-1 Cristy  <quetzlzacatenango@image...>\n  * Off by one error for multi-frame raw grayscale images.\n  * Can't stat() a Zip or Bzip opaque structure.\n  * DPX user bits are no longer truncated.\n  * Return image colorspace for -format [%colorspace] option.\n  * ThumbnailImage(): don't subsample if image is already thumbnail size.\n\n2009-06-23  6.5.4-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Automatic determination of B from C and C from B for a 'Keys Filter'\n    when using the B,C Cubic Filter Expert options was broken.\n    See http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14037\n\n2009-06-19  6.5.4-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added -compose 'Blur', variable blur mapping to CompositeImages\n    Arguments   X_scale x Y_scale + angle   of the blurring ellipse.\n  * Added \"-blur\" special compose option to \"composite\"\n  * Cleanup of \"composite\" compose argument handling\n\n2009-06-18  6.5.3-10 Cristy  <quetzlzacatenango@image...>\n  * Clone pixel cache when cloning image to prevent RMagick semaphore lock.\n  * Set compare similarity image to NULL to prevent double free.\n\n2009-06-16  6.5.3-8 Cristy  <quetzlzacatenango@image...>\n  * Set camera formats to require a seekable stream.\n  * Do not let display program image window exceed the screen size.\n\n2009-06-14  6.5.3-7 Cristy  <quetzlzacatenango@image...>\n  * Improve FITS keyword parser.\n\n2009-06-14  6.5.3-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Cleanup of compose 'displace' of old useless code that is not used.\n  * Implement a compose 'distort' mapping method,\n    This is basically exactly like 'displace' but relative to a fixed point\n    which may be user supplied as +X+Y\n  * Default scaling to width/2 and height/2 of overlay (100% scale)\n    with a distortion 'center' to the middle of the overlay image\n  * If a '%' flag given scale displacement relative to image size\n  * If a '!' flag given make scale and center relative to 'background' image\n    instead of the overlay map.\n  * If no 'height' scale given, use the X scale.\n\n2009-06-13  6.5.3-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug for compose methods, Hue, Saturate, Luminize\n\n2009-06-11  6.5.3-6 Cristy  <quetzlzacatenango@image...>\n  * Report the correct transparent pixel values in the display program\n    magnify windows.\n  * Do not advance when finalizing image settings in the mogrify program.\n\n2009-06-11  6.5.3-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed \"convert\" to merge the third 'mask' image into the 'source' image\n    for correct handling of 2 dimensional -compose \"displace\".\n  * Fixed PerlMagick Composite() for the same thing.\n  * Modified compose \"Displace\" so displacement image's alpha channel can be\n    used to mask the transparency of the overlay area.\n\n2009-06-07  6.5.3-4 Cristy  <quetzlzacatenango@image...>\n  * Added the HALD image Color LUT, and a no-op HALD: image generator.\n    See Introduction at  http://www.quelsolaar.com/technology/clut.html\n\n2009-06-07  6.5.3-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Changed CompositeImageChannel() so that extra compose arguments are\n    now passed in the ImageArtifact \"compose:args\". This can be assigned to\n    images using   -set \"option:compose:args\" 'args'  where args are defined\n    using 'geometry' style or 'comma separated numbers'.\n  * Declared the special flag needed for Composite Tiling as the ImageArtifact\n    \"compose:outside-overlay\".\n  * Documentation update for CompositeImageChannel() in Core Library to\n    reflect these changes.\n  * Documentation update for DistortImage() in Core Library with the extra\n    ImageArtifact controls it can use.\n  * Bug correction in normalization of GetOptimalKernelWidth2D() of gem.c\n\n2009-06-06  6.5.3-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Documentation update for CompositeImageChannel() in Core Library.\n    This adds the information on how extra compose arguments needed for\n    specific compose methods are actually passed to the library function.\n    Compose methods such as Blend, Dissolve and Displace.\n\n2009-06-01  6.5.3-3 Priya Hariharan <priya.hariharan@globa...>\n  * The target profile in ProfileImage() is no longer accessed after it is\n    freed.\n\n2009-06-01  6.5.3-1 Cristy  <quetzlzacatenango@image...>\n  * Bug fix for -page.\n\n2009-05-31  6.5.3-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Minor change to -function Arctan to make first argument match slope\n\n2009-05-29  6.5.3-0 Cristy  <quetzlzacatenango@image...>\n  * Do not treat -page as a global option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13864).\n\n2009-05-28  6.5.2-10 Cristy  <quetzlzacatenango@image...>\n  * Create thread set for pseudo-random number generator.\n\n2009-05-25  6.5.2-9 Cristy  <quetzlzacatenango@image...>\n  * Do not change opacity value for the -alpha background option.\n  * Rebuild automake / autoconf scripts.\n\n2009-05-23  6.5.2-8 Cristy  <quetzlzacatenango@image...>\n  * Check for XMakeImage() integer overflow vulnerability (Secunia Advisory\n    SA35216).\n\n2009-05-23  6.5.2-8 Cristy  <quetzlzacatenango@image...>\n  * Permit reading a specific frame of a multi-page TIFF with blobs.\n\n2009-05-22  6.5.2-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added new -function methods  Arcsin  and Arctan\n\n2009-05-19  6.5.2-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed a regression with PNG8: format.\n\n2009-05-19  6.5.2-7 Cristy  <quetzlzacatenango@image...>\n  * The -geometry option was improperly applied twice.\n\n2009-05-18  6.5.2-6 Richard Oehlinger <richard.oehlinger@celum...>\n  * Set image colorspace to YCbCrColorspace if JPEG color space is JCS_YCbCr.\n\n2009-05-14  6.5.2-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Updated help output and command-line options documentation to bring\n    the -alpha options up to date with what's actually in the code.\n\n2009-05-13  6.5.2-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Change \"depreciated\" to \"deprecated\" in several files.\n\n2009-05-10  6.5.2-5 Cristy  <quetzlzacatenango@image...>\n  * Change OpenMP schedule from dynamic to static for RenderFreeType().\n  * Recognize unicode strings when computing caption word wrapping.\n  * New -alpha background option to set fully-transparent pixels to the\n    background color.\n\n2009-05-08  6.5.2-4 Cristy  <quetzlzacatenango@image...>\n  * Combined layer of transparent PSD image was not being read properly.\n\n2009-05-06  6.5.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Progress on \"-define png:bit-depth=value\" and \"-define png:color-type=value\"\n    It is now able to write an opaque black-and-white image in any of the 15\n    valid combinations of PNG color-type and bit-depth.\n  * Fixed a regression with writing sub-8-bit grayscale PNGs.\n\n2009-05-06  6.5.2-2 Chris Madison  <madisonblu@gmail...>\n  * Create 8-bit TIFF images if -depth is set to 8 and HDRI-enable ImageMagick.\n\n2009-05-04  6.5.2-1 Chris Madison  <madisonblu@gmail...>\n  * Accept file lists on the command line (e.g. echo \"rose: rose.png\" |\n    convert @- ...).\n  * Duplicate line in tiff.c breaking read of zip compressed tif (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13688).\n  * Support policies to permit or deny any coder, delegate, filter, or file\n    path (see policy.xml).\n\n2009-05-02  6.5.2-0 Chris Madison  <madisonblu@gmail...>\n  * The mogrify -crop option returns multiple images if an x/y offset is not\n    specified (e.g. -crop 100x100).\n  * Generate a proper file path for -path @filelist.txt (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13671).\n\n2009-05-01  6.5.2-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Accept \"-define png:bit-depth=value\" and \"-define png:color-type=value\"\n    options.  This is work-in-progress with the objective of being able to\n    precisely specify the type of PNG file to be written.  The previously-used\n    internal attribute \"png:bit-depth\" that was used to communicate between\n    the PNG writer and the JNG writer is changed to \"png:bit-depth-written\".\n    This feature needs testing.  It is important to note that this feature\n    cannot be used to force the PNG to use a bit-depth or color-type that\n    does not losslessly represent the image.  You can, however, cause\n    the writer to use a larger depth or to use the RGB colorspace when\n    grayscale or indexed would have been sufficient.\n\n2009-05-01  6.5.1-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed the Rmin usage in Depolar and Polar distortions\n  * The 6th argument (Ato) for Polar/Depolar is now optional and defaults\n    to Afrom + 360 degrees (or a fill circle from the given start angle)\n\n2009-04-30  6.5.1-10 Cristy  <quetzlzacatenango@image...>\n  * Do not return a black image for -channel RGBA -gaussian (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13669).\n\n2009-04-28  6.5.1-9 Cristy  <quetzlzacatenango@image...>\n  * Fix 'conflicting types for Huffman2DEncodeImage' compile exception.\n\n2009-04-25  6.5.1-9 Cristy  <quetzlzacatenango@image...>\n  * Generate BMP 32-bit ARGB format for images with transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13633).\n\n2009-04-24  6.5.1-7 Cristy  <quetzlzacatenango@image...>\n  * Grok 'image.psd[0]' and 'image.mpg[0]' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13609).\n  * Normalize similarity based on reconstruction not the original (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13626).\n  * Support multiple JPEG images encapsulated within DICOM.\n\n2009-04-23  6.5.1-6 Cristy  <quetzlzacatenango@image...>\n  * Msys does not understand NAME_MAX.\n\n2009-04-22  6.5.1-5 Cristy  <quetzlzacatenango@image...>\n  * Check for valid linked list before assigning next / previous pointers.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Check error return from CompressColormapTransFirst() in coders/png.c\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Refrain from modifying image struct members (color, depth, matte)\n    while writing PNG datastreams.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Sometimes the PNG8: format would produce 1-, 2-, or 4-bit PNG datastreams.\n    Now it always produces 8-bit datastreams as users probably expect.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Suppressed \"shadowed declaration\" warnings in coders/jpeg.c and\n    coders/png.c that are triggered by \"-Wshadow\" gcc compiler flag.\n\n2009-04-17  6.5.1-3 Cristy  <quetzlzacatenango@image...>\n  * The display program now returns a 0 exit code on success (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13579).\n\n2009-04-14  6.5.1-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Folded some long lines and made other cosmetic changes.in coders/png.c\n\n2009-04-13  6.5.1-3 Cristy  <quetzlzacatenango@image...>\n  * MVG autodetection failing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13542).\n\n2009-04-11  6.5.1-2 Cristy  <quetzlzacatenango@image...>\n  * Image not properly placed when displaying to the X server root (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13532).\n  * fmax() is not support on some platforms (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13533).\n\n2009-04-11  6.5.1-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename existing \"Bilinear\" distortion as  \"BilinearReverse\"\n  * Added forward mapped bilinear distort as  \"BilinearForward\"\n  * The \"Bilinear\" distort is temporarily obsoleted but will eventually\n    be added as a  \"BilinearReverse\" and \"BilinearForward\" combination\n    mapping though a unit square.\n  * Sparse Gradient internally uses \"BilinearReverse\" for its \"Bilinear\"\n    gradient function as that method is the direct use of such equations.\n\n2009-04-01  6.5.1-1 Cristy  <quetzlzacatenango@image...>\n  * Default to min-is-white Photometric for fax / group4 compression (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13468).\n  * Respect image resolution when setting PDF MediaBox (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13350).\n  * Add SimilarityImage() to return how similar one image is to another.\n\n2009-03-28  6.5.1-0 Cristy  <quetzlzacatenango@image...>\n  * Graceful exit in djvu coder when EOF is thrown.\n  * Support -unsharp option for the montage program.\n\n2009-03-28  6.5.0-10 Cristy  <quetzlzacatenango@image...>\n  * Reduce deskew blurring: use AffineTransformImage() rather than\n    RotateImage().\n  * Unexpected end-of-file @ xwd.c/ReadXWDImage/252 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13430).\n\n2009-03-26  6.5.0-10 Markus Dahms <markus.dahms@progr...>\n  * Support for -density & -units options in PSD writer.\n\n2009-03-26  6.5.0-10 Samuel Thibault  <samuel.thibault@ens-l...>\n  * Fix bug in the braille coder which makes it always segfault.\n\n2009-03-25  6.5.0-9 Cristy  <quetzlzacatenango@image...>\n  * Enhance the compare program to locate a template image within a larger\n    image.\n  * Eliminate assertion when generating a PDF thumbnail.\n\n2009-03-25  6.5.0-8 Cristy  <quetzlzacatenango@image...>\n  * Fix assertion in IntegralRotateImage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13410).\n\n2009-03-24  6.5.0-7 Cristy  <quetzlzacatenango@image...>\n  * Referenced counted blob incremented incorrectly in CloneImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13410).\n\n2009-03-23  6.5.0-6 Chris Madison  <madisonblu@gmail...>\n  * Assertion failure reading PSD image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13397).\n\n2009-03-21  6.5.0-5 Chris Madison  <madisonblu@gmail...>\n  * Change -selective-blur to use gaussian kernel.\n\n2009-03-21  6.5.0-4 ERB  <entropy@xebec...>\n  * Missing locks in blob - race condition (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13385).\n\n2009-03-19  6.5.0-3 Chris Madison  <madisonblu@gmail...>\n  * Use default SVG resolution unless resolution is explicitly set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13373).\n  * Add support for -selective-blur option.\n\n2009-03-19  6.5.0-3 ragesteel  <iimagemagic-org-iapied0o@gt2.r...>\n  * ImageToBlob() no longer faults if Jasper compression is wrong (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13372).\n\n2009-03-19  6.5.0-3 ERB  <entropy@xebec...>\n  * Check the 8BIM profile resource block length (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13368).\n  * Unlocked read in DeleteNodeByValueFromSplayTree (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13370).\n\n2009-03-18  6.5.0-2 ERB  <entropy@xebec...>\n  * Eliminate race condition when acquiring a wand (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13357).\n  * Use of \"localtime\" in FormatMagickTime not thread-safe (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13358).\n\n2009-03-18  6.5.0-2 Cristy  <quetzlzacatenango@image...>\n  * Fix the image compose operator at OverCompositeOP for shadows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13330).\n\n2009-03-14  6.5.0-1 Paul Smedley  <paul@smedl...>\n  * Patches to get ImageMagick working under OS2.\n\n2009-03-10  6.5.0-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Expansion of Virtual-Pixel (Cache) handling, to include corrected Mirror,\n    plus addition of  CheckerTile, HorizontalTileEdge and VerticalTileEdge\n\n2009-03-10  6.5.0-0 John Cupitt  <jcupitt@gmail...>,\n                    Glenn Randers-Pehrson <glennrp@image...>\n  * DICOM reader not handling signed pixels properly.\n\n2009-03-09  6.4.9-10 Alexander E. Patrakov <patrakov@gmail...>\n  * Don't call GetValueFromSplayTree() if image properties is NULL.\n\n2009-03-09  6.4.9-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix minor size issue with bestfit +distort operation.\n  * Enable listing of -distort Polynomial\n  * Minor tweeks and center fixes for Polar/Depolar\n\n2009-03-01  6.4.9-9 Cristy  <quetzlzacatenango@image...>\n  * Convert returns MagickFalse for the -version option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=13230).\n  * Don't set pixel opacity unless the image alpha channel is active (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13189).\n\n2009-02-27  6.4.9-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix old -clut bug for re-coloring gray images using transparent and\n    semi-transparent colors.\n\n2009-02-22  6.4.9-7 Rick Mabry  <rick.mabry@anony...>\n  * Changes have been made to scores of the files that generate the\n    documentation. The most noticeable cosmetic changes are to the command-line\n    examples and command-line snippets, which now have a new look: dark blue\n    boxes with white/yellow text to indicate sample input/output.  Inclusion of\n    current version and release dates in appropriate places are now\n    automatically generated. Also, many changes have been made to begin to\n    bring the pages into strict W3C compliance with respect to both HTML and\n    CSS.\n\n2009-02-21  6.4.9-7 Chris Madison  <madisonblu@gmail...>\n  * The identify program reads the image pixels when the -format option is\n    asking for image statistics.\n  * Much improved ImageMagick validation suite (exercise with 'make check').\n\n2009-02-18  6.4.9-5 Jon  <jon@brick...>\n  * Processing the arg list -tile is replaced by -sans0 which is 1 char longer\n    and which overwrites the allocated area.\n\n2009-02-16  6.4.9-5 Chris Madison  <madisonblu@gmail...>\n  * Add section to license to alert users to third-party licenses in the\n    NOTICE file.\n\n2009-02-11  6.4.9-3 Anthony  <A.Thyssen@griffith...>\n  * Replaced geometry string parsing using ParseGravityGeometry() in\n    \"composite\" with more direct use of GravityAdjustGeometry();\n\n2009-02-10  6.4.9-3 Cristy  <quetzlzacatenango@image...>\n  * Support file descriptors (e.g. convert image.jpg fd:3 ...).\n  * The stream utility no longer go into an infinite loop (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13102).\n\n2009-02-04  6.4.9-2 Cristy  <quetzlzacatenango@image...>\n  * JPEG to PDF was not always reversible (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13020).\n\n2009-01-30  6.4.9-0 Cristy  <quetzlzacatenango@image...>\n  * Stroking when annotating failed for stroke widths > 2 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13009).\n\n2009-01-24  6.4.8-10 Cristy  <quetzlzacatenango@image...>\n  * TransformImageColorspace() returns GRAYColorspace when set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12990).\n  * Don;t assume CMYK unless document process colors include Cyan, Magenta,\n    or Yellow.\n\n2009-01-23  6.4.8-9 Cristy  <quetzlzacatenango@image...>\n  * Increase random angle range for +polaroid from -7..7 to -15..15 degrees.\n\n2009-01-22  6.4.8-8 Anthony  <A.Thyssen@griffith...>\n  * Fixed a -evaluate AddModulus 'patch' for correct 'negative' handling\n\n2009-01-20  6.4.8-7 Cristy  <quetzlzacatenango@image...>\n  * Removed previous patches for -shear directions.\n\n2009-01-20  6.4.8-8 Thomas Stegemann  <Thomas.Stegemann@mater...>\n  * SVG with resolutions other than 72.0 dpi, text is no longer transformed\n    twice.\n\n2009-01-20  6.4.8-8 Anthony  <A.Thyssen@griffith...>\n  * Renamed -evaluate methods 'sin' and 'cos' to math C math library names\n  * Added  \"-function polynomial  a,b,c,....\"   Eg:  a*x^2 + b*x + c\n  * Added  \"-function sinusoid freq,phase,amplitude,bias  (all optional)\n\n2009-01-18  6.4.8-7 Anthony  <A.Thyssen@griffith...>\n  * Removed \"annotate\" patches, which causes no end of problems.\n    Original coding worked perfectly fine.  Annotate isn't part of SVG!\n\n2009-01-18  6.4.8-7 Cristy  <quetzlzacatenango@image...>\n  * Respect mouse wheel movements for display program (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12938).\n  * Grab button in Display Open menu now works consistently (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12942).\n  * Patch for problem with opacity in MVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12946).\n\n2009-01-14  6.4.8-6 Cristy  <quetzlzacatenango@image...>\n  * Don't accept discontinuous shear angles for the -annotate option.\n    -- REMOVED\n\n2009-01-14  6.4.8-6 Mark Freeman <mark.freeman@porci...>\n  * Apply patch so ImageMagick compiles with Visual Studio 6.\n\n2009-01-12  6.4.8-5 Alexander E. Patrakov <patrakov@gmail...>\n  * Fix small memory leak on truncated PNG images.\n  * Do not allocate pixels when pinging a PNG image.\n\n2009-01-11  6.4.8-6 Chris Madison  <madisonblu@gmail...>\n  * Set the stroke opacity for \"opacity\" SVG element (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10594).\n\n2009-01-10  6.4.8-5 Matthew Litwin <mlitwin@sonic...>\n  * Convert to windows .ico format no longer inverts alpha channel.\n\n2009-01-10  6.4.8-5 Cristy  <quetzlzacatenango@image...>\n  * Interpret geometry correctly for negative angles (-shear 30x-10).\n\n2009-01-08  6.4.8-4 Eberhard Mattes  <eberhard.mattes@web.d...>\n  * Fix GetMagickToken() to accept locales that use \",\" as radix character.\n\n2009-01-08  6.4.8-4 Anthony  <A.Thyssen@griffith...>\n  * Add (and Fix) -evaluate methods   Sine, Cosine, AddModulus\n\n2009-01-05  6.4.8-4 Rick Mabry  <rick.mabry@anony...>\n  * Check for negative offsets (bevel widths) for the -frame option.\n\n2009-01-04  6.4.8-4 Alexander E. Patrakov <patrakov@gmail...>\n  * Patch for a memory leak and a logical bug in coders/gif.c.\n  * CopyMagickString() now returns the minimum of the source string length\n    or the length parameter.\n  * Properly set alpha channel in PNGs with palette and tRNS.\n\n2009-01-01  6.4.8-4 Cristy  <quetzlzacatenango@image...>\n  * Support %[] embedded filename tag (e.g. convert rose: -set area \"%wx%h\"\n    'rose-%[area].png').\n  * Do not set the fill element when 'opacity' is set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10594).\n  * Restore support for decoding the DVI format.\n  * Add perl and math lib reference to PerlMagick Makefile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12840).\n  * Fix crash on invalid JPEG XML profile.\n  * Export libtool symbols in MagickCore.sym and MagickWand.sym.\n  * Support sine and cosine as arguments to the -evaluate option.\n\n2008-12-31  6.4.8-4 Amartyo Banerjee\" <amartyo@gmail...>\n  * Calculate the kurtosis and skewness of image channels (reference\n    http://amartyosscrapbook.blogspot.com/2008/12/formulas-used-to-calculate-kurtosis-and.html).\n\n2008-12-28  6.4.8-4 Rick Mabry  <rick.mabry@anony...>\n  * Patch magick/display.c and PerlMagick/ContrastStretchImage() to return the\n    same results as the -contrast-stretch option.\n  * ContrastStretchImageChannel() no longer interpreted as Contast() by\n    MogrifyRegion() in PerlMagick.\n\n2008-12-28  6.4.8-3 Rick Mabry  <rick.mabry@anony...>\n  * Reverse argument and option in Throw*InvalidArgumentException()\n    macro for proper exception message.\n  * Recognize negative geometries for -shear and -annotate (.e.g. 45x-30).\n  * Fix Y shear angle for -shear option.\n\n2008-12-26  6.4.8-2 Cristy  <quetzlzacatenango@image...>\n  * Use GetImageArtifact() to retrieve -attenuate option value for +noise.\n  * Support reading FITS test files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12799).\n  * Replace input.ttf with the public domain Tuffy.ttf font.\n  * MagickNewImage() no longer faults when parameters are incorrect (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12817).\n  * Allocate strings returned by XGetResourceInstance() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12818).\n  * The -append gravity is relative to the container (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12821).\n\n2008-12-19  6.4.8-1 Cristy  <quetzlzacatenango@image...>\n  * Reference cache rather than acquiring when cloning an image.\n\n2008-12-19  6.4.8-0 Cashish Kulkarni <ashkulz@redif...>\n  * Cross-compilation failure using MinGW on Linux for ImageMagick trunk\n\n2008-12-19  6.4.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add -interword-spacing option to convert.\n  * Initialize the black channel when testing the CMY colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12685).\n  * remove calls to exit() in MagickWand (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12772).\n  * Validate -affine arguments.\n  * Accept -attenuate as an option for convert.\n  * Properly create RGBA image if colormapped image has transparency.\n  * Support X11 geometry like this: +-4+-4;  weird but X11 supports it.\n\n2008-12-17  6.4.7-10 Chris Madison  <madisonblu@gmail...>\n  * Fix off-by-one problem with -shear.\n  * Clone pixel cache method when cloning an image.\n\n2008-12-16  6.4.7-9 Anthony  <A.Thyssen@griffith...>\n  * Make \"-layers Coalesce\" work as it should.\n\n2008-12-16  6.4.7-9 Sam Fisher <fisher@image...?\n  * Support > 2GB TIFF under Windows.\n\n2008-12-12  6.4.7-8 mootools <help@mooto...>\n  * FormatMagickTime() checks to ensure the provided time is valid.\n\n2008-12-12  6.4.7-8 Cristy  <quetzlzacatenango@image...>\n  * Add -kerning option to convert.\n  * Remove halo effect for the -scale option.\n\n2008-12-11  6.4.7-7 Alan Wright  <alanwright.atex@google...>\n  * Fix a 1 byte overrun in Postscript coder.\n\n2008-12-10  6.4.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in ExpandFilenames().\n\n2008-12-09  6.4.7-5 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in LoadLocaleList().\n  * Fix small memory leak in GetProfilesFromResourceBlock().\n  * Don't forget to scale grayscale values when quantum min-is-white is set.\n\n2008-12-08  6.4.7-4 Cristy  <quetzlzacatenango@image...>\n  * Include delegate libraries in MagickCore-config script.\n\n2008-12-07  6.4.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix off-by-one error for -chop 0x50%.\n  * Performance improvement bilinear interpolation.\n\n2008-12-06  6.4.7-2 Cristy  <quetzlzacatenango@image...>\n  * Support absolute paths in the include directive within a configuration\n    file.\n\n2008-12-05  6.4.7-1 Chris Madison  <madisonblu@gmail...>\n  * Assume Log colorspace if DPX transfer is LogarithmicColorimetric.\n  * Another attempt at properly extracting the IPTC profile from a 8BIM\n    resource block.\n\n2008-12-04  6.4.7-1 Anthony  <A.Thyssen@griffith...>\n  * AppendImage() re-written to respect gravity properly!\n    Routine simplified to a single loop for both styles of append\n\n2008-12-03  6.4.6-9 Cristy  <quetzlzacatenango@image...>\n  * AppendImage() respects gravity.\n  * Protect against circular image list when cropping.\n  * The index variable must be long rather than unsigned long for the DCM\n    coder.\n\n2008-12-02  6.4.6-9 Cristy  <quetzlzacatenango@image...>\n  * Use ScaleQuantumToMap() to prevent fault in SetGrayscaleImage() when\n    quantum depth is 32.\n\n2008-12-01  6.4.6-8 Cristy  <quetzlzacatenango@image...>\n  * Global replaced accidentally renamed MagickGetImagePixelColor().\n\n2008-11-29  6.4.6-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed transient bug in the -white-threshold option.\n  * -extent x256+100+100 no longer returns an exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=7&t=12583).\n\n2008-11-27  6.4.6-5 Cristy  <quetzlzacatenango@image...>\n  * TIFF pad is relative to bits-per-sample (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12563).\n\n2008-11-27  6.4.6-5 Koshiji Masayuki  <kosiji.masayuki@da.mi...>\n  * Support GBR raw image files.\n\n2008-11-26  6.4.6-4 Cristy  <quetzlzacatenango@image...>\n  * DPX 10 bit YUV 4:2:2 are now processed properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12443).\n  * Default PDF compression to that of the image unless overwritten by\n    the -compress option.\n\n2008-11-25  6.4.6-3 Cristy  <quetzlzacatenango@image...>\n  * Numerous pixel cache improvements including embedded support for\n    OpenMP in a transparent manner.\n\n2008-11-20  6.4.6-2 Cristy  <quetzlzacatenango@image...>\n  * Transient bug in encipher / decipher operation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12540).\n\n2008-11-14  6.4.6-1 Cristy  <quetzlzacatenango@image...>\n  * MPC image files working again.\n  * coders/wmf.c/lite_font_stringwidth() returns string width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12528).\n\n2008-11-10  6.4.6-0 Cristy  <quetzlzacatenango@image...>\n  * Fix temporary file leak.\n\n2008-11-18  6.4.5-9 Koshiji Masayuki  <kosiji.masayuki@da.mi...>\n  * Fix bug for RGBO image @ line, plane and partition interlace.\n\n2008-11-18  6.4.5-9 Chris Madison  <madisonblu@gmail...>\n  * Deprecate pixel methods: AcquireImagePixels(), GetImagePixels(), etc.\n  * New pixel methods: GetVirtualPixels(), GetAuthenticPixels(), etc.\n\n2008-11-15  6.4.5-7 Alexander E. Patrakov <patrakov@gmail...>\n  * GPS and multivalued EXIF properties support\n\n2008-11-14  6.4.5-6 Manish Aggarwal <manish@circu...>\n  * Add TransparentPaintImageChroma() to MagickCore and transparentChroma()\n    to Magick++.\n\n2008-11-10  6.4.5-6 Cristy  <quetzlzacatenango@image...>\n  * Correct DPX frame position property label (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12440).\n  * Textures are no longer painted as the background color.\n  * Update both fields of an EXIF resolution.\n  * Support query-font-metrics MSL tag.\n\n2008-11-01  6.4.5-4 Cristy  <quetzlzacatenango@image...>\n  * Do not set image colorspace for the MSL modulate tag.\n\n2008-11-01  6.4.5-3 Cristy  <quetzlzacatenango@image...>\n  * Off by one error when computing affine in DrawAffineImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12391.\n\n2008-10-30  6.4.5-2 Cristy  <quetzlzacatenango@image...>\n  * Fixed local adaptive thresholding  when using an offset (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12371.\n  * Set SetImagePixels() rather than SyncImagePixelCache() to update\n    the pixel cache morphology.\n\n2008-10-26  6.4.5-1 Cristy  <quetzlzacatenango@image...>\n  * Set explicit image format for BlobToImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12340).\n  * p_thread_t is an aggregate under MinGW.\n\n2008-10-20  6.4.5-0 Cristy  <quetzlzacatenango@image...>\n  * pthread_t can be aggregate so stop treating it like its atomic.\n  * default the WPG image size to 1 top avoid \"no pixels defined in cache\"\n    exceptions.\n\n2008-10-17  6.4.4-8 Anthony  <A.Thyssen@griffith...>\n  * slight modification of the added \"radial-gradient:\" image generator\n    so the radius goes to an edge rather than the corner, allowing more user\n    control based on image size.\n  * fix -raise N to mean -raise NxN\n\n2008-10-15  6.4.4-8 Cristy  <quetzlzacatenango@image...>\n  * Add support for inline images.\n\n2008-10-10  6.4.4-7 Cristy  <quetzlzacatenango@image...>\n  * MinGW supports both Posix threads and Windows critical sections.\n\n2008-10-06  6.4.4-5 Cristy  <quetzlzacatenango@image...>\n  * pthread_self() can be an aggregate value.\n  * Scale pixel quantum to match PNG tRNS range (i.e. 0-255).\n\n2008-10-06  6.4.4-3 Cristy  <quetzlzacatenango@image...>\n  * Set sentinel byte for MVG coder.\n  * fx:standard_deviation returns standard deviation now instead of mean.\n\n2008-10-01  6.4.4-1 Florent Monnier  <monnier.florent@gmail...>\n  * Support radial gradients in DrawGradientImage().\n\n2008-09-26  6.4.4-1 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak when XMP profile is corrupt.\n  * Support filename references (e.g. convert image-%d.jpg[1-5] ...).\n\n2008-09-25  6.4.4-0 Cristy  <quetzlzacatenango@image...>\n  * Use -remap rather than -affinity.\n  * Don't unregister a module for an image coder signature exception.\n  * Don't assume a monochrome image is colormapped.\n\n2008-09-25  6.4.4-0 Anthony <A.Thyssen@griffith...>\n  * Attempt to fix three image \"composite -displace\" while also allowing use\n    of separate X, Y grayscale displacement maps, or a merged X=red Y=green\n    (later transparency mask will also be added) as discussed in IM Examples,\n    'distortion maps', but for -displace.\n\n2008-09-24  6.4.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel cache race condition.\n\n2008-09-23  6.4.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed an OTB coder bug (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12119).\n\n2008-09-23  6.4.3-8 Peter Fales <psfales@alcat...>\n  * Add NULL terminator to options list to in MontageImageCommand().\n\n2008-09-23  6.4.3-8 Anthony <A.Thyssen@griffith...>\n  * Added -layers TrimBounds  which will adjust the offsets and canvas bounds\n    to fit the current sequence of layered/animated images. The images\n    themselves are not modified only the 'page' meta-data.  As a side-effect\n    all offsets will become positive, with a minimal canvas width/height.\n\n2008-09-22  6.4.3-8 Cristy  <quetzlzacatenango@image...>\n  * Define _FILE_OFFSET_BITS from MAGICKCORE_FILE_OFFSET_BITS.\n\n2008-09-10  6.4.3-7 Anthony <A.Thyssen@griffith...>\n  * String Memory leak from InterpretImageProperties() in \"annotate\"\n    for Command line handling in mogrify.c\n  * Allow percent escapes in both -sparse-color and -distort argument strings.\n  * Fix -alpha to allow Set, Copy, and Extract from command line\n  * Fix -alpha Set so it only clears the alpha when it was previously off\n  * Changed 'AllChannels' to be just the 'real' channels (including K).\n  * Special handling if  +level-colors is given one color, and no separator.\n  * Fix 'matte' flag in DisposeImages() (for -layer dispose)\n\n2008-09-01  6.4.3-7 Cristy  <quetzlzacatenango@image...>\n  * Fix -interpolate / -compose settings.\n  * No need to specify -endian for native floating point format.\n  * Remove small memory leak when cloning image properties (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11981).\n  * The scan delegate requires a device name, not a symbolic link.\n  * Report alpha instead of opacity for the TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12002).\n  * Add channel support to -motion-blur.\n  * Set the SVG affine matrix *before* we compute the scale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12030).\n  * Rely on 'omp critical' in the rare case where OpenMP is enabled but\n    ImageMagick distribution is built without thread support.\n  * Return the correct number of unique colors for colormapped image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12055).\n  * SVG depends on MagickWand for parallel make (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12099).\n\n2008-09-02 6.4.3-7\n  * Addition of 'BarrelInverse' Distortion\n\n2008-08-27  6.4.3-6 Cristy  <quetzlzacatenango@image...>\n  * Extract / embed namespace for JPEG XMP profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11832).\n  * Deprecate -map and replace with -affinity which supports dither methods.\n  * Set image depth when -depth is fired.\n  * Fix small memory leak in TIFF coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11968).\n\n2008-08-24  6.4.3-5 Cristy  <quetzlzacatenango@image...>\n  * Parallelize the colorspace transforms.\n  * Honor gravity for -extent option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11944).\n\n2008-08-22  6.4.3-3 Cristy  <quetzlzacatenango@image...>\n  * Fixed a memory leak in the TransparentPaintImage() method.\n\n2008-08-20  6.4.3-2 Cristy  <quetzlzacatenango@image...>\n  * Treat -compose as a setting.\n  * Check for depth == 0 in GetQuantumScale() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11921).\n  * Fix CIN coder scanline length (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11922).\n\n2008-08-20  6.4.3-1 Cristy  <quetzlzacatenango@image...>\n  * Add $(MAGICKWAND_LIBS) dependency to the PerlMagick Makefile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11908).\n  * Fix configure script to configure the JBIG delegate library (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11907).\n  * Error in indexed PNG output if number of colors <= 16 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11905).\n\n2008-08-18  6.4.3-0 Cristy  <quetzlzacatenango@image...>\n  * Always reinterpret %[fx:] properties.\n  * Composite based on the composite image compose operator.\n\n2008-08-14  6.4.2-10 Cristy  <quetzlzacatenango@image...>\n  * Add --coder-path and --filter-path options to MagickCore-config to\n    support the Magick Coder and Image Filter kits.\n\n2008-08-17  6.4.2-9 Anthony <anthony@griffith...>\n  * -sparse-color option completed with initial set of methods.\n  * -distort Barrel arguments expanded.\n\n2008-08-14  6.4.2-9 Cristy  <quetzlzacatenango@image...>\n  * The -draw option no longer returns an error when for # like .6 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11879).\n\n2008-08-14  6.4.2-9 Cristy  <quetzlzacatenango@image...>\n  * New dithering selection option, -dither Floyd-Steinberg or\n    -dither Riemersma.\n\n2008-08-10  6.4.2-8 Anthony <anthony@griffith...>\n  * Added new distort \"Polar\" and \"DePolar\" due to Forum Discussions\n\n2008-08-07  6.4.2-8 Cristy  <quetzlzacatenango@image...>\n  * Change MPEG delegate from mpeg2decode/mpeg2encode to ffmpeg (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11827).\n  * Extract embedded XMP and EXIF profiles froma Photoshop resource block.\n  * Support -compose option in the compare program.\n\n2008-08-04  6.4.2-7 Cristy  <quetzlzacatenango@image...>\n  * Support -fx scientific-notation (e.g. '2.0*3.81469e-06').\n  * Substitute DistortImage() with 'AffineProjectionDistortion' for\n    the older DrawAffineImage() in AffineTransformImage().\n  * Apply Sam Hocevar's patch to replace  Hilbert-Peano curve dithering with\n    Floyd Steinberg.\n  * Added -virtual-pixel method VerticalTile as a complement to HorizontalTile\n\n2008-08-02  6.4.2-6 Anthony <anthony@griffith...>\n  * Added -virtual-pixel method HorizontalTile suitable for generating 360\n    degree Arcs and Polar Distorts.\n\n2008-07-31  6.4.2-6 Cristy  <quetzlzacatenango@image...>\n  * Patch -fx to properly recognize maxima and minima.\n  * Add channel specifier to -fx depth, mean, maxima, minima, and\n    standard_deviation (e.g. depth.r).\n  * Properly append .magick to the USERPROFILES path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11806).\n\n2008-07-30  6.4.2-6 Anthony <anthony@griffith...>\n  * Added a  \"-set option:distort:scale\"  which scales the output 'view'\n    by the amount given.  This is directly useful for doing 'super-sampled'\n    distorts, just set this, the scale the result back to a normal size.\n\n2008-07-27  6.4.2-5 Anthony <anthony@griffith...>\n  * Rewrite on coefficient handling for DistortImages so allow for generation\n    by other operators (SparseColor), and addition of verbose output of\n    equivalent -fx functions for DistortImages to report of the internal\n    coefficients that was calculated, and who they are used.\n  * Initial implementation of SparseColor for interpolated gradients from\n    sparsely separated points of color (or possibly other forms of arguments)\n  * New distortion Barrel as defined by Helmut Dersch options A,B,C,D\n    on his web page  http://www.all-in-one.ee/~dersch/barrel/barrel.html\n    And as developed by Fred WeinHaus in his PinBarrel script\n\n2008-07-20  6.4.2-5 Cristy  <quetzlzacatenango@image...>\n  * Certain corrupt GIF images no longer hang (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11723).\n  * Read more than one image (if they exist) from DJVU image files.\n  * Don't set image depth in histogram coder (references\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11752).\n\n2008-07-17  6.4.2-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed cache nexus threading problem to avoid spurious assertions when\n    calling the DistortImage() method.\n\n2008-07-17  6.4.2-4 Anthony <anthony@griffith...>\n  * New distortion  Shepards which provide semi-localized distorts of control\n    points within an image, as first developed for IM by Frew Weinhaus in his\n    ShapeMorph script.   http://www.fmwconcepts.com/imagemagick/shapemorph/\n    It's almost like taffy pulling!\n\n2008-07-12  6.4.2-2 Anthony <anthony@griffith...>\n  * Separate coefficient calculation from DistortImages (future development)\n  * Perspective and Bilinear Distortions fallback to Affine\n    when less than 4 point pairs are provided.\n  * Affine Distortion now handles 2 point pairs (SRT of a single line)\n    and a simple translation if only a single point pair is provided.\n  * Added 'verbose' output of some of the distortion equations generated\n  * Initial addition of polynomal distortion (incomplete - not working yet)\n\n2008-06-29  6.4.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add log2 and round as -fx operators.\n  * Add log and round as -evaluate operator.\n  * Add -deskew option to straighten an image.\n\n2008-06-22  6.4.2-1 Cristy  <quetzlzacatenango@image...>\n  * Use the source image interpolation method when drawing an affine image.\n\n2008-06-24  6.4.2-1 Anthony <anthony@griffith...>\n  * Added new operator  +/-level-colors which will 'level' images based\n    on colors to use for the black and white points. This lets to adjust\n    the image in terms of mapping the given colors from/to black and white\n    respectively.\n\n2008-06-23  6.4.2-0 Christian Lackas <christian@lacka...>\n  * Fix a problem with calling mpeg2encode with parameters (%o/%i) in wrong\n    order.\n\n2008-06-22  6.4.2-0 Cristy  <quetzlzacatenango@image...>\n  * Refactor additional ImageMagick algorithms for OpenMP support.\n\n2008-06-25  6.4.1-9 Cristy  <quetzlzacatenango@image...>\n  * Add pow as an -evaluate operation, using normalized values\n\n2008-06-18  6.4.1-9 Anthony <anthony@griffith...>\n  * Added a  LevelizeImageChannels() which is similar to LevelImageChannels()\n    Function maps black and white values to the given level values.\n    Rather than mapping the given level values to black and white.\n    Basically a 'reverse-level' function, with different input args.\n  * Set  +level  or a '!' flag in -level or LevelImage() to call\n    the new 'reverse-level' function LevelizeImageChannels().\n  * More work on IsMagickColorSimilar() to fix relationship between\n    transparent-black and opaque-black, which was matched as 'similar'.\n    Also attempts to fix 'K' channel handling for CMYK colorspace.\n    More work on this to come.\n\n2008-06-25  6.4.1-9 Cristy  <quetzlzacatenango@image...>\n  * The TXT format correctly reports alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11478).\n  * MONOTCHROME1 Dicom images are not longer inverted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11492).\n\n2008-06-13  6.4.1-8 Anthony <anthony@griffith...>\n  * Fixed IsMagickColorSimilar() as used by -opaque and -transparent\n    so as to understand that the Hue Channel is cyclic by nature\n\n2008-06-08  6.4.1-8 Cristy  <quetzlzacatenango@image...>\n  * The -sketch option is working again (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11454).\n\n2008-06-08  6.4.1-7 Cristy  <quetzlzacatenango@image...>\n  * More algorithms refactored to support a threaded cache view.\n  * EPS2 output only 1/3 of image when using LZW or rle compress (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3).\n  * ISO C++ 1998 does not support 'long long' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11405).\n  * Patch GetMagickMemoryHandlers() to return the properly return the memory\n    handler addresses.\n  * Generate histogram comment if # unique colors exceed 1024 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11434).\n\n2008-06-03  6.4.1-6 Marton Bokor  <marton.bokor@gfthu....>\n  * Reading EMF files containing non-ascii characters no longer fails for\n          UTF8 encoded paths on Windows XP.\n\n2008-06-03  6.4.1-6 Cristy  <quetzlzacatenango@image...>\n  * The -colorspace option is an operator, not a setting.\n\n2008-05-31  6.4.1-5 rsnel <rik@snel....>\n  * gif.c misreads Gifs in which LZW codes are split across three datablocks.\n\n2008-05-31  6.4.1-4 Matthew Clark <mclark@gorge...>\n  * Patches to the JPEG and DCM coders to fix a few problems reading\n    certain DCM image types.\n\n2008-05-15  6.4.1-4 Cristy  <quetzlzacatenango@image...>\n  * Interpreting the -set option is no longer delayed.\n  * Add AcquireCacheViews() and DestroyCachewViews() to the API.\n  * Call DrawAffineImage() instead of CompositeImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11288).\n  * Throw exception for TIFF compression not support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11289).\n  * The +opaque option now recognizes its required argument (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11298).\n  * The -background and -virtual-pixel settings are now applied correctly\n    across parenthesis.\n  * Only reset the exception signature if the relinquish memory is MagickTrue.\n  * Correct recolor equation for computing opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11346).\n  * Set midpoint when scaling JP2 images.\n  * Semaphores must be passed by reference when destroyed for reliable thread\n    locks.\n  * Updated Matlab coder (thanks to Jaroslav Fojtik).\n\n2008-05-13  6.4.1-3 Cristy  <quetzlzacatenango@image...>\n  * MagickGetResource(): resources are MagickSizeType not unsigned long.\n\n2008-05-11  6.4.1-2 Cristy  <quetzlzacatenango@image...>\n  * Import: properly handle a hierarchy of subwindows under X11.\n  * Refactor quantum pixel processor to improve ease of use and speed.\n\n2008-05-09  6.4.1-2 Leonardo de Paula Rosa Piga <lpiga@terra...>\n  * OpenMP patch for sepia-tone effect.\n\n2008-05-08  6.4.1-2 Bruno Cardoso Lopes <bruno.cardoso@gmail...>\n  * OpenMP patch for NormalizeImage() & TintImage()\n\n2008-05-06  6.4.1-2 <cristiannomartins@gmail...>\n  * OpenMP patch for GetImageChannelDepth().\n  * Set depth to 32 when saving MIFF HDRI image files.\n\n2008-05-05  6.4.1-2 <joao.vita@gmail...>\n  * OpenMP patch for OilPaintImage Function\n\n2008-05-05  6.4.1-2 Sean Patrick Burke  <seanburk@gmail...>\n  * Update IPLab coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=11200).\n\n2008-05-02  6.4.1-1 Cristy  <quetzlzacatenango@image...>\n  * Return correct result for -fx luminence.\n  * Restore missing break so that PGM images remain PGM.\n  * Speed up the processing of ASCII PNM files.\n  * Return the correct number of MNG images for PingImage().\n\n2008-05-01  6.4.1-0 Cristy  <quetzlzacatenango@image...>\n  * Remove C++ style comments from source.\n  * Center motion blur kernel.\n  * Reenable dithering for -monochrome option.\n\n2008-04-24  6.4.0-11 Cristy  <quetzlzacatenango@image...>\n  * For color reduction, use maximum tree depth if image has 1024 or less\n    unique colors.\n  * Use a uniform convolution filter for motion blur (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11122).\n  * Add 'mean' and 'std' symbols to the Fx expression parser.\n\n2008-04-20  6.4.0-10 Chris Madison  <madisonblu@hotma...>\n  * Updated to the latest autoconf/automake/libtool scripts.\n  * Default to HSL colorspace when modulating (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=11073).\n  * The -regard-warnings option properly returns a program status of 1 if and\n    only if a warning or error exception is thrown.\n  * Report 'no clip path defined' exception for -clip-path option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11098).\n\n2008-04-16  6.4.0-8 Cristy  <quetzlzacatenango@image...>\n  * Distinguish between pre and post processing of image list options.\n  * Return MagickTrue if InvokeDynamicImageFilter() does not generate an\n    exception (reference\n                http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=11065).\n\n2008-04-16  6.4.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Instead of masking the PNG tRNS values when reducing from 16-bit,\n    set image->matte to MagickFalse and emit a warning.  This will produce\n    behavior similar to that of libpng-1.2.27 (and libpng-1.2.19 and earlier).\n\n2008-04-12  6.4.0-7 Cristy  <quetzlzacatenango@image...>\n  * Fix fault for animate -window root image.gif.\n  * Use GetImagePixels() rather than SetImagePixels() when making multiple\n    passes and setting image pixels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11022).\n\n2008-04-10  6.4.0-6 Cristy  <quetzlzacatenango@image...>\n  * Compile error in coders/avi.c when JPEG delegate library is unavailable.\n\n2008-04-09  6.4.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Mask the PNG tRNS values when reducing from 16-bit, in accordance with\n    the PNG specification, instead of scaling them.\n\n2008-04-09  6.4.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised png.c to avoid saving unknown chunk types that will never\n    be used later.  This prevents the vulnerability described in\n    CVE-2008-1382, with respect to all unknown chunks except vpAg.\n    To handle an invalid, zero-length vpAg chunk properly will require\n    libpng-1.2.27 or later.\n\n2008-04-04  6.4.0-5 Cristy  <quetzlzacatenango@image...>\n  * Use mplayer delegate if ImageMagick does not grok AVI op code.\n  * Use proper rounding for the -fx intensity expression.\n\n2008-03-26  6.4.0-4 Cristy  <quetzlzacatenango@image...>\n  * Fix +swap option so it no longer throws an assertion.\n  * Return correct min/max for grayscale JPEG images (e.g. -format %[min]).\n\n2008-03-26  6.4.0-1 Cristy  <quetzlzacatenango@image...>\n * Rewrote patch so that writing pyramid TIFF images no longer fails if a\n   tile size is specified (e.g. ptif:image.tif[128x128]).\n * Malformed use of caption no longer consumes memory (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10914).\n * Don't run Ghostscript twice (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10922).\n\n2008-03-21  6.4.0-0 Cristy  <quetzlzacatenango@image...>\n  * SpreadImage() no longer introduces noise into the resulting image (reference\n                http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10892).\n  * Properly handle min-is-white TIFF gray scale images.\n  * Use CompositeImage() instead of DrawAffineImage() if the affine expansion\n    factor is 1.0.\n\n2008-03-20  6.3.9-10 Cristy  <quetzlzacatenango@image...>\n  * Writing pyramid TIFF images no longer fails if a tile size is specified\n    (e.g. ptif:image.tif[128x128]).\n  * Reset page geometry when interactively cropping an image with the display\n    program.\n\n2008-03-18  6.3.9-9 Cristy  <quetzlzacatenango@image...>\n  * With a single swap argument should swap the image with the *last* image.\n\n2008-03-16  6.3.9-8 Cristy  <quetzlzacatenango@image...>\n  * Make sure we don't sync a blob after it has been closed.\n\n2008-03-14  6.3.9-7 Cristy  <quetzlzacatenango@image...>\n  * Patch mpeg:encode delegate to properly produce an MPEG image sequence.\n\n2008-03-11  6.3.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support both GTK and CAIRO interfaces to RSVG (reference\n    ttp://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=10802).\n  * Display colormapped PNG images with alpha properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10819).\n\n2008-03-09  6.3.9-5 Cristy  <quetzlzacatenango@image...>\n  * Define inline to _magickcore_inline (to satisfy HP's aCC compiler).\n\n2008-03-08  6.3.9-4 Cristy  <quetzlzacatenango@image...>\n  * The rsvg delegate library depends on cairo-svg.\n  * Account for min-is-white 8-bit gray TIFF images.\n\n2008-02-29  6.3.9-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for the Postable Document Archive Format.\n  * Add support for Braille images.\n  * Add support for DDS images (contributed by Bianca van Schaik).\n  * Add GetImageAlphaChannel() method.\n  * PSD clipping paths are once again recognized.\n\n2008-02-24  6.3.9-1 Cristy  <quetzlzacatenango@image...>\n  * Return the actual image format for HTTP: or FTP: format (reference\n        http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10715).\n  * Fix so image.quantize(true) returns error as expected (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10735).\n\n2008-02-20  6.3.9-0 Cristy  <quetzlzacatenango@image...>\n  * Fixed a small memory leak (8 bytes) in TransformImages().\n  * Render to Cairo surface rather than a GDK buffer when rendering SVG.\n  * Identify now reports both actual and reported image depths (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10716).\n\n2008-02-17  6.3.8-10 Cristy  <quetzlzacatenango@image...>\n  * Speed up converting large PDF/PS images when only selecting a few pages\n    (e.g. pdffile.pdf[195-199]).\n  * Deprecate HSLTransform() and TransformHSL().\n\n2008-02-16  6.3.8-9 Cristy  <quetzlzacatenango@image...>\n  * Fix Magick++-config script to reflect the MagickWand / MagickCore\n    dependencies.\n\n2008-02-14  6.3.8-7 Cristy  <quetzlzacatenango@image...>\n  * Promote colormapped to truecolor images when enciphering.\n\n2008-02-08  6.3.8-6 Cristy  <quetzlzacatenango@image...>\n  * Add EncipherImage() / DecipherImage() methods.\n  * Add -encipher / -decipher options to the command-line utilities.\n\n2008-02-03  6.3.8-5 Cristy  <quetzlzacatenango@image...>\n  * New Unix/Linux refactoring (should be transparent since changes are\n    reflected in Magick-config and ImageMagick.pc pkg-config files):\n      /usr/local/include => /usr/local/include/ImageMagick\n      libMagick => libMagickCore\n      libWand => libMagickWand\n      Magick-config (deprecated) => MagickCore-config\n      Wand-config (deprecated) => MagickWand-config\n      Add Magick++-config, MagickCore.pc, MagickWand.pc, Magick++.pc\n\n2008-01-28  6.3.8-3 Cristy  <quetzlzacatenango@image...>\n  * Liquid rescale limits the final size to twice the original size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10536).\n  * Read EXIF data in TIFF images; writing is pending until we can figure out\n    how to use the libtiff delegate library to write EXIF data.\n\n2008-01-24  6.3.8-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for liquid rescaling (e.g. -liquid-rescale).\n  * Support a ^ meta character in an image geometry (.e.g\n    convert 640x480.png -resize 240^ returns a 320x240 result).\n\n2008-01-20  6.3.8-1 Cristy  <quetzlzacatenango@image...>\n  * Fix transient bug where \"identify -format '%w;%[exif:Model]'\" failed to\n    return camera model number.\n\n2008-01-14  6.3.8-0 Cristy  <quetzlzacatenango@image...>\n  * Monochome EPS3 images are no longer corrupt (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10422).\n  * Eliminate memory corruption with broken PICT image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10447).\n  * Return a Grayscale colorspace for grayscale DPX image (previously\n    returned Log colorspace).\n  * Fix -g option for PCL6 support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10462).\n\n2008-01-08  6.3.7-10 Cristy  <quetzlzacatenango@image...>\n  * Only read ICON alpha mask if BPP is <= 16.\n  * Add support for +opaque and +transparent (requested by Anthony).\n  * Throw an exception *before* we call wmf_api_destroy() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10420).\n\n2008-01-01  6.3.7-9 Cristy  <quetzlzacatenango@image...>\n  * Use explicit format specifier to render transparent Adobe Illustrator\n    files (i.e. convert ai:image.ai image.png).\n  * Set RSVG base URI (patch provided by tsdineen).\n\n2007-12-20  6.3.7-7 Cristy  <quetzlzacatenango@image...>\n  * `Magick-config --version` returns Q16 instead of\n    Q@MAGICKCORE_QUANTUM_DEPTH@.\n  * Permit commas in numbers in certain locales (e.g. german +100,000).\n\n2007-12-13  6.3.7-5 Cristy  <quetzlzacatenango@image...>\n  * Added an exception reason to BlobToImage() in the event an image has no\n    magic number and neither the image magick or filename is set.\n  * Do not pass PhotoYCC data thru gamma-corrected lookup-table.\n  * Fix bug in GetEXIFProperty() (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10300).\n\n2007-12-12  6.3.7-4 Cristy  <quetzlzacatenango@image...>\n  * Adding comments to your image is now possible with the display program.\n\n2007-12-09  6.3.7-3 Anthony <anthony@griffith...>\n  * Adjusted -clut multiplyer for correct handling of\n    \"-interpolation Integer\" in color lookup.\n\n2007-12-01  6.3.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix 'insufficient image data' for DCM format (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10227).\n  * Force a colormapped image if Palm bits-per-pixel < 16.\n  * Fix multiple problems with Palm Data Base reader (patch from\n    1tms@gmx.d...).\n  * Do not exit after first image with the display --immutable option.\n  * Update autoconf/automake/libtool configuration files.\n  * Add support for resource limit units (e.g. -limit memory 16mb).\n  * Return original image if gaussian blur sigma is 0.0.\n  * Colormapped multi-image PDF's are no longer corrupt (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10258).\n\n2007-11-27  6.3.7-2 Anthony <anthony@griffith...>\n  * Finalisation of new resize filters, \"Lagrange\" self-windowing filter\n    now adjusts automatically with different support window size.\n  * Added \"Bohman\" (another 2'rd order cosine function) and \"Bartlett\"\n    (triangluar) resize windowing filters.\n  * Adjusted -clut to use a grayscale image (with no alpha) to select colors\n    from the Lookup Table image.\n\n2007-11-26  6.3.7-2 Cristy  <quetzlzacatenango@image...>\n  * Not all DCM tags were being saved as image attributes (patch provided by\n    jcupitt@gmail...).\n  * Normalize pixel values when quantum format is floating-point.\n  * Initialize the pixel sum to zero when averaging image pixels.\n\n2007-11-23  6.3.7-1 Anthony <anthony@griffith...>\n  * Bug fix in height calculation for -layers merge operation\n\n2007-11-02  6.3.7-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for SCT grayscale images.\n  * Fixed transparency bug for the ICO image format.\n  * Fixed small memory leak in the caption and label coders.\n  * Fixed -threshold option to return all white for -threshold 0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10126).\n\n2007-11-06  6.3.6-10 Chris Madison  <madisonblu@hotma...>\n  * Corrected CGM delegate command in config/delegate.xml.\n\n2007-11-05  6.3.6-9 Chris Madison  <madisonblu@hotma...>\n  * Reclassified X server open error from fatal to non-fatal.\n  * New SetImageAlphaChannel() method to activate, deactivate, reset, or\n    set the image alpha channel.\n  * Patch for Scanalytics IPLab image format for non 8-bit images\n    (contributed by Sean Burke).\n\n2007-11-04  6.3.6-8 Chris Madison  <madisonblu@hotma...>\n  * Remove ctrl-M characters on in various source files.\n  * Fix signature for Magick++ averageImages() regression tests for HDRI.\n  * Only invoke PerlMagick x11 regression test if DISPLAY variable is set.\n\n2007-11-03  6.3.6-7 Chris Madison  <madisonblu@hotma...>\n  * MAGICK_ERX_SRCS should be MAGICK_EXR_SRCS in coders/Makefile.am.\n\n2007-11-02  6.3.6-6 Cristy  <quetzlzacatenango@image...>\n  * Upgrade to FPX version libfpx-1.2.0.14 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10041).\n  * Modules are searched first in the directories specified by the environment\n    variables, and then -- if the desired module is not found -- in the\n    compiled-in path.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10039).\n\n2007-11-01  6.3.6-5 Cristy  <quetzlzacatenango@image...>\n  * Update FPX regression test reference images.\n  * Fixed Magick++ compile error for Sun Studio 10 compiler.\n\n2007-10-25  6.3.6-4 Cristy  <quetzlzacatenango@image...>\n  * The -equalize option now respects the -channel option.\n\n2007-10-23  6.3.6-4 Anthony <anthony@griffith...>\n  * Additional Filters:  Welsh, Parzen, Lagrangian\n  * Addition of Cubic filter B,C controls\n  * 'verbose' filter plotting output using  -define \"filter:verbose\"\n\n2007-10-20  6.3.6-3 Anthony <anthony@griffith...>\n  * Further expansion and handling of filters with expert options.\n    -filter selects from a table of standard filter settings, while\n    expert options allow complete selection of filter, windowing, support\n    and blurring options.  Includes automatic switch from Sinc to Bessel\n    for operators using 2-dimensional cylindrical filter, rather than\n    two pass 1-dimensional orthogonal filters.\n\n2007-10-14  6.3.6-3 Cristy  <quetzlzacatenango@image...>\n  * Obsolete -support (set filter blur factor)\n  * Expansion to add -set/define filter options\n\n2007-10-12  6.3.6-2 Anthony <anthony@griffith...>\n  * Least Squares coordinate handling added for -distort methods Affine,\n    Perspective, Bilinear.   This allows for more than the minimal number of\n    coordinates to be used to 'fit' a distortion function to an image.\n    This addition will allow the use of image registration to generate\n    panorama overviews and better geographical coordinate correction.\n  * Consolidated the similar methods FlattenImage() and MosaicImage()\n    into a new layers function MergeImageLayers() method, adding 'flatten'\n    and 'mosaic' layer methods.\n  * Addition of another similar layers method 'merge' which 'unlocks' the\n    normal flatten/mosaic layer merger from the origin, The resulting image\n    will have a virtual canvas of minimal size with an offset. Also images\n    with negative offsets will not be clipped by the 'merge' form of the\n    command.  This was created for better layering of distorted images, such\n    as panorama overlays.\n  * Bug fix in handling transparency for EWA resampling.\n  * Access to Resize Filter Functions from resize.c (for resample.c)\n    with possible future filter sources... Acquire/Destory/Call ResizeFilter()\n  * All resize filters added to resampling, but filter handling is incomplete.\n\n2007-10-05  6.3.6-2 Cristy  <quetzlzacatenango@image...>\n  * The box filter no longer produces a black grid when resizing an image\n    under Mac OS X.\n  * Respect cropbox for PDF with a subimage specification (e.g.\n        image.pdf[1-3]).\n  * Detect proper PDF bounding box when offsets are negative.\n\n2007-10-02  6.3.6-1 Cristy  <quetzlzacatenango@image...>\n  * Speed up the Fx interpreter.\n  * Use ULL not ui64 for MinGW 64-bit constants.\n  * Call SyncCacheView() instead of SyncImagePixels() in WaveImage().\n  * Close all references to a pixel cache on disk before removing the temporary\n          file as required under Windows.\n\n2007-09-29  6.3.6-0 Anthony <anthony@griffith...>\n  * Added Scaling 'derivatives' to -distort Arc, so image arcing is now\n    sharp and clear as you approach the center of the distort.\n  * Added  \" -set option:distort:viewport 'geometry' \" special option\n    that can be used to override the output image size and offset.\n  * Fixed experimental use of -filter and -support in Resampling (more later).\n  * Changed order for coordinate arguments in -distort (for later leastsq\n    multiple coordinate distortion function fitting)\n\n2007-09-22  6.3.6-0 Cristy  <quetzlzacatenango@image...>\n  * Check the API version and quantum depth before loading a coder module or\n          image filter (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9780).\n  * Add exception to the image filter signature.\n  * Get the execution path under Mac OS X.\n  * TIFFTAG_STRIPBYTECOUNTS requires a uint32 pointer (magick/compress.c).\n  * Fixed memory leak in CloneString() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9763).\n  * Set S_IRUSR | S_IWUSR | S_IRGRP mode when writing a file in\n    CopyDelegateFile().\n\n2007-09-18  6.3.5-9 Anthony <anthony@griffith...>\n  * Bug fix for +distort in Perspective, also effected PerspectiveProjection\n\n2007-09-17  6.3.5-10 Cristy  <quetzlzacatenango@image...>\n  * Replace all InterpolatePixelColor() calls to use the ResamplePixelColor()\n    method instead.\n  * Map the display program pan icon window for each oversized image.\n  * The ufraw delegate does not like quotes around the output filename.\n  * Adjust the sensitivity of a few PerlMagick tests to pass the validation on\n    a 64-bit FreeBSD system.\n  * The -level option now works properly for colormapped images.\n  * Allow Extrapolated blending of images using -blend\n       http://netpbm.sourceforge.net/doc/extendedopacity.html\n\n2007-09-12  6.3.5-9 Anthony <anthony@griffith...>\n  * Major Addition,  Area Resampling Functions, (scaled interpolation)\n    for pixel lookup in Distortion functions.  This improves the look in\n    areas of minification enormously, especially in situations of infinite\n    tiling and horizon views.  All virtual pixel methods have been handled\n    to minimise computation time involved with area resampling.  To use the\n    new function distortions need to be able to determine scaling vectors\n    (distortion function derivatives) for correct working.  All\n    -distort methods, except Arc, uses scaled area resampling.\n  * Improvements to perspective distort method, to include the correct\n    differentiation between the 'ground' on which the image lies, and the\n    'sky', the color of which can be set using the -mattecolor setting\n    (as the distortion invalid pixel color). Background color is retains\n    for surrounding ground areas. The horizon is also correct anti-aliased\n    and transparent colors are also allowed, allowing you to add backdrops\n    of gradients and patterns.\n\n2007-09-04  6.3.5-9 Cristy  <quetzlzacatenango@image...>\n  * Read/Write Scanalytics IPLab image format (contributed by Sean Burke).\n  * Patched ReadBlobString() to fix a off-by-one vulnerability (alert from\n    iDefense).\n  * Patched ReadDIBImage() to fix a sign extension vulnerability (alert from\n    iDefense).\n  * Patched AllocateImageColormap() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDCMImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDIBImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadXBMImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDCMImage() to fix an denial of service vulnerability\n    (alert from iDefense).\n  * Patched ReadXCFImage() to fix an denial of service vulnerability\n    (alert from iDefense).\n  * If image size changes, don't trust DPX orientation attributes.\n\n2007-09-04  6.3.5-9 Gozer404\n  * Add French to the messaging system (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=9601).\n  * Add -fopenmp to MAGICK_PCFLAGS (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9608).\n\n2007-08-14  6.3.5-7 Cristy  <quetzlzacatenango@image...>\n  * Add -alpha {activate,deactivate,reset} option to activate, deactivate, or\n    reset the alpha channel.\n  * Render proper image labels for VID coder.\n  * Resolved a conflict for the -list option.  Use -list font to list\n          ImageMagick fonts and -list type to list image types.\n  * Catch any errors returned by pthread_mutex_init() (problem report\n    from devman@gmx-t...).\n  * TransformHSL() returns a proper hue component.\n  * Added -clut option and the ClutImage() method.\n  * Fix glyph memory leak in AnnotateImage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9523).\n  * Rename analyze.c to Analyze.c (reference\n    ttp://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9538).\n\n2007-08-07  6.3.5-6 Anthony  <anthony@griffith...>\n  * Enabled use of +distort to auto resize destination image to 'bestfit'\n    the distorted input image.  This also enabled the use of virtual canvas\n    offsets in source and destination images for most distortion methods.\n\n2007-08-05  6.3.5-6 Cristy  <quetzlzacatenango@image...>\n  * Remove atexit in Magick++ code to avoid possible client crash (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9270).\n\n2007-08-01  6.3.5-5 Cristy  <quetzlzacatenango@image...>\n  * Read/Write Scanalytics IPLab image format (contributed by Sean Burke).\n\n2007-07-30  6.3.5-5 Anthony  <anthony@griffith...>\n  * Added -distort arc.  This update also allows the destination image\n    size and offset to be set according to the specific distortion being\n    applied.\n\n2007-07-29  6.3.5-5 Cristy  <quetzlzacatenango@image...>\n  * Set the -polaroid border color with the -bordercolor option.\n\n2007-07-25  6.3.5-4 Cristy  <quetzlzacatenango@image...>\n  * Remove extraneous break statement so -type option properly sets the\n    image_info->type member (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9261).\n\n2007-07-21  6.3.5-4 Anthony  <anthony@griffith...>\n  * Allow the use of optional arguments in -distort SRT\n\n2007-06-29  6.3.5-0 Anthony  <anthony@griffith...>\n  * Initial addition of three Affine Distortions to -distort with the affine\n    mapping defined by the use of;  an Affine Matrix, Coordinates of Triangles,\n    or separate Scale-Rotate-Translate actions.\n\n2007-06-18  6.3.5-0 Cristy  <quetzlzacatenango@image...>\n  * Fix X11 font ascender.\n  * Add -distort option.\n  * Add random noise option (e.g. +noise random).\n  * Many internal algorithms are now threaded to take advantage of speed-ups\n    offered by the new dual and quad-core processor technologies.\n    and quad-core processor technology.\n  * Tiff images in the LAB colorspace are no longer identified as RGB\n    (reference http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9015).\n  * Update image color_profile and iptc_profile members in the JPEG coder\n    (reference http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9063);\n\n2007-06-13  6.3.4-10 Cristy  <quetzlzacatenango@image...>\n  * Fix composite mask bug (reference\n    http://www.imagemagick.org/Usage/bugs/composite_mask/).\n  * Speed up GetPixelOpacity() method (patch from seth@price...).\n  * Set icon image width/height before allocating the image colormap.\n  * Remove Photoshop string segment from JPEG profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9006).\n\n2007-06-11  6.3.4-9 Cristy  <quetzlzacatenango@image...>\n  * Converting a jpg to pdf is creating an empty pdf object (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8954).\n  * Respect the '-set type:hinting off option' (bug report from Richard\n    Jones).\n  * WritePSDImage vulnerable to exploitable heap corruption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8967).\n\n2007-06-09  6.3.4-8 Cristy  <quetzlzacatenango@image...>\n  * SetMagickRegistry() post-increment the value 'id' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8944).\n\n2007-06-02  6.3.4-6 Cristy  <quetzlzacatenango@image...>\n  * Read/write 10 & 12-bit packed DPX images.\n  * Reduce stack requirements for messaging system.\n  * Small memory leak for raw profiles in the PNG coder.\n\n2007-06-01  6.3.4-5 Glenn <glennrp@image...>\n  * Added GIF, JPEG, and PNG interlace types.  For backward compatibility,\n    you can continue to use \"-interlace Plane\" to request these.\n\n2007-04-30  6.3.4-0 Anthony  <anthony@griffith...>\n  * Fixed minor bug in the 'curl' for Polaroid of very non-square images.\n\n2007-06-01  6.3.4-5 Cristy  <quetzlzacatenango@image...>\n  * Set min-is-white for Group4-compressed PDF.\n  * Add PaintFloodfillImage() method.\n\n2007-05-30  6.3.4-4 Cristy  <quetzlzacatenango@image...>\n  * Add MEPP metric to compare program.  Returns the mean error per pixel\n    along with the normalize mean and maximum error.\n  * Attach an XMP profile to an image (e.g.\n    convert input.tif -profile xmp:metadata.xmp output.tif).\n\n2007-05-22  6.3.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fixed mogrify conversions with -format and -path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=9127).\n\n2007-05-15  6.3.4-2 Cristy  <quetzlzacatenango@image...>\n  * SVG style element was not always parsed properly.\n  * Do not dither when the number of unique colors is already less than the\n    maximum.\n  * Return normalized PAE metric (compare utility).\n\n2007-05-03  6.3.4-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for PFM images.\n  * Check for corrupt EXIF image profiles.\n  * Writing JPEG YCbCr TIFF images no longer faults (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8896).\n\n2007-04-30  6.3.4-0 Anthony  <anthony@griffith...>\n  * Fixed minor bug for crop missed images and 'background' GIF disposal.\n\n2007-04-28  6.3.4-0 Glenn  <glennrp@image...>\n  * Added profile support to the GIF decoder/encoder.  They are stored\n    as GIF Application Extensions.  Known extensions include existing ICCRGB1\n    (for ICC profiles) and new MGKIPTC0 and MGK8BIM0 (for IPTC and 8BIM\n    profiles).  Unknown extensions found in GIF files are read as gifappNNN.\n\n2007-04-28  6.3.4-0 Anthony  <anthony@griffith...>\n  * Invert Opacity change for user defined ordered dither threshold maps,\n    so that 'off' map is transparent, and 'on' is opaque.\n\n2007-04-24  6.3.4-0 Anthony  <anthony@griffith...>\n  * Added an initial Coalesce Images, and a final +map local colortable\n    optimization to the -layers Optimize method, for a simple to use\n    GIF optimization operation.  (more work to come)\n\n2007-04-22  6.3.4-0 Cristy  <quetzlzacatenango@image...>\n  * Properly set the virtual canvas of a multi-frame GIF image sequence.\n  * Add AcquireOneVirtualPixel() method.\n  * Set Log colorspace properly when writing DPX images.\n  * Add -tile-offset option.\n  * Add support for the EXR image format.\n  * Improve support for DPX images.\n  * Add --enable-hdri option to the configure script.\n  * Add support for high dynamic-range images (HDRI).\n\n2007-04-20  6.3.3-9 Peter Hull  <peterhull90@gmail...>\n  * Improve support for writing multiple image icons.\n\n2007-04-18  6.3.3-9 Anthony  <anthony@griffith...>\n  * Separated -layers Optimize from -layers OptimizeFrame to allow\n    the former expansion into a general (multiple method) optimizer\n    of GIF animations\n  * merged -layers OptimizeTransparency into -layers Optimize method\n\n2007-04-12  6.3.3-8 Chris Madison  <madisonblu@hotma...>\n  * Fix fault whem comparing a colormapped image with a non-colormapped one.\n  * Fix race condition when spawning delegate programs.\n  * TIFF JPEG now respects the -quality compression setting.\n  * The -fx option now properly groks the logical and operator.\n  * DPX tilestamp property should be timestamp.\n\n2007-04-13  6.3.3-7 Anthony  <anthony@griffith...>\n  * Added GravityAdjustGeometry() to \"geometry.c\" to adjust geometry settings\n    according to given gravity and canvas area it applies to. This is for\n    code simplification throughout MagickCore.\n\n2007-04-09  6.3.3-6 Anthony  <anthony@griffith...>\n  * Fixed CoalesceImages() to reset virtual canvas info on second and later\n    frames.   Other animation handlers may also need to reset virtual canvas\n    sizes to match the first frame, as well.\n\n2007-04-06  6.3.3-6 Anthony  <anthony@griffith...>\n  * Addition of a CompositeImages() \"layer.c\" function to compose two\n    separate image lists together (with a virtual canvas offset) in three\n    different ways, depending on the size of the lists.\n  * A 'hack' for command line use (the two lists separates by the special\n    \"NULL\" image, which is junked) has also been added. Specifically...\n    \"-layers Composite\".\n\n2007-04-04  6.3.3-6 Anthony  <anthony@griffith...>\n  * Add -layers RemoveDups method to remove duplicate sequential images in\n    coalesced animations.\n  * Add -layers RemoveZero method to remove images with a zero time delay\n    (with no action and a warning is all images have zero time delay)\n\n2007-04-01  6.3.3-6 Cristy  <quetzlzacatenango@image...>\n  * Permit generic profiles (e.g. -profile name:profile).\n\n2007-03-31  6.3.3-5 Cristy  <quetzlzacatenango@image...>\n  * Fixed DCM and XWD buffer overflow vulnerabilities (reference\n    http://labs.idefense.com/intelligence/vulnerabilities/display.php?id=496).\n\n2007-03-28  6.3.3-4 Anthony  <anthony@griffith...>\n  * Code duplication, simplification, and possible logic faults in \"list.c\".\n  * Added new Composition method, 'ChangeMask' to return pixels\n    that have changed or will cause a color change in overlays\n  * Used 'ChangeMask' to implement the \"-layers\" method\n    \"OptimizeTransparency\" to improve the compressibility of\n    frame optimized GIF animations. See IM Examples...\n      http://www.imagemagick.org/Usage/anim_opt/#opt_trans\n\n2007-03-19  6.3.3-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed two memory leaks in wand/magick-image.c and magick/stream.c and made\n    some minor changes to the GIF coder to make reading and pinging images\n    faster (patch provided by mstemm@cloud...).\n\n2007-03-19  6.3.3-3 Cristy  <quetzlzacatenango@image...>\n  * Patch RotateImage() to properly rotate CMYK images.\n  * Patch the XWD coder to prevent heap overflow vulnerability (vulnerability\n    report from idefense.com [IDEF2108] [IDEF2221] [IDEF2226]).\n\n2007-03-19  6.3.3-3 Anthony <Anthony@griffith...>\n  * Fixed bug for GIF Optimization for images without a matte channel.\n  * Improved image handling for \"-layers\" method \"Dispose\".\n\n2007-03-11  6.3.3-2 Cristy  <quetzlzacatenango@image...>\n  * Improve configure script to better support Ghostscript under Mac OSX (\n    reference http://www.imagemagick.org/discourse-server/viewtopic.php?t=8557).\n  * Force a virtual pixel method of Tile for GetFillColor() and\n    GetStrokeColor().\n  * Add -reverse option to reverse the image list.\n\n2007-03-08  6.3.3-1 Cristy  <quetzlzacatenango@image...>\n  * Support versions 2.1.0 and above (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=8620).\n  * Support SVG rotation about a point (e.g. rotate(45 75 75)).\n  * Fix fault in DCM coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8618).\n  * Check for a NULL parser in SVGReference in coders/svg.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8609).\n  * Add --disable-deprecated configure script option.\n  * Composite mask now works properly with transparent images.\n\n2007-03-04  Daniel Kobras <kobras@debia...>\n  * Fixed additional data-driven faults (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=412945).\n  * Allocate proper scanline length to prevent a PCX overflow.\n\n2007-03-03  6.3.3-1 Cristy  <quetzlzacatenango@image...>\n  * Patch ImageMagick to permit referenced labels: -set option:mylabel\n    \"color = %[pixel:u[0].p{12,26}]\" label:'%[mylabel]'\n\n2007-02-24  6.3.3-0 Cristy  <quetzlzacatenango@image...>\n  * Escape indirect labels and comments (e.g. -label @file).\n  * Added -format %C to return the image compression type.\n  * Do not report channel statistics if -ping -format is specified with the\n    identify program.\n  * Add ResetImagePage() to reset the image page canvas and position.\n  * Upgrade to LCMS 1.16\n  * Configure Ghostscript for library or framework (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=8557).\n  * Add -taint option to convert/mogrify to mark image as ineligible for\n  * Fixed various data-driven faults (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=412945).  The corrupt\n    JP2 image faults but its failing in the JP2 jas_image_decode() method,\n    not MagickCore.  The corrupt XWD image faults but its failing in\n    the X11 XGetPixel() method, not MagickCore.\n\n2007-02-20  6.3.2-8 Cristy  <quetzlzacatenango@image...>\n  * Use -define quantum:polarity=min-is-black or -define\n    quantum:polarity=min-is-white to toggle the photometric interpretation for\n    a bilevel TIFF image.\n\n2007-02-17  6.3.2-8 Cristy  <quetzlzacatenango@image...>\n  * Don't interpret embedded format characters when reading comments/labels\n    from a file.\n  * Reading an image from stdin stopped working.\n\n2007-02-17  6.3.2-7 Cristy  <quetzlzacatenango@image...>\n  * PerlMagick Label() no longer faults.\n  * Fix double-free when using the display/animate -geometry option.\n  * Add GetStringInfoLength() and GetStringInfoDatum(); deprecate\n    profile->length and profile->datum.\n\n2007-02-16  6.3.2-6 Cristy  <quetzlzacatenango@image...>\n  * Fix file leak in InjectImageBlob().\n  * Do not reinterpret image properties (e.g. -comment %%w).\n\n2007-02-14  6.3.2-5 Cristy  <quetzlzacatenango@image...>\n  * Don't over-allocate file buffers.\n\n2007-02-12  6.3.2-5 Cristy  <quetzlzacatenango@image...>\n  * Format strings in the POSIX locale.\n  * Make font metrics invariant to the strokewidth.\n\n2007-02-10  6.3.2-4 Albert Chin  <china@thewr...>\n  * Patch to fix configure.ac typo.\n\n2007-02-08  6.3.2-4 Cristy  <quetzlzacatenango@image...>\n  * Permit ImageMagick to run as a service under Windows.\n  * Remove duplicate EXIF properties.\n  * Support strokewidth option for the caption format.\n  * Don't use Ghostscript for rendering fonts if Freetype is available.\n\n2007-02-02  6.3.2-3 Cristy  <quetzlzacatenango@image...>\n  * Added thumbnail format to write EXIF thumbnails.\n  * Move ReadByteImage() out of Min() macro of ReadPALMImage().\n  * Move EXIF properties to the EXIF namespace (e.g. exif:XResolution).\n\n2007-01-26  6.3.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add interpolate and background options to PerlMagick's AffineTransform().\n  * Revert to Postscript rendering if Freetype delegate library is not\n    available.\n\n2007-01-20  6.3.2-1 Cristy  <quetzlzacatenango@image...>\n  * Accept Fx expressions from a file with -fx @filename.\n  * Enhance -fill and -stroke to accept image filenames as patterns.\n\n2007-01-16  6.3.2-0 Cristy  <quetzlzacatenango@image...>\n  * Save grayscale images as JPEG-compressed grayscale when writing in the TIFF\n    format.\n  * Update EXIF resolution fields when image density changes.\n\n2007-01-07  6.3.1-7 Cristy  <quetzlzacatenango@image...>\n  * The -polaroid option now respects -gravity.\n  * Deprecate Get/SetImageAttribute().  Recommend Get/SetImageProperty()\n    instead.\n  * Any form of \"-crop\" with a percentage, implies an offset for the crop.\n  * Fixed percent option for -border (e.g. -border 10%x0%).\n  * Add -path option to the mogrify program to specify where to write the\n    images.\n\n2007-01-06  6.3.1-6 Cristy  <quetzlzacatenango@image...>\n  * Fix the -auto-orient to work with an image sequence (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=8100).\n  * Add -polaroid option to simulate a Polaroid picture.\n  * Eliminate double-free bug in GradientImage().\n  * Set AppendImage() matte channel only when image has matte attribute set.\n  * The -crop with negative offsets do not modify the virtual canvas.\n  * Caption: Given both the width and height (\"-size\") of the area to fill,\n    adjust the fonts \"-pointsize\" until the text just filles the whole space\n    without overflowing.\n  * Generate proper Windows icon image files (patch provided by\n    Robert M. Jansen).\n", "/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%                        DDDD   RRRR    AAA   W   W                           %\n%                        D   D  R   R  A   A  W   W                           %\n%                        D   D  RRRR   AAAAA  W W W                           %\n%                        D   D  R RN   A   A  WW WW                           %\n%                        DDDD   R  R   A   A  W   W                           %\n%                                                                             %\n%                                                                             %\n%                     MagickCore Image Drawing Methods                        %\n%                                                                             %\n%                                                                             %\n%                              Software Design                                %\n%                                   Cristy                                    %\n%                                 July 1998                                   %\n%                                                                             %\n%                                                                             %\n%  Copyright 1999-2016 ImageMagick Studio LLC, a non-profit organization      %\n%  dedicated to making software imaging solutions freely available.           %\n%                                                                             %\n%  You may not use this file except in compliance with the License.  You may  %\n%  obtain a copy of the License at                                            %\n%                                                                             %\n%    http://www.imagemagick.org/script/license.php                            %\n%                                                                             %\n%  Unless required by applicable law or agreed to in writing, software        %\n%  distributed under the License is distributed on an \"AS IS\" BASIS,          %\n%  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   %\n%  See the License for the specific language governing permissions and        %\n%  limitations under the License.                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n% Bill Radcliffe of Corbis (www.corbis.com) contributed the polygon\n% rendering code based on Paul Heckbert's \"Concave Polygon Scan Conversion\",\n% Graphics Gems, 1990.  Leonard Rosenthal and David Harr of Appligent\n% (www.appligent.com) contributed the dash pattern, linecap stroking\n% algorithm, and minor rendering improvements.\n%\n*/\n\f\n/*\n  Include declarations.\n*/\n#include \"magick/studio.h\"\n#include \"magick/annotate.h\"\n#include \"magick/artifact.h\"\n#include \"magick/blob.h\"\n#include \"magick/cache.h\"\n#include \"magick/cache-private.h\"\n#include \"magick/cache-view.h\"\n#include \"magick/channel.h\"\n#include \"magick/color.h\"\n#include \"magick/color-private.h\"\n#include \"magick/colorspace.h\"\n#include \"magick/colorspace-private.h\"\n#include \"magick/composite.h\"\n#include \"magick/composite-private.h\"\n#include \"magick/constitute.h\"\n#include \"magick/draw.h\"\n#include \"magick/draw-private.h\"\n#include \"magick/enhance.h\"\n#include \"magick/exception.h\"\n#include \"magick/exception-private.h\"\n#include \"magick/gem.h\"\n#include \"magick/geometry.h\"\n#include \"magick/image-private.h\"\n#include \"magick/list.h\"\n#include \"magick/log.h\"\n#include \"magick/monitor.h\"\n#include \"magick/monitor-private.h\"\n#include \"magick/option.h\"\n#include \"magick/paint.h\"\n#include \"magick/pixel-accessor.h\"\n#include \"magick/pixel-private.h\"\n#include \"magick/property.h\"\n#include \"magick/resample.h\"\n#include \"magick/resample-private.h\"\n#include \"magick/resource_.h\"\n#include \"magick/string_.h\"\n#include \"magick/string-private.h\"\n#include \"magick/thread-private.h\"\n#include \"magick/token.h\"\n#include \"magick/transform.h\"\n#include \"magick/utility.h\"\n\f\n/*\n  Define declarations.\n*/\n#define BezierQuantum  200\n#define DrawEpsilon  (1.0e-10)\n\n\f\n/*\n  Typedef declarations.\n*/\ntypedef struct _EdgeInfo\n{\n  SegmentInfo\n    bounds;\n\n  double\n    scanline;\n\n  PointInfo\n    *points;\n\n  size_t\n    number_points;\n\n  ssize_t\n    direction;\n\n  MagickBooleanType\n    ghostline;\n\n  size_t\n    highwater;\n} EdgeInfo;\n\ntypedef struct _ElementInfo\n{\n  double\n    cx,\n    cy,\n    major,\n    minor,\n    angle;\n} ElementInfo;\n\ntypedef struct _PolygonInfo\n{\n  EdgeInfo\n    *edges;\n\n  size_t\n    number_edges;\n} PolygonInfo;\n\ntypedef enum\n{\n  MoveToCode,\n  OpenCode,\n  GhostlineCode,\n  LineToCode,\n  EndCode\n} PathInfoCode;\n\ntypedef struct _PathInfo\n{\n  PointInfo\n    point;\n\n  PathInfoCode\n    code;\n} PathInfo;\n\f\n/*\n  Forward declarations.\n*/\nstatic MagickBooleanType\n  DrawStrokePolygon(Image *,const DrawInfo *,const PrimitiveInfo *);\n\nstatic PrimitiveInfo\n  *TraceStrokePolygon(const DrawInfo *,const PrimitiveInfo *);\n\nstatic size_t\n  TracePath(PrimitiveInfo *,const char *);\n\nstatic void\n  TraceArc(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo),\n  TraceArcPath(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo,\n    const double,const MagickBooleanType,const MagickBooleanType),\n  TraceBezier(PrimitiveInfo *,const size_t),\n  TraceCircle(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceEllipse(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo),\n  TraceLine(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceRectangle(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceRoundRectangle(PrimitiveInfo *,const PointInfo,const PointInfo,\n    PointInfo),\n  TraceSquareLinecap(PrimitiveInfo *,const size_t,const double);\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   A c q u i r e D r a w I n f o                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  AcquireDrawInfo() returns a DrawInfo structure properly initialized.\n%\n%  The format of the AcquireDrawInfo method is:\n%\n%      DrawInfo *AcquireDrawInfo(void)\n%\n*/\nMagickExport DrawInfo *AcquireDrawInfo(void)\n{\n  DrawInfo\n    *draw_info;\n\n  draw_info=(DrawInfo *) AcquireMagickMemory(sizeof(*draw_info));\n  if (draw_info == (DrawInfo *) NULL)\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  GetDrawInfo((ImageInfo *) NULL,draw_info);\n  return(draw_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   C l o n e D r a w I n f o                                                 %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  CloneDrawInfo() makes a copy of the given draw_info structure.  If NULL\n%  is specified, a new DrawInfo structure is created initialized to default\n%  values.\n%\n%  The format of the CloneDrawInfo method is:\n%\n%      DrawInfo *CloneDrawInfo(const ImageInfo *image_info,\n%        const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image_info: the image info.\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport DrawInfo *CloneDrawInfo(const ImageInfo *image_info,\n  const DrawInfo *draw_info)\n{\n  DrawInfo\n    *clone_info;\n\n  clone_info=(DrawInfo *) AcquireMagickMemory(sizeof(*clone_info));\n  if (clone_info == (DrawInfo *) NULL)\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  GetDrawInfo(image_info,clone_info);\n  if (draw_info == (DrawInfo *) NULL)\n    return(clone_info);\n  if (clone_info->primitive != (char *) NULL)\n    (void) CloneString(&clone_info->primitive,draw_info->primitive);\n  if (draw_info->geometry != (char *) NULL)\n    (void) CloneString(&clone_info->geometry,draw_info->geometry);\n  clone_info->viewbox=draw_info->viewbox;\n  clone_info->affine=draw_info->affine;\n  clone_info->gravity=draw_info->gravity;\n  clone_info->fill=draw_info->fill;\n  clone_info->stroke=draw_info->stroke;\n  clone_info->stroke_width=draw_info->stroke_width;\n  if (draw_info->fill_pattern != (Image *) NULL)\n    clone_info->fill_pattern=CloneImage(draw_info->fill_pattern,0,0,MagickTrue,\n      &draw_info->fill_pattern->exception);\n  else\n    if (draw_info->tile != (Image *) NULL)\n      clone_info->fill_pattern=CloneImage(draw_info->tile,0,0,MagickTrue,\n        &draw_info->tile->exception);\n  clone_info->tile=NewImageList();  /* tile is deprecated */\n  if (draw_info->stroke_pattern != (Image *) NULL)\n    clone_info->stroke_pattern=CloneImage(draw_info->stroke_pattern,0,0,\n      MagickTrue,&draw_info->stroke_pattern->exception);\n  clone_info->stroke_antialias=draw_info->stroke_antialias;\n  clone_info->text_antialias=draw_info->text_antialias;\n  clone_info->fill_rule=draw_info->fill_rule;\n  clone_info->linecap=draw_info->linecap;\n  clone_info->linejoin=draw_info->linejoin;\n  clone_info->miterlimit=draw_info->miterlimit;\n  clone_info->dash_offset=draw_info->dash_offset;\n  clone_info->decorate=draw_info->decorate;\n  clone_info->compose=draw_info->compose;\n  if (draw_info->text != (char *) NULL)\n    (void) CloneString(&clone_info->text,draw_info->text);\n  if (draw_info->font != (char *) NULL)\n    (void) CloneString(&clone_info->font,draw_info->font);\n  if (draw_info->metrics != (char *) NULL)\n    (void) CloneString(&clone_info->metrics,draw_info->metrics);\n  if (draw_info->family != (char *) NULL)\n    (void) CloneString(&clone_info->family,draw_info->family);\n  clone_info->style=draw_info->style;\n  clone_info->stretch=draw_info->stretch;\n  clone_info->weight=draw_info->weight;\n  if (draw_info->encoding != (char *) NULL)\n    (void) CloneString(&clone_info->encoding,draw_info->encoding);\n  clone_info->pointsize=draw_info->pointsize;\n  clone_info->kerning=draw_info->kerning;\n  clone_info->interline_spacing=draw_info->interline_spacing;\n  clone_info->interword_spacing=draw_info->interword_spacing;\n  clone_info->direction=draw_info->direction;\n  if (draw_info->density != (char *) NULL)\n    (void) CloneString(&clone_info->density,draw_info->density);\n  clone_info->align=draw_info->align;\n  clone_info->undercolor=draw_info->undercolor;\n  clone_info->border_color=draw_info->border_color;\n  if (draw_info->server_name != (char *) NULL)\n    (void) CloneString(&clone_info->server_name,draw_info->server_name);\n  if (draw_info->dash_pattern != (double *) NULL)\n    {\n      register ssize_t\n        x;\n\n      for (x=0; fabs(draw_info->dash_pattern[x]) >= DrawEpsilon; x++) ;\n      clone_info->dash_pattern=(double *) AcquireQuantumMemory((size_t) x+1UL,\n        sizeof(*clone_info->dash_pattern));\n      if (clone_info->dash_pattern == (double *) NULL)\n        ThrowFatalException(ResourceLimitFatalError,\n          \"UnableToAllocateDashPattern\");\n      (void) CopyMagickMemory(clone_info->dash_pattern,draw_info->dash_pattern,\n        (size_t) (x+1)*sizeof(*clone_info->dash_pattern));\n    }\n  clone_info->gradient=draw_info->gradient;\n  if (draw_info->gradient.stops != (StopInfo *) NULL)\n    {\n      size_t\n        number_stops;\n\n      number_stops=clone_info->gradient.number_stops;\n      clone_info->gradient.stops=(StopInfo *) AcquireQuantumMemory((size_t)\n        number_stops,sizeof(*clone_info->gradient.stops));\n      if (clone_info->gradient.stops == (StopInfo *) NULL)\n        ThrowFatalException(ResourceLimitFatalError,\n          \"UnableToAllocateDashPattern\");\n      (void) CopyMagickMemory(clone_info->gradient.stops,\n        draw_info->gradient.stops,(size_t) number_stops*\n        sizeof(*clone_info->gradient.stops));\n    }\n  if (draw_info->clip_mask != (char *) NULL)\n    (void) CloneString(&clone_info->clip_mask,draw_info->clip_mask);\n  clone_info->bounds=draw_info->bounds;\n  clone_info->clip_units=draw_info->clip_units;\n  clone_info->render=draw_info->render;\n  clone_info->fill_opacity=draw_info->fill_opacity;\n  clone_info->stroke_opacity=draw_info->stroke_opacity;\n  clone_info->element_reference=draw_info->element_reference;\n  clone_info->debug=IsEventLogging();\n  return(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   C o n v e r t P a t h T o P o l y g o n                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  ConvertPathToPolygon() converts a path to the more efficient sorted\n%  rendering form.\n%\n%  The format of the ConvertPathToPolygon method is:\n%\n%      PolygonInfo *ConvertPathToPolygon(const PathInfo *path_info)\n%\n%  A description of each parameter follows:\n%\n%    o Method ConvertPathToPolygon returns the path in a more efficient sorted\n%      rendering form of type PolygonInfo.\n%\n%    o draw_info: Specifies a pointer to an DrawInfo structure.\n%\n%    o path_info: Specifies a pointer to an PathInfo structure.\n%\n%\n*/\n\n#if defined(__cplusplus) || defined(c_plusplus)\nextern \"C\" {\n#endif\n\nstatic int CompareEdges(const void *x,const void *y)\n{\n  register const EdgeInfo\n    *p,\n    *q;\n\n  /*\n    Compare two edges.\n  */\n  p=(const EdgeInfo *) x;\n  q=(const EdgeInfo *) y;\n  if ((p->points[0].y-DrawEpsilon) > q->points[0].y)\n    return(1);\n  if ((p->points[0].y+DrawEpsilon) < q->points[0].y)\n    return(-1);\n  if ((p->points[0].x-DrawEpsilon) > q->points[0].x)\n    return(1);\n  if ((p->points[0].x+DrawEpsilon) < q->points[0].x)\n    return(-1);\n  if (((p->points[1].x-p->points[0].x)*(q->points[1].y-q->points[0].y)-\n       (p->points[1].y-p->points[0].y)*(q->points[1].x-q->points[0].x)) > 0.0)\n    return(1);\n  return(-1);\n}\n\n#if defined(__cplusplus) || defined(c_plusplus)\n}\n#endif\n\nstatic void LogPolygonInfo(const PolygonInfo *polygon_info)\n{\n  register EdgeInfo\n    *p;\n\n  register ssize_t\n    i,\n    j;\n\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin active-edge\");\n  p=polygon_info->edges;\n  for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n  {\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      edge %.20g:\",\n      (double) i);\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      direction: %s\",\n      p->direction != MagickFalse ? \"down\" : \"up\");\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      ghostline: %s\",\n      p->ghostline != MagickFalse ? \"transparent\" : \"opaque\");\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"      bounds: %g,%g - %g,%g\",p->bounds.x1,p->bounds.y1,\n      p->bounds.x2,p->bounds.y2);\n    for (j=0; j < (ssize_t) p->number_points; j++)\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"        %g,%g\",\n        p->points[j].x,p->points[j].y);\n    p++;\n  }\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end active-edge\");\n}\n\nstatic void ReversePoints(PointInfo *points,const size_t number_points)\n{\n  PointInfo\n    point;\n\n  register ssize_t\n    i;\n\n  for (i=0; i < (ssize_t) (number_points >> 1); i++)\n  {\n    point=points[i];\n    points[i]=points[number_points-(i+1)];\n    points[number_points-(i+1)]=point;\n  }\n}\n\nstatic PolygonInfo *ConvertPathToPolygon(const PathInfo *path_info)\n{\n  long\n    direction,\n    next_direction;\n\n  PointInfo\n    point,\n    *points;\n\n  PolygonInfo\n    *polygon_info;\n\n  SegmentInfo\n    bounds;\n\n  register ssize_t\n    i,\n    n;\n\n  MagickBooleanType\n    ghostline;\n\n  size_t\n    edge,\n    number_edges,\n    number_points;\n\n  /*\n    Convert a path to the more efficient sorted rendering form.\n  */\n  polygon_info=(PolygonInfo *) AcquireMagickMemory(sizeof(*polygon_info));\n  if (polygon_info == (PolygonInfo *) NULL)\n    return((PolygonInfo *) NULL);\n  number_edges=16;\n  polygon_info->edges=(EdgeInfo *) AcquireQuantumMemory(number_edges,\n    sizeof(*polygon_info->edges));\n  if (polygon_info->edges == (EdgeInfo *) NULL)\n    return((PolygonInfo *) NULL);\n  (void) ResetMagickMemory(polygon_info->edges,0,number_edges*\n    sizeof(*polygon_info->edges));\n  direction=0;\n  edge=0;\n  ghostline=MagickFalse;\n  n=0;\n  number_points=0;\n  points=(PointInfo *) NULL;\n  (void) ResetMagickMemory(&point,0,sizeof(point));\n  (void) ResetMagickMemory(&bounds,0,sizeof(bounds));\n  for (i=0; path_info[i].code != EndCode; i++)\n  {\n    if ((path_info[i].code == MoveToCode) || (path_info[i].code == OpenCode) ||\n        (path_info[i].code == GhostlineCode))\n      {\n        /*\n          Move to.\n        */\n        if ((points != (PointInfo *) NULL) && (n >= 2))\n          {\n            if (edge == number_edges)\n              {\n                number_edges<<=1;\n                polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n                  polygon_info->edges,(size_t) number_edges,\n                  sizeof(*polygon_info->edges));\n                if (polygon_info->edges == (EdgeInfo *) NULL)\n                  return((PolygonInfo *) NULL);\n              }\n            polygon_info->edges[edge].number_points=(size_t) n;\n            polygon_info->edges[edge].scanline=(-1.0);\n            polygon_info->edges[edge].highwater=0;\n            polygon_info->edges[edge].ghostline=ghostline;\n            polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n            if (direction < 0)\n              ReversePoints(points,(size_t) n);\n            polygon_info->edges[edge].points=points;\n            polygon_info->edges[edge].bounds=bounds;\n            polygon_info->edges[edge].bounds.y1=points[0].y;\n            polygon_info->edges[edge].bounds.y2=points[n-1].y;\n            points=(PointInfo *) NULL;\n            ghostline=MagickFalse;\n            edge++;\n          }\n        if (points == (PointInfo *) NULL)\n          {\n            number_points=16;\n            points=(PointInfo *) AcquireQuantumMemory((size_t) number_points,\n              sizeof(*points));\n            if (points == (PointInfo *) NULL)\n              return((PolygonInfo *) NULL);\n          }\n        ghostline=path_info[i].code == GhostlineCode ? MagickTrue : MagickFalse;\n        point=path_info[i].point;\n        points[0]=point;\n        bounds.x1=point.x;\n        bounds.x2=point.x;\n        direction=0;\n        n=1;\n        continue;\n      }\n    /*\n      Line to.\n    */\n    next_direction=((path_info[i].point.y > point.y) ||\n      ((fabs(path_info[i].point.y-point.y) < DrawEpsilon) &&\n       (path_info[i].point.x > point.x))) ? 1 : -1;\n    if ((points != (PointInfo *) NULL) && (direction != 0) &&\n        (direction != next_direction))\n      {\n        /*\n          New edge.\n        */\n        point=points[n-1];\n        if (edge == number_edges)\n          {\n            number_edges<<=1;\n            polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n              polygon_info->edges,(size_t) number_edges,\n              sizeof(*polygon_info->edges));\n            if (polygon_info->edges == (EdgeInfo *) NULL)\n              return((PolygonInfo *) NULL);\n          }\n        polygon_info->edges[edge].number_points=(size_t) n;\n        polygon_info->edges[edge].scanline=(-1.0);\n        polygon_info->edges[edge].highwater=0;\n        polygon_info->edges[edge].ghostline=ghostline;\n        polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n        if (direction < 0)\n          ReversePoints(points,(size_t) n);\n        polygon_info->edges[edge].points=points;\n        polygon_info->edges[edge].bounds=bounds;\n        polygon_info->edges[edge].bounds.y1=points[0].y;\n        polygon_info->edges[edge].bounds.y2=points[n-1].y;\n        number_points=16;\n        points=(PointInfo *) AcquireQuantumMemory((size_t) number_points,\n          sizeof(*points));\n        if (points == (PointInfo *) NULL)\n          return((PolygonInfo *) NULL);\n        n=1;\n        ghostline=MagickFalse;\n        points[0]=point;\n        bounds.x1=point.x;\n        bounds.x2=point.x;\n        edge++;\n      }\n    direction=next_direction;\n    if (points == (PointInfo *) NULL)\n      continue;\n    if (n == (ssize_t) number_points)\n      {\n        number_points<<=1;\n        points=(PointInfo *) ResizeQuantumMemory(points,(size_t) number_points,\n          sizeof(*points));\n        if (points == (PointInfo *) NULL)\n          return((PolygonInfo *) NULL);\n      }\n    point=path_info[i].point;\n    points[n]=point;\n    if (point.x < bounds.x1)\n      bounds.x1=point.x;\n    if (point.x > bounds.x2)\n      bounds.x2=point.x;\n    n++;\n  }\n  if (points != (PointInfo *) NULL)\n    {\n      if (n < 2)\n        points=(PointInfo *) RelinquishMagickMemory(points);\n      else\n        {\n          if (edge == number_edges)\n            {\n              number_edges<<=1;\n              polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n                polygon_info->edges,(size_t) number_edges,\n                sizeof(*polygon_info->edges));\n              if (polygon_info->edges == (EdgeInfo *) NULL)\n                return((PolygonInfo *) NULL);\n            }\n          polygon_info->edges[edge].number_points=(size_t) n;\n          polygon_info->edges[edge].scanline=(-1.0);\n          polygon_info->edges[edge].highwater=0;\n          polygon_info->edges[edge].ghostline=ghostline;\n          polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n          if (direction < 0)\n            ReversePoints(points,(size_t) n);\n          polygon_info->edges[edge].points=points;\n          polygon_info->edges[edge].bounds=bounds;\n          polygon_info->edges[edge].bounds.y1=points[0].y;\n          polygon_info->edges[edge].bounds.y2=points[n-1].y;\n          ghostline=MagickFalse;\n          edge++;\n        }\n    }\n  polygon_info->number_edges=edge;\n  qsort(polygon_info->edges,(size_t) polygon_info->number_edges,\n    sizeof(*polygon_info->edges),CompareEdges);\n  if (IsEventLogging() != MagickFalse)\n    LogPolygonInfo(polygon_info);\n  return(polygon_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   C o n v e r t P r i m i t i v e T o P a t h                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  ConvertPrimitiveToPath() converts a PrimitiveInfo structure into a vector\n%  path structure.\n%\n%  The format of the ConvertPrimitiveToPath method is:\n%\n%      PathInfo *ConvertPrimitiveToPath(const DrawInfo *draw_info,\n%        const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o Method ConvertPrimitiveToPath returns a vector path structure of type\n%      PathInfo.\n%\n%    o draw_info: a structure of type DrawInfo.\n%\n%    o primitive_info: Specifies a pointer to an PrimitiveInfo structure.\n%\n%\n*/\n\nstatic void LogPathInfo(const PathInfo *path_info)\n{\n  register const PathInfo\n    *p;\n\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin vector-path\");\n  for (p=path_info; p->code != EndCode; p++)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"      %g,%g %s\",p->point.x,p->point.y,p->code == GhostlineCode ?\n      \"moveto ghostline\" : p->code == OpenCode ? \"moveto open\" :\n      p->code == MoveToCode ? \"moveto\" : p->code == LineToCode ? \"lineto\" :\n      \"?\");\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end vector-path\");\n}\n\nstatic PathInfo *ConvertPrimitiveToPath(\n  const DrawInfo *magick_unused(draw_info),const PrimitiveInfo *primitive_info)\n{\n  PathInfo\n    *path_info;\n\n  PathInfoCode\n    code;\n\n  PointInfo\n    p,\n    q;\n\n  register ssize_t\n    i,\n    n;\n\n  ssize_t\n    coordinates,\n    start;\n\n  magick_unreferenced(draw_info);\n\n  /*\n    Converts a PrimitiveInfo structure into a vector path structure.\n  */\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    case ColorPrimitive:\n    case MattePrimitive:\n    case TextPrimitive:\n    case ImagePrimitive:\n      return((PathInfo *) NULL);\n    default:\n      break;\n  }\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n  path_info=(PathInfo *) AcquireQuantumMemory((size_t) (2UL*i+3UL),\n    sizeof(*path_info));\n  if (path_info == (PathInfo *) NULL)\n    return((PathInfo *) NULL);\n  coordinates=0;\n  n=0;\n  p.x=(-1.0);\n  p.y=(-1.0);\n  q.x=(-1.0);\n  q.y=(-1.0);\n  start=0;\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n  {\n    code=LineToCode;\n    if (coordinates <= 0)\n      {\n        coordinates=(ssize_t) primitive_info[i].coordinates;\n        p=primitive_info[i].point;\n        start=n;\n        code=MoveToCode;\n      }\n    coordinates--;\n    /*\n      Eliminate duplicate points.\n    */\n    if ((i == 0) || (fabs(q.x-primitive_info[i].point.x) >= DrawEpsilon) ||\n        (fabs(q.y-primitive_info[i].point.y) >= DrawEpsilon))\n      {\n        path_info[n].code=code;\n        path_info[n].point=primitive_info[i].point;\n        q=primitive_info[i].point;\n        n++;\n      }\n    if (coordinates > 0)\n      continue;\n    if ((fabs(p.x-primitive_info[i].point.x) < DrawEpsilon) &&\n        (fabs(p.y-primitive_info[i].point.y) < DrawEpsilon))\n      continue;\n    /*\n      Mark the p point as open if it does not match the q.\n    */\n    path_info[start].code=OpenCode;\n    path_info[n].code=GhostlineCode;\n    path_info[n].point=primitive_info[i].point;\n    n++;\n    path_info[n].code=LineToCode;\n    path_info[n].point=p;\n    n++;\n  }\n  path_info[n].code=EndCode;\n  path_info[n].point.x=0.0;\n  path_info[n].point.y=0.0;\n  if (IsEventLogging() != MagickFalse)\n    LogPathInfo(path_info);\n  return(path_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D e s t r o y D r a w I n f o                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyDrawInfo() deallocates memory associated with an DrawInfo\n%  structure.\n%\n%  The format of the DestroyDrawInfo method is:\n%\n%      DrawInfo *DestroyDrawInfo(DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport DrawInfo *DestroyDrawInfo(DrawInfo *draw_info)\n{\n  if (draw_info->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  if (draw_info->primitive != (char *) NULL)\n    draw_info->primitive=DestroyString(draw_info->primitive);\n  if (draw_info->text != (char *) NULL)\n    draw_info->text=DestroyString(draw_info->text);\n  if (draw_info->geometry != (char *) NULL)\n    draw_info->geometry=DestroyString(draw_info->geometry);\n  if (draw_info->tile != (Image *) NULL)\n    draw_info->tile=DestroyImage(draw_info->tile);\n  if (draw_info->fill_pattern != (Image *) NULL)\n    draw_info->fill_pattern=DestroyImage(draw_info->fill_pattern);\n  if (draw_info->stroke_pattern != (Image *) NULL)\n    draw_info->stroke_pattern=DestroyImage(draw_info->stroke_pattern);\n  if (draw_info->font != (char *) NULL)\n    draw_info->font=DestroyString(draw_info->font);\n  if (draw_info->metrics != (char *) NULL)\n    draw_info->metrics=DestroyString(draw_info->metrics);\n  if (draw_info->family != (char *) NULL)\n    draw_info->family=DestroyString(draw_info->family);\n  if (draw_info->encoding != (char *) NULL)\n    draw_info->encoding=DestroyString(draw_info->encoding);\n  if (draw_info->density != (char *) NULL)\n    draw_info->density=DestroyString(draw_info->density);\n  if (draw_info->server_name != (char *) NULL)\n    draw_info->server_name=(char *)\n     RelinquishMagickMemory(draw_info->server_name);\n  if (draw_info->dash_pattern != (double *) NULL)\n    draw_info->dash_pattern=(double *) RelinquishMagickMemory(\n      draw_info->dash_pattern);\n  if (draw_info->gradient.stops != (StopInfo *) NULL)\n    draw_info->gradient.stops=(StopInfo *) RelinquishMagickMemory(\n      draw_info->gradient.stops);\n  if (draw_info->clip_mask != (char *) NULL)\n    draw_info->clip_mask=DestroyString(draw_info->clip_mask);\n  draw_info->signature=(~MagickSignature);\n  draw_info=(DrawInfo *) RelinquishMagickMemory(draw_info);\n  return(draw_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D e s t r o y E d g e                                                     %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyEdge() destroys the specified polygon edge.\n%\n%  The format of the DestroyEdge method is:\n%\n%      ssize_t DestroyEdge(PolygonInfo *polygon_info,const int edge)\n%\n%  A description of each parameter follows:\n%\n%    o polygon_info: Specifies a pointer to an PolygonInfo structure.\n%\n%    o edge: the polygon edge number to destroy.\n%\n*/\nstatic size_t DestroyEdge(PolygonInfo *polygon_info,\n  const size_t edge)\n{\n  assert(edge < polygon_info->number_edges);\n  polygon_info->edges[edge].points=(PointInfo *) RelinquishMagickMemory(\n    polygon_info->edges[edge].points);\n  polygon_info->number_edges--;\n  if (edge < polygon_info->number_edges)\n    (void) CopyMagickMemory(polygon_info->edges+edge,polygon_info->edges+edge+1,\n      (size_t) (polygon_info->number_edges-edge)*sizeof(*polygon_info->edges));\n  return(polygon_info->number_edges);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D e s t r o y P o l y g o n I n f o                                       %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyPolygonInfo() destroys the PolygonInfo data structure.\n%\n%  The format of the DestroyPolygonInfo method is:\n%\n%      PolygonInfo *DestroyPolygonInfo(PolygonInfo *polygon_info)\n%\n%  A description of each parameter follows:\n%\n%    o polygon_info: Specifies a pointer to an PolygonInfo structure.\n%\n*/\nstatic PolygonInfo *DestroyPolygonInfo(PolygonInfo *polygon_info)\n{\n  register ssize_t\n    i;\n\n  for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n    polygon_info->edges[i].points=(PointInfo *)\n      RelinquishMagickMemory(polygon_info->edges[i].points);\n  polygon_info->edges=(EdgeInfo *) RelinquishMagickMemory(polygon_info->edges);\n  return((PolygonInfo *) RelinquishMagickMemory(polygon_info));\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%     D r a w A f f i n e I m a g e                                           %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawAffineImage() composites the source over the destination image as\n%  dictated by the affine transform.\n%\n%  The format of the DrawAffineImage method is:\n%\n%      MagickBooleanType DrawAffineImage(Image *image,const Image *source,\n%        const AffineMatrix *affine)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o source: the source image.\n%\n%    o affine: the affine transform.\n%\n*/\n\nstatic SegmentInfo AffineEdge(const Image *image,const AffineMatrix *affine,\n  const double y,const SegmentInfo *edge)\n{\n  double\n    intercept,\n    z;\n\n  register double\n    x;\n\n  SegmentInfo\n    inverse_edge;\n\n  /*\n    Determine left and right edges.\n  */\n  inverse_edge.x1=edge->x1;\n  inverse_edge.y1=edge->y1;\n  inverse_edge.x2=edge->x2;\n  inverse_edge.y2=edge->y2;\n  z=affine->ry*y+affine->tx;\n  if (affine->sx >= DrawEpsilon)\n    {\n      intercept=(-z/affine->sx);\n      x=intercept;\n      if (x > inverse_edge.x1)\n        inverse_edge.x1=x;\n      intercept=(-z+(double) image->columns)/affine->sx;\n      x=intercept;\n      if (x < inverse_edge.x2)\n        inverse_edge.x2=x;\n    }\n  else\n    if (affine->sx < -DrawEpsilon)\n      {\n        intercept=(-z+(double) image->columns)/affine->sx;\n        x=intercept;\n        if (x > inverse_edge.x1)\n          inverse_edge.x1=x;\n        intercept=(-z/affine->sx);\n        x=intercept;\n        if (x < inverse_edge.x2)\n          inverse_edge.x2=x;\n      }\n    else\n      if ((z < 0.0) || ((size_t) floor(z+0.5) >= image->columns))\n        {\n          inverse_edge.x2=edge->x1;\n          return(inverse_edge);\n        }\n  /*\n    Determine top and bottom edges.\n  */\n  z=affine->sy*y+affine->ty;\n  if (affine->rx >= DrawEpsilon)\n    {\n      intercept=(-z/affine->rx);\n      x=intercept;\n      if (x > inverse_edge.x1)\n        inverse_edge.x1=x;\n      intercept=(-z+(double) image->rows)/affine->rx;\n      x=intercept;\n      if (x < inverse_edge.x2)\n        inverse_edge.x2=x;\n    }\n  else\n    if (affine->rx < -DrawEpsilon)\n      {\n        intercept=(-z+(double) image->rows)/affine->rx;\n        x=intercept;\n        if (x > inverse_edge.x1)\n          inverse_edge.x1=x;\n        intercept=(-z/affine->rx);\n        x=intercept;\n        if (x < inverse_edge.x2)\n          inverse_edge.x2=x;\n      }\n    else\n      if ((z < 0.0) || ((size_t) floor(z+0.5) >= image->rows))\n        {\n          inverse_edge.x2=edge->x2;\n          return(inverse_edge);\n        }\n  return(inverse_edge);\n}\n\nstatic AffineMatrix InverseAffineMatrix(const AffineMatrix *affine)\n{\n  AffineMatrix\n    inverse_affine;\n\n  double\n    determinant;\n\n  determinant=PerceptibleReciprocal(affine->sx*affine->sy-affine->rx*\n    affine->ry);\n  inverse_affine.sx=determinant*affine->sy;\n  inverse_affine.rx=determinant*(-affine->rx);\n  inverse_affine.ry=determinant*(-affine->ry);\n  inverse_affine.sy=determinant*affine->sx;\n  inverse_affine.tx=(-affine->tx)*inverse_affine.sx-affine->ty*\n    inverse_affine.ry;\n  inverse_affine.ty=(-affine->tx)*inverse_affine.rx-affine->ty*\n    inverse_affine.sy;\n  return(inverse_affine);\n}\n\nMagickExport MagickBooleanType DrawAffineImage(Image *image,\n  const Image *source,const AffineMatrix *affine)\n{\n  AffineMatrix\n    inverse_affine;\n\n  CacheView\n    *image_view,\n    *source_view;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    status;\n\n  MagickPixelPacket\n    zero;\n\n  PointInfo\n    extent[4],\n    min,\n    max,\n    point;\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    edge;\n\n  ssize_t\n    start,\n    stop,\n    y;\n\n  /*\n    Determine bounding box.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(source != (const Image *) NULL);\n  assert(source->signature == MagickSignature);\n  assert(affine != (AffineMatrix *) NULL);\n  extent[0].x=0.0;\n  extent[0].y=0.0;\n  extent[1].x=(double) source->columns-1.0;\n  extent[1].y=0.0;\n  extent[2].x=(double) source->columns-1.0;\n  extent[2].y=(double) source->rows-1.0;\n  extent[3].x=0.0;\n  extent[3].y=(double) source->rows-1.0;\n  for (i=0; i < 4; i++)\n  {\n    point=extent[i];\n    extent[i].x=point.x*affine->sx+point.y*affine->ry+affine->tx;\n    extent[i].y=point.x*affine->rx+point.y*affine->sy+affine->ty;\n  }\n  min=extent[0];\n  max=extent[0];\n  for (i=1; i < 4; i++)\n  {\n    if (min.x > extent[i].x)\n      min.x=extent[i].x;\n    if (min.y > extent[i].y)\n      min.y=extent[i].y;\n    if (max.x < extent[i].x)\n      max.x=extent[i].x;\n    if (max.y < extent[i].y)\n      max.y=extent[i].y;\n  }\n  /*\n    Affine transform image.\n  */\n  if (SetImageStorageClass(image,DirectClass) == MagickFalse)\n    return(MagickFalse);\n  status=MagickTrue;\n  edge.x1=MagickMax(min.x,0.0);\n  edge.y1=MagickMax(min.y,0.0);\n  edge.x2=MagickMin(max.x,(double) image->columns-1.0);\n  edge.y2=MagickMin(max.y,(double) image->rows-1.0);\n  inverse_affine=InverseAffineMatrix(affine);\n  GetMagickPixelPacket(image,&zero);\n  exception=(&image->exception);\n  start=(ssize_t) ceil(edge.y1-0.5);\n  stop=(ssize_t) floor(edge.y2+0.5);\n  source_view=AcquireVirtualCacheView(source,exception);\n  image_view=AcquireAuthenticCacheView(image,exception);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(source,image,1,1)\n#endif\n  for (y=start; y <= stop; y++)\n  {\n    MagickPixelPacket\n      composite,\n      pixel;\n\n    PointInfo\n      point;\n\n    register IndexPacket\n      *magick_restrict indexes;\n\n    register ssize_t\n      x;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    SegmentInfo\n      inverse_edge;\n\n    ssize_t\n      x_offset;\n\n    inverse_edge=AffineEdge(source,&inverse_affine,(double) y,&edge);\n    if (inverse_edge.x2 < inverse_edge.x1)\n      continue;\n    q=GetCacheViewAuthenticPixels(image_view,(ssize_t) ceil(inverse_edge.x1-\n      0.5),y,(size_t) (floor(inverse_edge.x2+0.5)-ceil(inverse_edge.x1-0.5)+1),\n      1,exception);\n    if (q == (PixelPacket *) NULL)\n      continue;\n    indexes=GetCacheViewAuthenticIndexQueue(image_view);\n    pixel=zero;\n    composite=zero;\n    x_offset=0;\n    for (x=(ssize_t) ceil(inverse_edge.x1-0.5); x <= (ssize_t) floor(inverse_edge.x2+0.5); x++)\n    {\n      point.x=(double) x*inverse_affine.sx+y*inverse_affine.ry+\n        inverse_affine.tx;\n      point.y=(double) x*inverse_affine.rx+y*inverse_affine.sy+\n        inverse_affine.ty;\n      (void) InterpolateMagickPixelPacket(source,source_view,\n        UndefinedInterpolatePixel,point.x,point.y,&pixel,exception);\n      SetMagickPixelPacket(image,q,indexes+x_offset,&composite);\n      MagickPixelCompositeOver(&pixel,pixel.opacity,&composite,\n        composite.opacity,&composite);\n      SetPixelPacket(image,&composite,q,indexes+x_offset);\n      x_offset++;\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  source_view=DestroyCacheView(source_view);\n  image_view=DestroyCacheView(image_view);\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w B o u n d i n g R e c t a n g l e s                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawBoundingRectangles() draws the bounding rectangles on the image.  This\n%  is only useful for developers debugging the rendering algorithm.\n%\n%  The format of the DrawBoundingRectangles method is:\n%\n%      void DrawBoundingRectangles(Image *image,const DrawInfo *draw_info,\n%        PolygonInfo *polygon_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o polygon_info: Specifies a pointer to a PolygonInfo structure.\n%\n*/\nstatic void DrawBoundingRectangles(Image *image,const DrawInfo *draw_info,\n  const PolygonInfo *polygon_info)\n{\n  double\n    mid;\n\n  DrawInfo\n    *clone_info;\n\n  PointInfo\n    end,\n    resolution,\n    start;\n\n  PrimitiveInfo\n    primitive_info[6];\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    bounds;\n\n  ssize_t\n    coordinates;\n\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  (void) QueryColorDatabase(\"#0000\",&clone_info->fill,&image->exception);\n  resolution.x=DefaultResolution;\n  resolution.y=DefaultResolution;\n  if (clone_info->density != (char *) NULL)\n    {\n      GeometryInfo\n        geometry_info;\n\n      MagickStatusType\n        flags;\n\n      flags=ParseGeometry(clone_info->density,&geometry_info);\n      resolution.x=geometry_info.rho;\n      resolution.y=geometry_info.sigma;\n      if ((flags & SigmaValue) == MagickFalse)\n        resolution.y=resolution.x;\n    }\n  mid=(resolution.x/72.0)*ExpandAffine(&clone_info->affine)*\n    clone_info->stroke_width/2.0;\n  bounds.x1=0.0;\n  bounds.y1=0.0;\n  bounds.x2=0.0;\n  bounds.y2=0.0;\n  if (polygon_info != (PolygonInfo *) NULL)\n    {\n      bounds=polygon_info->edges[0].bounds;\n      for (i=1; i < (ssize_t) polygon_info->number_edges; i++)\n      {\n        if (polygon_info->edges[i].bounds.x1 < (double) bounds.x1)\n          bounds.x1=polygon_info->edges[i].bounds.x1;\n        if (polygon_info->edges[i].bounds.y1 < (double) bounds.y1)\n          bounds.y1=polygon_info->edges[i].bounds.y1;\n        if (polygon_info->edges[i].bounds.x2 > (double) bounds.x2)\n          bounds.x2=polygon_info->edges[i].bounds.x2;\n        if (polygon_info->edges[i].bounds.y2 > (double) bounds.y2)\n          bounds.y2=polygon_info->edges[i].bounds.y2;\n      }\n      bounds.x1-=mid;\n      bounds.x1=bounds.x1 < 0.0 ? 0.0 : bounds.x1 >= (double)\n        image->columns ? (double) image->columns-1 : bounds.x1;\n      bounds.y1-=mid;\n      bounds.y1=bounds.y1 < 0.0 ? 0.0 : bounds.y1 >= (double)\n        image->rows ? (double) image->rows-1 : bounds.y1;\n      bounds.x2+=mid;\n      bounds.x2=bounds.x2 < 0.0 ? 0.0 : bounds.x2 >= (double)\n        image->columns ? (double) image->columns-1 : bounds.x2;\n      bounds.y2+=mid;\n      bounds.y2=bounds.y2 < 0.0 ? 0.0 : bounds.y2 >= (double)\n        image->rows ? (double) image->rows-1 : bounds.y2;\n      for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n      {\n        if (polygon_info->edges[i].direction != 0)\n          (void) QueryColorDatabase(\"red\",&clone_info->stroke,\n            &image->exception);\n        else\n          (void) QueryColorDatabase(\"green\",&clone_info->stroke,\n            &image->exception);\n        start.x=(double) (polygon_info->edges[i].bounds.x1-mid);\n        start.y=(double) (polygon_info->edges[i].bounds.y1-mid);\n        end.x=(double) (polygon_info->edges[i].bounds.x2+mid);\n        end.y=(double) (polygon_info->edges[i].bounds.y2+mid);\n        primitive_info[0].primitive=RectanglePrimitive;\n        TraceRectangle(primitive_info,start,end);\n        primitive_info[0].method=ReplaceMethod;\n        coordinates=(ssize_t) primitive_info[0].coordinates;\n        primitive_info[coordinates].primitive=UndefinedPrimitive;\n        (void) DrawPrimitive(image,clone_info,primitive_info);\n      }\n    }\n  (void) QueryColorDatabase(\"blue\",&clone_info->stroke,&image->exception);\n  start.x=(double) (bounds.x1-mid);\n  start.y=(double) (bounds.y1-mid);\n  end.x=(double) (bounds.x2+mid);\n  end.y=(double) (bounds.y2+mid);\n  primitive_info[0].primitive=RectanglePrimitive;\n  TraceRectangle(primitive_info,start,end);\n  primitive_info[0].method=ReplaceMethod;\n  coordinates=(ssize_t) primitive_info[0].coordinates;\n  primitive_info[coordinates].primitive=UndefinedPrimitive;\n  (void) DrawPrimitive(image,clone_info,primitive_info);\n  clone_info=DestroyDrawInfo(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w C l i p P a t h                                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawClipPath() draws the clip path on the image mask.\n%\n%  The format of the DrawClipPath method is:\n%\n%      MagickBooleanType DrawClipPath(Image *image,const DrawInfo *draw_info,\n%        const char *name)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o name: the name of the clip path.\n%\n*/\nMagickExport MagickBooleanType DrawClipPath(Image *image,\n  const DrawInfo *draw_info,const char *name)\n{\n  char\n    clip_mask[MaxTextExtent];\n\n  const char\n    *value;\n\n  DrawInfo\n    *clone_info;\n\n  MagickStatusType\n    status;\n\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  (void) FormatLocaleString(clip_mask,MaxTextExtent,\"%s\",name);\n  value=GetImageArtifact(image,clip_mask);\n  if (value == (const char *) NULL)\n    return(MagickFalse);\n  if (image->clip_mask == (Image *) NULL)\n    {\n      Image\n        *clip_mask;\n\n      clip_mask=CloneImage(image,image->columns,image->rows,MagickTrue,\n        &image->exception);\n      if (clip_mask == (Image *) NULL)\n        return(MagickFalse);\n      (void) SetImageClipMask(image,clip_mask);\n      clip_mask=DestroyImage(clip_mask);\n    }\n  (void) QueryColorDatabase(\"#00000000\",&image->clip_mask->background_color,\n    &image->exception);\n  image->clip_mask->background_color.opacity=(Quantum) TransparentOpacity;\n  (void) SetImageBackgroundColor(image->clip_mask);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"\\nbegin clip-path %s\",\n      draw_info->clip_mask);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  (void) CloneString(&clone_info->primitive,value);\n  (void) QueryColorDatabase(\"#ffffff\",&clone_info->fill,&image->exception);\n  clone_info->clip_mask=(char *) NULL;\n  status=DrawImage(image->clip_mask,clone_info);\n  status&=NegateImage(image->clip_mask,MagickFalse);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end clip-path\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w D a s h P o l y g o n                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawDashPolygon() draws a dashed polygon (line, rectangle, ellipse) on the\n%  image while respecting the dash offset and dash pattern attributes.\n%\n%  The format of the DrawDashPolygon method is:\n%\n%      MagickBooleanType DrawDashPolygon(const DrawInfo *draw_info,\n%        const PrimitiveInfo *primitive_info,Image *image)\n%\n%  A description of each parameter follows:\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n%    o image: the image.\n%\n%\n*/\nstatic MagickBooleanType DrawDashPolygon(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info,Image *image)\n{\n  double\n    length,\n    maximum_length,\n    offset,\n    scale,\n    total_length;\n\n  DrawInfo\n    *clone_info;\n\n  MagickStatusType\n    status;\n\n  PrimitiveInfo\n    *dash_polygon;\n\n  register double\n    dx,\n    dy;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_vertices;\n\n  ssize_t\n    j,\n    n;\n\n  assert(draw_info != (const DrawInfo *) NULL);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin draw-dash\");\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n  number_vertices=(size_t) i;\n  dash_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    (2UL*number_vertices+1UL),sizeof(*dash_polygon));\n  if (dash_polygon == (PrimitiveInfo *) NULL)\n    return(MagickFalse);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->miterlimit=0;\n  dash_polygon[0]=primitive_info[0];\n  scale=ExpandAffine(&draw_info->affine);\n  length=scale*(draw_info->dash_pattern[0]-0.5);\n  offset=fabs(draw_info->dash_offset) >= DrawEpsilon ?\n     scale*draw_info->dash_offset : 0.0;\n  j=1;\n  for (n=0; offset > 0.0; j=0)\n  {\n    if (draw_info->dash_pattern[n] <= 0.0)\n      break;\n    length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n    if (offset > length)\n      {\n        offset-=length;\n        n++;\n        length=scale*(draw_info->dash_pattern[n]+0.5);\n        continue;\n      }\n    if (offset < length)\n      {\n        length-=offset;\n        offset=0.0;\n        break;\n      }\n    offset=0.0;\n    n++;\n  }\n  status=MagickTrue;\n  maximum_length=0.0;\n  total_length=0.0;\n  for (i=1; (i < (ssize_t) number_vertices) && (length >= 0.0); i++)\n  {\n    dx=primitive_info[i].point.x-primitive_info[i-1].point.x;\n    dy=primitive_info[i].point.y-primitive_info[i-1].point.y;\n    maximum_length=hypot((double) dx,dy);\n    if (fabs(length) < DrawEpsilon)\n      {\n        n++;\n        if (fabs(draw_info->dash_pattern[n]) < DrawEpsilon)\n          n=0;\n        length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n      }\n    for (total_length=0.0; (length >= 0.0) && (maximum_length >= (total_length+length)); )\n    {\n      total_length+=length;\n      if ((n & 0x01) != 0)\n        {\n          dash_polygon[0]=primitive_info[0];\n          dash_polygon[0].point.x=(double) (primitive_info[i-1].point.x+dx*\n            total_length/maximum_length);\n          dash_polygon[0].point.y=(double) (primitive_info[i-1].point.y+dy*\n            total_length/maximum_length);\n          j=1;\n        }\n      else\n        {\n          if ((j+1) > (ssize_t) (2*number_vertices))\n            break;\n          dash_polygon[j]=primitive_info[i-1];\n          dash_polygon[j].point.x=(double) (primitive_info[i-1].point.x+dx*\n            total_length/maximum_length);\n          dash_polygon[j].point.y=(double) (primitive_info[i-1].point.y+dy*\n            total_length/maximum_length);\n          dash_polygon[j].coordinates=1;\n          j++;\n          dash_polygon[0].coordinates=(size_t) j;\n          dash_polygon[j].primitive=UndefinedPrimitive;\n          status&=DrawStrokePolygon(image,clone_info,dash_polygon);\n        }\n      n++;\n      if (fabs(draw_info->dash_pattern[n]) < DrawEpsilon)\n        n=0;\n      length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n    }\n    length-=(maximum_length-total_length);\n    if ((n & 0x01) != 0)\n      continue;\n    dash_polygon[j]=primitive_info[i];\n    dash_polygon[j].coordinates=1;\n    j++;\n  }\n  if ((total_length <= maximum_length) && ((n & 0x01) == 0) && (j > 1))\n    {\n      dash_polygon[j]=primitive_info[i-1];\n      dash_polygon[j].point.x+=DrawEpsilon;\n      dash_polygon[j].point.y+=DrawEpsilon;\n      dash_polygon[j].coordinates=1;\n      j++;\n      dash_polygon[0].coordinates=(size_t) j;\n      dash_polygon[j].primitive=UndefinedPrimitive;\n      status&=DrawStrokePolygon(image,clone_info,dash_polygon);\n    }\n  dash_polygon=(PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end draw-dash\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w I m a g e                                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawImage() draws a graphic primitive on your image.  The primitive\n%  may be represented as a string or filename.  Precede the filename with an\n%  \"at\" sign (@) and the contents of the file are drawn on the image.  You\n%  can affect how text is drawn by setting one or more members of the draw\n%  info structure.\n%\n%  The format of the DrawImage method is:\n%\n%      MagickBooleanType DrawImage(Image *image,const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n*/\n\nstatic inline MagickBooleanType IsPoint(const char *point)\n{\n  char\n    *p;\n\n  double\n    value;\n\n  value=StringToDouble(point,&p);\n  return((fabs(value) < DrawEpsilon) && (p == point) ? MagickFalse : MagickTrue);\n}\n\nstatic inline void TracePoint(PrimitiveInfo *primitive_info,\n  const PointInfo point)\n{\n  primitive_info->coordinates=1;\n  primitive_info->point=point;\n}\n\nMagickExport MagickBooleanType DrawImage(Image *image,const DrawInfo *draw_info)\n{\n#define RenderImageTag  \"Render/Image\"\n\n  AffineMatrix\n    affine,\n    current;\n\n  char\n    key[2*MaxTextExtent],\n    keyword[MaxTextExtent],\n    geometry[MaxTextExtent],\n    name[MaxTextExtent],\n    *next_token,\n    pattern[MaxTextExtent],\n    *primitive,\n    *token;\n\n  const char\n    *q;\n\n  double\n    angle,\n    factor,\n    primitive_extent;\n\n  DrawInfo\n    **graphic_context;\n\n  MagickBooleanType\n    proceed;\n\n  MagickSizeType\n    length,\n    number_points;\n\n  MagickStatusType\n    status;\n\n  PointInfo\n    point;\n\n  PixelPacket\n    start_color;\n\n  PrimitiveInfo\n    *primitive_info;\n\n  PrimitiveType\n    primitive_type;\n\n  register const char\n    *p;\n\n  register ssize_t\n    i,\n    x;\n\n  SegmentInfo\n    bounds;\n\n  size_t\n    extent;\n\n  ssize_t\n    j,\n    k,\n    n;\n\n  /*\n    Ensure the annotation info is valid.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  if ((draw_info->primitive == (char *) NULL) ||\n      (*draw_info->primitive == '\\0'))\n    return(MagickFalse);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"begin draw-image\");\n  if (*draw_info->primitive != '@')\n    primitive=AcquireString(draw_info->primitive);\n  else\n    primitive=FileToString(draw_info->primitive+1,~0UL,&image->exception);\n  if (primitive == (char *) NULL)\n    return(MagickFalse);\n  primitive_extent=(double) strlen(primitive);\n  (void) SetImageArtifact(image,\"MVG\",primitive);\n  n=0;\n  /*\n    Allocate primitive info memory.\n  */\n  graphic_context=(DrawInfo **) AcquireMagickMemory(\n    sizeof(*graphic_context));\n  if (graphic_context == (DrawInfo **) NULL)\n    {\n      primitive=DestroyString(primitive);\n      ThrowBinaryException(ResourceLimitError,\"MemoryAllocationFailed\",\n        image->filename);\n    }\n  number_points=6553;\n  primitive_info=(PrimitiveInfo *) AcquireQuantumMemory((size_t) number_points,\n    sizeof(*primitive_info));\n  if (primitive_info == (PrimitiveInfo *) NULL)\n    {\n      primitive=DestroyString(primitive);\n      for ( ; n >= 0; n--)\n        graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n      graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);\n      ThrowBinaryException(ResourceLimitError,\"MemoryAllocationFailed\",\n        image->filename);\n    }\n  graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  graphic_context[n]->viewbox=image->page;\n  if ((image->page.width == 0) || (image->page.height == 0))\n    {\n      graphic_context[n]->viewbox.width=image->columns;\n      graphic_context[n]->viewbox.height=image->rows;\n    }\n  token=AcquireString(primitive);\n  extent=strlen(token)+MaxTextExtent;\n  (void) QueryColorDatabase(\"#000000\",&start_color,&image->exception);\n  if (SetImageStorageClass(image,DirectClass) == MagickFalse)\n    return(MagickFalse);\n  status=MagickTrue;\n  for (q=primitive; *q != '\\0'; )\n  {\n    /*\n      Interpret graphic primitive.\n    */\n    GetNextToken(q,&q,MaxTextExtent,keyword);\n    if (*keyword == '\\0')\n      break;\n    if (*keyword == '#')\n      {\n        /*\n          Comment.\n        */\n        while ((*q != '\\n') && (*q != '\\0'))\n          q++;\n        continue;\n      }\n    p=q-strlen(keyword)-1;\n    primitive_type=UndefinedPrimitive;\n    current=graphic_context[n]->affine;\n    GetAffineMatrix(&affine);\n    switch (*keyword)\n    {\n      case ';':\n        break;\n      case 'a':\n      case 'A':\n      {\n        if (LocaleCompare(\"affine\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.sx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.rx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ry=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.sy=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.tx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ty=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"arc\",keyword) == 0)\n          {\n            primitive_type=ArcPrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'b':\n      case 'B':\n      {\n        if (LocaleCompare(\"bezier\",keyword) == 0)\n          {\n            primitive_type=BezierPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"border-color\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&graphic_context[n]->border_color,\n              &image->exception);\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'c':\n      case 'C':\n      {\n        if (LocaleCompare(\"clip-path\",keyword) == 0)\n          {\n            /*\n              Create clip mask.\n            */\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->clip_mask,token);\n            (void) DrawClipPath(image,graphic_context[n],\n              graphic_context[n]->clip_mask);\n            break;\n          }\n        if (LocaleCompare(\"clip-rule\",keyword) == 0)\n          {\n            ssize_t\n              fill_rule;\n\n            GetNextToken(q,&q,extent,token);\n            fill_rule=ParseCommandOption(MagickFillRuleOptions,MagickFalse,\n              token);\n            if (fill_rule == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->fill_rule=(FillRule) fill_rule;\n            break;\n          }\n        if (LocaleCompare(\"clip-units\",keyword) == 0)\n          {\n            ssize_t\n              clip_units;\n\n            GetNextToken(q,&q,extent,token);\n            clip_units=ParseCommandOption(MagickClipPathOptions,MagickFalse,\n              token);\n            if (clip_units == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->clip_units=(ClipPathUnits) clip_units;\n            if (clip_units == ObjectBoundingBox)\n              {\n                GetAffineMatrix(&current);\n                affine.sx=draw_info->bounds.x2;\n                affine.sy=draw_info->bounds.y2;\n                affine.tx=draw_info->bounds.x1;\n                affine.ty=draw_info->bounds.y1;\n                break;\n              }\n            break;\n          }\n        if (LocaleCompare(\"circle\",keyword) == 0)\n          {\n            primitive_type=CirclePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"color\",keyword) == 0)\n          {\n            primitive_type=ColorPrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'd':\n      case 'D':\n      {\n        if (LocaleCompare(\"decorate\",keyword) == 0)\n          {\n            ssize_t\n              decorate;\n\n            GetNextToken(q,&q,extent,token);\n            decorate=ParseCommandOption(MagickDecorateOptions,MagickFalse,\n              token);\n            if (decorate == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->decorate=(DecorationType) decorate;\n            break;\n          }\n        if (LocaleCompare(\"direction\",keyword) == 0)\n          {\n            ssize_t\n              direction;\n\n            GetNextToken(q,&q,extent,token);\n            direction=ParseCommandOption(MagickDirectionOptions,MagickFalse,\n              token);\n            if (direction == -1)\n              status=MagickFalse;\n            else\n              graphic_context[n]->direction=(DirectionType) direction;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'e':\n      case 'E':\n      {\n        if (LocaleCompare(\"ellipse\",keyword) == 0)\n          {\n            primitive_type=EllipsePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"encoding\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->encoding,token);\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'f':\n      case 'F':\n      {\n        if (LocaleCompare(\"fill\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) FormatLocaleString(pattern,MaxTextExtent,\"%s\",token);\n            if (GetImageArtifact(image,pattern) != (const char *) NULL)\n              (void) DrawPatternPath(image,draw_info,token,\n                &graphic_context[n]->fill_pattern);\n            else\n              {\n                status&=QueryColorDatabase(token,&graphic_context[n]->fill,\n                  &image->exception);\n                if (graphic_context[n]->fill_opacity != OpaqueOpacity)\n                  graphic_context[n]->fill.opacity=\n                    graphic_context[n]->fill_opacity;\n                if (status == MagickFalse)\n                  {\n                    ImageInfo\n                      *pattern_info;\n\n                    pattern_info=AcquireImageInfo();\n                    (void) CopyMagickString(pattern_info->filename,token,\n                      MaxTextExtent);\n                    graphic_context[n]->fill_pattern=\n                      ReadImage(pattern_info,&image->exception);\n                    CatchException(&image->exception);\n                    pattern_info=DestroyImageInfo(pattern_info);\n                  }\n              }\n            break;\n          }\n        if (LocaleCompare(\"fill-opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->fill.opacity=QuantumRange*factor*\n              StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"fill-rule\",keyword) == 0)\n          {\n            ssize_t\n              fill_rule;\n\n            GetNextToken(q,&q,extent,token);\n            fill_rule=ParseCommandOption(MagickFillRuleOptions,MagickFalse,\n              token);\n            if (fill_rule == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->fill_rule=(FillRule) fill_rule;\n            break;\n          }\n        if (LocaleCompare(\"font\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->font,token);\n            if (LocaleCompare(\"none\",token) == 0)\n              graphic_context[n]->font=(char *)\n                RelinquishMagickMemory(graphic_context[n]->font);\n            break;\n          }\n        if (LocaleCompare(\"font-family\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->family,token);\n            break;\n          }\n        if (LocaleCompare(\"font-size\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->pointsize=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"font-stretch\",keyword) == 0)\n          {\n            ssize_t\n              stretch;\n\n            GetNextToken(q,&q,extent,token);\n            stretch=ParseCommandOption(MagickStretchOptions,MagickFalse,token);\n            if (stretch == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->stretch=(StretchType) stretch;\n            break;\n          }\n        if (LocaleCompare(\"font-style\",keyword) == 0)\n          {\n            ssize_t\n              style;\n\n            GetNextToken(q,&q,extent,token);\n            style=ParseCommandOption(MagickStyleOptions,MagickFalse,token);\n            if (style == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->style=(StyleType) style;\n            break;\n          }\n        if (LocaleCompare(\"font-weight\",keyword) == 0)\n          {\n            ssize_t\n              weight;\n\n            GetNextToken(q,&q,extent,token);\n            weight=ParseCommandOption(MagickWeightOptions,MagickFalse,token);\n            if (weight == -1)\n              weight=(ssize_t) StringToUnsignedLong(token);\n            graphic_context[n]->weight=(size_t) weight;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'g':\n      case 'G':\n      {\n        if (LocaleCompare(\"gradient-units\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"gravity\",keyword) == 0)\n          {\n            ssize_t\n              gravity;\n\n            GetNextToken(q,&q,extent,token);\n            gravity=ParseCommandOption(MagickGravityOptions,MagickFalse,token);\n            if (gravity == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->gravity=(GravityType) gravity;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'i':\n      case 'I':\n      {\n        if (LocaleCompare(\"image\",keyword) == 0)\n          {\n            ssize_t\n              compose;\n\n            primitive_type=ImagePrimitive;\n            GetNextToken(q,&q,extent,token);\n            compose=ParseCommandOption(MagickComposeOptions,MagickFalse,token);\n            if (compose == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->compose=(CompositeOperator) compose;\n            break;\n          }\n        if (LocaleCompare(\"interline-spacing\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->interline_spacing=StringToDouble(token,\n              &next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"interword-spacing\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->interword_spacing=StringToDouble(token,\n              &next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'k':\n      case 'K':\n      {\n        if (LocaleCompare(\"kerning\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->kerning=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'l':\n      case 'L':\n      {\n        if (LocaleCompare(\"line\",keyword) == 0)\n          {\n            primitive_type=LinePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'm':\n      case 'M':\n      {\n        if (LocaleCompare(\"matte\",keyword) == 0)\n          {\n            primitive_type=MattePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'o':\n      case 'O':\n      {\n        if (LocaleCompare(\"offset\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->fill_opacity=QuantumRange-QuantumRange*((1.0-\n              QuantumScale*graphic_context[n]->fill_opacity)*factor*\n              StringToDouble(token,&next_token));\n            graphic_context[n]->stroke_opacity=QuantumRange-QuantumRange*((1.0-\n              QuantumScale*graphic_context[n]->stroke_opacity)*factor*\n              StringToDouble(token,&next_token));\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'p':\n      case 'P':\n      {\n        if (LocaleCompare(\"path\",keyword) == 0)\n          {\n            primitive_type=PathPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"point\",keyword) == 0)\n          {\n            primitive_type=PointPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"polyline\",keyword) == 0)\n          {\n            primitive_type=PolylinePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"polygon\",keyword) == 0)\n          {\n            primitive_type=PolygonPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"pop\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            if (LocaleCompare(\"clip-path\",token) == 0)\n              break;\n            if (LocaleCompare(\"defs\",token) == 0)\n              break;\n            if (LocaleCompare(\"gradient\",token) == 0)\n              break;\n            if (LocaleCompare(\"graphic-context\",token) == 0)\n              {\n                if (n <= 0)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),DrawError,\n                      \"UnbalancedGraphicContextPushPop\",\"`%s'\",token);\n                    status=MagickFalse;\n                    n=0;\n                    break;\n                  }\n                if (graphic_context[n]->clip_mask != (char *) NULL)\n                  if (LocaleCompare(graphic_context[n]->clip_mask,\n                      graphic_context[n-1]->clip_mask) != 0)\n                    (void) SetImageClipMask(image,(Image *) NULL);\n                graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n                n--;\n                break;\n              }\n            if (LocaleCompare(\"pattern\",token) == 0)\n              break;\n            status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"push\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            if (LocaleCompare(\"clip-path\",token) == 0)\n              {\n                char\n                  name[MaxTextExtent];\n\n                GetNextToken(q,&q,extent,token);\n                (void) FormatLocaleString(name,MaxTextExtent,\"%s\",token);\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"clip-path\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                (void) SetImageArtifact(image,name,token);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"gradient\",token) == 0)\n              {\n                char\n                  key[2*MaxTextExtent],\n                  name[MaxTextExtent],\n                  type[MaxTextExtent];\n\n                SegmentInfo\n                  segment;\n\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(name,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(type,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                segment.x1=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.y1=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.x2=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.y2=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                if (LocaleCompare(type,\"radial\") == 0)\n                  {\n                    GetNextToken(q,&q,extent,token);\n                    if (*token == ',')\n                      GetNextToken(q,&q,extent,token);\n                  }\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"gradient\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                bounds.x1=graphic_context[n]->affine.sx*segment.x1+\n                  graphic_context[n]->affine.ry*segment.y1+\n                  graphic_context[n]->affine.tx;\n                bounds.y1=graphic_context[n]->affine.rx*segment.x1+\n                  graphic_context[n]->affine.sy*segment.y1+\n                  graphic_context[n]->affine.ty;\n                bounds.x2=graphic_context[n]->affine.sx*segment.x2+\n                  graphic_context[n]->affine.ry*segment.y2+\n                  graphic_context[n]->affine.tx;\n                bounds.y2=graphic_context[n]->affine.rx*segment.x2+\n                  graphic_context[n]->affine.sy*segment.y2+\n                  graphic_context[n]->affine.ty;\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s\",name);\n                (void) SetImageArtifact(image,key,token);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-type\",name);\n                (void) SetImageArtifact(image,key,type);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-geometry\",name);\n                (void) FormatLocaleString(geometry,MaxTextExtent,\n                  \"%gx%g%+.15g%+.15g\",\n                  MagickMax(fabs(bounds.x2-bounds.x1+1.0),1.0),\n                  MagickMax(fabs(bounds.y2-bounds.y1+1.0),1.0),\n                  bounds.x1,bounds.y1);\n                (void) SetImageArtifact(image,key,geometry);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"pattern\",token) == 0)\n              {\n                RectangleInfo\n                  bounds;\n\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(name,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                bounds.x=(ssize_t) ceil(StringToDouble(token,&next_token)-0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.y=(ssize_t) ceil(StringToDouble(token,&next_token)-0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.width=(size_t) floor(StringToDouble(token,&next_token)+\n                  0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.height=(size_t) floor(StringToDouble(token,&next_token)+\n                  0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"pattern\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s\",name);\n                (void) SetImageArtifact(image,key,token);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-geometry\",name);\n                (void) FormatLocaleString(geometry,MaxTextExtent,\n                  \"%.20gx%.20g%+.20g%+.20g\",(double) bounds.width,(double)\n                  bounds.height,(double) bounds.x,(double) bounds.y);\n                (void) SetImageArtifact(image,key,geometry);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"graphic-context\",token) == 0)\n              {\n                n++;\n                graphic_context=(DrawInfo **) ResizeQuantumMemory(\n                  graphic_context,(size_t) (n+1),sizeof(*graphic_context));\n                if (graphic_context == (DrawInfo **) NULL)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),ResourceLimitError,\n                      \"MemoryAllocationFailed\",\"`%s'\",image->filename);\n                    break;\n                  }\n                graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,\n                  graphic_context[n-1]);\n                break;\n              }\n            if (LocaleCompare(\"defs\",token) == 0)\n              break;\n            status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'r':\n      case 'R':\n      {\n        if (LocaleCompare(\"rectangle\",keyword) == 0)\n          {\n            primitive_type=RectanglePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"rotate\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.sx=cos(DegreesToRadians(fmod((double) angle,360.0)));\n            affine.rx=sin(DegreesToRadians(fmod((double) angle,360.0)));\n            affine.ry=(-sin(DegreesToRadians(fmod((double) angle,360.0))));\n            affine.sy=cos(DegreesToRadians(fmod((double) angle,360.0)));\n            break;\n          }\n        if (LocaleCompare(\"roundRectangle\",keyword) == 0)\n          {\n            primitive_type=RoundRectanglePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 's':\n      case 'S':\n      {\n        if (LocaleCompare(\"scale\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.sx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.sy=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"skewX\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.ry=sin(DegreesToRadians(angle));\n            break;\n          }\n        if (LocaleCompare(\"skewY\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.rx=(-tan(DegreesToRadians(angle)/2.0));\n            break;\n          }\n        if (LocaleCompare(\"stop-color\",keyword) == 0)\n          {\n            GradientType\n              type;\n\n            PixelPacket\n              stop_color;\n\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&stop_color,&image->exception);\n            type=LinearGradient;\n            if (draw_info->gradient.type == RadialGradient)\n              type=RadialGradient;\n            (void) GradientImage(image,type,PadSpread,&start_color,&stop_color);\n            start_color=stop_color;\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"stroke\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) FormatLocaleString(pattern,MaxTextExtent,\"%s\",token);\n            if (GetImageArtifact(image,pattern) != (const char *) NULL)\n              (void) DrawPatternPath(image,draw_info,token,\n                &graphic_context[n]->stroke_pattern);\n            else\n              {\n                status&=QueryColorDatabase(token,&graphic_context[n]->stroke,\n                  &image->exception);\n                if (graphic_context[n]->stroke_opacity != OpaqueOpacity)\n                  graphic_context[n]->stroke.opacity=\n                    graphic_context[n]->stroke_opacity;\n                if (status == MagickFalse)\n                  {\n                    ImageInfo\n                      *pattern_info;\n\n                    pattern_info=AcquireImageInfo();\n                    (void) CopyMagickString(pattern_info->filename,token,\n                      MaxTextExtent);\n                    graphic_context[n]->stroke_pattern=\n                      ReadImage(pattern_info,&image->exception);\n                    CatchException(&image->exception);\n                    pattern_info=DestroyImageInfo(pattern_info);\n                  }\n              }\n            break;\n          }\n        if (LocaleCompare(\"stroke-antialias\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->stroke_antialias=\n              StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-dasharray\",keyword) == 0)\n          {\n            if (graphic_context[n]->dash_pattern != (double *) NULL)\n              graphic_context[n]->dash_pattern=(double *)\n                RelinquishMagickMemory(graphic_context[n]->dash_pattern);\n            if (IsPoint(q) != MagickFalse)\n              {\n                const char\n                  *p;\n\n                p=q;\n                GetNextToken(p,&p,extent,token);\n                if (*token == ',')\n                  GetNextToken(p,&p,extent,token);\n                for (x=0; IsPoint(token) != MagickFalse; x++)\n                {\n                  GetNextToken(p,&p,extent,token);\n                  if (*token == ',')\n                    GetNextToken(p,&p,extent,token);\n                }\n                graphic_context[n]->dash_pattern=(double *)\n                  AcquireQuantumMemory((size_t) (2UL*x+1UL),\n                  sizeof(*graphic_context[n]->dash_pattern));\n                if (graphic_context[n]->dash_pattern == (double *) NULL)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),ResourceLimitError,\n                      \"MemoryAllocationFailed\",\"`%s'\",image->filename);\n                    status=MagickFalse;\n                    break;\n                  }\n                for (j=0; j < x; j++)\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (*token == ',')\n                    GetNextToken(q,&q,extent,token);\n                  graphic_context[n]->dash_pattern[j]=StringToDouble(token,\n                    &next_token);\n                  if (token == next_token)\n                    status=MagickFalse;\n                  if (graphic_context[n]->dash_pattern[j] < 0.0)\n                    status=MagickFalse;\n                }\n                if ((x & 0x01) != 0)\n                  for ( ; j < (2*x); j++)\n                    graphic_context[n]->dash_pattern[j]=\n                      graphic_context[n]->dash_pattern[j-x];\n                graphic_context[n]->dash_pattern[j]=0.0;\n                break;\n              }\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"stroke-dashoffset\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->dash_offset=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-linecap\",keyword) == 0)\n          {\n            ssize_t\n              linecap;\n\n            GetNextToken(q,&q,extent,token);\n            linecap=ParseCommandOption(MagickLineCapOptions,MagickFalse,token);\n            if (linecap == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->linecap=(LineCap) linecap;\n            break;\n          }\n        if (LocaleCompare(\"stroke-linejoin\",keyword) == 0)\n          {\n            ssize_t\n              linejoin;\n\n            GetNextToken(q,&q,extent,token);\n            linejoin=ParseCommandOption(MagickLineJoinOptions,MagickFalse,\n              token);\n            if (linejoin == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->linejoin=(LineJoin) linejoin;\n            break;\n          }\n        if (LocaleCompare(\"stroke-miterlimit\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->miterlimit=StringToUnsignedLong(token);\n            break;\n          }\n        if (LocaleCompare(\"stroke-opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->stroke.opacity=QuantumRange*factor*\n              StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-width\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->stroke_width=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 't':\n      case 'T':\n      {\n        if (LocaleCompare(\"text\",keyword) == 0)\n          {\n            primitive_type=TextPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"text-align\",keyword) == 0)\n          {\n            ssize_t\n              align;\n\n            GetNextToken(q,&q,extent,token);\n            align=ParseCommandOption(MagickAlignOptions,MagickFalse,token);\n            if (align == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->align=(AlignType) align;\n            break;\n          }\n        if (LocaleCompare(\"text-anchor\",keyword) == 0)\n          {\n            ssize_t\n              align;\n\n            GetNextToken(q,&q,extent,token);\n            align=ParseCommandOption(MagickAlignOptions,MagickFalse,token);\n            if (align == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->align=(AlignType) align;\n            break;\n          }\n        if (LocaleCompare(\"text-antialias\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->text_antialias=\n              StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"text-undercolor\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&graphic_context[n]->undercolor,\n              &image->exception);\n            break;\n          }\n        if (LocaleCompare(\"translate\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.tx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ty=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'v':\n      case 'V':\n      {\n        if (LocaleCompare(\"viewbox\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.x=(ssize_t) ceil(StringToDouble(token,\n              &next_token)-0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.y=(ssize_t) ceil(StringToDouble(token,\n              &next_token)-0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.width=(size_t) floor(StringToDouble(\n              token,&next_token)+0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.height=(size_t) floor(StringToDouble(\n              token,&next_token)+0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      default:\n      {\n        status=MagickFalse;\n        break;\n      }\n    }\n    if (status == MagickFalse)\n      break;\n    if ((fabs(affine.sx-1.0) >= DrawEpsilon) ||\n        (fabs(affine.rx) >= DrawEpsilon) ||\n        (fabs(affine.ry) >= DrawEpsilon) ||\n        (fabs(affine.sy-1.0) >= DrawEpsilon) ||\n        (fabs(affine.tx) >= DrawEpsilon) ||\n        (fabs(affine.ty) >= DrawEpsilon))\n      {\n        graphic_context[n]->affine.sx=current.sx*affine.sx+current.ry*affine.rx;\n        graphic_context[n]->affine.rx=current.rx*affine.sx+current.sy*affine.rx;\n        graphic_context[n]->affine.ry=current.sx*affine.ry+current.ry*affine.sy;\n        graphic_context[n]->affine.sy=current.rx*affine.ry+current.sy*affine.sy;\n        graphic_context[n]->affine.tx=current.sx*affine.tx+current.ry*affine.ty+\n          current.tx;\n        graphic_context[n]->affine.ty=current.rx*affine.tx+current.sy*affine.ty+\n          current.ty;\n      }\n    if (primitive_type == UndefinedPrimitive)\n      {\n        if (image->debug != MagickFalse)\n          (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  %.*s\",\n            (int) (q-p),p);\n        continue;\n      }\n    /*\n      Parse the primitive attributes.\n    */\n    i=0;\n    j=0;\n    primitive_info[0].point.x=0.0;\n    primitive_info[0].point.y=0.0;\n    for (x=0; *q != '\\0'; x++)\n    {\n      /*\n        Define points.\n      */\n      if (IsPoint(q) == MagickFalse)\n        break;\n      GetNextToken(q,&q,extent,token);\n      point.x=StringToDouble(token,&next_token);\n      if (token == next_token)\n        status=MagickFalse;\n      GetNextToken(q,&q,extent,token);\n      if (*token == ',')\n        GetNextToken(q,&q,extent,token);\n      point.y=StringToDouble(token,&next_token);\n      if (token == next_token)\n        status=MagickFalse;\n      GetNextToken(q,(const char **) NULL,extent,token);\n      if (*token == ',')\n        GetNextToken(q,&q,extent,token);\n      primitive_info[i].primitive=primitive_type;\n      primitive_info[i].point=point;\n      primitive_info[i].coordinates=0;\n      primitive_info[i].method=FloodfillMethod;\n      i++;\n      if (i < (ssize_t) number_points)\n        continue;\n      number_points<<=1;\n      primitive_info=(PrimitiveInfo *) ResizeQuantumMemory(primitive_info,\n        (size_t) number_points,sizeof(*primitive_info));\n      if ((primitive_info == (PrimitiveInfo *) NULL) ||\n          (number_points != (MagickSizeType) ((size_t) number_points)))\n        {\n          (void) ThrowMagickException(&image->exception,GetMagickModule(),\n            ResourceLimitError,\"MemoryAllocationFailed\",\"`%s'\",image->filename);\n          break;\n        }\n    }\n    primitive_info[j].primitive=primitive_type;\n    primitive_info[j].coordinates=(size_t) x;\n    primitive_info[j].method=FloodfillMethod;\n    primitive_info[j].text=(char *) NULL;\n    /*\n      Circumscribe primitive within a circle.\n    */\n    bounds.x1=primitive_info[j].point.x;\n    bounds.y1=primitive_info[j].point.y;\n    bounds.x2=primitive_info[j].point.x;\n    bounds.y2=primitive_info[j].point.y;\n    for (k=1; k < (ssize_t) primitive_info[j].coordinates; k++)\n    {\n      point=primitive_info[j+k].point;\n      if (point.x < bounds.x1)\n        bounds.x1=point.x;\n      if (point.y < bounds.y1)\n        bounds.y1=point.y;\n      if (point.x > bounds.x2)\n        bounds.x2=point.x;\n      if (point.y > bounds.y2)\n        bounds.y2=point.y;\n    }\n    /*\n      Speculate how many points our primitive might consume.\n    */\n    length=primitive_info[j].coordinates;\n    switch (primitive_type)\n    {\n      case RectanglePrimitive:\n      {\n        length*=5;\n        break;\n      }\n      case RoundRectanglePrimitive:\n      {\n        double\n          alpha,\n          beta,\n          radius;\n\n        alpha=bounds.x2-bounds.x1;\n        beta=bounds.y2-bounds.y1;\n        radius=hypot((double) alpha,(double) beta);\n        length*=5;\n        length+=2*((size_t) ceil((double) MagickPI*radius))+6*BezierQuantum+360;\n        break;\n      }\n      case BezierPrimitive:\n      {\n        if (primitive_info[j].coordinates > 107)\n          (void) ThrowMagickException(&image->exception,GetMagickModule(),\n            DrawError,\"TooManyBezierCoordinates\",\"`%s'\",token);\n        length=BezierQuantum*primitive_info[j].coordinates;\n        break;\n      }\n      case PathPrimitive:\n      {\n        char\n          *s,\n          *t;\n\n        GetNextToken(q,&q,extent,token);\n        length=1;\n        t=token;\n        for (s=token; *s != '\\0'; s=t)\n        {\n          double\n            value;\n\n          value=StringToDouble(s,&t);\n          (void) value;\n          if (s == t)\n            {\n              t++;\n              continue;\n            }\n          length++;\n        }\n        length=length*BezierQuantum/2;\n        break;\n      }\n      case CirclePrimitive:\n      case ArcPrimitive:\n      case EllipsePrimitive:\n      {\n        double\n          alpha,\n          beta,\n          radius;\n\n        alpha=bounds.x2-bounds.x1;\n        beta=bounds.y2-bounds.y1;\n        radius=hypot((double) alpha,(double) beta);\n        length=2*((size_t) ceil((double) MagickPI*radius))+6*BezierQuantum+360;\n        break;\n      }\n      default:\n        break;\n    }\n    if ((i+length) >= number_points)\n      {\n        /*\n          Resize based on speculative points required by primitive.\n        */\n        number_points+=length+1;\n        primitive_info=(PrimitiveInfo *) ResizeQuantumMemory(primitive_info,\n          (size_t) number_points,sizeof(*primitive_info));\n        if ((primitive_info == (PrimitiveInfo *) NULL) ||\n            (number_points != (MagickSizeType) ((size_t) number_points)))\n          {\n            (void) ThrowMagickException(&image->exception,GetMagickModule(),\n              ResourceLimitError,\"MemoryAllocationFailed\",\"`%s'\",\n              image->filename);\n            break;\n          }\n      }\n    switch (primitive_type)\n    {\n      case PointPrimitive:\n      default:\n      {\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TracePoint(primitive_info+j,primitive_info[j].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case LinePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceLine(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case RectanglePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceRectangle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case RoundRectanglePrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceRoundRectangle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case ArcPrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            primitive_type=UndefinedPrimitive;\n            break;\n          }\n        TraceArc(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case EllipsePrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceEllipse(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case CirclePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceCircle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case PolylinePrimitive:\n        break;\n      case PolygonPrimitive:\n      {\n        primitive_info[i]=primitive_info[j];\n        primitive_info[i].coordinates=0;\n        primitive_info[j].coordinates++;\n        i++;\n        break;\n      }\n      case BezierPrimitive:\n      {\n        if (primitive_info[j].coordinates < 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceBezier(primitive_info+j,primitive_info[j].coordinates);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case PathPrimitive:\n      {\n        i=(ssize_t) (j+TracePath(primitive_info+j,token));\n        break;\n      }\n      case ColorPrimitive:\n      case MattePrimitive:\n      {\n        ssize_t\n          method;\n\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        GetNextToken(q,&q,extent,token);\n        method=ParseCommandOption(MagickMethodOptions,MagickFalse,token);\n        if (method == -1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        primitive_info[j].method=(PaintMethod) method;\n        break;\n      }\n      case TextPrimitive:\n      {\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        if (*token != ',')\n          GetNextToken(q,&q,extent,token);\n        primitive_info[j].text=AcquireString(token);\n        break;\n      }\n      case ImagePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        GetNextToken(q,&q,extent,token);\n        primitive_info[j].text=AcquireString(token);\n        break;\n      }\n    }\n    if (primitive_info == (PrimitiveInfo *) NULL)\n      break;\n    if (image->debug != MagickFalse)\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  %.*s\",(int) (q-p),p);\n    if (status == MagickFalse)\n      break;\n    primitive_info[i].primitive=UndefinedPrimitive;\n    if (i == 0)\n      continue;\n    /*\n      Transform points.\n    */\n    for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n    {\n      point=primitive_info[i].point;\n      primitive_info[i].point.x=graphic_context[n]->affine.sx*point.x+\n        graphic_context[n]->affine.ry*point.y+graphic_context[n]->affine.tx;\n      primitive_info[i].point.y=graphic_context[n]->affine.rx*point.x+\n        graphic_context[n]->affine.sy*point.y+graphic_context[n]->affine.ty;\n      point=primitive_info[i].point;\n      if (point.x < graphic_context[n]->bounds.x1)\n        graphic_context[n]->bounds.x1=point.x;\n      if (point.y < graphic_context[n]->bounds.y1)\n        graphic_context[n]->bounds.y1=point.y;\n      if (point.x > graphic_context[n]->bounds.x2)\n        graphic_context[n]->bounds.x2=point.x;\n      if (point.y > graphic_context[n]->bounds.y2)\n        graphic_context[n]->bounds.y2=point.y;\n      if (primitive_info[i].primitive == ImagePrimitive)\n        break;\n      if (i >= (ssize_t) number_points)\n        ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n    }\n    if (graphic_context[n]->render != MagickFalse)\n      {\n        if ((n != 0) && (graphic_context[n]->clip_mask != (char *) NULL) &&\n            (LocaleCompare(graphic_context[n]->clip_mask,\n             graphic_context[n-1]->clip_mask) != 0))\n          status&=DrawClipPath(image,graphic_context[n],\n            graphic_context[n]->clip_mask);\n        status&=DrawPrimitive(image,graphic_context[n],primitive_info);\n      }\n    if (primitive_info->text != (char *) NULL)\n      primitive_info->text=(char *) RelinquishMagickMemory(\n        primitive_info->text);\n    proceed=SetImageProgress(image,RenderImageTag,q-primitive,(MagickSizeType)\n      primitive_extent);\n    if (proceed == MagickFalse)\n      break;\n    if (status == 0)\n      break;\n  }\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end draw-image\");\n  /*\n    Relinquish resources.\n  */\n  token=DestroyString(token);\n  if (primitive_info != (PrimitiveInfo *) NULL)\n    primitive_info=(PrimitiveInfo *) RelinquishMagickMemory(primitive_info);\n  primitive=DestroyString(primitive);\n  for ( ; n >= 0; n--)\n    graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n  graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);\n  if (status == MagickFalse)\n    ThrowBinaryException(DrawError,\"NonconformingDrawingPrimitiveDefinition\",\n      keyword);\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%     D r a w G r a d i e n t I m a g e                                       %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawGradientImage() draws a linear gradient on the image.\n%\n%  The format of the DrawGradientImage method is:\n%\n%      MagickBooleanType DrawGradientImage(Image *image,\n%        const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o _info: the draw info.\n%\n*/\n\nstatic inline double GetStopColorOffset(const GradientInfo *gradient,\n  const ssize_t x,const ssize_t y)\n{\n  switch (gradient->type)\n  {\n    case UndefinedGradient:\n    case LinearGradient:\n    {\n      double\n        gamma,\n        length,\n        offset,\n        scale;\n\n      PointInfo\n        p,\n        q;\n\n      const SegmentInfo\n        *gradient_vector;\n\n      gradient_vector=(&gradient->gradient_vector);\n      p.x=gradient_vector->x2-gradient_vector->x1;\n      p.y=gradient_vector->y2-gradient_vector->y1;\n      q.x=(double) x-gradient_vector->x1;\n      q.y=(double) y-gradient_vector->y1;\n      length=sqrt(q.x*q.x+q.y*q.y);\n      gamma=sqrt(p.x*p.x+p.y*p.y)*length;\n      gamma=PerceptibleReciprocal(gamma);\n      scale=p.x*q.x+p.y*q.y;\n      offset=gamma*scale*length;\n      return(offset);\n    }\n    case RadialGradient:\n    {\n      PointInfo\n        v;\n\n      if (gradient->spread == RepeatSpread)\n        {\n          v.x=(double) x-gradient->center.x;\n          v.y=(double) y-gradient->center.y;\n          return(sqrt(v.x*v.x+v.y*v.y));\n        }\n      v.x=(double) (((x-gradient->center.x)*cos(DegreesToRadians(\n        gradient->angle)))+((y-gradient->center.y)*sin(DegreesToRadians(\n        gradient->angle))))/gradient->radii.x;\n      v.y=(double) (((x-gradient->center.x)*sin(DegreesToRadians(\n        gradient->angle)))-((y-gradient->center.y)*cos(DegreesToRadians(\n        gradient->angle))))/gradient->radii.y;\n      return(sqrt(v.x*v.x+v.y*v.y));\n    }\n  }\n  return(0.0);\n}\n\nMagickExport MagickBooleanType DrawGradientImage(Image *image,\n  const DrawInfo *draw_info)\n{\n  CacheView\n    *image_view;\n\n  const GradientInfo\n    *gradient;\n\n  const SegmentInfo\n    *gradient_vector;\n\n  double\n    length;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    status;\n\n  MagickPixelPacket\n    zero;\n\n  PointInfo\n    point;\n\n  RectangleInfo\n    bounding_box;\n\n  ssize_t\n    y;\n\n  /*\n    Draw linear or radial gradient on image.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  gradient=(&draw_info->gradient);\n  gradient_vector=(&gradient->gradient_vector);\n  point.x=gradient_vector->x2-gradient_vector->x1;\n  point.y=gradient_vector->y2-gradient_vector->y1;\n  length=sqrt(point.x*point.x+point.y*point.y);\n  bounding_box=gradient->bounding_box;\n  status=MagickTrue;\n  exception=(&image->exception);\n  GetMagickPixelPacket(image,&zero);\n  image_view=AcquireAuthenticCacheView(image,exception);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(image,image,1,1)\n#endif\n  for (y=bounding_box.y; y < (ssize_t) bounding_box.height; y++)\n  {\n    double\n      alpha,\n      offset;\n\n    MagickPixelPacket\n      composite,\n      pixel;\n\n    register IndexPacket\n      *magick_restrict indexes;\n\n    register ssize_t\n      i,\n      x;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    ssize_t\n      j;\n\n    if (status == MagickFalse)\n      continue;\n    q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,exception);\n    if (q == (PixelPacket *) NULL)\n      {\n        status=MagickFalse;\n        continue;\n      }\n    indexes=GetCacheViewAuthenticIndexQueue(image_view);\n    pixel=zero;\n    composite=zero;\n    offset=GetStopColorOffset(gradient,0,y);\n    if (gradient->type != RadialGradient)\n      offset/=length;\n    for (x=bounding_box.x; x < (ssize_t) bounding_box.width; x++)\n    {\n      SetMagickPixelPacket(image,q,indexes+x,&pixel);\n      switch (gradient->spread)\n      {\n        case UndefinedSpread:\n        case PadSpread:\n        {\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type != RadialGradient)\n                offset/=length;\n            }\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if ((offset < 0.0) || (i == 0))\n            composite=gradient->stops[0].color;\n          else\n            if ((offset > 1.0) || (i == (ssize_t) gradient->number_stops))\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n        case ReflectSpread:\n        {\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type != RadialGradient)\n                offset/=length;\n            }\n          if (offset < 0.0)\n            offset=(-offset);\n          if ((ssize_t) fmod(offset,2.0) == 0)\n            offset=fmod(offset,1.0);\n          else\n            offset=1.0-fmod(offset,1.0);\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if (i == 0)\n            composite=gradient->stops[0].color;\n          else\n            if (i == (ssize_t) gradient->number_stops)\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n        case RepeatSpread:\n        {\n          double\n            repeat;\n\n          MagickBooleanType\n            antialias;\n\n          antialias=MagickFalse;\n          repeat=0.0;\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type == LinearGradient)\n                {\n                  repeat=fmod(offset,length);\n                  if (repeat < 0.0)\n                    repeat=length-fmod(-repeat,length);\n                  else\n                    repeat=fmod(offset,length);\n                  antialias=(repeat < length) && ((repeat+1.0) > length) ?\n                    MagickTrue : MagickFalse;\n                  offset=repeat/length;\n                }\n              else\n                {\n                  repeat=fmod(offset,(double) gradient->radius);\n                  if (repeat < 0.0)\n                    repeat=gradient->radius-fmod(-repeat,\n                      (double) gradient->radius);\n                  else\n                    repeat=fmod(offset,(double) gradient->radius);\n                  antialias=repeat+1.0 > gradient->radius ? MagickTrue :\n                    MagickFalse;\n                  offset=repeat/gradient->radius;\n                }\n            }\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if (i == 0)\n            composite=gradient->stops[0].color;\n          else\n            if (i == (ssize_t) gradient->number_stops)\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                if (antialias != MagickFalse)\n                  {\n                    if (gradient->type == LinearGradient)\n                      alpha=length-repeat;\n                    else\n                      alpha=gradient->radius-repeat;\n                    i=0;\n                    j=(ssize_t) gradient->number_stops-1L;\n                  }\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n      }\n      MagickPixelCompositeOver(&composite,composite.opacity,&pixel,\n        pixel.opacity,&pixel);\n      SetPixelPacket(image,&pixel,q,indexes+x);\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  image_view=DestroyCacheView(image_view);\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w P a t t e r n P a t h                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPatternPath() draws a pattern.\n%\n%  The format of the DrawPatternPath method is:\n%\n%      MagickBooleanType DrawPatternPath(Image *image,const DrawInfo *draw_info,\n%        const char *name,Image **pattern)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o name: the pattern name.\n%\n%    o image: the image.\n%\n*/\nMagickExport MagickBooleanType DrawPatternPath(Image *image,\n  const DrawInfo *draw_info,const char *name,Image **pattern)\n{\n  char\n    property[MaxTextExtent];\n\n  const char\n    *geometry,\n    *path,\n    *type;\n\n  DrawInfo\n    *clone_info;\n\n  ImageInfo\n    *image_info;\n\n  MagickBooleanType\n    status;\n\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  assert(name != (const char *) NULL);\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s\",name);\n  path=GetImageArtifact(image,property);\n  if (path == (const char *) NULL)\n    return(MagickFalse);\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s-geometry\",name);\n  geometry=GetImageArtifact(image,property);\n  if (geometry == (const char *) NULL)\n    return(MagickFalse);\n  if ((*pattern) != (Image *) NULL)\n    *pattern=DestroyImage(*pattern);\n  image_info=AcquireImageInfo();\n  image_info->size=AcquireString(geometry);\n  *pattern=AcquireImage(image_info);\n  image_info=DestroyImageInfo(image_info);\n  (void) QueryColorDatabase(\"#00000000\",&(*pattern)->background_color,\n    &image->exception);\n  (void) SetImageBackgroundColor(*pattern);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"begin pattern-path %s %s\",name,geometry);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->fill_pattern=NewImageList();\n  clone_info->stroke_pattern=NewImageList();\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s-type\",name);\n  type=GetImageArtifact(image,property);\n  if (type != (const char *) NULL)\n    clone_info->gradient.type=(GradientType) ParseCommandOption(\n      MagickGradientOptions,MagickFalse,type);\n  (void) CloneString(&clone_info->primitive,path);\n  status=DrawImage(*pattern,clone_info);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end pattern-path\");\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w P o l y g o n P r i m i t i v e                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPolygonPrimitive() draws a polygon on the image.\n%\n%  The format of the DrawPolygonPrimitive method is:\n%\n%      MagickBooleanType DrawPolygonPrimitive(Image *image,\n%        const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n*/\n\nstatic PolygonInfo **DestroyPolygonThreadSet(PolygonInfo **polygon_info)\n{\n  register ssize_t\n    i;\n\n  assert(polygon_info != (PolygonInfo **) NULL);\n  for (i=0; i < (ssize_t) GetMagickResourceLimit(ThreadResource); i++)\n    if (polygon_info[i] != (PolygonInfo *) NULL)\n      polygon_info[i]=DestroyPolygonInfo(polygon_info[i]);\n  polygon_info=(PolygonInfo **) RelinquishMagickMemory(polygon_info);\n  return(polygon_info);\n}\n\nstatic PolygonInfo **AcquirePolygonThreadSet(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  PathInfo\n    *magick_restrict path_info;\n\n  PolygonInfo\n    **polygon_info;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_threads;\n\n  number_threads=(size_t) GetMagickResourceLimit(ThreadResource);\n  polygon_info=(PolygonInfo **) AcquireQuantumMemory(number_threads,\n    sizeof(*polygon_info));\n  if (polygon_info == (PolygonInfo **) NULL)\n    return((PolygonInfo **) NULL);\n  (void) ResetMagickMemory(polygon_info,0,(size_t)\n    GetMagickResourceLimit(ThreadResource)*sizeof(*polygon_info));\n  path_info=ConvertPrimitiveToPath(draw_info,primitive_info);\n  if (path_info == (PathInfo *) NULL)\n    return(DestroyPolygonThreadSet(polygon_info));\n  for (i=0; i < (ssize_t) number_threads; i++)\n  {\n    polygon_info[i]=ConvertPathToPolygon(path_info);\n    if (polygon_info[i] == (PolygonInfo *) NULL)\n      return(DestroyPolygonThreadSet(polygon_info));\n  }\n  path_info=(PathInfo *) RelinquishMagickMemory(path_info);\n  return(polygon_info);\n}\n\nstatic double GetOpacityPixel(PolygonInfo *polygon_info,const double mid,\n  const MagickBooleanType fill,const FillRule fill_rule,const ssize_t x,\n  const ssize_t y,double *stroke_opacity)\n{\n  double\n    alpha,\n    beta,\n    distance,\n    subpath_opacity;\n\n  PointInfo\n    delta;\n\n  register EdgeInfo\n    *p;\n\n  register const PointInfo\n    *q;\n\n  register ssize_t\n    i;\n\n  ssize_t\n    j,\n    winding_number;\n\n  /*\n    Compute fill & stroke opacity for this (x,y) point.\n  */\n  *stroke_opacity=0.0;\n  subpath_opacity=0.0;\n  p=polygon_info->edges;\n  for (j=0; j < (ssize_t) polygon_info->number_edges; j++, p++)\n  {\n    if ((double) y <= (p->bounds.y1-mid-0.5))\n      break;\n    if ((double) y > (p->bounds.y2+mid+0.5))\n      {\n        (void) DestroyEdge(polygon_info,(size_t) j);\n        continue;\n      }\n    if (((double) x <= (p->bounds.x1-mid-0.5)) ||\n        ((double) x > (p->bounds.x2+mid+0.5)))\n      continue;\n    i=(ssize_t) MagickMax((double) p->highwater,1.0);\n    for ( ; i < (ssize_t) p->number_points; i++)\n    {\n      if ((double) y <= (p->points[i-1].y-mid-0.5))\n        break;\n      if ((double) y > (p->points[i].y+mid+0.5))\n        continue;\n      if (p->scanline != (double) y)\n        {\n          p->scanline=(double) y;\n          p->highwater=(size_t) i;\n        }\n      /*\n        Compute distance between a point and an edge.\n      */\n      q=p->points+i-1;\n      delta.x=(q+1)->x-q->x;\n      delta.y=(q+1)->y-q->y;\n      beta=delta.x*(x-q->x)+delta.y*(y-q->y);\n      if (beta < 0.0)\n        {\n          delta.x=(double) x-q->x;\n          delta.y=(double) y-q->y;\n          distance=delta.x*delta.x+delta.y*delta.y;\n        }\n      else\n        {\n          alpha=delta.x*delta.x+delta.y*delta.y;\n          if (beta > alpha)\n            {\n              delta.x=(double) x-(q+1)->x;\n              delta.y=(double) y-(q+1)->y;\n              distance=delta.x*delta.x+delta.y*delta.y;\n            }\n          else\n            {\n              alpha=1.0/alpha;\n              beta=delta.x*(y-q->y)-delta.y*(x-q->x);\n              distance=alpha*beta*beta;\n            }\n        }\n      /*\n        Compute stroke & subpath opacity.\n      */\n      beta=0.0;\n      if (p->ghostline == MagickFalse)\n        {\n          alpha=mid+0.5;\n          if ((*stroke_opacity < 1.0) &&\n              (distance <= ((alpha+0.25)*(alpha+0.25))))\n            {\n              alpha=mid-0.5;\n              if (distance <= ((alpha+0.25)*(alpha+0.25)))\n                *stroke_opacity=1.0;\n              else\n                {\n                  beta=1.0;\n                  if (fabs(distance-1.0) >= DrawEpsilon)\n                    beta=sqrt((double) distance);\n                  alpha=beta-mid-0.5;\n                  if (*stroke_opacity < ((alpha-0.25)*(alpha-0.25)))\n                    *stroke_opacity=(alpha-0.25)*(alpha-0.25);\n                }\n            }\n        }\n      if ((fill == MagickFalse) || (distance > 1.0) || (subpath_opacity >= 1.0))\n        continue;\n      if (distance <= 0.0)\n        {\n          subpath_opacity=1.0;\n          continue;\n        }\n      if (distance > 1.0)\n        continue;\n      if (fabs(beta) < DrawEpsilon)\n        {\n          beta=1.0;\n          if (fabs(distance-1.0) >= DrawEpsilon)\n            beta=sqrt(distance);\n        }\n      alpha=beta-1.0;\n      if (subpath_opacity < (alpha*alpha))\n        subpath_opacity=alpha*alpha;\n    }\n  }\n  /*\n    Compute fill opacity.\n  */\n  if (fill == MagickFalse)\n    return(0.0);\n  if (subpath_opacity >= 1.0)\n    return(1.0);\n  /*\n    Determine winding number.\n  */\n  winding_number=0;\n  p=polygon_info->edges;\n  for (j=0; j < (ssize_t) polygon_info->number_edges; j++, p++)\n  {\n    if ((double) y <= p->bounds.y1)\n      break;\n    if (((double) y > p->bounds.y2) || ((double) x <= p->bounds.x1))\n      continue;\n    if ((double) x > p->bounds.x2)\n      {\n        winding_number+=p->direction ? 1 : -1;\n        continue;\n      }\n    i=(ssize_t) MagickMax((double) p->highwater,1.0);\n    for ( ; i < (ssize_t) p->number_points; i++)\n      if ((double) y <= p->points[i].y)\n        break;\n    q=p->points+i-1;\n    if ((((q+1)->x-q->x)*(y-q->y)) <= (((q+1)->y-q->y)*(x-q->x)))\n      winding_number+=p->direction ? 1 : -1;\n  }\n  if (fill_rule != NonZeroRule)\n    {\n      if ((MagickAbsoluteValue(winding_number) & 0x01) != 0)\n        return(1.0);\n    }\n  else\n    if (MagickAbsoluteValue(winding_number) != 0)\n      return(1.0);\n  return(subpath_opacity);\n}\n\nstatic MagickBooleanType DrawPolygonPrimitive(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  CacheView\n    *image_view;\n\n  double\n    mid;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    fill,\n    status;\n\n  PolygonInfo\n    **magick_restrict polygon_info;\n\n  register EdgeInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    bounds;\n\n  ssize_t\n    start_y,\n    stop_y,\n    y;\n\n  /*\n    Compute bounding box.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  assert(primitive_info != (PrimitiveInfo *) NULL);\n  if (primitive_info->coordinates == 0)\n    return(MagickTrue);\n  polygon_info=AcquirePolygonThreadSet(draw_info,primitive_info);\n  if (polygon_info == (PolygonInfo **) NULL)\n    return(MagickFalse);\nDisableMSCWarning(4127)\n  if (0)\n    DrawBoundingRectangles(image,draw_info,polygon_info[0]);\nRestoreMSCWarning\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin draw-polygon\");\n  fill=(primitive_info->method == FillToBorderMethod) ||\n    (primitive_info->method == FloodfillMethod) ? MagickTrue : MagickFalse;\n  mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n  bounds=polygon_info[0]->edges[0].bounds;\n  for (i=1; i < (ssize_t) polygon_info[0]->number_edges; i++)\n  {\n    p=polygon_info[0]->edges+i;\n    if (p->bounds.x1 < bounds.x1)\n      bounds.x1=p->bounds.x1;\n    if (p->bounds.y1 < bounds.y1)\n      bounds.y1=p->bounds.y1;\n    if (p->bounds.x2 > bounds.x2)\n      bounds.x2=p->bounds.x2;\n    if (p->bounds.y2 > bounds.y2)\n      bounds.y2=p->bounds.y2;\n  }\n  bounds.x1-=(mid+1.0);\n  bounds.x1=bounds.x1 < 0.0 ? 0.0 : (size_t) ceil(bounds.x1-0.5) >=\n    image->columns ? (double) image->columns-1 : bounds.x1;\n  bounds.y1-=(mid+1.0);\n  bounds.y1=bounds.y1 < 0.0 ? 0.0 : (size_t) ceil(bounds.y1-0.5) >=\n    image->rows ? (double) image->rows-1 : bounds.y1;\n  bounds.x2+=(mid+1.0);\n  bounds.x2=bounds.x2 < 0.0 ? 0.0 : (size_t) floor(bounds.x2+0.5) >=\n    image->columns ? (double) image->columns-1 : bounds.x2;\n  bounds.y2+=(mid+1.0);\n  bounds.y2=bounds.y2 < 0.0 ? 0.0 : (size_t) floor(bounds.y2+0.5) >=\n    image->rows ? (double) image->rows-1 : bounds.y2;\n  status=MagickTrue;\n  exception=(&image->exception);\n  image_view=AcquireAuthenticCacheView(image,exception);\n  if ((primitive_info->coordinates == 1) ||\n      (polygon_info[0]->number_edges == 0))\n    {\n      /*\n        Draw point.\n      */\n      start_y=(ssize_t) ceil(bounds.y1-0.5);\n      stop_y=(ssize_t) floor(bounds.y2+0.5);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n      #pragma omp parallel for schedule(static,4) shared(status) \\\n        magick_threads(image,image,1,1)\n#endif\n      for (y=start_y; y <= stop_y; y++)\n      {\n        MagickBooleanType\n          sync;\n\n        register PixelPacket\n          *magick_restrict q;\n\n        register ssize_t\n          x;\n\n        ssize_t\n          start_x,\n          stop_x;\n\n        if (status == MagickFalse)\n          continue;\n        start_x=(ssize_t) ceil(bounds.x1-0.5);\n        stop_x=(ssize_t) floor(bounds.x2+0.5);\n        x=start_x;\n        q=GetCacheViewAuthenticPixels(image_view,x,y,(size_t) (stop_x-x+1),1,\n          exception);\n        if (q == (PixelPacket *) NULL)\n          {\n            status=MagickFalse;\n            continue;\n          }\n        for ( ; x <= stop_x; x++)\n        {\n          if ((x == (ssize_t) ceil(primitive_info->point.x-0.5)) &&\n              (y == (ssize_t) ceil(primitive_info->point.y-0.5)))\n            (void) GetFillColor(draw_info,x-start_x,y-start_y,q);\n          q++;\n        }\n        sync=SyncCacheViewAuthenticPixels(image_view,exception);\n        if (sync == MagickFalse)\n          status=MagickFalse;\n      }\n      image_view=DestroyCacheView(image_view);\n      polygon_info=DestroyPolygonThreadSet(polygon_info);\n      if (image->debug != MagickFalse)\n        (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n          \"    end draw-polygon\");\n      return(status);\n    }\n  /*\n    Draw polygon or line.\n  */\n  if (image->matte == MagickFalse)\n    (void) SetImageAlphaChannel(image,OpaqueAlphaChannel);\n  start_y=(ssize_t) ceil(bounds.y1-0.5);\n  stop_y=(ssize_t) floor(bounds.y2+0.5);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(image,image,1,1)\n#endif\n  for (y=start_y; y <= stop_y; y++)\n  {\n    const int\n      id = GetOpenMPThreadId();\n\n    double\n      fill_opacity,\n      stroke_opacity;\n\n    PixelPacket\n      fill_color,\n      stroke_color;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    register ssize_t\n      x;\n\n    ssize_t\n      start_x,\n      stop_x;\n\n    if (status == MagickFalse)\n      continue;\n    start_x=(ssize_t) ceil(bounds.x1-0.5);\n    stop_x=(ssize_t) floor(bounds.x2+0.5);\n    q=GetCacheViewAuthenticPixels(image_view,start_x,y,(size_t) (stop_x-start_x+1),1,\n      exception);\n    if (q == (PixelPacket *) NULL)\n      {\n        status=MagickFalse;\n        continue;\n      }\n    for (x=start_x; x <= stop_x; x++)\n    {\n      /*\n        Fill and/or stroke.\n      */\n      fill_opacity=GetOpacityPixel(polygon_info[id],mid,fill,\n        draw_info->fill_rule,x,y,&stroke_opacity);\n      if (draw_info->stroke_antialias == MagickFalse)\n        {\n          fill_opacity=fill_opacity > 0.25 ? 1.0 : 0.0;\n          stroke_opacity=stroke_opacity > 0.25 ? 1.0 : 0.0;\n        }\n      (void) GetFillColor(draw_info,x-start_x,y-start_y,&fill_color);\n      fill_opacity=(double) (QuantumRange-fill_opacity*(QuantumRange-\n        fill_color.opacity));\n      MagickCompositeOver(&fill_color,(MagickRealType) fill_opacity,q,\n        (MagickRealType) q->opacity,q);\n      (void) GetStrokeColor(draw_info,x-start_x,y-start_y,&stroke_color);\n      stroke_opacity=(double) (QuantumRange-stroke_opacity*(QuantumRange-\n        stroke_color.opacity));\n      MagickCompositeOver(&stroke_color,(MagickRealType) stroke_opacity,q,\n        (MagickRealType) q->opacity,q);\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  image_view=DestroyCacheView(image_view);\n  polygon_info=DestroyPolygonThreadSet(polygon_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end draw-polygon\");\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w P r i m i t i v e                                                 %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPrimitive() draws a primitive (line, rectangle, ellipse) on the image.\n%\n%  The format of the DrawPrimitive method is:\n%\n%      MagickBooleanType DrawPrimitive(Image *image,const DrawInfo *draw_info,\n%        PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n*/\n\nstatic void LogPrimitiveInfo(const PrimitiveInfo *primitive_info)\n{\n  const char\n    *methods[] =\n    {\n      \"point\",\n      \"replace\",\n      \"floodfill\",\n      \"filltoborder\",\n      \"reset\",\n      \"?\"\n    };\n\n  PointInfo\n    p,\n    q,\n    point;\n\n  register ssize_t\n    i,\n    x;\n\n  ssize_t\n    coordinates,\n    y;\n\n  x=(ssize_t) ceil(primitive_info->point.x-0.5);\n  y=(ssize_t) ceil(primitive_info->point.y-0.5);\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"PointPrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case ColorPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"ColorPrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case MattePrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"MattePrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case TextPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"TextPrimitive %.20g,%.20g\",(double) x,(double) y);\n      return;\n    }\n    case ImagePrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"ImagePrimitive %.20g,%.20g\",(double) x,(double) y);\n      return;\n    }\n    default:\n      break;\n  }\n  coordinates=0;\n  p=primitive_info[0].point;\n  q.x=(-1.0);\n  q.y=(-1.0);\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n  {\n    point=primitive_info[i].point;\n    if (coordinates <= 0)\n      {\n        coordinates=(ssize_t) primitive_info[i].coordinates;\n        (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n          \"    begin open (%.20g)\",(double) coordinates);\n        p=point;\n      }\n    point=primitive_info[i].point;\n    if ((fabs(q.x-point.x) >= DrawEpsilon) ||\n        (fabs(q.y-point.y) >= DrawEpsilon))\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"      %.20g: %.18g,%.18g\",(double) coordinates,point.x,point.y);\n    else\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"      %.20g: %g %g (duplicate)\",(double) coordinates,point.x,point.y);\n    q=point;\n    coordinates--;\n    if (coordinates > 0)\n      continue;\n    if ((fabs(p.x-point.x) >= DrawEpsilon) ||\n        (fabs(p.y-point.y) >= DrawEpsilon))\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end last (%.20g)\",\n        (double) coordinates);\n    else\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end open (%.20g)\",\n        (double) coordinates);\n  }\n}\n\nMagickExport MagickBooleanType DrawPrimitive(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  CacheView\n    *image_view;\n\n  ExceptionInfo\n    *exception;\n\n  MagickStatusType\n    status;\n\n  register ssize_t\n    i,\n    x;\n\n  ssize_t\n    y;\n\n  if (image->debug != MagickFalse)\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"  begin draw-primitive\");\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"    affine: %g,%g,%g,%g,%g,%g\",draw_info->affine.sx,\n        draw_info->affine.rx,draw_info->affine.ry,draw_info->affine.sy,\n        draw_info->affine.tx,draw_info->affine.ty);\n    }\n  exception=(&image->exception);\n  if ((IsGrayColorspace(image->colorspace) != MagickFalse) &&\n      ((IsPixelGray(&draw_info->fill) == MagickFalse) ||\n       (IsPixelGray(&draw_info->stroke) == MagickFalse)))\n    (void) SetImageColorspace(image,sRGBColorspace);\n  status=MagickTrue;\n  x=(ssize_t) ceil(primitive_info->point.x-0.5);\n  y=(ssize_t) ceil(primitive_info->point.y-0.5);\n  image_view=AcquireAuthenticCacheView(image,exception);\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    {\n      PixelPacket\n        fill_color;\n\n      PixelPacket\n        *q;\n\n      if ((y < 0) || (y >= (ssize_t) image->rows))\n        break;\n      if ((x < 0) || (x >= (ssize_t) image->columns))\n        break;\n      q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n      if (q == (PixelPacket *) NULL)\n        break;\n      (void) GetFillColor(draw_info,x,y,&fill_color);\n      MagickCompositeOver(&fill_color,(MagickRealType) fill_color.opacity,q,\n        (MagickRealType) q->opacity,q);\n      status&=SyncCacheViewAuthenticPixels(image_view,exception);\n      break;\n    }\n    case ColorPrimitive:\n    {\n      switch (primitive_info->method)\n      {\n        case PointMethod:\n        default:\n        {\n          PixelPacket\n            *q;\n\n          q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n          if (q == (PixelPacket *) NULL)\n            break;\n          (void) GetFillColor(draw_info,x,y,q);\n          status&=SyncCacheViewAuthenticPixels(image_view,exception);\n          break;\n        }\n        case ReplaceMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            target;\n\n          status&=GetOneCacheViewVirtualPixel(image_view,x,y,&target,exception);\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              if (IsColorSimilar(image,q,&target) == MagickFalse)\n                {\n                  q++;\n                  continue;\n                }\n              (void) GetFillColor(draw_info,x,y,q);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n        case FloodfillMethod:\n        case FillToBorderMethod:\n        {\n          MagickPixelPacket\n            target;\n\n          (void) GetOneVirtualMagickPixel(image,x,y,&target,exception);\n          if (primitive_info->method == FillToBorderMethod)\n            {\n              target.red=(MagickRealType) draw_info->border_color.red;\n              target.green=(MagickRealType) draw_info->border_color.green;\n              target.blue=(MagickRealType) draw_info->border_color.blue;\n            }\n          status&=FloodfillPaintImage(image,DefaultChannels,draw_info,&target,x,\n            y,primitive_info->method == FloodfillMethod ? MagickFalse :\n            MagickTrue);\n          break;\n        }\n        case ResetMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              (void) GetFillColor(draw_info,x,y,q);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n      }\n      break;\n    }\n    case MattePrimitive:\n    {\n      if (image->matte == MagickFalse)\n        (void) SetImageAlphaChannel(image,OpaqueAlphaChannel);\n      switch (primitive_info->method)\n      {\n        case PointMethod:\n        default:\n        {\n          PixelPacket\n            pixel;\n\n          PixelPacket\n            *q;\n\n          q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n          if (q == (PixelPacket *) NULL)\n            break;\n          (void) GetFillColor(draw_info,x,y,&pixel);\n          SetPixelOpacity(q,pixel.opacity);\n          status&=SyncCacheViewAuthenticPixels(image_view,exception);\n          break;\n        }\n        case ReplaceMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            pixel,\n            target;\n\n          status&=GetOneCacheViewVirtualPixel(image_view,x,y,&target,exception);\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              if (IsColorSimilar(image,q,&target) == MagickFalse)\n                {\n                  q++;\n                  continue;\n                }\n              (void) GetFillColor(draw_info,x,y,&pixel);\n              SetPixelOpacity(q,pixel.opacity);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n        case FloodfillMethod:\n        case FillToBorderMethod:\n        {\n          MagickPixelPacket\n            target;\n\n          (void) GetOneVirtualMagickPixel(image,x,y,&target,exception);\n          if (primitive_info->method == FillToBorderMethod)\n            {\n              target.red=(MagickRealType) draw_info->border_color.red;\n              target.green=(MagickRealType) draw_info->border_color.green;\n              target.blue=(MagickRealType) draw_info->border_color.blue;\n            }\n          status&=FloodfillPaintImage(image,OpacityChannel,draw_info,&target,x,\n            y,primitive_info->method == FloodfillMethod ? MagickFalse :\n            MagickTrue);\n          break;\n        }\n        case ResetMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            pixel;\n\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              (void) GetFillColor(draw_info,x,y,&pixel);\n              SetPixelOpacity(q,pixel.opacity);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n      }\n      break;\n    }\n    case TextPrimitive:\n    {\n      char\n        geometry[MaxTextExtent];\n\n      DrawInfo\n        *clone_info;\n\n      if (primitive_info->text == (char *) NULL)\n        break;\n      clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n      (void) CloneString(&clone_info->text,primitive_info->text);\n      (void) FormatLocaleString(geometry,MaxTextExtent,\"%+f%+f\",\n        primitive_info->point.x,primitive_info->point.y);\n      (void) CloneString(&clone_info->geometry,geometry);\n      status&=AnnotateImage(image,clone_info);\n      clone_info=DestroyDrawInfo(clone_info);\n      break;\n    }\n    case ImagePrimitive:\n    {\n      AffineMatrix\n        affine;\n\n      char\n        composite_geometry[MaxTextExtent];\n\n      Image\n        *composite_image;\n\n      ImageInfo\n        *clone_info;\n\n      RectangleInfo\n        geometry;\n\n      ssize_t\n        x1,\n        y1;\n\n      if (primitive_info->text == (char *) NULL)\n        break;\n      clone_info=AcquireImageInfo();\n      if (LocaleNCompare(primitive_info->text,\"data:\",5) == 0)\n        composite_image=ReadInlineImage(clone_info,primitive_info->text,\n          &image->exception);\n      else\n        {\n          (void) CopyMagickString(clone_info->filename,primitive_info->text,\n            MaxTextExtent);\n          composite_image=ReadImage(clone_info,&image->exception);\n        }\n      clone_info=DestroyImageInfo(clone_info);\n      if (composite_image == (Image *) NULL)\n        break;\n      (void) SetImageProgressMonitor(composite_image,(MagickProgressMonitor)\n        NULL,(void *) NULL);\n      x1=(ssize_t) ceil(primitive_info[1].point.x-0.5);\n      y1=(ssize_t) ceil(primitive_info[1].point.y-0.5);\n      if (((x1 != 0L) && (x1 != (ssize_t) composite_image->columns)) ||\n          ((y1 != 0L) && (y1 != (ssize_t) composite_image->rows)))\n        {\n          char\n            geometry[MaxTextExtent];\n\n          /*\n            Resize image.\n          */\n          (void) FormatLocaleString(geometry,MaxTextExtent,\"%gx%g!\",\n            primitive_info[1].point.x,primitive_info[1].point.y);\n          composite_image->filter=image->filter;\n          (void) TransformImage(&composite_image,(char *) NULL,geometry);\n        }\n      if (composite_image->matte == MagickFalse)\n        (void) SetImageAlphaChannel(composite_image,OpaqueAlphaChannel);\n      if (draw_info->opacity != OpaqueOpacity)\n        (void) SetImageOpacity(composite_image,draw_info->opacity);\n      SetGeometry(image,&geometry);\n      image->gravity=draw_info->gravity;\n      geometry.x=x;\n      geometry.y=y;\n      (void) FormatLocaleString(composite_geometry,MaxTextExtent,\n        \"%.20gx%.20g%+.20g%+.20g\",(double) composite_image->columns,(double)\n        composite_image->rows,(double) geometry.x,(double) geometry.y);\n      (void) ParseGravityGeometry(image,composite_geometry,&geometry,\n        &image->exception);\n      affine=draw_info->affine;\n      affine.tx=(double) geometry.x;\n      affine.ty=(double) geometry.y;\n      composite_image->interpolate=image->interpolate;\n      if (draw_info->compose == OverCompositeOp)\n        (void) DrawAffineImage(image,composite_image,&affine);\n      else\n        (void) CompositeImage(image,draw_info->compose,composite_image,\n          geometry.x,geometry.y);\n      composite_image=DestroyImage(composite_image);\n      break;\n    }\n    default:\n    {\n      double\n        mid,\n        scale;\n\n      DrawInfo\n        *clone_info;\n\n      if (IsEventLogging() != MagickFalse)\n        LogPrimitiveInfo(primitive_info);\n      scale=ExpandAffine(&draw_info->affine);\n      if ((draw_info->dash_pattern != (double *) NULL) &&\n          (fabs(draw_info->dash_pattern[0]) >= DrawEpsilon) &&\n          (fabs(scale*draw_info->stroke_width) >= DrawEpsilon) &&\n          (draw_info->stroke.opacity != (Quantum) TransparentOpacity))\n        {\n          /*\n            Draw dash polygon.\n          */\n          clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n          clone_info->stroke_width=0.0;\n          clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n          status&=DrawPolygonPrimitive(image,clone_info,primitive_info);\n          clone_info=DestroyDrawInfo(clone_info);\n          (void) DrawDashPolygon(draw_info,primitive_info,image);\n          break;\n        }\n      mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n      if ((mid > 1.0) &&\n          ((draw_info->stroke.opacity != (Quantum) TransparentOpacity) ||\n           (draw_info->stroke_pattern != (Image *) NULL)))\n        {\n          MagickBooleanType\n            closed_path;\n\n          /*\n            Draw strokes while respecting line cap/join attributes.\n          */\n          for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n          closed_path=\n            (primitive_info[i-1].point.x == primitive_info[0].point.x) &&\n            (primitive_info[i-1].point.y == primitive_info[0].point.y) ?\n            MagickTrue : MagickFalse;\n          i=(ssize_t) primitive_info[0].coordinates;\n          i=(ssize_t) primitive_info[0].coordinates;\n          if (((closed_path != MagickFalse) &&\n              (draw_info->linejoin == RoundJoin)) ||\n              (primitive_info[i].primitive != UndefinedPrimitive))\n            {\n              (void) DrawPolygonPrimitive(image,draw_info,primitive_info);\n              break;\n            }\n          if (draw_info->linecap == RoundCap)\n            {\n              (void) DrawPolygonPrimitive(image,draw_info,primitive_info);\n              break;\n            }\n          clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n          clone_info->stroke_width=0.0;\n          clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n          status&=DrawPolygonPrimitive(image,clone_info,primitive_info);\n          clone_info=DestroyDrawInfo(clone_info);\n          status&=DrawStrokePolygon(image,draw_info,primitive_info);\n          break;\n        }\n      status&=DrawPolygonPrimitive(image,draw_info,primitive_info);\n      break;\n    }\n  }\n  image_view=DestroyCacheView(image_view);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  end draw-primitive\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w S t r o k e P o l y g o n                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawStrokePolygon() draws a stroked polygon (line, rectangle, ellipse) on\n%  the image while respecting the line cap and join attributes.\n%\n%  The format of the DrawStrokePolygon method is:\n%\n%      MagickBooleanType DrawStrokePolygon(Image *image,\n%        const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n%\n*/\n\nstatic void DrawRoundLinecap(Image *image,const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  PrimitiveInfo\n    linecap[5];\n\n  register ssize_t\n    i;\n\n  for (i=0; i < 4; i++)\n    linecap[i]=(*primitive_info);\n  linecap[0].coordinates=4;\n  linecap[1].point.x+=2.0*DrawEpsilon;\n  linecap[2].point.x+=2.0*DrawEpsilon;\n  linecap[2].point.y+=2.0*DrawEpsilon;\n  linecap[3].point.y+=2.0*DrawEpsilon;\n  linecap[4].primitive=UndefinedPrimitive;\n  (void) DrawPolygonPrimitive(image,draw_info,linecap);\n}\n\nstatic MagickBooleanType DrawStrokePolygon(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  DrawInfo\n    *clone_info;\n\n  MagickBooleanType\n    closed_path;\n\n  MagickStatusType\n    status;\n\n  PrimitiveInfo\n    *stroke_polygon;\n\n  register const PrimitiveInfo\n    *p,\n    *q;\n\n  /*\n    Draw stroked polygon.\n  */\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"    begin draw-stroke-polygon\");\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->fill=draw_info->stroke;\n  if (clone_info->fill_pattern != (Image *) NULL)\n    clone_info->fill_pattern=DestroyImage(clone_info->fill_pattern);\n  if (clone_info->stroke_pattern != (Image *) NULL)\n    clone_info->fill_pattern=CloneImage(clone_info->stroke_pattern,0,0,\n      MagickTrue,&clone_info->stroke_pattern->exception);\n  clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n  clone_info->stroke_width=0.0;\n  clone_info->fill_rule=NonZeroRule;\n  status=MagickTrue;\n  for (p=primitive_info; p->primitive != UndefinedPrimitive; p+=p->coordinates)\n  {\n    stroke_polygon=TraceStrokePolygon(draw_info,p);\n    status&=DrawPolygonPrimitive(image,clone_info,stroke_polygon);\n    if (status == 0)\n      break;\n    stroke_polygon=(PrimitiveInfo *) RelinquishMagickMemory(stroke_polygon);\n    q=p+p->coordinates-1;\n    closed_path=(fabs(q->point.x-p->point.x) < DrawEpsilon) &&\n      (fabs(q->point.y-p->point.y) < DrawEpsilon) ? MagickTrue : MagickFalse;\n    if ((draw_info->linecap == RoundCap) && (closed_path == MagickFalse))\n      {\n        DrawRoundLinecap(image,draw_info,p);\n        DrawRoundLinecap(image,draw_info,q);\n      }\n  }\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"    end draw-stroke-polygon\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   G e t A f f i n e M a t r i x                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  GetAffineMatrix() returns an AffineMatrix initialized to the identity\n%  matrix.\n%\n%  The format of the GetAffineMatrix method is:\n%\n%      void GetAffineMatrix(AffineMatrix *affine_matrix)\n%\n%  A description of each parameter follows:\n%\n%    o affine_matrix: the affine matrix.\n%\n*/\nMagickExport void GetAffineMatrix(AffineMatrix *affine_matrix)\n{\n  (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(affine_matrix != (AffineMatrix *) NULL);\n  (void) ResetMagickMemory(affine_matrix,0,sizeof(*affine_matrix));\n  affine_matrix->sx=1.0;\n  affine_matrix->sy=1.0;\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   G e t D r a w I n f o                                                     %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  GetDrawInfo() initializes draw_info to default values from image_info.\n%\n%  The format of the GetDrawInfo method is:\n%\n%      void GetDrawInfo(const ImageInfo *image_info,DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image_info: the image info..\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport void GetDrawInfo(const ImageInfo *image_info,DrawInfo *draw_info)\n{\n  char\n    *next_token;\n\n  const char\n    *option;\n\n  ExceptionInfo\n    *exception;\n\n  ImageInfo\n    *clone_info;\n\n  /*\n    Initialize draw attributes.\n  */\n  (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(draw_info != (DrawInfo *) NULL);\n  (void) ResetMagickMemory(draw_info,0,sizeof(*draw_info));\n  clone_info=CloneImageInfo(image_info);\n  GetAffineMatrix(&draw_info->affine);\n  exception=AcquireExceptionInfo();\n  (void) QueryColorDatabase(\"#000F\",&draw_info->fill,exception);\n  (void) QueryColorDatabase(\"#FFF0\",&draw_info->stroke,exception);\n  draw_info->stroke_antialias=clone_info->antialias;\n  draw_info->stroke_width=1.0;\n  draw_info->fill_rule=EvenOddRule;\n  draw_info->fill_opacity=OpaqueOpacity;\n  draw_info->stroke_opacity=OpaqueOpacity;\n  draw_info->linecap=ButtCap;\n  draw_info->linejoin=MiterJoin;\n  draw_info->miterlimit=10;\n  draw_info->decorate=NoDecoration;\n  if (clone_info->font != (char *) NULL)\n    draw_info->font=AcquireString(clone_info->font);\n  if (clone_info->density != (char *) NULL)\n    draw_info->density=AcquireString(clone_info->density);\n  draw_info->text_antialias=clone_info->antialias;\n  draw_info->pointsize=12.0;\n  if (fabs(clone_info->pointsize) >= DrawEpsilon)\n    draw_info->pointsize=clone_info->pointsize;\n  draw_info->undercolor.opacity=(Quantum) TransparentOpacity;\n  draw_info->border_color=clone_info->border_color;\n  draw_info->compose=OverCompositeOp;\n  if (clone_info->server_name != (char *) NULL)\n    draw_info->server_name=AcquireString(clone_info->server_name);\n  draw_info->render=MagickTrue;\n  draw_info->debug=IsEventLogging();\n  option=GetImageOption(clone_info,\"direction\");\n  if (option != (const char *) NULL)\n    draw_info->direction=(DirectionType) ParseCommandOption(\n      MagickDirectionOptions,MagickFalse,option);\n  else\n    draw_info->direction=UndefinedDirection;\n  option=GetImageOption(clone_info,\"encoding\");\n  if (option != (const char *) NULL)\n    (void) CloneString(&draw_info->encoding,option);\n  option=GetImageOption(clone_info,\"family\");\n  if (option != (const char *) NULL)\n    (void) CloneString(&draw_info->family,option);\n  option=GetImageOption(clone_info,\"fill\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->fill,exception);\n  option=GetImageOption(clone_info,\"gravity\");\n  if (option != (const char *) NULL)\n    draw_info->gravity=(GravityType) ParseCommandOption(MagickGravityOptions,\n      MagickFalse,option);\n  option=GetImageOption(clone_info,\"interline-spacing\");\n  if (option != (const char *) NULL)\n    draw_info->interline_spacing=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"interword-spacing\");\n  if (option != (const char *) NULL)\n    draw_info->interword_spacing=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"kerning\");\n  if (option != (const char *) NULL)\n    draw_info->kerning=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"stroke\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->stroke,exception);\n  option=GetImageOption(clone_info,\"strokewidth\");\n  if (option != (const char *) NULL)\n    draw_info->stroke_width=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"style\");\n  if (option != (const char *) NULL)\n    draw_info->style=(StyleType) ParseCommandOption(MagickStyleOptions,\n      MagickFalse,option);\n  option=GetImageOption(clone_info,\"undercolor\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->undercolor,exception);\n  option=GetImageOption(clone_info,\"weight\");\n  if (option != (const char *) NULL)\n    {\n      ssize_t\n        weight;\n\n      weight=ParseCommandOption(MagickWeightOptions,MagickFalse,option);\n      if (weight == -1)\n        weight=(ssize_t) StringToUnsignedLong(option);\n      draw_info->weight=(size_t) weight;\n    }\n  exception=DestroyExceptionInfo(exception);\n  draw_info->signature=MagickSignature;\n  clone_info=DestroyImageInfo(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   P e r m u t a t e                                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  Permutate() returns the permuation of the (n,k).\n%\n%  The format of the Permutate method is:\n%\n%      void Permutate(ssize_t n,ssize_t k)\n%\n%  A description of each parameter follows:\n%\n%    o n:\n%\n%    o k:\n%\n%\n*/\nstatic inline double Permutate(const ssize_t n,const ssize_t k)\n{\n  double\n    r;\n\n  register ssize_t\n    i;\n\n  r=1.0;\n  for (i=k+1; i <= n; i++)\n    r*=i;\n  for (i=1; i <= (n-k); i++)\n    r/=i;\n  return(r);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   T r a c e P r i m i t i v e                                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  TracePrimitive is a collection of methods for generating graphic\n%  primitives such as arcs, ellipses, paths, etc.\n%\n*/\n\nstatic void TraceArc(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end,const PointInfo degrees)\n{\n  PointInfo\n    center,\n    radii;\n\n  center.x=0.5*(end.x+start.x);\n  center.y=0.5*(end.y+start.y);\n  radii.x=fabs(center.x-start.x);\n  radii.y=fabs(center.y-start.y);\n  TraceEllipse(primitive_info,center,radii,degrees);\n}\n\nstatic void TraceArcPath(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end,const PointInfo arc,const double angle,\n  const MagickBooleanType large_arc,const MagickBooleanType sweep)\n{\n  double\n    alpha,\n    beta,\n    delta,\n    factor,\n    gamma,\n    theta;\n\n  PointInfo\n    center,\n    points[3],\n    radii;\n\n  register double\n    cosine,\n    sine;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  size_t\n    arc_segments;\n\n  if ((fabs(start.x-end.x) < DrawEpsilon) &&\n      (fabs(start.y-end.y) < DrawEpsilon))\n    {\n      TracePoint(primitive_info,end);\n      return;\n    }\n  radii.x=fabs(arc.x);\n  radii.y=fabs(arc.y);\n  if ((fabs(radii.x) < DrawEpsilon) || (fabs(radii.y) < DrawEpsilon))\n    {\n      TraceLine(primitive_info,start,end);\n      return;\n    }\n  cosine=cos(DegreesToRadians(fmod((double) angle,360.0)));\n  sine=sin(DegreesToRadians(fmod((double) angle,360.0)));\n  center.x=(double) (cosine*(end.x-start.x)/2+sine*(end.y-start.y)/2);\n  center.y=(double) (cosine*(end.y-start.y)/2-sine*(end.x-start.x)/2);\n  delta=(center.x*center.x)/(radii.x*radii.x)+(center.y*center.y)/\n    (radii.y*radii.y);\n  if (delta < DrawEpsilon)\n    {\n      TraceLine(primitive_info,start,end);\n      return;\n    }\n  if (delta > 1.0)\n    {\n      radii.x*=sqrt((double) delta);\n      radii.y*=sqrt((double) delta);\n    }\n  points[0].x=(double) (cosine*start.x/radii.x+sine*start.y/radii.x);\n  points[0].y=(double) (cosine*start.y/radii.y-sine*start.x/radii.y);\n  points[1].x=(double) (cosine*end.x/radii.x+sine*end.y/radii.x);\n  points[1].y=(double) (cosine*end.y/radii.y-sine*end.x/radii.y);\n  alpha=points[1].x-points[0].x;\n  beta=points[1].y-points[0].y;\n  factor=PerceptibleReciprocal(alpha*alpha+beta*beta)-0.25;\n  if (factor <= 0.0)\n    factor=0.0;\n  else\n    {\n      factor=sqrt((double) factor);\n      if (sweep == large_arc)\n        factor=(-factor);\n    }\n  center.x=(double) ((points[0].x+points[1].x)/2-factor*beta);\n  center.y=(double) ((points[0].y+points[1].y)/2+factor*alpha);\n  alpha=atan2(points[0].y-center.y,points[0].x-center.x);\n  theta=atan2(points[1].y-center.y,points[1].x-center.x)-alpha;\n  if ((theta < 0.0) && (sweep != MagickFalse))\n    theta+=2.0*MagickPI;\n  else\n    if ((theta > 0.0) && (sweep == MagickFalse))\n      theta-=2.0*MagickPI;\n  arc_segments=(size_t) ceil(fabs((double) (theta/(0.5*MagickPI+\n    DrawEpsilon))));\n  p=primitive_info;\n  for (i=0; i < (ssize_t) arc_segments; i++)\n  {\n    beta=0.5*((alpha+(i+1)*theta/arc_segments)-(alpha+i*theta/arc_segments));\n    gamma=(8.0/3.0)*sin(fmod((double) (0.5*beta),DegreesToRadians(360.0)))*\n      sin(fmod((double) (0.5*beta),DegreesToRadians(360.0)))/\n      sin(fmod((double) beta,DegreesToRadians(360.0)));\n    points[0].x=(double) (center.x+cos(fmod((double) (alpha+(double) i*theta/\n      arc_segments),DegreesToRadians(360.0)))-gamma*sin(fmod((double) (alpha+\n      (double) i*theta/arc_segments),DegreesToRadians(360.0))));\n    points[0].y=(double) (center.y+sin(fmod((double) (alpha+(double) i*theta/\n      arc_segments),DegreesToRadians(360.0)))+gamma*cos(fmod((double) (alpha+\n      (double) i*theta/arc_segments),DegreesToRadians(360.0))));\n    points[2].x=(double) (center.x+cos(fmod((double) (alpha+(double) (i+1)*\n      theta/arc_segments),DegreesToRadians(360.0))));\n    points[2].y=(double) (center.y+sin(fmod((double) (alpha+(double) (i+1)*\n      theta/arc_segments),DegreesToRadians(360.0))));\n    points[1].x=(double) (points[2].x+gamma*sin(fmod((double) (alpha+(double)\n      (i+1)*theta/arc_segments),DegreesToRadians(360.0))));\n    points[1].y=(double) (points[2].y-gamma*cos(fmod((double) (alpha+(double)\n      (i+1)*theta/arc_segments),DegreesToRadians(360.0))));\n    p->point.x=(p == primitive_info) ? start.x : (p-1)->point.x;\n    p->point.y=(p == primitive_info) ? start.y : (p-1)->point.y;\n    (p+1)->point.x=(double) (cosine*radii.x*points[0].x-sine*radii.y*\n      points[0].y);\n    (p+1)->point.y=(double) (sine*radii.x*points[0].x+cosine*radii.y*\n      points[0].y);\n    (p+2)->point.x=(double) (cosine*radii.x*points[1].x-sine*radii.y*\n      points[1].y);\n    (p+2)->point.y=(double) (sine*radii.x*points[1].x+cosine*radii.y*\n      points[1].y);\n    (p+3)->point.x=(double) (cosine*radii.x*points[2].x-sine*radii.y*\n      points[2].y);\n    (p+3)->point.y=(double) (sine*radii.x*points[2].x+cosine*radii.y*\n      points[2].y);\n    if (i == (ssize_t) (arc_segments-1))\n      (p+3)->point=end;\n    TraceBezier(p,4);\n    p+=p->coordinates;\n  }\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceBezier(PrimitiveInfo *primitive_info,\n  const size_t number_coordinates)\n{\n  double\n    alpha,\n    *coefficients,\n    weight;\n\n  PointInfo\n    end,\n    point,\n    *points;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i,\n    j;\n\n  size_t\n    control_points,\n    quantum;\n\n  /*\n    Allocate coeficients.\n  */\n  quantum=number_coordinates;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n  {\n    for (j=i+1; j < (ssize_t) number_coordinates; j++)\n    {\n      alpha=fabs(primitive_info[j].point.x-primitive_info[i].point.x);\n      if (alpha > (double) quantum)\n        quantum=(size_t) alpha;\n      alpha=fabs(primitive_info[j].point.y-primitive_info[i].point.y);\n      if (alpha > (double) quantum)\n        quantum=(size_t) alpha;\n    }\n  }\n  quantum=(size_t) MagickMin((double) quantum/number_coordinates,\n    (double) BezierQuantum);\n  control_points=quantum*number_coordinates;\n  coefficients=(double *) AcquireQuantumMemory((size_t)\n    number_coordinates,sizeof(*coefficients));\n  points=(PointInfo *) AcquireQuantumMemory((size_t) control_points,\n    sizeof(*points));\n  if ((coefficients == (double *) NULL) || (points == (PointInfo *) NULL))\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  /*\n    Compute bezier points.\n  */\n  end=primitive_info[number_coordinates-1].point;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n    coefficients[i]=Permutate((ssize_t) number_coordinates-1,i);\n  weight=0.0;\n  for (i=0; i < (ssize_t) control_points; i++)\n  {\n    p=primitive_info;\n    point.x=0.0;\n    point.y=0.0;\n    alpha=pow((double) (1.0-weight),(double) number_coordinates-1.0);\n    for (j=0; j < (ssize_t) number_coordinates; j++)\n    {\n      point.x+=alpha*coefficients[j]*p->point.x;\n      point.y+=alpha*coefficients[j]*p->point.y;\n      alpha*=weight/(1.0-weight);\n      p++;\n    }\n    points[i]=point;\n    weight+=1.0/control_points;\n  }\n  /*\n    Bezier curves are just short segmented polys.\n  */\n  p=primitive_info;\n  for (i=0; i < (ssize_t) control_points; i++)\n  {\n    TracePoint(p,points[i]);\n    p+=p->coordinates;\n  }\n  TracePoint(p,end);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n  points=(PointInfo *) RelinquishMagickMemory(points);\n  coefficients=(double *) RelinquishMagickMemory(coefficients);\n}\n\nstatic void TraceCircle(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  double\n    alpha,\n    beta,\n    radius;\n\n  PointInfo\n    offset,\n    degrees;\n\n  alpha=end.x-start.x;\n  beta=end.y-start.y;\n  radius=hypot((double) alpha,(double) beta);\n  offset.x=(double) radius;\n  offset.y=(double) radius;\n  degrees.x=0.0;\n  degrees.y=360.0;\n  TraceEllipse(primitive_info,start,offset,degrees);\n}\n\nstatic void TraceEllipse(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo stop,const PointInfo degrees)\n{\n  double\n    delta,\n    step,\n    y;\n\n  PointInfo\n    angle,\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  /*\n    Ellipses are just short segmented polys.\n  */\n  if ((fabs(stop.x) < DrawEpsilon) && (fabs(stop.y) < DrawEpsilon))\n    {\n      TracePoint(primitive_info,start);\n      return;\n    }\n  delta=2.0/MagickMax(stop.x,stop.y);\n  step=MagickPI/8.0;\n  if ((delta >= 0.0) && (delta < (MagickPI/8.0)))\n    step=MagickPI/(4*(MagickPI/delta/2+0.5));\n  angle.x=DegreesToRadians(degrees.x);\n  y=degrees.y;\n  while (y < degrees.x)\n    y+=360.0;\n  angle.y=(double) (DegreesToRadians(y)-DrawEpsilon);\n  for (p=primitive_info; angle.x < angle.y; angle.x+=step)\n  {\n    point.x=cos(fmod(angle.x,DegreesToRadians(360.0)))*stop.x+start.x;\n    point.y=sin(fmod(angle.x,DegreesToRadians(360.0)))*stop.y+start.y;\n    TracePoint(p,point);\n    p+=p->coordinates;\n  }\n  point.x=cos(fmod(angle.y,DegreesToRadians(360.0)))*stop.x+start.x;\n  point.y=sin(fmod(angle.y,DegreesToRadians(360.0)))*stop.y+start.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceLine(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  TracePoint(primitive_info,start);\n  if ((fabs(start.x-end.x) < DrawEpsilon) &&\n      (fabs(start.y-end.y) < DrawEpsilon))\n    {\n      primitive_info->primitive=PointPrimitive;\n      primitive_info->coordinates=1;\n      return;\n    }\n  TracePoint(primitive_info+1,end);\n  (primitive_info+1)->primitive=primitive_info->primitive;\n  primitive_info->coordinates=2;\n}\n\nstatic size_t TracePath(PrimitiveInfo *primitive_info,const char *path)\n{\n  char\n    *next_token,\n    token[MaxTextExtent];\n\n  const char\n    *p;\n\n  double\n    x,\n    y;\n\n  int\n    attribute,\n    last_attribute;\n\n  PointInfo\n    end = {0.0, 0.0},\n    points[4] = { {0.0,0.0}, {0.0,0.0}, {0.0,0.0}, {0.0,0.0} },\n    point = {0.0, 0.0},\n    start = {0.0, 0.0};\n\n  PrimitiveType\n    primitive_type;\n\n  register PrimitiveInfo\n    *q;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_coordinates,\n    z_count;\n\n  attribute=0;\n  number_coordinates=0;\n  z_count=0;\n  primitive_type=primitive_info->primitive;\n  q=primitive_info;\n  for (p=path; *p != '\\0'; )\n  {\n    while (isspace((int) ((unsigned char) *p)) != 0)\n      p++;\n    if (*p == '\\0')\n      break;\n    last_attribute=attribute;\n    attribute=(int) (*p++);\n    switch (attribute)\n    {\n      case 'a':\n      case 'A':\n      {\n        double\n          angle;\n\n        MagickBooleanType\n          large_arc,\n          sweep;\n\n        PointInfo\n          arc;\n\n        /*\n          Compute arc points.\n        */\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          arc.x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          arc.y=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          angle=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          large_arc=StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          sweep=StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          end.x=(double) (attribute == (int) 'A' ? x : point.x+x);\n          end.y=(double) (attribute == (int) 'A' ? y : point.y+y);\n          TraceArcPath(q,point,end,arc,angle,large_arc,sweep);\n          q+=q->coordinates;\n          point=end;\n          while (isspace((int) ((unsigned char) *p)) != 0)\n            p++;\n          if (*p == ',')\n            p++;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'c':\n      case 'C':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=point;\n          for (i=1; i < 4; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            end.x=(double) (attribute == (int) 'C' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'C' ? y : point.y+y);\n            points[i]=end;\n          }\n          for (i=0; i < 4; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,4);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'H':\n      case 'h':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'H' ? x: point.x+x);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'l':\n      case 'L':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'L' ? x : point.x+x);\n          point.y=(double) (attribute == (int) 'L' ? y : point.y+y);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'M':\n      case 'm':\n      {\n        if (q != primitive_info)\n          {\n            primitive_info->coordinates=(size_t) (q-primitive_info);\n            number_coordinates+=primitive_info->coordinates;\n            primitive_info=q;\n          }\n        i=0;\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'M' ? x : point.x+x);\n          point.y=(double) (attribute == (int) 'M' ? y : point.y+y);\n          if (i == 0)\n            start=point;\n          i++;\n          TracePoint(q,point);\n          q+=q->coordinates;\n          if ((i != 0) && (attribute == (int) 'M'))\n            {\n              TracePoint(q,point);\n              q+=q->coordinates;\n            }\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'q':\n      case 'Q':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=point;\n          for (i=1; i < 3; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            if (*p == ',')\n              p++;\n            end.x=(double) (attribute == (int) 'Q' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'Q' ? y : point.y+y);\n            points[i]=end;\n          }\n          for (i=0; i < 3; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,3);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 's':\n      case 'S':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=points[3];\n          points[1].x=2.0*points[3].x-points[2].x;\n          points[1].y=2.0*points[3].y-points[2].y;\n          for (i=2; i < 4; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            if (*p == ',')\n              p++;\n            end.x=(double) (attribute == (int) 'S' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'S' ? y : point.y+y);\n            points[i]=end;\n          }\n          if (strchr(\"CcSs\",last_attribute) == (char *) NULL)\n            {\n              points[0]=point;\n              points[1]=point;\n            }\n          for (i=0; i < 4; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,4);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 't':\n      case 'T':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=points[2];\n          points[1].x=2.0*points[2].x-points[1].x;\n          points[1].y=2.0*points[2].y-points[1].y;\n          for (i=2; i < 3; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            end.x=(double) (attribute == (int) 'T' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'T' ? y : point.y+y);\n            points[i]=end;\n          }\n          if (strchr(\"QqTt\",last_attribute) == (char *) NULL)\n            {\n              points[0]=point;\n              points[1]=point;\n            }\n          for (i=0; i < 3; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,3);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'v':\n      case 'V':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.y=(double) (attribute == (int) 'V' ? y : point.y+y);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'z':\n      case 'Z':\n      {\n        point=start;\n        TracePoint(q,point);\n        q+=q->coordinates;\n        primitive_info->coordinates=(size_t) (q-primitive_info);\n        number_coordinates+=primitive_info->coordinates;\n        primitive_info=q;\n        z_count++;\n        break;\n      }\n      default:\n      {\n        if (isalpha((int) ((unsigned char) attribute)) != 0)\n          (void) FormatLocaleFile(stderr,\"attribute not recognized: %c\\n\",\n            attribute);\n        break;\n      }\n    }\n  }\n  primitive_info->coordinates=(size_t) (q-primitive_info);\n  number_coordinates+=primitive_info->coordinates;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n  {\n    q--;\n    q->primitive=primitive_type;\n    if (z_count > 1)\n      q->method=FillToBorderMethod;\n  }\n  q=primitive_info;\n  return(number_coordinates);\n}\n\nstatic void TraceRectangle(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  PointInfo\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  p=primitive_info;\n  TracePoint(p,start);\n  p+=p->coordinates;\n  point.x=start.x;\n  point.y=end.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  TracePoint(p,end);\n  p+=p->coordinates;\n  point.x=end.x;\n  point.y=start.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  TracePoint(p,start);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceRoundRectangle(PrimitiveInfo *primitive_info,\n  const PointInfo start,const PointInfo end,PointInfo arc)\n{\n  PointInfo\n    degrees,\n    offset,\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  p=primitive_info;\n  offset.x=fabs(end.x-start.x);\n  offset.y=fabs(end.y-start.y);\n  if (arc.x > (0.5*offset.x))\n    arc.x=0.5*offset.x;\n  if (arc.y > (0.5*offset.y))\n    arc.y=0.5*offset.y;\n  point.x=start.x+offset.x-arc.x;\n  point.y=start.y+arc.y;\n  degrees.x=270.0;\n  degrees.y=360.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+offset.x-arc.x;\n  point.y=start.y+offset.y-arc.y;\n  degrees.x=0.0;\n  degrees.y=90.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+arc.x;\n  point.y=start.y+offset.y-arc.y;\n  degrees.x=90.0;\n  degrees.y=180.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+arc.x;\n  point.y=start.y+arc.y;\n  degrees.x=180.0;\n  degrees.y=270.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  TracePoint(p,primitive_info->point);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceSquareLinecap(PrimitiveInfo *primitive_info,\n  const size_t number_vertices,const double offset)\n{\n  double\n    distance;\n\n  register double\n    dx,\n    dy;\n\n  register ssize_t\n    i;\n\n  ssize_t\n    j;\n\n  dx=0.0;\n  dy=0.0;\n  for (i=1; i < (ssize_t) number_vertices; i++)\n  {\n    dx=primitive_info[0].point.x-primitive_info[i].point.x;\n    dy=primitive_info[0].point.y-primitive_info[i].point.y;\n    if ((fabs((double) dx) >= DrawEpsilon) ||\n        (fabs((double) dy) >= DrawEpsilon))\n      break;\n  }\n  if (i == (ssize_t) number_vertices)\n    i=(ssize_t) number_vertices-1L;\n  distance=hypot((double) dx,(double) dy);\n  primitive_info[0].point.x=(double) (primitive_info[i].point.x+\n    dx*(distance+offset)/distance);\n  primitive_info[0].point.y=(double) (primitive_info[i].point.y+\n    dy*(distance+offset)/distance);\n  for (j=(ssize_t) number_vertices-2; j >= 0;  j--)\n  {\n    dx=primitive_info[number_vertices-1].point.x-primitive_info[j].point.x;\n    dy=primitive_info[number_vertices-1].point.y-primitive_info[j].point.y;\n    if ((fabs((double) dx) >= DrawEpsilon) ||\n        (fabs((double) dy) >= DrawEpsilon))\n      break;\n  }\n  distance=hypot((double) dx,(double) dy);\n  primitive_info[number_vertices-1].point.x=(double) (primitive_info[j].point.x+\n    dx*(distance+offset)/distance);\n  primitive_info[number_vertices-1].point.y=(double) (primitive_info[j].point.y+\n    dy*(distance+offset)/distance);\n}\n\nstatic inline double DrawEpsilonReciprocal(const double x)\n{\n  double sign = x < 0.0 ? -1.0 : 1.0;\n  return((sign*x) >= DrawEpsilon ? 1.0/x : sign*(1.0/DrawEpsilon));\n}\n\nstatic PrimitiveInfo *TraceStrokePolygon(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  typedef struct _LineSegment\n  {\n    double\n      p,\n      q;\n  } LineSegment;\n\n  double\n    delta_theta,\n    dot_product,\n    mid,\n    miterlimit;\n\n  LineSegment\n    dx,\n    dy,\n    inverse_slope,\n    slope,\n    theta;\n\n  MagickBooleanType\n    closed_path;\n\n  PointInfo\n    box_p[5],\n    box_q[5],\n    center,\n    offset,\n    *path_p,\n    *path_q;\n\n  PrimitiveInfo\n    *polygon_primitive,\n    *stroke_polygon;\n\n  register ssize_t\n    i;\n\n  size_t\n    arc_segments,\n    max_strokes,\n    number_vertices;\n\n  ssize_t\n    j,\n    n,\n    p,\n    q;\n\n  /*\n    Allocate paths.\n  */\n  number_vertices=primitive_info->coordinates;\n  max_strokes=2*number_vertices+6*BezierQuantum+360;\n  path_p=(PointInfo *) AcquireQuantumMemory((size_t) max_strokes,\n    sizeof(*path_p));\n  path_q=(PointInfo *) AcquireQuantumMemory((size_t) max_strokes,\n    sizeof(*path_q));\n  polygon_primitive=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    number_vertices+2UL,sizeof(*polygon_primitive));\n  if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL) ||\n      (polygon_primitive == (PrimitiveInfo *) NULL))\n    return((PrimitiveInfo *) NULL);\n  (void) CopyMagickMemory(polygon_primitive,primitive_info,(size_t)\n    number_vertices*sizeof(*polygon_primitive));\n  closed_path=\n    (fabs(primitive_info[number_vertices-1].point.x-primitive_info[0].point.x) < DrawEpsilon) &&\n    (fabs(primitive_info[number_vertices-1].point.y-primitive_info[0].point.y) < DrawEpsilon) ?\n    MagickTrue : MagickFalse;\n  if ((draw_info->linejoin == RoundJoin) ||\n      ((draw_info->linejoin == MiterJoin) && (closed_path != MagickFalse)))\n    {\n      polygon_primitive[number_vertices]=primitive_info[1];\n      number_vertices++;\n    }\n  polygon_primitive[number_vertices].primitive=UndefinedPrimitive;\n  /*\n    Compute the slope for the first line segment, p.\n  */\n  dx.p=0.0;\n  dy.p=0.0;\n  for (n=1; n < (ssize_t) number_vertices; n++)\n  {\n    dx.p=polygon_primitive[n].point.x-polygon_primitive[0].point.x;\n    dy.p=polygon_primitive[n].point.y-polygon_primitive[0].point.y;\n    if ((fabs(dx.p) >= DrawEpsilon) || (fabs(dy.p) >= DrawEpsilon))\n      break;\n  }\n  if (n == (ssize_t) number_vertices)\n    n=(ssize_t) number_vertices-1L;\n  slope.p=0.0;\n  inverse_slope.p=0.0;\n  if (fabs(dx.p) < DrawEpsilon)\n    {\n      if (dx.p >= 0.0)\n        slope.p=dy.p < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n      else\n        slope.p=dy.p < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n    }\n  else\n    if (fabs(dy.p) < DrawEpsilon)\n      {\n        if (dy.p >= 0.0)\n          inverse_slope.p=dx.p < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n        else\n          inverse_slope.p=dx.p < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n      }\n    else\n      {\n        slope.p=dy.p/dx.p;\n        inverse_slope.p=(-1.0/slope.p);\n      }\n  mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n  miterlimit=(double) (draw_info->miterlimit*draw_info->miterlimit*mid*mid);\n  if ((draw_info->linecap == SquareCap) && (closed_path == MagickFalse))\n    TraceSquareLinecap(polygon_primitive,number_vertices,mid);\n  offset.x=sqrt((double) (mid*mid/(inverse_slope.p*inverse_slope.p+1.0)));\n  offset.y=(double) (offset.x*inverse_slope.p);\n  if ((dy.p*offset.x-dx.p*offset.y) > 0.0)\n    {\n      box_p[0].x=polygon_primitive[0].point.x-offset.x;\n      box_p[0].y=polygon_primitive[0].point.y-offset.x*inverse_slope.p;\n      box_p[1].x=polygon_primitive[n].point.x-offset.x;\n      box_p[1].y=polygon_primitive[n].point.y-offset.x*inverse_slope.p;\n      box_q[0].x=polygon_primitive[0].point.x+offset.x;\n      box_q[0].y=polygon_primitive[0].point.y+offset.x*inverse_slope.p;\n      box_q[1].x=polygon_primitive[n].point.x+offset.x;\n      box_q[1].y=polygon_primitive[n].point.y+offset.x*inverse_slope.p;\n    }\n  else\n    {\n      box_p[0].x=polygon_primitive[0].point.x+offset.x;\n      box_p[0].y=polygon_primitive[0].point.y+offset.y;\n      box_p[1].x=polygon_primitive[n].point.x+offset.x;\n      box_p[1].y=polygon_primitive[n].point.y+offset.y;\n      box_q[0].x=polygon_primitive[0].point.x-offset.x;\n      box_q[0].y=polygon_primitive[0].point.y-offset.y;\n      box_q[1].x=polygon_primitive[n].point.x-offset.x;\n      box_q[1].y=polygon_primitive[n].point.y-offset.y;\n    }\n  /*\n    Create strokes for the line join attribute: bevel, miter, round.\n  */\n  p=0;\n  q=0;\n  path_q[p++]=box_q[0];\n  path_p[q++]=box_p[0];\n  for (i=(ssize_t) n+1; i < (ssize_t) number_vertices; i++)\n  {\n    /*\n      Compute the slope for this line segment, q.\n    */\n    dx.q=polygon_primitive[i].point.x-polygon_primitive[n].point.x;\n    dy.q=polygon_primitive[i].point.y-polygon_primitive[n].point.y;\n    dot_product=dx.q*dx.q+dy.q*dy.q;\n    if (dot_product < 0.25)\n      continue;\n    slope.q=0.0;\n    inverse_slope.q=0.0;\n    if (fabs(dx.q) < DrawEpsilon)\n      {\n        if (dx.q >= 0.0)\n          slope.q=dy.q < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n        else\n          slope.q=dy.q < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n      }\n    else\n      if (fabs(dy.q) < DrawEpsilon)\n        {\n          if (dy.q >= 0.0)\n            inverse_slope.q=dx.q < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n          else\n            inverse_slope.q=dx.q < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n        }\n      else\n        {\n          slope.q=dy.q/dx.q;\n          inverse_slope.q=(-1.0/slope.q);\n        }\n    offset.x=sqrt((double) (mid*mid/(inverse_slope.q*inverse_slope.q+1.0)));\n    offset.y=(double) (offset.x*inverse_slope.q);\n    dot_product=dy.q*offset.x-dx.q*offset.y;\n    if (dot_product > 0.0)\n      {\n        box_p[2].x=polygon_primitive[n].point.x-offset.x;\n        box_p[2].y=polygon_primitive[n].point.y-offset.y;\n        box_p[3].x=polygon_primitive[i].point.x-offset.x;\n        box_p[3].y=polygon_primitive[i].point.y-offset.y;\n        box_q[2].x=polygon_primitive[n].point.x+offset.x;\n        box_q[2].y=polygon_primitive[n].point.y+offset.y;\n        box_q[3].x=polygon_primitive[i].point.x+offset.x;\n        box_q[3].y=polygon_primitive[i].point.y+offset.y;\n      }\n    else\n      {\n        box_p[2].x=polygon_primitive[n].point.x+offset.x;\n        box_p[2].y=polygon_primitive[n].point.y+offset.y;\n        box_p[3].x=polygon_primitive[i].point.x+offset.x;\n        box_p[3].y=polygon_primitive[i].point.y+offset.y;\n        box_q[2].x=polygon_primitive[n].point.x-offset.x;\n        box_q[2].y=polygon_primitive[n].point.y-offset.y;\n        box_q[3].x=polygon_primitive[i].point.x-offset.x;\n        box_q[3].y=polygon_primitive[i].point.y-offset.y;\n      }\n    if (fabs((double) (slope.p-slope.q)) < DrawEpsilon)\n      {\n        box_p[4]=box_p[1];\n        box_q[4]=box_q[1];\n      }\n    else\n      {\n        box_p[4].x=(double) ((slope.p*box_p[0].x-box_p[0].y-slope.q*box_p[3].x+\n          box_p[3].y)/(slope.p-slope.q));\n        box_p[4].y=(double) (slope.p*(box_p[4].x-box_p[0].x)+box_p[0].y);\n        box_q[4].x=(double) ((slope.p*box_q[0].x-box_q[0].y-slope.q*box_q[3].x+\n          box_q[3].y)/(slope.p-slope.q));\n        box_q[4].y=(double) (slope.p*(box_q[4].x-box_q[0].x)+box_q[0].y);\n      }\n    if (q >= (ssize_t) (max_strokes-6*BezierQuantum-360))\n      {\n        if (~max_strokes < (6*BezierQuantum+360))\n          {\n            path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n            path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n          }\n        else\n          {\n            max_strokes+=6*BezierQuantum+360;\n            path_p=(PointInfo *) ResizeQuantumMemory(path_p,max_strokes,\n              sizeof(*path_p));\n            path_q=(PointInfo *) ResizeQuantumMemory(path_q,max_strokes,\n              sizeof(*path_q));\n          }\n        if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL))\n          {\n            if (path_p != (PointInfo *) NULL)\n              path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n            if (path_q != (PointInfo *) NULL)\n              path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n            polygon_primitive=(PrimitiveInfo *)\n              RelinquishMagickMemory(polygon_primitive);\n            return((PrimitiveInfo *) NULL);\n          }\n      }\n    dot_product=dx.q*dy.p-dx.p*dy.q;\n    if (dot_product <= 0.0)\n      switch (draw_info->linejoin)\n      {\n        case BevelJoin:\n        {\n          path_q[q++]=box_q[1];\n          path_q[q++]=box_q[2];\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_p[p++]=box_p[4];\n          else\n            {\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case MiterJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            {\n              path_q[q++]=box_q[4];\n              path_p[p++]=box_p[4];\n            }\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case RoundJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_p[p++]=box_p[4];\n          else\n            {\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          center=polygon_primitive[n].point;\n          theta.p=atan2(box_q[1].y-center.y,box_q[1].x-center.x);\n          theta.q=atan2(box_q[2].y-center.y,box_q[2].x-center.x);\n          if (theta.q < theta.p)\n            theta.q+=2.0*MagickPI;\n          arc_segments=(size_t) ceil((double) ((theta.q-theta.p)/\n            (2.0*sqrt((double) (1.0/mid)))));\n          path_q[q].x=box_q[1].x;\n          path_q[q].y=box_q[1].y;\n          q++;\n          for (j=1; j < (ssize_t) arc_segments; j++)\n          {\n            delta_theta=(double) (j*(theta.q-theta.p)/arc_segments);\n            path_q[q].x=(double) (center.x+mid*cos(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            path_q[q].y=(double) (center.y+mid*sin(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            q++;\n          }\n          path_q[q++]=box_q[2];\n          break;\n        }\n        default:\n          break;\n      }\n    else\n      switch (draw_info->linejoin)\n      {\n        case BevelJoin:\n        {\n          path_p[p++]=box_p[1];\n          path_p[p++]=box_p[2];\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_q[q++]=box_q[4];\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n            }\n          break;\n        }\n        case MiterJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            {\n              path_q[q++]=box_q[4];\n              path_p[p++]=box_p[4];\n            }\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case RoundJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_q[q++]=box_q[4];\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n            }\n          center=polygon_primitive[n].point;\n          theta.p=atan2(box_p[1].y-center.y,box_p[1].x-center.x);\n          theta.q=atan2(box_p[2].y-center.y,box_p[2].x-center.x);\n          if (theta.p < theta.q)\n            theta.p+=2.0*MagickPI;\n          arc_segments=(size_t) ceil((double) ((theta.p-theta.q)/\n            (2.0*sqrt((double) (1.0/mid)))));\n          path_p[p++]=box_p[1];\n          for (j=1; j < (ssize_t) arc_segments; j++)\n          {\n            delta_theta=(double) (j*(theta.q-theta.p)/arc_segments);\n            path_p[p].x=(double) (center.x+mid*cos(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            path_p[p].y=(double) (center.y+mid*sin(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            p++;\n          }\n          path_p[p++]=box_p[2];\n          break;\n        }\n        default:\n          break;\n      }\n    slope.p=slope.q;\n    inverse_slope.p=inverse_slope.q;\n    box_p[0]=box_p[2];\n    box_p[1]=box_p[3];\n    box_q[0]=box_q[2];\n    box_q[1]=box_q[3];\n    dx.p=dx.q;\n    dy.p=dy.q;\n    n=i;\n  }\n  path_p[p++]=box_p[1];\n  path_q[q++]=box_q[1];\n  /*\n    Trace stroked polygon.\n  */\n  stroke_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    (p+q+2UL*closed_path+2UL),sizeof(*stroke_polygon));\n  if (stroke_polygon != (PrimitiveInfo *) NULL)\n    {\n      for (i=0; i < (ssize_t) p; i++)\n      {\n        stroke_polygon[i]=polygon_primitive[0];\n        stroke_polygon[i].point=path_p[i];\n      }\n      if (closed_path != MagickFalse)\n        {\n          stroke_polygon[i]=polygon_primitive[0];\n          stroke_polygon[i].point=stroke_polygon[0].point;\n          i++;\n        }\n      for ( ; i < (ssize_t) (p+q+closed_path); i++)\n      {\n        stroke_polygon[i]=polygon_primitive[0];\n        stroke_polygon[i].point=path_q[p+q+closed_path-(i+1)];\n      }\n      if (closed_path != MagickFalse)\n        {\n          stroke_polygon[i]=polygon_primitive[0];\n          stroke_polygon[i].point=stroke_polygon[p+closed_path].point;\n          i++;\n        }\n      stroke_polygon[i]=polygon_primitive[0];\n      stroke_polygon[i].point=stroke_polygon[0].point;\n      i++;\n      stroke_polygon[i].primitive=UndefinedPrimitive;\n      stroke_polygon[0].coordinates=(size_t) (p+q+2*closed_path+1);\n    }\n  path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n  path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n  polygon_primitive=(PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive);\n  return(stroke_polygon);\n}\n"], "fixing_code": ["2016-08-03  6.9.5-5 Cristy  <quetzlzacatenango@image...>\n  * Prevent buffer overflow (bug report from Max Thrane).\n\n2016-07-30  6.9.5-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-4, GIT revision 10973:a00fa93:20160729.\n\n2016-07-35  6.9.5-4 Cristy  <quetzlzacatenango@image...>\n  * Prevent buffer overflow (bug report from Ibrahim el-sayed).\n\n2016-07-15  6.9.5-3 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-3, GIT revision 18627:2b5ddbd:20160721.\n\n2016-07-13  6.9.5-3 Cristy  <quetzlzacatenango@image...>\n  * Fix MVG stroke-opacity (reference\n    https://github.com/ImageMagick/ImageMagick/issues/229).\n  * Prevent possible buffer overflow when reading TIFF images (bug report from\n    Shi Pu of MS509 Team).\n\n2016-07-11  6.9.5-2 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-2, GIT revision 18591:50debe5:20160710.\n\n2016-07-10  6.9.5-2 Cristy  <quetzlzacatenango@image...>\n  * To comply with the SVG standard, use stroke-opacity for transparent strokes.\n\n2016-07-09  6.9.5-1 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-1, GIT revision 18572:28560fc:20160709.\n\n2016-07-04  6.9.5-1 Cristy  <quetzlzacatenango@image...>\n  * The histogram coder now returns the correct extent.\n  * Use CopyMagickString() rather than CopyMagickMemory() for strings.\n\n2016-06-26  6.9.5-0 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.5-0, GIT revision 18514:a7b5b46:20160626.\n\n2016-06-23  6.9.5-0 Cristy  <quetzlzacatenango@image...>\n  * Correct for numerical instability (reference\n    https://github.com/ImageMagick/ImageMagick/issues/218).\n\n2016-06-21  6.9.4-10 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-10, GIT revision 10907:a08de63:20160622.\n\n2016-06-17  6.9.4-10 Dirk Lemstra <dirk@lem.....org>\n  * Added support for GROUP4 compression to the FAX coder.\n\n2016-06-17  6.9.4-10 Cristy  <quetzlzacatenango@image...>\n  * Don't return a zero bounding box for QueryMultilineFontMetrics() (reference\n    https://github.com/ImageMagick/ImageMagick/issues/222).\n\n2016-06-12  6.9.4-9 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-9, GIT revision 10884:f0e15e8:20160612.\n\n2016-06-09  6.9.4-9 Cristy  <quetzlzacatenango@image...>\n  * Backoff finite precision epsilon (reference\n    https://github.com/ImageMagick/ImageMagick/issues/215).\n  * Fix drawing glitch for stroke widths greater than 2 (reference\n    https://github.com/ImageMagick/ImageMagick/issues/218).\n\n2016-06-05  6.9.4-8 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-8, GIT revision 18406:ba4ad2d:20160607.\n\n2016-06-04  6.9.4-8 Cristy  <quetzlzacatenango@image...>\n  * RLE check for pixel offset less than 0 (heap overflow report from Craig\n    Young).\n  * Properly initialze PES blocks (reference\n    https://github.com/ImageMagick/ImageMagick/issues/213).\n\n2016-06-03  6.9.4-7 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-7, GIT revision 10847:339f803:20160602.\n\n2016-06-02  6.9.4-7 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak (patch provided by \u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0435\u0440\u043d\u044b\u0439).\n  * Coder path traversal is not authorized (bug report provided by\n    Masaaki Chida).\n  * Turn off alpha channel for the compare difference image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29828).\n\n2016-05-31  6.9.4-6 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-6, GIT revision 18334:97775b5:20160531.\n\n2016-05-31  6.9.4-6 Cristy  <quetzlzacatenango@image...>\n  * Support configure script --enable-pipes option to enable pipes (|) in\n    filenames.\n  * Support configure script --enable-indirect-reads option to enable\n    indirect reads (@) in filenames.\n\n2016-05-30  6.9.4-5 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-5, GIT revision 18321:5511ef5:20160530.\n\n2016-05-28  6.9.4-5 Dirk Lemstra <dirk@lem.....org>\n  * Most OpenCL operations are now executed asynchronous.\n\n2016-05-25  6.9.4-5 Cristy  <quetzlzacatenango@image...>\n  * Security improvements to TEXT coder broke it (reference\n  * Prevent possible shell command injection vulnerability through the\n    authenticate parameter of the PDF, PCL and XPS coders (report from\n    Erez Turjeman).\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29754).\n  * Fix stroke offset problem for -annotate (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29626).\n  * Add additional checks to DCM reader to prevent data-driven faults (bug\n    report from Hanno B\u00f6ck).\n\n2016-05-21  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-4, GIT revision 18241:d4f277c:20160521.\n\n2016-05-20  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed proper placement of text annotation for east / west gravity.\n\n2016-05-15  6.9.4-4 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-4, GIT revision 10789:f7c2e89:20160518.\n\n2016-05-15  6.9.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel cache on disk regression (reference\n    https://github.com/ImageMagick/ImageMagick/issues/202).\n\n2016-05-15  6.9.4-2 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-2, GIT revision 10778:52dae14:20160516.\n\n2016-05-10  6.9.4-2 Cristy  <quetzlzacatenango@image...>\n  * Quote passwords when passed to a delegate program.\n  * Can read geo-related EXIF metdata once-again (reference\n    https://github.com/ImageMagick/ImageMagick/issues/198).\n  * Sanitize all delegate emedded formatting characters.\n  * Don't sync pixel cache in AcquireAuthenticCacheView() (bug report from\n    Hanno B\u00f6ck).\n\n2016-05-09  6.9.4-1 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-1, GIT revision 10755:d540dda:20160509.\n\n2016-05-07  6.9.4-1 Cristy  <quetzlzacatenango@image...>\n  * Remove https delegate.\n\n2016-05-05  6.9.4-0 Cristy  <quetzlzacatenango@image...>\n  * Release ImageMagick version 6.9.4-0, GIT revision 10741:5746147:20160507.\n\n2016-05-04  6.9.4-0 Cristy  <quetzlzacatenango@image...>\n  * Check for buffer overflow in magick/draw.c/DrawStrokePolygon().\n  * Replace show delegate title with image filename rather than label.\n  * Fix GetNextToken() off by one error.\n  * Remove support for internal ephemeral coder.\n\n2016-05-03  6.9.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-10, GIT revision 10723:9fc8a0c:20160503.\n\n2016-05-03  6.9.3-10 Cristy  <quetzlzacatenango@image...>\n  * Sanitize input filename for http / https delegates (improved patch).\n  * Fix for possible security vulnerabilities (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=4&t=29588).\n\n2016-04-30  6.9.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-9, GIT revision 10716:b527bce:20160430.\n\n2016-04-12  6.9.3-9 Cristy  <quetzlzacatenango@image...>\n  * Sanitize input filename for http / https delegates.\n  * Indirect filename must be authorized by policy.\n  * The txt coder now properly reports Lab colors (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=2944).\n\n2016-04-11  6.9.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-8, GIT revision 10690:d058a53:20160411\n\n2016-03-22  6.9.3-8 Cristy  <quetzlzacatenango@image...>\n  * Respect gravity when rendering text (e.g. convert -gravity center my.txt)\n  * Return empty string for %d property and no directory (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29365)\n  * Return filename for the %i property (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=29364).\n  * Fixed lost pixels in frequency space (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29374).\n\n2016-03-06  6.9.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-7, GIT revision 10628:810a9fe:20160306\n\n2016-03-05  6.9.3-7 Dirk Lemstra <dirk@lem.....org>\n  * -size can now be used the specify the maximum width/height for the\n    following vector formats:\n      * SVG (when librsvg and cairo are being used).\n      * EMF (did not work on Windows).\n\n2016-02-29  6.9.3-7 Cristy  <quetzlzacatenango@image...>\n  * Fixed text alignment issue for label: / coder: (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29223).\n\n2016-02-27  6.9.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-6, GIT revision 10597:83584a1:20160228.\n\n2016-02-25  6.9.3-6 Cristy  <quetzlzacatenango@image...>\n  * Ensure TXT: image format survives round-trip (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29206).\n\n2016-02-21  6.9.2-6 Dirk Lemstra <dirk@lem.....org>\n  * Added wavelet denoise.\n\n2016-02-20  6.9.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-5, GIT revision 10572:cb24a69:20160219.\n\n2016-02-16  6.9.3-5 Cristy  <quetzlzacatenango@image...>\n  * Too many bytes when writing raw image formats (reference\n    https://github.com/ImageMagick/ImageMagick/issues/132).\n\n2016-02-12  6.9.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-4, GIT revision 10560:09f5f5d:20160212.\n\n2016-02-12  6.9.3-4 Dirk Lemstra <dirk@lem.....org>\n  * Fixed memory leak when reading an SVG without width/height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=27&p=130197).\n\n2016-02-09  6.9.3-4 Cristy  <quetzlzacatenango@image...>\n  * Fix compiler error for complext text layout.\n\n2016-02-05  6.9.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-3, GIT revision 10540:6b4c918:20160206.\n\n2016-02-04  6.9.3-3 Cristy  <quetzlzacatenango@image...>\n  * Numerous bugs fixed from fuzzed images (reference\n    https://github.com/ImageMagick/ImageMagick/issues/123).\n  * The -bias option is no longer a noop (reference\n    https://github.com/ImageMagick/ImageMagick/issues/125).\n\n2016-01-25  6.9.3-3 Dirk Lemstra <dirk@lem.....org>\n  * Read XCF layer name (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=129638).\n\n2016-01-23  6.9.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-2, GIT revision 10496:315028c:20160122.\n\n2016-01-17  6.9.3-2 Cristy  <quetzlzacatenango@image...>\n  * Don't reuse lock after free (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=29031).\n\n2016-01-21  6.9.3-2 Dirk Lemstra <dirk@lem.....org>\n  * Fixed writing DocClass in CALS coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=129478).\n\n2016-01-17  6.9.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-1, GIT revision 10488:e4f046e:20160116.\n\n2016-01-06  6.9.3-1 Cristy  <quetzlzacatenango@image...>\n  * Pair AcquireMagickResource with calls to RelinquishMagickResource when\n    resource limits are hit (reference\n    https://github.com/ImageMagick/ImageMagick/pull/75).\n  * Return non-zero for the -format %b option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28969).\n\n2016-01-01  6.9.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.3-0, GIT revision 10445:620328b:20160101.\n\n2015-12-31  6.9.3-0 Cristy  <quetzlzacatenango@image...>\n  * Don't break on euro-style numbers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28910).\n\n2015-12-22  6.9.3-0 Glenn Randers-Pehrson <glennrp@image...>\n  * 16-bit pnm images have a max value of 65535.\n\n2015-12-18  6.9.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-10, GIT revision 10415:e31c09d:20151219.\n\n2015-12-19  6.9.2-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed compile error when POSIX threads are not defined.\n\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28791).\n2015-12-18  6.9.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-9, GIT revision 10402:0027295:20151219\n\n2015-12-05  6.9.2-9 Dirk Lemstra <dirk@lem.....org>\n  * Fixed memory leak when reading incorrect PSD files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28791).\n\n2015-12-05  6.9.2-9 Cristy  <quetzlzacatenango@image...>\n  * Enhance PDF to properly handle unicode titles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28786).\n  * Fix memory leak in icon coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=28848).\n\n2015-12-05  6.9.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-8, GIT revision 10374:ac7d144:20151205.\n\n2015-12-04  6.9.2-8 Cristy  <quetzlzacatenango@image...>\n  * Gray artifacts in large gif when using -layers optimize (reference\n    https://github.com/ImageMagick/ImageMagick/issues/57).\n\n2015-11-26  6.9.2-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-7, GIT revision 10370:eeb7d4e:20151126.\n\n2015-11-24  6.9.2-7 Dirk Lemstra <dirk@lem.....org>\n  * The DICOM reader now handles the rescale intercept and slope.\n  * Added 'bmp3:alpha' option for including the alpha channel when writing\n    an image in the BMP3 format. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28733).\n  * Only one thread permitted when delegating to the Ghostscript library\n    under Windows.\n\n2015-11-14  6.9.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-6, GIT revision 10341:f408196:20151113.\n\n2015-11-08  6.9.2-6 Cristy  <quetzlzacatenango@image...>\n  * PixelColor off by one on i386 (reference\n    https://github.com/ImageMagick/ImageMagick/issues/54).\n  * Eliminate stack overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28658).\n\n2015-11-03  6.9.2-6 Dirk Lemstra <dirk@lem.....org>\n  * Added local contrast enhancement.\n  * Fixed bug in SetPixelCacheExtent that made images all black (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28514).\n  * Added support for reading DICOM images with implicit vr little-endian\n    transfer syntax.\n\n2015-11-02  6.9.2-6 Samuel Thibault <samuel.thibault@...org> \n  * Added 6dot variant for unicode and iso braille formats (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&p=127111).\n\n2015-10-31  6.9.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-5, GIT revision 10316:86a76b6:20151031.\n\n2015-10-15  6.9.2-5 Dirk Lemstra <dirk@lem.....org>\n  * Fixed alpha blending issue with semi-transparent pixels in the merged\n    image of PSD files. This can be disabled by setting the option\n    'psd:alpha-unblend' to 'off' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28169).\n  * Fixed issue in jpeg:extent that prevented it from working (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=126638).\n  * Fixed memory leak when reading Photoshop layers in a TIFF file.\n\n2015-10-12  6.9.2-5 Cristy  <quetzlzacatenango@image...>\n  * Support gradient:bounding-box, gradient:vector, gradient:center, and\n    gradient:radius to shape the gradient rendering.\n  * Recognize label:@- as stdin (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28501).\n  * Make commas optional for coordinates (e.g. 0,0 256,256).\n\n2015-10-10  6.9.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-4, GIT revision 10273:e00cf21:20151010\n\n2015-10-08  6.9.2-4 Dirk Lemstra <dirk@lem.....org>\n  * Fixed accessing subimage in a TIFF photoshop layer (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28469).\n  * Fixed out of bounds error in -splice (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28466).\n\n2015-09-25  6.9.2-4 Eric McConville <emcconville@emccon...>\n  * Created Manhattan Interpolate method for -sparse-color (reference\n    https://github.com/ImageMagick/ImageMagick/pull/36).\n\n2015-09-22  6.9.2-4 Cristy  <quetzlzacatenango@image...>\n  * Prevent null pointer access (reference\n    https://github.com/ImageMagick/ImageMagick/pull/34).\n  * Specify histogram code image format implictedly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28412).\n  * Don't round up for JPEG image resolution (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28422).\n  * Read the whole image @ image.jp2[0] or an individual tile @ image.jp2[1],\n    image.jp2[2].\n  * The -caption option no longer fails for filenames with @ prefix (reference\n    https://github.com/ImageMagick/ImageMagick/issues/43).\n  * Honor $XDG_CONFIG_HOME and $XDG_CACHE_HOME (reference\n    https://github.com/ImageMagick/ImageMagick/issues/44).\n\n2015-09-19  6.9.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-3, GIT revision 10235:c40ee57:20150919\n\n2015-09-17  6.9.2-2 Dirk Lemstra <dirk@lem.....org>\n  * Added extra checks to avoid out of bounds error when parsing the 8bim \n    profile (reference https://github.com/ImageMagick/ImageMagick/issues/31).\n  * Fixed size of memory allocation in RLE coder to avoid segfault (reference\n    https://github.com/ImageMagick/ImageMagick/issues/32).\n\n2015-09-16  6.9.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add Bootstrap MIT license to ImageMagick web CSS and JS.\n  * Use modern idiom for autoconf\n    Fix a forgotten dir when regenerating html doc (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28363).\n  * The -colorspace gray option no long leaves a ghostly shadow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28350).\n\n2015-09-14  6.9.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-1, GIT revision 10201:5879612:20150913.\n\n2015-09-13  6.9.2-1 Dirk Lemstra <dirk@lem.....org>\n  * Preserving image origin in TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28310).\n\n2015-08-15  6.9.2-1 Cristy  <quetzlzacatenango@image...>\n  * Support color compliance for TXT format (e.g. -define txt:compliance=css)\n    (bug report from Anthony).\n  * The first argument of a hsl() color is integer, not percentage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26072).\n  * Limit -fx recursive to avoid stack overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28200).\n  * Support inline images with data URLS.\n  * Report progress less often (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28299).\n  * Don't set image colorspace to gray for -alpha copy option.\n  * Fixed a possible memory leak associated with the -sampling-factor option.\n  * GetImageType() no longer has side-effects to match behavior of IMv7.\n\n2015-08-15  6.9.2-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.2-0, GIT revision 10143:3534f6d:20150815.\n\n2015-08-10  6.9.2-0 Cristy  <quetzlzacatenango@image...>\n  * Swap pixels for -spread command-line option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28043).\n  * fx logical operations short circuit (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28179).\n  * Type cast intensity variable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28182).\n  * Fix ModulusAdd & ModulusSubstract for HDRI compositing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28186).\n\n2015-07-25  6.9.2-0 Dirk Lemstra <dirk@lem.....org>\n  * Added \"-set colorspace:auto-grayscale false\" that will prevent automatic\n    conversion to grayscale inside coders that support grayscale.\n  * Fixed -list weight and the options for -weight.\n  * Added fontFamily, fontStyle, fontWeight and textUnderColor to the Image\n    class of Magick++.\n  * Fixed reading Photoshop layers of LSB TIFF files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=28045).\n  * Fixed memory leak in font cache under Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=28191).\n\n2015-07-25  6.9.1-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-10, SVN revision 19269.\n\n2015-07-20  6.9.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/magick.c: added \"-define h:format=FMT\" and\n    \"-define magick:format=FMT\" options. FMT can be any output format\n    supported by ImageMagick except \"H\" or \"MAGICK\". If this define is\n    omitted, the encoder uses GIF by default for pseudoclass images and\n    PNM for directclass images, as previously.  Made \"MAGICK\" (read-write)\n    and \"H\" (write-only) visible in the format list.\n\n2015-07-18  6.9.1-10 Dirk lemstra <dirk@lem.....org>\n  * Removed incorrect EOF check in the DDS reader (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28065).\n\n2015-07-18  6.9.1-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed undefined behaviors (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28067).\n  * Return exception message for unknown image properties.\n  * Color shift removed when reading transparent gray images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28081)\n\n2015-07-18  6.9.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-9, SVN revision 19200.\n\n2015-07-12  6.9.1-9 Dirk Lemstra <dirk@lem.....org>\n  * Fixed issue with radial gradient in MVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27995).\n\n2015-07-11  6.9.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-8, SVN revision 19167.\n\n2015-06-25  6.9.1-8 Cristy  <quetzlzacatenango@image...>\n  * Correct install location of the Magick++ headers (reference\n    https://github.com/ImageMagick/ImageMagick/pull/17/commits).\n  * Different gif cropping behavior between versions (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28013).\n  * Cannot read properly simple psd file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=28002).\n\n2015-07-04  6.9.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-7, SVN revision 19121.\n\n2015-06-27  6.9.1-7 Eric Dalquist\n  * Fixed and escaped output of the json coder. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=27894).\n\n2015-06-25  6.9.1-7 Cristy  <quetzlzacatenango@image...>\n  * Support BPG image format (respects -quality option).\n  * A bordered transparent image now remains transparent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=5&t=27937).\n  * The -update option behavior restored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=27939).\n\n2015-06-13  6.9.1-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-6, SVN revision 18945.\n\n2015-06-14  6.9.1-6 Cristy  <quetzlzacatenango@image...>\n  * Cache cloning on disk optimized with sendfile() (if available).\n  * Add an additional check for end-of-file for the RLE coder (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3&t=27870).\n  * Respect resource limits in AVS coder.\n\n2015-06-13  6.9.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Reverted change to 6.9.1-3 that skipped palette-building.\n\n2015-06-13  6.9.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-5, SVN revision 18882.\n\n2015-06-03  6.9.1-5 Cristy  <quetzlzacatenango@image...>\n  * Use correct scale when interpretting alpha (e.g. rgba(0,0,0,1)).\n  * DrawGetVectorGraphics() now returns proper XML (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27751).\n  * Support writing EXR files with different color types (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=27759).\n  * Prefer PKG_CHECK_MODULES() when searching for delegate libraries.\n  * Throw exception if frame option bevel exceeds to the image width / height.\n  * Resolve undefined behaviors (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27811).\n\n2015-06-01  6.9.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-4, SVN revision 18697.\n\n2015-06-01  6.9.1-4 Cristy  <quetzlzacatenango@image...>\n  * Support 'restrict' keyword under Windows.\n\n2015-05-25  6.9.1-4 Dirk Lemstra <dirk@lem.....org>\n  * Added support for reading a user supplied layer mask in PSD files.\n  * Added support for reading photoshop layers in TIFF files.\n\n2015-05-24  6.9.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-3, SVN revision 18623.\n\n2015-05-03  6.9.1-3 Dirk Lemstra <dirk@lem.....org>\n  * Fixed transparency issue with 16-bit tga files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27469).\n  * Fixed writing label and comment in tiff images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25516).\n  * Jpeg images no longer have pixels per inch as a default value for density\n    units when the density is not set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27589).\n  * Added support for setting the font color with -fill to the pango coder.\n\n2015-05-03  6.9.1-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with \"-define png:format=x\" in png.c, introduced in version\n    6.8.9-0, that caused the define to be ignored.\n  * Replaced some dead code in ReadJNGImage with an assert().\n  * Avoid palette-building when writing a grayscale PNG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27580).\n\n2015-04-20  6.9.1-3 Cristy  <quetzlzacatenango@image...>\n  * Support -define compose:clamp=false option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26946).\n  * Don't extend any user supplied image buffer in SeekBlob() (bug report\n    from a.chernij@corp...).\n  * Improved reproducible builds (reference\n    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=783933).\n  * Draw a rectangle of width & height of 1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24874).\n\n2015-04-19  6.9.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-2, SVN revision 18429.\n\n2015-04-09  6.9.1-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Avoid using a NULL alpha_image or color_image in the JNG decoder.\n\n2015-04-07  6.9.1-2 Cristy  <quetzlzacatenango@image...>\n  * Fix JPEG-2000 transparency on write (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27304).\n  * Identify now identifies PSD (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26948).\n  * Speed up writing to TGA (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27369).\n\n2015-04-06  6.9.1-2 Dirk Lemstra <dirk@lem.....org>\n  * Reduce draw epsilon to increase mathematical stability.\n  * Fixed UTF8 issue when determining the current working directory\n    on Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27295).\n\n2015-04-04  6.9.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-1, SVN revision 18308.\n\n2015-03-21  6.9.1-1 Cristy  <quetzlzacatenango@image...>\n  * Skip empty frames when comparing layers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27234).\n\n2015-03-21  6.9.1-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.1-0, SVN revision 18245.\n\n2015-03-17  6.9.1-0 Cristy  <quetzlzacatenango@image...>\n  * Grayscale DPX image files are no longer skewed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27209).\n\n2015-03-16  6.9.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix integer overflow when scaling a 1-bit sample to Q64 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27195).\n\n2015-03-01  6.9.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-10, SVN revision 18299.\n\n2015-03-03  6.9.0-10 Cristy  <quetzlzacatenango@image...>\n  * Account for differences in image size when comparing two images (bug\n    report from Dirk).\n  * Set an upper ceiling compression with -quality and jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=27071).\n\n2015-03-01  6.9.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-9, SVN revision 18179.\n\n2015-02-22  6.9.0-9 Cristy  <quetzlzacatenango@image...>\n  * Writing histograms / mpeg working again (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27089).\n  * The -linear-stretch option worked for Q16 but not Q32 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27112).\n\n2015-02-22  6.9.0-8 Cristy  <quetzlzacatenango@image...>\n  * Bogus release, withdrawn.\n\n2015-02-22  6.9.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-7, SVN revision 18067.\n\n2015-02-15  6.9.0-7 Cristy  <quetzlzacatenango@image...>\n  * Line strokes appeared too thin (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26927).\n  * Keep text in caption area (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22504).\n\n2015-02-14  6.9.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-6, SVN revision 18010.\n\n2015-02-12  6.9.0-6 Dirk Lemstra <dirk@lem.....org>\n  * Fixed command line execution in Windows for delegates that\n    move files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=27027).\n\n2015-02-10  6.9.0-6 Cristy  <quetzlzacatenango@image...>\n  * A transient bug for the write MSL element (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27022).\n\n2015-02-08  6.9.0-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Remove uninitialized, unused \"p++\" from coders/png.c, MNG reader.\n  * Initialize \"length\" in coders/png.c, WriteJNGImage().\n  * Fix signed/unsigned mismatch in coders/png.c, MNG reader.\n\n2015-02-08  6.9.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-5, SVN revision 17946.\n\n2015-01-30  6.9.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * In coders/gif.c, quiet two warnings.\n\n2015-01-24  6.9.0-5 Dirk Lemstra <dirk@lem.....org>\n  * Fixed iccColorProfile() in Magick++ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26910).\n  * Fixed infinite loop in HDR reader (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26929).\n\n2015-01-23  6.9.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Check lengths of certain MNG chunks before reading them.\n  * In the PNG codec, check status wherever a function returns it.\n\n2015-01-18  6.9.0-5 Cristy  <quetzlzacatenango@image...>\n  * Remove possible resource memory leak in a multi-threaded program (bug\n    report and patch from David Chapman <d...@acm.org>.\n  * Small optimization to pixel cache.\n  * More image sanity checks.\n  * Support writing base64-encoded images (e.g\n\t  convert logo: inline:jpeg:logo.txt).\n  * Repair small TIFF leak when pinging (patch provided by Andrey Cherniy).\n\n2015-01-16  6.9.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-4, SVN revision 17697.\n\n2015-01-07  6.9.0-4 Cristy  <quetzlzacatenango@image...>\n  * Additional coder sanity checks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26842,\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26682).\n\n2015-01-05  6.9.0-4 Dirk Lemstra <dirk@lem.....org>\n  * Report Ghostscript version when -verbose is used and when an exception\n    is raised.\n  * Fixed invalid path check in MagickCoreGenesis under Windows and disabled\n    ProvideDllMain by default (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&p=118875).\n\n2015-01-01  6.9.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-3, SVN revision 17537.\n\n2015-01-01  6.9.0-3 Cristy  <quetzlzacatenango@image...>\n  * ImageMagick builds when HDRI is enabled (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26803).\n\n2014-12-31  6.9.0-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't read beyond the end of a tEXt keyword when checking for Raw profile.\n\n2014-12-27  6.9.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-2, SVN revision 17468.\n\n2014-12-14  6.9.0-1 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading EXR files to the Windows distribution.\n  * Fixed enabling alpha in 32-bit BMP files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26662).\n  * Added support for writing 16-bit TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=26693).\n  * Improved performance of dds:cluster-fit when OpenMP is enabled.\n  * Added support for distributed pixel cache to the Windows distribution.\n\n2014-12-04  6.9.0-1 Alexey Dolgavin <dolgavin.alexey@gmail...>\n  * Fix ImageMagick crashes while read EXIF from TIFF.\n\n2014-11-20  6.9.0-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't handle a \"previous\" image in the PNG or JNG decoder.\n  * Don't override gamma with 1.0 when reading a grayscale PNG image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26576).\n  * Update progress monitor for every PNG row instead of every pass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=26589).\n  * Reject input PNG with dimensions larger than specified with -limit width\n    and -limit height.\n\n2014-11-20  6.9.0-1 Cristy  <quetzlzacatenango@image...>\n  * Fix double free / invalid read when converting jpg to pdb (thanks to\n    Hanno).\n  * Maximum XWD image size is 64Kx64K (thanks to Hanno).\n  * Maximum DPX number of elements is 8 (thanks to Hanno).\n  * Transient problem with SVG (reference\n      http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26587).\n  * Numerous buffer overflow fixes (thanks to Gynvael Coldwind and\n    Mateusz Jurczyk of the Google Security Team).\n  * Additional PNM sanity checks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26682).\n  * The SetImageBias() bias value is no longer ignored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25732).\n  * Area crop now returns the expected number of tiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26701).\n  * Respect TGA ColorMapIndex field (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26738).\n  * Clang does not support __alloc_size__, fix fabs() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26739).\n  * Support width and height resource limits.\n  * Don't read TIFF profiles when pinging (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26670).\n\n2014-11-16  6.9.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.9.0-0, SVN revision 17067.\n\n2014-11-03  6.9.0-0 Cristy  <quetzlzacatenango@image...>\n  * Check for zero-sized rendered SVG image (bug report from\n    Vladimir Davydov).\n\n2014-11-01  6.8.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-10, SVN revision 16910.\n\n2014-10-29  6.8.9-10 Cristy  <quetzlzacatenango@image...>\n  * EXIF directory offsets must be greater than 0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26456).\n  * Accept morphology kernels from files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26466).\n  * Don't optimize JPEG compression by default (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26482).\n\n2014-10-26  6.8.9-10 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading jpeg compressed YCCK tiff files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24412).\n  * Fixed reading DICOM files with big endian transfer syntax (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26448).\n\n2014-10-25  6.8.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-9, SVN revision 16819.\n\n2014-10-03  6.8.9-9 Dirk Lemstra <dirk@snakeware...>\n  * Added sixel coder created by Hayaki Saito (@kefir_).\n  * Fixed buffer overflow in PCX and DCM coder (bug report from Hanno B\u00f6ck).\n  * Added support for reading/writing the tIME chunk in the PNG coder.\n  * Added eps:fit-page option to the PS coder to set -dEPSFitPage.\n  * Improved reporting tiff:alpha and allowed setting tiff:alpha to\n    unspecified.\n\n2014-09-30  6.8.9-9 Cristy  <quetzlzacatenango@image...>\n  * Support xyY colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26324).\n  * Reduce noise while preserving edges with the -kuwahara option.\n  * Off-by-one count when parsing an 8BIM profile.\n  * Locale.c won't build if uselocale found but strtod_l isn't (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26362).\n  * OpenCL no longer benchmarks are run on every initialization (patch\n    submitted by Jan Steffens).\n  * Don't clone a 0x0 image (bug report from Hanno B\u00f6ck).\n\n2014-09-21  6.8.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-8, SVN revision 16502.\n\n2014-09-16  6.8.9-8 Cristy  <quetzlzacatenango@image...>\n  * JPEG library version >= 80 is thread safe (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25495).\n\n2014-08-31  6.8.9-8 Dirk Lemstra <dirk@snakeware...>\n  * Added support for some legacy dds formats (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=26184).\n\n2014-08-16  6.8.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-7, SVN revision 16330.\n\n2014-08-14  6.8.9-7 Cristy  <quetzlzacatenango@image...>\n  * Fix off by one buglet when extracting profiles 8BIM (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26095).\n\n2014-07-31  6.8.9-7 Dirk Lemstra <dirk@snakeware...>\n  * Fixed bug when reading 1 bit PSD. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26015).\n\n2014-07-25  6.8.9-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Relocate initialization of \"image_colors\" in the PNG encoder, to avoid\n    a possible use of uninitialized variable.\n\n2014-07-25  6.8.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-6, SVN revision 16211.\n\n2014-07-24  6.8.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Use IsOptionMember() instead of LocaleNCompare() in coders/png.c to\n    parse the list of excluded and included PNG chunks.\n\n2014-07-19  6.8.9-6 Dirk Lemstra <dirk@snakeware...>\n  * Fixed fill-rule in SVG clip path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25882).\n\n2014-07-14  6.8.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed some dead code (testing image->matte) in PNG64 encoder.\n\n2014-07-07  6.8.9-6 Dirk Lemstra <dirk@snakeware...>\n  * Added support for R5G6B5, RGB5A1 and RGBA4 dds files.\n\n2014-07-01  6.8.9-6 Cristy  <quetzlzacatenango@image...>\n  * Write LAB pixels as percentages in the TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25830).\n  * Throw exception when image morphology differs when comparing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25927).\n  * Remove mogrify backup file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25683).\n  * Read WEBP images from STDIN (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25886).\n\n2014-07-01  6.8.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-5, SVN revision 16123.\n\n2014-06-28  6.8.9-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not let libpng16 check ICC/sRGB profiles in non-debug runs; we do\n    it ourselves anyway.  Avoids emitting \"known incorrect profile\" warnings.\n    For strict profile checking and warning, use \"-debug coder\".\n\n2014-06-27  6.8.9-5 Dirk Lemstra <dirk@snakeware...>\n  * Disabled OpenCL acceleration when image has a 'mask' or 'clip-mask'.\n\n2014-06-25  6.8.9-5 Cristy  <quetzlzacatenango@image...>\n  * Use -define profile:skip=icc, for example,  to skip color profiles on read.\n\n2014-06-23  6.8.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-4, SVN revision 16057.\n\n2014-06-15  6.8.9-4 Cristy  <quetzlzacatenango@image...>\n  * Support RMS argument for -evaluate-sequence and -statistic options.\n  * Fix lseek define for a successful compile under 64-bit MinGW.\n  * Pipe image to display program no longer reports an exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23532).\n  * Check that profile is non-NULL in coders/tiff.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25770).\n\n2014-06-08  6.8.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-3, SVN revision 15975.\n\n2014-06-07  6.8.9-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Quiet warning about unused variable \"skip_to_iend\" in coders/png.c.\n\n2014-06-07  6.8.9-3 Dirk Lemstra <dirk@snakeware...>\n  * Fixed creation of SVG from 8bim clip path. (reference \n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25594).\n\n2014-06-02  6.8.9-3 Cristy  <quetzlzacatenango@image...>\n  * The -version option returns 0 status (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25667).\n  * The inline coder can now read from standard input (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25641).\n  * Add '=' character to the sanitize whitelist.\n\n2014-05-30  6.8.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-2, SVN revision 15932.\n\n2014-05-18  6.8.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed some bugs in the PNG codec discovered by coverity analysis.\n\n2014-05-14  6.8.9-2 Cristy  <quetzlzacatenango@image...>\n  * The -fx equality operator returns a proper boolean result now (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25580).\n  * Permit spaces in the gradient color specification (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25614).\n  * Fix IdentifyImage() crash when image->magick member is null (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25615).\n  * The -format M and Y channels are no longer reversed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25633).\n  * Remove Makefile race condition where two targets attempt to install\n    magick-baseconfig.h (reference\n    http://git.buildroot.net/buildroot/commit/?id=7395ee9d3b88e45798143e05a28d6d4b51409130)\n  * Fix memory leak in BlobToStringInfo() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25639).\n  * In certain cases, -adaptive-sharpen failed to sharpen (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23211\n\n2014-05-12  6.8.9-2 Dirk Lemstra <dirk@snakeware...>\n  * Bump major Magick++ library version.\n  * Added support for writing RLE compressed TGA files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12335).\n  * Improved performance of parsing the xmp profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25612).\n  * Fixed detecting transparency in PSD files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25634).\n\n2014-05-09  6.8.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-1, SVN revision 15697.\n\n2014-04-22  6.8.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with the PNG00 subformat when the original format was PNG32.\n  * The \"-strip\" option now only removes profiles and comments from PNG\n    output.  Previously the background, density, and other metadata were\n    also discarded.\n\n2014-04-22  6.8.9-1 Cristy  <quetzlzacatenango@image...>\n  * Support new -hough-lines option.\n  * Support new -mean-shift option.\n  * identify -units without argument no longer faults (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25542).\n  * Require OpenJP2 version 2.1.0 (opj_stream_set_user_data() method signature\n    change between 2.0.0 and 2.1.0).\n\n2014-04-20  6.8.9-1 Dirk Lemstra <dirk@snakeware...>\n  * Added image moments, canny edge and hough line to Magick++.\n  * The 8bim profile will be updated when the icc/iptc/xmp profile is changed.\n  * Fix for stack overflow in DestroyXMLTree in Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25457).\n  * Added new coder for VIPS image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=25445).\n  * Moved detection of type to a separate method in Magick++. The type() method\n    no longer modifies the type of the image. Use determineType() instead.\n  * Improved error messages when a coder uses Ghostscript.\n\n2014-04-11  6.8.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.9-0, SVN revision 15441.\n\n2014-04-03  6.8.9-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with -strip failing to exclude PNG chunks (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25353).\n\n2014-03-30  6.8.9-0 Dirk Lemstra <dirk@snakeware...>\n  * Added new coder to take a screen shot of a monitor in Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=25191).\n\n2014-03-24  6.8.9-0 Cristy  <quetzlzacatenango@image...>\n  * Don't transform sRGB compatible colorspaces to sRGB, doing so\n    inadvertently promotes colormapped images to DirectClass.\n  * Use temporary path rather then current working directory (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25313).\n  * Support -canny edge detection option.\n  * Use MAGICKCORE_LIBOPENJP2_DELEGATE instead of MAGICKCORE_JP2_DELEGATE\n    (reference www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25376).\n\n2014-03-28  6.8.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-9, SVN revision 15239.\n\n2014-03-23  6.8.8-10 Cristy  <quetzlzacatenango@image...>\n  * Although they are internal methods, deprecate InitializeModuleList(),\n    LoadMimeLists(), and RelinquishCommandQueue() (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25263).\n\n2014-03-20  6.8.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-9, SVN revision 15192.\n\n2014-03-16  6.8.8-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not block threads in the png codec when PNG_SETJMP_SUPPORTED is not\n    defined (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=25218).\n\n2014-03-15  6.8.8-9 Dirk Lemstra <dirk@snakeware...>\n  * Added tiff:ignore-tags to ignore specific tags.\n  * Added orderedDither, selectiveBlur, separate, sepiaTone, sketch,\n    smushImages, tint, uniqueColors and vignette to Magick++.\n\n2014-03-11  6.8.8-9 Cristy  <quetzlzacatenango@image...>\n  * The -define jpeg:extent option overrides the image quality (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25200). \n\n2014-03-09  6.8.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-8, SVN revision 15097.\n\n2014-03-04  6.8.8-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Reset colorspace to Grayscale when reading a gray PNG image with\n    gamma > 0.75 instead of when gamma==1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25136).\n\n2014-02-22  6.8.8-8 Dirk Lemstra <dirk@snakeware...>\n  * The PSD reader creates a merged image if the image does not contain one.\n  * Added option pdf:fit-page to scale a pdf to the specified size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25044).\n  * The ResolutionInfo in the 8BIM profile will be updated when an image is\n    written.\n  * Fixed UTF8 issues and added support for reading files with long path names\n    for the Windows distribution.\n\n2014-02-21  6.8.8-8 Cristy  <quetzlzacatenango@image...>\n  * Convert linear RGB to sRGB before writing the Targa image format.\n  * Make sure we use the secure C library functions when compiling ImageMagick\n    on Windows.\n  * Tweak color reduction optimization to return a full color palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=25098).\n  * Patch configure.ac to support FlashPix under Debian (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25140).\n  * OpenCL support writes to $HOME/.config/ImageMagick, if the path does not\n    exist, two calls to mkdir() are required (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25080).\n  * Replace  MAGICKCORE_JP2_DELEGATE with MAGICKCORE_LIBOPENJP2_DELEGATE in\n    magick/static.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25153).\n  * Eliminate thread race condition (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=25168).\n\n2014-02-18  6.8.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-7, SVN revision 14908.\n\n2014-02-16  6.8.8-7 Cristy  <quetzlzacatenango@image...>\n  * Prevent possible buffer overflow in messaging system.\n\n2014-02-16  6.8.8-7 Dirk Lemstra <dirk@snakeware...>\n  * Improved detection of JPEG 2000 code streams and .j2c support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24942).\n  * Added morphology to Magick++.\n\n2014-02-13  6.8.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-6, SVN revision 14868.\n\n2014-02-13  6.8.8-6 Cristy  <quetzlzacatenango@image...>\n  * identify -define identify:locate=maximum locates the position of the\n    maximum value (stopped working in 6.8.8-5).\n\n2014-02-03  6.8.8-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-5, SVN revision 14838.\n\n2014-01-31  6.8.8-5 Cristy  <quetzlzacatenango@image...>\n  * Fix case where an image moment might have a mass of 0 or a Hu moment might\n    be 0.\n  * Enhance the TXT coder to read RGB percent values, e.g. 10.008% (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24934).\n\n2014-01-30  6.8.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed new \"-define png:swap-bytes\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24818).\n\n2014-01-29  6.8.8-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-4, SVN revision 14676.\n\n2014-01-29  6.8.8-4 Cristy  <quetzlzacatenango@image...>\n  * Remove comma at end of enumerator list, magick/compare.h.\n\n2014-01-28  6.8.8-4 Dirk Lemstra <dirk@snakeware...>\n  * Added transpose and transverse to Magick++. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24884).\n\n2014-01-25  6.8.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-3, SVN revision 14651.\n\n2014-01-18  6.8.8-3 Dirk Lemstra <dirk@snakeware...>\n  * Added ResourceLimits class and text direction/gravity to Magick++.\n  * Added support for defining dimensions with icon:auto-resize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24796).\n\n2014-01-16  6.8.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define png:swap-bytes\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24818).\n  * Added image->duration to image.h, calculate duration in gif.c, and\n    report duration in identify.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23276).\n\n2014-01-15  6.8.8-3 Cristy  <quetzlzacatenango@image...>\n  * The -type truecolor option for a grayscale image returns RGB JPEG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24814).\n  * Support JSON coder (.e.g. convert image.jpg image.json).\n\n2014-01-10  6.8.8-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-2, SVN revision 14347.\n\n2014-01-09  6.8.8-2 Dirk Lemstra <dirk@snakeware...>\n  * Added option 'icon:auto-resize' to automatically store multiple sizes\n    in an ico image (requires 256x256 input image).\n  * Added text kerning/spacing to Magick++. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=24716).\n\n2013-12-30  6.8.8-2 Cristy  <quetzlzacatenango@image...>\n  * The -evaluate-sequence sum returns a proper alpha channel now (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24704).\n  * Support OpenJPEG for JPEG-2000 support.\n  * Support IsMagickWandInstantiated() method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=24724).\n  * LevelColorsImageChannel() returns proper status (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24751).\n  * Generate a proper SVG clipping path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24752).\n  * Return image moments with the identify -moments -verbose options.\n  * Perceptual hash metric for compare utility: -metric PHASH (algorithm\n    by Fred Wienhaus).\n\n2013-12-30  6.8.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-1, SVN revision 14087.\n\n2013-12-27  6.8.8-1 Cristy  <quetzlzacatenango@image...>\n  * Support points argument for draw MSL element.\n  * Fix misplaced closing parenthesis for strncmp() call in magick/xml-tree.c.\n  * The -page option now correctly sets the image page offset (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24701).\n\n2013-12-26  6.8.8-1 Dirk Lemstra <dirk@snakeware...>\n  * Added support for reading zip compressed PSD files. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24676).\n\n2013-12-25  6.8.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.8-0, SVN revision 14027.\n\n2013-12-23  6.8.8-0 Cristy  <quetzlzacatenango@image...>\n  * Blurring with transparency no longer returns a halo (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24665).\n  * Eliminate ICC profile memory leak for JP2 coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24679).\n\n2012-12-21  6.8.8-0 Dirk Lemstra <dirk@snakeware...>\n  * Made librsvg the default svg library for the windows distribution.\n\n2013-12-10  6.8.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-10, SVN revision 13965.\n\n2013-12-10  6.8.7-10  SiuChi Chan  <...>\n  * Fix crash when using -resize with GPU acceleration (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24603).\n\n2013-12-08  6.8.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-9, SVN revision 13950.\n\n2013-12-05  6.8.7-9  SiuChi Chan  <...>\n  * Silence warning related to GPU memory issues.\n  * Check if OpenCL is disabled in checkOpenCLEnvironment() method.\n  * Turn off OpenCL path for Intel OpenCL to avoid crash when not enough memory.\n  * Fixed a bug for OpenCL convolution.\n  * Reduce compiler warnings.\n\n2013-12-03  6.8.7-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug in coders/png.c that caused -define png:color-type=0 to\n    fail (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24568).\n\n2013-11-30  6.8.7-9 Dirk Lemstra <dirk@snakeware...>\n  * Fixed bug in automatic selection of OpenCL device (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24542).\n  * Fixed transparency for 32 bits BMP.\n\n2013-11-28  6.8.7-9 Cristy  <quetzlzacatenango@image...>\n  * The -type bilevel option sometimes returned an all white image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24444).\n  * Check blue channel threshold for -solarize option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24473).\n\n2013-11-27  6.8.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-8, SVN revision 13850.\n\n2013-11-27  6.8.7-8  SiuChi Chan  <...>\n  * Add an OpenCL-accelerated analog of AddNoiseImage().\n\n2013-11-23  6.8.7-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-7, SVN revision 13827.\n\n2013-11-23  6.8.7-7  SiuChi Chan  <...>\n  * Simplified interface to initialize the OpenCL environment.\n  * Automatic OpenCL device selection algorithm.\n  * Support ModulateImage() acceleration.\n  * Reduce the memory requirement for accelerated blur and unsharp mask.\n\n2013-11-16  6.8.7-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-6, SVN revision 13767.\n\n2013-11-14  6.8.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix possible memory corruption when writing PSD images (bug report from\n    Justin Grant).\n  * Constrain color reduction acceleration to positive integers (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24459).\n  * fx:maxima.a now returns the alpha value rather than opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24461).\n\n2013-11-08  6.8.7-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-5, SVN revision 13682.\n\n2013-11-03  6.8.7-5 Cristy  <quetzlzacatenango@image...>\n  * The jpeg:extent option no longer returns double-free exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24366).\n  * Turn off arch-specific optimizations (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24353).\n  * The -type bilevel option no longer returns black image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24394).\n\n2013-11-03  6.8.7-5 Dirk Lemstra <dirk@snakeware...>\n  * Added support for pangocairo to the windows distribution.\n  * Added /OpenCL option to configure.exe to enable OpenCL.\n\n2013-10-31  6.8.7-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed cut-and-paste error in version.c that caused the \"png\" delegate\n    to be listed twice by the \"convert -version\" command.\n\n2013-10-30  6.8.7-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-4, SVN revision 13616.\n\n2013-10-26  6.8.7-4  Siu Chi Chan <...@amd.com>\n  * Major improvements to the OpenCL infrastructure.\n  * New OpenCL accelerated algorithms (function image, blur, radial blur,\n    unsharp mask, resize, contrast, equalize, despeckle).\n  * Added a new checkbox to enable OpenCL in the configure program.\n\n2013-10-24  6.8.7-4 Cristy  <quetzlzacatenango@image...>\n  * Color reduction acceleration from Yoya (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24324).\n  * -intensity rec709luma -colorspace gray returns gamma 1.0/2.2 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24330).\n  * Handle 16-bit JPEG-compressed TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24331).\n  * An image -compose ModulusAdd negate-image returns the original (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24337).\n  * Support %U escape character for resolution units (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=24140).\n\n2013-10-23  6.8.7-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-3, SVN revision 13557.\n\n2013-10-23  6.8.7-3 Cristy  <quetzlzacatenango@image...>\n  * The -roll option is now working when the +x coordinate is +0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24314).\n\n2013-10-22  6.8.7-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-2, SVN revision 13534.\n\n2013-10-20  6.8.7-2 Cristy  <quetzlzacatenango@image...>\n  * Define cmsUInt32Number if LCMS version is < 2000.\n  * Set xc:gray() intensity to Rec709Luma (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24303).\n\n2013-10-20  6.8.7-2 Dirk Lemstra <dirk@snakeware...>\n  * GetImageDepth() no longer returns incorrect depth when HDRI enabled.\n\n2013-10-19  6.8.7-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-1, SVN revision 13486.\n\n2013-10-10  6.8.7-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -complex option, perform complex mathematics on an\n    image sequence.\n  * Sync pixel cache for -set colorspace cmyk option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24173).\n\n2013-09-27  6.8.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed problem with PNG8 reduction in coders/png.c (special case where\n    exactly 256 colors plus one transparent color are present).\n  * Set image->intensity = Rec709LuminancePixelIntensityMethod before\n    setting the colorspace to Gray while reading a gray PNG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24205).\n    This ensures that image->gamma will be set to 1.0 (linear).\n\n2013-09-26  6.8.7-1 Dirk Lemstra <dirk@snakeware...>\n  * Fixed incorrect size of DICOM image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24135).\n  * Fixed rounding in YUV coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24148).\n  * Fixed colorspace issue when combining images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24173).\n  * Replaced libjpeg with libjpeg-turbo in the windows distribution.\n  * Added support for liquid rescale to the windows distribution.\n  * Set image type after syncing the pixel cache.\n\n2013-09-25  6.8.7-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.7-0, SVN revision 13290.\n\n2013-09-23  6.8.7-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed comments about the -quality value in PNG coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=24134).\n\n2013-09-19  6.8.7-0 Dirk Lemstra <dirk@snakeware...>\n  * Fixed issue with colormap when reading Viff image.\n  * Added support for opening https files under windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24121).\n  * Fixed incorrect format when reading EPT image from a blob (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24129).\n\n2013-09-18  6.8.6-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-10, SVN revision 13240.\n\n2013-09-07  6.8.6-10 Dirk Lemstra <dirk@snakeware...>\n  * Added support for writing DDS files.\n\n2013-08-29  6.8.6-10 Cristy  <quetzlzacatenango@image...>\n  * Call SVG / MSL xmlCleanupParser() / xmlInitParser() once (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23991).\n  * Support LEGO Mindstorms EV3 Robot Graphics File format (contributed\n    by bdwheele@ind.../\n  * Since glib-2.35.0 g_type_init() was removed (reference\n    https://bugs.gentoo.org/show_bug.cgi?id=481042).\n  * New identify define to output the location of the minimum, maximum, or\n    mean pixel of the image (e.g. identify -define identify:locate=maximum\n    -define identify:limit=7 rose).\n  * Column columns / rows no longer inverted for RGF image format (patch\n    from Brian Wheeler <bdwheele@india...>.\n  * 16bit PSD images might have a 65536 colormap (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24102).\n  * Ascii map is now declare as AsciiMap (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24106).\n  * Return label for identify -format \"%l\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=24105).\n  * Add option to perform Fourier normalization in either the forward or\n    inverse transform (e.g -define fourier:normalize=inverse). The default\n    remains as it was in the forward transform (i.e. -define\n    fourier:normalize=forward)\n\n2013-08-26  6.8.6-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-9, SVN revision 13087.\n\n2013-08-16  6.8.6-9  SiuChi Chan  <...>\n  * Accelerate numerous image filters with OpenCL under AMD, Intel, and\n    NVidia.  Adapted from MulticoreWare OpenCL contribution.\n\n2013-08-10  6.8.6-9 Dirk Lemstra <dirk@snakeware..>\n  * Added the following command line options to configure.exe:\n      /x64, set 64 bit build\n      /mtd, set project type to: multi threaded dll\n      /sts, set project type to: single threaded static\n      /mts, set project type to: multi threaded static\n      /mtsd, set project type to: multi threaded static dll\n      /noWizard, skip the wizard and generate the project/solution files\n  * Fixed infinite loop with jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23314).\n  * Fixed performance issue when converting jpeg to png (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23922).\n\n2013-08-10  6.8.6.9 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define bmp:format=bmp2|bmp3|bmp4\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23875).\n\n2013-08-07  6.8.6-9 Cristy  <quetzlzacatenango@image...>\n  * Free disk resource if cache resources are exhausted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23877).\n  * Return proper EXIF:ISOSpeedRating property value for TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23913).\n  * Escape MIFF properties with null values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23931).\n  * Allow negative pixel values in TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23923).\n  * The -fx option no longer crashes for certain expressions (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23932).\n  * Add support for the -compare option (e.g. convert image.png reference.png\n    -metric RMSE -compare -format \"%[distortion]\" info:).\n  * The internal SVG renderer is now invariant for the \"fill\" and \"opacity\"\n    keywords.\n\n2013-08-06  6.8.6-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-8, SVN revision 12918.\n\n2013-08-04  6.8.6-8 Dirk Lemstra <dirk@snakeware...>\n  * Added support for WebP to the Windows distribution (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23856).\n\n2013-07-31  6.8.6-8 Cristy  <quetzlzacatenango@image...>\n  * Properly handle interlaced GIF images with less than 8 rows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23812).\n  * Ensure image colorspace is sRGB when writing WebP format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23841).\n  * Avoid deadlock with logging subsystem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23849).\n\n2013-07-25  6.8.6-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-7, SVN revision 12752.\n\n2013-07-24  6.8.6-7 Cristy  <quetzlzacatenango@image...>\n  * Missing case for HCLpColorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23811).\n\n2013-07-21  6.8.6.7 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not write \"jpeg:\" properties in a PNG output file (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23794).\n\n2013-07-17  6.8.6-7 Dirk Lemstra <dirk@snakeware...>\n  * Fix memory leak in CloneImageArtifacts and CloneImageProfiles.\n  * Minor fix for the clipMask property in Magick++.\n\n2013-07-16  6.8.6-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-6, SVN revision 12718.\n\n2013-07-16  6.8.6-6 Cristy  <quetzlzacatenango@image...>\n  * JPEG ICC color profile requires null after ICC tag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23756).\n  * Don't sync channels for the -unsharp option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23740).\n  * Magick++ version so bump (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23752).\n\n2013-07-15  6.8.6-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-5, SVN revision 12684.\n\n2013-07-12  6.8.6-5 Dirk Lemstra <dirk@snakeware...>\n  * Fixed calculation of pixel area count limit flag ('@').\n  * Added option to enable OpenMP to configure.exe and improved creation\n    of x64 project file\n\n2013-07-10  6.8.6-5 Cristy  <quetzlzacatenango@image...>\n  * Compare exits with a non-zero exit code when no error (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23722).\n  * Correct calculation of quantization error (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=23734).\n  * Correct quantize tree walking mistake for RiemersmaDither (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23735).\n\n2013-07-10  6.8.6-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-4, SVN revision 12661.\n\n2013-07-09  6.8.6-4 Dirk Lemstra <dirk@snakeware...>\n  * Added combineImages, evaluateImages, mergeImageLayers, optimizeImageLayers\n    optimizePlusImageLayers and separateImages to STL.h (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23699).\n  * Added support for the fill area flag ('^') and the pixel area\n    count limit flag ('@') to the Geometry class of Magick++ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23704).\n  * Enabled automatic linking for static Magick++ in Visual Studio (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23558).\n\n2013-07-01  6.8.6-4 Cristy  <quetzlzacatenango@image...>\n  * Thumb property need Height, not height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23661).\n  * White pixels previously were written as black for the CIP format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23677).\n  * Rec709Luma is sRGB compatible (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23693).\n  * Colorspace RGB is linear, gamma is 1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23708).\n\n2013-07-01  6.8.6-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-3, SVN revision 12579.\n\n2013-06-26  6.8.6-3 Cristy  <quetzlzacatenango@image...>\n  * Improve HCL to RGB roundtrip (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22384).\n  * Prefer external log configuration file to built-in (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23640).\n  * Do not log in the IsLinkedListEmpty() method to prevent overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23640).\n  * Fix bug loading TGA image with 32-bit palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17889).\n  * Color profiles are no longer corrupted for the JPEG format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23651).\n  * Repair problem with -emboss / -equalize problem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23643).\n\n2013-06-24  6.8.6-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-2, SVN revision 12561.\n\n2013-06-21  6.8.6-2 Cristy  <quetzlzacatenango@image...>\n  * Fix memory corruption in the MorphologyApply() method.\n\n2013-06-20  6.8.6.2 Glenn Randers-Pehrson <glennrp@image...>\n  * Quiet two warnings about uninitialized variables in coders/png.c\n\n2013-06-20  6.8.6-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-1, SVN revision 12509.\n\n2013-06-16  6.8.6-1 Cristy  <quetzlzacatenango@image...>\n  * Don't decompand RGB for the -modulate option.\n  * Improve LCHab and LCHuv roundtrip to / from sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23596).\n\n2013-06-16  6.8.6-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.6-0, SVN revision 12475.\n\n2013-06-10  6.8.6-0 Cristy  <quetzlzacatenango@image...>\n  * Clone image->intensity in CloneImageProperties() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23569).\n  * Split test suite into smaller tests (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23577).\n  * Undercolor rectangle was off by one pixel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23574).\n  * Don't msync() for a read-only memory-mapped mode (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23531).\n  * BlurChannelImage() no longer faults for certain CMYK images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23581).\n  * Reduce memory requirements for large BMP images.\n\n2013-06-05  6.8.5-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-10, SVN revision 12419.\n\n2013-06-02  6.8.5-10 Cristy  <quetzlzacatenango@image...>\n  * Improve caption formatting (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23522).\n\n2013-06-01  6.8.5-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-9, SVN revision 12401.\n\n2013-05-30  6.8.5-9 Cristy  <quetzlzacatenango@image...>\n  * Caption no longer clips long words (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23504).\n  * The lightness intensity is (min(R',G',B')+max(R',G',B'))/2.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23517).\n\n2013-05-25  6.8.5-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-8, SVN revision 12362.\n\n2013-05-23  6.8.5-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Stopped a \"-fsanitize-address\" warning in the JNG coder.\n\n2013-05-20  6.8.5-8 Cristy  <quetzlzacatenango@image...>\n  * The -white-threshold option is symmetrical with -black-threshold (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23441);\n  * Fix multi-line PNM comments (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23442).\n  * The -format option should not automatically append a newline since the\n    user can specify a newline in the formatting expression.\n  * The -level option is no longer returning a darkened image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23479).\n  * Identify SVG image as \"SVG\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=27654).\n\n2013-05-20  6.8.5-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-7, SVN revision 12310.\n\n2013-05-14  6.8.5-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize PNG iCCP chunks that contain the sRGB profile and replace\n    them with the PNG sRGB chunk.  Use \"-define png:preserve-iCCP\" to\n    get the previous behavior, of simply copying the iCCP chunk.\n\n2013-05-11  6.8.5-7 Cristy  <quetzlzacatenango@image...>\n  * Sometimes an sRGB image is masquerading as grayscale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23370).\n  * Labels no longer overflow (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22964).\n  * If more then one exception, return the highest security exception.\n  * A grayscale image returns a color JPEG for -type TrueColor (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23421).\n  * Read PAM comment (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23442).\n\n2013-05-10  6.8.5-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-6, SVN revision 12257.\n\n2013-05-09  6.8.5-6 Cristy  <quetzlzacatenango@image...>\n  * The stream utility no longer faults when exporting float pixels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23394).\n\n2013-05-08  6.8.5-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-5, SVN revision 12227.\n\n2013-05-07  6.8.5-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Change the sample JPEG quantization table xml to something that works\n    really well with 2x2 Chroma subsampling around quality 75.\n\n2013-05-06  6.8.5-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminate whitespace from image properties that hold PNG chunk data.\n\n2013-05-05  6.8.5-5 Cristy  <quetzlzacatenango@image...>\n  * The -poly option treats the opacity channel as alpha (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23346).\n  * The -threshold 50% option returns a 50-50 black and white image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23354).\n  * Let user override the TIFF rows per strip  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=23307).\n  * Fix transient bug in the -separate option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23335).\n\n2013-05-01  6.8.5-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-4, SVN revision 12089.\n\n2013-05-01  6.8.5-4 Cristy  <quetzlzacatenango@image...>\n  * Add DeleteImageArtifact() for jpeg:extent artifact (thanks to\n    Jimmy Xie @ Microsoft).\n  * Track morphology changes per thread to avoid a critical section.\n\n2013-04-28  6.8.5-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-3, SVN revision 12025.\n\n2013-04-29  6.8.5-3 Cristy  <quetzlzacatenango@image...>\n  * Add DeleteImageArtifact() for jpeg:extent artifact (thanks to\n    Jimmy Xie @ Microsoft).\n  * Add support for JXR / WDP image format.\n\n2013-04-28  6.8.5-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-2, SVN revision 12013.\n\n2013-04-28  6.8.5-2 Cristy  <quetzlzacatenango@image...>\n  * Use GetImageOption() for webp options (e.g. webp:lossless).\n\n2013-04-27  6.8.5-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-1, SVN revision 12000.\n\n2013-04-26  6.8.5-1 Cristy  <quetzlzacatenango@image...>\n  * Recognize xc:gray50 is non-linear.\n  * Loop over read() until requested bytes are consumed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=23268).\n  * Don't use gamma lookup map when HDRI is enabled.\n\n2013-04-24  6.8.5-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.5-0, SVN revision 11979.\n\n2013-04-16  6.8.5-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Handle benign errors as warnings in the PNG coder.\n\n2013-04-16  6.8.5-0 Cristy  <quetzlzacatenango@image...>\n  * Don't modify channel values for -separate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23193).\n  * The -adaptive-sharpen option is now sharpening properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23211).\n  * Sometimes an image says it's grayscale when it's not (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23217).\n  * Use malloc() to allocate X image data (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23221).\n  * If there are more components than quantization tables, the last table is\n    replicated.\n  * Removed the ICC profile from the logo: image definition in coders/magick.c;\n    libpng16 detected that it was a broken sRGB profile.\n  * Negatives raised to a non-integer power returns NaN's (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23234).\n\n2013-04-15  6.8.4-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-10, SVN revision 11851.\n\n2013-04-11  6.8.4-10 Cristy  <quetzlzacatenango@image...>\n  * Ensure -define jpeg:extent is restricted to at most 7 iterations (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23179).\n  * Move X11 font support from annotate.c source module to xwindow.c.\n\n2013-04-10  6.8.4-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-9, SVN revision 11818.\n\n2013-04-10  6.8.4-9 Bastien Roucaries  <roucaries.basti...>\n  * Respect --program-suffix configure script option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23143).\n  * Update to the newest AX_CHECK_PTHREAD macro from autoconf-archive.\n\n2013-04-10  6.8.4-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Save the calculated angle for \"deskew\" as the artifact \"deskew:angle\"\n\n2013-04-08  6.8.4-9 Cristy  <quetzlzacatenango@image...>\n  * Pass JP2 format type to decoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23038).\n  * Previously tinting a grayscale image returned dark results.\n  * The -page option only affects new images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23172).\n  * Revert 'Move binaries to lib subdirectory and link are created from binary\n    package' patch.  We're getting too many bug reports.\n\n2013-04-07  6.8.4-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-8, SVN revision 11743.\n\n2013-04-06  6.8.4-8 Cristy  <quetzlzacatenango@image...>\n  * Include intensity type in the MIFF metadata.\n\n2013-04-06  6.8.4-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-7, SVN revision 11720.\n\n2013-04-05  6.8.4-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix -sample sampling point to midpoints of sampling areas\n  * Add a \"sample:offset=\" define to allow users to adjust this\n    sampling point position in terms of percentage (default = 50x50)\n\n2013-04-02  6.8.4-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write a PNG gAMA or cHRM chunk when writing the iCCP or sRGB chunk.\n\n2013-04-02  6.8.4-7 Cristy  <quetzlzacatenango@image...>\n  * Return MagickWand for the library name for Wand.pc.\n  * The LCH colorspace makes the round-trip now.\n  * Revert the default upsampling algortithm for JPEG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23100).\n  * Prevent fault when temporary directory is not-writable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23117).\n\n2013-04-01  6.8.4-7 Bastien Roucaries  <roucaries.basti...>\n  * Prepare X11 support as a plugin.\n  * Fix compilation under HPUX of perlmagick\n\n2013-04-01  6.8.4-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-6, SVN revision 11640.\n\n2013-04-01  6.8.4-6 Cristy  <quetzlzacatenango@image...>\n  * The -clut option return a luma grayscale instead of the expected luminance.\n  * Add moduledir variable to MagickCore.pc to support the MagickFilter and\n    MagickCore kits.\n  * Caption fits the sized area (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23085).\n\n2013-03-31  6.8.4-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-5, SVN revision 11619.\n\n2013-03-30  6.8.4-5 Cristy  <quetzlzacatenango@image...>\n  * Fix transient bug when writing grayscale MIFF images.\n  * Adding noise to a gray image returns a gray image as expected.\n  * Image interlace no longer overwritten by proper cloning for GIF format.\n  * Extract the clipping path from an image file with clip:myimage.\n\n2013-03-29  6.8.4-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-4, SVN revision 11591.\n\n2013-03-29  6.8.4-4 Cristy  <quetzlzacatenango@image...>\n  * Update unit test signatures for Q8.\n  * Resolve send() / recv() socket problems under MinGW.\n\n2013-03-28  6.8.4-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-3, SVN revision 11581.\n\n2013-03-28  6.8.4-3 Cristy  <quetzlzacatenango@image...>\n  * Revert patch to ContrastStretchImage() to match results from 6.8.3-3.\n\n2013-03-27  6.8.4-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-2, SVN revision 11558.\n\n2013-03-27  6.8.4-2 Cristy  <quetzlzacatenango@image...>\n  * Use MorphologyApply() rather than MorphologyImage() for -sharpen / -blur.\n\n2013-03-27  6.8.4-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-1, SVN revision 11552.\n\n2013-03-26  6.8.4-1 Cristy  <quetzlzacatenango@image...>\n  * Sync 'intensity' option with current image.\n  * Normalize sharpen kernel to match that of 6.8.3-3.\n\n2013-03-26  6.8.4-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.4-0, SVN revision 11531.\n\n2013-03-20  6.8.4-0 Cristy  <quetzlzacatenango@image...>\n  * Do not write zero-length TIFF tags (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22957).\n  * Math library should be private for *.pc.in configuration files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22986).\n  * Do not split words for caption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17123).\n  * Modify the configure script check for the webp delegate library (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=23025).\n  * The -blur, -gaussian-blur, and -sharpen are now convenience methods\n    for -morphology convolve.\n  * Fix infinite loop for 'display -window' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23028).\n  * Revert -auto-level patch to match the results of ImageMagick 6.8.3-4.\n  * Revert g_type_init() patch in svg.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=23035).\n\n2013-03-18  6.8.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-10, SVN revision 11413.\n\n2013-03-15  6.8.3-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Added IM, libpng, and zlib version info to debug output.\n\n2013-03-10  6.8.3-10 Bastien Roucaries  <roucaries.basti...>\n  * Move PerlMagick arch independent part to 'default' folder.\n  * Move binaries to lib subdirectory and link are created from binary package.\n\n2013-03-10  6.8.3-10 Cristy  <quetzlzacatenango@image...>\n  * The TXT image format can now generate output compatible with the\n    -sparse-color option (e.g. convert image.png sparse-color:image.txt).\n  * Support -intensity option: method to generate an intensity value from a\n    pixel.\n  * Add -similarity-threshold option to the compare utility, the minimum\n    distortion for a (sub)image match.\n  * Avoid seq-fault in AcquireQuantumInfo() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22973).\n  * Comment resource initializers in magick/resource.c.\n\n2013-03-10  6.8.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-9, SVN revision 11294.\n\n2013-03-09  6.8.3-9 Cristy  <quetzlzacatenango@image...>\n  * Add a space after the LastPage option in coders/ps.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22940).\n\n2013-03-08  6.8.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-8, SVN revision 11283.\n\n2013-03-05  6.8.3-8 Cristy  <quetzlzacatenango@image...>\n  * GIF comments are no longer displaced by 1 for animated GIFs (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22901).\n  * A blur kernel with a zero sigma is unity.\n\n2013-03-03  6.8.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-7, SVN revision 11249.\n\n2013-03-02  6.8.3-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Do not replace gAMA found in input with 1/2.2\n  * Avoid a libpng16 warning about storing unknown chunks.\n\n2013-03-01  6.8.3-7 Cristy  <quetzlzacatenango@image...>\n  * Improve performance when rendering a caption.\n  * The compare 'map' image should not be transparent.\n  * Use only major version for decorating include path.\n\n2013-02-28  6.8.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-6, SVN revision 11210.\n\n2013-02-25  6.8.3-6 Cristy  <quetzlzacatenango@image...>\n  * Support built-in 1x1 and 2x1 threshold maps (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22861).\n  * Check for webp version (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22867).\n\n2013-02-25  6.8.3-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Relocated png_set_bKGD(), etc., after png_set_IHDR() because they\n    might depend on members of info_ptr that are set by png_set_IHDR().\n\n2013-02-25  6.8.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-5, SVN revision 11170.\n\n2013-02-23  6.8.3-5 Cristy  <quetzlzacatenango@image...>\n  * Read the WebP extended file format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n  * Add arch annotation to include path to distinquish ImageMagick versions\n    6 & 7.\n\n2013-02-22  6.8.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-4, SVN revision 11127.\n\n2013-02-22  6.8.3-4 Cristy  <quetzlzacatenango@image...>\n  * Reduce default memory resource limit under Windows.\n\n2013-02-19  6.8.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-3, SVN revision 11105.\n\n2013-02-19  6.8.3-3 Cristy  <quetzlzacatenango@image...>\n  * Set WEBP lossless / lossy property properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n\n2013-02-18  6.8.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-2, SVN revision 11087.\n\n2013-02-17  6.8.3-2 Cristy  <quetzlzacatenango@image...>\n  * Semaphore is now unlocked when an X11 annotation exception is thrown.\n  * WEBP coder enhancement and memory leak patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22809).\n\n2013-02-16  6.8.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-1, SVN revision 11060.\n\n2013-02-16  6.8.3-1 Cristy  <quetzlzacatenango@image...>\n  * Disable FORTIFY_SOURCE to fix a bug in LVVM / OpenMP support.\n\n2013-02-15  6.8.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.3-0, SVN revision 11045.\n\n2013-02-14  6.8.3-0 Cristy  <quetzlzacatenango@image...>\n  * Webp requires alpha, not opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22793).\n\n2013-02-12  6.8.3-0 Bastien Roucaries  <roucaries.basti...>\n  * Allow PerlMagick to be multi-quantum (e.g. Image::Magick::Q16).\n\n2013-02-11  6.8.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-10, SVN revision 11004.\n\n2013-02-11  6.8.2-10 Cristy  <quetzlzacatenango@image...>\n  * The XPM regression tests passes now.\n\n2013-02-09  6.8.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-9, SVN revision 10995.\n\n2013-02-09  6.8.2-9 Bastien Roucaries  <roucaries.basti...>\n  * Export versioning to automake in order to use it for library prefix.\n  * So bump was incomplete due to no changing map file.\n  * Change abi name by adding major version to lib name (will simplify\n    next imagemagick major version release work) and reset release version\n    to 1 (due to changing abi name).\n\n2013-02-09  6.8.2-9 Cristy  <quetzlzacatenango@image...>\n  * The DOT coders now compiles with GraphViz 2.30 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22767).\n\n2013-02-09  6.8.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-8, SVN revision 10986.\n\n2013-02-09  6.8.2-8 Cristy  <quetzlzacatenango@image...>\n  * MagickStatisticImage() method signature was corrected, SO bump required.\n\n2013-02-08  6.8.2-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-7, SVN revision 10965.\n\n2013-02-08  6.8.2-7 Cristy  <quetzlzacatenango@image...>\n  * Ensure MagickCore compiles with a C++ compiler.\n\n2013-02-07  6.8.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-6, SVN revision 10961.\n\n2013-02-07  6.8.2-6 Cristy  <quetzlzacatenango@image...>\n  * Don't destroy an image that's already destroyed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22747).\n  * Montage is now invariant to the font when no label image label exists.\n\n2013-02-06  6.8.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-5, SVN revision 10952.\n\n2013-02-05  6.8.2-5 Cristy  <quetzlzacatenango@image...>\n  * FITS now properly renders the 16 bit signed integer format.\n\n2013-02-04  6.8.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-4, SVN revision 10909.\n\n2013-02-02  6.8.2-4 Cristy  <quetzlzacatenango@image...>\n  * Do not subsample raw CMYK JPEG images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22731).\n\n2013-02-02  6.8.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-3, SVN revision 10894.\n\n2013-02-01  6.8.2-3 Cristy  <quetzlzacatenango@image...>\n  * Respect endian for FITS image format.\n  * Remove artifact when drawing a circle (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22724).\n\n2013-02-01  6.8.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Deleted some code added to the PNG decoder in SVN revision 10825; it\n    was failing to handle transparency in paletted images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22720).\n  * Compare alpha to \"QuantumRange-OpaqueOpacity\" not just \"OpaqueOpacity\"\n    when detecting transparency in the PNG encoder.\n\n2013-02-01  6.8.2-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-2, SVN revision 10883.\n\n2013-01-30  6.8.2-2 Cristy  <quetzlzacatenango@image...>\n  * Properly initialize new throttle resource limit.\n\n2013-01-29  6.8.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-1, SVN revision 10859.\n\n2013-01-28  6.8.2-1 Cristy  <quetzlzacatenango@image...>\n  * Fix 'format not a string literal' problem (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22656).\n\n2013-01-28  6.8.2-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.2-0, SVN revision 10831.\n\n2013-01-21  6.8.2-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Impose a 32k limit on the number of text chunks that will be read.\n  * Implemented PNG00, PNG48 and PNG64 PNG subformats.\n  * Avoid reading back PNG pixel rows while reading a transparent PNG (\n    by using a local \"alpha\" value instead of GetPixelOpacity()).\n\n2013-01-21  6.8.2-0 Cristy  <quetzlzacatenango@image...>\n  * Avoid a rare thread lock for timeout event (e.g. MAGICK_TIME_LIMIT=30).\n  * Support a distributed pixel cache.\n  * Fix numerical stability problem for convolution.\n  * Increase segment stack size for -draw option.\n\n2013-01-18  6.8.1-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-10, SVN revision 10667.\n\n2013-01-08  6.8.1-10 Cristy  <quetzlzacatenango@image...>\n  * Add the same noise value to each channel of a grayscale image (+noise).\n  * Fix recursive descent within XGetWindowImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22550).\n  * Multi-plane MatLab images now render properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22586).\n\n2013-01-06  6.8.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed LBR01 (left-bit-replication) macro in coders/png.c; problem reported\n    by the clang compiler.\n  * Chromaticity values were read in the wrong order in the cHRM chunk\n    when it accompanied the sRGB chunk. Libpng applications built with\n    libpng16 and later will detect this and issue a warning (PNG files\n    previously written with the cHRM chunk are OK).  Removed the\n    troublesome redundant png_set_cHRM() and png_set_sRGB() calls.\n  * Look for libpng17 and libpng16 while configuring PNG support.\n\n2013-01-06  6.8.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-9, SVN revision 10518.\n\n2013-01-06  6.8.1-9 Cristy  <quetzlzacatenango@image...>\n  * Type correction in blob code.\n\n2013-01-02  6.8.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-8, SVN revision 10481.\n\n2013-01-02  6.8.1-8 Cristy  <quetzlzacatenango@image...>\n  * Check for a density of zero when rendering with Pango (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3).\n\n2013-01-01  6.8.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-7, SVN revision 10468.\n\n2013-01-01  6.8.1-7 Cristy  <quetzlzacatenango@image...>\n  * magick-baseconfig.h is architecture dependant;\n    make headers quantum depth neutral (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22509).\n\n2013-01-01  6.8.1-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-6, SVN revision 10461.\n\n2012-12-31  6.8.1-6 Cristy  <quetzlzacatenango@image...>\n  * Repair numerical stability issue with gradients (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22507).\n\n2012-12-30  6.8.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-5, SVN revision 10428.\n\n2012-12-29  6.8.1-5 Cristy  <quetzlzacatenango@image...>\n  * Correction to scientific notation for the -evaluate log option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22496).\n\n2012-12-29  6.8.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-4, SVN revision 10420.\n\n2012-12-28  6.8.1-4 Cristy  <quetzlzacatenango@image...>\n  * Support scientific notation for the -evaluate log option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22496).\n\n2012-12-25  6.8.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-3, SVN revision 10394.\n\n2012-12-25  6.8.1-3 Cristy  <quetzlzacatenango@image...>\n  * Remove pow() dependency from public header.\n\n2012-12-24  6.8.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-2, SVN revision 10385.\n\n2012-12-23  6.8.1-2 Cristy  <quetzlzacatenango@image...>\n  * Magickcore headers recently used pow() in the inline functions inside\n    public headers.  Thus in order to avoid library depends problem, put -lm\n    in library depends (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22483).\n  * Negative exponentiation bug fix (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22484).\n\n2012-12-23  6.8.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-1, SVN revision 10350.\n\n2012-12-23  6.8.1-1 Cristy  <quetzlzacatenango@image...>\n  * More large image performance tuning.\n\n2012-12-20  6.8.1-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.1-0, SVN revision 10327.\n\n2012-12-16  6.8.1-0 Cristy  <quetzlzacatenango@image...>\n  * Return non-zero exit status if two images differ for the compare utility.\n  * Large image performance tuning.\n\n2012-12-15  6.8.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-10, SVN revision 10236.\n\n2012-12-13  6.8.0-10 Cristy  <quetzlzacatenango@image...>\n  * Improve exception reporting when AcquireAuthenticCacheView() fails.\n\n2012-12-13  6.8.0-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Minor tweeks and commenting of Virtual Pixel shortcuts in\n    resampling filters.\n  * Added -define \"shepards:power\" to control the power setting (def=2)\n    for Shepards Method in -distort and  -sparse-color\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=22416\n\n2012-12-13  6.8.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-9, SVN revision 10182.\n\n2012-12-10  6.8.0-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Prepended \"Acquire\" and \"Relinquish\" to debugging log messages in\n    magick/resource.c that only showed the filename.\n  * Added temporary file-count diagnostics to tests/validate.c (this required\n    exporting GetPathTemplate() from magick/resource.c\n  * Eliminate file leak when writing the JNG image format.\n\n2012-12-09  6.8.0-9 Cristy  <quetzlzacatenango@image...>\n  * Further support for associating quantum depth with ABI (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * Check for negative square root when resampling (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22398).\n\n2012-12-07  6.8.0-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-8, SVN revision 10118.\n\n2012-11-28  6.8.0-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed problem with writing grayscale PNG, bug introduced in version\n    6.8.0-0 or 6.8.0-1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22355).\n\n2012-11-28  6.8.0-8 Cristy  <quetzlzacatenango@image...>\n  * Allow temporary-path policy to override temporary path environment\n    variables (e.g. MAGICK_TMPDIR).\n  * Implement symbol versioning (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * ABI is incompatible if quantum depth change. Add abi indication to library\n    name, thanks to Bastien Roucaries (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22352).\n  * The stream utility no longer returns a black image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22046).\n\n2012-11-26  6.8.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-7, SVN revision 10029.\n\n2012-11-25  6.8.0-7 Cristy  <quetzlzacatenango@image...>\n  * Width value is optional for label coder (e.g. -size x40 label:Magick).\n\n2012-11-20  6.8.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-6, SVN revision 10024.\n\n2012-11-21  6.8.0-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed an old bug in chromaticity decoding in coders/bmp.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22294).\n  * Fixed bug in coders/bmp.c that failed to read a paletted image\n    properly (fix by J. Summers, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22316).\n\n2012-11-21  6.8.0-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed bug in coders/bmp.c that failed to read transparency\n    properly (fix by J. Summers, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22312).\n\n2012-11-20  6.8.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-5, SVN revision 10001.\n\n2012-11-15  6.8.0-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added % escape prefixes %[artifact:..] and %[option:..]\n    Including glob search,  EG:  -print \"__Options__\\n%[option:*]\"\n    (backport from IMv7 changes)\n\n2012-11-10  6.8.0-5 Cristy  <quetzlzacatenango@image...>\n  * Revert HCL saturation strategy patch, it improperly clips white to black.\n  * Default to -dEPSCrop for Ghostscript unless eps:use-crop=false (reference\n    https://bugzilla.redhat.com/show_bug.cgi?id=832690#c2).\n  * Add support for -poly, build a polynomial from the image sequence and the\n    corresponding terms (coefficients and degree pairs).\n  * Support the OLE Macintosh image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=22257).\n\n2012-11-08  6.8.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Implemented faster decoding of interlaced PNG images.\n\n2012-11-03  6.8.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Skip PNG palette-building when it is not needed.\n  * Let libpng expand sub-8-bit pixels while reading a PNG file.\n\n2012-11-01  6.8.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-4, SVN revision 9832.\n\n2012-10-31  6.8.0-4 Cristy  <quetzlzacatenango@image...>\n  * PFM images are grayscale, not sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22178).\n  * Keep YCbCR JPEG compressed TIFF images in the YCbCr colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22148).\n\n2012-10-27  6.7.9-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write sRGB chunk if image->gamma isn't close to (1/2.2), i.e.,\n    (0.45 <= gamma <= 0.46) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22139).\n\n2012-10-25  6.8.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-3, SVN revision 9783.\n\n2012-10-21  6.8.0-3 Cristy  <quetzlzacatenango@image...>\n  * TIFF positional information must be positive (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22106).\n  * Set the compression quality for the Webp image format.\n\n2012-10-21  6.8.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-2, SVN revision 9738.\n\n2012-10-20  6.8.0-2 Cristy  <quetzlzacatenango@image...>\n  * Wait for more bytes if the number of returned bytes is less than\n    requested in ReadBlob().\n  * Prefer fullname property for font, if it exists, otherwise family + style.\n\n2012-10-17  6.8.0-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added LanczosRadius filter, that blurs an EWA Lanczos to a integer\n    support size. Equivalent to Lanczos in tensor resize case.\n\n2012-10-16  6.8.0-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-1, SVN revision 9632.\n\n2012-10-12  6.8.0-1 Cristy  <quetzlzacatenango@image...>\n  * Fix color management for the -solarize option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22059).\n  * Some colormap unit tests failed for a quantum depth of 32 (problem\n    report from Glenn Randers-Pehrson).\n\n2012-10-12  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.8.0-0, SVN revision 9594.\n\n2012-10-07  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * Check -fx expression early to prevent fault.\n  * Performance boost for iOS / Android requires a SO major version increment.\n  * Corrupt PNG image could cause a memory leak (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22024).\n\n2012-10-06  6.7.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-10, SVN revision 9514.\n\n2012-10-01  6.7.9-10 Cristy  <quetzlzacatenango@image...>\n  * SVG specs says \"1pt\" equals \"1.25px\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21967).\n  * Support TIFF proprietary tag 34118.\n  * The define option is no longer \"lazy\" interpretation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22007).\n\n2012-10-01  6.7.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-9, SVN revision 9473.\n\n2012-09-27  6.7.9-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in JPEG decoder when reading a corrupt image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21948).\n  * Add exif:thumbnail namespace to distiguish orientation tag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21938).\n  * Respect DPX data offsets (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21960).\n\n2012-09-26  6.7.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-8, SVN revision 9437.\n\n2012-09-24  6.7.9-8 Cristy  <quetzlzacatenango@image...>\n  * Off-by-one error in DrawPolygonPrimitive().\n  * Fix memory leak in WebP decoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21943).\n  * Certain caption phrases were cut off (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21550).\n\n2012-09-22  6.7.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-7, SVN revision 9410.\n\n2012-09-20  6.7.9-7 Cristy  <quetzlzacatenango@image...>\n  * jpeg:sampling-factor might be an image property or an option (reference\nhttp://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21884).\n\n2012-09-15  6.7.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-6, SVN revision 9375.\n\n2012-09-14  6.7.9-6 Cristy  <quetzlzacatenango@image...>\n  * Don't compand the YCC colorspace, its already companded.\n\n2012-09-12  6.7.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-5, SVN revision 9358.\n\n2012-09-12  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Merge static inline Sigmoidal functions from IM7 to IM6.\n\n2012-09-12  6.7.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * All untapered windowing filters Welch and Cosine changed to use a 3 lobe\n    support (like Lanczos). These were not part of the original 'zoom' program.\n\n2012-09-11  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * sigmoidal-contrast: prevent out of range argument.\n\n2012-09-09  6.7.9-5 Cristy  <quetzlzacatenango@image...>\n  * The number of default OpenMP threads is 1 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=23&t=21838).\n  * Only first image of raw grayscale image was set to GRAY (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21428).\n  * Change sigmoidal-contrast define to inline method to conform with ANSI-C\n    requirements.\n\n2012-09-10  6.7.9-5 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * enhance.c improvements:\n  * Add tanh/atanh clone of legacy sigmoidal map (faster & more accurate);\n  * Add final ClampToQuantum in sigmoidal colormap loop;\n  * Remove OpenMP for threads that do not loop over rows;\n  * Immediate no-op exit from sigmoidal-contrast if contrast<MagickEpsilon.\n\n2012-09-08  6.7.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-4, SVN revision 9282.\n\n2012-09-05  6.7.9-4 Cristy  <quetzlzacatenango@image...>\n  * Identify image files with embedded '%d' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21798).\n  * Don't include TIFF header for compress.c source module\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21800).\n\n2012-09-01  6.7.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-3, SVN revision 9202.\n\n2012-08-28  6.7.9-3 Cristy  <quetzlzacatenango@image...>\n  * Support -channel sync option for -equalize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21746).\n  * Don't remove color profile when setting the image colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21747).\n  * Recognize ICO format in URL (e.g. http://www.google.com/favicon.ico).\n  * Don't define HAVE_BOOLEAN for JPEG under MinGW (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=14071).\n\n2012-08-26  6.7.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-2, SVN revision 9120.\n\n2012-08-25  6.7.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug in Q32 builds that erroneously read grayscale 16-bit PNGs\n    as PseudoColor.\n\n2012-08-24  6.7.9-2 Cristy  <quetzlzacatenango@image...>\n  * Support -channel option for -solarize (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21738).\n\n2012-08-23  6.7.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-1, SVN revision 9095.\n\n2012-08-22  6.7.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * The gAMA chunk with gamma==1.0 was ignored while deciding whether to set\n    the image colorspace to GRAY when reading grayscale PNG images.\n\n2012-08-16  6.7.9-1 Cristy  <quetzlzacatenango@image...>\n  * Adjust scaling for Luv colorspace conversion (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21664).\n  * Copy alpha channel of the -median option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21694).\n  * Don't add matte channel for -coalesce if input images don't have one.\n  * Prevent memory leak in ImageToBlob() if image write fails.\n  * In rare cases, label would not auto-size properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21716).\n  * Identify command now reports the image colorspace for non-verbose results.\n  * Account for stroke width when rendering a caption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21721).\n  * Don't colorize alpha channel if it is not active (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21547\n\n2012-08-15  6.7.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.9-0, SVN revision 8970.\n\n2012-08-14  6.7.9-0 Cristy  <quetzlzacatenango@image...>\n  * RGB -> HCL, return correct hue when g < b < r (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21646).\n  * Prefer inkscape for best SVG compliance.\n  * HCL -> RGB conversion enhancement (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21663).\n  * Utilize inkscape if it is in your execution path otherwise RSVG.  If\n    neither is available, revert to the internal SVG renderer.\n  * Initialize image->x_resolution and y_resolution to 0 in image.c\n    (previously they were initialized to DefaultResolution, which is 72.0).\n\n2012-08-12  6.7.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-10, SVN revision 8915.\n\n2012-08-10  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * Respect the image mask for option -selective-blur (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21631).\n  * Fix multiple issues with BMPv5 colorimetry (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21640).\n\n2012-08-10  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-9, SVN revision 8902.\n\n2012-08-07  6.7.8-9 Cristy  <quetzlzacatenango@image...>\n  * Selective blur stopped working after version 6.7.4-10 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21604).\n  * Color reduction now handles transparent pixel properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18463).\n  * ClipImagePath() now returns a valid SVG XML for Windows x64 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21617).\n\n2012-08-05  6.7.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-8, SVN revision 8845.\n\n2012-08-03  6.7.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added 2d named convolution kernel Binomial (for Fred Wienhaus)\n\n2012-08-01  6.7.8-8 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Clean up sigmoidal-contrast.\n\n2012-07-31  6.7.8-8 Cristy  <quetzlzacatenango@image...>\n  * Use ConcatenateString() for multi-block GIF comments.\n  * Caption no longer chops off text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21558).\n  * Support LUV colorspace.\n  * Support HCL colorspace.\n  * Don't transform the composite image colorspace, set it instead.\n  * Interpret -border 5% as 5% of width and 5% of height (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21537).\n  * Don't normalize zero-sum kernels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21584).\n  * Transform grayscale to linear RGB if fill color is non-gray (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21586).\n\n2012-07-30  6.7.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-7, SVN revision 8766.\n\n2012-07-28  6.7.8-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Update certain typecasts for libpng < and >= 1.4.0 to allow memory\n    allocation > 4GB and prevent a DOS.\n\n2012-07-28  6.7.8-7 Cristy  <quetzlzacatenango@image...>\n  * Set DICOM grayscale images to the gray colorspace.\n  * Missing grestore from ps3.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20445).\n  * Use GetMagickResourceLimit(ThreadResource) to set the # threads (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21543).\n\n2012-07-22  6.7.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Only report sRGB, iCCP, gAMA, cHRM chunks in \"identify\" output when\n    these chunks were actually present in input, and not when they were\n    inserted by the PNG decoder.\n\n2012-07-22  6.7.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-6, SVN revision 8720.\n\n2012-07-21  6.7.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Make sure \"intent\" is initialized in the PNG decoder.\n\n2012-07-21  6.7.8-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-5, SVN revision 8717.\n\n2012-07-20  6.7.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Corrected an error in the logic introduced in 6.7.8-3 to always write\n    a color PNG when image->colorspace is sRGB.\n\n2012-07-19  6.7.8-5 Cristy  <quetzlzacatenango@image...>\n  * Inverse YUV colorspace now produces pure red as expected.\n  * Support halted streams:\n    cat image.pnm | convert 'pnm:fd:0[0]' 'pnm:fd:0[0]' x:.\n\n2012-07-18  6.7.8-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-4, SVN revision 8697.\n\n2012-07-17  6.7.8-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Write ICON subimage as PNG32, only when its dimensions are 256x256\n    and image->compression is UndefinedCompression or ZipCompression.\n\n2012-07-16  6.7.8-4 Cristy  <quetzlzacatenango@image...>\n  * sRGB color gradients should be in a non-linear colorspace.\n  * Fix -fx to interpret scientific notation properly.\n  * The draw epsilon was too sensitive.\n\n2012-07-15  6.7.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-3, SVN revision 8675.\n\n2012-07-14  6.7.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Always write a color PNG when image->colorspace is sRGB.\n\n2012-07-08  6.7.8-3 Cristy  <quetzlzacatenango@image...>\n  * Attenuate random noise (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21387).\n  * Return linear grayscale for gradient:white-black.\n  * Promote linear grayscale to linear RGB when compositing.\n  * gradient:white-black is sRGB whereas gradient:'icc-color(rgb,255,255,255)-\n    icc-color(rgb,0,0,0)' is linear RGB whereas gradient:'gray(255)-gray(0)' is\n    linear grayscale.\n  * Revert sigmoidal contrast define (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=22&t=21415).\n\n2012-07-08  6.7.8-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-2, SVN revision 8621.\n\n2012-07-02  6.7.8-2 Cristy  <quetzlzacatenango@image...>\n  * Set the colorspace to linear gray when reading intensity values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21362).\n  * Don't overrun pixel buffer on inverse fourier for odd image widths.\n  * Change LAB encoding to permit blurring, resize, etc.\n    (signed A and B channel values now stored using a 50% bias)\n\n    Additional.. This removes a non-linear discontinuity from stored LAB space\n    values. As a result you can now Blur, Compose, Resize and Distort in LAB\n    colorspace, without problems that previously existed.\n\n2012-07-04  6.7.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-1, SVN revision 8595.\n\n2012-07-02  6.7.8-1 Cristy  <quetzlzacatenango@image...>\n  * A single argument -stereo option now works as documented (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21348).\n  * The -separate option returns channels as linear grayscale.\n  * Remove the sRGB color profile when converting to grayscale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21355).\n\n2012-06-29  6.7.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.8-0, SVN revision 8554.\n\n2012-06-28  6.8.0-0 Cristy  <quetzlzacatenango@image...>\n  * Increase epsilon value, smallest difference between two points (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15870).\n\n2012-06-28  6.7.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-10, SVN revision 8534.\n\n2012-06-26  6.7.7-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't attempt to use Z_RLE compression strategy with old zlib (prior to\n    zlib-1.2.0) that does not support it.\n  * Increase PLTE chunk length to accommodate background color in indexed PNG\n    (reference www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21288).\n  * Added png:PLTE.number_colors to verbose output.\n\n2012-06-25  6.7.7-10 Cristy  <quetzlzacatenango@image...>\n  * Permit linear RGB for PNM and TIFF image formats.\n  * Fix conflicting types for 'GenerateDifferentialNoise' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21286).\n  * Fix cast to pointer from integer of different size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21286).\n  * Fix broken MSL profile tag (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=9).\n  * Better recognition of a CMYK PDF.\n\n2012-06-24  6.7.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-9, SVN revision 8460.\n\n2012-06-23  6.7.7-9 Cristy  <quetzlzacatenango@image...>\n  * Some options were incorrectly promoting linear gray to sRGB.\n\n2012-06-22  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-8, SVN revision 8432.\n\n2012-06-15  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * Support the -features option in convert / mogrify.\n  * Add support for the %[type] property.\n\n2012-06-15  6.7.7-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Geometry arguments accept multiple sign character for offsets\n    EG: \"-10-10\", \"-+10-+10\", or \"+-10+-10\" generate negative offsets\n    while \"+10+10\", \"++10++10\", or \"--10--10\" generate positive offsets,\n    that is, you can not only optionally have a sign in offset variable\n    substitutions, but can negate that substitution if you so desire.\n\n2012-06-12  6.7.7-8 Nicolas Robidoux <nicolas.robidoux@gmail...>\n  * Refactor Catmull-Rom and Spline \"interpolation\" using\n    state-of-the-art unpublished formulas.\n  * Fix incorrect transparency handling of \"interpolative\" cubic\n    B-spline smoothing.\n\n2012-06-09  6.7.7-8 Cristy  <quetzlzacatenango@image...>\n  * Initialize alpha channel when floodfill fill color is not opaque.\n  * XYZ and Lab colorspace conversion tweaked (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21161).\n\n2012-06-08  6.7.7-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-7, SVN revision 8219.\n\n2012-06-06  6.7.7-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Disabled the new libpng-1.5.10 test for invalid palette index when\n    reading a PNG or MNG (for speed), or when writing a MNG (because a\n    zero-length PLTE is valid in a MNG when the global PLTE is used).\n  * Display the PNG colortype as a string in \"identify -verbose\" output.\n\n2012-06-06  6.7.7-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Small refactor of Average Interpolators (save some multiplies)\n  * Added 'Spline' as a filter type as an alias to 'Cubic'. This brings both\n    Catrom and Spline -filter and -interpolate methods in line.  Cubic should\n    only be used when defining a general cubic using expert settings or\n    when listed in \"filter:verbose\" debugging output.\n\n2012-06-05  6.7.7-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-6, SVN revision 8164.\n\n2012-06-05  6.7.7-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Renamed 'Bicubic' interpolation the more precise definition 'Catrom'\n    Old name kept (but hidden) for backward compatibility in bit CLI and\n    API interfaces.\n\n2012-06-01  6.7.7-6 Cristy  <quetzlzacatenango@image...>\n  * The -set colorspace option sets the colorspace, it does not transform it.\n  * Assume grayscale images in the GIF format are linear.\n  * Add Nicolas Robidoux's bicubic interpolation method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21118).\n    This replaces the old 'bicubic' which was very extreme 'cardinal' cubic.\n  * Add DuPont & XFIG copyright to NOTICE.\n  * sRGB.icc has an unfriendly license, remove it.\n  * MinGW does not define KEY_WOW64_32KEY (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=21155).\n  * -evaluate log properly handles negative pixel values.\n  * The display program displays the ImageMagick logo on EOF.\n\n2012-05-31  6.7.7-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-5, SVN revision 8099.\n\n2012-05-31  6.7.7-5 Cristy  <quetzlzacatenango@image...>\n  * Set terminal character for GIF comment.\n\n2012-05-30  6.7.7-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-4, SVN revision 8096.\n\n2012-05-30  6.7.7-4 Cristy  <quetzlzacatenango@image...>\n  * 'convert 1-bit.tif -rotate 90 ...' returns a 1-bit TIFF image as expected.\n\n2012-05-29  6.7.7-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Ignore APNG chunks even when libpng is built with the \"APNG patch\".\n\n2012-05-29  6.7.7-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-3, SVN revision 8089.\n\n2012-05-28  6.7.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix bug with stroke-dasharray (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21090).\n  * In rare cases, caption would not word-wrap properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21106).\n  * Don't set alpha pixels in SetImageVirtualPixelMethod() unless\n    image area is well defined (i.e. != 0) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=21110).\n\n2012-05-27  6.7.7-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Trialing the addition of new interpolation methods\n      Average16         average of 16 pixels around sampling point\n      Average9          9 pixels around nearest pixel\n      Average4          Average of 4 pixels around sampling point\n      Background        Background color (for resampling error checking)\n      Blend             Blend of closest 1, 2 or 4 pixel neighbors\n    NOTE: 'Average' is now equivalent to 'Average4',\n    previous to this version it was equivalent to 'Average16'.\n    The 'Background' method is for showing 'resample errors' be it\n    accidental, or on purpose.  See IM Examples, Cylindrical Filters.\n  * added -interpolative-resize added around this version\n\n2012-05-26  6.7.7-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-2, SVN revision 8066.\n\n2012-05-26  6.7.7-2 Cristy  <quetzlzacatenango@image...>\n  * MagickDelay() is in microseconds, not milliseconds.\n\n2012-05-25  6.7.7-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-1, SVN revision 8059.\n\n2012-05-20  6.7.7-1 Cristy  <quetzlzacatenango@image...>\n  * In rare cases, caption would not word-wrap properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21044).\n  * Set the JPEG image colorspace after the columns / rows are set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21059).\n  * Potential gray images are in either the gray or RGB colorspaces.\n  * Restore MagickSetImageEndian() method (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=20425&p=81525).\n  * Respect resolution when rendering SVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21076).\n\n2012-05-20  6.7.7-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Delegates now 'spawn' faster (replaced 2 second sleep!) (for \"show:\")\n\n2012-05-17  6.7.7-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.7-0, SVN revision 7980.\n\n2012-05-17  6.7.7-0 Cristy  <quetzlzacatenango@image...>\n  * Group4-compressed TIFF / PDF image formats stopped working (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21039).\n  * Auto convert images in the grayscale colorspace to sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=21031).\n\n2012-05-16  6.7.6-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-10, SVN revision 7952.\n\n2012-05-14  6.7.6-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Reset color info in grayscale PNG images to gamma=1.0, undefined\n    rendering_intent and chromaticity only when reading images that don't\n    have a gAMA, sRGB, or cHRM chunk.\n\n2012-05-14  6.7.6-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added a low level \"Cosine\" Windowing Filter -- Request by Nicholas Robidox\n  * Fixed Kaiser Window Filter (was producing all zeros!)\n  * Kaiser Window Function now uses the working value \"filter:kaiser-beta\"\n    (formerly \"filter:alpha\" in previous versions)\n  * Setting the expert option \"filter:kaiser-alpha\" will override this,\n    (after being multiplied by PI).\n  * Added resampling 'weight' sanity check in EWA resampling.\n  * Set default for histogram:unique-colors to be 'true' when undefined\n    Returning it to previous behavior.\n  * Refactor of InterpretImageProperties() (percent escape substitutions)\n  * Add \"gamma\" as a -set and % escape to access image gamma meta-data\n\n2012-05-05  6.7.6-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-9, SVN revision 7812.\n\n2012-05-05  6.7.6-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Allow braced single letter escapes, EG \"%[x]\" as equivalent to \"%x\"\n\n2012-05-04  6.7.6-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write an invalid PNG sRGB chunk when rendering intent is undefined.\n\n2012-05-01  6.7.6-9 Cristy  <quetzlzacatenango@image...>\n  * EXR images are in the linear RGB colorspace with a gamma of 1.0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20895).\n  * Correct annotation offset for right-to-left labels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20884).\n  * The -level 100x0% now produces the equivalent of -negate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20889).\n  * Virtual pixel transparent no longer cause fatal exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=20903).\n  * Promote gray image to sRGB when color is injected.\n\n2012-04-29  6.7.6-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-8, SVN revision 7705.\n\n2012-04-25  6.7.6-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Gaussian Filter Fixed.\n    For some strange reason it was half the width it should be with an\n    effective sigma of 0.25 (not 0.5).  This was the real reason \"variable\n    blur\" was not blurring enough.\n\n2012-04-24  6.7.6-8 Cristy  <quetzlzacatenango@image...>\n  * Colorspace round-trip unit tests now work for Q32.\n\n2012-04-23  6.7.6-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added the RobidouxSharp filter (originally defined Dec 2011)\n  * Fixed Variable Blur - bad blur area calculation\n    Also Gaussian is sampling properly. Substitute the faster Cubic for now.\n  * Convert no longer will do an implicit write to a single space image.\n\n2012-04-21  6.7.6-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-7, SVN revision 7587.\n\n2012-04-21  6.7.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Error when doing an implicit (final) write to a single space filename.\n    This is typically a failed line continuation and is very common.\n    Using an explicit \"-write\" will let you do this.\n\n2012-04-20  6.7.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Allow +-X+-Y as geometry arguments.\n\n2012-04-17  6.7.6-7 Cristy  <quetzlzacatenango@image...>\n  * Distinguish grayscale as sRGB not linear RGB.\n\n2012-04-16  6.7.6-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-6, SVN revision 7536.\n\n2012-04-11  6.7.6-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Always unlock the semaphore before returning from the png codec, either\n    by a \"return\" or png_error(); changed all Magick*Exception() calls\n    after setjmp() to png_error() to ensure proper cleanup (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16883).\n\n2012-04-10  6.7.6-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed log known alpha*kernel normalization bug in morphology convolve.\n\n    Convolve kernel weights have been separated from alpha blend handling.\n    Un-normalized kernels applied to images with active alpha will no longer\n    be auto-normalized due to the effect of alpha blending.  The bug causes\n    images using the default channel setting and having an alpha channel to\n    automatically 'normalize' the results of a convolve during the handling\n    of alpha blending.  This probably would cause severe effects when a\n    zero-summing kernel is being used on an image containing an active (though\n    likely fully-opaque) alpha channel, as division by near zero weights\n    would cause extreme color values in results.  This bug is not normally\n    seen as convolution, which is normally applied only to fully-opaque\n    images. And using a zero-summing kernel on an image with alpha also\n    results in a transparent image!  This is why it was not fixed up until now.\n\n2012-04-08  6.7.6-6 Cristy  <quetzlzacatenango@image...>\n  * Pixel allocation for Pango is stride*rows not stride*columns.\n  * Set the image resolution for Postscript files with an embedded Photoshop\n    profile.\n  * Ensure proper round trips to / from sRGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20751).\n\n2012-04-07  6.7.6-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-5, SVN revision 7483.\n\n2012-04-06  6.7.6-5 Cristy  <quetzlzacatenango@image...>\n  * Avoid fault in SetCacheAlphaChannel() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20681).\n  * Don't assume EXIF orientation tag is 2 bytes.\n\n2012-04-04  6.7.6-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-4, SVN revision 7356.\n\n2012-04-01  6.7.6-4 Cristy  <quetzlzacatenango@image...>\n  * Properly set the XCF alpha channel values (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20642).\n  * Support 'orientation' property (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20650).\n  * The default RGB colorspace transform is now linear (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?p=82839#p82839).\n  * Prevent EXIF integer overflow (CVE-2012-1610).\n\n2012-03-30  6.7.6-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-3, SVN revision 7290.\n\n2012-03-29  6.7.6-3 Cristy  <quetzlzacatenango@image...>\n  * Don't copy invalid memory when reading TIFF EXIF IFD (CERT-FI case 634116,\n    CVE-2012-1798).\n  * Bail if we receive excessive JPEG warnings (CERT-FI case 634117,\n    CVE-2012-0260).\n  * Properly initialize EXIF buffers to prevent JPEG EXIF tag crash (CERT-FI\n    case 634118, CVE-2012-0259).\n\n2012-03-28  6.7.6-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-2, SVN revision 7245.\n\n2012-03-26  6.7.6-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added \"Nearest\" as a synonym for \"Nearest-Neighbor\" interpolate setting\n\n2012-03-21  6.7.6-2 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/png.c: stored \"file_gamma\" for later use by identify.\n\n2012-03-19  6.7.6-2 Cristy  <quetzlzacatenango@image...>\n  * Add full support for Pango markup.\n  * Pango namespace is 'pango:', not 'caption:'.\n  * Correct for EXR images with broken display windows.\n\n2012-03-18  6.7.6-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-1, SVN revision 7145.\n\n2012-03-16  6.7.6-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Reduce the scope of quantum_info in the PNG decoder to avoid a possible\n    memory leak (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20522).\n\n2012-03-13  6.7.6-1 Cristy  <quetzlzacatenango@image...>\n  * Use uint32 pointer for ReadStripMethod in coders/tiff.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20526).\n  * Ghostscript 32/64 bit detection patch (contributed by\n    axeld@pinc-...).\n  * Honor center gravity for caption: with Pango support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20517).\n  * Add support for pango: coder to render captions with Pango.\n\n2012-03-10  6.7.6-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.6-0, SVN revision 7090.\n\n2012-03-06  6.7.6-0 Cristy  <quetzlzacatenango@image...>\n  * Importing from the X11 root windows no longer leaks memory (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20470).\n  * Check to see if delegate file exists before copying.\n\n2012-03-05  6.7.5-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-10, SVN revision 7056.\n\n2012-03-05  6.7.5-10 Cristy  <quetzlzacatenango@image...>\n  * Fix too many arguments to AnnotateImage() (copy/paste bug).\n\n2012-03-02  6.7.5-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-9, SVN revision 7046.\n\n2012-02-29  6.7.5-9 Cristy  <quetzlzacatenango@image...>\n  * Caption no longer includes the prefix \"caption:\" in the rendered text.\n  * Auto scale pointsize for -size 100x100 caption:\n\n2012-03-02  6.7.5-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-8, SVN revision 7027.\n\n2012-03-02  6.7.5-8 Glenn Randers-Pehrson <glennrp@image...>\n  * non-verbose identify now reports DirectClass for transparent PNG images\n    to agree with the report by identify -verbose.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20448 and\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15482).\n\n2012-02-29  6.7.5-8 Cristy  <quetzlzacatenango@image...>\n  * Support infinite caption lengths.\n  * Permit custom JPEG quantization tables (e.g.\n    -define jpeg:q-table=quantization-table.xml).\n  * Missing grestore from ps2.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20445).\n\n2012-02-29  6.7.5-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Image list options (like \"-delete\" and \"-swap\") to \"montage\".\n\n2012-02-25  6.7.5-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-7, SVN revision 6965.\n\n2012-02-23  6.7.5-7 Cristy  <quetzlzacatenango@image...>\n  * Add support for the EMFPlus delegate program.\n\n2012-02-22  6.7.5-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Re-added the Iterative Distance function in morphology (as opposed to the\n    faster more direct 2-pass Distance Function that replaced it) so it can be\n    used in the special situation of Constrained Distance Morphology.\n    http://www.imagemagick.org/discourse-server/viewtopic.php??f=2&t=18032\n\n2012-02-13  6.7.5-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-6, SVN revision 6851.\n\n2012-02-13  6.7.5-6 Cristy  <quetzlzacatenango@image...>\n  * Only set PDF & PS page size when explicitly requested (e.g. -page).\n\n2012-02-12  6.7.5-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-5, SVN revision 6840.\n\n2012-02-12  6.7.5-5 Cristy  <quetzlzacatenango@image...>\n  * Only use the canvas size of the very first frame of a GIF image sequence.\n\n2012-02-11  6.7.5-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-4, SVN revision 6824.\n\n2012-02-08  6.7.5-4 Cristy  <quetzlzacatenango@image...>\n  * Set image alpha channel for -virtual-pixel background and transparent.\n  * Get tiff:fill-order as an image artifact, not an image option.\n\n2012-02-06  6.7.5-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-3, SVN revision 6732.\n\n2012-02-06  6.7.5-3 Cristy  <quetzlzacatenango@image...>\n  * TIFF no longer writes the incorrect fill order.\n\n2012-02-05  6.7.5-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-2, SVN revision 6718.\n\n2012-02-03  6.7.5-2 Cristy  <quetzlzacatenango@image...>\n  * Add SyncImagePixelCache() to ensure cache morphology is consistent.\n  * Patch so two -colorspace options return correct results for round-trip.\n\n2012-02-02  6.7.5-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-1, SVN revision 6684.\n\n2012-01-30  6.7.5-1 Cristy  <quetzlzacatenango@image...>\n  * Support the -alpha remove option (use it to remove transparency from PDF,\n    convert -density 200 apple.pdf -alpha remove x:).\n  * Use union instead of casting gzFile and BZFILE.\n  * Don't treat PSD user channel as alpha (patch from Dominic Benson).\n  * Prevent overflow when casting short int to size_t when parsing a\n    maliciously crafted image with an IFD whose all IOP tags' value offsets\n    point to the beginning of the IFD itself [CVE-2012-0247].\n  * Prevent DES when parsing a maliciously crafted image with an IFD whose\n    all IOP tags' value offsets point to the beginning of the IFD itself\n    [CVE-2012-0248].\n  * Caption with Pango support no longer return a blank canvas.\n  * Correct sRGB colorspace conversion equations.\n\n2012-01-30  6.7.5-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix bug in png coder (spurious warning, reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20257).\n\n2012-01-28  6.7.5-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.5-0, SVN revision 6606.\n\n2012-01-25  6.7.5-0 Cristy  <quetzlzacatenango@image...>\n  * Zlib-1.2.5.2 requires gzFile cast (bug report from John Bowler).\n\n2012-01-25  6.7.4-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-10, SVN revision 6592.\n\n2012-01-25  6.7.4-10 Cristy  <quetzlzacatenango@image...>\n  * Update PerlMagick TIFF regression signatures to match endian order.\n\n2012-01-24  6.7.4-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-9, SVN revision 6589.\n\n2012-01-24  6.7.4-9 Cristy  <quetzlzacatenango@image...>\n  * Fix rare file link in the pixel cache.\n\n2012-01-20  6.7.4-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-8, SVN revision 6551.\n\n2012-01-19  6.7.4-8 Cristy  <quetzlzacatenango@image...>\n  * Although MagickRealType is a double, use double for KernelInfo values in\n    the rare event of problems with C++ name mangling.\n  * Get strokes with patterns (e.g. -stroke xc:red) working again.\n  * Revert KernelInfo values from MagickRealType to double.\n\n2012-01-17  6.7.4-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't write ancillary chunks (except for tRNS and gAMA) in PNG-encoded\n    ICO files.\n\n2012-01-14  6.7.4-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-7, SVN revision 6471.\n\n2012-01-13  6.7.4-7 Cristy  <quetzlzacatenango@image...>\n  * Default to a lighter hinting algorithm for non-monochrome font rendering.\n\n2012-01-12  6.7.4-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-6, SVN revision 6434.\n\n2012-01-12  6.7.4-6 Cristy  <quetzlzacatenango@image...>\n  * Eliminate preprocessor exception for the HDRI build.\n\n2012-01-10  6.7.4-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-5, SVN revision 6422.\n\n2012-01-02  6.7.4-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed -black-threshold and -white-threshold so they work properly with\n    the -channels option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20096).\n\n2012-01-02  6.7.4-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed PNG_USE_CLONE cruft from the PNG encoder (see 2011-11-19 entry)\n  * Promote image depths 9-15 to 16 to avoid crashing in the PNG\n    encoder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20098).\n\n2012-01-01  6.7.4-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-4, SVN revision 6318.\n\n2011-12-30  6.7.4-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix problems with JNG encoder \"quality\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20076).\n\n2011-12-30  6.7.4-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-3, SVN revision 6310.\n\n2011-12-28  6.7.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in JP2 coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20071).\n  * Use maximum bounds when rendering PDF (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20078).\n\n2011-12-25  6.7.4-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-2, SVN revision 6254.\n\n2011-12-24  6.7.4-2 Cristy  <quetzlzacatenango@image...>\n  * Export new Windows binaries.\n\n2011-12-21  6.7.4-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-1, SVN revision 6236.\n\n2011-12-12  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * Sped up -noise option when radius is 0.\n  * Read concatenated arcs correctly in a SVG path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19992).\n  * PDF's now convert properly with -define pdf:use-cropbox=true (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=20033).\n\n2011-12-09  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.4-0, SVN revision 6162.\n\n2010-12-06  6.7.4-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated use of FARDATA in coders/png.c; it won't be supported in\n    libpng-1.6.0 and is not needed now.\n\n2011-11-29  6.7.4-0 Cristy  <quetzlzacatenango@image...>\n  * Add GetQuantumFormat() method to return the quantum format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19961).\n  * Allow unspecified width/height in geometries with the aspect flag (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19964).\n  * MagickGetImageDepth() no longer returns the depth setting but instead\n    computes the depth of the image.\n\n2011-12-02  6.7.4-0 Anthony  <quetzlzacatenango@image...>\n  * Fixed Equal-Area Cropping (size and minimum of delta increments)\n\n2011-12-01  6.7.3-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-10, SVN revision 6106.\n\n2011-11-29  6.7.3-10 Cristy  <quetzlzacatenango@image...>\n  * Delay reading TIFF EXIF properties to prevent premature exit.\n  * Remove duplicates from the configuration file search path under Windows.\n  * Use viewbox offset when setting affine transform translation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19943).\n  * Ensure equally sized tiles for -crop 11x2@ (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18322).\n  * Recognize SI prefixes for jpeg:extent (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19944).\n\n2011-11-27  6.7.3-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-9, SVN revision 6092\n\n2011-11-27  6.7.3-9 Cristy  <quetzlzacatenango@image...>\n  * Upgrade libtool / ltdl to version 2.4.7.\n\n2011-11-25  6.7.3-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-8, SVN revision 6084\n\n2011-11-20  6.7.3-8 Cristy  <quetzlzacatenango@image...>\n  * The exif:ExposureBiasValue property is a signed value.\n  * Prevent buffer underflow for 1-bit PSD images.\n  * Don't include alpha channel when computing range unless image->matte is\n    set.\n  * Set FILETYPE_REDUCEDIMAGE tag on pyramidal TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19892).\n  * Correct image geometry for Postscript for hi-res bounding box (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19807).\n\n2011-11-19  6.7.3-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bug with scaling Q16 background to PNG sub-8-bit bKGD and\n    again disabled PNG_USE_CLONE in coders/png.c.\n\n2011-11-18  6.7.3-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-7, SVN revision 6024\n\n2011-11-18  6.7.3-7 Cristy  <quetzlzacatenango@image...>\n  * Ensure embedded XML resource file is null terminated (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19856).\n\n2011-11-17  6.7.3-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added a -define filter:alpha to contol the 'alpha value' of the\n    Kaiser Windowing filter.  Default value is 6.5\n\n2010-11-15  6.7.3-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Reverted the change of 6.6.6-7 that creates an image clone for use\n    by the PNG encoder.  This was not useful and was somewhat wasteful.\n  * After finding out that writing the bKGD chunk in sub-8-bit PNG fails,\n    enabled PNG_USE_CLONE (to create an image clone again)\n\n2011-11-14  6.7.3-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-6, SVN revision 5972.\n\n2011-11-11  6.7.3-6 Cristy  <quetzlzacatenango@image...>\n  * Prefer the hires bounding box for Postscript rendering (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19807).\n  * Default configure.xml destination folder to /usr/lib/ImageMagick-ver/config.\n\n2011-11-09  6.7.3-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-5, SVN revision 5936\n\n2011-11-07  6.7.3-4 Cristy  <quetzlzacatenango@image...>\n  * Add ShearRotateImage() method.  RotateImage() now uses distorts rather\n    than shears.\n  * MagickCoreGenesis() path must be accessible to use (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19795).\n\n2011-11-06  6.7.3-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-4, SVN revision 5876\n\n2011-11-02  6.7.3-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Ensure that the GIF encoder writes a large enough logical screen (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19734).\n\n2011-11-02  6.7.3-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-3, SVN revision 5825\n\n2011-11-02  6.7.3-3 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in the TIFF coder.\n  * Support -debug accelerate option.\n  * Support -includearch-dir and -sharearch-dir configure option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19720).\n  * Use Pango to improve the caption coder.\n\n2011-11-01  6.7.3-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-2, SVN revision 5718\n\n2011-11-01  6.7.3-2 Cristy  <quetzlzacatenango@image...>\n  * Support Ghostscript under 64-bit Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19659).\n  * Correct affine translation for certain SVG files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19664).\n  * -evaluate-sequence multiply no longer hangs ereference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19549).\n\n2011-10-15  6.7.3-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-1.\n\n2011-10-15  6.7.3-1 Cristy  <quetzlzacatenango@image...>\n  * Read TIFF EXIF profile before reading the image data.\n  * Fix \"test: no: unexpected operator\" in the configure script (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19615).\n  * Off by one error when writing the JPEG XMP profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19616).\n  * Revert GetPathComponent() patch.\n\n2011-10-09  6.7.3-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.3-0.\n\n2011-10-09  6.7.3-0 Cristy  <quetzlzacatenango@image...>\n  * Generate output for caption:\"[!]\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19589.\n\n2011-10-05  6.7.3-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Add \"png:format\" property with possible values png8, png24, and png32,\n    for use when prepending the format type to the filename is not convenient\n    or is not possible, e.g., when embedding the PNG in a PNG-encoded ICO.\n\n2011-10-04  6.7.2-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-10.\n\n2011-10-04  6.7.2-10 Cristy  <quetzlzacatenango@image...>\n  * Remove most of the LLVM compiler warnings.\n  * Fix bug in -evaluate-sequence multiply (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19549).\n  * Upgrade to sRGB V4 ICC profile (reference\n    http://www.color.org/srgbprofiles.xalter).\n  * Distinguish embedded PNG vs BMP within the MicroSoft ICON image format.\n\n2011-09-30  6.7.2-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize the sRGB version 4 ICC profile and write PNG sRGB chunk instead.\n  * Use crc32 instead of \"sRGB\" string to recognize certain sRGB profiles.\n\n2011-09-26  6.7.2-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-9.\n\n2011-09-26  6.7.2-9 Cristy  <quetzlzacatenango@image...>\n  * Fix race condition on image rotate @ 90 degrees.\n\n2011-09-25  6.7.2-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-8.\n\n2011-09-20  6.7.2-8 Cristy  <quetzlzacatenango@image...>\n  * Prevent infinite loop when font is too large for specified width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19502).\n  * Fix LFS cross-compile detection (patch from Mike Frysinger).\n  * Add open_utf8(), fopen_utf8(), access_utf8(), etc. utility methods.\n\n2011-09-15  6.7.2-7 Cristy  <quetzlzacatenango@image...>\n  * Convert empty .htm / .html file no longer removes source file.\n  * -crop 11x2@ now returns 22 images as expected.\n  * Enable reading the EXIF profile in a TIFF image under Windows.\n  * Support drawing text with bitmap font.\n\n2011-09-13  6.7.2-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-6.\n\n2011-09-12  6.7.2-6 Cristy  <quetzlzacatenango@image...>\n  * Expand pixel range for 12 bit DCM images stored in 16-bit words.\n  * Gray images not displayed properly when saved as MIFF with sRGB\n    colorspace.\n  * OpenCL's clCreateContextFromType() no longer returns a system default.\n  * Use -enable-zero-configuration for zero configuration ImageMagick\n    (previously -enable-embeddable).\n\n2011-09-10  6.7.2-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-5.\n\n2011-09-10  6.7.2-5 Cristy  <quetzlzacatenango@image...>\n  * SO bump.\n\n2011-09-09  6.7.2-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-4.\n\n2011-09-05  6.7.2-4 Cristy  <quetzlzacatenango@image...>\n  * Fix cut-n-paste error when reading JPEG profiles.\n\n2011-09-07  6.7.2-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-3.\n\n2011-09-05  6.7.2-3 Cristy  <quetzlzacatenango@image...>\n  * A small memory overwrite when reading TIFF with 1-bit alpha (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19417).\n  * Remove a 2 byte memory leak when checking for environment variables.\n\n2011-09-05  6.7.2-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-2.\n\n2011-09-03  6.7.2-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Recognize the sRGB ICC profile and write the PNG sRGB profile instead\n    of a full iCCP chunk.\n\n2011-08-31  6.7.2-2 Cristy  <quetzlzacatenango@image...>\n  * Write grayscale MIFF as a single gray pixel component, not RGB (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=19403).\n  * Bail gracefully for corrupt JPEG images.\n  * Bail gracefully for negative montage geometries (references\n    https://bugzilla.redhat.com/show_bug.cgi?id=735599).\n  * Account for DCm bits allocated 16 and significant bits 12 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19420).\n  * Fix bug when appending JPEG image profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19429).\n\n2011-08-29  6.7.2-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.2-1.\n\n2011-08-29  6.7.2-1 Cristy  <quetzlzacatenango@image...>\n  * The AllChannels defined changed to 0x7ffffff to avoid integer overflow.\n\n2011-08-26  6.7.2-0 Cristy  <quetzlzacatenango@image...>\n  * HDR format 32-bit_rle_xyze implies the XYZ colorspace.\n\n2011-08-22  6.7.1-10 Cristy  <quetzlzacatenango@image...>\n  * Revert FormatImageAttributeList(), FormatImagePropertyList() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19339).\n\n2011-08-21  6.7.1-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised configure.ac (and configure) to look for -lpng15, -lpng14, -lpng12,\n    and -lpng in that order instead of just -lpng.  This should help find\n    a consistent library and headers when users upgrade their libpng delegate\n    from one version to another, incompatible version.\n\n2011-08-20  6.7.1-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-9.\n\n2011-08-20  6.7.1-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in text annotation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19331).\n\n2011-08-18  6.7.1-9 Glenn Randers-Pehrson <glennrp@image...>\n  * The \"-strip\" option was excluding the PNG tRNS chunk (see 6.6.6-7, below);\n  revised the -strip option so it behaves as\n  if \"-define PNG:include-chunk=none,trns,gama\" had appeared on the commandline.\n  * When writing a PNG8 and more than one transparent color is present,\n  merge them into the image->background_color (Reference\n  http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19329),\n  finishing the implementation started in version 6.6.8-7.\n\n2011-08-18  6.7.1-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-8.\n\n2011-08-18  6.7.1-8 Cristy  <quetzlzacatenango@image...>\n  * Caption now wraps properly for Chinese text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19249).\n\n2011-08-18  6.7.1-8 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder would sometimes fail to respect the -define PNG:color-type\n    option when the incoming image was PseudoClass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=19262).\n\n2011-08-15  6.7.1-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-7.\n\n2011-08-15  6.7.1-7 Cristy  <quetzlzacatenango@image...>\n  * Properly handled continued JPEG embedded profiles.\n\n2011-08-12  6.7.1-6 Cristy  <quetzlzacatenango@image...>\n  * Yet another attempt to read Japanese filenames under Windows.\n\n2011-08-10  6.7.1-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-5.\n\n2011-08-10  6.7.1-5 Cristy  <quetzlzacatenango@image...>\n  * Revert -colorspace sRGB option patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19256).\n  * Revert -type PaletteMatte option patch (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19263\n\n2011-08-09  6.7.1-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-4.\n\n2011-08-09  6.7.1-4 Cristy  <quetzlzacatenango@image...>\n  * Revert MultiByteToWideChar() for Windows patch.\n\n2011-08-05  6.7.1-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-3.\n\n2011-08-05  6.7.1-3 Cristy  <quetzlzacatenango@image...>\n  * Use MultiByteToWideChar() for Windows filenames (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=19242).\n\n2011-08-03  6.7.1-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-2.\n\n2011-08-02  6.7.1-2 Cristy  <quetzlzacatenango@image...>\n  * Windows does not support acosh(), asinh(), or atanh().\n  * Accept filenames with time stamps and a sub-image specification (e.g.\n    test-18:37.jpg[0]).\n\n2011-08-01  6.7.1-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.1-1.\n\n2011-08-01  6.7.1-1 Cristy  <quetzlzacatenango@image...>\n  * Support MSL 'set gravity' element.\n  * Don't report HSB colors as RGB colornames (e.g. hsb(0%,0%,100%)).\n  * Support -fx acosh(), asinh(), and atanh().\n\n2011-07-21  6.7.1-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed a case that prevented rotations of rectangle kernels.\n\n2011-07-01  6.7.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Use zlib default compression strategy instead of Z_RLE and Z_FIXED\n    strategies when linking with zlib versions (prior to 1.2.0 and 1.2.2.2,\n    respectively) that don't support them.\n  * Exit test loop sooner in coders/png.c when a non-gray pixel is found.\n\n2011-06-30  6.7.0-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-10.\n\n2011-06-30  6.7.0-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"-define PNG:compression-level|strategy|filter=value\" options to\n    the PNG encoder.  If these options are used, they take precedence over\n    the -quality option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?&f=1&p=73548).\n\n2011-06-29  6.7.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Handle \"-quality 97\" properly in the png encoder, i.e., use intrapixel\n    filtering when writing a MNG file and no filtering when writing a PNG file.\n  * Added support for Z_RLE strategy in the png compressor, using\n    -quality 98 or 99.\n\n2011-06-28  6.7.0-10 Cristy  <quetzlzacatenango@image...>\n  * Properly allocate points when render text with large font size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18997).\n\n2011-06-25  6.7.0-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-9.\n\n2011-06-18  6.7.0-9 Cristy  <quetzlzacatenango@image...>\n  * Defend against corrupt PSD resource blocks.\n\n2011-06-15  6.7.0-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-8.\n\n2011-06-14  6.7.0-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Initial implementation of Cylinder to/from Plane 3D Distorts\n    Includes derivative (scaled lookup), and anti-aliased horizon (validity)\n    Currently can NOT handle extractions from full 360 cylinder panoramas.\n\n2011-06-13  6.7.0-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-7.\n\n2011-06-09  6.7.0-7 Cristy  <quetzlzacatenango@image...>\n  * Fixed \"conversion from unsigned __int64 to double not implemented\"\n    so IM can compile under VisualStudio 6.\n\n2011-06-08  6.7.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder would sometimes make black pixels transparent when some\n    other gray level was supposed to be the transparent color (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18900).\n    This occurred only with 1, 2, 4-bit grayscale images with Q16 or Q32\n    builds.\n\n2011-06-08  6.7.0-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-6.\n\n2011-06-08  6.7.0-6 Cristy  <quetzlzacatenango@image...>\n  * Fix transient error for composite 'Over' operator.\n\n2011-06-07  6.7.0-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-5.\n\n2011-06-07  6.7.0-5 Cristy  <quetzlzacatenango@image...>\n  * Fix one-off bug in option parser (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=609177).\n  * Transient bug with composite 'Over' in magick/composite-private.h.\n\n2011-06-06  6.7.0-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-4.\n\n2011-06-03  6.7.0-4 Cristy  <quetzlzacatenango@image...>\n  * Support -direction right-to-left for the label: and caption: coders.\n  * Blue / green reversed for JPEG-compressed TIFF images.\n\n2011-06-03  6.7.0-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-3.\n\n2011-06-02  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * Use memmove() instead of memcpy() in StripString().\n\n2011-05-27  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-2.\n\n2011-05-26  6.7.0-2 Cristy  <quetzlzacatenango@image...>\n  * ImageMagick now compiles on Hurd (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=628020).\n  * Use vfprintf rather than fprintf in FormatLocaleFileList().\n\n2011-05-26  6.7.0-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-1.\n\n2011-05-25  6.7.0-1 Cristy  <quetzlzacatenango@image...>\n  * Not all Linux'es define locale_t (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18819).\n\n2011-05-22  6.7.0-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.7.0-0.\n\n2011-05-21  6.7.0-0 Cristy  <quetzlzacatenango@image...>\n  * Avoid fault on corrupt JPEG images.\n  * Avoid fault on certain DJVU images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18807).\n  * Fix -fx to interpret scientific notation properly.\n\n2011-05-20  6.6.9-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-10.\n\n2011-05-20  6.6.9-10 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder now respects the -depth setting, including 1, 2, 4.\n    Previously settings other than 8 and 16 were ignored (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18412).\n\n2011-05-16  6.6.9-10 Cristy  <quetzlzacatenango@image...>\n  * Don't use comma as a separator for stroked text (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18742).\n  * Use C locale when generating or interpreting SVG.\n  * Fix \"unterminated macro\" for Q32 build of coders/png.c.\n\n2011-05-15  6.6.9-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-9.\n\n2011-05-14  6.6.9-9 Cristy  <quetzlzacatenango@image...>\n  * The -scale option now considers the alpha channel when scaling.\n  * Fix transient bug for HSL to RGB and back.\n\n2011-05-12  6.6.9-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed PNG8 reduction to work with an image that reduces to 256 colors\n    plus transparency, by merging the two darkest red colors.\n\n2011-05-04  6.6.9-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-8.\n\n2011-05-02  6.6.9-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed some cut-and-paste errors in new png.c code that caused PNG8\n    reductions to fail.\n\n2011-05-02  6.6.9-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add various Option Flags, and fix option skip counts for plus forms\n    of simple operators where plus form is the same as minus form.\n    For example the incorrect counts produces a weird error, and possible\n    future segmentation fault in a command like  convert rose: +border show:\n\n2011-04-30  6.6.9-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-7.\n\n2011-04-30  6.6.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix FX default for interpolation to Bilinear.\n\n2011-04-27  6.6.9-7 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel interpolation for -draw 'image Over' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18612).\n\n2011-04-26  6.6.9-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Write the proper bKGD chunk value in grayscale PNG images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18624).\n\n2011-04-25  6.6.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Inverse method for Sparse Color Interpolation\n\n2011-04-24  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-6.\n\n2011-04-21  6.6.9-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Make filter:blur define a multiplicative adjustment of filter settings\n    rather than a complete override of those settings.\n  * Add Flags to CommandOptions parse table, removing the need for\n    ImageListOptions parsing table.  This is the start of development to\n    produce a \"convert\" replacement that can read options from both command\n    line and from files or pipelines, in \"Do it Immediately\" handling.\n  * Crop Bug Fix. Prevent infinite loop with \"+repage -crop 0x40\"\n\n2011-04-18  6.6.9-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"date\" to the things that can appear on the -define PNG:exclude-chunk\n    list.  This excludes the IM-generated Date:modify and Date:create\n    properties from PNG output text chunks without excluding the rest of the\n    text chunks.\n  * Added \"-define PNG:preserve-colormap\" option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18564).\n  * Simplified LosslessReduceDepthOK() function in coders/png.c\n\n2011-04-18  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * Add support for writing RGB FITS images as separate planes.\n\n2011-04-16  6.6.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support the HDR 32-bit_rle_xyze format.\n  * Fixed infinite loop for TARGA images with a V2 develop area.\n  * Add signal handler for SIGBUS.\n\n2011-04-15  6.6.9-5 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-5.\n\n2011-04-15  6.6.9-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Added \"#define PNG_PTR_NORETURN\" because this macro does not work\n    on all platforms with libpng15, with failure to load png_longjmp() (ref\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18518).\n\n2011-04-14  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Layers Composition Bug Fix, animations attributes of first image not\n    transferred in a single destination, multi-source image composition.\n\n2011-04-09  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add a special 'Voronoi' Morphology Distance method that will fill in holes\n    using the nearest non-transparent edge pixel. It is experimental, and\n    hidden from normal morphology usage, as it may be interfaced with a\n    future hole-filling color 'Diffusion' method.\n\n2011-04-08  6.6.9-5 Cristy  <quetzlzacatenango@image...>\n  * MIFF keywords sometimes includes spaces.\n\n2011-04-07  6.6.9-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Major BUG FIX - wrong sign breaks most morphology methods in IM v6.6.9-4\n  * Fixed -region handling of transparency. Original images without\n    transparency will use 'Over' while images with transparency will\n    preserve transparency using 'Copy'. Before this only 'Over' was used\n    due to the testing of the wrong image.\n  * Added Compose methods  DarkenIntensity and LightenIntensity\n\n2011-04-06  6.6.9-4 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-4.\n\n2011-04-03  6.6.9-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add Octagon shape and Octagonal distance kernels for Morphology\n  * Fix minor Morphology kernel compose bug (cleanup after Src/Dst swap)\n  * Fix segmentation fault after error in a morphology 'named' kernel\n  * Added a range of kernels used for specialised thinning purposes\n    as defined in a research paper by Dan S. Bloomberg.\n  * Added Dan Bloomberg best thinning skeleton, \"Skeleton:3\"\n  * Removed origin pixel from many Hit-and-Miss kernels allowing kernels\n    to not only be used for thinning, but also thickening.\n  * Renamed \"ThinDiagonals\" kernel to just \"Diagonals\"\n  * Distance uses a fast two pass algorithm, and no longer needs 'iteration'\n\n2011-04-02  6.6.9-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Make the PNG encoder use depth==8 when incoming image->depth < 8\n    (the encoder later reduces the depth if it can), to avoid writing\n    an incorrect image.\n  * Remove any bogus colormap received by the PNG encoder with an image\n    that is not PseudoClass (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18475).\n\n2011-04-02  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * Added -statistic Gradient\n\n2011-04-01  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-3.\n\n2011-04-01  6.6.9-3 Cristy  <quetzlzacatenango@image...>\n  * Set the caption height correctly for missing row geometry (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18447).\n\n2011-03-31  6.6.9-2 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-2.\n\n2011-03-30  6.6.9-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the png decoder to store the PNG IHDR and other known PNG\n    chunk data as properties, for later retrieval and reporting by \"identify\",\n    so users can easily and reliably discover the color-type, bit-depth, etc\n    that were in the input PNG datastream.\n  * The PNG decoder sometimes set images with more than 256 different\n    gray-alpha pixels to storage_class=PseudoClass with an incorrect colormap.\n\n2011-03-30  6.6.9-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Add a \"Resize\" distortion method (distort equivalent of -resize).\n  * Special CLI handling so -distort Resize takes a \"geometry\" argument.\n\n2011-03-29  6.6.9-2 Cristy  <quetzlzacatenango@image...>\n  * Expand PCL compressed pixel buffer to prevent delta compressed overrun.\n\n2011-03-29  6.6.9-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-1.\n\n2011-03-29  6.6.9-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix AdaptiveResizeImage() to use 'Mesh' Interpolation, and fix its\n    coordinate handling, as originally defined.\n\n2011-03-29  6.6.9-1 Cristy  <quetzlzacatenango@image...>\n  * Support -statistic standard-deviation option.\n  * Patch for coders/dcm.c so it compiled with HDRI enabled.\n\n2011-03-28  6.6.9-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.9-0.\n\n2011-03-28  6.6.9-0 Cristy  <quetzlzacatenango@image...>\n  * Optimize bilinear interpolation.\n  * Remove version from etc folder and instead use /etc/ImageMagick.\n\n2011-03-28  6.6.9-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Separated complex cropping function from TransformImage() as a new\n    function CropImageToTiles().  This new function returns either the\n    new cropped image, or a list of tiles, according to geometry, without\n    replacing the source image. The Source image may be part of a larger list\n    of images, without the function 'losing' the other images of the list.\n\n2011-03-27  6.6.8-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-10.\n\n2011-03-27  6.6.8-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Modified image handling in MogrifyImages() and MogrifyImage()\n    which improves overall handling, and allows correct %p, %n and the\n    %[fx:..] 't' and 'n' escape usage to work correctly.\n  * Added -duplicate as a multi-image sequence operator\n\n2011-03-26  6.6.8-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-9.\n\n2011-03-25  6.6.8-9 Cristy  <quetzlzacatenango@image...>\n  * Add InterpolateMagickPixelPacket() method.\n  * Add support for the %[opaque] property.\n\n2011-03-25  6.6.8-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-8.\n\n2011-03-25  6.6.8-8 Cristy  <quetzlzacatenango@image...>\n  * Fix memory access bug in CloneString() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=18382).\n  * Avoid infinite loop when no space is available in MagickFormatCaption().\n\n2011-03-25  6.6.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed the fix for %p and %n escapes, as it was not working right\n\n2011-03-24  6.6.8-7 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-7.\n\n2011-03-24  6.6.8-7 Cristy  <quetzlzacatenango@image...>\n  * Add support for 16-bit DCM short ints (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18371).\n\n2011-03-23 6.6.8-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Another fix for -sparse-color and unused color channels\n  * Finalize the -duplicate option created by Cristy\n  * Fix of segmentation fault for second image in %[fx:..] during info:\n    (Bug in AcquireFxInfo(), as given start image is not first image)\n\n2011-03-21  6.6.8-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the PNG8 encoder to use 50% threshold instead of 0% when\n    reducing transparency to binary.  Collapse all resulting fully transparent\n    colors into one (the background color), to reduce the compressed filesize.\n  * First try the 4-4-4-1 and 3-3-3-1 palettes instead of 3-3-2-1, to preserve\n    colors (especially gray) better, when reducing to PNG8.\n  * Force the PNG encoder to return image->matte==MagickTrue when the\n    format is RGBA or GA or if the tRNS chunk is present, even when the\n    image is fully opaque (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18349).\n\n2011-03-21  6.6.8-6 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-6.\n\n2011-03-21  6.6.8-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Re-enabled reduction of grayscale images (color-type 0) to 2 or 4 bits\n    when appropriate (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18098).\n  * The \"-define PNG:color-type=4\" option did not always force the PNG\n    encoder to write an all-opaque alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18349).\n\n2011-03-14  6.6.8-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed memory leak for PDF and Bitmap PSD RLE support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18317).\n  * Support the -statistic option: replace each pixel with corresponding\n    statistic from the neighborhood.\n  * Add support for -duplicate option.\n  * Move configuration files from /usr/share and /usr/lib to /etc and /var.\n  * Do not cache the results of fx: otherwise -format\n    '%[fx:rand()] %[fx:rand()]' returns the same random numbers.\n\n2011-03-18 6.6.8-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced Minus and Divide Composition methods with Dst and Src\n    equivalents. Now users can decide how these non-commutative mathematical\n    operators are applied to the images being composited.\n  * Fix the percent escape values for  %p, %n  and  %[fx:t], %[fx:n] to\n    respectively mean the current images index and the total number of\n    images within the current image sequence.\n\n2011-03-17 6.6.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Backed out the patch for Variable Blur Composition that was added\n    2011-02-13 v6.6.7-7, until I can re-think the problem.\n    The existing fix was failing to do circular blurs correctly.\n\n2011-03-14  6.6.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed a rounding/truncation error while writing the pHYs chunk in the\n    png encoder.\n  * Don't write text-encoded profile when \"-define PNG:exclude-chunk=text,ztxt\"\n    is present (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17086 and\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18225).\n\n2011-03-14  6.6.8-5 Cristy  <quetzlzacatenango@image...>\n  * Add support for the WebP image format.\n\n2011-03-14  6.6.8-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Ensured that -sparse-color preserves unused channels when\n    channel limited.  Before this unused channels would be reset to black.\n\n2011-03-11  6.6.8-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't try to store a bKGD chunk in a PNG8 when there are already\n    256 colors in the palette and the background colors is not in that\n    palette (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18199);\n  * The \"-define PNG:exclude-chunk=bKGD\" option was also excluding\n    the text chunks. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18253).\n\n2011-03-10  6.6.8-4 Cristy  <quetzlzacatenango@image...>\n  * Fx is a mathematical function.  Do not treat transparency as black.\n  * No image scene suffix for filenames that include a single bracket (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18267).\n\n2011-03-10  6.6.8-3 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-3.\n\n2011-03-10  6.6.8-3 Cristy  <quetzlzacatenango@image...>\n  * Boost causes an ambiguity with ssize_t when building PythonMagick.  Add\n    patch from Arfrever@gento... to fix the build exception.\n\n2011-03-09  6.6.8-2 Cristy  <quetzlzacatenango@image...>\n  * Support the Radiance HDR image format.\n  * Update the offset in the black channel when sharpening to avoid incorrect\n    results.\n  * Do not use GenericReadMethod for TIFF images with 64-bits per sample.\n\n2011-03-06  6.6.8-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Throw error message when the requested color-type or bit-depth\n    cannot be written by the PNG encoder (error was being thrown\n    into the wrong image structure).  (Reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n  * Don't write a PNG text chunk with \"density\" keyword that overrides the\n    PNG pHYs chunk, if the pHYs chunk was not excluded (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18253).\n  * Ignore any PNG text chunk with a \"density\" keyword found by the PNG\n    decoder, if the PNG datastream also contains a pHYs chunk.\n\n2011-03-06  6.6.8-1 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-1.\n\n2011-03-05  6.6.8-1 Cristy  <quetzlzacatenango@image...>\n  * Support PSD files with one layer and one composite layer.\n  * We must cast a Quantum type when bit shifting and HDRI is enabled.\n\n2011-03-05  6.6.8-0 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.8-0.\n\n2011-02-27  6.6.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -mode option.\n\n2011-02-27  6.6.8-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fix scaling of new color-reduction method in the PNG encoder (16-bit\n    images were scaled down to 0 or 1, or nearly black).\n  * Delay opening the PNG output blob until the PNG encoder is ready\n    to write the IHDR chunk, to avoid writing zero-length PNG files when\n    errors are found while building the palette.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n\n2011-02-25  6.6.7-10 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-10.\n\n2011-02-23  6.6.7-10 Cristy  <quetzlzacatenango@image...>\n  * Avoid seg fault in AppendImages() when one image is in the RGB colorspace\n    but the other is in the CMYK colorspace.\n  * Get rid of 'respect_parenthesis defined but not used' warnings (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=18173).\n\n2011-02-22  6.6.7-10 Glenn Randers-Pehrson <glennrp@image...>\n  * Write sub-8-bit grayscale PNG images as palette-indexed PNG images.  This\n    usually makes smaller files anyhow.\n  * Eliminated a number of redundant tests for gray images in the PNG encoder.\n  * Removed now-unused IsMonochromeImage() function from coders/png.c\n  * Scan the colormap instead of all of the pixels, when possible, to\n    determine whether the image received by the PNG encoder is grayscale\n    or black-and-white.\n  * Avoid reading from the colormap in coders/png.c when it is NULL (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18162).\n  * Add a check whether the PNG \"cheap transparency\" criteria are met.  That\n    is, there is a single transparent color, no semitransparent colors, and\n    no opaque color that has the same RGB components as the transparent\n    color.  If those aren't met, a color that is transparent in one pixel\n    and opaque in another would always be rendered as transparent, so we\n    must write a PNG colortype that has an alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18167).\n\n2011-02-22  6.6.7-9 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-9.\n\n2011-02-22  6.6.7-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Disabled reduction of grayscale images (color-type 0) to less than 8 bits\n    when writing because this sometimes produced incorrect output (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18098).\n\n2011-02-21  6.6.7-9 Cristy  <quetzlzacatenango@image...>\n  * Check image has properties before accessing the splay tree (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18136).\n\n2011-02-15  6.6.7-8 Cristy  <quetzlzacatenango@image...>\n  * New version 6.6.7-8.\n\n2011-02-14  6.6.7-8 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG encoder should ignore bogus q->opacity values when image->matte\n    is MagickFalse (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18067).\n\n2011-02-14  6.6.7-8 Cristy  <quetzlzacatenango@image...>\n  * Use implicit image format when explicit format is bogus (e.g.\n    02.13.11-18:43:58.png now writes as PNG).\n  * Fix problem with 4GB file seeks on a 32-bit OS.\n\n2011-02-13  6.6.7-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed Variable blur to handle small (< 1.0 sigma) blurs generated\n    by the blur map being used, rather than just 'cutoff' suddenly.\n\n2011-02-08  6.6.7-7 Cristy  <quetzlzacatenango@image...>\n  * Support 16-bit per pixel YUV image files.\n  * Fix off-by-one error in PosterizeImage().\n  * Posterize now distributes color uniformly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17623).\n  * Add -smush option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17953).\n  * Repair memory leak in the display program.\n\n2011-02-07  6.6.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix bug in carg() define when HAVE_COMPLEX is not defined (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=18030).\n\n2011-02-06  6.6.7-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Default sigma for Gauusian resize filter is now 1/2 for both\n    orthogonal resize and cylindrical EWA distortions.\n\n2011-02-02  6.6.7-5 Cristy  <quetzlzacatenango@image...>\n  * Check if the font is null in RenderFreetype() to prevent fault (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17890).\n  * Eliminate fault when reading WMF image files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=17971).\n  * Support multi-page transparent Postscript and PDF image files.\n  * The compare fuzz metric now returns the same correct value for\n    'xc:white xc:blue -alpha off' and 'xc:white xc:blue -alpha on'.\n\n2011-01-29  6.6.7-4 Paul Heckbert  <ph@cs.cm...>\n  * Move coders/tiff.c conditional compile to define TIFF exception /\n    semaphore / key when TIFF delegate is disabled.\n\n2011-01-29  6.6.7-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Renamed variables, macros, and functions defined/declared in coders/png.c\n    that were in the libpng namespace (beginning with \"png_\" or \"PNG_\").\n\n2011-01-25  6.6.7-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Removed a call to GetNumberColors() from the PNG encoder that was\n    only there for debugging purposes and was consuming a huge amount\n    of CPU time. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=17799).\n  * Sometimes black was still written as transparent, when the PNG\n    encoder received an image with image->matte==true but no transparent\n    pixels were present. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17913);\n\n2011-01-24  6.6.7-3 Cristy  <quetzlzacatenango@image...>\n  * Remove memory leak from ThrowFileException() macro (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17908).\n  * Multiple blue error count by 'count' in ClassifyImageColors()\n  * Add support for the AAI image format.\n\n2011-01-22  6.6.7-2 Cristy  <quetzlzacatenango@image...>\n  * Accept quoted file paths in indirect file references (e.g. @myFiles.txt).\n\n2011-01-19  6.6.7-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the PNG encoder's \"transparent_color\" from a UShortPixelPacket\n    to LongPixelPacket and made the default (65537,65537,65537), which\n    can never occur in the PNG image data.  Previously the default was\n    (0,0,0) and black pixels would be rendered as as transparent when\n    no tRNS chunk was present in the input, which has caused problems\n    with some test cases since version 6.6.6-10.\n  * Improved the PNG_BUILD_PALETTE section to count opaque, transparent,\n    and semitransparent pixels separately.  Previously it wasn't always\n    possible to determine if there was a single fully-transparent color,\n    to decide whether to write an RGBA or Gray-Alpha image or an RGB or\n    Gray image with a tRNS chunk.\n\n2011-01-15  6.6.7-1 Cristy  <quetzlzacatenango@image...>\n  * Do not reset image next / previous when detach argument is false for\n    CloneImage().\n  * Inline cropping no longer fails for inline raw images (e.g.\n    -size 640x480 -depth 8 'gray:logo[100x100+200+200]').\n\n2011-01-14  6.6.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't let the PNG encoder try to sort the colormap when there are more\n    than 256 colors in the image. (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17834).\n\n2011-01-10  6.6.7-1 Cristy  <quetzlzacatenango@image...>\n  * Accept escaped % in output filename (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17810).\n\n2011-01-08  6.6.7-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Quieted some inconsequential warnings in the PNG codec due to a\n    change in the type of the PNG iCCP profile from png_charp to png_bytep\n    in libpng-1.5.0.\n\n2011-01-03  6.6.7-0 Cristy  <quetzlzacatenango@image...>\n  * Handle negative heights for ICO images.\n\n2011-01-02  6.6.7-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Recent changes sometimes caused the PNG encoder to select colortype=2\n    (Truecolor) instead of 0 (Grayscale) for grayscale images.  This made\n    the filesize larger than necessary and caused some of the PerlMagick\n    tests to fail.\n\n2011-01-01  6.6.6-10 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG decoder now checks whether the image actually has any transparency\n    when the input file contains an alpha channel or a tRNS chunk.  (Reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17748)\n\n2010-12-26  6.6.6-8 Cristy  <quetzlzacatenango@image...>\n  * -posterize fails with more than 40 levels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17741).\n  * Add support for the MacPaint image format.\n  * Eliminate spurious 'invalid colormap index' exception for 16-bit SGI images\n    (bug report by steven.sittser@fligh...).\n  * Fix user data length for the CIN image format.\n\n2010-12-21  6.6.6-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Use a clone instead of the main image in coders/png.c, so the image\n    can still be used later on without being affected by changes made by\n    the PNG encoder.\n  * Added PNG:exclude-chunk and PNG:include-chunk defines.\n  * Revised the -strip option so it behaves as though\n    \"-define PNG:include-chunk=none,gama\" had appeared on the commandline.\n  * Avoid writing PNG ancillary chunks in the PNG/MNG/JNG encoder while\n    generating the alpha channel for a JNG image.\n\n2010-12-21  6.6.6-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Removed the forced interpolation setting in AcquireResampleFilterThreadSet\n    It prevented user defined interpolation settings for -clut, and possibly\n    other usage.\n\n2010-12-17  6.6.6-6 Chris Madison  <madisonblu@gmail...>\n  * Add LZMA compression support to ImageMagick.\n  * Eliminate seg-fault in MvgPrintf().\n\n2010-12-17  6.6.6-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated a redundant quantization step in the PNG encoder.\n  * Untangled a confusing but apparently harmless improper loop nesting\n    in the PNG encoder.\n  * Eliminated redundant \"IsGray()\" tests from the PNG encoder.\n\n2010-12-14  6.6.6-6 Cristy  <quetzlzacatenango@image...>\n  * -format \"%[fx:u.p{5,5}]\" no longer reports parse exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17678).\n\n2010-12-10  6.6.6-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Make the PNG encoder always rebuild the palette, to avoid losing\n    transparency when it is out of sync with the pixel data (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17655).\n  * Eliminated CompressColormapTransFirst() since the palette is already\n    compressed and sorted by opacity now when it's recreated.\n\n2010-12-10  6.6.6-5 Cristy  <quetzlzacatenango@image...>\n  * Account for virtual canvas for the -flip / -flop options (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17626).\n  * Also for -transpose and transverse options\n  * Support -metric fuzz option.\n\n2010-12-09  6.6.6-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replace IsMagickColorSimilar() which provides the Fuzz Factor threshold\n    function.  Note function does not calculate 'distance' in total but\n    short-circuits when threshold is reached for faster processing.\n  * Ordered Dithered handling of Alpha channel was incorrect - fixing\n    Bug was introduced v6.6.5-6\n\n2010-12-03  6.6.6-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed two more cases where the PNG encoder lost transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17516).\n\n2010-12-01  6.6.6-2 Cristy  <quetzlzacatenango@image...>\n  * Affine multiplication reversed when translating (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17570).\n\n2010-11-26  6.6.6-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised the \"c7x7b\" and \"c7x7w\" ordered-dither maps to be complementary\n    to each other.\n\n2010-11-27  6.6.6-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for -evaluate-sequence median.\n\n2010-11-26  6.6.6-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed two more cases where the PNG encoder lost transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17516).\n\n2010-11-23  6.6.6-0 Cristy  <quetzlzacatenango@image...>\n  * The policy.xml sets not-to-exceed resource values (e.g. policy memory limit\n    1GB, -limit 2GB exceeds policy maximum so memory limit is 1GB).\n  * Support NCC (normalized cross correlation) compare metric.\n\n2010-11-21  6.6.5-10 Cristy  <quetzlzacatenango@image...>\n  * Fix PNG coder compile error when HDRI is enabled.\n\n2010-11-17  6.6.5-9 Glenn Randers-Pehrson <glennrp@image...>\n  * Many of the problems with the PNG encoder have been fixed (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16490).\n  * The \"-type Optimize\" option is now deprecated.  If present, it is treated\n    by the PNG encoder the same as if the type were undefined.  Optimization\n    is now always performed.  No other formats used the \"type Optimize\" option.\n  * Merged redundant code into LosslessReduceDepth() function in the PNG codec.\n\n2010-11-14  6.6.5-9 Cristy  <quetzlzacatenango@image...>\n  * The splice option no longer throws spurious \"pixels are not authentic\"\n    exceptions.\n  * Thread the -adaptive-resize option.\n  * Set XBM coder height to height not width.\n\n2010-11-14  6.6.5-9 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Lanczos2Sharp blur tweaked. New blur = 0.9549963639785485.\n\n2010-11-13  6.6.5-9 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * LanczosSharp blur tweaked to minimize worst case deviation from \"perfect\n    preservation of images which only vary horizontally (or vertically)\" under\n    no-op. New blur = 0.9812505644269356.\n\n2010-11-08  6.6.5-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Missing logical operator in tiff.c.\n\n2010-11-08  6.6.5-8 Cristy  <quetzlzacatenango@image...>\n  * Only save TIFF image with 1-bit depth if there is no alpha channel.\n  * Abandon PSD composite if layer is available.\n  * %[fx:mean] is the mean of the default channels (all but opacity) (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17432).\n\n2010-10-29  6.6.5-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Added 5x5, 6x6, and 7x7 ordered-dither level maps.\n\n2010-10-30  6.6.5-5 Cristy  <quetzlzacatenango@image...>\n  * Do not read configure files in the current directory for the \"installed\"\n    version of ImageMagick.\n  * Allow numeric characters in the XPM basename (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17385).\n\n2010-10-29  6.6.5-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised PNG palette optimization\n  * Added some debug logging in coders/png.c.\n\n2010-10-28  6.6.5-3 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * More precise blur values for Lanczos2Sharp and LanczosSharp.\n  * Added location of first Mitchell crossing (=8/7) to the filters data\n    structure.\n\n2010-10-28  6.6.5-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Lanczos2D* filters now named Lanczos2*\n  * Reorganization of AcquireFilter() to make it work better\n\n2010-10-25  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Clearer EWA filters (LanczosSharp etc) comments.\n\n2010-10-25  6.6.5-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added LanczosSharp  (3-lobe Lanczos with sharpening)\n  * Filter sharpening factors are also always applied regardless of usage.\n\n2010-10-24  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * CubicBC filter formulas simplified by constant folding. In\n    particular, P1 coefficient (always zero) removed from coeff.\n\n2010-10-22  6.6.5-1 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Revert the Robidoux filter to a Keys cubic with C=(108 sqrt 2-29)/398\n    (as already specified in the documentation).\n\n2010-10-14  6.6.5-1 Cristy  <quetzlzacatenango@image...>\n  * Ignore PS bounding box offsets if -page is set.\n  * Use #pragma omp master for dumping single threaded debugging information\n    (single caused a fault).\n  * Add support for -evaluate exp.\n\n2010-10-12  6.6.5-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added \"filter:sigma\" expert setting defining the 'sigma' for the Gaussian\n    filter only.  This is similar in action to 'blur' but only for Gaussians,\n    and does not modify the filters support, allowing you to set a very small\n    sigma, without the function 'missing' all pixels.\n    (This will allow future adjustment of Gaussians for variable blur mapping)\n\n2010-10-10  6.6.5-0 Cristy  <quetzlzacatenango@image...>\n  * Patch for  DrawableRotation() and DrawableTranslation() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17246).\n  * The webp format requires the webpconv delegate program (experimental).\n\n2010-10-05  6.6.5-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced \"Robidoux\" with Cubic 'Keys' filter that is near equivalent to\n    the previous sharped \"Lanczos2D\" filter. (C=0.31089212245300069)\n    This also is very similar to a Mitchell filter but specifically designed\n    for EWA use and is the new default filter for Distorting Images.\n  * Original sharpened Lanczos2D filter now called \"Lanczos2Dsharp\"\n\n2010-10-08  6.6.4-10 Jerry Gay  <jerry.gay@gmail..>\n  * Autodetect file type support in Makefile.PL to prevent test failures\n\n2010-10-05  6.6.4-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added new filter 'Lanczos2D' a 2-lobe Lanczos as defined by\n    Andreas Gustafsson in his thesis  \"Interactive Image Warping\" (page 24)\n         http://www.gson.org/thesis/warping-thesis.pdf\n  * Added filter \"Robidoux\" which is a slightly sharpened version of the\n    \"Lanczos2D\" filter (blur=0.958033808) specifically designed to be less\n    'blurry' for horizontal and vertical lines in no-op distortions.\n\n2010-10-05  6.6.4-10 Cristy  <quetzlzacatenango@image...>\n  * Add support for \"pattern:vertical2\" and \"pattern:horizontal2\".\n  * Add support for \"pattern:vertical3\" and \"pattern:horizontal3\".\n  * Properly handle PSD layers with negative offsets.\n\n2010-10-03  6.6.4-9 Cristy  <quetzlzacatenango@image...>\n  * Fix memory assertion with --enable-embeddable (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17201).\n  * Don't permit access to pixels when pinging an image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17194).\n\n2010-10-02  6.6.4-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added sqrt(2) blurring default for Gaussian Filter if used as\n    a Cylindrical EWA filter.  This resulted removing the last aliasing\n    issue that was present in tests for Gaussian EWA resampling. Of course\n    it is still a very blurry filter for default use in EWA.\n  * Adjusted Variable Mapping Blur Composition so user arguments actual\n    relate properly to the sigma of the blur for a maximum mapping value.\n  * Fix horizon anti-aliasing for output-scaled perspective distortions.\n  * 'Bessel' filter is now officially and more accurately named 'Jinc'\n    however 'Bessel' while not visible as a filter option can still be used\n    as an internal alias for 'Jinc'.\n\n2010-09-28  6.6.4-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Chantal Racette double checked the bounding parallelogram computation\n    in resample.c (and I tightened the comments).\n\n2010-09-28  6.6.4-8 Cristy  <quetzlzacatenango@image...>\n  * Temporary files not always deleted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15960).\n\n2010-09-28  6.6.4-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug fix for -filter point distorts (occasional generating black pixels)\n\n2010-09-27  6.6.4-8 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Simplified the ClampUpAxes code, the use of its outputs, its comments,\n    and credited Craig DeForest for the \"clamp singular values\" idea.\n  * No reason to have \"insane\" precision Sinc in resize.c: Use\n    the 1.2e-12 max. abs. relative error version for Q64 as well as Q32.\n\n2010-09-27  6.6.4-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replace the blurry \"High Quality EWA\" technique with a 'Clamped EWA'\n    for Distort Resampling.  This makes -distort a whole lot nicer\n    and allows for the use of better cylindrical filters.\n\n2010-09-26  6.6.4-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix Point filter for ResizeImage() caused by support limiting the\n    Box weighting function.\n\n2010-09-26  6.6.4-6 Cristy  <quetzlzacatenango@image...>\n  * Don't allow resize filter weights to go to zero (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=17132).\n\n2010-09-24  6.6.4-6 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Now that MagickPIL is a MagickRealType, some casts are unneeded.\n\n2010-09-21  6.6.4-6 Cristy  <quetzlzacatenango@image...>\n  * Do not break words if caption size is absolute (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=17123).\n  * Don't define HAVE_THREADS for --without-threads configure script option.\n\n2010-09-20  6.6.4-5 Nicolas Robidoux <nicolas.robidoux@gmai...>\n  * Modified \"magick/resize.c\" so that MagickPIL is a MagickRealType number.\n    Some computations were needlessly done in long double precision because\n    PIL forced an automatic upcast wherever it appeared. Changed its name to\n    MagickREALTYPEPI. <- This was later reverted back to MagickPIL.\n  * Modified \"magick/resize.c\" so that Bohman uses one trig call + one sqrt\n    call instead of two trig calls.\n\n2010-09-20  6.6.4-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * modified \"magick/resample.c\" to allow use of either EWA or HQEWA (default)\n  * Removed LanczosFast from supported filters (SincFast*SincFast is faster)\n\n2010-09-19  6.6.4-5 Cristy  <quetzlzacatenango@image...>\n  * If IPTC profile is not embedded in an 8bim resource, declare it IPTC\n    rather than 8BIM.\n  * Support %[version] and %[copyright].\n  * Improve performance of the pixel cache.\n\n2010-09-18  6.6.4-4 Cristy  <quetzlzacatenango@image...>\n  * Automatically set the quantum depth to 16 for HDRI.\n\n2010-09-16  6.6.4-2 Cristy  <quetzlzacatenango@image...>\n  * IPTC profile not always wrapped properly inside an 8BIM profile.\n  * TIFF tile geometry must be divisible by 16.\n\n2010-09-15  6.6.4-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename of SincPolynomial to SincFast for easier user understanding\n  * Ditto for LanczosChebyshev to LanzcosFast\n\n2010-09-14  6.6.4-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Switch default resize filters to using the faster SincPolynomial\n    filter by default internally.  However 'Sinc' will still use the\n    Trigonometric function, and can be used to assign the trig version\n    of Sinc() to filters using the filter expert options.\n  * The default filter for 'distort' was found to be a very blurry inaccurate\n    filter function.  It was removed and replaced with a correct Gaussian\n    filter (as used by resize)\n  * Added a switch so that \"-interpolate filter\" will force the use of\n    a cylindrical filter for ALL pixels in distorted images.  That is you can\n    use that switch to use a cylindrical filter even for images that are\n    being enlarged by the distortion.  However EWA is still currently using\n    a fixed 2.0 sampling radius.  This switch complements the use of \"-filter\n    point\" which turns off EWA filters in favor of interpolation for all\n    pixels in a distorted image.  BOTH switches should not be used together.\n  * A bug in the support radius of the EWA resampling function was found,\n    now that correctly defined resize filters are being used. Suddenly Normal\n    Gaussian distortions are not so blurry, and tests with distortions of\n    the 'Rings' image show extremely good and clear results, with only minimal\n    blurring.  The filter 'blur' expert option can be used to adjust this\n    further.\n\n    The above represents a major improvement forward in the quality of the\n    image distortion operator. But near-unity distortions (no scaling) are\n    still overly blurry.\n\n2010-09-13  6.6.4-2 Cristy  <quetzlzacatenango@image...>\n  * Don't negate the geometry offset for the -extent option.\n\n2010-09-09  6.6.4-1 Cristy  <quetzlzacatenango@image...>\n  * The RGBO format is now listed as a supported format.\n\n2010-09-07  6.6.4-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added the Nicolas Robidoux and Chantal Racette  Lanczos resize filter\n    function as \"LanczosChebyshev\" as faster alternative to Lanczos.\n  * Re-code Nicolas Robidoux and Chantal Racette Polynomial Approximation of\n    the Sinc Trigonometric resize filter, as a proper filter to allow\n    direct comparison and speed testing of the filter.\n  * Expanded the \"-set option:filter:verbose 1\" output, so as to also include\n    the actual functions and other values that were used to create the filter.\n\n2010-09-02  6.6.4-0 el_supremo  <digipete@shaw...>\n  * Repair a few incorrect LocaleNCompare() calls (ttf.c, ps.c).\n\n2010-08-31  6.6.4-0 Cristy  <quetzlzacatenango@image...>\n  * Path no longer closed if join style is round (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16943).\n  * Add case for BGRQuantum to GetQuantumExtent().\n  * Support no compression on PCX write.\n\n2010-08-23  6.6.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed bug in the raw BGRA coders (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16880).\n  * Fix off-by-one error in the PSD coders.\n  * Nicolas Robidoux with the assistance of Chantal Racette contribute an\n    approximation of the sinc function over the interval [-3,3].\n  * Eliminate a small memory leak in LevelizeImageChannel() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16951).\n  * Recognize -fx logtwo (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16958).\n\n2010-08-15  6.6.3-7 Cristy  <quetzlzacatenango@image...>\n  * Throw exception if image size differs for the compare program but the\n    -subimage-search option is not specified.\n\n2010-08-13  6.6.3-6 Cristy  <quetzlzacatenango@image...>\n  * The AdobeRgb.tif TIFF image no longer faults under Windows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16838).\n  * Add -subimage-search option to the compare utility.\n\n2010-08-12  6.6.3-5 Cristy  <quetzlzacatenango@image...>\n  * The -fx 2e+6/1e+5 argument no longer returns the wrong results (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16833).\n\n2010-08-10  6.6.3-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Emit a warning if the PNG encoder can't satisfy the color type and\n    bit depth requested with a \"-define\" directive.\n\n2010-08-07  6.6.3-4 Cristy  <quetzlzacatenango@image...>\n  * The orient option sometimes improperly set \"undefined\" (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16795).\n  * Only list orientation options for the -list orientation option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16801).\n  * Return proper standard deviation for combined channels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16786).\n  * Handle transparency properly for the PSD image format.\n\n2010-08-05  6.6.3-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Properly map PNG intent to image->rendering_intent\n\n2010-08-01  6.6.3-3 Cristy  <quetzlzacatenango@image...>\n  * Eliminate bogus \"invalid colormap index\" when pinging ICO images.\n  * Support -set density / units.\n\n2010-07-31  6.6.3-2 Cristy  <quetzlzacatenango@image...>\n  * Only use the first alpha channel in PSD image.\n  * Only use XPM complying colors for XPM images (e.g. green is rgb(0,255,0)).\n\n2010-07-27  6.6.3-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminate useless message about assuming zero delay when writing\n    a single-frame MNG, and changed it from Error to Warning when\n    writing a multiple-frame MNG.\n\n2010-07-25  6.6.3-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't \"ping\" a PNG image if it is embedded in a MNG.  Otherwise the\n    reader tries to read MNG chunks from the interior of the embedded PNG,\n    resulting in an erroneous \"corrupted image\" message.\n\n2010-07-09  6.6.3-1 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak in for corrupt BMP images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16600).\n  * Repair several issues when writing to stdout (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16620).\n  * A GIF image with the .bgr extension is still a GIF (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16662).\n\n2010-07-07  6.6.3-1 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG decoder failed to handle the tRNS chunk properly for grayscale\n    images where the PNG bit_depth was not the same as the quantum depth,\n    and the transparent color was not black.\n\n2010-07-01  6.6.3-0 Chris Madison  <madisonblu@gmail...>\n  * Pinging the DJVU image format no longer faults.\n  * Check for time-limit-exceeded in only one thread.\n  * Reading filenames from a file (e.g. @filenames) no longer includes the\n    utility name (side effect of StringToArgv() method).\n\n2010-06-28  6.6.2-10 Cristy  <quetzlzacatenango@image...>\n  * Support the tiff:fill-order define.\n  * Filters are case sensitive (e.g. reduce-Colors).\n  * Restore mogrify's -path option.\n  * The -list module option lists image coders and image filters.\n\n2010-06-27  6.6.2-9 Cristy  <quetzlzacatenango@image...>\n  * Add the ImageView API.\n  * Fix DJVU coder to read one page (e.g. 'image.djvu[2]').\n  * Support -define png:bit-depth=1 -define png:color-type=3 for PNG format.\n\n2010-06-22  6.6.2-8 Cristy  <quetzlzacatenango@image...>\n  * Skip byte when DDS bitcount is 32 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16487).\n  * Montage now uses final background setting (e.g. montage -background none ...\n    -background lightblue show:).\n  * Do not annotate directory paths in ListFiles().\n  * Reset the image matte for png:color-type=2.\n\n2010-06-17  6.6.2-7 Cristy  <quetzlzacatenango@image...>\n  * Support new label:pointsize property.\n  * Miscellany->Slide Show, in the display program, now cycles through the\n    image sequence.\n  * Recognize certain hex color values (e.g. #b9e1cc00) for the -fx argument.\n  * Reduce memory requirements when dithering on the iPhone.\n  * Command line operators no longer affected by settings that appear after\n    them (e.g. -splice 10x0+0+0 -gravity center).\n  * Compute the proper DPX user data field size.\n\n2010-06-15  6.6.2-6 Cristy  <quetzlzacatenango@image...>\n  * Fix some nits to keep the clang compiler happy.\n\n2010-06-14  6.6.2-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix transprancy handling for Morphology Convolve\n  * Adjustments of Hit And Miss and Edge Detection kernel definitions\n  * Added 'ThinDiagonals' Thinning Kernel + two sub-types\n  * Handling for Convolution of 1-D vertical kernels.\n    However this was removed (using #if-#endif) as I found it slower in tests!\n\n2010-06-12  6.6.2-5 Cristy  <quetzlzacatenango@image...>\n  * mogrify -format properly handles compressed image filename (e.g.\n    -format jpg logo.png.bz2).\n  * Respect +dither option when saving to the GIF image format.\n\n2010-06-08  6.6.2-4 Cristy  <quetzlzacatenango@image...>\n  * End of string sentinel is \\n not \\r.\n\n2010-06-06  6.6.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Don't decode pixels in coders/png.c when image->ping is set.\n\n2010-06-06  6.6.2-3 Cristy  <quetzlzacatenango@image...>\n  * Reset image filename when reading inline images.\n  * Don't clamp floating point values for HDRI-enabled ImageMagick.\n\n2010-05-25  6.6.2-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Replaced '^' morphology kernel rotation with two variants '>' and '<'\n  * 'Skeleton' variant to thin down images as symmetrically as possible.\n  * Spelling correction:  Manhatten -> Manhattan\n\n2010-06-01  6.6.2-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Properly scale color components of the PNG bKGD chunk.\n  * Prevent MNG divide by zero in calculation of frame_timeout.  Set\n    both frame_delay and frame_timeout to infinite when ticks_per_second\n    is zero, as required by the MNG spec.\n\n2010-05-31  6.6.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add x:silent option to prevent beeps when reading the X image format.\n  * Recognize TTF for GetMagicInfo().\n  * Ensure the +set option deletes the image artifact.\n\n2010-05-28  6.6.2-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Prevent coders/png.c from attempting to write an empty tRNS chunk.\n\n2010-05-25  6.6.2-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix for Square Array Rotates (off center origin rotate)\n  * Added HitAndMiss kernel Ridges2 to find 2 pixel thick ridges\n  * Added FreiChen:0,{angle}  FreiChen:{angle} and FreiChen:-1 variations\n    to complete this kernels definition\n\n2010-05-24  6.6.2-1 Cristy  <quetzlzacatenango@image...>\n  * Respect density when rendering SVG images.\n  * Set AVI handler to the MPEG coder.\n  * Compute the proper DPX user data field size.\n  * Do not interpret a format specifier when enclosed in brackets (e.g.\n    rose_tile_%[filename:tile].gif.\n  * Use 64-bit types when compiling with the 64-bit Visual C++ compiler under\n    Windows.\n  * Prevent MNG divide by zero in calculation of frame_delay (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16320).\n\n2010-05-23  6.6.2-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Third Re-write of MorphologyApply() to better handle compound methods.\n  * Implemented  -set option:morphology:compose for merging results of\n    multiple kernels. \"None\" means re-iterate results with next kernel.\n    While \"Undefined\" means to use the internal default for a method.\n    Thinning, Thickening, HitAndMiss, Convolve, Correlate defaults to \"None\"\n    while HitAndMiss defaults to \"Lighten\" (union of all kernel results).\n    Other morphology methods defaults still to be decided.\n  * Added HitAndMiss Kernel: Ridges  (find ridges and pixel width lines)\n  * Rotation Expansion of single kernels '^' and '@' flags in arguments\n    EG: -set option:showkernel 1 -morphology Convolve 'Blur:0x2^'\n  * ExpandKernelInfo() (rotation expand) now groks symmetrical kernels.\n    So the above will only produce a list of 2 kernels, not 4 kernels\n\n2010-05-18  6.6.2-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Separation of internal function MorphologyApply() from\n    MorphologyImageChannel() to calls to convolve without user settings.\n  * Rewrite of MorphologyApply() to output better 'verbose' messages\n  * Better handling of Gaussian tyle filters (bug fixes)\n  * Bug fix and optimization of kernel size calculations in \"gem.c\"\n  * Allow '^' or '@' flags in 'user defined' kernel size arguments to\n    expand kernel into a rotated list.\n    EG: -set option:showkernel 1 -morphology Thinning  '3@: 0,1,0 0,1,0 0,0,0'\n  * Allow a scaled unity kernel to be added to kernel (EdgeDet->Sharpen)\n    EG: -set option:convolve:scale [kernel_scale][^!],[unity_scale][%]\n  * Addition of \"Laplacian of Gaussian\" (LOG), also known as Mexican Hat\n    EG: -morphology convolve LOG:0x1\n  * Added FreiChen, Kirsch  Convolution kernels\n  * Added Discrete 'Laplacian of Gaussian' kernels (Laplacian type 15 and 19)\n  * Added Edges HitAndMiss Kernel\n\n2010-05-17  6.6.2-0 Cristy  <quetzlzacatenango@image...>\n  * PSD images require a proper layer to support an alpha channel.\n  * Enable PFM endian support.\n  * Add context to -border for montage.  Inside the parenthesis it adds a border\n    to the image otherwise it sets the border for the layout manager.\n  * 24-bit BMP images are not colormapped even if header colors != 0.\n  * Set DPX user data like this: -set profile dpx:userdata.txt.\n  * Make sure Lab => RGB => Lab survives the round trip.\n\n2010-05-15  6.6.1-10 Cristy  <quetzlzacatenango@image...>\n  * Use ScaleCharToQuantum() in coders/src.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16229).\n  * Don't clamp HDRI EXR pixels.\n\n2010-05-14  6.6.1-9 Cristy  <quetzlzacatenango@image...>\n  * Increase the estimated # points for the path drawing primitive.\n  * Remove any prior resolution block from PSD before writing the new block.\n\n2010-05-14  6.6.1-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Addition of more Morphological/Convolution Kernels.\n    DOG (Difference of Gaussians) and DOB (Difference of Blurs),\n    EG:    -morphology convolve DOG:0x1,3\n           -morphology convolve DOB:0x1,3,90\n  * Added Prewitt, Roberts, Compass  Convolution Kernels\n  * Ring Symbol Kernel (subtraction of Disk from a Disk)\n\n2010-05-13  6.6.1-9 Cristy  <quetzlzacatenango@image...>\n  * The pixel buffer was underallocated for some image formats when streaming.\n\n2010-05-12  6.6.1-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Implementation of Pattern Matching Morphology methods\n    HitAndMiss, Thicken, Thinning\n  * Reporting of Kernel Strings that fail to parse (though not why)\n  * Parsing of Multiple Kernel Strings, generating a list of kernels\n  * Union of results from Multiple Kernels for HitAndMiss method\n  * Iterated Multiple Kernels for all other morphology methods\n  * Added many new kernels for HitAndMiss and Convolution\n    Sobel, Laplacian, Cross, Peaks, Corners, LineEnds, LineJunctions,\n    ConvexHull (for Thicken), Skeleton (for Thinning)\n\n2010-05-08  6.6.1-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Use proper background.index when writing indexed PNG, if the background\n    color is in the palette.\n\n2010-05-08  6.6.1-7 Cristy  <quetzlzacatenango@image...>\n  * Fix improper 'invalid colormap index' PNG bug.\n  * Fix PerlMagick compile exception.\n\n2010-05-07  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added % and ! modification flags to morphology distance kernel\n    scaling factor, for easier usage.\n  * Bug fix for compose math channel handling and morphology diff usage\n\n2010-05-06  6.6.1-6 Cristy  <quetzlzacatenango@image...>\n  * Do not claim gray colorspace if gray image includes a non-gray pixel.\n  * Initialize BMP alpha channel to opaque for RGB images.\n  * Fixed under allocation for round rectangles.\n  * The -list option returns a 0 status as expected.\n\n2010-05-06  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Made use of new no-'sync' channel enabled mathematical compose methods\n    for the difference morphology methods.  These should now work correctly\n    for specific channels, and more importantly for alpha shaped morphology.\n\n2010-05-05  6.6.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed bugs with losing the opacity channel while writing some PNG images.\n    (bug reported by Anthony T.)\n\n2010-05-05  6.6.1-6 Glenn Randers-Pehrson <glennrp@image...>\n  * Simplified and corrected rowbytes calculation in coders/png.c and\n    added more logging.\n\n2010-05-05  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename of \"Add\" and \"Subtract\" compositions to \"ModulusAdd\" and\n    \"ModulusSubtract\" for more clarity of there functions. Old names\n    will continue to work as expected.\n  * Fix \"Minus\", \"ModulusAdd\", and \"ModulusSubtract\" to follow\n    normal SVG 'Over' blending specifications, (see next for override)\n    Note that this does NOT include the \"Plus\" composition method which has\n    SVG definition for it to use a 'Plus' blending rather than 'Over' blending.\n  * By default mathematical compositions work as per SVG definition. That is\n    the results are synchronized with 'Over' alpha-blending (except \"Plus\"\n    which uses 'plus' alpha-blending).\n  * By removing the default 'sync' flag from the -channel setting however\n    Break this inter-channel synchronization and do the mathematical operations\n    only on the individual channels as specified by the -channel setting.\n    That is do 'channel' math rather than 'SVG' composition.\n  * With this change you can then use mathematical composition methods on\n    individual channels or even with the alpha channel of images.\n\n2010-04-28  6.6.1-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Special case handling in Barrel distortion (pixel at image center)\n  * Calculation of image for Barrel distortion (pixel vs image coords)\n  * Argument input (handling optional 'd' argument) for Barrel distortion\n\n2010-04-24  6.6.1-6 Cristy  <quetzlzacatenango@image...>\n  * Do not declare timestruct under MinGW.\n  * Respect -compose option for the montage utility (bug report by Anthony).\n  * A 256 column gradient produces a 256 color GIF image (bug report by\n    Anthony).\n  * Register / unregister CALS format in static.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=16103).\n  * Add SetImageColor() method.\n\n2010-04-17  6.6.1-5 Cristy  <quetzlzacatenango@image...>\n  * Only write one ICC profile to PSD image.\n  * Sync image colormap for PNG tRNS chunks.\n  * The -direction option now works with the -annotate and -draw options.\n  * For the histogram: format, if you have no need for the unique color list,\n    use <kbd>-define histogram:unique-colors=false</kbd> to forego this\n    expensive operation.\n  * Match on literal after backslash in glob expression (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16068).\n  * Enable JPEG-compression for grayscale TIFF images (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16064).\n  * Don't write empty tile if tile geometry matches the image width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16064).\n  * Support -regard-warnings in the mogrify utility.\n  * Output the correct units for the identify utility (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16075).\n\n2010-04-15  6.6.1-4 Cristy  <quetzlzacatenango@image...>\n  * Do not set the resample virtual pixel method when undefined.\n  * Support writing grayscale PSD images.\n  * Revert Lab-to-XYZ colorspace transform patch.\n  * Clamp HDRI values for LevelImageChannel() method.\n\n2010-04-12  6.6.1-3 Cristy  <quetzlzacatenango@image...>\n  * For HSL to RGB, if color temperature is less than 0, set RGB to lightness.\n  * Do not flip BMP image with negative height when pinging.\n\n2010-04-08  6.6.1-2 Cristy  <quetzlzacatenango@image...>\n  * Improve support for device link profiles.\n\n2010-04-06  6.6.1-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug in -auto-level for special case when only one value is present\n    in some channel of the image. In this case no 'stretch is performed, just\n    as -normalize does.\n\n2010-04-05  6.6.1-1 Cristy  <quetzlzacatenango@image...>\n  * WMF support under Windows does not produce the same results as under\n    Linux.\n\n2010-03-31  6.6.1-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug in equal-size tile cropping, when image has a page offset.\n\n2010-03-31  6.6.1-0 Cristy  <quetzlzacatenango@image...>\n  * The -recolor 4x4 matrix is now interpreted properly (previously it\n    summed rather than attenuating the alpha channel).\n  * Support writing 1-bit PSD images.\n  * Support LCMS 2.0.\n  * Improved WMF support under Windows.\n\n2010-03-30  6.6.1-0 Glenn Randers-Pehrson <glennrp@image...>\n  * The new coders/png.c was failing to read a 1-bit paletted image properly.\n  * Finished eliminating the deprecated direct references to members of\n    the png_info structure. ImageMagick can now be built with libpng-1.5.\n\n2010-03-21  6.6.0-10 Cristy  <quetzlzacatenango@image...>\n  * Respect the -density option when rendering a Postscript or PDF image.\n  * Distort barrel no longer complains when 3 arguments are given (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15883).\n  * Support -direction left-to-right option for rendering text\n\n2010-03-24  6.6.0-9 Glenn Randers-Pehrson <glennrp@image...>\n  * coders/png.c: Eliminated support of libpng versions older than 1.0.12.\n  * Relocated the new, misplaced png_get_rowbytes() call.\n  * Updated setjmp/longjmp/jmpbuf usage to work with libpng-1.5.\n\n2010-03-21  6.6.0-9 Cristy  <quetzlzacatenango@image...>\n  * Windows does not support complex.h (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=15808).\n  * Add support for monochrome PSD images.\n  * VignetteImage() no longer crashes when x and y arguments are both greater\n    than half the width (x) and height (y) of the image.\n\n2010-03-20  6.6.0-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Eliminated some of the deprecated direct references to members of\n    the png_info structure.  This must be finished before we can build\n    with libpng-1.5.\n\n2010-03-18  6.6.0-8 Cristy  <quetzlzacatenango@image...>\n  * The animate program no longer loops twice when -loop 1 is specified.\n  * The caption format would sometimes hang when the text was not UTF-8.\n  * Don't gamma correct log to linear color conversion unless the -gamma is\n    specified (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=15799).\n\n2010-03-17  6.6.0-7 Cristy  <quetzlzacatenango@image...>\n  * Detect CMYKProcessColor AI tag.\n  * Delete image from command line cache for -write option.\n\n2010-03-13  6.6.0-6 Cristy  <quetzlzacatenango@image...>\n  * Add support for the Adobe Large Document format.\n  * Recognize -remap option for the mogrify utility.\n  * The default Helvetica font is not always available, check for\n    Century Schoolbook too (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15780).\n\n2010-03-11  6.6.0-5 Cristy  <quetzlzacatenango@image...>\n  * Permit user to get virtual pixels with a region width of 0.\n  * Reformulate the jinc() function so that the main peak is of amplitude of 1.\n  * Resampling filter must respect the image virtual pixel method.\n\n2010-03-07  6.6.0-4 Cristy  <quetzlzacatenango@image...>\n  * The -evaluate-sequence option behaves like -evaluate except it operates\n    on a sequence of images.\n\n2010-03-05  6.6.0-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for the -maximum and -minimum options.\n\n2010-02-27  6.6.0-1 Cristy  <quetzlzacatenango@image...>\n  * Check to see if ICON image width /height exceeds that of the image canvas.\n  * Set the DPX descriptor to Luma only if the image type is not TrueColor.\n  * Add support for -fx airy(), j0(), j1(), jinc(), and sinc() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15685).\n    Anthony, review these for correctness.\n  * Don't embed an XMP profile in an EPS image for now.\n\n2010-02-21  6.6.0-0 Cristy  <quetzlzacatenango@image...>\n  * Insufficient image data in EPT is a warning rather than an error.\n  * Respect -type TrueColor when writing gray DPX images.\n  * Fix problem reading 10-bit grayscale DPX images when scanline length is\n    not a multiple of 3.\n  * BMP has an alpha channel, it was treated as an opacity channel.\n\n2010-02-20  6.5.9-10 Cristy  <quetzlzacatenango@image...>\n  * Write 10-bit grayscale DPX images properly.\n\n2010-02-18  6.5.9-8 Cristy  <quetzlzacatenango@image...>\n  * Detect PDF ICCBased colorspace.\n\n2010-02-18  6.5.9-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Finalized -set option:convolve:scale  kernel normalize/scale option\n\n2010-02-16  6.5.9-7 Cristy  <quetzlzacatenango@image...>\n  * TransformImage() resets the image blob when called in the PICT decoder;\n    use SetImageExtent() instead.\n\n2010-02-14  6.5.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support PSD RLE compression.\n\n2010-02-13  6.5.9-5 Cristy  <quetzlzacatenango@image...>\n  * The jpeg:extent define sometimes exceeded the specified limit.\n\n2010-02-09  6.5.9-4 Cristy  <quetzlzacatenango@image...>\n  * Resolve \"too many open files\"  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15546).\n\n2010-02-08  6.5.9-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Correlate method which does a Convolve without reflecting the kernel.\n\n2010-02-07  6.5.9-3 Cristy  <quetzlzacatenango@image...>\n  * Initialize grayscale colormap for PSD images.\n\n2010-02-07  6.5.9-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Final testing and fixing of basic morphology operators\n  * Addition Third-level Subtractive Morphology Methods:\n    EdgeIn, EdgeOut, Edge, TopHat, BottomHat\n  * Ensuring original kernels passed to morphology are cloned before being\n    modified for use by specific methods (EG: convolve scale/normalize)\n\n2010-02-03  6.5.9-2 Cristy  <quetzlzacatenango@image...>\n  * display -immutable to display transparent image without a checkboard.\n\n2010-01-27  6.5.9-1 Glenn Randers-Pehrson <glennrp@image...>\n  * Make -define png:color-type less persnickety about what it will accept.\n\n2010-01-24  6.5.9-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * added use of -precision in 'showkernel' output of -morphology\n  * correct use of a 'reflected kernel' for 'Convolve' 'Dilate' and\n    'Distance' Morphology primitives. This does not have a performance hit,\n    though is only truely applicable when the kernel is asymmetric.  Note that\n    'Erode' does not use a 'reflected' kernel, so that 'Open' and 'Close'\n    operations work properly.  This 'reflected usage is defined by online\n    morphology lecture notes (Google for \"EECE Binary Morphology\")\n  * Added convolve kernel scaling setting \"-set option:convolve:scale N\"\n    If undefined morphology convolve does not do any scaling or normalization\n    of the convolution kernel.  A value of 0.0 causes normalization for both\n    zero and non-zero (added weights) kernel types.\n\n2010-01-15  6.5.9-1 Cristy  <quetzlzacatenango@image...>\n  * Speed up reading the PSD image format.\n  * Add the -precision option.  Use it to set the maximum number of significant\n    digits to be printed.\n  * Add -features option to the identify program to display channel features.\n  * Add -unique option to the identify program to display channel features.\n\n2010-01-01  6.5.9-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for compact floating point (i.e. -depth 16 -define\n    quantum:format=floating-point).\n  * Transparent images no longer flicker on certain system when using the\n    display program.\n  * Permit interactive resizing with the display program.\n  * Support heterogeneous distributed processing, see\n    http://www.imagemagick.org/script/architecture.php#distributed.\n  * Fix semaphore assertion when reading a corrupt image with Magick++.\n  * Add support for -brightness-contrast option.\n\n2010-01-05  6.5.9-0 Stephan Menzel  <stephan.menzel@gmail...>\n  * Add support for the BGRA raw image format.\n\n2010-01-04  6.5.9-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added Kernel Generator to generate kernels from user strings, which\n    allows the generation in many built in kernels for both Convolution\n    and other Morphological methods.  New Kernels currently include..\n      Convolution: Gaussian, Blur, Comet\n      Morphological: Rectangle, Square, Diamond, Disk, Plus\n      Distance: Chebyshev, Manhatten, Knight, Euclidean\n    And both old and new (rectangular) user defined kernel specifications\n    including the use of 'nan' to represent elements which are not part\n    of the kernel definition.  List built-in kernel types use \"-list kernel\"\n  * Added -morphology {method}[:{iteration}] {kernel_string}\n    Initial methods includes no only the basic morphology methods: Dilate,\n    Erode, Open, Close; and a pixel color preserving 'Intensity' version, but\n    also the special methods: Convolve, and Distance.  Of course the\n    appropriate kernel should be provided for each specific method.\n\n2010-01-01  6.5.9-0 Cristy  <quetzlzacatenango@image...>\n  * Add OpenCL-enabled filter (e.g.  convert image.png -process\n    \"convolve '-1, -1, -1, -1, 9, -1, -1, -1, -1'\" image.jpg).\n  * Added StringTo...() processing functions\n\n2009-12-27  6.5.8-9 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added MxN tile cropping with overlapping and space handling.\n    See IM Examples, Cutting and Bordering, Cropping roughly Equal\n\n2009-12-23  6.5.8-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * angle bug fix in variable blur composition with vertical ellipses\n  * Added ability to have variable angles for ellipses in variable blur\n    composition.  See IM Examples, Composition, Variable Blur for details\n\n2009-12-20  6.5.8-8 Cristy  <quetzlzacatenango@image...>\n  * JPEG does not grok the HSL colorspace.\n\n2009-12-18  6.5.8-7 Cristy  <quetzlzacatenango@image...>\n  * Off by 1 error when allocating the dash-pattern array in PerlMagick.\n  * The -gaussian-blur over blurred the opacity channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15218).\n\n2009-12-13  6.5.8-6 Cristy  <quetzlzacatenango@image...>\n  * Declare InverseFourierTransformImage in Magick++/Include.h.\n\n2009-12-09  6.5.8-5 Glenn Randers-Pehrson <glennrp@image...>\n  * The PNG8 encoder would fail to write a 1-color image, due to\n    a bogus MagickFail return from CompressColormapTransFirst().\n\n2009-12-05  6.5.8-4 Cristy  <quetzlzacatenango@image...>\n  * SVG images are no longer double sized with the -density option.\n\n2009-12-04  6.5.8-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the one instance of PNG_COLOR_TYPE_RGBA to PNG_COLOR_TYPE_RGB_ALPHA\n    in coders/png.c\n\n2009-12-03  6.5.8-3 Cristy  <quetzlzacatenango@image...>\n  * It's interword-spacing, not interword_spacing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=1515).\n  * All JP2 depths (e.g. 4, 10, 12, 16) are now supported properly.\n\n2009-11-28  6.5.8-2 Glenn Randers-Pehrson <glennrp@image...>\n  * Changed the one remaining ping_info->trans to ping_info->trans_values\n    in coders/png.c\n\n2009-11-26  6.5.8-1 Chris Madison  <madisonblu@gmail...>\n  * Eliminate bogus 'skip to sync byte' exception for PCD image format.\n  * -threshold option: threshold to white if the computed intensity of the\n    color channels exceeds the threshold.\n  * Add -define jpeg:extent option to restrict the maximum JPEG image file size.\n\n2009-11-26  6.5.8-1 Dr. Ingo Bremer <bremer@wias-...>\n  * Escape single quote in when writing the UIL format.\n\n2009-11-25  6.5.8-1 Jee Teck  <jee.teck@cteca...>\n  * The mogrify program +opaque option now recognizes its required argument.\n\n2009-11-19  6.5.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add magick/morphlogy.{c,h} source templates.\n  * Sync image option when reading MPR images.\n  * Optimize ping for SVG images.\n  * SetLogFormat() no longer causes crash (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=15091).\n  * Do not call MagickCoreTerminus() when memory allocation fails inside\n    the locale component.\n\n2009-11-18  6.5.7-9 Cristy  <quetzlzacatenango@image...>\n  * Read / write 32-bit SUN raster images with a odd width.\n  * Cairo format returns pixels with the alpha premultiplied (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15081).\n\n2009-11-12  6.5.7-8 Cristy  <quetzlzacatenango@image...>\n  * Thumb::URI file URI now has the correct number of forward slashes.\n\n2009-11-09  6.5.7-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Suppress libpng pedantic warnings and warn about using old libpng-1.4.0\n    beta versions.\n\n2009-11-09  6.5.7-7 Cristy  <quetzlzacatenango@image...>\n  * Bump library age.\n  * Restore -tile-offset functionality (bug report from Anthony).\n\n2009-11-06  6.5.7-6 Cristy  <quetzlzacatenango@image...>\n  * Animate command line options are no longer ignored.\n\n2009-11-04  6.5.7-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fix for Polynomial distortion. which is now working.\n\n2009-11-01  6.5.7-4 Cristy  <quetzlzacatenango@image...>\n  * Use -define delegate:bimodal=true to activate any bimodal delegates.\n  * Make sure MagickWand semaphore is acquired before locking it.\n\n2009-10-28  6.5.7-3 Cristy  <quetzlzacatenango@image...>\n  * Convert SVG clipping path points from unsigned to long.\n\n2009-10-26  6.5.7-2 Chris Madison  <madisonblu@gmail...>\n  * Only call InstantiateXComponent() if X11 support is included.\n  * Correct hue computation for the HSB colorspace.\n\n2009-10-23  6.5.7-1 Samuel Thibault  <samuel.thibault@ens-l...>\n  * Braille coder fix for DirectClass images\n\n2009-10-19  6.5.7-1 Wang Dataton <wang@datat...>\n  * Use fdopen() rather than MagickOpenStream() in coders/pict.c.\n\n2009-10-18  6.5.7-1 Cristy  <quetzlzacatenango@image...>\n  * Alpha blending is not required for ScaleImage().\n  * Gaussian noise operator is not longer discontinuous.\n\n2009-10-14  6.5.7-0 Pino Toscano  <pino@kde...>\n  * ImageMagick fails to build in GNU/HURD due to absence of PATH_MAX.\n\n2009-10-14  6.5.7-0 Cristy  <quetzlzacatenango@image...>\n  * Black channel is now set properly when resizing CMYKA images.\n\n2009-10-10  6.5.7-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fixes for degenerate 'affine' cases of BilinearForward distortion.\n\n2009-10-06  6.5.6-10 Cristy  <quetzlzacatenango@image...>\n  * Declare the  MagickCore method SpliceImage() in Magick++/Include.h.\n\n    QueueCacheViewAuthenticPixels() for the CopyComposite optimization.\n2009-10-04  6.5.6-9 Cristy  <quetzlzacatenango@image...>\n  * Use GetCacheViewAuthenticPixels() rather than\n  * QueueCacheViewAuthenticPixels() for the CopyComposite optimization.\n\n2009-10-03  6.5.6-8 Nick Wellnhofer <wellnhofer@aevum...>\n  * Add missing libraries to the LIBADD entries in coders/Makefile.am,\n    filters/Makefile.am and wand/Makefile.am.\n  * Use LIBS rather than LDFLAGS in configure.ac for the Freetype delegate\n    library.\n\n2009-10-01  6.5.6-7 Cristy  <quetzlzacatenango@image...>\n  * Don't use group4 compression if the image is truecolor.\n  * If image is gray, write grayscale DPX images.\n  * We no longer lose a scanline when reading multi-frame raw images\n    (Y, R, C, etc.).\n  * Properly update the EXIF orientation tag.\n\n2009-09-25  6.5.6-6 Cristy  <quetzlzacatenango@image...>\n  * Permit percentage of hue for HSL (e.g. hsl(12%,...)).\n\n2009-09-25  6.5.6-5 Cristy  <quetzlzacatenango@image...>\n  * Support -clamp option.\n  * Patch for IsMagickColorEqual() for HDRI.\n  * Permit non-percentage HSL colors (e.g. hsl(12.6316,134.58339,219.00012)).\n\n2009-09-25  6.5.6-5 Elf  <elf@ephem...>\n  * Patch to fix configure's framework's undefinedness (only if the gslib\n    tests are run).\n\n2009-09-22  6.5.6-4 Cristy  <quetzlzacatenango@image...>\n  * Don't compile Huffman2DEncodeImage() unless the TIFF delegate library\n    is enabled.\n  * Hue in hsl() format is 0-360 and does not use %.\n\n2009-09-21  6.5.6-3 Cristy  <quetzlzacatenango@image...>\n  * Deprecate LevelImageColors(), replace with LevelColorsImage().\n\n2009-09-17  6.5.6-2 Cristy  <quetzlzacatenango@image...>\n  * Optimize copy composite operator.\n\n2009-09-15  6.5.6-2 Cristy  <quetzlzacatenango@image...>\n  * Use -define jpeg:size to scale a JPEG image to the specified size.\n\n2009-09-13  6.5.6-0 Cristy  <quetzlzacatenango@image...>\n  * Fix ICON alpha mask scanline pad.\n\n2009-09-11  6.5.5-10 Cristy  <quetzlzacatenango@image...>\n  * Return the global maximum threads to avoid the rare cache view assertions.\n  * Throw an end-of-file exception for truncated raw gray images.\n\n2009-09-10  6.5.5-9 Cristy  <quetzlzacatenango@image...>\n  * Do not include last line of text in the interline spacing computation.\n\n2009-09-07  6.5.5-8 Cristy  <quetzlzacatenango@image...>\n  * Check that quantum_info is defined before destroying it in the PNG coder.\n  * Add -interline-spacing option to convert.\n\n2009-09-03  6.5.5-7 Cristy  <quetzlzacatenango@image...>\n  * Support multi-page transparent Postscript and PDF.\n\n2009-09-01  6.5.5-6 Cristy  <quetzlzacatenango@image...>\n  * A union is required when converting a thread ID to an unsigned long.\n\n2009-08-28  6.5.5-5 Cristy  <quetzlzacatenango@image...>\n  * Add support for TIFF 3.9.1.\n\n2009-08-27  6.5.5-4 Cristy  <quetzlzacatenango@image...>\n  * Validate with the netscape: reference image.\n\n2009-08-26  6.5.5-3 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak for threaded PerlMagick scripts.\n\n2009-08-24  6.5.5-2 Cristy  <quetzlzacatenango@image...>\n  * SVG compile error when if MAGICKCORE_CAIRO_DELEGATE is not defined.\n\n2009-08-23  6.5.5-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Bug Fix for transparency handling in Composite Variable Blur\n  * Addition of -auto-level and -auto-gamma  image enhancements\n    (under trial not yet final)\n  * Addition of a special -channel flag 'sync' which means that the specified\n    channels are to be modified together by the same amount.  The flag is\n    enabled by default.  This replaces the current 'channels not modified'\n    type handling thought IM.\n  * Modified -channel parsing to continue looking for words, after handling\n    any shorthand channel options.  For example:  -channel RGB,sync\n\n2009-08-10  6.5.5-0 Cristy  <quetzlzacatenango@image...>\n  * identify -format %c logo.png returns the image comment as expected.\n  * Clone ImageInfo members scene and number_scenes (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=14437).\n  * Fix memory leak with the -remote option of the animate program (bug report\n    from Anthony).\n  * If a grayscale TIFF image has a colormap write it as a colormapped image.\n  * MVG partial opacity not set properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14442).\n  * Black channel was not blurring properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14473).\n\n2009-08-06  6.5.4-10 Cristy  <quetzlzacatenango@image...>\n  * The display program honors -loop.\n  * (ab) of Lab colorspace was not offset correctly.\n  * Scale mag/phase and real/imaginary the same for HDRI and non-HDRI builds.\n  * SVG permits multiple arc paths with an omitted 'A' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14377).\n  * The 'skewY' MVG attribute produced incorrect angles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=14144).\n\n2009-08-02  6.5.4-9 Cristy  <quetzlzacatenango@image...>\n  * Optimize GammaImage() method.\n\n2009-08-02  6.5.4-8 Cristy  <quetzlzacatenango@image...>\n  * OpenMP-enable GetSimilarityMetric().\n\n2009-07-30  6.5.4-7 Bernhard Rosenkraenzer <bero@arkli...>\n  * Structure trans_values was renamed to trans_color and trans was\n    renamed to trans_alpha in PNG version 1.4.\n\n2009-07-29  6.5.4-7 Cristy  <quetzlzacatenango@image...>\n  * Replace color blending in DrawGradientImage() to use Composite Blend.\n    this makes Gradients handle transparency correctly!\n\n2009-07-28  6.5.4-7 Cristy  <quetzlzacatenango@image...>\n  * The -thumbnail option no longer removes color profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=14312).\n  * Do not scale real / imaginary FFT / IFT.\n  * Check for localtime() NULL return.\n  * import --help requires an X server (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14323).\n  * Fails to load MS Windows icons with compressed PNG elements (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14324).\n\n2009-07-25  6.5.4-6 Cristy  <quetzlzacatenango@image...>\n  * Support the new JPEG version 7 delegate library.\n\n2009-07-24  6.5.4-6 Alexander E. Patrakov <patrakov@gmail...>\n  * Incorrect use of setjmp in coders/png.c.\n\n2009-07-23  6.5.4-5 Cristy  <quetzlzacatenango@image...>\n  * We broke -scene when we fixed the -dispose option.  Try again.\n\n2009-07-21  6.5.4-4 Cristy  <quetzlzacatenango@image...>\n  * Update autoconf support files.\n  * More than one -dispose setting overwrote previous settings (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=14252).\n  * Don't use JPEG's color reduction algorithm for less than 8 colors.\n\n2009-07-13  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Final testing and bug fixes for all mathematical compose methods\n    Including non-overlapping regions bugs found in in operators Divide,\n    ColorDodge,  VividLight.  And the handling of transparency to follow\n    standard 'Over' Blending in Divide.  Only math methods not looked at are\n    the addition methods Plus, Add, Minus, and Subtract, which do not follow\n    normal 'Over' alpha blending behavior, for the purposes of mask handling.\n\n2009-07-12  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Addition of user definable 'Mathematics' compose method\n      -compose Mathematics -set option:compose:args A,B,C,D -composite\n    Will implement the formula    f(Sc,Dc) = A*Sc*Dc + B*Sc + C*Dc + D\n    this lets you implement most smooth polynomial compose methods.\n    (requested by Fred WienHaus)\n\n2009-07-11  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Finished the recoding of Composite methods to allow easier debugging\n    and faster access.\n  * Added PegtopLight compose method as an alternative simpler Softlight\n    alternative.  See notes and comparison to SoftLight in...\n       http://www.pegtop.net/delphi/articles/blendmodes/softlight.htm\n  * From the notes on Photoshop blend modes at\n       http://www.simplefilter.de/en/basics/mixmods.html\n    Added extra composition modes:\n       VividLight, PinLight, LinearBurn, LinearDodge\n    NOTE: 'LinearBurn' the same as 'Plus' but with the normal 'Over' blending.\n\n2009-07-10  6.5.4-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Re-coding of Composite methods HardLight, SoftLight, Overlay, LinearLight,\n    ColorBurn, ColorDodge, Multiply, Screen  to make it more readable, easier\n    to debug, and directly comparable to SVG specifications.\n  * Specifications changed for  SoftLight, ColorBurn, ColorDodge\n    Though only SoftLight changed to significantly.\n  * However implementation errors were found for  ColorBurn, LinearLight\n\n2009-07-01  6.5.4-3 Cristy  <quetzlzacatenango@image...>\n  * Add -blue-shift option.\n  * Add compression flag for each channel of a PSD layer.\n  * Implement experimental forward and inverse Fourier transforms (contributed\n    by Sean Burke and Fred Weinhaus).  The -fft / -ifft option is not ready for\n    prime time just yet.\n  * Support -cdl (color decision list) option.\n  * Don't process directories as filenames when using wildcard paths\n    (i.e. logo[1]/png).\n\n2009-07-01  6.5.4-2 Cristy  <quetzlzacatenango@image...>\n  * Can't bit shift a float.\n\n2009-06-25  6.5.4-1 Cristy  <quetzlzacatenango@image...>\n  * Off by one error for multi-frame raw grayscale images.\n  * Can't stat() a Zip or Bzip opaque structure.\n  * DPX user bits are no longer truncated.\n  * Return image colorspace for -format [%colorspace] option.\n  * ThumbnailImage(): don't subsample if image is already thumbnail size.\n\n2009-06-23  6.5.4-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Automatic determination of B from C and C from B for a 'Keys Filter'\n    when using the B,C Cubic Filter Expert options was broken.\n    See http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=14037\n\n2009-06-19  6.5.4-0 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added -compose 'Blur', variable blur mapping to CompositeImages\n    Arguments   X_scale x Y_scale + angle   of the blurring ellipse.\n  * Added \"-blur\" special compose option to \"composite\"\n  * Cleanup of \"composite\" compose argument handling\n\n2009-06-18  6.5.3-10 Cristy  <quetzlzacatenango@image...>\n  * Clone pixel cache when cloning image to prevent RMagick semaphore lock.\n  * Set compare similarity image to NULL to prevent double free.\n\n2009-06-16  6.5.3-8 Cristy  <quetzlzacatenango@image...>\n  * Set camera formats to require a seekable stream.\n  * Do not let display program image window exceed the screen size.\n\n2009-06-14  6.5.3-7 Cristy  <quetzlzacatenango@image...>\n  * Improve FITS keyword parser.\n\n2009-06-14  6.5.3-7 Anthony Thyssen <A.Thyssen@griffith...>\n  * Cleanup of compose 'displace' of old useless code that is not used.\n  * Implement a compose 'distort' mapping method,\n    This is basically exactly like 'displace' but relative to a fixed point\n    which may be user supplied as +X+Y\n  * Default scaling to width/2 and height/2 of overlay (100% scale)\n    with a distortion 'center' to the middle of the overlay image\n  * If a '%' flag given scale displacement relative to image size\n  * If a '!' flag given make scale and center relative to 'background' image\n    instead of the overlay map.\n  * If no 'height' scale given, use the X scale.\n\n2009-06-13  6.5.3-6 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed bug for compose methods, Hue, Saturate, Luminize\n\n2009-06-11  6.5.3-6 Cristy  <quetzlzacatenango@image...>\n  * Report the correct transparent pixel values in the display program\n    magnify windows.\n  * Do not advance when finalizing image settings in the mogrify program.\n\n2009-06-11  6.5.3-5 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed \"convert\" to merge the third 'mask' image into the 'source' image\n    for correct handling of 2 dimensional -compose \"displace\".\n  * Fixed PerlMagick Composite() for the same thing.\n  * Modified compose \"Displace\" so displacement image's alpha channel can be\n    used to mask the transparency of the overlay area.\n\n2009-06-07  6.5.3-4 Cristy  <quetzlzacatenango@image...>\n  * Added the HALD image Color LUT, and a no-op HALD: image generator.\n    See Introduction at  http://www.quelsolaar.com/technology/clut.html\n\n2009-06-07  6.5.3-4 Anthony Thyssen <A.Thyssen@griffith...>\n  * Changed CompositeImageChannel() so that extra compose arguments are\n    now passed in the ImageArtifact \"compose:args\". This can be assigned to\n    images using   -set \"option:compose:args\" 'args'  where args are defined\n    using 'geometry' style or 'comma separated numbers'.\n  * Declared the special flag needed for Composite Tiling as the ImageArtifact\n    \"compose:outside-overlay\".\n  * Documentation update for CompositeImageChannel() in Core Library to\n    reflect these changes.\n  * Documentation update for DistortImage() in Core Library with the extra\n    ImageArtifact controls it can use.\n  * Bug correction in normalization of GetOptimalKernelWidth2D() of gem.c\n\n2009-06-06  6.5.3-3 Anthony Thyssen <A.Thyssen@griffith...>\n  * Documentation update for CompositeImageChannel() in Core Library.\n    This adds the information on how extra compose arguments needed for\n    specific compose methods are actually passed to the library function.\n    Compose methods such as Blend, Dissolve and Displace.\n\n2009-06-01  6.5.3-3 Priya Hariharan <priya.hariharan@globa...>\n  * The target profile in ProfileImage() is no longer accessed after it is\n    freed.\n\n2009-06-01  6.5.3-1 Cristy  <quetzlzacatenango@image...>\n  * Bug fix for -page.\n\n2009-05-31  6.5.3-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Minor change to -function Arctan to make first argument match slope\n\n2009-05-29  6.5.3-0 Cristy  <quetzlzacatenango@image...>\n  * Do not treat -page as a global option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13864).\n\n2009-05-28  6.5.2-10 Cristy  <quetzlzacatenango@image...>\n  * Create thread set for pseudo-random number generator.\n\n2009-05-25  6.5.2-9 Cristy  <quetzlzacatenango@image...>\n  * Do not change opacity value for the -alpha background option.\n  * Rebuild automake / autoconf scripts.\n\n2009-05-23  6.5.2-8 Cristy  <quetzlzacatenango@image...>\n  * Check for XMakeImage() integer overflow vulnerability (Secunia Advisory\n    SA35216).\n\n2009-05-23  6.5.2-8 Cristy  <quetzlzacatenango@image...>\n  * Permit reading a specific frame of a multi-page TIFF with blobs.\n\n2009-05-22  6.5.2-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Added new -function methods  Arcsin  and Arctan\n\n2009-05-19  6.5.2-8 Glenn Randers-Pehrson <glennrp@image...>\n  * Fixed a regression with PNG8: format.\n\n2009-05-19  6.5.2-7 Cristy  <quetzlzacatenango@image...>\n  * The -geometry option was improperly applied twice.\n\n2009-05-18  6.5.2-6 Richard Oehlinger <richard.oehlinger@celum...>\n  * Set image colorspace to YCbCrColorspace if JPEG color space is JCS_YCbCr.\n\n2009-05-14  6.5.2-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Updated help output and command-line options documentation to bring\n    the -alpha options up to date with what's actually in the code.\n\n2009-05-13  6.5.2-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Change \"depreciated\" to \"deprecated\" in several files.\n\n2009-05-10  6.5.2-5 Cristy  <quetzlzacatenango@image...>\n  * Change OpenMP schedule from dynamic to static for RenderFreeType().\n  * Recognize unicode strings when computing caption word wrapping.\n  * New -alpha background option to set fully-transparent pixels to the\n    background color.\n\n2009-05-08  6.5.2-4 Cristy  <quetzlzacatenango@image...>\n  * Combined layer of transparent PSD image was not being read properly.\n\n2009-05-06  6.5.2-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Progress on \"-define png:bit-depth=value\" and \"-define png:color-type=value\"\n    It is now able to write an opaque black-and-white image in any of the 15\n    valid combinations of PNG color-type and bit-depth.\n  * Fixed a regression with writing sub-8-bit grayscale PNGs.\n\n2009-05-06  6.5.2-2 Chris Madison  <madisonblu@gmail...>\n  * Create 8-bit TIFF images if -depth is set to 8 and HDRI-enable ImageMagick.\n\n2009-05-04  6.5.2-1 Chris Madison  <madisonblu@gmail...>\n  * Accept file lists on the command line (e.g. echo \"rose: rose.png\" |\n    convert @- ...).\n  * Duplicate line in tiff.c breaking read of zip compressed tif (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13688).\n  * Support policies to permit or deny any coder, delegate, filter, or file\n    path (see policy.xml).\n\n2009-05-02  6.5.2-0 Chris Madison  <madisonblu@gmail...>\n  * The mogrify -crop option returns multiple images if an x/y offset is not\n    specified (e.g. -crop 100x100).\n  * Generate a proper file path for -path @filelist.txt (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13671).\n\n2009-05-01  6.5.2-0 Glenn Randers-Pehrson <glennrp@image...>\n  * Accept \"-define png:bit-depth=value\" and \"-define png:color-type=value\"\n    options.  This is work-in-progress with the objective of being able to\n    precisely specify the type of PNG file to be written.  The previously-used\n    internal attribute \"png:bit-depth\" that was used to communicate between\n    the PNG writer and the JNG writer is changed to \"png:bit-depth-written\".\n    This feature needs testing.  It is important to note that this feature\n    cannot be used to force the PNG to use a bit-depth or color-type that\n    does not losslessly represent the image.  You can, however, cause\n    the writer to use a larger depth or to use the RGB colorspace when\n    grayscale or indexed would have been sufficient.\n\n2009-05-01  6.5.1-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fixed the Rmin usage in Depolar and Polar distortions\n  * The 6th argument (Ato) for Polar/Depolar is now optional and defaults\n    to Afrom + 360 degrees (or a fill circle from the given start angle)\n\n2009-04-30  6.5.1-10 Cristy  <quetzlzacatenango@image...>\n  * Do not return a black image for -channel RGBA -gaussian (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13669).\n\n2009-04-28  6.5.1-9 Cristy  <quetzlzacatenango@image...>\n  * Fix 'conflicting types for Huffman2DEncodeImage' compile exception.\n\n2009-04-25  6.5.1-9 Cristy  <quetzlzacatenango@image...>\n  * Generate BMP 32-bit ARGB format for images with transparency (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13633).\n\n2009-04-24  6.5.1-7 Cristy  <quetzlzacatenango@image...>\n  * Grok 'image.psd[0]' and 'image.mpg[0]' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13609).\n  * Normalize similarity based on reconstruction not the original (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13626).\n  * Support multiple JPEG images encapsulated within DICOM.\n\n2009-04-23  6.5.1-6 Cristy  <quetzlzacatenango@image...>\n  * Msys does not understand NAME_MAX.\n\n2009-04-22  6.5.1-5 Cristy  <quetzlzacatenango@image...>\n  * Check for valid linked list before assigning next / previous pointers.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Check error return from CompressColormapTransFirst() in coders/png.c\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Refrain from modifying image struct members (color, depth, matte)\n    while writing PNG datastreams.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Sometimes the PNG8: format would produce 1-, 2-, or 4-bit PNG datastreams.\n    Now it always produces 8-bit datastreams as users probably expect.\n\n2009-04-21  6.5.1-4 Glenn Randers-Pehrson <glennrp@image...>\n  * Suppressed \"shadowed declaration\" warnings in coders/jpeg.c and\n    coders/png.c that are triggered by \"-Wshadow\" gcc compiler flag.\n\n2009-04-17  6.5.1-3 Cristy  <quetzlzacatenango@image...>\n  * The display program now returns a 0 exit code on success (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13579).\n\n2009-04-14  6.5.1-3 Glenn Randers-Pehrson <glennrp@image...>\n  * Folded some long lines and made other cosmetic changes.in coders/png.c\n\n2009-04-13  6.5.1-3 Cristy  <quetzlzacatenango@image...>\n  * MVG autodetection failing (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13542).\n\n2009-04-11  6.5.1-2 Cristy  <quetzlzacatenango@image...>\n  * Image not properly placed when displaying to the X server root (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13532).\n  * fmax() is not support on some platforms (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13533).\n\n2009-04-11  6.5.1-2 Anthony Thyssen <A.Thyssen@griffith...>\n  * Rename existing \"Bilinear\" distortion as  \"BilinearReverse\"\n  * Added forward mapped bilinear distort as  \"BilinearForward\"\n  * The \"Bilinear\" distort is temporarily obsoleted but will eventually\n    be added as a  \"BilinearReverse\" and \"BilinearForward\" combination\n    mapping though a unit square.\n  * Sparse Gradient internally uses \"BilinearReverse\" for its \"Bilinear\"\n    gradient function as that method is the direct use of such equations.\n\n2009-04-01  6.5.1-1 Cristy  <quetzlzacatenango@image...>\n  * Default to min-is-white Photometric for fax / group4 compression (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13468).\n  * Respect image resolution when setting PDF MediaBox (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13350).\n  * Add SimilarityImage() to return how similar one image is to another.\n\n2009-03-28  6.5.1-0 Cristy  <quetzlzacatenango@image...>\n  * Graceful exit in djvu coder when EOF is thrown.\n  * Support -unsharp option for the montage program.\n\n2009-03-28  6.5.0-10 Cristy  <quetzlzacatenango@image...>\n  * Reduce deskew blurring: use AffineTransformImage() rather than\n    RotateImage().\n  * Unexpected end-of-file @ xwd.c/ReadXWDImage/252 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13430).\n\n2009-03-26  6.5.0-10 Markus Dahms <markus.dahms@progr...>\n  * Support for -density & -units options in PSD writer.\n\n2009-03-26  6.5.0-10 Samuel Thibault  <samuel.thibault@ens-l...>\n  * Fix bug in the braille coder which makes it always segfault.\n\n2009-03-25  6.5.0-9 Cristy  <quetzlzacatenango@image...>\n  * Enhance the compare program to locate a template image within a larger\n    image.\n  * Eliminate assertion when generating a PDF thumbnail.\n\n2009-03-25  6.5.0-8 Cristy  <quetzlzacatenango@image...>\n  * Fix assertion in IntegralRotateImage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13410).\n\n2009-03-24  6.5.0-7 Cristy  <quetzlzacatenango@image...>\n  * Referenced counted blob incremented incorrectly in CloneImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13410).\n\n2009-03-23  6.5.0-6 Chris Madison  <madisonblu@gmail...>\n  * Assertion failure reading PSD image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13397).\n\n2009-03-21  6.5.0-5 Chris Madison  <madisonblu@gmail...>\n  * Change -selective-blur to use gaussian kernel.\n\n2009-03-21  6.5.0-4 ERB  <entropy@xebec...>\n  * Missing locks in blob - race condition (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13385).\n\n2009-03-19  6.5.0-3 Chris Madison  <madisonblu@gmail...>\n  * Use default SVG resolution unless resolution is explicitly set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13373).\n  * Add support for -selective-blur option.\n\n2009-03-19  6.5.0-3 ragesteel  <iimagemagic-org-iapied0o@gt2.r...>\n  * ImageToBlob() no longer faults if Jasper compression is wrong (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13372).\n\n2009-03-19  6.5.0-3 ERB  <entropy@xebec...>\n  * Check the 8BIM profile resource block length (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13368).\n  * Unlocked read in DeleteNodeByValueFromSplayTree (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13370).\n\n2009-03-18  6.5.0-2 ERB  <entropy@xebec...>\n  * Eliminate race condition when acquiring a wand (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13357).\n  * Use of \"localtime\" in FormatMagickTime not thread-safe (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13358).\n\n2009-03-18  6.5.0-2 Cristy  <quetzlzacatenango@image...>\n  * Fix the image compose operator at OverCompositeOP for shadows (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13330).\n\n2009-03-14  6.5.0-1 Paul Smedley  <paul@smedl...>\n  * Patches to get ImageMagick working under OS2.\n\n2009-03-10  6.5.0-1 Anthony Thyssen <A.Thyssen@griffith...>\n  * Expansion of Virtual-Pixel (Cache) handling, to include corrected Mirror,\n    plus addition of  CheckerTile, HorizontalTileEdge and VerticalTileEdge\n\n2009-03-10  6.5.0-0 John Cupitt  <jcupitt@gmail...>,\n                    Glenn Randers-Pehrson <glennrp@image...>\n  * DICOM reader not handling signed pixels properly.\n\n2009-03-09  6.4.9-10 Alexander E. Patrakov <patrakov@gmail...>\n  * Don't call GetValueFromSplayTree() if image properties is NULL.\n\n2009-03-09  6.4.9-10 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix minor size issue with bestfit +distort operation.\n  * Enable listing of -distort Polynomial\n  * Minor tweeks and center fixes for Polar/Depolar\n\n2009-03-01  6.4.9-9 Cristy  <quetzlzacatenango@image...>\n  * Convert returns MagickFalse for the -version option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=13230).\n  * Don't set pixel opacity unless the image alpha channel is active (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13189).\n\n2009-02-27  6.4.9-8 Anthony Thyssen <A.Thyssen@griffith...>\n  * Fix old -clut bug for re-coloring gray images using transparent and\n    semi-transparent colors.\n\n2009-02-22  6.4.9-7 Rick Mabry  <rick.mabry@anony...>\n  * Changes have been made to scores of the files that generate the\n    documentation. The most noticeable cosmetic changes are to the command-line\n    examples and command-line snippets, which now have a new look: dark blue\n    boxes with white/yellow text to indicate sample input/output.  Inclusion of\n    current version and release dates in appropriate places are now\n    automatically generated. Also, many changes have been made to begin to\n    bring the pages into strict W3C compliance with respect to both HTML and\n    CSS.\n\n2009-02-21  6.4.9-7 Chris Madison  <madisonblu@gmail...>\n  * The identify program reads the image pixels when the -format option is\n    asking for image statistics.\n  * Much improved ImageMagick validation suite (exercise with 'make check').\n\n2009-02-18  6.4.9-5 Jon  <jon@brick...>\n  * Processing the arg list -tile is replaced by -sans0 which is 1 char longer\n    and which overwrites the allocated area.\n\n2009-02-16  6.4.9-5 Chris Madison  <madisonblu@gmail...>\n  * Add section to license to alert users to third-party licenses in the\n    NOTICE file.\n\n2009-02-11  6.4.9-3 Anthony  <A.Thyssen@griffith...>\n  * Replaced geometry string parsing using ParseGravityGeometry() in\n    \"composite\" with more direct use of GravityAdjustGeometry();\n\n2009-02-10  6.4.9-3 Cristy  <quetzlzacatenango@image...>\n  * Support file descriptors (e.g. convert image.jpg fd:3 ...).\n  * The stream utility no longer go into an infinite loop (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=13102).\n\n2009-02-04  6.4.9-2 Cristy  <quetzlzacatenango@image...>\n  * JPEG to PDF was not always reversible (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13020).\n\n2009-01-30  6.4.9-0 Cristy  <quetzlzacatenango@image...>\n  * Stroking when annotating failed for stroke widths > 2 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=13009).\n\n2009-01-24  6.4.8-10 Cristy  <quetzlzacatenango@image...>\n  * TransformImageColorspace() returns GRAYColorspace when set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12990).\n  * Don;t assume CMYK unless document process colors include Cyan, Magenta,\n    or Yellow.\n\n2009-01-23  6.4.8-9 Cristy  <quetzlzacatenango@image...>\n  * Increase random angle range for +polaroid from -7..7 to -15..15 degrees.\n\n2009-01-22  6.4.8-8 Anthony  <A.Thyssen@griffith...>\n  * Fixed a -evaluate AddModulus 'patch' for correct 'negative' handling\n\n2009-01-20  6.4.8-7 Cristy  <quetzlzacatenango@image...>\n  * Removed previous patches for -shear directions.\n\n2009-01-20  6.4.8-8 Thomas Stegemann  <Thomas.Stegemann@mater...>\n  * SVG with resolutions other than 72.0 dpi, text is no longer transformed\n    twice.\n\n2009-01-20  6.4.8-8 Anthony  <A.Thyssen@griffith...>\n  * Renamed -evaluate methods 'sin' and 'cos' to math C math library names\n  * Added  \"-function polynomial  a,b,c,....\"   Eg:  a*x^2 + b*x + c\n  * Added  \"-function sinusoid freq,phase,amplitude,bias  (all optional)\n\n2009-01-18  6.4.8-7 Anthony  <A.Thyssen@griffith...>\n  * Removed \"annotate\" patches, which causes no end of problems.\n    Original coding worked perfectly fine.  Annotate isn't part of SVG!\n\n2009-01-18  6.4.8-7 Cristy  <quetzlzacatenango@image...>\n  * Respect mouse wheel movements for display program (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12938).\n  * Grab button in Display Open menu now works consistently (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12942).\n  * Patch for problem with opacity in MVG (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12946).\n\n2009-01-14  6.4.8-6 Cristy  <quetzlzacatenango@image...>\n  * Don't accept discontinuous shear angles for the -annotate option.\n    -- REMOVED\n\n2009-01-14  6.4.8-6 Mark Freeman <mark.freeman@porci...>\n  * Apply patch so ImageMagick compiles with Visual Studio 6.\n\n2009-01-12  6.4.8-5 Alexander E. Patrakov <patrakov@gmail...>\n  * Fix small memory leak on truncated PNG images.\n  * Do not allocate pixels when pinging a PNG image.\n\n2009-01-11  6.4.8-6 Chris Madison  <madisonblu@gmail...>\n  * Set the stroke opacity for \"opacity\" SVG element (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10594).\n\n2009-01-10  6.4.8-5 Matthew Litwin <mlitwin@sonic...>\n  * Convert to windows .ico format no longer inverts alpha channel.\n\n2009-01-10  6.4.8-5 Cristy  <quetzlzacatenango@image...>\n  * Interpret geometry correctly for negative angles (-shear 30x-10).\n\n2009-01-08  6.4.8-4 Eberhard Mattes  <eberhard.mattes@web.d...>\n  * Fix GetMagickToken() to accept locales that use \",\" as radix character.\n\n2009-01-08  6.4.8-4 Anthony  <A.Thyssen@griffith...>\n  * Add (and Fix) -evaluate methods   Sine, Cosine, AddModulus\n\n2009-01-05  6.4.8-4 Rick Mabry  <rick.mabry@anony...>\n  * Check for negative offsets (bevel widths) for the -frame option.\n\n2009-01-04  6.4.8-4 Alexander E. Patrakov <patrakov@gmail...>\n  * Patch for a memory leak and a logical bug in coders/gif.c.\n  * CopyMagickString() now returns the minimum of the source string length\n    or the length parameter.\n  * Properly set alpha channel in PNGs with palette and tRNS.\n\n2009-01-01  6.4.8-4 Cristy  <quetzlzacatenango@image...>\n  * Support %[] embedded filename tag (e.g. convert rose: -set area \"%wx%h\"\n    'rose-%[area].png').\n  * Do not set the fill element when 'opacity' is set (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10594).\n  * Restore support for decoding the DVI format.\n  * Add perl and math lib reference to PerlMagick Makefile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12840).\n  * Fix crash on invalid JPEG XML profile.\n  * Export libtool symbols in MagickCore.sym and MagickWand.sym.\n  * Support sine and cosine as arguments to the -evaluate option.\n\n2008-12-31  6.4.8-4 Amartyo Banerjee\" <amartyo@gmail...>\n  * Calculate the kurtosis and skewness of image channels (reference\n    http://amartyosscrapbook.blogspot.com/2008/12/formulas-used-to-calculate-kurtosis-and.html).\n\n2008-12-28  6.4.8-4 Rick Mabry  <rick.mabry@anony...>\n  * Patch magick/display.c and PerlMagick/ContrastStretchImage() to return the\n    same results as the -contrast-stretch option.\n  * ContrastStretchImageChannel() no longer interpreted as Contast() by\n    MogrifyRegion() in PerlMagick.\n\n2008-12-28  6.4.8-3 Rick Mabry  <rick.mabry@anony...>\n  * Reverse argument and option in Throw*InvalidArgumentException()\n    macro for proper exception message.\n  * Recognize negative geometries for -shear and -annotate (.e.g. 45x-30).\n  * Fix Y shear angle for -shear option.\n\n2008-12-26  6.4.8-2 Cristy  <quetzlzacatenango@image...>\n  * Use GetImageArtifact() to retrieve -attenuate option value for +noise.\n  * Support reading FITS test files (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12799).\n  * Replace input.ttf with the public domain Tuffy.ttf font.\n  * MagickNewImage() no longer faults when parameters are incorrect (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12817).\n  * Allocate strings returned by XGetResourceInstance() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12818).\n  * The -append gravity is relative to the container (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12821).\n\n2008-12-19  6.4.8-1 Cristy  <quetzlzacatenango@image...>\n  * Reference cache rather than acquiring when cloning an image.\n\n2008-12-19  6.4.8-0 Cashish Kulkarni <ashkulz@redif...>\n  * Cross-compilation failure using MinGW on Linux for ImageMagick trunk\n\n2008-12-19  6.4.8-0 Cristy  <quetzlzacatenango@image...>\n  * Add -interword-spacing option to convert.\n  * Initialize the black channel when testing the CMY colorspace (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12685).\n  * remove calls to exit() in MagickWand (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12772).\n  * Validate -affine arguments.\n  * Accept -attenuate as an option for convert.\n  * Properly create RGBA image if colormapped image has transparency.\n  * Support X11 geometry like this: +-4+-4;  weird but X11 supports it.\n\n2008-12-17  6.4.7-10 Chris Madison  <madisonblu@gmail...>\n  * Fix off-by-one problem with -shear.\n  * Clone pixel cache method when cloning an image.\n\n2008-12-16  6.4.7-9 Anthony  <A.Thyssen@griffith...>\n  * Make \"-layers Coalesce\" work as it should.\n\n2008-12-16  6.4.7-9 Sam Fisher <fisher@image...?\n  * Support > 2GB TIFF under Windows.\n\n2008-12-12  6.4.7-8 mootools <help@mooto...>\n  * FormatMagickTime() checks to ensure the provided time is valid.\n\n2008-12-12  6.4.7-8 Cristy  <quetzlzacatenango@image...>\n  * Add -kerning option to convert.\n  * Remove halo effect for the -scale option.\n\n2008-12-11  6.4.7-7 Alan Wright  <alanwright.atex@google...>\n  * Fix a 1 byte overrun in Postscript coder.\n\n2008-12-10  6.4.7-6 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in ExpandFilenames().\n\n2008-12-09  6.4.7-5 Cristy  <quetzlzacatenango@image...>\n  * Fix small memory leak in LoadLocaleList().\n  * Fix small memory leak in GetProfilesFromResourceBlock().\n  * Don't forget to scale grayscale values when quantum min-is-white is set.\n\n2008-12-08  6.4.7-4 Cristy  <quetzlzacatenango@image...>\n  * Include delegate libraries in MagickCore-config script.\n\n2008-12-07  6.4.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix off-by-one error for -chop 0x50%.\n  * Performance improvement bilinear interpolation.\n\n2008-12-06  6.4.7-2 Cristy  <quetzlzacatenango@image...>\n  * Support absolute paths in the include directive within a configuration\n    file.\n\n2008-12-05  6.4.7-1 Chris Madison  <madisonblu@gmail...>\n  * Assume Log colorspace if DPX transfer is LogarithmicColorimetric.\n  * Another attempt at properly extracting the IPTC profile from a 8BIM\n    resource block.\n\n2008-12-04  6.4.7-1 Anthony  <A.Thyssen@griffith...>\n  * AppendImage() re-written to respect gravity properly!\n    Routine simplified to a single loop for both styles of append\n\n2008-12-03  6.4.6-9 Cristy  <quetzlzacatenango@image...>\n  * AppendImage() respects gravity.\n  * Protect against circular image list when cropping.\n  * The index variable must be long rather than unsigned long for the DCM\n    coder.\n\n2008-12-02  6.4.6-9 Cristy  <quetzlzacatenango@image...>\n  * Use ScaleQuantumToMap() to prevent fault in SetGrayscaleImage() when\n    quantum depth is 32.\n\n2008-12-01  6.4.6-8 Cristy  <quetzlzacatenango@image...>\n  * Global replaced accidentally renamed MagickGetImagePixelColor().\n\n2008-11-29  6.4.6-6 Cristy  <quetzlzacatenango@image...>\n  * Fixed transient bug in the -white-threshold option.\n  * -extent x256+100+100 no longer returns an exception (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=7&t=12583).\n\n2008-11-27  6.4.6-5 Cristy  <quetzlzacatenango@image...>\n  * TIFF pad is relative to bits-per-sample (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12563).\n\n2008-11-27  6.4.6-5 Koshiji Masayuki  <kosiji.masayuki@da.mi...>\n  * Support GBR raw image files.\n\n2008-11-26  6.4.6-4 Cristy  <quetzlzacatenango@image...>\n  * DPX 10 bit YUV 4:2:2 are now processed properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12443).\n  * Default PDF compression to that of the image unless overwritten by\n    the -compress option.\n\n2008-11-25  6.4.6-3 Cristy  <quetzlzacatenango@image...>\n  * Numerous pixel cache improvements including embedded support for\n    OpenMP in a transparent manner.\n\n2008-11-20  6.4.6-2 Cristy  <quetzlzacatenango@image...>\n  * Transient bug in encipher / decipher operation (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12540).\n\n2008-11-14  6.4.6-1 Cristy  <quetzlzacatenango@image...>\n  * MPC image files working again.\n  * coders/wmf.c/lite_font_stringwidth() returns string width (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12528).\n\n2008-11-10  6.4.6-0 Cristy  <quetzlzacatenango@image...>\n  * Fix temporary file leak.\n\n2008-11-18  6.4.5-9 Koshiji Masayuki  <kosiji.masayuki@da.mi...>\n  * Fix bug for RGBO image @ line, plane and partition interlace.\n\n2008-11-18  6.4.5-9 Chris Madison  <madisonblu@gmail...>\n  * Deprecate pixel methods: AcquireImagePixels(), GetImagePixels(), etc.\n  * New pixel methods: GetVirtualPixels(), GetAuthenticPixels(), etc.\n\n2008-11-15  6.4.5-7 Alexander E. Patrakov <patrakov@gmail...>\n  * GPS and multivalued EXIF properties support\n\n2008-11-14  6.4.5-6 Manish Aggarwal <manish@circu...>\n  * Add TransparentPaintImageChroma() to MagickCore and transparentChroma()\n    to Magick++.\n\n2008-11-10  6.4.5-6 Cristy  <quetzlzacatenango@image...>\n  * Correct DPX frame position property label (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12440).\n  * Textures are no longer painted as the background color.\n  * Update both fields of an EXIF resolution.\n  * Support query-font-metrics MSL tag.\n\n2008-11-01  6.4.5-4 Cristy  <quetzlzacatenango@image...>\n  * Do not set image colorspace for the MSL modulate tag.\n\n2008-11-01  6.4.5-3 Cristy  <quetzlzacatenango@image...>\n  * Off by one error when computing affine in DrawAffineImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12391.\n\n2008-10-30  6.4.5-2 Cristy  <quetzlzacatenango@image...>\n  * Fixed local adaptive thresholding  when using an offset (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12371.\n  * Set SetImagePixels() rather than SyncImagePixelCache() to update\n    the pixel cache morphology.\n\n2008-10-26  6.4.5-1 Cristy  <quetzlzacatenango@image...>\n  * Set explicit image format for BlobToImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=12340).\n  * p_thread_t is an aggregate under MinGW.\n\n2008-10-20  6.4.5-0 Cristy  <quetzlzacatenango@image...>\n  * pthread_t can be aggregate so stop treating it like its atomic.\n  * default the WPG image size to 1 top avoid \"no pixels defined in cache\"\n    exceptions.\n\n2008-10-17  6.4.4-8 Anthony  <A.Thyssen@griffith...>\n  * slight modification of the added \"radial-gradient:\" image generator\n    so the radius goes to an edge rather than the corner, allowing more user\n    control based on image size.\n  * fix -raise N to mean -raise NxN\n\n2008-10-15  6.4.4-8 Cristy  <quetzlzacatenango@image...>\n  * Add support for inline images.\n\n2008-10-10  6.4.4-7 Cristy  <quetzlzacatenango@image...>\n  * MinGW supports both Posix threads and Windows critical sections.\n\n2008-10-06  6.4.4-5 Cristy  <quetzlzacatenango@image...>\n  * pthread_self() can be an aggregate value.\n  * Scale pixel quantum to match PNG tRNS range (i.e. 0-255).\n\n2008-10-06  6.4.4-3 Cristy  <quetzlzacatenango@image...>\n  * Set sentinel byte for MVG coder.\n  * fx:standard_deviation returns standard deviation now instead of mean.\n\n2008-10-01  6.4.4-1 Florent Monnier  <monnier.florent@gmail...>\n  * Support radial gradients in DrawGradientImage().\n\n2008-09-26  6.4.4-1 Cristy  <quetzlzacatenango@image...>\n  * Fix memory leak when XMP profile is corrupt.\n  * Support filename references (e.g. convert image-%d.jpg[1-5] ...).\n\n2008-09-25  6.4.4-0 Cristy  <quetzlzacatenango@image...>\n  * Use -remap rather than -affinity.\n  * Don't unregister a module for an image coder signature exception.\n  * Don't assume a monochrome image is colormapped.\n\n2008-09-25  6.4.4-0 Anthony <A.Thyssen@griffith...>\n  * Attempt to fix three image \"composite -displace\" while also allowing use\n    of separate X, Y grayscale displacement maps, or a merged X=red Y=green\n    (later transparency mask will also be added) as discussed in IM Examples,\n    'distortion maps', but for -displace.\n\n2008-09-24  6.4.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fix pixel cache race condition.\n\n2008-09-23  6.4.3-10 Cristy  <quetzlzacatenango@image...>\n  * Fixed an OTB coder bug (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12119).\n\n2008-09-23  6.4.3-8 Peter Fales <psfales@alcat...>\n  * Add NULL terminator to options list to in MontageImageCommand().\n\n2008-09-23  6.4.3-8 Anthony <A.Thyssen@griffith...>\n  * Added -layers TrimBounds  which will adjust the offsets and canvas bounds\n    to fit the current sequence of layered/animated images. The images\n    themselves are not modified only the 'page' meta-data.  As a side-effect\n    all offsets will become positive, with a minimal canvas width/height.\n\n2008-09-22  6.4.3-8 Cristy  <quetzlzacatenango@image...>\n  * Define _FILE_OFFSET_BITS from MAGICKCORE_FILE_OFFSET_BITS.\n\n2008-09-10  6.4.3-7 Anthony <A.Thyssen@griffith...>\n  * String Memory leak from InterpretImageProperties() in \"annotate\"\n    for Command line handling in mogrify.c\n  * Allow percent escapes in both -sparse-color and -distort argument strings.\n  * Fix -alpha to allow Set, Copy, and Extract from command line\n  * Fix -alpha Set so it only clears the alpha when it was previously off\n  * Changed 'AllChannels' to be just the 'real' channels (including K).\n  * Special handling if  +level-colors is given one color, and no separator.\n  * Fix 'matte' flag in DisposeImages() (for -layer dispose)\n\n2008-09-01  6.4.3-7 Cristy  <quetzlzacatenango@image...>\n  * Fix -interpolate / -compose settings.\n  * No need to specify -endian for native floating point format.\n  * Remove small memory leak when cloning image properties (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11981).\n  * The scan delegate requires a device name, not a symbolic link.\n  * Report alpha instead of opacity for the TXT image format (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12002).\n  * Add channel support to -motion-blur.\n  * Set the SVG affine matrix *before* we compute the scale (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12030).\n  * Rely on 'omp critical' in the rare case where OpenMP is enabled but\n    ImageMagick distribution is built without thread support.\n  * Return the correct number of unique colors for colormapped image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12055).\n  * SVG depends on MagickWand for parallel make (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=12099).\n\n2008-09-02 6.4.3-7\n  * Addition of 'BarrelInverse' Distortion\n\n2008-08-27  6.4.3-6 Cristy  <quetzlzacatenango@image...>\n  * Extract / embed namespace for JPEG XMP profiles (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11832).\n  * Deprecate -map and replace with -affinity which supports dither methods.\n  * Set image depth when -depth is fired.\n  * Fix small memory leak in TIFF coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11968).\n\n2008-08-24  6.4.3-5 Cristy  <quetzlzacatenango@image...>\n  * Parallelize the colorspace transforms.\n  * Honor gravity for -extent option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11944).\n\n2008-08-22  6.4.3-3 Cristy  <quetzlzacatenango@image...>\n  * Fixed a memory leak in the TransparentPaintImage() method.\n\n2008-08-20  6.4.3-2 Cristy  <quetzlzacatenango@image...>\n  * Treat -compose as a setting.\n  * Check for depth == 0 in GetQuantumScale() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11921).\n  * Fix CIN coder scanline length (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11922).\n\n2008-08-20  6.4.3-1 Cristy  <quetzlzacatenango@image...>\n  * Add $(MAGICKWAND_LIBS) dependency to the PerlMagick Makefile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11908).\n  * Fix configure script to configure the JBIG delegate library (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11907).\n  * Error in indexed PNG output if number of colors <= 16 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11905).\n\n2008-08-18  6.4.3-0 Cristy  <quetzlzacatenango@image...>\n  * Always reinterpret %[fx:] properties.\n  * Composite based on the composite image compose operator.\n\n2008-08-14  6.4.2-10 Cristy  <quetzlzacatenango@image...>\n  * Add --coder-path and --filter-path options to MagickCore-config to\n    support the Magick Coder and Image Filter kits.\n\n2008-08-17  6.4.2-9 Anthony <anthony@griffith...>\n  * -sparse-color option completed with initial set of methods.\n  * -distort Barrel arguments expanded.\n\n2008-08-14  6.4.2-9 Cristy  <quetzlzacatenango@image...>\n  * The -draw option no longer returns an error when for # like .6 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11879).\n\n2008-08-14  6.4.2-9 Cristy  <quetzlzacatenango@image...>\n  * New dithering selection option, -dither Floyd-Steinberg or\n    -dither Riemersma.\n\n2008-08-10  6.4.2-8 Anthony <anthony@griffith...>\n  * Added new distort \"Polar\" and \"DePolar\" due to Forum Discussions\n\n2008-08-07  6.4.2-8 Cristy  <quetzlzacatenango@image...>\n  * Change MPEG delegate from mpeg2decode/mpeg2encode to ffmpeg (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11827).\n  * Extract embedded XMP and EXIF profiles froma Photoshop resource block.\n  * Support -compose option in the compare program.\n\n2008-08-04  6.4.2-7 Cristy  <quetzlzacatenango@image...>\n  * Support -fx scientific-notation (e.g. '2.0*3.81469e-06').\n  * Substitute DistortImage() with 'AffineProjectionDistortion' for\n    the older DrawAffineImage() in AffineTransformImage().\n  * Apply Sam Hocevar's patch to replace  Hilbert-Peano curve dithering with\n    Floyd Steinberg.\n  * Added -virtual-pixel method VerticalTile as a complement to HorizontalTile\n\n2008-08-02  6.4.2-6 Anthony <anthony@griffith...>\n  * Added -virtual-pixel method HorizontalTile suitable for generating 360\n    degree Arcs and Polar Distorts.\n\n2008-07-31  6.4.2-6 Cristy  <quetzlzacatenango@image...>\n  * Patch -fx to properly recognize maxima and minima.\n  * Add channel specifier to -fx depth, mean, maxima, minima, and\n    standard_deviation (e.g. depth.r).\n  * Properly append .magick to the USERPROFILES path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11806).\n\n2008-07-30  6.4.2-6 Anthony <anthony@griffith...>\n  * Added a  \"-set option:distort:scale\"  which scales the output 'view'\n    by the amount given.  This is directly useful for doing 'super-sampled'\n    distorts, just set this, the scale the result back to a normal size.\n\n2008-07-27  6.4.2-5 Anthony <anthony@griffith...>\n  * Rewrite on coefficient handling for DistortImages so allow for generation\n    by other operators (SparseColor), and addition of verbose output of\n    equivalent -fx functions for DistortImages to report of the internal\n    coefficients that was calculated, and who they are used.\n  * Initial implementation of SparseColor for interpolated gradients from\n    sparsely separated points of color (or possibly other forms of arguments)\n  * New distortion Barrel as defined by Helmut Dersch options A,B,C,D\n    on his web page  http://www.all-in-one.ee/~dersch/barrel/barrel.html\n    And as developed by Fred WeinHaus in his PinBarrel script\n\n2008-07-20  6.4.2-5 Cristy  <quetzlzacatenango@image...>\n  * Certain corrupt GIF images no longer hang (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11723).\n  * Read more than one image (if they exist) from DJVU image files.\n  * Don't set image depth in histogram coder (references\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11752).\n\n2008-07-17  6.4.2-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed cache nexus threading problem to avoid spurious assertions when\n    calling the DistortImage() method.\n\n2008-07-17  6.4.2-4 Anthony <anthony@griffith...>\n  * New distortion  Shepards which provide semi-localized distorts of control\n    points within an image, as first developed for IM by Frew Weinhaus in his\n    ShapeMorph script.   http://www.fmwconcepts.com/imagemagick/shapemorph/\n    It's almost like taffy pulling!\n\n2008-07-12  6.4.2-2 Anthony <anthony@griffith...>\n  * Separate coefficient calculation from DistortImages (future development)\n  * Perspective and Bilinear Distortions fallback to Affine\n    when less than 4 point pairs are provided.\n  * Affine Distortion now handles 2 point pairs (SRT of a single line)\n    and a simple translation if only a single point pair is provided.\n  * Added 'verbose' output of some of the distortion equations generated\n  * Initial addition of polynomal distortion (incomplete - not working yet)\n\n2008-06-29  6.4.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add log2 and round as -fx operators.\n  * Add log and round as -evaluate operator.\n  * Add -deskew option to straighten an image.\n\n2008-06-22  6.4.2-1 Cristy  <quetzlzacatenango@image...>\n  * Use the source image interpolation method when drawing an affine image.\n\n2008-06-24  6.4.2-1 Anthony <anthony@griffith...>\n  * Added new operator  +/-level-colors which will 'level' images based\n    on colors to use for the black and white points. This lets to adjust\n    the image in terms of mapping the given colors from/to black and white\n    respectively.\n\n2008-06-23  6.4.2-0 Christian Lackas <christian@lacka...>\n  * Fix a problem with calling mpeg2encode with parameters (%o/%i) in wrong\n    order.\n\n2008-06-22  6.4.2-0 Cristy  <quetzlzacatenango@image...>\n  * Refactor additional ImageMagick algorithms for OpenMP support.\n\n2008-06-25  6.4.1-9 Cristy  <quetzlzacatenango@image...>\n  * Add pow as an -evaluate operation, using normalized values\n\n2008-06-18  6.4.1-9 Anthony <anthony@griffith...>\n  * Added a  LevelizeImageChannels() which is similar to LevelImageChannels()\n    Function maps black and white values to the given level values.\n    Rather than mapping the given level values to black and white.\n    Basically a 'reverse-level' function, with different input args.\n  * Set  +level  or a '!' flag in -level or LevelImage() to call\n    the new 'reverse-level' function LevelizeImageChannels().\n  * More work on IsMagickColorSimilar() to fix relationship between\n    transparent-black and opaque-black, which was matched as 'similar'.\n    Also attempts to fix 'K' channel handling for CMYK colorspace.\n    More work on this to come.\n\n2008-06-25  6.4.1-9 Cristy  <quetzlzacatenango@image...>\n  * The TXT format correctly reports alpha channel (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11478).\n  * MONOTCHROME1 Dicom images are not longer inverted (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11492).\n\n2008-06-13  6.4.1-8 Anthony <anthony@griffith...>\n  * Fixed IsMagickColorSimilar() as used by -opaque and -transparent\n    so as to understand that the Hue Channel is cyclic by nature\n\n2008-06-08  6.4.1-8 Cristy  <quetzlzacatenango@image...>\n  * The -sketch option is working again (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11454).\n\n2008-06-08  6.4.1-7 Cristy  <quetzlzacatenango@image...>\n  * More algorithms refactored to support a threaded cache view.\n  * EPS2 output only 1/3 of image when using LZW or rle compress (reference\n    http://www.imagemagick.org/discourse-server/viewforum.php?f=3).\n  * ISO C++ 1998 does not support 'long long' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11405).\n  * Patch GetMagickMemoryHandlers() to return the properly return the memory\n    handler addresses.\n  * Generate histogram comment if # unique colors exceed 1024 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11434).\n\n2008-06-03  6.4.1-6 Marton Bokor  <marton.bokor@gfthu....>\n  * Reading EMF files containing non-ascii characters no longer fails for\n          UTF8 encoded paths on Windows XP.\n\n2008-06-03  6.4.1-6 Cristy  <quetzlzacatenango@image...>\n  * The -colorspace option is an operator, not a setting.\n\n2008-05-31  6.4.1-5 rsnel <rik@snel....>\n  * gif.c misreads Gifs in which LZW codes are split across three datablocks.\n\n2008-05-31  6.4.1-4 Matthew Clark <mclark@gorge...>\n  * Patches to the JPEG and DCM coders to fix a few problems reading\n    certain DCM image types.\n\n2008-05-15  6.4.1-4 Cristy  <quetzlzacatenango@image...>\n  * Interpreting the -set option is no longer delayed.\n  * Add AcquireCacheViews() and DestroyCachewViews() to the API.\n  * Call DrawAffineImage() instead of CompositeImage() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11288).\n  * Throw exception for TIFF compression not support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11289).\n  * The +opaque option now recognizes its required argument (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11298).\n  * The -background and -virtual-pixel settings are now applied correctly\n    across parenthesis.\n  * Only reset the exception signature if the relinquish memory is MagickTrue.\n  * Correct recolor equation for computing opacity (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11346).\n  * Set midpoint when scaling JP2 images.\n  * Semaphores must be passed by reference when destroyed for reliable thread\n    locks.\n  * Updated Matlab coder (thanks to Jaroslav Fojtik).\n\n2008-05-13  6.4.1-3 Cristy  <quetzlzacatenango@image...>\n  * MagickGetResource(): resources are MagickSizeType not unsigned long.\n\n2008-05-11  6.4.1-2 Cristy  <quetzlzacatenango@image...>\n  * Import: properly handle a hierarchy of subwindows under X11.\n  * Refactor quantum pixel processor to improve ease of use and speed.\n\n2008-05-09  6.4.1-2 Leonardo de Paula Rosa Piga <lpiga@terra...>\n  * OpenMP patch for sepia-tone effect.\n\n2008-05-08  6.4.1-2 Bruno Cardoso Lopes <bruno.cardoso@gmail...>\n  * OpenMP patch for NormalizeImage() & TintImage()\n\n2008-05-06  6.4.1-2 <cristiannomartins@gmail...>\n  * OpenMP patch for GetImageChannelDepth().\n  * Set depth to 32 when saving MIFF HDRI image files.\n\n2008-05-05  6.4.1-2 <joao.vita@gmail...>\n  * OpenMP patch for OilPaintImage Function\n\n2008-05-05  6.4.1-2 Sean Patrick Burke  <seanburk@gmail...>\n  * Update IPLab coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=11200).\n\n2008-05-02  6.4.1-1 Cristy  <quetzlzacatenango@image...>\n  * Return correct result for -fx luminence.\n  * Restore missing break so that PGM images remain PGM.\n  * Speed up the processing of ASCII PNM files.\n  * Return the correct number of MNG images for PingImage().\n\n2008-05-01  6.4.1-0 Cristy  <quetzlzacatenango@image...>\n  * Remove C++ style comments from source.\n  * Center motion blur kernel.\n  * Reenable dithering for -monochrome option.\n\n2008-04-24  6.4.0-11 Cristy  <quetzlzacatenango@image...>\n  * For color reduction, use maximum tree depth if image has 1024 or less\n    unique colors.\n  * Use a uniform convolution filter for motion blur (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11122).\n  * Add 'mean' and 'std' symbols to the Fx expression parser.\n\n2008-04-20  6.4.0-10 Chris Madison  <madisonblu@hotma...>\n  * Updated to the latest autoconf/automake/libtool scripts.\n  * Default to HSL colorspace when modulating (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=11073).\n  * The -regard-warnings option properly returns a program status of 1 if and\n    only if a warning or error exception is thrown.\n  * Report 'no clip path defined' exception for -clip-path option (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11098).\n\n2008-04-16  6.4.0-8 Cristy  <quetzlzacatenango@image...>\n  * Distinguish between pre and post processing of image list options.\n  * Return MagickTrue if InvokeDynamicImageFilter() does not generate an\n    exception (reference\n                http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=11065).\n\n2008-04-16  6.4.0-7 Glenn Randers-Pehrson <glennrp@image...>\n  * Instead of masking the PNG tRNS values when reducing from 16-bit,\n    set image->matte to MagickFalse and emit a warning.  This will produce\n    behavior similar to that of libpng-1.2.27 (and libpng-1.2.19 and earlier).\n\n2008-04-12  6.4.0-7 Cristy  <quetzlzacatenango@image...>\n  * Fix fault for animate -window root image.gif.\n  * Use GetImagePixels() rather than SetImagePixels() when making multiple\n    passes and setting image pixels (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=11022).\n\n2008-04-10  6.4.0-6 Cristy  <quetzlzacatenango@image...>\n  * Compile error in coders/avi.c when JPEG delegate library is unavailable.\n\n2008-04-09  6.4.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Mask the PNG tRNS values when reducing from 16-bit, in accordance with\n    the PNG specification, instead of scaling them.\n\n2008-04-09  6.4.0-5 Glenn Randers-Pehrson <glennrp@image...>\n  * Revised png.c to avoid saving unknown chunk types that will never\n    be used later.  This prevents the vulnerability described in\n    CVE-2008-1382, with respect to all unknown chunks except vpAg.\n    To handle an invalid, zero-length vpAg chunk properly will require\n    libpng-1.2.27 or later.\n\n2008-04-04  6.4.0-5 Cristy  <quetzlzacatenango@image...>\n  * Use mplayer delegate if ImageMagick does not grok AVI op code.\n  * Use proper rounding for the -fx intensity expression.\n\n2008-03-26  6.4.0-4 Cristy  <quetzlzacatenango@image...>\n  * Fix +swap option so it no longer throws an assertion.\n  * Return correct min/max for grayscale JPEG images (e.g. -format %[min]).\n\n2008-03-26  6.4.0-1 Cristy  <quetzlzacatenango@image...>\n * Rewrote patch so that writing pyramid TIFF images no longer fails if a\n   tile size is specified (e.g. ptif:image.tif[128x128]).\n * Malformed use of caption no longer consumes memory (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10914).\n * Don't run Ghostscript twice (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10922).\n\n2008-03-21  6.4.0-0 Cristy  <quetzlzacatenango@image...>\n  * SpreadImage() no longer introduces noise into the resulting image (reference\n                http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10892).\n  * Properly handle min-is-white TIFF gray scale images.\n  * Use CompositeImage() instead of DrawAffineImage() if the affine expansion\n    factor is 1.0.\n\n2008-03-20  6.3.9-10 Cristy  <quetzlzacatenango@image...>\n  * Writing pyramid TIFF images no longer fails if a tile size is specified\n    (e.g. ptif:image.tif[128x128]).\n  * Reset page geometry when interactively cropping an image with the display\n    program.\n\n2008-03-18  6.3.9-9 Cristy  <quetzlzacatenango@image...>\n  * With a single swap argument should swap the image with the *last* image.\n\n2008-03-16  6.3.9-8 Cristy  <quetzlzacatenango@image...>\n  * Make sure we don't sync a blob after it has been closed.\n\n2008-03-14  6.3.9-7 Cristy  <quetzlzacatenango@image...>\n  * Patch mpeg:encode delegate to properly produce an MPEG image sequence.\n\n2008-03-11  6.3.9-6 Cristy  <quetzlzacatenango@image...>\n  * Support both GTK and CAIRO interfaces to RSVG (reference\n    ttp://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=10802).\n  * Display colormapped PNG images with alpha properly (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10819).\n\n2008-03-09  6.3.9-5 Cristy  <quetzlzacatenango@image...>\n  * Define inline to _magickcore_inline (to satisfy HP's aCC compiler).\n\n2008-03-08  6.3.9-4 Cristy  <quetzlzacatenango@image...>\n  * The rsvg delegate library depends on cairo-svg.\n  * Account for min-is-white 8-bit gray TIFF images.\n\n2008-02-29  6.3.9-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for the Postable Document Archive Format.\n  * Add support for Braille images.\n  * Add support for DDS images (contributed by Bianca van Schaik).\n  * Add GetImageAlphaChannel() method.\n  * PSD clipping paths are once again recognized.\n\n2008-02-24  6.3.9-1 Cristy  <quetzlzacatenango@image...>\n  * Return the actual image format for HTTP: or FTP: format (reference\n        http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10715).\n  * Fix so image.quantize(true) returns error as expected (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10735).\n\n2008-02-20  6.3.9-0 Cristy  <quetzlzacatenango@image...>\n  * Fixed a small memory leak (8 bytes) in TransformImages().\n  * Render to Cairo surface rather than a GDK buffer when rendering SVG.\n  * Identify now reports both actual and reported image depths (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10716).\n\n2008-02-17  6.3.8-10 Cristy  <quetzlzacatenango@image...>\n  * Speed up converting large PDF/PS images when only selecting a few pages\n    (e.g. pdffile.pdf[195-199]).\n  * Deprecate HSLTransform() and TransformHSL().\n\n2008-02-16  6.3.8-9 Cristy  <quetzlzacatenango@image...>\n  * Fix Magick++-config script to reflect the MagickWand / MagickCore\n    dependencies.\n\n2008-02-14  6.3.8-7 Cristy  <quetzlzacatenango@image...>\n  * Promote colormapped to truecolor images when enciphering.\n\n2008-02-08  6.3.8-6 Cristy  <quetzlzacatenango@image...>\n  * Add EncipherImage() / DecipherImage() methods.\n  * Add -encipher / -decipher options to the command-line utilities.\n\n2008-02-03  6.3.8-5 Cristy  <quetzlzacatenango@image...>\n  * New Unix/Linux refactoring (should be transparent since changes are\n    reflected in Magick-config and ImageMagick.pc pkg-config files):\n      /usr/local/include => /usr/local/include/ImageMagick\n      libMagick => libMagickCore\n      libWand => libMagickWand\n      Magick-config (deprecated) => MagickCore-config\n      Wand-config (deprecated) => MagickWand-config\n      Add Magick++-config, MagickCore.pc, MagickWand.pc, Magick++.pc\n\n2008-01-28  6.3.8-3 Cristy  <quetzlzacatenango@image...>\n  * Liquid rescale limits the final size to twice the original size (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=10536).\n  * Read EXIF data in TIFF images; writing is pending until we can figure out\n    how to use the libtiff delegate library to write EXIF data.\n\n2008-01-24  6.3.8-2 Cristy  <quetzlzacatenango@image...>\n  * Add support for liquid rescaling (e.g. -liquid-rescale).\n  * Support a ^ meta character in an image geometry (.e.g\n    convert 640x480.png -resize 240^ returns a 320x240 result).\n\n2008-01-20  6.3.8-1 Cristy  <quetzlzacatenango@image...>\n  * Fix transient bug where \"identify -format '%w;%[exif:Model]'\" failed to\n    return camera model number.\n\n2008-01-14  6.3.8-0 Cristy  <quetzlzacatenango@image...>\n  * Monochome EPS3 images are no longer corrupt (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10422).\n  * Eliminate memory corruption with broken PICT image (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10447).\n  * Return a Grayscale colorspace for grayscale DPX image (previously\n    returned Log colorspace).\n  * Fix -g option for PCL6 support (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10462).\n\n2008-01-08  6.3.7-10 Cristy  <quetzlzacatenango@image...>\n  * Only read ICON alpha mask if BPP is <= 16.\n  * Add support for +opaque and +transparent (requested by Anthony).\n  * Throw an exception *before* we call wmf_api_destroy() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10420).\n\n2008-01-01  6.3.7-9 Cristy  <quetzlzacatenango@image...>\n  * Use explicit format specifier to render transparent Adobe Illustrator\n    files (i.e. convert ai:image.ai image.png).\n  * Set RSVG base URI (patch provided by tsdineen).\n\n2007-12-20  6.3.7-7 Cristy  <quetzlzacatenango@image...>\n  * `Magick-config --version` returns Q16 instead of\n    Q@MAGICKCORE_QUANTUM_DEPTH@.\n  * Permit commas in numbers in certain locales (e.g. german +100,000).\n\n2007-12-13  6.3.7-5 Cristy  <quetzlzacatenango@image...>\n  * Added an exception reason to BlobToImage() in the event an image has no\n    magic number and neither the image magick or filename is set.\n  * Do not pass PhotoYCC data thru gamma-corrected lookup-table.\n  * Fix bug in GetEXIFProperty() (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10300).\n\n2007-12-12  6.3.7-4 Cristy  <quetzlzacatenango@image...>\n  * Adding comments to your image is now possible with the display program.\n\n2007-12-09  6.3.7-3 Anthony <anthony@griffith...>\n  * Adjusted -clut multiplyer for correct handling of\n    \"-interpolation Integer\" in color lookup.\n\n2007-12-01  6.3.7-3 Cristy  <quetzlzacatenango@image...>\n  * Fix 'insufficient image data' for DCM format (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10227).\n  * Force a colormapped image if Palm bits-per-pixel < 16.\n  * Fix multiple problems with Palm Data Base reader (patch from\n    1tms@gmx.d...).\n  * Do not exit after first image with the display --immutable option.\n  * Update autoconf/automake/libtool configuration files.\n  * Add support for resource limit units (e.g. -limit memory 16mb).\n  * Return original image if gaussian blur sigma is 0.0.\n  * Colormapped multi-image PDF's are no longer corrupt (reference\n    https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10258).\n\n2007-11-27  6.3.7-2 Anthony <anthony@griffith...>\n  * Finalisation of new resize filters, \"Lagrange\" self-windowing filter\n    now adjusts automatically with different support window size.\n  * Added \"Bohman\" (another 2'rd order cosine function) and \"Bartlett\"\n    (triangluar) resize windowing filters.\n  * Adjusted -clut to use a grayscale image (with no alpha) to select colors\n    from the Lookup Table image.\n\n2007-11-26  6.3.7-2 Cristy  <quetzlzacatenango@image...>\n  * Not all DCM tags were being saved as image attributes (patch provided by\n    jcupitt@gmail...).\n  * Normalize pixel values when quantum format is floating-point.\n  * Initialize the pixel sum to zero when averaging image pixels.\n\n2007-11-23  6.3.7-1 Anthony <anthony@griffith...>\n  * Bug fix in height calculation for -layers merge operation\n\n2007-11-02  6.3.7-0 Cristy  <quetzlzacatenango@image...>\n  * Add support for SCT grayscale images.\n  * Fixed transparency bug for the ICO image format.\n  * Fixed small memory leak in the caption and label coders.\n  * Fixed -threshold option to return all white for -threshold 0 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10126).\n\n2007-11-06  6.3.6-10 Chris Madison  <madisonblu@hotma...>\n  * Corrected CGM delegate command in config/delegate.xml.\n\n2007-11-05  6.3.6-9 Chris Madison  <madisonblu@hotma...>\n  * Reclassified X server open error from fatal to non-fatal.\n  * New SetImageAlphaChannel() method to activate, deactivate, reset, or\n    set the image alpha channel.\n  * Patch for Scanalytics IPLab image format for non 8-bit images\n    (contributed by Sean Burke).\n\n2007-11-04  6.3.6-8 Chris Madison  <madisonblu@hotma...>\n  * Remove ctrl-M characters on in various source files.\n  * Fix signature for Magick++ averageImages() regression tests for HDRI.\n  * Only invoke PerlMagick x11 regression test if DISPLAY variable is set.\n\n2007-11-03  6.3.6-7 Chris Madison  <madisonblu@hotma...>\n  * MAGICK_ERX_SRCS should be MAGICK_EXR_SRCS in coders/Makefile.am.\n\n2007-11-02  6.3.6-6 Cristy  <quetzlzacatenango@image...>\n  * Upgrade to FPX version libfpx-1.2.0.14 (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10041).\n  * Modules are searched first in the directories specified by the environment\n    variables, and then -- if the desired module is not found -- in the\n    compiled-in path.  (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=10039).\n\n2007-11-01  6.3.6-5 Cristy  <quetzlzacatenango@image...>\n  * Update FPX regression test reference images.\n  * Fixed Magick++ compile error for Sun Studio 10 compiler.\n\n2007-10-25  6.3.6-4 Cristy  <quetzlzacatenango@image...>\n  * The -equalize option now respects the -channel option.\n\n2007-10-23  6.3.6-4 Anthony <anthony@griffith...>\n  * Additional Filters:  Welsh, Parzen, Lagrangian\n  * Addition of Cubic filter B,C controls\n  * 'verbose' filter plotting output using  -define \"filter:verbose\"\n\n2007-10-20  6.3.6-3 Anthony <anthony@griffith...>\n  * Further expansion and handling of filters with expert options.\n    -filter selects from a table of standard filter settings, while\n    expert options allow complete selection of filter, windowing, support\n    and blurring options.  Includes automatic switch from Sinc to Bessel\n    for operators using 2-dimensional cylindrical filter, rather than\n    two pass 1-dimensional orthogonal filters.\n\n2007-10-14  6.3.6-3 Cristy  <quetzlzacatenango@image...>\n  * Obsolete -support (set filter blur factor)\n  * Expansion to add -set/define filter options\n\n2007-10-12  6.3.6-2 Anthony <anthony@griffith...>\n  * Least Squares coordinate handling added for -distort methods Affine,\n    Perspective, Bilinear.   This allows for more than the minimal number of\n    coordinates to be used to 'fit' a distortion function to an image.\n    This addition will allow the use of image registration to generate\n    panorama overviews and better geographical coordinate correction.\n  * Consolidated the similar methods FlattenImage() and MosaicImage()\n    into a new layers function MergeImageLayers() method, adding 'flatten'\n    and 'mosaic' layer methods.\n  * Addition of another similar layers method 'merge' which 'unlocks' the\n    normal flatten/mosaic layer merger from the origin, The resulting image\n    will have a virtual canvas of minimal size with an offset. Also images\n    with negative offsets will not be clipped by the 'merge' form of the\n    command.  This was created for better layering of distorted images, such\n    as panorama overlays.\n  * Bug fix in handling transparency for EWA resampling.\n  * Access to Resize Filter Functions from resize.c (for resample.c)\n    with possible future filter sources... Acquire/Destory/Call ResizeFilter()\n  * All resize filters added to resampling, but filter handling is incomplete.\n\n2007-10-05  6.3.6-2 Cristy  <quetzlzacatenango@image...>\n  * The box filter no longer produces a black grid when resizing an image\n    under Mac OS X.\n  * Respect cropbox for PDF with a subimage specification (e.g.\n        image.pdf[1-3]).\n  * Detect proper PDF bounding box when offsets are negative.\n\n2007-10-02  6.3.6-1 Cristy  <quetzlzacatenango@image...>\n  * Speed up the Fx interpreter.\n  * Use ULL not ui64 for MinGW 64-bit constants.\n  * Call SyncCacheView() instead of SyncImagePixels() in WaveImage().\n  * Close all references to a pixel cache on disk before removing the temporary\n          file as required under Windows.\n\n2007-09-29  6.3.6-0 Anthony <anthony@griffith...>\n  * Added Scaling 'derivatives' to -distort Arc, so image arcing is now\n    sharp and clear as you approach the center of the distort.\n  * Added  \" -set option:distort:viewport 'geometry' \" special option\n    that can be used to override the output image size and offset.\n  * Fixed experimental use of -filter and -support in Resampling (more later).\n  * Changed order for coordinate arguments in -distort (for later leastsq\n    multiple coordinate distortion function fitting)\n\n2007-09-22  6.3.6-0 Cristy  <quetzlzacatenango@image...>\n  * Check the API version and quantum depth before loading a coder module or\n          image filter (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9780).\n  * Add exception to the image filter signature.\n  * Get the execution path under Mac OS X.\n  * TIFFTAG_STRIPBYTECOUNTS requires a uint32 pointer (magick/compress.c).\n  * Fixed memory leak in CloneString() (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9763).\n  * Set S_IRUSR | S_IWUSR | S_IRGRP mode when writing a file in\n    CopyDelegateFile().\n\n2007-09-18  6.3.5-9 Anthony <anthony@griffith...>\n  * Bug fix for +distort in Perspective, also effected PerspectiveProjection\n\n2007-09-17  6.3.5-10 Cristy  <quetzlzacatenango@image...>\n  * Replace all InterpolatePixelColor() calls to use the ResamplePixelColor()\n    method instead.\n  * Map the display program pan icon window for each oversized image.\n  * The ufraw delegate does not like quotes around the output filename.\n  * Adjust the sensitivity of a few PerlMagick tests to pass the validation on\n    a 64-bit FreeBSD system.\n  * The -level option now works properly for colormapped images.\n  * Allow Extrapolated blending of images using -blend\n       http://netpbm.sourceforge.net/doc/extendedopacity.html\n\n2007-09-12  6.3.5-9 Anthony <anthony@griffith...>\n  * Major Addition,  Area Resampling Functions, (scaled interpolation)\n    for pixel lookup in Distortion functions.  This improves the look in\n    areas of minification enormously, especially in situations of infinite\n    tiling and horizon views.  All virtual pixel methods have been handled\n    to minimise computation time involved with area resampling.  To use the\n    new function distortions need to be able to determine scaling vectors\n    (distortion function derivatives) for correct working.  All\n    -distort methods, except Arc, uses scaled area resampling.\n  * Improvements to perspective distort method, to include the correct\n    differentiation between the 'ground' on which the image lies, and the\n    'sky', the color of which can be set using the -mattecolor setting\n    (as the distortion invalid pixel color). Background color is retains\n    for surrounding ground areas. The horizon is also correct anti-aliased\n    and transparent colors are also allowed, allowing you to add backdrops\n    of gradients and patterns.\n\n2007-09-04  6.3.5-9 Cristy  <quetzlzacatenango@image...>\n  * Read/Write Scanalytics IPLab image format (contributed by Sean Burke).\n  * Patched ReadBlobString() to fix a off-by-one vulnerability (alert from\n    iDefense).\n  * Patched ReadDIBImage() to fix a sign extension vulnerability (alert from\n    iDefense).\n  * Patched AllocateImageColormap() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDCMImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDIBImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadXBMImage() to fix an integer overflow vulnerability\n    (alert from iDefense).\n  * Patched ReadDCMImage() to fix an denial of service vulnerability\n    (alert from iDefense).\n  * Patched ReadXCFImage() to fix an denial of service vulnerability\n    (alert from iDefense).\n  * If image size changes, don't trust DPX orientation attributes.\n\n2007-09-04  6.3.5-9 Gozer404\n  * Add French to the messaging system (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=9601).\n  * Add -fopenmp to MAGICK_PCFLAGS (reference\n   http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9608).\n\n2007-08-14  6.3.5-7 Cristy  <quetzlzacatenango@image...>\n  * Add -alpha {activate,deactivate,reset} option to activate, deactivate, or\n    reset the alpha channel.\n  * Render proper image labels for VID coder.\n  * Resolved a conflict for the -list option.  Use -list font to list\n          ImageMagick fonts and -list type to list image types.\n  * Catch any errors returned by pthread_mutex_init() (problem report\n    from devman@gmx-t...).\n  * TransformHSL() returns a proper hue component.\n  * Added -clut option and the ClutImage() method.\n  * Fix glyph memory leak in AnnotateImage (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9523).\n  * Rename analyze.c to Analyze.c (reference\n    ttp://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9538).\n\n2007-08-07  6.3.5-6 Anthony  <anthony@griffith...>\n  * Enabled use of +distort to auto resize destination image to 'bestfit'\n    the distorted input image.  This also enabled the use of virtual canvas\n    offsets in source and destination images for most distortion methods.\n\n2007-08-05  6.3.5-6 Cristy  <quetzlzacatenango@image...>\n  * Remove atexit in Magick++ code to avoid possible client crash (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9270).\n\n2007-08-01  6.3.5-5 Cristy  <quetzlzacatenango@image...>\n  * Read/Write Scanalytics IPLab image format (contributed by Sean Burke).\n\n2007-07-30  6.3.5-5 Anthony  <anthony@griffith...>\n  * Added -distort arc.  This update also allows the destination image\n    size and offset to be set according to the specific distortion being\n    applied.\n\n2007-07-29  6.3.5-5 Cristy  <quetzlzacatenango@image...>\n  * Set the -polaroid border color with the -bordercolor option.\n\n2007-07-25  6.3.5-4 Cristy  <quetzlzacatenango@image...>\n  * Remove extraneous break statement so -type option properly sets the\n    image_info->type member (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9261).\n\n2007-07-21  6.3.5-4 Anthony  <anthony@griffith...>\n  * Allow the use of optional arguments in -distort SRT\n\n2007-06-29  6.3.5-0 Anthony  <anthony@griffith...>\n  * Initial addition of three Affine Distortions to -distort with the affine\n    mapping defined by the use of;  an Affine Matrix, Coordinates of Triangles,\n    or separate Scale-Rotate-Translate actions.\n\n2007-06-18  6.3.5-0 Cristy  <quetzlzacatenango@image...>\n  * Fix X11 font ascender.\n  * Add -distort option.\n  * Add random noise option (e.g. +noise random).\n  * Many internal algorithms are now threaded to take advantage of speed-ups\n    offered by the new dual and quad-core processor technologies.\n    and quad-core processor technology.\n  * Tiff images in the LAB colorspace are no longer identified as RGB\n    (reference http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9015).\n  * Update image color_profile and iptc_profile members in the JPEG coder\n    (reference http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9063);\n\n2007-06-13  6.3.4-10 Cristy  <quetzlzacatenango@image...>\n  * Fix composite mask bug (reference\n    http://www.imagemagick.org/Usage/bugs/composite_mask/).\n  * Speed up GetPixelOpacity() method (patch from seth@price...).\n  * Set icon image width/height before allocating the image colormap.\n  * Remove Photoshop string segment from JPEG profile (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=9006).\n\n2007-06-11  6.3.4-9 Cristy  <quetzlzacatenango@image...>\n  * Converting a jpg to pdf is creating an empty pdf object (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8954).\n  * Respect the '-set type:hinting off option' (bug report from Richard\n    Jones).\n  * WritePSDImage vulnerable to exploitable heap corruption (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8967).\n\n2007-06-09  6.3.4-8 Cristy  <quetzlzacatenango@image...>\n  * SetMagickRegistry() post-increment the value 'id' (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8944).\n\n2007-06-02  6.3.4-6 Cristy  <quetzlzacatenango@image...>\n  * Read/write 10 & 12-bit packed DPX images.\n  * Reduce stack requirements for messaging system.\n  * Small memory leak for raw profiles in the PNG coder.\n\n2007-06-01  6.3.4-5 Glenn <glennrp@image...>\n  * Added GIF, JPEG, and PNG interlace types.  For backward compatibility,\n    you can continue to use \"-interlace Plane\" to request these.\n\n2007-04-30  6.3.4-0 Anthony  <anthony@griffith...>\n  * Fixed minor bug in the 'curl' for Polaroid of very non-square images.\n\n2007-06-01  6.3.4-5 Cristy  <quetzlzacatenango@image...>\n  * Set min-is-white for Group4-compressed PDF.\n  * Add PaintFloodfillImage() method.\n\n2007-05-30  6.3.4-4 Cristy  <quetzlzacatenango@image...>\n  * Add MEPP metric to compare program.  Returns the mean error per pixel\n    along with the normalize mean and maximum error.\n  * Attach an XMP profile to an image (e.g.\n    convert input.tif -profile xmp:metadata.xmp output.tif).\n\n2007-05-22  6.3.4-3 Cristy  <quetzlzacatenango@image...>\n  * Fixed mogrify conversions with -format and -path (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=9127).\n\n2007-05-15  6.3.4-2 Cristy  <quetzlzacatenango@image...>\n  * SVG style element was not always parsed properly.\n  * Do not dither when the number of unique colors is already less than the\n    maximum.\n  * Return normalized PAE metric (compare utility).\n\n2007-05-03  6.3.4-1 Cristy  <quetzlzacatenango@image...>\n  * Add support for PFM images.\n  * Check for corrupt EXIF image profiles.\n  * Writing JPEG YCbCr TIFF images no longer faults (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8896).\n\n2007-04-30  6.3.4-0 Anthony  <anthony@griffith...>\n  * Fixed minor bug for crop missed images and 'background' GIF disposal.\n\n2007-04-28  6.3.4-0 Glenn  <glennrp@image...>\n  * Added profile support to the GIF decoder/encoder.  They are stored\n    as GIF Application Extensions.  Known extensions include existing ICCRGB1\n    (for ICC profiles) and new MGKIPTC0 and MGK8BIM0 (for IPTC and 8BIM\n    profiles).  Unknown extensions found in GIF files are read as gifappNNN.\n\n2007-04-28  6.3.4-0 Anthony  <anthony@griffith...>\n  * Invert Opacity change for user defined ordered dither threshold maps,\n    so that 'off' map is transparent, and 'on' is opaque.\n\n2007-04-24  6.3.4-0 Anthony  <anthony@griffith...>\n  * Added an initial Coalesce Images, and a final +map local colortable\n    optimization to the -layers Optimize method, for a simple to use\n    GIF optimization operation.  (more work to come)\n\n2007-04-22  6.3.4-0 Cristy  <quetzlzacatenango@image...>\n  * Properly set the virtual canvas of a multi-frame GIF image sequence.\n  * Add AcquireOneVirtualPixel() method.\n  * Set Log colorspace properly when writing DPX images.\n  * Add -tile-offset option.\n  * Add support for the EXR image format.\n  * Improve support for DPX images.\n  * Add --enable-hdri option to the configure script.\n  * Add support for high dynamic-range images (HDRI).\n\n2007-04-20  6.3.3-9 Peter Hull  <peterhull90@gmail...>\n  * Improve support for writing multiple image icons.\n\n2007-04-18  6.3.3-9 Anthony  <anthony@griffith...>\n  * Separated -layers Optimize from -layers OptimizeFrame to allow\n    the former expansion into a general (multiple method) optimizer\n    of GIF animations\n  * merged -layers OptimizeTransparency into -layers Optimize method\n\n2007-04-12  6.3.3-8 Chris Madison  <madisonblu@hotma...>\n  * Fix fault whem comparing a colormapped image with a non-colormapped one.\n  * Fix race condition when spawning delegate programs.\n  * TIFF JPEG now respects the -quality compression setting.\n  * The -fx option now properly groks the logical and operator.\n  * DPX tilestamp property should be timestamp.\n\n2007-04-13  6.3.3-7 Anthony  <anthony@griffith...>\n  * Added GravityAdjustGeometry() to \"geometry.c\" to adjust geometry settings\n    according to given gravity and canvas area it applies to. This is for\n    code simplification throughout MagickCore.\n\n2007-04-09  6.3.3-6 Anthony  <anthony@griffith...>\n  * Fixed CoalesceImages() to reset virtual canvas info on second and later\n    frames.   Other animation handlers may also need to reset virtual canvas\n    sizes to match the first frame, as well.\n\n2007-04-06  6.3.3-6 Anthony  <anthony@griffith...>\n  * Addition of a CompositeImages() \"layer.c\" function to compose two\n    separate image lists together (with a virtual canvas offset) in three\n    different ways, depending on the size of the lists.\n  * A 'hack' for command line use (the two lists separates by the special\n    \"NULL\" image, which is junked) has also been added. Specifically...\n    \"-layers Composite\".\n\n2007-04-04  6.3.3-6 Anthony  <anthony@griffith...>\n  * Add -layers RemoveDups method to remove duplicate sequential images in\n    coalesced animations.\n  * Add -layers RemoveZero method to remove images with a zero time delay\n    (with no action and a warning is all images have zero time delay)\n\n2007-04-01  6.3.3-6 Cristy  <quetzlzacatenango@image...>\n  * Permit generic profiles (e.g. -profile name:profile).\n\n2007-03-31  6.3.3-5 Cristy  <quetzlzacatenango@image...>\n  * Fixed DCM and XWD buffer overflow vulnerabilities (reference\n    http://labs.idefense.com/intelligence/vulnerabilities/display.php?id=496).\n\n2007-03-28  6.3.3-4 Anthony  <anthony@griffith...>\n  * Code duplication, simplification, and possible logic faults in \"list.c\".\n  * Added new Composition method, 'ChangeMask' to return pixels\n    that have changed or will cause a color change in overlays\n  * Used 'ChangeMask' to implement the \"-layers\" method\n    \"OptimizeTransparency\" to improve the compressibility of\n    frame optimized GIF animations. See IM Examples...\n      http://www.imagemagick.org/Usage/anim_opt/#opt_trans\n\n2007-03-19  6.3.3-4 Cristy  <quetzlzacatenango@image...>\n  * Fixed two memory leaks in wand/magick-image.c and magick/stream.c and made\n    some minor changes to the GIF coder to make reading and pinging images\n    faster (patch provided by mstemm@cloud...).\n\n2007-03-19  6.3.3-3 Cristy  <quetzlzacatenango@image...>\n  * Patch RotateImage() to properly rotate CMYK images.\n  * Patch the XWD coder to prevent heap overflow vulnerability (vulnerability\n    report from idefense.com [IDEF2108] [IDEF2221] [IDEF2226]).\n\n2007-03-19  6.3.3-3 Anthony <Anthony@griffith...>\n  * Fixed bug for GIF Optimization for images without a matte channel.\n  * Improved image handling for \"-layers\" method \"Dispose\".\n\n2007-03-11  6.3.3-2 Cristy  <quetzlzacatenango@image...>\n  * Improve configure script to better support Ghostscript under Mac OSX (\n    reference http://www.imagemagick.org/discourse-server/viewtopic.php?t=8557).\n  * Force a virtual pixel method of Tile for GetFillColor() and\n    GetStrokeColor().\n  * Add -reverse option to reverse the image list.\n\n2007-03-08  6.3.3-1 Cristy  <quetzlzacatenango@image...>\n  * Support versions 2.1.0 and above (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=8620).\n  * Support SVG rotation about a point (e.g. rotate(45 75 75)).\n  * Fix fault in DCM coder (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8618).\n  * Check for a NULL parser in SVGReference in coders/svg.c (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=8609).\n  * Add --disable-deprecated configure script option.\n  * Composite mask now works properly with transparent images.\n\n2007-03-04  Daniel Kobras <kobras@debia...>\n  * Fixed additional data-driven faults (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=412945).\n  * Allocate proper scanline length to prevent a PCX overflow.\n\n2007-03-03  6.3.3-1 Cristy  <quetzlzacatenango@image...>\n  * Patch ImageMagick to permit referenced labels: -set option:mylabel\n    \"color = %[pixel:u[0].p{12,26}]\" label:'%[mylabel]'\n\n2007-02-24  6.3.3-0 Cristy  <quetzlzacatenango@image...>\n  * Escape indirect labels and comments (e.g. -label @file).\n  * Added -format %C to return the image compression type.\n  * Do not report channel statistics if -ping -format is specified with the\n    identify program.\n  * Add ResetImagePage() to reset the image page canvas and position.\n  * Upgrade to LCMS 1.16\n  * Configure Ghostscript for library or framework (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=8557).\n  * Add -taint option to convert/mogrify to mark image as ineligible for\n  * Fixed various data-driven faults (reference\n    http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=412945).  The corrupt\n    JP2 image faults but its failing in the JP2 jas_image_decode() method,\n    not MagickCore.  The corrupt XWD image faults but its failing in\n    the X11 XGetPixel() method, not MagickCore.\n\n2007-02-20  6.3.2-8 Cristy  <quetzlzacatenango@image...>\n  * Use -define quantum:polarity=min-is-black or -define\n    quantum:polarity=min-is-white to toggle the photometric interpretation for\n    a bilevel TIFF image.\n\n2007-02-17  6.3.2-8 Cristy  <quetzlzacatenango@image...>\n  * Don't interpret embedded format characters when reading comments/labels\n    from a file.\n  * Reading an image from stdin stopped working.\n\n2007-02-17  6.3.2-7 Cristy  <quetzlzacatenango@image...>\n  * PerlMagick Label() no longer faults.\n  * Fix double-free when using the display/animate -geometry option.\n  * Add GetStringInfoLength() and GetStringInfoDatum(); deprecate\n    profile->length and profile->datum.\n\n2007-02-16  6.3.2-6 Cristy  <quetzlzacatenango@image...>\n  * Fix file leak in InjectImageBlob().\n  * Do not reinterpret image properties (e.g. -comment %%w).\n\n2007-02-14  6.3.2-5 Cristy  <quetzlzacatenango@image...>\n  * Don't over-allocate file buffers.\n\n2007-02-12  6.3.2-5 Cristy  <quetzlzacatenango@image...>\n  * Format strings in the POSIX locale.\n  * Make font metrics invariant to the strokewidth.\n\n2007-02-10  6.3.2-4 Albert Chin  <china@thewr...>\n  * Patch to fix configure.ac typo.\n\n2007-02-08  6.3.2-4 Cristy  <quetzlzacatenango@image...>\n  * Permit ImageMagick to run as a service under Windows.\n  * Remove duplicate EXIF properties.\n  * Support strokewidth option for the caption format.\n  * Don't use Ghostscript for rendering fonts if Freetype is available.\n\n2007-02-02  6.3.2-3 Cristy  <quetzlzacatenango@image...>\n  * Added thumbnail format to write EXIF thumbnails.\n  * Move ReadByteImage() out of Min() macro of ReadPALMImage().\n  * Move EXIF properties to the EXIF namespace (e.g. exif:XResolution).\n\n2007-01-26  6.3.2-2 Cristy  <quetzlzacatenango@image...>\n  * Add interpolate and background options to PerlMagick's AffineTransform().\n  * Revert to Postscript rendering if Freetype delegate library is not\n    available.\n\n2007-01-20  6.3.2-1 Cristy  <quetzlzacatenango@image...>\n  * Accept Fx expressions from a file with -fx @filename.\n  * Enhance -fill and -stroke to accept image filenames as patterns.\n\n2007-01-16  6.3.2-0 Cristy  <quetzlzacatenango@image...>\n  * Save grayscale images as JPEG-compressed grayscale when writing in the TIFF\n    format.\n  * Update EXIF resolution fields when image density changes.\n\n2007-01-07  6.3.1-7 Cristy  <quetzlzacatenango@image...>\n  * The -polaroid option now respects -gravity.\n  * Deprecate Get/SetImageAttribute().  Recommend Get/SetImageProperty()\n    instead.\n  * Any form of \"-crop\" with a percentage, implies an offset for the crop.\n  * Fixed percent option for -border (e.g. -border 10%x0%).\n  * Add -path option to the mogrify program to specify where to write the\n    images.\n\n2007-01-06  6.3.1-6 Cristy  <quetzlzacatenango@image...>\n  * Fix the -auto-orient to work with an image sequence (reference\n    http://www.imagemagick.org/discourse-server/viewtopic.php?t=8100).\n  * Add -polaroid option to simulate a Polaroid picture.\n  * Eliminate double-free bug in GradientImage().\n  * Set AppendImage() matte channel only when image has matte attribute set.\n  * The -crop with negative offsets do not modify the virtual canvas.\n  * Caption: Given both the width and height (\"-size\") of the area to fill,\n    adjust the fonts \"-pointsize\" until the text just filles the whole space\n    without overflowing.\n  * Generate proper Windows icon image files (patch provided by\n    Robert M. Jansen).\n", "/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%                        DDDD   RRRR    AAA   W   W                           %\n%                        D   D  R   R  A   A  W   W                           %\n%                        D   D  RRRR   AAAAA  W W W                           %\n%                        D   D  R RN   A   A  WW WW                           %\n%                        DDDD   R  R   A   A  W   W                           %\n%                                                                             %\n%                                                                             %\n%                     MagickCore Image Drawing Methods                        %\n%                                                                             %\n%                                                                             %\n%                              Software Design                                %\n%                                   Cristy                                    %\n%                                 July 1998                                   %\n%                                                                             %\n%                                                                             %\n%  Copyright 1999-2016 ImageMagick Studio LLC, a non-profit organization      %\n%  dedicated to making software imaging solutions freely available.           %\n%                                                                             %\n%  You may not use this file except in compliance with the License.  You may  %\n%  obtain a copy of the License at                                            %\n%                                                                             %\n%    http://www.imagemagick.org/script/license.php                            %\n%                                                                             %\n%  Unless required by applicable law or agreed to in writing, software        %\n%  distributed under the License is distributed on an \"AS IS\" BASIS,          %\n%  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   %\n%  See the License for the specific language governing permissions and        %\n%  limitations under the License.                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n% Bill Radcliffe of Corbis (www.corbis.com) contributed the polygon\n% rendering code based on Paul Heckbert's \"Concave Polygon Scan Conversion\",\n% Graphics Gems, 1990.  Leonard Rosenthal and David Harr of Appligent\n% (www.appligent.com) contributed the dash pattern, linecap stroking\n% algorithm, and minor rendering improvements.\n%\n*/\n\f\n/*\n  Include declarations.\n*/\n#include \"magick/studio.h\"\n#include \"magick/annotate.h\"\n#include \"magick/artifact.h\"\n#include \"magick/blob.h\"\n#include \"magick/cache.h\"\n#include \"magick/cache-private.h\"\n#include \"magick/cache-view.h\"\n#include \"magick/channel.h\"\n#include \"magick/color.h\"\n#include \"magick/color-private.h\"\n#include \"magick/colorspace.h\"\n#include \"magick/colorspace-private.h\"\n#include \"magick/composite.h\"\n#include \"magick/composite-private.h\"\n#include \"magick/constitute.h\"\n#include \"magick/draw.h\"\n#include \"magick/draw-private.h\"\n#include \"magick/enhance.h\"\n#include \"magick/exception.h\"\n#include \"magick/exception-private.h\"\n#include \"magick/gem.h\"\n#include \"magick/geometry.h\"\n#include \"magick/image-private.h\"\n#include \"magick/list.h\"\n#include \"magick/log.h\"\n#include \"magick/monitor.h\"\n#include \"magick/monitor-private.h\"\n#include \"magick/option.h\"\n#include \"magick/paint.h\"\n#include \"magick/pixel-accessor.h\"\n#include \"magick/pixel-private.h\"\n#include \"magick/property.h\"\n#include \"magick/resample.h\"\n#include \"magick/resample-private.h\"\n#include \"magick/resource_.h\"\n#include \"magick/string_.h\"\n#include \"magick/string-private.h\"\n#include \"magick/thread-private.h\"\n#include \"magick/token.h\"\n#include \"magick/transform.h\"\n#include \"magick/utility.h\"\n\f\n/*\n  Define declarations.\n*/\n#define BezierQuantum  200\n#define DrawEpsilon  (1.0e-10)\n\n\f\n/*\n  Typedef declarations.\n*/\ntypedef struct _EdgeInfo\n{\n  SegmentInfo\n    bounds;\n\n  double\n    scanline;\n\n  PointInfo\n    *points;\n\n  size_t\n    number_points;\n\n  ssize_t\n    direction;\n\n  MagickBooleanType\n    ghostline;\n\n  size_t\n    highwater;\n} EdgeInfo;\n\ntypedef struct _ElementInfo\n{\n  double\n    cx,\n    cy,\n    major,\n    minor,\n    angle;\n} ElementInfo;\n\ntypedef struct _PolygonInfo\n{\n  EdgeInfo\n    *edges;\n\n  size_t\n    number_edges;\n} PolygonInfo;\n\ntypedef enum\n{\n  MoveToCode,\n  OpenCode,\n  GhostlineCode,\n  LineToCode,\n  EndCode\n} PathInfoCode;\n\ntypedef struct _PathInfo\n{\n  PointInfo\n    point;\n\n  PathInfoCode\n    code;\n} PathInfo;\n\f\n/*\n  Forward declarations.\n*/\nstatic MagickBooleanType\n  DrawStrokePolygon(Image *,const DrawInfo *,const PrimitiveInfo *);\n\nstatic PrimitiveInfo\n  *TraceStrokePolygon(const DrawInfo *,const PrimitiveInfo *);\n\nstatic size_t\n  TracePath(PrimitiveInfo *,const char *);\n\nstatic void\n  TraceArc(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo),\n  TraceArcPath(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo,\n    const double,const MagickBooleanType,const MagickBooleanType),\n  TraceBezier(PrimitiveInfo *,const size_t),\n  TraceCircle(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceEllipse(PrimitiveInfo *,const PointInfo,const PointInfo,const PointInfo),\n  TraceLine(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceRectangle(PrimitiveInfo *,const PointInfo,const PointInfo),\n  TraceRoundRectangle(PrimitiveInfo *,const PointInfo,const PointInfo,\n    PointInfo),\n  TraceSquareLinecap(PrimitiveInfo *,const size_t,const double);\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   A c q u i r e D r a w I n f o                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  AcquireDrawInfo() returns a DrawInfo structure properly initialized.\n%\n%  The format of the AcquireDrawInfo method is:\n%\n%      DrawInfo *AcquireDrawInfo(void)\n%\n*/\nMagickExport DrawInfo *AcquireDrawInfo(void)\n{\n  DrawInfo\n    *draw_info;\n\n  draw_info=(DrawInfo *) AcquireMagickMemory(sizeof(*draw_info));\n  if (draw_info == (DrawInfo *) NULL)\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  GetDrawInfo((ImageInfo *) NULL,draw_info);\n  return(draw_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   C l o n e D r a w I n f o                                                 %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  CloneDrawInfo() makes a copy of the given draw_info structure.  If NULL\n%  is specified, a new DrawInfo structure is created initialized to default\n%  values.\n%\n%  The format of the CloneDrawInfo method is:\n%\n%      DrawInfo *CloneDrawInfo(const ImageInfo *image_info,\n%        const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image_info: the image info.\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport DrawInfo *CloneDrawInfo(const ImageInfo *image_info,\n  const DrawInfo *draw_info)\n{\n  DrawInfo\n    *clone_info;\n\n  clone_info=(DrawInfo *) AcquireMagickMemory(sizeof(*clone_info));\n  if (clone_info == (DrawInfo *) NULL)\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  GetDrawInfo(image_info,clone_info);\n  if (draw_info == (DrawInfo *) NULL)\n    return(clone_info);\n  if (clone_info->primitive != (char *) NULL)\n    (void) CloneString(&clone_info->primitive,draw_info->primitive);\n  if (draw_info->geometry != (char *) NULL)\n    (void) CloneString(&clone_info->geometry,draw_info->geometry);\n  clone_info->viewbox=draw_info->viewbox;\n  clone_info->affine=draw_info->affine;\n  clone_info->gravity=draw_info->gravity;\n  clone_info->fill=draw_info->fill;\n  clone_info->stroke=draw_info->stroke;\n  clone_info->stroke_width=draw_info->stroke_width;\n  if (draw_info->fill_pattern != (Image *) NULL)\n    clone_info->fill_pattern=CloneImage(draw_info->fill_pattern,0,0,MagickTrue,\n      &draw_info->fill_pattern->exception);\n  else\n    if (draw_info->tile != (Image *) NULL)\n      clone_info->fill_pattern=CloneImage(draw_info->tile,0,0,MagickTrue,\n        &draw_info->tile->exception);\n  clone_info->tile=NewImageList();  /* tile is deprecated */\n  if (draw_info->stroke_pattern != (Image *) NULL)\n    clone_info->stroke_pattern=CloneImage(draw_info->stroke_pattern,0,0,\n      MagickTrue,&draw_info->stroke_pattern->exception);\n  clone_info->stroke_antialias=draw_info->stroke_antialias;\n  clone_info->text_antialias=draw_info->text_antialias;\n  clone_info->fill_rule=draw_info->fill_rule;\n  clone_info->linecap=draw_info->linecap;\n  clone_info->linejoin=draw_info->linejoin;\n  clone_info->miterlimit=draw_info->miterlimit;\n  clone_info->dash_offset=draw_info->dash_offset;\n  clone_info->decorate=draw_info->decorate;\n  clone_info->compose=draw_info->compose;\n  if (draw_info->text != (char *) NULL)\n    (void) CloneString(&clone_info->text,draw_info->text);\n  if (draw_info->font != (char *) NULL)\n    (void) CloneString(&clone_info->font,draw_info->font);\n  if (draw_info->metrics != (char *) NULL)\n    (void) CloneString(&clone_info->metrics,draw_info->metrics);\n  if (draw_info->family != (char *) NULL)\n    (void) CloneString(&clone_info->family,draw_info->family);\n  clone_info->style=draw_info->style;\n  clone_info->stretch=draw_info->stretch;\n  clone_info->weight=draw_info->weight;\n  if (draw_info->encoding != (char *) NULL)\n    (void) CloneString(&clone_info->encoding,draw_info->encoding);\n  clone_info->pointsize=draw_info->pointsize;\n  clone_info->kerning=draw_info->kerning;\n  clone_info->interline_spacing=draw_info->interline_spacing;\n  clone_info->interword_spacing=draw_info->interword_spacing;\n  clone_info->direction=draw_info->direction;\n  if (draw_info->density != (char *) NULL)\n    (void) CloneString(&clone_info->density,draw_info->density);\n  clone_info->align=draw_info->align;\n  clone_info->undercolor=draw_info->undercolor;\n  clone_info->border_color=draw_info->border_color;\n  if (draw_info->server_name != (char *) NULL)\n    (void) CloneString(&clone_info->server_name,draw_info->server_name);\n  if (draw_info->dash_pattern != (double *) NULL)\n    {\n      register ssize_t\n        x;\n\n      for (x=0; fabs(draw_info->dash_pattern[x]) >= DrawEpsilon; x++) ;\n      clone_info->dash_pattern=(double *) AcquireQuantumMemory((size_t) x+1UL,\n        sizeof(*clone_info->dash_pattern));\n      if (clone_info->dash_pattern == (double *) NULL)\n        ThrowFatalException(ResourceLimitFatalError,\n          \"UnableToAllocateDashPattern\");\n      (void) CopyMagickMemory(clone_info->dash_pattern,draw_info->dash_pattern,\n        (size_t) (x+1)*sizeof(*clone_info->dash_pattern));\n    }\n  clone_info->gradient=draw_info->gradient;\n  if (draw_info->gradient.stops != (StopInfo *) NULL)\n    {\n      size_t\n        number_stops;\n\n      number_stops=clone_info->gradient.number_stops;\n      clone_info->gradient.stops=(StopInfo *) AcquireQuantumMemory((size_t)\n        number_stops,sizeof(*clone_info->gradient.stops));\n      if (clone_info->gradient.stops == (StopInfo *) NULL)\n        ThrowFatalException(ResourceLimitFatalError,\n          \"UnableToAllocateDashPattern\");\n      (void) CopyMagickMemory(clone_info->gradient.stops,\n        draw_info->gradient.stops,(size_t) number_stops*\n        sizeof(*clone_info->gradient.stops));\n    }\n  if (draw_info->clip_mask != (char *) NULL)\n    (void) CloneString(&clone_info->clip_mask,draw_info->clip_mask);\n  clone_info->bounds=draw_info->bounds;\n  clone_info->clip_units=draw_info->clip_units;\n  clone_info->render=draw_info->render;\n  clone_info->fill_opacity=draw_info->fill_opacity;\n  clone_info->stroke_opacity=draw_info->stroke_opacity;\n  clone_info->element_reference=draw_info->element_reference;\n  clone_info->debug=IsEventLogging();\n  return(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   C o n v e r t P a t h T o P o l y g o n                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  ConvertPathToPolygon() converts a path to the more efficient sorted\n%  rendering form.\n%\n%  The format of the ConvertPathToPolygon method is:\n%\n%      PolygonInfo *ConvertPathToPolygon(const PathInfo *path_info)\n%\n%  A description of each parameter follows:\n%\n%    o Method ConvertPathToPolygon returns the path in a more efficient sorted\n%      rendering form of type PolygonInfo.\n%\n%    o draw_info: Specifies a pointer to an DrawInfo structure.\n%\n%    o path_info: Specifies a pointer to an PathInfo structure.\n%\n%\n*/\n\n#if defined(__cplusplus) || defined(c_plusplus)\nextern \"C\" {\n#endif\n\nstatic int CompareEdges(const void *x,const void *y)\n{\n  register const EdgeInfo\n    *p,\n    *q;\n\n  /*\n    Compare two edges.\n  */\n  p=(const EdgeInfo *) x;\n  q=(const EdgeInfo *) y;\n  if ((p->points[0].y-DrawEpsilon) > q->points[0].y)\n    return(1);\n  if ((p->points[0].y+DrawEpsilon) < q->points[0].y)\n    return(-1);\n  if ((p->points[0].x-DrawEpsilon) > q->points[0].x)\n    return(1);\n  if ((p->points[0].x+DrawEpsilon) < q->points[0].x)\n    return(-1);\n  if (((p->points[1].x-p->points[0].x)*(q->points[1].y-q->points[0].y)-\n       (p->points[1].y-p->points[0].y)*(q->points[1].x-q->points[0].x)) > 0.0)\n    return(1);\n  return(-1);\n}\n\n#if defined(__cplusplus) || defined(c_plusplus)\n}\n#endif\n\nstatic void LogPolygonInfo(const PolygonInfo *polygon_info)\n{\n  register EdgeInfo\n    *p;\n\n  register ssize_t\n    i,\n    j;\n\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin active-edge\");\n  p=polygon_info->edges;\n  for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n  {\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      edge %.20g:\",\n      (double) i);\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      direction: %s\",\n      p->direction != MagickFalse ? \"down\" : \"up\");\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"      ghostline: %s\",\n      p->ghostline != MagickFalse ? \"transparent\" : \"opaque\");\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"      bounds: %g,%g - %g,%g\",p->bounds.x1,p->bounds.y1,\n      p->bounds.x2,p->bounds.y2);\n    for (j=0; j < (ssize_t) p->number_points; j++)\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"        %g,%g\",\n        p->points[j].x,p->points[j].y);\n    p++;\n  }\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end active-edge\");\n}\n\nstatic void ReversePoints(PointInfo *points,const size_t number_points)\n{\n  PointInfo\n    point;\n\n  register ssize_t\n    i;\n\n  for (i=0; i < (ssize_t) (number_points >> 1); i++)\n  {\n    point=points[i];\n    points[i]=points[number_points-(i+1)];\n    points[number_points-(i+1)]=point;\n  }\n}\n\nstatic PolygonInfo *ConvertPathToPolygon(const PathInfo *path_info)\n{\n  long\n    direction,\n    next_direction;\n\n  PointInfo\n    point,\n    *points;\n\n  PolygonInfo\n    *polygon_info;\n\n  SegmentInfo\n    bounds;\n\n  register ssize_t\n    i,\n    n;\n\n  MagickBooleanType\n    ghostline;\n\n  size_t\n    edge,\n    number_edges,\n    number_points;\n\n  /*\n    Convert a path to the more efficient sorted rendering form.\n  */\n  polygon_info=(PolygonInfo *) AcquireMagickMemory(sizeof(*polygon_info));\n  if (polygon_info == (PolygonInfo *) NULL)\n    return((PolygonInfo *) NULL);\n  number_edges=16;\n  polygon_info->edges=(EdgeInfo *) AcquireQuantumMemory(number_edges,\n    sizeof(*polygon_info->edges));\n  if (polygon_info->edges == (EdgeInfo *) NULL)\n    return((PolygonInfo *) NULL);\n  (void) ResetMagickMemory(polygon_info->edges,0,number_edges*\n    sizeof(*polygon_info->edges));\n  direction=0;\n  edge=0;\n  ghostline=MagickFalse;\n  n=0;\n  number_points=0;\n  points=(PointInfo *) NULL;\n  (void) ResetMagickMemory(&point,0,sizeof(point));\n  (void) ResetMagickMemory(&bounds,0,sizeof(bounds));\n  for (i=0; path_info[i].code != EndCode; i++)\n  {\n    if ((path_info[i].code == MoveToCode) || (path_info[i].code == OpenCode) ||\n        (path_info[i].code == GhostlineCode))\n      {\n        /*\n          Move to.\n        */\n        if ((points != (PointInfo *) NULL) && (n >= 2))\n          {\n            if (edge == number_edges)\n              {\n                number_edges<<=1;\n                polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n                  polygon_info->edges,(size_t) number_edges,\n                  sizeof(*polygon_info->edges));\n                if (polygon_info->edges == (EdgeInfo *) NULL)\n                  return((PolygonInfo *) NULL);\n              }\n            polygon_info->edges[edge].number_points=(size_t) n;\n            polygon_info->edges[edge].scanline=(-1.0);\n            polygon_info->edges[edge].highwater=0;\n            polygon_info->edges[edge].ghostline=ghostline;\n            polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n            if (direction < 0)\n              ReversePoints(points,(size_t) n);\n            polygon_info->edges[edge].points=points;\n            polygon_info->edges[edge].bounds=bounds;\n            polygon_info->edges[edge].bounds.y1=points[0].y;\n            polygon_info->edges[edge].bounds.y2=points[n-1].y;\n            points=(PointInfo *) NULL;\n            ghostline=MagickFalse;\n            edge++;\n          }\n        if (points == (PointInfo *) NULL)\n          {\n            number_points=16;\n            points=(PointInfo *) AcquireQuantumMemory((size_t) number_points,\n              sizeof(*points));\n            if (points == (PointInfo *) NULL)\n              return((PolygonInfo *) NULL);\n          }\n        ghostline=path_info[i].code == GhostlineCode ? MagickTrue : MagickFalse;\n        point=path_info[i].point;\n        points[0]=point;\n        bounds.x1=point.x;\n        bounds.x2=point.x;\n        direction=0;\n        n=1;\n        continue;\n      }\n    /*\n      Line to.\n    */\n    next_direction=((path_info[i].point.y > point.y) ||\n      ((fabs(path_info[i].point.y-point.y) < DrawEpsilon) &&\n       (path_info[i].point.x > point.x))) ? 1 : -1;\n    if ((points != (PointInfo *) NULL) && (direction != 0) &&\n        (direction != next_direction))\n      {\n        /*\n          New edge.\n        */\n        point=points[n-1];\n        if (edge == number_edges)\n          {\n            number_edges<<=1;\n            polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n              polygon_info->edges,(size_t) number_edges,\n              sizeof(*polygon_info->edges));\n            if (polygon_info->edges == (EdgeInfo *) NULL)\n              return((PolygonInfo *) NULL);\n          }\n        polygon_info->edges[edge].number_points=(size_t) n;\n        polygon_info->edges[edge].scanline=(-1.0);\n        polygon_info->edges[edge].highwater=0;\n        polygon_info->edges[edge].ghostline=ghostline;\n        polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n        if (direction < 0)\n          ReversePoints(points,(size_t) n);\n        polygon_info->edges[edge].points=points;\n        polygon_info->edges[edge].bounds=bounds;\n        polygon_info->edges[edge].bounds.y1=points[0].y;\n        polygon_info->edges[edge].bounds.y2=points[n-1].y;\n        number_points=16;\n        points=(PointInfo *) AcquireQuantumMemory((size_t) number_points,\n          sizeof(*points));\n        if (points == (PointInfo *) NULL)\n          return((PolygonInfo *) NULL);\n        n=1;\n        ghostline=MagickFalse;\n        points[0]=point;\n        bounds.x1=point.x;\n        bounds.x2=point.x;\n        edge++;\n      }\n    direction=next_direction;\n    if (points == (PointInfo *) NULL)\n      continue;\n    if (n == (ssize_t) number_points)\n      {\n        number_points<<=1;\n        points=(PointInfo *) ResizeQuantumMemory(points,(size_t) number_points,\n          sizeof(*points));\n        if (points == (PointInfo *) NULL)\n          return((PolygonInfo *) NULL);\n      }\n    point=path_info[i].point;\n    points[n]=point;\n    if (point.x < bounds.x1)\n      bounds.x1=point.x;\n    if (point.x > bounds.x2)\n      bounds.x2=point.x;\n    n++;\n  }\n  if (points != (PointInfo *) NULL)\n    {\n      if (n < 2)\n        points=(PointInfo *) RelinquishMagickMemory(points);\n      else\n        {\n          if (edge == number_edges)\n            {\n              number_edges<<=1;\n              polygon_info->edges=(EdgeInfo *) ResizeQuantumMemory(\n                polygon_info->edges,(size_t) number_edges,\n                sizeof(*polygon_info->edges));\n              if (polygon_info->edges == (EdgeInfo *) NULL)\n                return((PolygonInfo *) NULL);\n            }\n          polygon_info->edges[edge].number_points=(size_t) n;\n          polygon_info->edges[edge].scanline=(-1.0);\n          polygon_info->edges[edge].highwater=0;\n          polygon_info->edges[edge].ghostline=ghostline;\n          polygon_info->edges[edge].direction=(ssize_t) (direction > 0);\n          if (direction < 0)\n            ReversePoints(points,(size_t) n);\n          polygon_info->edges[edge].points=points;\n          polygon_info->edges[edge].bounds=bounds;\n          polygon_info->edges[edge].bounds.y1=points[0].y;\n          polygon_info->edges[edge].bounds.y2=points[n-1].y;\n          ghostline=MagickFalse;\n          edge++;\n        }\n    }\n  polygon_info->number_edges=edge;\n  qsort(polygon_info->edges,(size_t) polygon_info->number_edges,\n    sizeof(*polygon_info->edges),CompareEdges);\n  if (IsEventLogging() != MagickFalse)\n    LogPolygonInfo(polygon_info);\n  return(polygon_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   C o n v e r t P r i m i t i v e T o P a t h                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  ConvertPrimitiveToPath() converts a PrimitiveInfo structure into a vector\n%  path structure.\n%\n%  The format of the ConvertPrimitiveToPath method is:\n%\n%      PathInfo *ConvertPrimitiveToPath(const DrawInfo *draw_info,\n%        const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o Method ConvertPrimitiveToPath returns a vector path structure of type\n%      PathInfo.\n%\n%    o draw_info: a structure of type DrawInfo.\n%\n%    o primitive_info: Specifies a pointer to an PrimitiveInfo structure.\n%\n%\n*/\n\nstatic void LogPathInfo(const PathInfo *path_info)\n{\n  register const PathInfo\n    *p;\n\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin vector-path\");\n  for (p=path_info; p->code != EndCode; p++)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"      %g,%g %s\",p->point.x,p->point.y,p->code == GhostlineCode ?\n      \"moveto ghostline\" : p->code == OpenCode ? \"moveto open\" :\n      p->code == MoveToCode ? \"moveto\" : p->code == LineToCode ? \"lineto\" :\n      \"?\");\n  (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end vector-path\");\n}\n\nstatic PathInfo *ConvertPrimitiveToPath(\n  const DrawInfo *magick_unused(draw_info),const PrimitiveInfo *primitive_info)\n{\n  PathInfo\n    *path_info;\n\n  PathInfoCode\n    code;\n\n  PointInfo\n    p,\n    q;\n\n  register ssize_t\n    i,\n    n;\n\n  ssize_t\n    coordinates,\n    start;\n\n  magick_unreferenced(draw_info);\n\n  /*\n    Converts a PrimitiveInfo structure into a vector path structure.\n  */\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    case ColorPrimitive:\n    case MattePrimitive:\n    case TextPrimitive:\n    case ImagePrimitive:\n      return((PathInfo *) NULL);\n    default:\n      break;\n  }\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n  path_info=(PathInfo *) AcquireQuantumMemory((size_t) (2UL*i+3UL),\n    sizeof(*path_info));\n  if (path_info == (PathInfo *) NULL)\n    return((PathInfo *) NULL);\n  coordinates=0;\n  n=0;\n  p.x=(-1.0);\n  p.y=(-1.0);\n  q.x=(-1.0);\n  q.y=(-1.0);\n  start=0;\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n  {\n    code=LineToCode;\n    if (coordinates <= 0)\n      {\n        coordinates=(ssize_t) primitive_info[i].coordinates;\n        p=primitive_info[i].point;\n        start=n;\n        code=MoveToCode;\n      }\n    coordinates--;\n    /*\n      Eliminate duplicate points.\n    */\n    if ((i == 0) || (fabs(q.x-primitive_info[i].point.x) >= DrawEpsilon) ||\n        (fabs(q.y-primitive_info[i].point.y) >= DrawEpsilon))\n      {\n        path_info[n].code=code;\n        path_info[n].point=primitive_info[i].point;\n        q=primitive_info[i].point;\n        n++;\n      }\n    if (coordinates > 0)\n      continue;\n    if ((fabs(p.x-primitive_info[i].point.x) < DrawEpsilon) &&\n        (fabs(p.y-primitive_info[i].point.y) < DrawEpsilon))\n      continue;\n    /*\n      Mark the p point as open if it does not match the q.\n    */\n    path_info[start].code=OpenCode;\n    path_info[n].code=GhostlineCode;\n    path_info[n].point=primitive_info[i].point;\n    n++;\n    path_info[n].code=LineToCode;\n    path_info[n].point=p;\n    n++;\n  }\n  path_info[n].code=EndCode;\n  path_info[n].point.x=0.0;\n  path_info[n].point.y=0.0;\n  if (IsEventLogging() != MagickFalse)\n    LogPathInfo(path_info);\n  return(path_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D e s t r o y D r a w I n f o                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyDrawInfo() deallocates memory associated with an DrawInfo\n%  structure.\n%\n%  The format of the DestroyDrawInfo method is:\n%\n%      DrawInfo *DestroyDrawInfo(DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport DrawInfo *DestroyDrawInfo(DrawInfo *draw_info)\n{\n  if (draw_info->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  if (draw_info->primitive != (char *) NULL)\n    draw_info->primitive=DestroyString(draw_info->primitive);\n  if (draw_info->text != (char *) NULL)\n    draw_info->text=DestroyString(draw_info->text);\n  if (draw_info->geometry != (char *) NULL)\n    draw_info->geometry=DestroyString(draw_info->geometry);\n  if (draw_info->tile != (Image *) NULL)\n    draw_info->tile=DestroyImage(draw_info->tile);\n  if (draw_info->fill_pattern != (Image *) NULL)\n    draw_info->fill_pattern=DestroyImage(draw_info->fill_pattern);\n  if (draw_info->stroke_pattern != (Image *) NULL)\n    draw_info->stroke_pattern=DestroyImage(draw_info->stroke_pattern);\n  if (draw_info->font != (char *) NULL)\n    draw_info->font=DestroyString(draw_info->font);\n  if (draw_info->metrics != (char *) NULL)\n    draw_info->metrics=DestroyString(draw_info->metrics);\n  if (draw_info->family != (char *) NULL)\n    draw_info->family=DestroyString(draw_info->family);\n  if (draw_info->encoding != (char *) NULL)\n    draw_info->encoding=DestroyString(draw_info->encoding);\n  if (draw_info->density != (char *) NULL)\n    draw_info->density=DestroyString(draw_info->density);\n  if (draw_info->server_name != (char *) NULL)\n    draw_info->server_name=(char *)\n     RelinquishMagickMemory(draw_info->server_name);\n  if (draw_info->dash_pattern != (double *) NULL)\n    draw_info->dash_pattern=(double *) RelinquishMagickMemory(\n      draw_info->dash_pattern);\n  if (draw_info->gradient.stops != (StopInfo *) NULL)\n    draw_info->gradient.stops=(StopInfo *) RelinquishMagickMemory(\n      draw_info->gradient.stops);\n  if (draw_info->clip_mask != (char *) NULL)\n    draw_info->clip_mask=DestroyString(draw_info->clip_mask);\n  draw_info->signature=(~MagickSignature);\n  draw_info=(DrawInfo *) RelinquishMagickMemory(draw_info);\n  return(draw_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D e s t r o y E d g e                                                     %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyEdge() destroys the specified polygon edge.\n%\n%  The format of the DestroyEdge method is:\n%\n%      ssize_t DestroyEdge(PolygonInfo *polygon_info,const int edge)\n%\n%  A description of each parameter follows:\n%\n%    o polygon_info: Specifies a pointer to an PolygonInfo structure.\n%\n%    o edge: the polygon edge number to destroy.\n%\n*/\nstatic size_t DestroyEdge(PolygonInfo *polygon_info,\n  const size_t edge)\n{\n  assert(edge < polygon_info->number_edges);\n  polygon_info->edges[edge].points=(PointInfo *) RelinquishMagickMemory(\n    polygon_info->edges[edge].points);\n  polygon_info->number_edges--;\n  if (edge < polygon_info->number_edges)\n    (void) CopyMagickMemory(polygon_info->edges+edge,polygon_info->edges+edge+1,\n      (size_t) (polygon_info->number_edges-edge)*sizeof(*polygon_info->edges));\n  return(polygon_info->number_edges);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D e s t r o y P o l y g o n I n f o                                       %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DestroyPolygonInfo() destroys the PolygonInfo data structure.\n%\n%  The format of the DestroyPolygonInfo method is:\n%\n%      PolygonInfo *DestroyPolygonInfo(PolygonInfo *polygon_info)\n%\n%  A description of each parameter follows:\n%\n%    o polygon_info: Specifies a pointer to an PolygonInfo structure.\n%\n*/\nstatic PolygonInfo *DestroyPolygonInfo(PolygonInfo *polygon_info)\n{\n  register ssize_t\n    i;\n\n  for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n    polygon_info->edges[i].points=(PointInfo *)\n      RelinquishMagickMemory(polygon_info->edges[i].points);\n  polygon_info->edges=(EdgeInfo *) RelinquishMagickMemory(polygon_info->edges);\n  return((PolygonInfo *) RelinquishMagickMemory(polygon_info));\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%     D r a w A f f i n e I m a g e                                           %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawAffineImage() composites the source over the destination image as\n%  dictated by the affine transform.\n%\n%  The format of the DrawAffineImage method is:\n%\n%      MagickBooleanType DrawAffineImage(Image *image,const Image *source,\n%        const AffineMatrix *affine)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o source: the source image.\n%\n%    o affine: the affine transform.\n%\n*/\n\nstatic SegmentInfo AffineEdge(const Image *image,const AffineMatrix *affine,\n  const double y,const SegmentInfo *edge)\n{\n  double\n    intercept,\n    z;\n\n  register double\n    x;\n\n  SegmentInfo\n    inverse_edge;\n\n  /*\n    Determine left and right edges.\n  */\n  inverse_edge.x1=edge->x1;\n  inverse_edge.y1=edge->y1;\n  inverse_edge.x2=edge->x2;\n  inverse_edge.y2=edge->y2;\n  z=affine->ry*y+affine->tx;\n  if (affine->sx >= DrawEpsilon)\n    {\n      intercept=(-z/affine->sx);\n      x=intercept;\n      if (x > inverse_edge.x1)\n        inverse_edge.x1=x;\n      intercept=(-z+(double) image->columns)/affine->sx;\n      x=intercept;\n      if (x < inverse_edge.x2)\n        inverse_edge.x2=x;\n    }\n  else\n    if (affine->sx < -DrawEpsilon)\n      {\n        intercept=(-z+(double) image->columns)/affine->sx;\n        x=intercept;\n        if (x > inverse_edge.x1)\n          inverse_edge.x1=x;\n        intercept=(-z/affine->sx);\n        x=intercept;\n        if (x < inverse_edge.x2)\n          inverse_edge.x2=x;\n      }\n    else\n      if ((z < 0.0) || ((size_t) floor(z+0.5) >= image->columns))\n        {\n          inverse_edge.x2=edge->x1;\n          return(inverse_edge);\n        }\n  /*\n    Determine top and bottom edges.\n  */\n  z=affine->sy*y+affine->ty;\n  if (affine->rx >= DrawEpsilon)\n    {\n      intercept=(-z/affine->rx);\n      x=intercept;\n      if (x > inverse_edge.x1)\n        inverse_edge.x1=x;\n      intercept=(-z+(double) image->rows)/affine->rx;\n      x=intercept;\n      if (x < inverse_edge.x2)\n        inverse_edge.x2=x;\n    }\n  else\n    if (affine->rx < -DrawEpsilon)\n      {\n        intercept=(-z+(double) image->rows)/affine->rx;\n        x=intercept;\n        if (x > inverse_edge.x1)\n          inverse_edge.x1=x;\n        intercept=(-z/affine->rx);\n        x=intercept;\n        if (x < inverse_edge.x2)\n          inverse_edge.x2=x;\n      }\n    else\n      if ((z < 0.0) || ((size_t) floor(z+0.5) >= image->rows))\n        {\n          inverse_edge.x2=edge->x2;\n          return(inverse_edge);\n        }\n  return(inverse_edge);\n}\n\nstatic AffineMatrix InverseAffineMatrix(const AffineMatrix *affine)\n{\n  AffineMatrix\n    inverse_affine;\n\n  double\n    determinant;\n\n  determinant=PerceptibleReciprocal(affine->sx*affine->sy-affine->rx*\n    affine->ry);\n  inverse_affine.sx=determinant*affine->sy;\n  inverse_affine.rx=determinant*(-affine->rx);\n  inverse_affine.ry=determinant*(-affine->ry);\n  inverse_affine.sy=determinant*affine->sx;\n  inverse_affine.tx=(-affine->tx)*inverse_affine.sx-affine->ty*\n    inverse_affine.ry;\n  inverse_affine.ty=(-affine->tx)*inverse_affine.rx-affine->ty*\n    inverse_affine.sy;\n  return(inverse_affine);\n}\n\nMagickExport MagickBooleanType DrawAffineImage(Image *image,\n  const Image *source,const AffineMatrix *affine)\n{\n  AffineMatrix\n    inverse_affine;\n\n  CacheView\n    *image_view,\n    *source_view;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    status;\n\n  MagickPixelPacket\n    zero;\n\n  PointInfo\n    extent[4],\n    min,\n    max,\n    point;\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    edge;\n\n  ssize_t\n    start,\n    stop,\n    y;\n\n  /*\n    Determine bounding box.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(source != (const Image *) NULL);\n  assert(source->signature == MagickSignature);\n  assert(affine != (AffineMatrix *) NULL);\n  extent[0].x=0.0;\n  extent[0].y=0.0;\n  extent[1].x=(double) source->columns-1.0;\n  extent[1].y=0.0;\n  extent[2].x=(double) source->columns-1.0;\n  extent[2].y=(double) source->rows-1.0;\n  extent[3].x=0.0;\n  extent[3].y=(double) source->rows-1.0;\n  for (i=0; i < 4; i++)\n  {\n    point=extent[i];\n    extent[i].x=point.x*affine->sx+point.y*affine->ry+affine->tx;\n    extent[i].y=point.x*affine->rx+point.y*affine->sy+affine->ty;\n  }\n  min=extent[0];\n  max=extent[0];\n  for (i=1; i < 4; i++)\n  {\n    if (min.x > extent[i].x)\n      min.x=extent[i].x;\n    if (min.y > extent[i].y)\n      min.y=extent[i].y;\n    if (max.x < extent[i].x)\n      max.x=extent[i].x;\n    if (max.y < extent[i].y)\n      max.y=extent[i].y;\n  }\n  /*\n    Affine transform image.\n  */\n  if (SetImageStorageClass(image,DirectClass) == MagickFalse)\n    return(MagickFalse);\n  status=MagickTrue;\n  edge.x1=MagickMax(min.x,0.0);\n  edge.y1=MagickMax(min.y,0.0);\n  edge.x2=MagickMin(max.x,(double) image->columns-1.0);\n  edge.y2=MagickMin(max.y,(double) image->rows-1.0);\n  inverse_affine=InverseAffineMatrix(affine);\n  GetMagickPixelPacket(image,&zero);\n  exception=(&image->exception);\n  start=(ssize_t) ceil(edge.y1-0.5);\n  stop=(ssize_t) floor(edge.y2+0.5);\n  source_view=AcquireVirtualCacheView(source,exception);\n  image_view=AcquireAuthenticCacheView(image,exception);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(source,image,1,1)\n#endif\n  for (y=start; y <= stop; y++)\n  {\n    MagickPixelPacket\n      composite,\n      pixel;\n\n    PointInfo\n      point;\n\n    register IndexPacket\n      *magick_restrict indexes;\n\n    register ssize_t\n      x;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    SegmentInfo\n      inverse_edge;\n\n    ssize_t\n      x_offset;\n\n    inverse_edge=AffineEdge(source,&inverse_affine,(double) y,&edge);\n    if (inverse_edge.x2 < inverse_edge.x1)\n      continue;\n    q=GetCacheViewAuthenticPixels(image_view,(ssize_t) ceil(inverse_edge.x1-\n      0.5),y,(size_t) (floor(inverse_edge.x2+0.5)-ceil(inverse_edge.x1-0.5)+1),\n      1,exception);\n    if (q == (PixelPacket *) NULL)\n      continue;\n    indexes=GetCacheViewAuthenticIndexQueue(image_view);\n    pixel=zero;\n    composite=zero;\n    x_offset=0;\n    for (x=(ssize_t) ceil(inverse_edge.x1-0.5); x <= (ssize_t) floor(inverse_edge.x2+0.5); x++)\n    {\n      point.x=(double) x*inverse_affine.sx+y*inverse_affine.ry+\n        inverse_affine.tx;\n      point.y=(double) x*inverse_affine.rx+y*inverse_affine.sy+\n        inverse_affine.ty;\n      (void) InterpolateMagickPixelPacket(source,source_view,\n        UndefinedInterpolatePixel,point.x,point.y,&pixel,exception);\n      SetMagickPixelPacket(image,q,indexes+x_offset,&composite);\n      MagickPixelCompositeOver(&pixel,pixel.opacity,&composite,\n        composite.opacity,&composite);\n      SetPixelPacket(image,&composite,q,indexes+x_offset);\n      x_offset++;\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  source_view=DestroyCacheView(source_view);\n  image_view=DestroyCacheView(image_view);\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w B o u n d i n g R e c t a n g l e s                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawBoundingRectangles() draws the bounding rectangles on the image.  This\n%  is only useful for developers debugging the rendering algorithm.\n%\n%  The format of the DrawBoundingRectangles method is:\n%\n%      void DrawBoundingRectangles(Image *image,const DrawInfo *draw_info,\n%        PolygonInfo *polygon_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o polygon_info: Specifies a pointer to a PolygonInfo structure.\n%\n*/\nstatic void DrawBoundingRectangles(Image *image,const DrawInfo *draw_info,\n  const PolygonInfo *polygon_info)\n{\n  double\n    mid;\n\n  DrawInfo\n    *clone_info;\n\n  PointInfo\n    end,\n    resolution,\n    start;\n\n  PrimitiveInfo\n    primitive_info[6];\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    bounds;\n\n  ssize_t\n    coordinates;\n\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  (void) QueryColorDatabase(\"#0000\",&clone_info->fill,&image->exception);\n  resolution.x=DefaultResolution;\n  resolution.y=DefaultResolution;\n  if (clone_info->density != (char *) NULL)\n    {\n      GeometryInfo\n        geometry_info;\n\n      MagickStatusType\n        flags;\n\n      flags=ParseGeometry(clone_info->density,&geometry_info);\n      resolution.x=geometry_info.rho;\n      resolution.y=geometry_info.sigma;\n      if ((flags & SigmaValue) == MagickFalse)\n        resolution.y=resolution.x;\n    }\n  mid=(resolution.x/72.0)*ExpandAffine(&clone_info->affine)*\n    clone_info->stroke_width/2.0;\n  bounds.x1=0.0;\n  bounds.y1=0.0;\n  bounds.x2=0.0;\n  bounds.y2=0.0;\n  if (polygon_info != (PolygonInfo *) NULL)\n    {\n      bounds=polygon_info->edges[0].bounds;\n      for (i=1; i < (ssize_t) polygon_info->number_edges; i++)\n      {\n        if (polygon_info->edges[i].bounds.x1 < (double) bounds.x1)\n          bounds.x1=polygon_info->edges[i].bounds.x1;\n        if (polygon_info->edges[i].bounds.y1 < (double) bounds.y1)\n          bounds.y1=polygon_info->edges[i].bounds.y1;\n        if (polygon_info->edges[i].bounds.x2 > (double) bounds.x2)\n          bounds.x2=polygon_info->edges[i].bounds.x2;\n        if (polygon_info->edges[i].bounds.y2 > (double) bounds.y2)\n          bounds.y2=polygon_info->edges[i].bounds.y2;\n      }\n      bounds.x1-=mid;\n      bounds.x1=bounds.x1 < 0.0 ? 0.0 : bounds.x1 >= (double)\n        image->columns ? (double) image->columns-1 : bounds.x1;\n      bounds.y1-=mid;\n      bounds.y1=bounds.y1 < 0.0 ? 0.0 : bounds.y1 >= (double)\n        image->rows ? (double) image->rows-1 : bounds.y1;\n      bounds.x2+=mid;\n      bounds.x2=bounds.x2 < 0.0 ? 0.0 : bounds.x2 >= (double)\n        image->columns ? (double) image->columns-1 : bounds.x2;\n      bounds.y2+=mid;\n      bounds.y2=bounds.y2 < 0.0 ? 0.0 : bounds.y2 >= (double)\n        image->rows ? (double) image->rows-1 : bounds.y2;\n      for (i=0; i < (ssize_t) polygon_info->number_edges; i++)\n      {\n        if (polygon_info->edges[i].direction != 0)\n          (void) QueryColorDatabase(\"red\",&clone_info->stroke,\n            &image->exception);\n        else\n          (void) QueryColorDatabase(\"green\",&clone_info->stroke,\n            &image->exception);\n        start.x=(double) (polygon_info->edges[i].bounds.x1-mid);\n        start.y=(double) (polygon_info->edges[i].bounds.y1-mid);\n        end.x=(double) (polygon_info->edges[i].bounds.x2+mid);\n        end.y=(double) (polygon_info->edges[i].bounds.y2+mid);\n        primitive_info[0].primitive=RectanglePrimitive;\n        TraceRectangle(primitive_info,start,end);\n        primitive_info[0].method=ReplaceMethod;\n        coordinates=(ssize_t) primitive_info[0].coordinates;\n        primitive_info[coordinates].primitive=UndefinedPrimitive;\n        (void) DrawPrimitive(image,clone_info,primitive_info);\n      }\n    }\n  (void) QueryColorDatabase(\"blue\",&clone_info->stroke,&image->exception);\n  start.x=(double) (bounds.x1-mid);\n  start.y=(double) (bounds.y1-mid);\n  end.x=(double) (bounds.x2+mid);\n  end.y=(double) (bounds.y2+mid);\n  primitive_info[0].primitive=RectanglePrimitive;\n  TraceRectangle(primitive_info,start,end);\n  primitive_info[0].method=ReplaceMethod;\n  coordinates=(ssize_t) primitive_info[0].coordinates;\n  primitive_info[coordinates].primitive=UndefinedPrimitive;\n  (void) DrawPrimitive(image,clone_info,primitive_info);\n  clone_info=DestroyDrawInfo(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w C l i p P a t h                                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawClipPath() draws the clip path on the image mask.\n%\n%  The format of the DrawClipPath method is:\n%\n%      MagickBooleanType DrawClipPath(Image *image,const DrawInfo *draw_info,\n%        const char *name)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o name: the name of the clip path.\n%\n*/\nMagickExport MagickBooleanType DrawClipPath(Image *image,\n  const DrawInfo *draw_info,const char *name)\n{\n  char\n    clip_mask[MaxTextExtent];\n\n  const char\n    *value;\n\n  DrawInfo\n    *clone_info;\n\n  MagickStatusType\n    status;\n\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  (void) FormatLocaleString(clip_mask,MaxTextExtent,\"%s\",name);\n  value=GetImageArtifact(image,clip_mask);\n  if (value == (const char *) NULL)\n    return(MagickFalse);\n  if (image->clip_mask == (Image *) NULL)\n    {\n      Image\n        *clip_mask;\n\n      clip_mask=CloneImage(image,image->columns,image->rows,MagickTrue,\n        &image->exception);\n      if (clip_mask == (Image *) NULL)\n        return(MagickFalse);\n      (void) SetImageClipMask(image,clip_mask);\n      clip_mask=DestroyImage(clip_mask);\n    }\n  (void) QueryColorDatabase(\"#00000000\",&image->clip_mask->background_color,\n    &image->exception);\n  image->clip_mask->background_color.opacity=(Quantum) TransparentOpacity;\n  (void) SetImageBackgroundColor(image->clip_mask);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"\\nbegin clip-path %s\",\n      draw_info->clip_mask);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  (void) CloneString(&clone_info->primitive,value);\n  (void) QueryColorDatabase(\"#ffffff\",&clone_info->fill,&image->exception);\n  clone_info->clip_mask=(char *) NULL;\n  status=DrawImage(image->clip_mask,clone_info);\n  status&=NegateImage(image->clip_mask,MagickFalse);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end clip-path\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w D a s h P o l y g o n                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawDashPolygon() draws a dashed polygon (line, rectangle, ellipse) on the\n%  image while respecting the dash offset and dash pattern attributes.\n%\n%  The format of the DrawDashPolygon method is:\n%\n%      MagickBooleanType DrawDashPolygon(const DrawInfo *draw_info,\n%        const PrimitiveInfo *primitive_info,Image *image)\n%\n%  A description of each parameter follows:\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n%    o image: the image.\n%\n%\n*/\nstatic MagickBooleanType DrawDashPolygon(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info,Image *image)\n{\n  double\n    length,\n    maximum_length,\n    offset,\n    scale,\n    total_length;\n\n  DrawInfo\n    *clone_info;\n\n  MagickStatusType\n    status;\n\n  PrimitiveInfo\n    *dash_polygon;\n\n  register double\n    dx,\n    dy;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_vertices;\n\n  ssize_t\n    j,\n    n;\n\n  assert(draw_info != (const DrawInfo *) NULL);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin draw-dash\");\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n  number_vertices=(size_t) i;\n  dash_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    (2UL*number_vertices+1UL),sizeof(*dash_polygon));\n  if (dash_polygon == (PrimitiveInfo *) NULL)\n    return(MagickFalse);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->miterlimit=0;\n  dash_polygon[0]=primitive_info[0];\n  scale=ExpandAffine(&draw_info->affine);\n  length=scale*(draw_info->dash_pattern[0]-0.5);\n  offset=fabs(draw_info->dash_offset) >= DrawEpsilon ?\n     scale*draw_info->dash_offset : 0.0;\n  j=1;\n  for (n=0; offset > 0.0; j=0)\n  {\n    if (draw_info->dash_pattern[n] <= 0.0)\n      break;\n    length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n    if (offset > length)\n      {\n        offset-=length;\n        n++;\n        length=scale*(draw_info->dash_pattern[n]+0.5);\n        continue;\n      }\n    if (offset < length)\n      {\n        length-=offset;\n        offset=0.0;\n        break;\n      }\n    offset=0.0;\n    n++;\n  }\n  status=MagickTrue;\n  maximum_length=0.0;\n  total_length=0.0;\n  for (i=1; (i < (ssize_t) number_vertices) && (length >= 0.0); i++)\n  {\n    dx=primitive_info[i].point.x-primitive_info[i-1].point.x;\n    dy=primitive_info[i].point.y-primitive_info[i-1].point.y;\n    maximum_length=hypot((double) dx,dy);\n    if (fabs(length) < DrawEpsilon)\n      {\n        n++;\n        if (fabs(draw_info->dash_pattern[n]) < DrawEpsilon)\n          n=0;\n        length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n      }\n    for (total_length=0.0; (length >= 0.0) && (maximum_length >= (total_length+length)); )\n    {\n      total_length+=length;\n      if ((n & 0x01) != 0)\n        {\n          dash_polygon[0]=primitive_info[0];\n          dash_polygon[0].point.x=(double) (primitive_info[i-1].point.x+dx*\n            total_length/maximum_length);\n          dash_polygon[0].point.y=(double) (primitive_info[i-1].point.y+dy*\n            total_length/maximum_length);\n          j=1;\n        }\n      else\n        {\n          if ((j+1) > (ssize_t) (2*number_vertices))\n            break;\n          dash_polygon[j]=primitive_info[i-1];\n          dash_polygon[j].point.x=(double) (primitive_info[i-1].point.x+dx*\n            total_length/maximum_length);\n          dash_polygon[j].point.y=(double) (primitive_info[i-1].point.y+dy*\n            total_length/maximum_length);\n          dash_polygon[j].coordinates=1;\n          j++;\n          dash_polygon[0].coordinates=(size_t) j;\n          dash_polygon[j].primitive=UndefinedPrimitive;\n          status&=DrawStrokePolygon(image,clone_info,dash_polygon);\n        }\n      n++;\n      if (fabs(draw_info->dash_pattern[n]) < DrawEpsilon)\n        n=0;\n      length=scale*(draw_info->dash_pattern[n]+(n == 0 ? -0.5 : 0.5));\n    }\n    length-=(maximum_length-total_length);\n    if ((n & 0x01) != 0)\n      continue;\n    dash_polygon[j]=primitive_info[i];\n    dash_polygon[j].coordinates=1;\n    j++;\n  }\n  if ((total_length <= maximum_length) && ((n & 0x01) == 0) && (j > 1))\n    {\n      dash_polygon[j]=primitive_info[i-1];\n      dash_polygon[j].point.x+=DrawEpsilon;\n      dash_polygon[j].point.y+=DrawEpsilon;\n      dash_polygon[j].coordinates=1;\n      j++;\n      dash_polygon[0].coordinates=(size_t) j;\n      dash_polygon[j].primitive=UndefinedPrimitive;\n      status&=DrawStrokePolygon(image,clone_info,dash_polygon);\n    }\n  dash_polygon=(PrimitiveInfo *) RelinquishMagickMemory(dash_polygon);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end draw-dash\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w I m a g e                                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawImage() draws a graphic primitive on your image.  The primitive\n%  may be represented as a string or filename.  Precede the filename with an\n%  \"at\" sign (@) and the contents of the file are drawn on the image.  You\n%  can affect how text is drawn by setting one or more members of the draw\n%  info structure.\n%\n%  The format of the DrawImage method is:\n%\n%      MagickBooleanType DrawImage(Image *image,const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n*/\n\nstatic inline MagickBooleanType IsPoint(const char *point)\n{\n  char\n    *p;\n\n  double\n    value;\n\n  value=StringToDouble(point,&p);\n  return((fabs(value) < DrawEpsilon) && (p == point) ? MagickFalse : MagickTrue);\n}\n\nstatic inline void TracePoint(PrimitiveInfo *primitive_info,\n  const PointInfo point)\n{\n  primitive_info->coordinates=1;\n  primitive_info->point=point;\n}\n\nMagickExport MagickBooleanType DrawImage(Image *image,const DrawInfo *draw_info)\n{\n#define RenderImageTag  \"Render/Image\"\n\n  AffineMatrix\n    affine,\n    current;\n\n  char\n    key[2*MaxTextExtent],\n    keyword[MaxTextExtent],\n    geometry[MaxTextExtent],\n    name[MaxTextExtent],\n    *next_token,\n    pattern[MaxTextExtent],\n    *primitive,\n    *token;\n\n  const char\n    *q;\n\n  double\n    angle,\n    factor,\n    primitive_extent;\n\n  DrawInfo\n    **graphic_context;\n\n  MagickBooleanType\n    proceed;\n\n  MagickSizeType\n    length,\n    number_points;\n\n  MagickStatusType\n    status;\n\n  PointInfo\n    point;\n\n  PixelPacket\n    start_color;\n\n  PrimitiveInfo\n    *primitive_info;\n\n  PrimitiveType\n    primitive_type;\n\n  register const char\n    *p;\n\n  register ssize_t\n    i,\n    x;\n\n  SegmentInfo\n    bounds;\n\n  size_t\n    extent;\n\n  ssize_t\n    j,\n    k,\n    n;\n\n  /*\n    Ensure the annotation info is valid.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  if ((draw_info->primitive == (char *) NULL) ||\n      (*draw_info->primitive == '\\0'))\n    return(MagickFalse);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"begin draw-image\");\n  if (*draw_info->primitive != '@')\n    primitive=AcquireString(draw_info->primitive);\n  else\n    primitive=FileToString(draw_info->primitive+1,~0UL,&image->exception);\n  if (primitive == (char *) NULL)\n    return(MagickFalse);\n  primitive_extent=(double) strlen(primitive);\n  (void) SetImageArtifact(image,\"MVG\",primitive);\n  n=0;\n  /*\n    Allocate primitive info memory.\n  */\n  graphic_context=(DrawInfo **) AcquireMagickMemory(\n    sizeof(*graphic_context));\n  if (graphic_context == (DrawInfo **) NULL)\n    {\n      primitive=DestroyString(primitive);\n      ThrowBinaryException(ResourceLimitError,\"MemoryAllocationFailed\",\n        image->filename);\n    }\n  number_points=6553;\n  primitive_info=(PrimitiveInfo *) AcquireQuantumMemory((size_t) number_points,\n    sizeof(*primitive_info));\n  if (primitive_info == (PrimitiveInfo *) NULL)\n    {\n      primitive=DestroyString(primitive);\n      for ( ; n >= 0; n--)\n        graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n      graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);\n      ThrowBinaryException(ResourceLimitError,\"MemoryAllocationFailed\",\n        image->filename);\n    }\n  graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  graphic_context[n]->viewbox=image->page;\n  if ((image->page.width == 0) || (image->page.height == 0))\n    {\n      graphic_context[n]->viewbox.width=image->columns;\n      graphic_context[n]->viewbox.height=image->rows;\n    }\n  token=AcquireString(primitive);\n  extent=strlen(token)+MaxTextExtent;\n  (void) QueryColorDatabase(\"#000000\",&start_color,&image->exception);\n  if (SetImageStorageClass(image,DirectClass) == MagickFalse)\n    return(MagickFalse);\n  status=MagickTrue;\n  for (q=primitive; *q != '\\0'; )\n  {\n    /*\n      Interpret graphic primitive.\n    */\n    GetNextToken(q,&q,MaxTextExtent,keyword);\n    if (*keyword == '\\0')\n      break;\n    if (*keyword == '#')\n      {\n        /*\n          Comment.\n        */\n        while ((*q != '\\n') && (*q != '\\0'))\n          q++;\n        continue;\n      }\n    p=q-strlen(keyword)-1;\n    primitive_type=UndefinedPrimitive;\n    current=graphic_context[n]->affine;\n    GetAffineMatrix(&affine);\n    switch (*keyword)\n    {\n      case ';':\n        break;\n      case 'a':\n      case 'A':\n      {\n        if (LocaleCompare(\"affine\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.sx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.rx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ry=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.sy=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.tx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ty=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"arc\",keyword) == 0)\n          {\n            primitive_type=ArcPrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'b':\n      case 'B':\n      {\n        if (LocaleCompare(\"bezier\",keyword) == 0)\n          {\n            primitive_type=BezierPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"border-color\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&graphic_context[n]->border_color,\n              &image->exception);\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'c':\n      case 'C':\n      {\n        if (LocaleCompare(\"clip-path\",keyword) == 0)\n          {\n            /*\n              Create clip mask.\n            */\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->clip_mask,token);\n            (void) DrawClipPath(image,graphic_context[n],\n              graphic_context[n]->clip_mask);\n            break;\n          }\n        if (LocaleCompare(\"clip-rule\",keyword) == 0)\n          {\n            ssize_t\n              fill_rule;\n\n            GetNextToken(q,&q,extent,token);\n            fill_rule=ParseCommandOption(MagickFillRuleOptions,MagickFalse,\n              token);\n            if (fill_rule == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->fill_rule=(FillRule) fill_rule;\n            break;\n          }\n        if (LocaleCompare(\"clip-units\",keyword) == 0)\n          {\n            ssize_t\n              clip_units;\n\n            GetNextToken(q,&q,extent,token);\n            clip_units=ParseCommandOption(MagickClipPathOptions,MagickFalse,\n              token);\n            if (clip_units == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->clip_units=(ClipPathUnits) clip_units;\n            if (clip_units == ObjectBoundingBox)\n              {\n                GetAffineMatrix(&current);\n                affine.sx=draw_info->bounds.x2;\n                affine.sy=draw_info->bounds.y2;\n                affine.tx=draw_info->bounds.x1;\n                affine.ty=draw_info->bounds.y1;\n                break;\n              }\n            break;\n          }\n        if (LocaleCompare(\"circle\",keyword) == 0)\n          {\n            primitive_type=CirclePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"color\",keyword) == 0)\n          {\n            primitive_type=ColorPrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'd':\n      case 'D':\n      {\n        if (LocaleCompare(\"decorate\",keyword) == 0)\n          {\n            ssize_t\n              decorate;\n\n            GetNextToken(q,&q,extent,token);\n            decorate=ParseCommandOption(MagickDecorateOptions,MagickFalse,\n              token);\n            if (decorate == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->decorate=(DecorationType) decorate;\n            break;\n          }\n        if (LocaleCompare(\"direction\",keyword) == 0)\n          {\n            ssize_t\n              direction;\n\n            GetNextToken(q,&q,extent,token);\n            direction=ParseCommandOption(MagickDirectionOptions,MagickFalse,\n              token);\n            if (direction == -1)\n              status=MagickFalse;\n            else\n              graphic_context[n]->direction=(DirectionType) direction;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'e':\n      case 'E':\n      {\n        if (LocaleCompare(\"ellipse\",keyword) == 0)\n          {\n            primitive_type=EllipsePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"encoding\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->encoding,token);\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'f':\n      case 'F':\n      {\n        if (LocaleCompare(\"fill\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) FormatLocaleString(pattern,MaxTextExtent,\"%s\",token);\n            if (GetImageArtifact(image,pattern) != (const char *) NULL)\n              (void) DrawPatternPath(image,draw_info,token,\n                &graphic_context[n]->fill_pattern);\n            else\n              {\n                status&=QueryColorDatabase(token,&graphic_context[n]->fill,\n                  &image->exception);\n                if (graphic_context[n]->fill_opacity != OpaqueOpacity)\n                  graphic_context[n]->fill.opacity=\n                    graphic_context[n]->fill_opacity;\n                if (status == MagickFalse)\n                  {\n                    ImageInfo\n                      *pattern_info;\n\n                    pattern_info=AcquireImageInfo();\n                    (void) CopyMagickString(pattern_info->filename,token,\n                      MaxTextExtent);\n                    graphic_context[n]->fill_pattern=\n                      ReadImage(pattern_info,&image->exception);\n                    CatchException(&image->exception);\n                    pattern_info=DestroyImageInfo(pattern_info);\n                  }\n              }\n            break;\n          }\n        if (LocaleCompare(\"fill-opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->fill.opacity=QuantumRange*factor*\n              StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"fill-rule\",keyword) == 0)\n          {\n            ssize_t\n              fill_rule;\n\n            GetNextToken(q,&q,extent,token);\n            fill_rule=ParseCommandOption(MagickFillRuleOptions,MagickFalse,\n              token);\n            if (fill_rule == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->fill_rule=(FillRule) fill_rule;\n            break;\n          }\n        if (LocaleCompare(\"font\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->font,token);\n            if (LocaleCompare(\"none\",token) == 0)\n              graphic_context[n]->font=(char *)\n                RelinquishMagickMemory(graphic_context[n]->font);\n            break;\n          }\n        if (LocaleCompare(\"font-family\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) CloneString(&graphic_context[n]->family,token);\n            break;\n          }\n        if (LocaleCompare(\"font-size\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->pointsize=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"font-stretch\",keyword) == 0)\n          {\n            ssize_t\n              stretch;\n\n            GetNextToken(q,&q,extent,token);\n            stretch=ParseCommandOption(MagickStretchOptions,MagickFalse,token);\n            if (stretch == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->stretch=(StretchType) stretch;\n            break;\n          }\n        if (LocaleCompare(\"font-style\",keyword) == 0)\n          {\n            ssize_t\n              style;\n\n            GetNextToken(q,&q,extent,token);\n            style=ParseCommandOption(MagickStyleOptions,MagickFalse,token);\n            if (style == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->style=(StyleType) style;\n            break;\n          }\n        if (LocaleCompare(\"font-weight\",keyword) == 0)\n          {\n            ssize_t\n              weight;\n\n            GetNextToken(q,&q,extent,token);\n            weight=ParseCommandOption(MagickWeightOptions,MagickFalse,token);\n            if (weight == -1)\n              weight=(ssize_t) StringToUnsignedLong(token);\n            graphic_context[n]->weight=(size_t) weight;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'g':\n      case 'G':\n      {\n        if (LocaleCompare(\"gradient-units\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"gravity\",keyword) == 0)\n          {\n            ssize_t\n              gravity;\n\n            GetNextToken(q,&q,extent,token);\n            gravity=ParseCommandOption(MagickGravityOptions,MagickFalse,token);\n            if (gravity == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->gravity=(GravityType) gravity;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'i':\n      case 'I':\n      {\n        if (LocaleCompare(\"image\",keyword) == 0)\n          {\n            ssize_t\n              compose;\n\n            primitive_type=ImagePrimitive;\n            GetNextToken(q,&q,extent,token);\n            compose=ParseCommandOption(MagickComposeOptions,MagickFalse,token);\n            if (compose == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->compose=(CompositeOperator) compose;\n            break;\n          }\n        if (LocaleCompare(\"interline-spacing\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->interline_spacing=StringToDouble(token,\n              &next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"interword-spacing\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->interword_spacing=StringToDouble(token,\n              &next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'k':\n      case 'K':\n      {\n        if (LocaleCompare(\"kerning\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->kerning=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'l':\n      case 'L':\n      {\n        if (LocaleCompare(\"line\",keyword) == 0)\n          {\n            primitive_type=LinePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'm':\n      case 'M':\n      {\n        if (LocaleCompare(\"matte\",keyword) == 0)\n          {\n            primitive_type=MattePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'o':\n      case 'O':\n      {\n        if (LocaleCompare(\"offset\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->fill_opacity=QuantumRange-QuantumRange*((1.0-\n              QuantumScale*graphic_context[n]->fill_opacity)*factor*\n              StringToDouble(token,&next_token));\n            graphic_context[n]->stroke_opacity=QuantumRange-QuantumRange*((1.0-\n              QuantumScale*graphic_context[n]->stroke_opacity)*factor*\n              StringToDouble(token,&next_token));\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'p':\n      case 'P':\n      {\n        if (LocaleCompare(\"path\",keyword) == 0)\n          {\n            primitive_type=PathPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"point\",keyword) == 0)\n          {\n            primitive_type=PointPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"polyline\",keyword) == 0)\n          {\n            primitive_type=PolylinePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"polygon\",keyword) == 0)\n          {\n            primitive_type=PolygonPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"pop\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            if (LocaleCompare(\"clip-path\",token) == 0)\n              break;\n            if (LocaleCompare(\"defs\",token) == 0)\n              break;\n            if (LocaleCompare(\"gradient\",token) == 0)\n              break;\n            if (LocaleCompare(\"graphic-context\",token) == 0)\n              {\n                if (n <= 0)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),DrawError,\n                      \"UnbalancedGraphicContextPushPop\",\"`%s'\",token);\n                    status=MagickFalse;\n                    n=0;\n                    break;\n                  }\n                if (graphic_context[n]->clip_mask != (char *) NULL)\n                  if (LocaleCompare(graphic_context[n]->clip_mask,\n                      graphic_context[n-1]->clip_mask) != 0)\n                    (void) SetImageClipMask(image,(Image *) NULL);\n                graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n                n--;\n                break;\n              }\n            if (LocaleCompare(\"pattern\",token) == 0)\n              break;\n            status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"push\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            if (LocaleCompare(\"clip-path\",token) == 0)\n              {\n                char\n                  name[MaxTextExtent];\n\n                GetNextToken(q,&q,extent,token);\n                (void) FormatLocaleString(name,MaxTextExtent,\"%s\",token);\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"clip-path\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                (void) SetImageArtifact(image,name,token);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"gradient\",token) == 0)\n              {\n                char\n                  key[2*MaxTextExtent],\n                  name[MaxTextExtent],\n                  type[MaxTextExtent];\n\n                SegmentInfo\n                  segment;\n\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(name,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(type,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                segment.x1=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.y1=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.x2=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                segment.y2=StringToDouble(token,&next_token);\n                if (token == next_token)\n                  status=MagickFalse;\n                if (LocaleCompare(type,\"radial\") == 0)\n                  {\n                    GetNextToken(q,&q,extent,token);\n                    if (*token == ',')\n                      GetNextToken(q,&q,extent,token);\n                  }\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"gradient\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                bounds.x1=graphic_context[n]->affine.sx*segment.x1+\n                  graphic_context[n]->affine.ry*segment.y1+\n                  graphic_context[n]->affine.tx;\n                bounds.y1=graphic_context[n]->affine.rx*segment.x1+\n                  graphic_context[n]->affine.sy*segment.y1+\n                  graphic_context[n]->affine.ty;\n                bounds.x2=graphic_context[n]->affine.sx*segment.x2+\n                  graphic_context[n]->affine.ry*segment.y2+\n                  graphic_context[n]->affine.tx;\n                bounds.y2=graphic_context[n]->affine.rx*segment.x2+\n                  graphic_context[n]->affine.sy*segment.y2+\n                  graphic_context[n]->affine.ty;\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s\",name);\n                (void) SetImageArtifact(image,key,token);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-type\",name);\n                (void) SetImageArtifact(image,key,type);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-geometry\",name);\n                (void) FormatLocaleString(geometry,MaxTextExtent,\n                  \"%gx%g%+.15g%+.15g\",\n                  MagickMax(fabs(bounds.x2-bounds.x1+1.0),1.0),\n                  MagickMax(fabs(bounds.y2-bounds.y1+1.0),1.0),\n                  bounds.x1,bounds.y1);\n                (void) SetImageArtifact(image,key,geometry);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"pattern\",token) == 0)\n              {\n                RectangleInfo\n                  bounds;\n\n                GetNextToken(q,&q,extent,token);\n                (void) CopyMagickString(name,token,MaxTextExtent);\n                GetNextToken(q,&q,extent,token);\n                bounds.x=(ssize_t) ceil(StringToDouble(token,&next_token)-0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.y=(ssize_t) ceil(StringToDouble(token,&next_token)-0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.width=(size_t) floor(StringToDouble(token,&next_token)+\n                  0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                GetNextToken(q,&q,extent,token);\n                if (*token == ',')\n                  GetNextToken(q,&q,extent,token);\n                bounds.height=(size_t) floor(StringToDouble(token,&next_token)+\n                  0.5);\n                if (token == next_token)\n                  status=MagickFalse;\n                for (p=q; *q != '\\0'; )\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (LocaleCompare(token,\"pop\") != 0)\n                    continue;\n                  GetNextToken(q,(const char **) NULL,extent,token);\n                  if (LocaleCompare(token,\"pattern\") != 0)\n                    continue;\n                  break;\n                }\n                (void) CopyMagickString(token,p,(size_t) (q-p-4+1));\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s\",name);\n                (void) SetImageArtifact(image,key,token);\n                (void) FormatLocaleString(key,MaxTextExtent,\"%s-geometry\",name);\n                (void) FormatLocaleString(geometry,MaxTextExtent,\n                  \"%.20gx%.20g%+.20g%+.20g\",(double) bounds.width,(double)\n                  bounds.height,(double) bounds.x,(double) bounds.y);\n                (void) SetImageArtifact(image,key,geometry);\n                GetNextToken(q,&q,extent,token);\n                break;\n              }\n            if (LocaleCompare(\"graphic-context\",token) == 0)\n              {\n                n++;\n                graphic_context=(DrawInfo **) ResizeQuantumMemory(\n                  graphic_context,(size_t) (n+1),sizeof(*graphic_context));\n                if (graphic_context == (DrawInfo **) NULL)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),ResourceLimitError,\n                      \"MemoryAllocationFailed\",\"`%s'\",image->filename);\n                    break;\n                  }\n                graphic_context[n]=CloneDrawInfo((ImageInfo *) NULL,\n                  graphic_context[n-1]);\n                break;\n              }\n            if (LocaleCompare(\"defs\",token) == 0)\n              break;\n            status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'r':\n      case 'R':\n      {\n        if (LocaleCompare(\"rectangle\",keyword) == 0)\n          {\n            primitive_type=RectanglePrimitive;\n            break;\n          }\n        if (LocaleCompare(\"rotate\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.sx=cos(DegreesToRadians(fmod((double) angle,360.0)));\n            affine.rx=sin(DegreesToRadians(fmod((double) angle,360.0)));\n            affine.ry=(-sin(DegreesToRadians(fmod((double) angle,360.0))));\n            affine.sy=cos(DegreesToRadians(fmod((double) angle,360.0)));\n            break;\n          }\n        if (LocaleCompare(\"roundRectangle\",keyword) == 0)\n          {\n            primitive_type=RoundRectanglePrimitive;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 's':\n      case 'S':\n      {\n        if (LocaleCompare(\"scale\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.sx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.sy=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"skewX\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.ry=sin(DegreesToRadians(angle));\n            break;\n          }\n        if (LocaleCompare(\"skewY\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            angle=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            affine.rx=(-tan(DegreesToRadians(angle)/2.0));\n            break;\n          }\n        if (LocaleCompare(\"stop-color\",keyword) == 0)\n          {\n            GradientType\n              type;\n\n            PixelPacket\n              stop_color;\n\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&stop_color,&image->exception);\n            type=LinearGradient;\n            if (draw_info->gradient.type == RadialGradient)\n              type=RadialGradient;\n            (void) GradientImage(image,type,PadSpread,&start_color,&stop_color);\n            start_color=stop_color;\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"stroke\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) FormatLocaleString(pattern,MaxTextExtent,\"%s\",token);\n            if (GetImageArtifact(image,pattern) != (const char *) NULL)\n              (void) DrawPatternPath(image,draw_info,token,\n                &graphic_context[n]->stroke_pattern);\n            else\n              {\n                status&=QueryColorDatabase(token,&graphic_context[n]->stroke,\n                  &image->exception);\n                if (graphic_context[n]->stroke_opacity != OpaqueOpacity)\n                  graphic_context[n]->stroke.opacity=\n                    graphic_context[n]->stroke_opacity;\n                if (status == MagickFalse)\n                  {\n                    ImageInfo\n                      *pattern_info;\n\n                    pattern_info=AcquireImageInfo();\n                    (void) CopyMagickString(pattern_info->filename,token,\n                      MaxTextExtent);\n                    graphic_context[n]->stroke_pattern=\n                      ReadImage(pattern_info,&image->exception);\n                    CatchException(&image->exception);\n                    pattern_info=DestroyImageInfo(pattern_info);\n                  }\n              }\n            break;\n          }\n        if (LocaleCompare(\"stroke-antialias\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->stroke_antialias=\n              StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-dasharray\",keyword) == 0)\n          {\n            if (graphic_context[n]->dash_pattern != (double *) NULL)\n              graphic_context[n]->dash_pattern=(double *)\n                RelinquishMagickMemory(graphic_context[n]->dash_pattern);\n            if (IsPoint(q) != MagickFalse)\n              {\n                const char\n                  *p;\n\n                p=q;\n                GetNextToken(p,&p,extent,token);\n                if (*token == ',')\n                  GetNextToken(p,&p,extent,token);\n                for (x=0; IsPoint(token) != MagickFalse; x++)\n                {\n                  GetNextToken(p,&p,extent,token);\n                  if (*token == ',')\n                    GetNextToken(p,&p,extent,token);\n                }\n                graphic_context[n]->dash_pattern=(double *)\n                  AcquireQuantumMemory((size_t) (2UL*x+1UL),\n                  sizeof(*graphic_context[n]->dash_pattern));\n                if (graphic_context[n]->dash_pattern == (double *) NULL)\n                  {\n                    (void) ThrowMagickException(&image->exception,\n                      GetMagickModule(),ResourceLimitError,\n                      \"MemoryAllocationFailed\",\"`%s'\",image->filename);\n                    status=MagickFalse;\n                    break;\n                  }\n                for (j=0; j < x; j++)\n                {\n                  GetNextToken(q,&q,extent,token);\n                  if (*token == ',')\n                    GetNextToken(q,&q,extent,token);\n                  graphic_context[n]->dash_pattern[j]=StringToDouble(token,\n                    &next_token);\n                  if (token == next_token)\n                    status=MagickFalse;\n                  if (graphic_context[n]->dash_pattern[j] < 0.0)\n                    status=MagickFalse;\n                }\n                if ((x & 0x01) != 0)\n                  for ( ; j < (2*x); j++)\n                    graphic_context[n]->dash_pattern[j]=\n                      graphic_context[n]->dash_pattern[j-x];\n                graphic_context[n]->dash_pattern[j]=0.0;\n                break;\n              }\n            GetNextToken(q,&q,extent,token);\n            break;\n          }\n        if (LocaleCompare(\"stroke-dashoffset\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->dash_offset=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-linecap\",keyword) == 0)\n          {\n            ssize_t\n              linecap;\n\n            GetNextToken(q,&q,extent,token);\n            linecap=ParseCommandOption(MagickLineCapOptions,MagickFalse,token);\n            if (linecap == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->linecap=(LineCap) linecap;\n            break;\n          }\n        if (LocaleCompare(\"stroke-linejoin\",keyword) == 0)\n          {\n            ssize_t\n              linejoin;\n\n            GetNextToken(q,&q,extent,token);\n            linejoin=ParseCommandOption(MagickLineJoinOptions,MagickFalse,\n              token);\n            if (linejoin == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->linejoin=(LineJoin) linejoin;\n            break;\n          }\n        if (LocaleCompare(\"stroke-miterlimit\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->miterlimit=StringToUnsignedLong(token);\n            break;\n          }\n        if (LocaleCompare(\"stroke-opacity\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            factor=strchr(token,'%') != (char *) NULL ? 0.01 : 1.0;\n            graphic_context[n]->stroke.opacity=QuantumRange*factor*\n              StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"stroke-width\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->stroke_width=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 't':\n      case 'T':\n      {\n        if (LocaleCompare(\"text\",keyword) == 0)\n          {\n            primitive_type=TextPrimitive;\n            break;\n          }\n        if (LocaleCompare(\"text-align\",keyword) == 0)\n          {\n            ssize_t\n              align;\n\n            GetNextToken(q,&q,extent,token);\n            align=ParseCommandOption(MagickAlignOptions,MagickFalse,token);\n            if (align == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->align=(AlignType) align;\n            break;\n          }\n        if (LocaleCompare(\"text-anchor\",keyword) == 0)\n          {\n            ssize_t\n              align;\n\n            GetNextToken(q,&q,extent,token);\n            align=ParseCommandOption(MagickAlignOptions,MagickFalse,token);\n            if (align == -1)\n              {\n                status=MagickFalse;\n                break;\n              }\n            graphic_context[n]->align=(AlignType) align;\n            break;\n          }\n        if (LocaleCompare(\"text-antialias\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->text_antialias=\n              StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n            break;\n          }\n        if (LocaleCompare(\"text-undercolor\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            (void) QueryColorDatabase(token,&graphic_context[n]->undercolor,\n              &image->exception);\n            break;\n          }\n        if (LocaleCompare(\"translate\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            affine.tx=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            affine.ty=StringToDouble(token,&next_token);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      case 'v':\n      case 'V':\n      {\n        if (LocaleCompare(\"viewbox\",keyword) == 0)\n          {\n            GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.x=(ssize_t) ceil(StringToDouble(token,\n              &next_token)-0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.y=(ssize_t) ceil(StringToDouble(token,\n              &next_token)-0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.width=(size_t) floor(StringToDouble(\n              token,&next_token)+0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            GetNextToken(q,&q,extent,token);\n            if (*token == ',')\n              GetNextToken(q,&q,extent,token);\n            graphic_context[n]->viewbox.height=(size_t) floor(StringToDouble(\n              token,&next_token)+0.5);\n            if (token == next_token)\n              status=MagickFalse;\n            break;\n          }\n        status=MagickFalse;\n        break;\n      }\n      default:\n      {\n        status=MagickFalse;\n        break;\n      }\n    }\n    if (status == MagickFalse)\n      break;\n    if ((fabs(affine.sx-1.0) >= DrawEpsilon) ||\n        (fabs(affine.rx) >= DrawEpsilon) ||\n        (fabs(affine.ry) >= DrawEpsilon) ||\n        (fabs(affine.sy-1.0) >= DrawEpsilon) ||\n        (fabs(affine.tx) >= DrawEpsilon) ||\n        (fabs(affine.ty) >= DrawEpsilon))\n      {\n        graphic_context[n]->affine.sx=current.sx*affine.sx+current.ry*affine.rx;\n        graphic_context[n]->affine.rx=current.rx*affine.sx+current.sy*affine.rx;\n        graphic_context[n]->affine.ry=current.sx*affine.ry+current.ry*affine.sy;\n        graphic_context[n]->affine.sy=current.rx*affine.ry+current.sy*affine.sy;\n        graphic_context[n]->affine.tx=current.sx*affine.tx+current.ry*affine.ty+\n          current.tx;\n        graphic_context[n]->affine.ty=current.rx*affine.tx+current.sy*affine.ty+\n          current.ty;\n      }\n    if (primitive_type == UndefinedPrimitive)\n      {\n        if (image->debug != MagickFalse)\n          (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  %.*s\",\n            (int) (q-p),p);\n        continue;\n      }\n    /*\n      Parse the primitive attributes.\n    */\n    i=0;\n    j=0;\n    primitive_info[0].point.x=0.0;\n    primitive_info[0].point.y=0.0;\n    for (x=0; *q != '\\0'; x++)\n    {\n      /*\n        Define points.\n      */\n      if (IsPoint(q) == MagickFalse)\n        break;\n      GetNextToken(q,&q,extent,token);\n      point.x=StringToDouble(token,&next_token);\n      if (token == next_token)\n        status=MagickFalse;\n      GetNextToken(q,&q,extent,token);\n      if (*token == ',')\n        GetNextToken(q,&q,extent,token);\n      point.y=StringToDouble(token,&next_token);\n      if (token == next_token)\n        status=MagickFalse;\n      GetNextToken(q,(const char **) NULL,extent,token);\n      if (*token == ',')\n        GetNextToken(q,&q,extent,token);\n      primitive_info[i].primitive=primitive_type;\n      primitive_info[i].point=point;\n      primitive_info[i].coordinates=0;\n      primitive_info[i].method=FloodfillMethod;\n      i++;\n      if (i < (ssize_t) number_points)\n        continue;\n      number_points<<=1;\n      primitive_info=(PrimitiveInfo *) ResizeQuantumMemory(primitive_info,\n        (size_t) number_points,sizeof(*primitive_info));\n      if ((primitive_info == (PrimitiveInfo *) NULL) ||\n          (number_points != (MagickSizeType) ((size_t) number_points)))\n        {\n          (void) ThrowMagickException(&image->exception,GetMagickModule(),\n            ResourceLimitError,\"MemoryAllocationFailed\",\"`%s'\",image->filename);\n          break;\n        }\n    }\n    primitive_info[j].primitive=primitive_type;\n    primitive_info[j].coordinates=(size_t) x;\n    primitive_info[j].method=FloodfillMethod;\n    primitive_info[j].text=(char *) NULL;\n    /*\n      Circumscribe primitive within a circle.\n    */\n    bounds.x1=primitive_info[j].point.x;\n    bounds.y1=primitive_info[j].point.y;\n    bounds.x2=primitive_info[j].point.x;\n    bounds.y2=primitive_info[j].point.y;\n    for (k=1; k < (ssize_t) primitive_info[j].coordinates; k++)\n    {\n      point=primitive_info[j+k].point;\n      if (point.x < bounds.x1)\n        bounds.x1=point.x;\n      if (point.y < bounds.y1)\n        bounds.y1=point.y;\n      if (point.x > bounds.x2)\n        bounds.x2=point.x;\n      if (point.y > bounds.y2)\n        bounds.y2=point.y;\n    }\n    /*\n      Speculate how many points our primitive might consume.\n    */\n    length=primitive_info[j].coordinates;\n    switch (primitive_type)\n    {\n      case RectanglePrimitive:\n      {\n        length*=5;\n        break;\n      }\n      case RoundRectanglePrimitive:\n      {\n        double\n          alpha,\n          beta,\n          radius;\n\n        alpha=bounds.x2-bounds.x1;\n        beta=bounds.y2-bounds.y1;\n        radius=hypot((double) alpha,(double) beta);\n        length*=5;\n        length+=2*((size_t) ceil((double) MagickPI*radius))+6*BezierQuantum+360;\n        break;\n      }\n      case BezierPrimitive:\n      {\n        if (primitive_info[j].coordinates > 107)\n          (void) ThrowMagickException(&image->exception,GetMagickModule(),\n            DrawError,\"TooManyBezierCoordinates\",\"`%s'\",token);\n        length=BezierQuantum*primitive_info[j].coordinates;\n        break;\n      }\n      case PathPrimitive:\n      {\n        char\n          *s,\n          *t;\n\n        GetNextToken(q,&q,extent,token);\n        length=1;\n        t=token;\n        for (s=token; *s != '\\0'; s=t)\n        {\n          double\n            value;\n\n          value=StringToDouble(s,&t);\n          (void) value;\n          if (s == t)\n            {\n              t++;\n              continue;\n            }\n          length++;\n        }\n        length=length*BezierQuantum;\n        break;\n      }\n      case CirclePrimitive:\n      case ArcPrimitive:\n      case EllipsePrimitive:\n      {\n        double\n          alpha,\n          beta,\n          radius;\n\n        alpha=bounds.x2-bounds.x1;\n        beta=bounds.y2-bounds.y1;\n        radius=hypot((double) alpha,(double) beta);\n        length=2*((size_t) ceil((double) MagickPI*radius))+6*BezierQuantum+360;\n        break;\n      }\n      default:\n        break;\n    }\n    if ((i+length) >= number_points)\n      {\n        /*\n          Resize based on speculative points required by primitive.\n        */\n        number_points+=length+1;\n        primitive_info=(PrimitiveInfo *) ResizeQuantumMemory(primitive_info,\n          (size_t) number_points,sizeof(*primitive_info));\n        if ((primitive_info == (PrimitiveInfo *) NULL) ||\n            (number_points != (MagickSizeType) ((size_t) number_points)))\n          {\n            (void) ThrowMagickException(&image->exception,GetMagickModule(),\n              ResourceLimitError,\"MemoryAllocationFailed\",\"`%s'\",\n              image->filename);\n            break;\n          }\n      }\n    switch (primitive_type)\n    {\n      case PointPrimitive:\n      default:\n      {\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TracePoint(primitive_info+j,primitive_info[j].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case LinePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceLine(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case RectanglePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceRectangle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case RoundRectanglePrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceRoundRectangle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case ArcPrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            primitive_type=UndefinedPrimitive;\n            break;\n          }\n        TraceArc(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case EllipsePrimitive:\n      {\n        if (primitive_info[j].coordinates != 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceEllipse(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point,primitive_info[j+2].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case CirclePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceCircle(primitive_info+j,primitive_info[j].point,\n          primitive_info[j+1].point);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case PolylinePrimitive:\n        break;\n      case PolygonPrimitive:\n      {\n        primitive_info[i]=primitive_info[j];\n        primitive_info[i].coordinates=0;\n        primitive_info[j].coordinates++;\n        i++;\n        break;\n      }\n      case BezierPrimitive:\n      {\n        if (primitive_info[j].coordinates < 3)\n          {\n            status=MagickFalse;\n            break;\n          }\n        TraceBezier(primitive_info+j,primitive_info[j].coordinates);\n        i=(ssize_t) (j+primitive_info[j].coordinates);\n        break;\n      }\n      case PathPrimitive:\n      {\n        i=(ssize_t) (j+TracePath(primitive_info+j,token));\n        break;\n      }\n      case ColorPrimitive:\n      case MattePrimitive:\n      {\n        ssize_t\n          method;\n\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        GetNextToken(q,&q,extent,token);\n        method=ParseCommandOption(MagickMethodOptions,MagickFalse,token);\n        if (method == -1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        primitive_info[j].method=(PaintMethod) method;\n        break;\n      }\n      case TextPrimitive:\n      {\n        if (primitive_info[j].coordinates != 1)\n          {\n            status=MagickFalse;\n            break;\n          }\n        if (*token != ',')\n          GetNextToken(q,&q,extent,token);\n        primitive_info[j].text=AcquireString(token);\n        break;\n      }\n      case ImagePrimitive:\n      {\n        if (primitive_info[j].coordinates != 2)\n          {\n            status=MagickFalse;\n            break;\n          }\n        GetNextToken(q,&q,extent,token);\n        primitive_info[j].text=AcquireString(token);\n        break;\n      }\n    }\n    if (primitive_info == (PrimitiveInfo *) NULL)\n      break;\n    if (image->debug != MagickFalse)\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  %.*s\",(int) (q-p),p);\n    if (status == MagickFalse)\n      break;\n    primitive_info[i].primitive=UndefinedPrimitive;\n    if (i == 0)\n      continue;\n    /*\n      Transform points.\n    */\n    for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n    {\n      point=primitive_info[i].point;\n      primitive_info[i].point.x=graphic_context[n]->affine.sx*point.x+\n        graphic_context[n]->affine.ry*point.y+graphic_context[n]->affine.tx;\n      primitive_info[i].point.y=graphic_context[n]->affine.rx*point.x+\n        graphic_context[n]->affine.sy*point.y+graphic_context[n]->affine.ty;\n      point=primitive_info[i].point;\n      if (point.x < graphic_context[n]->bounds.x1)\n        graphic_context[n]->bounds.x1=point.x;\n      if (point.y < graphic_context[n]->bounds.y1)\n        graphic_context[n]->bounds.y1=point.y;\n      if (point.x > graphic_context[n]->bounds.x2)\n        graphic_context[n]->bounds.x2=point.x;\n      if (point.y > graphic_context[n]->bounds.y2)\n        graphic_context[n]->bounds.y2=point.y;\n      if (primitive_info[i].primitive == ImagePrimitive)\n        break;\n      if (i >= (ssize_t) number_points)\n        ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n    }\n    if (graphic_context[n]->render != MagickFalse)\n      {\n        if ((n != 0) && (graphic_context[n]->clip_mask != (char *) NULL) &&\n            (LocaleCompare(graphic_context[n]->clip_mask,\n             graphic_context[n-1]->clip_mask) != 0))\n          status&=DrawClipPath(image,graphic_context[n],\n            graphic_context[n]->clip_mask);\n        status&=DrawPrimitive(image,graphic_context[n],primitive_info);\n      }\n    if (primitive_info->text != (char *) NULL)\n      primitive_info->text=(char *) RelinquishMagickMemory(\n        primitive_info->text);\n    proceed=SetImageProgress(image,RenderImageTag,q-primitive,(MagickSizeType)\n      primitive_extent);\n    if (proceed == MagickFalse)\n      break;\n    if (status == 0)\n      break;\n  }\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end draw-image\");\n  /*\n    Relinquish resources.\n  */\n  token=DestroyString(token);\n  if (primitive_info != (PrimitiveInfo *) NULL)\n    primitive_info=(PrimitiveInfo *) RelinquishMagickMemory(primitive_info);\n  primitive=DestroyString(primitive);\n  for ( ; n >= 0; n--)\n    graphic_context[n]=DestroyDrawInfo(graphic_context[n]);\n  graphic_context=(DrawInfo **) RelinquishMagickMemory(graphic_context);\n  if (status == MagickFalse)\n    ThrowBinaryException(DrawError,\"NonconformingDrawingPrimitiveDefinition\",\n      keyword);\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%     D r a w G r a d i e n t I m a g e                                       %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawGradientImage() draws a linear gradient on the image.\n%\n%  The format of the DrawGradientImage method is:\n%\n%      MagickBooleanType DrawGradientImage(Image *image,\n%        const DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o _info: the draw info.\n%\n*/\n\nstatic inline double GetStopColorOffset(const GradientInfo *gradient,\n  const ssize_t x,const ssize_t y)\n{\n  switch (gradient->type)\n  {\n    case UndefinedGradient:\n    case LinearGradient:\n    {\n      double\n        gamma,\n        length,\n        offset,\n        scale;\n\n      PointInfo\n        p,\n        q;\n\n      const SegmentInfo\n        *gradient_vector;\n\n      gradient_vector=(&gradient->gradient_vector);\n      p.x=gradient_vector->x2-gradient_vector->x1;\n      p.y=gradient_vector->y2-gradient_vector->y1;\n      q.x=(double) x-gradient_vector->x1;\n      q.y=(double) y-gradient_vector->y1;\n      length=sqrt(q.x*q.x+q.y*q.y);\n      gamma=sqrt(p.x*p.x+p.y*p.y)*length;\n      gamma=PerceptibleReciprocal(gamma);\n      scale=p.x*q.x+p.y*q.y;\n      offset=gamma*scale*length;\n      return(offset);\n    }\n    case RadialGradient:\n    {\n      PointInfo\n        v;\n\n      if (gradient->spread == RepeatSpread)\n        {\n          v.x=(double) x-gradient->center.x;\n          v.y=(double) y-gradient->center.y;\n          return(sqrt(v.x*v.x+v.y*v.y));\n        }\n      v.x=(double) (((x-gradient->center.x)*cos(DegreesToRadians(\n        gradient->angle)))+((y-gradient->center.y)*sin(DegreesToRadians(\n        gradient->angle))))/gradient->radii.x;\n      v.y=(double) (((x-gradient->center.x)*sin(DegreesToRadians(\n        gradient->angle)))-((y-gradient->center.y)*cos(DegreesToRadians(\n        gradient->angle))))/gradient->radii.y;\n      return(sqrt(v.x*v.x+v.y*v.y));\n    }\n  }\n  return(0.0);\n}\n\nMagickExport MagickBooleanType DrawGradientImage(Image *image,\n  const DrawInfo *draw_info)\n{\n  CacheView\n    *image_view;\n\n  const GradientInfo\n    *gradient;\n\n  const SegmentInfo\n    *gradient_vector;\n\n  double\n    length;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    status;\n\n  MagickPixelPacket\n    zero;\n\n  PointInfo\n    point;\n\n  RectangleInfo\n    bounding_box;\n\n  ssize_t\n    y;\n\n  /*\n    Draw linear or radial gradient on image.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  gradient=(&draw_info->gradient);\n  gradient_vector=(&gradient->gradient_vector);\n  point.x=gradient_vector->x2-gradient_vector->x1;\n  point.y=gradient_vector->y2-gradient_vector->y1;\n  length=sqrt(point.x*point.x+point.y*point.y);\n  bounding_box=gradient->bounding_box;\n  status=MagickTrue;\n  exception=(&image->exception);\n  GetMagickPixelPacket(image,&zero);\n  image_view=AcquireAuthenticCacheView(image,exception);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(image,image,1,1)\n#endif\n  for (y=bounding_box.y; y < (ssize_t) bounding_box.height; y++)\n  {\n    double\n      alpha,\n      offset;\n\n    MagickPixelPacket\n      composite,\n      pixel;\n\n    register IndexPacket\n      *magick_restrict indexes;\n\n    register ssize_t\n      i,\n      x;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    ssize_t\n      j;\n\n    if (status == MagickFalse)\n      continue;\n    q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,exception);\n    if (q == (PixelPacket *) NULL)\n      {\n        status=MagickFalse;\n        continue;\n      }\n    indexes=GetCacheViewAuthenticIndexQueue(image_view);\n    pixel=zero;\n    composite=zero;\n    offset=GetStopColorOffset(gradient,0,y);\n    if (gradient->type != RadialGradient)\n      offset/=length;\n    for (x=bounding_box.x; x < (ssize_t) bounding_box.width; x++)\n    {\n      SetMagickPixelPacket(image,q,indexes+x,&pixel);\n      switch (gradient->spread)\n      {\n        case UndefinedSpread:\n        case PadSpread:\n        {\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type != RadialGradient)\n                offset/=length;\n            }\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if ((offset < 0.0) || (i == 0))\n            composite=gradient->stops[0].color;\n          else\n            if ((offset > 1.0) || (i == (ssize_t) gradient->number_stops))\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n        case ReflectSpread:\n        {\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type != RadialGradient)\n                offset/=length;\n            }\n          if (offset < 0.0)\n            offset=(-offset);\n          if ((ssize_t) fmod(offset,2.0) == 0)\n            offset=fmod(offset,1.0);\n          else\n            offset=1.0-fmod(offset,1.0);\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if (i == 0)\n            composite=gradient->stops[0].color;\n          else\n            if (i == (ssize_t) gradient->number_stops)\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n        case RepeatSpread:\n        {\n          double\n            repeat;\n\n          MagickBooleanType\n            antialias;\n\n          antialias=MagickFalse;\n          repeat=0.0;\n          if ((x != (ssize_t) ceil(gradient_vector->x1-0.5)) ||\n              (y != (ssize_t) ceil(gradient_vector->y1-0.5)))\n            {\n              offset=GetStopColorOffset(gradient,x,y);\n              if (gradient->type == LinearGradient)\n                {\n                  repeat=fmod(offset,length);\n                  if (repeat < 0.0)\n                    repeat=length-fmod(-repeat,length);\n                  else\n                    repeat=fmod(offset,length);\n                  antialias=(repeat < length) && ((repeat+1.0) > length) ?\n                    MagickTrue : MagickFalse;\n                  offset=repeat/length;\n                }\n              else\n                {\n                  repeat=fmod(offset,(double) gradient->radius);\n                  if (repeat < 0.0)\n                    repeat=gradient->radius-fmod(-repeat,\n                      (double) gradient->radius);\n                  else\n                    repeat=fmod(offset,(double) gradient->radius);\n                  antialias=repeat+1.0 > gradient->radius ? MagickTrue :\n                    MagickFalse;\n                  offset=repeat/gradient->radius;\n                }\n            }\n          for (i=0; i < (ssize_t) gradient->number_stops; i++)\n            if (offset < gradient->stops[i].offset)\n              break;\n          if (i == 0)\n            composite=gradient->stops[0].color;\n          else\n            if (i == (ssize_t) gradient->number_stops)\n              composite=gradient->stops[gradient->number_stops-1].color;\n            else\n              {\n                j=i;\n                i--;\n                alpha=(offset-gradient->stops[i].offset)/\n                  (gradient->stops[j].offset-gradient->stops[i].offset);\n                if (antialias != MagickFalse)\n                  {\n                    if (gradient->type == LinearGradient)\n                      alpha=length-repeat;\n                    else\n                      alpha=gradient->radius-repeat;\n                    i=0;\n                    j=(ssize_t) gradient->number_stops-1L;\n                  }\n                MagickPixelCompositeBlend(&gradient->stops[i].color,1.0-alpha,\n                  &gradient->stops[j].color,alpha,&composite);\n              }\n          break;\n        }\n      }\n      MagickPixelCompositeOver(&composite,composite.opacity,&pixel,\n        pixel.opacity,&pixel);\n      SetPixelPacket(image,&pixel,q,indexes+x);\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  image_view=DestroyCacheView(image_view);\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w P a t t e r n P a t h                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPatternPath() draws a pattern.\n%\n%  The format of the DrawPatternPath method is:\n%\n%      MagickBooleanType DrawPatternPath(Image *image,const DrawInfo *draw_info,\n%        const char *name,Image **pattern)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o name: the pattern name.\n%\n%    o image: the image.\n%\n*/\nMagickExport MagickBooleanType DrawPatternPath(Image *image,\n  const DrawInfo *draw_info,const char *name,Image **pattern)\n{\n  char\n    property[MaxTextExtent];\n\n  const char\n    *geometry,\n    *path,\n    *type;\n\n  DrawInfo\n    *clone_info;\n\n  ImageInfo\n    *image_info;\n\n  MagickBooleanType\n    status;\n\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (const DrawInfo *) NULL);\n  assert(name != (const char *) NULL);\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s\",name);\n  path=GetImageArtifact(image,property);\n  if (path == (const char *) NULL)\n    return(MagickFalse);\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s-geometry\",name);\n  geometry=GetImageArtifact(image,property);\n  if (geometry == (const char *) NULL)\n    return(MagickFalse);\n  if ((*pattern) != (Image *) NULL)\n    *pattern=DestroyImage(*pattern);\n  image_info=AcquireImageInfo();\n  image_info->size=AcquireString(geometry);\n  *pattern=AcquireImage(image_info);\n  image_info=DestroyImageInfo(image_info);\n  (void) QueryColorDatabase(\"#00000000\",&(*pattern)->background_color,\n    &image->exception);\n  (void) SetImageBackgroundColor(*pattern);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"begin pattern-path %s %s\",name,geometry);\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->fill_pattern=NewImageList();\n  clone_info->stroke_pattern=NewImageList();\n  (void) FormatLocaleString(property,MaxTextExtent,\"%s-type\",name);\n  type=GetImageArtifact(image,property);\n  if (type != (const char *) NULL)\n    clone_info->gradient.type=(GradientType) ParseCommandOption(\n      MagickGradientOptions,MagickFalse,type);\n  (void) CloneString(&clone_info->primitive,path);\n  status=DrawImage(*pattern,clone_info);\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"end pattern-path\");\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w P o l y g o n P r i m i t i v e                                   %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPolygonPrimitive() draws a polygon on the image.\n%\n%  The format of the DrawPolygonPrimitive method is:\n%\n%      MagickBooleanType DrawPolygonPrimitive(Image *image,\n%        const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n*/\n\nstatic PolygonInfo **DestroyPolygonThreadSet(PolygonInfo **polygon_info)\n{\n  register ssize_t\n    i;\n\n  assert(polygon_info != (PolygonInfo **) NULL);\n  for (i=0; i < (ssize_t) GetMagickResourceLimit(ThreadResource); i++)\n    if (polygon_info[i] != (PolygonInfo *) NULL)\n      polygon_info[i]=DestroyPolygonInfo(polygon_info[i]);\n  polygon_info=(PolygonInfo **) RelinquishMagickMemory(polygon_info);\n  return(polygon_info);\n}\n\nstatic PolygonInfo **AcquirePolygonThreadSet(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  PathInfo\n    *magick_restrict path_info;\n\n  PolygonInfo\n    **polygon_info;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_threads;\n\n  number_threads=(size_t) GetMagickResourceLimit(ThreadResource);\n  polygon_info=(PolygonInfo **) AcquireQuantumMemory(number_threads,\n    sizeof(*polygon_info));\n  if (polygon_info == (PolygonInfo **) NULL)\n    return((PolygonInfo **) NULL);\n  (void) ResetMagickMemory(polygon_info,0,(size_t)\n    GetMagickResourceLimit(ThreadResource)*sizeof(*polygon_info));\n  path_info=ConvertPrimitiveToPath(draw_info,primitive_info);\n  if (path_info == (PathInfo *) NULL)\n    return(DestroyPolygonThreadSet(polygon_info));\n  for (i=0; i < (ssize_t) number_threads; i++)\n  {\n    polygon_info[i]=ConvertPathToPolygon(path_info);\n    if (polygon_info[i] == (PolygonInfo *) NULL)\n      return(DestroyPolygonThreadSet(polygon_info));\n  }\n  path_info=(PathInfo *) RelinquishMagickMemory(path_info);\n  return(polygon_info);\n}\n\nstatic double GetOpacityPixel(PolygonInfo *polygon_info,const double mid,\n  const MagickBooleanType fill,const FillRule fill_rule,const ssize_t x,\n  const ssize_t y,double *stroke_opacity)\n{\n  double\n    alpha,\n    beta,\n    distance,\n    subpath_opacity;\n\n  PointInfo\n    delta;\n\n  register EdgeInfo\n    *p;\n\n  register const PointInfo\n    *q;\n\n  register ssize_t\n    i;\n\n  ssize_t\n    j,\n    winding_number;\n\n  /*\n    Compute fill & stroke opacity for this (x,y) point.\n  */\n  *stroke_opacity=0.0;\n  subpath_opacity=0.0;\n  p=polygon_info->edges;\n  for (j=0; j < (ssize_t) polygon_info->number_edges; j++, p++)\n  {\n    if ((double) y <= (p->bounds.y1-mid-0.5))\n      break;\n    if ((double) y > (p->bounds.y2+mid+0.5))\n      {\n        (void) DestroyEdge(polygon_info,(size_t) j);\n        continue;\n      }\n    if (((double) x <= (p->bounds.x1-mid-0.5)) ||\n        ((double) x > (p->bounds.x2+mid+0.5)))\n      continue;\n    i=(ssize_t) MagickMax((double) p->highwater,1.0);\n    for ( ; i < (ssize_t) p->number_points; i++)\n    {\n      if ((double) y <= (p->points[i-1].y-mid-0.5))\n        break;\n      if ((double) y > (p->points[i].y+mid+0.5))\n        continue;\n      if (p->scanline != (double) y)\n        {\n          p->scanline=(double) y;\n          p->highwater=(size_t) i;\n        }\n      /*\n        Compute distance between a point and an edge.\n      */\n      q=p->points+i-1;\n      delta.x=(q+1)->x-q->x;\n      delta.y=(q+1)->y-q->y;\n      beta=delta.x*(x-q->x)+delta.y*(y-q->y);\n      if (beta < 0.0)\n        {\n          delta.x=(double) x-q->x;\n          delta.y=(double) y-q->y;\n          distance=delta.x*delta.x+delta.y*delta.y;\n        }\n      else\n        {\n          alpha=delta.x*delta.x+delta.y*delta.y;\n          if (beta > alpha)\n            {\n              delta.x=(double) x-(q+1)->x;\n              delta.y=(double) y-(q+1)->y;\n              distance=delta.x*delta.x+delta.y*delta.y;\n            }\n          else\n            {\n              alpha=1.0/alpha;\n              beta=delta.x*(y-q->y)-delta.y*(x-q->x);\n              distance=alpha*beta*beta;\n            }\n        }\n      /*\n        Compute stroke & subpath opacity.\n      */\n      beta=0.0;\n      if (p->ghostline == MagickFalse)\n        {\n          alpha=mid+0.5;\n          if ((*stroke_opacity < 1.0) &&\n              (distance <= ((alpha+0.25)*(alpha+0.25))))\n            {\n              alpha=mid-0.5;\n              if (distance <= ((alpha+0.25)*(alpha+0.25)))\n                *stroke_opacity=1.0;\n              else\n                {\n                  beta=1.0;\n                  if (fabs(distance-1.0) >= DrawEpsilon)\n                    beta=sqrt((double) distance);\n                  alpha=beta-mid-0.5;\n                  if (*stroke_opacity < ((alpha-0.25)*(alpha-0.25)))\n                    *stroke_opacity=(alpha-0.25)*(alpha-0.25);\n                }\n            }\n        }\n      if ((fill == MagickFalse) || (distance > 1.0) || (subpath_opacity >= 1.0))\n        continue;\n      if (distance <= 0.0)\n        {\n          subpath_opacity=1.0;\n          continue;\n        }\n      if (distance > 1.0)\n        continue;\n      if (fabs(beta) < DrawEpsilon)\n        {\n          beta=1.0;\n          if (fabs(distance-1.0) >= DrawEpsilon)\n            beta=sqrt(distance);\n        }\n      alpha=beta-1.0;\n      if (subpath_opacity < (alpha*alpha))\n        subpath_opacity=alpha*alpha;\n    }\n  }\n  /*\n    Compute fill opacity.\n  */\n  if (fill == MagickFalse)\n    return(0.0);\n  if (subpath_opacity >= 1.0)\n    return(1.0);\n  /*\n    Determine winding number.\n  */\n  winding_number=0;\n  p=polygon_info->edges;\n  for (j=0; j < (ssize_t) polygon_info->number_edges; j++, p++)\n  {\n    if ((double) y <= p->bounds.y1)\n      break;\n    if (((double) y > p->bounds.y2) || ((double) x <= p->bounds.x1))\n      continue;\n    if ((double) x > p->bounds.x2)\n      {\n        winding_number+=p->direction ? 1 : -1;\n        continue;\n      }\n    i=(ssize_t) MagickMax((double) p->highwater,1.0);\n    for ( ; i < (ssize_t) p->number_points; i++)\n      if ((double) y <= p->points[i].y)\n        break;\n    q=p->points+i-1;\n    if ((((q+1)->x-q->x)*(y-q->y)) <= (((q+1)->y-q->y)*(x-q->x)))\n      winding_number+=p->direction ? 1 : -1;\n  }\n  if (fill_rule != NonZeroRule)\n    {\n      if ((MagickAbsoluteValue(winding_number) & 0x01) != 0)\n        return(1.0);\n    }\n  else\n    if (MagickAbsoluteValue(winding_number) != 0)\n      return(1.0);\n  return(subpath_opacity);\n}\n\nstatic MagickBooleanType DrawPolygonPrimitive(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  CacheView\n    *image_view;\n\n  double\n    mid;\n\n  ExceptionInfo\n    *exception;\n\n  MagickBooleanType\n    fill,\n    status;\n\n  PolygonInfo\n    **magick_restrict polygon_info;\n\n  register EdgeInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  SegmentInfo\n    bounds;\n\n  ssize_t\n    start_y,\n    stop_y,\n    y;\n\n  /*\n    Compute bounding box.\n  */\n  assert(image != (Image *) NULL);\n  assert(image->signature == MagickSignature);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"%s\",image->filename);\n  assert(draw_info != (DrawInfo *) NULL);\n  assert(draw_info->signature == MagickSignature);\n  assert(primitive_info != (PrimitiveInfo *) NULL);\n  if (primitive_info->coordinates == 0)\n    return(MagickTrue);\n  polygon_info=AcquirePolygonThreadSet(draw_info,primitive_info);\n  if (polygon_info == (PolygonInfo **) NULL)\n    return(MagickFalse);\nDisableMSCWarning(4127)\n  if (0)\n    DrawBoundingRectangles(image,draw_info,polygon_info[0]);\nRestoreMSCWarning\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    begin draw-polygon\");\n  fill=(primitive_info->method == FillToBorderMethod) ||\n    (primitive_info->method == FloodfillMethod) ? MagickTrue : MagickFalse;\n  mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n  bounds=polygon_info[0]->edges[0].bounds;\n  for (i=1; i < (ssize_t) polygon_info[0]->number_edges; i++)\n  {\n    p=polygon_info[0]->edges+i;\n    if (p->bounds.x1 < bounds.x1)\n      bounds.x1=p->bounds.x1;\n    if (p->bounds.y1 < bounds.y1)\n      bounds.y1=p->bounds.y1;\n    if (p->bounds.x2 > bounds.x2)\n      bounds.x2=p->bounds.x2;\n    if (p->bounds.y2 > bounds.y2)\n      bounds.y2=p->bounds.y2;\n  }\n  bounds.x1-=(mid+1.0);\n  bounds.x1=bounds.x1 < 0.0 ? 0.0 : (size_t) ceil(bounds.x1-0.5) >=\n    image->columns ? (double) image->columns-1 : bounds.x1;\n  bounds.y1-=(mid+1.0);\n  bounds.y1=bounds.y1 < 0.0 ? 0.0 : (size_t) ceil(bounds.y1-0.5) >=\n    image->rows ? (double) image->rows-1 : bounds.y1;\n  bounds.x2+=(mid+1.0);\n  bounds.x2=bounds.x2 < 0.0 ? 0.0 : (size_t) floor(bounds.x2+0.5) >=\n    image->columns ? (double) image->columns-1 : bounds.x2;\n  bounds.y2+=(mid+1.0);\n  bounds.y2=bounds.y2 < 0.0 ? 0.0 : (size_t) floor(bounds.y2+0.5) >=\n    image->rows ? (double) image->rows-1 : bounds.y2;\n  status=MagickTrue;\n  exception=(&image->exception);\n  image_view=AcquireAuthenticCacheView(image,exception);\n  if ((primitive_info->coordinates == 1) ||\n      (polygon_info[0]->number_edges == 0))\n    {\n      /*\n        Draw point.\n      */\n      start_y=(ssize_t) ceil(bounds.y1-0.5);\n      stop_y=(ssize_t) floor(bounds.y2+0.5);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n      #pragma omp parallel for schedule(static,4) shared(status) \\\n        magick_threads(image,image,1,1)\n#endif\n      for (y=start_y; y <= stop_y; y++)\n      {\n        MagickBooleanType\n          sync;\n\n        register PixelPacket\n          *magick_restrict q;\n\n        register ssize_t\n          x;\n\n        ssize_t\n          start_x,\n          stop_x;\n\n        if (status == MagickFalse)\n          continue;\n        start_x=(ssize_t) ceil(bounds.x1-0.5);\n        stop_x=(ssize_t) floor(bounds.x2+0.5);\n        x=start_x;\n        q=GetCacheViewAuthenticPixels(image_view,x,y,(size_t) (stop_x-x+1),1,\n          exception);\n        if (q == (PixelPacket *) NULL)\n          {\n            status=MagickFalse;\n            continue;\n          }\n        for ( ; x <= stop_x; x++)\n        {\n          if ((x == (ssize_t) ceil(primitive_info->point.x-0.5)) &&\n              (y == (ssize_t) ceil(primitive_info->point.y-0.5)))\n            (void) GetFillColor(draw_info,x-start_x,y-start_y,q);\n          q++;\n        }\n        sync=SyncCacheViewAuthenticPixels(image_view,exception);\n        if (sync == MagickFalse)\n          status=MagickFalse;\n      }\n      image_view=DestroyCacheView(image_view);\n      polygon_info=DestroyPolygonThreadSet(polygon_info);\n      if (image->debug != MagickFalse)\n        (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n          \"    end draw-polygon\");\n      return(status);\n    }\n  /*\n    Draw polygon or line.\n  */\n  if (image->matte == MagickFalse)\n    (void) SetImageAlphaChannel(image,OpaqueAlphaChannel);\n  start_y=(ssize_t) ceil(bounds.y1-0.5);\n  stop_y=(ssize_t) floor(bounds.y2+0.5);\n#if defined(MAGICKCORE_OPENMP_SUPPORT)\n  #pragma omp parallel for schedule(static,4) shared(status) \\\n    magick_threads(image,image,1,1)\n#endif\n  for (y=start_y; y <= stop_y; y++)\n  {\n    const int\n      id = GetOpenMPThreadId();\n\n    double\n      fill_opacity,\n      stroke_opacity;\n\n    PixelPacket\n      fill_color,\n      stroke_color;\n\n    register PixelPacket\n      *magick_restrict q;\n\n    register ssize_t\n      x;\n\n    ssize_t\n      start_x,\n      stop_x;\n\n    if (status == MagickFalse)\n      continue;\n    start_x=(ssize_t) ceil(bounds.x1-0.5);\n    stop_x=(ssize_t) floor(bounds.x2+0.5);\n    q=GetCacheViewAuthenticPixels(image_view,start_x,y,(size_t) (stop_x-start_x+1),1,\n      exception);\n    if (q == (PixelPacket *) NULL)\n      {\n        status=MagickFalse;\n        continue;\n      }\n    for (x=start_x; x <= stop_x; x++)\n    {\n      /*\n        Fill and/or stroke.\n      */\n      fill_opacity=GetOpacityPixel(polygon_info[id],mid,fill,\n        draw_info->fill_rule,x,y,&stroke_opacity);\n      if (draw_info->stroke_antialias == MagickFalse)\n        {\n          fill_opacity=fill_opacity > 0.25 ? 1.0 : 0.0;\n          stroke_opacity=stroke_opacity > 0.25 ? 1.0 : 0.0;\n        }\n      (void) GetFillColor(draw_info,x-start_x,y-start_y,&fill_color);\n      fill_opacity=(double) (QuantumRange-fill_opacity*(QuantumRange-\n        fill_color.opacity));\n      MagickCompositeOver(&fill_color,(MagickRealType) fill_opacity,q,\n        (MagickRealType) q->opacity,q);\n      (void) GetStrokeColor(draw_info,x-start_x,y-start_y,&stroke_color);\n      stroke_opacity=(double) (QuantumRange-stroke_opacity*(QuantumRange-\n        stroke_color.opacity));\n      MagickCompositeOver(&stroke_color,(MagickRealType) stroke_opacity,q,\n        (MagickRealType) q->opacity,q);\n      q++;\n    }\n    if (SyncCacheViewAuthenticPixels(image_view,exception) == MagickFalse)\n      status=MagickFalse;\n  }\n  image_view=DestroyCacheView(image_view);\n  polygon_info=DestroyPolygonThreadSet(polygon_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end draw-polygon\");\n  return(status);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   D r a w P r i m i t i v e                                                 %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawPrimitive() draws a primitive (line, rectangle, ellipse) on the image.\n%\n%  The format of the DrawPrimitive method is:\n%\n%      MagickBooleanType DrawPrimitive(Image *image,const DrawInfo *draw_info,\n%        PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n*/\n\nstatic void LogPrimitiveInfo(const PrimitiveInfo *primitive_info)\n{\n  const char\n    *methods[] =\n    {\n      \"point\",\n      \"replace\",\n      \"floodfill\",\n      \"filltoborder\",\n      \"reset\",\n      \"?\"\n    };\n\n  PointInfo\n    p,\n    q,\n    point;\n\n  register ssize_t\n    i,\n    x;\n\n  ssize_t\n    coordinates,\n    y;\n\n  x=(ssize_t) ceil(primitive_info->point.x-0.5);\n  y=(ssize_t) ceil(primitive_info->point.y-0.5);\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"PointPrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case ColorPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"ColorPrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case MattePrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"MattePrimitive %.20g,%.20g %s\",(double) x,(double) y,\n        methods[primitive_info->method]);\n      return;\n    }\n    case TextPrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"TextPrimitive %.20g,%.20g\",(double) x,(double) y);\n      return;\n    }\n    case ImagePrimitive:\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"ImagePrimitive %.20g,%.20g\",(double) x,(double) y);\n      return;\n    }\n    default:\n      break;\n  }\n  coordinates=0;\n  p=primitive_info[0].point;\n  q.x=(-1.0);\n  q.y=(-1.0);\n  for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++)\n  {\n    point=primitive_info[i].point;\n    if (coordinates <= 0)\n      {\n        coordinates=(ssize_t) primitive_info[i].coordinates;\n        (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n          \"    begin open (%.20g)\",(double) coordinates);\n        p=point;\n      }\n    point=primitive_info[i].point;\n    if ((fabs(q.x-point.x) >= DrawEpsilon) ||\n        (fabs(q.y-point.y) >= DrawEpsilon))\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"      %.20g: %.18g,%.18g\",(double) coordinates,point.x,point.y);\n    else\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"      %.20g: %g %g (duplicate)\",(double) coordinates,point.x,point.y);\n    q=point;\n    coordinates--;\n    if (coordinates > 0)\n      continue;\n    if ((fabs(p.x-point.x) >= DrawEpsilon) ||\n        (fabs(p.y-point.y) >= DrawEpsilon))\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end last (%.20g)\",\n        (double) coordinates);\n    else\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"    end open (%.20g)\",\n        (double) coordinates);\n  }\n}\n\nMagickExport MagickBooleanType DrawPrimitive(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  CacheView\n    *image_view;\n\n  ExceptionInfo\n    *exception;\n\n  MagickStatusType\n    status;\n\n  register ssize_t\n    i,\n    x;\n\n  ssize_t\n    y;\n\n  if (image->debug != MagickFalse)\n    {\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"  begin draw-primitive\");\n      (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n        \"    affine: %g,%g,%g,%g,%g,%g\",draw_info->affine.sx,\n        draw_info->affine.rx,draw_info->affine.ry,draw_info->affine.sy,\n        draw_info->affine.tx,draw_info->affine.ty);\n    }\n  exception=(&image->exception);\n  if ((IsGrayColorspace(image->colorspace) != MagickFalse) &&\n      ((IsPixelGray(&draw_info->fill) == MagickFalse) ||\n       (IsPixelGray(&draw_info->stroke) == MagickFalse)))\n    (void) SetImageColorspace(image,sRGBColorspace);\n  status=MagickTrue;\n  x=(ssize_t) ceil(primitive_info->point.x-0.5);\n  y=(ssize_t) ceil(primitive_info->point.y-0.5);\n  image_view=AcquireAuthenticCacheView(image,exception);\n  switch (primitive_info->primitive)\n  {\n    case PointPrimitive:\n    {\n      PixelPacket\n        fill_color;\n\n      PixelPacket\n        *q;\n\n      if ((y < 0) || (y >= (ssize_t) image->rows))\n        break;\n      if ((x < 0) || (x >= (ssize_t) image->columns))\n        break;\n      q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n      if (q == (PixelPacket *) NULL)\n        break;\n      (void) GetFillColor(draw_info,x,y,&fill_color);\n      MagickCompositeOver(&fill_color,(MagickRealType) fill_color.opacity,q,\n        (MagickRealType) q->opacity,q);\n      status&=SyncCacheViewAuthenticPixels(image_view,exception);\n      break;\n    }\n    case ColorPrimitive:\n    {\n      switch (primitive_info->method)\n      {\n        case PointMethod:\n        default:\n        {\n          PixelPacket\n            *q;\n\n          q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n          if (q == (PixelPacket *) NULL)\n            break;\n          (void) GetFillColor(draw_info,x,y,q);\n          status&=SyncCacheViewAuthenticPixels(image_view,exception);\n          break;\n        }\n        case ReplaceMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            target;\n\n          status&=GetOneCacheViewVirtualPixel(image_view,x,y,&target,exception);\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              if (IsColorSimilar(image,q,&target) == MagickFalse)\n                {\n                  q++;\n                  continue;\n                }\n              (void) GetFillColor(draw_info,x,y,q);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n        case FloodfillMethod:\n        case FillToBorderMethod:\n        {\n          MagickPixelPacket\n            target;\n\n          (void) GetOneVirtualMagickPixel(image,x,y,&target,exception);\n          if (primitive_info->method == FillToBorderMethod)\n            {\n              target.red=(MagickRealType) draw_info->border_color.red;\n              target.green=(MagickRealType) draw_info->border_color.green;\n              target.blue=(MagickRealType) draw_info->border_color.blue;\n            }\n          status&=FloodfillPaintImage(image,DefaultChannels,draw_info,&target,x,\n            y,primitive_info->method == FloodfillMethod ? MagickFalse :\n            MagickTrue);\n          break;\n        }\n        case ResetMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              (void) GetFillColor(draw_info,x,y,q);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n      }\n      break;\n    }\n    case MattePrimitive:\n    {\n      if (image->matte == MagickFalse)\n        (void) SetImageAlphaChannel(image,OpaqueAlphaChannel);\n      switch (primitive_info->method)\n      {\n        case PointMethod:\n        default:\n        {\n          PixelPacket\n            pixel;\n\n          PixelPacket\n            *q;\n\n          q=GetCacheViewAuthenticPixels(image_view,x,y,1,1,exception);\n          if (q == (PixelPacket *) NULL)\n            break;\n          (void) GetFillColor(draw_info,x,y,&pixel);\n          SetPixelOpacity(q,pixel.opacity);\n          status&=SyncCacheViewAuthenticPixels(image_view,exception);\n          break;\n        }\n        case ReplaceMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            pixel,\n            target;\n\n          status&=GetOneCacheViewVirtualPixel(image_view,x,y,&target,exception);\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              if (IsColorSimilar(image,q,&target) == MagickFalse)\n                {\n                  q++;\n                  continue;\n                }\n              (void) GetFillColor(draw_info,x,y,&pixel);\n              SetPixelOpacity(q,pixel.opacity);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n        case FloodfillMethod:\n        case FillToBorderMethod:\n        {\n          MagickPixelPacket\n            target;\n\n          (void) GetOneVirtualMagickPixel(image,x,y,&target,exception);\n          if (primitive_info->method == FillToBorderMethod)\n            {\n              target.red=(MagickRealType) draw_info->border_color.red;\n              target.green=(MagickRealType) draw_info->border_color.green;\n              target.blue=(MagickRealType) draw_info->border_color.blue;\n            }\n          status&=FloodfillPaintImage(image,OpacityChannel,draw_info,&target,x,\n            y,primitive_info->method == FloodfillMethod ? MagickFalse :\n            MagickTrue);\n          break;\n        }\n        case ResetMethod:\n        {\n          MagickBooleanType\n            sync;\n\n          PixelPacket\n            pixel;\n\n          for (y=0; y < (ssize_t) image->rows; y++)\n          {\n            register PixelPacket\n              *magick_restrict q;\n\n            register ssize_t\n              x;\n\n            q=GetCacheViewAuthenticPixels(image_view,0,y,image->columns,1,\n              exception);\n            if (q == (PixelPacket *) NULL)\n              break;\n            for (x=0; x < (ssize_t) image->columns; x++)\n            {\n              (void) GetFillColor(draw_info,x,y,&pixel);\n              SetPixelOpacity(q,pixel.opacity);\n              q++;\n            }\n            sync=SyncCacheViewAuthenticPixels(image_view,exception);\n            if (sync == MagickFalse)\n              break;\n          }\n          break;\n        }\n      }\n      break;\n    }\n    case TextPrimitive:\n    {\n      char\n        geometry[MaxTextExtent];\n\n      DrawInfo\n        *clone_info;\n\n      if (primitive_info->text == (char *) NULL)\n        break;\n      clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n      (void) CloneString(&clone_info->text,primitive_info->text);\n      (void) FormatLocaleString(geometry,MaxTextExtent,\"%+f%+f\",\n        primitive_info->point.x,primitive_info->point.y);\n      (void) CloneString(&clone_info->geometry,geometry);\n      status&=AnnotateImage(image,clone_info);\n      clone_info=DestroyDrawInfo(clone_info);\n      break;\n    }\n    case ImagePrimitive:\n    {\n      AffineMatrix\n        affine;\n\n      char\n        composite_geometry[MaxTextExtent];\n\n      Image\n        *composite_image;\n\n      ImageInfo\n        *clone_info;\n\n      RectangleInfo\n        geometry;\n\n      ssize_t\n        x1,\n        y1;\n\n      if (primitive_info->text == (char *) NULL)\n        break;\n      clone_info=AcquireImageInfo();\n      if (LocaleNCompare(primitive_info->text,\"data:\",5) == 0)\n        composite_image=ReadInlineImage(clone_info,primitive_info->text,\n          &image->exception);\n      else\n        {\n          (void) CopyMagickString(clone_info->filename,primitive_info->text,\n            MaxTextExtent);\n          composite_image=ReadImage(clone_info,&image->exception);\n        }\n      clone_info=DestroyImageInfo(clone_info);\n      if (composite_image == (Image *) NULL)\n        break;\n      (void) SetImageProgressMonitor(composite_image,(MagickProgressMonitor)\n        NULL,(void *) NULL);\n      x1=(ssize_t) ceil(primitive_info[1].point.x-0.5);\n      y1=(ssize_t) ceil(primitive_info[1].point.y-0.5);\n      if (((x1 != 0L) && (x1 != (ssize_t) composite_image->columns)) ||\n          ((y1 != 0L) && (y1 != (ssize_t) composite_image->rows)))\n        {\n          char\n            geometry[MaxTextExtent];\n\n          /*\n            Resize image.\n          */\n          (void) FormatLocaleString(geometry,MaxTextExtent,\"%gx%g!\",\n            primitive_info[1].point.x,primitive_info[1].point.y);\n          composite_image->filter=image->filter;\n          (void) TransformImage(&composite_image,(char *) NULL,geometry);\n        }\n      if (composite_image->matte == MagickFalse)\n        (void) SetImageAlphaChannel(composite_image,OpaqueAlphaChannel);\n      if (draw_info->opacity != OpaqueOpacity)\n        (void) SetImageOpacity(composite_image,draw_info->opacity);\n      SetGeometry(image,&geometry);\n      image->gravity=draw_info->gravity;\n      geometry.x=x;\n      geometry.y=y;\n      (void) FormatLocaleString(composite_geometry,MaxTextExtent,\n        \"%.20gx%.20g%+.20g%+.20g\",(double) composite_image->columns,(double)\n        composite_image->rows,(double) geometry.x,(double) geometry.y);\n      (void) ParseGravityGeometry(image,composite_geometry,&geometry,\n        &image->exception);\n      affine=draw_info->affine;\n      affine.tx=(double) geometry.x;\n      affine.ty=(double) geometry.y;\n      composite_image->interpolate=image->interpolate;\n      if (draw_info->compose == OverCompositeOp)\n        (void) DrawAffineImage(image,composite_image,&affine);\n      else\n        (void) CompositeImage(image,draw_info->compose,composite_image,\n          geometry.x,geometry.y);\n      composite_image=DestroyImage(composite_image);\n      break;\n    }\n    default:\n    {\n      double\n        mid,\n        scale;\n\n      DrawInfo\n        *clone_info;\n\n      if (IsEventLogging() != MagickFalse)\n        LogPrimitiveInfo(primitive_info);\n      scale=ExpandAffine(&draw_info->affine);\n      if ((draw_info->dash_pattern != (double *) NULL) &&\n          (fabs(draw_info->dash_pattern[0]) >= DrawEpsilon) &&\n          (fabs(scale*draw_info->stroke_width) >= DrawEpsilon) &&\n          (draw_info->stroke.opacity != (Quantum) TransparentOpacity))\n        {\n          /*\n            Draw dash polygon.\n          */\n          clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n          clone_info->stroke_width=0.0;\n          clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n          status&=DrawPolygonPrimitive(image,clone_info,primitive_info);\n          clone_info=DestroyDrawInfo(clone_info);\n          (void) DrawDashPolygon(draw_info,primitive_info,image);\n          break;\n        }\n      mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n      if ((mid > 1.0) &&\n          ((draw_info->stroke.opacity != (Quantum) TransparentOpacity) ||\n           (draw_info->stroke_pattern != (Image *) NULL)))\n        {\n          MagickBooleanType\n            closed_path;\n\n          /*\n            Draw strokes while respecting line cap/join attributes.\n          */\n          for (i=0; primitive_info[i].primitive != UndefinedPrimitive; i++) ;\n          closed_path=\n            (primitive_info[i-1].point.x == primitive_info[0].point.x) &&\n            (primitive_info[i-1].point.y == primitive_info[0].point.y) ?\n            MagickTrue : MagickFalse;\n          i=(ssize_t) primitive_info[0].coordinates;\n          i=(ssize_t) primitive_info[0].coordinates;\n          if (((closed_path != MagickFalse) &&\n              (draw_info->linejoin == RoundJoin)) ||\n              (primitive_info[i].primitive != UndefinedPrimitive))\n            {\n              (void) DrawPolygonPrimitive(image,draw_info,primitive_info);\n              break;\n            }\n          if (draw_info->linecap == RoundCap)\n            {\n              (void) DrawPolygonPrimitive(image,draw_info,primitive_info);\n              break;\n            }\n          clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n          clone_info->stroke_width=0.0;\n          clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n          status&=DrawPolygonPrimitive(image,clone_info,primitive_info);\n          clone_info=DestroyDrawInfo(clone_info);\n          status&=DrawStrokePolygon(image,draw_info,primitive_info);\n          break;\n        }\n      status&=DrawPolygonPrimitive(image,draw_info,primitive_info);\n      break;\n    }\n  }\n  image_view=DestroyCacheView(image_view);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\"  end draw-primitive\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   D r a w S t r o k e P o l y g o n                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  DrawStrokePolygon() draws a stroked polygon (line, rectangle, ellipse) on\n%  the image while respecting the line cap and join attributes.\n%\n%  The format of the DrawStrokePolygon method is:\n%\n%      MagickBooleanType DrawStrokePolygon(Image *image,\n%        const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n%\n%  A description of each parameter follows:\n%\n%    o image: the image.\n%\n%    o draw_info: the draw info.\n%\n%    o primitive_info: Specifies a pointer to a PrimitiveInfo structure.\n%\n%\n*/\n\nstatic void DrawRoundLinecap(Image *image,const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  PrimitiveInfo\n    linecap[5];\n\n  register ssize_t\n    i;\n\n  for (i=0; i < 4; i++)\n    linecap[i]=(*primitive_info);\n  linecap[0].coordinates=4;\n  linecap[1].point.x+=2.0*DrawEpsilon;\n  linecap[2].point.x+=2.0*DrawEpsilon;\n  linecap[2].point.y+=2.0*DrawEpsilon;\n  linecap[3].point.y+=2.0*DrawEpsilon;\n  linecap[4].primitive=UndefinedPrimitive;\n  (void) DrawPolygonPrimitive(image,draw_info,linecap);\n}\n\nstatic MagickBooleanType DrawStrokePolygon(Image *image,\n  const DrawInfo *draw_info,const PrimitiveInfo *primitive_info)\n{\n  DrawInfo\n    *clone_info;\n\n  MagickBooleanType\n    closed_path;\n\n  MagickStatusType\n    status;\n\n  PrimitiveInfo\n    *stroke_polygon;\n\n  register const PrimitiveInfo\n    *p,\n    *q;\n\n  /*\n    Draw stroked polygon.\n  */\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"    begin draw-stroke-polygon\");\n  clone_info=CloneDrawInfo((ImageInfo *) NULL,draw_info);\n  clone_info->fill=draw_info->stroke;\n  if (clone_info->fill_pattern != (Image *) NULL)\n    clone_info->fill_pattern=DestroyImage(clone_info->fill_pattern);\n  if (clone_info->stroke_pattern != (Image *) NULL)\n    clone_info->fill_pattern=CloneImage(clone_info->stroke_pattern,0,0,\n      MagickTrue,&clone_info->stroke_pattern->exception);\n  clone_info->stroke.opacity=(Quantum) TransparentOpacity;\n  clone_info->stroke_width=0.0;\n  clone_info->fill_rule=NonZeroRule;\n  status=MagickTrue;\n  for (p=primitive_info; p->primitive != UndefinedPrimitive; p+=p->coordinates)\n  {\n    stroke_polygon=TraceStrokePolygon(draw_info,p);\n    status&=DrawPolygonPrimitive(image,clone_info,stroke_polygon);\n    if (status == 0)\n      break;\n    stroke_polygon=(PrimitiveInfo *) RelinquishMagickMemory(stroke_polygon);\n    q=p+p->coordinates-1;\n    closed_path=(fabs(q->point.x-p->point.x) < DrawEpsilon) &&\n      (fabs(q->point.y-p->point.y) < DrawEpsilon) ? MagickTrue : MagickFalse;\n    if ((draw_info->linecap == RoundCap) && (closed_path == MagickFalse))\n      {\n        DrawRoundLinecap(image,draw_info,p);\n        DrawRoundLinecap(image,draw_info,q);\n      }\n  }\n  clone_info=DestroyDrawInfo(clone_info);\n  if (image->debug != MagickFalse)\n    (void) LogMagickEvent(DrawEvent,GetMagickModule(),\n      \"    end draw-stroke-polygon\");\n  return(status != 0 ? MagickTrue : MagickFalse);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%   G e t A f f i n e M a t r i x                                             %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  GetAffineMatrix() returns an AffineMatrix initialized to the identity\n%  matrix.\n%\n%  The format of the GetAffineMatrix method is:\n%\n%      void GetAffineMatrix(AffineMatrix *affine_matrix)\n%\n%  A description of each parameter follows:\n%\n%    o affine_matrix: the affine matrix.\n%\n*/\nMagickExport void GetAffineMatrix(AffineMatrix *affine_matrix)\n{\n  (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(affine_matrix != (AffineMatrix *) NULL);\n  (void) ResetMagickMemory(affine_matrix,0,sizeof(*affine_matrix));\n  affine_matrix->sx=1.0;\n  affine_matrix->sy=1.0;\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   G e t D r a w I n f o                                                     %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  GetDrawInfo() initializes draw_info to default values from image_info.\n%\n%  The format of the GetDrawInfo method is:\n%\n%      void GetDrawInfo(const ImageInfo *image_info,DrawInfo *draw_info)\n%\n%  A description of each parameter follows:\n%\n%    o image_info: the image info..\n%\n%    o draw_info: the draw info.\n%\n*/\nMagickExport void GetDrawInfo(const ImageInfo *image_info,DrawInfo *draw_info)\n{\n  char\n    *next_token;\n\n  const char\n    *option;\n\n  ExceptionInfo\n    *exception;\n\n  ImageInfo\n    *clone_info;\n\n  /*\n    Initialize draw attributes.\n  */\n  (void) LogMagickEvent(TraceEvent,GetMagickModule(),\"...\");\n  assert(draw_info != (DrawInfo *) NULL);\n  (void) ResetMagickMemory(draw_info,0,sizeof(*draw_info));\n  clone_info=CloneImageInfo(image_info);\n  GetAffineMatrix(&draw_info->affine);\n  exception=AcquireExceptionInfo();\n  (void) QueryColorDatabase(\"#000F\",&draw_info->fill,exception);\n  (void) QueryColorDatabase(\"#FFF0\",&draw_info->stroke,exception);\n  draw_info->stroke_antialias=clone_info->antialias;\n  draw_info->stroke_width=1.0;\n  draw_info->fill_rule=EvenOddRule;\n  draw_info->fill_opacity=OpaqueOpacity;\n  draw_info->stroke_opacity=OpaqueOpacity;\n  draw_info->linecap=ButtCap;\n  draw_info->linejoin=MiterJoin;\n  draw_info->miterlimit=10;\n  draw_info->decorate=NoDecoration;\n  if (clone_info->font != (char *) NULL)\n    draw_info->font=AcquireString(clone_info->font);\n  if (clone_info->density != (char *) NULL)\n    draw_info->density=AcquireString(clone_info->density);\n  draw_info->text_antialias=clone_info->antialias;\n  draw_info->pointsize=12.0;\n  if (fabs(clone_info->pointsize) >= DrawEpsilon)\n    draw_info->pointsize=clone_info->pointsize;\n  draw_info->undercolor.opacity=(Quantum) TransparentOpacity;\n  draw_info->border_color=clone_info->border_color;\n  draw_info->compose=OverCompositeOp;\n  if (clone_info->server_name != (char *) NULL)\n    draw_info->server_name=AcquireString(clone_info->server_name);\n  draw_info->render=MagickTrue;\n  draw_info->debug=IsEventLogging();\n  option=GetImageOption(clone_info,\"direction\");\n  if (option != (const char *) NULL)\n    draw_info->direction=(DirectionType) ParseCommandOption(\n      MagickDirectionOptions,MagickFalse,option);\n  else\n    draw_info->direction=UndefinedDirection;\n  option=GetImageOption(clone_info,\"encoding\");\n  if (option != (const char *) NULL)\n    (void) CloneString(&draw_info->encoding,option);\n  option=GetImageOption(clone_info,\"family\");\n  if (option != (const char *) NULL)\n    (void) CloneString(&draw_info->family,option);\n  option=GetImageOption(clone_info,\"fill\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->fill,exception);\n  option=GetImageOption(clone_info,\"gravity\");\n  if (option != (const char *) NULL)\n    draw_info->gravity=(GravityType) ParseCommandOption(MagickGravityOptions,\n      MagickFalse,option);\n  option=GetImageOption(clone_info,\"interline-spacing\");\n  if (option != (const char *) NULL)\n    draw_info->interline_spacing=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"interword-spacing\");\n  if (option != (const char *) NULL)\n    draw_info->interword_spacing=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"kerning\");\n  if (option != (const char *) NULL)\n    draw_info->kerning=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"stroke\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->stroke,exception);\n  option=GetImageOption(clone_info,\"strokewidth\");\n  if (option != (const char *) NULL)\n    draw_info->stroke_width=StringToDouble(option,&next_token);\n  option=GetImageOption(clone_info,\"style\");\n  if (option != (const char *) NULL)\n    draw_info->style=(StyleType) ParseCommandOption(MagickStyleOptions,\n      MagickFalse,option);\n  option=GetImageOption(clone_info,\"undercolor\");\n  if (option != (const char *) NULL)\n    (void) QueryColorDatabase(option,&draw_info->undercolor,exception);\n  option=GetImageOption(clone_info,\"weight\");\n  if (option != (const char *) NULL)\n    {\n      ssize_t\n        weight;\n\n      weight=ParseCommandOption(MagickWeightOptions,MagickFalse,option);\n      if (weight == -1)\n        weight=(ssize_t) StringToUnsignedLong(option);\n      draw_info->weight=(size_t) weight;\n    }\n  exception=DestroyExceptionInfo(exception);\n  draw_info->signature=MagickSignature;\n  clone_info=DestroyImageInfo(clone_info);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   P e r m u t a t e                                                         %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  Permutate() returns the permuation of the (n,k).\n%\n%  The format of the Permutate method is:\n%\n%      void Permutate(ssize_t n,ssize_t k)\n%\n%  A description of each parameter follows:\n%\n%    o n:\n%\n%    o k:\n%\n%\n*/\nstatic inline double Permutate(const ssize_t n,const ssize_t k)\n{\n  double\n    r;\n\n  register ssize_t\n    i;\n\n  r=1.0;\n  for (i=k+1; i <= n; i++)\n    r*=i;\n  for (i=1; i <= (n-k); i++)\n    r/=i;\n  return(r);\n}\n\f\n/*\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%                                                                             %\n%                                                                             %\n%                                                                             %\n+   T r a c e P r i m i t i v e                                               %\n%                                                                             %\n%                                                                             %\n%                                                                             %\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%\n%  TracePrimitive is a collection of methods for generating graphic\n%  primitives such as arcs, ellipses, paths, etc.\n%\n*/\n\nstatic void TraceArc(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end,const PointInfo degrees)\n{\n  PointInfo\n    center,\n    radii;\n\n  center.x=0.5*(end.x+start.x);\n  center.y=0.5*(end.y+start.y);\n  radii.x=fabs(center.x-start.x);\n  radii.y=fabs(center.y-start.y);\n  TraceEllipse(primitive_info,center,radii,degrees);\n}\n\nstatic void TraceArcPath(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end,const PointInfo arc,const double angle,\n  const MagickBooleanType large_arc,const MagickBooleanType sweep)\n{\n  double\n    alpha,\n    beta,\n    delta,\n    factor,\n    gamma,\n    theta;\n\n  PointInfo\n    center,\n    points[3],\n    radii;\n\n  register double\n    cosine,\n    sine;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  size_t\n    arc_segments;\n\n  if ((fabs(start.x-end.x) < DrawEpsilon) &&\n      (fabs(start.y-end.y) < DrawEpsilon))\n    {\n      TracePoint(primitive_info,end);\n      return;\n    }\n  radii.x=fabs(arc.x);\n  radii.y=fabs(arc.y);\n  if ((fabs(radii.x) < DrawEpsilon) || (fabs(radii.y) < DrawEpsilon))\n    {\n      TraceLine(primitive_info,start,end);\n      return;\n    }\n  cosine=cos(DegreesToRadians(fmod((double) angle,360.0)));\n  sine=sin(DegreesToRadians(fmod((double) angle,360.0)));\n  center.x=(double) (cosine*(end.x-start.x)/2+sine*(end.y-start.y)/2);\n  center.y=(double) (cosine*(end.y-start.y)/2-sine*(end.x-start.x)/2);\n  delta=(center.x*center.x)/(radii.x*radii.x)+(center.y*center.y)/\n    (radii.y*radii.y);\n  if (delta < DrawEpsilon)\n    {\n      TraceLine(primitive_info,start,end);\n      return;\n    }\n  if (delta > 1.0)\n    {\n      radii.x*=sqrt((double) delta);\n      radii.y*=sqrt((double) delta);\n    }\n  points[0].x=(double) (cosine*start.x/radii.x+sine*start.y/radii.x);\n  points[0].y=(double) (cosine*start.y/radii.y-sine*start.x/radii.y);\n  points[1].x=(double) (cosine*end.x/radii.x+sine*end.y/radii.x);\n  points[1].y=(double) (cosine*end.y/radii.y-sine*end.x/radii.y);\n  alpha=points[1].x-points[0].x;\n  beta=points[1].y-points[0].y;\n  factor=PerceptibleReciprocal(alpha*alpha+beta*beta)-0.25;\n  if (factor <= 0.0)\n    factor=0.0;\n  else\n    {\n      factor=sqrt((double) factor);\n      if (sweep == large_arc)\n        factor=(-factor);\n    }\n  center.x=(double) ((points[0].x+points[1].x)/2-factor*beta);\n  center.y=(double) ((points[0].y+points[1].y)/2+factor*alpha);\n  alpha=atan2(points[0].y-center.y,points[0].x-center.x);\n  theta=atan2(points[1].y-center.y,points[1].x-center.x)-alpha;\n  if ((theta < 0.0) && (sweep != MagickFalse))\n    theta+=2.0*MagickPI;\n  else\n    if ((theta > 0.0) && (sweep == MagickFalse))\n      theta-=2.0*MagickPI;\n  arc_segments=(size_t) ceil(fabs((double) (theta/(0.5*MagickPI+\n    DrawEpsilon))));\n  p=primitive_info;\n  for (i=0; i < (ssize_t) arc_segments; i++)\n  {\n    beta=0.5*((alpha+(i+1)*theta/arc_segments)-(alpha+i*theta/arc_segments));\n    gamma=(8.0/3.0)*sin(fmod((double) (0.5*beta),DegreesToRadians(360.0)))*\n      sin(fmod((double) (0.5*beta),DegreesToRadians(360.0)))/\n      sin(fmod((double) beta,DegreesToRadians(360.0)));\n    points[0].x=(double) (center.x+cos(fmod((double) (alpha+(double) i*theta/\n      arc_segments),DegreesToRadians(360.0)))-gamma*sin(fmod((double) (alpha+\n      (double) i*theta/arc_segments),DegreesToRadians(360.0))));\n    points[0].y=(double) (center.y+sin(fmod((double) (alpha+(double) i*theta/\n      arc_segments),DegreesToRadians(360.0)))+gamma*cos(fmod((double) (alpha+\n      (double) i*theta/arc_segments),DegreesToRadians(360.0))));\n    points[2].x=(double) (center.x+cos(fmod((double) (alpha+(double) (i+1)*\n      theta/arc_segments),DegreesToRadians(360.0))));\n    points[2].y=(double) (center.y+sin(fmod((double) (alpha+(double) (i+1)*\n      theta/arc_segments),DegreesToRadians(360.0))));\n    points[1].x=(double) (points[2].x+gamma*sin(fmod((double) (alpha+(double)\n      (i+1)*theta/arc_segments),DegreesToRadians(360.0))));\n    points[1].y=(double) (points[2].y-gamma*cos(fmod((double) (alpha+(double)\n      (i+1)*theta/arc_segments),DegreesToRadians(360.0))));\n    p->point.x=(p == primitive_info) ? start.x : (p-1)->point.x;\n    p->point.y=(p == primitive_info) ? start.y : (p-1)->point.y;\n    (p+1)->point.x=(double) (cosine*radii.x*points[0].x-sine*radii.y*\n      points[0].y);\n    (p+1)->point.y=(double) (sine*radii.x*points[0].x+cosine*radii.y*\n      points[0].y);\n    (p+2)->point.x=(double) (cosine*radii.x*points[1].x-sine*radii.y*\n      points[1].y);\n    (p+2)->point.y=(double) (sine*radii.x*points[1].x+cosine*radii.y*\n      points[1].y);\n    (p+3)->point.x=(double) (cosine*radii.x*points[2].x-sine*radii.y*\n      points[2].y);\n    (p+3)->point.y=(double) (sine*radii.x*points[2].x+cosine*radii.y*\n      points[2].y);\n    if (i == (ssize_t) (arc_segments-1))\n      (p+3)->point=end;\n    TraceBezier(p,4);\n    p+=p->coordinates;\n  }\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceBezier(PrimitiveInfo *primitive_info,\n  const size_t number_coordinates)\n{\n  double\n    alpha,\n    *coefficients,\n    weight;\n\n  PointInfo\n    end,\n    point,\n    *points;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i,\n    j;\n\n  size_t\n    control_points,\n    quantum;\n\n  /*\n    Allocate coeficients.\n  */\n  quantum=number_coordinates;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n  {\n    for (j=i+1; j < (ssize_t) number_coordinates; j++)\n    {\n      alpha=fabs(primitive_info[j].point.x-primitive_info[i].point.x);\n      if (alpha > (double) quantum)\n        quantum=(size_t) alpha;\n      alpha=fabs(primitive_info[j].point.y-primitive_info[i].point.y);\n      if (alpha > (double) quantum)\n        quantum=(size_t) alpha;\n    }\n  }\n  quantum=(size_t) MagickMin((double) quantum/number_coordinates,\n    (double) BezierQuantum);\n  control_points=quantum*number_coordinates;\n  coefficients=(double *) AcquireQuantumMemory((size_t)\n    number_coordinates,sizeof(*coefficients));\n  points=(PointInfo *) AcquireQuantumMemory((size_t) control_points,\n    sizeof(*points));\n  if ((coefficients == (double *) NULL) || (points == (PointInfo *) NULL))\n    ThrowFatalException(ResourceLimitFatalError,\"MemoryAllocationFailed\");\n  /*\n    Compute bezier points.\n  */\n  end=primitive_info[number_coordinates-1].point;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n    coefficients[i]=Permutate((ssize_t) number_coordinates-1,i);\n  weight=0.0;\n  for (i=0; i < (ssize_t) control_points; i++)\n  {\n    p=primitive_info;\n    point.x=0.0;\n    point.y=0.0;\n    alpha=pow((double) (1.0-weight),(double) number_coordinates-1.0);\n    for (j=0; j < (ssize_t) number_coordinates; j++)\n    {\n      point.x+=alpha*coefficients[j]*p->point.x;\n      point.y+=alpha*coefficients[j]*p->point.y;\n      alpha*=weight/(1.0-weight);\n      p++;\n    }\n    points[i]=point;\n    weight+=1.0/control_points;\n  }\n  /*\n    Bezier curves are just short segmented polys.\n  */\n  p=primitive_info;\n  for (i=0; i < (ssize_t) control_points; i++)\n  {\n    TracePoint(p,points[i]);\n    p+=p->coordinates;\n  }\n  TracePoint(p,end);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n  points=(PointInfo *) RelinquishMagickMemory(points);\n  coefficients=(double *) RelinquishMagickMemory(coefficients);\n}\n\nstatic void TraceCircle(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  double\n    alpha,\n    beta,\n    radius;\n\n  PointInfo\n    offset,\n    degrees;\n\n  alpha=end.x-start.x;\n  beta=end.y-start.y;\n  radius=hypot((double) alpha,(double) beta);\n  offset.x=(double) radius;\n  offset.y=(double) radius;\n  degrees.x=0.0;\n  degrees.y=360.0;\n  TraceEllipse(primitive_info,start,offset,degrees);\n}\n\nstatic void TraceEllipse(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo stop,const PointInfo degrees)\n{\n  double\n    delta,\n    step,\n    y;\n\n  PointInfo\n    angle,\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  /*\n    Ellipses are just short segmented polys.\n  */\n  if ((fabs(stop.x) < DrawEpsilon) && (fabs(stop.y) < DrawEpsilon))\n    {\n      TracePoint(primitive_info,start);\n      return;\n    }\n  delta=2.0/MagickMax(stop.x,stop.y);\n  step=MagickPI/8.0;\n  if ((delta >= 0.0) && (delta < (MagickPI/8.0)))\n    step=MagickPI/(4*(MagickPI/delta/2+0.5));\n  angle.x=DegreesToRadians(degrees.x);\n  y=degrees.y;\n  while (y < degrees.x)\n    y+=360.0;\n  angle.y=(double) (DegreesToRadians(y)-DrawEpsilon);\n  for (p=primitive_info; angle.x < angle.y; angle.x+=step)\n  {\n    point.x=cos(fmod(angle.x,DegreesToRadians(360.0)))*stop.x+start.x;\n    point.y=sin(fmod(angle.x,DegreesToRadians(360.0)))*stop.y+start.y;\n    TracePoint(p,point);\n    p+=p->coordinates;\n  }\n  point.x=cos(fmod(angle.y,DegreesToRadians(360.0)))*stop.x+start.x;\n  point.y=sin(fmod(angle.y,DegreesToRadians(360.0)))*stop.y+start.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceLine(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  TracePoint(primitive_info,start);\n  if ((fabs(start.x-end.x) < DrawEpsilon) &&\n      (fabs(start.y-end.y) < DrawEpsilon))\n    {\n      primitive_info->primitive=PointPrimitive;\n      primitive_info->coordinates=1;\n      return;\n    }\n  TracePoint(primitive_info+1,end);\n  (primitive_info+1)->primitive=primitive_info->primitive;\n  primitive_info->coordinates=2;\n}\n\nstatic size_t TracePath(PrimitiveInfo *primitive_info,const char *path)\n{\n  char\n    *next_token,\n    token[MaxTextExtent];\n\n  const char\n    *p;\n\n  double\n    x,\n    y;\n\n  int\n    attribute,\n    last_attribute;\n\n  PointInfo\n    end = {0.0, 0.0},\n    points[4] = { {0.0,0.0}, {0.0,0.0}, {0.0,0.0}, {0.0,0.0} },\n    point = {0.0, 0.0},\n    start = {0.0, 0.0};\n\n  PrimitiveType\n    primitive_type;\n\n  register PrimitiveInfo\n    *q;\n\n  register ssize_t\n    i;\n\n  size_t\n    number_coordinates,\n    z_count;\n\n  attribute=0;\n  number_coordinates=0;\n  z_count=0;\n  primitive_type=primitive_info->primitive;\n  q=primitive_info;\n  for (p=path; *p != '\\0'; )\n  {\n    while (isspace((int) ((unsigned char) *p)) != 0)\n      p++;\n    if (*p == '\\0')\n      break;\n    last_attribute=attribute;\n    attribute=(int) (*p++);\n    switch (attribute)\n    {\n      case 'a':\n      case 'A':\n      {\n        double\n          angle;\n\n        MagickBooleanType\n          large_arc,\n          sweep;\n\n        PointInfo\n          arc;\n\n        /*\n          Compute arc points.\n        */\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          arc.x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          arc.y=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          angle=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          large_arc=StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          sweep=StringToLong(token) != 0 ? MagickTrue : MagickFalse;\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          end.x=(double) (attribute == (int) 'A' ? x : point.x+x);\n          end.y=(double) (attribute == (int) 'A' ? y : point.y+y);\n          TraceArcPath(q,point,end,arc,angle,large_arc,sweep);\n          q+=q->coordinates;\n          point=end;\n          while (isspace((int) ((unsigned char) *p)) != 0)\n            p++;\n          if (*p == ',')\n            p++;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'c':\n      case 'C':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=point;\n          for (i=1; i < 4; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            end.x=(double) (attribute == (int) 'C' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'C' ? y : point.y+y);\n            points[i]=end;\n          }\n          for (i=0; i < 4; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,4);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'H':\n      case 'h':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'H' ? x: point.x+x);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'l':\n      case 'L':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'L' ? x : point.x+x);\n          point.y=(double) (attribute == (int) 'L' ? y : point.y+y);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'M':\n      case 'm':\n      {\n        if (q != primitive_info)\n          {\n            primitive_info->coordinates=(size_t) (q-primitive_info);\n            number_coordinates+=primitive_info->coordinates;\n            primitive_info=q;\n          }\n        i=0;\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          x=StringToDouble(token,&next_token);\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.x=(double) (attribute == (int) 'M' ? x : point.x+x);\n          point.y=(double) (attribute == (int) 'M' ? y : point.y+y);\n          if (i == 0)\n            start=point;\n          i++;\n          TracePoint(q,point);\n          q+=q->coordinates;\n          if ((i != 0) && (attribute == (int) 'M'))\n            {\n              TracePoint(q,point);\n              q+=q->coordinates;\n            }\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'q':\n      case 'Q':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=point;\n          for (i=1; i < 3; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            if (*p == ',')\n              p++;\n            end.x=(double) (attribute == (int) 'Q' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'Q' ? y : point.y+y);\n            points[i]=end;\n          }\n          for (i=0; i < 3; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,3);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 's':\n      case 'S':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=points[3];\n          points[1].x=2.0*points[3].x-points[2].x;\n          points[1].y=2.0*points[3].y-points[2].y;\n          for (i=2; i < 4; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            if (*p == ',')\n              p++;\n            end.x=(double) (attribute == (int) 'S' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'S' ? y : point.y+y);\n            points[i]=end;\n          }\n          if (strchr(\"CcSs\",last_attribute) == (char *) NULL)\n            {\n              points[0]=point;\n              points[1]=point;\n            }\n          for (i=0; i < 4; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,4);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 't':\n      case 'T':\n      {\n        /*\n          Compute bezier points.\n        */\n        do\n        {\n          points[0]=points[2];\n          points[1].x=2.0*points[2].x-points[1].x;\n          points[1].y=2.0*points[2].y-points[1].y;\n          for (i=2; i < 3; i++)\n          {\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            x=StringToDouble(token,&next_token);\n            GetNextToken(p,&p,MaxTextExtent,token);\n            if (*token == ',')\n              GetNextToken(p,&p,MaxTextExtent,token);\n            y=StringToDouble(token,&next_token);\n            end.x=(double) (attribute == (int) 'T' ? x : point.x+x);\n            end.y=(double) (attribute == (int) 'T' ? y : point.y+y);\n            points[i]=end;\n          }\n          if (strchr(\"QqTt\",last_attribute) == (char *) NULL)\n            {\n              points[0]=point;\n              points[1]=point;\n            }\n          for (i=0; i < 3; i++)\n            (q+i)->point=points[i];\n          TraceBezier(q,3);\n          q+=q->coordinates;\n          point=end;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'v':\n      case 'V':\n      {\n        do\n        {\n          GetNextToken(p,&p,MaxTextExtent,token);\n          if (*token == ',')\n            GetNextToken(p,&p,MaxTextExtent,token);\n          y=StringToDouble(token,&next_token);\n          point.y=(double) (attribute == (int) 'V' ? y : point.y+y);\n          TracePoint(q,point);\n          q+=q->coordinates;\n        } while (IsPoint(p) != MagickFalse);\n        break;\n      }\n      case 'z':\n      case 'Z':\n      {\n        point=start;\n        TracePoint(q,point);\n        q+=q->coordinates;\n        primitive_info->coordinates=(size_t) (q-primitive_info);\n        number_coordinates+=primitive_info->coordinates;\n        primitive_info=q;\n        z_count++;\n        break;\n      }\n      default:\n      {\n        if (isalpha((int) ((unsigned char) attribute)) != 0)\n          (void) FormatLocaleFile(stderr,\"attribute not recognized: %c\\n\",\n            attribute);\n        break;\n      }\n    }\n  }\n  primitive_info->coordinates=(size_t) (q-primitive_info);\n  number_coordinates+=primitive_info->coordinates;\n  for (i=0; i < (ssize_t) number_coordinates; i++)\n  {\n    q--;\n    q->primitive=primitive_type;\n    if (z_count > 1)\n      q->method=FillToBorderMethod;\n  }\n  q=primitive_info;\n  return(number_coordinates);\n}\n\nstatic void TraceRectangle(PrimitiveInfo *primitive_info,const PointInfo start,\n  const PointInfo end)\n{\n  PointInfo\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  p=primitive_info;\n  TracePoint(p,start);\n  p+=p->coordinates;\n  point.x=start.x;\n  point.y=end.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  TracePoint(p,end);\n  p+=p->coordinates;\n  point.x=end.x;\n  point.y=start.y;\n  TracePoint(p,point);\n  p+=p->coordinates;\n  TracePoint(p,start);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceRoundRectangle(PrimitiveInfo *primitive_info,\n  const PointInfo start,const PointInfo end,PointInfo arc)\n{\n  PointInfo\n    degrees,\n    offset,\n    point;\n\n  register PrimitiveInfo\n    *p;\n\n  register ssize_t\n    i;\n\n  p=primitive_info;\n  offset.x=fabs(end.x-start.x);\n  offset.y=fabs(end.y-start.y);\n  if (arc.x > (0.5*offset.x))\n    arc.x=0.5*offset.x;\n  if (arc.y > (0.5*offset.y))\n    arc.y=0.5*offset.y;\n  point.x=start.x+offset.x-arc.x;\n  point.y=start.y+arc.y;\n  degrees.x=270.0;\n  degrees.y=360.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+offset.x-arc.x;\n  point.y=start.y+offset.y-arc.y;\n  degrees.x=0.0;\n  degrees.y=90.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+arc.x;\n  point.y=start.y+offset.y-arc.y;\n  degrees.x=90.0;\n  degrees.y=180.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  point.x=start.x+arc.x;\n  point.y=start.y+arc.y;\n  degrees.x=180.0;\n  degrees.y=270.0;\n  TraceEllipse(p,point,arc,degrees);\n  p+=p->coordinates;\n  TracePoint(p,primitive_info->point);\n  p+=p->coordinates;\n  primitive_info->coordinates=(size_t) (p-primitive_info);\n  for (i=0; i < (ssize_t) primitive_info->coordinates; i++)\n  {\n    p->primitive=primitive_info->primitive;\n    p--;\n  }\n}\n\nstatic void TraceSquareLinecap(PrimitiveInfo *primitive_info,\n  const size_t number_vertices,const double offset)\n{\n  double\n    distance;\n\n  register double\n    dx,\n    dy;\n\n  register ssize_t\n    i;\n\n  ssize_t\n    j;\n\n  dx=0.0;\n  dy=0.0;\n  for (i=1; i < (ssize_t) number_vertices; i++)\n  {\n    dx=primitive_info[0].point.x-primitive_info[i].point.x;\n    dy=primitive_info[0].point.y-primitive_info[i].point.y;\n    if ((fabs((double) dx) >= DrawEpsilon) ||\n        (fabs((double) dy) >= DrawEpsilon))\n      break;\n  }\n  if (i == (ssize_t) number_vertices)\n    i=(ssize_t) number_vertices-1L;\n  distance=hypot((double) dx,(double) dy);\n  primitive_info[0].point.x=(double) (primitive_info[i].point.x+\n    dx*(distance+offset)/distance);\n  primitive_info[0].point.y=(double) (primitive_info[i].point.y+\n    dy*(distance+offset)/distance);\n  for (j=(ssize_t) number_vertices-2; j >= 0;  j--)\n  {\n    dx=primitive_info[number_vertices-1].point.x-primitive_info[j].point.x;\n    dy=primitive_info[number_vertices-1].point.y-primitive_info[j].point.y;\n    if ((fabs((double) dx) >= DrawEpsilon) ||\n        (fabs((double) dy) >= DrawEpsilon))\n      break;\n  }\n  distance=hypot((double) dx,(double) dy);\n  primitive_info[number_vertices-1].point.x=(double) (primitive_info[j].point.x+\n    dx*(distance+offset)/distance);\n  primitive_info[number_vertices-1].point.y=(double) (primitive_info[j].point.y+\n    dy*(distance+offset)/distance);\n}\n\nstatic inline double DrawEpsilonReciprocal(const double x)\n{\n  double sign = x < 0.0 ? -1.0 : 1.0;\n  return((sign*x) >= DrawEpsilon ? 1.0/x : sign*(1.0/DrawEpsilon));\n}\n\nstatic PrimitiveInfo *TraceStrokePolygon(const DrawInfo *draw_info,\n  const PrimitiveInfo *primitive_info)\n{\n  typedef struct _LineSegment\n  {\n    double\n      p,\n      q;\n  } LineSegment;\n\n  double\n    delta_theta,\n    dot_product,\n    mid,\n    miterlimit;\n\n  LineSegment\n    dx,\n    dy,\n    inverse_slope,\n    slope,\n    theta;\n\n  MagickBooleanType\n    closed_path;\n\n  PointInfo\n    box_p[5],\n    box_q[5],\n    center,\n    offset,\n    *path_p,\n    *path_q;\n\n  PrimitiveInfo\n    *polygon_primitive,\n    *stroke_polygon;\n\n  register ssize_t\n    i;\n\n  size_t\n    arc_segments,\n    max_strokes,\n    number_vertices;\n\n  ssize_t\n    j,\n    n,\n    p,\n    q;\n\n  /*\n    Allocate paths.\n  */\n  number_vertices=primitive_info->coordinates;\n  max_strokes=2*number_vertices+6*BezierQuantum+360;\n  path_p=(PointInfo *) AcquireQuantumMemory((size_t) max_strokes,\n    sizeof(*path_p));\n  path_q=(PointInfo *) AcquireQuantumMemory((size_t) max_strokes,\n    sizeof(*path_q));\n  polygon_primitive=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    number_vertices+2UL,sizeof(*polygon_primitive));\n  if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL) ||\n      (polygon_primitive == (PrimitiveInfo *) NULL))\n    return((PrimitiveInfo *) NULL);\n  (void) CopyMagickMemory(polygon_primitive,primitive_info,(size_t)\n    number_vertices*sizeof(*polygon_primitive));\n  closed_path=\n    (fabs(primitive_info[number_vertices-1].point.x-primitive_info[0].point.x) < DrawEpsilon) &&\n    (fabs(primitive_info[number_vertices-1].point.y-primitive_info[0].point.y) < DrawEpsilon) ?\n    MagickTrue : MagickFalse;\n  if ((draw_info->linejoin == RoundJoin) ||\n      ((draw_info->linejoin == MiterJoin) && (closed_path != MagickFalse)))\n    {\n      polygon_primitive[number_vertices]=primitive_info[1];\n      number_vertices++;\n    }\n  polygon_primitive[number_vertices].primitive=UndefinedPrimitive;\n  /*\n    Compute the slope for the first line segment, p.\n  */\n  dx.p=0.0;\n  dy.p=0.0;\n  for (n=1; n < (ssize_t) number_vertices; n++)\n  {\n    dx.p=polygon_primitive[n].point.x-polygon_primitive[0].point.x;\n    dy.p=polygon_primitive[n].point.y-polygon_primitive[0].point.y;\n    if ((fabs(dx.p) >= DrawEpsilon) || (fabs(dy.p) >= DrawEpsilon))\n      break;\n  }\n  if (n == (ssize_t) number_vertices)\n    n=(ssize_t) number_vertices-1L;\n  slope.p=0.0;\n  inverse_slope.p=0.0;\n  if (fabs(dx.p) < DrawEpsilon)\n    {\n      if (dx.p >= 0.0)\n        slope.p=dy.p < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n      else\n        slope.p=dy.p < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n    }\n  else\n    if (fabs(dy.p) < DrawEpsilon)\n      {\n        if (dy.p >= 0.0)\n          inverse_slope.p=dx.p < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n        else\n          inverse_slope.p=dx.p < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n      }\n    else\n      {\n        slope.p=dy.p/dx.p;\n        inverse_slope.p=(-1.0/slope.p);\n      }\n  mid=ExpandAffine(&draw_info->affine)*draw_info->stroke_width/2.0;\n  miterlimit=(double) (draw_info->miterlimit*draw_info->miterlimit*mid*mid);\n  if ((draw_info->linecap == SquareCap) && (closed_path == MagickFalse))\n    TraceSquareLinecap(polygon_primitive,number_vertices,mid);\n  offset.x=sqrt((double) (mid*mid/(inverse_slope.p*inverse_slope.p+1.0)));\n  offset.y=(double) (offset.x*inverse_slope.p);\n  if ((dy.p*offset.x-dx.p*offset.y) > 0.0)\n    {\n      box_p[0].x=polygon_primitive[0].point.x-offset.x;\n      box_p[0].y=polygon_primitive[0].point.y-offset.x*inverse_slope.p;\n      box_p[1].x=polygon_primitive[n].point.x-offset.x;\n      box_p[1].y=polygon_primitive[n].point.y-offset.x*inverse_slope.p;\n      box_q[0].x=polygon_primitive[0].point.x+offset.x;\n      box_q[0].y=polygon_primitive[0].point.y+offset.x*inverse_slope.p;\n      box_q[1].x=polygon_primitive[n].point.x+offset.x;\n      box_q[1].y=polygon_primitive[n].point.y+offset.x*inverse_slope.p;\n    }\n  else\n    {\n      box_p[0].x=polygon_primitive[0].point.x+offset.x;\n      box_p[0].y=polygon_primitive[0].point.y+offset.y;\n      box_p[1].x=polygon_primitive[n].point.x+offset.x;\n      box_p[1].y=polygon_primitive[n].point.y+offset.y;\n      box_q[0].x=polygon_primitive[0].point.x-offset.x;\n      box_q[0].y=polygon_primitive[0].point.y-offset.y;\n      box_q[1].x=polygon_primitive[n].point.x-offset.x;\n      box_q[1].y=polygon_primitive[n].point.y-offset.y;\n    }\n  /*\n    Create strokes for the line join attribute: bevel, miter, round.\n  */\n  p=0;\n  q=0;\n  path_q[p++]=box_q[0];\n  path_p[q++]=box_p[0];\n  for (i=(ssize_t) n+1; i < (ssize_t) number_vertices; i++)\n  {\n    /*\n      Compute the slope for this line segment, q.\n    */\n    dx.q=polygon_primitive[i].point.x-polygon_primitive[n].point.x;\n    dy.q=polygon_primitive[i].point.y-polygon_primitive[n].point.y;\n    dot_product=dx.q*dx.q+dy.q*dy.q;\n    if (dot_product < 0.25)\n      continue;\n    slope.q=0.0;\n    inverse_slope.q=0.0;\n    if (fabs(dx.q) < DrawEpsilon)\n      {\n        if (dx.q >= 0.0)\n          slope.q=dy.q < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n        else\n          slope.q=dy.q < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n      }\n    else\n      if (fabs(dy.q) < DrawEpsilon)\n        {\n          if (dy.q >= 0.0)\n            inverse_slope.q=dx.q < 0.0 ? -1.0/DrawEpsilon : 1.0/DrawEpsilon;\n          else\n            inverse_slope.q=dx.q < 0.0 ? 1.0/DrawEpsilon : -1.0/DrawEpsilon;\n        }\n      else\n        {\n          slope.q=dy.q/dx.q;\n          inverse_slope.q=(-1.0/slope.q);\n        }\n    offset.x=sqrt((double) (mid*mid/(inverse_slope.q*inverse_slope.q+1.0)));\n    offset.y=(double) (offset.x*inverse_slope.q);\n    dot_product=dy.q*offset.x-dx.q*offset.y;\n    if (dot_product > 0.0)\n      {\n        box_p[2].x=polygon_primitive[n].point.x-offset.x;\n        box_p[2].y=polygon_primitive[n].point.y-offset.y;\n        box_p[3].x=polygon_primitive[i].point.x-offset.x;\n        box_p[3].y=polygon_primitive[i].point.y-offset.y;\n        box_q[2].x=polygon_primitive[n].point.x+offset.x;\n        box_q[2].y=polygon_primitive[n].point.y+offset.y;\n        box_q[3].x=polygon_primitive[i].point.x+offset.x;\n        box_q[3].y=polygon_primitive[i].point.y+offset.y;\n      }\n    else\n      {\n        box_p[2].x=polygon_primitive[n].point.x+offset.x;\n        box_p[2].y=polygon_primitive[n].point.y+offset.y;\n        box_p[3].x=polygon_primitive[i].point.x+offset.x;\n        box_p[3].y=polygon_primitive[i].point.y+offset.y;\n        box_q[2].x=polygon_primitive[n].point.x-offset.x;\n        box_q[2].y=polygon_primitive[n].point.y-offset.y;\n        box_q[3].x=polygon_primitive[i].point.x-offset.x;\n        box_q[3].y=polygon_primitive[i].point.y-offset.y;\n      }\n    if (fabs((double) (slope.p-slope.q)) < DrawEpsilon)\n      {\n        box_p[4]=box_p[1];\n        box_q[4]=box_q[1];\n      }\n    else\n      {\n        box_p[4].x=(double) ((slope.p*box_p[0].x-box_p[0].y-slope.q*box_p[3].x+\n          box_p[3].y)/(slope.p-slope.q));\n        box_p[4].y=(double) (slope.p*(box_p[4].x-box_p[0].x)+box_p[0].y);\n        box_q[4].x=(double) ((slope.p*box_q[0].x-box_q[0].y-slope.q*box_q[3].x+\n          box_q[3].y)/(slope.p-slope.q));\n        box_q[4].y=(double) (slope.p*(box_q[4].x-box_q[0].x)+box_q[0].y);\n      }\n    if (q >= (ssize_t) (max_strokes-6*BezierQuantum-360))\n      {\n        if (~max_strokes < (6*BezierQuantum+360))\n          {\n            path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n            path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n          }\n        else\n          {\n            max_strokes+=6*BezierQuantum+360;\n            path_p=(PointInfo *) ResizeQuantumMemory(path_p,max_strokes,\n              sizeof(*path_p));\n            path_q=(PointInfo *) ResizeQuantumMemory(path_q,max_strokes,\n              sizeof(*path_q));\n          }\n        if ((path_p == (PointInfo *) NULL) || (path_q == (PointInfo *) NULL))\n          {\n            if (path_p != (PointInfo *) NULL)\n              path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n            if (path_q != (PointInfo *) NULL)\n              path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n            polygon_primitive=(PrimitiveInfo *)\n              RelinquishMagickMemory(polygon_primitive);\n            return((PrimitiveInfo *) NULL);\n          }\n      }\n    dot_product=dx.q*dy.p-dx.p*dy.q;\n    if (dot_product <= 0.0)\n      switch (draw_info->linejoin)\n      {\n        case BevelJoin:\n        {\n          path_q[q++]=box_q[1];\n          path_q[q++]=box_q[2];\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_p[p++]=box_p[4];\n          else\n            {\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case MiterJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            {\n              path_q[q++]=box_q[4];\n              path_p[p++]=box_p[4];\n            }\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case RoundJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_p[p++]=box_p[4];\n          else\n            {\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          center=polygon_primitive[n].point;\n          theta.p=atan2(box_q[1].y-center.y,box_q[1].x-center.x);\n          theta.q=atan2(box_q[2].y-center.y,box_q[2].x-center.x);\n          if (theta.q < theta.p)\n            theta.q+=2.0*MagickPI;\n          arc_segments=(size_t) ceil((double) ((theta.q-theta.p)/\n            (2.0*sqrt((double) (1.0/mid)))));\n          path_q[q].x=box_q[1].x;\n          path_q[q].y=box_q[1].y;\n          q++;\n          for (j=1; j < (ssize_t) arc_segments; j++)\n          {\n            delta_theta=(double) (j*(theta.q-theta.p)/arc_segments);\n            path_q[q].x=(double) (center.x+mid*cos(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            path_q[q].y=(double) (center.y+mid*sin(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            q++;\n          }\n          path_q[q++]=box_q[2];\n          break;\n        }\n        default:\n          break;\n      }\n    else\n      switch (draw_info->linejoin)\n      {\n        case BevelJoin:\n        {\n          path_p[p++]=box_p[1];\n          path_p[p++]=box_p[2];\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_q[q++]=box_q[4];\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n            }\n          break;\n        }\n        case MiterJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            {\n              path_q[q++]=box_q[4];\n              path_p[p++]=box_p[4];\n            }\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n              path_p[p++]=box_p[1];\n              path_p[p++]=box_p[2];\n            }\n          break;\n        }\n        case RoundJoin:\n        {\n          dot_product=(box_q[4].x-box_p[4].x)*(box_q[4].x-box_p[4].x)+\n            (box_q[4].y-box_p[4].y)*(box_q[4].y-box_p[4].y);\n          if (dot_product <= miterlimit)\n            path_q[q++]=box_q[4];\n          else\n            {\n              path_q[q++]=box_q[1];\n              path_q[q++]=box_q[2];\n            }\n          center=polygon_primitive[n].point;\n          theta.p=atan2(box_p[1].y-center.y,box_p[1].x-center.x);\n          theta.q=atan2(box_p[2].y-center.y,box_p[2].x-center.x);\n          if (theta.p < theta.q)\n            theta.p+=2.0*MagickPI;\n          arc_segments=(size_t) ceil((double) ((theta.p-theta.q)/\n            (2.0*sqrt((double) (1.0/mid)))));\n          path_p[p++]=box_p[1];\n          for (j=1; j < (ssize_t) arc_segments; j++)\n          {\n            delta_theta=(double) (j*(theta.q-theta.p)/arc_segments);\n            path_p[p].x=(double) (center.x+mid*cos(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            path_p[p].y=(double) (center.y+mid*sin(fmod((double)\n              (theta.p+delta_theta),DegreesToRadians(360.0))));\n            p++;\n          }\n          path_p[p++]=box_p[2];\n          break;\n        }\n        default:\n          break;\n      }\n    slope.p=slope.q;\n    inverse_slope.p=inverse_slope.q;\n    box_p[0]=box_p[2];\n    box_p[1]=box_p[3];\n    box_q[0]=box_q[2];\n    box_q[1]=box_q[3];\n    dx.p=dx.q;\n    dy.p=dy.q;\n    n=i;\n  }\n  path_p[p++]=box_p[1];\n  path_q[q++]=box_q[1];\n  /*\n    Trace stroked polygon.\n  */\n  stroke_polygon=(PrimitiveInfo *) AcquireQuantumMemory((size_t)\n    (p+q+2UL*closed_path+2UL),sizeof(*stroke_polygon));\n  if (stroke_polygon != (PrimitiveInfo *) NULL)\n    {\n      for (i=0; i < (ssize_t) p; i++)\n      {\n        stroke_polygon[i]=polygon_primitive[0];\n        stroke_polygon[i].point=path_p[i];\n      }\n      if (closed_path != MagickFalse)\n        {\n          stroke_polygon[i]=polygon_primitive[0];\n          stroke_polygon[i].point=stroke_polygon[0].point;\n          i++;\n        }\n      for ( ; i < (ssize_t) (p+q+closed_path); i++)\n      {\n        stroke_polygon[i]=polygon_primitive[0];\n        stroke_polygon[i].point=path_q[p+q+closed_path-(i+1)];\n      }\n      if (closed_path != MagickFalse)\n        {\n          stroke_polygon[i]=polygon_primitive[0];\n          stroke_polygon[i].point=stroke_polygon[p+closed_path].point;\n          i++;\n        }\n      stroke_polygon[i]=polygon_primitive[0];\n      stroke_polygon[i].point=stroke_polygon[0].point;\n      i++;\n      stroke_polygon[i].primitive=UndefinedPrimitive;\n      stroke_polygon[0].coordinates=(size_t) (p+q+2*closed_path+1);\n    }\n  path_p=(PointInfo *) RelinquishMagickMemory(path_p);\n  path_q=(PointInfo *) RelinquishMagickMemory(path_q);\n  polygon_primitive=(PrimitiveInfo *) RelinquishMagickMemory(polygon_primitive);\n  return(stroke_polygon);\n}\n"], "filenames": ["ChangeLog", "magick/draw.c"], "buggy_code_start_loc": [0, 3017], "buggy_code_end_loc": [0, 3018], "fixing_code_start_loc": [1, 3017], "fixing_code_end_loc": [4, 3018], "type": "CWE-119", "message": "Heap-based buffer overflow in the DrawImage function in magick/draw.c in ImageMagick before 6.9.5-5 allows remote attackers to cause a denial of service (application crash) via a crafted image file.", "other": {"cve": {"id": "CVE-2016-10046", "sourceIdentifier": "cve@mitre.org", "published": "2017-03-23T17:59:00.283", "lastModified": "2017-03-24T13:37:17.083", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Heap-based buffer overflow in the DrawImage function in magick/draw.c in ImageMagick before 6.9.5-5 allows remote attackers to cause a denial of service (application crash) via a crafted image file."}, {"lang": "es", "value": "Desbordamiento de b\u00fafer basado en memoria din\u00e1mica en la funci\u00f3n DrawImage em magick/draw.c en ImageMagick en versiones anteriores a 6.9.5-5 permite atacantes remotos provocar una denegaci\u00f3n de servicio (ca\u00edda de la aplicaci\u00f3n) a trav\u00e9s de un archivo de imagen manipulado."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:L/AC:L/PR:N/UI:R/S:U/C:N/I:N/A:H", "attackVector": "LOCAL", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "HIGH", "baseScore": 5.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 1.8, "impactScore": 3.6}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:N/A:P", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "PARTIAL", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-119"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:imagemagick:imagemagick:*:*:*:*:*:*:*:*", "versionEndIncluding": "6.9.5-4", "matchCriteriaId": "A889AC9F-911E-46E9-AECE-4E6F3B47D7F1"}]}]}], "references": [{"url": "http://www.openwall.com/lists/oss-security/2016/12/26/9", "source": "cve@mitre.org", "tags": ["Mailing List", "Third Party Advisory"]}, {"url": "http://www.securityfocus.com/bid/95183", "source": "cve@mitre.org", "tags": ["Third Party Advisory", "VDB Entry"]}, {"url": "https://bugzilla.redhat.com/show_bug.cgi?id=1410448", "source": "cve@mitre.org", "tags": ["Issue Tracking", "Third Party Advisory"]}, {"url": "https://github.com/ImageMagick/ImageMagick/commit/989f9f88ea6db09b99d25586e912c921c0da8d3f", "source": "cve@mitre.org", "tags": ["Issue Tracking", "Patch", "Vendor Advisory"]}]}, "github_commit_url": "https://github.com/ImageMagick/ImageMagick/commit/989f9f88ea6db09b99d25586e912c921c0da8d3f"}}