{"buggy_code": ["/**\n * @NOTE\n * See example.env for all possible keys\n */\n\nimport dotenv from 'dotenv';\nimport fs from 'fs';\nimport { clone, toNumber, toString } from 'lodash';\nimport path from 'path';\nimport { requireYAML } from './utils/require-yaml';\nimport { toArray } from '@directus/shared/utils';\n\nconst acceptedEnvTypes = ['string', 'number', 'regex', 'array'];\n\nconst defaults: Record<string, any> = {\n\tCONFIG_PATH: path.resolve(process.cwd(), '.env'),\n\n\tHOST: '0.0.0.0',\n\tPORT: 8055,\n\tPUBLIC_URL: '/',\n\tMAX_PAYLOAD_SIZE: '100kb',\n\n\tDB_EXCLUDE_TABLES: 'spatial_ref_sys,sysdiagrams',\n\n\tSTORAGE_LOCATIONS: 'local',\n\tSTORAGE_LOCAL_DRIVER: 'local',\n\tSTORAGE_LOCAL_ROOT: './uploads',\n\n\tRATE_LIMITER_ENABLED: false,\n\tRATE_LIMITER_POINTS: 25,\n\tRATE_LIMITER_DURATION: 1,\n\tRATE_LIMITER_STORE: 'memory',\n\n\tACCESS_TOKEN_TTL: '15m',\n\tREFRESH_TOKEN_TTL: '7d',\n\tREFRESH_TOKEN_COOKIE_SECURE: false,\n\tREFRESH_TOKEN_COOKIE_SAME_SITE: 'lax',\n\tREFRESH_TOKEN_COOKIE_NAME: 'directus_refresh_token',\n\n\tROOT_REDIRECT: './admin',\n\n\tCORS_ENABLED: false,\n\tCORS_ORIGIN: false,\n\tCORS_METHODS: 'GET,POST,PATCH,DELETE',\n\tCORS_ALLOWED_HEADERS: 'Content-Type,Authorization',\n\tCORS_EXPOSED_HEADERS: 'Content-Range',\n\tCORS_CREDENTIALS: true,\n\tCORS_MAX_AGE: 18000,\n\n\tCACHE_ENABLED: false,\n\tCACHE_STORE: 'memory',\n\tCACHE_TTL: '5m',\n\tCACHE_NAMESPACE: 'system-cache',\n\tCACHE_AUTO_PURGE: false,\n\tCACHE_CONTROL_S_MAXAGE: '0',\n\tCACHE_SCHEMA: true,\n\tCACHE_PERMISSIONS: true,\n\n\tAUTH_PROVIDERS: '',\n\tAUTH_DISABLE_DEFAULT: false,\n\n\tEXTENSIONS_PATH: './extensions',\n\tEXTENSIONS_AUTO_RELOAD: false,\n\n\tEMAIL_FROM: 'no-reply@directus.io',\n\tEMAIL_TRANSPORT: 'sendmail',\n\tEMAIL_SENDMAIL_NEW_LINE: 'unix',\n\tEMAIL_SENDMAIL_PATH: '/usr/sbin/sendmail',\n\n\tTELEMETRY: true,\n\n\tASSETS_CACHE_TTL: '30d',\n\tASSETS_TRANSFORM_MAX_CONCURRENT: 1,\n\tASSETS_TRANSFORM_IMAGE_MAX_DIMENSION: 6000,\n\tASSETS_TRANSFORM_MAX_OPERATIONS: 5,\n\n\tIP_TRUST_PROXY: true,\n\tIP_CUSTOM_HEADER: false,\n\n\tSERVE_APP: true,\n\n\tRELATIONAL_BATCH_SIZE: 25000,\n};\n\n// Allows us to force certain environment variable into a type, instead of relying\n// on the auto-parsed type in processValues. ref #3705\nconst typeMap: Record<string, string> = {\n\tHOST: 'string',\n\tPORT: 'string',\n\n\tDB_NAME: 'string',\n\tDB_USER: 'string',\n\tDB_PASSWORD: 'string',\n\tDB_DATABASE: 'string',\n\tDB_PORT: 'number',\n\n\tDB_EXCLUDE_TABLES: 'array',\n};\n\nlet env: Record<string, any> = {\n\t...defaults,\n\t...getEnv(),\n\t...process.env,\n};\n\nprocess.env = env;\n\nenv = processValues(env);\n\nexport default env;\n\n/**\n * When changes have been made during runtime, like in the CLI, we can refresh the env object with\n * the newly created variables\n */\nexport function refreshEnv(): void {\n\tenv = {\n\t\t...defaults,\n\t\t...getEnv(),\n\t\t...process.env,\n\t};\n\n\tprocess.env = env;\n\n\tenv = processValues(env);\n}\n\nfunction getEnv() {\n\tconst configPath = path.resolve(process.env.CONFIG_PATH || defaults.CONFIG_PATH);\n\n\tif (fs.existsSync(configPath) === false) return {};\n\n\tconst fileExt = path.extname(configPath).toLowerCase();\n\n\tif (fileExt === '.js') {\n\t\tconst module = require(configPath);\n\t\tconst exported = module.default || module;\n\n\t\tif (typeof exported === 'function') {\n\t\t\treturn exported(process.env);\n\t\t} else if (typeof exported === 'object') {\n\t\t\treturn exported;\n\t\t}\n\n\t\tthrow new Error(\n\t\t\t`Invalid JS configuration file export type. Requires one of \"function\", \"object\", received: \"${typeof exported}\"`\n\t\t);\n\t}\n\n\tif (fileExt === '.json') {\n\t\treturn require(configPath);\n\t}\n\n\tif (fileExt === '.yaml' || fileExt === '.yml') {\n\t\tconst data = requireYAML(configPath);\n\n\t\tif (typeof data === 'object') {\n\t\t\treturn data as Record<string, string>;\n\t\t}\n\n\t\tthrow new Error('Invalid YAML configuration. Root has to be an object.');\n\t}\n\n\t// Default to env vars plain text files\n\treturn dotenv.parse(fs.readFileSync(configPath, { encoding: 'utf8' }));\n}\n\nfunction getVariableType(variable: string) {\n\treturn variable.split(':').slice(0, -1)[0];\n}\n\nfunction getEnvVariableValue(variableValue: string, variableType: string) {\n\treturn variableValue.split(`${variableType}:`)[1];\n}\n\nfunction getEnvironmentValueWithPrefix(envArray: Array<string>): Array<string | number | RegExp> {\n\treturn envArray.map((item: string) => {\n\t\tif (isEnvSyntaxPrefixPresent(item)) {\n\t\t\treturn getEnvironmentValueByType(item);\n\t\t}\n\t\treturn item;\n\t});\n}\n\nfunction getEnvironmentValueByType(envVariableString: string) {\n\tconst variableType = getVariableType(envVariableString);\n\tconst envVariableValue = getEnvVariableValue(envVariableString, variableType);\n\n\tswitch (variableType) {\n\t\tcase 'number':\n\t\t\treturn toNumber(envVariableValue);\n\t\tcase 'array':\n\t\t\treturn getEnvironmentValueWithPrefix(toArray(envVariableValue));\n\t\tcase 'regex':\n\t\t\treturn new RegExp(envVariableValue);\n\t\tcase 'string':\n\t\t\treturn envVariableValue;\n\t\tcase 'json':\n\t\t\treturn tryJSON(envVariableValue);\n\t}\n}\n\nfunction isEnvSyntaxPrefixPresent(value: string): boolean {\n\treturn acceptedEnvTypes.some((envType) => value.includes(`${envType}:`));\n}\n\nfunction processValues(env: Record<string, any>) {\n\tenv = clone(env);\n\n\tfor (let [key, value] of Object.entries(env)) {\n\t\t// If key ends with '_FILE', try to get the value from the file defined in this variable\n\t\t// and store it in the variable with the same name but without '_FILE' at the end\n\t\tlet newKey;\n\t\tif (key.length > 5 && key.endsWith('_FILE')) {\n\t\t\tnewKey = key.slice(0, -5);\n\t\t\tif (newKey in env) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Duplicate environment variable encountered: you can't use \"${newKey}\" and \"${key}\" simultaneously.`\n\t\t\t\t);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvalue = fs.readFileSync(value, { encoding: 'utf8' });\n\t\t\t\tkey = newKey;\n\t\t\t} catch {\n\t\t\t\tthrow new Error(`Failed to read value from file \"${value}\", defined in environment variable \"${key}\".`);\n\t\t\t}\n\t\t}\n\n\t\t// Convert values with a type prefix\n\t\t// (see https://docs.directus.io/reference/environment-variables/#environment-syntax-prefix)\n\t\tif (typeof value === 'string' && isEnvSyntaxPrefixPresent(value)) {\n\t\t\tenv[key] = getEnvironmentValueByType(value);\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Convert values where the key is defined in typeMap\n\t\tif (typeMap[key]) {\n\t\t\tswitch (typeMap[key]) {\n\t\t\t\tcase 'number':\n\t\t\t\t\tenv[key] = toNumber(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'string':\n\t\t\t\t\tenv[key] = toString(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'array':\n\t\t\t\t\tenv[key] = toArray(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\t\tenv[key] = tryJSON(value);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Try to convert remaining values:\n\t\t// - boolean values to boolean\n\t\t// - 'null' to null\n\t\t// - number values (> 0 <= Number.MAX_SAFE_INTEGER) to number\n\t\tif (value === 'true') {\n\t\t\tenv[key] = true;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (value === 'false') {\n\t\t\tenv[key] = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (value === 'null') {\n\t\t\tenv[key] = null;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (\n\t\t\tString(value).startsWith('0') === false &&\n\t\t\tisNaN(value) === false &&\n\t\t\tvalue.length > 0 &&\n\t\t\tvalue <= Number.MAX_SAFE_INTEGER\n\t\t) {\n\t\t\tenv[key] = Number(value);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (String(value).includes(',')) {\n\t\t\tenv[key] = toArray(value);\n\t\t}\n\n\t\t// Try converting the value to a JS object. This allows JSON objects to be passed for nested\n\t\t// config flags, or custom param names (that aren't camelCased)\n\t\tenv[key] = tryJSON(value);\n\n\t\t// If '_FILE' variable hasn't been processed yet, store it as it is (string)\n\t\tif (newKey) {\n\t\t\tenv[key] = value;\n\t\t}\n\t}\n\n\treturn env;\n}\n\nfunction tryJSON(value: any) {\n\ttry {\n\t\treturn JSON.parse(value);\n\t} catch {\n\t\treturn value;\n\t}\n}\n", "import formatTitle from '@directus/format-title';\nimport axios, { AxiosResponse } from 'axios';\nimport exifr from 'exifr';\nimport { clone } from 'lodash';\nimport { extension } from 'mime-types';\nimport path from 'path';\nimport sharp from 'sharp';\nimport url from 'url';\nimport emitter from '../emitter';\nimport env from '../env';\nimport { ForbiddenException, ServiceUnavailableException } from '../exceptions';\nimport logger from '../logger';\nimport storage from '../storage';\nimport { AbstractServiceOptions, File, PrimaryKey, MutationOptions } from '../types';\nimport { toArray } from '@directus/shared/utils';\nimport { ItemsService } from './items';\n\nexport class FilesService extends ItemsService {\n\tconstructor(options: AbstractServiceOptions) {\n\t\tsuper('directus_files', options);\n\t}\n\n\t/**\n\t * Upload a single new file to the configured storage adapter\n\t */\n\tasync uploadOne(\n\t\tstream: NodeJS.ReadableStream,\n\t\tdata: Partial<File> & { filename_download: string; storage: string },\n\t\tprimaryKey?: PrimaryKey,\n\t\topts?: MutationOptions\n\t): Promise<PrimaryKey> {\n\t\tconst payload = clone(data);\n\n\t\tif ('folder' in payload === false) {\n\t\t\tconst settings = await this.knex.select('storage_default_folder').from('directus_settings').first();\n\n\t\t\tif (settings?.storage_default_folder) {\n\t\t\t\tpayload.folder = settings.storage_default_folder;\n\t\t\t}\n\t\t}\n\n\t\tif (primaryKey !== undefined) {\n\t\t\tawait this.updateOne(primaryKey, payload, { emitEvents: false });\n\n\t\t\t// If the file you're uploading already exists, we'll consider this upload a replace. In that case, we'll\n\t\t\t// delete the previously saved file and thumbnails to ensure they're generated fresh\n\t\t\tconst disk = storage.disk(payload.storage);\n\n\t\t\tfor await (const file of disk.flatList(String(primaryKey))) {\n\t\t\t\tawait disk.delete(file.path);\n\t\t\t}\n\t\t} else {\n\t\t\tprimaryKey = await this.createOne(payload, { emitEvents: false });\n\t\t}\n\n\t\tconst fileExtension =\n\t\t\tpath.extname(payload.filename_download) || (payload.type && '.' + extension(payload.type)) || '';\n\n\t\tpayload.filename_disk = primaryKey + (fileExtension || '');\n\n\t\tif (!payload.type) {\n\t\t\tpayload.type = 'application/octet-stream';\n\t\t}\n\n\t\ttry {\n\t\t\tawait storage.disk(data.storage).put(payload.filename_disk, stream, payload.type);\n\t\t} catch (err: any) {\n\t\t\tlogger.warn(`Couldn't save file ${payload.filename_disk}`);\n\t\t\tlogger.warn(err);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't save file ${payload.filename_disk}`, { service: 'files' });\n\t\t}\n\n\t\tconst { size } = await storage.disk(data.storage).getStat(payload.filename_disk);\n\t\tpayload.filesize = size;\n\n\t\tif (['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/tiff'].includes(payload.type)) {\n\t\t\tconst buffer = await storage.disk(data.storage).getBuffer(payload.filename_disk);\n\t\t\ttry {\n\t\t\t\tconst meta = await sharp(buffer.content, {}).metadata();\n\n\t\t\t\tif (meta.orientation && meta.orientation >= 5) {\n\t\t\t\t\tpayload.height = meta.width;\n\t\t\t\t\tpayload.width = meta.height;\n\t\t\t\t} else {\n\t\t\t\t\tpayload.width = meta.width;\n\t\t\t\t\tpayload.height = meta.height;\n\t\t\t\t}\n\t\t\t} catch (err: any) {\n\t\t\t\tlogger.warn(`Couldn't extract sharp metadata from file`);\n\t\t\t\tlogger.warn(err);\n\t\t\t}\n\n\t\t\tpayload.metadata = {};\n\n\t\t\ttry {\n\t\t\t\tpayload.metadata = await exifr.parse(buffer.content, {\n\t\t\t\t\ticc: false,\n\t\t\t\t\tiptc: true,\n\t\t\t\t\tifd1: true,\n\t\t\t\t\tinterop: true,\n\t\t\t\t\ttranslateValues: true,\n\t\t\t\t\treviveValues: true,\n\t\t\t\t\tmergeOutput: false,\n\t\t\t\t});\n\t\t\t\tif (payload.metadata?.iptc?.Headline) {\n\t\t\t\t\tpayload.title = payload.metadata.iptc.Headline;\n\t\t\t\t}\n\t\t\t\tif (!payload.description && payload.metadata?.iptc?.Caption) {\n\t\t\t\t\tpayload.description = payload.metadata.iptc.Caption;\n\t\t\t\t}\n\t\t\t\tif (payload.metadata?.iptc?.Keywords) {\n\t\t\t\t\tpayload.tags = payload.metadata.iptc.Keywords;\n\t\t\t\t}\n\t\t\t} catch (err: any) {\n\t\t\t\tlogger.warn(`Couldn't extract EXIF metadata from file`);\n\t\t\t\tlogger.warn(err);\n\t\t\t}\n\t\t}\n\n\t\t// We do this in a service without accountability. Even if you don't have update permissions to the file,\n\t\t// we still want to be able to set the extracted values from the file on create\n\t\tconst sudoService = new ItemsService('directus_files', {\n\t\t\tknex: this.knex,\n\t\t\tschema: this.schema,\n\t\t});\n\n\t\tawait sudoService.updateOne(primaryKey, payload, { emitEvents: false });\n\n\t\tif (this.cache && env.CACHE_AUTO_PURGE) {\n\t\t\tawait this.cache.clear();\n\t\t}\n\n\t\tif (opts?.emitEvents !== false) {\n\t\t\temitter.emitAction(\n\t\t\t\t'files.upload',\n\t\t\t\t{\n\t\t\t\t\tpayload,\n\t\t\t\t\tkey: primaryKey,\n\t\t\t\t\tcollection: this.collection,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdatabase: this.knex,\n\t\t\t\t\tschema: this.schema,\n\t\t\t\t\taccountability: this.accountability,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn primaryKey;\n\t}\n\n\t/**\n\t * Import a single file from an external URL\n\t */\n\tasync importOne(importURL: string, body: Partial<File>): Promise<PrimaryKey> {\n\t\tconst fileCreatePermissions = this.accountability?.permissions?.find(\n\t\t\t(permission) => permission.collection === 'directus_files' && permission.action === 'create'\n\t\t);\n\n\t\tif (this.accountability && this.accountability?.admin !== true && !fileCreatePermissions) {\n\t\t\tthrow new ForbiddenException();\n\t\t}\n\n\t\tlet fileResponse: AxiosResponse<NodeJS.ReadableStream>;\n\n\t\ttry {\n\t\t\tfileResponse = await axios.get<NodeJS.ReadableStream>(importURL, {\n\t\t\t\tresponseType: 'stream',\n\t\t\t});\n\t\t} catch (err: any) {\n\t\t\tlogger.warn(`Couldn't fetch file from url \"${importURL}\"`);\n\t\t\tlogger.warn(err);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\tservice: 'external-file',\n\t\t\t});\n\t\t}\n\n\t\tconst parsedURL = url.parse(fileResponse.request.res.responseUrl);\n\t\tconst filename = path.basename(parsedURL.pathname as string);\n\n\t\tconst payload = {\n\t\t\tfilename_download: filename,\n\t\t\tstorage: toArray(env.STORAGE_LOCATIONS)[0],\n\t\t\ttype: fileResponse.headers['content-type'],\n\t\t\ttitle: formatTitle(filename),\n\t\t\t...(body || {}),\n\t\t};\n\n\t\treturn await this.uploadOne(fileResponse.data, payload);\n\t}\n\n\t/**\n\t * Delete a file\n\t */\n\tasync deleteOne(key: PrimaryKey, opts?: MutationOptions): Promise<PrimaryKey> {\n\t\tawait this.deleteMany([key], opts);\n\t\treturn key;\n\t}\n\n\t/**\n\t * Delete multiple files\n\t */\n\tasync deleteMany(keys: PrimaryKey[], opts?: MutationOptions): Promise<PrimaryKey[]> {\n\t\tconst files = await super.readMany(keys, { fields: ['id', 'storage'], limit: -1 });\n\n\t\tif (!files) {\n\t\t\tthrow new ForbiddenException();\n\t\t}\n\n\t\tawait super.deleteMany(keys);\n\n\t\tfor (const file of files) {\n\t\t\tconst disk = storage.disk(file.storage);\n\n\t\t\t// Delete file + thumbnails\n\t\t\tfor await (const { path } of disk.flatList(file.id)) {\n\t\t\t\tawait disk.delete(path);\n\t\t\t}\n\t\t}\n\n\t\tif (this.cache && env.CACHE_AUTO_PURGE && opts?.autoPurgeCache !== false) {\n\t\t\tawait this.cache.clear();\n\t\t}\n\n\t\treturn keys;\n\t}\n}\n", "# Configuration Options\n\n> Environment variables are used for all configuration within a Directus project. These variables can be defined in a\n> number of ways, which we cover below.\n\n[[toc]]\n\n## Configuration Files\n\nBy default, Directus will read the `.env` file located next to your project's `package.json` (typically in the root\nfolder of your project) for its configuration. You can change this path and filename by setting the `CONFIG_PATH`\nenvironment variable before starting Directus. For example:\n\n```bash\nCONFIG_PATH=\"/path/to/config.js\" npx directus start\n```\n\nIn case you prefer using a configuration file instead of environment variables, you can also use the `CONFIG_PATH`\nenvironment variable to instruct Directus to use a local configuration file instead of environment variables. The config\nfile can be one of the following formats:\n\n- [.env](#env)\n- [config.json](#config-json)\n- [config.yaml](#config-yaml)\n- [config.js](#config-js)\n\n### .env\n\nIf the config path has no file extension, or a file extension that's not one of the other supported formats, Directus\nwill try reading the file config path as environment variables. This has the following structure:\n\n```\nHOST=\"0.0.0.0\"\nPORT=8055\n\nDB_CLIENT=\"pg\"\nDB_HOST=\"localhost\"\nDB_PORT=5432\n\netc\n```\n\n### config.json\n\nIf you prefer a single JSON file for your configuration, create a JSON file with the environment variables as keys, for\nexample:\n\n```\nCONFIG_PATH=\"/path/to/config.json\"\n```\n\n```json\n{\n\t\"HOST\": \"0.0.0.0\",\n\t\"PORT\": 8055,\n\n\t\"DB_CLIENT\": \"pg\",\n\t\"DB_HOST\": \"localhost\",\n\t\"DB_PORT\": 5432\n\n\t// etc\n}\n```\n\n### config.yaml\n\nSimilar to JSON, you can use a `.yaml` (or `.yml`) file for your config:\n\n```\nCONFIG_PATH=\"/path/to/config.yaml\"\n```\n\n```yaml\nHOST: 0.0.0.0\nPORT: 8055\n\nDB_CLIENT: pg\nDB_HOST: localhost\nDB_PORT: 5432\n#\n# etc\n```\n\n### config.js\n\nUsing a JavaScript file for your config allows you to dynamically generate the configuration of the project during\nstartup. The JavaScript configuration supports two different formats, either an **Object Structure** where the key is\nthe environment variable name:\n\n```js\n// Object Sytax\n\nmodule.exports = {\n\tHOST: '0.0.0.0',\n\tPORT: 8055,\n\n\tDB_CLIENT: 'pg',\n\tDB_HOST: 'localhost',\n\tDB_PORT: 5432,\n\n\t// etc\n};\n```\n\nOr a **Function Structure** that _returns_ the same object format as above. The function gets `process.env` as its\nparameter.\n\n```js\n// Function Syntax\n\nmodule.exports = function (env) {\n\treturn {\n\t\tHOST: '0.0.0.0',\n\t\tPORT: 8055,\n\n\t\tDB_CLIENT: 'pg',\n\t\tDB_HOST: 'localhost',\n\t\tDB_PORT: 5432,\n\n\t\t// etc\n\t};\n};\n```\n\n## Environment Variable Files\n\nAny of the environment variable values can be imported from a file, by appending `_FILE` to the environment variable\nname. This is especially useful when used in conjunction with Docker Secrets, so you can keep sensitive data out of your\ncompose files. For example:\n\n```\nDB_PASSWORD_FILE=\"/run/secrets/db_password\"\n```\n\n## Type Casting and Nesting\n\nEnvironment variables are automatically type cast based on the structure of the variable, for example:\n\n```\nPUBLIC_URL=\"https://example.com\"\n// \"https://example.com\"\n\nDB_HOST=\"3306\"\n// 3306\n\nCORS_ENABLED=\"false\"\n// false\n\nSTORAGE_LOCATIONS=\"s3,local,example\"\n// [\"s3\", \"local\", \"example\"]\n```\n\nIn cases where the environment variables are converted to a configuration object for third party library use, like in\n`DB_*` or `RATE_LIMITER_REDIS_*`, the environment variable will be converted to camelCase. You can use a double\nunderscore (`__`) for nested objects:\n\n```\nDB_CLIENT=\"pg\"\nDB_CONNECTION_STRING=\"postgresql://postgres:example@127.0.0.1\"\nDB_SSL__REJECT_UNAUTHORIZED=\"false\"\n\n{\n\tclient: \"pg\",\n\tconnectionString: \"postgresql://postgres:example@127.0.0.1\",\n\tssl: {\n\t\trejectUnauthorized: false\n\t}\n}\n```\n\n## Environment Syntax Prefix\n\nDirectus will attempt to [automatically type cast environment variables](#type-casting-and-nesting) based on context\nclues. If you have a specific need for a given type, you can tell Directus what type to use for the given value by\nprefixing the value with `{type}:`. The following types are available:\n\n| Syntax Prefix | Example                                                                                                         | Output                                                                                                                       |\n| ------------- | --------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |\n| `string`      | `string:value`                                                                                                  | `\"value\"`                                                                                                                    |\n| `number`      | `number:3306`                                                                                                   | `3306`                                                                                                                       |\n| `regex`       | `regex:\\.example\\.com$`                                                                                         | `/\\.example\\.com$/`                                                                                                          |\n| `array`       | `array:https://example.com,https://example2.com` <br> `array:string:https://example.com,regex:\\.example3\\.com$` | `[\"https://example.com\", \"https://example2.com\"]` <br> `[\"https://example.com\", \"https://example2.com\", /\\.example3\\.com$/]` |\n\n---\n\n## General\n\n| Variable                   | Description                                                                                                | Default Value |\n| -------------------------- | ---------------------------------------------------------------------------------------------------------- | ------------- |\n| `CONFIG_PATH`              | Where your config file is located. See [Configuration Files](#configuration-files)                         | `.env`        |\n| `HOST`                     | IP or host the API listens on.                                                                             | `0.0.0.0`     |\n| `PORT`                     | What port to run the API under.                                                                            | `8055`        |\n| `PUBLIC_URL`<sup>[1]</sup> | URL where your API can be reached on the web.                                                              | `/`           |\n| `LOG_LEVEL`                | What level of detail to log. One of `fatal`, `error`, `warn`, `info`, `debug`, `trace` or `silent`.        | `info`        |\n| `LOG_STYLE`                | Render the logs human readable (pretty) or as JSON. One of `pretty`, `raw`.                                | `pretty`      |\n| `MAX_PAYLOAD_SIZE`         | Controls the maximum request body size. Accepts number of bytes, or human readable string.                 | `100kb`       |\n| `ROOT_REDIRECT`            | Where to redirect to when navigating to `/`. Accepts a relative path, absolute URL, or `false` to disable. | `./admin`     |\n| `SERVE_APP`                | Whether or not to serve the Admin App under `/admin`.                                                      | `true`        |\n\n<sup>[1]</sup> The PUBLIC_URL value is used for things like OAuth redirects, forgot-password emails, and logos that\nneeds to be publicly available on the internet.\n\n::: tip Additional Logger Variables\n\nAll `LOGGER_*` environment variables are passed to the `options` configuration of a\n[`Pino` instance](https://github.com/pinojs/pino/blob/master/docs/api.md#options). All `LOGGER_HTTP*` environment\nvariables are passed to the `options` configuration of a\n[`Pino-http` instance](https://github.com/pinojs/pino-http#api). Based on your project's needs, you can extend the\n`LOGGER_*` environment variables with any config you need to pass to the logger instance. If a LOGGER_LEVELS key is\nadded, these values will be passed to the logger formatter, as described\n[here](https://github.com/pinojs/pino/blob/master/docs/help.md#mapping-pino-log-levels-to-google-cloud-logging-stackdriver-serverity-levels)\nfor example. The format for adding LEVELS values is:\n`LOGGER_LEVELS=\"trace:DEBUG,debug:DEBUG,info:INFO,warn:WARNING,error:ERROR,fatal:CRITICAL\"`\n\n:::\n\n## Server\n\n| Variable                    | Description                                        | Default Value                                                                                                |\n| --------------------------- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------ |\n| `SERVER_KEEP_ALIVE_TIMEOUT` | Timeout in milliseconds for socket to be destroyed | [server.keepAliveTimeout](https://github.com/nodejs/node/blob/master/doc/api/http.md#serverkeepalivetimeout) |\n| `SERVER_HEADERS_TIMEOUT`    | Timeout in milliseconds to parse HTTP headers      | [server.headersTimeout](https://github.com/nodejs/node/blob/master/doc/api/http.md#serverheaderstimeout)     |\n\n::: tip Additional Server Variables\n\nAll `SERVER_*` environment variables are merged with `server` instance properties created from\n[http.Server](https://github.com/nodejs/node/blob/master/doc/api/http.md#class-httpserver). This allows to configure\nserver behind a proxy, a load balancer, etc. Be careful to not override methods of this instance otherwise you may incur\ninto unexpected behaviors.\n\n:::\n\n## Database\n\n| Variable               | Description                                                                                                                                        | Default Value                 |\n| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |\n| `DB_CLIENT`            | **Required**. What database client to use. One of `pg` or `postgres`, `mysql`, `oracledb`, `mssql`, `sqlite3`, `cockroachdb`.                      | --                            |\n| `DB_HOST`              | Database host. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_PORT`              | Database port. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_DATABASE`          | Database name. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_USER`              | Database user. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_PASSWORD`          | Database user's password. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                           | --                            |\n| `DB_FILENAME`          | Where to read/write the SQLite database. **Required** when using `sqlite3`.                                                                        | --                            |\n| `DB_CONNECTION_STRING` | When using `pg`, you can submit a connection string instead of individual properties. Using this will ignore any of the other connection settings. | --                            |\n| `DB_POOL_*`            | Pooling settings. Passed on to [the `tarn.js`](https://github.com/vincit/tarn.js#usage) library.                                                   | --                            |\n| `DB_EXCLUDE_TABLES`    | CSV of tables you want Directus to ignore completely                                                                                               | `spatial_ref_sys,sysdiagrams` |\n| `DB_CHARSET`           | Charset/collation to use in the connection to MySQL/MariaDB                                                                                        | `UTF8_GENERAL_CI`             |\n| `DB_VERSION`           | Database version, in case you use the PostgreSQL adapter to connect a non-standard database. Not normally required.                                | --                            |\n\n::: tip Additional Database Variables\n\nAll `DB_*` environment variables are passed to the `connection` configuration of a [`Knex` instance](http://knexjs.org).\nBased on your project's needs, you can extend the `DB_*` environment variables with any config you need to pass to the\ndatabase instance.\n\n:::\n\n::: tip Pooling\n\nAll the `DB_POOL_` prefixed options are passed to [`tarn.js`](https://github.com/vincit/tarn.js#usage) through\n[Knex](http://knexjs.org/#Installation-pooling)\n\n:::\n\n## Security\n\n| Variable                         | Description                                                                                                                                                      | Default Value            |\n| -------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |\n| `KEY`                            | Unique identifier for the project.                                                                                                                               | --                       |\n| `SECRET`                         | Secret string for the project.                                                                                                                                   | --                       |\n| `ACCESS_TOKEN_TTL`               | The duration that the access token is valid.                                                                                                                     | `15m`                    |\n| `REFRESH_TOKEN_TTL`              | The duration that the refresh token is valid, and also how long users stay logged-in to the App.                                                                 | `7d`                     |\n| `REFRESH_TOKEN_COOKIE_DOMAIN`    | Which domain to use for the refresh cookie. Useful for development mode.                                                                                         | --                       |\n| `REFRESH_TOKEN_COOKIE_SECURE`    | Whether or not to use a secure cookie for the refresh token in cookie mode.                                                                                      | `false`                  |\n| `REFRESH_TOKEN_COOKIE_SAME_SITE` | Value for `sameSite` in the refresh token cookie when in cookie mode.                                                                                            | `lax`                    |\n| `REFRESH_TOKEN_COOKIE_NAME`      | Name of refresh token cookie .                                                                                                                                   | `directus_refresh_token` |\n| `PASSWORD_RESET_URL_ALLOW_LIST`  | List of URLs that can be used [as `reset_url` in /password/request](/reference/authentication/#request-password-reset)                                           | --                       |\n| `USER_INVITE_URL_ALLOW_LIST`     | List of URLs that can be used [as `invite_url` in /users/invite](/reference/system/users/#invite-a-new-user)                                                     | --                       |\n| `IP_TRUST_PROXY`                 | Settings for [express' trust proxy setting](https://expressjs.com/en/guide/behind-proxies.html)                                                                  | true                     |\n| `IP_CUSTOM_HEADER`               | What custom request header to use for the IP address                                                                                                             | false                    |\n| `CONTENT_SECURITY_POLICY`        | Custom overrides for the Content-Security-Policy header. See [helmet's documentation](https://helmetjs.github.io) for more information.                          | --                       |\n| `ASSETS_CONTENT_SECURITY_POLICY` | Custom overrides for the Content-Security-Policy header for the /assets endpoint. See [helmet's documentation](https://helmetjs.github.io) for more information. | --                       |\n\n::: tip Cookie Strictness\n\nBrowser are pretty strict when it comes to third-party cookies. If you're running into unexpected problems when running\nyour project and API on different domains, make sure to verify your configuration for `REFRESH_TOKEN_COOKIE_NAME`,\n`REFRESH_TOKEN_COOKIE_SECURE` and `REFRESH_TOKEN_COOKIE_SAME_SITE`.\n\n:::\n\n### Hashing\n\n| Variable               | Description                                                                                                                      | Default Value       |\n| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------- |\n| `HASH_MEMORY_COST`     | How much memory to use when generating hashes, in KiB.                                                                           | `4096` (4 MiB)      |\n| `HASH_LENGTH`          | The length of the hash function output in bytes.                                                                                 | `32`                |\n| `HASH_TIME_COST`       | The amount of passes (iterations) used by the hash function. It increases hash strength at the cost of time required to compute. | `3`                 |\n| `HASH_PARALLELISM`     | The amount of threads to compute the hash on. Each thread has a memory pool with `HASH_MEMORY_COST` size.                        | `1` (single thread) |\n| `HASH_TYPE`            | The variant of the hash function (`0`: argon2d, `1`: argon2i, or `2`: argon2id).                                                 | `1` (argon2i)       |\n| `HASH_ASSOCIATED_DATA` | An extra and optional non-secret value. The value will be included B64 encoded in the parameters portion of the digest.          | --                  |\n\nArgon2's hashing function is used by Directus for three purposes: 1) hashing user passwords, 2) generating hashes for\nthe `Hash` field type in collections, and 3) the\n[generate a hash API endpoint](/reference/system/utilities/#generate-a-hash).\n\nAll `HASH_*` environment variable parameters are passed to the `argon2.hash` function. See the\n[node-argon2 library options page](https://github.com/ranisalt/node-argon2/wiki/Options) for reference.\n\n::: tip Memory Usage\n\nModifying `HASH_MEMORY_COST` and/or `HASH_PARALLELISM` will affect the amount of memory directus uses when computing\nhashes; each thread gets `HASH_MEMORY_COST` amount of memory, so the total additional memory will be these two values\nmultiplied. This may cause out of memory errors, especially when running in containerized environments.\n\n:::\n\n## CORS\n\n| Variable               | Description                                                                                                                                            | Default Value                |\n| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------- |\n| `CORS_ENABLED`         | Whether or not to enable the CORS headers.                                                                                                             | `false`                      |\n| `CORS_ORIGIN`          | Value for the `Access-Control-Allow-Origin` header. Use `true` to match the Origin header, or provide a domain or a CSV of domains for specific access | `false`                      |\n| `CORS_METHODS`         | Value for the `Access-Control-Allow-Methods` header.                                                                                                   | `GET,POST,PATCH,DELETE`      |\n| `CORS_ALLOWED_HEADERS` | Value for the `Access-Control-Allow-Headers` header.                                                                                                   | `Content-Type,Authorization` |\n| `CORS_EXPOSED_HEADERS` | Value for the `Access-Control-Expose-Headers` header.                                                                                                  | `Content-Range`              |\n| `CORS_CREDENTIALS`     | Whether or not to send the `Access-Control-Allow-Credentials` header.                                                                                  | `true`                       |\n| `CORS_MAX_AGE`         | Value for the `Access-Control-Max-Age` header.                                                                                                         | `18000`                      |\n\n## Rate Limiting\n\nYou can use the built-in rate-limiter to prevent users from hitting the API too much. Simply enabling the rate-limiter\nwill set a default maximum of 50 requests per second, tracked in memory. Once you have multiple copies of Directus\nrunning under a load-balancer, or your user base grows so much that memory is no longer a viable place to store the rate\nlimiter information, you can use an external `memcache` or `redis` instance to store the rate limiter data.\n\n| Variable                | Description                                                                      | Default Value |\n| ----------------------- | -------------------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_ENABLED`  | Whether or not to enable rate limiting on the API.                               | `false`       |\n| `RATE_LIMITER_POINTS`   | The amount of allowed hits per duration.                                         | `50`          |\n| `RATE_LIMITER_DURATION` | The time window in seconds in which the points are counted.                      | `1`           |\n| `RATE_LIMITER_STORE`    | Where to store the rate limiter counts. One of `memory`, `redis`, or `memcache`. | `memory`      |\n\nBased on the `RATE_LIMITER_STORE` used, you must also provide the following configurations:\n\n### Memory\n\nNo additional configuration required.\n\n### Redis\n\n| Variable             | Description                                                           | Default Value |\n| -------------------- | --------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_REDIS` | Redis connection string, eg: `redis://:authpassword@127.0.0.1:6380/4` | ---           |\n\nAlternatively, you can provide the individual connection parameters:\n\n| Variable                      | Description                      | Default Value |\n| ----------------------------- | -------------------------------- | ------------- |\n| `RATE_LIMITER_REDIS_HOST`     | Hostname of the Redis instance   | --            |\n| `RATE_LIMITER_REDIS_PORT`     | Port of the Redis instance       | --            |\n| `RATE_LIMITER_REDIS_PASSWORD` | Password for your Redis instance | --            |\n\n### Memcache\n\n| Variable                | Description                                                                                                                                                           | Default Value |\n| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_MEMCACHE` | Location of your memcache instance. You can use [`array:` syntax](#environment-syntax-prefix), eg: `array:<instance-1>,<instance-2>` for multiple memcache instances. | ---           |\n\n::: tip Additional Rate Limiter Variables\n\nAll `RATE_LIMITER_*` variables are passed directly to a `rate-limiter-flexible` instance. Depending on your project's\nneeds, you can extend the above environment variables to configure any of\n[the `rate-limiter-flexible` options](https://github.com/animir/node-rate-limiter-flexible/wiki/Options).\n\n:::\n\n### Example: Basic\n\n```\n// 10 requests per 5 seconds\n\nRATE_LIMITER_POINTS=\"10\"\nRATE_LIMITER_DURATION=\"5\"\n```\n\n### Example: Redis\n\n```\nRATE_LIMITER_ENABLED=\"true\"\n\nRATE_LIMITER_POINTS=\"10\"\nRATE_LIMITER_DURATION=\"5\"\n\nRATE_LIMITER_STORE=\"redis\"\n\nRATE_LIMITER_REDIS=\"redis://@127.0.0.1\"\n```\n\n## Cache\n\nDirectus has a built-in data-caching option. Enabling this will cache the output of requests (based on the current user\nand exact query parameters used) into configured cache storage location. This drastically improves API performance, as\nsubsequent requests are served straight from this cache. Enabling cache will also make Directus return accurate\ncache-control headers. Depending on your setup, this will further improve performance by caching the request in\nmiddleman servers (like CDNs) and even the browser.\n\n::: tip Assets Cache\n\nThe cache-control header for the `/assets` endpoint is separate from the regular data-cache. This is useful as it's\noften possible to cache assets for far longer than you would cache database content. [Learn More](#assets)\n\n:::\n\n| Variable                          | Description                                                                              | Default Value    |\n| --------------------------------- | ---------------------------------------------------------------------------------------- | ---------------- |\n| `CACHE_ENABLED`                   | Whether or not caching is enabled.                                                       | `false`          |\n| `CACHE_TTL`<sup>[1]</sup>         | How long the cache is persisted.                                                         | `30m`            |\n| `CACHE_CONTROL_S_MAXAGE`          | Whether to not to add the `s-maxage` expiration flag. Set to a number for a custom value | `0`              |\n| `CACHE_AUTO_PURGE`<sup>[2]</sup>  | Automatically purge the cache on `create`, `update`, and `delete` actions.               | `false`          |\n| `CACHE_SCHEMA`<sup>[3]</sup>      | Whether or not the database schema is cached. One of `false`, `true`                     | `true`           |\n| `CACHE_PERMISSIONS`<sup>[3]</sup> | Whether or not the user permissions are cached. One of `false`, `true`                   | `true`           |\n| `CACHE_NAMESPACE`                 | How to scope the cache data.                                                             | `directus-cache` |\n| `CACHE_STORE`<sup>[4]</sup>       | Where to store the cache data. Either `memory`, `redis`, or `memcache`.                  | `memory`         |\n\n<sup>[1]</sup> `CACHE_TTL` Based on your project's needs, you might be able to aggressively cache your data, only\nrequiring new data to be fetched every hour or so. This allows you to squeeze the most performance out of your Directus\ninstance. This can be incredibly useful for applications where you have a lot of (public) read-access and where updates\naren't real-time (for example a website). `CACHE_TTL` uses [`ms`](https://www.npmjs.com/package/ms) to parse the value,\nso you configure it using human readable values (like `2 days`, `7 hrs`, `5m`).\n\n<sup>[2]</sup> `CACHE_AUTO_PURGE` allows you to keep the Directus API real-time, while still getting the performance\nbenefits on quick subsequent reads.\n\n<sup>[3]</sup> Not affected by the `CACHE_ENABLED` value.\n\n<sup>[4]</sup> `CACHE_STORE` For larger projects, you most likely don't want to rely on local memory for caching.\nInstead, you can use the above `CACHE_STORE` environment variable to use either `memcache` or `redis` as the cache\nstore. Based on the chosen `CACHE_STORE`, you must also provide the following configurations:\n\n### Memory\n\nNo additional configuration required.\n\n### Redis\n\n| Variable      | Description                                                           | Default Value |\n| ------------- | --------------------------------------------------------------------- | ------------- |\n| `CACHE_REDIS` | Redis connection string, eg: `redis://:authpassword@127.0.0.1:6380/4` | ---           |\n\nAlternatively, you can provide the individual connection parameters:\n\n| Variable               | Description                      | Default Value |\n| ---------------------- | -------------------------------- | ------------- |\n| `CACHE_REDIS_HOST`     | Hostname of the Redis instance   | --            |\n| `CACHE_REDIS_PORT`     | Port of the Redis instance       | --            |\n| `CACHE_REDIS_PASSWORD` | Password for your Redis instance | --            |\n\n### Memcache\n\n| Variable         | Description                                                                                                                                                           | Default Value |\n| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `CACHE_MEMCACHE` | Location of your memcache instance. You can use [`array:` syntax](#environment-syntax-prefix), eg: `array:<instance-1>,<instance-2>` for multiple memcache instances. | ---           |\n\n## File Storage\n\nBy default, Directus stores all uploaded files locally on disk. However, you can also configure Directus to use S3,\nGoogle Cloud Storage, or Azure. You can also configure _multiple_ storage adapters at the same time. This allows you to\nchoose where files are being uploaded on a file-by-file basis. In the Admin App, files will automatically be uploaded to\nthe first configured storage location (in this case `local`). The used storage location is saved under `storage` in\n`directus_files`.\n\n::: tip File Storage Default\n\nIf you don't provide any configuration for storage adapters, this default will be used:\n\n```\nSTORAGE_LOCATIONS=\"local\"\nSTORAGE_LOCAL_ROOT=\"./uploads\"\n```\n\n:::\n\n::: warning Case sensitivity\n\nThe location value(s) you specify should be capitalized when specifying the additional configuration values. For\nexample, this will not work:\n\n```\nSTORAGE_LOCATIONS=\"s3\"\nSTORAGE_s3_DRIVER=\"s3\" # Will not work, lowercase \"s3\" \u274c\n```\n\nbut this will work:\n\n```\nSTORAGE_LOCATIONS=\"s3\"\nSTORAGE_S3_DRIVER=\"s3\" # Will work, \"s3\" is uppercased \u2705\n```\n\n:::\n\n| Variable            | Description                                                                                                           | Default Value |\n| ------------------- | --------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `STORAGE_LOCATIONS` | A CSV of storage locations (eg: `local,digitalocean,amazon`) to use. You can use any names you'd like for these keys. | `local`       |\n\nFor each of the storage locations listed, you must provide the following configuration:\n\n| Variable                    | Description                                               | Default Value |\n| --------------------------- | --------------------------------------------------------- | ------------- |\n| `STORAGE_<LOCATION>_DRIVER` | Which driver to use, either `local`, `s3`, `gcs`, `azure` |               |\n| `STORAGE_<LOCATION>_ROOT`   | Where to store the files on disk                          | `''`          |\n\nBased on your configured driver, you must also provide the following configurations:\n\n### Local (`local`)\n\n| Variable                  | Description                      | Default Value |\n| ------------------------- | -------------------------------- | ------------- |\n| `STORAGE_<LOCATION>_ROOT` | Where to store the files on disk | --            |\n\n### S3 (`s3`)\n\n| Variable                      | Description | Default Value      |\n| ----------------------------- | ----------- | ------------------ |\n| `STORAGE_<LOCATION>_KEY`      | User key    | --                 |\n| `STORAGE_<LOCATION>_SECRET`   | User secret | --                 |\n| `STORAGE_<LOCATION>_BUCKET`   | S3 Bucket   | --                 |\n| `STORAGE_<LOCATION>_REGION`   | S3 Region   | --                 |\n| `STORAGE_<LOCATION>_ENDPOINT` | S3 Endpoint | `s3.amazonaws.com` |\n| `STORAGE_<LOCATION>_ACL`      | S3 ACL      | --                 |\n\n### Azure (`azure`)\n\n| Variable                            | Description                | Default Value                                 |\n| ----------------------------------- | -------------------------- | --------------------------------------------- |\n| `STORAGE_<LOCATION>_CONTAINER_NAME` | Azure Storage container    | --                                            |\n| `STORAGE_<LOCATION>_ACCOUNT_NAME`   | Azure Storage account name | --                                            |\n| `STORAGE_<LOCATION>_ACCOUNT_KEY`    | Azure Storage key          | --                                            |\n| `STORAGE_<LOCATION>_ENDPOINT`       | Azure URL                  | `https://{ACCOUNT_KEY}.blob.core.windows.net` |\n\n### Google Cloud Storage (`gcs`)\n\n| Variable                          | Description                 | Default Value |\n| --------------------------------- | --------------------------- | ------------- |\n| `STORAGE_<LOCATION>_KEY_FILENAME` | Path to key file on disk    | --            |\n| `STORAGE_<LOCATION>_BUCKET`       | Google Cloud Storage bucket | --            |\n\n### Example: Multiple Storage Adapters\n\nBelow showcases a CSV of storage location names, with a config block for each:\n\n```\nSTORAGE_LOCATIONS=\"local,aws\"\n\nSTORAGE_LOCAL_DRIVER=\"local\"\nSTORAGE_LOCAL_ROOT=\"local\"\n\nSTORAGE_AWS_KEY=\"tp15c...510vk\"\nSTORAGE_AWS_SECRET=\"yk29b...b932n\"\nSTORAGE_AWS_REGION=\"us-east-2\"\nSTORAGE_AWS_BUCKET=\"my-files\"\n```\n\n## Assets\n\n| Variable                               | Description                                                                                                                             | Default Value |\n| -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `ASSETS_CACHE_TTL`                     | How long assets will be cached for in the browser. Sets the `max-age` value of the `Cache-Control` header.                              | `30m`         |\n| `ASSETS_TRANSFORM_MAX_CONCURRENT`      | How many file transformations can be done simultaneously                                                                                | `4`           |\n| `ASSETS_TRANSFORM_IMAGE_MAX_DIMENSION` | The max pixel dimensions size (width/height) that is allowed to be transformed                                                          | `6000`        |\n| `ASSETS_TRANSFORM_MAX_OPERATIONS`      | The max number of transform operations that is allowed to be processed (excludes saved presets)                                         | `5`           |\n| `ASSETS_CONTENT_SECURITY_POLICY`       | Custom overrides for the Content-Security-Policy header. See [helmet's documentation](https://helmetjs.github.io) for more information. | --            |\n\nImage transformations can be fairly heavy on memory usage. If you're using a system with 1GB or less available memory,\nwe recommend lowering the allowed concurrent transformations to prevent you from overflowing your server.\n\n## Authentication\n\n| Variable               | Description                            | Default Value |\n| ---------------------- | -------------------------------------- | ------------- |\n| `AUTH_PROVIDERS`       | CSV of auth providers you want to use. | --            |\n| `AUTH_DISABLE_DEFAULT` | Disable the default auth provider      | `false`       |\n\nFor each of the auth providers you list, you must provide the following configuration:\n\n| Variable                 | Description                                                     | Default Value |\n| ------------------------ | --------------------------------------------------------------- | ------------- |\n| `AUTH_<PROVIDER>_DRIVER` | Which driver to use, either `local`, `oauth2`, `openid`, `ldap` | --            |\n\nYou must also provide a number of extra variables. These differ per auth driver service. The following is a list of\ncommon required configuration options:\n\n### Local (`local`)\n\nNo additional configuration required.\n\n### SSO (`oauth2` and `openid`)\n\nDirectus' SSO integrations provide powerful alternative ways to authenticate into your project. Directus will ask you to\nlogin on the external service, and return authenticated with a Directus account linked to that service.\n\nFor example, you can login to Directus using a github account by creating an\n[OAuth 2.0 app in GitHub](https://github.com/settings/developers) and adding the following configuration to Directus:\n\n```\nAUTH_PROVIDERS=\"github\"\n\nAUTH_GITHUB_DRIVER=\"oauth2\"\nAUTH_GITHUB_CLIENT_ID=\"99d3...c3c4\"\nAUTH_GITHUB_CLIENT_SECRET=\"34ae...f963\"\nAUTH_GITHUB_AUTHORIZE_URL=\"https://github.com/login/oauth/authorize\"\nAUTH_GITHUB_ACCESS_URL=\"https://github.com/login/oauth/access_token\"\nAUTH_GITHUB_PROFILE_URL=\"https://api.github.com/user\"\n```\n\n::: warning PUBLIC_URL\n\nThese flows rely on the `PUBLIC_URL` variable for redirecting. Make sure that variable is configured correctly.\n\n:::\n\n#### OAuth 2.0\n\n| Variable                                    | Description                                                                                                                        | Default Value    |\n| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ---------------- |\n| `AUTH_<PROVIDER>_CLIENT_ID`                 | OAuth identifier for the external service.                                                                                         | --               |\n| `AUTH_<PROVIDER>_CLIENT_SECRET`             | OAuth secret for the external service.                                                                                             | --               |\n| `AUTH_<PROVIDER>_SCOPE`                     | A white-space separated list of privileges Directus will request.                                                                  | `email`          |\n| `AUTH_<PROVIDER>_AUTHORIZE_URL`             | The authorize page URL of the external service.                                                                                    | --               |\n| `AUTH_<PROVIDER>_ACCESS_URL`                | The token access URL of the external service.                                                                                      | --               |\n| `AUTH_<PROVIDER>_PROFILE_URL`               | The user profile information URL of the external service.                                                                          | --               |\n| `AUTH_<PROVIDER>_EMAIL_KEY`                 | OAuth profile email key used to find the email address.                                                                            | `email`          |\n| `AUTH_<PROVIDER>_IDENTIFIER_KEY`            | OAuth profile identifier key used to verify the user. Will default to `EMAIL_KEY`.                                                 | --               |\n| `AUTH_<PROVIDER>_ALLOW_PUBLIC_REGISTRATION` | Automatically create accounts for authenticating users.                                                                            | `false`          |\n| `AUTH_<PROVIDER>_DEFAULT_ROLE_ID`           | The Directus role ID assigned to created users.                                                                                    | --               |\n| `AUTH_<PROVIDER>_ICON`                      | SVG icon to display with the login link. You can choose from [Social icon or Material icon set](/getting-started/glossary/#icons). | `account_circle` |\n| `AUTH_<PROVIDER>_PARAMS`                    | Custom parameters to send to the auth provider                                                                                     | --               |\n\n#### OpenID\n\nOpenID is an authentication protocol built on OAuth 2.0, and should be preferred over standard OAuth 2.0 where possible.\nOpenID offers better user verification and consistent profile information, allowing for more complete user\nregistrations.\n\n| Variable                                    | Description                                                                                                                        | Default Value          |\n| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |\n| `AUTH_<PROVIDER>_CLIENT_ID`                 | OpenID identifier for the external service.                                                                                        | --                     |\n| `AUTH_<PROVIDER>_CLIENT_SECRET`             | OpenID secret for the external service.                                                                                            | --                     |\n| `AUTH_<PROVIDER>_SCOPE`                     | A white-space separated list of privileges Directus will request.                                                                  | `openid profile email` |\n| `AUTH_<PROVIDER>_ISSUER_URL`                | The OpenID `.well-known` Discovery Document URL.                                                                                   | --                     |\n| `AUTH_<PROVIDER>_IDENTIFIER_KEY`            | OpenID profile identifier key used to verify the user.                                                                             | `sub`                  |\n| `AUTH_<PROVIDER>_ALLOW_PUBLIC_REGISTRATION` | Automatically create accounts for authenticating users.                                                                            | `false`                |\n| `AUTH_<PROVIDER>_REQUIRE_VERIFIED_EMAIL`    | Require users to have a verified email address.                                                                                    | `false`                |\n| `AUTH_<PROVIDER>_DEFAULT_ROLE_ID`           | The Directus role ID assigned to created users.                                                                                    | --                     |\n| `AUTH_<PROVIDER>_ICON`                      | SVG icon to display with the login link. You can choose from [Social icon or Material icon set](/getting-started/glossary/#icons). | `account_circle`       |\n| `AUTH_<PROVIDER>_PARAMS`                    | Custom parameters to send to the auth provider                                                                                     | --                     |\n\n### LDAP (`ldap`)\n\nLDAP allows Active Directory users to authenticate and use Directus without having to be manually configured. User\ninformation and roles will be assigned from Active Directory.\n\n| Variable                          | Description                                                            | Default Value |\n| --------------------------------- | ---------------------------------------------------------------------- | ------------- |\n| `AUTH_<PROVIDER>_CLIENT_URL`      | LDAP connection URL.                                                   | --            |\n| `AUTH_<PROVIDER>_BIND_DN`         | Bind user <sup>[1]</sup> distinguished name.                           | --            |\n| `AUTH_<PROVIDER>_BIND_PASSWORD`   | Bind user password.                                                    | --            |\n| `AUTH_<PROVIDER>_USER_DN`         | Directory path containing users.                                       | --            |\n| `AUTH_<PROVIDER>_USER_ATTRIBUTE`  | Attribute to identify users by.                                        | `cn`          |\n| `AUTH_<PROVIDER>_USER_SCOPE`      | Scope of the user search, either `base`, `one`, `sub` <sup>[2]</sup>.  | `one`         |\n| `AUTH_<PROVIDER>_GROUP_DN`        | Directory path containing groups.                                      | --            |\n| `AUTH_<PROVIDER>_GROUP_ATTRIBUTE` | Attribute to identify user as a member of a group.                     | `member`      |\n| `AUTH_<PROVIDER>_GROUP_SCOPE`     | Scope of the group search, either `base`, `one`, `sub` <sup>[2]</sup>. | `one`         |\n| `AUTH_<PROVIDER>_MAIL_ATTRIBUTE`  | Attribute containing the email of the user.                            | `mail`        |\n\n<sup>[1]</sup> The bind user must have permission to query users and groups to perform authentication. To bind\nanonymously use `AUTH_LDAP_BIND_DN=\"\"` and `AUTH_LDAP_BIND_PASSWORD=\"\"`\n\n<sup>[2]</sup> The scope defines the following behaviors:\n\n- `base`: Limits the scope to a single object defined by the associated DN.\n- `one`: Searches all objects within the associated DN.\n- `sub`: Searches all objects and sub-objects within the associated DN.\n\n### Example: LDAP\n\n```\nAUTH_PROVIDERS=\"ldap\"\n\nAUTH_LDAP_DRIVER=\"ldap\"\nAUTH_LDAP_CLIENT_URL=\"ldap://ldap.directus.io\"\nAUTH_LDAP_BIND_DN=\"CN=Bind User,OU=Users,DC=ldap,DC=directus,DC=io\"\nAUTH_LDAP_BIND_PASSWORD=\"p455w0rd\"\nAUTH_LDAP_USER_DN=\"OU=Users,DC=ldap,DC=directus,DC=io\"\nAUTH_LDAP_GROUP_DN=\"OU=Groups,DC=ldap,DC=directus,DC=io\"\n```\n\n### Example: Multiple Auth Providers\n\nYou can configure multiple providers for handling authentication in Directus. This allows for different options when\nlogging in. To do this, you can provide a CSV of provider names, and provide a config block for each of them:\n\n```\nAUTH_PROVIDERS=\"google,adobe\"\n\nAUTH_GOOGLE_DRIVER=\"openid\"\nAUTH_GOOGLE_CLIENT_ID=\"<google_application_id>\"\nAUTH_GOOGLE_CLIENT_SECRET= \"<google_application_secret_key>\"\nAUTH_GOOGLE_ISSUER_URL=\"https://accounts.google.com\"\nAUTH_GOOGLE_IDENTIFIER_KEY=\"email\"\nAUTH_GOOGLE_ICON=\"google\"\n\nAUTH_ADOBE_DRIVER=\"oauth2\"\nAUTH_ADOBE_CLIENT_ID=\"<adobe_application_id>\"\nAUTH_ADOBE_CLIENT_SECRET=\"<adobe_application_secret_key>\"\nAUTH_ADOBE_AUTHORIZE_URL=\"https://ims-na1.adobelogin.com/ims/authorize/v2\"\nAUTH_ADOBE_ACCESS_URL=\"https://ims-na1.adobelogin.com/ims/token/v3\"\nAUTH_ADOBE_PROFILE_URL=\"https://ims-na1.adobelogin.com/ims/userinfo/v2\"\nAUTH_ADOBE_ICON=\"adobe\"\n```\n\n## Extensions\n\n| Variable                 | Description                                             | Default Value  |\n| ------------------------ | ------------------------------------------------------- | -------------- |\n| `EXTENSIONS_PATH`        | Path to your local extensions folder.                   | `./extensions` |\n| `EXTENSIONS_AUTO_RELOAD` | Automatically reload extensions when they have changed. | `false`        |\n\n## Email\n\n| Variable          | Description                                                              | Default Value          |\n| ----------------- | ------------------------------------------------------------------------ | ---------------------- |\n| `EMAIL_FROM`      | Email address from which emails are sent.                                | `no-reply@directus.io` |\n| `EMAIL_TRANSPORT` | What to use to send emails. One of `sendmail`, `smtp`, `mailgun`, `ses`. | `sendmail`             |\n\nBased on the `EMAIL_TRANSPORT` used, you must also provide the following configurations:\n\n### Sendmail (`sendmail`)\n\n| Variable                  | Description                             | Default Value        |\n| ------------------------- | --------------------------------------- | -------------------- |\n| `EMAIL_SENDMAIL_NEW_LINE` | What new line style to use in sendmail. | `unix`               |\n| `EMAIL_SENDMAIL_PATH`     | Path to your sendmail executable.       | `/usr/sbin/sendmail` |\n\n### SMTP (`smtp`)\n\n| Variable                | Description      | Default Value |\n| ----------------------- | ---------------- | ------------- |\n| `EMAIL_SMTP_HOST`       | SMTP Host        | --            |\n| `EMAIL_SMTP_PORT`       | SMTP Port        | --            |\n| `EMAIL_SMTP_USER`       | SMTP User        | --            |\n| `EMAIL_SMTP_PASSWORD`   | SMTP Password    | --            |\n| `EMAIL_SMTP_POOL`       | Use SMTP pooling | --            |\n| `EMAIL_SMTP_SECURE`     | Enable TLS       | --            |\n| `EMAIL_SMTP_IGNORE_TLS` | Ignore TLS       | --            |\n\n### Mailgun (`mailgun`)\n\n| Variable                | Description                                                                       | Default Value     |\n| ----------------------- | --------------------------------------------------------------------------------- | ----------------- |\n| `EMAIL_MAILGUN_API_KEY` | Your Mailgun API key.                                                             | --                |\n| `EMAIL_MAILGUN_DOMAIN`  | A domain from [your Mailgun account](https://app.mailgun.com/app/sending/domains) | --                |\n| `EMAIL_MAILGUN_HOST`    | Allows you to specify a custom host.                                              | `api.mailgun.net` |\n\n### AWS SES (`ses`)\n\n| Variable                                   | Description                  | Default Value |\n| ------------------------------------------ | ---------------------------- | ------------- |\n| `EMAIL_SES_CREDENTIALS__ACCESS_KEY_ID`     | Your AWS SES access key. ID. | --            |\n| `EMAIL_SES_CREDENTIALS__SECRET_ACCESS_KEY` | Your AWS SES secret key.     | --            |\n| `EMAIL_SES_REGION`                         | Your AWS SES region.         | --            |\n\n## Admin Account\n\nIf you're relying on Docker and/or the `directus bootstrap` CLI command, you can pass the following two environment\nvariables to automatically configure the first user:\n\n| Variable         | Description                                                                                       | Default Value |\n| ---------------- | ------------------------------------------------------------------------------------------------- | ------------- |\n| `ADMIN_EMAIL`    | The email address of the first user that's automatically created when using `directus bootstrap`. | --            |\n| `ADMIN_PASSWORD` | The password of the first user that's automatically created when using `directus bootstrap`.      | --            |\n\n## Telemetry\n\nTo more accurately gauge the frequency of installation, version fragmentation, and general size of the userbase,\nDirectus collects little and anonymized data about your environment. You can easily opt-out with the following\nenvironment variable:\n\n| Variable    | Description                                                       | Default Value |\n| ----------- | ----------------------------------------------------------------- | ------------- |\n| `TELEMETRY` | Allow Directus to collect anonymized data about your environment. | `true`        |\n\n## Limits & Optimizations\n\nAllows you to configure hard technical limits, to prevent abuse and optimize for your particular server environment.\n\n| Variable                | Description                                                                               | Default Value |\n| ----------------------- | ----------------------------------------------------------------------------------------- | ------------- |\n| `RELATIONAL_BATCH_SIZE` | How many rows are read into memory at a time when constructing nested relational datasets | 25000         |\n"], "fixing_code": ["/**\n * @NOTE\n * See example.env for all possible keys\n */\n\nimport dotenv from 'dotenv';\nimport fs from 'fs';\nimport { clone, toNumber, toString } from 'lodash';\nimport path from 'path';\nimport { requireYAML } from './utils/require-yaml';\nimport { toArray } from '@directus/shared/utils';\n\nconst acceptedEnvTypes = ['string', 'number', 'regex', 'array'];\n\nconst defaults: Record<string, any> = {\n\tCONFIG_PATH: path.resolve(process.cwd(), '.env'),\n\n\tHOST: '0.0.0.0',\n\tPORT: 8055,\n\tPUBLIC_URL: '/',\n\tMAX_PAYLOAD_SIZE: '100kb',\n\n\tDB_EXCLUDE_TABLES: 'spatial_ref_sys,sysdiagrams',\n\n\tSTORAGE_LOCATIONS: 'local',\n\tSTORAGE_LOCAL_DRIVER: 'local',\n\tSTORAGE_LOCAL_ROOT: './uploads',\n\n\tRATE_LIMITER_ENABLED: false,\n\tRATE_LIMITER_POINTS: 25,\n\tRATE_LIMITER_DURATION: 1,\n\tRATE_LIMITER_STORE: 'memory',\n\n\tACCESS_TOKEN_TTL: '15m',\n\tREFRESH_TOKEN_TTL: '7d',\n\tREFRESH_TOKEN_COOKIE_SECURE: false,\n\tREFRESH_TOKEN_COOKIE_SAME_SITE: 'lax',\n\tREFRESH_TOKEN_COOKIE_NAME: 'directus_refresh_token',\n\n\tROOT_REDIRECT: './admin',\n\n\tCORS_ENABLED: false,\n\tCORS_ORIGIN: false,\n\tCORS_METHODS: 'GET,POST,PATCH,DELETE',\n\tCORS_ALLOWED_HEADERS: 'Content-Type,Authorization',\n\tCORS_EXPOSED_HEADERS: 'Content-Range',\n\tCORS_CREDENTIALS: true,\n\tCORS_MAX_AGE: 18000,\n\n\tCACHE_ENABLED: false,\n\tCACHE_STORE: 'memory',\n\tCACHE_TTL: '5m',\n\tCACHE_NAMESPACE: 'system-cache',\n\tCACHE_AUTO_PURGE: false,\n\tCACHE_CONTROL_S_MAXAGE: '0',\n\tCACHE_SCHEMA: true,\n\tCACHE_PERMISSIONS: true,\n\n\tAUTH_PROVIDERS: '',\n\tAUTH_DISABLE_DEFAULT: false,\n\n\tEXTENSIONS_PATH: './extensions',\n\tEXTENSIONS_AUTO_RELOAD: false,\n\n\tEMAIL_FROM: 'no-reply@directus.io',\n\tEMAIL_TRANSPORT: 'sendmail',\n\tEMAIL_SENDMAIL_NEW_LINE: 'unix',\n\tEMAIL_SENDMAIL_PATH: '/usr/sbin/sendmail',\n\n\tTELEMETRY: true,\n\n\tASSETS_CACHE_TTL: '30d',\n\tASSETS_TRANSFORM_MAX_CONCURRENT: 1,\n\tASSETS_TRANSFORM_IMAGE_MAX_DIMENSION: 6000,\n\tASSETS_TRANSFORM_MAX_OPERATIONS: 5,\n\n\tIP_TRUST_PROXY: true,\n\tIP_CUSTOM_HEADER: false,\n\n\tIMPORT_IP_DENY_LIST: '0.0.0.0',\n\n\tSERVE_APP: true,\n\n\tRELATIONAL_BATCH_SIZE: 25000,\n};\n\n// Allows us to force certain environment variable into a type, instead of relying\n// on the auto-parsed type in processValues. ref #3705\nconst typeMap: Record<string, string> = {\n\tHOST: 'string',\n\tPORT: 'string',\n\n\tDB_NAME: 'string',\n\tDB_USER: 'string',\n\tDB_PASSWORD: 'string',\n\tDB_DATABASE: 'string',\n\tDB_PORT: 'number',\n\n\tDB_EXCLUDE_TABLES: 'array',\n\tIMPORT_IP_DENY_LIST: 'array',\n};\n\nlet env: Record<string, any> = {\n\t...defaults,\n\t...getEnv(),\n\t...process.env,\n};\n\nprocess.env = env;\n\nenv = processValues(env);\n\nexport default env;\n\n/**\n * When changes have been made during runtime, like in the CLI, we can refresh the env object with\n * the newly created variables\n */\nexport function refreshEnv(): void {\n\tenv = {\n\t\t...defaults,\n\t\t...getEnv(),\n\t\t...process.env,\n\t};\n\n\tprocess.env = env;\n\n\tenv = processValues(env);\n}\n\nfunction getEnv() {\n\tconst configPath = path.resolve(process.env.CONFIG_PATH || defaults.CONFIG_PATH);\n\n\tif (fs.existsSync(configPath) === false) return {};\n\n\tconst fileExt = path.extname(configPath).toLowerCase();\n\n\tif (fileExt === '.js') {\n\t\tconst module = require(configPath);\n\t\tconst exported = module.default || module;\n\n\t\tif (typeof exported === 'function') {\n\t\t\treturn exported(process.env);\n\t\t} else if (typeof exported === 'object') {\n\t\t\treturn exported;\n\t\t}\n\n\t\tthrow new Error(\n\t\t\t`Invalid JS configuration file export type. Requires one of \"function\", \"object\", received: \"${typeof exported}\"`\n\t\t);\n\t}\n\n\tif (fileExt === '.json') {\n\t\treturn require(configPath);\n\t}\n\n\tif (fileExt === '.yaml' || fileExt === '.yml') {\n\t\tconst data = requireYAML(configPath);\n\n\t\tif (typeof data === 'object') {\n\t\t\treturn data as Record<string, string>;\n\t\t}\n\n\t\tthrow new Error('Invalid YAML configuration. Root has to be an object.');\n\t}\n\n\t// Default to env vars plain text files\n\treturn dotenv.parse(fs.readFileSync(configPath, { encoding: 'utf8' }));\n}\n\nfunction getVariableType(variable: string) {\n\treturn variable.split(':').slice(0, -1)[0];\n}\n\nfunction getEnvVariableValue(variableValue: string, variableType: string) {\n\treturn variableValue.split(`${variableType}:`)[1];\n}\n\nfunction getEnvironmentValueWithPrefix(envArray: Array<string>): Array<string | number | RegExp> {\n\treturn envArray.map((item: string) => {\n\t\tif (isEnvSyntaxPrefixPresent(item)) {\n\t\t\treturn getEnvironmentValueByType(item);\n\t\t}\n\t\treturn item;\n\t});\n}\n\nfunction getEnvironmentValueByType(envVariableString: string) {\n\tconst variableType = getVariableType(envVariableString);\n\tconst envVariableValue = getEnvVariableValue(envVariableString, variableType);\n\n\tswitch (variableType) {\n\t\tcase 'number':\n\t\t\treturn toNumber(envVariableValue);\n\t\tcase 'array':\n\t\t\treturn getEnvironmentValueWithPrefix(toArray(envVariableValue));\n\t\tcase 'regex':\n\t\t\treturn new RegExp(envVariableValue);\n\t\tcase 'string':\n\t\t\treturn envVariableValue;\n\t\tcase 'json':\n\t\t\treturn tryJSON(envVariableValue);\n\t}\n}\n\nfunction isEnvSyntaxPrefixPresent(value: string): boolean {\n\treturn acceptedEnvTypes.some((envType) => value.includes(`${envType}:`));\n}\n\nfunction processValues(env: Record<string, any>) {\n\tenv = clone(env);\n\n\tfor (let [key, value] of Object.entries(env)) {\n\t\t// If key ends with '_FILE', try to get the value from the file defined in this variable\n\t\t// and store it in the variable with the same name but without '_FILE' at the end\n\t\tlet newKey;\n\t\tif (key.length > 5 && key.endsWith('_FILE')) {\n\t\t\tnewKey = key.slice(0, -5);\n\t\t\tif (newKey in env) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Duplicate environment variable encountered: you can't use \"${newKey}\" and \"${key}\" simultaneously.`\n\t\t\t\t);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvalue = fs.readFileSync(value, { encoding: 'utf8' });\n\t\t\t\tkey = newKey;\n\t\t\t} catch {\n\t\t\t\tthrow new Error(`Failed to read value from file \"${value}\", defined in environment variable \"${key}\".`);\n\t\t\t}\n\t\t}\n\n\t\t// Convert values with a type prefix\n\t\t// (see https://docs.directus.io/reference/environment-variables/#environment-syntax-prefix)\n\t\tif (typeof value === 'string' && isEnvSyntaxPrefixPresent(value)) {\n\t\t\tenv[key] = getEnvironmentValueByType(value);\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Convert values where the key is defined in typeMap\n\t\tif (typeMap[key]) {\n\t\t\tswitch (typeMap[key]) {\n\t\t\t\tcase 'number':\n\t\t\t\t\tenv[key] = toNumber(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'string':\n\t\t\t\t\tenv[key] = toString(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'array':\n\t\t\t\t\tenv[key] = toArray(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'json':\n\t\t\t\t\tenv[key] = tryJSON(value);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Try to convert remaining values:\n\t\t// - boolean values to boolean\n\t\t// - 'null' to null\n\t\t// - number values (> 0 <= Number.MAX_SAFE_INTEGER) to number\n\t\tif (value === 'true') {\n\t\t\tenv[key] = true;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (value === 'false') {\n\t\t\tenv[key] = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (value === 'null') {\n\t\t\tenv[key] = null;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (\n\t\t\tString(value).startsWith('0') === false &&\n\t\t\tisNaN(value) === false &&\n\t\t\tvalue.length > 0 &&\n\t\t\tvalue <= Number.MAX_SAFE_INTEGER\n\t\t) {\n\t\t\tenv[key] = Number(value);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (String(value).includes(',')) {\n\t\t\tenv[key] = toArray(value);\n\t\t}\n\n\t\t// Try converting the value to a JS object. This allows JSON objects to be passed for nested\n\t\t// config flags, or custom param names (that aren't camelCased)\n\t\tenv[key] = tryJSON(value);\n\n\t\t// If '_FILE' variable hasn't been processed yet, store it as it is (string)\n\t\tif (newKey) {\n\t\t\tenv[key] = value;\n\t\t}\n\t}\n\n\treturn env;\n}\n\nfunction tryJSON(value: any) {\n\ttry {\n\t\treturn JSON.parse(value);\n\t} catch {\n\t\treturn value;\n\t}\n}\n", "import formatTitle from '@directus/format-title';\nimport axios, { AxiosResponse } from 'axios';\nimport exifr from 'exifr';\nimport { clone } from 'lodash';\nimport { extension } from 'mime-types';\nimport path from 'path';\nimport sharp from 'sharp';\nimport url, { URL } from 'url';\nimport { promisify } from 'util';\nimport { lookup } from 'dns';\nimport emitter from '../emitter';\nimport env from '../env';\nimport { ForbiddenException, ServiceUnavailableException } from '../exceptions';\nimport logger from '../logger';\nimport storage from '../storage';\nimport { AbstractServiceOptions, File, PrimaryKey, MutationOptions } from '../types';\nimport { toArray } from '@directus/shared/utils';\nimport { ItemsService } from './items';\nimport net from 'net';\nimport os from 'os';\n\nconst lookupDNS = promisify(lookup);\n\nexport class FilesService extends ItemsService {\n\tconstructor(options: AbstractServiceOptions) {\n\t\tsuper('directus_files', options);\n\t}\n\n\t/**\n\t * Upload a single new file to the configured storage adapter\n\t */\n\tasync uploadOne(\n\t\tstream: NodeJS.ReadableStream,\n\t\tdata: Partial<File> & { filename_download: string; storage: string },\n\t\tprimaryKey?: PrimaryKey,\n\t\topts?: MutationOptions\n\t): Promise<PrimaryKey> {\n\t\tconst payload = clone(data);\n\n\t\tif ('folder' in payload === false) {\n\t\t\tconst settings = await this.knex.select('storage_default_folder').from('directus_settings').first();\n\n\t\t\tif (settings?.storage_default_folder) {\n\t\t\t\tpayload.folder = settings.storage_default_folder;\n\t\t\t}\n\t\t}\n\n\t\tif (primaryKey !== undefined) {\n\t\t\tawait this.updateOne(primaryKey, payload, { emitEvents: false });\n\n\t\t\t// If the file you're uploading already exists, we'll consider this upload a replace. In that case, we'll\n\t\t\t// delete the previously saved file and thumbnails to ensure they're generated fresh\n\t\t\tconst disk = storage.disk(payload.storage);\n\n\t\t\tfor await (const file of disk.flatList(String(primaryKey))) {\n\t\t\t\tawait disk.delete(file.path);\n\t\t\t}\n\t\t} else {\n\t\t\tprimaryKey = await this.createOne(payload, { emitEvents: false });\n\t\t}\n\n\t\tconst fileExtension =\n\t\t\tpath.extname(payload.filename_download) || (payload.type && '.' + extension(payload.type)) || '';\n\n\t\tpayload.filename_disk = primaryKey + (fileExtension || '');\n\n\t\tif (!payload.type) {\n\t\t\tpayload.type = 'application/octet-stream';\n\t\t}\n\n\t\ttry {\n\t\t\tawait storage.disk(data.storage).put(payload.filename_disk, stream, payload.type);\n\t\t} catch (err: any) {\n\t\t\tlogger.warn(`Couldn't save file ${payload.filename_disk}`);\n\t\t\tlogger.warn(err);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't save file ${payload.filename_disk}`, { service: 'files' });\n\t\t}\n\n\t\tconst { size } = await storage.disk(data.storage).getStat(payload.filename_disk);\n\t\tpayload.filesize = size;\n\n\t\tif (['image/jpeg', 'image/png', 'image/webp', 'image/gif', 'image/tiff'].includes(payload.type)) {\n\t\t\tconst buffer = await storage.disk(data.storage).getBuffer(payload.filename_disk);\n\t\t\ttry {\n\t\t\t\tconst meta = await sharp(buffer.content, {}).metadata();\n\n\t\t\t\tif (meta.orientation && meta.orientation >= 5) {\n\t\t\t\t\tpayload.height = meta.width;\n\t\t\t\t\tpayload.width = meta.height;\n\t\t\t\t} else {\n\t\t\t\t\tpayload.width = meta.width;\n\t\t\t\t\tpayload.height = meta.height;\n\t\t\t\t}\n\t\t\t} catch (err: any) {\n\t\t\t\tlogger.warn(`Couldn't extract sharp metadata from file`);\n\t\t\t\tlogger.warn(err);\n\t\t\t}\n\n\t\t\tpayload.metadata = {};\n\n\t\t\ttry {\n\t\t\t\tpayload.metadata = await exifr.parse(buffer.content, {\n\t\t\t\t\ticc: false,\n\t\t\t\t\tiptc: true,\n\t\t\t\t\tifd1: true,\n\t\t\t\t\tinterop: true,\n\t\t\t\t\ttranslateValues: true,\n\t\t\t\t\treviveValues: true,\n\t\t\t\t\tmergeOutput: false,\n\t\t\t\t});\n\t\t\t\tif (payload.metadata?.iptc?.Headline) {\n\t\t\t\t\tpayload.title = payload.metadata.iptc.Headline;\n\t\t\t\t}\n\t\t\t\tif (!payload.description && payload.metadata?.iptc?.Caption) {\n\t\t\t\t\tpayload.description = payload.metadata.iptc.Caption;\n\t\t\t\t}\n\t\t\t\tif (payload.metadata?.iptc?.Keywords) {\n\t\t\t\t\tpayload.tags = payload.metadata.iptc.Keywords;\n\t\t\t\t}\n\t\t\t} catch (err: any) {\n\t\t\t\tlogger.warn(`Couldn't extract EXIF metadata from file`);\n\t\t\t\tlogger.warn(err);\n\t\t\t}\n\t\t}\n\n\t\t// We do this in a service without accountability. Even if you don't have update permissions to the file,\n\t\t// we still want to be able to set the extracted values from the file on create\n\t\tconst sudoService = new ItemsService('directus_files', {\n\t\t\tknex: this.knex,\n\t\t\tschema: this.schema,\n\t\t});\n\n\t\tawait sudoService.updateOne(primaryKey, payload, { emitEvents: false });\n\n\t\tif (this.cache && env.CACHE_AUTO_PURGE) {\n\t\t\tawait this.cache.clear();\n\t\t}\n\n\t\tif (opts?.emitEvents !== false) {\n\t\t\temitter.emitAction(\n\t\t\t\t'files.upload',\n\t\t\t\t{\n\t\t\t\t\tpayload,\n\t\t\t\t\tkey: primaryKey,\n\t\t\t\t\tcollection: this.collection,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdatabase: this.knex,\n\t\t\t\t\tschema: this.schema,\n\t\t\t\t\taccountability: this.accountability,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn primaryKey;\n\t}\n\n\t/**\n\t * Import a single file from an external URL\n\t */\n\tasync importOne(importURL: string, body: Partial<File>): Promise<PrimaryKey> {\n\t\tconst fileCreatePermissions = this.accountability?.permissions?.find(\n\t\t\t(permission) => permission.collection === 'directus_files' && permission.action === 'create'\n\t\t);\n\n\t\tif (this.accountability && this.accountability?.admin !== true && !fileCreatePermissions) {\n\t\t\tthrow new ForbiddenException();\n\t\t}\n\n\t\tlet resolvedUrl;\n\n\t\ttry {\n\t\t\tresolvedUrl = new URL(importURL);\n\t\t} catch (err: any) {\n\t\t\tlogger.warn(err, `Requested URL ${importURL} isn't a valid URL`);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\tservice: 'external-file',\n\t\t\t});\n\t\t}\n\n\t\tlet ip = resolvedUrl.hostname;\n\n\t\tif (net.isIP(ip) === 0) {\n\t\t\ttry {\n\t\t\t\tip = (await lookupDNS(ip)).address;\n\t\t\t} catch (err: any) {\n\t\t\t\tlogger.warn(err, `Couldn't lookup the DNS for url ${importURL}`);\n\t\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\t\tservice: 'external-file',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (env.IMPORT_IP_DENY_LIST.includes('0.0.0.0')) {\n\t\t\tconst networkInterfaces = os.networkInterfaces();\n\n\t\t\tfor (const networkInfo of Object.values(networkInterfaces)) {\n\t\t\t\tif (!networkInfo) continue;\n\n\t\t\t\tfor (const info of networkInfo) {\n\t\t\t\t\tif (info.address === ip) {\n\t\t\t\t\t\tlogger.warn(`Requested URL ${importURL} resolves to localhost.`);\n\t\t\t\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\t\t\t\tservice: 'external-file',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (env.IMPORT_IP_DENY_LIST.includes(ip)) {\n\t\t\tlogger.warn(`Requested URL ${importURL} resolves to a denied IP address.`);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\tservice: 'external-file',\n\t\t\t});\n\t\t}\n\n\t\tlet fileResponse: AxiosResponse<NodeJS.ReadableStream>;\n\n\t\ttry {\n\t\t\tfileResponse = await axios.get<NodeJS.ReadableStream>(importURL, {\n\t\t\t\tresponseType: 'stream',\n\t\t\t});\n\t\t} catch (err: any) {\n\t\t\tlogger.warn(err, `Couldn't fetch file from url \"${importURL}\"`);\n\t\t\tthrow new ServiceUnavailableException(`Couldn't fetch file from url \"${importURL}\"`, {\n\t\t\t\tservice: 'external-file',\n\t\t\t});\n\t\t}\n\n\t\tconst parsedURL = url.parse(fileResponse.request.res.responseUrl);\n\t\tconst filename = path.basename(parsedURL.pathname as string);\n\n\t\tconst payload = {\n\t\t\tfilename_download: filename,\n\t\t\tstorage: toArray(env.STORAGE_LOCATIONS)[0],\n\t\t\ttype: fileResponse.headers['content-type'],\n\t\t\ttitle: formatTitle(filename),\n\t\t\t...(body || {}),\n\t\t};\n\n\t\treturn await this.uploadOne(fileResponse.data, payload);\n\t}\n\n\t/**\n\t * Delete a file\n\t */\n\tasync deleteOne(key: PrimaryKey, opts?: MutationOptions): Promise<PrimaryKey> {\n\t\tawait this.deleteMany([key], opts);\n\t\treturn key;\n\t}\n\n\t/**\n\t * Delete multiple files\n\t */\n\tasync deleteMany(keys: PrimaryKey[], opts?: MutationOptions): Promise<PrimaryKey[]> {\n\t\tconst files = await super.readMany(keys, { fields: ['id', 'storage'], limit: -1 });\n\n\t\tif (!files) {\n\t\t\tthrow new ForbiddenException();\n\t\t}\n\n\t\tawait super.deleteMany(keys);\n\n\t\tfor (const file of files) {\n\t\t\tconst disk = storage.disk(file.storage);\n\n\t\t\t// Delete file + thumbnails\n\t\t\tfor await (const { path } of disk.flatList(file.id)) {\n\t\t\t\tawait disk.delete(path);\n\t\t\t}\n\t\t}\n\n\t\tif (this.cache && env.CACHE_AUTO_PURGE && opts?.autoPurgeCache !== false) {\n\t\t\tawait this.cache.clear();\n\t\t}\n\n\t\treturn keys;\n\t}\n}\n", "# Configuration Options\n\n> Environment variables are used for all configuration within a Directus project. These variables can be defined in a\n> number of ways, which we cover below.\n\n[[toc]]\n\n## Configuration Files\n\nBy default, Directus will read the `.env` file located next to your project's `package.json` (typically in the root\nfolder of your project) for its configuration. You can change this path and filename by setting the `CONFIG_PATH`\nenvironment variable before starting Directus. For example:\n\n```bash\nCONFIG_PATH=\"/path/to/config.js\" npx directus start\n```\n\nIn case you prefer using a configuration file instead of environment variables, you can also use the `CONFIG_PATH`\nenvironment variable to instruct Directus to use a local configuration file instead of environment variables. The config\nfile can be one of the following formats:\n\n- [.env](#env)\n- [config.json](#config-json)\n- [config.yaml](#config-yaml)\n- [config.js](#config-js)\n\n### .env\n\nIf the config path has no file extension, or a file extension that's not one of the other supported formats, Directus\nwill try reading the file config path as environment variables. This has the following structure:\n\n```\nHOST=\"0.0.0.0\"\nPORT=8055\n\nDB_CLIENT=\"pg\"\nDB_HOST=\"localhost\"\nDB_PORT=5432\n\netc\n```\n\n### config.json\n\nIf you prefer a single JSON file for your configuration, create a JSON file with the environment variables as keys, for\nexample:\n\n```\nCONFIG_PATH=\"/path/to/config.json\"\n```\n\n```json\n{\n\t\"HOST\": \"0.0.0.0\",\n\t\"PORT\": 8055,\n\n\t\"DB_CLIENT\": \"pg\",\n\t\"DB_HOST\": \"localhost\",\n\t\"DB_PORT\": 5432\n\n\t// etc\n}\n```\n\n### config.yaml\n\nSimilar to JSON, you can use a `.yaml` (or `.yml`) file for your config:\n\n```\nCONFIG_PATH=\"/path/to/config.yaml\"\n```\n\n```yaml\nHOST: 0.0.0.0\nPORT: 8055\n\nDB_CLIENT: pg\nDB_HOST: localhost\nDB_PORT: 5432\n#\n# etc\n```\n\n### config.js\n\nUsing a JavaScript file for your config allows you to dynamically generate the configuration of the project during\nstartup. The JavaScript configuration supports two different formats, either an **Object Structure** where the key is\nthe environment variable name:\n\n```js\n// Object Sytax\n\nmodule.exports = {\n\tHOST: '0.0.0.0',\n\tPORT: 8055,\n\n\tDB_CLIENT: 'pg',\n\tDB_HOST: 'localhost',\n\tDB_PORT: 5432,\n\n\t// etc\n};\n```\n\nOr a **Function Structure** that _returns_ the same object format as above. The function gets `process.env` as its\nparameter.\n\n```js\n// Function Syntax\n\nmodule.exports = function (env) {\n\treturn {\n\t\tHOST: '0.0.0.0',\n\t\tPORT: 8055,\n\n\t\tDB_CLIENT: 'pg',\n\t\tDB_HOST: 'localhost',\n\t\tDB_PORT: 5432,\n\n\t\t// etc\n\t};\n};\n```\n\n## Environment Variable Files\n\nAny of the environment variable values can be imported from a file, by appending `_FILE` to the environment variable\nname. This is especially useful when used in conjunction with Docker Secrets, so you can keep sensitive data out of your\ncompose files. For example:\n\n```\nDB_PASSWORD_FILE=\"/run/secrets/db_password\"\n```\n\n## Type Casting and Nesting\n\nEnvironment variables are automatically type cast based on the structure of the variable, for example:\n\n```\nPUBLIC_URL=\"https://example.com\"\n// \"https://example.com\"\n\nDB_HOST=\"3306\"\n// 3306\n\nCORS_ENABLED=\"false\"\n// false\n\nSTORAGE_LOCATIONS=\"s3,local,example\"\n// [\"s3\", \"local\", \"example\"]\n```\n\nIn cases where the environment variables are converted to a configuration object for third party library use, like in\n`DB_*` or `RATE_LIMITER_REDIS_*`, the environment variable will be converted to camelCase. You can use a double\nunderscore (`__`) for nested objects:\n\n```\nDB_CLIENT=\"pg\"\nDB_CONNECTION_STRING=\"postgresql://postgres:example@127.0.0.1\"\nDB_SSL__REJECT_UNAUTHORIZED=\"false\"\n\n{\n\tclient: \"pg\",\n\tconnectionString: \"postgresql://postgres:example@127.0.0.1\",\n\tssl: {\n\t\trejectUnauthorized: false\n\t}\n}\n```\n\n## Environment Syntax Prefix\n\nDirectus will attempt to [automatically type cast environment variables](#type-casting-and-nesting) based on context\nclues. If you have a specific need for a given type, you can tell Directus what type to use for the given value by\nprefixing the value with `{type}:`. The following types are available:\n\n| Syntax Prefix | Example                                                                                                         | Output                                                                                                                       |\n| ------------- | --------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |\n| `string`      | `string:value`                                                                                                  | `\"value\"`                                                                                                                    |\n| `number`      | `number:3306`                                                                                                   | `3306`                                                                                                                       |\n| `regex`       | `regex:\\.example\\.com$`                                                                                         | `/\\.example\\.com$/`                                                                                                          |\n| `array`       | `array:https://example.com,https://example2.com` <br> `array:string:https://example.com,regex:\\.example3\\.com$` | `[\"https://example.com\", \"https://example2.com\"]` <br> `[\"https://example.com\", \"https://example2.com\", /\\.example3\\.com$/]` |\n\n---\n\n## General\n\n| Variable                   | Description                                                                                                | Default Value |\n| -------------------------- | ---------------------------------------------------------------------------------------------------------- | ------------- |\n| `CONFIG_PATH`              | Where your config file is located. See [Configuration Files](#configuration-files)                         | `.env`        |\n| `HOST`                     | IP or host the API listens on.                                                                             | `0.0.0.0`     |\n| `PORT`                     | What port to run the API under.                                                                            | `8055`        |\n| `PUBLIC_URL`<sup>[1]</sup> | URL where your API can be reached on the web.                                                              | `/`           |\n| `LOG_LEVEL`                | What level of detail to log. One of `fatal`, `error`, `warn`, `info`, `debug`, `trace` or `silent`.        | `info`        |\n| `LOG_STYLE`                | Render the logs human readable (pretty) or as JSON. One of `pretty`, `raw`.                                | `pretty`      |\n| `MAX_PAYLOAD_SIZE`         | Controls the maximum request body size. Accepts number of bytes, or human readable string.                 | `100kb`       |\n| `ROOT_REDIRECT`            | Where to redirect to when navigating to `/`. Accepts a relative path, absolute URL, or `false` to disable. | `./admin`     |\n| `SERVE_APP`                | Whether or not to serve the Admin App under `/admin`.                                                      | `true`        |\n\n<sup>[1]</sup> The PUBLIC_URL value is used for things like OAuth redirects, forgot-password emails, and logos that\nneeds to be publicly available on the internet.\n\n::: tip Additional Logger Variables\n\nAll `LOGGER_*` environment variables are passed to the `options` configuration of a\n[`Pino` instance](https://github.com/pinojs/pino/blob/master/docs/api.md#options). All `LOGGER_HTTP*` environment\nvariables are passed to the `options` configuration of a\n[`Pino-http` instance](https://github.com/pinojs/pino-http#api). Based on your project's needs, you can extend the\n`LOGGER_*` environment variables with any config you need to pass to the logger instance. If a LOGGER_LEVELS key is\nadded, these values will be passed to the logger formatter, as described\n[here](https://github.com/pinojs/pino/blob/master/docs/help.md#mapping-pino-log-levels-to-google-cloud-logging-stackdriver-serverity-levels)\nfor example. The format for adding LEVELS values is:\n`LOGGER_LEVELS=\"trace:DEBUG,debug:DEBUG,info:INFO,warn:WARNING,error:ERROR,fatal:CRITICAL\"`\n\n:::\n\n## Server\n\n| Variable                    | Description                                        | Default Value                                                                                                |\n| --------------------------- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------ |\n| `SERVER_KEEP_ALIVE_TIMEOUT` | Timeout in milliseconds for socket to be destroyed | [server.keepAliveTimeout](https://github.com/nodejs/node/blob/master/doc/api/http.md#serverkeepalivetimeout) |\n| `SERVER_HEADERS_TIMEOUT`    | Timeout in milliseconds to parse HTTP headers      | [server.headersTimeout](https://github.com/nodejs/node/blob/master/doc/api/http.md#serverheaderstimeout)     |\n\n::: tip Additional Server Variables\n\nAll `SERVER_*` environment variables are merged with `server` instance properties created from\n[http.Server](https://github.com/nodejs/node/blob/master/doc/api/http.md#class-httpserver). This allows to configure\nserver behind a proxy, a load balancer, etc. Be careful to not override methods of this instance otherwise you may incur\ninto unexpected behaviors.\n\n:::\n\n## Database\n\n| Variable               | Description                                                                                                                                        | Default Value                 |\n| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |\n| `DB_CLIENT`            | **Required**. What database client to use. One of `pg` or `postgres`, `mysql`, `oracledb`, `mssql`, `sqlite3`, `cockroachdb`.                      | --                            |\n| `DB_HOST`              | Database host. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_PORT`              | Database port. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_DATABASE`          | Database name. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_USER`              | Database user. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                                      | --                            |\n| `DB_PASSWORD`          | Database user's password. **Required** when using `pg`, `mysql`, `oracledb`, or `mssql`.                                                           | --                            |\n| `DB_FILENAME`          | Where to read/write the SQLite database. **Required** when using `sqlite3`.                                                                        | --                            |\n| `DB_CONNECTION_STRING` | When using `pg`, you can submit a connection string instead of individual properties. Using this will ignore any of the other connection settings. | --                            |\n| `DB_POOL_*`            | Pooling settings. Passed on to [the `tarn.js`](https://github.com/vincit/tarn.js#usage) library.                                                   | --                            |\n| `DB_EXCLUDE_TABLES`    | CSV of tables you want Directus to ignore completely                                                                                               | `spatial_ref_sys,sysdiagrams` |\n| `DB_CHARSET`           | Charset/collation to use in the connection to MySQL/MariaDB                                                                                        | `UTF8_GENERAL_CI`             |\n| `DB_VERSION`           | Database version, in case you use the PostgreSQL adapter to connect a non-standard database. Not normally required.                                | --                            |\n\n::: tip Additional Database Variables\n\nAll `DB_*` environment variables are passed to the `connection` configuration of a [`Knex` instance](http://knexjs.org).\nBased on your project's needs, you can extend the `DB_*` environment variables with any config you need to pass to the\ndatabase instance.\n\n:::\n\n::: tip Pooling\n\nAll the `DB_POOL_` prefixed options are passed to [`tarn.js`](https://github.com/vincit/tarn.js#usage) through\n[Knex](http://knexjs.org/#Installation-pooling)\n\n:::\n\n## Security\n\n| Variable                         | Description                                                                                                                                                      | Default Value            |\n| -------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |\n| `KEY`                            | Unique identifier for the project.                                                                                                                               | --                       |\n| `SECRET`                         | Secret string for the project.                                                                                                                                   | --                       |\n| `ACCESS_TOKEN_TTL`               | The duration that the access token is valid.                                                                                                                     | `15m`                    |\n| `REFRESH_TOKEN_TTL`              | The duration that the refresh token is valid, and also how long users stay logged-in to the App.                                                                 | `7d`                     |\n| `REFRESH_TOKEN_COOKIE_DOMAIN`    | Which domain to use for the refresh cookie. Useful for development mode.                                                                                         | --                       |\n| `REFRESH_TOKEN_COOKIE_SECURE`    | Whether or not to use a secure cookie for the refresh token in cookie mode.                                                                                      | `false`                  |\n| `REFRESH_TOKEN_COOKIE_SAME_SITE` | Value for `sameSite` in the refresh token cookie when in cookie mode.                                                                                            | `lax`                    |\n| `REFRESH_TOKEN_COOKIE_NAME`      | Name of refresh token cookie .                                                                                                                                   | `directus_refresh_token` |\n| `PASSWORD_RESET_URL_ALLOW_LIST`  | List of URLs that can be used [as `reset_url` in /password/request](/reference/authentication/#request-password-reset)                                           | --                       |\n| `USER_INVITE_URL_ALLOW_LIST`     | List of URLs that can be used [as `invite_url` in /users/invite](/reference/system/users/#invite-a-new-user)                                                     | --                       |\n| `IP_TRUST_PROXY`                 | Settings for [express' trust proxy setting](https://expressjs.com/en/guide/behind-proxies.html)                                                                  | true                     |\n| `IP_CUSTOM_HEADER`               | What custom request header to use for the IP address                                                                                                             | false                    |\n| `CONTENT_SECURITY_POLICY`        | Custom overrides for the Content-Security-Policy header. See [helmet's documentation](https://helmetjs.github.io) for more information.                          | --                       |\n| `ASSETS_CONTENT_SECURITY_POLICY` | Custom overrides for the Content-Security-Policy header for the /assets endpoint. See [helmet's documentation](https://helmetjs.github.io) for more information. | --                       |\n| `IMPORT_IP_DENY_LIST`            | Deny importing files from these IP addresses. Use `0.0.0.0` for any local IP address                                                                             | `0.0.0.0`                |\n\n::: tip Cookie Strictness\n\nBrowser are pretty strict when it comes to third-party cookies. If you're running into unexpected problems when running\nyour project and API on different domains, make sure to verify your configuration for `REFRESH_TOKEN_COOKIE_NAME`,\n`REFRESH_TOKEN_COOKIE_SECURE` and `REFRESH_TOKEN_COOKIE_SAME_SITE`.\n\n:::\n\n### Hashing\n\n| Variable               | Description                                                                                                                      | Default Value       |\n| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------- |\n| `HASH_MEMORY_COST`     | How much memory to use when generating hashes, in KiB.                                                                           | `4096` (4 MiB)      |\n| `HASH_LENGTH`          | The length of the hash function output in bytes.                                                                                 | `32`                |\n| `HASH_TIME_COST`       | The amount of passes (iterations) used by the hash function. It increases hash strength at the cost of time required to compute. | `3`                 |\n| `HASH_PARALLELISM`     | The amount of threads to compute the hash on. Each thread has a memory pool with `HASH_MEMORY_COST` size.                        | `1` (single thread) |\n| `HASH_TYPE`            | The variant of the hash function (`0`: argon2d, `1`: argon2i, or `2`: argon2id).                                                 | `1` (argon2i)       |\n| `HASH_ASSOCIATED_DATA` | An extra and optional non-secret value. The value will be included B64 encoded in the parameters portion of the digest.          | --                  |\n\nArgon2's hashing function is used by Directus for three purposes: 1) hashing user passwords, 2) generating hashes for\nthe `Hash` field type in collections, and 3) the\n[generate a hash API endpoint](/reference/system/utilities/#generate-a-hash).\n\nAll `HASH_*` environment variable parameters are passed to the `argon2.hash` function. See the\n[node-argon2 library options page](https://github.com/ranisalt/node-argon2/wiki/Options) for reference.\n\n::: tip Memory Usage\n\nModifying `HASH_MEMORY_COST` and/or `HASH_PARALLELISM` will affect the amount of memory directus uses when computing\nhashes; each thread gets `HASH_MEMORY_COST` amount of memory, so the total additional memory will be these two values\nmultiplied. This may cause out of memory errors, especially when running in containerized environments.\n\n:::\n\n## CORS\n\n| Variable               | Description                                                                                                                                            | Default Value                |\n| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------- |\n| `CORS_ENABLED`         | Whether or not to enable the CORS headers.                                                                                                             | `false`                      |\n| `CORS_ORIGIN`          | Value for the `Access-Control-Allow-Origin` header. Use `true` to match the Origin header, or provide a domain or a CSV of domains for specific access | `false`                      |\n| `CORS_METHODS`         | Value for the `Access-Control-Allow-Methods` header.                                                                                                   | `GET,POST,PATCH,DELETE`      |\n| `CORS_ALLOWED_HEADERS` | Value for the `Access-Control-Allow-Headers` header.                                                                                                   | `Content-Type,Authorization` |\n| `CORS_EXPOSED_HEADERS` | Value for the `Access-Control-Expose-Headers` header.                                                                                                  | `Content-Range`              |\n| `CORS_CREDENTIALS`     | Whether or not to send the `Access-Control-Allow-Credentials` header.                                                                                  | `true`                       |\n| `CORS_MAX_AGE`         | Value for the `Access-Control-Max-Age` header.                                                                                                         | `18000`                      |\n\n## Rate Limiting\n\nYou can use the built-in rate-limiter to prevent users from hitting the API too much. Simply enabling the rate-limiter\nwill set a default maximum of 50 requests per second, tracked in memory. Once you have multiple copies of Directus\nrunning under a load-balancer, or your user base grows so much that memory is no longer a viable place to store the rate\nlimiter information, you can use an external `memcache` or `redis` instance to store the rate limiter data.\n\n| Variable                | Description                                                                      | Default Value |\n| ----------------------- | -------------------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_ENABLED`  | Whether or not to enable rate limiting on the API.                               | `false`       |\n| `RATE_LIMITER_POINTS`   | The amount of allowed hits per duration.                                         | `50`          |\n| `RATE_LIMITER_DURATION` | The time window in seconds in which the points are counted.                      | `1`           |\n| `RATE_LIMITER_STORE`    | Where to store the rate limiter counts. One of `memory`, `redis`, or `memcache`. | `memory`      |\n\nBased on the `RATE_LIMITER_STORE` used, you must also provide the following configurations:\n\n### Memory\n\nNo additional configuration required.\n\n### Redis\n\n| Variable             | Description                                                           | Default Value |\n| -------------------- | --------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_REDIS` | Redis connection string, eg: `redis://:authpassword@127.0.0.1:6380/4` | ---           |\n\nAlternatively, you can provide the individual connection parameters:\n\n| Variable                      | Description                      | Default Value |\n| ----------------------------- | -------------------------------- | ------------- |\n| `RATE_LIMITER_REDIS_HOST`     | Hostname of the Redis instance   | --            |\n| `RATE_LIMITER_REDIS_PORT`     | Port of the Redis instance       | --            |\n| `RATE_LIMITER_REDIS_PASSWORD` | Password for your Redis instance | --            |\n\n### Memcache\n\n| Variable                | Description                                                                                                                                                           | Default Value |\n| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `RATE_LIMITER_MEMCACHE` | Location of your memcache instance. You can use [`array:` syntax](#environment-syntax-prefix), eg: `array:<instance-1>,<instance-2>` for multiple memcache instances. | ---           |\n\n::: tip Additional Rate Limiter Variables\n\nAll `RATE_LIMITER_*` variables are passed directly to a `rate-limiter-flexible` instance. Depending on your project's\nneeds, you can extend the above environment variables to configure any of\n[the `rate-limiter-flexible` options](https://github.com/animir/node-rate-limiter-flexible/wiki/Options).\n\n:::\n\n### Example: Basic\n\n```\n// 10 requests per 5 seconds\n\nRATE_LIMITER_POINTS=\"10\"\nRATE_LIMITER_DURATION=\"5\"\n```\n\n### Example: Redis\n\n```\nRATE_LIMITER_ENABLED=\"true\"\n\nRATE_LIMITER_POINTS=\"10\"\nRATE_LIMITER_DURATION=\"5\"\n\nRATE_LIMITER_STORE=\"redis\"\n\nRATE_LIMITER_REDIS=\"redis://@127.0.0.1\"\n```\n\n## Cache\n\nDirectus has a built-in data-caching option. Enabling this will cache the output of requests (based on the current user\nand exact query parameters used) into configured cache storage location. This drastically improves API performance, as\nsubsequent requests are served straight from this cache. Enabling cache will also make Directus return accurate\ncache-control headers. Depending on your setup, this will further improve performance by caching the request in\nmiddleman servers (like CDNs) and even the browser.\n\n::: tip Assets Cache\n\nThe cache-control header for the `/assets` endpoint is separate from the regular data-cache. This is useful as it's\noften possible to cache assets for far longer than you would cache database content. [Learn More](#assets)\n\n:::\n\n| Variable                          | Description                                                                              | Default Value    |\n| --------------------------------- | ---------------------------------------------------------------------------------------- | ---------------- |\n| `CACHE_ENABLED`                   | Whether or not caching is enabled.                                                       | `false`          |\n| `CACHE_TTL`<sup>[1]</sup>         | How long the cache is persisted.                                                         | `30m`            |\n| `CACHE_CONTROL_S_MAXAGE`          | Whether to not to add the `s-maxage` expiration flag. Set to a number for a custom value | `0`              |\n| `CACHE_AUTO_PURGE`<sup>[2]</sup>  | Automatically purge the cache on `create`, `update`, and `delete` actions.               | `false`          |\n| `CACHE_SCHEMA`<sup>[3]</sup>      | Whether or not the database schema is cached. One of `false`, `true`                     | `true`           |\n| `CACHE_PERMISSIONS`<sup>[3]</sup> | Whether or not the user permissions are cached. One of `false`, `true`                   | `true`           |\n| `CACHE_NAMESPACE`                 | How to scope the cache data.                                                             | `directus-cache` |\n| `CACHE_STORE`<sup>[4]</sup>       | Where to store the cache data. Either `memory`, `redis`, or `memcache`.                  | `memory`         |\n\n<sup>[1]</sup> `CACHE_TTL` Based on your project's needs, you might be able to aggressively cache your data, only\nrequiring new data to be fetched every hour or so. This allows you to squeeze the most performance out of your Directus\ninstance. This can be incredibly useful for applications where you have a lot of (public) read-access and where updates\naren't real-time (for example a website). `CACHE_TTL` uses [`ms`](https://www.npmjs.com/package/ms) to parse the value,\nso you configure it using human readable values (like `2 days`, `7 hrs`, `5m`).\n\n<sup>[2]</sup> `CACHE_AUTO_PURGE` allows you to keep the Directus API real-time, while still getting the performance\nbenefits on quick subsequent reads.\n\n<sup>[3]</sup> Not affected by the `CACHE_ENABLED` value.\n\n<sup>[4]</sup> `CACHE_STORE` For larger projects, you most likely don't want to rely on local memory for caching.\nInstead, you can use the above `CACHE_STORE` environment variable to use either `memcache` or `redis` as the cache\nstore. Based on the chosen `CACHE_STORE`, you must also provide the following configurations:\n\n### Memory\n\nNo additional configuration required.\n\n### Redis\n\n| Variable      | Description                                                           | Default Value |\n| ------------- | --------------------------------------------------------------------- | ------------- |\n| `CACHE_REDIS` | Redis connection string, eg: `redis://:authpassword@127.0.0.1:6380/4` | ---           |\n\nAlternatively, you can provide the individual connection parameters:\n\n| Variable               | Description                      | Default Value |\n| ---------------------- | -------------------------------- | ------------- |\n| `CACHE_REDIS_HOST`     | Hostname of the Redis instance   | --            |\n| `CACHE_REDIS_PORT`     | Port of the Redis instance       | --            |\n| `CACHE_REDIS_PASSWORD` | Password for your Redis instance | --            |\n\n### Memcache\n\n| Variable         | Description                                                                                                                                                           | Default Value |\n| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `CACHE_MEMCACHE` | Location of your memcache instance. You can use [`array:` syntax](#environment-syntax-prefix), eg: `array:<instance-1>,<instance-2>` for multiple memcache instances. | ---           |\n\n## File Storage\n\nBy default, Directus stores all uploaded files locally on disk. However, you can also configure Directus to use S3,\nGoogle Cloud Storage, or Azure. You can also configure _multiple_ storage adapters at the same time. This allows you to\nchoose where files are being uploaded on a file-by-file basis. In the Admin App, files will automatically be uploaded to\nthe first configured storage location (in this case `local`). The used storage location is saved under `storage` in\n`directus_files`.\n\n::: tip File Storage Default\n\nIf you don't provide any configuration for storage adapters, this default will be used:\n\n```\nSTORAGE_LOCATIONS=\"local\"\nSTORAGE_LOCAL_ROOT=\"./uploads\"\n```\n\n:::\n\n::: warning Case sensitivity\n\nThe location value(s) you specify should be capitalized when specifying the additional configuration values. For\nexample, this will not work:\n\n```\nSTORAGE_LOCATIONS=\"s3\"\nSTORAGE_s3_DRIVER=\"s3\" # Will not work, lowercase \"s3\" \u274c\n```\n\nbut this will work:\n\n```\nSTORAGE_LOCATIONS=\"s3\"\nSTORAGE_S3_DRIVER=\"s3\" # Will work, \"s3\" is uppercased \u2705\n```\n\n:::\n\n| Variable            | Description                                                                                                           | Default Value |\n| ------------------- | --------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `STORAGE_LOCATIONS` | A CSV of storage locations (eg: `local,digitalocean,amazon`) to use. You can use any names you'd like for these keys. | `local`       |\n\nFor each of the storage locations listed, you must provide the following configuration:\n\n| Variable                    | Description                                               | Default Value |\n| --------------------------- | --------------------------------------------------------- | ------------- |\n| `STORAGE_<LOCATION>_DRIVER` | Which driver to use, either `local`, `s3`, `gcs`, `azure` |               |\n| `STORAGE_<LOCATION>_ROOT`   | Where to store the files on disk                          | `''`          |\n\nBased on your configured driver, you must also provide the following configurations:\n\n### Local (`local`)\n\n| Variable                  | Description                      | Default Value |\n| ------------------------- | -------------------------------- | ------------- |\n| `STORAGE_<LOCATION>_ROOT` | Where to store the files on disk | --            |\n\n### S3 (`s3`)\n\n| Variable                      | Description | Default Value      |\n| ----------------------------- | ----------- | ------------------ |\n| `STORAGE_<LOCATION>_KEY`      | User key    | --                 |\n| `STORAGE_<LOCATION>_SECRET`   | User secret | --                 |\n| `STORAGE_<LOCATION>_BUCKET`   | S3 Bucket   | --                 |\n| `STORAGE_<LOCATION>_REGION`   | S3 Region   | --                 |\n| `STORAGE_<LOCATION>_ENDPOINT` | S3 Endpoint | `s3.amazonaws.com` |\n| `STORAGE_<LOCATION>_ACL`      | S3 ACL      | --                 |\n\n### Azure (`azure`)\n\n| Variable                            | Description                | Default Value                                 |\n| ----------------------------------- | -------------------------- | --------------------------------------------- |\n| `STORAGE_<LOCATION>_CONTAINER_NAME` | Azure Storage container    | --                                            |\n| `STORAGE_<LOCATION>_ACCOUNT_NAME`   | Azure Storage account name | --                                            |\n| `STORAGE_<LOCATION>_ACCOUNT_KEY`    | Azure Storage key          | --                                            |\n| `STORAGE_<LOCATION>_ENDPOINT`       | Azure URL                  | `https://{ACCOUNT_KEY}.blob.core.windows.net` |\n\n### Google Cloud Storage (`gcs`)\n\n| Variable                          | Description                 | Default Value |\n| --------------------------------- | --------------------------- | ------------- |\n| `STORAGE_<LOCATION>_KEY_FILENAME` | Path to key file on disk    | --            |\n| `STORAGE_<LOCATION>_BUCKET`       | Google Cloud Storage bucket | --            |\n\n### Example: Multiple Storage Adapters\n\nBelow showcases a CSV of storage location names, with a config block for each:\n\n```\nSTORAGE_LOCATIONS=\"local,aws\"\n\nSTORAGE_LOCAL_DRIVER=\"local\"\nSTORAGE_LOCAL_ROOT=\"local\"\n\nSTORAGE_AWS_KEY=\"tp15c...510vk\"\nSTORAGE_AWS_SECRET=\"yk29b...b932n\"\nSTORAGE_AWS_REGION=\"us-east-2\"\nSTORAGE_AWS_BUCKET=\"my-files\"\n```\n\n## Assets\n\n| Variable                               | Description                                                                                                                             | Default Value |\n| -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ------------- |\n| `ASSETS_CACHE_TTL`                     | How long assets will be cached for in the browser. Sets the `max-age` value of the `Cache-Control` header.                              | `30m`         |\n| `ASSETS_TRANSFORM_MAX_CONCURRENT`      | How many file transformations can be done simultaneously                                                                                | `4`           |\n| `ASSETS_TRANSFORM_IMAGE_MAX_DIMENSION` | The max pixel dimensions size (width/height) that is allowed to be transformed                                                          | `6000`        |\n| `ASSETS_TRANSFORM_MAX_OPERATIONS`      | The max number of transform operations that is allowed to be processed (excludes saved presets)                                         | `5`           |\n| `ASSETS_CONTENT_SECURITY_POLICY`       | Custom overrides for the Content-Security-Policy header. See [helmet's documentation](https://helmetjs.github.io) for more information. | --            |\n\nImage transformations can be fairly heavy on memory usage. If you're using a system with 1GB or less available memory,\nwe recommend lowering the allowed concurrent transformations to prevent you from overflowing your server.\n\n## Authentication\n\n| Variable               | Description                            | Default Value |\n| ---------------------- | -------------------------------------- | ------------- |\n| `AUTH_PROVIDERS`       | CSV of auth providers you want to use. | --            |\n| `AUTH_DISABLE_DEFAULT` | Disable the default auth provider      | `false`       |\n\nFor each of the auth providers you list, you must provide the following configuration:\n\n| Variable                 | Description                                                     | Default Value |\n| ------------------------ | --------------------------------------------------------------- | ------------- |\n| `AUTH_<PROVIDER>_DRIVER` | Which driver to use, either `local`, `oauth2`, `openid`, `ldap` | --            |\n\nYou must also provide a number of extra variables. These differ per auth driver service. The following is a list of\ncommon required configuration options:\n\n### Local (`local`)\n\nNo additional configuration required.\n\n### SSO (`oauth2` and `openid`)\n\nDirectus' SSO integrations provide powerful alternative ways to authenticate into your project. Directus will ask you to\nlogin on the external service, and return authenticated with a Directus account linked to that service.\n\nFor example, you can login to Directus using a github account by creating an\n[OAuth 2.0 app in GitHub](https://github.com/settings/developers) and adding the following configuration to Directus:\n\n```\nAUTH_PROVIDERS=\"github\"\n\nAUTH_GITHUB_DRIVER=\"oauth2\"\nAUTH_GITHUB_CLIENT_ID=\"99d3...c3c4\"\nAUTH_GITHUB_CLIENT_SECRET=\"34ae...f963\"\nAUTH_GITHUB_AUTHORIZE_URL=\"https://github.com/login/oauth/authorize\"\nAUTH_GITHUB_ACCESS_URL=\"https://github.com/login/oauth/access_token\"\nAUTH_GITHUB_PROFILE_URL=\"https://api.github.com/user\"\n```\n\n::: warning PUBLIC_URL\n\nThese flows rely on the `PUBLIC_URL` variable for redirecting. Make sure that variable is configured correctly.\n\n:::\n\n#### OAuth 2.0\n\n| Variable                                    | Description                                                                                                                        | Default Value    |\n| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ---------------- |\n| `AUTH_<PROVIDER>_CLIENT_ID`                 | OAuth identifier for the external service.                                                                                         | --               |\n| `AUTH_<PROVIDER>_CLIENT_SECRET`             | OAuth secret for the external service.                                                                                             | --               |\n| `AUTH_<PROVIDER>_SCOPE`                     | A white-space separated list of privileges Directus will request.                                                                  | `email`          |\n| `AUTH_<PROVIDER>_AUTHORIZE_URL`             | The authorize page URL of the external service.                                                                                    | --               |\n| `AUTH_<PROVIDER>_ACCESS_URL`                | The token access URL of the external service.                                                                                      | --               |\n| `AUTH_<PROVIDER>_PROFILE_URL`               | The user profile information URL of the external service.                                                                          | --               |\n| `AUTH_<PROVIDER>_EMAIL_KEY`                 | OAuth profile email key used to find the email address.                                                                            | `email`          |\n| `AUTH_<PROVIDER>_IDENTIFIER_KEY`            | OAuth profile identifier key used to verify the user. Will default to `EMAIL_KEY`.                                                 | --               |\n| `AUTH_<PROVIDER>_ALLOW_PUBLIC_REGISTRATION` | Automatically create accounts for authenticating users.                                                                            | `false`          |\n| `AUTH_<PROVIDER>_DEFAULT_ROLE_ID`           | The Directus role ID assigned to created users.                                                                                    | --               |\n| `AUTH_<PROVIDER>_ICON`                      | SVG icon to display with the login link. You can choose from [Social icon or Material icon set](/getting-started/glossary/#icons). | `account_circle` |\n| `AUTH_<PROVIDER>_PARAMS`                    | Custom parameters to send to the auth provider                                                                                     | --               |\n\n#### OpenID\n\nOpenID is an authentication protocol built on OAuth 2.0, and should be preferred over standard OAuth 2.0 where possible.\nOpenID offers better user verification and consistent profile information, allowing for more complete user\nregistrations.\n\n| Variable                                    | Description                                                                                                                        | Default Value          |\n| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |\n| `AUTH_<PROVIDER>_CLIENT_ID`                 | OpenID identifier for the external service.                                                                                        | --                     |\n| `AUTH_<PROVIDER>_CLIENT_SECRET`             | OpenID secret for the external service.                                                                                            | --                     |\n| `AUTH_<PROVIDER>_SCOPE`                     | A white-space separated list of privileges Directus will request.                                                                  | `openid profile email` |\n| `AUTH_<PROVIDER>_ISSUER_URL`                | The OpenID `.well-known` Discovery Document URL.                                                                                   | --                     |\n| `AUTH_<PROVIDER>_IDENTIFIER_KEY`            | OpenID profile identifier key used to verify the user.                                                                             | `sub`                  |\n| `AUTH_<PROVIDER>_ALLOW_PUBLIC_REGISTRATION` | Automatically create accounts for authenticating users.                                                                            | `false`                |\n| `AUTH_<PROVIDER>_REQUIRE_VERIFIED_EMAIL`    | Require users to have a verified email address.                                                                                    | `false`                |\n| `AUTH_<PROVIDER>_DEFAULT_ROLE_ID`           | The Directus role ID assigned to created users.                                                                                    | --                     |\n| `AUTH_<PROVIDER>_ICON`                      | SVG icon to display with the login link. You can choose from [Social icon or Material icon set](/getting-started/glossary/#icons). | `account_circle`       |\n| `AUTH_<PROVIDER>_PARAMS`                    | Custom parameters to send to the auth provider                                                                                     | --                     |\n\n### LDAP (`ldap`)\n\nLDAP allows Active Directory users to authenticate and use Directus without having to be manually configured. User\ninformation and roles will be assigned from Active Directory.\n\n| Variable                          | Description                                                            | Default Value |\n| --------------------------------- | ---------------------------------------------------------------------- | ------------- |\n| `AUTH_<PROVIDER>_CLIENT_URL`      | LDAP connection URL.                                                   | --            |\n| `AUTH_<PROVIDER>_BIND_DN`         | Bind user <sup>[1]</sup> distinguished name.                           | --            |\n| `AUTH_<PROVIDER>_BIND_PASSWORD`   | Bind user password.                                                    | --            |\n| `AUTH_<PROVIDER>_USER_DN`         | Directory path containing users.                                       | --            |\n| `AUTH_<PROVIDER>_USER_ATTRIBUTE`  | Attribute to identify users by.                                        | `cn`          |\n| `AUTH_<PROVIDER>_USER_SCOPE`      | Scope of the user search, either `base`, `one`, `sub` <sup>[2]</sup>.  | `one`         |\n| `AUTH_<PROVIDER>_GROUP_DN`        | Directory path containing groups.                                      | --            |\n| `AUTH_<PROVIDER>_GROUP_ATTRIBUTE` | Attribute to identify user as a member of a group.                     | `member`      |\n| `AUTH_<PROVIDER>_GROUP_SCOPE`     | Scope of the group search, either `base`, `one`, `sub` <sup>[2]</sup>. | `one`         |\n| `AUTH_<PROVIDER>_MAIL_ATTRIBUTE`  | Attribute containing the email of the user.                            | `mail`        |\n\n<sup>[1]</sup> The bind user must have permission to query users and groups to perform authentication. To bind\nanonymously use `AUTH_LDAP_BIND_DN=\"\"` and `AUTH_LDAP_BIND_PASSWORD=\"\"`\n\n<sup>[2]</sup> The scope defines the following behaviors:\n\n- `base`: Limits the scope to a single object defined by the associated DN.\n- `one`: Searches all objects within the associated DN.\n- `sub`: Searches all objects and sub-objects within the associated DN.\n\n### Example: LDAP\n\n```\nAUTH_PROVIDERS=\"ldap\"\n\nAUTH_LDAP_DRIVER=\"ldap\"\nAUTH_LDAP_CLIENT_URL=\"ldap://ldap.directus.io\"\nAUTH_LDAP_BIND_DN=\"CN=Bind User,OU=Users,DC=ldap,DC=directus,DC=io\"\nAUTH_LDAP_BIND_PASSWORD=\"p455w0rd\"\nAUTH_LDAP_USER_DN=\"OU=Users,DC=ldap,DC=directus,DC=io\"\nAUTH_LDAP_GROUP_DN=\"OU=Groups,DC=ldap,DC=directus,DC=io\"\n```\n\n### Example: Multiple Auth Providers\n\nYou can configure multiple providers for handling authentication in Directus. This allows for different options when\nlogging in. To do this, you can provide a CSV of provider names, and provide a config block for each of them:\n\n```\nAUTH_PROVIDERS=\"google,adobe\"\n\nAUTH_GOOGLE_DRIVER=\"openid\"\nAUTH_GOOGLE_CLIENT_ID=\"<google_application_id>\"\nAUTH_GOOGLE_CLIENT_SECRET= \"<google_application_secret_key>\"\nAUTH_GOOGLE_ISSUER_URL=\"https://accounts.google.com\"\nAUTH_GOOGLE_IDENTIFIER_KEY=\"email\"\nAUTH_GOOGLE_ICON=\"google\"\n\nAUTH_ADOBE_DRIVER=\"oauth2\"\nAUTH_ADOBE_CLIENT_ID=\"<adobe_application_id>\"\nAUTH_ADOBE_CLIENT_SECRET=\"<adobe_application_secret_key>\"\nAUTH_ADOBE_AUTHORIZE_URL=\"https://ims-na1.adobelogin.com/ims/authorize/v2\"\nAUTH_ADOBE_ACCESS_URL=\"https://ims-na1.adobelogin.com/ims/token/v3\"\nAUTH_ADOBE_PROFILE_URL=\"https://ims-na1.adobelogin.com/ims/userinfo/v2\"\nAUTH_ADOBE_ICON=\"adobe\"\n```\n\n## Extensions\n\n| Variable                 | Description                                             | Default Value  |\n| ------------------------ | ------------------------------------------------------- | -------------- |\n| `EXTENSIONS_PATH`        | Path to your local extensions folder.                   | `./extensions` |\n| `EXTENSIONS_AUTO_RELOAD` | Automatically reload extensions when they have changed. | `false`        |\n\n## Email\n\n| Variable          | Description                                                              | Default Value          |\n| ----------------- | ------------------------------------------------------------------------ | ---------------------- |\n| `EMAIL_FROM`      | Email address from which emails are sent.                                | `no-reply@directus.io` |\n| `EMAIL_TRANSPORT` | What to use to send emails. One of `sendmail`, `smtp`, `mailgun`, `ses`. | `sendmail`             |\n\nBased on the `EMAIL_TRANSPORT` used, you must also provide the following configurations:\n\n### Sendmail (`sendmail`)\n\n| Variable                  | Description                             | Default Value        |\n| ------------------------- | --------------------------------------- | -------------------- |\n| `EMAIL_SENDMAIL_NEW_LINE` | What new line style to use in sendmail. | `unix`               |\n| `EMAIL_SENDMAIL_PATH`     | Path to your sendmail executable.       | `/usr/sbin/sendmail` |\n\n### SMTP (`smtp`)\n\n| Variable                | Description      | Default Value |\n| ----------------------- | ---------------- | ------------- |\n| `EMAIL_SMTP_HOST`       | SMTP Host        | --            |\n| `EMAIL_SMTP_PORT`       | SMTP Port        | --            |\n| `EMAIL_SMTP_USER`       | SMTP User        | --            |\n| `EMAIL_SMTP_PASSWORD`   | SMTP Password    | --            |\n| `EMAIL_SMTP_POOL`       | Use SMTP pooling | --            |\n| `EMAIL_SMTP_SECURE`     | Enable TLS       | --            |\n| `EMAIL_SMTP_IGNORE_TLS` | Ignore TLS       | --            |\n\n### Mailgun (`mailgun`)\n\n| Variable                | Description                                                                       | Default Value     |\n| ----------------------- | --------------------------------------------------------------------------------- | ----------------- |\n| `EMAIL_MAILGUN_API_KEY` | Your Mailgun API key.                                                             | --                |\n| `EMAIL_MAILGUN_DOMAIN`  | A domain from [your Mailgun account](https://app.mailgun.com/app/sending/domains) | --                |\n| `EMAIL_MAILGUN_HOST`    | Allows you to specify a custom host.                                              | `api.mailgun.net` |\n\n### AWS SES (`ses`)\n\n| Variable                                   | Description                  | Default Value |\n| ------------------------------------------ | ---------------------------- | ------------- |\n| `EMAIL_SES_CREDENTIALS__ACCESS_KEY_ID`     | Your AWS SES access key. ID. | --            |\n| `EMAIL_SES_CREDENTIALS__SECRET_ACCESS_KEY` | Your AWS SES secret key.     | --            |\n| `EMAIL_SES_REGION`                         | Your AWS SES region.         | --            |\n\n## Admin Account\n\nIf you're relying on Docker and/or the `directus bootstrap` CLI command, you can pass the following two environment\nvariables to automatically configure the first user:\n\n| Variable         | Description                                                                                       | Default Value |\n| ---------------- | ------------------------------------------------------------------------------------------------- | ------------- |\n| `ADMIN_EMAIL`    | The email address of the first user that's automatically created when using `directus bootstrap`. | --            |\n| `ADMIN_PASSWORD` | The password of the first user that's automatically created when using `directus bootstrap`.      | --            |\n\n## Telemetry\n\nTo more accurately gauge the frequency of installation, version fragmentation, and general size of the userbase,\nDirectus collects little and anonymized data about your environment. You can easily opt-out with the following\nenvironment variable:\n\n| Variable    | Description                                                       | Default Value |\n| ----------- | ----------------------------------------------------------------- | ------------- |\n| `TELEMETRY` | Allow Directus to collect anonymized data about your environment. | `true`        |\n\n## Limits & Optimizations\n\nAllows you to configure hard technical limits, to prevent abuse and optimize for your particular server environment.\n\n| Variable                | Description                                                                               | Default Value |\n| ----------------------- | ----------------------------------------------------------------------------------------- | ------------- |\n| `RELATIONAL_BATCH_SIZE` | How many rows are read into memory at a time when constructing nested relational datasets | 25000         |\n"], "filenames": ["api/src/env.ts", "api/src/services/files.ts", "docs/configuration/config-options.md"], "buggy_code_start_loc": [79, 8, 282], "buggy_code_end_loc": [97, 173, 282], "fixing_code_start_loc": [80, 8, 283], "fixing_code_end_loc": [101, 226, 284], "type": "CWE-918", "message": "In directus versions v9.0.0-beta.2 through 9.6.0 are vulnerable to server-side request forgery (SSRF) in the media upload functionality which allows a low privileged user to perform internal network port scans.", "other": {"cve": {"id": "CVE-2022-23080", "sourceIdentifier": "vulnerabilitylab@mend.io", "published": "2022-06-22T16:15:07.930", "lastModified": "2022-07-05T18:38:01.700", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "In directus versions v9.0.0-beta.2 through 9.6.0 are vulnerable to server-side request forgery (SSRF) in the media upload functionality which allows a low privileged user to perform internal network port scans."}, {"lang": "es", "value": "En directus versiones v9.0.0-beta.2 hasta 9.6.0, son vulnerables a un ataque de tipo server-side request forgery (SSRF) en la funcionalidad media upload que permite a un usuario poco privilegiado realizar escaneos de puertos de red internos"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 5.0, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 3.1, "impactScore": 1.4}, {"source": "vulnerabilitylab@mend.io", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 5.0, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 3.1, "impactScore": 1.4}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:P/I:N/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "PARTIAL", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "vulnerabilitylab@mend.io", "type": "Primary", "description": [{"lang": "en", "value": "CWE-918"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:*:*:*:*:*:*:*:*", "versionStartIncluding": "9.0.1", "versionEndIncluding": "9.6.0", "matchCriteriaId": "6F0C7131-B14D-416A-AB15-EE34B48CB4AB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta10:*:*:*:*:*:*", "matchCriteriaId": "E7E685D8-87F3-4644-82F7-5011906D664C"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta11:*:*:*:*:*:*", "matchCriteriaId": "371A1F14-0E57-4D03-8CCF-1E04CF579363"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta12:*:*:*:*:*:*", "matchCriteriaId": "3EBB9F0B-469B-46D4-8DF5-3CB0D26C35AD"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta13:*:*:*:*:*:*", "matchCriteriaId": "7C687D37-2FAA-4F39-BADA-AD4A8B02C11B"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta14:*:*:*:*:*:*", "matchCriteriaId": "9906A21C-6823-4D7C-A6B9-276DC4929ACA"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta2:*:*:*:*:*:*", "matchCriteriaId": "D17628E7-A69E-4395-A790-1C43F59FB79E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta3:*:*:*:*:*:*", "matchCriteriaId": "D0801D3E-87B1-4842-A891-23F73146326A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta4:*:*:*:*:*:*", "matchCriteriaId": "A019A0FA-C01D-488B-9C27-38EAD43C4576"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta5:*:*:*:*:*:*", "matchCriteriaId": "57CFB169-BB99-480A-8DB8-5932E72195EF"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta7:*:*:*:*:*:*", "matchCriteriaId": "E7488FF7-E4F9-4126-A3E0-1560C076A486"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta8:*:*:*:*:*:*", "matchCriteriaId": "3F3A5903-A198-4E1C-B32C-41F9F5F8FE7D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:beta9:*:*:*:*:*:*", "matchCriteriaId": "2518A8FD-B71B-48EE-BB4F-4B129D5F57FE"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc0:*:*:*:*:*:*", "matchCriteriaId": "51CD9570-2DEA-4572-9222-FCA4049A229D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc1:*:*:*:*:*:*", "matchCriteriaId": "8DB07786-FA7B-4941-9105-26B9DC2D82F9"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc10:*:*:*:*:*:*", "matchCriteriaId": "45B70DCE-B860-4E6C-BC1F-A89BD79FD9E6"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc100:*:*:*:*:*:*", "matchCriteriaId": "D08AA556-4524-45EA-80E2-2D4996CC58EF"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc101:*:*:*:*:*:*", "matchCriteriaId": "42798D07-F87B-4DC5-85DC-97C19EE5F927"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc11:*:*:*:*:*:*", "matchCriteriaId": "45553C55-AEE8-42E2-9A81-C850FD05C3AB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc12:*:*:*:*:*:*", "matchCriteriaId": "EE381727-3D96-43CD-B07B-E653D4B46677"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc13:*:*:*:*:*:*", "matchCriteriaId": "95CF72D0-C742-45DD-AFBB-1619EFBFE7A2"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc14:*:*:*:*:*:*", "matchCriteriaId": "B14236FE-AC54-4B9E-B8A4-D23146B073AC"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc15:*:*:*:*:*:*", "matchCriteriaId": "BF790178-8A0C-4AEB-9495-E176018F2245"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc17:*:*:*:*:*:*", "matchCriteriaId": "403E4722-9794-4EDF-8D46-41CB7B24787E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc18:*:*:*:*:*:*", "matchCriteriaId": "F9C899B5-C6BB-4664-B670-D5EAE2732B56"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc19:*:*:*:*:*:*", "matchCriteriaId": "8A41F3AE-7969-40EF-845E-FD06DC014B9B"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc2:*:*:*:*:*:*", "matchCriteriaId": "BB9329F2-4A79-44AA-9F76-C9C2467C3519"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc20:*:*:*:*:*:*", "matchCriteriaId": "D763F244-F5B7-4090-9B55-4DE94DFC5729"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc21:*:*:*:*:*:*", "matchCriteriaId": "495DC6E5-C67E-4F5D-8B83-743DC0A75730"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc22:*:*:*:*:*:*", "matchCriteriaId": "2EEAFB71-E5AB-4153-BFC0-EBF32D7F9EBB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc23:*:*:*:*:*:*", "matchCriteriaId": "DA1A5E4E-D311-4A57-B86B-AF766235A475"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc24:*:*:*:*:*:*", "matchCriteriaId": "ACDF5EC1-3FDB-4CBF-937F-654F9AF95945"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc25:*:*:*:*:*:*", "matchCriteriaId": "35606AF8-C3F0-4FEA-B54D-CB966824308C"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc26:*:*:*:*:*:*", "matchCriteriaId": "F91D03A0-7DB7-4257-9415-C0D87BA2AAF0"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc27:*:*:*:*:*:*", "matchCriteriaId": "8D05BF28-4806-4D82-843C-FA1B8CED74D5"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc28:*:*:*:*:*:*", "matchCriteriaId": "8FF35B3D-2CFA-4810-9E15-470EA887D9B1"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc29:*:*:*:*:*:*", "matchCriteriaId": "0F283221-95BD-4A8E-8865-8AE1399F5876"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc3:*:*:*:*:*:*", "matchCriteriaId": "55EEE789-67DB-47D9-892B-1340963E7927"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc30:*:*:*:*:*:*", "matchCriteriaId": "89FFD654-9CA8-4CA3-981A-F0F76EB0F521"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc31:*:*:*:*:*:*", "matchCriteriaId": "A0350F49-CC16-4426-ADCD-7CD4254B6FCC"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc32:*:*:*:*:*:*", "matchCriteriaId": "CBED485C-5A6F-430A-82CD-8E4920B93FBA"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc33:*:*:*:*:*:*", "matchCriteriaId": "F48FE4FF-8245-4844-99F1-A4F813622A91"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc34:*:*:*:*:*:*", "matchCriteriaId": "ADCBE2AF-442F-47C7-98AA-D9AFDF2DB67F"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc35:*:*:*:*:*:*", "matchCriteriaId": "481219B2-3B23-4587-8674-D79ADB187EE1"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc36:*:*:*:*:*:*", "matchCriteriaId": "254199A7-0054-4CAF-A2A9-E8775B1BC023"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc37:*:*:*:*:*:*", "matchCriteriaId": "8125A4F8-2574-49FE-990A-D285E9040D28"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc38:*:*:*:*:*:*", "matchCriteriaId": "DA41810F-739D-4134-85B2-4C6FD30EEFD9"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc39:*:*:*:*:*:*", "matchCriteriaId": "04CF572B-5E1F-4F25-8914-37EC89EB8B03"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc4:*:*:*:*:*:*", "matchCriteriaId": "DAD8E2AF-951F-48EF-90CF-24A5FEB32D67"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc40:*:*:*:*:*:*", "matchCriteriaId": "85665B14-3D55-4156-9D36-BBEAB8A092A2"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc41:*:*:*:*:*:*", "matchCriteriaId": "4D8677D7-5B12-43D7-9227-5D2631EA3A0A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc42:*:*:*:*:*:*", "matchCriteriaId": "CBAEBC81-BA6F-4EE1-B1C8-4BF7078DA100"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc43:*:*:*:*:*:*", "matchCriteriaId": "7488DBEF-3F63-4E82-AB77-AF3CB6B14430"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc44:*:*:*:*:*:*", "matchCriteriaId": "5165C27C-CDE8-43A1-80E6-147D37183299"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc45:*:*:*:*:*:*", "matchCriteriaId": "E5B5898D-FC53-4D07-A5DC-082BA4D8C987"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc46:*:*:*:*:*:*", "matchCriteriaId": "7E0E801F-EC32-4C08-A627-79D731BC2825"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc47:*:*:*:*:*:*", "matchCriteriaId": "DE607124-F29B-436D-976E-DFBEA5EDBF8B"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc48:*:*:*:*:*:*", "matchCriteriaId": "52E3E8EC-631A-457E-BC07-ED15E915D24E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc49:*:*:*:*:*:*", "matchCriteriaId": "1FDC5AAF-EDDF-4526-AEE9-69EC661BFB9D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc5:*:*:*:*:*:*", "matchCriteriaId": "53019FA4-DA26-4CFF-A0C4-E57707435E00"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc50:*:*:*:*:*:*", "matchCriteriaId": "981CE199-DC89-4CB7-8FB1-1E552F396DEB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc51:*:*:*:*:*:*", "matchCriteriaId": "A62D4B24-C873-4138-A4E9-6B8EBCA3E981"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc52:*:*:*:*:*:*", "matchCriteriaId": "A515AD50-3ECF-4587-8AD5-5D0E2A768A7A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc53:*:*:*:*:*:*", "matchCriteriaId": "9C8501C3-2191-42E8-9620-741F74CE2F15"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc54:*:*:*:*:*:*", "matchCriteriaId": "1E3213CC-91B6-4E7E-9629-A4C565531B30"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc55:*:*:*:*:*:*", "matchCriteriaId": "B1219C97-9DAA-4791-9D18-64D095938434"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc56:*:*:*:*:*:*", "matchCriteriaId": "DFC78640-A1BA-4DB0-B9AF-E34DD95171DD"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc57:*:*:*:*:*:*", "matchCriteriaId": "2CA01771-E27C-4CB0-8E0B-1CB71A59F6AB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc58:*:*:*:*:*:*", "matchCriteriaId": "506FE0BF-D988-44A4-A272-3544024A2E78"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc59:*:*:*:*:*:*", "matchCriteriaId": "7DA43EE9-7412-48CA-B1E7-619AA116D427"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc6:*:*:*:*:*:*", "matchCriteriaId": "3641DB8D-BE6E-4BF5-8EBC-52C50F0A850A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc60:*:*:*:*:*:*", "matchCriteriaId": "38360D89-4A8C-4909-BB77-AACA5D8BF048"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc61:*:*:*:*:*:*", "matchCriteriaId": "0824EEC4-AFDE-4E8E-B27C-34AA042539C6"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc62:*:*:*:*:*:*", "matchCriteriaId": "F9C2CE70-41EF-47C5-9715-E42D9A4CA345"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc63:*:*:*:*:*:*", "matchCriteriaId": "C7F3C217-E79A-4BE2-AC4B-3E280CF1162B"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc64:*:*:*:*:*:*", "matchCriteriaId": "FEAF4A6A-DF67-4C38-B968-8391BA3B027C"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc65:*:*:*:*:*:*", "matchCriteriaId": "45282628-8F29-4BD0-B4FF-3ECD04DC4584"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc66:*:*:*:*:*:*", "matchCriteriaId": "BAC07857-306F-4DF7-B586-330A51F86E0E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc67:*:*:*:*:*:*", "matchCriteriaId": "D580D844-A230-4D05-AA9B-1B8F785771CC"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc68:*:*:*:*:*:*", "matchCriteriaId": "AD33F536-BCD9-4205-ABB6-1748F1C04C79"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc69:*:*:*:*:*:*", "matchCriteriaId": "1EC607B1-7205-4C97-B18C-F792F919EB0B"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc7:*:*:*:*:*:*", "matchCriteriaId": "DECC37DB-7DBC-490E-BB4D-F358B8BE04F1"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc70:*:*:*:*:*:*", "matchCriteriaId": "76050C92-5441-48AD-A662-AF90CD51A093"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc71:*:*:*:*:*:*", "matchCriteriaId": "C60BB748-6DB3-40D6-A2FD-725D38B4D717"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc72:*:*:*:*:*:*", "matchCriteriaId": "10B17B25-3D29-4066-B315-BA5F5D08216F"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc73:*:*:*:*:*:*", "matchCriteriaId": "C919D78E-8231-4452-BE4B-56F1D7A53745"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc74:*:*:*:*:*:*", "matchCriteriaId": "4F4DEC50-215A-478D-8A56-CC6896C32E68"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc75:*:*:*:*:*:*", "matchCriteriaId": "075076A9-5171-4F1F-B96E-2E1D4C6D7FCE"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc76:*:*:*:*:*:*", "matchCriteriaId": "83BE0072-2296-46A0-86E2-1BB560F23172"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc77:*:*:*:*:*:*", "matchCriteriaId": "3C4FEF13-459C-48FD-919D-921AA1DA1EE9"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc78:*:*:*:*:*:*", "matchCriteriaId": "B5FD43BA-F42B-4B0A-9D0D-3284C5037766"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc79:*:*:*:*:*:*", "matchCriteriaId": "B95BF825-ACD4-44DC-AAAD-1564C1EAF827"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc8:*:*:*:*:*:*", "matchCriteriaId": "CEE20367-CF2E-4954-ADE0-D56D2B6A0C9F"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc80:*:*:*:*:*:*", "matchCriteriaId": "BA315D47-294C-434F-88E5-A099859C2AA5"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc81:*:*:*:*:*:*", "matchCriteriaId": "17B7A29B-75D7-476D-A999-CDDF47DF363C"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc82:*:*:*:*:*:*", "matchCriteriaId": "CC7498A4-7965-4895-AC92-AFBEDD68A81A"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc83:*:*:*:*:*:*", "matchCriteriaId": "1557399D-2549-42F3-8C0D-B35E25C38DF7"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc84:*:*:*:*:*:*", "matchCriteriaId": "E322CBF0-61C0-419A-8513-FE25F511D259"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc85:*:*:*:*:*:*", "matchCriteriaId": "936AD22D-438D-4500-B677-AFFD19CA0D73"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc86:*:*:*:*:*:*", "matchCriteriaId": "F1AF8FA3-E95F-499A-85C9-D053D5F9F755"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc87:*:*:*:*:*:*", "matchCriteriaId": "BB3A9596-37F2-447A-8F93-B1E1F5E64D74"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc88:*:*:*:*:*:*", "matchCriteriaId": "104A83DA-82FB-4D6A-A544-ACECCD7EA866"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc89:*:*:*:*:*:*", "matchCriteriaId": "DD39FDCA-986D-4DB4-8B39-59AACA80E248"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc9:*:*:*:*:*:*", "matchCriteriaId": "15693730-BABE-4703-8E15-1F42DE819913"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc90:*:*:*:*:*:*", "matchCriteriaId": "D568E567-C1A1-4BB7-9FB2-9A7044F7360E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc91:*:*:*:*:*:*", "matchCriteriaId": "9E266EE8-578C-4991-8E53-1A5BEC8A004D"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc92:*:*:*:*:*:*", "matchCriteriaId": "D75D7964-98EC-4A71-926B-B6500F852CA4"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc93:*:*:*:*:*:*", "matchCriteriaId": "85B0990A-6EC6-44F5-AF3E-CB8C85B8F1AB"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc94:*:*:*:*:*:*", "matchCriteriaId": "4E1EC031-B15E-47A7-97BD-E86D38853F36"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc95:*:*:*:*:*:*", "matchCriteriaId": "614774B4-8A98-41F9-BB9B-603668FDCF36"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc96:*:*:*:*:*:*", "matchCriteriaId": "1442884B-3A8E-4210-9BB2-F34FB37C2C78"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc97:*:*:*:*:*:*", "matchCriteriaId": "33003367-36D9-4709-B182-9B93615C6F36"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc98:*:*:*:*:*:*", "matchCriteriaId": "1B1C3267-3FBB-4D91-8320-89B07BC7291F"}, {"vulnerable": true, "criteria": "cpe:2.3:a:rangerstudio:directus:9.0.0:rc99:*:*:*:*:*:*", "matchCriteriaId": "DCB32D41-1563-40D6-8A59-3E590E10F9B4"}]}]}], "references": [{"url": "https://github.com/directus/directus/commit/6da3f1ed5034115b1da00440008351bf0d808d83", "source": "vulnerabilitylab@mend.io", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://www.mend.io/vulnerability-database/CVE-2022-23080", "source": "vulnerabilitylab@mend.io", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/directus/directus/commit/6da3f1ed5034115b1da00440008351bf0d808d83"}}