{"buggy_code": ["<?php if ($search->scope == 'chat') : ?>\n    <?php if (!$list_mode) : ?>\n    <div role=\"tabpanel\" id=\"tabs\" ng-cloak>\n        <ul class=\"nav nav-pills\" role=\"tablist\">\n            <li role=\"presentation\" class=\"nav-item\"><a class=\"nav-link active\" href=\"#chatlist\" aria-controls=\"chatlist\" role=\"tab\" data-toggle=\"tab\" title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/onlineusers','Chat list');?>\">\n                    <?php echo htmlspecialchars($search->name)?> </a>\n            </li>\n        </ul>\n        <div class=\"tab-content\" ng-cloak>\n            <div role=\"tabpanel\" class=\"tab-pane form-group active\" id=\"chatlist\">\n                <div id=\"view-content-list\">\n                    <?php endif; ?>\n\n                    <table cellpadding=\"0\" cellspacing=\"0\" class=\"table table-sm\" width=\"100%\">\n                        <thead>\n                        <tr>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Information');?></th>\n                            <th nowrap width=\"45%\">\n                                <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Nick');?>\n                            </th>\n                            <th width=\"15%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Operator');?></th>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Department');?></th>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Status');?></th>\n                            <th width=\"5%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Date');?></th>\n                        </tr>\n                        </thead>\n                        <?php foreach ($items as $chat) : ?>\n                            <?php include(erLhcoreClassDesign::designtpl('lhchat/lists/start_row.tpl.php')); ?>\n                            <td nowrap=\"\">\n                                <?php foreach ($chat->aicons as $aicon) : ?>\n                                    <i class=\"material-icons\" style=\"color: <?php isset($aicon['c']) ? print htmlspecialchars($aicon['c']) : print '#6c757d'?>\" title=\"<?php isset($aicon['t']) ? print htmlspecialchars($aicon['t']) : htmlspecialchars($aicon['i'])?> {{icon.t ? icon.t : icon.i}}\"><?php isset($aicon['i']) ? print htmlspecialchars($aicon['i']) : htmlspecialchars($aicon)?></i>\n                                <?php endforeach; ?>\n\n                                <?php if ( !empty($chat->country_code) ) : ?><img src=\"<?php echo erLhcoreClassDesign::design('images/flags');?>/<?php echo $chat->country_code?>.png\" alt=\"<?php echo htmlspecialchars($chat->country_name)?>\" title=\"<?php echo htmlspecialchars($chat->country_name)?>\" />&nbsp;<?php endif; ?>\n\n                                <span class=\"action-image material-icons <?php echo $chat->user_status_front == 2 ? ' icon-user-away' : ($chat->user_status_front == 0 ? ' icon-user-online' : ' icon-user-offline')?>\" onclick=\"lhc.previewChat(<?php echo $chat->id?>)\">info_outline</span>\n\n                                <a ng-non-bindable class=\"action-image material-icons\" data-title=\"<?php echo htmlspecialchars($chat->nick,ENT_QUOTES);?>\" onclick=\"lhinst.startChatNewWindow('<?php echo $chat->id;?>',$(this).attr('data-title'))\" title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Open in a new window');?>\">open_in_new</a>\n\n                                <a href=\"#\" onclick=\"ee.emitEvent('angularStartChatbyId',[<?php echo $chat->id?>])\"><?php echo $chat->id?></a>\n\n                                <?php if ($chat->status_sub == erLhcoreClassModelChat::STATUS_SUB_OFFLINE_REQUEST) : ?><i title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/activechats','Offline request')?>\" class=\"material-icons\">mail</i><?php endif?>\n\n                                <span ng-non-bindable><?php echo ($chat->product !== false ? ' '.htmlspecialchars((string)$chat->product) : '');?></span></a>\n\n                                <?php if ($chat->has_unread_messages == 1) : ?>\n                                    <?php\n                                    $diff = time()-$chat->last_user_msg_time;\n                                    $hours = floor($diff/3600);\n                                    $minits = floor(($diff - ($hours * 3600))/60);\n                                    $seconds = ($diff - ($hours * 3600) - ($minits * 60));\n                                    ?> | <b><?php echo $hours?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','h.');?> <?php echo $minits ?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','m.');?> <?php echo $seconds?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','s.');?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','ago');?>.</b>\n                                <?php endif;?>\n                            </td>\n                            <td ng-non-bindable>\n                                <?php echo htmlspecialchars($chat->nick);?>\n                            </td>\n                            <td ng-non-bindable nowrap=\"nowrap\">\n                                <?php echo htmlspecialchars($chat->user);?>\n                            </td>\n                            <td ng-non-bindable nowrap=\"nowrap\">\n                                <?php echo htmlspecialchars($chat->department);?>\n                            </td>\n                            <td nowrap=\"nowrap\">\n                                <?php if ($chat->fbst == 1) : ?><i class=\"material-icons up-voted\">thumb_up</i><?php elseif ($chat->fbst == 2) : ?><i class=\"material-icons down-voted\">thumb_down<i><?php endif;?>\n                                <?php if ($chat->status == erLhcoreClassModelChat::STATUS_PENDING_CHAT) : ?>\n                                    <i class=\"material-icons chat-pending\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Pending chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_ACTIVE_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Active chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_CLOSED_CHAT) : ?>\n                                    <i class=\"material-icons chat-closed\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Closed chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_CHATBOX_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Chatbox chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_OPERATORS_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">face</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Operators chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_BOT_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">android</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Bot chat');?>\n                                <?php endif;?>\n                                <?php include(erLhcoreClassDesign::designtpl('lhchat/lists_chats_parts/status_multiinclude.tpl.php'));?>\n                            </td>\n                            <td nowrap=\"nowrap\">\n                                <?php echo $chat->start_last_action_front?>\n                            </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </table>\n                    \n                    <?php if (isset($pages)) : ?>\n                        <?php include(erLhcoreClassDesign::designtpl('lhkernel/paginator.tpl.php')); ?>\n                    <?php endif;?>\n\n                    <?php include(erLhcoreClassDesign::designtpl('lhkernel/secure_links.tpl.php')); ?>\n\n                    <?php if (!$list_mode) : ?>\n                </div>\n            </div>\n        </div>\n    </div>\n    <?php endif; ?>\n\n<?php else : ?>\n\n<?php endif; ?>\n", "<?php\n$modalHeaderClass = 'pt-1 pb-1 pl-2 pr-2';\n$modalHeaderTitle = erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Save search');\n$modalSize = 'md';\n$modalBodyClass = 'p-1';\n$appendPrintExportURL = '';\n?>\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/modal_header.tpl.php'));?>\n\n<?php include(erLhcoreClassDesign::designtpl('lhchat/lists/search_panel_append_print_multiinclude.tpl.php'));?>\n\n    <form action=\"<?php echo htmlspecialchars($action_url)?>/(export)/2?<?php echo $appendPrintExportURL?>\" method=\"post\" target=\"_blank\" onsubmit=\"return lhinst.submitModalForm($(this))\">\n\n        <?php if (isset($errors)) : ?>\n            <?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n        <?php endif; ?>\n        \n        <?php if (isset($updated) && $updated == true) : ?>\n            <div role=\"alert\" class=\"alert alert-info alert-dismissible fade show m-3\">\n                <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/dashboardwidgets','Search was saved') ?>. <a href=\"<?php echo erLhcoreClassDesign::baseurl('views/home')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Go to my views')?></a>\n            </div>\n        <?php else : ?>\n            <div class=\"modal-body\">\n                <div class=\"row\">\n                    <div class=\"col-6\">\n                        <div class=\"form-group\">\n                            <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Name')?></label>\n                            <input required maxlength=\"100\" class=\"form-control\" type=\"text\" ng-non-bindable name=\"name\" value=\"<?php echo htmlspecialchars($item->name)?>\" />\n                        </div>\n                    </div>\n                    <div class=\"col-6\">\n                        <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Include records from the past')?></label>\n                        <input type=\"number\" required min=\"30\" class=\"form-control\" placeholder=\"days\" name=\"days\" value=\"<?php echo htmlspecialchars($item->days)?>\" />\n                    </div>\n                    <div class=\"col-12\">\n                        <div class=\"form-group\">\n                            <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','The higher number the higher in the views list it will appear')?></label>\n                            <input required maxlength=\"100\" class=\"form-control\" type=\"text\" ng-non-bindable name=\"position\" value=\"<?php echo htmlspecialchars($item->position)?>\" />\n                        </div>\n                    </div>\n                    <div class=\"col-12\">\n                        <label><input type=\"checkbox\" name=\"passive\" value=\"on\" <?php if ($item->passive == 1) : ?>checked=\"checked\"<?php endif;?> /> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Passive, number of matching records will not be updated in the background.')?></label>\n                    </div>\n\n                </div>\n            </div>\n            <input type=\"hidden\" name=\"export_action\" value=\"doExport\">\n        <?php endif; ?>\n\n        <div class=\"modal-footer\">\n            <?php if (!(isset($updated) && $updated == true)) : ?>\n            <button type=\"submit\" name=\"XLS\" class=\"btn btn-primary btn-sm\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Save')?></button>\n            <?php endif; ?>\n            <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-dismiss=\"modal\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Close')?></button>\n        </div>\n\n    </form>\n\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/modal_footer.tpl.php'));?>", "<h1><?php echo htmlspecialchars($item->name)?></h1>\n\n<?php if (isset($errors)) : ?>\n\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n<?php endif; ?>\n\n<?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('user/account','Updated'); ?>\n\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n<?php endif; ?>\n\n<script>\n    var conditionsWebhook = <?php echo json_encode($item->conditions_array,JSON_HEX_APOS)?>;\n</script>\n\n<form action=\"\" method=\"post\" enctype=\"multipart/form-data\" ng-controller=\"WebhooksCtrl as webhooksctl\" ng-submit=\"webhooksctl.updateContinuous()\" ng-init='webhooksctl.setConditions();'>\n\n\t<?php include(erLhcoreClassDesign::designtpl('lhwebhooks/form.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Update_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Save_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save & Exit');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Cancel_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n\t</div>\n\t\n</form>\n", "<h1><?php echo htmlspecialchars($item->name)?></h1>\n\n<?php if (isset($errors)) : ?>\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n<?php endif; ?>\n\n<?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('user/account','Updated'); ?>\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n<?php endif; ?>\n\n<script>\n    var incomingConditions = <?php echo json_encode($item->conditions_array,JSON_HEX_APOS & JSON_FORCE_OBJECT)?>;\n</script>\n\n<form action=\"\" method=\"post\" enctype=\"multipart/form-data\" ng-controller=\"WebhooksIncomingCtrl as webhookincomingsctl\" ng-submit=\"webhookincomingsctl.updateContinuous()\" ng-init='webhookincomingsctl.setConditions()'>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhwebhooks/form_incoming.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Update_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Save_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save & Exit');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Cancel_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n    </div>\n\n</form>\n"], "fixing_code": ["<?php if ($search->scope == 'chat') : ?>\n    <?php if (!$list_mode) : ?>\n    <div role=\"tabpanel\" id=\"tabs\" ng-cloak>\n        <ul class=\"nav nav-pills\" role=\"tablist\">\n            <li role=\"presentation\" class=\"nav-item\"><a class=\"nav-link active\" href=\"#chatlist\" aria-controls=\"chatlist\" ng-non-bindable role=\"tab\" data-toggle=\"tab\" title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/onlineusers','Chat list');?>\">\n                    <?php echo htmlspecialchars($search->name)?> </a>\n            </li>\n        </ul>\n        <div class=\"tab-content\" ng-cloak>\n            <div role=\"tabpanel\" class=\"tab-pane form-group active\" id=\"chatlist\">\n                <div id=\"view-content-list\">\n                    <?php endif; ?>\n\n                    <table cellpadding=\"0\" cellspacing=\"0\" class=\"table table-sm\" width=\"100%\">\n                        <thead>\n                        <tr>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Information');?></th>\n                            <th nowrap width=\"45%\">\n                                <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Nick');?>\n                            </th>\n                            <th width=\"15%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Operator');?></th>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Department');?></th>\n                            <th width=\"10%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Status');?></th>\n                            <th width=\"5%\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Date');?></th>\n                        </tr>\n                        </thead>\n                        <?php foreach ($items as $chat) : ?>\n                            <?php include(erLhcoreClassDesign::designtpl('lhchat/lists/start_row.tpl.php')); ?>\n                            <td nowrap=\"\">\n                                <?php foreach ($chat->aicons as $aicon) : ?>\n                                    <i class=\"material-icons\" style=\"color: <?php isset($aicon['c']) ? print htmlspecialchars($aicon['c']) : print '#6c757d'?>\" title=\"<?php isset($aicon['t']) ? print htmlspecialchars($aicon['t']) : htmlspecialchars($aicon['i'])?> {{icon.t ? icon.t : icon.i}}\"><?php isset($aicon['i']) ? print htmlspecialchars($aicon['i']) : htmlspecialchars($aicon)?></i>\n                                <?php endforeach; ?>\n\n                                <?php if ( !empty($chat->country_code) ) : ?><img src=\"<?php echo erLhcoreClassDesign::design('images/flags');?>/<?php echo $chat->country_code?>.png\" alt=\"<?php echo htmlspecialchars($chat->country_name)?>\" title=\"<?php echo htmlspecialchars($chat->country_name)?>\" />&nbsp;<?php endif; ?>\n\n                                <span class=\"action-image material-icons <?php echo $chat->user_status_front == 2 ? ' icon-user-away' : ($chat->user_status_front == 0 ? ' icon-user-online' : ' icon-user-offline')?>\" onclick=\"lhc.previewChat(<?php echo $chat->id?>)\">info_outline</span>\n\n                                <a ng-non-bindable class=\"action-image material-icons\" data-title=\"<?php echo htmlspecialchars($chat->nick,ENT_QUOTES);?>\" onclick=\"lhinst.startChatNewWindow('<?php echo $chat->id;?>',$(this).attr('data-title'))\" title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Open in a new window');?>\">open_in_new</a>\n\n                                <a href=\"#\" onclick=\"ee.emitEvent('angularStartChatbyId',[<?php echo $chat->id?>])\"><?php echo $chat->id?></a>\n\n                                <?php if ($chat->status_sub == erLhcoreClassModelChat::STATUS_SUB_OFFLINE_REQUEST) : ?><i title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/activechats','Offline request')?>\" class=\"material-icons\">mail</i><?php endif?>\n\n                                <span ng-non-bindable><?php echo ($chat->product !== false ? ' '.htmlspecialchars((string)$chat->product) : '');?></span></a>\n\n                                <?php if ($chat->has_unread_messages == 1) : ?>\n                                    <?php\n                                    $diff = time()-$chat->last_user_msg_time;\n                                    $hours = floor($diff/3600);\n                                    $minits = floor(($diff - ($hours * 3600))/60);\n                                    $seconds = ($diff - ($hours * 3600) - ($minits * 60));\n                                    ?> | <b><?php echo $hours?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','h.');?> <?php echo $minits ?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','m.');?> <?php echo $seconds?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','s.');?> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/syncadmininterface','ago');?>.</b>\n                                <?php endif;?>\n                            </td>\n                            <td ng-non-bindable>\n                                <?php echo htmlspecialchars($chat->nick);?>\n                            </td>\n                            <td ng-non-bindable nowrap=\"nowrap\">\n                                <?php echo htmlspecialchars($chat->user);?>\n                            </td>\n                            <td ng-non-bindable nowrap=\"nowrap\">\n                                <?php echo htmlspecialchars($chat->department);?>\n                            </td>\n                            <td nowrap=\"nowrap\">\n                                <?php if ($chat->fbst == 1) : ?><i class=\"material-icons up-voted\">thumb_up</i><?php elseif ($chat->fbst == 2) : ?><i class=\"material-icons down-voted\">thumb_down<i><?php endif;?>\n                                <?php if ($chat->status == erLhcoreClassModelChat::STATUS_PENDING_CHAT) : ?>\n                                    <i class=\"material-icons chat-pending\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Pending chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_ACTIVE_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Active chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_CLOSED_CHAT) : ?>\n                                    <i class=\"material-icons chat-closed\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Closed chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_CHATBOX_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">chat</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Chatbox chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_OPERATORS_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">face</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Operators chat');?>\n                                <?php elseif ($chat->status == erLhcoreClassModelChat::STATUS_BOT_CHAT) : ?>\n                                    <i class=\"material-icons chat-active\">android</i><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/pendingchats','Bot chat');?>\n                                <?php endif;?>\n                                <?php include(erLhcoreClassDesign::designtpl('lhchat/lists_chats_parts/status_multiinclude.tpl.php'));?>\n                            </td>\n                            <td nowrap=\"nowrap\">\n                                <?php echo $chat->start_last_action_front?>\n                            </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </table>\n                    \n                    <?php if (isset($pages)) : ?>\n                        <?php include(erLhcoreClassDesign::designtpl('lhkernel/paginator.tpl.php')); ?>\n                    <?php endif;?>\n\n                    <?php include(erLhcoreClassDesign::designtpl('lhkernel/secure_links.tpl.php')); ?>\n\n                    <?php if (!$list_mode) : ?>\n                </div>\n            </div>\n        </div>\n    </div>\n    <?php endif; ?>\n\n<?php else : ?>\n\n<?php endif; ?>\n", "<?php\n$modalHeaderClass = 'pt-1 pb-1 pl-2 pr-2';\n$modalHeaderTitle = erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Save search');\n$modalSize = 'md';\n$modalBodyClass = 'p-1';\n$appendPrintExportURL = '';\n?>\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/modal_header.tpl.php'));?>\n\n<?php include(erLhcoreClassDesign::designtpl('lhchat/lists/search_panel_append_print_multiinclude.tpl.php'));?>\n\n    <form action=\"<?php echo htmlspecialchars($action_url)?>/(export)/2?<?php echo $appendPrintExportURL?>\" method=\"post\" ng-non-bindable target=\"_blank\" onsubmit=\"return lhinst.submitModalForm($(this))\">\n\n        <?php if (isset($errors)) : ?>\n            <?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n        <?php endif; ?>\n        \n        <?php if (isset($updated) && $updated == true) : ?>\n            <div role=\"alert\" class=\"alert alert-info alert-dismissible fade show m-3\">\n                <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/dashboardwidgets','Search was saved') ?>. <a href=\"<?php echo erLhcoreClassDesign::baseurl('views/home')?>/<?php echo $item->id?>\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Go to my views')?></a>\n            </div>\n        <?php else : ?>\n            <div class=\"modal-body\">\n                <div class=\"row\">\n                    <div class=\"col-6\">\n                        <div class=\"form-group\">\n                            <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Name')?></label>\n                            <input required maxlength=\"100\" class=\"form-control\" type=\"text\" ng-non-bindable name=\"name\" value=\"<?php echo htmlspecialchars($item->name)?>\" />\n                        </div>\n                    </div>\n                    <div class=\"col-6\">\n                        <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Include records from the past')?></label>\n                        <input type=\"number\" required min=\"30\" class=\"form-control\" placeholder=\"days\" name=\"days\" value=\"<?php echo htmlspecialchars($item->days)?>\" />\n                    </div>\n                    <div class=\"col-12\">\n                        <div class=\"form-group\">\n                            <label><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','The higher number the higher in the views list it will appear')?></label>\n                            <input required maxlength=\"100\" class=\"form-control\" type=\"text\" ng-non-bindable name=\"position\" value=\"<?php echo htmlspecialchars($item->position)?>\" />\n                        </div>\n                    </div>\n                    <div class=\"col-12\">\n                        <label><input type=\"checkbox\" name=\"passive\" value=\"on\" <?php if ($item->passive == 1) : ?>checked=\"checked\"<?php endif;?> /> <?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Passive, number of matching records will not be updated in the background.')?></label>\n                    </div>\n\n                </div>\n            </div>\n            <input type=\"hidden\" name=\"export_action\" value=\"doExport\">\n        <?php endif; ?>\n\n        <div class=\"modal-footer\">\n            <?php if (!(isset($updated) && $updated == true)) : ?>\n            <button type=\"submit\" name=\"XLS\" class=\"btn btn-primary btn-sm\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/lists/search_panel','Save')?></button>\n            <?php endif; ?>\n            <button type=\"button\" class=\"btn btn-secondary btn-sm\" data-dismiss=\"modal\"><?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Close')?></button>\n        </div>\n\n    </form>\n\n<?php include(erLhcoreClassDesign::designtpl('lhkernel/modal_footer.tpl.php'));?>", "<h1 ng-non-bindable><?php echo htmlspecialchars($item->name)?></h1>\n\n<?php if (isset($errors)) : ?>\n\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n<?php endif; ?>\n\n<?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('user/account','Updated'); ?>\n\t<?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n<?php endif; ?>\n\n<script>\n    var conditionsWebhook = <?php echo json_encode($item->conditions_array,JSON_HEX_APOS)?>;\n</script>\n\n<form action=\"\" method=\"post\" enctype=\"multipart/form-data\" ng-controller=\"WebhooksCtrl as webhooksctl\" ng-submit=\"webhooksctl.updateContinuous()\" ng-init='webhooksctl.setConditions();'>\n\n\t<?php include(erLhcoreClassDesign::designtpl('lhwebhooks/form.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Update_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Save_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save & Exit');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Cancel_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n\t</div>\n\t\n</form>\n", "<h1 ng-non-bindable><?php echo htmlspecialchars($item->name)?></h1>\n\n<?php if (isset($errors)) : ?>\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/validation_error.tpl.php'));?>\n<?php endif; ?>\n\n<?php if (isset($updated)) : $msg = erTranslationClassLhTranslation::getInstance()->getTranslation('user/account','Updated'); ?>\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/alert_success.tpl.php'));?>\n<?php endif; ?>\n\n<script>\n    var incomingConditions = <?php echo json_encode($item->conditions_array,JSON_HEX_APOS & JSON_FORCE_OBJECT)?>;\n</script>\n\n<form action=\"\" method=\"post\" enctype=\"multipart/form-data\" ng-controller=\"WebhooksIncomingCtrl as webhookincomingsctl\" ng-submit=\"webhookincomingsctl.updateContinuous()\" ng-init='webhookincomingsctl.setConditions()'>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhwebhooks/form_incoming.tpl.php'));?>\n\n    <?php include(erLhcoreClassDesign::designtpl('lhkernel/csfr_token.tpl.php'));?>\n\n    <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Update_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Save_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Save & Exit');?>\"/>\n        <input type=\"submit\" class=\"btn btn-secondary\" name=\"Cancel_action\" value=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('system/buttons','Cancel');?>\"/>\n    </div>\n\n</form>\n"], "filenames": ["lhc_web/design/defaulttheme/tpl/lhviews/loadview.tpl.php", "lhc_web/design/defaulttheme/tpl/lhviews/save_chat_view.tpl.php", "lhc_web/design/defaulttheme/tpl/lhwebhooks/edit.tpl.php", "lhc_web/design/defaulttheme/tpl/lhwebhooks/editincoming.tpl.php"], "buggy_code_start_loc": [5, 12, 1, 1], "buggy_code_end_loc": [6, 13, 2, 2], "fixing_code_start_loc": [5, 12, 1, 1], "fixing_code_end_loc": [6, 13, 2, 2], "type": "CWE-79", "message": "livehelperchat is vulnerable to Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')", "other": {"cve": {"id": "CVE-2022-0253", "sourceIdentifier": "security@huntr.dev", "published": "2022-01-17T14:15:08.047", "lastModified": "2022-01-24T20:22:21.920", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "livehelperchat is vulnerable to Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')"}, {"lang": "es", "value": "livehelperchat es vulnerable a una Neutralizaci\u00f3n Inapropiada de la Entrada Durante la Generaci\u00f3n de la P\u00e1gina Web (\"Cross-site Scripting\")"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 5.4, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.3, "impactScore": 2.7}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "LOW", "baseScore": 7.1, "baseSeverity": "HIGH"}, "exploitabilityScore": 2.8, "impactScore": 4.2}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 3.5}, "baseSeverity": "LOW", "exploitabilityScore": 6.8, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}, {"source": "security@huntr.dev", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:livehelperchat:livehelperchat:*:*:*:*:*:*:*:*", "versionEndExcluding": "3.91", "matchCriteriaId": "9172C7E8-0F3E-4BB3-B2AD-29E43DDF0B45"}]}]}], "references": [{"url": "https://github.com/livehelperchat/livehelperchat/commit/407d0b1a1fa56fa6f824a19092774f10f4880437", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/ac7f7eba-ee0b-4a50-bd89-29fd9b3e8303", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/livehelperchat/livehelperchat/commit/407d0b1a1fa56fa6f824a19092774f10f4880437"}}