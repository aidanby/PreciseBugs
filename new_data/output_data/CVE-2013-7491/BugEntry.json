{"buggy_code": ["=head1 NAME\n\nDBI::Changes - List of significant changes to the DBI\n\n(As of $Date$ $Revision$)\n\n=encoding ISO8859-1\n\n=cut\n\n=head2 Changes in DBI 1.628 - 24th June 2013\n\n    Fixed missing fields on partial insert via DBI::DBD::SqlEngine\n        engines (DBD::CSV, DBD::DBM etc.) [H.Merijn Brand, Jens Rehsack]\n\n    Added support for finding tables in multiple directories\n        via new DBD::File f_dir_search attribute [H.Merijn Brand]\n    Enable compiling by C++ RT#84285 [Kurt Jaeger]\n\n    Typo fixes in pod and comment [David Steinbrunner]\n    Change DBI's docs from svn to git [H.Merijn Brand]\n    Clarify bind_col TYPE attribute is sticky [Martin J. Evans]\n    Spelling fixes [Ville Skytt\u00e4]\n    Changed $VERSIONs to hardcoded strings [H.Merijn Brand]\n\n=head2 Changes in DBI 1.627 - 16th May 2013\n\n    Fixed VERSION regression in DBI::SQL::Nano [Tim Bunce]\n\n=head2 Changes in DBI 1.626 - 15th May 2013\n\n    Fixed pod text/link was reversed in a few cases RT#85168\n        [H.Merijn Brand]\n\n    Handle aliasing of STORE'd attributes in DBI::DBD::SqlEngine\n        [Jens Rehsack]\n\n    Updated repository URI to git [Jens Rehsack]\n\n    Fixed skip() count arg in t/48dbi_dbd_sqlengine.t [Tim Bunce]\n\n=head2 Changes in DBI 1.625 (svn r15595) 28th March 2013\n\n  Fixed heap-use-after-free during global destruction RT#75614\n    thanks to Reini Urban.\n  Fixed ignoring RootClass attribute during connect() by\n    DBI::DBD::SqlEngine reported in RT#84260 by Michael Schout\n\n=head2 Changes in DBI 1.624 (svn r15576) 22nd March 2013\n\n  Fixed Gofer for hash randomization in perl 5.17.10+ RT#84146\n\n  Clarify docs for can() re RT#83207\n\n=head2 Changes in DBI 1.623 (svn r15547) 2nd Jan 2013\n\n  Fixed RT#64330 - ping wipes out errstr (Martin J. Evans).\n  Fixed RT#75868 - DBD::Proxy shouldn't call connected() on the server.\n  Fixed RT#80474 - segfault in DESTROY with threads.\n  Fixed RT#81516 - Test failures due to hash randomisation in perl 5.17.6\n    thanks to Jens Rehsack and H.Merijn Brand and feedback on IRC\n  Fixed RT#81724 - Handle copy-on-write scalars (sprout)\n  Fixed unused variable / self-assignment compiler warnings.\n  Fixed default table_info in DBI::DBD::SqlEngine which passed NAMES\n    attribute instead of NAME to DBD::Sponge RT72343 (Martin J. Evans)\n\n  Corrected a spelling error thanks to Chris Sanders.\n  Corrected typo in DBI->installed_versions docs RT#78825\n    thanks to Jan Dubois.\n\n  Refactored table meta information management from DBD::File into\n    DBI::DBD::SqlEngine (H.Merijn Brand, Jens Rehsack)\n  Prevent undefined f_dir being used in opendir (H.Merijn Brand)\n\n  Added logic to force destruction of children before parents\n    during global destruction. See RT#75614.\n  Added DBD::File Plugin-Support for table names and data sources\n    (Jens Rehsack, #dbi Team)\n  Added new tests to 08keeperr for RT#64330\n    thanks to Kenichi Ishigaki.\n  Added extra internal handle type check, RT#79952\n    thanks to Reini Urban.\n  Added cubrid_ registered prefix for DBD::cubrid, RT#78453\n\n  Removed internal _not_impl method (Martin J. Evans).\n\n  NOTE: The \"old-style\" DBD::DBM attributes 'dbm_ext' and 'dbm_lockfile'\n    have been deprecated for several years and their use will now generate\n    a warning.\n\n=head2 Changes in DBI 1.622 (svn r15327) 6th June 2012\n\n  Fixed lack of =encoding in non-ASCII pod docs. RT#77588\n\n  Corrected typo in DBI::ProfileDumper thanks to Finn Hakansson.\n\n=head2 Changes in DBI 1.621 (svn r15315) 21st May 2012\n\n  Fixed segmentation fault when a thread is created from\n    within another thread RT#77137, thanks to Dave Mitchell.\n  Updated previous Changes to credit Booking.com for sponsoring\n    Dave Mitchell's recent DBI optimization work.\n\n=head2 Changes in DBI 1.620 (svn r15300) 25th April 2012\n\n  Modified column renaming in fetchall_arrayref, added in 1.619,\n    to work on column index numbers not names (an incompatible change).\n  Reworked the fetchall_arrayref documentation.\n  Hash slices in fetchall_arrayref now detect invalid column names.\n\n=head2 Changes in DBI 1.619 (svn r15294) 23rd April 2012\n\n  Fixed the connected method to stop showing the password in\n    trace file (Martin J. Evans).\n  Fixed _install_method to set CvFILE correctly\n    thanks to sprout RT#76296\n  Fixed SqlEngine \"list_tables\" thanks to David McMath\n    and Norbert Gruener. RT#67223 RT#69260\n\n  Optimized DBI method dispatch thanks to Dave Mitchell.\n  Optimized driver access to DBI internal state thanks to Dave Mitchell.\n  Optimized driver access to handle data thanks to Dave Mitchell.\n    Dave's work on these optimizations was sponsored by Booking.com.\n  Optimized fetchall_arrayref with hash slice thanks\n    to Dagfinn Ilmari Manns\u00e5ker. RT#76520\n  Allow renaming columns in fetchall_arrayref hash slices\n    thanks to Dagfinn Ilmari Manns\u00e5ker. RT#76572\n  Reserved snmp_ and tree_ for DBD::SNMP and DBD::TreeData\n\n=head2 Changes in DBI 1.618 (svn r15170) 25rd February 2012\n\n  Fixed compiler warnings in Driver_xst.h (Martin J. Evans)\n  Fixed compiler warning in DBI.xs (H.Merijn Brand)\n  Fixed Gofer tests failing on Windows RT74975 (Manoj Kumar)\n  Fixed my_ctx compile errors on Windows (Dave Mitchell)\n\n  Significantly optimized method dispatch via cache (Dave Mitchell)\n  Significantly optimized DBI internals for threads (Dave Mitchell)\n    Dave's work on these optimizations was sponsored by Booking.com.\n  Xsub to xsub calling optimization now enabled for threaded perls.\n  Corrected typo in example in docs (David Precious)\n  Added note that calling clone() without an arg may warn in future.\n  Minor changes to the install_method() docs in DBI::DBD.\n  Updated dbipport.h from Devel::PPPort 3.20\n\n=head2 Changes in DBI 1.617 (svn r15107) 30th January 2012\n\n  NOTE: The officially supported minimum perl version will change\n  from perl 5.8.1 (2003) to perl 5.8.3 (2004) in a future release.\n  (The last change, from perl 5.6 to 5.8.1, was announced\n  in July 2008 and implemented in DBI 1.611 in April 2010.)\n\n  Fixed ParamTypes example in the pod (Martin J. Evans)\n  Fixed the definition of ArrayTupleStatus and remove confusion over\n    rows affected in list context of execute_array (Martin J. Evans)\n  Fixed sql_type_cast example and typo in errors (Martin J. Evans)\n  Fixed Gofer error handling for keeperr methods like ping (Tim Bunce)\n  Fixed $dbh->clone({}) RT73250 (Tim Bunce)\n  Fixed is_nested_call logic error RT73118 (Reini Urban)\n\n  Enhanced performance for threaded perls (Dave Mitchell, Tim Bunce)\n    Dave's work on this optimization was sponsored by Booking.com.\n  Enhanced and standardized driver trace level mechanism (Tim Bunce)\n  Removed old code that was an inneffective attempt to detect\n    people doing DBI->{Attrib}.\n  Clear ParamValues on bind_param param count error RT66127 (Tim Bunce)\n  Changed DBI::ProxyServer to require DBI at compile-time RT62672 (Tim Bunce)\n\n  Added pod for default_user to DBI::DBD (Martin J. Evans)\n  Added CON, ENC and DBD trace flags and extended 09trace.t (Martin J. Evans)\n  Added TXN trace flags and applied CON and TXN to relevant methods (Tim Bunce)\n  Added some more fetchall_arrayref(..., $maxrows) tests (Tim Bunce)\n  Clarified docs for fetchall_arrayref called on an inactive handle.\n  Clarified docs for clone method (Tim Bunce)\n  Added note to DBI::Profile about async queries (Marcel Gr\u00fcnauer).\n  Reserved spatialite_ as a driver prefix for DBD::Spatialite\n  Reserved mo_ as a driver prefix for DBD::MO\n  Updated link to the SQL Reunion 95 docs, RT69577 (Ash Daminato)\n  Changed links for DBI recipes. RT73286 (Martin J. Evans)\n\n=head2 Changes in DBI 1.616 (svn r14616) 30th December 2010\n\n  Fixed spurious dbi_profile lines written to the log when\n    profiling is enabled and a trace flag, like SQL, is used.\n  Fixed to recognize SQL::Statement errors even if instantiated\n    with RaiseError=0 (Jens Rehsack)\n  Fixed RT#61513 by catching attribute assignment to tied table access\n    interface (Jens Rehsack)\n  Fixing some misbehavior of DBD::File when running within the Gofer\n    server.\n  Fixed compiler warnings RT#62640\n\n  Optimized connect() to remove redundant FETCH of \\%attrib values.\n  Improved initialization phases in DBI::DBD::SqlEngine (Jens Rehsack)\n\n  Added DBD::Gofer::Transport::corostream. An experimental proof-of-concept\n    transport that enables asynchronous database calls with few code changes.\n    It enables asynchronous use of DBI frameworks like DBIx::Class.\n\n  Added additional notes on DBDs which avoid creating a statement in\n    the do() method and the effects on error handlers (Martin J. Evans)\n  Adding new attribute \"sql_dialect\" to DBI::DBD::SqlEngine to allow\n    users control used SQL dialect (ANSI, CSV or AnyData), defaults to\n    CSV (Jens Rehsack)\n  Add documentation for DBI::DBD::SqlEngine attributes (Jens Rehsack)\n  Documented dbd_st_execute return (Martin J. Evans)\n  Fixed typo in InactiveDestroy thanks to Emmanuel Rodriguez.\n\n=head2 Changes in DBI 1.615 (svn r14438) 21st September 2010\n\n  Fixed t/51dbm_file for file/directory names with whitespaces in them\n    RT#61445 (Jens Rehsack)\n  Fixed compiler warnings from ignored hv_store result (Martin J. Evans)\n  Fixed portability to VMS (Craig A. Berry)\n\n=head2 Changes in DBI 1.614 (svn r14408) 17th September 2010\n\n  Fixed bind_param () in DBI::DBD::SqlEngine (rt#61281)\n  Fixed internals to not refer to old perl symbols that\n    will no longer be visible in perl >5.13.3 (Andreas Koenig)\n    Many compiled drivers are likely to need updating.\n  Fixed issue in DBD::File when absolute filename is used as table name\n    (Jens Rehsack)\n  Croak manually when file after tie doesn't exists in DBD::DBM\n    when it have to exists (Jens Rehsack)\n  Fixed issue in DBD::File when users set individual file name for tables\n    via f_meta compatibility interface - reported by H.Merijn Brand while\n    working on RT#61168 (Jens Rehsack)\n\n  Changed 50dbm_simple to simplify and fix problems (Martin J. Evans)\n  Changed 50dbm_simple to skip aggregation tests when not using\n    SQL::Statement (Jens Rehsack)\n  Minor speed improvements in DBD::File (Jens Rehsack)\n\n  Added $h->{AutoInactiveDestroy} as simpler safer form of\n    $h->{InactiveDestroy} (David E. Wheeler)\n  Added ability for parallel testing \"prove -j4 ...\" (Jens Rehsack)\n  Added tests for delete in DBM (H.Merijn Brand)\n  Added test for absolute filename as table to 51dbm_file (Jens Rehsack)\n  Added two initialization phases to DBI::DBD::SqlEngine (Jens Rehsack)\n  Added improved developers documentation for DBI::DBD::SqlEngine\n    (Jens Rehsack)\n  Added guides how to write DBI drivers using DBI::DBD::SqlEngine\n    or DBD::File (Jens Rehsack)\n  Added register_compat_map() and table_meta_attr_changed() to\n    DBD::File::Table to support clean fix of RT#61168 (Jens Rehsack)\n\n=head2 Changes in DBI 1.613 (svn r14271) 22nd July 2010\n\n  Fixed Win32 prerequisite module from PathTools to File::Spec.\n\n  Changed attribute headings and fixed references in DBI pod (Martin J. Evans)\n  Corrected typos in DBI::FAQ and DBI::ProxyServer (Ansgar Burchardt)\n\n=head2 Changes in DBI 1.612 (svn r14254) 16th July 2010\n\nNOTE: This is a minor release for the DBI core but a major release for\nDBD::File and drivers that depend on it, like DBD::DBM and DBD::CSV.\n\nThis is also the first release where the bulk of the development work\nhas been done by other people. I'd like to thank (in no particular order)\nJens Rehsack, Martin J. Evans, and H.Merijn Brand for all their contributions.\n\n  Fixed DBD::File's {ChopBlank} handling (it stripped \\s instead of space\n    only as documented in DBI) (H.Merijn Brand)\n  Fixed DBD::DBM breakage with SQL::Statement (Jens Rehsack, fixes RT#56561)\n  Fixed DBD::File file handle leak (Jens Rehsack)\n  Fixed problems in 50dbm.t when running tests with multiple\n    dbms (Martin J. Evans)\n  Fixed DBD::DBM bugs found during tests (Jens Rehsack)\n  Fixed DBD::File doesn't find files without extensions under some\n    circumstances (Jens Rehsack, H.Merijn Brand, fixes RT#59038)\n\n  Changed Makefile.PL to modernize with CONFLICTS, recommended dependencies\n    and resources (Jens Rehsack)\n  Changed DBI::ProfileDumper to rename any existing profile file by\n    appending .prev, instead of overwriting it.\n  Changed DBI::ProfileDumper::Apache to work in more configurations\n    including vhosts using PerlOptions +Parent.\n  Add driver_prefix method to DBI (Jens Rehsack)\n\n  Added more tests to 50dbm_simple.t to prove optimizations in\n    DBI::SQL::Nano and SQL::Statement (Jens Rehsack)\n  Updated tests to cover optional installed SQL::Statement (Jens Rehsack)\n  Synchronize API between SQL::Statement and DBI::SQL::Nano (Jens Rehsack)\n  Merged some optimizations from SQL::Statement into DBI::SQL::Nano\n    (Jens Rehsack)\n  Added basic test for DBD::File (H.Merijn Brand, Jens Rehsack)\n  Extract dealing with Perl SQL engines from DBD::File into\n    DBI::DBD::SqlEngine for better subclassing of 3rd party non-db DBDs\n    (Jens Rehsack)\n\n  Updated and clarified documentation for finish method (Tim Bunce).\n  Changes to DBD::File for better English and hopefully better\n    explanation (Martin J. Evans)\n  Update documentation of DBD::DBM to cover current implementation,\n    tried to explain some things better and changes most examples to\n    preferred style of Merijn and myself (Jens Rehsack)\n  Added developer documentation (including a roadmap of future plans)\n    for DBD::File\n\n=head2 Changes in DBI 1.611 (svn r13935) 29th April 2010\n\n  NOTE: minimum perl version is now 5.8.1 (as announced in DBI 1.607)\n\n  Fixed selectcol_arrayref MaxRows attribute to count rows not values\n    thanks to Vernon Lyon.\n  Fixed DBI->trace(0, *STDERR); (H.Merijn Brand)\n    which tried to open a file named \"*main::STDERR\" in perl-5.10.x\n  Fixes in DBD::DBM for use under threads (Jens Rehsack)\n\n  Changed \"Issuing rollback() due to DESTROY without explicit disconnect\"\n    warning to not be issued if ReadOnly set for that dbh.\n\n  Added f_lock and f_encoding support to DBD::File (H.Merijn Brand)\n  Added ChildCallbacks => { ... } to Callbacks as a way to\n    specify Callbacks for child handles.\n    With tests added by David E. Wheeler.\n  Added DBI::sql_type_cast($value, $type, $flags) to cast a string value\n    to an SQL type. e.g. SQL_INTEGER effectively does $value += 0;\n    Has other options plus an internal interface for drivers.\n\n  Documentation changes:\n  Small fixes in the documentation of DBD::DBM (H.Merijn Brand)\n  Documented specification of type casting behaviour for bind_col()\n    based on DBI::sql_type_cast() and two new bind_col attributes\n    StrictlyTyped and DiscardString. Thanks to Martin Evans.\n  Document fetchrow_hashref() behaviour for functions,\n    aliases and duplicate names (H.Merijn Brand)\n  Updated DBI::Profile and DBD::File docs to fix pod nits\n    thanks to Frank Wiegand.\n  Corrected typos in Gopher documentation reported by Jan Krynicky.\n  Documented the Callbacks attribute thanks to David E. Wheeler.\n  Corrected the Timeout examples as per rt 50621 (Martin J. Evans).\n  Removed some internal broken links in the pod (Martin J. Evans)\n  Added Note to column_info for drivers which do not\n    support it (Martin J. Evans)\n  Updated dbipport.h to Devel::PPPort 3.19 (H.Merijn Brand)\n\n=head2 Changes in DBI 1.609 (svn r12816) 8th June 2009\n\n  Fixes to DBD::File (H.Merijn Brand)\n    added f_schema attribute\n    table names case sensitive when quoted, insensitive when unquoted\n    workaround a bug in SQL::Statement (temporary fix) related\n      to the \"You passed x parameters where y required\" error\n\n  Added ImplementorClass and Name info to the \"Issuing rollback() due to\n    DESTROY without explicit disconnect\" warning to identify the handle.\n    Applies to compiled drivers when they are recompiled.\n  Added DBI->visit_handles($coderef) method.\n  Added $h->visit_child_handles($coderef) method.\n  Added docs for column_info()'s COLUMN_DEF value.\n  Clarified docs on stickyness of data type via bind_param().\n  Clarified docs on stickyness of data type via bind_col().\n\n=head2 Changes in DBI 1.608 (svn r12742) 5th May 2009\n\n  Fixes to DBD::File (H.Merijn Brand)\n    bind_param () now honors the attribute argument\n    added f_ext attribute\n    File::Spec is always required. (CORE since 5.00405)\n    Fail and set errstr on parameter count mismatch in execute ()\n  Fixed two small memory leaks when running in mod_perl\n    one in DBI->connect and one in DBI::Gofer::Execute.\n    Both due to \"local $ENV{...};\" leaking memory.\n  Fixed DBD_ATTRIB_DELETE macro for driver authors\n    and updated DBI::DBD docs thanks to Martin J. Evans.\n  Fixed 64bit issues in trace messages thanks to Charles Jardine.\n  Fixed FETCH_many() method to work with drivers that incorrectly return\n    an empty list from $h->FETCH. Affected gofer.\n\n  Added 'sqlite_' as registered prefix for DBD::SQLite.\n  Corrected many typos in DBI docs thanks to Martin J. Evans.\n  Improved DBI::DBD docs thanks to H.Merijn Brand.\n\n=head2 Changes in DBI 1.607 (svn r11571) 22nd July 2008\n\n  NOTE: Perl 5.8.1 is now the minimum supported version.\n  If you need support for earlier versions send me a patch.\n\n  Fixed missing import of carp in DBI::Gofer::Execute.\n\n  Added note to docs about effect of execute(@empty_array).\n  Clarified docs for ReadOnly thanks to Martin Evans.\n\n=head2 Changes in DBI 1.605 (svn r11434) 16th June 2008\n\n  Fixed broken DBIS macro with threads on big-endian machines\n    with 64bit ints but 32bit pointers. Ticket #32309.\n  Fixed the selectall_arrayref, selectrow_arrayref, and selectrow_array\n    methods that get embedded into compiled drivers to use the\n    inner sth handle when passed a $sth instead of an sql string.\n    Drivers will need to be recompiled to pick up this change.\n  Fixed leak in neat() for some kinds of values thanks to Rudolf Lippan.\n  Fixed DBI::PurePerl neat() to behave more like XS neat().\n\n  Increased default $DBI::neat_maxlen from 400 to 1000.\n  Increased timeout on tests to accommodate very slow systems.\n  Changed behaviour of trace levels 1..4 to show less information\n    at lower levels.\n  Changed the format of the key used for $h->{CachedKids}\n    (which is undocumented so you shouldn't depend on it anyway)\n  Changed gofer error handling to avoid duplicate error text in errstr.\n  Clarified docs re \":N\" style placeholders.\n  Improved gofer retry-on-error logic and refactored to aid subclassing.\n  Improved gofer trace output in assorted ways.\n\n  Removed the beeps \"\\a\" from Makefile.PL warnings.\n  Removed check for PlRPC-modules from Makefile.PL\n\n  Added sorting of ParamValues reported by ShowErrorStatement\n    thanks to to Rudolf Lippan.\n  Added cache miss trace message to DBD::Gofer transport class.\n  Added $drh->dbixs_revision method.\n  Added explicit LICENSE specification (perl) to META.yaml\n\n=head2 Changes in DBI 1.604 (svn rev 10994) 24th March 2008\n\n  Fixed fetchall_arrayref with $max_rows argument broken in 1.603,\n    thanks to Greg Sabino Mullane.\n  Fixed a few harmless compiler warnings on cygwin.\n\n=head2 Changes in DBI 1.603\n\n  Fixed pure-perl fetchall_arrayref with $max_rows argument\n    to not error when fetching after all rows already fetched.\n    (Was fixed for compiled drivers back in DBI 1.31.)\n    Thanks to Mark Overmeer.\n  Fixed C sprintf formats and casts, fixing compiler warnings.\n\n  Changed dbi_profile() to accept a hash of profiles and apply to all.\n  Changed gofer stream transport to improve error reporting.\n  Changed gofer test timeout to avoid spurious failures on slow systems.\n\n  Added options to t/85gofer.t so it's more useful for manual testing.\n\n=head2 Changes in DBI 1.602 (svn rev 10706)  8th February 2008\n\n  Fixed potential coredump if stack reallocated while calling back\n    into perl from XS code. Thanks to John Gardiner Myers.\n  Fixed DBI::Util::CacheMemory->new to not clear the cache.\n  Fixed avg in DBI::Profile as_text() thanks to Abe Ingersoll.\n  Fixed DBD::DBM bug in push_names thanks to J M Davitt.\n  Fixed take_imp_data for some platforms thanks to Jeffrey Klein.\n  Fixed docs tie'ing CacheKids (ie LRU cache) thanks to Peter John Edwards.\n\n  Expanded DBI::DBD docs for driver authors thanks to Martin Evans.\n  Enhanced t/80proxy.t test script.\n  Enhanced t/85gofer.t test script thanks to Stig.\n  Enhanced t/10examp.t test script thanks to David Cantrell.\n  Documented $DBI::stderr as the default value of err for internal errors.\n\n  Gofer changes:\n    track_recent now also keeps track of N most recent errors.\n    The connect method is now also counted in stats.\n\n=head2 Changes in DBI 1.601 (svn rev 10103),  21st October 2007\n\n  Fixed t/05thrclone.t to work with Test::More >= 0.71\n    thanks to Jerry D. Hedden and Michael G Schwern.\n  Fixed DBI for VMS thanks to Peter (Stig) Edwards.\n\n  Added client-side caching to DBD::Gofer. Can use any cache with\n    get($k)/set($k,$v) methods, including all the Cache and Cache::Cache\n    distribution modules plus Cache::Memcached, Cache::FastMmap etc.\n    Works for all transports. Overridable per handle.\n\n  Added DBI::Util::CacheMemory for use with DBD::Gofer caching.\n    It's a very fast and small strict subset of Cache::Memory.\n\n=head2 Changes in DBI 1.59 (svn rev 9874),  23rd August 2007\n\n  Fixed DBI::ProfileData to unescape headers lines read from data file.\n  Fixed DBI::ProfileData to not clobber $_, thanks to Alexey Tourbin.\n  Fixed DBI::SQL::Nano to not clobber $_, thanks to Alexey Tourbin.\n  Fixed DBI::PurePerl to return undef for ChildHandles if weaken not available.\n  Fixed DBD::Proxy disconnect error thanks to Philip Dye.\n  Fixed DBD::Gofer::Transport::Base bug (typo) in timeout code.\n  Fixed DBD::Proxy rows method thanks to Philip Dye.\n  Fixed dbiprof compile errors, thanks to Alexey Tourbin.\n  Fixed t/03handle.t to skip some tests if ChildHandles not available.\n\n  Added check_response_sub to DBI::Gofer::Execute\n\n=head2 Changes in DBI 1.58 (svn rev 9678),  25th June 2007\n\n  Fixed code triggering fatal error in bleadperl, thanks to Steve Hay.\n  Fixed compiler warning thanks to Jerry D. Hedden.\n  Fixed t/40profile.t to use int(dbi_time()) for systems like Cygwin where\n    time() seems to be rounded not truncated from the high resolution time.\n  Removed dump_results() test from t/80proxy.t.\n\n=head2 Changes in DBI 1.57 (svn rev 9639),  13th June 2007\n\n  Note: this release includes a change to the DBI::hash() function which will\n  now produce different values than before *if* your perl was built with 64-bit\n  'int' type (i.e. \"perl -V:intsize\" says intsize='8').  It's relatively rare\n  for perl to be configured that way, even on 64-bit systems.\n\n  Fixed XS versions of select*_*() methods to call execute()\n    fetch() etc., with inner handle instead of outer.\n  Fixed execute_for_fetch() to not cache errstr values\n    thanks to Bart Degryse.\n  Fixed unused var compiler warning thanks to JDHEDDEN.\n  Fixed t/86gofer_fail tests to be less likely to fail falsely.\n\n  Changed DBI::hash to return 'I32' type instead of 'int' so results are\n    portable/consistent regardless of size of the int type.\n  Corrected timeout example in docs thanks to Egmont Koblinger.\n  Changed t/01basic.t to warn instead of failing when it detects\n    a problem with Math::BigInt (some recent versions had problems).\n\n  Added support for !Time and !Time~N to DBI::Profile Path. See docs.\n  Added extra trace info to connect_cached thanks to Walery Studennikov.\n  Added non-random (deterministic) mode to DBI_GOFER_RANDOM mechanism.\n  Added DBIXS_REVISION macro that drivers can use.\n  Added more docs for private_attribute_info() method.\n\n  DBI::Profile changes:\n    dbi_profile() now returns ref to relevant leaf node.\n    Don't profile DESTROY during global destruction.\n    Added as_node_path_list() and as_text() methods.\n  DBI::ProfileDumper changes:\n    Don't write file if there's no profile data.\n    Uses full natural precision when saving data (was using %.6f)\n    Optimized flush_to_disk().\n    Locks the data file while writing.\n    Enabled filename to be a code ref for dynamic names.\n  DBI::ProfileDumper::Apache changes:\n    Added Quiet=>1 to avoid write to STDERR in flush_to_disk().\n    Added Dir=>... to specify a writable destination directory.\n    Enabled DBI_PROFILE_APACHE_LOG_DIR for mod_perl 1 as well as 2.\n    Added parent pid to default data file name.\n  DBI::ProfileData changes:\n    Added DeleteFiles option to rename & delete files once read.\n    Locks the data files while reading.\n    Added ability to sort by Path elements.\n  dbiprof changes:\n    Added --dumpnodes and --delete options.\n  Added/updated docs for both DBI::ProfileDumper && ::Apache.\n\n=head2 Changes in DBI 1.56 (svn rev 9660),  18th June 2007\n\n  Fixed printf arg warnings thanks to JDHEDDEN.\n  Fixed returning driver-private sth attributes via gofer.\n\n  Changed pod docs docs to use =head3 instead of =item\n    so now in html you get links to individual methods etc.\n  Changed default gofer retry_limit from 2 to 0.\n  Changed tests to workaround Math::BigInt broken versions.\n  Changed dbi_profile_merge() to dbi_profile_merge_nodes()\n    old name still works as an alias for the new one.\n  Removed old DBI internal sanity check that's no longer valid\n    causing \"panic: DESTROY (dbih_clearcom)\" when tracing enabled\n\n  Added DBI_GOFER_RANDOM env var that can be use to trigger random\n    failures and delays when executing gofer requests. Designed to help\n    test automatic retry on failures and timeout handling.\n  Added lots more docs to all the DBD::Gofer and DBI::Gofer classes.\n\n=head2 Changes in DBI 1.55 (svn rev 9504),  4th May 2007\n\n  Fixed set_err() so HandleSetErr hook is executed reliably, if set.\n  Fixed accuracy of profiling when perl configured to use long doubles.\n  Fixed 42prof_data.t on fast systems with poor timers thanks to Malcolm Nooning.\n  Fixed potential corruption in selectall_arrayref and selectrow_arrayref\n    for compiled drivers, thanks to Rob Davies.\n    Rebuild your compiled drivers after installing DBI.\n\n  Changed some handle creation code from perl to C code,\n    to reduce handle creation cost by ~20%.\n  Changed internal implementation of the CachedKids attribute\n    so it's a normal handle attribute (and initially undef).\n  Changed connect_cached and prepare_cached to avoid a FETCH method call,\n    and thereby reduced cost by ~5% and ~30% respectively.\n  Changed _set_fbav to not croak when given a wrongly sized array,\n    it now warns and adjusts the row buffer to match.\n  Changed some internals to improve performance with threaded perls.\n  Changed DBD::NullP to be slightly more useful for testing.\n  Changed File::Spec prerequisite to not require a minimum version.\n  Changed tests to work with other DBMs thanks to ZMAN.\n  Changed ex/perl_dbi_nulls_test.pl to be more descriptive.\n\n  Added more functionality to the (undocumented) Callback mechanism.\n    Callbacks can now elect to provide a value to be returned, in which case\n    the method won't be called. A callback for \"*\" is applied to all methods\n    that don't have their own callback.\n  Added $h->{ReadOnly} attribute.\n  Added support for DBI Profile Path to contain refs to scalars\n    which will be de-ref'd for each profile sample.\n  Added dbilogstrip utility to edit DBI logs for diff'ing (gets installed)\n  Added details for SQLite 3.3 to NULL handling docs thanks to Alex Teslik.\n  Added take_imp_data() to DBI::PurePerl.\n\n  Gofer related changes:\n    Fixed gofer pipeone & stream transports to avoid risk of hanging.\n    Improved error handling and tracing significantly.\n    Added way to generate random 1-in-N failures for methods.\n    Added automatic retry-on-error mechanism to gofer transport base class.\n    Added tests to show automatic retry mechanism works a treat!\n    Added go_retry_hook callback hook so apps can fine-tune retry behaviour.\n    Added header to request and response packets for sanity checking\n      and to enable version skew between client and server.\n    Added forced_single_resultset, max_cached_sth_per_dbh and max_cached_dbh_per_drh\n      to gofer executor config.\n    Driver-private methods installed with install_method are now proxied.\n    No longer does a round-trip to the server for methods it knows\n      have not been overridden by the remote driver.\n    Most significant aspects of gofer behaviour are controlled by policy mechanism.\n    Added policy-controlled caching of results for some methods, such as schema metadata.\n    The connect_cached and prepare_cached methods cache on client and server.\n    The bind_param_array and execute_array methods are now supported.\n    Worked around a DBD::Sybase bind_param bug (which is fixed in DBD::Sybase 1.07)\n    Added goferperf.pl utility (doesn't get installed).\n    Many other assorted Gofer related bug fixes, enhancements and docs.\n    The http and mod_perl transports have been remove to their own distribution.\n    Client and server will need upgrading together for this release.\n\n=head2 Changes in DBI 1.54 (svn rev 9157),  23rd February 2007\n\n  NOTE: This release includes the 'next big thing': DBD::Gofer.\n  Take a look!\n\n  WARNING: This version has some subtle changes in DBI internals.\n  It's possible, though doubtful, that some may affect your code.\n  I recommend some extra testing before using this release.\n  Or perhaps I'm just being over cautious...\n\n  Fixed type_info when called for multiple dbh thanks to Cosimo Streppone.\n  Fixed compile warnings in bleadperl on freebsd-6.1-release\n    and solaris 10g thanks to Philip M. Gollucci.\n  Fixed to compile for perl built with -DNO_MATHOMS thanks to Jerry D. Hedden.\n  Fixed to work for bleadperl (r29544) thanks to Nicholas Clark.\n    Users of Perl >= 5.9.5 will require DBI >= 1.54.\n  Fixed rare error when profiling access to $DBI::err etc tied variables.\n  Fixed DBI::ProfileDumper to not be affected by changes to $/ and $,\n    thanks to Michael Schwern.\n\n  Changed t/40profile.t to skip tests for perl < 5.8.0.\n  Changed setting trace file to no longer write \"Trace file set\" to new file.\n  Changed 'handle cleared whilst still active' warning for dbh\n    to only be given for dbh that have active sth or are not AutoCommit.\n  Changed take_imp_data to call finish on all Active child sth.\n  Changed DBI::PurePerl trace() method to be more consistent.\n  Changed set_err method to effectively not append to errstr if the new errstr\n    is the same as the current one.\n  Changed handle factory methods, like connect, prepare, and table_info,\n    to copy any error/warn/info state of the handle being returned\n    up into the handle the method was called on.\n  Changed row buffer handling to not alter NUM_OF_FIELDS if it's\n    inconsistent with number of elements in row buffer array.\n  Updated DBI::DBD docs re handling multiple result sets.\n  Updated DBI::DBD docs for driver authors thanks to Ammon Riley\n    and Dean Arnold.\n  Updated column_info docs to note that if a table doesn't exist\n    you get an sth for an empty result set and not an error.\n\n  Added new DBD::Gofer 'stateless proxy' driver and framework,\n    and the DBI test suite is now also executed via DBD::Gofer,\n    and DBD::Gofer+DBI::PurePerl, in addition to DBI::PurePerl.\n  Added ability for trace() to support filehandle argument,\n    including tracing into a string, thanks to Dean Arnold.\n  Added ability for drivers to implement func() method\n    so proxy drivers can proxy the func method itself.\n  Added SQL_BIGINT type code (resolved to the ODBC/JDBC value (-5))\n  Added $h->private_attribute_info method.\n\n=head2 Changes in DBI 1.53 (svn rev 7995),   31st October 2006\n\n  Fixed checks for weaken to work with early 5.8.x versions\n  Fixed DBD::Proxy handling of some methods, including commit and rollback.\n  Fixed t/40profile.t to be more insensitive to long double precision.\n  Fixed t/40profile.t to be insensitive to small negative shifts in time\n    thanks to Jamie McCarthy.\n  Fixed t/40profile.t to skip tests for perl < 5.8.0.\n  Fixed to work with current 'bleadperl' (~5.9.5) thanks to Steve Peters.\n    Users of Perl >= 5.9.5 will require DBI >= 1.53.\n  Fixed to be more robust against drivers not handling multiple result\n    sets properly, thanks to Gisle Aas.\n\n  Added array context support to execute_array and execute_for_fetch\n    methods which returns executed tuples and rows affected.\n  Added Tie::Cache::LRU example to docs thanks to Brandon Black.\n\n=head2 Changes in DBI 1.52 (svn rev 6840),   30th July 2006\n\n  Fixed memory leak (per handle) thanks to Nicholas Clark and Ephraim Dan.\n  Fixed memory leak (16 bytes per sth) thanks to Doru Theodor Petrescu.\n  Fixed execute_for_fetch/execute_array to RaiseError thanks to Martin J. Evans.\n  Fixed for perl 5.9.4. Users of Perl >= 5.9.4 will require DBI >= 1.52.\n\n  Updated DBD::File to 0.35 to match the latest release on CPAN.\n\n  Added $dbh->statistics_info specification thanks to Brandon Black.\n\n  Many changes and additions to profiling:\n    Profile Path can now uses sane strings instead of obscure numbers,\n    can refer to attributes, assorted magical values, and even code refs!\n    Parsing of non-numeric DBI_PROFILE env var values has changed.\n    Changed DBI::Profile docs extensively - many new features.\n    See DBI::Profile docs for more information.\n\n=head2 Changes in DBI 1.51 (svn rev 6475),   6th June 2006\n\n  Fixed $dbh->clone method 'signature' thanks to Jeffrey Klein.\n  Fixed default ping() method to return false if !$dbh->{Active}.\n  Fixed t/40profile.t to be insensitive to long double precision.\n  Fixed for perl 5.8.0's more limited weaken() function.\n  Fixed DBD::Proxy to not alter $@ in disconnect or AUTOLOADd methods.\n  Fixed bind_columns() to use return set_err(...) instead of die()\n    to report incorrect number of parameters, thanks to Ben Thul.\n  Fixed bind_col() to ignore undef as bind location, thanks to David Wheeler.\n  Fixed for perl 5.9.x for non-threaded builds thanks to Nicholas Clark.\n    Users of Perl >= 5.9.x will require DBI >= 1.51.\n  Fixed fetching of rows as hash refs to preserve utf8 on field names\n    from $sth->{NAME} thanks to Alexey Gaidukov.\n  Fixed build on Win32 (dbd_postamble) thanks to David Golden.\n\n  Improved performance for thread-enabled perls thanks to Gisle Aas.\n  Drivers can now use PERL_NO_GET_CONTEXT thanks to Gisle Aas.\n    Driver authors please read the notes in the DBI::DBD docs.\n  Changed DBI::Profile format to always include a percentage,\n    if not exiting then uses time between the first and last DBI call.\n  Changed DBI::ProfileData to be more forgiving of systems with\n    unstable clocks (where time may go backwards occasionally).\n  Clarified the 'Subclassing the DBI' docs.\n  Assorted minor changes to docs from comments on annocpan.org.\n  Changed Makefile.PL to avoid incompatible options for old gcc.\n\n  Added 'fetch array of hash refs' example to selectall_arrayref\n    docs thanks to Tom Schindl.\n  Added docs for $sth->{ParamArrays} thanks to Martin J. Evans.\n  Added reference to $DBI::neat_maxlen in TRACING section of docs.\n  Added ability for DBI::Profile Path to include attributes\n    and a summary of where the code was called from.\n\n=head2 Changes in DBI 1.50 (svn rev 2307),   13 December 2005\n\n  Fixed Makefile.PL options for gcc bug introduced in 1.49.\n  Fixed handle magic order to keep DBD::Oracle happy.\n  Fixed selectrow_array to return empty list on error.\n\n  Changed dbi_profile_merge() to be able to recurse and merge\n    sub-trees of profile data.\n\n  Added documentation for dbi_profile_merge(), including how to\n    measure the time spent inside the DBI for an http request.\n\n=head2 Changes in DBI 1.49 (svn rev 2287),   29th November 2005\n\n  Fixed assorted attribute handling bugs in DBD::Proxy.\n  Fixed croak() in DBD::NullP thanks to Sergey Skvortsov.\n  Fixed handling of take_imp_data() and dbi_imp_data attribute.\n  Fixed bugs in DBD::DBM thanks to Jeff Zucker.\n  Fixed bug in DBI::ProfileDumper thanks to Sam Tregar.\n  Fixed ping in DBD::Proxy thanks to George Campbell.\n  Fixed dangling ref in $sth after parent $dbh destroyed\n    with thanks to il@rol.ru for the bug report #13151\n  Fixed prerequisites to include Storable thanks to Michael Schwern.\n  Fixed take_imp_data to be more practical.\n\n  Change to require perl 5.6.1 (as advertised in 2003) not 5.6.0.\n  Changed internals to be more strictly coded thanks to Andy Lester.\n  Changed warning about multiple copies of Driver.xst found in @INC\n    to ignore duplicated directories thanks to Ed Avis.\n  Changed Driver.xst to enable drivers to define an dbd_st_prepare_sv\n    function where the statement parameter is an SV. That enables\n    compiled drivers to support SQL strings that are UTF-8.\n  Changed \"use DBI\" to only set $DBI::connect_via if not already set.\n  Changed docs to clarify pre-method clearing of err values.\n\n  Added ability for DBI::ProfileData to edit profile path on loading.\n    This enables aggregation of different SQL statements into the same\n    profile node - very handy when not using placeholders or when working\n    multiple separate tables for the same thing (ie logtable_2005_11_28)\n  Added $sth->{ParamTypes} specification thanks to Dean Arnold.\n  Added $h->{Callbacks} attribute to enable code hooks to be invoked\n    when certain methods are called. For example:\n    $dbh->{Callbacks}->{prepare} = sub { ... };\n    With thanks to David Wheeler for the kick start.\n  Added $h->{ChildHandles} (using weakrefs) thanks to Sam Tregar\n    I've recoded it in C so there's no significant performance impact.\n  Added $h->{Type} docs (returns 'dr', 'db', or 'st')\n  Adding trace message in DESTROY if InactiveDestroy enabled.\n  Added %drhs = DBI->installed_drivers();\n\n  Ported DBI::ProfileDumper::Apache to mod_perl2 RC5+\n    thanks to Philip M. Golluci\n\n=head2 Changes in DBI 1.48 (svn rev 928),    14th March 2005\n\n  Fixed DBI::DBD::Metadata generation of type_info_all thanks to Steffen Goeldner\n    (driver authors who have used it should rerun it).\n\n  Updated docs for NULL Value placeholders thanks to Brian Campbell.\n\n  Added multi-keyfield nested hash fetching to fetchall_hashref()\n    thanks to Zhuang (John) Li for polishing up my draft.\n  Added registered driver prefixes: amzn_ for DBD::Amazon and yaswi_ for DBD::Yaswi.\n\n\n=head2 Changes in DBI 1.47 (svn rev 854),    2nd February 2005\n\n  Fixed DBI::ProxyServer to not create pid files by default.\n    References: Ubuntu Security Notice USN-70-1, CAN-2005-0077\n    Thanks to Javier Fern\u00e1ndez-Sanguino Pe\u00f1a from the\n    Debian Security Audit Project, and Jonathan Leffler.\n  Fixed some tests to work with older Test::More versions.\n  Fixed setting $DBI::err/errstr in DBI::PurePerl.\n  Fixed potential undef warning from connect_cached().\n  Fixed $DBI::lasth handling for DESTROY so lasth points to\n    parent even if DESTROY called other methods.\n  Fixed DBD::Proxy method calls to not alter $@.\n  Fixed DBD::File problem with encoding pragma thanks to Erik Rijkers.\n\n  Changed error handling so undef errstr doesn't cause warning.\n  Changed DBI::DBD docs to use =head3/=head4 pod thanks to\n    Jonathan Leffler. This may generate warnings for perl 5.6.\n  Changed DBI::PurePerl to set autoflush on trace filehandle.\n  Changed DBD::Proxy to treat Username as a local attribute\n    so recent DBI version can be used with old DBI::ProxyServer.\n  Changed driver handle caching in DBD::File.\n  Added $GetInfoType{SQL_DATABASE_NAME} thanks to Steffen Goeldner.\n\n  Updated docs to recommend some common DSN string attributes.\n  Updated connect_cached() docs with issues and suggestions.\n  Updated docs for NULL Value placeholders thanks to Brian Campbell.\n  Updated docs for primary_key_info and primary_keys.\n  Updated docs to clarify that the default fetchrow_hashref behaviour,\n    of returning a ref to a new hash for each row, will not change.\n  Updated err/errstr/state docs for DBD authors thanks to Steffen Goeldner.\n  Updated handle/attribute docs for DBD authors thanks to Steffen Goeldner.\n  Corrected and updated LongReadLen docs thanks to Bart Lateur.\n  Added DBD::JDBC as a registered driver.\n\n=head2 Changes in DBI 1.46 (svn rev 584),    16th November 2004\n\n  Fixed parsing bugs in DBI::SQL::Nano thanks to Jeff Zucker.\n  Fixed a couple of bad links in docs thanks to Graham Barr.\n  Fixed test.pl Win32 undef warning thanks to H.Merijn Brand & David Repko.\n  Fixed minor issues in DBI::DBD::Metadata thanks to Steffen Goeldner.\n  Fixed DBI::PurePerl neat() to use double quotes for utf8.\n\n  Changed execute_array() definition, and default implementation,\n    to not consider scalar values for execute tuple count. See docs.\n  Changed DBD::File to enable ShowErrorStatement by default,\n    which affects DBD::File subclasses such as DBD::CSV and DBD::DBM.\n  Changed use DBI qw(:utils) tag to include $neat_maxlen.\n  Updated Roadmap and ToDo.\n\n  Added data_string_diff() data_string_desc() and data_diff()\n    utility functions to help diagnose Unicode issues.\n    All can be imported via the use DBI qw(:utils) tag.\n\n=head2 Changes in DBI 1.45 (svn rev 480),    6th October 2004\n\n  Fixed DBI::DBD code for drivers broken in 1.44.\n  Fixed \"Free to wrong pool\"/\"Attempt to free unreferenced scalar\" in FETCH.\n\n=head2 Changes in DBI 1.44 (svn rev 478),    5th October 2004\n\n  Fixed build issues on VMS thanks to Jakob Snoer.\n  Fixed DBD::File finish() method to return 1 thanks to Jan Dubois.\n  Fixed rare core dump during global destruction thanks to Mark Jason Dominus.\n  Fixed risk of utf8 flag persisting from one row to the next.\n\n  Changed bind_param_array() so it doesn't require all bind arrays\n    to have the same number of elements.\n  Changed bind_param_array() to error if placeholder number <= 0.\n  Changed execute_array() definition, and default implementation,\n    to effectively NULL-pad shorter bind arrays.\n  Changed execute_array() to return \"0E0\" for 0 as per the docs.\n  Changed execute_for_fetch() definition, and default implementation,\n    to return \"0E0\" for 0 like execute() and execute_array().\n  Changed Test::More prerequisite to Test::Simple (which is also the name\n    of the distribution both are packaged in) to work around ppm behaviour.\n\n  Corrected docs to say that get/set of unknown attribute generates\n    a warning and is no longer fatal. Thanks to Vadim.\n  Corrected fetchall_arrayref() docs example thanks to Drew Broadley.\n\n  Added $h1->swap_inner_handle($h2) sponsored by BizRate.com\n\n\n=head2 Changes in DBI 1.43 (svn rev 377),    2nd July 2004\n\n  Fixed connect() and connect_cached() RaiseError/PrintError\n    which would sometimes show \"(no error string)\" as the error.\n  Fixed compiler warning thanks to Paul Marquess.\n  Fixed \"trace level set to\" trace message thanks to H.Merijn Brand.\n  Fixed DBD::DBM $dbh->{dbm_tables}->{...} to be keyed by the\n    table name not the file name thanks to Jeff Zucker.\n  Fixed last_insert_id(...) thanks to Rudy Lippan.\n  Fixed propagation of scalar/list context into proxied methods.\n  Fixed DBI::Profile::DESTROY to not alter $@.\n  Fixed DBI::ProfileDumper new() docs thanks to Michael Schwern.\n  Fixed _load_class to propagate $@ thanks to Drew Taylor.\n  Fixed compile warnings on Win32 thanks to Robert Baron.\n  Fixed problem building with recent versions of MakeMaker.\n  Fixed DBD::Sponge not to generate warning with threads.\n  Fixed DBI_AUTOPROXY to work more than once thanks to Steven Hirsch.\n\n  Changed TraceLevel 1 to not show recursive/nested calls.\n  Changed getting or setting an invalid attribute to no longer be\n    a fatal error but generate a warning instead.\n  Changed selectall_arrayref() to call finish() if\n    $attr->{MaxRows} is defined.\n  Changed all tests to use Test::More and enhanced the tests thanks\n    to Stevan Little and Andy Lester. See http://qa.perl.org/phalanx/\n  Changed Test::More minimum prerequisite version to 0.40 (2001).\n  Changed DBI::Profile header to include the date and time.\n\n  Added DBI->parse_dsn($dsn) method.\n  Added warning if build directory path contains white space.\n  Added docs for parse_trace_flags() and parse_trace_flag().\n  Removed \"may change\" warnings from the docs for table_info(),\n    primary_key_info(), and foreign_key_info() methods.\n\n=head2 Changes in DBI 1.42 (svn rev 222),    12th March 2004\n\n  Fixed $sth->{NUM_OF_FIELDS} of non-executed statement handle\n    to be undef as per the docs (it was 0).\n  Fixed t/41prof_dump.t to work with perl5.9.1.\n  Fixed DBD_ATTRIB_DELETE macro thanks to Marco Paskamp.\n  Fixed DBI::PurePerl looks_like_number() and $DBI::rows.\n  Fixed ref($h)->can(\"foo\") to not croak.\n\n  Changed attributes (NAME, TYPE etc) of non-executed statement\n    handle to be undef instead of triggering an error.\n  Changed ShowErrorStatement to apply to more $dbh methods.\n  Changed DBI_TRACE env var so just does this at load time:\n    DBI->trace(split '=', $ENV{DBI_TRACE}, 2);\n  Improved \"invalid number of parameters\" error message.\n  Added DBI::common as base class for DBI::db, DBD::st etc.\n  Moved methods common to all handles into DBI::common.\n\n  Major tracing enhancement:\n\n  Added $h->parse_trace_flags(\"foo|SQL|7\") to map a group of\n    trace flags into the corresponding trace flag bits.\n  Added automatic calling of parse_trace_flags() if\n    setting the trace level to a non-numeric value:\n    $h->{TraceLevel}=\"foo|SQL|7\"; $h->trace(\"foo|SQL|7\");\n    DBI->connect(\"dbi:Driver(TraceLevel=SQL|foo):...\", ...);\n    Currently no trace flags have been defined.\n  Added to, and reworked, the trace documentation.\n  Added dbivport.h for driver authors to use.\n\n  Major driver additions that Jeff Zucker and I have been working on:\n\n  Added DBI::SQL::Nano a 'smaller than micro' SQL parser\n    with an SQL::Statement compatible API. If SQL::Statement\n    is installed then DBI::SQL::Nano becomes an empty subclass\n    of SQL::Statement, unless the DBI_SQL_NANO env var is true.\n  Added DBD::File, modified to use DBI::SQL::Nano.\n  Added DBD::DBM, an SQL interface to DBM files using DBD::File.\n\n  Documentation changes:\n\n  Corrected typos in docs thanks to Steffen Goeldner.\n  Corrected execute_for_fetch example thanks to Dean Arnold.\n\n=head2 Changes in DBI 1.41 (svn rev 130),    22nd February 2004\n\n  Fixed execute_for_array() so tuple_status parameter is optional\n    as per docs, thanks to Ed Avis.\n  Fixed execute_for_array() docs to say that it returns undef if\n    any of the execute() calls fail.\n  Fixed take_imp_data() test on m68k reported by Christian Hammers.\n  Fixed write_typeinfo_pm inconsistencies in DBI::DBD::Metadata\n    thanks to Andy Hassall.\n  Fixed $h->{TraceLevel} to not return DBI->trace trace level\n    which it used to if DBI->trace trace level was higher.\n\n  Changed set_err() to append to errstr, with a leading \"\\n\" if it's\n    not empty, so that multiple error/warning messages are recorded.\n  Changed trace to limit elements dumped when an array reference is\n    returned from a method to the max(40, $DBI::neat_maxlen/10)\n    so that fetchall_arrayref(), for example, doesn't flood the trace.\n  Changed trace level to be a four bit integer (levels 0 thru 15)\n    and a set of topic flags (no topics have been assigned yet).\n  Changed column_info() to check argument count.\n  Extended bind_param() TYPE attribute specification to imply\n    standard formating of value, eg SQL_DATE implies 'YYYY-MM-DD'.\n\n  Added way for drivers to indicate 'success with info' or 'warning'\n    by setting err to \"0\" for warning and \"\" for information.\n    Both values are false and so don't trigger RaiseError etc.\n    Thanks to Steffen Goeldner for the original idea.\n  Added $h->{HandleSetErr} = sub { ... } to be called at the\n    point that an error, warn, or info state is recorded.\n    The code can alter the err, errstr, and state values\n    (e.g., to promote an error to a warning, or the reverse).\n  Added $h->{PrintWarn} attribute to enable printing of warnings\n    recorded by the driver. Defaults to same value as $^W (perl -w).\n  Added $h->{ErrCount} attribute, incremented whenever an error is\n    recorded by the driver via set_err().\n  Added $h->{Executed} attribute, set if do()/execute() called.\n  Added \\%attr parameter to foreign_key_info() method.\n  Added ref count of inner handle to \"DESTROY ignored for outer\" msg.\n  Added Win32 build config checks to DBI::DBD thanks to Andy Hassall.\n  Added bind_col to Driver.xst so drivers can define their own.\n  Added TYPE attribute to bind_col and specified the expected\n    driver behaviour.\n\n  Major update to signal handling docs thanks to Lincoln Baxter.\n  Corrected dbiproxy usage doc thanks to Christian Hammers.\n  Corrected type_info_all index hash docs thanks to Steffen Goeldner.\n  Corrected type_info COLUMN_SIZE to chars not bytes thanks to Dean Arnold.\n  Corrected get_info() docs to include details of DBI::Const::GetInfoType.\n  Clarified that $sth->{PRECISION} is OCTET_LENGTH for char types.\n\n=head2 Changes in DBI 1.40,    7th January 2004\n\n  Fixed handling of CachedKids when DESTROYing threaded handles.\n  Fixed sql_user_name() in DBI::DBD::Metadata (used by write_getinfo_pm)\n    to use $dbh->{Username}. Driver authors please update your code.\n\n  Changed connect_cached() when running under Apache::DBI\n    to route calls to Apache::DBI::connect().\n\n  Added CLONE() to DBD::Sponge and DBD::ExampleP.\n  Added warning when starting a new thread about any loaded driver\n    which does not have a CLONE() function.\n  Added new prepare_cache($sql, \\%attr, 3) option to manage Active handles.\n  Added SCALE and NULLABLE support to DBD::Sponge.\n  Added missing execute() in fetchall_hashref docs thanks to Iain Truskett.\n  Added a CONTRIBUTING section to the docs with notes on creating patches.\n\n=head2 Changes in DBI 1.39,    27th November 2003\n\n  Fixed STORE to not clear error during nested DBI call, again/better,\n    thanks to Tony Bowden for the report and helpful test case.\n  Fixed DBI dispatch to not try to use AUTOLOAD for driver methods unless\n    the method has been declared (as methods should be when using AUTOLOAD).\n    This fixes a problem when the Attribute::Handlers module is loaded.\n  Fixed cwd check code to use $Config{path_sep} thanks to Steve Hay.\n  Fixed unqualified croak() calls thanks to Steffen Goeldner.\n  Fixed DBD::ExampleP TYPE and PRECISION attributes thanks to Tom Lowery.\n  Fixed tracing of methods that only get traced at high trace levels.\n\n  The level 1 trace no longer includes nested method calls so it generally\n    just shows the methods the application explicitly calls.\n  Added line to trace log (level>=4) when err/errstr is cleared.\n  Updated docs for InactiveDestroy and point out where and when the\n    trace includes the process id.\n  Update DBI::DBD docs thanks to Steffen Goeldner.\n  Removed docs saying that the DBI->data_sources method could be\n    passed a $dbh. The $dbh->data_sources method should be used instead.\n  Added link to 'DBI recipes' thanks to Giuseppe Maxia:\n    http://gmax.oltrelinux.com/dbirecipes.html (note that this\n    is not an endorsement that the recipies are 'optimal')\n\n  Note: There is a bug in perl 5.8.2 when configured with threads\n  and debugging enabled (bug #24463) which causes a DBI test to fail.\n\n=head2 Changes in DBI 1.38,    21th August 2003\n\n  NOTE: The DBI now requires perl version 5.6.0 or later.\n  (As per notice in DBI 1.33 released 27th February 2003)\n\n  Fixed spurious t/03handles failure on 64bit perls reported by H.Merijn Brand.\n  Fixed spurious t/15array failure on some perl versions thanks to Ed Avis.\n  Fixed build using dmake on windows thanks to Steffen Goeldner.\n  Fixed build on using some shells thanks to Gurusamy Sarathy.\n  Fixed ParamValues to only be appended to ShowErrorStatement if not empty.\n  Fixed $dbh->{Statement} not being writable by drivers in some cases.\n  Fixed occasional undef warnings on connect failures thanks to Ed Avis.\n  Fixed small memory leak when using $sth->{NAME..._hash}.\n  Fixed 64bit warnings thanks to Marian Jancar.\n  Fixed DBD::Proxy::db::DESTROY to not alter $@ thanks to Keith Chapman.\n  Fixed Makefile.PL status from WriteMakefile() thanks to Leon Brocard.\n\n  Changed \"Can't set ...->{Foo}: unrecognised attribute\" from an error to a\n    warning when running with DBI::ProxyServer to simplify upgrades.\n  Changed execute_array() to no longer require ArrayTupleStatus attribute.\n  Changed DBI->available_drivers to not hide DBD::Sponge.\n  Updated/moved placeholder docs to a better place thanks to Johan Vromans.\n  Changed dbd_db_do4 api in Driver.xst to match dbd_st_execute (return int,\n    not bool), relevant only to driver authors.\n  Changed neat(), and thus trace(), so strings marked as utf8 are presented\n    in double quotes instead of single quotes and are not sanitized.\n\n  Added $dbh->data_sources method.\n  Added $dbh->last_insert_id method.\n  Added $sth->execute_for_fetch($fetch_tuple_sub, \\@tuple_status) method.\n  Added DBI->installed_versions thanks to Jeff Zucker.\n  Added $DBI::Profile::ON_DESTROY_DUMP variable.\n  Added docs for DBD::Sponge thanks to Mark Stosberg.\n\n=head2 Changes in DBI 1.37,    15th May 2003\n\n  Fixed \"Can't get dbh->{Statement}: unrecognised attribute\" error in test\n    caused by change to perl internals in 5.8.0\n  Fixed to build with latest development perl (5.8.1@19525).\n  Fixed C code to use all ANSI declarations thanks to Steven Lembark.\n\n=head2 Changes in DBI 1.36,    11th May 2003\n\n  Fixed DBI->connect to carp instead of croak on 'old-style' usage.\n  Fixed connect(,,, { RootClass => $foo }) to not croak if module not found.\n  Fixed code generated by DBI::DBD::Metadata thanks to DARREN@cpan.org (#2270)\n  Fixed DBI::PurePerl to not reset $@ during method dispatch.\n  Fixed VMS build thanks to Michael Schwern.\n  Fixed Proxy disconnect thanks to Steven Hirsch.\n  Fixed error in DBI::DBD docs thanks to Andy Hassall.\n\n  Changed t/40profile.t to not require Time::HiRes.\n  Changed DBI::ProxyServer to load DBI only on first request, which\n    helps threaded server mode, thanks to Bob Showalter.\n  Changed execute_array() return value from row count to executed\n    tuple count, and now the ArrayTupleStatus attribute is mandatory.\n    NOTE: That is an API definition change that may affect your code.\n  Changed CompatMode attribute to also disable attribute 'quick FETCH'.\n  Changed attribute FETCH to be slightly faster thanks to Stas Bekman.\n\n  Added workaround for perl bug #17575 tied hash nested FETCH\n    thanks to Silvio Wanka.\n  Added Username and Password attributes to connect(..., \\%attr) and so\n    also embedded in DSN like \"dbi:Driver(Username=user,Password=pass):...\"\n    Username and Password can't contain \")\", \",\", or \"=\" characters.\n    The predence is DSN first, then \\%attr, then $user & $pass parameters,\n    and finally the DBI_USER & DBI_PASS environment variables.\n    The Username attribute is stored in the $dbh but the Password is not.\n  Added ProxyServer HOWTO configure restrictions docs thanks to Jochen Wiedmann.\n  Added MaxRows attribute to selectcol_arrayref prompted by Wojciech Pietron.\n  Added dump_handle as a method not just a DBI:: utility function.\n  Added on-demand by-row data feed into execute_array() using code ref,\n    or statement handle. For example, to insert from a select:\n    $insert_sth->execute_array( { ArrayTupleFetch => $select_sth, ... } )\n  Added warning to trace log when $h->{foo}=... is ignored due to\n    invalid prefix (e.g., not 'private_').\n\n=head2 Changes in DBI 1.35,    7th March 2003\n\n  Fixed memory leak in fetchrow_hashref introduced in DBI 1.33.\n  Fixed various DBD::Proxy errors introduced in DBI 1.33.\n  Fixed to ANSI C in dbd_dr_data_sources thanks to Jonathan Leffler.\n  Fixed $h->can($method_name) to return correct code ref.\n  Removed DBI::Format from distribution as it's now part of the\n    separate DBI::Shell distribution by Tom Lowery.\n  Updated DBI::DBD docs with a note about the CLONE method.\n  Updated DBI::DBD docs thanks to Jonathan Leffler.\n  Updated DBI::DBD::Metadata for perl 5.5.3 thanks to Jonathan Leffler.\n  Added note to install_method docs about setup_driver() method.\n\n=head2 Changes in DBI 1.34,    28th February 2003\n\n  Fixed DBI::DBD docs to refer to DBI::DBD::Metadata thanks to Jonathan Leffler.\n  Fixed dbi_time() compile using BorlandC on Windows thanks to Steffen Goeldner.\n  Fixed profile tests to do enough work to measure on Windows.\n  Fixed disconnect_all() to not be required by drivers.\n\n  Added $okay = $h->can($method_name) to check if a method exists.\n  Added DBD::*::*->install_method($method_name, \\%attr) so driver private\n    methods can be 'installed' into the DBI dispatcher and no longer\n    need to be called using $h->func(..., $method_name).\n\n  Enhanced $dbh->clone() and documentation.\n  Enhanced docs to note that dbi_time(), and thus profiling, is limited\n    to only millisecond (seconds/1000) resolution on Windows.\n  Removed old DBI::Shell from distribution and added Tom Lowery's improved\n    version to the Bundle::DBI file.\n  Updated minimum version numbers for modules in Bundle::DBI.\n\n=head2 Changes in DBI 1.33,    27th February 2003\n\n  NOTE: Future versions of the DBI *will not* support perl 5.6.0 or earlier.\n  : Perl 5.6.1 will be the minimum supported version.\n\n  NOTE: The \"old-style\" connect: DBI->connect($database, $user, $pass, $driver);\n  : has been deprecated for several years and will now generate a warning.\n  : It will be removed in a later release. Please change any old connect() calls.\n\n  Added $dbh2 = $dbh1->clone to make a new connection to the database\n    that is identical to the original one. clone() can be called even after\n    the original handle has been disconnected. See the docs for more details.\n\n  Fixed merging of profile data to not sum DBIprof_FIRST_TIME values.\n  Fixed unescaping of newlines in DBI::ProfileData thanks to Sam Tregar.\n  Fixed Taint bug with fetchrow_hashref with help from Bradley Baetz.\n  Fixed $dbh->{Active} for DBD::Proxy, reported by Bob Showalter.\n  Fixed STORE to not clear error during nested DBI call,\n    thanks to Tony Bowden for the report and helpful test case.\n  Fixed DBI::PurePerl error clearing behaviour.\n  Fixed dbi_time() and thus DBI::Profile on Windows thanks to Smejkal Petr.\n  Fixed problem that meant ShowErrorStatement could show wrong statement,\n   thanks to Ron Savage for the report and test case.\n  Changed Apache::DBI hook to check for $ENV{MOD_PERL} instead of\n    $ENV{GATEWAY_INTERFACE} thanks to Ask Bjoern Hansen.\n  No longer tries to dup trace logfp when an interpreter is being cloned.\n  Database handles no longer inherit shared $h->err/errstr/state storage\n    from their drivers, so each $dbh has it's own $h->err etc. values\n    and is no longer affected by calls made on other dbh's.\n    Now when a dbh is destroyed it's err/errstr/state values are copied\n    up to the driver so checking $DBI::errstr still works as expected.\n\n  Build / portability fixes:\n    Fixed t/40profile.t to not use Time::HiRes.\n    Fixed t/06attrs.t to not be locale sensitive, reported by Christian Hammers.\n    Fixed sgi compiler warnings, reported by Paul Blake.\n    Fixed build using make -j4, reported by Jonathan Leffler.\n    Fixed build and tests under VMS thanks to Craig A. Berry.\n\n  Documentation changes:\n    Documented $high_resolution_time = dbi_time() function.\n    Documented that bind_col() can take an attribute hash.\n    Clarified documentation for ParamValues attribute hash keys.\n    Many good DBI documentation tweaks from Jonathan Leffler,\n      including a major update to the DBI::DBD driver author guide.\n    Clarified that execute() should itself call finish() if it's\n      called on a statement handle that's still active.\n    Clarified $sth->{ParamValues}. Driver authors please note.\n    Removed \"NEW\" markers on some methods and attributes and\n      added text to each giving the DBI version it was added in,\n      if it was added after DBI 1.21 (Feb 2002).\n\n  Changes of note for authors of all drivers:\n    Added SQL_DATA_TYPE, SQL_DATETIME_SUB, NUM_PREC_RADIX, and\n      INTERVAL_PRECISION fields to docs for type_info_all. There were\n      already in type_info(), but type_info_all() didn't specify the\n      index values.  Please check and update your type_info_all() code.\n    Added DBI::DBD::Metadata module that auto-generates your drivers\n      get_info and type_info_all data and code, thanks mainly to\n      Jonathan Leffler and Steffen Goeldner. If you've not implemented\n      get_info and type_info_all methods and your database has an ODBC\n      driver available then this will do all the hard work for you!\n    Drivers should no longer pass Err, Errstr, or State to _new_drh\n      or _new_dbh functions.\n    Please check that you support the slightly modified behaviour of\n      $sth->{ParamValues}, e.g., always return hash with keys if possible.\n\n  Changes of note for authors of compiled drivers:\n    Added dbd_db_login6 & dbd_st_finish3 prototypes thanks to Jonathan Leffler.\n    All dbd_*_*() functions implemented by drivers must have a\n      corresponding #define dbd_*_* <driver_prefix>_*_* otherwise\n      the driver may not work with a future release of the DBI.\n\n  Changes of note for authors of drivers which use Driver.xst:\n    Some new method hooks have been added are are enabled by\n      defining corresponding macros:\n          $drh->data_sources()      - dbd_dr_data_sources\n          $dbh->do()                - dbd_db_do4\n    The following methods won't be compiled into the driver unless\n      the corresponding macro has been #defined:\n          $drh->disconnect_all()    - dbd_discon_all\n\n\n=head2 Changes in DBI 1.32,    1st December 2002\n\n  Fixed to work with 5.005_03 thanks to Tatsuhiko Miyagawa (I've not tested it).\n  Reenabled taint tests (accidentally left disabled) spotted by Bradley Baetz.\n  Improved docs for FetchHashKeyName attribute thanks to Ian Barwick.\n  Fixed core dump if fetchrow_hashref given bad argument (name of attribute\n    with a value that wasn't an array reference), spotted by Ian Barwick.\n  Fixed some compiler warnings thanks to David Wheeler.\n  Updated Steven Hirsch's enhanced proxy work (seems I left out a bit).\n  Made t/40profile.t tests more reliable, reported by Randy, who is part of\n    the excellent CPAN testers team: http://testers.cpan.org/\n    (Please visit, see the valuable work they do and, ideally, join in!)\n\n=head2 Changes in DBI 1.31,    29th November 2002\n\n  The fetchall_arrayref method, when called with a $maxrows parameter,\n    no longer gives an error if called again after all rows have been\n    fetched. This simplifies application logic when fetching in batches.\n    Also added batch-fetch while() loop example to the docs.\n  The proxy now supports non-lazy (synchronous) prepare, positioned\n    updates (for selects containing 'for update'), PlRPC config set\n    via attributes, and accurate propagation of errors, all thanks\n    to Steven Hirsch (plus a minor fix from Sean McMurray and doc\n    tweaks from Michael A Chase).\n  The DBI_AUTOPROXY env var can now hold the full dsn of the proxy driver\n    plus attributes, like \"dbi:Proxy(proxy_foo=>1):host=...\".\n  Added TaintIn & TaintOut attributes to give finer control over\n    tainting thanks to Bradley Baetz.\n  The RootClass attribute no longer ignores failure to load a module,\n    but also doesn't try to load a module if the class already exists,\n    with thanks to James FitzGibbon.\n  HandleError attribute works for connect failures thanks to David Wheeler.\n  The connect() RaiseError/PrintError message now includes the username.\n  Changed \"last handle unknown or destroyed\" warning to be a trace message.\n  Removed undocumented $h->event() method.\n  Further enhancements to DBD::PurePerl accuracy.\n  The CursorName attribute now defaults to undef and not an error.\n\n  DBI::Profile changes:\n    New DBI::ProfileDumper, DBI::ProfileDumper::Apache, and\n    DBI::ProfileData modules (to manage the storage and processing\n    of profile data), plus dbiprof program for analyzing profile\n    data - with many thanks to Sam Tregar.\n    Added $DBI::err (etc) tied variable lookup time to profile.\n    Added time for DESTROY method into parent handles profile (used to be ignored).\n\n  Documentation changes:\n    Documented $dbh = $sth->{Database} attribute.\n    Documented $dbh->connected(...) post-connection call when subclassing.\n    Updated some minor doc issues thanks to H.Merijn Brand.\n    Updated Makefile.PL example in DBI::DBD thanks to KAWAI,Takanori.\n    Fixed execute_array() example thanks to Peter van Hardenberg.\n\n  Changes for driver authors, not required but strongly recommended:\n    Change DBIS to DBIc_DBISTATE(imp_xxh)   [or imp_dbh, imp_sth etc]\n    Change DBILOGFP to DBIc_LOGPIO(imp_xxh) [or imp_dbh, imp_sth etc]\n    Any function from which all instances of DBIS and DBILOGFP are\n    removed can also have dPERLINTERP removed (a good thing).\n    All use of the DBIh_EVENT* macros should be removed.\n    Major update to DBI::DBD docs thanks largely to Jonathan Leffler.\n    Add these key values: 'Err' => \\my $err, 'Errstr' => \\my $errstr,\n    to the hash passed to DBI::_new_dbh() in your driver source code.\n    That will make each $dbh have it's own $h->err and $h->errstr\n    values separate from other $dbh belonging to the same driver.\n    If you have a ::db or ::st DESTROY methods that do nothing\n    you can now remove them - which speeds up handle destruction.\n\n\n=head2 Changes in DBI 1.30,    18th July 2002\n\n  Fixed problems with selectrow_array, selectrow_arrayref, and\n    selectall_arrayref introduced in DBI 1.29.\n  Fixed FETCHing a handle attribute to not clear $DBI::err etc (broken in 1.29).\n  Fixed core dump at trace level 9 or above.\n  Fixed compilation with perl 5.6.1 + ithreads (i.e. Windows).\n  Changed definition of behaviour of selectrow_array when called in a scalar\n    context to match fetchrow_array.\n  Corrected selectrow_arrayref docs which showed selectrow_array thanks to Paul DuBois.\n\n=head2 Changes in DBI 1.29,    15th July 2002\n\n  NOTE: This release changes the specified behaviour for the\n  : fetchrow_array method when called in a scalar context:\n  : The DBI spec used to say that it would return the FIRST field.\n  : Which field it returns (i.e., the first or the last) is now undefined.\n  : This does not affect statements that only select one column, which is\n  : usually the case when fetchrow_array is called in a scalar context.\n  : FYI, this change was triggered by discovering that the fetchrow_array\n  : implementation in Driver.xst (used by most compiled drivers)\n  : didn't match the DBI specification. Rather than change the code\n  : to match, and risk breaking existing applications, I've changed the\n  : specification (that part was always of dubious value anyway).\n\n  NOTE: Future versions of the DBI may not support for perl 5.5 much longer.\n  : If you are still using perl 5.005_03 you should be making plans to\n  : upgrade to at least perl 5.6.1, or 5.8.0. Perl 5.8.0 is due to be\n  : released in the next week or so.  (Although it's a \"point 0\" release,\n  : it is the most thoroughly tested release ever.)\n\n  Added XS/C implementations of selectrow_array, selectrow_arrayref, and\n    selectall_arrayref to Driver.xst. See DBI 1.26 Changes for more info.\n  Removed support for the old (fatally flawed) \"5005\" threading model.\n  Added support for new perl 5.8 iThreads thanks to Gerald Richter.\n    (Threading support and safety should still be regarded as beta\n    quality until further notice. But it's much better than it was.)\n  Updated the \"Threads and Thread Safety\" section of the docs.\n  The trace output can be sent to STDOUT instead of STDERR by using\n    \"STDOUT\" as the name of the file, i.e., $h->trace(..., \"STDOUT\")\n  Added pointer to perlreftut, perldsc, perllol, and perlboot manuals\n    into the intro section of the docs, suggested by Brian McCain.\n  Fixed DBI::Const::GetInfo::* pod docs thanks to Zack Weinberg.\n  Some changes to how $dbh method calls are treated by DBI::Profile:\n    Meta-data methods now clear $dbh->{Statement} on entry.\n    Some $dbh methods are now profiled as if $dbh->{Statement} was empty\n    (because thet're unlikely to actually relate to its contents).\n  Updated dbiport.h to ppport.h from perl 5.8.0.\n  Tested with perl 5.5.3 (vanilla, Solaris), 5.6.1 (vanilla, Solaris), and\n    perl 5.8.0 (RC3@17527 with iThreads & Multiplicity on Solaris and FreeBSD).\n\n=head2 Changes in DBI 1.28,    14th June 2002\n\n  Added $sth->{ParamValues} to return a hash of the most recent\n    values bound to placeholders via bind_param() or execute().\n    Individual drivers need to be updated to support it.\n  Enhanced ShowErrorStatement to include ParamValues if available:\n    \"DBD::foo::st execute failed: errstr [for statement ``...'' with params: 1='foo']\"\n  Further enhancements to DBD::PurePerl accuracy.\n\n=head2 Changes in DBI 1.27,    13th June 2002\n\n  Fixed missing column in C implementation of fetchall_arrayref()\n    thanks to Philip Molter for the prompt reporting of the problem.\n\n=head2 Changes in DBI 1.26,    13th June 2002\n\n  Fixed t/40profile.t to work on Windows thanks to Smejkal Petr.\n  Fixed $h->{Profile} to return undef, not error, if not set.\n  Fixed DBI->available_drivers in scalar context thanks to Michael Schwern.\n\n  Added C implementations of selectrow_arrayref() and fetchall_arrayref()\n    in Driver.xst.  All compiled drivers using Driver.xst will now be\n    faster making those calls. Most noticeable with fetchall_arrayref for\n    many rows or selectrow_arrayref with a fast query. For example, using\n    DBD::mysql a selectrow_arrayref for a single row using a primary key\n    is ~20% faster, and fetchall_arrayref for 20000 rows is twice as fast!\n    Drivers just need to be recompiled and reinstalled to enable it.\n    The fetchall_arrayref speed up only applies if $slice parameter is not used.\n  Added $max_rows parameter to fetchall_arrayref() to optionally limit\n    the number of rows returned. Can now fetch batches of rows.\n  Added MaxRows attribute to selectall_arrayref()\n    which then passes it to fetchall_arrayref().\n  Changed selectrow_array to make use of selectrow_arrayref.\n  Trace level 1 now shows first two parameters of all methods\n    (used to only for that for some, like prepare,execute,do etc)\n  Trace indicator for recursive calls (first char on trace lines)\n    now starts at 1 not 2.\n\n  Documented that $h->func() does not trigger RaiseError etc\n    so applications must explicitly check for errors.\n  DBI::Profile with DBI_PROFILE now shows percentage time inside DBI.\n  HandleError docs updated to show that handler can edit error message.\n  HandleError subroutine interface is now regarded as stable.\n\n=head2 Changes in DBI 1.25,    5th June 2002\n\n  Fixed build problem on Windows and some compiler warnings.\n  Fixed $dbh->{Driver} and $sth->{Statement} for driver internals\n    These are 'inner' handles as per behaviour prior to DBI 1.16.\n  Further minor improvements to DBI::PurePerl accuracy.\n\n=head2 Changes in DBI 1.24,    4th June 2002\n\n  Fixed reference loop causing a handle/memory leak\n    that was introduced in DBI 1.16.\n  Fixed DBI::Format to work with 'filehandles' from IO::Scalar\n    and similar modules thanks to report by Jeff Boes.\n  Fixed $h->func for DBI::PurePerl thanks to Jeff Zucker.\n  Fixed $dbh->{Name} for DBI::PurePerl thanks to Dean Arnold.\n\n  Added DBI method call profiling and benchmarking.\n    This is a major new addition to the DBI.\n    See $h->{Profile} attribute and DBI::Profile module.\n    For a quick trial, set the DBI_PROFILE environment variable and\n    run your favourite DBI script. Try it with DBI_PROFILE set to 1,\n    then try 2, 4, 8, 10, and -10. Have fun!\n\n  Added execute_array() and bind_param_array() documentation\n    with thanks to Dean Arnold.\n  Added notes about the DBI having not yet been tested with iThreads\n    (testing and patches for SvLOCK etc welcome).\n  Removed undocumented Handlers attribute (replaced by HandleError).\n  Tested with 5.5.3 and 5.8.0 RC1.\n\n=head2 Changes in DBI 1.23,    25th May 2002\n\n  Greatly improved DBI::PurePerl in performance and accuracy.\n  Added more detail to DBI::PurePerl docs about what's not supported.\n  Fixed undef warnings from t/15array.t and DBD::Sponge.\n\n=head2 Changes in DBI 1.22,    22nd May 2002\n\n  Added execute_array() and bind_param_array() with special thanks\n    to Dean Arnold. Not yet documented. See t/15array.t for examples.\n    All drivers now automatically support these methods.\n  Added DBI::PurePerl, a transparent DBI emulation for pure-perl drivers\n    with special thanks to Jeff Zucker. Perldoc DBI::PurePerl for details.\n  Added DBI::Const::GetInfo* modules thanks to Steffen Goeldner.\n  Added write_getinfo_pm utility to DBI::DBD thanks to Steffen Goeldner.\n  Added $allow_active==2 mode for prepare_cached() thanks to Stephen Clouse.\n\n  Updated DBI::Format to Revision 11.4 thanks to Tom Lowery.\n  Use File::Spec in Makefile.PL (helps VMS etc) thanks to Craig Berry.\n  Extend $h->{Warn} to commit/rollback ineffective warning thanks to Jeff Baker.\n  Extended t/preparse.t and removed \"use Devel::Peek\" thanks to Scott Hildreth.\n  Only copy Changes to blib/lib/Changes.pm once thanks to Jonathan Leffler.\n  Updated internals for modern perls thanks to Jonathan Leffler and Jeff Urlwin.\n  Tested with perl 5.7.3 (just using default perl config).\n\n  Documentation changes:\n\n  Added 'Catalog Methods' section to docs thanks to Steffen Goeldner.\n  Updated README thanks to Michael Schwern.\n  Clarified that driver may choose not to start new transaction until\n    next use of $dbh after commit/rollback.\n  Clarified docs for finish method.\n  Clarified potentials problems with prepare_cached() thanks to Stephen Clouse.\n\n\n=head2 Changes in DBI 1.21,    7th February 2002\n\n  The minimum supported perl version is now 5.005_03.\n\n  Fixed DBD::Proxy support for AutoCommit thanks to Jochen Wiedmann.\n  Fixed DBI::ProxyServer bind_param(_inout) handing thanks to Oleg Mechtcheriakov.\n  Fixed DBI::ProxyServer fetch loop thanks to nobull@mail.com.\n  Fixed install_driver do-the-right-thing with $@ on error. It, and connect(),\n    will leave $@ empty on success and holding the error message on error.\n    Thanks to Jay Lawrence, Gavin Sherlock and others for the bug report.\n  Fixed fetchrow_hashref to assign columns to the hash left-to-right\n    so later fields with the same name overwrite earlier ones\n    as per DBI < 1.15, thanks to Kay Roepke.\n\n  Changed tables() to use quote_indentifier() if the driver returns a\n    true value for $dbh->get_info(29) # SQL_IDENTIFIER_QUOTE_CHAR\n  Changed ping() so it no longer triggers RaiseError/PrintError.\n  Changed connect() to not call $class->install_driver unless needed.\n  Changed DESTROY to catch fatal exceptions and append to $@.\n\n  Added ISO SQL/CLI & ODBCv3 data type definitions thanks to Steffen Goeldner.\n  Removed the definition of SQL_BIGINT data type constant as the value is\n    inconsistent between standards (ODBC=-5, SQL/CLI=25).\n  Added $dbh->column_info(...) thanks to Steffen Goeldner.\n  Added $dbh->foreign_key_info(...) thanks to Steffen Goeldner.\n  Added $dbh->quote_identifier(...) insipred by Simon Oliver.\n  Added $dbh->set_err(...) for DBD authors and DBI subclasses\n    (actually been there for a while, now expanded and documented).\n  Added $h->{HandleError} = sub { ... } addition and/or alternative\n    to RaiseError/PrintError. See the docs for more info.\n  Added $h->{TraceLevel} = N attribute to set/get trace level of handle\n    thus can set trace level via an (eg externally specified) DSN\n    using the embedded attribute syntax:\n      $dsn = 'dbi:DB2(PrintError=1,TraceLevel=2):dbname';\n    Plus, you can also now do: local($h->{TraceLevel}) = N;\n    (but that leaks a little memory in some versions of perl).\n  Added some call tree information to trace output if trace level >= 3\n    With thanks to Graham Barr for the stack walking code.\n  Added experimental undocumented $dbh->preparse(), see t/preparse.t\n    With thanks to Scott T. Hildreth for much of the work.\n  Added Fowler/Noll/Vo hash type as an option to DBI::hash().\n\n  Documentation changes:\n\n  Added DBI::Changes so now you can \"perldoc DBI::Changes\", yeah!\n  Added selectrow_arrayref & selectrow_hashref docs thanks to Doug Wilson.\n  Added 'Standards Reference Information' section to docs to gather\n    together all references to relevant on-line standards.\n  Added link to poop.sourceforge.net into the docs thanks to Dave Rolsky.\n  Added link to hyperlinked BNF for SQL92 thanks to Jeff Zucker.\n  Added 'Subclassing the DBI' docs thanks to Stephen Clouse, and\n    then changed some of them to reflect the new approach to subclassing.\n  Added stronger wording to description of $h->{private_*} attributes.\n  Added docs for DBI::hash.\n\n  Driver API changes:\n\n  Now a COPY of the DBI->connect() attributes is passed to the driver\n    connect() method, so it can process and delete any elements it wants.\n    Deleting elements reduces/avoids the explicit\n      $dbh->{$_} = $attr->{$_} foreach keys %$attr;\n    that DBI->connect does after the driver connect() method returns.\n\n\n=head2 Changes in DBI 1.20,    24th August 2001\n\n  WARNING: This release contains two changes that may affect your code.\n  : Any code using selectall_hashref(), which was added in March 2001, WILL\n  : need to be changed. Any code using fetchall_arrayref() with a non-empty\n  : hash slice parameter may, in a few rare cases, need to be changed.\n  : See the change list below for more information about the changes.\n  : See the DBI documentation for a description of current behaviour.\n\n  Fixed memory leak thanks to Toni Andjelkovic.\n  Changed fetchall_arrayref({ foo=>1, ...}) specification again (sorry):\n    The key names of the returned hashes is identical to the letter case of\n    the names in the parameter hash, regardless of the L</FetchHashKeyName>\n    attribute. The letter case is ignored for matching.\n  Changed fetchall_arrayref([...]) array slice syntax specification to\n    clarify that the numbers in the array slice are perl index numbers\n    (which start at 0) and not column numbers (which start at 1).\n  Added { Columns=>... } and { Slice =>... } attributes to selectall_arrayref()\n    which is passed to fetchall_arrayref() so it can fetch hashes now.\n  Added a { Columns => [...] } attribute to selectcol_arrayref() so that\n    the list it returns can be built from more than one column per row.\n    Why? Consider my %hash = @{$dbh->selectcol_arrayref($sql,{ Columns=>[1,2]})}\n    to return id-value pairs which can be used directly to build a hash.\n  Added $hash_ref = $sth->fetchall_hashref( $key_field )\n    which returns a ref to a hash with, typically, one element per row.\n    $key_field is the name of the field to get the key for each row from.\n    The value of the hash for each row is a hash returned by fetchrow_hashref.\n  Changed selectall_hashref to return a hash ref (from fetchall_hashref)\n    and not an array of hashes as it has since DBI 1.15 (end March 2001).\n    WARNING: THIS CHANGE WILL BREAK ANY CODE USING selectall_hashref()!\n    Sorry, but I think this is an important regularization of the API.\n    To get previous selectall_hashref() behaviour (an array of hash refs)\n    change $ary_ref = $dbh->selectall_hashref( $statement, undef, @bind);\n\tto $ary_ref = $dbh->selectall_arrayref($statement, { Columns=>{} }, @bind);\n  Added NAME_lc_hash, NAME_uc_hash, NAME_hash statement handle attributes.\n    which return a ref to a hash of field_name => field_index (0..n-1) pairs.\n  Fixed select_hash() example thanks to Doug Wilson.\n  Removed (unbundled) DBD::ADO and DBD::Multiplex from the DBI distribution.\n    The latest versions of those modules are available from CPAN sites.\n  Added $dbh->begin_work. This method causes AutoCommit to be turned\n    off just until the next commit() or rollback().\n    Driver authors: if the DBIcf_BegunWork flag is set when your commit or\n    rollback method is called then please turn AutoCommit on and clear the\n    DBIcf_BegunWork flag. If you don't then the DBI will but it'll be much\n    less efficient and won't handle error conditions very cleanly.\n  Retested on perl 5.4.4, but the DBI won't support 5.4.x much longer.\n  Added text to SUPPORT section of the docs:\n    For direct DBI and DBD::Oracle support, enhancement, and related work\n    I am available for consultancy on standard commercial terms.\n  Added text to ACKNOWLEDGEMENTS section of the docs:\n    Much of the DBI and DBD::Oracle was developed while I was Technical\n    Director (CTO) of the Paul Ingram Group (www.ig.co.uk).  So I'd\n    especially like to thank Paul for his generosity and vision in\n    supporting this work for many years.\n\n=head2 Changes in DBI 1.19,    20th July 2001\n\n  Made fetchall_arrayref({ foo=>1, ...}) be more strict to the specification\n    in relation to wanting hash slice keys to be lowercase names.\n    WARNING: If you've used fetchall_arrayref({...}) with a hash slice\n    that contains keys with uppercase letters then your code will break.\n    (As far as I recall the spec has always said don't do that.)\n  Fixed $sth->execute() to update $dbh->{Statement} to $sth->{Statement}.\n  Added row number to trace output for fetch method calls.\n  Trace level 1 no longer shows fetches with row>1 (to reduce output volume).\n  Added $h->{FetchHashKeyName} = 'NAME_lc' or 'NAME_uc' to alter\n    behaviour of fetchrow_hashref() method. See docs.\n  Added type_info quote caching to quote() method thanks to Dean Kopesky.\n    Makes using quote() with second data type param much much faster.\n  Added type_into_all() caching to type_info(), spotted by Dean Kopesky.\n  Added new API definition for table_info() and tables(),\n    driver authors please note!\n  Added primary_key_info() to DBI API thanks to Steffen Goeldner.\n  Added primary_key() to DBI API as simpler interface to primary_key_info().\n  Indent and other fixes for DBI::DBD doc thanks to H.Merijn Brand.\n  Added prepare_cached() insert_hash() example thanks to Doug Wilson.\n  Removed false docs for fetchall_hashref(), use fetchall_arrayref({}).\n\n=head2 Changes in DBI 1.18,    4th June 2001\n\n  Fixed that altering ShowErrorStatement also altered AutoCommit!\n    Thanks to Jeff Boes for spotting that clanger.\n  Fixed DBD::Proxy to handle commit() and rollback(). Long overdue, sorry.\n  Fixed incompatibility with perl 5.004 (but no one's using that right? :)\n  Fixed connect_cached and prepare_cached to not be affected by the order\n    of elements in the attribute hash. Spotted by Mitch Helle-Morrissey.\n  Fixed version number of DBI::Shell\n    reported by Stuhlpfarrer Gerhard and others.\n  Defined and documented table_info() attribute semantics (ODBC compatible)\n    thanks to Olga Voronova, who also implemented then in DBD::Oracle.\n  Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n\n=head2 Changes in DBI 1.16,    30th May 2001\n\n  Reimplemented fetchrow_hashref in C, now fetches about 25% faster!\n  Changed behaviour if both PrintError and RaiseError are enabled\n    to simply do both (in that order, obviously :)\n  Slight reduction in DBI handle creation overhead.\n  Fixed $dbh->{Driver} & $sth->{Database} to return 'outer' handles.\n  Fixed execute param count check to honour RaiseError spotted by Belinda Giardie.\n  Fixed build for perl5.6.1 with PERLIO thanks to H.Merijn Brand.\n  Fixed client sql restrictions in ProxyServer.pm thanks to Jochen Wiedmann.\n  Fixed batch mode command parsing in Shell thanks to Christian Lemburg.\n  Fixed typo in selectcol_arrayref docs thanks to Jonathan Leffler.\n  Fixed selectrow_hashref to be available to callers thanks to T.J.Mather.\n  Fixed core dump if statement handle didn't define Statement attribute.\n  Added bind_param_inout docs to DBI::DBD thanks to Jonathan Leffler.\n  Added note to data_sources() method docs that some drivers may\n    require a connected database handle to be supplied as an attribute.\n  Trace of install_driver method now shows path of driver file loaded.\n  Changed many '||' to 'or' in the docs thanks to H.Merijn Brand.\n  Updated DBD::ADO again (improvements in error handling) from Tom Lowery.\n  Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n  Updated email and web addresses in DBI::FAQ thanks to Michael A Chase.\n\n=head2 Changes in DBI 1.15,    28th March 2001\n\n  Added selectrow_arrayref\n  Added selectrow_hashref\n  Added selectall_hashref thanks to Leon Brocard.\n  Added DBI->connect(..., { dbi_connect_method => 'method' })\n  Added $dbh->{Statement} aliased to most recent child $sth->{Statement}.\n  Added $h->{ShowErrorStatement}=1 to cause the appending of the\n    relevant Statement text to the RaiseError/PrintError text.\n  Modified type_info to always return hash keys in uppercase and\n    to not require uppercase 'DATA_TYPE' key from type_info_all.\n    Thanks to Jennifer Tong and Rob Douglas.\n  Added \\%attr param to tables() and table_info() methods.\n  Trace method uses warn() if it can't open the new file.\n  Trace shows source line and filename during global destruction.\n  Updated packages:\n    Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n    Updated DBD::ADO to much improved version 0.4 from Tom Lowery.\n    Updated DBD::Sponge to include $sth->{PRECISION} thanks to Tom Lowery.\n    Changed DBD::ExampleP to use lstat() instead of stat().\n  Documentation:\n    Documented $DBI::lasth (which has been there since day 1).\n    Documented SQL_* names.\n    Clarified and extended docs for $h->state thanks to Masaaki Hirose.\n    Clarified fetchall_arrayref({}) docs (thanks to, er, someone!).\n    Clarified type_info_all re lettercase and index values.\n    Updated DBI::FAQ to 0.38 thanks to Alligator Descartes.\n    Added cute bind_columns example thanks to H.Merijn Brand.\n    Extended docs on \\%attr arg to data_sources method.\n  Makefile.PL\n    Removed obscure potential 'rm -rf /' (thanks to Ulrich Pfeifer).\n    Removed use of glob and find (thanks to Michael A. Chase).\n  Proxy:\n    Removed debug messages from DBD::Proxy AUTOLOAD thanks to Brian McCauley.\n    Added fix for problem using table_info thanks to Tom Lowery.\n    Added better determination of where to put the pid file, and...\n    Added KNOWN ISSUES section to DBD::Proxy docs thanks to Jochen Wiedmann.\n  Shell:\n    Updated DBI::Format to include DBI::Format::String thanks to Tom Lowery.\n    Added describe command thanks to Tom Lowery.\n    Added columnseparator option thanks to Tom Lowery (I think).\n    Added 'raw' format thanks to, er, someone, maybe Tom again.\n  Known issues:\n    Perl 5.005 and 5.006 both leak memory doing local($handle->{Foo}).\n    Perl 5.004 doesn't. The leak is not a DBI or driver bug.\n\n=head2 Changes in DBI 1.14,\t14th June 2000\n\n  NOTE: This version is the one the DBI book is based on.\n  NOTE: This version requires at least Perl 5.004.\n  Perl 5.6 ithreads changes with thanks to Doug MacEachern.\n  Changed trace output to use PerlIO thanks to Paul Moore.\n  Fixed bug in RaiseError/PrintError handling.\n    (% chars in the error string could cause a core dump.)\n  Fixed Win32 PerlEx IIS concurrency bugs thanks to Murray Nesbitt.\n  Major documentation polishing thanks to Linda Mui at O'Reilly.\n  Password parameter now shown as **** in trace output.\n  Added two fields to type_info and type_info_all.\n  Added $dsn to PrintError/RaiseError message from DBI->connect().\n  Changed prepare_cached() croak to carp if sth still Active.\n  Added prepare_cached() example to the docs.\n  Added further DBD::ADO enhancements from Thomas Lowery.\n\n=head2 Changes in DBI 1.13,\t11th July 1999\n\n  Fixed Win32 PerlEx IIS concurrency bugs thanks to Murray Nesbitt.\n  Fixed problems with DBD::ExampleP long_list test mode.\n  Added SQL_WCHAR SQL_WVARCHAR SQL_WLONGVARCHAR and SQL_BIT\n    to list of known and exportable SQL types.\n  Improved data fetch performance of DBD::ADO.\n  Added GetTypeInfo to DBD::ADO thanks to Thomas Lowery.\n  Actually documented connect_cached thanks to Michael Schwern.\n  Fixed user/key/cipher bug in ProxyServer thanks to Joshua Pincus.\n\n=head2 Changes in DBI 1.12,\t29th June 1999\n\n  Fixed significant DBD::ADO bug (fetch skipped first row).\n  Fixed ProxyServer bug handling non-select statements.\n  Fixed VMS problem with t/examp.t thanks to Craig Berry.\n  Trace only shows calls to trace_msg and _set_fbav at high levels.\n  Modified t/examp.t to workaround Cygwin buffering bug.\n\n=head2 Changes in DBI 1.11,\t17th June 1999\n\n  Fixed bind_columns argument checking to allow a single arg.\n  Fixed problems with internal default_user method.\n  Fixed broken DBD::ADO.\n  Made default $DBI::rows more robust for some obscure cases.\n\n=head2 Changes in DBI 1.10,\t14th June 1999\n\n  Fixed trace_msg.al error when using Apache.\n  Fixed dbd_st_finish enhancement in Driver.xst (internals).\n  Enable drivers to define default username and password\n    and temporarily disabled warning added in 1.09.\n  Thread safety optimised for single thread case.\n\n=head2 Changes in DBI 1.09,\t9th June 1999\n\n  Added optional minimum trace level parameter to trace_msg().\n  Added warning in Makefile.PL that DBI will require 5.004 soon.\n  Added $dbh->selectcol_arrayref($statement) method.\n  Fixed fetchall_arrayref hash-slice mode undef NAME problem.\n  Fixed problem with tainted parameter checking and t/examp.t.\n  Fixed problem with thread safety code, including 64 bit machines.\n  Thread safety now enabled by default for threaded perls.\n  Enhanced code for MULTIPLICITY/PERL_OBJECT from ActiveState.\n  Enhanced prepare_cached() method.\n  Minor changes to trace levels (less internal info at level 2).\n  Trace log now shows \"!! ERROR...\" before the \"<- method\" line.\n  DBI->connect() now warn's if user / password is undefined and\n    DBI_USER / DBI_PASS environment variables are not defined.\n  The t/proxy.t test now ignores any /etc/dbiproxy.conf file.\n  Added portability fixes for MacOS from Chris Nandor.\n  Updated mailing list address from fugue.com to isc.org.\n\n=head2 Changes in DBI 1.08,\t12th May 1999\n\n  Much improved DBD::ADO driver thanks to Phlip Plumlee and others.\n  Connect now allows you to specify attribute settings within the DSN\n    E.g., \"dbi:Driver(RaiseError=>1,Taint=>1,AutoCommit=>0):dbname\"\n  The $h->{Taint} attribute now also enables taint checking of\n    arguments to almost all DBI methods.\n  Improved trace output in various ways.\n  Fixed bug where $sth->{NAME_xx} was undef in some situations.\n  Fixed code for MULTIPLICITY/PERL_OBJECT thanks to Alex Smishlajev.\n  Fixed and documented DBI->connect_cached.\n  Workaround for Cygwin32 build problem with help from Jong-Pork Park.\n  bind_columns no longer needs undef or hash ref as first parameter.\n\n=head2 Changes in DBI 1.07,\t6th May 1999\n\n  Trace output now shows contents of array refs returned by DBI.\n  Changed names of some result columns from type_info, type_info_all,\n    tables and table_info to match ODBC 3.5 / ISO/IEC standards.\n  Many fixes for DBD::Proxy and ProxyServer.\n  Fixed error reporting in install_driver.\n  Major enhancement to DBI::W32ODBC from Patrick Hollins.\n  Added $h->{Taint} to taint fetched data if tainting (perl -T).\n  Added code for MULTIPLICITY/PERL_OBJECT contributed by ActiveState.\n  Added $sth->more_results (undocumented for now).\n\n=head2 Changes in DBI 1.06,\t6th January 1999\n\n  Fixed Win32 Makefile.PL problem in 1.04 and 1.05.\n  Significant DBD::Proxy enhancements and fixes\n    including support for bind_param_inout (Jochen and I)\n  Added experimental DBI->connect_cached method.\n  Added $sth->{NAME_uc} and $sth->{NAME_lc} attributes.\n  Enhanced fetchrow_hashref to take an attribute name arg.\n\n=head2 Changes in DBI 1.05,\t4th January 1999\n\n  Improved DBD::ADO connect (thanks to Phlip Plumlee).\n  Improved thread safety (thanks to Jochen Wiedmann).\n  [Quick release prompted by truncation of copies on CPAN]\n\n=head2 Changes in DBI 1.04,\t3rd January 1999\n\n  Fixed error in Driver.xst. DBI build now tests Driver.xst.\n  Removed unused variable compiler warnings in Driver.xst.\n  DBI::DBD module now tested during DBI build.\n  Further clarification in the DBI::DBD driver writers manual.\n  Added optional name parameter to $sth->fetchrow_hashref.\n\n=head2 Changes in DBI 1.03,\t1st January 1999\n\n  Now builds with Perl>=5.005_54 (PERL_POLLUTE in DBIXS.h)\n  DBI trace trims path from \"at yourfile.pl line nnn\".\n  Trace level 1 now shows statement passed to prepare.\n  Assorted improvements to the DBI manual.\n  Assorted improvements to the DBI::DBD driver writers manual.\n  Fixed $dbh->quote prototype to include optional $data_type.\n  Fixed $dbh->prepare_cached problems.\n  $dbh->selectrow_array behaves better in scalar context.\n  Added a (very) experimental DBD::ADO driver for Win32 ADO.\n  Added experimental thread support (perl Makefile.PL -thread).\n  Updated the DBI::FAQ - thanks to Alligator Descartes.\n  The following changes were implemented and/or packaged\n    by Jochen Wiedmann - thanks Jochen:\n  Added a Bundle for CPAN installation of DBI, the DBI proxy\n    server and prerequisites (lib/Bundle/DBI.pm).\n  DBI->available_drivers uses File::Spec, if available.\n    This makes it work on MacOS. (DBI.pm)\n  Modified type_info to work with read-only values returned\n    by type_info_all. (DBI.pm)\n  Added handling of magic values in $sth->execute,\n    $sth->bind_param and other methods (Driver.xst)\n  Added Perl's CORE directory to the linkers path on Win32,\n    required by recent versions of ActiveState Perl.\n  Fixed DBD::Sponge to work with empty result sets.\n  Complete rewrite of DBI::ProxyServer and DBD::Proxy.\n\n=head2 Changes in DBI 1.02,\t2nd September 1998\n\n  Fixed DBI::Shell including @ARGV and /current.\n  Added basic DBI::Shell test.\n  Renamed DBI::Shell /display to /format.\n\n=head2 Changes in DBI 1.01,\t2nd September 1998\n\n  Many enhancements to Shell (with many contributions from\n  Jochen Wiedmann, Tom Lowery and Adam Marks).\n  Assorted fixes to DBD::Proxy and DBI::ProxyServer.\n  Tidied up trace messages - trace(2) much cleaner now.\n  Added $dbh->{RowCacheSize} and $sth->{RowsInCache}.\n  Added experimental DBI::Format (mainly for DBI::Shell).\n  Fixed fetchall_arrayref($slice_hash).\n  DBI->connect now honours PrintError=1 if connect fails.\n  Assorted clarifications to the docs.\n\n=head2 Changes in DBI 1.00,\t14th August 1998\n\n  The DBI is no longer 'alpha' software!\n  Added $dbh->tables and $dbh->table_info.\n  Documented \\%attr arg to data_sources method.\n  Added $sth->{TYPE}, $sth->{PRECISION} and $sth->{SCALE}.\n  Added $sth->{Statement}.\n  DBI::Shell now uses neat_list to print results\n  It also escapes \"'\" chars and converts newlines to spaces.\n\n=head2 Changes in DBI 0.95,\t10th August 1998\n\n  WARNING: THIS IS AN EXPERIMENTAL RELEASE!\n\n  Fixed 0.94 slip so it will build on pre-5.005 again.\n  Added DBI_AUTOPROXY environment variable.\n  Array ref returned from fetch/fetchrow_arrayref now readonly.\n  Improved connect error reporting by DBD::Proxy.\n  All trace/debug messages from DBI now go to trace file.\n\n=head2 Changes in DBI 0.94,\t9th August 1998\n\n  WARNING: THIS IS AN EXPERIMENTAL RELEASE!\n\n  Added DBD::Shell and dbish interactive DBI shell. Try it!\n  Any database attribs can be set via DBI->connect(,,, \\%attr).\n  Added _get_fbav and _set_fbav methods for Perl driver developers\n    (see ExampleP driver for perl usage). Drivers which don't use\n    one of these methods (either via XS or Perl) are not compliant.\n  DBI trace now shows adds \" at yourfile.pl line nnn\"!\n  PrintError and RaiseError now prepend driver and method name.\n  The available_drivers method no longer returns NullP or Sponge.\n  Added $dbh->{Name}.\n  Added $dbh->quote($value, $data_type).\n  Added more hints to install_driver failure message.\n  Added DBD::Proxy and DBI::ProxyServer (from Jochen Wiedmann).\n  Added $DBI::neat_maxlen to control truncation of trace output.\n  Added $dbh->selectall_arrayref and $dbh->selectrow_array methods.\n  Added $dbh->tables.\n  Added $dbh->type_info and $dbh->type_info_all.\n  Added $h->trace_msg($msg) to write to trace log.\n  Added @bool = DBI::looks_like_number(@ary).\n  Many assorted improvements to the DBI docs.\n\n=head2 Changes in DBI 0.93,\t13th February 1998\n\n  Fixed DBI::DBD::dbd_postamble bug causing 'Driver.xsi not found' errors.\n  Changes to handling of 'magic' values in neatsvpv (used by trace).\n  execute (in Driver.xst) stops binding after first bind error.\n  This release requires drivers to be rebuilt.\n\n=head2 Changes in DBI 0.92,\t3rd February 1998\n\n  Fixed per-handle memory leak (with many thanks to Irving Reid).\n  Added $dbh->prepare_cached() caching variant of $dbh->prepare.\n  Added some attributes:\n    $h->{Active}       is the handle 'Active' (vague concept) (boolean)\n    $h->{Kids}         e.g. number of sth's associated with a dbh\n    $h->{ActiveKids}   number of the above which are 'Active'\n    $dbh->{CachedKids} ref to prepare_cached sth cache\n  Added support for general-purpose 'private_' attributes.\n  Added experimental support for subclassing the DBI: see t/subclass.t\n  Added SQL_ALL_TYPES to exported :sql_types.\n  Added dbd_dbi_dir() and dbd_dbi_arch_dir() to DBI::DBD module so that\n  DBD Makefile.PLs can work with the DBI installed in non-standard locations.\n  Fixed 'Undefined value' warning and &sv_no output from neatsvpv/trace.\n  Fixed small 'once per interpreter' leak.\n  Assorted minor documentation fixes.\n\n=head2 Changes in DBI 0.91,\t10th December 1997\n\n  NOTE: This fix may break some existing scripts:\n  DBI->connect(\"dbi:...\",$user,$pass) was not setting AutoCommit and PrintError!\n  DBI->connect(..., { ... }) no longer sets AutoCommit or PrintError twice.\n  DBI->connect(..., { RaiseError=>1 }) now croaks if connect fails.\n  Fixed $fh parameter of $sth->dump_results;\n  Added default statement DESTROY method which carps.\n  Added default driver DESTROY method to silence AUTOLOAD/__DIE__/CGI::Carp\n  Added more SQL_* types to %EXPORT_TAGS and @EXPORT_OK.\n  Assorted documentation updates (mainly clarifications).\n  Added workaround for perl's 'sticky lvalue' bug.\n  Added better warning for bind_col(umns) where fields==0.\n  Fixed to build okay with 5.004_54 with or without USE_THREADS.\n  Note that the DBI has not been tested for thread safety yet.\n\n=head2 Changes in DBI 0.90,\t6th September 1997\n\n  Can once again be built with Perl 5.003.\n  The DBI class can be subclassed more easily now.\n  InactiveDestroy fixed for drivers using the *.xst template.\n  Slightly faster handle creation.\n  Changed prototype for dbd_*_*_attrib() to add extra param.\n  Note: 0.90, 0.89 and possibly some other recent versions have\n  a small memory leak. This will be fixed in the next release.\n\n=head2 Changes in DBI 0.89,\t25th July 1997\n\n  Minor fix to neatsvpv (mainly used for debug trace) to workaround\n  bug in perl where SvPV removes IOK flag from an SV.\n  Minor updates to the docs.\n\n=head2 Changes in DBI 0.88,\t22nd July 1997\n\n  Fixed build for perl5.003 and Win32 with Borland.\n  Fixed documentation formatting.\n  Fixed DBI_DSN ignored for old-style connect (with explicit driver).\n  Fixed AutoCommit in DBD::ExampleP\n  Fixed $h->trace.\n  The DBI can now export SQL type values: use DBI ':sql_types';\n  Modified Driver.xst and renamed DBDI.h to dbd_xsh.h\n\n=head2 Changes in DBI 0.87,\t18th July 1997\n\n  Fixed minor type clashes.\n  Added more docs about placeholders and bind values.\n\n=head2 Changes in DBI 0.86,\t16th July 1997\n\n  Fixed failed connect causing 'unblessed ref' and other errors.\n  Drivers must handle AutoCommit FETCH and STORE else DBI croaks.\n  Added $h->{LongReadLen} and $h->{LongTruncOk} attributes for BLOBS.\n  Added DBI_USER and DBI_PASS env vars. See connect docs for usage.\n  Added DBI->trace() to set global trace level (like per-handle $h->trace).\n  PERL_DBI_DEBUG env var renamed DBI_DEBUG (old name still works for now).\n  Updated docs, including commit, rollback, AutoCommit and Transactions sections.\n  Added bind_param method and execute(@bind_values) to docs.\n  Fixed fetchall_arrayref.\n\n  Since the DBIS structure has change the internal version numbers have also\n  changed (DBIXS_VERSION == 9 and DBISTATE_VERSION == 9) so drivers will have\n  to be recompiled. The test is also now more sensitive and the version\n  mismatch error message now more clear about what to do. Old drivers are\n  likely to core dump (this time) until recompiled for this DBI. In future\n  DBI/DBD version mismatch will always produce a clear error message.\n\n  Note that this DBI release contains and documents many new features\n  that won't appear in drivers for some time. Driver writers might like\n  to read perldoc DBI::DBD and comment on or apply the information given.\n\n=head2 Changes in DBI 0.85,\t25th June 1997\n\n  NOTE: New-style connect now defaults to AutoCommit mode unless\n  { AutoCommit => 0 } specified in connect attributes. See the docs.\n  AutoCommit attribute now defined and tracked by DBI core.\n  Drivers should use/honour this and not implement their own.\n  Added pod doc changes from Andreas and Jonathan.\n  New DBI_DSN env var default for connect method. See docs.\n  Documented the func method.\n  Fixed \"Usage: DBD::_::common::DESTROY\" error.\n  Fixed bug which set some attributes true when there value was fetched.\n  Added new internal DBIc_set() macro for drivers to use.\n\n=head2 Changes in DBI 0.84,\t20th June 1997\n\n  Added $h->{PrintError} attribute which, if set true, causes all errors to\n  trigger a warn().\n  New-style DBI->connect call now automatically sets PrintError=1 unless\n  { PrintError => 0 } specified in the connect attributes. See the docs.\n  The old-style connect with a separate driver parameter is deprecated.\n  Fixed fetchrow_hashref.\n  Renamed $h->debug to $h->trace() and added a trace filename arg.\n  Assorted other minor tidy-ups.\n\n=head2 Changes in DBI 0.83,\t11th June 1997\n\n  Added driver specification syntax to DBI->connect data_source\n  parameter: DBI->connect('dbi:driver:...', $user, $passwd);\n  The DBI->data_sources method should return data_source\n  names with the appropriate 'dbi:driver:' prefix.\n  DBI->connect will warn if \\%attr is true but not a hash ref.\n  Added the new fetchrow methods:\n    @row_ary  = $sth->fetchrow_array;\n    $ary_ref  = $sth->fetchrow_arrayref;\n    $hash_ref = $sth->fetchrow_hashref;\n  The old fetch and fetchrow methods still work.\n  Driver implementors should implement the new names for\n  fetchrow_array and fetchrow_arrayref ASAP (use the xs ALIAS:\n  directive to define aliases for fetch and fetchrow).\n  Fixed occasional problems with t/examp.t test.\n  Added automatic errstr reporting to the debug trace output.\n  Added the DBI FAQ from Alligator Descartes in module form for\n  easy reading via \"perldoc DBI::FAQ\". Needs reformatting.\n  Unknown driver specific attribute names no longer croak.\n  Fixed problem with internal neatsvpv macro.\n\n=head2 Changes in DBI 0.82,\t23rd May 1997\n\n  Added $h->{RaiseError} attribute which, if set true, causes all errors to\n  trigger a die(). This makes it much easier to implement robust applications\n  in terms of higher level eval { ... } blocks and rollbacks.\n  Added DBI->data_sources($driver) method for implementation by drivers.\n  The quote method now returns the string NULL (without quotes) for undef.\n  Added VMS support thanks to Dan Sugalski.\n  Added a 'quick start guide' to the README.\n  Added neatsvpv function pointer to DBIS structure to make it available for\n  use by drivers. A macro defines neatsvpv(sv,len) as (DBIS->neatsvpv(sv,len)).\n  Old XS macro SV_YES_NO changes to standard boolSV.\n  Since the DBIS structure has change the internal version numbers have also\n  changed (DBIXS_VERSION == 8 and DBISTATE_VERSION == 8) so drivers will have\n  to be recompiled.\n\n=head2 Changes in DBI 0.81,\t7th May 1997\n\n  Minor fix to let DBI build using less modern perls.\n  Fixed a suprious typo warning.\n\n=head2 Changes in DBI 0.80,\t6th May 1997\n\n  Builds with no changes on NT using perl5.003_99 (with thanks to Jeffrey Urlwin).\n  Automatically supports Apache::DBI (with thanks to Edmund Mergl).\n    DBI scripts no longer need to be modified to make use of Apache::DBI.\n  Added a ping method and an experimental connect_test_perf method.\n  Added a fetchhash and fetch_all methods.\n  The func method no longer pre-clears err and errstr.\n  Added ChopBlanks attribute (currently defaults to off, that may change).\n    Support for the attribute needs to be implemented by individual drivers.\n  Reworked tests into standard t/*.t form.\n  Added more pod text.  Fixed assorted bugs.\n\n\n=head2 Changes in DBI 0.79,\t7th Apr 1997\n\n  Minor release. Tidied up pod text and added some more descriptions\n  (especially disconnect). Minor changes to DBI.xs to remove compiler\n  warnings.\n\n=head2 Changes in DBI 0.78,\t28th Mar 1997\n\n  Greatly extended the pod documentation in DBI.pm, including the under\n  used bind_columns method. Use 'perldoc DBI' to read after installing.\n  Fixed $h->err. Fetching an attribute value no longer resets err.\n  Added $h->{InactiveDestroy}, see documentation for details.\n  Improved debugging of cached ('quick') attribute fetches.\n  errstr will return err code value if there is no string value.\n  Added DBI/W32ODBC to the distribution. This is a pure-perl experimental\n  DBI emulation layer for Win32::ODBC. Note that it's unsupported, your\n  mileage will vary, and bug reports without fixes will probably be ignored.\n\n=head2 Changes in DBI 0.77,\t21st Feb 1997\n\n  Removed erroneous $h->errstate and $h->errmsg methods from DBI.pm.\n  Added $h->err, $h->errstr and $h->state default methods in DBI.xs.\n  Updated informal DBI API notes in DBI.pm. Updated README slightly.\n  DBIXS.h now correctly installed into INST_ARCHAUTODIR.\n  (DBD authors will need to edit their Makefile.PL's to use\n  -I$(INSTALLSITEARCH)/auto/DBI -I$(INSTALLSITEARCH)/DBI)\n\n\n=head2 Changes in DBI 0.76,\t3rd Feb 1997\n\n  Fixed a compiler type warnings (pedantic IRIX again).\n\n=head2 Changes in DBI 0.75,\t27th Jan 1997\n\n  Fix problem introduced by a change in Perl5.003_XX.\n  Updated README and DBI.pm docs.\n\n=head2 Changes in DBI 0.74,\t14th Jan 1997\n\n  Dispatch now sets dbi_debug to the level of the current handle\n  (this makes tracing/debugging individual handles much easier).\n  The '>> DISPATCH' log line now only logged at debug >= 3 (was 2).\n  The $csr->NUM_OF_FIELDS attribute can be set if not >0 already.\n  You can log to a file using the env var PERL_DBI_DEBUG=/tmp/dbi.log.\n  Added a type cast needed by IRIX.\n  No longer sets perl_destruct_level unless debug set >= 4.\n  Make compatible with PerlIO and sfio.\n\n=head2 Changes in DBI 0.73,\t10th Oct 1996\n\n  Fixed some compiler type warnings (IRIX).\n  Fixed DBI->internal->{DebugLog} = $filename.\n  Made debug log file unbuffered.\n  Added experimental bind_param_inout method to interface.\n  Usage: $dbh->bind_param_inout($param, \\$value, $maxlen [, \\%attribs ])\n  (only currently used by DBD::Oracle at this time.)\n\n=head2 Changes in DBI 0.72,\t23 Sep 1996\n\n  Using an undefined value as a handle now gives a better\n  error message (mainly useful for emulators like Oraperl).\n  $dbh->do($sql, @params) now works for binding placeholders.\n\n=head2 Changes in DBI 0.71,\t10 July 1996\n\n  Removed spurious abort() from invalid handle check.\n  Added quote method to DBI interface and added test.\n\n=head2 Changes in DBI 0.70,\t16 June 1996\n\n  Added extra invalid handle check (dbih_getcom)\n  Fixed broken $dbh->quote method.\n  Added check for old GCC in Makefile.PL\n\n=head2 Changes in DBI 0.69\n\n  Fixed small memory leak.\n  Clarified the behaviour of DBI->connect.\n  $dbh->do now returns '0E0' instead of 'OK'.\n  Fixed \"Can't read $DBI::errstr, lost last handle\" problem.\n\n\n=head2 Changes in DBI 0.68,\t2 Mar 1996\n\n  Changes to suit perl5.002 and site_lib directories.\n  Detects old versions ahead of new in @INC.\n\n\n=head2 Changes in DBI 0.67,\t15 Feb 1996\n\n  Trivial change to test suite to fix a problem shown up by the\n  Perl5.002gamma release Test::Harness.\n\n\n=head2 Changes in DBI 0.66,\t29 Jan 1996\n\n  Minor changes to bring the DBI into line with 5.002 mechanisms,\n  specifically the xs/pm VERSION checking mechanism.\n  No functionality changes. One no-last-handle bug fix (rare problem).\n  Requires 5.002 (beta2 or later).\n\n\n=head2 Changes in DBI 0.65,\t23 Oct 1995\n\n  Added $DBI::state to hold SQL CLI / ODBC SQLSTATE value.\n  SQLSTATE \"00000\" (success) is returned as \"\" (false), all else is true.\n  If a driver does not explicitly initialise it (via $h->{State} or\n  DBIc_STATE(imp_xxh) then $DBI::state will automatically return \"\" if\n  $DBI::err is false otherwise \"S1000\" (general error).\n  As always, this is a new feature and liable to change.\n\n  The is *no longer* a default error handler!\n  You can add your own using push(@{$h->{Handlers}}, sub { ... })\n  but be aware that this interface may change (or go away).\n\n  The DBI now automatically clears $DBI::err, errstr and state before\n  calling most DBI methods. Previously error conditions would persist.\n  Added DBIh_CLEAR_ERROR(imp_xxh) macro.\n\n  DBI now EXPORT_OK's some utility functions, neat($value),\n  neat_list(@values) and dump_results($sth).\n\n  Slightly enhanced t/min.t minimal test script in an effort to help\n  narrow down the few stray core dumps that some porters still report.\n\n  Renamed readblob to blob_read (old name still works but warns).\n  Added default blob_copy_to_file method.\n\n  Added $sth = $dbh->tables method. This returns an $sth for a query\n  which has these columns: TABLE_CATALOGUE, TABLE_OWNER, TABLE_NAME,\n  TABLE_TYPE, REMARKS in that order. The TABLE_CATALOGUE column\n  should be ignored for now.\n\n\n=head2 Changes in DBI 0.64,\t23 Oct 1995\n\n  Fixed 'disconnect invalidates 1 associated cursor(s)' problem.\n  Drivers using DBIc_ACTIVE_on/off() macros should not need any changes\n  other than to test for DBIc_ACTIVE_KIDS() instead of DBIc_KIDS().\n  Fixed possible core dump in dbih_clearcom during global destruction.\n\n\n=head2 Changes in DBI 0.63,\t1 Sep 1995\n\n  Minor update. Fixed uninitialised memory bug in method\n  attribute handling and streamlined processing and debugging.\n  Revised usage definitions for bind_* methods and readblob.\n\n\n=head2 Changes in DBI 0.62,\t26 Aug 1995\n\n  Added method redirection method $h->func(..., $method_name).\n  This is now the official way to call private driver methods\n  that are not part of the DBI standard.  E.g.:\n      @ary = $sth->func('ora_types');\n  It can also be used to call existing methods. Has very low cost.\n\n  $sth->bind_col columns now start from 1 (not 0) to match SQL.\n  $sth->bind_columns now takes a leading attribute parameter (or undef),\n  e.g., $sth->bind_columns($attribs, \\$col1 [, \\$col2 , ...]);\n\n  Added handy DBD_ATTRIBS_CHECK macro to vet attribs in XS.\n  Added handy DBD_ATTRIB_GET_SVP, DBD_ATTRIB_GET_BOOL and\n  DBD_ATTRIB_GET_IV macros for handling attributes.\n\n  Fixed STORE for NUM_OF_FIELDS and NUM_OF_PARAMS.\n  Added FETCH for NUM_OF_FIELDS and NUM_OF_PARAMS.\n\n  Dispatch no longer bothers to call _untie().\n  Faster startup via install_method/_add_dispatch changes.\n\n\n=head2 Changes in DBI 0.61,\t22 Aug 1995\n\n  Added $sth->bind_col($column, \\$var [, \\%attribs ]);\n\n  This method enables perl variable to be directly and automatically\n  updated when a row is fetched. It requires no driver support\n  (if the driver has been written to use DBIS->get_fbav).\n  Currently \\%attribs is unused.\n\n  Added $sth->bind_columns(\\$var [, \\$var , ...]);\n\n  This method is a short-cut for bind_col which binds all the\n  columns of a query in one go (with no attributes). It also\n  requires no driver support.\n\n  Added $sth->bind_param($parameter, $var [, \\%attribs ]);\n\n  This method enables attributes to be specified when values are\n  bound to placeholders. It also enables binding to occur away\n  from the execute method to improve execute efficiency.\n  The DBI does not provide a default implementation of this.\n  See the DBD::Oracle module for a detailed example.\n\n  The DBI now provides default implementations of both fetch and\n  fetchrow.  Each is written in terms of the other. A driver is\n  expected to implement at least one of them.\n\n  More macro and assorted structure changes in DBDXS.h. Sorry!\n  The old dbihcom definitions have gone. All fields have macros.\n  The imp_xxh_t type is now used within the DBI as well as drivers.\n  Drivers must set DBIc_NUM_FIELDS(imp_sth) and DBIc_NUM_PARAMS(imp_sth).\n\n  test.pl includes a trivial test of bind_param and bind_columns.\n\n\n=head2 Changes in DBI 0.60,\t17 Aug 1995\n\n  This release has significant code changes but much less\n  dramatic than the previous release. The new implementors data\n  handling mechanism has matured significantly (don't be put off\n  by all the struct typedefs in DBIXS.h, there's just to make it\n  easier for drivers while keeping things type-safe).\n\n  The DBI now includes two new methods:\n\n  do\t\t$dbh->do($statement)\n\n  This method prepares, executes and finishes a statement. It is\n  designed to be used for executing one-off non-select statements\n  where there is no benefit in reusing a prepared statement handle.\n\n  fetch\t\t$array_ref = $sth->fetch;\n\n  This method is the new 'lowest-level' row fetching method. The\n  previous @row = $sth->fetchrow method now defaults to calling\n  the fetch method and expanding the returned array reference.\n\n  The DBI now provides fallback attribute FETCH and STORE functions\n  which drivers should call if they don't recognise an attribute.\n\n  THIS RELEASE IS A GOOD STARTING POINT FOR DRIVER DEVELOPERS!\n  Study DBIXS.h from the DBI and Oracle.xs etc from DBD::Oracle.\n  There will be further changes in the interface but nothing\n  as dramatic as these last two releases! (I hope :-)\n\n\n=head2 Changes in DBI 0.59\t15 Aug 1995\n\n  NOTE: THIS IS AN UNSTABLE RELEASE!\n\n  Major reworking of internal data management!\n  Performance improvements and memory leaks fixed.\n  Added a new NullP (empty) driver and a -m flag\n  to test.pl to help check for memory leaks.\n  Study DBD::Oracle version 0.21 for more details.\n  (Comparing parts of v0.21 with v0.20 may be useful.)\n\n\n=head2 Changes in DBI 0.58\t21 June 1995\n\n  Added DBI->internal->{DebugLog} = $filename;\n  Reworked internal logging.\n  Added $VERSION.\n  Made disconnect_all a compulsory method for drivers.\n\n\n=head1 ANCIENT HISTORY\n\n12th Oct 1994: First public release of the DBI module.\n               (for Perl 5.000-beta-3h)\n\n19th Sep 1994: DBperl project renamed to DBI.\n\n29th Sep 1992: DBperl project started.\n\n=cut\n", "#  $Id$\n#  Copyright (c) 1997-2002  Tim Bunce  Ireland\n#  Copyright (c) 2002       Jonathan Leffler\n#\n#  You may distribute under the terms of either the GNU General Public\n#  License or the Artistic License, as specified in the Perl README file.\n\n\n#include \"Driver_xst.h\"\n\n\nMODULE = DBD::~DRIVER~  PACKAGE = DBD::~DRIVER~\n\nREQUIRE:    1.929\nPROTOTYPES: DISABLE\n\nBOOT:\n    PERL_UNUSED_VAR(items);\n    DBISTATE_INIT;\n    /* XXX this interface will change: */\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::dr::imp_data_size\", sizeof(imp_drh_t));\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::db::imp_data_size\", sizeof(imp_dbh_t));\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::st::imp_data_size\", sizeof(imp_sth_t));\n    dbd_init(DBIS);\n\n\n# ------------------------------------------------------------\n# driver level interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~  PACKAGE = DBD::~DRIVER~::dr\n\n\nvoid\ndbixs_revision(...)\n    PPCODE:\n    ST(0) = sv_2mortal(newSViv(DBIXS_REVISION));\n\n\n#ifdef dbd_discon_all\n\n# disconnect_all renamed and ALIAS'd to avoid length clash on VMS :-(\nvoid\ndiscon_all_(drh)\n    SV *        drh\n    ALIAS:\n        disconnect_all = 1\n    CODE:\n    D_imp_drh(drh);\n    PERL_UNUSED_VAR(ix);\n    ST(0) = dbd_discon_all(drh, imp_drh) ? &PL_sv_yes : &PL_sv_no;\n\n#endif /* dbd_discon_all */\n\n\n#ifdef dbd_dr_data_sources\n\nvoid\ndata_sources(drh, attr = Nullsv)\n    SV *drh\n    SV *attr\n    PPCODE:\n    {\n        D_imp_drh(drh);\n        AV *av = dbd_dr_data_sources(drh, imp_drh, attr);\n        if (av) {\n            int i;\n            int n = AvFILL(av)+1;\n            EXTEND(sp, n);\n            for (i = 0; i < n; ++i) {\n                PUSHs(AvARRAY(av)[i]);\n            }\n        }\n    }\n\n#endif\n\n\n# ------------------------------------------------------------\n# database level interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~    PACKAGE = DBD::~DRIVER~::db\n\n\nvoid\n_login(dbh, dbname, username, password, attribs=Nullsv)\n    SV *        dbh\n    SV *        dbname\n    SV *        username\n    SV *        password\n    SV *        attribs\n    CODE:\n    {\n    D_imp_dbh(dbh);\n#if !defined(dbd_db_login6_sv)\n    STRLEN lna;\n    char *u = (SvOK(username)) ? SvPV(username,lna) : (char*)\"\";\n    char *p = (SvOK(password)) ? SvPV(password,lna) : (char*)\"\";\n#endif\n#ifdef dbd_db_login6_sv\n    ST(0) = dbd_db_login6_sv(dbh, imp_dbh, dbname, username, password, attribs) ? &PL_sv_yes : &PL_sv_no;\n#elif defined(dbd_db_login6)\n    ST(0) = dbd_db_login6(dbh, imp_dbh, SvPV_nolen(dbname), u, p, attribs) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_db_login( dbh, imp_dbh, SvPV_nolen(dbname), u, p) ? &PL_sv_yes : &PL_sv_no;\n#endif\n    }\n\n\nvoid\nselectall_arrayref(...)\n    PREINIT:\n    SV *sth;\n    SV **maxrows_svp;\n    SV **tmp_svp;\n    SV *attr = &PL_sv_undef;\n    imp_sth_t *imp_sth;\n    CODE:\n    if (items > 2) {\n        attr = ST(2);\n        if (SvROK(attr) &&\n                (DBD_ATTRIB_TRUE(attr,\"Slice\",5,tmp_svp) || DBD_ATTRIB_TRUE(attr,\"Columns\",7,tmp_svp))\n        ) {\n            /* fallback to perl implementation */\n            SV *tmp =dbixst_bounce_method(\"DBD::~DRIVER~::db::SUPER::selectall_arrayref\", items);\n            SPAGAIN;\n            ST(0) = tmp;\n            XSRETURN(1);\n        }\n    }\n    /* --- prepare --- */\n    if (SvROK(ST(1))) {\n        MAGIC *mg;\n        sth = ST(1);\n        /* switch to inner handle if not already */\n        if ( (mg = mg_find(SvRV(sth),'P')) )\n            sth = mg->mg_obj;\n    }\n    else {\n        sth = dbixst_bounce_method(\"prepare\", 3);\n        SPAGAIN; SP -= items; /* because stack might have been realloc'd */\n        if (!SvROK(sth))\n            XSRETURN_UNDEF;\n        /* switch to inner handle */\n        sth = mg_find(SvRV(sth),'P')->mg_obj;\n    }\n    imp_sth = (imp_sth_t*)(DBIh_COM(sth));\n    /* --- bind_param --- */\n    if (items > 3) {    /* need to bind params before execute */\n        if (!dbdxst_bind_params(sth, imp_sth, items-2, ax+2) ) {\n            XSRETURN_UNDEF;\n        }\n    }\n    /* --- execute --- */\n    DBIc_ROW_COUNT(imp_sth) = 0;\n    if ( dbd_st_execute(sth, imp_sth) <= -2 ) { /* -2 == error */\n        XSRETURN_UNDEF;\n    }\n    /* --- fetchall --- */\n    maxrows_svp = DBD_ATTRIB_GET_SVP(attr, \"MaxRows\", 7);\n    ST(0) = dbdxst_fetchall_arrayref(sth, &PL_sv_undef, (maxrows_svp) ? *maxrows_svp : &PL_sv_undef);\n\n\nvoid\nselectrow_arrayref(...)\n    ALIAS:\n        selectrow_array = 1\n    PREINIT:\n    int is_selectrow_array = (ix == 1);\n    imp_sth_t *imp_sth;\n    SV *sth;\n    AV *row_av;\n    PPCODE:\n    if (SvROK(ST(1))) {\n        MAGIC *mg;\n        sth = ST(1);\n        /* switch to inner handle if not already */\n        if ( (mg = mg_find(SvRV(sth),'P')) )\n            sth = mg->mg_obj;\n    }\n    else {\n        /* --- prepare --- */\n        sth = dbixst_bounce_method(\"prepare\", 3);\n        SPAGAIN; SP -= items; /* because stack might have been realloc'd */\n        if (!SvROK(sth)) {\n            if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n        }\n        /* switch to inner handle */\n        sth = mg_find(SvRV(sth),'P')->mg_obj;\n    }\n    imp_sth = (imp_sth_t*)(DBIh_COM(sth));\n    /* --- bind_param --- */\n    if (items > 3) {    /* need to bind params before execute */\n        if (!dbdxst_bind_params(sth, imp_sth, items-2, ax+2) ) {\n            if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n        }\n    }\n    /* --- execute --- */\n    DBIc_ROW_COUNT(imp_sth) = 0;\n    if ( dbd_st_execute(sth, imp_sth) <= -2 ) { /* -2 == error */\n        if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n    }\n    /* --- fetchrow_arrayref --- */\n    row_av = dbd_st_fetch(sth, imp_sth);\n    if (!row_av) {\n        if (GIMME == G_SCALAR)\n            PUSHs(&PL_sv_undef);\n    }\n    else if (is_selectrow_array) {\n        int i;\n        int num_fields = AvFILL(row_av)+1;\n        if (GIMME == G_SCALAR)\n            num_fields = 1; /* return just first field */\n        EXTEND(sp, num_fields);\n        for(i=0; i < num_fields; ++i) {\n            PUSHs(AvARRAY(row_av)[i]);\n        }\n    }\n    else {\n        PUSHs( sv_2mortal(newRV((SV *)row_av)) );\n    }\n    /* --- finish --- */\n#ifdef dbd_st_finish3\n    dbd_st_finish3(sth, imp_sth, 0);\n#else\n    dbd_st_finish(sth, imp_sth);\n#endif\n\n\n#ifdef dbd_db_do4 /* deebeedee-deebee-doo, deebee-doobee-dah? */\n\nvoid\ndo(dbh, statement, params = Nullsv)\n    SV *        dbh\n    char *      statement\n    SV *        params\n    CODE:\n    {\n    D_imp_dbh(dbh);\n    IV retval;\n    retval = dbd_db_do4(dbh, imp_dbh, statement, params);\n    /* remember that dbd_db_do4 must return <= -2 for error     */\n    if (retval == 0)            /* ok with no rows affected     */\n        XST_mPV(0, \"0E0\");      /* (true but zero)              */\n    else if (retval < -1)       /* -1 == unknown number of rows */\n        XST_mUNDEF(0);          /* <= -2 means error            */\n    else\n        XST_mIV(0, retval);     /* typically 1, rowcount or -1  */\n    }\n\n#endif\n\n\n#ifdef dbd_db_last_insert_id\n\nvoid\nlast_insert_id(dbh, catalog, schema, table, field, attr=Nullsv)\n    SV *        dbh\n    SV *        catalog\n    SV *        schema\n    SV *        table\n    SV *        field\n    SV *        attr\n    CODE:\n    {\n    D_imp_dbh(dbh);\n    ST(0) = dbd_db_last_insert_id(dbh, imp_dbh, catalog, schema, table, field, attr);\n    }\n\n#endif\n\n\nvoid\ncommit(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if (DBIc_has(imp_dbh,DBIcf_AutoCommit) && DBIc_WARN(imp_dbh))\n        warn(\"commit ineffective with AutoCommit enabled\");\n    ST(0) = dbd_db_commit(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n\n\nvoid\nrollback(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if (DBIc_has(imp_dbh,DBIcf_AutoCommit) && DBIc_WARN(imp_dbh))\n        warn(\"rollback ineffective with AutoCommit enabled\");\n    ST(0) = dbd_db_rollback(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n\n\nvoid\ndisconnect(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if ( !DBIc_ACTIVE(imp_dbh) ) {\n        XSRETURN_YES;\n    }\n    /* Check for disconnect() being called whilst refs to cursors       */\n    /* still exists. This possibly needs some more thought.             */\n    if (DBIc_ACTIVE_KIDS(imp_dbh) && DBIc_WARN(imp_dbh) && !PL_dirty) {\n        STRLEN lna;\n        char *plural = (DBIc_ACTIVE_KIDS(imp_dbh)==1) ? (char*)\"\" : (char*)\"s\";\n        warn(\"%s->disconnect invalidates %d active statement handle%s %s\",\n            SvPV(dbh,lna), (int)DBIc_ACTIVE_KIDS(imp_dbh), plural,\n            \"(either destroy statement handles or call finish on them before disconnecting)\");\n    }\n    ST(0) = dbd_db_disconnect(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n    DBIc_ACTIVE_off(imp_dbh);   /* ensure it's off, regardless */\n\n\nvoid\nSTORE(dbh, keysv, valuesv)\n    SV *        dbh\n    SV *        keysv\n    SV *        valuesv\n    CODE:\n    D_imp_dbh(dbh);\n    if (SvGMAGICAL(valuesv))\n        mg_get(valuesv);\n    ST(0) = &PL_sv_yes;\n    if (!dbd_db_STORE_attrib(dbh, imp_dbh, keysv, valuesv))\n        if (!DBIc_DBISTATE(imp_dbh)->set_attr(dbh, keysv, valuesv))\n            ST(0) = &PL_sv_no;\n\n\nvoid\nFETCH(dbh, keysv)\n    SV *        dbh\n    SV *        keysv\n    CODE:\n    D_imp_dbh(dbh);\n    SV *valuesv = dbd_db_FETCH_attrib(dbh, imp_dbh, keysv);\n    if (!valuesv)\n        valuesv = DBIc_DBISTATE(imp_dbh)->get_attr(dbh, keysv);\n    ST(0) = valuesv;    /* dbd_db_FETCH_attrib did sv_2mortal   */\n\n\nvoid\nDESTROY(dbh)\n    SV *        dbh\n    PPCODE:\n    /* keep in sync with default DESTROY in DBI.xs */\n    D_imp_dbh(dbh);\n    ST(0) = &PL_sv_yes;\n    if (!DBIc_IMPSET(imp_dbh)) {        /* was never fully set up       */\n        STRLEN lna;\n        if (DBIc_WARN(imp_dbh) && !PL_dirty && DBIc_DBISTATE(imp_dbh)->debug >= 2)\n             PerlIO_printf(DBIc_LOGPIO(imp_dbh),\n                \"         DESTROY for %s ignored - handle not initialised\\n\",\n                    SvPV(dbh,lna));\n    }\n    else {\n        if (DBIc_IADESTROY(imp_dbh)) {            /* wants ineffective destroy */\n            DBIc_ACTIVE_off(imp_dbh);\n            if (DBIc_DBISTATE(imp_dbh)->debug)\n                 PerlIO_printf(DBIc_LOGPIO(imp_dbh), \"         DESTROY %s skipped due to InactiveDestroy\\n\", SvPV_nolen(dbh));\n        }\n        if (DBIc_ACTIVE(imp_dbh)) {\n            if (!DBIc_has(imp_dbh,DBIcf_AutoCommit)) {\n                /* Application is using transactions and hasn't explicitly disconnected.\n                    Some databases will automatically commit on graceful disconnect.\n                    Since we're about to gracefully disconnect as part of the DESTROY\n                    we want to be sure we're not about to implicitly commit changes\n                    that are incomplete and should be rolled back. (The DESTROY may\n                    be due to a RaiseError, for example.) So we rollback here.\n                    This will be harmless if the application has issued a commit,\n                    XXX Could add an attribute flag to indicate that the driver\n                    doesn't have this problem. Patches welcome.\n                */\n                if (DBIc_WARN(imp_dbh) /* only warn if likely to be useful... */\n                &&  DBIc_is(imp_dbh, DBIcf_Executed) /* has not just called commit/rollback */\n            /*  && !DBIc_is(imp_dbh, DBIcf_ReadOnly) -- is not read only */\n                && (!PL_dirty || DBIc_DBISTATE(imp_dbh)->debug >= 3)\n                ) {\n                    warn(\"Issuing rollback() due to DESTROY without explicit disconnect() of %s handle %s\",\n                        SvPV_nolen(*hv_fetch((HV*)SvRV(dbh), \"ImplementorClass\", 16, 1)),\n                        SvPV_nolen(*hv_fetch((HV*)SvRV(dbh), \"Name\", 4, 1))\n                    );\n                }\n                dbd_db_rollback(dbh, imp_dbh);                  /* ROLLBACK! */\n            }\n            dbd_db_disconnect(dbh, imp_dbh);\n            DBIc_ACTIVE_off(imp_dbh);   /* ensure it's off, regardless */\n        }\n        dbd_db_destroy(dbh, imp_dbh);\n    }\n\n\n#ifdef dbd_take_imp_data\n\nvoid\ntake_imp_data(h)\n    SV * h\n    CODE:\n    D_imp_xxh(h);\n    /* dbd_take_imp_data() returns &sv_no (or other defined but false value)\n     * to indicate \"preparations complete, now call SUPER::take_imp_data\" for me.\n     * Anything else is returned to the caller via sv_2mortal(sv), typically that\n     * would be &sv_undef for error or an SV holding the imp_data.\n     */\n    SV *sv = dbd_take_imp_data(h, imp_xxh, NULL);\n    if (SvOK(sv) && !SvTRUE(sv)) {\n        SV *tmp = dbixst_bounce_method(\"DBD::~DRIVER~::db::SUPER::take_imp_data\", items);\n        SPAGAIN;\n        ST(0) = tmp;\n    } else {\n        ST(0) = sv_2mortal(sv);\n    }\n\n#endif\n\n#ifdef dbd_db_data_sources\n\nvoid\ndata_sources(dbh, attr = Nullsv)\n    SV *dbh\n    SV *attr\n    PPCODE:\n    {\n        D_imp_dbh(dbh);\n        AV *av = dbd_db_data_sources(dbh, imp_dbh, attr);\n        if (av) {\n            int i;\n            int n = AvFILL(av)+1;\n            EXTEND(sp, n);\n            for (i = 0; i < n; ++i) {\n                PUSHs(AvARRAY(av)[i]);\n            }\n        }\n    }\n\n#endif\n\n# -- end of DBD::~DRIVER~::db\n\n# ------------------------------------------------------------\n# statement interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~    PACKAGE = DBD::~DRIVER~::st\n\n\nvoid\n_prepare(sth, statement, attribs=Nullsv)\n    SV *        sth\n    SV *        statement\n    SV *        attribs\n    CODE:\n    {\n    D_imp_sth(sth);\n    DBD_ATTRIBS_CHECK(\"_prepare\", sth, attribs);\n#ifdef dbd_st_prepare_sv\n    ST(0) = dbd_st_prepare_sv(sth, imp_sth, statement, attribs) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_st_prepare(sth, imp_sth, SvPV_nolen(statement), attribs) ? &PL_sv_yes : &PL_sv_no;\n#endif\n    }\n\n\n#ifdef dbd_st_rows\n\nvoid\nrows(sth)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    XST_mIV(0, dbd_st_rows(sth, imp_sth));\n\n#endif /* dbd_st_rows */\n\n\n#ifdef dbd_st_bind_col\n\nvoid\nbind_col(sth, col, ref, attribs=Nullsv)\n    SV *        sth\n    SV *        col\n    SV *        ref\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    if (SvGMAGICAL(ref))\n        mg_get(ref);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_col\", sth, attribs);\n            /* XXX we should perhaps complain if TYPE is not SvNIOK */\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    switch(dbd_st_bind_col(sth, imp_sth, col, ref, sql_type, attribs)) {\n    case 2:     ST(0) = &PL_sv_yes;        /* job done completely */\n                break;\n    case 1:     /* fallback to DBI default */\n                ST(0) = (DBIc_DBISTATE(imp_sth)->bind_col(sth, col, ref, attribs))\n                    ? &PL_sv_yes : &PL_sv_no;\n                break;\n    default:    ST(0) = &PL_sv_no;         /* dbd_st_bind_col has called set_err */\n                break;\n    }\n    }\n\n#endif /* dbd_st_bind_col */\n\nvoid\nbind_param(sth, param, value, attribs=Nullsv)\n    SV *        sth\n    SV *        param\n    SV *        value\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    if (SvGMAGICAL(value))\n        mg_get(value);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_param\", sth, attribs);\n            /* XXX we should perhaps complain if TYPE is not SvNIOK */\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    ST(0) = dbd_bind_ph(sth, imp_sth, param, value, sql_type, attribs, FALSE, 0)\n                ? &PL_sv_yes : &PL_sv_no;\n    }\n\n\nvoid\nbind_param_inout(sth, param, value_ref, maxlen, attribs=Nullsv)\n    SV *        sth\n    SV *        param\n    SV *        value_ref\n    IV          maxlen\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    SV *value;\n    if (!SvROK(value_ref) || SvTYPE(SvRV(value_ref)) > SVt_PVMG)\n        croak(\"bind_param_inout needs a reference to a scalar value\");\n    value = SvRV(value_ref);\n    if (SvREADONLY(value))\n        croak(\"Modification of a read-only value attempted\");\n    if (SvGMAGICAL(value))\n        mg_get(value);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_param\", sth, attribs);\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    ST(0) = dbd_bind_ph(sth, imp_sth, param, value, sql_type, attribs, TRUE, maxlen)\n                ? &PL_sv_yes : &PL_sv_no;\n    }\n\n\nvoid\nexecute(sth, ...)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    int retval;\n    if (items > 1) {    /* need to bind params */\n        if (!dbdxst_bind_params(sth, imp_sth, items, ax) ) {\n            XSRETURN_UNDEF;\n        }\n    }\n    /* XXX this code is duplicated in selectrow_arrayref above  */\n    if (DBIc_ROW_COUNT(imp_sth) > 0) /* reset for re-execute */\n        DBIc_ROW_COUNT(imp_sth) = 0;\n    retval = dbd_st_execute(sth, imp_sth);\n    /* remember that dbd_st_execute must return <= -2 for error */\n    if (retval == 0)            /* ok with no rows affected     */\n        XST_mPV(0, \"0E0\");      /* (true but zero)              */\n    else if (retval < -1)       /* -1 == unknown number of rows */\n        XST_mUNDEF(0);          /* <= -2 means error            */\n    else\n        XST_mIV(0, retval);     /* typically 1, rowcount or -1  */\n\n\n#ifdef dbd_st_execute_for_fetch\n\nvoid\nexecute_for_fetch(sth, fetch_tuple_sub, tuple_status = Nullsv)\n    SV *        sth\n    SV *        fetch_tuple_sub\n    SV *        tuple_status\n    CODE:\n    {\n    D_imp_sth(sth);\n    ST(0) = dbd_st_execute_for_fetch(sth, imp_sth, fetch_tuple_sub, tuple_status);\n    }\n\n#endif\n\n\n\nvoid\nfetchrow_arrayref(sth)\n    SV *        sth\n    ALIAS:\n        fetch = 1\n    CODE:\n    D_imp_sth(sth);\n    AV *av;\n    PERL_UNUSED_VAR(ix);\n    av = dbd_st_fetch(sth, imp_sth);\n    ST(0) = (av) ? sv_2mortal(newRV((SV *)av)) : &PL_sv_undef;\n\n\nvoid\nfetchrow_array(sth)\n    SV *        sth\n    ALIAS:\n        fetchrow = 1\n    PPCODE:\n    D_imp_sth(sth);\n    AV *av;\n    av = dbd_st_fetch(sth, imp_sth);\n    if (av) {\n        int i;\n        int num_fields = AvFILL(av)+1;\n        EXTEND(sp, num_fields);\n        for(i=0; i < num_fields; ++i) {\n            PUSHs(AvARRAY(av)[i]);\n        }\n        PERL_UNUSED_VAR(ix);\n    }\n\n\nvoid\nfetchall_arrayref(sth, slice=&PL_sv_undef, batch_row_count=&PL_sv_undef)\n    SV *        sth\n    SV *        slice\n    SV *        batch_row_count\n    CODE:\n    if (SvOK(slice)) {  /* fallback to perl implementation */\n        SV *tmp = dbixst_bounce_method(\"DBD::~DRIVER~::st::SUPER::fetchall_arrayref\", 3);\n        SPAGAIN;\n        ST(0) = tmp;\n    }\n    else {\n        ST(0) = dbdxst_fetchall_arrayref(sth, slice, batch_row_count);\n    }\n\n\nvoid\nfinish(sth)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    D_imp_dbh_from_sth;\n    if (!DBIc_ACTIVE(imp_sth)) {\n        /* No active statement to finish        */\n        XSRETURN_YES;\n    }\n    if (!DBIc_ACTIVE(imp_dbh)) {\n        /* Either an explicit disconnect() or global destruction        */\n        /* has disconnected us from the database. Finish is meaningless */\n        DBIc_ACTIVE_off(imp_sth);\n        XSRETURN_YES;\n    }\n#ifdef dbd_st_finish3\n    ST(0) = dbd_st_finish3(sth, imp_sth, 0) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_st_finish(sth, imp_sth) ? &PL_sv_yes : &PL_sv_no;\n#endif\n\n\nvoid\nblob_read(sth, field, offset, len, destrv=Nullsv, destoffset=0)\n    SV *        sth\n    int field\n    long        offset\n    long        len\n    SV *        destrv\n    long        destoffset\n    CODE:\n    {\n    D_imp_sth(sth);\n    if (!destrv)\n        destrv = sv_2mortal(newRV(sv_2mortal(newSV(0))));\n    if (dbd_st_blob_read(sth, imp_sth, field, offset, len, destrv, destoffset))\n         ST(0) = SvRV(destrv);\n    else ST(0) = &PL_sv_undef;\n    }\n\n\nvoid\nSTORE(sth, keysv, valuesv)\n    SV *        sth\n    SV *        keysv\n    SV *        valuesv\n    CODE:\n    D_imp_sth(sth);\n    if (SvGMAGICAL(valuesv))\n        mg_get(valuesv);\n    ST(0) = &PL_sv_yes;\n    if (!dbd_st_STORE_attrib(sth, imp_sth, keysv, valuesv))\n        if (!DBIc_DBISTATE(imp_sth)->set_attr(sth, keysv, valuesv))\n            ST(0) = &PL_sv_no;\n\n\n# FETCH renamed and ALIAS'd to avoid case clash on VMS :-(\nvoid\nFETCH_attrib(sth, keysv)\n    SV *        sth\n    SV *        keysv\n    ALIAS:\n    FETCH = 1\n    CODE:\n    D_imp_sth(sth);\n    SV *valuesv;\n    PERL_UNUSED_VAR(ix);\n    valuesv = dbd_st_FETCH_attrib(sth, imp_sth, keysv);\n    if (!valuesv)\n        valuesv = DBIc_DBISTATE(imp_sth)->get_attr(sth, keysv);\n    ST(0) = valuesv;    /* dbd_st_FETCH_attrib did sv_2mortal   */\n\n\nvoid\nDESTROY(sth)\n    SV *        sth\n    PPCODE:\n    /* keep in sync with default DESTROY in DBI.xs */\n    D_imp_sth(sth);\n    ST(0) = &PL_sv_yes;\n    if (!DBIc_IMPSET(imp_sth)) {        /* was never fully set up       */\n        STRLEN lna;\n        if (DBIc_WARN(imp_sth) && !PL_dirty && DBIc_DBISTATE(imp_sth)->debug >= 2)\n             PerlIO_printf(DBIc_LOGPIO(imp_sth),\n                \"         DESTROY for %s ignored - handle not initialised\\n\",\n                    SvPV(sth,lna));\n    }\n    else {\n        if (DBIc_IADESTROY(imp_sth)) {  /* wants ineffective destroy    */\n            DBIc_ACTIVE_off(imp_sth);\n            if (DBIc_DBISTATE(imp_sth)->debug)\n                 PerlIO_printf(DBIc_LOGPIO(imp_sth), \"         DESTROY %s skipped due to InactiveDestroy\\n\", SvPV_nolen(sth));\n        }\n        if (DBIc_ACTIVE(imp_sth)) {\n            D_imp_dbh_from_sth;\n            if (!PL_dirty && DBIc_ACTIVE(imp_dbh)) {\n#ifdef dbd_st_finish3\n                dbd_st_finish3(sth, imp_sth, 1);\n#else\n                dbd_st_finish(sth, imp_sth);\n#endif\n            }\n            else {\n                DBIc_ACTIVE_off(imp_sth);\n            }\n        }\n        dbd_st_destroy(sth, imp_sth);\n    }\n\n# end of ~DRIVER~.xst\n# vim:ts=8:sw=4:et\n"], "fixing_code": ["=head1 NAME\n\nDBI::Changes - List of significant changes to the DBI\n\n(As of $Date$ $Revision$)\n\n=encoding ISO8859-1\n\n=cut\n\n=head2 Changes in DBI 1.628 - 24th June 2013\n\n    Fixed missing fields on partial insert via DBI::DBD::SqlEngine\n        engines (DBD::CSV, DBD::DBM etc.) [H.Merijn Brand, Jens Rehsack]\n    Fixed stack corruption on callbacks RT#85562 RT#84974 [Aaron Schweiger]\n\n    Added support for finding tables in multiple directories\n        via new DBD::File f_dir_search attribute [H.Merijn Brand]\n    Enable compiling by C++ RT#84285 [Kurt Jaeger]\n\n    Typo fixes in pod and comment [David Steinbrunner]\n    Change DBI's docs from svn to git [H.Merijn Brand]\n    Clarify bind_col TYPE attribute is sticky [Martin J. Evans]\n    Spelling fixes [Ville Skytt\u00e4]\n    Changed $VERSIONs to hardcoded strings [H.Merijn Brand]\n\n=head2 Changes in DBI 1.627 - 16th May 2013\n\n    Fixed VERSION regression in DBI::SQL::Nano [Tim Bunce]\n\n=head2 Changes in DBI 1.626 - 15th May 2013\n\n    Fixed pod text/link was reversed in a few cases RT#85168\n        [H.Merijn Brand]\n\n    Handle aliasing of STORE'd attributes in DBI::DBD::SqlEngine\n        [Jens Rehsack]\n\n    Updated repository URI to git [Jens Rehsack]\n\n    Fixed skip() count arg in t/48dbi_dbd_sqlengine.t [Tim Bunce]\n\n=head2 Changes in DBI 1.625 (svn r15595) 28th March 2013\n\n  Fixed heap-use-after-free during global destruction RT#75614\n    thanks to Reini Urban.\n  Fixed ignoring RootClass attribute during connect() by\n    DBI::DBD::SqlEngine reported in RT#84260 by Michael Schout\n\n=head2 Changes in DBI 1.624 (svn r15576) 22nd March 2013\n\n  Fixed Gofer for hash randomization in perl 5.17.10+ RT#84146\n\n  Clarify docs for can() re RT#83207\n\n=head2 Changes in DBI 1.623 (svn r15547) 2nd Jan 2013\n\n  Fixed RT#64330 - ping wipes out errstr (Martin J. Evans).\n  Fixed RT#75868 - DBD::Proxy shouldn't call connected() on the server.\n  Fixed RT#80474 - segfault in DESTROY with threads.\n  Fixed RT#81516 - Test failures due to hash randomisation in perl 5.17.6\n    thanks to Jens Rehsack and H.Merijn Brand and feedback on IRC\n  Fixed RT#81724 - Handle copy-on-write scalars (sprout)\n  Fixed unused variable / self-assignment compiler warnings.\n  Fixed default table_info in DBI::DBD::SqlEngine which passed NAMES\n    attribute instead of NAME to DBD::Sponge RT72343 (Martin J. Evans)\n\n  Corrected a spelling error thanks to Chris Sanders.\n  Corrected typo in DBI->installed_versions docs RT#78825\n    thanks to Jan Dubois.\n\n  Refactored table meta information management from DBD::File into\n    DBI::DBD::SqlEngine (H.Merijn Brand, Jens Rehsack)\n  Prevent undefined f_dir being used in opendir (H.Merijn Brand)\n\n  Added logic to force destruction of children before parents\n    during global destruction. See RT#75614.\n  Added DBD::File Plugin-Support for table names and data sources\n    (Jens Rehsack, #dbi Team)\n  Added new tests to 08keeperr for RT#64330\n    thanks to Kenichi Ishigaki.\n  Added extra internal handle type check, RT#79952\n    thanks to Reini Urban.\n  Added cubrid_ registered prefix for DBD::cubrid, RT#78453\n\n  Removed internal _not_impl method (Martin J. Evans).\n\n  NOTE: The \"old-style\" DBD::DBM attributes 'dbm_ext' and 'dbm_lockfile'\n    have been deprecated for several years and their use will now generate\n    a warning.\n\n=head2 Changes in DBI 1.622 (svn r15327) 6th June 2012\n\n  Fixed lack of =encoding in non-ASCII pod docs. RT#77588\n\n  Corrected typo in DBI::ProfileDumper thanks to Finn Hakansson.\n\n=head2 Changes in DBI 1.621 (svn r15315) 21st May 2012\n\n  Fixed segmentation fault when a thread is created from\n    within another thread RT#77137, thanks to Dave Mitchell.\n  Updated previous Changes to credit Booking.com for sponsoring\n    Dave Mitchell's recent DBI optimization work.\n\n=head2 Changes in DBI 1.620 (svn r15300) 25th April 2012\n\n  Modified column renaming in fetchall_arrayref, added in 1.619,\n    to work on column index numbers not names (an incompatible change).\n  Reworked the fetchall_arrayref documentation.\n  Hash slices in fetchall_arrayref now detect invalid column names.\n\n=head2 Changes in DBI 1.619 (svn r15294) 23rd April 2012\n\n  Fixed the connected method to stop showing the password in\n    trace file (Martin J. Evans).\n  Fixed _install_method to set CvFILE correctly\n    thanks to sprout RT#76296\n  Fixed SqlEngine \"list_tables\" thanks to David McMath\n    and Norbert Gruener. RT#67223 RT#69260\n\n  Optimized DBI method dispatch thanks to Dave Mitchell.\n  Optimized driver access to DBI internal state thanks to Dave Mitchell.\n  Optimized driver access to handle data thanks to Dave Mitchell.\n    Dave's work on these optimizations was sponsored by Booking.com.\n  Optimized fetchall_arrayref with hash slice thanks\n    to Dagfinn Ilmari Manns\u00e5ker. RT#76520\n  Allow renaming columns in fetchall_arrayref hash slices\n    thanks to Dagfinn Ilmari Manns\u00e5ker. RT#76572\n  Reserved snmp_ and tree_ for DBD::SNMP and DBD::TreeData\n\n=head2 Changes in DBI 1.618 (svn r15170) 25rd February 2012\n\n  Fixed compiler warnings in Driver_xst.h (Martin J. Evans)\n  Fixed compiler warning in DBI.xs (H.Merijn Brand)\n  Fixed Gofer tests failing on Windows RT74975 (Manoj Kumar)\n  Fixed my_ctx compile errors on Windows (Dave Mitchell)\n\n  Significantly optimized method dispatch via cache (Dave Mitchell)\n  Significantly optimized DBI internals for threads (Dave Mitchell)\n    Dave's work on these optimizations was sponsored by Booking.com.\n  Xsub to xsub calling optimization now enabled for threaded perls.\n  Corrected typo in example in docs (David Precious)\n  Added note that calling clone() without an arg may warn in future.\n  Minor changes to the install_method() docs in DBI::DBD.\n  Updated dbipport.h from Devel::PPPort 3.20\n\n=head2 Changes in DBI 1.617 (svn r15107) 30th January 2012\n\n  NOTE: The officially supported minimum perl version will change\n  from perl 5.8.1 (2003) to perl 5.8.3 (2004) in a future release.\n  (The last change, from perl 5.6 to 5.8.1, was announced\n  in July 2008 and implemented in DBI 1.611 in April 2010.)\n\n  Fixed ParamTypes example in the pod (Martin J. Evans)\n  Fixed the definition of ArrayTupleStatus and remove confusion over\n    rows affected in list context of execute_array (Martin J. Evans)\n  Fixed sql_type_cast example and typo in errors (Martin J. Evans)\n  Fixed Gofer error handling for keeperr methods like ping (Tim Bunce)\n  Fixed $dbh->clone({}) RT73250 (Tim Bunce)\n  Fixed is_nested_call logic error RT73118 (Reini Urban)\n\n  Enhanced performance for threaded perls (Dave Mitchell, Tim Bunce)\n    Dave's work on this optimization was sponsored by Booking.com.\n  Enhanced and standardized driver trace level mechanism (Tim Bunce)\n  Removed old code that was an inneffective attempt to detect\n    people doing DBI->{Attrib}.\n  Clear ParamValues on bind_param param count error RT66127 (Tim Bunce)\n  Changed DBI::ProxyServer to require DBI at compile-time RT62672 (Tim Bunce)\n\n  Added pod for default_user to DBI::DBD (Martin J. Evans)\n  Added CON, ENC and DBD trace flags and extended 09trace.t (Martin J. Evans)\n  Added TXN trace flags and applied CON and TXN to relevant methods (Tim Bunce)\n  Added some more fetchall_arrayref(..., $maxrows) tests (Tim Bunce)\n  Clarified docs for fetchall_arrayref called on an inactive handle.\n  Clarified docs for clone method (Tim Bunce)\n  Added note to DBI::Profile about async queries (Marcel Gr\u00fcnauer).\n  Reserved spatialite_ as a driver prefix for DBD::Spatialite\n  Reserved mo_ as a driver prefix for DBD::MO\n  Updated link to the SQL Reunion 95 docs, RT69577 (Ash Daminato)\n  Changed links for DBI recipes. RT73286 (Martin J. Evans)\n\n=head2 Changes in DBI 1.616 (svn r14616) 30th December 2010\n\n  Fixed spurious dbi_profile lines written to the log when\n    profiling is enabled and a trace flag, like SQL, is used.\n  Fixed to recognize SQL::Statement errors even if instantiated\n    with RaiseError=0 (Jens Rehsack)\n  Fixed RT#61513 by catching attribute assignment to tied table access\n    interface (Jens Rehsack)\n  Fixing some misbehavior of DBD::File when running within the Gofer\n    server.\n  Fixed compiler warnings RT#62640\n\n  Optimized connect() to remove redundant FETCH of \\%attrib values.\n  Improved initialization phases in DBI::DBD::SqlEngine (Jens Rehsack)\n\n  Added DBD::Gofer::Transport::corostream. An experimental proof-of-concept\n    transport that enables asynchronous database calls with few code changes.\n    It enables asynchronous use of DBI frameworks like DBIx::Class.\n\n  Added additional notes on DBDs which avoid creating a statement in\n    the do() method and the effects on error handlers (Martin J. Evans)\n  Adding new attribute \"sql_dialect\" to DBI::DBD::SqlEngine to allow\n    users control used SQL dialect (ANSI, CSV or AnyData), defaults to\n    CSV (Jens Rehsack)\n  Add documentation for DBI::DBD::SqlEngine attributes (Jens Rehsack)\n  Documented dbd_st_execute return (Martin J. Evans)\n  Fixed typo in InactiveDestroy thanks to Emmanuel Rodriguez.\n\n=head2 Changes in DBI 1.615 (svn r14438) 21st September 2010\n\n  Fixed t/51dbm_file for file/directory names with whitespaces in them\n    RT#61445 (Jens Rehsack)\n  Fixed compiler warnings from ignored hv_store result (Martin J. Evans)\n  Fixed portability to VMS (Craig A. Berry)\n\n=head2 Changes in DBI 1.614 (svn r14408) 17th September 2010\n\n  Fixed bind_param () in DBI::DBD::SqlEngine (rt#61281)\n  Fixed internals to not refer to old perl symbols that\n    will no longer be visible in perl >5.13.3 (Andreas Koenig)\n    Many compiled drivers are likely to need updating.\n  Fixed issue in DBD::File when absolute filename is used as table name\n    (Jens Rehsack)\n  Croak manually when file after tie doesn't exists in DBD::DBM\n    when it have to exists (Jens Rehsack)\n  Fixed issue in DBD::File when users set individual file name for tables\n    via f_meta compatibility interface - reported by H.Merijn Brand while\n    working on RT#61168 (Jens Rehsack)\n\n  Changed 50dbm_simple to simplify and fix problems (Martin J. Evans)\n  Changed 50dbm_simple to skip aggregation tests when not using\n    SQL::Statement (Jens Rehsack)\n  Minor speed improvements in DBD::File (Jens Rehsack)\n\n  Added $h->{AutoInactiveDestroy} as simpler safer form of\n    $h->{InactiveDestroy} (David E. Wheeler)\n  Added ability for parallel testing \"prove -j4 ...\" (Jens Rehsack)\n  Added tests for delete in DBM (H.Merijn Brand)\n  Added test for absolute filename as table to 51dbm_file (Jens Rehsack)\n  Added two initialization phases to DBI::DBD::SqlEngine (Jens Rehsack)\n  Added improved developers documentation for DBI::DBD::SqlEngine\n    (Jens Rehsack)\n  Added guides how to write DBI drivers using DBI::DBD::SqlEngine\n    or DBD::File (Jens Rehsack)\n  Added register_compat_map() and table_meta_attr_changed() to\n    DBD::File::Table to support clean fix of RT#61168 (Jens Rehsack)\n\n=head2 Changes in DBI 1.613 (svn r14271) 22nd July 2010\n\n  Fixed Win32 prerequisite module from PathTools to File::Spec.\n\n  Changed attribute headings and fixed references in DBI pod (Martin J. Evans)\n  Corrected typos in DBI::FAQ and DBI::ProxyServer (Ansgar Burchardt)\n\n=head2 Changes in DBI 1.612 (svn r14254) 16th July 2010\n\nNOTE: This is a minor release for the DBI core but a major release for\nDBD::File and drivers that depend on it, like DBD::DBM and DBD::CSV.\n\nThis is also the first release where the bulk of the development work\nhas been done by other people. I'd like to thank (in no particular order)\nJens Rehsack, Martin J. Evans, and H.Merijn Brand for all their contributions.\n\n  Fixed DBD::File's {ChopBlank} handling (it stripped \\s instead of space\n    only as documented in DBI) (H.Merijn Brand)\n  Fixed DBD::DBM breakage with SQL::Statement (Jens Rehsack, fixes RT#56561)\n  Fixed DBD::File file handle leak (Jens Rehsack)\n  Fixed problems in 50dbm.t when running tests with multiple\n    dbms (Martin J. Evans)\n  Fixed DBD::DBM bugs found during tests (Jens Rehsack)\n  Fixed DBD::File doesn't find files without extensions under some\n    circumstances (Jens Rehsack, H.Merijn Brand, fixes RT#59038)\n\n  Changed Makefile.PL to modernize with CONFLICTS, recommended dependencies\n    and resources (Jens Rehsack)\n  Changed DBI::ProfileDumper to rename any existing profile file by\n    appending .prev, instead of overwriting it.\n  Changed DBI::ProfileDumper::Apache to work in more configurations\n    including vhosts using PerlOptions +Parent.\n  Add driver_prefix method to DBI (Jens Rehsack)\n\n  Added more tests to 50dbm_simple.t to prove optimizations in\n    DBI::SQL::Nano and SQL::Statement (Jens Rehsack)\n  Updated tests to cover optional installed SQL::Statement (Jens Rehsack)\n  Synchronize API between SQL::Statement and DBI::SQL::Nano (Jens Rehsack)\n  Merged some optimizations from SQL::Statement into DBI::SQL::Nano\n    (Jens Rehsack)\n  Added basic test for DBD::File (H.Merijn Brand, Jens Rehsack)\n  Extract dealing with Perl SQL engines from DBD::File into\n    DBI::DBD::SqlEngine for better subclassing of 3rd party non-db DBDs\n    (Jens Rehsack)\n\n  Updated and clarified documentation for finish method (Tim Bunce).\n  Changes to DBD::File for better English and hopefully better\n    explanation (Martin J. Evans)\n  Update documentation of DBD::DBM to cover current implementation,\n    tried to explain some things better and changes most examples to\n    preferred style of Merijn and myself (Jens Rehsack)\n  Added developer documentation (including a roadmap of future plans)\n    for DBD::File\n\n=head2 Changes in DBI 1.611 (svn r13935) 29th April 2010\n\n  NOTE: minimum perl version is now 5.8.1 (as announced in DBI 1.607)\n\n  Fixed selectcol_arrayref MaxRows attribute to count rows not values\n    thanks to Vernon Lyon.\n  Fixed DBI->trace(0, *STDERR); (H.Merijn Brand)\n    which tried to open a file named \"*main::STDERR\" in perl-5.10.x\n  Fixes in DBD::DBM for use under threads (Jens Rehsack)\n\n  Changed \"Issuing rollback() due to DESTROY without explicit disconnect\"\n    warning to not be issued if ReadOnly set for that dbh.\n\n  Added f_lock and f_encoding support to DBD::File (H.Merijn Brand)\n  Added ChildCallbacks => { ... } to Callbacks as a way to\n    specify Callbacks for child handles.\n    With tests added by David E. Wheeler.\n  Added DBI::sql_type_cast($value, $type, $flags) to cast a string value\n    to an SQL type. e.g. SQL_INTEGER effectively does $value += 0;\n    Has other options plus an internal interface for drivers.\n\n  Documentation changes:\n  Small fixes in the documentation of DBD::DBM (H.Merijn Brand)\n  Documented specification of type casting behaviour for bind_col()\n    based on DBI::sql_type_cast() and two new bind_col attributes\n    StrictlyTyped and DiscardString. Thanks to Martin Evans.\n  Document fetchrow_hashref() behaviour for functions,\n    aliases and duplicate names (H.Merijn Brand)\n  Updated DBI::Profile and DBD::File docs to fix pod nits\n    thanks to Frank Wiegand.\n  Corrected typos in Gopher documentation reported by Jan Krynicky.\n  Documented the Callbacks attribute thanks to David E. Wheeler.\n  Corrected the Timeout examples as per rt 50621 (Martin J. Evans).\n  Removed some internal broken links in the pod (Martin J. Evans)\n  Added Note to column_info for drivers which do not\n    support it (Martin J. Evans)\n  Updated dbipport.h to Devel::PPPort 3.19 (H.Merijn Brand)\n\n=head2 Changes in DBI 1.609 (svn r12816) 8th June 2009\n\n  Fixes to DBD::File (H.Merijn Brand)\n    added f_schema attribute\n    table names case sensitive when quoted, insensitive when unquoted\n    workaround a bug in SQL::Statement (temporary fix) related\n      to the \"You passed x parameters where y required\" error\n\n  Added ImplementorClass and Name info to the \"Issuing rollback() due to\n    DESTROY without explicit disconnect\" warning to identify the handle.\n    Applies to compiled drivers when they are recompiled.\n  Added DBI->visit_handles($coderef) method.\n  Added $h->visit_child_handles($coderef) method.\n  Added docs for column_info()'s COLUMN_DEF value.\n  Clarified docs on stickyness of data type via bind_param().\n  Clarified docs on stickyness of data type via bind_col().\n\n=head2 Changes in DBI 1.608 (svn r12742) 5th May 2009\n\n  Fixes to DBD::File (H.Merijn Brand)\n    bind_param () now honors the attribute argument\n    added f_ext attribute\n    File::Spec is always required. (CORE since 5.00405)\n    Fail and set errstr on parameter count mismatch in execute ()\n  Fixed two small memory leaks when running in mod_perl\n    one in DBI->connect and one in DBI::Gofer::Execute.\n    Both due to \"local $ENV{...};\" leaking memory.\n  Fixed DBD_ATTRIB_DELETE macro for driver authors\n    and updated DBI::DBD docs thanks to Martin J. Evans.\n  Fixed 64bit issues in trace messages thanks to Charles Jardine.\n  Fixed FETCH_many() method to work with drivers that incorrectly return\n    an empty list from $h->FETCH. Affected gofer.\n\n  Added 'sqlite_' as registered prefix for DBD::SQLite.\n  Corrected many typos in DBI docs thanks to Martin J. Evans.\n  Improved DBI::DBD docs thanks to H.Merijn Brand.\n\n=head2 Changes in DBI 1.607 (svn r11571) 22nd July 2008\n\n  NOTE: Perl 5.8.1 is now the minimum supported version.\n  If you need support for earlier versions send me a patch.\n\n  Fixed missing import of carp in DBI::Gofer::Execute.\n\n  Added note to docs about effect of execute(@empty_array).\n  Clarified docs for ReadOnly thanks to Martin Evans.\n\n=head2 Changes in DBI 1.605 (svn r11434) 16th June 2008\n\n  Fixed broken DBIS macro with threads on big-endian machines\n    with 64bit ints but 32bit pointers. Ticket #32309.\n  Fixed the selectall_arrayref, selectrow_arrayref, and selectrow_array\n    methods that get embedded into compiled drivers to use the\n    inner sth handle when passed a $sth instead of an sql string.\n    Drivers will need to be recompiled to pick up this change.\n  Fixed leak in neat() for some kinds of values thanks to Rudolf Lippan.\n  Fixed DBI::PurePerl neat() to behave more like XS neat().\n\n  Increased default $DBI::neat_maxlen from 400 to 1000.\n  Increased timeout on tests to accommodate very slow systems.\n  Changed behaviour of trace levels 1..4 to show less information\n    at lower levels.\n  Changed the format of the key used for $h->{CachedKids}\n    (which is undocumented so you shouldn't depend on it anyway)\n  Changed gofer error handling to avoid duplicate error text in errstr.\n  Clarified docs re \":N\" style placeholders.\n  Improved gofer retry-on-error logic and refactored to aid subclassing.\n  Improved gofer trace output in assorted ways.\n\n  Removed the beeps \"\\a\" from Makefile.PL warnings.\n  Removed check for PlRPC-modules from Makefile.PL\n\n  Added sorting of ParamValues reported by ShowErrorStatement\n    thanks to to Rudolf Lippan.\n  Added cache miss trace message to DBD::Gofer transport class.\n  Added $drh->dbixs_revision method.\n  Added explicit LICENSE specification (perl) to META.yaml\n\n=head2 Changes in DBI 1.604 (svn rev 10994) 24th March 2008\n\n  Fixed fetchall_arrayref with $max_rows argument broken in 1.603,\n    thanks to Greg Sabino Mullane.\n  Fixed a few harmless compiler warnings on cygwin.\n\n=head2 Changes in DBI 1.603\n\n  Fixed pure-perl fetchall_arrayref with $max_rows argument\n    to not error when fetching after all rows already fetched.\n    (Was fixed for compiled drivers back in DBI 1.31.)\n    Thanks to Mark Overmeer.\n  Fixed C sprintf formats and casts, fixing compiler warnings.\n\n  Changed dbi_profile() to accept a hash of profiles and apply to all.\n  Changed gofer stream transport to improve error reporting.\n  Changed gofer test timeout to avoid spurious failures on slow systems.\n\n  Added options to t/85gofer.t so it's more useful for manual testing.\n\n=head2 Changes in DBI 1.602 (svn rev 10706)  8th February 2008\n\n  Fixed potential coredump if stack reallocated while calling back\n    into perl from XS code. Thanks to John Gardiner Myers.\n  Fixed DBI::Util::CacheMemory->new to not clear the cache.\n  Fixed avg in DBI::Profile as_text() thanks to Abe Ingersoll.\n  Fixed DBD::DBM bug in push_names thanks to J M Davitt.\n  Fixed take_imp_data for some platforms thanks to Jeffrey Klein.\n  Fixed docs tie'ing CacheKids (ie LRU cache) thanks to Peter John Edwards.\n\n  Expanded DBI::DBD docs for driver authors thanks to Martin Evans.\n  Enhanced t/80proxy.t test script.\n  Enhanced t/85gofer.t test script thanks to Stig.\n  Enhanced t/10examp.t test script thanks to David Cantrell.\n  Documented $DBI::stderr as the default value of err for internal errors.\n\n  Gofer changes:\n    track_recent now also keeps track of N most recent errors.\n    The connect method is now also counted in stats.\n\n=head2 Changes in DBI 1.601 (svn rev 10103),  21st October 2007\n\n  Fixed t/05thrclone.t to work with Test::More >= 0.71\n    thanks to Jerry D. Hedden and Michael G Schwern.\n  Fixed DBI for VMS thanks to Peter (Stig) Edwards.\n\n  Added client-side caching to DBD::Gofer. Can use any cache with\n    get($k)/set($k,$v) methods, including all the Cache and Cache::Cache\n    distribution modules plus Cache::Memcached, Cache::FastMmap etc.\n    Works for all transports. Overridable per handle.\n\n  Added DBI::Util::CacheMemory for use with DBD::Gofer caching.\n    It's a very fast and small strict subset of Cache::Memory.\n\n=head2 Changes in DBI 1.59 (svn rev 9874),  23rd August 2007\n\n  Fixed DBI::ProfileData to unescape headers lines read from data file.\n  Fixed DBI::ProfileData to not clobber $_, thanks to Alexey Tourbin.\n  Fixed DBI::SQL::Nano to not clobber $_, thanks to Alexey Tourbin.\n  Fixed DBI::PurePerl to return undef for ChildHandles if weaken not available.\n  Fixed DBD::Proxy disconnect error thanks to Philip Dye.\n  Fixed DBD::Gofer::Transport::Base bug (typo) in timeout code.\n  Fixed DBD::Proxy rows method thanks to Philip Dye.\n  Fixed dbiprof compile errors, thanks to Alexey Tourbin.\n  Fixed t/03handle.t to skip some tests if ChildHandles not available.\n\n  Added check_response_sub to DBI::Gofer::Execute\n\n=head2 Changes in DBI 1.58 (svn rev 9678),  25th June 2007\n\n  Fixed code triggering fatal error in bleadperl, thanks to Steve Hay.\n  Fixed compiler warning thanks to Jerry D. Hedden.\n  Fixed t/40profile.t to use int(dbi_time()) for systems like Cygwin where\n    time() seems to be rounded not truncated from the high resolution time.\n  Removed dump_results() test from t/80proxy.t.\n\n=head2 Changes in DBI 1.57 (svn rev 9639),  13th June 2007\n\n  Note: this release includes a change to the DBI::hash() function which will\n  now produce different values than before *if* your perl was built with 64-bit\n  'int' type (i.e. \"perl -V:intsize\" says intsize='8').  It's relatively rare\n  for perl to be configured that way, even on 64-bit systems.\n\n  Fixed XS versions of select*_*() methods to call execute()\n    fetch() etc., with inner handle instead of outer.\n  Fixed execute_for_fetch() to not cache errstr values\n    thanks to Bart Degryse.\n  Fixed unused var compiler warning thanks to JDHEDDEN.\n  Fixed t/86gofer_fail tests to be less likely to fail falsely.\n\n  Changed DBI::hash to return 'I32' type instead of 'int' so results are\n    portable/consistent regardless of size of the int type.\n  Corrected timeout example in docs thanks to Egmont Koblinger.\n  Changed t/01basic.t to warn instead of failing when it detects\n    a problem with Math::BigInt (some recent versions had problems).\n\n  Added support for !Time and !Time~N to DBI::Profile Path. See docs.\n  Added extra trace info to connect_cached thanks to Walery Studennikov.\n  Added non-random (deterministic) mode to DBI_GOFER_RANDOM mechanism.\n  Added DBIXS_REVISION macro that drivers can use.\n  Added more docs for private_attribute_info() method.\n\n  DBI::Profile changes:\n    dbi_profile() now returns ref to relevant leaf node.\n    Don't profile DESTROY during global destruction.\n    Added as_node_path_list() and as_text() methods.\n  DBI::ProfileDumper changes:\n    Don't write file if there's no profile data.\n    Uses full natural precision when saving data (was using %.6f)\n    Optimized flush_to_disk().\n    Locks the data file while writing.\n    Enabled filename to be a code ref for dynamic names.\n  DBI::ProfileDumper::Apache changes:\n    Added Quiet=>1 to avoid write to STDERR in flush_to_disk().\n    Added Dir=>... to specify a writable destination directory.\n    Enabled DBI_PROFILE_APACHE_LOG_DIR for mod_perl 1 as well as 2.\n    Added parent pid to default data file name.\n  DBI::ProfileData changes:\n    Added DeleteFiles option to rename & delete files once read.\n    Locks the data files while reading.\n    Added ability to sort by Path elements.\n  dbiprof changes:\n    Added --dumpnodes and --delete options.\n  Added/updated docs for both DBI::ProfileDumper && ::Apache.\n\n=head2 Changes in DBI 1.56 (svn rev 9660),  18th June 2007\n\n  Fixed printf arg warnings thanks to JDHEDDEN.\n  Fixed returning driver-private sth attributes via gofer.\n\n  Changed pod docs docs to use =head3 instead of =item\n    so now in html you get links to individual methods etc.\n  Changed default gofer retry_limit from 2 to 0.\n  Changed tests to workaround Math::BigInt broken versions.\n  Changed dbi_profile_merge() to dbi_profile_merge_nodes()\n    old name still works as an alias for the new one.\n  Removed old DBI internal sanity check that's no longer valid\n    causing \"panic: DESTROY (dbih_clearcom)\" when tracing enabled\n\n  Added DBI_GOFER_RANDOM env var that can be use to trigger random\n    failures and delays when executing gofer requests. Designed to help\n    test automatic retry on failures and timeout handling.\n  Added lots more docs to all the DBD::Gofer and DBI::Gofer classes.\n\n=head2 Changes in DBI 1.55 (svn rev 9504),  4th May 2007\n\n  Fixed set_err() so HandleSetErr hook is executed reliably, if set.\n  Fixed accuracy of profiling when perl configured to use long doubles.\n  Fixed 42prof_data.t on fast systems with poor timers thanks to Malcolm Nooning.\n  Fixed potential corruption in selectall_arrayref and selectrow_arrayref\n    for compiled drivers, thanks to Rob Davies.\n    Rebuild your compiled drivers after installing DBI.\n\n  Changed some handle creation code from perl to C code,\n    to reduce handle creation cost by ~20%.\n  Changed internal implementation of the CachedKids attribute\n    so it's a normal handle attribute (and initially undef).\n  Changed connect_cached and prepare_cached to avoid a FETCH method call,\n    and thereby reduced cost by ~5% and ~30% respectively.\n  Changed _set_fbav to not croak when given a wrongly sized array,\n    it now warns and adjusts the row buffer to match.\n  Changed some internals to improve performance with threaded perls.\n  Changed DBD::NullP to be slightly more useful for testing.\n  Changed File::Spec prerequisite to not require a minimum version.\n  Changed tests to work with other DBMs thanks to ZMAN.\n  Changed ex/perl_dbi_nulls_test.pl to be more descriptive.\n\n  Added more functionality to the (undocumented) Callback mechanism.\n    Callbacks can now elect to provide a value to be returned, in which case\n    the method won't be called. A callback for \"*\" is applied to all methods\n    that don't have their own callback.\n  Added $h->{ReadOnly} attribute.\n  Added support for DBI Profile Path to contain refs to scalars\n    which will be de-ref'd for each profile sample.\n  Added dbilogstrip utility to edit DBI logs for diff'ing (gets installed)\n  Added details for SQLite 3.3 to NULL handling docs thanks to Alex Teslik.\n  Added take_imp_data() to DBI::PurePerl.\n\n  Gofer related changes:\n    Fixed gofer pipeone & stream transports to avoid risk of hanging.\n    Improved error handling and tracing significantly.\n    Added way to generate random 1-in-N failures for methods.\n    Added automatic retry-on-error mechanism to gofer transport base class.\n    Added tests to show automatic retry mechanism works a treat!\n    Added go_retry_hook callback hook so apps can fine-tune retry behaviour.\n    Added header to request and response packets for sanity checking\n      and to enable version skew between client and server.\n    Added forced_single_resultset, max_cached_sth_per_dbh and max_cached_dbh_per_drh\n      to gofer executor config.\n    Driver-private methods installed with install_method are now proxied.\n    No longer does a round-trip to the server for methods it knows\n      have not been overridden by the remote driver.\n    Most significant aspects of gofer behaviour are controlled by policy mechanism.\n    Added policy-controlled caching of results for some methods, such as schema metadata.\n    The connect_cached and prepare_cached methods cache on client and server.\n    The bind_param_array and execute_array methods are now supported.\n    Worked around a DBD::Sybase bind_param bug (which is fixed in DBD::Sybase 1.07)\n    Added goferperf.pl utility (doesn't get installed).\n    Many other assorted Gofer related bug fixes, enhancements and docs.\n    The http and mod_perl transports have been remove to their own distribution.\n    Client and server will need upgrading together for this release.\n\n=head2 Changes in DBI 1.54 (svn rev 9157),  23rd February 2007\n\n  NOTE: This release includes the 'next big thing': DBD::Gofer.\n  Take a look!\n\n  WARNING: This version has some subtle changes in DBI internals.\n  It's possible, though doubtful, that some may affect your code.\n  I recommend some extra testing before using this release.\n  Or perhaps I'm just being over cautious...\n\n  Fixed type_info when called for multiple dbh thanks to Cosimo Streppone.\n  Fixed compile warnings in bleadperl on freebsd-6.1-release\n    and solaris 10g thanks to Philip M. Gollucci.\n  Fixed to compile for perl built with -DNO_MATHOMS thanks to Jerry D. Hedden.\n  Fixed to work for bleadperl (r29544) thanks to Nicholas Clark.\n    Users of Perl >= 5.9.5 will require DBI >= 1.54.\n  Fixed rare error when profiling access to $DBI::err etc tied variables.\n  Fixed DBI::ProfileDumper to not be affected by changes to $/ and $,\n    thanks to Michael Schwern.\n\n  Changed t/40profile.t to skip tests for perl < 5.8.0.\n  Changed setting trace file to no longer write \"Trace file set\" to new file.\n  Changed 'handle cleared whilst still active' warning for dbh\n    to only be given for dbh that have active sth or are not AutoCommit.\n  Changed take_imp_data to call finish on all Active child sth.\n  Changed DBI::PurePerl trace() method to be more consistent.\n  Changed set_err method to effectively not append to errstr if the new errstr\n    is the same as the current one.\n  Changed handle factory methods, like connect, prepare, and table_info,\n    to copy any error/warn/info state of the handle being returned\n    up into the handle the method was called on.\n  Changed row buffer handling to not alter NUM_OF_FIELDS if it's\n    inconsistent with number of elements in row buffer array.\n  Updated DBI::DBD docs re handling multiple result sets.\n  Updated DBI::DBD docs for driver authors thanks to Ammon Riley\n    and Dean Arnold.\n  Updated column_info docs to note that if a table doesn't exist\n    you get an sth for an empty result set and not an error.\n\n  Added new DBD::Gofer 'stateless proxy' driver and framework,\n    and the DBI test suite is now also executed via DBD::Gofer,\n    and DBD::Gofer+DBI::PurePerl, in addition to DBI::PurePerl.\n  Added ability for trace() to support filehandle argument,\n    including tracing into a string, thanks to Dean Arnold.\n  Added ability for drivers to implement func() method\n    so proxy drivers can proxy the func method itself.\n  Added SQL_BIGINT type code (resolved to the ODBC/JDBC value (-5))\n  Added $h->private_attribute_info method.\n\n=head2 Changes in DBI 1.53 (svn rev 7995),   31st October 2006\n\n  Fixed checks for weaken to work with early 5.8.x versions\n  Fixed DBD::Proxy handling of some methods, including commit and rollback.\n  Fixed t/40profile.t to be more insensitive to long double precision.\n  Fixed t/40profile.t to be insensitive to small negative shifts in time\n    thanks to Jamie McCarthy.\n  Fixed t/40profile.t to skip tests for perl < 5.8.0.\n  Fixed to work with current 'bleadperl' (~5.9.5) thanks to Steve Peters.\n    Users of Perl >= 5.9.5 will require DBI >= 1.53.\n  Fixed to be more robust against drivers not handling multiple result\n    sets properly, thanks to Gisle Aas.\n\n  Added array context support to execute_array and execute_for_fetch\n    methods which returns executed tuples and rows affected.\n  Added Tie::Cache::LRU example to docs thanks to Brandon Black.\n\n=head2 Changes in DBI 1.52 (svn rev 6840),   30th July 2006\n\n  Fixed memory leak (per handle) thanks to Nicholas Clark and Ephraim Dan.\n  Fixed memory leak (16 bytes per sth) thanks to Doru Theodor Petrescu.\n  Fixed execute_for_fetch/execute_array to RaiseError thanks to Martin J. Evans.\n  Fixed for perl 5.9.4. Users of Perl >= 5.9.4 will require DBI >= 1.52.\n\n  Updated DBD::File to 0.35 to match the latest release on CPAN.\n\n  Added $dbh->statistics_info specification thanks to Brandon Black.\n\n  Many changes and additions to profiling:\n    Profile Path can now uses sane strings instead of obscure numbers,\n    can refer to attributes, assorted magical values, and even code refs!\n    Parsing of non-numeric DBI_PROFILE env var values has changed.\n    Changed DBI::Profile docs extensively - many new features.\n    See DBI::Profile docs for more information.\n\n=head2 Changes in DBI 1.51 (svn rev 6475),   6th June 2006\n\n  Fixed $dbh->clone method 'signature' thanks to Jeffrey Klein.\n  Fixed default ping() method to return false if !$dbh->{Active}.\n  Fixed t/40profile.t to be insensitive to long double precision.\n  Fixed for perl 5.8.0's more limited weaken() function.\n  Fixed DBD::Proxy to not alter $@ in disconnect or AUTOLOADd methods.\n  Fixed bind_columns() to use return set_err(...) instead of die()\n    to report incorrect number of parameters, thanks to Ben Thul.\n  Fixed bind_col() to ignore undef as bind location, thanks to David Wheeler.\n  Fixed for perl 5.9.x for non-threaded builds thanks to Nicholas Clark.\n    Users of Perl >= 5.9.x will require DBI >= 1.51.\n  Fixed fetching of rows as hash refs to preserve utf8 on field names\n    from $sth->{NAME} thanks to Alexey Gaidukov.\n  Fixed build on Win32 (dbd_postamble) thanks to David Golden.\n\n  Improved performance for thread-enabled perls thanks to Gisle Aas.\n  Drivers can now use PERL_NO_GET_CONTEXT thanks to Gisle Aas.\n    Driver authors please read the notes in the DBI::DBD docs.\n  Changed DBI::Profile format to always include a percentage,\n    if not exiting then uses time between the first and last DBI call.\n  Changed DBI::ProfileData to be more forgiving of systems with\n    unstable clocks (where time may go backwards occasionally).\n  Clarified the 'Subclassing the DBI' docs.\n  Assorted minor changes to docs from comments on annocpan.org.\n  Changed Makefile.PL to avoid incompatible options for old gcc.\n\n  Added 'fetch array of hash refs' example to selectall_arrayref\n    docs thanks to Tom Schindl.\n  Added docs for $sth->{ParamArrays} thanks to Martin J. Evans.\n  Added reference to $DBI::neat_maxlen in TRACING section of docs.\n  Added ability for DBI::Profile Path to include attributes\n    and a summary of where the code was called from.\n\n=head2 Changes in DBI 1.50 (svn rev 2307),   13 December 2005\n\n  Fixed Makefile.PL options for gcc bug introduced in 1.49.\n  Fixed handle magic order to keep DBD::Oracle happy.\n  Fixed selectrow_array to return empty list on error.\n\n  Changed dbi_profile_merge() to be able to recurse and merge\n    sub-trees of profile data.\n\n  Added documentation for dbi_profile_merge(), including how to\n    measure the time spent inside the DBI for an http request.\n\n=head2 Changes in DBI 1.49 (svn rev 2287),   29th November 2005\n\n  Fixed assorted attribute handling bugs in DBD::Proxy.\n  Fixed croak() in DBD::NullP thanks to Sergey Skvortsov.\n  Fixed handling of take_imp_data() and dbi_imp_data attribute.\n  Fixed bugs in DBD::DBM thanks to Jeff Zucker.\n  Fixed bug in DBI::ProfileDumper thanks to Sam Tregar.\n  Fixed ping in DBD::Proxy thanks to George Campbell.\n  Fixed dangling ref in $sth after parent $dbh destroyed\n    with thanks to il@rol.ru for the bug report #13151\n  Fixed prerequisites to include Storable thanks to Michael Schwern.\n  Fixed take_imp_data to be more practical.\n\n  Change to require perl 5.6.1 (as advertised in 2003) not 5.6.0.\n  Changed internals to be more strictly coded thanks to Andy Lester.\n  Changed warning about multiple copies of Driver.xst found in @INC\n    to ignore duplicated directories thanks to Ed Avis.\n  Changed Driver.xst to enable drivers to define an dbd_st_prepare_sv\n    function where the statement parameter is an SV. That enables\n    compiled drivers to support SQL strings that are UTF-8.\n  Changed \"use DBI\" to only set $DBI::connect_via if not already set.\n  Changed docs to clarify pre-method clearing of err values.\n\n  Added ability for DBI::ProfileData to edit profile path on loading.\n    This enables aggregation of different SQL statements into the same\n    profile node - very handy when not using placeholders or when working\n    multiple separate tables for the same thing (ie logtable_2005_11_28)\n  Added $sth->{ParamTypes} specification thanks to Dean Arnold.\n  Added $h->{Callbacks} attribute to enable code hooks to be invoked\n    when certain methods are called. For example:\n    $dbh->{Callbacks}->{prepare} = sub { ... };\n    With thanks to David Wheeler for the kick start.\n  Added $h->{ChildHandles} (using weakrefs) thanks to Sam Tregar\n    I've recoded it in C so there's no significant performance impact.\n  Added $h->{Type} docs (returns 'dr', 'db', or 'st')\n  Adding trace message in DESTROY if InactiveDestroy enabled.\n  Added %drhs = DBI->installed_drivers();\n\n  Ported DBI::ProfileDumper::Apache to mod_perl2 RC5+\n    thanks to Philip M. Golluci\n\n=head2 Changes in DBI 1.48 (svn rev 928),    14th March 2005\n\n  Fixed DBI::DBD::Metadata generation of type_info_all thanks to Steffen Goeldner\n    (driver authors who have used it should rerun it).\n\n  Updated docs for NULL Value placeholders thanks to Brian Campbell.\n\n  Added multi-keyfield nested hash fetching to fetchall_hashref()\n    thanks to Zhuang (John) Li for polishing up my draft.\n  Added registered driver prefixes: amzn_ for DBD::Amazon and yaswi_ for DBD::Yaswi.\n\n\n=head2 Changes in DBI 1.47 (svn rev 854),    2nd February 2005\n\n  Fixed DBI::ProxyServer to not create pid files by default.\n    References: Ubuntu Security Notice USN-70-1, CAN-2005-0077\n    Thanks to Javier Fern\u00e1ndez-Sanguino Pe\u00f1a from the\n    Debian Security Audit Project, and Jonathan Leffler.\n  Fixed some tests to work with older Test::More versions.\n  Fixed setting $DBI::err/errstr in DBI::PurePerl.\n  Fixed potential undef warning from connect_cached().\n  Fixed $DBI::lasth handling for DESTROY so lasth points to\n    parent even if DESTROY called other methods.\n  Fixed DBD::Proxy method calls to not alter $@.\n  Fixed DBD::File problem with encoding pragma thanks to Erik Rijkers.\n\n  Changed error handling so undef errstr doesn't cause warning.\n  Changed DBI::DBD docs to use =head3/=head4 pod thanks to\n    Jonathan Leffler. This may generate warnings for perl 5.6.\n  Changed DBI::PurePerl to set autoflush on trace filehandle.\n  Changed DBD::Proxy to treat Username as a local attribute\n    so recent DBI version can be used with old DBI::ProxyServer.\n  Changed driver handle caching in DBD::File.\n  Added $GetInfoType{SQL_DATABASE_NAME} thanks to Steffen Goeldner.\n\n  Updated docs to recommend some common DSN string attributes.\n  Updated connect_cached() docs with issues and suggestions.\n  Updated docs for NULL Value placeholders thanks to Brian Campbell.\n  Updated docs for primary_key_info and primary_keys.\n  Updated docs to clarify that the default fetchrow_hashref behaviour,\n    of returning a ref to a new hash for each row, will not change.\n  Updated err/errstr/state docs for DBD authors thanks to Steffen Goeldner.\n  Updated handle/attribute docs for DBD authors thanks to Steffen Goeldner.\n  Corrected and updated LongReadLen docs thanks to Bart Lateur.\n  Added DBD::JDBC as a registered driver.\n\n=head2 Changes in DBI 1.46 (svn rev 584),    16th November 2004\n\n  Fixed parsing bugs in DBI::SQL::Nano thanks to Jeff Zucker.\n  Fixed a couple of bad links in docs thanks to Graham Barr.\n  Fixed test.pl Win32 undef warning thanks to H.Merijn Brand & David Repko.\n  Fixed minor issues in DBI::DBD::Metadata thanks to Steffen Goeldner.\n  Fixed DBI::PurePerl neat() to use double quotes for utf8.\n\n  Changed execute_array() definition, and default implementation,\n    to not consider scalar values for execute tuple count. See docs.\n  Changed DBD::File to enable ShowErrorStatement by default,\n    which affects DBD::File subclasses such as DBD::CSV and DBD::DBM.\n  Changed use DBI qw(:utils) tag to include $neat_maxlen.\n  Updated Roadmap and ToDo.\n\n  Added data_string_diff() data_string_desc() and data_diff()\n    utility functions to help diagnose Unicode issues.\n    All can be imported via the use DBI qw(:utils) tag.\n\n=head2 Changes in DBI 1.45 (svn rev 480),    6th October 2004\n\n  Fixed DBI::DBD code for drivers broken in 1.44.\n  Fixed \"Free to wrong pool\"/\"Attempt to free unreferenced scalar\" in FETCH.\n\n=head2 Changes in DBI 1.44 (svn rev 478),    5th October 2004\n\n  Fixed build issues on VMS thanks to Jakob Snoer.\n  Fixed DBD::File finish() method to return 1 thanks to Jan Dubois.\n  Fixed rare core dump during global destruction thanks to Mark Jason Dominus.\n  Fixed risk of utf8 flag persisting from one row to the next.\n\n  Changed bind_param_array() so it doesn't require all bind arrays\n    to have the same number of elements.\n  Changed bind_param_array() to error if placeholder number <= 0.\n  Changed execute_array() definition, and default implementation,\n    to effectively NULL-pad shorter bind arrays.\n  Changed execute_array() to return \"0E0\" for 0 as per the docs.\n  Changed execute_for_fetch() definition, and default implementation,\n    to return \"0E0\" for 0 like execute() and execute_array().\n  Changed Test::More prerequisite to Test::Simple (which is also the name\n    of the distribution both are packaged in) to work around ppm behaviour.\n\n  Corrected docs to say that get/set of unknown attribute generates\n    a warning and is no longer fatal. Thanks to Vadim.\n  Corrected fetchall_arrayref() docs example thanks to Drew Broadley.\n\n  Added $h1->swap_inner_handle($h2) sponsored by BizRate.com\n\n\n=head2 Changes in DBI 1.43 (svn rev 377),    2nd July 2004\n\n  Fixed connect() and connect_cached() RaiseError/PrintError\n    which would sometimes show \"(no error string)\" as the error.\n  Fixed compiler warning thanks to Paul Marquess.\n  Fixed \"trace level set to\" trace message thanks to H.Merijn Brand.\n  Fixed DBD::DBM $dbh->{dbm_tables}->{...} to be keyed by the\n    table name not the file name thanks to Jeff Zucker.\n  Fixed last_insert_id(...) thanks to Rudy Lippan.\n  Fixed propagation of scalar/list context into proxied methods.\n  Fixed DBI::Profile::DESTROY to not alter $@.\n  Fixed DBI::ProfileDumper new() docs thanks to Michael Schwern.\n  Fixed _load_class to propagate $@ thanks to Drew Taylor.\n  Fixed compile warnings on Win32 thanks to Robert Baron.\n  Fixed problem building with recent versions of MakeMaker.\n  Fixed DBD::Sponge not to generate warning with threads.\n  Fixed DBI_AUTOPROXY to work more than once thanks to Steven Hirsch.\n\n  Changed TraceLevel 1 to not show recursive/nested calls.\n  Changed getting or setting an invalid attribute to no longer be\n    a fatal error but generate a warning instead.\n  Changed selectall_arrayref() to call finish() if\n    $attr->{MaxRows} is defined.\n  Changed all tests to use Test::More and enhanced the tests thanks\n    to Stevan Little and Andy Lester. See http://qa.perl.org/phalanx/\n  Changed Test::More minimum prerequisite version to 0.40 (2001).\n  Changed DBI::Profile header to include the date and time.\n\n  Added DBI->parse_dsn($dsn) method.\n  Added warning if build directory path contains white space.\n  Added docs for parse_trace_flags() and parse_trace_flag().\n  Removed \"may change\" warnings from the docs for table_info(),\n    primary_key_info(), and foreign_key_info() methods.\n\n=head2 Changes in DBI 1.42 (svn rev 222),    12th March 2004\n\n  Fixed $sth->{NUM_OF_FIELDS} of non-executed statement handle\n    to be undef as per the docs (it was 0).\n  Fixed t/41prof_dump.t to work with perl5.9.1.\n  Fixed DBD_ATTRIB_DELETE macro thanks to Marco Paskamp.\n  Fixed DBI::PurePerl looks_like_number() and $DBI::rows.\n  Fixed ref($h)->can(\"foo\") to not croak.\n\n  Changed attributes (NAME, TYPE etc) of non-executed statement\n    handle to be undef instead of triggering an error.\n  Changed ShowErrorStatement to apply to more $dbh methods.\n  Changed DBI_TRACE env var so just does this at load time:\n    DBI->trace(split '=', $ENV{DBI_TRACE}, 2);\n  Improved \"invalid number of parameters\" error message.\n  Added DBI::common as base class for DBI::db, DBD::st etc.\n  Moved methods common to all handles into DBI::common.\n\n  Major tracing enhancement:\n\n  Added $h->parse_trace_flags(\"foo|SQL|7\") to map a group of\n    trace flags into the corresponding trace flag bits.\n  Added automatic calling of parse_trace_flags() if\n    setting the trace level to a non-numeric value:\n    $h->{TraceLevel}=\"foo|SQL|7\"; $h->trace(\"foo|SQL|7\");\n    DBI->connect(\"dbi:Driver(TraceLevel=SQL|foo):...\", ...);\n    Currently no trace flags have been defined.\n  Added to, and reworked, the trace documentation.\n  Added dbivport.h for driver authors to use.\n\n  Major driver additions that Jeff Zucker and I have been working on:\n\n  Added DBI::SQL::Nano a 'smaller than micro' SQL parser\n    with an SQL::Statement compatible API. If SQL::Statement\n    is installed then DBI::SQL::Nano becomes an empty subclass\n    of SQL::Statement, unless the DBI_SQL_NANO env var is true.\n  Added DBD::File, modified to use DBI::SQL::Nano.\n  Added DBD::DBM, an SQL interface to DBM files using DBD::File.\n\n  Documentation changes:\n\n  Corrected typos in docs thanks to Steffen Goeldner.\n  Corrected execute_for_fetch example thanks to Dean Arnold.\n\n=head2 Changes in DBI 1.41 (svn rev 130),    22nd February 2004\n\n  Fixed execute_for_array() so tuple_status parameter is optional\n    as per docs, thanks to Ed Avis.\n  Fixed execute_for_array() docs to say that it returns undef if\n    any of the execute() calls fail.\n  Fixed take_imp_data() test on m68k reported by Christian Hammers.\n  Fixed write_typeinfo_pm inconsistencies in DBI::DBD::Metadata\n    thanks to Andy Hassall.\n  Fixed $h->{TraceLevel} to not return DBI->trace trace level\n    which it used to if DBI->trace trace level was higher.\n\n  Changed set_err() to append to errstr, with a leading \"\\n\" if it's\n    not empty, so that multiple error/warning messages are recorded.\n  Changed trace to limit elements dumped when an array reference is\n    returned from a method to the max(40, $DBI::neat_maxlen/10)\n    so that fetchall_arrayref(), for example, doesn't flood the trace.\n  Changed trace level to be a four bit integer (levels 0 thru 15)\n    and a set of topic flags (no topics have been assigned yet).\n  Changed column_info() to check argument count.\n  Extended bind_param() TYPE attribute specification to imply\n    standard formating of value, eg SQL_DATE implies 'YYYY-MM-DD'.\n\n  Added way for drivers to indicate 'success with info' or 'warning'\n    by setting err to \"0\" for warning and \"\" for information.\n    Both values are false and so don't trigger RaiseError etc.\n    Thanks to Steffen Goeldner for the original idea.\n  Added $h->{HandleSetErr} = sub { ... } to be called at the\n    point that an error, warn, or info state is recorded.\n    The code can alter the err, errstr, and state values\n    (e.g., to promote an error to a warning, or the reverse).\n  Added $h->{PrintWarn} attribute to enable printing of warnings\n    recorded by the driver. Defaults to same value as $^W (perl -w).\n  Added $h->{ErrCount} attribute, incremented whenever an error is\n    recorded by the driver via set_err().\n  Added $h->{Executed} attribute, set if do()/execute() called.\n  Added \\%attr parameter to foreign_key_info() method.\n  Added ref count of inner handle to \"DESTROY ignored for outer\" msg.\n  Added Win32 build config checks to DBI::DBD thanks to Andy Hassall.\n  Added bind_col to Driver.xst so drivers can define their own.\n  Added TYPE attribute to bind_col and specified the expected\n    driver behaviour.\n\n  Major update to signal handling docs thanks to Lincoln Baxter.\n  Corrected dbiproxy usage doc thanks to Christian Hammers.\n  Corrected type_info_all index hash docs thanks to Steffen Goeldner.\n  Corrected type_info COLUMN_SIZE to chars not bytes thanks to Dean Arnold.\n  Corrected get_info() docs to include details of DBI::Const::GetInfoType.\n  Clarified that $sth->{PRECISION} is OCTET_LENGTH for char types.\n\n=head2 Changes in DBI 1.40,    7th January 2004\n\n  Fixed handling of CachedKids when DESTROYing threaded handles.\n  Fixed sql_user_name() in DBI::DBD::Metadata (used by write_getinfo_pm)\n    to use $dbh->{Username}. Driver authors please update your code.\n\n  Changed connect_cached() when running under Apache::DBI\n    to route calls to Apache::DBI::connect().\n\n  Added CLONE() to DBD::Sponge and DBD::ExampleP.\n  Added warning when starting a new thread about any loaded driver\n    which does not have a CLONE() function.\n  Added new prepare_cache($sql, \\%attr, 3) option to manage Active handles.\n  Added SCALE and NULLABLE support to DBD::Sponge.\n  Added missing execute() in fetchall_hashref docs thanks to Iain Truskett.\n  Added a CONTRIBUTING section to the docs with notes on creating patches.\n\n=head2 Changes in DBI 1.39,    27th November 2003\n\n  Fixed STORE to not clear error during nested DBI call, again/better,\n    thanks to Tony Bowden for the report and helpful test case.\n  Fixed DBI dispatch to not try to use AUTOLOAD for driver methods unless\n    the method has been declared (as methods should be when using AUTOLOAD).\n    This fixes a problem when the Attribute::Handlers module is loaded.\n  Fixed cwd check code to use $Config{path_sep} thanks to Steve Hay.\n  Fixed unqualified croak() calls thanks to Steffen Goeldner.\n  Fixed DBD::ExampleP TYPE and PRECISION attributes thanks to Tom Lowery.\n  Fixed tracing of methods that only get traced at high trace levels.\n\n  The level 1 trace no longer includes nested method calls so it generally\n    just shows the methods the application explicitly calls.\n  Added line to trace log (level>=4) when err/errstr is cleared.\n  Updated docs for InactiveDestroy and point out where and when the\n    trace includes the process id.\n  Update DBI::DBD docs thanks to Steffen Goeldner.\n  Removed docs saying that the DBI->data_sources method could be\n    passed a $dbh. The $dbh->data_sources method should be used instead.\n  Added link to 'DBI recipes' thanks to Giuseppe Maxia:\n    http://gmax.oltrelinux.com/dbirecipes.html (note that this\n    is not an endorsement that the recipies are 'optimal')\n\n  Note: There is a bug in perl 5.8.2 when configured with threads\n  and debugging enabled (bug #24463) which causes a DBI test to fail.\n\n=head2 Changes in DBI 1.38,    21th August 2003\n\n  NOTE: The DBI now requires perl version 5.6.0 or later.\n  (As per notice in DBI 1.33 released 27th February 2003)\n\n  Fixed spurious t/03handles failure on 64bit perls reported by H.Merijn Brand.\n  Fixed spurious t/15array failure on some perl versions thanks to Ed Avis.\n  Fixed build using dmake on windows thanks to Steffen Goeldner.\n  Fixed build on using some shells thanks to Gurusamy Sarathy.\n  Fixed ParamValues to only be appended to ShowErrorStatement if not empty.\n  Fixed $dbh->{Statement} not being writable by drivers in some cases.\n  Fixed occasional undef warnings on connect failures thanks to Ed Avis.\n  Fixed small memory leak when using $sth->{NAME..._hash}.\n  Fixed 64bit warnings thanks to Marian Jancar.\n  Fixed DBD::Proxy::db::DESTROY to not alter $@ thanks to Keith Chapman.\n  Fixed Makefile.PL status from WriteMakefile() thanks to Leon Brocard.\n\n  Changed \"Can't set ...->{Foo}: unrecognised attribute\" from an error to a\n    warning when running with DBI::ProxyServer to simplify upgrades.\n  Changed execute_array() to no longer require ArrayTupleStatus attribute.\n  Changed DBI->available_drivers to not hide DBD::Sponge.\n  Updated/moved placeholder docs to a better place thanks to Johan Vromans.\n  Changed dbd_db_do4 api in Driver.xst to match dbd_st_execute (return int,\n    not bool), relevant only to driver authors.\n  Changed neat(), and thus trace(), so strings marked as utf8 are presented\n    in double quotes instead of single quotes and are not sanitized.\n\n  Added $dbh->data_sources method.\n  Added $dbh->last_insert_id method.\n  Added $sth->execute_for_fetch($fetch_tuple_sub, \\@tuple_status) method.\n  Added DBI->installed_versions thanks to Jeff Zucker.\n  Added $DBI::Profile::ON_DESTROY_DUMP variable.\n  Added docs for DBD::Sponge thanks to Mark Stosberg.\n\n=head2 Changes in DBI 1.37,    15th May 2003\n\n  Fixed \"Can't get dbh->{Statement}: unrecognised attribute\" error in test\n    caused by change to perl internals in 5.8.0\n  Fixed to build with latest development perl (5.8.1@19525).\n  Fixed C code to use all ANSI declarations thanks to Steven Lembark.\n\n=head2 Changes in DBI 1.36,    11th May 2003\n\n  Fixed DBI->connect to carp instead of croak on 'old-style' usage.\n  Fixed connect(,,, { RootClass => $foo }) to not croak if module not found.\n  Fixed code generated by DBI::DBD::Metadata thanks to DARREN@cpan.org (#2270)\n  Fixed DBI::PurePerl to not reset $@ during method dispatch.\n  Fixed VMS build thanks to Michael Schwern.\n  Fixed Proxy disconnect thanks to Steven Hirsch.\n  Fixed error in DBI::DBD docs thanks to Andy Hassall.\n\n  Changed t/40profile.t to not require Time::HiRes.\n  Changed DBI::ProxyServer to load DBI only on first request, which\n    helps threaded server mode, thanks to Bob Showalter.\n  Changed execute_array() return value from row count to executed\n    tuple count, and now the ArrayTupleStatus attribute is mandatory.\n    NOTE: That is an API definition change that may affect your code.\n  Changed CompatMode attribute to also disable attribute 'quick FETCH'.\n  Changed attribute FETCH to be slightly faster thanks to Stas Bekman.\n\n  Added workaround for perl bug #17575 tied hash nested FETCH\n    thanks to Silvio Wanka.\n  Added Username and Password attributes to connect(..., \\%attr) and so\n    also embedded in DSN like \"dbi:Driver(Username=user,Password=pass):...\"\n    Username and Password can't contain \")\", \",\", or \"=\" characters.\n    The predence is DSN first, then \\%attr, then $user & $pass parameters,\n    and finally the DBI_USER & DBI_PASS environment variables.\n    The Username attribute is stored in the $dbh but the Password is not.\n  Added ProxyServer HOWTO configure restrictions docs thanks to Jochen Wiedmann.\n  Added MaxRows attribute to selectcol_arrayref prompted by Wojciech Pietron.\n  Added dump_handle as a method not just a DBI:: utility function.\n  Added on-demand by-row data feed into execute_array() using code ref,\n    or statement handle. For example, to insert from a select:\n    $insert_sth->execute_array( { ArrayTupleFetch => $select_sth, ... } )\n  Added warning to trace log when $h->{foo}=... is ignored due to\n    invalid prefix (e.g., not 'private_').\n\n=head2 Changes in DBI 1.35,    7th March 2003\n\n  Fixed memory leak in fetchrow_hashref introduced in DBI 1.33.\n  Fixed various DBD::Proxy errors introduced in DBI 1.33.\n  Fixed to ANSI C in dbd_dr_data_sources thanks to Jonathan Leffler.\n  Fixed $h->can($method_name) to return correct code ref.\n  Removed DBI::Format from distribution as it's now part of the\n    separate DBI::Shell distribution by Tom Lowery.\n  Updated DBI::DBD docs with a note about the CLONE method.\n  Updated DBI::DBD docs thanks to Jonathan Leffler.\n  Updated DBI::DBD::Metadata for perl 5.5.3 thanks to Jonathan Leffler.\n  Added note to install_method docs about setup_driver() method.\n\n=head2 Changes in DBI 1.34,    28th February 2003\n\n  Fixed DBI::DBD docs to refer to DBI::DBD::Metadata thanks to Jonathan Leffler.\n  Fixed dbi_time() compile using BorlandC on Windows thanks to Steffen Goeldner.\n  Fixed profile tests to do enough work to measure on Windows.\n  Fixed disconnect_all() to not be required by drivers.\n\n  Added $okay = $h->can($method_name) to check if a method exists.\n  Added DBD::*::*->install_method($method_name, \\%attr) so driver private\n    methods can be 'installed' into the DBI dispatcher and no longer\n    need to be called using $h->func(..., $method_name).\n\n  Enhanced $dbh->clone() and documentation.\n  Enhanced docs to note that dbi_time(), and thus profiling, is limited\n    to only millisecond (seconds/1000) resolution on Windows.\n  Removed old DBI::Shell from distribution and added Tom Lowery's improved\n    version to the Bundle::DBI file.\n  Updated minimum version numbers for modules in Bundle::DBI.\n\n=head2 Changes in DBI 1.33,    27th February 2003\n\n  NOTE: Future versions of the DBI *will not* support perl 5.6.0 or earlier.\n  : Perl 5.6.1 will be the minimum supported version.\n\n  NOTE: The \"old-style\" connect: DBI->connect($database, $user, $pass, $driver);\n  : has been deprecated for several years and will now generate a warning.\n  : It will be removed in a later release. Please change any old connect() calls.\n\n  Added $dbh2 = $dbh1->clone to make a new connection to the database\n    that is identical to the original one. clone() can be called even after\n    the original handle has been disconnected. See the docs for more details.\n\n  Fixed merging of profile data to not sum DBIprof_FIRST_TIME values.\n  Fixed unescaping of newlines in DBI::ProfileData thanks to Sam Tregar.\n  Fixed Taint bug with fetchrow_hashref with help from Bradley Baetz.\n  Fixed $dbh->{Active} for DBD::Proxy, reported by Bob Showalter.\n  Fixed STORE to not clear error during nested DBI call,\n    thanks to Tony Bowden for the report and helpful test case.\n  Fixed DBI::PurePerl error clearing behaviour.\n  Fixed dbi_time() and thus DBI::Profile on Windows thanks to Smejkal Petr.\n  Fixed problem that meant ShowErrorStatement could show wrong statement,\n   thanks to Ron Savage for the report and test case.\n  Changed Apache::DBI hook to check for $ENV{MOD_PERL} instead of\n    $ENV{GATEWAY_INTERFACE} thanks to Ask Bjoern Hansen.\n  No longer tries to dup trace logfp when an interpreter is being cloned.\n  Database handles no longer inherit shared $h->err/errstr/state storage\n    from their drivers, so each $dbh has it's own $h->err etc. values\n    and is no longer affected by calls made on other dbh's.\n    Now when a dbh is destroyed it's err/errstr/state values are copied\n    up to the driver so checking $DBI::errstr still works as expected.\n\n  Build / portability fixes:\n    Fixed t/40profile.t to not use Time::HiRes.\n    Fixed t/06attrs.t to not be locale sensitive, reported by Christian Hammers.\n    Fixed sgi compiler warnings, reported by Paul Blake.\n    Fixed build using make -j4, reported by Jonathan Leffler.\n    Fixed build and tests under VMS thanks to Craig A. Berry.\n\n  Documentation changes:\n    Documented $high_resolution_time = dbi_time() function.\n    Documented that bind_col() can take an attribute hash.\n    Clarified documentation for ParamValues attribute hash keys.\n    Many good DBI documentation tweaks from Jonathan Leffler,\n      including a major update to the DBI::DBD driver author guide.\n    Clarified that execute() should itself call finish() if it's\n      called on a statement handle that's still active.\n    Clarified $sth->{ParamValues}. Driver authors please note.\n    Removed \"NEW\" markers on some methods and attributes and\n      added text to each giving the DBI version it was added in,\n      if it was added after DBI 1.21 (Feb 2002).\n\n  Changes of note for authors of all drivers:\n    Added SQL_DATA_TYPE, SQL_DATETIME_SUB, NUM_PREC_RADIX, and\n      INTERVAL_PRECISION fields to docs for type_info_all. There were\n      already in type_info(), but type_info_all() didn't specify the\n      index values.  Please check and update your type_info_all() code.\n    Added DBI::DBD::Metadata module that auto-generates your drivers\n      get_info and type_info_all data and code, thanks mainly to\n      Jonathan Leffler and Steffen Goeldner. If you've not implemented\n      get_info and type_info_all methods and your database has an ODBC\n      driver available then this will do all the hard work for you!\n    Drivers should no longer pass Err, Errstr, or State to _new_drh\n      or _new_dbh functions.\n    Please check that you support the slightly modified behaviour of\n      $sth->{ParamValues}, e.g., always return hash with keys if possible.\n\n  Changes of note for authors of compiled drivers:\n    Added dbd_db_login6 & dbd_st_finish3 prototypes thanks to Jonathan Leffler.\n    All dbd_*_*() functions implemented by drivers must have a\n      corresponding #define dbd_*_* <driver_prefix>_*_* otherwise\n      the driver may not work with a future release of the DBI.\n\n  Changes of note for authors of drivers which use Driver.xst:\n    Some new method hooks have been added are are enabled by\n      defining corresponding macros:\n          $drh->data_sources()      - dbd_dr_data_sources\n          $dbh->do()                - dbd_db_do4\n    The following methods won't be compiled into the driver unless\n      the corresponding macro has been #defined:\n          $drh->disconnect_all()    - dbd_discon_all\n\n\n=head2 Changes in DBI 1.32,    1st December 2002\n\n  Fixed to work with 5.005_03 thanks to Tatsuhiko Miyagawa (I've not tested it).\n  Reenabled taint tests (accidentally left disabled) spotted by Bradley Baetz.\n  Improved docs for FetchHashKeyName attribute thanks to Ian Barwick.\n  Fixed core dump if fetchrow_hashref given bad argument (name of attribute\n    with a value that wasn't an array reference), spotted by Ian Barwick.\n  Fixed some compiler warnings thanks to David Wheeler.\n  Updated Steven Hirsch's enhanced proxy work (seems I left out a bit).\n  Made t/40profile.t tests more reliable, reported by Randy, who is part of\n    the excellent CPAN testers team: http://testers.cpan.org/\n    (Please visit, see the valuable work they do and, ideally, join in!)\n\n=head2 Changes in DBI 1.31,    29th November 2002\n\n  The fetchall_arrayref method, when called with a $maxrows parameter,\n    no longer gives an error if called again after all rows have been\n    fetched. This simplifies application logic when fetching in batches.\n    Also added batch-fetch while() loop example to the docs.\n  The proxy now supports non-lazy (synchronous) prepare, positioned\n    updates (for selects containing 'for update'), PlRPC config set\n    via attributes, and accurate propagation of errors, all thanks\n    to Steven Hirsch (plus a minor fix from Sean McMurray and doc\n    tweaks from Michael A Chase).\n  The DBI_AUTOPROXY env var can now hold the full dsn of the proxy driver\n    plus attributes, like \"dbi:Proxy(proxy_foo=>1):host=...\".\n  Added TaintIn & TaintOut attributes to give finer control over\n    tainting thanks to Bradley Baetz.\n  The RootClass attribute no longer ignores failure to load a module,\n    but also doesn't try to load a module if the class already exists,\n    with thanks to James FitzGibbon.\n  HandleError attribute works for connect failures thanks to David Wheeler.\n  The connect() RaiseError/PrintError message now includes the username.\n  Changed \"last handle unknown or destroyed\" warning to be a trace message.\n  Removed undocumented $h->event() method.\n  Further enhancements to DBD::PurePerl accuracy.\n  The CursorName attribute now defaults to undef and not an error.\n\n  DBI::Profile changes:\n    New DBI::ProfileDumper, DBI::ProfileDumper::Apache, and\n    DBI::ProfileData modules (to manage the storage and processing\n    of profile data), plus dbiprof program for analyzing profile\n    data - with many thanks to Sam Tregar.\n    Added $DBI::err (etc) tied variable lookup time to profile.\n    Added time for DESTROY method into parent handles profile (used to be ignored).\n\n  Documentation changes:\n    Documented $dbh = $sth->{Database} attribute.\n    Documented $dbh->connected(...) post-connection call when subclassing.\n    Updated some minor doc issues thanks to H.Merijn Brand.\n    Updated Makefile.PL example in DBI::DBD thanks to KAWAI,Takanori.\n    Fixed execute_array() example thanks to Peter van Hardenberg.\n\n  Changes for driver authors, not required but strongly recommended:\n    Change DBIS to DBIc_DBISTATE(imp_xxh)   [or imp_dbh, imp_sth etc]\n    Change DBILOGFP to DBIc_LOGPIO(imp_xxh) [or imp_dbh, imp_sth etc]\n    Any function from which all instances of DBIS and DBILOGFP are\n    removed can also have dPERLINTERP removed (a good thing).\n    All use of the DBIh_EVENT* macros should be removed.\n    Major update to DBI::DBD docs thanks largely to Jonathan Leffler.\n    Add these key values: 'Err' => \\my $err, 'Errstr' => \\my $errstr,\n    to the hash passed to DBI::_new_dbh() in your driver source code.\n    That will make each $dbh have it's own $h->err and $h->errstr\n    values separate from other $dbh belonging to the same driver.\n    If you have a ::db or ::st DESTROY methods that do nothing\n    you can now remove them - which speeds up handle destruction.\n\n\n=head2 Changes in DBI 1.30,    18th July 2002\n\n  Fixed problems with selectrow_array, selectrow_arrayref, and\n    selectall_arrayref introduced in DBI 1.29.\n  Fixed FETCHing a handle attribute to not clear $DBI::err etc (broken in 1.29).\n  Fixed core dump at trace level 9 or above.\n  Fixed compilation with perl 5.6.1 + ithreads (i.e. Windows).\n  Changed definition of behaviour of selectrow_array when called in a scalar\n    context to match fetchrow_array.\n  Corrected selectrow_arrayref docs which showed selectrow_array thanks to Paul DuBois.\n\n=head2 Changes in DBI 1.29,    15th July 2002\n\n  NOTE: This release changes the specified behaviour for the\n  : fetchrow_array method when called in a scalar context:\n  : The DBI spec used to say that it would return the FIRST field.\n  : Which field it returns (i.e., the first or the last) is now undefined.\n  : This does not affect statements that only select one column, which is\n  : usually the case when fetchrow_array is called in a scalar context.\n  : FYI, this change was triggered by discovering that the fetchrow_array\n  : implementation in Driver.xst (used by most compiled drivers)\n  : didn't match the DBI specification. Rather than change the code\n  : to match, and risk breaking existing applications, I've changed the\n  : specification (that part was always of dubious value anyway).\n\n  NOTE: Future versions of the DBI may not support for perl 5.5 much longer.\n  : If you are still using perl 5.005_03 you should be making plans to\n  : upgrade to at least perl 5.6.1, or 5.8.0. Perl 5.8.0 is due to be\n  : released in the next week or so.  (Although it's a \"point 0\" release,\n  : it is the most thoroughly tested release ever.)\n\n  Added XS/C implementations of selectrow_array, selectrow_arrayref, and\n    selectall_arrayref to Driver.xst. See DBI 1.26 Changes for more info.\n  Removed support for the old (fatally flawed) \"5005\" threading model.\n  Added support for new perl 5.8 iThreads thanks to Gerald Richter.\n    (Threading support and safety should still be regarded as beta\n    quality until further notice. But it's much better than it was.)\n  Updated the \"Threads and Thread Safety\" section of the docs.\n  The trace output can be sent to STDOUT instead of STDERR by using\n    \"STDOUT\" as the name of the file, i.e., $h->trace(..., \"STDOUT\")\n  Added pointer to perlreftut, perldsc, perllol, and perlboot manuals\n    into the intro section of the docs, suggested by Brian McCain.\n  Fixed DBI::Const::GetInfo::* pod docs thanks to Zack Weinberg.\n  Some changes to how $dbh method calls are treated by DBI::Profile:\n    Meta-data methods now clear $dbh->{Statement} on entry.\n    Some $dbh methods are now profiled as if $dbh->{Statement} was empty\n    (because thet're unlikely to actually relate to its contents).\n  Updated dbiport.h to ppport.h from perl 5.8.0.\n  Tested with perl 5.5.3 (vanilla, Solaris), 5.6.1 (vanilla, Solaris), and\n    perl 5.8.0 (RC3@17527 with iThreads & Multiplicity on Solaris and FreeBSD).\n\n=head2 Changes in DBI 1.28,    14th June 2002\n\n  Added $sth->{ParamValues} to return a hash of the most recent\n    values bound to placeholders via bind_param() or execute().\n    Individual drivers need to be updated to support it.\n  Enhanced ShowErrorStatement to include ParamValues if available:\n    \"DBD::foo::st execute failed: errstr [for statement ``...'' with params: 1='foo']\"\n  Further enhancements to DBD::PurePerl accuracy.\n\n=head2 Changes in DBI 1.27,    13th June 2002\n\n  Fixed missing column in C implementation of fetchall_arrayref()\n    thanks to Philip Molter for the prompt reporting of the problem.\n\n=head2 Changes in DBI 1.26,    13th June 2002\n\n  Fixed t/40profile.t to work on Windows thanks to Smejkal Petr.\n  Fixed $h->{Profile} to return undef, not error, if not set.\n  Fixed DBI->available_drivers in scalar context thanks to Michael Schwern.\n\n  Added C implementations of selectrow_arrayref() and fetchall_arrayref()\n    in Driver.xst.  All compiled drivers using Driver.xst will now be\n    faster making those calls. Most noticeable with fetchall_arrayref for\n    many rows or selectrow_arrayref with a fast query. For example, using\n    DBD::mysql a selectrow_arrayref for a single row using a primary key\n    is ~20% faster, and fetchall_arrayref for 20000 rows is twice as fast!\n    Drivers just need to be recompiled and reinstalled to enable it.\n    The fetchall_arrayref speed up only applies if $slice parameter is not used.\n  Added $max_rows parameter to fetchall_arrayref() to optionally limit\n    the number of rows returned. Can now fetch batches of rows.\n  Added MaxRows attribute to selectall_arrayref()\n    which then passes it to fetchall_arrayref().\n  Changed selectrow_array to make use of selectrow_arrayref.\n  Trace level 1 now shows first two parameters of all methods\n    (used to only for that for some, like prepare,execute,do etc)\n  Trace indicator for recursive calls (first char on trace lines)\n    now starts at 1 not 2.\n\n  Documented that $h->func() does not trigger RaiseError etc\n    so applications must explicitly check for errors.\n  DBI::Profile with DBI_PROFILE now shows percentage time inside DBI.\n  HandleError docs updated to show that handler can edit error message.\n  HandleError subroutine interface is now regarded as stable.\n\n=head2 Changes in DBI 1.25,    5th June 2002\n\n  Fixed build problem on Windows and some compiler warnings.\n  Fixed $dbh->{Driver} and $sth->{Statement} for driver internals\n    These are 'inner' handles as per behaviour prior to DBI 1.16.\n  Further minor improvements to DBI::PurePerl accuracy.\n\n=head2 Changes in DBI 1.24,    4th June 2002\n\n  Fixed reference loop causing a handle/memory leak\n    that was introduced in DBI 1.16.\n  Fixed DBI::Format to work with 'filehandles' from IO::Scalar\n    and similar modules thanks to report by Jeff Boes.\n  Fixed $h->func for DBI::PurePerl thanks to Jeff Zucker.\n  Fixed $dbh->{Name} for DBI::PurePerl thanks to Dean Arnold.\n\n  Added DBI method call profiling and benchmarking.\n    This is a major new addition to the DBI.\n    See $h->{Profile} attribute and DBI::Profile module.\n    For a quick trial, set the DBI_PROFILE environment variable and\n    run your favourite DBI script. Try it with DBI_PROFILE set to 1,\n    then try 2, 4, 8, 10, and -10. Have fun!\n\n  Added execute_array() and bind_param_array() documentation\n    with thanks to Dean Arnold.\n  Added notes about the DBI having not yet been tested with iThreads\n    (testing and patches for SvLOCK etc welcome).\n  Removed undocumented Handlers attribute (replaced by HandleError).\n  Tested with 5.5.3 and 5.8.0 RC1.\n\n=head2 Changes in DBI 1.23,    25th May 2002\n\n  Greatly improved DBI::PurePerl in performance and accuracy.\n  Added more detail to DBI::PurePerl docs about what's not supported.\n  Fixed undef warnings from t/15array.t and DBD::Sponge.\n\n=head2 Changes in DBI 1.22,    22nd May 2002\n\n  Added execute_array() and bind_param_array() with special thanks\n    to Dean Arnold. Not yet documented. See t/15array.t for examples.\n    All drivers now automatically support these methods.\n  Added DBI::PurePerl, a transparent DBI emulation for pure-perl drivers\n    with special thanks to Jeff Zucker. Perldoc DBI::PurePerl for details.\n  Added DBI::Const::GetInfo* modules thanks to Steffen Goeldner.\n  Added write_getinfo_pm utility to DBI::DBD thanks to Steffen Goeldner.\n  Added $allow_active==2 mode for prepare_cached() thanks to Stephen Clouse.\n\n  Updated DBI::Format to Revision 11.4 thanks to Tom Lowery.\n  Use File::Spec in Makefile.PL (helps VMS etc) thanks to Craig Berry.\n  Extend $h->{Warn} to commit/rollback ineffective warning thanks to Jeff Baker.\n  Extended t/preparse.t and removed \"use Devel::Peek\" thanks to Scott Hildreth.\n  Only copy Changes to blib/lib/Changes.pm once thanks to Jonathan Leffler.\n  Updated internals for modern perls thanks to Jonathan Leffler and Jeff Urlwin.\n  Tested with perl 5.7.3 (just using default perl config).\n\n  Documentation changes:\n\n  Added 'Catalog Methods' section to docs thanks to Steffen Goeldner.\n  Updated README thanks to Michael Schwern.\n  Clarified that driver may choose not to start new transaction until\n    next use of $dbh after commit/rollback.\n  Clarified docs for finish method.\n  Clarified potentials problems with prepare_cached() thanks to Stephen Clouse.\n\n\n=head2 Changes in DBI 1.21,    7th February 2002\n\n  The minimum supported perl version is now 5.005_03.\n\n  Fixed DBD::Proxy support for AutoCommit thanks to Jochen Wiedmann.\n  Fixed DBI::ProxyServer bind_param(_inout) handing thanks to Oleg Mechtcheriakov.\n  Fixed DBI::ProxyServer fetch loop thanks to nobull@mail.com.\n  Fixed install_driver do-the-right-thing with $@ on error. It, and connect(),\n    will leave $@ empty on success and holding the error message on error.\n    Thanks to Jay Lawrence, Gavin Sherlock and others for the bug report.\n  Fixed fetchrow_hashref to assign columns to the hash left-to-right\n    so later fields with the same name overwrite earlier ones\n    as per DBI < 1.15, thanks to Kay Roepke.\n\n  Changed tables() to use quote_indentifier() if the driver returns a\n    true value for $dbh->get_info(29) # SQL_IDENTIFIER_QUOTE_CHAR\n  Changed ping() so it no longer triggers RaiseError/PrintError.\n  Changed connect() to not call $class->install_driver unless needed.\n  Changed DESTROY to catch fatal exceptions and append to $@.\n\n  Added ISO SQL/CLI & ODBCv3 data type definitions thanks to Steffen Goeldner.\n  Removed the definition of SQL_BIGINT data type constant as the value is\n    inconsistent between standards (ODBC=-5, SQL/CLI=25).\n  Added $dbh->column_info(...) thanks to Steffen Goeldner.\n  Added $dbh->foreign_key_info(...) thanks to Steffen Goeldner.\n  Added $dbh->quote_identifier(...) insipred by Simon Oliver.\n  Added $dbh->set_err(...) for DBD authors and DBI subclasses\n    (actually been there for a while, now expanded and documented).\n  Added $h->{HandleError} = sub { ... } addition and/or alternative\n    to RaiseError/PrintError. See the docs for more info.\n  Added $h->{TraceLevel} = N attribute to set/get trace level of handle\n    thus can set trace level via an (eg externally specified) DSN\n    using the embedded attribute syntax:\n      $dsn = 'dbi:DB2(PrintError=1,TraceLevel=2):dbname';\n    Plus, you can also now do: local($h->{TraceLevel}) = N;\n    (but that leaks a little memory in some versions of perl).\n  Added some call tree information to trace output if trace level >= 3\n    With thanks to Graham Barr for the stack walking code.\n  Added experimental undocumented $dbh->preparse(), see t/preparse.t\n    With thanks to Scott T. Hildreth for much of the work.\n  Added Fowler/Noll/Vo hash type as an option to DBI::hash().\n\n  Documentation changes:\n\n  Added DBI::Changes so now you can \"perldoc DBI::Changes\", yeah!\n  Added selectrow_arrayref & selectrow_hashref docs thanks to Doug Wilson.\n  Added 'Standards Reference Information' section to docs to gather\n    together all references to relevant on-line standards.\n  Added link to poop.sourceforge.net into the docs thanks to Dave Rolsky.\n  Added link to hyperlinked BNF for SQL92 thanks to Jeff Zucker.\n  Added 'Subclassing the DBI' docs thanks to Stephen Clouse, and\n    then changed some of them to reflect the new approach to subclassing.\n  Added stronger wording to description of $h->{private_*} attributes.\n  Added docs for DBI::hash.\n\n  Driver API changes:\n\n  Now a COPY of the DBI->connect() attributes is passed to the driver\n    connect() method, so it can process and delete any elements it wants.\n    Deleting elements reduces/avoids the explicit\n      $dbh->{$_} = $attr->{$_} foreach keys %$attr;\n    that DBI->connect does after the driver connect() method returns.\n\n\n=head2 Changes in DBI 1.20,    24th August 2001\n\n  WARNING: This release contains two changes that may affect your code.\n  : Any code using selectall_hashref(), which was added in March 2001, WILL\n  : need to be changed. Any code using fetchall_arrayref() with a non-empty\n  : hash slice parameter may, in a few rare cases, need to be changed.\n  : See the change list below for more information about the changes.\n  : See the DBI documentation for a description of current behaviour.\n\n  Fixed memory leak thanks to Toni Andjelkovic.\n  Changed fetchall_arrayref({ foo=>1, ...}) specification again (sorry):\n    The key names of the returned hashes is identical to the letter case of\n    the names in the parameter hash, regardless of the L</FetchHashKeyName>\n    attribute. The letter case is ignored for matching.\n  Changed fetchall_arrayref([...]) array slice syntax specification to\n    clarify that the numbers in the array slice are perl index numbers\n    (which start at 0) and not column numbers (which start at 1).\n  Added { Columns=>... } and { Slice =>... } attributes to selectall_arrayref()\n    which is passed to fetchall_arrayref() so it can fetch hashes now.\n  Added a { Columns => [...] } attribute to selectcol_arrayref() so that\n    the list it returns can be built from more than one column per row.\n    Why? Consider my %hash = @{$dbh->selectcol_arrayref($sql,{ Columns=>[1,2]})}\n    to return id-value pairs which can be used directly to build a hash.\n  Added $hash_ref = $sth->fetchall_hashref( $key_field )\n    which returns a ref to a hash with, typically, one element per row.\n    $key_field is the name of the field to get the key for each row from.\n    The value of the hash for each row is a hash returned by fetchrow_hashref.\n  Changed selectall_hashref to return a hash ref (from fetchall_hashref)\n    and not an array of hashes as it has since DBI 1.15 (end March 2001).\n    WARNING: THIS CHANGE WILL BREAK ANY CODE USING selectall_hashref()!\n    Sorry, but I think this is an important regularization of the API.\n    To get previous selectall_hashref() behaviour (an array of hash refs)\n    change $ary_ref = $dbh->selectall_hashref( $statement, undef, @bind);\n\tto $ary_ref = $dbh->selectall_arrayref($statement, { Columns=>{} }, @bind);\n  Added NAME_lc_hash, NAME_uc_hash, NAME_hash statement handle attributes.\n    which return a ref to a hash of field_name => field_index (0..n-1) pairs.\n  Fixed select_hash() example thanks to Doug Wilson.\n  Removed (unbundled) DBD::ADO and DBD::Multiplex from the DBI distribution.\n    The latest versions of those modules are available from CPAN sites.\n  Added $dbh->begin_work. This method causes AutoCommit to be turned\n    off just until the next commit() or rollback().\n    Driver authors: if the DBIcf_BegunWork flag is set when your commit or\n    rollback method is called then please turn AutoCommit on and clear the\n    DBIcf_BegunWork flag. If you don't then the DBI will but it'll be much\n    less efficient and won't handle error conditions very cleanly.\n  Retested on perl 5.4.4, but the DBI won't support 5.4.x much longer.\n  Added text to SUPPORT section of the docs:\n    For direct DBI and DBD::Oracle support, enhancement, and related work\n    I am available for consultancy on standard commercial terms.\n  Added text to ACKNOWLEDGEMENTS section of the docs:\n    Much of the DBI and DBD::Oracle was developed while I was Technical\n    Director (CTO) of the Paul Ingram Group (www.ig.co.uk).  So I'd\n    especially like to thank Paul for his generosity and vision in\n    supporting this work for many years.\n\n=head2 Changes in DBI 1.19,    20th July 2001\n\n  Made fetchall_arrayref({ foo=>1, ...}) be more strict to the specification\n    in relation to wanting hash slice keys to be lowercase names.\n    WARNING: If you've used fetchall_arrayref({...}) with a hash slice\n    that contains keys with uppercase letters then your code will break.\n    (As far as I recall the spec has always said don't do that.)\n  Fixed $sth->execute() to update $dbh->{Statement} to $sth->{Statement}.\n  Added row number to trace output for fetch method calls.\n  Trace level 1 no longer shows fetches with row>1 (to reduce output volume).\n  Added $h->{FetchHashKeyName} = 'NAME_lc' or 'NAME_uc' to alter\n    behaviour of fetchrow_hashref() method. See docs.\n  Added type_info quote caching to quote() method thanks to Dean Kopesky.\n    Makes using quote() with second data type param much much faster.\n  Added type_into_all() caching to type_info(), spotted by Dean Kopesky.\n  Added new API definition for table_info() and tables(),\n    driver authors please note!\n  Added primary_key_info() to DBI API thanks to Steffen Goeldner.\n  Added primary_key() to DBI API as simpler interface to primary_key_info().\n  Indent and other fixes for DBI::DBD doc thanks to H.Merijn Brand.\n  Added prepare_cached() insert_hash() example thanks to Doug Wilson.\n  Removed false docs for fetchall_hashref(), use fetchall_arrayref({}).\n\n=head2 Changes in DBI 1.18,    4th June 2001\n\n  Fixed that altering ShowErrorStatement also altered AutoCommit!\n    Thanks to Jeff Boes for spotting that clanger.\n  Fixed DBD::Proxy to handle commit() and rollback(). Long overdue, sorry.\n  Fixed incompatibility with perl 5.004 (but no one's using that right? :)\n  Fixed connect_cached and prepare_cached to not be affected by the order\n    of elements in the attribute hash. Spotted by Mitch Helle-Morrissey.\n  Fixed version number of DBI::Shell\n    reported by Stuhlpfarrer Gerhard and others.\n  Defined and documented table_info() attribute semantics (ODBC compatible)\n    thanks to Olga Voronova, who also implemented then in DBD::Oracle.\n  Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n\n=head2 Changes in DBI 1.16,    30th May 2001\n\n  Reimplemented fetchrow_hashref in C, now fetches about 25% faster!\n  Changed behaviour if both PrintError and RaiseError are enabled\n    to simply do both (in that order, obviously :)\n  Slight reduction in DBI handle creation overhead.\n  Fixed $dbh->{Driver} & $sth->{Database} to return 'outer' handles.\n  Fixed execute param count check to honour RaiseError spotted by Belinda Giardie.\n  Fixed build for perl5.6.1 with PERLIO thanks to H.Merijn Brand.\n  Fixed client sql restrictions in ProxyServer.pm thanks to Jochen Wiedmann.\n  Fixed batch mode command parsing in Shell thanks to Christian Lemburg.\n  Fixed typo in selectcol_arrayref docs thanks to Jonathan Leffler.\n  Fixed selectrow_hashref to be available to callers thanks to T.J.Mather.\n  Fixed core dump if statement handle didn't define Statement attribute.\n  Added bind_param_inout docs to DBI::DBD thanks to Jonathan Leffler.\n  Added note to data_sources() method docs that some drivers may\n    require a connected database handle to be supplied as an attribute.\n  Trace of install_driver method now shows path of driver file loaded.\n  Changed many '||' to 'or' in the docs thanks to H.Merijn Brand.\n  Updated DBD::ADO again (improvements in error handling) from Tom Lowery.\n  Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n  Updated email and web addresses in DBI::FAQ thanks to Michael A Chase.\n\n=head2 Changes in DBI 1.15,    28th March 2001\n\n  Added selectrow_arrayref\n  Added selectrow_hashref\n  Added selectall_hashref thanks to Leon Brocard.\n  Added DBI->connect(..., { dbi_connect_method => 'method' })\n  Added $dbh->{Statement} aliased to most recent child $sth->{Statement}.\n  Added $h->{ShowErrorStatement}=1 to cause the appending of the\n    relevant Statement text to the RaiseError/PrintError text.\n  Modified type_info to always return hash keys in uppercase and\n    to not require uppercase 'DATA_TYPE' key from type_info_all.\n    Thanks to Jennifer Tong and Rob Douglas.\n  Added \\%attr param to tables() and table_info() methods.\n  Trace method uses warn() if it can't open the new file.\n  Trace shows source line and filename during global destruction.\n  Updated packages:\n    Updated Win32::DBIODBC (Win32::ODBC emulation) thanks to Roy Lee.\n    Updated DBD::ADO to much improved version 0.4 from Tom Lowery.\n    Updated DBD::Sponge to include $sth->{PRECISION} thanks to Tom Lowery.\n    Changed DBD::ExampleP to use lstat() instead of stat().\n  Documentation:\n    Documented $DBI::lasth (which has been there since day 1).\n    Documented SQL_* names.\n    Clarified and extended docs for $h->state thanks to Masaaki Hirose.\n    Clarified fetchall_arrayref({}) docs (thanks to, er, someone!).\n    Clarified type_info_all re lettercase and index values.\n    Updated DBI::FAQ to 0.38 thanks to Alligator Descartes.\n    Added cute bind_columns example thanks to H.Merijn Brand.\n    Extended docs on \\%attr arg to data_sources method.\n  Makefile.PL\n    Removed obscure potential 'rm -rf /' (thanks to Ulrich Pfeifer).\n    Removed use of glob and find (thanks to Michael A. Chase).\n  Proxy:\n    Removed debug messages from DBD::Proxy AUTOLOAD thanks to Brian McCauley.\n    Added fix for problem using table_info thanks to Tom Lowery.\n    Added better determination of where to put the pid file, and...\n    Added KNOWN ISSUES section to DBD::Proxy docs thanks to Jochen Wiedmann.\n  Shell:\n    Updated DBI::Format to include DBI::Format::String thanks to Tom Lowery.\n    Added describe command thanks to Tom Lowery.\n    Added columnseparator option thanks to Tom Lowery (I think).\n    Added 'raw' format thanks to, er, someone, maybe Tom again.\n  Known issues:\n    Perl 5.005 and 5.006 both leak memory doing local($handle->{Foo}).\n    Perl 5.004 doesn't. The leak is not a DBI or driver bug.\n\n=head2 Changes in DBI 1.14,\t14th June 2000\n\n  NOTE: This version is the one the DBI book is based on.\n  NOTE: This version requires at least Perl 5.004.\n  Perl 5.6 ithreads changes with thanks to Doug MacEachern.\n  Changed trace output to use PerlIO thanks to Paul Moore.\n  Fixed bug in RaiseError/PrintError handling.\n    (% chars in the error string could cause a core dump.)\n  Fixed Win32 PerlEx IIS concurrency bugs thanks to Murray Nesbitt.\n  Major documentation polishing thanks to Linda Mui at O'Reilly.\n  Password parameter now shown as **** in trace output.\n  Added two fields to type_info and type_info_all.\n  Added $dsn to PrintError/RaiseError message from DBI->connect().\n  Changed prepare_cached() croak to carp if sth still Active.\n  Added prepare_cached() example to the docs.\n  Added further DBD::ADO enhancements from Thomas Lowery.\n\n=head2 Changes in DBI 1.13,\t11th July 1999\n\n  Fixed Win32 PerlEx IIS concurrency bugs thanks to Murray Nesbitt.\n  Fixed problems with DBD::ExampleP long_list test mode.\n  Added SQL_WCHAR SQL_WVARCHAR SQL_WLONGVARCHAR and SQL_BIT\n    to list of known and exportable SQL types.\n  Improved data fetch performance of DBD::ADO.\n  Added GetTypeInfo to DBD::ADO thanks to Thomas Lowery.\n  Actually documented connect_cached thanks to Michael Schwern.\n  Fixed user/key/cipher bug in ProxyServer thanks to Joshua Pincus.\n\n=head2 Changes in DBI 1.12,\t29th June 1999\n\n  Fixed significant DBD::ADO bug (fetch skipped first row).\n  Fixed ProxyServer bug handling non-select statements.\n  Fixed VMS problem with t/examp.t thanks to Craig Berry.\n  Trace only shows calls to trace_msg and _set_fbav at high levels.\n  Modified t/examp.t to workaround Cygwin buffering bug.\n\n=head2 Changes in DBI 1.11,\t17th June 1999\n\n  Fixed bind_columns argument checking to allow a single arg.\n  Fixed problems with internal default_user method.\n  Fixed broken DBD::ADO.\n  Made default $DBI::rows more robust for some obscure cases.\n\n=head2 Changes in DBI 1.10,\t14th June 1999\n\n  Fixed trace_msg.al error when using Apache.\n  Fixed dbd_st_finish enhancement in Driver.xst (internals).\n  Enable drivers to define default username and password\n    and temporarily disabled warning added in 1.09.\n  Thread safety optimised for single thread case.\n\n=head2 Changes in DBI 1.09,\t9th June 1999\n\n  Added optional minimum trace level parameter to trace_msg().\n  Added warning in Makefile.PL that DBI will require 5.004 soon.\n  Added $dbh->selectcol_arrayref($statement) method.\n  Fixed fetchall_arrayref hash-slice mode undef NAME problem.\n  Fixed problem with tainted parameter checking and t/examp.t.\n  Fixed problem with thread safety code, including 64 bit machines.\n  Thread safety now enabled by default for threaded perls.\n  Enhanced code for MULTIPLICITY/PERL_OBJECT from ActiveState.\n  Enhanced prepare_cached() method.\n  Minor changes to trace levels (less internal info at level 2).\n  Trace log now shows \"!! ERROR...\" before the \"<- method\" line.\n  DBI->connect() now warn's if user / password is undefined and\n    DBI_USER / DBI_PASS environment variables are not defined.\n  The t/proxy.t test now ignores any /etc/dbiproxy.conf file.\n  Added portability fixes for MacOS from Chris Nandor.\n  Updated mailing list address from fugue.com to isc.org.\n\n=head2 Changes in DBI 1.08,\t12th May 1999\n\n  Much improved DBD::ADO driver thanks to Phlip Plumlee and others.\n  Connect now allows you to specify attribute settings within the DSN\n    E.g., \"dbi:Driver(RaiseError=>1,Taint=>1,AutoCommit=>0):dbname\"\n  The $h->{Taint} attribute now also enables taint checking of\n    arguments to almost all DBI methods.\n  Improved trace output in various ways.\n  Fixed bug where $sth->{NAME_xx} was undef in some situations.\n  Fixed code for MULTIPLICITY/PERL_OBJECT thanks to Alex Smishlajev.\n  Fixed and documented DBI->connect_cached.\n  Workaround for Cygwin32 build problem with help from Jong-Pork Park.\n  bind_columns no longer needs undef or hash ref as first parameter.\n\n=head2 Changes in DBI 1.07,\t6th May 1999\n\n  Trace output now shows contents of array refs returned by DBI.\n  Changed names of some result columns from type_info, type_info_all,\n    tables and table_info to match ODBC 3.5 / ISO/IEC standards.\n  Many fixes for DBD::Proxy and ProxyServer.\n  Fixed error reporting in install_driver.\n  Major enhancement to DBI::W32ODBC from Patrick Hollins.\n  Added $h->{Taint} to taint fetched data if tainting (perl -T).\n  Added code for MULTIPLICITY/PERL_OBJECT contributed by ActiveState.\n  Added $sth->more_results (undocumented for now).\n\n=head2 Changes in DBI 1.06,\t6th January 1999\n\n  Fixed Win32 Makefile.PL problem in 1.04 and 1.05.\n  Significant DBD::Proxy enhancements and fixes\n    including support for bind_param_inout (Jochen and I)\n  Added experimental DBI->connect_cached method.\n  Added $sth->{NAME_uc} and $sth->{NAME_lc} attributes.\n  Enhanced fetchrow_hashref to take an attribute name arg.\n\n=head2 Changes in DBI 1.05,\t4th January 1999\n\n  Improved DBD::ADO connect (thanks to Phlip Plumlee).\n  Improved thread safety (thanks to Jochen Wiedmann).\n  [Quick release prompted by truncation of copies on CPAN]\n\n=head2 Changes in DBI 1.04,\t3rd January 1999\n\n  Fixed error in Driver.xst. DBI build now tests Driver.xst.\n  Removed unused variable compiler warnings in Driver.xst.\n  DBI::DBD module now tested during DBI build.\n  Further clarification in the DBI::DBD driver writers manual.\n  Added optional name parameter to $sth->fetchrow_hashref.\n\n=head2 Changes in DBI 1.03,\t1st January 1999\n\n  Now builds with Perl>=5.005_54 (PERL_POLLUTE in DBIXS.h)\n  DBI trace trims path from \"at yourfile.pl line nnn\".\n  Trace level 1 now shows statement passed to prepare.\n  Assorted improvements to the DBI manual.\n  Assorted improvements to the DBI::DBD driver writers manual.\n  Fixed $dbh->quote prototype to include optional $data_type.\n  Fixed $dbh->prepare_cached problems.\n  $dbh->selectrow_array behaves better in scalar context.\n  Added a (very) experimental DBD::ADO driver for Win32 ADO.\n  Added experimental thread support (perl Makefile.PL -thread).\n  Updated the DBI::FAQ - thanks to Alligator Descartes.\n  The following changes were implemented and/or packaged\n    by Jochen Wiedmann - thanks Jochen:\n  Added a Bundle for CPAN installation of DBI, the DBI proxy\n    server and prerequisites (lib/Bundle/DBI.pm).\n  DBI->available_drivers uses File::Spec, if available.\n    This makes it work on MacOS. (DBI.pm)\n  Modified type_info to work with read-only values returned\n    by type_info_all. (DBI.pm)\n  Added handling of magic values in $sth->execute,\n    $sth->bind_param and other methods (Driver.xst)\n  Added Perl's CORE directory to the linkers path on Win32,\n    required by recent versions of ActiveState Perl.\n  Fixed DBD::Sponge to work with empty result sets.\n  Complete rewrite of DBI::ProxyServer and DBD::Proxy.\n\n=head2 Changes in DBI 1.02,\t2nd September 1998\n\n  Fixed DBI::Shell including @ARGV and /current.\n  Added basic DBI::Shell test.\n  Renamed DBI::Shell /display to /format.\n\n=head2 Changes in DBI 1.01,\t2nd September 1998\n\n  Many enhancements to Shell (with many contributions from\n  Jochen Wiedmann, Tom Lowery and Adam Marks).\n  Assorted fixes to DBD::Proxy and DBI::ProxyServer.\n  Tidied up trace messages - trace(2) much cleaner now.\n  Added $dbh->{RowCacheSize} and $sth->{RowsInCache}.\n  Added experimental DBI::Format (mainly for DBI::Shell).\n  Fixed fetchall_arrayref($slice_hash).\n  DBI->connect now honours PrintError=1 if connect fails.\n  Assorted clarifications to the docs.\n\n=head2 Changes in DBI 1.00,\t14th August 1998\n\n  The DBI is no longer 'alpha' software!\n  Added $dbh->tables and $dbh->table_info.\n  Documented \\%attr arg to data_sources method.\n  Added $sth->{TYPE}, $sth->{PRECISION} and $sth->{SCALE}.\n  Added $sth->{Statement}.\n  DBI::Shell now uses neat_list to print results\n  It also escapes \"'\" chars and converts newlines to spaces.\n\n=head2 Changes in DBI 0.95,\t10th August 1998\n\n  WARNING: THIS IS AN EXPERIMENTAL RELEASE!\n\n  Fixed 0.94 slip so it will build on pre-5.005 again.\n  Added DBI_AUTOPROXY environment variable.\n  Array ref returned from fetch/fetchrow_arrayref now readonly.\n  Improved connect error reporting by DBD::Proxy.\n  All trace/debug messages from DBI now go to trace file.\n\n=head2 Changes in DBI 0.94,\t9th August 1998\n\n  WARNING: THIS IS AN EXPERIMENTAL RELEASE!\n\n  Added DBD::Shell and dbish interactive DBI shell. Try it!\n  Any database attribs can be set via DBI->connect(,,, \\%attr).\n  Added _get_fbav and _set_fbav methods for Perl driver developers\n    (see ExampleP driver for perl usage). Drivers which don't use\n    one of these methods (either via XS or Perl) are not compliant.\n  DBI trace now shows adds \" at yourfile.pl line nnn\"!\n  PrintError and RaiseError now prepend driver and method name.\n  The available_drivers method no longer returns NullP or Sponge.\n  Added $dbh->{Name}.\n  Added $dbh->quote($value, $data_type).\n  Added more hints to install_driver failure message.\n  Added DBD::Proxy and DBI::ProxyServer (from Jochen Wiedmann).\n  Added $DBI::neat_maxlen to control truncation of trace output.\n  Added $dbh->selectall_arrayref and $dbh->selectrow_array methods.\n  Added $dbh->tables.\n  Added $dbh->type_info and $dbh->type_info_all.\n  Added $h->trace_msg($msg) to write to trace log.\n  Added @bool = DBI::looks_like_number(@ary).\n  Many assorted improvements to the DBI docs.\n\n=head2 Changes in DBI 0.93,\t13th February 1998\n\n  Fixed DBI::DBD::dbd_postamble bug causing 'Driver.xsi not found' errors.\n  Changes to handling of 'magic' values in neatsvpv (used by trace).\n  execute (in Driver.xst) stops binding after first bind error.\n  This release requires drivers to be rebuilt.\n\n=head2 Changes in DBI 0.92,\t3rd February 1998\n\n  Fixed per-handle memory leak (with many thanks to Irving Reid).\n  Added $dbh->prepare_cached() caching variant of $dbh->prepare.\n  Added some attributes:\n    $h->{Active}       is the handle 'Active' (vague concept) (boolean)\n    $h->{Kids}         e.g. number of sth's associated with a dbh\n    $h->{ActiveKids}   number of the above which are 'Active'\n    $dbh->{CachedKids} ref to prepare_cached sth cache\n  Added support for general-purpose 'private_' attributes.\n  Added experimental support for subclassing the DBI: see t/subclass.t\n  Added SQL_ALL_TYPES to exported :sql_types.\n  Added dbd_dbi_dir() and dbd_dbi_arch_dir() to DBI::DBD module so that\n  DBD Makefile.PLs can work with the DBI installed in non-standard locations.\n  Fixed 'Undefined value' warning and &sv_no output from neatsvpv/trace.\n  Fixed small 'once per interpreter' leak.\n  Assorted minor documentation fixes.\n\n=head2 Changes in DBI 0.91,\t10th December 1997\n\n  NOTE: This fix may break some existing scripts:\n  DBI->connect(\"dbi:...\",$user,$pass) was not setting AutoCommit and PrintError!\n  DBI->connect(..., { ... }) no longer sets AutoCommit or PrintError twice.\n  DBI->connect(..., { RaiseError=>1 }) now croaks if connect fails.\n  Fixed $fh parameter of $sth->dump_results;\n  Added default statement DESTROY method which carps.\n  Added default driver DESTROY method to silence AUTOLOAD/__DIE__/CGI::Carp\n  Added more SQL_* types to %EXPORT_TAGS and @EXPORT_OK.\n  Assorted documentation updates (mainly clarifications).\n  Added workaround for perl's 'sticky lvalue' bug.\n  Added better warning for bind_col(umns) where fields==0.\n  Fixed to build okay with 5.004_54 with or without USE_THREADS.\n  Note that the DBI has not been tested for thread safety yet.\n\n=head2 Changes in DBI 0.90,\t6th September 1997\n\n  Can once again be built with Perl 5.003.\n  The DBI class can be subclassed more easily now.\n  InactiveDestroy fixed for drivers using the *.xst template.\n  Slightly faster handle creation.\n  Changed prototype for dbd_*_*_attrib() to add extra param.\n  Note: 0.90, 0.89 and possibly some other recent versions have\n  a small memory leak. This will be fixed in the next release.\n\n=head2 Changes in DBI 0.89,\t25th July 1997\n\n  Minor fix to neatsvpv (mainly used for debug trace) to workaround\n  bug in perl where SvPV removes IOK flag from an SV.\n  Minor updates to the docs.\n\n=head2 Changes in DBI 0.88,\t22nd July 1997\n\n  Fixed build for perl5.003 and Win32 with Borland.\n  Fixed documentation formatting.\n  Fixed DBI_DSN ignored for old-style connect (with explicit driver).\n  Fixed AutoCommit in DBD::ExampleP\n  Fixed $h->trace.\n  The DBI can now export SQL type values: use DBI ':sql_types';\n  Modified Driver.xst and renamed DBDI.h to dbd_xsh.h\n\n=head2 Changes in DBI 0.87,\t18th July 1997\n\n  Fixed minor type clashes.\n  Added more docs about placeholders and bind values.\n\n=head2 Changes in DBI 0.86,\t16th July 1997\n\n  Fixed failed connect causing 'unblessed ref' and other errors.\n  Drivers must handle AutoCommit FETCH and STORE else DBI croaks.\n  Added $h->{LongReadLen} and $h->{LongTruncOk} attributes for BLOBS.\n  Added DBI_USER and DBI_PASS env vars. See connect docs for usage.\n  Added DBI->trace() to set global trace level (like per-handle $h->trace).\n  PERL_DBI_DEBUG env var renamed DBI_DEBUG (old name still works for now).\n  Updated docs, including commit, rollback, AutoCommit and Transactions sections.\n  Added bind_param method and execute(@bind_values) to docs.\n  Fixed fetchall_arrayref.\n\n  Since the DBIS structure has change the internal version numbers have also\n  changed (DBIXS_VERSION == 9 and DBISTATE_VERSION == 9) so drivers will have\n  to be recompiled. The test is also now more sensitive and the version\n  mismatch error message now more clear about what to do. Old drivers are\n  likely to core dump (this time) until recompiled for this DBI. In future\n  DBI/DBD version mismatch will always produce a clear error message.\n\n  Note that this DBI release contains and documents many new features\n  that won't appear in drivers for some time. Driver writers might like\n  to read perldoc DBI::DBD and comment on or apply the information given.\n\n=head2 Changes in DBI 0.85,\t25th June 1997\n\n  NOTE: New-style connect now defaults to AutoCommit mode unless\n  { AutoCommit => 0 } specified in connect attributes. See the docs.\n  AutoCommit attribute now defined and tracked by DBI core.\n  Drivers should use/honour this and not implement their own.\n  Added pod doc changes from Andreas and Jonathan.\n  New DBI_DSN env var default for connect method. See docs.\n  Documented the func method.\n  Fixed \"Usage: DBD::_::common::DESTROY\" error.\n  Fixed bug which set some attributes true when there value was fetched.\n  Added new internal DBIc_set() macro for drivers to use.\n\n=head2 Changes in DBI 0.84,\t20th June 1997\n\n  Added $h->{PrintError} attribute which, if set true, causes all errors to\n  trigger a warn().\n  New-style DBI->connect call now automatically sets PrintError=1 unless\n  { PrintError => 0 } specified in the connect attributes. See the docs.\n  The old-style connect with a separate driver parameter is deprecated.\n  Fixed fetchrow_hashref.\n  Renamed $h->debug to $h->trace() and added a trace filename arg.\n  Assorted other minor tidy-ups.\n\n=head2 Changes in DBI 0.83,\t11th June 1997\n\n  Added driver specification syntax to DBI->connect data_source\n  parameter: DBI->connect('dbi:driver:...', $user, $passwd);\n  The DBI->data_sources method should return data_source\n  names with the appropriate 'dbi:driver:' prefix.\n  DBI->connect will warn if \\%attr is true but not a hash ref.\n  Added the new fetchrow methods:\n    @row_ary  = $sth->fetchrow_array;\n    $ary_ref  = $sth->fetchrow_arrayref;\n    $hash_ref = $sth->fetchrow_hashref;\n  The old fetch and fetchrow methods still work.\n  Driver implementors should implement the new names for\n  fetchrow_array and fetchrow_arrayref ASAP (use the xs ALIAS:\n  directive to define aliases for fetch and fetchrow).\n  Fixed occasional problems with t/examp.t test.\n  Added automatic errstr reporting to the debug trace output.\n  Added the DBI FAQ from Alligator Descartes in module form for\n  easy reading via \"perldoc DBI::FAQ\". Needs reformatting.\n  Unknown driver specific attribute names no longer croak.\n  Fixed problem with internal neatsvpv macro.\n\n=head2 Changes in DBI 0.82,\t23rd May 1997\n\n  Added $h->{RaiseError} attribute which, if set true, causes all errors to\n  trigger a die(). This makes it much easier to implement robust applications\n  in terms of higher level eval { ... } blocks and rollbacks.\n  Added DBI->data_sources($driver) method for implementation by drivers.\n  The quote method now returns the string NULL (without quotes) for undef.\n  Added VMS support thanks to Dan Sugalski.\n  Added a 'quick start guide' to the README.\n  Added neatsvpv function pointer to DBIS structure to make it available for\n  use by drivers. A macro defines neatsvpv(sv,len) as (DBIS->neatsvpv(sv,len)).\n  Old XS macro SV_YES_NO changes to standard boolSV.\n  Since the DBIS structure has change the internal version numbers have also\n  changed (DBIXS_VERSION == 8 and DBISTATE_VERSION == 8) so drivers will have\n  to be recompiled.\n\n=head2 Changes in DBI 0.81,\t7th May 1997\n\n  Minor fix to let DBI build using less modern perls.\n  Fixed a suprious typo warning.\n\n=head2 Changes in DBI 0.80,\t6th May 1997\n\n  Builds with no changes on NT using perl5.003_99 (with thanks to Jeffrey Urlwin).\n  Automatically supports Apache::DBI (with thanks to Edmund Mergl).\n    DBI scripts no longer need to be modified to make use of Apache::DBI.\n  Added a ping method and an experimental connect_test_perf method.\n  Added a fetchhash and fetch_all methods.\n  The func method no longer pre-clears err and errstr.\n  Added ChopBlanks attribute (currently defaults to off, that may change).\n    Support for the attribute needs to be implemented by individual drivers.\n  Reworked tests into standard t/*.t form.\n  Added more pod text.  Fixed assorted bugs.\n\n\n=head2 Changes in DBI 0.79,\t7th Apr 1997\n\n  Minor release. Tidied up pod text and added some more descriptions\n  (especially disconnect). Minor changes to DBI.xs to remove compiler\n  warnings.\n\n=head2 Changes in DBI 0.78,\t28th Mar 1997\n\n  Greatly extended the pod documentation in DBI.pm, including the under\n  used bind_columns method. Use 'perldoc DBI' to read after installing.\n  Fixed $h->err. Fetching an attribute value no longer resets err.\n  Added $h->{InactiveDestroy}, see documentation for details.\n  Improved debugging of cached ('quick') attribute fetches.\n  errstr will return err code value if there is no string value.\n  Added DBI/W32ODBC to the distribution. This is a pure-perl experimental\n  DBI emulation layer for Win32::ODBC. Note that it's unsupported, your\n  mileage will vary, and bug reports without fixes will probably be ignored.\n\n=head2 Changes in DBI 0.77,\t21st Feb 1997\n\n  Removed erroneous $h->errstate and $h->errmsg methods from DBI.pm.\n  Added $h->err, $h->errstr and $h->state default methods in DBI.xs.\n  Updated informal DBI API notes in DBI.pm. Updated README slightly.\n  DBIXS.h now correctly installed into INST_ARCHAUTODIR.\n  (DBD authors will need to edit their Makefile.PL's to use\n  -I$(INSTALLSITEARCH)/auto/DBI -I$(INSTALLSITEARCH)/DBI)\n\n\n=head2 Changes in DBI 0.76,\t3rd Feb 1997\n\n  Fixed a compiler type warnings (pedantic IRIX again).\n\n=head2 Changes in DBI 0.75,\t27th Jan 1997\n\n  Fix problem introduced by a change in Perl5.003_XX.\n  Updated README and DBI.pm docs.\n\n=head2 Changes in DBI 0.74,\t14th Jan 1997\n\n  Dispatch now sets dbi_debug to the level of the current handle\n  (this makes tracing/debugging individual handles much easier).\n  The '>> DISPATCH' log line now only logged at debug >= 3 (was 2).\n  The $csr->NUM_OF_FIELDS attribute can be set if not >0 already.\n  You can log to a file using the env var PERL_DBI_DEBUG=/tmp/dbi.log.\n  Added a type cast needed by IRIX.\n  No longer sets perl_destruct_level unless debug set >= 4.\n  Make compatible with PerlIO and sfio.\n\n=head2 Changes in DBI 0.73,\t10th Oct 1996\n\n  Fixed some compiler type warnings (IRIX).\n  Fixed DBI->internal->{DebugLog} = $filename.\n  Made debug log file unbuffered.\n  Added experimental bind_param_inout method to interface.\n  Usage: $dbh->bind_param_inout($param, \\$value, $maxlen [, \\%attribs ])\n  (only currently used by DBD::Oracle at this time.)\n\n=head2 Changes in DBI 0.72,\t23 Sep 1996\n\n  Using an undefined value as a handle now gives a better\n  error message (mainly useful for emulators like Oraperl).\n  $dbh->do($sql, @params) now works for binding placeholders.\n\n=head2 Changes in DBI 0.71,\t10 July 1996\n\n  Removed spurious abort() from invalid handle check.\n  Added quote method to DBI interface and added test.\n\n=head2 Changes in DBI 0.70,\t16 June 1996\n\n  Added extra invalid handle check (dbih_getcom)\n  Fixed broken $dbh->quote method.\n  Added check for old GCC in Makefile.PL\n\n=head2 Changes in DBI 0.69\n\n  Fixed small memory leak.\n  Clarified the behaviour of DBI->connect.\n  $dbh->do now returns '0E0' instead of 'OK'.\n  Fixed \"Can't read $DBI::errstr, lost last handle\" problem.\n\n\n=head2 Changes in DBI 0.68,\t2 Mar 1996\n\n  Changes to suit perl5.002 and site_lib directories.\n  Detects old versions ahead of new in @INC.\n\n\n=head2 Changes in DBI 0.67,\t15 Feb 1996\n\n  Trivial change to test suite to fix a problem shown up by the\n  Perl5.002gamma release Test::Harness.\n\n\n=head2 Changes in DBI 0.66,\t29 Jan 1996\n\n  Minor changes to bring the DBI into line with 5.002 mechanisms,\n  specifically the xs/pm VERSION checking mechanism.\n  No functionality changes. One no-last-handle bug fix (rare problem).\n  Requires 5.002 (beta2 or later).\n\n\n=head2 Changes in DBI 0.65,\t23 Oct 1995\n\n  Added $DBI::state to hold SQL CLI / ODBC SQLSTATE value.\n  SQLSTATE \"00000\" (success) is returned as \"\" (false), all else is true.\n  If a driver does not explicitly initialise it (via $h->{State} or\n  DBIc_STATE(imp_xxh) then $DBI::state will automatically return \"\" if\n  $DBI::err is false otherwise \"S1000\" (general error).\n  As always, this is a new feature and liable to change.\n\n  The is *no longer* a default error handler!\n  You can add your own using push(@{$h->{Handlers}}, sub { ... })\n  but be aware that this interface may change (or go away).\n\n  The DBI now automatically clears $DBI::err, errstr and state before\n  calling most DBI methods. Previously error conditions would persist.\n  Added DBIh_CLEAR_ERROR(imp_xxh) macro.\n\n  DBI now EXPORT_OK's some utility functions, neat($value),\n  neat_list(@values) and dump_results($sth).\n\n  Slightly enhanced t/min.t minimal test script in an effort to help\n  narrow down the few stray core dumps that some porters still report.\n\n  Renamed readblob to blob_read (old name still works but warns).\n  Added default blob_copy_to_file method.\n\n  Added $sth = $dbh->tables method. This returns an $sth for a query\n  which has these columns: TABLE_CATALOGUE, TABLE_OWNER, TABLE_NAME,\n  TABLE_TYPE, REMARKS in that order. The TABLE_CATALOGUE column\n  should be ignored for now.\n\n\n=head2 Changes in DBI 0.64,\t23 Oct 1995\n\n  Fixed 'disconnect invalidates 1 associated cursor(s)' problem.\n  Drivers using DBIc_ACTIVE_on/off() macros should not need any changes\n  other than to test for DBIc_ACTIVE_KIDS() instead of DBIc_KIDS().\n  Fixed possible core dump in dbih_clearcom during global destruction.\n\n\n=head2 Changes in DBI 0.63,\t1 Sep 1995\n\n  Minor update. Fixed uninitialised memory bug in method\n  attribute handling and streamlined processing and debugging.\n  Revised usage definitions for bind_* methods and readblob.\n\n\n=head2 Changes in DBI 0.62,\t26 Aug 1995\n\n  Added method redirection method $h->func(..., $method_name).\n  This is now the official way to call private driver methods\n  that are not part of the DBI standard.  E.g.:\n      @ary = $sth->func('ora_types');\n  It can also be used to call existing methods. Has very low cost.\n\n  $sth->bind_col columns now start from 1 (not 0) to match SQL.\n  $sth->bind_columns now takes a leading attribute parameter (or undef),\n  e.g., $sth->bind_columns($attribs, \\$col1 [, \\$col2 , ...]);\n\n  Added handy DBD_ATTRIBS_CHECK macro to vet attribs in XS.\n  Added handy DBD_ATTRIB_GET_SVP, DBD_ATTRIB_GET_BOOL and\n  DBD_ATTRIB_GET_IV macros for handling attributes.\n\n  Fixed STORE for NUM_OF_FIELDS and NUM_OF_PARAMS.\n  Added FETCH for NUM_OF_FIELDS and NUM_OF_PARAMS.\n\n  Dispatch no longer bothers to call _untie().\n  Faster startup via install_method/_add_dispatch changes.\n\n\n=head2 Changes in DBI 0.61,\t22 Aug 1995\n\n  Added $sth->bind_col($column, \\$var [, \\%attribs ]);\n\n  This method enables perl variable to be directly and automatically\n  updated when a row is fetched. It requires no driver support\n  (if the driver has been written to use DBIS->get_fbav).\n  Currently \\%attribs is unused.\n\n  Added $sth->bind_columns(\\$var [, \\$var , ...]);\n\n  This method is a short-cut for bind_col which binds all the\n  columns of a query in one go (with no attributes). It also\n  requires no driver support.\n\n  Added $sth->bind_param($parameter, $var [, \\%attribs ]);\n\n  This method enables attributes to be specified when values are\n  bound to placeholders. It also enables binding to occur away\n  from the execute method to improve execute efficiency.\n  The DBI does not provide a default implementation of this.\n  See the DBD::Oracle module for a detailed example.\n\n  The DBI now provides default implementations of both fetch and\n  fetchrow.  Each is written in terms of the other. A driver is\n  expected to implement at least one of them.\n\n  More macro and assorted structure changes in DBDXS.h. Sorry!\n  The old dbihcom definitions have gone. All fields have macros.\n  The imp_xxh_t type is now used within the DBI as well as drivers.\n  Drivers must set DBIc_NUM_FIELDS(imp_sth) and DBIc_NUM_PARAMS(imp_sth).\n\n  test.pl includes a trivial test of bind_param and bind_columns.\n\n\n=head2 Changes in DBI 0.60,\t17 Aug 1995\n\n  This release has significant code changes but much less\n  dramatic than the previous release. The new implementors data\n  handling mechanism has matured significantly (don't be put off\n  by all the struct typedefs in DBIXS.h, there's just to make it\n  easier for drivers while keeping things type-safe).\n\n  The DBI now includes two new methods:\n\n  do\t\t$dbh->do($statement)\n\n  This method prepares, executes and finishes a statement. It is\n  designed to be used for executing one-off non-select statements\n  where there is no benefit in reusing a prepared statement handle.\n\n  fetch\t\t$array_ref = $sth->fetch;\n\n  This method is the new 'lowest-level' row fetching method. The\n  previous @row = $sth->fetchrow method now defaults to calling\n  the fetch method and expanding the returned array reference.\n\n  The DBI now provides fallback attribute FETCH and STORE functions\n  which drivers should call if they don't recognise an attribute.\n\n  THIS RELEASE IS A GOOD STARTING POINT FOR DRIVER DEVELOPERS!\n  Study DBIXS.h from the DBI and Oracle.xs etc from DBD::Oracle.\n  There will be further changes in the interface but nothing\n  as dramatic as these last two releases! (I hope :-)\n\n\n=head2 Changes in DBI 0.59\t15 Aug 1995\n\n  NOTE: THIS IS AN UNSTABLE RELEASE!\n\n  Major reworking of internal data management!\n  Performance improvements and memory leaks fixed.\n  Added a new NullP (empty) driver and a -m flag\n  to test.pl to help check for memory leaks.\n  Study DBD::Oracle version 0.21 for more details.\n  (Comparing parts of v0.21 with v0.20 may be useful.)\n\n\n=head2 Changes in DBI 0.58\t21 June 1995\n\n  Added DBI->internal->{DebugLog} = $filename;\n  Reworked internal logging.\n  Added $VERSION.\n  Made disconnect_all a compulsory method for drivers.\n\n\n=head1 ANCIENT HISTORY\n\n12th Oct 1994: First public release of the DBI module.\n               (for Perl 5.000-beta-3h)\n\n19th Sep 1994: DBperl project renamed to DBI.\n\n29th Sep 1992: DBperl project started.\n\n=cut\n", "#  $Id$\n#  Copyright (c) 1997-2002  Tim Bunce  Ireland\n#  Copyright (c) 2002       Jonathan Leffler\n#\n#  You may distribute under the terms of either the GNU General Public\n#  License or the Artistic License, as specified in the Perl README file.\n\n\n#include \"Driver_xst.h\"\n\n\nMODULE = DBD::~DRIVER~  PACKAGE = DBD::~DRIVER~\n\nREQUIRE:    1.929\nPROTOTYPES: DISABLE\n\nBOOT:\n    PERL_UNUSED_VAR(items);\n    DBISTATE_INIT;\n    /* XXX this interface will change: */\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::dr::imp_data_size\", sizeof(imp_drh_t));\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::db::imp_data_size\", sizeof(imp_dbh_t));\n    DBI_IMP_SIZE(\"DBD::~DRIVER~::st::imp_data_size\", sizeof(imp_sth_t));\n    dbd_init(DBIS);\n\n\n# ------------------------------------------------------------\n# driver level interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~  PACKAGE = DBD::~DRIVER~::dr\n\n\nvoid\ndbixs_revision(...)\n    PPCODE:\n    ST(0) = sv_2mortal(newSViv(DBIXS_REVISION));\n\n\n#ifdef dbd_discon_all\n\n# disconnect_all renamed and ALIAS'd to avoid length clash on VMS :-(\nvoid\ndiscon_all_(drh)\n    SV *        drh\n    ALIAS:\n        disconnect_all = 1\n    CODE:\n    D_imp_drh(drh);\n    PERL_UNUSED_VAR(ix);\n    ST(0) = dbd_discon_all(drh, imp_drh) ? &PL_sv_yes : &PL_sv_no;\n\n#endif /* dbd_discon_all */\n\n\n#ifdef dbd_dr_data_sources\n\nvoid\ndata_sources(drh, attr = Nullsv)\n    SV *drh\n    SV *attr\n    PPCODE:\n    {\n        D_imp_drh(drh);\n        AV *av = dbd_dr_data_sources(drh, imp_drh, attr);\n        if (av) {\n            int i;\n            int n = AvFILL(av)+1;\n            EXTEND(sp, n);\n            for (i = 0; i < n; ++i) {\n                PUSHs(AvARRAY(av)[i]);\n            }\n        }\n    }\n\n#endif\n\n\n# ------------------------------------------------------------\n# database level interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~    PACKAGE = DBD::~DRIVER~::db\n\n\nvoid\n_login(dbh, dbname, username, password, attribs=Nullsv)\n    SV *        dbh\n    SV *        dbname\n    SV *        username\n    SV *        password\n    SV *        attribs\n    CODE:\n    {\n    D_imp_dbh(dbh);\n#if !defined(dbd_db_login6_sv)\n    STRLEN lna;\n    char *u = (SvOK(username)) ? SvPV(username,lna) : (char*)\"\";\n    char *p = (SvOK(password)) ? SvPV(password,lna) : (char*)\"\";\n#endif\n#ifdef dbd_db_login6_sv\n    ST(0) = dbd_db_login6_sv(dbh, imp_dbh, dbname, username, password, attribs) ? &PL_sv_yes : &PL_sv_no;\n#elif defined(dbd_db_login6)\n    ST(0) = dbd_db_login6(dbh, imp_dbh, SvPV_nolen(dbname), u, p, attribs) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_db_login( dbh, imp_dbh, SvPV_nolen(dbname), u, p) ? &PL_sv_yes : &PL_sv_no;\n#endif\n    }\n\n\nvoid\nselectall_arrayref(...)\n    PREINIT:\n    SV *sth;\n    SV **maxrows_svp;\n    SV **tmp_svp;\n    SV *attr = &PL_sv_undef;\n    imp_sth_t *imp_sth;\n    CODE:\n    if (items > 2) {\n        attr = ST(2);\n        if (SvROK(attr) &&\n                (DBD_ATTRIB_TRUE(attr,\"Slice\",5,tmp_svp) || DBD_ATTRIB_TRUE(attr,\"Columns\",7,tmp_svp))\n        ) {\n            /* fallback to perl implementation */\n            SV *tmp =dbixst_bounce_method(\"DBD::~DRIVER~::db::SUPER::selectall_arrayref\", items);\n            SPAGAIN;\n            ST(0) = tmp;\n            XSRETURN(1);\n        }\n    }\n    /* --- prepare --- */\n    if (SvROK(ST(1))) {\n        MAGIC *mg;\n        sth = ST(1);\n        /* switch to inner handle if not already */\n        if ( (mg = mg_find(SvRV(sth),'P')) )\n            sth = mg->mg_obj;\n    }\n    else {\n        sth = dbixst_bounce_method(\"prepare\", 3);\n        SPAGAIN; SP -= items; /* because stack might have been realloc'd */\n        if (!SvROK(sth))\n            XSRETURN_UNDEF;\n        /* switch to inner handle */\n        sth = mg_find(SvRV(sth),'P')->mg_obj;\n    }\n    imp_sth = (imp_sth_t*)(DBIh_COM(sth));\n    /* --- bind_param --- */\n    if (items > 3) {    /* need to bind params before execute */\n        if (!dbdxst_bind_params(sth, imp_sth, items-2, ax+2) ) {\n            XSRETURN_UNDEF;\n        }\n    }\n    /* --- execute --- */\n    DBIc_ROW_COUNT(imp_sth) = 0;\n    if ( dbd_st_execute(sth, imp_sth) <= -2 ) { /* -2 == error */\n        XSRETURN_UNDEF;\n    }\n    /* --- fetchall --- */\n    maxrows_svp = DBD_ATTRIB_GET_SVP(attr, \"MaxRows\", 7);\n    SV *tmp = dbdxst_fetchall_arrayref(sth, &PL_sv_undef, (maxrows_svp) ? *maxrows_svp : &PL_sv_undef);\n    SPAGAIN;\n    ST(0) = tmp;\n\n\nvoid\nselectrow_arrayref(...)\n    ALIAS:\n        selectrow_array = 1\n    PREINIT:\n    int is_selectrow_array = (ix == 1);\n    imp_sth_t *imp_sth;\n    SV *sth;\n    AV *row_av;\n    PPCODE:\n    if (SvROK(ST(1))) {\n        MAGIC *mg;\n        sth = ST(1);\n        /* switch to inner handle if not already */\n        if ( (mg = mg_find(SvRV(sth),'P')) )\n            sth = mg->mg_obj;\n    }\n    else {\n        /* --- prepare --- */\n        sth = dbixst_bounce_method(\"prepare\", 3);\n        SPAGAIN; SP -= items; /* because stack might have been realloc'd */\n        if (!SvROK(sth)) {\n            if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n        }\n        /* switch to inner handle */\n        sth = mg_find(SvRV(sth),'P')->mg_obj;\n    }\n    imp_sth = (imp_sth_t*)(DBIh_COM(sth));\n    /* --- bind_param --- */\n    if (items > 3) {    /* need to bind params before execute */\n        if (!dbdxst_bind_params(sth, imp_sth, items-2, ax+2) ) {\n            if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n        }\n    }\n    /* --- execute --- */\n    DBIc_ROW_COUNT(imp_sth) = 0;\n    if ( dbd_st_execute(sth, imp_sth) <= -2 ) { /* -2 == error */\n        if (is_selectrow_array) { XSRETURN_EMPTY; } else { XSRETURN_UNDEF; }\n    }\n    /* --- fetchrow_arrayref --- */\n    row_av = dbd_st_fetch(sth, imp_sth);\n    if (!row_av) {\n        if (GIMME == G_SCALAR)\n            PUSHs(&PL_sv_undef);\n    }\n    else if (is_selectrow_array) {\n        int i;\n        int num_fields = AvFILL(row_av)+1;\n        if (GIMME == G_SCALAR)\n            num_fields = 1; /* return just first field */\n        EXTEND(sp, num_fields);\n        for(i=0; i < num_fields; ++i) {\n            PUSHs(AvARRAY(row_av)[i]);\n        }\n    }\n    else {\n        PUSHs( sv_2mortal(newRV((SV *)row_av)) );\n    }\n    /* --- finish --- */\n#ifdef dbd_st_finish3\n    dbd_st_finish3(sth, imp_sth, 0);\n#else\n    dbd_st_finish(sth, imp_sth);\n#endif\n\n\n#ifdef dbd_db_do4 /* deebeedee-deebee-doo, deebee-doobee-dah? */\n\nvoid\ndo(dbh, statement, params = Nullsv)\n    SV *        dbh\n    char *      statement\n    SV *        params\n    CODE:\n    {\n    D_imp_dbh(dbh);\n    IV retval;\n    retval = dbd_db_do4(dbh, imp_dbh, statement, params);\n    /* remember that dbd_db_do4 must return <= -2 for error     */\n    if (retval == 0)            /* ok with no rows affected     */\n        XST_mPV(0, \"0E0\");      /* (true but zero)              */\n    else if (retval < -1)       /* -1 == unknown number of rows */\n        XST_mUNDEF(0);          /* <= -2 means error            */\n    else\n        XST_mIV(0, retval);     /* typically 1, rowcount or -1  */\n    }\n\n#endif\n\n\n#ifdef dbd_db_last_insert_id\n\nvoid\nlast_insert_id(dbh, catalog, schema, table, field, attr=Nullsv)\n    SV *        dbh\n    SV *        catalog\n    SV *        schema\n    SV *        table\n    SV *        field\n    SV *        attr\n    CODE:\n    {\n    D_imp_dbh(dbh);\n    ST(0) = dbd_db_last_insert_id(dbh, imp_dbh, catalog, schema, table, field, attr);\n    }\n\n#endif\n\n\nvoid\ncommit(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if (DBIc_has(imp_dbh,DBIcf_AutoCommit) && DBIc_WARN(imp_dbh))\n        warn(\"commit ineffective with AutoCommit enabled\");\n    ST(0) = dbd_db_commit(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n\n\nvoid\nrollback(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if (DBIc_has(imp_dbh,DBIcf_AutoCommit) && DBIc_WARN(imp_dbh))\n        warn(\"rollback ineffective with AutoCommit enabled\");\n    ST(0) = dbd_db_rollback(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n\n\nvoid\ndisconnect(dbh)\n    SV *        dbh\n    CODE:\n    D_imp_dbh(dbh);\n    if ( !DBIc_ACTIVE(imp_dbh) ) {\n        XSRETURN_YES;\n    }\n    /* Check for disconnect() being called whilst refs to cursors       */\n    /* still exists. This possibly needs some more thought.             */\n    if (DBIc_ACTIVE_KIDS(imp_dbh) && DBIc_WARN(imp_dbh) && !PL_dirty) {\n        STRLEN lna;\n        char *plural = (DBIc_ACTIVE_KIDS(imp_dbh)==1) ? (char*)\"\" : (char*)\"s\";\n        warn(\"%s->disconnect invalidates %d active statement handle%s %s\",\n            SvPV(dbh,lna), (int)DBIc_ACTIVE_KIDS(imp_dbh), plural,\n            \"(either destroy statement handles or call finish on them before disconnecting)\");\n    }\n    ST(0) = dbd_db_disconnect(dbh, imp_dbh) ? &PL_sv_yes : &PL_sv_no;\n    DBIc_ACTIVE_off(imp_dbh);   /* ensure it's off, regardless */\n\n\nvoid\nSTORE(dbh, keysv, valuesv)\n    SV *        dbh\n    SV *        keysv\n    SV *        valuesv\n    CODE:\n    D_imp_dbh(dbh);\n    if (SvGMAGICAL(valuesv))\n        mg_get(valuesv);\n    ST(0) = &PL_sv_yes;\n    if (!dbd_db_STORE_attrib(dbh, imp_dbh, keysv, valuesv))\n        if (!DBIc_DBISTATE(imp_dbh)->set_attr(dbh, keysv, valuesv))\n            ST(0) = &PL_sv_no;\n\n\nvoid\nFETCH(dbh, keysv)\n    SV *        dbh\n    SV *        keysv\n    CODE:\n    D_imp_dbh(dbh);\n    SV *valuesv = dbd_db_FETCH_attrib(dbh, imp_dbh, keysv);\n    if (!valuesv)\n        valuesv = DBIc_DBISTATE(imp_dbh)->get_attr(dbh, keysv);\n    ST(0) = valuesv;    /* dbd_db_FETCH_attrib did sv_2mortal   */\n\n\nvoid\nDESTROY(dbh)\n    SV *        dbh\n    PPCODE:\n    /* keep in sync with default DESTROY in DBI.xs */\n    D_imp_dbh(dbh);\n    ST(0) = &PL_sv_yes;\n    if (!DBIc_IMPSET(imp_dbh)) {        /* was never fully set up       */\n        STRLEN lna;\n        if (DBIc_WARN(imp_dbh) && !PL_dirty && DBIc_DBISTATE(imp_dbh)->debug >= 2)\n             PerlIO_printf(DBIc_LOGPIO(imp_dbh),\n                \"         DESTROY for %s ignored - handle not initialised\\n\",\n                    SvPV(dbh,lna));\n    }\n    else {\n        if (DBIc_IADESTROY(imp_dbh)) {            /* wants ineffective destroy */\n            DBIc_ACTIVE_off(imp_dbh);\n            if (DBIc_DBISTATE(imp_dbh)->debug)\n                 PerlIO_printf(DBIc_LOGPIO(imp_dbh), \"         DESTROY %s skipped due to InactiveDestroy\\n\", SvPV_nolen(dbh));\n        }\n        if (DBIc_ACTIVE(imp_dbh)) {\n            if (!DBIc_has(imp_dbh,DBIcf_AutoCommit)) {\n                /* Application is using transactions and hasn't explicitly disconnected.\n                    Some databases will automatically commit on graceful disconnect.\n                    Since we're about to gracefully disconnect as part of the DESTROY\n                    we want to be sure we're not about to implicitly commit changes\n                    that are incomplete and should be rolled back. (The DESTROY may\n                    be due to a RaiseError, for example.) So we rollback here.\n                    This will be harmless if the application has issued a commit,\n                    XXX Could add an attribute flag to indicate that the driver\n                    doesn't have this problem. Patches welcome.\n                */\n                if (DBIc_WARN(imp_dbh) /* only warn if likely to be useful... */\n                &&  DBIc_is(imp_dbh, DBIcf_Executed) /* has not just called commit/rollback */\n            /*  && !DBIc_is(imp_dbh, DBIcf_ReadOnly) -- is not read only */\n                && (!PL_dirty || DBIc_DBISTATE(imp_dbh)->debug >= 3)\n                ) {\n                    warn(\"Issuing rollback() due to DESTROY without explicit disconnect() of %s handle %s\",\n                        SvPV_nolen(*hv_fetch((HV*)SvRV(dbh), \"ImplementorClass\", 16, 1)),\n                        SvPV_nolen(*hv_fetch((HV*)SvRV(dbh), \"Name\", 4, 1))\n                    );\n                }\n                dbd_db_rollback(dbh, imp_dbh);                  /* ROLLBACK! */\n            }\n            dbd_db_disconnect(dbh, imp_dbh);\n            DBIc_ACTIVE_off(imp_dbh);   /* ensure it's off, regardless */\n        }\n        dbd_db_destroy(dbh, imp_dbh);\n    }\n\n\n#ifdef dbd_take_imp_data\n\nvoid\ntake_imp_data(h)\n    SV * h\n    CODE:\n    D_imp_xxh(h);\n    /* dbd_take_imp_data() returns &sv_no (or other defined but false value)\n     * to indicate \"preparations complete, now call SUPER::take_imp_data\" for me.\n     * Anything else is returned to the caller via sv_2mortal(sv), typically that\n     * would be &sv_undef for error or an SV holding the imp_data.\n     */\n    SV *sv = dbd_take_imp_data(h, imp_xxh, NULL);\n    if (SvOK(sv) && !SvTRUE(sv)) {\n        SV *tmp = dbixst_bounce_method(\"DBD::~DRIVER~::db::SUPER::take_imp_data\", items);\n        SPAGAIN;\n        ST(0) = tmp;\n    } else {\n        ST(0) = sv_2mortal(sv);\n    }\n\n#endif\n\n#ifdef dbd_db_data_sources\n\nvoid\ndata_sources(dbh, attr = Nullsv)\n    SV *dbh\n    SV *attr\n    PPCODE:\n    {\n        D_imp_dbh(dbh);\n        AV *av = dbd_db_data_sources(dbh, imp_dbh, attr);\n        if (av) {\n            int i;\n            int n = AvFILL(av)+1;\n            EXTEND(sp, n);\n            for (i = 0; i < n; ++i) {\n                PUSHs(AvARRAY(av)[i]);\n            }\n        }\n    }\n\n#endif\n\n# -- end of DBD::~DRIVER~::db\n\n# ------------------------------------------------------------\n# statement interface\n# ------------------------------------------------------------\nMODULE = DBD::~DRIVER~    PACKAGE = DBD::~DRIVER~::st\n\n\nvoid\n_prepare(sth, statement, attribs=Nullsv)\n    SV *        sth\n    SV *        statement\n    SV *        attribs\n    CODE:\n    {\n    D_imp_sth(sth);\n    DBD_ATTRIBS_CHECK(\"_prepare\", sth, attribs);\n#ifdef dbd_st_prepare_sv\n    ST(0) = dbd_st_prepare_sv(sth, imp_sth, statement, attribs) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_st_prepare(sth, imp_sth, SvPV_nolen(statement), attribs) ? &PL_sv_yes : &PL_sv_no;\n#endif\n    }\n\n\n#ifdef dbd_st_rows\n\nvoid\nrows(sth)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    XST_mIV(0, dbd_st_rows(sth, imp_sth));\n\n#endif /* dbd_st_rows */\n\n\n#ifdef dbd_st_bind_col\n\nvoid\nbind_col(sth, col, ref, attribs=Nullsv)\n    SV *        sth\n    SV *        col\n    SV *        ref\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    if (SvGMAGICAL(ref))\n        mg_get(ref);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_col\", sth, attribs);\n            /* XXX we should perhaps complain if TYPE is not SvNIOK */\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    switch(dbd_st_bind_col(sth, imp_sth, col, ref, sql_type, attribs)) {\n    case 2:     ST(0) = &PL_sv_yes;        /* job done completely */\n                break;\n    case 1:     /* fallback to DBI default */\n                ST(0) = (DBIc_DBISTATE(imp_sth)->bind_col(sth, col, ref, attribs))\n                    ? &PL_sv_yes : &PL_sv_no;\n                break;\n    default:    ST(0) = &PL_sv_no;         /* dbd_st_bind_col has called set_err */\n                break;\n    }\n    }\n\n#endif /* dbd_st_bind_col */\n\nvoid\nbind_param(sth, param, value, attribs=Nullsv)\n    SV *        sth\n    SV *        param\n    SV *        value\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    if (SvGMAGICAL(value))\n        mg_get(value);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_param\", sth, attribs);\n            /* XXX we should perhaps complain if TYPE is not SvNIOK */\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    ST(0) = dbd_bind_ph(sth, imp_sth, param, value, sql_type, attribs, FALSE, 0)\n                ? &PL_sv_yes : &PL_sv_no;\n    }\n\n\nvoid\nbind_param_inout(sth, param, value_ref, maxlen, attribs=Nullsv)\n    SV *        sth\n    SV *        param\n    SV *        value_ref\n    IV          maxlen\n    SV *        attribs\n    CODE:\n    {\n    IV sql_type = 0;\n    D_imp_sth(sth);\n    SV *value;\n    if (!SvROK(value_ref) || SvTYPE(SvRV(value_ref)) > SVt_PVMG)\n        croak(\"bind_param_inout needs a reference to a scalar value\");\n    value = SvRV(value_ref);\n    if (SvREADONLY(value))\n        croak(\"Modification of a read-only value attempted\");\n    if (SvGMAGICAL(value))\n        mg_get(value);\n    if (attribs) {\n        if (SvNIOK(attribs)) {\n            sql_type = SvIV(attribs);\n            attribs = Nullsv;\n        }\n        else {\n            SV **svp;\n            DBD_ATTRIBS_CHECK(\"bind_param\", sth, attribs);\n            DBD_ATTRIB_GET_IV(attribs, \"TYPE\",4, svp, sql_type);\n        }\n    }\n    ST(0) = dbd_bind_ph(sth, imp_sth, param, value, sql_type, attribs, TRUE, maxlen)\n                ? &PL_sv_yes : &PL_sv_no;\n    }\n\n\nvoid\nexecute(sth, ...)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    int retval;\n    if (items > 1) {    /* need to bind params */\n        if (!dbdxst_bind_params(sth, imp_sth, items, ax) ) {\n            XSRETURN_UNDEF;\n        }\n    }\n    /* XXX this code is duplicated in selectrow_arrayref above  */\n    if (DBIc_ROW_COUNT(imp_sth) > 0) /* reset for re-execute */\n        DBIc_ROW_COUNT(imp_sth) = 0;\n    retval = dbd_st_execute(sth, imp_sth);\n    /* remember that dbd_st_execute must return <= -2 for error */\n    if (retval == 0)            /* ok with no rows affected     */\n        XST_mPV(0, \"0E0\");      /* (true but zero)              */\n    else if (retval < -1)       /* -1 == unknown number of rows */\n        XST_mUNDEF(0);          /* <= -2 means error            */\n    else\n        XST_mIV(0, retval);     /* typically 1, rowcount or -1  */\n\n\n#ifdef dbd_st_execute_for_fetch\n\nvoid\nexecute_for_fetch(sth, fetch_tuple_sub, tuple_status = Nullsv)\n    SV *        sth\n    SV *        fetch_tuple_sub\n    SV *        tuple_status\n    CODE:\n    {\n    D_imp_sth(sth);\n    ST(0) = dbd_st_execute_for_fetch(sth, imp_sth, fetch_tuple_sub, tuple_status);\n    }\n\n#endif\n\n\n\nvoid\nfetchrow_arrayref(sth)\n    SV *        sth\n    ALIAS:\n        fetch = 1\n    CODE:\n    D_imp_sth(sth);\n    AV *av;\n    PERL_UNUSED_VAR(ix);\n    av = dbd_st_fetch(sth, imp_sth);\n    ST(0) = (av) ? sv_2mortal(newRV((SV *)av)) : &PL_sv_undef;\n\n\nvoid\nfetchrow_array(sth)\n    SV *        sth\n    ALIAS:\n        fetchrow = 1\n    PPCODE:\n    D_imp_sth(sth);\n    AV *av;\n    av = dbd_st_fetch(sth, imp_sth);\n    if (av) {\n        int i;\n        int num_fields = AvFILL(av)+1;\n        EXTEND(sp, num_fields);\n        for(i=0; i < num_fields; ++i) {\n            PUSHs(AvARRAY(av)[i]);\n        }\n        PERL_UNUSED_VAR(ix);\n    }\n\n\nvoid\nfetchall_arrayref(sth, slice=&PL_sv_undef, batch_row_count=&PL_sv_undef)\n    SV *        sth\n    SV *        slice\n    SV *        batch_row_count\n    CODE:\n    if (SvOK(slice)) {  /* fallback to perl implementation */\n        SV *tmp = dbixst_bounce_method(\"DBD::~DRIVER~::st::SUPER::fetchall_arrayref\", 3);\n        SPAGAIN;\n        ST(0) = tmp;\n    }\n    else {\n        SV *tmp = dbdxst_fetchall_arrayref(sth, slice, batch_row_count);\n        SPAGAIN;\n        ST(0) = tmp;\n    }\n\n\nvoid\nfinish(sth)\n    SV *        sth\n    CODE:\n    D_imp_sth(sth);\n    D_imp_dbh_from_sth;\n    if (!DBIc_ACTIVE(imp_sth)) {\n        /* No active statement to finish        */\n        XSRETURN_YES;\n    }\n    if (!DBIc_ACTIVE(imp_dbh)) {\n        /* Either an explicit disconnect() or global destruction        */\n        /* has disconnected us from the database. Finish is meaningless */\n        DBIc_ACTIVE_off(imp_sth);\n        XSRETURN_YES;\n    }\n#ifdef dbd_st_finish3\n    ST(0) = dbd_st_finish3(sth, imp_sth, 0) ? &PL_sv_yes : &PL_sv_no;\n#else\n    ST(0) = dbd_st_finish(sth, imp_sth) ? &PL_sv_yes : &PL_sv_no;\n#endif\n\n\nvoid\nblob_read(sth, field, offset, len, destrv=Nullsv, destoffset=0)\n    SV *        sth\n    int field\n    long        offset\n    long        len\n    SV *        destrv\n    long        destoffset\n    CODE:\n    {\n    D_imp_sth(sth);\n    if (!destrv)\n        destrv = sv_2mortal(newRV(sv_2mortal(newSV(0))));\n    if (dbd_st_blob_read(sth, imp_sth, field, offset, len, destrv, destoffset))\n         ST(0) = SvRV(destrv);\n    else ST(0) = &PL_sv_undef;\n    }\n\n\nvoid\nSTORE(sth, keysv, valuesv)\n    SV *        sth\n    SV *        keysv\n    SV *        valuesv\n    CODE:\n    D_imp_sth(sth);\n    if (SvGMAGICAL(valuesv))\n        mg_get(valuesv);\n    ST(0) = &PL_sv_yes;\n    if (!dbd_st_STORE_attrib(sth, imp_sth, keysv, valuesv))\n        if (!DBIc_DBISTATE(imp_sth)->set_attr(sth, keysv, valuesv))\n            ST(0) = &PL_sv_no;\n\n\n# FETCH renamed and ALIAS'd to avoid case clash on VMS :-(\nvoid\nFETCH_attrib(sth, keysv)\n    SV *        sth\n    SV *        keysv\n    ALIAS:\n    FETCH = 1\n    CODE:\n    D_imp_sth(sth);\n    SV *valuesv;\n    PERL_UNUSED_VAR(ix);\n    valuesv = dbd_st_FETCH_attrib(sth, imp_sth, keysv);\n    if (!valuesv)\n        valuesv = DBIc_DBISTATE(imp_sth)->get_attr(sth, keysv);\n    ST(0) = valuesv;    /* dbd_st_FETCH_attrib did sv_2mortal   */\n\n\nvoid\nDESTROY(sth)\n    SV *        sth\n    PPCODE:\n    /* keep in sync with default DESTROY in DBI.xs */\n    D_imp_sth(sth);\n    ST(0) = &PL_sv_yes;\n    if (!DBIc_IMPSET(imp_sth)) {        /* was never fully set up       */\n        STRLEN lna;\n        if (DBIc_WARN(imp_sth) && !PL_dirty && DBIc_DBISTATE(imp_sth)->debug >= 2)\n             PerlIO_printf(DBIc_LOGPIO(imp_sth),\n                \"         DESTROY for %s ignored - handle not initialised\\n\",\n                    SvPV(sth,lna));\n    }\n    else {\n        if (DBIc_IADESTROY(imp_sth)) {  /* wants ineffective destroy    */\n            DBIc_ACTIVE_off(imp_sth);\n            if (DBIc_DBISTATE(imp_sth)->debug)\n                 PerlIO_printf(DBIc_LOGPIO(imp_sth), \"         DESTROY %s skipped due to InactiveDestroy\\n\", SvPV_nolen(sth));\n        }\n        if (DBIc_ACTIVE(imp_sth)) {\n            D_imp_dbh_from_sth;\n            if (!PL_dirty && DBIc_ACTIVE(imp_dbh)) {\n#ifdef dbd_st_finish3\n                dbd_st_finish3(sth, imp_sth, 1);\n#else\n                dbd_st_finish(sth, imp_sth);\n#endif\n            }\n            else {\n                DBIc_ACTIVE_off(imp_sth);\n            }\n        }\n        dbd_st_destroy(sth, imp_sth);\n    }\n\n# end of ~DRIVER~.xst\n# vim:ts=8:sw=4:et\n"], "filenames": ["Changes", "Driver.xst"], "buggy_code_start_loc": [14, 160], "buggy_code_end_loc": [14, 664], "fixing_code_start_loc": [15, 160], "fixing_code_end_loc": [16, 668], "type": "CWE-787", "message": "An issue was discovered in the DBI module before 1.628 for Perl. Stack corruption occurs when a user-defined function requires a non-trivial amount of memory and the Perl stack gets reallocated.", "other": {"cve": {"id": "CVE-2013-7491", "sourceIdentifier": "cve@mitre.org", "published": "2020-09-11T19:15:11.800", "lastModified": "2020-09-17T17:24:42.833", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "An issue was discovered in the DBI module before 1.628 for Perl. Stack corruption occurs when a user-defined function requires a non-trivial amount of memory and the Perl stack gets reallocated."}, {"lang": "es", "value": "Se detect\u00f3 un problema en el m\u00f3dulo DBI versiones anteriores a 1.628 para Perl. La corrupci\u00f3n de la pila ocurre cuando una funci\u00f3n definida por el usuario requiere una cantidad de memoria no trivial y la pila de Perl logra reasignarse"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "LOW", "baseScore": 5.3, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 3.9, "impactScore": 1.4}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:N/C:N/I:N/A:P", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "NONE", "availabilityImpact": "PARTIAL", "baseScore": 5.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 10.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-787"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:perl:dbi:*:*:*:*:*:*:*:*", "versionEndExcluding": "1.628", "matchCriteriaId": "F036BC9E-8383-48D7-B4E2-655BB6E0A238"}]}]}], "references": [{"url": "https://github.com/perl5-dbi/dbi/commit/401f1221311c71f760e21c98772f0f7e3cbead1d", "source": "cve@mitre.org", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://metacpan.org/pod/distribution/DBI/Changes#Changes-in-DBI-1.628-22nd-July-2013", "source": "cve@mitre.org", "tags": ["Release Notes"]}, {"url": "https://rt.cpan.org/Public/Bug/Display.html?id=85562", "source": "cve@mitre.org", "tags": ["Third Party Advisory"]}]}, "github_commit_url": "https://github.com/perl5-dbi/dbi/commit/401f1221311c71f760e21c98772f0f7e3cbead1d"}}