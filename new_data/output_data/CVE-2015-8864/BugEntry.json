{"buggy_code": ["CHANGELOG Roundcube Webmail\n===========================\n\n- Fix regression where some message attachments could be missing on edit/forward (#1490608)\n- Fix regression in displaying contents of message/rfc822 parts (#1490606)\n- Fix handling of message/rfc822 attachments on replies and forwards (#1490607)\n- Fix PDF support detection in Firefox > 19 (#1490610)\n- Fix path traversal vulnerability in setting a skin (#1490620)\n- Fix so drag-n-drop of text (e.g. recipient addresses) on compose page actually works (#1490619)\n- Fix .htaccess rewrite rules to not block .well-known URIs (#1490615)\n- Fix mail view scaling on iOS (#1490551)\n- Fix PHP7 warning \"session_start(): Session callback expects true/false return value\" (#1490624)\n\nRELEASE 1.2-beta\n----------------\n- Update TinyMCE to version 4.2\n- Remove backward compatibility \"layer\" of bc.php (#1490534)\n- Add possibility to define date format in write operations for ldap attributes (#1488741)\n- Display attachment size in compose (#1484774)\n- Added possibility to drag-n-drop attachments from mail preview to compose window\n- Implemented mail messages searching with predefined date interval\n- PGP encryption support via Mailvelope integration\n- PGP encryption support via Enigma plugin\n- PHP7 compatibility fixes (#1490416)\n- Security: Added brute-force attack prevention via login rate limit (#1490566)\n- Security: Added options to validate username/password on logon (#1490500)\n- Security: Improve randomness of security tokens (#1490529)\n- Security: Use random security tokens instead of hashes based on encryption key (#1490404)\n- Security: Improved encrypt/decrypt methods with option to choose the cipher_method (#1489719)\n- Make optional adding of standard signature separator - sig_separator (#1487768)\n- Optimize folder_size() on Cyrus IMAP by using special folder annotation (#1490514)\n- Make optional hidding of folders with name starting with a dot - imap_skip_hidden_folders (#1490468)\n- Add option to enable HTML editor always, except when replying to plain text messages (#1489365)\n- Emoticons: Added option to switch on/off emoticons in compose editor (#1485732)\n- Emoticons: Added option to switch on/off emoticons in plain text messages\n- Emoticons: All emoticons-related functionality is handled by the plugin now\n- Installer: Add button to save generated config file in system temp directory (#1488149)\n- Remove common subject prefixes Re:, Re[x]:, Re-x: on reply (#1490497)\n- Added GSSAPI/Kerberos authentication plugin - krb_authentication\n- Password: Allow temporarily disabling the plugin functionality with a notice\n- Require Mbstring and OpenSSL extensions (#1490415)\n- Add --config and --type options to moduserprefs.sh script (#1490051)\n- Implemented memcache_debug and apc_debug options\n- Installer: Remove system() function use (#1490139)\n- Password plugin: Added 'kpasswd' driver by Peter Allgeyer\n- Add initdb.sh to create database from initial.sql script with prefix support (#1490188)\n- Plugin API: Added disabled_plugins an disabled_buttons options in html_editor hook\n- Plugin API: Added html2text hook\n- Plugin API: Added message_part_body hook\n- Plugin API: Added message_ready hook\n- Plugin API: Add special onload() method to execute plugin actions before startup (session and GUI initialization)\n- Implemented UI element to jump to specified page of the messages list (#1485235)\n- Fix searching of contacts to allow remote images for known senders (#1490504)\n- Fix bug where clicking date column with 'arrival' sorting would switch to sorting by 'date' (#1490126)\n- Fix bug where message content could overlap attachments list in Larry skin (#1490479)\n- Fix so microseconds macro (u) in log_date_format works (#1490446)\n- Fix so unrecognized TNEF attachments are displayed on the list of attachments (#1490351)\n- Fix so database_attachments::cleanup() does not remove attachments from other sessions (#1490542)\n- Fix responses list update issue after response name change (#1490555)\n- Fix bug where message preview was unintentionally reset on check-recent action (#1490563)\n- Fix bug where HTML messages with invalid/excessive css styles couldn't be displayed (#1490539)\n- Fix redundant blank lines when using HTML and top posting (#1490576)\n- Fix redundant blank lines on start of text after html to text conversion (#1490577)\n- Fix HTML sanitizer to skip <!-- node type X --> in output (#1490583)\n- Fix invalid LDAP query in ACL user autocompletion (#1490591)\n\nRELEASE 1.1.3\n-------------\n- Fix closing of nested menus (#1490443)\n- Fix so E_DEPRECATED errors from PEAR libs are ignored by error_reporting change (#1490281)\n- Fix compatibility with PHP 5.3 in rcube_ldap class (#1490424)\n- Get rid of Mail_mimeDecode package dependency (#1490416)\n- Fix \"Importing...\" message does not hide on error (#1490422)\n- Fix Compose action in addressbook for results from multiple addressbooks (#1490413)\n- Fix bug where some messages in multi-folder search couldn't be viewed/printed/downloaded (#1490426)\n- Fix unintentional messages list page change on page switch in compose addressbook (#1490427)\n- Fix race-condition in saving user preferences and loading plugin config (#1490431)\n- Fix so plain text signature field uses monospace font (#1490435)\n- Fix so links with href == content aren't added to links list on html to text conversion (#1490434)\n- Fix handling of non-break spaces in html to text conversion (#1490436)\n- Fix self-reply detection issues (#1490439)\n- Fix multi-folder search result sorting by arrival date (#1490450)\n- Fix so *-request@ addresses in Sender: header are also ignored on reply-all (#1490452)\n- Update to TinyMCE 4.1.10 (#1490405)\n- Fix draft removal after a message is sent and storing sent message is disabled (#1490467)\n- Fix so imap folder attribute comparisons are case-insensitive (#1490466)\n- Fix bug where new messages weren't added to the list in search mode\n- Fix wrong positioning of message list header on page scroll in Webkit browsers (#1490035)\n- Fix some javascript errors in rare situations (#1490441)\n- Fix error when using back button after sending an email (#1490009)\n- Fix removing signature when switching to identity with an empty sig in HTML mode (#1490470)\n- Disable links list generation on html-to-text conversion of identities or composed message (#1490437)\n- Fix \"washing\" of style elements wrapped into many lines\n- Fix so input field (e.g. search box) does not loose focus on list load (#1490455)\n- Fix so css of one html part does not apply to other text parts on message display (#1490505)\n- Fix XSS issue in drag-n-drop file uploads [CVE-2015-8105] (#1490530)\n- Fix handling of plus character in mailto: links (#1490510)\n- Fix so adding CC/BCC recipients from the sidebar unhides compose form fields in Classic skin (#1490472)\n- Fix so gc.sh script removes also expired sessions from sql database (#1490512)\n- Fix support for Mozilla-based browsers, e.g. Pale Moon (#1490517)\n- Fix various issues with Turkish (and similar) locales (#1490519)\n- Fix so In-Reply-To header is set also for MDN receipts (#1490523)\n- Fix missing HTTP_X_FORWARDED_FOR address in generated Received header\n- Fix issue where Content-Length of some attachments could be set to wrong value causing browser errors (#1490482)\n\nRELEASE 1.1.2\n-------------\n- Add new plugin hook 'identity_create_after' providing the ID of the inserted identity (#1490358)\n- Add option to place signature at bottom of the quoted text even in top-posting mode [sig_below]\n- Fix handling of %-encoded entities in mailto: URLs (#1490346)\n- Fix zipped messages downloads after selecting all messages in a folder (#1490339)\n- Fix vpopmaild driver of password plugin\n- Fix PHP warning: Non-static method PEAR::setErrorHandling() should not be called statically (#1490343)\n- Fix tables listing routine on mysql and postgres so it skips system or other database tables and views (#1490337)\n- Fix message list header in classic skin on window resize in Internet Explorer (#1490213)\n- Fix so text/calendar parts are listed as attachments even if not marked as such (#1490325)\n- Fix lack of signature separator for plain text signatures in html mode (#1490352)\n- Fix font artifact in Google Chrome on Windows (#1490353)\n- Fix bug where forced extwin page reload could exit from the extwin mode (#1490350)\n- Fix bug where some unrelated attachments in multipart/related message were not listed (#1490355)\n- Fix mouseup event handling when dragging a list record (#1490359)\n- Fix bug where preview_pane setting wasn't always saved into user preferences (#1490362)\n- Fix bug where messages count was not updated after message move/delete with skip_deleted=false (#1490372)\n- Fix security issue in contact photo handling (#1490379)\n- Fix possible memcache/apc cache data consistency issues (#1490390)\n- Fix bug where imap_conn_options were ignored in IMAP connection test (#1490392)\n- Fix bug where some files could have \"executable\" extension when stored in temp folder (#1490377)\n- Fix attached file path unsetting in database_attachments plugin (#1490393)\n- Fix issues when using moduserprefs.sh without --user argument (#1490399)\n- Fix potential info disclosure issue by protecting directory access (#1490378)\n- Fix blank image in html_signature when saving identity changes (#1490412)\n- Installer: Use openssl_random_pseudo_bytes() (if available) to generate des_key (#1490402)\n- Fix XSS vulnerability in _mbox argument handling (#1490417)\n\nRELEASE 1.1.1\n-------------\n- ACL: Allow other plugins to adjust the list of permissions and groups to edit\n- Add possibility to print contact information (of a single contact)\n- Add possibility to configure max_allowed_packet value for all database engines (#1490283)\n- Improved handling of storage errors after message is sent\n- Update to TinyMCE 4.1.9\n- Unified request* event arguments handling, added support for _unlock and _action parameters\n- Security: Generate random hash for the per-user local storage prefix (#1490279)\n- Fix refreshing of drafts list when sending a message which was saved in meantime (#1490238)\n- Fix saving/sending emoticon images when assets_dir is set\n- Fix PHP fatal error when visiting Vacation interface and there's no sieve script yet (#1490292)\n- Fix setting max packet size for DB caches and check packet size also in shared cache\n- Fix needless security warning on BMP attachments display (#1490282)\n- Fix handling of some improper constructs in format=flowed text as per the RFC3676[4.5] (#1490284)\n- Fix performance of rcube_db_mysql::get_variable()\n- Fix missing or not up-to-date CATEGORIES entry in vCard export (#1490277)\n- Fix fatal errors on systems without mbstring extension or mb_regex_encoding() function (#1490280)\n- Fix cursor position on reply below the quote in HTML mode (#1490263)\n- Fix so \"over quota\" errors are displayed also in message compose page\n- Fix duplicate entries supression in autocomplete result (#1490290)\n- Fix \"Non-static method PEAR::isError() should not be called statically\" errors (#1490281)\n- Fix parsing invalid HTML messages with BOM after <!DOCTYPE> (#1490291)\n- Fix duplicate entry on timezones list in rcube_config::timezone_name_from_abbr() (#1490293)\n- Fix so localized folder name is displayed in multi-folder search result (#1490243)\n- Fix javascript error after creating a folder which is a subfolder of another one (#1490297)\n- Fix bug where subject of sent/saved message was removed if mbstring wasn't installed (#1490295)\n- Fix missing vcard_attachment icon on messages list (#1490303)\n- Fix storing signatures with big images in MySQL database (#1490306)\n- Fix Opera browser detection in javascript (#1490307)\n- Fix so search filter, scope and fields are reset on folder change\n- Fix rows count when messages search fails (#1490266)\n- Fix bug where spellchecking in HTML editor do not work after switching editor type more than once (#1490311)\n- Fix bug where TinyMCE area height was too small on slow network connection (#1490310)\n- Fix backtick character handling in sql queries (#1490312)\n- Fix redirect URL for attachments loaded in an iframe when behind a proxy (#1490191)\n- Fix menu container references to point to the actual <ul> element (#1490313)\n- Fix javascripts errors in IE8 - lack of Event.which, focusing a hidden element (#1490318)\n\nRELEASE 1.1.0\n-------------\n- Make SMTP error log more verbose - include server response and error code\n- Fix download options menu (added by zipdownload plugin) in classic skin (#1490228)\n- Fix blocked.gif image usage with assets_dir set\n- Fix bug where max_group_members was ignored when adding a new contact (#1490214)\n- Hide MDN and DSN options in compose if disabled by admin (#1490221)\n- Fix checks based on window.ActiveXObject in IE > 10\n- Fix XSS issue in style attribute handling [CVE-2015-1433] (#1490227)\n- Fix bug where Drafts list wasn't updated on draft-save action in new window (#1490225)\n- Fix so \"set as default\" option is hidden if identities_level > 1 (#1490226)\n- Fix bug where search was reset after returning from compose visited for reply\n- Fix javascript error in \"IE 8.0/Tablet PC\" browser (#1490210)\n- Fix bug where Reply-To address was ignored on reply to messages sent by self (#1490233)\n- Fix bug where empty fieldmap config entries caused empty results of ldap search (#1490229)\n- Fix bug where drafts list wasn't refreshed after draft message was sent from another window (#1490238)\n- Fix keyboard navigation and css in datepicker widget across many Firefox versions\n- Fix false warning when opening attached text/plain files (#1490241)\n- Fix bug where signature could have been inserted twice after plain-to-html switch (#1490239)\n- Fix security issue in DBMail driver of password plugin (#1490261)\n- Enable FollowSymLinks option in .htaccess file which is required by rewrite rules (#1490255)\n- Fix so JSON.parse() errors on localStorage items are ignored (#1490249)\n\nRELEASE 1.1-rc\n--------------\n- Update jQuery to version 2.1.3\n- Allow to override any config option through env variables\n- Improve system security by using optional special URL with security token - use_secure_urls\n- Allow to define separate server/path for image/js/css files - assets_url/assets_dir\n- Sync vendor folder if exists in source package (#1490145)\n- Avoid useless reloading list when resetting search with active filter (#1490057)\n- Fix invalid folder selection if clicked while busy (#1490158)\n- Fix import of multiple contact email addresses from Outlook-csv format (#1490169)\n- Fix drag-n-drop to folders expanded while dragging (#1490157)\n- Fix import of multiple contact groups from Google-csv format (#1490159)\n- Fix import of contacts with multiple email addresses from Google-csv format (#1490178)\n- Fix bugs where CSRF attacks were still possible on some requests [CVE-2014-9587]\n- Fix some rcube_utils::anytodatetime() corner cases with timezone mismatches (#1490163)\n- Improve move-to and contact-export button in classic skin (#1490166)\n- Fix wrong icon for download button in classic skin\n- Fix bug where sent message was saved in Sent folder even if disabled by user (#1490208)\n\nRELEASE 1.1-beta\n----------------\n- Fix skin path handling in plugin context (#1488967)\n- Prevent memory exhaustion on image resizing with GD on Windows (#1489937)\n- Add plugin hook for database table name lookups as requested in #1489837\n- Added Oracle database support\n- Support contacts import in GMail CSV format\n- Added namespace filter in Folder Manager\n- Added folder searching in Folder Manager\n- Fix restoring draft messages from localStorage if editor mode differs (#1490016)\n- Added config option/user preference to disable saving messages in localStorage (#1489979)\n- Added config option 'imap_log_session' to enable Roundcube <-> IMAP session ID logging\n- Added config option 'log_session_id' to control the lengh of the session identifer in logs\n- Implemented 'storage_connected' API hook after successful IMAP login (#1490025)\n- Intergrate Net_LDAP3 and rcube_ldap_generic classes\n- Add option (disabled_actions) to disable UI elements/actions (#1489638)\n- Support password encryption using openssl extension (#1489989)\n- Create/rename groups in UI dialogs (#1489951)\n- Added 'contact_search_name' option to define autocompletion entry format\n- Display quota information for current folder not INBOX only (#1487993)\n- Support images in HTML signatures (#1488676)\n- Display full quota information in popup (#1485769, #1486604)\n- Mail compose: Selecting contact inserts recipient to previously focused input - to/cc/bcc accordingly (#1489684)\n- Close \"no subject\" prompt with Enter key (#1489580)\n- Password: Add option to force new users to change their password (#1486884)\n- Improve support for screen readers and assistive technology using WCAG 2.0 and WAI ARIA standards\n- Enable basic keyboard navigation throughout the UI (#1487845)\n- Select/scroll to previously selected message when returning from message page (#1489023)\n- Display a warning if popup window was blocked (#1489618)\n- Remove (was: ...) from message subject on reply (#1489375)\n- Update to TinyMCE 4.1 (#1489057)\n- Enable autolink plugin in TinyMCE (#1488845)\n- Support image operations with Imagick extension (#1489734)\n- Support upload progress with session.upload_progress and PECL uploadprogress module (#1488702)\n- Make identity name field optional (#1489510)\n- Utility script to remove user records from the local database\n- Plugin API: Added message_saved hook (#1489752)\n- Plugin API: Added imap_search_before hook\n- Support messages import from zip archives\n- Zipdownload: Added mbox format support (#1486069)\n- Drop support for IE6, move IE7/IE8 support to legacy_browser plugin\n- Update to jQuery-2.1.1\n- Search across multiple folders (#1485234)\n- Improve UI integration of ACL settings\n- Drop support for PHP < 5.3.7\n- Set In-Reply-To and References for forwarded messages (#1489593)\n- Removed redundant default_folders config option (#1489737)\n- Implemented IMAP SPECIAL-USE extension support [RFC6154] (#1487830)\n- Optimize some framed pages content for better performance (#1489792)\n- Improve text messages display and conversion to HTML (#1488937)\n- Don't remove links when html signature is converted to text (#1489621)\n- Fix page title when using search filter (#1490023)\n- Fix mbox files import\n- Fix some character sets detection (#1490135)\n- Fix so attachment charset is set in headers of forward/draft message (#1490109)\n- Fix bug where wrong charset could be used for text attachment preview page (#1490106)\n\nRELEASE 1.0.5\n-------------\n- Fix wrong icon for download button in classic skin\n- Fix checks based on window.ActiveXObject in IE > 10\n- Fix XSS issue in style attribute handling (#1490227)\n- Fix bug where Drafts list wasn't updated on draft-save action in new window (#1490225)\n- Fix so \"set as default\" option is hidden if identities_level > 1 (#1490226)\n- Fix javascript error in \"IE 8.0/Tablet PC\" browser (#1490210)\n- Fix bug where empty fieldmap config entries caused empty results of ldap search (#1490229)\n- Fix bug where sent message was saved in Sent folder even if disabled by user (#1490208)\n\nRELEASE 1.0.4\n-------------\n- Disable TinyMCE contextmenu plugin as there are more cons than pros in using it (#1490118)\n- Fix bug where show_real_foldernames setting wasn't honored on compose page (#1490153)\n- Fix issue where Archive folder wasn't protected in Folder Manager (#1490154)\n- Fix compatibility with PHP 5.2. in rcube_imap_generic (#1490115)\n- Fix setting flags on servers with no PERMANENTFLAGS response (#1490087)\n- Fix regression in SHAA password generation in ldap driver of password plugin (#1490094)\n- Fix displaying of HTML messages with absolutely positioned elements in Larry skin (#1490103)\n- Fix font style display issue in HTML messages with styled <span> elements (#1490101)\n- Fix download of attachments that are part of TNEF message (#1490091)\n- Fix handling of uuencoded messages if messages_cache is enabled (#1490108)\n- Fix handling of base64-encoded attachments with extra spaces (#1490111)\n- Fix handling of UNKNOWN-CTE response, try do decode content client-side (#1490046)\n- Fix bug where creating subfolders in shared folders wasn't possible without ACL extension (#1490113)\n- Fix reply scrolling issue with text mode and start message below the quote (#1490114)\n- Fix possible issues in skin/skin_path config handling (#1490125)\n- Fix lack of delimiter for recipient addresses in smtp_log (#1490150)\n- Fix generation of Blowfish-based password hashes (#1490184)\n- Fix bugs where CSRF attacks were still possible on some requests [CVE-2014-9587]\n\nRELEASE 1.0.3\n-------------\n- Initialize HTML editor before restoring a message from localStorage (#1490016)\n- Add 'sig_max_lines' config option to default config file (#1490071)\n- Add config option to specify IMAP connection socket parameters - imap_conn_options (#1489948)\n- Add option to set default message list mode - default_list_mode (#1487312)\n- Enable contextmenu plugin for TinyMCE editor (#1487014)\n- Fix insert-signature command in external compose window if opened from inline compose screen (#1490074)\n- Fix some mime-type to extension mapping checks in Installer (#1489983)\n- Fix errors when using localStorage in Safari's private browsing mode (#1489996)\n- Fix bug where $Forwarded flag was being set even if server didn't support it (#1490000)\n- Fix various iCloud vCard issues, added fallback for external photos (#1489993)\n- Fix invalid Content-Type header when send_format_flowed=false (#1489992)\n- Fix errors when adding/updating contacts in active search (#1490015)\n- Fix incorrect thumbnail rotation with GD and exif orientation data (#1490029)\n- Fix contacts list update after adding/deleting/moving a contact (#1490028, #1490033)\n- Fix handling of email addresses with quoted domain part (#1490040)\n- Fix comm_path update on task switch (#1490041)\n- Fix error in MSSQL update script 2013061000.sql (#1490061)\n- Fix validation of email addresses with IDNA domains (#1490067)\n\nRELEASE 1.0.2\n-------------\n- Fix storing unsaved drafts in localStorage (#1489818)\n- Add configurable LDAP_OPT_DEREF option (#1489864)\n- Fix so when switching editor mode original version of signature is used (#1488849)\n- Fix unintentional draft autosave request if autosave is disabled (#1489882)\n- Fix malformed References: header in send/saved mail (#1489891)\n- Fix handling unicode characters in links (#1489898)\n- Fix incorrect handling of HTML comments in messages sanitization code (#1489904)\n- Fix so current page is reset on list-mode change (#1489907)\n- Fix so responses menu hides on click in classic skin (#1489915)\n- Fix unintentional line-height style modification in HTML messages (#1489917)\n- Fix broken normalize_string(), add support for ISO-8859-2 (#1489918)\n- Support csv contacts import in German localization (#1489920)\n- Fix so message list and counters are updated when a message is opened in new window (#1489919)\n- Fix malformed recipient name when composing a message by clicking on mailto link (#1489942)\n- Fix list reload after sending message in another window (#1489931)\n- Fix so address format errors are ignored when saving a draft (#1489954)\n- Fix incorrect label translation in return receipt (#1489963)\n- Fix security issue in delete-response action - allow only ajax request\n- Fix Delete button state after deleting identity/response (#1489972)\n- Fix bug where contacts with no email address were listed on compose addressbook (#1489970)\n- Fix images import from various vCard formats (#1489977)\n- Fix sorting messages by size on servers without SORT capability (#1489981)\n\nRELEASE 1.0.1\n-------------\n- Support 'error' and 'body_file' return attribs in 'message_before_send' hook (#1489595)\n- Apply user-specific replacements to group's base_dn property (#1489779)\n- Fix missing email address when importing contacts from outlook csv (#1489830)\n- Fix bug where \"With attachment\" option in search filter wasn't selected after return from mail view (#1489774)\n- Fix \"washing\" of unicoded style attributes (#1489777)\n- Fix unintentional redirect from compose page in Webkit browsers (#1489789)\n- Fix messages index cache update under some conditions (e.g. proxy) (#1489756)\n- Fix lack of translation of special folders in some configurations (#1489799)\n- Fix XSS issue in plain text spellchecker (#1489806)\n- Fix invalid page title for some folders (1489804)\n- Fix redundant alert message on over-size uploads (#1489817)\n- Fix next message display after removing a message (#1489800)\n- Fix missing Mail-Followup-To header in sent mail (#1489829)\n- Fix error when spell-checking an empty text (#1489831)\n- Avoid popupmenus being closed when scrollbar is clicked (#1489832)\n- Add proxy_whitelist configuration option (#1489729)\n- Fix identities_level=4 handling in new_user_dialog plugin (#1489840)\n- Fix various db_prefix issues (#1489839)\n- Fix too small length of users.preferences column data type on MySQL\n- Fix redundant warning when switching from html to text in empty editor (#1489819)\n- Fix invalid host validation on login (#1489841)\n- Fix IMAP connection test in installer so it is aware of imap_auth_type (#1489746)\n\nRELEASE 1.0.0\n-------------\n- Added toolbar button to move message in message view\n- Fix style of disabled protocol handler link on IE (#1489569)\n- Fix message import dialog when no file is selected (#1489685)\n- Fix opening compose screen in new window after saving as draft (#1489643)\n- Fix directories check in Installer on Windows (#1489576)\n- Fix issue when default_addressbook option is set to integer value (#1489407)\n- Fix Opera > 15 detection (#1489562)\n- Fix security issue in DomainFactory driver of Password plugin\n- Fix invalid X-Draft-Info on forwarded message draft (#1489587)\n- Fix regression in handling of 'attachments' result in message_compose hook (#1489627)\n- Fix issue where msgexport.sh printed the message to STDOUT instead of a file (#1489634)\n- Fix fatal error in database_attachments plugin under some conditions (#1489726)\n\nRELEASE 1.0-rc\n--------------\n- Small CSS fix with message notice boxes in Larry skin (#1489497)\n- Include groups in contacts search on mail compose (#1489082)\n- Add mime-type mapping for .7z files (#1489512)\n- Invoke update scripts with php to circumvent execution restrictions (#1489322)\n- Fix drag & drop message/contact moving on touch device (#1489431)\n- Fix canned responses in HTML mode (#1489536)\n- Check/create default folders on every login not only the first (#1489423)\n- Update to jQuery-1.11.0 and jQuery-UI-1.9.2\n- Support SMTP socket context options via new config option 'smtp_conn_options'\n- Fix compatibility with PHP 5.2 in html.php file (#1489514)\n- Remove expand/collapse with plus/minus keys (on numeric keypad) (#1489513)\n- Fix issue where filesystem path was added to all-attachments (zip) file (#1489507)\n- Fix case-sensitivity of email addresses handling on compose (#1485499)\n- Don't alter Message-ID of a draft when sending (#1489409)\n- Fix issue where deprecated syntax for HTML lists was not handled properly (#1488768)\n- Display different icons when Trash folder is empty or full (#1485775)\n- Remember last position of more headers switch (#1488323)\n- Fix so message flags modified by another client are applied on the list on refresh (#1485186)\n- Fix broken text/* attachments when forwarding/editing a message (#1489426)\n- Improved minified files handling, added css minification (#1486988)\n- Fix handling of X-Forwarded-For header with multiple addresses (#1489481)\n- Fix border issue on folders list in classic skin (#1489473)\n- Implemented menu actions to copy/move messages, added folder-selector widget (#1484086)\n- Fix security rules in .htaccess preventing access to base URL without the ending slash (#1489477)\n- Fix regression where only first new folder was placed in correct place on the list (#1489472)\n- Fix issue where children of selected and collapsed thread were skipped on various actions (#1489457)\n- Fix issue where groups were not deleted when \"Replace entire addressbook\" option on contacts import was used (#1489420)\n- Fix unreliable mimetype tests in Installer (#1489453)\n- Fix performance of listing writeable folders (#1489451)\n\nRELEASE 1.0-beta\n----------------\n- Fix handling of invalid closing tags in HTML messages (#1489446)\n- Set real content-type for file downloads (#1489439)\n- Update TinyMCE to version 3.5.10 (#1489442)\n- Fix keyboard navigation in list widgets (#1489392)\n- Allow plugins to grab the reference of opened windows (#1489413)\n- Larry skin: Improved status message display for better visibility (#1488974)\n- Fix Internet Explorer 11 detection (#1489434)\n- Fix date column width to fit the widest possible date format (#1489368)\n- Move certain user preference options to a collapsed \"advanced\" block (#1488829)\n- Add file type icons for Powerpoint and Open Office presentations (#1489225)\n- Fix operations on folders with trailing spaces in name (#1489419)\n- Improve identity selection based on From: header (#1489378)\n- Fix issue where mails with inline images of the same name contained only the first image multiple times (#1489406)\n- Use left/right arrow keys to collapse/expand thread and spacebar to select a row, change Ctrl key behavior (#1489392)\n- Fix an issue where using arrow keys to go up a list can result in selected message being under headers (#1489403)\n- Fix an issue where Home/End keys don't focus list row properly, don't scrollTo properly (#1489396)\n- Add an option to disable smart Reply-List behaviour - reply_all_mode (#1488734)\n- Fix an issue where pressing minus key on contacts list was hiding list records (#1489393)\n- Fix an issue where shift + arrow-up key wasn't selecting all messages in collapsed thread (#1489397)\n- Added icon for priority column in messages list header (#1489234)\n- New feature \"Canned Responses\" to save and recall boilerplate text snippets\n- Fix HTML part detection when encapsulated inside multipart/signed (#1489372)\n- Add spellchecker backend for the After the Deadline service\n- Replace markdown-style [1] link indexes in plain text email bodies\n- Improved mailto: link arguments handling (#1489363)\n- Use DOMDocument LIBXML_PARSEHUGE and LIBXML_COMPACT options if possible (#1489302)\n- Support HTTP_HOST, SERVER_NAME and SERVER_ADDR values in include_host_config feature\n- Make default font size for HTML messages configurable (request #118)\n- Fix XSS issue in addressbook group name field [CVE-2013-5646] (#1489333)\n- After message is sent refresh messages list of replied message folder (#1489249)\n- Add option force specified domain in user login - username_domain_forced (#1489264)\n- Add option to import Vcards with group assignments\n- Save groups membership in Vcard export (#1488509)\n- Workaround broken PHP function timezone_name_from_abbr (#1489261)\n- Make cached message size limit configurable - messages_cache_threshold (#1489317)\n- Log also failed logins to userlogins log\n- Add temp_dir_ttl configuration option (#1489304)\n- Allow setting INBOX as Sent folder (#1489219)\n- Fix replacement variables in user-specific base_dn in some LDAP requests (#1489279)\n- Fix image scaling issues when image has only one dimension smaller than the limit (#1489274)\n- Fix issue where uploaded photo was lost when contact form did not validate (#1489274)\n- Move identity selection based on non-standard headers into (new) identity_select plugin (#1488553)\n- Fix downloading binary files with (wrong) text/* content-type (#1489267)\n- Respect HTTP_X_FORWARDED_FOR and HTTP_X_REAL_IP variables for session IP check\n- Simplified configuration by merging it into one file + defaults (#1487311)\n- Make message list header stay on top when scrolling (#1295420)\n- Add support for 'enchant' spellcheck engine\n- Check filetype detection in installer and update script (#1489193)\n- Fix folder names truncation in Classic skin (#1489220)\n- Make possible to disable some (broken) IMAP extensions with imap_disable_caps option (#1489184)\n- Contacts drag-n-drop default action is to move contacts (#1488751)\n- Added possibility to choose to move or copy contacts from drag-n-drop menu (#1488751)\n- Fix Close link and remove About link on error pages (#1489109)\n- Improved/unified attachment preview screen, added print button\n- Fix lack of space between searchfiler and quicksearchbar in Larry skin (#1489158)\n- Cache LDAP's user_specific search and use vlv for better performance (#1489186)\n- LDAP: auto-detect and use VLV indices for all search operations\n- LDAP: additional group configuration options for  address books\n- LDAP: separated address book implementation from a generic LDAP wrapper class\n- Allow address books to browse a multi-level group hierarchy in the contacts list\n- Fix session issues when local and database time differs (#1486132)\n- Fix thread cache syncronization/validation (#1489028)\n- Added feature to import messages to the currently selected folder\n- Add option show_real_foldernames to disable localization of special folders\n- Fix database cache expunge issues (#1489149)\n- Fix date format issues on MS SQL Server (#1488918)\n- Add imap_cache_ttl option to configure TTL of imap_cache\n- Make LDAP cache engine configurable via ldap_cache and ldap_cache_ttl options\n- Fix \"duplicate entry\" errors on inserts to imap cache tables (#1489146)\n- Improved handling of Reply-To/Bcc addresses of identity in compose form (#1489016)\n- Added user preference to open all popups as standard windows\n- Implemented shared cache (rcube_cache_shared)\n- Change Reply-All button label/title when mailing list is detected (#1488938)\n- Fix SMTP connection using IPv6 address in smtp_server option (#1489024)\n- Added attachment_reminder plugin\n- Make PHP code eval() free, use create_function()\n- Add option to display email address together with a name in mail preview (#1488732)\n- Support CSV import from Atmail (#1489045)\n- Add db_prefix configuration option in place of db_table_*/db_sequence_* options\n- Make possible to use db_prefix for schema initialization in Installer (#1489067)\n- Fix updatedb.sh script so it recognizes also table prefix for external DDL files\n- Fix parsing invalid date string (#1489035)\n- Add \"with attachment\" option to messages list filter (#1485382)\n- Call resize handler in intervals to prevent lags and double onresize calls in Chrome (#1489005)\n- Add rel=\"noreferrer\" for links in displayed messages (#1484686)\n- Add ability to toggle between HTML and text while viewing a message (#1486939)\n- Remove \"HTML message\" from attachments list while viewing a message in text mode (#1486939)\n- Support IMAP MOVE extension [RFC 6851]\n- Add attachment menu with Open and Download options (#1488975)\n- Display user-friendly message on IMAP \"over quota\" errors (#1484164)\n- Extended archive plugin with user-configurable options to store messages into subfolders\n- Fix export of selected contacts from search result (#1488905)\n- Feature to export only selected contacts from addressbook (by Phil Weir)\n\nRELEASE 0.9.5\n-------------\n- Fix failing vCard import when email address field contains spaces (#1489386)\n- Fix default spell-check configuration after Google suspended their spell service\n- Fix vulnerability in handling _session argument of utils/save-prefs [CVE-2013-6172] (#1489382)\n- Fix iframe onload for upload errors handling (#1489379)\n- Fix address matching in Return-Path header on identity selection (#1489374)\n- Fix text wrapping issue with long unwrappable lines (#1489371)\n- Fixed issues where HTML comments inside style tag would hang Internet Explorer\n- Hide Delivery Status Notification option when smtp_server is unset (#1489336)\n- Display full attachment name using title attribute when name is too long to display (#1489320)\n- Fix attachment icon issue when rare font/language is used (#1489326)\n- Fix expanded thread root message styling after refreshing messages list (#1489327)\n- Fix issue where From address was removed from Cc and Bcc fields when editing a draft (#1489319)\n- Fix error_reporting directive check (#1489323)\n- Fix de_DE localization of \"About\" label in Help plugin (#1489325)\n\nRELEASE 0.9.4\n-------------\n- Make identities matching case insensitive (#1485480)\n- Fix issue where too big message data was stored in cache causing sql errors (#1489316)\n- Fix iframe scrollbars on webkit desktop browsers (#1489306)\n- Fix issue where legacy config was overriden by default config (#1489288)\n- Fix newmail_notifier issue where favicon wasn't changed back to default (#1489313)\n- Fix setting of Junk and NonJunk flags by markasjunk plugin (#1489285)\n- Fix lack of Reply-To address in header of forwarded message body (#1489298)\n- Fix bugs when invoking contact creation form when read-only addressbook is selected (#1489296)\n- Fix identity selection on reply (#1489291)\n- Fix so additional headers are added to all messages sent (#1489284)\n- Fix display issue after moving folder in Folder Manager (#1489293)\n- Fix handling of non-default date formats (#1489294)\n- Fix unquoted path in PREG expression on Windows (#1489290)\n- Fix wrong close tag in /template/mail.html (#1489295)\n\nRELEASE 0.9.3\n-------------\n- Fix setting refresh_interval to \"Never\" in Preferences (#1489286)\n- Fixed iframe scrolling on touch devices\n- Optimized message list for touch devices\n- Fix purge action in folder manager (#1489280)\n- Fix base URL resolving on attribute values with no quotes (#1489275)\n- Fix wrong handling of links with '|' character (#1489276)\n- Fix colorspace issue on image conversion using ImageMagick (#1489270)\n- Fix XSS vulnerability when editing a message \"as new\" or draft [CVE-2013-5645] (#1489251)\n- Fix XSS vulnerability when saving HTML signatures [CVE-2013-5645] (#1489251)\n- Fix rewrite rule in .htaccess (#1489240)\n- Fix detecting Turkish language in ISO-8859-9 encoding (#1489252)\n- Fix identity-selection using Return-Path headers (#1489241)\n- Fix parsing of links with ... in URL (#1489192)\n- Fix compose priority selector when opening in new window (#1489257)\n- Fix bug where signature wasn't changed on identity selection when editing a draft (#1489229)\n- Fix IMAP SETMETADATA parameters quoting (#1489231)\n- Fix \"could not load message\" error on valid empty message body (#1489228)\n- Fix handling of message/rfc822 attachments on message forward and edit (#1489214)\n- Fix parsing of square bracket characters in IMAP response strings (#1489223)\n- Don't clear References and in-Reply-To when a message is \"edited as new\" (#1489216)\n- Fix messages list sorting with THREAD=REFS\n- Remove deprecated (in PHP 5.5) PREG /e modifier usage (#1489174)\n- Fix empty messages list when register_globals is enabled (#1489157)\n- Fix so valid and set date.timezone is not required by installer checks (#1489180)\n- Canonize boolean ini_get() results (#1489189)\n- Fix so install do not fail when one of DB driver checks fails but other drivers exist (#1489178)\n- Fix so exported vCard specifies encoding in v3-compatible format (#1489183)\n\nRELEASE 0.9.2\n-------------\n- Fix image thumbnails display in print mode (#1489134)\n- Fix height of message headers block (#1489108)\n- Fix timeout issue on drag&drop uploads (#1489170)\n- Fix default sorting of threaded list when THREAD=REFS isn't supported\n- Fix list mode switch to 'List' after saving list settings in Larry skin (#1489164)\n- Fix error when there's no writeable addressbook source (#1489162)\n- Fix zipdownload plugin issue with filenames charset (#1489156)\n- Fix so non-inline images aren't skipped on forward (#1489150)\n- Fix \"null\" instead of empty string on messages list in IE10 (#1489145)\n- Fix legacy options handling\n- Fix so bounces addresses in Sender headers are skipped on Reply-All (#1489011)\n- Fix bug where serialized strings were truncated in PDO::quote() (#1489142)\n- Fix displaying messages with invalid self-closing HTML tags (#1489137)\n- Fix PHP warning when responding to a message with many Return-Path headers (#1489136)\n- Fix unintentional compose window resize (#1489114)\n- Fix performance regression in text wrapping function (#1489133)\n- Fix connection to posgtres db using unix socket (#1489132)\n- Fix handling of comma when adding contact from contacts widget (#1489107)\n- Fix bug where a message was opened in both preview pane and new window on double-click (#1489122)\n- Fix fatal error when xdebug.max_nesting_level was exceeded in rcube_washtml (#1489110)\n- Fix PHP warning in html_table::set_row_attribs() in PHP 5.4 (#1489094)\n- Fix invalid option selected in default_font selector when font is unset (#1489112)\n- Fix displaying contact with ID divisible by 100 in sql addressbook (#1489121)\n- Fix browser warnings on PDF plugin detection (#1489118)\n- Fix fatal error when parsing UUencoded messages (#1489119)\n\nRELEASE 0.9.1\n-------------\n- Better German labels for from/to to avoid conflicts with 'sender' (#1489084)\n- Fix problem where security warning was displayed for valid images with image/jpg type (#1489097)\n- Fix handling of invalid email addresses in headers (#1489092)\n- Fix IMAP connection issue with default_socket_timeout < 0 and imap_timeout < 0 (#1489090)\n- Fix various PHP code bugs found using static analysis (#1489086)\n- Fix backslash character handling on vCard import (#1489085)\n- Fix csv import from Thunderbird with French localization (#1489059)\n- Fix messages list focus issue in Opera and Webkit (#1489058)\n- Fix Reply-To header handling in Reply-All action (#1489037)\n- Fix so Sender: address is added to Cc: field on reply to all (#1489011)\n- Fix so addressbook_search_mode works also for group search (#1489079)\n- Fix removal of a contact from a group in LDAP addressbook (#1489081)\n- Inlcude SQL query in the log on SQL error (#1489064)\n- Fix handling untagged responses in IMAP FETCH - \"could not load message\" error (#1489074)\n- Fix very small window size in Chrome (#1488931)\n- Fix list page reset when viewing a message in Larry skin (#1489076)\n- Fix min_refresh_interval handling on preferences save (#1489073)\n- Fix PDF support detection for Firefox PDF.js (#1488972)\n- Fix possible collision in generated thumbnail cache key (#1489069)\n- Fix exit code on bootsrap errors in CLI mode (#1489044)\n- Fix error handling in CLI mode, use STDERR and non-empty exit code (#1489043)\n- Fix error when using check_referer=true\n- Fix incorrect handling of some specific links (#1489060)\n- Fix incorrect handling of leading spaces in text wrapping\n- Fix unintentional messages list jumps on click in Internet Explorer (#1489056)\n- Fix list of required configuration options (#1489055)\n- Fix DB error when creating a new contact and a group is selected (#1489051)\n- Fix handling of deprecated boolean value of reply_mode option (#1489052)\n\nRELEASE 0.9.0\n-------------\n- Fix display of HTML entities in protected folder name (#1489042)\n- Set minimal permissions to temp files (#1488996)\n- Improve content check for embedded images without filename (#1489029)\n- Fix handling of invalid characters in message headers and output (#1489032)\n- Fix selecting collapsed rows on select-all (#1489036)\n- Avoid race-conditions with concurrent attachment uploads (#1488422)\n- Fix possible header duplicates when using additional headers (#1489033)\n- Fix session issues with use_https=true (#1488986)\n- Fix blockquote width in sent mail (#1489031)\n- Fix keyboard events on list widgets in Internet Explorer (#1489025)\n\nRELEASE 0.9-rc2\n---------------\n- Fix security issue in save-pref command\n- Remove sig_above configuration option, use reply_mode only (#1489001)\n- Refresh current folder in opener window after draft save or message sent (#1488997)\n- Fix saving draft just after entering compose window (#1489012)\n- Fix javascript error in IE9 when loading form with placeholders into an iframe (#1489008)\n- Fix handling of some conditional comment tags in HTML message (#1489004)\n- Fix so forward as attachment works if additional attachment is added by message_compose hook (#1489000)\n- Better handling of session errors in ajax requests (#1488960)\n- Fix HTML part detection for some specific message structures (#1488992)\n- Don't show fake address - phishing prevention (#1488981)\n- Fix forward as attachment bug with editormode != 1 (#1488991)\n- Fix LIMIT/OFFSET queries handling on MS SQL Server (#1488984)\n- Fix so task name can really contain all from a-z0-9_- characters (#1488941)\n- Fix javascript errors when working in a page opened with taget=\"_blank\"\n- Mention SQLite database format change in UPGRADING file (#1488983)\n- Increase maxlength to 254 chars for email input fields in addressbook (#1488987)\n- Fix thumbnail size when GD extension is used for image resize (#1488985)\n- Display notice that message is encrypted also for application/pkcs7-mime messages (#1488526)\n\nRELEASE 0.9-rc\n--------------\n- Fix plain text spellchecker incorrect highlighting in non-ASCII text (#1488973)\n- Add workaround for invalid message charset detection by IMAP servers (#1488968)\n- Fix NUL characters in content-type of ms-tnef attachment (#1488964)\n- Fix regression in handling LDAP contact identifiers (#1488959)\n- Updated translations from Transifex\n- Fix buggy error template in a frame (#1488938)\n- Add addressbook widget on compose page in classic skin\n- Add search box to compose address book widget (#1488381)\n- Fix login in case when default_host is an array with one element (#1488928)\n- Use LDAP fallback hosts on connect + bind instead of ldap_connect() only.\n- Add config option for LDAP bind timeout (sets LDAP_OPT_NETWORK_TIMEOUT option)\n- Submit Addressbook advanced search form with Enter key (#1488568)\n- Also block remote images in HTML part view (#1488827)\n- Improved database schema upgrade procedure, added updatedb.sh script\n- Force autocommit mode in mysql database driver (#1488902)\n\nRELEASE 0.9-beta\n----------------\n- Fix searching by date in address book (#1488888)\n- Improve charset detection by prioritizing charset according to user language (#1485669)\n- Fix handling of escaped separator in vCard file (#1488896)\n- Add option to use envelope From address for MDN responses (#1488880)\n- Add possibility to search in message body only (#1488770)\n- Support \"multipart/relative\" as an alias for \"multipart/related\" type (#1488886)\n- Display PGP/MIME signature attachments as \"Digital Signature\" (#1488570)\n- Workaround UW-IMAP bug where hierarchy separator is added to the shared folder name (#1488879)\n- Fix version comparisons with -stable suffix (#1488876)\n- Add unsupported alternative parts to attachments list (#1488870)\n- Add Compose button on message view page (#1488747)\n- Display 'Sender' header in message preview\n- Plugin API: Added message_before_send hook\n- Fix contact copy/add-to-group operations on search result (#1488862)\n- Use matching identity in MDN response (#1488864)\n- Fix handling of signatures on draft edit (#1488798)\n- Fix so compacting of non-empty folder is possible also when messages list is empty (#1488858)\n- Allow forwarding of multiple emails (#1486854)\n- Fix big memory consumption of DB layer (#1488856)\n- Fix broken message/part bodies when FETCH response contains more untagged lines (#1488836)\n- Fix empty email on identities list after identity update (#1488834)\n- Add new identities_level: (4) one identity with possibility to edit only signature\n- Use Delivered-To and Envelope-To headers for identity selection (#1488840, #1488553)\n- Fix XSS vulnerability using Flash files (#1488828)\n- Always save drafts with format=flowed in order to keep original line wraps (#1488799)\n- Select default_addressbook on the list in Address Book (#1488280)\n- Fix so mobile phone has TYPE=CELL in exported vCard (#1488812)\n- Support contacts import from CSV file (#1486399)\n- Improved keep-alive action. Now the interval is based on session_lifetime (#1488507)\n- Added cross-task 'refresh' request for system state updates (#1488507)\n- Renamed config options: keep_alive to refresh_interval, min_keep_alive to min_refresh_interval\n- Fix handling of text/enriched content on message reply/forward/edit\n- Option to display attached images as thumbnails below message body\n- Upgraded to jQuery 1.8.3 and jQuery UI 1.9.1\n- Add config option to automatically generate LDAP attributes for new entries\n- Add user settings to open message view and compose form in new windows (#1485486)\n- Better client-side timezone detection using the jsTimezoneDetect library (#1488725)\n- Add option to disable saving sent mail in Sent folder - no_save_sent_messages (#1488686)\n- Fix handling dont_override with message_sort_col and message_sort_order settings (#1488760)\n- Fix handling of URLs with asterisk characters (#1488759)\n- Remove automatic to-lowercase conversion of usernames (#1488715)\n- Plugin API: Add 'email_list' argument for identities data in user_create hook\n- Integrated zipdownload plugin to download all attachments (#1445509)\n- Fix HTML special characters handling in message list/header display (#1488523)\n- List related text/html part as attachment in plain text mode (#1488677)\n- Use IMAP BINARY (RFC3516) extension to fetch message/part bodies\n- Fix folder creation under public namespace root (#1488665)\n- Fix so \"Edit as new\" on draft creates a new message (#1488687)\n- Fix invalid error message on deleting mail from read only folder (#1488694)\n- Replace data URIs of images (pasted in HTML editor) with inline attachments (#1488502)\n- Remove (too big) min-width on mail screen\n- Added template object 'frame'\n- Add option to enable HTML editor on forwarding (#1488517)\n- Add option to not include original message on reply, rename option top_posting to reply_mode (#1485149)\n- Added session_path config option and unified cookies settings in javascript\n- Added \"Undeleted\" option to messages list filter\n- Rewritten test scripts for PHPUnit\n- Add new DB abstraction layer based on PHP PDO, supporting SQLite3 (#1488332)\n- Removed PEAR::MDB2 package\n- Removed users.alias column, added option ('user_aliases')\n  to use email address from identities as username (#1488581)\n- Removed redundant cache.cache_id column (#1488528)\n- Fix order of attachments in sent mail (#1488423)\n- Fix Shift + delete button does not permanently delete messages (#1488243)\n- Add Content-Length for attachments where possible (#1485478)\n- Fix attachment sizes in message print page and attachment preview page (#1488515)\n- Add mail attachments using drag & drop on HTML5 enabled browsers\n- Add workaround for invalid BODYSTRUCTURE response - parse message with Mail_mimeDecode package (#1485585)\n- Display Tiff as Jpeg in browsers without Tiff support (#1488452)\n- Don't display Pdf/Tiff/Flash attachments inline without browser support (#1488452, #1487929)\n- Add is_escaped attribute for html_select and html_textarea (#1488485)\n- Fix issue where draft auto-save wasn't executed after some inactivity time\n- Add vCard import from multiple files at once (#1488015)\n- Roundcube Framework:\n    Add possibility to replace IMAP driver with custom class\n    Add IMAP auto-connection feature, improving performance with caching enabled\n    Replace imap_init hook with storage_init (with additional 'driver' argument)\n    Improved performance by caching IMAP server's capabilities in session\n    Unified global functions naming (rcube_ prefix)\n    Better classes separation\n    Framework files moved to lib/Roundcube\n\nRELEASE 0.8.5\n-------------\n- Fix #countcontrols issue in IE<=8 when text is very long (#1488890)\n- Fix unwanted horizontal scrollbar in message preview header (#1488866)\n- Add workaround for IE<=8 bug where Content-Disposition:inline was ignored (#1488844)\n- Fix XSS vulnerability in vbscript: and data:text links handling [CVE-2012-6121] (#1488850)\n- Fix absolute positioning in HTML messages (#1488819)\n- Fix cache (in)validation after setting \\Deleted flag\n- Fix keybord events on messages list in opera browser (#1488823)\n- Fix selection of collapsed thread rows (#1488772)\n- Fix wrapping of quoted text with format=flowed (#1488177)\n\nRELEASE 0.8.4\n-------------\n- Fix regression where unintentional page reload was done after request abort (#1488802)\n- Fix XSS vulnerability in handling of text/enriched messages (#1488806)\n- Fix handling of 'media' attribute on linked css (#1488789)\n- Fix excessive LFs at the end of composed message with top_posting=true (#1488797)\n- Fix bug where leading blanks were stripped from quoted lines (#1488795)\n\nRELEASE 0.8.3\n-------------\n- Fix AREA links handling (#1488792)\n- Fix possible HTTP DoS on error in keep-alive requests (#1488782)\n- Fix compatybility with MDB2 2.5.0b4 (#1488779)\n- Fix a bug where saving a message in INBOX wasn't possible\n- Fix HTML part detection in messages with attachments (#1488769)\n- Fix bug where wrong words were highlighted on spell-before-send check\n- Fix scrolling quirk in email preview frame using Opera 12 (#1488763)\n- Fix displaying of multipart/alternative messages with empty parts (#1488750)\n- Fix threaded list sorting on PHP < 5.2.9 (#1488748)\n- Fix Warning: htmlspecialchars(): charset `RCMAIL_CHARSET' not supported warning in Installer (#1488744)\n\nRELEASE 0.8.2\n-------------\n- Fix XSS vulnerability from HTTP User-Agent header (#1488737)\n- Force fonts in compose fields to be all the same (#1488690)\n- Fix handling vCard entries with TEL;TYPE=CELL (#1488728)\n- Fix error where session wasn't updated after folder rename/delete (#1488692)\n- Fix PLAIN authentication for some IMAP servers (#1488674)\n- Fix encoding vCard file when contains PHOTO;ENCODING=b (#1488683)\n- Fix focus issue in IE when selecting message row (#1488620)\n- Add full headers view in message preview window (#1488538)\n- Fix message display page issues - unified with message preview (#1488590, #1488642)\n- Fix displaying all headers when they contain malformed characters (#1488666)\n- Fix decoding of HTML messages with UTF-16 charset specified (#1488654)\n- Fix quota capability detection so it can be overwritten by a plugin (#1488655)\n- Fix identity selection on reply (#1488101)\n- Fix Larry's messages list filter in IE (#1488632)\n- Fix more IE issues by disabling Compat. mode with X-UA-Compatible meta tag (#1488626)\n- Fix setting locales under Solaris - use additional .UTF-8 suffix (#1488628)\n- Fix email address validation for addresses with IP address in domain part\n- Fix Larry skin issues in IE7 compat. mode (#1488618)\n- Fix so subscribed non-existing/non-accessible shared folder can be unsubscribed\n\nRELEASE 0.8.1\n-------------\n- Fix bug where domain name was converted to lower-case even with login_lc=false (#1488593)\n- Fix lower-casing email address on replies (#1488598)\n- Fix line separator in exported messages (#1488603)\n- Fix XSS issue where plain signatures wasn't secured in HTML mode [CVE-2012-4668] (#1488613)\n- Fix XSS issue where href=\"javascript:\" wasn't secured [CVE-2012-3508] (#1488613)\n- Fix impossible to create message with empty plain text part (#1488610)\n- Fix stripped apostrophes when replying in plain text to HTML message (#1488606)\n- Fix inactive Save search option after advanced search (#1488607)\n- Fix Remove from group option is active for contact search result (#1488608)\n- Disable autocapitalization in login form on iPad/iPhone (#1488609)\n- Fix focus on the list when list row is clicked (#1488600)\n- Added separate From and To columns apart from smart From/To column (#1486891)\n- Fix fallback to Larry skin when configured skin isn't available (#1488591)\n- Fix (workaround) delete operations with some versions of memcache (#1488592)\n- Fix (disable) request validation for spell and spell_html actions\n\nRELEASE 0.8.0\n-------------\n- Don't show product version on login screen (can be enabled by config)\n- Renamed old default skin to 'classic'. Larry is the new default skin.\n- Support connections to memcached socket file (#1488577)\n- Enable TinyMCE inlinepopups plugin\n- Update to TinyMCE 3.5.6\n- Correctly escape localized labels in javascript variable (#1488567)\n- Update Net_SMTP/Auth_SASL packages to fix Digest-MD5/Cram-MD5 authentication (#1488571)\n- Don't add attachments content into reply/forward/draft message body (#1488557)\n- Fix 'no connection' errors on page unloads (#1488547)\n- Plugin API: Add 'unauthenticated' hook (#1488138)\n- Show explicit error message when provided hostname is invalid (#1488550)\n- Fix wrong compose screen elements focus in IE9 (#1488541)\n- Fix fatal error when date.timezone isn't set (#1488546)\n- Update to TinyMCE 3.5.4.1\n- Better icons with distinct shapes for priority columns (#1488377)\n- Show dedicated icon for multipart/report messages (#1488524)\n- Properly hide text of icon links/buttons (#1488534)\n- Fix handling of unitless CSS size values in HTML message (#1488535)\n- Fix removing contact photo using LDAP addressbook (#1488420)\n- Fix storing X-ANNIVERSARY date in vCard format (#1488527)\n- Update to Mail_Mime-1.8.5 (#1488521)\n- Fix XSS vulnerability in message subject handling using Larry skin [CVE-2012-3507] (#1488519)\n- Fix handling of links with various URI schemes e.g. \"skype:\" (#1488106)\n- Fix handling of links inside PRE elements on html to text conversion\n- Fix indexing of links on html to text conversion\n- Decode header value in rcube_mime::get() by default (#1488511)\n- Fix errors with enabled PHP magic_quotes_sybase option (#1488506)\n- Fix SQL query for contacts listing on MS SQL Server (#1488505)\n- Fix window.resize handler on IE8 and Opera (#1488453)\n- Don't let error message popups cover the login form (#1488500)\n- Update to TinyMCE 3.5.2\n- Don't show errors when moving contacts into groups they are already in (#1488493)\n- Make folders with unread messages in subfolders bold again (#1486793)\n- Abbreviate long attachment file names with ellipsis (#1488499)\n- Fix html2text conversion of strong|b|a|th|h tags when used in upper case\n- Add listcontrols template container in Larry skin (#1488498)\n- Fix host autoselection when default_host is an array (#1488495)\n- Move messages forwarding mode setting into Preferences\n- Fix HTML entities handling in HTML editor (#1488483)\n- Fix listing shared folders on Courier IMAP (#1488466)\n\nRELEASE 0.8-rc\n--------------\n- Added new translations in Belarusian, Interlingua and Malayalam\n- Flipped compose options arrow (#1488474)\n- Fix handling of large uuencode attachments (#1488473)\n- Fix handling of \"usemap\" attribute (#1488472)\n- Fix handling of some HTML tags e.g. IMG (#1488471)\n- Use similar language as a fallback for plugin localization (#1488401)\n- Fix issue where signature wasn't re-added on draft compose (#1488322)\n- Update to TinyMCE 3.5 (#1488459)\n- Fixed multi-threaded autocompletion when number of threads > number of sources\n- Allow to configure the number of values allowed for each LDAP attribute\n- Support for serialized LDAP address values (usually delimited with a $)\n- Less restrictive session auth checks, repeat keep-alive requests on failure (#1488449)\n- Fix redirect to mail/compose on re-login (#1488226)\n- Add IE8 hack for messages list issue (#1487821)\n- Fix handling errors on draft auto-save\n- Fix importing vCard photo with ENCODING param specified (#1488432)\n- Support mutliple name/email pairs for Bcc and Reply-To identity settings (#1488445)\n- Set flexible width to login form fields (#1488418)\n- Fix re-draw bug on list columns change in IE8 (#1487822)\n- Allow mass-removal of addresses from a group (#1487748)\n- Fix removing all contacts on import to LDAP addressbook\n- Fix so \"Back\" from compose/show doesn't reset search request (#1488238)\n- Add option to delete messages instead of moving to Trash when in Junk folder (#1486686)\n- Fix invisible cursor when replying to a html message (#1487073)\n- Reset IP stored in session when destroying session data (#1488056)\n- Fix bug where memory_limit = -1 wasn't handled properly\n- Support LDAP RFC2256's country object class read/write (#1488123)\n- Upgraded to jQuery 1.7.2\n- Image resize with GD extension (#1488383)\n- Fix lack of warning when switching task in compose window (#1488399)\n- Fix bug where it wasn't possible to enter ( or & characters in autocomplete fields\n- Request all needed fields from address book backends (#1488394)\n- Unified (single) spellchecker button\n- Scroll long lists on drag&drop (#1485946)\n- Copy all skins in installto script (#1488376)\n\nRELEASE 0.8-beta\n----------------\n- Upgraded to jQuery 1.7.1 (#1488337) and jQuery UI 1.8.18\n- Add Russian to the spellchecker languages list (#1488135)\n- Remember custom skin selection after logout (#1488355)\n- Make sure About tab is always the last tab (#1488257)\n- Fix issue with folder creation under INBOX. namespace (#1488349)\n- Added mailto: protocol handler registration link in User Preferences (#1486580)\n- Handle identity details box with an iframe (#1487020)\n- Fix issue where some text from original message was missing on reply (#1488340)\n- Fix autoselect_host() for login (#1488297)\n- Changed license to GNU GPLv3+ with exceptions for skins & plugins\n- Added address book widget on compose screen\n- Use proper timezones from PHP's internal timezonedb (#1485592)\n- Add separate pagesize setting for mail messages and contacts (#1488269)\n- Deprecate $DB, $USER, $IMAP global variables, Use $RCMAIL instead\n- Add option to set default font for HTML message (#1484137)\n- Fix issues with big memory allocation of IMAP results\n- Prevent from memory_limit exceeding when trying to parse big messages bodies (#1487424)\n- Add possibility to add SASL mechanisms for SMTP in smtp_connect hook (#1487937)\n- Mark (with different color) folders with recent messages (#1486234)\n- Added About tab in Settings\n- TinyMCE updated to 3.4.6\n\nRELEASE 0.7.2\n-------------\n- Fix encoding of attachment with comma in name (#1488389)\n- Fix handling of % character in IMAP protocol (#1488382)\n- Fix duplicate names handling in addressbook searches (#1488375)\n- Fix displaying of HTML messages from Disqus (#1488372)\n- Disable E_STRICT warnings on PHP 5.4\n- Prevent from folder selection on virtual folder collapsing (#1488346)\n- Fix automatic unsubscribe of non-existent folders\n- Fix double-quotes handling in recipient names\n- User configurable setting how to display contact names in list\n- Make contacts list sorting configurable for the admin/user\n- Fix parse errors in DDL files for MS SQL Server\n- Revert SORT=DISPLAY support, removed by mistake (#1488327)\n- Add lost translation label in de_DE (#1488315)\n- Fix drafts update issues when edited from preview pane (#1488314)\n- Fix wrong variable name in rcube_ldap.php (#1488302)\n- Make mime type detection based on filename extension to be case-insensitive\n- Fix failure on MySQL database upgrade from 0.7 - text column can't have default value (#1488300)\n\n\nRELEASE 0.7.1\n-------------\n- Fix bug in handling of base href and inline content (#1488290)\n- Fix SQL Error when saving a contact with many email addresses (#1488286)\n- Fix strict email address searching if contact has more than one address\n- Remove duplicated 'organization' label (#1488287)\n- Fix so editor selector is hidden when 'htmleditor' is listed in 'dont_override'\n- Fix wrong (long) label usage (#1488283)\n- Fix handling of INBOX's subfolders in special folders config (#1488279)\n- Add ifModule statement for setting Options -Indexes in .htaccess file (#1488274)\n- Fix crashes with eAccelerator (#1488256)\n- Fix searching on IMAP servers without CHARSET specifier support (#1488271)\n- Fix expanding folders during drag&drop (#1488260)\n- Fix wrong postgres sequence name in upgrade from 0.6\n- Fix broken CREATE INDEX queries in SQLite DDL files (#1488255)\n\nRELEASE 0.7\n-----------\n- Make Roundcube render the Email Standards Project Acid Test correctly\n- Replace prompt() with jQuery UI dialog (#1485135)\n- Fix navigation in messages search results\n- Improved handling of some malformed values encoded with quoted-printable (#1488232)\n- Add possibility to do LDAP bind before searching for bind DN\n- Fix handling of empty <U> tags in HTML messages (#1488225)\n- Add content filter for embedded attachments to protect from XSS on IE [CVE-2012-1253] (#1487895)\n- Use strpos() instead of strstr() when possible (#1488211)\n- Fix handling HTML entities when converting HTML to text (#1488212)\n- Fix fit_string_to_size() renders browser and ui unresponsive (#1488207)\n- Fix handling of invalid characters in request (#1488124)\n- Fix merging some configuration options in update.sh script (#1485864)\n- Fix so TEXT key will remove all HEADER keys in IMAP SEARCH (#1488208)\n- Fix handling contact photo url with https:// prefix (#1488202)\n- Fix possible infinite redirect on attachment preview (#1488199)\n- Improved clickjacking protection for browsers which don't support X-Frame-Options headers\n- Fixed bug where similar folder names were highlighted wrong (#1487860)\n- Fixed bug in handling link with '!' character in it (#1488195)\n- Fixed bug where session ID's length was limited to 40 characters (#1488196)\n- TinyMCE security issue: removed moxieplayer (embedding flv and mp4 is not supported anymore)\n\nRELEASE 0.7-beta\n----------------\n- Fix handling of HTML form elements in messages (#1485137)\n- Fix regression in setting recipient to self when replying to a Sent message (#1487074)\n- Fix listing of folders in hidden namespaces (#1486796)\n- Don't consider \\Noselect flag when building folders tree (#1488004)\n- Fix sorting autocomplete results (#1488084)\n- Add option to set session name (#1486433)\n- Add option to skip alternative email addresses in autocompletion\n- Fix inconsistent behaviour of Compose button in Drafts folder, add Edit button for drafts\n- Fix problem with parsing HTML message body with non-unicode characters (#1487813)\n- Add option to define matching method for addressbook search (#1486564, #1487907)\n- Make email recipients separator configurable\n- Fix so folders with \\Noinferiors attribute aren't listed in parent selector\n- Fix handling of curly brackets in URLs (#1488168)\n- Fix handling of dates (birthday/anniversary) in contact data (#1488147)\n- Fix error on opening searched LDAP contact (#1488144)\n- Fix redundant line break in flowed format (#1488146)\n- Fix IDN address validation issue (#1488137)\n- Fix JS error when dst_active checkbox doesn't exist (#1488133)\n- Autocomplete LDAP records when adding contacts from mail (#1488073)\n- Plugin API: added 'ready' hook (#1488063)\n- Ignore DSN request when it isn't supported by SMTP server (#1487800)\n- Make sure LDAP name fields aren't arrays (#1488108)\n- Fixed imap test to non-default port when using ssl (#1488118)\n- Force all files to be overwritten when updating (#1488117)\n- Fix issue where it wasn't possible to change list view mode in folder manager for INBOX (#1488107)\n- Fix namespace handling in special folders settings (#1488112)\n- Disable time limit for CLI scripts (#1488109)\n- Fix misleading display when chaning editor type (#1488104)\n- Add loading indicator on contact delete\n- Fix bug where after delete message rows can be added to the list of another folder (#1487752)\n- Add notice on autocompletion that not all records were displayed\n- Add option 'searchonly' for LDAP address books\n- Add Priority filter to the messages list\n- Cache synchronization using QRESYNC/CONDSTORE\n- Trigger 'new_messages' hook for all checked folders (#1488083)\n- Make date/time format user configurable; drop 'date_today' config option\n- Fix setting title for truncated subject in IE (#1487128)\n- Fix displaying multipart/alternative messages with only one part (#1487938)\n- Rewritten messages caching:\n  Indexes are stored in a separate table, so there's no need to store all messages in a folder\n  Added threads data caching\n  Flags are stored separately, so flag change doesn't cause DELETE+INSERT, just UPDATE\n- Improved FETCH response handling\n- Improvements in response tokenization method\n- Use 'From' and 'To' labels instead of 'Sender' and 'Recipient'\n- Fix username case-insensitivity issue in MySQL (#1488021)\n- Addressbook Saved Searches\n- Added spellchecker exceptions dictionary (shared or per-user)\n- Added possibility to ignore words containing caps, numbers, symbols (spellcheck_ignore_* options)\n- Added 'priority' column on messages list (#1486782)\n- Localize forwarded message header (#1488058)\n\nRELEASE 0.6\n-----------\n- Fix bug where the last identity is used on reply (#1488101)\n- Fix locked folder rename option on servers supporting RFC2086 only (#1488089)\n- Fix session race conditions when composing new messages\n- Fix encoding of LDAP contacts identifiers (#1488079)\n- jQuery 1.6.4\n- Fix handling of binary attachments encoded with quoted-printable (#1488065)\n- Fix text-overflow:ellipsis issues on messages list in FF7 and Webkit (#1488061)\n- Fix handling of links with IP address\n- Fix compacting folder resets message list filter (#1488076)\n\nRELEASE 0.6-rc\n----------------\n- Send X-Frame-Options headers to protect from clickjacking (#1487037)\n- Fallback to mail_domain in LDAP variable replacements; added 'host' to 'user_create' hook arguments (#1488024)\n- Fixed wrong vCard type parameter mobile (#1488067)\n- Fixed vCard WORKFAX issue (#1488046)\n- Add vCard's Profile URL support (#1488062)\n- jQuery 1.6.3\n- Fix imap_cache setting to values other than 'db' (#1488060)\n- Fix handling of attachments inside message/rfc822 parts (#1488026)\n- Make list of mimetypes that open in preview window configurable (#1487625)\n- Added plugin hook 'message_part_get' for attachment downloads\n- Added unique connection identifier to IMAP debug messages\n- Fix image type check for contact photo uploads\n\nRELEASE 0.6-beta\n----------------\n- Fixed selecting identity on reply/forward (#1487981)\n- Add option to hide selected LDAP addressbook on the list\n- Add client-side checking of uploaded files size\n- Add newlines between organization, department, jobtitle (#1488028)\n- Recalculate date when replying to a message and localize the cite header (#1487675)\n- Fix handling of email addresses with quoted local part (#1487939)\n- Fix EOL character in vCard exports (#1487873)\n- Added optional \"multithreading\" autocomplete feature\n- Plugin API: Added 'config_get' hook\n- Fixed new_user_identity plugin to work with updated rcube_ldap class (#1487994)\n- Plugin API: added folder_delete and folder_rename hooks\n- Added possibility to undo last contact delete operation\n- Fix sorting of contact groups after group create (#1487747)\n- Add optional textual upload progress indicator (#1486039)\n- Fix parsing URLs containing commas (#1487970)\n- Added vertical splitter for books/groups list in addressbook (#1487923)\n- Improved namespace roots handling in folder manager\n- Added searching in all addressbook sources\n- Added addressbook source selection in contacts import\n- Implement LDAPv3 Virtual List View (VLV) for paged results listing\n- Use 'address_template' config option when adding a new address block (#1487944)\n- Added addressbook advanced search\n- Add popup with basic fields selection for addressbook search\n- Case-insensitive matching in autocompletion (#1487933)\n- Added option to force spellchecking before sending a message (#1485458)\n- Fix handling of \"<\" character in contact data, search fields and folder names (#1487864)\n- Fix saving \"<\" character in identity name and organization fields (#1487864)\n- Added option to specify to which address book add new contacts\n- Added plugin hook for keep-alive requests\n- Store user preferences in session when write-master is not available and session is stored in memcache, write them later\n- Improve performence of folder manager operations\n- Fix default_port option handling in Installer when config.inc.php file exists (#1487925)\n- Removed option focus_on_new_message, added newmail_notifier plugin\n- Added general rcube_cache class with Memcache and APC support\n- Improved caching performance by skipping writes of unchanged data\n- Option enable_caching replaced by imap_cache and messages_cache options\n- Fix WORKFAX saving in address book (#1487910)\n- Add forward-as-attachment feature\n- jQuery-1.6.2 (#1487913, #1487144)\n- Improve display name composition when saving contacts (#1487143)\n- Fix problems with subfolders of INBOX folder on some IMAP servers (#1487725)\n- Fix handling of folders that doesn't belong to any namespace (#1487637)\n- Enable multiselection for attachments uploading in capable browsers (#1485969)\n- Add possibility to change HTML editor configuration by skin\n- Fix a bug where selecting too many contacts would produce too large URI request (#1487892)\n- Improve performance by including files with absolute path (#1487849)\n- Move folder name truncation to client/skin (#1485412)\n- Added plugin hook for request token creation\n- Replace LDAP vars in group queries (#1487837)\n- Fix vcard folding with uncode characters (#1487868)\n- Keep all submitted data if contact form validation fails (#1487865)\n- Handle uncode strings in rcube_addressbook::normalize_string() (#1487866)\n- Fix handling of debug_level=4 in ajax requests (#1487831)\n- Enable TinyMCE's contextmenu (#1487014)\n- Allow multiple concurrent compose sessions\n- New config option for custom logo\n- Allow skins to define/override texts with <roundcube:label />\n- Add simple ACL rights/namespace handling in folder manager\n- Force IE to send referers (#1487806)\n- Better display of vcard import results (#1485457)\n- Improved vcard import\n- Interactive update script with improved DB schema check\n- Fix problem with contactgroupmembers table creation on MySQL 4.x, add index on contact_id column\n- Add LDAP SASL bind and proxy authentication (#1486692)\n- Replying to a sent message puts the old recipient as the new recipient (#1487074)\n- Fulltext search over (almost) all data for contacts\n- Extend address book with rich contact information\n\nRELEASE 0.5.4\n-------------\n- Fix XSS vulnerability in UI messages [CVE-2011-2937] (#1488030)\n\nRELEASE 0.5.3\n-------------\n- Fix identities \"reply-to\" and \"bcc\" fields have a bogus value when left empty (#1487943)\n- Fix issue which cases IMAP disconnection when encrypt() method was used (#1487900)\n- Fix some CSS issues in Settings for Internet Explorer \n- Fixed handling of folder with name \"0\" in folder selector\n- Fix bug where messages were deleted instead moved to trash folder after Shift key was used (#1487902)\n- Fix relative URLs handling according to a <base> in HTML (#1487889)\n- Fix handling of top-level domains with more than 5 chars or unicode chars (#1487883)\n- Fix usage of non-standard HTTP error codes (#1487797)\n- Fix PHP warning on mistaken in_array() usage (#1487901)\n\nRELEASE 0.5.2\n-------------\n- TinyMCE 3.4.2 now compatible with IE9\n- PEAR::Net_SMTP 1.5.2, fixed timeout issue (#1487843)\n- Fix bug where template name without plugin prefix was used in render_page hook\n- Support 'abort' and 'result' response in 'preferences_save' hook, add error handling\n- Fix bug where some content would cause hang on html2text conversion (#1487863)\n- Improve space-stuffing handling in format=flowed messages (#1487861)\n- Fix bug where some dates would produce SQL error in MySQL (#1487856)\n- Added workaround for some IMAP server with broken STATUS response (#1487859)\n- Fix bug where default_charset was not used for text messages (#1487836)\n- Stateless request tokens. No keep-alive necessary on login page (#1487829)\n- Force names of unique constraints in PostgreSQL DDL\n- Add code for prevention from IMAP connection hangs when server closes socket unexpectedly\n- Remove redundant DELETE query (for old session deletion) on login\n- Get around unreliable rand() and mt_rand() in session ID generation (#1486281)\n- Fix some emails are not shown using Cyrus IMAP (#1487820)\n- Fix handling of mime-encoded words with non-integral number of octets in a word (#1487801)\n- Fix parsing links with non-printable characters inside (#1487805)\n- Fixed de_CH Localization bugs (#1487773)\n- Add variable for 'Today' label in date_today option (#1486120)\n- Fix dont_override setting does not override existing user preferences (#1487664)\n- Use only one from IMAP authentication methods to prevent login delays (1487784)\n- Support strftime format in date_today option\n- Fix SQL query in rcube_user::query() so it uses index on MySQL again\n- Removed redundant </form> tags from contact add/edit pages\n- Fix CSS error in contact details screen on IE7 (#1487775)\n\nRELEASE 0.5.1\n-------------\n- Fix handling of attachments with invalid content type (#1487767)\n- Add workaround for DBMail's bug http://www.dbmail.org/mantis/view.php?id=881 (#1487766)\n- Use IMAP's ID extension (RFC2971) to print more info into debug log\n- Security: add optional referer check to prevent CSRF in GET requests\n- Fix email_dns_check setting not used for identities/contacts (#1487740)\n- Fix ICANN example addresses doesn't validate (#1487742)\n- Security: protect login form submission from CSRF [CVE-2011-1491]\n- Security: prevent from relaying malicious requests through modcss.inc [CVE-2011-1492]\n- Fix handling of non-image attachments in multipart/related messages (#1487750)\n- Fix IDNA support when IDN/INTL modules are in use (#1487742)\n- Fix handling of invalid HTML comments in messages (#1487759)\n- Fix parsing FETCH response for very long headers (#1487753)\n- Fix add/remove columns in message list when message_sort_order isn't set (#1487751)\n- Check mime headers before attempt to parse them (#1487745)\n- Quote header values in show_additional_headers plugin (#1487744)\n- Fix settings UI on IE 6 (#1487724)\n- Remove double borders in folder listing (#1487713)\n- Separate full message headers UI element from headers table (#1487715)\n- Add part MIME ID to message_part_* hooks (#1487718) \n- Improve parsing of MS Outlook vCards (#1487716)\n- Updated PEAR::Net_Socket to 1.0.10\n- Updated PEAR::Net_IDNA2 to 0.1.1\n- Fix handling of comments inside an email address spec. (#1487673)\n- Show full mail subject as title when hovering a cut subject link (#1487128)\n- Fix randomly disappearing folders list in IE (#1487704)\n- Fix list column add/removal in IE (#1487703)\n- Fix login redirect issues (#1487686)\n- Require PHP 5.2.1 or greater\n- Fix %h/%z variables in username_domain option (#1487701)\n- Workaround for setting charset in case of malformed bodystructure response (#1487700)\n- Fix impossible to subscribe to protected folders (#1487656)\n- Fix setting timezone in Preferences (#1487705)\n\nRELEASE 0.5\n-----------\n- Fix double-login/session issue (#1487104)\n- Wrap HTML parts with <html><body> and add Doctype declaration (#1487098)\n- Make rcube_autoload silently skip unknown classes (#1487109)\n- Fix charset detection in vcards with encoded values (#1485542)\n- Better CSS cursors for splitters (#1486874)\n- Show the same message only once (#1487641)\n- Fix namespaces handling (#1487649)\n- Add handling of multifolder METADATA/ANNOTATION responses\n- Fix handling of INBOX when personal namespace prefix is non-empty (#1487657)\n- Fix handling square brackets in links (#1487672)\n- Add description of 'use_https' option in main.inc.php.dist file\n\nRELEASE 0.5-RC\n--------------\n- Plugin API: Add 'pass' argument in 'authenticate' hook (#1487134)\n- Fix attachments of type message/rfc822 are not listed on attachments list\n- Add 'login_lc' config option for case-insensitive authentication (#1487113)\n- Fix window is blur'ed in IE when selecting a message (#1487316)\n- Fix cursor position on compose form in Webkit browsers (#1486674)\n- Fix setting charset of attachment filenames (#1487122)\n- Allow setting autocomplete attribute for all inputs separately (#1487313)\n- New Folder Manager UI\n- Fix invalid Request when creating a folder (#1487443)\n- Add folder size and quota indicator in folder manager (#1485780)\n- Add possibility to move a subfolder into root folder (#1486791)\n- Fix copying all messages in a folder copies only messages from current page\n- Improve performance of moving or copying of all messages in a folder\n- Fix plaintext versions of HTML messages don't contain placeholders for emotions (#1485206)\n- Improve performance of folder rename and delete actions\n- Better support for READ-ONLY and NOPERM responses handling (#1487083)\n- Add confirmation message on purge/expunge command response\n- Fix handling of untagged responses for AUTHENTICATE command (#1487450)\n- Add username and IP address to log message on unsuccessful login (#1487626)\n- Improved Mail-Followup-To and Mail-Reply-To headers handling\n- Fix charset conversion for text attachments without charset specification (#1487634)\n\nRELEASE 0.5-BETA\n----------------\n- Make session data storage more robust against garbage session data (#1487136)\n- Config option for autocomplete on login screen\n- Allow plugin templates to include local files (#1487133)\n- List groups in address detail view and allow to subscribe/unsubscribe from there (#1486753)\n- Messages caching: performance improvements, fixed syncing, fixes related with #1486748\n- Add link to identities in compose window (#1486729)\n- Add Internationalized Domain Name (IDNA) support (#1483894)\n- Add option to automatically send read notifications for known senders (#1485883)\n- Add option to \"Return receipt\" will be always checked (#1486352)\n- Fix HTML to plain text conversion doesn't handle citation blocks (#1486921)\n- Use custom sorting when SORT is disabled by IMAP admin (#1486959)\n- Allow setting some washtml options from plugin (#1486578)\n- Add option do bind for an individual LDAP address book (#1486997)\n- Change reply prefix to display email address only if sender name doesn't exist (#1486550)\n- Plugin API: improved 'abort' flag handling, added 'result' item in some hooks (#1486914)\n- Fix mailto optional params in plain text messages aren't handled (#1487026)\n- Add Reply-to-List feature (#1484252)\n- Add Mail-Followup-To/Mail-Reply-To support (#1485547)\n- Fix confirmation message isn't displayed after sending mail on Chrome (#1486177)\n- Fix keyboard doesn't work with autocomplete list with Chrome (#1487029)\n- Improve tabs to fixed width and add tabs in identities info (#1486974)\n- Add unique index on users.username+users.mail_host\n- Make htmleditor option more consistent and add option to use HTML on reply to HTML message (#1485840)\n- Use empty envelope sender address for message disposition notifications (RFC 2298.3)\n- Support SMTP Delivery Status Notifications - RFC 3461 (#1486142)\n- Use css sprite image for messages list\n- Add (different) attachment icon for messages of type multipart/report (#1486165)\n- Prevent from inserting empty link when composing HTML message (#1486944)\n- Add caching support in id2uid and uid2id functions (#1487019)\n- Add SASL proxy authentication for SMTP (#1486693)\n- Improve displaying of UI messages (#1486977)\n- Fix double e-mail filed in identity form (#1487054)\n- Display IMAP errors for LIST/THREAD/SEARCH commands (#1486905)\n- Add LITERAL+ (IMAP4 non-synchronizing literals) support (RFC 2088)\n- Add separate column for message status icon (#1486665)\n- Add ACL extension support into IMAP classes (RFC 4314)\n- Add ANNOTATEMORE extension support into IMAP classes (draft-daboo-imap-annotatemore)\n- Add METADATA extension support into IMAP classes (RFC 5464)\n- Fix decoding of e-mail address strings in message headers (#1487068)\n- Fix handling of attachments when Content-Disposition is not inline nor attachment (#1487051)\n- Improve performance of unseen messages counting (#1487058)\n- Improve performance of messages counting using ESEARCH extension (RFC4731)\n- Add LIST-STATUS support in rcube_imap_generic class (RFC 5819)\n- Add SASL-IR support in IMAP (RFC 4959)\n- Add LOGINDISABLED support (RFC 2595)\n- Add support for AUTH=PLAIN in IMAP authentication\n- Re-implemented SMTP proxy authentication support\n- Add support for IMAP proxy authentication (#1486690)\n- Add support for AUTH=DIGEST-MD5 in IMAP (RFC 2831)\n- Fix parent folder with unread subfolder not bold when message is open (#1487078)\n- Add basic IMAP LIST's \\Noselect option support\n- Add support for selection options from LIST-EXTENDED extension (RFC 5258)\n- Don't list subscribed but non-existent folders (#1486225)\n- Fix handling of URLs with tilde (~) or semicolon (;) character (#1487087, #1487088)\n- Plugin API: added 'contact_form' hook\n- Add SORT=DISPLAY support (RFC 5957)\n- Plugin API: add possibility to disable plugin in AJAX mode, 'noajax' property\n- Plugin API: add possibility to disable plugin in framed mode, 'noframe' property\n- Improve performance of setting IMAP flags using .SILENT suffix\n- Improve performance of message cache status checking with skip_disabled=true\n- Support contact's email addresses up to 255 characters long (#1487095)\n- Add option to place replies in the folder of the message being replied to (#1485945)\n- Add missing confirmation/error messages on contact/group/message actions (#1486845)\n- Add 'loading' message on message move/copy/delete/mark actions\n- Improve responsiveness of messages displaying (#1486986)\n- Add option for minimum length of autocomplete's string (#1486428)\n- Fix operations on messages in unsubscribed folder (#1487107)\n- Add support for shared folders (#1403507)\n- Fix handling of folders with name \"0\" (#1487119)\n- Fix handling of folders with \"<>\" characters in name\n- jQuery 1.4.4\n- Fix handling of HTML entity strings in plain text messages\n- Fix focused elements aren't unfocused when clicking on the list (#1487123)\n- Fix error in MSSQL DDL scripts (#1487112)\n- Lock submit button in onsubmit event on login page (#1487036)\n- Don't set attachment's charset in Content-type header (#1487122)\n- Fix handling of message bodies (quoted-printable encoded) with NULL characters (#1486189)\n- Add workaround for MSOE's multipart/related messages with non-related attachments\n\nRELEASE 0.4.2\n-------------\n- Fix handling of backslash as IMAP delimiter\n- Fix charset replacement in HTML message bodies (#1487021)\n- Fix: contact group input is empty when using rename action more than once on the same group record\n- Fix \"Server Error! (Not Found)\" when using utils/save-pref action (#1487023)\n- Fix handling of Thunderbird's vCards (#1487024)\n\nRELEASE 0.4.1\n-------------\n- Fix space-stuffing in format=flowed messages (#1487018)\n- Fix msgexport.sh now using the new imap wrapper\n- Avoid displaying password on shell (#1486947)\n- Only lower-case user name if first login attempt failed (#1486393)\n- Make alias setting in squirrelmail_usercopy plugin configurable (patch by pommi, #1487007)\n- Prevent from saving a non-existing skin path in user prefs (#1486936)\n- Improve handling of single-part messages with bogus BODYSTRUCTURE (#1486898)\n- Fix path to SQL files when using pgsql/mysqli/sqlsrv drivers (#1486902)\n- Fix upgrade script for SQLite (#1486903)\n- Fixes in SQL init script + added update script for MSSQL database\n- Remove redundant date in syslog messages (#1486945)\n- Fix contacts list page controls when a group is selected (#1486946)\n- Fix SMTP test in Installer (#1486952)\n- Fix \"Select all\" causes message to be opened in folder with exactly one message (#1486913)\n- Fix Tab key doesn't work in HTML editor in Google Chrome (#1486925)\n- Fix TinyMCE uses zh_CN when zh_TW locale is set (#1486929)\n- Fix TinyMCE buttons are hidden in Opera (#1486922)\n- Fix JS error on IE when trying to send HTML message with enabled spellchecker (#1486940)\n- Display inline images with known extensions and non-image content-type (#1486934)\n- Fix \"Threaded\" checkbox after subfolder creation (#1486928)\n- Fix timezone string in sent mail (#1486961)\n- Show disabled checkboxes for protected folders instead of dots (#1485498)\n- Added fieldsets in Identity form, added 'identity_form' hook\n- Re-added 'Close' button in upload form (#1486930, #1486823)\n- Fix handling of charsets with LATIN-* label\n- Fix messages background image handling in some cases (#1486990)\n- Fix format=flowed handling (#1486989)\n- Fix when IMAP connection fails in 'get' action session shouldn't be destroyed (#1486995)\n- Fix list_cols is not updated after column dragging (#1486999)\n- Support %z variable in host configuration options (#1487003)\n\nRELEASE 0.4\n-----------\n- Fix disapearing upload form disapears when user selects a file on Safari (#1486823)\n- Don't replace error messages with loading info (#1486300)\n- Fix JS errors on compose mode switch (#1486870)\n- Fix message structure parsing when it lacks optional fields (#1486881)\n- Include all recipients in sendmail log\n- Support HTTP_X_FORWARDED_PROTO header for HTTPS detecting (#1486866)\n- Fix default IMAP port configuration (#1486864)\n- Create Sent folder when starting to compose a new message (#1486802)\n- Fix handling of messages with Content-Type: application/* and no filename (#1484050)\n- Improved compose screen: resizable body and attachments list, vertical splitter, options menu\n- Fix RC forgets search results (#1483883)\n- TinyMCE 3.3.7\n- Improve parsing of styled empty tags in HTML messages (#1486812)\n- Add %dc variable support in base_dn/bind_dn config (#1486779)\n- Add button to hide/unhide the preview pane (#1484215)\n- Fix no-cache headers on https to prevent content caching by proxies (#1486798)\n- Fix attachment filenames broken with TNEF decoder using long filenames (#1486795)\n- Use user's timezone in Date header, not server's timezone (#1486119)\n- Add option to set separate footer for HTML messages (#1486660)\n- Add real SMTP error description to displayed error messages (#1485927)\n- Fix some IMAP errors handling when opening the message (#1485443)\n- Fix related parts aren't displayed when got mimetype other than image/* (#1486432)\n- Multiple identity and database support for squirrelmail_usercopy plugin (#1486517)\n- Support dynamic hostname (%d/%n) variables in configuration options (#1485438)\n- Add 'messages_list' hook (#1486266)\n- Add request* event triggers in http_post/http_request (#1486054)\n- Fix use RFC-compliant line-delimiter when saving messages on IMAP (#1486712)\n- Add 'imap_timeout' option (#1486760)\n- Fix forwarding of messages with winmail attachments\n- Fix handling of uuencoded attachments in message body (#1485839)\n- Added list_mailboxes hook in rcube_imap::list_unsubscribed() (#1486668)\n- Fix wrong message on file upload error (#1486725)\n- Add support for data URI scheme [RFC2397] (#1486740)\n- Added 'actionbefore', 'actionafter', 'responsebefore', 'responseafter' events\n- Fix double-addition of e-mail domain to content ID in HTML images\n- Read and send messages with format=flowed (#1484370), fixes word wrapping issues (#1486543)\n- Fix duplicated attachments when forwarding a message (#1486487)\n- Fix message/rfc822 attachments containing only attachments are not parsed properly (#1486743)\n- Fix %00 character in winmail.dat attachments names (#1486738)\n- Fix handling errors of folder deletion (#1486705)\n- Parse untagged CAPABILITY response for LOGIN command (#1486742)\n- Renamed all php-cli scripts to use .sh extension\n- Some files from /bin + spellchecking actions moved to the new 'utils' task\n- Added thread tree icons\n- Extend contact groups support (#1486682)\n- Fix check-recent action issues and performance (#1486526)\n- Fix messages order after checking for recent (#1484664)\n- Fix autocomplete shows entries without email (#1486452)\n- Fix listupdate event doesn't trigger on search response (#1486708)\n- Fix select_all_mode value after selecting a message (#1486720)\n- Set focus to editor on reply in HTML mode (#1486632)\n- Fix composing in HTML jumps cursor to body instead of recipients (#1486674)\n- Allow columns order change per user - drag&drop (#1485795)\n- Add References header in read receipt (#1486681)\n- Fix database constraint violation when opening a message (#1486696)\n- Add 'loading' message while login is in progress (#1486667)\n- Fix quota_zero_as_unlimited (#1486662)\n- Fix folder subscription checking (#1486684)\n- Fix INBOX appears (sometimes) twice in mailbox list (#1486672)\n- Fix listing of attachments of some types e.g. \"x-epoc/x-sisx-app\" (#1486653)\n- Fix DB Schema checking when some db_table_* options are not set (#1486654)\n\nRELEASE 0.4-beta\n----------------\n- Add sizelimit and timelimit variables in LDAP config (#1486544)\n- Hide IMAP host dropdown when single host is defined (#1486326)\n- Add images pre-loading on login page (#1451160)\n- Add HTTP_X_REAL_IP and HTTP_X_FORWARDED_FOR to successful logins log (#1486441)\n- Fix setting spellcheck languages with extended codes (#1486605)\n- Fix messages list scrolling in FF3.6 (#1486472)\n- Fix quicksearch input focus (#1486637)\n- Always set changed date when flagging a DB record as deleted + provide a cleanup script\n- Fix address book/group selection (#1486619)\n- Assign newly created contacts to the active group (#1486626)\n- Added option not to mark messages as read when viewed in preview pane (#1485012)\n- Allow plugins modify the Sent folder when composing (#1486548)\n- Added optional (max_recipients) support to restrict total number of recipients per message (#1484542)\n- Re-organize editor buttons, add blockquote and search buttons\n- Make possible to write inside or after a quoted html message (#1485476)\n- Fix bugs on unexpected IMAP connection close (#1486190, #1486270)\n- Iloha's imap.inc rewritten into rcube_imap_generic class\n- Added contact groups in address book (not finished yet)\n- Added PageUp/PageDown/Home/End keys support on lists (#1486430)\n- Added possibility to select all messages in a folder (#1484756)\n- Added 'imap_force_caps' option for after-login CAPABILITY checking (#1485750)\n- Password: Support dovecotpw encryption\n- TinyMCE 3.3.1\n- Implemented messages copying using drag&drop + SHIFT (#1484086)\n- Improved performance of folders operations (#1486525)\n- Fix blocked.gif attachment is not attached to the message (#1486516)\n- Managesieve: import from Horde-INGO\n- Managesieve: support for more than one match (#1486078)\n- Managesieve: support for selectively disabling rules within a single sieve script (#1485882)\n- Threaded message listing now available\n- Added sorting by ARRIVAL and CC\n- Message list columns configurable by the user\n- Removed 'index_sort' option, now we're using empty 'message_sort_col' for this\n- virtuser_query: support other identity data (#1486148)\n- Options virtuser_* replaced with virtuser_* plugins\n- Plugin API: Implemented 'email2user' and 'user2email' hooks\n- Fix forwarding message omits CC header (#1486305)\n- Add 'default_charset' option to user preferences (#1485451)\n- Add 'delete_always' option to user preferences\n- Support/Require tls:// prefix in 'smtp_server' option for TLS connections\n- Fix inconsistent behaviour of 'delete_always' option (#1486299)\n- Fix deleting all messages from last list page (#1486293)\n- Flag original messages when sending a draft (#1486203)\n- Changed signature separator when top-posting (#1486330)\n- Let the admin define defaults for search modifiers (#1485897)\n- Fix long e-mail addresses validation (#1486453)\n- Remember search modifiers in user prefs (#1486146)\n- Added force_7bit option to force MIME encoding of plain/text messages (#1486510)\n- Use case sensitive check when checking for default folders (#1486346)\n- Fix checking for new mail: now checks unseen count of inbox (#1485794)\n- Improve performance by avoiding unnecessary updates to the session table (#1486325)\n- Fix invalid <font> tags which cause HTML message rendering problems (#1486521)\n- Fix CVE-2010-0464: Disable DNS prefetching (#1486449)\n- Fix Received headers to behave better with SpamAssassin (#1486513)\n- Password: Make passwords encoding consistent with core, add 'password_charset' global option (#1486473)\n- Fix adding contacts SQL error on mysql (#1486459)\n- Squirrelmail_usercopy: support reply-to field (#1486506)\n- Fix IE spellcheck suggestion popup issue (#1486471)\n- Fix email address auto-completion shows regexp pattern (#1486258)\n- Fix merging of configuration parameters: user prefs always survive (#1486368) \n- Fix quota indicator value after folder purge/expunge (#1486488)\n- Fix external mailto links support for use as protocol handler (#1486037)\n- Fix attachment excessive memory use, support messages of any size (#1484660)\n- Fix setting task name according to auth state\n- Password: fix vpopmaild driver (#1486478)\n- Add workaround for MySQL bug [http://bugs.mysql.com/bug.php?id=46293] (#1486474)\n- Fix quoted text wrapping when replying to an HTML email in plain text (#1484141)\n- Fix handling of extended mailto links (with params) (#1486354)\n- Fix sorting by date of messages without date header on servers without SORT (#1486286)\n- Fix inconsistency when not using default table names (#1486467)\n- Fix folder rename/delete buttons do not appear on creation of first folder (#1486468)\n- Fix character set conversion fails on systems where iconv doesn't accept //IGNORE (#1486375)\n- Log in performance: Create default folders on first login only\n- Import contacts into the selected address book (by Phil Weir)\n- Add support for MDB2's 'sqlsrv' driver (#1486395)\n- Use jQuery-1.4\n- Removed problematic browser-caching of messages\n- Fix incompatybility with suhosin.executor.disable_emodifier (#1486321)\n- Use PLAIN auth when CRAM fails and imap_auth_type='check' (#1486371)\n- Fix removal of <title> tag from HTML messages (#1486432)\n- Fix 'force_https' to specified port when URL contains a port number (#1486411)\n- Fix to-text converting of HTML entities inside b/strong/th/hX tags (#1486422)\n- Bug in spellchecker suggestions when server charset != UTF8 (#1486406)\n- Managesieve: Fix requires generation for multiple actions (#1486397)\n- Fix LDAP problem with special characters in RDN (#1486320)\n- Improved handling of message parts of type message/rfc822\n- Plugin API: added 'quota' hook\n- Fix parsing conditional comments in HTML messages (#1486350)\n- Use built-in json_encode() for proper JSON format in AJAX replies\n- Allow setting only selected params in 'message_compose' hook (#1486312)\n- Plugin API: added 'message_compose_body' hook (#1486285)\n- Fix counters of all folders are checked in 'getunread' action  with check_all_folders disabled (#1486128)\n- Fix displaying alternative parts in messages of type message/rfc822 (#1486246)\n- Fix possible messages exposure when using Roundcube behind a proxy (#1486281)\n- Fix unicode para and line separators in javascript response (#1486310)\n- Additional_message_headers: allow unsetting headers, support plugin's config file (#1486268)\n- Fix displaying of hidden directories in skins list (#1486301)\n- Fix open_basedir restriction error when reading skins list (#1486304)\n- Fix pasting from Office apps into html editor (#1486271)\n- Fix empty <a> tags parsing (#1486272)\n- Don't cut off attachment names when using non-RFC2231 encoding (#1485515)\n- Allow inserting signatures above replied message body (#1484272)\n- Managesieve 2.0: multi-script support\n- Fix imap_auth_type regression (#1486263)\n\nRELEASE 0.3.1\n------------------\n- Specify toolbar container in compose template (#1486247)\n- Fix $_SERVER['HTTPS'] check for SSL forcing on IIS (#1486243)\n- Avoid unnecessary page loads for selected tab (#1486032)\n- Fix quota indicator issues by content generation on client-size (#1486197, #1486220)\n- Don't display disabled sections in Settings (#1486099)\n- Added server-side e-mail address validation with 'email_dns_check' option (#1485857)\n- Fix login page loading into an iframe when session expires (#1485952)\n- Allow setting port number in 'force_https' option (#1486091)\n- Option 'force_https' replaced by 'force_https' plugin\n- Fix IE issue with non-UTF-8 characters in AJAX response (#1486159)\n- Partially fixed \"empty body\" issue by showing raw body of malformed message (#1486166)\n- Fix importing/sending to email address with whitespace (#1486214)\n- Added XIMSS (CommuniGate) driver for Password plugin\n- Fix newly attached files are not saved in drafts w/o editing any text (#1486202)\n- Added attachment upload indicator with parallel upload (#1486058)\n- Use default_charset for bodies of messages without charset definition (#1486187)\n- Password: added cPanel driver\n- Fix return to first page from e-mail screen (#1486105)\n- Fix handling HTML comments in HTML messages (#1486189)\n- Fix folder/messagelist controls alignment - icons used (#1486072)\n- Fix LDAP addressbook shows 'Contact not found' error sometimes (#1486178)\n- Fix cache status checking + improve cache operations performance (#1486104)\n- Prevent from setting INBOX as any of special folders (#1486114)\n- Fix regular expression for e-mail address (#1486152)\n- Fix Received header format\n- Implemented sorting by message index - added 'index_sort' option (#1485936)\n- Fix dl() use in installer (#1486150)\n- Added 'ldap_debug' option\n- Fix \"Empty startup greeting\" bug (#1486085)\n- Fix setting user name in 'new_user_identity' plugin (#1486137)\n- Fix incorrect count of new messages in folder list when using multiple IMAP clients (#1485995)\n- Fix all folders checking for new messages with disabled caching (#1486128)\n- Support skins in 'archive' and 'markasjunk' plugins\n- Added 'html_editor' hook (#1486068)\n- Fix DB constraint violation when populating messages cache (#1486052)\n- Password: added password strength options (#1486062)\n- Fix LDAP partial result warning (#1485536)\n- Fix delete in message view deletes permanently with flag_for_deletion=true (#1486101)\n- Use faster/secure mt_rand() (#1486094)\n- Fix roundcube hangs on empty inbox with bincimapd (#1486093)\n- Fix wrong headers for IE on servers without $_SERVER['HTTPS'] (#1485926)\n- Force IE style headers for attachments in non-HTTPS session, 'use_https' option (#1485655)\n- Check 'post_max_size' for upload max filesize (#1486089) \n- Password Plugin: Fix %d inserts username instead of domain (#1486088)\n- Fix rcube_mdb2::affected_rows() (#1486082)\n\nRELEASE 0.3-stable\n------------------\n- Fix gn and givenName should be synonymous in LDAP addressbook (#1485892)\n- Add mail_domain to LDAP email entries without @ sign (#1485201)\n- Fix saving empty values in LDAP contact data (#1485781)\n- Fix LDAP contact update when RDN field is changed (#1485788)\n- Fix LDAP attributes case senitivity problems (#1485830)\n- Fix LDAP addressbook browsing when only one directory is used (#1486022)\n- Fix endless loop on error response for APPEND command (#1486060)\n- Don't require date.timezone setting in installer (#1485989)\n- Fix date sorting problem with Courier IMAP server (#1486065)\n- Unselect pressed buttons on mouse up (#1485987)\n- Don't set php_value error_log in .htaccess but mention in INSTALL (#1485924)\n- Fix too small status/flag/attachment columns in Safari 4 (#1486063)\n- Fix selection disabling while dragging splitter in webkit browsers (#1486056)\n- Added 'new_messages' plugin hook (#1486005)\n- Added 'logout_after' plugin hook (#1486042)\n- Added 'message_compose' hook\n- Added 'imap_connect' hook (#1485956)\n- Fix vcard_attachments plugin (#1486035)\n- Updated PEAR::Auth_SASL to 1.0.3 version\n- Use sequence names only with PostgreSQL (#1486018)\n- Re-designed User Preferences interface \n- Fix MS SQL DDL (#1486020)\n- Fix rcube_mdb2.php: call to setCharset not implemented in mssql driver (#1486019)\n- Added 'display_next' option\n- Fix rcube_mdb2::unixtimestamp for MS SQL (#1486015)\n- Fix HTML washing to respect character encoding\n- Fix endless loop in iil_C_Login() with Courier IMAP (#1486010)\n- Fix #messagemenu display on IE (#1486006)\n- Speedup UI by using sprites for (toolbar) buttons\n- Fix charset names with X- prefix handling\n- Fix displaying of HTML messages with unknown/malformed tags (#1486003)\n\nRELEASE 0.3-RC1\n---------------\n- Fix import of vCard entries with params (#1485453)\n- Fix HTML messages output with empty block elements (#1485974)\n- Use request tokens to protect POST requests from CSRF [CVE-2009-4076, CVE-2009-4077]\n- Added hook when killing a session\n- Added hook to write_log function (#1485971)\n- Performance improvements by use UID commands (#1485690)\n- Fix HTML editor tabIndex setting (#1485972)\n- Added 'imap_debug' and 'smtp_debug' options\n- Support strftime's format modifiers in date_* options (#1484806)\n- Support %h variable in 'smtp_server' option (#1485766)\n- Show SMTP errors in browser (#1485927)\n- Allow WBR tag in HTML message (#1485960)\n- Use spl_autoload_register() instead of __autoload (#1485947)\n- Add hook for identities listing (#1485958)\n- Trigger hook 'smtp_connect' when opening an SMTP connection (#1485954)\n- Added config option to enforce HTTPS connections\n- Fix non-unicode characters caching in unicode database (#1484608)\n- Performance improvements of messages caching\n- Fix empty Date header issue (#1485923)\n- Open collapsed folders during drag & drop (#1485914)\n- Fixed link text replacements (#1485789)\n- Also trigger 'insertrow' events on page load (#1485826)\n- No link on subject in IE browsers (#1484913)\n- Fixed filename encoding according to RFC2231 (#1485875)\n- Added message Edit feature (#1483891, #1484440)\n- Fix message Etag generation for counter issues (#1485623)\n- Fix messages searching on MailEnable IMAP (#1485762)\n- Fixed many 'skip_deleted' issues (#1485634)\n- Fixed messages list sorting on servers without SORT capability\n- Colorized signatures in plain text messages\n- Reviewed/fixed skip_deleted/read_when_deleted/flag_for_deletion options handling in UI\n- Fix displaying of big maximum upload filesize (#1485889)\n- Added possibility to invert messages selection\n- After move/delete from 'show' action display next message instead of messages list (#1485887)\n- Fixed problem with double quote at the end of folder name (#1485884)\n- Speedup UI by using CSS sprites and etags/expires/deflate in Apache config (#1484858,#1485800)\n- Support UID EXPUNGE: remove only moved/deleted messages\n- Add drag cancelling with ESC key (#1484344)\n- Support initial identity name from virtuser_query (#1484003)\n- Added message menu, removed Print and Source buttons\n- Added possibility to save message as .eml file (#1485861)\n- Added 1 minute interval in autosave options (#1485854)\n- Support UTF-7 encoding in messages (#1485832)\n- Better support for malformed character names (#1485758)\n\nRELEASE 0.3-BETA\n----------------\n- Plugin API + jQuery engine\n- Added possibility to encrypt received header, option 'http_received_header_encrypt',\n  added some more logic in encrypt/decrypt functions for security\n- Fix Answered/Forwarded flag setting for messages in subfolders\n- Fix autocomplete problem with capital letters (#1485792)\n- Support UUencode content encoding (#1485839)\n- Minimize chance of race condition in session handling (#1485659, #1484678)\n- Fix session handling on non-session SQL query error (#1485734)\n- Fix html editor mode setting when reopening draft message (#1485834)\n- Added quick search box menu (#1484304)\n- Fix wrong column sort order icons (#1485823)\n- Updated TinyMCE to 3.2.3 version\n- Fix attachment names encoding when charset isn't specified in attachment part (#1484969)\n- Fix message normal priority problem (#1485820)\n- Fix autocomplete spinning wheel does not disappear (#1485804)\n- Added log_date_format option (#1485709)\n- Fix text wrapping in HTML editor after switching from plain text to HTML (#1485521)\n- Fix auto-complete function hangs with plus sign (#1485815)\n- Fix AJAX requests errors handler (#1485000)\n- Speed up message list displaying on IE\n- Fix read/write database recognition (#1485811)\n\nRELEASE 0.2.2\n-------------\n- Fix quicksearchbox look in Chrome and Konqueror (#1484841)\n- Fix UTF-8 byte-order mark removing (#1485514)\n- Fix folders subscribtions on Konqueror (#1484841) \n- Fix debug console on Konqueror and Safari\n- Fix messagelist focus issue when modifying status of selected messages (#1485807)\n- Support STARTTLS in IMAP connection (#1485284)\n- Fix DEL key problem in search boxes (#1485528)\n- Support several e-mail addresses per user from virtuser_file (#1485678)\n- Fix drag&drop with scrolling on IE (#1485786)\n- Fix adding signature separator in html mode (#1485350)\n- Fix opening attachment marks message as read (#1485803)\n- Fix 'temp_dir' does not support relative path under Windows (#1484529)\n- Fix \"Initialize Database\" button missing from installer (#1485802)\n- Fix compose window doesn't fit 1024x768 window (#1485396)\n- Fix service not available error when pressing back from compose dialog (#1485552)\n- Fix using mail() on Windows (#1485779)\n- Fix word wrapping in message-part's <PRE>s for printing (#1485787)\n- Fix incorrect word wrapping in outgoing plaintext multibyte messages (#1485714)\n- Fix double footer in HTML message with embedded images\n- Fix TNEF implementation bug (#1485773)\n- Fix incorrect row id parsing for LDAP contacts list (#1485784) \n- Fix 'mode' parameter in sqlite DSN (#1485772)\n\nRELEASE 0.2.1\n------------------\n- Use US-ASCII as failover when Unicode searching fails (#1485762)\n- Fix errors handling in IMAP command continuations (#1485762)\n- Fix FETCH result parsing for servers returning flags at the end of result (#1485763)\n- Fix datetime columns defaults in mysql's DDL (#1485641)\n- Fix attaching more than nine inline images (#1485759)\n- Support 'UNICODE-1-1-UTF-7' alias for UTF-7 encoding (#1485758)\n- Fix mime-type detection using a hard-coded map (#1485311)\n- Don't return empty string if charset conversion failed (#1485757)\n- Disable concurrent autocomplete query results display (#1485743)\n- Fix new lines stripped from message footer (#1485751)\n- Fix IE problem with mouse click autocomplete (#1485739)\n- Fix html body washing on reply/forward + fix attachments handling (#1485676)\n- Fix multiple recipients input parsing (#1485733)\n- Fix replying to message with html attachment (#1485676)\n- Use default_charset for messages without specified charset (#1485661, #1484961)\n- Support non-standard \"GMT-XXXX\" literal in date header (#1485729)\n- Added TNEF support to decode MS Outlook attachments (winmail.dat)\n- Fix \"value continuation\" MIME headers by adding required semicolon (#1485727)\n- Fix pressing select all/unread multiple times (#1485723)\n- Fix selecting all unread does not honor new messages (#1485724)\n- Fix some base64 encoded attachments handling (#1485725)\n- Support NGINX as IMAP backend: better BAD response handling (#1485720)\n- Performance fix: don't fetch attachment parts headers twice to parse filename\n- Fix checking for recent messages on various IMAP servers (#1485702)\n- Performance fix: Don't fetch quota and recent messages in \"message view\" mode\n- Fix displaying of alternative-inside-alternative messages (#1485713)\n- Fix MDNSent flag checking, use arbitrary keywords (asterisk) flag (#1485706)\n- Fix creation of folders with '&' sign in name\n- Fix parsing of email addresses without angle brackets (#1485693)\n- Save spellcheck corrections when switching from plain to html editor (and spellchecking is on)\n- Fix large search results on server without SORT capability (#1485668)\n- Get rid of preg_replace() with eval modifier and create_function usage (#1485686)\n- Bring back <base> and <link> tags in HTML messages\n- Fix XSS vulnerability through background attributes [CVE-2009-0413]\n- Fix problems with backslash as IMAP hierarchy delimiter (#1484467)\n- Secure vcard export by getting rid of preg's 'e' modifier use (#1485689)\n- Fix authentication when submitting form with existing session (#1485679)\n- Allow absolute URLs to images in HTML messages/sigs (#1485666)\n- Fix message body which contains both inline attachments and emotions\n- Fix SQL query execution errors handling in rcube_mdb2 class (#1485509)\n- Fix address names with '@' sign handling (#1485654)\n- Improve messages display performance\n- Fix messages searching with 'to:' modifier\n\nRELEASE 0.2-STABLE\n------------------\n- Fix mark popup in IE 7 (#1485369)\n- Fix line-break issue when copy & paste in Firefox (#1485425)\n- Fix autocomplete \"unknown server error\" (#1485637)\n- Fix STARTTLS before AUTH in SMTP connection (#1484883)\n- Support multiple quota values in QUOTAROOT resonse (#1485626)\n- Only abbreviate file name for IE < 7 browsers (#1485063)\n- Performance: allow setting imap rootdir and delimiter before connect (#1485172)\n- Fix sorting of folders with more than 2 levels (#1485569)\n- Fix search results page jumps in LDAP addressbook (#1485253)\n- Fix empty line before the signature in IE (#1485351)\n- Fix horizontal scrollbar in preview pane on IE (#1484633)\n- Add Robots meta tag in login page and installer (#1484846)\n- Added 'show_images' option, removed 'addrbook_show_images' (#1485597)\n- Option to check for new mails in all folders (#1484374)\n- Don't set client busy when checking for new messages (#1485276)\n- Allow UTF-8 folder names in config (#1485579)\n- Add junk_mbox option configuration in installer (#1485579)\n- Do serverside addressbook queries for autocompletion (#1485531)\n- Allow setting attachment col position in 'list_cols' option\n- Allow override 'list_cols' via skin (#1485577)\n- Fix 'cache' table cleanup on session destroy (#1485516)\n- Increase speed of session destroy and garbage clean up\n- Fix session timeout when DB server got clock skew (#1485490)\n- Fix handling of some malformed messages (#1484438)\n- Speed up raw message body handling\n- Better HTML entities conversion in html2text (#1485519)\n- Fix big memory consumption and speed up searching on servers without SORT capability\n- Fix setting locale to tr_TR, ku and az_AZ (#1485470) \n- Use SORT for searching on servers with SORT capability\n- Added message status filter\n- Fix empty file sending (#1485389)\n- Improved searching with many criterias (calling one SEARCH command)\n- Fix HTML editor initialization on IE (#1485304)\n- Add warning when switching editor mode from html to plain (#1485488)\n- Make identities list scrollable (#1485538)\n- Fix problem with numeric folder names (#1485527)\n- Added BYE response simple support to prevent from endless loops in imap.inc (#1483956)\n- Fix unread message unintentionally marked as read if read_when_deleted=true (#1485409)\n- Remove port number from SERVER_NAME in smtp_helo_host (#1485518)\n- Don't send disposition notification receipts for messages marked as 'read' (#1485523)\n- Added 'keep_alive' and 'min_keep_alive' options (#1485360)\n- Added option 'identities_level', removed 'multiple_identities'\n- Allow deleting identities when multiple_identities=false (#1485435)\n- Added option focus_on_new_message (#1485374)\n- Fix html2text class autoloading on Windows (#1485505)\n- Fix html signature formatting when identity save error occurred (#1485426)\n- Add feedback and set busy when moving folder (#1485497)\n- Fix 'Empty' link visibility for some languages e.g. Slovak (#1485489)\n- Fix messages count bar overlapping (#1485270)\n- Fix adding signature in drafts compose mode (#1485484)\n- Fix iil_C_Sort() to support very long and/or divided responses (#1485283)\n- Fix matching case sensitivity when setting identity on reply (#1485480)\n- Prefer default identity on reply\n- Fix imap searching on ISMail server (#1485466)\n- Add css class for flagged messages (#1485464)\n- Write username instead of id in sendmail log (#1485477)\n- Fix htmlspecialchars() use for PHP version < 5.2.3 (#1485475)\n- Fix js keywords escaping in json_serialize() for IE/Opera (#1485472)\n- Added bin/killcache.php script (#1485434)\n- Add support for SJIS, GB2312, BIG5 in rc_detect_encoding()\n- Fix vCard file encoding detection for non-UTF-8 strings (#1485410)\n- Add 'skip_deleted' option in User Preferences (#1485445)\n- Minimize \"inline\" javascript scripts use (#1485433)\n- Fix css class setting for folders with names matching defined classes names (#1485355)\n- Fix race conditions when changing mailbox\n- Fix spellchecking when switching to html editor (#1485362)\n- Fix compose window width/height (#1485396)\n- Allow calling msgimport.sh/msgexport.sh from any directory (#1485431)\n- Localized filesize units (#1485340)\n- Better handling of \"no identity\" and \"no email in identity\" situations (#1485117)\n- Added 'mime_param_folding' option with possibility to choose long/non-ascii attachment names encoding eg. to be readable in MS Outlook/OE (#1485320)\n- Added \"advanced options\" feature in User Preferences\n- Fix unread counter when displaying cached massage in preview panel (#1485290)\n- Fix htmleditor spellchecking on MS Windows (#1485397)\n- Fix problem with non-ascii attachment names in Mail_mime (#1485267, #1485096)\n- Fix language autodetection (#1485401)\n- Fix button label in folders management (#1485405)\n- Fix collapsed folder not indicating unread msgs count of all subfolders (#1485403)\n- Fix handling of apostrophes in filenames decoded according to rfc2231\n\nRELEASE 0.2-BETA\n----------------\n- Made config files location configurable (#1485215)\n- Reduced memory footprint when forwarding attachments (#1485345)\n- Allow and use spellcheck attribute for input/textarea fields (#1485060)\n- Added icons for forwarded/forwarded+replied messages (#1485257)\n- Added Reply-To to forwarded emails (#1485315)\n- Display progress message for folders create/delete/rename (#1485357)\n- Smart Tags and NOBR tag support in html messages (#1485363, #1485327)\n- Redesign of the identities settings (#1484042)\n- Add config option to disable creation/deletion of identities (#1484498)\n- Added 'sendmail_delay' option to restrict messages sending interval (#1484491)\n- Added vertical splitter for folders list resizing\n- Added possibility to view all headers in message view\n- Fixed splitter drag/resize on Opera (#1485170)\n- Fixed quota img height/width setting from template (#1484857)\n- Refactor drag & drop functionality. Don't rely on browser events anymore (#1484453)\n- Insert \"virtual\" folders in subscription list (#1484779)\n- Added link to open message in new window\n- Enable export of address book contacts as vCard\n- Add feature to import contacts from vcard files (#1326103)\n- Respect Content-Location headers in multipart/related messages according to RFC2110 (#1484946)\n- Allowed max. attachment size now indicated in compose screen (#1485030)\n- Also capture backspace key in list mode (#1484566)\n- Allow application/pgp parts to be displayed (#1484753)\n- Correctly handle options in mailto-links (#1485228)\n- Immediately save sort_col/sort_order in user prefs (#1485265)\n- Truncate very long (above 50 characters) attachment filenames when displaying\n- Allow to auto-detect client language if none set (#1484434)\n- Auto-detect the client timezone (user configurable)\n- Add RFC2231 header value continuations support for attachment filenames + hack for servers that not support that feature\n- Fix Reply-To header displaying (#1485314)\n- Mark form buttons that provide the most obvious operation (mainaction)\n- Added option 'quota_zero_as_unlimited' (#1484604)\n- Added PRE handling in html2text class (#1484740)\n- Added folder hierarchy collapsing\n- Added options to use syslog instead of log file (#1484850)\n- Added Logging & Debugging section in Installer\n- Fix In-Reply-To and References headers when composing saved draft message (#1485288)\n- Fix html message charset conversion for charsets with underline (#1485287) \n- Fix buttons status after contacts deletion (#1485233)\n- Fix escaping of To: and From: fields when building message body for reply or forward in the HTML editor (#1484904)\n- Use current mailbox name in template (#1485256)\n- Better fix for skipping untagged responses (#1485261)\n- Added pspell support patch by Kris Steinhoff (#1483960)\n- Enable spellchecker for HTML editor (#1485114)\n- Respect spellcheck_uri in tinyMCE spellchecker (#1484196)\n- Case insensitive contacts searching using PostgreSQL (#1485259)\n- Make default imap folders configurable for each user (#1485075)\n- Save outgoing mail to selectable folder (#1324581)\n- Fix hiding of mark menu when clicking th button again (#1484944)\n- Use long date format in print mode (#1485191)\n- Updated TinyMCE to version 3.1.0.1\n- Re-enable autocomplete attribute for login form (#1485211)\n- Check PERMANENTFLAGS before saving $MDNSent flag (#1484963, #1485163)\n- Added flag column on messages list (#1484623)\n- Patched Mail/MimePart.php (http://pear.php.net/bugs/bug.php?id=14232)\n- Allow trash/junk subfolders to be purged (#1485085)\n- Store compose parameters in session and redirect to a unique URL\n- Fixed CRAM-MD5 authentication (#1484819)\n- Fixed forwarding messages with one HTML attachment (#1484442)\n- Fixed encoding of message/rfc822 attachments and image/pjpeg handling (#1484914)\n- Added option to select skin in user preferences\n- Added option to configure displaying of attached images below the message body\n- Added option to display images in messages from known senders (#1484601)\n- User preferences grouped in more fieldsets\n- Fix corrupted MIME headers of messages in Sent folder (#1485111)\n- Fixed bug in MDB2 package: http://pear.php.net/bugs/bug.php?id=14124\n- Use keypress instead of keydown to select list's row (#1484816)\n- Don't call expunge and don't remove message row after message move if flag_for_deletion is set to true (#1485002)\n\nRELEASE 0.2-ALPHA\n-----------------\n- Added option to disable autocompletion from selected LDAP address books (#1484922)\n- TLS support in LDAP connections: 'use_tls' property (#1485104)\n- Fixed removing messages from search set after deleting them (#1485106)\n- imap.inc: Fixed iil_C_FetchStructureString() to handle many \n  literal strings in response (#1484969)\n- Support for subfolders in default/protected folders (#1484665)\n- Disallowed delimiter in folder name (#1484803)\n- Support \" and \\ in folder names\n- Escape \\ in login (#1484614)\n- Better HTML sanitization with the DOM-based washtml script (#1484701)\n- Fixed sorting of folders with non-ascii characters\n- Fixed Mysql DDL for default identities creation (#1485070)\n- In Preferences added possibility to configure 'read_when_deleted',\n  'mdn_requests', 'flag_for_deletion' options\n- Made IMAP auth type configurable (#1483825)\n- Fixed empty values with FROM_UNIXTIME() in rcube_mdb2 (#1485055)\n- Fixed attachment list on IE 6/7 (#1484807)\n- Fixed JavaScript in compose.html that shows cc/bcc fields if populated\n- Make password input fields of type password in installer (#1484886)\n- Don't attempt to delete cache entries if enable_caching is FALSE (#1485051)\n- Optimized messages sorting on servers without sort capability (#1485049)\n- Corrected message headers decoding when charset isn't specified and improved\n  support for native languages (#1485050, #1485048)\n- Expanded LDAP configuration options to support LDAP server writes.\n- Installer: encode special characters in DB username/password (#1485042)\n- Fixed management of folders with national characters in names (#1485036, #1485001)\n- Fixed identities saving when using MDB2 pgsql driver (#1485032)\n- Fixed BCC header reset (#1484997)\n- Improved messages list performance - patch from Justin Heesemann\n- Append skin_path to images location only when it starts with '/' sign (#1484859)\n- Fix IMAP response in message body when message has no body (#1484964)\n- Fixed non-RFC dates formatting (#1484901)\n- Fixed typo in set_charset() (#1484991)\n- Decode entities when inserting HTML signature to plain text message (#1484990)\n- HTML editing is now working with PHP5 updates and TinyMCE v3.0.6\n- Fixed signature loading on Windows (#1484545)\n- Added language support to HTML editing (#1484862)\n- Fixed remove signature when replying (#1333167)\n- Fixed problem with line with a space at the end (#1484916)\n- Fixed <!DOCTYPE> tag filtering (#1484391)\n- Fixed <?xml> tag filtering (#1484403)\n- Added sections (fieldset+label) in Settings interface\n- Mark as read in one action with message preview (#1484972)\n- Deleted redundant quota reads (#1484972)\n- Added options for empty trash and expunge inbox on logout (#1483863)\n- Removed lines wrapping when displaying message\n- Fixed month localization\n- Changed codebase to PHP5 with autoloader\n\nRELEASE 0.1.1\n-------------\n- Clear selection when selecting single item (#1484942)\n- Remove hard-coded image size in skin templates (#1484893)\n- Database schema improvements (dropped unnecessary indexes)\n- Fixed creating a new folder with a comma in its name (#1484681)\n- Fixed sorting of messages when default mailbox is empty (#1484317)\n- Improve message previewpane - less loading (#1484316)\n- Fixed login form autoompletion (#1484839)\n- Fixed virtuser_query option for mdb2 backend (#1484874)\n- Fixed attachment resoting from Drafts when message body was empty (#1484506)\n- Fixed usage of ob_gzhandler (#1484851)\n- Fixed message part window in IE6 (#1484610)\n- Fixed decoding of mime-encoded strings (#1484191)\n- Fixed some iconv/mb_string problems (#1484598)\n- Correctly quote mailbox name when using in URL (#1484313)\n- Fixed \"headers already sent\" errors (#1484860)\n\nRELEASE 0.1-STABLE\n------------------\n- Added interactive installer script\n- Fix folder adding/renaming inspired by #1484800\n- Localize folder name in page title (#1484785)\n- Fix code using wrong variable name (#1484018)\n- Allow to send mail with BCC recipients only\n- condense TinyMCE toolbar down to one line, removing table buttons (#1484747)\n- Add function to mark the selected messages as read/unread (#1457360)\n- Also do charset decoding as suggested in RFC 2231 (fix #1484321)\n- Show message count in folder list and hint when creating a subfolder\n- Distinguish ssl and tls for imap connections (#1484667)\n- Added some charset aliases to fix typical mis-labelling (#1484565)\n- Remember decision to display images for a certain message during session (#1484754)\n- Truncate attachment filenames to 55 characters due to an IE bug (#1484757)\n- Make sending of read receipts configurable\n- Respect config when localize folder names (#1484707)\n- Also respect receipt and priority settings when re-opening a draft message\n- Remember search results (closes #1483883), patch by the_glu\n- Add Received header on outgoing mail\n- Upgrade to TinyMCE 2.1.3\n- Allow inserting image attachments into HTML messages while composing (#1484557)\n- Implement Message-Disposition-Notification (Receipts)\n- Fix overriding of session vars when register_globals is on (#1484670)\n- Fix bug with case-sensitive folder names (#1484245)\n- Don't create default folders by default\n- Fixed some potential security risks (audited by Andris)\n- Only show new messages if they match the current search (#1484176)\n- Switch to/from when searcing in Sent folder (#1484555)\n- Correctly read the References header (#1484646)\n- Unset old cookie before sending a new value (#1484639)\n- Correctly decode attachments when downloading them (#1484645 and #1484642)\n- Suppress IE errors when clearing attachments form (#1484356)\n- Log error when login fails due to auto_create_user turned off\n- Filter linked/imported CSS files (closes #1484056)\n- Improve message compose screen (closes #1484383)\n- Select next row after removing one from list (#1484387)\n\nRELEASE 0.1-RC2\n---------------\n- Enable drag-&-dropping of folders to a new parent and allow to create subfolders (#1457344)\n- Suppress IE errors when clearing attachments form (#1484356)\n- Set preferences field in user table to NULL (#1484386)\n- Log error when login fails due to auto_create_user turned off\n- Filter linked/imported CSS files (closes #1484056)\n- Improve message compose screen (closes #1484383)\n- Select next row after removing one from list (#1484387)\n- Make smtp HELO/EHLO hostname configurable (#1484067)\n- IPv6 Compatability (#1484322), Patch #1484373\n- Unlock interface when message sending fails (#1484570)\n- Eval PHP code in template includes (if configured)\n- Show message when folder is empty. Mo more static text in table (#1484395)\n- Only display unread count in page title when new messages arrived\n- Fixed wrong delete button tooltip (#1483965)\n- Fixed charset encoding bug (#1484429)\n- Applied patch for LDAP version (#1484552)\n- Improved XHTML validation\n- Fix message list selection (#1484550)\n- Better fix lowercased usernames (#1484473)\n- Update pngbehavior Script as suggested in #1484490\n- Fixed moving/deleting messages when more than 1 is selected\n- Applied patch for LDAP contacts listing by Glen Ogilvie\n- Applied patch for more address fields in LDAP contacts (#1484402)\n- Add alternative for getallheaders() (fix #1484508)\n- Identify mailboxes case-sensitive\n- Sort mailbox list case-insensitive (closes #1484338)\n- Fix display of multipart messages from Apple Mail (closes #1484027)\n- Protect AJAX request from being fetched by a foreign site (XSS)\n- Make autocomplete for loginform configurable by the skin template\n- Fix compose function from address book (closes #1484426)\n- Added //IGNORE to iconv call (patch #1484420, closes #1484023)\n- Check if mbstring supports charset (#1484290 and #1484292)\n- Prefer iconv over mbstring (as suggested in #1484292)\n- Check filesize of template includes (#1484409)\n- Fixed bug with buttons not dimming/enabling properly after switching folders\n- Fixed compose window becoming unresponsive after saving a draft (#1484487)\n- Re-enabled \"Back\" button in compose window now that bug #1484487 is fixed\n- Fixed unresponsive interface issue when downloading attachments (#1484496)\n- Lowered status message time from 5 to 3 seconds to improve responsiveness\n- Raised .htaccess upload_max_filesize from 2M to 5M to differ from default php.ini\n- Increased \"mailboxcontrols\" mail.css width from 160 to 170px to fix non-english languages (#1484499)\n- Fix status message bug #1484464 with regard to #1484353\n- Fix address adding bug reported by David Koblas\n- Applied socket error patch by Thomas Mangin\n- Pass-by-reference workarround for PHP5 in sendmail.inc\n- Fixed buggy imap_root settings (closes #1484379)\n- Prevent default events on subject links (#1484399)\n- Use HTTP-POST requests for actions that change state\n\nRELEASE 0.1-RC1\n---------------\n- Use global filters and bind username/ for Ldap searches (#1484159)\n- Hide quota display if imap server does not support it\n- Hide address groups if no LDAP servers configured\n- Add link to message subjects (closes #1484257)\n- Better SQL query for contact listing/search (closes #1484369)\n- Fixed marking as read in preview pane (closes #1484364)\n- CSS hack to display attachments correctly in IE6\n- Wrap message body text (closes #1484148)\n- LDAP access is back in address book (closes #1484087)\n- Added search function for contacts\n- New Template parsing and output encoding\n- Fixed bugs #1484119 and #1483978\n- Fixed message moving procedure (closes #1484308)\n- Fixed display of multiple attachments (closes #1466563)\n- Fixed check for new messages (closes #1484310)\n- List attachments without filename\n- New session authentication: Change sessid cookie when login, authentication with sessauth cookie is now configurable.\n  Should close bugs #1483951 and #1484299\n- Correctly translate mailbox names (closes #1484276)\n- Quote e-mail address links (closes #1484300)\n- Updated PEAR::Mail_mime package\n- Accept single quotes for HTML attributes when modifying message body (thanks Jason)\n- Sanitize input for new users/identities (thanks Colin Alston)\n- Don't download HTML message parts\n- Convert HTML parts to plaintext if 'prefer_html' is off\n- Correctly parse message/rfc822 parts (closes #1484045)\n- Also use user_id for unique key in messages table (closes #1484074)\n- Hide contacts drop down on blur (closes #1484203)\n- Make entries in contacts drop down clickable\n- Turn off browser autocompletion on login page\n- Quote <? in text/html message parts\n- Hide border around radio buttons\n- Applied patch for attachment download by crichardson (closes #1484198)\n- Fixed bug in Postgres DB handling (closes #1484068)\n- Fixed bug of invalid calls to fetchRow() in rcube_db.inc (closes #1484280)\n- Fixed array_merge bug (closes #1484281)\n- Fixed flag for deletion in list view (closes #1484264)\n- Finally support semicolons as recipient separator (closes ##1484251)\n- Fixed message headers (subject) encoding\n- check if safe mode is on or not (closes #1484269)\n- Show \"no subject\" in message list if subject is missing (closes #1484243)\n- Solved page caching of message preview (closes #1484153)\n- Only use gzip compression if configured (closes #1484236)\n- Fixed priority selector issue (#1484150)\n- Fixed some CSS issues in default skin (closes #1484210 and #1484161)\n- Prevent from double quoting of numeric HTML character references (closes #1484253)\n- Fixed display of HTML message attachments (closes #1484178)\n- Applied patch for preview caching (closes #1484186)\n- Added error handling for attachment uploads\n- Use multibyte safe string functions where necessary (closes #1483988)\n- Applied security patch to validate the submitted host value (by Kees Cook)\n- Applied security patch to validate input values when deleting contacts (by Kees Cook)\n- Applied security patch that sanitizes emoticon paths when attaching them (by Kees Cook)\n- Applied a patch to more aggressively sanitize a HTML message\n- Visualize blocked images in HTML messages\n- Fixed wrong message listing when showing search results (closes #1484131)\n- Show remote images when opening HTML message part as attachment\n- Improve memory usage when sending mail (closes #1484098)\n- Mark messages as read once the preview is loaded (closes #1484132)\n- Include smtp final response in log (closes #1484081)\n- Corrected date string in sent message header (closes #1484125)\n- Correclty choose \"To\" column in sent and draft mailboxes (closes #1483943)\n- Changed srong tooltips for message browse buttons (closes #1483930)\n- Fixed signature delimeter character to be standard (Bug #1484035)\n- Fixed XSS vulnerability (Bug #1484109)\n- Remove newlines from mail headers (Bug #1484031)\n- Selection issues when moving/deleting (Bug #1484044)\n- Applied patch of Clement Moulin for imap host auto-selection\n- ISO-encode IMAP password for plaintext login (Bugs #1483977 & #1483886)\n- Fixed folder name encoding in subscription list (Bug #1484113)\n- Fixed JS errors in identity list (Bug #1484120)\n- Translate foldernames in folder form (closes #1484113)\n- Added first and last buttons to message list, address book\n  and message detail\n- Pressing Shift-Del bypasses Trash folder\n- Enable purge command for Junk folder\n- Fetch all aliases if virtuser_query is used instead\n- Re-enabled multi select of contacts (Bug #1484017)\n- Enable contact editing right after creation (Bug #1459641)\n- Correct UTF-7 to UTF-8 conversion if mbstring is not available\n- Fixed IMAP fetch of message body (Bug #1484019)\n- Fixed safe_mode problems (Bug #1418381)\n- Fixed wrong header encoding (Bug #1483976)\n- Made automatic draft saving configurable\n- Fixed JS bug when renaming folders (Bug #1483989)\n- Added quota display as image (by Brett Patterson)\n- Corrected creation of a message-id\n- New indentation for quoted message text\n- Improved HTML validity\n- Fixed URL character set (Ticket #1445501)\n- Fixed saving of contact into MySQL from LDAP query results (Ticket #1483820)\n- Fixed folder renaming: unsubscribe before rename (Bug #1483920)\n- Finalized new message parsing (+ chaching)\n- Fixed wrong usage of mbstring (Bug #1462439)\n- Set default spelling language (Ticket #1483938)\n- Added support for Nox Spell Server\n- Re-built message parsing (Bug #1327068)\n  Now based on the message structure delivered by the IMAP server.\n- Fixed some XSS and SQL injection issues\n- Fixed charset problems with folder renaming\n", "<?php\n\n/**\n +-----------------------------------------------------------------------+\n | program/steps/mail/get.inc                                            |\n |                                                                       |\n | This file is part of the Roundcube Webmail client                     |\n | Copyright (C) 2005-2013, The Roundcube Dev Team                       |\n |                                                                       |\n | Licensed under the GNU General Public License version 3 or            |\n | any later version with exceptions for skins & plugins.                |\n | See the README file for a full license statement.                     |\n |                                                                       |\n | PURPOSE:                                                              |\n |   Delivering a specific part of a mail message                        |\n |                                                                       |\n +-----------------------------------------------------------------------+\n | Author: Thomas Bruederli <roundcube@gmail.com>                        |\n +-----------------------------------------------------------------------+\n*/\n\n\n// show loading page\nif (!empty($_GET['_preload'])) {\n    $_get = $_GET + array('_mimewarning' => 1, '_embed' => 1);\n    unset($_get['_preload']);\n    $url = $RCMAIL->url($_get);\n    $message = $RCMAIL->gettext('loadingdata');\n\n    header('Content-Type: text/html; charset=' . RCUBE_CHARSET);\n    print \"<html>\\n<head>\\n\"\n        . '<meta http-equiv=\"refresh\" content=\"0; url='.rcube::Q($url).'\">' . \"\\n\"\n        . '<meta http-equiv=\"content-type\" content=\"text/html; charset='.RCUBE_CHARSET.'\">' . \"\\n\"\n        . \"</head>\\n<body>\\n$message\\n</body>\\n</html>\";\n    exit;\n}\n\nob_end_clean();\n\n// similar code as in program/steps/mail/show.inc\nif (!empty($_GET['_uid'])) {\n    $uid = rcube_utils::get_input_value('_uid', rcube_utils::INPUT_GET);\n    $RCMAIL->config->set('prefer_html', true);\n    $MESSAGE = new rcube_message($uid, null, intval($_GET['_safe']));\n}\n\n// check connection status\ncheck_storage_status();\n\n$part_id = rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC);\n\n// show part page\nif (!empty($_GET['_frame'])) {\n    if ($part_id && ($part = $MESSAGE->mime_parts[$part_id])) {\n        $filename = rcmail_attachment_name($part);\n        $OUTPUT->set_pagetitle($filename);\n    }\n\n    // register UI objects\n    $OUTPUT->add_handlers(array(\n        'messagepartframe'    => 'rcmail_message_part_frame',\n        'messagepartcontrols' => 'rcmail_message_part_controls',\n    ));\n\n    $OUTPUT->set_env('mailbox', $RCMAIL->storage->get_folder());\n    $OUTPUT->set_env('uid', $uid);\n    $OUTPUT->set_env('part', $part_id);\n    $OUTPUT->set_env('filename', $filename);\n\n    $OUTPUT->send('messagepart');\n    exit;\n}\n\n// render thumbnail of an image attachment\nelse if ($_GET['_thumb']) {\n    $pid = rcube_utils::get_input_value('_part', rcube_utils::INPUT_GET);\n    if ($part = $MESSAGE->mime_parts[$pid]) {\n        $thumbnail_size = $RCMAIL->config->get('image_thumbnail_size', 240);\n        $temp_dir       = $RCMAIL->config->get('temp_dir');\n        $mimetype       = $part->mimetype;\n        $file_ident     = $MESSAGE->headers->messageID . ':' . $part->mime_id . ':' . $part->size . ':' . $part->mimetype;\n        $cache_basename = $temp_dir . '/' . md5($file_ident . ':' . $RCMAIL->user->ID . ':' . $thumbnail_size);\n        $cache_file     = $cache_basename . '.thumb';\n\n        // render thumbnail image if not done yet\n        if (!is_file($cache_file)) {\n            if ($fp = fopen(($orig_name = $cache_basename . '.tmp'), 'w')) {\n                $MESSAGE->get_part_body($part->mime_id, false, 0, $fp);\n                fclose($fp);\n\n                $image = new rcube_image($orig_name);\n                if ($imgtype = $image->resize($thumbnail_size, $cache_file, true)) {\n                    $mimetype = 'image/' . $imgtype;\n                    unlink($orig_name);\n                }\n                else {\n                    rename($orig_name, $cache_file);\n                }\n            }\n        }\n\n        if (is_file($cache_file)) {\n            header('Content-Type: ' . $mimetype);\n            readfile($cache_file);\n        }\n    }\n\n    exit;\n}\nelse if (strlen($part_id)) {\n    if ($part = $MESSAGE->mime_parts[$part_id]) {\n        $mimetype = rcmail_fix_mimetype($part->mimetype);\n\n        // allow post-processing of the message body\n        $plugin = $RCMAIL->plugins->exec_hook('message_part_get', array(\n            'uid'      => $MESSAGE->uid,\n            'id'       => $part->mime_id,\n            'mimetype' => $mimetype,\n            'part'     => $part,\n            'download' => !empty($_GET['_download'])\n        ));\n\n        if ($plugin['abort']) {\n            exit;\n        }\n\n        // overwrite modified vars from plugin\n        $mimetype   = $plugin['mimetype'];\n        $extensions = rcube_mime::get_mime_extensions($mimetype);\n\n        if ($plugin['body']) {\n            $body = $plugin['body'];\n        }\n\n        // compare file mimetype with the stated content-type headers and file extension to avoid malicious operations\n        if (!empty($_REQUEST['_embed']) && empty($_REQUEST['_nocheck'])) {\n            $file_extension = strtolower(pathinfo($part->filename, PATHINFO_EXTENSION));\n\n            // 1. compare filename suffix with expected suffix derived from mimetype\n            $valid = $file_extension && in_array($file_extension, (array)$extensions) || empty($extensions) || !empty($_REQUEST['_mimeclass']);\n\n            // 2. detect the real mimetype of the attachment part and compare it with the stated mimetype and filename extension\n            if ($valid || !$file_extension || $mimetype == 'application/octet-stream' || stripos($mimetype, 'text/') === 0) {\n                $tmp_body = $body ?: $MESSAGE->get_part_body($part->mime_id, false, 2048);\n\n                // detect message part mimetype\n                $real_mimetype = rcube_mime::file_content_type($tmp_body, $part->filename, $mimetype, true, true);\n                list($real_ctype_primary, $real_ctype_secondary) = explode('/', $real_mimetype);\n\n                // accept text/plain with any extension\n                if ($real_mimetype == 'text/plain' && $real_mimetype == $mimetype) {\n                    $valid_extension = true;\n                }\n                // ignore differences in text/* mimetypes. Filetype detection isn't very reliable here\n                else if ($real_ctype_primary == 'text' && strpos($mimetype, $real_ctype_primary) === 0) {\n                    $real_mimetype   = $mimetype;\n                    $valid_extension = true;\n                }\n                // ignore filename extension if mimeclass matches (#1489029)\n                else if (!empty($_REQUEST['_mimeclass']) && $real_ctype_primary == $_REQUEST['_mimeclass']) {\n                    $valid_extension = true;\n                }\n                else {\n                    // get valid file extensions\n                    $extensions      = rcube_mime::get_mime_extensions($real_mimetype);\n                    $valid_extension = !$file_extension || empty($extensions) || in_array($file_extension, (array)$extensions);\n                }\n\n                // fix mimetype for images wrongly declared as octet-stream\n                if ($mimetype == 'application/octet-stream' && strpos($real_mimetype, 'image/') === 0 && $valid_extension) {\n                    $mimetype = $real_mimetype;\n                }\n\n                // \"fix\" real mimetype the same way the original is before comparison\n                $real_mimetype = rcmail_fix_mimetype($real_mimetype);\n\n                $valid = $real_mimetype == $mimetype && $valid_extension;\n            }\n            else {\n                $real_mimetype = $mimetype;\n            }\n\n            // show warning if validity checks failed\n            if (!$valid) {\n                // send blocked.gif for expected images\n                if (empty($_REQUEST['_mimewarning']) && strpos($mimetype, 'image/') === 0) {\n                    // Do not cache. Failure might be the result of a misconfiguration, thus real content should be returned once fixed. \n                    $content = $RCMAIL->get_resource_content('blocked.gif');\n                    $OUTPUT->nocacheing_headers();\n                    header(\"Content-Type: image/gif\");\n                    header(\"Content-Transfer-Encoding: binary\");\n                    header(\"Content-Length: \" . strlen($content));\n                    echo $content;\n                }\n                else {  // html warning with a button to load the file anyway\n                    $OUTPUT = new rcmail_html_page();\n                    $OUTPUT->write(html::tag('html', null, html::tag('body', 'embed',\n                        html::div(array('class' => 'rcmail-inline-message rcmail-inline-warning'),\n                            $RCMAIL->gettext(array(\n                                'name' => 'attachmentvalidationerror',\n                                'vars' => array(\n                                    'expected' => $mimetype . ($file_extension ? \" (.$file_extension)\" : ''),\n                                    'detected' => $real_mimetype . ($extensions[0] ? \" (.$extensions[0])\" : ''),\n                                )\n                            ))\n                            . html::p(array('class' => 'rcmail-inline-buttons'),\n                                html::tag('button', array(\n                                    'onclick' => \"location.href='\" . $RCMAIL->url(array_merge($_GET, array('_nocheck' => 1))) . \"'\"\n                                ),\n                                $RCMAIL->gettext('showanyway'))\n                            )\n                        ))));\n                }\n\n                exit;\n            }\n        }\n\n\n        // TIFF to JPEG conversion, if needed\n        $tiff_support = !empty($_SESSION['browser_caps']) && !empty($_SESSION['browser_caps']['tif']);\n        if (!empty($_REQUEST['_embed']) && !$tiff_support\n            && rcube_image::is_convertable('image/tiff')\n            && rcmail_part_image_type($part) == 'image/tiff'\n        ) {\n            $tiff2jpeg = true;\n            $mimetype  = 'image/jpeg';\n        }\n\n\n        $browser = $RCMAIL->output->browser;\n        list($ctype_primary, $ctype_secondary) = explode('/', $mimetype);\n\n        if (!$plugin['download'] && $ctype_primary == 'text') {\n            header(\"Content-Type: text/$ctype_secondary; charset=\" . ($part->charset ?: RCUBE_CHARSET));\n        }\n        else {\n            header(\"Content-Type: $mimetype\");\n            header(\"Content-Transfer-Encoding: binary\");\n        }\n\n        // deliver part content\n        if ($ctype_primary == 'text' && $ctype_secondary == 'html' && empty($plugin['download'])) {\n            // Check if we have enough memory to handle the message in it\n            // #1487424: we need up to 10x more memory than the body\n            if (!rcube_utils::mem_check($part->size * 10)) {\n                $out = '<body>' . $RCMAIL->gettext('messagetoobig'). ' '\n                    . html::a('?_task=mail&_action=get&_download=1&_uid='.$MESSAGE->uid.'&_part='.$part->mime_id\n                        .'&_mbox='. urlencode($MESSAGE->folder), $RCMAIL->gettext('download')) . '</body></html>';\n            }\n            else {\n                // get part body if not available\n                if (!isset($body)) {\n                    $body = $MESSAGE->get_part_body($part->mime_id, true);\n                }\n\n                // show images?\n                rcmail_check_safe($MESSAGE);\n\n                // render HTML body\n                $out = rcmail_print_body($body, $part, array('safe' => $MESSAGE->is_safe, 'inline_html' => false));\n\n                // insert remote objects warning into HTML body\n                if ($REMOTE_OBJECTS) {\n                    $body_start = 0;\n                    if ($body_pos = strpos($out, '<body')) {\n                        $body_start = strpos($out, '>', $body_pos) + 1;\n                    }\n\n                    $out = substr($out, 0, $body_start)\n                        . html::div(array('class' => 'rcmail-inline-message rcmail-inline-warning'),\n                            rcube::Q($RCMAIL->gettext('blockedimages')) . '&nbsp;' .\n                            html::tag('button',\n                                array('onclick' => \"location.href='\" . $RCMAIL->url(array_merge($_GET, array('_safe' => 1))) . \"'\"),\n                                rcube::Q($RCMAIL->gettext('showimages')))\n                        )\n                        . substr($out, $body_start);\n                }\n            }\n\n            // check connection status\n            if ($part->size && empty($body)) {\n                check_storage_status();\n            }\n\n            $OUTPUT = new rcmail_html_page();\n            $OUTPUT->write($out);\n        }\n        else {\n            // don't kill the connection if download takes more than 30 sec.\n            @set_time_limit(0);\n\n            $filename = rcmail_attachment_name($part);\n\n            if ($browser->ie)\n                $filename = rawurlencode($filename);\n            else\n                $filename = addcslashes($filename, '\"');\n\n            $disposition = !empty($plugin['download']) ? 'attachment' : 'inline';\n\n            // Workaround for nasty IE bug (#1488844)\n            // If Content-Disposition header contains string \"attachment\" e.g. in filename\n            // IE handles data as attachment not inline\n            if ($disposition == 'inline' && $browser->ie && $browser->ver < 9) {\n                $filename = str_ireplace('attachment', 'attach', $filename);\n            }\n\n            // add filename extension if missing\n            if (!pathinfo($filename, PATHINFO_EXTENSION) && ($extensions = rcube_mime::get_mime_extensions($mimetype))) {\n                $filename .= '.' . $extensions[0];\n            }\n\n            header(\"Content-Disposition: $disposition; filename=\\\"$filename\\\"\");\n\n            // handle tiff to jpeg conversion\n            if (!empty($tiff2jpeg)) {\n                $temp_dir  = unslashify($RCMAIL->config->get('temp_dir'));\n                $file_path = tempnam($temp_dir, 'rcmAttmnt');\n\n                // write content to temp file\n                if ($body) {\n                    $saved = file_put_contents($file_path, $body);\n                }\n                else if ($part->size) {\n                    $fd    = fopen($file_path, 'w');\n                    $saved = $MESSAGE->get_part_body($part->mime_id, false, 0, $fd);\n                    fclose($fd);\n                }\n\n                // convert image to jpeg and send it to the browser\n                if ($saved) {\n                    $image = new rcube_image($file_path);\n                    if ($image->convert(rcube_image::TYPE_JPG, $file_path)) {\n                        header(\"Content-Length: \" . filesize($file_path));\n                        readfile($file_path);\n                    }\n                    unlink($file_path);\n                }\n            }\n            // do content filtering to avoid XSS through fake images\n            else if (!empty($_REQUEST['_embed']) && $browser->ie && $browser->ver <= 8) {\n                if ($body) {\n                    echo preg_match('/<(script|iframe|object)/i', $body) ? '' : $body;\n                    $sent = true;\n                }\n                else if ($part->size) {\n                    $stdout = fopen('php://output', 'w');\n                    stream_filter_register('rcube_content', 'rcube_content_filter') or die('Failed to register content filter');\n                    stream_filter_append($stdout, 'rcube_content');\n                    $sent = $MESSAGE->get_part_body($part->mime_id, true, 0, $stdout);\n                }\n            }\n            // send part as-it-is\n            else {\n                if ($body && empty($plugin['download'])) {\n                    header(\"Content-Length: \" . strlen($body));\n                    echo $body;\n                    $sent = true;\n                }\n                else if ($part->size) {\n                    // Don't be tempted to set Content-Length to $part->d_parameters['size'] (#1490482)\n                    // RFC2183 says \"The size parameter indicates an approximate size\"\n\n                    $sent = $MESSAGE->get_part_body($part->mime_id, false, 0, -1);\n                }\n            }\n\n            // check connection status\n            if ($part->size && !$sent) {\n                check_storage_status();\n            }\n        }\n\n        exit;\n    }\n}\n// print message\nelse {\n    // send correct headers for content type\n    header(\"Content-Type: text/html\");\n\n    $cont = \"<html>\\n<head><title></title>\\n</head>\\n<body>\";\n    $cont .= rcmail_message_body(array());\n    $cont .= \"\\n</body>\\n</html>\";\n\n    $OUTPUT = new rcmail_html_page();\n    $OUTPUT->write($cont);\n\n    exit;\n}\n\n\n// if we arrive here, the requested part was not found\nheader('HTTP/1.1 404 Not Found');\nexit;\n\n/**\n * Handles nicely storage connection errors\n */\nfunction check_storage_status()\n{\n    $error = rcmail::get_instance()->storage->get_error_code();\n\n    // Check if we have a connection error\n    if ($error == rcube_imap_generic::ERROR_BAD) {\n        ob_end_clean();\n\n        // Get action is often executed simultanously.\n        // Some servers have MAXPERIP or other limits.\n        // To workaround this we'll wait for some time\n        // and try again (once).\n        // Note: Random sleep interval is used to minimize concurency\n        // in getting message parts\n\n        if (!isset($_GET['_redirected'])) {\n            usleep(rand(10,30)*100000); // 1-3 sec.\n            header('Location: ' . $_SERVER['REQUEST_URI'] . '&_redirected=1');\n        }\n        else {\n            rcube::raise_error(array(\n                'code' => 500, 'type' => 'php',\n                'file' => __FILE__, 'line' => __LINE__,\n                'message' => 'Unable to get/display message part. IMAP connection error'),\n                true, true);\n        }\n\n        // Don't kill session, just quit (#1486995)\n        exit;\n    }\n}\n\n/**\n * Attachment properties table\n */\nfunction rcmail_message_part_controls($attrib)\n{\n    global $MESSAGE, $RCMAIL;\n\n    $part = asciiwords(rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC));\n    if (!is_object($MESSAGE) || !is_array($MESSAGE->parts)\n        || !($_GET['_uid'] && $_GET['_part']) || !$MESSAGE->mime_parts[$part]\n    ) {\n        return '';\n    }\n\n    $part  = $MESSAGE->mime_parts[$part];\n    $table = new html_table(array('cols' => 2));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('namex')).':');\n    $table->add('header', rcube::Q(rcmail_attachment_name($part)));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('type')).':');\n    $table->add('header', rcube::Q($part->mimetype));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('size')).':');\n    $table->add('header', rcube::Q($RCMAIL->message_part_size($part)));\n\n    return $table->show($attrib);\n}\n\n/**\n * Attachment preview frame\n */\nfunction rcmail_message_part_frame($attrib)\n{\n    global $MESSAGE, $RCMAIL;\n\n    $part = $MESSAGE->mime_parts[asciiwords(rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC))];\n    $ctype_primary = strtolower($part->ctype_primary);\n\n    $attrib['src'] = './?' . str_replace('_frame=', ($ctype_primary=='text' ? '_embed=' : '_preload='), $_SERVER['QUERY_STRING']);\n\n    $RCMAIL->output->add_gui_object('messagepartframe', $attrib['id']);\n\n    return html::iframe($attrib);\n}\n"], "fixing_code": ["CHANGELOG Roundcube Webmail\n===========================\n\n- Fix regression where some message attachments could be missing on edit/forward (#1490608)\n- Fix regression in displaying contents of message/rfc822 parts (#1490606)\n- Fix handling of message/rfc822 attachments on replies and forwards (#1490607)\n- Fix PDF support detection in Firefox > 19 (#1490610)\n- Fix path traversal vulnerability in setting a skin (#1490620)\n- Fix so drag-n-drop of text (e.g. recipient addresses) on compose page actually works (#1490619)\n- Fix .htaccess rewrite rules to not block .well-known URIs (#1490615)\n- Fix mail view scaling on iOS (#1490551)\n- Fix PHP7 warning \"session_start(): Session callback expects true/false return value\" (#1490624)\n- Fix XSS issue in SVG images handling (#1490625)\n\nRELEASE 1.2-beta\n----------------\n- Update TinyMCE to version 4.2\n- Remove backward compatibility \"layer\" of bc.php (#1490534)\n- Add possibility to define date format in write operations for ldap attributes (#1488741)\n- Display attachment size in compose (#1484774)\n- Added possibility to drag-n-drop attachments from mail preview to compose window\n- Implemented mail messages searching with predefined date interval\n- PGP encryption support via Mailvelope integration\n- PGP encryption support via Enigma plugin\n- PHP7 compatibility fixes (#1490416)\n- Security: Added brute-force attack prevention via login rate limit (#1490566)\n- Security: Added options to validate username/password on logon (#1490500)\n- Security: Improve randomness of security tokens (#1490529)\n- Security: Use random security tokens instead of hashes based on encryption key (#1490404)\n- Security: Improved encrypt/decrypt methods with option to choose the cipher_method (#1489719)\n- Make optional adding of standard signature separator - sig_separator (#1487768)\n- Optimize folder_size() on Cyrus IMAP by using special folder annotation (#1490514)\n- Make optional hidding of folders with name starting with a dot - imap_skip_hidden_folders (#1490468)\n- Add option to enable HTML editor always, except when replying to plain text messages (#1489365)\n- Emoticons: Added option to switch on/off emoticons in compose editor (#1485732)\n- Emoticons: Added option to switch on/off emoticons in plain text messages\n- Emoticons: All emoticons-related functionality is handled by the plugin now\n- Installer: Add button to save generated config file in system temp directory (#1488149)\n- Remove common subject prefixes Re:, Re[x]:, Re-x: on reply (#1490497)\n- Added GSSAPI/Kerberos authentication plugin - krb_authentication\n- Password: Allow temporarily disabling the plugin functionality with a notice\n- Require Mbstring and OpenSSL extensions (#1490415)\n- Add --config and --type options to moduserprefs.sh script (#1490051)\n- Implemented memcache_debug and apc_debug options\n- Installer: Remove system() function use (#1490139)\n- Password plugin: Added 'kpasswd' driver by Peter Allgeyer\n- Add initdb.sh to create database from initial.sql script with prefix support (#1490188)\n- Plugin API: Added disabled_plugins an disabled_buttons options in html_editor hook\n- Plugin API: Added html2text hook\n- Plugin API: Added message_part_body hook\n- Plugin API: Added message_ready hook\n- Plugin API: Add special onload() method to execute plugin actions before startup (session and GUI initialization)\n- Implemented UI element to jump to specified page of the messages list (#1485235)\n- Fix searching of contacts to allow remote images for known senders (#1490504)\n- Fix bug where clicking date column with 'arrival' sorting would switch to sorting by 'date' (#1490126)\n- Fix bug where message content could overlap attachments list in Larry skin (#1490479)\n- Fix so microseconds macro (u) in log_date_format works (#1490446)\n- Fix so unrecognized TNEF attachments are displayed on the list of attachments (#1490351)\n- Fix so database_attachments::cleanup() does not remove attachments from other sessions (#1490542)\n- Fix responses list update issue after response name change (#1490555)\n- Fix bug where message preview was unintentionally reset on check-recent action (#1490563)\n- Fix bug where HTML messages with invalid/excessive css styles couldn't be displayed (#1490539)\n- Fix redundant blank lines when using HTML and top posting (#1490576)\n- Fix redundant blank lines on start of text after html to text conversion (#1490577)\n- Fix HTML sanitizer to skip <!-- node type X --> in output (#1490583)\n- Fix invalid LDAP query in ACL user autocompletion (#1490591)\n\nRELEASE 1.1.3\n-------------\n- Fix closing of nested menus (#1490443)\n- Fix so E_DEPRECATED errors from PEAR libs are ignored by error_reporting change (#1490281)\n- Fix compatibility with PHP 5.3 in rcube_ldap class (#1490424)\n- Get rid of Mail_mimeDecode package dependency (#1490416)\n- Fix \"Importing...\" message does not hide on error (#1490422)\n- Fix Compose action in addressbook for results from multiple addressbooks (#1490413)\n- Fix bug where some messages in multi-folder search couldn't be viewed/printed/downloaded (#1490426)\n- Fix unintentional messages list page change on page switch in compose addressbook (#1490427)\n- Fix race-condition in saving user preferences and loading plugin config (#1490431)\n- Fix so plain text signature field uses monospace font (#1490435)\n- Fix so links with href == content aren't added to links list on html to text conversion (#1490434)\n- Fix handling of non-break spaces in html to text conversion (#1490436)\n- Fix self-reply detection issues (#1490439)\n- Fix multi-folder search result sorting by arrival date (#1490450)\n- Fix so *-request@ addresses in Sender: header are also ignored on reply-all (#1490452)\n- Update to TinyMCE 4.1.10 (#1490405)\n- Fix draft removal after a message is sent and storing sent message is disabled (#1490467)\n- Fix so imap folder attribute comparisons are case-insensitive (#1490466)\n- Fix bug where new messages weren't added to the list in search mode\n- Fix wrong positioning of message list header on page scroll in Webkit browsers (#1490035)\n- Fix some javascript errors in rare situations (#1490441)\n- Fix error when using back button after sending an email (#1490009)\n- Fix removing signature when switching to identity with an empty sig in HTML mode (#1490470)\n- Disable links list generation on html-to-text conversion of identities or composed message (#1490437)\n- Fix \"washing\" of style elements wrapped into many lines\n- Fix so input field (e.g. search box) does not loose focus on list load (#1490455)\n- Fix so css of one html part does not apply to other text parts on message display (#1490505)\n- Fix XSS issue in drag-n-drop file uploads [CVE-2015-8105] (#1490530)\n- Fix handling of plus character in mailto: links (#1490510)\n- Fix so adding CC/BCC recipients from the sidebar unhides compose form fields in Classic skin (#1490472)\n- Fix so gc.sh script removes also expired sessions from sql database (#1490512)\n- Fix support for Mozilla-based browsers, e.g. Pale Moon (#1490517)\n- Fix various issues with Turkish (and similar) locales (#1490519)\n- Fix so In-Reply-To header is set also for MDN receipts (#1490523)\n- Fix missing HTTP_X_FORWARDED_FOR address in generated Received header\n- Fix issue where Content-Length of some attachments could be set to wrong value causing browser errors (#1490482)\n\nRELEASE 1.1.2\n-------------\n- Add new plugin hook 'identity_create_after' providing the ID of the inserted identity (#1490358)\n- Add option to place signature at bottom of the quoted text even in top-posting mode [sig_below]\n- Fix handling of %-encoded entities in mailto: URLs (#1490346)\n- Fix zipped messages downloads after selecting all messages in a folder (#1490339)\n- Fix vpopmaild driver of password plugin\n- Fix PHP warning: Non-static method PEAR::setErrorHandling() should not be called statically (#1490343)\n- Fix tables listing routine on mysql and postgres so it skips system or other database tables and views (#1490337)\n- Fix message list header in classic skin on window resize in Internet Explorer (#1490213)\n- Fix so text/calendar parts are listed as attachments even if not marked as such (#1490325)\n- Fix lack of signature separator for plain text signatures in html mode (#1490352)\n- Fix font artifact in Google Chrome on Windows (#1490353)\n- Fix bug where forced extwin page reload could exit from the extwin mode (#1490350)\n- Fix bug where some unrelated attachments in multipart/related message were not listed (#1490355)\n- Fix mouseup event handling when dragging a list record (#1490359)\n- Fix bug where preview_pane setting wasn't always saved into user preferences (#1490362)\n- Fix bug where messages count was not updated after message move/delete with skip_deleted=false (#1490372)\n- Fix security issue in contact photo handling (#1490379)\n- Fix possible memcache/apc cache data consistency issues (#1490390)\n- Fix bug where imap_conn_options were ignored in IMAP connection test (#1490392)\n- Fix bug where some files could have \"executable\" extension when stored in temp folder (#1490377)\n- Fix attached file path unsetting in database_attachments plugin (#1490393)\n- Fix issues when using moduserprefs.sh without --user argument (#1490399)\n- Fix potential info disclosure issue by protecting directory access (#1490378)\n- Fix blank image in html_signature when saving identity changes (#1490412)\n- Installer: Use openssl_random_pseudo_bytes() (if available) to generate des_key (#1490402)\n- Fix XSS vulnerability in _mbox argument handling (#1490417)\n\nRELEASE 1.1.1\n-------------\n- ACL: Allow other plugins to adjust the list of permissions and groups to edit\n- Add possibility to print contact information (of a single contact)\n- Add possibility to configure max_allowed_packet value for all database engines (#1490283)\n- Improved handling of storage errors after message is sent\n- Update to TinyMCE 4.1.9\n- Unified request* event arguments handling, added support for _unlock and _action parameters\n- Security: Generate random hash for the per-user local storage prefix (#1490279)\n- Fix refreshing of drafts list when sending a message which was saved in meantime (#1490238)\n- Fix saving/sending emoticon images when assets_dir is set\n- Fix PHP fatal error when visiting Vacation interface and there's no sieve script yet (#1490292)\n- Fix setting max packet size for DB caches and check packet size also in shared cache\n- Fix needless security warning on BMP attachments display (#1490282)\n- Fix handling of some improper constructs in format=flowed text as per the RFC3676[4.5] (#1490284)\n- Fix performance of rcube_db_mysql::get_variable()\n- Fix missing or not up-to-date CATEGORIES entry in vCard export (#1490277)\n- Fix fatal errors on systems without mbstring extension or mb_regex_encoding() function (#1490280)\n- Fix cursor position on reply below the quote in HTML mode (#1490263)\n- Fix so \"over quota\" errors are displayed also in message compose page\n- Fix duplicate entries supression in autocomplete result (#1490290)\n- Fix \"Non-static method PEAR::isError() should not be called statically\" errors (#1490281)\n- Fix parsing invalid HTML messages with BOM after <!DOCTYPE> (#1490291)\n- Fix duplicate entry on timezones list in rcube_config::timezone_name_from_abbr() (#1490293)\n- Fix so localized folder name is displayed in multi-folder search result (#1490243)\n- Fix javascript error after creating a folder which is a subfolder of another one (#1490297)\n- Fix bug where subject of sent/saved message was removed if mbstring wasn't installed (#1490295)\n- Fix missing vcard_attachment icon on messages list (#1490303)\n- Fix storing signatures with big images in MySQL database (#1490306)\n- Fix Opera browser detection in javascript (#1490307)\n- Fix so search filter, scope and fields are reset on folder change\n- Fix rows count when messages search fails (#1490266)\n- Fix bug where spellchecking in HTML editor do not work after switching editor type more than once (#1490311)\n- Fix bug where TinyMCE area height was too small on slow network connection (#1490310)\n- Fix backtick character handling in sql queries (#1490312)\n- Fix redirect URL for attachments loaded in an iframe when behind a proxy (#1490191)\n- Fix menu container references to point to the actual <ul> element (#1490313)\n- Fix javascripts errors in IE8 - lack of Event.which, focusing a hidden element (#1490318)\n\nRELEASE 1.1.0\n-------------\n- Make SMTP error log more verbose - include server response and error code\n- Fix download options menu (added by zipdownload plugin) in classic skin (#1490228)\n- Fix blocked.gif image usage with assets_dir set\n- Fix bug where max_group_members was ignored when adding a new contact (#1490214)\n- Hide MDN and DSN options in compose if disabled by admin (#1490221)\n- Fix checks based on window.ActiveXObject in IE > 10\n- Fix XSS issue in style attribute handling [CVE-2015-1433] (#1490227)\n- Fix bug where Drafts list wasn't updated on draft-save action in new window (#1490225)\n- Fix so \"set as default\" option is hidden if identities_level > 1 (#1490226)\n- Fix bug where search was reset after returning from compose visited for reply\n- Fix javascript error in \"IE 8.0/Tablet PC\" browser (#1490210)\n- Fix bug where Reply-To address was ignored on reply to messages sent by self (#1490233)\n- Fix bug where empty fieldmap config entries caused empty results of ldap search (#1490229)\n- Fix bug where drafts list wasn't refreshed after draft message was sent from another window (#1490238)\n- Fix keyboard navigation and css in datepicker widget across many Firefox versions\n- Fix false warning when opening attached text/plain files (#1490241)\n- Fix bug where signature could have been inserted twice after plain-to-html switch (#1490239)\n- Fix security issue in DBMail driver of password plugin (#1490261)\n- Enable FollowSymLinks option in .htaccess file which is required by rewrite rules (#1490255)\n- Fix so JSON.parse() errors on localStorage items are ignored (#1490249)\n\nRELEASE 1.1-rc\n--------------\n- Update jQuery to version 2.1.3\n- Allow to override any config option through env variables\n- Improve system security by using optional special URL with security token - use_secure_urls\n- Allow to define separate server/path for image/js/css files - assets_url/assets_dir\n- Sync vendor folder if exists in source package (#1490145)\n- Avoid useless reloading list when resetting search with active filter (#1490057)\n- Fix invalid folder selection if clicked while busy (#1490158)\n- Fix import of multiple contact email addresses from Outlook-csv format (#1490169)\n- Fix drag-n-drop to folders expanded while dragging (#1490157)\n- Fix import of multiple contact groups from Google-csv format (#1490159)\n- Fix import of contacts with multiple email addresses from Google-csv format (#1490178)\n- Fix bugs where CSRF attacks were still possible on some requests [CVE-2014-9587]\n- Fix some rcube_utils::anytodatetime() corner cases with timezone mismatches (#1490163)\n- Improve move-to and contact-export button in classic skin (#1490166)\n- Fix wrong icon for download button in classic skin\n- Fix bug where sent message was saved in Sent folder even if disabled by user (#1490208)\n\nRELEASE 1.1-beta\n----------------\n- Fix skin path handling in plugin context (#1488967)\n- Prevent memory exhaustion on image resizing with GD on Windows (#1489937)\n- Add plugin hook for database table name lookups as requested in #1489837\n- Added Oracle database support\n- Support contacts import in GMail CSV format\n- Added namespace filter in Folder Manager\n- Added folder searching in Folder Manager\n- Fix restoring draft messages from localStorage if editor mode differs (#1490016)\n- Added config option/user preference to disable saving messages in localStorage (#1489979)\n- Added config option 'imap_log_session' to enable Roundcube <-> IMAP session ID logging\n- Added config option 'log_session_id' to control the lengh of the session identifer in logs\n- Implemented 'storage_connected' API hook after successful IMAP login (#1490025)\n- Intergrate Net_LDAP3 and rcube_ldap_generic classes\n- Add option (disabled_actions) to disable UI elements/actions (#1489638)\n- Support password encryption using openssl extension (#1489989)\n- Create/rename groups in UI dialogs (#1489951)\n- Added 'contact_search_name' option to define autocompletion entry format\n- Display quota information for current folder not INBOX only (#1487993)\n- Support images in HTML signatures (#1488676)\n- Display full quota information in popup (#1485769, #1486604)\n- Mail compose: Selecting contact inserts recipient to previously focused input - to/cc/bcc accordingly (#1489684)\n- Close \"no subject\" prompt with Enter key (#1489580)\n- Password: Add option to force new users to change their password (#1486884)\n- Improve support for screen readers and assistive technology using WCAG 2.0 and WAI ARIA standards\n- Enable basic keyboard navigation throughout the UI (#1487845)\n- Select/scroll to previously selected message when returning from message page (#1489023)\n- Display a warning if popup window was blocked (#1489618)\n- Remove (was: ...) from message subject on reply (#1489375)\n- Update to TinyMCE 4.1 (#1489057)\n- Enable autolink plugin in TinyMCE (#1488845)\n- Support image operations with Imagick extension (#1489734)\n- Support upload progress with session.upload_progress and PECL uploadprogress module (#1488702)\n- Make identity name field optional (#1489510)\n- Utility script to remove user records from the local database\n- Plugin API: Added message_saved hook (#1489752)\n- Plugin API: Added imap_search_before hook\n- Support messages import from zip archives\n- Zipdownload: Added mbox format support (#1486069)\n- Drop support for IE6, move IE7/IE8 support to legacy_browser plugin\n- Update to jQuery-2.1.1\n- Search across multiple folders (#1485234)\n- Improve UI integration of ACL settings\n- Drop support for PHP < 5.3.7\n- Set In-Reply-To and References for forwarded messages (#1489593)\n- Removed redundant default_folders config option (#1489737)\n- Implemented IMAP SPECIAL-USE extension support [RFC6154] (#1487830)\n- Optimize some framed pages content for better performance (#1489792)\n- Improve text messages display and conversion to HTML (#1488937)\n- Don't remove links when html signature is converted to text (#1489621)\n- Fix page title when using search filter (#1490023)\n- Fix mbox files import\n- Fix some character sets detection (#1490135)\n- Fix so attachment charset is set in headers of forward/draft message (#1490109)\n- Fix bug where wrong charset could be used for text attachment preview page (#1490106)\n\nRELEASE 1.0.5\n-------------\n- Fix wrong icon for download button in classic skin\n- Fix checks based on window.ActiveXObject in IE > 10\n- Fix XSS issue in style attribute handling (#1490227)\n- Fix bug where Drafts list wasn't updated on draft-save action in new window (#1490225)\n- Fix so \"set as default\" option is hidden if identities_level > 1 (#1490226)\n- Fix javascript error in \"IE 8.0/Tablet PC\" browser (#1490210)\n- Fix bug where empty fieldmap config entries caused empty results of ldap search (#1490229)\n- Fix bug where sent message was saved in Sent folder even if disabled by user (#1490208)\n\nRELEASE 1.0.4\n-------------\n- Disable TinyMCE contextmenu plugin as there are more cons than pros in using it (#1490118)\n- Fix bug where show_real_foldernames setting wasn't honored on compose page (#1490153)\n- Fix issue where Archive folder wasn't protected in Folder Manager (#1490154)\n- Fix compatibility with PHP 5.2. in rcube_imap_generic (#1490115)\n- Fix setting flags on servers with no PERMANENTFLAGS response (#1490087)\n- Fix regression in SHAA password generation in ldap driver of password plugin (#1490094)\n- Fix displaying of HTML messages with absolutely positioned elements in Larry skin (#1490103)\n- Fix font style display issue in HTML messages with styled <span> elements (#1490101)\n- Fix download of attachments that are part of TNEF message (#1490091)\n- Fix handling of uuencoded messages if messages_cache is enabled (#1490108)\n- Fix handling of base64-encoded attachments with extra spaces (#1490111)\n- Fix handling of UNKNOWN-CTE response, try do decode content client-side (#1490046)\n- Fix bug where creating subfolders in shared folders wasn't possible without ACL extension (#1490113)\n- Fix reply scrolling issue with text mode and start message below the quote (#1490114)\n- Fix possible issues in skin/skin_path config handling (#1490125)\n- Fix lack of delimiter for recipient addresses in smtp_log (#1490150)\n- Fix generation of Blowfish-based password hashes (#1490184)\n- Fix bugs where CSRF attacks were still possible on some requests [CVE-2014-9587]\n\nRELEASE 1.0.3\n-------------\n- Initialize HTML editor before restoring a message from localStorage (#1490016)\n- Add 'sig_max_lines' config option to default config file (#1490071)\n- Add config option to specify IMAP connection socket parameters - imap_conn_options (#1489948)\n- Add option to set default message list mode - default_list_mode (#1487312)\n- Enable contextmenu plugin for TinyMCE editor (#1487014)\n- Fix insert-signature command in external compose window if opened from inline compose screen (#1490074)\n- Fix some mime-type to extension mapping checks in Installer (#1489983)\n- Fix errors when using localStorage in Safari's private browsing mode (#1489996)\n- Fix bug where $Forwarded flag was being set even if server didn't support it (#1490000)\n- Fix various iCloud vCard issues, added fallback for external photos (#1489993)\n- Fix invalid Content-Type header when send_format_flowed=false (#1489992)\n- Fix errors when adding/updating contacts in active search (#1490015)\n- Fix incorrect thumbnail rotation with GD and exif orientation data (#1490029)\n- Fix contacts list update after adding/deleting/moving a contact (#1490028, #1490033)\n- Fix handling of email addresses with quoted domain part (#1490040)\n- Fix comm_path update on task switch (#1490041)\n- Fix error in MSSQL update script 2013061000.sql (#1490061)\n- Fix validation of email addresses with IDNA domains (#1490067)\n\nRELEASE 1.0.2\n-------------\n- Fix storing unsaved drafts in localStorage (#1489818)\n- Add configurable LDAP_OPT_DEREF option (#1489864)\n- Fix so when switching editor mode original version of signature is used (#1488849)\n- Fix unintentional draft autosave request if autosave is disabled (#1489882)\n- Fix malformed References: header in send/saved mail (#1489891)\n- Fix handling unicode characters in links (#1489898)\n- Fix incorrect handling of HTML comments in messages sanitization code (#1489904)\n- Fix so current page is reset on list-mode change (#1489907)\n- Fix so responses menu hides on click in classic skin (#1489915)\n- Fix unintentional line-height style modification in HTML messages (#1489917)\n- Fix broken normalize_string(), add support for ISO-8859-2 (#1489918)\n- Support csv contacts import in German localization (#1489920)\n- Fix so message list and counters are updated when a message is opened in new window (#1489919)\n- Fix malformed recipient name when composing a message by clicking on mailto link (#1489942)\n- Fix list reload after sending message in another window (#1489931)\n- Fix so address format errors are ignored when saving a draft (#1489954)\n- Fix incorrect label translation in return receipt (#1489963)\n- Fix security issue in delete-response action - allow only ajax request\n- Fix Delete button state after deleting identity/response (#1489972)\n- Fix bug where contacts with no email address were listed on compose addressbook (#1489970)\n- Fix images import from various vCard formats (#1489977)\n- Fix sorting messages by size on servers without SORT capability (#1489981)\n\nRELEASE 1.0.1\n-------------\n- Support 'error' and 'body_file' return attribs in 'message_before_send' hook (#1489595)\n- Apply user-specific replacements to group's base_dn property (#1489779)\n- Fix missing email address when importing contacts from outlook csv (#1489830)\n- Fix bug where \"With attachment\" option in search filter wasn't selected after return from mail view (#1489774)\n- Fix \"washing\" of unicoded style attributes (#1489777)\n- Fix unintentional redirect from compose page in Webkit browsers (#1489789)\n- Fix messages index cache update under some conditions (e.g. proxy) (#1489756)\n- Fix lack of translation of special folders in some configurations (#1489799)\n- Fix XSS issue in plain text spellchecker (#1489806)\n- Fix invalid page title for some folders (1489804)\n- Fix redundant alert message on over-size uploads (#1489817)\n- Fix next message display after removing a message (#1489800)\n- Fix missing Mail-Followup-To header in sent mail (#1489829)\n- Fix error when spell-checking an empty text (#1489831)\n- Avoid popupmenus being closed when scrollbar is clicked (#1489832)\n- Add proxy_whitelist configuration option (#1489729)\n- Fix identities_level=4 handling in new_user_dialog plugin (#1489840)\n- Fix various db_prefix issues (#1489839)\n- Fix too small length of users.preferences column data type on MySQL\n- Fix redundant warning when switching from html to text in empty editor (#1489819)\n- Fix invalid host validation on login (#1489841)\n- Fix IMAP connection test in installer so it is aware of imap_auth_type (#1489746)\n\nRELEASE 1.0.0\n-------------\n- Added toolbar button to move message in message view\n- Fix style of disabled protocol handler link on IE (#1489569)\n- Fix message import dialog when no file is selected (#1489685)\n- Fix opening compose screen in new window after saving as draft (#1489643)\n- Fix directories check in Installer on Windows (#1489576)\n- Fix issue when default_addressbook option is set to integer value (#1489407)\n- Fix Opera > 15 detection (#1489562)\n- Fix security issue in DomainFactory driver of Password plugin\n- Fix invalid X-Draft-Info on forwarded message draft (#1489587)\n- Fix regression in handling of 'attachments' result in message_compose hook (#1489627)\n- Fix issue where msgexport.sh printed the message to STDOUT instead of a file (#1489634)\n- Fix fatal error in database_attachments plugin under some conditions (#1489726)\n\nRELEASE 1.0-rc\n--------------\n- Small CSS fix with message notice boxes in Larry skin (#1489497)\n- Include groups in contacts search on mail compose (#1489082)\n- Add mime-type mapping for .7z files (#1489512)\n- Invoke update scripts with php to circumvent execution restrictions (#1489322)\n- Fix drag & drop message/contact moving on touch device (#1489431)\n- Fix canned responses in HTML mode (#1489536)\n- Check/create default folders on every login not only the first (#1489423)\n- Update to jQuery-1.11.0 and jQuery-UI-1.9.2\n- Support SMTP socket context options via new config option 'smtp_conn_options'\n- Fix compatibility with PHP 5.2 in html.php file (#1489514)\n- Remove expand/collapse with plus/minus keys (on numeric keypad) (#1489513)\n- Fix issue where filesystem path was added to all-attachments (zip) file (#1489507)\n- Fix case-sensitivity of email addresses handling on compose (#1485499)\n- Don't alter Message-ID of a draft when sending (#1489409)\n- Fix issue where deprecated syntax for HTML lists was not handled properly (#1488768)\n- Display different icons when Trash folder is empty or full (#1485775)\n- Remember last position of more headers switch (#1488323)\n- Fix so message flags modified by another client are applied on the list on refresh (#1485186)\n- Fix broken text/* attachments when forwarding/editing a message (#1489426)\n- Improved minified files handling, added css minification (#1486988)\n- Fix handling of X-Forwarded-For header with multiple addresses (#1489481)\n- Fix border issue on folders list in classic skin (#1489473)\n- Implemented menu actions to copy/move messages, added folder-selector widget (#1484086)\n- Fix security rules in .htaccess preventing access to base URL without the ending slash (#1489477)\n- Fix regression where only first new folder was placed in correct place on the list (#1489472)\n- Fix issue where children of selected and collapsed thread were skipped on various actions (#1489457)\n- Fix issue where groups were not deleted when \"Replace entire addressbook\" option on contacts import was used (#1489420)\n- Fix unreliable mimetype tests in Installer (#1489453)\n- Fix performance of listing writeable folders (#1489451)\n\nRELEASE 1.0-beta\n----------------\n- Fix handling of invalid closing tags in HTML messages (#1489446)\n- Set real content-type for file downloads (#1489439)\n- Update TinyMCE to version 3.5.10 (#1489442)\n- Fix keyboard navigation in list widgets (#1489392)\n- Allow plugins to grab the reference of opened windows (#1489413)\n- Larry skin: Improved status message display for better visibility (#1488974)\n- Fix Internet Explorer 11 detection (#1489434)\n- Fix date column width to fit the widest possible date format (#1489368)\n- Move certain user preference options to a collapsed \"advanced\" block (#1488829)\n- Add file type icons for Powerpoint and Open Office presentations (#1489225)\n- Fix operations on folders with trailing spaces in name (#1489419)\n- Improve identity selection based on From: header (#1489378)\n- Fix issue where mails with inline images of the same name contained only the first image multiple times (#1489406)\n- Use left/right arrow keys to collapse/expand thread and spacebar to select a row, change Ctrl key behavior (#1489392)\n- Fix an issue where using arrow keys to go up a list can result in selected message being under headers (#1489403)\n- Fix an issue where Home/End keys don't focus list row properly, don't scrollTo properly (#1489396)\n- Add an option to disable smart Reply-List behaviour - reply_all_mode (#1488734)\n- Fix an issue where pressing minus key on contacts list was hiding list records (#1489393)\n- Fix an issue where shift + arrow-up key wasn't selecting all messages in collapsed thread (#1489397)\n- Added icon for priority column in messages list header (#1489234)\n- New feature \"Canned Responses\" to save and recall boilerplate text snippets\n- Fix HTML part detection when encapsulated inside multipart/signed (#1489372)\n- Add spellchecker backend for the After the Deadline service\n- Replace markdown-style [1] link indexes in plain text email bodies\n- Improved mailto: link arguments handling (#1489363)\n- Use DOMDocument LIBXML_PARSEHUGE and LIBXML_COMPACT options if possible (#1489302)\n- Support HTTP_HOST, SERVER_NAME and SERVER_ADDR values in include_host_config feature\n- Make default font size for HTML messages configurable (request #118)\n- Fix XSS issue in addressbook group name field [CVE-2013-5646] (#1489333)\n- After message is sent refresh messages list of replied message folder (#1489249)\n- Add option force specified domain in user login - username_domain_forced (#1489264)\n- Add option to import Vcards with group assignments\n- Save groups membership in Vcard export (#1488509)\n- Workaround broken PHP function timezone_name_from_abbr (#1489261)\n- Make cached message size limit configurable - messages_cache_threshold (#1489317)\n- Log also failed logins to userlogins log\n- Add temp_dir_ttl configuration option (#1489304)\n- Allow setting INBOX as Sent folder (#1489219)\n- Fix replacement variables in user-specific base_dn in some LDAP requests (#1489279)\n- Fix image scaling issues when image has only one dimension smaller than the limit (#1489274)\n- Fix issue where uploaded photo was lost when contact form did not validate (#1489274)\n- Move identity selection based on non-standard headers into (new) identity_select plugin (#1488553)\n- Fix downloading binary files with (wrong) text/* content-type (#1489267)\n- Respect HTTP_X_FORWARDED_FOR and HTTP_X_REAL_IP variables for session IP check\n- Simplified configuration by merging it into one file + defaults (#1487311)\n- Make message list header stay on top when scrolling (#1295420)\n- Add support for 'enchant' spellcheck engine\n- Check filetype detection in installer and update script (#1489193)\n- Fix folder names truncation in Classic skin (#1489220)\n- Make possible to disable some (broken) IMAP extensions with imap_disable_caps option (#1489184)\n- Contacts drag-n-drop default action is to move contacts (#1488751)\n- Added possibility to choose to move or copy contacts from drag-n-drop menu (#1488751)\n- Fix Close link and remove About link on error pages (#1489109)\n- Improved/unified attachment preview screen, added print button\n- Fix lack of space between searchfiler and quicksearchbar in Larry skin (#1489158)\n- Cache LDAP's user_specific search and use vlv for better performance (#1489186)\n- LDAP: auto-detect and use VLV indices for all search operations\n- LDAP: additional group configuration options for  address books\n- LDAP: separated address book implementation from a generic LDAP wrapper class\n- Allow address books to browse a multi-level group hierarchy in the contacts list\n- Fix session issues when local and database time differs (#1486132)\n- Fix thread cache syncronization/validation (#1489028)\n- Added feature to import messages to the currently selected folder\n- Add option show_real_foldernames to disable localization of special folders\n- Fix database cache expunge issues (#1489149)\n- Fix date format issues on MS SQL Server (#1488918)\n- Add imap_cache_ttl option to configure TTL of imap_cache\n- Make LDAP cache engine configurable via ldap_cache and ldap_cache_ttl options\n- Fix \"duplicate entry\" errors on inserts to imap cache tables (#1489146)\n- Improved handling of Reply-To/Bcc addresses of identity in compose form (#1489016)\n- Added user preference to open all popups as standard windows\n- Implemented shared cache (rcube_cache_shared)\n- Change Reply-All button label/title when mailing list is detected (#1488938)\n- Fix SMTP connection using IPv6 address in smtp_server option (#1489024)\n- Added attachment_reminder plugin\n- Make PHP code eval() free, use create_function()\n- Add option to display email address together with a name in mail preview (#1488732)\n- Support CSV import from Atmail (#1489045)\n- Add db_prefix configuration option in place of db_table_*/db_sequence_* options\n- Make possible to use db_prefix for schema initialization in Installer (#1489067)\n- Fix updatedb.sh script so it recognizes also table prefix for external DDL files\n- Fix parsing invalid date string (#1489035)\n- Add \"with attachment\" option to messages list filter (#1485382)\n- Call resize handler in intervals to prevent lags and double onresize calls in Chrome (#1489005)\n- Add rel=\"noreferrer\" for links in displayed messages (#1484686)\n- Add ability to toggle between HTML and text while viewing a message (#1486939)\n- Remove \"HTML message\" from attachments list while viewing a message in text mode (#1486939)\n- Support IMAP MOVE extension [RFC 6851]\n- Add attachment menu with Open and Download options (#1488975)\n- Display user-friendly message on IMAP \"over quota\" errors (#1484164)\n- Extended archive plugin with user-configurable options to store messages into subfolders\n- Fix export of selected contacts from search result (#1488905)\n- Feature to export only selected contacts from addressbook (by Phil Weir)\n\nRELEASE 0.9.5\n-------------\n- Fix failing vCard import when email address field contains spaces (#1489386)\n- Fix default spell-check configuration after Google suspended their spell service\n- Fix vulnerability in handling _session argument of utils/save-prefs [CVE-2013-6172] (#1489382)\n- Fix iframe onload for upload errors handling (#1489379)\n- Fix address matching in Return-Path header on identity selection (#1489374)\n- Fix text wrapping issue with long unwrappable lines (#1489371)\n- Fixed issues where HTML comments inside style tag would hang Internet Explorer\n- Hide Delivery Status Notification option when smtp_server is unset (#1489336)\n- Display full attachment name using title attribute when name is too long to display (#1489320)\n- Fix attachment icon issue when rare font/language is used (#1489326)\n- Fix expanded thread root message styling after refreshing messages list (#1489327)\n- Fix issue where From address was removed from Cc and Bcc fields when editing a draft (#1489319)\n- Fix error_reporting directive check (#1489323)\n- Fix de_DE localization of \"About\" label in Help plugin (#1489325)\n\nRELEASE 0.9.4\n-------------\n- Make identities matching case insensitive (#1485480)\n- Fix issue where too big message data was stored in cache causing sql errors (#1489316)\n- Fix iframe scrollbars on webkit desktop browsers (#1489306)\n- Fix issue where legacy config was overriden by default config (#1489288)\n- Fix newmail_notifier issue where favicon wasn't changed back to default (#1489313)\n- Fix setting of Junk and NonJunk flags by markasjunk plugin (#1489285)\n- Fix lack of Reply-To address in header of forwarded message body (#1489298)\n- Fix bugs when invoking contact creation form when read-only addressbook is selected (#1489296)\n- Fix identity selection on reply (#1489291)\n- Fix so additional headers are added to all messages sent (#1489284)\n- Fix display issue after moving folder in Folder Manager (#1489293)\n- Fix handling of non-default date formats (#1489294)\n- Fix unquoted path in PREG expression on Windows (#1489290)\n- Fix wrong close tag in /template/mail.html (#1489295)\n\nRELEASE 0.9.3\n-------------\n- Fix setting refresh_interval to \"Never\" in Preferences (#1489286)\n- Fixed iframe scrolling on touch devices\n- Optimized message list for touch devices\n- Fix purge action in folder manager (#1489280)\n- Fix base URL resolving on attribute values with no quotes (#1489275)\n- Fix wrong handling of links with '|' character (#1489276)\n- Fix colorspace issue on image conversion using ImageMagick (#1489270)\n- Fix XSS vulnerability when editing a message \"as new\" or draft [CVE-2013-5645] (#1489251)\n- Fix XSS vulnerability when saving HTML signatures [CVE-2013-5645] (#1489251)\n- Fix rewrite rule in .htaccess (#1489240)\n- Fix detecting Turkish language in ISO-8859-9 encoding (#1489252)\n- Fix identity-selection using Return-Path headers (#1489241)\n- Fix parsing of links with ... in URL (#1489192)\n- Fix compose priority selector when opening in new window (#1489257)\n- Fix bug where signature wasn't changed on identity selection when editing a draft (#1489229)\n- Fix IMAP SETMETADATA parameters quoting (#1489231)\n- Fix \"could not load message\" error on valid empty message body (#1489228)\n- Fix handling of message/rfc822 attachments on message forward and edit (#1489214)\n- Fix parsing of square bracket characters in IMAP response strings (#1489223)\n- Don't clear References and in-Reply-To when a message is \"edited as new\" (#1489216)\n- Fix messages list sorting with THREAD=REFS\n- Remove deprecated (in PHP 5.5) PREG /e modifier usage (#1489174)\n- Fix empty messages list when register_globals is enabled (#1489157)\n- Fix so valid and set date.timezone is not required by installer checks (#1489180)\n- Canonize boolean ini_get() results (#1489189)\n- Fix so install do not fail when one of DB driver checks fails but other drivers exist (#1489178)\n- Fix so exported vCard specifies encoding in v3-compatible format (#1489183)\n\nRELEASE 0.9.2\n-------------\n- Fix image thumbnails display in print mode (#1489134)\n- Fix height of message headers block (#1489108)\n- Fix timeout issue on drag&drop uploads (#1489170)\n- Fix default sorting of threaded list when THREAD=REFS isn't supported\n- Fix list mode switch to 'List' after saving list settings in Larry skin (#1489164)\n- Fix error when there's no writeable addressbook source (#1489162)\n- Fix zipdownload plugin issue with filenames charset (#1489156)\n- Fix so non-inline images aren't skipped on forward (#1489150)\n- Fix \"null\" instead of empty string on messages list in IE10 (#1489145)\n- Fix legacy options handling\n- Fix so bounces addresses in Sender headers are skipped on Reply-All (#1489011)\n- Fix bug where serialized strings were truncated in PDO::quote() (#1489142)\n- Fix displaying messages with invalid self-closing HTML tags (#1489137)\n- Fix PHP warning when responding to a message with many Return-Path headers (#1489136)\n- Fix unintentional compose window resize (#1489114)\n- Fix performance regression in text wrapping function (#1489133)\n- Fix connection to posgtres db using unix socket (#1489132)\n- Fix handling of comma when adding contact from contacts widget (#1489107)\n- Fix bug where a message was opened in both preview pane and new window on double-click (#1489122)\n- Fix fatal error when xdebug.max_nesting_level was exceeded in rcube_washtml (#1489110)\n- Fix PHP warning in html_table::set_row_attribs() in PHP 5.4 (#1489094)\n- Fix invalid option selected in default_font selector when font is unset (#1489112)\n- Fix displaying contact with ID divisible by 100 in sql addressbook (#1489121)\n- Fix browser warnings on PDF plugin detection (#1489118)\n- Fix fatal error when parsing UUencoded messages (#1489119)\n\nRELEASE 0.9.1\n-------------\n- Better German labels for from/to to avoid conflicts with 'sender' (#1489084)\n- Fix problem where security warning was displayed for valid images with image/jpg type (#1489097)\n- Fix handling of invalid email addresses in headers (#1489092)\n- Fix IMAP connection issue with default_socket_timeout < 0 and imap_timeout < 0 (#1489090)\n- Fix various PHP code bugs found using static analysis (#1489086)\n- Fix backslash character handling on vCard import (#1489085)\n- Fix csv import from Thunderbird with French localization (#1489059)\n- Fix messages list focus issue in Opera and Webkit (#1489058)\n- Fix Reply-To header handling in Reply-All action (#1489037)\n- Fix so Sender: address is added to Cc: field on reply to all (#1489011)\n- Fix so addressbook_search_mode works also for group search (#1489079)\n- Fix removal of a contact from a group in LDAP addressbook (#1489081)\n- Inlcude SQL query in the log on SQL error (#1489064)\n- Fix handling untagged responses in IMAP FETCH - \"could not load message\" error (#1489074)\n- Fix very small window size in Chrome (#1488931)\n- Fix list page reset when viewing a message in Larry skin (#1489076)\n- Fix min_refresh_interval handling on preferences save (#1489073)\n- Fix PDF support detection for Firefox PDF.js (#1488972)\n- Fix possible collision in generated thumbnail cache key (#1489069)\n- Fix exit code on bootsrap errors in CLI mode (#1489044)\n- Fix error handling in CLI mode, use STDERR and non-empty exit code (#1489043)\n- Fix error when using check_referer=true\n- Fix incorrect handling of some specific links (#1489060)\n- Fix incorrect handling of leading spaces in text wrapping\n- Fix unintentional messages list jumps on click in Internet Explorer (#1489056)\n- Fix list of required configuration options (#1489055)\n- Fix DB error when creating a new contact and a group is selected (#1489051)\n- Fix handling of deprecated boolean value of reply_mode option (#1489052)\n\nRELEASE 0.9.0\n-------------\n- Fix display of HTML entities in protected folder name (#1489042)\n- Set minimal permissions to temp files (#1488996)\n- Improve content check for embedded images without filename (#1489029)\n- Fix handling of invalid characters in message headers and output (#1489032)\n- Fix selecting collapsed rows on select-all (#1489036)\n- Avoid race-conditions with concurrent attachment uploads (#1488422)\n- Fix possible header duplicates when using additional headers (#1489033)\n- Fix session issues with use_https=true (#1488986)\n- Fix blockquote width in sent mail (#1489031)\n- Fix keyboard events on list widgets in Internet Explorer (#1489025)\n\nRELEASE 0.9-rc2\n---------------\n- Fix security issue in save-pref command\n- Remove sig_above configuration option, use reply_mode only (#1489001)\n- Refresh current folder in opener window after draft save or message sent (#1488997)\n- Fix saving draft just after entering compose window (#1489012)\n- Fix javascript error in IE9 when loading form with placeholders into an iframe (#1489008)\n- Fix handling of some conditional comment tags in HTML message (#1489004)\n- Fix so forward as attachment works if additional attachment is added by message_compose hook (#1489000)\n- Better handling of session errors in ajax requests (#1488960)\n- Fix HTML part detection for some specific message structures (#1488992)\n- Don't show fake address - phishing prevention (#1488981)\n- Fix forward as attachment bug with editormode != 1 (#1488991)\n- Fix LIMIT/OFFSET queries handling on MS SQL Server (#1488984)\n- Fix so task name can really contain all from a-z0-9_- characters (#1488941)\n- Fix javascript errors when working in a page opened with taget=\"_blank\"\n- Mention SQLite database format change in UPGRADING file (#1488983)\n- Increase maxlength to 254 chars for email input fields in addressbook (#1488987)\n- Fix thumbnail size when GD extension is used for image resize (#1488985)\n- Display notice that message is encrypted also for application/pkcs7-mime messages (#1488526)\n\nRELEASE 0.9-rc\n--------------\n- Fix plain text spellchecker incorrect highlighting in non-ASCII text (#1488973)\n- Add workaround for invalid message charset detection by IMAP servers (#1488968)\n- Fix NUL characters in content-type of ms-tnef attachment (#1488964)\n- Fix regression in handling LDAP contact identifiers (#1488959)\n- Updated translations from Transifex\n- Fix buggy error template in a frame (#1488938)\n- Add addressbook widget on compose page in classic skin\n- Add search box to compose address book widget (#1488381)\n- Fix login in case when default_host is an array with one element (#1488928)\n- Use LDAP fallback hosts on connect + bind instead of ldap_connect() only.\n- Add config option for LDAP bind timeout (sets LDAP_OPT_NETWORK_TIMEOUT option)\n- Submit Addressbook advanced search form with Enter key (#1488568)\n- Also block remote images in HTML part view (#1488827)\n- Improved database schema upgrade procedure, added updatedb.sh script\n- Force autocommit mode in mysql database driver (#1488902)\n\nRELEASE 0.9-beta\n----------------\n- Fix searching by date in address book (#1488888)\n- Improve charset detection by prioritizing charset according to user language (#1485669)\n- Fix handling of escaped separator in vCard file (#1488896)\n- Add option to use envelope From address for MDN responses (#1488880)\n- Add possibility to search in message body only (#1488770)\n- Support \"multipart/relative\" as an alias for \"multipart/related\" type (#1488886)\n- Display PGP/MIME signature attachments as \"Digital Signature\" (#1488570)\n- Workaround UW-IMAP bug where hierarchy separator is added to the shared folder name (#1488879)\n- Fix version comparisons with -stable suffix (#1488876)\n- Add unsupported alternative parts to attachments list (#1488870)\n- Add Compose button on message view page (#1488747)\n- Display 'Sender' header in message preview\n- Plugin API: Added message_before_send hook\n- Fix contact copy/add-to-group operations on search result (#1488862)\n- Use matching identity in MDN response (#1488864)\n- Fix handling of signatures on draft edit (#1488798)\n- Fix so compacting of non-empty folder is possible also when messages list is empty (#1488858)\n- Allow forwarding of multiple emails (#1486854)\n- Fix big memory consumption of DB layer (#1488856)\n- Fix broken message/part bodies when FETCH response contains more untagged lines (#1488836)\n- Fix empty email on identities list after identity update (#1488834)\n- Add new identities_level: (4) one identity with possibility to edit only signature\n- Use Delivered-To and Envelope-To headers for identity selection (#1488840, #1488553)\n- Fix XSS vulnerability using Flash files (#1488828)\n- Always save drafts with format=flowed in order to keep original line wraps (#1488799)\n- Select default_addressbook on the list in Address Book (#1488280)\n- Fix so mobile phone has TYPE=CELL in exported vCard (#1488812)\n- Support contacts import from CSV file (#1486399)\n- Improved keep-alive action. Now the interval is based on session_lifetime (#1488507)\n- Added cross-task 'refresh' request for system state updates (#1488507)\n- Renamed config options: keep_alive to refresh_interval, min_keep_alive to min_refresh_interval\n- Fix handling of text/enriched content on message reply/forward/edit\n- Option to display attached images as thumbnails below message body\n- Upgraded to jQuery 1.8.3 and jQuery UI 1.9.1\n- Add config option to automatically generate LDAP attributes for new entries\n- Add user settings to open message view and compose form in new windows (#1485486)\n- Better client-side timezone detection using the jsTimezoneDetect library (#1488725)\n- Add option to disable saving sent mail in Sent folder - no_save_sent_messages (#1488686)\n- Fix handling dont_override with message_sort_col and message_sort_order settings (#1488760)\n- Fix handling of URLs with asterisk characters (#1488759)\n- Remove automatic to-lowercase conversion of usernames (#1488715)\n- Plugin API: Add 'email_list' argument for identities data in user_create hook\n- Integrated zipdownload plugin to download all attachments (#1445509)\n- Fix HTML special characters handling in message list/header display (#1488523)\n- List related text/html part as attachment in plain text mode (#1488677)\n- Use IMAP BINARY (RFC3516) extension to fetch message/part bodies\n- Fix folder creation under public namespace root (#1488665)\n- Fix so \"Edit as new\" on draft creates a new message (#1488687)\n- Fix invalid error message on deleting mail from read only folder (#1488694)\n- Replace data URIs of images (pasted in HTML editor) with inline attachments (#1488502)\n- Remove (too big) min-width on mail screen\n- Added template object 'frame'\n- Add option to enable HTML editor on forwarding (#1488517)\n- Add option to not include original message on reply, rename option top_posting to reply_mode (#1485149)\n- Added session_path config option and unified cookies settings in javascript\n- Added \"Undeleted\" option to messages list filter\n- Rewritten test scripts for PHPUnit\n- Add new DB abstraction layer based on PHP PDO, supporting SQLite3 (#1488332)\n- Removed PEAR::MDB2 package\n- Removed users.alias column, added option ('user_aliases')\n  to use email address from identities as username (#1488581)\n- Removed redundant cache.cache_id column (#1488528)\n- Fix order of attachments in sent mail (#1488423)\n- Fix Shift + delete button does not permanently delete messages (#1488243)\n- Add Content-Length for attachments where possible (#1485478)\n- Fix attachment sizes in message print page and attachment preview page (#1488515)\n- Add mail attachments using drag & drop on HTML5 enabled browsers\n- Add workaround for invalid BODYSTRUCTURE response - parse message with Mail_mimeDecode package (#1485585)\n- Display Tiff as Jpeg in browsers without Tiff support (#1488452)\n- Don't display Pdf/Tiff/Flash attachments inline without browser support (#1488452, #1487929)\n- Add is_escaped attribute for html_select and html_textarea (#1488485)\n- Fix issue where draft auto-save wasn't executed after some inactivity time\n- Add vCard import from multiple files at once (#1488015)\n- Roundcube Framework:\n    Add possibility to replace IMAP driver with custom class\n    Add IMAP auto-connection feature, improving performance with caching enabled\n    Replace imap_init hook with storage_init (with additional 'driver' argument)\n    Improved performance by caching IMAP server's capabilities in session\n    Unified global functions naming (rcube_ prefix)\n    Better classes separation\n    Framework files moved to lib/Roundcube\n\nRELEASE 0.8.5\n-------------\n- Fix #countcontrols issue in IE<=8 when text is very long (#1488890)\n- Fix unwanted horizontal scrollbar in message preview header (#1488866)\n- Add workaround for IE<=8 bug where Content-Disposition:inline was ignored (#1488844)\n- Fix XSS vulnerability in vbscript: and data:text links handling [CVE-2012-6121] (#1488850)\n- Fix absolute positioning in HTML messages (#1488819)\n- Fix cache (in)validation after setting \\Deleted flag\n- Fix keybord events on messages list in opera browser (#1488823)\n- Fix selection of collapsed thread rows (#1488772)\n- Fix wrapping of quoted text with format=flowed (#1488177)\n\nRELEASE 0.8.4\n-------------\n- Fix regression where unintentional page reload was done after request abort (#1488802)\n- Fix XSS vulnerability in handling of text/enriched messages (#1488806)\n- Fix handling of 'media' attribute on linked css (#1488789)\n- Fix excessive LFs at the end of composed message with top_posting=true (#1488797)\n- Fix bug where leading blanks were stripped from quoted lines (#1488795)\n\nRELEASE 0.8.3\n-------------\n- Fix AREA links handling (#1488792)\n- Fix possible HTTP DoS on error in keep-alive requests (#1488782)\n- Fix compatybility with MDB2 2.5.0b4 (#1488779)\n- Fix a bug where saving a message in INBOX wasn't possible\n- Fix HTML part detection in messages with attachments (#1488769)\n- Fix bug where wrong words were highlighted on spell-before-send check\n- Fix scrolling quirk in email preview frame using Opera 12 (#1488763)\n- Fix displaying of multipart/alternative messages with empty parts (#1488750)\n- Fix threaded list sorting on PHP < 5.2.9 (#1488748)\n- Fix Warning: htmlspecialchars(): charset `RCMAIL_CHARSET' not supported warning in Installer (#1488744)\n\nRELEASE 0.8.2\n-------------\n- Fix XSS vulnerability from HTTP User-Agent header (#1488737)\n- Force fonts in compose fields to be all the same (#1488690)\n- Fix handling vCard entries with TEL;TYPE=CELL (#1488728)\n- Fix error where session wasn't updated after folder rename/delete (#1488692)\n- Fix PLAIN authentication for some IMAP servers (#1488674)\n- Fix encoding vCard file when contains PHOTO;ENCODING=b (#1488683)\n- Fix focus issue in IE when selecting message row (#1488620)\n- Add full headers view in message preview window (#1488538)\n- Fix message display page issues - unified with message preview (#1488590, #1488642)\n- Fix displaying all headers when they contain malformed characters (#1488666)\n- Fix decoding of HTML messages with UTF-16 charset specified (#1488654)\n- Fix quota capability detection so it can be overwritten by a plugin (#1488655)\n- Fix identity selection on reply (#1488101)\n- Fix Larry's messages list filter in IE (#1488632)\n- Fix more IE issues by disabling Compat. mode with X-UA-Compatible meta tag (#1488626)\n- Fix setting locales under Solaris - use additional .UTF-8 suffix (#1488628)\n- Fix email address validation for addresses with IP address in domain part\n- Fix Larry skin issues in IE7 compat. mode (#1488618)\n- Fix so subscribed non-existing/non-accessible shared folder can be unsubscribed\n\nRELEASE 0.8.1\n-------------\n- Fix bug where domain name was converted to lower-case even with login_lc=false (#1488593)\n- Fix lower-casing email address on replies (#1488598)\n- Fix line separator in exported messages (#1488603)\n- Fix XSS issue where plain signatures wasn't secured in HTML mode [CVE-2012-4668] (#1488613)\n- Fix XSS issue where href=\"javascript:\" wasn't secured [CVE-2012-3508] (#1488613)\n- Fix impossible to create message with empty plain text part (#1488610)\n- Fix stripped apostrophes when replying in plain text to HTML message (#1488606)\n- Fix inactive Save search option after advanced search (#1488607)\n- Fix Remove from group option is active for contact search result (#1488608)\n- Disable autocapitalization in login form on iPad/iPhone (#1488609)\n- Fix focus on the list when list row is clicked (#1488600)\n- Added separate From and To columns apart from smart From/To column (#1486891)\n- Fix fallback to Larry skin when configured skin isn't available (#1488591)\n- Fix (workaround) delete operations with some versions of memcache (#1488592)\n- Fix (disable) request validation for spell and spell_html actions\n\nRELEASE 0.8.0\n-------------\n- Don't show product version on login screen (can be enabled by config)\n- Renamed old default skin to 'classic'. Larry is the new default skin.\n- Support connections to memcached socket file (#1488577)\n- Enable TinyMCE inlinepopups plugin\n- Update to TinyMCE 3.5.6\n- Correctly escape localized labels in javascript variable (#1488567)\n- Update Net_SMTP/Auth_SASL packages to fix Digest-MD5/Cram-MD5 authentication (#1488571)\n- Don't add attachments content into reply/forward/draft message body (#1488557)\n- Fix 'no connection' errors on page unloads (#1488547)\n- Plugin API: Add 'unauthenticated' hook (#1488138)\n- Show explicit error message when provided hostname is invalid (#1488550)\n- Fix wrong compose screen elements focus in IE9 (#1488541)\n- Fix fatal error when date.timezone isn't set (#1488546)\n- Update to TinyMCE 3.5.4.1\n- Better icons with distinct shapes for priority columns (#1488377)\n- Show dedicated icon for multipart/report messages (#1488524)\n- Properly hide text of icon links/buttons (#1488534)\n- Fix handling of unitless CSS size values in HTML message (#1488535)\n- Fix removing contact photo using LDAP addressbook (#1488420)\n- Fix storing X-ANNIVERSARY date in vCard format (#1488527)\n- Update to Mail_Mime-1.8.5 (#1488521)\n- Fix XSS vulnerability in message subject handling using Larry skin [CVE-2012-3507] (#1488519)\n- Fix handling of links with various URI schemes e.g. \"skype:\" (#1488106)\n- Fix handling of links inside PRE elements on html to text conversion\n- Fix indexing of links on html to text conversion\n- Decode header value in rcube_mime::get() by default (#1488511)\n- Fix errors with enabled PHP magic_quotes_sybase option (#1488506)\n- Fix SQL query for contacts listing on MS SQL Server (#1488505)\n- Fix window.resize handler on IE8 and Opera (#1488453)\n- Don't let error message popups cover the login form (#1488500)\n- Update to TinyMCE 3.5.2\n- Don't show errors when moving contacts into groups they are already in (#1488493)\n- Make folders with unread messages in subfolders bold again (#1486793)\n- Abbreviate long attachment file names with ellipsis (#1488499)\n- Fix html2text conversion of strong|b|a|th|h tags when used in upper case\n- Add listcontrols template container in Larry skin (#1488498)\n- Fix host autoselection when default_host is an array (#1488495)\n- Move messages forwarding mode setting into Preferences\n- Fix HTML entities handling in HTML editor (#1488483)\n- Fix listing shared folders on Courier IMAP (#1488466)\n\nRELEASE 0.8-rc\n--------------\n- Added new translations in Belarusian, Interlingua and Malayalam\n- Flipped compose options arrow (#1488474)\n- Fix handling of large uuencode attachments (#1488473)\n- Fix handling of \"usemap\" attribute (#1488472)\n- Fix handling of some HTML tags e.g. IMG (#1488471)\n- Use similar language as a fallback for plugin localization (#1488401)\n- Fix issue where signature wasn't re-added on draft compose (#1488322)\n- Update to TinyMCE 3.5 (#1488459)\n- Fixed multi-threaded autocompletion when number of threads > number of sources\n- Allow to configure the number of values allowed for each LDAP attribute\n- Support for serialized LDAP address values (usually delimited with a $)\n- Less restrictive session auth checks, repeat keep-alive requests on failure (#1488449)\n- Fix redirect to mail/compose on re-login (#1488226)\n- Add IE8 hack for messages list issue (#1487821)\n- Fix handling errors on draft auto-save\n- Fix importing vCard photo with ENCODING param specified (#1488432)\n- Support mutliple name/email pairs for Bcc and Reply-To identity settings (#1488445)\n- Set flexible width to login form fields (#1488418)\n- Fix re-draw bug on list columns change in IE8 (#1487822)\n- Allow mass-removal of addresses from a group (#1487748)\n- Fix removing all contacts on import to LDAP addressbook\n- Fix so \"Back\" from compose/show doesn't reset search request (#1488238)\n- Add option to delete messages instead of moving to Trash when in Junk folder (#1486686)\n- Fix invisible cursor when replying to a html message (#1487073)\n- Reset IP stored in session when destroying session data (#1488056)\n- Fix bug where memory_limit = -1 wasn't handled properly\n- Support LDAP RFC2256's country object class read/write (#1488123)\n- Upgraded to jQuery 1.7.2\n- Image resize with GD extension (#1488383)\n- Fix lack of warning when switching task in compose window (#1488399)\n- Fix bug where it wasn't possible to enter ( or & characters in autocomplete fields\n- Request all needed fields from address book backends (#1488394)\n- Unified (single) spellchecker button\n- Scroll long lists on drag&drop (#1485946)\n- Copy all skins in installto script (#1488376)\n\nRELEASE 0.8-beta\n----------------\n- Upgraded to jQuery 1.7.1 (#1488337) and jQuery UI 1.8.18\n- Add Russian to the spellchecker languages list (#1488135)\n- Remember custom skin selection after logout (#1488355)\n- Make sure About tab is always the last tab (#1488257)\n- Fix issue with folder creation under INBOX. namespace (#1488349)\n- Added mailto: protocol handler registration link in User Preferences (#1486580)\n- Handle identity details box with an iframe (#1487020)\n- Fix issue where some text from original message was missing on reply (#1488340)\n- Fix autoselect_host() for login (#1488297)\n- Changed license to GNU GPLv3+ with exceptions for skins & plugins\n- Added address book widget on compose screen\n- Use proper timezones from PHP's internal timezonedb (#1485592)\n- Add separate pagesize setting for mail messages and contacts (#1488269)\n- Deprecate $DB, $USER, $IMAP global variables, Use $RCMAIL instead\n- Add option to set default font for HTML message (#1484137)\n- Fix issues with big memory allocation of IMAP results\n- Prevent from memory_limit exceeding when trying to parse big messages bodies (#1487424)\n- Add possibility to add SASL mechanisms for SMTP in smtp_connect hook (#1487937)\n- Mark (with different color) folders with recent messages (#1486234)\n- Added About tab in Settings\n- TinyMCE updated to 3.4.6\n\nRELEASE 0.7.2\n-------------\n- Fix encoding of attachment with comma in name (#1488389)\n- Fix handling of % character in IMAP protocol (#1488382)\n- Fix duplicate names handling in addressbook searches (#1488375)\n- Fix displaying of HTML messages from Disqus (#1488372)\n- Disable E_STRICT warnings on PHP 5.4\n- Prevent from folder selection on virtual folder collapsing (#1488346)\n- Fix automatic unsubscribe of non-existent folders\n- Fix double-quotes handling in recipient names\n- User configurable setting how to display contact names in list\n- Make contacts list sorting configurable for the admin/user\n- Fix parse errors in DDL files for MS SQL Server\n- Revert SORT=DISPLAY support, removed by mistake (#1488327)\n- Add lost translation label in de_DE (#1488315)\n- Fix drafts update issues when edited from preview pane (#1488314)\n- Fix wrong variable name in rcube_ldap.php (#1488302)\n- Make mime type detection based on filename extension to be case-insensitive\n- Fix failure on MySQL database upgrade from 0.7 - text column can't have default value (#1488300)\n\n\nRELEASE 0.7.1\n-------------\n- Fix bug in handling of base href and inline content (#1488290)\n- Fix SQL Error when saving a contact with many email addresses (#1488286)\n- Fix strict email address searching if contact has more than one address\n- Remove duplicated 'organization' label (#1488287)\n- Fix so editor selector is hidden when 'htmleditor' is listed in 'dont_override'\n- Fix wrong (long) label usage (#1488283)\n- Fix handling of INBOX's subfolders in special folders config (#1488279)\n- Add ifModule statement for setting Options -Indexes in .htaccess file (#1488274)\n- Fix crashes with eAccelerator (#1488256)\n- Fix searching on IMAP servers without CHARSET specifier support (#1488271)\n- Fix expanding folders during drag&drop (#1488260)\n- Fix wrong postgres sequence name in upgrade from 0.6\n- Fix broken CREATE INDEX queries in SQLite DDL files (#1488255)\n\nRELEASE 0.7\n-----------\n- Make Roundcube render the Email Standards Project Acid Test correctly\n- Replace prompt() with jQuery UI dialog (#1485135)\n- Fix navigation in messages search results\n- Improved handling of some malformed values encoded with quoted-printable (#1488232)\n- Add possibility to do LDAP bind before searching for bind DN\n- Fix handling of empty <U> tags in HTML messages (#1488225)\n- Add content filter for embedded attachments to protect from XSS on IE [CVE-2012-1253] (#1487895)\n- Use strpos() instead of strstr() when possible (#1488211)\n- Fix handling HTML entities when converting HTML to text (#1488212)\n- Fix fit_string_to_size() renders browser and ui unresponsive (#1488207)\n- Fix handling of invalid characters in request (#1488124)\n- Fix merging some configuration options in update.sh script (#1485864)\n- Fix so TEXT key will remove all HEADER keys in IMAP SEARCH (#1488208)\n- Fix handling contact photo url with https:// prefix (#1488202)\n- Fix possible infinite redirect on attachment preview (#1488199)\n- Improved clickjacking protection for browsers which don't support X-Frame-Options headers\n- Fixed bug where similar folder names were highlighted wrong (#1487860)\n- Fixed bug in handling link with '!' character in it (#1488195)\n- Fixed bug where session ID's length was limited to 40 characters (#1488196)\n- TinyMCE security issue: removed moxieplayer (embedding flv and mp4 is not supported anymore)\n\nRELEASE 0.7-beta\n----------------\n- Fix handling of HTML form elements in messages (#1485137)\n- Fix regression in setting recipient to self when replying to a Sent message (#1487074)\n- Fix listing of folders in hidden namespaces (#1486796)\n- Don't consider \\Noselect flag when building folders tree (#1488004)\n- Fix sorting autocomplete results (#1488084)\n- Add option to set session name (#1486433)\n- Add option to skip alternative email addresses in autocompletion\n- Fix inconsistent behaviour of Compose button in Drafts folder, add Edit button for drafts\n- Fix problem with parsing HTML message body with non-unicode characters (#1487813)\n- Add option to define matching method for addressbook search (#1486564, #1487907)\n- Make email recipients separator configurable\n- Fix so folders with \\Noinferiors attribute aren't listed in parent selector\n- Fix handling of curly brackets in URLs (#1488168)\n- Fix handling of dates (birthday/anniversary) in contact data (#1488147)\n- Fix error on opening searched LDAP contact (#1488144)\n- Fix redundant line break in flowed format (#1488146)\n- Fix IDN address validation issue (#1488137)\n- Fix JS error when dst_active checkbox doesn't exist (#1488133)\n- Autocomplete LDAP records when adding contacts from mail (#1488073)\n- Plugin API: added 'ready' hook (#1488063)\n- Ignore DSN request when it isn't supported by SMTP server (#1487800)\n- Make sure LDAP name fields aren't arrays (#1488108)\n- Fixed imap test to non-default port when using ssl (#1488118)\n- Force all files to be overwritten when updating (#1488117)\n- Fix issue where it wasn't possible to change list view mode in folder manager for INBOX (#1488107)\n- Fix namespace handling in special folders settings (#1488112)\n- Disable time limit for CLI scripts (#1488109)\n- Fix misleading display when chaning editor type (#1488104)\n- Add loading indicator on contact delete\n- Fix bug where after delete message rows can be added to the list of another folder (#1487752)\n- Add notice on autocompletion that not all records were displayed\n- Add option 'searchonly' for LDAP address books\n- Add Priority filter to the messages list\n- Cache synchronization using QRESYNC/CONDSTORE\n- Trigger 'new_messages' hook for all checked folders (#1488083)\n- Make date/time format user configurable; drop 'date_today' config option\n- Fix setting title for truncated subject in IE (#1487128)\n- Fix displaying multipart/alternative messages with only one part (#1487938)\n- Rewritten messages caching:\n  Indexes are stored in a separate table, so there's no need to store all messages in a folder\n  Added threads data caching\n  Flags are stored separately, so flag change doesn't cause DELETE+INSERT, just UPDATE\n- Improved FETCH response handling\n- Improvements in response tokenization method\n- Use 'From' and 'To' labels instead of 'Sender' and 'Recipient'\n- Fix username case-insensitivity issue in MySQL (#1488021)\n- Addressbook Saved Searches\n- Added spellchecker exceptions dictionary (shared or per-user)\n- Added possibility to ignore words containing caps, numbers, symbols (spellcheck_ignore_* options)\n- Added 'priority' column on messages list (#1486782)\n- Localize forwarded message header (#1488058)\n\nRELEASE 0.6\n-----------\n- Fix bug where the last identity is used on reply (#1488101)\n- Fix locked folder rename option on servers supporting RFC2086 only (#1488089)\n- Fix session race conditions when composing new messages\n- Fix encoding of LDAP contacts identifiers (#1488079)\n- jQuery 1.6.4\n- Fix handling of binary attachments encoded with quoted-printable (#1488065)\n- Fix text-overflow:ellipsis issues on messages list in FF7 and Webkit (#1488061)\n- Fix handling of links with IP address\n- Fix compacting folder resets message list filter (#1488076)\n\nRELEASE 0.6-rc\n----------------\n- Send X-Frame-Options headers to protect from clickjacking (#1487037)\n- Fallback to mail_domain in LDAP variable replacements; added 'host' to 'user_create' hook arguments (#1488024)\n- Fixed wrong vCard type parameter mobile (#1488067)\n- Fixed vCard WORKFAX issue (#1488046)\n- Add vCard's Profile URL support (#1488062)\n- jQuery 1.6.3\n- Fix imap_cache setting to values other than 'db' (#1488060)\n- Fix handling of attachments inside message/rfc822 parts (#1488026)\n- Make list of mimetypes that open in preview window configurable (#1487625)\n- Added plugin hook 'message_part_get' for attachment downloads\n- Added unique connection identifier to IMAP debug messages\n- Fix image type check for contact photo uploads\n\nRELEASE 0.6-beta\n----------------\n- Fixed selecting identity on reply/forward (#1487981)\n- Add option to hide selected LDAP addressbook on the list\n- Add client-side checking of uploaded files size\n- Add newlines between organization, department, jobtitle (#1488028)\n- Recalculate date when replying to a message and localize the cite header (#1487675)\n- Fix handling of email addresses with quoted local part (#1487939)\n- Fix EOL character in vCard exports (#1487873)\n- Added optional \"multithreading\" autocomplete feature\n- Plugin API: Added 'config_get' hook\n- Fixed new_user_identity plugin to work with updated rcube_ldap class (#1487994)\n- Plugin API: added folder_delete and folder_rename hooks\n- Added possibility to undo last contact delete operation\n- Fix sorting of contact groups after group create (#1487747)\n- Add optional textual upload progress indicator (#1486039)\n- Fix parsing URLs containing commas (#1487970)\n- Added vertical splitter for books/groups list in addressbook (#1487923)\n- Improved namespace roots handling in folder manager\n- Added searching in all addressbook sources\n- Added addressbook source selection in contacts import\n- Implement LDAPv3 Virtual List View (VLV) for paged results listing\n- Use 'address_template' config option when adding a new address block (#1487944)\n- Added addressbook advanced search\n- Add popup with basic fields selection for addressbook search\n- Case-insensitive matching in autocompletion (#1487933)\n- Added option to force spellchecking before sending a message (#1485458)\n- Fix handling of \"<\" character in contact data, search fields and folder names (#1487864)\n- Fix saving \"<\" character in identity name and organization fields (#1487864)\n- Added option to specify to which address book add new contacts\n- Added plugin hook for keep-alive requests\n- Store user preferences in session when write-master is not available and session is stored in memcache, write them later\n- Improve performence of folder manager operations\n- Fix default_port option handling in Installer when config.inc.php file exists (#1487925)\n- Removed option focus_on_new_message, added newmail_notifier plugin\n- Added general rcube_cache class with Memcache and APC support\n- Improved caching performance by skipping writes of unchanged data\n- Option enable_caching replaced by imap_cache and messages_cache options\n- Fix WORKFAX saving in address book (#1487910)\n- Add forward-as-attachment feature\n- jQuery-1.6.2 (#1487913, #1487144)\n- Improve display name composition when saving contacts (#1487143)\n- Fix problems with subfolders of INBOX folder on some IMAP servers (#1487725)\n- Fix handling of folders that doesn't belong to any namespace (#1487637)\n- Enable multiselection for attachments uploading in capable browsers (#1485969)\n- Add possibility to change HTML editor configuration by skin\n- Fix a bug where selecting too many contacts would produce too large URI request (#1487892)\n- Improve performance by including files with absolute path (#1487849)\n- Move folder name truncation to client/skin (#1485412)\n- Added plugin hook for request token creation\n- Replace LDAP vars in group queries (#1487837)\n- Fix vcard folding with uncode characters (#1487868)\n- Keep all submitted data if contact form validation fails (#1487865)\n- Handle uncode strings in rcube_addressbook::normalize_string() (#1487866)\n- Fix handling of debug_level=4 in ajax requests (#1487831)\n- Enable TinyMCE's contextmenu (#1487014)\n- Allow multiple concurrent compose sessions\n- New config option for custom logo\n- Allow skins to define/override texts with <roundcube:label />\n- Add simple ACL rights/namespace handling in folder manager\n- Force IE to send referers (#1487806)\n- Better display of vcard import results (#1485457)\n- Improved vcard import\n- Interactive update script with improved DB schema check\n- Fix problem with contactgroupmembers table creation on MySQL 4.x, add index on contact_id column\n- Add LDAP SASL bind and proxy authentication (#1486692)\n- Replying to a sent message puts the old recipient as the new recipient (#1487074)\n- Fulltext search over (almost) all data for contacts\n- Extend address book with rich contact information\n\nRELEASE 0.5.4\n-------------\n- Fix XSS vulnerability in UI messages [CVE-2011-2937] (#1488030)\n\nRELEASE 0.5.3\n-------------\n- Fix identities \"reply-to\" and \"bcc\" fields have a bogus value when left empty (#1487943)\n- Fix issue which cases IMAP disconnection when encrypt() method was used (#1487900)\n- Fix some CSS issues in Settings for Internet Explorer \n- Fixed handling of folder with name \"0\" in folder selector\n- Fix bug where messages were deleted instead moved to trash folder after Shift key was used (#1487902)\n- Fix relative URLs handling according to a <base> in HTML (#1487889)\n- Fix handling of top-level domains with more than 5 chars or unicode chars (#1487883)\n- Fix usage of non-standard HTTP error codes (#1487797)\n- Fix PHP warning on mistaken in_array() usage (#1487901)\n\nRELEASE 0.5.2\n-------------\n- TinyMCE 3.4.2 now compatible with IE9\n- PEAR::Net_SMTP 1.5.2, fixed timeout issue (#1487843)\n- Fix bug where template name without plugin prefix was used in render_page hook\n- Support 'abort' and 'result' response in 'preferences_save' hook, add error handling\n- Fix bug where some content would cause hang on html2text conversion (#1487863)\n- Improve space-stuffing handling in format=flowed messages (#1487861)\n- Fix bug where some dates would produce SQL error in MySQL (#1487856)\n- Added workaround for some IMAP server with broken STATUS response (#1487859)\n- Fix bug where default_charset was not used for text messages (#1487836)\n- Stateless request tokens. No keep-alive necessary on login page (#1487829)\n- Force names of unique constraints in PostgreSQL DDL\n- Add code for prevention from IMAP connection hangs when server closes socket unexpectedly\n- Remove redundant DELETE query (for old session deletion) on login\n- Get around unreliable rand() and mt_rand() in session ID generation (#1486281)\n- Fix some emails are not shown using Cyrus IMAP (#1487820)\n- Fix handling of mime-encoded words with non-integral number of octets in a word (#1487801)\n- Fix parsing links with non-printable characters inside (#1487805)\n- Fixed de_CH Localization bugs (#1487773)\n- Add variable for 'Today' label in date_today option (#1486120)\n- Fix dont_override setting does not override existing user preferences (#1487664)\n- Use only one from IMAP authentication methods to prevent login delays (1487784)\n- Support strftime format in date_today option\n- Fix SQL query in rcube_user::query() so it uses index on MySQL again\n- Removed redundant </form> tags from contact add/edit pages\n- Fix CSS error in contact details screen on IE7 (#1487775)\n\nRELEASE 0.5.1\n-------------\n- Fix handling of attachments with invalid content type (#1487767)\n- Add workaround for DBMail's bug http://www.dbmail.org/mantis/view.php?id=881 (#1487766)\n- Use IMAP's ID extension (RFC2971) to print more info into debug log\n- Security: add optional referer check to prevent CSRF in GET requests\n- Fix email_dns_check setting not used for identities/contacts (#1487740)\n- Fix ICANN example addresses doesn't validate (#1487742)\n- Security: protect login form submission from CSRF [CVE-2011-1491]\n- Security: prevent from relaying malicious requests through modcss.inc [CVE-2011-1492]\n- Fix handling of non-image attachments in multipart/related messages (#1487750)\n- Fix IDNA support when IDN/INTL modules are in use (#1487742)\n- Fix handling of invalid HTML comments in messages (#1487759)\n- Fix parsing FETCH response for very long headers (#1487753)\n- Fix add/remove columns in message list when message_sort_order isn't set (#1487751)\n- Check mime headers before attempt to parse them (#1487745)\n- Quote header values in show_additional_headers plugin (#1487744)\n- Fix settings UI on IE 6 (#1487724)\n- Remove double borders in folder listing (#1487713)\n- Separate full message headers UI element from headers table (#1487715)\n- Add part MIME ID to message_part_* hooks (#1487718) \n- Improve parsing of MS Outlook vCards (#1487716)\n- Updated PEAR::Net_Socket to 1.0.10\n- Updated PEAR::Net_IDNA2 to 0.1.1\n- Fix handling of comments inside an email address spec. (#1487673)\n- Show full mail subject as title when hovering a cut subject link (#1487128)\n- Fix randomly disappearing folders list in IE (#1487704)\n- Fix list column add/removal in IE (#1487703)\n- Fix login redirect issues (#1487686)\n- Require PHP 5.2.1 or greater\n- Fix %h/%z variables in username_domain option (#1487701)\n- Workaround for setting charset in case of malformed bodystructure response (#1487700)\n- Fix impossible to subscribe to protected folders (#1487656)\n- Fix setting timezone in Preferences (#1487705)\n\nRELEASE 0.5\n-----------\n- Fix double-login/session issue (#1487104)\n- Wrap HTML parts with <html><body> and add Doctype declaration (#1487098)\n- Make rcube_autoload silently skip unknown classes (#1487109)\n- Fix charset detection in vcards with encoded values (#1485542)\n- Better CSS cursors for splitters (#1486874)\n- Show the same message only once (#1487641)\n- Fix namespaces handling (#1487649)\n- Add handling of multifolder METADATA/ANNOTATION responses\n- Fix handling of INBOX when personal namespace prefix is non-empty (#1487657)\n- Fix handling square brackets in links (#1487672)\n- Add description of 'use_https' option in main.inc.php.dist file\n\nRELEASE 0.5-RC\n--------------\n- Plugin API: Add 'pass' argument in 'authenticate' hook (#1487134)\n- Fix attachments of type message/rfc822 are not listed on attachments list\n- Add 'login_lc' config option for case-insensitive authentication (#1487113)\n- Fix window is blur'ed in IE when selecting a message (#1487316)\n- Fix cursor position on compose form in Webkit browsers (#1486674)\n- Fix setting charset of attachment filenames (#1487122)\n- Allow setting autocomplete attribute for all inputs separately (#1487313)\n- New Folder Manager UI\n- Fix invalid Request when creating a folder (#1487443)\n- Add folder size and quota indicator in folder manager (#1485780)\n- Add possibility to move a subfolder into root folder (#1486791)\n- Fix copying all messages in a folder copies only messages from current page\n- Improve performance of moving or copying of all messages in a folder\n- Fix plaintext versions of HTML messages don't contain placeholders for emotions (#1485206)\n- Improve performance of folder rename and delete actions\n- Better support for READ-ONLY and NOPERM responses handling (#1487083)\n- Add confirmation message on purge/expunge command response\n- Fix handling of untagged responses for AUTHENTICATE command (#1487450)\n- Add username and IP address to log message on unsuccessful login (#1487626)\n- Improved Mail-Followup-To and Mail-Reply-To headers handling\n- Fix charset conversion for text attachments without charset specification (#1487634)\n\nRELEASE 0.5-BETA\n----------------\n- Make session data storage more robust against garbage session data (#1487136)\n- Config option for autocomplete on login screen\n- Allow plugin templates to include local files (#1487133)\n- List groups in address detail view and allow to subscribe/unsubscribe from there (#1486753)\n- Messages caching: performance improvements, fixed syncing, fixes related with #1486748\n- Add link to identities in compose window (#1486729)\n- Add Internationalized Domain Name (IDNA) support (#1483894)\n- Add option to automatically send read notifications for known senders (#1485883)\n- Add option to \"Return receipt\" will be always checked (#1486352)\n- Fix HTML to plain text conversion doesn't handle citation blocks (#1486921)\n- Use custom sorting when SORT is disabled by IMAP admin (#1486959)\n- Allow setting some washtml options from plugin (#1486578)\n- Add option do bind for an individual LDAP address book (#1486997)\n- Change reply prefix to display email address only if sender name doesn't exist (#1486550)\n- Plugin API: improved 'abort' flag handling, added 'result' item in some hooks (#1486914)\n- Fix mailto optional params in plain text messages aren't handled (#1487026)\n- Add Reply-to-List feature (#1484252)\n- Add Mail-Followup-To/Mail-Reply-To support (#1485547)\n- Fix confirmation message isn't displayed after sending mail on Chrome (#1486177)\n- Fix keyboard doesn't work with autocomplete list with Chrome (#1487029)\n- Improve tabs to fixed width and add tabs in identities info (#1486974)\n- Add unique index on users.username+users.mail_host\n- Make htmleditor option more consistent and add option to use HTML on reply to HTML message (#1485840)\n- Use empty envelope sender address for message disposition notifications (RFC 2298.3)\n- Support SMTP Delivery Status Notifications - RFC 3461 (#1486142)\n- Use css sprite image for messages list\n- Add (different) attachment icon for messages of type multipart/report (#1486165)\n- Prevent from inserting empty link when composing HTML message (#1486944)\n- Add caching support in id2uid and uid2id functions (#1487019)\n- Add SASL proxy authentication for SMTP (#1486693)\n- Improve displaying of UI messages (#1486977)\n- Fix double e-mail filed in identity form (#1487054)\n- Display IMAP errors for LIST/THREAD/SEARCH commands (#1486905)\n- Add LITERAL+ (IMAP4 non-synchronizing literals) support (RFC 2088)\n- Add separate column for message status icon (#1486665)\n- Add ACL extension support into IMAP classes (RFC 4314)\n- Add ANNOTATEMORE extension support into IMAP classes (draft-daboo-imap-annotatemore)\n- Add METADATA extension support into IMAP classes (RFC 5464)\n- Fix decoding of e-mail address strings in message headers (#1487068)\n- Fix handling of attachments when Content-Disposition is not inline nor attachment (#1487051)\n- Improve performance of unseen messages counting (#1487058)\n- Improve performance of messages counting using ESEARCH extension (RFC4731)\n- Add LIST-STATUS support in rcube_imap_generic class (RFC 5819)\n- Add SASL-IR support in IMAP (RFC 4959)\n- Add LOGINDISABLED support (RFC 2595)\n- Add support for AUTH=PLAIN in IMAP authentication\n- Re-implemented SMTP proxy authentication support\n- Add support for IMAP proxy authentication (#1486690)\n- Add support for AUTH=DIGEST-MD5 in IMAP (RFC 2831)\n- Fix parent folder with unread subfolder not bold when message is open (#1487078)\n- Add basic IMAP LIST's \\Noselect option support\n- Add support for selection options from LIST-EXTENDED extension (RFC 5258)\n- Don't list subscribed but non-existent folders (#1486225)\n- Fix handling of URLs with tilde (~) or semicolon (;) character (#1487087, #1487088)\n- Plugin API: added 'contact_form' hook\n- Add SORT=DISPLAY support (RFC 5957)\n- Plugin API: add possibility to disable plugin in AJAX mode, 'noajax' property\n- Plugin API: add possibility to disable plugin in framed mode, 'noframe' property\n- Improve performance of setting IMAP flags using .SILENT suffix\n- Improve performance of message cache status checking with skip_disabled=true\n- Support contact's email addresses up to 255 characters long (#1487095)\n- Add option to place replies in the folder of the message being replied to (#1485945)\n- Add missing confirmation/error messages on contact/group/message actions (#1486845)\n- Add 'loading' message on message move/copy/delete/mark actions\n- Improve responsiveness of messages displaying (#1486986)\n- Add option for minimum length of autocomplete's string (#1486428)\n- Fix operations on messages in unsubscribed folder (#1487107)\n- Add support for shared folders (#1403507)\n- Fix handling of folders with name \"0\" (#1487119)\n- Fix handling of folders with \"<>\" characters in name\n- jQuery 1.4.4\n- Fix handling of HTML entity strings in plain text messages\n- Fix focused elements aren't unfocused when clicking on the list (#1487123)\n- Fix error in MSSQL DDL scripts (#1487112)\n- Lock submit button in onsubmit event on login page (#1487036)\n- Don't set attachment's charset in Content-type header (#1487122)\n- Fix handling of message bodies (quoted-printable encoded) with NULL characters (#1486189)\n- Add workaround for MSOE's multipart/related messages with non-related attachments\n\nRELEASE 0.4.2\n-------------\n- Fix handling of backslash as IMAP delimiter\n- Fix charset replacement in HTML message bodies (#1487021)\n- Fix: contact group input is empty when using rename action more than once on the same group record\n- Fix \"Server Error! (Not Found)\" when using utils/save-pref action (#1487023)\n- Fix handling of Thunderbird's vCards (#1487024)\n\nRELEASE 0.4.1\n-------------\n- Fix space-stuffing in format=flowed messages (#1487018)\n- Fix msgexport.sh now using the new imap wrapper\n- Avoid displaying password on shell (#1486947)\n- Only lower-case user name if first login attempt failed (#1486393)\n- Make alias setting in squirrelmail_usercopy plugin configurable (patch by pommi, #1487007)\n- Prevent from saving a non-existing skin path in user prefs (#1486936)\n- Improve handling of single-part messages with bogus BODYSTRUCTURE (#1486898)\n- Fix path to SQL files when using pgsql/mysqli/sqlsrv drivers (#1486902)\n- Fix upgrade script for SQLite (#1486903)\n- Fixes in SQL init script + added update script for MSSQL database\n- Remove redundant date in syslog messages (#1486945)\n- Fix contacts list page controls when a group is selected (#1486946)\n- Fix SMTP test in Installer (#1486952)\n- Fix \"Select all\" causes message to be opened in folder with exactly one message (#1486913)\n- Fix Tab key doesn't work in HTML editor in Google Chrome (#1486925)\n- Fix TinyMCE uses zh_CN when zh_TW locale is set (#1486929)\n- Fix TinyMCE buttons are hidden in Opera (#1486922)\n- Fix JS error on IE when trying to send HTML message with enabled spellchecker (#1486940)\n- Display inline images with known extensions and non-image content-type (#1486934)\n- Fix \"Threaded\" checkbox after subfolder creation (#1486928)\n- Fix timezone string in sent mail (#1486961)\n- Show disabled checkboxes for protected folders instead of dots (#1485498)\n- Added fieldsets in Identity form, added 'identity_form' hook\n- Re-added 'Close' button in upload form (#1486930, #1486823)\n- Fix handling of charsets with LATIN-* label\n- Fix messages background image handling in some cases (#1486990)\n- Fix format=flowed handling (#1486989)\n- Fix when IMAP connection fails in 'get' action session shouldn't be destroyed (#1486995)\n- Fix list_cols is not updated after column dragging (#1486999)\n- Support %z variable in host configuration options (#1487003)\n\nRELEASE 0.4\n-----------\n- Fix disapearing upload form disapears when user selects a file on Safari (#1486823)\n- Don't replace error messages with loading info (#1486300)\n- Fix JS errors on compose mode switch (#1486870)\n- Fix message structure parsing when it lacks optional fields (#1486881)\n- Include all recipients in sendmail log\n- Support HTTP_X_FORWARDED_PROTO header for HTTPS detecting (#1486866)\n- Fix default IMAP port configuration (#1486864)\n- Create Sent folder when starting to compose a new message (#1486802)\n- Fix handling of messages with Content-Type: application/* and no filename (#1484050)\n- Improved compose screen: resizable body and attachments list, vertical splitter, options menu\n- Fix RC forgets search results (#1483883)\n- TinyMCE 3.3.7\n- Improve parsing of styled empty tags in HTML messages (#1486812)\n- Add %dc variable support in base_dn/bind_dn config (#1486779)\n- Add button to hide/unhide the preview pane (#1484215)\n- Fix no-cache headers on https to prevent content caching by proxies (#1486798)\n- Fix attachment filenames broken with TNEF decoder using long filenames (#1486795)\n- Use user's timezone in Date header, not server's timezone (#1486119)\n- Add option to set separate footer for HTML messages (#1486660)\n- Add real SMTP error description to displayed error messages (#1485927)\n- Fix some IMAP errors handling when opening the message (#1485443)\n- Fix related parts aren't displayed when got mimetype other than image/* (#1486432)\n- Multiple identity and database support for squirrelmail_usercopy plugin (#1486517)\n- Support dynamic hostname (%d/%n) variables in configuration options (#1485438)\n- Add 'messages_list' hook (#1486266)\n- Add request* event triggers in http_post/http_request (#1486054)\n- Fix use RFC-compliant line-delimiter when saving messages on IMAP (#1486712)\n- Add 'imap_timeout' option (#1486760)\n- Fix forwarding of messages with winmail attachments\n- Fix handling of uuencoded attachments in message body (#1485839)\n- Added list_mailboxes hook in rcube_imap::list_unsubscribed() (#1486668)\n- Fix wrong message on file upload error (#1486725)\n- Add support for data URI scheme [RFC2397] (#1486740)\n- Added 'actionbefore', 'actionafter', 'responsebefore', 'responseafter' events\n- Fix double-addition of e-mail domain to content ID in HTML images\n- Read and send messages with format=flowed (#1484370), fixes word wrapping issues (#1486543)\n- Fix duplicated attachments when forwarding a message (#1486487)\n- Fix message/rfc822 attachments containing only attachments are not parsed properly (#1486743)\n- Fix %00 character in winmail.dat attachments names (#1486738)\n- Fix handling errors of folder deletion (#1486705)\n- Parse untagged CAPABILITY response for LOGIN command (#1486742)\n- Renamed all php-cli scripts to use .sh extension\n- Some files from /bin + spellchecking actions moved to the new 'utils' task\n- Added thread tree icons\n- Extend contact groups support (#1486682)\n- Fix check-recent action issues and performance (#1486526)\n- Fix messages order after checking for recent (#1484664)\n- Fix autocomplete shows entries without email (#1486452)\n- Fix listupdate event doesn't trigger on search response (#1486708)\n- Fix select_all_mode value after selecting a message (#1486720)\n- Set focus to editor on reply in HTML mode (#1486632)\n- Fix composing in HTML jumps cursor to body instead of recipients (#1486674)\n- Allow columns order change per user - drag&drop (#1485795)\n- Add References header in read receipt (#1486681)\n- Fix database constraint violation when opening a message (#1486696)\n- Add 'loading' message while login is in progress (#1486667)\n- Fix quota_zero_as_unlimited (#1486662)\n- Fix folder subscription checking (#1486684)\n- Fix INBOX appears (sometimes) twice in mailbox list (#1486672)\n- Fix listing of attachments of some types e.g. \"x-epoc/x-sisx-app\" (#1486653)\n- Fix DB Schema checking when some db_table_* options are not set (#1486654)\n\nRELEASE 0.4-beta\n----------------\n- Add sizelimit and timelimit variables in LDAP config (#1486544)\n- Hide IMAP host dropdown when single host is defined (#1486326)\n- Add images pre-loading on login page (#1451160)\n- Add HTTP_X_REAL_IP and HTTP_X_FORWARDED_FOR to successful logins log (#1486441)\n- Fix setting spellcheck languages with extended codes (#1486605)\n- Fix messages list scrolling in FF3.6 (#1486472)\n- Fix quicksearch input focus (#1486637)\n- Always set changed date when flagging a DB record as deleted + provide a cleanup script\n- Fix address book/group selection (#1486619)\n- Assign newly created contacts to the active group (#1486626)\n- Added option not to mark messages as read when viewed in preview pane (#1485012)\n- Allow plugins modify the Sent folder when composing (#1486548)\n- Added optional (max_recipients) support to restrict total number of recipients per message (#1484542)\n- Re-organize editor buttons, add blockquote and search buttons\n- Make possible to write inside or after a quoted html message (#1485476)\n- Fix bugs on unexpected IMAP connection close (#1486190, #1486270)\n- Iloha's imap.inc rewritten into rcube_imap_generic class\n- Added contact groups in address book (not finished yet)\n- Added PageUp/PageDown/Home/End keys support on lists (#1486430)\n- Added possibility to select all messages in a folder (#1484756)\n- Added 'imap_force_caps' option for after-login CAPABILITY checking (#1485750)\n- Password: Support dovecotpw encryption\n- TinyMCE 3.3.1\n- Implemented messages copying using drag&drop + SHIFT (#1484086)\n- Improved performance of folders operations (#1486525)\n- Fix blocked.gif attachment is not attached to the message (#1486516)\n- Managesieve: import from Horde-INGO\n- Managesieve: support for more than one match (#1486078)\n- Managesieve: support for selectively disabling rules within a single sieve script (#1485882)\n- Threaded message listing now available\n- Added sorting by ARRIVAL and CC\n- Message list columns configurable by the user\n- Removed 'index_sort' option, now we're using empty 'message_sort_col' for this\n- virtuser_query: support other identity data (#1486148)\n- Options virtuser_* replaced with virtuser_* plugins\n- Plugin API: Implemented 'email2user' and 'user2email' hooks\n- Fix forwarding message omits CC header (#1486305)\n- Add 'default_charset' option to user preferences (#1485451)\n- Add 'delete_always' option to user preferences\n- Support/Require tls:// prefix in 'smtp_server' option for TLS connections\n- Fix inconsistent behaviour of 'delete_always' option (#1486299)\n- Fix deleting all messages from last list page (#1486293)\n- Flag original messages when sending a draft (#1486203)\n- Changed signature separator when top-posting (#1486330)\n- Let the admin define defaults for search modifiers (#1485897)\n- Fix long e-mail addresses validation (#1486453)\n- Remember search modifiers in user prefs (#1486146)\n- Added force_7bit option to force MIME encoding of plain/text messages (#1486510)\n- Use case sensitive check when checking for default folders (#1486346)\n- Fix checking for new mail: now checks unseen count of inbox (#1485794)\n- Improve performance by avoiding unnecessary updates to the session table (#1486325)\n- Fix invalid <font> tags which cause HTML message rendering problems (#1486521)\n- Fix CVE-2010-0464: Disable DNS prefetching (#1486449)\n- Fix Received headers to behave better with SpamAssassin (#1486513)\n- Password: Make passwords encoding consistent with core, add 'password_charset' global option (#1486473)\n- Fix adding contacts SQL error on mysql (#1486459)\n- Squirrelmail_usercopy: support reply-to field (#1486506)\n- Fix IE spellcheck suggestion popup issue (#1486471)\n- Fix email address auto-completion shows regexp pattern (#1486258)\n- Fix merging of configuration parameters: user prefs always survive (#1486368) \n- Fix quota indicator value after folder purge/expunge (#1486488)\n- Fix external mailto links support for use as protocol handler (#1486037)\n- Fix attachment excessive memory use, support messages of any size (#1484660)\n- Fix setting task name according to auth state\n- Password: fix vpopmaild driver (#1486478)\n- Add workaround for MySQL bug [http://bugs.mysql.com/bug.php?id=46293] (#1486474)\n- Fix quoted text wrapping when replying to an HTML email in plain text (#1484141)\n- Fix handling of extended mailto links (with params) (#1486354)\n- Fix sorting by date of messages without date header on servers without SORT (#1486286)\n- Fix inconsistency when not using default table names (#1486467)\n- Fix folder rename/delete buttons do not appear on creation of first folder (#1486468)\n- Fix character set conversion fails on systems where iconv doesn't accept //IGNORE (#1486375)\n- Log in performance: Create default folders on first login only\n- Import contacts into the selected address book (by Phil Weir)\n- Add support for MDB2's 'sqlsrv' driver (#1486395)\n- Use jQuery-1.4\n- Removed problematic browser-caching of messages\n- Fix incompatybility with suhosin.executor.disable_emodifier (#1486321)\n- Use PLAIN auth when CRAM fails and imap_auth_type='check' (#1486371)\n- Fix removal of <title> tag from HTML messages (#1486432)\n- Fix 'force_https' to specified port when URL contains a port number (#1486411)\n- Fix to-text converting of HTML entities inside b/strong/th/hX tags (#1486422)\n- Bug in spellchecker suggestions when server charset != UTF8 (#1486406)\n- Managesieve: Fix requires generation for multiple actions (#1486397)\n- Fix LDAP problem with special characters in RDN (#1486320)\n- Improved handling of message parts of type message/rfc822\n- Plugin API: added 'quota' hook\n- Fix parsing conditional comments in HTML messages (#1486350)\n- Use built-in json_encode() for proper JSON format in AJAX replies\n- Allow setting only selected params in 'message_compose' hook (#1486312)\n- Plugin API: added 'message_compose_body' hook (#1486285)\n- Fix counters of all folders are checked in 'getunread' action  with check_all_folders disabled (#1486128)\n- Fix displaying alternative parts in messages of type message/rfc822 (#1486246)\n- Fix possible messages exposure when using Roundcube behind a proxy (#1486281)\n- Fix unicode para and line separators in javascript response (#1486310)\n- Additional_message_headers: allow unsetting headers, support plugin's config file (#1486268)\n- Fix displaying of hidden directories in skins list (#1486301)\n- Fix open_basedir restriction error when reading skins list (#1486304)\n- Fix pasting from Office apps into html editor (#1486271)\n- Fix empty <a> tags parsing (#1486272)\n- Don't cut off attachment names when using non-RFC2231 encoding (#1485515)\n- Allow inserting signatures above replied message body (#1484272)\n- Managesieve 2.0: multi-script support\n- Fix imap_auth_type regression (#1486263)\n\nRELEASE 0.3.1\n------------------\n- Specify toolbar container in compose template (#1486247)\n- Fix $_SERVER['HTTPS'] check for SSL forcing on IIS (#1486243)\n- Avoid unnecessary page loads for selected tab (#1486032)\n- Fix quota indicator issues by content generation on client-size (#1486197, #1486220)\n- Don't display disabled sections in Settings (#1486099)\n- Added server-side e-mail address validation with 'email_dns_check' option (#1485857)\n- Fix login page loading into an iframe when session expires (#1485952)\n- Allow setting port number in 'force_https' option (#1486091)\n- Option 'force_https' replaced by 'force_https' plugin\n- Fix IE issue with non-UTF-8 characters in AJAX response (#1486159)\n- Partially fixed \"empty body\" issue by showing raw body of malformed message (#1486166)\n- Fix importing/sending to email address with whitespace (#1486214)\n- Added XIMSS (CommuniGate) driver for Password plugin\n- Fix newly attached files are not saved in drafts w/o editing any text (#1486202)\n- Added attachment upload indicator with parallel upload (#1486058)\n- Use default_charset for bodies of messages without charset definition (#1486187)\n- Password: added cPanel driver\n- Fix return to first page from e-mail screen (#1486105)\n- Fix handling HTML comments in HTML messages (#1486189)\n- Fix folder/messagelist controls alignment - icons used (#1486072)\n- Fix LDAP addressbook shows 'Contact not found' error sometimes (#1486178)\n- Fix cache status checking + improve cache operations performance (#1486104)\n- Prevent from setting INBOX as any of special folders (#1486114)\n- Fix regular expression for e-mail address (#1486152)\n- Fix Received header format\n- Implemented sorting by message index - added 'index_sort' option (#1485936)\n- Fix dl() use in installer (#1486150)\n- Added 'ldap_debug' option\n- Fix \"Empty startup greeting\" bug (#1486085)\n- Fix setting user name in 'new_user_identity' plugin (#1486137)\n- Fix incorrect count of new messages in folder list when using multiple IMAP clients (#1485995)\n- Fix all folders checking for new messages with disabled caching (#1486128)\n- Support skins in 'archive' and 'markasjunk' plugins\n- Added 'html_editor' hook (#1486068)\n- Fix DB constraint violation when populating messages cache (#1486052)\n- Password: added password strength options (#1486062)\n- Fix LDAP partial result warning (#1485536)\n- Fix delete in message view deletes permanently with flag_for_deletion=true (#1486101)\n- Use faster/secure mt_rand() (#1486094)\n- Fix roundcube hangs on empty inbox with bincimapd (#1486093)\n- Fix wrong headers for IE on servers without $_SERVER['HTTPS'] (#1485926)\n- Force IE style headers for attachments in non-HTTPS session, 'use_https' option (#1485655)\n- Check 'post_max_size' for upload max filesize (#1486089) \n- Password Plugin: Fix %d inserts username instead of domain (#1486088)\n- Fix rcube_mdb2::affected_rows() (#1486082)\n\nRELEASE 0.3-stable\n------------------\n- Fix gn and givenName should be synonymous in LDAP addressbook (#1485892)\n- Add mail_domain to LDAP email entries without @ sign (#1485201)\n- Fix saving empty values in LDAP contact data (#1485781)\n- Fix LDAP contact update when RDN field is changed (#1485788)\n- Fix LDAP attributes case senitivity problems (#1485830)\n- Fix LDAP addressbook browsing when only one directory is used (#1486022)\n- Fix endless loop on error response for APPEND command (#1486060)\n- Don't require date.timezone setting in installer (#1485989)\n- Fix date sorting problem with Courier IMAP server (#1486065)\n- Unselect pressed buttons on mouse up (#1485987)\n- Don't set php_value error_log in .htaccess but mention in INSTALL (#1485924)\n- Fix too small status/flag/attachment columns in Safari 4 (#1486063)\n- Fix selection disabling while dragging splitter in webkit browsers (#1486056)\n- Added 'new_messages' plugin hook (#1486005)\n- Added 'logout_after' plugin hook (#1486042)\n- Added 'message_compose' hook\n- Added 'imap_connect' hook (#1485956)\n- Fix vcard_attachments plugin (#1486035)\n- Updated PEAR::Auth_SASL to 1.0.3 version\n- Use sequence names only with PostgreSQL (#1486018)\n- Re-designed User Preferences interface \n- Fix MS SQL DDL (#1486020)\n- Fix rcube_mdb2.php: call to setCharset not implemented in mssql driver (#1486019)\n- Added 'display_next' option\n- Fix rcube_mdb2::unixtimestamp for MS SQL (#1486015)\n- Fix HTML washing to respect character encoding\n- Fix endless loop in iil_C_Login() with Courier IMAP (#1486010)\n- Fix #messagemenu display on IE (#1486006)\n- Speedup UI by using sprites for (toolbar) buttons\n- Fix charset names with X- prefix handling\n- Fix displaying of HTML messages with unknown/malformed tags (#1486003)\n\nRELEASE 0.3-RC1\n---------------\n- Fix import of vCard entries with params (#1485453)\n- Fix HTML messages output with empty block elements (#1485974)\n- Use request tokens to protect POST requests from CSRF [CVE-2009-4076, CVE-2009-4077]\n- Added hook when killing a session\n- Added hook to write_log function (#1485971)\n- Performance improvements by use UID commands (#1485690)\n- Fix HTML editor tabIndex setting (#1485972)\n- Added 'imap_debug' and 'smtp_debug' options\n- Support strftime's format modifiers in date_* options (#1484806)\n- Support %h variable in 'smtp_server' option (#1485766)\n- Show SMTP errors in browser (#1485927)\n- Allow WBR tag in HTML message (#1485960)\n- Use spl_autoload_register() instead of __autoload (#1485947)\n- Add hook for identities listing (#1485958)\n- Trigger hook 'smtp_connect' when opening an SMTP connection (#1485954)\n- Added config option to enforce HTTPS connections\n- Fix non-unicode characters caching in unicode database (#1484608)\n- Performance improvements of messages caching\n- Fix empty Date header issue (#1485923)\n- Open collapsed folders during drag & drop (#1485914)\n- Fixed link text replacements (#1485789)\n- Also trigger 'insertrow' events on page load (#1485826)\n- No link on subject in IE browsers (#1484913)\n- Fixed filename encoding according to RFC2231 (#1485875)\n- Added message Edit feature (#1483891, #1484440)\n- Fix message Etag generation for counter issues (#1485623)\n- Fix messages searching on MailEnable IMAP (#1485762)\n- Fixed many 'skip_deleted' issues (#1485634)\n- Fixed messages list sorting on servers without SORT capability\n- Colorized signatures in plain text messages\n- Reviewed/fixed skip_deleted/read_when_deleted/flag_for_deletion options handling in UI\n- Fix displaying of big maximum upload filesize (#1485889)\n- Added possibility to invert messages selection\n- After move/delete from 'show' action display next message instead of messages list (#1485887)\n- Fixed problem with double quote at the end of folder name (#1485884)\n- Speedup UI by using CSS sprites and etags/expires/deflate in Apache config (#1484858,#1485800)\n- Support UID EXPUNGE: remove only moved/deleted messages\n- Add drag cancelling with ESC key (#1484344)\n- Support initial identity name from virtuser_query (#1484003)\n- Added message menu, removed Print and Source buttons\n- Added possibility to save message as .eml file (#1485861)\n- Added 1 minute interval in autosave options (#1485854)\n- Support UTF-7 encoding in messages (#1485832)\n- Better support for malformed character names (#1485758)\n\nRELEASE 0.3-BETA\n----------------\n- Plugin API + jQuery engine\n- Added possibility to encrypt received header, option 'http_received_header_encrypt',\n  added some more logic in encrypt/decrypt functions for security\n- Fix Answered/Forwarded flag setting for messages in subfolders\n- Fix autocomplete problem with capital letters (#1485792)\n- Support UUencode content encoding (#1485839)\n- Minimize chance of race condition in session handling (#1485659, #1484678)\n- Fix session handling on non-session SQL query error (#1485734)\n- Fix html editor mode setting when reopening draft message (#1485834)\n- Added quick search box menu (#1484304)\n- Fix wrong column sort order icons (#1485823)\n- Updated TinyMCE to 3.2.3 version\n- Fix attachment names encoding when charset isn't specified in attachment part (#1484969)\n- Fix message normal priority problem (#1485820)\n- Fix autocomplete spinning wheel does not disappear (#1485804)\n- Added log_date_format option (#1485709)\n- Fix text wrapping in HTML editor after switching from plain text to HTML (#1485521)\n- Fix auto-complete function hangs with plus sign (#1485815)\n- Fix AJAX requests errors handler (#1485000)\n- Speed up message list displaying on IE\n- Fix read/write database recognition (#1485811)\n\nRELEASE 0.2.2\n-------------\n- Fix quicksearchbox look in Chrome and Konqueror (#1484841)\n- Fix UTF-8 byte-order mark removing (#1485514)\n- Fix folders subscribtions on Konqueror (#1484841) \n- Fix debug console on Konqueror and Safari\n- Fix messagelist focus issue when modifying status of selected messages (#1485807)\n- Support STARTTLS in IMAP connection (#1485284)\n- Fix DEL key problem in search boxes (#1485528)\n- Support several e-mail addresses per user from virtuser_file (#1485678)\n- Fix drag&drop with scrolling on IE (#1485786)\n- Fix adding signature separator in html mode (#1485350)\n- Fix opening attachment marks message as read (#1485803)\n- Fix 'temp_dir' does not support relative path under Windows (#1484529)\n- Fix \"Initialize Database\" button missing from installer (#1485802)\n- Fix compose window doesn't fit 1024x768 window (#1485396)\n- Fix service not available error when pressing back from compose dialog (#1485552)\n- Fix using mail() on Windows (#1485779)\n- Fix word wrapping in message-part's <PRE>s for printing (#1485787)\n- Fix incorrect word wrapping in outgoing plaintext multibyte messages (#1485714)\n- Fix double footer in HTML message with embedded images\n- Fix TNEF implementation bug (#1485773)\n- Fix incorrect row id parsing for LDAP contacts list (#1485784) \n- Fix 'mode' parameter in sqlite DSN (#1485772)\n\nRELEASE 0.2.1\n------------------\n- Use US-ASCII as failover when Unicode searching fails (#1485762)\n- Fix errors handling in IMAP command continuations (#1485762)\n- Fix FETCH result parsing for servers returning flags at the end of result (#1485763)\n- Fix datetime columns defaults in mysql's DDL (#1485641)\n- Fix attaching more than nine inline images (#1485759)\n- Support 'UNICODE-1-1-UTF-7' alias for UTF-7 encoding (#1485758)\n- Fix mime-type detection using a hard-coded map (#1485311)\n- Don't return empty string if charset conversion failed (#1485757)\n- Disable concurrent autocomplete query results display (#1485743)\n- Fix new lines stripped from message footer (#1485751)\n- Fix IE problem with mouse click autocomplete (#1485739)\n- Fix html body washing on reply/forward + fix attachments handling (#1485676)\n- Fix multiple recipients input parsing (#1485733)\n- Fix replying to message with html attachment (#1485676)\n- Use default_charset for messages without specified charset (#1485661, #1484961)\n- Support non-standard \"GMT-XXXX\" literal in date header (#1485729)\n- Added TNEF support to decode MS Outlook attachments (winmail.dat)\n- Fix \"value continuation\" MIME headers by adding required semicolon (#1485727)\n- Fix pressing select all/unread multiple times (#1485723)\n- Fix selecting all unread does not honor new messages (#1485724)\n- Fix some base64 encoded attachments handling (#1485725)\n- Support NGINX as IMAP backend: better BAD response handling (#1485720)\n- Performance fix: don't fetch attachment parts headers twice to parse filename\n- Fix checking for recent messages on various IMAP servers (#1485702)\n- Performance fix: Don't fetch quota and recent messages in \"message view\" mode\n- Fix displaying of alternative-inside-alternative messages (#1485713)\n- Fix MDNSent flag checking, use arbitrary keywords (asterisk) flag (#1485706)\n- Fix creation of folders with '&' sign in name\n- Fix parsing of email addresses without angle brackets (#1485693)\n- Save spellcheck corrections when switching from plain to html editor (and spellchecking is on)\n- Fix large search results on server without SORT capability (#1485668)\n- Get rid of preg_replace() with eval modifier and create_function usage (#1485686)\n- Bring back <base> and <link> tags in HTML messages\n- Fix XSS vulnerability through background attributes [CVE-2009-0413]\n- Fix problems with backslash as IMAP hierarchy delimiter (#1484467)\n- Secure vcard export by getting rid of preg's 'e' modifier use (#1485689)\n- Fix authentication when submitting form with existing session (#1485679)\n- Allow absolute URLs to images in HTML messages/sigs (#1485666)\n- Fix message body which contains both inline attachments and emotions\n- Fix SQL query execution errors handling in rcube_mdb2 class (#1485509)\n- Fix address names with '@' sign handling (#1485654)\n- Improve messages display performance\n- Fix messages searching with 'to:' modifier\n\nRELEASE 0.2-STABLE\n------------------\n- Fix mark popup in IE 7 (#1485369)\n- Fix line-break issue when copy & paste in Firefox (#1485425)\n- Fix autocomplete \"unknown server error\" (#1485637)\n- Fix STARTTLS before AUTH in SMTP connection (#1484883)\n- Support multiple quota values in QUOTAROOT resonse (#1485626)\n- Only abbreviate file name for IE < 7 browsers (#1485063)\n- Performance: allow setting imap rootdir and delimiter before connect (#1485172)\n- Fix sorting of folders with more than 2 levels (#1485569)\n- Fix search results page jumps in LDAP addressbook (#1485253)\n- Fix empty line before the signature in IE (#1485351)\n- Fix horizontal scrollbar in preview pane on IE (#1484633)\n- Add Robots meta tag in login page and installer (#1484846)\n- Added 'show_images' option, removed 'addrbook_show_images' (#1485597)\n- Option to check for new mails in all folders (#1484374)\n- Don't set client busy when checking for new messages (#1485276)\n- Allow UTF-8 folder names in config (#1485579)\n- Add junk_mbox option configuration in installer (#1485579)\n- Do serverside addressbook queries for autocompletion (#1485531)\n- Allow setting attachment col position in 'list_cols' option\n- Allow override 'list_cols' via skin (#1485577)\n- Fix 'cache' table cleanup on session destroy (#1485516)\n- Increase speed of session destroy and garbage clean up\n- Fix session timeout when DB server got clock skew (#1485490)\n- Fix handling of some malformed messages (#1484438)\n- Speed up raw message body handling\n- Better HTML entities conversion in html2text (#1485519)\n- Fix big memory consumption and speed up searching on servers without SORT capability\n- Fix setting locale to tr_TR, ku and az_AZ (#1485470) \n- Use SORT for searching on servers with SORT capability\n- Added message status filter\n- Fix empty file sending (#1485389)\n- Improved searching with many criterias (calling one SEARCH command)\n- Fix HTML editor initialization on IE (#1485304)\n- Add warning when switching editor mode from html to plain (#1485488)\n- Make identities list scrollable (#1485538)\n- Fix problem with numeric folder names (#1485527)\n- Added BYE response simple support to prevent from endless loops in imap.inc (#1483956)\n- Fix unread message unintentionally marked as read if read_when_deleted=true (#1485409)\n- Remove port number from SERVER_NAME in smtp_helo_host (#1485518)\n- Don't send disposition notification receipts for messages marked as 'read' (#1485523)\n- Added 'keep_alive' and 'min_keep_alive' options (#1485360)\n- Added option 'identities_level', removed 'multiple_identities'\n- Allow deleting identities when multiple_identities=false (#1485435)\n- Added option focus_on_new_message (#1485374)\n- Fix html2text class autoloading on Windows (#1485505)\n- Fix html signature formatting when identity save error occurred (#1485426)\n- Add feedback and set busy when moving folder (#1485497)\n- Fix 'Empty' link visibility for some languages e.g. Slovak (#1485489)\n- Fix messages count bar overlapping (#1485270)\n- Fix adding signature in drafts compose mode (#1485484)\n- Fix iil_C_Sort() to support very long and/or divided responses (#1485283)\n- Fix matching case sensitivity when setting identity on reply (#1485480)\n- Prefer default identity on reply\n- Fix imap searching on ISMail server (#1485466)\n- Add css class for flagged messages (#1485464)\n- Write username instead of id in sendmail log (#1485477)\n- Fix htmlspecialchars() use for PHP version < 5.2.3 (#1485475)\n- Fix js keywords escaping in json_serialize() for IE/Opera (#1485472)\n- Added bin/killcache.php script (#1485434)\n- Add support for SJIS, GB2312, BIG5 in rc_detect_encoding()\n- Fix vCard file encoding detection for non-UTF-8 strings (#1485410)\n- Add 'skip_deleted' option in User Preferences (#1485445)\n- Minimize \"inline\" javascript scripts use (#1485433)\n- Fix css class setting for folders with names matching defined classes names (#1485355)\n- Fix race conditions when changing mailbox\n- Fix spellchecking when switching to html editor (#1485362)\n- Fix compose window width/height (#1485396)\n- Allow calling msgimport.sh/msgexport.sh from any directory (#1485431)\n- Localized filesize units (#1485340)\n- Better handling of \"no identity\" and \"no email in identity\" situations (#1485117)\n- Added 'mime_param_folding' option with possibility to choose long/non-ascii attachment names encoding eg. to be readable in MS Outlook/OE (#1485320)\n- Added \"advanced options\" feature in User Preferences\n- Fix unread counter when displaying cached massage in preview panel (#1485290)\n- Fix htmleditor spellchecking on MS Windows (#1485397)\n- Fix problem with non-ascii attachment names in Mail_mime (#1485267, #1485096)\n- Fix language autodetection (#1485401)\n- Fix button label in folders management (#1485405)\n- Fix collapsed folder not indicating unread msgs count of all subfolders (#1485403)\n- Fix handling of apostrophes in filenames decoded according to rfc2231\n\nRELEASE 0.2-BETA\n----------------\n- Made config files location configurable (#1485215)\n- Reduced memory footprint when forwarding attachments (#1485345)\n- Allow and use spellcheck attribute for input/textarea fields (#1485060)\n- Added icons for forwarded/forwarded+replied messages (#1485257)\n- Added Reply-To to forwarded emails (#1485315)\n- Display progress message for folders create/delete/rename (#1485357)\n- Smart Tags and NOBR tag support in html messages (#1485363, #1485327)\n- Redesign of the identities settings (#1484042)\n- Add config option to disable creation/deletion of identities (#1484498)\n- Added 'sendmail_delay' option to restrict messages sending interval (#1484491)\n- Added vertical splitter for folders list resizing\n- Added possibility to view all headers in message view\n- Fixed splitter drag/resize on Opera (#1485170)\n- Fixed quota img height/width setting from template (#1484857)\n- Refactor drag & drop functionality. Don't rely on browser events anymore (#1484453)\n- Insert \"virtual\" folders in subscription list (#1484779)\n- Added link to open message in new window\n- Enable export of address book contacts as vCard\n- Add feature to import contacts from vcard files (#1326103)\n- Respect Content-Location headers in multipart/related messages according to RFC2110 (#1484946)\n- Allowed max. attachment size now indicated in compose screen (#1485030)\n- Also capture backspace key in list mode (#1484566)\n- Allow application/pgp parts to be displayed (#1484753)\n- Correctly handle options in mailto-links (#1485228)\n- Immediately save sort_col/sort_order in user prefs (#1485265)\n- Truncate very long (above 50 characters) attachment filenames when displaying\n- Allow to auto-detect client language if none set (#1484434)\n- Auto-detect the client timezone (user configurable)\n- Add RFC2231 header value continuations support for attachment filenames + hack for servers that not support that feature\n- Fix Reply-To header displaying (#1485314)\n- Mark form buttons that provide the most obvious operation (mainaction)\n- Added option 'quota_zero_as_unlimited' (#1484604)\n- Added PRE handling in html2text class (#1484740)\n- Added folder hierarchy collapsing\n- Added options to use syslog instead of log file (#1484850)\n- Added Logging & Debugging section in Installer\n- Fix In-Reply-To and References headers when composing saved draft message (#1485288)\n- Fix html message charset conversion for charsets with underline (#1485287) \n- Fix buttons status after contacts deletion (#1485233)\n- Fix escaping of To: and From: fields when building message body for reply or forward in the HTML editor (#1484904)\n- Use current mailbox name in template (#1485256)\n- Better fix for skipping untagged responses (#1485261)\n- Added pspell support patch by Kris Steinhoff (#1483960)\n- Enable spellchecker for HTML editor (#1485114)\n- Respect spellcheck_uri in tinyMCE spellchecker (#1484196)\n- Case insensitive contacts searching using PostgreSQL (#1485259)\n- Make default imap folders configurable for each user (#1485075)\n- Save outgoing mail to selectable folder (#1324581)\n- Fix hiding of mark menu when clicking th button again (#1484944)\n- Use long date format in print mode (#1485191)\n- Updated TinyMCE to version 3.1.0.1\n- Re-enable autocomplete attribute for login form (#1485211)\n- Check PERMANENTFLAGS before saving $MDNSent flag (#1484963, #1485163)\n- Added flag column on messages list (#1484623)\n- Patched Mail/MimePart.php (http://pear.php.net/bugs/bug.php?id=14232)\n- Allow trash/junk subfolders to be purged (#1485085)\n- Store compose parameters in session and redirect to a unique URL\n- Fixed CRAM-MD5 authentication (#1484819)\n- Fixed forwarding messages with one HTML attachment (#1484442)\n- Fixed encoding of message/rfc822 attachments and image/pjpeg handling (#1484914)\n- Added option to select skin in user preferences\n- Added option to configure displaying of attached images below the message body\n- Added option to display images in messages from known senders (#1484601)\n- User preferences grouped in more fieldsets\n- Fix corrupted MIME headers of messages in Sent folder (#1485111)\n- Fixed bug in MDB2 package: http://pear.php.net/bugs/bug.php?id=14124\n- Use keypress instead of keydown to select list's row (#1484816)\n- Don't call expunge and don't remove message row after message move if flag_for_deletion is set to true (#1485002)\n\nRELEASE 0.2-ALPHA\n-----------------\n- Added option to disable autocompletion from selected LDAP address books (#1484922)\n- TLS support in LDAP connections: 'use_tls' property (#1485104)\n- Fixed removing messages from search set after deleting them (#1485106)\n- imap.inc: Fixed iil_C_FetchStructureString() to handle many \n  literal strings in response (#1484969)\n- Support for subfolders in default/protected folders (#1484665)\n- Disallowed delimiter in folder name (#1484803)\n- Support \" and \\ in folder names\n- Escape \\ in login (#1484614)\n- Better HTML sanitization with the DOM-based washtml script (#1484701)\n- Fixed sorting of folders with non-ascii characters\n- Fixed Mysql DDL for default identities creation (#1485070)\n- In Preferences added possibility to configure 'read_when_deleted',\n  'mdn_requests', 'flag_for_deletion' options\n- Made IMAP auth type configurable (#1483825)\n- Fixed empty values with FROM_UNIXTIME() in rcube_mdb2 (#1485055)\n- Fixed attachment list on IE 6/7 (#1484807)\n- Fixed JavaScript in compose.html that shows cc/bcc fields if populated\n- Make password input fields of type password in installer (#1484886)\n- Don't attempt to delete cache entries if enable_caching is FALSE (#1485051)\n- Optimized messages sorting on servers without sort capability (#1485049)\n- Corrected message headers decoding when charset isn't specified and improved\n  support for native languages (#1485050, #1485048)\n- Expanded LDAP configuration options to support LDAP server writes.\n- Installer: encode special characters in DB username/password (#1485042)\n- Fixed management of folders with national characters in names (#1485036, #1485001)\n- Fixed identities saving when using MDB2 pgsql driver (#1485032)\n- Fixed BCC header reset (#1484997)\n- Improved messages list performance - patch from Justin Heesemann\n- Append skin_path to images location only when it starts with '/' sign (#1484859)\n- Fix IMAP response in message body when message has no body (#1484964)\n- Fixed non-RFC dates formatting (#1484901)\n- Fixed typo in set_charset() (#1484991)\n- Decode entities when inserting HTML signature to plain text message (#1484990)\n- HTML editing is now working with PHP5 updates and TinyMCE v3.0.6\n- Fixed signature loading on Windows (#1484545)\n- Added language support to HTML editing (#1484862)\n- Fixed remove signature when replying (#1333167)\n- Fixed problem with line with a space at the end (#1484916)\n- Fixed <!DOCTYPE> tag filtering (#1484391)\n- Fixed <?xml> tag filtering (#1484403)\n- Added sections (fieldset+label) in Settings interface\n- Mark as read in one action with message preview (#1484972)\n- Deleted redundant quota reads (#1484972)\n- Added options for empty trash and expunge inbox on logout (#1483863)\n- Removed lines wrapping when displaying message\n- Fixed month localization\n- Changed codebase to PHP5 with autoloader\n\nRELEASE 0.1.1\n-------------\n- Clear selection when selecting single item (#1484942)\n- Remove hard-coded image size in skin templates (#1484893)\n- Database schema improvements (dropped unnecessary indexes)\n- Fixed creating a new folder with a comma in its name (#1484681)\n- Fixed sorting of messages when default mailbox is empty (#1484317)\n- Improve message previewpane - less loading (#1484316)\n- Fixed login form autoompletion (#1484839)\n- Fixed virtuser_query option for mdb2 backend (#1484874)\n- Fixed attachment resoting from Drafts when message body was empty (#1484506)\n- Fixed usage of ob_gzhandler (#1484851)\n- Fixed message part window in IE6 (#1484610)\n- Fixed decoding of mime-encoded strings (#1484191)\n- Fixed some iconv/mb_string problems (#1484598)\n- Correctly quote mailbox name when using in URL (#1484313)\n- Fixed \"headers already sent\" errors (#1484860)\n\nRELEASE 0.1-STABLE\n------------------\n- Added interactive installer script\n- Fix folder adding/renaming inspired by #1484800\n- Localize folder name in page title (#1484785)\n- Fix code using wrong variable name (#1484018)\n- Allow to send mail with BCC recipients only\n- condense TinyMCE toolbar down to one line, removing table buttons (#1484747)\n- Add function to mark the selected messages as read/unread (#1457360)\n- Also do charset decoding as suggested in RFC 2231 (fix #1484321)\n- Show message count in folder list and hint when creating a subfolder\n- Distinguish ssl and tls for imap connections (#1484667)\n- Added some charset aliases to fix typical mis-labelling (#1484565)\n- Remember decision to display images for a certain message during session (#1484754)\n- Truncate attachment filenames to 55 characters due to an IE bug (#1484757)\n- Make sending of read receipts configurable\n- Respect config when localize folder names (#1484707)\n- Also respect receipt and priority settings when re-opening a draft message\n- Remember search results (closes #1483883), patch by the_glu\n- Add Received header on outgoing mail\n- Upgrade to TinyMCE 2.1.3\n- Allow inserting image attachments into HTML messages while composing (#1484557)\n- Implement Message-Disposition-Notification (Receipts)\n- Fix overriding of session vars when register_globals is on (#1484670)\n- Fix bug with case-sensitive folder names (#1484245)\n- Don't create default folders by default\n- Fixed some potential security risks (audited by Andris)\n- Only show new messages if they match the current search (#1484176)\n- Switch to/from when searcing in Sent folder (#1484555)\n- Correctly read the References header (#1484646)\n- Unset old cookie before sending a new value (#1484639)\n- Correctly decode attachments when downloading them (#1484645 and #1484642)\n- Suppress IE errors when clearing attachments form (#1484356)\n- Log error when login fails due to auto_create_user turned off\n- Filter linked/imported CSS files (closes #1484056)\n- Improve message compose screen (closes #1484383)\n- Select next row after removing one from list (#1484387)\n\nRELEASE 0.1-RC2\n---------------\n- Enable drag-&-dropping of folders to a new parent and allow to create subfolders (#1457344)\n- Suppress IE errors when clearing attachments form (#1484356)\n- Set preferences field in user table to NULL (#1484386)\n- Log error when login fails due to auto_create_user turned off\n- Filter linked/imported CSS files (closes #1484056)\n- Improve message compose screen (closes #1484383)\n- Select next row after removing one from list (#1484387)\n- Make smtp HELO/EHLO hostname configurable (#1484067)\n- IPv6 Compatability (#1484322), Patch #1484373\n- Unlock interface when message sending fails (#1484570)\n- Eval PHP code in template includes (if configured)\n- Show message when folder is empty. Mo more static text in table (#1484395)\n- Only display unread count in page title when new messages arrived\n- Fixed wrong delete button tooltip (#1483965)\n- Fixed charset encoding bug (#1484429)\n- Applied patch for LDAP version (#1484552)\n- Improved XHTML validation\n- Fix message list selection (#1484550)\n- Better fix lowercased usernames (#1484473)\n- Update pngbehavior Script as suggested in #1484490\n- Fixed moving/deleting messages when more than 1 is selected\n- Applied patch for LDAP contacts listing by Glen Ogilvie\n- Applied patch for more address fields in LDAP contacts (#1484402)\n- Add alternative for getallheaders() (fix #1484508)\n- Identify mailboxes case-sensitive\n- Sort mailbox list case-insensitive (closes #1484338)\n- Fix display of multipart messages from Apple Mail (closes #1484027)\n- Protect AJAX request from being fetched by a foreign site (XSS)\n- Make autocomplete for loginform configurable by the skin template\n- Fix compose function from address book (closes #1484426)\n- Added //IGNORE to iconv call (patch #1484420, closes #1484023)\n- Check if mbstring supports charset (#1484290 and #1484292)\n- Prefer iconv over mbstring (as suggested in #1484292)\n- Check filesize of template includes (#1484409)\n- Fixed bug with buttons not dimming/enabling properly after switching folders\n- Fixed compose window becoming unresponsive after saving a draft (#1484487)\n- Re-enabled \"Back\" button in compose window now that bug #1484487 is fixed\n- Fixed unresponsive interface issue when downloading attachments (#1484496)\n- Lowered status message time from 5 to 3 seconds to improve responsiveness\n- Raised .htaccess upload_max_filesize from 2M to 5M to differ from default php.ini\n- Increased \"mailboxcontrols\" mail.css width from 160 to 170px to fix non-english languages (#1484499)\n- Fix status message bug #1484464 with regard to #1484353\n- Fix address adding bug reported by David Koblas\n- Applied socket error patch by Thomas Mangin\n- Pass-by-reference workarround for PHP5 in sendmail.inc\n- Fixed buggy imap_root settings (closes #1484379)\n- Prevent default events on subject links (#1484399)\n- Use HTTP-POST requests for actions that change state\n\nRELEASE 0.1-RC1\n---------------\n- Use global filters and bind username/ for Ldap searches (#1484159)\n- Hide quota display if imap server does not support it\n- Hide address groups if no LDAP servers configured\n- Add link to message subjects (closes #1484257)\n- Better SQL query for contact listing/search (closes #1484369)\n- Fixed marking as read in preview pane (closes #1484364)\n- CSS hack to display attachments correctly in IE6\n- Wrap message body text (closes #1484148)\n- LDAP access is back in address book (closes #1484087)\n- Added search function for contacts\n- New Template parsing and output encoding\n- Fixed bugs #1484119 and #1483978\n- Fixed message moving procedure (closes #1484308)\n- Fixed display of multiple attachments (closes #1466563)\n- Fixed check for new messages (closes #1484310)\n- List attachments without filename\n- New session authentication: Change sessid cookie when login, authentication with sessauth cookie is now configurable.\n  Should close bugs #1483951 and #1484299\n- Correctly translate mailbox names (closes #1484276)\n- Quote e-mail address links (closes #1484300)\n- Updated PEAR::Mail_mime package\n- Accept single quotes for HTML attributes when modifying message body (thanks Jason)\n- Sanitize input for new users/identities (thanks Colin Alston)\n- Don't download HTML message parts\n- Convert HTML parts to plaintext if 'prefer_html' is off\n- Correctly parse message/rfc822 parts (closes #1484045)\n- Also use user_id for unique key in messages table (closes #1484074)\n- Hide contacts drop down on blur (closes #1484203)\n- Make entries in contacts drop down clickable\n- Turn off browser autocompletion on login page\n- Quote <? in text/html message parts\n- Hide border around radio buttons\n- Applied patch for attachment download by crichardson (closes #1484198)\n- Fixed bug in Postgres DB handling (closes #1484068)\n- Fixed bug of invalid calls to fetchRow() in rcube_db.inc (closes #1484280)\n- Fixed array_merge bug (closes #1484281)\n- Fixed flag for deletion in list view (closes #1484264)\n- Finally support semicolons as recipient separator (closes ##1484251)\n- Fixed message headers (subject) encoding\n- check if safe mode is on or not (closes #1484269)\n- Show \"no subject\" in message list if subject is missing (closes #1484243)\n- Solved page caching of message preview (closes #1484153)\n- Only use gzip compression if configured (closes #1484236)\n- Fixed priority selector issue (#1484150)\n- Fixed some CSS issues in default skin (closes #1484210 and #1484161)\n- Prevent from double quoting of numeric HTML character references (closes #1484253)\n- Fixed display of HTML message attachments (closes #1484178)\n- Applied patch for preview caching (closes #1484186)\n- Added error handling for attachment uploads\n- Use multibyte safe string functions where necessary (closes #1483988)\n- Applied security patch to validate the submitted host value (by Kees Cook)\n- Applied security patch to validate input values when deleting contacts (by Kees Cook)\n- Applied security patch that sanitizes emoticon paths when attaching them (by Kees Cook)\n- Applied a patch to more aggressively sanitize a HTML message\n- Visualize blocked images in HTML messages\n- Fixed wrong message listing when showing search results (closes #1484131)\n- Show remote images when opening HTML message part as attachment\n- Improve memory usage when sending mail (closes #1484098)\n- Mark messages as read once the preview is loaded (closes #1484132)\n- Include smtp final response in log (closes #1484081)\n- Corrected date string in sent message header (closes #1484125)\n- Correclty choose \"To\" column in sent and draft mailboxes (closes #1483943)\n- Changed srong tooltips for message browse buttons (closes #1483930)\n- Fixed signature delimeter character to be standard (Bug #1484035)\n- Fixed XSS vulnerability (Bug #1484109)\n- Remove newlines from mail headers (Bug #1484031)\n- Selection issues when moving/deleting (Bug #1484044)\n- Applied patch of Clement Moulin for imap host auto-selection\n- ISO-encode IMAP password for plaintext login (Bugs #1483977 & #1483886)\n- Fixed folder name encoding in subscription list (Bug #1484113)\n- Fixed JS errors in identity list (Bug #1484120)\n- Translate foldernames in folder form (closes #1484113)\n- Added first and last buttons to message list, address book\n  and message detail\n- Pressing Shift-Del bypasses Trash folder\n- Enable purge command for Junk folder\n- Fetch all aliases if virtuser_query is used instead\n- Re-enabled multi select of contacts (Bug #1484017)\n- Enable contact editing right after creation (Bug #1459641)\n- Correct UTF-7 to UTF-8 conversion if mbstring is not available\n- Fixed IMAP fetch of message body (Bug #1484019)\n- Fixed safe_mode problems (Bug #1418381)\n- Fixed wrong header encoding (Bug #1483976)\n- Made automatic draft saving configurable\n- Fixed JS bug when renaming folders (Bug #1483989)\n- Added quota display as image (by Brett Patterson)\n- Corrected creation of a message-id\n- New indentation for quoted message text\n- Improved HTML validity\n- Fixed URL character set (Ticket #1445501)\n- Fixed saving of contact into MySQL from LDAP query results (Ticket #1483820)\n- Fixed folder renaming: unsubscribe before rename (Bug #1483920)\n- Finalized new message parsing (+ chaching)\n- Fixed wrong usage of mbstring (Bug #1462439)\n- Set default spelling language (Ticket #1483938)\n- Added support for Nox Spell Server\n- Re-built message parsing (Bug #1327068)\n  Now based on the message structure delivered by the IMAP server.\n- Fixed some XSS and SQL injection issues\n- Fixed charset problems with folder renaming\n", "<?php\n\n/**\n +-----------------------------------------------------------------------+\n | program/steps/mail/get.inc                                            |\n |                                                                       |\n | This file is part of the Roundcube Webmail client                     |\n | Copyright (C) 2005-2013, The Roundcube Dev Team                       |\n |                                                                       |\n | Licensed under the GNU General Public License version 3 or            |\n | any later version with exceptions for skins & plugins.                |\n | See the README file for a full license statement.                     |\n |                                                                       |\n | PURPOSE:                                                              |\n |   Delivering a specific part of a mail message                        |\n |                                                                       |\n +-----------------------------------------------------------------------+\n | Author: Thomas Bruederli <roundcube@gmail.com>                        |\n +-----------------------------------------------------------------------+\n*/\n\n\n// show loading page\nif (!empty($_GET['_preload'])) {\n    $_get = $_GET + array('_mimewarning' => 1, '_embed' => 1);\n    unset($_get['_preload']);\n    $url = $RCMAIL->url($_get);\n    $message = $RCMAIL->gettext('loadingdata');\n\n    header('Content-Type: text/html; charset=' . RCUBE_CHARSET);\n    print \"<html>\\n<head>\\n\"\n        . '<meta http-equiv=\"refresh\" content=\"0; url='.rcube::Q($url).'\">' . \"\\n\"\n        . '<meta http-equiv=\"content-type\" content=\"text/html; charset='.RCUBE_CHARSET.'\">' . \"\\n\"\n        . \"</head>\\n<body>\\n$message\\n</body>\\n</html>\";\n    exit;\n}\n\nob_end_clean();\n\n// similar code as in program/steps/mail/show.inc\nif (!empty($_GET['_uid'])) {\n    $uid = rcube_utils::get_input_value('_uid', rcube_utils::INPUT_GET);\n    $RCMAIL->config->set('prefer_html', true);\n    $MESSAGE = new rcube_message($uid, null, intval($_GET['_safe']));\n}\n\n// check connection status\ncheck_storage_status();\n\n$part_id = rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC);\n\n// show part page\nif (!empty($_GET['_frame'])) {\n    if ($part_id && ($part = $MESSAGE->mime_parts[$part_id])) {\n        $filename = rcmail_attachment_name($part);\n        $OUTPUT->set_pagetitle($filename);\n    }\n\n    // register UI objects\n    $OUTPUT->add_handlers(array(\n        'messagepartframe'    => 'rcmail_message_part_frame',\n        'messagepartcontrols' => 'rcmail_message_part_controls',\n    ));\n\n    $OUTPUT->set_env('mailbox', $RCMAIL->storage->get_folder());\n    $OUTPUT->set_env('uid', $uid);\n    $OUTPUT->set_env('part', $part_id);\n    $OUTPUT->set_env('filename', $filename);\n\n    $OUTPUT->send('messagepart');\n    exit;\n}\n\n// render thumbnail of an image attachment\nelse if ($_GET['_thumb']) {\n    $pid = rcube_utils::get_input_value('_part', rcube_utils::INPUT_GET);\n    if ($part = $MESSAGE->mime_parts[$pid]) {\n        $thumbnail_size = $RCMAIL->config->get('image_thumbnail_size', 240);\n        $temp_dir       = $RCMAIL->config->get('temp_dir');\n        $mimetype       = $part->mimetype;\n        $file_ident     = $MESSAGE->headers->messageID . ':' . $part->mime_id . ':' . $part->size . ':' . $part->mimetype;\n        $cache_basename = $temp_dir . '/' . md5($file_ident . ':' . $RCMAIL->user->ID . ':' . $thumbnail_size);\n        $cache_file     = $cache_basename . '.thumb';\n\n        // render thumbnail image if not done yet\n        if (!is_file($cache_file)) {\n            if ($fp = fopen(($orig_name = $cache_basename . '.tmp'), 'w')) {\n                $MESSAGE->get_part_body($part->mime_id, false, 0, $fp);\n                fclose($fp);\n\n                $image = new rcube_image($orig_name);\n                if ($imgtype = $image->resize($thumbnail_size, $cache_file, true)) {\n                    $mimetype = 'image/' . $imgtype;\n                    unlink($orig_name);\n                }\n                else if (stripos($mimetype, 'image/svg') === 0) {\n                    $content = rcmail_svg_filter(file_get_contents($orig_name));\n                    file_put_contents($cache_file, $content);\n                    unlink($orig_name);\n                }\n                else {\n                    rename($orig_name, $cache_file);\n                }\n            }\n        }\n\n        if (is_file($cache_file)) {\n            header('Content-Type: ' . $mimetype);\n            readfile($cache_file);\n        }\n    }\n\n    exit;\n}\nelse if (strlen($part_id)) {\n    if ($part = $MESSAGE->mime_parts[$part_id]) {\n        $mimetype = rcmail_fix_mimetype($part->mimetype);\n\n        // allow post-processing of the message body\n        $plugin = $RCMAIL->plugins->exec_hook('message_part_get', array(\n            'uid'      => $MESSAGE->uid,\n            'id'       => $part->mime_id,\n            'mimetype' => $mimetype,\n            'part'     => $part,\n            'download' => !empty($_GET['_download'])\n        ));\n\n        if ($plugin['abort']) {\n            exit;\n        }\n\n        // overwrite modified vars from plugin\n        $mimetype   = $plugin['mimetype'];\n        $extensions = rcube_mime::get_mime_extensions($mimetype);\n\n        if ($plugin['body']) {\n            $body = $plugin['body'];\n        }\n\n        // compare file mimetype with the stated content-type headers and file extension to avoid malicious operations\n        if (!empty($_REQUEST['_embed']) && empty($_REQUEST['_nocheck'])) {\n            $file_extension = strtolower(pathinfo($part->filename, PATHINFO_EXTENSION));\n\n            // 1. compare filename suffix with expected suffix derived from mimetype\n            $valid = $file_extension && in_array($file_extension, (array)$extensions) || empty($extensions) || !empty($_REQUEST['_mimeclass']);\n\n            // 2. detect the real mimetype of the attachment part and compare it with the stated mimetype and filename extension\n            if ($valid || !$file_extension || $mimetype == 'application/octet-stream' || stripos($mimetype, 'text/') === 0) {\n                $tmp_body = $body ?: $MESSAGE->get_part_body($part->mime_id, false, 2048);\n\n                // detect message part mimetype\n                $real_mimetype = rcube_mime::file_content_type($tmp_body, $part->filename, $mimetype, true, true);\n                list($real_ctype_primary, $real_ctype_secondary) = explode('/', $real_mimetype);\n\n                // accept text/plain with any extension\n                if ($real_mimetype == 'text/plain' && $real_mimetype == $mimetype) {\n                    $valid_extension = true;\n                }\n                // ignore differences in text/* mimetypes. Filetype detection isn't very reliable here\n                else if ($real_ctype_primary == 'text' && strpos($mimetype, $real_ctype_primary) === 0) {\n                    $real_mimetype   = $mimetype;\n                    $valid_extension = true;\n                }\n                // ignore filename extension if mimeclass matches (#1489029)\n                else if (!empty($_REQUEST['_mimeclass']) && $real_ctype_primary == $_REQUEST['_mimeclass']) {\n                    $valid_extension = true;\n                }\n                else {\n                    // get valid file extensions\n                    $extensions      = rcube_mime::get_mime_extensions($real_mimetype);\n                    $valid_extension = !$file_extension || empty($extensions) || in_array($file_extension, (array)$extensions);\n                }\n\n                // fix mimetype for images wrongly declared as octet-stream\n                if ($mimetype == 'application/octet-stream' && strpos($real_mimetype, 'image/') === 0 && $valid_extension) {\n                    $mimetype = $real_mimetype;\n                }\n\n                // \"fix\" real mimetype the same way the original is before comparison\n                $real_mimetype = rcmail_fix_mimetype($real_mimetype);\n\n                $valid = $real_mimetype == $mimetype && $valid_extension;\n            }\n            else {\n                $real_mimetype = $mimetype;\n            }\n\n            // show warning if validity checks failed\n            if (!$valid) {\n                // send blocked.gif for expected images\n                if (empty($_REQUEST['_mimewarning']) && strpos($mimetype, 'image/') === 0) {\n                    // Do not cache. Failure might be the result of a misconfiguration, thus real content should be returned once fixed. \n                    $content = $RCMAIL->get_resource_content('blocked.gif');\n                    $OUTPUT->nocacheing_headers();\n                    header(\"Content-Type: image/gif\");\n                    header(\"Content-Transfer-Encoding: binary\");\n                    header(\"Content-Length: \" . strlen($content));\n                    echo $content;\n                }\n                else {  // html warning with a button to load the file anyway\n                    $OUTPUT = new rcmail_html_page();\n                    $OUTPUT->write(html::tag('html', null, html::tag('body', 'embed',\n                        html::div(array('class' => 'rcmail-inline-message rcmail-inline-warning'),\n                            $RCMAIL->gettext(array(\n                                'name' => 'attachmentvalidationerror',\n                                'vars' => array(\n                                    'expected' => $mimetype . ($file_extension ? \" (.$file_extension)\" : ''),\n                                    'detected' => $real_mimetype . ($extensions[0] ? \" (.$extensions[0])\" : ''),\n                                )\n                            ))\n                            . html::p(array('class' => 'rcmail-inline-buttons'),\n                                html::tag('button', array(\n                                    'onclick' => \"location.href='\" . $RCMAIL->url(array_merge($_GET, array('_nocheck' => 1))) . \"'\"\n                                ),\n                                $RCMAIL->gettext('showanyway'))\n                            )\n                        ))));\n                }\n\n                exit;\n            }\n        }\n\n\n        // TIFF to JPEG conversion, if needed\n        $tiff_support = !empty($_SESSION['browser_caps']) && !empty($_SESSION['browser_caps']['tif']);\n        if (!empty($_REQUEST['_embed']) && !$tiff_support\n            && rcube_image::is_convertable('image/tiff')\n            && rcmail_part_image_type($part) == 'image/tiff'\n        ) {\n            $tiff2jpeg = true;\n            $mimetype  = 'image/jpeg';\n        }\n\n\n        $browser = $RCMAIL->output->browser;\n        list($ctype_primary, $ctype_secondary) = explode('/', $mimetype);\n\n        if (!$plugin['download'] && $ctype_primary == 'text') {\n            header(\"Content-Type: text/$ctype_secondary; charset=\" . ($part->charset ?: RCUBE_CHARSET));\n        }\n        else {\n            header(\"Content-Type: $mimetype\");\n            header(\"Content-Transfer-Encoding: binary\");\n        }\n\n        // deliver part content\n        if ($ctype_primary == 'text' && $ctype_secondary == 'html' && empty($plugin['download'])) {\n            // Check if we have enough memory to handle the message in it\n            // #1487424: we need up to 10x more memory than the body\n            if (!rcube_utils::mem_check($part->size * 10)) {\n                $out = '<body>' . $RCMAIL->gettext('messagetoobig'). ' '\n                    . html::a('?_task=mail&_action=get&_download=1&_uid='.$MESSAGE->uid.'&_part='.$part->mime_id\n                        .'&_mbox='. urlencode($MESSAGE->folder), $RCMAIL->gettext('download')) . '</body></html>';\n            }\n            else {\n                // get part body if not available\n                if (!isset($body)) {\n                    $body = $MESSAGE->get_part_body($part->mime_id, true);\n                }\n\n                // show images?\n                rcmail_check_safe($MESSAGE);\n\n                // render HTML body\n                $out = rcmail_print_body($body, $part, array('safe' => $MESSAGE->is_safe, 'inline_html' => false));\n\n                // insert remote objects warning into HTML body\n                if ($REMOTE_OBJECTS) {\n                    $body_start = 0;\n                    if ($body_pos = strpos($out, '<body')) {\n                        $body_start = strpos($out, '>', $body_pos) + 1;\n                    }\n\n                    $out = substr($out, 0, $body_start)\n                        . html::div(array('class' => 'rcmail-inline-message rcmail-inline-warning'),\n                            rcube::Q($RCMAIL->gettext('blockedimages')) . '&nbsp;' .\n                            html::tag('button',\n                                array('onclick' => \"location.href='\" . $RCMAIL->url(array_merge($_GET, array('_safe' => 1))) . \"'\"),\n                                rcube::Q($RCMAIL->gettext('showimages')))\n                        )\n                        . substr($out, $body_start);\n                }\n            }\n\n            // check connection status\n            if ($part->size && empty($body)) {\n                check_storage_status();\n            }\n\n            $OUTPUT = new rcmail_html_page();\n            $OUTPUT->write($out);\n        }\n        else {\n            // don't kill the connection if download takes more than 30 sec.\n            @set_time_limit(0);\n\n            $filename = rcmail_attachment_name($part);\n\n            if ($browser->ie)\n                $filename = rawurlencode($filename);\n            else\n                $filename = addcslashes($filename, '\"');\n\n            $disposition = !empty($plugin['download']) ? 'attachment' : 'inline';\n\n            // Workaround for nasty IE bug (#1488844)\n            // If Content-Disposition header contains string \"attachment\" e.g. in filename\n            // IE handles data as attachment not inline\n            if ($disposition == 'inline' && $browser->ie && $browser->ver < 9) {\n                $filename = str_ireplace('attachment', 'attach', $filename);\n            }\n\n            // add filename extension if missing\n            if (!pathinfo($filename, PATHINFO_EXTENSION) && ($extensions = rcube_mime::get_mime_extensions($mimetype))) {\n                $filename .= '.' . $extensions[0];\n            }\n\n            header(\"Content-Disposition: $disposition; filename=\\\"$filename\\\"\");\n\n            // handle tiff to jpeg conversion\n            if (!empty($tiff2jpeg)) {\n                $temp_dir  = unslashify($RCMAIL->config->get('temp_dir'));\n                $file_path = tempnam($temp_dir, 'rcmAttmnt');\n\n                // write content to temp file\n                if ($body) {\n                    $saved = file_put_contents($file_path, $body);\n                }\n                else if ($part->size) {\n                    $fd    = fopen($file_path, 'w');\n                    $saved = $MESSAGE->get_part_body($part->mime_id, false, 0, $fd);\n                    fclose($fd);\n                }\n\n                // convert image to jpeg and send it to the browser\n                if ($sent = $saved) {\n                    $image = new rcube_image($file_path);\n                    if ($image->convert(rcube_image::TYPE_JPG, $file_path)) {\n                        header(\"Content-Length: \" . filesize($file_path));\n                        readfile($file_path);\n                    }\n                    unlink($file_path);\n                }\n            }\n            else {\n                $sent = rcmail_message_part_output($body, $part, $mimetype, $plugin['download']);\n            }\n\n            // check connection status\n            if ($part->size && !$sent) {\n                check_storage_status();\n            }\n        }\n\n        exit;\n    }\n}\n// print message\nelse {\n    // send correct headers for content type\n    header(\"Content-Type: text/html\");\n\n    $cont = \"<html>\\n<head><title></title>\\n</head>\\n<body>\";\n    $cont .= rcmail_message_body(array());\n    $cont .= \"\\n</body>\\n</html>\";\n\n    $OUTPUT = new rcmail_html_page();\n    $OUTPUT->write($cont);\n\n    exit;\n}\n\n\n// if we arrive here, the requested part was not found\nheader('HTTP/1.1 404 Not Found');\nexit;\n\n/**\n * Handles nicely storage connection errors\n */\nfunction check_storage_status()\n{\n    $error = rcmail::get_instance()->storage->get_error_code();\n\n    // Check if we have a connection error\n    if ($error == rcube_imap_generic::ERROR_BAD) {\n        ob_end_clean();\n\n        // Get action is often executed simultanously.\n        // Some servers have MAXPERIP or other limits.\n        // To workaround this we'll wait for some time\n        // and try again (once).\n        // Note: Random sleep interval is used to minimize concurency\n        // in getting message parts\n\n        if (!isset($_GET['_redirected'])) {\n            usleep(rand(10,30)*100000); // 1-3 sec.\n            header('Location: ' . $_SERVER['REQUEST_URI'] . '&_redirected=1');\n        }\n        else {\n            rcube::raise_error(array(\n                'code' => 500, 'type' => 'php',\n                'file' => __FILE__, 'line' => __LINE__,\n                'message' => 'Unable to get/display message part. IMAP connection error'),\n                true, true);\n        }\n\n        // Don't kill session, just quit (#1486995)\n        exit;\n    }\n}\n\n/**\n * Attachment properties table\n */\nfunction rcmail_message_part_controls($attrib)\n{\n    global $MESSAGE, $RCMAIL;\n\n    $part = asciiwords(rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC));\n    if (!is_object($MESSAGE) || !is_array($MESSAGE->parts)\n        || !($_GET['_uid'] && $_GET['_part']) || !$MESSAGE->mime_parts[$part]\n    ) {\n        return '';\n    }\n\n    $part  = $MESSAGE->mime_parts[$part];\n    $table = new html_table(array('cols' => 2));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('namex')).':');\n    $table->add('header', rcube::Q(rcmail_attachment_name($part)));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('type')).':');\n    $table->add('header', rcube::Q($part->mimetype));\n\n    $table->add('title', rcube::Q($RCMAIL->gettext('size')).':');\n    $table->add('header', rcube::Q($RCMAIL->message_part_size($part)));\n\n    return $table->show($attrib);\n}\n\n/**\n * Attachment preview frame\n */\nfunction rcmail_message_part_frame($attrib)\n{\n    global $MESSAGE, $RCMAIL;\n\n    $part = $MESSAGE->mime_parts[asciiwords(rcube_utils::get_input_value('_part', rcube_utils::INPUT_GPC))];\n    $ctype_primary = strtolower($part->ctype_primary);\n\n    $attrib['src'] = './?' . str_replace('_frame=', ($ctype_primary=='text' ? '_embed=' : '_preload='), $_SERVER['QUERY_STRING']);\n\n    $RCMAIL->output->add_gui_object('messagepartframe', $attrib['id']);\n\n    return html::iframe($attrib);\n}\n\n/**\n * Output attachment body with content filtering\n */\nfunction rcmail_message_part_output($body, $part, $mimetype, $download)\n{\n    global $MESSAGE, $RCMAIL;\n\n    if (!$part->size && !$body) {\n        return false;\n    }\n\n    $browser = $RCMAIL->output->browser;\n    $secure  = stripos($mimetype, 'image/') === false || $download;\n\n    // Remove <script> in SVG images\n    if (!$secure && stripos($mimetype, 'image/svg') === 0) {\n        if (!$body) {\n            $body = $MESSAGE->get_part_body($part->mime_id, false);\n            if (empty($body)) {\n                return false;\n            }\n        }\n\n        echo rcmail_svg_filter($body);\n        return true;\n    }\n\n    // Remove dangerous content in images for older IE (to be removed)\n    if (!$secure && $browser->ie && $browser->ver <= 8) {\n        if ($body) {\n            echo preg_match('/<(script|iframe|object)/i', $body) ? '' : $body;\n            return true;\n        }\n        else {\n            $stdout = fopen('php://output', 'w');\n            stream_filter_register('rcube_content', 'rcube_content_filter') or die('Failed to register content filter');\n            stream_filter_append($stdout, 'rcube_content');\n            return $MESSAGE->get_part_body($part->mime_id, true, 0, $stdout);\n        }\n    }\n\n    if ($body && !$download) {\n        header(\"Content-Length: \" . strlen($body));\n        echo $body;\n        return true;\n    }\n\n    // Don't be tempted to set Content-Length to $part->d_parameters['size'] (#1490482)\n    // RFC2183 says \"The size parameter indicates an approximate size\"\n\n    return $MESSAGE->get_part_body($part->mime_id, false, 0, -1);\n}\n\n/**\n * Remove <script> in SVG images\n */\nfunction rcmail_svg_filter($body)\n{\n    $dom = new DOMDocument;\n    $dom->loadXML($body);\n\n    foreach ($dom->getElementsByTagName('script') as $node) {\n        $node->parentNode->removeChild($node);\n    }\n\n    return $dom->saveXML() ?: '';\n}\n"], "filenames": ["CHANGELOG", "program/steps/mail/get.inc"], "buggy_code_start_loc": [12, 95], "buggy_code_end_loc": [12, 477], "fixing_code_start_loc": [13, 96], "fixing_code_end_loc": [14, 527], "type": "CWE-79", "message": "Cross-site scripting (XSS) vulnerability in Roundcube Webmail before 1.0.9 and 1.1.x before 1.1.5 allows remote attackers to inject arbitrary web script or HTML via a crafted SVG, a different vulnerability than CVE-2016-4068.", "other": {"cve": {"id": "CVE-2015-8864", "sourceIdentifier": "security@debian.org", "published": "2017-04-13T14:59:01.197", "lastModified": "2018-10-30T16:27:37.467", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-site scripting (XSS) vulnerability in Roundcube Webmail before 1.0.9 and 1.1.x before 1.1.5 allows remote attackers to inject arbitrary web script or HTML via a crafted SVG, a different vulnerability than CVE-2016-4068."}, {"lang": "es", "value": "La vulnerabilidad XSS en Roundcube Webmail en versiones anteriores a 1.0.9 y 1.1.x en versiones anteriores a 1.1.5 permite a atacantes remotos inyectar secuencias de comandos web o HTML a trav\u00e9s de un SVG manipulado, una vulnerabilidad diferente a CVE-2016-4068."}], "metrics": {"cvssMetricV30": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:o:opensuse:leap:42.1:*:*:*:*:*:*:*", "matchCriteriaId": "4863BE36-D16A-4D75-90D9-FD76DB5B48B7"}, {"vulnerable": true, "criteria": "cpe:2.3:o:opensuse:opensuse:13.1:*:*:*:*:*:*:*", "matchCriteriaId": "A10BC294-9196-425F-9FB0-B1625465B47F"}, {"vulnerable": true, "criteria": "cpe:2.3:o:opensuse:opensuse:13.2:*:*:*:*:*:*:*", "matchCriteriaId": "03117DF1-3BEC-4B8D-AD63-DBBDB2126081"}]}]}, {"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:roundcube_webmail:1.1.1:*:*:*:*:*:*:*", "matchCriteriaId": "DDB20CBA-5A6E-4AAA-8ACF-91FF96488F4E"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:roundcube_webmail:1.1.2:*:*:*:*:*:*:*", "matchCriteriaId": "879B0231-CCBE-46C6-A270-FAE9153083E1"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:roundcube_webmail:1.1.3:*:*:*:*:*:*:*", "matchCriteriaId": "9F775761-4DC1-4A73-A809-0B0F267FA572"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:webmail:*:*:*:*:*:*:*:*", "versionEndIncluding": "1.0.8", "matchCriteriaId": "B923FB14-6700-4341-B63B-B09414C5C077"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:webmail:1.1:*:*:*:*:*:*:*", "matchCriteriaId": "55D54918-3ADC-4424-8F00-2E546803D94C"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:webmail:1.1:beta:*:*:*:*:*:*", "matchCriteriaId": "F43DB37D-E806-4404-B589-5A987E6E0659"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:webmail:1.1:rc:*:*:*:*:*:*", "matchCriteriaId": "A4BB6095-C0D9-4D0A-9E8F-138BA1C19784"}, {"vulnerable": true, "criteria": "cpe:2.3:a:roundcube:webmail:1.1.4:*:*:*:*:*:*:*", "matchCriteriaId": "4994583F-12AE-485C-B76C-C914A06D98F4"}]}]}], "references": [{"url": "http://lists.opensuse.org/opensuse-updates/2016-08/msg00078.html", "source": "security@debian.org", "tags": ["Third Party Advisory"]}, {"url": "http://lists.opensuse.org/opensuse-updates/2016-08/msg00079.html", "source": "security@debian.org", "tags": ["Third Party Advisory"]}, {"url": "http://lists.opensuse.org/opensuse-updates/2016-08/msg00095.html", "source": "security@debian.org", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/roundcube/roundcubemail/commit/40d7342dd9c9bd2a1d613edc848ed95a4d71aa18", "source": "security@debian.org", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/roundcube/roundcubemail/issues/4949", "source": "security@debian.org", "tags": ["Third Party Advisory"]}, {"url": "https://github.com/roundcube/roundcubemail/releases/tag/1.0.9", "source": "security@debian.org", "tags": ["Release Notes", "Third Party Advisory"]}, {"url": "https://github.com/roundcube/roundcubemail/releases/tag/1.1.5", "source": "security@debian.org", "tags": ["Release Notes", "Third Party Advisory"]}, {"url": "https://github.com/roundcube/roundcubemail/wiki/Changelog#release-115", "source": "security@debian.org", "tags": ["Release Notes", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/roundcube/roundcubemail/commit/40d7342dd9c9bd2a1d613edc848ed95a4d71aa18"}}