{"buggy_code": ["// JavaScript Document\nmw.require('forms.js');\n\nmw.restore = {\n\n\tupload: function(src) {\n\t\tdata = {}\n\t\tdata.src=src;\n\t\t$.post(route('admin.backup.upload'), data ,\n\t\t\tfunction(msg) {\n\t\t\t\tmw.reload_module('admin/backup/manage');\n\t\t\t\tmw.notification.msg(msg, 5000);\n\t\t\t});\n\t},\n\n\tremove: function($id, $selector_to_hide) {\n\t\tmw.tools.confirm(mw.msg.del, function() {\n\t\t\tdata = {}\n\t\t\tdata.id = $id;\n\t\t\t$.post(route('admin.backup.delete'), data, function(resp) {\n\t\t\t\tmw.notification.msg(resp);\n\t\t\t\tif ($selector_to_hide != undefined) {\n\t\t\t\t\tmw.reload_module('admin/backup/manage');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\timport: function(src) {\n\n\t\tvar importOptions = '<div class=\"mw-backup-v2-import\">'+\n\n\t\t'<div class=\"mw-backup-v2-import-options\">'+\n\t\t'<img src=\"'+moduleImagesUrl+'1.png\" class=\"import-image import-image-1\" />'+\n\t\t'<img src=\"'+moduleImagesUrl+'2.png\" class=\"import-image import-image-2\" />'+\n\t\t'<img src=\"'+moduleImagesUrl+'3.png\" class=\"import-image import-image-3\" />'+\n\n\t\t'<h2 style=\"font-weight: bold\">How do you like to restore your content?</h2>'+\n\t\t'<br />'+\n\n\t\t'<label class=\"mw-ui-check mw-backup-v2-import-option\">' +\n\t\t'<div class=\"option-radio\">'+\n\t\t'<input type=\"radio\" name=\"import_by_type\" value=\"1\" />'+\n\t\t'<span></span>'+\n\t\t'</div>'+\n\t\t'<h3>Delete all website content & restore</h3>'+\n\t\t'<p></p>'+\n\t\t'</label>'+\n\n\n        '<label class=\"mw-ui-check mw-backup-v2-import-option active\">' +\n        '<div class=\"option-radio\">'+\n        '<input type=\"radio\" name=\"import_by_type\" checked=\"checked\" value=\"2\" />'+\n        '<span></span>'+\n        '</div>'+\n        '<h3>Overwrite the website content from backup</h3>'+\n        '<p></p>'+\n        '</label>'+\n\n\n        '<label class=\"mw-ui-check mw-backup-v2-import-option\">' +\n        '<div class=\"option-radio\">'+\n        '<input type=\"radio\" name=\"import_by_type\" value=\"3\" />'+\n        '<span></span>'+\n        '</div>'+\n        '<h3>Try to overwrite content by Names & Titles</h3>'+\n        '<p></p>'+\n        '</label>'+\n\n\t\t'</div>' +\n\n\t\t'<div style=\"margin-bottom:20px;\" class=\"js-backup-import-installation-language-wrapper\"></div>'+\n\t\t'<div class=\"backup-import-modal-log-progress\"></div>'+\n\n\t\t'<div class=\"mw-backup-v2-import-buttons\">'+\n\t\t'<a class=\"btn btn-link button-cancel\" onClick=\"mw.restore.close_import_modal();\">Close</a>'+\n\t\t'<button class=\"btn btn-primary btn-rounded button-start\" onclick=\"mw.restore.start_import_button()\" type=\"submit\">Start Restore</button>'+\n\t\t'</div>'+\n\n\t\t'</div>'\n\t\t;\n\n\t\timportModal = mw.dialog({\n\t\t\twidth: 680,\n\t\t    content: importOptions,\n\t\t    title: importContentFromFileText,\n\t\t    id: 'mw_backup_import_modal'\n\t\t});\n\n        changeImportImages(2);\n\n\t\tdata = {};\n\t\tdata.id = src;\n\t},\n\n\tclose_import_modal: function() {\n        importModal.remove();\n\t},\n\n\tstart_import_button: function (src) {\n\n        $('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html('Generating session id...');\n\n        $.get(route('admin.backup.generate-session-id'), {}, function (data) {\n\n            $('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html('Loading file...');\n            $('#mw_backup_import_modal').find('.mw-backup-v2-import-options').slideUp();\n\n            mw.restore.init_progress(1);\n            mw.restore.start_import(data.session_id);\n            mw.restore.get_log_check('start');\n\n        });\n\n\t},\n\n\tstart_import: function (session_id) {\n\n\n\t\tmw.notification.success('Importing...', 10000, 'import');\n\n\t\t$('.button-start').addClass('disabled');\n\n\t\t$('.backup-import-modal-log-progress').show();\n\n        var import_by_type = $('input[name=\"import_by_type\"]:checked').val();\n\n        data.session_id = session_id;\n\n\t\tdata.installation_language = $('.js-backup-import-installation-language').val();\n\n\t\tif (import_by_type == '1') {\n            data.import_by_type = 'delete_all';\n        }\n        if (import_by_type == '2') {\n            data.import_by_type = 'overwrite_by_id';\n        }\n        if (import_by_type == '3') {\n            data.import_by_type = 'overwrite_by_titles';\n        }\n\n\t\t$.ajax({\n\t\t  dataType: \"json\",\n\t\t  url: route('admin.backup.restore'),\n\t\t  data: data,\n\t\t  success: function(json_data) {\n\n\t\t\tif (json_data.error) {\n\t\t\t\t$('.button-start').removeClass('disabled');\n\t\t\t\t$('#backup-import-progressbar').remove();\n\t\t\t\tmw.restore.get_log_check('stop');\n\t\t\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log').before('<h3>Error!</h3><br />' + json_data.error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (json_data.done) {\n\t\t\t\tmw.restore.get_progress(100);\n\t\t\t\tmw.restore.get_log_check('stop');\n\t\t\t\t//mw.spinner({element: \".button-start\", size: 30, color: 'white'}).hide()\n\t\t\t\t$('.button-start').removeClass('disabled');\n\n\t\t\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log').before('<h3>All data is restored successfully!</h3>');\n                $('#mw_backup_import_modal').find('.button-start').html('Done');\n                $('#mw_backup_import_modal').find('.button-start').attr('onClick', 'mw.restore.close_import_modal();').html('Done!');\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tmw.restore.get_progress(json_data.precentage);\n\t\t\t\tif($('.backup-import-modal-log').length > 0){\n\t\t\t\t\t$('.backup-import-modal-log')[0].scrollTop =$('.backup-import-modal-log')[0].scrollHeight;\n\t\t\t\t}\n\t\t\t\tsetTimeout(function(){\n                    mw.restore.start_import(json_data.session_id);\n                }, 300);\n\n\t\t\t}\n\t\t  }\n\t\t});\n\t},\n\n\tget_log_check: function(action = 'start') {\n\n\t\tvar importLogInterval = setInterval(function() {\n\t\t\tmw.restore.get_log();\n\t\t}, 2000);\n\n\t\tif (action == 'stop') {\n\t\t\tfor(i=0; i<10000; i++) {\n\t\t        window.clearInterval(i);\n\t\t    }\n\t\t}\n\n\t},\n\n\tget_progress: function(precent) {\n\t\t$('.mw-ui-progress-bar').css('width', precent+'%');\n\t\t$('.mw-ui-progress-percent').html(precent);\n\t},\n\n\tinit_progress: function(precent) {\n\t\tvar progressbar = '<div class=\"mw_install_progress\">'+\n\t        '<div class=\"mw-ui-progress\" id=\"backup-import-progressbar\">'+\n\t            '<div class=\"mw-ui-progress-bar\" style=\"width: '+precent+'%;\"></div>'+\n\t            '<div class=\"mw-ui-progress-info\">Importing...</div>'+\n\t            '<span class=\"mw-ui-progress-percent\">'+precent+'%</span>'+\n\t        '</div>'+\n\t        '<div class=\"backup-import-modal-log\"></div>'+\n\t    '</div>';\n\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html(progressbar);\n\t},\n\n\tget_log: function() {\n\t\t$.ajax({\n\t\t    url: userfilesUrl + 'cache/backup/backup-session.log',\n\t\t    success: function (data) {\n\t\t    \tdata = data.replace(/\\n/g, \"<br />\");\n\t\t    \t$('#mw_backup_import_modal').find('.backup-import-modal-log').html(data);\n\t\t    },\n\t\t    error: function() {\n\t\t    \t$('#mw_backup_import_modal').find('.backup-import-modal-log').html('Loading...');\n\t\t    }\n\t\t});\n\t}\n}\n\nfunction changeImportImages(importType)\n{\n\tif (importType == '1') {\n\t\t$('.import-image-1').fadeIn();\n\t\t$('.import-image-2').hide();\n\t\t$('.import-image-3').hide();\n\t}\n\n\tif (importType == '2') {\n\t\t$('.import-image-1').hide();\n\t\t$('.import-image-2').fadeIn();\n\t\t$('.import-image-3').hide();\n\t}\n\n\tif (importType == '3') {\n\t\t$('.import-image-1').hide();\n\t\t$('.import-image-2').hide();\n\t\t$('.import-image-3').fadeIn();\n\t}\n}\n\n$(document).ready(function () {\n\n    $(document).on('change', 'input[name*=\"import_by_type\"]', function() {\n        var importType = $(this).val();\n\n        $('.mw-backup-v2-import-option').removeClass('active');\n        $(this).parent().parent().addClass('active');\n\n        changeImportImages(importType);\n    });\n\n});\n", "if (typeof Object.assign !== 'function') {\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target) {\n            'use strict';\n            if (target === null || target === undefined) {\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n            var to = Object(target);\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n                if (nextSource !== null && nextSource !== undefined) {\n                    for (var nextKey in nextSource) {\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}\n\n\nif (!window.jQuery) {\n\n<?php\n\n\n    $haystack = load_web_component_file('jquery/jquery-3.3.1.min.js');\n    $haystack .= \"\\n\\n\".load_web_component_file('jquery/jquery-migrate-3.0.0.js');\n\n\n\t$needle = '//@ disabled_sourceMappingURL=';\n\t$replace = '//@ disabled_sourceMappingURL=';\n\t$pos = strpos($haystack,$needle);\n\t$newstring = $haystack;\n\tif ($pos !== false) {\n\t\t$newstring = substr_replace($haystack,$replace,$pos,strlen($needle));\n\t}\n\tprint $newstring;\n?>\n\n\n}\n\nvar _jqxhr = jQuery.ajax;\nmw.jqxhr = _jqxhr;\n\n\n\njQuery.ajax = function(url, options){\n    options = options || {};\n    var settings = {};\n    if(typeof url === 'object'){\n        $.extend(settings, url);\n    }\n    else{\n        settings.url = url;\n    }\n\n\n    if(typeof settings.success === 'function'){\n        settings._success = settings.success;\n        delete settings.success;\n    }\n\n    settings.success = function (data, status, xhr) {\n        if(xhr.status === 200) {\n            if (data && (data.form_data_required || data.form_data_module)) {\n                mw.extradataForm(settings, data);\n            }\n            else {\n                if (typeof this._success === 'function') {\n                    var scope = this;\n                    scope._success.call(scope, data, status, xhr);\n\n                }\n            }\n        }\n    };\n\n    settings = $.extend({}, settings, options);\n    var xhr = _jqxhr(settings);\n    xhr._settings = settings;\n    return xhr;\n};\n\nmw.safeCallCache = {};\n\nmw.safeCall = function(hash, call){\n    if(!mw.safeCallCache[hash]){\n        mw.safeCallCache[hash] = true;\n        call.call();\n        (function(hash){\n            setTimeout(function(){\n                delete mw.safeCallCache[hash];\n            });\n        })(hash);\n    }\n};\n\n$.ajaxSetup({\n    cache: false,\n    error: function (xhr, e, c, d) {\n        var data = xhr.responseJSON;\n        if (data && (data.form_data_required || data.form_data_module)) {\n            mw.extradataForm(xhr._settings, data);\n            return;\n        }\n         if(xhr.status === 422){\n            mw.errorsHandle(xhr.responseJSON)\n        } else if(xhr.status !== 200 && xhr.status !== 0){\n            mw.notification.error('Error ' + xhr.status + ' - ' + xhr.statusText + ' - \\r\\n' + xhr.responseText );\n            setTimeout(function(){\n                mw.tools.loading(false);\n            }, 333);\n        }\n    }\n});\n\n\n\n\n\nmw.version = \"<?php print MW_VERSION; ?>\";\n\nmw.pauseSave = false;\n\nmw.askusertostay = false;\n\n  if (top === self){\n    window.onbeforeunload = function() {\n      if(mw.askusertostay){\n        mw.notification.warning(\"<?php _ejs(\"You have unsaved changes\"); ?>!\");\n        return \"<?php _e(\"You have unsaved changes\"); ?>!\";\n      }\n    }\n  }\n\n  warnOnLeave = function(){\n     mw.tools.confirm(\"<?php _ejs(\"You have unsaved changes! Are you sure\"); ?>?\");\n  };\n\n  mw.module = {\n    insert: function(target, module, config, pos) {\n        return new Promise(function (resolve) {\n            pos = pos || 'bottom';\n            var action;\n            var id = mw.id('mw-module-'),\n                el = '<div id=\"' + id + '\"></div>';\n\n        if (pos === 'top') {\n            action = 'before';\n            if(mw.tools.hasClass(target, 'allow-drop')) {\n                action = 'prepend';\n            }\n        } else if (pos === 'bottom') {\n            action = 'after';\n            if(mw.tools.hasClass(target, 'allow-drop')) {\n                action = 'append';\n            }\n        }\n        mw.$(target)[action](el);\n        mw.load_module(module, '#' + id, function () {\n            resolve(this);\n        }, config);\n    });\n    }\n  }\n\n  mwd = document;\n\n  mww = window;\n\n  mwhead = document.head || document.getElementsByTagName('head')[0];\n\n  mw.doc = mwd;\n  mw.win = window;\n  mw.head = mwhead;\n\n  mw.loaded = false;\n\n  mw._random = new Date().getTime();\n\n  mw.random = function() {\n    return mw._random++;\n  };\n\n  mw.id = function(prefix) {\n    prefix = prefix || 'mw-';\n    return prefix + mw.random();\n  };\n\n  String.prototype.contains = function(a) {\n    return !!~this.indexOf(a);\n  };\n\n  mw.onLive = function(callback) {\n    if (typeof mw.settings.liveEdit === 'boolean' && mw.settings.liveEdit) {\n      callback.call(this)\n    }\n  };\n  mw.onAdmin = function(callback) {\n    if ( window['mwAdmin'] ) {\n      callback.call(this);\n    }\n  };\n    if (!Array.isArray) {\n        Array.isArray = function(arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n  if (Array.prototype.indexOf === undefined) {\n    Array.prototype.indexOf = function(obj) {\n      var i=0, l=this.length;\n      for ( ; i < l; i++) {\n        if (this[i] == obj) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  }\n\n\n  mw.required = typeof mw.required === 'undefined'?[]:mw.required;\n  mw.require = function(url, inHead, key) {\n    if(!url) return;\n    if(typeof inHead === 'boolean' || typeof inHead === 'undefined'){\n        inHead = inHead || false;\n    }\n    var keyString;\n    if(typeof inHead === 'string'){\n        keyString = ''+inHead;\n        inHead = key || false;\n    }\n    if(typeof key === 'string'){\n        keyString = key;\n    }\n    var toPush = url, urlModified = false;\n    if (!!keyString) {\n        toPush = keyString;\n        urlModified = true\n    }\n    var t = url.split('.').pop();\n    url = url.contains('//') ? url : (t !== \"css\" ? \"<?php print( mw_includes_url() ); ?>api/\" + url  :  \"<?php print( mw_includes_url() ); ?>css/\" + url);\n    if(!urlModified) toPush = url;\n    if (!~mw.required.indexOf(toPush)) {\n\n      mw.required.push(toPush);\n      url = url.contains(\"?\") ?  url + '&mwv=' + mw.version : url + \"?mwv=\" + mw.version;\n      if(document.querySelector('link[href=\"'+url+'\"],script[src=\"'+url+'\"]') !== null){\n          return\n      }\n      var string = t !== \"css\" ? \"<script type='text/javascript'  src='\" + url + \"'></script>\" : \"<link rel='stylesheet' type='text/css' href='\" + url + \"' />\";\n\n          if(typeof $.fn === 'object'){\n              $(mwhead).append(string);\n          }\n          else{\n              var el;\n              if( t !== \"css\")  {\n                  el = document.createElement('script');\n                  el.src = url;\n                  el.setAttribute('type', 'text/javascript');\n                  mwhead.appendChild(el);\n              }\n              else{\n                 el = document.createElement('link');\n                 el.rel='stylesheet';\n                 el.type='text/css';\n                 el.href = url;\n                 mwhead.appendChild(el);\n              }\n          }\n\n    }\n  };\n\n\n\nmw.getScripts = function (array, callback) {\n  if(typeof array === 'string'){\n      array = array.split(',')\n  }\n    array = array.filter(function (item) {\n        return !!item.trim();\n    });\n  var all = array.length, ready = 0;\n  $.each(array, function(){\n      $.getScript(this.indexOf('//') !== -1 ? this : mw.settings.includes_url + 'api/' + this, function (){\n          ready++;\n          if(all === ready) {\n              callback.call()\n          }\n      })\n\n  });\n};\n\n  mw.moduleCSS = mw.module_css = function(url){\n    if (!~mw.required.indexOf(url)) {\n      mw.required.push(url);\n      var el = document.createElement('link');\n      el.rel='stylesheet';\n      el.type='text/css';\n      el.href = url;\n      mwhead.insertBefore(el, mwhead.firstChild);\n    }\n  };\n  mw.moduleJS = mw.module_js = function(url){\n    mw.require(url, true);\n  };\n\n\n  mw.target = {}\n\n  mw.is = {\n    obj: function(obj) {\n      return typeof obj === 'object';\n    },\n    func: function(obj) {\n      return typeof obj === 'function';\n    },\n    string: function(obj) {\n      return typeof obj === 'string';\n    },\n    array:function(obj){\n      return [].constructor === obj.constructor;\n    },\n    invisible: function(obj) {\n      return window.getComputedStyle(obj, null).visibility === 'hidden';\n    },\n    visible: function(obj) {\n      return window.getComputedStyle(obj, null).visibility === 'visible';\n    },\n    ie: (/*@cc_on!@*/false || !!window.MSStream) && !navigator.userAgent.match(/Trident\\/7\\./) && false,\n    firefox:navigator.userAgent.toLowerCase().contains('firefox')\n  }\n\n\n/*\n * Microweber - Javascript Framework\n *\n * Copyright (c) Licensed under the Microweber\n * license http://microweber.com/license\n *\n */\n\n  mw.load_module = function(name, selector, callback, attributes) {\n     attributes = attributes || {};\n     attributes.module = name;\n     return mw._({\n        selector: selector,\n        params: attributes,\n        done: function() {\n          mw.settings.sortables_created = false;\n          if (mw.is.func(callback)) {\n            callback.call(mw.$(selector)[0]);\n          }\n        }\n      });\n  }\n\n  mw.loadModuleData = function(name, update_element, callback, attributes){\n\n\n    var attributes = attributes || {};\n\n    if(typeof update_element == 'function'){\n      var callback = update_element;\n    }\n    var update_element = document.createElement('div');\n    attributes.module = name;\n    mw._({\n      selector: update_element,\n      params: attributes\n    }, false, true)\n    .done(function(data){\n\n            setTimeout(function(){\n            callback.call(this, data);\n                $(document).off('focusin.modal');\n            }, 50)\n\n    });\n  }\n  mw.getModule = function(name, params, callback){\n    if( typeof params == 'function'){\n        var callback = params;\n    }\n    var params = params || {};\n    var update_element = document.createElement('div');\n    for(var x in params){\n        update_element.setAttribute(x, params[x]);\n    }\n    mw.loadModuleData(name, update_element, function(a){\n        callback.call(a);\n    });\n  }\n\n  mw.reload_module_intervals = {};\n  mw.reload_module_interval = function(module_name, interval) {\n    var interval =  interval || 1000;\n    var obj = {pause:false};\n    if(!!mw.reload_module_intervals[module_name]){\n        clearInterval(mw.reload_module_intervals[module_name]);\n    }\n    mw.reload_module_intervals[module_name] = setInterval(function(){\n        if(!obj.pause){\n            obj.pause = true;\n            mw.reload_module(module_name, function(){\n                obj.pause = false;\n            });\n        }\n    }, interval);\n    return mw.reload_module_intervals['module_name'];\n  }\n\n  mw.reload_module_parent = function(module, callback) {\n    if(self !== parent && !!parent.mw){\n\n       mw.parent().reload_module(module, callback)\n\t   if(typeof(mw.top().win.mweditor) != 'undefined'  && typeof(mw.top().win.mweditor) == 'object'   && typeof(mw.top().win.mweditor.contentWindow) != 'undefined'){\n\t\t mw.top().win.mweditor.contentWindow.mw.reload_module(module, callback)\n\t\t} else if(typeof(mw.top().win.iframe_editor_window) != 'undefined'  && typeof(mw.top().win.iframe_editor_window) == 'object'   && typeof(mw.top().win.iframe_editor_window.mw) != 'undefined'){\n\n\t\tmw.top().win.iframe_editor_window.mw.reload_module(module, callback)\n\t\t}\n\n        if(typeof(parent.mw_preview_frame_object) != 'undefined'  && typeof(parent.mw_preview_frame_object) == 'object'   && typeof(parent.mw_preview_frame_object.contentWindow) != 'undefined'){\n            if(parent.mw_preview_frame_object.contentWindow != null && typeof(parent.mw_preview_frame_object.contentWindow.mw) != 'undefined'){\n                parent.mw_preview_frame_object.contentWindow.mw.reload_module(module, callback)\n            }\n        }\n    } else {\n\t\tif(typeof(mweditor) != 'undefined'  && typeof(mweditor) == 'object'   && typeof(mweditor.contentWindow) != 'undefined' && typeof(mweditor.contentWindow.mw) != 'undefined'){\n\t\t    mweditor.contentWindow.mw.reload_module(module, callback)\n\t\t}\n\n\t}\n  }\n  mw.reload_modules = function(array, callback, simultaneously) {\n      if(array.array && !array.slice){\n          callback = array.callback || array.done || array.ready;\n          simultaneously = array.simultaneously;\n          array = array.array;\n      }\n      simultaneously = simultaneously || false;\n      if(simultaneously){\n        var l = array.length, ready = 0, i = 0;\n        for( ; i<l; i++){\n            mw.reload_module(array[i], function(){\n                ready++;\n                if(ready === l && callback){\n                    callback.call();\n                }\n            });\n        }\n      }\n      else{\n        if(array.length === 0){\n            if(callback){\n                callback.call()\n            }\n        }\n        else{\n            var m = array[0];\n            array.shift();\n            mw.reload_module(m, function(){\n                mw.reload_modules(array, callback, false);\n            });\n        }\n      }\n  };\n  mw.reload_module_everywhere = function(module, eachCallback) {\n    mw.tools.eachWindow(function () {\n        if(this.mw && this.mw.reload_module){\n            this.mw.reload_module(module, function(){\n                if(typeof eachCallback === 'function'){\n                    eachCallback.call(this);\n                }\n            })\n        }\n    })\n  };\n\n  mw.reload_module = function(module, callback) {\n    if(module.constructor === [].constructor){\n        var l = module.length, i=0, w = 1;\n        for( ; i<l; i++){\n          mw.reload_module(module[i], function(){\n            w++;\n            if(w === l && typeof callback === 'function'){\n              callback.call();\n            }\n            $( this ).trigger('ModuleReload')\n          });\n        }\n        return false;\n    }\n    var done = callback || function(){};\n    if (typeof module !== 'undefined') {\n      if (typeof module === 'object') {\n\n        mw._({\n          selector: module,\n          done:done\n        });\n      } else {\n        var module_name = module.toString();\n        var refresh_modules_explode = module_name.split(\",\");\n        for (var i = 0; i < refresh_modules_explode.length; i++) {\n          var module = refresh_modules_explode[i];\n          if (typeof module != 'undefined') {\n\t\t    var module = module.replace(/##/g, '#');\n            var m = mw.$(\".module[data-type='\" + module + \"']\");\n            if (m.length === 0) {\n                try { var m = $(module); }  catch(e) {};\n            }\n\n              (function(callback){\n                  var count = 0;\n                  for (var i=0;i<m.length;i++){\n                      mw.reload_module(m[i], function(){\n                          count++;\n                          if(count === m.length && typeof callback === 'function'){\n                              callback.call();\n                          }\n                          $( document ).trigger('ModuleReload')\n                      })\n                  }\n              })(callback)\n\n\n\n          }\n        }\n      }\n    }\n  }\n\n  mw.clear_cache = function() {\n    $.ajax({\n      url: mw.settings.site_url+'api/clearcache',\n      type: \"POST\",\n      success: function(data){\n        if(mw.notification != undefined){\n          mw.notification.msg(data);\n\n        }\n      }\n    });\n  }\n  mw.temp_reload_module_queue_holder = [];\n\n\n\n\n  mw[\"_\"] = function(obj, sendSpecific, DONOTREPLACE) {\n    if(mw.on){\n        mw.on.DOMChangePause = true;\n    }\n    var url = typeof obj.url !== 'undefined' ? obj.url : mw.settings.site_url+'module/';\n    var selector = typeof obj.selector !== 'undefined' ? obj.selector : '';\n    var params =  typeof obj.params !== 'undefined' ? obj.params : {};\n    var to_send = params;\n    if(typeof $(obj.selector)[0] === 'undefined') {\n        mw.pauseSave = false;\n        mw.on.DOMChangePause = false;\n        return false;\n    }\n    if(mw.session){\n        mw.session.checkPause = true;\n    }\n    var $node = $(obj.selector);\n    var node = $node[0];\n    var attrs = node.attributes;\n\n\n\n     // wait between many reloads\n      if (node.id) {\n          if ( mw.temp_reload_module_queue_holder.indexOf(node.id) === -1){\n          mw.temp_reload_module_queue_holder.push(node.id);\n              setTimeout(function() {\n                  var reload_index = mw.temp_reload_module_queue_holder.indexOf(node.id);\n                  delete mw.temp_reload_module_queue_holder[reload_index];\n              }, 300);\n          } else {\n              return;\n          }\n      }\n\n    if (sendSpecific) {\n      attrs[\"class\"] !== undefined ? to_send[\"class\"] = attrs[\"class\"].nodeValue : \"\";\n      attrs[\"data-module-name\"] !== undefined ? to_send[\"data-module-name\"] = attrs[\"data-module-name\"].nodeValue : \"\";\n      attrs[\"data-type\"] !== undefined ? to_send[\"data-type\"] = attrs[\"data-type\"].nodeValue : \"\";\n      attrs[\"type\"] !== undefined ? to_send[\"type\"] = attrs[\"type\"].nodeValue : \"\";\n      attrs[\"template\"] !== undefined ? to_send[\"template\"] = attrs[\"template\"].nodeValue : \"\";\n      attrs[\"ondrop\"] !== undefined ? to_send[\"ondrop\"] = attrs[\"ondrop\"].nodeValue : \"\";\n    }\n    else {\n      for (var i in attrs) {\n  \t\t  if(attrs[i] !== undefined){\n              var name = attrs[i].name;\n              var val = attrs[i].nodeValue;\n              if(typeof to_send[name] === 'undefined'){\n                  to_send[name]  = val;\n              }\n  \t\t  }\n      }\n    }\n    var b = true;\n    for (var a in to_send) {\n       if(to_send.hasOwnProperty(a)) { b = false; }\n    }\n    if(b){\n      mw.tools.removeClass(document.body, 'loading');\n      mw.pauseSave = false;\n      mw.on.DOMChangePause = false;\n      return false;\n    }\n    var storedValues = $node.dataset('storeValues') === 'true' ? {} : false;\n    if(storedValues) {\n        $node.find('[name]').each(function () {\n            storedValues[this.name] = $(this).val();\n        })\n    }\n\n    var xhr = $.post(url, to_send, function(data) {\n\n      if(!!mw.session){\n        mw.session.checkPause = false;\n      }\n      if(DONOTREPLACE){\n\n          mw.tools.removeClass(document.body, 'loading');\n          mw.pauseSave = false;\n          mw.on.DOMChangePause = false;\n          return false;\n      }\n\n      var docdata = mw.tools.parseHtml(data);\n\n      if(storedValues) {\n        mw.$('[name]', docdata).each(function(){\n            var el = $(this);\n            if(!el.val()) {\n                el.val(storedValues[this.name] || undefined);\n                this.setAttribute(\"value\", storedValues[this.name] || '');\n            }\n        })\n      }\n\n      var hasDone = typeof obj.done === 'function';\n      var id;\n      if (typeof to_send.id  !== 'undefined') {\n        id = to_send.id;\n      } else{\n        id = docdata.body.querySelector(['id']);\n      }\n      mw.$(selector).replaceWith($(docdata.body).html());\n      var count = 0;\n      if(hasDone){\n          setTimeout(function(){\n              count++;\n              obj.done.call($(selector)[0], data);\n              mw.trigger('moduleLoaded');\n          }, 33);\n      }\n\n      if(!id){\n          mw.pauseSave = false;\n          mw.on.DOMChangePause = false;\n          return false;\n      }\n\n\n      typeof mw.drag !== 'undefined' ? mw.drag.fix_placeholders(true) : '';\n      var m = document.getElementById(id);\n      // typeof obj.done === 'function' ? obj.done.call(selector, m) : '';\n\n      if(mw.wysiwyg){\n        $(m).hasClass(\"module\") ? mw.wysiwyg.init_editables(m) : '' ;\n      }\n\n\n      if(mw.on && !hasDone){\n        mw.on.moduleReload(id, \"\", true);\n        mw.trigger('moduleLoaded');\n      }\n    if($.fn.selectpicker) {\n        $('.selectpicker').selectpicker();\n    }\n      if (mw.on) {\n        mw.on.DOMChangePause = false;\n      }\n      mw.tools.removeClass(document.body, 'loading');\n\n\n    })\n    .fail(function(){\n       mw.pauseSave = false;\n       typeof obj.fail === 'function' ? obj.fail.call(selector) : '';\n    })\n    .always(function(){\n        mw.pauseSave = false;\n    });\n    return xhr;\n  };\n\n\n  mw.inLog = function(what) {\n    if(!mw._inlog) {\n        mw._inlog = document.createElement('div');\n        mw._inlog.className = 'mw-in-log';\n        $(mw._inlog).css({\n            position: 'fixed',\n            bottom:0,\n            left:0,\n            padding:20,\n            background:'#fff',\n            zIndex:10,\n            height:190,\n            overflow:'auto',\n            fontSize:10\n\n        })\n        document.body.appendChild(mw._inlog)\n    }\n      $(mw._inlog).append('<br>'+what)\n      mw._inlog.scrollTop = mw._inlog.scrollHeight;\n\n  };\n  mw.log = function(what) {\n    if (window.console && mw.settings.debug) {\n      top.console.log(what);\n    }\n  };\n\n\n  mw.$ = function(selector, context) {\n    if(typeof selector === 'object' || (typeof selector === 'string' && selector.indexOf('<') !== -1)){ return jQuery(selector); }\n    context = context || mwd;\n    if (typeof document.querySelector !== 'undefined') {\n      if (typeof selector === 'string') {\n        try {\n          return jQuery(context.querySelectorAll(selector));\n        } catch (e) {\n          return jQuery(selector, context);\n        }\n      } else {\n        return jQuery(selector, context);\n      }\n    } else {\n      return jQuery(selector, context);\n    }\n  };\n\n  mw.get = function(action, params, callback){\n      var obj;\n    var url = mw.settings.api_url + action;\n    var type = typeof params;\n    if(type === 'string'){\n        obj = mw.serializeFields(params);\n    }\n    else if(type.constructor === {}.constructor ){\n        obj = params;\n    }\n    else{\n      obj = {};\n    }\n    $.post(url, obj)\n        .success(function(data) { return typeof callback === 'function' ? callback.call(data) : data;   })\n        .error(function(data) { return typeof callback === 'function' ? callback.call(data) : data;  });\n  }\n\n  get_content = function(params, callback){\n    var obj = mw.url.getUrlParams(\"?\"+params);\n    if(typeof callback!='function'){\n       mw.get('get_content_admin', obj);\n    }\n    else{\n       mw.get('get_content_admin', obj, function(){callback.call(this)});\n    }\n  }\n\n  mw.get_content = get_content\n\n  mw.serializeFields =  function(id, ignorenopost){\n        var ignorenopost = ignorenopost || false;\n        var el = mw.$(id);\n        var fields = \"input[type='text'], input[type='email'], input[type='number'], input[type='tel'], \"\n                    + \"input[type='color'], input[type='url'], input[type='week'], input[type='search'], input[type='range'], \"\n                    + \"input[type='datetime-local'], input[type='month'], \"\n                    + \"input[type='password'], input[type='hidden'], input[type='datetime'], input[type='date'], input[type='time'], \"\n                    +\"input[type='email'],  textarea, select, input[type='checkbox']:checked, input[type='radio']:checked, \"\n                    +\"input[type='checkbox'][data-value-checked][data-value-unchecked]\";\n        var data = {};\n        $(fields, el).each(function(){\n\n            if((!$(this).hasClass('no-post') || ignorenopost) && !this.disabled && this.name && typeof this.name !== 'undefined'){\n              var el = this, _el = $(el);\n              var val = _el.val();\n              var name = el.name;\n              if(el.name.contains(\"[]\")){\n                  data[name] = data[name] || []\n                  data[name].push(val);\n              }\n              else if(el.type === 'checkbox' && el.getAttribute('data-value-checked') ){\n                  data[name] = el.checked ? el.getAttribute('data-value-checked') : el.getAttribute('data-value-unchecked');\n              }\n              else{\n                data[name] = val;\n              }\n            }\n        });\n        return data;\n   }\n\nmw.response = function(form, data, messages_at_the_bottom){\n     messages_at_the_bottom = messages_at_the_bottom || false;\n    if(data == null  ||  typeof data == 'undefined' ){\n      return false;\n    }\n\n    data = mw.tools.toJSON(data);\n    if(typeof data === 'undefined'){\n          return false;\n      }\n\n    if(typeof data.error !== 'undefined'){\n        mw._response.error(form, data, messages_at_the_bottom);\n        return false;\n    }\n    else if(typeof data.success !== 'undefined'){\n        mw._response.success(form, data, messages_at_the_bottom);\n        return true;\n    }\n    else if(typeof data.warning !== 'undefined'){\n        mw._response.warning(form, data, messages_at_the_bottom);\n        return false;\n    }\n    else{\n        return false;\n    }\n};\n\nmw._response = {\n  error:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'error');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.error;\n    mw._response.createHTML(msg, err_holder);\n  },\n  success:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'success');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.success;\n    mw._response.createHTML(msg, err_holder);\n  },\n  warning:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'warning');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.warning;\n    mw._response.createHTML(msg, err_holder);\n  },\n  msgHolder : function(form, type, method){\n    method = method || 'append';\n    var err_holder = form.find(\".mw-checkout-response:first\");\n    var err_holder2 = form.find(\".alert:first\");\n    if(err_holder.length === 0){\n        err_holder = err_holder2;\n    }\n    if(err_holder.length === 0){\n        err_holder = document.createElement('div');\n        form[method](err_holder);\n    }\n\n    var bootrap_error_type = 'default';\n    if(type === 'error'){\n        bootrap_error_type = 'danger';\n    } else if(type === 'done'){\n        bootrap_error_type = 'info';\n    }\n\n\n    $(err_holder).empty().attr(\"class\", 'alert alert-' + type + ' alert-' + bootrap_error_type + ' ');\n    return err_holder;\n  },\n  createHTML:function(data, holder){\n    var i, html = \"\";\n\n\n    if(typeof data === 'string'){\n        html+= data.toString();\n    }\n    else{\n      for( i in data){\n          if(typeof data[i] === 'string'){\n              html+='<li>'+data[i]+'</li>';\n          }\n          else if(typeof data[i] === 'object'){\n            $.each(data[i], function(){\n                html+='<li>'+this+'</li>';\n            })\n          }\n      }\n    }\n    mw.$(holder).eq(0).append('<ul class=\"mw-error-list\">'+html+'</ul>');\n    mw.$(holder).eq(0).show();\n  }\n}\n\n\nmw.user = {\n  isLogged:function(callback){\n    $.post(mw.settings.api_url + 'is_logged', function(data){\n        var isLogged =  (data === 'true');\n        callback.call(isLogged, isLogged);\n    });\n  }\n};\n\nmw.parent = function(){\n    if(window === top){\n        return window.mw;\n    }\n    if(mw.tools.canAccessWindow(parent) && parent.mw){\n        return parent.mw;\n    }\n    return window.mw;\n};\n\nmw.top = function(){\n  if(!!mw.__top){\n      return mw.__top;\n  }\n  var getLastParent = function() {\n      var result = window;\n      var curr = window;\n      while (curr && mw.tools.canAccessWindow(curr) && (curr.mw || curr.parent.mw)){\n          result = curr;\n          curr = curr.parent;\n      }\n      mw.__top = result.mw;\n      return result.mw;\n  };\n  if(window === top){\n    mw.__top = window.mw;\n    return window.mw;\n  } else {\n        if(mw.tools.canAccessWindow(top) && top.mw){\n            mw.__top = top.mw;\n            return top.mw;\n        } else{\n            if(window.top !== window.parent){\n                return getLastParent();\n            }\n            else{\n                mw.__top = window.mw;\n                return window.mw;\n            }\n        }\n  }\n};\n\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/jquery.js\");\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/tools.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/tools/cookie.js\");\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/forms.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/url.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/events.js\");\n\n//mw.required.push(\"<?php print mw_includes_url(); ?>api/upgrades.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/session.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/shop.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/common.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/components.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/dialog.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/instruments.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/forms.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/fonts.js\");\n\n//mw.required.push(\"<?php print mw_includes_url(); ?>api/content.js\");\n\n\n\n<?php  include __DIR__.DS.\"tools.js\"; ?>\n<?php  include __DIR__.DS.\"tools/cookie.js\"; ?>\n\n\n\n\n\n\n<?php  //include  __DIR__.DS.\"css_parser.js\"; ?>\n\n\n<?php // include  __DIR__.DS.\"files.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"forms.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"url.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"events.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"shop.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"common.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"components.js\"; ?>\n\n\n<?php  include __DIR__.DS.\"instruments.js\"; ?>\n\n<?php  include __DIR__.DS.\"fonts.js\"; ?>\n\n<?php  //include __DIR__.DS.\"content.js\"; ?>\n\n\n\n\n\n\n$(window).on('load', function(){\n    if(typeof $().emulateTransitionEnd === 'function'){\n        $(\".modal\").each(function(){\n            var selector = 'form[action*=\"/api/\"], form.mw-checkout-form';\n            var hasMWForm = $(selector, this).length;\n            if(hasMWForm){\n                $(this).on('shown.bs.modal', function() {\n                    $(document).off('focusin.modal');\n                });\n            }\n        })\n    }\n})\n\n<?php\nif(isset($inline_scripts) and is_array($inline_scripts)){\n    print implode($inline_scripts,\"\\n\");\n}\n\n?>\n\n<?php  //include \"upgrades.js\"; ?>\n\n<?php  include  __DIR__.DS.\"session.js\"; ?>\n"], "fixing_code": ["// JavaScript Document\nmw.require('forms.js');\n\nmw.restore = {\n\n\tupload: function(src) {\n\t\tdata = {}\n\t\tdata.src=src;\n\t\t$.post(route('admin.backup.upload'), data ,\n\t\t\tfunction(msg) {\n\t\t\t\tmw.reload_module('admin/backup/manage');\n\t\t\t\tmw.notification.msg(msg, 5000);\n\t\t\t});\n\t},\n\n\tremove: function($id, $selector_to_hide) {\n\t\tmw.tools.confirm(mw.msg.del, function() {\n\t\t\tdata = {}\n\t\t\tdata.id = $id;\n\t\t\t$.post(route('admin.backup.delete'), data, function(resp) {\n\t\t\t\tmw.notification.msg(resp);\n\t\t\t\tif ($selector_to_hide != undefined) {\n\t\t\t\t\tmw.reload_module('admin/backup/manage');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\timport: function(src) {\n\n\t\tvar importOptions = '<div class=\"mw-backup-v2-import\">'+\n\n\t\t'<div class=\"mw-backup-v2-import-options\">'+\n\t\t'<img src=\"'+moduleImagesUrl+'1.png\" class=\"import-image import-image-1\" />'+\n\t\t'<img src=\"'+moduleImagesUrl+'2.png\" class=\"import-image import-image-2\" />'+\n\t\t'<img src=\"'+moduleImagesUrl+'3.png\" class=\"import-image import-image-3\" />'+\n\n\t\t'<h2 style=\"font-weight: bold\">How do you like to restore your content?</h2>'+\n\t\t'<br />'+\n\n\t\t'<label class=\"mw-ui-check mw-backup-v2-import-option\">' +\n\t\t'<div class=\"option-radio\">'+\n\t\t'<input type=\"radio\" name=\"import_by_type\" value=\"1\" />'+\n\t\t'<span></span>'+\n\t\t'</div>'+\n\t\t'<h3>Delete all website content & restore</h3>'+\n\t\t'<p></p>'+\n\t\t'</label>'+\n\n\n        '<label class=\"mw-ui-check mw-backup-v2-import-option active\">' +\n        '<div class=\"option-radio\">'+\n        '<input type=\"radio\" name=\"import_by_type\" checked=\"checked\" value=\"2\" />'+\n        '<span></span>'+\n        '</div>'+\n        '<h3>Overwrite the website content from backup</h3>'+\n        '<p></p>'+\n        '</label>'+\n\n\n        '<label class=\"mw-ui-check mw-backup-v2-import-option\">' +\n        '<div class=\"option-radio\">'+\n        '<input type=\"radio\" name=\"import_by_type\" value=\"3\" />'+\n        '<span></span>'+\n        '</div>'+\n        '<h3>Try to overwrite content by Names & Titles</h3>'+\n        '<p></p>'+\n        '</label>'+\n\n\t\t'</div>' +\n\n\t\t'<div style=\"margin-bottom:20px;\" class=\"js-backup-import-installation-language-wrapper\"></div>'+\n\t\t'<div class=\"backup-import-modal-log-progress\"></div>'+\n\n\t\t'<div class=\"mw-backup-v2-import-buttons\">'+\n\t\t'<a class=\"btn btn-link button-cancel\" onClick=\"mw.restore.close_import_modal();\">Close</a>'+\n\t\t'<button class=\"btn btn-primary btn-rounded button-start\" onclick=\"mw.restore.start_import_button()\" type=\"submit\">Start Restore</button>'+\n\t\t'</div>'+\n\n\t\t'</div>'\n\t\t;\n\n\t\timportModal = mw.dialog({\n\t\t\twidth: 680,\n\t\t    content: importOptions,\n\t\t    title: importContentFromFileText,\n\t\t    id: 'mw_backup_import_modal'\n\t\t});\n\n        changeImportImages(2);\n\n\t\tdata = {};\n\t\tdata.id = src;\n\t},\n\n\tclose_import_modal: function() {\n        importModal.remove();\n\t},\n\n\tstart_import_button: function (src) {\n\n        $('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html('Generating session id...');\n\n        $.get(route('admin.backup.generate-session-id'), {}, function (data) {\n\n            $('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html('Loading file...');\n            $('#mw_backup_import_modal').find('.mw-backup-v2-import-options').slideUp();\n\n            mw.restore.init_progress(1);\n            mw.restore.start_import(data.session_id);\n            mw.restore.get_log_check('start');\n\n        });\n\n\t},\n\n\tstart_import: function (session_id) {\n\n\n\t\tmw.notification.success('Importing...', 10000, 'import');\n\n\t\t$('.button-start').addClass('disabled');\n\n\t\t$('.backup-import-modal-log-progress').show();\n\n        var import_by_type = $('input[name=\"import_by_type\"]:checked').val();\n\n        data.session_id = session_id;\n\n\t\tdata.installation_language = $('.js-backup-import-installation-language').val();\n\n\t\tif (import_by_type == '1') {\n            data.import_by_type = 'delete_all';\n        }\n        if (import_by_type == '2') {\n            data.import_by_type = 'overwrite_by_id';\n        }\n        if (import_by_type == '3') {\n            data.import_by_type = 'overwrite_by_titles';\n        }\n\n\t\t$.ajax({\n\t\t  dataType: \"json\",\n\t\t  url: route('admin.backup.restore'),\n\t\t  data: data,\n\t\t  success: function(json_data) {\n\n\t\t\tif (json_data.error) {\n\t\t\t\t$('.button-start').removeClass('disabled');\n\t\t\t\t$('#backup-import-progressbar').remove();\n\t\t\t\tmw.restore.get_log_check('stop');\n\t\t\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log').before('<h3>Error!</h3><br />' + json_data.error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (json_data.done) {\n\n                mw.restore.reload_mw_db();\n                mw.clear_cache();\n\n\t\t\t\tmw.restore.get_progress(100);\n\t\t\t\tmw.restore.get_log_check('stop');\n\t\t\t\t//mw.spinner({element: \".button-start\", size: 30, color: 'white'}).hide()\n\t\t\t\t$('.button-start').removeClass('disabled');\n\n\t\t\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log').before('<h3>All data is restored successfully!</h3>');\n                $('#mw_backup_import_modal').find('.button-start').html('Done');\n                $('#mw_backup_import_modal').find('.button-start').attr('onClick', 'mw.restore.close_import_modal();').html('Done!');\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tmw.restore.get_progress(json_data.precentage);\n\t\t\t\tif($('.backup-import-modal-log').length > 0){\n\t\t\t\t\t$('.backup-import-modal-log')[0].scrollTop =$('.backup-import-modal-log')[0].scrollHeight;\n\t\t\t\t}\n\t\t\t\tsetTimeout(function(){\n                    mw.restore.start_import(json_data.session_id);\n                }, 300);\n\n\t\t\t}\n\t\t  }\n\t\t});\n\t},\n\n    reload_mw_db: function () {\n        $.post(mw.settings.api_url + 'mw_post_update');\n        mw.notification.success(\"The DB was reloaded\");\n    }, \n\n\tget_log_check: function(action = 'start') {\n\n\t\tvar importLogInterval = setInterval(function() {\n\t\t\tmw.restore.get_log();\n\t\t}, 2000);\n\n\t\tif (action == 'stop') {\n\t\t\tfor(i=0; i<10000; i++) {\n\t\t        window.clearInterval(i);\n\t\t    }\n\t\t}\n\n\t},\n\n\tget_progress: function(precent) {\n\t\t$('.mw-ui-progress-bar').css('width', precent+'%');\n\t\t$('.mw-ui-progress-percent').html(precent);\n\t},\n\n\tinit_progress: function(precent) {\n\t\tvar progressbar = '<div class=\"mw_install_progress\">'+\n\t        '<div class=\"mw-ui-progress\" id=\"backup-import-progressbar\">'+\n\t            '<div class=\"mw-ui-progress-bar\" style=\"width: '+precent+'%;\"></div>'+\n\t            '<div class=\"mw-ui-progress-info\">Importing...</div>'+\n\t            '<span class=\"mw-ui-progress-percent\">'+precent+'%</span>'+\n\t        '</div>'+\n\t        '<div class=\"backup-import-modal-log\"></div>'+\n\t    '</div>';\n\t\t$('#mw_backup_import_modal').find('.backup-import-modal-log-progress').html(progressbar);\n\t},\n\n\tget_log: function() {\n\t\t$.ajax({\n\t\t    url: userfilesUrl + 'cache/backup/backup-session.log',\n\t\t    success: function (data) {\n\t\t    \tdata = data.replace(/\\n/g, \"<br />\");\n\t\t    \t$('#mw_backup_import_modal').find('.backup-import-modal-log').html(data);\n\t\t    },\n\t\t    error: function() {\n\t\t    \t$('#mw_backup_import_modal').find('.backup-import-modal-log').html('Loading...');\n\t\t    }\n\t\t});\n\t}\n}\n\nfunction changeImportImages(importType)\n{\n\tif (importType == '1') {\n\t\t$('.import-image-1').fadeIn();\n\t\t$('.import-image-2').hide();\n\t\t$('.import-image-3').hide();\n\t}\n\n\tif (importType == '2') {\n\t\t$('.import-image-1').hide();\n\t\t$('.import-image-2').fadeIn();\n\t\t$('.import-image-3').hide();\n\t}\n\n\tif (importType == '3') {\n\t\t$('.import-image-1').hide();\n\t\t$('.import-image-2').hide();\n\t\t$('.import-image-3').fadeIn();\n\t}\n}\n\n$(document).ready(function () {\n\n    $(document).on('change', 'input[name*=\"import_by_type\"]', function() {\n        var importType = $(this).val();\n\n        $('.mw-backup-v2-import-option').removeClass('active');\n        $(this).parent().parent().addClass('active');\n\n        changeImportImages(importType);\n    });\n\n});\n", "if (typeof Object.assign !== 'function') {\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target) {\n            'use strict';\n            if (target === null || target === undefined) {\n                throw new TypeError('Cannot convert undefined or null to object');\n            }\n            var to = Object(target);\n            for (var index = 1; index < arguments.length; index++) {\n                var nextSource = arguments[index];\n                if (nextSource !== null && nextSource !== undefined) {\n                    for (var nextKey in nextSource) {\n                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                            to[nextKey] = nextSource[nextKey];\n                        }\n                    }\n                }\n            }\n            return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}\n\n\nif (!window.jQuery) {\n\n<?php\n\n\n    $haystack = load_web_component_file('jquery/jquery-3.3.1.min.js');\n    $haystack .= \"\\n\\n\".load_web_component_file('jquery/jquery-migrate-3.0.0.js');\n\n\n\t$needle = '//@ disabled_sourceMappingURL=';\n\t$replace = '//@ disabled_sourceMappingURL=';\n\t$pos = strpos($haystack,$needle);\n\t$newstring = $haystack;\n\tif ($pos !== false) {\n\t\t$newstring = substr_replace($haystack,$replace,$pos,strlen($needle));\n\t}\n\tprint $newstring;\n?>\n\n\n}\n\nvar _jqxhr = jQuery.ajax;\nmw.jqxhr = _jqxhr;\n\n\n\njQuery.ajax = function(url, options){\n    options = options || {};\n    var settings = {};\n    if(typeof url === 'object'){\n        $.extend(settings, url);\n    }\n    else{\n        settings.url = url;\n    }\n\n\n    if(typeof settings.success === 'function'){\n        settings._success = settings.success;\n        delete settings.success;\n    }\n\n    settings.success = function (data, status, xhr) {\n        if(xhr.status === 200) {\n            if (data && (data.form_data_required || data.form_data_module)) {\n                mw.extradataForm(settings, data);\n            }\n            else {\n                if (typeof this._success === 'function') {\n                    var scope = this;\n                    scope._success.call(scope, data, status, xhr);\n\n                }\n            }\n        }\n    };\n\n    settings = $.extend({}, settings, options);\n    var xhr = _jqxhr(settings);\n    xhr._settings = settings;\n    return xhr;\n};\n\nmw.safeCallCache = {};\n\nmw.safeCall = function(hash, call){\n    if(!mw.safeCallCache[hash]){\n        mw.safeCallCache[hash] = true;\n        call.call();\n        (function(hash){\n            setTimeout(function(){\n                delete mw.safeCallCache[hash];\n            });\n        })(hash);\n    }\n};\n\n$.ajaxSetup({\n    cache: false,\n    error: function (xhr, e, c, d) {\n        var data = xhr.responseJSON;\n        if (data && (data.form_data_required || data.form_data_module)) {\n            mw.extradataForm(xhr._settings, data);\n            return;\n        }\n         if(xhr.status === 422){\n            mw.errorsHandle(xhr.responseJSON)\n        } else if(xhr.status !== 200 && xhr.status !== 0){\n            mw.notification.error('Error ' + xhr.status + ' - ' + xhr.statusText + ' - \\r\\n' + xhr.responseText );\n            setTimeout(function(){\n                mw.tools.loading(false);\n            }, 333);\n        }\n    }\n});\n\n\n\n\n\nmw.version = \"<?php print MW_VERSION; ?>\";\n\nmw.pauseSave = false;\n\nmw.askusertostay = false;\n\n  if (top === self){\n    window.onbeforeunload = function() {\n      if(mw.askusertostay){\n        mw.notification.warning(\"<?php _ejs(\"You have unsaved changes\"); ?>!\");\n        return \"<?php _e(\"You have unsaved changes\"); ?>!\";\n      }\n    }\n  }\n\n  warnOnLeave = function(){\n     mw.tools.confirm(\"<?php _ejs(\"You have unsaved changes! Are you sure\"); ?>?\");\n  };\n\n  mw.module = {\n    insert: function(target, module, config, pos) {\n        return new Promise(function (resolve) {\n            pos = pos || 'bottom';\n            var action;\n            var id = mw.id('mw-module-'),\n                el = '<div id=\"' + id + '\"></div>';\n\n        if (pos === 'top') {\n            action = 'before';\n            if(mw.tools.hasClass(target, 'allow-drop')) {\n                action = 'prepend';\n            }\n        } else if (pos === 'bottom') {\n            action = 'after';\n            if(mw.tools.hasClass(target, 'allow-drop')) {\n                action = 'append';\n            }\n        }\n        mw.$(target)[action](el);\n        mw.load_module(module, '#' + id, function () {\n            resolve(this);\n        }, config);\n    });\n    }\n  }\n\n  mwd = document;\n\n  mww = window;\n\n  mwhead = document.head || document.getElementsByTagName('head')[0];\n\n  mw.doc = mwd;\n  mw.win = window;\n  mw.head = mwhead;\n\n  mw.loaded = false;\n\n  mw._random = new Date().getTime();\n\n  mw.random = function() {\n    return mw._random++;\n  };\n\n  mw.id = function(prefix) {\n    prefix = prefix || 'mw-';\n    return prefix + mw.random();\n  };\n\n  String.prototype.contains = function(a) {\n    return !!~this.indexOf(a);\n  };\n\n  mw.onLive = function(callback) {\n    if (typeof mw.settings.liveEdit === 'boolean' && mw.settings.liveEdit) {\n      callback.call(this)\n    }\n  };\n  mw.onAdmin = function(callback) {\n    if ( window['mwAdmin'] ) {\n      callback.call(this);\n    }\n  };\n    if (!Array.isArray) {\n        Array.isArray = function(arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n  if (Array.prototype.indexOf === undefined) {\n    Array.prototype.indexOf = function(obj) {\n      var i=0, l=this.length;\n      for ( ; i < l; i++) {\n        if (this[i] == obj) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  }\n\n\n  mw.required = typeof mw.required === 'undefined'?[]:mw.required;\n  mw.require = function(url, inHead, key) {\n    if(!url) return;\n    if(typeof inHead === 'boolean' || typeof inHead === 'undefined'){\n        inHead = inHead || false;\n    }\n    var keyString;\n    if(typeof inHead === 'string'){\n        keyString = ''+inHead;\n        inHead = key || false;\n    }\n    if(typeof key === 'string'){\n        keyString = key;\n    }\n    var toPush = url, urlModified = false;\n    if (!!keyString) {\n        toPush = keyString;\n        urlModified = true\n    }\n    var t = url.split('.').pop();\n    url = url.contains('//') ? url : (t !== \"css\" ? \"<?php print( mw_includes_url() ); ?>api/\" + url  :  \"<?php print( mw_includes_url() ); ?>css/\" + url);\n    if(!urlModified) toPush = url;\n    if (!~mw.required.indexOf(toPush)) {\n\n      mw.required.push(toPush);\n      url = url.contains(\"?\") ?  url + '&mwv=' + mw.version : url + \"?mwv=\" + mw.version;\n      if(document.querySelector('link[href=\"'+url+'\"],script[src=\"'+url+'\"]') !== null){\n          return\n      }\n      var string = t !== \"css\" ? \"<script type='text/javascript'  src='\" + url + \"'></script>\" : \"<link rel='stylesheet' type='text/css' href='\" + url + \"' />\";\n\n          if(typeof $.fn === 'object'){\n              $(mwhead).append(string);\n          }\n          else{\n              var el;\n              if( t !== \"css\")  {\n                  el = document.createElement('script');\n                  el.src = url;\n                  el.setAttribute('type', 'text/javascript');\n                  mwhead.appendChild(el);\n              }\n              else{\n                 el = document.createElement('link');\n                 el.rel='stylesheet';\n                 el.type='text/css';\n                 el.href = url;\n                 mwhead.appendChild(el);\n              }\n          }\n\n    }\n  };\n\n\n\nmw.getScripts = function (array, callback) {\n  if(typeof array === 'string'){\n      array = array.split(',')\n  }\n    array = array.filter(function (item) {\n        return !!item.trim();\n    });\n  var all = array.length, ready = 0;\n  $.each(array, function(){\n      $.getScript(this.indexOf('//') !== -1 ? this : mw.settings.includes_url + 'api/' + this, function (){\n          ready++;\n          if(all === ready) {\n              callback.call()\n          }\n      })\n\n  });\n};\n\n  mw.moduleCSS = mw.module_css = function(url){\n    if (!~mw.required.indexOf(url)) {\n      mw.required.push(url);\n      var el = document.createElement('link');\n      el.rel='stylesheet';\n      el.type='text/css';\n      el.href = url;\n      mwhead.insertBefore(el, mwhead.firstChild);\n    }\n  };\n  mw.moduleJS = mw.module_js = function(url){\n    mw.require(url, true);\n  };\n\n\n  mw.target = {}\n\n  mw.is = {\n    obj: function(obj) {\n      return typeof obj === 'object';\n    },\n    func: function(obj) {\n      return typeof obj === 'function';\n    },\n    string: function(obj) {\n      return typeof obj === 'string';\n    },\n    array:function(obj){\n      return [].constructor === obj.constructor;\n    },\n    invisible: function(obj) {\n      return window.getComputedStyle(obj, null).visibility === 'hidden';\n    },\n    visible: function(obj) {\n      return window.getComputedStyle(obj, null).visibility === 'visible';\n    },\n    ie: (/*@cc_on!@*/false || !!window.MSStream) && !navigator.userAgent.match(/Trident\\/7\\./) && false,\n    firefox:navigator.userAgent.toLowerCase().contains('firefox')\n  }\n\n\n/*\n * Microweber - Javascript Framework\n *\n * Copyright (c) Licensed under the Microweber\n * license http://microweber.com/license\n *\n */\n\n  mw.load_module = function(name, selector, callback, attributes) {\n     attributes = attributes || {};\n     attributes.module = name;\n     return mw._({\n        selector: selector,\n        params: attributes,\n        done: function() {\n          mw.settings.sortables_created = false;\n          if (mw.is.func(callback)) {\n            callback.call(mw.$(selector)[0]);\n          }\n        }\n      });\n  }\n\n  mw.loadModuleData = function(name, update_element, callback, attributes){\n\n\n    var attributes = attributes || {};\n\n    if(typeof update_element == 'function'){\n      var callback = update_element;\n    }\n    var update_element = document.createElement('div');\n    attributes.module = name;\n    mw._({\n      selector: update_element,\n      params: attributes\n    }, false, true)\n    .done(function(data){\n\n            setTimeout(function(){\n            callback.call(this, data);\n                $(document).off('focusin.modal');\n            }, 50)\n\n    });\n  }\n  mw.getModule = function(name, params, callback){\n    if( typeof params == 'function'){\n        var callback = params;\n    }\n    var params = params || {};\n    var update_element = document.createElement('div');\n    for(var x in params){\n        update_element.setAttribute(x, params[x]);\n    }\n    mw.loadModuleData(name, update_element, function(a){\n        callback.call(a);\n    });\n  }\n\n  mw.reload_module_intervals = {};\n  mw.reload_module_interval = function(module_name, interval) {\n    var interval =  interval || 1000;\n    var obj = {pause:false};\n    if(!!mw.reload_module_intervals[module_name]){\n        clearInterval(mw.reload_module_intervals[module_name]);\n    }\n    mw.reload_module_intervals[module_name] = setInterval(function(){\n        if(!obj.pause){\n            obj.pause = true;\n            mw.reload_module(module_name, function(){\n                obj.pause = false;\n            });\n        }\n    }, interval);\n    return mw.reload_module_intervals['module_name'];\n  }\n\n  mw.reload_module_parent = function(module, callback) {\n    if(self !== parent && !!parent.mw){\n\n       mw.parent().reload_module(module, callback)\n\t   if(typeof(mw.top().win.mweditor) != 'undefined'  && typeof(mw.top().win.mweditor) == 'object'   && typeof(mw.top().win.mweditor.contentWindow) != 'undefined'){\n\t\t mw.top().win.mweditor.contentWindow.mw.reload_module(module, callback)\n\t\t} else if(typeof(mw.top().win.iframe_editor_window) != 'undefined'  && typeof(mw.top().win.iframe_editor_window) == 'object'   && typeof(mw.top().win.iframe_editor_window.mw) != 'undefined'){\n\n\t\tmw.top().win.iframe_editor_window.mw.reload_module(module, callback)\n\t\t}\n\n        if(typeof(parent.mw_preview_frame_object) != 'undefined'  && typeof(parent.mw_preview_frame_object) == 'object'   && typeof(parent.mw_preview_frame_object.contentWindow) != 'undefined'){\n            if(parent.mw_preview_frame_object.contentWindow != null && typeof(parent.mw_preview_frame_object.contentWindow.mw) != 'undefined'){\n                parent.mw_preview_frame_object.contentWindow.mw.reload_module(module, callback)\n            }\n        }\n    } else {\n\t\tif(typeof(mweditor) != 'undefined'  && typeof(mweditor) == 'object'   && typeof(mweditor.contentWindow) != 'undefined' && typeof(mweditor.contentWindow.mw) != 'undefined'){\n\t\t    mweditor.contentWindow.mw.reload_module(module, callback)\n\t\t}\n\n\t}\n  }\n  mw.reload_modules = function(array, callback, simultaneously) {\n      if(array.array && !array.slice){\n          callback = array.callback || array.done || array.ready;\n          simultaneously = array.simultaneously;\n          array = array.array;\n      }\n      simultaneously = simultaneously || false;\n      if(simultaneously){\n        var l = array.length, ready = 0, i = 0;\n        for( ; i<l; i++){\n            mw.reload_module(array[i], function(){\n                ready++;\n                if(ready === l && callback){\n                    callback.call();\n                }\n            });\n        }\n      }\n      else{\n        if(array.length === 0){\n            if(callback){\n                callback.call()\n            }\n        }\n        else{\n            var m = array[0];\n            array.shift();\n            mw.reload_module(m, function(){\n                mw.reload_modules(array, callback, false);\n            });\n        }\n      }\n  };\n  mw.reload_module_everywhere = function(module, eachCallback) {\n    mw.tools.eachWindow(function () {\n        if(this.mw && this.mw.reload_module){\n            this.mw.reload_module(module, function(){\n                if(typeof eachCallback === 'function'){\n                    eachCallback.call(this);\n                }\n            })\n        }\n    })\n  };\n\n  mw.reload_module = function(module, callback) {\n    if(module.constructor === [].constructor){\n        var l = module.length, i=0, w = 1;\n        for( ; i<l; i++){\n          mw.reload_module(module[i], function(){\n            w++;\n            if(w === l && typeof callback === 'function'){\n              callback.call();\n            }\n            $( this ).trigger('ModuleReload')\n          });\n        }\n        return false;\n    }\n    var done = callback || function(){};\n    if (typeof module !== 'undefined') {\n      if (typeof module === 'object') {\n\n        mw._({\n          selector: module,\n          done:done\n        });\n      } else {\n        var module_name = module.toString();\n        var refresh_modules_explode = module_name.split(\",\");\n        for (var i = 0; i < refresh_modules_explode.length; i++) {\n          var module = refresh_modules_explode[i];\n          if (typeof module != 'undefined') {\n\t\t    var module = module.replace(/##/g, '#');\n            var m = mw.$(\".module[data-type='\" + module + \"']\");\n            if (m.length === 0) {\n                try { var m = $(module); }  catch(e) {};\n            }\n\n              (function(callback){\n                  var count = 0;\n                  for (var i=0;i<m.length;i++){\n                      mw.reload_module(m[i], function(){\n                          count++;\n                          if(count === m.length && typeof callback === 'function'){\n                              callback.call();\n                          }\n                          $( document ).trigger('ModuleReload')\n                      })\n                  }\n              })(callback)\n\n\n\n          }\n        }\n      }\n    }\n  }\n\n  mw.clear_cache = function() {\n    $.ajax({\n      url: mw.settings.site_url+'api/clearcache',\n      type: \"POST\",\n      success: function(data){\n        if(mw.notification != undefined){\n          mw.notification.msg(data);\n\n        }\n      }\n    });\n  }\n\n\n  mw.temp_reload_module_queue_holder = [];\n\n\n\n\n  mw[\"_\"] = function(obj, sendSpecific, DONOTREPLACE) {\n    if(mw.on){\n        mw.on.DOMChangePause = true;\n    }\n    var url = typeof obj.url !== 'undefined' ? obj.url : mw.settings.site_url+'module/';\n    var selector = typeof obj.selector !== 'undefined' ? obj.selector : '';\n    var params =  typeof obj.params !== 'undefined' ? obj.params : {};\n    var to_send = params;\n    if(typeof $(obj.selector)[0] === 'undefined') {\n        mw.pauseSave = false;\n        mw.on.DOMChangePause = false;\n        return false;\n    }\n    if(mw.session){\n        mw.session.checkPause = true;\n    }\n    var $node = $(obj.selector);\n    var node = $node[0];\n    var attrs = node.attributes;\n\n\n\n     // wait between many reloads\n      if (node.id) {\n          if ( mw.temp_reload_module_queue_holder.indexOf(node.id) === -1){\n          mw.temp_reload_module_queue_holder.push(node.id);\n              setTimeout(function() {\n                  var reload_index = mw.temp_reload_module_queue_holder.indexOf(node.id);\n                  delete mw.temp_reload_module_queue_holder[reload_index];\n              }, 300);\n          } else {\n              return;\n          }\n      }\n\n    if (sendSpecific) {\n      attrs[\"class\"] !== undefined ? to_send[\"class\"] = attrs[\"class\"].nodeValue : \"\";\n      attrs[\"data-module-name\"] !== undefined ? to_send[\"data-module-name\"] = attrs[\"data-module-name\"].nodeValue : \"\";\n      attrs[\"data-type\"] !== undefined ? to_send[\"data-type\"] = attrs[\"data-type\"].nodeValue : \"\";\n      attrs[\"type\"] !== undefined ? to_send[\"type\"] = attrs[\"type\"].nodeValue : \"\";\n      attrs[\"template\"] !== undefined ? to_send[\"template\"] = attrs[\"template\"].nodeValue : \"\";\n      attrs[\"ondrop\"] !== undefined ? to_send[\"ondrop\"] = attrs[\"ondrop\"].nodeValue : \"\";\n    }\n    else {\n      for (var i in attrs) {\n  \t\t  if(attrs[i] !== undefined){\n              var name = attrs[i].name;\n              var val = attrs[i].nodeValue;\n              if(typeof to_send[name] === 'undefined'){\n                  to_send[name]  = val;\n              }\n  \t\t  }\n      }\n    }\n    var b = true;\n    for (var a in to_send) {\n       if(to_send.hasOwnProperty(a)) { b = false; }\n    }\n    if(b){\n      mw.tools.removeClass(document.body, 'loading');\n      mw.pauseSave = false;\n      mw.on.DOMChangePause = false;\n      return false;\n    }\n    var storedValues = $node.dataset('storeValues') === 'true' ? {} : false;\n    if(storedValues) {\n        $node.find('[name]').each(function () {\n            storedValues[this.name] = $(this).val();\n        })\n    }\n\n    var xhr = $.post(url, to_send, function(data) {\n\n      if(!!mw.session){\n        mw.session.checkPause = false;\n      }\n      if(DONOTREPLACE){\n\n          mw.tools.removeClass(document.body, 'loading');\n          mw.pauseSave = false;\n          mw.on.DOMChangePause = false;\n          return false;\n      }\n\n      var docdata = mw.tools.parseHtml(data);\n\n      if(storedValues) {\n        mw.$('[name]', docdata).each(function(){\n            var el = $(this);\n            if(!el.val()) {\n                el.val(storedValues[this.name] || undefined);\n                this.setAttribute(\"value\", storedValues[this.name] || '');\n            }\n        })\n      }\n\n      var hasDone = typeof obj.done === 'function';\n      var id;\n      if (typeof to_send.id  !== 'undefined') {\n        id = to_send.id;\n      } else{\n        id = docdata.body.querySelector(['id']);\n      }\n      mw.$(selector).replaceWith($(docdata.body).html());\n      var count = 0;\n      if(hasDone){\n          setTimeout(function(){\n              count++;\n              obj.done.call($(selector)[0], data);\n              mw.trigger('moduleLoaded');\n          }, 33);\n      }\n\n      if(!id){\n          mw.pauseSave = false;\n          mw.on.DOMChangePause = false;\n          return false;\n      }\n\n\n      typeof mw.drag !== 'undefined' ? mw.drag.fix_placeholders(true) : '';\n      var m = document.getElementById(id);\n      // typeof obj.done === 'function' ? obj.done.call(selector, m) : '';\n\n      if(mw.wysiwyg){\n        $(m).hasClass(\"module\") ? mw.wysiwyg.init_editables(m) : '' ;\n      }\n\n\n      if(mw.on && !hasDone){\n        mw.on.moduleReload(id, \"\", true);\n        mw.trigger('moduleLoaded');\n      }\n    if($.fn.selectpicker) {\n        $('.selectpicker').selectpicker();\n    }\n      if (mw.on) {\n        mw.on.DOMChangePause = false;\n      }\n      mw.tools.removeClass(document.body, 'loading');\n\n\n    })\n    .fail(function(){\n       mw.pauseSave = false;\n       typeof obj.fail === 'function' ? obj.fail.call(selector) : '';\n    })\n    .always(function(){\n        mw.pauseSave = false;\n    });\n    return xhr;\n  };\n\n\n  mw.inLog = function(what) {\n    if(!mw._inlog) {\n        mw._inlog = document.createElement('div');\n        mw._inlog.className = 'mw-in-log';\n        $(mw._inlog).css({\n            position: 'fixed',\n            bottom:0,\n            left:0,\n            padding:20,\n            background:'#fff',\n            zIndex:10,\n            height:190,\n            overflow:'auto',\n            fontSize:10\n\n        })\n        document.body.appendChild(mw._inlog)\n    }\n      $(mw._inlog).append('<br>'+what)\n      mw._inlog.scrollTop = mw._inlog.scrollHeight;\n\n  };\n  mw.log = function(what) {\n    if (window.console && mw.settings.debug) {\n      top.console.log(what);\n    }\n  };\n\n\n  mw.$ = function(selector, context) {\n    if(typeof selector === 'object' || (typeof selector === 'string' && selector.indexOf('<') !== -1)){ return jQuery(selector); }\n    context = context || mwd;\n    if (typeof document.querySelector !== 'undefined') {\n      if (typeof selector === 'string') {\n        try {\n          return jQuery(context.querySelectorAll(selector));\n        } catch (e) {\n          return jQuery(selector, context);\n        }\n      } else {\n        return jQuery(selector, context);\n      }\n    } else {\n      return jQuery(selector, context);\n    }\n  };\n\n  mw.get = function(action, params, callback){\n      var obj;\n    var url = mw.settings.api_url + action;\n    var type = typeof params;\n    if(type === 'string'){\n        obj = mw.serializeFields(params);\n    }\n    else if(type.constructor === {}.constructor ){\n        obj = params;\n    }\n    else{\n      obj = {};\n    }\n    $.post(url, obj)\n        .success(function(data) { return typeof callback === 'function' ? callback.call(data) : data;   })\n        .error(function(data) { return typeof callback === 'function' ? callback.call(data) : data;  });\n  }\n\n  get_content = function(params, callback){\n    var obj = mw.url.getUrlParams(\"?\"+params);\n    if(typeof callback!='function'){\n       mw.get('get_content_admin', obj);\n    }\n    else{\n       mw.get('get_content_admin', obj, function(){callback.call(this)});\n    }\n  }\n\n  mw.get_content = get_content\n\n  mw.serializeFields =  function(id, ignorenopost){\n        var ignorenopost = ignorenopost || false;\n        var el = mw.$(id);\n        var fields = \"input[type='text'], input[type='email'], input[type='number'], input[type='tel'], \"\n                    + \"input[type='color'], input[type='url'], input[type='week'], input[type='search'], input[type='range'], \"\n                    + \"input[type='datetime-local'], input[type='month'], \"\n                    + \"input[type='password'], input[type='hidden'], input[type='datetime'], input[type='date'], input[type='time'], \"\n                    +\"input[type='email'],  textarea, select, input[type='checkbox']:checked, input[type='radio']:checked, \"\n                    +\"input[type='checkbox'][data-value-checked][data-value-unchecked]\";\n        var data = {};\n        $(fields, el).each(function(){\n\n            if((!$(this).hasClass('no-post') || ignorenopost) && !this.disabled && this.name && typeof this.name !== 'undefined'){\n              var el = this, _el = $(el);\n              var val = _el.val();\n              var name = el.name;\n              if(el.name.contains(\"[]\")){\n                  data[name] = data[name] || []\n                  data[name].push(val);\n              }\n              else if(el.type === 'checkbox' && el.getAttribute('data-value-checked') ){\n                  data[name] = el.checked ? el.getAttribute('data-value-checked') : el.getAttribute('data-value-unchecked');\n              }\n              else{\n                data[name] = val;\n              }\n            }\n        });\n        return data;\n   }\n\nmw.response = function(form, data, messages_at_the_bottom){\n     messages_at_the_bottom = messages_at_the_bottom || false;\n    if(data == null  ||  typeof data == 'undefined' ){\n      return false;\n    }\n\n    data = mw.tools.toJSON(data);\n    if(typeof data === 'undefined'){\n          return false;\n      }\n\n    if(typeof data.error !== 'undefined'){\n        mw._response.error(form, data, messages_at_the_bottom);\n        return false;\n    }\n    else if(typeof data.success !== 'undefined'){\n        mw._response.success(form, data, messages_at_the_bottom);\n        return true;\n    }\n    else if(typeof data.warning !== 'undefined'){\n        mw._response.warning(form, data, messages_at_the_bottom);\n        return false;\n    }\n    else{\n        return false;\n    }\n};\n\nmw._response = {\n  error:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'error');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.error;\n    mw._response.createHTML(msg, err_holder);\n  },\n  success:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'success');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.success;\n    mw._response.createHTML(msg, err_holder);\n  },\n  warning:function(form, data, _msg){\n    form = mw.$(form);\n    var err_holder = mw._response.msgHolder(form, 'warning');\n    var msg = typeof data.message !== 'undefined' ? data.message : data.warning;\n    mw._response.createHTML(msg, err_holder);\n  },\n  msgHolder : function(form, type, method){\n    method = method || 'append';\n    var err_holder = form.find(\".mw-checkout-response:first\");\n    var err_holder2 = form.find(\".alert:first\");\n    if(err_holder.length === 0){\n        err_holder = err_holder2;\n    }\n    if(err_holder.length === 0){\n        err_holder = document.createElement('div');\n        form[method](err_holder);\n    }\n\n    var bootrap_error_type = 'default';\n    if(type === 'error'){\n        bootrap_error_type = 'danger';\n    } else if(type === 'done'){\n        bootrap_error_type = 'info';\n    }\n\n\n    $(err_holder).empty().attr(\"class\", 'alert alert-' + type + ' alert-' + bootrap_error_type + ' ');\n    return err_holder;\n  },\n  createHTML:function(data, holder){\n    var i, html = \"\";\n\n\n    if(typeof data === 'string'){\n        html+= data.toString();\n    }\n    else{\n      for( i in data){\n          if(typeof data[i] === 'string'){\n              html+='<li>'+data[i]+'</li>';\n          }\n          else if(typeof data[i] === 'object'){\n            $.each(data[i], function(){\n                html+='<li>'+this+'</li>';\n            })\n          }\n      }\n    }\n    mw.$(holder).eq(0).append('<ul class=\"mw-error-list\">'+html+'</ul>');\n    mw.$(holder).eq(0).show();\n  }\n}\n\n\nmw.user = {\n  isLogged:function(callback){\n    $.post(mw.settings.api_url + 'is_logged', function(data){\n        var isLogged =  (data === 'true');\n        callback.call(isLogged, isLogged);\n    });\n  }\n};\n\nmw.parent = function(){\n    if(window === top){\n        return window.mw;\n    }\n    if(mw.tools.canAccessWindow(parent) && parent.mw){\n        return parent.mw;\n    }\n    return window.mw;\n};\n\nmw.top = function(){\n  if(!!mw.__top){\n      return mw.__top;\n  }\n  var getLastParent = function() {\n      var result = window;\n      var curr = window;\n      while (curr && mw.tools.canAccessWindow(curr) && (curr.mw || curr.parent.mw)){\n          result = curr;\n          curr = curr.parent;\n      }\n      mw.__top = result.mw;\n      return result.mw;\n  };\n  if(window === top){\n    mw.__top = window.mw;\n    return window.mw;\n  } else {\n        if(mw.tools.canAccessWindow(top) && top.mw){\n            mw.__top = top.mw;\n            return top.mw;\n        } else{\n            if(window.top !== window.parent){\n                return getLastParent();\n            }\n            else{\n                mw.__top = window.mw;\n                return window.mw;\n            }\n        }\n  }\n};\n\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/jquery.js\");\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/tools.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/tools/cookie.js\");\n\n\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/forms.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/url.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/events.js\");\n\n//mw.required.push(\"<?php print mw_includes_url(); ?>api/upgrades.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/session.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/shop.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/common.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/components.js\");\n\nmw.required.push(\"<?php print mw_includes_url(); ?>api/dialog.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/instruments.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/forms.js\");\nmw.required.push(\"<?php print mw_includes_url(); ?>api/fonts.js\");\n\n//mw.required.push(\"<?php print mw_includes_url(); ?>api/content.js\");\n\n\n\n<?php  include __DIR__.DS.\"tools.js\"; ?>\n<?php  include __DIR__.DS.\"tools/cookie.js\"; ?>\n\n\n\n\n\n\n<?php  //include  __DIR__.DS.\"css_parser.js\"; ?>\n\n\n<?php // include  __DIR__.DS.\"files.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"forms.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"url.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"events.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"shop.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"common.js\"; ?>\n\n\n<?php  include  __DIR__.DS.\"components.js\"; ?>\n\n\n<?php  include __DIR__.DS.\"instruments.js\"; ?>\n\n<?php  include __DIR__.DS.\"fonts.js\"; ?>\n\n<?php  //include __DIR__.DS.\"content.js\"; ?>\n\n\n\n\n\n\n$(window).on('load', function(){\n    if(typeof $().emulateTransitionEnd === 'function'){\n        $(\".modal\").each(function(){\n            var selector = 'form[action*=\"/api/\"], form.mw-checkout-form';\n            var hasMWForm = $(selector, this).length;\n            if(hasMWForm){\n                $(this).on('shown.bs.modal', function() {\n                    $(document).off('focusin.modal');\n                });\n            }\n        })\n    }\n})\n\n<?php\nif(isset($inline_scripts) and is_array($inline_scripts)){\n    print implode($inline_scripts,\"\\n\");\n}\n\n?>\n\n<?php  //include \"upgrades.js\"; ?>\n\n<?php  include  __DIR__.DS.\"session.js\"; ?>\n"], "filenames": ["userfiles/modules/admin/backup/js/restore.js", "userfiles/modules/microweber/api/api.js"], "buggy_code_start_loc": [156, 557], "buggy_code_end_loc": [179, 557], "fixing_code_start_loc": [157, 558], "fixing_code_end_loc": [189, 560], "type": "CWE-209", "message": "Generation of Error Message Containing Sensitive Information in Packagist microweber/microweber prior to 1.2.11.", "other": {"cve": {"id": "CVE-2022-0504", "sourceIdentifier": "security@huntr.dev", "published": "2022-02-08T09:15:08.327", "lastModified": "2022-02-11T16:18:29.950", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Generation of Error Message Containing Sensitive Information in Packagist microweber/microweber prior to 1.2.11."}, {"lang": "es", "value": "Una Generaci\u00f3n de Mensajes de Error que Contienen Informaci\u00f3n Confidencial en Packagist microweber/microweber versiones anteriores a 1.2.11"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 6.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 3.6}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 6.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 3.6}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:L/Au:S/C:P/I:N/A:N", "accessVector": "NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "PARTIAL", "integrityImpact": "NONE", "availabilityImpact": "NONE", "baseScore": 4.0}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.0, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "security@huntr.dev", "type": "Primary", "description": [{"lang": "en", "value": "CWE-209"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:microweber:microweber:*:*:*:*:*:*:*:*", "versionEndExcluding": "1.2.11", "matchCriteriaId": "52D59B39-B1A3-45D1-B4C4-65BEF86F2D85"}]}]}], "references": [{"url": "https://github.com/microweber/microweber/commit/e607e5f745cd99d5c06a7fce16b3577fab8e1250", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/285ff8a0-a273-4d62-ba01-3e4b4e18467b", "source": "security@huntr.dev", "tags": ["Exploit", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/microweber/microweber/commit/e607e5f745cd99d5c06a7fce16b3577fab8e1250"}}