{"buggy_code": ["<?php\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n*/\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\ninclude_once $root.\"/class/class.Usuario.php\";\ninclude_once $root.\"/snippets/generarSal.php\";\ninclude_once $root.\"/class/class.Encrypter.php\";\ninclude_once $root.\"/class/class.fachadainterfaz.php\";\nif (isset($_POST[\"user\"])) {\n\t$user = $_POST[\"user\"];\n\tif (strpos($user, '@') === false) $user = $user.'@usb.ve';\n\techo 'Usuario: '.$user;\n    $enc = new Encrypter($_POST[\"pass\"], generarSal($user));\n    $codigo = $enc->toMD5();\n\t$u = new Usuario(null,null,$user,$codigo,null,null,null,null);\n    if ($u->autocompletar() != 0)\theader(\"Location: ../principal.php?content=inicio&error=noRegistrado\");\n\telse if ($u->get('password') != $codigo)\theader(\"Location: ../principal.php?content=inicio&error=errorPass\");\n\telse if ($u->get('activo')!=1) header(\"Location: ../principal.php?content=inicio&error=noActivo\");\n\telse {\n\t\tsession_start();\n\t\t$_SESSION[\"correoUSB\"]=$u->get(\"correoUSB\");\n\t\t$_SESSION[\"nombre\"] = $u->get(\"nombre\");\n\t\t$_SESSION[\"apellido\"] = $u->get(\"apellido\");\n\t\t$_SESSION[\"admin\"] = (($u->get(\"rol\")) == 0) || (($u->get(\"rol\")) == 1);\n\t\t$_SESSION[\"profesor\"] = (($u->get(\"rol\")) == 2) || (($u->get(\"rol\")) == 1);\n\t\t$_SESSION[\"estudiante\"] = (($u->get(\"rol\")) == 3) || (($u->get(\"rol\")) == 5);\n\t\t$_SESSION[\"coordinador\"] = (($u->get(\"rol\")) == 5);\n\t\tif ($_SESSION[\"coordinador\"]){\n\t\t\t$fachada = fachadaInterfaz::getInstance();\n\t\t\t$_SESSION[\"Equipo\"]=$fachada->buscarEquipoDeEstudiante($_SESSION[\"correoUSB\"]);\n\t\t}\n\t\t$_SESSION[\"cliente\"] = (($u->get(\"rol\")) == 4);\n\t\t$_SESSION['autenticado'] = true;\n\t\theader(\"Location: ../principal.php?content=inicio\");\n\t}\n}\n?>\n", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaEquipo.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseEtapa = new listaEquipo();\n    $result = $baseEtapa->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['nombre'].\"'>\";\n        echo \"<cell>\".$row['nombre'].\"</cell>\";\n        if ($row['estado'] == 1)\n            echo \"<cell><![CDATA[Activo]]></cell>\";\n        else\n            echo \"<cell><![CDATA[Inactivo]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaEtapa.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseEtapa = new listaEtapa();\n    $result = $baseEtapa->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['id'].\"'>\";\n        echo \"<cell>\".$row['id'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell>\".$row['numero'].\"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $equipo = $_GET[\"equipo\"];\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"nombre\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaIteracion.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseAct = new listaIteracion();\r\n    $result = $baseAct->cargar($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$row['id'].\"'>\";\r\n        echo \"<cell>\".$row['id'].\"</cell>\";\r\n        echo \"<cell>\".$row['nombre'].\"</cell>\";\r\n        echo \"<cell>\".$row['tipo'].\"</cell>\";\r\n        // echo \"<cell>\";\r\n        // switch ($row['tipo']) {\r\n            // case 0: \r\n                // echo \"Iniciaci&oacute;n\";\r\n                // break;\r\n            // case 1:\r\n                // echo \"Elaboraci&oacute;n\";\r\n                // break;\r\n            // case 2:\r\n                // echo \"Construcci&oacute;n\";\r\n                // break;\r\n            // case 3:\r\n                // echo \"Transici&oacute;n\";\r\n                // break;\r\n            // default:\r\n                // echo \"Desconocido\";\r\n                // break;\r\n        // }\r\n        // echo \"</cell>\";\r\n        echo \"<cell>\";\r\n        switch ($row['estado']) {\r\n            case 0: \r\n                echo \"Planificada\";\r\n                break;\r\n            case 1:\r\n                echo \"Aprobada\";\r\n                break;\r\n            case 2:\r\n                echo \"Iniciada\";\r\n                break;\r\n            case 3:\r\n                echo \"Finalizada\";\r\n                break;\r\n            default:\r\n                echo \"Desconocido\";\r\n                break;\r\n        }\r\n        echo \"</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    $equipo = $_GET['equipo'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n    $result = $baseUsuarios->cargarMiembros($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    $equipo = $_GET['equipo'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n    $result = $baseUsuarios->cargarMiembros($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n\t\techo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $id = $_GET['id'];\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaProductosIteracion.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseAct = new listaProductosIteracion();\n    $result = $baseAct->cargar($id,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['id'].\"'>\";\n        echo \"<cell>\".$row['id'].\"</cell>\";\n        echo \"<cell><![CDATA[\".$row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['descripcion'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaProyecto.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseProy = new listaProyecto();\n    $result = $baseProy->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\". $row['numeroSolicitud'].\"]]></cell>\";\n        echo \"<cell>\";\n        if ($row['estado'] == 0)\n            echo \"Inactivo\";\n        else if ($row['estado'] == 1)\n            echo \"Activo\";\n        else if ($row['estado'] == 2)\n            echo \"Finalizado\";\n        else\n            echo \"Implantado\";\n        echo \"</cell>\";\n        echo \"<cell><![CDATA[\". $row['etapaNombre'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $id = $_GET['id'];\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaRecursos.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseAct = new listaRecursos();\n    $result = $baseAct->cargar($id,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell><![CDATA[\".$row['correoUSB'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['apellido'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nro\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaSolicitud.php\";\n    $start = ($page - 1)*$limit;\n    $baseSolicitudes = new listaSolicitud();\n    $result = $baseSolicitudes->buscarTodas($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    $total_pages = ceil($N/$limit) + 1;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['nro'].\"'>\";\n        echo \"<cell>\". $row['nro'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombreUnidadAdministrativa'].\"]]></cell>\";\n        echo \"<cell>\". $row['email'].\"</cell>\";\n        $estado = $row['estado'];\n        echo \"<cell>\";\n        if ($estado == 0)\n            echo \"Pendiente\";\n        else if ($estado == 1)\n            echo \"Aceptada\";\n        else if ($estado == 2)\n            echo \"Aprobada\";\n        else\n            echo \"Rechazada\";\n        echo \"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"correoUSB\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaUsuarios.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseUsuarios = new listaUsuarios();\n    $result = $baseUsuarios->buscar(null,null,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\n        echo \"<cell>\";\n        if ($row['activo'] == 0)\n            echo \"Inactivo\";\n        else \n            echo \"Activo\";\n        echo \"</cell>\";\n        echo \"<cell>\";\n        if ($row['rol'] == 0)\n            echo \"Administrador\";\n        else if ($row['rol'] == 2)\n            echo \"Profesor\";\n        else if ($row['rol'] == 4)\n            echo \"Cliente\";\n\t\telse if ($row['rol'] == 5)\n            echo \"Estudiante/Coordinador\";\n        else if ($row['rol'] == 3)\n            echo \"Estudiante\";\n\t\t\telse if ($row['rol'] == 1)\n            echo \"Administrador/Profesor\";\n        echo \"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n    $result = $fachada->buscarClientes($_GET['nombreProyecto']);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>1</page>\";\r\n    echo \"<total>1</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){   \r\n\t\t$row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n\t$p=array();\r\n\t$p[0]=\"rol\";\r\n\t//$p[1]=\"rol\";\r\n\t$v=array();\r\n\t$v[0]=3;\r\n\t//$v[0]=5;\r\n    $result = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSBUsuario\";\r\n\telse if($sidx == \"correoUSB\")\t$sidx = \"correoUSBUsuario\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.Equipo.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $E = new Equipo($_GET[\"Equipo\"],null);\r\n    $result = $E->EstudiantesGrid($sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\".$row['correoUSB'].\"</cell>\";\r\n\t\t echo \"<cell>\".$row['nombre'].\"</cell>\";\r\n        echo \"<cell>\".$row['apellido'].\"</cell>\";\r\n\t\t//echo \"<row id='pertenece'>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n    $result = $fachada->buscarProfes($_GET['nombreProyecto']);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>1</page>\";\r\n    echo \"<total>1</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){   \r\n\t\t$row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n\t$p=array();\r\n\t$p[0]=\"rol\";\r\n\t$v=array();\r\n\t$v[0]=2;\r\n    $result1 = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n\t$baseUsuarios = new listaUsuarios();\r\n\t$v[0]=1;\r\n    $result2 = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n\t$result = array_merge($result1,$result2);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?php \r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi/\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\ninclude_once $root.\"class/class.Solicitud.php\";\r\n\r\nif (isset($_POST[\"email\"]) && isset($_POST[\"numSol\"])){\r\n\t$solicitud = new solicitud($_POST[\"numSol\"],null,null,null,null,null,null,null,null);\r\n\t\r\n\tif ($solicitud->autocompletar()==0)\r\n\t\theader(\"Location:../principal.php?content=consultaSolicitudExitosa&nro=\".$_POST[\"numSol\"].\"&email=\".$_POST[\"email\"]);\r\n    else{\r\n\t\theader(\"Location:../principal.php?content=gestionarSolicitud&error=noExiste\");\r\n    }\r\n    \r\n}\r\n?>\r\n", "<?php \r\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\r\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\n          else\r\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\r\n*/\r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\nif (isset($_GET[\"email\"]) && isset($_GET[\"nro\"])){\r\n\tif ($_GET[\"email\"]==\"ejemplo@usb.ve\" || $_GET[\"email\"]==\"\" || $_GET[\"nro\"]==\"\") \t{\r\n        header(\"Location:../principal.php?content=solicitudes&error=camposVacios\");\r\n    }\r\n    else{\r\n\t    //Verificacion formato correo \r\n\t    $email = strtolower($_GET[\"email\"]);\r\n\t    $patronCorreo = \"/\\w(@usb\\.ve){1}$/\"; //Patron para validar correo.\r\n        if(!preg_match($patronCorreo, $email)){\r\n            header(\"Location:../principal.php?content=solicitudes&error=formatoCorreo\");\r\n        }\t    \r\n        else{\r\n\t\t\theader(\"Location:../principal.php?content=consultaSolicitudExitosa&nro=\".$_GET[\"nro\"].\"&email=\".$_GET[\"email\"]);\r\n        }\r\n    }\r\n}\r\n?>\r\n", "<?php \r\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\r\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\n          else\r\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\r\n*/\r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$matriz=$fachada->buscarProyecto($_POST['nombreProy']);\r\n\tsession_start();\r\n\t$_SESSION['proyecto'] = $matriz[0];\r\n\t$_SESSION['clientes'] = $fachada->buscarClientes($_POST['nombreProy']);\r\n\t$_SESSION['profesores'] = $fachada->buscarProfes($_POST['nombreProy']);\r\n\theader(\"Location:../principal.php?content=editaProyecto\");\r\n\t//header(\"Location:\".$root.\"principal.php?content=consultaSolicitudExitosa\");\r\n\t//print_r ($telefonos);\r\n\r\n?>\r\n", "<?php \r\ninclude \"../class/class.fachadainterfaz.php\";\r\n$nro = $_POST[\"nro\"];\r\nif (isset($nro)) {\r\n\t$solicitud = new solicitud($nro,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);\r\n                 $solicitud-> autocompletar();\r\n\t\t\t\t $solicitud -> set (\"planteamiento\",$_POST[\"planteamiento\"]);\r\n\t\t\t\t $solicitud -> set (\"justificacion\",$_POST[\"justificacion\"]);\r\n\t\t\t\t $solicitud -> set (\"tiempo\",$_POST[\"tiempolibre\"]);\r\n\t\t\t\t $solicitud -> set (\"tecnologia\", $_POST[\"recursos\"]);\r\n\t\t\t\t $solicitud -> set (\"nroAfectados\", $_POST[\"personas\"]);\r\n\t\t\t\t $solicitud -> set (\"nombreUnidadAdministrativa\", $_POST[\"department\"]);\r\n                 if (isset($_POST[\"group1\"]))\r\n                    $solicitud -> set (\"estado\", $_POST[\"group1\"]);\r\n\t$solicitud -> actualizar($nro);\r\n\t$tel = $_POST[\"tlf\"];\r\n    $area = $_POST[\"codigo\"];\r\n\t$areavieja = $_POST[\"codvi\"];\r\n\t$telv = $_POST[\"telvi\"];\r\n\t$i = 0;\r\n\t$j = sizeof($tel);\r\n\twhile( $i < $j) {\r\n\t\t$telsol = new telefonosolicitud($nro,$area[$i].$tel[$i]);\r\n\t\t$telviejo = new telefonosolicitud($nro,$areavieja[$i].$telv[$i]); \r\n\t\tif($telsol->actualizar($telviejo) != 0) {\r\n\t\techo \"Error actualizando el numero de telefono\";\r\n\t\t}\r\n\t\t$i++;\r\n\t}\r\n   echo '<script>';\r\n\techo 'alert(\"La solicitud fue actualizada\");';\r\n   echo '</script>';\r\n   header(\"Location: ../principal.php?content=gestionarSolicitud\");\r\n} \r\n?>\n", "<?php \r\ninclude \"../class/class.fachadainterfaz.php\";\r\n$email = $_POST[\"email\"];\r\nif (isset($email)) {\r\n\t$user = new Usuario(null,null,$email,null,null, null,null,null);\r\n    $user->autocompletar();\r\n\t$user -> set (\"nombre\",$_POST[\"nombre\"]);\r\n    $user -> set (\"apellido\",$_POST[\"apellido\"]);\r\n    if (isset($_POST[\"correoOpt\"])) $user -> set (\"correoOpcional\",$_POST[\"correoOpt\"]);\r\n    if (isset($_POST[\"cedula\"])) $user -> set (\"carnetOCedula\",$_POST[\"cedula\"]);\r\n    if (isset($_POST[\"codigo\"]) && isset($_POST[\"tlf\"]))\t$user -> set (\"telefono\",$_POST[\"codigo\"].$_POST[\"tlf\"]);\r\n    if (isset($_POST[\"rol\"])) $user -> set (\"rol\",$_POST[\"rol\"]);\r\n    if (isset($_POST[\"group1\"])) $user -> set (\"activo\", $_POST[\"group1\"]);\r\n\t$user -> actualizar($user->get('correoUSB'));\r\n\techo '<script>';\r\n\techo 'alert(\"Los datos de usuario han sido actualizados satisfactoriamente.\");';\r\n\techo 'location.href=\"../principal.php?content=gestionarUsuario\"';\r\n\techo '</script>';\r\n} \r\n?>\r\n", "<?php \r\ninclude \"../class/class.CasoDeUso.php\";\r\n$idcu = $_POST[\"idcu\"];\r\n$nombre = $_POST[\"nombre\"];\r\n$descripcion = $_POST[\"descripcion\"];\r\n$completitud = $_POST[\"completitud\"];\r\n$idEquipo =  $_POST[\"idequipo\"];\r\n\r\nif (isset($idcu)) {\r\n\t$cu = new casodeuso($nombre,$descripcion,$completitud,$idEquipo);\r\n    if (($cu->actualizar($idcu)) == 0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Se modific\\u00f3 satisfactoriamente el Caso de Uso.\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarCasodeuso\"';\r\n\t\techo '</script>'; \r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: No se pudo modificar los datos del Caso de Uso.\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}\r\n\t\r\n\t//$cu -> actualizar($cu->get('correoUSB'));\r\n\t\r\n} \r\n?>\r\n", "<?php\n   include_once \"../class/class.fachadainterfaz.php\";\n\t$fachada = fachadaInterfaz::getInstance();\n\tif($fachada->editarElemento($_POST[\"catalogo\"],$_POST[\"nombre\"],$_POST[\"catold\"],$_POST[\"nomold\"])==0){\n\t  echo '<script>';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t\techo 'alert(\"El elemento fue editado exitosamente\");';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Error en la actualizacion del elemento\");';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t  echo '</script>';\n\t}\n\n\n?>\n", "<?PHP\nif($_POST['oper']=='edit')\n{\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n    $id     = $_POST['id'];\n    $nota   = $_POST['nota'];\n    require_once \"../class/class.Calificacion.php\";\n    $calif = new Calificacion(null,null,$nota);\n    $calif->set('id',$id);\n    $calif->salvar();\n}\n?>", "<?php \r\n\tinclude_once \"../class/class.iteracion.php\";\r\n\tinclude_once \"../class/class.ActividadIteracion.php\";\r\n\tinclude_once \"../class/class.EsRecurso.php\";\r\n\tinclude_once \"../class/class.perteneceIteracion.php\";\r\n\tinclude_once \"../class/class.casoDeUso.php\";\r\n\tinclude_once \"../class/class.productoextraiteracion.php\";\r\n\tinclude_once \"../class/class.criteriosPEI.php\";\r\n\tinclude_once \"../class/class.criterioscasodeuso.php\";\r\n\tinclude_once \"../class/class.artefactosIteracion.php\";\r\n\t$estatus=0;\r\n\tif(isset($_POST[\"estatus\"])){\r\n\t\t$estatus=$_POST[\"estatus\"];\r\n\t\tif ($estatus == \"Planificada\")\t$estatus=0;\r\n\t\telse\tif ($estatus == \"Aprobada\")\t$estatus=1;\r\n\t\telse\t$estatus=2;\r\n\t}\r\n\t$registro = new iteracion($_POST[\"nombreIter\"],$_POST[\"tipoIteracion\"],$_POST[\"objetivos\"],$_POST[\"equipo\"],$estatus);\r\n\tif($registro->actualizar($_POST[\"nombreIterA\"])==0){\r\n\t\t$artefacto = new artefactosIteracion($_POST[\"nombreIterA\"],null);\r\n\t\t$artefacto->eliminar();\r\n\t\tif (isset($_POST[\"artefactos\"])){\t\t\t\r\n\t\t\t$artefactos=$_POST[\"artefactos\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($artefactos);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$artefacto = new artefactosIteracion($_POST[\"nombreIterA\"],$artefactos[$i]);\r\n\t\t\t\tif($artefacto->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: No se pudo agregar artefacto a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$descripciones=$_POST[\"descripcion\"];\r\n\t\t$fechasInicio=$_POST[\"fechaInicio\"];\r\n\t\t$fechasFin=$_POST[\"fechaFin\"];\r\n\t\t$nombre=$_POST[\"nombreAct\"];\r\n\t\t$ids=$_POST[\"nombreActA\"];\r\n\t\tif (isset($_POST[\"criteriosPE\"])) $cpei=$_POST[\"criteriosPE\"];\r\n\t\t$i = 0;\r\n\t\t$j = sizeof($descripciones);\r\n\t\twhile( $i < $j) {\r\n\t\t\t$actividad = new ActividadIteracion($_POST[\"nombreIterA\"],$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n\t\t\tif($actividad->actualizar($ids[$i]) != 0) {\r\n\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia una actividad con \\nestas caracteristicas: \\nNombre : '.$nombre[$i].'\\nFecha Inicio:'.$fechasInicio[$i].'\\n Fecha Fin: '.$fechasFin[$i].'\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t$actividad->autocompletar();\r\n\t\t\t$idActividad=$actividad->get('id');\r\n\t\t\t$postName=\"estudiantes-\".($i+1);\r\n\t\t\t$estudiantes=$_POST[$postName];\r\n\t\t\t$nEstudiantes= sizeof($estudiantes);\r\n\t\t\t$k=0;\r\n\t\t\twhile( $k < $nEstudiantes){\r\n\t\t\t\t$e=new EsRecurso($estudiantes[$k],$idActividad);\r\n\t\t\t\tif($e->insertar() != 0){\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Al agregar estudiante a actividad\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$k++;\r\n\t\t\t}*/\r\n\t\t\t$i++;\r\n\t\t}\r\n\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La iteracion fue actualizada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una iteracion con el nombre  introducido.\");';\r\n\t\techo 'history.back();';\r\n\t\techo '</script>';\r\n\t}\r\n\t/*\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}*/\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$p=$_POST[\"planificacion_name\"];\r\n\t$n=$_POST[\"numPlanif\"];\r\n\t$pV=$_POST[\"planificacion_name_V\"];\r\n\t$nV=$_POST[\"numPlanif_V\"];\t\r\n\t$etapa = new etapa($n,$p);\r\n\t$etapaV = new etapa($nV,$pV);\r\n\t$etapaV -> autocompletar();\r\n\t$idEtapa=$etapaV->get('id');\r\n\t\r\n\tif (($etapa ->actualizar($idEtapa)) ==0){ \r\n\t\t$etapa -> autocompletar();\r\n\t\t//$idEtapa=$etapa->get('id');\r\n\t\t$s=$_POST[\"semana\"];\r\n\t\t$f=$_POST[\"fecha\"];\r\n\t\t$ptos=$_POST[\"puntos\"];\r\n\t\t$d=$_POST[\"descripcion\"];\r\n\t\t$ids=$_POST[\"id\"];\r\n\t\t$ns=$_POST[\"nombreAct\"];\r\n\t\t$idPrincipal=$ids[0];\r\n\t\t//$booleano;\r\n\t\t$actividad =new actividad($s[0],$f[0],$d[0],$ptos[0],$idEtapa,$ns[0]);\r\n\t\t$booleano=(($actividad -> actualizar($idPrincipal))!=0);\r\n\t\t\r\n\t\t$i=1;\r\n\t\twhile ($i < sizeof($ids)){\r\n\t\t\t$id=$ids[$i];\r\n\t\t\tif($id != $idPrincipal){\r\n\t\t\t\t$actividad =new actividad($s[$i],$f[$i],$d[$i],$ptos[$i],$idEtapa,$ns[$i]);\r\n\t\t\t\t$booleano=(($actividad -> actualizar($ids[$i]))!=0);\r\n\t\t\t}else{\r\n\t\t\t\t$actividad = new actividad($s[$i],$f[$i],$d[$i],$ptos[$i],$idEtapa,$ns[$i]);\r\n\t\t\t\t$booleano=(($actividad->insertar()) != 0);\r\n\t\t\t}\r\n\t\t\t$i++;\r\n\t\t}\t\r\n\t\tif(!$booleano){\r\n\t\t\techo '<script>';\r\n\t\t\techo 'alert(\"La planificaci\\u00f3n fue modificada exitosamente.\");';\r\n\t\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\t\techo '</script>';\r\n\t\t}else{\r\n\t\t\techo '<script>';\r\n\t\t\techo 'alert(\"Error: Ocurri\\u00f3n un error durante la actualizaci\\u00f3n de alguna actividad.\");';\r\n\t\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\t\techo '</script>';\r\n\t\t}\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificaci\\u00f3n con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php\r\n   include_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$telefonos = array();\r\n\t//var_dump($_POST[\"codigo\"]);\r\n\tif(sizeof($_POST[\"nombre\"])!=0 && $_POST[\"tlf\"]!=null){\r\n\t\t$cod=$_POST[\"codigo\"];\r\n\t\t$num=$_POST[\"tlf\"];\r\n\t\t$i=0;\r\n\t\tforeach ($cod as $codigo){\r\n\t\t\t$telefonos[$i]=$cod[$i].\"\".$num[$i];\r\n\t\t\t$i++;\r\n\t\t}\r\n\t}\r\n\tif($fachada->editarProyecto($_POST[\"nombreProy\"],$_POST[\"etapa\"],$_POST[\"etapa_v\"],$_POST[\"estado\"],$_POST['unidad'],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$telefonos,$_POST[\"rol\"],$_POST[\"profesores\"])==0){\r\n\t  echo '<script>';\r\n\t\techo 'alert(\"El proyecto fue editado exitosamente\");';\r\n\t  //echo 'location.href=\"../principal.php?content=gestionarProyecto\"';\r\n\t\techo '</script>';\r\n\t  //header(\"Location: ../principal.php?content=gestionarProyecto\");\r\n\t}else{\r\n\t\t echo '<script>';\r\n\t\techo 'alert(\"Error en la actualizaci\u02c7n del proyecto\");';\r\n\t   echo '</script>';\r\n\t}\r\n\r\n\r\n?>\r\n", "\r\n<?php \r\n\t//NO FUNCIONA TODAVIA NO ESTA IMPLEMENTADA\r\n    include_once \"../class/class.Solicitud.php\";\r\n    include_once \"../class/class.ListaSolicitud.php\";\r\n    include_once \"../class/class.TelefonoSolicitud.php\";\r\n    include_once \"../class/class.ListaTelefonoSolicitud.php\";\r\n    include_once \"../class/class.fachadainterfaz.php\";\r\n\t$tel = $_POST[\"tlf\"];\r\n    $area = $_POST[\"codigo\"];\r\n\t$numero = $_POST[\"nro\"];\r\n    if ($_POST[\"email2\"]==\"ejemplo@usb.ve\" || $_POST[\"email2\"]==\"\"  || $tel[0]==\"\" || $_POST[\"personas\"]==\"\"\r\n\t\t|| $_POST[\"planteamiento\"]==\"\" || $_POST[\"recursos\"]==\"\" || $_POST[\"tiempolibre\"]==\"\"\r\n\t\t|| $_POST[\"justificacion\"]==\"\") \t{\r\n        header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=camposVacios\");\r\n    }\r\n    else{\r\n\t    $email = strtolower($_POST[\"email2\"]);\r\n        //$resultTelefono= sscanf($_POST[\"tlf\"], \"%d-%d\",$codigo,$numero);\r\n\t    $patronCorreo = \"/\\w(@usb\\.ve){1}$/\"; //Patron para validar correo.\r\n        if(!preg_match($patronCorreo, $email)){\r\n            header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoCorreo\");\r\n        }\t\r\n\r\n\r\n\t    //Verificamos el campo de la UNIDAD USB. \r\n        else if($_POST[\"department\"] == \"\"){\r\n            header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=Unidad\");\r\n        }\r\n        else{\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($tel);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t  if($tel[$i]!=\"\"){\r\n\t\t\t\t\tif(strlen($tel[$i]) !=7){\r\n\t\t\t\t\t       header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoTlf\");\r\n\t\t\t  }} else if($tel[$i]==\"\"){\r\n\t\t\t\t\t       header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoTlf\");\t\t\t  \r\n\t\t\t  }\r\n\t\t\t  $i++;\r\n\t\t\t}\r\n            $unidadUSB = $_POST[\"department\"];\r\n            //$nameproy = $_POST[\"nameproy\"];\r\n            $status = \"0\";\r\n            $baseSolicitud = new listaSolicitud();\r\n            \r\n                //generamos un c\u93daigo aleatorio de registro\r\n                /* $numero = rand().rand();\r\n                $codigo = dechex($numero);\r\n                //Completamos con ceros (0) a la izq para que sea codigo de 8 carateres\r\n                $numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\r\n                \r\n                while($baseSolicitud->buscar($numero,\"nro\") != null){\r\n                    //generamos un c\u93daigo aleatorio de registro\r\n                    $numero = rand().rand();\r\n                    $codigo = dechex($numero);\r\n                    //Completamos con ceros (0) a la izq para que sea codigo de 8 carateres\r\n                    $numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\r\n                    \r\n                } */\r\n\r\n\t\t\t\t//Revisar el pasaje de parametro 'status' ('0') \r\n\t\t\t\t$fachada = fachadaInterfaz::getInstance();\r\n\t\t\t\t$solicitud = $fachada->actualizarSolicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$_POST['email2'], $_POST['tiempolibre'], $_POST['recursos'],$_POST['personas'],$_POST['department'],0,$tel,$area);\r\n\t\t\t\t\r\n\t\t\t\tif ($solicitud == 0) header(\"Location: ../principal.php?content=solicitudExitosa&numero=\".$numero.\"&mail=\".$_POST['email2']);\r\n\t\t\t\telse header(\"Location: ../principal.php?content=editaSolicitud&numero=\".$numero.\"&mail=\".$_POST['email2'].\"&error=modificar\");\r\n\t\t\t\t//$solicitud = $fachada->consultarSolicitud($email, $_POST['numSol']);\r\n\t\t\t\t//$telefonos = $fachada->cargarTelefSolicitud($solicitud['nro']);\r\n\t\t\t\r\n\t\t\t\r\n                /* $registro = new solicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$email, $_POST[\"tiempolibre\"], $_POST[\"recursos\"],$_POST[\"personas\"],$unidadUSB, $status);\r\n                if($registro->insertar()==0){\r\n\t\t\t\t\techo 'Hubo el registro con el siguiente numero: '.$numero;\r\n\t\t\t\t\t$i = 0;\r\n\t\t\t\t\t$j = sizeof($tel);\r\n\t\t\t\t\twhile( $i < $j) {\r\n\t\t\t\t\t  $telsol = new telefonosolicitud($numero,$area[$i].$tel[$i]);\r\n\t\t\t\t\t  if($telsol->insertar() != 0) {\r\n\t\t\t\t\t    echo \"Error insertado el numero de telefono\";\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  $i++;\r\n\t\t\t\t\t} */\r\n                    \r\n                    //$numero = $basesolicitud->buscarUltimaSolicitud();\r\n                    //header(\"Location: ../principal.php?content=solicitudExitosa&numero=\".$numero.\"&mail=\".$_POST['email2']);\r\n                    //echo 'Solicitud exitosa: ';\r\n                    //echo $email;\r\n                    //echo $unidadUSB;\r\n                    //echo $nameproy;\r\n                    //echo '! ';\r\n                    //echo ' <a href=\"login.php\" style=\"color:#FFFFFF;\"><strong>Regresar a la p?gina de inicio</strong></a></p>';\r\n                //}\r\n            }\r\n                \r\n    }\r\n    \r\n?>", "<?php\n   include_once \"../class/class.fachadainterfaz.php\";\n\t$fachada = fachadaInterfaz::getInstance();\n\tif($fachada->eliminarElemento($_GET[\"catalogo\"],$_GET[\"nombre\"])==0){\n\t  echo '<script>';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t\techo 'alert(\"El elemento fue eliminado exitosamente\");';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Error en la eliminacion del elemento\");';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t  echo '</script>';\n\t}\n\n\n?>\n", "<?php \r\n\t/*\tUNIVERSIDAD SIMON BOLIVAR\r\n\t\tPERIODO:\t\t\tENE-MAR 2012\r\n\t\tMATERIA: \t\t\tSISTEMAS DE INFORMACION II\r\n\t\tNOMBRE DEL ARCHIVO:\tregistrarCasoUso.php\r\n\t*/\r\n    //$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi/\";\r\n    include_once \"../class/class.CasoDeUso.php\";\r\n    //include_once \"../class/class.listaCasoUso.php\";\r\n\t$nombre = $_POST[\"nombre\"];\r\n    $descripcion = $_POST[\"descripcion\"];\r\n\t$completitud = 0;\r\n\t$idEquipo = $_POST[\"idequipo\"];\r\n\t$registro = new casodeuso($nombre,$descripcion,$completitud,$idEquipo);\r\n\tif ($registro->insertar()==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"El caso de uso ha sido registrado exitosamente.\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarCasodeuso\"';\r\n\t\techo '</script>';\t\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Ha ocurrido un error durante la creacion del caso de uso.\\n\\\r\n\t\tPor favor comuniquese con el administrador del sistema.\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}    \r\n?>\r\n", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$fachada->registrarCoordinador($_POST[\"estudiantes\"]);\r\n\techo '<script>';\r\n\techo 'alert(\"El coordinador fue agregado exitosamente.\");';\r\n\techo 'location.href=\"../principal.php?content=gestionarEquipo\"';\r\n\techo '</script>';\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\tif(($fachada->registrarEquipo(1,$_POST[\"nombreE\"],$_POST[\"etapa\"],$_POST[\"proyecto\"],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$_POST[\"carne\"],$_POST[\"estudiantes\"]))==0){\r\n\t\techo '<script type=\"text/javascript\">';\r\n\t\techo 'alert(\"El equipo fue creado exitosamente.\\n Ahora debe seleccionar un coordinador para el equipo.\");';\r\n\t\techo 'window.location.href=\"../principal.php?content=coordinadorEquipo&nombre='.$_POST[\"nombreE\"].'\";';\r\n\t\techo 'return false;';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script type=\"text/javascript\">';\r\n\t\techo 'alert(\"Error: Ya exist\u0112a un equipo con el nombre introducido.\");';\r\n\t\techo 'window.location.href=\"../principal.php?content=registroEquipo';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \r\n\tinclude_once \"../class/class.iteracion.php\";\r\n\tinclude_once \"../class/class.ActividadIteracion.php\";\r\n\tinclude_once \"../class/class.EsRecurso.php\";\r\n\tinclude_once \"../class/class.perteneceIteracion.php\";\r\n\tinclude_once \"../class/class.casoDeUso.php\";\r\n\tinclude_once \"../class/class.productoextraiteracion.php\";\r\n\tinclude_once \"../class/class.criteriosPEI.php\";\r\n\tinclude_once \"../class/class.criterioscasodeuso.php\";\r\n\tinclude_once \"../class/class.artefactosIteracion.php\";\r\n\t$registro = new iteracion($_POST[\"nombreIter\"],$_POST[\"tipoIteracion\"],$_POST[\"objetivos\"],$_POST[\"equipo\"],0);\r\n\tif($registro->insertar()==0){\r\n\t\t$registro->autocompletar();\r\n\t\t$idIteracion=$registro->get('id');\r\n\t\t$descripciones=$_POST[\"descripcion\"];\r\n\t\t$fechasInicio=$_POST[\"fechaInicio\"];\r\n\t\t$fechasFin=$_POST[\"fechaFin\"];\r\n\t\t$nombre=$_POST[\"nombreAct\"];\r\n\t\tif (isset($_POST[\"criteriosPE\"])) $cpei=$_POST[\"criteriosPE\"];\r\n\t\t$i = 0;\r\n\t\t$j = sizeof($descripciones);\r\n\t\twhile( $i < $j) {\r\n\t\t\t$actividad = new ActividadIteracion($idIteracion,$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n\t\t\tif($actividad->insertar() != 0) {\r\n\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia una actividad con \\nestas caracteristicas: \\nNombre : '.$nombre[$i].'\\nFecha Inicio:'.$fechasInicio[$i].'\\n Fecha Fin: '.$fechasFin[$i].'\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t}\r\n\t\t\t$actividad->autocompletar();\r\n\t\t\t$idActividad=$actividad->get('id');\r\n\t\t\t$postName=\"estudiantes-\".($i+1);\r\n\t\t\t$estudiantes=$_POST[$postName];\r\n\t\t\t$nEstudiantes= sizeof($estudiantes);\r\n\t\t\t$k=0;\r\n\t\t\twhile( $k < $nEstudiantes){\r\n\t\t\t\t$e=new EsRecurso($estudiantes[$k],$idActividad);\r\n\t\t\t\tif($e->insertar() != 0){\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Al agregar estudiante a actividad\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$k++;\r\n\t\t\t}\r\n\t\t\t$i++;\r\n\t\t}\r\n\t\tif (isset($_POST[\"CU\"])){\t\t\t\r\n\t\t\t$casosDeUso=$_POST[\"CU\"];\r\n\t\t\t$criterios=$_POST[\"criterios\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($casosDeUso);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$casoDeUso= new casoDeUso($casosDeUso[$i],null,null,$_POST[\"equipo\"]);\r\n\t\t\t\t$casoDeUso->autocompletar();\r\n\t\t\t\t$idCasoDeUso=$casoDeUso->get('id');\r\n\t\t\t\t//echo '['.$idCasoDeUso.','.$idIteracion.']';\r\n\t\t\t\t$p = new perteneceIteracion($idCasoDeUso,$idIteracion);\r\n\t\t\t\tif($p->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia caso de uso : '.$casosDeUso[$i].' asociado a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$criterio= new criterioscasodeuso($idCasoDeUso,$criterios[$i]);\r\n\t\t\t\tif($criterio->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar criterio de caso de uso :\"'.$casosDeUso[$i].');';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isset($_POST[\"artefactos\"])){\t\t\t\r\n\t\t\t$artefactos=$_POST[\"artefactos\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($artefactos);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$artefacto = new artefactosIteracion($idIteracion,$artefactos[$i]);\r\n\t\t\t\tif($artefacto->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: No se pudo agregar artefacto a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isset($_POST[\"PE\"])){\r\n\t\t\t$PE=$_POST[\"PE\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($PE);\r\n\t\t\t$textPE=$_POST[\"textPE\"];\r\n\t\t\t$ccu=$_POST[\"criteriosPE\"];\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$pe= new productoextraiteracion($idIteracion,$PE[$i],$textPE[$i]);\r\n\t\t\t\tif($pe->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar producto extra :\"'.$PE[$i].');';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$pe->autocompletar();\r\n\t\t\t\t\t$idPE=$pe->get('id');\r\n\t\t\t\t\t$cri=new criteriosPEI($idPE,$ccu[$i]);\r\n\t\t\t\t\tif($cri->insertar() != 0) {\r\n\t\t\t\t\t\techo '<script>';\r\n\t\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar criterio a producto extra :\"'.$PE[$i].');';\r\n\t\t\t\t\t\techo '</script>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n            /*\r\n            $i = 0;\r\n            $j = sizeof($descripciones);\r\n            while( $i < $j) {\r\n                $actividad = new ActividadIteracion($idIteracion,$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n                if($actividad->insertar() != 0) {\r\n                    echo 'Error al agregar actividad';\r\n                }\r\n                $i++;\r\n            }\r\n            */\r\n\t\t}\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La iteracion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una iteracion con el nombre  introducido.\");';\r\n\t\techo 'history.back();';\r\n\t\techo '</script>';\r\n\t}\r\n\t/*\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}*/\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$cod=$_POST[\"codigo\"];\r\n\t$num=$_POST[\"tlf\"];\r\n\t$telefonos=array();\r\n\t$i=0;\r\n\tforeach ($cod as $codigo){\r\n\t\t$telefonos[$i]=$cod[$i].\"\".$num[$i];\r\n\t\t$i++;\r\n\t}\r\n\tif(($fachada->registrarProyecto(1,$_POST[\"nombreProy\"],$_POST[\"etapa\"],$_POST[\"solicitud\"],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$telefonos,$_POST[\"rol\"],$_POST[\"profesores\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"El proyecto fue creado exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarProyecto\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia un proyecto con el nombre introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroProyecto\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \n\t/*\tUNIVERSIDAD SIMON BOLIVAR\n\t\tPERIODO:\t\t\tENE-MAR 2012\n\t\tMATERIA: \t\t\tSISTEMAS DE INFORMACION II\n\t\tNOMBRE DEL ARCHIVO:\tregistrarSolicitud.php\n\t*/\n    /*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n    */\n    $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n    include_once $root.\"/class/class.Solicitud.php\";\n    include_once $root.\"/class/class.listaSolicitud.php\";\n    include_once $root.\"/class/class.TelefonoSolicitud.php\";\n    include_once $root.\"/class/class.listaTelefonoSolicitud.php\";\n\t$tel = $_POST[\"tlf\"];\n    $area = $_POST[\"codigo\"];\n\t$email = strtolower($_POST[\"email\"]);\n\t$i = 0;\n\t$j = sizeof($tel);\n\t$unidadUSB = $_POST[\"department\"];\n\t$status = \"0\";\n\t$baseSolicitud = new listaSolicitud();\n\t//generamos un c\u00f3digo aleatorio de registro\n\tmt_srand (time());\n        $numero = mt_rand(0,65535).mt_rand(0,65535);\n\t$codigo = dechex($numero);\n\t$numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\n\twhile($baseSolicitud->buscar($numero,\"nro\") != null){\n\t\t$numero = mt_rand(0,65535).mt_rand(0,65535);\n\t\t$codigo = dechex($numero);\n\t\t$numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\n\t}\n\t$registro = new solicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$email, $_POST[\"tiempolibre\"], $_POST[\"recursos\"],$_POST[\"personas\"],$unidadUSB, $status);\n\tif ($registro->insertar()==0){\n\t\t$i = 0;\n\t\t$j = sizeof($tel);\n\t\twhile( $i < $j) {\n\t\t  $telsol = new telefonosolicitud($numero,$area[$i].$tel[$i]);\n\t\t  if($telsol->insertar() != 0) {\n\t\t\t//echo \"Error insertado el numero de telefono\";\n\t\t  }\n\t\t  $i++;\n\t\t}\n        mail($_POST['email'],\"Datos de su solicitud\",\"Nro: \".$numero.\"\\nEmail: \".$_POST['email'].\"\\n\");\n\t\techo '<script>';\n\t\techo 'alert(\"Su solicitud ha sido procesada exitosamente.\\\n\t\t\\nPor favor revise su email, para obtener los datos\");';\n\t\techo 'location.href=\"../principal.php\"';\n\t\techo '</script>';\t\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Ha ocurrido un error durante la creacion de su solicitud.\\n\\\n\t\tPor favor comuniquese con el administrador del sistema.\");';\n\t\techo 'location.href=\"../principal.php\"';\n\t\techo '</script>';\n\t}    \n?>\n", "<?php\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n*/\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\ninclude_once $root.\"/class/class.Usuario.php\";\ninclude_once $root.\"/snippets/generarSal.php\";\ninclude_once $root.\"/class/class.Encrypter.php\";\nif (isset($_POST[\"email\"])){\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n\t$email = strtolower($_POST[\"email\"]);\n\t$numero = rand().rand();\n\t$codigo = dechex($numero);\n\t$enc = new Encrypter($codigo, generarSal($_POST[\"email\"]));\n\t$registro = new Usuario(null,null,$_POST[\"email\"],$enc->toMD5(),null, 1,$_POST[\"privilegio\"],null);\n\tif ($registro->insertar() == 0){\n\t\techo '<script>';\n\t\techo 'alert(\"Usuario registrado exitosamente.\");';\n\t\techo 'location.href=\"../principal.php?content=registroUsuario\"';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Ya existia un usuario registrado bajo ese correo USB.\");';\n\t\techo 'location.href=\"../principal.php?content=registroUsuario\"';\n\t\techo '</script>';\t\n\t}\n}\n?>\n"], "fixing_code": ["<?php\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n*/\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\ninclude_once $root.\"/class/class.Usuario.php\";\ninclude_once $root.\"/snippets/generarSal.php\";\ninclude_once $root.\"/class/class.Encrypter.php\";\ninclude_once $root.\"/class/class.fachadainterfaz.php\";\nrequire_once \"../aspectos/Seguridad.php\";\n$seguridad = Seguridad::getInstance();\n$seguridad->escapeSQL($_POST);\nif (isset($_POST[\"user\"])) {\n\t$user = $_POST[\"user\"];\n\tif (strpos($user, '@') === false) $user = $user.'@usb.ve';\n\techo 'Usuario: '.$user;\n    $enc = new Encrypter($_POST[\"pass\"], generarSal($user));\n    $codigo = $enc->toMD5();\n\t$u = new Usuario(null,null,$user,$codigo,null,null,null,null);\n    if ($u->autocompletar() != 0)\theader(\"Location: ../principal.php?content=inicio&error=noRegistrado\");\n\telse if ($u->get('password') != $codigo)\theader(\"Location: ../principal.php?content=inicio&error=errorPass\");\n\telse if ($u->get('activo')!=1) header(\"Location: ../principal.php?content=inicio&error=noActivo\");\n\telse {\n\t\tsession_start();\n\t\t$_SESSION[\"correoUSB\"]=$u->get(\"correoUSB\");\n\t\t$_SESSION[\"nombre\"] = $u->get(\"nombre\");\n\t\t$_SESSION[\"apellido\"] = $u->get(\"apellido\");\n\t\t$_SESSION[\"admin\"] = (($u->get(\"rol\")) == 0) || (($u->get(\"rol\")) == 1);\n\t\t$_SESSION[\"profesor\"] = (($u->get(\"rol\")) == 2) || (($u->get(\"rol\")) == 1);\n\t\t$_SESSION[\"estudiante\"] = (($u->get(\"rol\")) == 3) || (($u->get(\"rol\")) == 5);\n\t\t$_SESSION[\"coordinador\"] = (($u->get(\"rol\")) == 5);\n\t\tif ($_SESSION[\"coordinador\"]){\n\t\t\t$fachada = fachadaInterfaz::getInstance();\n\t\t\t$_SESSION[\"Equipo\"]=$fachada->buscarEquipoDeEstudiante($_SESSION[\"correoUSB\"]);\n\t\t}\n\t\t$_SESSION[\"cliente\"] = (($u->get(\"rol\")) == 4);\n\t\t$_SESSION['autenticado'] = true;\n\t\theader(\"Location: ../principal.php?content=inicio\");\n\t}\n}\n?>\n", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaEquipo.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseEtapa = new listaEquipo();\n    $result = $baseEtapa->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['nombre'].\"'>\";\n        echo \"<cell>\".$row['nombre'].\"</cell>\";\n        if ($row['estado'] == 1)\n            echo \"<cell><![CDATA[Activo]]></cell>\";\n        else\n            echo \"<cell><![CDATA[Inactivo]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaEtapa.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseEtapa = new listaEtapa();\n    $result = $baseEtapa->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['id'].\"'>\";\n        echo \"<cell>\".$row['id'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell>\".$row['numero'].\"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $equipo = $_GET[\"equipo\"];\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"nombre\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaIteracion.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseAct = new listaIteracion();\r\n    $result = $baseAct->cargar($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$row['id'].\"'>\";\r\n        echo \"<cell>\".$row['id'].\"</cell>\";\r\n        echo \"<cell>\".$row['nombre'].\"</cell>\";\r\n        echo \"<cell>\".$row['tipo'].\"</cell>\";\r\n        // echo \"<cell>\";\r\n        // switch ($row['tipo']) {\r\n            // case 0: \r\n                // echo \"Iniciaci&oacute;n\";\r\n                // break;\r\n            // case 1:\r\n                // echo \"Elaboraci&oacute;n\";\r\n                // break;\r\n            // case 2:\r\n                // echo \"Construcci&oacute;n\";\r\n                // break;\r\n            // case 3:\r\n                // echo \"Transici&oacute;n\";\r\n                // break;\r\n            // default:\r\n                // echo \"Desconocido\";\r\n                // break;\r\n        // }\r\n        // echo \"</cell>\";\r\n        echo \"<cell>\";\r\n        switch ($row['estado']) {\r\n            case 0: \r\n                echo \"Planificada\";\r\n                break;\r\n            case 1:\r\n                echo \"Aprobada\";\r\n                break;\r\n            case 2:\r\n                echo \"Iniciada\";\r\n                break;\r\n            case 3:\r\n                echo \"Finalizada\";\r\n                break;\r\n            default:\r\n                echo \"Desconocido\";\r\n                break;\r\n        }\r\n        echo \"</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    $equipo = $_GET['equipo'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n    $result = $baseUsuarios->cargarMiembros($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    $equipo = $_GET['equipo'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n    $result = $baseUsuarios->cargarMiembros($equipo,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n\t\techo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $id = $_GET['id'];\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaProductosIteracion.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseAct = new listaProductosIteracion();\n    $result = $baseAct->cargar($id,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['id'].\"'>\";\n        echo \"<cell>\".$row['id'].\"</cell>\";\n        echo \"<cell><![CDATA[\".$row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['descripcion'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaProyecto.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseProy = new listaProyecto();\n    $result = $baseProy->cargar($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\". $row['numeroSolicitud'].\"]]></cell>\";\n        echo \"<cell>\";\n        if ($row['estado'] == 0)\n            echo \"Inactivo\";\n        else if ($row['estado'] == 1)\n            echo \"Activo\";\n        else if ($row['estado'] == 2)\n            echo \"Finalizado\";\n        else\n            echo \"Implantado\";\n        echo \"</cell>\";\n        echo \"<cell><![CDATA[\". $row['etapaNombre'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $id = $_GET['id'];\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nombre\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaRecursos.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseAct = new listaRecursos();\n    $result = $baseAct->cargar($id,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell><![CDATA[\".$row['correoUSB'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\".$row['apellido'].\"]]></cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"nro\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaSolicitud.php\";\n    $start = ($page - 1)*$limit;\n    $baseSolicitudes = new listaSolicitud();\n    $result = $baseSolicitudes->buscarTodas($sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    $total_pages = ceil($N/$limit) + 1;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$row['nro'].\"'>\";\n        echo \"<cell>\". $row['nro'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombreUnidadAdministrativa'].\"]]></cell>\";\n        echo \"<cell>\". $row['email'].\"</cell>\";\n        $estado = $row['estado'];\n        echo \"<cell>\";\n        if ($estado == 0)\n            echo \"Pendiente\";\n        else if ($estado == 1)\n            echo \"Aceptada\";\n        else if ($estado == 2)\n            echo \"Aprobada\";\n        else\n            echo \"Rechazada\";\n        echo \"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    header(\"Content-type: text/xml;charset=utf-8\");\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\n    $page = $_GET['page'];\n    $limit = $_GET['rows'];\n    $sidx = $_GET['sidx'];\n    if ($sidx == \"invid\")\n        $sidx = \"correoUSB\";\n    $sord = $_GET['sord'];\n    require_once \"../class/class.listaUsuarios.php\";\n    $total_pages = 1;\n    $start = ($page - 1)*$limit;\n    $baseUsuarios = new listaUsuarios();\n    $result = $baseUsuarios->buscar(null,null,$sord,$sidx,$start,$limit);\n    $N = sizeof($result);\n    $count = $N;\n    echo \"<rows>\";\n    echo \"<page>\".$page.\"</page>\";\n    echo \"<total>\".$total_pages.\"</total>\";\n    echo \"<records>\".$count.\"</records>\";\n    for ($i=0; $i<$N; $i++)\n    {\n        $row = $result[$i];\n        echo \"<row id='\".$i.\"'>\";\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\n        echo \"<cell>\";\n        if ($row['activo'] == 0)\n            echo \"Inactivo\";\n        else \n            echo \"Activo\";\n        echo \"</cell>\";\n        echo \"<cell>\";\n        if ($row['rol'] == 0)\n            echo \"Administrador\";\n        else if ($row['rol'] == 2)\n            echo \"Profesor\";\n        else if ($row['rol'] == 4)\n            echo \"Cliente\";\n\t\telse if ($row['rol'] == 5)\n            echo \"Estudiante/Coordinador\";\n        else if ($row['rol'] == 3)\n            echo \"Estudiante\";\n\t\t\telse if ($row['rol'] == 1)\n            echo \"Administrador/Profesor\";\n        echo \"</cell>\";\n        echo \"</row>\";\n    }\n    echo \"</rows>\";\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n    $result = $fachada->buscarClientes($_GET['nombreProyecto']);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>1</page>\";\r\n    echo \"<total>1</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){   \r\n\t\t$row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n\t$p=array();\r\n\t$p[0]=\"rol\";\r\n\t//$p[1]=\"rol\";\r\n\t$v=array();\r\n\t$v[0]=3;\r\n\t//$v[0]=5;\r\n    $result = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSBUsuario\";\r\n\telse if($sidx == \"correoUSB\")\t$sidx = \"correoUSBUsuario\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.Equipo.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $E = new Equipo($_GET[\"Equipo\"],null);\r\n    $result = $E->EstudiantesGrid($sord,$sidx,$start,$limit);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\".$row['correoUSB'].\"</cell>\";\r\n\t\t echo \"<cell>\".$row['nombre'].\"</cell>\";\r\n        echo \"<cell>\".$row['apellido'].\"</cell>\";\r\n\t\t//echo \"<row id='pertenece'>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n    $result = $fachada->buscarProfes($_GET['nombreProyecto']);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>1</page>\";\r\n    echo \"<total>1</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++){   \r\n\t\t$row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?PHP\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_GET);\r\n    header(\"Content-type: text/xml;charset=utf-8\");\r\n    echo \"<?xml version='1.0' encoding='utf-8' ?>\";\r\n    $page = $_GET['page'];\r\n    $limit = $_GET['rows'];\r\n    $sidx = $_GET['sidx'];\r\n    if ($sidx == \"invid\")\r\n        $sidx = \"correoUSB\";\r\n    $sord = $_GET['sord'];\r\n    require_once \"../class/class.listaUsuarios.php\";\r\n    $total_pages = 1;\r\n    $start = ($page - 1)*$limit;\r\n    $baseUsuarios = new listaUsuarios();\r\n\t$p=array();\r\n\t$p[0]=\"rol\";\r\n\t$v=array();\r\n\t$v[0]=2;\r\n    $result1 = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n\t$baseUsuarios = new listaUsuarios();\r\n\t$v[0]=1;\r\n    $result2 = $baseUsuarios->buscar($p,$v,$sord,$sidx,$start,$limit);\r\n\t$result = array_merge($result1,$result2);\r\n    $N = sizeof($result);\r\n    $count = $N;\r\n    echo \"<rows>\";\r\n    echo \"<page>\".$page.\"</page>\";\r\n    echo \"<total>\".$total_pages.\"</total>\";\r\n    echo \"<records>\".$count.\"</records>\";\r\n    for ($i=0; $i<$N; $i++)\r\n    {\r\n        $row = $result[$i];\r\n        echo \"<row id='\".$i.\"'>\";\r\n        echo \"<cell>\". $row['correoUSB'].\"</cell>\";\r\n        echo \"<cell><![CDATA[\". $row['nombre'].\"]]></cell>\";\r\n        echo \"<cell><![CDATA[\". $row['apellido'].\"]]></cell>\";\r\n        echo \"<cell>No</cell>\";\r\n        echo \"</row>\";\r\n    }\r\n    echo \"</rows>\";\r\n?>", "<?php \r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi/\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\ninclude_once $root.\"class/class.Solicitud.php\";\r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_POST);\r\nif (isset($_POST[\"email\"]) && isset($_POST[\"numSol\"])){\r\n\t$solicitud = new solicitud($_POST[\"numSol\"],null,null,null,null,null,null,null,null);\r\n\t\r\n\tif ($solicitud->autocompletar()==0)\r\n\t\theader(\"Location:../principal.php?content=consultaSolicitudExitosa&nro=\".$_POST[\"numSol\"].\"&email=\".$_POST[\"email\"]);\r\n    else{\r\n\t\theader(\"Location:../principal.php?content=gestionarSolicitud&error=noExiste\");\r\n    }\r\n    \r\n}\r\n?>\r\n", "<?php \r\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\r\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\n          else\r\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\r\n*/\r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_GET);\r\nif (isset($_GET[\"email\"]) && isset($_GET[\"nro\"])){\r\n\tif ($_GET[\"email\"]==\"ejemplo@usb.ve\" || $_GET[\"email\"]==\"\" || $_GET[\"nro\"]==\"\") \t{\r\n        header(\"Location:../principal.php?content=solicitudes&error=camposVacios\");\r\n    }\r\n    else{\r\n\t    //Verificacion formato correo \r\n\t    $email = strtolower($_GET[\"email\"]);\r\n\t    $patronCorreo = \"/\\w(@usb\\.ve){1}$/\"; //Patron para validar correo.\r\n        if(!preg_match($patronCorreo, $email)){\r\n            header(\"Location:../principal.php?content=solicitudes&error=formatoCorreo\");\r\n        }\t    \r\n        else{\r\n\t\t\theader(\"Location:../principal.php?content=consultaSolicitudExitosa&nro=\".$_GET[\"nro\"].\"&email=\".$_GET[\"email\"]);\r\n        }\r\n    }\r\n}\r\n?>\r\n", "<?php \r\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\r\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\n          else\r\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\r\n*/\r\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\r\ninclude_once $root.\"class/class.fachadainterfaz.php\";\r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_POST);\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$matriz=$fachada->buscarProyecto($_POST['nombreProy']);\r\n\tsession_start();\r\n\t$_SESSION['proyecto'] = $matriz[0];\r\n\t$_SESSION['clientes'] = $fachada->buscarClientes($_POST['nombreProy']);\r\n\t$_SESSION['profesores'] = $fachada->buscarProfes($_POST['nombreProy']);\r\n\theader(\"Location:../principal.php?content=editaProyecto\");\r\n\t//header(\"Location:\".$root.\"principal.php?content=consultaSolicitudExitosa\");\r\n\t//print_r ($telefonos);\r\n\r\n?>\r\n", "<?php \r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_POST);\r\ninclude \"../class/class.fachadainterfaz.php\";\r\n$nro = $_POST[\"nro\"];\r\nif (isset($nro)) {\r\n\t$solicitud = new solicitud($nro,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);\r\n                 $solicitud-> autocompletar();\r\n\t\t\t\t $solicitud -> set (\"planteamiento\",$_POST[\"planteamiento\"]);\r\n\t\t\t\t $solicitud -> set (\"justificacion\",$_POST[\"justificacion\"]);\r\n\t\t\t\t $solicitud -> set (\"tiempo\",$_POST[\"tiempolibre\"]);\r\n\t\t\t\t $solicitud -> set (\"tecnologia\", $_POST[\"recursos\"]);\r\n\t\t\t\t $solicitud -> set (\"nroAfectados\", $_POST[\"personas\"]);\r\n\t\t\t\t $solicitud -> set (\"nombreUnidadAdministrativa\", $_POST[\"department\"]);\r\n                 if (isset($_POST[\"group1\"]))\r\n                    $solicitud -> set (\"estado\", $_POST[\"group1\"]);\r\n\t$solicitud -> actualizar($nro);\r\n\t$tel = $_POST[\"tlf\"];\r\n    $area = $_POST[\"codigo\"];\r\n\t$areavieja = $_POST[\"codvi\"];\r\n\t$telv = $_POST[\"telvi\"];\r\n\t$i = 0;\r\n\t$j = sizeof($tel);\r\n\twhile( $i < $j) {\r\n\t\t$telsol = new telefonosolicitud($nro,$area[$i].$tel[$i]);\r\n\t\t$telviejo = new telefonosolicitud($nro,$areavieja[$i].$telv[$i]); \r\n\t\tif($telsol->actualizar($telviejo) != 0) {\r\n\t\techo \"Error actualizando el numero de telefono\";\r\n\t\t}\r\n\t\t$i++;\r\n\t}\r\n   echo '<script>';\r\n\techo 'alert(\"La solicitud fue actualizada\");';\r\n   echo '</script>';\r\n   header(\"Location: ../principal.php?content=gestionarSolicitud\");\r\n} \r\n?>\n", "<?php \r\ninclude \"../class/class.fachadainterfaz.php\";\r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_POST);\r\n$email = $_POST[\"email\"];\r\nif (isset($email)) {\r\n\t$user = new Usuario(null,null,$email,null,null, null,null,null);\r\n    $user->autocompletar();\r\n\t$user -> set (\"nombre\",$_POST[\"nombre\"]);\r\n    $user -> set (\"apellido\",$_POST[\"apellido\"]);\r\n    if (isset($_POST[\"correoOpt\"])) $user -> set (\"correoOpcional\",$_POST[\"correoOpt\"]);\r\n    if (isset($_POST[\"cedula\"])) $user -> set (\"carnetOCedula\",$_POST[\"cedula\"]);\r\n    if (isset($_POST[\"codigo\"]) && isset($_POST[\"tlf\"]))\t$user -> set (\"telefono\",$_POST[\"codigo\"].$_POST[\"tlf\"]);\r\n    if (isset($_POST[\"rol\"])) $user -> set (\"rol\",$_POST[\"rol\"]);\r\n    if (isset($_POST[\"group1\"])) $user -> set (\"activo\", $_POST[\"group1\"]);\r\n\t$user -> actualizar($user->get('correoUSB'));\r\n\techo '<script>';\r\n\techo 'alert(\"Los datos de usuario han sido actualizados satisfactoriamente.\");';\r\n\techo 'location.href=\"../principal.php?content=gestionarUsuario\"';\r\n\techo '</script>';\r\n} \r\n?>\r\n", "<?php\r\ninclude \"../class/class.CasoDeUso.php\";\r\nrequire_once \"../aspectos/Seguridad.php\";\r\n$seguridad = Seguridad::getInstance();\r\n$seguridad->escapeSQL($_POST);\r\n$idcu = $_POST[\"idcu\"];\r\n$nombre = $_POST[\"nombre\"];\r\n$descripcion = $_POST[\"descripcion\"];\r\n$completitud = $_POST[\"completitud\"];\r\n$idEquipo =  $_POST[\"idequipo\"];\r\n\r\nif (isset($idcu)) {\r\n\t$cu = new casodeuso($nombre,$descripcion,$completitud,$idEquipo);\r\n    if (($cu->actualizar($idcu)) == 0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Se modific\\u00f3 satisfactoriamente el Caso de Uso.\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarCasodeuso\"';\r\n\t\techo '</script>'; \r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: No se pudo modificar los datos del Caso de Uso.\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}\r\n\t\r\n\t//$cu -> actualizar($cu->get('correoUSB'));\r\n\t\r\n} \r\n?>\r\n", "<?php\n    include_once \"../class/class.fachadainterfaz.php\";\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n\t$fachada = fachadaInterfaz::getInstance();\n\tif($fachada->editarElemento($_POST[\"catalogo\"],$_POST[\"nombre\"],$_POST[\"catold\"],$_POST[\"nomold\"])==0){\n\t  echo '<script>';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t\techo 'alert(\"El elemento fue editado exitosamente\");';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Error en la actualizacion del elemento\");';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t  echo '</script>';\n\t}\n\n\n?>\n", "<?PHP\nrequire_once \"../aspectos/Seguridad.php\";\n$seguridad = Seguridad::getInstance();\n$seguridad->escapeSQL($_POST);\nif($_POST['oper']=='edit')\n{\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n    $id     = $_POST['id'];\n    $nota   = $_POST['nota'];\n    require_once \"../class/class.Calificacion.php\";\n    $calif = new Calificacion(null,null,$nota);\n    $calif->set('id',$id);\n    $calif->salvar();\n}\n?>", "<?php \r\n\tinclude_once \"../class/class.iteracion.php\";\r\n\tinclude_once \"../class/class.ActividadIteracion.php\";\r\n\tinclude_once \"../class/class.EsRecurso.php\";\r\n\tinclude_once \"../class/class.perteneceIteracion.php\";\r\n\tinclude_once \"../class/class.casoDeUso.php\";\r\n\tinclude_once \"../class/class.productoextraiteracion.php\";\r\n\tinclude_once \"../class/class.criteriosPEI.php\";\r\n\tinclude_once \"../class/class.criterioscasodeuso.php\";\r\n\tinclude_once \"../class/class.artefactosIteracion.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$estatus=0;\r\n\tif(isset($_POST[\"estatus\"])){\r\n\t\t$estatus=$_POST[\"estatus\"];\r\n\t\tif ($estatus == \"Planificada\")\t$estatus=0;\r\n\t\telse\tif ($estatus == \"Aprobada\")\t$estatus=1;\r\n\t\telse\t$estatus=2;\r\n\t}\r\n\t$registro = new iteracion($_POST[\"nombreIter\"],$_POST[\"tipoIteracion\"],$_POST[\"objetivos\"],$_POST[\"equipo\"],$estatus);\r\n\tif($registro->actualizar($_POST[\"nombreIterA\"])==0){\r\n\t\t$artefacto = new artefactosIteracion($_POST[\"nombreIterA\"],null);\r\n\t\t$artefacto->eliminar();\r\n\t\tif (isset($_POST[\"artefactos\"])){\t\t\t\r\n\t\t\t$artefactos=$_POST[\"artefactos\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($artefactos);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$artefacto = new artefactosIteracion($_POST[\"nombreIterA\"],$artefactos[$i]);\r\n\t\t\t\tif($artefacto->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: No se pudo agregar artefacto a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$descripciones=$_POST[\"descripcion\"];\r\n\t\t$fechasInicio=$_POST[\"fechaInicio\"];\r\n\t\t$fechasFin=$_POST[\"fechaFin\"];\r\n\t\t$nombre=$_POST[\"nombreAct\"];\r\n\t\t$ids=$_POST[\"nombreActA\"];\r\n\t\tif (isset($_POST[\"criteriosPE\"])) $cpei=$_POST[\"criteriosPE\"];\r\n\t\t$i = 0;\r\n\t\t$j = sizeof($descripciones);\r\n\t\twhile( $i < $j) {\r\n\t\t\t$actividad = new ActividadIteracion($_POST[\"nombreIterA\"],$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n\t\t\tif($actividad->actualizar($ids[$i]) != 0) {\r\n\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia una actividad con \\nestas caracteristicas: \\nNombre : '.$nombre[$i].'\\nFecha Inicio:'.$fechasInicio[$i].'\\n Fecha Fin: '.$fechasFin[$i].'\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t$actividad->autocompletar();\r\n\t\t\t$idActividad=$actividad->get('id');\r\n\t\t\t$postName=\"estudiantes-\".($i+1);\r\n\t\t\t$estudiantes=$_POST[$postName];\r\n\t\t\t$nEstudiantes= sizeof($estudiantes);\r\n\t\t\t$k=0;\r\n\t\t\twhile( $k < $nEstudiantes){\r\n\t\t\t\t$e=new EsRecurso($estudiantes[$k],$idActividad);\r\n\t\t\t\tif($e->insertar() != 0){\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Al agregar estudiante a actividad\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$k++;\r\n\t\t\t}*/\r\n\t\t\t$i++;\r\n\t\t}\r\n\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La iteracion fue actualizada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una iteracion con el nombre  introducido.\");';\r\n\t\techo 'history.back();';\r\n\t\techo '</script>';\r\n\t}\r\n\t/*\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}*/\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$p=$_POST[\"planificacion_name\"];\r\n\t$n=$_POST[\"numPlanif\"];\r\n\t$pV=$_POST[\"planificacion_name_V\"];\r\n\t$nV=$_POST[\"numPlanif_V\"];\t\r\n\t$etapa = new etapa($n,$p);\r\n\t$etapaV = new etapa($nV,$pV);\r\n\t$etapaV -> autocompletar();\r\n\t$idEtapa=$etapaV->get('id');\r\n\t\r\n\tif (($etapa ->actualizar($idEtapa)) ==0){ \r\n\t\t$etapa -> autocompletar();\r\n\t\t//$idEtapa=$etapa->get('id');\r\n\t\t$s=$_POST[\"semana\"];\r\n\t\t$f=$_POST[\"fecha\"];\r\n\t\t$ptos=$_POST[\"puntos\"];\r\n\t\t$d=$_POST[\"descripcion\"];\r\n\t\t$ids=$_POST[\"id\"];\r\n\t\t$ns=$_POST[\"nombreAct\"];\r\n\t\t$idPrincipal=$ids[0];\r\n\t\t//$booleano;\r\n\t\t$actividad =new actividad($s[0],$f[0],$d[0],$ptos[0],$idEtapa,$ns[0]);\r\n\t\t$booleano=(($actividad -> actualizar($idPrincipal))!=0);\r\n\t\t\r\n\t\t$i=1;\r\n\t\twhile ($i < sizeof($ids)){\r\n\t\t\t$id=$ids[$i];\r\n\t\t\tif($id != $idPrincipal){\r\n\t\t\t\t$actividad =new actividad($s[$i],$f[$i],$d[$i],$ptos[$i],$idEtapa,$ns[$i]);\r\n\t\t\t\t$booleano=(($actividad -> actualizar($ids[$i]))!=0);\r\n\t\t\t}else{\r\n\t\t\t\t$actividad = new actividad($s[$i],$f[$i],$d[$i],$ptos[$i],$idEtapa,$ns[$i]);\r\n\t\t\t\t$booleano=(($actividad->insertar()) != 0);\r\n\t\t\t}\r\n\t\t\t$i++;\r\n\t\t}\t\r\n\t\tif(!$booleano){\r\n\t\t\techo '<script>';\r\n\t\t\techo 'alert(\"La planificaci\\u00f3n fue modificada exitosamente.\");';\r\n\t\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\t\techo '</script>';\r\n\t\t}else{\r\n\t\t\techo '<script>';\r\n\t\t\techo 'alert(\"Error: Ocurri\\u00f3n un error durante la actualizaci\\u00f3n de alguna actividad.\");';\r\n\t\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\t\techo '</script>';\r\n\t\t}\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificaci\\u00f3n con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n    include_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$telefonos = array();\r\n\t//var_dump($_POST[\"codigo\"]);\r\n\tif(sizeof($_POST[\"nombre\"])!=0 && $_POST[\"tlf\"]!=null){\r\n\t\t$cod=$_POST[\"codigo\"];\r\n\t\t$num=$_POST[\"tlf\"];\r\n\t\t$i=0;\r\n\t\tforeach ($cod as $codigo){\r\n\t\t\t$telefonos[$i]=$cod[$i].\"\".$num[$i];\r\n\t\t\t$i++;\r\n\t\t}\r\n\t}\r\n\tif($fachada->editarProyecto($_POST[\"nombreProy\"],$_POST[\"etapa\"],$_POST[\"etapa_v\"],$_POST[\"estado\"],$_POST['unidad'],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$telefonos,$_POST[\"rol\"],$_POST[\"profesores\"])==0){\r\n\t  echo '<script>';\r\n\t\techo 'alert(\"El proyecto fue editado exitosamente\");';\r\n\t  //echo 'location.href=\"../principal.php?content=gestionarProyecto\"';\r\n\t\techo '</script>';\r\n\t  //header(\"Location: ../principal.php?content=gestionarProyecto\");\r\n\t}else{\r\n\t\t echo '<script>';\r\n\t\techo 'alert(\"Error en la actualizaci\u02c7n del proyecto\");';\r\n\t   echo '</script>';\r\n\t}\r\n\r\n\r\n?>\r\n", "\r\n<?php \r\n\t//NO FUNCIONA TODAVIA NO ESTA IMPLEMENTADA\r\n    include_once \"../class/class.Solicitud.php\";\r\n    include_once \"../class/class.ListaSolicitud.php\";\r\n    include_once \"../class/class.TelefonoSolicitud.php\";\r\n    include_once \"../class/class.ListaTelefonoSolicitud.php\";\r\n    include_once \"../class/class.fachadainterfaz.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$tel = $_POST[\"tlf\"];\r\n    $area = $_POST[\"codigo\"];\r\n\t$numero = $_POST[\"nro\"];\r\n    if ($_POST[\"email2\"]==\"ejemplo@usb.ve\" || $_POST[\"email2\"]==\"\"  || $tel[0]==\"\" || $_POST[\"personas\"]==\"\"\r\n\t\t|| $_POST[\"planteamiento\"]==\"\" || $_POST[\"recursos\"]==\"\" || $_POST[\"tiempolibre\"]==\"\"\r\n\t\t|| $_POST[\"justificacion\"]==\"\") \t{\r\n        header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=camposVacios\");\r\n    }\r\n    else{\r\n\t    $email = strtolower($_POST[\"email2\"]);\r\n        //$resultTelefono= sscanf($_POST[\"tlf\"], \"%d-%d\",$codigo,$numero);\r\n\t    $patronCorreo = \"/\\w(@usb\\.ve){1}$/\"; //Patron para validar correo.\r\n        if(!preg_match($patronCorreo, $email)){\r\n            header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoCorreo\");\r\n        }\t\r\n\r\n\r\n\t    //Verificamos el campo de la UNIDAD USB. \r\n        else if($_POST[\"department\"] == \"\"){\r\n            header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=Unidad\");\r\n        }\r\n        else{\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($tel);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t  if($tel[$i]!=\"\"){\r\n\t\t\t\t\tif(strlen($tel[$i]) !=7){\r\n\t\t\t\t\t       header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoTlf\");\r\n\t\t\t  }} else if($tel[$i]==\"\"){\r\n\t\t\t\t\t       header(\"Location: ../principal.php?content=editaSolicitud&nro=\".$_POST[\"nro\"].\"&mail=\".$_POST[\"email2\"].\"&error=formatoTlf\");\t\t\t  \r\n\t\t\t  }\r\n\t\t\t  $i++;\r\n\t\t\t}\r\n            $unidadUSB = $_POST[\"department\"];\r\n            //$nameproy = $_POST[\"nameproy\"];\r\n            $status = \"0\";\r\n            $baseSolicitud = new listaSolicitud();\r\n            \r\n                //generamos un c\u93daigo aleatorio de registro\r\n                /* $numero = rand().rand();\r\n                $codigo = dechex($numero);\r\n                //Completamos con ceros (0) a la izq para que sea codigo de 8 carateres\r\n                $numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\r\n                \r\n                while($baseSolicitud->buscar($numero,\"nro\") != null){\r\n                    //generamos un c\u93daigo aleatorio de registro\r\n                    $numero = rand().rand();\r\n                    $codigo = dechex($numero);\r\n                    //Completamos con ceros (0) a la izq para que sea codigo de 8 carateres\r\n                    $numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\r\n                    \r\n                } */\r\n\r\n\t\t\t\t//Revisar el pasaje de parametro 'status' ('0') \r\n\t\t\t\t$fachada = fachadaInterfaz::getInstance();\r\n\t\t\t\t$solicitud = $fachada->actualizarSolicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$_POST['email2'], $_POST['tiempolibre'], $_POST['recursos'],$_POST['personas'],$_POST['department'],0,$tel,$area);\r\n\t\t\t\t\r\n\t\t\t\tif ($solicitud == 0) header(\"Location: ../principal.php?content=solicitudExitosa&numero=\".$numero.\"&mail=\".$_POST['email2']);\r\n\t\t\t\telse header(\"Location: ../principal.php?content=editaSolicitud&numero=\".$numero.\"&mail=\".$_POST['email2'].\"&error=modificar\");\r\n\t\t\t\t//$solicitud = $fachada->consultarSolicitud($email, $_POST['numSol']);\r\n\t\t\t\t//$telefonos = $fachada->cargarTelefSolicitud($solicitud['nro']);\r\n\t\t\t\r\n\t\t\t\r\n                /* $registro = new solicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$email, $_POST[\"tiempolibre\"], $_POST[\"recursos\"],$_POST[\"personas\"],$unidadUSB, $status);\r\n                if($registro->insertar()==0){\r\n\t\t\t\t\techo 'Hubo el registro con el siguiente numero: '.$numero;\r\n\t\t\t\t\t$i = 0;\r\n\t\t\t\t\t$j = sizeof($tel);\r\n\t\t\t\t\twhile( $i < $j) {\r\n\t\t\t\t\t  $telsol = new telefonosolicitud($numero,$area[$i].$tel[$i]);\r\n\t\t\t\t\t  if($telsol->insertar() != 0) {\r\n\t\t\t\t\t    echo \"Error insertado el numero de telefono\";\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  $i++;\r\n\t\t\t\t\t} */\r\n                    \r\n                    //$numero = $basesolicitud->buscarUltimaSolicitud();\r\n                    //header(\"Location: ../principal.php?content=solicitudExitosa&numero=\".$numero.\"&mail=\".$_POST['email2']);\r\n                    //echo 'Solicitud exitosa: ';\r\n                    //echo $email;\r\n                    //echo $unidadUSB;\r\n                    //echo $nameproy;\r\n                    //echo '! ';\r\n                    //echo ' <a href=\"login.php\" style=\"color:#FFFFFF;\"><strong>Regresar a la p?gina de inicio</strong></a></p>';\r\n                //}\r\n            }\r\n                \r\n    }\r\n    \r\n?>", "<?php\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_GET);\n    include_once \"../class/class.fachadainterfaz.php\";\n\t$fachada = fachadaInterfaz::getInstance();\n\tif($fachada->eliminarElemento($_GET[\"catalogo\"],$_GET[\"nombre\"])==0){\n\t  echo '<script>';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t\techo 'alert(\"El elemento fue eliminado exitosamente\");';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Error en la eliminacion del elemento\");';\n\t  echo 'location.href=\"../principal.php?content=gestionarCatalogo\";';\n\t  echo '</script>';\n\t}\n\n\n?>\n", "<?php \r\n\t/*\tUNIVERSIDAD SIMON BOLIVAR\r\n\t\tPERIODO:\t\t\tENE-MAR 2012\r\n\t\tMATERIA: \t\t\tSISTEMAS DE INFORMACION II\r\n\t\tNOMBRE DEL ARCHIVO:\tregistrarCasoUso.php\r\n\t*/\r\n    //$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi/\";\r\n    include_once \"../class/class.CasoDeUso.php\";\r\n    //include_once \"../class/class.listaCasoUso.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$nombre = $_POST[\"nombre\"];\r\n    $descripcion = $_POST[\"descripcion\"];\r\n\t$completitud = 0;\r\n\t$idEquipo = $_POST[\"idequipo\"];\r\n\t$registro = new casodeuso($nombre,$descripcion,$completitud,$idEquipo);\r\n\tif ($registro->insertar()==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"El caso de uso ha sido registrado exitosamente.\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarCasodeuso\"';\r\n\t\techo '</script>';\t\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Ha ocurrido un error durante la creacion del caso de uso.\\n\\\r\n\t\tPor favor comuniquese con el administrador del sistema.\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\t}    \r\n?>\r\n", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$fachada->registrarCoordinador($_POST[\"estudiantes\"]);\r\n\techo '<script>';\r\n\techo 'alert(\"El coordinador fue agregado exitosamente.\");';\r\n\techo 'location.href=\"../principal.php?content=gestionarEquipo\"';\r\n\techo '</script>';\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\tif(($fachada->registrarEquipo(1,$_POST[\"nombreE\"],$_POST[\"etapa\"],$_POST[\"proyecto\"],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$_POST[\"carne\"],$_POST[\"estudiantes\"]))==0){\r\n\t\techo '<script type=\"text/javascript\">';\r\n\t\techo 'alert(\"El equipo fue creado exitosamente.\\n Ahora debe seleccionar un coordinador para el equipo.\");';\r\n\t\techo 'window.location.href=\"../principal.php?content=coordinadorEquipo&nombre='.$_POST[\"nombreE\"].'\";';\r\n\t\techo 'return false;';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script type=\"text/javascript\">';\r\n\t\techo 'alert(\"Error: Ya exist\u0112a un equipo con el nombre introducido.\");';\r\n\t\techo 'window.location.href=\"../principal.php?content=registroEquipo';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \r\n\tinclude_once \"../class/class.iteracion.php\";\r\n\tinclude_once \"../class/class.ActividadIteracion.php\";\r\n\tinclude_once \"../class/class.EsRecurso.php\";\r\n\tinclude_once \"../class/class.perteneceIteracion.php\";\r\n\tinclude_once \"../class/class.casoDeUso.php\";\r\n\tinclude_once \"../class/class.productoextraiteracion.php\";\r\n\tinclude_once \"../class/class.criteriosPEI.php\";\r\n\tinclude_once \"../class/class.criterioscasodeuso.php\";\r\n\tinclude_once \"../class/class.artefactosIteracion.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$registro = new iteracion($_POST[\"nombreIter\"],$_POST[\"tipoIteracion\"],$_POST[\"objetivos\"],$_POST[\"equipo\"],0);\r\n\tif($registro->insertar()==0){\r\n\t\t$registro->autocompletar();\r\n\t\t$idIteracion=$registro->get('id');\r\n\t\t$descripciones=$_POST[\"descripcion\"];\r\n\t\t$fechasInicio=$_POST[\"fechaInicio\"];\r\n\t\t$fechasFin=$_POST[\"fechaFin\"];\r\n\t\t$nombre=$_POST[\"nombreAct\"];\r\n\t\tif (isset($_POST[\"criteriosPE\"])) $cpei=$_POST[\"criteriosPE\"];\r\n\t\t$i = 0;\r\n\t\t$j = sizeof($descripciones);\r\n\t\twhile( $i < $j) {\r\n\t\t\t$actividad = new ActividadIteracion($idIteracion,$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n\t\t\tif($actividad->insertar() != 0) {\r\n\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia una actividad con \\nestas caracteristicas: \\nNombre : '.$nombre[$i].'\\nFecha Inicio:'.$fechasInicio[$i].'\\n Fecha Fin: '.$fechasFin[$i].'\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t}\r\n\t\t\t$actividad->autocompletar();\r\n\t\t\t$idActividad=$actividad->get('id');\r\n\t\t\t$postName=\"estudiantes-\".($i+1);\r\n\t\t\t$estudiantes=$_POST[$postName];\r\n\t\t\t$nEstudiantes= sizeof($estudiantes);\r\n\t\t\t$k=0;\r\n\t\t\twhile( $k < $nEstudiantes){\r\n\t\t\t\t$e=new EsRecurso($estudiantes[$k],$idActividad);\r\n\t\t\t\tif($e->insertar() != 0){\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Al agregar estudiante a actividad\");';\r\n\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$k++;\r\n\t\t\t}\r\n\t\t\t$i++;\r\n\t\t}\r\n\t\tif (isset($_POST[\"CU\"])){\t\t\t\r\n\t\t\t$casosDeUso=$_POST[\"CU\"];\r\n\t\t\t$criterios=$_POST[\"criterios\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($casosDeUso);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$casoDeUso= new casoDeUso($casosDeUso[$i],null,null,$_POST[\"equipo\"]);\r\n\t\t\t\t$casoDeUso->autocompletar();\r\n\t\t\t\t$idCasoDeUso=$casoDeUso->get('id');\r\n\t\t\t\t//echo '['.$idCasoDeUso.','.$idIteracion.']';\r\n\t\t\t\t$p = new perteneceIteracion($idCasoDeUso,$idIteracion);\r\n\t\t\t\tif($p->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: Ya existia caso de uso : '.$casosDeUso[$i].' asociado a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$criterio= new criterioscasodeuso($idCasoDeUso,$criterios[$i]);\r\n\t\t\t\tif($criterio->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar criterio de caso de uso :\"'.$casosDeUso[$i].');';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isset($_POST[\"artefactos\"])){\t\t\t\r\n\t\t\t$artefactos=$_POST[\"artefactos\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($artefactos);\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$artefacto = new artefactosIteracion($idIteracion,$artefactos[$i]);\r\n\t\t\t\tif($artefacto->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error: No se pudo agregar artefacto a iteracion\");';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isset($_POST[\"PE\"])){\r\n\t\t\t$PE=$_POST[\"PE\"];\r\n\t\t\t$i = 0;\r\n\t\t\t$j = sizeof($PE);\r\n\t\t\t$textPE=$_POST[\"textPE\"];\r\n\t\t\t$ccu=$_POST[\"criteriosPE\"];\r\n\t\t\twhile( $i < $j) {\r\n\t\t\t\t$pe= new productoextraiteracion($idIteracion,$PE[$i],$textPE[$i]);\r\n\t\t\t\tif($pe->insertar() != 0) {\r\n\t\t\t\t\techo '<script>';\r\n\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar producto extra :\"'.$PE[$i].');';\r\n\t\t\t\t\techo '</script>';\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$pe->autocompletar();\r\n\t\t\t\t\t$idPE=$pe->get('id');\r\n\t\t\t\t\t$cri=new criteriosPEI($idPE,$ccu[$i]);\r\n\t\t\t\t\tif($cri->insertar() != 0) {\r\n\t\t\t\t\t\techo '<script>';\r\n\t\t\t\t\t\techo 'alert(\"Error:  No se pudo agregar criterio a producto extra :\"'.$PE[$i].');';\r\n\t\t\t\t\t\techo '</script>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$i++;\r\n\t\t\t}\r\n            /*\r\n            $i = 0;\r\n            $j = sizeof($descripciones);\r\n            while( $i < $j) {\r\n                $actividad = new ActividadIteracion($idIteracion,$nombre[$i],$descripciones[$i],$fechasInicio[$i],$fechasFin[$i]);\r\n                if($actividad->insertar() != 0) {\r\n                    echo 'Error al agregar actividad';\r\n                }\r\n                $i++;\r\n            }\r\n            */\r\n\t\t}\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La iteracion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php\"';\r\n\t\techo '</script>';\r\n\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una iteracion con el nombre  introducido.\");';\r\n\t\techo 'history.back();';\r\n\t\techo '</script>';\r\n\t}\r\n\t/*\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}*/\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\trequire_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\tif(($fachada->registrarPlanificacion($_POST[\"planificacion_name\"],$_POST[\"numPlanif\"],$_POST[\"semana\"],$_POST[\"fecha\"],$_POST[\"puntos\"],$_POST[\"descripcion\"],$_POST[\"nombreAct\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"La planificacion fue creada exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia una planificacion con el nombre y numero introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroPlanificacion\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \r\n\tinclude_once \"../class/class.fachadainterfaz.php\";\r\n    require_once \"../aspectos/Seguridad.php\";\r\n    $seguridad = Seguridad::getInstance();\r\n    $seguridad->escapeSQL($_POST);\r\n\t$fachada = fachadaInterfaz::getInstance();\r\n\t$cod=$_POST[\"codigo\"];\r\n\t$num=$_POST[\"tlf\"];\r\n\t$telefonos=array();\r\n\t$i=0;\r\n\tforeach ($cod as $codigo){\r\n\t\t$telefonos[$i]=$cod[$i].\"\".$num[$i];\r\n\t\t$i++;\r\n\t}\r\n\tif(($fachada->registrarProyecto(1,$_POST[\"nombreProy\"],$_POST[\"etapa\"],$_POST[\"solicitud\"],$_POST[\"nombre\"],$_POST[\"apellido\"],$_POST[\"email\"],$telefonos,$_POST[\"rol\"],$_POST[\"profesores\"]))==0){\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"El proyecto fue creado exitosamente\");';\r\n\t\techo 'location.href=\"../principal.php?content=gestionarProyecto\"';\r\n\t\techo '</script>';\r\n\t}else{\r\n\t\techo '<script>';\r\n\t\techo 'alert(\"Error: Ya existia un proyecto con el nombre introducido.\");';\r\n\t\techo 'location.href=\"../principal.php?content=registroProyecto\"';\r\n\t\techo '</script>';\r\n\t}\r\n?>", "<?php \n\t/*\tUNIVERSIDAD SIMON BOLIVAR\n\t\tPERIODO:\t\t\tENE-MAR 2012\n\t\tMATERIA: \t\t\tSISTEMAS DE INFORMACION II\n\t\tNOMBRE DEL ARCHIVO:\tregistrarSolicitud.php\n\t*/\n    /*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n    */\n    $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n    include_once $root.\"/class/class.Solicitud.php\";\n    include_once $root.\"/class/class.listaSolicitud.php\";\n    include_once $root.\"/class/class.TelefonoSolicitud.php\";\n    include_once $root.\"/class/class.listaTelefonoSolicitud.php\";\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n\t$tel = $_POST[\"tlf\"];\n    $area = $_POST[\"codigo\"];\n\t$email = strtolower($_POST[\"email\"]);\n\t$i = 0;\n\t$j = sizeof($tel);\n\t$unidadUSB = $_POST[\"department\"];\n\t$status = \"0\";\n\t$baseSolicitud = new listaSolicitud();\n\t//generamos un c\u00f3digo aleatorio de registro\n\tmt_srand (time());\n        $numero = mt_rand(0,65535).mt_rand(0,65535);\n\t$codigo = dechex($numero);\n\t$numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\n\twhile($baseSolicitud->buscar($numero,\"nro\") != null){\n\t\t$numero = mt_rand(0,65535).mt_rand(0,65535);\n\t\t$codigo = dechex($numero);\n\t\t$numero = substr('00000000', 0, (8-strlen($codigo))).$codigo;\n\t}\n\t$registro = new solicitud($numero,$_POST[\"planteamiento\"],$_POST[\"justificacion\"],$email, $_POST[\"tiempolibre\"], $_POST[\"recursos\"],$_POST[\"personas\"],$unidadUSB, $status);\n\tif ($registro->insertar()==0){\n\t\t$i = 0;\n\t\t$j = sizeof($tel);\n\t\twhile( $i < $j) {\n\t\t  $telsol = new telefonosolicitud($numero,$area[$i].$tel[$i]);\n\t\t  if($telsol->insertar() != 0) {\n\t\t\t//echo \"Error insertado el numero de telefono\";\n\t\t  }\n\t\t  $i++;\n\t\t}\n        mail($_POST['email'],\"Datos de su solicitud\",\"Nro: \".$numero.\"\\nEmail: \".$_POST['email'].\"\\n\");\n\t\techo '<script>';\n\t\techo 'alert(\"Su solicitud ha sido procesada exitosamente.\\\n\t\t\\nPor favor revise su email, para obtener los datos\");';\n\t\techo 'location.href=\"../principal.php\"';\n\t\techo '</script>';\t\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Ha ocurrido un error durante la creacion de su solicitud.\\n\\\n\t\tPor favor comuniquese con el administrador del sistema.\");';\n\t\techo 'location.href=\"../principal.php\"';\n\t\techo '</script>';\n\t}    \n?>\n", "<?php\n/*if ($_SERVER['SERVER_ADDR'] == \"127.0.0.1\")\n                  $root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\n          else\n                  $root = \"/home/ps6116-02/public_html/sigeprosi\";\n*/\n$root = $_SERVER['DOCUMENT_ROOT'].\"/sigeprosi\";\ninclude_once $root.\"/class/class.Usuario.php\";\ninclude_once $root.\"/snippets/generarSal.php\";\ninclude_once $root.\"/class/class.Encrypter.php\";\nrequire_once \"../aspectos/Seguridad.php\";\n$seguridad = Seguridad::getInstance();\n$seguridad->escapeSQL($_POST);\nif (isset($_POST[\"email\"])){\n    require_once \"../aspectos/Seguridad.php\";\n    $seguridad = Seguridad::getInstance();\n    $seguridad->escapeSQL($_POST);\n\t$email = strtolower($_POST[\"email\"]);\n\t$numero = rand().rand();\n\t$codigo = dechex($numero);\n\t$enc = new Encrypter($codigo, generarSal($_POST[\"email\"]));\n\t$registro = new Usuario(null,null,$_POST[\"email\"],$enc->toMD5(),null, 1,$_POST[\"privilegio\"],null);\n\tif ($registro->insertar() == 0){\n\t\techo '<script>';\n\t\techo 'alert(\"Usuario registrado exitosamente.\");';\n\t\techo 'location.href=\"../principal.php?content=registroUsuario\"';\n\t\techo '</script>';\n\t}else{\n\t\techo '<script>';\n\t\techo 'alert(\"Ya existia un usuario registrado bajo ese correo USB.\");';\n\t\techo 'location.href=\"../principal.php?content=registroUsuario\"';\n\t\techo '</script>';\t\n\t}\n}\n?>\n"], "filenames": ["acciones/IniciarSesion.php", "acciones/cargarEquipos.php", "acciones/cargarEtapas.php", "acciones/cargarIteracion.php", "acciones/cargarMiembros.php", "acciones/cargarMiembrosC.php", "acciones/cargarProductosIteracion.php", "acciones/cargarProyectos.php", "acciones/cargarRecursos.php", "acciones/cargarSolicitudes.php", "acciones/cargarUsuarios.php", "acciones/cargarUsuariosCA.php", "acciones/cargarUsuariosEstudiantes.php", "acciones/cargarUsuariosEstudiantesEquipo.php", "acciones/cargarUsuariosPE.php", "acciones/cargarUsuariosProfesores.php", "acciones/consultarSolicitud.php", "acciones/consultarSolicitud2.php", "acciones/editaProyecto.php", "acciones/editaSolicitud.php", "acciones/editaUsuario.php", "acciones/editarCasoUso.php", "acciones/editarElemento.php", "acciones/editarEntregas.php", "acciones/editarIteracion.php", "acciones/editarPlanificacion.php", "acciones/editarProyecto.php", "acciones/editarSolicitud.php", "acciones/eliminarElemento.php", "acciones/registrarCasoUso.php", "acciones/registrarCoordinador.php", "acciones/registrarEquipo.php", "acciones/registrarIteracion.php", "acciones/registrarPlanificacion.php", "acciones/registrarProyecto.php", "acciones/registrarSolicitud.php", "acciones/registroUsuario.php"], "buggy_code_start_loc": [11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 8, 8, 1, 2, 1, 2, 1, 10, 2, 2, 8, 2, 9, 2, 2, 10, 4, 2, 16, 10], "buggy_code_end_loc": [11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 6, 8, 8, 1, 2, 2, 3, 1, 10, 2, 3, 8, 3, 9, 2, 2, 10, 5, 2, 16, 10], "fixing_code_start_loc": [12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5, 9, 9, 2, 3, 1, 2, 2, 11, 3, 2, 9, 2, 10, 3, 3, 11, 4, 3, 17, 11], "fixing_code_end_loc": [15, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 8, 12, 12, 5, 6, 6, 6, 5, 14, 6, 6, 12, 6, 13, 6, 6, 14, 7, 6, 20, 14], "type": "CWE-89", "message": "A vulnerability classified as critical has been found in ale7714 sigeprosi. This affects an unknown part. The manipulation leads to sql injection. The name of the patch is 5291886f6c992316407c376145d331169c55f25b. It is recommended to apply a patch to fix this issue. The identifier VDB-218493 was assigned to this vulnerability.", "other": {"cve": {"id": "CVE-2012-10006", "sourceIdentifier": "cna@vuldb.com", "published": "2023-01-18T16:15:10.743", "lastModified": "2023-01-25T18:59:39.217", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "A vulnerability classified as critical has been found in ale7714 sigeprosi. This affects an unknown part. The manipulation leads to sql injection. The name of the patch is 5291886f6c992316407c376145d331169c55f25b. It is recommended to apply a patch to fix this issue. The identifier VDB-218493 was assigned to this vulnerability."}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 9.8, "baseSeverity": "CRITICAL"}, "exploitabilityScore": 3.9, "impactScore": 5.9}], "cvssMetricV30": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:A/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L", "attackVector": "ADJACENT_NETWORK", "attackComplexity": "LOW", "privilegesRequired": "LOW", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "LOW", "baseScore": 5.5, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.1, "impactScore": 3.4}], "cvssMetricV2": [{"source": "cna@vuldb.com", "type": "Secondary", "cvssData": {"version": "2.0", "vectorString": "AV:A/AC:L/Au:S/C:P/I:P/A:P", "accessVector": "ADJACENT_NETWORK", "accessComplexity": "LOW", "authentication": "SINGLE", "confidentialityImpact": "PARTIAL", "integrityImpact": "PARTIAL", "availabilityImpact": "PARTIAL", "baseScore": 5.2}, "baseSeverity": "MEDIUM", "exploitabilityScore": 5.1, "impactScore": 6.4, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": false}]}, "weaknesses": [{"source": "cna@vuldb.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-89"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:sigeprosi_project:sigeprosi:*:*:*:*:*:*:*:*", "versionEndExcluding": "2012-05-15", "matchCriteriaId": "4FBFC89E-AE06-4CFA-B110-E51285334095"}]}]}], "references": [{"url": "https://github.com/ale7714/sigeprosi/commit/5291886f6c992316407c376145d331169c55f25b", "source": "cna@vuldb.com", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://vuldb.com/?ctiid.218493", "source": "cna@vuldb.com", "tags": ["Permissions Required", "Third Party Advisory"]}, {"url": "https://vuldb.com/?id.218493", "source": "cna@vuldb.com", "tags": ["Third Party Advisory"]}]}, "github_commit_url": "https://github.com/ale7714/sigeprosi/commit/5291886f6c992316407c376145d331169c55f25b"}}