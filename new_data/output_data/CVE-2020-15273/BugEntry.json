{"buggy_code": ["<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u30c6\u30fc\u30d6\u30eb\n */\n?>\n\n\n<script type=\"text/javascript\">\n$(function(){\n\t$(\".theme-popup\").colorbox({inline:true, width:\"60%\"});\n});\n</script>\n\n<div id=\"CurrentTheme\" class=\"bca-current-theme\">\n\t<h2 class=\"bca-current-theme__name\"><?php echo __d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de') ?></h2>\n\t<?php if ($currentTheme): ?>\n    <div class=\"bca-current-theme__inner\">\n      <div class=\"bca-current-theme__main\">\n        <div class=\"bca-current-theme__screenshot\">\n          <?php if ($currentTheme['screenshot']): ?>\n            <?php $this->BcBaser->img('/theme/' . $currentTheme['name'] . '/screenshot.png', ['alt' => $currentTheme['title']]) ?>\n          <?php else: ?>\n            <?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $currentTheme['title']]) ?>\n          <?php endif ?>\n        </div>\n        <div class=\"row-tools\">\n          <?php $this->BcBaser->link('', ['controller' => 'theme_files', 'action' => 'index', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'bca-btn-icon', 'data-bca-btn-type' => 'file-list', 'data-bca-btn-size' => 'lg']) ?>\n          <?php $this->BcBaser->link('', ['action' => 'ajax_copy', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy bca-btn-icon', 'data-bca-btn-type' => 'copy', 'data-bca-btn-size' => 'lg']) ?>\n        </div>\n      </div>\n\n      <div class=\"bca-current-theme__sub\">\n        <div class=\"theme-info\">\n          <h3 class=\"theme-name\"><strong><?php echo h($currentTheme['title']) ?></strong>&nbsp;(&nbsp;<?php echo $currentTheme['name'] ?>&nbsp;)</h3>\n          <p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3') ?>\uff1a<?php echo $currentTheme['version'] ?></p>\n          <p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005') ?>\uff1a<?php if (!empty($currentTheme['url']) && !empty($currentTheme['author'])): ?>\n              <?php $this->BcBaser->link($currentTheme['author'], $currentTheme['url'], ['target' => '_blank', 'escape' => true]) ?>\n            <?php else: ?>\n              <?php echo h($currentTheme['author']) ?>\n            <?php endif ?>\n          </p>\n        </div>\n        <?php if ($defaultDataPatterns && $this->BcBaser->isAdminUser()): ?>\n          <?php echo $this->BcForm->create('Theme', ['url' => ['action' => 'load_default_data_pattern']]) ?>\n          <?php echo $this->BcForm->input('Theme.default_data_pattern', ['type' => 'select', 'options' => $defaultDataPatterns]) ?>\n          <?php echo $this->BcForm->submit(__d('baser', '\u521d\u671f\u30c7\u30fc\u30bf\u8aad\u8fbc'), ['class' => 'button-small', 'div' => false, 'id' => 'BtnLoadDefaultDataPattern']) ?>\n          <?php echo $this->BcForm->end() ?>\n        <?php endif ?>\n        <div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($currentTheme['description'])) ?></div>\n      </div>\n    </div>\n\n  <?php else: ?>\n\t\t<p><?php echo __d('baser', '\u73fe\u5728\u3001\u30c6\u30fc\u30de\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002') ?></p>\n\t<?php endif ?>\n</div>\n\n<ul class=\"list-panel bca-list-panel\">\n\t<?php if (!empty($datas)): ?>\n\t\t<?php foreach ($datas as $data): ?>\n\t\t\t<?php $this->BcBaser->element('themes/index_row', ['data' => $data]) ?>\n\t\t<?php endforeach; ?>\n\t<?php else: ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002') ?><br><?php echo __d('baser', '<a href=\"https://market.basercms.net/\" target=\"_blank\">baser\u30de\u30fc\u30b1\u30c3\u30c8</a>\u3067\u30c6\u30fc\u30de\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u3087\u3046\u3002') ?></li>\n\t<?php endif; ?>\n</ul>", "<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u884c\n */\n?>\n\n\n<li>\n\t<p class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</p>\n\t<p class=\"bca-current-theme__screenshot\">\n\t\t<a class=\"theme-popup\" href=\"<?php echo '#Contents' . Inflector::camelize($data['name']) ?>\">\n<?php if ($data['screenshot']): ?>\n\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n<?php else: ?>\n\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n<?php endif ?>\n\t\t</a>\n\t</p>\n\t<p class=\"row-tools\">\n<?php if ($data['name'] != $this->BcBaser->siteConfig['theme']): ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'apply', $data['name']], ['title' => __d('baser', '\u9069\u7528'), 'class' => 'submit-token bca-btn-icon', 'data-bca-btn-type' => 'apply', 'data-bca-btn-size' => 'lg']) ?>\n<?php endif ?>\n\t\t<?php $this->BcBaser->link('', ['controller' => 'theme_files', 'action' => 'index', $data['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'bca-btn-icon', 'data-bca-btn-type' => 'file-list', 'data-bca-btn-size' => 'lg']) ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'ajax_copy', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy bca-btn-icon', 'data-bca-btn-type' => 'copy', 'data-bca-btn-size' => 'lg']) ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'ajax_delete', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn-delete bca-btn-icon', 'data-bca-btn-type' => 'delete', 'data-bca-btn-size' => 'lg']) ?>\n\t</p>\n\t<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></p>\n\t<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n<?php else: ?>\n\t\t<?php echo h($data['author']) ?>\n<?php endif ?>\n\t</p>\n\t<div style='display:none'>\n\t\t<div id=\"<?php echo 'Contents' . Inflector::camelize($data['name']) ?>\" class=\"theme-popup-contents clearfix\">\n\t\t\t<div class=\"bca-current-theme__screenshot\">\n<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n<?php endif ?>\n\t\t\t</div>\n\t\t\t<div class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</div>\n\t\t\t<div class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></div>\n\t\t\t<div class=\"theme-author\">\n\t\t\t\t<?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n<?php else: ?>\n\t\t\t\t<?php echo h($data['author']) ?>\n<?php endif ?>\n\t\t\t</div>\n\t\t\t<div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($data['description'])) ?></div>\n\t\t</div>\n\t</div>\n</li>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u767b\u9332\u30fb\u7de8\u96c6\n *\n * @var BcAppView $this\n */\n$this->BcBaser->js('admin/themes/form');\n$params = explode('/', $path);\n$parentPrams = explode('/', $path);\nif ($this->request->action !== 'admin_add') {\n\tunset($parentPrams[count($parentPrams)-1]);\n}\n?>\n<!-- current -->\n<div class=\"em-box bca-current-box\">\n<?php echo __d('baser', '\u73fe\u5728\u306e\u4f4d\u7f6e')?>\uff1a<?php echo h($currentPath) ?>\n</div>\n\n<?php if($theme\t!= 'core' && !$isWritable): ?>\n<div id=\"AlertMessage\"><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u306a\u3044\u306e\u3067\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093\u3002')?></div>\n<?php endif ?>\n\n<?php if ($this->request->action == 'admin_add'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'add'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'edit'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php endif ?>\n\n<?php echo $this->BcFormTable->dispatchBefore() ?>\n\n<?php echo $this->BcForm->input('ThemeFile.parent', ['type' => 'hidden']) ?>\n\n<!-- form -->\n<div class=\"section\">\n\t<table cellpadding=\"0\" cellspacing=\"0\" id=\"FormTable\" class=\"form-table bca-form-table\">\n\t\t<tr>\n\t\t\t<th class=\"col-head bca-form-table__label\"><?php echo $this->BcForm->label('ThemeFile.name', __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d')) ?>&nbsp;<span class=\"bca-label\" data-bca-label-type=\"required\"><?php echo __d('baser', '\u5fc5\u9808') ?></span></th>\n\t\t\t<td class=\"col-input bca-form-table__input\">\n\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'maxlength' => 255, 'autofocus' => true]) ?>\n\t\t\t\t\t<?php if ($this->BcForm->value('ThemeFile.ext')): ?>.<?php endif ?>\n\t\t\t\t\t<?php echo h($this->BcForm->value('ThemeFile.ext')) ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t\t<i class=\"bca-icon--question-circle btn help bca-help\"></i>\n\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.name') ?>\n\t\t\t\t\t<div id=\"helptextName\" class=\"helptext\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u534a\u89d2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002')?></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'readonly' => 'readonly']) ?> .<?php echo $this->BcForm->value('ThemeFile.ext') ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<?php if ($this->request->action == 'admin_add' || (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && in_array($this->request->data['ThemeFile']['type'], ['text', 'image']))): ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"col-head bca-form-table__label\"><?php echo $this->BcForm->label('ThemeFile.contents', __d('baser', '\u5185\u5bb9')) ?></th>\n\t\t\t\t<td class=\"col-input bca-form-table__input\">\n\t\t\t\t\t<?php if (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && $this->request->data['ThemeFile']['type'] == 'image'): ?>\n\t\t\t\t\t\t<div style=\"margin:20px auto\">\n\t\t\t\t\t\t\t<?php $this->BcBaser->link(\n\t\t\t\t\t\t\t\t$this->BcBaser->getImg(array_merge(['action' => 'img_thumb', 550, 550, $theme, $plugin, $type], explode('/', $path)), ['alt' => basename($path)]), array_merge(['action' => 'img', $theme, $plugin, $type], explode('/', $path)), ['rel' => 'colorbox', 'title' => basename($path)]\n\t\t\t\t\t\t\t); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php elseif ($this->request->action == 'admin_add' || $this->request->data['ThemeFile']['type'] == 'text'): ?>\n\t\t\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30]) ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.contents') ?>\n\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30, 'readonly' => 'readonly']) ?>\n\t\t\t\t\t\t<?php endif ?>\n\t\t\t\t\t<?php endif ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<?php endif ?>\n\t\t<?php echo $this->BcForm->dispatchAfterForm() ?>\n\t</table>\n</div>\n\n<?php echo $this->BcFormTable->dispatchAfter() ?>\n\n<div class=\"submit bca-actions\">\n\t<?php if ($this->request->action == 'admin_add'): ?>\n\t\t<div class=\"bca-actions__main\">\n\t\t\t<?php echo $this->BcForm->button(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button bca-btn', 'data-bca-btn-type' => 'save', 'data-bca-btn-size' => 'lg', 'data-bca-btn-width' => 'lg','id' => 'BtnSave']) ?>\n\t\t</div>\n\t<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t\t<?php if($isWritable): ?>\n\t\t\t<div class=\"bca-actions__main\">\n\t\t\t\t<?php echo $this->BcForm->button(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button bca-btn', 'data-bca-btn-type' => 'save', 'data-bca-btn-size' => 'lg', 'data-bca-btn-width' => 'lg','id' => 'BtnSave']) ?>\n\t\t\t</div>\n\t\t\t<div class=\"bca-actions__sub\">\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u524a\u9664'), array_merge(['action' => 'del', $theme, $plugin, $type], $params), ['class' => 'submit-token button bca-btn', 'data-bca-btn-type' => 'delete', 'data-bca-btn-size' => 'sm'], sprintf(__d('baser', '%s \u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f'), basename($path)), false) ?>\n\t\t\t</div>\n\t\t<?php endif ?>\t\n\t<?php else: ?>\n\t\t<?php // \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a2\u30bb\u30c3\u30c8\u306e\u5834\u5408\u306f\u30b3\u30d4\u30fc\u3067\u304d\u306a\u3044 ?>\n\t\t<?php if (!$safeModeOn): ?>\n\t\t\t<?php //if($theme == 'core' && !(($type == 'css' || $type == 'js' || $type == 'img') && $plugin)): ?>\n\t\t\t<?php if ($theme == 'core'): ?>\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc'), array_merge(array('action' => 'copy_to_theme', $theme, $plugin, $type), explode('/', $path)), array('class' => 'submit-token btn-red button bca-btn'), sprintf(__d('baser', '\u672c\u5f53\u306b\u73fe\u5728\u306e\u30c6\u30fc\u30de\u300c%s\u300d\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f\\n\u65e2\u306b\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002'), Inflector::camelize($siteConfig['theme']))); ?>\n\t\t\t<?php endif; ?>\n\t\t<?php else: ?>\n\t\t\t<?php echo __d('baser', '\u6a5f\u80fd\u5236\u9650\u306e\u30bb\u30fc\u30d5\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u73fe\u5728\u306e\u30c6\u30fc\u30de\u3078\u306e\u30b3\u30d4\u30fc\u306f\u3067\u304d\u307e\u305b\u3093\u3002') ?>\n\t\t<?php endif; ?>\n\t<?php endif; ?>\n</div>\n\n<?php if ($this->request->action == 'admin_add' || $this->request->action == 'admin_edit'): ?>\n\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button bca-btn', 'data-bca-btn-type' => 'back-to-list']); ?>\n<?php else: ?>\n\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(array('action' => 'index', $theme, $plugin, $type), explode('/', dirname($path))), array('class' => 'btn-gray button bca-btn', 'data-bca-btn-type' => 'back-to-list')); ?>\n<?php endif; ?>\n\n\n<?php echo $this->BcForm->end() ?>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.Config\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u57fa\u672c\u8a2d\u5b9a\n */\n$config['BcApp'] = [\n\t// \u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30a4\u30c8\u30eb\u8a2d\u5b9a\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u969b\u306e\u30a8\u30e9\u30fc\u6642\u7b49DB\u63a5\u7d9a\u307e\u3048\u306e\u30a8\u30e9\u30fc\u3067\u5229\u7528\uff09\n\t'title' => __d('baser', 'baserCMS'),\n\t// \u521d\u671f\u30c6\u30fc\u30de\n\t'defaultTheme' => 'bc_sample',\n\t// \u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30de\uff08\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\uff09\n\t'adminTheme' => '',\n\t// \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u57fa\u672c\u3068\u306a\u308b\u62e1\u5f35\u5b50\uff08.php \u63a8\u5968\uff09\n\t'templateExt' => '.php',\n\t// \u30b7\u30b9\u30c6\u30e0\u30ca\u30d3\n\t//\n\t// \u521d\u671f\u72b6\u614b\u3067\u8868\u793a\u3059\u308b\u30e1\u30cb\u30e5\u30fc\u306f\u3001`Contents` \u30ad\u30fc\u914d\u4e0b\u306b\u5b9a\u7fa9\u3057\u3001\u300c\u8a2d\u5b9a\u300d\u5185\u306b\u683c\u7d0d\u3059\u308b\u5834\u5408\u306f\u3001`Systems` \u30ad\u30fc\u914d\u4e0b\u306b\u5b9a\u7fa9\u3059\u308b\n\t//\n\t// \u25a0 \u30e1\u30a4\u30f3\u30e1\u30cb\u30e5\u30fc\n\t// `title` : \u8868\u793a\u540d\u79f0\n\t// `type` : `system` \u307e\u305f\u306f\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u7279\u5b9a\u3059\u308b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3002\u300c\u8a2d\u5b9a\u300d\u5185\u306b\u683c\u7d0d\u3059\u308b\u5834\u5408\u306f\u3001`system` \u3092\u6307\u5b9a\n\t// `url` : \u30ea\u30f3\u30af\u5148URL\n\t// `menus` : \u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306b\u914d\u5217\u3067\u6307\u5b9a\n\t// `disable` : \u975e\u8868\u793a\u306b\u3059\u308b\u5834\u5408\u306b `true` \u3092\u6307\u5b9a\n\t//\n\t// \u25a0 \u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\n\t// `title` : \u8868\u793a\u540d\u79f0\n\t// `url` : \u30ea\u30f3\u30af\u5148URL\n\t// `disable` : \u975e\u8868\u793a\u306b\u3059\u308b\u5834\u5408\u306b `true` \u3092\u6307\u5b9a\n\t'adminNavigation' => [\n\t\t'Contents' => [\n\t\t\t'Dashboard' => [\n\t\t\t\t'title' => __d('baser', '\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9'),\n\t\t\t\t'type' => 'dashboard',\n\t\t\t\t'url' => '/' . Configure::read('Routing.prefixes.0'),\n\t\t\t],\n\t\t\t'Contents' => [\n\t\t\t\t'title' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406'),\n\t\t\t\t'type' => 'contents',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Contents' => ['title' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'index']],\n\t\t\t\t\t'ContentsTrash' => ['title' => __d('baser', '\u30b4\u30df\u7bb1'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'trash_index']],\n\t\t\t\t]\n\t\t\t],\n\t\t],\n\t\t'Systems' => [\n\t\t\t'SiteConfigs' => [\n\t\t\t\t'title' => __d('baser', '\u30b5\u30a4\u30c8\u57fa\u672c\u8a2d\u5b9a'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'form'],\n\t\t\t],\n\t\t\t'Users' => [\n\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Users' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'users', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/users\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'UserGroups' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u30b0\u30eb\u30fc\u30d7'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'user_groups', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/user_groups\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Sites' => [\n\t\t\t\t'title' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Sites' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'sites', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/sites\\/.+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Theme' => [\n\t\t\t\t'title' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Themes' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30c6\u30fc\u30de'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/themes\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'ThemeConfigs' => ['title' => __d('baser', '\u8a2d\u5b9a'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'theme_configs', 'action' => 'form']],\n\t\t\t\t\t'ThemeAdd' => ['title' => __d('baser', '\u65b0\u898f\u8ffd\u52a0'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'add']],\n\t\t\t\t\t'ThemesDownload' => ['title' => __d('baser', '\u5229\u7528\u4e2d\u30c6\u30fc\u30de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'download']],\n\t\t\t\t\t'ThemesDownloadDefaultDataPattern' => ['title' => __d('baser', '\u30c6\u30fc\u30de\u7528\u521d\u671f\u30c7\u30fc\u30bf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'download_default_data_pattern']],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Plugin' => [\n\t\t\t\t'title' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Plugins' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'plugins', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/plugins\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Tools' => [\n\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Tools' => ['title' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30c8\u30c3\u30d7'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'index']],\n\t\t\t\t\t'EditorTemplates' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30a8\u30c7\u30a3\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'editor_templates', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/editor_templates\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'WidgetAreas' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u30a8\u30ea\u30a2'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'widget_areas', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/widget_areas\\/[^\\/]+?\\/[0-9]+/s'\n\t\t\t\t\t],\n\t\t\t\t\t'SearchIndices' => ['title' => __d('baser', '\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'search_indices', 'action' => 'index']],\n\t\t\t\t\t'SiteConfigsInfo' => ['title' => __d('baser', '\u74b0\u5883\u60c5\u5831'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'info']],\n\t\t\t\t\t'ThemeFiles' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30b3\u30a2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u78ba\u8a8d'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'theme_files', 'action' => 'index', 'core'],\n\t\t\t\t\t\t'currentRegex' => '/\\/theme_files\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'ToolsMaintenance' => ['title' => __d('baser', '\u30c7\u30fc\u30bf\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'maintenance']],\n\t\t\t\t\t'ToolsLog' => ['title' => __d('baser', '\u30ed\u30b0\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'log']],\n\t\t\t\t\t'ToolsWriteSchema' => ['title' => __d('baser', '\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u751f\u6210'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'write_schema']],\n\t\t\t\t\t'ToolsLoadSchema' => ['title' => __d('baser', '\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8aad\u8fbc'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'load_schema']],\n\t\t\t\t]\n\t\t\t]\n\t\t]\n\t],\n\t// @deprecated 5.0.0 since 4.2.0 BcApp.adminNavigation \u306e\u5f62\u5f0f\u306b\u5909\u66f4\n\t'adminNavi' => ['core' => [\n\t\t\t'name' => 'baserCMS\u30b3\u30a2',\n\t\t\t'contents' => [\n\t\t\t\t['name' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'widget_areas', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'plugins', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'form']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'users', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u30b0\u30eb\u30fc\u30d7\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'user_groups', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'search_indices', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30a8\u30c7\u30a3\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'editor_templates', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'sites', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b5\u30fc\u30d0\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u524a\u9664'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'del_cache'], 'options' => ['confirm' => __d('baser', '\u30b5\u30fc\u30d0\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3044\u3044\u3067\u3059\u304b\uff1f')]]\n\t]]],\n\t// \u30b3\u30a2\u30d7\u30e9\u30b0\u30a4\u30f3\n\t'corePlugins' => ['Blog', 'Feed', 'Mail', 'Uploader'],\n\t// \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30ad\u30fc\n\t'updateKey' => 'update',\n\t// \u7ba1\u7406\u8005\u30b0\u30eb\u30fc\u30d7ID\n\t'adminGroupId' => 1,\n\t// \u30a8\u30c7\u30a3\u30bf\u30fc\n\t'editors' => [\n\t\t'none' => __d('baser', '\u306a\u3057'),\n\t\t'BcCkeditor' => 'CKEditor'\n\t],\n\t'testTheme' => 'bc_sample',\n\t// \u56fa\u5b9a\u30da\u30fc\u30b8\u3067\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\u304b\u3069\u3046\u304b\n\t// \u304a\u540d\u524d\u30c9\u30c3\u30c8\u30b3\u30e0\u306e\u5834\u5408\u3001CLI\u7248PHP\u306e\u5b58\u5728\u78ba\u8a8d\u306e\u6bb5\u968e\u3067\u56fa\u307e\u3063\u3066\u3057\u307e\u3046\n\t'validSyntaxWithPage' => true,\n\t// \u7ba1\u7406\u8005\u4ee5\u5916\u306ePHP\u30b3\u30fc\u30c9\u3092\u8a31\u53ef\u3059\u308b\u304b\u3069\u3046\u304b\n\t'allowedPhpOtherThanAdmins' => true,\n\t'marketThemeRss' => 'https://market.basercms.net/themes.rss',\n\t'marketPluginRss' => 'https://market.basercms.net/plugins.rss',\n\t'specialThanks'\t=> 'https://basercms.net/special_thanks/special_thanks/ajax_users',\n\t// \u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30c6\u30fc\u30de\n\t'defaultAdminTheme' => 'admin-third',\n\t// \u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4f5c\u6210\u65e5\u3092\u81ea\u52d5\u3067\u66f4\u65b0\u3059\u308b\n\t'autoUpdateContentCreatedDate' => true,\n\t// \u30aa\u30fc\u30c8\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u5916\u8a2d\u5b9a\uff08\u7d76\u5bfeURL\uff09\n\t// \u300c\u3059\u3079\u3066\u306e\u30ea\u30f3\u30af\u3092\u30b5\u30d6\u30b5\u30a4\u30c8\u7528\u306b\u5909\u63db\u3059\u308b\u300d\u6307\u5b9a\u6642\u3001\u5168\u3066\u306e\u30ea\u30f3\u30af\u306b\u5bfe\u3057\u3066\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u5099\u3048\u308b\u7b87\u6240\u306b\u9664\u5916\u6307\u5b9a\u3067\u304d\u308b\n\t// \u6307\u5b9a\u3057\u305f\u7d76\u5bfeURL\u3092\u8a18\u8f09\u3057\u3066\u3044\u308b\u30ea\u30f3\u30af\u306f\u5909\u63db\u3057\u306a\u3044\n\t// \u4f8b: 'https://basercms.net/'\u3068\u8a18\u8f09 \u2192 https://basercms.net/s/ \u306f s \u304c\u4ed8\u304b\u306a\u304f\u306a\u308b\n\t'excludeAbsoluteUrlAddPrefix' => [],\n\t// \u30aa\u30fc\u30c8\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u5916\u8a2d\u5b9a\uff08\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09\n\t// \u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30eaURL\u3092\u8a18\u8f09\u3057\u3066\u3044\u308b\u30ea\u30f3\u30af\u306f\u5909\u63db\u3057\u306a\u3044\n\t// \u4f8b: 'test/' \u3068\u8a18\u8f09 \u2192 https://basercms.net/s/test/ \u306f s \u304c\u4ed8\u304b\u306a\u304f\u306a\u308b\n\t'excludeListAddPrefix' => [],\n\t// generator \u306e\u30e1\u30bf\u30bf\u30b0\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\n\t'outputMetaGenerator' => true,\n\t// \u5916\u90e8\u30ea\u30f3\u30af\n\t'outerLinks' => [\n\t\t// \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30de\u30cb\u30e5\u30a2\u30eb\n\t\t'installManual' => 'http://wiki.basercms.net/%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%82%AC%E3%82%A4%E3%83%89',\n\t\t// \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb\n\t\t'updateManual' => 'http://wiki.basercms.net/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%82%AC%E3%82%A4%E3%83%89'\n\t]\n];\n\n/**\n * \u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\n */\n$config['BcRequire'] = array(\n\t'phpVersion' => \"5.4.0\",\n\t'phpMemory' => \"128\",\n\t'MySQLVersion' => \"5.0.0\",\n\t'winSQLiteVersion' => \"3.7.16\",\n\t'PostgreSQLVersion' => \"8.4.0\"\n);\n\n/**\n * \u74b0\u5883\u8a2d\u5b9a\n */\n$config['BcEnv'] = array(\n\t// \u30c6\u30b9\u30c8DB\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\n\t'testDbPrefix' => 'test_',\n\t// Web\u30b5\u30a4\u30c8URL\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3067 install.php \u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3001\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3067\u5909\u66f4\u53ef\uff09\n\t'siteUrl' => '',\n\t// SSL\u306eWeb\u30b5\u30a4\u30c8URL\uff08\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3067\u5909\u66f4\u53ef\uff09\n\t'sslUrl' => '',\n\t// \u5fa9\u6570\u306eWeb\u30b5\u30a4\u30c8\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u306e\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\n\t'mainDomain' => '',\n\t// \u73fe\u5728\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30db\u30b9\u30c8\n\t'host' => @$_SERVER['HTTP_HOST']\n);\n\n/**\n * \u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\n */\n$config['BcEncode'] = array(\n\t// \u6587\u5b57\u30b3\u30fc\u30c9\u306e\u691c\u51fa\u9806\n\t'detectOrder' => 'ASCII,JIS,UTF-8,SJIS-win,EUC-JP',\n\t'mail' => array(\n\t\t'UTF-8' => 'UTF-8',\n\t\t'ISO-2022-JP' => 'ISO-2022-JP'\n\t)\n);\n\n/**\n * \u8a8d\u8a3c\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u8a2d\u5b9a\n * \u203b CSV\u306f\u975e\u5bfe\u5fdc\n */\n$prefixes = Configure::read('Routing.prefixes');\n$adminPrefix = $prefixes[0];\n$config['BcAuthPrefix'] = array(\n\t// \u7ba1\u7406\u753b\u9762\n\t'admin' => array(\n\t\t// \u8a8d\u8a3c\u30bf\u30a4\u30d7\n\t\t'type' => 'Form',\n\t\t// \u8a8d\u8a3c\u8a2d\u5b9a\u540d\n\t\t'name' => __d('baser', '\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0'),\n\t\t// URL\u306b\u304a\u3051\u308b\u30a8\u30a4\u30ea\u30a2\u30b9\n\t\t'alias' => $adminPrefix,\n\t\t// \u8a8d\u8a3c\u5f8c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\n\t\t'loginRedirect' => '/' . $adminPrefix,\n\t\t// \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u30bf\u30a4\u30c8\u30eb\n\t\t'loginTitle' => __d('baser', '\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u30ed\u30b0\u30a4\u30f3'),\n\t\t// \u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8URL\n\t\t'loginAction' => '/' . $adminPrefix . '/users/login',\n\t\t// \u30ed\u30b0\u30a2\u30a6\u30c8\u30da\u30fc\u30b8URL\n\t\t'logoutAction'=> '/' . $adminPrefix . '/users/logout',\n\t\t// \u30c4\u30fc\u30eb\u30d0\u30fc\u5229\u7528\n\t\t'toolbar' => true,\n\t\t// \u30e2\u30c7\u30eb\n\t\t'userModel' => 'User',\n\t\t// \u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\n\t\t'sessionKey' => 'Admin',\n\t\t// preview\u53ca\u3073force\u6307\u5b9a\u6642\u306b\u7ba1\u7406\u753b\u9762\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u72b6\u6cc1\u4e0b\u3067\u306e\u6319\u52d5\u5224\u5225\n\t\t// true\uff1a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n\t\t// false\uff1a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u306a\u3044\n\t\t// @see /lib/Baser/Routing/Route/BcContentsRoute.php\n\t\t'previewRedirect' => true\n\n\t)\n\t// \u30d5\u30ed\u30f3\u30c8\uff08\u4f8b\uff09\n/* 'front' => array(\n\t  'name'\t\t\t=> __d('baser', '\u30d5\u30ed\u30f3\u30c8'),\n\t  'loginRedirect'\t=> '/',\n\t  'userModel'\t\t=> 'User',\n\t  'loginAction'\t=> '/users/login',\n\t  'logoutAction'=> '/users/logout',\n\t  'toolbar'\t\t=> true,\n\t  'sessionKey'\t=> 'User'\n\t), */\n\t// \u30de\u30a4\u30da\u30fc\u30b8\uff08\u4f8b\uff09\n/* 'mypage' => array(\n\t  'name'\t\t\t=> __d('baser', '\u30de\u30a4\u30da\u30fc\u30b8'),\n\t  'alias'\t\t\t=> 'mypage',\n\t  'loginRedirect'\t=> '/mypage/members/index',\n\t  'loginTitle'\t=> __d('baser', '\u30de\u30a4\u30da\u30fc\u30b8\u30ed\u30b0\u30a4\u30f3'),\n\t  'userModel'\t\t=> 'Member',\n\t  'loginAction'\t=> '/mypage/members/login',\n\t  'logoutAction'=> '/mypage/members/logout',\n\t  'toolbar'\t\t=> false,\n\t  'sessionKey'\t=> 'User'\n\t) */\n);\n\n/**\n * E\u30e1\u30fc\u30eb\u8a2d\u5b9a\n */\n$config['BcEmail'] = array(\n\t// \u6539\u884c\u30b3\u30fc\u30c9\n\t'lfcode' => \"\\n\"\n);\n\n/**\n * \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8a2d\u5b9a\n */\n$config['BcAgent'] = array(\n\t'mobile' => array(\n\t\t'name' => __d('baser', '\u30b1\u30fc\u30bf\u30a4'),\n\t\t'helper' => 'BcMobile',\n\t\t'agents' => array(\n\t\t\t'Googlebot-Mobile',\n\t\t\t'Y!J-SRD',\n\t\t\t'Y!J-MBS',\n\t\t\t'DoCoMo',\n\t\t\t'SoftBank',\n\t\t\t'Vodafone',\n\t\t\t'J-PHONE',\n\t\t\t'UP.Browser'\n\t\t),\n\t\t'sessionId' => true\n\t),\n\t'smartphone' => array(\n\t\t'name' => __d('baser', '\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3'),\n\t\t'helper' => 'BcSmartphone',\n\t\t'agents' => array(\n\t\t\t'iPhone',\t\t\t// Apple iPhone\n\t\t\t'iPod',\t\t\t\t// Apple iPod touch\n\t\t\t'Android',\t\t\t// 1.5+ Android\n\t\t\t'dream',\t\t\t// Pre 1.5 Android\n\t\t\t'CUPCAKE',\t\t\t// 1.5+ Android\n\t\t\t'blackberry9500',\t// Storm\n\t\t\t'blackberry9530',\t// Storm\n\t\t\t'blackberry9520',\t// Storm v2\n\t\t\t'blackberry9550',\t// Storm v2\n\t\t\t'blackberry9800',\t// Torch\n\t\t\t'webOS',\t\t\t// Palm Pre Experimental\n\t\t\t'incognito',\t\t// Other iPhone browser\n\t\t\t'webmate'\t\t\t// Other iPhone browser\n\t\t)\n\t)\n);\n\n/**\n * \u8a00\u8a9e\u8a2d\u5b9a\n */\n$config['BcLang'] = [\n\t'english' => [\n\t\t'name' => __d('baser', '\u82f1\u8a9e'),\n\t\t'langs' => [\n\t\t\t'en'\n\t\t]\n\t]\n];\n\n/**\n * \u30b3\u30f3\u30c6\u30f3\u30c4\u8a2d\u5b9a\n */\n$config['BcContents'] = [\n\t'items' => [\n\t\t'Core' => [\n\t\t\t'Default'\t=> [\n\t\t\t\t'title' => __d('baser', '\u7121\u6240\u5c5e\u30b3\u30f3\u30c6\u30f3\u30c4'),\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'empty'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--file',\n\t\t\t],\n\t\t\t'ContentFolder'\t=> [\n\t\t\t\t'multiple'\t=> true,\n\t\t\t\t'preview'\t=> true,\n\t\t\t\t'title' => __d('baser', '\u30d5\u30a9\u30eb\u30c0\u30fc'),\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--folder',\n\t\t\t],\n\t\t\t'ContentAlias'\t=> [\n\t\t\t\t'multiple' => true,\n\t\t\t\t'title' => __d('baser', '\u30a8\u30a4\u30ea\u30a2\u30b9'),\n\t\t\t\t'icon'\t=> 'bca-icon--alias',\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'add',\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'edit_alias'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t],\n\t\t\t'ContentLink'\t=> [\n\t\t\t\t'multiple' => true,\n\t\t\t\t'title' => __d('baser', '\u30ea\u30f3\u30af'),\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--link',\n\t\t\t],\n\t\t\t'Page'\t=> [\n\t\t\t\t'title' => __d('baser', '\u56fa\u5b9a\u30da\u30fc\u30b8'),\n\t\t\t\t'multiple'\t=> true,\n\t\t\t\t'preview'\t=> true,\n\t\t\t\t'icon'\t=> 'bca-icon--file',\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'ajax_add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'display'\n\t\t\t\t\t],\n\t\t\t\t\t'copy'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'ajax_copy'\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t]\n\t\t]\n\t]\n];\n\n/**\n * \u30b7\u30e7\u30fc\u30c8\u30b3\u30fc\u30c9\u8a2d\u5b9a\n */\n$config['BcShortCode']['Core'] = [\n\t'BcBaser.getSitemap',\n\t'BcBaser.getRelatedSiteLinks',\n\t'BcBaser.getWidgetArea',\n\t'BcBaser.getGoogleMaps',\n\t'BcBaser.getSiteSearchForm',\n\t'BcBaser.getUpdateInfo'\n];\n\n/**\n * \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n */\n$config['BcSecurity'] = [\n\t'csrfExpires' => '+4 hours'\n];\n\n/**\n * \u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\n */\n$config['BcWidget'] = [\n\t// \u30d5\u30ed\u30f3\u30c8\u306b\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u30a8\u30ea\u30a2\u306e\u7de8\u96c6\u30ea\u30f3\u30af\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\t'editLinkAtFront' => false\n];\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.Controller\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\nApp::uses('Imageresizer', 'Vendor');\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n *\n * @package Baser.Controller\n */\nclass ThemeFilesController extends AppController {\n\n/**\n * \u30af\u30e9\u30b9\u540d\n * @var string\n */\n\tpublic $name = 'ThemeFiles';\n\n/**\n * \u30e2\u30c7\u30eb\n *\n * @var array\n */\n\tpublic $uses = ['ThemeFile', 'ThemeFolder'];\n\n/**\n * \u30d8\u30eb\u30d1\u30fc\n *\n * @var array\n */\n\tpublic $helpers = ['BcForm', 'BcCkeditor'];\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\n *\n * @var array\n * @public protected\n */\n\tprotected $_tempalteTypes = [];\n\n/**\n * \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n *\n * @var array\n */\n\tpublic $components = ['BcAuth', 'Cookie', 'BcAuthConfigure'];\n\n/**\n * ThemeFilesController constructor.\n *\n * @param CakeRequest $request\n * @param CakeResponse $response\n */\n\tpublic function __construct(CakeRequest $request, CakeResponse $response) {\n\t\tparent::__construct($request, $response);\n\t\t$this->_tempalteTypes = [\n\t\t\t'Layouts'\t=> __d('baser', '\u30ec\u30a4\u30a2\u30a6\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'Elements'\t=> __d('baser', '\u30a8\u30ec\u30e1\u30f3\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'Emails'\t=> __d('baser', 'E\u30e1\u30fc\u30eb\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'etc'\t\t=> __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'css'\t\t=> __d('baser', '\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8'),\n\t\t\t'js'\t\t=> 'Javascript',\n\t\t\t'img'\t\t=> __d('baser', '\u30a4\u30e1\u30fc\u30b8')\n\t\t];\n\t\t$this->crumbs = [\n\t\t\t['name' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'), 'url' => ['admin' => true, 'controller' => 'themes', 'action' => 'index']]\n\t\t];\n\t}\n\n\t/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\n *\n * @return void\n */\n\tpublic function admin_index() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\n\t\tif (!$theme) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t// \u30bf\u30a4\u30c8\u30eb\u8a2d\u5b9a\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = $pageTitle;\n\t\tif (!empty($this->_tempalteTypes[$type])) {\n\t\t\t$this->pageTitle .= sprintf(__d('baser', '\uff5c%s\u4e00\u89a7'), $this->_tempalteTypes[$type]);\n\t\t}\n\n\t\tif ($type != 'etc') {\n\n\t\t\t/* \u30ec\u30a4\u30a2\u30a6\u30c8\uff0f\u30a8\u30ec\u30e1\u30f3\u30c8 */\n\t\t\t$folder = new Folder($fullpath);\n\t\t\t$files = $folder->read(true, true);\n\t\t\t$themeFiles = [];\n\t\t\t$folders = [];\n\t\t\t$excludeList = ['_notes'];\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif (!in_array($file, $excludeList)) {\n\t\t\t\t\tif ($file == 'admin' && is_link($fullpath . $file)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t$folder = [];\n\t\t\t\t\t$folder['name'] = $file;\n\t\t\t\t\t$folder['type'] = 'folder';\n\t\t\t\t\t$folders[] = $folder;\n\t\t\t\t}\n\t\t\t}\n\t\t\tforeach ($files[1] as $file) {\n\t\t\t\t$themeFile = [];\n\t\t\t\t$themeFile['name'] = $file;\n\t\t\t\t$themeFile['type'] = $this->_getFileType($file);\n\t\t\t\t$themeFiles[] = $themeFile;\n\t\t\t}\n\t\t\t$themeFiles = am($folders, $themeFiles);\n\t\t} else {\n\n\t\t\t/* \u305d\u306e\u4ed6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 */\n\t\t\t$folder = new Folder($fullpath);\n\t\t\t$files = $folder->read(true, true);\n\t\t\t$themeFiles = [];\n\t\t\t$folders = [];\n\t\t\t$excludeFolderList = [];\n\t\t\t$excludeFileList = ['screenshot.png', 'VERSION.txt', 'config.php', 'AppView.php', 'BcAppView.php'];\n\t\t\tif (!$path) {\n\t\t\t\t$excludeFolderList = [\n\t\t\t\t\t'Layouts', \n\t\t\t\t\t'Elements', \n\t\t\t\t\t'Emails',\n\t\t\t\t\t'Helper', \n\t\t\t\t\t'Config',\n\t\t\t\t\t'Plugin',\t\t\t\t\t\n\t\t\t\t\t'img', \n\t\t\t\t\t'css',\n\t\t\t\t\t'js',\n\t\t\t\t\t'_notes'\n\t\t\t\t];\n\t\t\t}\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif (!in_array($file, $excludeFolderList)) {\n\t\t\t\t\t$folder = [];\n\t\t\t\t\t$folder['name'] = $file;\n\t\t\t\t\t$folder['type'] = 'folder';\n\t\t\t\t\t$folders[] = $folder;\n\t\t\t\t}\n\t\t\t}\n\t\t\tforeach ($files[1] as $file) {\n\t\t\t\tif (in_array($file, $excludeFileList)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t$themeFile = [];\n\t\t\t\t$themeFile['name'] = $file;\n\t\t\t\t$themeFile['type'] = $this->_getFileType($file);\n\t\t\t\t$themeFiles[] = $themeFile;\n\t\t\t}\n\t\t\t$themeFiles = am($folders, $themeFiles);\n\t\t}\n\n\t\t$currentPath = str_replace(ROOT, '', $fullpath);\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('themeFiles', $themeFiles);\n\t\t$this->set('currentPath', $currentPath);\n\t\t$this->set('fullpath', $fullpath);\n\t\t$this->set('path', $path);\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->help = 'theme_files_index';\n\t\tif($this->request->is('ajax')) {\n\t\t\t$this->render('ajax_index');\n\t\t}\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\u3092\u53d6\u5f97\u3059\u308b\n * \n * @param string $file\n * @return mixed false / type \n */\n\tprotected function _getFileType($file) {\n\t\tif (preg_match('/^(.+?)(\\.ctp|\\.php|\\.css|\\.js)$/is', $file)) {\n\t\t\treturn 'text';\n\t\t} elseif (preg_match('/^(.+?)(\\.png|\\.gif|\\.jpg|\\.jpeg)$/is', $file)) {\n\t\t\treturn 'image';\n\t\t} else {\n\t\t\treturn 'file';\n\t\t}\n\t\treturn false;\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n *\n * @return void\n */\n\tpublic function admin_add() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\n\t\t\tif ($type == 'css' || $type == 'js') {\n\t\t\t\t$ext = $type;\n\t\t\t} else {\n\t\t\t\t$ext = 'php';\n\t\t\t}\n\t\t\t$this->request->data['ThemeFile']['ext'] = $ext;\n\t\t\t$this->request->data['ThemeFile']['parent'] = $fullpath;\n\t\t} else {\n\n\t\t\t$this->ThemeFile->create($this->request->data);\n\t\t\tif ($this->ThemeFile->validates()) {\n\t\t\t\t$fullpath = $fullpath . $this->request->data['ThemeFile']['name'] . '.' . $this->request->data['ThemeFile']['ext'];\n\t\t\t\tif (!is_dir(dirname($fullpath))) {\n\t\t\t\t\t$folder = new Folder();\n\t\t\t\t\t$folder->create(dirname($fullpath), 0777);\n\t\t\t\t}\n\t\t\t\t$file = new File($fullpath);\n\t\t\t\tif ($file->open('w')) {\n\t\t\t\t\t$file->append($this->request->data['ThemeFile']['contents']);\n\t\t\t\t\t$file->close();\n\t\t\t\t\tunset($file);\n\t\t\t\t\t$result = true;\n\t\t\t\t} else {\n\t\t\t\t\t$result = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$result = false;\n\t\t\t}\n\n\t\t\tif ($result) {\n\t\t\t\tclearViewCache();\n\t\t\t\t$this->BcMessage->setInfo(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002'), basename($fullpath)));\n\t\t\t\t$this->redirect(array_merge(['action' => 'edit', $theme, $type], explode('/', $path), [$this->request->data['ThemeFile']['name'] . '.' . $this->request->data['ThemeFile']['ext']]));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), basename($fullpath)));\n\t\t\t}\n\t\t}\n\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u4f5c\u6210'), Inflector::camelize($theme), $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('currentPath', str_replace(ROOT, '', $fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form';\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n *\n * @return void\n */\n\tpublic function admin_edit() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$filename = urldecode(basename($path));\n\n\t\tif (!$this->request->data) {\n\n\t\t\t$file = new File($fullpath);\n\t\t\t$pathinfo = pathinfo($fullpath);\n\t\t\t$this->request->data['ThemeFile']['name'] = urldecode(basename($file->name, '.' . $pathinfo['extension']));\n\t\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType(urldecode(basename($file->name)));\n\t\t\t$this->request->data['ThemeFile']['ext'] = $pathinfo['extension'];\n\t\t\t$this->request->data['ThemeFile']['parent'] = dirname($fullpath) . DS;\n\t\t\tif ($this->request->data['ThemeFile']['type'] == 'text') {\n\t\t\t\t$this->request->data['ThemeFile']['contents'] = $file->read();\n\t\t\t}\n\t\t} else {\n\n\t\t\t$this->ThemeFile->set($this->request->data);\n\t\t\tif ($this->ThemeFile->validates()) {\n\n\t\t\t\t$oldPath = urldecode($fullpath);\n\t\t\t\t$newPath = dirname($fullpath) . DS . urldecode($this->request->data['ThemeFile']['name']);\n\t\t\t\tif ($this->request->data['ThemeFile']['ext']) {\n\t\t\t\t\t$newPath .= '.' . $this->request->data['ThemeFile']['ext'];\n\t\t\t\t}\n\t\t\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType(basename($newPath));\n\t\t\t\tif ($this->request->data['ThemeFile']['type'] == 'text') {\n\t\t\t\t\t$file = new File($oldPath);\n\t\t\t\t\tif ($file->open('w')) {\n\t\t\t\t\t\t$file->append($this->request->data['ThemeFile']['contents']);\n\t\t\t\t\t\t$file->close();\n\t\t\t\t\t\tunset($file);\n\t\t\t\t\t\t$result = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$result = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$result = true;\n\t\t\t\t}\n\t\t\t\tif ($oldPath != $newPath) {\n\t\t\t\t\trename($oldPath, $newPath);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$result = false;\n\t\t\t}\n\n\t\t\tif ($result) {\n\t\t\t\tclearViewCache();\n\t\t\t\t$this->BcMessage->setInfo(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002'), $filename));\n\t\t\t\t$this->redirect(array_merge([$theme, $plugin, $type], explode('/', dirname($path)), [basename($newPath)]));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), $filename));\n\t\t\t}\n\t\t}\n\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u7de8\u96c6'), Inflector::camelize($theme), $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . DS);\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form';\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_del() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (is_dir($fullpath)) {\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->delete($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t} else {\n\t\t\t$result = @unlink($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t}\n\n\t\tif ($result) {\n\t\t\t$this->BcMessage->setInfo($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t} else {\n\t\t\t$this->BcMessage->setError($target . ' ' . sprintf(__d('baser', '%s \u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t}\n\n\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u3000\uff08ajax\uff09\n *\n * @return void\n */\n\tpublic function admin_ajax_del() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\n\t\tif (!$args) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\tif ($this->_del($args)) {\n\t\t\texit(true);\n\t\t} else {\n\t\t\texit();\n\t\t}\n\t}\n\n/**\n * \u524a\u9664\n *\n * @return void\n */\n\tprotected function _del($args) {\n\t\textract($args);\n\t\tif (is_dir($fullpath)) {\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->delete($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t} else {\n\t\t\t$result = @unlink($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t}\n\t\tif ($result) {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n/**\n * \u4e00\u62ec\u524a\u9664\n *\n * @return void\n */\n\tprotected function _batch_del($ids) {\n\t\tif ($ids) {\n\n\t\t\t$result = true;\n\t\t\tforeach ($ids as $id) {\n\t\t\t\t$args = $this->request->params['pass'];\n\t\t\t\t$args[] = $id;\n\t\t\t\t$args = $this->_parseArgs($args);\n\t\t\t\textract($args);\n\t\t\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t\t\texit();\n\t\t\t\t}\n\n\t\t\t\tif (is_dir($fullpath)) {\n\t\t\t\t\t$folder = new Folder();\n\t\t\t\t\t$result = $folder->delete($fullpath);\n\t\t\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t\t\t} else {\n\t\t\t\t\t$result = @unlink($fullpath);\n\t\t\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t\t\t}\n\t\t\t\tif ($result) {\n\t\t\t\t\t$this->ThemeFile->saveDblog($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t\t\t} else {\n\t\t\t\t\t$result = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8868\u793a\n *\n * @return\tvoid\n * @access\tpublic\n */\n\tpublic function admin_view() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$pathinfo = pathinfo($fullpath);\n\t\t$file = new File($fullpath);\n\t\t$this->request->data['ThemeFile']['name'] = basename($file->name, '.' . $pathinfo['extension']);\n\t\t$this->request->data['ThemeFile']['ext'] = $pathinfo['extension'];\n\t\t$this->request->data['ThemeFile']['contents'] = $file->read();\n\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType($file->name);\n\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u8868\u793a'), $pageTitle, $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_ajax_copy() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\n\t\tif (!$args) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\t$themeFile = [];\n\t\tif (is_dir($fullpath)) {\n\t\t\t$newPath = preg_replace('/\\/$/is', '', $fullpath) . '_copy';\n\t\t\twhile (true) {\n\t\t\t\tif (!is_dir($newPath)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t$newPath .= '_copy';\n\t\t\t}\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->copy(['from' => $fullpath, 'to' => $newPath, 'chmod' => 0777, 'skip' => ['_notes']]);\n\t\t\t$folder = null;\n\t\t\t$target = '\u30d5\u30a9\u30eb\u30c0';\n\t\t\t$themeFile['name'] = basename(urldecode($newPath));\n\t\t\t$themeFile['type'] = 'folder';\n\t\t} else {\n\t\t\t$pathinfo = pathinfo($fullpath);\n\t\t\t$newPath = $pathinfo['dirname'] . DS . urldecode(basename($fullpath, '.' . $pathinfo['extension'])) . '_copy';\n\t\t\twhile (true) {\n\t\t\t\tif (!file_exists($newPath . '.' . $pathinfo['extension'])) {\n\t\t\t\t\t$newPath .= '.' . $pathinfo['extension'];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t$newPath .= '_copy';\n\t\t\t}\n\t\t\t$result = @copy(urldecode($fullpath), $newPath);\n\t\t\tif ($result) {\n\t\t\t\tchmod($newPath, 0666);\n\t\t\t}\n\t\t\t$target = '\u30d5\u30a1\u30a4\u30eb';\n\t\t\t$themeFile['name'] = basename(urldecode($newPath));\n\t\t\t$themeFile['type'] = $this->_getFileType($themeFile['name']);\n\t\t}\n\n\t\tif ($result) {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . urldecode($path) . ' \u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002');\n\t\t\t$this->set('fullpath', $fullpath);\n\t\t\t$this->set('path', dirname($path));\n\t\t\t$this->set('theme', $theme);\n\t\t\t$this->set('plugin', $plugin);\n\t\t\t$this->set('type', $type);\n\t\t\t$this->set('data', $themeFile);\n\t\t} else {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . urldecode($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t\t$this->ajaxError(500, __d('baser', '\u4e0a\u4f4d\u30d5\u30a9\u30eb\u30c0\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'));\n\t\t}\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_upload() {\n\t\t$messages = [];\n\t\tif (!$this->request->data) {\n\t\t\tif ($this->ThemeFile->isOverPostSize()) {\n\t\t\t\t$messages[] = __d('baser', '\u9001\u4fe1\u3067\u304d\u308b\u30c7\u30fc\u30bf\u91cf\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u5408\u8a08\u3067 %s \u4ee5\u5185\u306e\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3057\u3066\u304f\u3060\u3055\u3044\u3002', ini_get('post_max_size'));\n\t\t\t} else {\n\t\t\t\t$this->notFound();\n\t\t\t}\n\t\t}\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\t\t$filePath = $fullpath . DS . $this->request->data['ThemeFile']['file']['name'];\n\t\t$Folder = new Folder();\n\t\t$Folder->create(dirname($filePath), 0777);\n\n\t\tif (@move_uploaded_file($this->request->data['ThemeFile']['file']['tmp_name'], $filePath)) {\n\t\t\t$messages = [__d('baser', '\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002')];\n\t\t} else {\n\t\t\t$messages[] = __d('baser', '\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->BcMessage->setError(implode(\"\\n\", $messages));\n\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', $path)));\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u8ffd\u52a0\n *\n * @return void\n */\n\tpublic function admin_add_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\t\t\t$this->request->data['ThemeFolder']['parent'] = $fullpath;\n\t\t} else {\n\t\t\t$folder = new Folder();\n\t\t\t$this->ThemeFolder->create($this->request->data);\n\t\t\tif ($this->ThemeFolder->validates() && $folder->create($fullpath . $this->request->data['ThemeFolder']['name'], 0777)) {\n\t\t\t\t$this->BcMessage->setInfo('\u30d5\u30a9\u30eb\u30c0 ' . $this->request->data['ThemeFolder']['name'] . ' \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002');\n\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', $path)));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t}\n\t\t}\n\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u4f5c\u6210'), $theme);\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', $fullpath));\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form_folder';\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u7de8\u96c6\n *\n * @return void\n */\n\tpublic function admin_edit_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\t\t\t$this->request->data['ThemeFolder']['name'] = basename($path);\n\t\t\t$this->request->data['ThemeFolder']['parent'] = dirname($fullpath) . DS;\n\t\t\t$this->request->data['ThemeFolder']['pastname'] = basename($path);\n\t\t} else {\n\t\t\t$newPath = dirname($fullpath) . DS . $this->request->data['ThemeFolder']['name'] . DS;\n\t\t\t$folder = new Folder();\n\t\t\t$this->ThemeFolder->set($this->request->data);\n\t\t\tif ($this->ThemeFolder->validates()) {\n\t\t\t\tif ($fullpath != $newPath) {\n\t\t\t\t\tif ($folder->move(['from' => $fullpath, 'to' => $newPath, 'chmod' => 0777, 'skip' => ['_notes']])) {\n\t\t\t\t\t\t$this->BcMessage->setInfo('\u30d5\u30a9\u30eb\u30c0\u540d\u3092 ' . $this->request->data['ThemeFolder']['name'] . ' \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002');\n\t\t\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306b\u5909\u66f4\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002'));\n\t\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t}\n\t\t}\n\n\t\t$pageTitle = $theme;\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u8868\u793a'), $pageTitle);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form_folder';\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u8868\u793a\n *\n * @return void\n */\n\tpublic function admin_view_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$this->request->data['ThemeFolder']['name'] = basename($path);\n\t\t$this->request->data['ThemeFolder']['parent'] = dirname($fullpath);\n\t\t$this->request->data['ThemeFolder']['pastname'] = basename($path);\n\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u8868\u793a'), $pageTitle);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u5f15\u304d\u6570\u3092\u89e3\u6790\u3059\u308b\n *\n * @param array $args\n * @return array\n */\n\tprotected function _parseArgs($args) {\n\t\t$data = ['plugin' => '', 'theme' => '', 'type' => '', 'path' => '', 'fullpath' => '', 'assets' => false];\n\t\t$assets = ['css', 'js', 'img'];\n\n\t\tif (!empty($args[1]) && !isset($this->_tempalteTypes[$args[1]])) {\n\t\t\t$folder = new Folder(BASER_PLUGINS);\n\t\t\t$files = $folder->read(true, true);\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif ($args[1] == $file) {\n\t\t\t\t\t$data['plugin'] = $args[1];\n\t\t\t\t\tunset($args[1]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($data['plugin']) {\n\n\t\t\tif (!empty($args[0])) {\n\t\t\t\t$data['theme'] = $args[0];\n\t\t\t\tunset($args[0]);\n\t\t\t}\n\t\t\tif (!empty($args[2])) {\n\t\t\t\t$data['type'] = $args[2];\n\t\t\t\tunset($args[2]);\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (!empty($args[0])) {\n\t\t\t\t$data['theme'] = $args[0];\n\t\t\t\tunset($args[0]);\n\t\t\t}\n\t\t\tif (!empty($args[1])) {\n\t\t\t\t$data['type'] = $args[1];\n\t\t\t\tunset($args[1]);\n\t\t\t}\n\t\t}\n\n\t\tif (empty($data['type'])) {\n\t\t\t$data['type'] = 'Layouts';\n\t\t}\n\n\t\tif (!empty($args)) {\n\t\t\t$data['path'] = implode(DS, $args);\n\t\t\t$data['path'] = urldecode($data['path']);\n\t\t}\n\n\t\tif ($data['plugin']) {\n\t\t\tif (in_array($data['type'], $assets)) {\n\t\t\t\t$data['assets'] = true;\n\t\t\t\t$viewPath = BASER_PLUGINS . $data['plugin'] . DS . 'webroot' . DS;\n\t\t\t} else {\n\t\t\t\t$viewPath = BASER_PLUGINS . $data['plugin'] . DS . 'View' . DS;\n\t\t\t}\n\t\t} elseif ($data['theme'] == 'core') {\n\t\t\tif (in_array($data['type'], $assets)) {\n\t\t\t\t$data['assets'] = true;\n\t\t\t\t$viewPath = BASER_WEBROOT;\n\t\t\t} else {\n\t\t\t\t$viewPath = BASER_VIEWS;\n\t\t\t}\n\t\t} else {\n\t\t\t$viewPath = WWW_ROOT . 'theme' . DS . $data['theme'] . DS;\n\t\t}\n\n\t\tif ($data['type'] != 'etc') {\n\t\t\t$data['fullpath'] = $viewPath . $data['type'] . DS . $data['path'];\n\t\t} else {\n\t\t\t$data['fullpath'] = $viewPath . $data['path'];\n\t\t}\n\n\t\tif ($data['path'] && is_dir($data['fullpath']) && !preg_match('/\\/$/', $data['fullpath'])) {\n\t\t\t$data['fullpath'] .= DS;\n\t\t}\n\n\t\treturn $data;\n\t}\n\n/**\n * \u30b3\u30a2\u30d5\u30a1\u30a4\u30eb\u3092\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_copy_to_theme() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif ($type != 'etc') {\n\t\t\tif ($plugin && $assets) {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $plugin . DS . $type . DS . $path;\n\t\t\t} else {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $type . DS . $path;\n\t\t\t}\n\t\t} else {\n\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $path;\n\t\t}\n\t\t$folder = new Folder();\n\t\t$folder->create(dirname($themePath), 0777);\n\t\tif (copy($fullpath, $themePath)) {\n\t\t\tchmod($themePath, 0666);\n\t\t\t$_themePath = str_replace(ROOT, '', $themePath);\n\t\t\t$this->setMessage('\u30b3\u30a2\u30d5\u30a1\u30a4\u30eb ' . basename($path) . ' \u3092 \u30c6\u30fc\u30de ' . Inflector::camelize($this->siteConfigs['theme']) . \" \u306e\u6b21\u306e\u30d1\u30b9\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002\\n\" . $_themePath);\n\t\t\t// \u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3001\u6df7\u4e71\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308b\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u305d\u306e\u307e\u307e\n\t\t\t//$this->redirect(array_merge(array('action' => 'edit', $this->siteConfigs['theme'], $type), explode('/', $path)));\n\t\t} else {\n\t\t\t$this->BcMessage->setError('\u30b3\u30a2\u30d5\u30a1\u30a4\u30eb ' . basename($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->redirect(array_merge(['action' => 'view', $theme, $plugin, $type], explode('/', $path)));\n\t}\n\n/**\n * \u30b3\u30a2\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_copy_folder_to_theme() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif ($type != 'etc') {\n\t\t\tif ($plugin && $assets) {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $plugin . DS . $type . DS;\n\t\t\t} else {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $type . DS;\n\t\t\t}\n\t\t\tif ($path) {\n\t\t\t\t$themePath .= $path . DS;\n\t\t\t}\n\t\t} else {\n\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $path . DS;\n\t\t}\n\t\t$folder = new Folder();\n\t\t$folder->create(dirname($themePath), 0777);\n\t\tif ($folder->copy(['from' => $fullpath, 'to' => $themePath, 'chmod' => 0777, 'skip' => ['_notes']])) {\n\t\t\t$_themePath = str_replace(ROOT, '', $themePath);\n\t\t\t$this->BcMessage->setInfo('\u30b3\u30a2\u30d5\u30a9\u30eb\u30c0 ' . basename($path) . ' \u3092 \u30c6\u30fc\u30de ' . Inflector::camelize($this->siteConfigs['theme']) . \" \u306e\u6b21\u306e\u30d1\u30b9\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002\\n\" . $_themePath);\n\t\t\t// \u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3001\u6df7\u4e71\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308b\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u305d\u306e\u307e\u307e\n\t\t\t//$this->redirect(array('action' => 'edit', $this->siteConfigs['theme'], $type, $path));\n\t\t} else {\n\t\t\t$this->BcMessage->setError('\u30b3\u30a2\u30d5\u30a9\u30eb\u30c0 ' . basename($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->redirect(array_merge(['action' => 'view_folder', $theme, $plugin, $type], explode('/', $path)));\n\t}\n\n/**\n * \u753b\u50cf\u3092\u8868\u793a\u3059\u308b\n * \u30b3\u30a2\u306e\u753b\u50cf\u7b49\u3082\u8868\u793a\u53ef\n * \n * @param array \u30d1\u30b9\u60c5\u5831\n * @return void\n */\n\tpublic function admin_img() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\t$contents = ['jpg' => 'jpeg', 'gif' => 'gif', 'png' => 'png'];\n\t\textract($args);\n\t\t$pathinfo = pathinfo($fullpath);\n\n\t\tif (!isset($this->_tempalteTypes[$type]) || !isset($contents[$pathinfo['extension']]) || !file_exists($fullpath)) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$file = new File($fullpath);\n\t\tif ($file->open('r')) {\n\t\t\theader(\"Content-Length: \" . $file->size());\n\t\t\theader(\"Content-type: image/\" . $contents[$pathinfo['extension']]);\n\t\t\techo $file->read();\n\t\t\texit();\n\t\t} else {\n\t\t\t$this->notFound();\n\t\t}\n\t}\n\n/**\n * \u753b\u50cf\u3092\u8868\u793a\u3059\u308b\n * \u30b3\u30a2\u306e\u753b\u50cf\u7b49\u3082\u8868\u793a\u53ef\n * \n * @param int $width\n * @param int $height\n * @param array \u30d1\u30b9\u60c5\u5831\n * @return void\n */\n\tpublic function admin_img_thumb() {\n\t\t$args = func_get_args();\n\t\t$width = $args[0];\n\t\t$height = $args[1];\n\t\tunset($args[0]);\n\t\tunset($args[1]);\n\t\t$args = array_values($args);\n\n\t\tif ($width == 0) {\n\t\t\t$width = 100;\n\t\t}\n\t\tif ($height == 0) {\n\t\t\t$height = 100;\n\t\t}\n\n\t\t$args = $this->_parseArgs($args);\n\t\t$contents = ['jpeg' => 'jpeg', 'jpg' => 'jpeg', 'gif' => 'gif', 'png' => 'png'];\n\t\textract($args);\n\t\t$pathinfo = pathinfo($fullpath);\n\n\t\tif (!isset($this->_tempalteTypes[$type]) || !isset($contents[$pathinfo['extension']]) || !file_exists($fullpath)) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\theader(\"Content-type: image/\" . $contents[$pathinfo['extension']]);\n\t\t$Imageresizer = new Imageresizer();\n\t\t$Imageresizer->resize($fullpath, null, $width, $height);\n\t\texit();\n\t}\n\n}\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u30c6\u30fc\u30d6\u30eb\n */\n?>\n\n\n<script type=\"text/javascript\">\n$(function(){\n\t$(\".theme-popup\").colorbox({inline:true, width:\"60%\"});\n});\n</script>\n\n\n<div id=\"CurrentTheme\" class=\"clearfix\">\n\t<h2><?php echo __d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de')?></h2>\n\t<?php if ($currentTheme): ?>\n\t\t<div class=\"current-theme-left\">\n\t\t\t<div class=\"theme-screenshot\">\n\t\t\t\t<?php if ($currentTheme['screenshot']): ?>\n\t\t\t\t\t<?php $this->BcBaser->img('/theme/' . $currentTheme['name'] . '/screenshot.png', ['alt' => $currentTheme['title']]) ?>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $currentTheme['title']]) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</div>\n\t\t\t<p class=\"row-tools\">\n\t\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_manage.png', ['alt' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'btn']), ['controller' => 'theme_files', 'action' => 'index', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6')]) ?>\n\t\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_copy.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn']), ['action' => 'ajax_copy', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy']) ?>\n\t\t\t</p>\n\t\t</div>\n\n\t\t<div class=\"theme-info\">\n\t\t\t<p class=\"theme-name\"><strong><?php echo h($currentTheme['title']) ?></strong>&nbsp;(&nbsp;<?php echo $currentTheme['name'] ?>&nbsp;)</p>\n\t\t\t<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $currentTheme['version'] ?></p>\n\t\t\t<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a<?php if (!empty($currentTheme['url']) && !empty($currentTheme['author'])): ?>\n\t\t\t\t\t<?php $this->BcBaser->link($currentTheme['author'], $currentTheme['url'], ['target' => '_blank', 'escape' => true]) ?>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo h($currentTheme['author']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</p>\n\t\t</div>\n\t\t<br /><br />\n\t\t<?php if ($defaultDataPatterns && $this->BcBaser->isAdminUser()): ?>\n\t\t\t<?php echo $this->BcForm->create('Theme', ['url' => ['action' => 'load_default_data_pattern']]) ?>\n\t\t\t<?php echo $this->BcForm->input('Theme.default_data_pattern', ['type' => 'select', 'options' => $defaultDataPatterns]) ?>\n\t\t\t<?php echo $this->BcForm->submit(__d('baser', '\u521d\u671f\u30c7\u30fc\u30bf\u8aad\u8fbc'), ['class' => 'button-small', 'div' => false, 'id' => 'BtnLoadDefaultDataPattern']) ?>\n\t\t\t<?php echo $this->BcForm->end() ?>\n\t\t<?php endif ?>\n\t\t<br /><br /><br /><br />\n\t\t<div class=\"theme-description clearfix\"><?php echo nl2br($this->BcText->autoLinkUrls($currentTheme['description'])) ?></div>\n\t<?php else: ?>\n\t\t<p><?php echo __d('baser', '\u73fe\u5728\u3001\u30c6\u30fc\u30de\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002')?></p>\n\t<?php endif ?>\n</div>\n\n<ul class=\"list-panel clearfix\">\n\t<?php if (!empty($datas)): ?>\n\t\t<?php foreach ($datas as $data): ?>\n\t\t\t<?php $this->BcBaser->element('themes/index_row', ['data' => $data]) ?>\n\t\t<?php endforeach; ?>\n\t<?php else: ?>\n\t\t<?php if(strtotime('2014-03-31 17:00:00') >= time()): ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002')?><br /><a href=\"http://basercms.net/themes/index\" target=\"_blank\"><?php echo __d('baser', 'baserCMS\u306e\u516c\u5f0f\u30b5\u30a4\u30c8</a>\u3067\u306f\u7121\u511f\u306e\u30c6\u30fc\u30de\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002')?></li>\n\t\t<?php else: ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002')?><br /><a href=\"https://market.basercms.net/\" target=\"_blank\"><?php echo __d('baser', 'baser\u30de\u30fc\u30b1\u30c3\u30c8</a>\u3067\u30c6\u30fc\u30de\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u3087\u3046\u3002')?></li>\n\t\t<?php endif ?>\n\t<?php endif; ?>\n</ul>", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u884c\n */\n?>\n\n\n<li>\n\t<p class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</p>\n\t<p class=\"theme-screenshot\">\n\t\t<a class=\"theme-popup\" href=\"<?php echo '#Contents' . Inflector::camelize($data['name']) ?>\">\n\t\t\t<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php endif ?>\n\t\t</a>\n\t</p>\n\t<p class=\"row-tools\">\n\t\t<?php if ($data['name'] != $this->BcBaser->siteConfig['theme']): ?>\n\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_apply.png', ['alt' => __d('baser', '\u9069\u7528'), 'class' => 'btn']), ['action' => 'apply', $data['name']], ['title' => __d('baser', '\u9069\u7528'), 'class' => 'submit-token']) ?>\n\t\t<?php endif ?>\n\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_manage.png', ['alt' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'btn']), ['controller' => 'theme_files', 'action' => 'index', $data['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6')]) ?>\n\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_copy.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn']), ['action' => 'ajax_copy', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy']) ?>\n\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_delete.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn']), ['action' => 'ajax_delete', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn-delete']) ?>\n</p>\n<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></p>\n<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n\t<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n\t<?php else: ?>\n\t\t<?php echo h($data['author']) ?>\n\t<?php endif ?>\n</p>\n<div style='display:none'>\n\t<div id=\"<?php echo 'Contents' . Inflector::camelize($data['name']) ?>\" class=\"theme-popup-contents clearfix\">\n\t\t<div class=\"theme-screenshot\">\n\t\t\t<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php endif ?>\n\t\t</div>\n\t\t<div class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</div>\n\t\t<div class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></div>\n\t\t<div class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n\t\t\t<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank']) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php echo h($data['author']) ?>\n\t\t\t<?php endif ?>\n\t\t</div>\n\t\t<div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($data['description'])) ?></div>\n\t</div>\n</div>\n</li>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u767b\u9332\u30fb\u7de8\u96c6\n *\n * @var BcAppView $this\n */\n$this->BcBaser->js('admin/themes/form');\n$params = explode('/', $path);\n$parentPrams = explode('/', $path);\nif ($this->request->action !== 'admin_add') {\n\tunset($parentPrams[count($parentPrams)-1]);\n}\n?>\n\n\n<div class=\"em-box align-left\">\n<?php echo __d('baser', '\u73fe\u5728\u306e\u4f4d\u7f6e')?>\uff1a<?php echo h($currentPath) ?>\n</div>\n\n<?php if($theme\t!= 'core' && !$isWritable): ?>\n<div id=\"AlertMessage\"><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u306a\u3044\u306e\u3067\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093\u3002')?></div>\n<?php endif ?>\n\n<?php if ($this->request->action == 'admin_add'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'add'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'edit'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php endif ?>\n\n<?php echo $this->BcFormTable->dispatchBefore() ?>\n\n<?php echo $this->BcForm->input('ThemeFile.parent', ['type' => 'hidden']) ?>\n\n<!-- form -->\n<div class=\"section\">\n\t<table cellpadding=\"0\" cellspacing=\"0\" id=\"FormTable\" class=\"form-table\">\n\t\t<tr>\n\t\t\t<th class=\"col-head\"><?php echo $this->BcForm->label('ThemeFile.name', __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d')) ?>&nbsp;<span class=\"required\">*</span></th>\n\t\t\t<td class=\"col-input\">\n\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'maxlength' => 255, 'autofocus' => true]) ?>\n\t\t\t\t\t<?php if ($this->BcForm->value('ThemeFile.ext')): ?>.<?php endif ?>\n\t\t\t\t\t<?php echo h($this->BcForm->value('ThemeFile.ext')) ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t\t<?php echo $this->Html->image('admin/icn_help.png', ['id' => 'helpName', 'class' => 'btn help', 'alt' => __d('baser', '\u30d8\u30eb\u30d7')]) ?>\n\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.name') ?>\n\t\t\t\t\t<div id=\"helptextName\" class=\"helptext\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u534a\u89d2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002')?></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'readonly' => 'readonly']) ?> .<?php echo $this->BcForm->value('ThemeFile.ext') ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<?php if ($this->request->action == 'admin_add' || (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && in_array($this->request->data['ThemeFile']['type'], ['text', 'image']))): ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"col-head\"><?php echo $this->BcForm->label('ThemeFile.contents', __d('baser', '\u5185\u5bb9')) ?></th>\n\t\t\t\t<td class=\"col-input\">\n\t\t\t\t\t<?php if (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && $this->request->data['ThemeFile']['type'] == 'image'): ?>\n\t\t\t\t\t\t<div class=\"align-center\" style=\"margin:20px auto\">\n\t\t\t\t\t\t\t<?php $this->BcBaser->link(\n\t\t\t\t\t\t\t\t$this->BcBaser->getImg(array_merge(['action' => 'img_thumb', 550, 550, $theme, $plugin, $type], explode('/', $path)), ['alt' => basename($path)]), array_merge(['action' => 'img', $theme, $plugin, $type], explode('/', $path)), ['rel' => 'colorbox', 'title' => basename($path)]\n\t\t\t\t\t\t\t); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php elseif ($this->request->action == 'admin_add' || $this->request->data['ThemeFile']['type'] == 'text'): ?>\n\t\t\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30]) ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.contents') ?>\n\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30, 'readonly' => 'readonly']) ?>\n\t\t\t\t\t\t<?php endif ?>\n\t\t\t\t\t<?php endif ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<?php endif ?>\n\t\t<?php echo $this->BcForm->dispatchAfterForm() ?>\n\t</table>\n</div>\n\n<?php echo $this->BcFormTable->dispatchAfter() ?>\n\n<div class=\"submit\">\n\t<?php if ($this->request->action == 'admin_add'): ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php echo $this->BcForm->submit(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button', 'id' => 'BtnSave']) ?>\n\t<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php if($isWritable): ?>\n\t\t\t<?php echo $this->BcForm->submit(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button', 'id' => 'BtnSave']) ?>\n\t\t\t<?php $this->BcBaser->link(__d('baser', '\u524a\u9664'), array_merge(['action' => 'del', $theme, $plugin, $type], $params), ['class' => 'submit-token button'], sprintf(__d('baser', '%s \u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f'), basename($path)), false) ?>\n\t\t<?php endif ?>\t\n\t<?php else: ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php // \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a2\u30bb\u30c3\u30c8\u306e\u5834\u5408\u306f\u30b3\u30d4\u30fc\u3067\u304d\u306a\u3044 ?>\n\t\t<?php if (!$safeModeOn): ?>\n\t\t\t<?php //if($theme == 'core' && !(($type == 'css' || $type == 'js' || $type == 'img') && $plugin)): ?>\n\t\t\t<?php if ($theme == 'core'): ?>\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc'), array_merge(['action' => 'copy_to_theme', $theme, $plugin, $type], explode('/', $path)), ['class' => 'submit-token btn-red button'], sprintf(__d('baser', \"\u672c\u5f53\u306b\u73fe\u5728\u306e\u30c6\u30fc\u30de\u300c %s \u300d\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f\\n\u65e2\u306b\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\"), Inflector::camelize($siteConfig['theme']))); ?>\n\t\t\t<?php endif; ?>\n\t\t<?php else: ?>\n            <?php echo __d('baser', '\u6a5f\u80fd\u5236\u9650\u306e\u30bb\u30fc\u30d5\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u73fe\u5728\u306e\u30c6\u30fc\u30de\u3078\u306e\u30b3\u30d4\u30fc\u306f\u3067\u304d\u307e\u305b\u3093\u3002')?>\n\t\t<?php endif; ?>\n\t<?php endif; ?>\n</div>\n\n<?php echo $this->BcForm->end() ?>\n"], "fixing_code": ["<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u30c6\u30fc\u30d6\u30eb\n */\n?>\n\n\n<script type=\"text/javascript\">\n$(function(){\n\t$(\".theme-popup\").colorbox({inline:true, width:\"60%\"});\n});\n</script>\n\n<div id=\"CurrentTheme\" class=\"bca-current-theme\">\n\t<h2 class=\"bca-current-theme__name\"><?php echo __d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de') ?></h2>\n\t<?php if ($currentTheme): ?>\n    <div class=\"bca-current-theme__inner\">\n      <div class=\"bca-current-theme__main\">\n        <div class=\"bca-current-theme__screenshot\">\n          <?php if ($currentTheme['screenshot']): ?>\n            <?php $this->BcBaser->img('/theme/' . $currentTheme['name'] . '/screenshot.png', ['alt' => $currentTheme['title']]) ?>\n          <?php else: ?>\n            <?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $currentTheme['title']]) ?>\n          <?php endif ?>\n        </div>\n        <div class=\"row-tools\">\n\t\t\t<?php if (Configure::read('BcApp.allowedThemeEdit')): ?>\n        \t\t<?php $this->BcBaser->link('', ['controller' => 'theme_files', 'action' => 'index', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'bca-btn-icon', 'data-bca-btn-type' => 'file-list', 'data-bca-btn-size' => 'lg']) ?>\n\t\t\t<?php endif; ?>\n          <?php $this->BcBaser->link('', ['action' => 'ajax_copy', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy bca-btn-icon', 'data-bca-btn-type' => 'copy', 'data-bca-btn-size' => 'lg']) ?>\n        </div>\n      </div>\n\n      <div class=\"bca-current-theme__sub\">\n        <div class=\"theme-info\">\n          <h3 class=\"theme-name\"><strong><?php echo h($currentTheme['title']) ?></strong>&nbsp;(&nbsp;<?php echo $currentTheme['name'] ?>&nbsp;)</h3>\n          <p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3') ?>\uff1a<?php echo $currentTheme['version'] ?></p>\n          <p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005') ?>\uff1a<?php if (!empty($currentTheme['url']) && !empty($currentTheme['author'])): ?>\n              <?php $this->BcBaser->link($currentTheme['author'], $currentTheme['url'], ['target' => '_blank', 'escape' => true]) ?>\n            <?php else: ?>\n              <?php echo h($currentTheme['author']) ?>\n            <?php endif ?>\n          </p>\n        </div>\n        <?php if ($defaultDataPatterns && $this->BcBaser->isAdminUser()): ?>\n          <?php echo $this->BcForm->create('Theme', ['url' => ['action' => 'load_default_data_pattern']]) ?>\n          <?php echo $this->BcForm->input('Theme.default_data_pattern', ['type' => 'select', 'options' => $defaultDataPatterns]) ?>\n          <?php echo $this->BcForm->submit(__d('baser', '\u521d\u671f\u30c7\u30fc\u30bf\u8aad\u8fbc'), ['class' => 'button-small', 'div' => false, 'id' => 'BtnLoadDefaultDataPattern']) ?>\n          <?php echo $this->BcForm->end() ?>\n        <?php endif ?>\n        <div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($currentTheme['description'])) ?></div>\n      </div>\n    </div>\n\n  <?php else: ?>\n\t\t<p><?php echo __d('baser', '\u73fe\u5728\u3001\u30c6\u30fc\u30de\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002') ?></p>\n\t<?php endif ?>\n</div>\n\n<ul class=\"list-panel bca-list-panel\">\n\t<?php if (!empty($datas)): ?>\n\t\t<?php foreach ($datas as $data): ?>\n\t\t\t<?php $this->BcBaser->element('themes/index_row', ['data' => $data]) ?>\n\t\t<?php endforeach; ?>\n\t<?php else: ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002') ?><br><?php echo __d('baser', '<a href=\"https://market.basercms.net/\" target=\"_blank\">baser\u30de\u30fc\u30b1\u30c3\u30c8</a>\u3067\u30c6\u30fc\u30de\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u3087\u3046\u3002') ?></li>\n\t<?php endif; ?>\n</ul>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u884c\n */\n?>\n\n\n<li>\n\t<p class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</p>\n\t<p class=\"bca-current-theme__screenshot\">\n\t\t<a class=\"theme-popup\" href=\"<?php echo '#Contents' . Inflector::camelize($data['name']) ?>\">\n<?php if ($data['screenshot']): ?>\n\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n<?php else: ?>\n\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n<?php endif ?>\n\t\t</a>\n\t</p>\n\t<p class=\"row-tools\">\n<?php if ($data['name'] != $this->BcBaser->siteConfig['theme']): ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'apply', $data['name']], ['title' => __d('baser', '\u9069\u7528'), 'class' => 'submit-token bca-btn-icon', 'data-bca-btn-type' => 'apply', 'data-bca-btn-size' => 'lg']) ?>\n<?php endif ?>\n\t<?php if (Configure::read('BcApp.allowedThemeEdit')): ?>\n\t\t<?php $this->BcBaser->link('', ['controller' => 'theme_files', 'action' => 'index', $data['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'bca-btn-icon', 'data-bca-btn-type' => 'file-list', 'data-bca-btn-size' => 'lg']) ?>\n\t<?php endif; ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'ajax_copy', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy bca-btn-icon', 'data-bca-btn-type' => 'copy', 'data-bca-btn-size' => 'lg']) ?>\n\t\t<?php $this->BcBaser->link('', ['action' => 'ajax_delete', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn-delete bca-btn-icon', 'data-bca-btn-type' => 'delete', 'data-bca-btn-size' => 'lg']) ?>\n\t</p>\n\t<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></p>\n\t<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n<?php else: ?>\n\t\t<?php echo h($data['author']) ?>\n<?php endif ?>\n\t</p>\n\t<div style='display:none'>\n\t\t<div id=\"<?php echo 'Contents' . Inflector::camelize($data['name']) ?>\" class=\"theme-popup-contents clearfix\">\n\t\t\t<div class=\"bca-current-theme__screenshot\">\n<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n<?php endif ?>\n\t\t\t</div>\n\t\t\t<div class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</div>\n\t\t\t<div class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></div>\n\t\t\t<div class=\"theme-author\">\n\t\t\t\t<?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n<?php else: ?>\n\t\t\t\t<?php echo h($data['author']) ?>\n<?php endif ?>\n\t\t\t</div>\n\t\t\t<div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($data['description'])) ?></div>\n\t\t</div>\n\t</div>\n</li>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttps://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttps://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u767b\u9332\u30fb\u7de8\u96c6\n *\n * @var BcAppView $this\n */\n$this->BcBaser->js('admin/themes/form');\n$params = explode('/', $path);\n$parentPrams = explode('/', $path);\nif ($this->request->action !== 'admin_add') {\n\tunset($parentPrams[count($parentPrams)-1]);\n}\n?>\n<!-- current -->\n<div class=\"em-box bca-current-box\">\n<?php echo __d('baser', '\u73fe\u5728\u306e\u4f4d\u7f6e')?>\uff1a<?php echo h($currentPath) ?>\n</div>\n\n<?php if($theme\t!= 'core' && !$isWritable): ?>\n<div id=\"AlertMessage\"><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u306a\u3044\u306e\u3067\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093\u3002')?></div>\n<?php endif ?>\n\n<?php if ($this->request->action == 'admin_add'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'add'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'edit'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php endif ?>\n\n<?php echo $this->BcFormTable->dispatchBefore() ?>\n\n<?php echo $this->BcForm->input('ThemeFile.parent', ['type' => 'hidden']) ?>\n\n<!-- form -->\n<div class=\"section\">\n\t<table cellpadding=\"0\" cellspacing=\"0\" id=\"FormTable\" class=\"form-table bca-form-table\">\n\t\t<tr>\n\t\t\t<th class=\"col-head bca-form-table__label\"><?php echo $this->BcForm->label('ThemeFile.name', __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d')) ?>&nbsp;<span class=\"bca-label\" data-bca-label-type=\"required\"><?php echo __d('baser', '\u5fc5\u9808') ?></span></th>\n\t\t\t<td class=\"col-input bca-form-table__input\">\n\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'maxlength' => 255, 'autofocus' => true]) ?>\n\t\t\t\t\t<?php if ($this->BcForm->value('ThemeFile.ext')): ?>.<?php endif ?>\n\t\t\t\t\t<?php echo h($this->BcForm->value('ThemeFile.ext')) ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t\t<i class=\"bca-icon--question-circle btn help bca-help\"></i>\n\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.name') ?>\n\t\t\t\t\t<div id=\"helptextName\" class=\"helptext\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u534a\u89d2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002')?></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'readonly' => 'readonly']) ?> .<?php echo $this->BcForm->value('ThemeFile.ext') ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<?php if ($this->request->action == 'admin_add' || (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && in_array($this->request->data['ThemeFile']['type'], ['text', 'image']))): ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"col-head bca-form-table__label\"><?php echo $this->BcForm->label('ThemeFile.contents', __d('baser', '\u5185\u5bb9')) ?></th>\n\t\t\t\t<td class=\"col-input bca-form-table__input\">\n\t\t\t\t\t<?php if (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && $this->request->data['ThemeFile']['type'] == 'image'): ?>\n\t\t\t\t\t\t<div style=\"margin:20px auto\">\n\t\t\t\t\t\t\t<?php $this->BcBaser->link(\n\t\t\t\t\t\t\t\t$this->BcBaser->getImg(array_merge(['action' => 'img_thumb', 550, 550, $theme, $plugin, $type], explode('/', $path)), ['alt' => basename($path)]), array_merge(['action' => 'img', $theme, $plugin, $type], explode('/', $path)), ['rel' => 'colorbox', 'title' => basename($path)]\n\t\t\t\t\t\t\t); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php elseif ($this->request->action == 'admin_add' || $this->request->data['ThemeFile']['type'] == 'text'): ?>\n\t\t\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30]) ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.contents') ?>\n\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30, 'readonly' => 'readonly']) ?>\n\t\t\t\t\t\t<?php endif ?>\n\t\t\t\t\t<?php endif ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<?php endif ?>\n\t\t<?php echo $this->BcForm->dispatchAfterForm() ?>\n\t</table>\n</div>\n\n<?php echo $this->BcFormTable->dispatchAfter() ?>\n\n<div class=\"submit bca-actions\">\n\t<?php if ($this->request->action == 'admin_add'): ?>\n\t\t<div class=\"bca-actions__main\">\n\t\t\t<?php echo $this->BcForm->button(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button bca-btn', 'data-bca-btn-type' => 'save', 'data-bca-btn-size' => 'lg', 'data-bca-btn-width' => 'lg','id' => 'BtnSave']) ?>\n\t\t</div>\n\t<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t\t<?php if($isWritable): ?>\n\t\t\t<div class=\"bca-actions__main\">\n\t\t\t\t<?php echo $this->BcForm->button(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button bca-btn', 'data-bca-btn-type' => 'save', 'data-bca-btn-size' => 'lg', 'data-bca-btn-width' => 'lg','id' => 'BtnSave']) ?>\n\t\t\t</div>\n\t\t\t<div class=\"bca-actions__sub\">\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u524a\u9664'), array_merge(['action' => 'del', $theme, $plugin, $type], $params), ['class' => 'submit-token button bca-btn', 'data-bca-btn-type' => 'delete', 'data-bca-btn-size' => 'sm'], sprintf(__d('baser', '%s \u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f'), basename($path)), false) ?>\n\t\t\t</div>\n\t\t<?php endif ?>\n\t<?php else: ?>\n\t\t<?php // \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a2\u30bb\u30c3\u30c8\u306e\u5834\u5408\u306f\u30b3\u30d4\u30fc\u3067\u304d\u306a\u3044 ?>\n\t\t<?php if (!$safeModeOn): ?>\n\t\t\t<?php //if($theme == 'core' && !(($type == 'css' || $type == 'js' || $type == 'img') && $plugin)): ?>\n\t\t\t<?php // \u30c6\u30fc\u30de\u7de8\u96c6\u304c\u8a31\u53ef\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u30b3\u30d4\u30fc\u4e0d\u53ef ?>\n\t\t\t<?php if ($theme == 'core' && Configure::read('BcApp.allowedThemeEdit')): ?>\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc'), array_merge(array('action' => 'copy_to_theme', $theme, $plugin, $type), explode('/', $path)), array('class' => 'submit-token btn-red button bca-btn'), sprintf(__d('baser', '\u672c\u5f53\u306b\u73fe\u5728\u306e\u30c6\u30fc\u30de\u300c%s\u300d\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f\\n\u65e2\u306b\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002'), Inflector::camelize($siteConfig['theme']))); ?>\n\t\t\t<?php endif; ?>\n\t\t<?php else: ?>\n\t\t\t<?php echo __d('baser', '\u6a5f\u80fd\u5236\u9650\u306e\u30bb\u30fc\u30d5\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u73fe\u5728\u306e\u30c6\u30fc\u30de\u3078\u306e\u30b3\u30d4\u30fc\u306f\u3067\u304d\u307e\u305b\u3093\u3002') ?>\n\t\t<?php endif; ?>\n\t<?php endif; ?>\n</div>\n\n<?php if ($this->request->action == 'admin_add' || $this->request->action == 'admin_edit'): ?>\n\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button bca-btn', 'data-bca-btn-type' => 'back-to-list']); ?>\n<?php else: ?>\n\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(array('action' => 'index', $theme, $plugin, $type), explode('/', dirname($path))), array('class' => 'btn-gray button bca-btn', 'data-bca-btn-type' => 'back-to-list')); ?>\n<?php endif; ?>\n\n\n<?php echo $this->BcForm->end() ?>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.Config\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u57fa\u672c\u8a2d\u5b9a\n */\n$config['BcApp'] = [\n\t// \u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30a4\u30c8\u30eb\u8a2d\u5b9a\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u969b\u306e\u30a8\u30e9\u30fc\u6642\u7b49DB\u63a5\u7d9a\u307e\u3048\u306e\u30a8\u30e9\u30fc\u3067\u5229\u7528\uff09\n\t'title' => __d('baser', 'baserCMS'),\n\t// \u521d\u671f\u30c6\u30fc\u30de\n\t'defaultTheme' => 'bc_sample',\n\t// \u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30de\uff08\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\uff09\n\t'adminTheme' => '',\n\t// \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u57fa\u672c\u3068\u306a\u308b\u62e1\u5f35\u5b50\uff08.php \u63a8\u5968\uff09\n\t'templateExt' => '.php',\n\t// \u30b7\u30b9\u30c6\u30e0\u30ca\u30d3\n\t//\n\t// \u521d\u671f\u72b6\u614b\u3067\u8868\u793a\u3059\u308b\u30e1\u30cb\u30e5\u30fc\u306f\u3001`Contents` \u30ad\u30fc\u914d\u4e0b\u306b\u5b9a\u7fa9\u3057\u3001\u300c\u8a2d\u5b9a\u300d\u5185\u306b\u683c\u7d0d\u3059\u308b\u5834\u5408\u306f\u3001`Systems` \u30ad\u30fc\u914d\u4e0b\u306b\u5b9a\u7fa9\u3059\u308b\n\t//\n\t// \u25a0 \u30e1\u30a4\u30f3\u30e1\u30cb\u30e5\u30fc\n\t// `title` : \u8868\u793a\u540d\u79f0\n\t// `type` : `system` \u307e\u305f\u306f\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u7279\u5b9a\u3059\u308b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3002\u300c\u8a2d\u5b9a\u300d\u5185\u306b\u683c\u7d0d\u3059\u308b\u5834\u5408\u306f\u3001`system` \u3092\u6307\u5b9a\n\t// `url` : \u30ea\u30f3\u30af\u5148URL\n\t// `menus` : \u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306b\u914d\u5217\u3067\u6307\u5b9a\n\t// `disable` : \u975e\u8868\u793a\u306b\u3059\u308b\u5834\u5408\u306b `true` \u3092\u6307\u5b9a\n\t//\n\t// \u25a0 \u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\n\t// `title` : \u8868\u793a\u540d\u79f0\n\t// `url` : \u30ea\u30f3\u30af\u5148URL\n\t// `disable` : \u975e\u8868\u793a\u306b\u3059\u308b\u5834\u5408\u306b `true` \u3092\u6307\u5b9a\n\t'adminNavigation' => [\n\t\t'Contents' => [\n\t\t\t'Dashboard' => [\n\t\t\t\t'title' => __d('baser', '\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9'),\n\t\t\t\t'type' => 'dashboard',\n\t\t\t\t'url' => '/' . Configure::read('Routing.prefixes.0'),\n\t\t\t],\n\t\t\t'Contents' => [\n\t\t\t\t'title' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406'),\n\t\t\t\t'type' => 'contents',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Contents' => ['title' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'index']],\n\t\t\t\t\t'ContentsTrash' => ['title' => __d('baser', '\u30b4\u30df\u7bb1'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'trash_index']],\n\t\t\t\t]\n\t\t\t],\n\t\t],\n\t\t'Systems' => [\n\t\t\t'SiteConfigs' => [\n\t\t\t\t'title' => __d('baser', '\u30b5\u30a4\u30c8\u57fa\u672c\u8a2d\u5b9a'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'form'],\n\t\t\t],\n\t\t\t'Users' => [\n\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Users' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'users', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/users\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'UserGroups' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u30b0\u30eb\u30fc\u30d7'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'user_groups', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/user_groups\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Sites' => [\n\t\t\t\t'title' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Sites' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'sites', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/sites\\/.+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Theme' => [\n\t\t\t\t'title' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Themes' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30c6\u30fc\u30de'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/themes\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'ThemeConfigs' => ['title' => __d('baser', '\u8a2d\u5b9a'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'theme_configs', 'action' => 'form']],\n\t\t\t\t\t'ThemeAdd' => ['title' => __d('baser', '\u65b0\u898f\u8ffd\u52a0'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'add']],\n\t\t\t\t\t'ThemesDownload' => ['title' => __d('baser', '\u5229\u7528\u4e2d\u30c6\u30fc\u30de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'download']],\n\t\t\t\t\t'ThemesDownloadDefaultDataPattern' => ['title' => __d('baser', '\u30c6\u30fc\u30de\u7528\u521d\u671f\u30c7\u30fc\u30bf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'download_default_data_pattern']],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Plugin' => [\n\t\t\t\t'title' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3\u7ba1\u7406'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Plugins' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'plugins', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/plugins\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t]\n\t\t\t],\n\t\t\t'Tools' => [\n\t\t\t\t'title' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3'),\n\t\t\t\t'type' => 'system',\n\t\t\t\t'menus' => [\n\t\t\t\t\t'Tools' => ['title' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30c8\u30c3\u30d7'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'index']],\n\t\t\t\t\t'EditorTemplates' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30a8\u30c7\u30a3\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'editor_templates', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/editor_templates\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'WidgetAreas' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u30a8\u30ea\u30a2'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'widget_areas', 'action' => 'index'],\n\t\t\t\t\t\t'currentRegex' => '/\\/widget_areas\\/[^\\/]+?\\/[0-9]+/s'\n\t\t\t\t\t],\n\t\t\t\t\t'SearchIndices' => ['title' => __d('baser', '\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'search_indices', 'action' => 'index']],\n\t\t\t\t\t'SiteConfigsInfo' => ['title' => __d('baser', '\u74b0\u5883\u60c5\u5831'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'info']],\n\t\t\t\t\t'ThemeFiles' => [\n\t\t\t\t\t\t'title' => __d('baser', '\u30b3\u30a2\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u78ba\u8a8d'),\n\t\t\t\t\t\t'url' => ['admin' => true, 'plugin' => null, 'controller' => 'theme_files', 'action' => 'index', 'core'],\n\t\t\t\t\t\t'currentRegex' => '/\\/theme_files\\/[^\\/]+?/s'\n\t\t\t\t\t],\n\t\t\t\t\t'ToolsMaintenance' => ['title' => __d('baser', '\u30c7\u30fc\u30bf\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'maintenance']],\n\t\t\t\t\t'ToolsLog' => ['title' => __d('baser', '\u30ed\u30b0\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'log']],\n\t\t\t\t\t'ToolsWriteSchema' => ['title' => __d('baser', '\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u751f\u6210'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'write_schema']],\n\t\t\t\t\t'ToolsLoadSchema' => ['title' => __d('baser', '\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8aad\u8fbc'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'load_schema']],\n\t\t\t\t]\n\t\t\t]\n\t\t]\n\t],\n\t// @deprecated 5.0.0 since 4.2.0 BcApp.adminNavigation \u306e\u5f62\u5f0f\u306b\u5909\u66f4\n\t'adminNavi' => ['core' => [\n\t\t\t'name' => 'baserCMS\u30b3\u30a2',\n\t\t\t'contents' => [\n\t\t\t\t['name' => __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'contents', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'widget_areas', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'themes', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30d7\u30e9\u30b0\u30a4\u30f3\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'plugins', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'form']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'users', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30b6\u30fc\u30b0\u30eb\u30fc\u30d7\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'user_groups', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u691c\u7d22\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'search_indices', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30a8\u30c7\u30a3\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'editor_templates', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b5\u30d6\u30b5\u30a4\u30c8\u7ba1\u7406'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'sites', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'tools', 'action' => 'index']],\n\t\t\t\t['name' => __d('baser', '\u30b5\u30fc\u30d0\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u524a\u9664'), 'url' => ['admin' => true, 'plugin' => null, 'controller' => 'site_configs', 'action' => 'del_cache'], 'options' => ['confirm' => __d('baser', '\u30b5\u30fc\u30d0\u30fc\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3044\u3044\u3067\u3059\u304b\uff1f')]]\n\t]]],\n\t// \u30b3\u30a2\u30d7\u30e9\u30b0\u30a4\u30f3\n\t'corePlugins' => ['Blog', 'Feed', 'Mail', 'Uploader'],\n\t// \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30ad\u30fc\n\t'updateKey' => 'update',\n\t// \u7ba1\u7406\u8005\u30b0\u30eb\u30fc\u30d7ID\n\t'adminGroupId' => 1,\n\t// \u30a8\u30c7\u30a3\u30bf\u30fc\n\t'editors' => [\n\t\t'none' => __d('baser', '\u306a\u3057'),\n\t\t'BcCkeditor' => 'CKEditor'\n\t],\n\t'testTheme' => 'bc_sample',\n\t// \u56fa\u5b9a\u30da\u30fc\u30b8\u3067\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\u304b\u3069\u3046\u304b\n\t// \u304a\u540d\u524d\u30c9\u30c3\u30c8\u30b3\u30e0\u306e\u5834\u5408\u3001CLI\u7248PHP\u306e\u5b58\u5728\u78ba\u8a8d\u306e\u6bb5\u968e\u3067\u56fa\u307e\u3063\u3066\u3057\u307e\u3046\n\t'validSyntaxWithPage' => true,\n\t// \u7ba1\u7406\u8005\u4ee5\u5916\u306ePHP\u30b3\u30fc\u30c9\u3092\u8a31\u53ef\u3059\u308b\u304b\u3069\u3046\u304b\n\t'allowedPhpOtherThanAdmins' => true,\n\t// \u30c6\u30fc\u30de\u7de8\u96c6\u6a5f\u80fd\u306e\u5229\u7528\u3092\u8a31\u53ef\u3059\u308b\u304b\u3069\u3046\u304b\n\t'allowedThemeEdit' => false,\n\t'marketThemeRss' => 'https://market.basercms.net/themes.rss',\n\t'marketPluginRss' => 'https://market.basercms.net/plugins.rss',\n\t'specialThanks'\t=> 'https://basercms.net/special_thanks/special_thanks/ajax_users',\n\t// \u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30c6\u30fc\u30de\n\t'defaultAdminTheme' => 'admin-third',\n\t// \u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4f5c\u6210\u65e5\u3092\u81ea\u52d5\u3067\u66f4\u65b0\u3059\u308b\n\t'autoUpdateContentCreatedDate' => true,\n\t// \u30aa\u30fc\u30c8\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u5916\u8a2d\u5b9a\uff08\u7d76\u5bfeURL\uff09\n\t// \u300c\u3059\u3079\u3066\u306e\u30ea\u30f3\u30af\u3092\u30b5\u30d6\u30b5\u30a4\u30c8\u7528\u306b\u5909\u63db\u3059\u308b\u300d\u6307\u5b9a\u6642\u3001\u5168\u3066\u306e\u30ea\u30f3\u30af\u306b\u5bfe\u3057\u3066\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u5099\u3048\u308b\u7b87\u6240\u306b\u9664\u5916\u6307\u5b9a\u3067\u304d\u308b\n\t// \u6307\u5b9a\u3057\u305f\u7d76\u5bfeURL\u3092\u8a18\u8f09\u3057\u3066\u3044\u308b\u30ea\u30f3\u30af\u306f\u5909\u63db\u3057\u306a\u3044\n\t// \u4f8b: 'https://basercms.net/'\u3068\u8a18\u8f09 \u2192 https://basercms.net/s/ \u306f s \u304c\u4ed8\u304b\u306a\u304f\u306a\u308b\n\t'excludeAbsoluteUrlAddPrefix' => [],\n\t// \u30aa\u30fc\u30c8\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u5916\u8a2d\u5b9a\uff08\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09\n\t// \u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30eaURL\u3092\u8a18\u8f09\u3057\u3066\u3044\u308b\u30ea\u30f3\u30af\u306f\u5909\u63db\u3057\u306a\u3044\n\t// \u4f8b: 'test/' \u3068\u8a18\u8f09 \u2192 https://basercms.net/s/test/ \u306f s \u304c\u4ed8\u304b\u306a\u304f\u306a\u308b\n\t'excludeListAddPrefix' => [],\n\t// generator \u306e\u30e1\u30bf\u30bf\u30b0\u3092\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\n\t'outputMetaGenerator' => true,\n\t// \u5916\u90e8\u30ea\u30f3\u30af\n\t'outerLinks' => [\n\t\t// \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30de\u30cb\u30e5\u30a2\u30eb\n\t\t'installManual' => 'http://wiki.basercms.net/%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%82%AC%E3%82%A4%E3%83%89',\n\t\t// \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb\n\t\t'updateManual' => 'http://wiki.basercms.net/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%82%AC%E3%82%A4%E3%83%89'\n\t]\n];\n\n/**\n * \u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\n */\n$config['BcRequire'] = array(\n\t'phpVersion' => \"5.4.0\",\n\t'phpMemory' => \"128\",\n\t'MySQLVersion' => \"5.0.0\",\n\t'winSQLiteVersion' => \"3.7.16\",\n\t'PostgreSQLVersion' => \"8.4.0\"\n);\n\n/**\n * \u74b0\u5883\u8a2d\u5b9a\n */\n$config['BcEnv'] = array(\n\t// \u30c6\u30b9\u30c8DB\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\n\t'testDbPrefix' => 'test_',\n\t// Web\u30b5\u30a4\u30c8URL\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3067 install.php \u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3001\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3067\u5909\u66f4\u53ef\uff09\n\t'siteUrl' => '',\n\t// SSL\u306eWeb\u30b5\u30a4\u30c8URL\uff08\u30b7\u30b9\u30c6\u30e0\u8a2d\u5b9a\u3067\u5909\u66f4\u53ef\uff09\n\t'sslUrl' => '',\n\t// \u5fa9\u6570\u306eWeb\u30b5\u30a4\u30c8\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u306e\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\n\t'mainDomain' => '',\n\t// \u73fe\u5728\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30db\u30b9\u30c8\n\t'host' => @$_SERVER['HTTP_HOST']\n);\n\n/**\n * \u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\n */\n$config['BcEncode'] = array(\n\t// \u6587\u5b57\u30b3\u30fc\u30c9\u306e\u691c\u51fa\u9806\n\t'detectOrder' => 'ASCII,JIS,UTF-8,SJIS-win,EUC-JP',\n\t'mail' => array(\n\t\t'UTF-8' => 'UTF-8',\n\t\t'ISO-2022-JP' => 'ISO-2022-JP'\n\t)\n);\n\n/**\n * \u8a8d\u8a3c\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u8a2d\u5b9a\n * \u203b CSV\u306f\u975e\u5bfe\u5fdc\n */\n$prefixes = Configure::read('Routing.prefixes');\n$adminPrefix = $prefixes[0];\n$config['BcAuthPrefix'] = array(\n\t// \u7ba1\u7406\u753b\u9762\n\t'admin' => array(\n\t\t// \u8a8d\u8a3c\u30bf\u30a4\u30d7\n\t\t'type' => 'Form',\n\t\t// \u8a8d\u8a3c\u8a2d\u5b9a\u540d\n\t\t'name' => __d('baser', '\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0'),\n\t\t// URL\u306b\u304a\u3051\u308b\u30a8\u30a4\u30ea\u30a2\u30b9\n\t\t'alias' => $adminPrefix,\n\t\t// \u8a8d\u8a3c\u5f8c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\n\t\t'loginRedirect' => '/' . $adminPrefix,\n\t\t// \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u30bf\u30a4\u30c8\u30eb\n\t\t'loginTitle' => __d('baser', '\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u30ed\u30b0\u30a4\u30f3'),\n\t\t// \u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8URL\n\t\t'loginAction' => '/' . $adminPrefix . '/users/login',\n\t\t// \u30ed\u30b0\u30a2\u30a6\u30c8\u30da\u30fc\u30b8URL\n\t\t'logoutAction'=> '/' . $adminPrefix . '/users/logout',\n\t\t// \u30c4\u30fc\u30eb\u30d0\u30fc\u5229\u7528\n\t\t'toolbar' => true,\n\t\t// \u30e2\u30c7\u30eb\n\t\t'userModel' => 'User',\n\t\t// \u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\n\t\t'sessionKey' => 'Admin',\n\t\t// preview\u53ca\u3073force\u6307\u5b9a\u6642\u306b\u7ba1\u7406\u753b\u9762\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u72b6\u6cc1\u4e0b\u3067\u306e\u6319\u52d5\u5224\u5225\n\t\t// true\uff1a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n\t\t// false\uff1a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u306a\u3044\n\t\t// @see /lib/Baser/Routing/Route/BcContentsRoute.php\n\t\t'previewRedirect' => true\n\n\t)\n\t// \u30d5\u30ed\u30f3\u30c8\uff08\u4f8b\uff09\n/* 'front' => array(\n\t  'name'\t\t\t=> __d('baser', '\u30d5\u30ed\u30f3\u30c8'),\n\t  'loginRedirect'\t=> '/',\n\t  'userModel'\t\t=> 'User',\n\t  'loginAction'\t=> '/users/login',\n\t  'logoutAction'=> '/users/logout',\n\t  'toolbar'\t\t=> true,\n\t  'sessionKey'\t=> 'User'\n\t), */\n\t// \u30de\u30a4\u30da\u30fc\u30b8\uff08\u4f8b\uff09\n/* 'mypage' => array(\n\t  'name'\t\t\t=> __d('baser', '\u30de\u30a4\u30da\u30fc\u30b8'),\n\t  'alias'\t\t\t=> 'mypage',\n\t  'loginRedirect'\t=> '/mypage/members/index',\n\t  'loginTitle'\t=> __d('baser', '\u30de\u30a4\u30da\u30fc\u30b8\u30ed\u30b0\u30a4\u30f3'),\n\t  'userModel'\t\t=> 'Member',\n\t  'loginAction'\t=> '/mypage/members/login',\n\t  'logoutAction'=> '/mypage/members/logout',\n\t  'toolbar'\t\t=> false,\n\t  'sessionKey'\t=> 'User'\n\t) */\n);\n\n/**\n * E\u30e1\u30fc\u30eb\u8a2d\u5b9a\n */\n$config['BcEmail'] = array(\n\t// \u6539\u884c\u30b3\u30fc\u30c9\n\t'lfcode' => \"\\n\"\n);\n\n/**\n * \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8a2d\u5b9a\n */\n$config['BcAgent'] = array(\n\t'mobile' => array(\n\t\t'name' => __d('baser', '\u30b1\u30fc\u30bf\u30a4'),\n\t\t'helper' => 'BcMobile',\n\t\t'agents' => array(\n\t\t\t'Googlebot-Mobile',\n\t\t\t'Y!J-SRD',\n\t\t\t'Y!J-MBS',\n\t\t\t'DoCoMo',\n\t\t\t'SoftBank',\n\t\t\t'Vodafone',\n\t\t\t'J-PHONE',\n\t\t\t'UP.Browser'\n\t\t),\n\t\t'sessionId' => true\n\t),\n\t'smartphone' => array(\n\t\t'name' => __d('baser', '\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3'),\n\t\t'helper' => 'BcSmartphone',\n\t\t'agents' => array(\n\t\t\t'iPhone',\t\t\t// Apple iPhone\n\t\t\t'iPod',\t\t\t\t// Apple iPod touch\n\t\t\t'Android',\t\t\t// 1.5+ Android\n\t\t\t'dream',\t\t\t// Pre 1.5 Android\n\t\t\t'CUPCAKE',\t\t\t// 1.5+ Android\n\t\t\t'blackberry9500',\t// Storm\n\t\t\t'blackberry9530',\t// Storm\n\t\t\t'blackberry9520',\t// Storm v2\n\t\t\t'blackberry9550',\t// Storm v2\n\t\t\t'blackberry9800',\t// Torch\n\t\t\t'webOS',\t\t\t// Palm Pre Experimental\n\t\t\t'incognito',\t\t// Other iPhone browser\n\t\t\t'webmate'\t\t\t// Other iPhone browser\n\t\t)\n\t)\n);\n\n/**\n * \u8a00\u8a9e\u8a2d\u5b9a\n */\n$config['BcLang'] = [\n\t'english' => [\n\t\t'name' => __d('baser', '\u82f1\u8a9e'),\n\t\t'langs' => [\n\t\t\t'en'\n\t\t]\n\t]\n];\n\n/**\n * \u30b3\u30f3\u30c6\u30f3\u30c4\u8a2d\u5b9a\n */\n$config['BcContents'] = [\n\t'items' => [\n\t\t'Core' => [\n\t\t\t'Default'\t=> [\n\t\t\t\t'title' => __d('baser', '\u7121\u6240\u5c5e\u30b3\u30f3\u30c6\u30f3\u30c4'),\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'empty'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--file',\n\t\t\t],\n\t\t\t'ContentFolder'\t=> [\n\t\t\t\t'multiple'\t=> true,\n\t\t\t\t'preview'\t=> true,\n\t\t\t\t'title' => __d('baser', '\u30d5\u30a9\u30eb\u30c0\u30fc'),\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'content_folders',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--folder',\n\t\t\t],\n\t\t\t'ContentAlias'\t=> [\n\t\t\t\t'multiple' => true,\n\t\t\t\t'title' => __d('baser', '\u30a8\u30a4\u30ea\u30a2\u30b9'),\n\t\t\t\t'icon'\t=> 'bca-icon--alias',\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'add',\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'contents',\n\t\t\t\t\t\t'action'\t=> 'edit_alias'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t],\n\t\t\t'ContentLink'\t=> [\n\t\t\t\t'multiple' => true,\n\t\t\t\t'title' => __d('baser', '\u30ea\u30f3\u30af'),\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'content_links',\n\t\t\t\t\t\t'action'\t=> 'view'\n\t\t\t\t\t]\n\t\t\t\t],\n\t\t\t\t'icon'\t=> 'bca-icon--link',\n\t\t\t],\n\t\t\t'Page'\t=> [\n\t\t\t\t'title' => __d('baser', '\u56fa\u5b9a\u30da\u30fc\u30b8'),\n\t\t\t\t'multiple'\t=> true,\n\t\t\t\t'preview'\t=> true,\n\t\t\t\t'icon'\t=> 'bca-icon--file',\n\t\t\t\t'omitViewAction' => true,\n\t\t\t\t'routes' => [\n\t\t\t\t\t'add'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'ajax_add'\n\t\t\t\t\t],\n\t\t\t\t\t'edit'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'edit'\n\t\t\t\t\t],\n\t\t\t\t\t'delete' => [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'delete'\n\t\t\t\t\t],\n\t\t\t\t\t'view' => [\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'display'\n\t\t\t\t\t],\n\t\t\t\t\t'copy'\t=> [\n\t\t\t\t\t\t'admin' => true,\n\t\t\t\t\t\t'controller'=> 'pages',\n\t\t\t\t\t\t'action'\t=> 'ajax_copy'\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t]\n\t\t]\n\t]\n];\n\n/**\n * \u30b7\u30e7\u30fc\u30c8\u30b3\u30fc\u30c9\u8a2d\u5b9a\n */\n$config['BcShortCode']['Core'] = [\n\t'BcBaser.getSitemap',\n\t'BcBaser.getRelatedSiteLinks',\n\t'BcBaser.getWidgetArea',\n\t'BcBaser.getGoogleMaps',\n\t'BcBaser.getSiteSearchForm',\n\t'BcBaser.getUpdateInfo'\n];\n\n/**\n * \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n */\n$config['BcSecurity'] = [\n\t'csrfExpires' => '+4 hours'\n];\n\n/**\n * \u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\n */\n$config['BcWidget'] = [\n\t// \u30d5\u30ed\u30f3\u30c8\u306b\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u30a8\u30ea\u30a2\u306e\u7de8\u96c6\u30ea\u30f3\u30af\u3092\u8868\u793a\u3059\u308b\u304b\u3069\u3046\u304b\n\t'editLinkAtFront' => false\n];\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.Controller\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\nApp::uses('Imageresizer', 'Vendor');\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n *\n * @package Baser.Controller\n */\nclass ThemeFilesController extends AppController {\n\n/**\n * \u30af\u30e9\u30b9\u540d\n * @var string\n */\n\tpublic $name = 'ThemeFiles';\n\n/**\n * \u30e2\u30c7\u30eb\n *\n * @var array\n */\n\tpublic $uses = ['ThemeFile', 'ThemeFolder'];\n\n/**\n * \u30d8\u30eb\u30d1\u30fc\n *\n * @var array\n */\n\tpublic $helpers = ['BcForm', 'BcCkeditor'];\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\n *\n * @var array\n * @public protected\n */\n\tprotected $_tempalteTypes = [];\n\n/**\n * \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n *\n * @var array\n */\n\tpublic $components = ['BcAuth', 'Cookie', 'BcAuthConfigure'];\n\n/**\n * ThemeFilesController constructor.\n *\n * @param CakeRequest $request\n * @param CakeResponse $response\n */\n\tpublic function __construct(CakeRequest $request, CakeResponse $response) {\n\t\tparent::__construct($request, $response);\n\t\t$this->_tempalteTypes = [\n\t\t\t'Layouts'\t=> __d('baser', '\u30ec\u30a4\u30a2\u30a6\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'Elements'\t=> __d('baser', '\u30a8\u30ec\u30e1\u30f3\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'Emails'\t=> __d('baser', 'E\u30e1\u30fc\u30eb\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'etc'\t\t=> __d('baser', '\u30b3\u30f3\u30c6\u30f3\u30c4\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8'),\n\t\t\t'css'\t\t=> __d('baser', '\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8'),\n\t\t\t'js'\t\t=> 'Javascript',\n\t\t\t'img'\t\t=> __d('baser', '\u30a4\u30e1\u30fc\u30b8')\n\t\t];\n\t\t$this->crumbs = [\n\t\t\t['name' => __d('baser', '\u30c6\u30fc\u30de\u7ba1\u7406'), 'url' => ['admin' => true, 'controller' => 'themes', 'action' => 'index']]\n\t\t];\n\n\t\t// \u30c6\u30fc\u30de\u7de8\u96c6\u6a5f\u80fd\u304c\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u30a2\u30af\u30bb\u30b9\u7981\u6b62\n\t\tif (Configure::read('BcApp.allowedThemeEdit') == false) {\n\t\t\t$denyList = [\n\t\t\t\t'admin_index',\n\t\t\t\t'admin_add',\n\t\t\t\t'admin_edit',\n\t\t\t\t'admin_add_folder',\n\t\t\t\t'admin_edit_folder',\n\t\t\t];\n\t\t\t// core\u306eindex\u306f\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\n\t\t\tif ($this->request->params['pass'][0] === 'core') {\n\t\t\t\tunset($denyList[array_search('admin_index', $denyList)]);\n\t\t\t}\n\t\t\tif (in_array($this->request->action, $denyList)) {\n\t\t\t\t$this->notfound();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\n *\n * @return void\n */\n\tpublic function admin_index() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\n\t\tif (!$theme) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t// \u30bf\u30a4\u30c8\u30eb\u8a2d\u5b9a\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = $pageTitle;\n\t\tif (!empty($this->_tempalteTypes[$type])) {\n\t\t\t$this->pageTitle .= sprintf(__d('baser', '\uff5c%s\u4e00\u89a7'), $this->_tempalteTypes[$type]);\n\t\t}\n\n\t\tif ($type != 'etc') {\n\n\t\t\t/* \u30ec\u30a4\u30a2\u30a6\u30c8\uff0f\u30a8\u30ec\u30e1\u30f3\u30c8 */\n\t\t\t$folder = new Folder($fullpath);\n\t\t\t$files = $folder->read(true, true);\n\t\t\t$themeFiles = [];\n\t\t\t$folders = [];\n\t\t\t$excludeList = ['_notes'];\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif (!in_array($file, $excludeList)) {\n\t\t\t\t\tif ($file == 'admin' && is_link($fullpath . $file)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t$folder = [];\n\t\t\t\t\t$folder['name'] = $file;\n\t\t\t\t\t$folder['type'] = 'folder';\n\t\t\t\t\t$folders[] = $folder;\n\t\t\t\t}\n\t\t\t}\n\t\t\tforeach ($files[1] as $file) {\n\t\t\t\t$themeFile = [];\n\t\t\t\t$themeFile['name'] = $file;\n\t\t\t\t$themeFile['type'] = $this->_getFileType($file);\n\t\t\t\t$themeFiles[] = $themeFile;\n\t\t\t}\n\t\t\t$themeFiles = am($folders, $themeFiles);\n\t\t} else {\n\n\t\t\t/* \u305d\u306e\u4ed6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 */\n\t\t\t$folder = new Folder($fullpath);\n\t\t\t$files = $folder->read(true, true);\n\t\t\t$themeFiles = [];\n\t\t\t$folders = [];\n\t\t\t$excludeFolderList = [];\n\t\t\t$excludeFileList = ['screenshot.png', 'VERSION.txt', 'config.php', 'AppView.php', 'BcAppView.php'];\n\t\t\tif (!$path) {\n\t\t\t\t$excludeFolderList = [\n\t\t\t\t\t'Layouts',\n\t\t\t\t\t'Elements',\n\t\t\t\t\t'Emails',\n\t\t\t\t\t'Helper',\n\t\t\t\t\t'Config',\n\t\t\t\t\t'Plugin',\n\t\t\t\t\t'img',\n\t\t\t\t\t'css',\n\t\t\t\t\t'js',\n\t\t\t\t\t'_notes'\n\t\t\t\t];\n\t\t\t}\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif (!in_array($file, $excludeFolderList)) {\n\t\t\t\t\t$folder = [];\n\t\t\t\t\t$folder['name'] = $file;\n\t\t\t\t\t$folder['type'] = 'folder';\n\t\t\t\t\t$folders[] = $folder;\n\t\t\t\t}\n\t\t\t}\n\t\t\tforeach ($files[1] as $file) {\n\t\t\t\tif (in_array($file, $excludeFileList)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t$themeFile = [];\n\t\t\t\t$themeFile['name'] = $file;\n\t\t\t\t$themeFile['type'] = $this->_getFileType($file);\n\t\t\t\t$themeFiles[] = $themeFile;\n\t\t\t}\n\t\t\t$themeFiles = am($folders, $themeFiles);\n\t\t}\n\n\t\t$currentPath = str_replace(ROOT, '', $fullpath);\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('themeFiles', $themeFiles);\n\t\t$this->set('currentPath', $currentPath);\n\t\t$this->set('fullpath', $fullpath);\n\t\t$this->set('path', $path);\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->help = 'theme_files_index';\n\t\tif($this->request->is('ajax')) {\n\t\t\t$this->render('ajax_index');\n\t\t}\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\u3092\u53d6\u5f97\u3059\u308b\n *\n * @param string $file\n * @return mixed false / type\n */\n\tprotected function _getFileType($file) {\n\t\tif (preg_match('/^(.+?)(\\.ctp|\\.php|\\.css|\\.js)$/is', $file)) {\n\t\t\treturn 'text';\n\t\t} elseif (preg_match('/^(.+?)(\\.png|\\.gif|\\.jpg|\\.jpeg)$/is', $file)) {\n\t\t\treturn 'image';\n\t\t} else {\n\t\t\treturn 'file';\n\t\t}\n\t\treturn false;\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n *\n * @return void\n */\n\tpublic function admin_add() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\n\t\t\tif ($type == 'css' || $type == 'js') {\n\t\t\t\t$ext = $type;\n\t\t\t} else {\n\t\t\t\t$ext = 'php';\n\t\t\t}\n\t\t\t$this->request->data['ThemeFile']['ext'] = $ext;\n\t\t\t$this->request->data['ThemeFile']['parent'] = $fullpath;\n\t\t} else {\n\n\t\t\t$this->ThemeFile->create($this->request->data);\n\t\t\tif ($this->ThemeFile->validates()) {\n\t\t\t\t$fullpath = $fullpath . $this->request->data['ThemeFile']['name'] . '.' . $this->request->data['ThemeFile']['ext'];\n\t\t\t\tif (!is_dir(dirname($fullpath))) {\n\t\t\t\t\t$folder = new Folder();\n\t\t\t\t\t$folder->create(dirname($fullpath), 0777);\n\t\t\t\t}\n\t\t\t\t$file = new File($fullpath);\n\t\t\t\tif ($file->open('w')) {\n\t\t\t\t\t$file->append($this->request->data['ThemeFile']['contents']);\n\t\t\t\t\t$file->close();\n\t\t\t\t\tunset($file);\n\t\t\t\t\t$result = true;\n\t\t\t\t} else {\n\t\t\t\t\t$result = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$result = false;\n\t\t\t}\n\n\t\t\tif ($result) {\n\t\t\t\tclearViewCache();\n\t\t\t\t$this->BcMessage->setInfo(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002'), basename($fullpath)));\n\t\t\t\t$this->redirect(array_merge(['action' => 'edit', $theme, $type], explode('/', $path), [$this->request->data['ThemeFile']['name'] . '.' . $this->request->data['ThemeFile']['ext']]));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), basename($fullpath)));\n\t\t\t}\n\t\t}\n\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u4f5c\u6210'), Inflector::camelize($theme), $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('currentPath', str_replace(ROOT, '', $fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form';\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n *\n * @return void\n */\n\tpublic function admin_edit() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$filename = urldecode(basename($path));\n\n\t\tif (!$this->request->data) {\n\n\t\t\t$file = new File($fullpath);\n\t\t\t$pathinfo = pathinfo($fullpath);\n\t\t\t$this->request->data['ThemeFile']['name'] = urldecode(basename($file->name, '.' . $pathinfo['extension']));\n\t\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType(urldecode(basename($file->name)));\n\t\t\t$this->request->data['ThemeFile']['ext'] = $pathinfo['extension'];\n\t\t\t$this->request->data['ThemeFile']['parent'] = dirname($fullpath) . DS;\n\t\t\tif ($this->request->data['ThemeFile']['type'] == 'text') {\n\t\t\t\t$this->request->data['ThemeFile']['contents'] = $file->read();\n\t\t\t}\n\t\t} else {\n\n\t\t\t$this->ThemeFile->set($this->request->data);\n\t\t\tif ($this->ThemeFile->validates()) {\n\n\t\t\t\t$oldPath = urldecode($fullpath);\n\t\t\t\t$newPath = dirname($fullpath) . DS . urldecode($this->request->data['ThemeFile']['name']);\n\t\t\t\tif ($this->request->data['ThemeFile']['ext']) {\n\t\t\t\t\t$newPath .= '.' . $this->request->data['ThemeFile']['ext'];\n\t\t\t\t}\n\t\t\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType(basename($newPath));\n\t\t\t\tif ($this->request->data['ThemeFile']['type'] == 'text') {\n\t\t\t\t\t$file = new File($oldPath);\n\t\t\t\t\tif ($file->open('w')) {\n\t\t\t\t\t\t$file->append($this->request->data['ThemeFile']['contents']);\n\t\t\t\t\t\t$file->close();\n\t\t\t\t\t\tunset($file);\n\t\t\t\t\t\t$result = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$result = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$result = true;\n\t\t\t\t}\n\t\t\t\tif ($oldPath != $newPath) {\n\t\t\t\t\trename($oldPath, $newPath);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$result = false;\n\t\t\t}\n\n\t\t\tif ($result) {\n\t\t\t\tclearViewCache();\n\t\t\t\t$this->BcMessage->setInfo(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002'), $filename));\n\t\t\t\t$this->redirect(array_merge([$theme, $plugin, $type], explode('/', dirname($path)), [basename($newPath)]));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(sprintf(__d('baser', '\u30d5\u30a1\u30a4\u30eb %s \u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), $filename));\n\t\t\t}\n\t\t}\n\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u7de8\u96c6'), Inflector::camelize($theme), $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . DS);\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form';\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_del() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (is_dir($fullpath)) {\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->delete($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t} else {\n\t\t\t$result = @unlink($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t}\n\n\t\tif ($result) {\n\t\t\t$this->BcMessage->setInfo($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t} else {\n\t\t\t$this->BcMessage->setError($target . ' ' . sprintf(__d('baser', '%s \u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t}\n\n\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u3000\uff08ajax\uff09\n *\n * @return void\n */\n\tpublic function admin_ajax_del() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\n\t\tif (!$args) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\tif ($this->_del($args)) {\n\t\t\texit(true);\n\t\t} else {\n\t\t\texit();\n\t\t}\n\t}\n\n/**\n * \u524a\u9664\n *\n * @return void\n */\n\tprotected function _del($args) {\n\t\textract($args);\n\t\tif (is_dir($fullpath)) {\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->delete($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t} else {\n\t\t\t$result = @unlink($fullpath);\n\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t}\n\t\tif ($result) {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n/**\n * \u4e00\u62ec\u524a\u9664\n *\n * @return void\n */\n\tprotected function _batch_del($ids) {\n\t\tif ($ids) {\n\n\t\t\t$result = true;\n\t\t\tforeach ($ids as $id) {\n\t\t\t\t$args = $this->request->params['pass'];\n\t\t\t\t$args[] = $id;\n\t\t\t\t$args = $this->_parseArgs($args);\n\t\t\t\textract($args);\n\t\t\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t\t\texit();\n\t\t\t\t}\n\n\t\t\t\tif (is_dir($fullpath)) {\n\t\t\t\t\t$folder = new Folder();\n\t\t\t\t\t$result = $folder->delete($fullpath);\n\t\t\t\t\t$target = __d('baser', '\u30d5\u30a9\u30eb\u30c0');\n\t\t\t\t} else {\n\t\t\t\t\t$result = @unlink($fullpath);\n\t\t\t\t\t$target = __d('baser', '\u30d5\u30a1\u30a4\u30eb');\n\t\t\t\t}\n\t\t\t\tif ($result) {\n\t\t\t\t\t$this->ThemeFile->saveDblog($target . ' ' . sprintf(__d('baser', '%s \u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002'), $path));\n\t\t\t\t} else {\n\t\t\t\t\t$result = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8868\u793a\n *\n * @return\tvoid\n * @access\tpublic\n */\n\tpublic function admin_view() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$pathinfo = pathinfo($fullpath);\n\t\t$file = new File($fullpath);\n\t\t$this->request->data['ThemeFile']['name'] = basename($file->name, '.' . $pathinfo['extension']);\n\t\t$this->request->data['ThemeFile']['ext'] = $pathinfo['extension'];\n\t\t$this->request->data['ThemeFile']['contents'] = $file->read();\n\t\t$this->request->data['ThemeFile']['type'] = $this->_getFileType($file->name);\n\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c%s\u8868\u793a'), $pageTitle, $this->_tempalteTypes[$type]);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->render('form');\n\t}\n\n/**\n * \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_ajax_copy() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\n\t\tif (!$args) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->ajaxError(500, __d('baser', '\u7121\u52b9\u306a\u51e6\u7406\u3067\u3059\u3002'));\n\t\t}\n\n\t\t$themeFile = [];\n\t\tif (is_dir($fullpath)) {\n\t\t\t$newPath = preg_replace('/\\/$/is', '', $fullpath) . '_copy';\n\t\t\twhile (true) {\n\t\t\t\tif (!is_dir($newPath)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t$newPath .= '_copy';\n\t\t\t}\n\t\t\t$folder = new Folder();\n\t\t\t$result = $folder->copy(['from' => $fullpath, 'to' => $newPath, 'chmod' => 0777, 'skip' => ['_notes']]);\n\t\t\t$folder = null;\n\t\t\t$target = '\u30d5\u30a9\u30eb\u30c0';\n\t\t\t$themeFile['name'] = basename(urldecode($newPath));\n\t\t\t$themeFile['type'] = 'folder';\n\t\t} else {\n\t\t\t$pathinfo = pathinfo($fullpath);\n\t\t\t$newPath = $pathinfo['dirname'] . DS . urldecode(basename($fullpath, '.' . $pathinfo['extension'])) . '_copy';\n\t\t\twhile (true) {\n\t\t\t\tif (!file_exists($newPath . '.' . $pathinfo['extension'])) {\n\t\t\t\t\t$newPath .= '.' . $pathinfo['extension'];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t$newPath .= '_copy';\n\t\t\t}\n\t\t\t$result = @copy(urldecode($fullpath), $newPath);\n\t\t\tif ($result) {\n\t\t\t\tchmod($newPath, 0666);\n\t\t\t}\n\t\t\t$target = '\u30d5\u30a1\u30a4\u30eb';\n\t\t\t$themeFile['name'] = basename(urldecode($newPath));\n\t\t\t$themeFile['type'] = $this->_getFileType($themeFile['name']);\n\t\t}\n\n\t\tif ($result) {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . urldecode($path) . ' \u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002');\n\t\t\t$this->set('fullpath', $fullpath);\n\t\t\t$this->set('path', dirname($path));\n\t\t\t$this->set('theme', $theme);\n\t\t\t$this->set('plugin', $plugin);\n\t\t\t$this->set('type', $type);\n\t\t\t$this->set('data', $themeFile);\n\t\t} else {\n\t\t\t$this->ThemeFile->saveDblog($target . ' ' . urldecode($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t\t$this->ajaxError(500, __d('baser', '\u4e0a\u4f4d\u30d5\u30a9\u30eb\u30c0\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'));\n\t\t}\n\t}\n\n/**\n * \u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_upload() {\n\t\t$messages = [];\n\t\tif (!$this->request->data) {\n\t\t\tif ($this->ThemeFile->isOverPostSize()) {\n\t\t\t\t$messages[] = __d('baser', '\u9001\u4fe1\u3067\u304d\u308b\u30c7\u30fc\u30bf\u91cf\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u5408\u8a08\u3067 %s \u4ee5\u5185\u306e\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3057\u3066\u304f\u3060\u3055\u3044\u3002', ini_get('post_max_size'));\n\t\t\t} else {\n\t\t\t\t$this->notFound();\n\t\t\t}\n\t\t}\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\t\t$filePath = $fullpath . DS . $this->request->data['ThemeFile']['file']['name'];\n\t\t$Folder = new Folder();\n\t\t$Folder->create(dirname($filePath), 0777);\n\n\t\tif (@move_uploaded_file($this->request->data['ThemeFile']['file']['tmp_name'], $filePath)) {\n\t\t\t$messages = [__d('baser', '\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002')];\n\t\t} else {\n\t\t\t$messages[] = __d('baser', '\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->BcMessage->setError(implode(\"\\n\", $messages));\n\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', $path)));\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u8ffd\u52a0\n *\n * @return void\n */\n\tpublic function admin_add_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\t\t\t$this->request->data['ThemeFolder']['parent'] = $fullpath;\n\t\t} else {\n\t\t\t$folder = new Folder();\n\t\t\t$this->ThemeFolder->create($this->request->data);\n\t\t\tif ($this->ThemeFolder->validates() && $folder->create($fullpath . $this->request->data['ThemeFolder']['name'], 0777)) {\n\t\t\t\t$this->BcMessage->setInfo('\u30d5\u30a9\u30eb\u30c0 ' . $this->request->data['ThemeFolder']['name'] . ' \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002');\n\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', $path)));\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t}\n\t\t}\n\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u4f5c\u6210'), $theme);\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', $fullpath));\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form_folder';\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u7de8\u96c6\n *\n * @return void\n */\n\tpublic function admin_edit_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif (!$this->request->data) {\n\t\t\t$this->request->data['ThemeFolder']['name'] = basename($path);\n\t\t\t$this->request->data['ThemeFolder']['parent'] = dirname($fullpath) . DS;\n\t\t\t$this->request->data['ThemeFolder']['pastname'] = basename($path);\n\t\t} else {\n\t\t\t$newPath = dirname($fullpath) . DS . $this->request->data['ThemeFolder']['name'] . DS;\n\t\t\t$folder = new Folder();\n\t\t\t$this->ThemeFolder->set($this->request->data);\n\t\t\tif ($this->ThemeFolder->validates()) {\n\t\t\t\tif ($fullpath != $newPath) {\n\t\t\t\t\tif ($folder->move(['from' => $fullpath, 'to' => $newPath, 'chmod' => 0777, 'skip' => ['_notes']])) {\n\t\t\t\t\t\t$this->BcMessage->setInfo('\u30d5\u30a9\u30eb\u30c0\u540d\u3092 ' . $this->request->data['ThemeFolder']['name'] . ' \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002');\n\t\t\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306b\u5909\u66f4\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002'));\n\t\t\t\t\t$this->redirect(array_merge(['action' => 'index', $theme, $type], explode('/', dirname($path))));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this->BcMessage->setError(__d('baser', '\u30d5\u30a9\u30eb\u30c0\u540d\u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002'));\n\t\t\t}\n\t\t}\n\n\t\t$pageTitle = $theme;\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u8868\u793a'), $pageTitle);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('isWritable', is_writable($fullpath));\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->help = 'theme_files_form_folder';\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u30d5\u30a9\u30eb\u30c0\u8868\u793a\n *\n * @return void\n */\n\tpublic function admin_view_folder() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$this->request->data['ThemeFolder']['name'] = basename($path);\n\t\t$this->request->data['ThemeFolder']['parent'] = dirname($fullpath);\n\t\t$this->request->data['ThemeFolder']['pastname'] = basename($path);\n\n\t\t$pageTitle = $theme;\n\t\tif ($plugin) {\n\t\t\t$pageTitle .= '\uff1a' . $plugin;\n\t\t}\n\t\t$this->pageTitle = sprintf(__d('baser', '%s\uff5c\u30d5\u30a9\u30eb\u30c0\u8868\u793a'), $pageTitle);\n\t\t$this->crumbs[] = ['name' => $this->_tempalteTypes[$type], 'url' => ['controller' => 'theme_files', 'action' => 'index', $theme, $type]];\n\t\t$this->subMenuElements = ['theme_files'];\n\t\t$this->set('currentPath', str_replace(ROOT, '', dirname($fullpath)) . '/');\n\t\t$this->set('theme', $theme);\n\t\t$this->set('plugin', $plugin);\n\t\t$this->set('type', $type);\n\t\t$this->set('path', $path);\n\t\t$this->render('form_folder');\n\t}\n\n/**\n * \u5f15\u304d\u6570\u3092\u89e3\u6790\u3059\u308b\n *\n * @param array $args\n * @return array\n */\n\tprotected function _parseArgs($args) {\n\t\t$data = ['plugin' => '', 'theme' => '', 'type' => '', 'path' => '', 'fullpath' => '', 'assets' => false];\n\t\t$assets = ['css', 'js', 'img'];\n\n\t\tif (!empty($args[1]) && !isset($this->_tempalteTypes[$args[1]])) {\n\t\t\t$folder = new Folder(BASER_PLUGINS);\n\t\t\t$files = $folder->read(true, true);\n\t\t\tforeach ($files[0] as $file) {\n\t\t\t\tif ($args[1] == $file) {\n\t\t\t\t\t$data['plugin'] = $args[1];\n\t\t\t\t\tunset($args[1]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($data['plugin']) {\n\n\t\t\tif (!empty($args[0])) {\n\t\t\t\t$data['theme'] = $args[0];\n\t\t\t\tunset($args[0]);\n\t\t\t}\n\t\t\tif (!empty($args[2])) {\n\t\t\t\t$data['type'] = $args[2];\n\t\t\t\tunset($args[2]);\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (!empty($args[0])) {\n\t\t\t\t$data['theme'] = $args[0];\n\t\t\t\tunset($args[0]);\n\t\t\t}\n\t\t\tif (!empty($args[1])) {\n\t\t\t\t$data['type'] = $args[1];\n\t\t\t\tunset($args[1]);\n\t\t\t}\n\t\t}\n\n\t\tif (empty($data['type'])) {\n\t\t\t$data['type'] = 'Layouts';\n\t\t}\n\n\t\tif (!empty($args)) {\n\t\t\t$data['path'] = implode(DS, $args);\n\t\t\t$data['path'] = urldecode($data['path']);\n\t\t}\n\n\t\tif ($data['plugin']) {\n\t\t\tif (in_array($data['type'], $assets)) {\n\t\t\t\t$data['assets'] = true;\n\t\t\t\t$viewPath = BASER_PLUGINS . $data['plugin'] . DS . 'webroot' . DS;\n\t\t\t} else {\n\t\t\t\t$viewPath = BASER_PLUGINS . $data['plugin'] . DS . 'View' . DS;\n\t\t\t}\n\t\t} elseif ($data['theme'] == 'core') {\n\t\t\tif (in_array($data['type'], $assets)) {\n\t\t\t\t$data['assets'] = true;\n\t\t\t\t$viewPath = BASER_WEBROOT;\n\t\t\t} else {\n\t\t\t\t$viewPath = BASER_VIEWS;\n\t\t\t}\n\t\t} else {\n\t\t\t$viewPath = WWW_ROOT . 'theme' . DS . $data['theme'] . DS;\n\t\t}\n\n\t\tif ($data['type'] != 'etc') {\n\t\t\t$data['fullpath'] = $viewPath . $data['type'] . DS . $data['path'];\n\t\t} else {\n\t\t\t$data['fullpath'] = $viewPath . $data['path'];\n\t\t}\n\n\t\tif ($data['path'] && is_dir($data['fullpath']) && !preg_match('/\\/$/', $data['fullpath'])) {\n\t\t\t$data['fullpath'] .= DS;\n\t\t}\n\n\t\treturn $data;\n\t}\n\n/**\n * \u30b3\u30a2\u30d5\u30a1\u30a4\u30eb\u3092\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_copy_to_theme() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif ($type != 'etc') {\n\t\t\tif ($plugin && $assets) {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $plugin . DS . $type . DS . $path;\n\t\t\t} else {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $type . DS . $path;\n\t\t\t}\n\t\t} else {\n\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $path;\n\t\t}\n\t\t$folder = new Folder();\n\t\t$folder->create(dirname($themePath), 0777);\n\t\tif (copy($fullpath, $themePath)) {\n\t\t\tchmod($themePath, 0666);\n\t\t\t$_themePath = str_replace(ROOT, '', $themePath);\n\t\t\t$this->setMessage('\u30b3\u30a2\u30d5\u30a1\u30a4\u30eb ' . basename($path) . ' \u3092 \u30c6\u30fc\u30de ' . Inflector::camelize($this->siteConfigs['theme']) . \" \u306e\u6b21\u306e\u30d1\u30b9\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002\\n\" . $_themePath);\n\t\t\t// \u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3001\u6df7\u4e71\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308b\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u305d\u306e\u307e\u307e\n\t\t\t//$this->redirect(array_merge(array('action' => 'edit', $this->siteConfigs['theme'], $type), explode('/', $path)));\n\t\t} else {\n\t\t\t$this->BcMessage->setError('\u30b3\u30a2\u30d5\u30a1\u30a4\u30eb ' . basename($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->redirect(array_merge(['action' => 'view', $theme, $plugin, $type], explode('/', $path)));\n\t}\n\n/**\n * \u30b3\u30a2\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc\u3059\u308b\n *\n * @return void\n */\n\tpublic function admin_copy_folder_to_theme() {\n\t\t$this->_checkSubmitToken();\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\textract($args);\n\t\tif (!isset($this->_tempalteTypes[$type])) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\tif ($type != 'etc') {\n\t\t\tif ($plugin && $assets) {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $plugin . DS . $type . DS;\n\t\t\t} else {\n\t\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $type . DS;\n\t\t\t}\n\t\t\tif ($path) {\n\t\t\t\t$themePath .= $path . DS;\n\t\t\t}\n\t\t} else {\n\t\t\t$themePath = WWW_ROOT . 'theme' . DS . $this->siteConfigs['theme'] . DS . $path . DS;\n\t\t}\n\t\t$folder = new Folder();\n\t\t$folder->create(dirname($themePath), 0777);\n\t\tif ($folder->copy(['from' => $fullpath, 'to' => $themePath, 'chmod' => 0777, 'skip' => ['_notes']])) {\n\t\t\t$_themePath = str_replace(ROOT, '', $themePath);\n\t\t\t$this->BcMessage->setInfo('\u30b3\u30a2\u30d5\u30a9\u30eb\u30c0 ' . basename($path) . ' \u3092 \u30c6\u30fc\u30de ' . Inflector::camelize($this->siteConfigs['theme']) . \" \u306e\u6b21\u306e\u30d1\u30b9\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002\\n\" . $_themePath);\n\t\t\t// \u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u5834\u5408\u3001\u6df7\u4e71\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308b\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u305d\u306e\u307e\u307e\n\t\t\t//$this->redirect(array('action' => 'edit', $this->siteConfigs['theme'], $type, $path));\n\t\t} else {\n\t\t\t$this->BcMessage->setError('\u30b3\u30a2\u30d5\u30a9\u30eb\u30c0 ' . basename($path) . ' \u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002');\n\t\t}\n\t\t$this->redirect(array_merge(['action' => 'view_folder', $theme, $plugin, $type], explode('/', $path)));\n\t}\n\n/**\n * \u753b\u50cf\u3092\u8868\u793a\u3059\u308b\n * \u30b3\u30a2\u306e\u753b\u50cf\u7b49\u3082\u8868\u793a\u53ef\n *\n * @param array \u30d1\u30b9\u60c5\u5831\n * @return void\n */\n\tpublic function admin_img() {\n\t\t$args = $this->_parseArgs(func_get_args());\n\t\t$contents = ['jpg' => 'jpeg', 'gif' => 'gif', 'png' => 'png'];\n\t\textract($args);\n\t\t$pathinfo = pathinfo($fullpath);\n\n\t\tif (!isset($this->_tempalteTypes[$type]) || !isset($contents[$pathinfo['extension']]) || !file_exists($fullpath)) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\t$file = new File($fullpath);\n\t\tif ($file->open('r')) {\n\t\t\theader(\"Content-Length: \" . $file->size());\n\t\t\theader(\"Content-type: image/\" . $contents[$pathinfo['extension']]);\n\t\t\techo $file->read();\n\t\t\texit();\n\t\t} else {\n\t\t\t$this->notFound();\n\t\t}\n\t}\n\n/**\n * \u753b\u50cf\u3092\u8868\u793a\u3059\u308b\n * \u30b3\u30a2\u306e\u753b\u50cf\u7b49\u3082\u8868\u793a\u53ef\n *\n * @param int $width\n * @param int $height\n * @param array \u30d1\u30b9\u60c5\u5831\n * @return void\n */\n\tpublic function admin_img_thumb() {\n\t\t$args = func_get_args();\n\t\t$width = $args[0];\n\t\t$height = $args[1];\n\t\tunset($args[0]);\n\t\tunset($args[1]);\n\t\t$args = array_values($args);\n\n\t\tif ($width == 0) {\n\t\t\t$width = 100;\n\t\t}\n\t\tif ($height == 0) {\n\t\t\t$height = 100;\n\t\t}\n\n\t\t$args = $this->_parseArgs($args);\n\t\t$contents = ['jpeg' => 'jpeg', 'jpg' => 'jpeg', 'gif' => 'gif', 'png' => 'png'];\n\t\textract($args);\n\t\t$pathinfo = pathinfo($fullpath);\n\n\t\tif (!isset($this->_tempalteTypes[$type]) || !isset($contents[$pathinfo['extension']]) || !file_exists($fullpath)) {\n\t\t\t$this->notFound();\n\t\t}\n\n\t\theader(\"Content-type: image/\" . $contents[$pathinfo['extension']]);\n\t\t$Imageresizer = new Imageresizer();\n\t\t$Imageresizer->resize($fullpath, null, $width, $height);\n\t\texit();\n\t}\n\n}\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u30c6\u30fc\u30d6\u30eb\n */\n?>\n\n\n<script type=\"text/javascript\">\n$(function(){\n\t$(\".theme-popup\").colorbox({inline:true, width:\"60%\"});\n});\n</script>\n\n\n<div id=\"CurrentTheme\" class=\"clearfix\">\n\t<h2><?php echo __d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de')?></h2>\n\t<?php if ($currentTheme): ?>\n\t\t<div class=\"current-theme-left\">\n\t\t\t<div class=\"theme-screenshot\">\n\t\t\t\t<?php if ($currentTheme['screenshot']): ?>\n\t\t\t\t\t<?php $this->BcBaser->img('/theme/' . $currentTheme['name'] . '/screenshot.png', ['alt' => $currentTheme['title']]) ?>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $currentTheme['title']]) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</div>\n\t\t\t<p class=\"row-tools\">\n\t\t\t\t<?php if (Configure::read('BcApp.allowedThemeEdit')): ?>\n\t\t\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_manage.png', ['alt' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'btn']), ['controller' => 'theme_files', 'action' => 'index', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6')]) ?>\n\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_copy.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn']), ['action' => 'ajax_copy', $currentTheme['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy']) ?>\n\t\t\t</p>\n\t\t</div>\n\n\t\t<div class=\"theme-info\">\n\t\t\t<p class=\"theme-name\"><strong><?php echo h($currentTheme['title']) ?></strong>&nbsp;(&nbsp;<?php echo $currentTheme['name'] ?>&nbsp;)</p>\n\t\t\t<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $currentTheme['version'] ?></p>\n\t\t\t<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a<?php if (!empty($currentTheme['url']) && !empty($currentTheme['author'])): ?>\n\t\t\t\t\t<?php $this->BcBaser->link($currentTheme['author'], $currentTheme['url'], ['target' => '_blank', 'escape' => true]) ?>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo h($currentTheme['author']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</p>\n\t\t</div>\n\t\t<br /><br />\n\t\t<?php if ($defaultDataPatterns && $this->BcBaser->isAdminUser()): ?>\n\t\t\t<?php echo $this->BcForm->create('Theme', ['url' => ['action' => 'load_default_data_pattern']]) ?>\n\t\t\t<?php echo $this->BcForm->input('Theme.default_data_pattern', ['type' => 'select', 'options' => $defaultDataPatterns]) ?>\n\t\t\t<?php echo $this->BcForm->submit(__d('baser', '\u521d\u671f\u30c7\u30fc\u30bf\u8aad\u8fbc'), ['class' => 'button-small', 'div' => false, 'id' => 'BtnLoadDefaultDataPattern']) ?>\n\t\t\t<?php echo $this->BcForm->end() ?>\n\t\t<?php endif ?>\n\t\t<br /><br /><br /><br />\n\t\t<div class=\"theme-description clearfix\"><?php echo nl2br($this->BcText->autoLinkUrls($currentTheme['description'])) ?></div>\n\t<?php else: ?>\n\t\t<p><?php echo __d('baser', '\u73fe\u5728\u3001\u30c6\u30fc\u30de\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002')?></p>\n\t<?php endif ?>\n</div>\n\n<ul class=\"list-panel clearfix\">\n\t<?php if (!empty($datas)): ?>\n\t\t<?php foreach ($datas as $data): ?>\n\t\t\t<?php $this->BcBaser->element('themes/index_row', ['data' => $data]) ?>\n\t\t<?php endforeach; ?>\n\t<?php else: ?>\n\t\t<?php if(strtotime('2014-03-31 17:00:00') >= time()): ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002')?><br /><a href=\"http://basercms.net/themes/index\" target=\"_blank\"><?php echo __d('baser', 'baserCMS\u306e\u516c\u5f0f\u30b5\u30a4\u30c8</a>\u3067\u306f\u7121\u511f\u306e\u30c6\u30fc\u30de\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002')?></li>\n\t\t<?php else: ?>\n\t\t<li class=\"no-data\"><?php echo __d('baser', '\u5909\u66f4\u3067\u304d\u308b\u30c6\u30fc\u30de\u304c\u3042\u308a\u307e\u305b\u3093\u3002')?><br /><a href=\"https://market.basercms.net/\" target=\"_blank\"><?php echo __d('baser', 'baser\u30de\u30fc\u30b1\u30c3\u30c8</a>\u3067\u30c6\u30fc\u30de\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u3087\u3046\u3002')?></li>\n\t\t<?php endif ?>\n\t<?php endif; ?>\n</ul>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u4e00\u89a7\u3000\u884c\n */\n?>\n\n\n<li>\n\t<p class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</p>\n\t<p class=\"theme-screenshot\">\n\t\t<a class=\"theme-popup\" href=\"<?php echo '#Contents' . Inflector::camelize($data['name']) ?>\">\n\t\t\t<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php endif ?>\n\t\t</a>\n\t</p>\n\t<p class=\"row-tools\">\n\t\t<?php if ($data['name'] != $this->BcBaser->siteConfig['theme']): ?>\n\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_apply.png', ['alt' => __d('baser', '\u9069\u7528'), 'class' => 'btn']), ['action' => 'apply', $data['name']], ['title' => __d('baser', '\u9069\u7528'), 'class' => 'submit-token']) ?>\n\t\t<?php endif ?>\n\t\t<?php if (Configure::read('BcApp.allowedThemeEdit')): ?>\n\t\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_manage.png', ['alt' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6'), 'class' => 'btn']), ['controller' => 'theme_files', 'action' => 'index', $data['name']], ['title' => __d('baser', '\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u7de8\u96c6')]) ?>\n\t\t<?php endif; ?>\n\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_copy.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn']), ['action' => 'ajax_copy', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u30b3\u30d4\u30fc'), 'class' => 'btn-copy']) ?>\n\t\t<?php $this->BcBaser->link($this->BcBaser->getImg('admin/icn_tool_delete.png', ['alt' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn']), ['action' => 'ajax_delete', $data['name']], ['title' => __d('baser', '\u30c6\u30fc\u30de\u524a\u9664'), 'class' => 'btn-delete']) ?>\n</p>\n<p class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></p>\n<p class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n\t<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank', 'escape' => true]) ?>\n\t<?php else: ?>\n\t\t<?php echo h($data['author']) ?>\n\t<?php endif ?>\n</p>\n<div style='display:none'>\n\t<div id=\"<?php echo 'Contents' . Inflector::camelize($data['name']) ?>\" class=\"theme-popup-contents clearfix\">\n\t\t<div class=\"theme-screenshot\">\n\t\t\t<?php if ($data['screenshot']): ?>\n\t\t\t\t<?php $this->BcBaser->img('/theme/' . $data['name'] . '/screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php $this->BcBaser->img('admin/no-screenshot.png', ['alt' => $data['title']]) ?>\n\t\t\t<?php endif ?>\n\t\t</div>\n\t\t<div class=\"theme-name\"><strong><?php echo h($data['title']) ?></strong>&nbsp;(&nbsp;<?php echo $data['name'] ?>&nbsp;)</div>\n\t\t<div class=\"theme-version\"><?php echo __d('baser', '\u30d0\u30fc\u30b8\u30e7\u30f3')?>\uff1a<?php echo $data['version'] ?></div>\n\t\t<div class=\"theme-author\"><?php echo __d('baser', '\u5236\u4f5c\u8005')?>\uff1a\n\t\t\t<?php if (!empty($data['url']) && !empty($data['author'])): ?>\n\t\t\t\t<?php $this->BcBaser->link($data['author'], $data['url'], ['target' => '_blank']) ?>\n\t\t\t<?php else: ?>\n\t\t\t\t<?php echo h($data['author']) ?>\n\t\t\t<?php endif ?>\n\t\t</div>\n\t\t<div class=\"theme-description\"><?php echo nl2br($this->BcText->autoLinkUrls($data['description'])) ?></div>\n\t</div>\n</div>\n</li>\n", "<?php\n/**\n * baserCMS :  Based Website Development Project <http://basercms.net>\n * Copyright (c) baserCMS Users Community <http://basercms.net/community/>\n *\n * @copyright\t\tCopyright (c) baserCMS Users Community\n * @link\t\t\thttp://basercms.net baserCMS Project\n * @package\t\t\tBaser.View\n * @since\t\t\tbaserCMS v 0.1.0\n * @license\t\t\thttp://basercms.net/license/index.html\n */\n\n/**\n * [ADMIN] \u30c6\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u767b\u9332\u30fb\u7de8\u96c6\n *\n * @var BcAppView $this\n */\n$this->BcBaser->js('admin/themes/form');\n$params = explode('/', $path);\n$parentPrams = explode('/', $path);\nif ($this->request->action !== 'admin_add') {\n\tunset($parentPrams[count($parentPrams)-1]);\n}\n?>\n\n\n<div class=\"em-box align-left\">\n<?php echo __d('baser', '\u73fe\u5728\u306e\u4f4d\u7f6e')?>\uff1a<?php echo h($currentPath) ?>\n</div>\n\n<?php if($theme\t!= 'core' && !$isWritable): ?>\n<div id=\"AlertMessage\"><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u306a\u3044\u306e\u3067\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093\u3002')?></div>\n<?php endif ?>\n\n<?php if ($this->request->action == 'admin_add'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'add'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t<?php echo $this->BcForm->create('ThemeFile', ['id' => 'ThemeFileForm', 'url' => array_merge(['action' => 'edit'], [$theme, $plugin, $type], explode('/', $path))]) ?>\n<?php endif ?>\n\n<?php echo $this->BcFormTable->dispatchBefore() ?>\n\n<?php echo $this->BcForm->input('ThemeFile.parent', ['type' => 'hidden']) ?>\n\n<!-- form -->\n<div class=\"section\">\n\t<table cellpadding=\"0\" cellspacing=\"0\" id=\"FormTable\" class=\"form-table\">\n\t\t<tr>\n\t\t\t<th class=\"col-head\"><?php echo $this->BcForm->label('ThemeFile.name', __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d')) ?>&nbsp;<span class=\"required\">*</span></th>\n\t\t\t<td class=\"col-input\">\n\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'maxlength' => 255, 'autofocus' => true]) ?>\n\t\t\t\t\t<?php if ($this->BcForm->value('ThemeFile.ext')): ?>.<?php endif ?>\n\t\t\t\t\t<?php echo h($this->BcForm->value('ThemeFile.ext')) ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t\t<?php echo $this->Html->image('admin/icn_help.png', ['id' => 'helpName', 'class' => 'btn help', 'alt' => __d('baser', '\u30d8\u30eb\u30d7')]) ?>\n\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.name') ?>\n\t\t\t\t\t<div id=\"helptextName\" class=\"helptext\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li><?php echo __d('baser', '\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u534a\u89d2\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002')?></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.name', ['type' => 'text', 'size' => 30, 'readonly' => 'readonly']) ?> .<?php echo $this->BcForm->value('ThemeFile.ext') ?>\n\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.ext', ['type' => 'hidden']) ?>\n\t\t\t\t<?php endif ?>\n\t\t\t</td>\n\t\t</tr>\n\t\t<?php if ($this->request->action == 'admin_add' || (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && in_array($this->request->data['ThemeFile']['type'], ['text', 'image']))): ?>\n\t\t\t<tr>\n\t\t\t\t<th class=\"col-head\"><?php echo $this->BcForm->label('ThemeFile.contents', __d('baser', '\u5185\u5bb9')) ?></th>\n\t\t\t\t<td class=\"col-input\">\n\t\t\t\t\t<?php if (($this->request->action == 'admin_edit' || $this->request->action == 'admin_view') && $this->request->data['ThemeFile']['type'] == 'image'): ?>\n\t\t\t\t\t\t<div class=\"align-center\" style=\"margin:20px auto\">\n\t\t\t\t\t\t\t<?php $this->BcBaser->link(\n\t\t\t\t\t\t\t\t$this->BcBaser->getImg(array_merge(['action' => 'img_thumb', 550, 550, $theme, $plugin, $type], explode('/', $path)), ['alt' => basename($path)]), array_merge(['action' => 'img', $theme, $plugin, $type], explode('/', $path)), ['rel' => 'colorbox', 'title' => basename($path)]\n\t\t\t\t\t\t\t); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php elseif ($this->request->action == 'admin_add' || $this->request->data['ThemeFile']['type'] == 'text'): ?>\n\t\t\t\t\t\t<?php if ($this->request->action != 'admin_view'): ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30]) ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->error('ThemeFile.contents') ?>\n\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t<?php echo $this->BcForm->input('ThemeFile.contents', ['type' => 'textarea', 'cols' => 80, 'rows' => 30, 'readonly' => 'readonly']) ?>\n\t\t\t\t\t\t<?php endif ?>\n\t\t\t\t\t<?php endif ?>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t<?php endif ?>\n\t\t<?php echo $this->BcForm->dispatchAfterForm() ?>\n\t</table>\n</div>\n\n<?php echo $this->BcFormTable->dispatchAfter() ?>\n\n<div class=\"submit\">\n\t<?php if ($this->request->action == 'admin_add'): ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php echo $this->BcForm->submit(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button', 'id' => 'BtnSave']) ?>\n\t<?php elseif ($this->request->action == 'admin_edit'): ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php if($isWritable): ?>\n\t\t\t<?php echo $this->BcForm->submit(__d('baser', '\u4fdd\u5b58'), ['div' => false, 'class' => 'button', 'id' => 'BtnSave']) ?>\n\t\t\t<?php $this->BcBaser->link(__d('baser', '\u524a\u9664'), array_merge(['action' => 'del', $theme, $plugin, $type], $params), ['class' => 'submit-token button'], sprintf(__d('baser', '%s \u3092\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f'), basename($path)), false) ?>\n\t\t<?php endif ?>\n\t<?php else: ?>\n\t\t<?php $this->BcBaser->link(__d('baser', '\u4e00\u89a7\u306b\u623b\u308b'), array_merge(['action' => 'index', $theme, $plugin, $type], $parentPrams), ['class' => 'btn-gray button']); ?>\n\t\t<?php // \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a2\u30bb\u30c3\u30c8\u306e\u5834\u5408\u306f\u30b3\u30d4\u30fc\u3067\u304d\u306a\u3044 ?>\n\t\t<?php if (!$safeModeOn): ?>\n\t\t\t<?php //if($theme == 'core' && !(($type == 'css' || $type == 'js' || $type == 'img') && $plugin)): ?>\n\t\t\t<?php // \u30c6\u30fc\u30de\u7de8\u96c6\u304c\u8a31\u53ef\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u30b3\u30d4\u30fc\u4e0d\u53ef ?>\n\t\t\t<?php if ($theme == 'core' && Configure::read('BcApp.allowedThemeEdit')): ?>\n\t\t\t\t<?php $this->BcBaser->link(__d('baser', '\u73fe\u5728\u306e\u30c6\u30fc\u30de\u306b\u30b3\u30d4\u30fc'), array_merge(['action' => 'copy_to_theme', $theme, $plugin, $type], explode('/', $path)), ['class' => 'submit-token btn-red button'], sprintf(__d('baser', \"\u672c\u5f53\u306b\u73fe\u5728\u306e\u30c6\u30fc\u30de\u300c %s \u300d\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f\\n\u65e2\u306b\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\"), Inflector::camelize($siteConfig['theme']))); ?>\n\t\t\t<?php endif; ?>\n\t\t<?php else: ?>\n            <?php echo __d('baser', '\u6a5f\u80fd\u5236\u9650\u306e\u30bb\u30fc\u30d5\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u73fe\u5728\u306e\u30c6\u30fc\u30de\u3078\u306e\u30b3\u30d4\u30fc\u306f\u3067\u304d\u307e\u305b\u3093\u3002')?>\n\t\t<?php endif; ?>\n\t<?php endif; ?>\n</div>\n\n<?php echo $this->BcForm->end() ?>\n"], "filenames": ["app/webroot/theme/admin-third/Elements/admin/themes/index_list.php", "app/webroot/theme/admin-third/Elements/admin/themes/index_row.php", "app/webroot/theme/admin-third/ThemeFiles/admin/form.php", "lib/Baser/Config/setting.php", "lib/Baser/Controller/ThemeFilesController.php", "lib/Baser/View/Elements/admin/themes/index_list.php", "lib/Baser/View/Elements/admin/themes/index_row.php", "lib/Baser/View/ThemeFiles/admin/form.php"], "buggy_code_start_loc": [38, 33, 108, 178, 76, 38, 34, 105], "buggy_code_end_loc": [78, 34, 114, 178, 905, 80, 35, 112], "fixing_code_start_loc": [38, 34, 108, 179, 77, 38, 34, 105], "fixing_code_end_loc": [80, 37, 115, 181, 923, 82, 37, 113], "type": "CWE-79", "message": "baserCMS before version 4.4.1 is vulnerable to Cross-Site Scripting. The issue affects the following components: Edit feed settings, Edit widget area, Sub site new registration, New category registration. Arbitrary JavaScript may be executed by entering specific characters in the account that can access the file upload function category list, subsite setting list, widget area edit, and feed list on the management screen. The issue was introduced in version 4.0.0. It is fixed in version 4.4.1.", "other": {"cve": {"id": "CVE-2020-15273", "sourceIdentifier": "security-advisories@github.com", "published": "2020-10-30T19:15:12.597", "lastModified": "2020-11-03T16:57:43.317", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "baserCMS before version 4.4.1 is vulnerable to Cross-Site Scripting. The issue affects the following components: Edit feed settings, Edit widget area, Sub site new registration, New category registration. Arbitrary JavaScript may be executed by entering specific characters in the account that can access the file upload function category list, subsite setting list, widget area edit, and feed list on the management screen. The issue was introduced in version 4.0.0. It is fixed in version 4.4.1."}, {"lang": "es", "value": "baserCMS anterior a la versi\u00f3n 4.4.1 es vulnerable a un ataque de tipo Cross-Site Scripting.&#xa0;El problema afecta a los siguientes componentes: Edit feed settings, Edit widget area, Sub site new registration, New category registration.&#xa0;Un JavaScript arbitrario puede ser ejecutado ingresando caracteres espec\u00edficos en la cuenta que puede acceder a la lista de categor\u00edas de funciones de carga de archivos, la lista subsite setting, la edici\u00f3n de widget area y la lista feed sobre la pantalla de administraci\u00f3n.&#xa0;El problema se introdujo en la versi\u00f3n 4.0.0.&#xa0;Est\u00e1 corregido en la versi\u00f3n 4.4.1"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:H/UI:R/S:C/C:H/I:H/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "HIGH", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "NONE", "baseScore": 8.1, "baseSeverity": "HIGH"}, "exploitabilityScore": 1.7, "impactScore": 5.8}, {"source": "security-advisories@github.com", "type": "Secondary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:H/PR:H/UI:R/S:C/C:H/I:H/A:N", "attackVector": "NETWORK", "attackComplexity": "HIGH", "privilegesRequired": "HIGH", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "NONE", "baseScore": 7.3, "baseSeverity": "HIGH"}, "exploitabilityScore": 1.0, "impactScore": 5.8}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:S/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "SINGLE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 3.5}, "baseSeverity": "LOW", "exploitabilityScore": 6.8, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "security-advisories@github.com", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:basercms:basercms:*:*:*:*:*:*:*:*", "versionStartIncluding": "4.0.0", "versionEndExcluding": "4.4.1", "matchCriteriaId": "BAB5F8EC-8396-41C0-8D37-10F8489CA598"}]}]}], "references": [{"url": "https://github.com/baserproject/basercms/commit/b70474ef9dcee6ad8826360884625dc7ca9041a1", "source": "security-advisories@github.com", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://github.com/baserproject/basercms/security/advisories/GHSA-wpww-4jf4-4hx8", "source": "security-advisories@github.com", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://packagist.org/packages/baserproject/basercms", "source": "security-advisories@github.com", "tags": ["Third Party Advisory"]}]}, "github_commit_url": "https://github.com/baserproject/basercms/commit/b70474ef9dcee6ad8826360884625dc7ca9041a1"}}